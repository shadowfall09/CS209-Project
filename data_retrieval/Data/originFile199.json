{"items":[{"tags":["java","apache-spark","jvm","amazon-emr","thread-dump"],"comments":[{"owner":{"account_id":434032,"reputation":487,"user_id":819730,"accept_rate":38,"display_name":"Aditya K"},"score":0,"creation_date":1653652408,"post_id":72062510,"comment_id":127908440,"body_markdown":"Hi, I am facing a very similar issue, though I am seeing them on EC2 with my spring boot app. Did you find an answer? I have searched everywhere online but unable to find anything and chanced upon your post. Also - are you using New Relic? I have a strong feeling these dumps have something to do with that.","body":"Hi, I am facing a very similar issue, though I am seeing them on EC2 with my spring boot app. Did you find an answer? I have searched everywhere online but unable to find anything and chanced upon your post. Also - are you using New Relic? I have a strong feeling these dumps have something to do with that."},{"owner":{"account_id":3006910,"reputation":199,"user_id":2651849,"display_name":"Maksim Grinman"},"score":0,"creation_date":1653881712,"post_id":72062510,"comment_id":127951261,"body_markdown":"@AdityaK I have not found a solution. I&#39;ve resorted to writing a script that pulls the logs and redacts the thread dumps. I&#39;m not using New Relic.","body":"@AdityaK I have not found a solution. I&#39;ve resorted to writing a script that pulls the logs and redacts the thread dumps. I&#39;m not using New Relic."},{"owner":{"account_id":434032,"reputation":487,"user_id":819730,"accept_rate":38,"display_name":"Aditya K"},"score":0,"creation_date":1653994155,"post_id":72062510,"comment_id":127981059,"body_markdown":"thank you for your reply. After my last message to you, I concluded that this has nothing to do with NR as well. However I notice this issue happens when I am running the app in the docker container with a non-root user. Also, on some occasions, just redeploying the app stopped those thread-dumps. Overall, It still remains a mystery to me.","body":"thank you for your reply. After my last message to you, I concluded that this has nothing to do with NR as well. However I notice this issue happens when I am running the app in the docker container with a non-root user. Also, on some occasions, just redeploying the app stopped those thread-dumps. Overall, It still remains a mystery to me."},{"owner":{"account_id":3006910,"reputation":199,"user_id":2651849,"display_name":"Maksim Grinman"},"score":0,"creation_date":1654611888,"post_id":72062510,"comment_id":128128719,"body_markdown":"Please do comment again if you find out. I will do the same.","body":"Please do comment again if you find out. I will do the same."},{"owner":{"account_id":434032,"reputation":487,"user_id":819730,"accept_rate":38,"display_name":"Aditya K"},"score":0,"creation_date":1656299913,"post_id":72062510,"comment_id":128529292,"body_markdown":"Hi @Maksim we have zeroed down the issue to Amazon Corretto JDK. We found that this issue was happening when running my spring boot app with a non-root user, on an image derived from Amazon Corretto JDK 11.","body":"Hi @Maksim we have zeroed down the issue to Amazon Corretto JDK. We found that this issue was happening when running my spring boot app with a non-root user, on an image derived from Amazon Corretto JDK 11."},{"owner":{"account_id":434032,"reputation":487,"user_id":819730,"accept_rate":38,"display_name":"Aditya K"},"score":0,"creation_date":1656890887,"post_id":72062510,"comment_id":128675049,"body_markdown":"Hi @Maksim, we have further confirmation on this - AWS confirmed that this was happening because of a log4j patcher running on the instance. I can provide more info if you need. Thanks.","body":"Hi @Maksim, we have further confirmation on this - AWS confirmed that this was happening because of a log4j patcher running on the instance. I can provide more info if you need. Thanks."},{"owner":{"account_id":3006910,"reputation":199,"user_id":2651849,"display_name":"Maksim Grinman"},"score":0,"creation_date":1657815385,"post_id":72062510,"comment_id":128905377,"body_markdown":"@AdityaK thanks, I guess that means we wait until they fix it","body":"@AdityaK thanks, I guess that means we wait until they fix it"},{"owner":{"account_id":434032,"reputation":487,"user_id":819730,"accept_rate":38,"display_name":"Aditya K"},"score":0,"creation_date":1658103152,"post_id":72062510,"comment_id":128960673,"body_markdown":"Hi @Maksim .. you have to raise a request with them in order to confirm the cause.","body":"Hi @Maksim .. you have to raise a request with them in order to confirm the cause."}],"answers":[{"tags":[],"owner":{"account_id":4662934,"reputation":2877,"user_id":3776765,"display_name":"M.Vanderlee"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694083075,"creation_date":1694083075,"answer_id":77058815,"question_id":72062510,"body_markdown":"I have a solution for viewing the logs on the the instance itself or other Unix environment. \r\n\r\nBy piping the output through a `mawk` filter we can remove the stacktrace when reading or tailing the logs.\r\n\r\nOn AWS Linux this requires you to install the `mawk` package from the Epel repository.\r\n```shell\r\nsudo amazon-linux-extras install epel -y\r\nsudo yum install mawk -y\r\n```\r\n\r\nCreate a function that creates a tmp filename, tails and filters the input file and write it to the tmp file. Then open the tmp file with `less` and remove the tmp file when the user closes `less`.\r\nThe filter removes all lines between `^Full thread dump` and `^\\[[0-9` \r\nWhich works for me because my logs start with `[2023-09-7 ...`\r\n\r\n```shell\r\nless_log() { \r\n  tmp_file=$(mktemp)\r\n  tail -f -n +1 $1 | mawk -W interactive &#39;/^Full thread dump/{f=1} /^\\[[0-9]/{f=0} !f&#39; &gt; &quot;$tmp_file&quot; &amp;\r\n  less &quot;$tmp_file&quot;; kill %; rm &quot;$tmp_file&quot;\r\n}\r\n```\r\n\r\nYou can now view the logs like this\r\n```shell\r\nless_log /var/log/hadoop-yarn/containers/application_1693901863825_0025/container_1693901863825_0025_01_000001/stdout\r\n```\r\n\r\nSources:\r\n - https://www.unix.com/shell-programming-and-scripting/189267-how-ignore-single-multiple-lines-between-while-reading-file-unix.html\r\n - https://superuser.com/a/1600093/1173501\r\n - https://unix.stackexchange.com/a/139295/160014","title":"How can I stop seeing JVM Full Thread dumps in my AWS EMR Spark job stdout logs?","body":"<p>I have a solution for viewing the logs on the the instance itself or other Unix environment.</p>\n<p>By piping the output through a <code>mawk</code> filter we can remove the stacktrace when reading or tailing the logs.</p>\n<p>On AWS Linux this requires you to install the <code>mawk</code> package from the Epel repository.</p>\n<pre class=\"lang-bash prettyprint-override\"><code>sudo amazon-linux-extras install epel -y\nsudo yum install mawk -y\n</code></pre>\n<p>Create a function that creates a tmp filename, tails and filters the input file and write it to the tmp file. Then open the tmp file with <code>less</code> and remove the tmp file when the user closes <code>less</code>.\nThe filter removes all lines between <code>^Full thread dump</code> and <code>^\\[[0-9</code>\nWhich works for me because my logs start with <code>[2023-09-7 ...</code></p>\n<pre class=\"lang-bash prettyprint-override\"><code>less_log() { \n  tmp_file=$(mktemp)\n  tail -f -n +1 $1 | mawk -W interactive '/^Full thread dump/{f=1} /^\\[[0-9]/{f=0} !f' &gt; &quot;$tmp_file&quot; &amp;\n  less &quot;$tmp_file&quot;; kill %; rm &quot;$tmp_file&quot;\n}\n</code></pre>\n<p>You can now view the logs like this</p>\n<pre class=\"lang-bash prettyprint-override\"><code>less_log /var/log/hadoop-yarn/containers/application_1693901863825_0025/container_1693901863825_0025_01_000001/stdout\n</code></pre>\n<p>Sources:</p>\n<ul>\n<li><a href=\"https://www.unix.com/shell-programming-and-scripting/189267-how-ignore-single-multiple-lines-between-while-reading-file-unix.html\" rel=\"nofollow noreferrer\">https://www.unix.com/shell-programming-and-scripting/189267-how-ignore-single-multiple-lines-between-while-reading-file-unix.html</a></li>\n<li><a href=\"https://superuser.com/a/1600093/1173501\">https://superuser.com/a/1600093/1173501</a></li>\n<li><a href=\"https://unix.stackexchange.com/a/139295/160014\">https://unix.stackexchange.com/a/139295/160014</a></li>\n</ul>\n"}],"owner":{"account_id":3006910,"reputation":199,"user_id":2651849,"display_name":"Maksim Grinman"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":995,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1694083075,"creation_date":1651258169,"question_id":72062510,"body_markdown":"I have PySpark jobs running in AWS EMR. Recently, I upgraded (AWS EMR 6.4, Spark 3.1.2) and switched to running the job in a docker container. Ever since, there are sporadic thread dumps in the stdout logs that start with `Full thread dump OpenJDK 64-Bit Server VM (25.312-b07 mixed mode)`. \r\n\r\nI&#39;ve been unable to figure out why they occur. There are no associated errors or warnings in stderr and the job is unaffected. However, these thread dumps make it difficult to read the stdout logs, and I have been unable to figure out why they are happening. Things I have tried include using previous versions of AWS/EMR and even simpler EMR configurations, as I suspected that AWS EMR is sending `SIGQUIT` somewhere, since I did not find anything in the Spark source that would do it (except for thread dumps initiated by the Spark UI, and the Spark task reader, which is disabled).\r\n\r\nAt a loss for what to do, I would resign to instructing the JVM to redirect these thread dumps or even ignore the signal for them, if that&#39;s an option. I am open to alternative suggestions.\r\n\r\nI am aware of `-Xrs` but I suspect it&#39;s not what I want, since it would likely kill the process on the first `SIGQUIT`. ","title":"How can I stop seeing JVM Full Thread dumps in my AWS EMR Spark job stdout logs?","body":"<p>I have PySpark jobs running in AWS EMR. Recently, I upgraded (AWS EMR 6.4, Spark 3.1.2) and switched to running the job in a docker container. Ever since, there are sporadic thread dumps in the stdout logs that start with <code>Full thread dump OpenJDK 64-Bit Server VM (25.312-b07 mixed mode)</code>.</p>\n<p>I've been unable to figure out why they occur. There are no associated errors or warnings in stderr and the job is unaffected. However, these thread dumps make it difficult to read the stdout logs, and I have been unable to figure out why they are happening. Things I have tried include using previous versions of AWS/EMR and even simpler EMR configurations, as I suspected that AWS EMR is sending <code>SIGQUIT</code> somewhere, since I did not find anything in the Spark source that would do it (except for thread dumps initiated by the Spark UI, and the Spark task reader, which is disabled).</p>\n<p>At a loss for what to do, I would resign to instructing the JVM to redirect these thread dumps or even ignore the signal for them, if that's an option. I am open to alternative suggestions.</p>\n<p>I am aware of <code>-Xrs</code> but I suspect it's not what I want, since it would likely kill the process on the first <code>SIGQUIT</code>.</p>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1694040338,"post_id":77055588,"comment_id":135840625,"body_markdown":"So you want to avoid splitting keys between partitions and treat the partition size as a minimum?","body":"So you want to avoid splitting keys between partitions and treat the partition size as a minimum?"},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1694040515,"post_id":77055588,"comment_id":135840641,"body_markdown":"You are almost certainly going to need to give up on any sort of existing `ListUtils` or `stream`; you are going to need to do this manually.","body":"You are almost certainly going to need to give up on any sort of existing <code>ListUtils</code> or <code>stream</code>; you are going to need to do this manually."},{"owner":{"account_id":1894123,"reputation":619,"user_id":1711465,"accept_rate":40,"display_name":"Vamsi"},"score":0,"creation_date":1694040523,"post_id":77055588,"comment_id":135840643,"body_markdown":"Yes, Thats correct. Keys shouldn&#39;t be split between partitions and the size of the partition can be the maximum number of elements the sublist can contain.","body":"Yes, Thats correct. Keys shouldn&#39;t be split between partitions and the size of the partition can be the maximum number of elements the sublist can contain."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":1,"creation_date":1694044083,"post_id":77055588,"comment_id":135840997,"body_markdown":"It can&#39;t be a maximum. What if there are too many identical keys?","body":"It can&#39;t be a maximum. What if there are too many identical keys?"},{"owner":{"account_id":1894123,"reputation":619,"user_id":1711465,"accept_rate":40,"display_name":"Vamsi"},"score":0,"creation_date":1694044837,"post_id":77055588,"comment_id":135841071,"body_markdown":"True. my bad. It&#39;s the minimum","body":"True. my bad. It&#39;s the minimum"},{"owner":{"account_id":1894123,"reputation":619,"user_id":1711465,"accept_rate":40,"display_name":"Vamsi"},"score":0,"creation_date":1694056485,"post_id":77055588,"comment_id":135841922,"body_markdown":"@shmosel May I know how to do avoid splitting keys between partitions","body":"@shmosel May I know how to do avoid splitting keys between partitions"}],"answers":[{"tags":[],"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1694082743,"creation_date":1694082743,"answer_id":77058781,"question_id":77055588,"body_markdown":"Moving the partition bounds only makes sense if the data is sorted or at least clustered by the key, as otherwise, additional occurrences could exist in arbitrary other partitions.\r\n\r\nIf the data is sorted, the task is rather trivial. Do what methods like `ListUtils.partition` do but add a check whether the last element’s key of a partition matches the next partition’s first element’s and if so, increase the end index of the partition:\r\n\r\n```java\r\nstatic &lt;T, K extends Comparable&lt;? super K&gt;&gt; List&lt;List&lt;T&gt;&gt; partition(\r\n    List&lt;T&gt; data, int minSize, Function&lt;T, K&gt; keyFunction) {\r\n\r\n    List&lt;T&gt; workingCopy = new ArrayList&lt;&gt;(data);\r\n    workingCopy.sort(Comparator.comparing(keyFunction));\r\n\r\n    List&lt;List&lt;T&gt;&gt; result = new ArrayList&lt;&gt;();\r\n    for(int ix = 0, ix2; ix &lt; data.size(); ix = ix2) {\r\n        ix2 = Math.min(workingCopy.size(), ix + minSize);\r\n        for(K lastKey = keyFunction.apply(workingCopy.get(ix2 - 1));\r\n            ix2 &lt; data.size()\r\n            &amp;&amp; Objects.equals(lastKey, keyFunction.apply(workingCopy.get(ix2)));) {\r\n            ix2++;\r\n        }\r\n        result.add(workingCopy.subList(ix, ix2));\r\n    }\r\n\r\n    return result;\r\n}\r\n```\r\n\r\nThis can be tested like\r\n\r\n```java\r\nrecord TestObj(int key, String name) {}\r\n\r\nList&lt;TestObj&gt; objectList = IntStream.range(&#39;A&#39;, &#39;Z&#39;)\r\n    .mapToObj(c -&gt; new TestObj(ThreadLocalRandom.current().nextInt(0, 10),\r\n                               &quot;&quot; + (char)c))\r\n    .toList();\r\n\r\nList&lt;List&lt;TestObj&gt;&gt; partitions = partition(objectList, 6, TestObj::key);\r\n\r\nSystem.out.println(partitions.size() + &quot; partitions&quot;);\r\n\r\nfor(List&lt;TestObj&gt; p: partitions) {\r\n    System.out.println(&quot;(&quot; + p.size() + &quot; elements)&quot;);\r\n    p.forEach(System.out::println);\r\n    System.out.println();\r\n}\r\n```\r\n\r\n[Test on jdoodle.com](https://jdoodle.com/ia/LU9)\r\n\r\nNote that if the key is not `Comparable` you can turn the sort operation into a clustering operation like\r\n\r\n```java\r\nMap&lt;Object, Integer&gt; chunkID = new HashMap&lt;&gt;();\r\nList&lt;List&lt;TestObj&gt;&gt; partitions = partition(objectList, 6,\r\n    o -&gt; chunkID.computeIfAbsent(o.key(), k -&gt; chunkID.size()));\r\n```\r\n\r\nSince this assigns each distinct key an ascending number in the order of occurrence, which is then used for sorting, it will minimize the changes made to the encounter order, making no changes if the elements are already clustered.\r\n","title":"Partition List on sublists where similar elements to be grouped","body":"<p>Moving the partition bounds only makes sense if the data is sorted or at least clustered by the key, as otherwise, additional occurrences could exist in arbitrary other partitions.</p>\n<p>If the data is sorted, the task is rather trivial. Do what methods like <code>ListUtils.partition</code> do but add a check whether the last element’s key of a partition matches the next partition’s first element’s and if so, increase the end index of the partition:</p>\n<pre class=\"lang-java prettyprint-override\"><code>static &lt;T, K extends Comparable&lt;? super K&gt;&gt; List&lt;List&lt;T&gt;&gt; partition(\n    List&lt;T&gt; data, int minSize, Function&lt;T, K&gt; keyFunction) {\n\n    List&lt;T&gt; workingCopy = new ArrayList&lt;&gt;(data);\n    workingCopy.sort(Comparator.comparing(keyFunction));\n\n    List&lt;List&lt;T&gt;&gt; result = new ArrayList&lt;&gt;();\n    for(int ix = 0, ix2; ix &lt; data.size(); ix = ix2) {\n        ix2 = Math.min(workingCopy.size(), ix + minSize);\n        for(K lastKey = keyFunction.apply(workingCopy.get(ix2 - 1));\n            ix2 &lt; data.size()\n            &amp;&amp; Objects.equals(lastKey, keyFunction.apply(workingCopy.get(ix2)));) {\n            ix2++;\n        }\n        result.add(workingCopy.subList(ix, ix2));\n    }\n\n    return result;\n}\n</code></pre>\n<p>This can be tested like</p>\n<pre class=\"lang-java prettyprint-override\"><code>record TestObj(int key, String name) {}\n\nList&lt;TestObj&gt; objectList = IntStream.range('A', 'Z')\n    .mapToObj(c -&gt; new TestObj(ThreadLocalRandom.current().nextInt(0, 10),\n                               &quot;&quot; + (char)c))\n    .toList();\n\nList&lt;List&lt;TestObj&gt;&gt; partitions = partition(objectList, 6, TestObj::key);\n\nSystem.out.println(partitions.size() + &quot; partitions&quot;);\n\nfor(List&lt;TestObj&gt; p: partitions) {\n    System.out.println(&quot;(&quot; + p.size() + &quot; elements)&quot;);\n    p.forEach(System.out::println);\n    System.out.println();\n}\n</code></pre>\n<p><a href=\"https://jdoodle.com/ia/LU9\" rel=\"nofollow noreferrer\">Test on jdoodle.com</a></p>\n<p>Note that if the key is not <code>Comparable</code> you can turn the sort operation into a clustering operation like</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;Object, Integer&gt; chunkID = new HashMap&lt;&gt;();\nList&lt;List&lt;TestObj&gt;&gt; partitions = partition(objectList, 6,\n    o -&gt; chunkID.computeIfAbsent(o.key(), k -&gt; chunkID.size()));\n</code></pre>\n<p>Since this assigns each distinct key an ascending number in the order of occurrence, which is then used for sorting, it will minimize the changes made to the encounter order, making no changes if the elements are already clustered.</p>\n"}],"owner":{"account_id":1894123,"reputation":619,"user_id":1711465,"accept_rate":40,"display_name":"Vamsi"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694082743,"creation_date":1694039325,"question_id":77055588,"body_markdown":"I have a `List&lt;object&gt;` elements. The list is huge. The list size would be around 1M records. I am trying to partition the list to get the min and max for each partition, which I will be passing them to the DB queries.\r\nI am currently doing this in the following way:\r\n\r\n    int gridSize = 6;\r\n    List&lt;object&gt; objectList = findAll();\r\n    List&lt;List&lt;object&gt;&gt; partitionedList = ListUtils.partition(objectList, (objectList.size() + gridSize - 1) / gridSize);\r\n    for(List&lt;object&gt; objects : partitionedList) {\r\n        List&lt;Long&gt; keys = objects.stream().map(x -&gt; x.getKey()).collect(Collectors.toList());\r\n        //Do some processing on keys collected in the above list\r\n        LongSummaryStatistics idStats = objects.stream().collect(Collectors.summarizingLong(e -&gt; e));\r\n        repo.callToDb(idStats.getMin(), idStats.getMax());\r\n        //further processing\r\n    }\r\n\r\nThe above code works fine but I have repeated keys in my objects like this:&lt;br&gt;\r\nInput:\r\n\r\n    Car[id: 1, name:Tesla, Key: 1]\r\n    Car[id: 2, name:Tesla-3, Key: 2]\r\n    Car[id: 3, name:Tesla-Y, Key: 2]\r\n    Car[id: 4, name:Tesla-S, Key: 3]\r\n\r\nWhen I do a Partition with the above code with chunk size: 2 I get the partition as:\r\n\r\n    Partition-1:\r\n    Car[id: 1, name:Tesla, Key: 1]\r\n    Car[id: 2, name:Tesla-3, Key: 2]\r\n    \r\n    Partition-2:\r\n    Car[id: 3, name:Tesla-Y, Key: 2]\r\n    Car[id: 4, name:Tesla-S, Key: 3]\r\n\r\nInstead I want the keys from the first partition to not be repeated on the second partition.\r\n\r\nSo, essentially I want the partition to look like this:\r\n\r\n    Partition-1:\r\n    Car[id: 1, name:Tesla, Key: 1]\r\n    Car[id: 2, name:Tesla-3, Key: 2]\r\n    Car[id: 3, name:Tesla-Y, Key: 2]\r\n    \r\n    Partition-2:\r\n    Car[id: 4, name:Tesla-S, Key: 3]\r\n\r\nIs there a way I can achieve this with a chunk size as mentioned. Thanks in advance!\r\n\r\nEdit:\r\nHere is what I wrote:\r\n\r\n    int gridSize = 6;\r\n    List&lt;List&lt;object&gt;&gt; partitionedList = new ArrayList&lt;&gt;();\r\n    Map&lt;Integer, Pair&lt;Long, Long&gt;&gt; minMaxPairMap = new HashMap&lt;&gt;();\r\n    List&lt;object&gt; objectList = findAll();\r\n    List&lt;object&gt; uniqueKeys = objectList.stream()\r\n    \t\t\t\t.filter(distinctByKey(x -&gt; x.getKey())).collect(Collectors.toList());\r\n    List&lt;List&lt;object&gt;&gt; uniqueKeysPartition = ListUtils.partition(uniqueKeys,\r\n    \t\t\t\t(uniqueKeys.size() + gridSize - 1) / gridSize);\r\n    for (int i = 0; i &lt; uniqueKeysPartition.size(); i++) {\r\n    \tList&lt;object&gt; ojList = uniqueKeysPartition.get(i);\r\n    \t\t\tLongSummaryStatistics longSummaryStatistics = ojList.stream().map(object::getKey).collect(Collectors.toList()).stream().collect(Collectors.summarizingLong(e -&gt; e));\r\n        minMaxPairMap.put(i, Pair.of(longSummaryStatistics.getMin(), longSummaryStatistics.getMax()));\r\n        partitionedList.add(objectList.subList(\r\n    \t\t\t\t\tgetFirstIndexOf(objectList, longSummaryStatistics.getMin()),\r\n    \t\t\t\t\tgetLastIndexOf(objectList, longSummaryStatistics.getMax()) + 1));\r\n    }\r\n    for (int i = 0; i &lt; partitionedList.size(); i++) {\r\n        List&lt;Long&gt; keys = objects.stream().map(x -&gt; x.getKey()).collect(Collectors.toList());\r\n        //Do some processing on keys collected in the above list\r\n        Pair&lt;Long, Long&gt; minMaxPair = minMaxPairMap.get(i);\r\n        repo.callToDb(minMaxPair.getFirst(), minMaxPair.getSecond());\r\n        //further processing\r\n    }\r\n\r\nIs there a better way to achieve this because I feel I have complicated it to achieve what I want?","title":"Partition List on sublists where similar elements to be grouped","body":"<p>I have a <code>List&lt;object&gt;</code> elements. The list is huge. The list size would be around 1M records. I am trying to partition the list to get the min and max for each partition, which I will be passing them to the DB queries.\nI am currently doing this in the following way:</p>\n<pre><code>int gridSize = 6;\nList&lt;object&gt; objectList = findAll();\nList&lt;List&lt;object&gt;&gt; partitionedList = ListUtils.partition(objectList, (objectList.size() + gridSize - 1) / gridSize);\nfor(List&lt;object&gt; objects : partitionedList) {\n    List&lt;Long&gt; keys = objects.stream().map(x -&gt; x.getKey()).collect(Collectors.toList());\n    //Do some processing on keys collected in the above list\n    LongSummaryStatistics idStats = objects.stream().collect(Collectors.summarizingLong(e -&gt; e));\n    repo.callToDb(idStats.getMin(), idStats.getMax());\n    //further processing\n}\n</code></pre>\n<p>The above code works fine but I have repeated keys in my objects like this:<br>\nInput:</p>\n<pre><code>Car[id: 1, name:Tesla, Key: 1]\nCar[id: 2, name:Tesla-3, Key: 2]\nCar[id: 3, name:Tesla-Y, Key: 2]\nCar[id: 4, name:Tesla-S, Key: 3]\n</code></pre>\n<p>When I do a Partition with the above code with chunk size: 2 I get the partition as:</p>\n<pre><code>Partition-1:\nCar[id: 1, name:Tesla, Key: 1]\nCar[id: 2, name:Tesla-3, Key: 2]\n\nPartition-2:\nCar[id: 3, name:Tesla-Y, Key: 2]\nCar[id: 4, name:Tesla-S, Key: 3]\n</code></pre>\n<p>Instead I want the keys from the first partition to not be repeated on the second partition.</p>\n<p>So, essentially I want the partition to look like this:</p>\n<pre><code>Partition-1:\nCar[id: 1, name:Tesla, Key: 1]\nCar[id: 2, name:Tesla-3, Key: 2]\nCar[id: 3, name:Tesla-Y, Key: 2]\n\nPartition-2:\nCar[id: 4, name:Tesla-S, Key: 3]\n</code></pre>\n<p>Is there a way I can achieve this with a chunk size as mentioned. Thanks in advance!</p>\n<p>Edit:\nHere is what I wrote:</p>\n<pre><code>int gridSize = 6;\nList&lt;List&lt;object&gt;&gt; partitionedList = new ArrayList&lt;&gt;();\nMap&lt;Integer, Pair&lt;Long, Long&gt;&gt; minMaxPairMap = new HashMap&lt;&gt;();\nList&lt;object&gt; objectList = findAll();\nList&lt;object&gt; uniqueKeys = objectList.stream()\n                .filter(distinctByKey(x -&gt; x.getKey())).collect(Collectors.toList());\nList&lt;List&lt;object&gt;&gt; uniqueKeysPartition = ListUtils.partition(uniqueKeys,\n                (uniqueKeys.size() + gridSize - 1) / gridSize);\nfor (int i = 0; i &lt; uniqueKeysPartition.size(); i++) {\n    List&lt;object&gt; ojList = uniqueKeysPartition.get(i);\n            LongSummaryStatistics longSummaryStatistics = ojList.stream().map(object::getKey).collect(Collectors.toList()).stream().collect(Collectors.summarizingLong(e -&gt; e));\n    minMaxPairMap.put(i, Pair.of(longSummaryStatistics.getMin(), longSummaryStatistics.getMax()));\n    partitionedList.add(objectList.subList(\n                    getFirstIndexOf(objectList, longSummaryStatistics.getMin()),\n                    getLastIndexOf(objectList, longSummaryStatistics.getMax()) + 1));\n}\nfor (int i = 0; i &lt; partitionedList.size(); i++) {\n    List&lt;Long&gt; keys = objects.stream().map(x -&gt; x.getKey()).collect(Collectors.toList());\n    //Do some processing on keys collected in the above list\n    Pair&lt;Long, Long&gt; minMaxPair = minMaxPairMap.get(i);\n    repo.callToDb(minMaxPair.getFirst(), minMaxPair.getSecond());\n    //further processing\n}\n</code></pre>\n<p>Is there a better way to achieve this because I feel I have complicated it to achieve what I want?</p>\n"},{"tags":["java","floating-point","double","bigdecimal"],"comments":[{"owner":{"account_id":88430,"reputation":2355,"user_id":244594,"accept_rate":71,"display_name":"Espen Schulstad"},"score":0,"creation_date":1281001707,"post_id":3413448,"comment_id":35427793,"body_markdown":"Check out this one; http://stackoverflow.com/questions/322749/retain-precision-with-doubles-in-java","body":"Check out this one; <a href=\"http://stackoverflow.com/questions/322749/retain-precision-with-doubles-in-java\" title=\"retain precision with doubles in java\">stackoverflow.com/questions/322749/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":171578,"reputation":10558,"user_id":399104,"accept_rate":78,"display_name":"Truong Ha"},"score":3,"creation_date":1281001889,"post_id":3413493,"comment_id":3552320,"body_markdown":"Yep, I&#39;m calculating the price for stock so I believe BigDecimal is useful in this case.","body":"Yep, I&#39;m calculating the price for stock so I believe BigDecimal is useful in this case."},{"owner":{"account_id":12478,"reputation":23673,"user_id":24582,"display_name":"extraneon"},"score":6,"creation_date":1281008815,"post_id":3413493,"comment_id":3553136,"body_markdown":"@Truong Ha: When working with prices you want to use BigDecimal. And if you store them in the database you want something similar.","body":"@Truong Ha: When working with prices you want to use BigDecimal. And if you store them in the database you want something similar."},{"owner":{"account_id":170594,"reputation":659,"user_id":397408,"display_name":"procrastinate_later"},"score":151,"creation_date":1377100761,"post_id":3413493,"comment_id":26959200,"body_markdown":"Saying that &quot;BigDecimal is an exact way of representing numbers&quot; is misleading. 1/3 and 1/7 can&#39;t be expressed exactly in a base 10 number system (BigDecimal) or in base 2 number system (float or double). 1/3 could be exactly expressed in base 3, base 6, base 9, base 12, etc. and 1/7 could be expressed exactly in base 7, base 14, base 21, etc. BigDecimal advantages are that it is arbitrary precision and that humans are used to the rounding errors you get in base 10.","body":"Saying that &quot;BigDecimal is an exact way of representing numbers&quot; is misleading. 1/3 and 1/7 can&#39;t be expressed exactly in a base 10 number system (BigDecimal) or in base 2 number system (float or double). 1/3 could be exactly expressed in base 3, base 6, base 9, base 12, etc. and 1/7 could be expressed exactly in base 7, base 14, base 21, etc. BigDecimal advantages are that it is arbitrary precision and that humans are used to the rounding errors you get in base 10."},{"owner":{"account_id":198768,"reputation":1124,"user_id":443633,"display_name":"michaelok"},"score":4,"creation_date":1507735445,"post_id":3413493,"comment_id":80331716,"body_markdown":"Good point about it being slower, helps me understand why the Netflix Ribbon load balancer code deals with doubles, and then has lines like this: `if (Math.abs(loadPerServer - maxLoadPerServer) &lt; 0.000001d) {`","body":"Good point about it being slower, helps me understand why the Netflix Ribbon load balancer code deals with doubles, and then has lines like this: <code>if (Math.abs(loadPerServer - maxLoadPerServer) &lt; 0.000001d) {</code>"},{"owner":{"account_id":3362870,"reputation":2073,"user_id":2824289,"accept_rate":78,"display_name":"jspinella"},"score":0,"creation_date":1571409177,"post_id":3413493,"comment_id":103243583,"body_markdown":"@extraneon I think you mean to say &quot;if **accuracy** is a must, use `BigDecimal`&quot;, a Double would have more &quot;precision&quot; (more digits).","body":"@extraneon I think you mean to say &quot;if <b>accuracy</b> is a must, use <code>BigDecimal</code>&quot;, a Double would have more &quot;precision&quot; (more digits)."},{"owner":{"account_id":4225608,"reputation":14192,"user_id":3459206,"accept_rate":90,"display_name":"Alex Salauyou"},"score":0,"creation_date":1694037758,"post_id":3413493,"comment_id":135840380,"body_markdown":"`BigDecimal` exactly represents only numbers which can be written as finite decimal numbers, i.e. `x*10^y` where `x` and `y` are integers.","body":"<code>BigDecimal</code> exactly represents only numbers which can be written as finite decimal numbers, i.e. <code>x*10^y</code> where <code>x</code> and <code>y</code> are integers."},{"owner":{"account_id":3068349,"reputation":323,"user_id":2599571,"accept_rate":78,"display_name":"DCameronMauch"},"score":0,"creation_date":1694709796,"post_id":3413493,"comment_id":135930376,"body_markdown":"I used to work at Exegy (high speed trading hardware platform as a solution). Everything was integer based. Precise representation of money. For example, USD would be in terms of cents, as integers.","body":"I used to work at Exegy (high speed trading hardware platform as a solution). Everything was integer based. Precise representation of money. For example, USD would be in terms of cents, as integers."}],"tags":[],"owner":{"account_id":12478,"reputation":23673,"user_id":24582,"display_name":"extraneon"},"comment_count":7,"down_vote_count":4,"up_vote_count":597,"is_accepted":true,"score":593,"last_activity_date":1666000832,"creation_date":1281001512,"answer_id":3413493,"question_id":3413448,"body_markdown":"A `BigDecimal` is an exact way of representing numbers. A `Double` has a certain precision. Working with doubles of various magnitudes (say `d1=1000.0` and `d2=0.001`) could result in the `0.001` being dropped altogether when summing as the difference in magnitude is so large. With `BigDecimal` this would not happen.\r\n\r\nThe disadvantage of `BigDecimal` is that it&#39;s slower, and it&#39;s a bit more difficult to program algorithms that way (due to `+` `-` `*` and `/` not being overloaded).\r\n\r\nIf you are dealing with money, or precision is a must, use `BigDecimal`. Otherwise `Doubles` tend to be good enough.\r\n\r\nI do recommend reading the [javadoc][1] of `BigDecimal` as they do explain things better than I do here :)\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html","title":"Double vs. BigDecimal?","body":"<p>A <code>BigDecimal</code> is an exact way of representing numbers. A <code>Double</code> has a certain precision. Working with doubles of various magnitudes (say <code>d1=1000.0</code> and <code>d2=0.001</code>) could result in the <code>0.001</code> being dropped altogether when summing as the difference in magnitude is so large. With <code>BigDecimal</code> this would not happen.</p>\n<p>The disadvantage of <code>BigDecimal</code> is that it's slower, and it's a bit more difficult to program algorithms that way (due to <code>+</code> <code>-</code> <code>*</code> and <code>/</code> not being overloaded).</p>\n<p>If you are dealing with money, or precision is a must, use <code>BigDecimal</code>. Otherwise <code>Doubles</code> tend to be good enough.</p>\n<p>I do recommend reading the <a href=\"http://download.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html\" rel=\"noreferrer\">javadoc</a> of <code>BigDecimal</code> as they do explain things better than I do here :)</p>\n"},{"comments":[{"owner":{"account_id":3017633,"reputation":789,"user_id":2559317,"accept_rate":50,"display_name":"Vortex"},"score":9,"creation_date":1475545175,"post_id":29622364,"comment_id":66975356,"body_markdown":"This answer truly explains the difference and the reason of using BigDecimal over double. Performance concerns are secondary.","body":"This answer truly explains the difference and the reason of using BigDecimal over double. Performance concerns are secondary."},{"owner":{"account_id":3811826,"reputation":729,"user_id":3162418,"accept_rate":65,"display_name":"vaibhav.g"},"score":0,"creation_date":1627713938,"post_id":29622364,"comment_id":121234517,"body_markdown":"@Meros - can you elaborate - &quot;arbitrary precision&quot; ?","body":"@Meros - can you elaborate - &quot;arbitrary precision&quot; ?"},{"owner":{"account_id":341036,"reputation":1318,"user_id":671395,"display_name":"Meros"},"score":0,"creation_date":1627801862,"post_id":29622364,"comment_id":121249467,"body_markdown":"https://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html","body":"<a href=\"https://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html</a>"}],"tags":[],"owner":{"account_id":341036,"reputation":1318,"user_id":671395,"display_name":"Meros"},"comment_count":3,"down_vote_count":0,"up_vote_count":81,"is_accepted":false,"score":81,"last_activity_date":1628004705,"creation_date":1428999535,"answer_id":29622364,"question_id":3413448,"body_markdown":"There are two main differences from double:\r\n \r\n* Arbitrary precision, similarly to BigInteger they can contain number of arbitrary precision and size (whereas a double has a fixed number of bits)\r\n* Base 10 instead of Base 2, a BigDecimal is `n*10^-scale` where n is an arbitrary large signed integer and scale can be thought of as the number of digits to move the decimal point left or right\r\n\r\nIt is still not true to say that BigDecimal can represent any number. But two reasons you should use BigDecimal for monetary calculations are:\r\n\r\n* It can represent all numbers that can be represented in decimal notion and that includes virtually all numbers in the monetary world (you never transfer 1/3 $ to someone).\r\n* The precision can be controlled to avoid accumulated errors. With a `double`, as the magnitude of the value increases, its precision decreases and this can introduce significant error into the result.","title":"Double vs. BigDecimal?","body":"<p>There are two main differences from double:</p>\n<ul>\n<li>Arbitrary precision, similarly to BigInteger they can contain number of arbitrary precision and size (whereas a double has a fixed number of bits)</li>\n<li>Base 10 instead of Base 2, a BigDecimal is <code>n*10^-scale</code> where n is an arbitrary large signed integer and scale can be thought of as the number of digits to move the decimal point left or right</li>\n</ul>\n<p>It is still not true to say that BigDecimal can represent any number. But two reasons you should use BigDecimal for monetary calculations are:</p>\n<ul>\n<li>It can represent all numbers that can be represented in decimal notion and that includes virtually all numbers in the monetary world (you never transfer 1/3 $ to someone).</li>\n<li>The precision can be controlled to avoid accumulated errors. With a <code>double</code>, as the magnitude of the value increases, its precision decreases and this can introduce significant error into the result.</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1463168306,"post_id":31486748,"comment_id":61967210,"body_markdown":"BigDecimal is *part* of *Java&#39;s* arbitrary-precision numerical library. &#39;In-house&#39; is rather meaningless in this context, especially as it was written by IBM.","body":"BigDecimal is <i>part</i> of <i>Java&#39;s</i> arbitrary-precision numerical library. &#39;In-house&#39; is rather meaningless in this context, especially as it was written by IBM."},{"owner":{"account_id":455032,"reputation":2720,"user_id":853001,"display_name":"realPK"},"score":0,"creation_date":1487648990,"post_id":31486748,"comment_id":71867265,"body_markdown":"@EJP: I looked into BigDecimal class and learned that only portion of it is written by IBM. Copyright comment below:\n\n`/*\n * Portions Copyright IBM Corporation, 2001. All Rights Reserved.\n */`","body":"@EJP: I looked into BigDecimal class and learned that only portion of it is written by IBM. Copyright comment below:  <code>&#47;*  * Portions Copyright IBM Corporation, 2001. All Rights Reserved.  *&#47;</code>"},{"owner":{"account_id":4225608,"reputation":14192,"user_id":3459206,"accept_rate":90,"display_name":"Alex Salauyou"},"score":0,"creation_date":1694081688,"post_id":31486748,"comment_id":135845588,"body_markdown":"_The round-off error is most likely somewhere so deep inside the JVM_---the error is hold not &quot;deep in JVM&quot;, it is hold in assumption that 1/3 = 0.3333. When you make `new BigDecimal(&quot;0.3333&quot;)` the decimal 0.3333 is stored exactly.","body":"<i>The round-off error is most likely somewhere so deep inside the JVM</i>---the error is hold not &quot;deep in JVM&quot;, it is hold in assumption that 1/3 = 0.3333. When you make <code>new BigDecimal(&quot;0.3333&quot;)</code> the decimal 0.3333 is stored exactly."}],"tags":[],"owner":{"account_id":3282789,"reputation":195,"user_id":2762976,"display_name":"fishermanhat"},"comment_count":3,"down_vote_count":2,"up_vote_count":13,"is_accepted":false,"score":11,"last_activity_date":1487877275,"creation_date":1437181126,"answer_id":31486748,"question_id":3413448,"body_markdown":"BigDecimal is Oracle&#39;s arbitrary-precision numerical library. BigDecimal is part of the Java language and is useful for a variety of applications ranging from the financial to the scientific (that&#39;s where sort of am).\r\n\r\nThere&#39;s nothing wrong with using doubles for certain calculations. Suppose, however, you wanted to calculate Math.Pi * Math.Pi / 6, that is, the value of the Riemann Zeta Function for a real argument of two (a project I&#39;m currently working on). Floating-point division presents you with a painful problem of rounding error.\r\n\r\nBigDecimal, on the other hand, includes many options for calculating expressions to arbitrary precision. The add, multiply, and divide methods as described in the Oracle documentation below &quot;take the place&quot; of +, *, and / in BigDecimal Java World:\r\n\r\nhttp://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html\r\n\r\nThe compareTo method is especially useful in while and for loops.\r\n\r\nBe careful, however, in your use of constructors for BigDecimal. The string constructor is very useful in many cases. For instance, the code\r\n\r\nBigDecimal onethird = new BigDecimal(&quot;0.33333333333&quot;);\r\n\r\nutilizes a string representation of 1/3 to represent that infinitely-repeating number to a specified degree of accuracy. The round-off error is most likely somewhere so deep inside the JVM that the round-off errors won&#39;t disturb most of your practical calculations. I have, from personal experience, seen round-off creep up, however. The setScale method is important in these regards, as can be seen from the Oracle documentation.\r\n","title":"Double vs. BigDecimal?","body":"<p>BigDecimal is Oracle's arbitrary-precision numerical library. BigDecimal is part of the Java language and is useful for a variety of applications ranging from the financial to the scientific (that's where sort of am).</p>\n\n<p>There's nothing wrong with using doubles for certain calculations. Suppose, however, you wanted to calculate Math.Pi * Math.Pi / 6, that is, the value of the Riemann Zeta Function for a real argument of two (a project I'm currently working on). Floating-point division presents you with a painful problem of rounding error.</p>\n\n<p>BigDecimal, on the other hand, includes many options for calculating expressions to arbitrary precision. The add, multiply, and divide methods as described in the Oracle documentation below \"take the place\" of +, *, and / in BigDecimal Java World:</p>\n\n<p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html\" rel=\"noreferrer\">http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html</a></p>\n\n<p>The compareTo method is especially useful in while and for loops.</p>\n\n<p>Be careful, however, in your use of constructors for BigDecimal. The string constructor is very useful in many cases. For instance, the code</p>\n\n<p>BigDecimal onethird = new BigDecimal(\"0.33333333333\");</p>\n\n<p>utilizes a string representation of 1/3 to represent that infinitely-repeating number to a specified degree of accuracy. The round-off error is most likely somewhere so deep inside the JVM that the round-off errors won't disturb most of your practical calculations. I have, from personal experience, seen round-off creep up, however. The setScale method is important in these regards, as can be seen from the Oracle documentation.</p>\n"},{"comments":[{"owner":{"account_id":6343474,"reputation":744,"user_id":4924737,"accept_rate":78,"display_name":"Ludvig W"},"score":12,"creation_date":1502265979,"post_id":37217646,"comment_id":78128788,"body_markdown":"@eldjon Thats not true, Look at this example:\n\nBigDecimal two = new BigDecimal(&quot;2&quot;);\nBigDecimal eight = new BigDecimal(&quot;8&quot;);\nSystem.out.println(two.divide(eight));\nThis prints out 0.25.","body":"@eldjon Thats not true, Look at this example:  BigDecimal two = new BigDecimal(&quot;2&quot;); BigDecimal eight = new BigDecimal(&quot;8&quot;); System.out.println(two.divide(eight)); This prints out 0.25."},{"owner":{"account_id":3906953,"reputation":11659,"user_id":3233398,"accept_rate":9,"display_name":"EliuX"},"score":0,"creation_date":1531320717,"post_id":37217646,"comment_id":89554892,"body_markdown":"Nonetheless if you use a float instead you get the same precision than BigDecimal in that case but way better performance","body":"Nonetheless if you use a float instead you get the same precision than BigDecimal in that case but way better performance"},{"owner":{"account_id":1437036,"reputation":2679,"user_id":1358179,"display_name":"Martin"},"score":4,"creation_date":1533721730,"post_id":37217646,"comment_id":90447055,"body_markdown":"@EliuX Float may work with 0.03-0.02, but other values are still imprecise: `System.out.println(0.003f - 0.002f);` BigDecimal is exact: `System.out.println(new BigDecimal(&quot;0.003&quot;).subtract(new BigDecimal(&quot;0.002&quot;)));`","body":"@EliuX Float may work with 0.03-0.02, but other values are still imprecise: <code>System.out.println(0.003f - 0.002f);</code> BigDecimal is exact: <code>System.out.println(new BigDecimal(&quot;0.003&quot;).subtract(new BigDecimal(&quot;0.002&quot;)));</code>"},{"owner":{"account_id":2992157,"reputation":97,"user_id":2539512,"display_name":"Joaquim Perez"},"score":0,"creation_date":1646398751,"post_id":37217646,"comment_id":126119215,"body_markdown":"But this is because you are not printing the float point properly. The idea is use double to do calculations. Once you get the result, transform it to BigDecimal. Set up your precision and rounding settings and print it.  Alternatively you can use a Formatter","body":"But this is because you are not printing the float point properly. The idea is use double to do calculations. Once you get the result, transform it to BigDecimal. Set up your precision and rounding settings and print it.  Alternatively you can use a Formatter"},{"owner":{"account_id":2992157,"reputation":97,"user_id":2539512,"display_name":"Joaquim Perez"},"score":0,"creation_date":1646399033,"post_id":37217646,"comment_id":126119324,"body_markdown":"For example 0.00999999999998  rounded gives you exactly 0.01","body":"For example 0.00999999999998  rounded gives you exactly 0.01"},{"owner":{"account_id":21004999,"reputation":788,"user_id":15435022,"display_name":"mattsmith5"},"score":0,"creation_date":1676834274,"post_id":37217646,"comment_id":133212679,"body_markdown":"can someone explain why does this happen?","body":"can someone explain why does this happen?"}],"tags":[],"owner":{"account_id":6878297,"reputation":2670,"user_id":5285983,"display_name":"Basil"},"comment_count":6,"down_vote_count":4,"up_vote_count":255,"is_accepted":false,"score":251,"last_activity_date":1625938409,"creation_date":1463166619,"answer_id":37217646,"question_id":3413448,"body_markdown":"My English is not good so I&#39;ll just write a simple example here.\r\n\r\n```java\r\ndouble a = 0.02;\r\ndouble b = 0.03;\r\ndouble c = b - a;\r\nSystem.out.println(c);\r\n\r\nBigDecimal _a = new BigDecimal(&quot;0.02&quot;);\r\nBigDecimal _b = new BigDecimal(&quot;0.03&quot;);\r\nBigDecimal _c = _b.subtract(_a);\r\nSystem.out.println(_c);\r\n```\r\n\r\nProgram output:\r\n\r\n```\r\n0.009999999999999998\r\n0.01\r\n```\r\n\r\nDoes anyone still want to use double? ;)\r\n","title":"Double vs. BigDecimal?","body":"<p>My English is not good so I'll just write a simple example here.</p>\n<pre class=\"lang-java prettyprint-override\"><code>double a = 0.02;\ndouble b = 0.03;\ndouble c = b - a;\nSystem.out.println(c);\n\nBigDecimal _a = new BigDecimal(&quot;0.02&quot;);\nBigDecimal _b = new BigDecimal(&quot;0.03&quot;);\nBigDecimal _c = _b.subtract(_a);\nSystem.out.println(_c);\n</code></pre>\n<p>Program output:</p>\n<pre><code>0.009999999999999998\n0.01\n</code></pre>\n<p>Does anyone still want to use double? ;)</p>\n"},{"comments":[{"owner":{"account_id":4225608,"reputation":14192,"user_id":3459206,"accept_rate":90,"display_name":"Alex Salauyou"},"score":0,"creation_date":1694032850,"post_id":37500823,"comment_id":135839746,"body_markdown":"_Decimal numbers (like BigDecimal), store each decimal digit as is (binary coded, but each decimal on its own)_---not true, `BigDecimal` stores number in form `x*10^y`, both `x` and `y` are stored as signed binary integers.","body":"<i>Decimal numbers (like BigDecimal), store each decimal digit as is (binary coded, but each decimal on its own)</i>---not true, <code>BigDecimal</code> stores number in form <code>x*10^y</code>, both <code>x</code> and <code>y</code> are stored as signed binary integers."},{"owner":{"account_id":472485,"reputation":106338,"user_id":880990,"display_name":"Olivier Jacot-Descombes"},"score":1,"creation_date":1694070082,"post_id":37500823,"comment_id":135843265,"body_markdown":"@AlexSalauyou: Thanks for pointing out. Answer updated.","body":"@AlexSalauyou: Thanks for pointing out. Answer updated."}],"tags":[],"owner":{"account_id":472485,"reputation":106338,"user_id":880990,"display_name":"Olivier Jacot-Descombes"},"comment_count":2,"down_vote_count":0,"up_vote_count":46,"is_accepted":false,"score":46,"last_activity_date":1694069943,"creation_date":1464449323,"answer_id":37500823,"question_id":3413448,"body_markdown":"If you write down a fractional value like `1 / 7` as decimal value you get\r\n\r\n    1/7 = 0.142857142857142857142857142857142857142857...\r\n\r\nwith an infinite repetition of the digits `142857`.  Since you can only write a finite number of digits you will inevitably introduce a rounding (or truncation) error.\r\n\r\nNumbers like `1/10` or `1/100` expressed as binary numbers with a fractional part also have an infinite number of digits after the decimal point:\r\n\r\n    1/10 = binary 0.0001100110011001100110011001100110...\r\n\r\n`Doubles` store values as binary and therefore might introduce an error solely by converting a decimal number to a binary number, without even doing any arithmetic.\r\n\r\nDecimal numbers, on the other hand, often store each decimal digit as is (binary coded, but each decimal on its own) or, in the case of `BigDecimal`, as two signed binary integer numbers in the form x*10&lt;sup&gt;y&lt;/sup&gt; (thanks to @AlexSalauyou for pointing out). See: [Class BigDecimal][1]. This means that a decimal type is not more precise than a binary floating point or fixed point type in a general sense (i.e. it cannot store `1/7` without loss of precision), but it is more accurate for numbers that have a finite number of decimal digits as is often the case for money calculations.\r\n\r\nJava&#39;s `BigDecimal` has the additional advantage that it can have an arbitrary (but finite) number of digits on both sides of the decimal point, limited only by the available memory.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/math/BigDecimal.html","title":"Double vs. BigDecimal?","body":"<p>If you write down a fractional value like <code>1 / 7</code> as decimal value you get</p>\n<pre><code>1/7 = 0.142857142857142857142857142857142857142857...\n</code></pre>\n<p>with an infinite repetition of the digits <code>142857</code>.  Since you can only write a finite number of digits you will inevitably introduce a rounding (or truncation) error.</p>\n<p>Numbers like <code>1/10</code> or <code>1/100</code> expressed as binary numbers with a fractional part also have an infinite number of digits after the decimal point:</p>\n<pre><code>1/10 = binary 0.0001100110011001100110011001100110...\n</code></pre>\n<p><code>Doubles</code> store values as binary and therefore might introduce an error solely by converting a decimal number to a binary number, without even doing any arithmetic.</p>\n<p>Decimal numbers, on the other hand, often store each decimal digit as is (binary coded, but each decimal on its own) or, in the case of <code>BigDecimal</code>, as two signed binary integer numbers in the form x*10<sup>y</sup> (thanks to @AlexSalauyou for pointing out). See: <a href=\"https://docs.oracle.com/javase/8/docs/api/java/math/BigDecimal.html\" rel=\"nofollow noreferrer\">Class BigDecimal</a>. This means that a decimal type is not more precise than a binary floating point or fixed point type in a general sense (i.e. it cannot store <code>1/7</code> without loss of precision), but it is more accurate for numbers that have a finite number of decimal digits as is often the case for money calculations.</p>\n<p>Java's <code>BigDecimal</code> has the additional advantage that it can have an arbitrary (but finite) number of digits on both sides of the decimal point, limited only by the available memory.</p>\n"},{"comments":[{"owner":{"account_id":989178,"reputation":3110,"user_id":1042273,"accept_rate":85,"display_name":"Tarek"},"score":7,"creation_date":1634778107,"post_id":52420878,"comment_id":123119702,"body_markdown":"damn, could you imagine the cops busting down your door at 2am... &quot;Sir, is this your code? Are you aware that you used the wrong precision to divide these two numbers?! Up against the wall, NOW&quot;","body":"damn, could you imagine the cops busting down your door at 2am... &quot;Sir, is this your code? Are you aware that you used the wrong precision to divide these two numbers?! Up against the wall, NOW&quot;"},{"owner":{"account_id":2078190,"reputation":1221,"user_id":1850930,"display_name":"jfajunior"},"score":3,"creation_date":1634804166,"post_id":52420878,"comment_id":123125687,"body_markdown":"@Tarek7 This is indeed a legal problem for any calculation in banks, markets, telecommunications,... anything that is money related. If you&#39;ve watched Superman, you understand that a simple change in precision can make you a millionaire!  :)","body":"@Tarek7 This is indeed a legal problem for any calculation in banks, markets, telecommunications,... anything that is money related. If you&#39;ve watched Superman, you understand that a simple change in precision can make you a millionaire!  :)"}],"tags":[],"owner":{"account_id":2078190,"reputation":1221,"user_id":1850930,"display_name":"jfajunior"},"comment_count":2,"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1537455526,"creation_date":1537432616,"answer_id":52420878,"question_id":3413448,"body_markdown":"If you are dealing with calculation, there are laws on how you should calculate and what precision you should use. If you fail that you will be doing something illegal. \r\nThe only real reason is that the bit representation of decimal cases are not precise. As Basil simply put, an example is the best explanation. Just to complement his example, here&#39;s what happens: \r\n\r\n    static void theDoubleProblem1() {\r\n\t\tdouble d1 = 0.3;\r\n\t\tdouble d2 = 0.2;\r\n\t\tSystem.out.println(&quot;Double:\\t 0,3 - 0,2 = &quot; + (d1 - d2));\r\n\t\t\r\n\t\tfloat f1 = 0.3f;\r\n\t\tfloat f2 = 0.2f;\r\n\t\tSystem.out.println(&quot;Float:\\t 0,3 - 0,2 = &quot; + (f1 - f2));\r\n\t\t\r\n\t\tBigDecimal bd1 = new BigDecimal(&quot;0.3&quot;);\r\n\t\tBigDecimal bd2 = new BigDecimal(&quot;0.2&quot;);\r\n\t\tSystem.out.println(&quot;BigDec:\\t 0,3 - 0,2 = &quot; + (bd1.subtract(bd2)));\r\n\t}\r\n\r\nOutput: \r\n\r\n    Double:\t 0,3 - 0,2 = 0.09999999999999998\r\n    Float:\t 0,3 - 0,2 = 0.10000001\r\n    BigDec:\t 0,3 - 0,2 = 0.1\r\n\r\nAlso we have that: \r\n\r\n    static void theDoubleProblem2() {\r\n\t\tdouble d1 = 10;\r\n\t\tdouble d2 = 3;\r\n\t\tSystem.out.println(&quot;Double:\\t 10 / 3 = &quot; + (d1 / d2));\r\n\t\t\r\n\t\tfloat f1 = 10f;\r\n\t\tfloat f2 = 3f;\r\n\t\tSystem.out.println(&quot;Float:\\t 10 / 3 = &quot; + (f1 / f2));\r\n\t\t\r\n\t\t// Exception! \r\n\t\tBigDecimal bd3 = new BigDecimal(&quot;10&quot;);\r\n\t\tBigDecimal bd4 = new BigDecimal(&quot;3&quot;);\r\n\t\tSystem.out.println(&quot;BigDec:\\t 10 / 3 = &quot; + (bd3.divide(bd4)));\r\n\t}\r\n\r\nGives us the output: \r\n\r\n    Double:\t 10 / 3 = 3.3333333333333335\r\n    Float:\t 10 / 3 = 3.3333333\r\n    Exception in thread &quot;main&quot; java.lang.ArithmeticException: Non-terminating decimal expansion\r\n\r\nBut: \r\n\r\n\tstatic void theDoubleProblem2() {\r\n\t\tBigDecimal bd3 = new BigDecimal(&quot;10&quot;);\r\n\t\tBigDecimal bd4 = new BigDecimal(&quot;3&quot;);\r\n\t\tSystem.out.println(&quot;BigDec:\\t 10 / 3 = &quot; + (bd3.divide(bd4, 4, BigDecimal.ROUND_HALF_UP)));\r\n\t}\r\n\r\nHas the output: \r\n\r\n    BigDec:\t 10 / 3 = 3.3333 \r\n\r\n","title":"Double vs. BigDecimal?","body":"<p>If you are dealing with calculation, there are laws on how you should calculate and what precision you should use. If you fail that you will be doing something illegal. \nThe only real reason is that the bit representation of decimal cases are not precise. As Basil simply put, an example is the best explanation. Just to complement his example, here's what happens: </p>\n\n<pre><code>static void theDoubleProblem1() {\n    double d1 = 0.3;\n    double d2 = 0.2;\n    System.out.println(\"Double:\\t 0,3 - 0,2 = \" + (d1 - d2));\n\n    float f1 = 0.3f;\n    float f2 = 0.2f;\n    System.out.println(\"Float:\\t 0,3 - 0,2 = \" + (f1 - f2));\n\n    BigDecimal bd1 = new BigDecimal(\"0.3\");\n    BigDecimal bd2 = new BigDecimal(\"0.2\");\n    System.out.println(\"BigDec:\\t 0,3 - 0,2 = \" + (bd1.subtract(bd2)));\n}\n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>Double:  0,3 - 0,2 = 0.09999999999999998\nFloat:   0,3 - 0,2 = 0.10000001\nBigDec:  0,3 - 0,2 = 0.1\n</code></pre>\n\n<p>Also we have that: </p>\n\n<pre><code>static void theDoubleProblem2() {\n    double d1 = 10;\n    double d2 = 3;\n    System.out.println(\"Double:\\t 10 / 3 = \" + (d1 / d2));\n\n    float f1 = 10f;\n    float f2 = 3f;\n    System.out.println(\"Float:\\t 10 / 3 = \" + (f1 / f2));\n\n    // Exception! \n    BigDecimal bd3 = new BigDecimal(\"10\");\n    BigDecimal bd4 = new BigDecimal(\"3\");\n    System.out.println(\"BigDec:\\t 10 / 3 = \" + (bd3.divide(bd4)));\n}\n</code></pre>\n\n<p>Gives us the output: </p>\n\n<pre><code>Double:  10 / 3 = 3.3333333333333335\nFloat:   10 / 3 = 3.3333333\nException in thread \"main\" java.lang.ArithmeticException: Non-terminating decimal expansion\n</code></pre>\n\n<p>But: </p>\n\n<pre><code>static void theDoubleProblem2() {\n    BigDecimal bd3 = new BigDecimal(\"10\");\n    BigDecimal bd4 = new BigDecimal(\"3\");\n    System.out.println(\"BigDec:\\t 10 / 3 = \" + (bd3.divide(bd4, 4, BigDecimal.ROUND_HALF_UP)));\n}\n</code></pre>\n\n<p>Has the output: </p>\n\n<pre><code>BigDec:  10 / 3 = 3.3333 \n</code></pre>\n"},{"comments":[{"owner":{"account_id":1674701,"reputation":3061,"user_id":1540501,"accept_rate":60,"display_name":"ivan.ukr"},"score":2,"creation_date":1664919392,"post_id":72904174,"comment_id":130579124,"body_markdown":"What about `divide(BigDecimal divisor, int scale, int roundingMode)`? This lets us specify exact precision of the division result which we will be happy with.","body":"What about <code>divide(BigDecimal divisor, int scale, int roundingMode)</code>? This lets us specify exact precision of the division result which we will be happy with."}],"tags":[],"owner":{"account_id":25753849,"reputation":1,"user_id":19505907,"display_name":"Mladen Covic"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657609220,"creation_date":1657227744,"answer_id":72904174,"question_id":3413448,"body_markdown":"If you need to use division in your arithmetic, you need to use **double** instead of **BigDecimal**. Division `(divide(BigDecimal) method)` in BigDecimal is pretty useless as BigDecimal can&#39;t handle repeating decimal rational numbers (division where divisors are  and will throw `java.lang.ArithmeticException: Non-terminating decimal expansion;` no exact representable decimal result.\r\n\r\nJust try `BigDecimal.ONE.divide(new BigDecimal(&quot;3&quot;));`\r\n\r\nDouble, on the other hand, will handle division fine (with the understood precision which is roughly 15 significant digits)","title":"Double vs. BigDecimal?","body":"<p>If you need to use division in your arithmetic, you need to use <strong>double</strong> instead of <strong>BigDecimal</strong>. Division <code>(divide(BigDecimal) method)</code> in BigDecimal is pretty useless as BigDecimal can't handle repeating decimal rational numbers (division where divisors are  and will throw <code>java.lang.ArithmeticException: Non-terminating decimal expansion;</code> no exact representable decimal result.</p>\n<p>Just try <code>BigDecimal.ONE.divide(new BigDecimal(&quot;3&quot;));</code></p>\n<p>Double, on the other hand, will handle division fine (with the understood precision which is roughly 15 significant digits)</p>\n"},{"tags":[],"owner":{"account_id":4225608,"reputation":14192,"user_id":3459206,"accept_rate":90,"display_name":"Alex Salauyou"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694082425,"creation_date":1694032052,"answer_id":77055103,"question_id":3413448,"body_markdown":"Your colleague just wants to make it simple.\r\n\r\nAlmost every value _x_ written as decimal fractional number, cannot be exactly stored in binary-based `double`—thus, instead of _x_, [there will be stored][1] some _x + delta_. This is not a problem by itself, as in most cases transformation back to decimal handles it correctly (e.g.: `Double.toString(0.1) -&gt; &quot;0.1&quot;`). But when you perform arithmetic calculations, _deltas_ of arguments are accumulated in result, and you have to take care of it.\r\n\r\nIt is often said that is impossible to accumulate enough inaccuracy to affect result, as `double` has precision 1e-16 (i.e.: |_delta_| &lt; 1e-16). This is true for _x_ around 1. For _x_ around 1M precision is 1e-10; for 100B (quite typical amount in [Indonesian Rupiah][2]), precision falls to 1e-5. Now you have a limitation of 100K simple arithmetic operations to guaranteerly stay in the safe zone.\r\n\r\nEven if you are absolutely sure that accumulated inaccuracy won&#39;t spread into significant part of result, you have to implement some rules to suppress it: rounding, converting from cents, etc—every time when result should be treated as decimal, i.e. compared, printed, saved in database, sent to downstream, etc. And your colleague has to review all that.\r\n\r\nWith `BigDecimal`, where decimal fractions are stored accurately, given that all monetary amounts in modern world are counted in decimals, you and your colleague do not have this headache at all.\r\n\r\n\r\n  [1]: https://baseconvert.com/ieee-754-floating-point\r\n  [2]: https://www.xe.com/currencyconverter/convert/?Amount=6000000&amp;From=EUR&amp;To=IDR","title":"Double vs. BigDecimal?","body":"<p>Your colleague just wants to make it simple.</p>\n<p>Almost every value <em>x</em> written as decimal fractional number, cannot be exactly stored in binary-based <code>double</code>—thus, instead of <em>x</em>, <a href=\"https://baseconvert.com/ieee-754-floating-point\" rel=\"nofollow noreferrer\">there will be stored</a> some <em>x + delta</em>. This is not a problem by itself, as in most cases transformation back to decimal handles it correctly (e.g.: <code>Double.toString(0.1) -&gt; &quot;0.1&quot;</code>). But when you perform arithmetic calculations, <em>deltas</em> of arguments are accumulated in result, and you have to take care of it.</p>\n<p>It is often said that is impossible to accumulate enough inaccuracy to affect result, as <code>double</code> has precision 1e-16 (i.e.: |<em>delta</em>| &lt; 1e-16). This is true for <em>x</em> around 1. For <em>x</em> around 1M precision is 1e-10; for 100B (quite typical amount in <a href=\"https://www.xe.com/currencyconverter/convert/?Amount=6000000&amp;From=EUR&amp;To=IDR\" rel=\"nofollow noreferrer\">Indonesian Rupiah</a>), precision falls to 1e-5. Now you have a limitation of 100K simple arithmetic operations to guaranteerly stay in the safe zone.</p>\n<p>Even if you are absolutely sure that accumulated inaccuracy won't spread into significant part of result, you have to implement some rules to suppress it: rounding, converting from cents, etc—every time when result should be treated as decimal, i.e. compared, printed, saved in database, sent to downstream, etc. And your colleague has to review all that.</p>\n<p>With <code>BigDecimal</code>, where decimal fractions are stored accurately, given that all monetary amounts in modern world are counted in decimals, you and your colleague do not have this headache at all.</p>\n"}],"owner":{"account_id":171578,"reputation":10558,"user_id":399104,"accept_rate":78,"display_name":"Truong Ha"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":460668,"favorite_count":0,"down_vote_count":0,"up_vote_count":416,"accepted_answer_id":3413493,"answer_count":8,"score":416,"last_activity_date":1694082425,"creation_date":1281001180,"question_id":3413448,"body_markdown":"I have to calculate some floating point variables and my colleague suggest me to use `BigDecimal` instead of `double` since it will be more precise. But I want to know what it is and how to make most out of `BigDecimal`?","title":"Double vs. BigDecimal?","body":"<p>I have to calculate some floating point variables and my colleague suggest me to use <code>BigDecimal</code> instead of <code>double</code> since it will be more precise. But I want to know what it is and how to make most out of <code>BigDecimal</code>?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":31617,"reputation":52351,"user_id":86967,"accept_rate":56,"display_name":"Brent Bradburn"},"score":0,"creation_date":1571682437,"post_id":34181094,"comment_id":103314288,"body_markdown":"The two methods presented in the question should be equivalent based on [_Relaxed Binding_](https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-external-config-relaxed-binding).  Maybe there was a bug in Spring Boot at the time (version not specified).","body":"The two methods presented in the question should be equivalent based on <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-external-config-relaxed-binding\" rel=\"nofollow noreferrer\"><i>Relaxed Binding</i></a>.  Maybe there was a bug in Spring Boot at the time (version not specified)."},{"owner":{"account_id":65930,"reputation":4225,"user_id":193705,"accept_rate":81,"display_name":"Peter Wippermann"},"score":1,"creation_date":1582230779,"post_id":34181094,"comment_id":106715985,"body_markdown":"Maybe the OP changed the example value to simplify the problem description and thereby falsified the problem unintentionally. Please be aware that setting log levels via env variables only works for packages but not for classes! See my answer below for details.","body":"Maybe the OP changed the example value to simplify the problem description and thereby falsified the problem unintentionally. Please be aware that setting log levels via env variables only works for packages but not for classes! See my answer below for details."}],"answers":[{"comments":[{"owner":{"account_id":3700031,"reputation":6378,"user_id":3080094,"display_name":"vanOekel"},"score":2,"creation_date":1449933105,"post_id":34237691,"comment_id":56224568,"body_markdown":"Can confirm in practice: I checked out the [sample-logback](https://github.com/spring-projects/spring-boot/tree/master/spring-boot-samples/spring-boot-sample-logback) project (using version 1.3.0.RELEASE) and ran `mvn spring-boot:run -Dlogging.level.org.springframework=TRACE` which produced a lot of log output. Using the all caps `-DLOGGING_LEVEL_ORG_SPRINGFRAMEWORK=TRACE` or variants thereof did nothing though.","body":"Can confirm in practice: I checked out the <a href=\"https://github.com/spring-projects/spring-boot/tree/master/spring-boot-samples/spring-boot-sample-logback\" rel=\"nofollow noreferrer\">sample-logback</a> project (using version 1.3.0.RELEASE) and ran <code>mvn spring-boot:run -Dlogging.level.org.springframework=TRACE</code> which produced a lot of log output. Using the all caps <code>-DLOGGING_LEVEL_ORG_SPRINGFRAMEWORK=TRACE</code> or variants thereof did nothing though."},{"owner":{"account_id":1461177,"reputation":2976,"user_id":1375470,"accept_rate":75,"display_name":"Timekiller"},"score":2,"creation_date":1449938046,"post_id":34237691,"comment_id":56226224,"body_markdown":"If `-D...` parameter works, then setting `_JAVA_OPTIONS` environment variable should actually work! `mvn` command picks them up just like any `java` does. Note the underscore in the beginning though, it is necessary. See http://stackoverflow.com/questions/17781405/ for some more info.","body":"If <code>-D...</code> parameter works, then setting <code>_JAVA_OPTIONS</code> environment variable should actually work! <code>mvn</code> command picks them up just like any <code>java</code> does. Note the underscore in the beginning though, it is necessary. See <a href=\"http://stackoverflow.com/questions/17781405/\">stackoverflow.com/questions/17781405</a> for some more info."},{"owner":{"account_id":405481,"reputation":12981,"user_id":774395,"accept_rate":70,"display_name":"DeejUK"},"score":0,"creation_date":1450014263,"post_id":34237691,"comment_id":56244990,"body_markdown":"I&#39;ll give that a try - this will be running via the Cloud Foundry Java Buildpack, but hopefully it will respect and pass on the values in `_JAVA_OPTIONS`","body":"I&#39;ll give that a try - this will be running via the Cloud Foundry Java Buildpack, but hopefully it will respect and pass on the values in <code>_JAVA_OPTIONS</code>"},{"owner":{"account_id":1461177,"reputation":2976,"user_id":1375470,"accept_rate":75,"display_name":"Timekiller"},"score":0,"creation_date":1450017267,"post_id":34237691,"comment_id":56245957,"body_markdown":"I&#39;m not familiar with Java Buildpack, but they have a doc on how to use another environment variable, `JAVA_OPTS`: https://github.com/cloudfoundry/java-buildpack/blob/master/docs/framework-java_opts.md","body":"I&#39;m not familiar with Java Buildpack, but they have a doc on how to use another environment variable, <code>JAVA_OPTS</code>: <a href=\"https://github.com/cloudfoundry/java-buildpack/blob/master/docs/framework-java_opts.md\" rel=\"nofollow noreferrer\">github.com/cloudfoundry/java-buildpack/blob/master/docs/&hellip;</a>"},{"owner":{"account_id":189342,"reputation":1773,"user_id":428628,"display_name":"Michael R"},"score":3,"creation_date":1523053353,"post_id":34237691,"comment_id":86417086,"body_markdown":"I would suggest JAVA_TOOL_OPTIONS over _JAVA_OPTIONS as described here: https://bugs.openjdk.java.net/browse/JDK-4971166","body":"I would suggest JAVA_TOOL_OPTIONS over _JAVA_OPTIONS as described here: <a href=\"https://bugs.openjdk.java.net/browse/JDK-4971166\" rel=\"nofollow noreferrer\">bugs.openjdk.java.net/browse/JDK-4971166</a>"}],"tags":[],"owner":{"account_id":1461177,"reputation":2976,"user_id":1375470,"accept_rate":75,"display_name":"Timekiller"},"comment_count":5,"down_vote_count":0,"up_vote_count":121,"is_accepted":true,"score":121,"last_activity_date":1673025508,"creation_date":1449907551,"answer_id":34237691,"question_id":34181094,"body_markdown":"This is just an idea, but did you try setting this?\r\n\r\n`_JAVA_OPTIONS=-Dlogging.level.org.springframework=TRACE`\r\n\r\nTheoretically, this way `-Dlogging.level.org.springframework=TRACE` will be passed as default JVM argument and should affect every JVM instance in your environment.","title":"Set Logging Level in Spring Boot via Environment Variable","body":"<p>This is just an idea, but did you try setting this?</p>\n<p><code>_JAVA_OPTIONS=-Dlogging.level.org.springframework=TRACE</code></p>\n<p>Theoretically, this way <code>-Dlogging.level.org.springframework=TRACE</code> will be passed as default JVM argument and should affect every JVM instance in your environment.</p>\n"},{"comments":[{"owner":{"account_id":405481,"reputation":12981,"user_id":774395,"accept_rate":70,"display_name":"DeejUK"},"score":0,"creation_date":1450370994,"post_id":34300100,"comment_id":56421356,"body_markdown":"Thanks. Sadly this requires knowing the things I want to increase the verbosity of at design time, rather than run time.","body":"Thanks. Sadly this requires knowing the things I want to increase the verbosity of at design time, rather than run time."}],"tags":[],"owner":{"account_id":2912376,"reputation":1279,"user_id":2496309,"accept_rate":56,"display_name":"Michał Urbaniak"},"comment_count":1,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1450216764,"creation_date":1450216324,"answer_id":34300100,"question_id":34181094,"body_markdown":"I would anyway suggest you to use Spring profiles:\r\n\r\n 1. Create 2 properties files:\r\n\r\n    `application-local.properties` and\r\n    `application-remote.properties` \r\n\r\n  (profile names can be different obviously)\r\n\r\n 2. Set the logging level in each file accordingly (`logging.level.org.springframework`)\r\n \r\n\r\n 3. Run your application with `-Dspring.profiles.active=local` locally and `-Dspring.profiles.active=remote` for CF.","title":"Set Logging Level in Spring Boot via Environment Variable","body":"<p>I would anyway suggest you to use Spring profiles:</p>\n\n<ol>\n<li><p>Create 2 properties files:</p>\n\n<p><code>application-local.properties</code> and\n<code>application-remote.properties</code> </p>\n\n<p>(profile names can be different obviously)</p></li>\n<li><p>Set the logging level in each file accordingly (<code>logging.level.org.springframework</code>)</p></li>\n<li><p>Run your application with <code>-Dspring.profiles.active=local</code> locally and <code>-Dspring.profiles.active=remote</code> for CF.</p></li>\n</ol>\n"},{"comments":[{"owner":{"account_id":6290457,"reputation":225,"user_id":4888339,"accept_rate":25,"display_name":"Sparkle8"},"score":0,"creation_date":1450283894,"post_id":34317326,"comment_id":56376615,"body_markdown":"If you are running the app locally, use -DAPP_LOGGING_LEVEL=DEBUG","body":"If you are running the app locally, use -DAPP_LOGGING_LEVEL=DEBUG"},{"owner":{"account_id":405481,"reputation":12981,"user_id":774395,"accept_rate":70,"display_name":"DeejUK"},"score":1,"creation_date":1450371037,"post_id":34317326,"comment_id":56421392,"body_markdown":"I did do something similar as a workaround, but it means having to know which loggers you want to be able to control at design time, which is rather limiting.","body":"I did do something similar as a workaround, but it means having to know which loggers you want to be able to control at design time, which is rather limiting."},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1673025616,"post_id":34317326,"comment_id":132412079,"body_markdown":"This is just logback config, nothing specific to Spring / CF","body":"This is just logback config, nothing specific to Spring / CF"}],"tags":[],"owner":{"account_id":6290457,"reputation":225,"user_id":4888339,"accept_rate":25,"display_name":"Sparkle8"},"comment_count":3,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1450283750,"creation_date":1450283750,"answer_id":34317326,"question_id":34181094,"body_markdown":"Yes, you can control logging level using environment variable. Here is how I have implemented for my Spring Boot application, deployed on Cloud Foundry platform.\r\n\r\nIn you log configuration file provide placeholder for logging level to read value from environment variable. Default is INFO.\r\n\r\n        &lt;logger name=&quot;com.mycompany.apps.cf&quot; level=&quot;${APP_LOGGING_LEVEL:-INFO}&quot;&gt;\r\n          &lt;appender-ref ref=&quot;CONSOLE&quot;/&gt;\r\n        &lt;/logger&gt;\r\n\r\nAnd then, in CF deployment manifest file provide environment variable.\r\n\r\n&lt;pre&gt;\r\n    applications:\r\n    - name: my-app-name\r\n      memory: 2048\r\n      env:\r\n        &lt;b&gt;APP_LOGGING_LEVEL: DEBUG&lt;/b&gt;\r\n&lt;/pre&gt;\r\n\r\nI hope this will help.","title":"Set Logging Level in Spring Boot via Environment Variable","body":"<p>Yes, you can control logging level using environment variable. Here is how I have implemented for my Spring Boot application, deployed on Cloud Foundry platform.</p>\n\n<p>In you log configuration file provide placeholder for logging level to read value from environment variable. Default is INFO.</p>\n\n<pre><code>    &lt;logger name=\"com.mycompany.apps.cf\" level=\"${APP_LOGGING_LEVEL:-INFO}\"&gt;\n      &lt;appender-ref ref=\"CONSOLE\"/&gt;\n    &lt;/logger&gt;\n</code></pre>\n\n<p>And then, in CF deployment manifest file provide environment variable.</p>\n\n<pre>\n    applications:\n    - name: my-app-name\n      memory: 2048\n      env:\n        <b>APP_LOGGING_LEVEL: DEBUG</b>\n</pre>\n\n<p>I hope this will help.</p>\n"},{"tags":[],"owner":{"account_id":257480,"reputation":5081,"user_id":538921,"accept_rate":91,"display_name":"Edward J Beckett"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1450357573,"creation_date":1450357573,"answer_id":34335351,"question_id":34181094,"body_markdown":"Here&#39;s an example using [Logback](http://logback.qos.ch/manual/index.html) with [Janino](http://logback.qos.ch/setup.html#janino) to conditionally include different logging configs via [properties or environmental variables](https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html)... The base config, logback.xml is using conditionals for development console logging or production file logging... just drop the following files in `/resources/`\r\n\r\n---\r\n\r\n&gt;logback.xml\r\n\r\n---\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;configuration scan=&quot;true&quot;&gt;\r\n        &lt;if condition=&#39;property(&quot;spring.profiles.active&quot;).contains(&quot;dev&quot;)&#39;&gt;\r\n            &lt;then&gt;\r\n                &lt;include resource=&quot;org/springframework/boot/logging/logback/base.xml&quot;/&gt;\r\n                &lt;include resource=&quot;dev.xml&quot; optional=&quot;true&quot;/&gt;\r\n            &lt;/then&gt;\r\n        &lt;/if&gt;\r\n        &lt;if condition=&#39;property(&quot;spring.profiles.active&quot;).contains(&quot;pro&quot;)&#39;&gt;\r\n            &lt;then&gt;\r\n                &lt;include resource=&quot;org/springframework/boot/logging/logback/base.xml&quot;/&gt;\r\n                &lt;include resource=&quot;pro.xml&quot; optional=&quot;true&quot;/&gt;\r\n            &lt;/then&gt;\r\n        &lt;/if&gt;\r\n    &lt;/configuration&gt;\r\n\r\n---\r\n&gt; dev.xml\r\n\r\n    &lt;included&gt;\r\n        &lt;appender name=&quot;CONSOLE&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n            &lt;encoder&gt;\r\n                &lt;charset&gt;utf-8&lt;/charset&gt;\r\n                &lt;Pattern&gt;%-30([%p] [%c:%L]) &#187; %m%n%rEx&lt;/Pattern&gt;\r\n            &lt;/encoder&gt;\r\n        &lt;/appender&gt;\r\n    \r\n        &lt;!-- CHATTY LOGGERS HERE.--&gt;\r\n        &lt;logger name=&quot;org.springframework&quot; level=&quot;DEBUG&quot;/&gt;\r\n       \r\n        &lt;contextListener class=&quot;ch.qos.logback.classic.jul.LevelChangePropagator&quot;&gt;\r\n            &lt;resetJUL&gt;true&lt;/resetJUL&gt;\r\n        &lt;/contextListener&gt;\r\n    \r\n        &lt;root level=&quot;${logback.loglevel}&quot;&gt;\r\n            &lt;appender-ref ref=&quot;CONSOLE&quot;/&gt;\r\n        &lt;/root&gt;\r\n    \r\n    &lt;/included&gt;\r\n\r\n\r\n---\r\n&gt; pro.xml\r\n\r\n   \t&lt;included&gt;\r\n\t\t&lt;conversionRule conversionWord=&quot;wex&quot;\r\n\t\t\t\t\t\tconverterClass=&quot;org.springframework.boot.logging.logback.WhitespaceThrowableProxyConverter&quot;/&gt;\r\n\t\t&lt;property name=&quot;FILE_LOG_PATTERN&quot;\r\n\t\t\t\t  value=&quot;%d{yyyy-MM-dd HH:mm:ss.SSS} %5p ${PID:- } --- [%t] %-40.40logger{39} : %m%n%wex&quot;/&gt;\r\n\t\t&lt;property name=&quot;FILE_NAME_PATTERN&quot; value=&quot;./logs/%d{yyyy-MM-dd}-exec.log&quot;/&gt;\r\n\r\n\t\t&lt;appender name=&quot;FILE&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;\r\n\t\t\t&lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;&gt;\r\n\t\t\t\t&lt;fileNamePattern&gt;FILE_NAME_PATTERN&lt;/fileNamePattern&gt;\r\n\t\t\t\t&lt;maxHistory&gt;7&lt;/maxHistory&gt;\r\n\t\t\t&lt;/rollingPolicy&gt;\r\n\t\t\t&lt;encoder&gt;\r\n\t\t\t\t&lt;pattern&gt;${FILE_LOG_PATTERN}&lt;/pattern&gt;\r\n\t\t\t&lt;/encoder&gt;\r\n\t\t&lt;/appender&gt;\r\n\r\n\t\t&lt;appender name=&quot;ASYNC&quot; class=&quot;ch.qos.logback.classic.AsyncAppender&quot;&gt;\r\n\t\t\t&lt;queueSize&gt;512&lt;/queueSize&gt;\r\n\t\t\t&lt;appender-ref ref=&quot;FILE&quot;/&gt;\r\n\t\t&lt;/appender&gt;\r\n\r\n\t\t&lt;!-- APP SPECIFIC LOGGERS HERE.--&gt;\r\n\t\t&lt;logger name=&quot;org.springframework.boot.SpringApplication&quot; level=&quot;INFO&quot;/&gt;\r\n\r\n\t\t&lt;root level=&quot;INFO&quot;&gt;\r\n\t\t\t&lt;appender-ref ref=&quot;FILE&quot;/&gt;\r\n\t\t&lt;/root&gt;\r\n\r\n\t&lt;/included&gt;","title":"Set Logging Level in Spring Boot via Environment Variable","body":"<p>Here's an example using <a href=\"http://logback.qos.ch/manual/index.html\" rel=\"nofollow\">Logback</a> with <a href=\"http://logback.qos.ch/setup.html#janino\" rel=\"nofollow\">Janino</a> to conditionally include different logging configs via <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html\" rel=\"nofollow\">properties or environmental variables</a>... The base config, logback.xml is using conditionals for development console logging or production file logging... just drop the following files in <code>/resources/</code></p>\n\n<hr>\n\n<blockquote>\n  <p>logback.xml</p>\n</blockquote>\n\n<hr>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;configuration scan=\"true\"&gt;\n    &lt;if condition='property(\"spring.profiles.active\").contains(\"dev\")'&gt;\n        &lt;then&gt;\n            &lt;include resource=\"org/springframework/boot/logging/logback/base.xml\"/&gt;\n            &lt;include resource=\"dev.xml\" optional=\"true\"/&gt;\n        &lt;/then&gt;\n    &lt;/if&gt;\n    &lt;if condition='property(\"spring.profiles.active\").contains(\"pro\")'&gt;\n        &lt;then&gt;\n            &lt;include resource=\"org/springframework/boot/logging/logback/base.xml\"/&gt;\n            &lt;include resource=\"pro.xml\" optional=\"true\"/&gt;\n        &lt;/then&gt;\n    &lt;/if&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p>dev.xml</p>\n</blockquote>\n\n<pre><code>&lt;included&gt;\n    &lt;appender name=\"CONSOLE\" class=\"ch.qos.logback.core.ConsoleAppender\"&gt;\n        &lt;encoder&gt;\n            &lt;charset&gt;utf-8&lt;/charset&gt;\n            &lt;Pattern&gt;%-30([%p] [%c:%L]) » %m%n%rEx&lt;/Pattern&gt;\n        &lt;/encoder&gt;\n    &lt;/appender&gt;\n\n    &lt;!-- CHATTY LOGGERS HERE.--&gt;\n    &lt;logger name=\"org.springframework\" level=\"DEBUG\"/&gt;\n\n    &lt;contextListener class=\"ch.qos.logback.classic.jul.LevelChangePropagator\"&gt;\n        &lt;resetJUL&gt;true&lt;/resetJUL&gt;\n    &lt;/contextListener&gt;\n\n    &lt;root level=\"${logback.loglevel}\"&gt;\n        &lt;appender-ref ref=\"CONSOLE\"/&gt;\n    &lt;/root&gt;\n\n&lt;/included&gt;\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p>pro.xml</p>\n</blockquote>\n\n<pre><code>&lt;included&gt;\n    &lt;conversionRule conversionWord=\"wex\"\n                    converterClass=\"org.springframework.boot.logging.logback.WhitespaceThrowableProxyConverter\"/&gt;\n    &lt;property name=\"FILE_LOG_PATTERN\"\n              value=\"%d{yyyy-MM-dd HH:mm:ss.SSS} %5p ${PID:- } --- [%t] %-40.40logger{39} : %m%n%wex\"/&gt;\n    &lt;property name=\"FILE_NAME_PATTERN\" value=\"./logs/%d{yyyy-MM-dd}-exec.log\"/&gt;\n\n    &lt;appender name=\"FILE\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\"&gt;\n        &lt;rollingPolicy class=\"ch.qos.logback.core.rolling.TimeBasedRollingPolicy\"&gt;\n            &lt;fileNamePattern&gt;FILE_NAME_PATTERN&lt;/fileNamePattern&gt;\n            &lt;maxHistory&gt;7&lt;/maxHistory&gt;\n        &lt;/rollingPolicy&gt;\n        &lt;encoder&gt;\n            &lt;pattern&gt;${FILE_LOG_PATTERN}&lt;/pattern&gt;\n        &lt;/encoder&gt;\n    &lt;/appender&gt;\n\n    &lt;appender name=\"ASYNC\" class=\"ch.qos.logback.classic.AsyncAppender\"&gt;\n        &lt;queueSize&gt;512&lt;/queueSize&gt;\n        &lt;appender-ref ref=\"FILE\"/&gt;\n    &lt;/appender&gt;\n\n    &lt;!-- APP SPECIFIC LOGGERS HERE.--&gt;\n    &lt;logger name=\"org.springframework.boot.SpringApplication\" level=\"INFO\"/&gt;\n\n    &lt;root level=\"INFO\"&gt;\n        &lt;appender-ref ref=\"FILE\"/&gt;\n    &lt;/root&gt;\n\n&lt;/included&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3455987,"reputation":130,"user_id":2894501,"display_name":"Allan Lang"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1453978241,"creation_date":1453978241,"answer_id":35059375,"question_id":34181094,"body_markdown":"Also using Spring Boot (v1.2.3) in Cloud Foundry, I&#39;ve found that it is possible to adjust the root logging level using an environment variable as follows:\r\n\r\n    $ cf set-env &lt;app name&gt; LOGGING_LEVEL_ROOT DEBUG\r\n\r\nUnfortunately, it does not appear to be possible to dial-down the logging level for specific packages (at least with the version of Java Buildpack and Spring Boot I am using). For example adding the following in addition to the above does not reduce the log level for Spring framework:\r\n\r\n    $ cf set-env &lt;app name&gt; LOGGING_LEVEL_ORG_SPRINGFRAMEWORK INFO\r\n\r\nIf you are using something like Splunk to gather your logs, you may be able to filter out the noise, however.\r\n\r\nAnother alternative which looks promising could be based on customisation of the build pack&#39;s arguments option (see [here][1]):\r\n\r\n    $ cf set-env &lt;app name&gt; &#39;{arguments: &quot;-logging.level.root=DEBUG -logging.level.org.springframework=INFO&quot;}&#39;\r\n\r\nSadly, I couldn&#39;t get this to actually work. I certainly agree that being able to reconfigure logging levels at package level without changing the application code would be handy to get working.\r\n\r\n  [1]: https://github.com/cloudfoundry/java-buildpack/blob/master/README.md#configuration-and-extension","title":"Set Logging Level in Spring Boot via Environment Variable","body":"<p>Also using Spring Boot (v1.2.3) in Cloud Foundry, I've found that it is possible to adjust the root logging level using an environment variable as follows:</p>\n\n<pre><code>$ cf set-env &lt;app name&gt; LOGGING_LEVEL_ROOT DEBUG\n</code></pre>\n\n<p>Unfortunately, it does not appear to be possible to dial-down the logging level for specific packages (at least with the version of Java Buildpack and Spring Boot I am using). For example adding the following in addition to the above does not reduce the log level for Spring framework:</p>\n\n<pre><code>$ cf set-env &lt;app name&gt; LOGGING_LEVEL_ORG_SPRINGFRAMEWORK INFO\n</code></pre>\n\n<p>If you are using something like Splunk to gather your logs, you may be able to filter out the noise, however.</p>\n\n<p>Another alternative which looks promising could be based on customisation of the build pack's arguments option (see <a href=\"https://github.com/cloudfoundry/java-buildpack/blob/master/README.md#configuration-and-extension\" rel=\"noreferrer\">here</a>):</p>\n\n<pre><code>$ cf set-env &lt;app name&gt; '{arguments: \"-logging.level.root=DEBUG -logging.level.org.springframework=INFO\"}'\n</code></pre>\n\n<p>Sadly, I couldn't get this to actually work. I certainly agree that being able to reconfigure logging levels at package level without changing the application code would be handy to get working.</p>\n"},{"comments":[{"owner":{"account_id":17750,"reputation":25470,"user_id":40064,"accept_rate":69,"display_name":"Wim Deblauwe"},"score":1,"creation_date":1522955938,"post_id":45914116,"comment_id":86371570,"body_markdown":"I tried this with Spring Boot 1.3.8 on AWS, but it did not work unfortunately.","body":"I tried this with Spring Boot 1.3.8 on AWS, but it did not work unfortunately."},{"owner":{"account_id":12061826,"reputation":624,"user_id":8820559,"display_name":"Linden X. Quan"},"score":0,"creation_date":1670375279,"post_id":45914116,"comment_id":131861179,"body_markdown":"This worked for me with SpringBoot 2.5.3","body":"This worked for me with SpringBoot 2.5.3"}],"tags":[],"owner":{"account_id":2363085,"reputation":6406,"user_id":2069368,"accept_rate":60,"display_name":"pepuch"},"comment_count":2,"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1503906405,"creation_date":1503906405,"answer_id":45914116,"question_id":34181094,"body_markdown":"I also tried to set logging level via environment variable but as already mentioned it is not possible by using environment variable with upper case name, eg. `LOGGING_LEVEL_ORG_SPRINGFRAMEWORK=DEBUG`. I also didn&#39;t want to do it via `application.properties` or `_JAVA_OPTIONS`.\r\n\r\nAfter digging into class `org.springframework.boot.logging.LoggingApplicationListener` I&#39;ve checked that spring boot tries to set logging level `DEBUG` to `ORG_SPRINGFRAMEWORK` package which is not real package name. So conclusion is that you can use environment variable to set logging level but it needs to be in the form:\r\n```\r\nLOGGING_LEVEL_org.springframework=DEBUG\r\n```\r\nor\r\n```\r\nlogging.level.org.springframework=DEBUG\r\n```\r\n\r\nTested on spring boot 1.5.3","title":"Set Logging Level in Spring Boot via Environment Variable","body":"<p>I also tried to set logging level via environment variable but as already mentioned it is not possible by using environment variable with upper case name, eg. <code>LOGGING_LEVEL_ORG_SPRINGFRAMEWORK=DEBUG</code>. I also didn't want to do it via <code>application.properties</code> or <code>_JAVA_OPTIONS</code>.</p>\n\n<p>After digging into class <code>org.springframework.boot.logging.LoggingApplicationListener</code> I've checked that spring boot tries to set logging level <code>DEBUG</code> to <code>ORG_SPRINGFRAMEWORK</code> package which is not real package name. So conclusion is that you can use environment variable to set logging level but it needs to be in the form:\n<code>\nLOGGING_LEVEL_org.springframework=DEBUG\n</code>\nor\n<code>\nlogging.level.org.springframework=DEBUG\n</code></p>\n\n<p>Tested on spring boot 1.5.3</p>\n"},{"tags":[],"owner":{"account_id":1780786,"reputation":1522,"user_id":1623598,"display_name":"Peter"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1561064416,"creation_date":1561064416,"answer_id":56693804,"question_id":34181094,"body_markdown":"In spring-boot 2.0.0, adding `--trace` works.\r\nFor instance `java -jar myapp.jar --debug` or `java -jar myapp.jar --trace`\r\n\r\nhttps://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-logging.html#boot-features-logging-console-output","title":"Set Logging Level in Spring Boot via Environment Variable","body":"<p>In spring-boot 2.0.0, adding <code>--trace</code> works.\nFor instance <code>java -jar myapp.jar --debug</code> or <code>java -jar myapp.jar --trace</code></p>\n\n<p><a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-logging.html#boot-features-logging-console-output\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-logging.html#boot-features-logging-console-output</a></p>\n"},{"comments":[{"owner":{"account_id":31617,"reputation":52351,"user_id":86967,"accept_rate":56,"display_name":"Brent Bradburn"},"score":2,"creation_date":1571692108,"post_id":56856097,"comment_id":103318145,"body_markdown":"Updated link: https://docs.spring.io/spring-boot/docs/current/reference/html/appendix-application-properties.html#common-application-properties","body":"Updated link: <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/appendix-application-properties.html#common-application-properties\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/current/reference/html/&hellip;</a>"}],"tags":[],"owner":{"account_id":98194,"reputation":4266,"user_id":265954,"display_name":"t0r0X"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1571748139,"creation_date":1562082596,"answer_id":56856097,"question_id":34181094,"body_markdown":"Starting with Spring Boot 2.0.x this works again. Tested with Spring Boot v2.0.9.RELEASE. E.g. enable connection pool debug log:\r\n\r\n    LOGGING_LEVEL_COM_ZAXXER=DEBUG java -jar myApp.jar\r\n\r\nor Spring framework debug log:\r\n\r\n    LOGGING_LEVEL_ORG_SPRINGFRAMEWORK=DEBUG java -jar myApp.jar\r\n\r\nor both:\r\n\r\n    LOGGING_LEVEL_ORG_SPRINGFRAMEWORK=DEBUG LOGGING_LEVEL_COM_ZAXXER=DEBUG java -jar myApp.jar\r\n\r\nSee [&quot;Application Poperties&quot; in Spring Boot Reference Documentation][1] for more application properties.\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/appendix-application-properties.html#common-application-properties\r\n","title":"Set Logging Level in Spring Boot via Environment Variable","body":"<p>Starting with Spring Boot 2.0.x this works again. Tested with Spring Boot v2.0.9.RELEASE. E.g. enable connection pool debug log:</p>\n\n<pre><code>LOGGING_LEVEL_COM_ZAXXER=DEBUG java -jar myApp.jar\n</code></pre>\n\n<p>or Spring framework debug log:</p>\n\n<pre><code>LOGGING_LEVEL_ORG_SPRINGFRAMEWORK=DEBUG java -jar myApp.jar\n</code></pre>\n\n<p>or both:</p>\n\n<pre><code>LOGGING_LEVEL_ORG_SPRINGFRAMEWORK=DEBUG LOGGING_LEVEL_COM_ZAXXER=DEBUG java -jar myApp.jar\n</code></pre>\n\n<p>See <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/appendix-application-properties.html#common-application-properties\" rel=\"noreferrer\">\"Application Poperties\" in Spring Boot Reference Documentation</a> for more application properties.</p>\n"},{"comments":[{"owner":{"account_id":956436,"reputation":1717,"user_id":1107232,"accept_rate":61,"display_name":"xref"},"score":1,"creation_date":1582055995,"post_id":57623996,"comment_id":106642954,"body_markdown":"This was killing me on Spring Boot 2.1.2, nothing in the documentation mentions this limitation. Currently our hack is to redeploy special .jars with debug logging enabled in `application.properties` if we want to debug individual classes. Thanks for the detailed analysis","body":"This was killing me on Spring Boot 2.1.2, nothing in the documentation mentions this limitation. Currently our hack is to redeploy special .jars with debug logging enabled in <code>application.properties</code> if we want to debug individual classes. Thanks for the detailed analysis"},{"owner":{"account_id":173186,"reputation":4270,"user_id":401712,"display_name":"Dario Seidl"},"score":4,"creation_date":1622565945,"post_id":57623996,"comment_id":119826565,"body_markdown":"This is also acknowledged now in the documentation: https://docs.spring.io/spring-boot/docs/2.1.9.RELEASE/reference/html/boot-features-logging.html#boot-features-custom-log-levels saying &quot;The above approach will only work for package level logging. Since relaxed binding always converts environment variables to lowercase, it’s not possible to configure logging for an individual class in this way. If you need to configure logging for a class, you can use the SPRING_APPLICATION_JSON variable.&quot;","body":"This is also acknowledged now in the documentation: <a href=\"https://docs.spring.io/spring-boot/docs/2.1.9.RELEASE/reference/html/boot-features-logging.html#boot-features-custom-log-levels\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/2.1.9.RELEASE/reference/html&zwnj;&#8203;/&hellip;</a> saying &quot;The above approach will only work for package level logging. Since relaxed binding always converts environment variables to lowercase, it’s not possible to configure logging for an individual class in this way. If you need to configure logging for a class, you can use the SPRING_APPLICATION_JSON variable.&quot;"},{"owner":{"account_id":5745825,"reputation":11553,"user_id":4537090,"accept_rate":79,"display_name":"WesternGun"},"score":0,"creation_date":1689858619,"post_id":57623996,"comment_id":135274919,"body_markdown":"Thanks, this also applies to Quarkus.... strange.","body":"Thanks, this also applies to Quarkus.... strange."}],"tags":[],"owner":{"account_id":65930,"reputation":4225,"user_id":193705,"accept_rate":81,"display_name":"Peter Wippermann"},"comment_count":3,"down_vote_count":0,"up_vote_count":67,"is_accepted":false,"score":67,"last_activity_date":1694082278,"creation_date":1566554628,"answer_id":57623996,"question_id":34181094,"body_markdown":"**Setting log levels via environment variables can only be done for Packages but not for Classes**\r\n\r\nI had the same problem as the OP. And I was wondering why some of the users here reported that the proposed solutions worked well while others responded they didn&#39;t.  \r\nI&#39;m on **Spring Boot 2.1** and the problem obviously changed a bit over the last years, but the current situation is as follows:\r\n\r\nTL;DR\r\n---\r\nSetting the log level for a __package works__:\r\n\r\n    LOGGING_LEVEL_COM_ACME_PACKAGE=DEBUG\r\n\r\nWhile setting the log level for a specific __class has no effect__:\r\n\r\n    LOGGING_LEVEL_COM_ACME_PACKAGE_CLASS=DEBUG\r\n\r\nHow can that be?\r\n---\r\nHave a look at Spring Boot&#39;s [LoggingApplicationListener][2].  \r\nIf you&#39;d debug it and set a breakpoint in the highlighted code block, you&#39;d see that the log level definition for a class `com.acme.mypackage.MyClass` becomes\r\n`com.acme.mypackage.myclass`.  \r\nSo __a log level definition for a class looks exactly like a log level definition for a package.__ \r\n\r\nThis is related to Spring&#39;s [Relaxed Binding][3], which proposes an upper case notation for environment variables. Thus the typical camel case notation of a class is not visible for the LoggingApplicationListener: The environment variable for `MyClass` has to be defined as `MYCLASS` and will be available as `myclass` in Spring&#39;s Environment *(this example ignores the fully-qualified name of the class)*.\r\n\r\nOnce the camel case notation of the class is lost, during runtime there&#39;s no chance to recover the original class name.\r\nThus log definitions in environment variables don&#39;t work for classes but only for packages.\r\n\r\nIs there an alternative?\r\n---\r\nYes, you can set the `SPRING_APPLICATION_JSON` environment variable. Its value describes the desired property in JSON style:\r\n\r\n    {&quot;logging&quot;:{&quot;level&quot;:{&quot;com&quot;:{&quot;acme&quot;:{&quot;package&quot;:{&quot;Class&quot;:&quot;DEBUG&quot;}}}}}}\r\n\r\nRead more in [Spring&#39;s docs][1] (search for &quot;*SPRING_APPLICATION_JSON*&quot; there).\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/2.1.13.RELEASE/reference/html/boot-features-external-config.html#boot-features-external-config-application-json\r\n  [2]: https://github.com/spring-projects/spring-boot/blob/abe3d3852761430c9f5f1368d82509d0c19ac4d9/spring-boot-project/spring-boot/src/main/java/org/springframework/boot/context/logging/LoggingApplicationListener.java#L340-L346\r\n  [3]: https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-external-config-relaxed-binding","title":"Set Logging Level in Spring Boot via Environment Variable","body":"<p><strong>Setting log levels via environment variables can only be done for Packages but not for Classes</strong></p>\n<p>I had the same problem as the OP. And I was wondering why some of the users here reported that the proposed solutions worked well while others responded they didn't.<br />\nI'm on <strong>Spring Boot 2.1</strong> and the problem obviously changed a bit over the last years, but the current situation is as follows:</p>\n<h2>TL;DR</h2>\n<p>Setting the log level for a <strong>package works</strong>:</p>\n<pre><code>LOGGING_LEVEL_COM_ACME_PACKAGE=DEBUG\n</code></pre>\n<p>While setting the log level for a specific <strong>class has no effect</strong>:</p>\n<pre><code>LOGGING_LEVEL_COM_ACME_PACKAGE_CLASS=DEBUG\n</code></pre>\n<h2>How can that be?</h2>\n<p>Have a look at Spring Boot's <a href=\"https://github.com/spring-projects/spring-boot/blob/abe3d3852761430c9f5f1368d82509d0c19ac4d9/spring-boot-project/spring-boot/src/main/java/org/springframework/boot/context/logging/LoggingApplicationListener.java#L340-L346\" rel=\"nofollow noreferrer\">LoggingApplicationListener</a>.<br />\nIf you'd debug it and set a breakpoint in the highlighted code block, you'd see that the log level definition for a class <code>com.acme.mypackage.MyClass</code> becomes\n<code>com.acme.mypackage.myclass</code>.<br />\nSo <strong>a log level definition for a class looks exactly like a log level definition for a package.</strong></p>\n<p>This is related to Spring's <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-external-config-relaxed-binding\" rel=\"nofollow noreferrer\">Relaxed Binding</a>, which proposes an upper case notation for environment variables. Thus the typical camel case notation of a class is not visible for the LoggingApplicationListener: The environment variable for <code>MyClass</code> has to be defined as <code>MYCLASS</code> and will be available as <code>myclass</code> in Spring's Environment <em>(this example ignores the fully-qualified name of the class)</em>.</p>\n<p>Once the camel case notation of the class is lost, during runtime there's no chance to recover the original class name.\nThus log definitions in environment variables don't work for classes but only for packages.</p>\n<h2>Is there an alternative?</h2>\n<p>Yes, you can set the <code>SPRING_APPLICATION_JSON</code> environment variable. Its value describes the desired property in JSON style:</p>\n<pre><code>{&quot;logging&quot;:{&quot;level&quot;:{&quot;com&quot;:{&quot;acme&quot;:{&quot;package&quot;:{&quot;Class&quot;:&quot;DEBUG&quot;}}}}}}\n</code></pre>\n<p>Read more in <a href=\"https://docs.spring.io/spring-boot/docs/2.1.13.RELEASE/reference/html/boot-features-external-config.html#boot-features-external-config-application-json\" rel=\"nofollow noreferrer\">Spring's docs</a> (search for &quot;<em>SPRING_APPLICATION_JSON</em>&quot; there).</p>\n"},{"tags":[],"owner":{"account_id":2705724,"reputation":2702,"user_id":5264558,"display_name":"Daniele"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672389237,"creation_date":1672389237,"answer_id":74959604,"question_id":34181094,"body_markdown":"Setting the log level via environment variables for a **package** will work, while setting the log level for a single **class** won&#39;t work. This is mentioned in the reference doc for [Spring Boot 2/Log levels][1] and [Spring Boot 2/Log levels][2] .\r\n\r\nThe log level can be set by using the `SPRING_APPLICATION_JSON` environment variable, eg.\r\n\r\n`SPRING_APPLICATION_JSON=&#39;{&quot;logging.level.org.hibernate.SQL&quot;:&quot;DEBUG&quot;,&quot;logging.level.org.hibernate.type.descriptor.sql.BasicBinder&quot;:&quot;TRACE&quot;}&#39;`\r\n\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/2.7.7/reference/html/features.html#features.logging.log-levels\r\n  [2]: https://docs.spring.io/spring-boot/docs/3.0.1/reference/html/features.html#features.logging.log-levels","title":"Set Logging Level in Spring Boot via Environment Variable","body":"<p>Setting the log level via environment variables for a <strong>package</strong> will work, while setting the log level for a single <strong>class</strong> won't work. This is mentioned in the reference doc for <a href=\"https://docs.spring.io/spring-boot/docs/2.7.7/reference/html/features.html#features.logging.log-levels\" rel=\"nofollow noreferrer\">Spring Boot 2/Log levels</a> and <a href=\"https://docs.spring.io/spring-boot/docs/3.0.1/reference/html/features.html#features.logging.log-levels\" rel=\"nofollow noreferrer\">Spring Boot 2/Log levels</a> .</p>\n<p>The log level can be set by using the <code>SPRING_APPLICATION_JSON</code> environment variable, eg.</p>\n<p><code>SPRING_APPLICATION_JSON='{&quot;logging.level.org.hibernate.SQL&quot;:&quot;DEBUG&quot;,&quot;logging.level.org.hibernate.type.descriptor.sql.BasicBinder&quot;:&quot;TRACE&quot;}'</code></p>\n"}],"owner":{"account_id":405481,"reputation":12981,"user_id":774395,"accept_rate":70,"display_name":"DeejUK"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":139891,"favorite_count":0,"down_vote_count":0,"up_vote_count":92,"accepted_answer_id":34237691,"answer_count":10,"score":92,"last_activity_date":1694082278,"creation_date":1449670785,"question_id":34181094,"body_markdown":"Should it be possible to set logging levels through environment variables alone in a Spring Boot application?\r\n\r\nI don&#39;t want to use `application.properties` as I&#39;m running on Cloud Foundry and want to pick up changes without a deploy (but after the app has restarted, or restaged to be more precise).\r\n\r\nI&#39;ve tried setting env vars like `LOGGING_LEVEL_ORG_SPRINGFRAMEWORK=TRACE` but that has no effect. Putting `logging.level.org.springframework: TRACE` in `application.properties` does work though.","title":"Set Logging Level in Spring Boot via Environment Variable","body":"<p>Should it be possible to set logging levels through environment variables alone in a Spring Boot application?</p>\n\n<p>I don't want to use <code>application.properties</code> as I'm running on Cloud Foundry and want to pick up changes without a deploy (but after the app has restarted, or restaged to be more precise).</p>\n\n<p>I've tried setting env vars like <code>LOGGING_LEVEL_ORG_SPRINGFRAMEWORK=TRACE</code> but that has no effect. Putting <code>logging.level.org.springframework: TRACE</code> in <code>application.properties</code> does work though.</p>\n"},{"tags":["java","windows","keystore","mscapi"],"owner":{"account_id":22838100,"reputation":11,"user_id":16985582,"display_name":"Mounika"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694082079,"creation_date":1694082079,"question_id":77058716,"body_markdown":"We are reading the public key from the Windows Store to use it for signature validation of a JWT token. My application is hosted on Tomcat Server. I am able to read the certificates from the Windows Store when tomcat is run in debug mode (started from commandline). But when the tomcat is run as a local service, it returns an empty list. \r\nBelow is the code that is used to read the certs.\r\n```\r\nKeyStore keystore = KeyStore.getInstance(&quot;Windows-MY&quot;);\r\nkeystore.load(null, null);\r\nCertificate certificate = keystore.getCertificate(alias);\r\nX509Certificate cert = (X509Certificate) certificate;\r\n```\r\nBelow is the image of the Windows store having 2 entries.\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/yYyH0.png\r\n\r\nCould anyone please help identify the mistake. Thanks in advance! ","title":"Unable to get certs from Windows Store","body":"<p>We are reading the public key from the Windows Store to use it for signature validation of a JWT token. My application is hosted on Tomcat Server. I am able to read the certificates from the Windows Store when tomcat is run in debug mode (started from commandline). But when the tomcat is run as a local service, it returns an empty list.\nBelow is the code that is used to read the certs.</p>\n<pre><code>KeyStore keystore = KeyStore.getInstance(&quot;Windows-MY&quot;);\nkeystore.load(null, null);\nCertificate certificate = keystore.getCertificate(alias);\nX509Certificate cert = (X509Certificate) certificate;\n</code></pre>\n<p>Below is the image of the Windows store having 2 entries.\n<a href=\"https://i.stack.imgur.com/yYyH0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yYyH0.png\" alt=\"enter image description here\" /></a></p>\n<p>Could anyone please help identify the mistake. Thanks in advance!</p>\n"},{"tags":["java","swing","jcombobox","jcheckbox"],"comments":[{"owner":{"account_id":269622,"reputation":58936,"user_id":559070,"accept_rate":74,"display_name":"Harry Joy"},"score":0,"creation_date":1296976421,"post_id":4912123,"comment_id":5470724,"body_markdown":"use `CellRenderer` to do this.","body":"use <code>CellRenderer</code> to do this."},{"owner":{"account_id":25822,"reputation":78747,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"score":0,"creation_date":1296976523,"post_id":4912123,"comment_id":5470738,"body_markdown":"What do you mean by adding a JCheckBox to a JComboBox? What is it that you want to achieve?","body":"What do you mean by adding a JCheckBox to a JComboBox? What is it that you want to achieve?"},{"owner":{"account_id":704854,"reputation":23,"user_id":605089,"display_name":"ravI Teja"},"score":0,"creation_date":1296977492,"post_id":4912123,"comment_id":5470816,"body_markdown":"I have a JComboBox i.e, list of items from that i need to select some items from that JComboBox list..","body":"I have a JComboBox i.e, list of items from that i need to select some items from that JComboBox list.."}],"answers":[{"tags":[],"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1296976486,"creation_date":1296976486,"answer_id":4912135,"question_id":4912123,"body_markdown":"There are ways to jimmy JCheckBoxes into a JComboBoxes, but it&#39;s not nearly as straightforward as using them in a JTable since JComboBoxes don&#39;t use cell editors, only renderers.  Let&#39;s see if I can re-find this on Google....\r\n\r\nPlease check here: [JComboCheckBox][1]   \r\nand here: [Check Boxes in a Combobox][2]\r\n\r\n\r\n  [1]: http://www.aui.computing.edu.au/projects/Outcomes_Focused_Education/resources/graph/JComboCheckBox.java\r\n  [2]: https://stackoverflow.com/questions/1573159/java-check-boxes-in-a-jcombobox","title":"Can JCheckBox components be added to JComboBoxes?","body":"<p>There are ways to jimmy JCheckBoxes into a JComboBoxes, but it's not nearly as straightforward as using them in a JTable since JComboBoxes don't use cell editors, only renderers.  Let's see if I can re-find this on Google....</p>\n\n<p>Please check here: <a href=\"http://www.aui.computing.edu.au/projects/Outcomes_Focused_Education/resources/graph/JComboCheckBox.java\" rel=\"nofollow noreferrer\">JComboCheckBox</a><br>\nand here: <a href=\"https://stackoverflow.com/questions/1573159/java-check-boxes-in-a-jcombobox\">Check Boxes in a Combobox</a></p>\n"},{"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1304692350,"post_id":4912141,"comment_id":6807545,"body_markdown":"I don&#39;t think that&#39;s what anyone wants: open the dropdown and navigate by keyboard in the list","body":"I don&#39;t think that&#39;s what anyone wants: open the dropdown and navigate by keyboard in the list"}],"tags":[],"owner":{"account_id":206144,"reputation":14410,"user_id":455257,"accept_rate":56,"display_name":"ayush"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1296976643,"creation_date":1296976643,"answer_id":4912141,"question_id":4912123,"body_markdown":"    import java.awt.*;\r\n    import java.awt.event.*;\r\n    import javax.swing.*;\r\n     \r\n    public class CheckCombo implements ActionListener\r\n    {\r\n        public void actionPerformed(ActionEvent e)\r\n        {\r\n            JComboBox cb = (JComboBox)e.getSource();\r\n            CheckComboStore store = (CheckComboStore)cb.getSelectedItem();\r\n            CheckComboRenderer ccr = (CheckComboRenderer)cb.getRenderer();\r\n            ccr.checkBox.setSelected((store.state = !store.state));\r\n        }\r\n     \r\n        private JPanel getContent()\r\n        {\r\n            String[] ids = { &quot;north&quot;, &quot;west&quot;, &quot;south&quot;, &quot;east&quot; };\r\n            Boolean[] values =\r\n            {\r\n                Boolean.TRUE, Boolean.FALSE, Boolean.FALSE, Boolean.FALSE\r\n            };\r\n            CheckComboStore[] stores = new CheckComboStore[ids.length];\r\n            for(int j = 0; j &lt; ids.length; j++)\r\n                stores[j] = new CheckComboStore(ids[j], values[j]);\r\n            JComboBox combo = new JComboBox(stores);\r\n            combo.setRenderer(new CheckComboRenderer());\r\n            combo.addActionListener(this);\r\n            JPanel panel = new JPanel();\r\n            panel.add(combo);\r\n            return panel;\r\n        }\r\n     \r\n        public static void main(String[] args)\r\n        {\r\n            JFrame f = new JFrame();\r\n            f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            f.getContentPane().add(new CheckCombo().getContent());\r\n            f.setSize(300,160);\r\n            f.setLocation(200,200);\r\n            f.setVisible(true);\r\n        }\r\n    }\r\n     \r\n    /** adapted from comment section of ListCellRenderer api */\r\n    class CheckComboRenderer implements ListCellRenderer\r\n    {\r\n        JCheckBox checkBox;\r\n     \r\n        public CheckComboRenderer()\r\n        {\r\n            checkBox = new JCheckBox();\r\n        }\r\n        public Component getListCellRendererComponent(JList list,\r\n                                                      Object value,\r\n                                                      int index,\r\n                                                      boolean isSelected,\r\n                                                      boolean cellHasFocus)\r\n        {\r\n            CheckComboStore store = (CheckComboStore)value;\r\n            checkBox.setText(store.id);\r\n            checkBox.setSelected(((Boolean)store.state).booleanValue());\r\n            checkBox.setBackground(isSelected ? Color.red : Color.white);\r\n            checkBox.setForeground(isSelected ? Color.white : Color.black);\r\n            return checkBox;\r\n        }\r\n    }\r\n     \r\n    class CheckComboStore\r\n    {\r\n        String id;\r\n        Boolean state;\r\n     \r\n        public CheckComboStore(String id, Boolean state)\r\n        {\r\n            this.id = id;\r\n            this.state = state;\r\n        }\r\n    }\r\n\r\n","title":"Can JCheckBox components be added to JComboBoxes?","body":"<pre><code>import java.awt.*;\nimport java.awt.event.*;\nimport javax.swing.*;\n\npublic class CheckCombo implements ActionListener\n{\n    public void actionPerformed(ActionEvent e)\n    {\n        JComboBox cb = (JComboBox)e.getSource();\n        CheckComboStore store = (CheckComboStore)cb.getSelectedItem();\n        CheckComboRenderer ccr = (CheckComboRenderer)cb.getRenderer();\n        ccr.checkBox.setSelected((store.state = !store.state));\n    }\n\n    private JPanel getContent()\n    {\n        String[] ids = { \"north\", \"west\", \"south\", \"east\" };\n        Boolean[] values =\n        {\n            Boolean.TRUE, Boolean.FALSE, Boolean.FALSE, Boolean.FALSE\n        };\n        CheckComboStore[] stores = new CheckComboStore[ids.length];\n        for(int j = 0; j &lt; ids.length; j++)\n            stores[j] = new CheckComboStore(ids[j], values[j]);\n        JComboBox combo = new JComboBox(stores);\n        combo.setRenderer(new CheckComboRenderer());\n        combo.addActionListener(this);\n        JPanel panel = new JPanel();\n        panel.add(combo);\n        return panel;\n    }\n\n    public static void main(String[] args)\n    {\n        JFrame f = new JFrame();\n        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        f.getContentPane().add(new CheckCombo().getContent());\n        f.setSize(300,160);\n        f.setLocation(200,200);\n        f.setVisible(true);\n    }\n}\n\n/** adapted from comment section of ListCellRenderer api */\nclass CheckComboRenderer implements ListCellRenderer\n{\n    JCheckBox checkBox;\n\n    public CheckComboRenderer()\n    {\n        checkBox = new JCheckBox();\n    }\n    public Component getListCellRendererComponent(JList list,\n                                                  Object value,\n                                                  int index,\n                                                  boolean isSelected,\n                                                  boolean cellHasFocus)\n    {\n        CheckComboStore store = (CheckComboStore)value;\n        checkBox.setText(store.id);\n        checkBox.setSelected(((Boolean)store.state).booleanValue());\n        checkBox.setBackground(isSelected ? Color.red : Color.white);\n        checkBox.setForeground(isSelected ? Color.white : Color.black);\n        return checkBox;\n    }\n}\n\nclass CheckComboStore\n{\n    String id;\n    Boolean state;\n\n    public CheckComboStore(String id, Boolean state)\n    {\n        this.id = id;\n        this.state = state;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26457824,"reputation":1,"user_id":20100183,"display_name":"Navajeevan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694082048,"creation_date":1694082048,"answer_id":77058713,"question_id":4912123,"body_markdown":"You can achieve this by using the [Japura-GUI][1] library, which provides a CheckComboBox component for creating JComboBoxes with checkboxes.\r\nYou can find detailed documentation and usage examples for the Japura-GUI CheckComboBox [here][2]\r\n\r\nSimply follow the documentation to integrate the CheckComboBox into your Java Swing application.\r\n\r\n\r\n  [1]: https://github.com/caduandrade/japura-gui/wiki\r\n  [2]: https://github.com/caduandrade/japura-gui/wiki/CheckComboBox","title":"Can JCheckBox components be added to JComboBoxes?","body":"<p>You can achieve this by using the <a href=\"https://github.com/caduandrade/japura-gui/wiki\" rel=\"nofollow noreferrer\">Japura-GUI</a> library, which provides a CheckComboBox component for creating JComboBoxes with checkboxes.\nYou can find detailed documentation and usage examples for the Japura-GUI CheckComboBox <a href=\"https://github.com/caduandrade/japura-gui/wiki/CheckComboBox\" rel=\"nofollow noreferrer\">here</a></p>\n<p>Simply follow the documentation to integrate the CheckComboBox into your Java Swing application.</p>\n"}],"owner":{"account_id":704854,"reputation":23,"user_id":605089,"display_name":"ravI Teja"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3129,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":4912135,"answer_count":3,"score":2,"last_activity_date":1694082048,"creation_date":1296976220,"question_id":4912123,"body_markdown":"Can JCheckBox components be added to JComboBoxes?  If so, how?","title":"Can JCheckBox components be added to JComboBoxes?","body":"<p>Can JCheckBox components be added to JComboBoxes?  If so, how?</p>\n"},{"tags":["java","spring","spring-boot","dependency-injection"],"comments":[{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1694085293,"post_id":77058704,"comment_id":135846222,"body_markdown":"What happens if you replace `getFoos()` with two separate methods that each return a single `Foo`?","body":"What happens if you replace <code>getFoos()</code> with two separate methods that each return a single <code>Foo</code>?"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1694088840,"post_id":77058704,"comment_id":135847001,"body_markdown":"Your expectations are off. When injecting a `Collection&lt;Foo&gt;` Spring will inject a collection with all instances of beans of type `Foo`. For which you only have 1 bean, the other method generates a bean of type `Set&lt;Foo&gt;` and thus not compatible. If you want all beans just make them all beans instaef of a single bean and a collection of beans.","body":"Your expectations are off. When injecting a <code>Collection&lt;Foo&gt;</code> Spring will inject a collection with all instances of beans of type <code>Foo</code>. For which you only have 1 bean, the other method generates a bean of type <code>Set&lt;Foo&gt;</code> and thus not compatible. If you want all beans just make them all beans instaef of a single bean and a collection of beans."}],"owner":{"account_id":7819576,"reputation":133,"user_id":5913107,"display_name":"Dans Merino"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694081991,"creation_date":1694081991,"question_id":77058704,"body_markdown":"I have an `@Autowired` set of the `Foo` interface and a bean that returns a set of the same class and it works perfectly. Now I have added a new component that returns an object with that implements the same interface. I naively expected the autowired to pull from both sources and combine them. But what happened is that it is creating a set with only the component.\r\n\r\nBar class that has the autowired.\r\n```\r\npublic class Bar(){\r\n    public void do(){\r\n        foos.apply();\r\n    }\r\n\r\n    @Autowired\r\n    private Collection&lt;Foo&gt; foos;\r\n}\r\n```\r\n\r\nConfig class that returns a set of `Foo`\r\n```\r\n@Configuration\r\npublic class Config(){\r\n\r\n    @Bean\r\n    public Set&lt;Foo&gt; getFoos(){\r\n        Set.of(\r\n           FooImpl1(&quot;a&quot;),\r\n           FooImpl1(&quot;b&quot;)\r\n        )\r\n    }\r\n    }\r\n\r\n    @Autowired\r\n    private Collection&lt;Foo&gt; foos;\r\n}\r\n```\r\n\r\nThe above works, but when I add the following\r\n```\r\n@Component\r\npublic class FooImpl2 implements Foo(){\r\n    public void apply(){\r\n        foos.apply();\r\n    }\r\n}\r\n```\r\nThe `foos` property only has 1 element and is of type `FooImpl2`.\r\n\r\nIt&#39;s there a way to make Spring understand that I want both sources of `Foo`s with `@Autowired` or do I need to change the design of the code?","title":"Autowire a collection with different sources","body":"<p>I have an <code>@Autowired</code> set of the <code>Foo</code> interface and a bean that returns a set of the same class and it works perfectly. Now I have added a new component that returns an object with that implements the same interface. I naively expected the autowired to pull from both sources and combine them. But what happened is that it is creating a set with only the component.</p>\n<p>Bar class that has the autowired.</p>\n<pre><code>public class Bar(){\n    public void do(){\n        foos.apply();\n    }\n\n    @Autowired\n    private Collection&lt;Foo&gt; foos;\n}\n</code></pre>\n<p>Config class that returns a set of <code>Foo</code></p>\n<pre><code>@Configuration\npublic class Config(){\n\n    @Bean\n    public Set&lt;Foo&gt; getFoos(){\n        Set.of(\n           FooImpl1(&quot;a&quot;),\n           FooImpl1(&quot;b&quot;)\n        )\n    }\n    }\n\n    @Autowired\n    private Collection&lt;Foo&gt; foos;\n}\n</code></pre>\n<p>The above works, but when I add the following</p>\n<pre><code>@Component\npublic class FooImpl2 implements Foo(){\n    public void apply(){\n        foos.apply();\n    }\n}\n</code></pre>\n<p>The <code>foos</code> property only has 1 element and is of type <code>FooImpl2</code>.</p>\n<p>It's there a way to make Spring understand that I want both sources of <code>Foo</code>s with <code>@Autowired</code> or do I need to change the design of the code?</p>\n"},{"tags":["java","xml","xml-parsing"],"comments":[{"owner":{"account_id":1418971,"reputation":15473,"user_id":1344008,"display_name":"npe"},"score":1,"creation_date":1340177022,"post_id":11114665,"comment_id":14560885,"body_markdown":"1. How is the `InputSource` built? 2. How big is the `XML`? 3. Does the `XML` come from a local file, from URL, Database, some other streaming source - perhaps the socket gets disconnected, or the `InputStream` gets closed in the middle of parsing?","body":"1. How is the <code>InputSource</code> built? 2. How big is the <code>XML</code>? 3. Does the <code>XML</code> come from a local file, from URL, Database, some other streaming source - perhaps the socket gets disconnected, or the <code>InputStream</code> gets closed in the middle of parsing?"},{"owner":{"account_id":88112,"reputation":51921,"user_id":243943,"accept_rate":89,"display_name":"npinti"},"score":0,"creation_date":1340177123,"post_id":11114665,"comment_id":14560918,"body_markdown":"Are you sure that when the server crashed it did not add some special characters? You could try to throw in the XML from one of your working servers and see if it works.","body":"Are you sure that when the server crashed it did not add some special characters? You could try to throw in the XML from one of your working servers and see if it works."},{"owner":{"account_id":119801,"reputation":1754,"user_id":311786,"accept_rate":55,"display_name":"Manish"},"score":0,"creation_date":1340178260,"post_id":11114665,"comment_id":14561324,"body_markdown":"@npe - \n\n(1) The `InputSource` is built with `FileReader` - \n`this.readSource( new InputSource( fr ) );`\n\n(2) XML is 108.1 KB in size. It has been that way for a long time now. \n\n(3) XML comes from local file system. \n\nI am also suspecting if `InputStream` is getting closed in between. How can I detect that? And again, wondering why it worked before and not now :(\n\n@npinti - I have used fresh XML from SVN and also tried same version in XML validator. It *is* valid XML.","body":"@npe -   (1) The <code>InputSource</code> is built with <code>FileReader</code> -  <code>this.readSource( new InputSource( fr ) );</code>  (2) XML is 108.1 KB in size. It has been that way for a long time now.   (3) XML comes from local file system.   I am also suspecting if <code>InputStream</code> is getting closed in between. How can I detect that? And again, wondering why it worked before and not now :(  @npinti - I have used fresh XML from SVN and also tried same version in XML validator. It <i>is</i> valid XML."},{"owner":{"account_id":1418971,"reputation":15473,"user_id":1344008,"display_name":"npe"},"score":0,"creation_date":1340178645,"post_id":11114665,"comment_id":14561464,"body_markdown":"@Manish: try to set a breakpoint inside the `FileReader#close()` and see if it&#39;s somehow called. Or subclass `FileReader` and add some logging - you could for example dump bytes that are `read()` to see if the file is read completely, or it breaks somewhere.","body":"@Manish: try to set a breakpoint inside the <code>FileReader#close()</code> and see if it&#39;s somehow called. Or subclass <code>FileReader</code> and add some logging - you could for example dump bytes that are <code>read()</code> to see if the file is read completely, or it breaks somewhere."},{"owner":{"account_id":1418971,"reputation":15473,"user_id":1344008,"display_name":"npe"},"score":0,"creation_date":1340178893,"post_id":11114665,"comment_id":14561555,"body_markdown":"@Manish: another question: is the `InputSource` reused, or always created from scratch?","body":"@Manish: another question: is the <code>InputSource</code> reused, or always created from scratch?"},{"owner":{"account_id":119801,"reputation":1754,"user_id":311786,"accept_rate":55,"display_name":"Manish"},"score":0,"creation_date":1340179482,"post_id":11114665,"comment_id":14561788,"body_markdown":"@npe - `InputSource` is always created from scratch.","body":"@npe - <code>InputSource</code> is always created from scratch."}],"answers":[{"tags":[],"owner":{"account_id":701757,"reputation":121151,"user_id":592139,"display_name":"Ian Roberts"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1353444883,"creation_date":1353444883,"answer_id":13481962,"question_id":11114665,"body_markdown":"Are you sure that the XML file is in the correct character encoding? `FileReader` always uses the platform default encoding, so if the &quot;working&quot; server had a default encoding of (say) ISO-8859-1 and the &quot;problem&quot; server uses UTF-8 you would see this error if the XML contains any non-ASCII characters.\r\n\r\nDoes it work if you create the InputSource from a FileInputStream instead of a FileReader?","title":"org.xml.sax.SAXParseException: Premature end of file for *VALID* XML","body":"<p>Are you sure that the XML file is in the correct character encoding? <code>FileReader</code> always uses the platform default encoding, so if the \"working\" server had a default encoding of (say) ISO-8859-1 and the \"problem\" server uses UTF-8 you would see this error if the XML contains any non-ASCII characters.</p>\n\n<p>Does it work if you create the InputSource from a FileInputStream instead of a FileReader?</p>\n"},{"comments":[{"owner":{"account_id":4183802,"reputation":309,"user_id":3428029,"display_name":"phe"},"score":0,"creation_date":1608561037,"post_id":13752953,"comment_id":115613917,"body_markdown":"This describes my problem. I used the inputStream twice. However, reset() did not work. So, how can I close and reopen the inputstream?","body":"This describes my problem. I used the inputStream twice. However, reset() did not work. So, how can I close and reopen the inputstream?"}],"tags":[],"owner":{"account_id":2120402,"reputation":769,"user_id":1883770,"display_name":"dadob051"},"comment_count":1,"down_vote_count":1,"up_vote_count":77,"is_accepted":false,"score":76,"last_activity_date":1392028679,"creation_date":1354829358,"answer_id":13752953,"question_id":11114665,"body_markdown":"It is a problem with Java InputStream. When the stream is read once the file offset position counter is moved to the end of file. On the subsequent read by using the same stream you&#39;ll get this error. So you have to close and reopen the stream again or call `inputStream.reset()` to reset the offset counter to its initial position.","title":"org.xml.sax.SAXParseException: Premature end of file for *VALID* XML","body":"<p>It is a problem with Java InputStream. When the stream is read once the file offset position counter is moved to the end of file. On the subsequent read by using the same stream you'll get this error. So you have to close and reopen the stream again or call <code>inputStream.reset()</code> to reset the offset counter to its initial position.</p>\n"},{"comments":[{"owner":{"account_id":6411789,"reputation":906,"user_id":4971319,"display_name":"Patrick Beagan"},"score":2,"creation_date":1568988455,"post_id":14810069,"comment_id":102462366,"body_markdown":"This solved a problem I had after resolving conflicts on an Android branch. If you have a 0 byte xml file, resources will not be bundled successfully. If you run `find . -type f -empty | grep xml` to find the offending file and remove it, this error goes away.","body":"This solved a problem I had after resolving conflicts on an Android branch. If you have a 0 byte xml file, resources will not be bundled successfully. If you run <code>find . -type f -empty | grep xml</code> to find the offending file and remove it, this error goes away."}],"tags":[],"owner":{"account_id":119801,"reputation":1754,"user_id":311786,"accept_rate":55,"display_name":"Manish"},"comment_count":1,"down_vote_count":0,"up_vote_count":31,"is_accepted":true,"score":31,"last_activity_date":1360577851,"creation_date":1360577851,"answer_id":14810069,"question_id":11114665,"body_markdown":"This is resolved. The problem was elsewhere. Another code in cron job was truncating XML to 0 length file. I have taken care of that. \r\n\r\n ","title":"org.xml.sax.SAXParseException: Premature end of file for *VALID* XML","body":"<p>This is resolved. The problem was elsewhere. Another code in cron job was truncating XML to 0 length file. I have taken care of that. </p>\n"},{"tags":[],"owner":{"account_id":531467,"reputation":1290,"user_id":1285846,"accept_rate":71,"display_name":"Danny Schoemann"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1414327892,"creation_date":1414327892,"answer_id":26573153,"question_id":11114665,"body_markdown":"In our case it was an empty **AndroidManifest.xml**.\r\n\r\nWhile upgrading Eclispe we ran into the [usual trouble][1], and AndroidManifest.xml must have been checked into SVN by the build script after being clobbered.\r\n\r\nFound it by compiling from inside Eclipse, instead of from the command line.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23","title":"org.xml.sax.SAXParseException: Premature end of file for *VALID* XML","body":"<p>In our case it was an empty <strong>AndroidManifest.xml</strong>.</p>\n\n<p>While upgrading Eclispe we ran into the <a href=\"https://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23\">usual trouble</a>, and AndroidManifest.xml must have been checked into SVN by the build script after being clobbered.</p>\n\n<p>Found it by compiling from inside Eclipse, instead of from the command line.</p>\n"},{"tags":[],"owner":{"account_id":257029,"reputation":3131,"user_id":538160,"accept_rate":62,"display_name":"supernova"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1439332213,"creation_date":1439332213,"answer_id":31953108,"question_id":11114665,"body_markdown":"If input stream is not closed properly then this exception may happen.\r\nmake sure :\r\nIf inputstream  used is not used &quot;Before&quot; in some way then where you are intended to read.\r\ni.e if read 2nd time from same input stream in single operation then 2nd call will get this exception.\r\nAlso make sure to close input stream in finally block or something like that.","title":"org.xml.sax.SAXParseException: Premature end of file for *VALID* XML","body":"<p>If input stream is not closed properly then this exception may happen.\nmake sure :\nIf inputstream  used is not used \"Before\" in some way then where you are intended to read.\ni.e if read 2nd time from same input stream in single operation then 2nd call will get this exception.\nAlso make sure to close input stream in finally block or something like that.</p>\n"},{"tags":[],"owner":{"account_id":8429272,"reputation":51,"user_id":6325574,"display_name":"Amit Ty"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1465645974,"creation_date":1465642195,"answer_id":37762838,"question_id":11114665,"body_markdown":"Please make sure that you are not consuming your `inputstream` anywhere before parsing. Sample code is following:\r\nthe respose below is `httpresponse`(i.e. response) and main content is contain inside `StringEntity (i.e. getEntity())in form of inputStream(i.e. getContent())`. \r\n\r\n    InputStream rescontent = response.getEntity().getContent();\r\n    tsResponse=(TsResponse) transformer.convertFromXMLToObject(rescontent );","title":"org.xml.sax.SAXParseException: Premature end of file for *VALID* XML","body":"<p>Please make sure that you are not consuming your <code>inputstream</code> anywhere before parsing. Sample code is following:\nthe respose below is <code>httpresponse</code>(i.e. response) and main content is contain inside <code>StringEntity (i.e. getEntity())in form of inputStream(i.e. getContent())</code>. </p>\n\n<pre><code>InputStream rescontent = response.getEntity().getContent();\ntsResponse=(TsResponse) transformer.convertFromXMLToObject(rescontent );\n</code></pre>\n"},{"tags":[],"owner":{"account_id":881180,"reputation":14633,"user_id":246394,"accept_rate":93,"display_name":"Zo72"},"comment_count":0,"down_vote_count":1,"up_vote_count":25,"is_accepted":false,"score":24,"last_activity_date":1476437749,"creation_date":1476437749,"answer_id":40039847,"question_id":11114665,"body_markdown":"This exception only happens if you are parsing an empty String/empty byte array.\r\n\r\nbelow is a snippet on how to reproduce it:\r\n\r\n    String xml = &quot;&quot;; // &lt;-- deliberately an empty string.\r\n    ByteArrayInputStream xmlStream = new java.io.ByteArrayInputStream(xml.getBytes());\r\n    Unmarshaller u = JAXBContext.newInstance(...)\r\n    u.setSchema(...);\r\n    u.unmarshal( xmlStream ); // &lt;-- here it will fail\r\n\r\n","title":"org.xml.sax.SAXParseException: Premature end of file for *VALID* XML","body":"<p>This exception only happens if you are parsing an empty String/empty byte array.</p>\n\n<p>below is a snippet on how to reproduce it:</p>\n\n<pre><code>String xml = \"\"; // &lt;-- deliberately an empty string.\nByteArrayInputStream xmlStream = new java.io.ByteArrayInputStream(xml.getBytes());\nUnmarshaller u = JAXBContext.newInstance(...)\nu.setSchema(...);\nu.unmarshal( xmlStream ); // &lt;-- here it will fail\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3208452,"reputation":255,"user_id":2708973,"accept_rate":26,"display_name":"Marcin Wiśniewski"},"score":0,"creation_date":1654255458,"post_id":70249463,"comment_id":128053062,"body_markdown":"Hi @berhauz. I think that I have similar problem and I cannot manage with it. I&#39;ve ApacheServicemix 7.0.1 and blueprint with defined conduit (CXF). When I try to deploy it to servicemix I&#39;m receiving `Unable to find namespace handler for http://schemas.xmlsoap.org/wsdl/` followed by `org.xml.sax.SAXParseException: Premature end of file`. I&#39;ve tried your suggestions but it didn&#39;t help.","body":"Hi @berhauz. I think that I have similar problem and I cannot manage with it. I&#39;ve ApacheServicemix 7.0.1 and blueprint with defined conduit (CXF). When I try to deploy it to servicemix I&#39;m receiving <code>Unable to find namespace handler for http:&#47;&#47;schemas.xmlsoap.org&#47;wsdl&#47;</code> followed by <code>org.xml.sax.SAXParseException: Premature end of file</code>. I&#39;ve tried your suggestions but it didn&#39;t help."}],"tags":[],"owner":{"account_id":4673460,"reputation":2327,"user_id":3784642,"accept_rate":0,"display_name":"Bernard Hauzeur"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1638811738,"creation_date":1638811738,"answer_id":70249463,"question_id":11114665,"body_markdown":"NEW Occurence of this same error on DECEMBER 6 2021!!!\r\n\r\nSample traces:\r\n\r\n    XmlBeanDefinitionStoreException: Line -1 in XML document from ServletContext resource [&lt;here a reference to spring context .xml file&gt;] is invalid; nested exception is org.xml.sax.SAXParseException; Premature end of file.\r\n    Caused by: org.xml.sax.SAXParseException; Premature end of file.\r\n    at org.apache.xerces.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:201)\r\n    at org.apache.xerces.util.ErrorHandlerWrapper.fatalError(ErrorHandlerWrapper.java:175)\r\n    at org.apache.xerces.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:398)\r\n    at org.apache.xerces.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:325)\r\n    at org.apache.xerces.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:282)\r\n    at org.apache.xerces.impl.XMLVersionDetector.determineDocVersion(XMLVersionDetector.java:204)\r\n    at org.apache.xerces.impl.xs.opti.SchemaParsingConfig.parse(SchemaParsingConfig.java:576)\r\n    at org.apache.xerces.impl.xs.opti.SchemaParsingConfig.parse(SchemaParsingConfig.java:679)\r\n    at org.apache.xerces.impl.xs.opti.SchemaDOMParser.parse(SchemaDOMParser.java:527)\r\n    at org.apache.xerces.impl.xs.traversers.XSDHandler.getSchemaDocument(XSDHandler.java:2148)\r\n    at org.apache.xerces.impl.xs.traversers.XSDHandler.parseSchema(XSDHandler.java:557)\r\n\r\n**The HINT:**\r\n\r\n1. Apache CAMEL team decided to reorganize CAMEL schema files as usually referenced in XML Spring contexts for instance.\r\nInstead of just removing (which would have entailed a neat exception, easy to spot) the http://camel.apache.org/schema/spring/camel-spring-2.16.4.xsd usual schema location, they implemented a HTTP 301 redirect response to HTTPS.\r\n\r\n2. The Apache XERCES library does not throw an error in case of HTTP 301, but assumes it has received an empty file!! That entails weird and erroneous exceptions / putting you on the wrong track as these report the failure linked to the top XML file and not the actually offending schema descriptor\r\n\r\n3. the complete revalidation of all schema descriptors and their XSD dependencies at WAR reload/deploy time (from the data/content repo cache) in our app server platform was totally unexpected... and is totally useless! worse: creating a runtime public network dependency for just reloading already validated components and descriptors (at build time)\r\n\r\n1+2+3 above, and BANG! \r\nmajor service disruption: the production server was unable to reload any component with a dependency on CAMEL \r\n\r\n**Fixings:**\r\n\r\nTwo candidates:\r\n \r\na) in xsi:schemaLocation attributes in XML simply add &#39;s&#39; to the http://camel.apache.org/schema/etc becoming https://.... but accept to live with a public network dependency on every component reload\r\n\r\nb) replace all http://... shema locations by classpath:&lt;local file name.xsd&gt;. You will have downloaded all XSD and sub-dependent schemas, and deploy them along with the WAR ensuring a visibility to the classloader. E.g. put the files in java/main/resources/somename.xsd and supply classpath:somename.xsd as schema location path\r\n\r\n","title":"org.xml.sax.SAXParseException: Premature end of file for *VALID* XML","body":"<p>NEW Occurence of this same error on DECEMBER 6 2021!!!</p>\n<p>Sample traces:</p>\n<pre><code>XmlBeanDefinitionStoreException: Line -1 in XML document from ServletContext resource [&lt;here a reference to spring context .xml file&gt;] is invalid; nested exception is org.xml.sax.SAXParseException; Premature end of file.\nCaused by: org.xml.sax.SAXParseException; Premature end of file.\nat org.apache.xerces.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:201)\nat org.apache.xerces.util.ErrorHandlerWrapper.fatalError(ErrorHandlerWrapper.java:175)\nat org.apache.xerces.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:398)\nat org.apache.xerces.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:325)\nat org.apache.xerces.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:282)\nat org.apache.xerces.impl.XMLVersionDetector.determineDocVersion(XMLVersionDetector.java:204)\nat org.apache.xerces.impl.xs.opti.SchemaParsingConfig.parse(SchemaParsingConfig.java:576)\nat org.apache.xerces.impl.xs.opti.SchemaParsingConfig.parse(SchemaParsingConfig.java:679)\nat org.apache.xerces.impl.xs.opti.SchemaDOMParser.parse(SchemaDOMParser.java:527)\nat org.apache.xerces.impl.xs.traversers.XSDHandler.getSchemaDocument(XSDHandler.java:2148)\nat org.apache.xerces.impl.xs.traversers.XSDHandler.parseSchema(XSDHandler.java:557)\n</code></pre>\n<p><strong>The HINT:</strong></p>\n<ol>\n<li><p>Apache CAMEL team decided to reorganize CAMEL schema files as usually referenced in XML Spring contexts for instance.\nInstead of just removing (which would have entailed a neat exception, easy to spot) the <a href=\"http://camel.apache.org/schema/spring/camel-spring-2.16.4.xsd\" rel=\"nofollow noreferrer\">http://camel.apache.org/schema/spring/camel-spring-2.16.4.xsd</a> usual schema location, they implemented a HTTP 301 redirect response to HTTPS.</p>\n</li>\n<li><p>The Apache XERCES library does not throw an error in case of HTTP 301, but assumes it has received an empty file!! That entails weird and erroneous exceptions / putting you on the wrong track as these report the failure linked to the top XML file and not the actually offending schema descriptor</p>\n</li>\n<li><p>the complete revalidation of all schema descriptors and their XSD dependencies at WAR reload/deploy time (from the data/content repo cache) in our app server platform was totally unexpected... and is totally useless! worse: creating a runtime public network dependency for just reloading already validated components and descriptors (at build time)</p>\n</li>\n</ol>\n<p>1+2+3 above, and BANG!\nmajor service disruption: the production server was unable to reload any component with a dependency on CAMEL</p>\n<p><strong>Fixings:</strong></p>\n<p>Two candidates:</p>\n<p>a) in xsi:schemaLocation attributes in XML simply add 's' to the <a href=\"http://camel.apache.org/schema/etc\" rel=\"nofollow noreferrer\">http://camel.apache.org/schema/etc</a> becoming https://.... but accept to live with a public network dependency on every component reload</p>\n<p>b) replace all http://... shema locations by classpath:. You will have downloaded all XSD and sub-dependent schemas, and deploy them along with the WAR ensuring a visibility to the classloader. E.g. put the files in java/main/resources/somename.xsd and supply classpath:somename.xsd as schema location path</p>\n"},{"tags":[],"owner":{"account_id":10541758,"reputation":611,"user_id":7767532,"display_name":"Samir Ghoneim"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694081956,"creation_date":1694081956,"answer_id":77058699,"question_id":11114665,"body_markdown":"This happened to me\r\nThe problem is that there is an empty .xml file in class path which Camel scans it. So removing it solved the problem","title":"org.xml.sax.SAXParseException: Premature end of file for *VALID* XML","body":"<p>This happened to me\nThe problem is that there is an empty .xml file in class path which Camel scans it. So removing it solved the problem</p>\n"}],"owner":{"account_id":119801,"reputation":1754,"user_id":311786,"accept_rate":55,"display_name":"Manish"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":267949,"favorite_count":0,"down_vote_count":0,"up_vote_count":62,"accepted_answer_id":14810069,"answer_count":9,"score":62,"last_activity_date":1694081956,"creation_date":1340176832,"question_id":11114665,"body_markdown":"I am getting very strange &quot;Premature end of file.&quot; exception for last few days on one of our servers. The *same* configuration XML works fine on another server. We are using Tomcat 5.0.28 on both these servers. This code has been working for ages (7+ years), only after recent server crash, we faced this problem on one of the servers. There is no change in XML as well as Java parsing code. :(\r\n\r\nThe only difference I can see is in Java versions - \r\n\r\n**Problem Server**\r\njava version &quot;1.6.0_16&quot;\r\nJava(TM) SE Runtime Environment (build 1.6.0_16-b01)\r\nJava HotSpot(TM) 64-Bit Server VM (build 14.2-b01, mixed mode)\r\n\r\n**Working Server**\r\njava version &quot;1.6.0_07&quot;\r\nJava(TM) SE Runtime Environment (build 1.6.0_07-b06)\r\nJava HotSpot(TM) 64-Bit Server VM (build 10.0-b23, mixed mode)\r\n\r\nHere is the Java code that has been working for several years -\r\n\r\n    private void readSource(final InputSource in ) {\r\n    \ttry {\r\n    \t\tDocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();\r\n    \t\tDocumentBuilder db = dbf.newDocumentBuilder();\r\n    \t\tDocument doc = db.parse(in);\r\n    \t\tElement elt = doc.getDocumentElement();\r\n    \t\r\n    \t\tthis.readElement( elt );\r\n    \t} catch ( Exception ex ) {\r\n    \t\tex.printStackTrace();\r\n    \t\tthrow new ConfigurationException( &quot;Unable to parse configuration information&quot;, ex );\r\n    \t}\r\n    }\r\n\r\nAnd here is the exception. \r\n\r\n    [Fatal Error] :-1:-1: Premature end of file.\r\n    org.xml.sax.SAXParseException: Premature end of file.\r\n            at org.apache.xerces.parsers.DOMParser.parse(Unknown Source)\r\n            at org.apache.xerces.jaxp.DocumentBuilderImpl.parse(Unknown Source)\r\n            at com.circus.core.Configuration.readSource(Configuration.java:706)\r\n\r\nI have already tried validating XML and found no errors there. Any idea where else can I look for possible problem? \r\n\r\nAny pointers would be highly appreciated!\r\n\r\nTIA,\r\n- Manish","title":"org.xml.sax.SAXParseException: Premature end of file for *VALID* XML","body":"<p>I am getting very strange \"Premature end of file.\" exception for last few days on one of our servers. The <em>same</em> configuration XML works fine on another server. We are using Tomcat 5.0.28 on both these servers. This code has been working for ages (7+ years), only after recent server crash, we faced this problem on one of the servers. There is no change in XML as well as Java parsing code. :(</p>\n\n<p>The only difference I can see is in Java versions - </p>\n\n<p><strong>Problem Server</strong>\njava version \"1.6.0_16\"\nJava(TM) SE Runtime Environment (build 1.6.0_16-b01)\nJava HotSpot(TM) 64-Bit Server VM (build 14.2-b01, mixed mode)</p>\n\n<p><strong>Working Server</strong>\njava version \"1.6.0_07\"\nJava(TM) SE Runtime Environment (build 1.6.0_07-b06)\nJava HotSpot(TM) 64-Bit Server VM (build 10.0-b23, mixed mode)</p>\n\n<p>Here is the Java code that has been working for several years -</p>\n\n<pre><code>private void readSource(final InputSource in ) {\n    try {\n        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();\n        DocumentBuilder db = dbf.newDocumentBuilder();\n        Document doc = db.parse(in);\n        Element elt = doc.getDocumentElement();\n\n        this.readElement( elt );\n    } catch ( Exception ex ) {\n        ex.printStackTrace();\n        throw new ConfigurationException( \"Unable to parse configuration information\", ex );\n    }\n}\n</code></pre>\n\n<p>And here is the exception. </p>\n\n<pre><code>[Fatal Error] :-1:-1: Premature end of file.\norg.xml.sax.SAXParseException: Premature end of file.\n        at org.apache.xerces.parsers.DOMParser.parse(Unknown Source)\n        at org.apache.xerces.jaxp.DocumentBuilderImpl.parse(Unknown Source)\n        at com.circus.core.Configuration.readSource(Configuration.java:706)\n</code></pre>\n\n<p>I have already tried validating XML and found no errors there. Any idea where else can I look for possible problem? </p>\n\n<p>Any pointers would be highly appreciated!</p>\n\n<p>TIA,\n- Manish</p>\n"},{"tags":["java","vaadin14"],"owner":{"account_id":27847486,"reputation":1,"user_id":21262648,"display_name":"user123"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694081300,"creation_date":1694080446,"question_id":77058510,"body_markdown":"I am using vaadin 14 to develop a web page. I have used @PreserveOnRefresh, so that my ui won&#39;t change upon refresh. I am able to achieve it, but am losing the images. On first attempt I am able to load the image, but after refresh the images are lost. I have created the image via StreamResource. Can anybody please help me with this usecase? The following is my code snippet:\r\n```\r\n@Route(&quot;home&quot;)\r\n@PreserveOnRefresh\r\npublic class HomePage extends VerticalLayout {\r\n\r\n    public HomePage(HorizontalLayout base) {\r\n        Div logoContainer = new Div();\r\n        logoContainer.setSizeFull();\r\n        StreamResource streamResource =  new StreamResource(&quot;logo&quot;, () -&gt; {\r\n\t\t\t\r\n                        File imgrsc = new File(filepath-to-my-image);\r\n\t\t\tFileInputStream stream = null;\r\n\t\t\ttry {\r\n\t\t\t\tstream = new FileInputStream(imgrsc);\r\n\t\t\t} catch (FileNotFoundException e1) {\r\n\t\t\t\te1.printStackTrace();\r\n\t\t\t}\r\n\t\t\treturn stream;\r\n\t\t});\r\n\t\t\r\n\t\tImage image = new Image(streamResource, &quot;&quot;);\r\n\t\tlogoContainer.add(image);\r\n                base.add(logoContainer);\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\n\r\nI am expecting for my image to be loaded after refresh button/F5 is clicked","title":"@PreserveOnRefresh unable to load dynamic Images with StreamResource","body":"<p>I am using vaadin 14 to develop a web page. I have used @PreserveOnRefresh, so that my ui won't change upon refresh. I am able to achieve it, but am losing the images. On first attempt I am able to load the image, but after refresh the images are lost. I have created the image via StreamResource. Can anybody please help me with this usecase? The following is my code snippet:</p>\n<pre><code>@Route(&quot;home&quot;)\n@PreserveOnRefresh\npublic class HomePage extends VerticalLayout {\n\n    public HomePage(HorizontalLayout base) {\n        Div logoContainer = new Div();\n        logoContainer.setSizeFull();\n        StreamResource streamResource =  new StreamResource(&quot;logo&quot;, () -&gt; {\n            \n                        File imgrsc = new File(filepath-to-my-image);\n            FileInputStream stream = null;\n            try {\n                stream = new FileInputStream(imgrsc);\n            } catch (FileNotFoundException e1) {\n                e1.printStackTrace();\n            }\n            return stream;\n        });\n        \n        Image image = new Image(streamResource, &quot;&quot;);\n        logoContainer.add(image);\n                base.add(logoContainer);\n    }\n\n}\n</code></pre>\n<p>I am expecting for my image to be loaded after refresh button/F5 is clicked</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":3688497,"reputation":1472,"user_id":3071712,"accept_rate":52,"display_name":"Marko Taht"},"score":2,"creation_date":1657653335,"post_id":72956975,"comment_id":128860593,"body_markdown":"According to https://www.baeldung.com/spring-data-entitymanager you should use `@PersistenceContext\n    private EntityManager entityManager;`","body":"According to <a href=\"https://www.baeldung.com/spring-data-entitymanager\" rel=\"nofollow noreferrer\">baeldung.com/spring-data-entitymanager</a> you should use <code>@PersistenceContext     private EntityManager entityManager;</code>"},{"owner":{"account_id":2563377,"reputation":7174,"user_id":2224047,"display_name":"Nikolai  Shevchenko"},"score":0,"creation_date":1657776700,"post_id":72956975,"comment_id":128891821,"body_markdown":"Make sure that you&#39;ve added all relevant dependencies (hibernate or spring-orm or similar) to your application bundle","body":"Make sure that you&#39;ve added all relevant dependencies (hibernate or spring-orm or similar) to your application bundle"}],"answers":[{"tags":[],"owner":{"account_id":27112524,"reputation":21,"user_id":20657441,"display_name":"Marina Solovieva"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1671299214,"creation_date":1671299040,"answer_id":74836178,"question_id":72956975,"body_markdown":"From version 6.0 Hibernate uses jakarta.persistence rather than javax. Change the import and use the @PersistenceContext annotation","title":"Could not autowire. No beans of &#39;EntityManager&#39; type found","body":"<p>From version 6.0 Hibernate uses jakarta.persistence rather than javax. Change the import and use the @PersistenceContext annotation</p>\n"}],"owner":{"account_id":20853579,"reputation":338,"user_id":16436722,"display_name":"стасевич"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2785,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694081071,"creation_date":1657651199,"question_id":72956975,"body_markdown":"trying spring boot, in video said, that the bean for entityManager spring creating automaticly, and in video guy havnt problems.\r\nbut in my case i have an error `Could not autowire. No beans of &#39;EntityManager&#39; type found.` \r\n\r\n    import javax.persistence.EntityManager;\r\n     \r\n       @Repository\r\n        public class EmployeeDAOImpl implements EmployeeDAO {\r\n        \r\n            @Autowired\r\n            private EntityManager entityManager;//Could not autowire. No beans of &#39;EntityManager&#39; type found. \r\n        \r\n            @Override\r\n            public List&lt;Employee&gt; getAllEmployees() {\r\n                Session session = entityManager.unwrap(Session.class);\r\n                Query&lt;Employee&gt; query = session.createQuery(&quot;from Employee &quot;, Employee.class);\r\n                List&lt;Employee&gt; allEmployees = query.getResultList();\r\n                return allEmployees;\r\n            }\r\n        ","title":"Could not autowire. No beans of &#39;EntityManager&#39; type found","body":"<p>trying spring boot, in video said, that the bean for entityManager spring creating automaticly, and in video guy havnt problems.\nbut in my case i have an error <code>Could not autowire. No beans of 'EntityManager' type found.</code></p>\n<pre><code>import javax.persistence.EntityManager;\n \n   @Repository\n    public class EmployeeDAOImpl implements EmployeeDAO {\n    \n        @Autowired\n        private EntityManager entityManager;//Could not autowire. No beans of 'EntityManager' type found. \n    \n        @Override\n        public List&lt;Employee&gt; getAllEmployees() {\n            Session session = entityManager.unwrap(Session.class);\n            Query&lt;Employee&gt; query = session.createQuery(&quot;from Employee &quot;, Employee.class);\n            List&lt;Employee&gt; allEmployees = query.getResultList();\n            return allEmployees;\n        }\n    \n</code></pre>\n"},{"tags":["java","amazon-s3","spring-webflux"],"comments":[{"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"score":0,"creation_date":1691397079,"post_id":76849883,"comment_id":135480613,"body_markdown":"Maybe https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/transfer/s3/model/UploadDirectoryRequest.Builder.html#uploadFileRequestTransformer(java.util.function.Consumer) !?","body":"Maybe <a href=\"https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/transfer/s3/model/UploadDirectoryRequest.Builder.html#uploadFileRequestTransformer(java.util.function.Consumer)\" rel=\"nofollow noreferrer\">sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/&hellip;</a> !?"},{"owner":{"account_id":217408,"reputation":1303,"user_id":1723127,"accept_rate":68,"display_name":"aGO"},"score":0,"creation_date":1691401553,"post_id":76849883,"comment_id":135481511,"body_markdown":"Thank you @luk2302 for your suggestion, I will try and I let you know asap","body":"Thank you @luk2302 for your suggestion, I will try and I let you know asap"},{"owner":{"account_id":217408,"reputation":1303,"user_id":1723127,"accept_rate":68,"display_name":"aGO"},"score":0,"creation_date":1691486083,"post_id":76849883,"comment_id":135494753,"body_markdown":"@luk2302 I tried your solution and I think that this is the right way BUT I don&#39;t know how can I retrieve the file is going to be uploaded inside the transformer","body":"@luk2302 I tried your solution and I think that this is the right way BUT I don&#39;t know how can I retrieve the file is going to be uploaded inside the transformer"}],"answers":[{"tags":[],"owner":{"account_id":217408,"reputation":1303,"user_id":1723127,"accept_rate":68,"display_name":"aGO"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1694080887,"creation_date":1694080887,"answer_id":77058564,"question_id":76849883,"body_markdown":"I found the solution.\r\n\r\nAs suggested by @luk2302 the way is to implement the `uploadFileRequestTransformer`.\r\n\r\n    UploadDirectoryRequest request = UploadDirectoryRequest.builder()\r\n        .bucket(bucket)\r\n        .s3Prefix(prefix)\r\n        .source(filePath)\r\n        .uploadFileRequestTransformer(uploadFileRequestBuilder -&gt; {\r\n             UploadFileRequest uploadFileRequest = uploadFileRequestBuilder.build();\r\n\r\n             File file = uploadFileRequest.source().toFile();\r\n                        \r\n             String mimeType = &quot;application/json&quot;;\r\n             try {\r\n                 mimeType = Files.probeContentType(uploadFileRequest.source());\r\n\r\n                 if (mimeType == null) {\r\n                     if (file.getAbsolutePath().contains(&quot;bulkdata&quot;)) {\r\n                         mimeType = &quot;application/octet-stream&quot;;\r\n                     }\r\n                     if (file.getAbsolutePath().contains(&quot;.raw&quot;)) {\r\n                         mimeType = &quot;application/octet-stream&quot;;\r\n                     }\r\n                     if (file.getAbsolutePath().contains(&quot;frames&quot;)) {\r\n                         mimeType = &quot;multipart/related&quot;;\r\n                     }\r\n                     if (file.getAbsolutePath().contains(&quot;thumbnail&quot;)) {\r\n                         mimeType = &quot;image/jpeg&quot;;\r\n                     }\r\n                 }\r\n             } catch (Exception ex) {\r\n                 mimeType = &quot;application/octet-stream&quot;;\r\n             }\r\n\r\n             PutObjectRequest.Builder putObjectRequestBuilder = uploadFileRequest.putObjectRequest().toBuilder();\r\n             if (file.getName().endsWith(&quot;.gz&quot;)) {\r\n                 putObjectRequestBuilder.contentEncoding(&quot;gzip&quot;);\r\n\r\n                 mimeType = &quot;application/json&quot;;\r\n             }\r\n\r\n             putObjectRequestBuilder.contentType(mimeType);\r\n\r\n             uploadFileRequestBuilder.putObjectRequest(putObjectRequestBuilder.build());\r\n        }).build();","title":"Amazon S3 Transfer Manager v2.x and metadata","body":"<p>I found the solution.</p>\n<p>As suggested by @luk2302 the way is to implement the <code>uploadFileRequestTransformer</code>.</p>\n<pre><code>UploadDirectoryRequest request = UploadDirectoryRequest.builder()\n    .bucket(bucket)\n    .s3Prefix(prefix)\n    .source(filePath)\n    .uploadFileRequestTransformer(uploadFileRequestBuilder -&gt; {\n         UploadFileRequest uploadFileRequest = uploadFileRequestBuilder.build();\n\n         File file = uploadFileRequest.source().toFile();\n                    \n         String mimeType = &quot;application/json&quot;;\n         try {\n             mimeType = Files.probeContentType(uploadFileRequest.source());\n\n             if (mimeType == null) {\n                 if (file.getAbsolutePath().contains(&quot;bulkdata&quot;)) {\n                     mimeType = &quot;application/octet-stream&quot;;\n                 }\n                 if (file.getAbsolutePath().contains(&quot;.raw&quot;)) {\n                     mimeType = &quot;application/octet-stream&quot;;\n                 }\n                 if (file.getAbsolutePath().contains(&quot;frames&quot;)) {\n                     mimeType = &quot;multipart/related&quot;;\n                 }\n                 if (file.getAbsolutePath().contains(&quot;thumbnail&quot;)) {\n                     mimeType = &quot;image/jpeg&quot;;\n                 }\n             }\n         } catch (Exception ex) {\n             mimeType = &quot;application/octet-stream&quot;;\n         }\n\n         PutObjectRequest.Builder putObjectRequestBuilder = uploadFileRequest.putObjectRequest().toBuilder();\n         if (file.getName().endsWith(&quot;.gz&quot;)) {\n             putObjectRequestBuilder.contentEncoding(&quot;gzip&quot;);\n\n             mimeType = &quot;application/json&quot;;\n         }\n\n         putObjectRequestBuilder.contentType(mimeType);\n\n         uploadFileRequestBuilder.putObjectRequest(putObjectRequestBuilder.build());\n    }).build();\n</code></pre>\n"}],"owner":{"account_id":217408,"reputation":1303,"user_id":1723127,"accept_rate":68,"display_name":"aGO"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":139,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77058564,"answer_count":1,"score":0,"last_activity_date":1694080887,"creation_date":1691395957,"question_id":76849883,"body_markdown":"I would like to use the new version (2.x) of Amazon S3 Transfer Manager to upload a directory to a bucket. I can do it without problems except for metadata.\r\nI need to set some metadata (content-type and content-encoding) for each file.\r\nI can do it with the version 1.x (below an example) but not with the new version\r\n\r\n```\r\nMultipleFileUpload upload = tm.uploadDirectory(\r\n                                bucket,\r\n                                prefix,\r\n                                filePath.toFile(),\r\n                                true,\r\n                                (file, metadata) -&gt; {\r\n                          \r\n                                    String mimeType = &quot;application/json&quot;;\r\n                                    try {\r\n                                        mimeType = Files.probeContentType(Paths.get(file.toURI()));\r\n\r\n                                        if (mimeType == null) {\r\n                                            if (file.getAbsolutePath().contains(&quot;bulkdata&quot;)) {\r\n                                                mimeType = &quot;application/octet-stream&quot;;\r\n                                            }\r\n                                            if (file.getAbsolutePath().contains(&quot;.raw&quot;)) {\r\n                                                mimeType = &quot;application/octet-stream&quot;;\r\n                                            }\r\n                                            if (file.getAbsolutePath().contains(&quot;frames&quot;)) {\r\n                                                mimeType = &quot;multipart/related&quot;;\r\n                                            }\r\n                                            if (file.getAbsolutePath().contains(&quot;thumbnail&quot;)) {\r\n                                                mimeType = &quot;image/jpeg&quot;;\r\n                                            }\r\n                                        }\r\n                                    } catch (Exception ex) {\r\n                                        mimeType = &quot;application/octet-stream&quot;;\r\n                                    }\r\n\r\n                                    if (file.getName().endsWith(&quot;.gz&quot;)) {\r\n                                        metadata.setContentEncoding(&quot;gzip&quot;);\r\n                                        mimeType = &quot;application/json&quot;;\r\n                                    }\r\n\r\n                                    metadata.setContentType(mimeType);\r\n                                }\r\n                        );\r\n```\r\n\r\nDo you know a way to accomplish that?","title":"Amazon S3 Transfer Manager v2.x and metadata","body":"<p>I would like to use the new version (2.x) of Amazon S3 Transfer Manager to upload a directory to a bucket. I can do it without problems except for metadata.\nI need to set some metadata (content-type and content-encoding) for each file.\nI can do it with the version 1.x (below an example) but not with the new version</p>\n<pre><code>MultipleFileUpload upload = tm.uploadDirectory(\n                                bucket,\n                                prefix,\n                                filePath.toFile(),\n                                true,\n                                (file, metadata) -&gt; {\n                          \n                                    String mimeType = &quot;application/json&quot;;\n                                    try {\n                                        mimeType = Files.probeContentType(Paths.get(file.toURI()));\n\n                                        if (mimeType == null) {\n                                            if (file.getAbsolutePath().contains(&quot;bulkdata&quot;)) {\n                                                mimeType = &quot;application/octet-stream&quot;;\n                                            }\n                                            if (file.getAbsolutePath().contains(&quot;.raw&quot;)) {\n                                                mimeType = &quot;application/octet-stream&quot;;\n                                            }\n                                            if (file.getAbsolutePath().contains(&quot;frames&quot;)) {\n                                                mimeType = &quot;multipart/related&quot;;\n                                            }\n                                            if (file.getAbsolutePath().contains(&quot;thumbnail&quot;)) {\n                                                mimeType = &quot;image/jpeg&quot;;\n                                            }\n                                        }\n                                    } catch (Exception ex) {\n                                        mimeType = &quot;application/octet-stream&quot;;\n                                    }\n\n                                    if (file.getName().endsWith(&quot;.gz&quot;)) {\n                                        metadata.setContentEncoding(&quot;gzip&quot;);\n                                        mimeType = &quot;application/json&quot;;\n                                    }\n\n                                    metadata.setContentType(mimeType);\n                                }\n                        );\n</code></pre>\n<p>Do you know a way to accomplish that?</p>\n"},{"tags":["java","bigdecimal"],"answers":[{"tags":[],"owner":{"account_id":194308,"reputation":66745,"user_id":436560,"accept_rate":87,"display_name":"Lajos Arpad"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694080354,"creation_date":1694080354,"answer_id":77058496,"question_id":77058443,"body_markdown":"`a.compareTo(b)` is either `0` or something else. There is no third possibility where it is not `0` nor something else.\r\n\r\n`a.stripTrailingZeros().equals(b.stripTrailingZeros())` is either `true` or not `true`. There is no third possibility.\r\n\r\nSo, the answer is **yes**.","title":"BigDecimal stripTrailingZeros and equality","body":"<p><code>a.compareTo(b)</code> is either <code>0</code> or something else. There is no third possibility where it is not <code>0</code> nor something else.</p>\n<p><code>a.stripTrailingZeros().equals(b.stripTrailingZeros())</code> is either <code>true</code> or not <code>true</code>. There is no third possibility.</p>\n<p>So, the answer is <strong>yes</strong>.</p>\n"},{"tags":[],"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694080658,"creation_date":1694080658,"answer_id":77058537,"question_id":77058443,"body_markdown":"`BigDecimal.equals()` says\r\n\r\n&gt; Unlike compareTo, this method considers two BigDecimal objects equal only if they are equal in value and scale (thus 2.0 is not equal to 2.00 when compared by this method).\r\n\r\nSo while you might be able to get differing results with `equals()` using `compareTo()` won&#39;t be confused by the (possible) scale changes done with `stripTrailingZeros()`:\r\n\r\n&gt; For example, stripping the trailing zeros from the BigDecimal value 600.0, which has [BigInteger, scale] components equals to [6000, 1], yields 6E2 with [BigInteger, scale] components equals to [6, -2]. If this BigDecimal is numerically equal to zero, then BigDecimal.ZERO is returned.\r\n\r\nSince BigDecimal also doesn&#39;t support `NaN` or infinities, there&#39;s no tricky edge cases like `NaN != NaN` that would cause issues (besides the standard risks of floating point usage).","title":"BigDecimal stripTrailingZeros and equality","body":"<p><code>BigDecimal.equals()</code> says</p>\n<blockquote>\n<p>Unlike compareTo, this method considers two BigDecimal objects equal only if they are equal in value and scale (thus 2.0 is not equal to 2.00 when compared by this method).</p>\n</blockquote>\n<p>So while you might be able to get differing results with <code>equals()</code> using <code>compareTo()</code> won't be confused by the (possible) scale changes done with <code>stripTrailingZeros()</code>:</p>\n<blockquote>\n<p>For example, stripping the trailing zeros from the BigDecimal value 600.0, which has [BigInteger, scale] components equals to [6000, 1], yields 6E2 with [BigInteger, scale] components equals to [6, -2]. If this BigDecimal is numerically equal to zero, then BigDecimal.ZERO is returned.</p>\n</blockquote>\n<p>Since BigDecimal also doesn't support <code>NaN</code> or infinities, there's no tricky edge cases like <code>NaN != NaN</code> that would cause issues (besides the standard risks of floating point usage).</p>\n"},{"tags":[],"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1694080852,"creation_date":1694080852,"answer_id":77058562,"question_id":77058443,"body_markdown":"Note that `stripTrailingZeros` can throw an `ArithmeticException` if the resulting `scale` overflows. For example;\r\n\r\n```\r\nnew BigDecimal(\r\n        new BigInteger(&quot;70&quot;),\r\n        Integer.MIN_VALUE\r\n).stripTrailingZeros(); // tries to set the scale to Integer.MIN_VALUE - 1 but can&#39;t\r\n```\r\n\r\nOther than such cases, the assertion should be true, because there is only one unique `BigDecimal` representation of each number, that has no trailing zeroes.","title":"BigDecimal stripTrailingZeros and equality","body":"<p>Note that <code>stripTrailingZeros</code> can throw an <code>ArithmeticException</code> if the resulting <code>scale</code> overflows. For example;</p>\n<pre><code>new BigDecimal(\n        new BigInteger(&quot;70&quot;),\n        Integer.MIN_VALUE\n).stripTrailingZeros(); // tries to set the scale to Integer.MIN_VALUE - 1 but can't\n</code></pre>\n<p>Other than such cases, the assertion should be true, because there is only one unique <code>BigDecimal</code> representation of each number, that has no trailing zeroes.</p>\n"}],"owner":{"account_id":319988,"reputation":10980,"user_id":638028,"accept_rate":91,"display_name":"Klitos Kyriacou"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":77058562,"answer_count":3,"score":1,"last_activity_date":1694080852,"creation_date":1694079913,"question_id":77058443,"body_markdown":"Given\r\n\r\n    BigDecimal a = ...;\r\n    BigDecimal b = ...;\r\n\r\nDo the following hold for _all possible values_ of `a` and `b`?\r\n\r\n    if (a.compareTo(b) == 0)\r\n        assert a.stripTrailingZeros().equals(b.stripTrailingZeros())\r\n    if (a.compareTo(b) != 0)\r\n        assert !(a.stripTrailingZeros().equals(b.stripTrailingZeros()))\r\n\r\n    if (a.stripTrailingZeros().equals(b.stripTrailingZeros()))\r\n        assert(a.compareTo(b) == 0)\r\n    if (!(a.stripTrailingZeros().equals(b.stripTrailingZeros())))\r\n        assert(a.compareTo(b) != 0)\r\n\r\nOr is there some edge case where the above assertions are not all true?","title":"BigDecimal stripTrailingZeros and equality","body":"<p>Given</p>\n<pre><code>BigDecimal a = ...;\nBigDecimal b = ...;\n</code></pre>\n<p>Do the following hold for <em>all possible values</em> of <code>a</code> and <code>b</code>?</p>\n<pre><code>if (a.compareTo(b) == 0)\n    assert a.stripTrailingZeros().equals(b.stripTrailingZeros())\nif (a.compareTo(b) != 0)\n    assert !(a.stripTrailingZeros().equals(b.stripTrailingZeros()))\n\nif (a.stripTrailingZeros().equals(b.stripTrailingZeros()))\n    assert(a.compareTo(b) == 0)\nif (!(a.stripTrailingZeros().equals(b.stripTrailingZeros())))\n    assert(a.compareTo(b) != 0)\n</code></pre>\n<p>Or is there some edge case where the above assertions are not all true?</p>\n"},{"tags":["java","spring","cassandra"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1694078323,"post_id":77058181,"comment_id":135844918,"body_markdown":"_&quot;Could not reach any contact point, make sure you&#39;ve provided valid addresses (showing first 1 nodes, use getAllErrors() for more): Node(endPoint=cassandra/:9042, hostId=null, hashCode=65654666)&quot;_","body":"<i>&quot;Could not reach any contact point, make sure you&#39;ve provided valid addresses (showing first 1 nodes, use getAllErrors() for more): Node(endPoint=cassandra/:9042, hostId=null, hashCode=65654666)&quot;</i>"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1694078384,"post_id":77058181,"comment_id":135844937,"body_markdown":"There is no `spring-boot-starter-data-cassandra` 4.1.3, even if it would you shouldn&#39;t include versions for Spring Boot managed starters.","body":"There is no <code>spring-boot-starter-data-cassandra</code> 4.1.3, even if it would you shouldn&#39;t include versions for Spring Boot managed starters."},{"owner":{"account_id":13892465,"reputation":13,"user_id":10948905,"display_name":"mpsimham"},"score":0,"creation_date":1694078760,"post_id":77058181,"comment_id":135845014,"body_markdown":"Connected to cassandra at 127.0.0.1:9042\n[cqlsh 6.1.0 | Cassandra 4.1.3 | CQL spec 3.4.6 | Native protocol v5]\nUse HELP for help.\ncassandra@cqlsh&gt;\ncassandra@cqlsh&gt; desc keyspaces;\n\ncassandra is running fine","body":"Connected to cassandra at 127.0.0.1:9042 [cqlsh 6.1.0 | Cassandra 4.1.3 | CQL spec 3.4.6 | Native protocol v5] Use HELP for help. cassandra@cqlsh&gt; cassandra@cqlsh&gt; desc keyspaces;  cassandra is running fine"},{"owner":{"account_id":13892465,"reputation":13,"user_id":10948905,"display_name":"mpsimham"},"score":0,"creation_date":1694079207,"post_id":77058181,"comment_id":135845131,"body_markdown":"Its a typo spring-boot-data-cassandra is 3.1.1 and spring-data-cassandra-parent is 4.1.3","body":"Its a typo spring-boot-data-cassandra is 3.1.1 and spring-data-cassandra-parent is 4.1.3"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1694088009,"post_id":77058181,"comment_id":135846803,"body_markdown":"Don&#39;t mess around with versions, the version for `spring-boot-starter-data-cassandra` should be managed by your `spring-boot-starter-parent` and don&#39;t mix versions from different spring boot versions as that is trouble waiting to happen. ALso don&#39;t just change a parent version or dependency version as that will cascade into all sorts of issues.","body":"Don&#39;t mess around with versions, the version for <code>spring-boot-starter-data-cassandra</code> should be managed by your <code>spring-boot-starter-parent</code> and don&#39;t mix versions from different spring boot versions as that is trouble waiting to happen. ALso don&#39;t just change a parent version or dependency version as that will cascade into all sorts of issues."}],"answers":[{"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1694088044,"post_id":77058552,"comment_id":135846818,"body_markdown":"He is using Spring boot 3.1.1, when using starters don&#39;t mix modules from different spring boot versions as that will lead to all sorts of vague issues.","body":"He is using Spring boot 3.1.1, when using starters don&#39;t mix modules from different spring boot versions as that will lead to all sorts of vague issues."},{"owner":{"account_id":13892465,"reputation":13,"user_id":10948905,"display_name":"mpsimham"},"score":0,"creation_date":1694096652,"post_id":77058552,"comment_id":135848914,"body_markdown":"ssh cassandra@10.42.xxx.xxx\nssh: connect to host 10.42.xxx.xxx port 22: Connection refused     and host is not Test Cluster in my above comment in question its cassandra only","body":"ssh cassandra@10.42.xxx.xxx ssh: connect to host 10.42.xxx.xxx port 22: Connection refused     and host is not Test Cluster in my above comment in question its cassandra only"},{"owner":{"account_id":13892465,"reputation":13,"user_id":10948905,"display_name":"mpsimham"},"score":0,"creation_date":1694096719,"post_id":77058552,"comment_id":135848932,"body_markdown":"And version 4.1.3 is getting write timedout for 3-4 consecutive writes","body":"And version 4.1.3 is getting write timedout for 3-4 consecutive writes"}],"tags":[],"owner":{"account_id":4819783,"reputation":1505,"user_id":3890779,"display_name":"clunven"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694080741,"creation_date":1694080741,"answer_id":77058552,"question_id":77058181,"body_markdown":"I see no _blocking_ error with the code you provided. But as mentionned above this is the only thing you need in your POM.\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n &lt;artifactId&gt;spring-boot-starter-data-cassandra&lt;/artifactId&gt;\r\n &lt;version&gt;3.1.3&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nThe error message tells us the host `cassandra` is not resolved by your java \r\ncode.\r\n\r\n```\r\nCould not reach any contact point, make sure \r\nyou&#39;ve provided valid addresses (showing first 1 nodes, use getAllErrors() for more)\r\n```\r\n\r\nIn a comment, you provided an output from `cqlsh` telling us the DB is started and working but the message give you the **name of your cluster, and not the host of the cassandra node.**. Check what the cqlsh output look likes with a docker image..obviously ` Test Cluster` is not the host.\r\n\r\n```\r\nConnected to Test Cluster at 127.0.0.1:9042\r\n[cqlsh 6.0.0 | Cassandra 4.0.7-9cb79586cc78 | CQL spec 3.4.5 | Native protocol v5]\r\nUse HELP for help.\r\ncqlsh&gt; \r\n```\r\n\r\n**Couple of ideas:**\r\n\r\n- Connect ssh to the cassandra node and show the IP with `ifconfig`\r\n- Change &quot;cassandra&quot; by correct IP of add an entry to `/etc/config`\r\n\r\n\r\n\r\n\r\n","title":"Unable to connect to cassandra 4.1.3 version from springoot 3.1.1 version","body":"<p>I see no <em>blocking</em> error with the code you provided. But as mentionned above this is the only thing you need in your POM.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n &lt;artifactId&gt;spring-boot-starter-data-cassandra&lt;/artifactId&gt;\n &lt;version&gt;3.1.3&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>The error message tells us the host <code>cassandra</code> is not resolved by your java\ncode.</p>\n<pre><code>Could not reach any contact point, make sure \nyou've provided valid addresses (showing first 1 nodes, use getAllErrors() for more)\n</code></pre>\n<p>In a comment, you provided an output from <code>cqlsh</code> telling us the DB is started and working but the message give you the <strong>name of your cluster, and not the host of the cassandra node.</strong>. Check what the cqlsh output look likes with a docker image..obviously <code> Test Cluster</code> is not the host.</p>\n<pre><code>Connected to Test Cluster at 127.0.0.1:9042\n[cqlsh 6.0.0 | Cassandra 4.0.7-9cb79586cc78 | CQL spec 3.4.5 | Native protocol v5]\nUse HELP for help.\ncqlsh&gt; \n</code></pre>\n<p><strong>Couple of ideas:</strong></p>\n<ul>\n<li>Connect ssh to the cassandra node and show the IP with <code>ifconfig</code></li>\n<li>Change &quot;cassandra&quot; by correct IP of add an entry to <code>/etc/config</code></li>\n</ul>\n"}],"owner":{"account_id":13892465,"reputation":13,"user_id":10948905,"display_name":"mpsimham"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":124,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694080741,"creation_date":1694077976,"question_id":77058181,"body_markdown":"```none\r\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;cassandraSessionFactory&#39; defined in class path resource [com/test/config/CassandraConfig.class]: Unsatisfied dependency expressed through method &#39;cassandraSessionFactory&#39; parameter 0: Error creating bean with name &#39;cassandraSession&#39; defined in class path resource [com/test/config/CassandraConfig.class]: Could not reach any contact point, make sure you&#39;ve provided valid addresses (showing first 1 nodes, use getAllErrors() for more): Node(endPoint=cassandra/&lt;unresolved&gt;:9042, hostId=null, hashCode=65654666): [com.datastax.oss.driver.api.core.connection.ConnectionInitException: [s0|control|connecting...] Protocol initialization request, step 1 (OPTIONS): failed to send request (io.netty.channel.StacklessClosedChannelException)]\r\n        at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800) ~[spring-beans-6.0.10.jar!/:6.0.10]\r\n        at \r\n```\r\n\r\n```java\r\n@Bean\r\npublic CqlSessionFactoryBean cassandraSession() {\r\n    CqlSessionFactoryBean session = new CqlSessionFactoryBean();\r\n    session.setContactPoints(&quot;cassandra&quot;);\r\n    session.setKeyspaceCreations(getKeyspaceCreations());\r\n    session.setKeyspaceName(keySpace);\r\n    session.setPort(port);\r\n    session.setUsername(userName);\r\n    session.setPassword(password);\r\n    session.setLocalDatacenter(datacenter);\r\n    session.setSessionBuilderConfigurer(sessionBuilder -&gt; sessionBuilder\r\n            .withConfigLoader(DriverConfigLoader\r\n                    .programmaticBuilder()\r\n                    .withString(DefaultDriverOption.REQUEST_TIMEOUT, &quot;10 seconds&quot;)\r\n                    .build()));\r\n    return session;\r\n}\r\n```\r\n```xml\r\n&lt;parent&gt;\r\n\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t&lt;version&gt;3.1.1&lt;/version&gt;\r\n\t&lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\r\n&lt;/parent&gt;\r\n```\r\n```xml\r\n&lt;dependency&gt;\r\n&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n&lt;artifactId&gt;spring-boot-starter-data-cassandra&lt;/artifactId&gt;\r\n&lt;version&gt;4.1.3&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n","title":"Unable to connect to cassandra 4.1.3 version from springoot 3.1.1 version","body":"<pre class=\"lang-none prettyprint-override\"><code>Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'cassandraSessionFactory' defined in class path resource [com/test/config/CassandraConfig.class]: Unsatisfied dependency expressed through method 'cassandraSessionFactory' parameter 0: Error creating bean with name 'cassandraSession' defined in class path resource [com/test/config/CassandraConfig.class]: Could not reach any contact point, make sure you've provided valid addresses (showing first 1 nodes, use getAllErrors() for more): Node(endPoint=cassandra/&lt;unresolved&gt;:9042, hostId=null, hashCode=65654666): [com.datastax.oss.driver.api.core.connection.ConnectionInitException: [s0|control|connecting...] Protocol initialization request, step 1 (OPTIONS): failed to send request (io.netty.channel.StacklessClosedChannelException)]\n        at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800) ~[spring-beans-6.0.10.jar!/:6.0.10]\n        at \n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic CqlSessionFactoryBean cassandraSession() {\n    CqlSessionFactoryBean session = new CqlSessionFactoryBean();\n    session.setContactPoints(&quot;cassandra&quot;);\n    session.setKeyspaceCreations(getKeyspaceCreations());\n    session.setKeyspaceName(keySpace);\n    session.setPort(port);\n    session.setUsername(userName);\n    session.setPassword(password);\n    session.setLocalDatacenter(datacenter);\n    session.setSessionBuilderConfigurer(sessionBuilder -&gt; sessionBuilder\n            .withConfigLoader(DriverConfigLoader\n                    .programmaticBuilder()\n                    .withString(DefaultDriverOption.REQUEST_TIMEOUT, &quot;10 seconds&quot;)\n                    .build()));\n    return session;\n}\n</code></pre>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;3.1.1&lt;/version&gt;\n    &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n</code></pre>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n&lt;artifactId&gt;spring-boot-starter-data-cassandra&lt;/artifactId&gt;\n&lt;version&gt;4.1.3&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","linux","processbuilder","io-redirection"],"comments":[{"owner":{"account_id":14709065,"reputation":9457,"user_id":10622916,"display_name":"Bodo"},"score":3,"creation_date":1694017747,"post_id":77053644,"comment_id":135837045,"body_markdown":"`&lt;&lt; END` is shell syntax. The line `cat &lt;&lt; END &gt; output` would be followed by some text followed by a line `END` in a shell script or as input (`stdin`) for a shell. Where do you want the input to come from when running a process from your Java program?","body":"<code>&lt;&lt; END</code> is shell syntax. The line <code>cat &lt;&lt; END &gt; output</code> would be followed by some text followed by a line <code>END</code> in a shell script or as input (<code>stdin</code>) for a shell. Where do you want the input to come from when running a process from your Java program?"},{"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1694025786,"post_id":77053644,"comment_id":135838546,"body_markdown":"Does this answer your question? [Exit(1) when running exec on java](https://stackoverflow.com/questions/68083327/exit1-when-running-exec-on-java)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/68083327/exit1-when-running-exec-on-java\">Exit(1) when running exec on java</a>"}],"answers":[{"tags":[],"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694025588,"creation_date":1694025273,"answer_id":77054468,"question_id":77053644,"body_markdown":"The command `cat &lt;&lt; END &gt; output` is a shell command so you need to run it via shell as \r\n\r\n     List &lt;String&gt; params = List.of(&quot;/bin/sh&quot;, &quot;-c&quot;, &quot;cat &lt;&lt; END &gt; output&quot;)","title":"How to have input-redirection with Javas ProcessBuilder?","body":"<p>The command <code>cat &lt;&lt; END &gt; output</code> is a shell command so you need to run it via shell as</p>\n<pre><code> List &lt;String&gt; params = List.of(&quot;/bin/sh&quot;, &quot;-c&quot;, &quot;cat &lt;&lt; END &gt; output&quot;)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11373023,"reputation":4495,"user_id":8338100,"display_name":"jurez"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694025552,"creation_date":1694025552,"answer_id":77054491,"question_id":77053644,"body_markdown":"You need to call `os.close()` to let the process know that no more data is coming.","title":"How to have input-redirection with Javas ProcessBuilder?","body":"<p>You need to call <code>os.close()</code> to let the process know that no more data is coming.</p>\n"},{"tags":[],"owner":{"account_id":117317,"reputation":11245,"user_id":307297,"accept_rate":62,"display_name":"chris01"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694080581,"creation_date":1694080581,"answer_id":77058528,"question_id":77053644,"body_markdown":"I solved it by skipping the \r\n\r\n    &lt;&lt;END\r\n\r\nbut then opened an OutputStream after starting the process.\r\nOver that I put the files content into the process.\r\nFlushing and closing of the stream is important.\r\n\r\n    ProcessBuilder pb = new ProcessBuilder (params);\r\n\tProcess p = pb.start ();\r\n\t\t\t\t\t\r\n\tOutputStream os = p.getOutputStream ();\r\n\tos.write (content_string);\t\r\n\tos.flush ();\r\n\tos.close ();","title":"How to have input-redirection with Javas ProcessBuilder?","body":"<p>I solved it by skipping the</p>\n<pre><code>&lt;&lt;END\n</code></pre>\n<p>but then opened an OutputStream after starting the process.\nOver that I put the files content into the process.\nFlushing and closing of the stream is important.</p>\n<pre><code>ProcessBuilder pb = new ProcessBuilder (params);\nProcess p = pb.start ();\n                \nOutputStream os = p.getOutputStream ();\nos.write (content_string);  \nos.flush ();\nos.close ();\n</code></pre>\n"}],"owner":{"account_id":117317,"reputation":11245,"user_id":307297,"accept_rate":62,"display_name":"chris01"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1694080581,"creation_date":1694016283,"question_id":77053644,"body_markdown":"How can I apply input redirection to Javas ProcessBuilder?\r\n\r\nE.g. use cat of Linux\r\n\r\n    cat x.txt &gt; output.txt\r\n\r\nMy code\r\n\r\n    // read x.txt with cat and redirect the output to output.txt\r\n    public static void main (String args []) throws Exception\r\n\t{\r\n\t\tList &lt;String&gt; params = new ArrayList &lt;String&gt; ();\r\n\t\tparams.add (&quot;cat&quot;);\r\n\t\tparams.add (&quot;x.txt&quot;);\t\t\r\n\t\tProcessBuilder pb = new ProcessBuilder (params);\r\n\t\tpb.redirectOutput (new File (&quot;output.txt&quot;));\r\n\t\tProcess p = pb.start ();\r\n\t\tp.waitFor (3, TimeUnit.SECONDS);\r\n        System.out.println (&quot;exit=&quot;+p.exitValue());\r\n\t}\r\n    \r\nThat works fine!\r\nBut how to change from file to input-redirection?\r\n\r\n    cat &lt;&lt; END &gt; output\r\n\r\nI tried this - but does not work.\r\n\r\n    public static void main (String args []) throws Exception\r\n\t{\r\n\t\tList &lt;String&gt; params = new ArrayList &lt;String&gt; ();\r\n\t\tparams.add (&quot;cat&quot;);\r\n\t\tparams.add (&quot;/dev/stdin&quot;);\r\n\t\tparams.add (&quot;&lt;&lt;&quot;;\r\n        params.add (&quot;END&quot;);\r\n\t\t\r\n\t\tProcessBuilder pb = new ProcessBuilder (params);\r\n\t\tpb.redirectOutput (new File (&quot;output.txt&quot;));\r\n\t\tProcess p = pb.start ();\r\n\t\tOutputStream os = p.getOutputStream ();\r\n\t\tos.write (&quot;\\nblabla\\nEND\\n&quot;.getBytes ());\r\n\t\tp.waitFor (3, TimeUnit.SECONDS);\r\n\t\tSystem.out.println (&quot;exit=&quot;+p.exitValue());\r\n\t}\r\n\r\nNo matter what I tried it returned with 1 (instead of 0 for success) or did not finish.\r\n","title":"How to have input-redirection with Javas ProcessBuilder?","body":"<p>How can I apply input redirection to Javas ProcessBuilder?</p>\n<p>E.g. use cat of Linux</p>\n<pre><code>cat x.txt &gt; output.txt\n</code></pre>\n<p>My code</p>\n<pre><code>// read x.txt with cat and redirect the output to output.txt\npublic static void main (String args []) throws Exception\n{\n    List &lt;String&gt; params = new ArrayList &lt;String&gt; ();\n    params.add (&quot;cat&quot;);\n    params.add (&quot;x.txt&quot;);       \n    ProcessBuilder pb = new ProcessBuilder (params);\n    pb.redirectOutput (new File (&quot;output.txt&quot;));\n    Process p = pb.start ();\n    p.waitFor (3, TimeUnit.SECONDS);\n    System.out.println (&quot;exit=&quot;+p.exitValue());\n}\n</code></pre>\n<p>That works fine!\nBut how to change from file to input-redirection?</p>\n<pre><code>cat &lt;&lt; END &gt; output\n</code></pre>\n<p>I tried this - but does not work.</p>\n<pre><code>public static void main (String args []) throws Exception\n{\n    List &lt;String&gt; params = new ArrayList &lt;String&gt; ();\n    params.add (&quot;cat&quot;);\n    params.add (&quot;/dev/stdin&quot;);\n    params.add (&quot;&lt;&lt;&quot;;\n    params.add (&quot;END&quot;);\n    \n    ProcessBuilder pb = new ProcessBuilder (params);\n    pb.redirectOutput (new File (&quot;output.txt&quot;));\n    Process p = pb.start ();\n    OutputStream os = p.getOutputStream ();\n    os.write (&quot;\\nblabla\\nEND\\n&quot;.getBytes ());\n    p.waitFor (3, TimeUnit.SECONDS);\n    System.out.println (&quot;exit=&quot;+p.exitValue());\n}\n</code></pre>\n<p>No matter what I tried it returned with 1 (instead of 0 for success) or did not finish.</p>\n"},{"tags":["java","opencv","java-17","unsatisfiedlinkerror"],"answers":[{"comments":[{"owner":{"account_id":90597,"reputation":8360,"user_id":249327,"accept_rate":80,"display_name":"nickdos"},"score":0,"creation_date":1691198779,"post_id":76833960,"comment_id":135464065,"body_markdown":"Thanks - `sudo mount -o remount,exec /tmp` fixed it.","body":"Thanks - <code>sudo mount -o remount,exec &#47;tmp</code> fixed it."}],"tags":[],"owner":{"account_id":24029930,"reputation":88,"user_id":18011018,"display_name":"jaragone"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694080529,"creation_date":1691135394,"answer_id":76833960,"question_id":76833835,"body_markdown":"The error message failed to map segment from shared object often indicates an issue with memory mapping of shared libraries in Linux.\r\n\r\nOne of the likely causes of this issue could be that the file system which /tmp directory is located on is mounted with noexec (which means it doesn&#39;t allow execution of binaries) or possibly nosuid or nodev option. Some environments have this as a security measure. In such case, the JVM may not be able to execute the native libraries extracted from the JAR to the /tmp directory.\r\n\r\nYou can verify if the /tmp directory is mounted with noexec by running the command mount in your Ubuntu VM and inspecting its output. If it&#39;s indeed the case, there are a couple of solutions:\r\n\r\nRemount the /tmp directory without the noexec option:\r\nThis is performed using the command:\r\n\r\n    sudo mount -o remount,exec /tmp\r\n\r\nNote that it could decrease the security of your system.\r\n","title":"OpenCV UnsatisfiedLinkError when jar is run on x86-64 Ubuntu 22.04 VM","body":"<p>The error message failed to map segment from shared object often indicates an issue with memory mapping of shared libraries in Linux.</p>\n<p>One of the likely causes of this issue could be that the file system which /tmp directory is located on is mounted with noexec (which means it doesn't allow execution of binaries) or possibly nosuid or nodev option. Some environments have this as a security measure. In such case, the JVM may not be able to execute the native libraries extracted from the JAR to the /tmp directory.</p>\n<p>You can verify if the /tmp directory is mounted with noexec by running the command mount in your Ubuntu VM and inspecting its output. If it's indeed the case, there are a couple of solutions:</p>\n<p>Remount the /tmp directory without the noexec option:\nThis is performed using the command:</p>\n<pre><code>sudo mount -o remount,exec /tmp\n</code></pre>\n<p>Note that it could decrease the security of your system.</p>\n"}],"owner":{"account_id":90597,"reputation":8360,"user_id":249327,"accept_rate":80,"display_name":"nickdos"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":130,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76833960,"answer_count":1,"score":0,"last_activity_date":1694080529,"creation_date":1691134363,"question_id":76833835,"body_markdown":"I&#39;m using [`org.openpnp:opencv:4.7.0-0`][1] in a Java maven project (Java version 17.0.6+10-LTS) and I&#39;m loading the library as recommended for Java &gt; 12 via `OpenCV.loadLocally();`. The project builds and **runs** perfectly on my M2 Mac. \r\n\r\nOn our DEV server that is an Ubuntu 22.04 x86-64 VM (with full JDK Java 17.0.6+10-Ubuntu-0ubuntu122.04), when I either run the jar built on my Mac or do a full build from sources on that machine, the jar produces the same error, when this code is executed:\r\n\r\n```\r\njava.lang.AssertionError: java.lang.UnsatisfiedLinkError: \r\n/tmp/opencv_openpnp12784852236417917500/nu/pattern/opencv/linux/x86_64/libopencv_java470.so: failed to map segment from shared object\r\n\r\n```\r\n\r\nAm I missing some step to run this on x86 Linux or is it just a bug in OpenPnP&#39;s OpenCV fork?\r\n\r\nPS I&#39;ve raised [an issue][2] in their issue tracker but responses there are slow or non-existent.\r\n\r\n\r\n  [1]: https://github.com/openpnp/opencv\r\n  [2]: https://github.com/openpnp/opencv/issues/98","title":"OpenCV UnsatisfiedLinkError when jar is run on x86-64 Ubuntu 22.04 VM","body":"<p>I'm using <a href=\"https://github.com/openpnp/opencv\" rel=\"nofollow noreferrer\"><code>org.openpnp:opencv:4.7.0-0</code></a> in a Java maven project (Java version 17.0.6+10-LTS) and I'm loading the library as recommended for Java &gt; 12 via <code>OpenCV.loadLocally();</code>. The project builds and <strong>runs</strong> perfectly on my M2 Mac.</p>\n<p>On our DEV server that is an Ubuntu 22.04 x86-64 VM (with full JDK Java 17.0.6+10-Ubuntu-0ubuntu122.04), when I either run the jar built on my Mac or do a full build from sources on that machine, the jar produces the same error, when this code is executed:</p>\n<pre><code>java.lang.AssertionError: java.lang.UnsatisfiedLinkError: \n/tmp/opencv_openpnp12784852236417917500/nu/pattern/opencv/linux/x86_64/libopencv_java470.so: failed to map segment from shared object\n\n</code></pre>\n<p>Am I missing some step to run this on x86 Linux or is it just a bug in OpenPnP's OpenCV fork?</p>\n<p>PS I've raised <a href=\"https://github.com/openpnp/opencv/issues/98\" rel=\"nofollow noreferrer\">an issue</a> in their issue tracker but responses there are slow or non-existent.</p>\n"},{"tags":["java","amazon-s3"],"answers":[{"tags":[],"owner":{"account_id":217408,"reputation":1303,"user_id":1723127,"accept_rate":68,"display_name":"aGO"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1694080389,"creation_date":1694080389,"answer_id":77058502,"question_id":76861012,"body_markdown":"I found the solution.\r\n\r\nInside the `uploadFileRequestTransformer` I can retrieve the file in this way\r\n\r\n    UploadFileRequest uploadFileRequest = uploadFileRequestBuilder.build();\r\n\r\n    File file = uploadFileRequest.source().toFile();","title":"Retrieve file path during S3TransferManager.uploadDirectory","body":"<p>I found the solution.</p>\n<p>Inside the <code>uploadFileRequestTransformer</code> I can retrieve the file in this way</p>\n<pre><code>UploadFileRequest uploadFileRequest = uploadFileRequestBuilder.build();\n\nFile file = uploadFileRequest.source().toFile();\n</code></pre>\n"}],"owner":{"account_id":217408,"reputation":1303,"user_id":1723127,"accept_rate":68,"display_name":"aGO"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77058502,"answer_count":1,"score":0,"last_activity_date":1694080389,"creation_date":1691508321,"question_id":76861012,"body_markdown":"I want to upload a directory with the new version of S3TransferManager v2 (https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/transfer-manager.html).\r\n\r\nEverything works well except for the content type: I need to set the file content type according to the file name. For this reason, I thought to use the\r\n\r\n    UploadDirectoryRequest.Builder uploadFileRequestTransformer(Consumer&lt;UploadFileRequest.Builder&gt; uploadFileRequestTransformer)\r\n\r\nBut I don&#39;t know how can I retrieve the file path of the file that is going to be uploaded\r\n\r\nDo you have any idea?","title":"Retrieve file path during S3TransferManager.uploadDirectory","body":"<p>I want to upload a directory with the new version of S3TransferManager v2 (<a href=\"https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/transfer-manager.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/transfer-manager.html</a>).</p>\n<p>Everything works well except for the content type: I need to set the file content type according to the file name. For this reason, I thought to use the</p>\n<pre><code>UploadDirectoryRequest.Builder uploadFileRequestTransformer(Consumer&lt;UploadFileRequest.Builder&gt; uploadFileRequestTransformer)\n</code></pre>\n<p>But I don't know how can I retrieve the file path of the file that is going to be uploaded</p>\n<p>Do you have any idea?</p>\n"},{"tags":["java","angular","docker","rabbitmq"],"owner":{"account_id":201350,"reputation":2144,"user_id":447738,"accept_rate":57,"display_name":"cksrc"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694080330,"creation_date":1694080330,"question_id":77058492,"body_markdown":"I have a rabbitmq Docker with the stomp plugin enabled.\r\nWhenever I try to establish a connection to the docker I receive the following error:\r\n`STOMP connection 172.19.0.1:54578 -&gt; 172.19.0.2:61613 terminated with reason {shutdown,                                                                             login_timeout}, closing it.\r\n`\r\n\r\nThe rabbitmq config is set as below:\r\n\r\n    loopback_users = none\r\n    listeners.tcp.default = 5672\r\n    default_pass = guest\r\n    default_user = guest\r\n    hipe_compile = false\r\n    management.listener.port = 15672\r\n    management.listener.ssl = false\r\n    stomp.listeners.tcp.1 = 61613\r\n    stomp.default_user = guest\r\n    stomp.default_pass = guest\r\n\r\nThe front end is set up with RxStomp as follows:\r\n\r\n    import { RxStompConfig } from &#39;@stomp/rx-stomp&#39;;\r\n\r\n    export const myRxStompConfig: RxStompConfig = {\r\n        // Which server?\r\n        brokerURL: &#39;ws://localhost:61613/topic/&#39;,\r\n\r\n        // Headers\r\n        // Typical keys: login, passcode, host\r\n        connectHeaders: {\r\n           login: &#39;guest&#39;,\r\n           passcode: &#39;guest&#39;,\r\n        },\r\n    }\r\n\r\nBackend\r\n\r\n    @Configuration\r\n    @EnableWebSocketMessageBroker\r\n    public class WebSocketMessageBrokerConfig implements WebSocketMessageBrokerConfigurer \r\n    {\r\n\r\n        @Override\r\n        public void configureMessageBroker(MessageBrokerRegistry config){\r\n            config.enableSimpleBroker(&quot;/topic/&quot;, &quot;/queue/&quot;);\r\n            config.setApplicationDestinationPrefixes(&quot;/app&quot;);\r\n        }\r\n    }","title":"Rabbitmq with STOMP refuses connection from browser","body":"<p>I have a rabbitmq Docker with the stomp plugin enabled.\nWhenever I try to establish a connection to the docker I receive the following error:\n<code>STOMP connection 172.19.0.1:54578 -&gt; 172.19.0.2:61613 terminated with reason {shutdown,                                                                             login_timeout}, closing it. </code></p>\n<p>The rabbitmq config is set as below:</p>\n<pre><code>loopback_users = none\nlisteners.tcp.default = 5672\ndefault_pass = guest\ndefault_user = guest\nhipe_compile = false\nmanagement.listener.port = 15672\nmanagement.listener.ssl = false\nstomp.listeners.tcp.1 = 61613\nstomp.default_user = guest\nstomp.default_pass = guest\n</code></pre>\n<p>The front end is set up with RxStomp as follows:</p>\n<pre><code>import { RxStompConfig } from '@stomp/rx-stomp';\n\nexport const myRxStompConfig: RxStompConfig = {\n    // Which server?\n    brokerURL: 'ws://localhost:61613/topic/',\n\n    // Headers\n    // Typical keys: login, passcode, host\n    connectHeaders: {\n       login: 'guest',\n       passcode: 'guest',\n    },\n}\n</code></pre>\n<p>Backend</p>\n<pre><code>@Configuration\n@EnableWebSocketMessageBroker\npublic class WebSocketMessageBrokerConfig implements WebSocketMessageBrokerConfigurer \n{\n\n    @Override\n    public void configureMessageBroker(MessageBrokerRegistry config){\n        config.enableSimpleBroker(&quot;/topic/&quot;, &quot;/queue/&quot;);\n        config.setApplicationDestinationPrefixes(&quot;/app&quot;);\n    }\n}\n</code></pre>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":2,"creation_date":1694094427,"post_id":77058220,"comment_id":135848272,"body_markdown":"The [parameter type for `onDragDropped` is an `EventHandler&lt;DragEvent&gt;`](https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/Node.html#setOnDragDropped(javafx.event.EventHandler)), not an `EventHandler&lt;MouseEvent&gt;`, so the parameter passed to the `handle()` method is `DragEvent`. The [JavaDocs for `DragEvent`](https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/input/DragEvent.html) show how to get the data being dragged from the `Dragboard`.","body":"The <a href=\"https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/Node.html#setOnDragDropped(javafx.event.EventHandler)\" rel=\"nofollow noreferrer\">parameter type for <code>onDragDropped</code> is an <code>EventHandler&lt;DragEvent&gt;</code></a>, not an <code>EventHandler&lt;MouseEvent&gt;</code>, so the parameter passed to the <code>handle()</code> method is <code>DragEvent</code>. The <a href=\"https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/input/DragEvent.html\" rel=\"nofollow noreferrer\">JavaDocs for <code>DragEvent</code></a> show how to get the data being dragged from the <code>Dragboard</code>."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":1,"creation_date":1694094573,"post_id":77058220,"comment_id":135848312,"body_markdown":"As an aside, this doesn&#39;t always work perfectly cleanly, especially if you are dragging and dropping data represented by user defined classes. I&#39;ve often found the need to either put `String` data on the `Dragboard` from which I can reliably look up the data being dragged, or create some external mechanism to store the dragged data when the drag is initiated.","body":"As an aside, this doesn&#39;t always work perfectly cleanly, especially if you are dragging and dropping data represented by user defined classes. I&#39;ve often found the need to either put <code>String</code> data on the <code>Dragboard</code> from which I can reliably look up the data being dragged, or create some external mechanism to store the dragged data when the drag is initiated."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":2,"creation_date":1694096969,"post_id":77058220,"comment_id":135848983,"body_markdown":"See the [Oracle drag and drop tutorial](https://docs.oracle.com/javase/8/javafx/events-tutorial/drag-drop.htm) and [paper doll app](https://docs.oracle.com/javase/8/javafx/events-tutorial/paper-doll.htm).","body":"See the <a href=\"https://docs.oracle.com/javase/8/javafx/events-tutorial/drag-drop.htm\" rel=\"nofollow noreferrer\">Oracle drag and drop tutorial</a> and <a href=\"https://docs.oracle.com/javase/8/javafx/events-tutorial/paper-doll.htm\" rel=\"nofollow noreferrer\">paper doll app</a>."}],"owner":{"account_id":16903554,"reputation":509,"user_id":12224591,"display_name":"Runsva"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1694079008,"creation_date":1694078226,"question_id":77058220,"body_markdown":"I&#39;m attempting to acquire whatever I&#39;m dragging with my mouse cursor over a `BorderPane` in JavaFX.\r\n\r\nHow does one go about reading what is being currently carried by the mouse cursor, specifically when the _On Drag Dropped_ event is triggered?\r\n\r\nThere is a `getPickType` function in the `MouseEvent` class that&#39;s the argument of the callback function for the _On Drag Dropped_ event, however no documentation is provided for it in the JavaFX library installation I have. I wanted to make sure I&#39;m looking at the right thing here.\r\n\r\n","title":"How to detect what is dragged by mouse?","body":"<p>I'm attempting to acquire whatever I'm dragging with my mouse cursor over a <code>BorderPane</code> in JavaFX.</p>\n<p>How does one go about reading what is being currently carried by the mouse cursor, specifically when the <em>On Drag Dropped</em> event is triggered?</p>\n<p>There is a <code>getPickType</code> function in the <code>MouseEvent</code> class that's the argument of the callback function for the <em>On Drag Dropped</em> event, however no documentation is provided for it in the JavaFX library installation I have. I wanted to make sure I'm looking at the right thing here.</p>\n"},{"tags":["java","compiler-errors","package","cannot-find-symbol"],"comments":[{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1694055825,"post_id":77056325,"comment_id":135841893,"body_markdown":"Please, [do not upload images of code/data/error](https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors/285557#285557).","body":"Please, <a href=\"https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors/285557#285557\">do not upload images of code/data/error</a>."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1694058087,"post_id":77056325,"comment_id":135842028,"body_markdown":"Show us the other file. Then comment here once you edited your question.","body":"Show us the other file. Then comment here once you edited your question."},{"owner":{"account_id":45934,"reputation":203679,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":0,"creation_date":1694069157,"post_id":77056325,"comment_id":135843095,"body_markdown":"How exactly are you compiling the classes?","body":"How exactly are you compiling the classes?"},{"owner":{"account_id":29383867,"reputation":3,"user_id":22513693,"display_name":"ling131031003"},"score":1,"creation_date":1694071910,"post_id":77056325,"comment_id":135843616,"body_markdown":"@davidalayachew I have re-edited my question","body":"@davidalayachew I have re-edited my question"},{"owner":{"account_id":29383867,"reputation":3,"user_id":22513693,"display_name":"ling131031003"},"score":0,"creation_date":1694072007,"post_id":77056325,"comment_id":135843632,"body_markdown":"@Jesper I dont actually know what is compiling in Java. Do you meant the directories of the files? I put both the Main.java &amp; Organ.java under OrganProject folder.","body":"@Jesper I dont actually know what is compiling in Java. Do you meant the directories of the files? I put both the Main.java &amp; Organ.java under OrganProject folder."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1694078802,"post_id":77056325,"comment_id":135845029,"body_markdown":"I have answered your question. Let me know via comment (on my answer) if it doesn&#39;t work.","body":"I have answered your question. Let me know via comment (on my answer) if it doesn&#39;t work."}],"answers":[{"comments":[{"owner":{"account_id":29383867,"reputation":3,"user_id":22513693,"display_name":"ling131031003"},"score":1,"creation_date":1694085711,"post_id":77058249,"comment_id":135846302,"body_markdown":"Hi!!! Thank you so much for your suggestion. My codes worked after using ur method. However, if I stop using **javac** in the terminal, and choose to run the ```Main.java``` file in VScode, the same error comes along.","body":"Hi!!! Thank you so much for your suggestion. My codes worked after using ur method. However, if I stop using <b>javac</b> in the terminal, and choose to run the <code>Main.java</code> file in VScode, the same error comes along."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1694087443,"post_id":77058249,"comment_id":135846666,"body_markdown":"@ling131031003 I am glad it worked. And yes, that makes sense why it doesn&#39;t work. If you want, you can run the commands I showed you in VSCode&#39;s terminal. That should work just fine as well.","body":"@ling131031003 I am glad it worked. And yes, that makes sense why it doesn&#39;t work. If you want, you can run the commands I showed you in VSCode&#39;s terminal. That should work just fine as well."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1694087618,"post_id":77058249,"comment_id":135846711,"body_markdown":"But remember, in Java, you are always supposed to compile your code before running it. `javac` is the command that compiles code, and `java` is the command that runs it. So, if you do not call `javac`, then you will not be able to run your code. That said, if your code is only in 1 file, and not 2 or more, then you can get away with just calling `java` on your `Main.java`. In the near future, they are actually going to let you get away with running multiple files without compiling them. Here is a link to that project proposal. https://openjdk.org/jeps/8304400","body":"But remember, in Java, you are always supposed to compile your code before running it. <code>javac</code> is the command that compiles code, and <code>java</code> is the command that runs it. So, if you do not call <code>javac</code>, then you will not be able to run your code. That said, if your code is only in 1 file, and not 2 or more, then you can get away with just calling <code>java</code> on your <code>Main.java</code>. In the near future, they are actually going to let you get away with running multiple files without compiling them. Here is a link to that project proposal. <a href=\"https://openjdk.org/jeps/8304400\" rel=\"nofollow noreferrer\">openjdk.org/jeps/8304400</a>"},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1694088463,"post_id":77058249,"comment_id":135846908,"body_markdown":"And please note, if the version of Java you are running is Java 11 or later, then that explains why you are running into the problem you did. They have not yet released the ability to run ***multiple*** files without compiling, but Java 11 is when they released the ability to run a ***single*** file without compiling. Here is a link to the single file source code proposal. https://openjdk.org/jeps/8304400 -- Notice how they restrict this ability to a single file. And notice how the previous link I sent you talks about how they intend to deal with the exact problem you are describing.","body":"And please note, if the version of Java you are running is Java 11 or later, then that explains why you are running into the problem you did. They have not yet released the ability to run <b><i>multiple</i></b> files without compiling, but Java 11 is when they released the ability to run a <b><i>single</i></b> file without compiling. Here is a link to the single file source code proposal. <a href=\"https://openjdk.org/jeps/8304400\" rel=\"nofollow noreferrer\">openjdk.org/jeps/8304400</a> -- Notice how they restrict this ability to a single file. And notice how the previous link I sent you talks about how they intend to deal with the exact problem you are describing."},{"owner":{"account_id":29383867,"reputation":3,"user_id":22513693,"display_name":"ling131031003"},"score":1,"creation_date":1694094269,"post_id":77058249,"comment_id":135848245,"body_markdown":"Thank you!!! I really appreciate your help! It really helps me a lot as I was bothered by this problem for quite a long time. Anyways, thank you so much again for your kindness.","body":"Thank you!!! I really appreciate your help! It really helps me a lot as I was bothered by this problem for quite a long time. Anyways, thank you so much again for your kindness."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1694094352,"post_id":77058249,"comment_id":135848261,"body_markdown":"Anytime. Let me know if you run into more issue with this. And if any of the answers here helped you, be sure to upvote them, and checkmark the one that solved your problem.","body":"Anytime. Let me know if you run into more issue with this. And if any of the answers here helped you, be sure to upvote them, and checkmark the one that solved your problem."}],"tags":[],"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"comment_count":6,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694078525,"creation_date":1694078525,"answer_id":77058249,"question_id":77056325,"body_markdown":"In your terminal, make a folder called `OrganProject`, then put your 2 files into there. Then, ***go outside the folder*** and call the following command in that terminal.\r\n\r\n```\r\njavac OrganProject/Main.java OrganProject/Organ.java\r\n```\r\n\r\nThis compiles your code, creating corresponding `.class` files. Then, while still being immediately outside of the `OrganProject` folder, call the following command in that terminal too.\r\n\r\n```\r\njava OrganProject/Main\r\n```\r\n\r\nThis will actually run the code. When I run your code, this is what I get.\r\n\r\n```\r\nName: eye\r\nCondition: good\r\n```","title":"Java: cannot find symbol when files are in same folder","body":"<p>In your terminal, make a folder called <code>OrganProject</code>, then put your 2 files into there. Then, <em><strong>go outside the folder</strong></em> and call the following command in that terminal.</p>\n<pre><code>javac OrganProject/Main.java OrganProject/Organ.java\n</code></pre>\n<p>This compiles your code, creating corresponding <code>.class</code> files. Then, while still being immediately outside of the <code>OrganProject</code> folder, call the following command in that terminal too.</p>\n<pre><code>java OrganProject/Main\n</code></pre>\n<p>This will actually run the code. When I run your code, this is what I get.</p>\n<pre><code>Name: eye\nCondition: good\n</code></pre>\n"}],"owner":{"account_id":29383867,"reputation":3,"user_id":22513693,"display_name":"ling131031003"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77058249,"answer_count":1,"score":0,"last_activity_date":1694078525,"creation_date":1694055224,"question_id":77056325,"body_markdown":"I created a file Organ.java\r\n```\r\npackage OrganProject;\r\n\r\npublic class Organ{\r\n\r\n    private String name;\r\n    private String condition;\r\n\r\n    public Organ(String name, String condition){\r\n\r\n        this.name = name;\r\n        this.condition = condition;\r\n\r\n    }\r\n\r\n    public String getName(){\r\n        return this.name;\r\n    }\r\n\r\n    public String getCondition(){\r\n        return this.condition;\r\n    }\r\n\r\n    public void setName(String name){\r\n        this.name = name;\r\n    }\r\n\r\n    public void setCondition(String condition){\r\n        this.condition = condition;\r\n    }\r\n\r\n    public void display(){\r\n        System.out.println(&quot;Name: &quot; + this.getName());\r\n        System.out.println(&quot;Condition: &quot; + this.getCondition());\r\n    }\r\n}\r\n```\r\n\r\n\r\n however, when I call this class in Main.java\r\n```\r\npackage OrganProject;\r\npublic class Main { \r\n    public static void main(String[] args) {\r\n        Organ organ = new Organ(&quot;eye&quot;, &quot;good&quot;);\r\n        organ.display();\r\n    }\r\n}\r\n```\r\nThere was an error showing that \r\n```\r\nMain.java:7: error: cannot find symbol\r\n        Organ organ = new Organ(&quot;eye&quot;, &quot;good&quot;);\r\n        ^\r\n  symbol:   class Organ\r\n  location: class Main\r\nMain.java:7: error: cannot find symbol\r\n        Organ organ = new Organ(&quot;eye&quot;, &quot;good&quot;);\r\n                          ^\r\n  symbol:   class Organ\r\n  location: class Main\r\n2 errors\r\n```\r\n\r\nThe 2 files are all in the same folder called OrganProject; however, they seem unable to interlink each other. May I ask what is the reason behind it and how to resolve this problem?\r\n\r\n\r\n\r\nI had tried to create new folder and move the files into that new folder, hope can refresh the compile, however, it did not work.","title":"Java: cannot find symbol when files are in same folder","body":"<p>I created a file Organ.java</p>\n<pre><code>package OrganProject;\n\npublic class Organ{\n\n    private String name;\n    private String condition;\n\n    public Organ(String name, String condition){\n\n        this.name = name;\n        this.condition = condition;\n\n    }\n\n    public String getName(){\n        return this.name;\n    }\n\n    public String getCondition(){\n        return this.condition;\n    }\n\n    public void setName(String name){\n        this.name = name;\n    }\n\n    public void setCondition(String condition){\n        this.condition = condition;\n    }\n\n    public void display(){\n        System.out.println(&quot;Name: &quot; + this.getName());\n        System.out.println(&quot;Condition: &quot; + this.getCondition());\n    }\n}\n</code></pre>\n<p>however, when I call this class in Main.java</p>\n<pre><code>package OrganProject;\npublic class Main { \n    public static void main(String[] args) {\n        Organ organ = new Organ(&quot;eye&quot;, &quot;good&quot;);\n        organ.display();\n    }\n}\n</code></pre>\n<p>There was an error showing that</p>\n<pre><code>Main.java:7: error: cannot find symbol\n        Organ organ = new Organ(&quot;eye&quot;, &quot;good&quot;);\n        ^\n  symbol:   class Organ\n  location: class Main\nMain.java:7: error: cannot find symbol\n        Organ organ = new Organ(&quot;eye&quot;, &quot;good&quot;);\n                          ^\n  symbol:   class Organ\n  location: class Main\n2 errors\n</code></pre>\n<p>The 2 files are all in the same folder called OrganProject; however, they seem unable to interlink each other. May I ask what is the reason behind it and how to resolve this problem?</p>\n<p>I had tried to create new folder and move the files into that new folder, hope can refresh the compile, however, it did not work.</p>\n"},{"tags":["java","web-services","rest","jaxb","marshalling"],"answers":[{"tags":[],"owner":{"account_id":162425,"reputation":147999,"user_id":383861,"display_name":"bdoughan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1400268935,"creation_date":1400268935,"answer_id":23703297,"question_id":23691662,"body_markdown":"JAX-RS will build a `JAXBContext` based on what the JAX-RS method returns.  JAXB will then pull in more classes via transitive relationships.  This doesn&#39;t always cause all the classes to be processed.  To get more control over the `JAXBContext` created you can create a `ContextResolver` that builds the `JAXBContext` the way that you want.\r\n\r\n    import java.util.*;\r\n    import javax.ws.rs.Produces;\r\n    import javax.ws.rs.ext.*;\r\n    import javax.xml.bind.*;\r\n    import org.eclipse.persistence.jaxb.JAXBContextFactory;\r\n     \r\n    @Provider\r\n    @Produces(MediaType.APPLICATION_XML)\r\n    public class MyContextResolver implements ContextResolver&lt;JAXBContext&gt; {\r\n     \r\n        private JAXBContext jc;\r\n     \r\n        public MyContextResolver() {\r\n            try {\r\n               jc = // Build Your JAXBContext on all classes it needs to be aware of.\r\n            } catch(JAXBException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n     \r\n        public JAXBContext getContext(Class&lt;?&gt; clazz) {\r\n           // Return the JAXBContext for any class it is aware of otherwise return null.\r\n        }\r\n     \r\n    }\r\n\r\nI have provided some additional details on how your `JAXBContext` should be built in an answer to your related question:\r\n\r\n  - https://stackoverflow.com/questions/23676605/exception-in-thread-main-javax-xml-bind-jaxbexception-class-nor-any-of-its-su/23677884#23677884","title":"JAXBException occurred : class com.jaxb.model.copy.copy.Snapshot nor any of its super class is known to this context..","body":"<p>JAX-RS will build a <code>JAXBContext</code> based on what the JAX-RS method returns.  JAXB will then pull in more classes via transitive relationships.  This doesn't always cause all the classes to be processed.  To get more control over the <code>JAXBContext</code> created you can create a <code>ContextResolver</code> that builds the <code>JAXBContext</code> the way that you want.</p>\n\n<pre><code>import java.util.*;\nimport javax.ws.rs.Produces;\nimport javax.ws.rs.ext.*;\nimport javax.xml.bind.*;\nimport org.eclipse.persistence.jaxb.JAXBContextFactory;\n\n@Provider\n@Produces(MediaType.APPLICATION_XML)\npublic class MyContextResolver implements ContextResolver&lt;JAXBContext&gt; {\n\n    private JAXBContext jc;\n\n    public MyContextResolver() {\n        try {\n           jc = // Build Your JAXBContext on all classes it needs to be aware of.\n        } catch(JAXBException e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    public JAXBContext getContext(Class&lt;?&gt; clazz) {\n       // Return the JAXBContext for any class it is aware of otherwise return null.\n    }\n\n}\n</code></pre>\n\n<p>I have provided some additional details on how your <code>JAXBContext</code> should be built in an answer to your related question:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/23676605/exception-in-thread-main-javax-xml-bind-jaxbexception-class-nor-any-of-its-su/23677884#23677884\">Exception in thread &quot;main&quot; javax.xml.bind.JAXBException: class nor any of its super class is known to this context</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":379152,"reputation":3080,"user_id":732328,"accept_rate":40,"display_name":"Kayvan Tehrani"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694078152,"creation_date":1423587891,"answer_id":28437548,"question_id":23691662,"body_markdown":"Thanks to @blaise-doughan. I had a similar problem. My SOAP service worked fine but REST responses were lost because of what you have mentioned and I have merged his solution with my current Implementation:\r\n\r\n    @Provider\r\n    @Service(&quot;myManager&quot;)\r\n    @WebService(serviceName = &quot;MyService&quot;, portName = &quot;MyManagerImpl&quot;)\r\n    public class MyManagerImpl implements    MyService, ContextResolver&lt;JAXBContext&gt; {\r\n    private JAXBContext jc;\r\n\r\n    public MyManagerImpl() {\r\n        try {\r\n            jc = JAXBContext.newInstance(Children.class, MyResponse.class);\r\n        } catch(JAXBException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n\r\n        public JAXBContext getContext(Class&lt;?&gt; aClass) {\r\n            return jc;\r\n    }\r\n\r\n    }\r\nNow everything work fine.\r\n","title":"JAXBException occurred : class com.jaxb.model.copy.copy.Snapshot nor any of its super class is known to this context..","body":"<p>Thanks to @blaise-doughan. I had a similar problem. My SOAP service worked fine but REST responses were lost because of what you have mentioned and I have merged his solution with my current Implementation:</p>\n<pre><code>@Provider\n@Service(&quot;myManager&quot;)\n@WebService(serviceName = &quot;MyService&quot;, portName = &quot;MyManagerImpl&quot;)\npublic class MyManagerImpl implements    MyService, ContextResolver&lt;JAXBContext&gt; {\nprivate JAXBContext jc;\n\npublic MyManagerImpl() {\n    try {\n        jc = JAXBContext.newInstance(Children.class, MyResponse.class);\n    } catch(JAXBException e) {\n        throw new RuntimeException(e);\n    }\n\n    public JAXBContext getContext(Class&lt;?&gt; aClass) {\n        return jc;\n}\n\n}\n</code></pre>\n<p>Now everything work fine.</p>\n"}],"owner":{"account_id":3804257,"reputation":527,"user_id":3157090,"accept_rate":5,"display_name":"user3157090"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":675,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1694078152,"creation_date":1400206990,"question_id":23691662,"body_markdown":"Can someone help me to resolve the issue, \r\nJAXBException occurred : class com.jaxb.model.copy.copy.Snapshot nor any of its super class is known to this context.. \r\n\r\nInterface JaxbWebResource\r\n\r\n\tpackage com.jaxb.model.copy.copy;\r\n\t\r\n\timport javax.servlet.http.HttpServletRequest;\r\n\timport javax.ws.rs.GET;\r\n\timport javax.ws.rs.Path;\r\n\timport javax.ws.rs.PathParam;\r\n\timport javax.ws.rs.Produces;\r\n\timport javax.ws.rs.core.Context;\r\n\timport javax.ws.rs.core.Response;\r\n\t\r\n\t@Path(&quot;/jaxb&quot;)\r\n\tpublic interface JaxbWebResource\r\n\t{\r\n\t\t@GET\r\n\t\t@Produces({ &quot;application/xml&quot;, &quot;application/json&quot; })\r\n\t\tpublic Response readOffer(@Context HttpServletRequest req);\r\n\t}\r\n\r\nClass JaxbWebResourceImpl\r\n\r\n\r\n\tpackage com.jaxb.model.copy.copy;\r\n\t\r\n\timport javax.servlet.http.HttpServletRequest;\r\n\timport javax.ws.rs.core.Response;\r\n\timport javax.ws.rs.core.Response.Status;\r\n\timport javax.xml.bind.JAXBElement;\r\n\t\r\n\timport org.springframework.stereotype.Component;\r\n\t\r\n\timport com.jaxb.model.copy.copy.Foo;\r\n\timport com.jaxb.model.copy.copy.Moo;\r\n\timport com.jaxb.model.copy.copy.ObjectFactory;\r\n\timport com.jaxb.model.copy.copy.Snapshot;\r\n\t\r\n\t@Component(&quot;jaxbWebResource&quot;)\r\n\tpublic class JaxbWebResourceImpl implements JaxbWebResource\r\n\t{\r\n\t\r\n\t\t@Override\r\n\t\tpublic Response readOffer(final HttpServletRequest req) {\r\n\t\r\n\t\t\tSystem.out.println(&quot;JaxbWebResourceImpl readMarketingOffer&quot;);\r\n\t\t\tSnapshot snapshot = new Snapshot();\r\n\t\t\tFoo.Detail.Bar barV = new Foo.Detail.Bar();\r\n\t\t\tbarV.setBaz(&quot;heloo baz&quot;);\r\n\t\t\tJAXBElement&lt;Foo.Detail.Bar&gt; bar = new ObjectFactory().createBar(barV);\r\n\t\t\tbar.setNil(true);\r\n\t\t\tFoo.Detail detail = new Foo.Detail();\r\n\t\t\tdetail.setBar(bar);\r\n\t\t\tFoo foo = new Foo();\r\n\t\t\tfoo.setDetail(detail);\r\n\t\t\tsnapshot.setMoo(foo);\r\n\t\r\n\t\t\treturn Response.status(Status.OK).entity(snapshot).build();\r\n\t\r\n\t\t}\r\n\t\r\n\t}\r\n\r\nObjectFactory class\r\n\r\n        package com.jaxb.model.copy.copy;\r\n\t\r\n\timport javax.xml.bind.JAXBElement;\r\n\timport javax.xml.bind.annotation.*;\r\n\timport javax.xml.namespace.QName;\r\n\t\r\n\t@XmlRegistry\r\n\tpublic class ObjectFactory {\r\n\t\r\n\t    @XmlElementDecl(namespace=&quot;&quot;,name=&quot;bar&quot;)\r\n\t    public JAXBElement&lt;Moo.Detail.Bar&gt; createBar(Moo.Detail.Bar bar) {\r\n\t        return new JAXBElement&lt;Moo.Detail.Bar&gt;(new QName(&quot;bar&quot;), Moo.Detail.Bar.class, bar);\r\n\t    }\r\n\t\r\n\t}\r\n\r\nFoo class\r\n\tpackage com.jaxb.model.copy.copy;\r\n\t\r\n\timport java.math.BigDecimal;\r\n\t\r\n\timport javax.xml.bind.JAXBElement;\r\n\timport javax.xml.bind.annotation.XmlAccessType;\r\n\timport javax.xml.bind.annotation.XmlAccessorType;\r\n\timport javax.xml.bind.annotation.XmlAttribute;\r\n\timport javax.xml.bind.annotation.XmlElement;\r\n\timport javax.xml.bind.annotation.XmlElementRef;\r\n\timport javax.xml.bind.annotation.XmlRootElement;\r\n\timport javax.xml.bind.annotation.XmlSeeAlso;\r\n\timport javax.xml.bind.annotation.XmlType;\r\n\timport javax.xml.bind.annotation.XmlValue;\r\n\t\r\n\timport com.guthyrenker.soma.ws.rest.v1.model.ObjectFactory;\r\n\timport com.guthyrenker.soma.ws.rest.v1.model.WSMarketingOfferOP;\r\n\timport com.guthyrenker.soma.ws.rest.v1.model.WSMarketingOfferWEB;\r\n\timport com.jaxb.model.copy.Snapshot;\r\n\timport com.jverstry.annotations.generics.Market;\r\n\t\r\n\t@XmlRootElement\r\n\t@XmlAccessorType(XmlAccessType.FIELD)\r\n\t\r\n\tpublic class Foo extends Moo{\r\n\t\r\n\t\t@XmlElement\r\n\t   String name;\r\n\r\n\t\tpublic String getName() {\r\n\t\t\treturn name;\r\n\t\t}\r\n\r\n\t\tpublic void setName(String name) {\r\n\t\t\tthis.name = name;\r\n\t\t}\r\n\t    \r\n\t}\r\nMoo class\r\n\tpackage com.jaxb.model.copy.copy;\r\n\t\r\n\timport java.math.BigDecimal;\r\n\t\r\n\timport javax.xml.bind.JAXBElement;\r\n\timport javax.xml.bind.annotation.XmlAccessType;\r\n\timport javax.xml.bind.annotation.XmlAccessorType;\r\n\timport javax.xml.bind.annotation.XmlAttribute;\r\n\timport javax.xml.bind.annotation.XmlElement;\r\n\timport javax.xml.bind.annotation.XmlElementRef;\r\n\timport javax.xml.bind.annotation.XmlRootElement;\r\n\timport javax.xml.bind.annotation.XmlType;\r\n\timport javax.xml.bind.annotation.XmlValue;\r\n\t\r\n\timport com.jverstry.annotations.generics.Market;\r\n\t\r\n\t@XmlRootElement\r\n\t@XmlAccessorType(XmlAccessType.FIELD)\r\n\tpublic class Moo {\r\n\t\r\n\t   \r\n\t\t @XmlElement\r\n\t\t\tprotected Detail detail;\r\n\t\t\r\n\t\t\tpublic Detail getDetail() {\r\n\t\t\t\treturn detail;\r\n\t\t\t}\r\n\t\t\r\n\t\t\tpublic void setDetail(Detail detail) {\r\n\t\t\t\tthis.detail = detail;\r\n\t\t\t}\r\n\t\t\r\n\t\t\t@XmlAccessorType(XmlAccessType.FIELD)\r\n\t\t\t@XmlType(name = &quot;&quot;, propOrder = { &quot;bar&quot;})\r\n\t\t\tpublic static class Detail\r\n\t\t\t{\r\n\t\t\t\t@XmlElementRef(name=&quot;bar&quot;)\r\n\t\t\t    private JAXBElement&lt;Foo.Detail.Bar&gt; bar;\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\tpublic JAXBElement&lt;Foo.Detail.Bar&gt; getBar() {\r\n\t\t\t\t\treturn bar;\r\n\t\t\t\t}\r\n\t\t\r\n\t\t\t\tpublic void setBar(JAXBElement&lt;Foo.Detail.Bar&gt; bar) {\r\n\t\t\t\t\tthis.bar = bar;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\r\n\t\t\t\t@XmlAccessorType(XmlAccessType.FIELD)\r\n\t\t\t\t@XmlType(name = &quot;&quot;, propOrder = { &quot;value&quot; })\r\n\t\t\t\t\tpublic static class Bar\r\n\t\t\t\t\t{\r\n\t\t\r\n\t\t\t\t    \t @XmlAttribute\r\n\t\t\t\t    \t protected String baz;\r\n\t\t\t\t    \t    \r\n\t\t\t\t    \t @XmlValue\r\n\t\t\t\t    \t\tprotected BigDecimal value;\r\n\t\t\r\n\t\t\t\t\t\t\tpublic String getBaz() {\r\n\t\t\t\t\t\t\t\treturn baz;\r\n\t\t\t\t\t\t\t}\r\n\t\t\r\n\t\t\t\t\t\t\tpublic void setBaz(String baz) {\r\n\t\t\t\t\t\t\t\tthis.baz = baz;\r\n\t\t\t\t\t\t\t}\r\n\t\t\r\n\t\t\t\t\t\t\tpublic BigDecimal getValue() {\r\n\t\t\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t\t\t}\r\n\t\t\r\n\t\t\t\t\t\t\tpublic void setValue(BigDecimal value) {\r\n\t\t\t\t\t\t\t\tthis.value = value;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t}\r\n\r\nSnapshot class\r\n\tpackage com.jaxb.model.copy.copy;\r\n\t\r\n\timport java.util.Date;\r\n\t\r\n\timport javax.xml.bind.annotation.XmlAccessType;\r\n\timport javax.xml.bind.annotation.XmlAccessorType;\r\n\timport javax.xml.bind.annotation.XmlAttribute;\r\n\timport javax.xml.bind.annotation.XmlElement;\r\n\timport javax.xml.bind.annotation.XmlRootElement;\r\n\timport javax.xml.bind.annotation.XmlType;\r\n\t\r\n\timport com.fasterxml.jackson.annotation.JsonIgnore;\r\n\timport com.fasterxml.jackson.databind.annotation.JsonSerialize;\r\n\timport com.guthyrenker.soma.ws.rest.v1.adapter.JsonDateTimeSerializer;\r\n\t/**\r\n\t * @author Srinivasa Kankipati\r\n\t * @since 1.0\r\n\t */\r\n\t@XmlAccessorType(XmlAccessType.FIELD)\r\n\t@XmlType(propOrder = { &quot;mask&quot;, &quot;xmlns&quot;, &quot;currentAsOf&quot;,&quot;moo&quot; })\r\n\t@XmlRootElement(name = &quot;snapshot&quot;)\r\n\tpublic class Snapshot&lt;T extends Moo&gt;\r\n\t{\r\n\t\t@XmlAttribute\r\n\t\tpublic String mask;\r\n\t\r\n\t\t@XmlElement\r\n\t\tpublic Date currentAsOf;\r\n\t\r\n\t\t@XmlAttribute\r\n\t\t@JsonIgnore\r\n\t\tpublic String xmlns;\r\n\t\t\r\n\t\t@XmlElement(name = &quot;moo&quot;)\r\n\t\tprivate Moo moo;\r\n\t\r\n\t\tpublic String getMask() {\r\n\t\t\treturn mask;\r\n\t\t}\r\n\t\r\n\t\tpublic void setMask(String mask) {\r\n\t\t\tthis.mask = mask;\r\n\t\t}\r\n\t\r\n\t\tpublic Date getCurrentAsOf() {\r\n\t\t\treturn currentAsOf;\r\n\t\t}\r\n\t\r\n\t\tpublic void setCurrentAsOf(Date currentAsOf) {\r\n\t\t\tthis.currentAsOf = currentAsOf;\r\n\t\t}\r\n\t\r\n\t\tpublic String getXmlns() {\r\n\t\t\treturn xmlns;\r\n\t\t}\r\n\t\r\n\t\tpublic void setXmlns(String xmlns) {\r\n\t\t\tthis.xmlns = xmlns;\r\n\t\t}\r\n\r\n\t\tpublic Moo getMoo() {\r\n\t\t\treturn moo;\r\n\t\t}\r\n\r\n\t\tpublic void setMoo(Moo moo) {\r\n\t\t\tthis.moo = moo;\r\n\t\t}\r\n\t}\r\n","title":"JAXBException occurred : class com.jaxb.model.copy.copy.Snapshot nor any of its super class is known to this context..","body":"<p>Can someone help me to resolve the issue, \nJAXBException occurred : class com.jaxb.model.copy.copy.Snapshot nor any of its super class is known to this context.. </p>\n\n<p>Interface JaxbWebResource</p>\n\n<pre><code>package com.jaxb.model.copy.copy;\n\nimport javax.servlet.http.HttpServletRequest;\nimport javax.ws.rs.GET;\nimport javax.ws.rs.Path;\nimport javax.ws.rs.PathParam;\nimport javax.ws.rs.Produces;\nimport javax.ws.rs.core.Context;\nimport javax.ws.rs.core.Response;\n\n@Path(\"/jaxb\")\npublic interface JaxbWebResource\n{\n    @GET\n    @Produces({ \"application/xml\", \"application/json\" })\n    public Response readOffer(@Context HttpServletRequest req);\n}\n</code></pre>\n\n<p>Class JaxbWebResourceImpl</p>\n\n<pre><code>package com.jaxb.model.copy.copy;\n\nimport javax.servlet.http.HttpServletRequest;\nimport javax.ws.rs.core.Response;\nimport javax.ws.rs.core.Response.Status;\nimport javax.xml.bind.JAXBElement;\n\nimport org.springframework.stereotype.Component;\n\nimport com.jaxb.model.copy.copy.Foo;\nimport com.jaxb.model.copy.copy.Moo;\nimport com.jaxb.model.copy.copy.ObjectFactory;\nimport com.jaxb.model.copy.copy.Snapshot;\n\n@Component(\"jaxbWebResource\")\npublic class JaxbWebResourceImpl implements JaxbWebResource\n{\n\n    @Override\n    public Response readOffer(final HttpServletRequest req) {\n\n        System.out.println(\"JaxbWebResourceImpl readMarketingOffer\");\n        Snapshot snapshot = new Snapshot();\n        Foo.Detail.Bar barV = new Foo.Detail.Bar();\n        barV.setBaz(\"heloo baz\");\n        JAXBElement&lt;Foo.Detail.Bar&gt; bar = new ObjectFactory().createBar(barV);\n        bar.setNil(true);\n        Foo.Detail detail = new Foo.Detail();\n        detail.setBar(bar);\n        Foo foo = new Foo();\n        foo.setDetail(detail);\n        snapshot.setMoo(foo);\n\n        return Response.status(Status.OK).entity(snapshot).build();\n\n    }\n\n}\n</code></pre>\n\n<p>ObjectFactory class</p>\n\n<pre><code>    package com.jaxb.model.copy.copy;\n\nimport javax.xml.bind.JAXBElement;\nimport javax.xml.bind.annotation.*;\nimport javax.xml.namespace.QName;\n\n@XmlRegistry\npublic class ObjectFactory {\n\n    @XmlElementDecl(namespace=\"\",name=\"bar\")\n    public JAXBElement&lt;Moo.Detail.Bar&gt; createBar(Moo.Detail.Bar bar) {\n        return new JAXBElement&lt;Moo.Detail.Bar&gt;(new QName(\"bar\"), Moo.Detail.Bar.class, bar);\n    }\n\n}\n</code></pre>\n\n<p>Foo class\n    package com.jaxb.model.copy.copy;</p>\n\n<pre><code>import java.math.BigDecimal;\n\nimport javax.xml.bind.JAXBElement;\nimport javax.xml.bind.annotation.XmlAccessType;\nimport javax.xml.bind.annotation.XmlAccessorType;\nimport javax.xml.bind.annotation.XmlAttribute;\nimport javax.xml.bind.annotation.XmlElement;\nimport javax.xml.bind.annotation.XmlElementRef;\nimport javax.xml.bind.annotation.XmlRootElement;\nimport javax.xml.bind.annotation.XmlSeeAlso;\nimport javax.xml.bind.annotation.XmlType;\nimport javax.xml.bind.annotation.XmlValue;\n\nimport com.guthyrenker.soma.ws.rest.v1.model.ObjectFactory;\nimport com.guthyrenker.soma.ws.rest.v1.model.WSMarketingOfferOP;\nimport com.guthyrenker.soma.ws.rest.v1.model.WSMarketingOfferWEB;\nimport com.jaxb.model.copy.Snapshot;\nimport com.jverstry.annotations.generics.Market;\n\n@XmlRootElement\n@XmlAccessorType(XmlAccessType.FIELD)\n\npublic class Foo extends Moo{\n\n    @XmlElement\n   String name;\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n}\n</code></pre>\n\n<p>Moo class\n    package com.jaxb.model.copy.copy;</p>\n\n<pre><code>import java.math.BigDecimal;\n\nimport javax.xml.bind.JAXBElement;\nimport javax.xml.bind.annotation.XmlAccessType;\nimport javax.xml.bind.annotation.XmlAccessorType;\nimport javax.xml.bind.annotation.XmlAttribute;\nimport javax.xml.bind.annotation.XmlElement;\nimport javax.xml.bind.annotation.XmlElementRef;\nimport javax.xml.bind.annotation.XmlRootElement;\nimport javax.xml.bind.annotation.XmlType;\nimport javax.xml.bind.annotation.XmlValue;\n\nimport com.jverstry.annotations.generics.Market;\n\n@XmlRootElement\n@XmlAccessorType(XmlAccessType.FIELD)\npublic class Moo {\n\n\n     @XmlElement\n        protected Detail detail;\n\n        public Detail getDetail() {\n            return detail;\n        }\n\n        public void setDetail(Detail detail) {\n            this.detail = detail;\n        }\n\n        @XmlAccessorType(XmlAccessType.FIELD)\n        @XmlType(name = \"\", propOrder = { \"bar\"})\n        public static class Detail\n        {\n            @XmlElementRef(name=\"bar\")\n            private JAXBElement&lt;Foo.Detail.Bar&gt; bar;\n\n\n                public JAXBElement&lt;Foo.Detail.Bar&gt; getBar() {\n                return bar;\n            }\n\n            public void setBar(JAXBElement&lt;Foo.Detail.Bar&gt; bar) {\n                this.bar = bar;\n            }\n\n\n\n\n            @XmlAccessorType(XmlAccessType.FIELD)\n            @XmlType(name = \"\", propOrder = { \"value\" })\n                public static class Bar\n                {\n\n                     @XmlAttribute\n                     protected String baz;\n\n                     @XmlValue\n                        protected BigDecimal value;\n\n                        public String getBaz() {\n                            return baz;\n                        }\n\n                        public void setBaz(String baz) {\n                            this.baz = baz;\n                        }\n\n                        public BigDecimal getValue() {\n                            return value;\n                        }\n\n                        public void setValue(BigDecimal value) {\n                            this.value = value;\n                        }\n                }\n        }\n}\n</code></pre>\n\n<p>Snapshot class\n    package com.jaxb.model.copy.copy;</p>\n\n<pre><code>import java.util.Date;\n\nimport javax.xml.bind.annotation.XmlAccessType;\nimport javax.xml.bind.annotation.XmlAccessorType;\nimport javax.xml.bind.annotation.XmlAttribute;\nimport javax.xml.bind.annotation.XmlElement;\nimport javax.xml.bind.annotation.XmlRootElement;\nimport javax.xml.bind.annotation.XmlType;\n\nimport com.fasterxml.jackson.annotation.JsonIgnore;\nimport com.fasterxml.jackson.databind.annotation.JsonSerialize;\nimport com.guthyrenker.soma.ws.rest.v1.adapter.JsonDateTimeSerializer;\n/**\n * @author Srinivasa Kankipati\n * @since 1.0\n */\n@XmlAccessorType(XmlAccessType.FIELD)\n@XmlType(propOrder = { \"mask\", \"xmlns\", \"currentAsOf\",\"moo\" })\n@XmlRootElement(name = \"snapshot\")\npublic class Snapshot&lt;T extends Moo&gt;\n{\n    @XmlAttribute\n    public String mask;\n\n    @XmlElement\n    public Date currentAsOf;\n\n    @XmlAttribute\n    @JsonIgnore\n    public String xmlns;\n\n    @XmlElement(name = \"moo\")\n    private Moo moo;\n\n    public String getMask() {\n        return mask;\n    }\n\n    public void setMask(String mask) {\n        this.mask = mask;\n    }\n\n    public Date getCurrentAsOf() {\n        return currentAsOf;\n    }\n\n    public void setCurrentAsOf(Date currentAsOf) {\n        this.currentAsOf = currentAsOf;\n    }\n\n    public String getXmlns() {\n        return xmlns;\n    }\n\n    public void setXmlns(String xmlns) {\n        this.xmlns = xmlns;\n    }\n\n    public Moo getMoo() {\n        return moo;\n    }\n\n    public void setMoo(Moo moo) {\n        this.moo = moo;\n    }\n}\n</code></pre>\n"},{"tags":["java","macos","maven","encoding","java-8"],"comments":[{"owner":{"account_id":889930,"reputation":924,"user_id":928408,"accept_rate":28,"display_name":"Sebastian L"},"score":1,"creation_date":1623854006,"post_id":68003423,"comment_id":120197298,"body_markdown":"I having similar issues. Rolled back all local changes and still got the issue. Worked earlier today and pretty sure I haven&#39;t had any updates.","body":"I having similar issues. Rolled back all local changes and still got the issue. Worked earlier today and pretty sure I haven&#39;t had any updates."},{"owner":{"account_id":8717071,"reputation":1458,"user_id":6521310,"accept_rate":50,"display_name":"Shylajhaa"},"score":0,"creation_date":1623860661,"post_id":68003423,"comment_id":120200529,"body_markdown":"@SebastianL Please find my answer, it worked for me","body":"@SebastianL Please find my answer, it worked for me"},{"owner":{"account_id":7117652,"reputation":1968,"user_id":5443319,"accept_rate":0,"display_name":"Ziaullhaq Savanur"},"score":0,"creation_date":1689333913,"post_id":68003423,"comment_id":135202077,"body_markdown":"Windows User: Search for resolver-status.properties files in entire .m2 folder using file-explorer then delete all those searched files and rerun maven command. It will start working","body":"Windows User: Search for resolver-status.properties files in entire .m2 folder using file-explorer then delete all those searched files and rerun maven command. It will start working"}],"answers":[{"tags":[],"owner":{"account_id":8717071,"reputation":1458,"user_id":6521310,"accept_rate":50,"display_name":"Shylajhaa"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1623860631,"creation_date":1623860631,"answer_id":68006608,"question_id":68003423,"body_markdown":"Found out that the java version that maven was pointing to was different from the java version I was using.\r\nSeems like maven always points to the latest version of java.\r\n\r\nFirst check if this is the issue by running `mvn --version`\r\n\r\nIf there is a mismatch in java version set JAVA_HOME by running\r\n\r\n`export JAVA_HOME=$(/usr/libexec/java_home)`\r\n\r\nNow run `mvn --version`. Maven should point to the right Java version.\r\n\r\nWhen you run `mvn install` next time, maven automatically picks up the version set in JAVA_HOME","title":"java.lang.IllegalArgumentException: Malformed \\uxxxx encoding while mvn install","body":"<p>Found out that the java version that maven was pointing to was different from the java version I was using.\nSeems like maven always points to the latest version of java.</p>\n<p>First check if this is the issue by running <code>mvn --version</code></p>\n<p>If there is a mismatch in java version set JAVA_HOME by running</p>\n<p><code>export JAVA_HOME=$(/usr/libexec/java_home)</code></p>\n<p>Now run <code>mvn --version</code>. Maven should point to the right Java version.</p>\n<p>When you run <code>mvn install</code> next time, maven automatically picks up the version set in JAVA_HOME</p>\n"},{"comments":[{"owner":{"account_id":2025979,"reputation":2522,"user_id":1810962,"accept_rate":80,"display_name":"joseph"},"score":2,"creation_date":1634910203,"post_id":68193490,"comment_id":123161210,"body_markdown":"How do these files get corrupted? Is it a bug with mvn or am I abusing mvn in a way that it shouldn&#39;t be used?","body":"How do these files get corrupted? Is it a bug with mvn or am I abusing mvn in a way that it shouldn&#39;t be used?"},{"owner":{"account_id":2090327,"reputation":8485,"user_id":1860309,"accept_rate":53,"display_name":"Boris Brodski"},"score":1,"creation_date":1635398922,"post_id":68193490,"comment_id":123288245,"body_markdown":"I get this problem over and over again!","body":"I get this problem over and over again!"},{"owner":{"account_id":10826427,"reputation":509,"user_id":7962200,"display_name":"Madjosz"},"score":3,"creation_date":1635934748,"post_id":68193490,"comment_id":123422331,"body_markdown":"It seems to be a bug in Maven 3.8.1. The issue reappeared again and again even after deleting the libraries from the local Maven repository. Upgrading to latest Maven 3.8.3 and rebuilding with that version fixed the problem.","body":"It seems to be a bug in Maven 3.8.1. The issue reappeared again and again even after deleting the libraries from the local Maven repository. Upgrading to latest Maven 3.8.3 and rebuilding with that version fixed the problem."}],"tags":[],"owner":{"account_id":19393894,"reputation":361,"user_id":14181948,"display_name":"Alexey Poletaev"},"comment_count":3,"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1625051220,"creation_date":1625050773,"answer_id":68193490,"question_id":68003423,"body_markdown":"In my case the problem was in the 3rd party library, incorrect charаcters somehow were saved to the **resolver-status.properties** file (example of incorrect line: `maven-metadata-nexus-releases.xml.lastUpda\\u0000\\u0000\\....`) which is located under the `~/.m2/repository/path-to-the-library`. Just removed the folder with the library and rebuilt the project.","title":"java.lang.IllegalArgumentException: Malformed \\uxxxx encoding while mvn install","body":"<p>In my case the problem was in the 3rd party library, incorrect charаcters somehow were saved to the <strong>resolver-status.properties</strong> file (example of incorrect line: <code>maven-metadata-nexus-releases.xml.lastUpda\\u0000\\u0000\\....</code>) which is located under the <code>~/.m2/repository/path-to-the-library</code>. Just removed the folder with the library and rebuilt the project.</p>\n"},{"comments":[{"owner":{"account_id":374852,"reputation":5831,"user_id":725306,"accept_rate":97,"display_name":"Mohammad Faisal"},"score":1,"creation_date":1649936207,"post_id":68532125,"comment_id":127003291,"body_markdown":"That could have worked but not a great choice if you already have a big repo to be downloaded again.","body":"That could have worked but not a great choice if you already have a big repo to be downloaded again."},{"owner":{"account_id":1597009,"reputation":5417,"user_id":1478852,"accept_rate":63,"display_name":"Sagar"},"score":1,"creation_date":1662473981,"post_id":68532125,"comment_id":130010471,"body_markdown":"I would do this and wait for 5 minutes over spending whole day to pin-point the bad dependency!!","body":"I would do this and wait for 5 minutes over spending whole day to pin-point the bad dependency!!"},{"owner":{"account_id":7117652,"reputation":1968,"user_id":5443319,"accept_rate":0,"display_name":"Ziaullhaq Savanur"},"score":0,"creation_date":1689334089,"post_id":68532125,"comment_id":135202113,"body_markdown":"Windows User: Search for resolver-status.properties files in entire .m2 folder using file-explorer then delete all those searched files and rerun maven command. It will start working","body":"Windows User: Search for resolver-status.properties files in entire .m2 folder using file-explorer then delete all those searched files and rerun maven command. It will start working"}],"tags":[],"owner":{"account_id":1597009,"reputation":5417,"user_id":1478852,"accept_rate":63,"display_name":"Sagar"},"comment_count":3,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1627311370,"creation_date":1627311370,"answer_id":68532125,"question_id":68003423,"body_markdown":"I removed all artifacts from my ~/.m2 directory and re-ran mvn build. \r\nThis time, build succeeded!","title":"java.lang.IllegalArgumentException: Malformed \\uxxxx encoding while mvn install","body":"<p>I removed all artifacts from my ~/.m2 directory and re-ran mvn build.\nThis time, build succeeded!</p>\n"},{"tags":[],"owner":{"account_id":2091713,"reputation":65,"user_id":1861396,"display_name":"kamdzi"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1627460641,"creation_date":1627460641,"answer_id":68556866,"question_id":68003423,"body_markdown":"Problem is likely in one of your dependencies (same as suggested by Alexey). For me the issue was to find the right dependency that got resolver-status.properties corrupted. What helped was running mvn clean install in debug mode (using Intellig configuration debug) and putting th endpoint in Properties.java (exact line should be in a stacktrace when you run with -e or -X option). In debug you can easily find which dependency is corrupted and remove only this dependency instead of entire .m2 catalog","title":"java.lang.IllegalArgumentException: Malformed \\uxxxx encoding while mvn install","body":"<p>Problem is likely in one of your dependencies (same as suggested by Alexey). For me the issue was to find the right dependency that got resolver-status.properties corrupted. What helped was running mvn clean install in debug mode (using Intellig configuration debug) and putting th endpoint in Properties.java (exact line should be in a stacktrace when you run with -e or -X option). In debug you can easily find which dependency is corrupted and remove only this dependency instead of entire .m2 catalog</p>\n"},{"comments":[{"owner":{"account_id":13886487,"reputation":1117,"user_id":10025504,"display_name":"ghost"},"score":12,"creation_date":1633591857,"post_id":69004125,"comment_id":122801599,"body_markdown":"This is actually a great answer with the step by step details to find the exact file. Step 1 (adding a breakpoint in IntelliJ and using it with maven) can be setup using the following: https://spin.atomicobject.com/2020/08/20/maven-debugging-intellij/","body":"This is actually a great answer with the step by step details to find the exact file. Step 1 (adding a breakpoint in IntelliJ and using it with maven) can be setup using the following: <a href=\"https://spin.atomicobject.com/2020/08/20/maven-debugging-intellij/\" rel=\"nofollow noreferrer\">spin.atomicobject.com/2020/08/20/maven-debugging-intellij</a>"},{"owner":{"account_id":7011618,"reputation":328,"user_id":5374277,"display_name":"Tarnished-Coder"},"score":0,"creation_date":1634663136,"post_id":69004125,"comment_id":123084147,"body_markdown":"Does not work if you have compiled dependecies.","body":"Does not work if you have compiled dependecies."},{"owner":{"account_id":374852,"reputation":5831,"user_id":725306,"accept_rate":97,"display_name":"Mohammad Faisal"},"score":0,"creation_date":1680689147,"post_id":69004125,"comment_id":133939321,"body_markdown":"Java should consider adding option to reveal file path itself rather than debugging and putting breakpoints all the time.","body":"Java should consider adding option to reveal file path itself rather than debugging and putting breakpoints all the time."},{"owner":{"account_id":7822785,"reputation":57,"user_id":5915393,"display_name":"Ann"},"score":0,"creation_date":1686044028,"post_id":69004125,"comment_id":134741776,"body_markdown":"That helped a lot, thank you so much","body":"That helped a lot, thank you so much"},{"owner":{"account_id":25497846,"reputation":139,"user_id":19291641,"display_name":"Tobias Sporer"},"score":0,"creation_date":1688738194,"post_id":69004125,"comment_id":135118164,"body_markdown":"thank you very much for this great answer - it really helped a much to solve our problem. Spring Boot had a really strange error message but the maven build error leaded us to your answer!","body":"thank you very much for this great answer - it really helped a much to solve our problem. Spring Boot had a really strange error message but the maven build error leaded us to your answer!"}],"tags":[],"owner":{"account_id":13597048,"reputation":3428,"user_id":9808792,"display_name":"micycle"},"comment_count":5,"down_vote_count":0,"up_vote_count":85,"is_accepted":false,"score":85,"last_activity_date":1630436825,"creation_date":1630436825,"answer_id":69004125,"question_id":68003423,"body_markdown":"To find which file is malformed (as to not have to delete your entire Maven repository) you can debug it like so:\r\n\r\n1) Add a breakpoint to the relevant line in `java.util.Properties` (as detailed in the error stack trace) and then run any Maven action in debug mode.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n2) When the code hits that breakpoint, find and select `TrackingFileManager.read(File)` in the call stack.\r\n\r\n[![enter image description here][2]][2]\r\n\r\n3) Now find path of the file that caused the issue.\r\n\r\n[![enter image description here][3]][3]\r\n\r\n4) The file is indeed malformed... Delete the file (and Maven will re-download it during the next action).\r\n\r\n[![enter image description here][4]][4]\r\n\r\n5) The correct file (after having been deleted and re-downloaded):\r\n\r\n[![enter image description here][5]][5]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ph5nF.png\r\n  [2]: https://i.stack.imgur.com/v0hn8.png\r\n  [3]: https://i.stack.imgur.com/3yV1X.png\r\n  [4]: https://i.stack.imgur.com/2NNg9.png\r\n  [5]: https://i.stack.imgur.com/d9Bc4.png","title":"java.lang.IllegalArgumentException: Malformed \\uxxxx encoding while mvn install","body":"<p>To find which file is malformed (as to not have to delete your entire Maven repository) you can debug it like so:</p>\n<ol>\n<li>Add a breakpoint to the relevant line in <code>java.util.Properties</code> (as detailed in the error stack trace) and then run any Maven action in debug mode.</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/ph5nF.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ph5nF.png\" alt=\"enter image description here\" /></a></p>\n<ol start=\"2\">\n<li>When the code hits that breakpoint, find and select <code>TrackingFileManager.read(File)</code> in the call stack.</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/v0hn8.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/v0hn8.png\" alt=\"enter image description here\" /></a></p>\n<ol start=\"3\">\n<li>Now find path of the file that caused the issue.</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/3yV1X.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/3yV1X.png\" alt=\"enter image description here\" /></a></p>\n<ol start=\"4\">\n<li>The file is indeed malformed... Delete the file (and Maven will re-download it during the next action).</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/2NNg9.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/2NNg9.png\" alt=\"enter image description here\" /></a></p>\n<ol start=\"5\">\n<li>The correct file (after having been deleted and re-downloaded):</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/d9Bc4.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/d9Bc4.png\" alt=\"enter image description here\" /></a></p>\n"},{"comments":[{"owner":{"account_id":1134415,"reputation":157,"user_id":1119788,"accept_rate":75,"display_name":"Jubz"},"score":9,"creation_date":1632478143,"post_id":69192826,"comment_id":122508998,"body_markdown":"This is what worked for me. On macOS, I ran &quot;grep -r -e &#39;\\u0000&#39; ~/.m2&quot; and it yielded the correct resolver-ststus.properties that, after deletion of the dependency, was replaced by a correct one and things worked.","body":"This is what worked for me. On macOS, I ran &quot;grep -r -e &#39;\\u0000&#39; ~/.m2&quot; and it yielded the correct resolver-ststus.properties that, after deletion of the dependency, was replaced by a correct one and things worked."},{"owner":{"account_id":352950,"reputation":126,"user_id":690352,"display_name":"triple.vee"},"score":3,"creation_date":1639366248,"post_id":69192826,"comment_id":124322423,"body_markdown":"I need to brush up on `grep` options. This is more concise than what I did:\n```find  ~/.m2 -name &quot;resolver-status.properties&quot; -print -exec grep &quot;u0&quot; {} \\;```","body":"I need to brush up on <code>grep</code> options. This is more concise than what I did: <code>find  ~&#47;.m2 -name &quot;resolver-status.properties&quot; -print -exec grep &quot;u0&quot; {} \\;</code>"},{"owner":{"account_id":117315,"reputation":3877,"user_id":307295,"display_name":"mvmn"},"score":0,"creation_date":1651236112,"post_id":69192826,"comment_id":127322227,"body_markdown":"For me it was one of the _remote.repositories files that was broken","body":"For me it was one of the _remote.repositories files that was broken"},{"owner":{"account_id":10298913,"reputation":2491,"user_id":7598188,"accept_rate":43,"display_name":"Manish Bansal"},"score":14,"creation_date":1654770281,"post_id":69192826,"comment_id":128173428,"body_markdown":"in case people are struggling in windows, you can run this command inside .m2 directory `FINDSTR /S /M &quot;u0&quot; resolver-status.properties` to findout corrupted files.","body":"in case people are struggling in windows, you can run this command inside .m2 directory <code>FINDSTR &#47;S &#47;M &quot;u0&quot; resolver-status.properties</code> to findout corrupted files."},{"owner":{"account_id":20666714,"reputation":71,"user_id":15173384,"display_name":"jmuth"},"score":0,"creation_date":1658202075,"post_id":69192826,"comment_id":128986574,"body_markdown":"Thanks to Manish Bansal for his help, I was struggling w/ this issue on windows!!","body":"Thanks to Manish Bansal for his help, I was struggling w/ this issue on windows!!"},{"owner":{"account_id":6734,"reputation":3954,"user_id":11451,"accept_rate":82,"display_name":"Kristof Neirynck"},"score":0,"creation_date":1660154193,"post_id":69192826,"comment_id":129468144,"body_markdown":"A combination of all these suggestions: `grep -lrnw ~/.m2/repository --include &#39;resolver-status.properties&#39; -e &#39;\\u0000&#39; | xargs rm`","body":"A combination of all these suggestions: <code>grep -lrnw ~&#47;.m2&#47;repository --include &#39;resolver-status.properties&#39; -e &#39;\\u0000&#39; | xargs rm</code>"},{"owner":{"account_id":2495334,"reputation":181,"user_id":2171938,"display_name":"Rohtash Lakra"},"score":0,"creation_date":1677699243,"post_id":69192826,"comment_id":133391534,"body_markdown":"sometime | xargs rm doesn&#39;t work so better manually delete the folders under ~/m2/com/xyz etc and rebuild the project can help.","body":"sometime | xargs rm doesn&#39;t work so better manually delete the folders under ~/m2/com/xyz etc and rebuild the project can help."}],"tags":[],"owner":{"account_id":10147842,"reputation":2431,"user_id":10100205,"display_name":"Roy van Santen"},"comment_count":7,"down_vote_count":0,"up_vote_count":173,"is_accepted":false,"score":173,"last_activity_date":1655882154,"creation_date":1631707687,"answer_id":69192826,"question_id":68003423,"body_markdown":"For me it turned out to be a corrupted dependency as well.  \r\nI did not want to go through the process of setting up the debugger, so decided to look for files containing `\\u0000` in my `~/.m2` directory by running:\r\n\r\n```\r\ngrep -rnw ~/.m2 -e &#39;\\u0000&#39;\r\n``` \r\nafter that you will get the files which are corrupted, delete those files and then build the maven.\r\n\r\nNote that you have to specify your repository folder if you configured it different to the default. Read your `~/.m2/settings.xml` and use the value from `localRepository` instead. E.g.:\r\n\r\n    &lt;settings&gt;\r\n      &lt;localRepository&gt;/else/where&lt;/localRepository&gt;\r\n\r\nuse:\r\n```\r\ngrep -rnw /else/where -e &#39;\\u0000&#39;\r\n```\r\n\r\nand if you want all these files removed, pipe the file names to `xargs rm`:\r\n```\r\ngrep -lrnw /else/where -e &#39;\\u0000&#39; | xargs rm\r\n```\r\n\r\n\r\n    \r\n","title":"java.lang.IllegalArgumentException: Malformed \\uxxxx encoding while mvn install","body":"<p>For me it turned out to be a corrupted dependency as well.<br />\nI did not want to go through the process of setting up the debugger, so decided to look for files containing <code>\\u0000</code> in my <code>~/.m2</code> directory by running:</p>\n<pre><code>grep -rnw ~/.m2 -e '\\u0000'\n</code></pre>\n<p>after that you will get the files which are corrupted, delete those files and then build the maven.</p>\n<p>Note that you have to specify your repository folder if you configured it different to the default. Read your <code>~/.m2/settings.xml</code> and use the value from <code>localRepository</code> instead. E.g.:</p>\n<pre><code>&lt;settings&gt;\n  &lt;localRepository&gt;/else/where&lt;/localRepository&gt;\n</code></pre>\n<p>use:</p>\n<pre><code>grep -rnw /else/where -e '\\u0000'\n</code></pre>\n<p>and if you want all these files removed, pipe the file names to <code>xargs rm</code>:</p>\n<pre><code>grep -lrnw /else/where -e '\\u0000' | xargs rm\n</code></pre>\n"},{"comments":[{"owner":{"account_id":374852,"reputation":5831,"user_id":725306,"accept_rate":97,"display_name":"Mohammad Faisal"},"score":1,"creation_date":1649936259,"post_id":70301717,"comment_id":127003302,"body_markdown":"That could have worked but not a great choice if you already have a big repo to be downloaded again. Also, this is same answer as https://stackoverflow.com/a/68532125/725306","body":"That could have worked but not a great choice if you already have a big repo to be downloaded again. Also, this is same answer as <a href=\"https://stackoverflow.com/a/68532125/725306\">stackoverflow.com/a/68532125/725306</a>"},{"owner":{"account_id":7117652,"reputation":1968,"user_id":5443319,"accept_rate":0,"display_name":"Ziaullhaq Savanur"},"score":0,"creation_date":1689334204,"post_id":70301717,"comment_id":135202148,"body_markdown":"Windows User: Search for resolver-status.properties files in entire .m2 folder using file-explorer then delete all those searched files and rerun maven command. It will start working","body":"Windows User: Search for resolver-status.properties files in entire .m2 folder using file-explorer then delete all those searched files and rerun maven command. It will start working"}],"tags":[],"owner":{"account_id":22083784,"reputation":99,"user_id":16342956,"display_name":"patel"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1639125103,"creation_date":1639125103,"answer_id":70301717,"question_id":68003423,"body_markdown":"removing .m2 folder and re-installing the dependency worked for me.","title":"java.lang.IllegalArgumentException: Malformed \\uxxxx encoding while mvn install","body":"<p>removing .m2 folder and re-installing the dependency worked for me.</p>\n"},{"comments":[{"owner":{"account_id":117315,"reputation":3877,"user_id":307295,"display_name":"mvmn"},"score":1,"creation_date":1651236157,"post_id":70833675,"comment_id":127322242,"body_markdown":"For me it was one of the _remote.repositories files that was broken","body":"For me it was one of the _remote.repositories files that was broken"},{"owner":{"account_id":3446214,"reputation":379,"user_id":2886980,"display_name":"Rafi"},"score":0,"creation_date":1672926383,"post_id":70833675,"comment_id":132386092,"body_markdown":"Please note that today I&#39;ve found a file that was broken, because it contained just `\\u`, so not only string `\\u0000` may break your files.","body":"Please note that today I&#39;ve found a file that was broken, because it contained just <code>\\u</code>, so not only string <code>\\u0000</code> may break your files."},{"owner":{"account_id":13660046,"reputation":76,"user_id":9855409,"display_name":"Perry45"},"score":0,"creation_date":1675965605,"post_id":70833675,"comment_id":133046289,"body_markdown":"@Rafi It&#39;s total crazy, in my case it breaks with c:\\user\\... while c:\\temp\\... is working only because there is this u check: if(aChar == &#39;u&#39;) in java.util.Property loadConvert() This is some kind of a bug is it???!","body":"@Rafi It&#39;s total crazy, in my case it breaks with c:\\user\\... while c:\\temp\\... is working only because there is this u check: if(aChar == &#39;u&#39;) in java.util.Property loadConvert() This is some kind of a bug is it???!"}],"tags":[],"owner":{"account_id":3446214,"reputation":379,"user_id":2886980,"display_name":"Rafi"},"comment_count":3,"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1649152883,"creation_date":1643026294,"answer_id":70833675,"question_id":68003423,"body_markdown":"Actually most of those answers are correct, but a little bit incomplete. Message shows up, because `resolver-status.properties` files get corrupted and they contain \\u0000 as shown in micycle&#39;s answer. It sometimes helps to delete corrupted files and rerun maven command. Sometimes problem disappears and sometimes not. The question emerges WHY those files get corrupted. Well, it seems that maven contains a bug in resolver: https://issues.apache.org/jira/browse/MRESOLVER-216\r\n\r\nIt seems that synchronization of multiple threads responsible for resolving dependencies is broken and in some conditions multiple threads resolve the same artifact and they break `resolver-status.properties` as shown by micycle.\r\n\r\nIn case your build still does not complete successfully despite deleting broken files you might want to limit resolver threads to one. To do that use JVM property:\r\n\r\n```\r\n-Daether.metadataResolver.threads=1\r\n```\r\n\r\nIf you are using IntelliJ Idea use `Settings-&gt;Build,Execution,Deployment-&gt;Maven-&gt;Runner` field `VMOptions`:\r\n\r\n[![IntelliJ IDEA 2021.3.1][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/YHjb2.png\r\n\r\nAfter making this change remember to delete broken files (or whole `.m2` directory) because once the files become corrupted they won&#39;t be fixed. Then rerun your Maven build.\r\n","title":"java.lang.IllegalArgumentException: Malformed \\uxxxx encoding while mvn install","body":"<p>Actually most of those answers are correct, but a little bit incomplete. Message shows up, because <code>resolver-status.properties</code> files get corrupted and they contain \\u0000 as shown in micycle's answer. It sometimes helps to delete corrupted files and rerun maven command. Sometimes problem disappears and sometimes not. The question emerges WHY those files get corrupted. Well, it seems that maven contains a bug in resolver: <a href=\"https://issues.apache.org/jira/browse/MRESOLVER-216\" rel=\"noreferrer\">https://issues.apache.org/jira/browse/MRESOLVER-216</a></p>\n<p>It seems that synchronization of multiple threads responsible for resolving dependencies is broken and in some conditions multiple threads resolve the same artifact and they break <code>resolver-status.properties</code> as shown by micycle.</p>\n<p>In case your build still does not complete successfully despite deleting broken files you might want to limit resolver threads to one. To do that use JVM property:</p>\n<pre><code>-Daether.metadataResolver.threads=1\n</code></pre>\n<p>If you are using IntelliJ Idea use <code>Settings-&gt;Build,Execution,Deployment-&gt;Maven-&gt;Runner</code> field <code>VMOptions</code>:</p>\n<p><a href=\"https://i.stack.imgur.com/YHjb2.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/YHjb2.png\" alt=\"IntelliJ IDEA 2021.3.1\" /></a></p>\n<p>After making this change remember to delete broken files (or whole <code>.m2</code> directory) because once the files become corrupted they won't be fixed. Then rerun your Maven build.</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":2,"creation_date":1646893642,"post_id":71413458,"comment_id":126237177,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/71413458/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":7812280,"reputation":141,"user_id":5908133,"display_name":"fsimone"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1646846353,"creation_date":1646846353,"answer_id":71413458,"question_id":68003423,"body_markdown":"deleting &quot;resolver-status.properties&quot; under\r\n\r\n\\.m2\\repository\\kr\\motd\\maven\\os-maven-plugin\r\n\r\nresolve problem for me","title":"java.lang.IllegalArgumentException: Malformed \\uxxxx encoding while mvn install","body":"<p>deleting &quot;resolver-status.properties&quot; under</p>\n<p>.m2\\repository\\kr\\motd\\maven\\os-maven-plugin</p>\n<p>resolve problem for me</p>\n"},{"comments":[{"owner":{"account_id":1575525,"reputation":587,"user_id":1462096,"accept_rate":16,"display_name":"b10n1k"},"score":0,"creation_date":1663654592,"post_id":73718437,"comment_id":130284331,"body_markdown":"Although very general answer it could written better to emphasize the solution. I am not sure f rebuild is an actual answer here","body":"Although very general answer it could written better to emphasize the solution. I am not sure f rebuild is an actual answer here"}],"tags":[],"owner":{"account_id":23209048,"reputation":1,"user_id":17302824,"display_name":"SHRAWAN CHOUDHARY"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663796420,"creation_date":1663164998,"answer_id":73718437,"question_id":68003423,"body_markdown":"In my case, when we build the project or run any Maven command for the first time,  dependencies or properties are getting saved in the repository folder (default location: ~/.m2/repository).\r\n\r\nI have used multiple Maven and Java versions in the past, so some files are corrupted or valid for those specific versions.\r\n\r\nI deleted this &quot;repository&quot; folder then built the project with Maven, and this time it built successfully.","title":"java.lang.IllegalArgumentException: Malformed \\uxxxx encoding while mvn install","body":"<p>In my case, when we build the project or run any Maven command for the first time,  dependencies or properties are getting saved in the repository folder (default location: ~/.m2/repository).</p>\n<p>I have used multiple Maven and Java versions in the past, so some files are corrupted or valid for those specific versions.</p>\n<p>I deleted this &quot;repository&quot; folder then built the project with Maven, and this time it built successfully.</p>\n"},{"comments":[{"owner":{"account_id":1711539,"reputation":154,"user_id":1569502,"display_name":"Shaolin"},"score":0,"creation_date":1686319896,"post_id":74700424,"comment_id":134786832,"body_markdown":"Regarding the downvote: I&#39;m the only one who solved this problem with a newer version of maven. It&#39;s also mentioned by other people in comments in this question. The maven resolver was upgraded in 3.8.6 and it looks that it solved the problem.","body":"Regarding the downvote: I&#39;m the only one who solved this problem with a newer version of maven. It&#39;s also mentioned by other people in comments in this question. The maven resolver was upgraded in 3.8.6 and it looks that it solved the problem."}],"tags":[],"owner":{"account_id":1711539,"reputation":154,"user_id":1569502,"display_name":"Shaolin"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1670320212,"creation_date":1670320212,"answer_id":74700424,"question_id":68003423,"body_markdown":"Upgrading from 3.8.1 to 3.8.6 fixed the problem.","title":"java.lang.IllegalArgumentException: Malformed \\uxxxx encoding while mvn install","body":"<p>Upgrading from 3.8.1 to 3.8.6 fixed the problem.</p>\n"},{"tags":[],"owner":{"account_id":26282955,"reputation":96,"user_id":19951158,"display_name":"Evghenii Racila"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1671634509,"creation_date":1671634272,"answer_id":74877831,"question_id":68003423,"body_markdown":"You don&#39;t actually need to delete the whole local maven repo, just the **resolver-status.properties** files in there, for mac:\r\n\r\n```find .m2/ -name resolver-status.properties -delete``` \r\n\r\nworks as a charm. I&#39;ve even added an alias, as I use it pretty frequently, once in a couple of weeks.","title":"java.lang.IllegalArgumentException: Malformed \\uxxxx encoding while mvn install","body":"<p>You don't actually need to delete the whole local maven repo, just the <strong>resolver-status.properties</strong> files in there, for mac:</p>\n<p><code>find .m2/ -name resolver-status.properties -delete</code></p>\n<p>works as a charm. I've even added an alias, as I use it pretty frequently, once in a couple of weeks.</p>\n"},{"tags":[],"owner":{"account_id":27445171,"reputation":1,"user_id":20939095,"display_name":"Mukunda Gaddam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672941102,"creation_date":1672941102,"answer_id":75022473,"question_id":68003423,"body_markdown":"Just do a Global search for  resolver-status.properties and delete that file and restart the IDE. That should resolve the issue.","title":"java.lang.IllegalArgumentException: Malformed \\uxxxx encoding while mvn install","body":"<p>Just do a Global search for  resolver-status.properties and delete that file and restart the IDE. That should resolve the issue.</p>\n"},{"comments":[{"owner":{"account_id":24502728,"reputation":921,"user_id":18418131,"display_name":"mahipalkeizer"},"score":0,"creation_date":1675870080,"post_id":75219393,"comment_id":133021380,"body_markdown":"[FYI] I got malformed issue in one of my dependency while running install in Intellij, i deleted that one resolver-status.properties file. After that i got issue with same file in another dependency. So i ran this command to delete all such resolver-status.properties files and it worked","body":"[FYI] I got malformed issue in one of my dependency while running install in Intellij, i deleted that one resolver-status.properties file. After that i got issue with same file in another dependency. So i ran this command to delete all such resolver-status.properties files and it worked"},{"owner":{"account_id":7117652,"reputation":1968,"user_id":5443319,"accept_rate":0,"display_name":"Ziaullhaq Savanur"},"score":1,"creation_date":1689334125,"post_id":75219393,"comment_id":135202128,"body_markdown":"Windows User: Search for resolver-status.properties files in entire .m2 folder using file-explorer then delete all those searched files and rerun maven command. It will start working","body":"Windows User: Search for resolver-status.properties files in entire .m2 folder using file-explorer then delete all those searched files and rerun maven command. It will start working"},{"owner":{"account_id":1863598,"reputation":1206,"user_id":1687636,"accept_rate":64,"display_name":"Sheldon Wei"},"score":0,"creation_date":1692256328,"post_id":75219393,"comment_id":135599202,"body_markdown":"wow, excellent. work for me","body":"wow, excellent. work for me"}],"tags":[],"owner":{"account_id":24502728,"reputation":921,"user_id":18418131,"display_name":"mahipalkeizer"},"comment_count":3,"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1674551334,"creation_date":1674551334,"answer_id":75219393,"question_id":68003423,"body_markdown":"I wrote an answer for another [Question][1], this is similar issue. Below Solution worked for me.\r\n\r\ngo to your .m2 directory in home directory and for every dependence delete the &quot;resolver-status.properties&quot;. You can do that using \r\n\r\n    find ~/.m2/ -name resolver-status.properties -delete\r\n\r\nIt will find all &quot;resolver-status.properties&quot; and -delete flag will delete them.\r\n\r\nNow reload maven project.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/17043037/ant-malformed-uxxxx-encoding-in-propertyfile-task/71408534#71408534","title":"java.lang.IllegalArgumentException: Malformed \\uxxxx encoding while mvn install","body":"<p>I wrote an answer for another <a href=\"https://stackoverflow.com/questions/17043037/ant-malformed-uxxxx-encoding-in-propertyfile-task/71408534#71408534\">Question</a>, this is similar issue. Below Solution worked for me.</p>\n<p>go to your .m2 directory in home directory and for every dependence delete the &quot;resolver-status.properties&quot;. You can do that using</p>\n<pre><code>find ~/.m2/ -name resolver-status.properties -delete\n</code></pre>\n<p>It will find all &quot;resolver-status.properties&quot; and -delete flag will delete them.</p>\n<p>Now reload maven project.</p>\n"},{"tags":[],"owner":{"account_id":12006973,"reputation":61,"user_id":8785016,"display_name":"Purba"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1675071664,"creation_date":1675071664,"answer_id":75282545,"question_id":68003423,"body_markdown":"Go to .m2 repository, then run the below cmd from there\r\nFINDSTR /S /M &quot;u0&quot; resolver-status.properties\r\nThis will enlist all the corrupted resolver properties files, delete them and you are good to GO!","title":"java.lang.IllegalArgumentException: Malformed \\uxxxx encoding while mvn install","body":"<p>Go to .m2 repository, then run the below cmd from there\nFINDSTR /S /M &quot;u0&quot; resolver-status.properties\nThis will enlist all the corrupted resolver properties files, delete them and you are good to GO!</p>\n"},{"comments":[{"owner":{"account_id":13597048,"reputation":3428,"user_id":9808792,"display_name":"micycle"},"score":2,"creation_date":1699913869,"post_id":76859629,"comment_id":136588361,"body_markdown":"This finds and deletes the files in one (powershell command):\n\nGet-ChildItem -Recurse -Filter &quot;resolver-status.properties&quot; |\n  Select-String -Pattern &quot;u0&quot; |\n  Select-Object -Unique Path |\n  Foreach-Object { Remove-Item $_.Path }","body":"This finds and deletes the files in one (powershell command):  Get-ChildItem -Recurse -Filter &quot;resolver-status.properties&quot; |   Select-String -Pattern &quot;u0&quot; |   Select-Object -Unique Path |   Foreach-Object { Remove-Item $_.Path }"}],"tags":[],"owner":{"account_id":10553380,"reputation":2165,"user_id":10324087,"display_name":"viveknaskar"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1691745089,"creation_date":1691498105,"answer_id":76859629,"question_id":68003423,"body_markdown":"Here is the solution for this issue for Windows users (didn&#39;t see any better solution for Windows users).\r\n\r\nOpen command prompt from .m2/repository/ folder and run the below FINDSTR command:\r\n\r\n    FINDSTR /S /M &quot;u0&quot; resolver-status.properties\r\n\r\nThis command will filter out the resolver-status.properties that has corrupt encoding.\r\n\r\nOnce you find the list of resolver-status.properties files, just delete them and then build your app.","title":"java.lang.IllegalArgumentException: Malformed \\uxxxx encoding while mvn install","body":"<p>Here is the solution for this issue for Windows users (didn't see any better solution for Windows users).</p>\n<p>Open command prompt from .m2/repository/ folder and run the below FINDSTR command:</p>\n<pre><code>FINDSTR /S /M &quot;u0&quot; resolver-status.properties\n</code></pre>\n<p>This command will filter out the resolver-status.properties that has corrupt encoding.</p>\n<p>Once you find the list of resolver-status.properties files, just delete them and then build your app.</p>\n"},{"tags":[],"owner":{"account_id":29385923,"reputation":1,"user_id":22515376,"display_name":"JYHU"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694077889,"creation_date":1694077764,"answer_id":77058150,"question_id":68003423,"body_markdown":"First, switch to directory \r\n```\r\ncd ~/.m2\r\n```\r\nthen execute command line :\r\n```\r\nfind ./ -name resolver-status.properties |xargs -I {} ls -l {}\r\n```\r\nit will delete error files which was created by error building, then it works.","title":"java.lang.IllegalArgumentException: Malformed \\uxxxx encoding while mvn install","body":"<p>First, switch to directory</p>\n<pre><code>cd ~/.m2\n</code></pre>\n<p>then execute command line :</p>\n<pre><code>find ./ -name resolver-status.properties |xargs -I {} ls -l {}\n</code></pre>\n<p>it will delete error files which was created by error building, then it works.</p>\n"}],"owner":{"account_id":8717071,"reputation":1458,"user_id":6521310,"accept_rate":50,"display_name":"Shylajhaa"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":114181,"favorite_count":0,"down_vote_count":0,"up_vote_count":104,"answer_count":17,"score":104,"last_activity_date":1694077889,"creation_date":1623849327,"question_id":68003423,"body_markdown":"While running mvn install in my project, I end up with this error. While a lot of answers and resources point out errors in `/` vs `\\`, I want to mention that I have no local changes and this repo just works fine for others in my team. It worked fine for me as well before.\r\n\r\n*Running on Mac Os 10.15.7 with JDK 1.8.0_291*\r\n\r\nPlease find the full stacktrace:\r\n\r\n```none\r\n[ERROR] Malformed \\uxxxx encoding.\r\njava.lang.IllegalArgumentException: Malformed \\uxxxx encoding.\r\n    at java.util.Properties.loadConvert (Properties.java:672)\r\n    at java.util.Properties.load0 (Properties.java:455)\r\n    at java.util.Properties.load (Properties.java:408)\r\n    at org.eclipse.aether.internal.impl.TrackingFileManager.read (TrackingFileManager.java:56)\r\n    at org.eclipse.aether.internal.impl.DefaultUpdateCheckManager.read (DefaultUpdateCheckManager.java:511)\r\n    at org.eclipse.aether.internal.impl.DefaultUpdateCheckManager.checkMetadata (DefaultUpdateCheckManager.java:250)\r\n    at org.eclipse.aether.internal.impl.DefaultMetadataResolver.resolve (DefaultMetadataResolver.java:302)\r\n    at org.eclipse.aether.internal.impl.DefaultMetadataResolver.resolveMetadata (DefaultMetadataResolver.java:181)\r\n    at org.apache.maven.repository.internal.DefaultVersionRangeResolver.getVersions (DefaultVersionRangeResolver.java:198)\r\n    at org.apache.maven.repository.internal.DefaultVersionRangeResolver.resolveVersionRange (DefaultVersionRangeResolver.java:148)\r\n    at org.apache.maven.repository.internal.DefaultModelResolver.resolveModel (DefaultModelResolver.java:197)\r\n    at org.apache.maven.model.building.DefaultModelBuilder.readParentExternally (DefaultModelBuilder.java:1070)\r\n    at org.apache.maven.model.building.DefaultModelBuilder.readParent (DefaultModelBuilder.java:846)\r\n    at org.apache.maven.model.building.DefaultModelBuilder.build (DefaultModelBuilder.java:337)\r\n    at org.apache.maven.repository.internal.DefaultArtifactDescriptorReader.loadPom (DefaultArtifactDescriptorReader.java:292)\r\n    at org.apache.maven.repository.internal.DefaultArtifactDescriptorReader.readArtifactDescriptor (DefaultArtifactDescriptorReader.java:171)\r\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.resolveCachedArtifactDescriptor (DefaultDependencyCollector.java:538)\r\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.getArtifactDescriptorResult (DefaultDependencyCollector.java:523)\r\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.processDependency (DefaultDependencyCollector.java:410)\r\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.processDependency (DefaultDependencyCollector.java:362)\r\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.process (DefaultDependencyCollector.java:349)\r\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.doRecurse (DefaultDependencyCollector.java:506)\r\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.processDependency (DefaultDependencyCollector.java:458)\r\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.processDependency (DefaultDependencyCollector.java:362)\r\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.process (DefaultDependencyCollector.java:349)\r\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.doRecurse (DefaultDependencyCollector.java:506)\r\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.processDependency (DefaultDependencyCollector.java:458)\r\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.processDependency (DefaultDependencyCollector.java:362)\r\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.process (DefaultDependencyCollector.java:349)\r\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.doRecurse (DefaultDependencyCollector.java:506)\r\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.processDependency (DefaultDependencyCollector.java:458)\r\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.processDependency (DefaultDependencyCollector.java:362)\r\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.process (DefaultDependencyCollector.java:349)\r\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.doRecurse (DefaultDependencyCollector.java:506)\r\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.processDependency (DefaultDependencyCollector.java:458)\r\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.processDependency (DefaultDependencyCollector.java:362)\r\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.process (DefaultDependencyCollector.java:349)\r\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.doRecurse (DefaultDependencyCollector.java:506)\r\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.processDependency (DefaultDependencyCollector.java:458)\r\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.processDependency (DefaultDependencyCollector.java:362)\r\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.process (DefaultDependencyCollector.java:349)\r\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.doRecurse (DefaultDependencyCollector.java:506)\r\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.processDependency (DefaultDependencyCollector.java:458)\r\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.processDependency (DefaultDependencyCollector.java:362)\r\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.process (DefaultDependencyCollector.java:349)\r\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.doRecurse (DefaultDependencyCollector.java:506)\r\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.processDependency (DefaultDependencyCollector.java:458)\r\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.processDependency (DefaultDependencyCollector.java:362)\r\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.process (DefaultDependencyCollector.java:349)\r\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.collectDependencies (DefaultDependencyCollector.java:254)\r\n    at org.eclipse.aether.internal.impl.DefaultRepositorySystem.collectDependencies (DefaultRepositorySystem.java:284)\r\n    at org.apache.maven.project.DefaultProjectDependenciesResolver.resolve (DefaultProjectDependenciesResolver.java:169)\r\n    at org.apache.maven.lifecycle.internal.LifecycleDependencyResolver.getDependencies (LifecycleDependencyResolver.java:243)\r\n    at org.apache.maven.lifecycle.internal.LifecycleDependencyResolver.resolveProjectDependencies (LifecycleDependencyResolver.java:147)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.ensureDependenciesAreResolved (MojoExecutor.java:248)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:202)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)\r\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)\r\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:78)\r\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n    at java.lang.reflect.Method.invoke (Method.java:567)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\r\n[ERROR] \r\n```\r\n\r\nI have already tried the following:\r\n\r\n 1. Reinstalled java on my mac\r\n 2. Reinstalled maven\r\n 3. Tried to invalidate cache and restart IntelliJ multiple times.","title":"java.lang.IllegalArgumentException: Malformed \\uxxxx encoding while mvn install","body":"<p>While running mvn install in my project, I end up with this error. While a lot of answers and resources point out errors in <code>/</code> vs <code>\\</code>, I want to mention that I have no local changes and this repo just works fine for others in my team. It worked fine for me as well before.</p>\n<p><em>Running on Mac Os 10.15.7 with JDK 1.8.0_291</em></p>\n<p>Please find the full stacktrace:</p>\n<pre class=\"lang-none prettyprint-override\"><code>[ERROR] Malformed \\uxxxx encoding.\njava.lang.IllegalArgumentException: Malformed \\uxxxx encoding.\n    at java.util.Properties.loadConvert (Properties.java:672)\n    at java.util.Properties.load0 (Properties.java:455)\n    at java.util.Properties.load (Properties.java:408)\n    at org.eclipse.aether.internal.impl.TrackingFileManager.read (TrackingFileManager.java:56)\n    at org.eclipse.aether.internal.impl.DefaultUpdateCheckManager.read (DefaultUpdateCheckManager.java:511)\n    at org.eclipse.aether.internal.impl.DefaultUpdateCheckManager.checkMetadata (DefaultUpdateCheckManager.java:250)\n    at org.eclipse.aether.internal.impl.DefaultMetadataResolver.resolve (DefaultMetadataResolver.java:302)\n    at org.eclipse.aether.internal.impl.DefaultMetadataResolver.resolveMetadata (DefaultMetadataResolver.java:181)\n    at org.apache.maven.repository.internal.DefaultVersionRangeResolver.getVersions (DefaultVersionRangeResolver.java:198)\n    at org.apache.maven.repository.internal.DefaultVersionRangeResolver.resolveVersionRange (DefaultVersionRangeResolver.java:148)\n    at org.apache.maven.repository.internal.DefaultModelResolver.resolveModel (DefaultModelResolver.java:197)\n    at org.apache.maven.model.building.DefaultModelBuilder.readParentExternally (DefaultModelBuilder.java:1070)\n    at org.apache.maven.model.building.DefaultModelBuilder.readParent (DefaultModelBuilder.java:846)\n    at org.apache.maven.model.building.DefaultModelBuilder.build (DefaultModelBuilder.java:337)\n    at org.apache.maven.repository.internal.DefaultArtifactDescriptorReader.loadPom (DefaultArtifactDescriptorReader.java:292)\n    at org.apache.maven.repository.internal.DefaultArtifactDescriptorReader.readArtifactDescriptor (DefaultArtifactDescriptorReader.java:171)\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.resolveCachedArtifactDescriptor (DefaultDependencyCollector.java:538)\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.getArtifactDescriptorResult (DefaultDependencyCollector.java:523)\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.processDependency (DefaultDependencyCollector.java:410)\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.processDependency (DefaultDependencyCollector.java:362)\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.process (DefaultDependencyCollector.java:349)\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.doRecurse (DefaultDependencyCollector.java:506)\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.processDependency (DefaultDependencyCollector.java:458)\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.processDependency (DefaultDependencyCollector.java:362)\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.process (DefaultDependencyCollector.java:349)\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.doRecurse (DefaultDependencyCollector.java:506)\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.processDependency (DefaultDependencyCollector.java:458)\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.processDependency (DefaultDependencyCollector.java:362)\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.process (DefaultDependencyCollector.java:349)\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.doRecurse (DefaultDependencyCollector.java:506)\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.processDependency (DefaultDependencyCollector.java:458)\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.processDependency (DefaultDependencyCollector.java:362)\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.process (DefaultDependencyCollector.java:349)\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.doRecurse (DefaultDependencyCollector.java:506)\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.processDependency (DefaultDependencyCollector.java:458)\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.processDependency (DefaultDependencyCollector.java:362)\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.process (DefaultDependencyCollector.java:349)\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.doRecurse (DefaultDependencyCollector.java:506)\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.processDependency (DefaultDependencyCollector.java:458)\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.processDependency (DefaultDependencyCollector.java:362)\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.process (DefaultDependencyCollector.java:349)\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.doRecurse (DefaultDependencyCollector.java:506)\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.processDependency (DefaultDependencyCollector.java:458)\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.processDependency (DefaultDependencyCollector.java:362)\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.process (DefaultDependencyCollector.java:349)\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.doRecurse (DefaultDependencyCollector.java:506)\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.processDependency (DefaultDependencyCollector.java:458)\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.processDependency (DefaultDependencyCollector.java:362)\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.process (DefaultDependencyCollector.java:349)\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.collectDependencies (DefaultDependencyCollector.java:254)\n    at org.eclipse.aether.internal.impl.DefaultRepositorySystem.collectDependencies (DefaultRepositorySystem.java:284)\n    at org.apache.maven.project.DefaultProjectDependenciesResolver.resolve (DefaultProjectDependenciesResolver.java:169)\n    at org.apache.maven.lifecycle.internal.LifecycleDependencyResolver.getDependencies (LifecycleDependencyResolver.java:243)\n    at org.apache.maven.lifecycle.internal.LifecycleDependencyResolver.resolveProjectDependencies (LifecycleDependencyResolver.java:147)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.ensureDependenciesAreResolved (MojoExecutor.java:248)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:202)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:78)\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:567)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\n[ERROR] \n</code></pre>\n<p>I have already tried the following:</p>\n<ol>\n<li>Reinstalled java on my mac</li>\n<li>Reinstalled maven</li>\n<li>Tried to invalidate cache and restart IntelliJ multiple times.</li>\n</ol>\n"},{"tags":["java"],"owner":{"account_id":5611077,"reputation":5944,"user_id":4443784,"accept_rate":72,"display_name":"Tom"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694077312,"creation_date":1687146006,"question_id":76503489,"body_markdown":"I am reading the source code AbstractQueuedSynchronizer#ConditionObject of Java 8, I got a question here:\r\n\r\nthe addConditionWaiter method in AbstractQueuedSynchronizer#ConditionObject is defined as follows：\r\n\r\n```java\r\nprivate Node addConditionWaiter() {\r\n    Node t = lastWaiter;\r\n    // If lastWaiter is cancelled, clean out.\r\n    if (t != null &amp;&amp; t.waitStatus != Node.CONDITION) {\r\n        unlinkCancelledWaiters();\r\n        t = lastWaiter;\r\n    }\r\n    Node node = new Node(Thread.currentThread(), Node.CONDITION);\r\n    if (t == null)\r\n        firstWaiter = node;\r\n    else\r\n        t.nextWaiter = node;\r\n    lastWaiter = node;\r\n    return node;\r\n}\r\n```\r\n\r\nI have a question for the following code snippet:\r\n\r\n\r\n```java\r\nNode t = lastWaiter;\r\n// If lastWaiter is cancelled, clean out.\r\nif (t != null &amp;&amp; t.waitStatus != Node.CONDITION) {\r\n    unlinkCancelledWaiters();\r\n    t = lastWaiter;\r\n}\r\n```\r\n\r\nThe comment says: ```If lastWaiter is cancelled, clean out.``` ,why the if check is ```t != null &amp;&amp; t.waitStatus != Node.CONDITION```.\r\n\r\nIt checks lastWaiter&#39;s waitStatus is not Node.CONDITION, it looks it has nothing to do ```If lastWaiter is cancelled, clean out.```","title":"A question about the addConditionWaiter method in AbstractQueuedSynchronizer#ConditionObject","body":"<p>I am reading the source code AbstractQueuedSynchronizer#ConditionObject of Java 8, I got a question here:</p>\n<p>the addConditionWaiter method in AbstractQueuedSynchronizer#ConditionObject is defined as follows：</p>\n<pre class=\"lang-java prettyprint-override\"><code>private Node addConditionWaiter() {\n    Node t = lastWaiter;\n    // If lastWaiter is cancelled, clean out.\n    if (t != null &amp;&amp; t.waitStatus != Node.CONDITION) {\n        unlinkCancelledWaiters();\n        t = lastWaiter;\n    }\n    Node node = new Node(Thread.currentThread(), Node.CONDITION);\n    if (t == null)\n        firstWaiter = node;\n    else\n        t.nextWaiter = node;\n    lastWaiter = node;\n    return node;\n}\n</code></pre>\n<p>I have a question for the following code snippet:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Node t = lastWaiter;\n// If lastWaiter is cancelled, clean out.\nif (t != null &amp;&amp; t.waitStatus != Node.CONDITION) {\n    unlinkCancelledWaiters();\n    t = lastWaiter;\n}\n</code></pre>\n<p>The comment says: <code>If lastWaiter is cancelled, clean out.</code> ,why the if check is <code>t != null &amp;&amp; t.waitStatus != Node.CONDITION</code>.</p>\n<p>It checks lastWaiter's waitStatus is not Node.CONDITION, it looks it has nothing to do <code>If lastWaiter is cancelled, clean out.</code></p>\n"},{"tags":["java","amazon-web-services","aws-cloudformation","amazon-ecs"],"owner":{"account_id":24057171,"reputation":73,"user_id":18034851,"display_name":"GlidingSwords997"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694076940,"creation_date":1694076940,"question_id":77058063,"body_markdown":"I have an ECS service which is created from a CloudFormation yaml code.\r\nNow, i want to delete it, so simply i removed the code block which contained the creation of this stack from the yaml.\r\nBut while deploying that code, the AWS console says that the ECS can&#39;t be deleted while the services are active ??\r\n\r\nShouldn&#39;t the AWS / CloudFormation take care of making the tasks zero and then delete it ??\r\n\r\nIf not, what is the workaround here ?","title":"Delete an ECS stack using Cloudformation yaml code","body":"<p>I have an ECS service which is created from a CloudFormation yaml code.\nNow, i want to delete it, so simply i removed the code block which contained the creation of this stack from the yaml.\nBut while deploying that code, the AWS console says that the ECS can't be deleted while the services are active ??</p>\n<p>Shouldn't the AWS / CloudFormation take care of making the tasks zero and then delete it ??</p>\n<p>If not, what is the workaround here ?</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1694074107,"post_id":77057513,"comment_id":135844028,"body_markdown":"You generally don&#39;t have to worry about unexplained downvotes - especially if they are followed by upvotes. People&#39;s opinions are their own, a single downvote doesn&#39;t mean much.","body":"You generally don&#39;t have to worry about unexplained downvotes - especially if they are followed by upvotes. People&#39;s opinions are their own, a single downvote doesn&#39;t mean much."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1694076202,"post_id":77057513,"comment_id":135844498,"body_markdown":"No. Self referencing would be if you would inject `Course` as a field into the `JavaConfig` or as a constructor argument. As the configuration class would then needed to be constructed to inject the dependency into itself, effectively adding a dependency on itself through this. Using a bean created through an `@Bean` method is not self referencing.","body":"No. Self referencing would be if you would inject <code>Course</code> as a field into the <code>JavaConfig</code> or as a constructor argument. As the configuration class would then needed to be constructed to inject the dependency into itself, effectively adding a dependency on itself through this. Using a bean created through an <code>@Bean</code> method is not self referencing."},{"owner":{"account_id":19439755,"reputation":394,"user_id":14218416,"display_name":"OnlyWick"},"score":1,"creation_date":1694076618,"post_id":77057513,"comment_id":135844576,"body_markdown":"@M.Deinum&#160;Wow, please answer the question instead of comment!! I saw you in the Java top users, can you give me some examples and tell me what I missed? Thank you!!!","body":"@M.Deinum Wow, please answer the question instead of comment!! I saw you in the Java top users, can you give me some examples and tell me what I missed? Thank you!!!"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1694076880,"post_id":77057513,"comment_id":135844636,"body_markdown":"I already wrote an answer... WIth both field and constructor sample.","body":"I already wrote an answer... WIth both field and constructor sample."},{"owner":{"account_id":19439755,"reputation":394,"user_id":14218416,"display_name":"OnlyWick"},"score":0,"creation_date":1694077151,"post_id":77057513,"comment_id":135844689,"body_markdown":"@M.Deinum&#160;Thanks a lot!! And, what does &quot;as opposed to an autowired field in the configuration class&quot; mean?","body":"@M.Deinum Thanks a lot!! And, what does &quot;as opposed to an autowired field in the configuration class&quot; mean?"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1694077930,"post_id":77057513,"comment_id":135844833,"body_markdown":"That is what you are doing in your sample. You aren&#39;t using an autowired field (as in my answer) but just a method argument in your `@Bean` method.","body":"That is what you are doing in your sample. You aren&#39;t using an autowired field (as in my answer) but just a method argument in your <code>@Bean</code> method."}],"answers":[{"comments":[{"owner":{"account_id":19439755,"reputation":394,"user_id":14218416,"display_name":"OnlyWick"},"score":1,"creation_date":1694076010,"post_id":77057728,"comment_id":135844450,"body_markdown":"So, what I expressed is probably correct? I understand that what you said may not be exactly the same 100%, but for example, the `this` keyword itself is a self-reference, and it is similar to what is described in the documentation.","body":"So, what I expressed is probably correct? I understand that what you said may not be exactly the same 100%, but for example, the <code>this</code> keyword itself is a self-reference, and it is similar to what is described in the documentation."},{"owner":{"account_id":12473846,"reputation":98,"user_id":9080974,"display_name":"Herry"},"score":0,"creation_date":1694076124,"post_id":77057728,"comment_id":135844476,"body_markdown":"Yes, the general thought is correct, I was just nitpicking.","body":"Yes, the general thought is correct, I was just nitpicking."},{"owner":{"account_id":19439755,"reputation":394,"user_id":14218416,"display_name":"OnlyWick"},"score":0,"creation_date":1694076140,"post_id":77057728,"comment_id":135844483,"body_markdown":"I still don&#39;t quite understand this sentence: &quot;Either lazily resolve such references in the method signature where it is actually needed (as opposed to an autowired field in the configuration class).&quot; What is this sentence trying to convey?","body":"I still don&#39;t quite understand this sentence: &quot;Either lazily resolve such references in the method signature where it is actually needed (as opposed to an autowired field in the configuration class).&quot; What is this sentence trying to convey?"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1694076289,"post_id":77057728,"comment_id":135844513,"body_markdown":"No you are wrong. This isn&#39;t self referencing in the sense of an `@Configuration` (hence the downvote on this answer).","body":"No you are wrong. This isn&#39;t self referencing in the sense of an <code>@Configuration</code> (hence the downvote on this answer)."},{"owner":{"account_id":19439755,"reputation":394,"user_id":14218416,"display_name":"OnlyWick"},"score":0,"creation_date":1694076321,"post_id":77057728,"comment_id":135844520,"body_markdown":"Specifically, &quot;as opposed to an autowired field in the configuration class&quot; means that `@Autowired` and `@Lazy` are in contrast with each other??","body":"Specifically, &quot;as opposed to an autowired field in the configuration class&quot; means that <code>@Autowired</code> and <code>@Lazy</code> are in contrast with each other??"},{"owner":{"account_id":12473846,"reputation":98,"user_id":9080974,"display_name":"Herry"},"score":0,"creation_date":1694079135,"post_id":77057728,"comment_id":135845112,"body_markdown":"Where am I wrong here specifically? Baeldung as a source is credible as well as the official documentation linked in the question.","body":"Where am I wrong here specifically? Baeldung as a source is credible as well as the official documentation linked in the question."}],"tags":[],"owner":{"account_id":12473846,"reputation":98,"user_id":9080974,"display_name":"Herry"},"comment_count":6,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1694074032,"creation_date":1694074032,"answer_id":77057728,"question_id":77057513,"body_markdown":"&gt; Self-referencing refers to the situation where Bean A calls Bean B within the same configuration class, or when other Beans are used as parameters, right?\r\n\r\nSelf referencing means that you use the bean as an dependency in the class itself, demonstrated on [Baeldung][1]:\r\n\r\n    @Component\r\n    public class MyBean {\r\n        @Autowired\r\n        private MyBean self;\r\n    \r\n        public void doSomething() {\r\n            // use self reference here\r\n        }\r\n    }\r\n\r\nHowever, the snipped you provided in the question talks about Bean methods. These methods provide Beans to the system. Consuming such a Bean in the same class is similar to a self reference, not 100% the same but you run into the same issue: circular dependencies.\r\n\r\n&gt; Regarding this point, I&#39;m not sure how to implement it. Should I add @Lazy? This seems impractical, and I&#39;m not sure if I&#39;m missing any concepts.\r\n\r\nTo resolve circular dependencies you could add @Lazy, this can work but I would not recommend it as startup problems effectively turn into runtime problems if something goes the wrong way. You could move the consuming beans into their own configuration class, thus splitting providers and consumers into two classes which removes the circular dependency.\r\n\r\n\r\n  [1]: https://www.baeldung.com/spring-self-injection","title":"What does &quot;as opposed to an autowired field in the configuration class&quot; mean?","body":"<blockquote>\n<p>Self-referencing refers to the situation where Bean A calls Bean B within the same configuration class, or when other Beans are used as parameters, right?</p>\n</blockquote>\n<p>Self referencing means that you use the bean as an dependency in the class itself, demonstrated on <a href=\"https://www.baeldung.com/spring-self-injection\" rel=\"nofollow noreferrer\">Baeldung</a>:</p>\n<pre><code>@Component\npublic class MyBean {\n    @Autowired\n    private MyBean self;\n\n    public void doSomething() {\n        // use self reference here\n    }\n}\n</code></pre>\n<p>However, the snipped you provided in the question talks about Bean methods. These methods provide Beans to the system. Consuming such a Bean in the same class is similar to a self reference, not 100% the same but you run into the same issue: circular dependencies.</p>\n<blockquote>\n<p>Regarding this point, I'm not sure how to implement it. Should I add @Lazy? This seems impractical, and I'm not sure if I'm missing any concepts.</p>\n</blockquote>\n<p>To resolve circular dependencies you could add @Lazy, this can work but I would not recommend it as startup problems effectively turn into runtime problems if something goes the wrong way. You could move the consuming beans into their own configuration class, thus splitting providers and consumers into two classes which removes the circular dependency.</p>\n"},{"tags":[],"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1694076618,"creation_date":1694076618,"answer_id":77058017,"question_id":77057513,"body_markdown":"You are misunderstanding self-referencing in the case of an `@Configuration` class. Self referencing is when you would inject the `Course` as a field (or constructor argument into the `JavaConfig`. \r\n\r\n```java\r\n@Configuration\r\npublic class JavaConfig {\r\n\r\n @Autowired\r\n private Course course;  \r\n\r\n @Bean\r\n Course course() {\r\n   return new Course();\r\n }\r\n}\r\n```\r\n\r\nNow the `JavaConfig` has a field of type `Course`. Which is constructed by the same `JavaConfig` class. To inject the `course` field it would need to do `new JavaConfig().course()` but the call to `course()` can only done if all dependencies have been injected. Hence the `JavaConfig` effectively has a dependency on itself. \r\n\r\nWith a constructor it would be more visible\r\n\r\n```java\r\n@Configuration\r\npublic class JavaConfig {\r\n\r\n private Course course;  \r\n\r\n public JavaConfig(Course course) {\r\n   this.course=course;\r\n }\r\n\r\n @Bean\r\n Course course() {\r\n   return new Course();\r\n }\r\n}\r\n```\r\n\r\nSpring needs to be able to call the `course()` method to fulfill the constuctor argument, but to do so it needs to construct a `JavaConfig` which is now impossible. \r\n\r\nMarking the field/argument with `@Lazy` will circumvent this as it will delay the injection of the actual `Course` until it is actually needed (i.e. methods are called on it). Until then it will inject a proxy for the `Course` object.\r\n\r\nMaking the `course()` bean method `static` will also solve it as you don&#39;t need an instance of `JavaConfig` to call the `course()` method because of the `static` nature. ","title":"What does &quot;as opposed to an autowired field in the configuration class&quot; mean?","body":"<p>You are misunderstanding self-referencing in the case of an <code>@Configuration</code> class. Self referencing is when you would inject the <code>Course</code> as a field (or constructor argument into the <code>JavaConfig</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class JavaConfig {\n\n @Autowired\n private Course course;  \n\n @Bean\n Course course() {\n   return new Course();\n }\n}\n</code></pre>\n<p>Now the <code>JavaConfig</code> has a field of type <code>Course</code>. Which is constructed by the same <code>JavaConfig</code> class. To inject the <code>course</code> field it would need to do <code>new JavaConfig().course()</code> but the call to <code>course()</code> can only done if all dependencies have been injected. Hence the <code>JavaConfig</code> effectively has a dependency on itself.</p>\n<p>With a constructor it would be more visible</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class JavaConfig {\n\n private Course course;  \n\n public JavaConfig(Course course) {\n   this.course=course;\n }\n\n @Bean\n Course course() {\n   return new Course();\n }\n}\n</code></pre>\n<p>Spring needs to be able to call the <code>course()</code> method to fulfill the constuctor argument, but to do so it needs to construct a <code>JavaConfig</code> which is now impossible.</p>\n<p>Marking the field/argument with <code>@Lazy</code> will circumvent this as it will delay the injection of the actual <code>Course</code> until it is actually needed (i.e. methods are called on it). Until then it will inject a proxy for the <code>Course</code> object.</p>\n<p>Making the <code>course()</code> bean method <code>static</code> will also solve it as you don't need an instance of <code>JavaConfig</code> to call the <code>course()</code> method because of the <code>static</code> nature.</p>\n"}],"owner":{"account_id":19439755,"reputation":394,"user_id":14218416,"display_name":"OnlyWick"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"accepted_answer_id":77058017,"answer_count":2,"score":3,"last_activity_date":1694076618,"creation_date":1694072330,"question_id":77057513,"body_markdown":"[Documentation is here!](https://docs.spring.io/spring-framework/reference/core/beans/annotation-config/autowired-qualifiers.html)\r\n\r\nI can&#39;t understand the bold part of the following sentence, ...maybe entire sentence :(\r\n\r\n&gt; Trying to inject the results from @Bean methods on the same configuration class is effectively a self-reference scenario as well. **Either lazily resolve such references in the method signature where it is actually needed (as opposed to an autowired field in the configuration class) or declare the affected @Bean methods as static, decoupling them from the containing configuration class instance and its lifecycle.** Otherwise, such beans are only considered in the fallback phase, with matching beans on other configuration classes selected as primary candidates instead (if available).\r\n\r\n**To ensure that I understand this sentence correctly, let me first explain my understanding.**\r\n\r\nSelf-referencing refers to the situation where Bean A calls Bean B within the same configuration class, or when other Beans are used as parameters, right?\r\n\r\nLike this.\r\n\r\n```java\r\n@Configuration\r\npublic class JavaConfig {\r\n    @Bean\r\n    Course course() {\r\n        Course course = new Course();\r\n\r\n        return course;\r\n    }\r\n\r\n    @Bean\r\n    Teacher teacher(Course course) {    // self-reference\r\n        Teacher teacher = new Teacher();\r\n        Course course1 = course();      // self-reference\r\n        System.out.println(course);\r\n        teacher.setCourse(course);\r\n\r\n        return teacher;\r\n    }\r\n\r\n    @Bean\r\n    String[] courseList() {\r\n        String[] cs = {&quot;OS&quot;, &quot;Network&quot;};\r\n\r\n        return cs;\r\n    }\r\n}\r\n```\r\n\r\n```java\r\npublic class Course {\r\n    @Resource(name = &quot;courseList&quot;)\r\n    private String[] courseList;\r\n}\r\n\r\npublic class Teacher {\r\n    private Course course;\r\n    public void setCourse(Course course) {\r\n        this.course = course;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;Teacher{&quot; +\r\n                &quot;course=&quot; + course +\r\n                &#39;}&#39;;\r\n    }\r\n}\r\n```\r\n\r\nIf my concept description above is correct, then I can proceed with the solution as described in the documentation.\r\n\r\n1. declare the affected @Bean methods as static.\r\n\r\n   I think this should be correct, `CGLIB` directly invoke `static Course course` method, rather than invoke `proxy object`.\r\n\r\n```java\r\n@Configuration\r\npublic class JavaConfig {\r\n    @Bean\r\n    static Course course() {  // add static qualifier\r\n        Course course = new Course();\r\n\r\n        return course;\r\n    }\r\n\r\n    // ...\r\n}\r\n```\r\n\r\n2. Either lazily resolve such references in the method signature where it is actually needed(**as opposed to an autowired field in the configuration class**)\r\n\r\n   Regarding this point, I&#39;m not sure how to implement it. Should I add `@Lazy`? This seems impractical, and I&#39;m not sure if I&#39;m missing any concepts.\r\n","title":"What does &quot;as opposed to an autowired field in the configuration class&quot; mean?","body":"<p><a href=\"https://docs.spring.io/spring-framework/reference/core/beans/annotation-config/autowired-qualifiers.html\" rel=\"nofollow noreferrer\">Documentation is here!</a></p>\n<p>I can't understand the bold part of the following sentence, ...maybe entire sentence :(</p>\n<blockquote>\n<p>Trying to inject the results from @Bean methods on the same configuration class is effectively a self-reference scenario as well. <strong>Either lazily resolve such references in the method signature where it is actually needed (as opposed to an autowired field in the configuration class) or declare the affected @Bean methods as static, decoupling them from the containing configuration class instance and its lifecycle.</strong> Otherwise, such beans are only considered in the fallback phase, with matching beans on other configuration classes selected as primary candidates instead (if available).</p>\n</blockquote>\n<p><strong>To ensure that I understand this sentence correctly, let me first explain my understanding.</strong></p>\n<p>Self-referencing refers to the situation where Bean A calls Bean B within the same configuration class, or when other Beans are used as parameters, right?</p>\n<p>Like this.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class JavaConfig {\n    @Bean\n    Course course() {\n        Course course = new Course();\n\n        return course;\n    }\n\n    @Bean\n    Teacher teacher(Course course) {    // self-reference\n        Teacher teacher = new Teacher();\n        Course course1 = course();      // self-reference\n        System.out.println(course);\n        teacher.setCourse(course);\n\n        return teacher;\n    }\n\n    @Bean\n    String[] courseList() {\n        String[] cs = {&quot;OS&quot;, &quot;Network&quot;};\n\n        return cs;\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class Course {\n    @Resource(name = &quot;courseList&quot;)\n    private String[] courseList;\n}\n\npublic class Teacher {\n    private Course course;\n    public void setCourse(Course course) {\n        this.course = course;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Teacher{&quot; +\n                &quot;course=&quot; + course +\n                '}';\n    }\n}\n</code></pre>\n<p>If my concept description above is correct, then I can proceed with the solution as described in the documentation.</p>\n<ol>\n<li><p>declare the affected @Bean methods as static.</p>\n<p>I think this should be correct, <code>CGLIB</code> directly invoke <code>static Course course</code> method, rather than invoke <code>proxy object</code>.</p>\n</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class JavaConfig {\n    @Bean\n    static Course course() {  // add static qualifier\n        Course course = new Course();\n\n        return course;\n    }\n\n    // ...\n}\n</code></pre>\n<ol start=\"2\">\n<li><p>Either lazily resolve such references in the method signature where it is actually needed(<strong>as opposed to an autowired field in the configuration class</strong>)</p>\n<p>Regarding this point, I'm not sure how to implement it. Should I add <code>@Lazy</code>? This seems impractical, and I'm not sure if I'm missing any concepts.</p>\n</li>\n</ol>\n"},{"tags":["java","maven","tomcat","maven-shade-plugin"],"answers":[{"comments":[{"owner":{"account_id":6228446,"reputation":134,"user_id":4845980,"display_name":"Dimitar"},"score":0,"creation_date":1430308014,"post_id":29942277,"comment_id":48006269,"body_markdown":"Thanks for the hint. I did check the documentation, and I tried quite a few different settings and cases. None of them seemed to work, and there&#39;s even a bug report for that parameter stating it does not work.","body":"Thanks for the hint. I did check the documentation, and I tried quite a few different settings and cases. None of them seemed to work, and there&#39;s even a bug report for that parameter stating it does not work."}],"tags":[],"owner":{"account_id":238157,"reputation":37489,"user_id":506855,"accept_rate":47,"display_name":"Puce"},"comment_count":1,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1430306649,"creation_date":1430306649,"answer_id":29942277,"question_id":29941730,"body_markdown":"I&#39;m not very familiar with this plugin, but the best place for finding solutions to these kinds of problems is to have a look at the [plugin/ goal documentation][1].\r\n\r\nI guess the parameter [keepDependenciesWithProvidedScope][2] is what you are looking for.\r\n\r\n\r\n  [1]: https://maven.apache.org/plugins/maven-shade-plugin/shade-mojo.html\r\n  [2]: https://maven.apache.org/plugins/maven-shade-plugin/shade-mojo.html#keepDependenciesWithProvidedScope","title":"How do you use the maven shade plugin to include only specific classes from a dependency with scope &quot;provided&quot;?","body":"<p>I'm not very familiar with this plugin, but the best place for finding solutions to these kinds of problems is to have a look at the <a href=\"https://maven.apache.org/plugins/maven-shade-plugin/shade-mojo.html\" rel=\"nofollow\">plugin/ goal documentation</a>.</p>\n\n<p>I guess the parameter <a href=\"https://maven.apache.org/plugins/maven-shade-plugin/shade-mojo.html#keepDependenciesWithProvidedScope\" rel=\"nofollow\">keepDependenciesWithProvidedScope</a> is what you are looking for.</p>\n"},{"tags":[],"owner":{"account_id":6179607,"reputation":583,"user_id":4815537,"display_name":"Mahieddine M. Ichir"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1434016633,"creation_date":1434016633,"answer_id":30777492,"question_id":29941730,"body_markdown":"I had the same issue and If I can suggest a solution it would be to use the [maven-assembly-plugin][1] which will address your problem :\r\n\r\n            &lt;plugin&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;2.5.5&lt;/version&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;id&gt;jar-with-dependencies&lt;/id&gt;\r\n\t\t\t\t\t\t&lt;phase&gt;package&lt;/phase&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;single&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t\t&lt;descriptors&gt;\r\n\t\t\t\t\t\t\t\t&lt;descriptor&gt;src/main/assembly/assembly.xml&lt;/descriptor&gt;\r\n\t\t\t\t\t\t\t&lt;/descriptors&gt;\r\n\t\t\t\t\t\t\t&lt;archive&gt;\r\n\t\t\t\t\t\t\t\t&lt;manifest&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;mainClass&gt;com.mypackage.MainClass&lt;/mainClass&gt;\r\n\t\t\t\t\t\t\t\t&lt;/manifest&gt;\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t&lt;/archive&gt;\r\n\t\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\r\nAnd here is a sample of the assembly.xml which will allow you include &quot;provided&quot; scope artifacts:\r\n\r\n    &lt;assembly\r\n\txmlns=&quot;http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.3&quot;\r\n\txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.3 http://maven.apache.org/xsd/assembly-1.1.3.xsd&quot;&gt;\r\n\t&lt;id&gt;jar-with-dependencies&lt;/id&gt;\r\n\t&lt;formats&gt;\r\n\t\t&lt;format&gt;jar&lt;/format&gt;\r\n\t&lt;/formats&gt;\r\n\t\r\n\t&lt;includeBaseDirectory&gt;false&lt;/includeBaseDirectory&gt;\r\n\t&lt;dependencySets&gt;\r\n\t\t&lt;dependencySet&gt;\r\n\t\t\t&lt;outputDirectory&gt;/&lt;/outputDirectory&gt;\r\n\t\t\t&lt;useProjectArtifact&gt;true&lt;/useProjectArtifact&gt;\r\n\t\t\t&lt;unpack&gt;true&lt;/unpack&gt;\r\n\t\t&lt;/dependencySet&gt;\r\n\t\t&lt;dependencySet&gt;\r\n\t\t\t&lt;outputDirectory&gt;/lib&lt;/outputDirectory&gt;\r\n\t\t\t&lt;useProjectArtifact&gt;false&lt;/useProjectArtifact&gt;\r\n\t\t\t&lt;unpack&gt;false&lt;/unpack&gt;\r\n\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependencySet&gt;\r\n\t&lt;/dependencySets&gt;\r\n&lt;/assembly&gt;\r\n\r\nI&#39;am just having classpath issues in the generated artifact in the Manifest file!\r\n\r\n\r\n  [1]: http://maven.apache.org/plugins/maven-assembly-plugin/usage.html","title":"How do you use the maven shade plugin to include only specific classes from a dependency with scope &quot;provided&quot;?","body":"<p>I had the same issue and If I can suggest a solution it would be to use the <a href=\"http://maven.apache.org/plugins/maven-assembly-plugin/usage.html\" rel=\"nofollow\">maven-assembly-plugin</a> which will address your problem :</p>\n\n<pre><code>        &lt;plugin&gt;\n            &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.5.5&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;jar-with-dependencies&lt;/id&gt;\n                    &lt;phase&gt;package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;single&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;descriptors&gt;\n                            &lt;descriptor&gt;src/main/assembly/assembly.xml&lt;/descriptor&gt;\n                        &lt;/descriptors&gt;\n                        &lt;archive&gt;\n                            &lt;manifest&gt;\n                                &lt;mainClass&gt;com.mypackage.MainClass&lt;/mainClass&gt;\n                            &lt;/manifest&gt;                             \n                        &lt;/archive&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n</code></pre>\n\n<p>And here is a sample of the assembly.xml which will allow you include \"provided\" scope artifacts:</p>\n\n<pre><code>&lt;assembly\nxmlns=\"http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.3\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxsi:schemaLocation=\"http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.3 http://maven.apache.org/xsd/assembly-1.1.3.xsd\"&gt;\n&lt;id&gt;jar-with-dependencies&lt;/id&gt;\n&lt;formats&gt;\n    &lt;format&gt;jar&lt;/format&gt;\n&lt;/formats&gt;\n\n&lt;includeBaseDirectory&gt;false&lt;/includeBaseDirectory&gt;\n&lt;dependencySets&gt;\n    &lt;dependencySet&gt;\n        &lt;outputDirectory&gt;/&lt;/outputDirectory&gt;\n        &lt;useProjectArtifact&gt;true&lt;/useProjectArtifact&gt;\n        &lt;unpack&gt;true&lt;/unpack&gt;\n    &lt;/dependencySet&gt;\n    &lt;dependencySet&gt;\n        &lt;outputDirectory&gt;/lib&lt;/outputDirectory&gt;\n        &lt;useProjectArtifact&gt;false&lt;/useProjectArtifact&gt;\n        &lt;unpack&gt;false&lt;/unpack&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependencySet&gt;\n&lt;/dependencySets&gt;\n</code></pre>\n\n<p></p>\n\n<p>I'am just having classpath issues in the generated artifact in the Manifest file!</p>\n"},{"tags":[],"owner":{"account_id":3710550,"reputation":847,"user_id":3087999,"display_name":"vipcxj"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1645892494,"creation_date":1645892494,"answer_id":71278328,"question_id":29941730,"body_markdown":"I had the same issue, but I found we misunderstood how this plug-in works. If some dependencies are bundled into the shaded jar, they will be removed from the dependencies in the pom.xml in the shaded jar. So you should change nothing, just left their scope runtime. ","title":"How do you use the maven shade plugin to include only specific classes from a dependency with scope &quot;provided&quot;?","body":"<p>I had the same issue, but I found we misunderstood how this plug-in works. If some dependencies are bundled into the shaded jar, they will be removed from the dependencies in the pom.xml in the shaded jar. So you should change nothing, just left their scope runtime.</p>\n"},{"comments":[{"owner":{"account_id":2375368,"reputation":4423,"user_id":2078908,"display_name":"ursa"},"score":0,"creation_date":1694076544,"post_id":73339573,"comment_id":135844560,"body_markdown":"these settings doesn&#39;t solve the problem in Q","body":"these settings doesn&#39;t solve the problem in Q"}],"tags":[],"owner":{"account_id":8733,"reputation":5830,"user_id":15882,"accept_rate":100,"display_name":"Jarett Millard"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1660336790,"creation_date":1660336790,"answer_id":73339573,"question_id":29941730,"body_markdown":"The configuration setting you need is `&lt;useDependencyReducedPomInJar&gt;true&lt;/useDependencyReducedPomInJar&gt;`. This will create a file named `dependency-reduced-pom.xml` with the references to the shaded jar(s) removed. You can also use `&lt;promoteTransitiveDependencies&gt;true&lt;/promoteTransitiveDependencies&gt;` if the shaded jars have their own transitive dependencies to add them to the modified pom.","title":"How do you use the maven shade plugin to include only specific classes from a dependency with scope &quot;provided&quot;?","body":"<p>The configuration setting you need is <code>&lt;useDependencyReducedPomInJar&gt;true&lt;/useDependencyReducedPomInJar&gt;</code>. This will create a file named <code>dependency-reduced-pom.xml</code> with the references to the shaded jar(s) removed. You can also use <code>&lt;promoteTransitiveDependencies&gt;true&lt;/promoteTransitiveDependencies&gt;</code> if the shaded jars have their own transitive dependencies to add them to the modified pom.</p>\n"},{"tags":[],"owner":{"account_id":2375368,"reputation":4423,"user_id":2078908,"display_name":"ursa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694076462,"creation_date":1694076462,"answer_id":77057999,"question_id":29941730,"body_markdown":"Same issue solved with a separate module\r\n```\r\n...\r\n&lt;artifactId&gt;subset-of-tomcat-catalina-classes&lt;/artifactId&gt;\r\n\r\n&lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\r\n        &lt;artifactId&gt;tomcat-catalina&lt;/artifactId&gt;\r\n        &lt;version&gt;7.0.59&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n&lt;/dependencies&gt;\r\n&lt;build&gt;\r\n    &lt;plugins&gt;\r\n        &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n            &lt;executions&gt;\r\n                &lt;execution&gt;\r\n                    &lt;phase&gt;package&lt;/phase&gt;\r\n                    &lt;goals&gt;\r\n                        &lt;goal&gt;shade&lt;/goal&gt;\r\n                    &lt;/goals&gt;\r\n                    ...\r\n```\r\n\r\nThen in main module:\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\r\n    &lt;artifactId&gt;tomcat-catalina&lt;/artifactId&gt;\r\n    &lt;version&gt;7.0.59&lt;/version&gt;\r\n    &lt;scope&gt;provided&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;${project.groupId&gt;&lt;/groupId&gt;\r\n    &lt;artifactId&gt;subset-of-tomcat-catalina-classes&lt;/artifactId&gt;\r\n    &lt;version&gt;${project.version}&lt;/version&gt;\r\n    &lt;!-- classes relocated =&gt; compile scope --&gt;\r\n&lt;/dependency&gt;\r\n```","title":"How do you use the maven shade plugin to include only specific classes from a dependency with scope &quot;provided&quot;?","body":"<p>Same issue solved with a separate module</p>\n<pre><code>...\n&lt;artifactId&gt;subset-of-tomcat-catalina-classes&lt;/artifactId&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\n        &lt;artifactId&gt;tomcat-catalina&lt;/artifactId&gt;\n        &lt;version&gt;7.0.59&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;phase&gt;package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;shade&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    ...\n</code></pre>\n<p>Then in main module:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\n    &lt;artifactId&gt;tomcat-catalina&lt;/artifactId&gt;\n    &lt;version&gt;7.0.59&lt;/version&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;${project.groupId&gt;&lt;/groupId&gt;\n    &lt;artifactId&gt;subset-of-tomcat-catalina-classes&lt;/artifactId&gt;\n    &lt;version&gt;${project.version}&lt;/version&gt;\n    &lt;!-- classes relocated =&gt; compile scope --&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":6228446,"reputation":134,"user_id":4845980,"display_name":"Dimitar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":6304,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":5,"score":5,"last_activity_date":1694076462,"creation_date":1430305173,"question_id":29941730,"body_markdown":"I am using the maven shade plugin to package my application into a jar file. One of my dependencies is to Tomcat:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\r\n        &lt;artifactId&gt;tomcat-catalina&lt;/artifactId&gt;\r\n        &lt;version&gt;7.0.59&lt;/version&gt;\r\n        &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\nThe scope of this dependency is **provided** as the container itself will supply its JAR files. However, I do need to add a few single classes from this dependency to my JAR file. I tried adding a filter and specifying the name of the class that is to be added, but it seems that **provided** dependencies are ignored by the shade plugin.\r\n\r\n    &lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;2.3&lt;/version&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;phase&gt;package&lt;/phase&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;shade&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t\t&lt;filters&gt;\r\n\t\t\t\t\t\t\t\t&lt;filter&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;artifact&gt;org.apache.tomcat:tomcat-catalina&lt;/artifact&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;includes&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;include&gt;org/apache/catalina/deploy/LoginConfig.class&lt;/include&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;/includes&gt;\r\n\t\t\t\t\t\t\t\t&lt;/filter&gt;\r\n\t\t\t\t\t\t\t&lt;/filters&gt;\r\n\t\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\nAny ideas how what I need can be achieved?","title":"How do you use the maven shade plugin to include only specific classes from a dependency with scope &quot;provided&quot;?","body":"<p>I am using the maven shade plugin to package my application into a jar file. One of my dependencies is to Tomcat:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\n    &lt;artifactId&gt;tomcat-catalina&lt;/artifactId&gt;\n    &lt;version&gt;7.0.59&lt;/version&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>The scope of this dependency is <strong>provided</strong> as the container itself will supply its JAR files. However, I do need to add a few single classes from this dependency to my JAR file. I tried adding a filter and specifying the name of the class that is to be added, but it seems that <strong>provided</strong> dependencies are ignored by the shade plugin.</p>\n\n<pre><code>&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.3&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;phase&gt;package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;shade&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;filters&gt;\n                            &lt;filter&gt;\n                                &lt;artifact&gt;org.apache.tomcat:tomcat-catalina&lt;/artifact&gt;\n                                &lt;includes&gt;\n                                    &lt;include&gt;org/apache/catalina/deploy/LoginConfig.class&lt;/include&gt;\n                                &lt;/includes&gt;\n                            &lt;/filter&gt;\n                        &lt;/filters&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p>Any ideas how what I need can be achieved?</p>\n"},{"tags":["java","android","flutter"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":1,"creation_date":1693903256,"post_id":77042967,"comment_id":135817299,"body_markdown":"Just to be clear: you&#39;re saying that you have **no** stacktrace?","body":"Just to be clear: you&#39;re saying that you have <b>no</b> stacktrace?"},{"owner":{"account_id":8049065,"reputation":804,"user_id":6068297,"display_name":"Level_Up"},"score":0,"creation_date":1693903924,"post_id":77042967,"comment_id":135817410,"body_markdown":"Did you double check if the path that you are giving exist? Maybe you have typo there and that why you can not load your icon","body":"Did you double check if the path that you are giving exist? Maybe you have typo there and that why you can not load your icon"},{"owner":{"account_id":4461861,"reputation":33,"user_id":8016440,"display_name":"user8016440"},"score":0,"creation_date":1693906977,"post_id":77042967,"comment_id":135817950,"body_markdown":"No stacktrace: &quot;Could not find an option named &quot;stacktrace&quot;.&quot;\nWith the icon, it was just typing in &quot;help&quot; where it had been &quot;build&quot; or something similar. The icon is visible beside the line numbers, it just decided not to work.\n\nLooking at solutions that have something to do with calling &quot;databaseFactory,&quot; but I have the feeling it is some kind of update issue: some parts are out of sync.","body":"No stacktrace: &quot;Could not find an option named &quot;stacktrace&quot;.&quot; With the icon, it was just typing in &quot;help&quot; where it had been &quot;build&quot; or something similar. The icon is visible beside the line numbers, it just decided not to work.  Looking at solutions that have something to do with calling &quot;databaseFactory,&quot; but I have the feeling it is some kind of update issue: some parts are out of sync."},{"owner":{"account_id":4461861,"reputation":33,"user_id":8016440,"display_name":"user8016440"},"score":0,"creation_date":1693909229,"post_id":77042967,"comment_id":135818383,"body_markdown":"I don&#39;t know how I did it, or what I did, but after repeated updates, doctor, clean, etc., I somehow seem to have got it to work... and will try to rebuild on what I have.","body":"I don&#39;t know how I did it, or what I did, but after repeated updates, doctor, clean, etc., I somehow seem to have got it to work... and will try to rebuild on what I have."},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1693913516,"post_id":77042967,"comment_id":135819251,"body_markdown":"you can execute gradle commands manually on the terminal like `./gradlew assembleDebug`. There you can add the stacktrace parameter.","body":"you can execute gradle commands manually on the terminal like <code>.&#47;gradlew assembleDebug</code>. There you can add the stacktrace parameter."},{"owner":{"account_id":4461861,"reputation":33,"user_id":8016440,"display_name":"user8016440"},"score":0,"creation_date":1693913641,"post_id":77042967,"comment_id":135819279,"body_markdown":"Tried that:\n\n./gradlew : The term &#39;./gradlew&#39; is not recognized as the name of a cmdlet, function, script file, or operable program. Check the spelling of the name, or if a path was included, verify that the path is correct and try again.\nAt line:1 char:1                                                                             \n+ ./gradlew assembleDebug","body":"Tried that:  ./gradlew : The term &#39;./gradlew&#39; is not recognized as the name of a cmdlet, function, script file, or operable program. Check the spelling of the name, or if a path was included, verify that the path is correct and try again. At line:1 char:1                                                                              + ./gradlew assembleDebug"}],"answers":[{"comments":[{"owner":{"account_id":4461861,"reputation":33,"user_id":8016440,"display_name":"user8016440"},"score":0,"creation_date":1693916953,"post_id":77044317,"comment_id":135820008,"body_markdown":"Did all of those; even rebooted.\nThink what happened is that some of the updates were out of sync. Updating the SDK might be the one that tipped it, though.","body":"Did all of those; even rebooted. Think what happened is that some of the updates were out of sync. Updating the SDK might be the one that tipped it, though."},{"owner":{"account_id":4461861,"reputation":33,"user_id":8016440,"display_name":"user8016440"},"score":0,"creation_date":1693918122,"post_id":77044317,"comment_id":135820303,"body_markdown":"And now the error is back again...","body":"And now the error is back again..."}],"tags":[],"owner":{"account_id":26840344,"reputation":134,"user_id":20426969,"display_name":"Sarmad Ali"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693915168,"creation_date":1693915168,"answer_id":77044317,"question_id":77042967,"body_markdown":"Try These;\r\n\r\n1:Clean and Rebuild Your Project.\r\n\r\n&gt; In Android Studio, try cleaning and rebuilding your Flutter project.\r\n&gt; Go to &quot;Build&quot; &gt; &quot;Clean Project&quot; and then &quot;Build&quot; &gt; &quot;Rebuild Project.&quot;\r\n&gt; This can sometimes resolve build-related issues.\r\n\r\n2:Check Your Project Configuration:\r\n\r\n&gt; Review your project&#39;s configuration files, such as pubspec.yaml, and\r\n&gt; make sure there are no syntax errors or inconsistencies in your\r\n&gt; Flutter project setup. Also, ensure that the Flutter SDK path in\r\n&gt; Android Studio is correctly configured.\r\n\r\n3:Check for Changes in Dependencies:\r\n\r\n&gt; If you recently made changes to your project&#39;s dependencies (e.g.,\r\n&gt; added or updated packages), make sure that those changes are correctly\r\n&gt; reflected in your pubspec.yaml file. Sometimes, issues can arise from\r\n&gt; conflicting or outdated dependencies.\r\n\r\n4:Check Gradle Configuration:\r\n\r\n&gt; Inspect your project&#39;s Gradle files (usually found in the android\r\n&gt; directory) to ensure there are no issues with Gradle configurations.\r\n&gt; Pay attention to any custom Gradle tasks or scripts that may be\r\n&gt; causing problems.\r\n\r\n5:Update Flutter:\r\n\r\n&gt; Ensure that you are using the latest version of Flutter by running\r\n&gt; flutter upgrade in your terminal. Outdated Flutter versions can\r\n&gt; sometimes lead to compatibility issues.\r\n\r\n6:Check Flutter Doctor:\r\n\r\n&gt; Run Flutter Doctor in your terminal to check for any issues with your\r\n&gt; Flutter installation. It will provide feedback on potential problems\r\n&gt; and suggest solutions.\r\n\r\n7:Check for IDE Updates:\r\n\r\n&gt; Ensure that Android Studio and any Flutter-related plugins or\r\n&gt; extensions are up-to-date. Sometimes, updating Android Studio or the\r\n&gt; Flutter plugin can resolve build issues.\r\n\r\n8:Check for System Environment Variables:\r\n\r\n&gt; Occasionally, issues can arise from incorrect system environment\r\n&gt; variables or paths. Ensure that your system&#39;s PATH variable includes\r\n&gt; the correct paths to your Flutter and Java installations.\r\n\r\n9: Reimport the Project:\r\n\r\n&gt; In Android Studio, you can try reimporting the project. Go to &quot;File&quot; &gt;\r\n&gt; &quot;Invalidate Caches / Restart,&quot; and then select &quot;Invalidate and\r\n&gt; Restart.&quot; This can help refresh the project&#39;s settings.\r\n\r\n","title":"Is this a java problem or a problem with flutter?","body":"<p>Try These;</p>\n<p>1:Clean and Rebuild Your Project.</p>\n<blockquote>\n<p>In Android Studio, try cleaning and rebuilding your Flutter project.\nGo to &quot;Build&quot; &gt; &quot;Clean Project&quot; and then &quot;Build&quot; &gt; &quot;Rebuild Project.&quot;\nThis can sometimes resolve build-related issues.</p>\n</blockquote>\n<p>2:Check Your Project Configuration:</p>\n<blockquote>\n<p>Review your project's configuration files, such as pubspec.yaml, and\nmake sure there are no syntax errors or inconsistencies in your\nFlutter project setup. Also, ensure that the Flutter SDK path in\nAndroid Studio is correctly configured.</p>\n</blockquote>\n<p>3:Check for Changes in Dependencies:</p>\n<blockquote>\n<p>If you recently made changes to your project's dependencies (e.g.,\nadded or updated packages), make sure that those changes are correctly\nreflected in your pubspec.yaml file. Sometimes, issues can arise from\nconflicting or outdated dependencies.</p>\n</blockquote>\n<p>4:Check Gradle Configuration:</p>\n<blockquote>\n<p>Inspect your project's Gradle files (usually found in the android\ndirectory) to ensure there are no issues with Gradle configurations.\nPay attention to any custom Gradle tasks or scripts that may be\ncausing problems.</p>\n</blockquote>\n<p>5:Update Flutter:</p>\n<blockquote>\n<p>Ensure that you are using the latest version of Flutter by running\nflutter upgrade in your terminal. Outdated Flutter versions can\nsometimes lead to compatibility issues.</p>\n</blockquote>\n<p>6:Check Flutter Doctor:</p>\n<blockquote>\n<p>Run Flutter Doctor in your terminal to check for any issues with your\nFlutter installation. It will provide feedback on potential problems\nand suggest solutions.</p>\n</blockquote>\n<p>7:Check for IDE Updates:</p>\n<blockquote>\n<p>Ensure that Android Studio and any Flutter-related plugins or\nextensions are up-to-date. Sometimes, updating Android Studio or the\nFlutter plugin can resolve build issues.</p>\n</blockquote>\n<p>8:Check for System Environment Variables:</p>\n<blockquote>\n<p>Occasionally, issues can arise from incorrect system environment\nvariables or paths. Ensure that your system's PATH variable includes\nthe correct paths to your Flutter and Java installations.</p>\n</blockquote>\n<p>9: Reimport the Project:</p>\n<blockquote>\n<p>In Android Studio, you can try reimporting the project. Go to &quot;File&quot; &gt;\n&quot;Invalidate Caches / Restart,&quot; and then select &quot;Invalidate and\nRestart.&quot; This can help refresh the project's settings.</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":4461861,"reputation":33,"user_id":8016440,"display_name":"user8016440"},"score":0,"creation_date":1693984019,"post_id":77046312,"comment_id":135829836,"body_markdown":"Thanks; that worked, and just as a guess, I imagine the &quot;delete pubspec.loc&quot; might have done the trick, since that is the only step I hadn&#39;t tried in various ways on my own...\nIf the problem occurs again, I will try that first!","body":"Thanks; that worked, and just as a guess, I imagine the &quot;delete pubspec.loc&quot; might have done the trick, since that is the only step I hadn&#39;t tried in various ways on my own... If the problem occurs again, I will try that first!"},{"owner":{"account_id":4461861,"reputation":33,"user_id":8016440,"display_name":"user8016440"},"score":0,"creation_date":1693984810,"post_id":77046312,"comment_id":135829954,"body_markdown":"Hmm... worked once, and that was it.","body":"Hmm... worked once, and that was it."},{"owner":{"account_id":26840344,"reputation":134,"user_id":20426969,"display_name":"Sarmad Ali"},"score":0,"creation_date":1693986781,"post_id":77046312,"comment_id":135830300,"body_markdown":"@user8016440 problem is solved or is still it appearing?","body":"@user8016440 problem is solved or is still it appearing?"},{"owner":{"account_id":4461861,"reputation":33,"user_id":8016440,"display_name":"user8016440"},"score":0,"creation_date":1693990328,"post_id":77046312,"comment_id":135831039,"body_markdown":"It worked OK for a few runs, but then I had to do it again.\nWent through each step, one by one, tried to run, and number 3 seems to get results.\nFrustrating when all you&#39;re trying to do is debug some seemingly minor formatting issues!","body":"It worked OK for a few runs, but then I had to do it again. Went through each step, one by one, tried to run, and number 3 seems to get results. Frustrating when all you&#39;re trying to do is debug some seemingly minor formatting issues!"},{"owner":{"account_id":26840344,"reputation":134,"user_id":20426969,"display_name":"Sarmad Ali"},"score":0,"creation_date":1693991482,"post_id":77046312,"comment_id":135831260,"body_markdown":"run ***flutter pub global activate devtools*** and again run ***flutter pub cache repair***.","body":"run <b><i>flutter pub global activate devtools</i></b> and again run <b><i>flutter pub cache repair</i></b>."}],"tags":[],"owner":{"account_id":26840344,"reputation":134,"user_id":20426969,"display_name":"Sarmad Ali"},"comment_count":5,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1693932189,"creation_date":1693932189,"answer_id":77046312,"question_id":77042967,"body_markdown":"Try these;\r\n\r\n1: \r\n\r\n&gt; Go to pubspec.yaml file, try doing Packages get | Pub get, and then\r\n&gt; build the project again.\r\n\r\n2: Try this in terminal \r\n\r\n&gt; flutter clean\r\n&gt; \r\n&gt; flutter pub get\r\n\r\n3: run in your terminal\r\n\r\n&gt; flutter channel stable\r\n&gt; \r\n&gt; flutter upgrade --force\r\n&gt; \r\n&gt; flutter pub cache repair\r\n\r\nnext,\r\n\r\n        cd &lt;YOUR APP FOLDER&gt;\r\n    \r\n    flutter clean\r\n\r\n4: \r\n\r\n&gt; flutter clean,\r\n&gt; \r\n&gt; flutter pub get,\r\n&gt; \r\n&gt; flutter build appbundle --release --no-tree-shake-icons\r\n\r\n5: \r\n\r\n&gt; Delete your pubspec.lock, and press &#39;Pub Get&#39; in your pubspec.yaml,\r\n&gt; it&#39;ll regenerate pubspec.lock file again and should fix the problem.\r\n\r\nI hope one of these will work for you!!","title":"Is this a java problem or a problem with flutter?","body":"<p>Try these;</p>\n<p>1:</p>\n<blockquote>\n<p>Go to pubspec.yaml file, try doing Packages get | Pub get, and then\nbuild the project again.</p>\n</blockquote>\n<p>2: Try this in terminal</p>\n<blockquote>\n<p>flutter clean</p>\n<p>flutter pub get</p>\n</blockquote>\n<p>3: run in your terminal</p>\n<blockquote>\n<p>flutter channel stable</p>\n<p>flutter upgrade --force</p>\n<p>flutter pub cache repair</p>\n</blockquote>\n<p>next,</p>\n<pre><code>    cd &lt;YOUR APP FOLDER&gt;\n\nflutter clean\n</code></pre>\n<p>4:</p>\n<blockquote>\n<p>flutter clean,</p>\n<p>flutter pub get,</p>\n<p>flutter build appbundle --release --no-tree-shake-icons</p>\n</blockquote>\n<p>5:</p>\n<blockquote>\n<p>Delete your pubspec.lock, and press 'Pub Get' in your pubspec.yaml,\nit'll regenerate pubspec.lock file again and should fix the problem.</p>\n</blockquote>\n<p>I hope one of these will work for you!!</p>\n"},{"comments":[{"owner":{"account_id":4461861,"reputation":33,"user_id":8016440,"display_name":"user8016440"},"score":0,"creation_date":1695379138,"post_id":77057959,"comment_id":136019795,"body_markdown":"Still having trouble, but the &quot;flutter clean/flutter pub get&quot; combination now works reliably.","body":"Still having trouble, but the &quot;flutter clean/flutter pub get&quot; combination now works reliably."}],"tags":[],"owner":{"account_id":4461861,"reputation":33,"user_id":8016440,"display_name":"user8016440"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694076162,"creation_date":1694076162,"answer_id":77057959,"question_id":77042967,"body_markdown":"At this point, I think it&#39;s a problem with some packages not syncing with each other, after some updates/upgrades.\r\nI assume this should work itself out in a few days.","title":"Is this a java problem or a problem with flutter?","body":"<p>At this point, I think it's a problem with some packages not syncing with each other, after some updates/upgrades.\nI assume this should work itself out in a few days.</p>\n"}],"owner":{"account_id":4461861,"reputation":33,"user_id":8016440,"display_name":"user8016440"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":270,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":3,"score":-2,"last_activity_date":1694076162,"creation_date":1693903055,"question_id":77042967,"body_markdown":"Programs that worked until a day or so ago are suddenly not &quot;running,&quot; even if changes are as minor as changing an icon.\r\nThe error message I am getting is:\r\n\r\n&gt;Execution failed for task &#39;:app:compileFlutterBuildDebug&#39;.\r\n&gt;&gt; Cannot invoke &quot;java.io.File.getAbsoluteFile()&quot; because &quot;dir&quot; is null\r\n\r\nUnfortunately, I can&#39;t seem to get Android Studio to recognise --stacktrace, --info or --scan as &quot;available flutter commands and options.&quot;\r\n\r\nAndroid Studio, flutter, etc., are all up-to-date, and I even reinstalled java and rebooted.\r\nAny suggestions on where I should look for solutions? is it a problem with flutter, java, or maybe my network?","title":"Is this a java problem or a problem with flutter?","body":"<p>Programs that worked until a day or so ago are suddenly not &quot;running,&quot; even if changes are as minor as changing an icon.\nThe error message I am getting is:</p>\n<blockquote>\n<p>Execution failed for task ':app:compileFlutterBuildDebug'.</p>\n<blockquote>\n<p>Cannot invoke &quot;java.io.File.getAbsoluteFile()&quot; because &quot;dir&quot; is null</p>\n</blockquote>\n</blockquote>\n<p>Unfortunately, I can't seem to get Android Studio to recognise --stacktrace, --info or --scan as &quot;available flutter commands and options.&quot;</p>\n<p>Android Studio, flutter, etc., are all up-to-date, and I even reinstalled java and rebooted.\nAny suggestions on where I should look for solutions? is it a problem with flutter, java, or maybe my network?</p>\n"},{"tags":["java","selenium-webdriver","winappdriver"],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1694077966,"post_id":77057866,"comment_id":135844841,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/77057866/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":13986508,"reputation":7,"user_id":10101482,"display_name":"Steam"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1694075307,"creation_date":1694075307,"answer_id":77057866,"question_id":77031654,"body_markdown":"For beginners it&#39;s much comfortable to use C# and visual studio.","title":"During the start of java code with appium and winappdriver got invalid argument message","body":"<p>For beginners it's much comfortable to use C# and visual studio.</p>\n"}],"owner":{"account_id":13986508,"reputation":7,"user_id":10101482,"display_name":"Steam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":135,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1694075307,"creation_date":1693732790,"question_id":77031654,"body_markdown":"I&#39;m quite new in automation, so I tried to do some simple example with starting notepad in combination with appium and winappdriver.\r\n\r\nthis is the code which is used in java(Eclipse IDE)\r\n\r\n```\r\nimport org.openqa.selenium.remote.DesiredCapabilities;\r\nimport java.net.MalformedURLException;\r\nimport java.net.URL;\r\nimport io.appium.java_client.windows.WindowsDriver;\r\n\r\n\r\n\r\npublic class WinAppDriverTest {\r\n\t static WindowsDriver driver;\r\n\r\n\tpublic static void main(String[] args) throws MalformedURLException {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tDesiredCapabilities appCapabilities = new DesiredCapabilities(); //org.openqa.selenium.remote.DesiredCapabilities;\r\n\t\tappCapabilities.setCapability(&quot;app&quot;, &quot;C:\\\\Windows\\\\System32\\\\notepad.exe&quot;);\r\n\t\tdriver = new WindowsDriver(new URL(&quot;http://127.0.0.1:4723&quot;), appCapabilities);\r\n\t}\r\n\r\n}\r\n```\r\nThis is the contents of pom.xml file\r\n\r\n```\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n  &lt;groupId&gt;de.simple.automation&lt;/groupId&gt;\r\n  &lt;artifactId&gt;MavenProjectSimple&lt;/artifactId&gt;\r\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n  &lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n   \t \t\t&lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;4.10.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;io.appium&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;java-client&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;8.5.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n&lt;/project&gt;\r\n```\r\nIf I try to execute the java file I get some Error message in console\r\n\r\n```\r\nSLF4J: No SLF4J providers were found.\r\nSLF4J: Defaulting to no-operation (NOP) logger implementation\r\nSLF4J: See https://www.slf4j.org/codes.html#noProviders for further details.\r\nException in thread &quot;main&quot; org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Response code 400. Message: Bad capabilities. Specify either app or appTopLevelWindow to create a session \r\nHost info: host: &#39;DESKTOP-someName&#39;, ip: &#39;170.25.221.122&#39;\r\nBuild info: version: &#39;4.10.0&#39;, revision: &#39;c14d967899&#39;\r\nSystem info: os.name: &#39;Windows 10&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;17.0.8&#39;\r\nDriver info: io.appium.java_client.windows.WindowsDriver\r\nCommand: [null, newSession {capabilities=[{appium:app=C:\\Windows\\System32\\notepad.exe, appium:automationName=Windows, platformName=windows}], desiredCapabilities=Capabilities {app: C:\\Windows\\System32\\notepad..., appium:automationName: Windows, platformName: windows}}]\r\nCapabilities {app: C:\\Windows\\System32\\notepad..., appium:automationName: Windows, platformName: windows}\r\n\tat org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:140)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat io.appium.java_client.remote.AppiumProtocolHandshake.createSession(AppiumProtocolHandshake.java:133)\r\n\tat io.appium.java_client.remote.AppiumProtocolHandshake.createSession(AppiumProtocolHandshake.java:102)\r\n\tat io.appium.java_client.remote.AppiumCommandExecutor.createSession(AppiumCommandExecutor.java:182)\r\n\tat io.appium.java_client.remote.AppiumCommandExecutor.execute(AppiumCommandExecutor.java:250)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:531)\r\n\tat io.appium.java_client.AppiumDriver.startSession(AppiumDriver.java:274)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:154)\r\n\tat io.appium.java_client.AppiumDriver.&lt;init&gt;(AppiumDriver.java:89)\r\n\tat io.appium.java_client.AppiumDriver.&lt;init&gt;(AppiumDriver.java:101)\r\n\tat io.appium.java_client.windows.WindowsDriver.&lt;init&gt;(WindowsDriver.java:50)\r\n\tat WinAppDriverTest.main(WinAppDriverTest.java:19)\r\n```\r\nin WinAppDriver I can see this message\r\n\r\n```\r\nWindows Application Driver listening for requests at: http://127.0.0.1:4723/\r\nPress ENTER to exit.\r\n\r\n\r\n==========================================\r\nPOST /session HTTP/1.1\r\nAccept: */*\r\nContent-Length: 229\r\nContent-Type: application/json; charset=utf-8\r\nHost: 127.0.0.1:4723\r\nUser-Agent: appium/8.5.1 (selenium/4.10.0 (java windows))\r\nX-Idempotency-Key: 30ebcf38-12e5-45d9-8461-b307b5c6c7d9\r\n\r\n{\r\n  &quot;capabilities&quot;: {\r\n    &quot;firstMatch&quot;: [\r\n      {\r\n      }\r\n    ],\r\n    &quot;alwaysMatch&quot;: {\r\n      &quot;appium:app&quot;: &quot;C:\\\\Windows\\\\System32\\\\notepad.exe&quot;,\r\n      &quot;appium:automationName&quot;: &quot;Windows&quot;,\r\n      &quot;platformName&quot;: &quot;windows&quot;\r\n    }\r\n  }\r\n}\r\nHTTP/1.1 400 Bad Request\r\nContent-Length: 141\r\nContent-Type: application/json\r\n\r\n{&quot;status&quot;:100,&quot;value&quot;:{&quot;error&quot;:&quot;invalid argument&quot;,&quot;message&quot;:&quot;Bad capabilities. Specify either app or appTopLevelWindow to create a session&quot;}}\r\n```\r\n\r\nThank you for advice\r\n\r\nI have  also replaced in java replaced ip address with some other ip which I can see in cmd -&gt; ipconfig\r\nBut it didn&#39;t solve my problem\r\n\r\n`driver = new WindowsDriver(new URL(&quot;http://127.0.0.1:4723&quot;), appCapabilities);`","title":"During the start of java code with appium and winappdriver got invalid argument message","body":"<p>I'm quite new in automation, so I tried to do some simple example with starting notepad in combination with appium and winappdriver.</p>\n<p>this is the code which is used in java(Eclipse IDE)</p>\n<pre><code>import org.openqa.selenium.remote.DesiredCapabilities;\nimport java.net.MalformedURLException;\nimport java.net.URL;\nimport io.appium.java_client.windows.WindowsDriver;\n\n\n\npublic class WinAppDriverTest {\n     static WindowsDriver driver;\n\n    public static void main(String[] args) throws MalformedURLException {\n        // TODO Auto-generated method stub\n        DesiredCapabilities appCapabilities = new DesiredCapabilities(); //org.openqa.selenium.remote.DesiredCapabilities;\n        appCapabilities.setCapability(&quot;app&quot;, &quot;C:\\\\Windows\\\\System32\\\\notepad.exe&quot;);\n        driver = new WindowsDriver(new URL(&quot;http://127.0.0.1:4723&quot;), appCapabilities);\n    }\n\n}\n</code></pre>\n<p>This is the contents of pom.xml file</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;de.simple.automation&lt;/groupId&gt;\n  &lt;artifactId&gt;MavenProjectSimple&lt;/artifactId&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n            &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n            &lt;version&gt;4.10.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.appium&lt;/groupId&gt;\n            &lt;artifactId&gt;java-client&lt;/artifactId&gt;\n            &lt;version&gt;8.5.1&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n<p>If I try to execute the java file I get some Error message in console</p>\n<pre><code>SLF4J: No SLF4J providers were found.\nSLF4J: Defaulting to no-operation (NOP) logger implementation\nSLF4J: See https://www.slf4j.org/codes.html#noProviders for further details.\nException in thread &quot;main&quot; org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Response code 400. Message: Bad capabilities. Specify either app or appTopLevelWindow to create a session \nHost info: host: 'DESKTOP-someName', ip: '170.25.221.122'\nBuild info: version: '4.10.0', revision: 'c14d967899'\nSystem info: os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '17.0.8'\nDriver info: io.appium.java_client.windows.WindowsDriver\nCommand: [null, newSession {capabilities=[{appium:app=C:\\Windows\\System32\\notepad.exe, appium:automationName=Windows, platformName=windows}], desiredCapabilities=Capabilities {app: C:\\Windows\\System32\\notepad..., appium:automationName: Windows, platformName: windows}}]\nCapabilities {app: C:\\Windows\\System32\\notepad..., appium:automationName: Windows, platformName: windows}\n    at org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:140)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at io.appium.java_client.remote.AppiumProtocolHandshake.createSession(AppiumProtocolHandshake.java:133)\n    at io.appium.java_client.remote.AppiumProtocolHandshake.createSession(AppiumProtocolHandshake.java:102)\n    at io.appium.java_client.remote.AppiumCommandExecutor.createSession(AppiumCommandExecutor.java:182)\n    at io.appium.java_client.remote.AppiumCommandExecutor.execute(AppiumCommandExecutor.java:250)\n    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:531)\n    at io.appium.java_client.AppiumDriver.startSession(AppiumDriver.java:274)\n    at org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:154)\n    at io.appium.java_client.AppiumDriver.&lt;init&gt;(AppiumDriver.java:89)\n    at io.appium.java_client.AppiumDriver.&lt;init&gt;(AppiumDriver.java:101)\n    at io.appium.java_client.windows.WindowsDriver.&lt;init&gt;(WindowsDriver.java:50)\n    at WinAppDriverTest.main(WinAppDriverTest.java:19)\n</code></pre>\n<p>in WinAppDriver I can see this message</p>\n<pre><code>Windows Application Driver listening for requests at: http://127.0.0.1:4723/\nPress ENTER to exit.\n\n\n==========================================\nPOST /session HTTP/1.1\nAccept: */*\nContent-Length: 229\nContent-Type: application/json; charset=utf-8\nHost: 127.0.0.1:4723\nUser-Agent: appium/8.5.1 (selenium/4.10.0 (java windows))\nX-Idempotency-Key: 30ebcf38-12e5-45d9-8461-b307b5c6c7d9\n\n{\n  &quot;capabilities&quot;: {\n    &quot;firstMatch&quot;: [\n      {\n      }\n    ],\n    &quot;alwaysMatch&quot;: {\n      &quot;appium:app&quot;: &quot;C:\\\\Windows\\\\System32\\\\notepad.exe&quot;,\n      &quot;appium:automationName&quot;: &quot;Windows&quot;,\n      &quot;platformName&quot;: &quot;windows&quot;\n    }\n  }\n}\nHTTP/1.1 400 Bad Request\nContent-Length: 141\nContent-Type: application/json\n\n{&quot;status&quot;:100,&quot;value&quot;:{&quot;error&quot;:&quot;invalid argument&quot;,&quot;message&quot;:&quot;Bad capabilities. Specify either app or appTopLevelWindow to create a session&quot;}}\n</code></pre>\n<p>Thank you for advice</p>\n<p>I have  also replaced in java replaced ip address with some other ip which I can see in cmd -&gt; ipconfig\nBut it didn't solve my problem</p>\n<p><code>driver = new WindowsDriver(new URL(&quot;http://127.0.0.1:4723&quot;), appCapabilities);</code></p>\n"},{"tags":["java","spring","spring-security"],"answers":[{"comments":[{"owner":{"account_id":2541338,"reputation":2106,"user_id":2207083,"accept_rate":70,"display_name":"Jakub Turcovsky"},"score":0,"creation_date":1696948943,"post_id":36383948,"comment_id":136216267,"body_markdown":"And it depends on the order. Putting the `&quot;/**&quot;` on the top overrides everything else.","body":"And it depends on the order. Putting the <code>&quot;&#47;**&quot;</code> on the top overrides everything else."}],"tags":[],"owner":{"account_id":1477692,"reputation":46661,"user_id":1393484,"accept_rate":100,"display_name":"Ali Dehghani"},"comment_count":1,"down_vote_count":0,"up_vote_count":85,"is_accepted":true,"score":85,"last_activity_date":1566109039,"creation_date":1459677314,"answer_id":36383948,"question_id":36382970,"body_markdown":"If you&#39;re using *Java Configuration*, you can use something like following in your `configure` method:\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http\r\n                .authorizeRequests()\r\n                    .antMatchers(&quot;/employee/me&quot;).authenticated()\r\n                    .antMatchers(&quot;/**&quot;).permitAll();\r\n    }","title":"Allow all URLs but one in Spring security","body":"<p>If you're using <em>Java Configuration</em>, you can use something like following in your <code>configure</code> method:</p>\n\n<pre><code>@Override\nprotected void configure(HttpSecurity http) throws Exception {\n    http\n            .authorizeRequests()\n                .antMatchers(\"/employee/me\").authenticated()\n                .antMatchers(\"/**\").permitAll();\n}\n</code></pre>\n"}],"owner":{"account_id":6629588,"reputation":2033,"user_id":5118663,"accept_rate":62,"display_name":"Sathyakumar Seshachalam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62783,"favorite_count":0,"down_vote_count":0,"up_vote_count":46,"accepted_answer_id":36383948,"answer_count":1,"score":46,"last_activity_date":1694074689,"creation_date":1459670319,"question_id":36382970,"body_markdown":"I would like to protect just a single URL, while allowing anonymous access for everything else. \r\n\r\nThe Java configuration examples i&#39;m seeing in the internet all seem to indicate that you need to explicitly `permitAll` each and every URL, and appropriate `hasRole` for URLs that need to be protected. This in my case, creates a really unwieldy java code which I have modify every time I add a new URL to the application. Is there an easier java configuration that I can use.\r\n\r\nAnd note also that in my case, the URL i&#39;m protecting is a sub-resource, say `employee/me`, I would like `employee/list`, etc., to be anonymously accessible.","title":"Allow all URLs but one in Spring security","body":"<p>I would like to protect just a single URL, while allowing anonymous access for everything else. </p>\n\n<p>The Java configuration examples i'm seeing in the internet all seem to indicate that you need to explicitly <code>permitAll</code> each and every URL, and appropriate <code>hasRole</code> for URLs that need to be protected. This in my case, creates a really unwieldy java code which I have modify every time I add a new URL to the application. Is there an easier java configuration that I can use.</p>\n\n<p>And note also that in my case, the URL i'm protecting is a sub-resource, say <code>employee/me</code>, I would like <code>employee/list</code>, etc., to be anonymously accessible.</p>\n"},{"tags":["java","oracle","mybatis"],"comments":[{"owner":{"account_id":790,"reputation":23125,"user_id":1030,"accept_rate":98,"display_name":"ninesided"},"score":1,"creation_date":1430732124,"post_id":30026785,"comment_id":48170401,"body_markdown":"and presumably running the select from the sequence works perfectly when logged in to the database as the same user that Java is logged in as?","body":"and presumably running the select from the sequence works perfectly when logged in to the database as the same user that Java is logged in as?"},{"owner":{"account_id":2075927,"reputation":2068,"user_id":1849276,"accept_rate":100,"display_name":"Afsun Khammadli"},"score":0,"creation_date":1430732198,"post_id":30026785,"comment_id":48170447,"body_markdown":"`SELECT mySeq.nextval\n    FROM dual` change to `SELECT nextVal(&#39;mySeq&#39;)`","body":"<code>SELECT mySeq.nextval     FROM dual</code> change to <code>SELECT nextVal(&#39;mySeq&#39;)</code>"},{"owner":{"display_name":"user2504767"},"score":0,"creation_date":1430732442,"post_id":30026785,"comment_id":48170577,"body_markdown":"@Afsun Khammadli: With your solution I get the error ORA-00904: &quot;NEXTVAL&quot;: invalid identifier","body":"@Afsun Khammadli: With your solution I get the error ORA-00904: &quot;NEXTVAL&quot;: invalid identifier"},{"owner":{"account_id":2075927,"reputation":2068,"user_id":1849276,"accept_rate":100,"display_name":"Afsun Khammadli"},"score":0,"creation_date":1430732586,"post_id":30026785,"comment_id":48170658,"body_markdown":"For what you will use sequence nextval?I think you will use for inserting isn&#39;t it?","body":"For what you will use sequence nextval?I think you will use for inserting isn&#39;t it?"},{"owner":{"display_name":"user2504767"},"score":0,"creation_date":1430732696,"post_id":30026785,"comment_id":48170716,"body_markdown":"Yes for an SQL Insert, but first I need to get the next Sequence number and than I put the sequence number into a XML Insert Statement as parameter","body":"Yes for an SQL Insert, but first I need to get the next Sequence number and than I put the sequence number into a XML Insert Statement as parameter"},{"owner":{"account_id":2075927,"reputation":2068,"user_id":1849276,"accept_rate":100,"display_name":"Afsun Khammadli"},"score":0,"creation_date":1430732872,"post_id":30026785,"comment_id":48170808,"body_markdown":"`&lt;insert id=&quot;insertMyObject&quot; parameterType=&quot;MyObject&quot; useGeneratedKeys=&quot;true&quot;&gt;\n \n        &lt;selectKey keyProperty=&quot;objectId&quot; resultType=&quot;int&quot; order=&quot;BEFORE&quot;&gt;\n            SELECT nextVal(&#39;my_sequence&#39;)\n            &lt;!-- or -&gt;  SELECT my_sequence.nextVal from dual   --&gt;\n        &lt;/selectKey&gt;\n \n        INSERT INTO myobject_table (objectId,objectName)\n            VALUES (#{objectId},#{objectName})\n \n    &lt;/insert&gt;` Please check this.","body":"<code>&lt;insert id=&quot;insertMyObject&quot; parameterType=&quot;MyObject&quot; useGeneratedKeys=&quot;true&quot;&gt;           &lt;selectKey keyProperty=&quot;objectId&quot; resultType=&quot;int&quot; order=&quot;BEFORE&quot;&gt;             SELECT nextVal(&#39;my_sequence&#39;)             &lt;!-- or -&gt;  SELECT my_sequence.nextVal from dual   --&gt;         &lt;&#47;selectKey&gt;           INSERT INTO myobject_table (objectId,objectName)             VALUES (#{objectId},#{objectName})       &lt;&#47;insert&gt;</code> Please check this."},{"owner":{"account_id":254603,"reputation":15157,"user_id":534120,"display_name":"tbone"},"score":0,"creation_date":1430762349,"post_id":30026785,"comment_id":48189383,"body_markdown":"maybe try adding a public synonym, or specify schema/owner (select SOMESCHEMA.SOMESEQ.nextval ...)","body":"maybe try adding a public synonym, or specify schema/owner (select SOMESCHEMA.SOMESEQ.nextval ...)"}],"answers":[{"comments":[{"owner":{"display_name":"user2504767"},"score":0,"creation_date":1430733769,"post_id":30027349,"comment_id":48171328,"body_markdown":"Now I get this error: java.lang.IllegalArgumentException: Mapped Statements collection does not contain value for myClass","body":"Now I get this error: java.lang.IllegalArgumentException: Mapped Statements collection does not contain value for myClass"},{"owner":{"account_id":2075927,"reputation":2068,"user_id":1849276,"accept_rate":100,"display_name":"Afsun Khammadli"},"score":0,"creation_date":1430733833,"post_id":30027349,"comment_id":48171368,"body_markdown":"You must change parameters for your table structure.","body":"You must change parameters for your table structure."},{"owner":{"display_name":"user2504767"},"score":0,"creation_date":1430734150,"post_id":30027349,"comment_id":48171555,"body_markdown":"Sorry but i have no idea, what muste be changed here: &lt;insert id=&quot;insertLog&quot; parameterType=&quot;java.util.HashMap&quot; useGeneratedKeys=&quot;true&quot;&gt; &lt;selectKey keyProperty=&quot;myId&quot; resultType=&quot;long&quot; order=&quot;BEFORE&quot;&gt; SELECT nextVal(&#39;mySeq&#39;) &lt;/selectKey&gt; INSERT INTO ${mySchema}.myTable ( id, loggingtime) VALUES( #{myId}, sysdate) &lt;/insert&gt;","body":"Sorry but i have no idea, what muste be changed here: &lt;insert id=&quot;insertLog&quot; parameterType=&quot;java.util.HashMap&quot; useGeneratedKeys=&quot;true&quot;&gt; &lt;selectKey keyProperty=&quot;myId&quot; resultType=&quot;long&quot; order=&quot;BEFORE&quot;&gt; SELECT nextVal(&#39;mySeq&#39;) &lt;/selectKey&gt; INSERT INTO ${mySchema}.myTable ( id, loggingtime) VALUES( #{myId}, sysdate) &lt;/insert&gt;"},{"owner":{"account_id":2075927,"reputation":2068,"user_id":1849276,"accept_rate":100,"display_name":"Afsun Khammadli"},"score":0,"creation_date":1430734812,"post_id":30027349,"comment_id":48171957,"body_markdown":"I think my answer is true.There is any problem may be in your code.Please change `sysdate` to `sysdate()`","body":"I think my answer is true.There is any problem may be in your code.Please change <code>sysdate</code> to <code>sysdate()</code>"},{"owner":{"display_name":"user2504767"},"score":0,"creation_date":1430738262,"post_id":30027349,"comment_id":48173878,"body_markdown":"No sysdate is not the problem. The problem ist anywhere else in my sourcecode, but I can&#180;t find the mistake","body":"No sysdate is not the problem. The problem ist anywhere else in my sourcecode, but I can&#180;t find the mistake"}],"tags":[],"owner":{"account_id":2075927,"reputation":2068,"user_id":1849276,"accept_rate":100,"display_name":"Afsun Khammadli"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1492067231,"creation_date":1430733651,"answer_id":30027349,"question_id":30026785,"body_markdown":"I think you use nextval for inserting.Try following:&lt;br&gt;\r\n\r\n    &lt;insert id=&quot;insertPerson&quot; parameterType=&quot;Person&quot; useGeneratedKeys=&quot;true&quot;&gt; \r\n      &lt;selectKey keyProperty=&quot;personId&quot; resultType=&quot;int&quot; order=&quot;BEFORE&quot;&gt;\r\n        SELECT nextVal(&#39;mySeq&#39;)\r\n      &lt;/selectKey&gt;\r\n      INSERT INTO person (personId,PersonName) VALUES (#{personId},#{personName}) \r\n    &lt;/insert&gt;\r\n\r\nAlso instead of `SELECT nextVal(&#39;mySeq&#39;)` you can use this `SELECT mySeq.nextVal from dual`\r\n","title":"How to call a Oracle database sequence number by using MyBatis?","body":"<p>I think you use nextval for inserting.Try following:<br></p>\n\n<pre><code>&lt;insert id=\"insertPerson\" parameterType=\"Person\" useGeneratedKeys=\"true\"&gt; \n  &lt;selectKey keyProperty=\"personId\" resultType=\"int\" order=\"BEFORE\"&gt;\n    SELECT nextVal('mySeq')\n  &lt;/selectKey&gt;\n  INSERT INTO person (personId,PersonName) VALUES (#{personId},#{personName}) \n&lt;/insert&gt;\n</code></pre>\n\n<p>Also instead of <code>SELECT nextVal('mySeq')</code> you can use this <code>SELECT mySeq.nextVal from dual</code></p>\n"},{"tags":[],"owner":{"account_id":4638300,"reputation":133,"user_id":3758849,"display_name":"Pradeep"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1597225351,"creation_date":1597225351,"answer_id":63373902,"question_id":30026785,"body_markdown":"I was able to achieve this,\r\n\r\n    &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.mybatis&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mybatis&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.5.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt; \r\n\r\n   \r\n\r\n    &lt;select id=&quot;getUploadId&quot; resultType=&quot;int&quot;&gt;\r\n\t\tselect {schema}.SEQUENCE_NAME.NEXTVAL from dual\r\n\t&lt;/select&gt;","title":"How to call a Oracle database sequence number by using MyBatis?","body":"<p>I was able to achieve this,</p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.mybatis&lt;/groupId&gt;\n        &lt;artifactId&gt;mybatis&lt;/artifactId&gt;\n        &lt;version&gt;3.5.2&lt;/version&gt;\n    &lt;/dependency&gt; \n\n\n\n&lt;select id=&quot;getUploadId&quot; resultType=&quot;int&quot;&gt;\n    select {schema}.SEQUENCE_NAME.NEXTVAL from dual\n&lt;/select&gt;\n</code></pre>\n"}],"owner":{"display_name":"user2504767"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10501,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1694073945,"creation_date":1430731869,"question_id":30026785,"body_markdown":"I want to call a sequence number from my Oracle Database 10g by using MyBatis, but I only get an error message like the following: \r\n\r\n    ORA-02289: Sequence is not available.\r\n\r\nHow can I call a sequence number from an Oracle Database?\r\n\r\nHere is my Maven Project Dependency concerning the current MyBatis Version:\r\n\r\n    &lt;dependency&gt;\r\n\t   &lt;groupId&gt;org.mybatis&lt;/groupId&gt;\r\n\t   &lt;artifactId&gt;mybatis-spring&lt;/artifactId&gt;\r\n\t   &lt;version&gt;1.1.1&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n  \r\nHere is my Dao Java class:\r\n       \r\n    long mySeqNumber = myDaoClass.getNewNumber(); // here I get an exception\r\n\r\n\r\nHere is my xml declaration:\r\n\r\n    &lt;select id=&quot;getNewNumber&quot; resultType=&quot;java.lang.Long&quot; &gt;\r\n\t\tSELECT mySeq.nextval\r\n\t\tFROM dual\r\n\t&lt;/select&gt;\r\n","title":"How to call a Oracle database sequence number by using MyBatis?","body":"<p>I want to call a sequence number from my Oracle Database 10g by using MyBatis, but I only get an error message like the following: </p>\n\n<pre><code>ORA-02289: Sequence is not available.\n</code></pre>\n\n<p>How can I call a sequence number from an Oracle Database?</p>\n\n<p>Here is my Maven Project Dependency concerning the current MyBatis Version:</p>\n\n<pre><code>&lt;dependency&gt;\n   &lt;groupId&gt;org.mybatis&lt;/groupId&gt;\n   &lt;artifactId&gt;mybatis-spring&lt;/artifactId&gt;\n   &lt;version&gt;1.1.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Here is my Dao Java class:</p>\n\n<pre><code>long mySeqNumber = myDaoClass.getNewNumber(); // here I get an exception\n</code></pre>\n\n<p>Here is my xml declaration:</p>\n\n<pre><code>&lt;select id=\"getNewNumber\" resultType=\"java.lang.Long\" &gt;\n    SELECT mySeq.nextval\n    FROM dual\n&lt;/select&gt;\n</code></pre>\n"},{"tags":["java","exception","scilab"],"comments":[{"owner":{"account_id":13291626,"reputation":2913,"user_id":9595931,"display_name":"St&#233;phane Mottelet"},"score":0,"creation_date":1693988131,"post_id":77049920,"comment_id":135830555,"body_markdown":"Are you using Scilab within Java using JavaSci (https://help.scilab.org/javasci_step_by_step) or Java classes within Scilab ?","body":"Are you using Scilab within Java using JavaSci (<a href=\"https://help.scilab.org/javasci_step_by_step\" rel=\"nofollow noreferrer\">help.scilab.org/javasci_step_by_step</a>) or Java classes within Scilab ?"}],"answers":[{"comments":[{"owner":{"account_id":18559181,"reputation":1,"user_id":14283913,"display_name":"AlexB"},"score":0,"creation_date":1694092186,"post_id":77049977,"comment_id":135847715,"body_markdown":"No, the RuntimeException produces exactly the same result. No matter if I write &quot;throws RuntimeException&quot; in the function declaration. And printing to System.out also does not appear in the console.","body":"No, the RuntimeException produces exactly the same result. No matter if I write &quot;throws RuntimeException&quot; in the function declaration. And printing to System.out also does not appear in the console."},{"owner":{"account_id":14915615,"reputation":181,"user_id":10769525,"display_name":"drino"},"score":0,"creation_date":1694175289,"post_id":77049977,"comment_id":135860390,"body_markdown":"Did you check Scilab and Java Version Compatibility ?","body":"Did you check Scilab and Java Version Compatibility ?"}],"tags":[],"owner":{"account_id":14915615,"reputation":181,"user_id":10769525,"display_name":"drino"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693986849,"creation_date":1693986849,"answer_id":77049977,"question_id":77049920,"body_markdown":"Have you tried to throw a RuntimeException ? That could be helpful in order to identify the origin of the problem.\r\n\r\nI would also try to print in out rather that err.\r\n\r\nTry folowwing code : \r\n\r\n```\r\npublic class DScope\r\n{\r\n    public void exceptiontest(int val)\r\n    {\r\n        System.out.println(&quot;Inspecting: &#39;&quot; + val + &quot;&#39;&quot;);\r\n        if (val &lt; 0)\r\n        {\r\n            throw new RuntimeException(&quot;value is &lt;0&quot;);\r\n        }\r\n    }\r\n}\r\n```","title":"Scilab Java integration: Exception handling?","body":"<p>Have you tried to throw a RuntimeException ? That could be helpful in order to identify the origin of the problem.</p>\n<p>I would also try to print in out rather that err.</p>\n<p>Try folowwing code :</p>\n<pre><code>public class DScope\n{\n    public void exceptiontest(int val)\n    {\n        System.out.println(&quot;Inspecting: '&quot; + val + &quot;'&quot;);\n        if (val &lt; 0)\n        {\n            throw new RuntimeException(&quot;value is &lt;0&quot;);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":18559181,"reputation":1,"user_id":14283913,"display_name":"AlexB"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694073756,"creation_date":1693986263,"question_id":77049920,"body_markdown":"I am working with Scilab Java integration, i. e. calling Java classes within Scilab to do some external device communication. I am using Scilab 2023.1.0 and OpenJDK jdk8u352-b08 to compile the java classes. When my Java code causes an exception, I do not get the information about what is wrong.\r\n\r\nExample java code:\r\n\r\n```\r\npublic class DScope\r\n{\r\n\r\n    public void exceptiontest(int val) throws Exception\r\n    {\r\n        System.err.println(&quot;Inspecting: &#39;&quot; + val + &quot;&#39;&quot;);\r\n        if (val &lt; 0)\r\n        {\r\n            throw new Exception(&quot;value is &lt;0&quot;);\r\n        }\r\n\t\t\r\n    }\r\n}\r\n```\r\n\r\nScilab result:\r\n\r\n```\r\n--&gt; myDScope = DScope.new();\r\n\r\n--&gt; myDScope.exceptiontest(8)\r\n\r\n--&gt; myDScope.exceptiontest(-8)\r\n\r\nUndefinierte Operation f&#252;r die gegebenen Operanden.\r\nFunktion %eo_e f&#252;r &#220;berladung pr&#252;fen oder definieren.\r\n```\r\n\r\n\r\nI also tried to output some information with System.err.println, but this does not reach the Scilab console.","title":"Scilab Java integration: Exception handling?","body":"<p>I am working with Scilab Java integration, i. e. calling Java classes within Scilab to do some external device communication. I am using Scilab 2023.1.0 and OpenJDK jdk8u352-b08 to compile the java classes. When my Java code causes an exception, I do not get the information about what is wrong.</p>\n<p>Example java code:</p>\n<pre><code>public class DScope\n{\n\n    public void exceptiontest(int val) throws Exception\n    {\n        System.err.println(&quot;Inspecting: '&quot; + val + &quot;'&quot;);\n        if (val &lt; 0)\n        {\n            throw new Exception(&quot;value is &lt;0&quot;);\n        }\n        \n    }\n}\n</code></pre>\n<p>Scilab result:</p>\n<pre><code>--&gt; myDScope = DScope.new();\n\n--&gt; myDScope.exceptiontest(8)\n\n--&gt; myDScope.exceptiontest(-8)\n\nUndefinierte Operation für die gegebenen Operanden.\nFunktion %eo_e für Überladung prüfen oder definieren.\n</code></pre>\n<p>I also tried to output some information with System.err.println, but this does not reach the Scilab console.</p>\n"},{"tags":["java","android","openfire","smack"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1688119332,"post_id":76584095,"comment_id":135034211,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."},{"owner":{"account_id":64019,"reputation":2986,"user_id":189203,"accept_rate":83,"display_name":"Guus"},"score":0,"creation_date":1694072395,"post_id":76584095,"comment_id":135843711,"body_markdown":"Please note that Openfire 4.7.3 has an important security issue. I strongly recommend that you upgrade to 4.7.5 or later. Please refer to https://discourse.igniterealtime.org/t/cve-2023-32315-openfire-vulnerability-update for details on the security issue.","body":"Please note that Openfire 4.7.3 has an important security issue. I strongly recommend that you upgrade to 4.7.5 or later. Please refer to <a href=\"https://discourse.igniterealtime.org/t/cve-2023-32315-openfire-vulnerability-update\" rel=\"nofollow noreferrer\">discourse.igniterealtime.org/t/&hellip;</a> for details on the security issue."}],"answers":[{"tags":[],"owner":{"account_id":64019,"reputation":2986,"user_id":189203,"accept_rate":83,"display_name":"Guus"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694072317,"creation_date":1694072317,"answer_id":77057509,"question_id":76584095,"body_markdown":"Both Smack and Openfire support the Stream Management feature (as defined in [XEP-0198: Stream Management](https://xmpp.org/extensions/xep-0198.html)).\r\n\r\nIn Smack, you can enable it using this method:\r\n```java\r\nXMPPTCPConnection connection = new XMPPTCPConnection(config);\r\nconnection.setUseStreamManagement(true);\r\n```\r\n\r\nHowever, I believe that, by default, this already is enabled.","title":"Enabling stream management to use it in smack android application openfire v4.7.3","body":"<p>Both Smack and Openfire support the Stream Management feature (as defined in <a href=\"https://xmpp.org/extensions/xep-0198.html\" rel=\"nofollow noreferrer\">XEP-0198: Stream Management</a>).</p>\n<p>In Smack, you can enable it using this method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>XMPPTCPConnection connection = new XMPPTCPConnection(config);\nconnection.setUseStreamManagement(true);\n</code></pre>\n<p>However, I believe that, by default, this already is enabled.</p>\n"}],"owner":{"account_id":25539255,"reputation":19,"user_id":19325668,"display_name":"Ramy Elberry"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694072317,"creation_date":1688066885,"question_id":76584095,"body_markdown":"I encountered an issue where messages are not delivered when the Wi-Fi or cellular data is turned off on an Android device. Even after re-enabling the network connection, the messages remain undelivered. How can I address this situation in the code using Openfire and Smack?\r\n\r\n","title":"Enabling stream management to use it in smack android application openfire v4.7.3","body":"<p>I encountered an issue where messages are not delivered when the Wi-Fi or cellular data is turned off on an Android device. Even after re-enabling the network connection, the messages remain undelivered. How can I address this situation in the code using Openfire and Smack?</p>\n"},{"tags":["java","plugins","openfire"],"answers":[{"tags":[],"owner":{"account_id":64019,"reputation":2986,"user_id":189203,"accept_rate":83,"display_name":"Guus"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694072140,"creation_date":1694072140,"answer_id":77057487,"question_id":77045032,"body_markdown":"The error suggests that your `plugin.xml` file does not have a `class` element, but from what you copied, it clearly is there, in the right place. Maybe the `plugin.xml` file is stored in the wrong directory?\r\n\r\nAs an aside: if you want to define a dependency to another Openfire plugin, you can use something like this:\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;plugin&gt;\r\n    &lt;name&gt;Kartngo Plugin&lt;/name&gt;\r\n    &lt;class&gt;java.kartNGoPlugin.KartngoPlugin&lt;/class&gt;\r\n    &lt;description&gt;A custom plugin for Kartngo&lt;/description&gt;\r\n    &lt;author&gt;Ahmed Hatem&lt;/author&gt;\r\n    &lt;version&gt;1.0&lt;/version&gt;\r\n    &lt;licenseType&gt;gpl&lt;/licenseType&gt;\r\n\r\n    &lt;!-- Optional: Plugin dependencies --&gt;\r\n    &lt;parentPlugin&gt;OtherPlugin&lt;/parentPlugin&gt;\r\n\r\n    &lt;!-- Specify the web interface for the plugin --&gt;\r\n    &lt;adminconsole&gt;\r\n        &lt;tab id=&quot;mytab&quot; name=&quot;Kartngo Plugin&quot;&gt;\r\n            &lt;sidebar id=&quot;mysidebar&quot; name=&quot;Kartngo Plugin&quot;&gt;\r\n                &lt;item id=&quot;my-plugin&quot; name=&quot;Kartngo Page&quot;\r\n                    url=&quot;kartngo.jsp&quot;\r\n                    description=&quot;kartngo jsp plugin&quot; /&gt;\r\n            &lt;/sidebar&gt;\r\n        &lt;/tab&gt;\r\n    &lt;/adminconsole&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\nThis does not work to declare dependencies to libraries - you need to do that in the `pom.xml` file, but if you need your plugin to only load when another plugin is available (and share their classpaths), then the above will do the trick.","title":"Cannot invoke &quot;org.dom4j.Node.getText()&quot; because the return value of &quot;org.dom4j.Document.selectSingleNode(String)&quot; is null","body":"<p>The error suggests that your <code>plugin.xml</code> file does not have a <code>class</code> element, but from what you copied, it clearly is there, in the right place. Maybe the <code>plugin.xml</code> file is stored in the wrong directory?</p>\n<p>As an aside: if you want to define a dependency to another Openfire plugin, you can use something like this:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;plugin&gt;\n    &lt;name&gt;Kartngo Plugin&lt;/name&gt;\n    &lt;class&gt;java.kartNGoPlugin.KartngoPlugin&lt;/class&gt;\n    &lt;description&gt;A custom plugin for Kartngo&lt;/description&gt;\n    &lt;author&gt;Ahmed Hatem&lt;/author&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;licenseType&gt;gpl&lt;/licenseType&gt;\n\n    &lt;!-- Optional: Plugin dependencies --&gt;\n    &lt;parentPlugin&gt;OtherPlugin&lt;/parentPlugin&gt;\n\n    &lt;!-- Specify the web interface for the plugin --&gt;\n    &lt;adminconsole&gt;\n        &lt;tab id=&quot;mytab&quot; name=&quot;Kartngo Plugin&quot;&gt;\n            &lt;sidebar id=&quot;mysidebar&quot; name=&quot;Kartngo Plugin&quot;&gt;\n                &lt;item id=&quot;my-plugin&quot; name=&quot;Kartngo Page&quot;\n                    url=&quot;kartngo.jsp&quot;\n                    description=&quot;kartngo jsp plugin&quot; /&gt;\n            &lt;/sidebar&gt;\n        &lt;/tab&gt;\n    &lt;/adminconsole&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>This does not work to declare dependencies to libraries - you need to do that in the <code>pom.xml</code> file, but if you need your plugin to only load when another plugin is available (and share their classpaths), then the above will do the trick.</p>\n"}],"owner":{"account_id":29371550,"reputation":1,"user_id":22504063,"display_name":"Ahmed Hatem"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694072140,"creation_date":1693921231,"question_id":77045032,"body_markdown":"I am using Openfire and I have a task to create a custom plugin for it, after creating the plugin and trying to upload it I get this error:\r\n\r\n&gt; org.jivesoftware.openfire.container.PluginManager - An exception\r\n&gt; occurred while loading plugin &#39;kartngo-plugin&#39;:\r\n&gt; java.lang.NullPointerException: Cannot invoke\r\n&gt; &quot;org.dom4j.Node.getText()&quot; because the return value of\r\n&gt; &quot;org.dom4j.Document.selectSingleNode(String)&quot; is null\r\n\r\nI have no clue why it does this, I even read the documentary on how to create the plugin from their website.\r\n\r\nMy problem is, the condition that the error occurs in, has an if condition to check if the object is null or not, so I don&#39;t know how I am getting this error.\r\n\r\nThis is the full error:\r\n\r\n&gt; 2023.09.05 15:28:54 [1;31mERROR[m [Jetty-QTP-AdminConsole-53]: plugin-admin.jsp - Plugin manager failed to install plugin: kartngo-plugin.jar\r\n2023.09.05 15:28:58 [1;31mERROR[m [PluginMonitorExec-2]: org.jivesoftware.openfire.container.PluginManager - An exception occurred while loading plugin &#39;kartngo-plugin&#39;:\r\njava.lang.NullPointerException: Cannot invoke &quot;org.dom4j.Node.getText()&quot; because the return value of &quot;org.dom4j.Document.selectSingleNode(String)&quot; is null\r\n\tat org.jivesoftware.openfire.container.PluginManager.loadPlugin(PluginManager.java:581) [xmppserver-4.7.5.jar:4.7.5]\r\n\tat org.jivesoftware.openfire.container.PluginMonitor$MonitorTask$4.call(PluginMonitor.java:370) [xmppserver-4.7.5.jar:4.7.5]\r\n\tat org.jivesoftware.openfire.container.PluginMonitor$MonitorTask$4.call(PluginMonitor.java:358) [xmppserver-4.7.5.jar:4.7.5]\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:317) [?:?]\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) [?:?]\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) [?:?]\r\n\tat java.lang.Thread.run(Thread.java:1589) [?:?]\r\n\r\n(please excuse me if the way of writing the question is bad/wrong, this is my first question to write on stackoverflow, but I wanted to know how to solve this error)\r\n\r\nThese are my plugin.java, my JSP file, and my plugin.xml that I created to try to upload the plugin into Openfire.\r\n\r\nplugin.java:\r\n\r\n```\r\nimport java.io.File;\r\n\r\nimport org.jivesoftware.openfire.container.Plugin;\r\nimport org.jivesoftware.openfire.container.PluginManager;\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\nimport org.xmpp.component.Component;\r\n\r\n\r\npublic abstract class KartngoPlugin implements Plugin{\r\n\t\r\n    private static final Logger Log = LoggerFactory.getLogger(KartngoPlugin.class);\r\n\r\n\t@Override\r\n\tpublic void initializePlugin(PluginManager manager, File pluginDirectory) {\r\n\t\t\t\t\r\n\t\tLog.info(&quot;Kartngo_Plugin Initialized Successfully at &quot; + new java.util.Date());\r\n\t\t\r\n\t    org.jivesoftware.admin.AuthCheckFilter.addExclude(&quot;kartNGoPlugin&quot;);\r\n        \r\n    }\r\n\r\n    @Override\r\n    public void destroyPlugin() {\r\n\r\n    }\r\n\r\n}\r\n```\r\n\r\nJSP file:\r\n\r\n\r\n```\r\n&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot; pageEncoding=&quot;UTF-8&quot;%&gt;\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html&gt;\r\n&lt;head&gt;\r\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\r\n    &lt;title&gt;Kartngo Plugin Page&lt;/title&gt;\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n    &lt;h1&gt;Kartngo Plugin Page&lt;/h1&gt;\r\n    &lt;p&gt;Current Date: &lt;%= new java.util.Date() %&gt;&lt;/p&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\nplugin.xml:\r\n\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;plugin&gt;\r\n    &lt;name&gt;Kartngo Plugin&lt;/name&gt;\r\n    &lt;class&gt;java.kartNGoPlugin.KartngoPlugin&lt;/class&gt;\r\n    &lt;description&gt;A custom plugin for Kartngo&lt;/description&gt;\r\n    &lt;author&gt;Ahmed Hatem&lt;/author&gt;\r\n    &lt;version&gt;1.0&lt;/version&gt;\r\n    &lt;licenseType&gt;gpl&lt;/licenseType&gt;\r\n\r\n    &lt;!-- Optional: Plugin dependencies --&gt;\r\n    &lt;!-- &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;plugin-name&gt;OtherPlugin&lt;/plugin-name&gt;\r\n            &lt;version&gt;1.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt; --&gt;\r\n\r\n    &lt;!-- Specify the web interface for the plugin --&gt;\r\n\t&lt;adminconsole&gt;\r\n\t    &lt;tab id=&quot;mytab&quot; name=&quot;Kartngo Plugin&quot;&gt;\r\n\t        &lt;sidebar id=&quot;mysidebar&quot; name=&quot;Kartngo Plugin&quot;&gt;\r\n\t            &lt;item id=&quot;my-plugin&quot; name=&quot;Kartngo Page&quot;\r\n\t                url=&quot;kartngo.jsp&quot;\r\n\t                description=&quot;kartngo jsp plugin&quot; /&gt;\r\n\t        &lt;/sidebar&gt;\r\n\t    &lt;/tab&gt;\r\n\t&lt;/adminconsole&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\n\r\n\r\n\r\n\r\n","title":"Cannot invoke &quot;org.dom4j.Node.getText()&quot; because the return value of &quot;org.dom4j.Document.selectSingleNode(String)&quot; is null","body":"<p>I am using Openfire and I have a task to create a custom plugin for it, after creating the plugin and trying to upload it I get this error:</p>\n<blockquote>\n<p>org.jivesoftware.openfire.container.PluginManager - An exception\noccurred while loading plugin 'kartngo-plugin':\njava.lang.NullPointerException: Cannot invoke\n&quot;org.dom4j.Node.getText()&quot; because the return value of\n&quot;org.dom4j.Document.selectSingleNode(String)&quot; is null</p>\n</blockquote>\n<p>I have no clue why it does this, I even read the documentary on how to create the plugin from their website.</p>\n<p>My problem is, the condition that the error occurs in, has an if condition to check if the object is null or not, so I don't know how I am getting this error.</p>\n<p>This is the full error:</p>\n<blockquote>\n<p>2023.09.05 15:28:54 [1;31mERROR[m [Jetty-QTP-AdminConsole-53]: plugin-admin.jsp - Plugin manager failed to install plugin: kartngo-plugin.jar\n2023.09.05 15:28:58 [1;31mERROR[m [PluginMonitorExec-2]: org.jivesoftware.openfire.container.PluginManager - An exception occurred while loading plugin 'kartngo-plugin':\njava.lang.NullPointerException: Cannot invoke &quot;org.dom4j.Node.getText()&quot; because the return value of &quot;org.dom4j.Document.selectSingleNode(String)&quot; is null\nat org.jivesoftware.openfire.container.PluginManager.loadPlugin(PluginManager.java:581) [xmppserver-4.7.5.jar:4.7.5]\nat org.jivesoftware.openfire.container.PluginMonitor$MonitorTask$4.call(PluginMonitor.java:370) [xmppserver-4.7.5.jar:4.7.5]\nat org.jivesoftware.openfire.container.PluginMonitor$MonitorTask$4.call(PluginMonitor.java:358) [xmppserver-4.7.5.jar:4.7.5]\nat java.util.concurrent.FutureTask.run(FutureTask.java:317) [?:?]\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) [?:?]\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) [?:?]\nat java.lang.Thread.run(Thread.java:1589) [?:?]</p>\n</blockquote>\n<p>(please excuse me if the way of writing the question is bad/wrong, this is my first question to write on stackoverflow, but I wanted to know how to solve this error)</p>\n<p>These are my plugin.java, my JSP file, and my plugin.xml that I created to try to upload the plugin into Openfire.</p>\n<p>plugin.java:</p>\n<pre><code>import java.io.File;\n\nimport org.jivesoftware.openfire.container.Plugin;\nimport org.jivesoftware.openfire.container.PluginManager;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.xmpp.component.Component;\n\n\npublic abstract class KartngoPlugin implements Plugin{\n    \n    private static final Logger Log = LoggerFactory.getLogger(KartngoPlugin.class);\n\n    @Override\n    public void initializePlugin(PluginManager manager, File pluginDirectory) {\n                \n        Log.info(&quot;Kartngo_Plugin Initialized Successfully at &quot; + new java.util.Date());\n        \n        org.jivesoftware.admin.AuthCheckFilter.addExclude(&quot;kartNGoPlugin&quot;);\n        \n    }\n\n    @Override\n    public void destroyPlugin() {\n\n    }\n\n}\n</code></pre>\n<p>JSP file:</p>\n<pre><code>&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot; pageEncoding=&quot;UTF-8&quot;%&gt;\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\n    &lt;title&gt;Kartngo Plugin Page&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;h1&gt;Kartngo Plugin Page&lt;/h1&gt;\n    &lt;p&gt;Current Date: &lt;%= new java.util.Date() %&gt;&lt;/p&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>plugin.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;plugin&gt;\n    &lt;name&gt;Kartngo Plugin&lt;/name&gt;\n    &lt;class&gt;java.kartNGoPlugin.KartngoPlugin&lt;/class&gt;\n    &lt;description&gt;A custom plugin for Kartngo&lt;/description&gt;\n    &lt;author&gt;Ahmed Hatem&lt;/author&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;licenseType&gt;gpl&lt;/licenseType&gt;\n\n    &lt;!-- Optional: Plugin dependencies --&gt;\n    &lt;!-- &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;plugin-name&gt;OtherPlugin&lt;/plugin-name&gt;\n            &lt;version&gt;1.0&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt; --&gt;\n\n    &lt;!-- Specify the web interface for the plugin --&gt;\n    &lt;adminconsole&gt;\n        &lt;tab id=&quot;mytab&quot; name=&quot;Kartngo Plugin&quot;&gt;\n            &lt;sidebar id=&quot;mysidebar&quot; name=&quot;Kartngo Plugin&quot;&gt;\n                &lt;item id=&quot;my-plugin&quot; name=&quot;Kartngo Page&quot;\n                    url=&quot;kartngo.jsp&quot;\n                    description=&quot;kartngo jsp plugin&quot; /&gt;\n            &lt;/sidebar&gt;\n        &lt;/tab&gt;\n    &lt;/adminconsole&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":["java","android"],"owner":{"account_id":19569697,"reputation":11,"user_id":14321120,"display_name":"Subham"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694071988,"creation_date":1694048928,"question_id":77056020,"body_markdown":"I&#39;m currently working on an Android project which uses some external libraries. Without these libraries, the application runs fine. However, when I add them, I seem to get this error in my Android app logs:\r\n\r\n&gt; Caused by: java.lang.ClassNotFoundException: Didn&#39;t find class &quot;org.h2.server.web.WebServlet&quot; on path: DexPathList[[],nativeLibraryDirectories=[/system/lib, /vendor/lib]]\r\n\r\n(this is thrown for each and every external lib class)\r\n\r\nThe only issue I have is that the DexPathList class doesn&#39;t seem to be recognizing and using the existing .dex files.\r\n[apk dex](https://i.stack.imgur.com/1gZdM.png) \r\n\r\nI&#39;ve tried existing solutions here on StackOverflow and have had 0 success (multiDexEnabled=true, multidex dependency, instant run is disabled, cleaning caches, reinstalling, etc).\r\n\r\nDoes anyone know how these dex files are loaded internally or if there is any way I can fix this?","title":"H2: Class not found for DexPathList (sources is an empty array)","body":"<p>I'm currently working on an Android project which uses some external libraries. Without these libraries, the application runs fine. However, when I add them, I seem to get this error in my Android app logs:</p>\n<blockquote>\n<p>Caused by: java.lang.ClassNotFoundException: Didn't find class &quot;org.h2.server.web.WebServlet&quot; on path: DexPathList[[],nativeLibraryDirectories=[/system/lib, /vendor/lib]]</p>\n</blockquote>\n<p>(this is thrown for each and every external lib class)</p>\n<p>The only issue I have is that the DexPathList class doesn't seem to be recognizing and using the existing .dex files.\n<a href=\"https://i.stack.imgur.com/1gZdM.png\" rel=\"nofollow noreferrer\">apk dex</a></p>\n<p>I've tried existing solutions here on StackOverflow and have had 0 success (multiDexEnabled=true, multidex dependency, instant run is disabled, cleaning caches, reinstalling, etc).</p>\n<p>Does anyone know how these dex files are loaded internally or if there is any way I can fix this?</p>\n"},{"tags":["java","spring"],"answers":[{"comments":[{"owner":{"account_id":6761945,"reputation":55,"user_id":5208354,"display_name":"Peter H."},"score":0,"creation_date":1578566120,"post_id":59644800,"comment_id":105483316,"body_markdown":"It would be possible to do it this way in case all the spring beans implementing `Car` interface are defined in the `CarConfiguration` class. You miss here the `SporstCar` bean. But in my case I need a better solution. Here are the two other problems: \n1. The spring beans might be defined in different modules\n2. The `ColorOption` annotation is used also used on beans which do not implement the `Car` interface","body":"It would be possible to do it this way in case all the spring beans implementing <code>Car</code> interface are defined in the <code>CarConfiguration</code> class. You miss here the <code>SporstCar</code> bean. But in my case I need a better solution. Here are the two other problems:  1. The spring beans might be defined in different modules 2. The <code>ColorOption</code> annotation is used also used on beans which do not implement the <code>Car</code> interface"},{"owner":{"account_id":16780055,"reputation":107,"user_id":12130462,"display_name":"Magdalena Fairfax"},"score":0,"creation_date":1578650517,"post_id":59644800,"comment_id":105516168,"body_markdown":"You could try ComponentScan see if that works for you","body":"You could try ComponentScan see if that works for you"}],"tags":[],"owner":{"account_id":16780055,"reputation":107,"user_id":12130462,"display_name":"Magdalena Fairfax"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1578565672,"creation_date":1578482653,"answer_id":59644800,"question_id":59625653,"body_markdown":"You can  use java refection to iterate through the methods\r\n\r\n    public class RunCarConfiguration {\r\n    public static void main(String[] args) throws Exception {\r\n\r\n        System.out.println(&quot;Testing grouped car ...&quot;);\r\n        Class&lt;CarConfiguration&gt; obj = CarConfiguration.class;\r\n\r\n        // Process @ColorOption\r\n        if (obj.isAnnotationPresent(ColorOptions.class)) {\r\n            Annotation annotation = obj.getAnnotation(ColorOptions.class);\r\n            ColorOptions colorOptions = (ColorOptions) annotation;\r\n\r\n            System.out.printf(&quot;%nColor :%s&quot;, colorOptions.color());\r\n            System.out.printf(&quot;%nLastModified :%s%n%n&quot;,\r\n                    colorOptions.lastModified());\r\n\r\n        }\r\n   \r\n\r\n    Map &lt;ColorOptions.Color, Car&gt; groupedCar = new HashMap&lt;ColorOptions.Color, Car&gt;();\r\n        // Process @Test\r\n        for (Method method : obj.getDeclaredMethods()) {\r\n\r\n            // if method is annotated with @Test\r\n            if (method.isAnnotationPresent(ColorOptions.class)) {\r\n                Annotation annotation = obj.getAnnotation(ColorOptions.class);\r\n                ColorOptions colorOptions = (ColorOptions) annotation;\r\n\r\n                try {\r\n                    method.invoke(obj.newInstance());\r\n                    if (method.isAnnotationPresent(ColorOptions.class)) {\r\n                        System.out.printf(&quot;Test &#39;%s&#39; - has method annnotation %s %n&quot; ,\r\n                                method.getReturnType().getName(), \r\n                                method.getAnnotation(ColorOptions.class).color());\r\n                        groupedCar.put( method.getAnnotation(ColorOptions.class).color(),\r\n                                (Car)method.invoke(obj.newInstance()));\r\n                    }\r\n\r\n                } catch (Throwable ex) {\r\n                    System.out.printf(&quot;Test &#39;%s&#39; - failed: %s %n&quot; ,\r\n                            method.getName(), ex.getCause());\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n    }\r\n\r\n","title":"How to get annotation metadata of spring beans","body":"<p>You can  use java refection to iterate through the methods</p>\n\n<pre><code>public class RunCarConfiguration {\npublic static void main(String[] args) throws Exception {\n\n    System.out.println(\"Testing grouped car ...\");\n    Class&lt;CarConfiguration&gt; obj = CarConfiguration.class;\n\n    // Process @ColorOption\n    if (obj.isAnnotationPresent(ColorOptions.class)) {\n        Annotation annotation = obj.getAnnotation(ColorOptions.class);\n        ColorOptions colorOptions = (ColorOptions) annotation;\n\n        System.out.printf(\"%nColor :%s\", colorOptions.color());\n        System.out.printf(\"%nLastModified :%s%n%n\",\n                colorOptions.lastModified());\n\n    }\n\n\nMap &lt;ColorOptions.Color, Car&gt; groupedCar = new HashMap&lt;ColorOptions.Color, Car&gt;();\n    // Process @Test\n    for (Method method : obj.getDeclaredMethods()) {\n\n        // if method is annotated with @Test\n        if (method.isAnnotationPresent(ColorOptions.class)) {\n            Annotation annotation = obj.getAnnotation(ColorOptions.class);\n            ColorOptions colorOptions = (ColorOptions) annotation;\n\n            try {\n                method.invoke(obj.newInstance());\n                if (method.isAnnotationPresent(ColorOptions.class)) {\n                    System.out.printf(\"Test '%s' - has method annnotation %s %n\" ,\n                            method.getReturnType().getName(), \n                            method.getAnnotation(ColorOptions.class).color());\n                    groupedCar.put( method.getAnnotation(ColorOptions.class).color(),\n                            (Car)method.invoke(obj.newInstance()));\n                }\n\n            } catch (Throwable ex) {\n                System.out.printf(\"Test '%s' - failed: %s %n\" ,\n                        method.getName(), ex.getCause());\n            }\n        }\n    }\n\n}\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6761945,"reputation":55,"user_id":5208354,"display_name":"Peter H."},"score":0,"creation_date":1579453882,"post_id":59679465,"comment_id":105763289,"body_markdown":"`ComponentScan` will only telll what should be managed by Spring. In my project I need to have in my application context also beans which are not annotated with the `ColorOption` annotation and even if all my beans would be annotated with it I still don&#39;t know how would I be able to group them into a `Map`","body":"<code>ComponentScan</code> will only telll what should be managed by Spring. In my project I need to have in my application context also beans which are not annotated with the <code>ColorOption</code> annotation and even if all my beans would be annotated with it I still don&#39;t know how would I be able to group them into a <code>Map</code>"}],"tags":[],"owner":{"account_id":16780055,"reputation":107,"user_id":12130462,"display_name":"Magdalena Fairfax"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1578650625,"creation_date":1578650625,"answer_id":59679465,"question_id":59625653,"body_markdown":"Have you tried ComponentScan\r\n\r\n    @Configuration\r\n    @ComponentScan(includeFilters = @ComponentScan.Filter(type = FilterType.ANNOTATION,\r\n        classes = ColorOption.class))\r\n    public class ComponentScanAnnotationFilterApp { }\r\n\r\n","title":"How to get annotation metadata of spring beans","body":"<p>Have you tried ComponentScan</p>\n\n<pre><code>@Configuration\n@ComponentScan(includeFilters = @ComponentScan.Filter(type = FilterType.ANNOTATION,\n    classes = ColorOption.class))\npublic class ComponentScanAnnotationFilterApp { }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":234929,"reputation":909,"user_id":501399,"accept_rate":83,"display_name":"vadipp"},"score":0,"creation_date":1694148786,"post_id":77057434,"comment_id":135855895,"body_markdown":"OP asked a way t do this without injecting the applicationContext","body":"OP asked a way t do this without injecting the applicationContext"}],"tags":[],"owner":{"account_id":26945447,"reputation":1,"user_id":20515514,"display_name":"王协龙"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694071659,"creation_date":1694071659,"answer_id":77057434,"question_id":59625653,"body_markdown":"1. get BeanDefinition\r\n```\r\nBeanDefinition beanDefinition =applicationContext.getBeanDefinition(&quot;beanName&quot;);\r\n\r\n```\r\n2. get AnnotatedTypeMetadata\r\n```\r\n MergedAnnotation&lt; ColorOptions &gt; tenantFunMergedAnnotation = ((AnnotatedTypeMetadata) beanDefinition.getSource()).getAnnotations().get(ColorOptions.class);\r\n\r\n```","title":"How to get annotation metadata of spring beans","body":"<ol>\n<li>get BeanDefinition</li>\n</ol>\n<pre><code>BeanDefinition beanDefinition =applicationContext.getBeanDefinition(&quot;beanName&quot;);\n\n</code></pre>\n<ol start=\"2\">\n<li>get AnnotatedTypeMetadata</li>\n</ol>\n<pre><code> MergedAnnotation&lt; ColorOptions &gt; tenantFunMergedAnnotation = ((AnnotatedTypeMetadata) beanDefinition.getSource()).getAnnotations().get(ColorOptions.class);\n\n</code></pre>\n"}],"owner":{"account_id":6761945,"reputation":55,"user_id":5208354,"display_name":"Peter H."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1200,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1694071659,"creation_date":1578389761,"question_id":59625653,"body_markdown":"In my spring project I have multiple implementations of an interface.\r\n\r\n    interface Car {\r\n\r\n    }\r\n\r\n    @Component\r\n    @ColorOptions({Color.RED})\r\n    class SportsCar implements Car {\r\n    \r\n    }\r\n    \r\n    class Truck implements Car {\r\n    \r\n    }\r\n    \r\n    @Configuration\r\n    class CarConfiguration {\r\n    \r\n        @Bean\r\n        @Scope(ConfigurableBeanFactory.SCOPE_PROTOTYPE)\r\n        @ColorOptions({Color.GREEN, Color.BLUE})\r\n        public Truck oldTruck() {\r\n            return new Truck();\r\n        }\r\n    \r\n        @Bean\r\n        @ColorOptions({Color.BLUE})\r\n        public Truck newTruck() {\r\n            return new Truck();\r\n        }\r\n    }\r\n\r\nWhat I would like to achieve is to create a spring bean which would be a `Map` containing all the implementations of the interface which would be grouped based on the metadata provided in the `ColorOptions` annotation.\r\n\r\n        @Bean\r\n        public Map&lt;Color, List&lt;Car&gt;&gt; groupedCars(List&lt;Car&gt; cars) {\r\n            // ???\r\n            return null;\r\n        }\r\n\r\nThe `org.springframework.beans.factory.ListableBeanFactory#findAnnotationOnBean` provides an option to do it but I was able only to receive the values only in case I annotated a class. In case of spring beans which were defined in methods I do not get anything. Also I would like to avoid injecting the whole `ApplicationContext` and inject just the implementations of the interface. How can I implement that?","title":"How to get annotation metadata of spring beans","body":"<p>In my spring project I have multiple implementations of an interface.</p>\n\n<pre><code>interface Car {\n\n}\n\n@Component\n@ColorOptions({Color.RED})\nclass SportsCar implements Car {\n\n}\n\nclass Truck implements Car {\n\n}\n\n@Configuration\nclass CarConfiguration {\n\n    @Bean\n    @Scope(ConfigurableBeanFactory.SCOPE_PROTOTYPE)\n    @ColorOptions({Color.GREEN, Color.BLUE})\n    public Truck oldTruck() {\n        return new Truck();\n    }\n\n    @Bean\n    @ColorOptions({Color.BLUE})\n    public Truck newTruck() {\n        return new Truck();\n    }\n}\n</code></pre>\n\n<p>What I would like to achieve is to create a spring bean which would be a <code>Map</code> containing all the implementations of the interface which would be grouped based on the metadata provided in the <code>ColorOptions</code> annotation.</p>\n\n<pre><code>    @Bean\n    public Map&lt;Color, List&lt;Car&gt;&gt; groupedCars(List&lt;Car&gt; cars) {\n        // ???\n        return null;\n    }\n</code></pre>\n\n<p>The <code>org.springframework.beans.factory.ListableBeanFactory#findAnnotationOnBean</code> provides an option to do it but I was able only to receive the values only in case I annotated a class. In case of spring beans which were defined in methods I do not get anything. Also I would like to avoid injecting the whole <code>ApplicationContext</code> and inject just the implementations of the interface. How can I implement that?</p>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":794766,"reputation":158675,"user_id":871026,"accept_rate":76,"display_name":"Reimeus"},"score":1,"creation_date":1465412433,"post_id":37710721,"comment_id":62895435,"body_markdown":"Try with regular non-secure url `http://nexus.....`...","body":"Try with regular non-secure url <code>http:&#47;&#47;nexus.....</code>..."},{"owner":{"account_id":1337754,"reputation":1329,"user_id":1280060,"accept_rate":50,"display_name":"jdex"},"score":0,"creation_date":1694728821,"post_id":37710721,"comment_id":135933454,"body_markdown":"Admin deleted my answer but since maven `3.9.0` , the ssl insecure switch is `-Daether.connector.https.securityMode=insecure` because they changed the transport away from `wagon`","body":"Admin deleted my answer but since maven <code>3.9.0</code> , the ssl insecure switch is <code>-Daether.connector.https.securityMode=insecure</code> because they changed the transport away from <code>wagon</code>"}],"answers":[{"tags":[],"owner":{"account_id":2554005,"reputation":4023,"user_id":2216414,"accept_rate":67,"display_name":"Cristian Meneses"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1465412539,"creation_date":1465412539,"answer_id":37710809,"question_id":37710721,"body_markdown":"It seems like your JDK does not have the CA root for the SSL certificate from the repository.\r\n\r\nYou can find a nice article [here][1] about downloading those certificates and adding it to your Java JDK. \r\n\r\n\r\n  [1]: https://web.liferay.com/web/neil.griffin/blog/-/blogs/fixing-suncertpathbuilderexception-caused-by-maven-downloading-from-self-signed-repository","title":"maven repository sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException:","body":"<p>It seems like your JDK does not have the CA root for the SSL certificate from the repository.</p>\n\n<p>You can find a nice article <a href=\"https://web.liferay.com/web/neil.griffin/blog/-/blogs/fixing-suncertpathbuilderexception-caused-by-maven-downloading-from-self-signed-repository\" rel=\"nofollow\">here</a> about downloading those certificates and adding it to your Java JDK. </p>\n"},{"tags":[],"owner":{"account_id":2014782,"reputation":1337,"user_id":1802348,"display_name":"positivecrux"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1465451504,"creation_date":1465451504,"answer_id":37717837,"question_id":37710721,"body_markdown":"you need to enter your certificate inside java cacert file,Please make sure you are selecting root ca certicate not the last one in hierarchy.\r\n\r\n[This][1] link demonstrate it the best.\r\n\r\nStep 1 : Download certificate\r\nStep 2 : store inside cacert\r\n\r\nThat is it! your problem resolved.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/37411410/1802348","title":"maven repository sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException:","body":"<p>you need to enter your certificate inside java cacert file,Please make sure you are selecting root ca certicate not the last one in hierarchy.</p>\n\n<p><a href=\"https://stackoverflow.com/a/37411410/1802348\">This</a> link demonstrate it the best.</p>\n\n<p>Step 1 : Download certificate\nStep 2 : store inside cacert</p>\n\n<p>That is it! your problem resolved.</p>\n"},{"tags":[],"owner":{"account_id":11275079,"reputation":1,"user_id":8269340,"display_name":"Bipin Kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1499453550,"creation_date":1499433735,"answer_id":44971886,"question_id":37710721,"body_markdown":"Check that run keytool -import.. command from jre which exists uder jdk.\r\nlike this.\r\n\r\n1.Open cmd as admin...\r\n\r\n1. go to path: C:\\Program Files\\Java\\jdk1.8.0_65\\bin&gt;\r\n\r\n1. run bellow command. \r\n\r\n\r\n    keytool -import -noprompt -trustcacerts -alias certPen -file  D:\\certificates\\ca-cert.pem -keystore &quot;C:\\Program Files\\Java\\jdk1.8.0_60\\jre\\lib\\security\\cacerts&quot;\r\n\r\n\r\nand if u facing problem of file not found then set your all permission from\r\nRight click on cacerts → choose properties → select Securit tab → Allow all permissions to all the Group and user names.\r\n\r\n","title":"maven repository sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException:","body":"<p>Check that run keytool -import.. command from jre which exists uder jdk.\nlike this.</p>\n\n<p>1.Open cmd as admin...</p>\n\n<ol>\n<li><p>go to path: C:\\Program Files\\Java\\jdk1.8.0_65\\bin></p></li>\n<li><p>run bellow command. </p>\n\n<p>keytool -import -noprompt -trustcacerts -alias certPen -file  D:\\certificates\\ca-cert.pem -keystore \"C:\\Program Files\\Java\\jdk1.8.0_60\\jre\\lib\\security\\cacerts\"</p></li>\n</ol>\n\n<p>and if u facing problem of file not found then set your all permission from\nRight click on cacerts → choose properties → select Securit tab → Allow all permissions to all the Group and user names.</p>\n"}],"owner":{"account_id":1673330,"reputation":1599,"user_id":1539343,"accept_rate":31,"display_name":"user1539343"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24859,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1694070579,"creation_date":1465412210,"question_id":37710721,"body_markdown":"I have the fragment of pom.xml which tries to resolve the fitbit dependency:\r\n\r\n    &lt;repositories&gt;\r\n    \t\t&lt;repository&gt;\r\n    \t\t\t&lt;name&gt;FitBit GitHub Repo&lt;/name&gt;\r\n    \t\t\t&lt;id&gt;fitbit4j&lt;/id&gt;\r\n    \t\t\t&lt;url&gt;https://nexus.vanntett.net/content/repositories/fitbit/&lt;/url&gt;\r\n    \t\t&lt;/repository&gt;\r\n    \t&lt;/repositories&gt;\r\n\r\nI am getting the below error:\r\n\r\n\r\n    Failed to collect dependencies at com.fitbit:fitbit4j:jar:1.0.26: Failed to read artifact descriptor for com.fitbit:fitbit4j:jar:1.0.26: Could not transfer artifact com.fitbit:fitbit4j:pom:1.0.26 from/to fitbit4j (https://nexus.vanntett.net/content/repositories/fitbit/): sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target -&gt; [Help 1]\r\n\r\nI used these parameters in eclipse:\r\n    -Dmaven.wagon.http.ssl.insecure=true -   Dmaven.wagon.http.ssl.allowall=true\r\n\r\nwhich didn&#39;t work.\r\n\r\nPlease help.\r\n\r\nThanks","title":"maven repository sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException:","body":"<p>I have the fragment of pom.xml which tries to resolve the fitbit dependency:</p>\n\n<pre><code>&lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;name&gt;FitBit GitHub Repo&lt;/name&gt;\n            &lt;id&gt;fitbit4j&lt;/id&gt;\n            &lt;url&gt;https://nexus.vanntett.net/content/repositories/fitbit/&lt;/url&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n</code></pre>\n\n<p>I am getting the below error:</p>\n\n<pre><code>Failed to collect dependencies at com.fitbit:fitbit4j:jar:1.0.26: Failed to read artifact descriptor for com.fitbit:fitbit4j:jar:1.0.26: Could not transfer artifact com.fitbit:fitbit4j:pom:1.0.26 from/to fitbit4j (https://nexus.vanntett.net/content/repositories/fitbit/): sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target -&gt; [Help 1]\n</code></pre>\n\n<p>I used these parameters in eclipse:\n    -Dmaven.wagon.http.ssl.insecure=true -   Dmaven.wagon.http.ssl.allowall=true</p>\n\n<p>which didn't work.</p>\n\n<p>Please help.</p>\n\n<p>Thanks</p>\n"},{"tags":["java","amazon-web-services","amazon-s3","aws-sdk"],"comments":[{"owner":{"account_id":4550581,"reputation":4343,"user_id":3695939,"accept_rate":69,"display_name":"moondaisy"},"score":2,"creation_date":1502550146,"post_id":45651144,"comment_id":78261626,"body_markdown":"Please include the code you are using for the download","body":"Please include the code you are using for the download"}],"answers":[{"comments":[{"owner":{"account_id":4152,"reputation":1105,"user_id":6153,"accept_rate":71,"display_name":"Jim Ford"},"score":1,"creation_date":1666370909,"post_id":59033654,"comment_id":130929070,"body_markdown":"this explains nothing about the issue as the question was specifically related to an api call withing the aws s3 java sdk. sure sounds great, but why would a commercially provided api after millions of successful requests suddenly start spitting out this error?","body":"this explains nothing about the issue as the question was specifically related to an api call withing the aws s3 java sdk. sure sounds great, but why would a commercially provided api after millions of successful requests suddenly start spitting out this error?"}],"tags":[],"owner":{"account_id":1192089,"reputation":4315,"user_id":1329340,"accept_rate":74,"display_name":"Campa"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1574690641,"creation_date":1574690641,"answer_id":59033654,"question_id":45651144,"body_markdown":"Do not close your client after a request if you are pooling the connections.\r\n\r\nThat is, you are probably doing something like this:\r\n\r\n    PoolingHttpClientConnectionManager pool = new PoolingHttpClientConnectionManager();\r\n    ...\r\n    CloseableHttpClient httpclient = HttpClients.custom()\r\n         .setConnectionManager(pool)\r\n         .build();\r\n\r\n    try { // try-with-resources\r\n        HttpGet httpget = new HttpGet(url.toURI());\r\n        try (CloseableHttpResponse response = httpclient.execute(httpget);\r\n                 InputStream fis = response.getEntity().getContent();\r\n                ReadableByteChannel channel = Channels.newChannel(fis)) {\r\n                 // ... get data ...\r\n         } finally {\r\n             httpclient.close(); &lt;====== !!\r\n         }\r\n    } catch (IOException | URISyntaxException e) {\r\n        // exception handling ...\r\n    }\r\n\r\nThat `httpclient.close()` is causing your next pooled connection to fail.\r\n\r\n----\r\n\r\n&lt;sup&gt;Taken from: https://stackoverflow.com/a/59033548/1329340&lt;/sup&gt;","title":"java.lang.IllegalStateException: Connection pool shut down at","body":"<p>Do not close your client after a request if you are pooling the connections.</p>\n\n<p>That is, you are probably doing something like this:</p>\n\n<pre><code>PoolingHttpClientConnectionManager pool = new PoolingHttpClientConnectionManager();\n...\nCloseableHttpClient httpclient = HttpClients.custom()\n     .setConnectionManager(pool)\n     .build();\n\ntry { // try-with-resources\n    HttpGet httpget = new HttpGet(url.toURI());\n    try (CloseableHttpResponse response = httpclient.execute(httpget);\n             InputStream fis = response.getEntity().getContent();\n            ReadableByteChannel channel = Channels.newChannel(fis)) {\n             // ... get data ...\n     } finally {\n         httpclient.close(); &lt;====== !!\n     }\n} catch (IOException | URISyntaxException e) {\n    // exception handling ...\n}\n</code></pre>\n\n<p>That <code>httpclient.close()</code> is causing your next pooled connection to fail.</p>\n\n<hr>\n\n<p><sup>Taken from: <a href=\"https://stackoverflow.com/a/59033548/1329340\">https://stackoverflow.com/a/59033548/1329340</a></sup></p>\n"},{"comments":[{"owner":{"account_id":7300240,"reputation":645,"user_id":5563327,"display_name":"123"},"score":0,"creation_date":1670132286,"post_id":74673139,"comment_id":131800197,"body_markdown":"technically this didn&#39;t *completely* solve my issue, but at the very least, none of the traceback contains S3-related errors anymore :)","body":"technically this didn&#39;t <i>completely</i> solve my issue, but at the very least, none of the traceback contains S3-related errors anymore :)"}],"tags":[],"owner":{"account_id":7300240,"reputation":645,"user_id":5563327,"display_name":"123"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670132236,"creation_date":1670132236,"answer_id":74673139,"question_id":45651144,"body_markdown":"in the databricks runtime environment, i found success using the solution from this article mixed with a small variation on the prefix for the configuration key:\r\n\r\n`spark.hadoop.fs.s3a.connection.maximum 3`\r\n\r\nthe original article solution said to use:\r\n\r\n`fs.s3a.connection.maximum`\r\n\r\n\r\nhttps://kb.databricks.com/en_US/jobs/job-fails-connection-pool","title":"java.lang.IllegalStateException: Connection pool shut down at","body":"<p>in the databricks runtime environment, i found success using the solution from this article mixed with a small variation on the prefix for the configuration key:</p>\n<p><code>spark.hadoop.fs.s3a.connection.maximum 3</code></p>\n<p>the original article solution said to use:</p>\n<p><code>fs.s3a.connection.maximum</code></p>\n<p><a href=\"https://kb.databricks.com/en_US/jobs/job-fails-connection-pool\" rel=\"nofollow noreferrer\">https://kb.databricks.com/en_US/jobs/job-fails-connection-pool</a></p>\n"}],"owner":{"account_id":11535300,"reputation":39,"user_id":8452988,"display_name":"Ash"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8532,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":2,"score":2,"last_activity_date":1694070265,"creation_date":1502546671,"question_id":45651144,"body_markdown":"While downloading file from S3 it is failing and giving me this exception\r\n\r\n&gt;java.lang.IllegalStateException: Connection pool shut down\r\n\r\n&gt; at org.apache.http.util.Asserts.check(Asserts.java:34) \t\r\n&gt; at\r\n&gt; org.apache.http.pool.AbstractConnPool.lease(AbstractConnPool.java:184)\r\n&gt; \tat\r\n&gt; org.apache.http.impl.conn.PoolingHttpClientConnectionManager.requestConnection(PoolingHttpClientConnectionManager.java:251)\r\n&gt; \t at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) \t\r\n&gt; atsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n&gt; \t at\r\n&gt; sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n&gt; \tat java.lang.reflect.Method.invoke(Method.java:498) \tat\r\n&gt; com.amazonaws.http.conn.ClientConnectionManagerFactory$Handler.invoke(ClientConnectionManagerFactory.java:76)\r\n&gt; \tat com.amazonaws.http.conn.$Proxy70.requestConnection(Unknown Source)\r\n&gt; \tat\r\n&gt; org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:175)\r\n&gt; \tat\r\n&gt; org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:184)\r\n&gt; \tat\r\n&gt; org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:184)\r\n&gt; \tat\r\n&gt; org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:82)\r\n&gt; \tat\r\n&gt; org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:55)\r\n&gt; \tat\r\n&gt; com.amazonaws.http.apache.client.impl.SdkHttpClient.execute(SdkHttpClient.java:72)\r\n&gt; \tat\r\n&gt; com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeOneRequest(AmazonHttpClient.java:1190)\r\n&gt; \tat\r\n&gt; com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeHelper(AmazonHttpClient.java:1030)\r\n&gt; \tat\r\n&gt; com.amazonaws.http.AmazonHttpClient$RequestExecutor.doExecute(AmazonHttpClient.java:742)\r\n&gt; \tat\r\n&gt; com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeWithTimer(AmazonHttpClient.java:716)\r\n&gt; \tat\r\n&gt; com.amazonaws.http.AmazonHttpClient$RequestExecutor.execute(AmazonHttpClient.java:699)\r\n&gt; \tat\r\n&gt; com.amazonaws.http.AmazonHttpClient$RequestExecutor.access$500(AmazonHttpClient.java:667)\r\n&gt; \tat\r\n&gt; com.amazonaws.http.AmazonHttpClient$RequestExecutionBuilderImpl.execute(AmazonHttpClient.java:649)\r\n&gt; \tat\r\n&gt; com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:513)\r\n&gt; \tat\r\n&gt; com.amazonaws.services.s3.AmazonS3Client.invoke(AmazonS3Client.java:4221)\r\n&gt; \tat\r\n&gt; com.amazonaws.services.s3.AmazonS3Client.invoke(AmazonS3Client.java:4168)\r\n&gt; \tat\r\n&gt; com.amazonaws.services.s3.AmazonS3Client.getObjectMetadata(AmazonS3Client.java:1249)\r\n&gt; \tat\r\n&gt; com.amazonaws.services.s3.transfer.TransferManager.doDownload(TransferManager.java:1053)\r\n&gt; \tat\r\n&gt; com.amazonaws.services.s3.transfer.TransferManager.doDownload(TransferManager.java:1007)\r\n&gt; \tat\r\n&gt; com.amazonaws.services.s3.transfer.TransferManager.download(TransferManager.java:845)\r\n&gt; \tat\r\n&gt; com.amazonaws.services.s3.transfer.TransferManager.download(TransferManager.java:801)\r\n&gt; \tat\r\n&gt; com.capitalone.homeloans.imaging.common.s3communicator.AsyncS3Manager.lambda$download$0(AsyncS3Manager.java:82)\r\n&gt; \tat\r\n&gt; java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1590)\r\n&gt; \tat\r\n&gt; java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n&gt; \tat\r\n&gt; java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n&gt; \tat java.lang.Thread.run(Thread.java:745)\r\n\r\n","title":"java.lang.IllegalStateException: Connection pool shut down at","body":"<p>While downloading file from S3 it is failing and giving me this exception</p>\n\n<blockquote>\n  <p>java.lang.IllegalStateException: Connection pool shut down</p>\n  \n  <p>at org.apache.http.util.Asserts.check(Asserts.java:34)<br>\n  at\n  org.apache.http.pool.AbstractConnPool.lease(AbstractConnPool.java:184)\n    at\n  org.apache.http.impl.conn.PoolingHttpClientConnectionManager.requestConnection(PoolingHttpClientConnectionManager.java:251)\n     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br>\n  atsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n     at\n  sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)     at\n  com.amazonaws.http.conn.ClientConnectionManagerFactory$Handler.invoke(ClientConnectionManagerFactory.java:76)\n    at com.amazonaws.http.conn.$Proxy70.requestConnection(Unknown Source)\n    at\n  org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:175)\n    at\n  org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:184)\n    at\n  org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:184)\n    at\n  org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:82)\n    at\n  org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:55)\n    at\n  com.amazonaws.http.apache.client.impl.SdkHttpClient.execute(SdkHttpClient.java:72)\n    at\n  com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeOneRequest(AmazonHttpClient.java:1190)\n    at\n  com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeHelper(AmazonHttpClient.java:1030)\n    at\n  com.amazonaws.http.AmazonHttpClient$RequestExecutor.doExecute(AmazonHttpClient.java:742)\n    at\n  com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeWithTimer(AmazonHttpClient.java:716)\n    at\n  com.amazonaws.http.AmazonHttpClient$RequestExecutor.execute(AmazonHttpClient.java:699)\n    at\n  com.amazonaws.http.AmazonHttpClient$RequestExecutor.access$500(AmazonHttpClient.java:667)\n    at\n  com.amazonaws.http.AmazonHttpClient$RequestExecutionBuilderImpl.execute(AmazonHttpClient.java:649)\n    at\n  com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:513)\n    at\n  com.amazonaws.services.s3.AmazonS3Client.invoke(AmazonS3Client.java:4221)\n    at\n  com.amazonaws.services.s3.AmazonS3Client.invoke(AmazonS3Client.java:4168)\n    at\n  com.amazonaws.services.s3.AmazonS3Client.getObjectMetadata(AmazonS3Client.java:1249)\n    at\n  com.amazonaws.services.s3.transfer.TransferManager.doDownload(TransferManager.java:1053)\n    at\n  com.amazonaws.services.s3.transfer.TransferManager.doDownload(TransferManager.java:1007)\n    at\n  com.amazonaws.services.s3.transfer.TransferManager.download(TransferManager.java:845)\n    at\n  com.amazonaws.services.s3.transfer.TransferManager.download(TransferManager.java:801)\n    at\n  com.capitalone.homeloans.imaging.common.s3communicator.AsyncS3Manager.lambda$download$0(AsyncS3Manager.java:82)\n    at\n  java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1590)\n    at\n  java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at\n  java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)</p>\n</blockquote>\n"},{"tags":["java","spring-boot","apache-kafka","spring-kafka","graalvm"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1693822004,"post_id":77036746,"comment_id":135806285,"body_markdown":"The error says nothing about `OAuthBearerSaslClientCallbackHandler` being *missing*. Do you have the correct library versions?","body":"The error says nothing about <code>OAuthBearerSaslClientCallbackHandler</code> being <i>missing</i>. Do you have the correct library versions?"},{"owner":{"account_id":10344759,"reputation":672,"user_id":7630061,"display_name":"Matthias Danetzky"},"score":0,"creation_date":1693823786,"post_id":77036746,"comment_id":135806603,"body_markdown":"As I wrote - it works in plain java.","body":"As I wrote - it works in plain java."},{"owner":{"account_id":1674328,"reputation":2652,"user_id":1540177,"display_name":"grekier"},"score":0,"creation_date":1693901577,"post_id":77036746,"comment_id":135816960,"body_markdown":"Please provide all your GraalVM config files, CLI parameters, etc... (and/or Spring Boot native config) The error comes probably from GraalVM removing something you need.","body":"Please provide all your GraalVM config files, CLI parameters, etc... (and/or Spring Boot native config) The error comes probably from GraalVM removing something you need."}],"answers":[{"comments":[{"owner":{"account_id":13620499,"reputation":111,"user_id":10628628,"display_name":"Alina Yurenko"},"score":0,"creation_date":1694507330,"post_id":77057233,"comment_id":135896199,"body_markdown":"thank you for answering this question, Matthias. To add a bit to what you said, the up to date documentation is here: https://www.graalvm.org/latest/reference-manual/native-image/metadata/AutomaticMetadataCollection/\nand here are docs from the Native Maven plugin perspective: https://graalvm.github.io/native-build-tools/latest/maven-plugin.html#agent-support-running-application","body":"thank you for answering this question, Matthias. To add a bit to what you said, the up to date documentation is here: <a href=\"https://www.graalvm.org/latest/reference-manual/native-image/metadata/AutomaticMetadataCollection/\" rel=\"nofollow noreferrer\">graalvm.org/latest/reference-manual/native-image/metadata/&hellip;</a> and here are docs from the Native Maven plugin perspective: <a href=\"https://graalvm.github.io/native-build-tools/latest/maven-plugin.html#agent-support-running-application\" rel=\"nofollow noreferrer\">graalvm.github.io/native-build-tools/latest/&hellip;</a>"}],"tags":[],"owner":{"account_id":10344759,"reputation":672,"user_id":7630061,"display_name":"Matthias Danetzky"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1694070096,"creation_date":1694069726,"answer_id":77057233,"question_id":77036746,"body_markdown":"Use GraalVM&#39;s native image agent:\r\n```\r\njava -agentlib:native-image-agent=config-merge-dir=PATH_TO_YOUR_SPRING_BOOT_PROJECT\\src\\main\\resources\\META-INF\\native-image -jar PATH_TO_YOUR_SPRING_BOOT_PROJECT\\target\\NAME_OF_FAT_JAR.jar\r\n```\r\nIt will produce reachability files in your project&#39;s resources folder. Then build your project using org.graalvm.buildtools:native-maven-plugin. The plugin will automatically pick up the files produced by the agent if you save them in resources\\META-INF. If you still get missing classes, resources etc. during the execution - repeat the run. It will merge newly found information with previously created files.\r\nVery rudimentary documentation can be found here: https://www.graalvm.org/22.0/reference-manual/native-image/Agent/","title":"GraalVM native missing kafka clients OAuthBearerSaslClientCallbackHandler","body":"<p>Use GraalVM's native image agent:</p>\n<pre><code>java -agentlib:native-image-agent=config-merge-dir=PATH_TO_YOUR_SPRING_BOOT_PROJECT\\src\\main\\resources\\META-INF\\native-image -jar PATH_TO_YOUR_SPRING_BOOT_PROJECT\\target\\NAME_OF_FAT_JAR.jar\n</code></pre>\n<p>It will produce reachability files in your project's resources folder. Then build your project using org.graalvm.buildtools:native-maven-plugin. The plugin will automatically pick up the files produced by the agent if you save them in resources\\META-INF. If you still get missing classes, resources etc. during the execution - repeat the run. It will merge newly found information with previously created files.\nVery rudimentary documentation can be found here: <a href=\"https://www.graalvm.org/22.0/reference-manual/native-image/Agent/\" rel=\"nofollow noreferrer\">https://www.graalvm.org/22.0/reference-manual/native-image/Agent/</a></p>\n"}],"owner":{"account_id":10344759,"reputation":672,"user_id":7630061,"display_name":"Matthias Danetzky"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77057233,"answer_count":1,"score":0,"last_activity_date":1694070096,"creation_date":1693821368,"question_id":77036746,"body_markdown":"I am trying to create a GraalVM compiled native executable connecting to kafka using org.springframework.kafka:spring-kafka. In plain java everything works fine. After compiling into native executable it fails to start throwing:\r\n```\r\nCaused by: org.apache.kafka.common.KafkaException: org.apache.kafka.common.KafkaException: \r\nCould not find a public no-argument constructor for \r\norg.apache.kafka.common.security.oauthbearer.internals.OAuthBearerSaslClientCallbackHandler\r\n```\r\nI&#39;ve tried reflect-config.json as well as graalvm-reachability-metadata. Both to no avail. I couldn&#39;t find any working instruction via google, hence this post.\r\nI am using spring-boot 3.1.3.","title":"GraalVM native missing kafka clients OAuthBearerSaslClientCallbackHandler","body":"<p>I am trying to create a GraalVM compiled native executable connecting to kafka using org.springframework.kafka:spring-kafka. In plain java everything works fine. After compiling into native executable it fails to start throwing:</p>\n<pre><code>Caused by: org.apache.kafka.common.KafkaException: org.apache.kafka.common.KafkaException: \nCould not find a public no-argument constructor for \norg.apache.kafka.common.security.oauthbearer.internals.OAuthBearerSaslClientCallbackHandler\n</code></pre>\n<p>I've tried reflect-config.json as well as graalvm-reachability-metadata. Both to no avail. I couldn't find any working instruction via google, hence this post.\nI am using spring-boot 3.1.3.</p>\n"},{"tags":["java","spring","spring-boot","authentication","websocket"],"comments":[{"owner":{"account_id":1962736,"reputation":311,"user_id":1763792,"display_name":"almondandapricot"},"score":0,"creation_date":1611582592,"post_id":45405332,"comment_id":116490710,"body_markdown":"Great write-up. Is it a worse approach, to actually defer authentication even further, to the handling of the first SEND frame? as opposed to the CONNECT frame. I am not yet clear on any benefits it might yield, but is it perhaps a no-no, compared to the way you describe in the answer?","body":"Great write-up. Is it a worse approach, to actually defer authentication even further, to the handling of the first SEND frame? as opposed to the CONNECT frame. I am not yet clear on any benefits it might yield, but is it perhaps a no-no, compared to the way you describe in the answer?"},{"owner":{"account_id":1962736,"reputation":311,"user_id":1763792,"display_name":"almondandapricot"},"score":0,"creation_date":1611583030,"post_id":45405332,"comment_id":116490945,"body_markdown":"...first SEND or SUBSCRIBE, in fact","body":"...first SEND or SUBSCRIBE, in fact"},{"owner":{"account_id":2629478,"reputation":7504,"user_id":2275818,"accept_rate":100,"display_name":"Anthony Raymond"},"score":0,"creation_date":1611663114,"post_id":45405332,"comment_id":116517877,"body_markdown":"IMHO it&#39;s better to do it on CONNECT (and STOMP to support v1.2), because it&#39;s a common entrypoint instead of SEND, SUBSCRIBE, BEGIN, or any other Frame that may be introduce in future RFC","body":"IMHO it&#39;s better to do it on CONNECT (and STOMP to support v1.2), because it&#39;s a common entrypoint instead of SEND, SUBSCRIBE, BEGIN, or any other Frame that may be introduce in future RFC"}],"answers":[{"comments":[{"owner":{"account_id":2366187,"reputation":60162,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":0,"creation_date":1501454509,"post_id":45405333,"comment_id":77771156,"body_markdown":"Don&#39;t quite understand - what&#39;s wrong with the [Spring documentation](https://docs.spring.io/spring-security/site/docs/current/reference/html/websocket.html) on this? Why aren&#39;t you using `AbstractSecurityWebSocketMessageBrokerConfigurer`? As it stands you have no CSRF. Also, I sincerely hope your passwords are stored hashed in the database...","body":"Don&#39;t quite understand - what&#39;s wrong with the <a href=\"https://docs.spring.io/spring-security/site/docs/current/reference/html/websocket.html\" rel=\"nofollow noreferrer\">Spring documentation</a> on this? Why aren&#39;t you using <code>AbstractSecurityWebSocketMessageBrokerConfigurer</code>? As it stands you have no CSRF. Also, I sincerely hope your passwords are stored hashed in the database..."},{"owner":{"account_id":2629478,"reputation":7504,"user_id":2275818,"accept_rate":100,"display_name":"Anthony Raymond"},"score":0,"creation_date":1501454767,"post_id":45405333,"comment_id":77771221,"body_markdown":"i do use `AbstractSecurityWebSocketMessageBrokerConfigurer` (take a look at the last code block) but this class is just for Authorization, you just can&#39;t register a Interceptor before the security check and thus fill your `simpUser`. To register the interceptor before the security check you have to use `AbstractWebSocketMessageBrokerConfigurer `with a super high `@Order`. Plus the Interceptor must fill the `simpUser` with a `UsernamePasswordAuthenticationToken` and nothing else, which is not documented at all.","body":"i do use <code>AbstractSecurityWebSocketMessageBrokerConfigurer</code> (take a look at the last code block) but this class is just for Authorization, you just can&#39;t register a Interceptor before the security check and thus fill your <code>simpUser</code>. To register the interceptor before the security check you have to use <code>AbstractWebSocketMessageBrokerConfigurer </code>with a super high <code>@Order</code>. Plus the Interceptor must fill the <code>simpUser</code> with a <code>UsernamePasswordAuthenticationToken</code> and nothing else, which is not documented at all."},{"owner":{"account_id":2629478,"reputation":7504,"user_id":2275818,"accept_rate":100,"display_name":"Anthony Raymond"},"score":0,"creation_date":1501456467,"post_id":45405333,"comment_id":77771597,"body_markdown":"*As it stands you have no CSRF. Also, I sincerely hope your passwords are stored hashed in the database*. Woops, i disabled CSRF for test purpose and forgot to remove this line. - I personaly don&#39;t use database, there is only one user allowed to connect, and the password is defined at runtime.","body":"<i>As it stands you have no CSRF. Also, I sincerely hope your passwords are stored hashed in the database</i>. Woops, i disabled CSRF for test purpose and forgot to remove this line. - I personaly don&#39;t use database, there is only one user allowed to connect, and the password is defined at runtime."},{"owner":{"account_id":2366187,"reputation":60162,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":1,"creation_date":1501569781,"post_id":45405333,"comment_id":77822223,"body_markdown":"Quoting from the [Spring Security guide](https://docs.spring.io/spring-security/site/docs/current/reference/html/websocket.html) &quot;_More concretely, to ensure a user has authenticated to your WebSocket application, all that is necessary is to ensure that you setup Spring Security to authenticate your HTTP based web application._&quot; So, the point is, that you authenticate access to the `http` endpoint using standard Spring Security methods, then you verify CSRF on `CONNECT` and use role based security on configured STOMP destinations. I am still unsure of the use case for the above.","body":"Quoting from the <a href=\"https://docs.spring.io/spring-security/site/docs/current/reference/html/websocket.html\" rel=\"nofollow noreferrer\">Spring Security guide</a> &quot;<i>More concretely, to ensure a user has authenticated to your WebSocket application, all that is necessary is to ensure that you setup Spring Security to authenticate your HTTP based web application.</i>&quot; So, the point is, that you authenticate access to the <code>http</code> endpoint using standard Spring Security methods, then you verify CSRF on <code>CONNECT</code> and use role based security on configured STOMP destinations. I am still unsure of the use case for the above."},{"owner":{"account_id":2629478,"reputation":7504,"user_id":2275818,"accept_rate":100,"display_name":"Anthony Raymond"},"score":3,"creation_date":1501581682,"post_id":45405333,"comment_id":77830203,"body_markdown":"The fact is that none of the javascrip STOMP libraries are passing authentication headers along with the HTTP handshake call. And Spring has chosen to allow users to authenticate only though HTTP. But we cant blame them for that, the WebSocket RFC is unclear and very permissive on this subject: *This protocol doesn&#39;t prescribe any particular way that servers can authenticate clients during the WebSocket handshake.*","body":"The fact is that none of the javascrip STOMP libraries are passing authentication headers along with the HTTP handshake call. And Spring has chosen to allow users to authenticate only though HTTP. But we cant blame them for that, the WebSocket RFC is unclear and very permissive on this subject: <i>This protocol doesn&#39;t prescribe any particular way that servers can authenticate clients during the WebSocket handshake.</i>"},{"owner":{"account_id":2366187,"reputation":60162,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":0,"creation_date":1501582371,"post_id":45405333,"comment_id":77830735,"body_markdown":"But if only an authenticated user can _access_ the websocket endpoint then reauthenticating them on `CONNECT` is a little pointless. No?","body":"But if only an authenticated user can <i>access</i> the websocket endpoint then reauthenticating them on <code>CONNECT</code> is a little pointless. No?"},{"owner":{"account_id":2629478,"reputation":7504,"user_id":2275818,"accept_rate":100,"display_name":"Anthony Raymond"},"score":1,"creation_date":1501586966,"post_id":45405333,"comment_id":77833804,"body_markdown":"None of JavaScript stomp library send authentication headers along with http handshake. So you can&#39;t restrict access to the http negociation endpoint. You have to authenticate your users on CONNECT. Of course if you use a spring client you won&#39;t need all of this overwelmed stuff. The point of this boilerplate is to provide an example that use Spring backend for JavaScript stomp clients.","body":"None of JavaScript stomp library send authentication headers along with http handshake. So you can&#39;t restrict access to the http negociation endpoint. You have to authenticate your users on CONNECT. Of course if you use a spring client you won&#39;t need all of this overwelmed stuff. The point of this boilerplate is to provide an example that use Spring backend for JavaScript stomp clients."},{"owner":{"account_id":2366187,"reputation":60162,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":0,"creation_date":1501587319,"post_id":45405333,"comment_id":77834087,"body_markdown":"But to _connect_ to the websocket, you need access to the URL. _That_ is where the Spring Security authentication kicks in. Then the role based authorisation ensures that the authenticated user can only subscribe to the appropriate locations. I really don&#39;t see what adding credentials to `CONNECT` adds, as that user is _already authenticated_ during access to the URL.","body":"But to <i>connect</i> to the websocket, you need access to the URL. <i>That</i> is where the Spring Security authentication kicks in. Then the role based authorisation ensures that the authenticated user can only subscribe to the appropriate locations. I really don&#39;t see what adding credentials to <code>CONNECT</code> adds, as that user is <i>already authenticated</i> during access to the URL."},{"owner":{"account_id":2629478,"reputation":7504,"user_id":2275818,"accept_rate":100,"display_name":"Anthony Raymond"},"score":5,"creation_date":1501588172,"post_id":45405333,"comment_id":77834751,"body_markdown":"Spring described method state that : *You should provide sufficient information (login password or whatever) while accessing the HTTP necotiation endpoint (handshake endpoint) to allow Spring to authenticate you through the Spring-Security chain*. But none of the javaScript STOMP libraries do send these information along with the HTTP negiciation call. These headers are sent with `CONNECT` message in `nativeHeaders: { login: xxxx, passcode: xxxx}`. Therefore if no informations are sent on HTTP call, you can&#39;t authenticate at this point.","body":"Spring described method state that : <i>You should provide sufficient information (login password or whatever) while accessing the HTTP necotiation endpoint (handshake endpoint) to allow Spring to authenticate you through the Spring-Security chain</i>. But none of the javaScript STOMP libraries do send these information along with the HTTP negiciation call. These headers are sent with <code>CONNECT</code> message in <code>nativeHeaders: { login: xxxx, passcode: xxxx}</code>. Therefore if no informations are sent on HTTP call, you can&#39;t authenticate at this point."},{"owner":{"account_id":258187,"reputation":1540,"user_id":540195,"accept_rate":18,"display_name":"Amit"},"score":0,"creation_date":1504155550,"post_id":45405333,"comment_id":78905852,"body_markdown":"I want to implement machine to backend web socket authentication and authorization, there are no user Principle, then how can I proceed?","body":"I want to implement machine to backend web socket authentication and authorization, there are no user Principle, then how can I proceed?"},{"owner":{"account_id":2629478,"reputation":7504,"user_id":2275818,"accept_rate":100,"display_name":"Anthony Raymond"},"score":0,"creation_date":1504163421,"post_id":45405333,"comment_id":78909173,"body_markdown":"I&#39;m sorry but i don&#39;t undestand your question","body":"I&#39;m sorry but i don&#39;t undestand your question"},{"owner":{"account_id":4321939,"reputation":1282,"user_id":3529850,"accept_rate":67,"display_name":"user3529850"},"score":0,"creation_date":1507041429,"post_id":45405333,"comment_id":80048486,"body_markdown":"@AnthonyRaymond I&#39;m getting `message:Failed to send message to ExecutorSubscribableChannel[clientInboundChannel]; nested exception is org.springframework.security.web.csrf.MissingCsrfTokenException\\c Could not verify the provided CSRF token because your session was not found.\ncontent-length:0`. Only changes I made are:\n`1.)`  removed `sameOriginDisabled`\n`2.)` left `Collections.singleton((GrantedAuthority) () -&gt; &quot;USER&quot;));` but I&#39;m not quite sure what it supposed to do. I have different roles for users if this is it. F.e. I defined `USERS_READ`, `USERS_EDIT` etc., should I change it ?","body":"@AnthonyRaymond I&#39;m getting <code>message:Failed to send message to ExecutorSubscribableChannel[clientInboundChannel]; nested exception is org.springframework.security.web.csrf.MissingCsrfTokenExcept&zwnj;&#8203;ion\\c Could not verify the provided CSRF token because your session was not found. content-length:0</code>. Only changes I made are: <code>1.)</code>  removed <code>sameOriginDisabled</code> <code>2.)</code> left <code>Collections.singleton((GrantedAuthority) () -&gt; &quot;USER&quot;));</code> but I&#39;m not quite sure what it supposed to do. I have different roles for users if this is it. F.e. I defined <code>USERS_READ</code>, <code>USERS_EDIT</code> etc., should I change it ?"},{"owner":{"account_id":2629478,"reputation":7504,"user_id":2275818,"accept_rate":100,"display_name":"Anthony Raymond"},"score":0,"creation_date":1507042380,"post_id":45405333,"comment_id":80049144,"body_markdown":"If you enable `sameOriginDisabled` you have to obtain a CSRF token from the server in order to init a connection. This is kind of a pain in the ass since most of the JS libraries don&#39;t send http headers along with the HTTP request anyway... If i were you i would just re-disable the CSRF. BUT be sure that you are aware of the risks, run some google search about CSRF if you are not familiar with. Also i believe that CSRF implies sessions, so you should most likely remove `.sessionCreationPolicy(SessionCreationPolicy.STATELESS)`.","body":"If you enable <code>sameOriginDisabled</code> you have to obtain a CSRF token from the server in order to init a connection. This is kind of a pain in the ass since most of the JS libraries don&#39;t send http headers along with the HTTP request anyway... If i were you i would just re-disable the CSRF. BUT be sure that you are aware of the risks, run some google search about CSRF if you are not familiar with. Also i believe that CSRF implies sessions, so you should most likely remove <code>.sessionCreationPolicy(SessionCreationPolicy.STATELESS)</code>."},{"owner":{"account_id":6490968,"reputation":356,"user_id":5025049,"display_name":"S&#245;ber"},"score":0,"creation_date":1518389730,"post_id":45405333,"comment_id":84474295,"body_markdown":"AbstractWebSocketMessageBrokerConfigurer has been deprecated.","body":"AbstractWebSocketMessageBrokerConfigurer has been deprecated."},{"owner":{"account_id":2629478,"reputation":7504,"user_id":2275818,"accept_rate":100,"display_name":"Anthony Raymond"},"score":1,"creation_date":1518427140,"post_id":45405333,"comment_id":84485596,"body_markdown":"You can use [WebSocketMessageBrokerConfigurer](https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/socket/config/annotation/WebSocketMessageBrokerConfigurer.html) instead.","body":"You can use <a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/socket/config/annotation/WebSocketMessageBrokerConfigurer.html\" rel=\"nofollow noreferrer\">WebSocketMessageBrokerConfigurer</a> instead."},{"owner":{"account_id":84830,"reputation":5737,"user_id":236896,"accept_rate":50,"display_name":"Manoj"},"score":0,"creation_date":1521736680,"post_id":45405333,"comment_id":85869808,"body_markdown":"I too needed this, I did as mentioned, but if CONNECT call throws exception, SUBSCRIBE &amp; SEND are working fine. I thought if CONNECT throws exception, other frames won&#39;t work. Can you correct me if I am wrong?. I&#39;m passing headers in all the frames and I&#39;m authenticating now. But I feel this seems wrong.","body":"I too needed this, I did as mentioned, but if CONNECT call throws exception, SUBSCRIBE &amp; SEND are working fine. I thought if CONNECT throws exception, other frames won&#39;t work. Can you correct me if I am wrong?. I&#39;m passing headers in all the frames and I&#39;m authenticating now. But I feel this seems wrong."},{"owner":{"account_id":2629478,"reputation":7504,"user_id":2275818,"accept_rate":100,"display_name":"Anthony Raymond"},"score":1,"creation_date":1521754294,"post_id":45405333,"comment_id":85879556,"body_markdown":"Yep, it definely seems wrong, i&#39;ll need to take a look at that. Unfortunately i don&#39;t have much times these days. I&#39;ll get back to you as soon i had enought time to check if out","body":"Yep, it definely seems wrong, i&#39;ll need to take a look at that. Unfortunately i don&#39;t have much times these days. I&#39;ll get back to you as soon i had enought time to check if out"},{"owner":{"account_id":2629478,"reputation":7504,"user_id":2275818,"accept_rate":100,"display_name":"Anthony Raymond"},"score":0,"creation_date":1523313546,"post_id":45405333,"comment_id":86500020,"body_markdown":"@Manoj can you describe how you succed in sending other frame with an error on CONNECT ? Or maybe a link to your client project code?","body":"@Manoj can you describe how you succed in sending other frame with an error on CONNECT ? Or maybe a link to your client project code?"},{"owner":{"account_id":84830,"reputation":5737,"user_id":236896,"accept_rate":50,"display_name":"Manoj"},"score":1,"creation_date":1523470888,"post_id":45405333,"comment_id":86579325,"body_markdown":"sorry, I couldn&#39;t replicate it now. If I come across again, I will post the code.","body":"sorry, I couldn&#39;t replicate it now. If I come across again, I will post the code."},{"owner":{"account_id":8077786,"reputation":560,"user_id":6088168,"display_name":"Hugo Sartori"},"score":0,"creation_date":1547501878,"post_id":45405333,"comment_id":95207237,"body_markdown":"getAuthenticatedOrFail is failing because, after sending the request, the password change itself to &quot;PROTECTED&quot; and the pass comparasion fails. If I change the header name from &quot;passcode&quot; to &quot;pass&quot; (or something else) everything works thine. What am I doing wrong?","body":"getAuthenticatedOrFail is failing because, after sending the request, the password change itself to &quot;PROTECTED&quot; and the pass comparasion fails. If I change the header name from &quot;passcode&quot; to &quot;pass&quot; (or something else) everything works thine. What am I doing wrong?"},{"owner":{"account_id":2629478,"reputation":7504,"user_id":2275818,"accept_rate":100,"display_name":"Anthony Raymond"},"score":0,"creation_date":1547545871,"post_id":45405333,"comment_id":95219496,"body_markdown":"i do&#39;nt think tha tthe password is changinf from something to PROTECTED. On the other hand, most of the time spring&#39;s developper override the `.toString()` methods of objects and show PROTECTED instead of the password. I think that this is what you are talking about. If you add a breakpoint on the line `fetchUserFromDb(username, password)` what do you see as a password?","body":"i do&#39;nt think tha tthe password is changinf from something to PROTECTED. On the other hand, most of the time spring&#39;s developper override the <code>.toString()</code> methods of objects and show PROTECTED instead of the password. I think that this is what you are talking about. If you add a breakpoint on the line <code>fetchUserFromDb(username, password)</code> what do you see as a password?"},{"owner":{"account_id":922912,"reputation":1160,"user_id":954246,"accept_rate":75,"display_name":"newhouse"},"score":0,"creation_date":1565954812,"post_id":45405333,"comment_id":101514048,"body_markdown":"Then I really misunderstand something because I think this documentation clearly say that the common security settings are shared amongst the http and the websocket accesses: https://docs.spring.io/autorepo/docs/spring-security/4.1.x/reference/html/websocket.html#websocket-authentication","body":"Then I really misunderstand something because I think this documentation clearly say that the common security settings are shared amongst the http and the websocket accesses: <a href=\"https://docs.spring.io/autorepo/docs/spring-security/4.1.x/reference/html/websocket.html#websocket-authentication\" rel=\"nofollow noreferrer\">docs.spring.io/autorepo/docs/spring-security/4.1.x/reference&zwnj;&#8203;/&hellip;</a>"},{"owner":{"account_id":2629478,"reputation":7504,"user_id":2275818,"accept_rate":100,"display_name":"Anthony Raymond"},"score":4,"creation_date":1565958786,"post_id":45405333,"comment_id":101515846,"body_markdown":"Yep `WebSockets reuse the same authentication information that is found in the HTTP request when the WebSocket connection was made`. That is true, Websockets (so do stomp) rely on a first HTTP negotiation call, and spring expects that the authentication will take place here. But there is not a single stomp JS libs that forwards the credentials during this negotiation call. because of that you need to authenticate after the negotioation. And thus use the websocket to authenticate. That&#39;s why i sais that the two chains are decoupled.","body":"Yep <code>WebSockets reuse the same authentication information that is found in the HTTP request when the WebSocket connection was made</code>. That is true, Websockets (so do stomp) rely on a first HTTP negotiation call, and spring expects that the authentication will take place here. But there is not a single stomp JS libs that forwards the credentials during this negotiation call. because of that you need to authenticate after the negotioation. And thus use the websocket to authenticate. That&#39;s why i sais that the two chains are decoupled."},{"owner":{"account_id":5552980,"reputation":219,"user_id":4405431,"accept_rate":36,"display_name":"Nazim"},"score":0,"creation_date":1574233725,"post_id":45405333,"comment_id":104154035,"body_markdown":"Can you please share `fetchUserFromDb(username, password)` method code. Because I am saving my password in DB in hashes. I don&#39;t know how to match the password. Also in my application i want to notify other users if an user logout from app. But i found once the `HttpSession` expires i am not able to send messages. So how can i do it. Thanks.","body":"Can you please share <code>fetchUserFromDb(username, password)</code> method code. Because I am saving my password in DB in hashes. I don&#39;t know how to match the password. Also in my application i want to notify other users if an user logout from app. But i found once the <code>HttpSession</code> expires i am not able to send messages. So how can i do it. Thanks."},{"owner":{"account_id":2629478,"reputation":7504,"user_id":2275818,"accept_rate":100,"display_name":"Anthony Raymond"},"score":0,"creation_date":1574244308,"post_id":45405333,"comment_id":104159399,"body_markdown":"@Nazim For the first point it&#39;s already well explain all over the internet, i&#39;ll let you google about that. For the second point i&#39;m sorry but i have no idea","body":"@Nazim For the first point it&#39;s already well explain all over the internet, i&#39;ll let you google about that. For the second point i&#39;m sorry but i have no idea"},{"owner":{"account_id":5552980,"reputation":219,"user_id":4405431,"accept_rate":36,"display_name":"Nazim"},"score":0,"creation_date":1574323970,"post_id":45405333,"comment_id":104194023,"body_markdown":"@AnthonyRaymond I am using Redis for session. I tried debugging the `StompHeaderAccessor` and i got `null` for both `username` and `password` header. I am getting `x-auth-token` in header.Now can you please tell me how to verify the user ? Thanks.","body":"@AnthonyRaymond I am using Redis for session. I tried debugging the <code>StompHeaderAccessor</code> and i got <code>null</code> for both <code>username</code> and <code>password</code> header. I am getting <code>x-auth-token</code> in header.Now can you please tell me how to verify the user ? Thanks."},{"owner":{"account_id":4405100,"reputation":1990,"user_id":3589749,"accept_rate":67,"display_name":"abhishek ringsia"},"score":0,"creation_date":1613984773,"post_id":45405333,"comment_id":117235077,"body_markdown":"I could not be more agree that it is like &quot;spending two days trying to understand&quot;","body":"I could not be more agree that it is like &quot;spending two days trying to understand&quot;"},{"owner":{"account_id":287912,"reputation":346,"user_id":588018,"display_name":"Erick Audet"},"score":7,"creation_date":1630946322,"post_id":45405333,"comment_id":122087309,"body_markdown":"Still to this day, your post is the ONLY thing that works. Spring boot documentation is still lacking clear instructions. Thanks a lot","body":"Still to this day, your post is the ONLY thing that works. Spring boot documentation is still lacking clear instructions. Thanks a lot"},{"owner":{"account_id":26186898,"reputation":99,"user_id":19869319,"display_name":"Alex"},"score":0,"creation_date":1693216727,"post_id":45405333,"comment_id":135726276,"body_markdown":"Hi, I don&#39;t wanna use Stomp i just used this as websocket handler: registry.addHandler(activeUsersWebSocketHandler, &quot;/active-users&quot;) but if i use this endpoint in the permitAll it will ignore and filter anyway, any help please","body":"Hi, I don&#39;t wanna use Stomp i just used this as websocket handler: registry.addHandler(activeUsersWebSocketHandler, &quot;/active-users&quot;) but if i use this endpoint in the permitAll it will ignore and filter anyway, any help please"}],"tags":[],"owner":{"account_id":2629478,"reputation":7504,"user_id":2275818,"accept_rate":100,"display_name":"Anthony Raymond"},"comment_count":29,"down_vote_count":1,"up_vote_count":137,"is_accepted":true,"score":136,"last_activity_date":1635849935,"creation_date":1501453751,"answer_id":45405333,"question_id":45405332,"body_markdown":"As stated above the documentation looks unclear (IMHO), until Spring provide some clear documentation, here is a boilerplate to save you from spending two days trying to understand what the security chain is doing.\r\n\r\nA really nice attempt was made by [Rob-Leggett](https://github.com/Rob-Leggett/angular_websockets_security) but, he was [forking some Springs class](https://github.com/Rob-Leggett/angular_websockets_security/tree/master/security/src/main/java/au/com/example/security/spring/security/config) and I don&#39;t feel comfortable doing so.\r\n\r\nThings to know before you start:\r\n\r\n- *Security chain* and *Security config* for **http** and **WebSocket** are completely independent.\r\n- Spring `AuthenticationProvider` take not part at all in Websocket authentication.\r\n- The authentication won&#39;t happen on HTTP negotiation endpoint in our case, because none of the JavaScripts STOMP (websocket) libraries I know sends the necessary authentication headers along with the HTTP request.\r\n- Once set on CONNECT request, the *user* (`simpUser`) will be stored in the websocket session and no more authentication will be required on further messages.\r\n\r\n### Maven deps\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-websocket&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-messaging&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-security-messaging&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\n### WebSocket configuration\r\nThe below config register a simple message broker (a simple endpoint that we will later protect).\r\n\r\n    @Configuration\r\n    @EnableWebSocketMessageBroker\r\n    public class WebSocketConfig extends WebSocketMessageBrokerConfigurer {\r\n        @Override\r\n        public void configureMessageBroker(final MessageBrokerRegistry config) {\r\n            // These are endpoints the client can subscribes to.\r\n            config.enableSimpleBroker(&quot;/queue/topic&quot;);\r\n            // Message received with one of those below destinationPrefixes will be automatically router to controllers @MessageMapping\r\n            config.setApplicationDestinationPrefixes(&quot;/app&quot;);\r\n        }\r\n\r\n        @Override\r\n        public void registerStompEndpoints(final StompEndpointRegistry registry) {\r\n            // Handshake endpoint\r\n            registry.addEndpoint(&quot;stomp&quot;); // If you want to you can chain setAllowedOrigins(&quot;*&quot;)\r\n        }\r\n    }\r\n\r\n### Spring security config\r\nSince the Stomp protocol rely on a first HTTP Request, we&#39;ll need to authorize HTTP call to our stomp handshake endpoint.\r\n\r\n    @Configuration\r\n    public class WebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n        @Override\r\n        protected void configure(final HttpSecurity http) throws Exception {\r\n            // This is not for websocket authorization, and this should most likely not be altered.\r\n            http\r\n                    .httpBasic().disable()\r\n                    .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\r\n                    .authorizeRequests().antMatchers(&quot;/stomp&quot;).permitAll()\r\n                    .anyRequest().denyAll();\r\n        }\r\n    }\r\n\r\n&lt;br /&gt;\r\nThen we&#39;ll create a service responsible for authenticating users.\r\n\r\n    @Component\r\n    public class WebSocketAuthenticatorService {\r\n        // This method MUST return a UsernamePasswordAuthenticationToken instance, the spring security chain is testing it with &#39;instanceof&#39; later on. So don&#39;t use a subclass of it or any other class\r\n        public UsernamePasswordAuthenticationToken getAuthenticatedOrFail(final String  username, final String password) throws AuthenticationException {\r\n            if (username == null || username.trim().isEmpty()) {\r\n                throw new AuthenticationCredentialsNotFoundException(&quot;Username was null or empty.&quot;);\r\n            }\r\n            if (password == null || password.trim().isEmpty()) {\r\n                throw new AuthenticationCredentialsNotFoundException(&quot;Password was null or empty.&quot;);\r\n            }\r\n            // Add your own logic for retrieving user in fetchUserFromDb()\r\n            if (fetchUserFromDb(username, password) == null) {\r\n                throw new BadCredentialsException(&quot;Bad credentials for user &quot; + username);\r\n            }\r\n\r\n            // null credentials, we do not pass the password along\r\n            return new UsernamePasswordAuthenticationToken(\r\n                    username,\r\n                    null,\r\n                    Collections.singleton((GrantedAuthority) () -&gt; &quot;USER&quot;) // MUST provide at least one role\r\n            );\r\n        }\r\n    }\r\nNote that: `UsernamePasswordAuthenticationToken` **MUST** have at least one GrantedAuthority, if you use another constructor, Spring will auto-set `isAuthenticated = false`.\r\n\r\n\r\n&lt;br /&gt;\r\nAlmost there, now we need to create an Interceptor that will set the `simpUser` header or throw `AuthenticationException` on CONNECT messages.\r\n\r\n    @Component\r\n    public class AuthChannelInterceptorAdapter extends ChannelInterceptor {\r\n        private static final String USERNAME_HEADER = &quot;login&quot;;\r\n        private static final String PASSWORD_HEADER = &quot;passcode&quot;;\r\n        private final WebSocketAuthenticatorService webSocketAuthenticatorService;\r\n\r\n        @Inject\r\n        public AuthChannelInterceptorAdapter(final WebSocketAuthenticatorService webSocketAuthenticatorService) {\r\n            this.webSocketAuthenticatorService = webSocketAuthenticatorService;\r\n        }\r\n\r\n        @Override\r\n        public Message&lt;?&gt; preSend(final Message&lt;?&gt; message, final MessageChannel channel) throws AuthenticationException {\r\n            final StompHeaderAccessor accessor = MessageHeaderAccessor.getAccessor(message, StompHeaderAccessor.class);\r\n\r\n            if (StompCommand.CONNECT == accessor.getCommand()) {\r\n                final String username = accessor.getFirstNativeHeader(USERNAME_HEADER);\r\n                final String password = accessor.getFirstNativeHeader(PASSWORD_HEADER);\r\n\r\n                final UsernamePasswordAuthenticationToken user = webSocketAuthenticatorService.getAuthenticatedOrFail(username, password);\r\n\r\n                accessor.setUser(user);\r\n            }\r\n            return message;\r\n        }\r\n    }\r\nNote that: `preSend()` **MUST** return a `UsernamePasswordAuthenticationToken`, another element in the spring security chain test this.\r\nNote that: If your `UsernamePasswordAuthenticationToken` was built without passing `GrantedAuthority`, the authentication will fail, because the constructor without granted authorities auto set `authenticated = false` **THIS IS AN IMPORTANT DETAIL which is not documented in spring-security**.\r\n\r\n&lt;br /&gt;\r\nFinally create two more class to handle respectively Authorization and Authentication.\r\n\r\n    @Configuration\r\n    @Order(Ordered.HIGHEST_PRECEDENCE + 99)\r\n    public class WebSocketAuthenticationSecurityConfig extends  WebSocketMessageBrokerConfigurer {\r\n        @Inject\r\n        private AuthChannelInterceptorAdapter authChannelInterceptorAdapter;\r\n        \r\n        @Override\r\n        public void registerStompEndpoints(final StompEndpointRegistry registry) {\r\n            // Endpoints are already registered on WebSocketConfig, no need to add more.\r\n        }\r\n\r\n        @Override\r\n        public void configureClientInboundChannel(final ChannelRegistration registration) {\r\n            registration.setInterceptors(authChannelInterceptorAdapter);\r\n        }\r\n\r\n    }\r\n\r\nNote that: The `@Order` is **CRUCIAL** don&#39;t forget it, it allows our interceptor to be registered first in the security chain.\r\n\r\n    @Configuration\r\n    public class WebSocketAuthorizationSecurityConfig extends AbstractSecurityWebSocketMessageBrokerConfigurer {\r\n        @Override\r\n        protected void configureInbound(final MessageSecurityMetadataSourceRegistry messages) {\r\n            // You can customize your authorization mapping here.\r\n            messages.anyMessage().authenticated();\r\n        }\r\n\r\n        // TODO: For test purpose (and simplicity) i disabled CSRF, but you should re-enable this and provide a CRSF endpoint.\r\n        @Override\r\n        protected boolean sameOriginDisabled() {\r\n            return true;\r\n        }\r\n    }","title":"Websocket Authentication and Authorization in Spring","body":"<p>As stated above the documentation looks unclear (IMHO), until Spring provide some clear documentation, here is a boilerplate to save you from spending two days trying to understand what the security chain is doing.</p>\n<p>A really nice attempt was made by <a href=\"https://github.com/Rob-Leggett/angular_websockets_security\" rel=\"noreferrer\">Rob-Leggett</a> but, he was <a href=\"https://github.com/Rob-Leggett/angular_websockets_security/tree/master/security/src/main/java/au/com/example/security/spring/security/config\" rel=\"noreferrer\">forking some Springs class</a> and I don't feel comfortable doing so.</p>\n<p>Things to know before you start:</p>\n<ul>\n<li><em>Security chain</em> and <em>Security config</em> for <strong>http</strong> and <strong>WebSocket</strong> are completely independent.</li>\n<li>Spring <code>AuthenticationProvider</code> take not part at all in Websocket authentication.</li>\n<li>The authentication won't happen on HTTP negotiation endpoint in our case, because none of the JavaScripts STOMP (websocket) libraries I know sends the necessary authentication headers along with the HTTP request.</li>\n<li>Once set on CONNECT request, the <em>user</em> (<code>simpUser</code>) will be stored in the websocket session and no more authentication will be required on further messages.</li>\n</ul>\n<h3>Maven deps</h3>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-websocket&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-messaging&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-security-messaging&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<h3>WebSocket configuration</h3>\n<p>The below config register a simple message broker (a simple endpoint that we will later protect).</p>\n<pre><code>@Configuration\n@EnableWebSocketMessageBroker\npublic class WebSocketConfig extends WebSocketMessageBrokerConfigurer {\n    @Override\n    public void configureMessageBroker(final MessageBrokerRegistry config) {\n        // These are endpoints the client can subscribes to.\n        config.enableSimpleBroker(&quot;/queue/topic&quot;);\n        // Message received with one of those below destinationPrefixes will be automatically router to controllers @MessageMapping\n        config.setApplicationDestinationPrefixes(&quot;/app&quot;);\n    }\n\n    @Override\n    public void registerStompEndpoints(final StompEndpointRegistry registry) {\n        // Handshake endpoint\n        registry.addEndpoint(&quot;stomp&quot;); // If you want to you can chain setAllowedOrigins(&quot;*&quot;)\n    }\n}\n</code></pre>\n<h3>Spring security config</h3>\n<p>Since the Stomp protocol rely on a first HTTP Request, we'll need to authorize HTTP call to our stomp handshake endpoint.</p>\n<pre><code>@Configuration\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n    @Override\n    protected void configure(final HttpSecurity http) throws Exception {\n        // This is not for websocket authorization, and this should most likely not be altered.\n        http\n                .httpBasic().disable()\n                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\n                .authorizeRequests().antMatchers(&quot;/stomp&quot;).permitAll()\n                .anyRequest().denyAll();\n    }\n}\n</code></pre>\n<br />\nThen we'll create a service responsible for authenticating users.\n<pre><code>@Component\npublic class WebSocketAuthenticatorService {\n    // This method MUST return a UsernamePasswordAuthenticationToken instance, the spring security chain is testing it with 'instanceof' later on. So don't use a subclass of it or any other class\n    public UsernamePasswordAuthenticationToken getAuthenticatedOrFail(final String  username, final String password) throws AuthenticationException {\n        if (username == null || username.trim().isEmpty()) {\n            throw new AuthenticationCredentialsNotFoundException(&quot;Username was null or empty.&quot;);\n        }\n        if (password == null || password.trim().isEmpty()) {\n            throw new AuthenticationCredentialsNotFoundException(&quot;Password was null or empty.&quot;);\n        }\n        // Add your own logic for retrieving user in fetchUserFromDb()\n        if (fetchUserFromDb(username, password) == null) {\n            throw new BadCredentialsException(&quot;Bad credentials for user &quot; + username);\n        }\n\n        // null credentials, we do not pass the password along\n        return new UsernamePasswordAuthenticationToken(\n                username,\n                null,\n                Collections.singleton((GrantedAuthority) () -&gt; &quot;USER&quot;) // MUST provide at least one role\n        );\n    }\n}\n</code></pre>\n<p>Note that: <code>UsernamePasswordAuthenticationToken</code> <strong>MUST</strong> have at least one GrantedAuthority, if you use another constructor, Spring will auto-set <code>isAuthenticated = false</code>.</p>\n<br />\nAlmost there, now we need to create an Interceptor that will set the `simpUser` header or throw `AuthenticationException` on CONNECT messages.\n<pre><code>@Component\npublic class AuthChannelInterceptorAdapter extends ChannelInterceptor {\n    private static final String USERNAME_HEADER = &quot;login&quot;;\n    private static final String PASSWORD_HEADER = &quot;passcode&quot;;\n    private final WebSocketAuthenticatorService webSocketAuthenticatorService;\n\n    @Inject\n    public AuthChannelInterceptorAdapter(final WebSocketAuthenticatorService webSocketAuthenticatorService) {\n        this.webSocketAuthenticatorService = webSocketAuthenticatorService;\n    }\n\n    @Override\n    public Message&lt;?&gt; preSend(final Message&lt;?&gt; message, final MessageChannel channel) throws AuthenticationException {\n        final StompHeaderAccessor accessor = MessageHeaderAccessor.getAccessor(message, StompHeaderAccessor.class);\n\n        if (StompCommand.CONNECT == accessor.getCommand()) {\n            final String username = accessor.getFirstNativeHeader(USERNAME_HEADER);\n            final String password = accessor.getFirstNativeHeader(PASSWORD_HEADER);\n\n            final UsernamePasswordAuthenticationToken user = webSocketAuthenticatorService.getAuthenticatedOrFail(username, password);\n\n            accessor.setUser(user);\n        }\n        return message;\n    }\n}\n</code></pre>\n<p>Note that: <code>preSend()</code> <strong>MUST</strong> return a <code>UsernamePasswordAuthenticationToken</code>, another element in the spring security chain test this.\nNote that: If your <code>UsernamePasswordAuthenticationToken</code> was built without passing <code>GrantedAuthority</code>, the authentication will fail, because the constructor without granted authorities auto set <code>authenticated = false</code> <strong>THIS IS AN IMPORTANT DETAIL which is not documented in spring-security</strong>.</p>\n<br />\nFinally create two more class to handle respectively Authorization and Authentication.\n<pre><code>@Configuration\n@Order(Ordered.HIGHEST_PRECEDENCE + 99)\npublic class WebSocketAuthenticationSecurityConfig extends  WebSocketMessageBrokerConfigurer {\n    @Inject\n    private AuthChannelInterceptorAdapter authChannelInterceptorAdapter;\n    \n    @Override\n    public void registerStompEndpoints(final StompEndpointRegistry registry) {\n        // Endpoints are already registered on WebSocketConfig, no need to add more.\n    }\n\n    @Override\n    public void configureClientInboundChannel(final ChannelRegistration registration) {\n        registration.setInterceptors(authChannelInterceptorAdapter);\n    }\n\n}\n</code></pre>\n<p>Note that: The <code>@Order</code> is <strong>CRUCIAL</strong> don't forget it, it allows our interceptor to be registered first in the security chain.</p>\n<pre><code>@Configuration\npublic class WebSocketAuthorizationSecurityConfig extends AbstractSecurityWebSocketMessageBrokerConfigurer {\n    @Override\n    protected void configureInbound(final MessageSecurityMetadataSourceRegistry messages) {\n        // You can customize your authorization mapping here.\n        messages.anyMessage().authenticated();\n    }\n\n    // TODO: For test purpose (and simplicity) i disabled CSRF, but you should re-enable this and provide a CRSF endpoint.\n    @Override\n    protected boolean sameOriginDisabled() {\n        return true;\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1962736,"reputation":311,"user_id":1763792,"display_name":"almondandapricot"},"score":0,"creation_date":1611582399,"post_id":51143404,"comment_id":116490627,"body_markdown":"This will work with stomp.js too. But these are *STOMP* headers (on the CONNECT frame). The original issue is that stomp.js won&#39;t set *HTTP* websocket-handshake headers that&#39;d be used by Spring Security to automatically authenticate.","body":"This will work with stomp.js too. But these are <i>STOMP</i> headers (on the CONNECT frame). The original issue is that stomp.js won&#39;t set <i>HTTP</i> websocket-handshake headers that&#39;d be used by Spring Security to automatically authenticate."}],"tags":[],"owner":{"account_id":7338059,"reputation":71,"user_id":5588692,"display_name":"tbw"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1579507574,"creation_date":1530563807,"answer_id":51143404,"question_id":45405332,"body_markdown":"for java client side use this tested example:\r\n\r\n    StompHeaders connectHeaders = new StompHeaders();\r\n    connectHeaders.add(&quot;login&quot;, &quot;test1&quot;);\r\n    connectHeaders.add(&quot;passcode&quot;, &quot;test&quot;);\r\n    stompClient.connect(WS_HOST_PORT, new WebSocketHttpHeaders(), connectHeaders, new MySessionHandler());","title":"Websocket Authentication and Authorization in Spring","body":"<p>for java client side use this tested example:</p>\n\n<pre><code>StompHeaders connectHeaders = new StompHeaders();\nconnectHeaders.add(\"login\", \"test1\");\nconnectHeaders.add(\"passcode\", \"test\");\nstompClient.connect(WS_HOST_PORT, new WebSocketHttpHeaders(), connectHeaders, new MySessionHandler());\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2629478,"reputation":7504,"user_id":2275818,"accept_rate":100,"display_name":"Anthony Raymond"},"score":0,"creation_date":1621610398,"post_id":67637958,"comment_id":119556160,"body_markdown":"I agree that spring security is a long way, but doing so you loose all the convenience brought by spring-security (being able to get the User from anywhere in the request context, test mocking, ...)","body":"I agree that spring security is a long way, but doing so you loose all the convenience brought by spring-security (being able to get the User from anywhere in the request context, test mocking, ...)"},{"owner":{"account_id":3065469,"reputation":1555,"user_id":2597267,"display_name":"Borislav Markov"},"score":1,"creation_date":1621667080,"post_id":67637958,"comment_id":119568901,"body_markdown":"There is no convenience in complexity. In my approach you still can inject your service and check username and password. For example you can inject WebSocketAuthenticatorService  and do the check by splitting Authorization and get the username pass if this is Basic AUTH. There is no right or wrong solution here as long as it works, I prefer this as it is more elegant for me. Others might prefer other.","body":"There is no convenience in complexity. In my approach you still can inject your service and check username and password. For example you can inject WebSocketAuthenticatorService  and do the check by splitting Authorization and get the username pass if this is Basic AUTH. There is no right or wrong solution here as long as it works, I prefer this as it is more elegant for me. Others might prefer other."}],"tags":[],"owner":{"account_id":3065469,"reputation":1555,"user_id":2597267,"display_name":"Borislav Markov"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1621604315,"creation_date":1621604315,"answer_id":67637958,"question_id":45405332,"body_markdown":"Going with spring authentication is a pain. You can do it in a simple way. Create a web Filter and read the Authorization token by yourself, then perform the authentication.\r\n```\r\n@Component\r\npublic class CustomAuthenticationFilter implements Filter {\r\n    @Override\r\n    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)\r\n            throws IOException, ServletException {\r\n        if (servletRequest instanceof HttpServletRequest) {\r\n            HttpServletRequest request = (HttpServletRequest) servletRequest;\r\n            String authorization = request.getHeader(&quot;Authorization&quot;);\r\n            if (/*Your condition here*/) {\r\n                // logged\r\n                filterChain.doFilter(servletRequest, servletResponse);\r\n            } else {\r\n                HttpServletResponse response = (HttpServletResponse) servletResponse;\r\n                response.setStatus(HttpStatus.UNAUTHORIZED.value());\r\n                response.setContentType(MediaType.APPLICATION_JSON_UTF8_VALUE);\r\n                response.getWriter().write(&quot;{\\&quot;message\\&quot;: &quot;\\Bad login\\&quot;}&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void init(FilterConfig filterConfig) throws ServletException {\r\n    }\r\n\r\n    @Override\r\n    public void destroy() {\r\n    }\r\n}\r\n```\r\n\r\nThen in your configuration define the filter using the spring mechanism:\r\n```\r\n@Configuration\r\npublic class SomeConfig {\r\n    @Bean\r\n    public FilterRegistrationBean&lt;CustomAuthenticationFilter&gt; securityFilter(\r\n            CustomAuthenticationFilter customAuthenticationFilter){\r\n        FilterRegistrationBean&lt;CustomAuthenticationFilter&gt; registrationBean\r\n                = new FilterRegistrationBean&lt;&gt;();\r\n\r\n        registrationBean.setFilter(customAuthenticationFilter);\r\n        registrationBean.addUrlPatterns(&quot;/*&quot;);\r\n        return registrationBean;\r\n    }\r\n}\r\n```\r\n","title":"Websocket Authentication and Authorization in Spring","body":"<p>Going with spring authentication is a pain. You can do it in a simple way. Create a web Filter and read the Authorization token by yourself, then perform the authentication.</p>\n<pre><code>@Component\npublic class CustomAuthenticationFilter implements Filter {\n    @Override\n    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)\n            throws IOException, ServletException {\n        if (servletRequest instanceof HttpServletRequest) {\n            HttpServletRequest request = (HttpServletRequest) servletRequest;\n            String authorization = request.getHeader(&quot;Authorization&quot;);\n            if (/*Your condition here*/) {\n                // logged\n                filterChain.doFilter(servletRequest, servletResponse);\n            } else {\n                HttpServletResponse response = (HttpServletResponse) servletResponse;\n                response.setStatus(HttpStatus.UNAUTHORIZED.value());\n                response.setContentType(MediaType.APPLICATION_JSON_UTF8_VALUE);\n                response.getWriter().write(&quot;{\\&quot;message\\&quot;: &quot;\\Bad login\\&quot;}&quot;);\n            }\n        }\n    }\n\n    @Override\n    public void init(FilterConfig filterConfig) throws ServletException {\n    }\n\n    @Override\n    public void destroy() {\n    }\n}\n</code></pre>\n<p>Then in your configuration define the filter using the spring mechanism:</p>\n<pre><code>@Configuration\npublic class SomeConfig {\n    @Bean\n    public FilterRegistrationBean&lt;CustomAuthenticationFilter&gt; securityFilter(\n            CustomAuthenticationFilter customAuthenticationFilter){\n        FilterRegistrationBean&lt;CustomAuthenticationFilter&gt; registrationBean\n                = new FilterRegistrationBean&lt;&gt;();\n\n        registrationBean.setFilter(customAuthenticationFilter);\n        registrationBean.addUrlPatterns(&quot;/*&quot;);\n        return registrationBean;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18555370,"reputation":197,"user_id":13520621,"display_name":"Eugene"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686322815,"creation_date":1686322815,"answer_id":76441425,"question_id":45405332,"body_markdown":"If you are using [this][1] Stomp Client library for Android then you actually can add Http headers to initial handshake request.\r\n\r\nHere is an example:\r\n\r\n    Map&lt;String, String&gt; headers = new HashMap&lt;&gt;();\r\n    headers.put(&quot;Authorization&quot;, &quot;Your auth token&quot;);\r\n        \r\n    StompClient stompClient = Stomp.over(Stomp.ConnectionProvider.OKHTTP, \r\n            &quot;ws://example.com/api/websocket&quot;, headers);\r\n\r\n \r\n\r\n\r\n  [1]: https://github.com/NaikSoftware/StompProtocolAndroid","title":"Websocket Authentication and Authorization in Spring","body":"<p>If you are using <a href=\"https://github.com/NaikSoftware/StompProtocolAndroid\" rel=\"nofollow noreferrer\">this</a> Stomp Client library for Android then you actually can add Http headers to initial handshake request.</p>\n<p>Here is an example:</p>\n<pre><code>Map&lt;String, String&gt; headers = new HashMap&lt;&gt;();\nheaders.put(&quot;Authorization&quot;, &quot;Your auth token&quot;);\n    \nStompClient stompClient = Stomp.over(Stomp.ConnectionProvider.OKHTTP, \n        &quot;ws://example.com/api/websocket&quot;, headers);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14860080,"reputation":934,"user_id":10731216,"display_name":"HereAndBeyond"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694069994,"creation_date":1694069994,"answer_id":77057255,"question_id":45405332,"body_markdown":"### Spring 3 and disabled CSRF protection\r\n\r\nIt also can be done with `@EnableWebSocketMessageBroker` and **disabled** csrf protection (in case if you don&#39;t need it). And in that case, you configuration will be quite simple.\r\n\r\nHere is my example. It&#39;s on Kotlin, but I think it&#39;s still easy to get the idea.\r\n\r\nSecurity configuration:\r\n\r\n```kotlin\r\nimport org.springframework.context.annotation.Bean\r\nimport org.springframework.context.annotation.Configuration\r\nimport org.springframework.messaging.Message\r\nimport org.springframework.security.authorization.AuthorizationManager\r\nimport org.springframework.security.config.annotation.web.socket.EnableWebSocketSecurity\r\nimport org.springframework.security.messaging.access.intercept.MessageMatcherDelegatingAuthorizationManager\r\n\r\n\r\n@Configuration\r\n@EnableWebSocketSecurity\r\nclass SecurityConfig {\r\n\r\n    @Bean\r\n    fun messageAuthorizationManager(messages: MessageMatcherDelegatingAuthorizationManager.Builder): AuthorizationManager&lt;Message&lt;*&gt;&gt; {\r\n        messages.nullDestMatcher().authenticated()\r\n            .simpSubscribeDestMatchers(&quot;/app/notifications&quot;).permitAll()\r\n            .simpSubscribeDestMatchers(&quot;/queue/tasks/**&quot;).hasAuthority(&quot;SCOPE_tasks.read&quot;)\r\n            .simpDestMatchers(&quot;/app/**&quot;).hasRole(&quot;ADMIN&quot;)\r\n        return messages.build()\r\n    }\r\n\r\n}\r\n```\r\n\r\nCustom CSRF interceptor:\r\n```kotlin\r\nimport org.springframework.messaging.Message\r\nimport org.springframework.messaging.MessageChannel\r\nimport org.springframework.messaging.support.ChannelInterceptor\r\nimport org.springframework.stereotype.Component\r\n\r\n@Component(&quot;csrfChannelInterceptor&quot;)\r\nclass CustomCsrfChannelInterceptor : ChannelInterceptor {\r\n\r\n    override fun preSend(message: Message&lt;*&gt;, channel: MessageChannel): Message&lt;*&gt;? {\r\n        return message;\r\n    }\r\n\r\n}\r\n```\r\n\r\nAnd that&#39;s it. You can configure authorization/authentication politics in the config, using all the advantages of `@EnableWebSocketMessageBroker` and you don&#39;t have to deal with the CSRF protection if you don&#39;t need it. Unfortunately, at present, there is no easier way to disable the protection.\r\n\r\n\r\nLink to the comprehensive Spring&#39;s guide: [https://docs.spring.io/spring-security/reference/servlet/integrations/websocket.html#websocket-authorization][1]\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/reference/servlet/integrations/websocket.html#websocket-authorization","title":"Websocket Authentication and Authorization in Spring","body":"<h3>Spring 3 and disabled CSRF protection</h3>\n<p>It also can be done with <code>@EnableWebSocketMessageBroker</code> and <strong>disabled</strong> csrf protection (in case if you don't need it). And in that case, you configuration will be quite simple.</p>\n<p>Here is my example. It's on Kotlin, but I think it's still easy to get the idea.</p>\n<p>Security configuration:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>import org.springframework.context.annotation.Bean\nimport org.springframework.context.annotation.Configuration\nimport org.springframework.messaging.Message\nimport org.springframework.security.authorization.AuthorizationManager\nimport org.springframework.security.config.annotation.web.socket.EnableWebSocketSecurity\nimport org.springframework.security.messaging.access.intercept.MessageMatcherDelegatingAuthorizationManager\n\n\n@Configuration\n@EnableWebSocketSecurity\nclass SecurityConfig {\n\n    @Bean\n    fun messageAuthorizationManager(messages: MessageMatcherDelegatingAuthorizationManager.Builder): AuthorizationManager&lt;Message&lt;*&gt;&gt; {\n        messages.nullDestMatcher().authenticated()\n            .simpSubscribeDestMatchers(&quot;/app/notifications&quot;).permitAll()\n            .simpSubscribeDestMatchers(&quot;/queue/tasks/**&quot;).hasAuthority(&quot;SCOPE_tasks.read&quot;)\n            .simpDestMatchers(&quot;/app/**&quot;).hasRole(&quot;ADMIN&quot;)\n        return messages.build()\n    }\n\n}\n</code></pre>\n<p>Custom CSRF interceptor:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>import org.springframework.messaging.Message\nimport org.springframework.messaging.MessageChannel\nimport org.springframework.messaging.support.ChannelInterceptor\nimport org.springframework.stereotype.Component\n\n@Component(&quot;csrfChannelInterceptor&quot;)\nclass CustomCsrfChannelInterceptor : ChannelInterceptor {\n\n    override fun preSend(message: Message&lt;*&gt;, channel: MessageChannel): Message&lt;*&gt;? {\n        return message;\n    }\n\n}\n</code></pre>\n<p>And that's it. You can configure authorization/authentication politics in the config, using all the advantages of <code>@EnableWebSocketMessageBroker</code> and you don't have to deal with the CSRF protection if you don't need it. Unfortunately, at present, there is no easier way to disable the protection.</p>\n<p>Link to the comprehensive Spring's guide: <a href=\"https://docs.spring.io/spring-security/reference/servlet/integrations/websocket.html#websocket-authorization\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-security/reference/servlet/integrations/websocket.html#websocket-authorization</a></p>\n"}],"owner":{"account_id":2629478,"reputation":7504,"user_id":2275818,"accept_rate":100,"display_name":"Anthony Raymond"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74053,"favorite_count":0,"down_vote_count":0,"up_vote_count":78,"accepted_answer_id":45405333,"answer_count":5,"score":78,"last_activity_date":1694069994,"creation_date":1501453751,"question_id":45405332,"body_markdown":"I&#39;ve been struggling a lot to properly implement Stomp (websocket) **Authentication** and **Authorization** with Spring-Security. *For posterity i&#39;ll answer my own question to provide a guide.*\n\n&lt;br /&gt;\n\n### The Problem\nSpring WebSocket documentation (for Authentication) looks unclear ATM (IMHO). And i couldn&#39;t understand how to properly handle **Authentication** and **Authorization**.\n\n&lt;br /&gt;\n\n### What i want\n- Authenticate users with login/password.\n- Prevent anonymous users to CONNECT though WebSocket.\n- Add authorization layer (user, admin, ...).\n- Having `Principal` available in controllers.\n\n&lt;br /&gt;\n\n### What i don&#39;t want\n- Authenticate on HTTP negotiation endpoints (since most of JavaScript libraries don&#39;t sends authentication headers along with the HTTP negotiation call).","title":"Websocket Authentication and Authorization in Spring","body":"<p>I've been struggling a lot to properly implement Stomp (websocket) <strong>Authentication</strong> and <strong>Authorization</strong> with Spring-Security. <em>For posterity i'll answer my own question to provide a guide.</em></p>\n<br />\n<h3>The Problem</h3>\n<p>Spring WebSocket documentation (for Authentication) looks unclear ATM (IMHO). And i couldn't understand how to properly handle <strong>Authentication</strong> and <strong>Authorization</strong>.</p>\n<br />\n<h3>What i want</h3>\n<ul>\n<li>Authenticate users with login/password.</li>\n<li>Prevent anonymous users to CONNECT though WebSocket.</li>\n<li>Add authorization layer (user, admin, ...).</li>\n<li>Having <code>Principal</code> available in controllers.</li>\n</ul>\n<br />\n<h3>What i don't want</h3>\n<ul>\n<li>Authenticate on HTTP negotiation endpoints (since most of JavaScript libraries don't sends authentication headers along with the HTTP negotiation call).</li>\n</ul>\n"},{"tags":["java","testing","contains","assert","hamcrest"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":1,"creation_date":1694069453,"post_id":77057159,"comment_id":135843136,"body_markdown":"Please provide a [mcve]","body":"Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"},{"owner":{"account_id":4504119,"reputation":1834,"user_id":3706638,"accept_rate":100,"display_name":"S.Dan"},"score":0,"creation_date":1694069699,"post_id":77057159,"comment_id":135843185,"body_markdown":"It&#39;s in the question description. The `assertThat` fails.","body":"It&#39;s in the question description. The <code>assertThat</code> fails."}],"answers":[{"comments":[{"owner":{"account_id":4504119,"reputation":1834,"user_id":3706638,"accept_rate":100,"display_name":"S.Dan"},"score":0,"creation_date":1694069662,"post_id":77057209,"comment_id":135843175,"body_markdown":"Ahhhh yes it worked! Thanks.","body":"Ahhhh yes it worked! Thanks."},{"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"score":2,"creation_date":1694069681,"post_id":77057209,"comment_id":135843179,"body_markdown":"There&#39;s really no good reason to first create the expected list, then call `toArray` on it. Just inline it with `containsAnyOrder(field1, field2, field3)`.","body":"There&#39;s really no good reason to first create the expected list, then call <code>toArray</code> on it. Just inline it with <code>containsAnyOrder(field1, field2, field3)</code>."},{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1694069782,"post_id":77057209,"comment_id":135843208,"body_markdown":"Yes, that is also correct. No need to create an `expected` list. I just followed it with minimal changes.  But yes, pass all the values as var-args.","body":"Yes, that is also correct. No need to create an <code>expected</code> list. I just followed it with minimal changes.  But yes, pass all the values as var-args."}],"tags":[],"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1694069673,"creation_date":1694069542,"answer_id":77057209,"question_id":77057159,"body_markdown":"Check this out: https://hamcrest.org/JavaHamcrest/javadoc/1.3/org/hamcrest/Matchers.html#containsInAnyOrder(T...)\r\n\r\n`containsInAnyOrder` expects an array of elements to match with the provided `actual` list.\r\nYou are passing `expected` as list.  And `actual` is not a List of List.\r\nSo, it will try to search for an entire list as an element in `actual`.\r\n\r\nProbably you will need to use `containsInAnyOrder(expected.toArray())`.\r\n\r\nI.e.\r\n```\r\nassertThat(actual, containsInAnyOrder(expected.toArray()));\r\n```\r\n\r\nTry it out.","title":"How does `containsInAnyOrder` compare items?","body":"<p>Check this out: <a href=\"https://hamcrest.org/JavaHamcrest/javadoc/1.3/org/hamcrest/Matchers.html#containsInAnyOrder(T...)\" rel=\"nofollow noreferrer\">https://hamcrest.org/JavaHamcrest/javadoc/1.3/org/hamcrest/Matchers.html#containsInAnyOrder(T...)</a></p>\n<p><code>containsInAnyOrder</code> expects an array of elements to match with the provided <code>actual</code> list.\nYou are passing <code>expected</code> as list.  And <code>actual</code> is not a List of List.\nSo, it will try to search for an entire list as an element in <code>actual</code>.</p>\n<p>Probably you will need to use <code>containsInAnyOrder(expected.toArray())</code>.</p>\n<p>I.e.</p>\n<pre><code>assertThat(actual, containsInAnyOrder(expected.toArray()));\n</code></pre>\n<p>Try it out.</p>\n"}],"owner":{"account_id":4504119,"reputation":1834,"user_id":3706638,"accept_rate":100,"display_name":"S.Dan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":77057209,"answer_count":1,"score":-2,"last_activity_date":1694069673,"creation_date":1694068959,"question_id":77057159,"body_markdown":"I&#39;ve got a `CustomField` class and I&#39;ve overriden the equals and hashcode methods. But when I try to compare 2 lists of `CustomField` objects, it fails. \r\nWhy wouldn&#39;t the `containsInAnyOrder` work in the following:\r\n```\r\nOverrides:\r\n    @Override\r\n    public boolean equals(Object o) {\r\n        if (this == o) return true;\r\n        if (o == null || getClass() != o.getClass()) return false;\r\n        CustomField that = (CustomField) o;\r\n        return Objects.equals(this.id, that.id) &amp;&amp;\r\n                Objects.equals(this.name, that.name);\r\n    }\r\n\r\n    @Override\r\n    public int hashCode() {\r\n        return Objects.hash(this.id, this.name);\r\n    }\r\n\r\n```\r\n```\r\n        List&lt;CustomField&gt; actual = ImmutableList.of(\r\n                new CustomField(1L, &quot;1L&quot;),\r\n                new CustomField(2L, &quot;2L&quot;),\r\n                new CustomField(3L, &quot;3L&quot;)\r\n        );\r\n        List&lt;CustomField&gt; expected = ImmutableList.of(\r\n                new CustomField(1L, &quot;1L&quot;),\r\n                new CustomField(2L, &quot;2L&quot;),\r\n                new CustomField(3L, &quot;3L&quot;)\r\n        );\r\n        assertThat(actual, containsInAnyOrder(expected)); /// why does this fail?\r\n```","title":"How does `containsInAnyOrder` compare items?","body":"<p>I've got a <code>CustomField</code> class and I've overriden the equals and hashcode methods. But when I try to compare 2 lists of <code>CustomField</code> objects, it fails.\nWhy wouldn't the <code>containsInAnyOrder</code> work in the following:</p>\n<pre><code>Overrides:\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n        CustomField that = (CustomField) o;\n        return Objects.equals(this.id, that.id) &amp;&amp;\n                Objects.equals(this.name, that.name);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(this.id, this.name);\n    }\n\n</code></pre>\n<pre><code>        List&lt;CustomField&gt; actual = ImmutableList.of(\n                new CustomField(1L, &quot;1L&quot;),\n                new CustomField(2L, &quot;2L&quot;),\n                new CustomField(3L, &quot;3L&quot;)\n        );\n        List&lt;CustomField&gt; expected = ImmutableList.of(\n                new CustomField(1L, &quot;1L&quot;),\n                new CustomField(2L, &quot;2L&quot;),\n                new CustomField(3L, &quot;3L&quot;)\n        );\n        assertThat(actual, containsInAnyOrder(expected)); /// why does this fail?\n</code></pre>\n"},{"tags":["java","swing","javafx"],"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1606142982,"post_id":64970647,"comment_id":114864045,"body_markdown":"_this problem might be hard to follow without any Code Examples_ well, it&#39;s not answerable without (never seen anything near your description, but that could be just me :) - strip it down to a [mcve] (which is what you&#39;ll have to do anyway, to pinpoint what&#39;s going wrong)","body":"<i>this problem might be hard to follow without any Code Examples</i> well, it&#39;s not answerable without (never seen anything near your description, but that could be just me :) - strip it down to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> (which is what you&#39;ll have to do anyway, to pinpoint what&#39;s going wrong)"},{"owner":{"account_id":20042245,"reputation":71,"user_id":14692742,"display_name":"klstm"},"score":0,"creation_date":1606298368,"post_id":64970647,"comment_id":114919865,"body_markdown":"I have edited my question and added a small working code example that illustrates my problem. Is it possible to reopen this question or should i open a new one?","body":"I have edited my question and added a small working code example that illustrates my problem. Is it possible to reopen this question or should i open a new one?"},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1606306896,"post_id":64970647,"comment_id":114923617,"body_markdown":"definitely no repost :) Taking your word for this being reproducible (no time to check myself right now) - voted to re-open","body":"definitely no repost :) Taking your word for this being reproducible (no time to check myself right now) - voted to re-open"},{"owner":{"account_id":3884753,"reputation":10795,"user_id":3216427,"display_name":"joanis"},"score":0,"creation_date":1606321955,"post_id":64970647,"comment_id":114931261,"body_markdown":"I&#39;m going to vote to reopen, but I still have some reservations: the question is very long, the code is very long. So it&#39;s a lot of work just to figure out what you&#39;re asking. If you could reduce the question to just the problem with as little else as possible, it would be better. Even if it gets reopened (my vote won&#39;t be enough), there is a risk it will get closed again as needing more focus.","body":"I&#39;m going to vote to reopen, but I still have some reservations: the question is very long, the code is very long. So it&#39;s a lot of work just to figure out what you&#39;re asking. If you could reduce the question to just the problem with as little else as possible, it would be better. Even if it gets reopened (my vote won&#39;t be enough), there is a risk it will get closed again as needing more focus."},{"owner":{"account_id":20042245,"reputation":71,"user_id":14692742,"display_name":"klstm"},"score":0,"creation_date":1606375845,"post_id":64970647,"comment_id":114946408,"body_markdown":"Thank you for reopening. My problem/the question is very long because it is very specific...The only part i could think of leaving out would be the Controller for the FXML as it is pretty basic. If you find anything to be redundant or unnecessary, let me know and i will gladly reduce the question further.","body":"Thank you for reopening. My problem/the question is very long because it is very specific...The only part i could think of leaving out would be the Controller for the FXML as it is pretty basic. If you find anything to be redundant or unnecessary, let me know and i will gladly reduce the question further."}],"owner":{"account_id":20042245,"reputation":71,"user_id":14692742,"display_name":"klstm"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":288,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1694069573,"creation_date":1606142731,"question_id":64970647,"body_markdown":"I am currently working on a JavaFx Application. Fx is supposed to only be responsible for UI Content, while the pretty complex functionality is inside a different already finished project, which was created using Swing. To accomplish this, I built an FXML using Scenebuilder, then passed a number of Swing Panels into seperate SwingNodes and passed the SwingNodes into different Tabs of a TabPane (all done inside the start() method of my Application class). Upon starting the Program everything looks fine, the Swing and Fx Content is shown correctly and the functionality works as well. However when resizing the Application Window manually, the SwingNode Content misbehaves, sometimes the Tab remains empty, sometimes only a part of the Node is painted, sometimes it just shows completly black.\r\n\r\nRight now, the actual started Program is the &quot;old&quot; Swing Project, which at some Point uses Platform.startup() to start the FX Application. This is necessary for functionality reasons. The Swing Panels at that point get passed into SwingNodes, which are located within the Fx Project.\r\n\r\nI have tried to &quot;update&quot; the SwingNodes by continuosly setting the SwingNode-Content on Window Resizing. \r\nAlso I tried to repaint Swing Content. Both attempts to no success.\r\n\r\nWhat am I missing? Why is the SwingNode Content not resizing with the rest of the window?\r\nIs the Swing Content possibly too large to function properly?\r\nOr is there possibly some multi-threading Problem?\r\n\r\nI understand that this problem might be hard to follow without any Code Examples. I am currently working on creating a minimalistic Version of both projects, to reproduce my Problem and will update as soon as it is done.\r\n\r\nEDIT:\r\nI believe i was able to reproduce the problem and have tried to include everything down below. `fx` is passed to the `swing` BuildPath, but not the other way around. \r\n When running `swing` a FX window opens, containing three tabs, all filled with SwingNodes. However when this window gets resized by the user, only the active tab&#180;s SwingNode gets repainted properly. The other two tabs still contain the Nodes, however the Elements only reappear once the mouse has hovered over them -this doesnt work for the label. I have experimented with using repaint on the SwingNodes, to no success so far, so I have chosen to not include it here.\r\n\r\nSECOND EDIT: Removed the FXML and FXML Controller Class, to make the question a little bit smaller. The FXML is just a simple TabPane with 3 Tabs built in SceneBuilder, the Controller only contains the Getters for the 3 Tabs.\r\n\r\n\r\n[Tab 2 after resizing and hovering over 3 of the 10 Buttons][1]\r\n\r\n[The Structure of the Fx Project in ProjectExplorer][2]\r\n\r\n\r\n[The Structure of the Swing Project in ProjectExplorer][3]\r\n\r\n\r\nThe Project `fx` contains the class `MainFx` which extends Application and a Controller `DebugWindowController` for the FXML File. Also there is an Interface\r\n`MainInterface` which is implemented by the class `Main` in the project `swing`\r\n\r\nClass `MainFx`\r\n\r\n    package controllers;\r\n    \r\n    import interfaces.MainInterface;\r\n    import javafx.application.Application;\r\n    import javafx.embed.swing.SwingNode;\r\n    import javafx.fxml.FXMLLoader;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.layout.AnchorPane;\r\n    import javafx.stage.Stage;\r\n    \r\n    public class MainFx extends Application {\r\n    \r\n      private DebugWindowController debugWindowController;\r\n      private AnchorPane            mainRoot;\r\n      private final SwingNode       swingNode1    = new SwingNode();\r\n      private final SwingNode       swingNode2    = new SwingNode();\r\n      private final SwingNode       swingNode3    = new SwingNode();\r\n      private MainInterface         mainInterface = null;\r\n    \r\n    \r\n    \r\n      @Override\r\n      public void start(Stage primaryStage) {\r\n    \r\n        try {\r\n    \r\n          FXMLLoader debugWindowLoader = new FXMLLoader(getClass().getResource(&quot;/view/DebugWindow.fxml&quot;));\r\n          mainRoot = debugWindowLoader.load();\r\n          debugWindowController = debugWindowLoader.getController();\r\n    \r\n          Scene scene1 = new Scene(mainRoot);\r\n    \r\n          fillFxTabPane();\r\n    \r\n          primaryStage.setScene(scene1);\r\n          primaryStage.show();\r\n    \r\n        } catch (Exception e) {\r\n          e.printStackTrace();\r\n        }\r\n      }\r\n    \r\n      private void fillFxTabPane() {\r\n        swingNode1.setContent(mainInterface.getPanel1());\r\n        swingNode2.setContent(mainInterface.getPanel2());\r\n        swingNode3.setContent(mainInterface.getPanel3());\r\n    \r\n        debugWindowController.getTab1().setContent(swingNode1);\r\n        debugWindowController.getTab2().setContent(swingNode2);\r\n        debugWindowController.getTab3().setContent(swingNode3);\r\n      }\r\n    \r\n      public MainInterface getMainInterface() {\r\n        return mainInterface;\r\n      }\r\n    \r\n      public void setMainInterface(MainInterface mainInterface) {\r\n        this.mainInterface = mainInterface;\r\n      }\r\n    \r\n    }\r\n\r\n\r\nInterface `MainInterface`\r\n\r\n    package interfaces;\r\n    \r\n    import javax.swing.JComponent;\r\n    \r\n    public interface MainInterface {\r\n    \r\n    \r\n      JComponent getPanel1();\r\n    \r\n      JComponent getPanel2();\r\n    \r\n      JComponent getPanel3();\r\n    \r\n    }\r\n\r\nThe project `swing` consists of only one Class which contains the main() Method that is used to start the program.\r\nClass `Main`\r\n\r\n    package swing;\r\n    \r\n    import javax.swing.JButton;\r\n    import javax.swing.JComponent;\r\n    import javax.swing.JLabel;\r\n    import javax.swing.JPanel;\r\n    \r\n    import controllers.MainFx;\r\n    import interfaces.MainInterface;\r\n    import javafx.application.Platform;\r\n    import javafx.stage.Stage;\r\n    \r\n    \r\n    public class Main implements MainInterface {\r\n    \r\n      private JPanel panel1;\r\n      private JPanel panel2;\r\n      private JPanel panel3;\r\n    \r\n    \r\n      public Main() {\r\n    \r\n        panel1 = new JPanel();\r\n        JLabel label1 = new JLabel(&quot;Panel1&quot;);\r\n        panel1.add(label1);\r\n        for (int i = 0; i &lt; 10; i++) {\r\n          JButton button = new JButton(&quot;B&quot; + (i + 1));\r\n          panel1.add(button);\r\n        }\r\n    \r\n        panel2 = new JPanel();\r\n        JLabel label2 = new JLabel(&quot;Panel2&quot;);\r\n        panel2.add(label2);\r\n        for (int i = 0; i &lt; 10; i++) {\r\n          JButton button = new JButton(&quot;B&quot; + (i + 1));\r\n          panel2.add(button);\r\n        }\r\n    \r\n        panel3 = new JPanel();\r\n        JLabel label3 = new JLabel(&quot;Panel3&quot;);\r\n        panel3.add(label3);\r\n        for (int i = 0; i &lt; 10; i++) {\r\n          JButton button = new JButton(&quot;B&quot; + (i + 1));\r\n          panel3.add(button);\r\n        }\r\n    \r\n        MainFx mainFx = new MainFx();\r\n    \r\n        mainFx.setMainInterface(this);\r\n        Platform.startup(() -&gt; {// launch JavaFx application\r\n    \r\n          Stage stage = new Stage();\r\n          try {\r\n            mainFx.start(stage);\r\n          } catch (Exception ex) {\r\n            ex.printStackTrace();\r\n          }\r\n        });\r\n    \r\n      }\r\n    \r\n      public static void main(String[] args) {\r\n    \r\n        Main main = new Main();\r\n    \r\n      }\r\n    \r\n      @Override\r\n      public JComponent getPanel1() {\r\n        return panel1;\r\n      }\r\n    \r\n      @Override\r\n      public JComponent getPanel2() {\r\n        return panel2;\r\n      }\r\n    \r\n      @Override\r\n      public JComponent getPanel3() {\r\n        return panel3;\r\n      }\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/adR3h.png\r\n  [2]: https://i.stack.imgur.com/nyWBS.png\r\n  [3]: https://i.stack.imgur.com/ZtnMI.png","title":"Swing Content not properly shown in JavaFx Application","body":"<p>I am currently working on a JavaFx Application. Fx is supposed to only be responsible for UI Content, while the pretty complex functionality is inside a different already finished project, which was created using Swing. To accomplish this, I built an FXML using Scenebuilder, then passed a number of Swing Panels into seperate SwingNodes and passed the SwingNodes into different Tabs of a TabPane (all done inside the start() method of my Application class). Upon starting the Program everything looks fine, the Swing and Fx Content is shown correctly and the functionality works as well. However when resizing the Application Window manually, the SwingNode Content misbehaves, sometimes the Tab remains empty, sometimes only a part of the Node is painted, sometimes it just shows completly black.</p>\n<p>Right now, the actual started Program is the &quot;old&quot; Swing Project, which at some Point uses Platform.startup() to start the FX Application. This is necessary for functionality reasons. The Swing Panels at that point get passed into SwingNodes, which are located within the Fx Project.</p>\n<p>I have tried to &quot;update&quot; the SwingNodes by continuosly setting the SwingNode-Content on Window Resizing.\nAlso I tried to repaint Swing Content. Both attempts to no success.</p>\n<p>What am I missing? Why is the SwingNode Content not resizing with the rest of the window?\nIs the Swing Content possibly too large to function properly?\nOr is there possibly some multi-threading Problem?</p>\n<p>I understand that this problem might be hard to follow without any Code Examples. I am currently working on creating a minimalistic Version of both projects, to reproduce my Problem and will update as soon as it is done.</p>\n<p>EDIT:\nI believe i was able to reproduce the problem and have tried to include everything down below. <code>fx</code> is passed to the <code>swing</code> BuildPath, but not the other way around.\nWhen running <code>swing</code> a FX window opens, containing three tabs, all filled with SwingNodes. However when this window gets resized by the user, only the active tab´s SwingNode gets repainted properly. The other two tabs still contain the Nodes, however the Elements only reappear once the mouse has hovered over them -this doesnt work for the label. I have experimented with using repaint on the SwingNodes, to no success so far, so I have chosen to not include it here.</p>\n<p>SECOND EDIT: Removed the FXML and FXML Controller Class, to make the question a little bit smaller. The FXML is just a simple TabPane with 3 Tabs built in SceneBuilder, the Controller only contains the Getters for the 3 Tabs.</p>\n<p><a href=\"https://i.stack.imgur.com/adR3h.png\" rel=\"nofollow noreferrer\">Tab 2 after resizing and hovering over 3 of the 10 Buttons</a></p>\n<p><a href=\"https://i.stack.imgur.com/nyWBS.png\" rel=\"nofollow noreferrer\">The Structure of the Fx Project in ProjectExplorer</a></p>\n<p><a href=\"https://i.stack.imgur.com/ZtnMI.png\" rel=\"nofollow noreferrer\">The Structure of the Swing Project in ProjectExplorer</a></p>\n<p>The Project <code>fx</code> contains the class <code>MainFx</code> which extends Application and a Controller <code>DebugWindowController</code> for the FXML File. Also there is an Interface\n<code>MainInterface</code> which is implemented by the class <code>Main</code> in the project <code>swing</code></p>\n<p>Class <code>MainFx</code></p>\n<pre><code>package controllers;\n\nimport interfaces.MainInterface;\nimport javafx.application.Application;\nimport javafx.embed.swing.SwingNode;\nimport javafx.fxml.FXMLLoader;\nimport javafx.scene.Scene;\nimport javafx.scene.layout.AnchorPane;\nimport javafx.stage.Stage;\n\npublic class MainFx extends Application {\n\n  private DebugWindowController debugWindowController;\n  private AnchorPane            mainRoot;\n  private final SwingNode       swingNode1    = new SwingNode();\n  private final SwingNode       swingNode2    = new SwingNode();\n  private final SwingNode       swingNode3    = new SwingNode();\n  private MainInterface         mainInterface = null;\n\n\n\n  @Override\n  public void start(Stage primaryStage) {\n\n    try {\n\n      FXMLLoader debugWindowLoader = new FXMLLoader(getClass().getResource(&quot;/view/DebugWindow.fxml&quot;));\n      mainRoot = debugWindowLoader.load();\n      debugWindowController = debugWindowLoader.getController();\n\n      Scene scene1 = new Scene(mainRoot);\n\n      fillFxTabPane();\n\n      primaryStage.setScene(scene1);\n      primaryStage.show();\n\n    } catch (Exception e) {\n      e.printStackTrace();\n    }\n  }\n\n  private void fillFxTabPane() {\n    swingNode1.setContent(mainInterface.getPanel1());\n    swingNode2.setContent(mainInterface.getPanel2());\n    swingNode3.setContent(mainInterface.getPanel3());\n\n    debugWindowController.getTab1().setContent(swingNode1);\n    debugWindowController.getTab2().setContent(swingNode2);\n    debugWindowController.getTab3().setContent(swingNode3);\n  }\n\n  public MainInterface getMainInterface() {\n    return mainInterface;\n  }\n\n  public void setMainInterface(MainInterface mainInterface) {\n    this.mainInterface = mainInterface;\n  }\n\n}\n</code></pre>\n<p>Interface <code>MainInterface</code></p>\n<pre><code>package interfaces;\n\nimport javax.swing.JComponent;\n\npublic interface MainInterface {\n\n\n  JComponent getPanel1();\n\n  JComponent getPanel2();\n\n  JComponent getPanel3();\n\n}\n</code></pre>\n<p>The project <code>swing</code> consists of only one Class which contains the main() Method that is used to start the program.\nClass <code>Main</code></p>\n<pre><code>package swing;\n\nimport javax.swing.JButton;\nimport javax.swing.JComponent;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\n\nimport controllers.MainFx;\nimport interfaces.MainInterface;\nimport javafx.application.Platform;\nimport javafx.stage.Stage;\n\n\npublic class Main implements MainInterface {\n\n  private JPanel panel1;\n  private JPanel panel2;\n  private JPanel panel3;\n\n\n  public Main() {\n\n    panel1 = new JPanel();\n    JLabel label1 = new JLabel(&quot;Panel1&quot;);\n    panel1.add(label1);\n    for (int i = 0; i &lt; 10; i++) {\n      JButton button = new JButton(&quot;B&quot; + (i + 1));\n      panel1.add(button);\n    }\n\n    panel2 = new JPanel();\n    JLabel label2 = new JLabel(&quot;Panel2&quot;);\n    panel2.add(label2);\n    for (int i = 0; i &lt; 10; i++) {\n      JButton button = new JButton(&quot;B&quot; + (i + 1));\n      panel2.add(button);\n    }\n\n    panel3 = new JPanel();\n    JLabel label3 = new JLabel(&quot;Panel3&quot;);\n    panel3.add(label3);\n    for (int i = 0; i &lt; 10; i++) {\n      JButton button = new JButton(&quot;B&quot; + (i + 1));\n      panel3.add(button);\n    }\n\n    MainFx mainFx = new MainFx();\n\n    mainFx.setMainInterface(this);\n    Platform.startup(() -&gt; {// launch JavaFx application\n\n      Stage stage = new Stage();\n      try {\n        mainFx.start(stage);\n      } catch (Exception ex) {\n        ex.printStackTrace();\n      }\n    });\n\n  }\n\n  public static void main(String[] args) {\n\n    Main main = new Main();\n\n  }\n\n  @Override\n  public JComponent getPanel1() {\n    return panel1;\n  }\n\n  @Override\n  public JComponent getPanel2() {\n    return panel2;\n  }\n\n  @Override\n  public JComponent getPanel3() {\n    return panel3;\n  }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","hibernate","h2"],"answers":[{"tags":[],"owner":{"account_id":10432483,"reputation":2673,"user_id":7691891,"display_name":"Smaillns"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694068978,"creation_date":1694068978,"answer_id":77057162,"question_id":77057039,"body_markdown":"I&#39;ve managed to quickly resolve the issue I was facing, even though it took me a few hours of debugging. The problem was related to the **@EqualsAndHashCode** annotation in my **Discount** entity. It turns out that this annotation was generating **equals()** and **hashCode()** methods that considered all fields, including the **products** field, which represents a many-to-many relationship with the Product entity. This led to circular references and potential infinite recursion.\r\n\r\nTo resolve the issue, I made adjustments to the @EqualsAndHashCode annotation as follows:\r\n```java\r\n@Entity\r\n@Table(name = &quot;discounts&quot;)\r\n@EqualsAndHashCode(onlyExplicitlyIncluded = true)\r\npublic class Discount {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @EqualsAndHashCode.Include\r\n    private Integer discountId;\r\n    // Other fields and annotations...\r\n}\r\n```\r\n\r\nwe can also exlcude the `prodcuts`from generating `equals()` and `hashCode()`\r\n```\r\n    @EqualsAndHashCode.Exclude\r\n    private Set&lt;Product&gt; products;\r\n```\r\n\r\nI hope this answer helps other who might encounter similar issue, if you have further explanation or alternative suggestion, please dont&#39;t hesitate to share. Your insights are highly valuable.\r\n","title":"Hibernate Many-to-Many Relationship Not Loading Related Entities in Spring Boot 3.1.2","body":"<p>I've managed to quickly resolve the issue I was facing, even though it took me a few hours of debugging. The problem was related to the <strong>@EqualsAndHashCode</strong> annotation in my <strong>Discount</strong> entity. It turns out that this annotation was generating <strong>equals()</strong> and <strong>hashCode()</strong> methods that considered all fields, including the <strong>products</strong> field, which represents a many-to-many relationship with the Product entity. This led to circular references and potential infinite recursion.</p>\n<p>To resolve the issue, I made adjustments to the @EqualsAndHashCode annotation as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;discounts&quot;)\n@EqualsAndHashCode(onlyExplicitlyIncluded = true)\npublic class Discount {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @EqualsAndHashCode.Include\n    private Integer discountId;\n    // Other fields and annotations...\n}\n</code></pre>\n<p>we can also exlcude the <code>prodcuts</code>from generating <code>equals()</code> and <code>hashCode()</code></p>\n<pre><code>    @EqualsAndHashCode.Exclude\n    private Set&lt;Product&gt; products;\n</code></pre>\n<p>I hope this answer helps other who might encounter similar issue, if you have further explanation or alternative suggestion, please dont't hesitate to share. Your insights are highly valuable.</p>\n"}],"owner":{"account_id":10432483,"reputation":2673,"user_id":7691891,"display_name":"Smaillns"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694068978,"creation_date":1694067744,"question_id":77057039,"body_markdown":"I&#39;m working on a Spring Boot (v `3.1.2`) application with Hibernate and facing an issue with a many-to-many relationship between Product and Discount entities. Here are my entity classes:\r\n```java\r\n@Entity\r\n@Table(name = &quot;products&quot;)\r\n@Getter\r\n@Setter\r\n@Builder\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@EqualsAndHashCode\r\npublic class Product {\r\n    // ... (fields and annotations)\r\n    \r\n    @ManyToMany(fetch = FetchType.LAZY, mappedBy = &quot;products&quot;)\r\n    private Set&lt;Discount&gt; discounts = new HashSet&lt;&gt;();\r\n}\r\n\r\n@Entity\r\n@Table(name = &quot;discounts&quot;)\r\n@EqualsAndHashCode\r\npublic class Discount {\r\n    // ... (fields and annotations)\r\n    \r\n    @ManyToMany(cascade = {CascadeType.ALL})\r\n    @JoinTable(\r\n            name = &quot;discounts_products&quot;,\r\n            joinColumns = { @JoinColumn(name = &quot;discount_id&quot;) },\r\n            inverseJoinColumns = { @JoinColumn(name = &quot;product_id&quot;) }\r\n    )\r\n    private Set&lt;Product&gt; products  = new HashSet&lt;&gt;();\r\n}\r\n```\r\n\r\nI have a repository for the Product entity with a basic findAll method:\r\n\r\n```Java\r\n@Repository\r\npublic interface ProductRepository extends JpaRepository&lt;Product, Integer&gt; {\r\n}\r\n```\r\nWhen I call productRepository.findAll(pageable), the discounts collection in the Product entities is always **empty**, even though I have matching data in my H2 database. Here&#39;s my application configuration:\r\n```yml\r\nspring:\r\n    config:\r\n        activate:\r\n            on-profile: dev\r\n    datasource:\r\n        driverClassName: org.h2.Driver\r\n        password: &#39;&#39;\r\n        url: jdbc:h2:mem:testdb\r\n        username: sa\r\n    h2:\r\n        console:\r\n            enabled: true\r\n    jpa:\r\n        hibernate:\r\n            ddl-auto: update\r\n        show-sql: true\r\n        defer-datasource-initialization: true\r\n    sql:\r\n        init:\r\n            data-locations: classpath:sql/categories.sql, classpath:sql/products.sql, classpath:sql/discounts.sql\r\n            mode: always\r\n\r\n```\r\nI&#39;ve verified that the data in the database matches using the following SQL query:\r\n\r\n```sql\r\nselect * from products p left join discounts_products dp on p.product_id = dp.product_id left join discounts d on d.discount_id=p.product_id;\r\n```\r\n\r\nWhat could be causing the discounts collection not to load, even though the data seems to be there in the database?\r\n\r\nAny help or insights would be greatly appreciated. Thank you!","title":"Hibernate Many-to-Many Relationship Not Loading Related Entities in Spring Boot 3.1.2","body":"<p>I'm working on a Spring Boot (v <code>3.1.2</code>) application with Hibernate and facing an issue with a many-to-many relationship between Product and Discount entities. Here are my entity classes:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;products&quot;)\n@Getter\n@Setter\n@Builder\n@AllArgsConstructor\n@NoArgsConstructor\n@EqualsAndHashCode\npublic class Product {\n    // ... (fields and annotations)\n    \n    @ManyToMany(fetch = FetchType.LAZY, mappedBy = &quot;products&quot;)\n    private Set&lt;Discount&gt; discounts = new HashSet&lt;&gt;();\n}\n\n@Entity\n@Table(name = &quot;discounts&quot;)\n@EqualsAndHashCode\npublic class Discount {\n    // ... (fields and annotations)\n    \n    @ManyToMany(cascade = {CascadeType.ALL})\n    @JoinTable(\n            name = &quot;discounts_products&quot;,\n            joinColumns = { @JoinColumn(name = &quot;discount_id&quot;) },\n            inverseJoinColumns = { @JoinColumn(name = &quot;product_id&quot;) }\n    )\n    private Set&lt;Product&gt; products  = new HashSet&lt;&gt;();\n}\n</code></pre>\n<p>I have a repository for the Product entity with a basic findAll method:</p>\n<pre><code>@Repository\npublic interface ProductRepository extends JpaRepository&lt;Product, Integer&gt; {\n}\n</code></pre>\n<p>When I call productRepository.findAll(pageable), the discounts collection in the Product entities is always <strong>empty</strong>, even though I have matching data in my H2 database. Here's my application configuration:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>spring:\n    config:\n        activate:\n            on-profile: dev\n    datasource:\n        driverClassName: org.h2.Driver\n        password: ''\n        url: jdbc:h2:mem:testdb\n        username: sa\n    h2:\n        console:\n            enabled: true\n    jpa:\n        hibernate:\n            ddl-auto: update\n        show-sql: true\n        defer-datasource-initialization: true\n    sql:\n        init:\n            data-locations: classpath:sql/categories.sql, classpath:sql/products.sql, classpath:sql/discounts.sql\n            mode: always\n\n</code></pre>\n<p>I've verified that the data in the database matches using the following SQL query:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>select * from products p left join discounts_products dp on p.product_id = dp.product_id left join discounts d on d.discount_id=p.product_id;\n</code></pre>\n<p>What could be causing the discounts collection not to load, even though the data seems to be there in the database?</p>\n<p>Any help or insights would be greatly appreciated. Thank you!</p>\n"},{"tags":["java","maven","dependencies","maven-shade-plugin","relocation"],"answers":[{"tags":[],"owner":{"account_id":18173504,"reputation":61,"user_id":13222704,"display_name":"Nandor Dukat"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694068885,"creation_date":1694068885,"answer_id":77057143,"question_id":77054002,"body_markdown":"I solved the problem.\r\n\r\nIt was a : symbol instead of . in the include section...\r\n\r\n&lt;include&gt;dev.demeng.sentinel.wrapper&lt;/include&gt;","title":"Include&amp;relocate maven dependency in another module java","body":"<p>I solved the problem.</p>\n<p>It was a : symbol instead of . in the include section...</p>\n<p>dev.demeng.sentinel.wrapper</p>\n"}],"owner":{"account_id":18173504,"reputation":61,"user_id":13222704,"display_name":"Nandor Dukat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77057143,"answer_count":1,"score":0,"last_activity_date":1694068885,"creation_date":1694019988,"question_id":77054002,"body_markdown":"I have a multi module maven project which I build with maven&#39;s shade plugin. I have a module called &quot;distribution&quot; which includes all the other modules and then builds. My problem is that I have a maven dependency which I have in another module and I cannot find a solution where the distribution module includes it in the shaded jar.\r\n\r\nThe core module which contains the dependency (group id dev.demeng):\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;artifactId&gt;InventoryArchiver-core&lt;/artifactId&gt;\r\n    &lt;version&gt;${project.parent.version}&lt;/version&gt;\r\n    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;dev.nandi0813&lt;/groupId&gt;\r\n        &lt;artifactId&gt;InventoryArchiver-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;4.0.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;repositories&gt;\r\n        &lt;repository&gt;\r\n            &lt;id&gt;papermc-repo&lt;/id&gt;\r\n            &lt;url&gt;https://repo.papermc.io/repository/maven-public/&lt;/url&gt;\r\n        &lt;/repository&gt;\r\n\r\n        &lt;repository&gt;\r\n            &lt;id&gt;sonatype&lt;/id&gt;\r\n            &lt;url&gt;https://oss.sonatype.org/content/groups/public/&lt;/url&gt;\r\n        &lt;/repository&gt;\r\n\r\n        &lt;!-- Vault --&gt;\r\n        &lt;repository&gt;\r\n            &lt;id&gt;jitpack.io&lt;/id&gt;\r\n            &lt;url&gt;https://jitpack.io&lt;/url&gt;\r\n        &lt;/repository&gt;\r\n\r\n        &lt;repository&gt;\r\n            &lt;id&gt;demeng-repo&lt;/id&gt;\r\n            &lt;name&gt;Demeng&#39;s Repository&lt;/name&gt;\r\n            &lt;url&gt;https://repo.demeng.dev/releases&lt;/url&gt;\r\n        &lt;/repository&gt;\r\n    &lt;/repositories&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.papermc.paper&lt;/groupId&gt;\r\n            &lt;artifactId&gt;paper-api&lt;/artifactId&gt;\r\n            &lt;version&gt;1.19.4-R0.1-SNAPSHOT&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.github.MilkBowl&lt;/groupId&gt;\r\n            &lt;artifactId&gt;VaultAPI&lt;/artifactId&gt;\r\n            &lt;version&gt;1.7&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;dev.demeng&lt;/groupId&gt;\r\n            &lt;artifactId&gt;sentinel-java-wrapper&lt;/artifactId&gt;\r\n            &lt;version&gt;1.2.0&lt;/version&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;gson&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n&lt;/project&gt;\r\n\r\nDistribution pom:\r\n\r\n    &lt;artifactId&gt;InventoryArchiver-distribution&lt;/artifactId&gt;\r\n    &lt;version&gt;${project.parent.version}&lt;/version&gt;\r\n    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;dev.nandi0813&lt;/groupId&gt;\r\n        &lt;artifactId&gt;InventoryArchiver-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;4.0.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;defaultGoal&gt;clean install&lt;/defaultGoal&gt;\r\n\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.3.0&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;phase&gt;package&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;shade&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;shadedArtifactAttached&gt;true&lt;/shadedArtifactAttached&gt;\r\n\r\n                            &lt;artifactSet&gt;\r\n                                &lt;includes&gt;\r\n                                    &lt;include&gt;dev.nandi0813:InventoryArchiver-*&lt;/include&gt;\r\n                                    &lt;include&gt;dev.demeng.sentinel.wrapper&lt;/include&gt;\r\n                                &lt;/includes&gt;\r\n                            &lt;/artifactSet&gt;\r\n\r\n                            &lt;relocations&gt;\r\n                                &lt;relocation&gt;\r\n                                    &lt;pattern&gt;dev.demeng.sentinel.wrapper&lt;/pattern&gt;\r\n                                    &lt;shadedPattern&gt;dev.nandi0813.inventoryarchiver.sentinel&lt;/shadedPattern&gt;\r\n                                &lt;/relocation&gt;\r\n                            &lt;/relocations&gt;\r\n\r\n                            &lt;createDependencyReducedPom&gt;false&lt;/createDependencyReducedPom&gt;\r\n\r\n                            &lt;finalName&gt;inventoryArchiver-${project.version}&lt;/finalName&gt;\r\n                            &lt;outputDirectory&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;dev.nandi0813&lt;/groupId&gt;\r\n            &lt;artifactId&gt;InventoryArchiver-core&lt;/artifactId&gt;\r\n            &lt;version&gt;${project.parent.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;dev.nandi0813&lt;/groupId&gt;\r\n            &lt;artifactId&gt;InventoryArchiver-spigot_1_8&lt;/artifactId&gt;\r\n            &lt;version&gt;${project.parent.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;dev.nandi0813&lt;/groupId&gt;\r\n            &lt;artifactId&gt;InventoryArchiver-spigot_1_12_2&lt;/artifactId&gt;\r\n            &lt;version&gt;${project.parent.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;dev.nandi0813&lt;/groupId&gt;\r\n            &lt;artifactId&gt;InventoryArchiver-spigot_1_13_2&lt;/artifactId&gt;\r\n            &lt;version&gt;${project.parent.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n    \r\n&lt;/project&gt;","title":"Include&amp;relocate maven dependency in another module java","body":"<p>I have a multi module maven project which I build with maven's shade plugin. I have a module called &quot;distribution&quot; which includes all the other modules and then builds. My problem is that I have a maven dependency which I have in another module and I cannot find a solution where the distribution module includes it in the shaded jar.</p>\n<p>The core module which contains the dependency (group id dev.demeng):</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n     xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n     xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n&lt;artifactId&gt;InventoryArchiver-core&lt;/artifactId&gt;\n&lt;version&gt;${project.parent.version}&lt;/version&gt;\n&lt;packaging&gt;jar&lt;/packaging&gt;\n\n&lt;parent&gt;\n    &lt;groupId&gt;dev.nandi0813&lt;/groupId&gt;\n    &lt;artifactId&gt;InventoryArchiver-parent&lt;/artifactId&gt;\n    &lt;version&gt;4.0.0-SNAPSHOT&lt;/version&gt;\n&lt;/parent&gt;\n\n&lt;properties&gt;\n    &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n&lt;/properties&gt;\n\n&lt;repositories&gt;\n    &lt;repository&gt;\n        &lt;id&gt;papermc-repo&lt;/id&gt;\n        &lt;url&gt;https://repo.papermc.io/repository/maven-public/&lt;/url&gt;\n    &lt;/repository&gt;\n\n    &lt;repository&gt;\n        &lt;id&gt;sonatype&lt;/id&gt;\n        &lt;url&gt;https://oss.sonatype.org/content/groups/public/&lt;/url&gt;\n    &lt;/repository&gt;\n\n    &lt;!-- Vault --&gt;\n    &lt;repository&gt;\n        &lt;id&gt;jitpack.io&lt;/id&gt;\n        &lt;url&gt;https://jitpack.io&lt;/url&gt;\n    &lt;/repository&gt;\n\n    &lt;repository&gt;\n        &lt;id&gt;demeng-repo&lt;/id&gt;\n        &lt;name&gt;Demeng's Repository&lt;/name&gt;\n        &lt;url&gt;https://repo.demeng.dev/releases&lt;/url&gt;\n    &lt;/repository&gt;\n&lt;/repositories&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.papermc.paper&lt;/groupId&gt;\n        &lt;artifactId&gt;paper-api&lt;/artifactId&gt;\n        &lt;version&gt;1.19.4-R0.1-SNAPSHOT&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.github.MilkBowl&lt;/groupId&gt;\n        &lt;artifactId&gt;VaultAPI&lt;/artifactId&gt;\n        &lt;version&gt;1.7&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;dev.demeng&lt;/groupId&gt;\n        &lt;artifactId&gt;sentinel-java-wrapper&lt;/artifactId&gt;\n        &lt;version&gt;1.2.0&lt;/version&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\n                &lt;artifactId&gt;gson&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n\n<p>Distribution pom:</p>\n<pre><code>&lt;artifactId&gt;InventoryArchiver-distribution&lt;/artifactId&gt;\n&lt;version&gt;${project.parent.version}&lt;/version&gt;\n&lt;packaging&gt;jar&lt;/packaging&gt;\n\n&lt;parent&gt;\n    &lt;groupId&gt;dev.nandi0813&lt;/groupId&gt;\n    &lt;artifactId&gt;InventoryArchiver-parent&lt;/artifactId&gt;\n    &lt;version&gt;4.0.0-SNAPSHOT&lt;/version&gt;\n&lt;/parent&gt;\n\n&lt;properties&gt;\n    &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n&lt;/properties&gt;\n\n&lt;build&gt;\n    &lt;defaultGoal&gt;clean install&lt;/defaultGoal&gt;\n\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.3.0&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;phase&gt;package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;shade&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;shadedArtifactAttached&gt;true&lt;/shadedArtifactAttached&gt;\n\n                        &lt;artifactSet&gt;\n                            &lt;includes&gt;\n                                &lt;include&gt;dev.nandi0813:InventoryArchiver-*&lt;/include&gt;\n                                &lt;include&gt;dev.demeng.sentinel.wrapper&lt;/include&gt;\n                            &lt;/includes&gt;\n                        &lt;/artifactSet&gt;\n\n                        &lt;relocations&gt;\n                            &lt;relocation&gt;\n                                &lt;pattern&gt;dev.demeng.sentinel.wrapper&lt;/pattern&gt;\n                                &lt;shadedPattern&gt;dev.nandi0813.inventoryarchiver.sentinel&lt;/shadedPattern&gt;\n                            &lt;/relocation&gt;\n                        &lt;/relocations&gt;\n\n                        &lt;createDependencyReducedPom&gt;false&lt;/createDependencyReducedPom&gt;\n\n                        &lt;finalName&gt;inventoryArchiver-${project.version}&lt;/finalName&gt;\n                        &lt;outputDirectory&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;dev.nandi0813&lt;/groupId&gt;\n        &lt;artifactId&gt;InventoryArchiver-core&lt;/artifactId&gt;\n        &lt;version&gt;${project.parent.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;dev.nandi0813&lt;/groupId&gt;\n        &lt;artifactId&gt;InventoryArchiver-spigot_1_8&lt;/artifactId&gt;\n        &lt;version&gt;${project.parent.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;dev.nandi0813&lt;/groupId&gt;\n        &lt;artifactId&gt;InventoryArchiver-spigot_1_12_2&lt;/artifactId&gt;\n        &lt;version&gt;${project.parent.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;dev.nandi0813&lt;/groupId&gt;\n        &lt;artifactId&gt;InventoryArchiver-spigot_1_13_2&lt;/artifactId&gt;\n        &lt;version&gt;${project.parent.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n\n"},{"tags":["java","jmeter"],"answers":[{"comments":[{"owner":{"account_id":29379695,"reputation":3,"user_id":22510489,"display_name":"Krystian Żmuda"},"score":0,"creation_date":1694071610,"post_id":77057129,"comment_id":135843559,"body_markdown":"Thank you! It solved my problem :) \njmeter dsl project looks handy so I will give it a go","body":"Thank you! It solved my problem :)  jmeter dsl project looks handy so I will give it a go"}],"tags":[],"owner":{"account_id":3460456,"reputation":162758,"user_id":2897748,"display_name":"Dmitri T"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694068777,"creation_date":1694068777,"answer_id":77057129,"question_id":77052599,"body_markdown":"When you copied and pasted their code you forgot to copy and paste the project configuration, in the article they use Java 8 and you&#39;re using Java 9 or higher. \r\n\r\n[![enter image description here][1]][1]\r\n\r\nIf you want to try to replicate the behaviour you should add [this line][2] from jmeter startup script to your project runtime settings. \r\n\r\nI know you like to copy and paste so I&#39;ll make the process easier for you and copy and paste it here just in case:\r\n\r\n    --add-opens java.desktop/sun.awt=ALL-UNNAMED --add-opens java.desktop/sun.swing=ALL-UNNAMED --add-opens java.desktop/javax.swing.text.html=ALL-UNNAMED --add-opens java.desktop/java.awt=ALL-UNNAMED --add-opens java.desktop/java.awt.font=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.lang.invoke=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.text=ALL-UNNAMED --add-opens=java.desktop/sun.awt.X11=ALL-UNNAMED --add-opens=java.desktop/sun.awt.shell=ALL-UNNAMED\r\n\r\nAlso it appears that guys from Octoperf also like to copy and paste content from BlazeMeter from 2014 without mentioning the original authors:\r\n\r\n - [JMeter Command Line Overview: 5 Ways To Launch a Test][3]\r\n - [jmeter-from-code][4]\r\n\r\nYou might also be interested in [jmeter-java-dsl][5] project which provides more handy API for creating JMeter tests in Java, saving them to .jmx and running them. \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/41Wt4.png\r\n  [2]: https://github.com/apache/jmeter/blob/rel/v5.6.2/bin/jmeter#L129\r\n  [3]: https://www.blazemeter.com/blog/jmeter-command-line\r\n  [4]: https://bitbucket.org/blazemeter/jmeter-from-code/src/master/\r\n  [5]: https://abstracta.github.io/jmeter-java-dsl/","title":"I get an error while using jmeter SaveService.saveTree to save the test as jmx file","body":"<p>When you copied and pasted their code you forgot to copy and paste the project configuration, in the article they use Java 8 and you're using Java 9 or higher.</p>\n<p><a href=\"https://i.stack.imgur.com/41Wt4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/41Wt4.png\" alt=\"enter image description here\" /></a></p>\n<p>If you want to try to replicate the behaviour you should add <a href=\"https://github.com/apache/jmeter/blob/rel/v5.6.2/bin/jmeter#L129\" rel=\"nofollow noreferrer\">this line</a> from jmeter startup script to your project runtime settings.</p>\n<p>I know you like to copy and paste so I'll make the process easier for you and copy and paste it here just in case:</p>\n<pre><code>--add-opens java.desktop/sun.awt=ALL-UNNAMED --add-opens java.desktop/sun.swing=ALL-UNNAMED --add-opens java.desktop/javax.swing.text.html=ALL-UNNAMED --add-opens java.desktop/java.awt=ALL-UNNAMED --add-opens java.desktop/java.awt.font=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.lang.invoke=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.text=ALL-UNNAMED --add-opens=java.desktop/sun.awt.X11=ALL-UNNAMED --add-opens=java.desktop/sun.awt.shell=ALL-UNNAMED\n</code></pre>\n<p>Also it appears that guys from Octoperf also like to copy and paste content from BlazeMeter from 2014 without mentioning the original authors:</p>\n<ul>\n<li><a href=\"https://www.blazemeter.com/blog/jmeter-command-line\" rel=\"nofollow noreferrer\">JMeter Command Line Overview: 5 Ways To Launch a Test</a></li>\n<li><a href=\"https://bitbucket.org/blazemeter/jmeter-from-code/src/master/\" rel=\"nofollow noreferrer\">jmeter-from-code</a></li>\n</ul>\n<p>You might also be interested in <a href=\"https://abstracta.github.io/jmeter-java-dsl/\" rel=\"nofollow noreferrer\">jmeter-java-dsl</a> project which provides more handy API for creating JMeter tests in Java, saving them to .jmx and running them.</p>\n"}],"owner":{"account_id":29379695,"reputation":3,"user_id":22510489,"display_name":"Krystian Żmuda"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77057129,"answer_count":1,"score":0,"last_activity_date":1694068777,"creation_date":1694008514,"question_id":77052599,"body_markdown":"I wanted to switch from jmx files to code in Java, so I found some example code at [Octoperf.com](https://octoperf.com/blog/2023/03/29/jmeter-in-code/#additional-elements) and tried to run it (I only entered different location for jmeter):\r\n\r\n```\r\nimport org.apache.jmeter.assertions.ResponseAssertion;\r\nimport org.apache.jmeter.assertions.gui.AssertionGui;\r\nimport org.apache.jmeter.config.Arguments;\r\nimport org.apache.jmeter.config.gui.ArgumentsPanel;\r\nimport org.apache.jmeter.control.LoopController;\r\nimport org.apache.jmeter.control.gui.LoopControlPanel;\r\nimport org.apache.jmeter.control.gui.TestPlanGui;\r\nimport org.apache.jmeter.engine.StandardJMeterEngine;\r\nimport org.apache.jmeter.extractor.json.jsonpath.JSONPostProcessor;\r\nimport org.apache.jmeter.extractor.json.jsonpath.gui.JSONPostProcessorGui;\r\nimport org.apache.jmeter.protocol.http.control.gui.HttpTestSampleGui;\r\nimport org.apache.jmeter.protocol.http.sampler.HTTPSampler;\r\nimport org.apache.jmeter.reporters.ResultCollector;\r\nimport org.apache.jmeter.reporters.Summariser;\r\nimport org.apache.jmeter.samplers.SampleSaveConfiguration;\r\nimport org.apache.jmeter.save.SaveService;\r\nimport org.apache.jmeter.testelement.TestElement;\r\nimport org.apache.jmeter.testelement.TestPlan;\r\nimport org.apache.jmeter.threads.ThreadGroup;\r\nimport org.apache.jmeter.threads.gui.ThreadGroupGui;\r\nimport org.apache.jmeter.util.JMeterUtils;\r\nimport org.apache.jorphan.collections.HashTree;\r\n\r\nimport java.io.FileOutputStream;\r\n\r\npublic class JmeterBasicTest {\r\n\r\n    public static void main(String[] args) throws Exception {\r\n\r\n        // Create the Jmeter engine\r\n        StandardJMeterEngine jm = new StandardJMeterEngine();\r\n\r\n        // Set some configuration\r\n        String jmeterHome = &quot;/opt/homebrew/Cellar/jmeter/5.6.2&quot;;\r\n        JMeterUtils.setJMeterHome(jmeterHome);\r\n        JMeterUtils.loadJMeterProperties(jmeterHome + &quot;/libexec/bin/jmeter.properties&quot;);\r\n        JMeterUtils.initLocale();\r\n\r\n        // Create a new hash tree to hold our test elements\r\n        HashTree testPlanTree = new HashTree();\r\n\r\n        // Create a sampler\r\n        HTTPSampler httpSamplerOne = new HTTPSampler();\r\n        httpSamplerOne.setDomain(&quot;octoperf.com&quot;);\r\n        httpSamplerOne.setPort(443);\r\n        httpSamplerOne.setPath(&quot;/blog/2023/02/22/jmeter-logging/&quot;);\r\n        httpSamplerOne.setMethod(&quot;GET&quot;);\r\n        httpSamplerOne.setName(&quot;HTTP Request One&quot;);\r\n        httpSamplerOne.setProtocol(&quot;https&quot;);\r\n        httpSamplerOne.setProperty(TestElement.TEST_CLASS, HTTPSampler.class.getName());\r\n        httpSamplerOne.setProperty(TestElement.GUI_CLASS, HttpTestSampleGui.class.getName());\r\n\r\n        // Create another sampler\r\n        HTTPSampler httpSamplerTwo = new HTTPSampler();\r\n        httpSamplerTwo.setDomain(&quot;octoperf.com&quot;);\r\n        httpSamplerTwo.setPort(443);\r\n        httpSamplerTwo.setPath(&quot;blog/2023/01/16/uncommon-performance-testing/&quot;);\r\n        httpSamplerTwo.setMethod(&quot;GET&quot;);\r\n        httpSamplerTwo.setName(&quot;HTTP Request&quot;);\r\n        httpSamplerTwo.setProtocol(&quot;https&quot;);\r\n        httpSamplerTwo.setProperty(TestElement.TEST_CLASS, HTTPSampler.class.getName());\r\n        httpSamplerTwo.setProperty(TestElement.GUI_CLASS, HttpTestSampleGui.class.getName());\r\n\r\n        // JSON Post Processor\r\n        JSONPostProcessor jsonExtractor = new JSONPostProcessor();\r\n        jsonExtractor.setName(&quot;JSON Extractor&quot;);\r\n        jsonExtractor.setRefNames(&quot;foo&quot;);\r\n        jsonExtractor.setJsonPathExpressions(&quot;$.title&quot;);\r\n        jsonExtractor.setProperty(TestElement.TEST_CLASS, JSONPostProcessor.class.getName());\r\n        jsonExtractor.setProperty(TestElement.GUI_CLASS, JSONPostProcessorGui.class.getName());\r\n\r\n        // Response Assertion\r\n        ResponseAssertion ra = new ResponseAssertion();\r\n        ra.setProperty(TestElement.GUI_CLASS, AssertionGui.class.getName());\r\n        ra.setName(JMeterUtils.getResString(&quot;assertion_title&quot;));\r\n        ra.setTestFieldResponseCode();\r\n        ra.setToEqualsType();\r\n        ra.addTestString(&quot;200&quot;);\r\n\r\n        // Create a loop controller\r\n        LoopController loopController = new LoopController();\r\n        loopController.setLoops(10);\r\n        loopController.setFirst(true);\r\n        loopController.setProperty(TestElement.TEST_CLASS, LoopController.class.getName());\r\n        loopController.setProperty(TestElement.GUI_CLASS, LoopControlPanel.class.getName());\r\n        loopController.initialize();\r\n\r\n        // Create a thread group\r\n        ThreadGroup threadGroup = new ThreadGroup();\r\n        threadGroup.setName(&quot;First Thread Group&quot;);\r\n        threadGroup.setNumThreads(2);\r\n        threadGroup.setRampUp(1);\r\n        threadGroup.setSamplerController(loopController);\r\n        threadGroup.setProperty(TestElement.TEST_CLASS, ThreadGroup.class.getName());\r\n        threadGroup.setProperty(TestElement.GUI_CLASS, ThreadGroupGui.class.getName());\r\n\r\n        // Create a test plan\r\n        TestPlan testPlan = new TestPlan(&quot;Test Plan&quot;);\r\n        testPlan.setProperty(TestElement.TEST_CLASS, TestPlan.class.getName());\r\n        testPlan.setProperty(TestElement.GUI_CLASS, TestPlanGui.class.getName());\r\n        testPlan.setUserDefinedVariables((Arguments) new ArgumentsPanel().createTestElement());\r\n\r\n        // Add the test plan to our hash tree, this is the top level of our test\r\n        testPlanTree.add(testPlan);\r\n\r\n        // Create another hash tree and add the thread group to our test plan\r\n        HashTree threadGroupHashTree = testPlanTree.add(testPlan, threadGroup);\r\n\r\n        // Create a hash tree to add the post processor to\r\n        HashTree httpSamplerOneTree = new HashTree();\r\n        httpSamplerOneTree.add(httpSamplerOne, jsonExtractor);\r\n        httpSamplerOneTree.add(httpSamplerOne, ra);\r\n\r\n        // Add the http sampler to the hash tree that contains the thread group\r\n        threadGroupHashTree.add(httpSamplerOneTree);\r\n        threadGroupHashTree.add(httpSamplerTwo);\r\n\r\n        SaveService.saveTree(testPlanTree, new FileOutputStream(jmeterHome + &quot;/bin/FirstTest.jmx&quot;));\r\n\r\n        // Summariser\r\n        Summariser summariser = null;\r\n        String summariserName = JMeterUtils.getPropDefault(&quot;summarise.names&quot;, &quot;summary response&quot;);\r\n        if (summariserName.length() &gt; 0) {\r\n            summariser = new Summariser(summariserName);\r\n        }\r\n\r\n        ResultCollector logger = new ResultCollector(summariser);\r\n        testPlanTree.add(testPlanTree.getArray()[0], logger);\r\n\r\n        // Write to a file\r\n        ResultCollector rc = new ResultCollector();\r\n        rc.setEnabled(true);\r\n        rc.setErrorLogging(false);\r\n        rc.isSampleWanted(true);\r\n        SampleSaveConfiguration ssc = new SampleSaveConfiguration();\r\n        ssc.setTime(true);\r\n        ssc.setAssertionResultsFailureMessage(true);\r\n        ssc.setThreadCounts(true);\r\n        rc.setSaveConfig(ssc);\r\n        rc.setFilename(jmeterHome + &quot;/bin/FirstTest.jtl&quot;);\r\n        testPlanTree.add(testPlanTree.getArray()[0], rc);\r\n\r\n        // Configure\r\n        jm.configure(testPlanTree);\r\n\r\n        // Run\r\n        jm.run();\r\n    }\r\n}\r\n```\r\n\r\nI get a following error for SaveService.SaveTree in line 120\r\n\r\n```\r\nException in thread &quot;main&quot; com.thoughtworks.xstream.converters.ConversionException: No converter available\r\n---- Debugging information ----\r\nmessage             : No converter available\r\ntype                : java.util.IdentityHashMap\r\nconverter           : com.thoughtworks.xstream.converters.reflection.SerializableConverter\r\nmessage[1]          : Unable to make private void java.util.IdentityHashMap.readObject(java.io.ObjectInputStream) throws java.io.IOException,java.lang.ClassNotFoundException accessible: module java.base does not &quot;opens java.util&quot; to unnamed module @30c7da1e\r\nconverter[1]        : com.thoughtworks.xstream.converters.reflection.ReflectionConverter\r\nmessage[2]          : Unable to make field transient java.util.Set java.util.AbstractMap.keySet accessible: module java.base does not &quot;opens java.util&quot; to unnamed module @30c7da1e\r\n-------------------------------\r\n```\r\n\r\nI searched on the web for the solution but was unable to find one.\r\nI updated Jmeter, added necessary plugins via plugin manager, added jmeter dependencies to gradle in the project we use.","title":"I get an error while using jmeter SaveService.saveTree to save the test as jmx file","body":"<p>I wanted to switch from jmx files to code in Java, so I found some example code at <a href=\"https://octoperf.com/blog/2023/03/29/jmeter-in-code/#additional-elements\" rel=\"nofollow noreferrer\">Octoperf.com</a> and tried to run it (I only entered different location for jmeter):</p>\n<pre><code>import org.apache.jmeter.assertions.ResponseAssertion;\nimport org.apache.jmeter.assertions.gui.AssertionGui;\nimport org.apache.jmeter.config.Arguments;\nimport org.apache.jmeter.config.gui.ArgumentsPanel;\nimport org.apache.jmeter.control.LoopController;\nimport org.apache.jmeter.control.gui.LoopControlPanel;\nimport org.apache.jmeter.control.gui.TestPlanGui;\nimport org.apache.jmeter.engine.StandardJMeterEngine;\nimport org.apache.jmeter.extractor.json.jsonpath.JSONPostProcessor;\nimport org.apache.jmeter.extractor.json.jsonpath.gui.JSONPostProcessorGui;\nimport org.apache.jmeter.protocol.http.control.gui.HttpTestSampleGui;\nimport org.apache.jmeter.protocol.http.sampler.HTTPSampler;\nimport org.apache.jmeter.reporters.ResultCollector;\nimport org.apache.jmeter.reporters.Summariser;\nimport org.apache.jmeter.samplers.SampleSaveConfiguration;\nimport org.apache.jmeter.save.SaveService;\nimport org.apache.jmeter.testelement.TestElement;\nimport org.apache.jmeter.testelement.TestPlan;\nimport org.apache.jmeter.threads.ThreadGroup;\nimport org.apache.jmeter.threads.gui.ThreadGroupGui;\nimport org.apache.jmeter.util.JMeterUtils;\nimport org.apache.jorphan.collections.HashTree;\n\nimport java.io.FileOutputStream;\n\npublic class JmeterBasicTest {\n\n    public static void main(String[] args) throws Exception {\n\n        // Create the Jmeter engine\n        StandardJMeterEngine jm = new StandardJMeterEngine();\n\n        // Set some configuration\n        String jmeterHome = &quot;/opt/homebrew/Cellar/jmeter/5.6.2&quot;;\n        JMeterUtils.setJMeterHome(jmeterHome);\n        JMeterUtils.loadJMeterProperties(jmeterHome + &quot;/libexec/bin/jmeter.properties&quot;);\n        JMeterUtils.initLocale();\n\n        // Create a new hash tree to hold our test elements\n        HashTree testPlanTree = new HashTree();\n\n        // Create a sampler\n        HTTPSampler httpSamplerOne = new HTTPSampler();\n        httpSamplerOne.setDomain(&quot;octoperf.com&quot;);\n        httpSamplerOne.setPort(443);\n        httpSamplerOne.setPath(&quot;/blog/2023/02/22/jmeter-logging/&quot;);\n        httpSamplerOne.setMethod(&quot;GET&quot;);\n        httpSamplerOne.setName(&quot;HTTP Request One&quot;);\n        httpSamplerOne.setProtocol(&quot;https&quot;);\n        httpSamplerOne.setProperty(TestElement.TEST_CLASS, HTTPSampler.class.getName());\n        httpSamplerOne.setProperty(TestElement.GUI_CLASS, HttpTestSampleGui.class.getName());\n\n        // Create another sampler\n        HTTPSampler httpSamplerTwo = new HTTPSampler();\n        httpSamplerTwo.setDomain(&quot;octoperf.com&quot;);\n        httpSamplerTwo.setPort(443);\n        httpSamplerTwo.setPath(&quot;blog/2023/01/16/uncommon-performance-testing/&quot;);\n        httpSamplerTwo.setMethod(&quot;GET&quot;);\n        httpSamplerTwo.setName(&quot;HTTP Request&quot;);\n        httpSamplerTwo.setProtocol(&quot;https&quot;);\n        httpSamplerTwo.setProperty(TestElement.TEST_CLASS, HTTPSampler.class.getName());\n        httpSamplerTwo.setProperty(TestElement.GUI_CLASS, HttpTestSampleGui.class.getName());\n\n        // JSON Post Processor\n        JSONPostProcessor jsonExtractor = new JSONPostProcessor();\n        jsonExtractor.setName(&quot;JSON Extractor&quot;);\n        jsonExtractor.setRefNames(&quot;foo&quot;);\n        jsonExtractor.setJsonPathExpressions(&quot;$.title&quot;);\n        jsonExtractor.setProperty(TestElement.TEST_CLASS, JSONPostProcessor.class.getName());\n        jsonExtractor.setProperty(TestElement.GUI_CLASS, JSONPostProcessorGui.class.getName());\n\n        // Response Assertion\n        ResponseAssertion ra = new ResponseAssertion();\n        ra.setProperty(TestElement.GUI_CLASS, AssertionGui.class.getName());\n        ra.setName(JMeterUtils.getResString(&quot;assertion_title&quot;));\n        ra.setTestFieldResponseCode();\n        ra.setToEqualsType();\n        ra.addTestString(&quot;200&quot;);\n\n        // Create a loop controller\n        LoopController loopController = new LoopController();\n        loopController.setLoops(10);\n        loopController.setFirst(true);\n        loopController.setProperty(TestElement.TEST_CLASS, LoopController.class.getName());\n        loopController.setProperty(TestElement.GUI_CLASS, LoopControlPanel.class.getName());\n        loopController.initialize();\n\n        // Create a thread group\n        ThreadGroup threadGroup = new ThreadGroup();\n        threadGroup.setName(&quot;First Thread Group&quot;);\n        threadGroup.setNumThreads(2);\n        threadGroup.setRampUp(1);\n        threadGroup.setSamplerController(loopController);\n        threadGroup.setProperty(TestElement.TEST_CLASS, ThreadGroup.class.getName());\n        threadGroup.setProperty(TestElement.GUI_CLASS, ThreadGroupGui.class.getName());\n\n        // Create a test plan\n        TestPlan testPlan = new TestPlan(&quot;Test Plan&quot;);\n        testPlan.setProperty(TestElement.TEST_CLASS, TestPlan.class.getName());\n        testPlan.setProperty(TestElement.GUI_CLASS, TestPlanGui.class.getName());\n        testPlan.setUserDefinedVariables((Arguments) new ArgumentsPanel().createTestElement());\n\n        // Add the test plan to our hash tree, this is the top level of our test\n        testPlanTree.add(testPlan);\n\n        // Create another hash tree and add the thread group to our test plan\n        HashTree threadGroupHashTree = testPlanTree.add(testPlan, threadGroup);\n\n        // Create a hash tree to add the post processor to\n        HashTree httpSamplerOneTree = new HashTree();\n        httpSamplerOneTree.add(httpSamplerOne, jsonExtractor);\n        httpSamplerOneTree.add(httpSamplerOne, ra);\n\n        // Add the http sampler to the hash tree that contains the thread group\n        threadGroupHashTree.add(httpSamplerOneTree);\n        threadGroupHashTree.add(httpSamplerTwo);\n\n        SaveService.saveTree(testPlanTree, new FileOutputStream(jmeterHome + &quot;/bin/FirstTest.jmx&quot;));\n\n        // Summariser\n        Summariser summariser = null;\n        String summariserName = JMeterUtils.getPropDefault(&quot;summarise.names&quot;, &quot;summary response&quot;);\n        if (summariserName.length() &gt; 0) {\n            summariser = new Summariser(summariserName);\n        }\n\n        ResultCollector logger = new ResultCollector(summariser);\n        testPlanTree.add(testPlanTree.getArray()[0], logger);\n\n        // Write to a file\n        ResultCollector rc = new ResultCollector();\n        rc.setEnabled(true);\n        rc.setErrorLogging(false);\n        rc.isSampleWanted(true);\n        SampleSaveConfiguration ssc = new SampleSaveConfiguration();\n        ssc.setTime(true);\n        ssc.setAssertionResultsFailureMessage(true);\n        ssc.setThreadCounts(true);\n        rc.setSaveConfig(ssc);\n        rc.setFilename(jmeterHome + &quot;/bin/FirstTest.jtl&quot;);\n        testPlanTree.add(testPlanTree.getArray()[0], rc);\n\n        // Configure\n        jm.configure(testPlanTree);\n\n        // Run\n        jm.run();\n    }\n}\n</code></pre>\n<p>I get a following error for SaveService.SaveTree in line 120</p>\n<pre><code>Exception in thread &quot;main&quot; com.thoughtworks.xstream.converters.ConversionException: No converter available\n---- Debugging information ----\nmessage             : No converter available\ntype                : java.util.IdentityHashMap\nconverter           : com.thoughtworks.xstream.converters.reflection.SerializableConverter\nmessage[1]          : Unable to make private void java.util.IdentityHashMap.readObject(java.io.ObjectInputStream) throws java.io.IOException,java.lang.ClassNotFoundException accessible: module java.base does not &quot;opens java.util&quot; to unnamed module @30c7da1e\nconverter[1]        : com.thoughtworks.xstream.converters.reflection.ReflectionConverter\nmessage[2]          : Unable to make field transient java.util.Set java.util.AbstractMap.keySet accessible: module java.base does not &quot;opens java.util&quot; to unnamed module @30c7da1e\n-------------------------------\n</code></pre>\n<p>I searched on the web for the solution but was unable to find one.\nI updated Jmeter, added necessary plugins via plugin manager, added jmeter dependencies to gradle in the project we use.</p>\n"},{"tags":["java","hashmap","resize"],"comments":[{"owner":{"account_id":9365949,"reputation":2414,"user_id":6950859,"accept_rate":92,"display_name":"cela"},"score":1,"creation_date":1694045584,"post_id":77055831,"comment_id":135841128,"body_markdown":"Why are you reusing the same `buckets` reference in your constructor? `MyHashMap hashMap = new MyHashMap(newTableSize);` is a notoriously bad idea. You should not use raw types like this and instead make your HashMap class generic.","body":"Why are you reusing the same <code>buckets</code> reference in your constructor? <code>MyHashMap hashMap = new MyHashMap(newTableSize);</code> is a notoriously bad idea. You should not use raw types like this and instead make your HashMap class generic."}],"answers":[{"tags":[],"owner":{"account_id":27243397,"reputation":1331,"user_id":20769158,"display_name":"scrhartley"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694045840,"creation_date":1694045511,"answer_id":77055878,"question_id":77055831,"body_markdown":"So your test does this:\r\n```java\r\nfor (int i = 0; i &lt; 1000000; i++) {\r\n    m.put(&quot;hi&quot; + i, i);\r\n```\r\nWhich mean that in your 10 thousand milliseconds, you need to do 1 million iterations, meaning 0.01 milliseconds are available per iteration, i.e. you need to process 100 iterations of this loop every millisecond.\r\n\r\nIs it so surprising that it might time out? Remember, some time may be spent in garbage collection during that as well.\r\n\r\nAlthough probably the real reason:  \r\nYour `put` calls `resize`, which creates a new MyHashMap and then uses `put`, which can then call `resize` and possibly go into a loop.\r\n\r\n***P.S.***  \r\nI noticed that in your `put` method, you seem to needlessly be using `Integer` rather than `int`, which adds a small amount of overhead, boxing and unboxing the values.","title":"Resize in custom HashMap - test timed out","body":"<p>So your test does this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (int i = 0; i &lt; 1000000; i++) {\n    m.put(&quot;hi&quot; + i, i);\n</code></pre>\n<p>Which mean that in your 10 thousand milliseconds, you need to do 1 million iterations, meaning 0.01 milliseconds are available per iteration, i.e. you need to process 100 iterations of this loop every millisecond.</p>\n<p>Is it so surprising that it might time out? Remember, some time may be spent in garbage collection during that as well.</p>\n<p>Although probably the real reason:<br />\nYour <code>put</code> calls <code>resize</code>, which creates a new MyHashMap and then uses <code>put</code>, which can then call <code>resize</code> and possibly go into a loop.</p>\n<p><em><strong>P.S.</strong></em><br />\nI noticed that in your <code>put</code> method, you seem to needlessly be using <code>Integer</code> rather than <code>int</code>, which adds a small amount of overhead, boxing and unboxing the values.</p>\n"},{"tags":[],"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694066848,"creation_date":1694066848,"answer_id":77056982,"question_id":77055831,"body_markdown":"The problem is that your constructor creates only one `buckets` and uses this for all `hashTable` entries:\r\n\r\n        buckets = createBucket();\r\n        hashTable = createTable(bucketSize);\r\n        for (int i = 0; i &lt; bucketSize; i++) {\r\n            hashTable[i] = buckets;\r\n        }\r\n\r\nThat means that no matter what hashcode your keys have, they end up in the same `buckets` list.\r\n\r\nYour `resize()` method then does excessive work:\r\n\r\n            for (int i = 0; i &lt; bucketSize; i++) {\r\n                // Loop through each item in current hash table&#39;s buckets\r\n                for (Node node : hashTable[i]) {\r\n                    hashMap.put(node.key, node.value);\r\n                }\r\n            }\r\n\r\nSince all `hashTable` entries effectively contain the same `buckets` list, this  tries to add the entries `bucketSize` times.\r\n\r\nTo fix it you **must** in the constructor create a new `buckets` list for every `hashTable` entry:\r\n\r\n        hashTable = createTable(bucketSize);\r\n        for (int i = 0; i &lt; bucketSize; i++) {\r\n            hashTable[i] = createBucket();\r\n        }\r\n","title":"Resize in custom HashMap - test timed out","body":"<p>The problem is that your constructor creates only one <code>buckets</code> and uses this for all <code>hashTable</code> entries:</p>\n<pre><code>    buckets = createBucket();\n    hashTable = createTable(bucketSize);\n    for (int i = 0; i &lt; bucketSize; i++) {\n        hashTable[i] = buckets;\n    }\n</code></pre>\n<p>That means that no matter what hashcode your keys have, they end up in the same <code>buckets</code> list.</p>\n<p>Your <code>resize()</code> method then does excessive work:</p>\n<pre><code>        for (int i = 0; i &lt; bucketSize; i++) {\n            // Loop through each item in current hash table's buckets\n            for (Node node : hashTable[i]) {\n                hashMap.put(node.key, node.value);\n            }\n        }\n</code></pre>\n<p>Since all <code>hashTable</code> entries effectively contain the same <code>buckets</code> list, this  tries to add the entries <code>bucketSize</code> times.</p>\n<p>To fix it you <strong>must</strong> in the constructor create a new <code>buckets</code> list for every <code>hashTable</code> entry:</p>\n<pre><code>    hashTable = createTable(bucketSize);\n    for (int i = 0; i &lt; bucketSize; i++) {\n        hashTable[i] = createBucket();\n    }\n</code></pre>\n"}],"owner":{"account_id":17197306,"reputation":119,"user_id":12449753,"display_name":"w97802"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":77056982,"answer_count":2,"score":-2,"last_activity_date":1694066848,"creation_date":1694044228,"question_id":77055831,"body_markdown":"I am implementing hashmap from scratch.\r\nI have my constructor:\r\n```\r\n    public MyHashMap(int initialCapacity) {\r\n        resizeFactor = 2;\r\n        loadFactor = 0.75;\r\n        bucketSize = initialCapacity;\r\n        size = 0;\r\n        buckets = createBucket();\r\n        hashTable = createTable(bucketSize);\r\n        for (int i = 0; i &lt; bucketSize; i++) {\r\n            hashTable[i] = buckets;\r\n        }\r\n    }\r\n``` \r\nMy put method:\r\n```\r\n    public void put(K key, V value) {\r\n        if (key == null) throw new IllegalArgumentException(&quot;first argument to put() is null&quot;);\r\n\r\n        // Get hash code\r\n        Integer hashCode = key.hashCode();\r\n        // Compute index by modulo\r\n        Integer index = Math.floorMod(hashCode, bucketSize);\r\n        // Check if the item exists in the bucket\r\n        for (Node node : hashTable[index]) {\r\n            if (node.key.equals(key)) {\r\n                node.value = value;\r\n                return;\r\n            }\r\n        }\r\n        hashTable[index].add(createNode(key, value));\r\n        size += 1;\r\n\r\n        if ( 1.0 * size/ bucketSize &gt; loadFactor) {\r\n            int newTableSize = bucketSize * resizeFactor;\r\n            resize(newTableSize);\r\n        }\r\n    }\r\n```\r\n**There is some problem with my resize method because the test for resize failed and I do not seem to understand why**\r\n```\r\n    private void resize(int newTableSize) {\r\n        MyHashMap hashMap = new MyHashMap(newTableSize);\r\n            // Loop through each bucket(/index) in the current hash table\r\n            for (int i = 0; i &lt; bucketSize; i++) {\r\n                // Loop through each item in current hash table&#39;s buckets\r\n                for (Node node : hashTable[i]) {\r\n                    hashMap.put(node.key, node.value);\r\n                }\r\n            }\r\n        this.size = hashMap.size;\r\n        this.bucketSize = newTableSize;\r\n        this.hashTable = hashMap.hashTable;\r\n    }\r\n```\r\nThe test: (you may assume there is for sure nothing wrong with the test)\r\n```\r\n    public void testResize() {\r\n        sanityResizeTest(new MyHashMap&lt;&gt;(), 16, 0.75);\r\n        sanityResizeTest(new MyHashMap&lt;&gt;(32), 32, 0.75);\r\n        sanityResizeTest(new MyHashMap&lt;&gt;(64, 0.5), 64, 0.5);\r\n    }\r\n\r\n    public static void sanityResizeTest(MyHashMap&lt;String, Integer&gt; m, int initialCapacity, double loadFactor) {\r\n        // Times out after 10 seconds\r\n        assertTimeoutPreemptively(Duration.ofSeconds(10), () -&gt; {\r\n            int backingArrayCapacity = sizeOfBackingArray(m);\r\n            assertThat(backingArrayCapacity).isEqualTo(initialCapacity);\r\n            for (int i = 0; i &lt; 1000000; i++) {\r\n                m.put(&quot;hi&quot; + i, i);\r\n                if (1.0 * i / backingArrayCapacity &gt; loadFactor) {\r\n                    assertThat(sizeOfBackingArray(m)).isGreaterThan(backingArrayCapacity);\r\n                    backingArrayCapacity = sizeOfBackingArray(m);\r\n                }\r\n            }\r\n        });\r\n    }\r\n```\r\n```\r\nsizeOfBackingArray:\r\n    /** Returns the length of the backing array of the given map.\r\n     *  Be sure that you only use one instance variable to hold the buckets,\r\n     *  otherwise this will not work properly.\r\n```\r\n\r\nWhat I don&#39;t understand\r\n-----------------------\r\n```\r\norg.opentest4j.AssertionFailedError: execution timed out after 10000 ms\r\n\tat org.junit.jupiter.api.AssertTimeout.assertTimeoutPreemptively(AssertTimeout.java:158)\r\n\tat org.junit.jupiter.api.AssertTimeout.assertTimeoutPreemptively(AssertTimeout.java:119)\r\n\tat org.junit.jupiter.api.AssertTimeout.assertTimeoutPreemptively(AssertTimeout.java:101)\r\n\tat org.junit.jupiter.api.AssertTimeout.assertTimeoutPreemptively(AssertTimeout.java:97)\r\n\tat org.junit.jupiter.api.Assertions.assertTimeoutPreemptively(Assertions.java:3398)\r\n\tat hashmap.TestMyHashMap.sanityResizeTest(TestMyHashMap.java:182)\r\n\tat hashmap.TestMyHashMap.testResize(TestMyHashMap.java:175)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:577)\r\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)\r\n\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n\tat org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)\r\n\tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)\r\n\tat org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)\r\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)\r\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)\r\n\tat org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)\r\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)\r\n\tat org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\r\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:413)\r\n\tat org.junit.runner.JUnitCore.run(JUnitCore.java:137)\r\n```\r\n\r\nI&#39;m not exactly sure why would it time out because the `put` and `resize` methods look fine to me.\r\nAny help will be greatly appreciated.","title":"Resize in custom HashMap - test timed out","body":"<p>I am implementing hashmap from scratch.\nI have my constructor:</p>\n<pre><code>    public MyHashMap(int initialCapacity) {\n        resizeFactor = 2;\n        loadFactor = 0.75;\n        bucketSize = initialCapacity;\n        size = 0;\n        buckets = createBucket();\n        hashTable = createTable(bucketSize);\n        for (int i = 0; i &lt; bucketSize; i++) {\n            hashTable[i] = buckets;\n        }\n    }\n</code></pre>\n<p>My put method:</p>\n<pre><code>    public void put(K key, V value) {\n        if (key == null) throw new IllegalArgumentException(&quot;first argument to put() is null&quot;);\n\n        // Get hash code\n        Integer hashCode = key.hashCode();\n        // Compute index by modulo\n        Integer index = Math.floorMod(hashCode, bucketSize);\n        // Check if the item exists in the bucket\n        for (Node node : hashTable[index]) {\n            if (node.key.equals(key)) {\n                node.value = value;\n                return;\n            }\n        }\n        hashTable[index].add(createNode(key, value));\n        size += 1;\n\n        if ( 1.0 * size/ bucketSize &gt; loadFactor) {\n            int newTableSize = bucketSize * resizeFactor;\n            resize(newTableSize);\n        }\n    }\n</code></pre>\n<p><strong>There is some problem with my resize method because the test for resize failed and I do not seem to understand why</strong></p>\n<pre><code>    private void resize(int newTableSize) {\n        MyHashMap hashMap = new MyHashMap(newTableSize);\n            // Loop through each bucket(/index) in the current hash table\n            for (int i = 0; i &lt; bucketSize; i++) {\n                // Loop through each item in current hash table's buckets\n                for (Node node : hashTable[i]) {\n                    hashMap.put(node.key, node.value);\n                }\n            }\n        this.size = hashMap.size;\n        this.bucketSize = newTableSize;\n        this.hashTable = hashMap.hashTable;\n    }\n</code></pre>\n<p>The test: (you may assume there is for sure nothing wrong with the test)</p>\n<pre><code>    public void testResize() {\n        sanityResizeTest(new MyHashMap&lt;&gt;(), 16, 0.75);\n        sanityResizeTest(new MyHashMap&lt;&gt;(32), 32, 0.75);\n        sanityResizeTest(new MyHashMap&lt;&gt;(64, 0.5), 64, 0.5);\n    }\n\n    public static void sanityResizeTest(MyHashMap&lt;String, Integer&gt; m, int initialCapacity, double loadFactor) {\n        // Times out after 10 seconds\n        assertTimeoutPreemptively(Duration.ofSeconds(10), () -&gt; {\n            int backingArrayCapacity = sizeOfBackingArray(m);\n            assertThat(backingArrayCapacity).isEqualTo(initialCapacity);\n            for (int i = 0; i &lt; 1000000; i++) {\n                m.put(&quot;hi&quot; + i, i);\n                if (1.0 * i / backingArrayCapacity &gt; loadFactor) {\n                    assertThat(sizeOfBackingArray(m)).isGreaterThan(backingArrayCapacity);\n                    backingArrayCapacity = sizeOfBackingArray(m);\n                }\n            }\n        });\n    }\n</code></pre>\n<pre><code>sizeOfBackingArray:\n    /** Returns the length of the backing array of the given map.\n     *  Be sure that you only use one instance variable to hold the buckets,\n     *  otherwise this will not work properly.\n</code></pre>\n<h2>What I don't understand</h2>\n<pre><code>org.opentest4j.AssertionFailedError: execution timed out after 10000 ms\n    at org.junit.jupiter.api.AssertTimeout.assertTimeoutPreemptively(AssertTimeout.java:158)\n    at org.junit.jupiter.api.AssertTimeout.assertTimeoutPreemptively(AssertTimeout.java:119)\n    at org.junit.jupiter.api.AssertTimeout.assertTimeoutPreemptively(AssertTimeout.java:101)\n    at org.junit.jupiter.api.AssertTimeout.assertTimeoutPreemptively(AssertTimeout.java:97)\n    at org.junit.jupiter.api.Assertions.assertTimeoutPreemptively(Assertions.java:3398)\n    at hashmap.TestMyHashMap.sanityResizeTest(TestMyHashMap.java:182)\n    at hashmap.TestMyHashMap.testResize(TestMyHashMap.java:175)\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:577)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)\n    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\n    at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\n    at org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)\n    at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)\n    at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)\n    at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:413)\n    at org.junit.runner.JUnitCore.run(JUnitCore.java:137)\n</code></pre>\n<p>I'm not exactly sure why would it time out because the <code>put</code> and <code>resize</code> methods look fine to me.\nAny help will be greatly appreciated.</p>\n"},{"tags":["java","performance","design-patterns","singleton","benchmarking"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1694066486,"post_id":77056902,"comment_id":135842743,"body_markdown":"I hope you&#39;re testing this for fun, and not because you intend to use DCL somewhere? If you want a (lazily loaded) singleton, just use an `enum`.","body":"I hope you&#39;re testing this for fun, and not because you intend to use DCL somewhere? If you want a (lazily loaded) singleton, just use an <code>enum</code>."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1695375972,"post_id":77056902,"comment_id":136019178,"body_markdown":"A local variable is not a magic accelerator. When you’re still reading the field as many times as without the local variable, there is no benefit at all. When you also forget to assign the field, you create a new instance on every call, so the performance drawback is the least thing to worry about, as you don’t have a singleton anymore.","body":"A local variable is not a magic accelerator. When you’re still reading the field as many times as without the local variable, there is no benefit at all. When you also forget to assign the field, you create a new instance on every call, so the performance drawback is the least thing to worry about, as you don’t have a singleton anymore."}],"owner":{"account_id":24638884,"reputation":21,"user_id":18537219,"display_name":"Janis Zhang"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1694065851,"creation_date":1694065851,"question_id":77056902,"body_markdown":"&gt; local variable increases performance by 25 percent - Joshua Bloch &quot;Effective Java, Second Edition&quot;, p. 283-284\r\n\r\nI&#39;m new to benchmark test, and i want to do a test for DoubleCheckLockingSingleton.\r\nBut the result seems like the performance of DoubleCheckLockingSingletonWithoutLocalVar is better?\r\n\r\n\r\n\r\nI&#39;m using https://github.com/openjdk/jmh\r\n\r\nThe benchmark result:\r\n```\r\n# JMH version: 1.33\r\n# VM version: JDK 17.0.6, OpenJDK 64-Bit Server VM, 17.0.6+10-b829.9\r\n# VM invoker: /home/repo/idea-IU-231.9011.34/jbr/bin/java\r\n# VM options: -javaagent:/home/repo/idea-IU-231.9011.34/lib/idea_rt.jar=46469:/home/repo/idea-IU-231.9011.34/bin -Dfile.encoding=UTF-8\r\n# Blackhole mode: full + dont-inline hint (default, use -Djmh.blackhole.autoDetect=true to auto-detect)\r\n# Warmup: 5 iterations, 10 s each\r\n# Measurement: 5 iterations, 10 s each\r\n# Timeout: 10 min per iteration\r\n# Threads: 10 threads, will synchronize iterations\r\n# Benchmark mode: Throughput, ops/time\r\n# Benchmark: org.example.MyBenchmarkTest.measureWithLocalVar\r\n\r\nBenchmark                                Mode  Cnt           Score           Error  Units\r\nMyBenchmarkTest.measureWithLocalVar     thrpt    5    14543289.188 &#177;   1754652.871  ops/s\r\nMyBenchmarkTest.measureWithoutLocalVar  thrpt    5  2238795119.169 &#177; 942222432.066  ops/s\r\n```\r\n\r\nMyBenchmarkTest file\r\n```\r\n@State(Scope.Benchmark)\r\n@BenchmarkMode(Mode.Throughput)\r\npublic class MyBenchmarkTest {\r\n    @Benchmark\r\n    @Threads(10)\r\n    public DoubleCheckLockingSingleton measureWithLocalVar() {\r\n        return  DoubleCheckLockingSingleton.getInstance();\r\n    }\r\n\r\n    @Benchmark\r\n    @Threads(10)\r\n    public DoubleCheckLockingSingletonWithoutLocalVar measureWithoutLocalVar() {\r\n        return DoubleCheckLockingSingletonWithoutLocalVar.getInstance();\r\n    }\r\n\r\n    public static void main(String[] args) throws RunnerException {\r\n        Options options = new OptionsBuilder()\r\n                .include(MyBenchmarkTest.class.getSimpleName())\r\n                .forks(1)\r\n                .build();\r\n\r\n        new Runner(options).run();\r\n    }\r\n }\r\n```\r\n\r\nDoubleCheckLocking file\r\n```\r\npublic class DoubleCheckLockingSingleton {\r\n   \r\n    private static volatile DoubleCheckLockingSingleton instance = null;\r\n\r\n    public static DoubleCheckLockingSingleton getInstance(){\r\n        DoubleCheckLockingSingleton result = instance;\r\n\r\n        if(result ==null){\r\n            synchronized (DoubleCheckLockingSingleton.class){\r\n                result = instance;\r\n                if(result==null){\r\n                    result = new DoubleCheckLockingSingleton();\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n}\r\n\r\npublic class DoubleCheckLockingSingletonWithoutLocalVar {\r\n\r\n    private static volatile DoubleCheckLockingSingletonWithoutLocalVar instance = null;\r\n\r\n    public static DoubleCheckLockingSingletonWithoutLocalVar getInstance(){\r\n        if(instance ==null){\r\n            synchronized (DoubleCheckLockingSingletonWithoutLocalVar.class){\r\n                if(instance==null){\r\n                    instance = new DoubleCheckLockingSingletonWithoutLocalVar();\r\n                }\r\n            }\r\n        }\r\n        return instance;\r\n    }\r\n}\r\n```\r\nCan somebody give me a hand? thanks!","title":"Query about using Benchmark test singleton design pattern","body":"<blockquote>\n<p>local variable increases performance by 25 percent - Joshua Bloch &quot;Effective Java, Second Edition&quot;, p. 283-284</p>\n</blockquote>\n<p>I'm new to benchmark test, and i want to do a test for DoubleCheckLockingSingleton.\nBut the result seems like the performance of DoubleCheckLockingSingletonWithoutLocalVar is better?</p>\n<p>I'm using <a href=\"https://github.com/openjdk/jmh\" rel=\"nofollow noreferrer\">https://github.com/openjdk/jmh</a></p>\n<p>The benchmark result:</p>\n<pre><code># JMH version: 1.33\n# VM version: JDK 17.0.6, OpenJDK 64-Bit Server VM, 17.0.6+10-b829.9\n# VM invoker: /home/repo/idea-IU-231.9011.34/jbr/bin/java\n# VM options: -javaagent:/home/repo/idea-IU-231.9011.34/lib/idea_rt.jar=46469:/home/repo/idea-IU-231.9011.34/bin -Dfile.encoding=UTF-8\n# Blackhole mode: full + dont-inline hint (default, use -Djmh.blackhole.autoDetect=true to auto-detect)\n# Warmup: 5 iterations, 10 s each\n# Measurement: 5 iterations, 10 s each\n# Timeout: 10 min per iteration\n# Threads: 10 threads, will synchronize iterations\n# Benchmark mode: Throughput, ops/time\n# Benchmark: org.example.MyBenchmarkTest.measureWithLocalVar\n\nBenchmark                                Mode  Cnt           Score           Error  Units\nMyBenchmarkTest.measureWithLocalVar     thrpt    5    14543289.188 ±   1754652.871  ops/s\nMyBenchmarkTest.measureWithoutLocalVar  thrpt    5  2238795119.169 ± 942222432.066  ops/s\n</code></pre>\n<p>MyBenchmarkTest file</p>\n<pre><code>@State(Scope.Benchmark)\n@BenchmarkMode(Mode.Throughput)\npublic class MyBenchmarkTest {\n    @Benchmark\n    @Threads(10)\n    public DoubleCheckLockingSingleton measureWithLocalVar() {\n        return  DoubleCheckLockingSingleton.getInstance();\n    }\n\n    @Benchmark\n    @Threads(10)\n    public DoubleCheckLockingSingletonWithoutLocalVar measureWithoutLocalVar() {\n        return DoubleCheckLockingSingletonWithoutLocalVar.getInstance();\n    }\n\n    public static void main(String[] args) throws RunnerException {\n        Options options = new OptionsBuilder()\n                .include(MyBenchmarkTest.class.getSimpleName())\n                .forks(1)\n                .build();\n\n        new Runner(options).run();\n    }\n }\n</code></pre>\n<p>DoubleCheckLocking file</p>\n<pre><code>public class DoubleCheckLockingSingleton {\n   \n    private static volatile DoubleCheckLockingSingleton instance = null;\n\n    public static DoubleCheckLockingSingleton getInstance(){\n        DoubleCheckLockingSingleton result = instance;\n\n        if(result ==null){\n            synchronized (DoubleCheckLockingSingleton.class){\n                result = instance;\n                if(result==null){\n                    result = new DoubleCheckLockingSingleton();\n                }\n            }\n        }\n        return result;\n    }\n}\n\npublic class DoubleCheckLockingSingletonWithoutLocalVar {\n\n    private static volatile DoubleCheckLockingSingletonWithoutLocalVar instance = null;\n\n    public static DoubleCheckLockingSingletonWithoutLocalVar getInstance(){\n        if(instance ==null){\n            synchronized (DoubleCheckLockingSingletonWithoutLocalVar.class){\n                if(instance==null){\n                    instance = new DoubleCheckLockingSingletonWithoutLocalVar();\n                }\n            }\n        }\n        return instance;\n    }\n}\n</code></pre>\n<p>Can somebody give me a hand? thanks!</p>\n"},{"tags":["java","maven","github-actions","maven-compiler-plugin"],"answers":[{"tags":[],"owner":{"account_id":14152045,"reputation":89,"user_id":10223737,"display_name":"gdnmhr"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1662403212,"creation_date":1662403212,"answer_id":73613531,"question_id":73611784,"body_markdown":"I found the answer by myself, turns out that I unintentionally ran maven with sudo (I got some other error before that and thought it was a harmless fix).\r\n\r\nThe setup-java action seems to only update JAVA_HOME for the standard user though, thus maven tried to use version 11 which is preinstalled on the runner.","title":"maven-comiler-plugin: Fatal error compiling: error: release version 17 not supported","body":"<p>I found the answer by myself, turns out that I unintentionally ran maven with sudo (I got some other error before that and thought it was a harmless fix).</p>\n<p>The setup-java action seems to only update JAVA_HOME for the standard user though, thus maven tried to use version 11 which is preinstalled on the runner.</p>\n"},{"tags":[],"owner":{"account_id":11099552,"reputation":1649,"user_id":8148637,"display_name":"KnockingHeads"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694065375,"creation_date":1694065375,"answer_id":77056873,"question_id":73611784,"body_markdown":"Set JAVA_HOME on your windows to your Java 17 installation path. restart the IDE or command line. ","title":"maven-comiler-plugin: Fatal error compiling: error: release version 17 not supported","body":"<p>Set JAVA_HOME on your windows to your Java 17 installation path. restart the IDE or command line.</p>\n"}],"owner":{"account_id":14152045,"reputation":89,"user_id":10223737,"display_name":"gdnmhr"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25268,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"accepted_answer_id":73613531,"answer_count":2,"score":3,"last_activity_date":1694065375,"creation_date":1662392331,"question_id":73611784,"body_markdown":"I tried to create a very simple JavaFX project with maven and use GitHub actions to build a linux package from it. This is the workflow file:\r\n\r\n```lang-yaml\r\n# This workflow will build a Java project with Maven\r\n# For more information see: https://help.github.com/actions/language-and-framework-guides/building-and-testing-java-with-maven\r\n\r\nname: Linux Client\r\n\r\non:\r\n  workflow_dispatch:\r\n  push:\r\n    branches: [ master ]\r\n\r\njobs:\r\n  build:\r\n\r\n    runs-on: ubuntu-latest\r\n\r\n    steps:\r\n      - uses: actions/checkout@v2\r\n      - name: Set up JDK 17\r\n        uses: actions/setup-java@v2\r\n        with:\r\n          java-version: &#39;17&#39;\r\n          distribution: &#39;temurin&#39;\r\n      - name: Debug\r\n        run: mvn -version\r\n      - name: Build with Maven\r\n        run: sudo mvn -e -B install --file pom.xml\r\n      - name: Upload DEB package\r\n        uses: actions/upload-artifact@v2\r\n        with:\r\n          name: Installer files\r\n          path: target/installer/*\r\n```\r\nadopted from [https://github.com/dlemmermann/JPackageScriptFX][2].\r\n\r\nThe workflow file sets up JDK 17 and `mvn -version` seems to have the correct output:\r\n\r\n    Run mvn -version\r\n    Apache Maven 3.8.6 (84538c9988a25aec085021c365c560670ad80f63)\r\n    Maven home: /usr/share/apache-maven-3.8.6\r\n    Java version: 17.0.4.1, vendor: Eclipse Adoptium, runtime: /usr/lib/jvm/temurin-17-jdk-amd64\r\n    Default locale: en, platform encoding: UTF-8\r\n    OS name: &quot;linux&quot;, version: &quot;5.15.0-1017-azure&quot;, arch: &quot;amd64&quot;, family: &quot;unix&quot;\r\n\r\nThe build fails with `Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.10.1:compile (default-compile) on project TestMaven: Fatal error compiling: error: release version 17 not supported -&gt; [Help 1]`.\r\n\r\nWhat am I doing wrong?\r\n\r\n\r\n  [1]: https://github.com/gdnmhr/TestMaven\r\n  [2]: https://github.com/dlemmermann/JPackageScriptFX\r\n","title":"maven-comiler-plugin: Fatal error compiling: error: release version 17 not supported","body":"<p>I tried to create a very simple JavaFX project with maven and use GitHub actions to build a linux package from it. This is the workflow file:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code># This workflow will build a Java project with Maven\n# For more information see: https://help.github.com/actions/language-and-framework-guides/building-and-testing-java-with-maven\n\nname: Linux Client\n\non:\n  workflow_dispatch:\n  push:\n    branches: [ master ]\n\njobs:\n  build:\n\n    runs-on: ubuntu-latest\n\n    steps:\n      - uses: actions/checkout@v2\n      - name: Set up JDK 17\n        uses: actions/setup-java@v2\n        with:\n          java-version: '17'\n          distribution: 'temurin'\n      - name: Debug\n        run: mvn -version\n      - name: Build with Maven\n        run: sudo mvn -e -B install --file pom.xml\n      - name: Upload DEB package\n        uses: actions/upload-artifact@v2\n        with:\n          name: Installer files\n          path: target/installer/*\n</code></pre>\n<p>adopted from <a href=\"https://github.com/dlemmermann/JPackageScriptFX\" rel=\"nofollow noreferrer\">https://github.com/dlemmermann/JPackageScriptFX</a>.</p>\n<p>The workflow file sets up JDK 17 and <code>mvn -version</code> seems to have the correct output:</p>\n<pre><code>Run mvn -version\nApache Maven 3.8.6 (84538c9988a25aec085021c365c560670ad80f63)\nMaven home: /usr/share/apache-maven-3.8.6\nJava version: 17.0.4.1, vendor: Eclipse Adoptium, runtime: /usr/lib/jvm/temurin-17-jdk-amd64\nDefault locale: en, platform encoding: UTF-8\nOS name: &quot;linux&quot;, version: &quot;5.15.0-1017-azure&quot;, arch: &quot;amd64&quot;, family: &quot;unix&quot;\n</code></pre>\n<p>The build fails with <code>Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.10.1:compile (default-compile) on project TestMaven: Fatal error compiling: error: release version 17 not supported -&gt; [Help 1]</code>.</p>\n<p>What am I doing wrong?</p>\n"},{"tags":["java","spring-boot","hibernate","spring-mvc","annotations"],"comments":[{"owner":{"display_name":"user1746460"},"score":0,"creation_date":1660292716,"post_id":73331089,"comment_id":129503106,"body_markdown":"Your entity scan is pointing to different package than your entity.\n@EntityScan(&quot;com.netsurfingzone.*&quot;), you might not need it as the entities are in sub package of main and have @EnableAutoConfiguration","body":"Your entity scan is pointing to different package than your entity. @EntityScan(&quot;com.netsurfingzone.*&quot;), you might not need it as the entities are in sub package of main and have @EnableAutoConfiguration"},{"owner":{"account_id":25404884,"reputation":97,"user_id":19213760,"display_name":"Salahuddin Shayan"},"score":0,"creation_date":1660298689,"post_id":73331089,"comment_id":129505144,"body_markdown":"@SapanVashishth, that was posted by mistake, I have already tried without  EntityScan annotation and also with the  EntityScan annotation with right package address (with * or without *, parent package or exact entity package does not help at all).","body":"@SapanVashishth, that was posted by mistake, I have already tried without  EntityScan annotation and also with the  EntityScan annotation with right package address (with * or without *, parent package or exact entity package does not help at all)."},{"owner":{"display_name":"user1746460"},"score":0,"creation_date":1660304312,"post_id":73331089,"comment_id":129507075,"body_markdown":"I suggest try with fresh project created from spring starter.  I tried with your code and it does create the table in db","body":"I suggest try with fresh project created from spring starter.  I tried with your code and it does create the table in db"},{"owner":{"account_id":2349225,"reputation":26836,"user_id":2058547,"accept_rate":60,"display_name":"Ojonugwa Jude Ochalifu"},"score":0,"creation_date":1666710385,"post_id":73331089,"comment_id":130998584,"body_markdown":"If you are using spring boot 3.+, you&#39;ll encounter this issue.","body":"If you are using spring boot 3.+, you&#39;ll encounter this issue."}],"answers":[{"tags":[],"owner":{"account_id":25690087,"reputation":1360,"user_id":19451633,"display_name":"Andrei Titov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660309582,"creation_date":1660309582,"answer_id":73334675,"question_id":73331089,"body_markdown":"You have String ID in your `Shoe` class, but you&#39;ve created an repository interface of `JpaRepository&lt;Shoe, Integer&gt;` instead of `JpaRepository&lt;Shoe, String&gt;`. So I suggest to define Integer ID in your `Shoe` class to match the repository. \r\n\r\nAlso the problem may be in a package definition - the javadoc suggests to use base package name like &quot;com.SportyShoe&quot;, instead of &quot;com.SportyShoe.*&quot;.  \r\nAlso you may try to use type-safe entity scan like this:\r\n\r\n    @EntityScan(basePackageClasses = Shoe.class)\r\n\r\nor like this if you have multiple entities:\r\n\r\n    @EntityScan(basePackageClasses = {Shoe.class, Lace.class})\r\n    \r\n\r\nAlso try to remove `@EntityScan`, `@ComponentScan` and `@EnableJpaRepositories` - spring-boot tries to find entities and components in and under the package where you have `@SpringBootApplication` annotation by default (and jpa repositories, if you have a dependency on the classpath). These annotation may be used for extra configuration.  \r\nSee information on this [in the reference documentation][1].\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#using.using-the-springbootapplication-annotation","title":"java.lang.IllegalArgumentException: Not a managed type: class com.SportyShoe.Entity.Shoe","body":"<p>You have String ID in your <code>Shoe</code> class, but you've created an repository interface of <code>JpaRepository&lt;Shoe, Integer&gt;</code> instead of <code>JpaRepository&lt;Shoe, String&gt;</code>. So I suggest to define Integer ID in your <code>Shoe</code> class to match the repository.</p>\n<p>Also the problem may be in a package definition - the javadoc suggests to use base package name like &quot;com.SportyShoe&quot;, instead of &quot;com.SportyShoe.*&quot;.<br />\nAlso you may try to use type-safe entity scan like this:</p>\n<pre><code>@EntityScan(basePackageClasses = Shoe.class)\n</code></pre>\n<p>or like this if you have multiple entities:</p>\n<pre><code>@EntityScan(basePackageClasses = {Shoe.class, Lace.class})\n</code></pre>\n<p>Also try to remove <code>@EntityScan</code>, <code>@ComponentScan</code> and <code>@EnableJpaRepositories</code> - spring-boot tries to find entities and components in and under the package where you have <code>@SpringBootApplication</code> annotation by default (and jpa repositories, if you have a dependency on the classpath). These annotation may be used for extra configuration.<br />\nSee information on this <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#using.using-the-springbootapplication-annotation\" rel=\"nofollow noreferrer\">in the reference documentation</a>.</p>\n"},{"tags":[],"owner":{"account_id":25404884,"reputation":97,"user_id":19213760,"display_name":"Salahuddin Shayan"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1660320699,"creation_date":1660320699,"answer_id":73337014,"question_id":73331089,"body_markdown":"The main problem was the version of Spring boot I used.\r\n\r\nWhen I used 2.7.2 instead of 3.0.0(SnapShot) which I originally used it started working.","title":"java.lang.IllegalArgumentException: Not a managed type: class com.SportyShoe.Entity.Shoe","body":"<p>The main problem was the version of Spring boot I used.</p>\n<p>When I used 2.7.2 instead of 3.0.0(SnapShot) which I originally used it started working.</p>\n"},{"comments":[{"owner":{"account_id":12219010,"reputation":125,"user_id":8918555,"accept_rate":100,"display_name":"haihan jin"},"score":1,"creation_date":1674108467,"post_id":74839409,"comment_id":132645482,"body_markdown":"Thanks for this useful tip! It is working after replace package form &quot;javax&quot; to &quot;jakarta&quot;!","body":"Thanks for this useful tip! It is working after replace package form &quot;javax&quot; to &quot;jakarta&quot;!"},{"owner":{"account_id":9478194,"reputation":177,"user_id":7046938,"display_name":"codeskin"},"score":0,"creation_date":1695043911,"post_id":74839409,"comment_id":135967493,"body_markdown":"Perfect information update. For anyone following the official Spring on using Spring Boot Rest - https://spring.io/guides/tutorials/rest/ \nBe aware of the import changes to your model class. This will prevent the managed class exception.","body":"Perfect information update. For anyone following the official Spring on using Spring Boot Rest - <a href=\"https://spring.io/guides/tutorials/rest/\" rel=\"nofollow noreferrer\">spring.io/guides/tutorials/rest</a>  Be aware of the import changes to your model class. This will prevent the managed class exception."}],"tags":[],"owner":{"account_id":454394,"reputation":4041,"user_id":851951,"accept_rate":32,"display_name":"Dani"},"comment_count":2,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1671343449,"creation_date":1671343449,"answer_id":74839409,"question_id":73331089,"body_markdown":"I guess this comment is the key.\r\n\r\n&gt; When I used 2.7.2 instead of 3.0.0(SnapShot) which I originally used\r\n&gt; it started working.\r\n\r\nReading the [documentation][1] we realize the `Spring Boot JPA` module part of the `Spring Boot 3` release turned to work with [Jakarta Persistence API (JPA)][2] rather than with `javax.persistence.api`. Because of this even configuring properly the `Spring JPA` annotations like `@EntityScan` it does not find the entities.\r\n\r\nWhen upgrading `Spring Boot` up to version 3, the `Persistence API` artifact must be also migrated.\r\n\r\nFor more context about this change, it&#39;s well explained in [this][3] other SO thread.\r\n\r\nHope it helps anyone else!\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories\r\n  [2]: https://mvnrepository.com/artifact/jakarta.persistence/jakarta.persistence-api\r\n  [3]: https://stackoverflow.com/a/60024749/851951","title":"java.lang.IllegalArgumentException: Not a managed type: class com.SportyShoe.Entity.Shoe","body":"<p>I guess this comment is the key.</p>\n<blockquote>\n<p>When I used 2.7.2 instead of 3.0.0(SnapShot) which I originally used\nit started working.</p>\n</blockquote>\n<p>Reading the <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories\" rel=\"noreferrer\">documentation</a> we realize the <code>Spring Boot JPA</code> module part of the <code>Spring Boot 3</code> release turned to work with <a href=\"https://mvnrepository.com/artifact/jakarta.persistence/jakarta.persistence-api\" rel=\"noreferrer\">Jakarta Persistence API (JPA)</a> rather than with <code>javax.persistence.api</code>. Because of this even configuring properly the <code>Spring JPA</code> annotations like <code>@EntityScan</code> it does not find the entities.</p>\n<p>When upgrading <code>Spring Boot</code> up to version 3, the <code>Persistence API</code> artifact must be also migrated.</p>\n<p>For more context about this change, it's well explained in <a href=\"https://stackoverflow.com/a/60024749/851951\">this</a> other SO thread.</p>\n<p>Hope it helps anyone else!</p>\n"},{"tags":[],"owner":{"account_id":10475576,"reputation":41,"user_id":8682797,"display_name":"AJAJ"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1694064944,"creation_date":1694064944,"answer_id":77056840,"question_id":73331089,"body_markdown":"My problem was : i was using spring boot 3.0.8 but using javax.* \r\nReplaved with jakarta.persistence.* API&#39;s and worked fine.","title":"java.lang.IllegalArgumentException: Not a managed type: class com.SportyShoe.Entity.Shoe","body":"<p>My problem was : i was using spring boot 3.0.8 but using javax.*\nReplaved with jakarta.persistence.* API's and worked fine.</p>\n"}],"owner":{"account_id":25404884,"reputation":97,"user_id":19213760,"display_name":"Salahuddin Shayan"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14178,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":73337014,"answer_count":4,"score":4,"last_activity_date":1694064944,"creation_date":1660291857,"question_id":73331089,"body_markdown":"I am new to spring and spring boot. I tried to build a project by following \r\nan example I found here : http://www.javaguides.net/2018/09/spring-mvc-using-spring-boot2-jsp-jpa-hibernate5-mysql-example.html.\r\n\r\nHere is my Application:\r\n```\r\npackage com.SportyShoe;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\nimport org.springframework.boot.autoconfigure.domain.EntityScan;\r\nimport org.springframework.context.annotation.ComponentScan;\r\nimport org.springframework.data.jpa.repository.config.EnableJpaRepositories;\r\n\r\n\r\n@ComponentScan(basePackages = &quot;com.SportyShoe&quot;)\r\n@SpringBootApplication\r\n@EntityScan(&quot;com.SportyShoe.*&quot;)\r\n@EnableJpaRepositories\r\npublic class SportyShoeApplication {\r\n\t\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(SportyShoeApplication.class, args);\r\n\t}\r\n\r\n}\r\n\r\n```\r\n\r\nHere is my Entity:\r\n```\r\npackage com.SportyShoe.Entity;\r\n\r\nimport javax.persistence.Column;\r\nimport javax.persistence.Entity;\r\nimport javax.persistence.Id;\r\nimport javax.persistence.Table;\r\n\r\n@Entity\r\n@Table(name=&quot;Shoe&quot;)\r\npublic class Shoe {\r\n\t\r\n\t@Id\r\n\t@Column(name=&quot;id&quot;)\r\n\tprivate String id;\r\n\t\r\n\r\n\t@Column(name=&quot;colour&quot;)\r\n\tprivate String colour;\r\n\t\r\n\t@Column(name=&quot;gender&quot;)\r\n\tprivate String gender;\r\n\t\r\n\t@Column(name=&quot;category&quot;)\r\n\tprivate String category;\r\n\r\n\tpublic String getId() {\r\n\t\treturn id;\r\n\t}\r\n\r\n\tpublic void setId(String id) {\r\n\t\tthis.id = id;\r\n\t}\r\n\r\n\tpublic String getColour() {\r\n\t\treturn colour;\r\n\t}\r\n\r\n\tpublic void setColour(String colour) {\r\n\t\tthis.colour = colour;\r\n\t}\r\n\r\n\tpublic String getGender() {\r\n\t\treturn gender;\r\n\t}\r\n\r\n\tpublic void setGender(String gender) {\r\n\t\tthis.gender = gender;\r\n\t}\r\n\r\n\tpublic String getCategory() {\r\n\t\treturn category;\r\n\t}\r\n\r\n\tpublic void setCategory(String category) {\r\n\t\tthis.category = category;\r\n\t}\r\n\t\r\n\r\n}\r\n```\r\n\r\nHere is my Repository:\r\n```\r\npackage com.SportyShoe.repositories;\r\n\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\nimport org.springframework.stereotype.Repository;\r\n\r\nimport com.SportyShoe.Entity.Shoe;\r\n\r\n\r\n@Repository\r\npublic interface  ShoeRepositories extends JpaRepository&lt;Shoe, Integer&gt;{\r\n\r\n}\r\n```\r\n\r\nHere is my Controller:\r\n```\r\npackage com.SportyShoe.controllers;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.ui.Model;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\n\r\nimport com.SportyShoe.repositories.ShoeRepositories;\r\n\r\n@Controller\r\npublic class ShoeController {\r\n\t\r\n\t@Autowired\r\n\tShoeRepositories shoeRepo;\r\n\t\r\n\t@RequestMapping(&quot;/shoes&quot;)\r\n    public String shoeList(Model model) {\r\n         model.addAttribute(&quot;shoes&quot;, shoeRepo.findAll());\r\n         return &quot;shoes&quot;;\r\n    }\r\n\r\n}\r\n```\r\n\r\nHere is my application.properties:\r\n```\r\nspring.mvc.view.prefix: /WEB-INF/jsp/\r\nspring.mvc.view.suffix: .jsp\r\n\r\nlogging.level.org.springframework=INFO\r\n\r\n################### DataSource Configuration ##########################\r\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\nspring.datasource.url=jdbc:mysql://localhost:3306/Sporty_Shoes\r\nspring.datasource.username=root\r\nspring.datasource.password=MPword@123\r\n\r\n################### Hibernate Configuration ##########################\r\n\r\nspring.jpa.hibernate.ddl-auto=update\r\nspring.jpa.show-sql=true\r\n\r\n``` \r\n\r\nWhen I reached this point in the example, it was written that running the Application will create the table in the database but all I got was an error as mentioned in the title.\r\n\r\nWhat should do now to make it work?  ","title":"java.lang.IllegalArgumentException: Not a managed type: class com.SportyShoe.Entity.Shoe","body":"<p>I am new to spring and spring boot. I tried to build a project by following\nan example I found here : <a href=\"http://www.javaguides.net/2018/09/spring-mvc-using-spring-boot2-jsp-jpa-hibernate5-mysql-example.html\" rel=\"nofollow noreferrer\">http://www.javaguides.net/2018/09/spring-mvc-using-spring-boot2-jsp-jpa-hibernate5-mysql-example.html</a>.</p>\n<p>Here is my Application:</p>\n<pre><code>package com.SportyShoe;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.boot.autoconfigure.domain.EntityScan;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.data.jpa.repository.config.EnableJpaRepositories;\n\n\n@ComponentScan(basePackages = &quot;com.SportyShoe&quot;)\n@SpringBootApplication\n@EntityScan(&quot;com.SportyShoe.*&quot;)\n@EnableJpaRepositories\npublic class SportyShoeApplication {\n    \n\n    public static void main(String[] args) {\n        SpringApplication.run(SportyShoeApplication.class, args);\n    }\n\n}\n\n</code></pre>\n<p>Here is my Entity:</p>\n<pre><code>package com.SportyShoe.Entity;\n\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\nimport javax.persistence.Table;\n\n@Entity\n@Table(name=&quot;Shoe&quot;)\npublic class Shoe {\n    \n    @Id\n    @Column(name=&quot;id&quot;)\n    private String id;\n    \n\n    @Column(name=&quot;colour&quot;)\n    private String colour;\n    \n    @Column(name=&quot;gender&quot;)\n    private String gender;\n    \n    @Column(name=&quot;category&quot;)\n    private String category;\n\n    public String getId() {\n        return id;\n    }\n\n    public void setId(String id) {\n        this.id = id;\n    }\n\n    public String getColour() {\n        return colour;\n    }\n\n    public void setColour(String colour) {\n        this.colour = colour;\n    }\n\n    public String getGender() {\n        return gender;\n    }\n\n    public void setGender(String gender) {\n        this.gender = gender;\n    }\n\n    public String getCategory() {\n        return category;\n    }\n\n    public void setCategory(String category) {\n        this.category = category;\n    }\n    \n\n}\n</code></pre>\n<p>Here is my Repository:</p>\n<pre><code>package com.SportyShoe.repositories;\n\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\n\nimport com.SportyShoe.Entity.Shoe;\n\n\n@Repository\npublic interface  ShoeRepositories extends JpaRepository&lt;Shoe, Integer&gt;{\n\n}\n</code></pre>\n<p>Here is my Controller:</p>\n<pre><code>package com.SportyShoe.controllers;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.RequestMapping;\n\nimport com.SportyShoe.repositories.ShoeRepositories;\n\n@Controller\npublic class ShoeController {\n    \n    @Autowired\n    ShoeRepositories shoeRepo;\n    \n    @RequestMapping(&quot;/shoes&quot;)\n    public String shoeList(Model model) {\n         model.addAttribute(&quot;shoes&quot;, shoeRepo.findAll());\n         return &quot;shoes&quot;;\n    }\n\n}\n</code></pre>\n<p>Here is my application.properties:</p>\n<pre><code>spring.mvc.view.prefix: /WEB-INF/jsp/\nspring.mvc.view.suffix: .jsp\n\nlogging.level.org.springframework=INFO\n\n################### DataSource Configuration ##########################\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\nspring.datasource.url=jdbc:mysql://localhost:3306/Sporty_Shoes\nspring.datasource.username=root\nspring.datasource.password=MPword@123\n\n################### Hibernate Configuration ##########################\n\nspring.jpa.hibernate.ddl-auto=update\nspring.jpa.show-sql=true\n\n</code></pre>\n<p>When I reached this point in the example, it was written that running the Application will create the table in the database but all I got was an error as mentioned in the title.</p>\n<p>What should do now to make it work?</p>\n"},{"tags":["java","spring-boot","spring-security","spring-saml"],"answers":[{"comments":[{"owner":{"account_id":8792043,"reputation":460,"user_id":6571471,"accept_rate":38,"display_name":"manjosh"},"score":0,"creation_date":1694007628,"post_id":77051740,"comment_id":135834684,"body_markdown":"but how can I use this in creating those SAML related beans? In older versions the authenticationManager does not take any parameters.","body":"but how can I use this in creating those SAML related beans? In older versions the authenticationManager does not take any parameters."},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1694008265,"post_id":77051740,"comment_id":135834821,"body_markdown":"one sec, i will change a little bit the answer","body":"one sec, i will change a little bit the answer"},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1694008876,"post_id":77051740,"comment_id":135834980,"body_markdown":"i did it, can you try ?","body":"i did it, can you try ?"},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1694022170,"post_id":77051740,"comment_id":135837902,"body_markdown":"any news, about this approach?","body":"any news, about this approach?"},{"owner":{"account_id":8792043,"reputation":460,"user_id":6571471,"accept_rate":38,"display_name":"manjosh"},"score":0,"creation_date":1694060417,"post_id":77051740,"comment_id":135842175,"body_markdown":"Thank you, I&#39;m testing with your configuration. I&#39;m still refactoring the configurations to work with spring-secuity 6. Will update if there are any issues.","body":"Thank you, I&#39;m testing with your configuration. I&#39;m still refactoring the configurations to work with spring-secuity 6. Will update if there are any issues."},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1694060926,"post_id":77051740,"comment_id":135842215,"body_markdown":"For any questions ping me here","body":"For any questions ping me here"},{"owner":{"account_id":8792043,"reputation":460,"user_id":6571471,"accept_rate":38,"display_name":"manjosh"},"score":0,"creation_date":1694065265,"post_id":77051740,"comment_id":135842586,"body_markdown":"I refactored all the code to spring-security 6. But I see that javax.servlet in SAML MetadataGeneratorFilter is not compatible with jakarta.servelet.","body":"I refactored all the code to spring-security 6. But I see that javax.servlet in SAML MetadataGeneratorFilter is not compatible with jakarta.servelet."},{"owner":{"account_id":8792043,"reputation":460,"user_id":6571471,"accept_rate":38,"display_name":"manjosh"},"score":0,"creation_date":1694067811,"post_id":77051740,"comment_id":135842908,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/255194/discussion-between-manjosh-and-andrei-lisa).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/255194/discussion-between-manjosh-and-andrei-lisa\">continue this discussion in chat</a>."},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1694068294,"post_id":77051740,"comment_id":135842969,"body_markdown":"sure let`s do it","body":"sure let`s do it"}],"tags":[],"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"comment_count":9,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694008869,"creation_date":1694001983,"answer_id":77051740,"question_id":77051043,"body_markdown":"Have you tried to declare an `authenticationManager` `Bean` in security configuration class?\r\n\r\n\r\nSomething like this:\r\n     \r\n      @Autowired\r\n      private  AuthenticationConfiguration authenticationConfiguration; // or constructor injection depends on what you are using\r\n    \r\n          @Bean\r\n          public AuthenticationManager authenticationManager() throws Exception {\r\n            return authenticationConfiguration.getAuthenticationManager();\r\n          }\r\n\r\n**UPDATE**: If you cannot do it with an method param, just use the above provided code.","title":"authenticationManger method not present in spring security 6, Saml Config migration","body":"<p>Have you tried to declare an <code>authenticationManager</code> <code>Bean</code> in security configuration class?</p>\n<p>Something like this:</p>\n<pre><code>  @Autowired\n  private  AuthenticationConfiguration authenticationConfiguration; // or constructor injection depends on what you are using\n\n      @Bean\n      public AuthenticationManager authenticationManager() throws Exception {\n        return authenticationConfiguration.getAuthenticationManager();\n      }\n</code></pre>\n<p><strong>UPDATE</strong>: If you cannot do it with an method param, just use the above provided code.</p>\n"}],"owner":{"account_id":8792043,"reputation":460,"user_id":6571471,"accept_rate":38,"display_name":"manjosh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":316,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694064878,"creation_date":1693995820,"question_id":77051043,"body_markdown":"We are migrating our springboot application to springboot 3.x. In the latest version of springboot, i see the spring-security upgraded to version 6.\r\n\r\nIn this version `WebSecurityConfigurerAdapter` is removed.\r\n\r\nI have a SamlConfiguation class written on spring-boot 2. x. I have to define `SAMLWebSSOHoKProcessingFilter` and `SAMLProcessingFilter` beans.\r\n\r\nThese beans use `authenticationManager()` method from `WebSecurityConfigurerAdapter` class.\r\n\r\nHow do I define them using spring security 6?\r\ni changed it to \r\n\r\n    @Bean\r\n    public AuthenticationManager authenticationManagerBean(AuthenticationConfiguration authConfiguration) throws Exception {\r\n        return authConfiguration.getAuthenticationManager();\r\n    }\r\n\r\nbut when i start the application call any api, i get the error\r\n`10:20:55.995 ERROR org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/cms-service/webapi].[dispatcherServlet].log() @175 - Servlet.service() for servlet [dispatcherServlet] in context with path [/cms-service/webapi] threw exception [Filter execution threw an exception] with root cause\r\njava.lang.AbstractMethodError: Receiver class org.springframework.security.saml.metadata.MetadataGeneratorFilter does not define or inherit an implementation of the resolved method &#39;abstract void doFilter(jakarta.servlet.ServletRequest, jakarta.servlet.ServletResponse, jakarta.servlet.FilterChain)&#39; of interface jakarta.servlet.Filter.\r\n\tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)\r\n\tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)\r\n\tat org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)\r\n\tat org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n`\r\n\r\nhere is my complete `SAMLSecurityConfig`\r\n\r\n    \r\n    @Configuration\r\n    @EnableWebSecurity\r\n    @ComponentScan(basePackageClasses = {SAMLUserDetailsServiceImpl.class, Environment.class, SAMLConfig.class})\r\n    @Order(2)\r\n    public class SAMLSecurityConfig {\r\n\r\n    private static final Logger LOGGER = LoggerFactory.getLogger(SAMLSecurityConfig.class);\r\n\r\n    private static final String LOGIN = &quot;/login&quot;;\r\n\r\n    private final SAMLUserDetailsServiceImpl samlUserDetailsServiceImpl;\r\n\r\n    private final Environment environment;\r\n\r\n    private Timer backgroundTaskTimer;\r\n\r\n    private MultiThreadedHttpConnectionManager multiThreadedHttpConnectionManager;\r\n\r\n    private ApplicationEventPublisher applicationEventPublisher;\r\n    private  AuthenticationConfiguration authenticationConfiguration;\r\n    @Autowired\r\n    public SAMLSecurityConfig(SAMLUserDetailsServiceImpl samlUserDetailsServiceImpl,\r\n                              Environment environment, ApplicationEventPublisher applicationEventPublisher, AuthenticationConfiguration authenticationConfiguration) {\r\n        this.samlUserDetailsServiceImpl = samlUserDetailsServiceImpl;\r\n        this.environment = environment;\r\n        this.applicationEventPublisher = applicationEventPublisher;\r\n        this.authenticationConfiguration = authenticationConfiguration;\r\n    }\r\n    @Autowired\r\n    public  SAMLConfig samlConfig;\r\n\r\n    public SAMLConfig config() {\r\n        samlConfig.setEntity();\r\n        return samlConfig;\r\n    }\r\n    // Initialization of OpenSAML library\r\n    @Bean\r\n    public static SAMLBootstrap samlBootstrap() {\r\n        return new CustomSAMLBootStrap();\r\n    }\r\n\r\n    @PostConstruct\r\n    public void init() {\r\n        this.backgroundTaskTimer = new Timer(true);\r\n        this.multiThreadedHttpConnectionManager = new MultiThreadedHttpConnectionManager();\r\n    }\r\n\r\n    @PreDestroy\r\n    public void destroy() {\r\n        this.backgroundTaskTimer.purge();\r\n        this.backgroundTaskTimer.cancel();\r\n        this.multiThreadedHttpConnectionManager.shutdown();\r\n    }\r\n\r\n    // Initialization of the velocity engine\r\n    @Bean\r\n    public VelocityEngine velocityEngine() {\r\n        VelocityEngine engine = new VelocityEngine();\r\n\r\n        Properties props = new Properties();\r\n        props.put(&quot;runtime.log.logsystem.class&quot;, &quot;org.apache.velocity.runtime.log.SimpleLog4JLogSystem&quot;);\r\n        props.put(&quot;runtime.log.logsystem.log4j.category&quot;, &quot;velocity&quot;);\r\n        props.put(&quot;runtime.log.logsystem.log4j.logger&quot;, &quot;velocity&quot;);\r\n        props.put(&quot;UTF-8&quot;, &quot;UTF-8&quot;);\r\n        props.put(&quot;resource.loader&quot;, &quot;classpath&quot;);\r\n        props.put(&quot;classpath.resource.loader.class&quot;, &quot;org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader&quot;);\r\n        engine.init(props);\r\n        return engine;\r\n    }\r\n\r\n    // XML parser pool needed for OpenSAML parsing\r\n    @Bean(initMethod = &quot;initialize&quot;)\r\n    public StaticBasicParserPool parserPool() {\r\n        return new StaticBasicParserPool();\r\n    }\r\n\r\n    @Bean(name = &quot;parserPoolHolder&quot;)\r\n    public ParserPoolHolder parserPoolHolder() {\r\n        return new ParserPoolHolder();\r\n    }\r\n\r\n    // Bindings, encoders and decoders used for creating and parsing messages\r\n    @Bean\r\n    public HttpClient httpClient() {\r\n        return new HttpClient(this.multiThreadedHttpConnectionManager);\r\n    }\r\n\r\n    // SAML Authentication Provider responsible for validating of received SAML\r\n    // messages\r\n    @Bean\r\n    public SAMLAuthenticationProvider samlAuthenticationProvider() {\r\n        SAMLAuthenticationProvider samlAuthenticationProvider = new SAMLAuthenticationProvider();\r\n        samlAuthenticationProvider.setUserDetails(samlUserDetailsServiceImpl);\r\n        samlAuthenticationProvider.setForcePrincipalAsString(false);\r\n        return samlAuthenticationProvider;\r\n    }\r\n\r\n    // Load Balancer Context Provider\r\n    @Bean\r\n    public SAMLContextProviderLB contextProvider() {\r\n        SAMLContextProviderLB samlContextProviderLB = new SAMLContextProviderLB();\r\n        samlContextProviderLB.setServerName(config().getSp().getServerName());\r\n        samlContextProviderLB.setIncludeServerPortInRequestURL(false);\r\n        samlContextProviderLB.setServerPort(config().getLb().getServerPort());\r\n        samlContextProviderLB.setScheme(config().getLb().getScheme());\r\n        samlContextProviderLB.setContextPath(&quot;/cms-service/webapi&quot;);\r\n        return samlContextProviderLB;\r\n    }\r\n\r\n    // Logger for SAML messages and events\r\n    @Bean\r\n    public SAMLDefaultLogger samlLogger() {\r\n        return new SAMLDefaultLogger();\r\n    }\r\n\r\n    // SAML 2.0 WebSSO Assertion Consumer\r\n    @Bean\r\n    public WebSSOProfileConsumer webSSOprofileConsumer() {\r\n        return new WebSSOProfileConsumerImpl();\r\n    }\r\n\r\n    // SAML 2.0 WebSSO Assertion Consumer\r\n    @Bean\r\n    public WebSSOProfileConsumer hokWebSSOprofileConsumer() {\r\n        WebSSOProfileConsumerImpl webSSOProfileConsumer = new WebSSOProfileConsumerImpl();\r\n        webSSOProfileConsumer.setResponseSkew(180);\r\n        webSSOProfileConsumer.setMaxAuthenticationAge(180);\r\n        return webSSOProfileConsumer;\r\n    }\r\n\r\n    // SAML 2.0 Holder-of-Key WebSSO Assertion Consumer\r\n    @Bean\r\n    public WebSSOProfileConsumerHoKImpl hokWebSSOAssertionConsumer() {\r\n        return new WebSSOProfileConsumerHoKImpl();\r\n    }\r\n\r\n    // SAML 2.0 Web SSO profile\r\n    @Bean\r\n    public WebSSOProfile webSSOprofile() {\r\n        return new WebSSOProfileImpl();\r\n    }\r\n\r\n    // SAML 2.0 Holder-of-Key Web SSO profile\r\n    @Bean\r\n    public WebSSOProfileConsumerHoKImpl hokWebSSOProfile() {\r\n        return new WebSSOProfileConsumerHoKImpl();\r\n    }\r\n\r\n    // SAML 2.0 ECP profile\r\n    @Bean\r\n    public WebSSOProfileECPImpl ecpProfile() {\r\n        return new WebSSOProfileECPImpl();\r\n    }\r\n\r\n    @Bean\r\n    public SingleLogoutProfile logoutProfile() {\r\n        return new SingleLogoutProfileImpl();\r\n    }\r\n\r\n    /*\r\n     * Central storage of cryptographic keys\r\n     *\r\n     * If your project does not require any keys you can replace the code below with:\r\n     *    return new EmptyKeyManager();\r\n     */\r\n    @Bean\r\n    public KeyManager keyManager() {\r\n        KeyStore keyStore = null;\r\n        try (FileInputStream fileInputStream = new FileInputStream(config().getKeyStore().getResource().getFile())) {\r\n            keyStore = KeyStore.getInstance(&quot;JKS&quot;);\r\n            keyStore.load(fileInputStream, config().getKeyStore().getPass().toCharArray());\r\n        } catch (IOException | CertificateException | NoSuchAlgorithmException | KeyStoreException e) {\r\n            LOGGER.debug(&quot;Error reading keystore file&quot;, e);\r\n        }\r\n\r\n        Map&lt;String, String&gt; passwords = new HashMap&lt;&gt;();\r\n        passwords.put(config().getKeyStore().getAlias(), config().getKeyStore().getPass());\r\n\r\n        assert keyStore != null;\r\n        return new JKSKeyManager(keyStore, passwords, config().getKeyStore().getAlias());\r\n    }\r\n\r\n\r\n    @Bean\r\n    public WebSSOProfileOptions defaultWebSSOProfileOptions() {\r\n        WebSSOProfileOptions webSSOProfileOptions = new WebSSOProfileOptions();\r\n        webSSOProfileOptions.setIncludeScoping(false);\r\n        return webSSOProfileOptions;\r\n    }\r\n\r\n    // Entry point to initialize authentication, default values taken from\r\n    // properties file\r\n    @Bean\r\n    public SAMLEntryPoint samlEntryPoint() {\r\n        SAMLEntryPoint samlEntryPoint = new SAMLEntryPoint();\r\n        samlEntryPoint.setWebSSOprofile(webSSOprofile());\r\n        samlEntryPoint.setDefaultProfileOptions(defaultWebSSOProfileOptions());\r\n        httpClient().getState().clear();\r\n        return samlEntryPoint;\r\n    }\r\n\r\n    // Setup advanced info about metadata\r\n    @Bean\r\n    public ExtendedMetadata extendedMetadata() {\r\n        ExtendedMetadata extendedMetadata = new ExtendedMetadata();\r\n        extendedMetadata.setIdpDiscoveryEnabled(true);\r\n        extendedMetadata.setSignMetadata(false);\r\n        extendedMetadata.setEcpEnabled(true);\r\n        extendedMetadata.setSslHostnameVerification(ALLOW_ALL.toString());\r\n        return extendedMetadata;\r\n    }\r\n\r\n    // Filter automatically generates default SP metadata\r\n    @Bean\r\n    public MetadataGenerator metadataGenerator() {\r\n        MetadataGenerator metadataGenerator = new MetadataGenerator();\r\n        metadataGenerator.setEntityBaseURL(config().getSp().getEntityBaseURL());\r\n        metadataGenerator.setEntityId(config().getSp().getEntityId());\r\n        metadataGenerator.setExtendedMetadata(extendedMetadata());\r\n        metadataGenerator.setIncludeDiscoveryExtension(true);\r\n        metadataGenerator.setKeyManager(keyManager());\r\n        return metadataGenerator;\r\n    }\r\n\r\n    // The filter is waiting for connections on URL suffixed with filterSuffix\r\n    // and presents SP metadata there\r\n    @Bean\r\n    public MetadataDisplayFilter metadataDisplayFilter() {\r\n        return new MetadataDisplayFilter();\r\n    }\r\n\r\n    // Handler deciding where to redirect user after successful login\r\n    @Bean\r\n    public CustomAuthenticationSuccessHandler successRedirectHandler() {\r\n        CustomAuthenticationSuccessHandler successRedirectHandler =\r\n                new CustomAuthenticationSuccessHandler();\r\n        successRedirectHandler.setDefaultTargetUrl(config().getSp().getEntityBaseURL());\r\n        return successRedirectHandler;\r\n    }\r\n\r\n    // Handler deciding where to redirect user after failed login\r\n    @Bean\r\n    public SimpleUrlAuthenticationFailureHandler authenticationFailureHandler() {\r\n        SimpleUrlAuthenticationFailureHandler failureHandler =\r\n                new CustomAuthenticationFailureHandler();\r\n        failureHandler.setUseForward(false);\r\n        failureHandler.setDefaultFailureUrl(config().getSp().getEntityBaseURL());\r\n        return failureHandler;\r\n    }\r\n\r\n    @Bean\r\n    public SAMLWebSSOHoKProcessingFilter samlWebSSOHoKProcessingFilter() throws Exception {\r\n        SAMLWebSSOHoKProcessingFilter samlWebSSOHoKProcessingFilter = new SAMLWebSSOHoKProcessingFilter();\r\n        samlWebSSOHoKProcessingFilter.setAuthenticationSuccessHandler(successRedirectHandler());\r\n        samlWebSSOHoKProcessingFilter.setAuthenticationManager(authenticationManager());\r\n        samlWebSSOHoKProcessingFilter.setAuthenticationFailureHandler(authenticationFailureHandler());\r\n        return samlWebSSOHoKProcessingFilter;\r\n    }\r\n\r\n    // Processing filter for WebSSO profile messages\r\n    @Bean\r\n    public SAMLProcessingFilter samlWebSSOProcessingFilter() throws Exception {\r\n        SAMLProcessingFilter samlWebSSOProcessingFilter = new SAMLProcessingFilter();\r\n        samlWebSSOProcessingFilter.setAuthenticationManager(authenticationManager());\r\n        samlWebSSOProcessingFilter.setAuthenticationSuccessHandler(successRedirectHandler());\r\n        samlWebSSOProcessingFilter.setAuthenticationFailureHandler(authenticationFailureHandler());\r\n        httpClient().getState().clear();\r\n        return samlWebSSOProcessingFilter;\r\n    }\r\n\r\n    @Bean\r\n    public MetadataGeneratorFilter metadataGeneratorFilter() {\r\n        return new MetadataGeneratorFilter(metadataGenerator());\r\n    }\r\n\r\n    // Handler for successful logout\r\n    @Bean\r\n    public SimpleUrlLogoutSuccessHandler successLogoutHandler() {\r\n        SimpleUrlLogoutSuccessHandler successLogoutHandler = new CustomSimpleUrlLogoutSuccessHandler();\r\n        successLogoutHandler.setDefaultTargetUrl(config().getSp().getEntityBaseURL());\r\n        return successLogoutHandler;\r\n    }\r\n\r\n    // Logout handler terminating local session\r\n    @Bean\r\n    public SecurityContextLogoutHandler logoutHandler() {\r\n        SecurityContextLogoutHandler logoutHandler =\r\n                new SecurityContextLogoutHandler();\r\n        logoutHandler.setInvalidateHttpSession(true);\r\n        logoutHandler.setClearAuthentication(true);\r\n        return logoutHandler;\r\n    }\r\n\r\n    // Filter processing incoming logout messages\r\n    // First argument determines URL user will be redirected to after successful\r\n    // global logout\r\n    @Bean\r\n    public SAMLLogoutProcessingFilter samlLogoutProcessingFilter() {\r\n        return new SAMLLogoutProcessingFilter(successLogoutHandler(),\r\n                logoutHandler());\r\n    }\r\n\r\n    // Overrides default logout processing filter with the one processing SAML\r\n    // messages\r\n    @Bean\r\n    public SAMLLogoutFilter samlLogoutFilter() {\r\n        return new SAMLLogoutFilter(successLogoutHandler(),\r\n                new LogoutHandler[]{logoutHandler()},\r\n                new LogoutHandler[]{logoutHandler()});\r\n    }\r\n\r\n    // Bindings\r\n    private ArtifactResolutionProfile artifactResolutionProfile() {\r\n        final ArtifactResolutionProfileImpl artifactResolutionProfile =\r\n                new ArtifactResolutionProfileImpl(httpClient());\r\n        artifactResolutionProfile.setProcessor(new SAMLProcessorImpl(soapBinding()));\r\n        return artifactResolutionProfile;\r\n    }\r\n\r\n    @Bean\r\n    public HTTPArtifactBinding artifactBinding(ParserPool parserPool, VelocityEngine velocityEngine) {\r\n        return new HTTPArtifactBinding(parserPool, velocityEngine, artifactResolutionProfile());\r\n    }\r\n\r\n    @Bean\r\n    public HTTPSOAP11Binding soapBinding() {\r\n        return new HTTPSOAP11Binding(parserPool());\r\n    }\r\n\r\n    @Bean\r\n    public HTTPPostBinding httpPostBinding() {\r\n        return new HTTPPostBinding(parserPool(), velocityEngine());\r\n    }\r\n\r\n    @Bean\r\n    public HTTPRedirectDeflateBinding httpRedirectDeflateBinding() {\r\n        return new HTTPRedirectDeflateBinding(parserPool());\r\n    }\r\n\r\n    @Bean\r\n    public HTTPSOAP11Binding httpSOAP11Binding() {\r\n        return new HTTPSOAP11Binding(parserPool());\r\n    }\r\n\r\n    @Bean\r\n    public HTTPPAOS11Binding httpPAOS11Binding() {\r\n        return new HTTPPAOS11Binding(parserPool());\r\n    }\r\n\r\n    @Bean\r\n    public HttpSessionEventPublisher httpSessionEventPublisher() {\r\n        return new HttpSessionEventPublisher();\r\n    }\r\n\r\n    // Processor\r\n    @Bean\r\n    public SAMLProcessorImpl processor() {\r\n        Collection&lt;SAMLBinding&gt; bindings = new ArrayList&lt;&gt;();\r\n        bindings.add(httpRedirectDeflateBinding());\r\n        bindings.add(httpPostBinding());\r\n        bindings.add(artifactBinding(parserPool(), velocityEngine()));\r\n        bindings.add(httpSOAP11Binding());\r\n        bindings.add(httpPAOS11Binding());\r\n        return new SAMLProcessorImpl(bindings);\r\n    }\r\n\r\n    /**\r\n     * Define the security filter chain in order to support SSO Auth by using SAML 2.0\r\n     *\r\n     * @return Filter chain proxy\r\n     */\r\n    @Bean\r\n    public FilterChainProxy samlFilter() throws Exception {\r\n        List&lt;SecurityFilterChain&gt; chains = new ArrayList&lt;&gt;();\r\n        chains.add(new DefaultSecurityFilterChain(new AntPathRequestMatcher(&quot;/saml/login/**&quot;),\r\n                samlEntryPoint()));\r\n        chains.add(new DefaultSecurityFilterChain(new AntPathRequestMatcher(&quot;/saml/logout/**&quot;),\r\n                samlLogoutFilter()));\r\n        chains.add(new DefaultSecurityFilterChain(new AntPathRequestMatcher(&quot;/saml/metadata/**&quot;),\r\n                metadataDisplayFilter()));\r\n        chains.add(new DefaultSecurityFilterChain(new AntPathRequestMatcher(&quot;/saml/SSO/**&quot;),\r\n                samlWebSSOProcessingFilter()));\r\n        chains.add(new DefaultSecurityFilterChain(new AntPathRequestMatcher(&quot;/saml/SSOHoK/**&quot;),\r\n                samlWebSSOHoKProcessingFilter()));\r\n        chains.add(new DefaultSecurityFilterChain(new AntPathRequestMatcher(&quot;/saml/SingleLogout/**&quot;),\r\n                samlLogoutProcessingFilter()));\r\n        return new FilterChainProxy(chains);\r\n    }\r\n\r\n    /**\r\n     * Returns the authentication manager currently used by Spring.\r\n     * It represents a bean definition with the aim allow wiring from\r\n     * other classes performing the Inversion of Control (IoC).\r\n     *\r\n     */\r\n    @Bean\r\n\r\n    public AuthenticationManager authenticationManagerBean(AuthenticationConfiguration authConfiguration) throws Exception {\r\n        return authConfiguration.getAuthenticationManager();\r\n    }\r\n    @Bean\r\n    public AuthenticationManager authenticationManager() throws Exception {\r\n        return authenticationConfiguration.getAuthenticationManager();\r\n    }\r\n\r\n    /**\r\n     * Defines the web based security configuration.\r\n     *\r\n     * @param http It allows configuring web based security for specific http requests.\r\n     *\r\n     */\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        http.httpBasic(httpBasic-&gt; httpBasic.authenticationEntryPoint(samlEntryPoint()));\r\n        /*http\r\n                .httpBasic()\r\n                .authenticationEntryPoint(samlEntryPoint());*/\r\n        /*http\r\n                .csrf()\r\n                .csrfTokenRepository(CookieCsrfTokenRepository.withHttpOnlyFalse())\r\n                .ignoringAntMatchers(&quot;/saml/**&quot;);*/\r\n        http.csrf(csrf-&gt;csrf.csrfTokenRepository(CookieCsrfTokenRepository.withHttpOnlyFalse())\r\n                .ignoringRequestMatchers(&quot;/saml/**&quot;));\r\n\r\n        http\r\n                .addFilterBefore(metadataGeneratorFilter(), ChannelProcessingFilter.class)\r\n                .addFilterAfter(samlFilter(), BasicAuthenticationFilter.class);\r\n        /*http\r\n                .logout()\r\n                .logoutRequestMatcher(new AntPathRequestMatcher(&quot;/saml/logout&quot;))\r\n                .deleteCookies(&quot;JSESSIONID&quot;)\r\n                .logoutSuccessUrl(config().getSp().getEntityBaseURL() + LOGIN);*/\r\n        http.logout(httpSecurityLogoutConfigurer -&gt; httpSecurityLogoutConfigurer.logoutRequestMatcher(new AntPathRequestMatcher(&quot;/saml/logout&quot;))\r\n                .deleteCookies(&quot;JSESSIONID&quot;)\r\n                .logoutSuccessUrl(config().getSp().getEntityBaseURL() + LOGIN));\r\n        /*http\r\n                .headers()\r\n                .frameOptions()\r\n                .disable();*/\r\n        http.headers(headers -&gt; headers.frameOptions(HeadersConfigurer.FrameOptionsConfig::disable));\r\n        /*http\r\n                .sessionManagement()\r\n                .sessionAuthenticationErrorUrl(config().getSp().getEntityBaseURL() + LOGIN)\r\n                .invalidSessionUrl(config().getSp().getEntityBaseURL() + LOGIN);*/\r\n\r\n        http.sessionManagement(sessionManagement -&gt; sessionManagement.sessionAuthenticationErrorUrl(config().getSp().getEntityBaseURL() + LOGIN)\r\n                .invalidSessionUrl(config().getSp().getEntityBaseURL() + LOGIN));\r\n        /*http\r\n                .sessionManagement()\r\n                .maximumSessions(1)\r\n                .expiredUrl(config().getSp().getEntityBaseURL() + LOGIN);*/\r\n        http.sessionManagement(sessionManagement -&gt; sessionManagement.maximumSessions(1)\r\n                .expiredUrl(config().getSp().getEntityBaseURL() + LOGIN));\r\n        /*http\r\n                .sessionManagement()\r\n                .sessionFixation()\r\n                .newSession();*/\r\n        http.sessionManagement(sessionManagement -&gt;\r\n                sessionManagement.sessionFixation().newSession());\r\n\r\n        /*http\r\n                .sessionManagement()\r\n                .sessionCreationPolicy(SessionCreationPolicy.NEVER);*/\r\n        http.sessionManagement(sessionManagement -&gt;sessionManagement.sessionCreationPolicy(SessionCreationPolicy.NEVER));\r\n\r\n                permitEndpoints(http);\r\n        http.authenticationProvider(samlAuthenticationProvider());\r\n        return http.build();\r\n    }\r\n\r\n    /**\r\n     * Sets a custom authentication provider.\r\n     *\r\n     * @param auth SecurityBuilder used to create an AuthenticationManager.\r\n     */\r\n    /*@Override\r\n    protected void configure(AuthenticationManagerBuilder auth) {\r\n        auth.authenticationProvider(samlAuthenticationProvider());\r\n    }*/\r\n\r\n\r\n    private void permitEndpoints(HttpSecurity http) throws Exception {\r\n        if (isSamlDisabled()) {\r\n            http\r\n                    .authorizeHttpRequests(authorizeHttpRequests -&gt; authorizeHttpRequests.requestMatchers(&quot;/**&quot;).permitAll()\r\n                            .anyRequest().authenticated());\r\n                   // .requestMatchers(&quot;/**&quot;).permitAll()\r\n                    //.anyRequest().authenticated();\r\n        } else {\r\n            http\r\n                    .authorizeHttpRequests(authorizeHttpRequests -&gt;\r\n                            authorizeHttpRequests.requestMatchers(&quot;/saml/**&quot;).permitAll()\r\n                                    .requestMatchers(&quot;/error&quot;).permitAll().anyRequest().permitAll());\r\n            /*\r\n                    .requestMatchers(&quot;/saml/**&quot;).permitAll()\r\n                    .requestMatchers(&quot;/error&quot;).permitAll()\r\n                    .anyRequest().permitAll();*/\r\n        }\r\n    }\r\n\r\n    private boolean isSamlDisabled() {\r\n        return Arrays.stream(environment.getActiveProfiles()).anyMatch(\r\n                env -&gt; (env.equalsIgnoreCase(&quot;samlDisabled&quot;)));\r\n    }\r\n\r\n    public class CustomAuthenticationSuccessHandler extends SavedRequestAwareAuthenticationSuccessHandler {\r\n\r\n        @Override\r\n        public void onAuthenticationSuccess(HttpServletRequest request,\r\n                                            HttpServletResponse response,\r\n                                            Authentication authentication) throws IOException, ServletException {\r\n            logger.debug(&quot;in onAuthenticationSuccess&quot;);\r\n            Cookie[] cookies = request.getCookies();\r\n            if(cookies != null) {\r\n                for (Cookie cookie : cookies) {\r\n                    if (cookie.getName().equals(&quot;XSRF-TOKEN&quot;)) {\r\n                        cookie.setValue(&quot;&quot;);\r\n                        cookie.setMaxAge(0);\r\n                        cookie.setPath(&quot;/&quot;);\r\n                        response.addCookie(cookie);\r\n                    }\r\n                }\r\n            }\r\n            if(config().getSp().getEntityBaseURL().equalsIgnoreCase(this.getDefaultTargetUrl())) {\r\n                URLBuilder builder = new URLBuilder(request.getRequestURL().toString());\r\n                builder.setPath(&quot;/&quot;);\r\n                builder.setFragment(&quot;/login?SSO=&quot;+ UserPolicy.AUTH_TYPE_SAML);\r\n                builder.setPort(CmsUtil.getWebServerPort());\r\n                this.setDefaultTargetUrl(builder.buildURL());\r\n            }\r\n            request.changeSessionId();\r\n            super.onAuthenticationSuccess(request, response, authentication);\r\n        }\r\n    }\r\n\r\n    public class CustomAuthenticationFailureHandler extends SimpleUrlAuthenticationFailureHandler {\r\n        protected String defaultFailureUrl = null;\r\n\r\n        public String getDefaultFailureUrl() {\r\n            return defaultFailureUrl;\r\n        }\r\n        @Override\r\n        public void setDefaultFailureUrl(String defaultFailureUrl) {\r\n            super.setDefaultFailureUrl(defaultFailureUrl);\r\n            this.defaultFailureUrl = defaultFailureUrl;\r\n        }\r\n        @Override\r\n        public void onAuthenticationFailure(HttpServletRequest request, HttpServletResponse response,\r\n                                            AuthenticationException exception) throws IOException, ServletException {\r\n            logger.debug(&quot;in onAuthenticationFailure&quot;);\r\n            if(config().getSp().getEntityBaseURL().equalsIgnoreCase(this.getDefaultFailureUrl())) {\r\n                URLBuilder builder = new URLBuilder(request.getRequestURL().toString());\r\n                builder.setPath(&quot;/&quot;);\r\n                builder.setFragment(&quot;/login?SSO=&quot;+ UserPolicy.AUTH_TYPE_SAML);\r\n                builder.setPort(CmsUtil.getWebServerPort());\r\n                this.setDefaultFailureUrl(builder.buildURL());\r\n            }\r\n            super.onAuthenticationFailure(request, response, exception);\r\n        }\r\n    }\r\n\r\n    public class CustomSimpleUrlLogoutSuccessHandler extends SimpleUrlLogoutSuccessHandler {\r\n        @Override\r\n        public void onLogoutSuccess(HttpServletRequest request, HttpServletResponse response,\r\n                                    Authentication authentication) throws IOException, ServletException {\r\n            if(config().getSp().getEntityBaseURL().equalsIgnoreCase(this.getDefaultTargetUrl())) {\r\n                URLBuilder builder = new URLBuilder(request.getRequestURL().toString());\r\n                builder.setPath(&quot;/&quot;);\r\n                builder.setFragment(&quot;/login&quot;);\r\n                builder.setPort(CmsUtil.getWebServerPort());\r\n                this.setDefaultTargetUrl(builder.buildURL());\r\n            }\r\n            super.onLogoutSuccess(request, response, authentication);\r\n        }\r\n    }\r\n\r\n\r\n    @Bean\r\n    @Qualifier(&quot;idp-keycloak&quot;)\r\n    public ExtendedMetadataDelegate keycloakExtendedMetadataProvider(Environment env)\r\n            throws MetadataProviderException {\r\n        String idpKeycloakMetadataURL = env.getRequiredProperty(&quot;keycloak.auth-server-url&quot;) + &quot;/protocol/saml/descriptor&quot;;\r\n        HTTPMetadataProvider httpMetadataProvider = new HTTPMetadataProvider(\r\n                this.backgroundTaskTimer, httpClient(), idpKeycloakMetadataURL);\r\n        httpMetadataProvider.setParserPool(parserPool());\r\n        ExtendedMetadataDelegate extendedMetadataDelegate =\r\n                new ExtendedMetadataDelegate(httpMetadataProvider, extendedMetadata());\r\n        extendedMetadataDelegate.setMetadataTrustCheck(true);\r\n        extendedMetadataDelegate.setMetadataRequireSignature(false);\r\n        backgroundTaskTimer.purge();\r\n        return extendedMetadataDelegate;\r\n    }\r\n    @Bean\r\n    @Qualifier(&quot;metadata&quot;)\r\n    public CachingMetadataManager metadata(List&lt;MetadataProvider&gt; providers) throws MetadataProviderException {\r\n        providers.remove(0);\r\n        return new CachingMetadataManager(providers);\r\n    }\r\n    }\r\n\r\nplease advise.","title":"authenticationManger method not present in spring security 6, Saml Config migration","body":"<p>We are migrating our springboot application to springboot 3.x. In the latest version of springboot, i see the spring-security upgraded to version 6.</p>\n<p>In this version <code>WebSecurityConfigurerAdapter</code> is removed.</p>\n<p>I have a SamlConfiguation class written on spring-boot 2. x. I have to define <code>SAMLWebSSOHoKProcessingFilter</code> and <code>SAMLProcessingFilter</code> beans.</p>\n<p>These beans use <code>authenticationManager()</code> method from <code>WebSecurityConfigurerAdapter</code> class.</p>\n<p>How do I define them using spring security 6?\ni changed it to</p>\n<pre><code>@Bean\npublic AuthenticationManager authenticationManagerBean(AuthenticationConfiguration authConfiguration) throws Exception {\n    return authConfiguration.getAuthenticationManager();\n}\n</code></pre>\n<p>but when i start the application call any api, i get the error\n<code>10:20:55.995 ERROR org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/cms-service/webapi].[dispatcherServlet].log() @175 - Servlet.service() for servlet [dispatcherServlet] in context with path [/cms-service/webapi] threw exception [Filter execution threw an exception] with root cause java.lang.AbstractMethodError: Receiver class org.springframework.security.saml.metadata.MetadataGeneratorFilter does not define or inherit an implementation of the resolved method 'abstract void doFilter(jakarta.servlet.ServletRequest, jakarta.servlet.ServletResponse, jakarta.servlet.FilterChain)' of interface jakarta.servlet.Filter. at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240) at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227) at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137) at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) </code></p>\n<p>here is my complete <code>SAMLSecurityConfig</code></p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@ComponentScan(basePackageClasses = {SAMLUserDetailsServiceImpl.class, Environment.class, SAMLConfig.class})\n@Order(2)\npublic class SAMLSecurityConfig {\n\nprivate static final Logger LOGGER = LoggerFactory.getLogger(SAMLSecurityConfig.class);\n\nprivate static final String LOGIN = &quot;/login&quot;;\n\nprivate final SAMLUserDetailsServiceImpl samlUserDetailsServiceImpl;\n\nprivate final Environment environment;\n\nprivate Timer backgroundTaskTimer;\n\nprivate MultiThreadedHttpConnectionManager multiThreadedHttpConnectionManager;\n\nprivate ApplicationEventPublisher applicationEventPublisher;\nprivate  AuthenticationConfiguration authenticationConfiguration;\n@Autowired\npublic SAMLSecurityConfig(SAMLUserDetailsServiceImpl samlUserDetailsServiceImpl,\n                          Environment environment, ApplicationEventPublisher applicationEventPublisher, AuthenticationConfiguration authenticationConfiguration) {\n    this.samlUserDetailsServiceImpl = samlUserDetailsServiceImpl;\n    this.environment = environment;\n    this.applicationEventPublisher = applicationEventPublisher;\n    this.authenticationConfiguration = authenticationConfiguration;\n}\n@Autowired\npublic  SAMLConfig samlConfig;\n\npublic SAMLConfig config() {\n    samlConfig.setEntity();\n    return samlConfig;\n}\n// Initialization of OpenSAML library\n@Bean\npublic static SAMLBootstrap samlBootstrap() {\n    return new CustomSAMLBootStrap();\n}\n\n@PostConstruct\npublic void init() {\n    this.backgroundTaskTimer = new Timer(true);\n    this.multiThreadedHttpConnectionManager = new MultiThreadedHttpConnectionManager();\n}\n\n@PreDestroy\npublic void destroy() {\n    this.backgroundTaskTimer.purge();\n    this.backgroundTaskTimer.cancel();\n    this.multiThreadedHttpConnectionManager.shutdown();\n}\n\n// Initialization of the velocity engine\n@Bean\npublic VelocityEngine velocityEngine() {\n    VelocityEngine engine = new VelocityEngine();\n\n    Properties props = new Properties();\n    props.put(&quot;runtime.log.logsystem.class&quot;, &quot;org.apache.velocity.runtime.log.SimpleLog4JLogSystem&quot;);\n    props.put(&quot;runtime.log.logsystem.log4j.category&quot;, &quot;velocity&quot;);\n    props.put(&quot;runtime.log.logsystem.log4j.logger&quot;, &quot;velocity&quot;);\n    props.put(&quot;UTF-8&quot;, &quot;UTF-8&quot;);\n    props.put(&quot;resource.loader&quot;, &quot;classpath&quot;);\n    props.put(&quot;classpath.resource.loader.class&quot;, &quot;org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader&quot;);\n    engine.init(props);\n    return engine;\n}\n\n// XML parser pool needed for OpenSAML parsing\n@Bean(initMethod = &quot;initialize&quot;)\npublic StaticBasicParserPool parserPool() {\n    return new StaticBasicParserPool();\n}\n\n@Bean(name = &quot;parserPoolHolder&quot;)\npublic ParserPoolHolder parserPoolHolder() {\n    return new ParserPoolHolder();\n}\n\n// Bindings, encoders and decoders used for creating and parsing messages\n@Bean\npublic HttpClient httpClient() {\n    return new HttpClient(this.multiThreadedHttpConnectionManager);\n}\n\n// SAML Authentication Provider responsible for validating of received SAML\n// messages\n@Bean\npublic SAMLAuthenticationProvider samlAuthenticationProvider() {\n    SAMLAuthenticationProvider samlAuthenticationProvider = new SAMLAuthenticationProvider();\n    samlAuthenticationProvider.setUserDetails(samlUserDetailsServiceImpl);\n    samlAuthenticationProvider.setForcePrincipalAsString(false);\n    return samlAuthenticationProvider;\n}\n\n// Load Balancer Context Provider\n@Bean\npublic SAMLContextProviderLB contextProvider() {\n    SAMLContextProviderLB samlContextProviderLB = new SAMLContextProviderLB();\n    samlContextProviderLB.setServerName(config().getSp().getServerName());\n    samlContextProviderLB.setIncludeServerPortInRequestURL(false);\n    samlContextProviderLB.setServerPort(config().getLb().getServerPort());\n    samlContextProviderLB.setScheme(config().getLb().getScheme());\n    samlContextProviderLB.setContextPath(&quot;/cms-service/webapi&quot;);\n    return samlContextProviderLB;\n}\n\n// Logger for SAML messages and events\n@Bean\npublic SAMLDefaultLogger samlLogger() {\n    return new SAMLDefaultLogger();\n}\n\n// SAML 2.0 WebSSO Assertion Consumer\n@Bean\npublic WebSSOProfileConsumer webSSOprofileConsumer() {\n    return new WebSSOProfileConsumerImpl();\n}\n\n// SAML 2.0 WebSSO Assertion Consumer\n@Bean\npublic WebSSOProfileConsumer hokWebSSOprofileConsumer() {\n    WebSSOProfileConsumerImpl webSSOProfileConsumer = new WebSSOProfileConsumerImpl();\n    webSSOProfileConsumer.setResponseSkew(180);\n    webSSOProfileConsumer.setMaxAuthenticationAge(180);\n    return webSSOProfileConsumer;\n}\n\n// SAML 2.0 Holder-of-Key WebSSO Assertion Consumer\n@Bean\npublic WebSSOProfileConsumerHoKImpl hokWebSSOAssertionConsumer() {\n    return new WebSSOProfileConsumerHoKImpl();\n}\n\n// SAML 2.0 Web SSO profile\n@Bean\npublic WebSSOProfile webSSOprofile() {\n    return new WebSSOProfileImpl();\n}\n\n// SAML 2.0 Holder-of-Key Web SSO profile\n@Bean\npublic WebSSOProfileConsumerHoKImpl hokWebSSOProfile() {\n    return new WebSSOProfileConsumerHoKImpl();\n}\n\n// SAML 2.0 ECP profile\n@Bean\npublic WebSSOProfileECPImpl ecpProfile() {\n    return new WebSSOProfileECPImpl();\n}\n\n@Bean\npublic SingleLogoutProfile logoutProfile() {\n    return new SingleLogoutProfileImpl();\n}\n\n/*\n * Central storage of cryptographic keys\n *\n * If your project does not require any keys you can replace the code below with:\n *    return new EmptyKeyManager();\n */\n@Bean\npublic KeyManager keyManager() {\n    KeyStore keyStore = null;\n    try (FileInputStream fileInputStream = new FileInputStream(config().getKeyStore().getResource().getFile())) {\n        keyStore = KeyStore.getInstance(&quot;JKS&quot;);\n        keyStore.load(fileInputStream, config().getKeyStore().getPass().toCharArray());\n    } catch (IOException | CertificateException | NoSuchAlgorithmException | KeyStoreException e) {\n        LOGGER.debug(&quot;Error reading keystore file&quot;, e);\n    }\n\n    Map&lt;String, String&gt; passwords = new HashMap&lt;&gt;();\n    passwords.put(config().getKeyStore().getAlias(), config().getKeyStore().getPass());\n\n    assert keyStore != null;\n    return new JKSKeyManager(keyStore, passwords, config().getKeyStore().getAlias());\n}\n\n\n@Bean\npublic WebSSOProfileOptions defaultWebSSOProfileOptions() {\n    WebSSOProfileOptions webSSOProfileOptions = new WebSSOProfileOptions();\n    webSSOProfileOptions.setIncludeScoping(false);\n    return webSSOProfileOptions;\n}\n\n// Entry point to initialize authentication, default values taken from\n// properties file\n@Bean\npublic SAMLEntryPoint samlEntryPoint() {\n    SAMLEntryPoint samlEntryPoint = new SAMLEntryPoint();\n    samlEntryPoint.setWebSSOprofile(webSSOprofile());\n    samlEntryPoint.setDefaultProfileOptions(defaultWebSSOProfileOptions());\n    httpClient().getState().clear();\n    return samlEntryPoint;\n}\n\n// Setup advanced info about metadata\n@Bean\npublic ExtendedMetadata extendedMetadata() {\n    ExtendedMetadata extendedMetadata = new ExtendedMetadata();\n    extendedMetadata.setIdpDiscoveryEnabled(true);\n    extendedMetadata.setSignMetadata(false);\n    extendedMetadata.setEcpEnabled(true);\n    extendedMetadata.setSslHostnameVerification(ALLOW_ALL.toString());\n    return extendedMetadata;\n}\n\n// Filter automatically generates default SP metadata\n@Bean\npublic MetadataGenerator metadataGenerator() {\n    MetadataGenerator metadataGenerator = new MetadataGenerator();\n    metadataGenerator.setEntityBaseURL(config().getSp().getEntityBaseURL());\n    metadataGenerator.setEntityId(config().getSp().getEntityId());\n    metadataGenerator.setExtendedMetadata(extendedMetadata());\n    metadataGenerator.setIncludeDiscoveryExtension(true);\n    metadataGenerator.setKeyManager(keyManager());\n    return metadataGenerator;\n}\n\n// The filter is waiting for connections on URL suffixed with filterSuffix\n// and presents SP metadata there\n@Bean\npublic MetadataDisplayFilter metadataDisplayFilter() {\n    return new MetadataDisplayFilter();\n}\n\n// Handler deciding where to redirect user after successful login\n@Bean\npublic CustomAuthenticationSuccessHandler successRedirectHandler() {\n    CustomAuthenticationSuccessHandler successRedirectHandler =\n            new CustomAuthenticationSuccessHandler();\n    successRedirectHandler.setDefaultTargetUrl(config().getSp().getEntityBaseURL());\n    return successRedirectHandler;\n}\n\n// Handler deciding where to redirect user after failed login\n@Bean\npublic SimpleUrlAuthenticationFailureHandler authenticationFailureHandler() {\n    SimpleUrlAuthenticationFailureHandler failureHandler =\n            new CustomAuthenticationFailureHandler();\n    failureHandler.setUseForward(false);\n    failureHandler.setDefaultFailureUrl(config().getSp().getEntityBaseURL());\n    return failureHandler;\n}\n\n@Bean\npublic SAMLWebSSOHoKProcessingFilter samlWebSSOHoKProcessingFilter() throws Exception {\n    SAMLWebSSOHoKProcessingFilter samlWebSSOHoKProcessingFilter = new SAMLWebSSOHoKProcessingFilter();\n    samlWebSSOHoKProcessingFilter.setAuthenticationSuccessHandler(successRedirectHandler());\n    samlWebSSOHoKProcessingFilter.setAuthenticationManager(authenticationManager());\n    samlWebSSOHoKProcessingFilter.setAuthenticationFailureHandler(authenticationFailureHandler());\n    return samlWebSSOHoKProcessingFilter;\n}\n\n// Processing filter for WebSSO profile messages\n@Bean\npublic SAMLProcessingFilter samlWebSSOProcessingFilter() throws Exception {\n    SAMLProcessingFilter samlWebSSOProcessingFilter = new SAMLProcessingFilter();\n    samlWebSSOProcessingFilter.setAuthenticationManager(authenticationManager());\n    samlWebSSOProcessingFilter.setAuthenticationSuccessHandler(successRedirectHandler());\n    samlWebSSOProcessingFilter.setAuthenticationFailureHandler(authenticationFailureHandler());\n    httpClient().getState().clear();\n    return samlWebSSOProcessingFilter;\n}\n\n@Bean\npublic MetadataGeneratorFilter metadataGeneratorFilter() {\n    return new MetadataGeneratorFilter(metadataGenerator());\n}\n\n// Handler for successful logout\n@Bean\npublic SimpleUrlLogoutSuccessHandler successLogoutHandler() {\n    SimpleUrlLogoutSuccessHandler successLogoutHandler = new CustomSimpleUrlLogoutSuccessHandler();\n    successLogoutHandler.setDefaultTargetUrl(config().getSp().getEntityBaseURL());\n    return successLogoutHandler;\n}\n\n// Logout handler terminating local session\n@Bean\npublic SecurityContextLogoutHandler logoutHandler() {\n    SecurityContextLogoutHandler logoutHandler =\n            new SecurityContextLogoutHandler();\n    logoutHandler.setInvalidateHttpSession(true);\n    logoutHandler.setClearAuthentication(true);\n    return logoutHandler;\n}\n\n// Filter processing incoming logout messages\n// First argument determines URL user will be redirected to after successful\n// global logout\n@Bean\npublic SAMLLogoutProcessingFilter samlLogoutProcessingFilter() {\n    return new SAMLLogoutProcessingFilter(successLogoutHandler(),\n            logoutHandler());\n}\n\n// Overrides default logout processing filter with the one processing SAML\n// messages\n@Bean\npublic SAMLLogoutFilter samlLogoutFilter() {\n    return new SAMLLogoutFilter(successLogoutHandler(),\n            new LogoutHandler[]{logoutHandler()},\n            new LogoutHandler[]{logoutHandler()});\n}\n\n// Bindings\nprivate ArtifactResolutionProfile artifactResolutionProfile() {\n    final ArtifactResolutionProfileImpl artifactResolutionProfile =\n            new ArtifactResolutionProfileImpl(httpClient());\n    artifactResolutionProfile.setProcessor(new SAMLProcessorImpl(soapBinding()));\n    return artifactResolutionProfile;\n}\n\n@Bean\npublic HTTPArtifactBinding artifactBinding(ParserPool parserPool, VelocityEngine velocityEngine) {\n    return new HTTPArtifactBinding(parserPool, velocityEngine, artifactResolutionProfile());\n}\n\n@Bean\npublic HTTPSOAP11Binding soapBinding() {\n    return new HTTPSOAP11Binding(parserPool());\n}\n\n@Bean\npublic HTTPPostBinding httpPostBinding() {\n    return new HTTPPostBinding(parserPool(), velocityEngine());\n}\n\n@Bean\npublic HTTPRedirectDeflateBinding httpRedirectDeflateBinding() {\n    return new HTTPRedirectDeflateBinding(parserPool());\n}\n\n@Bean\npublic HTTPSOAP11Binding httpSOAP11Binding() {\n    return new HTTPSOAP11Binding(parserPool());\n}\n\n@Bean\npublic HTTPPAOS11Binding httpPAOS11Binding() {\n    return new HTTPPAOS11Binding(parserPool());\n}\n\n@Bean\npublic HttpSessionEventPublisher httpSessionEventPublisher() {\n    return new HttpSessionEventPublisher();\n}\n\n// Processor\n@Bean\npublic SAMLProcessorImpl processor() {\n    Collection&lt;SAMLBinding&gt; bindings = new ArrayList&lt;&gt;();\n    bindings.add(httpRedirectDeflateBinding());\n    bindings.add(httpPostBinding());\n    bindings.add(artifactBinding(parserPool(), velocityEngine()));\n    bindings.add(httpSOAP11Binding());\n    bindings.add(httpPAOS11Binding());\n    return new SAMLProcessorImpl(bindings);\n}\n\n/**\n * Define the security filter chain in order to support SSO Auth by using SAML 2.0\n *\n * @return Filter chain proxy\n */\n@Bean\npublic FilterChainProxy samlFilter() throws Exception {\n    List&lt;SecurityFilterChain&gt; chains = new ArrayList&lt;&gt;();\n    chains.add(new DefaultSecurityFilterChain(new AntPathRequestMatcher(&quot;/saml/login/**&quot;),\n            samlEntryPoint()));\n    chains.add(new DefaultSecurityFilterChain(new AntPathRequestMatcher(&quot;/saml/logout/**&quot;),\n            samlLogoutFilter()));\n    chains.add(new DefaultSecurityFilterChain(new AntPathRequestMatcher(&quot;/saml/metadata/**&quot;),\n            metadataDisplayFilter()));\n    chains.add(new DefaultSecurityFilterChain(new AntPathRequestMatcher(&quot;/saml/SSO/**&quot;),\n            samlWebSSOProcessingFilter()));\n    chains.add(new DefaultSecurityFilterChain(new AntPathRequestMatcher(&quot;/saml/SSOHoK/**&quot;),\n            samlWebSSOHoKProcessingFilter()));\n    chains.add(new DefaultSecurityFilterChain(new AntPathRequestMatcher(&quot;/saml/SingleLogout/**&quot;),\n            samlLogoutProcessingFilter()));\n    return new FilterChainProxy(chains);\n}\n\n/**\n * Returns the authentication manager currently used by Spring.\n * It represents a bean definition with the aim allow wiring from\n * other classes performing the Inversion of Control (IoC).\n *\n */\n@Bean\n\npublic AuthenticationManager authenticationManagerBean(AuthenticationConfiguration authConfiguration) throws Exception {\n    return authConfiguration.getAuthenticationManager();\n}\n@Bean\npublic AuthenticationManager authenticationManager() throws Exception {\n    return authenticationConfiguration.getAuthenticationManager();\n}\n\n/**\n * Defines the web based security configuration.\n *\n * @param http It allows configuring web based security for specific http requests.\n *\n */\n@Bean\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n    http.httpBasic(httpBasic-&gt; httpBasic.authenticationEntryPoint(samlEntryPoint()));\n    /*http\n            .httpBasic()\n            .authenticationEntryPoint(samlEntryPoint());*/\n    /*http\n            .csrf()\n            .csrfTokenRepository(CookieCsrfTokenRepository.withHttpOnlyFalse())\n            .ignoringAntMatchers(&quot;/saml/**&quot;);*/\n    http.csrf(csrf-&gt;csrf.csrfTokenRepository(CookieCsrfTokenRepository.withHttpOnlyFalse())\n            .ignoringRequestMatchers(&quot;/saml/**&quot;));\n\n    http\n            .addFilterBefore(metadataGeneratorFilter(), ChannelProcessingFilter.class)\n            .addFilterAfter(samlFilter(), BasicAuthenticationFilter.class);\n    /*http\n            .logout()\n            .logoutRequestMatcher(new AntPathRequestMatcher(&quot;/saml/logout&quot;))\n            .deleteCookies(&quot;JSESSIONID&quot;)\n            .logoutSuccessUrl(config().getSp().getEntityBaseURL() + LOGIN);*/\n    http.logout(httpSecurityLogoutConfigurer -&gt; httpSecurityLogoutConfigurer.logoutRequestMatcher(new AntPathRequestMatcher(&quot;/saml/logout&quot;))\n            .deleteCookies(&quot;JSESSIONID&quot;)\n            .logoutSuccessUrl(config().getSp().getEntityBaseURL() + LOGIN));\n    /*http\n            .headers()\n            .frameOptions()\n            .disable();*/\n    http.headers(headers -&gt; headers.frameOptions(HeadersConfigurer.FrameOptionsConfig::disable));\n    /*http\n            .sessionManagement()\n            .sessionAuthenticationErrorUrl(config().getSp().getEntityBaseURL() + LOGIN)\n            .invalidSessionUrl(config().getSp().getEntityBaseURL() + LOGIN);*/\n\n    http.sessionManagement(sessionManagement -&gt; sessionManagement.sessionAuthenticationErrorUrl(config().getSp().getEntityBaseURL() + LOGIN)\n            .invalidSessionUrl(config().getSp().getEntityBaseURL() + LOGIN));\n    /*http\n            .sessionManagement()\n            .maximumSessions(1)\n            .expiredUrl(config().getSp().getEntityBaseURL() + LOGIN);*/\n    http.sessionManagement(sessionManagement -&gt; sessionManagement.maximumSessions(1)\n            .expiredUrl(config().getSp().getEntityBaseURL() + LOGIN));\n    /*http\n            .sessionManagement()\n            .sessionFixation()\n            .newSession();*/\n    http.sessionManagement(sessionManagement -&gt;\n            sessionManagement.sessionFixation().newSession());\n\n    /*http\n            .sessionManagement()\n            .sessionCreationPolicy(SessionCreationPolicy.NEVER);*/\n    http.sessionManagement(sessionManagement -&gt;sessionManagement.sessionCreationPolicy(SessionCreationPolicy.NEVER));\n\n            permitEndpoints(http);\n    http.authenticationProvider(samlAuthenticationProvider());\n    return http.build();\n}\n\n/**\n * Sets a custom authentication provider.\n *\n * @param auth SecurityBuilder used to create an AuthenticationManager.\n */\n/*@Override\nprotected void configure(AuthenticationManagerBuilder auth) {\n    auth.authenticationProvider(samlAuthenticationProvider());\n}*/\n\n\nprivate void permitEndpoints(HttpSecurity http) throws Exception {\n    if (isSamlDisabled()) {\n        http\n                .authorizeHttpRequests(authorizeHttpRequests -&gt; authorizeHttpRequests.requestMatchers(&quot;/**&quot;).permitAll()\n                        .anyRequest().authenticated());\n               // .requestMatchers(&quot;/**&quot;).permitAll()\n                //.anyRequest().authenticated();\n    } else {\n        http\n                .authorizeHttpRequests(authorizeHttpRequests -&gt;\n                        authorizeHttpRequests.requestMatchers(&quot;/saml/**&quot;).permitAll()\n                                .requestMatchers(&quot;/error&quot;).permitAll().anyRequest().permitAll());\n        /*\n                .requestMatchers(&quot;/saml/**&quot;).permitAll()\n                .requestMatchers(&quot;/error&quot;).permitAll()\n                .anyRequest().permitAll();*/\n    }\n}\n\nprivate boolean isSamlDisabled() {\n    return Arrays.stream(environment.getActiveProfiles()).anyMatch(\n            env -&gt; (env.equalsIgnoreCase(&quot;samlDisabled&quot;)));\n}\n\npublic class CustomAuthenticationSuccessHandler extends SavedRequestAwareAuthenticationSuccessHandler {\n\n    @Override\n    public void onAuthenticationSuccess(HttpServletRequest request,\n                                        HttpServletResponse response,\n                                        Authentication authentication) throws IOException, ServletException {\n        logger.debug(&quot;in onAuthenticationSuccess&quot;);\n        Cookie[] cookies = request.getCookies();\n        if(cookies != null) {\n            for (Cookie cookie : cookies) {\n                if (cookie.getName().equals(&quot;XSRF-TOKEN&quot;)) {\n                    cookie.setValue(&quot;&quot;);\n                    cookie.setMaxAge(0);\n                    cookie.setPath(&quot;/&quot;);\n                    response.addCookie(cookie);\n                }\n            }\n        }\n        if(config().getSp().getEntityBaseURL().equalsIgnoreCase(this.getDefaultTargetUrl())) {\n            URLBuilder builder = new URLBuilder(request.getRequestURL().toString());\n            builder.setPath(&quot;/&quot;);\n            builder.setFragment(&quot;/login?SSO=&quot;+ UserPolicy.AUTH_TYPE_SAML);\n            builder.setPort(CmsUtil.getWebServerPort());\n            this.setDefaultTargetUrl(builder.buildURL());\n        }\n        request.changeSessionId();\n        super.onAuthenticationSuccess(request, response, authentication);\n    }\n}\n\npublic class CustomAuthenticationFailureHandler extends SimpleUrlAuthenticationFailureHandler {\n    protected String defaultFailureUrl = null;\n\n    public String getDefaultFailureUrl() {\n        return defaultFailureUrl;\n    }\n    @Override\n    public void setDefaultFailureUrl(String defaultFailureUrl) {\n        super.setDefaultFailureUrl(defaultFailureUrl);\n        this.defaultFailureUrl = defaultFailureUrl;\n    }\n    @Override\n    public void onAuthenticationFailure(HttpServletRequest request, HttpServletResponse response,\n                                        AuthenticationException exception) throws IOException, ServletException {\n        logger.debug(&quot;in onAuthenticationFailure&quot;);\n        if(config().getSp().getEntityBaseURL().equalsIgnoreCase(this.getDefaultFailureUrl())) {\n            URLBuilder builder = new URLBuilder(request.getRequestURL().toString());\n            builder.setPath(&quot;/&quot;);\n            builder.setFragment(&quot;/login?SSO=&quot;+ UserPolicy.AUTH_TYPE_SAML);\n            builder.setPort(CmsUtil.getWebServerPort());\n            this.setDefaultFailureUrl(builder.buildURL());\n        }\n        super.onAuthenticationFailure(request, response, exception);\n    }\n}\n\npublic class CustomSimpleUrlLogoutSuccessHandler extends SimpleUrlLogoutSuccessHandler {\n    @Override\n    public void onLogoutSuccess(HttpServletRequest request, HttpServletResponse response,\n                                Authentication authentication) throws IOException, ServletException {\n        if(config().getSp().getEntityBaseURL().equalsIgnoreCase(this.getDefaultTargetUrl())) {\n            URLBuilder builder = new URLBuilder(request.getRequestURL().toString());\n            builder.setPath(&quot;/&quot;);\n            builder.setFragment(&quot;/login&quot;);\n            builder.setPort(CmsUtil.getWebServerPort());\n            this.setDefaultTargetUrl(builder.buildURL());\n        }\n        super.onLogoutSuccess(request, response, authentication);\n    }\n}\n\n\n@Bean\n@Qualifier(&quot;idp-keycloak&quot;)\npublic ExtendedMetadataDelegate keycloakExtendedMetadataProvider(Environment env)\n        throws MetadataProviderException {\n    String idpKeycloakMetadataURL = env.getRequiredProperty(&quot;keycloak.auth-server-url&quot;) + &quot;/protocol/saml/descriptor&quot;;\n    HTTPMetadataProvider httpMetadataProvider = new HTTPMetadataProvider(\n            this.backgroundTaskTimer, httpClient(), idpKeycloakMetadataURL);\n    httpMetadataProvider.setParserPool(parserPool());\n    ExtendedMetadataDelegate extendedMetadataDelegate =\n            new ExtendedMetadataDelegate(httpMetadataProvider, extendedMetadata());\n    extendedMetadataDelegate.setMetadataTrustCheck(true);\n    extendedMetadataDelegate.setMetadataRequireSignature(false);\n    backgroundTaskTimer.purge();\n    return extendedMetadataDelegate;\n}\n@Bean\n@Qualifier(&quot;metadata&quot;)\npublic CachingMetadataManager metadata(List&lt;MetadataProvider&gt; providers) throws MetadataProviderException {\n    providers.remove(0);\n    return new CachingMetadataManager(providers);\n}\n}\n</code></pre>\n<p>please advise.</p>\n"},{"tags":["java","android","android-studio","android-layout","button"],"comments":[{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":3,"creation_date":1693842918,"post_id":77039157,"comment_id":135810283,"body_markdown":"Don&#39;t use a `Button`. Use a `ConstraintLayout` with suitable rules for the three pieces of text, mark that it is clickable and focusable, and give it a `StateListDrawable` background that renders as you want for click events.","body":"Don&#39;t use a <code>Button</code>. Use a <code>ConstraintLayout</code> with suitable rules for the three pieces of text, mark that it is clickable and focusable, and give it a <code>StateListDrawable</code> background that renders as you want for click events."}],"answers":[{"tags":[],"owner":{"account_id":23340559,"reputation":366,"user_id":17415517,"display_name":"Khush Parmar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694064690,"creation_date":1694064690,"answer_id":77056824,"question_id":77039157,"body_markdown":"This way is not a good practice to fulfill your requirement as android xml have some rules for managing the views and it&#39;s content over the screen.\r\n\r\nYou can use `ConstraintLayout` functionality for managing views in chains like a horizontal management in your case or vertical management. You can visit this [link][1] to understand the basic and try to work around on it to be the master. You can use the weights with chain showing inside the image to meet your requirement.\r\n\r\n[![enter image description here][2]][2]\r\n\r\nThere is another option available when using `LinearLayout` which provides the **weight** to show the views over the screen you can create horizontal oriented linear layout and provide the three views either button or text as you wanted and then provide the weight for them as per your requirement.\r\n\r\n  [1]: https://developer.android.com/develop/ui/views/layout/constraint-layout#constrain-chain\r\n  [2]: https://i.stack.imgur.com/Nszq1.png","title":"Android Studio Java - How do I add more than one text on a button","body":"<p>This way is not a good practice to fulfill your requirement as android xml have some rules for managing the views and it's content over the screen.</p>\n<p>You can use <code>ConstraintLayout</code> functionality for managing views in chains like a horizontal management in your case or vertical management. You can visit this <a href=\"https://developer.android.com/develop/ui/views/layout/constraint-layout#constrain-chain\" rel=\"nofollow noreferrer\">link</a> to understand the basic and try to work around on it to be the master. You can use the weights with chain showing inside the image to meet your requirement.</p>\n<p><a href=\"https://i.stack.imgur.com/Nszq1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Nszq1.png\" alt=\"enter image description here\" /></a></p>\n<p>There is another option available when using <code>LinearLayout</code> which provides the <strong>weight</strong> to show the views over the screen you can create horizontal oriented linear layout and provide the three views either button or text as you wanted and then provide the weight for them as per your requirement.</p>\n"}],"owner":{"account_id":25028120,"reputation":1,"user_id":18886149,"display_name":"kasim"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694064690,"creation_date":1693842765,"question_id":77039157,"body_markdown":"Is there a way to add text in this specific layout instead of constantly pressing the space button and trying to align the number with the previous buttons.\r\n![1]\r\n\r\n\r\n\r\n\r\n   \r\n\r\n     &lt;androidx.appcompat.widget.AppCompatButton\r\n            android:id=&quot;@+id/btn1&quot;\r\n            android:layout_width=&quot;352dp&quot;\r\n            android:layout_height=&quot;55dp&quot;\r\n            android:layout_marginLeft=&quot;20dp&quot;\r\n            android:layout_marginTop=&quot;20dp&quot;\r\n            android:layout_marginRight=&quot;20dp&quot;\r\n            android:background=&quot;@drawable/btn1&quot;\r\n            **android:text=&quot;1                  Item                                  number&quot;**\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintHorizontal_bias=&quot;0.44&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n    \r\n        &lt;androidx.appcompat.widget.AppCompatButton\r\n            android:id=&quot;@+id/btn&quot;\r\n            android:layout_width=&quot;352dp&quot;\r\n            android:layout_height=&quot;55dp&quot;\r\n            android:layout_marginBottom=&quot;160dp&quot;\r\n            android:background=&quot;@drawable/btn1&quot;\r\n            **android:text=&quot;2                    Item                         number&quot;**\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintHorizontal_bias=&quot;0.491&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            app:layout_constraintVertical_bias=&quot;0.177&quot; /&gt;\r\n    \r\n    \r\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/VSmaC.png","title":"Android Studio Java - How do I add more than one text on a button","body":"<p>Is there a way to add text in this specific layout instead of constantly pressing the space button and trying to align the number with the previous buttons.\n<img src=\"https://i.stack.imgur.com/VSmaC.png\" alt=\"1\" /></p>\n<pre><code> &lt;androidx.appcompat.widget.AppCompatButton\n        android:id=&quot;@+id/btn1&quot;\n        android:layout_width=&quot;352dp&quot;\n        android:layout_height=&quot;55dp&quot;\n        android:layout_marginLeft=&quot;20dp&quot;\n        android:layout_marginTop=&quot;20dp&quot;\n        android:layout_marginRight=&quot;20dp&quot;\n        android:background=&quot;@drawable/btn1&quot;\n        **android:text=&quot;1                  Item                                  number&quot;**\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintHorizontal_bias=&quot;0.44&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n\n    &lt;androidx.appcompat.widget.AppCompatButton\n        android:id=&quot;@+id/btn&quot;\n        android:layout_width=&quot;352dp&quot;\n        android:layout_height=&quot;55dp&quot;\n        android:layout_marginBottom=&quot;160dp&quot;\n        android:background=&quot;@drawable/btn1&quot;\n        **android:text=&quot;2                    Item                         number&quot;**\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintHorizontal_bias=&quot;0.491&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:layout_constraintVertical_bias=&quot;0.177&quot; /&gt;\n\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n"},{"tags":["java","multithreading","concurrency","parallel-processing","threadpool"],"comments":[{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":3,"creation_date":1693917330,"post_id":77044554,"comment_id":135820100,"body_markdown":"you messed up the formatting. You can edit the question and fix it.","body":"you messed up the formatting. You can edit the question and fix it."},{"owner":{"account_id":5363666,"reputation":1950,"user_id":4274223,"display_name":"Gregorio Palam&#224;"},"score":0,"creation_date":1693918903,"post_id":77044554,"comment_id":135820505,"body_markdown":"Can you please add some code? Anyway, you can collect the informations in a map or a list, using streams and their filters/iterators, then you can perform the API calls with a parallel stream on the map you created before.","body":"Can you please add some code? Anyway, you can collect the informations in a map or a list, using streams and their filters/iterators, then you can perform the API calls with a parallel stream on the map you created before."},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":1,"creation_date":1693922243,"post_id":77044554,"comment_id":135821313,"body_markdown":"Please provide a [minimal reproducible example](http://stackoverflow.com/help/minimal-reproducible-example).","body":"Please provide a <a href=\"http://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":29370677,"reputation":41,"user_id":22503377,"display_name":"Suprita Venkat"},"score":1,"creation_date":1693926484,"post_id":77044554,"comment_id":135822342,"body_markdown":"I have edited the code , plz review the code..and plz provide your insights on the same..","body":"I have edited the code , plz review the code..and plz provide your insights on the same.."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1693932782,"post_id":77044554,"comment_id":135823737,"body_markdown":"Up-voting. The author has complied with all criticisms.","body":"Up-voting. The author has complied with all criticisms."},{"owner":{"account_id":2179728,"reputation":73077,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"score":2,"creation_date":1694014642,"post_id":77044554,"comment_id":135836408,"body_markdown":"I agree with @BasilBourque","body":"I agree with @BasilBourque"}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694063494,"creation_date":1693932120,"answer_id":77046305,"question_id":77044554,"body_markdown":"## Virtual threads\r\n\r\nSounds like a good use for the new [virtual threads][1] feature of [Java 21][2]+ arriving this month. \r\n\r\nFor each list of attributes to be processed, instantiate a `ExecutorService` based on virtual threads. Do that instantiation within try-with-resources syntax. \r\n\r\n    try (\r\n        ExecutorService es = Executors.newVirtualThreadPerTaskExecutor() ;\r\n    ) { … }\r\n\r\n\r\nDefine a class that implements `Runnable` or `Callable`, or define a lambda, as a task to process an attribute. Submit to the executor service as a task an instance per attribute. \r\n\r\nOnce that is working, you can similarly make the outer code concurrent. Instantiate another executor service based on virtual threads, and submit each product as a task. So now you have many products concurrently each processing its list of attributes concurrently. \r\n\r\nVirtual threads are vastly cheaper than platform threads. So you can reasonably have a million virtual threads running. \r\n\r\n## Example code\r\n\r\nHere is a simple example app. \r\n\r\nWe define a `Product` [record][3] that contains a collection of `Attribute` record objects. \r\n\r\n    record Attribute( String id ) { }\r\n    record Product( int id , Collection &lt; Attribute &gt; attributes ) { }\r\n\r\nWe send each `Product` object off to a virtual thread. On that virtue thread, each of the `Attribute` objects within that `Product` is sent off to a virtual thread for submission to a web service.\r\n\r\nThe key point to understand is that &#128073;&#127998; each call to [`ExecutorSerivce#submit`][4] does *not* [block][5]. The task, here defined as a lambda, is sent un-executed to the executor service. The executor service manages the chore of handing that task (that lambda) to a virtual thread for eventual execution. The thread calling `submit` has long since moved on to other work.\r\n\r\n**Beware:** Output from `System.out` does *not* necessarily appear chronologically when called across threads. If you care about the order, always include and study a timestamp (`Instant.now()`). \r\n\r\n```java\r\npackage work.basil.example;\r\n\r\nimport java.time.Duration;\r\nimport java.time.Instant;\r\nimport java.util.Collection;\r\nimport java.util.List;\r\nimport java.util.concurrent.ExecutorService;\r\nimport java.util.concurrent.Executors;\r\nimport java.util.concurrent.ThreadLocalRandom;\r\n\r\npublic class AttributeProcessor\r\n{\r\n    public static void main ( String[] args )\r\n    {\r\n        AttributeProcessor app = new AttributeProcessor ( );\r\n        app.demo ( );\r\n    }\r\n\r\n    private void demo ( )\r\n    {\r\n        List &lt; Product &gt; products = this.sampleData ( );\r\n        try (\r\n                ExecutorService executorServiceProducts = Executors.newVirtualThreadPerTaskExecutor ( ) ;\r\n        )\r\n        {\r\n            for ( Product product : products )\r\n            {\r\n                executorServiceProducts.submit ( ( ) -&gt;\r\n                {\r\n                    try (\r\n                            ExecutorService executorServiceAttributes = Executors.newVirtualThreadPerTaskExecutor ( ) ;\r\n                    )\r\n                    {\r\n                        for ( Attribute attribute : product.attributes ( ) )\r\n                        {\r\n                            executorServiceAttributes.submit ( ( ) -&gt;\r\n                            {\r\n                                 try\r\n                                {\r\n                                    // Simulate long wait as we send off this attribute to a web service.\r\n                                    Thread.sleep ( Duration.ofMillis ( ThreadLocalRandom.current ( ).nextInt ( 300 , 1200 ) ) );\r\n                                    System.out.println ( &quot;DEBUG - Processed attribute &quot; + attribute.id ( ) + &quot; of product &quot; + product.id ( ) + &quot; at &quot; + Instant.now ( ) );\r\n                                }\r\n                                catch ( InterruptedException e ) { throw new RuntimeException ( e ); }\r\n                             } );\r\n                        }\r\n                    }\r\n                } );\r\n            }\r\n        }\r\n    }\r\n\r\n    private List &lt; Product &gt; sampleData ( )\r\n    {\r\n        return\r\n                List.of (\r\n                        new Product (\r\n                                1 ,\r\n                                List.of (\r\n                                        new Attribute ( &quot;A&quot; ) ,\r\n                                        new Attribute ( &quot;B&quot; ) ,\r\n                                        new Attribute ( &quot;C&quot; )\r\n                                )\r\n                        ) ,\r\n                        new Product (\r\n                                2 ,\r\n                                List.of (\r\n                                        new Attribute ( &quot;D&quot; ) ,\r\n                                        new Attribute ( &quot;E&quot; ) ,\r\n                                        new Attribute ( &quot;F&quot; )\r\n                                )\r\n                        ) ,\r\n                        new Product (\r\n                                3 ,\r\n                                List.of (\r\n                                        new Attribute ( &quot;X&quot; ) ,\r\n                                        new Attribute ( &quot;Y&quot; ) ,\r\n                                        new Attribute ( &quot;Z&quot; )\r\n                                )\r\n                        )\r\n                );\r\n    }\r\n}\r\n\r\nrecord Attribute( String id ) { }\r\n\r\nrecord Product( int id , Collection &lt; Attribute &gt; attributes ) { }\r\n```\r\n\r\nWhen run:\r\n\r\n```none\r\nDEBUG - Processed attribute Z of product 3 at 2023-09-06T19:20:10.327374Z\r\nDEBUG - Processed attribute Y of product 3 at 2023-09-06T19:20:10.327376Z\r\nDEBUG - Processed attribute E of product 2 at 2023-09-06T19:20:10.455059Z\r\nDEBUG - Processed attribute X of product 3 at 2023-09-06T19:20:10.491004Z\r\nDEBUG - Processed attribute B of product 1 at 2023-09-06T19:20:10.795873Z\r\nDEBUG - Processed attribute F of product 2 at 2023-09-06T19:20:10.969192Z\r\nDEBUG - Processed attribute C of product 1 at 2023-09-06T19:20:11.072108Z\r\nDEBUG - Processed attribute D of product 2 at 2023-09-06T19:20:11.072108Z\r\nDEBUG - Processed attribute A of product 1 at 2023-09-06T19:20:11.154606Z\r\n```\r\n\r\nI have omitted the tough part: Graceful error handling. For one thing, in real work we would capture the `Future` returned by `ExecutorService#submit`, and process them to verify success. For another thing, we would need to account for time-outs on the web service calls. \r\n\r\n## Java 17\r\n\r\nIn Java 17, you could do something similar to the code seen above. But Java 17 has only expensive platform threads, without any cheap virtual threads. So you would need to instantiate and re-use one or two executor services with a limited number of threads. \r\n\r\nFYI, Java 21 is a [long-term support (LTS)][6] version of Java, like Java 17. \r\n\r\nHere is some example code using a single `ExecutorService` in Java 17. \r\n\r\nPass to `newFixedThreadPool` a number of threads appropriate to your machine.\r\n\r\nNotice my slightly modified version of the boilerplate code given to you in [the Javadoc](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ExecutorService.html) in method `shutdownAndAwaitTermination`. That boilerplate gracefully shuts down your executor service so that its backing pool of threads does not run indefinitely. We must write such a method because `ExecutorService` did not become [`AutoCloseable`][7] until Java 19. \r\n\r\n```java\r\nList &lt; Product &gt; products = this.sampleData ( );\r\nfinal ExecutorService executorService = Executors.newFixedThreadPool ( 7 );\r\nfor ( Product product : products )\r\n{\r\n    for ( Attribute attribute : product.attributes ( ) )\r\n    {\r\n        executorService.submit ( ( ) -&gt;\r\n        {\r\n            try\r\n            {\r\n                // Simulate long wait as we send off this attribute to a web service.\r\n                Thread.sleep ( Duration.ofMillis ( ThreadLocalRandom.current ( ).nextInt ( 300 , 1200 ) ) );\r\n                System.out.println ( &quot;DEBUG - Processed attribute &quot; + attribute.id ( ) + &quot; of product &quot; + product.id ( ) + &quot; at &quot; + Instant.now ( ) );\r\n            }\r\n            catch ( InterruptedException e ) { throw new RuntimeException ( e ); }\r\n        } );\r\n    }\r\n}\r\nthis.shutdownAndAwaitTermination ( executorService );\r\n```\r\n\r\n```java\r\nprivate void shutdownAndAwaitTermination ( final ExecutorService executorService )\r\n{\r\n    executorService.shutdown ( ); // Disable new tasks from being submitted\r\n    try\r\n    {\r\n        // Wait a while for existing tasks to terminate.\r\n        if ( ! executorService.awaitTermination ( 60 , TimeUnit.SECONDS ) )\r\n        {\r\n            executorService.shutdownNow ( ); // Cancel currently executing tasks.\r\n            // Wait a while for tasks to respond to being cancelled.\r\n            if ( ! executorService.awaitTermination ( 60 , TimeUnit.SECONDS ) )\r\n                System.err.println ( &quot;Executor service did not terminate.&quot; + Instant.now ( ) );\r\n        }\r\n    }\r\n    catch ( InterruptedException ex )\r\n    {\r\n        executorService.shutdownNow ( );  // (Re-)Cancel if current thread also interrupted\r\n        Thread.currentThread ( ).interrupt ( );  // Preserve interrupt status\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\n  [1]: https://AttributesResponse\r\n  [2]: https://en.wikipedia.org/wiki/Java_version_history#Java_21\r\n  [3]: https://openjdk.org/jeps/395\r\n  [4]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/ExecutorService.html#submit(java.lang.Runnable)\r\n  [5]: https://en.wikipedia.org/wiki/Blocking_(computing)\r\n  [6]: https://en.wikipedia.org/wiki/Long-term_support\r\n  [7]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/AutoCloseable.html","title":"Problem in Achieving concurrency in Java 17","body":"<h2>Virtual threads</h2>\n<p>Sounds like a good use for the new <a href=\"https://AttributesResponse\" rel=\"nofollow noreferrer\">virtual threads</a> feature of <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_21\" rel=\"nofollow noreferrer\">Java 21</a>+ arriving this month.</p>\n<p>For each list of attributes to be processed, instantiate a <code>ExecutorService</code> based on virtual threads. Do that instantiation within try-with-resources syntax.</p>\n<pre><code>try (\n    ExecutorService es = Executors.newVirtualThreadPerTaskExecutor() ;\n) { … }\n</code></pre>\n<p>Define a class that implements <code>Runnable</code> or <code>Callable</code>, or define a lambda, as a task to process an attribute. Submit to the executor service as a task an instance per attribute.</p>\n<p>Once that is working, you can similarly make the outer code concurrent. Instantiate another executor service based on virtual threads, and submit each product as a task. So now you have many products concurrently each processing its list of attributes concurrently.</p>\n<p>Virtual threads are vastly cheaper than platform threads. So you can reasonably have a million virtual threads running.</p>\n<h2>Example code</h2>\n<p>Here is a simple example app.</p>\n<p>We define a <code>Product</code> <a href=\"https://openjdk.org/jeps/395\" rel=\"nofollow noreferrer\">record</a> that contains a collection of <code>Attribute</code> record objects.</p>\n<pre><code>record Attribute( String id ) { }\nrecord Product( int id , Collection &lt; Attribute &gt; attributes ) { }\n</code></pre>\n<p>We send each <code>Product</code> object off to a virtual thread. On that virtue thread, each of the <code>Attribute</code> objects within that <code>Product</code> is sent off to a virtual thread for submission to a web service.</p>\n<p>The key point to understand is that 👉🏾 each call to <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/ExecutorService.html#submit(java.lang.Runnable)\" rel=\"nofollow noreferrer\"><code>ExecutorSerivce#submit</code></a> does <em>not</em> <a href=\"https://en.wikipedia.org/wiki/Blocking_(computing)\" rel=\"nofollow noreferrer\">block</a>. The task, here defined as a lambda, is sent un-executed to the executor service. The executor service manages the chore of handing that task (that lambda) to a virtual thread for eventual execution. The thread calling <code>submit</code> has long since moved on to other work.</p>\n<p><strong>Beware:</strong> Output from <code>System.out</code> does <em>not</em> necessarily appear chronologically when called across threads. If you care about the order, always include and study a timestamp (<code>Instant.now()</code>).</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example;\n\nimport java.time.Duration;\nimport java.time.Instant;\nimport java.util.Collection;\nimport java.util.List;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\nimport java.util.concurrent.ThreadLocalRandom;\n\npublic class AttributeProcessor\n{\n    public static void main ( String[] args )\n    {\n        AttributeProcessor app = new AttributeProcessor ( );\n        app.demo ( );\n    }\n\n    private void demo ( )\n    {\n        List &lt; Product &gt; products = this.sampleData ( );\n        try (\n                ExecutorService executorServiceProducts = Executors.newVirtualThreadPerTaskExecutor ( ) ;\n        )\n        {\n            for ( Product product : products )\n            {\n                executorServiceProducts.submit ( ( ) -&gt;\n                {\n                    try (\n                            ExecutorService executorServiceAttributes = Executors.newVirtualThreadPerTaskExecutor ( ) ;\n                    )\n                    {\n                        for ( Attribute attribute : product.attributes ( ) )\n                        {\n                            executorServiceAttributes.submit ( ( ) -&gt;\n                            {\n                                 try\n                                {\n                                    // Simulate long wait as we send off this attribute to a web service.\n                                    Thread.sleep ( Duration.ofMillis ( ThreadLocalRandom.current ( ).nextInt ( 300 , 1200 ) ) );\n                                    System.out.println ( &quot;DEBUG - Processed attribute &quot; + attribute.id ( ) + &quot; of product &quot; + product.id ( ) + &quot; at &quot; + Instant.now ( ) );\n                                }\n                                catch ( InterruptedException e ) { throw new RuntimeException ( e ); }\n                             } );\n                        }\n                    }\n                } );\n            }\n        }\n    }\n\n    private List &lt; Product &gt; sampleData ( )\n    {\n        return\n                List.of (\n                        new Product (\n                                1 ,\n                                List.of (\n                                        new Attribute ( &quot;A&quot; ) ,\n                                        new Attribute ( &quot;B&quot; ) ,\n                                        new Attribute ( &quot;C&quot; )\n                                )\n                        ) ,\n                        new Product (\n                                2 ,\n                                List.of (\n                                        new Attribute ( &quot;D&quot; ) ,\n                                        new Attribute ( &quot;E&quot; ) ,\n                                        new Attribute ( &quot;F&quot; )\n                                )\n                        ) ,\n                        new Product (\n                                3 ,\n                                List.of (\n                                        new Attribute ( &quot;X&quot; ) ,\n                                        new Attribute ( &quot;Y&quot; ) ,\n                                        new Attribute ( &quot;Z&quot; )\n                                )\n                        )\n                );\n    }\n}\n\nrecord Attribute( String id ) { }\n\nrecord Product( int id , Collection &lt; Attribute &gt; attributes ) { }\n</code></pre>\n<p>When run:</p>\n<pre class=\"lang-none prettyprint-override\"><code>DEBUG - Processed attribute Z of product 3 at 2023-09-06T19:20:10.327374Z\nDEBUG - Processed attribute Y of product 3 at 2023-09-06T19:20:10.327376Z\nDEBUG - Processed attribute E of product 2 at 2023-09-06T19:20:10.455059Z\nDEBUG - Processed attribute X of product 3 at 2023-09-06T19:20:10.491004Z\nDEBUG - Processed attribute B of product 1 at 2023-09-06T19:20:10.795873Z\nDEBUG - Processed attribute F of product 2 at 2023-09-06T19:20:10.969192Z\nDEBUG - Processed attribute C of product 1 at 2023-09-06T19:20:11.072108Z\nDEBUG - Processed attribute D of product 2 at 2023-09-06T19:20:11.072108Z\nDEBUG - Processed attribute A of product 1 at 2023-09-06T19:20:11.154606Z\n</code></pre>\n<p>I have omitted the tough part: Graceful error handling. For one thing, in real work we would capture the <code>Future</code> returned by <code>ExecutorService#submit</code>, and process them to verify success. For another thing, we would need to account for time-outs on the web service calls.</p>\n<h2>Java 17</h2>\n<p>In Java 17, you could do something similar to the code seen above. But Java 17 has only expensive platform threads, without any cheap virtual threads. So you would need to instantiate and re-use one or two executor services with a limited number of threads.</p>\n<p>FYI, Java 21 is a <a href=\"https://en.wikipedia.org/wiki/Long-term_support\" rel=\"nofollow noreferrer\">long-term support (LTS)</a> version of Java, like Java 17.</p>\n<p>Here is some example code using a single <code>ExecutorService</code> in Java 17.</p>\n<p>Pass to <code>newFixedThreadPool</code> a number of threads appropriate to your machine.</p>\n<p>Notice my slightly modified version of the boilerplate code given to you in <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ExecutorService.html\" rel=\"nofollow noreferrer\">the Javadoc</a> in method <code>shutdownAndAwaitTermination</code>. That boilerplate gracefully shuts down your executor service so that its backing pool of threads does not run indefinitely. We must write such a method because <code>ExecutorService</code> did not become <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/AutoCloseable.html\" rel=\"nofollow noreferrer\"><code>AutoCloseable</code></a> until Java 19.</p>\n<pre class=\"lang-java prettyprint-override\"><code>List &lt; Product &gt; products = this.sampleData ( );\nfinal ExecutorService executorService = Executors.newFixedThreadPool ( 7 );\nfor ( Product product : products )\n{\n    for ( Attribute attribute : product.attributes ( ) )\n    {\n        executorService.submit ( ( ) -&gt;\n        {\n            try\n            {\n                // Simulate long wait as we send off this attribute to a web service.\n                Thread.sleep ( Duration.ofMillis ( ThreadLocalRandom.current ( ).nextInt ( 300 , 1200 ) ) );\n                System.out.println ( &quot;DEBUG - Processed attribute &quot; + attribute.id ( ) + &quot; of product &quot; + product.id ( ) + &quot; at &quot; + Instant.now ( ) );\n            }\n            catch ( InterruptedException e ) { throw new RuntimeException ( e ); }\n        } );\n    }\n}\nthis.shutdownAndAwaitTermination ( executorService );\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>private void shutdownAndAwaitTermination ( final ExecutorService executorService )\n{\n    executorService.shutdown ( ); // Disable new tasks from being submitted\n    try\n    {\n        // Wait a while for existing tasks to terminate.\n        if ( ! executorService.awaitTermination ( 60 , TimeUnit.SECONDS ) )\n        {\n            executorService.shutdownNow ( ); // Cancel currently executing tasks.\n            // Wait a while for tasks to respond to being cancelled.\n            if ( ! executorService.awaitTermination ( 60 , TimeUnit.SECONDS ) )\n                System.err.println ( &quot;Executor service did not terminate.&quot; + Instant.now ( ) );\n        }\n    }\n    catch ( InterruptedException ex )\n    {\n        executorService.shutdownNow ( );  // (Re-)Cancel if current thread also interrupted\n        Thread.currentThread ( ).interrupt ( );  // Preserve interrupt status\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":29370677,"reputation":41,"user_id":22503377,"display_name":"Suprita Venkat"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":141,"favorite_count":0,"down_vote_count":5,"up_vote_count":4,"answer_count":1,"score":-1,"last_activity_date":1694063494,"creation_date":1693917247,"question_id":77044554,"body_markdown":"I am having some products and these products have multiple attributes related to it.\r\nBulkEditRequest class :\r\n\r\n    import java.time.LocalDateTime;\r\n    import java.util.Map;\r\n    import java.util.Objects;\r\n    \r\n    import lombok.AllArgsConstructor;\r\n    import lombok.Data;\r\n    import lombok.Getter;\r\n    import lombok.Setter;\r\n    import lombok.ToString;\r\n    \r\n    @Getter @Setter\r\n    @AllArgsConstructor\r\n    @ToString\r\n    @Data\r\n    public class BulkEditRequest{\r\n    \r\n    \tprivate String productId;\r\n    \tprivate String productNum;\r\n    \tprivate  Map&lt;String,AttributesResponse&gt; attributeList;\r\n    }\r\n\r\nAttributesResponse class looks like:\r\n\r\n\r\n    import lombok.AllArgsConstructor;\r\n    import lombok.Data;\r\n    import lombok.Getter;\r\n    import lombok.Setter;\r\n    import lombok.ToString;\r\n    \r\n    @Getter @Setter\r\n    @AllArgsConstructor\r\n    @ToString\r\n    @Data\r\n    public class AttributesResponse {\r\n    \tprivate String attributeName;\r\n    \tprivate String attributeValue;\r\n    \tprivate String attributeType;\r\n    \tprivate String attributeId;\r\n    \t\r\n    \tpublic AttributesResponse() {\r\n    \t\tsuper();\r\n    \t}\r\n    }\r\n\r\nTo keep it simple, there is a list of Products, where each product has a list of attributes. Based on the attributeType of each attribute, I have to make a post call to save the attributeValue by making a call to external API.\r\n\r\nNote: The external API which I am using doesn&#39;t accepts a list of attributes, so I have to make one API call for one attribute.\r\n\r\nMy current implementation is very basic:\r\n\r\nIterate through the BulkProducts -&gt; Iterate through each product -&gt; collect the attributes into a list --&gt; iterate through each attributeObj -&gt; find attributeType -&gt; make the API call based on attributeType.\r\n\r\n(using forEach for all these loops).Below is the current code implementation :\r\n\r\n  \r\n    \r\n    import java.time.ZoneOffset;\r\n    import java.time.ZonedDateTime;\r\n    import java.time.format.DateTimeFormatter;\r\n    import java.time.temporal.ChronoUnit;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    import java.util.Locale;\r\n    \r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.http.HttpEntity;\r\n    import org.springframework.http.HttpHeaders;\r\n    import org.springframework.http.HttpStatus;\r\n    import org.springframework.http.ResponseEntity;\r\n    import org.springframework.stereotype.Service;\r\n    import org.springframework.web.client.RestTemplate;\r\n    \r\n    @Service\r\n    public class ServiceImpl {\r\n    \r\n    \tprivate RestTemplate template;\r\n    \r\n    \tpublic ServiceImpl(RestTemplate template) {\r\n    \t\tthis.template = template;\r\n    \t}\r\n    \r\n    \tpublic void saveProductsInFlex(List&lt;BulkEditRequest&gt; attributesByProd) {\r\n    \r\n    \t\tfor (BulkEditRequest singleProduct : attributesByProd) {\r\n    \t\t\tString prodNum = singleProduct.getProductNum();\r\n    \r\n    \t\t\tList&lt;AttributesResponse&gt; attributeList = new ArrayList&lt;AttributesResponse&gt;(\r\n    \t\t\t\t\tsingleProduct.getAttributeList().values());\r\n    \r\n    \t\t\tfor (AttributesResponse attribute : attributeList) {\r\n    \r\n    \t\t\t\tif (&quot;Price&quot;.equalsIgnoreCase(attribute.getAttributeType())) {\r\n    \r\n    \t\t\t\t\tsetProductPrice(singleProduct, attribute);\r\n    \r\n    \t\t\t\t} else if (&quot;Identifier&quot;.equalsIgnoreCase(attribute.getAttributeType())) {\r\n    \r\n    \t\t\t\t\tsetProductIdentifier(singleProduct, attribute);\r\n    \r\n    \t\t\t\t} else if (&quot;Attribute&quot;.equalsIgnoreCase(attribute.getAttributeType())) {\r\n    \r\n    \t\t\t\t\tsetProductAttribute(singleProduct, attribute);\r\n    \r\n    \t\t\t\t}\r\n    \r\n    \t\t\t}\r\n    \r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    \tprivate void setProductPrice(BulkEditRequest singleProduct, AttributesResponse attributeResponse) {\r\n    \t\tHttpEntity&lt;UploadEntity&gt; flexEntity = null;\r\n    \t\tString uri = null;\r\n    \t\tint productId = 0;\r\n    \t\tString attribute = attributeResponse.getAttributeName();\r\n    \t\tif (singleProduct != null) {\r\n    \t\t\turi = Constants.BASEURL + singleProduct.getProductNum() + Constants.PRICES;\r\n    \t\t\tproductId = Integer.parseInt(singleProduct.getProductNum());\r\n    \r\n    \t\t}\r\n    \t\ttry {\r\n    \t\t\tUploadEntity entity = new UploadEntity();\r\n    \t\t\tentity.setPrice(attributeResponse.getAttributeValue());\r\n    \t\t\tentity.setUomID(1);\r\n    \t\t\tentity.setCountryCode(&quot;US&quot;);\r\n    \t\t\tflexEntity = new HttpEntity&lt;&gt;(entity);\r\n    \t\t\tResponseEntity&lt;String&gt; response = template.postForEntity(uri, flexEntity, String.class);\r\n    \r\n    \t\t} catch (Exception e) {\r\n    \r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    \tprivate void setProductAttribute(BulkEditRequest singleProduct, AttributesResponse attributeResponse) {\r\n    \t\tHttpEntity&lt;UploadEntity&gt; flexEntity = null;\r\n    \t\tString attribute = attributeResponse.getAttributeName();\r\n    \t\tString uri = null;\r\n    \t\tint productId = 0;\r\n    \t\tif (singleProduct != null) {\r\n    \t\t\turi = Constants.BASEURL + singleProduct.getProductNum() + Constants.ATTRIBUTES;\r\n    \t\t\tproductId = Integer.parseInt(singleProduct.getProductNum());\r\n    \t\t}\r\n    \t\ttry {\r\n    \r\n    \t\t\tUploadEntity entity = new UploadEntity();\r\n    \r\n    \t\t\tentity.setAttributeId(attributeResponse.getAttributeId());\r\n    \t\t\tflexEntity = new HttpEntity&lt;&gt;(entity);\r\n    \t\t\tResponseEntity&lt;String&gt; response = template.postForEntity(uri, flexEntity, String.class);\r\n    \r\n    \t\t} catch (Exception e) {\r\n    \r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    \tprivate void setProductIdentifier(BulkEditRequest singleProduct, AttributesResponse attributeResponse) {\r\n    \t\tHttpEntity&lt;UploadEntity&gt; flexEntity = null;\r\n    \t\tString attribute = attributeResponse.getAttributeName();\r\n    \t\tString uri = null;\r\n    \t\tint productId = 0;\r\n    \t\tif (singleProduct != null) {\r\n    \t\t\turi = Constants.BASEURL + singleProduct.getProductNum() + Constants.IDENTIFIERS;\r\n    \t\t\tproductId = Integer.parseInt(singleProduct.getProductNum());\r\n    \t\t}\r\n    \r\n    \t\ttry {\r\n    \t\t\tUploadEntity entity = new UploadEntity();\r\n    \t\t\tentity.setProductIdentifier(attributeResponse.getAttributeValue());\r\n    \t\t\tflexEntity = new HttpEntity&lt;&gt;(entity);\r\n    \t\t\tResponseEntity&lt;String&gt; response = template.postForEntity(uri, flexEntity, String.class);\r\n    \r\n    \t\t} catch (Exception e) {\r\n    \r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    }\r\n\r\nThe UploadEntity class looks like :\r\n\r\n    import lombok.AllArgsConstructor;\r\n    import lombok.Getter;\r\n    import lombok.NoArgsConstructor;\r\n    import lombok.Setter;\r\n    \r\n    @Getter\r\n    @Setter\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    public class UploadEntity {\r\n    \r\n    \r\n    \t//Price\r\n    \tprivate String price;\r\n    \r\n    \tprivate String countryCode;\r\n    \tprivate String uomID;\r\n    \r\n    \t\r\n    \r\n    \t//Identifier\r\n    \r\n    \tprivate String productIdentifier;\r\n    \r\n    \t\r\n    \t//Attribute\r\n    \r\n    \tprivate String attributeId;\r\n    \r\n    \r\n    }\r\n\r\nThis implementation takes a lot of time (considering 1 product has minimum of 50 attributes). Any suggestions on how I can make it concurrent would be really helpful.","title":"Problem in Achieving concurrency in Java 17","body":"<p>I am having some products and these products have multiple attributes related to it.\nBulkEditRequest class :</p>\n<pre><code>import java.time.LocalDateTime;\nimport java.util.Map;\nimport java.util.Objects;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\nimport lombok.Getter;\nimport lombok.Setter;\nimport lombok.ToString;\n\n@Getter @Setter\n@AllArgsConstructor\n@ToString\n@Data\npublic class BulkEditRequest{\n\n    private String productId;\n    private String productNum;\n    private  Map&lt;String,AttributesResponse&gt; attributeList;\n}\n</code></pre>\n<p>AttributesResponse class looks like:</p>\n<pre><code>import lombok.AllArgsConstructor;\nimport lombok.Data;\nimport lombok.Getter;\nimport lombok.Setter;\nimport lombok.ToString;\n\n@Getter @Setter\n@AllArgsConstructor\n@ToString\n@Data\npublic class AttributesResponse {\n    private String attributeName;\n    private String attributeValue;\n    private String attributeType;\n    private String attributeId;\n    \n    public AttributesResponse() {\n        super();\n    }\n}\n</code></pre>\n<p>To keep it simple, there is a list of Products, where each product has a list of attributes. Based on the attributeType of each attribute, I have to make a post call to save the attributeValue by making a call to external API.</p>\n<p>Note: The external API which I am using doesn't accepts a list of attributes, so I have to make one API call for one attribute.</p>\n<p>My current implementation is very basic:</p>\n<p>Iterate through the BulkProducts -&gt; Iterate through each product -&gt; collect the attributes into a list --&gt; iterate through each attributeObj -&gt; find attributeType -&gt; make the API call based on attributeType.</p>\n<p>(using forEach for all these loops).Below is the current code implementation :</p>\n<pre><code>import java.time.ZoneOffset;\nimport java.time.ZonedDateTime;\nimport java.time.format.DateTimeFormatter;\nimport java.time.temporal.ChronoUnit;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Locale;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.http.HttpEntity;\nimport org.springframework.http.HttpHeaders;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.stereotype.Service;\nimport org.springframework.web.client.RestTemplate;\n\n@Service\npublic class ServiceImpl {\n\n    private RestTemplate template;\n\n    public ServiceImpl(RestTemplate template) {\n        this.template = template;\n    }\n\n    public void saveProductsInFlex(List&lt;BulkEditRequest&gt; attributesByProd) {\n\n        for (BulkEditRequest singleProduct : attributesByProd) {\n            String prodNum = singleProduct.getProductNum();\n\n            List&lt;AttributesResponse&gt; attributeList = new ArrayList&lt;AttributesResponse&gt;(\n                    singleProduct.getAttributeList().values());\n\n            for (AttributesResponse attribute : attributeList) {\n\n                if (&quot;Price&quot;.equalsIgnoreCase(attribute.getAttributeType())) {\n\n                    setProductPrice(singleProduct, attribute);\n\n                } else if (&quot;Identifier&quot;.equalsIgnoreCase(attribute.getAttributeType())) {\n\n                    setProductIdentifier(singleProduct, attribute);\n\n                } else if (&quot;Attribute&quot;.equalsIgnoreCase(attribute.getAttributeType())) {\n\n                    setProductAttribute(singleProduct, attribute);\n\n                }\n\n            }\n\n        }\n\n    }\n\n    private void setProductPrice(BulkEditRequest singleProduct, AttributesResponse attributeResponse) {\n        HttpEntity&lt;UploadEntity&gt; flexEntity = null;\n        String uri = null;\n        int productId = 0;\n        String attribute = attributeResponse.getAttributeName();\n        if (singleProduct != null) {\n            uri = Constants.BASEURL + singleProduct.getProductNum() + Constants.PRICES;\n            productId = Integer.parseInt(singleProduct.getProductNum());\n\n        }\n        try {\n            UploadEntity entity = new UploadEntity();\n            entity.setPrice(attributeResponse.getAttributeValue());\n            entity.setUomID(1);\n            entity.setCountryCode(&quot;US&quot;);\n            flexEntity = new HttpEntity&lt;&gt;(entity);\n            ResponseEntity&lt;String&gt; response = template.postForEntity(uri, flexEntity, String.class);\n\n        } catch (Exception e) {\n\n        }\n\n    }\n\n    private void setProductAttribute(BulkEditRequest singleProduct, AttributesResponse attributeResponse) {\n        HttpEntity&lt;UploadEntity&gt; flexEntity = null;\n        String attribute = attributeResponse.getAttributeName();\n        String uri = null;\n        int productId = 0;\n        if (singleProduct != null) {\n            uri = Constants.BASEURL + singleProduct.getProductNum() + Constants.ATTRIBUTES;\n            productId = Integer.parseInt(singleProduct.getProductNum());\n        }\n        try {\n\n            UploadEntity entity = new UploadEntity();\n\n            entity.setAttributeId(attributeResponse.getAttributeId());\n            flexEntity = new HttpEntity&lt;&gt;(entity);\n            ResponseEntity&lt;String&gt; response = template.postForEntity(uri, flexEntity, String.class);\n\n        } catch (Exception e) {\n\n        }\n\n    }\n\n    private void setProductIdentifier(BulkEditRequest singleProduct, AttributesResponse attributeResponse) {\n        HttpEntity&lt;UploadEntity&gt; flexEntity = null;\n        String attribute = attributeResponse.getAttributeName();\n        String uri = null;\n        int productId = 0;\n        if (singleProduct != null) {\n            uri = Constants.BASEURL + singleProduct.getProductNum() + Constants.IDENTIFIERS;\n            productId = Integer.parseInt(singleProduct.getProductNum());\n        }\n\n        try {\n            UploadEntity entity = new UploadEntity();\n            entity.setProductIdentifier(attributeResponse.getAttributeValue());\n            flexEntity = new HttpEntity&lt;&gt;(entity);\n            ResponseEntity&lt;String&gt; response = template.postForEntity(uri, flexEntity, String.class);\n\n        } catch (Exception e) {\n\n        }\n\n    }\n\n}\n</code></pre>\n<p>The UploadEntity class looks like :</p>\n<pre><code>import lombok.AllArgsConstructor;\nimport lombok.Getter;\nimport lombok.NoArgsConstructor;\nimport lombok.Setter;\n\n@Getter\n@Setter\n@AllArgsConstructor\n@NoArgsConstructor\npublic class UploadEntity {\n\n\n    //Price\n    private String price;\n\n    private String countryCode;\n    private String uomID;\n\n    \n\n    //Identifier\n\n    private String productIdentifier;\n\n    \n    //Attribute\n\n    private String attributeId;\n\n\n}\n</code></pre>\n<p>This implementation takes a lot of time (considering 1 product has minimum of 50 attributes). Any suggestions on how I can make it concurrent would be really helpful.</p>\n"},{"tags":["java","hibernate","transactions","mariadb","pessimistic-locking"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1694061811,"post_id":77056589,"comment_id":135842284,"body_markdown":"Best course of action would be to print out the SQL statements generated by Hibernate to see what kind of locking instructions it&#39;s sending, e.g. is it doing a `SELECT ... FOR UPDATE` or locking full tables or what.","body":"Best course of action would be to print out the SQL statements generated by Hibernate to see what kind of locking instructions it&#39;s sending, e.g. is it doing a <code>SELECT ... FOR UPDATE</code> or locking full tables or what."}],"owner":{"account_id":11677965,"reputation":95,"user_id":8617930,"display_name":"vipul jadhav"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":287,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694061639,"creation_date":1694060248,"question_id":77056589,"body_markdown":"**Flow**\r\n\r\n    //Service Class A\r\n    @Transactional\r\n    mainMethod() {\r\n    \r\n    \t// some business logic\r\n    \tmethodA()\r\n    \t..\r\n    }\r\n    \r\n    // Component class helperA\r\n    @Transactional(propagation = Propagation.REQUIRES_NEW)\r\n    methodA() {\r\n    \r\n    \t// some business logic\r\n    \taddLogMethod()\r\n    }\r\n    \r\n    // Component class helperLog\r\n    addLogMethod(){\r\n    \t// create the log entity\r\n    \trepo.save(entity)\r\n    }\r\n\r\n**Issue:** \r\n\r\nThe &quot;org.hibernate.PessimisticLockException: could not execute statement&quot; error is encountered when the addLogMethod is executed. This exception is thrown at the point where the repo.save(entity) method is called. The root cause of this error lies in pessimistic locking that is imposed by a outer transaction, which is currently suspended due to the initiation of a inner transaction.\r\n\r\n**Analysis**\r\n\r\nInterestingly, the log entity being saved as part of the addLogMethod does not belong to the outer transaction. However, there is a foreign key relationship between this entity and the table that is indeed associated with the outer transaction. This linkage between the foreign key and the tables from the outer transaction seems to be preventing the latest transaction from gaining control over those tables.\r\n\r\nI verified the inner transaction can read the data from the table, which is locked as part of an outer transaction, but not sure what is happening at the time of saving the log entity, which is not used in an outer transaction. if it was **Pessimistic.WRITE** lock then read operation shouldn&#39;t be allowed\r\n\r\n**Solutions**: There is a solution to address this issue. \r\nOne approach involves executing all the operations in a single transaction, effectively eliminating the problem. \r\n\r\nHowever, **I am very much curious about the reason for the issue, and what type of lock is acquired by the outer transaction which prevents adding a new entry in the log table which is associated with foreign key constraints to the locked table ?**.\r\n\r\n\r\n**Stack trace:**\r\n\r\n    org.springframework.dao.PessimisticLockingFailureException: could not execute statement; SQL [n/a]; nested exception is org.hibernate.PessimisticLockException: could not execute statement\r\n    \tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:271)\r\n    \tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n    \tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n    \tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n    \tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n    \tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n    \tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n    \tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    \tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)\r\n    \tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)\r\n    \tat x.y.z.helper.HelperLog$$EnhancerBySpringCGLIB$$27f1ebf.save(&lt;generated&gt;)\r\n    \tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\r\n    \tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:783)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n    \tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)\r\n    \tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n    \tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n    \tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    \tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)\r\n    \tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)\r\n    \tat x.y.z.helper.helperA$$EnhancerBySpringCGLIB$$ffab9091.addLogMethod(&lt;generated&gt;)\r\n    \tat x.y.z.service.A(mainMethod.java:98)\r\n    \tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\r\n    \tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:783)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n    \tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)\r\n    \tat org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:61)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    \tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)\r\n    \tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)\r\n    \tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:584)\r\n    \tat org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:799)\r\n    \tat org.eclipse.jetty.servlet.ServletHandler$ChainEnd.doFilter(ServletHandler.java:1631)\r\n    \tat org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter.doFilter(WebSocketUpgradeFilter.java:230)\r\n    \tat org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\r\n    \tat org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1601)\r\n    \tat org.springframework.web.filter.AbstractRequestLoggingFilter.doFilterInternal(AbstractRequestLoggingFilter.java:289)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n    \tat org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\r\n    \tat org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1601)\r\n    \tat org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\r\n    \tat org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1601)\r\n    \tat org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\r\n    \tat org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1601)\r\n    \tat io.sentry.spring.SentryUserFilter.doFilterInternal(SentryUserFilter.java:56)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n    \tat org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\r\n    \tat org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1601)\r\n    \tat dev.akkinoc.spring.boot.logback.access.security.LogbackAccessSecurityServletFilter.doFilter(LogbackAccessSecurityServletFilter.kt:17)\r\n    \tat org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\r\n    \tat org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1601)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n    \tat org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\r\n    \tat org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1601)\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)\r\n    \tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)\r\n    \tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    \tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)\r\n    \tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    \tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)\r\n    \tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    \tat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    \tat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    \tat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    \tat org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter.doFilter(OAuth2AuthenticationProcessingFilter.java:176)\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    \tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)\r\n    \tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    \tat org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)\r\n    \tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    \tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)\r\n    \tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    \tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    \tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)\r\n    \tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)\r\n    \tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)\r\n    \tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)\r\n    \tat org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\r\n    \tat org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1601)\r\n    \tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n    \tat org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\r\n    \tat org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1601)\r\n    \tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n    \tat org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\r\n    \tat org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1601)\r\n    \tat org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n    \tat org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\r\n    \tat org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1601)\r\n    \tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n    \tat org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\r\n    \tat org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1601)\r\n    \tat org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\r\n    \tat org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1601)\r\n    \tat io.sentry.spring.SentrySpringFilter.doFilterInternal(SentrySpringFilter.java:76)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n    \tat org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\r\n    \tat org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1601)\r\n    \tat org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:548)\r\n    \tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)\r\n    \tat org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:600)\r\n    \tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)\r\n    \tat org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:235)\r\n    \tat org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1624)\r\n    \tat org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:233)\r\n    \tat org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1440)\r\n    \tat org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:188)\r\n    \tat org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:501)\r\n    \tat org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1594)\r\n    \tat org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:186)\r\n    \tat org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1355)\r\n    \tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\r\n    \tat org.eclipse.jetty.server.handler.RequestLogHandler.handle(RequestLogHandler.java:54)\r\n    \tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)\r\n    \tat org.eclipse.jetty.server.Server.handle(Server.java:516)\r\n    \tat org.eclipse.jetty.server.HttpChannel.lambda$handle$1(HttpChannel.java:487)\r\n    \tat org.eclipse.jetty.server.HttpChannel.dispatch(HttpChannel.java:732)\r\n    \tat org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:479)\r\n    \tat org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:277)\r\n    \tat org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:311)\r\n    \tat org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:105)\r\n    \tat org.eclipse.jetty.io.ChannelEndPoint$1.run(ChannelEndPoint.java:104)\r\n    \tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:883)\r\n    \tat org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:1034)\r\n    \tat java.base/java.lang.Thread.run(Thread.java:834)\r\n    Caused by: org.hibernate.PessimisticLockException: could not execute statement\r\n    \tat org.hibernate.dialect.MySQLDialect$3.convert(MySQLDialect.java:547)\r\n    \tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:37)\r\n    \tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)\r\n    \tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)\r\n    \tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n    \tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:46)\r\n    \tat org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:3571)\r\n    \tat org.hibernate.persister.entity.AbstractEntityPersister.updateOrInsert(AbstractEntityPersister.java:3438)\r\n    \tat org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:3852)\r\n    \tat org.hibernate.action.internal.EntityUpdateAction.execute(EntityUpdateAction.java:201)\r\n    \tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)\r\n    \tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)\r\n    \tat java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:684)\r\n    \tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)\r\n    \tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344)\r\n    \tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)\r\n    \tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n    \tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1402)\r\n    \tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:493)\r\n    \tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3285)\r\n    \tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2420)\r\n    \tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449)\r\n    \tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n    \tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)\r\n    \tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n    \tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n    \tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n    \t... 161 common frames omitted\r\n    Caused by: java.sql.SQLTransientConnectionException: (conn=82554) Lock wait timeout exceeded; try restarting transaction\r\n    \tat org.mariadb.jdbc.internal.util.exceptions.ExceptionFactory.createException(ExceptionFactory.java:79)\r\n    \tat org.mariadb.jdbc.internal.util.exceptions.ExceptionFactory.create(ExceptionFactory.java:158)\r\n    \tat org.mariadb.jdbc.MariaDbStatement.executeExceptionEpilogue(MariaDbStatement.java:266)\r\n    \tat org.mariadb.jdbc.ClientSidePreparedStatement.executeInternal(ClientSidePreparedStatement.java:229)\r\n    \tat org.mariadb.jdbc.ClientSidePreparedStatement.execute(ClientSidePreparedStatement.java:149)\r\n    \tat org.mariadb.jdbc.ClientSidePreparedStatement.executeUpdate(ClientSidePreparedStatement.java:181)\r\n    \tat com.p6spy.engine.wrapper.PreparedStatementWrapper.executeUpdate(PreparedStatementWrapper.java:94)\r\n    \tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n    \tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n    \tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n    \t... 183 common frames omitted\r\n    Caused by: org.mariadb.jdbc.internal.util.exceptions.MariaDbSqlException: Lock wait timeout exceeded; try restarting transaction\r\n    \tat org.mariadb.jdbc.internal.util.exceptions.MariaDbSqlException.of(MariaDbSqlException.java:34)\r\n    \tat org.mariadb.jdbc.internal.protocol.AbstractQueryProtocol.exceptionWithQuery(AbstractQueryProtocol.java:194)\r\n    \tat org.mariadb.jdbc.internal.protocol.AbstractQueryProtocol.exceptionWithQuery(AbstractQueryProtocol.java:177)\r\n    \tat org.mariadb.jdbc.internal.protocol.AbstractQueryProtocol.executeQuery(AbstractQueryProtocol.java:321)\r\n    \tat org.mariadb.jdbc.ClientSidePreparedStatement.executeInternal(ClientSidePreparedStatement.java:220)\r\n    \t... 189 common frames omitted\r\n    Caused by: java.sql.SQLException: Lock wait timeout exceeded; try restarting transaction\r\n    \tat org.mariadb.jdbc.internal.protocol.AbstractQueryProtocol.readErrorPacket(AbstractQueryProtocol.java:1695)\r\n    \tat org.mariadb.jdbc.internal.protocol.AbstractQueryProtocol.readPacket(AbstractQueryProtocol.java:1557)\r\n    \tat org.mariadb.jdbc.internal.protocol.AbstractQueryProtocol.getResult(AbstractQueryProtocol.java:1520)\r\n    \tat org.mariadb.jdbc.internal.protocol.AbstractQueryProtocol.executeQuery(AbstractQueryProtocol.java:318)\r\n    \t... 190 common frames omitted\r\n\r\n\r\n","title":"Getting &quot;org.hibernate.PessimisticLockException: could not execute statement&quot;","body":"<p><strong>Flow</strong></p>\n<pre><code>//Service Class A\n@Transactional\nmainMethod() {\n\n    // some business logic\n    methodA()\n    ..\n}\n\n// Component class helperA\n@Transactional(propagation = Propagation.REQUIRES_NEW)\nmethodA() {\n\n    // some business logic\n    addLogMethod()\n}\n\n// Component class helperLog\naddLogMethod(){\n    // create the log entity\n    repo.save(entity)\n}\n</code></pre>\n<p><strong>Issue:</strong></p>\n<p>The &quot;org.hibernate.PessimisticLockException: could not execute statement&quot; error is encountered when the addLogMethod is executed. This exception is thrown at the point where the repo.save(entity) method is called. The root cause of this error lies in pessimistic locking that is imposed by a outer transaction, which is currently suspended due to the initiation of a inner transaction.</p>\n<p><strong>Analysis</strong></p>\n<p>Interestingly, the log entity being saved as part of the addLogMethod does not belong to the outer transaction. However, there is a foreign key relationship between this entity and the table that is indeed associated with the outer transaction. This linkage between the foreign key and the tables from the outer transaction seems to be preventing the latest transaction from gaining control over those tables.</p>\n<p>I verified the inner transaction can read the data from the table, which is locked as part of an outer transaction, but not sure what is happening at the time of saving the log entity, which is not used in an outer transaction. if it was <strong>Pessimistic.WRITE</strong> lock then read operation shouldn't be allowed</p>\n<p><strong>Solutions</strong>: There is a solution to address this issue.\nOne approach involves executing all the operations in a single transaction, effectively eliminating the problem.</p>\n<p>However, <strong>I am very much curious about the reason for the issue, and what type of lock is acquired by the outer transaction which prevents adding a new entry in the log table which is associated with foreign key constraints to the locked table ?</strong>.</p>\n<p><strong>Stack trace:</strong></p>\n<pre><code>org.springframework.dao.PessimisticLockingFailureException: could not execute statement; SQL [n/a]; nested exception is org.hibernate.PessimisticLockException: could not execute statement\n    at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:271)\n    at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\n    at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\n    at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\n    at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)\n    at x.y.z.helper.HelperLog$$EnhancerBySpringCGLIB$$27f1ebf.save(&lt;generated&gt;)\n    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:783)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)\n    at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)\n    at x.y.z.helper.helperA$$EnhancerBySpringCGLIB$$ffab9091.addLogMethod(&lt;generated&gt;)\n    at x.y.z.service.A(mainMethod.java:98)\n    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:783)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)\n    at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:61)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:584)\n    at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:799)\n    at org.eclipse.jetty.servlet.ServletHandler$ChainEnd.doFilter(ServletHandler.java:1631)\n    at org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter.doFilter(WebSocketUpgradeFilter.java:230)\n    at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\n    at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1601)\n    at org.springframework.web.filter.AbstractRequestLoggingFilter.doFilterInternal(AbstractRequestLoggingFilter.java:289)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\n    at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1601)\n    at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\n    at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1601)\n    at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\n    at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1601)\n    at io.sentry.spring.SentryUserFilter.doFilterInternal(SentryUserFilter.java:56)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\n    at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1601)\n    at dev.akkinoc.spring.boot.logback.access.security.LogbackAccessSecurityServletFilter.doFilter(LogbackAccessSecurityServletFilter.kt:17)\n    at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\n    at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1601)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\n    at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1601)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter.doFilter(OAuth2AuthenticationProcessingFilter.java:176)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)\n    at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\n    at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1601)\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\n    at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1601)\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\n    at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1601)\n    at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\n    at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1601)\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\n    at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1601)\n    at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\n    at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1601)\n    at io.sentry.spring.SentrySpringFilter.doFilterInternal(SentrySpringFilter.java:76)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\n    at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1601)\n    at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:548)\n    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)\n    at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:600)\n    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)\n    at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:235)\n    at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1624)\n    at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:233)\n    at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1440)\n    at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:188)\n    at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:501)\n    at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1594)\n    at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:186)\n    at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1355)\n    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\n    at org.eclipse.jetty.server.handler.RequestLogHandler.handle(RequestLogHandler.java:54)\n    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)\n    at org.eclipse.jetty.server.Server.handle(Server.java:516)\n    at org.eclipse.jetty.server.HttpChannel.lambda$handle$1(HttpChannel.java:487)\n    at org.eclipse.jetty.server.HttpChannel.dispatch(HttpChannel.java:732)\n    at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:479)\n    at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:277)\n    at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:311)\n    at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:105)\n    at org.eclipse.jetty.io.ChannelEndPoint$1.run(ChannelEndPoint.java:104)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:883)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:1034)\n    at java.base/java.lang.Thread.run(Thread.java:834)\nCaused by: org.hibernate.PessimisticLockException: could not execute statement\n    at org.hibernate.dialect.MySQLDialect$3.convert(MySQLDialect.java:547)\n    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:37)\n    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)\n    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)\n    at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\n    at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:46)\n    at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:3571)\n    at org.hibernate.persister.entity.AbstractEntityPersister.updateOrInsert(AbstractEntityPersister.java:3438)\n    at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:3852)\n    at org.hibernate.action.internal.EntityUpdateAction.execute(EntityUpdateAction.java:201)\n    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)\n    at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)\n    at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:684)\n    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)\n    at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344)\n    at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)\n    at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\n    at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1402)\n    at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:493)\n    at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3285)\n    at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2420)\n    at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449)\n    at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\n    at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)\n    at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\n    at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\n    at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\n    ... 161 common frames omitted\nCaused by: java.sql.SQLTransientConnectionException: (conn=82554) Lock wait timeout exceeded; try restarting transaction\n    at org.mariadb.jdbc.internal.util.exceptions.ExceptionFactory.createException(ExceptionFactory.java:79)\n    at org.mariadb.jdbc.internal.util.exceptions.ExceptionFactory.create(ExceptionFactory.java:158)\n    at org.mariadb.jdbc.MariaDbStatement.executeExceptionEpilogue(MariaDbStatement.java:266)\n    at org.mariadb.jdbc.ClientSidePreparedStatement.executeInternal(ClientSidePreparedStatement.java:229)\n    at org.mariadb.jdbc.ClientSidePreparedStatement.execute(ClientSidePreparedStatement.java:149)\n    at org.mariadb.jdbc.ClientSidePreparedStatement.executeUpdate(ClientSidePreparedStatement.java:181)\n    at com.p6spy.engine.wrapper.PreparedStatementWrapper.executeUpdate(PreparedStatementWrapper.java:94)\n    at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\n    at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\n    at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\n    ... 183 common frames omitted\nCaused by: org.mariadb.jdbc.internal.util.exceptions.MariaDbSqlException: Lock wait timeout exceeded; try restarting transaction\n    at org.mariadb.jdbc.internal.util.exceptions.MariaDbSqlException.of(MariaDbSqlException.java:34)\n    at org.mariadb.jdbc.internal.protocol.AbstractQueryProtocol.exceptionWithQuery(AbstractQueryProtocol.java:194)\n    at org.mariadb.jdbc.internal.protocol.AbstractQueryProtocol.exceptionWithQuery(AbstractQueryProtocol.java:177)\n    at org.mariadb.jdbc.internal.protocol.AbstractQueryProtocol.executeQuery(AbstractQueryProtocol.java:321)\n    at org.mariadb.jdbc.ClientSidePreparedStatement.executeInternal(ClientSidePreparedStatement.java:220)\n    ... 189 common frames omitted\nCaused by: java.sql.SQLException: Lock wait timeout exceeded; try restarting transaction\n    at org.mariadb.jdbc.internal.protocol.AbstractQueryProtocol.readErrorPacket(AbstractQueryProtocol.java:1695)\n    at org.mariadb.jdbc.internal.protocol.AbstractQueryProtocol.readPacket(AbstractQueryProtocol.java:1557)\n    at org.mariadb.jdbc.internal.protocol.AbstractQueryProtocol.getResult(AbstractQueryProtocol.java:1520)\n    at org.mariadb.jdbc.internal.protocol.AbstractQueryProtocol.executeQuery(AbstractQueryProtocol.java:318)\n    ... 190 common frames omitted\n</code></pre>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1694068581,"post_id":77056590,"comment_id":135843004,"body_markdown":"You cannot as it is used to validate properties which are processed very early in the process. It also doesn&#39;t seem right to use `EnableConfigurationProperties.VALIDATOR_BEAN_NAME` as the name as that will override the validation for all other properties as well. So not sure why you even added this one instead of just adding annotations to your configuration.","body":"You cannot as it is used to validate properties which are processed very early in the process. It also doesn&#39;t seem right to use <code>EnableConfigurationProperties.VALIDATOR_BEAN_NAME</code> as the name as that will override the validation for all other properties as well. So not sure why you even added this one instead of just adding annotations to your configuration."},{"owner":{"account_id":2786645,"reputation":577,"user_id":2397966,"display_name":"Rostislav Krasny"},"score":0,"creation_date":1694075285,"post_id":77056590,"comment_id":135844302,"body_markdown":"Just adding a Spring Bean that implements the `Validator` interface doesn&#39;t work. I have to name it as defined in the `EnableConfigurationProperties.VALIDATOR_BEAN_NAME`, i.e. as `configurationPropertiesValidator`. This is according to the Spring Boot documentation.","body":"Just adding a Spring Bean that implements the <code>Validator</code> interface doesn&#39;t work. I have to name it as defined in the <code>EnableConfigurationProperties.VALIDATOR_BEAN_NAME</code>, i.e. as <code>configurationPropertiesValidator</code>. This is according to the Spring Boot documentation."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1694075989,"post_id":77056590,"comment_id":135844445,"body_markdown":"Still feels weird you should be able to just add validation anotation without a specific implementation of a validator. But alas. Regardless of that this bean will never be eligble for post processing because, as mentioned, this is loaded and constructed very very early in the process.","body":"Still feels weird you should be able to just add validation anotation without a specific implementation of a validator. But alas. Regardless of that this bean will never be eligble for post processing because, as mentioned, this is loaded and constructed very very early in the process."},{"owner":{"account_id":2786645,"reputation":577,"user_id":2397966,"display_name":"Rostislav Krasny"},"score":0,"creation_date":1694109524,"post_id":77056590,"comment_id":135851548,"body_markdown":"Nothing weird. Just `@Validated` annotation under the `AppProperties` enables only standard validations, defined by other annotations like `@NotBlank`, `@Size(min = 1)`, etc. In case of any custom validation you&#39;ve to implement and define your own `configurationPropertiesValidator` Spring Bean.","body":"Nothing weird. Just <code>@Validated</code> annotation under the <code>AppProperties</code> enables only standard validations, defined by other annotations like <code>@NotBlank</code>, <code>@Size(min = 1)</code>, etc. In case of any custom validation you&#39;ve to implement and define your own <code>configurationPropertiesValidator</code> Spring Bean."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1694156294,"post_id":77056590,"comment_id":135856849,"body_markdown":"You can just implement a JSR303 class validator for that as well without doing this specific validator.","body":"You can just implement a JSR303 class validator for that as well without doing this specific validator."}],"owner":{"account_id":2786645,"reputation":577,"user_id":2397966,"display_name":"Rostislav Krasny"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694060313,"creation_date":1694060313,"question_id":77056590,"body_markdown":"I have a record like the following one bind to my `application.yml` file by the `@EnableConfigurationProperties({AppProperties.class})` annotation in the main class.\r\n```java\r\n@Validated\r\n@ConfigurationProperties(&quot;converter&quot;)\r\npublic record AppProperties(/* properties */) {\r\n\r\n    public record TableConfig(/* properties */) {\r\n        //\r\n    }\r\n}\r\n```\r\nI also have a validator of the above properties that looks like this one:\r\n```\r\n@Component(EnableConfigurationProperties.VALIDATOR_BEAN_NAME)\r\npublic class AppPropertiesValidator implements Validator {\r\n    // code skipped\r\n}\r\n```\r\nWhen I run my Spring Boot application I see a warning like this:\r\n```\r\n2023-09-07T06:54:55.191+03:00  INFO 328 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean &#39;configurationPropertiesValidator&#39; of type [x.x.x.config.AppPropertiesValidator] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\r\n```\r\nHow to fix it? I&#39;ve read [**this**](https://www.baeldung.com/spring-not-eligible-for-auto-proxying) article but can&#39;t figure out how this issue could be fixed in my case. Adding the `@Lazy` annotation into either the `AppProperties` or the `AppPropertiesValidator` doesn&#39;t help.\r\n\r\nP.S. Spring Boot 3.1.3 and Java 17.","title":"Configuration properties bean is not eligible for getting processed by all BeanPostProcessors","body":"<p>I have a record like the following one bind to my <code>application.yml</code> file by the <code>@EnableConfigurationProperties({AppProperties.class})</code> annotation in the main class.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Validated\n@ConfigurationProperties(&quot;converter&quot;)\npublic record AppProperties(/* properties */) {\n\n    public record TableConfig(/* properties */) {\n        //\n    }\n}\n</code></pre>\n<p>I also have a validator of the above properties that looks like this one:</p>\n<pre><code>@Component(EnableConfigurationProperties.VALIDATOR_BEAN_NAME)\npublic class AppPropertiesValidator implements Validator {\n    // code skipped\n}\n</code></pre>\n<p>When I run my Spring Boot application I see a warning like this:</p>\n<pre><code>2023-09-07T06:54:55.191+03:00  INFO 328 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'configurationPropertiesValidator' of type [x.x.x.config.AppPropertiesValidator] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\n</code></pre>\n<p>How to fix it? I've read <a href=\"https://www.baeldung.com/spring-not-eligible-for-auto-proxying\" rel=\"nofollow noreferrer\"><strong>this</strong></a> article but can't figure out how this issue could be fixed in my case. Adding the <code>@Lazy</code> annotation into either the <code>AppProperties</code> or the <code>AppPropertiesValidator</code> doesn't help.</p>\n<p>P.S. Spring Boot 3.1.3 and Java 17.</p>\n"},{"tags":["java","spring","authentication","spring-security","oauth"],"answers":[{"comments":[{"owner":{"account_id":1855690,"reputation":985,"user_id":1681329,"accept_rate":67,"display_name":"Denis Wang"},"score":1,"creation_date":1477488282,"post_id":40255253,"comment_id":67787393,"body_markdown":"As the log implied the Spring Security chain has been in effective all the time.  And the change triggered: java.lang.IllegalStateException: Cannot initialize context because there is already a root application context present - check whether you have multiple ContextLoader* definitions in your web.xml!","body":"As the log implied the Spring Security chain has been in effective all the time.  And the change triggered: java.lang.IllegalStateException: Cannot initialize context because there is already a root application context present - check whether you have multiple ContextLoader* definitions in your web.xml!"}],"tags":[],"owner":{"account_id":178596,"reputation":10817,"user_id":410677,"accept_rate":78,"display_name":"kuhajeyan"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1477463599,"creation_date":1477463599,"answer_id":40255253,"question_id":40249306,"body_markdown":"Probably is that you might have not add spring security filter chain to intercept all requests\r\n\r\n    import org.springframework.security.web.context.*;\r\n    \r\n    public class SecurityWebApplicationInitializer\r\n    \textends AbstractSecurityWebApplicationInitializer {\r\n    \r\n    \tpublic SecurityWebApplicationInitializer() {\r\n    \t\tsuper(SecurityConfig.class);\r\n    \t}\r\n    }\r\n\r\n\r\n\r\nhttp://docs.spring.io/spring-security/site/docs/current/reference/html/jc.html#abstractsecuritywebapplicationinitializer-without-existing-spring\r\n","title":"Spring Security: saved SecurityContext got a Null authentication","body":"<p>Probably is that you might have not add spring security filter chain to intercept all requests</p>\n\n<pre><code>import org.springframework.security.web.context.*;\n\npublic class SecurityWebApplicationInitializer\n    extends AbstractSecurityWebApplicationInitializer {\n\n    public SecurityWebApplicationInitializer() {\n        super(SecurityConfig.class);\n    }\n}\n</code></pre>\n\n<p><a href=\"http://docs.spring.io/spring-security/site/docs/current/reference/html/jc.html#abstractsecuritywebapplicationinitializer-without-existing-spring\" rel=\"nofollow\">http://docs.spring.io/spring-security/site/docs/current/reference/html/jc.html#abstractsecuritywebapplicationinitializer-without-existing-spring</a></p>\n"},{"tags":[],"owner":{"account_id":1855690,"reputation":985,"user_id":1681329,"accept_rate":67,"display_name":"Denis Wang"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1477495169,"creation_date":1477495169,"answer_id":40266117,"question_id":40249306,"body_markdown":"When I debugged into the Spring Security Oauth code, OAuthProviderProcessingFilter, I found that the context will always reset by the previousAuthentication. I am not sure what the purpose is there and this is the root reason of my lose of authentication. \r\n\r\nThe following code to override the default behavior fixed the problem.\r\n\r\n\tpublic class MyOauthProcessingFilter extends ProtectedResourceProcessingFilter {\r\n\r\n\t\t@Override\r\n\t\tprotected void resetPreviousAuthentication(Authentication previousAuthentication) {\r\n\t\t\tAuthentication auth = SecurityContextHolder.getContext().getAuthentication();\r\n\t\t\tif (null != auth &amp;&amp; null != auth.getPrincipal() ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tsuper.resetPreviousAuthentication(previousAuthentication);\r\n\t\t}\r\n\r\n\t}\r\n","title":"Spring Security: saved SecurityContext got a Null authentication","body":"<p>When I debugged into the Spring Security Oauth code, OAuthProviderProcessingFilter, I found that the context will always reset by the previousAuthentication. I am not sure what the purpose is there and this is the root reason of my lose of authentication. </p>\n\n<p>The following code to override the default behavior fixed the problem.</p>\n\n<pre><code>public class MyOauthProcessingFilter extends ProtectedResourceProcessingFilter {\n\n    @Override\n    protected void resetPreviousAuthentication(Authentication previousAuthentication) {\n        Authentication auth = SecurityContextHolder.getContext().getAuthentication();\n        if (null != auth &amp;&amp; null != auth.getPrincipal() ) {\n            return;\n        }\n        super.resetPreviousAuthentication(previousAuthentication);\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7137920,"reputation":1714,"user_id":5456789,"display_name":"Amir Azizkhani"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639288667,"creation_date":1639288667,"answer_id":70321288,"question_id":40249306,"body_markdown":"you can change priority of your filters calling.\r\n\r\n    protected void configureOAuth(HttpSecurity http) throws Exception {\r\n        http\r\n                .csrf()\r\n                .disable();\r\n        http\r\n                .addFilterAfter(oauthFilter(), BasicAuthenticationFilter.class)\r\n                .authorizeRequests()\r\n                .antMatchers(&quot;/ssoep.lti.do*&quot;).authenticated();\r\n    \r\n        http.addFilterAfter(YOUR_FILTER, SecurityContextPersistenceFilter.class);\r\n    }\r\n\r\nbecause `SecurityContextPersistenceFilter` reset context and authenticated user is clear from context.\r\n","title":"Spring Security: saved SecurityContext got a Null authentication","body":"<p>you can change priority of your filters calling.</p>\n<pre><code>protected void configureOAuth(HttpSecurity http) throws Exception {\n    http\n            .csrf()\n            .disable();\n    http\n            .addFilterAfter(oauthFilter(), BasicAuthenticationFilter.class)\n            .authorizeRequests()\n            .antMatchers(&quot;/ssoep.lti.do*&quot;).authenticated();\n\n    http.addFilterAfter(YOUR_FILTER, SecurityContextPersistenceFilter.class);\n}\n</code></pre>\n<p>because <code>SecurityContextPersistenceFilter</code> reset context and authenticated user is clear from context.</p>\n"}],"owner":{"account_id":1855690,"reputation":985,"user_id":1681329,"accept_rate":67,"display_name":"Denis Wang"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8564,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":3,"score":4,"last_activity_date":1694059736,"creation_date":1477427968,"question_id":40249306,"body_markdown":"I am using Spring Security Oauth1.0a to authenticate requests. It&#39;s expected that once a user is authenticated, s/he will gain the privileges to explore around in a website. The authenticated user&#39;s very first landing page include some js and img&#39;s. Weird enough that during the loading of those tiny pieces, some files are loaded successfully with the right authentication. But split of milliseconds later, other tiny pieces will fail to load due to null authentication. Note that, I have my servlet context/session/attribute listeners turned on. No changes were detected. \r\n\r\n    10/24&#39;16 13:44:23&gt; DEBUG [org.springframework.security.web.context.HttpSessionSecurityContextRepository] SecurityContext &#39;org.springframework.security.core.context.SecurityContextImpl@3f8eaa51: Authentication: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@3f8eaa51: Principal: com.my.connected.spring.User@148c0257; Credentials: [PROTECTED]; Authenticated: true; Details: null; Granted Authorities: TEACHER&#39; stored to HttpSession: &#39;org.apache.catalina.session.StandardSessionFacade@f3abb79 (CLIENT_IP=|USER_ID=|INV_ID=) (http-nio-443-exec-11) [1256269]\r\nUntil now security Context populated in the session as expected. My customized context/session/attribute level listeners detected no changes thereafter. All debug level logs are printed out below.\r\n\r\n    10/24&#39;16 13:44:23&gt; DEBUG [org.springframework.security.web.access.ExceptionTranslationFilter] Chain processed normally (CLIENT_IP=|USER_ID=|INV_ID=) (http-nio-443-exec-11) [1256269]\r\n    10/24&#39;16 13:44:23&gt; DEBUG [org.springframework.security.web.context.SecurityContextPersistenceFilter] SecurityContextHolder now cleared, as request processing completed (CLIENT_IP=|USER_ID=|INV_ID=) (http-nio-443-exec-11) [1256269]\r\n    10/24&#39;16 13:44:23&gt; DEBUG [org.springframework.security.web.FilterChainProxy] /home.png at position 1 of 15 in additional filter chain; firing Filter: &#39;MetadataGeneratorFilter&#39; (CLIENT_IP=|USER_ID=|INV_ID=) (http-nio-443-exec-4) [1256274]\r\n    10/24&#39;16 13:44:23&gt; DEBUG [org.springframework.security.web.FilterChainProxy] /home.png at position 2 of 15 in additional filter chain; firing Filter: &#39;WebAsyncManagerIntegrationFilter&#39; (CLIENT_IP=|USER_ID=|INV_ID=) (http-nio-443-exec-4) [1256274]\r\n    10/24&#39;16 13:44:23&gt; DEBUG [org.springframework.security.web.FilterChainProxy] /home.png at position 3 of 15 in additional filter chain; firing Filter: &#39;SecurityContextPersistenceFilter&#39; (CLIENT_IP=|USER_ID=|INV_ID=) (http-nio-443-exec-4) [1256274]\r\n    10/24&#39;16 13:46:37&gt; DEBUG [org.springframework.security.web.context.HttpSessionSecurityContextRepository] Obtained a valid SecurityContext from SPRING_SECURITY_CONTEXT: &#39;org.springframework.security.core.context.SecurityContextImpl@ffffffff: Null authentication&#39; (CLIENT_IP=|USER_ID=|INV_ID=) (http-nio-443-exec-4) [1391041]\r\n\r\nHowever, debug and log both show a new null authentication for the session attribute SPRING_SECURITY_CONTEXT. The context itself is not null. \r\n\r\nMore coding details: \r\n\r\n    //the controller method\r\n    @RequestMapping(value = {&quot;/ssoep.lti.do&quot;}, method = {RequestMethod.GET, RequestMethod.POST})\r\n    public void ltiEndpoint(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException, SSOValidationException{\r\n        request.getRequestDispatcher(&quot;/&quot;).forward(request, response);\r\n    }\r\n    \r\n    //the configuration class\r\n    @EnableWebSecurity\r\n    @Configuration\r\n    public class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n    \r\n    protected void configureOAuth(HttpSecurity http) throws Exception {\r\n        http\r\n                .csrf()\r\n                .disable();\r\n        http\r\n                .addFilterAfter(oauthFilter(), BasicAuthenticationFilter.class)\r\n                .authorizeRequests()\r\n                .antMatchers(&quot;/ssoep.lti.do*&quot;).authenticated();\r\n    }\r\n    \r\n    @Bean\r\n    public ProtectedResourceProcessingFilter oauthFilter() {\r\n        ProtectedResourceProcessingFilter result = new MheOauthProcessingFilter();\r\n        result.setAuthHandler(mheUserOauthAuthenticationHandler);\r\n        result.setConsumerDetailsService(mheOauthConsumerDetailsService);\r\n        return result;\r\n    }\r\n    }\r\n\r\nI am using the following pom versions. \r\n\r\n    &lt;spring.version&gt;4.3.2.RELEASE&lt;/spring.version&gt;\r\n    &lt;spring.boot.version&gt;1.4.0.RELEASE&lt;/spring.boot.version&gt;\r\n    &lt;spring.security.version&gt;4.1.1.RELEASE&lt;/spring.security.version&gt;\r\n    &lt;spring.security.oauth.version&gt;2.0.11.RELEASE&lt;/spring.security.oauth.version&gt;\r\n    &lt;spring.security.saml2&gt;1.0.2.RELEASE&lt;/spring.security.saml2&gt;\r\n","title":"Spring Security: saved SecurityContext got a Null authentication","body":"<p>I am using Spring Security Oauth1.0a to authenticate requests. It's expected that once a user is authenticated, s/he will gain the privileges to explore around in a website. The authenticated user's very first landing page include some js and img's. Weird enough that during the loading of those tiny pieces, some files are loaded successfully with the right authentication. But split of milliseconds later, other tiny pieces will fail to load due to null authentication. Note that, I have my servlet context/session/attribute listeners turned on. No changes were detected. </p>\n\n<pre><code>10/24'16 13:44:23&gt; DEBUG [org.springframework.security.web.context.HttpSessionSecurityContextRepository] SecurityContext 'org.springframework.security.core.context.SecurityContextImpl@3f8eaa51: Authentication: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@3f8eaa51: Principal: com.my.connected.spring.User@148c0257; Credentials: [PROTECTED]; Authenticated: true; Details: null; Granted Authorities: TEACHER' stored to HttpSession: 'org.apache.catalina.session.StandardSessionFacade@f3abb79 (CLIENT_IP=|USER_ID=|INV_ID=) (http-nio-443-exec-11) [1256269]\n</code></pre>\n\n<p>Until now security Context populated in the session as expected. My customized context/session/attribute level listeners detected no changes thereafter. All debug level logs are printed out below.</p>\n\n<pre><code>10/24'16 13:44:23&gt; DEBUG [org.springframework.security.web.access.ExceptionTranslationFilter] Chain processed normally (CLIENT_IP=|USER_ID=|INV_ID=) (http-nio-443-exec-11) [1256269]\n10/24'16 13:44:23&gt; DEBUG [org.springframework.security.web.context.SecurityContextPersistenceFilter] SecurityContextHolder now cleared, as request processing completed (CLIENT_IP=|USER_ID=|INV_ID=) (http-nio-443-exec-11) [1256269]\n10/24'16 13:44:23&gt; DEBUG [org.springframework.security.web.FilterChainProxy] /home.png at position 1 of 15 in additional filter chain; firing Filter: 'MetadataGeneratorFilter' (CLIENT_IP=|USER_ID=|INV_ID=) (http-nio-443-exec-4) [1256274]\n10/24'16 13:44:23&gt; DEBUG [org.springframework.security.web.FilterChainProxy] /home.png at position 2 of 15 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter' (CLIENT_IP=|USER_ID=|INV_ID=) (http-nio-443-exec-4) [1256274]\n10/24'16 13:44:23&gt; DEBUG [org.springframework.security.web.FilterChainProxy] /home.png at position 3 of 15 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter' (CLIENT_IP=|USER_ID=|INV_ID=) (http-nio-443-exec-4) [1256274]\n10/24'16 13:46:37&gt; DEBUG [org.springframework.security.web.context.HttpSessionSecurityContextRepository] Obtained a valid SecurityContext from SPRING_SECURITY_CONTEXT: 'org.springframework.security.core.context.SecurityContextImpl@ffffffff: Null authentication' (CLIENT_IP=|USER_ID=|INV_ID=) (http-nio-443-exec-4) [1391041]\n</code></pre>\n\n<p>However, debug and log both show a new null authentication for the session attribute SPRING_SECURITY_CONTEXT. The context itself is not null. </p>\n\n<p>More coding details: </p>\n\n<pre><code>//the controller method\n@RequestMapping(value = {\"/ssoep.lti.do\"}, method = {RequestMethod.GET, RequestMethod.POST})\npublic void ltiEndpoint(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException, SSOValidationException{\n    request.getRequestDispatcher(\"/\").forward(request, response);\n}\n\n//the configuration class\n@EnableWebSecurity\n@Configuration\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\nprotected void configureOAuth(HttpSecurity http) throws Exception {\n    http\n            .csrf()\n            .disable();\n    http\n            .addFilterAfter(oauthFilter(), BasicAuthenticationFilter.class)\n            .authorizeRequests()\n            .antMatchers(\"/ssoep.lti.do*\").authenticated();\n}\n\n@Bean\npublic ProtectedResourceProcessingFilter oauthFilter() {\n    ProtectedResourceProcessingFilter result = new MheOauthProcessingFilter();\n    result.setAuthHandler(mheUserOauthAuthenticationHandler);\n    result.setConsumerDetailsService(mheOauthConsumerDetailsService);\n    return result;\n}\n}\n</code></pre>\n\n<p>I am using the following pom versions. </p>\n\n<pre><code>&lt;spring.version&gt;4.3.2.RELEASE&lt;/spring.version&gt;\n&lt;spring.boot.version&gt;1.4.0.RELEASE&lt;/spring.boot.version&gt;\n&lt;spring.security.version&gt;4.1.1.RELEASE&lt;/spring.security.version&gt;\n&lt;spring.security.oauth.version&gt;2.0.11.RELEASE&lt;/spring.security.oauth.version&gt;\n&lt;spring.security.saml2&gt;1.0.2.RELEASE&lt;/spring.security.saml2&gt;\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-boot-actuator"],"owner":{"account_id":29384104,"reputation":11,"user_id":22513884,"display_name":"CarlosLaw"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1694059541,"creation_date":1694058634,"question_id":77056511,"body_markdown":"It is well known that &quot;/actuator/health&quot; executes all HealthIndicator implementations, as long as you add the @component annotation. But if &quot;/actuator/health&quot; is used in livenessProbe and readinessProbe , it&#39;s not appropriate, according to the rule, if I want &quot;/actuator/health/ readiness&quot; to execute my custom HealthIndicator after the ReadinessStateHealthIndicator, what should I do? I&#39;m very confused.\r\n\r\n\r\n\r\nI want &quot;/actuator/health/readiness&quot; to execute a bunch of my custom HealthIndicators after it executes the ReadinessStateHealthIndicator.","title":"How should I get &quot;/actuator/health/readiness&quot; to perform all custom metrics?","body":"<p>It is well known that &quot;/actuator/health&quot; executes all HealthIndicator implementations, as long as you add the @component annotation. But if &quot;/actuator/health&quot; is used in livenessProbe and readinessProbe , it's not appropriate, according to the rule, if I want &quot;/actuator/health/ readiness&quot; to execute my custom HealthIndicator after the ReadinessStateHealthIndicator, what should I do? I'm very confused.</p>\n<p>I want &quot;/actuator/health/readiness&quot; to execute a bunch of my custom HealthIndicators after it executes the ReadinessStateHealthIndicator.</p>\n"},{"tags":["java","spring","maven","maven-shade-plugin"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1694067823,"post_id":77056533,"comment_id":135842911,"body_markdown":"Just add that class to your project and it will be loaded before the one from the jar? No need to replace it.","body":"Just add that class to your project and it will be loaded before the one from the jar? No need to replace it."},{"owner":{"account_id":5752098,"reputation":866,"user_id":4541421,"accept_rate":83,"display_name":"Mateusz Stefaniak"},"score":0,"creation_date":1694080473,"post_id":77056533,"comment_id":135845370,"body_markdown":"It simply just not work, because this class is used by enother classes from that dependency and they&#39;re still using ole one despite having new in the project.","body":"It simply just not work, because this class is used by enother classes from that dependency and they&#39;re still using ole one despite having new in the project."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1694087707,"post_id":77056533,"comment_id":135846728,"body_markdown":"Did you place it in the same package as the actual class? Also why do you need a separate implementation of that class? Feels like that should be something that should be provided by the used library/framework itself.","body":"Did you place it in the same package as the actual class? Also why do you need a separate implementation of that class? Feels like that should be something that should be provided by the used library/framework itself."},{"owner":{"account_id":5752098,"reputation":866,"user_id":4541421,"accept_rate":83,"display_name":"Mateusz Stefaniak"},"score":0,"creation_date":1694133387,"post_id":77056533,"comment_id":135854816,"body_markdown":"Yes, it is placed in exactly same place. If it could be provided by lib itself there would be no problem. But it can not.","body":"Yes, it is placed in exactly same place. If it could be provided by lib itself there would be no problem. But it can not."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1694156502,"post_id":77056533,"comment_id":135856897,"body_markdown":"But then why use the lib? Feels like that you are using the lib in a way it wasn&#39;t designed to work. Could you specify the workaround and library in question, as there must be a better way. Overriding classes from a alibrary is generally not a good idea and will eventually lead to all sorts of weird issues. (Yes I now it will as I have on several occasions had to patch WebSphere like that, temporarily :( ).","body":"But then why use the lib? Feels like that you are using the lib in a way it wasn&#39;t designed to work. Could you specify the workaround and library in question, as there must be a better way. Overriding classes from a alibrary is generally not a good idea and will eventually lead to all sorts of weird issues. (Yes I now it will as I have on several occasions had to patch WebSphere like that, temporarily :( )."},{"owner":{"account_id":5752098,"reputation":866,"user_id":4541421,"accept_rate":83,"display_name":"Mateusz Stefaniak"},"score":0,"creation_date":1694472109,"post_id":77056533,"comment_id":135892778,"body_markdown":"The lib is huge and it has a bug in one of its classes.","body":"The lib is huge and it has a bug in one of its classes."}],"owner":{"account_id":5752098,"reputation":866,"user_id":4541421,"accept_rate":83,"display_name":"Mateusz Stefaniak"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694059231,"creation_date":1694059231,"question_id":77056533,"body_markdown":"I have project with Spring Boot. It uses Spring Boot Maven Plugin.\r\nI need to replace single class in one of my dependencies with my own implementation. I am struggling with it. I am running into cuch problems as no main class found, failed to get nested archive or invalid signature file digest.\r\n\r\nHere is my shade plugin config:\r\n```\r\n&lt;plugin&gt;\r\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;2.2.7.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n    &lt;configuration&gt;\r\n        &lt;keepDependenciesWithProvidedScope&gt;true&lt;/keepDependenciesWithProvidedScope&gt;\r\n        &lt;createDependencyReducedPom&gt;true&lt;/createDependencyReducedPom&gt;\r\n        &lt;filters&gt;\r\n            &lt;filter&gt;\r\n                &lt;artifact&gt;*:*&lt;/artifact&gt;\r\n                &lt;excludes&gt;\r\n                    &lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;\r\n                    &lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;\r\n                    &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\r\n                &lt;/excludes&gt;\r\n            &lt;/filter&gt;\r\n        &lt;/filters&gt;\r\n    &lt;/configuration&gt;\r\n    &lt;executions&gt;\r\n        &lt;execution&gt;\r\n            &lt;id&gt;shade&lt;/id&gt;\r\n            &lt;goals&gt;\r\n                &lt;goal&gt;shade&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n            &lt;phase&gt;package&lt;/phase&gt;\r\n            &lt;configuration&gt;\r\n                &lt;filters&gt;\r\n                    &lt;filter&gt;\r\n                        &lt;artifact&gt;dep-to-replace-class-in&lt;/artifact&gt;\r\n                        &lt;excludes&gt;\r\n                            &lt;exclude&gt;xyz/morecraft/dev/mcds/processor/ias/mq/MqConnectorBase.class&lt;/exclude&gt;\r\n                        &lt;/excludes&gt;\r\n                    &lt;/filter&gt;\r\n                &lt;/filters&gt;\r\n                &lt;transformers&gt;\r\n                    &lt;transformer\r\n                            implementation=&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;&gt;\r\n                        &lt;resource&gt;META-INF/spring.handlers&lt;/resource&gt;\r\n                    &lt;/transformer&gt;\r\n                    &lt;transformer\r\n                            implementation=&quot;org.springframework.boot.maven.PropertiesMergingResourceTransformer&quot;&gt;\r\n                        &lt;resource&gt;META-INF/spring.factories&lt;/resource&gt;\r\n                    &lt;/transformer&gt;\r\n                    &lt;transformer\r\n                            implementation=&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;&gt;\r\n                        &lt;resource&gt;META-INF/spring.schemas&lt;/resource&gt;\r\n                    &lt;/transformer&gt;\r\n                    &lt;transformer\r\n                            implementation=&quot;org.apache.maven.plugins.shade.resource.ServicesResourceTransformer&quot;/&gt;\r\n                    &lt;transformer\r\n                            implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\r\n                        &lt;mainClass&gt;my.class&lt;/mainClass&gt;\r\n                    &lt;/transformer&gt;\r\n                &lt;/transformers&gt;\r\n            &lt;/configuration&gt;\r\n        &lt;/execution&gt;\r\n    &lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n```","title":"Spring Boot Maven Plugin With Maven Shade Plugin - Replace single class in dependency","body":"<p>I have project with Spring Boot. It uses Spring Boot Maven Plugin.\nI need to replace single class in one of my dependencies with my own implementation. I am struggling with it. I am running into cuch problems as no main class found, failed to get nested archive or invalid signature file digest.</p>\n<p>Here is my shade plugin config:</p>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.2.7.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;configuration&gt;\n        &lt;keepDependenciesWithProvidedScope&gt;true&lt;/keepDependenciesWithProvidedScope&gt;\n        &lt;createDependencyReducedPom&gt;true&lt;/createDependencyReducedPom&gt;\n        &lt;filters&gt;\n            &lt;filter&gt;\n                &lt;artifact&gt;*:*&lt;/artifact&gt;\n                &lt;excludes&gt;\n                    &lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;\n                    &lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;\n                    &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\n                &lt;/excludes&gt;\n            &lt;/filter&gt;\n        &lt;/filters&gt;\n    &lt;/configuration&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;shade&lt;/id&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;shade&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;phase&gt;package&lt;/phase&gt;\n            &lt;configuration&gt;\n                &lt;filters&gt;\n                    &lt;filter&gt;\n                        &lt;artifact&gt;dep-to-replace-class-in&lt;/artifact&gt;\n                        &lt;excludes&gt;\n                            &lt;exclude&gt;xyz/morecraft/dev/mcds/processor/ias/mq/MqConnectorBase.class&lt;/exclude&gt;\n                        &lt;/excludes&gt;\n                    &lt;/filter&gt;\n                &lt;/filters&gt;\n                &lt;transformers&gt;\n                    &lt;transformer\n                            implementation=&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;&gt;\n                        &lt;resource&gt;META-INF/spring.handlers&lt;/resource&gt;\n                    &lt;/transformer&gt;\n                    &lt;transformer\n                            implementation=&quot;org.springframework.boot.maven.PropertiesMergingResourceTransformer&quot;&gt;\n                        &lt;resource&gt;META-INF/spring.factories&lt;/resource&gt;\n                    &lt;/transformer&gt;\n                    &lt;transformer\n                            implementation=&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;&gt;\n                        &lt;resource&gt;META-INF/spring.schemas&lt;/resource&gt;\n                    &lt;/transformer&gt;\n                    &lt;transformer\n                            implementation=&quot;org.apache.maven.plugins.shade.resource.ServicesResourceTransformer&quot;/&gt;\n                    &lt;transformer\n                            implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\n                        &lt;mainClass&gt;my.class&lt;/mainClass&gt;\n                    &lt;/transformer&gt;\n                &lt;/transformers&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":["java","android","kotlin","android-studio","debugging"],"owner":{"account_id":28991192,"reputation":11,"user_id":22206880,"display_name":"ninh bui"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1694057854,"creation_date":1694057854,"question_id":77056475,"body_markdown":"My project in My Android Studio. Version of my android studio &quot;Android Studio Flamingo | 2022.2.1 Patch 2&quot;\r\nWhen i try debug, affter end progress, android studio show for me &quot;Waiting until last debugger command completes&quot; then my application waiting before crash.\r\n\r\n\r\n\r\n\r\nPossible workarounds that can&#39;t solve my problem:\r\n1. Disable &quot;Enable alternative Throwable object&#39;s stack trace&quot;\r\n2. Disable &quot; Enable &#39;toString()&#39; object view&quot;","title":"Fix &quot;Waiting until last debugger command completes&quot; in Android Studio?","body":"<p>My project in My Android Studio. Version of my android studio &quot;Android Studio Flamingo | 2022.2.1 Patch 2&quot;\nWhen i try debug, affter end progress, android studio show for me &quot;Waiting until last debugger command completes&quot; then my application waiting before crash.</p>\n<p>Possible workarounds that can't solve my problem:</p>\n<ol>\n<li>Disable &quot;Enable alternative Throwable object's stack trace&quot;</li>\n<li>Disable &quot; Enable 'toString()' object view&quot;</li>\n</ol>\n"},{"tags":["java","spring","spring-boot","spring-cloud"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1657807811,"post_id":72981851,"comment_id":128902499,"body_markdown":"Which Spring Boot version it uses? If it doesn&#39;t use 2.7 it doesn&#39;t support Java17 (officially). This looks like an old version using Spring 4.3 which doesn&#39;t support Java17.","body":"Which Spring Boot version it uses? If it doesn&#39;t use 2.7 it doesn&#39;t support Java17 (officially). This looks like an old version using Spring 4.3 which doesn&#39;t support Java17."},{"owner":{"account_id":25808775,"reputation":11,"user_id":19549903,"display_name":"Theodore Hills"},"score":0,"creation_date":1657807898,"post_id":72981851,"comment_id":128902543,"body_markdown":"@M.Deinum ok fine, then problem solved, the spring version is still 4.x","body":"@M.Deinum ok fine, then problem solved, the spring version is still 4.x"},{"owner":{"account_id":1368060,"reputation":24601,"user_id":2730527,"display_name":"spencergibb"},"score":0,"creation_date":1657808361,"post_id":72981851,"comment_id":128902737,"body_markdown":"The reflection is happing in dubbo, not framework\n`at com.alibaba.dubbo.config.spring.AnnotationBean.postProcessBeforeInitialization(AnnotationBean.java:419) ~[jrescloud-rpc-def-2.0.39.jar:2.0.39]`","body":"The reflection is happing in dubbo, not framework <code>at com.alibaba.dubbo.config.spring.AnnotationBean.postProcessBe&zwnj;&#8203;foreInitialization(A&zwnj;&#8203;nnotationBean.java:4&zwnj;&#8203;19) ~[jrescloud-rpc-def-2.0.39.jar:2.0.39]</code>"}],"answers":[{"tags":[],"owner":{"account_id":7321444,"reputation":68,"user_id":5577347,"display_name":"SeanFranklin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694057401,"creation_date":1694057401,"answer_id":77056444,"question_id":72981851,"body_markdown":"I hit the same issue and was able to work around it by adding the following two JVM args:\r\n\r\n    --add-opens=java.management/com.sun.jmx.mbeanserver=ALL-UNNAMED --add-exports=java.management/com.sun.jmx.mbeanserver=ALL-UNNAMED","title":"I cannot run a Spring Cloud Application","body":"<p>I hit the same issue and was able to work around it by adding the following two JVM args:</p>\n<pre><code>--add-opens=java.management/com.sun.jmx.mbeanserver=ALL-UNNAMED --add-exports=java.management/com.sun.jmx.mbeanserver=ALL-UNNAMED\n</code></pre>\n"}],"owner":{"account_id":25808775,"reputation":11,"user_id":19549903,"display_name":"Theodore Hills"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":420,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1694057401,"creation_date":1657807490,"question_id":72981851,"body_markdown":"I have an example of Spring Cloud based Java Application, but it uses the company customized Spring API to run.\r\n\r\nNow Application Runner is:\r\n```java\r\npackage org.example.demo.server;\r\n\r\nimport com.hundsun.jrescloud.common.boot.CloudApplication;\r\nimport com.hundsun.jrescloud.common.boot.CloudBootstrap;\r\n\r\n@CloudApplication\r\npublic class Application {\r\n\r\n    public static void main(String... args) {\r\n        CloudBootstrap.run(Application.class, args);\r\n    }\r\n\r\n}\r\n```\r\n\r\nBecause I&#39;m using JDK 17, the app started with some errors and which were fixed by add `--add-opens java.base/java.lang=ALL-UNNAMED --add-opens java.base/java.io=ALL-UNNAMED` to **VM Options** to solve `Unable to make field public static final boolean com.sun.jmx.mbeanserver.JmxMBeanServer.DEFAULT_FAIR_LOCK_POLICY accessible: module java.management does not &quot;exports com.sun.jmx.mbeanserver&quot; to unnamed module @3590fc5b`.\r\n\r\nBut after add these vm options, now it reports (the reason appears at the end): \r\n`Caused by java.lang.reflect.InaccessibleObjectException: Unable to make field public static final boolean com.sun.jmx.mbeanserver.JmxMBeanServer.DEFAULT_FAIR_LOCK_POLICY accessible: module java.management does not &quot;exports com.sun.jmx.mbeanserver&quot; to unnamed module @3590fc5b`.\r\nTherefore I&#39;m wondering how to solve this problem.\r\n\r\nThe problem is too weird to find a solution, I have searched it on some search engines with no solution.\r\n\r\nThe whole report is\r\n```plain\r\n2022-07-14 21:57:21.204 |-ERROR [main] org.springframework.boot.SpringApplication [] -| Application startup failed\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;mbeanExporter&#39; defined in class path resource [org/springframework/boot/autoconfigure/jmx/JmxAutoConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.jmx.export.annotation.AnnotationMBeanExporter]: Factory method &#39;mbeanExporter&#39; threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;mbeanServer&#39; defined in class path resource [org/springframework/boot/autoconfigure/jmx/JmxAutoConfiguration.class]: Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanInitializationException: Failed to init remote service reference at filed DEFAULT_FAIR_LOCK_POLICY in class com.sun.jmx.mbeanserver.JmxMBeanServer; nested exception is java.lang.reflect.InaccessibleObjectException: Unable to make field public static final boolean com.sun.jmx.mbeanserver.JmxMBeanServer.DEFAULT_FAIR_LOCK_POLICY accessible: module java.management does not &quot;exports com.sun.jmx.mbeanserver&quot; to unnamed module @3590fc5b\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:599) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1177) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1072) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:511) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:481) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:312) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:308) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:756) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:867) ~[spring-context-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:542) ~[spring-context-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:123) ~[spring-boot-1.5.22.RELEASE.jar:1.5.22.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:666) [spring-boot-1.5.22.RELEASE.jar:1.5.22.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:353) [spring-boot-1.5.22.RELEASE.jar:1.5.22.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:300) [spring-boot-1.5.22.RELEASE.jar:1.5.22.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1082) [spring-boot-1.5.22.RELEASE.jar:1.5.22.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1071) [spring-boot-1.5.22.RELEASE.jar:1.5.22.RELEASE]\r\n\tat com.hundsun.jrescloud.common.boot.CloudBootstrap.run(CloudBootstrap.java:69) [jrescloud-common-2.0.39.jar:2.0.39]\r\n\tat com.hundsun.jrescloud.common.boot.CloudBootstrap.run(CloudBootstrap.java:50) [jrescloud-common-2.0.39.jar:2.0.39]\r\n\tat org.example.demo.server.Application.main(Application.java:16) [classes/:?]\r\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.jmx.export.annotation.AnnotationMBeanExporter]: Factory method &#39;mbeanExporter&#39; threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;mbeanServer&#39; defined in class path resource [org/springframework/boot/autoconfigure/jmx/JmxAutoConfiguration.class]: Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanInitializationException: Failed to init remote service reference at filed DEFAULT_FAIR_LOCK_POLICY in class com.sun.jmx.mbeanserver.JmxMBeanServer; nested exception is java.lang.reflect.InaccessibleObjectException: Unable to make field public static final boolean com.sun.jmx.mbeanserver.JmxMBeanServer.DEFAULT_FAIR_LOCK_POLICY accessible: module java.management does not &quot;exports com.sun.jmx.mbeanserver&quot; to unnamed module @3590fc5b\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:189) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:588) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\t... 20 more\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;mbeanServer&#39; defined in class path resource [org/springframework/boot/autoconfigure/jmx/JmxAutoConfiguration.class]: Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanInitializationException: Failed to init remote service reference at filed DEFAULT_FAIR_LOCK_POLICY in class com.sun.jmx.mbeanserver.JmxMBeanServer; nested exception is java.lang.reflect.InaccessibleObjectException: Unable to make field public static final boolean com.sun.jmx.mbeanserver.JmxMBeanServer.DEFAULT_FAIR_LOCK_POLICY accessible: module java.management does not &quot;exports com.sun.jmx.mbeanserver&quot; to unnamed module @3590fc5b\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:481) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:312) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:308) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\tat org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration.mbeanExporter(JmxAutoConfiguration.java:82) ~[spring-boot-autoconfigure-1.5.22.RELEASE.jar:1.5.22.RELEASE]\r\n\tat org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration$$EnhancerBySpringCGLIB$$d9f4250b.CGLIB$mbeanExporter$2(&lt;generated&gt;) ~[spring-boot-autoconfigure-1.5.22.RELEASE.jar:1.5.22.RELEASE]\r\n\tat org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration$$EnhancerBySpringCGLIB$$d9f4250b$$FastClassBySpringCGLIB$$4ed9fd1a.invoke(&lt;generated&gt;) ~[spring-boot-autoconfigure-1.5.22.RELEASE.jar:1.5.22.RELEASE]\r\n\tat org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:228) ~[spring-core-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\tat org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:358) ~[spring-context-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\tat org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration$$EnhancerBySpringCGLIB$$d9f4250b.mbeanExporter(&lt;generated&gt;) ~[spring-boot-autoconfigure-1.5.22.RELEASE.jar:1.5.22.RELEASE]\r\n\tat jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\r\n\tat jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[?:?]\r\n\tat jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\r\n\tat java.lang.reflect.Method.invoke(Method.java:568) ~[?:?]\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:162) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:588) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\t... 20 more\r\nCaused by: org.springframework.beans.factory.BeanInitializationException: Failed to init remote service reference at filed DEFAULT_FAIR_LOCK_POLICY in class com.sun.jmx.mbeanserver.JmxMBeanServer; nested exception is java.lang.reflect.InaccessibleObjectException: Unable to make field public static final boolean com.sun.jmx.mbeanserver.JmxMBeanServer.DEFAULT_FAIR_LOCK_POLICY accessible: module java.management does not &quot;exports com.sun.jmx.mbeanserver&quot; to unnamed module @3590fc5b\r\n\tat com.alibaba.dubbo.config.spring.AnnotationBean.postProcessBeforeInitialization(AnnotationBean.java:439) ~[jrescloud-rpc-def-2.0.39.jar:2.0.39]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:407) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1622) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:553) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:481) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:312) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:308) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\tat org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration.mbeanExporter(JmxAutoConfiguration.java:82) ~[spring-boot-autoconfigure-1.5.22.RELEASE.jar:1.5.22.RELEASE]\r\n\tat org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration$$EnhancerBySpringCGLIB$$d9f4250b.CGLIB$mbeanExporter$2(&lt;generated&gt;) ~[spring-boot-autoconfigure-1.5.22.RELEASE.jar:1.5.22.RELEASE]\r\n\tat org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration$$EnhancerBySpringCGLIB$$d9f4250b$$FastClassBySpringCGLIB$$4ed9fd1a.invoke(&lt;generated&gt;) ~[spring-boot-autoconfigure-1.5.22.RELEASE.jar:1.5.22.RELEASE]\r\n\tat org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:228) ~[spring-core-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\tat org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:358) ~[spring-context-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\tat org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration$$EnhancerBySpringCGLIB$$d9f4250b.mbeanExporter(&lt;generated&gt;) ~[spring-boot-autoconfigure-1.5.22.RELEASE.jar:1.5.22.RELEASE]\r\n\tat jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\r\n\tat jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[?:?]\r\n\tat jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\r\n\tat java.lang.reflect.Method.invoke(Method.java:568) ~[?:?]\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:162) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:588) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\t... 20 more\r\nCaused by: java.lang.reflect.InaccessibleObjectException: Unable to make field public static final boolean com.sun.jmx.mbeanserver.JmxMBeanServer.DEFAULT_FAIR_LOCK_POLICY accessible: module java.management does not &quot;exports com.sun.jmx.mbeanserver&quot; to unnamed module @3590fc5b\r\n\tat java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:354) ~[?:?]\r\n\tat java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:297) ~[?:?]\r\n\tat java.lang.reflect.Field.checkCanSetAccessible(Field.java:178) ~[?:?]\r\n\tat java.lang.reflect.Field.setAccessible(Field.java:172) ~[?:?]\r\n\tat com.alibaba.dubbo.config.spring.AnnotationBean.postProcessBeforeInitialization(AnnotationBean.java:419) ~[jrescloud-rpc-def-2.0.39.jar:2.0.39]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:407) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1622) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:553) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:481) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:312) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:308) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\tat org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration.mbeanExporter(JmxAutoConfiguration.java:82) ~[spring-boot-autoconfigure-1.5.22.RELEASE.jar:1.5.22.RELEASE]\r\n\tat org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration$$EnhancerBySpringCGLIB$$d9f4250b.CGLIB$mbeanExporter$2(&lt;generated&gt;) ~[spring-boot-autoconfigure-1.5.22.RELEASE.jar:1.5.22.RELEASE]\r\n\tat org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration$$EnhancerBySpringCGLIB$$d9f4250b$$FastClassBySpringCGLIB$$4ed9fd1a.invoke(&lt;generated&gt;) ~[spring-boot-autoconfigure-1.5.22.RELEASE.jar:1.5.22.RELEASE]\r\n\tat org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:228) ~[spring-core-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\tat org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:358) ~[spring-context-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\tat org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration$$EnhancerBySpringCGLIB$$d9f4250b.mbeanExporter(&lt;generated&gt;) ~[spring-boot-autoconfigure-1.5.22.RELEASE.jar:1.5.22.RELEASE]\r\n\tat jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\r\n\tat jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[?:?]\r\n\tat jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\r\n\tat java.lang.reflect.Method.invoke(Method.java:568) ~[?:?]\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:162) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:588) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\r\n\t... 20 more\r\n```","title":"I cannot run a Spring Cloud Application","body":"<p>I have an example of Spring Cloud based Java Application, but it uses the company customized Spring API to run.</p>\n<p>Now Application Runner is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example.demo.server;\n\nimport com.hundsun.jrescloud.common.boot.CloudApplication;\nimport com.hundsun.jrescloud.common.boot.CloudBootstrap;\n\n@CloudApplication\npublic class Application {\n\n    public static void main(String... args) {\n        CloudBootstrap.run(Application.class, args);\n    }\n\n}\n</code></pre>\n<p>Because I'm using JDK 17, the app started with some errors and which were fixed by add <code>--add-opens java.base/java.lang=ALL-UNNAMED --add-opens java.base/java.io=ALL-UNNAMED</code> to <strong>VM Options</strong> to solve <code>Unable to make field public static final boolean com.sun.jmx.mbeanserver.JmxMBeanServer.DEFAULT_FAIR_LOCK_POLICY accessible: module java.management does not &quot;exports com.sun.jmx.mbeanserver&quot; to unnamed module @3590fc5b</code>.</p>\n<p>But after add these vm options, now it reports (the reason appears at the end):\n<code>Caused by java.lang.reflect.InaccessibleObjectException: Unable to make field public static final boolean com.sun.jmx.mbeanserver.JmxMBeanServer.DEFAULT_FAIR_LOCK_POLICY accessible: module java.management does not &quot;exports com.sun.jmx.mbeanserver&quot; to unnamed module @3590fc5b</code>.\nTherefore I'm wondering how to solve this problem.</p>\n<p>The problem is too weird to find a solution, I have searched it on some search engines with no solution.</p>\n<p>The whole report is</p>\n<pre><code>2022-07-14 21:57:21.204 |-ERROR [main] org.springframework.boot.SpringApplication [] -| Application startup failed\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mbeanExporter' defined in class path resource [org/springframework/boot/autoconfigure/jmx/JmxAutoConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.jmx.export.annotation.AnnotationMBeanExporter]: Factory method 'mbeanExporter' threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mbeanServer' defined in class path resource [org/springframework/boot/autoconfigure/jmx/JmxAutoConfiguration.class]: Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanInitializationException: Failed to init remote service reference at filed DEFAULT_FAIR_LOCK_POLICY in class com.sun.jmx.mbeanserver.JmxMBeanServer; nested exception is java.lang.reflect.InaccessibleObjectException: Unable to make field public static final boolean com.sun.jmx.mbeanserver.JmxMBeanServer.DEFAULT_FAIR_LOCK_POLICY accessible: module java.management does not &quot;exports com.sun.jmx.mbeanserver&quot; to unnamed module @3590fc5b\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:599) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1177) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1072) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:511) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:481) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:312) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:308) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:756) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:867) ~[spring-context-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:542) ~[spring-context-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:123) ~[spring-boot-1.5.22.RELEASE.jar:1.5.22.RELEASE]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:666) [spring-boot-1.5.22.RELEASE.jar:1.5.22.RELEASE]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:353) [spring-boot-1.5.22.RELEASE.jar:1.5.22.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:300) [spring-boot-1.5.22.RELEASE.jar:1.5.22.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1082) [spring-boot-1.5.22.RELEASE.jar:1.5.22.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1071) [spring-boot-1.5.22.RELEASE.jar:1.5.22.RELEASE]\n    at com.hundsun.jrescloud.common.boot.CloudBootstrap.run(CloudBootstrap.java:69) [jrescloud-common-2.0.39.jar:2.0.39]\n    at com.hundsun.jrescloud.common.boot.CloudBootstrap.run(CloudBootstrap.java:50) [jrescloud-common-2.0.39.jar:2.0.39]\n    at org.example.demo.server.Application.main(Application.java:16) [classes/:?]\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.jmx.export.annotation.AnnotationMBeanExporter]: Factory method 'mbeanExporter' threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mbeanServer' defined in class path resource [org/springframework/boot/autoconfigure/jmx/JmxAutoConfiguration.class]: Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanInitializationException: Failed to init remote service reference at filed DEFAULT_FAIR_LOCK_POLICY in class com.sun.jmx.mbeanserver.JmxMBeanServer; nested exception is java.lang.reflect.InaccessibleObjectException: Unable to make field public static final boolean com.sun.jmx.mbeanserver.JmxMBeanServer.DEFAULT_FAIR_LOCK_POLICY accessible: module java.management does not &quot;exports com.sun.jmx.mbeanserver&quot; to unnamed module @3590fc5b\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:189) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:588) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    ... 20 more\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mbeanServer' defined in class path resource [org/springframework/boot/autoconfigure/jmx/JmxAutoConfiguration.class]: Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanInitializationException: Failed to init remote service reference at filed DEFAULT_FAIR_LOCK_POLICY in class com.sun.jmx.mbeanserver.JmxMBeanServer; nested exception is java.lang.reflect.InaccessibleObjectException: Unable to make field public static final boolean com.sun.jmx.mbeanserver.JmxMBeanServer.DEFAULT_FAIR_LOCK_POLICY accessible: module java.management does not &quot;exports com.sun.jmx.mbeanserver&quot; to unnamed module @3590fc5b\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:481) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:312) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:308) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    at org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration.mbeanExporter(JmxAutoConfiguration.java:82) ~[spring-boot-autoconfigure-1.5.22.RELEASE.jar:1.5.22.RELEASE]\n    at org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration$$EnhancerBySpringCGLIB$$d9f4250b.CGLIB$mbeanExporter$2(&lt;generated&gt;) ~[spring-boot-autoconfigure-1.5.22.RELEASE.jar:1.5.22.RELEASE]\n    at org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration$$EnhancerBySpringCGLIB$$d9f4250b$$FastClassBySpringCGLIB$$4ed9fd1a.invoke(&lt;generated&gt;) ~[spring-boot-autoconfigure-1.5.22.RELEASE.jar:1.5.22.RELEASE]\n    at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:228) ~[spring-core-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:358) ~[spring-context-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    at org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration$$EnhancerBySpringCGLIB$$d9f4250b.mbeanExporter(&lt;generated&gt;) ~[spring-boot-autoconfigure-1.5.22.RELEASE.jar:1.5.22.RELEASE]\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[?:?]\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\n    at java.lang.reflect.Method.invoke(Method.java:568) ~[?:?]\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:162) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:588) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    ... 20 more\nCaused by: org.springframework.beans.factory.BeanInitializationException: Failed to init remote service reference at filed DEFAULT_FAIR_LOCK_POLICY in class com.sun.jmx.mbeanserver.JmxMBeanServer; nested exception is java.lang.reflect.InaccessibleObjectException: Unable to make field public static final boolean com.sun.jmx.mbeanserver.JmxMBeanServer.DEFAULT_FAIR_LOCK_POLICY accessible: module java.management does not &quot;exports com.sun.jmx.mbeanserver&quot; to unnamed module @3590fc5b\n    at com.alibaba.dubbo.config.spring.AnnotationBean.postProcessBeforeInitialization(AnnotationBean.java:439) ~[jrescloud-rpc-def-2.0.39.jar:2.0.39]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:407) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1622) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:553) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:481) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:312) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:308) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    at org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration.mbeanExporter(JmxAutoConfiguration.java:82) ~[spring-boot-autoconfigure-1.5.22.RELEASE.jar:1.5.22.RELEASE]\n    at org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration$$EnhancerBySpringCGLIB$$d9f4250b.CGLIB$mbeanExporter$2(&lt;generated&gt;) ~[spring-boot-autoconfigure-1.5.22.RELEASE.jar:1.5.22.RELEASE]\n    at org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration$$EnhancerBySpringCGLIB$$d9f4250b$$FastClassBySpringCGLIB$$4ed9fd1a.invoke(&lt;generated&gt;) ~[spring-boot-autoconfigure-1.5.22.RELEASE.jar:1.5.22.RELEASE]\n    at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:228) ~[spring-core-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:358) ~[spring-context-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    at org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration$$EnhancerBySpringCGLIB$$d9f4250b.mbeanExporter(&lt;generated&gt;) ~[spring-boot-autoconfigure-1.5.22.RELEASE.jar:1.5.22.RELEASE]\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[?:?]\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\n    at java.lang.reflect.Method.invoke(Method.java:568) ~[?:?]\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:162) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:588) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    ... 20 more\nCaused by: java.lang.reflect.InaccessibleObjectException: Unable to make field public static final boolean com.sun.jmx.mbeanserver.JmxMBeanServer.DEFAULT_FAIR_LOCK_POLICY accessible: module java.management does not &quot;exports com.sun.jmx.mbeanserver&quot; to unnamed module @3590fc5b\n    at java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:354) ~[?:?]\n    at java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:297) ~[?:?]\n    at java.lang.reflect.Field.checkCanSetAccessible(Field.java:178) ~[?:?]\n    at java.lang.reflect.Field.setAccessible(Field.java:172) ~[?:?]\n    at com.alibaba.dubbo.config.spring.AnnotationBean.postProcessBeforeInitialization(AnnotationBean.java:419) ~[jrescloud-rpc-def-2.0.39.jar:2.0.39]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:407) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1622) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:553) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:481) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:312) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:308) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    at org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration.mbeanExporter(JmxAutoConfiguration.java:82) ~[spring-boot-autoconfigure-1.5.22.RELEASE.jar:1.5.22.RELEASE]\n    at org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration$$EnhancerBySpringCGLIB$$d9f4250b.CGLIB$mbeanExporter$2(&lt;generated&gt;) ~[spring-boot-autoconfigure-1.5.22.RELEASE.jar:1.5.22.RELEASE]\n    at org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration$$EnhancerBySpringCGLIB$$d9f4250b$$FastClassBySpringCGLIB$$4ed9fd1a.invoke(&lt;generated&gt;) ~[spring-boot-autoconfigure-1.5.22.RELEASE.jar:1.5.22.RELEASE]\n    at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:228) ~[spring-core-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:358) ~[spring-context-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    at org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration$$EnhancerBySpringCGLIB$$d9f4250b.mbeanExporter(&lt;generated&gt;) ~[spring-boot-autoconfigure-1.5.22.RELEASE.jar:1.5.22.RELEASE]\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[?:?]\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\n    at java.lang.reflect.Method.invoke(Method.java:568) ~[?:?]\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:162) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:588) ~[spring-beans-4.3.25.RELEASE.jar:4.3.25.RELEASE]\n    ... 20 more\n</code></pre>\n"},{"tags":["java","ajax","spring","model-view-controller","controller"],"comments":[{"owner":{"account_id":7012253,"reputation":1690,"user_id":5374691,"accept_rate":87,"display_name":"esQmo_"},"score":1,"creation_date":1694017817,"post_id":77053770,"comment_id":135837052,"body_markdown":"When you redirect the page using `location.href` the current page is reloaded and any data stored in the model or `BindingResult` are lost","body":"When you redirect the page using <code>location.href</code> the current page is reloaded and any data stored in the model or <code>BindingResult</code> are lost"},{"owner":{"account_id":129540,"reputation":210839,"user_id":328193,"accept_rate":91,"display_name":"David"},"score":1,"creation_date":1694018554,"post_id":77053770,"comment_id":135837198,"body_markdown":"When you navigate the user to a new page, the user is navigated to a new page.  It&#39;s as though the user clicked on a link, or manually typed a new address into the browser.  Anything and everything from the previous page is lost.  Taking a step back... Why would you want to navigate the user to a new page after performing an AJAX operation anyway?  The point of AJAX is to not require navigation.  If page navigation is the goal then don&#39;t use AJAX in the first place and just let the user submit the form.  It&#39;s not really clear what the underlying goal is here.","body":"When you navigate the user to a new page, the user is navigated to a new page.  It&#39;s as though the user clicked on a link, or manually typed a new address into the browser.  Anything and everything from the previous page is lost.  Taking a step back... Why would you want to navigate the user to a new page after performing an AJAX operation anyway?  The point of AJAX is to not require navigation.  If page navigation is the goal then don&#39;t use AJAX in the first place and just let the user submit the form.  It&#39;s not really clear what the underlying goal is here."},{"owner":{"account_id":21625975,"reputation":52,"user_id":15950321,"display_name":"jadekim"},"score":0,"creation_date":1694054488,"post_id":77053770,"comment_id":135841804,"body_markdown":"@David Added formRequest code. If you look at the formRequest, there are List&lt;GoodRequest&gt;  and List&lt;DimRequest&gt; , and you had to collect GoodRequest and DimRequest from javascript, respectively, and send them to the controller. So I used ajax.","body":"@David Added formRequest code. If you look at the formRequest, there are List&lt;GoodRequest&gt;  and List&lt;DimRequest&gt; , and you had to collect GoodRequest and DimRequest from javascript, respectively, and send them to the controller. So I used ajax."}],"answers":[{"tags":[],"owner":{"account_id":7012253,"reputation":1690,"user_id":5374691,"accept_rate":87,"display_name":"esQmo_"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1694018792,"creation_date":1694018792,"answer_id":77053900,"question_id":77053770,"body_markdown":"When you redirect the page using `location.href`, the current page is reloaded and any data stored in the model or `BindingResult` is lost. One way to maintain the data between requests is to store it in the session or pass it as URL parameters.\r\n\r\nIn your case, you could modify your controller to store the `formRequest` and `bindingResult` objects in the session, and then retrieve them from the session when rendering the view. Modify you code as follow:\r\n\r\n```java\r\n@PostMapping(&quot;/example&quot;)\r\n@ResponseBody\r\npublic Map&lt;String, Object&gt; example(\r\n        @RequestPart(&quot;formRequest&quot;) @Validated FormRequest formRequest,\r\n        BindingResult bindingResult,\r\n        @RequestPart(value = &quot;file&quot;, required = false) MultipartFile file,\r\n        @RequestPart(value = &quot;files&quot;, required = false) MultipartFile[] files,\r\n        Model model,\r\n        HttpSession session\r\n) {\r\n    Map&lt;String, Object&gt; response = new HashMap&lt;&gt;();\r\n\r\n    if (bindingResult.hasErrors()) {\r\n        log.warn(&quot;bindingResult={}&quot;, bindingResult);\r\n        // Store formRequest and bindingResult in the session\r\n        session.setAttribute(&quot;formRequest&quot;, formRequest);\r\n        session.setAttribute(&quot;bindingResult&quot;, bindingResult);\r\n        response.put(&quot;errors&quot;, bindingResult.getAllErrors());\r\n\r\n        response.put(&quot;url&quot;, &quot;/example&quot;);\r\n        return response;\r\n    }\r\n\r\n    return response;\r\n}\r\n```\r\n\r\nThen in your view, you can retrieve the `formRequest` and `bindingResult` objects from the session and use them.","title":"How to maintain the model and bindingResult of the controller when moving the view of ajax","body":"<p>When you redirect the page using <code>location.href</code>, the current page is reloaded and any data stored in the model or <code>BindingResult</code> is lost. One way to maintain the data between requests is to store it in the session or pass it as URL parameters.</p>\n<p>In your case, you could modify your controller to store the <code>formRequest</code> and <code>bindingResult</code> objects in the session, and then retrieve them from the session when rendering the view. Modify you code as follow:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@PostMapping(&quot;/example&quot;)\n@ResponseBody\npublic Map&lt;String, Object&gt; example(\n        @RequestPart(&quot;formRequest&quot;) @Validated FormRequest formRequest,\n        BindingResult bindingResult,\n        @RequestPart(value = &quot;file&quot;, required = false) MultipartFile file,\n        @RequestPart(value = &quot;files&quot;, required = false) MultipartFile[] files,\n        Model model,\n        HttpSession session\n) {\n    Map&lt;String, Object&gt; response = new HashMap&lt;&gt;();\n\n    if (bindingResult.hasErrors()) {\n        log.warn(&quot;bindingResult={}&quot;, bindingResult);\n        // Store formRequest and bindingResult in the session\n        session.setAttribute(&quot;formRequest&quot;, formRequest);\n        session.setAttribute(&quot;bindingResult&quot;, bindingResult);\n        response.put(&quot;errors&quot;, bindingResult.getAllErrors());\n\n        response.put(&quot;url&quot;, &quot;/example&quot;);\n        return response;\n    }\n\n    return response;\n}\n</code></pre>\n<p>Then in your view, you can retrieve the <code>formRequest</code> and <code>bindingResult</code> objects from the session and use them.</p>\n"}],"owner":{"account_id":21625975,"reputation":52,"user_id":15950321,"display_name":"jadekim"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":77053900,"answer_count":1,"score":-2,"last_activity_date":1694054240,"creation_date":1694017613,"question_id":77053770,"body_markdown":"I tried the following. However, when moving a view by location.href, the model and bindingResult are not maintained. How to maintain the model and bindingResult? *Maybe the approach is wrong...*\r\n\r\n### Controller\r\n\r\n```\r\n    @PostMapping(&quot;/example&quot;)\r\n    @ResponseBody\r\n    public Map&lt;String, Object&gt; example(\r\n            @RequestPart(&quot;formRequest&quot;) @Validated FormRequest formRequest,\r\n            BindingResult bindingResult,\r\n            @RequestPart(value = &quot;file&quot;, required = false) MultipartFile file,\r\n            @RequestPart(value = &quot;files&quot;, required = false) MultipartFile[] files,\r\n            Model model\r\n    ) {\r\n        Map&lt;String, Object&gt; response = new HashMap&lt;&gt;();\r\n        \r\n        if (bindingResult.hasErrors()) {\r\n            log.warn(&quot;bindingResult={}&quot;, bindingResult);\r\n            model.addAttribute(&quot;formRequest&quot;, formRequest);\r\n            model.addAttribute(&quot;formStatus&quot;, FormStatus.CREATE);\r\n            response.put(&quot;errors&quot;, bindingResult.getAllErrors());\r\n            \r\n            response.put(&quot;url&quot;, &quot;/example&quot;);\r\n            return response;\r\n        }\r\n\r\n        return response;\r\n    }\r\n```\r\n\r\n### formRequest\r\n\r\n```\r\npublic record FormRequest(\r\n        Long id,\r\n        @NotBlank\r\n        String content1,\r\n        @NotBlank\r\n        String content2,\r\n        @NotBlank\r\n        String content3,\r\n        @NotNull\r\n        Integer number1,\r\n        @NotNull\r\n        Integer number2,\r\n        @NotNull\r\n        List&lt;GoodRequest&gt; goodRequests,\r\n        @NotNull\r\n        List&lt;DimRequest&gt; dimRequests,\r\n        String category\r\n) {}\r\n```\r\n\r\n### ajax\r\n\r\n```\r\n        $.ajax({\r\n          url: url,\r\n          type: &quot;POST&quot;,\r\n          data: formData,\r\n          enctype: &quot;multipart/form-data&quot;,\r\n          contentType: false,\r\n          processData: false,\r\n          success: function (response) {\r\n            location.href = response.url;\r\n          }\r\n        });\r\n```","title":"How to maintain the model and bindingResult of the controller when moving the view of ajax","body":"<p>I tried the following. However, when moving a view by location.href, the model and bindingResult are not maintained. How to maintain the model and bindingResult? <em>Maybe the approach is wrong...</em></p>\n<h3>Controller</h3>\n<pre><code>    @PostMapping(&quot;/example&quot;)\n    @ResponseBody\n    public Map&lt;String, Object&gt; example(\n            @RequestPart(&quot;formRequest&quot;) @Validated FormRequest formRequest,\n            BindingResult bindingResult,\n            @RequestPart(value = &quot;file&quot;, required = false) MultipartFile file,\n            @RequestPart(value = &quot;files&quot;, required = false) MultipartFile[] files,\n            Model model\n    ) {\n        Map&lt;String, Object&gt; response = new HashMap&lt;&gt;();\n        \n        if (bindingResult.hasErrors()) {\n            log.warn(&quot;bindingResult={}&quot;, bindingResult);\n            model.addAttribute(&quot;formRequest&quot;, formRequest);\n            model.addAttribute(&quot;formStatus&quot;, FormStatus.CREATE);\n            response.put(&quot;errors&quot;, bindingResult.getAllErrors());\n            \n            response.put(&quot;url&quot;, &quot;/example&quot;);\n            return response;\n        }\n\n        return response;\n    }\n</code></pre>\n<h3>formRequest</h3>\n<pre><code>public record FormRequest(\n        Long id,\n        @NotBlank\n        String content1,\n        @NotBlank\n        String content2,\n        @NotBlank\n        String content3,\n        @NotNull\n        Integer number1,\n        @NotNull\n        Integer number2,\n        @NotNull\n        List&lt;GoodRequest&gt; goodRequests,\n        @NotNull\n        List&lt;DimRequest&gt; dimRequests,\n        String category\n) {}\n</code></pre>\n<h3>ajax</h3>\n<pre><code>        $.ajax({\n          url: url,\n          type: &quot;POST&quot;,\n          data: formData,\n          enctype: &quot;multipart/form-data&quot;,\n          contentType: false,\n          processData: false,\n          success: function (response) {\n            location.href = response.url;\n          }\n        });\n</code></pre>\n"},{"tags":["java","machine-learning","deep-learning","random-forest","weka"],"answers":[{"comments":[{"owner":{"account_id":5978100,"reputation":2493,"user_id":4698227,"display_name":"fracpete"},"score":0,"creation_date":1694402060,"post_id":77056258,"comment_id":135881567,"body_markdown":"The dataset structure at prediction time must have the exact same structure as the one that the model was trained with. When Weka saves a model, it saves two objects in a serialized model file: the model itself and the dataset structure (= array of length two). Rather than recreating the dataset structure at runtime, you could simply load it from the serialized model file.","body":"The dataset structure at prediction time must have the exact same structure as the one that the model was trained with. When Weka saves a model, it saves two objects in a serialized model file: the model itself and the dataset structure (= array of length two). Rather than recreating the dataset structure at runtime, you could simply load it from the serialized model file."}],"tags":[],"owner":{"account_id":8727884,"reputation":605,"user_id":6528988,"accept_rate":25,"display_name":"Malinda Peiris"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694053831,"creation_date":1694053831,"answer_id":77056258,"question_id":77053758,"body_markdown":"Please find the solution the class index values should be added to the attributes as a list of values unlike other classifications.\r\n\r\n\r\n    private Integer runRandomForest() throws Exception {\r\n        Classifier randomForest = (Classifier) SerializationHelper.read(randomForestLocation);\r\n        CSVLoader loader = new CSVLoader();\r\n        try (InputStream fis = new FileInputStream(csvFeatureOutput)) {\r\n            loader.setSource(fis);\r\n    \r\n            Instances trainingDataSet = loader.getDataSet();\r\n    \r\n            ArrayList labels = new ArrayList();\r\n            labels.add(&quot;0.0&quot;);\r\n            labels.add(&quot;1.0&quot;);\r\n            labels.add(&quot;2.0&quot;);\r\n            Attribute attributeCls = new Attribute(&quot;label&quot;,labels);\r\n    \r\n            ArrayList&lt;Attribute&gt; attributeArrayList = new ArrayList&lt;&gt;();\r\n            for (int i = 0; i &lt; trainingDataSet.numAttributes(); i++) {\r\n                Attribute attribute = trainingDataSet.attribute(i);\r\n                attributeArrayList.add(attribute);\r\n            }\r\n            attributeArrayList.add(attributeCls);\r\n            double[] arrayDouble = getInstances(trainingDataSet);\r\n            Instances dataset = new Instances(&quot;testdata&quot;, attributeArrayList, 0);\r\n    \r\n            DenseInstance instance = new DenseInstance(1.0, arrayDouble);\r\n            instance.setDataset(dataset);\r\n            dataset.setClassIndex(dataset.numAttributes() - 1);\r\n            \r\n            double prediction = randomForest.classifyInstance(instance);\r\n            System.out.println(prediction);\r\n    \r\n            return -1;\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            throw new RuntimeException(e.getMessage());\r\n        }\r\n    }  ","title":"WEKA Execute classifyInstance for Random Forest saved model","body":"<p>Please find the solution the class index values should be added to the attributes as a list of values unlike other classifications.</p>\n<pre><code>private Integer runRandomForest() throws Exception {\n    Classifier randomForest = (Classifier) SerializationHelper.read(randomForestLocation);\n    CSVLoader loader = new CSVLoader();\n    try (InputStream fis = new FileInputStream(csvFeatureOutput)) {\n        loader.setSource(fis);\n\n        Instances trainingDataSet = loader.getDataSet();\n\n        ArrayList labels = new ArrayList();\n        labels.add(&quot;0.0&quot;);\n        labels.add(&quot;1.0&quot;);\n        labels.add(&quot;2.0&quot;);\n        Attribute attributeCls = new Attribute(&quot;label&quot;,labels);\n\n        ArrayList&lt;Attribute&gt; attributeArrayList = new ArrayList&lt;&gt;();\n        for (int i = 0; i &lt; trainingDataSet.numAttributes(); i++) {\n            Attribute attribute = trainingDataSet.attribute(i);\n            attributeArrayList.add(attribute);\n        }\n        attributeArrayList.add(attributeCls);\n        double[] arrayDouble = getInstances(trainingDataSet);\n        Instances dataset = new Instances(&quot;testdata&quot;, attributeArrayList, 0);\n\n        DenseInstance instance = new DenseInstance(1.0, arrayDouble);\n        instance.setDataset(dataset);\n        dataset.setClassIndex(dataset.numAttributes() - 1);\n        \n        double prediction = randomForest.classifyInstance(instance);\n        System.out.println(prediction);\n\n        return -1;\n    } catch (Exception e) {\n        e.printStackTrace();\n        throw new RuntimeException(e.getMessage());\n    }\n}  \n</code></pre>\n"}],"owner":{"account_id":8727884,"reputation":605,"user_id":6528988,"accept_rate":25,"display_name":"Malinda Peiris"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694053831,"creation_date":1694017539,"question_id":77053758,"body_markdown":"Trying to execute classifyInstance against Random Forest pre trained model for Java. I was able to execute SMO Na&#239;ve Bayes for the same code but not for bagging random forest pre trained model getting below error.\r\n\r\n    java.lang.ArrayIndexOutOfBoundsException: Index 1 out of bounds for length 1\r\n    \tat weka.classifiers.meta.Bagging.distributionForInstance(Bagging.java:791)\r\n    \tat weka.classifiers.AbstractClassifier.classifyInstance(AbstractClassifier.java:173)\r\n    \tat com.msc.sinhalasongpredictorbackend.service.ClassifyService.runRandomForest(ClassifyService.java:97) \r\n\r\ncode snippet\r\n\r\n    private Integer runRandomForest() throws Exception {\r\n        Bagging randomForest = (Bagging) SerializationHelper.read(randomForestLocation);\r\n        CSVLoader loader = new CSVLoader();\r\n        try (InputStream fis = new FileInputStream(csvFeatureOutput)) {\r\n            loader.setSource(fis);\r\n    \r\n            Instances trainingDataSet = loader.getDataSet();\r\n    \r\n            List values = new ArrayList();\r\n            values.add(&quot;1.0&quot;);\r\n            trainingDataSet.insertAttributeAt(new Attribute(&quot;label&quot;, values), trainingDataSet.numAttributes());\r\n            trainingDataSet.setClassIndex(trainingDataSet.numAttributes() - 1);\r\n    \r\n            for (Instance i : trainingDataSet) {\r\n                Double result = randomForest.classifyInstance(i);\r\n                return result.intValue();\r\n            }\r\n    \r\n            return -1;\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            throw new RuntimeException(e.getMessage());\r\n        }\r\n    }\r\n\r\nThe CSV one row (Instance) would be look like below (System.out.println(i))\r\n\r\n    13.46,0.1023,0.002532,221.9,0.001693,0.06354,0.05821,26.46,13.22,134.3,0.000406,0.0742,0.3509,0.2297,0.2114,0.1953,0.2013,0.1948,0.1646,0.1817,0,0.166,15.16,1359,107900,22360000,29.32,0.1582,0.001677,1679,0.00328,0.1308,0.5461,67.77,215.6,462.1,0.0095,-0.8899,0.4612,-0.04562,0.2517,-0.005843,-0.004694,0.01806,0.006126,0.02237,0,0.3106,58.65,3476,279200,51460000,?","title":"WEKA Execute classifyInstance for Random Forest saved model","body":"<p>Trying to execute classifyInstance against Random Forest pre trained model for Java. I was able to execute SMO Naïve Bayes for the same code but not for bagging random forest pre trained model getting below error.</p>\n<pre><code>java.lang.ArrayIndexOutOfBoundsException: Index 1 out of bounds for length 1\n    at weka.classifiers.meta.Bagging.distributionForInstance(Bagging.java:791)\n    at weka.classifiers.AbstractClassifier.classifyInstance(AbstractClassifier.java:173)\n    at com.msc.sinhalasongpredictorbackend.service.ClassifyService.runRandomForest(ClassifyService.java:97) \n</code></pre>\n<p>code snippet</p>\n<pre><code>private Integer runRandomForest() throws Exception {\n    Bagging randomForest = (Bagging) SerializationHelper.read(randomForestLocation);\n    CSVLoader loader = new CSVLoader();\n    try (InputStream fis = new FileInputStream(csvFeatureOutput)) {\n        loader.setSource(fis);\n\n        Instances trainingDataSet = loader.getDataSet();\n\n        List values = new ArrayList();\n        values.add(&quot;1.0&quot;);\n        trainingDataSet.insertAttributeAt(new Attribute(&quot;label&quot;, values), trainingDataSet.numAttributes());\n        trainingDataSet.setClassIndex(trainingDataSet.numAttributes() - 1);\n\n        for (Instance i : trainingDataSet) {\n            Double result = randomForest.classifyInstance(i);\n            return result.intValue();\n        }\n\n        return -1;\n    } catch (Exception e) {\n        e.printStackTrace();\n        throw new RuntimeException(e.getMessage());\n    }\n}\n</code></pre>\n<p>The CSV one row (Instance) would be look like below (System.out.println(i))</p>\n<pre><code>13.46,0.1023,0.002532,221.9,0.001693,0.06354,0.05821,26.46,13.22,134.3,0.000406,0.0742,0.3509,0.2297,0.2114,0.1953,0.2013,0.1948,0.1646,0.1817,0,0.166,15.16,1359,107900,22360000,29.32,0.1582,0.001677,1679,0.00328,0.1308,0.5461,67.77,215.6,462.1,0.0095,-0.8899,0.4612,-0.04562,0.2517,-0.005843,-0.004694,0.01806,0.006126,0.02237,0,0.3106,58.65,3476,279200,51460000,?\n</code></pre>\n"},{"tags":["java","image","jpeg","javax.imageio"],"comments":[{"owner":{"account_id":127583,"reputation":2881,"user_id":324857,"display_name":"mwittrock"},"score":1,"creation_date":1281222560,"post_id":3432388,"comment_id":3574882,"body_markdown":"Are you on a platform that allows : in filenames?","body":"Are you on a platform that allows : in filenames?"},{"owner":{"account_id":48378,"reputation":5253,"user_id":143732,"accept_rate":100,"display_name":"Rui Vieira"},"score":2,"creation_date":1281222670,"post_id":3432388,"comment_id":3574894,"body_markdown":"Are you using OpenJDK? OpenJDK does not have a native JPEG encoder IIRC","body":"Are you using OpenJDK? OpenJDK does not have a native JPEG encoder IIRC"},{"owner":{"account_id":6575,"reputation":1636,"user_id":11110,"accept_rate":82,"display_name":"Karan"},"score":0,"creation_date":1281223551,"post_id":3432388,"comment_id":3574957,"body_markdown":"@mwittrock, yep on linux (same filename works for png and gif)","body":"@mwittrock, yep on linux (same filename works for png and gif)"},{"owner":{"account_id":6575,"reputation":1636,"user_id":11110,"accept_rate":82,"display_name":"Karan"},"score":0,"creation_date":1281223620,"post_id":3432388,"comment_id":3574962,"body_markdown":"@Rui - It seems in Eclipse&#39;s preferences that I have openjdk installed, but sun jdk is the default checked one. is there a way I can check for sure?","body":"@Rui - It seems in Eclipse&#39;s preferences that I have openjdk installed, but sun jdk is the default checked one. is there a way I can check for sure?"},{"owner":{"account_id":48378,"reputation":5253,"user_id":143732,"accept_rate":100,"display_name":"Rui Vieira"},"score":0,"creation_date":1281224453,"post_id":3432388,"comment_id":3575006,"body_markdown":"@Karan: If Sun&#39;s JDK is the default, that shouldn&#39;t be the problem.\nWhat kind of data is mapBufferTiles[row][col]? it should be a BufferedImage.","body":"@Karan: If Sun&#39;s JDK is the default, that shouldn&#39;t be the problem. What kind of data is mapBufferTiles[row][col]? it should be a BufferedImage."},{"owner":{"account_id":6575,"reputation":1636,"user_id":11110,"accept_rate":82,"display_name":"Karan"},"score":0,"creation_date":1281224879,"post_id":3432388,"comment_id":3575034,"body_markdown":"@Rui, yep it&#39;s a BufferedImage. I&#39;ve now enabled Sun&#39;s JDK by default as it was indeed using OpenJDK. It&#39;s no longer throwing an exception but because the input buffer contains transparency, I think the jpeg is outputting pink.\n\nAnyways, for future reference, I&#39;ll put this link here: http://ianma.wordpress.com/2010/05/03/access-restriction-java-openjdk-rt-jar/","body":"@Rui, yep it&#39;s a BufferedImage. I&#39;ve now enabled Sun&#39;s JDK by default as it was indeed using OpenJDK. It&#39;s no longer throwing an exception but because the input buffer contains transparency, I think the jpeg is outputting pink.  Anyways, for future reference, I&#39;ll put this link here: <a href=\"http://ianma.wordpress.com/2010/05/03/access-restriction-java-openjdk-rt-jar/\" rel=\"nofollow noreferrer\">ianma.wordpress.com/2010/05/03/&hellip;</a>"},{"owner":{"account_id":48378,"reputation":5253,"user_id":143732,"accept_rate":100,"display_name":"Rui Vieira"},"score":0,"creation_date":1281225449,"post_id":3432388,"comment_id":3575072,"body_markdown":"@Karan, cool. I&#39;ll put as an answer?","body":"@Karan, cool. I&#39;ll put as an answer?"}],"answers":[{"comments":[{"owner":{"account_id":6575,"reputation":1636,"user_id":11110,"accept_rate":82,"display_name":"Karan"},"score":1,"creation_date":1281226359,"post_id":3432532,"comment_id":3575111,"body_markdown":"As for the pink tint issue, i just converted the transparent pixels to white ones as per: http://stackoverflow.com/questions/464825/converting-transparent-gif-png-to-jpeg-using-java/1545417#1545417","body":"As for the pink tint issue, i just converted the transparent pixels to white ones as per: <a href=\"http://stackoverflow.com/questions/464825/converting-transparent-gif-png-to-jpeg-using-java/1545417#1545417\" title=\"converting transparent gif png to jpeg using java\">stackoverflow.com/questions/464825/&hellip;</a>"},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":1,"creation_date":1345507519,"post_id":3432532,"comment_id":16084491,"body_markdown":"End of 2nd paragraph - shouldn&#39;t *&quot;..as thus the red tint.&quot;* be *&quot;..and thus the red tint.&quot;*?","body":"End of 2nd paragraph - shouldn&#39;t <i>&quot;..as thus the red tint.&quot;</i> be <i>&quot;..and thus the red tint.&quot;</i>?"},{"owner":{"account_id":404506,"reputation":3696,"user_id":772853,"accept_rate":74,"display_name":"Andrey Regentov"},"score":9,"creation_date":1366887761,"post_id":3432532,"comment_id":23185257,"body_markdown":"BTW, OpenJDK does have a native JPEG encoder. And if you try to save 32-bit-color file - it fails. And Sun JDK does not fail, but form tinted file. Not sure what is better.","body":"BTW, OpenJDK does have a native JPEG encoder. And if you try to save 32-bit-color file - it fails. And Sun JDK does not fail, but form tinted file. Not sure what is better."},{"owner":{"account_id":48378,"reputation":5253,"user_id":143732,"accept_rate":100,"display_name":"Rui Vieira"},"score":0,"creation_date":1380548917,"post_id":3432532,"comment_id":28231424,"body_markdown":"@AndreyRegentov Possibly now, but I&#39;m pretty sure at the time of writing (2010), it didn&#39;t.","body":"@AndreyRegentov Possibly now, but I&#39;m pretty sure at the time of writing (2010), it didn&#39;t."},{"owner":{"account_id":362038,"reputation":1275,"user_id":705021,"accept_rate":88,"display_name":"hypervisor666"},"score":0,"creation_date":1388382034,"post_id":3432532,"comment_id":31246539,"body_markdown":"Thanks for this information!  This is slightly tangential, but I&#39;m running Arch Linux and trying to use Apophysis-J + OpenJDK v7 (a fun fractal creation app), but I couldn&#39;t get the render function output a valid .jpg file -- I couldn&#39;t find any documentation either (which is why I&#39;m commenting here for posterity sake), but turns out the fix is easy -- just output the rendered file as a .png and it works fine.  Hope this helps someone out there.  Thanks again for this info, saved me some frustration!","body":"Thanks for this information!  This is slightly tangential, but I&#39;m running Arch Linux and trying to use Apophysis-J + OpenJDK v7 (a fun fractal creation app), but I couldn&#39;t get the render function output a valid .jpg file -- I couldn&#39;t find any documentation either (which is why I&#39;m commenting here for posterity sake), but turns out the fix is easy -- just output the rendered file as a .png and it works fine.  Hope this helps someone out there.  Thanks again for this info, saved me some frustration!"}],"tags":[],"owner":{"account_id":48378,"reputation":5253,"user_id":143732,"accept_rate":100,"display_name":"Rui Vieira"},"comment_count":5,"down_vote_count":1,"up_vote_count":48,"is_accepted":true,"score":47,"last_activity_date":1694053423,"creation_date":1281225453,"answer_id":3432532,"question_id":3432388,"body_markdown":"OpenJDK does not have a native JPEG encoder. Try using Sun&#39;s JDK, or using a library (such as [JAI][1]).\r\n\r\nAFAIK, regarding the &quot;pinkish tint&quot;, Java saves the JPEG as ARGB (still with transparency information). Most viewers, when opening, assume the four channels must correspond to a CMYK (not ARGB) and thus the red tint.\r\n\r\nIf you import the image back to Java, the transparency is still there, though.\r\n\r\n\r\n  [1]: http://java.sun.com/products/java-media/jai/iio.html","title":"ImageIO not able to write a JPEG file","body":"<p>OpenJDK does not have a native JPEG encoder. Try using Sun's JDK, or using a library (such as <a href=\"http://java.sun.com/products/java-media/jai/iio.html\" rel=\"nofollow noreferrer\">JAI</a>).</p>\n<p>AFAIK, regarding the &quot;pinkish tint&quot;, Java saves the JPEG as ARGB (still with transparency information). Most viewers, when opening, assume the four channels must correspond to a CMYK (not ARGB) and thus the red tint.</p>\n<p>If you import the image back to Java, the transparency is still there, though.</p>\n"},{"comments":[{"owner":{"account_id":1369771,"reputation":1668,"user_id":1305332,"accept_rate":26,"display_name":"Peter Quiring"},"score":3,"creation_date":1378823532,"post_id":17845696,"comment_id":27587207,"body_markdown":"You&#39;re right!!!  I created a new BufferedImage of TYPE_3BYTE_BGR and used getRGB() from BufferedImage of TYPE_INT_ARGB and setRGB() on new BufferedImage and then called ImageIO.write() and it works on Linux.","body":"You&#39;re right!!!  I created a new BufferedImage of TYPE_3BYTE_BGR and used getRGB() from BufferedImage of TYPE_INT_ARGB and setRGB() on new BufferedImage and then called ImageIO.write() and it works on Linux."},{"owner":{"account_id":392397,"reputation":28086,"user_id":753632,"accept_rate":57,"display_name":"Johann"},"score":0,"creation_date":1520525175,"post_id":17845696,"comment_id":85360289,"body_markdown":"Issue still exists in OpenSDK 8 but this solution solves the problem.","body":"Issue still exists in OpenSDK 8 but this solution solves the problem."},{"owner":{"account_id":6558492,"reputation":599,"user_id":5070449,"display_name":"IBRAR AHMAD"},"score":1,"creation_date":1523725016,"post_id":17845696,"comment_id":86683067,"body_markdown":"Thanks. Changing from TYPE_4BYTE_ABGR to TYPE_3BYTE_BGR, works for me.","body":"Thanks. Changing from TYPE_4BYTE_ABGR to TYPE_3BYTE_BGR, works for me."},{"owner":{"account_id":3955283,"reputation":1170,"user_id":3264028,"accept_rate":61,"display_name":"centenond"},"score":1,"creation_date":1534615207,"post_id":17845696,"comment_id":90772636,"body_markdown":"can some please tell me what he means? I read the image like `ImageIO.read(new File(path));`  and theres no image type arguments?","body":"can some please tell me what he means? I read the image like <code>ImageIO.read(new File(path));</code>  and theres no image type arguments?"},{"owner":{"account_id":1369771,"reputation":1668,"user_id":1305332,"accept_rate":26,"display_name":"Peter Quiring"},"score":0,"creation_date":1568652611,"post_id":17845696,"comment_id":102334035,"body_markdown":"Create java.awt.image.BufferedImage with ctor (int width, int height, int imageType) The imageType parameter is what you are looking for.  see https://docs.oracle.com/javase/7/docs/api/java/awt/image/BufferedImage.html","body":"Create java.awt.image.BufferedImage with ctor (int width, int height, int imageType) The imageType parameter is what you are looking for.  see <a href=\"https://docs.oracle.com/javase/7/docs/api/java/awt/image/BufferedImage.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/java/awt/image/&hellip;</a>"},{"owner":{"account_id":1369771,"reputation":1668,"user_id":1305332,"accept_rate":26,"display_name":"Peter Quiring"},"score":0,"creation_date":1568653501,"post_id":17845696,"comment_id":102334399,"body_markdown":"I&#39;ve posted some code in a new answer to illustrate the conversion process.","body":"I&#39;ve posted some code in a new answer to illustrate the conversion process."}],"tags":[],"owner":{"account_id":1826537,"reputation":3004,"user_id":1659132,"accept_rate":50,"display_name":"Thunder"},"comment_count":6,"down_vote_count":0,"up_vote_count":40,"is_accepted":false,"score":40,"last_activity_date":1374703925,"creation_date":1374703925,"answer_id":17845696,"question_id":3432388,"body_markdown":"I had the same issue in OpenJDK 7 and I managed to get around this exception by using an `imageType` of `TYPE_3BYTE_BGR` instead of `TYPE_4BYTE_ABGR` using the same OpenJDK.","title":"ImageIO not able to write a JPEG file","body":"<p>I had the same issue in OpenJDK 7 and I managed to get around this exception by using an <code>imageType</code> of <code>TYPE_3BYTE_BGR</code> instead of <code>TYPE_4BYTE_ABGR</code> using the same OpenJDK.</p>\n"},{"tags":[],"owner":{"account_id":465074,"reputation":12318,"user_id":868941,"accept_rate":75,"display_name":"rmuller"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1485422126,"creation_date":1485422126,"answer_id":41870130,"question_id":3432388,"body_markdown":"You get the same error\r\n\r\n    Caused by: javax.imageio.IIOException: Invalid argument to native writeImage\r\n    at com.sun.imageio.plugins.jpeg.JPEGImageWriter.writeImage(Native Method)\r\n    at com.sun.imageio.plugins.jpeg.JPEGImageWriter.writeOnThread(JPEGImageWriter.java:1055)\r\n\r\nif you are using a not supported Color Space (in my case CYMK). See https://stackoverflow.com/q/3123574/868941 how to solve this.","title":"ImageIO not able to write a JPEG file","body":"<p>You get the same error</p>\n\n<pre><code>Caused by: javax.imageio.IIOException: Invalid argument to native writeImage\nat com.sun.imageio.plugins.jpeg.JPEGImageWriter.writeImage(Native Method)\nat com.sun.imageio.plugins.jpeg.JPEGImageWriter.writeOnThread(JPEGImageWriter.java:1055)\n</code></pre>\n\n<p>if you are using a not supported Color Space (in my case CYMK). See <a href=\"https://stackoverflow.com/q/3123574/868941\">How to convert from CMYK to RGB in Java correctly?</a> how to solve this.</p>\n"},{"comments":[{"owner":{"account_id":5570795,"reputation":2409,"user_id":4416221,"accept_rate":78,"display_name":"jotadepicas"},"score":0,"creation_date":1567107930,"post_id":57626892,"comment_id":101875443,"body_markdown":"I&#39;m hitting this issue because I&#39;m reading PNGs with alpha, and trying to write to JPG (well, not me, I&#39;m dealing with a legacy code that does this...). Can you suggest a workaround for this scenario? Thanks!","body":"I&#39;m hitting this issue because I&#39;m reading PNGs with alpha, and trying to write to JPG (well, not me, I&#39;m dealing with a legacy code that does this...). Can you suggest a workaround for this scenario? Thanks!"},{"owner":{"account_id":7238056,"reputation":176,"user_id":5522536,"accept_rate":25,"display_name":"Cempoalx&#243;chitl"},"score":1,"creation_date":1579501799,"post_id":57626892,"comment_id":105773631,"body_markdown":"Using ```BufferedImage.TYPE_INT_RGB``` solved the issue. [Full example](https://docs.oracle.com/javase/tutorial/essential/concurrency/examples/ForkBlur.java) (provided by Oracle)","body":"Using <code>BufferedImage.TYPE_INT_RGB</code> solved the issue. <a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/examples/ForkBlur.java\" rel=\"nofollow noreferrer\">Full example</a> (provided by Oracle)"}],"tags":[],"owner":{"account_id":1536969,"reputation":1409,"user_id":1432734,"display_name":"Adam Gawne-Cain"},"comment_count":2,"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1567246823,"creation_date":1566565351,"answer_id":57626892,"question_id":3432388,"body_markdown":"2019 answer:  Make sure your BufferedImage does not have alpha transparency.  JPEG does not support alpha, so if your image has alpha then ImageIO cannot write it to JPEG.\r\n\r\nUse the following code to ensure your image does not have alpha transparancy:\r\n\r\n    static BufferedImage ensureOpaque(BufferedImage bi) {\r\n        if (bi.getTransparency() == BufferedImage.OPAQUE)\r\n            return bi;\r\n        int w = bi.getWidth();\r\n        int h = bi.getHeight();\r\n        int[] pixels = new int[w * h];\r\n        bi.getRGB(0, 0, w, h, pixels, 0, w);\r\n        BufferedImage bi2 = new BufferedImage(w, h, BufferedImage.TYPE_INT_RGB);\r\n        bi2.setRGB(0, 0, w, h, pixels, 0, w);\r\n        return bi2;\r\n    }\r\n\r\n","title":"ImageIO not able to write a JPEG file","body":"<p>2019 answer:  Make sure your BufferedImage does not have alpha transparency.  JPEG does not support alpha, so if your image has alpha then ImageIO cannot write it to JPEG.</p>\n\n<p>Use the following code to ensure your image does not have alpha transparancy:</p>\n\n<pre><code>static BufferedImage ensureOpaque(BufferedImage bi) {\n    if (bi.getTransparency() == BufferedImage.OPAQUE)\n        return bi;\n    int w = bi.getWidth();\n    int h = bi.getHeight();\n    int[] pixels = new int[w * h];\n    bi.getRGB(0, 0, w, h, pixels, 0, w);\n    BufferedImage bi2 = new BufferedImage(w, h, BufferedImage.TYPE_INT_RGB);\n    bi2.setRGB(0, 0, w, h, pixels, 0, w);\n    return bi2;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5711658,"reputation":234,"user_id":4513455,"display_name":"Benjamin"},"score":0,"creation_date":1587494403,"post_id":57961428,"comment_id":108532668,"body_markdown":"I can confirm this works for the BufferedImages extracted from the ImageSegments of NITF files.","body":"I can confirm this works for the BufferedImages extracted from the ImageSegments of NITF files."}],"tags":[],"owner":{"account_id":1369771,"reputation":1668,"user_id":1305332,"accept_rate":26,"display_name":"Peter Quiring"},"comment_count":1,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1568653431,"creation_date":1568653431,"answer_id":57961428,"question_id":3432388,"body_markdown":"Here is some code to illustrate @Thunder idea to change the image type to TYPE_3BYTE_BGR\r\n\r\n    try {\r\n      BufferedImage input = ImageIO.read(new File(&quot;input.png&quot;));\r\n      System.out.println(&quot;input image type=&quot; + input.getType());\r\n      int width = input.getWidth();\r\n      int height = input.getHeight();\r\n      BufferedImage output = new BufferedImage(width, height, BufferedImage.TYPE_3BYTE_BGR);\r\n      int px[] = new int[width * height];\r\n      input.getRGB(0, 0, width, height, px, 0, width);\r\n      output.setRGB(0, 0, width, height, px, 0, width);\r\n      ImageIO.write(output, &quot;jpg&quot;, new File(&quot;output.jpg&quot;));\r\n    } catch (Exception e) {\r\n      e.printStackTrace();\r\n    }\r\n\r\n","title":"ImageIO not able to write a JPEG file","body":"<p>Here is some code to illustrate @Thunder idea to change the image type to TYPE_3BYTE_BGR</p>\n\n<pre><code>try {\n  BufferedImage input = ImageIO.read(new File(\"input.png\"));\n  System.out.println(\"input image type=\" + input.getType());\n  int width = input.getWidth();\n  int height = input.getHeight();\n  BufferedImage output = new BufferedImage(width, height, BufferedImage.TYPE_3BYTE_BGR);\n  int px[] = new int[width * height];\n  input.getRGB(0, 0, width, height, px, 0, width);\n  output.setRGB(0, 0, width, height, px, 0, width);\n  ImageIO.write(output, \"jpg\", new File(\"output.jpg\"));\n} catch (Exception e) {\n  e.printStackTrace();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20228,"reputation":40720,"user_id":48136,"display_name":"bric3"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686255246,"creation_date":1686255246,"answer_id":76435402,"question_id":3432388,"body_markdown":"I had a variation when the image I got was a `RenderedImage`, and instead of copying the byte array, I&#39;m using the `Raster` which is a rectangular image representation.\r\n\r\n```java\r\nvar newBufferedImage = new BufferedImage(\r\n    renderImg.getWidth(),\r\n    renderImg.getHeight(),\r\n    BufferedImage.TYPE_INT_RGB\r\n);\r\nrenderImg.copyData(newBufferedImage.getRaster());\r\n```\r\n\r\nDepending on your needs it might be interesting to get the raster from the `ColorModel`.","title":"ImageIO not able to write a JPEG file","body":"<p>I had a variation when the image I got was a <code>RenderedImage</code>, and instead of copying the byte array, I'm using the <code>Raster</code> which is a rectangular image representation.</p>\n<pre class=\"lang-java prettyprint-override\"><code>var newBufferedImage = new BufferedImage(\n    renderImg.getWidth(),\n    renderImg.getHeight(),\n    BufferedImage.TYPE_INT_RGB\n);\nrenderImg.copyData(newBufferedImage.getRaster());\n</code></pre>\n<p>Depending on your needs it might be interesting to get the raster from the <code>ColorModel</code>.</p>\n"}],"owner":{"account_id":6575,"reputation":1636,"user_id":11110,"accept_rate":82,"display_name":"Karan"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44126,"favorite_count":0,"down_vote_count":0,"up_vote_count":62,"accepted_answer_id":3432532,"answer_count":6,"score":62,"last_activity_date":1694053423,"creation_date":1281222286,"question_id":3432388,"body_markdown":"\r\nI have a BufferedImage I&#39;m trying to write to a jpeg file, but my Java program throws an exception. I&#39;m able to successfully save the same buffer to a gif and png. I&#39;ve tried looking around on Google for solutions, but to no avail.\r\n\r\nCode:\r\n\r\n\t   File outputfile = new File(&quot;tiles/&quot; + row + &quot;:&quot; + col + &quot;.jpg&quot;);\r\n\t   try {\r\n\t\t   ImageIO.write(mapBufferTiles[row][col], &quot;jpg&quot;, outputfile);\r\n\t   } catch (IOException e) {\r\n\t\t   \toutputfile.delete();\r\n\t   \t\tthrow new RuntimeException(e);\r\n\t   }\r\n\r\n\r\nException:\r\n\r\n\r\n\t Exception in thread &quot;main&quot; java.lang.RuntimeException: javax.imageio.IIOException: Invalid argument to native writeImage\r\n\t at MapServer.initMapBuffer(MapServer.java:90)\r\n\t at MapServer.&lt;init&gt;(MapServer.java:24)\r\n\t at MapServer.main(MapServer.java:118)\r\n\t Caused by: javax.imageio.IIOException: Invalid argument to native writeImage\r\n\t at com.sun.imageio.plugins.jpeg.JPEGImageWriter.writeImage(Native Method)\r\n\t at com.sun.imageio.plugins.jpeg.JPEGImageWriter.writeOnThread(JPEGImageWriter.java:1055)\r\n\t at com.sun.imageio.plugins.jpeg.JPEGImageWriter.write(JPEGImageWriter.java:357)\r\n\t at javax.imageio.ImageWriter.write(ImageWriter.java:615)\r\n\t at javax.imageio.ImageIO.doWrite(ImageIO.java:1602)\r\n\t at javax.imageio.ImageIO.write(ImageIO.java:1526)\r\n\t at MapServer.initMapBuffer(MapServer.java:87)\r\n\t ... 2 more\r\n","title":"ImageIO not able to write a JPEG file","body":"<p>I have a BufferedImage I'm trying to write to a jpeg file, but my Java program throws an exception. I'm able to successfully save the same buffer to a gif and png. I've tried looking around on Google for solutions, but to no avail.</p>\n\n<p>Code:</p>\n\n<pre><code>   File outputfile = new File(\"tiles/\" + row + \":\" + col + \".jpg\");\n   try {\n       ImageIO.write(mapBufferTiles[row][col], \"jpg\", outputfile);\n   } catch (IOException e) {\n        outputfile.delete();\n        throw new RuntimeException(e);\n   }\n</code></pre>\n\n<p>Exception:</p>\n\n<pre><code> Exception in thread \"main\" java.lang.RuntimeException: javax.imageio.IIOException: Invalid argument to native writeImage\n at MapServer.initMapBuffer(MapServer.java:90)\n at MapServer.&lt;init&gt;(MapServer.java:24)\n at MapServer.main(MapServer.java:118)\n Caused by: javax.imageio.IIOException: Invalid argument to native writeImage\n at com.sun.imageio.plugins.jpeg.JPEGImageWriter.writeImage(Native Method)\n at com.sun.imageio.plugins.jpeg.JPEGImageWriter.writeOnThread(JPEGImageWriter.java:1055)\n at com.sun.imageio.plugins.jpeg.JPEGImageWriter.write(JPEGImageWriter.java:357)\n at javax.imageio.ImageWriter.write(ImageWriter.java:615)\n at javax.imageio.ImageIO.doWrite(ImageIO.java:1602)\n at javax.imageio.ImageIO.write(ImageIO.java:1526)\n at MapServer.initMapBuffer(MapServer.java:87)\n ... 2 more\n</code></pre>\n"},{"tags":["java","gradle","minecraft","minecraft-forge"],"answers":[{"comments":[{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1694056659,"post_id":77056230,"comment_id":135841934,"body_markdown":"This is a duplicated answer since there are existing answers for the same issue. Please refer to those instead of adding more duplicates.","body":"This is a duplicated answer since there are existing answers for the same issue. Please refer to those instead of adding more duplicates."}],"tags":[],"owner":{"account_id":11647201,"reputation":1,"user_id":8529625,"display_name":"korbb"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694053292,"creation_date":1694053292,"answer_id":77056230,"question_id":77056192,"body_markdown":"Well, I&#39;m trolling I guess. Silly me knew I was using the x86 instead of the x64 architecture and still saw no red flags (internally) with the jvamargs. For future reference, you need to ensure your JDK is an x64 if your jvmargs require &gt;512m or whatever the cutoff is.","title":"Invalid maximum heap size: -Xmx4G The specified size exceeds the maximum representable size. (Gradle Minecraft Forge build)","body":"<p>Well, I'm trolling I guess. Silly me knew I was using the x86 instead of the x64 architecture and still saw no red flags (internally) with the jvamargs. For future reference, you need to ensure your JDK is an x64 if your jvmargs require &gt;512m or whatever the cutoff is.</p>\n"}],"owner":{"account_id":11647201,"reputation":1,"user_id":8529625,"display_name":"korbb"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":257,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1694069937,"answer_count":1,"score":0,"last_activity_date":1694053292,"creation_date":1694052520,"question_id":77056192,"body_markdown":"Trying to simply build forge 1.19.2 with via Gradle and I&#39;m getting weird jvm argument errors, likely due to the gradle.properties jvmargs.\r\n\r\nBuilding:\r\n- forge-1.19.2-43.2.23\r\n\r\nWith:\r\n- Gradle 7.5.1\r\n- Eclipse Temurin JDK 17.0.8.1+1 (x86 and is TRUE as the selected JDK by Gradle)\r\n- Latest version of Intellij IDEA Community version\r\n\r\n```\r\nInvalid maximum heap size: -Xmx4G\r\nThe specified size exceeds the maximum representable size.\r\nError: Could not create the Java Virtual Machine.\r\nError: A fatal exception has occurred. Program will exit.\r\norg.gradle.process.internal.ExecException: Process &#39;command &#39;C:\\Program Files (x86)\\Eclipse Adoptium\\jdk-17.0.8.101-hotspot\\bin\\java.exe&#39;&#39; finished with non-zero exit value 1\r\n\tat org.gradle.process.internal.DefaultExecHandle$ExecResultImpl.assertNormalExitValue(DefaultExecHandle.java:415)\r\n\tat org.gradle.process.internal.DefaultJavaExecAction.execute(DefaultJavaExecAction.java:52)\r\nCould not create the Java Virtual Machine.\r\n\r\n\tat org.gradle.process.internal.DefaultExecActionFactory.javaexec(DefaultExecActionFactory.java:195)\r\n\tat org.gradle.api.internal.project.DefaultProject.javaexec(DefaultProject.java:1161)\r\n\tat net.minecraftforge.gradle.mcp.function.ExecuteFunction.execute(ExecuteFunction.java:127)\r\n\tat net.minecraftforge.gradle.mcp.util.MCPRuntime$Step.execute(MCPRuntime.java:178)\r\nA fatal exception has occurred. Program will exit.\r\n```\r\n\r\n\r\n\r\nThe thing is, when I raise the gradle.properties jvmarg to, say, the original 3G, I get a different error entirely:\r\n\r\n\r\n```\r\nUnable to start the daemon process.\r\nThis problem might be caused by incorrect configuration of the daemon.\r\nFor example, an unrecognized jvm option is used.\r\n```\r\n\r\nThe only way I could get it to even start building was to lower the jvmarg down to 512m, but then I&#39;m back at the first error. Thoughts? ","title":"Invalid maximum heap size: -Xmx4G The specified size exceeds the maximum representable size. (Gradle Minecraft Forge build)","body":"<p>Trying to simply build forge 1.19.2 with via Gradle and I'm getting weird jvm argument errors, likely due to the gradle.properties jvmargs.</p>\n<p>Building:</p>\n<ul>\n<li>forge-1.19.2-43.2.23</li>\n</ul>\n<p>With:</p>\n<ul>\n<li>Gradle 7.5.1</li>\n<li>Eclipse Temurin JDK 17.0.8.1+1 (x86 and is TRUE as the selected JDK by Gradle)</li>\n<li>Latest version of Intellij IDEA Community version</li>\n</ul>\n<pre><code>Invalid maximum heap size: -Xmx4G\nThe specified size exceeds the maximum representable size.\nError: Could not create the Java Virtual Machine.\nError: A fatal exception has occurred. Program will exit.\norg.gradle.process.internal.ExecException: Process 'command 'C:\\Program Files (x86)\\Eclipse Adoptium\\jdk-17.0.8.101-hotspot\\bin\\java.exe'' finished with non-zero exit value 1\n    at org.gradle.process.internal.DefaultExecHandle$ExecResultImpl.assertNormalExitValue(DefaultExecHandle.java:415)\n    at org.gradle.process.internal.DefaultJavaExecAction.execute(DefaultJavaExecAction.java:52)\nCould not create the Java Virtual Machine.\n\n    at org.gradle.process.internal.DefaultExecActionFactory.javaexec(DefaultExecActionFactory.java:195)\n    at org.gradle.api.internal.project.DefaultProject.javaexec(DefaultProject.java:1161)\n    at net.minecraftforge.gradle.mcp.function.ExecuteFunction.execute(ExecuteFunction.java:127)\n    at net.minecraftforge.gradle.mcp.util.MCPRuntime$Step.execute(MCPRuntime.java:178)\nA fatal exception has occurred. Program will exit.\n</code></pre>\n<p>The thing is, when I raise the gradle.properties jvmarg to, say, the original 3G, I get a different error entirely:</p>\n<pre><code>Unable to start the daemon process.\nThis problem might be caused by incorrect configuration of the daemon.\nFor example, an unrecognized jvm option is used.\n</code></pre>\n<p>The only way I could get it to even start building was to lower the jvmarg down to 512m, but then I'm back at the first error. Thoughts?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":3,"creation_date":1694007361,"post_id":77052203,"comment_id":135834623,"body_markdown":"You appear to be doing it the (a) right way: `draw`ing and then `fill`ing the same shape with different colors.  You could also consider doing it in the opposite order, which I expect to emphasize the stroke more.  Caveats include that yes, if you use shape dimensions or stroke thicknesses that are not integers then you will be subject to FP rounding.  Perhaps you could mitigate that by [requesting higher quality rendering by setting rendering hints](https://docs.oracle.com/javase/tutorial/2d/advanced/quality.html), but ultimately, your output device is pixelated, not continuous.","body":"You appear to be doing it the (a) right way: <code>draw</code>ing and then <code>fill</code>ing the same shape with different colors.  You could also consider doing it in the opposite order, which I expect to emphasize the stroke more.  Caveats include that yes, if you use shape dimensions or stroke thicknesses that are not integers then you will be subject to FP rounding.  Perhaps you could mitigate that by <a href=\"https://docs.oracle.com/javase/tutorial/2d/advanced/quality.html\" rel=\"nofollow noreferrer\">requesting higher quality rendering by setting rendering hints</a>, but ultimately, your output device is pixelated, not continuous."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1694029351,"post_id":77052203,"comment_id":135839199,"body_markdown":"[Graphics2D docs](https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/java/awt/Graphics2D.html#rendering-compatibility-issues-heading): “The JDK 1.1 rendering model is based on a pixelization model that specifies that coordinates are infinitely thin, lying between the pixels. Drawing operations are performed using a one-pixel wide pen that fills the pixel below and to the right of the anchor point on the path.” And later: “Java 2D API maintains compatibility with JDK 1.1 rendering behavior, such that legacy operations and existing renderer behavior is unchanged under Java 2D API.”","body":"<a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/java/awt/Graphics2D.html#rendering-compatibility-issues-heading\" rel=\"nofollow noreferrer\">Graphics2D docs</a>: “The JDK 1.1 rendering model is based on a pixelization model that specifies that coordinates are infinitely thin, lying between the pixels. Drawing operations are performed using a one-pixel wide pen that fills the pixel below and to the right of the anchor point on the path.” And later: “Java 2D API maintains compatibility with JDK 1.1 rendering behavior, such that legacy operations and existing renderer behavior is unchanged under Java 2D API.”"}],"answers":[{"tags":[],"owner":{"account_id":27073036,"reputation":33,"user_id":22484401,"display_name":"DefaultNano"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1694053275,"creation_date":1694053275,"answer_id":77056227,"question_id":77052203,"body_markdown":"It seems like I misunderstood what the .drawRoundRect method does, and assumed it also drew the fill. It does not. By drawing the fill first and then drawing the stroke, the problem with the stroke seeming to be shorter on one side is solved.","title":"how to have different stroke and fill colors for a shape in Java Graphics2D?","body":"<p>It seems like I misunderstood what the .drawRoundRect method does, and assumed it also drew the fill. It does not. By drawing the fill first and then drawing the stroke, the problem with the stroke seeming to be shorter on one side is solved.</p>\n"}],"owner":{"account_id":27073036,"reputation":33,"user_id":22484401,"display_name":"DefaultNano"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77056227,"answer_count":1,"score":2,"last_activity_date":1694053275,"creation_date":1694005644,"question_id":77052203,"body_markdown":"I&#39;m trying to figure out how to draw a rounded rectangle with a colored stroke. Below is the code I have so far:\r\n\r\n            float thickness = textbox.getStroke();\r\n            g2d.setStroke(new BasicStroke(thickness));\r\n            \r\n            g2d.setColor(colorsList[textbox.getStrokeColor()]);\r\n            g2d.drawRoundRect(x, y, xSize, ySize, round, round);\r\n            g2d.setColor(colorsList[textbox.getColor()]); // set box color\r\n            g2d.fillRoundRect(x, y, xSize, ySize, round, round);\r\n            \r\n            g2d.setStroke(new BasicStroke(0));\r\n\r\n[![This][1]][1]\r\n\r\nThis is the stroke that comes out of the above code. It draws a rounded rectangle with the stroke and then the smaller fill inside, imitating having a stroke (in fact, this can be done without strokes at all and just using a slightly larger rounded rect). However, since the precision of the graphics 2D goes up to int, it&#39;s quite clear that the top of the stroke is slightly smaller than the bottom, and it&#39;s more so the smaller the stroke is.\r\n\r\nInstead, I want to use something like g2d.setStrokeColor() (this does not exist, as far as I  know) which can allow me to simply drawRoundRect() and not have to worry about filling the center fill with another roundedRect to get a different color.\r\n\r\n  [1]: https://i.stack.imgur.com/jZHvW.png","title":"how to have different stroke and fill colors for a shape in Java Graphics2D?","body":"<p>I'm trying to figure out how to draw a rounded rectangle with a colored stroke. Below is the code I have so far:</p>\n<pre><code>        float thickness = textbox.getStroke();\n        g2d.setStroke(new BasicStroke(thickness));\n        \n        g2d.setColor(colorsList[textbox.getStrokeColor()]);\n        g2d.drawRoundRect(x, y, xSize, ySize, round, round);\n        g2d.setColor(colorsList[textbox.getColor()]); // set box color\n        g2d.fillRoundRect(x, y, xSize, ySize, round, round);\n        \n        g2d.setStroke(new BasicStroke(0));\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/jZHvW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jZHvW.png\" alt=\"This\" /></a></p>\n<p>This is the stroke that comes out of the above code. It draws a rounded rectangle with the stroke and then the smaller fill inside, imitating having a stroke (in fact, this can be done without strokes at all and just using a slightly larger rounded rect). However, since the precision of the graphics 2D goes up to int, it's quite clear that the top of the stroke is slightly smaller than the bottom, and it's more so the smaller the stroke is.</p>\n<p>Instead, I want to use something like g2d.setStrokeColor() (this does not exist, as far as I  know) which can allow me to simply drawRoundRect() and not have to worry about filling the center fill with another roundedRect to get a different color.</p>\n"},{"tags":["java","gradle","annotation-processing"],"owner":{"account_id":6026159,"reputation":639,"user_id":4812741,"accept_rate":42,"display_name":"Ger"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694052434,"creation_date":1694052434,"question_id":77056191,"body_markdown":"I have a custom annotation processor and would like to test it locally, but I&#39;m having trouble configuring the annotation processor for this.\r\n\r\n**build.gradle**\r\n\r\n    plugins {\r\n        id(&quot;java&quot;)\r\n    }\r\n    \r\n    group = &quot;com.abb.Cleaner&quot;\r\n    version = &quot;1.0-SNAPSHOT&quot;\r\n    \r\n    repositories {\r\n        mavenCentral()\r\n    }\r\n    \r\n    dependencies {\r\n        testImplementation(platform(&quot;org.junit:junit-bom:5.9.1&quot;))\r\n        testImplementation(&quot;org.junit.jupiter:junit-jupiter&quot;)\r\n        implementation(&quot;javax.annotation:javax.annotation-api:1.3.2&quot;)\r\n        implementation(&quot;com.google.auto.service:auto-service:1.0-rc7&quot;)\r\n        annotationProcessor(&quot;com.google.auto.service:auto-service:1.0-rc7&quot;)\r\n    \r\n    }\r\n    \r\n    tasks.test {\r\n        useJUnitPlatform()\r\n    }\r\n\r\n**annotation processor**\r\n\r\n    @SupportedAnnotationTypes(&quot;com.abb.Cleaner&quot;)\r\n    @SupportedSourceVersion(SourceVersion.RELEASE_8)\r\n    @AutoService(Processor.class)\r\n    public class CleanerProcessor extends AbstractProcessor {\r\n    \r\n        @Override\r\n        public boolean process(Set&lt;? extends TypeElement&gt; annotations, RoundEnvironment roundEnv) {\r\n            //...\r\n            return true;\r\n        }\r\n    }\r\n\r\n**run ./gradlew clean build**\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/jmY2l.png\r\n\r\nHow can I run it locally through a `main` method to see if the annotation is working?\r\n\r\nEx: \r\n\r\n    public class Test {\r\n    \r\n        @Cleanner\r\n        private String text1;\r\n        @Cleanner\r\n        private String text2;\r\n    \r\n        public Test(String text1, String text2) {\r\n            this.text1 = text1;\r\n            this.text2 = text2;\r\n        }\r\n    \r\n        // get / set\r\n\r\n    public class Main {\r\n    \r\n        public static void main(String[] args) {\r\n    \r\n            Testetest = new Test(&quot;car&quot;, &quot;ferrai&quot;);\r\n            System.out.println(teste.getText1);\r\n            System.out.println(test.getText2());\r\n        }\r\n    }","title":"How to run a custom Java annotation processor locally with Gradle?","body":"<p>I have a custom annotation processor and would like to test it locally, but I'm having trouble configuring the annotation processor for this.</p>\n<p><strong>build.gradle</strong></p>\n<pre><code>plugins {\n    id(&quot;java&quot;)\n}\n\ngroup = &quot;com.abb.Cleaner&quot;\nversion = &quot;1.0-SNAPSHOT&quot;\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    testImplementation(platform(&quot;org.junit:junit-bom:5.9.1&quot;))\n    testImplementation(&quot;org.junit.jupiter:junit-jupiter&quot;)\n    implementation(&quot;javax.annotation:javax.annotation-api:1.3.2&quot;)\n    implementation(&quot;com.google.auto.service:auto-service:1.0-rc7&quot;)\n    annotationProcessor(&quot;com.google.auto.service:auto-service:1.0-rc7&quot;)\n\n}\n\ntasks.test {\n    useJUnitPlatform()\n}\n</code></pre>\n<p><strong>annotation processor</strong></p>\n<pre><code>@SupportedAnnotationTypes(&quot;com.abb.Cleaner&quot;)\n@SupportedSourceVersion(SourceVersion.RELEASE_8)\n@AutoService(Processor.class)\npublic class CleanerProcessor extends AbstractProcessor {\n\n    @Override\n    public boolean process(Set&lt;? extends TypeElement&gt; annotations, RoundEnvironment roundEnv) {\n        //...\n        return true;\n    }\n}\n</code></pre>\n<p><strong>run ./gradlew clean build</strong></p>\n<p><a href=\"https://i.stack.imgur.com/jmY2l.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jmY2l.png\" alt=\"enter image description here\" /></a></p>\n<p>How can I run it locally through a <code>main</code> method to see if the annotation is working?</p>\n<p>Ex:</p>\n<pre><code>public class Test {\n\n    @Cleanner\n    private String text1;\n    @Cleanner\n    private String text2;\n\n    public Test(String text1, String text2) {\n        this.text1 = text1;\n        this.text2 = text2;\n    }\n\n    // get / set\n\npublic class Main {\n\n    public static void main(String[] args) {\n\n        Testetest = new Test(&quot;car&quot;, &quot;ferrai&quot;);\n        System.out.println(teste.getText1);\n        System.out.println(test.getText2());\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","schedule","quartz"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1693998309,"post_id":77050407,"comment_id":135832599,"body_markdown":"Please provide a [mre]. The problem is with the value of the start at and end at values (which are inserted as `2023-09-07 20:50:55.0(Timestamp), 2023-09-08 20:50:55.0(Timestamp)` according to your own log), so with those values, it will not start before `2023-09-07 20:50:55.0`. Seems somewhere between receiving the request, and storing it in the database, the wrong timezone is applied in some conversion of the parameters.","body":"Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. The problem is with the value of the start at and end at values (which are inserted as <code>2023-09-07 20:50:55.0(Timestamp), 2023-09-08 20:50:55.0(Timestamp)</code> according to your own log), so with those values, it will not start before <code>2023-09-07 20:50:55.0</code>. Seems somewhere between receiving the request, and storing it in the database, the wrong timezone is applied in some conversion of the parameters."},{"owner":{"account_id":24275549,"reputation":21,"user_id":18222899,"display_name":"liang li"},"score":0,"creation_date":1694047669,"post_id":77050407,"comment_id":135841276,"body_markdown":"I&#39;ve changed the description of problem and add a  minimal reproducible example,Based on your answer, I now tentatively confirm that this may be a problem with SpringBoot-jackson not specifying a time zone when receiving time parameters.","body":"I&#39;ve changed the description of problem and add a  minimal reproducible example,Based on your answer, I now tentatively confirm that this may be a problem with SpringBoot-jackson not specifying a time zone when receiving time parameters."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1694069708,"post_id":77050407,"comment_id":135843187,"body_markdown":"The problem is probably the use of `java.util.Date`.","body":"The problem is probably the use of <code>java.util.Date</code>."}],"owner":{"account_id":24275549,"reputation":21,"user_id":18222899,"display_name":"liang li"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694047462,"creation_date":1693990447,"question_id":77050407,"body_markdown":"As you can see, I am building a scheduled task scheduler using Spring Boot and Quartz. Here is the core logic for generating Job and Trigger:\r\n\r\nI have already included the Quartz Spring Boot dependency as follows:\r\n```xml\r\n  &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-quartz&lt;/artifactId&gt;\r\n  &lt;/dependency&gt;\r\n\r\n```\r\nThen I  defined a TimeJob class entity and saved it to the database using MybatisPlus\r\n```java\r\n@Data\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@TableName(&quot;time_job&quot;)\r\npublic class TimeJob {\r\n\r\n    @Null(groups = {Add.class},message = &quot;不允许指定id&quot;)\r\n    @NotNull(groups = {Update.class},message = &quot;不允许指定id&quot;)\r\n    @TableId(type = IdType.AUTO)\r\n    private Integer jobId;\r\n   \r\n    @NotBlank(groups = {Add.class,Update.class},message = &quot;jobName不能为空&quot;)\r\n    private String jobName;\r\n\r\n    @Null(groups = {Add.class,Update.class},message = &quot;不允许指定time&quot;)\r\n    @JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)\r\n    private Date createTime;\r\n\r\n    @Null(groups = {Add.class,Update.class},message = &quot;不允许指定time&quot;)\r\n    @JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)\r\n    private Date updateTime;\r\n\r\n   \r\n  \r\n    @NotBlank(groups = {Add.class,Update.class},message = &quot;cron表达式不能为空&quot;)\r\n    private String cronExpress;\r\n\r\n    @Pattern(groups = {Add.class},regexp = &quot;^\\\\[[1-9]+(,[1-9]+)*\\\\]$&quot;,message = &quot;不符合数组规范&quot;)\r\n    private String floorList;\r\n\r\n\r\n  \r\n    @NotNull(groups = {Add.class,Update.class},message = &quot;startAt不能为空&quot;)\r\n    @JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)\r\n    private Date startAt;\r\n\r\n    @NotNull(groups = {Add.class,Update.class},message = &quot;endAt不能为空&quot;)\r\n    @JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)\r\n    private Date endAt;\r\n\r\n   \r\n    @NotNull(groups = {Add.class,Update.class},message = &quot;enabled不能为空&quot;)\r\n    private Boolean enabled;\r\n\r\n\r\n    @NotNull(groups = {Add.class,Update.class},message = &quot;UnitsId不能为空&quot;)\r\n    private Integer unitsId;\r\n\r\n\r\n    @Null(groups = {Add.class,Update.class},message = &quot;不允许指定createBy&quot;)\r\n    private Integer createBy;\r\n\r\n\r\n    @Null(groups = {Add.class,Update.class},message = &quot;不允许指定User name&quot;)\r\n    @TableField(exist = false)\r\n    private String createName;\r\n}\r\n\r\n```\r\nThen I implemented an Http interface to store the TimeJob entity and add scheduled tasks to Quartz synchronously\r\n```java\r\n @PostMapping(&quot;/job&quot;)\r\npublic CommonResult&lt;String&gt; addTimeJob(@RequestBody @Validated(Add.class) TimeJob timeJob) throws FloorFormatException, SchedulerException {\r\n        int userId = StpUtil.getLoginIdAsInt();\r\n        timeJob.setCreateBy(userId);\r\n        timeJob.setCreateTime(new Date());\r\n        timeJobService.saveJob(timeJob);\r\n        return CommonResult.success(&quot;add success&quot;);\r\n}\r\n```\r\nHere is the core logic of saveJob:\r\n\r\n```java\r\n timeJobMapper.insert(timeJob);\r\n JobDetail jobDetail = JobBuilder.newJob(PubRedisByteJob.class)\r\n                .usingJobData(&quot;data&quot;,ByteUtils.byteArrayTo0xStringArray(data))\r\n                .withIdentity(timeJob.getJobName()+&quot;:&quot;+timeJob.getJobId().toString(),&quot;PubRedisByteJob&quot;)\r\n                .build();//执行\r\n CronTrigger  trigger = TriggerBuilder.newTrigger()\r\n                .withIdentity(timeJob.getJobName()+&quot;:&quot;+timeJob.getJobId().toString(),&quot;PubRedisByteTrigger&quot;)\r\n                .startAt(timeJob.getStartAt())\r\n                .endAt(timeJob.getEndAt())\r\n                .withSchedule(CronScheduleBuilder.cronSchedule(timeJob.getCronExpress())\r\n                        .inTimeZone(TimeZone.getTimeZone(&quot;Asia/Shanghai&quot;)))\r\n                .build();//执行\r\n        scheduler.scheduleJob(jobDetail,trigger);\r\n        SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\r\n        log.info(&quot;next trigger time is {}&quot;,sdf.format(trigger.getNextFireTime()));\r\n\r\n```\r\nWhen I pass the following parameters:\r\n```json\r\n{\r\n    &quot;jobName&quot;: &quot;test2&quot;,\r\n    &quot;cronExpress&quot;: &quot;*/5 * * * * ?&quot;,\r\n    &quot;floorList&quot;: &quot;[1]&quot;,\r\n    &quot;startAt&quot;: &quot;2023-09-07 12:50:55&quot;,\r\n    &quot;endAt&quot;: &quot;2023-09-08 12:50:55&quot;,\r\n    &quot;enabled&quot;: true,\r\n    &quot;remoteControlType&quot;: 1,\r\n    &quot;callUp&quot;: true,\r\n    &quot;unitsId&quot;: 26\r\n}\r\n\r\n```\r\nI&#39;ve already converted this JSON into a Java object named timeJob.\r\n\r\nThe content of the console output is:\r\n\r\n```log\r\n2023-09-06 16:44:32.245 [][] INFO  o.quartz.core.QuartzScheduler:547 - Scheduler quartzScheduler_$_NON_CLUSTERED started.\r\n2023-09-06 16:44:32.253 [][] INFO  c.t.RmsAdminApplication:61  - Started RmsAdminApplication in 4.991 seconds (JVM running for 5.516)\r\n2023-09-06 16:44:39.460 [][] INFO  c.z.hikari.HikariDataSource:110 - HikariPool-1 - Starting...\r\n2023-09-06 16:44:39.669 [][] INFO  c.z.hikari.HikariDataSource:123 - HikariPool-1 - Start completed.\r\n2023-09-06 16:44:39.709 [][] DEBUG c.t.m.TimeJobMapper.insert:137 - ==&gt;  Preparing: INSERT INTO time_job ( job_name, create_time, cron_express, floor_list, start_at, end_at, enabled, remote_control_type, call_up, units_id, create_by ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )\r\n2023-09-06 16:44:39.730 [][] DEBUG c.t.m.TimeJobMapper.insert:137 - ==&gt; Parameters: test2(String), 2023-09-06 16:44:39.456(Timestamp), */5 * * * * ?(String), [1](String), 2023-09-07 20:50:55.0(Timestamp), 2023-09-08 20:50:55.0(Timestamp), true(Boolean), 1(Integer), true(Boolean), 26(Integer), 12(Integer)\r\n2023-09-06 16:44:39.732 [][] DEBUG c.t.m.TimeJobMapper.insert:137 - &lt;==    Updates: 1\r\n2023-09-06 16:44:39.751 [][] INFO  c.t.service.JobService:86  - next trigger time is 2023-09-07 20:50:55\r\n\r\n```\r\n\r\nI am suspecting if there might be an issue with Quartz&#39;s timezone configuration, but I don&#39;t have concrete evidence.\r\n\r\n\r\n\r\nI have already tried configuring Quartz&#39;s timezone as &quot;Asia/Shanghai&quot; in both application.yml and the code, but it didn&#39;t solve my problem. What else can I try?","title":"Why is the next execution time of my Quartz trigger delayed by 8 hours?","body":"<p>As you can see, I am building a scheduled task scheduler using Spring Boot and Quartz. Here is the core logic for generating Job and Trigger:</p>\n<p>I have already included the Quartz Spring Boot dependency as follows:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>  &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-quartz&lt;/artifactId&gt;\n  &lt;/dependency&gt;\n\n</code></pre>\n<p>Then I  defined a TimeJob class entity and saved it to the database using MybatisPlus</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@TableName(&quot;time_job&quot;)\npublic class TimeJob {\n\n    @Null(groups = {Add.class},message = &quot;不允许指定id&quot;)\n    @NotNull(groups = {Update.class},message = &quot;不允许指定id&quot;)\n    @TableId(type = IdType.AUTO)\n    private Integer jobId;\n   \n    @NotBlank(groups = {Add.class,Update.class},message = &quot;jobName不能为空&quot;)\n    private String jobName;\n\n    @Null(groups = {Add.class,Update.class},message = &quot;不允许指定time&quot;)\n    @JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)\n    private Date createTime;\n\n    @Null(groups = {Add.class,Update.class},message = &quot;不允许指定time&quot;)\n    @JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)\n    private Date updateTime;\n\n   \n  \n    @NotBlank(groups = {Add.class,Update.class},message = &quot;cron表达式不能为空&quot;)\n    private String cronExpress;\n\n    @Pattern(groups = {Add.class},regexp = &quot;^\\\\[[1-9]+(,[1-9]+)*\\\\]$&quot;,message = &quot;不符合数组规范&quot;)\n    private String floorList;\n\n\n  \n    @NotNull(groups = {Add.class,Update.class},message = &quot;startAt不能为空&quot;)\n    @JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)\n    private Date startAt;\n\n    @NotNull(groups = {Add.class,Update.class},message = &quot;endAt不能为空&quot;)\n    @JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)\n    private Date endAt;\n\n   \n    @NotNull(groups = {Add.class,Update.class},message = &quot;enabled不能为空&quot;)\n    private Boolean enabled;\n\n\n    @NotNull(groups = {Add.class,Update.class},message = &quot;UnitsId不能为空&quot;)\n    private Integer unitsId;\n\n\n    @Null(groups = {Add.class,Update.class},message = &quot;不允许指定createBy&quot;)\n    private Integer createBy;\n\n\n    @Null(groups = {Add.class,Update.class},message = &quot;不允许指定User name&quot;)\n    @TableField(exist = false)\n    private String createName;\n}\n\n</code></pre>\n<p>Then I implemented an Http interface to store the TimeJob entity and add scheduled tasks to Quartz synchronously</p>\n<pre class=\"lang-java prettyprint-override\"><code> @PostMapping(&quot;/job&quot;)\npublic CommonResult&lt;String&gt; addTimeJob(@RequestBody @Validated(Add.class) TimeJob timeJob) throws FloorFormatException, SchedulerException {\n        int userId = StpUtil.getLoginIdAsInt();\n        timeJob.setCreateBy(userId);\n        timeJob.setCreateTime(new Date());\n        timeJobService.saveJob(timeJob);\n        return CommonResult.success(&quot;add success&quot;);\n}\n</code></pre>\n<p>Here is the core logic of saveJob:</p>\n<pre class=\"lang-java prettyprint-override\"><code> timeJobMapper.insert(timeJob);\n JobDetail jobDetail = JobBuilder.newJob(PubRedisByteJob.class)\n                .usingJobData(&quot;data&quot;,ByteUtils.byteArrayTo0xStringArray(data))\n                .withIdentity(timeJob.getJobName()+&quot;:&quot;+timeJob.getJobId().toString(),&quot;PubRedisByteJob&quot;)\n                .build();//执行\n CronTrigger  trigger = TriggerBuilder.newTrigger()\n                .withIdentity(timeJob.getJobName()+&quot;:&quot;+timeJob.getJobId().toString(),&quot;PubRedisByteTrigger&quot;)\n                .startAt(timeJob.getStartAt())\n                .endAt(timeJob.getEndAt())\n                .withSchedule(CronScheduleBuilder.cronSchedule(timeJob.getCronExpress())\n                        .inTimeZone(TimeZone.getTimeZone(&quot;Asia/Shanghai&quot;)))\n                .build();//执行\n        scheduler.scheduleJob(jobDetail,trigger);\n        SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\n        log.info(&quot;next trigger time is {}&quot;,sdf.format(trigger.getNextFireTime()));\n\n</code></pre>\n<p>When I pass the following parameters:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;jobName&quot;: &quot;test2&quot;,\n    &quot;cronExpress&quot;: &quot;*/5 * * * * ?&quot;,\n    &quot;floorList&quot;: &quot;[1]&quot;,\n    &quot;startAt&quot;: &quot;2023-09-07 12:50:55&quot;,\n    &quot;endAt&quot;: &quot;2023-09-08 12:50:55&quot;,\n    &quot;enabled&quot;: true,\n    &quot;remoteControlType&quot;: 1,\n    &quot;callUp&quot;: true,\n    &quot;unitsId&quot;: 26\n}\n\n</code></pre>\n<p>I've already converted this JSON into a Java object named timeJob.</p>\n<p>The content of the console output is:</p>\n<pre><code>2023-09-06 16:44:32.245 [][] INFO  o.quartz.core.QuartzScheduler:547 - Scheduler quartzScheduler_$_NON_CLUSTERED started.\n2023-09-06 16:44:32.253 [][] INFO  c.t.RmsAdminApplication:61  - Started RmsAdminApplication in 4.991 seconds (JVM running for 5.516)\n2023-09-06 16:44:39.460 [][] INFO  c.z.hikari.HikariDataSource:110 - HikariPool-1 - Starting...\n2023-09-06 16:44:39.669 [][] INFO  c.z.hikari.HikariDataSource:123 - HikariPool-1 - Start completed.\n2023-09-06 16:44:39.709 [][] DEBUG c.t.m.TimeJobMapper.insert:137 - ==&gt;  Preparing: INSERT INTO time_job ( job_name, create_time, cron_express, floor_list, start_at, end_at, enabled, remote_control_type, call_up, units_id, create_by ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )\n2023-09-06 16:44:39.730 [][] DEBUG c.t.m.TimeJobMapper.insert:137 - ==&gt; Parameters: test2(String), 2023-09-06 16:44:39.456(Timestamp), */5 * * * * ?(String), [1](String), 2023-09-07 20:50:55.0(Timestamp), 2023-09-08 20:50:55.0(Timestamp), true(Boolean), 1(Integer), true(Boolean), 26(Integer), 12(Integer)\n2023-09-06 16:44:39.732 [][] DEBUG c.t.m.TimeJobMapper.insert:137 - &lt;==    Updates: 1\n2023-09-06 16:44:39.751 [][] INFO  c.t.service.JobService:86  - next trigger time is 2023-09-07 20:50:55\n\n</code></pre>\n<p>I am suspecting if there might be an issue with Quartz's timezone configuration, but I don't have concrete evidence.</p>\n<p>I have already tried configuring Quartz's timezone as &quot;Asia/Shanghai&quot; in both application.yml and the code, but it didn't solve my problem. What else can I try?</p>\n"},{"tags":["java","php","oop"],"comments":[{"owner":{"account_id":109733,"reputation":31428,"user_id":290629,"accept_rate":88,"display_name":"卢声远 Shengyuan Lu"},"score":0,"creation_date":1285659657,"post_id":3810610,"comment_id":4042017,"body_markdown":"how to define &#39;100% abstract class&#39;?","body":"how to define &#39;100% abstract class&#39;?"},{"owner":{"account_id":8326,"reputation":258555,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":0,"creation_date":1285659703,"post_id":3810610,"comment_id":4042024,"body_markdown":"java or php? which one is it?","body":"java or php? which one is it?"},{"owner":{"account_id":173378,"reputation":4592,"user_id":402008,"accept_rate":100,"display_name":"Jeroen Rosenberg"},"score":3,"creation_date":1285660294,"post_id":3810610,"comment_id":4042111,"body_markdown":"I think he means an abstract class with only abstract methods, no default implementations","body":"I think he means an abstract class with only abstract methods, no default implementations"}],"answers":[{"comments":[{"owner":{"account_id":46144,"reputation":7024,"user_id":136248,"accept_rate":100,"display_name":"Benoit Courtine"},"score":6,"creation_date":1285660007,"post_id":3810628,"comment_id":4042066,"body_markdown":"in a 100% abstract class, you can also define non constant variables that can be herited. It is not possible with interfaces.","body":"in a 100% abstract class, you can also define non constant variables that can be herited. It is not possible with interfaces."},{"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"score":0,"creation_date":1285660083,"post_id":3810628,"comment_id":4042074,"body_markdown":"@Benoit Courtine exactly. I was adding this while you commented :) thanks anyway.","body":"@Benoit Courtine exactly. I was adding this while you commented :) thanks anyway."},{"owner":{"account_id":173378,"reputation":4592,"user_id":402008,"accept_rate":100,"display_name":"Jeroen Rosenberg"},"score":2,"creation_date":1285660247,"post_id":3810628,"comment_id":4042101,"body_markdown":"another thing is constructors... this is also not possible in interfaces","body":"another thing is constructors... this is also not possible in interfaces"},{"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"score":0,"creation_date":1285660802,"post_id":3810628,"comment_id":4042154,"body_markdown":"static methods don&#39;t contribute quite a lot, they can be in any class. but yes, they count. :)","body":"static methods don&#39;t contribute quite a lot, they can be in any class. but yes, they count. :)"},{"owner":{"account_id":8326,"reputation":258555,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":0,"creation_date":1285723026,"post_id":3810628,"comment_id":4051369,"body_markdown":"@Bozho, re: static methods. My point was that since you cannot place them into the interface, you have to make another class just to put them somewhere. This is why we have the Collections helper class in addition to the Collection interface.","body":"@Bozho, re: static methods. My point was that since you cannot place them into the interface, you have to make another class just to put them somewhere. This is why we have the Collections helper class in addition to the Collection interface."}],"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"comment_count":5,"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1285660061,"creation_date":1285659627,"answer_id":3810628,"question_id":3810610,"body_markdown":"If by &quot;100% abstract class&quot; you mean &quot;abstract class with no concrete methods&quot;, then I can think of a reason: visibility.\r\n\r\nYou can define an abstract method to be protected, and hence not part of the public API of the class. However, that seems like an odd design.\r\n\r\nAnother thing that came to my mind is when you expect to add common functionality to the base class - i.e. if it is likely to have some utility methods shared by all implementors, but these methods are not implemented.\r\n\r\nAnother thing - instance variables. You can have inheritable instance variables in the abstract class.","title":"100% Abstract class vs Interface","body":"<p>If by \"100% abstract class\" you mean \"abstract class with no concrete methods\", then I can think of a reason: visibility.</p>\n\n<p>You can define an abstract method to be protected, and hence not part of the public API of the class. However, that seems like an odd design.</p>\n\n<p>Another thing that came to my mind is when you expect to add common functionality to the base class - i.e. if it is likely to have some utility methods shared by all implementors, but these methods are not implemented.</p>\n\n<p>Another thing - instance variables. You can have inheritable instance variables in the abstract class.</p>\n"},{"tags":[],"owner":{"account_id":142529,"reputation":21516,"user_id":350294,"accept_rate":97,"display_name":"Alex Pliutau"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1285659756,"creation_date":1285659756,"answer_id":3810642,"question_id":3810610,"body_markdown":"100% Abstract class isn&#39;t good idea. For common structure of child classes uses Interface. For similiar classes with same some methods and not same others more better to use Abstract Class.","title":"100% Abstract class vs Interface","body":"<p>100% Abstract class isn't good idea. For common structure of child classes uses Interface. For similiar classes with same some methods and not same others more better to use Abstract Class.</p>\n"},{"tags":[],"owner":{"account_id":173378,"reputation":4592,"user_id":402008,"accept_rate":100,"display_name":"Jeroen Rosenberg"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1285659947,"creation_date":1285659947,"answer_id":3810665,"question_id":3810610,"body_markdown":"Next to visibility, another reason could be to be able to specify a certain Constructor you want all implementations to implement, or define a certain property. But in general, I agree with Alexander that a 100% abstract class isn&#39;t a good idea. I would prefer an interface in most cases unless there&#39;s a very good reason not to use an interface.","title":"100% Abstract class vs Interface","body":"<p>Next to visibility, another reason could be to be able to specify a certain Constructor you want all implementations to implement, or define a certain property. But in general, I agree with Alexander that a 100% abstract class isn't a good idea. I would prefer an interface in most cases unless there's a very good reason not to use an interface.</p>\n"},{"comments":[{"owner":{"account_id":186205,"reputation":2958,"user_id":423420,"accept_rate":95,"display_name":"Michael Clerx"},"score":0,"creation_date":1285660637,"post_id":3810669,"comment_id":4042135,"body_markdown":"Males &amp; Females share functionality, they&#39;re not different implementations of a common interface. Also, the concept of a human isn&#39;t defined by the functions humans implement.","body":"Males &amp; Females share functionality, they&#39;re not different implementations of a common interface. Also, the concept of a human isn&#39;t defined by the functions humans implement."},{"owner":{"account_id":59409,"reputation":10836,"user_id":177766,"accept_rate":91,"display_name":"Sabeen Malik"},"score":0,"creation_date":1285660793,"post_id":3810669,"comment_id":4042153,"body_markdown":"It would be easier for me to understand it as a class instead of an interface. I can actually visualize it as a tree and see that the Male and Female are branching from Human.","body":"It would be easier for me to understand it as a class instead of an interface. I can actually visualize it as a tree and see that the Male and Female are branching from Human."},{"owner":{"account_id":75311,"reputation":373580,"user_id":216074,"accept_rate":90,"display_name":"poke"},"score":0,"creation_date":1285661535,"post_id":3810669,"comment_id":4042248,"body_markdown":"Yes, and *usually* there is no human that is neither male nor female, so the base class `Human` would be abstract.","body":"Yes, and <i>usually</i> there is no human that is neither male nor female, so the base class <code>Human</code> would be abstract."}],"tags":[],"owner":{"account_id":59409,"reputation":10836,"user_id":177766,"accept_rate":91,"display_name":"Sabeen Malik"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1285659980,"creation_date":1285659980,"answer_id":3810669,"question_id":3810610,"body_markdown":"I personally think the difference as conceptual more than technical. For instance it would be bad idea to have an interface called &quot;Human&quot; and implement them on Male and Female. It would make more sense to make the Human as class. \r\n\r\nYou can implement multiple interfaces and you should see interfaces as add-ons. ","title":"100% Abstract class vs Interface","body":"<p>I personally think the difference as conceptual more than technical. For instance it would be bad idea to have an interface called \"Human\" and implement them on Male and Female. It would make more sense to make the Human as class. </p>\n\n<p>You can implement multiple interfaces and you should see interfaces as add-ons. </p>\n"},{"comments":[{"owner":{"account_id":8326,"reputation":258555,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":1,"creation_date":1285660787,"post_id":3810674,"comment_id":4042152,"body_markdown":"+1. This is a problem with JDK interfaces like java.sql.Connection, where they add methods all the time, so the old implementations do not compile anymore.","body":"+1. This is a problem with JDK interfaces like java.sql.Connection, where they add methods all the time, so the old implementations do not compile anymore."},{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":0,"creation_date":1285719074,"post_id":3810674,"comment_id":4051053,"body_markdown":"If collection interfaces were &quot;pure&quot; abstract classes, we wouldn&#39;t need defender methods.","body":"If collection interfaces were &quot;pure&quot; abstract classes, we wouldn&#39;t need defender methods."}],"tags":[],"owner":{"account_id":70734,"reputation":14669,"user_id":204845,"accept_rate":68,"display_name":"Arne Deutsch"},"comment_count":2,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1285660010,"creation_date":1285660010,"answer_id":3810674,"question_id":3810610,"body_markdown":"The one case where an &quot;100% abstract class&quot; may be advantageous over an interface is in places where API stability is a key concern.\r\n\r\nIf you write an API where other people are expected to implement your interface you have to stick to the interface. You can&#39;t add any methods to the interface later on because that would break all clients (you would have to work around this by implement a second interface and let your code check againt the usage with instanceof checks and provide an fallback).\r\n\r\nIf you realize the same with an class you can add (non abstract) methods later on without breaking the client.","title":"100% Abstract class vs Interface","body":"<p>The one case where an \"100% abstract class\" may be advantageous over an interface is in places where API stability is a key concern.</p>\n\n<p>If you write an API where other people are expected to implement your interface you have to stick to the interface. You can't add any methods to the interface later on because that would break all clients (you would have to work around this by implement a second interface and let your code check againt the usage with instanceof checks and provide an fallback).</p>\n\n<p>If you realize the same with an class you can add (non abstract) methods later on without breaking the client.</p>\n"},{"tags":[],"owner":{"account_id":186205,"reputation":2958,"user_id":423420,"accept_rate":95,"display_name":"Michael Clerx"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1285661174,"creation_date":1285661174,"answer_id":3810810,"question_id":3810610,"body_markdown":"I&#39;m not quite sure how to answer this conceptually anymore, but in practice I use interfaces for the following reasons:\r\n\r\n - To indicate different classes have a shared interface: that you can manipulate them / use them in the same way\r\n - You can implement multiple interfaces, but only extend one class\r\n\r\nReasons for using abstract classes:\r\n\r\n - To share functionality between similar objects. For example Porshe911 could extend Car, overwrite a few methods and keep the rest.\r\n - To write frameworks that people can adapt. For example by leaving a few crucial methods unimplemented and writing the rest of the class to be internally consistent provided you implement those few methods. An example would be a menu class with a single abstract method getMenuItems()\r\n\r\nYour example of the 100% abstract class seems senseless to me. As far as I can see that would just make it an interface, with the added restriction that you can have only one.","title":"100% Abstract class vs Interface","body":"<p>I'm not quite sure how to answer this conceptually anymore, but in practice I use interfaces for the following reasons:</p>\n\n<ul>\n<li>To indicate different classes have a shared interface: that you can manipulate them / use them in the same way</li>\n<li>You can implement multiple interfaces, but only extend one class</li>\n</ul>\n\n<p>Reasons for using abstract classes:</p>\n\n<ul>\n<li>To share functionality between similar objects. For example Porshe911 could extend Car, overwrite a few methods and keep the rest.</li>\n<li>To write frameworks that people can adapt. For example by leaving a few crucial methods unimplemented and writing the rest of the class to be internally consistent provided you implement those few methods. An example would be a menu class with a single abstract method getMenuItems()</li>\n</ul>\n\n<p>Your example of the 100% abstract class seems senseless to me. As far as I can see that would just make it an interface, with the added restriction that you can have only one.</p>\n"},{"comments":[{"owner":{"account_id":2552324,"reputation":1621,"user_id":2215858,"display_name":"Wisienkas"},"score":1,"creation_date":1694088641,"post_id":77055885,"comment_id":135846959,"body_markdown":"An abstract class could extend another abstract class that wasn&#39;t all abstract I believe. However it might be worth giving the question asked some examples of how it can or cannot be used and how interface cover the cases that a 100% abstract class would also solve","body":"An abstract class could extend another abstract class that wasn&#39;t all abstract I believe. However it might be worth giving the question asked some examples of how it can or cannot be used and how interface cover the cases that a 100% abstract class would also solve"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1694088651,"post_id":77055885,"comment_id":135846960,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/77055885/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":29383230,"reputation":1,"user_id":22513208,"display_name":"Md Monabbar Anjum"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694045601,"creation_date":1694045601,"answer_id":77055885,"question_id":3810610,"body_markdown":"If every method is abstract, then using abstract class rather than interface concept is something like &quot;Forcing an IPS officer to do sweeping job&quot;. : )","title":"100% Abstract class vs Interface","body":"<p>If every method is abstract, then using abstract class rather than interface concept is something like &quot;Forcing an IPS officer to do sweeping job&quot;. : )</p>\n"}],"owner":{"account_id":146699,"reputation":20921,"user_id":357314,"accept_rate":62,"display_name":"johnlemon"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4523,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":3810628,"answer_count":7,"score":11,"last_activity_date":1694045601,"creation_date":1285659457,"question_id":3810610,"body_markdown":"Is there a reason to use a 100% abstract class and not an interface ?\r\nCan you give me a good example when to use both so I can grasp the concept a little?\r\n\r\nUpdate:\r\n100% Abstract class -&gt; abstract class with only abstract methods.\r\nI&#39;m curios if there are differences between php and java regarding this aspect.\r\n\r\nUpdate2:\r\nEven if I understand most of the reasons I&#39;m more interested in the **conceptual** more than technical reasons.","title":"100% Abstract class vs Interface","body":"<p>Is there a reason to use a 100% abstract class and not an interface ?\nCan you give me a good example when to use both so I can grasp the concept a little?</p>\n\n<p>Update:\n100% Abstract class -> abstract class with only abstract methods.\nI'm curios if there are differences between php and java regarding this aspect.</p>\n\n<p>Update2:\nEven if I understand most of the reasons I'm more interested in the <strong>conceptual</strong> more than technical reasons.</p>\n"},{"tags":["java","selenium","junit","selenium-chromedriver","cucumber"],"answers":[{"comments":[{"owner":{"account_id":16735474,"reputation":43,"user_id":12096735,"display_name":"Workhard"},"score":0,"creation_date":1641233104,"post_id":70568559,"comment_id":124748211,"body_markdown":"Thank you for your answer. The driver file was located in the project, but I tried it by locating that path and still same message error. Should I make a new porject?","body":"Thank you for your answer. The driver file was located in the project, but I tried it by locating that path and still same message error. Should I make a new porject?"},{"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":0,"creation_date":1641233168,"post_id":70568559,"comment_id":124748234,"body_markdown":"@Workhard Yup, try with a new project and keep me updated","body":"@Workhard Yup, try with a new project and keep me updated"},{"owner":{"account_id":16735474,"reputation":43,"user_id":12096735,"display_name":"Workhard"},"score":0,"creation_date":1641237628,"post_id":70568559,"comment_id":124749610,"body_markdown":"@Debanjan8 yeah chrome driver works in a new project. (I have to move files/codes to the new project ahhhh..) I think the above prject has something wrong or incompability with something. I messed up from github. Is this inpossible to fix? Thanks,","body":"@Debanjan8 yeah chrome driver works in a new project. (I have to move files/codes to the new project ahhhh..) I think the above prject has something wrong or incompability with something. I messed up from github. Is this inpossible to fix? Thanks,"}],"tags":[],"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1641226625,"creation_date":1641226625,"answer_id":70568559,"question_id":70565409,"body_markdown":"You need to pass the _absolute path_ of the [ChromeDriver](https://stackoverflow.com/questions/59909654/how-does-chrome-driver-interact-with-chrome-browser/59927747#59927747) executable through the [_System.setProperty()_](https://stackoverflow.com/questions/60057497/how-to-initiate-multiple-versions-of-geckodriver-through-system-setproperty/60061951#60061951) line as follows:\r\n\r\n\tSystem.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\path\\\\to\\\\chromedriver.exe&quot;);","title":"Selenium chrome driver error java.lang.AbstractMethodError: Receiver class org.openqa.selenium.chrome.ChromeDriverService$Builder does not define","body":"<p>You need to pass the <em>absolute path</em> of the <a href=\"https://stackoverflow.com/questions/59909654/how-does-chrome-driver-interact-with-chrome-browser/59927747#59927747\">ChromeDriver</a> executable through the <a href=\"https://stackoverflow.com/questions/60057497/how-to-initiate-multiple-versions-of-geckodriver-through-system-setproperty/60061951#60061951\"><em>System.setProperty()</em></a> line as follows:</p>\n<pre><code>System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\path\\\\to\\\\chromedriver.exe&quot;);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1687775487,"post_id":76544943,"comment_id":134978905,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76544943/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":3219418,"reputation":13,"user_id":2717209,"display_name":"user2717209"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687590468,"creation_date":1687590155,"answer_id":76544943,"question_id":70565409,"body_markdown":"Yesterday even i faced the same where my Test script all of a sudden stopped working, after the Build generation process. I did tremendous research behind it, But found nothing. As per the stack trace the error says\r\n &quot;AppiumServiceBuilder does not define or inherit an implementation of the resolved method &#39;abstract void loadSystemProperties()&#39; of abstract class org.openqa.selenium.remote.service.DriverService$Builder&quot;\r\nWherein the AppiumServiceBuilder the subclass of DriverService class does not override/implement its abstract method.\r\nWe spend the entire day referring to this. Fortuantely one of the Java Developer unpacked the &quot;appium client&quot; jar file to see for the appropriate Selenium version reference(main.properties file). \r\nAnd as an IDE we were using IntelliJ idea, we checked for the project structure. And we found out that some of the dependent Jar files of selenium refers to latest version of Selenium. For which we manually added the appropriate version dependencies. And our issue was resolved. \r\n\r\n&quot;In A Nutt shell&quot; - Appium client was referring to a dependency for which it didnt get the implementation of the abstract method. As dependency related to selenium was getting resolved from a different version. Due to which it was failing all of a sudden. We fixed the selenium dependency to the correct version and it started working.   ","title":"Selenium chrome driver error java.lang.AbstractMethodError: Receiver class org.openqa.selenium.chrome.ChromeDriverService$Builder does not define","body":"<p>Yesterday even i faced the same where my Test script all of a sudden stopped working, after the Build generation process. I did tremendous research behind it, But found nothing. As per the stack trace the error says\n&quot;AppiumServiceBuilder does not define or inherit an implementation of the resolved method 'abstract void loadSystemProperties()' of abstract class org.openqa.selenium.remote.service.DriverService$Builder&quot;\nWherein the AppiumServiceBuilder the subclass of DriverService class does not override/implement its abstract method.\nWe spend the entire day referring to this. Fortuantely one of the Java Developer unpacked the &quot;appium client&quot; jar file to see for the appropriate Selenium version reference(main.properties file).\nAnd as an IDE we were using IntelliJ idea, we checked for the project structure. And we found out that some of the dependent Jar files of selenium refers to latest version of Selenium. For which we manually added the appropriate version dependencies. And our issue was resolved.</p>\n<p>&quot;In A Nutt shell&quot; - Appium client was referring to a dependency for which it didnt get the implementation of the abstract method. As dependency related to selenium was getting resolved from a different version. Due to which it was failing all of a sudden. We fixed the selenium dependency to the correct version and it started working.</p>\n"}],"owner":{"account_id":16735474,"reputation":43,"user_id":12096735,"display_name":"Workhard"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10407,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1694045070,"creation_date":1641210854,"question_id":70565409,"body_markdown":"I did not have problem to run this before becoming messy with something.\r\n\r\nAny help would be appciated.\r\n\r\nI am getting this error chrome driver when running any test class with chrome driver.\r\n\r\nI tried to put chrome driver options, but still not working.\r\nI upgraded chrome driver version and some other frameworks, but still same error.\r\n\r\n\r\n\r\n    @RunWith(Cucumber.class)\r\n    @CucumberOptions(features=&quot;src/test/Features&quot;, glue= {&quot;StepDefinitions&quot;},\r\n    monochrome = true,\r\n    \r\n    plugin = {&quot;pretty&quot;, &quot;junit:target/junit/report.xml&quot;,\r\n    \t\t&quot;html:target/html/HtmlReports&quot;,\r\n    \t\t&quot;json:target/JSONReports/report.json&quot;},\r\n    tags=&quot;@Sorting_HL&quot;\r\n\t\t\r\n\r\n    &gt; java.lang.AbstractMethodError: Receiver class\r\n    &gt; org.openqa.selenium.chrome.ChromeDriverService$Builder does not define\r\n    &gt; or inherit an implementation of the resolved method &#39;abstract\r\n    &gt; java.util.List createArgs()&#39; of abstract class\r\n    &gt; org.openqa.selenium.remote.service.DriverService$Builder. \tat\r\n    &gt; org.openqa.selenium.remote.service.DriverService$Builder.build(DriverService.java:441)\r\n    &gt; \tat\r\n    &gt; org.openqa.selenium.chrome.ChromeDriverService.createDefaultService(ChromeDriverService.java:94)\r\n    &gt; \tat\r\n    &gt; org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:157)\r\n    &gt; \tat\r\n    &gt; StepDefinitions.COB_sorting_2.sorting_tab_is_seen(COB_sorting_2.java:57)\r\n    &gt; \tat ✽.Sorting tab is seen.(file:///folder/src/test/Features/sorting.feature:50)\r\nclass\r\n\r\n    @Given(&quot;Sorting tab is seen.&quot;)\r\n    \tpublic void sorting_tab_is_seen() throws IOException {\r\n\r\n    \t\tSystem.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;chromedriver.exe&quot;);\r\n    \t\tString url = &quot;url address&quot;;\r\n    \t\tChromeOptions chromeOptions = new ChromeOptions();\r\n    \t\t\r\n    //\t    chromeOptions.addArguments(&quot;--headless&quot;); \r\n    \t//  chromeOptions.addArguments(&quot;no-sandbox&quot;);\r\n    \t    driver= new ChromeDriver(chromeOptions);\r\n\r\n    \t\tdriver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);\r\n    \t\tdriver.manage().window().maximize();\r\n    \t\tdriver.get(url);\r\n    \t}\r\n\r\nIf I add headless on options, they say\r\n  \r\n\r\n    java.lang.NoSuchMethodError: &#39;org.openqa.selenium.chromium.ChromiumOptions org.openqa.selenium.chrome.ChromeOptions.addArguments(java.lang.String[])&#39;\r\n    at StepDefinitions.COB_sorting_2.sorting_tab_is_seen(COB_sorting_2.java:55)\r\n    at ✽.Sorting tab is seen.(file:///folder/src/test/Features/sorting.feature:50)\r\n\r\npom xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    \r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n    \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n    \t&lt;groupId&gt;com.eCommerce&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;mavenProject&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \r\n    \t&lt;name&gt;mavenProject&lt;/name&gt;\r\n    \t&lt;!-- FIXME change it to the project&#39;s website --&gt;\r\n    \t&lt;url&gt;http://www.example.com&lt;/url&gt;\r\n    \r\n    \t&lt;properties&gt;\r\n    \r\n    \t\t&lt;suiteXmlFile&gt;src/main/testng.xml&lt;/suiteXmlFile&gt;\r\n    \t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    \t\t&lt;maven.compiler.source&gt;1.7&lt;/maven.compiler.source&gt;\r\n    \t\t&lt;maven.compiler.target&gt;1.7&lt;/maven.compiler.target&gt;\r\n    \t&lt;/properties&gt;\r\n    \r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;!-- https://mvnrepository.com/artifact/log4j/log4j --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;log4j&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;log4j&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.2.17&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;compile&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;!-- https://mvnrepository.com/artifact/junit/junit --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;junit&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;4.13.2&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.testng&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;testng&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;7.4.0&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;compile&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;4.0.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;io.cucumber&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;cucumber-java&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;7.0.0&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;compile&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;!-- https://mvnrepository.com/artifact/io.cucumber/cucumber-junit --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;io.cucumber&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;cucumber-junit&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;7.0.0&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;compile&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;!-- https://mvnrepository.com/artifact/io.cucumber/cucumber-core --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;io.cucumber&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;cucumber-core&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;6.11.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;!-- https://mvnrepository.com/artifact/net.masterthought/maven-cucumber-reporting --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;net.masterthought&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;maven-cucumber-reporting&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;5.3.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;io.appium&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;java-client&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;8.0.0-beta&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;!-- https://mvnrepository.com/artifact/io.cucumber/cucumber-testng --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t    &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\r\n    \t\t    &lt;artifactId&gt;cucumber-testng&lt;/artifactId&gt;\r\n    \t\t    &lt;version&gt;7.1.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t\r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;!-- &lt;pluginManagement&gt; lock down plugins versions to avoid using Maven \r\n    \t\t\t\tdefaults (may be moved to parent pom)\r\n    \t\t\t\t&lt;/pluginManagement&gt;\r\n    \t\t\t\t --&gt;\r\n    \t\t\t&lt;plugins&gt;\r\n    \t\t\t\t&lt;!-- clean lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#clean_Lifecycle --&gt;\r\n    \t\t\t\t&lt;plugin&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t\t&lt;version&gt;3.1.0&lt;/version&gt;\r\n    \t\t\t\t&lt;/plugin&gt;\r\n    \t\t\t\t&lt;!-- default lifecycle, jar packaging: see https://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_jar_packaging --&gt;\r\n    \t\t\t\t&lt;plugin&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t\t&lt;version&gt;3.0.2&lt;/version&gt;\r\n    \t\t\t\t&lt;/plugin&gt;\r\n    \t\t\t\t&lt;plugin&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t\t&lt;version&gt;3.8.0&lt;/version&gt;\r\n    \t\t\t\t&lt;/plugin&gt;\r\n    \t\t\t\t&lt;plugin&gt;\r\n    \t\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t\t&lt;version&gt;2.22.0&lt;/version&gt;\r\n    \t\t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t\t&lt;!-- \r\n    \t\t\t\t\t\t&lt;suiteXmlFiles&gt;\r\n    \t\t\t\t\t\t\t&lt;suiteXmlFile&gt;${suiteXmlFile}&lt;/suiteXmlFile&gt;\r\n    \t\t\t\t\t\t&lt;/suiteXmlFiles&gt;\r\n    \t\t\t\t\t\t --&gt;\r\n    \t\t\t\t\t\t&lt;testFailureIgnore&gt;true&lt;/testFailureIgnore&gt;\r\n    \t\t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t\t&lt;/plugin&gt;\r\n    \t\t\t\t&lt;plugin&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t\t&lt;version&gt;3.0.2&lt;/version&gt;\r\n    \t\t\t\t&lt;/plugin&gt;\r\n    \t\t\t\t&lt;plugin&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t\t&lt;version&gt;2.5.2&lt;/version&gt;\r\n    \t\t\t\t&lt;/plugin&gt;\r\n    \t\t\t\t&lt;plugin&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t\t&lt;version&gt;2.8.2&lt;/version&gt;\r\n    \t\t\t\t&lt;/plugin&gt;\r\n    \t\t\t\t&lt;!-- site lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#site_Lifecycle --&gt;\r\n    \t\t\t\t&lt;plugin&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t\t&lt;version&gt;3.7.1&lt;/version&gt;\r\n    \t\t\t\t&lt;/plugin&gt;\r\n    \t\t\t\t&lt;plugin&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t\t&lt;version&gt;3.0.0&lt;/version&gt;\r\n    \t\t\t\t&lt;/plugin&gt;\r\n    \t\t\t\t&lt;!-- \r\n    \t\t\t\t&lt;plugin&gt;\r\n    \t\t\t\t\t&lt;groupId&gt;net.masterthought&lt;/groupId&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;maven-cucumber-reporting&lt;/artifactId&gt;\r\n    \t\t\t\t\t&lt;version&gt;2.8.0&lt;/version&gt;\r\n    \t\t\t\t\t&lt;executions&gt;\r\n    \t\t\t\t\t\t&lt;execution&gt;\r\n    \t\t\t\t\t\t\t&lt;id&gt;execution&lt;/id&gt;\r\n    \t\t\t\t\t\t\t&lt;phase&gt;verify&lt;/phase&gt;\r\n    \t\t\t\t\t\t\t&lt;goals&gt;\r\n    \t\t\t\t\t\t\t\t&lt;goal&gt;generate&lt;/goal&gt;\r\n    \t\t\t\t\t\t\t&lt;/goals&gt;\r\n    \t\t\t\t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t\t\t\t&lt;projectName&gt;mavenProject&lt;/projectName&gt;\r\n    \t\t\t\t\t\t\t\t&lt;outputDirectory&gt;${project.build.directory}/cucumber-report-html&lt;/outputDirectory&gt;\r\n    \t\t\t\t\t\t\t\t&lt;cucumberOutput&gt;${project.build.directory}/cucumber.json&lt;/cucumberOutput&gt;\r\n    \t\t\t\t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t\t\t\t&lt;/execution&gt;\r\n    \t\t\t\t\t&lt;/executions&gt;\r\n    \t\t\t\t&lt;/plugin&gt;\r\n    \t\t\t\t --&gt;\r\n    \t\t\t&lt;/plugins&gt;\r\n    \r\n    \r\n    \t&lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\n\r\nYour help would be appreciated. Thanks,\r\n\r\n","title":"Selenium chrome driver error java.lang.AbstractMethodError: Receiver class org.openqa.selenium.chrome.ChromeDriverService$Builder does not define","body":"<p>I did not have problem to run this before becoming messy with something.</p>\n<p>Any help would be appciated.</p>\n<p>I am getting this error chrome driver when running any test class with chrome driver.</p>\n<p>I tried to put chrome driver options, but still not working.\nI upgraded chrome driver version and some other frameworks, but still same error.</p>\n<pre><code>@RunWith(Cucumber.class)\n@CucumberOptions(features=&quot;src/test/Features&quot;, glue= {&quot;StepDefinitions&quot;},\nmonochrome = true,\n\nplugin = {&quot;pretty&quot;, &quot;junit:target/junit/report.xml&quot;,\n        &quot;html:target/html/HtmlReports&quot;,\n        &quot;json:target/JSONReports/report.json&quot;},\ntags=&quot;@Sorting_HL&quot;\n    \n\n&gt; java.lang.AbstractMethodError: Receiver class\n&gt; org.openqa.selenium.chrome.ChromeDriverService$Builder does not define\n&gt; or inherit an implementation of the resolved method 'abstract\n&gt; java.util.List createArgs()' of abstract class\n&gt; org.openqa.selenium.remote.service.DriverService$Builder.     at\n&gt; org.openqa.selenium.remote.service.DriverService$Builder.build(DriverService.java:441)\n&gt;   at\n&gt; org.openqa.selenium.chrome.ChromeDriverService.createDefaultService(ChromeDriverService.java:94)\n&gt;   at\n&gt; org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:157)\n&gt;   at\n&gt; StepDefinitions.COB_sorting_2.sorting_tab_is_seen(COB_sorting_2.java:57)\n&gt;   at ✽.Sorting tab is seen.(file:///folder/src/test/Features/sorting.feature:50)\n</code></pre>\n<p>class</p>\n<pre><code>@Given(&quot;Sorting tab is seen.&quot;)\n    public void sorting_tab_is_seen() throws IOException {\n\n        System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;chromedriver.exe&quot;);\n        String url = &quot;url address&quot;;\n        ChromeOptions chromeOptions = new ChromeOptions();\n        \n//      chromeOptions.addArguments(&quot;--headless&quot;); \n    //  chromeOptions.addArguments(&quot;no-sandbox&quot;);\n        driver= new ChromeDriver(chromeOptions);\n\n        driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);\n        driver.manage().window().maximize();\n        driver.get(url);\n    }\n</code></pre>\n<p>If I add headless on options, they say</p>\n<pre><code>java.lang.NoSuchMethodError: 'org.openqa.selenium.chromium.ChromiumOptions org.openqa.selenium.chrome.ChromeOptions.addArguments(java.lang.String[])'\nat StepDefinitions.COB_sorting_2.sorting_tab_is_seen(COB_sorting_2.java:55)\nat ✽.Sorting tab is seen.(file:///folder/src/test/Features/sorting.feature:50)\n</code></pre>\n<p>pom xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.eCommerce&lt;/groupId&gt;\n    &lt;artifactId&gt;mavenProject&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n\n    &lt;name&gt;mavenProject&lt;/name&gt;\n    &lt;!-- FIXME change it to the project's website --&gt;\n    &lt;url&gt;http://www.example.com&lt;/url&gt;\n\n    &lt;properties&gt;\n\n        &lt;suiteXmlFile&gt;src/main/testng.xml&lt;/suiteXmlFile&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;maven.compiler.source&gt;1.7&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;1.7&lt;/maven.compiler.target&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;!-- https://mvnrepository.com/artifact/log4j/log4j --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j&lt;/artifactId&gt;\n            &lt;version&gt;1.2.17&lt;/version&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/junit/junit --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;4.13.2&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.testng&lt;/groupId&gt;\n            &lt;artifactId&gt;testng&lt;/artifactId&gt;\n            &lt;version&gt;7.4.0&lt;/version&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n            &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n            &lt;version&gt;4.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\n            &lt;artifactId&gt;cucumber-java&lt;/artifactId&gt;\n            &lt;version&gt;7.0.0&lt;/version&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/io.cucumber/cucumber-junit --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\n            &lt;artifactId&gt;cucumber-junit&lt;/artifactId&gt;\n            &lt;version&gt;7.0.0&lt;/version&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/io.cucumber/cucumber-core --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\n            &lt;artifactId&gt;cucumber-core&lt;/artifactId&gt;\n            &lt;version&gt;6.11.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/net.masterthought/maven-cucumber-reporting --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;net.masterthought&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-cucumber-reporting&lt;/artifactId&gt;\n            &lt;version&gt;5.3.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.appium&lt;/groupId&gt;\n            &lt;artifactId&gt;java-client&lt;/artifactId&gt;\n            &lt;version&gt;8.0.0-beta&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/io.cucumber/cucumber-testng --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\n            &lt;artifactId&gt;cucumber-testng&lt;/artifactId&gt;\n            &lt;version&gt;7.1.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        \n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;!-- &lt;pluginManagement&gt; lock down plugins versions to avoid using Maven \n                defaults (may be moved to parent pom)\n                &lt;/pluginManagement&gt;\n                 --&gt;\n            &lt;plugins&gt;\n                &lt;!-- clean lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#clean_Lifecycle --&gt;\n                &lt;plugin&gt;\n                    &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.1.0&lt;/version&gt;\n                &lt;/plugin&gt;\n                &lt;!-- default lifecycle, jar packaging: see https://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_jar_packaging --&gt;\n                &lt;plugin&gt;\n                    &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.0.2&lt;/version&gt;\n                &lt;/plugin&gt;\n                &lt;plugin&gt;\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.8.0&lt;/version&gt;\n                &lt;/plugin&gt;\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;2.22.0&lt;/version&gt;\n                    &lt;configuration&gt;\n                        &lt;!-- \n                        &lt;suiteXmlFiles&gt;\n                            &lt;suiteXmlFile&gt;${suiteXmlFile}&lt;/suiteXmlFile&gt;\n                        &lt;/suiteXmlFiles&gt;\n                         --&gt;\n                        &lt;testFailureIgnore&gt;true&lt;/testFailureIgnore&gt;\n                    &lt;/configuration&gt;\n                &lt;/plugin&gt;\n                &lt;plugin&gt;\n                    &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.0.2&lt;/version&gt;\n                &lt;/plugin&gt;\n                &lt;plugin&gt;\n                    &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;2.5.2&lt;/version&gt;\n                &lt;/plugin&gt;\n                &lt;plugin&gt;\n                    &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;2.8.2&lt;/version&gt;\n                &lt;/plugin&gt;\n                &lt;!-- site lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#site_Lifecycle --&gt;\n                &lt;plugin&gt;\n                    &lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.7.1&lt;/version&gt;\n                &lt;/plugin&gt;\n                &lt;plugin&gt;\n                    &lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.0.0&lt;/version&gt;\n                &lt;/plugin&gt;\n                &lt;!-- \n                &lt;plugin&gt;\n                    &lt;groupId&gt;net.masterthought&lt;/groupId&gt;\n                    &lt;artifactId&gt;maven-cucumber-reporting&lt;/artifactId&gt;\n                    &lt;version&gt;2.8.0&lt;/version&gt;\n                    &lt;executions&gt;\n                        &lt;execution&gt;\n                            &lt;id&gt;execution&lt;/id&gt;\n                            &lt;phase&gt;verify&lt;/phase&gt;\n                            &lt;goals&gt;\n                                &lt;goal&gt;generate&lt;/goal&gt;\n                            &lt;/goals&gt;\n                            &lt;configuration&gt;\n                                &lt;projectName&gt;mavenProject&lt;/projectName&gt;\n                                &lt;outputDirectory&gt;${project.build.directory}/cucumber-report-html&lt;/outputDirectory&gt;\n                                &lt;cucumberOutput&gt;${project.build.directory}/cucumber.json&lt;/cucumberOutput&gt;\n                            &lt;/configuration&gt;\n                        &lt;/execution&gt;\n                    &lt;/executions&gt;\n                &lt;/plugin&gt;\n                 --&gt;\n            &lt;/plugins&gt;\n\n\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>Your help would be appreciated. Thanks,</p>\n"},{"tags":["java","logging","log4j","slf4j","reload4j"],"comments":[{"owner":{"account_id":17592368,"reputation":13891,"user_id":12763954,"display_name":"Olivier"},"score":1,"creation_date":1693984487,"post_id":77013251,"comment_id":135829900,"body_markdown":"Why wouldn&#39;t it be initialized?","body":"Why wouldn&#39;t it be initialized?"}],"answers":[{"tags":[],"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1694044843,"creation_date":1694027020,"answer_id":77054639,"question_id":77013251,"body_markdown":"SLF4J is a generic logging API that is implemented by various logging frameworks, (eg Logback, Log4j2, etc), so while the answer slightly depends on which implementation you&#39;re using, all modern logging implementations do not require &quot;initialization&quot;; they&#39;re ready to use as soon as they&#39;re declared, so your solution is:\r\n\r\n```\r\nprivate static boolean isLoggerInitialized() {\r\n    return true;\r\n}\r\n```\r\n\r\n---\r\n\r\nIf you&#39;re using Spring starter libraries, the default logging library is Logback. You can chose something else by including a different Slf4j compliant logging library (all the main ones are compliant) in your class path. As far as &quot;initialization&quot; goes, it doesn&#39;t matter what you choose if you choose a mainstream one.\r\n\r\nRather than code the declaration of your logger, I recommend using one of the [Lombok logging annotations][1], with which your code becomes just:\r\n\r\n```\r\n@Slf4j\r\npublic class MyClass {\r\n\r\n    public someMethod() {\r\n        log.info(&quot;Hello world&quot;);\r\n    }\r\n\r\n}\r\n```\r\n\r\nThe declaration of the `log` field is done for you (and is instantly ready to use).\r\n\r\n  [1]: https://projectlombok.org/features/log","title":"How can I check if SLF4J with Reload4J is initialized?","body":"<p>SLF4J is a generic logging API that is implemented by various logging frameworks, (eg Logback, Log4j2, etc), so while the answer slightly depends on which implementation you're using, all modern logging implementations do not require &quot;initialization&quot;; they're ready to use as soon as they're declared, so your solution is:</p>\n<pre><code>private static boolean isLoggerInitialized() {\n    return true;\n}\n</code></pre>\n<hr />\n<p>If you're using Spring starter libraries, the default logging library is Logback. You can chose something else by including a different Slf4j compliant logging library (all the main ones are compliant) in your class path. As far as &quot;initialization&quot; goes, it doesn't matter what you choose if you choose a mainstream one.</p>\n<p>Rather than code the declaration of your logger, I recommend using one of the <a href=\"https://projectlombok.org/features/log\" rel=\"nofollow noreferrer\">Lombok logging annotations</a>, with which your code becomes just:</p>\n<pre><code>@Slf4j\npublic class MyClass {\n\n    public someMethod() {\n        log.info(&quot;Hello world&quot;);\n    }\n\n}\n</code></pre>\n<p>The declaration of the <code>log</code> field is done for you (and is instantly ready to use).</p>\n"}],"owner":{"account_id":508927,"reputation":2023,"user_id":1251613,"accept_rate":100,"display_name":"Markus"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77054639,"answer_count":1,"score":0,"last_activity_date":1694044843,"creation_date":1693462705,"question_id":77013251,"body_markdown":"We are switching from plain Log4J (with reload4j) to using SLF4J. In one bit of code we have a check if the logging framework is initialized. The goal behind that check is to have a fallback to printing to System.err in case there&#39;s something to log before logging system initialization.\r\n\r\n    private static boolean isLoggerInitialized() {\r\n        return LOGGER.getParent().getAllAppenders().hasMoreElements();\r\n    }\r\n\r\nThis is not possible with SLF4J anymore. Thus I am searching for an alternative to check the initialization state of SLF4J.","title":"How can I check if SLF4J with Reload4J is initialized?","body":"<p>We are switching from plain Log4J (with reload4j) to using SLF4J. In one bit of code we have a check if the logging framework is initialized. The goal behind that check is to have a fallback to printing to System.err in case there's something to log before logging system initialization.</p>\n<pre><code>private static boolean isLoggerInitialized() {\n    return LOGGER.getParent().getAllAppenders().hasMoreElements();\n}\n</code></pre>\n<p>This is not possible with SLF4J anymore. Thus I am searching for an alternative to check the initialization state of SLF4J.</p>\n"},{"tags":["java","spring-boot","mockito","spring-boot-test","spring-retry"],"comments":[{"owner":{"account_id":27243397,"reputation":1331,"user_id":20769158,"display_name":"scrhartley"},"score":0,"creation_date":1694047664,"post_id":77055761,"comment_id":135841275,"body_markdown":"Any lucky trying `@MockBean` instead on RestTemplate and no longer using `@InjectMocks`? May still need `@EnableRetry` as well.","body":"Any lucky trying <code>@MockBean</code> instead on RestTemplate and no longer using <code>@InjectMocks</code>? May still need <code>@EnableRetry</code> as well."},{"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"score":1,"creation_date":1694092640,"post_id":77055761,"comment_id":135847825,"body_markdown":"The `RetryableInterestService` must be managed by Spring (not Mockito) for `Retryable` to work; use `@Autowired` instead.","body":"The <code>RetryableInterestService</code> must be managed by Spring (not Mockito) for <code>Retryable</code> to work; use <code>@Autowired</code> instead."},{"owner":{"account_id":18915944,"reputation":3,"user_id":13801010,"display_name":"alejo.montania"},"score":0,"creation_date":1694099074,"post_id":77055761,"comment_id":135849520,"body_markdown":"Using `@MockBean` like scrhartley recommended and using `@Autowired` like @Gary Russell recommended did the trick. Thanks so much!","body":"Using <code>@MockBean</code> like scrhartley recommended and using <code>@Autowired</code> like @Gary Russell recommended did the trick. Thanks so much!"},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1694152239,"post_id":77055761,"comment_id":135856262,"body_markdown":"If you are using `@Mock`/`@InjectMocks`, then it is not a Spring Boot test","body":"If you are using <code>@Mock</code>/<code>@InjectMocks</code>, then it is not a Spring Boot test"}],"owner":{"account_id":18915944,"reputation":3,"user_id":13801010,"display_name":"alejo.montania"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694042789,"creation_date":1694042789,"question_id":77055761,"body_markdown":"I have a very simple setup for calling an external service and retrying 3 times but I just can&#39;t make my Tests to work with Retryable. \r\nIn my tests my method only gets called 1 time and stops even though when starting the app and testing it with Postman I get the retries working correctly. Can anyone spot what&#39;s wrong?\r\nThese are my classes:\r\n\r\n\r\n```\r\n@SpringBootApplication\r\n@EnableAutoConfiguration\r\n@EnableRetry\r\npublic class ChallengeApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(ChallengeApplication.class, args);\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic RestTemplate restTemplate() {\r\n\t\treturn new RestTemplate();\r\n\t}\r\n}\r\n```\r\n\r\n\r\n```\r\n@SpringBootTest\r\npublic class ChallengeApplicationTests {\r\n\r\n\t@Test\r\n\tvoid contextLoads() {\r\n\t}\r\n\r\n}\r\n```\r\n\r\n\r\n```\r\n@Service\r\n@Slf4j\r\npublic class RetryableInterestService {\r\n\r\n    final RestTemplate restTemplate;\r\n    protected Double lastResult = null;\r\n    RetryableInterestService(RestTemplate restTemplate) {\r\n        this.restTemplate = restTemplate;\r\n    }\r\n    String uri = &quot;http://localhost:8082/api/interest&quot;;\r\n    @Retryable(value = {RestClientException.class}, maxAttempts = 3, backoff = @Backoff(200))\r\n    public Double callInterestService() {\r\n        log.info(&quot;Calling Interest service using uri: &quot; + uri);\r\n        lastResult = restTemplate.getForObject(uri, Double.class);\r\n        return lastResult;\r\n    }\r\n\r\n    @Recover\r\n    public Double returnLastValue() throws ExternalApiCallException {\r\n        log.info(&quot;Returning last stored value: &quot; + lastResult);\r\n        if(lastResult != null) {\r\n            return lastResult;\r\n        } else {\r\n            throw new ExternalApiCallException(&quot;There wasn&#39;t a backup Interest value to return&quot;);\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n```\r\n@SpringBootTest(classes = {ChallengeApplicationTests.class})\r\npublic class RetryableInterestServiceTest {\r\n    @Mock\r\n    RestTemplate restTemplate;\r\n    @InjectMocks\r\n    RetryableInterestService retryableInterestService;\r\n\r\n    @Test\r\n    void whenCallInterestService_shouldReturnDouble() {\r\n        when(restTemplate.getForObject(anyString(), any())).thenReturn(10.0);\r\n        Double result = retryableInterestService.callInterestService();\r\n        assertEquals(result, 10.0);\r\n    }\r\n\r\n    @Test\r\n    void givenException_whenCallInterestService_shouldRetry() {\r\n        when(restTemplate.getForObject(anyString(), any()))\r\n                .thenThrow(new RestClientException(&quot;&quot;))\r\n                .thenThrow(new RestClientException(&quot;&quot;))\r\n                .thenReturn(10.0);\r\n        Double result = retryableInterestService.callInterestService();\r\n        verify(restTemplate, times(3)).getForObject(any(), any());\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\nI&#39;ve tried adding @EnableRetry on RetryableInterestServiceTest and on ChallengeApplicationTests but it won&#39;t work. I always get the one call and it ends on the Exception and no retries.\r\nIf I try:\r\n\r\n```\r\n   Exception exception = assertThrows(RestClientException.class, () -&gt; {\r\n       retryableInterestService.callInterestService();\r\n   });\r\n```\r\nI get a failed test because verify checks the method is only called once and fails.","title":"Can&#39;t make Retryable / Recover verify work in Spring Boot Unit Tests","body":"<p>I have a very simple setup for calling an external service and retrying 3 times but I just can't make my Tests to work with Retryable.\nIn my tests my method only gets called 1 time and stops even though when starting the app and testing it with Postman I get the retries working correctly. Can anyone spot what's wrong?\nThese are my classes:</p>\n<pre><code>@SpringBootApplication\n@EnableAutoConfiguration\n@EnableRetry\npublic class ChallengeApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(ChallengeApplication.class, args);\n    }\n\n    @Bean\n    public RestTemplate restTemplate() {\n        return new RestTemplate();\n    }\n}\n</code></pre>\n<pre><code>@SpringBootTest\npublic class ChallengeApplicationTests {\n\n    @Test\n    void contextLoads() {\n    }\n\n}\n</code></pre>\n<pre><code>@Service\n@Slf4j\npublic class RetryableInterestService {\n\n    final RestTemplate restTemplate;\n    protected Double lastResult = null;\n    RetryableInterestService(RestTemplate restTemplate) {\n        this.restTemplate = restTemplate;\n    }\n    String uri = &quot;http://localhost:8082/api/interest&quot;;\n    @Retryable(value = {RestClientException.class}, maxAttempts = 3, backoff = @Backoff(200))\n    public Double callInterestService() {\n        log.info(&quot;Calling Interest service using uri: &quot; + uri);\n        lastResult = restTemplate.getForObject(uri, Double.class);\n        return lastResult;\n    }\n\n    @Recover\n    public Double returnLastValue() throws ExternalApiCallException {\n        log.info(&quot;Returning last stored value: &quot; + lastResult);\n        if(lastResult != null) {\n            return lastResult;\n        } else {\n            throw new ExternalApiCallException(&quot;There wasn't a backup Interest value to return&quot;);\n        }\n    }\n}\n\n</code></pre>\n<pre><code>@SpringBootTest(classes = {ChallengeApplicationTests.class})\npublic class RetryableInterestServiceTest {\n    @Mock\n    RestTemplate restTemplate;\n    @InjectMocks\n    RetryableInterestService retryableInterestService;\n\n    @Test\n    void whenCallInterestService_shouldReturnDouble() {\n        when(restTemplate.getForObject(anyString(), any())).thenReturn(10.0);\n        Double result = retryableInterestService.callInterestService();\n        assertEquals(result, 10.0);\n    }\n\n    @Test\n    void givenException_whenCallInterestService_shouldRetry() {\n        when(restTemplate.getForObject(anyString(), any()))\n                .thenThrow(new RestClientException(&quot;&quot;))\n                .thenThrow(new RestClientException(&quot;&quot;))\n                .thenReturn(10.0);\n        Double result = retryableInterestService.callInterestService();\n        verify(restTemplate, times(3)).getForObject(any(), any());\n    }\n}\n</code></pre>\n<p>I've tried adding @EnableRetry on RetryableInterestServiceTest and on ChallengeApplicationTests but it won't work. I always get the one call and it ends on the Exception and no retries.\nIf I try:</p>\n<pre><code>   Exception exception = assertThrows(RestClientException.class, () -&gt; {\n       retryableInterestService.callInterestService();\n   });\n</code></pre>\n<p>I get a failed test because verify checks the method is only called once and fails.</p>\n"},{"tags":["java","android","android-layout","android-fragments","android-dialogfragment"],"comments":[{"owner":{"account_id":4286100,"reputation":4815,"user_id":3503855,"accept_rate":100,"display_name":"Anis LOUNIS aka AnixPasBesoin"},"score":0,"creation_date":1484948211,"post_id":41708595,"comment_id":70736911,"body_markdown":"What&#39;s the second activity you&#39;re trying to transition to?","body":"What&#39;s the second activity you&#39;re trying to transition to?"},{"owner":{"account_id":10054107,"reputation":234,"user_id":7432918,"display_name":"atwrk"},"score":0,"creation_date":1484948648,"post_id":41708595,"comment_id":70737093,"body_markdown":"The transition is from MainActivity (an Activity) to SheetDialog (a Fragment)","body":"The transition is from MainActivity (an Activity) to SheetDialog (a Fragment)"},{"owner":{"account_id":10054107,"reputation":234,"user_id":7432918,"display_name":"atwrk"},"score":0,"creation_date":1484950840,"post_id":41708595,"comment_id":70738031,"body_markdown":"Thank you for your answer. I have other obligations at work right now, but will review your answer later in the day today :)","body":"Thank you for your answer. I have other obligations at work right now, but will review your answer later in the day today :)"},{"owner":{"account_id":1088874,"reputation":61123,"user_id":1083957,"accept_rate":93,"display_name":"azizbekian"},"score":0,"creation_date":1485032865,"post_id":41708595,"comment_id":70758974,"body_markdown":"Transitions are supposed to transition a view from one activity to another. Imo, it&#39;s not possible to do that within one activity. What you have to do is animating the view on your own.","body":"Transitions are supposed to transition a view from one activity to another. Imo, it&#39;s not possible to do that within one activity. What you have to do is animating the view on your own."},{"owner":{"account_id":10054107,"reputation":234,"user_id":7432918,"display_name":"atwrk"},"score":0,"creation_date":1485132945,"post_id":41708595,"comment_id":70783977,"body_markdown":"@azizbekian, It is not possible to animate from an Activity to a Fragment? Do you have any sources on that? I really thought you could, but after trying to get this to work, I might believe you.","body":"@azizbekian, It is not possible to animate from an Activity to a Fragment? Do you have any sources on that? I really thought you could, but after trying to get this to work, I might believe you."}],"answers":[{"comments":[{"owner":{"account_id":10054107,"reputation":234,"user_id":7432918,"display_name":"atwrk"},"score":0,"creation_date":1485133038,"post_id":41773238,"comment_id":70783992,"body_markdown":"Thank you for your answer but I have been unable to get this to work. Your answer uses two activities and two fragments, whereas my project only has one of each. I did try applying the concepts none the less, but after trying several different ways I still could not get it to work.","body":"Thank you for your answer but I have been unable to get this to work. Your answer uses two activities and two fragments, whereas my project only has one of each. I did try applying the concepts none the less, but after trying several different ways I still could not get it to work."},{"owner":{"account_id":2211567,"reputation":1197,"user_id":1953261,"accept_rate":80,"display_name":"Alex Beggs"},"score":0,"creation_date":1549658596,"post_id":41773238,"comment_id":95996186,"body_markdown":"Fragment2 doesn&#39;t return any values, this code won&#39;t compile.","body":"Fragment2 doesn&#39;t return any values, this code won&#39;t compile."},{"owner":{"account_id":4286100,"reputation":4815,"user_id":3503855,"accept_rate":100,"display_name":"Anis LOUNIS aka AnixPasBesoin"},"score":0,"creation_date":1550012515,"post_id":41773238,"comment_id":96111408,"body_markdown":"@AlexBeggs thanx for pointing this out, but the rest of the code depends entirely on the user needs (returning the inflated view would do it in a vanilla scenario).","body":"@AlexBeggs thanx for pointing this out, but the rest of the code depends entirely on the user needs (returning the inflated view would do it in a vanilla scenario)."}],"tags":[],"owner":{"account_id":4286100,"reputation":4815,"user_id":3503855,"accept_rate":100,"display_name":"Anis LOUNIS aka AnixPasBesoin"},"comment_count":3,"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1694042045,"creation_date":1484950606,"answer_id":41773238,"question_id":41708595,"body_markdown":"## Crash course about shared element transitions \r\n\r\nLet&#39;s first quickly review how the Android framework does the magical *Shared Element Transition*:\r\n\r\nA *Shared Element Transition* is actually just one of the android framework&#39;s **lies**. The truth is when executing a *Shared Element Transition*, you&#39;re NOT sharing any view between your activities but you have the illusion of doing so. That&#39;s because each activity has to have its own independent view tree.\r\n\r\n### Huh?!\r\n\r\nLet&#39;s use an example, suppose that we have a shared element transition from a view `view_a`, located in `ActivityA`, to `view_b`, located in `ActivityB`. The transition will be executed as follows:\r\n\r\n 1. The transition framework first looks for the dimensions (`width`,\r\n`height`) and for the position (`x`,`y`) of `view_a` in the\r\n`ActivityA` (along with other properties).\r\n2. The properties are passed to `ActivityB` and applied on `view_b` so \r\nthat `view_b` occupies the exact same spot as `view_a` on the\r\nscreen.\r\n3. `ActivityA` gets closed and `view_b` appears right underneath \r\n`view_a`, making it look as if `view_a` did not go with the other views of `ActivityA`.\r\n4. Finally, a reverse animation is applied on `view_b` shifting it to \r\nwhat it is supposed to look like in `ActivityB`.\r\n\r\nThis is how the illusion of the view being shared is created. Magic!\r\n\r\n## Back to your question\r\n\r\nWhat we can deduce from above is that before any animation can be started, one has to make sure that `view_b` has already been created on `ActivityB`, otherwise, this wouldn&#39;t be possible.\r\n\r\n## Using a `Fragment`\r\n\r\nCalling `FragmentTransaction.commit()`will just schedule your fragment transaction (the fragment will NOT be created immediately after its containing activity is created). \r\n\r\nSo, in your case, when your `ActivityB` is created, your `view_b` is missing (as explained, that&#39;s because its containing fragment hasn&#39;t been created yet).\r\n\r\n### Solution\r\n\r\nMake sure your `view_b` is created before the animation starts. \r\n\r\nFor that, you&#39;ll have to find a way to tell the framework to not do the usual thing but to wait instead for your signal before creating the animation.\r\n\r\nOne way to implement this is to alter your code to be something similar to this one:\r\n\r\n#### ActivityB\r\n\r\n    class ActivityB extends Activity{\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            // ...\r\n            // Tell the framework to wait.\r\n            postponeEnterTransition();\r\n        }\r\n    }\r\n\r\n#### FragmentB\r\n\r\n    class FragmentB extends Fragment {\r\n    \r\n        @Override\r\n        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\r\n        View viewB = getView().findViewById(R.id.view_b);\r\n        sharedview.getViewTreeObserver().addOnPreDrawListener(new ViewTreeObserver.OnPreDrawListener() {\r\n            @Override\r\n            public boolean onPreDraw() {\r\n                    // Tell the framework to start.\r\n                    sharedview.getViewTreeObserver().removeOnPreDrawListener(this);\r\n                    getActivity().startPostponedEnterTransition(); \r\n                    return true;\r\n             }\r\n           });\r\n           ...\r\n        }\r\n    }\r\n\r\n## Further reading\r\n\r\n[Getting Started with Activity &amp; Fragment Transitions][1]\r\n\r\n  [1]: http://www.androiddesignpatterns.com/2014/12/activity-fragment-transitions-in-android-lollipop-part1.html","title":"Executing a &quot;Shared Element Transition&quot; from an Activity to a Fragment","body":"<h2>Crash course about shared element transitions</h2>\n<p>Let's first quickly review how the Android framework does the magical <em>Shared Element Transition</em>:</p>\n<p>A <em>Shared Element Transition</em> is actually just one of the android framework's <strong>lies</strong>. The truth is when executing a <em>Shared Element Transition</em>, you're NOT sharing any view between your activities but you have the illusion of doing so. That's because each activity has to have its own independent view tree.</p>\n<h3>Huh?!</h3>\n<p>Let's use an example, suppose that we have a shared element transition from a view <code>view_a</code>, located in <code>ActivityA</code>, to <code>view_b</code>, located in <code>ActivityB</code>. The transition will be executed as follows:</p>\n<ol>\n<li>The transition framework first looks for the dimensions (<code>width</code>,\n<code>height</code>) and for the position (<code>x</code>,<code>y</code>) of <code>view_a</code> in the\n<code>ActivityA</code> (along with other properties).</li>\n<li>The properties are passed to <code>ActivityB</code> and applied on <code>view_b</code> so\nthat <code>view_b</code> occupies the exact same spot as <code>view_a</code> on the\nscreen.</li>\n<li><code>ActivityA</code> gets closed and <code>view_b</code> appears right underneath\n<code>view_a</code>, making it look as if <code>view_a</code> did not go with the other views of <code>ActivityA</code>.</li>\n<li>Finally, a reverse animation is applied on <code>view_b</code> shifting it to\nwhat it is supposed to look like in <code>ActivityB</code>.</li>\n</ol>\n<p>This is how the illusion of the view being shared is created. Magic!</p>\n<h2>Back to your question</h2>\n<p>What we can deduce from above is that before any animation can be started, one has to make sure that <code>view_b</code> has already been created on <code>ActivityB</code>, otherwise, this wouldn't be possible.</p>\n<h2>Using a <code>Fragment</code></h2>\n<p>Calling <code>FragmentTransaction.commit()</code>will just schedule your fragment transaction (the fragment will NOT be created immediately after its containing activity is created).</p>\n<p>So, in your case, when your <code>ActivityB</code> is created, your <code>view_b</code> is missing (as explained, that's because its containing fragment hasn't been created yet).</p>\n<h3>Solution</h3>\n<p>Make sure your <code>view_b</code> is created before the animation starts.</p>\n<p>For that, you'll have to find a way to tell the framework to not do the usual thing but to wait instead for your signal before creating the animation.</p>\n<p>One way to implement this is to alter your code to be something similar to this one:</p>\n<h4>ActivityB</h4>\n<pre><code>class ActivityB extends Activity{\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        // ...\n        // Tell the framework to wait.\n        postponeEnterTransition();\n    }\n}\n</code></pre>\n<h4>FragmentB</h4>\n<pre><code>class FragmentB extends Fragment {\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\n    View viewB = getView().findViewById(R.id.view_b);\n    sharedview.getViewTreeObserver().addOnPreDrawListener(new ViewTreeObserver.OnPreDrawListener() {\n        @Override\n        public boolean onPreDraw() {\n                // Tell the framework to start.\n                sharedview.getViewTreeObserver().removeOnPreDrawListener(this);\n                getActivity().startPostponedEnterTransition(); \n                return true;\n         }\n       });\n       ...\n    }\n}\n</code></pre>\n<h2>Further reading</h2>\n<p><a href=\"http://www.androiddesignpatterns.com/2014/12/activity-fragment-transitions-in-android-lollipop-part1.html\" rel=\"nofollow noreferrer\">Getting Started with Activity &amp; Fragment Transitions</a></p>\n"},{"comments":[{"owner":{"account_id":10054107,"reputation":234,"user_id":7432918,"display_name":"atwrk"},"score":0,"creation_date":1485133120,"post_id":41789233,"comment_id":70784011,"body_markdown":"Thanks for the answer. I will give this a go, but i am a bit skeptical that this is the appropriate way to achieve what I need. I am not trying to do any morphing, just carry over a view from my activity to a fragment.","body":"Thanks for the answer. I will give this a go, but i am a bit skeptical that this is the appropriate way to achieve what I need. I am not trying to do any morphing, just carry over a view from my activity to a fragment."}],"tags":[],"owner":{"account_id":3769888,"reputation":11744,"user_id":3225458,"display_name":"romtsn"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1485076795,"creation_date":1485076795,"answer_id":41789233,"question_id":41708595,"body_markdown":"What you&#39;re looking for is this example: https://github.com/hujiaweibujidao/FabDialogMorph.\r\nNote, that what you&#39;re trying to achieve is not standard Android transition, you need to create your own morphing transition, based on `ChangeBounds` transition. Originally, it has been shown in [Plaid][1], thanks to [Nick Butcher][2] for that, so you can check it for more tips and background.\r\n\r\n\r\n  [1]: https://github.com/nickbutcher/plaid\r\n  [2]: https://stackoverflow.com/users/409481/crafty","title":"Executing a &quot;Shared Element Transition&quot; from an Activity to a Fragment","body":"<p>What you're looking for is this example: <a href=\"https://github.com/hujiaweibujidao/FabDialogMorph\" rel=\"nofollow noreferrer\">https://github.com/hujiaweibujidao/FabDialogMorph</a>.\nNote, that what you're trying to achieve is not standard Android transition, you need to create your own morphing transition, based on <code>ChangeBounds</code> transition. Originally, it has been shown in <a href=\"https://github.com/nickbutcher/plaid\" rel=\"nofollow noreferrer\">Plaid</a>, thanks to <a href=\"https://stackoverflow.com/users/409481/crafty\">Nick Butcher</a> for that, so you can check it for more tips and background.</p>\n"},{"tags":[],"owner":{"account_id":892271,"reputation":2125,"user_id":930293,"accept_rate":50,"display_name":"nic"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1485515769,"creation_date":1485515769,"answer_id":41892718,"question_id":41708595,"body_markdown":"Just quoting the [Android Docs][1]: \r\n\r\n**Start an activity with a shared element**\r\n\r\n&gt; 4. Assign a common name to the shared elements in both layouts with the android:transitionName attribute.\r\n\r\nFrom what I see, both of your XMLs don&#39;t share the same **android:transitionName**.\r\n\r\nTry changing both android:transitionName in the XML layout (activity_main.xml &amp; dialog_sheet.xml) to a same string, for example: **transition_plane_feather**\r\n\r\nI havent&#39;t tested the codes myself, but I think that might be a good starting point.\r\n\r\nBonus Tip\r\n---------\r\n\r\nIf you&#39;re planning to fully implement Material Design without compatibility with lower API levels (pre-Lollipop), I highly recommend checking out a sample made by a Google UI/UX Designer: [https://github.com/nickbutcher/plaid][2]\r\n\r\nAlso, check out the excellent supplementary YouTube video to that sample: [https://www.youtube.com/watch?v=EjTJIDKT72M][3]\r\n\r\nIt shows you some of the best tricks and practices that you can use to fully implement Material Design as well as shared element transitions.\r\n\r\n  [1]: https://developer.android.com/training/material/animations.html\r\n  [2]: https://github.com/nickbutcher/plaid\r\n  [3]: https://www.youtube.com/watch?v=EjTJIDKT72M","title":"Executing a &quot;Shared Element Transition&quot; from an Activity to a Fragment","body":"<p>Just quoting the <a href=\"https://developer.android.com/training/material/animations.html\" rel=\"nofollow noreferrer\">Android Docs</a>: </p>\n\n<p><strong>Start an activity with a shared element</strong></p>\n\n<blockquote>\n  <ol start=\"4\">\n  <li>Assign a common name to the shared elements in both layouts with the android:transitionName attribute.</li>\n  </ol>\n</blockquote>\n\n<p>From what I see, both of your XMLs don't share the same <strong>android:transitionName</strong>.</p>\n\n<p>Try changing both android:transitionName in the XML layout (activity_main.xml &amp; dialog_sheet.xml) to a same string, for example: <strong>transition_plane_feather</strong></p>\n\n<p>I havent't tested the codes myself, but I think that might be a good starting point.</p>\n\n<h2>Bonus Tip</h2>\n\n<p>If you're planning to fully implement Material Design without compatibility with lower API levels (pre-Lollipop), I highly recommend checking out a sample made by a Google UI/UX Designer: <a href=\"https://github.com/nickbutcher/plaid\" rel=\"nofollow noreferrer\">https://github.com/nickbutcher/plaid</a></p>\n\n<p>Also, check out the excellent supplementary YouTube video to that sample: <a href=\"https://www.youtube.com/watch?v=EjTJIDKT72M\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=EjTJIDKT72M</a></p>\n\n<p>It shows you some of the best tricks and practices that you can use to fully implement Material Design as well as shared element transitions.</p>\n"}],"owner":{"account_id":10054107,"reputation":234,"user_id":7432918,"display_name":"atwrk"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13533,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"answer_count":3,"score":19,"last_activity_date":1694042045,"creation_date":1484694129,"question_id":41708595,"body_markdown":"I have made a github project with just the issue. You can see it / clone it / build it from here: https://git.io/vMPqb\r\n\r\n----\r\nI am trying to get shared elements working for a Fragment transition.\r\n\r\nThere are two FABs in the project - Feather and Plane. Feather and Plane are shared elements. When Feather is clicked, the SheetDialog is opened, and Feather should animate over to Plane dialog. It does not do that at the moment, and I am trying to determine why.\r\n\r\nIt may be worthwhile noting that I am running this on API 24 so issues with transitions not being supported below version 21 is not the problem.\r\n\r\nCan anyone tell me why shared element transitions are not working?\r\n\r\nTo echo what is there in the repo, there are four important files:\r\n\r\n__Main Activity__\r\n\r\n    package test.example.fabpop;\r\n\r\n    import android.os.Bundle;\r\n    import android.support.design.widget.FloatingActionButton;\r\n    import android.support.transition.ChangeBounds;\r\n    import android.support.transition.Fade;\r\n    import android.support.v4.app.FragmentTransaction;\r\n    import android.support.v7.app.AppCompatActivity;\r\n    import android.view.View;\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n        FloatingActionButton fab_feather;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n            fab_feather = (FloatingActionButton) findViewById(R.id.initial_fab_feather);\r\n        }\r\n    \r\n        public void fabClick(View view) {\r\n            SheetDialog dialogFragment = new SheetDialog();\r\n    \r\n            FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();\r\n    \r\n            // This seemingly has no effect. I am trying to get it to work.\r\n            transaction.addSharedElement(fab_feather, &quot;transition_name_plane&quot;);\r\n    \r\n            dialogFragment.setSharedElementEnterTransition(new ChangeBounds());\r\n            dialogFragment.setSharedElementReturnTransition(new Fade(Fade.OUT));\r\n    \r\n            dialogFragment.show(transaction, &quot;frag_tag&quot;);\r\n        }\r\n    }\r\n\r\n__activity_main.xml Layout__\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:id=&quot;@+id/activity_main&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:paddingBottom=&quot;@dimen/activity_vertical_margin&quot;\r\n        android:paddingLeft=&quot;@dimen/activity_horizontal_margin&quot;\r\n        android:paddingRight=&quot;@dimen/activity_horizontal_margin&quot;\r\n        android:paddingTop=&quot;@dimen/activity_vertical_margin&quot;\r\n        tools:context=&quot;test.example.fabpop.MainActivity&quot;&gt;\r\n    \r\n        &lt;LinearLayout\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_alignParentEnd=&quot;true&quot;\r\n            android:orientation=&quot;vertical&quot;&gt;\r\n            &lt;TextView\r\n                android:layout_width=&quot;200dp&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:text=&quot;Transition to a BottomSheetDialogFragment that shares this FAB&quot;\r\n                android:textAlignment=&quot;center&quot;/&gt;\r\n    \r\n            &lt;!--  Feather FAB  --&gt;\r\n            &lt;android.support.design.widget.FloatingActionButton\r\n                android:id=&quot;@+id/initial_fab_feather&quot;\r\n                android:layout_width=&quot;52dp&quot;\r\n                android:layout_height=&quot;52dp&quot;\r\n                android:layout_margin=&quot;16dp&quot;\r\n                android:layout_gravity=&quot;center&quot;\r\n                android:onClick=&quot;fabClick&quot;\r\n                android:transitionName=&quot;transition_name_feather&quot;\r\n                android:src=&quot;@drawable/ic_feather&quot;\r\n                /&gt;\r\n        &lt;/LinearLayout&gt;\r\n    \r\n    \r\n    &lt;/RelativeLayout&gt;\r\n\r\n\r\n__SheetDialog__\r\n\r\n    package test.example.fabpop;\r\n    \r\n    import android.os.Bundle;\r\n    import android.support.annotation.Nullable;\r\n    import android.support.design.widget.BottomSheetDialogFragment;\r\n    import android.view.LayoutInflater;\r\n    import android.view.View;\r\n    import android.view.ViewGroup;\r\n    \r\n    public class SheetDialog extends BottomSheetDialogFragment {\r\n    \r\n        @Nullable\r\n        @Override\r\n        public View onCreateView(LayoutInflater inflater,\r\n                                 @Nullable ViewGroup container,\r\n                                 @Nullable Bundle savedInstanceState) {\r\n    \r\n            return inflater.inflate(R.layout.dialog_sheet, container, false);\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n__dialog_sheet.xml Layout__\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:orientation=&quot;vertical&quot; android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;&gt;\r\n    \r\n        &lt;!--  Plane FAB  --&gt;\r\n        &lt;android.support.design.widget.FloatingActionButton\r\n            android:id=&quot;@+id/final_fab_plane&quot;\r\n            android:layout_width=&quot;75dp&quot;\r\n            android:layout_height=&quot;75dp&quot;\r\n            android:layout_margin=&quot;16dp&quot;\r\n            android:transitionName=&quot;transition_name_plane&quot;\r\n            android:src=&quot;@drawable/ic_plane&quot;\r\n            /&gt;\r\n    \r\n    &lt;/LinearLayout&gt;\r\n\r\n\r\n\r\nIs it not possible to have a shared element on a transition between one Activity and one Fragment? Perhaps is is only possible between Activity to Activity or Fragment to Fragment, but not across the two types? Maybe this is why I cannot get it to work?\r\n\r\n\r\nUpdate:\r\n\r\nI have now tried adding `&lt;item name=&quot;android:windowContentTransitions&quot;&gt;true&lt;/item&gt;` to the app&#39;s theme. \r\n\r\nI have also now tried while ensuring that both transitionName values are the same on both views.\r\n\r\nneither of these have helped to fix the issue.","title":"Executing a &quot;Shared Element Transition&quot; from an Activity to a Fragment","body":"<p>I have made a github project with just the issue. You can see it / clone it / build it from here: <a href=\"https://git.io/vMPqb\">https://git.io/vMPqb</a></p>\n\n<hr>\n\n<p>I am trying to get shared elements working for a Fragment transition.</p>\n\n<p>There are two FABs in the project - Feather and Plane. Feather and Plane are shared elements. When Feather is clicked, the SheetDialog is opened, and Feather should animate over to Plane dialog. It does not do that at the moment, and I am trying to determine why.</p>\n\n<p>It may be worthwhile noting that I am running this on API 24 so issues with transitions not being supported below version 21 is not the problem.</p>\n\n<p>Can anyone tell me why shared element transitions are not working?</p>\n\n<p>To echo what is there in the repo, there are four important files:</p>\n\n<p><strong>Main Activity</strong></p>\n\n<pre><code>package test.example.fabpop;\n\nimport android.os.Bundle;\nimport android.support.design.widget.FloatingActionButton;\nimport android.support.transition.ChangeBounds;\nimport android.support.transition.Fade;\nimport android.support.v4.app.FragmentTransaction;\nimport android.support.v7.app.AppCompatActivity;\nimport android.view.View;\n\npublic class MainActivity extends AppCompatActivity {\n\n    FloatingActionButton fab_feather;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        fab_feather = (FloatingActionButton) findViewById(R.id.initial_fab_feather);\n    }\n\n    public void fabClick(View view) {\n        SheetDialog dialogFragment = new SheetDialog();\n\n        FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();\n\n        // This seemingly has no effect. I am trying to get it to work.\n        transaction.addSharedElement(fab_feather, \"transition_name_plane\");\n\n        dialogFragment.setSharedElementEnterTransition(new ChangeBounds());\n        dialogFragment.setSharedElementReturnTransition(new Fade(Fade.OUT));\n\n        dialogFragment.show(transaction, \"frag_tag\");\n    }\n}\n</code></pre>\n\n<p><strong>activity_main.xml Layout</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:id=\"@+id/activity_main\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:paddingBottom=\"@dimen/activity_vertical_margin\"\n    android:paddingLeft=\"@dimen/activity_horizontal_margin\"\n    android:paddingRight=\"@dimen/activity_horizontal_margin\"\n    android:paddingTop=\"@dimen/activity_vertical_margin\"\n    tools:context=\"test.example.fabpop.MainActivity\"&gt;\n\n    &lt;LinearLayout\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_alignParentEnd=\"true\"\n        android:orientation=\"vertical\"&gt;\n        &lt;TextView\n            android:layout_width=\"200dp\"\n            android:layout_height=\"wrap_content\"\n            android:text=\"Transition to a BottomSheetDialogFragment that shares this FAB\"\n            android:textAlignment=\"center\"/&gt;\n\n        &lt;!--  Feather FAB  --&gt;\n        &lt;android.support.design.widget.FloatingActionButton\n            android:id=\"@+id/initial_fab_feather\"\n            android:layout_width=\"52dp\"\n            android:layout_height=\"52dp\"\n            android:layout_margin=\"16dp\"\n            android:layout_gravity=\"center\"\n            android:onClick=\"fabClick\"\n            android:transitionName=\"transition_name_feather\"\n            android:src=\"@drawable/ic_feather\"\n            /&gt;\n    &lt;/LinearLayout&gt;\n\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n\n<p><strong>SheetDialog</strong></p>\n\n<pre><code>package test.example.fabpop;\n\nimport android.os.Bundle;\nimport android.support.annotation.Nullable;\nimport android.support.design.widget.BottomSheetDialogFragment;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\n\npublic class SheetDialog extends BottomSheetDialogFragment {\n\n    @Nullable\n    @Override\n    public View onCreateView(LayoutInflater inflater,\n                             @Nullable ViewGroup container,\n                             @Nullable Bundle savedInstanceState) {\n\n        return inflater.inflate(R.layout.dialog_sheet, container, false);\n    }\n}\n</code></pre>\n\n<p><strong>dialog_sheet.xml Layout</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:orientation=\"vertical\" android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"&gt;\n\n    &lt;!--  Plane FAB  --&gt;\n    &lt;android.support.design.widget.FloatingActionButton\n        android:id=\"@+id/final_fab_plane\"\n        android:layout_width=\"75dp\"\n        android:layout_height=\"75dp\"\n        android:layout_margin=\"16dp\"\n        android:transitionName=\"transition_name_plane\"\n        android:src=\"@drawable/ic_plane\"\n        /&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p>Is it not possible to have a shared element on a transition between one Activity and one Fragment? Perhaps is is only possible between Activity to Activity or Fragment to Fragment, but not across the two types? Maybe this is why I cannot get it to work?</p>\n\n<p>Update:</p>\n\n<p>I have now tried adding <code>&lt;item name=\"android:windowContentTransitions\"&gt;true&lt;/item&gt;</code> to the app's theme. </p>\n\n<p>I have also now tried while ensuring that both transitionName values are the same on both views.</p>\n\n<p>neither of these have helped to fix the issue.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1635690,"reputation":150157,"user_id":1509264,"accept_rate":58,"display_name":"MT0"},"score":0,"creation_date":1694040286,"post_id":77055622,"comment_id":135840620,"body_markdown":"This is probably a duplicate of https://stackoverflow.com/q/5678666/1509264 (summary, strip the first 13 characters, i.e. the `FORMAT-ZIPV2` and the new line, and then write the remaining bytes to a Zip file)","body":"This is probably a duplicate of <a href=\"https://stackoverflow.com/q/5678666/1509264\">stackoverflow.com/q/5678666/1509264</a> (summary, strip the first 13 characters, i.e. the <code>FORMAT-ZIPV2</code> and the new line, and then write the remaining bytes to a Zip file)"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1694040424,"post_id":77055622,"comment_id":135840631,"body_markdown":"I&#39;d use `getBinaryStream().transferTo` Unclear file type so far. Save a small one we can examine","body":"I&#39;d use <code>getBinaryStream().transferTo</code> Unclear file type so far. Save a small one we can examine"},{"owner":{"account_id":11653885,"reputation":2966,"user_id":8534285,"display_name":"Ajay Kumar"},"score":0,"creation_date":1694040700,"post_id":77055622,"comment_id":135840664,"body_markdown":"@g00se can you please provide a sample/pseudo code?","body":"@g00se can you please provide a sample/pseudo code?"},{"owner":{"account_id":1635690,"reputation":150157,"user_id":1509264,"accept_rate":58,"display_name":"MT0"},"score":1,"creation_date":1694040847,"post_id":77055622,"comment_id":135840681,"body_markdown":"There is code in the linked duplicate.","body":"There is code in the linked duplicate."}],"owner":{"account_id":11653885,"reputation":2966,"user_id":8534285,"display_name":"Ajay Kumar"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1694040814,"answer_count":0,"score":0,"last_activity_date":1694041991,"creation_date":1694039845,"question_id":77055622,"body_markdown":"In my old Oracle database&#39;s table there is a column of data type long.\r\n\r\nI am trying to read the that column&#39;s content to a file like below:\r\n\r\n    import java.io.FileOutputStream;\r\n    import java.sql.Connection;\r\n    import java.sql.DriverManager;\r\n    import java.sql.PreparedStatement;\r\n    import java.sql.ResultSet;\r\n    import java.sql.SQLException;\r\n    \r\n    public class TheMainClass{\r\n    \r\n    \t@SuppressWarnings(&quot;resource&quot;)\r\n    \tpublic static void main(String[] args) {\r\n    \r\n    \t\tString username = &quot;easyusername&quot;;\r\n    \t\tString password = &quot;toughpassword&quot;;\r\n    \t\ttry (Connection conn = DriverManager.getConnection(&quot;jdbc:oracle:thin:@server.com:1521/theservicename&quot;,\r\n    \t\t\t\t&quot;&quot; + username + &quot;&quot;, &quot;&quot; + password + &quot;&quot;)) {\r\n    \r\n    \t\t\ttry (PreparedStatement s = conn.prepareStatement(\r\n    \t\t\t\t\t&quot;SELECT IMAGECONTENTS_COMPRESSED FROM images_compressed where IMAGE_COMPRESSED_K = &#39;D25Q0XS9T0&#39;&quot;);\r\n    \t\t\t\t\tResultSet rset2 = s.executeQuery()) {\r\n    \t\t\t\tif (rset2.next()) {\r\n    \t\t\t\t\tbyte[] bytes = rset2.getBytes(1);\r\n    \t\t\t\t\ttry {\r\n    \t\t\t\t\t\tFileOutputStream file = null;\r\n    \t\t\t\t\t\tfile = new FileOutputStream(&quot;somefilename.pdf&quot;);\r\n    \t\t\t\t\t\tfile.write(bytes);\r\n    \t\t\t\t\t} catch (Exception e) {\r\n    \t\t\t\t\t\tString err = e.toString();\r\n    \t\t\t\t\t\tSystem.out.println(err);\r\n    \t\t\t\t\t} finally {\r\n    \t\t\t\t\t\tSystem.out.println(&quot;All Done. !&quot;);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \r\n    \t\t} catch (SQLException e) {\r\n    \t\t\tSystem.err.format(&quot;SQL State: %s\\n%s&quot;, e.getSQLState(), e.getMessage());\r\n    \t\t} catch (Exception e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    }\r\n\r\nThe file is written successfully but I can&#39;t open it as a PDF. When I open it with some text processor app like notepad++ it shows content as two lines. \r\n\r\nFirst line is - &quot;FORMAT-ZIPV2&quot; and \r\n\r\nSecond line is a super long string :\r\n\r\n    FORMAT-ZIPV2\r\n    504B0304140002000800AC7D113702F7FE42B1340000574900000E000000643235713078733974302E706466EDBC775853CDF6284CEFCD8222520216108524404882F45EA42ANDAVERYLONGSTRING\r\n\r\nAny idea what kind of format it is AND how do I write correctly to a file ? Please let me know if any other details are needed. I can provide them as update.\r\n\r\nI tried the following to remove FORMAT-ZIPV2 and tried to decode using Base64 but still the resultant zip file still throws error for not being a valid zip file:\r\n\r\n\t\t\t\tString content = new String(Files.readAllBytes(Paths.get(&quot;zipfilename.pdf&quot;)));\r\n\t\t\t\tString newContent = content.replaceAll(&quot;FORMAT-ZIPV2&quot;, &quot;&quot;).replaceAll(&quot;\\\\r|\\\\n&quot;, &quot;&quot;);\r\n\t\t\t\tSystem.out.println(&quot;File Content:: &quot; + content);\r\n\t\t\t\tSystem.out.println(&quot;File New Content:: &quot; + newContent);\r\n\t\t\t\tBase64.Decoder dec = Base64.getDecoder();\r\n\t\t\t\tString decoded = new String(dec.decode(newContent));\r\n\t\t\t\tSystem.out.println(&quot;decoded value is \\t\\n\\n&quot; + decoded);\r\n\t\t\t\tPath path = Paths.get(&quot;somezipfilename.zip&quot;);\r\n\t\t\t\ttry {\r\n\t\t\t\t\tFiles.writeString(path, decoded, StandardCharsets.UTF_8);\r\n\t\t\t\t} catch (IOException ex) {\r\n\t\t\t\t\tSystem.out.print(&quot;Invalid Path&quot;);\r\n\t\t\t\t}\r\n\r\n","title":"Not able to determine the format from long data type content","body":"<p>In my old Oracle database's table there is a column of data type long.</p>\n<p>I am trying to read the that column's content to a file like below:</p>\n<pre><code>import java.io.FileOutputStream;\nimport java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\n\npublic class TheMainClass{\n\n    @SuppressWarnings(&quot;resource&quot;)\n    public static void main(String[] args) {\n\n        String username = &quot;easyusername&quot;;\n        String password = &quot;toughpassword&quot;;\n        try (Connection conn = DriverManager.getConnection(&quot;jdbc:oracle:thin:@server.com:1521/theservicename&quot;,\n                &quot;&quot; + username + &quot;&quot;, &quot;&quot; + password + &quot;&quot;)) {\n\n            try (PreparedStatement s = conn.prepareStatement(\n                    &quot;SELECT IMAGECONTENTS_COMPRESSED FROM images_compressed where IMAGE_COMPRESSED_K = 'D25Q0XS9T0'&quot;);\n                    ResultSet rset2 = s.executeQuery()) {\n                if (rset2.next()) {\n                    byte[] bytes = rset2.getBytes(1);\n                    try {\n                        FileOutputStream file = null;\n                        file = new FileOutputStream(&quot;somefilename.pdf&quot;);\n                        file.write(bytes);\n                    } catch (Exception e) {\n                        String err = e.toString();\n                        System.out.println(err);\n                    } finally {\n                        System.out.println(&quot;All Done. !&quot;);\n                    }\n                }\n            }\n\n        } catch (SQLException e) {\n            System.err.format(&quot;SQL State: %s\\n%s&quot;, e.getSQLState(), e.getMessage());\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n\n    }\n\n}\n</code></pre>\n<p>The file is written successfully but I can't open it as a PDF. When I open it with some text processor app like notepad++ it shows content as two lines.</p>\n<p>First line is - &quot;FORMAT-ZIPV2&quot; and</p>\n<p>Second line is a super long string :</p>\n<pre><code>FORMAT-ZIPV2\n504B0304140002000800AC7D113702F7FE42B1340000574900000E000000643235713078733974302E706466EDBC775853CDF6284CEFCD8222520216108524404882F45EA42ANDAVERYLONGSTRING\n</code></pre>\n<p>Any idea what kind of format it is AND how do I write correctly to a file ? Please let me know if any other details are needed. I can provide them as update.</p>\n<p>I tried the following to remove FORMAT-ZIPV2 and tried to decode using Base64 but still the resultant zip file still throws error for not being a valid zip file:</p>\n<pre><code>            String content = new String(Files.readAllBytes(Paths.get(&quot;zipfilename.pdf&quot;)));\n            String newContent = content.replaceAll(&quot;FORMAT-ZIPV2&quot;, &quot;&quot;).replaceAll(&quot;\\\\r|\\\\n&quot;, &quot;&quot;);\n            System.out.println(&quot;File Content:: &quot; + content);\n            System.out.println(&quot;File New Content:: &quot; + newContent);\n            Base64.Decoder dec = Base64.getDecoder();\n            String decoded = new String(dec.decode(newContent));\n            System.out.println(&quot;decoded value is \\t\\n\\n&quot; + decoded);\n            Path path = Paths.get(&quot;somezipfilename.zip&quot;);\n            try {\n                Files.writeString(path, decoded, StandardCharsets.UTF_8);\n            } catch (IOException ex) {\n                System.out.print(&quot;Invalid Path&quot;);\n            }\n</code></pre>\n"},{"tags":["java","struts-1","stack-overflow","ejb-2.x","jboss-eap-6"],"answers":[{"comments":[{"owner":{"account_id":4983405,"reputation":61,"user_id":4007707,"display_name":"lee b"},"score":0,"creation_date":1411482598,"post_id":25855603,"comment_id":40713263,"body_markdown":"I&#39;ve commented the line &lt;!--&lt;tiles:insert attribute=&quot;header&quot; flush=&quot;true&quot; /&gt;--&gt; in layout.jsp, but still I&#39;m getting the same error.","body":"I&#39;ve commented the line &lt;!--&lt;tiles:insert attribute=&quot;header&quot; flush=&quot;true&quot; /&gt;--&gt; in layout.jsp, but still I&#39;m getting the same error."},{"owner":{"account_id":4983405,"reputation":61,"user_id":4007707,"display_name":"lee b"},"score":0,"creation_date":1411482983,"post_id":25855603,"comment_id":40713511,"body_markdown":"I see a bug in Jboss EAP server\nhttps://bugzilla.redhat.com/show_bug.cgi?id=1076572","body":"I see a bug in Jboss EAP server <a href=\"https://bugzilla.redhat.com/show_bug.cgi?id=1076572\" rel=\"nofollow noreferrer\">bugzilla.redhat.com/show_bug.cgi?id=1076572</a>"},{"owner":{"account_id":91502,"reputation":88311,"user_id":251173,"accept_rate":86,"display_name":"Buhake Sindi"},"score":0,"creation_date":1411484127,"post_id":25855603,"comment_id":40714337,"body_markdown":"Is one of your bean non-serializable?","body":"Is one of your bean non-serializable?"},{"owner":{"account_id":4983405,"reputation":61,"user_id":4007707,"display_name":"lee b"},"score":0,"creation_date":1411561907,"post_id":25855603,"comment_id":40748226,"body_markdown":"Hi, all the required bean classes are serialized, yet getting the same error","body":"Hi, all the required bean classes are serialized, yet getting the same error"},{"owner":{"account_id":91502,"reputation":88311,"user_id":251173,"accept_rate":86,"display_name":"Buhake Sindi"},"score":0,"creation_date":1411567063,"post_id":25855603,"comment_id":40751797,"body_markdown":"Then paste your `layout.jsp` page and, more or less, show us where the error occur.","body":"Then paste your <code>layout.jsp</code> page and, more or less, show us where the error occur."},{"owner":{"account_id":4983405,"reputation":61,"user_id":4007707,"display_name":"lee b"},"score":0,"creation_date":1411631840,"post_id":25855603,"comment_id":40778619,"body_markdown":"I&#39;ve pasted the layout.jsp now. But when I commented the line &lt;!--&lt;tiles:insert attribute=&quot;header&quot; flush=&quot;true&quot; /&gt;--&gt; in layout.jsp\nthe page goes blank, seems its dependent for all the jsp(s) in common. I doubt the issue is not only with this..","body":"I&#39;ve pasted the layout.jsp now. But when I commented the line &lt;!--&lt;tiles:insert attribute=&quot;header&quot; flush=&quot;true&quot; /&gt;--&gt; in layout.jsp the page goes blank, seems its dependent for all the jsp(s) in common. I doubt the issue is not only with this.."},{"owner":{"account_id":91502,"reputation":88311,"user_id":251173,"accept_rate":86,"display_name":"Buhake Sindi"},"score":0,"creation_date":1411632702,"post_id":25855603,"comment_id":40779043,"body_markdown":"Your taglib configuration seems dodgy. Please see [this answer](http://stackoverflow.com/questions/2392993/struts-taglib-directive-in-a-jsp-page-for-tld-provided-by-struts) to configure Struts properly in your project and see if this solves your problem.","body":"Your taglib configuration seems dodgy. Please see <a href=\"http://stackoverflow.com/questions/2392993/struts-taglib-directive-in-a-jsp-page-for-tld-provided-by-struts\">this answer</a> to configure Struts properly in your project and see if this solves your problem."},{"owner":{"account_id":4983405,"reputation":61,"user_id":4007707,"display_name":"lee b"},"score":0,"creation_date":1411649598,"post_id":25855603,"comment_id":40788847,"body_markdown":"The struts are properly configured, yet getting the similar stackoverflow error in another screen as well... (error.jsp)","body":"The struts are properly configured, yet getting the similar stackoverflow error in another screen as well... (error.jsp)"},{"owner":{"account_id":4983405,"reputation":61,"user_id":4007707,"display_name":"lee b"},"score":1,"creation_date":1412000342,"post_id":25855603,"comment_id":40904324,"body_markdown":"Is there any other way to fix this stackoverflow error?","body":"Is there any other way to fix this stackoverflow error?"}],"tags":[],"owner":{"account_id":91502,"reputation":88311,"user_id":251173,"accept_rate":86,"display_name":"Buhake Sindi"},"comment_count":9,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1410809639,"creation_date":1410809639,"answer_id":25855603,"question_id":25846648,"body_markdown":"In your Struts JSP `layout.jsp` there is a [`&lt;tiles:insert&gt;`][1] tag that causes Struts to do a loop when Servlet tries to render the page.\r\n\r\n\r\n  [1]: http://struts.apache.org/release/1.3.x/struts-tiles/tlddoc/tiles/insert.html","title":"JBWEB000236: Servlet.service() for servlet strutsAction threw exception: java.lang.StackOverflowError","body":"<p>In your Struts JSP <code>layout.jsp</code> there is a <a href=\"http://struts.apache.org/release/1.3.x/struts-tiles/tlddoc/tiles/insert.html\" rel=\"nofollow\"><code>&lt;tiles:insert&gt;</code></a> tag that causes Struts to do a loop when Servlet tries to render the page.</p>\n"}],"owner":{"account_id":4983405,"reputation":61,"user_id":4007707,"display_name":"lee b"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9234,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1694041265,"creation_date":1410779157,"question_id":25846648,"body_markdown":"I&#39;m migrating my application from Jboss 4 to Jboss 7(jboss eap 6.1 alpha) getting the below error, while trying to search results in my project.\r\nI&#39;m using Java 6, Struts 1.2, EJB 2.0, Jboss 6 EAP alpha.\r\nNote: The same code works fine when running in Jboss 4.0\r\n\r\nServer Logs:\r\n\r\n    ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/myproject].[strutsAction]] (http-localhost/127.0.0.1:8080-2) JBWEB000236: Servlet.service() for servlet strutsAction threw exception: java.lang.StackOverflowError\r\n    \tat java.util.IdentityHashMap.maskNull(IdentityHashMap.java:175) [rt.jar:1.6.0_27]\r\n    \tat java.util.IdentityHashMap.get(IdentityHashMap.java:314) [rt.jar:1.6.0_27]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.clone(SerializingCloner.java:150) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.clone(SerializingCloner.java:134) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:274) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \t\r\n    \t\r\n    ERROR [org.apache.struts.taglib.tiles.InsertTag] (http-localhost/127.0.0.1:8080-2) ServletException in &#39;/auth/searchresults.do&#39;: null: javax.servlet.ServletException: JBWEB000248: Servlet execution threw an exception\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:312) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:214) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:832) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:718) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:655) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat org.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:940) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat org.apache.jasper.runtime.PageContextImpl.include(PageContextImpl.java:607) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat org.apache.struts.tiles.TilesUtilImpl.doInclude(TilesUtilImpl.java:99) [struts.jar:1.2.9]\r\n    \tat org.apache.struts.tiles.TilesUtil.doInclude(TilesUtil.java:135) [struts.jar:1.2.9]\r\n    \tat org.apache.struts.taglib.tiles.InsertTag.doInclude(InsertTag.java:760) [struts.jar:1.2.9]\r\n    \tat org.apache.struts.taglib.tiles.InsertTag$InsertHandler.doEndTag(InsertTag.java:892) [struts.jar:1.2.9]\r\n    \tat org.apache.struts.taglib.tiles.InsertTag.doEndTag(InsertTag.java:462) [struts.jar:1.2.9]\r\n    \tat org.apache.jsp.layout_jsp._jspx_meth_tiles_005finsert_005f2(layout_jsp.java:810)\r\n    \tat org.apache.jsp.layout_jsp._jspService(layout_jsp.java:512)\r\n    \tat org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:69) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.2.Final.jar:1.0.2.Final]\r\n    \tat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:365) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:309) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:242) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.2.Final.jar:1.0.2.Final]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:295) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:214) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:832) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:620) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:553) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:482) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat org.apache.struts.action.RequestProcessor.doForward(RequestProcessor.java:1085) [struts.jar:1.2.9]\r\n    \tat org.apache.struts.tiles.TilesRequestProcessor.doForward(TilesRequestProcessor.java:263) [struts.jar:1.2.9]\r\n    \tat org.apache.struts.tiles.TilesRequestProcessor.processTilesDefinition(TilesRequestProcessor.java:239) [struts.jar:1.2.9]\r\n    \tat org.apache.struts.tiles.TilesRequestProcessor.processForwardConfig(TilesRequestProcessor.java:302) [struts.jar:1.2.9]\r\n    \tat org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:241) [struts.jar:1.2.9]\r\n    \tat org.apache.struts.action.ActionServlet.process(ActionServlet.java:1196) [struts.jar:1.2.9]\r\n    \tat org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:414) [struts.jar:1.2.9]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:734) [jboss-servlet-api_3.0_spec-1.0.2.Final.jar:1.0.2.Final]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.2.Final.jar:1.0.2.Final]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:295) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:214) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:832) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:620) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:553) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:482) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat org.apache.struts.action.RequestProcessor.doForward(RequestProcessor.java:1085) [struts.jar:1.2.9]\r\n    \tat org.apache.struts.tiles.TilesRequestProcessor.doForward(TilesRequestProcessor.java:263) [struts.jar:1.2.9]\r\n    \tat org.apache.struts.action.RequestProcessor.processForwardConfig(RequestProcessor.java:398) [struts.jar:1.2.9]\r\n    \tat org.apache.struts.tiles.TilesRequestProcessor.processForwardConfig(TilesRequestProcessor.java:318) [struts.jar:1.2.9]\r\n    \tat org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:241) [struts.jar:1.2.9]\r\n    \tat org.apache.struts.action.ActionServlet.process(ActionServlet.java:1196) [struts.jar:1.2.9]\r\n    \tat org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:414) [struts.jar:1.2.9]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:734) [jboss-servlet-api_3.0_spec-1.0.2.Final.jar:1.0.2.Final]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.2.Final.jar:1.0.2.Final]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:295) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:214) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat com.abc.book.web.security.AuthFilter.doFilter(AuthFilter.java:72) [classes:]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:246) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:214) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat com.planetj.servlet.filter.compression.CompressingFilter.doFilter(CompressingFilter.java:270) [pjl-comp-filter-1.7.jar:]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:246) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:214) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:149) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:169) [jboss-as-web-7.2.0.Alpha1-redhat-4.jar:7.2.0.Alpha1-redhat-4]\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:145) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:97) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:102) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:336) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:856) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:653) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:920) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_27]\r\n    Caused by: java.lang.StackOverflowError\r\n    \tat java.util.IdentityHashMap.maskNull(IdentityHashMap.java:175) [rt.jar:1.6.0_27]\r\n    \tat java.util.IdentityHashMap.get(IdentityHashMap.java:314) [rt.jar:1.6.0_27]\r\n    \tat org.jboss.marshalling.cloner.SerializingCloner.clone(SerializingCloner.java:150) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\r\n    \t\r\n    \t\r\n    \t\r\n    ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host]] (http-localhost/127.0.0.1:8080-2) JBWEB000313: Exception processing error page /auth/error/error.jsp: java.lang.IllegalStateException: JBWEB000029: Cannot reset buffer after response has been committed\r\n    \tat org.apache.catalina.connector.Response.resetBuffer(Response.java:682) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat org.apache.catalina.connector.Response.resetBuffer(Response.java:702) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:515) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:370) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:159) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:97) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:102) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:336) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:856) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:653) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:920) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    \tat java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_27]\r\n\t\r\n\r\n\r\n`$` Layout.jsp `$`\r\n\r\n        &lt;%@ taglib uri=&quot;/bean&quot; prefix=&quot;bean&quot; %&gt;\r\n    &lt;%@ taglib uri=&quot;/logic&quot; prefix=&quot;logic&quot; %&gt;\r\n    &lt;%@ taglib uri=&quot;/html&quot; prefix=&quot;html&quot; %&gt;\r\n    &lt;%@ taglib uri=&quot;/WEB-INF/struts-tiles.tld&quot; prefix=&quot;tiles&quot; %&gt;\r\n    \r\n    &lt;html:html lang=&quot;false&quot; xhtml=&quot;true&quot;&gt;\r\n    &lt;head&gt;\r\n      &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;\r\n      &lt;meta http-equiv=&quot;Content-Script-Type&quot; content=&quot;text/javascript&quot; /&gt;\r\n    \t&lt;base href=&quot;&lt;%= this.getServletContext().getAttribute(&quot;baseUrl&quot;)%&gt;&quot;&gt;&lt;/base&gt;\r\n    \t&lt;tiles:useAttribute name=&quot;pagetitle&quot; scope=&quot;request&quot; /&gt;\r\n    \t&lt;bean:define id=&quot;pagetitle&quot; scope=&quot;request&quot; toScope=&quot;request&quot; type=&quot;java.lang.String&quot;&gt;&lt;%=pagetitle.toString()%&gt;&lt;/bean:define&gt;\r\n    \t&lt;title&gt;&lt;bean:message key=&quot;index.page.title&quot; /&gt;&lt;/title&gt;\r\n    \t\r\n    \r\n    \t&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; media=&quot;screen&quot; href=&quot;&lt;html:rewrite page=&#39;/style_screen_new.css&#39; /&gt;&quot; /&gt;\r\n    \t&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; media=&quot;screen&quot; href=&quot;&lt;html:rewrite page=&#39;/style_header_footer.css&#39; /&gt;&quot; /&gt;\r\n    \t&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; media=&quot;screen&quot; href=&quot;&lt;html:rewrite page=&#39;/style_screen_specific.css&#39; /&gt;&quot; /&gt;\r\n    \t&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; media=&quot;print&quot; href=&quot;&lt;html:rewrite page=&#39;/style_print.css&#39; /&gt;&quot; /&gt;\t\r\n    \t&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; media=&quot;screen&quot; href=&quot;&lt;html:rewrite page=&#39;/style_screen_orders.css&#39; /&gt;&quot; /&gt;\r\n    \t\r\n    \t&lt;script src=&quot;javascript/validation.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;\r\n    \t&lt;script src=&quot;javascript/utils.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;\r\n    \t\r\n    \t&lt;tiles:useAttribute name=&quot;javascriptFormname&quot;/&gt;\r\n    \t&lt;logic:notEmpty name=&quot;javascriptFormname&quot;&gt;\r\n    \t\t&lt;html:javascript cdata=&quot;true&quot; formName=&quot;&lt;%=javascriptFormname.toString()%&gt;&quot; staticJavascript=&quot;false&quot; scriptLanguage=&quot;false&quot;/&gt;\r\n    \t&lt;/logic:notEmpty&gt;\r\n      &lt;tiles:useAttribute name=&quot;quickFindFormName&quot;/&gt;\r\n      &lt;logic:notEmpty name=&quot;quickFindFormName&quot;&gt;\r\n       &lt;html:javascript cdata=&quot;true&quot; formName=&quot;&lt;%=quickFindFormName.toString()%&gt;&quot; staticJavascript=&quot;false&quot; scriptLanguage=&quot;false&quot;/&gt;\r\n      &lt;/logic:notEmpty&gt;\r\n      \r\n    &lt;%\r\n        String anchor = (String)request.getAttribute(&quot;anchor&quot;);\r\n     %&gt;  \r\n    \r\n    \t&lt;link rel=&quot;icon&quot; href=&quot;&lt;html:rewrite page=&#39;/favicon.ico&#39; /&gt;&quot; type=&quot;image/ico&quot; /&gt;\r\n    \t&lt;link rel=&quot;shortcut icon&quot; href=&quot;&lt;html:rewrite page=&#39;/favicon.ico&#39; /&gt;&quot; /&gt;\t \t \r\n      \r\n    &lt;/head&gt;\r\n    &lt;body &lt;%= (anchor == null ? &quot;&quot; : &quot;onLoad=\\&#39;location.href=location.href + \\&quot;&quot; + anchor + &quot;\\&quot;;\\&#39;&quot; )  %&gt; &gt;\r\n    \r\n    \t&lt;tiles:insert attribute=&quot;header&quot; flush=&quot;true&quot; /&gt;\r\n    \t&lt;%@include file=&quot;errors.jsp&quot; %&gt;\r\n    \t&lt;div id=&quot;problemo_div&quot;&gt;\r\n    \t\t&lt;div id=&quot;footer_div&quot;&gt;\r\n    \t\t\t&lt;tiles:insert attribute=&quot;footer&quot; flush=&quot;true&quot; /&gt;\t\r\n    \t\t&lt;/div&gt;\r\n    \t\t&lt;div id=&quot;body_div&quot;&gt;\r\n    \t\t\t&lt;tiles:insert attribute=&quot;body&quot; flush=&quot;true&quot; /&gt;\r\n    \t\t&lt;/div&gt;\r\n    \t&lt;/div&gt;\r\n    &lt;/body&gt;\r\n    &lt;/html:html&gt;\r\n\r\n\r\n`$` web.xml `$`\r\n\r\n&lt;!-- Struts Tag Library Descriptors --&gt;\r\n\r\n        &lt;taglib&gt;\r\n        &lt;taglib-uri&gt;/html&lt;/taglib-uri&gt;\r\n        &lt;taglib-location&gt;/WEB-INF/struts-html.tld&lt;/taglib-location&gt;\r\n    &lt;/taglib&gt;\r\n    &lt;taglib&gt;\r\n        &lt;taglib-uri&gt;/nested&lt;/taglib-uri&gt;\r\n        &lt;taglib-location&gt;/WEB-INF/struts-nested.tld&lt;/taglib-location&gt;\r\n    &lt;/taglib&gt;\r\n    &lt;taglib&gt;\r\n        &lt;taglib-uri&gt;/bean&lt;/taglib-uri&gt;\r\n        &lt;taglib-location&gt;/WEB-INF/struts-bean.tld&lt;/taglib-location&gt;\r\n    &lt;/taglib&gt;\r\n    &lt;taglib&gt;\r\n        &lt;taglib-uri&gt;/logic&lt;/taglib-uri&gt;\r\n        &lt;taglib-location&gt;/WEB-INF/struts-logic.tld&lt;/taglib-location&gt;\r\n    &lt;/taglib&gt;\r\n    &lt;taglib&gt;\r\n        &lt;taglib-uri&gt;/template&lt;/taglib-uri&gt;\r\n        &lt;taglib-location&gt;/WEB-INF/struts-template.tld&lt;/taglib-location&gt;\r\n    &lt;/taglib&gt;\r\n\r\n\r\n`$` Similar Stackoverflow error in other screen as well `$`\r\n\r\n        Servlet.service() for servlet jsp threw exception: javax.servlet.ServletException: JBWEB004036: File &amp;quot;/auth/error/footer_content.jsp&amp;quot; not found\r\n    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:289) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:242) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.2.Final.jar:1.0.2.Final]\r\n    at org.apache.catalina.core.AppFlterChain.internalDoFilter(AppFlterChain.java:295) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    at org.apache.catalina.core.AppFlterChain.doFilter(AppFlterChain.java:214) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:832) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:718) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:655) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    at org.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:940) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    at org.apache.jsp.auth.error.error_jsp._jspService(error_jsp.java:415)\r\n    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:69) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.2.Final.jar:1.0.2.Final]\r\n    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:365) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:309) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:242) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.2.Final.jar:1.0.2.Final]\r\n    at org.apache.catalina.core.AppFlterChain.internalDoFilter(AppFlterChain.java:295) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    at org.apache.catalina.core.AppFlterChain.doFilter(AppFlterChain.java:214) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:832) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:622) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:553) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:482) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:523) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:370) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:159) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:97) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:102) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:336) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:856) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:653) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:920) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\r\n    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_27]\r\n\r\n\r\n`$` error_jsp.java `$`\r\n\r\n        if (_jspx_meth_bean_005fmessage_005f3(_jspx_page_context))\r\n        return;\r\n      out.write(&quot;\\&quot; onClick=\\&quot;history.go(-1);return true;\\&quot;&gt; &lt;/FORM&gt;\\r\\n&quot;);\r\n      out.write(&quot;  \\t\\t&lt;/td&gt;\\r\\n&quot;);\r\n      out.write(&quot;  \\t&lt;/tr&gt;  \\t\\r\\n&quot;);\r\n      out.write(&quot;&lt;/table&gt;\\r\\n&quot;);\r\n      org.apache.jasper.runtime.JspRuntimeLibrary.include(request, response, &quot;footer_content.jsp&quot;, out, false);\r\n      out.write(&quot;\\r\\n&quot;);\r\n      out.write(&quot;\\r\\n&quot;);\r\n      out.write(&quot;&lt;/body&gt;\\r\\n&quot;);\r\n      out.write(&quot;&lt;/html&gt;&quot;);\r\n    } catch (Throwable t) {\r\n\r\n","title":"JBWEB000236: Servlet.service() for servlet strutsAction threw exception: java.lang.StackOverflowError","body":"<p>I'm migrating my application from Jboss 4 to Jboss 7(jboss eap 6.1 alpha) getting the below error, while trying to search results in my project.\nI'm using Java 6, Struts 1.2, EJB 2.0, Jboss 6 EAP alpha.\nNote: The same code works fine when running in Jboss 4.0</p>\n\n<p>Server Logs:</p>\n\n<pre><code>ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/myproject].[strutsAction]] (http-localhost/127.0.0.1:8080-2) JBWEB000236: Servlet.service() for servlet strutsAction threw exception: java.lang.StackOverflowError\n    at java.util.IdentityHashMap.maskNull(IdentityHashMap.java:175) [rt.jar:1.6.0_27]\n    at java.util.IdentityHashMap.get(IdentityHashMap.java:314) [rt.jar:1.6.0_27]\n    at org.jboss.marshalling.cloner.SerializingCloner.clone(SerializingCloner.java:150) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n    at org.jboss.marshalling.cloner.SerializingCloner.clone(SerializingCloner.java:134) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n    at org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:274) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n    at org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n    at org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n    at org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n    at org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n    at org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n    at org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n    at org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n    at org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n    at org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n    at org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n    at org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n    at org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n    at org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n    at org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n    at org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n    at org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n    at org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n    at org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n    at org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n    at org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n    at org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n    at org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n    at org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n    at org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n    at org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n    at org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n    at org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n    at org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n    at org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n    at org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n    at org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n    at org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n    at org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n    at org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n    at org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n    at org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n    at org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n    at org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n    at org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n    at org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n    at org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n    at org.jboss.marshalling.cloner.SerializingCloner.initSerializableClone(SerializingCloner.java:276) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n\n\nERROR [org.apache.struts.taglib.tiles.InsertTag] (http-localhost/127.0.0.1:8080-2) ServletException in '/auth/searchresults.do': null: javax.servlet.ServletException: JBWEB000248: Servlet execution threw an exception\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:312) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:214) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:832) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:718) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:655) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at org.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:940) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at org.apache.jasper.runtime.PageContextImpl.include(PageContextImpl.java:607) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at org.apache.struts.tiles.TilesUtilImpl.doInclude(TilesUtilImpl.java:99) [struts.jar:1.2.9]\n    at org.apache.struts.tiles.TilesUtil.doInclude(TilesUtil.java:135) [struts.jar:1.2.9]\n    at org.apache.struts.taglib.tiles.InsertTag.doInclude(InsertTag.java:760) [struts.jar:1.2.9]\n    at org.apache.struts.taglib.tiles.InsertTag$InsertHandler.doEndTag(InsertTag.java:892) [struts.jar:1.2.9]\n    at org.apache.struts.taglib.tiles.InsertTag.doEndTag(InsertTag.java:462) [struts.jar:1.2.9]\n    at org.apache.jsp.layout_jsp._jspx_meth_tiles_005finsert_005f2(layout_jsp.java:810)\n    at org.apache.jsp.layout_jsp._jspService(layout_jsp.java:512)\n    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:69) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.2.Final.jar:1.0.2.Final]\n    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:365) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:309) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:242) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.2.Final.jar:1.0.2.Final]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:295) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:214) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:832) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:620) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:553) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:482) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at org.apache.struts.action.RequestProcessor.doForward(RequestProcessor.java:1085) [struts.jar:1.2.9]\n    at org.apache.struts.tiles.TilesRequestProcessor.doForward(TilesRequestProcessor.java:263) [struts.jar:1.2.9]\n    at org.apache.struts.tiles.TilesRequestProcessor.processTilesDefinition(TilesRequestProcessor.java:239) [struts.jar:1.2.9]\n    at org.apache.struts.tiles.TilesRequestProcessor.processForwardConfig(TilesRequestProcessor.java:302) [struts.jar:1.2.9]\n    at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:241) [struts.jar:1.2.9]\n    at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1196) [struts.jar:1.2.9]\n    at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:414) [struts.jar:1.2.9]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:734) [jboss-servlet-api_3.0_spec-1.0.2.Final.jar:1.0.2.Final]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.2.Final.jar:1.0.2.Final]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:295) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:214) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:832) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:620) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:553) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:482) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at org.apache.struts.action.RequestProcessor.doForward(RequestProcessor.java:1085) [struts.jar:1.2.9]\n    at org.apache.struts.tiles.TilesRequestProcessor.doForward(TilesRequestProcessor.java:263) [struts.jar:1.2.9]\n    at org.apache.struts.action.RequestProcessor.processForwardConfig(RequestProcessor.java:398) [struts.jar:1.2.9]\n    at org.apache.struts.tiles.TilesRequestProcessor.processForwardConfig(TilesRequestProcessor.java:318) [struts.jar:1.2.9]\n    at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:241) [struts.jar:1.2.9]\n    at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1196) [struts.jar:1.2.9]\n    at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:414) [struts.jar:1.2.9]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:734) [jboss-servlet-api_3.0_spec-1.0.2.Final.jar:1.0.2.Final]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.2.Final.jar:1.0.2.Final]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:295) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:214) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at com.abc.book.web.security.AuthFilter.doFilter(AuthFilter.java:72) [classes:]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:246) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:214) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at com.planetj.servlet.filter.compression.CompressingFilter.doFilter(CompressingFilter.java:270) [pjl-comp-filter-1.7.jar:]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:246) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:214) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:149) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:169) [jboss-as-web-7.2.0.Alpha1-redhat-4.jar:7.2.0.Alpha1-redhat-4]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:145) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:97) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:102) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:336) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:856) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:653) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:920) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_27]\nCaused by: java.lang.StackOverflowError\n    at java.util.IdentityHashMap.maskNull(IdentityHashMap.java:175) [rt.jar:1.6.0_27]\n    at java.util.IdentityHashMap.get(IdentityHashMap.java:314) [rt.jar:1.6.0_27]\n    at org.jboss.marshalling.cloner.SerializingCloner.clone(SerializingCloner.java:150) [jboss-cli-client.jar:7.2.0.Alpha1-redhat-4]\n\n\n\nERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host]] (http-localhost/127.0.0.1:8080-2) JBWEB000313: Exception processing error page /auth/error/error.jsp: java.lang.IllegalStateException: JBWEB000029: Cannot reset buffer after response has been committed\n    at org.apache.catalina.connector.Response.resetBuffer(Response.java:682) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at org.apache.catalina.connector.Response.resetBuffer(Response.java:702) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:515) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:370) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:159) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:97) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:102) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:336) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:856) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:653) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:920) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\n    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_27]\n</code></pre>\n\n<p><code>$</code> Layout.jsp <code>$</code></p>\n\n<pre><code>    &lt;%@ taglib uri=\"/bean\" prefix=\"bean\" %&gt;\n&lt;%@ taglib uri=\"/logic\" prefix=\"logic\" %&gt;\n&lt;%@ taglib uri=\"/html\" prefix=\"html\" %&gt;\n&lt;%@ taglib uri=\"/WEB-INF/struts-tiles.tld\" prefix=\"tiles\" %&gt;\n\n&lt;html:html lang=\"false\" xhtml=\"true\"&gt;\n&lt;head&gt;\n  &lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" /&gt;\n  &lt;meta http-equiv=\"Content-Script-Type\" content=\"text/javascript\" /&gt;\n    &lt;base href=\"&lt;%= this.getServletContext().getAttribute(\"baseUrl\")%&gt;\"&gt;&lt;/base&gt;\n    &lt;tiles:useAttribute name=\"pagetitle\" scope=\"request\" /&gt;\n    &lt;bean:define id=\"pagetitle\" scope=\"request\" toScope=\"request\" type=\"java.lang.String\"&gt;&lt;%=pagetitle.toString()%&gt;&lt;/bean:define&gt;\n    &lt;title&gt;&lt;bean:message key=\"index.page.title\" /&gt;&lt;/title&gt;\n\n\n    &lt;link rel=\"stylesheet\" type=\"text/css\" media=\"screen\" href=\"&lt;html:rewrite page='/style_screen_new.css' /&gt;\" /&gt;\n    &lt;link rel=\"stylesheet\" type=\"text/css\" media=\"screen\" href=\"&lt;html:rewrite page='/style_header_footer.css' /&gt;\" /&gt;\n    &lt;link rel=\"stylesheet\" type=\"text/css\" media=\"screen\" href=\"&lt;html:rewrite page='/style_screen_specific.css' /&gt;\" /&gt;\n    &lt;link rel=\"stylesheet\" type=\"text/css\" media=\"print\" href=\"&lt;html:rewrite page='/style_print.css' /&gt;\" /&gt; \n    &lt;link rel=\"stylesheet\" type=\"text/css\" media=\"screen\" href=\"&lt;html:rewrite page='/style_screen_orders.css' /&gt;\" /&gt;\n\n    &lt;script src=\"javascript/validation.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n    &lt;script src=\"javascript/utils.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n\n    &lt;tiles:useAttribute name=\"javascriptFormname\"/&gt;\n    &lt;logic:notEmpty name=\"javascriptFormname\"&gt;\n        &lt;html:javascript cdata=\"true\" formName=\"&lt;%=javascriptFormname.toString()%&gt;\" staticJavascript=\"false\" scriptLanguage=\"false\"/&gt;\n    &lt;/logic:notEmpty&gt;\n  &lt;tiles:useAttribute name=\"quickFindFormName\"/&gt;\n  &lt;logic:notEmpty name=\"quickFindFormName\"&gt;\n   &lt;html:javascript cdata=\"true\" formName=\"&lt;%=quickFindFormName.toString()%&gt;\" staticJavascript=\"false\" scriptLanguage=\"false\"/&gt;\n  &lt;/logic:notEmpty&gt;\n\n&lt;%\n    String anchor = (String)request.getAttribute(\"anchor\");\n %&gt;  \n\n    &lt;link rel=\"icon\" href=\"&lt;html:rewrite page='/favicon.ico' /&gt;\" type=\"image/ico\" /&gt;\n    &lt;link rel=\"shortcut icon\" href=\"&lt;html:rewrite page='/favicon.ico' /&gt;\" /&gt;         \n\n&lt;/head&gt;\n&lt;body &lt;%= (anchor == null ? \"\" : \"onLoad=\\'location.href=location.href + \\\"\" + anchor + \"\\\";\\'\" )  %&gt; &gt;\n\n    &lt;tiles:insert attribute=\"header\" flush=\"true\" /&gt;\n    &lt;%@include file=\"errors.jsp\" %&gt;\n    &lt;div id=\"problemo_div\"&gt;\n        &lt;div id=\"footer_div\"&gt;\n            &lt;tiles:insert attribute=\"footer\" flush=\"true\" /&gt;    \n        &lt;/div&gt;\n        &lt;div id=\"body_div\"&gt;\n            &lt;tiles:insert attribute=\"body\" flush=\"true\" /&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/body&gt;\n&lt;/html:html&gt;\n</code></pre>\n\n<p><code>$</code> web.xml <code>$</code></p>\n\n\n\n<pre><code>    &lt;taglib&gt;\n    &lt;taglib-uri&gt;/html&lt;/taglib-uri&gt;\n    &lt;taglib-location&gt;/WEB-INF/struts-html.tld&lt;/taglib-location&gt;\n&lt;/taglib&gt;\n&lt;taglib&gt;\n    &lt;taglib-uri&gt;/nested&lt;/taglib-uri&gt;\n    &lt;taglib-location&gt;/WEB-INF/struts-nested.tld&lt;/taglib-location&gt;\n&lt;/taglib&gt;\n&lt;taglib&gt;\n    &lt;taglib-uri&gt;/bean&lt;/taglib-uri&gt;\n    &lt;taglib-location&gt;/WEB-INF/struts-bean.tld&lt;/taglib-location&gt;\n&lt;/taglib&gt;\n&lt;taglib&gt;\n    &lt;taglib-uri&gt;/logic&lt;/taglib-uri&gt;\n    &lt;taglib-location&gt;/WEB-INF/struts-logic.tld&lt;/taglib-location&gt;\n&lt;/taglib&gt;\n&lt;taglib&gt;\n    &lt;taglib-uri&gt;/template&lt;/taglib-uri&gt;\n    &lt;taglib-location&gt;/WEB-INF/struts-template.tld&lt;/taglib-location&gt;\n&lt;/taglib&gt;\n</code></pre>\n\n<p><code>$</code> Similar Stackoverflow error in other screen as well <code>$</code></p>\n\n<pre><code>    Servlet.service() for servlet jsp threw exception: javax.servlet.ServletException: JBWEB004036: File &amp;quot;/auth/error/footer_content.jsp&amp;quot; not found\nat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:289) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\nat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:242) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.2.Final.jar:1.0.2.Final]\nat org.apache.catalina.core.AppFlterChain.internalDoFilter(AppFlterChain.java:295) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\nat org.apache.catalina.core.AppFlterChain.doFilter(AppFlterChain.java:214) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\nat org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:832) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\nat org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:718) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\nat org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:655) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\nat org.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:940) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\nat org.apache.jsp.auth.error.error_jsp._jspService(error_jsp.java:415)\nat org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:69) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.2.Final.jar:1.0.2.Final]\nat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:365) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\nat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:309) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\nat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:242) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.2.Final.jar:1.0.2.Final]\nat org.apache.catalina.core.AppFlterChain.internalDoFilter(AppFlterChain.java:295) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\nat org.apache.catalina.core.AppFlterChain.doFilter(AppFlterChain.java:214) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\nat org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:832) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\nat org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:622) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\nat org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:553) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\nat org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:482) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\nat org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:523) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\nat org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:370) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:159) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:97) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\nat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:102) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\nat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:336) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\nat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:856) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\nat org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:653) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\nat org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:920) [jbossweb-7.2.0.Final.jar:7.2.0.Final]\nat java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_27]\n</code></pre>\n\n<p><code>$</code> error_jsp.java <code>$</code></p>\n\n<pre><code>    if (_jspx_meth_bean_005fmessage_005f3(_jspx_page_context))\n    return;\n  out.write(\"\\\" onClick=\\\"history.go(-1);return true;\\\"&gt; &lt;/FORM&gt;\\r\\n\");\n  out.write(\"  \\t\\t&lt;/td&gt;\\r\\n\");\n  out.write(\"  \\t&lt;/tr&gt;  \\t\\r\\n\");\n  out.write(\"&lt;/table&gt;\\r\\n\");\n  org.apache.jasper.runtime.JspRuntimeLibrary.include(request, response, \"footer_content.jsp\", out, false);\n  out.write(\"\\r\\n\");\n  out.write(\"\\r\\n\");\n  out.write(\"&lt;/body&gt;\\r\\n\");\n  out.write(\"&lt;/html&gt;\");\n} catch (Throwable t) {\n</code></pre>\n"},{"tags":["java","keytool"],"comments":[{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1694048131,"post_id":77055486,"comment_id":135841316,"body_markdown":"You specified `-cacerts` on the `-import`; to list the same file use it on the `-list` also. Note this will list _everything_ in the file: both the cert(s) you just imported, and about a hundred that were already there. To list only a single new one, do `keytool -list -cacerts -alias {name}`. But this is not a programming or development issue.","body":"You specified <code>-cacerts</code> on the <code>-import</code>; to list the same file use it on the <code>-list</code> also. Note this will list <i>everything</i> in the file: both the cert(s) you just imported, and about a hundred that were already there. To list only a single new one, do <code>keytool -list -cacerts -alias {name}</code>. But this is not a programming or development issue."}],"answers":[{"comments":[{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1694048138,"post_id":77055629,"comment_id":135841318,"body_markdown":"`keytool -import -file c:/ca-certs/name.crt` specified the _input_ file which was read to get the cert that was then imported; it was neither created nor updated, and it was not a keystore and still is not a keystore so you can&#39;t `-list` it.","body":"<code>keytool -import -file c:&#47;ca-certs&#47;name.crt</code> specified the <i>input</i> file which was read to get the cert that was then imported; it was neither created nor updated, and it was not a keystore and still is not a keystore so you can&#39;t <code>-list</code> it."}],"tags":[],"owner":{"account_id":1888343,"reputation":176617,"user_id":1707091,"display_name":"rgettman"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694039940,"creation_date":1694039940,"answer_id":77055629,"question_id":77055486,"body_markdown":"The &quot;keytool&quot; program [defaults to a keystore called &quot;.keystore&quot; in your home directory][2], not the keystore you just created.\r\n\r\n&gt; By default the keytool will generate a keystore in the user’s home directory (Linux/macOS: `$HOME/.keystore`, Windows: `$env:USERPROFILE/.keystore`). Use the `-keystore` parameter to specify a custom path.\r\n\r\nAdd the &quot;-keystore&quot; option to specify the location of the keystore file you created.\r\n\r\n```\r\nC:\\windows\\system32&gt; keytool -list -keystore &quot;C:/ca-certs/&lt;cert name&gt;.crt&quot;\r\nEnter keystore password: &lt;YourPasswordHere&gt;\r\n```\r\n\r\nThat will list everything, but you can filter it by your alias if needed:\r\n\r\n```\r\nC:\\windows\\system32&gt; keytool -list -keystore &quot;C:/ca-certs/&lt;cert name&gt;.crt&quot; -alias &quot;&lt;cert name&gt;&quot;\r\nEnter keystore password: &lt;YourPasswordHere&gt;\r\n```\r\n\r\nMore examples of keytool commands are at [The Most Common Java Keytool Keystore Commands][1].\r\n\r\n[1]: https://www.sslshopper.com/article-most-common-java-keytool-keystore-commands.html\r\n[2]: https://megamorf.gitlab.io/cheat-sheets/java-keystores/\r\n","title":"certs are imported. But can not list them","body":"<p>The &quot;keytool&quot; program <a href=\"https://megamorf.gitlab.io/cheat-sheets/java-keystores/\" rel=\"nofollow noreferrer\">defaults to a keystore called &quot;.keystore&quot; in your home directory</a>, not the keystore you just created.</p>\n<blockquote>\n<p>By default the keytool will generate a keystore in the user’s home directory (Linux/macOS: <code>$HOME/.keystore</code>, Windows: <code>$env:USERPROFILE/.keystore</code>). Use the <code>-keystore</code> parameter to specify a custom path.</p>\n</blockquote>\n<p>Add the &quot;-keystore&quot; option to specify the location of the keystore file you created.</p>\n<pre><code>C:\\windows\\system32&gt; keytool -list -keystore &quot;C:/ca-certs/&lt;cert name&gt;.crt&quot;\nEnter keystore password: &lt;YourPasswordHere&gt;\n</code></pre>\n<p>That will list everything, but you can filter it by your alias if needed:</p>\n<pre><code>C:\\windows\\system32&gt; keytool -list -keystore &quot;C:/ca-certs/&lt;cert name&gt;.crt&quot; -alias &quot;&lt;cert name&gt;&quot;\nEnter keystore password: &lt;YourPasswordHere&gt;\n</code></pre>\n<p>More examples of keytool commands are at <a href=\"https://www.sslshopper.com/article-most-common-java-keytool-keystore-commands.html\" rel=\"nofollow noreferrer\">The Most Common Java Keytool Keystore Commands</a>.</p>\n"}],"owner":{"account_id":6988575,"reputation":47,"user_id":5358613,"display_name":"Mayil"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77055629,"answer_count":1,"score":0,"last_activity_date":1694039940,"creation_date":1694037350,"question_id":77055486,"body_markdown":"In my new windows 10 laptop I successfully imported some certs:\r\n     \r\n\r\n     C:\\windows\\system32&gt;keytool -import -trustcacerts -storepass changeit -noprompt -alias &lt;cert name&gt; -file C:/ca-certs/&lt;cert name&gt;.crt -cacerts -v\r\n    Certificate was added to keystore\r\n    [Storing C:\\Program Files\\Zulu\\zulu-17\\lib\\security\\cacerts]\r\n\r\n  Then I tried to list them. But I am getting this exception:\r\n\r\n        C:\\windows\\system32&gt;keytool -list\r\n    keytool error: java.lang.Exception: Keystore file does not exist: C:\\Users\\tester\\.keystore\r\n\r\n-import command imported the certs to the cacerts file. But the -list command tries to find it from .keystore file.\r\n Did I miss any configuration.\r\n I remember I did the same thing in my older laptop but I did not have issues. ","title":"certs are imported. But can not list them","body":"<p>In my new windows 10 laptop I successfully imported some certs:</p>\n<pre><code> C:\\windows\\system32&gt;keytool -import -trustcacerts -storepass changeit -noprompt -alias &lt;cert name&gt; -file C:/ca-certs/&lt;cert name&gt;.crt -cacerts -v\nCertificate was added to keystore\n[Storing C:\\Program Files\\Zulu\\zulu-17\\lib\\security\\cacerts]\n</code></pre>\n<p>Then I tried to list them. But I am getting this exception:</p>\n<pre><code>    C:\\windows\\system32&gt;keytool -list\nkeytool error: java.lang.Exception: Keystore file does not exist: C:\\Users\\tester\\.keystore\n</code></pre>\n<p>-import command imported the certs to the cacerts file. But the -list command tries to find it from .keystore file.\nDid I miss any configuration.\nI remember I did the same thing in my older laptop but I did not have issues.</p>\n"},{"tags":["java","node.js","maven","npm","jar"],"owner":{"account_id":25279,"reputation":35965,"user_id":64895,"accept_rate":60,"display_name":"Jack BeNimble"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694039786,"creation_date":1694039786,"question_id":77055615,"body_markdown":"I have a maven build the configures a React front end into the java jar file. It worked fine on the mac, but now that I&#39;ve transferred it to windows, I&#39;ve run into an issue. \r\n\r\nSpecifically, the maven build is looking for a file in &quot;app/node/node_modules&quot; when the file is actually in &quot;app/node_modules&quot;. Here the error message: \r\n\r\n     --- frontend:1.13.4:npm (npm run build) @ licensing-app ---\r\n    [INFO] Running &#39;npm run build&#39; in C:\\dev\\analytics-licensing-app\\server\\app\r\n    [INFO] internal/modules/cjs/loader.js:582\r\n    [INFO]     throw err;\r\n    [INFO]     ^\r\n    [INFO]\r\n    [INFO] Error: Cannot find module &#39;C:\\dev\\analytics-licensing-app\\server\\app\\node\\node_modules\\npm\\bin\\npm-cli.js&#39;\r\n\r\nThis is the relevant part of pom.xml:\r\n\r\n            &lt;plugin&gt;\r\n                    &lt;groupId&gt;com.github.eirslett&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;frontend-maven-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;${frontend-maven-plugin.version}&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;workingDirectory&gt;app&lt;/workingDirectory&gt;\r\n                    &lt;/configuration&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;npm run test&lt;/id&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;npm&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                            &lt;phase&gt;test&lt;/phase&gt;\r\n                            &lt;configuration&gt;\r\n                                &lt;arguments&gt;test&lt;/arguments&gt;\r\n                                &lt;environmentVariables&gt;\r\n                                    &lt;CI&gt;true&lt;/CI&gt;\r\n                                &lt;/environmentVariables&gt;\r\n                            &lt;/configuration&gt;\r\n                        &lt;/execution&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;npm run build&lt;/id&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;npm&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                            &lt;phase&gt;compile&lt;/phase&gt;\r\n                            &lt;configuration&gt;\r\n                                &lt;arguments&gt;run build&lt;/arguments&gt;\r\n                            &lt;/configuration&gt;\r\n                        &lt;/execution&gt;\r\n\r\n\r\nHere is the directory structure the front end:\r\n \r\n    &lt;base-dir&gt;/server/app\r\n\r\npom.xml is located in \r\n\r\n    &lt;base-dir&gt;/server\r\n\r\n\r\nThis is what&#39;s in the &quot;app&quot; directory:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n  [1]: https://i.stack.imgur.com/h4yTX.png\r\n\r\nAs you can see, for some reason there is a &quot;node&quot; directory in there, and I&#39;m not sure how it go there and if it&#39;s supposed to be there. \r\n\r\nI&#39;m also not sure if the build should be there. One of the front end guys was helping me install node on windows, and I think it might have been created by running the &quot;npm run install&quot; manually. \r\n\r\nNote that for this, I converted from &quot;yarn&quot; to &quot;npm&quot;, because that&#39;s they way they do it here. \r\n\r\nAlso, the contents of config.json:\r\n```\r\n{\r\n  &quot;name&quot;: &quot;app&quot;,\r\n  &quot;version&quot;: &quot;0.1.0&quot;,\r\n  &quot;private&quot;: true,\r\n  &quot;dependencies&quot;: {\r\n    &quot;@types/downloadjs&quot;: &quot;^1.4.1&quot;,\r\n    &quot;bootstrap&quot;: &quot;^4.6.2&quot;,\r\n    &quot;react&quot;: &quot;^16.8.0&quot;,\r\n    &quot;react-cookie&quot;: &quot;3.0.4&quot;,\r\n    &quot;react-dom&quot;: &quot;^16.8.0&quot;,\r\n    &quot;react-router-dom&quot;: &quot;4.3.1&quot;,\r\n    &quot;react-scripts&quot;: &quot;^5.0.1&quot;,\r\n    &quot;reactstrap&quot;: &quot;6.5.0&quot;,\r\n    &quot;semantic-ui-react&quot;: &quot;^0.88.2&quot;\r\n  },\r\n  &quot;scripts&quot;: {\r\n    &quot;start&quot;: &quot;react-scripts start&quot;,\r\n    &quot;build&quot;: &quot;react-scripts build&quot;,\r\n    &quot;test&quot;: &quot;react-scripts test&quot;,\r\n    &quot;eject&quot;: &quot;react-scripts eject&quot;\r\n  },\r\n  &quot;proxy&quot;: &quot;http://localhost:8080&quot;,\r\n  &quot;eslintConfig&quot;: {\r\n    &quot;extends&quot;: &quot;react-app&quot;\r\n  },\r\n  &quot;browserslist&quot;: [\r\n    &quot;&gt;0.2%&quot;,\r\n    &quot;not dead&quot;,\r\n    &quot;not ie &lt;= 11&quot;,\r\n    &quot;not op_mini all&quot;\r\n  ]\r\n```\r\nWhat could be maven to look inside the &quot;node&quot; directory for &quot;node_modules&quot;? \r\n\r\n\r\n","title":"Packaging node.js into a jar with maven, issue with location of node_modules","body":"<p>I have a maven build the configures a React front end into the java jar file. It worked fine on the mac, but now that I've transferred it to windows, I've run into an issue.</p>\n<p>Specifically, the maven build is looking for a file in &quot;app/node/node_modules&quot; when the file is actually in &quot;app/node_modules&quot;. Here the error message:</p>\n<pre><code> --- frontend:1.13.4:npm (npm run build) @ licensing-app ---\n[INFO] Running 'npm run build' in C:\\dev\\analytics-licensing-app\\server\\app\n[INFO] internal/modules/cjs/loader.js:582\n[INFO]     throw err;\n[INFO]     ^\n[INFO]\n[INFO] Error: Cannot find module 'C:\\dev\\analytics-licensing-app\\server\\app\\node\\node_modules\\npm\\bin\\npm-cli.js'\n</code></pre>\n<p>This is the relevant part of pom.xml:</p>\n<pre><code>        &lt;plugin&gt;\n                &lt;groupId&gt;com.github.eirslett&lt;/groupId&gt;\n                &lt;artifactId&gt;frontend-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${frontend-maven-plugin.version}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;workingDirectory&gt;app&lt;/workingDirectory&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;npm run test&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;npm&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;phase&gt;test&lt;/phase&gt;\n                        &lt;configuration&gt;\n                            &lt;arguments&gt;test&lt;/arguments&gt;\n                            &lt;environmentVariables&gt;\n                                &lt;CI&gt;true&lt;/CI&gt;\n                            &lt;/environmentVariables&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;npm run build&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;npm&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;phase&gt;compile&lt;/phase&gt;\n                        &lt;configuration&gt;\n                            &lt;arguments&gt;run build&lt;/arguments&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n</code></pre>\n<p>Here is the directory structure the front end:</p>\n<pre><code>&lt;base-dir&gt;/server/app\n</code></pre>\n<p>pom.xml is located in</p>\n<pre><code>&lt;base-dir&gt;/server\n</code></pre>\n<p>This is what's in the &quot;app&quot; directory:</p>\n<p><a href=\"https://i.stack.imgur.com/h4yTX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/h4yTX.png\" alt=\"enter image description here\" /></a></p>\n<p>As you can see, for some reason there is a &quot;node&quot; directory in there, and I'm not sure how it go there and if it's supposed to be there.</p>\n<p>I'm also not sure if the build should be there. One of the front end guys was helping me install node on windows, and I think it might have been created by running the &quot;npm run install&quot; manually.</p>\n<p>Note that for this, I converted from &quot;yarn&quot; to &quot;npm&quot;, because that's they way they do it here.</p>\n<p>Also, the contents of config.json:</p>\n<pre><code>{\n  &quot;name&quot;: &quot;app&quot;,\n  &quot;version&quot;: &quot;0.1.0&quot;,\n  &quot;private&quot;: true,\n  &quot;dependencies&quot;: {\n    &quot;@types/downloadjs&quot;: &quot;^1.4.1&quot;,\n    &quot;bootstrap&quot;: &quot;^4.6.2&quot;,\n    &quot;react&quot;: &quot;^16.8.0&quot;,\n    &quot;react-cookie&quot;: &quot;3.0.4&quot;,\n    &quot;react-dom&quot;: &quot;^16.8.0&quot;,\n    &quot;react-router-dom&quot;: &quot;4.3.1&quot;,\n    &quot;react-scripts&quot;: &quot;^5.0.1&quot;,\n    &quot;reactstrap&quot;: &quot;6.5.0&quot;,\n    &quot;semantic-ui-react&quot;: &quot;^0.88.2&quot;\n  },\n  &quot;scripts&quot;: {\n    &quot;start&quot;: &quot;react-scripts start&quot;,\n    &quot;build&quot;: &quot;react-scripts build&quot;,\n    &quot;test&quot;: &quot;react-scripts test&quot;,\n    &quot;eject&quot;: &quot;react-scripts eject&quot;\n  },\n  &quot;proxy&quot;: &quot;http://localhost:8080&quot;,\n  &quot;eslintConfig&quot;: {\n    &quot;extends&quot;: &quot;react-app&quot;\n  },\n  &quot;browserslist&quot;: [\n    &quot;&gt;0.2%&quot;,\n    &quot;not dead&quot;,\n    &quot;not ie &lt;= 11&quot;,\n    &quot;not op_mini all&quot;\n  ]\n</code></pre>\n<p>What could be maven to look inside the &quot;node&quot; directory for &quot;node_modules&quot;?</p>\n"},{"tags":["java","jetty"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1693395702,"post_id":77007560,"comment_id":135754506,"body_markdown":"*Any ideas if and when these dependencies will be available in Maven Central in future?* I would ask that question the maintainers of jetty. They should be able to answer this","body":"<i>Any ideas if and when these dependencies will be available in Maven Central in future?</i> I would ask that question the maintainers of jetty. They should be able to answer this"},{"owner":{"account_id":4133056,"reputation":532,"user_id":5967354,"display_name":"user27772"},"score":0,"creation_date":1693397388,"post_id":77007560,"comment_id":135754855,"body_markdown":"Ok, I found that, starting from 12.x, jetty dependencies will be released under different names (see https://eclipse.dev/jetty/documentation/jetty-12/programming-guide/index.html &gt; &quot;Migrating from Jetty 11.0.x to Jetty 12.0.x&quot;). Example for EE10 (corresponding to Servlet 6.0, see to https://jakarta.ee/specifications/servlet/): https://mvnrepository.com/artifact/org.eclipse.jetty.ee10/jetty-ee10-servlet.","body":"Ok, I found that, starting from 12.x, jetty dependencies will be released under different names (see <a href=\"https://eclipse.dev/jetty/documentation/jetty-12/programming-guide/index.html\" rel=\"nofollow noreferrer\">eclipse.dev/jetty/documentation/jetty-12/programming-guide/&hellip;</a> &gt; &quot;Migrating from Jetty 11.0.x to Jetty 12.0.x&quot;). Example for EE10 (corresponding to Servlet 6.0, see to <a href=\"https://jakarta.ee/specifications/servlet/\" rel=\"nofollow noreferrer\">jakarta.ee/specifications/servlet</a>): <a href=\"https://mvnrepository.com/artifact/org.eclipse.jetty.ee10/jetty-ee10-servlet\" rel=\"nofollow noreferrer\">mvnrepository.com/artifact/org.eclipse.jetty.ee10/&hellip;</a>."},{"owner":{"account_id":406289,"reputation":47511,"user_id":775715,"accept_rate":100,"display_name":"Joakim Erdfelt"},"score":0,"creation_date":1693420824,"post_id":77007560,"comment_id":135760216,"body_markdown":"The artifacts are there now, under different coordinates due to the introduction of the Environment concept in Jetty 12 (see answer below about why, and how to find the right coordinates)","body":"The artifacts are there now, under different coordinates due to the introduction of the Environment concept in Jetty 12 (see answer below about why, and how to find the right coordinates)"},{"owner":{"account_id":4133056,"reputation":532,"user_id":5967354,"display_name":"user27772"},"score":0,"creation_date":1693472573,"post_id":77007560,"comment_id":135766572,"body_markdown":"@JoakimErdfelt: Thank you for the clarification. One more question - can you possibly estimate if and when jersey-container-jetty-servlet will support jetty 12? As far as I see the current release 3.1.3 of that library just supports jetty 11","body":"@JoakimErdfelt: Thank you for the clarification. One more question - can you possibly estimate if and when jersey-container-jetty-servlet will support jetty 12? As far as I see the current release 3.1.3 of that library just supports jetty 11"},{"owner":{"account_id":406289,"reputation":47511,"user_id":775715,"accept_rate":100,"display_name":"Joakim Erdfelt"},"score":0,"creation_date":1693494726,"post_id":77007560,"comment_id":135771459,"body_markdown":"Have to ask the Jersey folks that.","body":"Have to ask the Jersey folks that."},{"owner":{"account_id":4133056,"reputation":532,"user_id":5967354,"display_name":"user27772"},"score":0,"creation_date":1694068661,"post_id":77007560,"comment_id":135843019,"body_markdown":"See https://github.com/eclipse-ee4j/jersey/issues/5401","body":"See <a href=\"https://github.com/eclipse-ee4j/jersey/issues/5401\" rel=\"nofollow noreferrer\">github.com/eclipse-ee4j/jersey/issues/5401</a>"}],"answers":[{"tags":[],"owner":{"account_id":406289,"reputation":47511,"user_id":775715,"accept_rate":100,"display_name":"Joakim Erdfelt"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1693420619,"creation_date":1693420619,"answer_id":77010707,"question_id":77007560,"body_markdown":"The artifacts that are EE specific are now isolated in their own EE specific layer.\r\n\r\nThe design of Jetty 12 is that it is a Core, with no EE specifics (no Servlet, nothing) and then a bunch of Environments that provide the EE specific details.\r\n\r\nWith this new design...\r\n\r\n* The long history (since 1995) of versioning in Jetty is more consistent with normal versioning expectations.\r\n  * since 1995, Jetty versioning was `&lt;servlet_support&gt;.&lt;major&gt;.&lt;minor&gt;`\r\n  * starting with Jetty 12 it is now `&lt;major&gt;.&lt;minor&gt;.&lt;patch&gt;`\r\n* There will be fewer (if any) major version updates in Jetty.\r\n* A new Jakarta EE or Jakarta Servlet version will just cause a new Environment to pop up.\r\n* It is possible to run multiple Environments at the same time now.\r\n* Continued support for legacy `javax.servlet` webapps.\r\n\r\nEg:\r\n\r\nEnvironment | Jakarta EE | Servlet | Namespace\r\n----- | ----- | ----- | -----\r\n`ee8` | Jakarta EE 8 | Jakarta Servlet 4 | `javax.servlet.*`\r\n`ee9` | Jakarta EE 9 | Jakarta Servlet 5 | `jakarta.servlet.*`\r\n`ee10` | Jakarta EE 10 | Jakarta Servlet 6 | `jakarta.servlet.*`\r\n\r\nSee the documentation about migrating from Jetty 11 to Jetty 12, and specifically the table of the maven coordination changes.\r\n\r\nhttps://eclipse.dev/jetty/documentation/jetty-12/programming-guide/index.html#pg-migration-11-to-12","title":"Missing jetty-servlet 12.0.0 dependency","body":"<p>The artifacts that are EE specific are now isolated in their own EE specific layer.</p>\n<p>The design of Jetty 12 is that it is a Core, with no EE specifics (no Servlet, nothing) and then a bunch of Environments that provide the EE specific details.</p>\n<p>With this new design...</p>\n<ul>\n<li>The long history (since 1995) of versioning in Jetty is more consistent with normal versioning expectations.\n<ul>\n<li>since 1995, Jetty versioning was <code>&lt;servlet_support&gt;.&lt;major&gt;.&lt;minor&gt;</code></li>\n<li>starting with Jetty 12 it is now <code>&lt;major&gt;.&lt;minor&gt;.&lt;patch&gt;</code></li>\n</ul>\n</li>\n<li>There will be fewer (if any) major version updates in Jetty.</li>\n<li>A new Jakarta EE or Jakarta Servlet version will just cause a new Environment to pop up.</li>\n<li>It is possible to run multiple Environments at the same time now.</li>\n<li>Continued support for legacy <code>javax.servlet</code> webapps.</li>\n</ul>\n<p>Eg:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Environment</th>\n<th>Jakarta EE</th>\n<th>Servlet</th>\n<th>Namespace</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>ee8</code></td>\n<td>Jakarta EE 8</td>\n<td>Jakarta Servlet 4</td>\n<td><code>javax.servlet.*</code></td>\n</tr>\n<tr>\n<td><code>ee9</code></td>\n<td>Jakarta EE 9</td>\n<td>Jakarta Servlet 5</td>\n<td><code>jakarta.servlet.*</code></td>\n</tr>\n<tr>\n<td><code>ee10</code></td>\n<td>Jakarta EE 10</td>\n<td>Jakarta Servlet 6</td>\n<td><code>jakarta.servlet.*</code></td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>See the documentation about migrating from Jetty 11 to Jetty 12, and specifically the table of the maven coordination changes.</p>\n<p><a href=\"https://eclipse.dev/jetty/documentation/jetty-12/programming-guide/index.html#pg-migration-11-to-12\" rel=\"nofollow noreferrer\">https://eclipse.dev/jetty/documentation/jetty-12/programming-guide/index.html#pg-migration-11-to-12</a></p>\n"}],"owner":{"account_id":4133056,"reputation":532,"user_id":5967354,"display_name":"user27772"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":447,"favorite_count":0,"down_vote_count":2,"up_vote_count":3,"accepted_answer_id":77010707,"answer_count":1,"score":1,"last_activity_date":1694039754,"creation_date":1693394927,"question_id":77007560,"body_markdown":"I cannot find the `jetty-servlet` artifact for the recently released Jetty 12.0.0\r\n\r\n* https://github.com/eclipse/jetty.project/releases/tag/jetty-12.0.0\r\n\r\nA search for it shows that it is not present on Maven Central, where can I find it?  Does it still exist?\r\n","title":"Missing jetty-servlet 12.0.0 dependency","body":"<p>I cannot find the <code>jetty-servlet</code> artifact for the recently released Jetty 12.0.0</p>\n<ul>\n<li><a href=\"https://github.com/eclipse/jetty.project/releases/tag/jetty-12.0.0\" rel=\"nofollow noreferrer\">https://github.com/eclipse/jetty.project/releases/tag/jetty-12.0.0</a></li>\n</ul>\n<p>A search for it shows that it is not present on Maven Central, where can I find it?  Does it still exist?</p>\n"},{"tags":["java","mysql","hibernate","jts"],"comments":[{"owner":{"account_id":5979633,"reputation":2842,"user_id":4699160,"accept_rate":48,"display_name":"Saurabh Jhunjhunwala"},"score":0,"creation_date":1692702641,"post_id":76952490,"comment_id":135657173,"body_markdown":"can you please share your DDL for the table. The error says, the object size is bigger than the column size","body":"can you please share your DDL for the table. The error says, the object size is bigger than the column size"},{"owner":{"account_id":7856677,"reputation":1967,"user_id":5938276,"accept_rate":38,"display_name":"Al Grant"},"score":0,"creation_date":1692727028,"post_id":76952490,"comment_id":135662986,"body_markdown":"The DDL is generated by Hibernate","body":"The DDL is generated by Hibernate"}],"answers":[{"comments":[{"owner":{"account_id":7856677,"reputation":1967,"user_id":5938276,"accept_rate":38,"display_name":"Al Grant"},"score":0,"creation_date":1692867452,"post_id":76965137,"comment_id":135683199,"body_markdown":"Thanks. I think the different is the MySQL8 vs H2.","body":"Thanks. I think the different is the MySQL8 vs H2."},{"owner":{"account_id":8563155,"reputation":1009,"user_id":6416551,"display_name":"Wilder Valera"},"score":0,"creation_date":1692978164,"post_id":76965137,"comment_id":135703311,"body_markdown":"I did another test but this time on mysql and it works. Can you post your application.properties and maven/gradle config?","body":"I did another test but this time on mysql and it works. Can you post your application.properties and maven/gradle config?"},{"owner":{"account_id":8563155,"reputation":1009,"user_id":6416551,"display_name":"Wilder Valera"},"score":0,"creation_date":1692978867,"post_id":76965137,"comment_id":135703469,"body_markdown":"Using org.springframework.data.geo.Point makes Hibernate create the Point as varbinary","body":"Using org.springframework.data.geo.Point makes Hibernate create the Point as varbinary"}],"tags":[],"owner":{"account_id":8563155,"reputation":1009,"user_id":6416551,"display_name":"Wilder Valera"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1692827915,"creation_date":1692827915,"answer_id":76965137,"question_id":76952490,"body_markdown":"I did the test with Spring boot 3.1.2 and H2 database.\r\n\r\nAdd the hibernate spatial dependency in your project(version may vary).\r\n\r\n`// https://mvnrepository.com/artifact/org.hibernate/hibernate-spatial`                    \r\n`implementation &#39;org.hibernate:hibernate-spatial:6.2.6.Final&#39;`\r\n\r\nThen you will see that the column definition of location is geometry. No transformation needed.\r\n\r\nHibernate spatial uses the locationtech library.","title":"Point data type into MySQL8","body":"<p>I did the test with Spring boot 3.1.2 and H2 database.</p>\n<p>Add the hibernate spatial dependency in your project(version may vary).</p>\n<p><code>// https://mvnrepository.com/artifact/org.hibernate/hibernate-spatial</code><br />\n<code>implementation 'org.hibernate:hibernate-spatial:6.2.6.Final'</code></p>\n<p>Then you will see that the column definition of location is geometry. No transformation needed.</p>\n<p>Hibernate spatial uses the locationtech library.</p>\n"},{"tags":[],"owner":{"account_id":19087197,"reputation":11,"user_id":13938215,"display_name":"Gabriel Roldan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694039594,"creation_date":1694039594,"answer_id":77055606,"question_id":76952490,"body_markdown":"in my experience, you need to add the hibernate-spatial dependency, and also set the proper dialect, like in:\r\n\r\n```yaml\r\n    spring:\r\n      jpa:\r\n        ...\r\n        properties:\r\n          hibernate:\r\n            ...\r\n            dialect: org.hibernate.spatial.dialect.postgis.PostgisPG10Dialect\r\n```\r\n\r\nYou can choose to use JTS or Geolatte geometries, both will work.\r\n","title":"Point data type into MySQL8","body":"<p>in my experience, you need to add the hibernate-spatial dependency, and also set the proper dialect, like in:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>    spring:\n      jpa:\n        ...\n        properties:\n          hibernate:\n            ...\n            dialect: org.hibernate.spatial.dialect.postgis.PostgisPG10Dialect\n</code></pre>\n<p>You can choose to use JTS or Geolatte geometries, both will work.</p>\n"}],"owner":{"account_id":7856677,"reputation":1967,"user_id":5938276,"accept_rate":38,"display_name":"Al Grant"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76965137,"answer_count":2,"score":1,"last_activity_date":1694039594,"creation_date":1692701004,"question_id":76952490,"body_markdown":"I have a class with JTS point:\r\n\r\n    @Entity\r\n    @Data\r\n    public class Check {\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = IDENTITY)\r\n        private Long id;\r\n        private Point location;\r\n\r\nI then want to save that point to my database\r\n\r\n       Point location = new GeometryFactory().createPoint((new Coordinate(10, 10, 4326)));\r\n       // Hibernate method to save entity\r\n\r\nAfter doing some reading I can see people using a WKTReader to convert to some other format (WKB?) before storing it in the MySQL db.\r\n\r\nWhen I try the stack trace says :\r\n\r\n    o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1406, SQLState: 22001\r\n    o.h.engine.jdbc.spi.SqlExceptionHelper   : Data truncation: Data too long for column &#39;location&#39; at row 1\r\n\r\n**UPDATE**\r\n\r\nUsing dependency `org.geolatte.geom.*` works perfectly:\r\n\r\n            Point&lt;G2D&gt; geolatte_location = point(WGS84,g(1744.33,-53.21));\r\n\r\n \r\nWhich makes me think I need to convert the point before I store it - how do I convert it so it will be able to be used in the constructor and resulting SQL?\r\n\r\nEnvironment:\r\nJava 18\r\nGradle\r\nMySQL8\r\nHibernate 6.2\r\nSpring Boot 3.2\r\n\r\nThe column in the table for the point created by hibernate is varbinary(255) - I thought MySQL8 supported Spatial point type.\r\n\r\n","title":"Point data type into MySQL8","body":"<p>I have a class with JTS point:</p>\n<pre><code>@Entity\n@Data\npublic class Check {\n\n    @Id\n    @GeneratedValue(strategy = IDENTITY)\n    private Long id;\n    private Point location;\n</code></pre>\n<p>I then want to save that point to my database</p>\n<pre><code>   Point location = new GeometryFactory().createPoint((new Coordinate(10, 10, 4326)));\n   // Hibernate method to save entity\n</code></pre>\n<p>After doing some reading I can see people using a WKTReader to convert to some other format (WKB?) before storing it in the MySQL db.</p>\n<p>When I try the stack trace says :</p>\n<pre><code>o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1406, SQLState: 22001\no.h.engine.jdbc.spi.SqlExceptionHelper   : Data truncation: Data too long for column 'location' at row 1\n</code></pre>\n<p><strong>UPDATE</strong></p>\n<p>Using dependency <code>org.geolatte.geom.*</code> works perfectly:</p>\n<pre><code>        Point&lt;G2D&gt; geolatte_location = point(WGS84,g(1744.33,-53.21));\n</code></pre>\n<p>Which makes me think I need to convert the point before I store it - how do I convert it so it will be able to be used in the constructor and resulting SQL?</p>\n<p>Environment:\nJava 18\nGradle\nMySQL8\nHibernate 6.2\nSpring Boot 3.2</p>\n<p>The column in the table for the point created by hibernate is varbinary(255) - I thought MySQL8 supported Spatial point type.</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":4703670,"reputation":141,"user_id":3806532,"display_name":"Tavo Sanchez"},"score":0,"creation_date":1694041854,"post_id":77055597,"comment_id":135840783,"body_markdown":"The `update` will update the key and the object you pass in the arguments.","body":"The <code>update</code> will update the key and the object you pass in the arguments."},{"owner":{"account_id":4703670,"reputation":141,"user_id":3806532,"display_name":"Tavo Sanchez"},"score":0,"creation_date":1694042291,"post_id":77055597,"comment_id":135840834,"body_markdown":"The use of the verb PUT it is at the entry point level, you have to handle what you want it to do at the database level.\n\nIt is adding the &quot;extra&quot; field because it is part of the object Product and as I can see your request body only has two attributes therefore the `type` attribute will be null. Depending on your requirement you might need to get the original content and check what to update/what to keep in a `Product` object and pass it to the `UpdateDefinition` instance","body":"The use of the verb PUT it is at the entry point level, you have to handle what you want it to do at the database level.  It is adding the &quot;extra&quot; field because it is part of the object Product and as I can see your request body only has two attributes therefore the <code>type</code> attribute will be null. Depending on your requirement you might need to get the original content and check what to update/what to keep in a <code>Product</code> object and pass it to the <code>UpdateDefinition</code> instance"},{"owner":{"account_id":20872574,"reputation":1,"user_id":15332161,"display_name":"darth_roman"},"score":0,"creation_date":1694074123,"post_id":77055597,"comment_id":135844030,"body_markdown":"it males sense to me, at first i thought that the `update()` method would update the whole document rather some fields, thank you.","body":"it males sense to me, at first i thought that the <code>update()</code> method would update the whole document rather some fields, thank you."}],"owner":{"account_id":20872574,"reputation":1,"user_id":15332161,"display_name":"darth_roman"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694039447,"creation_date":1694039447,"question_id":77055597,"body_markdown":"I am currently working in a REST API, one of the entities i have to deal with is `Product` entity.\r\nWhen I want to make a `PUT` request on a product document using the `UpdateDefinion` instance `Update`, I get a weird behavior in return\r\n\r\nProduct class:\r\n\r\n```java\r\n@Data\r\npublic class Product{\r\n    // some attributes\r\n    \r\n    // some getters and setters\r\n}\r\n```\r\n\r\nThe update method on the ProductService class:\r\n\r\n```java\r\n\r\npublic Product editAProduct(ObjectId pid, Product product){\r\n        MongoOperations mongoOperations = new MongoTemplate(MongoClients.create(), &quot;milevdeli&quot;);\r\n        Query query = new Query(Criteria.where(&quot;_id&quot;).is(pid));\r\n            Update update = Update.update(&quot;product&quot;, product);\r\n                    .set(&quot;name&quot;, product.getName())\r\n                    .set(&quot;type&quot;, product.getType())\r\n                    .set(&quot;price&quot;, product.getPrice());\r\n\r\n            mongoOperations.findAndModify(\r\n                    query,\r\n                    update,\r\n                    FindAndModifyOptions.options().returnNew(true),\r\n                    Product.class);\r\n\r\n        return (Product) mongoOperations.find(query, Product.class).get(0); \r\n```\r\n\r\nMy Products collection:\r\n\r\n```json\r\n{\r\n    &quot;_id&quot;: ObjectId,\r\n    &quot;name&quot;: &quot;some name&quot;,\r\n    &quot;price&quot;: &quot;some price&quot;,\r\n    &quot;type&quot;: &quot;some type&quot;\r\n    \r\n}\r\n```\r\n\r\nBUT i get something like this when I execute the request:\r\n\r\n```json\r\n{\r\n    &quot;_id&quot;: ObjectId,\r\n    &quot;name&quot;: &quot;some name&quot;,\r\n    &quot;price&quot;: &quot;some price&quot;,\r\n    &quot;type&quot;: &quot;some type&quot;,\r\n    &quot;product&quot;: {\r\n        &quot;name&quot;: &quot;new name&quot;,\r\n        &quot;price&quot;: &quot;new price&quot;,\r\n        &quot;type&quot;: &quot;new type&quot;,\r\n      }\r\n    \r\n}\r\n```\r\n\r\nI was expecting only the fields update i requested\r\n\r\nthe Request Body:\r\n\r\n```json\r\n{\r\n    &quot;name&quot;:&quot;Updated name&quot;,\r\n    &quot;price&quot;: &quot;Updated price&quot;\r\n}\r\n```\r\n\r\nthe response body:\r\n\r\n```json\r\n    &quot;name&quot;:&quot;Updated name&quot;,\r\n    &quot;price&quot;: &quot;Updated price&quot;,\r\n    &quot;type&quot;:null\r\n```\r\n\r\nWhat i do not understand is:\r\n\r\n- How the `update()` method works?\r\n- How is it possible for it to &quot;ignore&quot; the fields not passed through the request body of the `PUT` request?\r\n- Why is it adding an extra field for my mongoDB collection that actually has the modification sent in the request?\r\n- Why is it setting the set fields with the `.set()` method but not passed through the request body to `null` and how to prevent that?","title":"Spring Boot UpdateDefinition behavior","body":"<p>I am currently working in a REST API, one of the entities i have to deal with is <code>Product</code> entity.\nWhen I want to make a <code>PUT</code> request on a product document using the <code>UpdateDefinion</code> instance <code>Update</code>, I get a weird behavior in return</p>\n<p>Product class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Data\npublic class Product{\n    // some attributes\n    \n    // some getters and setters\n}\n</code></pre>\n<p>The update method on the ProductService class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\npublic Product editAProduct(ObjectId pid, Product product){\n        MongoOperations mongoOperations = new MongoTemplate(MongoClients.create(), &quot;milevdeli&quot;);\n        Query query = new Query(Criteria.where(&quot;_id&quot;).is(pid));\n            Update update = Update.update(&quot;product&quot;, product);\n                    .set(&quot;name&quot;, product.getName())\n                    .set(&quot;type&quot;, product.getType())\n                    .set(&quot;price&quot;, product.getPrice());\n\n            mongoOperations.findAndModify(\n                    query,\n                    update,\n                    FindAndModifyOptions.options().returnNew(true),\n                    Product.class);\n\n        return (Product) mongoOperations.find(query, Product.class).get(0); \n</code></pre>\n<p>My Products collection:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;_id&quot;: ObjectId,\n    &quot;name&quot;: &quot;some name&quot;,\n    &quot;price&quot;: &quot;some price&quot;,\n    &quot;type&quot;: &quot;some type&quot;\n    \n}\n</code></pre>\n<p>BUT i get something like this when I execute the request:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;_id&quot;: ObjectId,\n    &quot;name&quot;: &quot;some name&quot;,\n    &quot;price&quot;: &quot;some price&quot;,\n    &quot;type&quot;: &quot;some type&quot;,\n    &quot;product&quot;: {\n        &quot;name&quot;: &quot;new name&quot;,\n        &quot;price&quot;: &quot;new price&quot;,\n        &quot;type&quot;: &quot;new type&quot;,\n      }\n    \n}\n</code></pre>\n<p>I was expecting only the fields update i requested</p>\n<p>the Request Body:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;name&quot;:&quot;Updated name&quot;,\n    &quot;price&quot;: &quot;Updated price&quot;\n}\n</code></pre>\n<p>the response body:</p>\n<pre class=\"lang-json prettyprint-override\"><code>    &quot;name&quot;:&quot;Updated name&quot;,\n    &quot;price&quot;: &quot;Updated price&quot;,\n    &quot;type&quot;:null\n</code></pre>\n<p>What i do not understand is:</p>\n<ul>\n<li>How the <code>update()</code> method works?</li>\n<li>How is it possible for it to &quot;ignore&quot; the fields not passed through the request body of the <code>PUT</code> request?</li>\n<li>Why is it adding an extra field for my mongoDB collection that actually has the modification sent in the request?</li>\n<li>Why is it setting the set fields with the <code>.set()</code> method but not passed through the request body to <code>null</code> and how to prevent that?</li>\n</ul>\n"},{"tags":["java","linux","ubuntu"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1694036645,"post_id":77055406,"comment_id":135840248,"body_markdown":"Afaicr you can&#39;t. You need to install a Linux jdk","body":"Afaicr you can&#39;t. You need to install a Linux jdk"},{"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"score":0,"creation_date":1694037220,"post_id":77055406,"comment_id":135840327,"body_markdown":"@g00se please see the edit","body":"@g00se please see the edit"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1694038697,"post_id":77055406,"comment_id":135840468,"body_markdown":"Ok. That&#39;s good but I&#39;m not quite sure whether everything&#39;s all right for you now ...","body":"Ok. That&#39;s good but I&#39;m not quite sure whether everything&#39;s all right for you now ..."},{"owner":{"account_id":8002,"reputation":283812,"user_id":14122,"accept_rate":71,"display_name":"Charles Duffy"},"score":0,"creation_date":1694038699,"post_id":77055406,"comment_id":135840469,"body_markdown":"That edit should be added _as an answer_. Answers are not allowed in questions.","body":"That edit should be added <i>as an answer</i>. Answers are not allowed in questions."},{"owner":{"account_id":673865,"reputation":5306,"user_id":889053,"accept_rate":38,"display_name":"Christian Bongiorno"},"score":0,"creation_date":1694039216,"post_id":77055406,"comment_id":135840527,"body_markdown":"Even if you could hack in the jdk from your windows world, I wouldn&#39;t. You&#39;re asking for any number of issue. You can literally download it direct and install - even without apt","body":"Even if you could hack in the jdk from your windows world, I wouldn&#39;t. You&#39;re asking for any number of issue. You can literally download it direct and install - even without apt"}],"answers":[{"tags":[],"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694039326,"creation_date":1694039326,"answer_id":77055589,"question_id":77055406,"body_markdown":"Running\r\n```\r\nsudo apt update\r\n```\r\nbefore trying to install a second JDK (g00se suggested I had to) helped. It was ChatGPT&#39;s advice. If you need to know where the JDK is installed, try (also GPT&#39;s idea)\r\n```\r\nupdate-alternatives --list java\r\n```\r\nWith that information, you should be able to register that `JAVA_HOME` thing. In my case, it was\r\n```\r\nexport JAVA_HOME=/usr/lib/jvm/java-17-openjdk-amd64\r\n```\r\nI hope it helps somebody one day","title":"How do I make my JDK available to Ubuntu when using WSL?","body":"<p>Running</p>\n<pre><code>sudo apt update\n</code></pre>\n<p>before trying to install a second JDK (g00se suggested I had to) helped. It was ChatGPT's advice. If you need to know where the JDK is installed, try (also GPT's idea)</p>\n<pre><code>update-alternatives --list java\n</code></pre>\n<p>With that information, you should be able to register that <code>JAVA_HOME</code> thing. In my case, it was</p>\n<pre><code>export JAVA_HOME=/usr/lib/jvm/java-17-openjdk-amd64\n</code></pre>\n<p>I hope it helps somebody one day</p>\n"}],"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":205,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77055589,"answer_count":1,"score":1,"last_activity_date":1694039326,"creation_date":1694035972,"question_id":77055406,"body_markdown":"I&#39;m trying to learn Kafka and started to read [this book][1] (you can download it and read too if you want, it&#39;s free). One of the first steps the authors suggest is installing Zookeeper. In line with their advice, I installed WSL and successfully executed some commands to do that (see p. 18), but then some issue with JDK popped up. I had it installed in the `C:\\Program Files\\Java\\JDK\\jdk-17.0.2+8` directory before. Here&#39;s what I tried:\r\n```\r\njorejoh@LAPTOP-CKP86E2O:/mnt/c$ export JAVA_HOME=&quot;/mnt/c/Program Files/Java/JDK/jdk-17.0.2+8&quot;\r\njorejoh@LAPTOP-CKP86E2O:/mnt/c$ cd /\r\njorejoh@LAPTOP-CKP86E2O:/$ /usr/local/zookeeper/bin/zkServer.sh start\r\nError: JAVA_HOME is not set and java could not be found in PATH.\r\n```\r\nand this\r\n```\r\njorejoh@LAPTOP-CKP86E2O:/$ export JAVA_HOME=&quot;/mnt/c/Program\\ Files/Java/JDK/jdk-17.0.2+8&quot;\r\njorejoh@LAPTOP-CKP86E2O:/$ export PATH=&quot;$JAVA_HOME/bin:$PATH&quot;\r\njorejoh@LAPTOP-CKP86E2O:/$ java -version\r\nCommand &#39;java&#39; not found, but can be installed with:\r\nsudo apt install openjdk-11-jre-headless  # version 11.0.18+10-0ubuntu1~22.04, or\r\nsudo apt install default-jre              # version 2:1.11-72build2\r\nsudo apt install openjdk-17-jre-headless  # version 17.0.6+10-0ubuntu1~22.04\r\nsudo apt install openjdk-18-jre-headless  # version 18.0.2+9-2~22.04\r\nsudo apt install openjdk-19-jre-headless  # version 19.0.2+7-0ubuntu3~22.04\r\nsudo apt install openjdk-8-jre-headless   # version 8u362-ga-0ubuntu1~22.04\r\n```\r\nShould I really install a JDK a second time, this time for Ubuntu? How do I make my JDK available to it and execute the script?\r\n\r\nI did try to install it a second time. The result:\r\n```\r\njorejoh@LAPTOP-CKP86E2O:/$ sudo apt install openjdk-17-jre-headless\r\n[sudo] password for jorejoh:\r\nReading package lists... Done\r\nBuilding dependency tree... Done\r\nReading state information... Done\r\nE: Unable to locate package openjdk-17-jre-headless\r\n```\r\nShould I have adjusted the proposed command somehow?\r\n\r\n\r\n  [1]: https://www.confluent.io/resources/kafka-the-definitive-guide/","title":"How do I make my JDK available to Ubuntu when using WSL?","body":"<p>I'm trying to learn Kafka and started to read <a href=\"https://www.confluent.io/resources/kafka-the-definitive-guide/\" rel=\"nofollow noreferrer\">this book</a> (you can download it and read too if you want, it's free). One of the first steps the authors suggest is installing Zookeeper. In line with their advice, I installed WSL and successfully executed some commands to do that (see p. 18), but then some issue with JDK popped up. I had it installed in the <code>C:\\Program Files\\Java\\JDK\\jdk-17.0.2+8</code> directory before. Here's what I tried:</p>\n<pre><code>jorejoh@LAPTOP-CKP86E2O:/mnt/c$ export JAVA_HOME=&quot;/mnt/c/Program Files/Java/JDK/jdk-17.0.2+8&quot;\njorejoh@LAPTOP-CKP86E2O:/mnt/c$ cd /\njorejoh@LAPTOP-CKP86E2O:/$ /usr/local/zookeeper/bin/zkServer.sh start\nError: JAVA_HOME is not set and java could not be found in PATH.\n</code></pre>\n<p>and this</p>\n<pre><code>jorejoh@LAPTOP-CKP86E2O:/$ export JAVA_HOME=&quot;/mnt/c/Program\\ Files/Java/JDK/jdk-17.0.2+8&quot;\njorejoh@LAPTOP-CKP86E2O:/$ export PATH=&quot;$JAVA_HOME/bin:$PATH&quot;\njorejoh@LAPTOP-CKP86E2O:/$ java -version\nCommand 'java' not found, but can be installed with:\nsudo apt install openjdk-11-jre-headless  # version 11.0.18+10-0ubuntu1~22.04, or\nsudo apt install default-jre              # version 2:1.11-72build2\nsudo apt install openjdk-17-jre-headless  # version 17.0.6+10-0ubuntu1~22.04\nsudo apt install openjdk-18-jre-headless  # version 18.0.2+9-2~22.04\nsudo apt install openjdk-19-jre-headless  # version 19.0.2+7-0ubuntu3~22.04\nsudo apt install openjdk-8-jre-headless   # version 8u362-ga-0ubuntu1~22.04\n</code></pre>\n<p>Should I really install a JDK a second time, this time for Ubuntu? How do I make my JDK available to it and execute the script?</p>\n<p>I did try to install it a second time. The result:</p>\n<pre><code>jorejoh@LAPTOP-CKP86E2O:/$ sudo apt install openjdk-17-jre-headless\n[sudo] password for jorejoh:\nReading package lists... Done\nBuilding dependency tree... Done\nReading state information... Done\nE: Unable to locate package openjdk-17-jre-headless\n</code></pre>\n<p>Should I have adjusted the proposed command somehow?</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694038071,"creation_date":1694038071,"answer_id":77055526,"question_id":77055455,"body_markdown":"Agents get their own classloader which is independent from the &#39;main application&#39; classloader.\r\n\r\n2 separate classloaders can actually each load the same class, resulting in 1 class being loaded _twice_, i.e. every `static` variable exists twice.\r\n\r\nThus, here, your agent initializes and prints what you see. Then from your main app you call `ObjectSizeFetcher.getObjectSize()` which causes a second completely independent ObjectSizeFetcher to load, which, of course, still has `null` as value for its static `Instrumentation instrumentation` field.\r\n\r\nThis isn&#39;t what agents are designed for - you&#39;re not supposed to talk to a running agent like this.\r\n\r\nGiven that you are an agent, if you want to try it anyway and hack around it (though I bet you&#39;ll run into more roadblocks, given that this isn&#39;t what it was meant for), well, you&#39;re an agent: You can rewrite things. In particular, you should be able to override the class load mechanism and &#39;catch&#39; the loading of one of the app classes, which gives your agent a `Class&lt;?&gt;` instance. Make a separate class that looks like this:\r\n\r\n```\r\npublic class Container {\r\n  public static ClassLoader agentLoader;\r\n}\r\n```\r\n\r\nAnd set your own loader. Now your app-side code can fetch the agent loader, use that to get a ref to the ObjectSizeFetcher, and use reflection to invoke `getObjectSize`.\r\n","title":"java.lang.NullPointerException: Cannot invoke &quot;java.lang.instrument.Instrumentation.getObjectSize(Object)&quot; because &quot;ObjectSizeFetcher.instrumentation&quot;","body":"<p>Agents get their own classloader which is independent from the 'main application' classloader.</p>\n<p>2 separate classloaders can actually each load the same class, resulting in 1 class being loaded <em>twice</em>, i.e. every <code>static</code> variable exists twice.</p>\n<p>Thus, here, your agent initializes and prints what you see. Then from your main app you call <code>ObjectSizeFetcher.getObjectSize()</code> which causes a second completely independent ObjectSizeFetcher to load, which, of course, still has <code>null</code> as value for its static <code>Instrumentation instrumentation</code> field.</p>\n<p>This isn't what agents are designed for - you're not supposed to talk to a running agent like this.</p>\n<p>Given that you are an agent, if you want to try it anyway and hack around it (though I bet you'll run into more roadblocks, given that this isn't what it was meant for), well, you're an agent: You can rewrite things. In particular, you should be able to override the class load mechanism and 'catch' the loading of one of the app classes, which gives your agent a <code>Class&lt;?&gt;</code> instance. Make a separate class that looks like this:</p>\n<pre><code>public class Container {\n  public static ClassLoader agentLoader;\n}\n</code></pre>\n<p>And set your own loader. Now your app-side code can fetch the agent loader, use that to get a ref to the ObjectSizeFetcher, and use reflection to invoke <code>getObjectSize</code>.</p>\n"}],"owner":{"account_id":49543,"reputation":19032,"user_id":147530,"accept_rate":63,"display_name":"morpheus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":123,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694038071,"creation_date":1694036889,"question_id":77055455,"body_markdown":"I am trying to use [getObjectSize](https://docs.oracle.com/en/java/javase/17/docs/api/java.instrument/java/lang/instrument/Instrumentation.html#getObjectSize(java.lang.Object)) to measure memory in Java. I am using JDK-20. I have done everything according to what documentation I could find online. I have my instrumentation class:\r\n\r\n```\r\npackage com.github.jelmerk;\r\n\r\nimport java.lang.instrument.Instrumentation;\r\n \r\npublic class ObjectSizeFetcher {\r\n    private static Instrumentation instrumentation;\r\n \r\n    public static void premain(String args, Instrumentation inst) {\r\n        System.out.println(&quot;initializing ObjectSizeFetcher...&quot;);\r\n        if (inst == null) {\r\n            throw new RuntimeException(&quot;unable to initialize ObjectSizeFetcher. java.lang.instrument.Instrumentation is null&quot;);\r\n        }\r\n        instrumentation = inst;\r\n        System.out.println(&quot;successfully initialized ObjectSizeFetcher&quot;);\r\n    }\r\n \r\n    public static long getObjectSize(Object o) {\r\n        return instrumentation.getObjectSize(o);\r\n    }\r\n}\r\n```\r\n\r\nthen in `pom.xml` I have defined the `PreMain-class`:\r\n\r\n```\r\n&lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.1.2&lt;/version&gt;\r\n          &lt;configuration&gt;\r\n        &lt;archive&gt;\r\n            &lt;manifest&gt;\r\n                &lt;packageName&gt;com.github.jelmerk&lt;/packageName&gt;\r\n            &lt;/manifest&gt;\r\n            &lt;manifestEntries&gt;\r\n                &lt;Premain-Class&gt;com.github.jelmerk.ObjectSizeFetcher&lt;/Premain-Class&gt;\r\n            &lt;/manifestEntries&gt;\r\n        &lt;/archive&gt;\r\n    &lt;/configuration&gt;\r\n        &lt;/plugin&gt;\r\n```\r\n\r\nI then installed the jar into M2 repository. I am setting the `javaagent` in my application:\r\n\r\n```\r\nMAVEN_OPTS=&quot;-javaagent:/my/.m2/repository/my/package/memory-profiler/1.2.0/memory-profiler-1.2.0.jar --enable-preview --add-modules jdk.incubator.vector -enableassertions&quot; \\\r\nmvn exec:java -Dexec.cleanupDaemonThreads=false\r\n```\r\n\r\nbut when I run my application I get this:\r\n\r\n```\r\n% ./run.sh\r\nWARNING: Using incubator modules: jdk.incubator.vector\r\ninitializing ObjectSizeFetcher...\r\nsuccessfully initialized ObjectSizeFetcher\r\n[INFO] Scanning for projects...\r\n[INFO]\r\n[INFO] ----------------------&lt; com.mycompany.app:my-app &gt;----------------------\r\n[INFO] Building my-app 1.0-SNAPSHOT\r\n[INFO]   from pom.xml\r\n[INFO] --------------------------------[ jar ]---------------------------------\r\n[INFO]\r\n[INFO] --- exec:3.1.0:java (default-cli) @ my-app ---\r\n[WARNING]\r\njava.lang.NullPointerException: Cannot invoke &quot;java.lang.instrument.Instrumentation.getObjectSize(Object)&quot; because &quot;com.github.jelmerk.ObjectSizeFetcher.instrumentation&quot; is null\r\n    at com.github.jelmerk.ObjectSizeFetcher.getObjectSize (ObjectSizeFetcher.java:18)\r\n    at com.mycompany.app.App.main (App.java:48)\r\n    at org.codehaus.mojo.exec.ExecJavaMojo$1.run (ExecJavaMojo.java:279)\r\n    at java.lang.Thread.run (Thread.java:1623)\r\n```\r\n\r\nNote I even this message:\r\n\r\n```\r\ninitializing ObjectSizeFetcher...\r\nsuccessfully initialized ObjectSizeFetcher\r\n```\r\n\r\nyet when I try to call `getObjectSize` it returns NPE. Can someone tell me what is wrong here and how can I fix it? I have tried debugging for many hours.","title":"java.lang.NullPointerException: Cannot invoke &quot;java.lang.instrument.Instrumentation.getObjectSize(Object)&quot; because &quot;ObjectSizeFetcher.instrumentation&quot;","body":"<p>I am trying to use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.instrument/java/lang/instrument/Instrumentation.html#getObjectSize(java.lang.Object)\" rel=\"nofollow noreferrer\">getObjectSize</a> to measure memory in Java. I am using JDK-20. I have done everything according to what documentation I could find online. I have my instrumentation class:</p>\n<pre><code>package com.github.jelmerk;\n\nimport java.lang.instrument.Instrumentation;\n \npublic class ObjectSizeFetcher {\n    private static Instrumentation instrumentation;\n \n    public static void premain(String args, Instrumentation inst) {\n        System.out.println(&quot;initializing ObjectSizeFetcher...&quot;);\n        if (inst == null) {\n            throw new RuntimeException(&quot;unable to initialize ObjectSizeFetcher. java.lang.instrument.Instrumentation is null&quot;);\n        }\n        instrumentation = inst;\n        System.out.println(&quot;successfully initialized ObjectSizeFetcher&quot;);\n    }\n \n    public static long getObjectSize(Object o) {\n        return instrumentation.getObjectSize(o);\n    }\n}\n</code></pre>\n<p>then in <code>pom.xml</code> I have defined the <code>PreMain-class</code>:</p>\n<pre><code>&lt;plugin&gt;\n          &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.1.2&lt;/version&gt;\n          &lt;configuration&gt;\n        &lt;archive&gt;\n            &lt;manifest&gt;\n                &lt;packageName&gt;com.github.jelmerk&lt;/packageName&gt;\n            &lt;/manifest&gt;\n            &lt;manifestEntries&gt;\n                &lt;Premain-Class&gt;com.github.jelmerk.ObjectSizeFetcher&lt;/Premain-Class&gt;\n            &lt;/manifestEntries&gt;\n        &lt;/archive&gt;\n    &lt;/configuration&gt;\n        &lt;/plugin&gt;\n</code></pre>\n<p>I then installed the jar into M2 repository. I am setting the <code>javaagent</code> in my application:</p>\n<pre><code>MAVEN_OPTS=&quot;-javaagent:/my/.m2/repository/my/package/memory-profiler/1.2.0/memory-profiler-1.2.0.jar --enable-preview --add-modules jdk.incubator.vector -enableassertions&quot; \\\nmvn exec:java -Dexec.cleanupDaemonThreads=false\n</code></pre>\n<p>but when I run my application I get this:</p>\n<pre><code>% ./run.sh\nWARNING: Using incubator modules: jdk.incubator.vector\ninitializing ObjectSizeFetcher...\nsuccessfully initialized ObjectSizeFetcher\n[INFO] Scanning for projects...\n[INFO]\n[INFO] ----------------------&lt; com.mycompany.app:my-app &gt;----------------------\n[INFO] Building my-app 1.0-SNAPSHOT\n[INFO]   from pom.xml\n[INFO] --------------------------------[ jar ]---------------------------------\n[INFO]\n[INFO] --- exec:3.1.0:java (default-cli) @ my-app ---\n[WARNING]\njava.lang.NullPointerException: Cannot invoke &quot;java.lang.instrument.Instrumentation.getObjectSize(Object)&quot; because &quot;com.github.jelmerk.ObjectSizeFetcher.instrumentation&quot; is null\n    at com.github.jelmerk.ObjectSizeFetcher.getObjectSize (ObjectSizeFetcher.java:18)\n    at com.mycompany.app.App.main (App.java:48)\n    at org.codehaus.mojo.exec.ExecJavaMojo$1.run (ExecJavaMojo.java:279)\n    at java.lang.Thread.run (Thread.java:1623)\n</code></pre>\n<p>Note I even this message:</p>\n<pre><code>initializing ObjectSizeFetcher...\nsuccessfully initialized ObjectSizeFetcher\n</code></pre>\n<p>yet when I try to call <code>getObjectSize</code> it returns NPE. Can someone tell me what is wrong here and how can I fix it? I have tried debugging for many hours.</p>\n"},{"tags":["java","gradle","cucumber","bdd","serenity-bdd"],"owner":{"account_id":10420697,"reputation":1,"user_id":22512857,"display_name":"sam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694037784,"creation_date":1694037572,"question_id":77055497,"body_markdown":"When I upgraded to the latest version (4.0.1) of Serenity, I am not able to see the step-by-step console log locally when a step actually fails (I intentionally used the wrong element locator in one step to make it fail). The log is not detecting the failure, and it shows that all steps passed.\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/tgm7S.png","title":"The log is not detecting the failure (locally)after upgrading to serenityCoreVersion = &#39;4.0.1&#39;","body":"<p>When I upgraded to the latest version (4.0.1) of Serenity, I am not able to see the step-by-step console log locally when a step actually fails (I intentionally used the wrong element locator in one step to make it fail). The log is not detecting the failure, and it shows that all steps passed.\n<a href=\"https://i.stack.imgur.com/tgm7S.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":["java","cxf","jax-ws","apache-tomee","openejb"],"owner":{"account_id":3085969,"reputation":167,"user_id":2613090,"display_name":"rfrp"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694036881,"creation_date":1693879144,"question_id":77041339,"body_markdown":"My client is sending an incorrect message (we are migrating from Weblogic10 to Tomee 8.0.15. The first one was more permissive with incorrect xml&#39;s acording with de wsdl), so I have been trying to avoid the error \r\n\r\n&gt; Unmarshalling Error: element unexpeted (URI:&quot;&quot;, local:&quot;foo&quot;). Expected elements are &amp;lt ...\r\n\r\nSo I concluded that adding the following config in openjb-jar.xml (as appear [here][1])\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;openejb-jar&gt;\r\n    &lt;ejb-deployment ejb-name=&quot;MyService&quot;&gt;\r\n        &lt;properties&gt;\r\n            cxf.jaxws.properties = MyServiceProperties\r\n        &lt;/properties&gt;\r\n    &lt;/ejb-deployment&gt;\r\n```\r\nAnd this resources.xml\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;resources&gt;\r\n    &lt;Service id=&quot;MyServiceProperties&quot; class-name=&quot;java.util.Properties&quot;&gt;\r\n        set-jaxb-validation-event-handler = false\r\n        schema-validation-enabled = false\r\n    &lt;/Service&gt;\r\n&lt;/resources&gt;\r\n```\r\nor this annotation in the definition of my WebService class\r\n\r\n```java\r\n@EndpointProperties({ \r\n    @EndpointProperty(key = &quot;set-jaxb-validation-event-handler&quot;, value = &quot;false&quot;)\r\n})\r\n\r\n@WebService(name=&quot;MyService&quot;,targetNamespace=&quot;http://my.namespace/MyService&quot; )\r\npublic class MyService {\r\n...\r\n}\r\n```\r\nshould avoid the problem.\r\n\r\nI&#39;m deploying this services in Tomee 8.0.15, using JAX-WS and Apache CXF.\r\n\r\nAny clue why this is not working?\r\nI expect that the error of unmarshalling not appear any more.\r\n\r\n\r\n  [1]: https://rmannibucau.wordpress.com/2013/10/23/cxf-schema-validation-with-tomee/","title":"set-jaxb-validation-event-handler config is not working","body":"<p>My client is sending an incorrect message (we are migrating from Weblogic10 to Tomee 8.0.15. The first one was more permissive with incorrect xml's acording with de wsdl), so I have been trying to avoid the error</p>\n<blockquote>\n<p>Unmarshalling Error: element unexpeted (URI:&quot;&quot;, local:&quot;foo&quot;). Expected elements are &amp;lt ...</p>\n</blockquote>\n<p>So I concluded that adding the following config in openjb-jar.xml (as appear <a href=\"https://rmannibucau.wordpress.com/2013/10/23/cxf-schema-validation-with-tomee/\" rel=\"nofollow noreferrer\">here</a>)</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;openejb-jar&gt;\n    &lt;ejb-deployment ejb-name=&quot;MyService&quot;&gt;\n        &lt;properties&gt;\n            cxf.jaxws.properties = MyServiceProperties\n        &lt;/properties&gt;\n    &lt;/ejb-deployment&gt;\n</code></pre>\n<p>And this resources.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;resources&gt;\n    &lt;Service id=&quot;MyServiceProperties&quot; class-name=&quot;java.util.Properties&quot;&gt;\n        set-jaxb-validation-event-handler = false\n        schema-validation-enabled = false\n    &lt;/Service&gt;\n&lt;/resources&gt;\n</code></pre>\n<p>or this annotation in the definition of my WebService class</p>\n<pre class=\"lang-java prettyprint-override\"><code>@EndpointProperties({ \n    @EndpointProperty(key = &quot;set-jaxb-validation-event-handler&quot;, value = &quot;false&quot;)\n})\n\n@WebService(name=&quot;MyService&quot;,targetNamespace=&quot;http://my.namespace/MyService&quot; )\npublic class MyService {\n...\n}\n</code></pre>\n<p>should avoid the problem.</p>\n<p>I'm deploying this services in Tomee 8.0.15, using JAX-WS and Apache CXF.</p>\n<p>Any clue why this is not working?\nI expect that the error of unmarshalling not appear any more.</p>\n"},{"tags":["java","validation","spring-boot","spring-webflux","reactive"],"answers":[{"comments":[{"owner":{"account_id":6426369,"reputation":1111,"user_id":7758110,"accept_rate":56,"display_name":"Chandresh Mishra"},"score":0,"creation_date":1545592401,"post_id":53888543,"comment_id":94657334,"body_markdown":"I tried this as well but didn&#39;t work. Do I need something else?","body":"I tried this as well but didn&#39;t work. Do I need something else?"},{"owner":{"account_id":12626017,"reputation":5868,"user_id":10426557,"display_name":"Jonathan JOhx"},"score":0,"creation_date":1545606587,"post_id":53888543,"comment_id":94660204,"body_markdown":"can you post LoginModel class? are you using some custom validator?","body":"can you post LoginModel class? are you using some custom validator?"},{"owner":{"account_id":6426369,"reputation":1111,"user_id":7758110,"accept_rate":56,"display_name":"Chandresh Mishra"},"score":0,"creation_date":1545644301,"post_id":53888543,"comment_id":94667178,"body_markdown":"Edited. Added login model.","body":"Edited. Added login model."},{"owner":{"account_id":6426369,"reputation":1111,"user_id":7758110,"accept_rate":56,"display_name":"Chandresh Mishra"},"score":0,"creation_date":1545671245,"post_id":53888543,"comment_id":94674993,"body_markdown":"javax.validation.ConstraintDeclarationException: HV000197: No value extractor found for type parameter &#39;T&#39; of type reactor.core.publisher.Mono. . Getting this now","body":"javax.validation.ConstraintDeclarationException: HV000197: No value extractor found for type parameter &#39;T&#39; of type reactor.core.publisher.Mono. . Getting this now"},{"owner":{"account_id":6426369,"reputation":1111,"user_id":7758110,"accept_rate":56,"display_name":"Chandresh Mishra"},"score":0,"creation_date":1545672850,"post_id":53888543,"comment_id":94675353,"body_markdown":"I am getting this after adding @Validated at the class level otherwise no validation happens and I got 200 OK response as before","body":"I am getting this after adding @Validated at the class level otherwise no validation happens and I got 200 OK response as before"},{"owner":{"account_id":12626017,"reputation":5868,"user_id":10426557,"display_name":"Jonathan JOhx"},"score":0,"creation_date":1545676683,"post_id":53888543,"comment_id":94676292,"body_markdown":"Adding @Validated over class header won&#39;t be able to help you. remove that. I&#39;m going to try to simulate your case...","body":"Adding @Validated over class header won&#39;t be able to help you. remove that. I&#39;m going to try to simulate your case..."},{"owner":{"account_id":12626017,"reputation":5868,"user_id":10426557,"display_name":"Jonathan JOhx"},"score":0,"creation_date":1545683480,"post_id":53888543,"comment_id":94677751,"body_markdown":"OK then add just these fields and remove Validated annotation. RequestBody @Valid LoginModel loginDetail","body":"OK then add just these fields and remove Validated annotation. RequestBody @Valid LoginModel loginDetail"},{"owner":{"account_id":6426369,"reputation":1111,"user_id":7758110,"accept_rate":56,"display_name":"Chandresh Mishra"},"score":1,"creation_date":1545907783,"post_id":53888543,"comment_id":94726208,"body_markdown":"them it will make it non reactive","body":"them it will make it non reactive"}],"tags":[],"owner":{"account_id":12626017,"reputation":5868,"user_id":10426557,"display_name":"Jonathan JOhx"},"comment_count":8,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1545412385,"creation_date":1545412385,"answer_id":53888543,"question_id":53887930,"body_markdown":"@Valid annotation validates an object. So you are trying to validate a Mono&lt;T&gt;, you need to change to LoginModel object, for example:\r\n\r\n      ..getUserContacts(@RequestBody Mono&lt;@Valid LoginModel&gt; loginDetail) {\r\n          ...\r\n      }\r\n\r\n","title":"Bean validation is not working for spring webflux","body":"<p>@Valid annotation validates an object. So you are trying to validate a Mono, you need to change to LoginModel object, for example:</p>\n\n<pre><code>  ..getUserContacts(@RequestBody Mono&lt;@Valid LoginModel&gt; loginDetail) {\n      ...\n  }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3101358,"reputation":962,"user_id":2625393,"display_name":"Numichi"},"score":0,"creation_date":1615238646,"post_id":53960885,"comment_id":117625016,"body_markdown":"Not better? :) https://github.com/spring-projects/spring-boot/issues/10950#issuecomment-343516965","body":"Not better? :) <a href=\"https://github.com/spring-projects/spring-boot/issues/10950#issuecomment-343516965\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-boot/issues/&hellip;</a>"}],"tags":[],"owner":{"account_id":6426369,"reputation":1111,"user_id":7758110,"accept_rate":56,"display_name":"Chandresh Mishra"},"comment_count":1,"down_vote_count":1,"up_vote_count":3,"is_accepted":true,"score":2,"last_activity_date":1546011452,"creation_date":1546011452,"answer_id":53960885,"question_id":53887930,"body_markdown":"Nothing worked for me. So I validated it manually by using javax.validator.\r\n\r\n \r\n\r\n    @Autowired private Validator validator;\r\n    \r\n     public Flux&lt;UserContactsModel&gt; getUserContacts(@RequestBody Mono&lt;@Valid LoginModel&gt; loginDetail) {\r\n    \r\n        return loginDetail\r\n            .filter(this::validate)\r\n            .map(....);\r\n    }\r\n    \r\n     private boolean validate(LoginModel loginModel) {\r\n        \r\n        Set&lt;ConstraintViolation&lt;LoginModel&gt;&gt; constraintViolations = validator.validate(loginModel);\r\n    \r\n        if (CollectionUtils.isNotEmpty(constraintViolations)) {\r\n          StringJoiner stringJoiner = new StringJoiner(&quot; &quot;);\r\n          constraintViolations.forEach(\r\n              loginModelConstraintViolation -&gt;\r\n                  stringJoiner\r\n                      .add(loginModelConstraintViolation.getPropertyPath().toString())\r\n                      .add(&quot;:&quot;)\r\n                      .add(loginModelConstraintViolation.getMessage()));\r\n          throw new RuntimeException(stringJoiner.toString());\r\n        }\r\n    \r\n        return true;\r\n      }\r\n\r\n","title":"Bean validation is not working for spring webflux","body":"<p>Nothing worked for me. So I validated it manually by using javax.validator.</p>\n\n<pre><code>@Autowired private Validator validator;\n\n public Flux&lt;UserContactsModel&gt; getUserContacts(@RequestBody Mono&lt;@Valid LoginModel&gt; loginDetail) {\n\n    return loginDetail\n        .filter(this::validate)\n        .map(....);\n}\n\n private boolean validate(LoginModel loginModel) {\n\n    Set&lt;ConstraintViolation&lt;LoginModel&gt;&gt; constraintViolations = validator.validate(loginModel);\n\n    if (CollectionUtils.isNotEmpty(constraintViolations)) {\n      StringJoiner stringJoiner = new StringJoiner(\" \");\n      constraintViolations.forEach(\n          loginModelConstraintViolation -&gt;\n              stringJoiner\n                  .add(loginModelConstraintViolation.getPropertyPath().toString())\n                  .add(\":\")\n                  .add(loginModelConstraintViolation.getMessage()));\n      throw new RuntimeException(stringJoiner.toString());\n    }\n\n    return true;\n  }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3624367,"reputation":376,"user_id":3022395,"display_name":"md_rasler"},"score":0,"creation_date":1670605058,"post_id":70639807,"comment_id":131919593,"body_markdown":"This also worked for me.  The compilation works fine without this as annotations and classes are present, but the configuration is not configured without.  Thanks!","body":"This also worked for me.  The compilation works fine without this as annotations and classes are present, but the configuration is not configured without.  Thanks!"}],"tags":[],"owner":{"account_id":1313424,"reputation":848,"user_id":1260910,"display_name":"rmpestano"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1641719170,"creation_date":1641719170,"answer_id":70639807,"question_id":53887930,"body_markdown":"For me the `@Valid` worked out of the box, the missing piece was adding `spring-boot-starter-validation` in the classpath:\r\n\r\n      &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n      &lt;/dependency&gt;\r\n\r\n\r\n I have the exact same controller code as in this question plus a `ExceptionHandler` to handle the bean validation errors:\r\n\r\n    @ResponseBody\r\n    @ExceptionHandler(WebExchangeBindException.class)\r\n    Mono&lt;ResponseEntity&lt;List&lt;ErrorDTO&gt;&gt;&gt; invalidRequestErrorHandler(@NotNull final WebExchangeBindException e) {\r\n        log.error(&quot;Invalid request exception occurred&quot;, e);\r\n        var errors = e.getBindingResult()\r\n                .getAllErrors()\r\n                .stream()\r\n                .filter(Objects::nonNull)\r\n                .map(this::getValidationErrorMessage)\r\n                .toList();\r\n        return Mono.just(ResponseEntity.status(BAD_REQUEST)\r\n                .contentType(APPLICATION_JSON)\r\n                .body(errors));\r\n    }\r\n\r\n    @NotNull\r\n    private ErrorDTO getValidationErrorMessage(@NotNull final ObjectError error) {\r\n        final var errorMessage = new StringBuilder();\r\n        if (error instanceof FieldError fe) {\r\n            errorMessage.append(fe.getField()).append(&quot; - &quot;);\r\n        }\r\n        errorMessage.append(error.getDefaultMessage());\r\n        return new ErrorDTO()\r\n                .errorCode(GENERIC_ERROR).message(errorMessage.toString());\r\n    }","title":"Bean validation is not working for spring webflux","body":"<p>For me the <code>@Valid</code> worked out of the box, the missing piece was adding <code>spring-boot-starter-validation</code> in the classpath:</p>\n<pre><code>  &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n  &lt;/dependency&gt;\n</code></pre>\n<p>I have the exact same controller code as in this question plus a <code>ExceptionHandler</code> to handle the bean validation errors:</p>\n<pre><code>@ResponseBody\n@ExceptionHandler(WebExchangeBindException.class)\nMono&lt;ResponseEntity&lt;List&lt;ErrorDTO&gt;&gt;&gt; invalidRequestErrorHandler(@NotNull final WebExchangeBindException e) {\n    log.error(&quot;Invalid request exception occurred&quot;, e);\n    var errors = e.getBindingResult()\n            .getAllErrors()\n            .stream()\n            .filter(Objects::nonNull)\n            .map(this::getValidationErrorMessage)\n            .toList();\n    return Mono.just(ResponseEntity.status(BAD_REQUEST)\n            .contentType(APPLICATION_JSON)\n            .body(errors));\n}\n\n@NotNull\nprivate ErrorDTO getValidationErrorMessage(@NotNull final ObjectError error) {\n    final var errorMessage = new StringBuilder();\n    if (error instanceof FieldError fe) {\n        errorMessage.append(fe.getField()).append(&quot; - &quot;);\n    }\n    errorMessage.append(error.getDefaultMessage());\n    return new ErrorDTO()\n            .errorCode(GENERIC_ERROR).message(errorMessage.toString());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6894982,"reputation":1,"user_id":5297260,"display_name":"E.Bilek"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694035922,"creation_date":1694035922,"answer_id":77055402,"question_id":53887930,"body_markdown":"Use @Validated in Service class, and @Valid in Entity/DTO parameter of method what you need validation. \r\nLibs: jakarta.validation-api and spring-boot-starter-validation","title":"Bean validation is not working for spring webflux","body":"<p>Use @Validated in Service class, and @Valid in Entity/DTO parameter of method what you need validation.\nLibs: jakarta.validation-api and spring-boot-starter-validation</p>\n"}],"owner":{"account_id":6426369,"reputation":1111,"user_id":7758110,"accept_rate":56,"display_name":"Chandresh Mishra"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9763,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":53960885,"answer_count":4,"score":12,"last_activity_date":1694035922,"creation_date":1545409283,"question_id":53887930,"body_markdown":"I have refactored my code to use spring webflux but now `@Valid` stopped working.\r\nIt is not validating the request body.\r\n\r\n    @PostMapping(value = &quot;/getContactInfo&quot;,produces = &quot;application/json&quot;,consumes = &quot;application/json&quot;)\r\n    public Flux&lt;UserContactsModel&gt; getUserContacts(@Valid @RequestBody Mono&lt;LoginModel&gt; loginDetail) {\r\n    \r\n        loginDetail.log();\r\n        return contactInfoService\r\n            .getUserContacts(loginDetailApiMapper.loginModelMonoToLoginBoMono(loginDetail))\r\n            .flatMapIterable(\r\n                userContactsBO -&gt; contactInfoMapper.userContactBoToModelList(userContactsBO));\r\n    }\r\n\r\n\r\n\r\nI am getting 200 OK in place of Bad request which I am returning from the controller advice.\r\n\r\n**Edit 1:**\r\n\r\n   \r\n\r\n       import javax.validation.constraints.NotNull;\r\n       import javax.validation.constraints.Pattern;\r\n    \r\n        public class LoginModel implements Serializable {\r\n        \r\n          private String clientId;\r\n        \r\n          @Pattern(regexp = &quot;^[a-zA-Z0-9]*$&quot;, message = &quot;Login ID is invalid&quot;)\r\n          @NotNull\r\n          private String loginId;\r\n        }\r\n**update 1:**\r\nAfter changing the code like this and adding @Validated on class level\r\n\r\n    @RestController\r\n    @Validated\r\n    public class ContactInfoController implements ContactInfoApi {\r\n    public Flux&lt;UserContactsModel&gt; getUserContacts(@RequestBody  Mono&lt;@Valid  LoginModel&gt; loginDetail) {\r\n\r\nI am getting javax.validation.ConstraintDeclarationException: HV000197: No value extractor found for type parameter &#39;T&#39; of type reactor.core.publisher.Mono.","title":"Bean validation is not working for spring webflux","body":"<p>I have refactored my code to use spring webflux but now <code>@Valid</code> stopped working.\nIt is not validating the request body.</p>\n\n<pre><code>@PostMapping(value = \"/getContactInfo\",produces = \"application/json\",consumes = \"application/json\")\npublic Flux&lt;UserContactsModel&gt; getUserContacts(@Valid @RequestBody Mono&lt;LoginModel&gt; loginDetail) {\n\n    loginDetail.log();\n    return contactInfoService\n        .getUserContacts(loginDetailApiMapper.loginModelMonoToLoginBoMono(loginDetail))\n        .flatMapIterable(\n            userContactsBO -&gt; contactInfoMapper.userContactBoToModelList(userContactsBO));\n}\n</code></pre>\n\n<p>I am getting 200 OK in place of Bad request which I am returning from the controller advice.</p>\n\n<p><strong>Edit 1:</strong></p>\n\n<pre><code>   import javax.validation.constraints.NotNull;\n   import javax.validation.constraints.Pattern;\n\n    public class LoginModel implements Serializable {\n\n      private String clientId;\n\n      @Pattern(regexp = \"^[a-zA-Z0-9]*$\", message = \"Login ID is invalid\")\n      @NotNull\n      private String loginId;\n    }\n</code></pre>\n\n<p><strong>update 1:</strong>\nAfter changing the code like this and adding @Validated on class level</p>\n\n<pre><code>@RestController\n@Validated\npublic class ContactInfoController implements ContactInfoApi {\npublic Flux&lt;UserContactsModel&gt; getUserContacts(@RequestBody  Mono&lt;@Valid  LoginModel&gt; loginDetail) {\n</code></pre>\n\n<p>I am getting javax.validation.ConstraintDeclarationException: HV000197: No value extractor found for type parameter 'T' of type reactor.core.publisher.Mono.</p>\n"},{"tags":["java","xml","android-studio","android-layout"],"comments":[{"owner":{"account_id":3397419,"reputation":38710,"user_id":2850651,"display_name":"Mike M."},"score":0,"creation_date":1598126954,"post_id":63540638,"comment_id":112358598,"body_markdown":"Are you using the Calligraphy library in your project?","body":"Are you using the Calligraphy library in your project?"},{"owner":{"account_id":18826621,"reputation":55,"user_id":13731353,"display_name":"Zonaahmmm"},"score":0,"creation_date":1598127935,"post_id":63540638,"comment_id":112358837,"body_markdown":"@MikeM. Yes, I just checked it and realize &quot;import uk.co.chrisjenx.calligraphy.CalligraphyContextWrapper;\n&quot; didn&#39;t work..","body":"@MikeM. Yes, I just checked it and realize &quot;import uk.co.chrisjenx.calligraphy.CalligraphyContextWrapper; &quot; didn&#39;t work.."},{"owner":{"account_id":3397419,"reputation":38710,"user_id":2850651,"display_name":"Mike M."},"score":0,"creation_date":1598127983,"post_id":63540638,"comment_id":112358846,"body_markdown":"Yeah, it sounds like you might not have that library added properly.","body":"Yeah, it sounds like you might not have that library added properly."},{"owner":{"account_id":18826621,"reputation":55,"user_id":13731353,"display_name":"Zonaahmmm"},"score":0,"creation_date":1598127988,"post_id":63540638,"comment_id":112358848,"body_markdown":"@MikeM. &quot;import com.bumptech.glide.load.engine.bitmap_recycle.BitmapPool;\n&quot; didn&#39;t work either, but I can&#39;t find a latest version..","body":"@MikeM. &quot;import com.bumptech.glide.load.engine.bitmap_recycle.BitmapPool; &quot; didn&#39;t work either, but I can&#39;t find a latest version.."},{"owner":{"account_id":18826621,"reputation":55,"user_id":13731353,"display_name":"Zonaahmmm"},"score":0,"creation_date":1598128057,"post_id":63540638,"comment_id":112358864,"body_markdown":"@MikeM. Is it because the libraries are too old?","body":"@MikeM. Is it because the libraries are too old?"},{"owner":{"account_id":3397419,"reputation":38710,"user_id":2850651,"display_name":"Mike M."},"score":0,"creation_date":1598128109,"post_id":63540638,"comment_id":112358874,"body_markdown":"Look in your app&#39;s `build.gradle`, in the `dependencies`. Are there any errors?","body":"Look in your app&#39;s <code>build.gradle</code>, in the <code>dependencies</code>. Are there any errors?"},{"owner":{"account_id":18826621,"reputation":55,"user_id":13731353,"display_name":"Zonaahmmm"},"score":0,"creation_date":1598128536,"post_id":63540638,"comment_id":112358968,"body_markdown":"@MikeM. It looks fine. I used &quot; implementation &#39;uk.co.chrisjenx:calligraphy:2.2.0&#39;\n&quot;","body":"@MikeM. It looks fine. I used &quot; implementation &#39;uk.co.chrisjenx:calligraphy:2.2.0&#39; &quot;"},{"owner":{"account_id":3397419,"reputation":38710,"user_id":2850651,"display_name":"Mike M."},"score":0,"creation_date":1598128980,"post_id":63540638,"comment_id":112359092,"body_markdown":"Hmm, well, you might try cleaning/rebuilding your project, and Invalidate Caches/Restart. As for the library version, yeah, that is rather old, and it will likely fail on Android Pie and above, IIRC. Calligraphy had to be rewritten when the restrictions on reflection were introduced. The latest edition is 3+: https://github.com/InflationX/Calligraphy. Is this an old project that you&#39;re trying to update?","body":"Hmm, well, you might try cleaning/rebuilding your project, and Invalidate Caches/Restart. As for the library version, yeah, that is rather old, and it will likely fail on Android Pie and above, IIRC. Calligraphy had to be rewritten when the restrictions on reflection were introduced. The latest edition is 3+: <a href=\"https://github.com/InflationX/Calligraphy\" rel=\"nofollow noreferrer\">github.com/InflationX/Calligraphy</a>. Is this an old project that you&#39;re trying to update?"},{"owner":{"account_id":18826621,"reputation":55,"user_id":13731353,"display_name":"Zonaahmmm"},"score":0,"creation_date":1598130924,"post_id":63540638,"comment_id":112359566,"body_markdown":"@MikeM. Yes I&#39;m trying to make changes to an old project","body":"@MikeM. Yes I&#39;m trying to make changes to an old project"}],"owner":{"account_id":18826621,"reputation":55,"user_id":13731353,"display_name":"Zonaahmmm"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":858,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694035512,"creation_date":1598126809,"question_id":63540638,"body_markdown":"It says &quot;Android resource linking failed&quot; and **style attribute &#39;attr/fontPath&#39; not found**, my code in ```styles.xml``` file is \r\n\r\n```xml\r\n  &lt;style name=&quot;Regular&quot; parent=&quot;android:TextAppearance&quot;&gt;\r\n        &lt;item name=&quot;fontPath&quot;&gt;fonts/SourceSansPro-Regular.otf&lt;/item&gt;\r\n    &lt;/style&gt;\r\n\r\n    &lt;style name=&quot;SemiBold&quot; parent=&quot;android:TextAppearance&quot;&gt;\r\n        &lt;item name=&quot;fontPath&quot;&gt;fonts/SourceSansPro-Semibold.otf&lt;/item&gt;\r\n    &lt;/style&gt;\r\n\r\n    &lt;style name=&quot;Light&quot; parent=&quot;android:TextAppearance&quot;&gt;\r\n        &lt;item name=&quot;fontPath&quot;&gt;fonts/SourceSansPro-LightIt.otf&lt;/item&gt;\r\n    &lt;/style&gt;\r\n```\r\n\r\n\r\nI&#39;ve tried to clean the project but it didn&#39;t work","title":"Cannot resolve symbol &#39;fontPath&#39;","body":"<p>It says &quot;Android resource linking failed&quot; and <strong>style attribute 'attr/fontPath' not found</strong>, my code in <code>styles.xml</code> file is</p>\n<pre class=\"lang-xml prettyprint-override\"><code>  &lt;style name=&quot;Regular&quot; parent=&quot;android:TextAppearance&quot;&gt;\n        &lt;item name=&quot;fontPath&quot;&gt;fonts/SourceSansPro-Regular.otf&lt;/item&gt;\n    &lt;/style&gt;\n\n    &lt;style name=&quot;SemiBold&quot; parent=&quot;android:TextAppearance&quot;&gt;\n        &lt;item name=&quot;fontPath&quot;&gt;fonts/SourceSansPro-Semibold.otf&lt;/item&gt;\n    &lt;/style&gt;\n\n    &lt;style name=&quot;Light&quot; parent=&quot;android:TextAppearance&quot;&gt;\n        &lt;item name=&quot;fontPath&quot;&gt;fonts/SourceSansPro-LightIt.otf&lt;/item&gt;\n    &lt;/style&gt;\n</code></pre>\n<p>I've tried to clean the project but it didn't work</p>\n"},{"tags":["java","selenium","selenium-webdriver"],"answers":[{"comments":[{"owner":{"account_id":1916259,"reputation":4166,"user_id":1728790,"accept_rate":67,"display_name":"demouser123"},"score":0,"creation_date":1404961243,"post_id":24646756,"comment_id":38241759,"body_markdown":"Thanks Tim. This is perfect. I am kinda lame for not thinking of this control thingy.","body":"Thanks Tim. This is perfect. I am kinda lame for not thinking of this control thingy."}],"tags":[],"owner":{"account_id":4644569,"reputation":1078,"user_id":3763338,"display_name":"tim-slifer"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1404887362,"creation_date":1404887362,"answer_id":24646756,"question_id":24646302,"body_markdown":"Since what you want is a more CTRL+click type of usage scenario, I&#39;d recommend the following:\r\n\r\n    Actions actions = new Actions(driver)\r\n    actions.keyDown(Keys.CONTROL)\r\n           .click(list.get(0))\r\n           .click(list.get(4))\r\n           .keyUp(Keys.CONTROL)\r\n           .build();\r\n           .perform();\r\n\r\nWhile I&#39;ve not tested this exact code, this *should* get you down the right path.","title":"Multiple Selection Using Selenium Webdriver","body":"<p>Since what you want is a more CTRL+click type of usage scenario, I'd recommend the following:</p>\n\n<pre><code>Actions actions = new Actions(driver)\nactions.keyDown(Keys.CONTROL)\n       .click(list.get(0))\n       .click(list.get(4))\n       .keyUp(Keys.CONTROL)\n       .build();\n       .perform();\n</code></pre>\n\n<p>While I've not tested this exact code, this <em>should</em> get you down the right path.</p>\n"},{"tags":[],"owner":{"account_id":23089223,"reputation":1,"user_id":17200315,"display_name":"Krishna Krishnaaa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634724491,"creation_date":1634723055,"answer_id":69643737,"question_id":24646302,"body_markdown":"To select multiple options in the selectable:\r\n\t\t\t\t\r\n\tList&lt;WebElement&gt; Selectable = driver.findElements(By.xpath(&quot;//*[@id=&#39;selectable&#39;]/*&quot;));\r\n\tActions x = new Actions(driver);\r\n\t\r\n\tx.keyDown(Keys.CONTROL)\r\n\t .click(Selectable.get(0))\r\n\t .click(Selectable.get(4))\r\n\t .keyUp(Keys.CONTROL)\r\n\t .build().perform();","title":"Multiple Selection Using Selenium Webdriver","body":"<p>To select multiple options in the selectable:</p>\n<pre><code>List&lt;WebElement&gt; Selectable = driver.findElements(By.xpath(&quot;//*[@id='selectable']/*&quot;));\nActions x = new Actions(driver);\n\nx.keyDown(Keys.CONTROL)\n .click(Selectable.get(0))\n .click(Selectable.get(4))\n .keyUp(Keys.CONTROL)\n .build().perform();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":1,"creation_date":1692793662,"post_id":76948591,"comment_id":135672208,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76948591/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":19982432,"reputation":13,"user_id":14645242,"display_name":"Pathfinder"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694035358,"creation_date":1692650438,"answer_id":76948591,"question_id":24646302,"body_markdown":"    Actions actions = new Actions(getDriver());\r\n            List&lt;WebElement&gt; credentials= getDriver().findElements(By.cssSelector(&quot;Your locator&quot;]&quot;));\r\n            for (int i = 0; i &lt;credentials.size() ; i++) {\r\n            }\r\n            actions.keyDown(Keys.CONTROL)\r\n                    .click(credentials.get(0))\r\n                    .keyUp(Keys.CONTROL)\r\n                    .click(credentials.get(4))\r\n                    .build().perform();\r\n        }\r\n\r\nThat should help you to click on multiple options","title":"Multiple Selection Using Selenium Webdriver","body":"<pre><code>Actions actions = new Actions(getDriver());\n        List&lt;WebElement&gt; credentials= getDriver().findElements(By.cssSelector(&quot;Your locator&quot;]&quot;));\n        for (int i = 0; i &lt;credentials.size() ; i++) {\n        }\n        actions.keyDown(Keys.CONTROL)\n                .click(credentials.get(0))\n                .keyUp(Keys.CONTROL)\n                .click(credentials.get(4))\n                .build().perform();\n    }\n</code></pre>\n<p>That should help you to click on multiple options</p>\n"}],"owner":{"account_id":1916259,"reputation":4166,"user_id":1728790,"accept_rate":67,"display_name":"demouser123"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4790,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":24646756,"answer_count":3,"score":1,"last_activity_date":1694035358,"creation_date":1404885533,"question_id":24646302,"body_markdown":"I want to simulate a multiple selection scenario using Selenium webdriver, so that the user is able to select Item 1 and Item 5 (see the URL) .\r\n\r\nURL [JQuery Selectable][1]\r\n\r\nRight now I am trying to do this using the **clickAndHold** function, but when I try, it selects all the other items in between the Item 1 and Item 5.\r\n\r\nRight now this is happening\r\n\r\n![This is happening][2]\r\n\r\nI want this\r\n\r\n![I want this][3]\r\n\r\n\r\nMy code goes like this :\r\n\r\n    baseUrl=&quot;http://jqueryui.com/selectable/&quot;;\r\n\tdriver.get(baseUrl);\r\n\tdriver.switchTo().frame(0);\r\n\tList&lt;WebElement&gt; list=driver.findElements(By.cssSelector(&quot;ol#selectable *&quot;));\r\n\tActions act=new Actions(driver);\r\n\t\r\n\tact.clickAndHold(list.get(0)).clickAndHold(list.get(4)).release().build().perform();\r\n\r\nSo the mouse is not released until it gets to the fifth item in the list, which probably is the reason for selection in between. \r\n\r\nBut If I try to not release the mouse click and select the fourth item, using this code \r\n\r\n    act.clickAndHold(list.get(0)).build().perform();\r\n\tact.clickAndHold(list.get(4)).build().perform();\r\n\r\nThen I&#39;m getting the same output as the code above. What should I change here so the the items in between are not selected.\r\n\r\n\r\n  [1]: http://jqueryui.com/selectable/\r\n  [2]: http://i.stack.imgur.com/vjBKB.png\r\n  [3]: http://i.stack.imgur.com/cSxKX.png","title":"Multiple Selection Using Selenium Webdriver","body":"<p>I want to simulate a multiple selection scenario using Selenium webdriver, so that the user is able to select Item 1 and Item 5 (see the URL) .</p>\n\n<p>URL <a href=\"http://jqueryui.com/selectable/\" rel=\"nofollow noreferrer\">JQuery Selectable</a></p>\n\n<p>Right now I am trying to do this using the <strong>clickAndHold</strong> function, but when I try, it selects all the other items in between the Item 1 and Item 5.</p>\n\n<p>Right now this is happening</p>\n\n<p><img src=\"https://i.stack.imgur.com/vjBKB.png\" alt=\"This is happening\"></p>\n\n<p>I want this</p>\n\n<p><img src=\"https://i.stack.imgur.com/cSxKX.png\" alt=\"I want this\"></p>\n\n<p>My code goes like this :</p>\n\n<pre><code>baseUrl=\"http://jqueryui.com/selectable/\";\ndriver.get(baseUrl);\ndriver.switchTo().frame(0);\nList&lt;WebElement&gt; list=driver.findElements(By.cssSelector(\"ol#selectable *\"));\nActions act=new Actions(driver);\n\nact.clickAndHold(list.get(0)).clickAndHold(list.get(4)).release().build().perform();\n</code></pre>\n\n<p>So the mouse is not released until it gets to the fifth item in the list, which probably is the reason for selection in between. </p>\n\n<p>But If I try to not release the mouse click and select the fourth item, using this code </p>\n\n<pre><code>act.clickAndHold(list.get(0)).build().perform();\nact.clickAndHold(list.get(4)).build().perform();\n</code></pre>\n\n<p>Then I'm getting the same output as the code above. What should I change here so the the items in between are not selected.</p>\n"},{"tags":["java","user-interface","javafx","scaling"],"comments":[{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1694036330,"post_id":77053329,"comment_id":135840213,"body_markdown":"The concept of scaling is often confused with the concept of layout resizing.  For scaling, *everything* gets bigger or smaller when scaled up or down via a [scale transform](https://docs.oracle.com/javase/8/javafx/visual-effects-tutorial/transformation-types.htm#BABDEBGA).  But when a layout is resized, layout resizing logic adjusts the size and position of the nodes but usually does not scale them.  A text input control scaled up will have larger text. A text input control that is layout resized will have more letters, not larger letters.  All nodes are scalable, but not all are resizable.","body":"The concept of scaling is often confused with the concept of layout resizing.  For scaling, <i>everything</i> gets bigger or smaller when scaled up or down via a <a href=\"https://docs.oracle.com/javase/8/javafx/visual-effects-tutorial/transformation-types.htm#BABDEBGA\" rel=\"nofollow noreferrer\">scale transform</a>.  But when a layout is resized, layout resizing logic adjusts the size and position of the nodes but usually does not scale them.  A text input control scaled up will have larger text. A text input control that is layout resized will have more letters, not larger letters.  All nodes are scalable, but not all are resizable."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1694037107,"post_id":77053329,"comment_id":135840308,"body_markdown":"In terms of API, you can see if a node is resizable by checking [`isResizable()`](https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/Node.html#isResizable()).  For scaling you can use [scaleX/Y/Z properties](https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/Node.html#scaleXProperty()) or apply [transforms](https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/Node.html#Transformations), specifically [Scale](https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/transform/Scale.html).  To have a scaled size considered in layout calculations, wrap the node in a `Group`.","body":"In terms of API, you can see if a node is resizable by checking <a href=\"https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/Node.html#isResizable()\" rel=\"nofollow noreferrer\"><code>isResizable()</code></a>.  For scaling you can use <a href=\"https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/Node.html#scaleXProperty()\" rel=\"nofollow noreferrer\">scaleX/Y/Z properties</a> or apply <a href=\"https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/Node.html#Transformations\" rel=\"nofollow noreferrer\">transforms</a>, specifically <a href=\"https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/transform/Scale.html\" rel=\"nofollow noreferrer\">Scale</a>.  To have a scaled size considered in layout calculations, wrap the node in a <code>Group</code>."}],"answers":[{"tags":[],"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1694020961,"creation_date":1694016322,"answer_id":77053647,"question_id":77053329,"body_markdown":"There are two reasons your code doesn&#39;t work:\r\n\r\n1. `Rectangle` (and all `Shape`) instances are not [*resizable*](https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/Node.html#isResizable). This means a parent (such as `AnchorPane`) can not resize these nodes (specifically, `Rectangle.resize()` is a no-op).\r\n2. You are calling `centerPane.getHeight()` before the pane has been laid out. This means its `height` (and `width`) will be zero at that time. You really need to re-do the layout any time that width and height change.\r\n\r\nJavaFX supports a collection of `Pane` subclasses which manage layout.  (See, for example, [this tutorial](https://edencoding.com/javafx-layouts/), or the [API docs](https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/layout/package-summary.html)) for details.) Typically, if you require a layout strategy that is not supported by one of these layout panes, then you should define your own by subclassing `Region` or `Pane`. You should, at a minimum, override the `layoutChildren()` method, along with the methods to compute the min/pref/max width and height.\r\n\r\nWhether or not your actual use case warrants the amount of coding needed to do this is not clear from your question. However, here is a quick example of a container pane that centers its content and has a configurable value for determining what (linear) proportion of its size its content should occupy.\r\n\r\n```\r\npackage org.jamesd.examples.centeringpane;\r\n\r\nimport javafx.beans.property.DoubleProperty;\r\nimport javafx.beans.property.SimpleDoubleProperty;\r\nimport javafx.geometry.Orientation;\r\nimport javafx.scene.Node;\r\nimport javafx.scene.layout.Region;\r\n\r\npublic class CenteringPane extends Region {\r\n\r\n    private final Node content ;\r\n    private DoubleProperty sizeProportion = new SimpleDoubleProperty(1);\r\n\r\n    public CenteringPane(Node content) {\r\n        this.content = content;\r\n        getChildren().add(content);\r\n        sizeProportion.addListener(obs -&gt; requestLayout());\r\n    }\r\n\r\n    @Override\r\n    protected void layoutChildren() {\r\n        if (content.isManaged()) {\r\n            double w = getWidth();\r\n            double h = getHeight();\r\n            double targetWidth = (w - snappedLeftInset() - snappedRightInset()) * getSizeProportion();\r\n            double targetHeight = (h - snappedTopInset() - snappedBottomInset()) * getSizeProportion();\r\n            double x = (w - targetWidth) / 2;\r\n            double y = (h - targetHeight) / 2;\r\n            content.resizeRelocate(snapPositionX(x), snapPositionY(y), snapSizeX(targetWidth), snapSizeY(targetHeight));\r\n        }\r\n    }\r\n\r\n    public double getSizeProportion() {\r\n        return sizeProportion.get();\r\n    }\r\n\r\n    public DoubleProperty sizeProportionProperty() {\r\n        return sizeProportion;\r\n    }\r\n\r\n    public void setSizeProportion(double sizeProportion) {\r\n        this.sizeProportion.set(sizeProportion);\r\n    }\r\n\r\n    @Override\r\n    protected double computePrefWidth(double height) {\r\n        return snappedLeftInset() + snappedRightInset() + content.prefWidth(height) / getSizeProportion();\r\n    }\r\n\r\n    @Override\r\n    protected double computePrefHeight(double width) {\r\n        return snappedTopInset() + snappedBottomInset() + content.prefHeight(width) / getSizeProportion();\r\n    }\r\n\r\n    @Override\r\n    protected double computeMinWidth(double height) {\r\n        return snappedLeftInset() + snappedRightInset() + content.minWidth(height) / getSizeProportion();\r\n    }\r\n\r\n    @Override\r\n    protected double computeMinHeight(double width) {\r\n        return snappedTopInset() + snappedBottomInset() + content.minHeight(width) / getSizeProportion();\r\n    }\r\n\r\n    @Override\r\n    protected double computeMaxWidth(double height) {\r\n        return snappedLeftInset() + snappedRightInset() + content.maxWidth(height) / getSizeProportion();\r\n    }\r\n\r\n    @Override\r\n    protected double computeMaxHeight(double width) {\r\n        return snappedTopInset() + snappedBottomInset() + content.maxHeight(width) / getSizeProportion();\r\n    }\r\n\r\n    @Override\r\n    public Orientation getContentBias() {\r\n        return content.getContentBias();\r\n    }\r\n}\r\n```\r\n\r\nHere is a quick test case:\r\n\r\n```\r\npackage org.jamesd.examples.centeringpane;\r\n\r\nimport javafx.application.Application;\r\nimport javafx.geometry.Insets;\r\nimport javafx.geometry.Pos;\r\nimport javafx.scene.Scene;\r\nimport javafx.scene.control.Slider;\r\nimport javafx.scene.layout.Background;\r\nimport javafx.scene.layout.BorderPane;\r\nimport javafx.scene.layout.HBox;\r\nimport javafx.scene.layout.Pane;\r\nimport javafx.scene.paint.Color;\r\nimport javafx.stage.Stage;\r\n\r\npublic class HelloApplication extends Application {\r\n    @Override\r\n    public void start(Stage stage) {\r\n        Pane pane = new Pane();\r\n        pane.setBackground(Background.fill(Color.BLUE));\r\n        CenteringPane centeringPane = new CenteringPane(pane);\r\n\r\n        BorderPane root = new BorderPane(centeringPane);\r\n        Slider slider = new Slider(0, 1, 0.5);\r\n\r\n        centeringPane.sizeProportionProperty().bind(slider.valueProperty());\r\n        HBox controls = new HBox(5, slider);\r\n        controls.setPadding(new Insets(10));\r\n        controls.setAlignment(Pos.CENTER);\r\n        root.setTop(controls);\r\n        Scene scene = new Scene(root, 800, 500);\r\n        stage.setScene(scene);\r\n        stage.show();\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        launch();\r\n    }\r\n}\r\n```\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/OhB6g.png","title":"JavaFX AnchorPane scaling","body":"<p>There are two reasons your code doesn't work:</p>\n<ol>\n<li><code>Rectangle</code> (and all <code>Shape</code>) instances are not <a href=\"https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/Node.html#isResizable\" rel=\"nofollow noreferrer\"><em>resizable</em></a>. This means a parent (such as <code>AnchorPane</code>) can not resize these nodes (specifically, <code>Rectangle.resize()</code> is a no-op).</li>\n<li>You are calling <code>centerPane.getHeight()</code> before the pane has been laid out. This means its <code>height</code> (and <code>width</code>) will be zero at that time. You really need to re-do the layout any time that width and height change.</li>\n</ol>\n<p>JavaFX supports a collection of <code>Pane</code> subclasses which manage layout.  (See, for example, <a href=\"https://edencoding.com/javafx-layouts/\" rel=\"nofollow noreferrer\">this tutorial</a>, or the <a href=\"https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/layout/package-summary.html\" rel=\"nofollow noreferrer\">API docs</a>) for details.) Typically, if you require a layout strategy that is not supported by one of these layout panes, then you should define your own by subclassing <code>Region</code> or <code>Pane</code>. You should, at a minimum, override the <code>layoutChildren()</code> method, along with the methods to compute the min/pref/max width and height.</p>\n<p>Whether or not your actual use case warrants the amount of coding needed to do this is not clear from your question. However, here is a quick example of a container pane that centers its content and has a configurable value for determining what (linear) proportion of its size its content should occupy.</p>\n<pre><code>package org.jamesd.examples.centeringpane;\n\nimport javafx.beans.property.DoubleProperty;\nimport javafx.beans.property.SimpleDoubleProperty;\nimport javafx.geometry.Orientation;\nimport javafx.scene.Node;\nimport javafx.scene.layout.Region;\n\npublic class CenteringPane extends Region {\n\n    private final Node content ;\n    private DoubleProperty sizeProportion = new SimpleDoubleProperty(1);\n\n    public CenteringPane(Node content) {\n        this.content = content;\n        getChildren().add(content);\n        sizeProportion.addListener(obs -&gt; requestLayout());\n    }\n\n    @Override\n    protected void layoutChildren() {\n        if (content.isManaged()) {\n            double w = getWidth();\n            double h = getHeight();\n            double targetWidth = (w - snappedLeftInset() - snappedRightInset()) * getSizeProportion();\n            double targetHeight = (h - snappedTopInset() - snappedBottomInset()) * getSizeProportion();\n            double x = (w - targetWidth) / 2;\n            double y = (h - targetHeight) / 2;\n            content.resizeRelocate(snapPositionX(x), snapPositionY(y), snapSizeX(targetWidth), snapSizeY(targetHeight));\n        }\n    }\n\n    public double getSizeProportion() {\n        return sizeProportion.get();\n    }\n\n    public DoubleProperty sizeProportionProperty() {\n        return sizeProportion;\n    }\n\n    public void setSizeProportion(double sizeProportion) {\n        this.sizeProportion.set(sizeProportion);\n    }\n\n    @Override\n    protected double computePrefWidth(double height) {\n        return snappedLeftInset() + snappedRightInset() + content.prefWidth(height) / getSizeProportion();\n    }\n\n    @Override\n    protected double computePrefHeight(double width) {\n        return snappedTopInset() + snappedBottomInset() + content.prefHeight(width) / getSizeProportion();\n    }\n\n    @Override\n    protected double computeMinWidth(double height) {\n        return snappedLeftInset() + snappedRightInset() + content.minWidth(height) / getSizeProportion();\n    }\n\n    @Override\n    protected double computeMinHeight(double width) {\n        return snappedTopInset() + snappedBottomInset() + content.minHeight(width) / getSizeProportion();\n    }\n\n    @Override\n    protected double computeMaxWidth(double height) {\n        return snappedLeftInset() + snappedRightInset() + content.maxWidth(height) / getSizeProportion();\n    }\n\n    @Override\n    protected double computeMaxHeight(double width) {\n        return snappedTopInset() + snappedBottomInset() + content.maxHeight(width) / getSizeProportion();\n    }\n\n    @Override\n    public Orientation getContentBias() {\n        return content.getContentBias();\n    }\n}\n</code></pre>\n<p>Here is a quick test case:</p>\n<pre><code>package org.jamesd.examples.centeringpane;\n\nimport javafx.application.Application;\nimport javafx.geometry.Insets;\nimport javafx.geometry.Pos;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Slider;\nimport javafx.scene.layout.Background;\nimport javafx.scene.layout.BorderPane;\nimport javafx.scene.layout.HBox;\nimport javafx.scene.layout.Pane;\nimport javafx.scene.paint.Color;\nimport javafx.stage.Stage;\n\npublic class HelloApplication extends Application {\n    @Override\n    public void start(Stage stage) {\n        Pane pane = new Pane();\n        pane.setBackground(Background.fill(Color.BLUE));\n        CenteringPane centeringPane = new CenteringPane(pane);\n\n        BorderPane root = new BorderPane(centeringPane);\n        Slider slider = new Slider(0, 1, 0.5);\n\n        centeringPane.sizeProportionProperty().bind(slider.valueProperty());\n        HBox controls = new HBox(5, slider);\n        controls.setPadding(new Insets(10));\n        controls.setAlignment(Pos.CENTER);\n        root.setTop(controls);\n        Scene scene = new Scene(root, 800, 500);\n        stage.setScene(scene);\n        stage.show();\n    }\n\n    public static void main(String[] args) {\n        launch();\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/OhB6g.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OhB6g.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1694035271,"creation_date":1694018246,"answer_id":77053840,"question_id":77053329,"body_markdown":"@James_D pointed out all of the reasons not to use `Rectangle`. Here is an example that uses `Pane` and `GridPane`.\r\n\r\n## Main ##\r\n```\r\nimport javafx.application.Application;\r\nimport javafx.scene.Scene;\r\nimport javafx.scene.layout.ColumnConstraints;\r\nimport javafx.scene.layout.GridPane;\r\nimport javafx.scene.layout.Pane;\r\nimport javafx.scene.layout.RowConstraints;\r\nimport javafx.stage.Stage;\r\n\r\npublic class App extends Application {\r\n   \r\n    public static void main(String[] args) {\r\n        App.launch(args);\r\n    }\r\n    \r\n    @Override\r\n    public void start(Stage stage) {        \r\n        GridPane root = new GridPane();\r\n        ColumnConstraints columnConstraints25Percent = new ColumnConstraints();\r\n        columnConstraints25Percent.setPercentWidth(25);\r\n        ColumnConstraints columnConstraints50Percent = new ColumnConstraints();\r\n        columnConstraints50Percent.setPercentWidth(50);\r\n        root.getColumnConstraints().addAll(columnConstraints25Percent, columnConstraints50Percent, columnConstraints25Percent);\r\n        \r\n        RowConstraints rowConstraints25Percent = new RowConstraints();\r\n        rowConstraints25Percent.setPercentHeight(25);\r\n        RowConstraints rowConstraints50Percent = new RowConstraints();\r\n        rowConstraints50Percent.setPercentHeight(50);\r\n        root.getRowConstraints().addAll(rowConstraints25Percent, rowConstraints50Percent, rowConstraints25Percent);\r\n        \r\n        Pane centerPane = new Pane();\r\n        centerPane.setStyle(&quot;-fx-background-color: green&quot;);\r\n        root.add(centerPane, 1, 1);\r\n        \r\n        Scene scene = new Scene(root, 700, 700);\r\n        stage.setScene(scene);\r\n        stage.show();\r\n    }\r\n}\r\n```\r\n\r\n## Output ##\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/8fWHr.gif","title":"JavaFX AnchorPane scaling","body":"<p>@James_D pointed out all of the reasons not to use <code>Rectangle</code>. Here is an example that uses <code>Pane</code> and <code>GridPane</code>.</p>\n<h2>Main</h2>\n<pre><code>import javafx.application.Application;\nimport javafx.scene.Scene;\nimport javafx.scene.layout.ColumnConstraints;\nimport javafx.scene.layout.GridPane;\nimport javafx.scene.layout.Pane;\nimport javafx.scene.layout.RowConstraints;\nimport javafx.stage.Stage;\n\npublic class App extends Application {\n   \n    public static void main(String[] args) {\n        App.launch(args);\n    }\n    \n    @Override\n    public void start(Stage stage) {        \n        GridPane root = new GridPane();\n        ColumnConstraints columnConstraints25Percent = new ColumnConstraints();\n        columnConstraints25Percent.setPercentWidth(25);\n        ColumnConstraints columnConstraints50Percent = new ColumnConstraints();\n        columnConstraints50Percent.setPercentWidth(50);\n        root.getColumnConstraints().addAll(columnConstraints25Percent, columnConstraints50Percent, columnConstraints25Percent);\n        \n        RowConstraints rowConstraints25Percent = new RowConstraints();\n        rowConstraints25Percent.setPercentHeight(25);\n        RowConstraints rowConstraints50Percent = new RowConstraints();\n        rowConstraints50Percent.setPercentHeight(50);\n        root.getRowConstraints().addAll(rowConstraints25Percent, rowConstraints50Percent, rowConstraints25Percent);\n        \n        Pane centerPane = new Pane();\n        centerPane.setStyle(&quot;-fx-background-color: green&quot;);\n        root.add(centerPane, 1, 1);\n        \n        Scene scene = new Scene(root, 700, 700);\n        stage.setScene(scene);\n        stage.show();\n    }\n}\n</code></pre>\n<h2>Output</h2>\n<p><a href=\"https://i.stack.imgur.com/8fWHr.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8fWHr.gif\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":28852866,"reputation":35,"user_id":22098389,"display_name":"vperse"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77053647,"answer_count":2,"score":1,"last_activity_date":1694035271,"creation_date":1694013724,"question_id":77053329,"body_markdown":"&lt;br&gt;\r\nI&#39;m having trouble scaling components inside of the anchor pane relating to the size of the anchor pane.&lt;br&gt;\r\nWhat I want to achieve is a rectangle 50% x 50% the size of the anchor pane positioned at the center.\r\n\r\n\r\nI&#39;m currently trying to achieve this with this code:\r\n\r\n``` Java\r\npublic class HelloApplication extends Application {\r\n\r\n    @Override\r\n    public void start(Stage stage) throws IOException {\r\n        AnchorPane centerPane = new AnchorPane();\r\n\r\n        Rectangle rect = new Rectangle();\r\n        rect.setFill(Color.BLUE);\r\n\r\n        AnchorPane.setTopAnchor(rect, .25 * centerPane.getHeight());\r\n        AnchorPane.setBottomAnchor(rect, .25 * centerPane.getHeight());\r\n        AnchorPane.setLeftAnchor(rect, .25 * centerPane.getHeight());\r\n        AnchorPane.setRightAnchor(rect, .25 * centerPane.getHeight());\r\n\r\n        Scene scene = new Scene(centerPane, 320, 240);\r\n\r\n        stage.setTitle(&quot;Anchor Pane Scaling test&quot;);\r\n        stage.setScene(scene);\r\n        stage.show();\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        launch();\r\n    }\r\n    \r\n}\r\n```\r\n\r\nHowever I get no rectangle displayed.\r\n\r\nI want to know if there&#39;s a way to fix this approach or if there&#39;s a better way of scaling Nodes inside panes in general that I should try.","title":"JavaFX AnchorPane scaling","body":"<br>\nI'm having trouble scaling components inside of the anchor pane relating to the size of the anchor pane.<br>\nWhat I want to achieve is a rectangle 50% x 50% the size of the anchor pane positioned at the center.\n<p>I'm currently trying to achieve this with this code:</p>\n<pre><code>public class HelloApplication extends Application {\n\n    @Override\n    public void start(Stage stage) throws IOException {\n        AnchorPane centerPane = new AnchorPane();\n\n        Rectangle rect = new Rectangle();\n        rect.setFill(Color.BLUE);\n\n        AnchorPane.setTopAnchor(rect, .25 * centerPane.getHeight());\n        AnchorPane.setBottomAnchor(rect, .25 * centerPane.getHeight());\n        AnchorPane.setLeftAnchor(rect, .25 * centerPane.getHeight());\n        AnchorPane.setRightAnchor(rect, .25 * centerPane.getHeight());\n\n        Scene scene = new Scene(centerPane, 320, 240);\n\n        stage.setTitle(&quot;Anchor Pane Scaling test&quot;);\n        stage.setScene(scene);\n        stage.show();\n    }\n\n    public static void main(String[] args) {\n        launch();\n    }\n    \n}\n</code></pre>\n<p>However I get no rectangle displayed.</p>\n<p>I want to know if there's a way to fix this approach or if there's a better way of scaling Nodes inside panes in general that I should try.</p>\n"},{"tags":["java","spring","mapstruct"],"comments":[{"owner":{"account_id":1128956,"reputation":19765,"user_id":1115491,"display_name":"Filip"},"score":0,"creation_date":1577652140,"post_id":59484557,"comment_id":105217308,"body_markdown":"What does it didn&#39;t work mean? How didnthe generated code look like? What did you expect it to look like?","body":"What does it didn&#39;t work mean? How didnthe generated code look like? What did you expect it to look like?"}],"answers":[{"comments":[{"owner":{"account_id":2413662,"reputation":101,"user_id":2108223,"display_name":"Rohit V"},"score":5,"creation_date":1613096134,"post_id":59520706,"comment_id":116977759,"body_markdown":"Using `constant` directive worked for me. MapStruct is able to convert to actual type specified as a String value. e.g. `used` is assigned as false if it is of type `boolean`.\n\n```\n@Mapping(target = &quot;used&quot;, constant = &quot;false&quot;)\nMyDTO toDto(MyEntity entity);\n```","body":"Using <code>constant</code> directive worked for me. MapStruct is able to convert to actual type specified as a String value. e.g. <code>used</code> is assigned as false if it is of type <code>boolean</code>.  ``` @Mapping(target = &quot;used&quot;, constant = &quot;false&quot;) MyDTO toDto(MyEntity entity); ```"}],"tags":[],"owner":{"account_id":7673258,"reputation":1688,"user_id":6200354,"display_name":"atish.s"},"comment_count":1,"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1577633140,"creation_date":1577633140,"answer_id":59520706,"question_id":59484557,"body_markdown":"To be able to use `defaultValue`, you must specify a `source`. If the `source` is null then it will use the `defaultValue` defined. \r\n\r\nTo always assign a specific value to the target, in your case zero or false, you should then use `constant` instead.\r\n\r\nMore info on [Default values and constants][1]\r\n\r\n\r\n  [1]: https://mapstruct.org/documentation/stable/reference/html/#default-values-and-constants","title":"How to specify a default value for a boolean field using MapStruct","body":"<p>To be able to use <code>defaultValue</code>, you must specify a <code>source</code>. If the <code>source</code> is null then it will use the <code>defaultValue</code> defined. </p>\n\n<p>To always assign a specific value to the target, in your case zero or false, you should then use <code>constant</code> instead.</p>\n\n<p>More info on <a href=\"https://mapstruct.org/documentation/stable/reference/html/#default-values-and-constants\" rel=\"noreferrer\">Default values and constants</a></p>\n"}],"owner":{"account_id":416949,"reputation":2931,"user_id":792664,"accept_rate":67,"display_name":"Omtara"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39401,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":1,"score":9,"last_activity_date":1694034704,"creation_date":1577341163,"question_id":59484557,"body_markdown":"How can you specify a `defaultValue` when mapping a DTO using MapStruct? The following constructs did not work\r\n\r\n    @Mapping(target = &quot;used&quot;, defaultValue = &quot;0&quot;)\r\n    MyDTO toDto(MyEntity entity);\r\n\r\n    @Mapping(target = &quot;used&quot;, defaultValue = &quot;false&quot;)\r\n    MyDTO toDto(MyEntity entity);\r\n\r\nThe documentation shows examples for all types except booleans","title":"How to specify a default value for a boolean field using MapStruct","body":"<p>How can you specify a <code>defaultValue</code> when mapping a DTO using MapStruct? The following constructs did not work</p>\n\n<pre><code>@Mapping(target = \"used\", defaultValue = \"0\")\nMyDTO toDto(MyEntity entity);\n\n@Mapping(target = \"used\", defaultValue = \"false\")\nMyDTO toDto(MyEntity entity);\n</code></pre>\n\n<p>The documentation shows examples for all types except booleans</p>\n"},{"tags":["java","versioning","google-api-java-client"],"answers":[{"comments":[{"owner":{"account_id":254817,"reputation":28628,"user_id":534471,"accept_rate":92,"display_name":"Emanuel Moecklin"},"score":11,"creation_date":1665192611,"post_id":73081392,"comment_id":130649012,"body_markdown":"what a mess..., even the error message I got is laughable: `You are currently running with version 2.0.0 of google-api-client. You need at least version 1.15 of google-api-client to run version 1.23.0 of the Drive API library.`","body":"what a mess..., even the error message I got is laughable: <code>You are currently running with version 2.0.0 of google-api-client. You need at least version 1.15 of google-api-client to run version 1.23.0 of the Drive API library.</code>"},{"owner":{"account_id":347392,"reputation":8392,"user_id":681479,"accept_rate":62,"display_name":"Brian White"},"score":2,"creation_date":1676262287,"post_id":73081392,"comment_id":133095221,"body_markdown":"I [reported this error](https://issuetracker.google.com/issues/268844492) to Google.  I tried downgrading my api-client lib to &quot;v1.35.2&quot; in `build.gradle` but for some reason the build keeps using v2.2.0.","body":"I <a href=\"https://issuetracker.google.com/issues/268844492\" rel=\"nofollow noreferrer\">reported this error</a> to Google.  I tried downgrading my api-client lib to &quot;v1.35.2&quot; in <code>build.gradle</code> but for some reason the build keeps using v2.2.0."},{"owner":{"account_id":10196670,"reputation":478,"user_id":7528285,"display_name":"diAz"},"score":1,"creation_date":1685021946,"post_id":73081392,"comment_id":134605274,"body_markdown":"same for me for gmail api. `You are currently running with version 2.0.0 of google-api-client. You need at least version 1.31.1 of google-api-client to run version 1.32.1 of the Gmail API library.`","body":"same for me for gmail api. <code>You are currently running with version 2.0.0 of google-api-client. You need at least version 1.31.1 of google-api-client to run version 1.32.1 of the Gmail API library.</code>"},{"owner":{"account_id":236867,"reputation":97,"user_id":504648,"accept_rate":100,"display_name":"ToBe"},"score":0,"creation_date":1689109986,"post_id":73081392,"comment_id":135166308,"body_markdown":"FYI you can find a version 2.0.0 here https://github.com/googleapis/google-api-java-client-services/tree/main/clients/google-api-services-androidpublisher/v3/2.0.0 - but to be blunt the whole process of setting this up is a mess","body":"FYI you can find a version 2.0.0 here <a href=\"https://github.com/googleapis/google-api-java-client-services/tree/main/clients/google-api-services-androidpublisher/v3/2.0.0\" rel=\"nofollow noreferrer\">github.com/googleapis/google-api-java-client-services/tree/m&zwnj;&#8203;ain/&hellip;</a> - but to be blunt the whole process of setting this up is a mess"},{"owner":{"account_id":6259816,"reputation":823,"user_id":4867303,"accept_rate":75,"display_name":"CeePlusPlus"},"score":1,"creation_date":1697398309,"post_id":73081392,"comment_id":136271956,"body_markdown":"For those that got here from google like me, I was extremely confused cause mvn sorts by version I guess? https://mvnrepository.com/artifact/com.google.apis/google-api-services-drive So I thought latest version was `v3-rev197-1.25.0`.  If you CTRL+F 2023 you&#39;ll find the more up to date versions, which at this time is `v3-rev20230822-2.0.0`","body":"For those that got here from google like me, I was extremely confused cause mvn sorts by version I guess? <a href=\"https://mvnrepository.com/artifact/com.google.apis/google-api-services-drive\" rel=\"nofollow noreferrer\">mvnrepository.com/artifact/com.google.apis/&hellip;</a> So I thought latest version was <code>v3-rev197-1.25.0</code>.  If you CTRL+F 2023 you&#39;ll find the more up to date versions, which at this time is <code>v3-rev20230822-2.0.0</code>"},{"owner":{"account_id":26752,"reputation":761,"user_id":69888,"accept_rate":50,"display_name":"manuna"},"score":0,"creation_date":1697450532,"post_id":73081392,"comment_id":136277076,"body_markdown":"@CeePlusPlus it looks like they switched the naming schema from revision number to revision date. Confusing indeed.","body":"@CeePlusPlus it looks like they switched the naming schema from revision number to revision date. Confusing indeed."}],"tags":[],"owner":{"account_id":26752,"reputation":761,"user_id":69888,"accept_rate":50,"display_name":"manuna"},"comment_count":6,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1658497607,"creation_date":1658497607,"answer_id":73081392,"question_id":72204167,"body_markdown":"While it may look like common semantic versioning part signals compatibility, that doesn&#39;t seem to be the case.\r\n\r\nHowever, there is a simple way to find out which `google-api-client` version a particular `google-api-service` requires. The thing is, `google-api-service` has a dependency on `google-api-client`, which you can... right, you can find it in a POM-file! \r\n\r\nLooking at POM-files of different services, there are cases when, for example, a service version is `v3-rev20210201-1.31.0` and it depends on a client version `1.31.1`, while `v3-rev20210612-1.31.0` depends on `1.31.5`\r\n Or even worse: a service version `v3-rev20220508-1.32.1` depends on a client version `1.34.0`.","title":"Version compatibility between google-api-client and google-api-services","body":"<p>While it may look like common semantic versioning part signals compatibility, that doesn't seem to be the case.</p>\n<p>However, there is a simple way to find out which <code>google-api-client</code> version a particular <code>google-api-service</code> requires. The thing is, <code>google-api-service</code> has a dependency on <code>google-api-client</code>, which you can... right, you can find it in a POM-file!</p>\n<p>Looking at POM-files of different services, there are cases when, for example, a service version is <code>v3-rev20210201-1.31.0</code> and it depends on a client version <code>1.31.1</code>, while <code>v3-rev20210612-1.31.0</code> depends on <code>1.31.5</code>\nOr even worse: a service version <code>v3-rev20220508-1.32.1</code> depends on a client version <code>1.34.0</code>.</p>\n"},{"tags":[],"owner":{"account_id":5868667,"reputation":56,"user_id":4621678,"display_name":"Tarc&#237;sio Rosa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694034014,"creation_date":1694034014,"answer_id":77055266,"question_id":72204167,"body_markdown":"To help someone else in need, I had the same problem accessing google sheets. My solution was use the following dependency:\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.google.apis&lt;/groupId&gt;\r\n      &lt;artifactId&gt;google-api-services-sheets&lt;/artifactId&gt;\r\n      &lt;version&gt;v4-rev20230815-2.0.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nMaybe the solution for this case is the dependency:\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.google.apis&lt;/groupId&gt;\r\n      &lt;artifactId&gt;google-api-services-androidpublisher&lt;/artifactId&gt;\r\n      &lt;version&gt;v3-rev20230905-2.0.0&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"Version compatibility between google-api-client and google-api-services","body":"<p>To help someone else in need, I had the same problem accessing google sheets. My solution was use the following dependency:</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;com.google.apis&lt;/groupId&gt;\n  &lt;artifactId&gt;google-api-services-sheets&lt;/artifactId&gt;\n  &lt;version&gt;v4-rev20230815-2.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Maybe the solution for this case is the dependency:</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;com.google.apis&lt;/groupId&gt;\n  &lt;artifactId&gt;google-api-services-androidpublisher&lt;/artifactId&gt;\n  &lt;version&gt;v3-rev20230905-2.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":26752,"reputation":761,"user_id":69888,"accept_rate":50,"display_name":"manuna"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4342,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":73081392,"answer_count":2,"score":6,"last_activity_date":1694034014,"creation_date":1652284724,"question_id":72204167,"body_markdown":"There is a project which depends on ```google-api-client``` and ```google-api-services-drive```.\r\n\r\n```google-api-client``` verion looks like this: ```1.23.0```, and there is a changelog on github for this library.\r\n\r\n```google-api-services-drive``` version looks like this: ```v3-rev105-1.23.0```, and there is no clear changelog.  There is a number of different `rev` suffixes for the same version number, like `v3-rev116-1.23.0`, `v3-rev135-1.23.0`, etc. It looks like it is built weekly with an increasing revision number.\r\n\r\nThe question is: How are client and services versions compatible? Is it safe to assume, that any service with version `v3-revXXX-1.23.0` is compatible with client `1.23.0` , and any api-service with version `v3-revYYYYMMDD-1.32.1` is compatible with api-client `1.32.1` ?","title":"Version compatibility between google-api-client and google-api-services","body":"<p>There is a project which depends on <code>google-api-client</code> and <code>google-api-services-drive</code>.</p>\n<p><code>google-api-client</code> verion looks like this: <code>1.23.0</code>, and there is a changelog on github for this library.</p>\n<p><code>google-api-services-drive</code> version looks like this: <code>v3-rev105-1.23.0</code>, and there is no clear changelog.  There is a number of different <code>rev</code> suffixes for the same version number, like <code>v3-rev116-1.23.0</code>, <code>v3-rev135-1.23.0</code>, etc. It looks like it is built weekly with an increasing revision number.</p>\n<p>The question is: How are client and services versions compatible? Is it safe to assume, that any service with version <code>v3-revXXX-1.23.0</code> is compatible with client <code>1.23.0</code> , and any api-service with version <code>v3-revYYYYMMDD-1.32.1</code> is compatible with api-client <code>1.32.1</code> ?</p>\n"},{"tags":["java","kotlin","iso8583","j8583"],"comments":[{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":0,"creation_date":1694027079,"post_id":77054308,"comment_id":135838803,"body_markdown":"byte-wise and with `0x0F`?! (inspired by your username)","body":"byte-wise and with <code>0x0F</code>?! (inspired by your username)"},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":1,"creation_date":1694034086,"post_id":77054308,"comment_id":135839926,"body_markdown":"BCD text to bytes, is the same as hex text to bytes, two characters &quot;60&quot; becoming byte 0x60. So I would have expected to see `hexToBytes()`. Java 17 has a standard conversion, but see the entire https://stackoverflow.com/a/140861/984823","body":"BCD text to bytes, is the same as hex text to bytes, two characters &quot;60&quot; becoming byte 0x60. So I would have expected to see <code>hexToBytes()</code>. Java 17 has a standard conversion, but see the entire <a href=\"https://stackoverflow.com/a/140861/984823\">stackoverflow.com/a/140861/984823</a>"},{"owner":{"account_id":16877632,"reputation":2683,"user_id":12204620,"display_name":"Bitwise DEVS"},"score":0,"creation_date":1694045235,"post_id":77054308,"comment_id":135841105,"body_markdown":"@JoopEggen, ooh so the term for ASCII that is padded with 0 in order to become 2 bytes like HEX is called BCD text?","body":"@JoopEggen, ooh so the term for ASCII that is padded with 0 in order to become 2 bytes like HEX is called BCD text?"},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1694084135,"post_id":77054308,"comment_id":135846009,"body_markdown":"In BCD every digit 0-9 is stored as 4 bits in a 8 bits byte half. In hexadecimal every digit 0-9A-F is stored as 4 bits in a byte half too. So a byte 0x69 has two digits &quot;69&quot;.","body":"In BCD every digit 0-9 is stored as 4 bits in a 8 bits byte half. In hexadecimal every digit 0-9A-F is stored as 4 bits in a byte half too. So a byte 0x69 has two digits &quot;69&quot;."}],"answers":[{"tags":[],"owner":{"account_id":4205035,"reputation":1690,"user_id":3444205,"display_name":"Andr&#233;s Alcarraz"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694033683,"creation_date":1694032043,"answer_id":77055102,"question_id":77054308,"body_markdown":"You probably need [`isoRequest.setBinaryIsoHeader`](https://javadoc.io/doc/net.sf.j8583/j8583/latest/com/solab/iso8583/IsoMessage.html)\r\n\r\ne.g. (code in java):\r\n\r\n```java\r\nisoRequest.setBinaryIsoHeader(new byte[] {0x60, 0x03, 0x00, 0x00, 0x00});\r\n```\r\n\r\nThe string version sets the ASCII representation of the string characters.\r\n\r\nYou can also get the byte array from a hex string in kotlin using this answer: https://stackoverflow.com/a/76830156/3444205","title":"J8583 - Set Header in BCD","body":"<p>You probably need <a href=\"https://javadoc.io/doc/net.sf.j8583/j8583/latest/com/solab/iso8583/IsoMessage.html\" rel=\"nofollow noreferrer\"><code>isoRequest.setBinaryIsoHeader</code></a></p>\n<p>e.g. (code in java):</p>\n<pre class=\"lang-java prettyprint-override\"><code>isoRequest.setBinaryIsoHeader(new byte[] {0x60, 0x03, 0x00, 0x00, 0x00});\n</code></pre>\n<p>The string version sets the ASCII representation of the string characters.</p>\n<p>You can also get the byte array from a hex string in kotlin using this answer: <a href=\"https://stackoverflow.com/a/76830156/3444205\">https://stackoverflow.com/a/76830156/3444205</a></p>\n"}],"owner":{"account_id":16877632,"reputation":2683,"user_id":12204620,"display_name":"Bitwise DEVS"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77055102,"answer_count":1,"score":0,"last_activity_date":1694033683,"creation_date":1694023562,"question_id":77054308,"body_markdown":"How to make header in BCD rather than HEX?\r\n\r\n    val isoRequest: IsoMessage = msgFactory.newMessage(0x800)\r\n    isoRequest.isoHeader = &quot;6003000000&quot;\r\n    \r\n    log(isoRequest.writeData().bytesToHex())\r\n\r\nCurrently the above code will generate\r\n\r\n    363030333030303030300800\r\n\r\nWhat we need is something like this\r\n\r\n    60030000000800","title":"J8583 - Set Header in BCD","body":"<p>How to make header in BCD rather than HEX?</p>\n<pre><code>val isoRequest: IsoMessage = msgFactory.newMessage(0x800)\nisoRequest.isoHeader = &quot;6003000000&quot;\n\nlog(isoRequest.writeData().bytesToHex())\n</code></pre>\n<p>Currently the above code will generate</p>\n<pre><code>363030333030303030300800\n</code></pre>\n<p>What we need is something like this</p>\n<pre><code>60030000000800\n</code></pre>\n"},{"tags":["java","redirect","spring-security","oauth-2.0","keycloak"],"comments":[{"owner":{"account_id":29288272,"reputation":29,"user_id":22439310,"display_name":"MentalBoolean"},"score":0,"creation_date":1694008316,"post_id":77052524,"comment_id":135834838,"body_markdown":"Does this answer your question? [Redirect to original URL after successful authentication in Spring Security](https://stackoverflow.com/questions/71176804/redirect-to-original-url-after-successful-authentication-in-spring-security)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/71176804/redirect-to-original-url-after-successful-authentication-in-spring-security\">Redirect to original URL after successful authentication in Spring Security</a>"},{"owner":{"account_id":29379714,"reputation":21,"user_id":22510504,"display_name":"Chshaem"},"score":0,"creation_date":1694009494,"post_id":77052524,"comment_id":135835151,"body_markdown":"No, it&#39;s the other way around a decision on how to return to where you switched to authorization from. And if I have authorization from http://localhost:8080/api, then I want to return to http://localhost:8080. My authorization goes along the path /api/oauth2/login, so oauth2 returns to /api . And I need without him","body":"No, it&#39;s the other way around a decision on how to return to where you switched to authorization from. And if I have authorization from <a href=\"http://localhost:8080/api\" rel=\"nofollow noreferrer\">localhost:8080/api</a>, then I want to return to <a href=\"http://localhost:8080\" rel=\"nofollow noreferrer\">localhost:8080</a>. My authorization goes along the path /api/oauth2/login, so oauth2 returns to /api . And I need without him"},{"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"score":0,"creation_date":1694033034,"post_id":77052524,"comment_id":135839774,"body_markdown":"*At the frontend, this causes errors, how can I remove the context path /api from the redirect after authorization?* Why is that a problem. Your application is under `/api`. There is nothing under `/`. You should not redirect to an URL outside your application.","body":"<i>At the frontend, this causes errors, how can I remove the context path /api from the redirect after authorization?</i> Why is that a problem. Your application is under <code>&#47;api</code>. There is nothing under <code>&#47;</code>. You should not redirect to an URL outside your application."},{"owner":{"account_id":29379714,"reputation":21,"user_id":22510504,"display_name":"Chshaem"},"score":0,"creation_date":1694153952,"post_id":77052524,"comment_id":135856477,"body_markdown":"Yes, but on the project before me, it happened that the frontend is located under /, and calls are sent under /api, any display is still under /, they definitely won’t change, especially now there is no front-dev on the project. Therefore, everything breaks down if you remove the context path or do not remove it, but continue to return it by /api.","body":"Yes, but on the project before me, it happened that the frontend is located under /, and calls are sent under /api, any display is still under /, they definitely won’t change, especially now there is no front-dev on the project. Therefore, everything breaks down if you remove the context path or do not remove it, but continue to return it by /api."}],"owner":{"account_id":29379714,"reputation":21,"user_id":22510504,"display_name":"Chshaem"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":158,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1694033305,"creation_date":1694007955,"question_id":77052524,"body_markdown":"In my application, I have a context path `/api` and authorization with a path `/api/login/oauth2/code/keycloak` through a Keyloak. \r\n\r\nAfter authorization, there is a redirect along the path `http://localhost:8080/api`. At the frontend, this causes errors, how can I remove the context path `/api` from the redirect after authorization?\r\n\r\nHere are my settings. I tried to change the redirect path in the `oauth2Login`, the authorization endpoint, but this does not help. It only helped to put the URL after successful authorization in `defaultSuccessUrl`:\r\n\r\n```java\r\n.oauth2Login(login -&gt; login.defaultSuccessUrl(&quot;http://localhost:8080/)`\r\n```\r\n\r\nbut it always sends to the same page, that is, it is not dynamic, it will not return back to the page from which they switched to authorization     \r\n\r\n```java\r\n  http\r\n      .csrf().disable()\r\n      .authorizeHttpRequests()\r\n          .requestMatchers(matchers).permitAll()\r\n          .anyRequest().authenticated()\r\n          .and()\r\n      .httpBasic().disable()\r\n      .anonymous().disable()\r\n      .oauth2Login()\r\n          .and()\r\n      .logout(logout -&gt; logout\r\n                        .logoutSuccessHandler(oidcLogoutSuccessHandler()))\r\n      .oauth2ResourceServer()\r\n          .jwt();\r\n  return http.build();\r\n```\r\n\r\n```\r\nspring.security.oauth2.client.registration.keycloak.client-id=myClientId\r\nspring.security.oauth2.client.registration.keycloak.client-secret=myClientSecret\r\nspring.security.oauth2.client.provider.keycloak.issuer-uri=http://localhost:8080/realms/master\r\nspring.security.oauth2.resourceserver.jwt.issuer-uri=http://localhost:8080/realms/master\r\nspring.security.oauth2.client.registration.keycloak.scope=openid\r\nspring.security.oauth2.client.registration.keycloak.authorization-grant-type=authorization_code\r\nspring.security.oauth2.client.provider.keycloak.user-name-attribute=preferred_username\r\n```\r\n\r\nIf I have authorization from `http://localhost:8080/api`, then I want to return to `http://localhost:8080`, if `http://localhost:8080/somePage`, then to `http://localhost:8080/somePage`, but my authorization goes along the path `/api/oauth2/login` from default OAuth2 login settings, so OAuth2 returns to `/api`. And I need without it.","title":"How to remove context path from redirect uri after oauth2 authorization","body":"<p>In my application, I have a context path <code>/api</code> and authorization with a path <code>/api/login/oauth2/code/keycloak</code> through a Keyloak.</p>\n<p>After authorization, there is a redirect along the path <code>http://localhost:8080/api</code>. At the frontend, this causes errors, how can I remove the context path <code>/api</code> from the redirect after authorization?</p>\n<p>Here are my settings. I tried to change the redirect path in the <code>oauth2Login</code>, the authorization endpoint, but this does not help. It only helped to put the URL after successful authorization in <code>defaultSuccessUrl</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>.oauth2Login(login -&gt; login.defaultSuccessUrl(&quot;http://localhost:8080/)`\n</code></pre>\n<p>but it always sends to the same page, that is, it is not dynamic, it will not return back to the page from which they switched to authorization</p>\n<pre class=\"lang-java prettyprint-override\"><code>  http\n      .csrf().disable()\n      .authorizeHttpRequests()\n          .requestMatchers(matchers).permitAll()\n          .anyRequest().authenticated()\n          .and()\n      .httpBasic().disable()\n      .anonymous().disable()\n      .oauth2Login()\n          .and()\n      .logout(logout -&gt; logout\n                        .logoutSuccessHandler(oidcLogoutSuccessHandler()))\n      .oauth2ResourceServer()\n          .jwt();\n  return http.build();\n</code></pre>\n<pre><code>spring.security.oauth2.client.registration.keycloak.client-id=myClientId\nspring.security.oauth2.client.registration.keycloak.client-secret=myClientSecret\nspring.security.oauth2.client.provider.keycloak.issuer-uri=http://localhost:8080/realms/master\nspring.security.oauth2.resourceserver.jwt.issuer-uri=http://localhost:8080/realms/master\nspring.security.oauth2.client.registration.keycloak.scope=openid\nspring.security.oauth2.client.registration.keycloak.authorization-grant-type=authorization_code\nspring.security.oauth2.client.provider.keycloak.user-name-attribute=preferred_username\n</code></pre>\n<p>If I have authorization from <code>http://localhost:8080/api</code>, then I want to return to <code>http://localhost:8080</code>, if <code>http://localhost:8080/somePage</code>, then to <code>http://localhost:8080/somePage</code>, but my authorization goes along the path <code>/api/oauth2/login</code> from default OAuth2 login settings, so OAuth2 returns to <code>/api</code>. And I need without it.</p>\n"},{"tags":["java","hibernate","tomcat","jakarta-ee"],"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":2,"creation_date":1572822207,"post_id":58684525,"comment_id":103669911,"body_markdown":"By the way, *Java EE* is now known as *Jakarta EE* after having been donated by Oracle to the Eclipse Foundation. The handover is still in transition. But you can find the latest Javadoc for the various APIs at http://www.Jakarta.ee/","body":"By the way, <i>Java EE</i> is now known as <i>Jakarta EE</i> after having been donated by Oracle to the Eclipse Foundation. The handover is still in transition. But you can find the latest Javadoc for the various APIs at <a href=\"http://www.Jakarta.ee/\" rel=\"nofollow noreferrer\">Jakarta.ee</a>"}],"answers":[{"comments":[{"owner":{"account_id":17024957,"reputation":55,"user_id":12316464,"display_name":"poolD"},"score":1,"creation_date":1572930580,"post_id":58684647,"comment_id":103704542,"body_markdown":"Thank you, is there any source that I can check to see how specification API and implementation work together.","body":"Thank you, is there any source that I can check to see how specification API and implementation work together."},{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":2,"creation_date":1572932086,"post_id":58684647,"comment_id":103704940,"body_markdown":"@poolD That&#39;s a general question and simply explained. The *specification API* consists of the types used by the caller of the API. These types usually are mostly enums, interfaces, and abstract classes, but can be concrete classes too, e.g. for value classes. The *implementation* consists of classes implementing the API, and the caller doesn&#39;t need to use any of those classes directly, and is actually not allowed to use them.","body":"@poolD That&#39;s a general question and simply explained. The <i>specification API</i> consists of the types used by the caller of the API. These types usually are mostly enums, interfaces, and abstract classes, but can be concrete classes too, e.g. for value classes. The <i>implementation</i> consists of classes implementing the API, and the caller doesn&#39;t need to use any of those classes directly, and is actually not allowed to use them."},{"owner":{"account_id":17024957,"reputation":55,"user_id":12316464,"display_name":"poolD"},"score":1,"creation_date":1572933031,"post_id":58684647,"comment_id":103705231,"body_markdown":"Could you provide a simple example of what happens under the hood because people say for eg: if javax.persistence is used in application then reference implementation like Hibernate, TopLink  can be changed at any time without changing any app code. how does it identifies the implementation. is there any config we&#39;ll specify?","body":"Could you provide a simple example of what happens under the hood because people say for eg: if javax.persistence is used in application then reference implementation like Hibernate, TopLink  can be changed at any time without changing any app code. how does it identifies the implementation. is there any config we&#39;ll specify?"},{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":1,"creation_date":1572933880,"post_id":58684647,"comment_id":103705462,"body_markdown":"@poolD &quot;how does it identifies the implementation&quot;* As a general question, that is way too broad, since every API will resolve that in different ways. For the Servlet API, the servlet container is the one calling your code, so it creates instances of whatever implementation class it wants to, before calling your code, passing that instance to you, as the declared interface.","body":"@poolD &quot;how does it identifies the implementation&quot;* As a general question, that is way too broad, since every API will resolve that in different ways. For the Servlet API, the servlet container is the one calling your code, so it creates instances of whatever implementation class it wants to, before calling your code, passing that instance to you, as the declared interface."},{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":0,"creation_date":1572934058,"post_id":58684647,"comment_id":103705516,"body_markdown":"@poolD E.g. when Tomcat calls your `doGet(HttpServletRequest req, HttpServletResponse resp)` method, it might internally create an instance of a `TomcatRequest` class that implements the `HttpServletRequest` interface, then pass that to your code.","body":"@poolD E.g. when Tomcat calls your <code>doGet(HttpServletRequest req, HttpServletResponse resp)</code> method, it might internally create an instance of a <code>TomcatRequest</code> class that implements the <code>HttpServletRequest</code> interface, then pass that to your code."}],"tags":[],"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"comment_count":5,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1572815287,"creation_date":1572815287,"answer_id":58684647,"question_id":58684525,"body_markdown":"You need the servlet-api jar file when compiling your code, because that&#39;s where e.g. `HttpServletRequest` is. You don&#39;t need to include that jar with your application, because it is provided already by the Servlet Container you deploy your war file to, e.g. Tomcat.\r\n\r\nWith Tomcat, the *implementation* of the various servlet classes are in `catalina.jar`, at least for Tomcat 9, e.g. `ApplicationHttpRequest` is the class implementing `HttpServletRequest`. You don&#39;t need this to compile your code.","title":"Java EE Specification vs Implementation","body":"<p>You need the servlet-api jar file when compiling your code, because that's where e.g. <code>HttpServletRequest</code> is. You don't need to include that jar with your application, because it is provided already by the Servlet Container you deploy your war file to, e.g. Tomcat.</p>\n\n<p>With Tomcat, the <em>implementation</em> of the various servlet classes are in <code>catalina.jar</code>, at least for Tomcat 9, e.g. <code>ApplicationHttpRequest</code> is the class implementing <code>HttpServletRequest</code>. You don't need this to compile your code.</p>\n"},{"tags":[],"owner":{"account_id":39549,"reputation":1408,"user_id":114139,"accept_rate":100,"display_name":"Michael Zilbermann"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1694033076,"creation_date":1572816040,"answer_id":58684728,"question_id":58684525,"body_markdown":"To be accurate, Tomcat is not a fully fledged Java EE container, it only handles part of the Java EE spec (mainly servlet, jsp, jndi and a few others).\r\n\r\nAnd as Andreas wrote, you need `serlvet-api.jar` to compile your code (otherwise `HttpSerlvetRequest` will miss). But as Tomcat already provides it (as an interface) as well as an actual implementation, you should add it as a &quot;provided&quot; dependency in your maven file.","title":"Java EE Specification vs Implementation","body":"<p>To be accurate, Tomcat is not a fully fledged Java EE container, it only handles part of the Java EE spec (mainly servlet, jsp, jndi and a few others).</p>\n<p>And as Andreas wrote, you need <code>serlvet-api.jar</code> to compile your code (otherwise <code>HttpSerlvetRequest</code> will miss). But as Tomcat already provides it (as an interface) as well as an actual implementation, you should add it as a &quot;provided&quot; dependency in your maven file.</p>\n"}],"owner":{"account_id":17024957,"reputation":55,"user_id":12316464,"display_name":"poolD"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":629,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":58684647,"answer_count":2,"score":4,"last_activity_date":1694033076,"creation_date":1572814316,"question_id":58684525,"body_markdown":"I have recently started on Java EE and having a tough time understanding it. I have read some answers here on SO, but I still feel like there are some gaps in my understanding. Basically, Java EE is a specification and application servers like TOMCAT, Glassfish etc., have the concrete implementations. Also, anyone can provide implementation for EE.\r\n\r\nSo, I have downloaded `javax.sevlet-api-4.0.1-sources.jar` from Maven repo and I can see that they are just Interfaces and I assume we just use them to build the project?\r\n\r\nIn tomcat lib folder there is a `servlet-api.jar`. Is this the tomcat implementation of Servlet? And if it is, then is it possible to replace it with another servlet version implementation?\r\n\r\nNow, Hibernate is the implementation of Persistence API. If I want to use Hibernate with Tomcat. I just need to add the Hibernate related jars to my application and can use them for both build and run? Without actually getting the contract classes.\r\n","title":"Java EE Specification vs Implementation","body":"<p>I have recently started on Java EE and having a tough time understanding it. I have read some answers here on SO, but I still feel like there are some gaps in my understanding. Basically, Java EE is a specification and application servers like TOMCAT, Glassfish etc., have the concrete implementations. Also, anyone can provide implementation for EE.</p>\n<p>So, I have downloaded <code>javax.sevlet-api-4.0.1-sources.jar</code> from Maven repo and I can see that they are just Interfaces and I assume we just use them to build the project?</p>\n<p>In tomcat lib folder there is a <code>servlet-api.jar</code>. Is this the tomcat implementation of Servlet? And if it is, then is it possible to replace it with another servlet version implementation?</p>\n<p>Now, Hibernate is the implementation of Persistence API. If I want to use Hibernate with Tomcat. I just need to add the Hibernate related jars to my application and can use them for both build and run? Without actually getting the contract classes.</p>\n"},{"tags":["java","android","kotlin","view","annotations"],"answers":[{"comments":[{"owner":{"account_id":28341094,"reputation":23,"user_id":21674811,"display_name":"Илья Жиленков"},"score":0,"creation_date":1694025779,"post_id":77054316,"comment_id":135838543,"body_markdown":"I&#39;m cannot import this annotation. Compiler displaying error.\n\n`import android.view.View.Visibility // Unresolved reference: Visibility`","body":"I&#39;m cannot import this annotation. Compiler displaying error.  <code>import android.view.View.Visibility &#47;&#47; Unresolved reference: Visibility</code>"},{"owner":{"account_id":4448774,"reputation":3273,"user_id":3621353,"accept_rate":50,"display_name":"Kiryl Tkach"},"score":0,"creation_date":1694027172,"post_id":77054316,"comment_id":135838819,"body_markdown":"Ah, yes, it is marked with &quot;@hide&quot; annotation, so cannot be used. Updated the answer.","body":"Ah, yes, it is marked with &quot;@hide&quot; annotation, so cannot be used. Updated the answer."}],"tags":[],"owner":{"account_id":4448774,"reputation":3273,"user_id":3621353,"accept_rate":50,"display_name":"Kiryl Tkach"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694027182,"creation_date":1694023679,"answer_id":77054316,"question_id":77054214,"body_markdown":"Knowing that android.view.View.Visibility is marked with @hide and cannot be used in code probably the only solution is to create custom enum like \r\n\r\n    enum class Visibility(val value: Int) {\r\n        VISIBLE(View.VISIBLE), \r\n        INVISIBLE(View.INVISIBLE), \r\n        GONE(View.GONE)\r\n    }\r\n\r\nAnd use it in State class\r\n\r\n    data class State(val buttonVisibility: Visibility)","title":"Is there annotation for mark a visibility variable in android?","body":"<p>Knowing that android.view.View.Visibility is marked with @hide and cannot be used in code probably the only solution is to create custom enum like</p>\n<pre><code>enum class Visibility(val value: Int) {\n    VISIBLE(View.VISIBLE), \n    INVISIBLE(View.INVISIBLE), \n    GONE(View.GONE)\n}\n</code></pre>\n<p>And use it in State class</p>\n<pre><code>data class State(val buttonVisibility: Visibility)\n</code></pre>\n"}],"owner":{"account_id":28341094,"reputation":23,"user_id":21674811,"display_name":"Илья Жиленков"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694032642,"creation_date":1694022535,"question_id":77054214,"body_markdown":"`View.VISIBLE` and similar static visibility variables have data type as `int`, and me need forbid make values of this variables as &quot;0&quot;, &quot;1&quot; etc. This variable should take only `View.VISIBLE` and similar values. For example:\r\n\r\n```\r\n    data class State(\r\n        @SomeAnnotation val buttonVisibility: Int  \r\n    )\r\n\r\n    val state = State(0) // Compilation error\r\n    val state = State(View.GONE) // Okay\r\n```\r\n","title":"Is there annotation for mark a visibility variable in android?","body":"<p><code>View.VISIBLE</code> and similar static visibility variables have data type as <code>int</code>, and me need forbid make values of this variables as &quot;0&quot;, &quot;1&quot; etc. This variable should take only <code>View.VISIBLE</code> and similar values. For example:</p>\n<pre><code>    data class State(\n        @SomeAnnotation val buttonVisibility: Int  \n    )\n\n    val state = State(0) // Compilation error\n    val state = State(View.GONE) // Okay\n</code></pre>\n"},{"tags":["java","data-structures","hashmap"],"comments":[{"owner":{"account_id":21534,"reputation":59456,"user_id":52443,"display_name":"Welbog"},"score":5,"creation_date":1694018037,"post_id":77053810,"comment_id":135837098,"body_markdown":"`new ArrayList&lt;&gt;(int n)` does not work the way you think it does. https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/ArrayList.html#%3Cinit%3E(int)","body":"<code>new ArrayList&lt;&gt;(int n)</code> does not work the way you think it does. <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/ArrayList.html#%3Cinit%3E(int)\" rel=\"nofollow noreferrer\">docs.oracle.com/en/java/javase/17/docs/api/java.base/java/ut&zwnj;&#8203;il/&hellip;</a>"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":3,"creation_date":1694018277,"post_id":77053810,"comment_id":135837135,"body_markdown":"`new ArrayList&lt;&gt;(n.val)` creates an *empty* `ArrayList` with an initial capacity of `n.val`. Not an `ArrayList` containing `n.val`. [Documentation](https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/ArrayList.html#%3Cinit%3E(int)). Try `new ArrayList&lt;&gt;(List.of(n.val))`.","body":"<code>new ArrayList&lt;&gt;(n.val)</code> creates an <i>empty</i> <code>ArrayList</code> with an initial capacity of <code>n.val</code>. Not an <code>ArrayList</code> containing <code>n.val</code>. <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/ArrayList.html#%3Cinit%3E(int)\" rel=\"nofollow noreferrer\">Documentation</a>. Try <code>new ArrayList&lt;&gt;(List.of(n.val))</code>."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":2,"creation_date":1694018450,"post_id":77053810,"comment_id":135837170,"body_markdown":"It’s an interesting question. You may want to train creating a [mre], though.","body":"It’s an interesting question. You may want to train creating a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, though."},{"owner":{"account_id":11149567,"reputation":83,"user_id":8183261,"display_name":"Bernadette"},"score":0,"creation_date":1694018975,"post_id":77053810,"comment_id":135837284,"body_markdown":"@OleV.V. Thanks, using &quot;List.of(n.val)&quot; fixed the first approach. Still need to step through it but its is making more sense now.","body":"@OleV.V. Thanks, using &quot;List.of(n.val)&quot; fixed the first approach. Still need to step through it but its is making more sense now."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1694018776,"creation_date":1694018776,"answer_id":77053896,"question_id":77053810,"body_markdown":"`new ArrayList&lt;Integer&gt;(5)` creates a new __empty__ list with initial capacity 5, which isn&#39;t at all what you want. What you wanted was:\r\n\r\n```\r\nvar list = new ArrayList&lt;Integer&gt;();\r\nlist.add(5);\r\n```\r\n\r\nOr possibly if you want to one-liner it `new ArrayList&lt;Integer&gt;(List.of(5))`.\r\n\r\nMore generally this concept (&#39;map a key to a list of values; create the list upon inserting the first value and add to an existing list otherwise&#39;) comes a ton, and there&#39;s a nicer way to do it:\r\n\r\n```\r\nMap&lt;Integer, ArrayList&lt;Integer&gt;&gt; map = new HashMap&lt;&gt;();\r\n\r\nmap.computeIfAbsent(col, k -&gt; new ArrayList&lt;Integer&gt;()).add(n.val);\r\n```\r\n\r\nAs the name suggests, `computeIfAbsent` will run the provided lambda (the stuff after the arrow) __only__ if key `col` is absent (is not in the map at all). In this case, it runs the code, and sets it as the value to go with key `col`. The method call itself (`computeIfAbsent`) returns the generated value if that happened, or the existing value if that happened. Either way, that&#39;s the list you want to add to. Hence, one line, no need for `if` shenanigans.","title":"Why is my hashmap clearing some of its values?","body":"<p><code>new ArrayList&lt;Integer&gt;(5)</code> creates a new <strong>empty</strong> list with initial capacity 5, which isn't at all what you want. What you wanted was:</p>\n<pre><code>var list = new ArrayList&lt;Integer&gt;();\nlist.add(5);\n</code></pre>\n<p>Or possibly if you want to one-liner it <code>new ArrayList&lt;Integer&gt;(List.of(5))</code>.</p>\n<p>More generally this concept ('map a key to a list of values; create the list upon inserting the first value and add to an existing list otherwise') comes a ton, and there's a nicer way to do it:</p>\n<pre><code>Map&lt;Integer, ArrayList&lt;Integer&gt;&gt; map = new HashMap&lt;&gt;();\n\nmap.computeIfAbsent(col, k -&gt; new ArrayList&lt;Integer&gt;()).add(n.val);\n</code></pre>\n<p>As the name suggests, <code>computeIfAbsent</code> will run the provided lambda (the stuff after the arrow) <strong>only</strong> if key <code>col</code> is absent (is not in the map at all). In this case, it runs the code, and sets it as the value to go with key <code>col</code>. The method call itself (<code>computeIfAbsent</code>) returns the generated value if that happened, or the existing value if that happened. Either way, that's the list you want to add to. Hence, one line, no need for <code>if</code> shenanigans.</p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694032341,"creation_date":1694030653,"answer_id":77054962,"question_id":77053810,"body_markdown":"_&quot;... So I have this block that works, but I don&#39;t understand why the first one doesn&#39;t ...&quot;_\r\n\r\nYou&#39;ve misinterpreted the _[ArrayList](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/ArrayList.html#constructor-summary)_ constructor parameter.\r\n\r\nHere is an excerpt of the _JavaDoc_.\r\n\r\n&gt; _public ArrayList(int initialCapacity)_\r\n&gt;\r\n&gt; _Constructs an empty list with the specified initial capacity._\r\n&gt;\r\n&gt; _**Parameters**:_  \r\n&gt; _initialCapacity - the initial capacity of the list_\r\n\r\nThus, supplying an _int_ will not append the value.\r\n\r\nA quick solution to this is to wrap the value in a _[List#of](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/List.html#of(E))_ call.\r\n\r\n```java\r\nArrayList&lt;Integer&gt; array = new ArrayList&lt;&gt;(List.of(n.val));\r\n```\r\n\r\nYou can also use a class initializer, which I&#39;m failing to find a resource for.\r\n\r\n```java\r\nArrayList&lt;Integer&gt; array = new ArrayList&lt;&gt;() {{ add(n.val); }};\r\n```","title":"Why is my hashmap clearing some of its values?","body":"<p><em>&quot;... So I have this block that works, but I don't understand why the first one doesn't ...&quot;</em></p>\n<p>You've misinterpreted the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/ArrayList.html#constructor-summary\" rel=\"nofollow noreferrer\">ArrayList</a></em> constructor parameter.</p>\n<p>Here is an excerpt of the <em>JavaDoc</em>.</p>\n<blockquote>\n<p><em>public ArrayList(int initialCapacity)</em></p>\n<p><em>Constructs an empty list with the specified initial capacity.</em></p>\n<p><em><strong>Parameters</strong>:</em><br />\n<em>initialCapacity - the initial capacity of the list</em></p>\n</blockquote>\n<p>Thus, supplying an <em>int</em> will not append the value.</p>\n<p>A quick solution to this is to wrap the value in a <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/List.html#of(E)\" rel=\"nofollow noreferrer\">List#of</a></em> call.</p>\n<pre class=\"lang-java prettyprint-override\"><code>ArrayList&lt;Integer&gt; array = new ArrayList&lt;&gt;(List.of(n.val));\n</code></pre>\n<p>You can also use a class initializer, which I'm failing to find a resource for.</p>\n<pre class=\"lang-java prettyprint-override\"><code>ArrayList&lt;Integer&gt; array = new ArrayList&lt;&gt;() {{ add(n.val); }};\n</code></pre>\n"}],"owner":{"account_id":11149567,"reputation":83,"user_id":8183261,"display_name":"Bernadette"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1694032341,"creation_date":1694017944,"question_id":77053810,"body_markdown":"I am trying to create a map for a tree. It maps the column number (horizontal depth) to the list of nodes with that horizontal depth.\r\n\r\nWhen I use the below code, somehow the map gets overwritten by the else block.\r\n\r\nThe tree I am testing on:\r\nInput: `root = [3,9,20,null,null,15,7]`, from https://leetcode.com/problems/binary-tree-vertical-order-traversal/\r\n\r\n```java\r\nMap&lt;Integer, ArrayList&lt;Integer&gt;&gt; map = new HashMap&lt;&gt;();\r\nif (!map.containsKey(col)) {\r\n    ArrayList&lt;Integer&gt; array = new ArrayList&lt;&gt;(n.val);\r\n    map.put(col, array); \r\n} else {\r\n    map.get(col).add(n.val);\r\n}\r\n```\r\n\r\nOutput: ```[[],[15],[],[]]```\r\nThe other lists on the map were cleared...\r\n\r\nWhen I use this block, the map is built as expected:\r\n```java\r\nMap&lt;Integer, ArrayList&lt;Integer&gt;&gt; map = new HashMap&lt;&gt;();\r\nif (!map.containsKey(col)) {\r\n    ArrayList&lt;Integer&gt; array = new ArrayList&lt;&gt;();\r\n    map.put(col, array); \r\n}\r\nmap.get(col).add(n.val);\r\n```\r\nOutput: [[9],[3,15],[20],[7]]\r\n\r\n\r\nSo I have this block that works, but I don&#39;t understand why the first one doesn&#39;t","title":"Why is my hashmap clearing some of its values?","body":"<p>I am trying to create a map for a tree. It maps the column number (horizontal depth) to the list of nodes with that horizontal depth.</p>\n<p>When I use the below code, somehow the map gets overwritten by the else block.</p>\n<p>The tree I am testing on:\nInput: <code>root = [3,9,20,null,null,15,7]</code>, from <a href=\"https://leetcode.com/problems/binary-tree-vertical-order-traversal/\" rel=\"nofollow noreferrer\">https://leetcode.com/problems/binary-tree-vertical-order-traversal/</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;Integer, ArrayList&lt;Integer&gt;&gt; map = new HashMap&lt;&gt;();\nif (!map.containsKey(col)) {\n    ArrayList&lt;Integer&gt; array = new ArrayList&lt;&gt;(n.val);\n    map.put(col, array); \n} else {\n    map.get(col).add(n.val);\n}\n</code></pre>\n<p>Output: <code>[[],[15],[],[]]</code>\nThe other lists on the map were cleared...</p>\n<p>When I use this block, the map is built as expected:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;Integer, ArrayList&lt;Integer&gt;&gt; map = new HashMap&lt;&gt;();\nif (!map.containsKey(col)) {\n    ArrayList&lt;Integer&gt; array = new ArrayList&lt;&gt;();\n    map.put(col, array); \n}\nmap.get(col).add(n.val);\n</code></pre>\n<p>Output: [[9],[3,15],[20],[7]]</p>\n<p>So I have this block that works, but I don't understand why the first one doesn't</p>\n"},{"tags":["java","amazon-web-services","amazon-s3","aws-sdk"],"comments":[{"owner":{"account_id":112931,"reputation":77772,"user_id":297696,"accept_rate":100,"display_name":"wkl"},"score":0,"creation_date":1656306513,"post_id":72767076,"comment_id":128530163,"body_markdown":"Make sure you [have permissions to actually access the bucket and create resigned URLs](https://docs.aws.amazon.com/AmazonS3/latest/userguide/using-presigned-url.html#who-presigned-url)","body":"Make sure you <a href=\"https://docs.aws.amazon.com/AmazonS3/latest/userguide/using-presigned-url.html#who-presigned-url\" rel=\"nofollow noreferrer\">have permissions to actually access the bucket and create resigned URLs</a>"},{"owner":{"account_id":16217112,"reputation":334,"user_id":11709663,"display_name":"Sabu Shakya"},"score":0,"creation_date":1656417320,"post_id":72767076,"comment_id":128562324,"body_markdown":"@wkl Thank you for helping. It was actually permissions issue.","body":"@wkl Thank you for helping. It was actually permissions issue."}],"answers":[{"tags":[],"owner":{"account_id":25505095,"reputation":11,"user_id":19297691,"display_name":"Faisal Iqbal"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694032181,"creation_date":1694032181,"answer_id":77055118,"question_id":72767076,"body_markdown":"I guess the issue was resolved. Posting a solution for anyone&#39;s future references.\r\n\r\nThe issue that I can see with this is while creating S3Presigner instance you are not actually providing the credentials.\r\n\r\n    presigner = S3Presigner.create();\r\n\r\nIf you create presigner instance using this approach, in reality what it actually do is go through all the possible ways of creating presigner instance. For example one of the approach would be to create using IAM role, one would be get the credentials from the config and many more. But it can fail if these are not done correctly. For a better approach what we can do is to create the presigner instance similar to creating S3Client instance.\r\n\r\n    S3Presigner.builder().region(Region.of(BUCKET_REGION))\r\n\t\t\t\t.credentialsProvider(awsCredentialProvider).build();\r\n\r\nAnd the way to create awsCredentialProvider is\r\n\r\n    AwsBasicCredentials awsBasicCredentials = AwsBasicCredentials.create(SECRET_KEY, ACCESS_KEY);\r\n\t\treturn StaticCredentialsProvider.create(awsBasicCredentials);\r\n\r\nCollectively:\r\n\r\n```\r\nprivate AwsCredentialsProvider getAwsCredentialProvider() {\r\n\tAwsBasicCredentials awsBasicCredentials = AwsBasicCredentials.create(SECRET_KEY, ACCESS_KEY);\r\n\treturn StaticCredentialsProvider.create(awsBasicCredentials);\r\n}\r\n\r\npublic S3Presigner buildS3PresignerInstance(AwsCredentialsProvider awsCredentialProvider) {\r\n\treturn S3Presigner.builder().region(Region.of(BUCKET_REGION))\r\n                      .credentialsProvider(awsCredentialProvider).build();\r\n}\r\n```","title":"AWS S3 Presigned Url generated shows access denied when using AWS SDK version 2","body":"<p>I guess the issue was resolved. Posting a solution for anyone's future references.</p>\n<p>The issue that I can see with this is while creating S3Presigner instance you are not actually providing the credentials.</p>\n<pre><code>presigner = S3Presigner.create();\n</code></pre>\n<p>If you create presigner instance using this approach, in reality what it actually do is go through all the possible ways of creating presigner instance. For example one of the approach would be to create using IAM role, one would be get the credentials from the config and many more. But it can fail if these are not done correctly. For a better approach what we can do is to create the presigner instance similar to creating S3Client instance.</p>\n<pre><code>S3Presigner.builder().region(Region.of(BUCKET_REGION))\n            .credentialsProvider(awsCredentialProvider).build();\n</code></pre>\n<p>And the way to create awsCredentialProvider is</p>\n<pre><code>AwsBasicCredentials awsBasicCredentials = AwsBasicCredentials.create(SECRET_KEY, ACCESS_KEY);\n    return StaticCredentialsProvider.create(awsBasicCredentials);\n</code></pre>\n<p>Collectively:</p>\n<pre><code>private AwsCredentialsProvider getAwsCredentialProvider() {\n    AwsBasicCredentials awsBasicCredentials = AwsBasicCredentials.create(SECRET_KEY, ACCESS_KEY);\n    return StaticCredentialsProvider.create(awsBasicCredentials);\n}\n\npublic S3Presigner buildS3PresignerInstance(AwsCredentialsProvider awsCredentialProvider) {\n    return S3Presigner.builder().region(Region.of(BUCKET_REGION))\n                      .credentialsProvider(awsCredentialProvider).build();\n}\n</code></pre>\n"}],"owner":{"account_id":16217112,"reputation":334,"user_id":11709663,"display_name":"Sabu Shakya"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1346,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1694032181,"creation_date":1656304891,"question_id":72767076,"body_markdown":"I&#39;m trying to generate presigned url to get access to objects in my bucket and have used AWS SDK version 2 for it. I&#39;ve followed the process as mentioned in the [aws docs][1] .\r\n\r\nI&#39;ve used the given dependency:\r\n```xml\r\n         &lt;dependency&gt;\r\n            &lt;artifactId&gt;bom&lt;/artifactId&gt;\r\n            &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\r\n            &lt;scope&gt;import&lt;/scope&gt;\r\n            &lt;type&gt;pom&lt;/type&gt;\r\n            &lt;version&gt;2.17.136&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\r\n            &lt;artifactId&gt;s3&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n```\r\nMy source code to generate the presigned URL is given below.\r\n\r\n```java\r\n     public String getTempUrl(String keyName, Long minutes) {\r\n        try {\r\n            S3Presigner s3Presigner = connection.getS3Presigner();\r\n\r\n            GetObjectRequest getObjectRequest =\r\n                GetObjectRequest.builder()\r\n                                .bucket(s3BucketName)\r\n                                .key(keyName)\r\n                                .build();\r\n\r\n            GetObjectPresignRequest getObjectPresignRequest = GetObjectPresignRequest.builder()\r\n                                                                                     .signatureDuration(\r\n                                                                                         Duration.ofMinutes(minutes))\r\n                                                                                     .getObjectRequest(getObjectRequest)\r\n                                                                                     .build();\r\n            PresignedGetObjectRequest presignedGetObjectRequest =\r\n                s3Presigner.presignGetObject(getObjectPresignRequest);\r\n\r\n            return presignedGetObjectRequest.url().toExternalForm();\r\n        } catch (Exception ex) {\r\n            log.warn(&quot;Error downloading the document URL: {}&quot;, ex);\r\n            throw new InternalServerError(&quot;Error downloading the document URL&quot;, ex);\r\n        }\r\n```\r\n\r\n```java\r\npublic class ConnectionProvider {\r\n\r\n    private static S3Client client;\r\n    private static S3Presigner presigner;\r\n\r\n    @Inject\r\n    @Property(&quot;storage.aws.s3.access.key&quot;)\r\n    private String s3AccessKey;\r\n\r\n    @Inject\r\n    @Property(&quot;storage.aws.s3.secret.key&quot;)\r\n    private String s3SecretKey;\r\n\r\n    @Inject\r\n    @Property(&quot;storage.aws.s3.region&quot;)\r\n    protected String region;\r\n\r\n    public S3Presigner getS3Presigner() {\r\n        if (presigner == null) {\r\n\r\n            if (isNullOrEmpty(region)) {\r\n                presigner = S3Presigner.create();\r\n            }\r\n\r\n            presigner = S3Presigner.builder()\r\n                                   .region(Region.of(region))\r\n                                   .build();\r\n            return presigner;\r\n        }\r\n\r\n        return presigner;\r\n    }\r\n\r\n\r\n    public S3Client getS3Client() {\r\n        if (client == null) {\r\n\r\n            if (isNullOrEmpty(s3AccessKey) || isNullOrEmpty(s3SecretKey) || isNullOrEmpty(region)) {\r\n                client = S3Client.create();\r\n                return client;\r\n            }\r\n\r\n            AwsCredentialsProvider credential = StaticCredentialsProvider\r\n                .create(AwsBasicCredentials.create(s3AccessKey, s3SecretKey));\r\n\r\n\r\n            client = S3Client.builder()\r\n                             .region(Region.of(region))\r\n                             .credentialsProvider(credential)\r\n                             .build();\r\n\r\n            return client;\r\n        }\r\n\r\n        return client;\r\n    }\r\n}\r\n```\r\n\r\nCode to upload to s3 bucket:\r\n```java\r\n public Document upload(Document document) {\r\n        try {\r\n\r\n            S3Client s3Client = connection.getS3Client();\r\n            S3Waiter s3Waiter = s3Client.waiter();\r\n\r\n\r\n            PutObjectRequest objectRequest = PutObjectRequest.builder()\r\n                                                             .bucket(s3BucketName)\r\n                                                             .key(document.getKey())\r\n                                                             .acl(ObjectCannedACL.PRIVATE)\r\n                                                             .contentType(document.getContentType())\r\n                                                             .build();\r\n\r\n            log.info(&quot;Uploading the document with key : [{}]&quot;, document.getKey());\r\n\r\n            s3Client.putObject(objectRequest, RequestBody.fromBytes(document.getBase64EncodedFile()));\r\n\r\n            HeadObjectRequest headObjectRequest =\r\n                HeadObjectRequest.builder().bucket(s3BucketName).key(document.getKey()).build();\r\n\r\n            s3Waiter.waitUntilObjectExists(headObjectRequest);\r\n            log.info((&quot;Document with key :[{}] uploaded successfully.&quot;), document.getKey());\r\n            return document;\r\n        } catch (Exception ex) {\r\n            log.warn(&quot;Error uploading the document: {}&quot;, ex);\r\n            throw new InternalServerError(&quot;Error uploading the document&quot;, ex);\r\n        }\r\n    }\r\n```\r\nThe upload portion is working fine and it&#39;s also generating the presigned url. But when trying to access the url, I&#39;m getting access denied error.\r\n\r\n[![enter image description here][2]][2]\r\n\r\nWhen I used [AWS SDK version 1][3] dependency given below and generated url using it, the url is working fine.\r\n\r\n```xml\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\r\n            &lt;artifactId&gt;aws-java-sdk-s3&lt;/artifactId&gt;\r\n            &lt;version&gt;1.12.245&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n```\r\nI&#39;ve tried taking reference of this :\r\n\r\nhttps://stackoverflow.com/questions/48493657/aws-java-sdk-2-0-create-a-presigned-url-for-a-s3-object\r\n\r\nSo far I&#39;m not able to generate a valid presigned url using the AWS SDK version 2. Can anyone help me with it? \r\n\r\n\r\n  [1]: https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/examples-s3-presign.html\r\n  [2]: https://i.stack.imgur.com/KQiC9.png\r\n  [3]: https://docs.aws.amazon.com/AmazonS3/latest/userguide/ShareObjectPreSignedURL.html","title":"AWS S3 Presigned Url generated shows access denied when using AWS SDK version 2","body":"<p>I'm trying to generate presigned url to get access to objects in my bucket and have used AWS SDK version 2 for it. I've followed the process as mentioned in the <a href=\"https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/examples-s3-presign.html\" rel=\"nofollow noreferrer\">aws docs</a> .</p>\n<p>I've used the given dependency:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>         &lt;dependency&gt;\n            &lt;artifactId&gt;bom&lt;/artifactId&gt;\n            &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\n            &lt;scope&gt;import&lt;/scope&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n            &lt;version&gt;2.17.136&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\n            &lt;artifactId&gt;s3&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>My source code to generate the presigned URL is given below.</p>\n<pre class=\"lang-java prettyprint-override\"><code>     public String getTempUrl(String keyName, Long minutes) {\n        try {\n            S3Presigner s3Presigner = connection.getS3Presigner();\n\n            GetObjectRequest getObjectRequest =\n                GetObjectRequest.builder()\n                                .bucket(s3BucketName)\n                                .key(keyName)\n                                .build();\n\n            GetObjectPresignRequest getObjectPresignRequest = GetObjectPresignRequest.builder()\n                                                                                     .signatureDuration(\n                                                                                         Duration.ofMinutes(minutes))\n                                                                                     .getObjectRequest(getObjectRequest)\n                                                                                     .build();\n            PresignedGetObjectRequest presignedGetObjectRequest =\n                s3Presigner.presignGetObject(getObjectPresignRequest);\n\n            return presignedGetObjectRequest.url().toExternalForm();\n        } catch (Exception ex) {\n            log.warn(&quot;Error downloading the document URL: {}&quot;, ex);\n            throw new InternalServerError(&quot;Error downloading the document URL&quot;, ex);\n        }\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class ConnectionProvider {\n\n    private static S3Client client;\n    private static S3Presigner presigner;\n\n    @Inject\n    @Property(&quot;storage.aws.s3.access.key&quot;)\n    private String s3AccessKey;\n\n    @Inject\n    @Property(&quot;storage.aws.s3.secret.key&quot;)\n    private String s3SecretKey;\n\n    @Inject\n    @Property(&quot;storage.aws.s3.region&quot;)\n    protected String region;\n\n    public S3Presigner getS3Presigner() {\n        if (presigner == null) {\n\n            if (isNullOrEmpty(region)) {\n                presigner = S3Presigner.create();\n            }\n\n            presigner = S3Presigner.builder()\n                                   .region(Region.of(region))\n                                   .build();\n            return presigner;\n        }\n\n        return presigner;\n    }\n\n\n    public S3Client getS3Client() {\n        if (client == null) {\n\n            if (isNullOrEmpty(s3AccessKey) || isNullOrEmpty(s3SecretKey) || isNullOrEmpty(region)) {\n                client = S3Client.create();\n                return client;\n            }\n\n            AwsCredentialsProvider credential = StaticCredentialsProvider\n                .create(AwsBasicCredentials.create(s3AccessKey, s3SecretKey));\n\n\n            client = S3Client.builder()\n                             .region(Region.of(region))\n                             .credentialsProvider(credential)\n                             .build();\n\n            return client;\n        }\n\n        return client;\n    }\n}\n</code></pre>\n<p>Code to upload to s3 bucket:</p>\n<pre class=\"lang-java prettyprint-override\"><code> public Document upload(Document document) {\n        try {\n\n            S3Client s3Client = connection.getS3Client();\n            S3Waiter s3Waiter = s3Client.waiter();\n\n\n            PutObjectRequest objectRequest = PutObjectRequest.builder()\n                                                             .bucket(s3BucketName)\n                                                             .key(document.getKey())\n                                                             .acl(ObjectCannedACL.PRIVATE)\n                                                             .contentType(document.getContentType())\n                                                             .build();\n\n            log.info(&quot;Uploading the document with key : [{}]&quot;, document.getKey());\n\n            s3Client.putObject(objectRequest, RequestBody.fromBytes(document.getBase64EncodedFile()));\n\n            HeadObjectRequest headObjectRequest =\n                HeadObjectRequest.builder().bucket(s3BucketName).key(document.getKey()).build();\n\n            s3Waiter.waitUntilObjectExists(headObjectRequest);\n            log.info((&quot;Document with key :[{}] uploaded successfully.&quot;), document.getKey());\n            return document;\n        } catch (Exception ex) {\n            log.warn(&quot;Error uploading the document: {}&quot;, ex);\n            throw new InternalServerError(&quot;Error uploading the document&quot;, ex);\n        }\n    }\n</code></pre>\n<p>The upload portion is working fine and it's also generating the presigned url. But when trying to access the url, I'm getting access denied error.</p>\n<p><a href=\"https://i.stack.imgur.com/KQiC9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KQiC9.png\" alt=\"enter image description here\" /></a></p>\n<p>When I used <a href=\"https://docs.aws.amazon.com/AmazonS3/latest/userguide/ShareObjectPreSignedURL.html\" rel=\"nofollow noreferrer\">AWS SDK version 1</a> dependency given below and generated url using it, the url is working fine.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>        &lt;dependency&gt;\n            &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\n            &lt;artifactId&gt;aws-java-sdk-s3&lt;/artifactId&gt;\n            &lt;version&gt;1.12.245&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>I've tried taking reference of this :</p>\n<p><a href=\"https://stackoverflow.com/questions/48493657/aws-java-sdk-2-0-create-a-presigned-url-for-a-s3-object\">AWS Java SDK 2.0 create a presigned URL for a S3 object</a></p>\n<p>So far I'm not able to generate a valid presigned url using the AWS SDK version 2. Can anyone help me with it?</p>\n"},{"tags":["java","spring","maven"],"comments":[{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1546787902,"post_id":54062210,"comment_id":94958877,"body_markdown":"Always when you have a null pointer exception find out what variable is null.  That helps you pinpoint the problem.","body":"Always when you have a null pointer exception find out what variable is null.  That helps you pinpoint the problem."}],"answers":[{"comments":[{"owner":{"account_id":6679591,"reputation":233,"user_id":5153230,"display_name":"Nishi Bansal"},"score":0,"creation_date":1546784647,"post_id":54062312,"comment_id":94957945,"body_markdown":"When I autowired jdbcUserDAO in userController class, then I am getting below error: `Context initialization failed\norg.springframework.beans.factory.UnsatisfiedDependencyException:Error creating bean with name &#39;userController&#39;: Unsatisfied dependency expressed through field &#39;jdbcUserDAO&#39;: No qualifying bean of type [***.JdbcUserDAO] found for dependency [***.JdbcUserDAO]: expected at least 1 bean which qualifies as autowire candidate for this dependency.Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)};exception is NoSuchBeanDefinitionException`","body":"When I autowired jdbcUserDAO in userController class, then I am getting below error: <code>Context initialization failed org.springframework.beans.factory.UnsatisfiedDependencyExcep&zwnj;&#8203;tion:Error creating bean with name &#39;userController&#39;: Unsatisfied dependency expressed through field &#39;jdbcUserDAO&#39;: No qualifying bean of type [***.JdbcUserDAO] found for dependency [***.JdbcUserDAO]: expected at least 1 bean which qualifies as autowire candidate for this dependency.Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(req&zwnj;&#8203;uired=true)};excepti&zwnj;&#8203;on is NoSuchBeanDefinitionException</code>"},{"owner":{"account_id":2793517,"reputation":3819,"user_id":2403253,"accept_rate":88,"display_name":"Justin Albano"},"score":0,"creation_date":1546784989,"post_id":54062312,"comment_id":94958062,"body_markdown":"@NishiBansal It looks like Spring is not accounting for your `application_config.xml`. I have updated the answer to include a fix.","body":"@NishiBansal It looks like Spring is not accounting for your <code>application_config.xml</code>. I have updated the answer to include a fix."}],"tags":[],"owner":{"account_id":2793517,"reputation":3819,"user_id":2403253,"accept_rate":88,"display_name":"Justin Albano"},"comment_count":2,"down_vote_count":0,"up_vote_count":21,"is_accepted":true,"score":21,"last_activity_date":1546784944,"creation_date":1546783673,"answer_id":54062312,"question_id":54062210,"body_markdown":"Although you have defined the `jdbcUserDAO` bean, you have not wired it into the `UserController` class. This causes a `NullPointerException` because the `jdbcUserDAO` field is `null`, which results in the exception when `jdbcUserDAO.getAllUsers()` is called. To solve this, annotate the `jdbcUserDAO` setter in the `UserController` with `@Autowired`, as in:\r\n\r\n    @RestController\r\n    public class UserController {\r\n    \r\n        private JdbcUserDAO jdbcUserDAO;\r\n    \r\n        public JdbcUserDAO getJdbcUserDAO() {\r\n            return jdbcUserDAO;\r\n        }\r\n    \r\n        @Autowired\r\n        public void setJdbcUserDAO(JdbcUserDAO jdbcUserDAO) {\r\n            this.jdbcUserDAO = jdbcUserDAO;\r\n        }\r\n    \r\n        @RequestMapping(&quot;/&quot;)\r\n        @ResponseBody\r\n        public String welcome() {\r\n            return &quot;Welcome to RestTemplate Example.&quot;;\r\n        }\r\n    \r\n        @RequestMapping(value=&quot;/users&quot;, method=RequestMethod.GET, produces=MediaType.APPLICATION_JSON_VALUE)\r\n        @ResponseBody   \r\n        public List&lt;User&gt; getAllUsers() {\r\n            System.out.println(&quot;jdbcUserDAO&quot;+jdbcUserDAO);\r\n            List&lt;User&gt; userList = jdbcUserDAO.getAllUsers();\r\n            System.out.println(userList);\r\n            return userList;\r\n        }\r\n    \r\n    }\r\n\r\nThe `@Autowired` annotation tells Spring that a bean that matches the interface of the parameter for the setter (in this case, `JdbcUserDAO`) should be injected into the setter, which results in the `jdbcUserDAO` field being set to your `JdbcUserDAO` bean defined in `application_config.xml`.\r\n\r\nYou could also simplify your `UserController` and annotate the field (removing the getter and setter):\r\n\r\n    @RestController\r\n    public class UserController {\r\n    \r\n        @Autowired\r\n        private JdbcUserDAO jdbcUserDAO;\r\n    \r\n        @RequestMapping(&quot;/&quot;)\r\n        @ResponseBody\r\n        public String welcome() {\r\n            return &quot;Welcome to RestTemplate Example.&quot;;\r\n        }\r\n    \r\n        @RequestMapping(value=&quot;/users&quot;, method=RequestMethod.GET, produces=MediaType.APPLICATION_JSON_VALUE)\r\n        @ResponseBody   \r\n        public List&lt;User&gt; getAllUsers() {\r\n            System.out.println(&quot;jdbcUserDAO&quot;+jdbcUserDAO);\r\n            List&lt;User&gt; userList = jdbcUserDAO.getAllUsers();\r\n            System.out.println(userList);\r\n            return userList;\r\n        }\r\n    \r\n    }\r\n\r\nFor more information, see [Guide to Spring @Autowired][1].\r\n\r\n----------\r\n\r\nIt also looks like your `application_config.xml` is not being included in Spring&#39;s application context. To include this XML file, change your `ApplicationConfiguration` class to resemble the following:\r\n\r\n    @ComponentScan(basePackages = {&quot;com.ganeshTrading.riceAppService&quot;})\r\n    @Configuration\r\n    @EnableWebMvc\r\n    @ImportResource(&quot;classpath:/path/to/application_config.xml&quot;)\r\n    public class ApplicationConfiguration {\r\n    \r\n    }\r\n\r\nNote that `classpath:/path/to/application_config.xml` is an example and the actual location of your `application_config.xml` file should be used instead.\r\n\r\n  [1]: https://www.baeldung.com/spring-autowire","title":"Servlet.service() for servlet [dispatcher] in context with path [/***] threw exception","body":"<p>Although you have defined the <code>jdbcUserDAO</code> bean, you have not wired it into the <code>UserController</code> class. This causes a <code>NullPointerException</code> because the <code>jdbcUserDAO</code> field is <code>null</code>, which results in the exception when <code>jdbcUserDAO.getAllUsers()</code> is called. To solve this, annotate the <code>jdbcUserDAO</code> setter in the <code>UserController</code> with <code>@Autowired</code>, as in:</p>\n\n<pre><code>@RestController\npublic class UserController {\n\n    private JdbcUserDAO jdbcUserDAO;\n\n    public JdbcUserDAO getJdbcUserDAO() {\n        return jdbcUserDAO;\n    }\n\n    @Autowired\n    public void setJdbcUserDAO(JdbcUserDAO jdbcUserDAO) {\n        this.jdbcUserDAO = jdbcUserDAO;\n    }\n\n    @RequestMapping(\"/\")\n    @ResponseBody\n    public String welcome() {\n        return \"Welcome to RestTemplate Example.\";\n    }\n\n    @RequestMapping(value=\"/users\", method=RequestMethod.GET, produces=MediaType.APPLICATION_JSON_VALUE)\n    @ResponseBody   \n    public List&lt;User&gt; getAllUsers() {\n        System.out.println(\"jdbcUserDAO\"+jdbcUserDAO);\n        List&lt;User&gt; userList = jdbcUserDAO.getAllUsers();\n        System.out.println(userList);\n        return userList;\n    }\n\n}\n</code></pre>\n\n<p>The <code>@Autowired</code> annotation tells Spring that a bean that matches the interface of the parameter for the setter (in this case, <code>JdbcUserDAO</code>) should be injected into the setter, which results in the <code>jdbcUserDAO</code> field being set to your <code>JdbcUserDAO</code> bean defined in <code>application_config.xml</code>.</p>\n\n<p>You could also simplify your <code>UserController</code> and annotate the field (removing the getter and setter):</p>\n\n<pre><code>@RestController\npublic class UserController {\n\n    @Autowired\n    private JdbcUserDAO jdbcUserDAO;\n\n    @RequestMapping(\"/\")\n    @ResponseBody\n    public String welcome() {\n        return \"Welcome to RestTemplate Example.\";\n    }\n\n    @RequestMapping(value=\"/users\", method=RequestMethod.GET, produces=MediaType.APPLICATION_JSON_VALUE)\n    @ResponseBody   \n    public List&lt;User&gt; getAllUsers() {\n        System.out.println(\"jdbcUserDAO\"+jdbcUserDAO);\n        List&lt;User&gt; userList = jdbcUserDAO.getAllUsers();\n        System.out.println(userList);\n        return userList;\n    }\n\n}\n</code></pre>\n\n<p>For more information, see <a href=\"https://www.baeldung.com/spring-autowire\" rel=\"noreferrer\">Guide to Spring @Autowired</a>.</p>\n\n<hr>\n\n<p>It also looks like your <code>application_config.xml</code> is not being included in Spring's application context. To include this XML file, change your <code>ApplicationConfiguration</code> class to resemble the following:</p>\n\n<pre><code>@ComponentScan(basePackages = {\"com.ganeshTrading.riceAppService\"})\n@Configuration\n@EnableWebMvc\n@ImportResource(\"classpath:/path/to/application_config.xml\")\npublic class ApplicationConfiguration {\n\n}\n</code></pre>\n\n<p>Note that <code>classpath:/path/to/application_config.xml</code> is an example and the actual location of your <code>application_config.xml</code> file should be used instead.</p>\n"},{"tags":[],"owner":{"account_id":17733622,"reputation":11,"user_id":12875553,"display_name":"ozz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694031830,"creation_date":1694031682,"answer_id":77055073,"question_id":54062210,"body_markdown":"This worked for me all I had to do was go to my Controller class and put @Autowired on top of my private StudentInfoService studentInfoService;\r\n\r\nAlso, you can make your instance of the class final instead of putting @Autowired, do private final StudentInfoService studentInfoService;\r\nSO just put final.","title":"Servlet.service() for servlet [dispatcher] in context with path [/***] threw exception","body":"<p>This worked for me all I had to do was go to my Controller class and put @Autowired on top of my private StudentInfoService studentInfoService;</p>\n<p>Also, you can make your instance of the class final instead of putting @Autowired, do private final StudentInfoService studentInfoService;\nSO just put final.</p>\n"}],"owner":{"account_id":6679591,"reputation":233,"user_id":5153230,"display_name":"Nishi Bansal"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":234577,"favorite_count":0,"down_vote_count":1,"up_vote_count":23,"accepted_answer_id":54062312,"answer_count":2,"score":22,"last_activity_date":1694031830,"creation_date":1546783029,"question_id":54062210,"body_markdown":"I am getting below error while creating spring maven rest webservice. When trying to call DAO class with bean name defined in application_config.xml, getting NullPointerException\r\n\r\n    SEVERE: Servlet.service() for servlet [dispatcher] in context with path [/riceAppService] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause\r\n    java.lang.NullPointerException\r\n    \tat com.ganeshTrading.riceAppService.controller.UserController.getAllUsers(UserController.java:46)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:114)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:827)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:738)\r\n    \tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:897)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:970)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:861)\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:622)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:846)\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:292)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n    \tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:212)\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:141)\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)\r\n    \tat org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:616)\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:528)\r\n    \tat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1099)\r\n    \tat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:670)\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1520)\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1476)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n    \tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n    \tat java.lang.Thread.run(Thread.java:748)\r\n\r\nHere, is my code\r\n\r\n**UserController.java**\r\n\r\n        @RestController\r\n    public class UserController {\r\n    \r\n    \tprivate JdbcUserDAO jdbcUserDAO;\r\n    \r\n    \t\r\n    \tpublic JdbcUserDAO getJdbcUserDAO() {\r\n    \t\treturn jdbcUserDAO;\r\n    \t}\r\n    \r\n    \tpublic void setJdbcUserDAO(JdbcUserDAO jdbcUserDAO) {\r\n    \t\tthis.jdbcUserDAO = jdbcUserDAO;\r\n    \t}\r\n    \r\n    \t@RequestMapping(&quot;/&quot;)\r\n        @ResponseBody\r\n        public String welcome() {\r\n            return &quot;Welcome to RestTemplate Example.&quot;;\r\n        }\r\n    \t\r\n    \t@RequestMapping(value=&quot;/users&quot;, method=RequestMethod.GET, produces=MediaType.APPLICATION_JSON_VALUE)\r\n    \t@ResponseBody\t\r\n    \tpublic List&lt;User&gt; getAllUsers() {\r\n    \t\tSystem.out.println(&quot;jdbcUserDAO&quot;+jdbcUserDAO);\r\n    \t\tList&lt;User&gt; userList = jdbcUserDAO.getAllUsers();\r\n    \t\tSystem.out.println(userList);\r\n    \t\treturn userList;\r\n    \t}\r\n    \r\n    }\r\n\r\n**UserDAO.java**\r\n\r\n    public interface UserDAO {\r\n    \r\n    \tpublic List&lt;User&gt; getAllUsers();\r\n    }\r\n\r\n**JdbcUserDAO.java**\r\n\r\n    public class JdbcUserDAO implements UserDAO {\r\n    \r\n    \tDataSource dataSource;\r\n    \t\r\n    \t\r\n    \tpublic void setDataSource(DataSource dataSource) {\r\n    \t\tthis.dataSource = dataSource;\r\n    \t}\r\n    \r\n    \r\n    \t@Override\r\n    \tpublic List&lt;User&gt; getAllUsers() {\r\n    \t\tString sql = &quot;select * from customer&quot;;\r\n    \t\tJdbcTemplate jdbcTemplate = new JdbcTemplate(dataSource);\r\n    \t\tSystem.out.println(&quot;getJdbcTemplate() &quot;+jdbcTemplate);\r\n    \t\tList&lt;User&gt; userList = jdbcTemplate.query(sql, new UserMapper());\r\n    \t\treturn userList;\r\n    \t}\r\n    \r\n    }\r\n\r\n**servlet-context.xml**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; \r\n    xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n    xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;\r\n     xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; \r\n     xsi:schemaLocation=&quot; http://www.springframework.org/schema/beans  \r\n     http://www.springframework.org/schema/beans/spring-beans-4.3.xsd \r\n     http://www.springframework.org/schema/context \r\n     http://www.springframework.org/schema/context/spring-context-4.3.xsd\r\n     http://www.springframework.org/schema/mvc \r\n     http://www.springframework.org/schema/mvc/spring-mvc-4.3.xsd&quot;&gt;\r\n    \r\n    \r\n    \r\n    &lt;context:annotation-config /&gt;\r\n    &lt;mvc:annotation-driven /&gt;\r\n    \r\n    &lt;import resource=&quot;classpath:application_config.xml&quot; /&gt; \r\n    &lt;context:component-scan base-package=&quot;com.ganeshTrading.riceAppService&quot; /&gt;\r\n    \r\n    &lt;/beans&gt;\r\n\r\n**application_config.xml**\r\n\r\n        &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n    \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\r\n    \thttp://www.springframework.org/schema/beans/spring-beans-4.3.xsd&quot;&gt;\r\n        \r\n          \r\n        &lt;bean id=&quot;jdbcUserDAO&quot; class=&quot;com.ganeshTrading.riceAppService.dao.impl.JdbcUserDAO&quot;&gt;\r\n       \t\t&lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt;\r\n        &lt;/bean&gt;\r\n       \r\n       &lt;bean id=&quot;dataSource&quot; class=&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;&gt;\r\n       \t&lt;property name=&quot;driverClassName&quot; value=&quot;com.mysql.jdbc.Driver&quot;&gt;&lt;/property&gt;\r\n       \t&lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/ganeshricetrading&quot;&gt;&lt;/property&gt;\r\n       \t&lt;property name=&quot;username&quot; value=&quot;root&quot;&gt;&lt;/property&gt;\r\n       \t&lt;property name=&quot;password&quot; value=&quot;sql&quot;&gt;&lt;/property&gt;\r\n       &lt;/bean&gt;    \r\n        \r\n    &lt;/beans&gt;\r\n\r\n**web.xml**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    \r\n    &lt;web-app xmlns:xsi=&quot;w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;xmlns.jcp.org/xml/ns/javaee&quot; xsi:schemaLocation=&quot;xmlns.jcp.org/xml/ns/javaee xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd&quot; id=&quot;WebApp_ID&quot; version=&quot;3.1&quot;&gt;\r\n          &lt;display-name&gt;Archetype Created Web Application&lt;/display-name&gt;\r\n      &lt;servlet&gt;\r\n      \t&lt;servlet-name&gt;appServlet&lt;/servlet-name&gt;\r\n      \t&lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\r\n      \t&lt;init-param&gt;\r\n      \t\t&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\r\n      \t\t&lt;param-value&gt;/WEB-INF/servlet-context.xml&lt;/param-value&gt;\r\n      \t&lt;/init-param&gt;\r\n      \t&lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\r\n      &lt;/servlet&gt;\r\n      &lt;servlet-mapping&gt;\r\n      \t&lt;servlet-name&gt;appServlet&lt;/servlet-name&gt;\r\n      \t&lt;url-pattern&gt;/&lt;/url-pattern&gt;\r\n      &lt;/servlet-mapping&gt;\r\n    &lt;/web-app&gt;\r\n\r\n**ApplicationConfiguration.java**\r\n\r\n    @ComponentScan(basePackages = {&quot;com.ganeshTrading.riceAppService&quot;})\r\n    @Configuration\r\n    @EnableWebMvc\r\n    public class ApplicationConfiguration {\r\n    \r\n    }\r\n\r\nWhat is wrong with my code?","title":"Servlet.service() for servlet [dispatcher] in context with path [/***] threw exception","body":"<p>I am getting below error while creating spring maven rest webservice. When trying to call DAO class with bean name defined in application_config.xml, getting NullPointerException</p>\n<pre><code>SEVERE: Servlet.service() for servlet [dispatcher] in context with path [/riceAppService] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause\njava.lang.NullPointerException\n    at com.ganeshTrading.riceAppService.controller.UserController.getAllUsers(UserController.java:46)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:114)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:827)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:738)\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:897)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:970)\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:861)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:622)\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:846)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:292)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:212)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:141)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)\n    at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:616)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:528)\n    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1099)\n    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:670)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1520)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1476)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.lang.Thread.run(Thread.java:748)\n</code></pre>\n<p>Here, is my code</p>\n<p><strong>UserController.java</strong></p>\n<pre><code>    @RestController\npublic class UserController {\n\n    private JdbcUserDAO jdbcUserDAO;\n\n    \n    public JdbcUserDAO getJdbcUserDAO() {\n        return jdbcUserDAO;\n    }\n\n    public void setJdbcUserDAO(JdbcUserDAO jdbcUserDAO) {\n        this.jdbcUserDAO = jdbcUserDAO;\n    }\n\n    @RequestMapping(&quot;/&quot;)\n    @ResponseBody\n    public String welcome() {\n        return &quot;Welcome to RestTemplate Example.&quot;;\n    }\n    \n    @RequestMapping(value=&quot;/users&quot;, method=RequestMethod.GET, produces=MediaType.APPLICATION_JSON_VALUE)\n    @ResponseBody   \n    public List&lt;User&gt; getAllUsers() {\n        System.out.println(&quot;jdbcUserDAO&quot;+jdbcUserDAO);\n        List&lt;User&gt; userList = jdbcUserDAO.getAllUsers();\n        System.out.println(userList);\n        return userList;\n    }\n\n}\n</code></pre>\n<p><strong>UserDAO.java</strong></p>\n<pre><code>public interface UserDAO {\n\n    public List&lt;User&gt; getAllUsers();\n}\n</code></pre>\n<p><strong>JdbcUserDAO.java</strong></p>\n<pre><code>public class JdbcUserDAO implements UserDAO {\n\n    DataSource dataSource;\n    \n    \n    public void setDataSource(DataSource dataSource) {\n        this.dataSource = dataSource;\n    }\n\n\n    @Override\n    public List&lt;User&gt; getAllUsers() {\n        String sql = &quot;select * from customer&quot;;\n        JdbcTemplate jdbcTemplate = new JdbcTemplate(dataSource);\n        System.out.println(&quot;getJdbcTemplate() &quot;+jdbcTemplate);\n        List&lt;User&gt; userList = jdbcTemplate.query(sql, new UserMapper());\n        return userList;\n    }\n\n}\n</code></pre>\n<p><strong>servlet-context.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; \nxmlns:context=&quot;http://www.springframework.org/schema/context&quot;\nxmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;\n xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; \n xsi:schemaLocation=&quot; http://www.springframework.org/schema/beans  \n http://www.springframework.org/schema/beans/spring-beans-4.3.xsd \n http://www.springframework.org/schema/context \n http://www.springframework.org/schema/context/spring-context-4.3.xsd\n http://www.springframework.org/schema/mvc \n http://www.springframework.org/schema/mvc/spring-mvc-4.3.xsd&quot;&gt;\n\n\n\n&lt;context:annotation-config /&gt;\n&lt;mvc:annotation-driven /&gt;\n\n&lt;import resource=&quot;classpath:application_config.xml&quot; /&gt; \n&lt;context:component-scan base-package=&quot;com.ganeshTrading.riceAppService&quot; /&gt;\n\n&lt;/beans&gt;\n</code></pre>\n<p><strong>application_config.xml</strong></p>\n<pre><code>    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\n    http://www.springframework.org/schema/beans/spring-beans-4.3.xsd&quot;&gt;\n    \n      \n    &lt;bean id=&quot;jdbcUserDAO&quot; class=&quot;com.ganeshTrading.riceAppService.dao.impl.JdbcUserDAO&quot;&gt;\n        &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt;\n    &lt;/bean&gt;\n   \n   &lt;bean id=&quot;dataSource&quot; class=&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;&gt;\n    &lt;property name=&quot;driverClassName&quot; value=&quot;com.mysql.jdbc.Driver&quot;&gt;&lt;/property&gt;\n    &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/ganeshricetrading&quot;&gt;&lt;/property&gt;\n    &lt;property name=&quot;username&quot; value=&quot;root&quot;&gt;&lt;/property&gt;\n    &lt;property name=&quot;password&quot; value=&quot;sql&quot;&gt;&lt;/property&gt;\n   &lt;/bean&gt;    \n    \n&lt;/beans&gt;\n</code></pre>\n<p><strong>web.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;web-app xmlns:xsi=&quot;w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;xmlns.jcp.org/xml/ns/javaee&quot; xsi:schemaLocation=&quot;xmlns.jcp.org/xml/ns/javaee xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd&quot; id=&quot;WebApp_ID&quot; version=&quot;3.1&quot;&gt;\n      &lt;display-name&gt;Archetype Created Web Application&lt;/display-name&gt;\n  &lt;servlet&gt;\n    &lt;servlet-name&gt;appServlet&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n        &lt;param-value&gt;/WEB-INF/servlet-context.xml&lt;/param-value&gt;\n    &lt;/init-param&gt;\n    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n  &lt;/servlet&gt;\n  &lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;appServlet&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n  &lt;/servlet-mapping&gt;\n&lt;/web-app&gt;\n</code></pre>\n<p><strong>ApplicationConfiguration.java</strong></p>\n<pre><code>@ComponentScan(basePackages = {&quot;com.ganeshTrading.riceAppService&quot;})\n@Configuration\n@EnableWebMvc\npublic class ApplicationConfiguration {\n\n}\n</code></pre>\n<p>What is wrong with my code?</p>\n"},{"tags":["java","arrays","hashmap","java-8","java-stream"],"comments":[{"owner":{"account_id":2478127,"reputation":19514,"user_id":2158288,"display_name":"ZhongYu"},"score":3,"creation_date":1485815177,"post_id":41946327,"comment_id":71073389,"body_markdown":"better just use good old `for` loop:)","body":"better just use good old <code>for</code> loop:)"},{"owner":{"account_id":9553438,"reputation":3539,"user_id":7096763,"display_name":"MikaelF"},"score":2,"creation_date":1485834025,"post_id":41946327,"comment_id":71078450,"body_markdown":"You might find what you&#39;re looking for here: [Collect successive pairs from a stream](http://stackoverflow.com/questions/20470010/collect-successive-pairs-from-a-stream).","body":"You might find what you&#39;re looking for here: <a href=\"http://stackoverflow.com/questions/20470010/collect-successive-pairs-from-a-stream\">Collect successive pairs from a stream</a>."},{"owner":{"account_id":453872,"reputation":316,"user_id":851116,"display_name":"Yang Hailong"},"score":0,"creation_date":1502167131,"post_id":41946327,"comment_id":78078149,"body_markdown":"Reference https://stackoverflow.com/questions/31693781/convert-string-array-to-map-using-java-8-lambda-expressions","body":"Reference <a href=\"https://stackoverflow.com/questions/31693781/convert-string-array-to-map-using-java-8-lambda-expressions\" title=\"convert string array to map using java 8 lambda expressions\">stackoverflow.com/questions/31693781/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":4120139,"reputation":1,"user_id":3380739,"display_name":"user_3380739"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1674194856,"creation_date":1485815898,"answer_id":41946663,"question_id":41946327,"body_markdown":"Here is my idea by JDK 8 stream:\r\n\r\n    public static &lt;K, V&gt; Map&lt;K, V&gt; toMap(final Object... entries) {\r\n        // Requirements:\r\n        // entries must be K1, V1, K2, V2, .... ( even length )\r\n        if (entries.length % 2 == 1) {\r\n            throw new IllegalArgumentException(&quot;Invalid entries&quot;);\r\n        }\r\n\r\n        final Map&lt;K, V&gt; map = new HashMap&lt;&gt;((int) (entries.length / 2 * 1.25 + 1));\r\n        IntStream.range(0, entries.length / 2).forEach(i -&gt; map.put((K) entries[i * 2], (V) entries[i * 2 + 1]));\r\n        return map;\r\n\r\n        // OR: \r\n        //    return IntStream.range(0, entries.length / 2).boxed().reduce(new HashMap&lt;K, V&gt;(), (m, i) -&gt; {\r\n        //        m.put((K) entries[i * 2], (V) entries[i * 2 + 1]);\r\n        //        return m;\r\n        //    }, (a, b) -&gt; {\r\n        //        a.putAll(b);\r\n        //        return b;\r\n        //    });\r\n    }\r\n\r\nIf you don&#39;t mind use third-party library [abacus-common][1], the code could be simplified to:\r\n\r\n    public static &lt;K, V&gt; Map&lt;K, V&gt; toMap2(final Object... entries) {\r\n        // Requirements:\r\n        // entries must be K1, V1, K2, V2, .... ( even length )\r\n        if (entries.length % 2 == 1) {\r\n            throw new IllegalArgumentException(&quot;Invalid entries&quot;);\r\n        }\r\n\r\n        return Stream.of(entries).split0(2).toMap(e -&gt; (K) e.get(0), e -&gt; (V) e.get(1));\r\n    }\r\n\r\nAnd I think the most efficient way to do it is by for loop, if you not particularly pursue using Stream API\r\n\r\n    public static &lt;K, V&gt; Map&lt;K, V&gt; toMap3(final Object... entries) {\r\n        // Requirements:\r\n        // entries must be K1, V1, K2, V2, .... ( even length )\r\n        if (entries.length % 2 == 1) {\r\n            throw new IllegalArgumentException(&quot;Invalid entries&quot;);\r\n        }\r\n\r\n        final Map&lt;K, V&gt; map = new HashMap&lt;&gt;((int) (entries.length / 2 * 1.25 + 1));\r\n\r\n        for (int i = 0, len = entries.length; i &lt; len; i++) {\r\n            map.put((K) entries[i], (V) entries[++i]);\r\n        }\r\n\r\n        return map;\r\n\r\n        // OR just call the method in abacus-common.       \r\n        // return N.asMap(entries);\r\n    }\r\n\r\n  [1]: https://github.com/landawn/abacus-common","title":"How to convert Array to HashMap using Java 8 Stream","body":"<p>Here is my idea by JDK 8 stream:</p>\n<pre><code>public static &lt;K, V&gt; Map&lt;K, V&gt; toMap(final Object... entries) {\n    // Requirements:\n    // entries must be K1, V1, K2, V2, .... ( even length )\n    if (entries.length % 2 == 1) {\n        throw new IllegalArgumentException(&quot;Invalid entries&quot;);\n    }\n\n    final Map&lt;K, V&gt; map = new HashMap&lt;&gt;((int) (entries.length / 2 * 1.25 + 1));\n    IntStream.range(0, entries.length / 2).forEach(i -&gt; map.put((K) entries[i * 2], (V) entries[i * 2 + 1]));\n    return map;\n\n    // OR: \n    //    return IntStream.range(0, entries.length / 2).boxed().reduce(new HashMap&lt;K, V&gt;(), (m, i) -&gt; {\n    //        m.put((K) entries[i * 2], (V) entries[i * 2 + 1]);\n    //        return m;\n    //    }, (a, b) -&gt; {\n    //        a.putAll(b);\n    //        return b;\n    //    });\n}\n</code></pre>\n<p>If you don't mind use third-party library <a href=\"https://github.com/landawn/abacus-common\" rel=\"nofollow noreferrer\">abacus-common</a>, the code could be simplified to:</p>\n<pre><code>public static &lt;K, V&gt; Map&lt;K, V&gt; toMap2(final Object... entries) {\n    // Requirements:\n    // entries must be K1, V1, K2, V2, .... ( even length )\n    if (entries.length % 2 == 1) {\n        throw new IllegalArgumentException(&quot;Invalid entries&quot;);\n    }\n\n    return Stream.of(entries).split0(2).toMap(e -&gt; (K) e.get(0), e -&gt; (V) e.get(1));\n}\n</code></pre>\n<p>And I think the most efficient way to do it is by for loop, if you not particularly pursue using Stream API</p>\n<pre><code>public static &lt;K, V&gt; Map&lt;K, V&gt; toMap3(final Object... entries) {\n    // Requirements:\n    // entries must be K1, V1, K2, V2, .... ( even length )\n    if (entries.length % 2 == 1) {\n        throw new IllegalArgumentException(&quot;Invalid entries&quot;);\n    }\n\n    final Map&lt;K, V&gt; map = new HashMap&lt;&gt;((int) (entries.length / 2 * 1.25 + 1));\n\n    for (int i = 0, len = entries.length; i &lt; len; i++) {\n        map.put((K) entries[i], (V) entries[++i]);\n    }\n\n    return map;\n\n    // OR just call the method in abacus-common.       \n    // return N.asMap(entries);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3619169,"reputation":9458,"user_id":3018377,"accept_rate":64,"display_name":"LHA"},"score":0,"creation_date":1485872395,"post_id":41946690,"comment_id":71098442,"body_markdown":"Thank you. I still prefer passing keys, values instead of Pair.","body":"Thank you. I still prefer passing keys, values instead of Pair."}],"tags":[],"owner":{"account_id":6874,"reputation":2729,"user_id":11699,"accept_rate":71,"display_name":"Michael Bar-Sinai"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1485816024,"creation_date":1485816024,"answer_id":41946690,"question_id":41946327,"body_markdown":"Getting exactly what you want will probably not work for maps whose key type differs from their value type. This is because Java&#39;s variable arity declaration (the `Object... entries` part) supports only one type.\r\n\r\nSome options come to mind:\r\n\r\n1. You could do the checks dynamically and throw an illegal argument exception if the values don&#39;t match. But you&#39;ll lose the compiler type-checking.\r\n\r\n2. You could define a `Pair` class, and play a bit with static import to get almost what you want:\r\n\r\n\r\ne.g.: \r\n\r\n    class Pair&lt;K,V&gt; {\r\n        final K k;\r\n        final V v;\r\n        Pair( K ak, V av) {\r\n            k=ak;\r\n            v=av;\r\n        }\r\n        static &lt;A,B&gt; Pair&lt;A,B&gt; p(A a, B b) {\r\n            return new Pair(a,b);\r\n        }\r\n    }\r\n    \r\n    public class JavaTest8 {\r\n        \r\n        &lt;K,V&gt; Map&lt;K,V&gt; toMap( Pair&lt;K,V&gt;... pairs ) {\r\n            return Arrays.stream(pairs).collect(Collectors.toMap(p-&gt;p.k, p-&gt;p.v));\r\n        }\r\n        \r\n        public static void main(String[] args) {\r\n            // Usage\r\n            Map&lt;String,Integer&gt; sti = toMap( p(&quot;A&quot;,1), p(&quot;B&quot;,2) );\r\n            Map&lt;Integer,Boolean&gt; itb = toMap( p(1,true), p(42,false) );\r\n        }\r\n    }\r\n","title":"How to convert Array to HashMap using Java 8 Stream","body":"<p>Getting exactly what you want will probably not work for maps whose key type differs from their value type. This is because Java's variable arity declaration (the <code>Object... entries</code> part) supports only one type.</p>\n\n<p>Some options come to mind:</p>\n\n<ol>\n<li><p>You could do the checks dynamically and throw an illegal argument exception if the values don't match. But you'll lose the compiler type-checking.</p></li>\n<li><p>You could define a <code>Pair</code> class, and play a bit with static import to get almost what you want:</p></li>\n</ol>\n\n<p>e.g.: </p>\n\n<pre><code>class Pair&lt;K,V&gt; {\n    final K k;\n    final V v;\n    Pair( K ak, V av) {\n        k=ak;\n        v=av;\n    }\n    static &lt;A,B&gt; Pair&lt;A,B&gt; p(A a, B b) {\n        return new Pair(a,b);\n    }\n}\n\npublic class JavaTest8 {\n\n    &lt;K,V&gt; Map&lt;K,V&gt; toMap( Pair&lt;K,V&gt;... pairs ) {\n        return Arrays.stream(pairs).collect(Collectors.toMap(p-&gt;p.k, p-&gt;p.v));\n    }\n\n    public static void main(String[] args) {\n        // Usage\n        Map&lt;String,Integer&gt; sti = toMap( p(\"A\",1), p(\"B\",2) );\n        Map&lt;Integer,Boolean&gt; itb = toMap( p(1,true), p(42,false) );\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3619169,"reputation":9458,"user_id":3018377,"accept_rate":64,"display_name":"LHA"},"score":0,"creation_date":1485872384,"post_id":41946744,"comment_id":71098431,"body_markdown":"Thank you. I still prefer passing keys, values instead of Map.Entry.","body":"Thank you. I still prefer passing keys, values instead of Map.Entry."}],"tags":[],"owner":{"account_id":1622089,"reputation":17709,"user_id":1498427,"accept_rate":89,"display_name":"catch23"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1485816605,"creation_date":1485816262,"answer_id":41946744,"question_id":41946327,"body_markdown":"You can use something like map literals.  \r\nFor achieving this you can use a factory method:\r\n\r\n    // Creates a map from a list of entries\r\n    @SafeVarargs\r\n    public static &lt;K, V&gt; Map&lt;K, V&gt; mapOf(Map.Entry&lt;K, V&gt;... entries) {\r\n        LinkedHashMap&lt;K, V&gt; map = new LinkedHashMap&lt;&gt;();\r\n        for (Map.Entry&lt;K, V&gt; entry : entries) {\r\n            map.put(entry.getKey(), entry.getValue());\r\n        }\r\n        return map;\r\n    }\r\n    \r\n    // Creates a map entry\r\n    public static &lt;K, V&gt; Map.Entry&lt;K, V&gt; entry(K key, V value) {\r\n        return new AbstractMap.SimpleEntry&lt;&gt;(key, value);\r\n    }\r\n\r\nFinally, you can do something like following:\r\n\r\n    public static void main(String[] args) {\r\n        Map&lt;String, Integer&gt; map = mapOf(entry(&quot;a&quot;, 1), entry(&quot;b&quot;, 2), entry(&quot;c&quot;, 3));\r\n        System.out.println(map);\r\n    }\r\n\r\n**Output:**\r\n\r\n&gt;{a=1, b=2, c=3}\r\n\r\nI hope that this gives to you the right way.","title":"How to convert Array to HashMap using Java 8 Stream","body":"<p>You can use something like map literals.<br>\nFor achieving this you can use a factory method:</p>\n\n<pre><code>// Creates a map from a list of entries\n@SafeVarargs\npublic static &lt;K, V&gt; Map&lt;K, V&gt; mapOf(Map.Entry&lt;K, V&gt;... entries) {\n    LinkedHashMap&lt;K, V&gt; map = new LinkedHashMap&lt;&gt;();\n    for (Map.Entry&lt;K, V&gt; entry : entries) {\n        map.put(entry.getKey(), entry.getValue());\n    }\n    return map;\n}\n\n// Creates a map entry\npublic static &lt;K, V&gt; Map.Entry&lt;K, V&gt; entry(K key, V value) {\n    return new AbstractMap.SimpleEntry&lt;&gt;(key, value);\n}\n</code></pre>\n\n<p>Finally, you can do something like following:</p>\n\n<pre><code>public static void main(String[] args) {\n    Map&lt;String, Integer&gt; map = mapOf(entry(\"a\", 1), entry(\"b\", 2), entry(\"c\", 3));\n    System.out.println(map);\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<blockquote>\n  <p>{a=1, b=2, c=3}</p>\n</blockquote>\n\n<p>I hope that this gives to you the right way.</p>\n"},{"tags":[],"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"comment_count":0,"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1485862424,"creation_date":1485862122,"answer_id":41956412,"question_id":41946327,"body_markdown":"You may use\r\n\r\n    public static &lt;K, V&gt; Map&lt;K, V&gt; toMap(Object... entries) {\r\n        if(entries.length % 2 == 1)\r\n            throw new IllegalArgumentException(&quot;Invalid entries&quot;);\r\n        return (Map&lt;K, V&gt;)IntStream.range(0, entries.length/2).map(i -&gt; i*2)\r\n            .collect(HashMap::new, (m,i)-&gt;m.put(entries[i], entries[i+1]), Map::putAll);\r\n    }\r\nbut it will give you a (founded) *unchecked* warning. Your method can’t hold the promise to return a correctly typed `Map&lt;K, V&gt;` for an array of arbitrary objects and, even worse, it will not fail with an exception, but silently return an inconsistent map if you pass in objects of the wrong type.\r\n\r\nA cleaner, commonly used, solution is\r\n\r\n    public static &lt;K, V&gt; Map&lt;K, V&gt; toMap(\r\n                                   Class&lt;K&gt; keyType, Class&lt;V&gt; valueType, Object... entries) {\r\n        if(entries.length % 2 == 1)\r\n            throw new IllegalArgumentException(&quot;Invalid entries&quot;);\r\n        return IntStream.range(0, entries.length/2).map(i -&gt; i*2)\r\n            .collect(HashMap::new,\r\n                     (m,i)-&gt;m.put(keyType.cast(entries[i]), valueType.cast(entries[i+1])),\r\n                     Map::putAll);\r\n    }\r\nThis can be compiled without a warning, as the correctness will be checked at runtime. The calling code has to be adapted:\r\n\r\n    Map&lt;String, Integer&gt; map1 = toMap(String.class, Integer.class, &quot;k1&quot;, 1, &quot;k2&quot;, 2);\r\n    Map&lt;String, String&gt; map2 = toMap(\r\n                               String.class, String.class, &quot;k1&quot;, &quot;v1&quot;, &quot;k2&quot;, &quot;v2&quot;, &quot;k3&quot;, &quot;v3&quot;);\r\n\r\nBesides the need to specify the actual types as class literals, it has the disadvantage of not supporting generic key or value types (as they can’t be expressed as `Class`) and still having no compile-time safety, only a runtime check.\r\n\r\n---\r\n\r\nIt’s worth [looking at Java&#160;9](http://download.java.net/java/jdk9/docs/api/?java/util/Map.html). There, you will be able to do:\r\n\r\n    Map&lt;String, Integer&gt; map1 = Map.of(&quot;k1&quot;, 1, &quot;k2&quot;, 2);\r\n    Map&lt;String, String&gt;  map2 = Map.of(&quot;k1&quot;, &quot;v1&quot;, &quot;k2&quot;, &quot;v2&quot;, &quot;k3&quot;, &quot;v3&quot;);\r\n\r\nThis will create an *immutable* map of an unspecified type, rather than a `HashMap`, but the interesting point is the API.\r\n\r\nThere is a method `&lt;K,V&gt; Map.Entry&lt;K,V&gt;\tentry(K k, V v)` which can be combined with  \r\n`&lt;K,V&gt; Map&lt;K,V&gt;\tofEntries(Map.Entry&lt;? extends K,? extends V&gt;... entries)` to create a map of a variable length (varargs are still limited to 255 parameters, though).\r\n\r\nYou can implement a similar thing:\r\n\r\n    public static &lt;K,V&gt; Map.Entry&lt;K,V&gt; entry(K k, V v) {\r\n        return new AbstractMap.SimpleImmutableEntry&lt;&gt;(k, v);\r\n    }\r\n    public static &lt;K,V&gt; Map&lt;K,V&gt; ofEntries(Map.Entry&lt;? extends K,? extends V&gt;... entries) {\r\n        return Arrays.stream(entries)\r\n            .collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue));\r\n    }\r\nThe convenience method(s) `of` are implemented the only way, this can be done with type safety: as overloaded methods with different numbers of arguments, like\r\n\r\n    public static &lt;K,V&gt; Map&lt;K,V&gt; of() {\r\n        return new HashMap&lt;&gt;();// or Collections.emptyMap() to create immutable maps\r\n    }\r\n    static &lt;K,V&gt; Map&lt;K,V&gt; of(K k1, V v1) {\r\n        return ofEntries(entry(k1, v1));\r\n    }\r\n    static &lt;K,V&gt; Map&lt;K,V&gt; of(K k1, V v1, K k2, V v2) {\r\n        return ofEntries(entry(k1, v1), entry(k2, v2));\r\n    }\r\n    static &lt;K,V&gt; Map&lt;K,V&gt; of(K k1, V v1, K k2, V v2, K k3, V v3) {\r\n        return ofEntries(entry(k1, v1), entry(k2, v2), entry(k3, v3));\r\n    }\r\n    static &lt;K,V&gt; Map&lt;K,V&gt; of(K k1, V v1, K k2, V v2, K k3, V v3, K k4, V v4) {\r\n        return ofEntries(entry(k1, v1), entry(k2, v2), entry(k3, v3), entry(k4, v4));\r\n    }\t\r\n    static &lt;K,V&gt; Map&lt;K,V&gt; of(K k1, V v1, K k2, V v2, K k3, V v3, K k4, V v4, K k5, V v5) {\r\n        return ofEntries(entry(k1, v1), entry(k2, v2), entry(k3, v3), entry(k4, v4));\r\n    }\t\r\n(Java&#160;9 makes the cut at ten mappings, if you have more, you have to use the `ofEntries(entry(k1, v1), …)` variant).\r\n\r\nIf you follow this pattern, you should keep your `toMap` name or use just `map`, rather than calling at “`of`”, as you are not writing the `Map` interface.\r\n\r\nThese overloads might not look very elegant, but they solve all problems. You can write the code just as in your question, without specifying `Class` objects, but gain compile-time type safety and even rejection of attempts to call it with an odd number of arguments.\r\n\r\nYou have to make a cut at a certain number of parameters, but, as already noted, even varargs do not support unlimited parameters. And the `ofEntries(entry(…), …)` form isn’t so bad for larger maps.\r\n\r\n---\r\n\r\nThe collector `Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue)` returns an unspecified map type, which might even be immutable (though it’s a `HashMap`in the current version). If you want to have a guaranty that a `HashMap` instance is returned, you have to use `Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue, (v1,v2)-&gt;{throw new IllegalArgumentException(&quot;duplicate key&quot;);}, HashMap::new)` instead.","title":"How to convert Array to HashMap using Java 8 Stream","body":"<p>You may use</p>\n\n<pre><code>public static &lt;K, V&gt; Map&lt;K, V&gt; toMap(Object... entries) {\n    if(entries.length % 2 == 1)\n        throw new IllegalArgumentException(\"Invalid entries\");\n    return (Map&lt;K, V&gt;)IntStream.range(0, entries.length/2).map(i -&gt; i*2)\n        .collect(HashMap::new, (m,i)-&gt;m.put(entries[i], entries[i+1]), Map::putAll);\n}\n</code></pre>\n\n<p>but it will give you a (founded) <em>unchecked</em> warning. Your method can’t hold the promise to return a correctly typed <code>Map&lt;K, V&gt;</code> for an array of arbitrary objects and, even worse, it will not fail with an exception, but silently return an inconsistent map if you pass in objects of the wrong type.</p>\n\n<p>A cleaner, commonly used, solution is</p>\n\n<pre><code>public static &lt;K, V&gt; Map&lt;K, V&gt; toMap(\n                               Class&lt;K&gt; keyType, Class&lt;V&gt; valueType, Object... entries) {\n    if(entries.length % 2 == 1)\n        throw new IllegalArgumentException(\"Invalid entries\");\n    return IntStream.range(0, entries.length/2).map(i -&gt; i*2)\n        .collect(HashMap::new,\n                 (m,i)-&gt;m.put(keyType.cast(entries[i]), valueType.cast(entries[i+1])),\n                 Map::putAll);\n}\n</code></pre>\n\n<p>This can be compiled without a warning, as the correctness will be checked at runtime. The calling code has to be adapted:</p>\n\n<pre><code>Map&lt;String, Integer&gt; map1 = toMap(String.class, Integer.class, \"k1\", 1, \"k2\", 2);\nMap&lt;String, String&gt; map2 = toMap(\n                           String.class, String.class, \"k1\", \"v1\", \"k2\", \"v2\", \"k3\", \"v3\");\n</code></pre>\n\n<p>Besides the need to specify the actual types as class literals, it has the disadvantage of not supporting generic key or value types (as they can’t be expressed as <code>Class</code>) and still having no compile-time safety, only a runtime check.</p>\n\n<hr>\n\n<p>It’s worth <a href=\"http://download.java.net/java/jdk9/docs/api/?java/util/Map.html\" rel=\"noreferrer\">looking at Java 9</a>. There, you will be able to do:</p>\n\n<pre><code>Map&lt;String, Integer&gt; map1 = Map.of(\"k1\", 1, \"k2\", 2);\nMap&lt;String, String&gt;  map2 = Map.of(\"k1\", \"v1\", \"k2\", \"v2\", \"k3\", \"v3\");\n</code></pre>\n\n<p>This will create an <em>immutable</em> map of an unspecified type, rather than a <code>HashMap</code>, but the interesting point is the API.</p>\n\n<p>There is a method <code>&lt;K,V&gt; Map.Entry&lt;K,V&gt; entry(K k, V v)</code> which can be combined with<br>\n<code>&lt;K,V&gt; Map&lt;K,V&gt; ofEntries(Map.Entry&lt;? extends K,? extends V&gt;... entries)</code> to create a map of a variable length (varargs are still limited to 255 parameters, though).</p>\n\n<p>You can implement a similar thing:</p>\n\n<pre><code>public static &lt;K,V&gt; Map.Entry&lt;K,V&gt; entry(K k, V v) {\n    return new AbstractMap.SimpleImmutableEntry&lt;&gt;(k, v);\n}\npublic static &lt;K,V&gt; Map&lt;K,V&gt; ofEntries(Map.Entry&lt;? extends K,? extends V&gt;... entries) {\n    return Arrays.stream(entries)\n        .collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue));\n}\n</code></pre>\n\n<p>The convenience method(s) <code>of</code> are implemented the only way, this can be done with type safety: as overloaded methods with different numbers of arguments, like</p>\n\n<pre><code>public static &lt;K,V&gt; Map&lt;K,V&gt; of() {\n    return new HashMap&lt;&gt;();// or Collections.emptyMap() to create immutable maps\n}\nstatic &lt;K,V&gt; Map&lt;K,V&gt; of(K k1, V v1) {\n    return ofEntries(entry(k1, v1));\n}\nstatic &lt;K,V&gt; Map&lt;K,V&gt; of(K k1, V v1, K k2, V v2) {\n    return ofEntries(entry(k1, v1), entry(k2, v2));\n}\nstatic &lt;K,V&gt; Map&lt;K,V&gt; of(K k1, V v1, K k2, V v2, K k3, V v3) {\n    return ofEntries(entry(k1, v1), entry(k2, v2), entry(k3, v3));\n}\nstatic &lt;K,V&gt; Map&lt;K,V&gt; of(K k1, V v1, K k2, V v2, K k3, V v3, K k4, V v4) {\n    return ofEntries(entry(k1, v1), entry(k2, v2), entry(k3, v3), entry(k4, v4));\n}   \nstatic &lt;K,V&gt; Map&lt;K,V&gt; of(K k1, V v1, K k2, V v2, K k3, V v3, K k4, V v4, K k5, V v5) {\n    return ofEntries(entry(k1, v1), entry(k2, v2), entry(k3, v3), entry(k4, v4));\n}   \n</code></pre>\n\n<p>(Java 9 makes the cut at ten mappings, if you have more, you have to use the <code>ofEntries(entry(k1, v1), …)</code> variant).</p>\n\n<p>If you follow this pattern, you should keep your <code>toMap</code> name or use just <code>map</code>, rather than calling at “<code>of</code>”, as you are not writing the <code>Map</code> interface.</p>\n\n<p>These overloads might not look very elegant, but they solve all problems. You can write the code just as in your question, without specifying <code>Class</code> objects, but gain compile-time type safety and even rejection of attempts to call it with an odd number of arguments.</p>\n\n<p>You have to make a cut at a certain number of parameters, but, as already noted, even varargs do not support unlimited parameters. And the <code>ofEntries(entry(…), …)</code> form isn’t so bad for larger maps.</p>\n\n<hr>\n\n<p>The collector <code>Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue)</code> returns an unspecified map type, which might even be immutable (though it’s a <code>HashMap</code>in the current version). If you want to have a guaranty that a <code>HashMap</code> instance is returned, you have to use <code>Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue, (v1,v2)-&gt;{throw new IllegalArgumentException(\"duplicate key\");}, HashMap::new)</code> instead.</p>\n"},{"tags":[],"owner":{"display_name":"user9159521"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1548199149,"creation_date":1548195181,"answer_id":54317238,"question_id":41946327,"body_markdown":"```\r\npublic static &lt;K, V, E&gt; Map&lt;K, V&gt; toMap(Function&lt;E, K&gt; toKey, Function&lt;E, V&gt; toValue, E[][] e){\r\n        \r\n        final Map&lt;K, V&gt; newMap = new HashMap&lt;&gt;();\r\n        \r\n        Arrays\r\n                .stream(e, 0, e.length - 1)\r\n                .forEach(s -&gt;\r\n                {\r\n                    if (s[0] != null || s[1] != null)\r\n                        newMap.put(toKey.apply(s[0]), toValue.apply(s[1]));\r\n                }\r\n                );\r\n        \r\n        return newMap;\r\n\r\n}\r\n\r\n\r\n\r\n\r\npublic static void main(String[] args) {\r\n\r\n        Object[][] objects = new Object[10][2];\r\n        objects[0][0] =&quot;Ahmet&quot;;\r\n        objects[0][1] =28;\r\n        objects[1][0] =&quot;Mehmet&quot;;\r\n        objects[1][1] =18;\r\n        objects[2][0] =&quot;Kemal&quot;;\r\n        objects[2][1] =55;\r\n\r\nMap&lt;String, Integer&gt; newMap = toMap((Object::toString), (Object v) -&gt; Integer.parseInt(v.toString()), objects);\r\n        \r\nSystem.out.println(newMap.get(&quot;Ahmet&quot;) + &quot; &quot; + newMap.get(&quot;Kemal&quot;));\r\n\r\n\r\n}\r\n```","title":"How to convert Array to HashMap using Java 8 Stream","body":"<pre><code>public static &lt;K, V, E&gt; Map&lt;K, V&gt; toMap(Function&lt;E, K&gt; toKey, Function&lt;E, V&gt; toValue, E[][] e){\n\n        final Map&lt;K, V&gt; newMap = new HashMap&lt;&gt;();\n\n        Arrays\n                .stream(e, 0, e.length - 1)\n                .forEach(s -&gt;\n                {\n                    if (s[0] != null || s[1] != null)\n                        newMap.put(toKey.apply(s[0]), toValue.apply(s[1]));\n                }\n                );\n\n        return newMap;\n\n}\n\n\n\n\npublic static void main(String[] args) {\n\n        Object[][] objects = new Object[10][2];\n        objects[0][0] =\"Ahmet\";\n        objects[0][1] =28;\n        objects[1][0] =\"Mehmet\";\n        objects[1][1] =18;\n        objects[2][0] =\"Kemal\";\n        objects[2][1] =55;\n\nMap&lt;String, Integer&gt; newMap = toMap((Object::toString), (Object v) -&gt; Integer.parseInt(v.toString()), objects);\n\nSystem.out.println(newMap.get(\"Ahmet\") + \" \" + newMap.get(\"Kemal\"));\n\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5644474,"reputation":451,"user_id":4467091,"display_name":"Oleg Maksymuk"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694031541,"creation_date":1694031541,"answer_id":77055062,"question_id":41946327,"body_markdown":"I solved similar problem with listIterator\r\nargs: [-arg1 val1 -arg2 val2 -arg3 -arg4 val4]\r\n\r\n```\r\nMap&lt;String, String&gt; argsMap = new HashMap&lt;&gt;();\r\n        ListIterator&lt;String&gt; listIterator = Arrays.stream(args).toList().listIterator();\r\n        while(listIterator.hasNext()) {\r\n            String current = listIterator.next();;\r\n            if (current.startsWith(&quot;-&quot;)) {\r\n                if (listIterator.hasNext()) {\r\n                    String next = listIterator.next();\r\n                    if (!next.startsWith(&quot;-&quot;)) {\r\n                        argsMap.put(current, next);\r\n                    } else {\r\n                        argsMap.put(current, &quot;&quot;);\r\n                        listIterator.previous();\r\n                    }\r\n                    \r\n                }\r\n            }\r\n        }\r\n```","title":"How to convert Array to HashMap using Java 8 Stream","body":"<p>I solved similar problem with listIterator\nargs: [-arg1 val1 -arg2 val2 -arg3 -arg4 val4]</p>\n<pre><code>Map&lt;String, String&gt; argsMap = new HashMap&lt;&gt;();\n        ListIterator&lt;String&gt; listIterator = Arrays.stream(args).toList().listIterator();\n        while(listIterator.hasNext()) {\n            String current = listIterator.next();;\n            if (current.startsWith(&quot;-&quot;)) {\n                if (listIterator.hasNext()) {\n                    String next = listIterator.next();\n                    if (!next.startsWith(&quot;-&quot;)) {\n                        argsMap.put(current, next);\n                    } else {\n                        argsMap.put(current, &quot;&quot;);\n                        listIterator.previous();\n                    }\n                    \n                }\n            }\n        }\n</code></pre>\n"}],"owner":{"account_id":3619169,"reputation":9458,"user_id":3018377,"accept_rate":64,"display_name":"LHA"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28189,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":41956412,"answer_count":6,"score":13,"last_activity_date":1694031541,"creation_date":1485814360,"question_id":41946327,"body_markdown":"I am writing a function to convert array to Map using Java 8 Stream.\r\n\r\nHere is what I wanted\r\n\r\n\tpublic static &lt;K, V&gt; Map&lt;K, V&gt; toMap(Object... entries) {\r\n        // Requirements:\r\n        // entries must be K1, V1, K2, V2, .... ( even length )\r\n        if (entries.length % 2 == 1) {\r\n            throw new IllegalArgumentException(&quot;Invalid entries&quot;);\r\n        }\r\n\r\n        // TODO\r\n        Arrays.stream(entries).????\r\n\t}\r\n\r\nValid usages\r\n\r\n    Map&lt;String, Integer&gt; map1 = toMap(&quot;k1&quot;, 1, &quot;k2&quot;, 2);\r\n\r\n    Map&lt;String, String&gt; map2 = toMap(&quot;k1&quot;, &quot;v1&quot;, &quot;k2&quot;, &quot;v2&quot;, &quot;k3&quot;, &quot;v3&quot;);\r\n\r\nInvalid usages\r\n\r\n    Map&lt;String, Integer&gt; map1 = toMap(&quot;k1&quot;, 1, &quot;k2&quot;, 2, &quot;k3&quot;);\r\n\r\nAny helps?\r\n\r\nThanks!\r\n\r\n","title":"How to convert Array to HashMap using Java 8 Stream","body":"<p>I am writing a function to convert array to Map using Java 8 Stream.</p>\n\n<p>Here is what I wanted</p>\n\n<pre><code>public static &lt;K, V&gt; Map&lt;K, V&gt; toMap(Object... entries) {\n    // Requirements:\n    // entries must be K1, V1, K2, V2, .... ( even length )\n    if (entries.length % 2 == 1) {\n        throw new IllegalArgumentException(\"Invalid entries\");\n    }\n\n    // TODO\n    Arrays.stream(entries).????\n}\n</code></pre>\n\n<p>Valid usages</p>\n\n<pre><code>Map&lt;String, Integer&gt; map1 = toMap(\"k1\", 1, \"k2\", 2);\n\nMap&lt;String, String&gt; map2 = toMap(\"k1\", \"v1\", \"k2\", \"v2\", \"k3\", \"v3\");\n</code></pre>\n\n<p>Invalid usages</p>\n\n<pre><code>Map&lt;String, Integer&gt; map1 = toMap(\"k1\", 1, \"k2\", 2, \"k3\");\n</code></pre>\n\n<p>Any helps?</p>\n\n<p>Thanks!</p>\n"},{"tags":["java","audio","wav","javax.sound.sampled"],"comments":[{"owner":{"account_id":12157861,"reputation":1714,"user_id":8876321,"display_name":"fdcpp"},"score":0,"creation_date":1694089980,"post_id":77055054,"comment_id":135847232,"body_markdown":"My recommendation would be to start by generating some audio, maybe a test tone of 1000Hz, encoding it and then decoding it. There is definitely something intelligible in the test audio, but something seems off with the values.","body":"My recommendation would be to start by generating some audio, maybe a test tone of 1000Hz, encoding it and then decoding it. There is definitely something intelligible in the test audio, but something seems off with the values."}],"owner":{"account_id":22112469,"reputation":74,"user_id":16367144,"display_name":"SquidXTV"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694031424,"creation_date":1694031424,"question_id":77055054,"body_markdown":"I am trying to store a converted audio to a wave file and the file is not working correctly as it is not playing any sound and seems corrupted.\r\n\r\nI first read a `base64.txt` as an `ulaw` audio and then convert it to `pcm` format afterward. The conversion seems fine as playing the audio works, but the writing to file is failing somehow. I tried some debugging and found out that the bytes written are way less than the actual audio stream contains.\r\n\r\nThis is the calculation I found in `WaveFileWriter#write` -\\&gt; `getAudioFileFormat` :\r\n\r\n```\r\nfileSize = (int) stream.getFrameLength() * streamFormat.getFrameSize() + WaveFileFormat.getHeaderSize(waveType);\r\n```\r\n\r\nthe `getFrameLength` is `659` and `getFrameSize` is `2` (see images)\r\n\r\n[![enter image description here](https://i.stack.imgur.com/AGg5t.png)](https://i.stack.imgur.com/AGg5t.png)\r\n\r\n[![enter image description here](https://i.stack.imgur.com/mGkAL.png)](https://i.stack.imgur.com/mGkAL.png)\r\n\r\nwhich makes sense if you look at the code. Do I maybe have a wrong frameSize set in the pcmFormat? I tried others like `160` as well but all those gave me `Unsupported conversion` .\r\n\r\nI am guessing that the problem is that the calculated file size is way smaller than the actual size of the stream and thus its only writing the data till that calculated file size. These are the outputs from print lines:\r\n\r\n```\r\nAvailable: 116480\r\n```\r\n\r\n```\r\nActually written: 1500\r\n```\r\n\r\nThis is the main method:\r\n\r\n```java\r\n    public static void main(String[] args) throws Exception {\r\n        Path base64 = Path.of(Main.class.getResource(&quot;/base64.txt&quot;).toURI());\r\n        byte[] decodedAudioBytes = Base64.getDecoder().decode(Files.readAllBytes(base64));\r\n\r\n        ByteArrayInputStream inputStream = new ByteArrayInputStream(decodedAudioBytes);\r\n        AudioFormat audioFormat = new AudioFormat(\r\n                AudioFormat.Encoding.ULAW,  // Audio format details here\r\n                8000,\r\n                8,\r\n                1,\r\n                160,\r\n                50,\r\n                false\r\n        );\r\n        AudioInputStream ulawAudioInputStream = new AudioInputStream(inputStream, audioFormat, decodedAudioBytes.length / audioFormat.getFrameSize());\r\n        AudioFormat ulawFormat = ulawAudioInputStream.getFormat();\r\n        AudioFormat pcmFormat = new AudioFormat(\r\n                AudioFormat.Encoding.PCM_SIGNED,\r\n                ulawFormat.getSampleRate(),\r\n                16, // 16-bit sample size\r\n                ulawFormat.getChannels(),\r\n                ulawFormat.getChannels() * 2, // Frame size\r\n                ulawFormat.getSampleRate(),\r\n                false // Little endian\r\n        );\r\n\r\n        try (inputStream; ulawAudioInputStream; AudioInputStream pcmAudioInputStream = AudioSystem.getAudioInputStream(pcmFormat, ulawAudioInputStream)) {\r\n\r\n//        playAudio(pcmAudioInputStream, pcmAudioInputStream.getFormat());\r\n\r\n            System.out.println(&quot;Available: &quot; + pcmAudioInputStream.available());\r\n            System.out.println(&quot;Actually written: &quot; + AudioSystem.write(pcmAudioInputStream, AudioFileFormat.Type.WAVE, Files.newOutputStream(Path.of(&quot;D://test.wav&quot;), StandardOpenOption.CREATE)));\r\n        }\r\n    }\r\n\r\n    private static void playAudio(AudioInputStream audio, AudioFormat format) throws Exception {\r\n        DataLine.Info info = new DataLine.Info(SourceDataLine.class, format);\r\n        SourceDataLine line = (SourceDataLine) AudioSystem.getLine(info);\r\n        line.open(format);\r\n        line.start();\r\n        byte[] buffer = new byte[4096];\r\n        int bytesRead;\r\n        while ((bytesRead = audio.read(buffer)) != -1) {\r\n            line.write(buffer, 0, bytesRead);\r\n        }\r\n    }\r\n```\r\n\r\nwith this base64.txt (be careful its kinda loud and just an example audio):\r\n\r\nhttps://gist.github.com/SquidXTV/4a696ef4d714cf0043727ae4c141e8f3\r\n\r\nthanks for your help","title":"store ulaw to pcm converted sound to a wave file","body":"<p>I am trying to store a converted audio to a wave file and the file is not working correctly as it is not playing any sound and seems corrupted.</p>\n<p>I first read a <code>base64.txt</code> as an <code>ulaw</code> audio and then convert it to <code>pcm</code> format afterward. The conversion seems fine as playing the audio works, but the writing to file is failing somehow. I tried some debugging and found out that the bytes written are way less than the actual audio stream contains.</p>\n<p>This is the calculation I found in <code>WaveFileWriter#write</code> -&gt; <code>getAudioFileFormat</code> :</p>\n<pre><code>fileSize = (int) stream.getFrameLength() * streamFormat.getFrameSize() + WaveFileFormat.getHeaderSize(waveType);\n</code></pre>\n<p>the <code>getFrameLength</code> is <code>659</code> and <code>getFrameSize</code> is <code>2</code> (see images)</p>\n<p><a href=\"https://i.stack.imgur.com/AGg5t.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AGg5t.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/mGkAL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mGkAL.png\" alt=\"enter image description here\" /></a></p>\n<p>which makes sense if you look at the code. Do I maybe have a wrong frameSize set in the pcmFormat? I tried others like <code>160</code> as well but all those gave me <code>Unsupported conversion</code> .</p>\n<p>I am guessing that the problem is that the calculated file size is way smaller than the actual size of the stream and thus its only writing the data till that calculated file size. These are the outputs from print lines:</p>\n<pre><code>Available: 116480\n</code></pre>\n<pre><code>Actually written: 1500\n</code></pre>\n<p>This is the main method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static void main(String[] args) throws Exception {\n        Path base64 = Path.of(Main.class.getResource(&quot;/base64.txt&quot;).toURI());\n        byte[] decodedAudioBytes = Base64.getDecoder().decode(Files.readAllBytes(base64));\n\n        ByteArrayInputStream inputStream = new ByteArrayInputStream(decodedAudioBytes);\n        AudioFormat audioFormat = new AudioFormat(\n                AudioFormat.Encoding.ULAW,  // Audio format details here\n                8000,\n                8,\n                1,\n                160,\n                50,\n                false\n        );\n        AudioInputStream ulawAudioInputStream = new AudioInputStream(inputStream, audioFormat, decodedAudioBytes.length / audioFormat.getFrameSize());\n        AudioFormat ulawFormat = ulawAudioInputStream.getFormat();\n        AudioFormat pcmFormat = new AudioFormat(\n                AudioFormat.Encoding.PCM_SIGNED,\n                ulawFormat.getSampleRate(),\n                16, // 16-bit sample size\n                ulawFormat.getChannels(),\n                ulawFormat.getChannels() * 2, // Frame size\n                ulawFormat.getSampleRate(),\n                false // Little endian\n        );\n\n        try (inputStream; ulawAudioInputStream; AudioInputStream pcmAudioInputStream = AudioSystem.getAudioInputStream(pcmFormat, ulawAudioInputStream)) {\n\n//        playAudio(pcmAudioInputStream, pcmAudioInputStream.getFormat());\n\n            System.out.println(&quot;Available: &quot; + pcmAudioInputStream.available());\n            System.out.println(&quot;Actually written: &quot; + AudioSystem.write(pcmAudioInputStream, AudioFileFormat.Type.WAVE, Files.newOutputStream(Path.of(&quot;D://test.wav&quot;), StandardOpenOption.CREATE)));\n        }\n    }\n\n    private static void playAudio(AudioInputStream audio, AudioFormat format) throws Exception {\n        DataLine.Info info = new DataLine.Info(SourceDataLine.class, format);\n        SourceDataLine line = (SourceDataLine) AudioSystem.getLine(info);\n        line.open(format);\n        line.start();\n        byte[] buffer = new byte[4096];\n        int bytesRead;\n        while ((bytesRead = audio.read(buffer)) != -1) {\n            line.write(buffer, 0, bytesRead);\n        }\n    }\n</code></pre>\n<p>with this base64.txt (be careful its kinda loud and just an example audio):</p>\n<p><a href=\"https://gist.github.com/SquidXTV/4a696ef4d714cf0043727ae4c141e8f3\" rel=\"nofollow noreferrer\">https://gist.github.com/SquidXTV/4a696ef4d714cf0043727ae4c141e8f3</a></p>\n<p>thanks for your help</p>\n"},{"tags":["java","hibernate"],"comments":[{"owner":{"account_id":1203915,"reputation":10209,"user_id":1174024,"accept_rate":85,"display_name":"Nicholas DiPiazza"},"score":0,"creation_date":1446135086,"post_id":33415331,"comment_id":54628129,"body_markdown":"We decided that this feature in hibernate is for when you never want to customize the timestamp like i am trying to do now.","body":"We decided that this feature in hibernate is for when you never want to customize the timestamp like i am trying to do now."},{"owner":{"account_id":2123818,"reputation":969,"user_id":1886510,"display_name":"darw"},"score":0,"creation_date":1610375848,"post_id":33415331,"comment_id":116105712,"body_markdown":"Never even in tests?","body":"Never even in tests?"}],"answers":[{"tags":[],"owner":{"account_id":1203915,"reputation":10209,"user_id":1174024,"accept_rate":85,"display_name":"Nicholas DiPiazza"},"comment_count":0,"down_vote_count":1,"up_vote_count":6,"is_accepted":true,"score":5,"last_activity_date":1694031368,"creation_date":1446135139,"answer_id":33419377,"question_id":33415331,"body_markdown":"i think the answer is - this feature in hibernate is not meant for when you want to customize the values. it is just meant for when you want strictly created/updated values during database saves.\r\n\r\ni need to make a new column. ","title":"Override the CreationTimestamp/UpdateTimestamp in hibernate?","body":"<p>i think the answer is - this feature in hibernate is not meant for when you want to customize the values. it is just meant for when you want strictly created/updated values during database saves.</p>\n<p>i need to make a new column.</p>\n"}],"owner":{"account_id":1203915,"reputation":10209,"user_id":1174024,"accept_rate":85,"display_name":"Nicholas DiPiazza"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2485,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":33419377,"answer_count":1,"score":10,"last_activity_date":1694031368,"creation_date":1446124627,"question_id":33415331,"body_markdown":"In Hibernate you can use\r\n\r\n    @CreationTimestamp\r\n\r\nand\r\n\r\n    @UpdateTimestamp\r\n\r\nTo automatically set date fields when saving entities.\r\n\r\nBut now I have one of those entities and I want to manually set the created/updated field myself. \r\n\r\nCan I manually set my own or will it over-ride me? \r\n","title":"Override the CreationTimestamp/UpdateTimestamp in hibernate?","body":"<p>In Hibernate you can use</p>\n\n<pre><code>@CreationTimestamp\n</code></pre>\n\n<p>and</p>\n\n<pre><code>@UpdateTimestamp\n</code></pre>\n\n<p>To automatically set date fields when saving entities.</p>\n\n<p>But now I have one of those entities and I want to manually set the created/updated field myself. </p>\n\n<p>Can I manually set my own or will it over-ride me? </p>\n"},{"tags":["java","validation","thymeleaf"],"comments":[{"owner":{"account_id":10408148,"reputation":1398,"user_id":7674438,"accept_rate":100,"display_name":"Lore"},"score":0,"creation_date":1693908638,"post_id":77043397,"comment_id":135818274,"body_markdown":"Why &quot;creat&quot; and not &quot;create&quot;?","body":"Why &quot;creat&quot; and not &quot;create&quot;?"},{"owner":{"account_id":29163172,"reputation":1,"user_id":22502623,"display_name":"Денис Шульженко"},"score":1,"creation_date":1693919410,"post_id":77043397,"comment_id":135820636,"body_markdown":"this does not affect the error in any way","body":"this does not affect the error in any way"},{"owner":{"account_id":29163172,"reputation":1,"user_id":22502623,"display_name":"Денис Шульженко"},"score":0,"creation_date":1693987532,"post_id":77043397,"comment_id":135830436,"body_markdown":"Comrades, I found it. You need to remove the @Validated annotation from the controller class","body":"Comrades, I found it. You need to remove the @Validated annotation from the controller class"},{"owner":{"account_id":10408148,"reputation":1398,"user_id":7674438,"accept_rate":100,"display_name":"Lore"},"score":0,"creation_date":1693989089,"post_id":77043397,"comment_id":135830746,"body_markdown":"you might want to write it as a response","body":"you might want to write it as a response"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1694039255,"post_id":77043397,"comment_id":135840535,"body_markdown":"(1) HTTP status 500 isn&#39;t intended to provide *any* information to the client. (2) As it *is* an error, there is *no* HTML for anything to be displayed in.","body":"(1) HTTP status 500 isn&#39;t intended to provide <i>any</i> information to the client. (2) As it <i>is</i> an error, there is <i>no</i> HTML for anything to be displayed in."}],"answers":[{"tags":[],"owner":{"account_id":29163172,"reputation":1,"user_id":22502623,"display_name":"Денис Шульженко"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694031282,"creation_date":1694031282,"answer_id":77055032,"question_id":77043397,"body_markdown":"Comrades, I found it. You need to remove the `@Validated` annotation from the controller class","title":"BindingResult errors are not displayed in HTML","body":"<p>Comrades, I found it. You need to remove the <code>@Validated</code> annotation from the controller class</p>\n"}],"owner":{"account_id":29163172,"reputation":1,"user_id":22502623,"display_name":"Денис Шульженко"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1694031282,"creation_date":1693906759,"question_id":77043397,"body_markdown":"After filling out the form and sending the POST request, I receive an error message on the page\r\n\r\n`type=Internal Server Error, status=500`\r\n\r\nAnd the console displays the following\r\n\r\n```\r\njakarta.validation.ConstraintViolationException: creatPost.post.heading: Заголовок не может быть пустым\r\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:138) ~[spring-context-6.0.9.jar:6.0.9]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.9.jar:6.0.9]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-6.0.9.jar:6.0.9]\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:702) ~[spring-aop-6.0.9.jar:6.0.9]\r\n```\r\n\r\nMy controller class\r\n\r\n```\r\n@Controller\r\n@Validated\r\n@RequiredArgsConstructor\r\npublic class PostController {\r\n    private final PostService postService;\r\n    @GetMapping(&quot;/&quot;)\r\n    public String posts(@RequestParam(name = &quot;heading&quot;, required = false) String heading, Model model) {\r\n        List&lt;Post&gt; posts = postService.listPosts(heading);\r\n        Map&lt;Long, String&gt; times = postService.timeFromPosts(posts);\r\n        model.addAttribute(&quot;posts&quot;, posts);\r\n        model.addAttribute(&quot;times&quot;, times);\r\n        return &quot;index&quot;;\r\n    }\r\n\r\n    @GetMapping(&quot;/post/creat&quot;)\r\n    public String pageCreatPost(Model model) {\r\n        model.addAttribute(&quot;post&quot;, new Post());\r\n        return &quot;add&quot;;\r\n    }\r\n\r\n    @PostMapping(&quot;/post/creat&quot;)\r\n    public String creatPost(@Valid @ModelAttribute(&quot;post&quot;) Post post,\r\n                            BindingResult bindingResult,\r\n                            @RequestParam(&quot;file&quot;) MultipartFile multipartFile) throws IOException {\r\n        if (bindingResult.hasErrors()) {\r\n            return &quot;add&quot;;\r\n        }\r\n        postService.savePost(multipartFile, post);\r\n        return &quot;redirect:/&quot;;\r\n    }\r\n\r\n    @PostMapping(&quot;/post/delete/{id}&quot;)\r\n    public String deletePost(@PathVariable Long id) {\r\n        postService.deletePost(id);\r\n        return &quot;redirect:/&quot;;\r\n    }\r\n\r\n    @GetMapping(&quot;/post/{id}&quot;)\r\n    public String postInfo(@PathVariable Long id, Model model) {\r\n        Post post = postService.getPostById(id);\r\n        String data = postService.timeFormatting(post.getDateTime());\r\n        List&lt;ImageDto&gt; imageDtos = postService.listImagesDtos(post);\r\n        model.addAttribute(&quot;post&quot;, post);\r\n        model.addAttribute(&quot;data&quot;, data);\r\n        model.addAttribute(&quot;images&quot;, imageDtos);\r\n        return &quot;post-info&quot;;\r\n    }\r\n}\r\n```\r\n\r\nEntity\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;posts&quot;)\r\n@Data\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\npublic class Post {\r\n    @Id\r\n    @Column(name = &quot;id&quot;)\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private Long id;\r\n\r\n    @Column(name = &quot;heading&quot;)\r\n    @NotEmpty(message = &quot;Заголовок не может быть пустым&quot;)\r\n    @Size(max = 50, message = &quot;Заголовок не должен превышать 50 символов&quot;)\r\n    private String heading;\r\n\r\n    @Column(name = &quot;description&quot;, columnDefinition = &quot;text&quot;)\r\n    @NotEmpty(message = &quot;Описание не может быть пустым&quot;)\r\n    private String description;\r\n\r\n    @Column(name = &quot;price&quot;)\r\n    @Min(value = 1, message = &quot;Цена должна быть больше 0&quot;)\r\n    private int price;\r\n\r\n    @Column(name = &quot;address&quot;)\r\n    @NotEmpty(message = &quot;Адрес не может быть пустым&quot;)\r\n    private String address;\r\n\r\n    @Column(name = &quot;phone_number&quot;)\r\n    @Pattern(regexp = &quot;^\\\\+?[0-9]*$&quot;, message = &quot;Номер телефона должен содержать только цифры и символ &#39;+&#39;&quot;)\r\n    private String phoneNumber;\r\n\r\n    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = &quot;post&quot;)\r\n    private List&lt;Image&gt; images = new ArrayList&lt;&gt;();\r\n\r\n    private LocalDateTime dateTime;\r\n\r\n    @PrePersist\r\n    private void init() {\r\n        dateTime = LocalDateTime.now();\r\n    }\r\n\r\n    public void addImageToPost(Image image) {\r\n        image.setPost(this);\r\n        images.add(image);\r\n    }\r\n}\r\n```\r\n\r\nView\r\n\r\n```\r\n&lt;div class=&quot;col-9&quot;&gt;\r\n    &lt;div class=&quot;form-outline mb-4&quot;&gt;\r\n        &lt;input type=&quot;text&quot; id=&quot;heading&quot; name=&quot;heading&quot; class=&quot;form-control&quot; th:field=&quot;*{post.heading}&quot; /&gt;\r\n        &lt;span class=&quot;error&quot; th:if=&quot;${#fields.hasErrors(&#39;heading&#39;)}&quot; th:errors=&quot;*{post.heading}&quot;&gt;&lt;/span&gt;\r\n    &lt;/div&gt;\r\n&lt;/div&gt;\r\n```\r\n\r\npom.xml\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;3.1.0&lt;/version&gt;\r\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n    &lt;groupId&gt;ru.bulletin_board&lt;/groupId&gt;\r\n    &lt;artifactId&gt;bulletin_board&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    &lt;name&gt;bulletin board&lt;/name&gt;\r\n    &lt;description&gt;bulletin board&lt;/description&gt;\r\n    &lt;properties&gt;\r\n        &lt;java.version&gt;17&lt;/java.version&gt;\r\n    &lt;/properties&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n            &lt;optional&gt;true&lt;/optional&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;!--        &lt;dependency&gt;--&gt;\r\n&lt;!--            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;--&gt;\r\n&lt;!--            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;--&gt;\r\n&lt;!--        &lt;/dependency&gt;--&gt;\r\n\r\n&lt;!--        &lt;dependency&gt;--&gt;\r\n&lt;!--            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;--&gt;\r\n&lt;!--            &lt;artifactId&gt;spring-security-core&lt;/artifactId&gt;--&gt;\r\n&lt;!--        &lt;/dependency&gt;--&gt;\r\n\r\n&lt;!--        &lt;dependency&gt;--&gt;\r\n&lt;!--            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;--&gt;\r\n&lt;!--            &lt;artifactId&gt;spring-security-web&lt;/artifactId&gt;--&gt;\r\n&lt;!--        &lt;/dependency&gt;--&gt;\r\n\r\n&lt;!--        &lt;dependency&gt;--&gt;\r\n&lt;!--            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;--&gt;\r\n&lt;!--            &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;--&gt;\r\n&lt;!--            &lt;scope&gt;provided&lt;/scope&gt;--&gt;\r\n&lt;!--        &lt;/dependency&gt;--&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;excludes&gt;\r\n                        &lt;exclude&gt;\r\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                        &lt;/exclude&gt;\r\n                    &lt;/excludes&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nAfter sending a POST request, validation errors should be displayed in the view if validation is violated\r\n\r\nin most sources , such an implementation","title":"BindingResult errors are not displayed in HTML","body":"<p>After filling out the form and sending the POST request, I receive an error message on the page</p>\n<p><code>type=Internal Server Error, status=500</code></p>\n<p>And the console displays the following</p>\n<pre><code>jakarta.validation.ConstraintViolationException: creatPost.post.heading: Заголовок не может быть пустым\n    at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:138) ~[spring-context-6.0.9.jar:6.0.9]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.9.jar:6.0.9]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-6.0.9.jar:6.0.9]\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:702) ~[spring-aop-6.0.9.jar:6.0.9]\n</code></pre>\n<p>My controller class</p>\n<pre><code>@Controller\n@Validated\n@RequiredArgsConstructor\npublic class PostController {\n    private final PostService postService;\n    @GetMapping(&quot;/&quot;)\n    public String posts(@RequestParam(name = &quot;heading&quot;, required = false) String heading, Model model) {\n        List&lt;Post&gt; posts = postService.listPosts(heading);\n        Map&lt;Long, String&gt; times = postService.timeFromPosts(posts);\n        model.addAttribute(&quot;posts&quot;, posts);\n        model.addAttribute(&quot;times&quot;, times);\n        return &quot;index&quot;;\n    }\n\n    @GetMapping(&quot;/post/creat&quot;)\n    public String pageCreatPost(Model model) {\n        model.addAttribute(&quot;post&quot;, new Post());\n        return &quot;add&quot;;\n    }\n\n    @PostMapping(&quot;/post/creat&quot;)\n    public String creatPost(@Valid @ModelAttribute(&quot;post&quot;) Post post,\n                            BindingResult bindingResult,\n                            @RequestParam(&quot;file&quot;) MultipartFile multipartFile) throws IOException {\n        if (bindingResult.hasErrors()) {\n            return &quot;add&quot;;\n        }\n        postService.savePost(multipartFile, post);\n        return &quot;redirect:/&quot;;\n    }\n\n    @PostMapping(&quot;/post/delete/{id}&quot;)\n    public String deletePost(@PathVariable Long id) {\n        postService.deletePost(id);\n        return &quot;redirect:/&quot;;\n    }\n\n    @GetMapping(&quot;/post/{id}&quot;)\n    public String postInfo(@PathVariable Long id, Model model) {\n        Post post = postService.getPostById(id);\n        String data = postService.timeFormatting(post.getDateTime());\n        List&lt;ImageDto&gt; imageDtos = postService.listImagesDtos(post);\n        model.addAttribute(&quot;post&quot;, post);\n        model.addAttribute(&quot;data&quot;, data);\n        model.addAttribute(&quot;images&quot;, imageDtos);\n        return &quot;post-info&quot;;\n    }\n}\n</code></pre>\n<p>Entity</p>\n<pre><code>@Entity\n@Table(name = &quot;posts&quot;)\n@Data\n@AllArgsConstructor\n@NoArgsConstructor\npublic class Post {\n    @Id\n    @Column(name = &quot;id&quot;)\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long id;\n\n    @Column(name = &quot;heading&quot;)\n    @NotEmpty(message = &quot;Заголовок не может быть пустым&quot;)\n    @Size(max = 50, message = &quot;Заголовок не должен превышать 50 символов&quot;)\n    private String heading;\n\n    @Column(name = &quot;description&quot;, columnDefinition = &quot;text&quot;)\n    @NotEmpty(message = &quot;Описание не может быть пустым&quot;)\n    private String description;\n\n    @Column(name = &quot;price&quot;)\n    @Min(value = 1, message = &quot;Цена должна быть больше 0&quot;)\n    private int price;\n\n    @Column(name = &quot;address&quot;)\n    @NotEmpty(message = &quot;Адрес не может быть пустым&quot;)\n    private String address;\n\n    @Column(name = &quot;phone_number&quot;)\n    @Pattern(regexp = &quot;^\\\\+?[0-9]*$&quot;, message = &quot;Номер телефона должен содержать только цифры и символ '+'&quot;)\n    private String phoneNumber;\n\n    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = &quot;post&quot;)\n    private List&lt;Image&gt; images = new ArrayList&lt;&gt;();\n\n    private LocalDateTime dateTime;\n\n    @PrePersist\n    private void init() {\n        dateTime = LocalDateTime.now();\n    }\n\n    public void addImageToPost(Image image) {\n        image.setPost(this);\n        images.add(image);\n    }\n}\n</code></pre>\n<p>View</p>\n<pre><code>&lt;div class=&quot;col-9&quot;&gt;\n    &lt;div class=&quot;form-outline mb-4&quot;&gt;\n        &lt;input type=&quot;text&quot; id=&quot;heading&quot; name=&quot;heading&quot; class=&quot;form-control&quot; th:field=&quot;*{post.heading}&quot; /&gt;\n        &lt;span class=&quot;error&quot; th:if=&quot;${#fields.hasErrors('heading')}&quot; th:errors=&quot;*{post.heading}&quot;&gt;&lt;/span&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n<p>pom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.0&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;ru.bulletin_board&lt;/groupId&gt;\n    &lt;artifactId&gt;bulletin_board&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;bulletin board&lt;/name&gt;\n    &lt;description&gt;bulletin board&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;!--        &lt;dependency&gt;--&gt;\n&lt;!--            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;--&gt;\n&lt;!--            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;--&gt;\n&lt;!--        &lt;/dependency&gt;--&gt;\n\n&lt;!--        &lt;dependency&gt;--&gt;\n&lt;!--            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;--&gt;\n&lt;!--            &lt;artifactId&gt;spring-security-core&lt;/artifactId&gt;--&gt;\n&lt;!--        &lt;/dependency&gt;--&gt;\n\n&lt;!--        &lt;dependency&gt;--&gt;\n&lt;!--            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;--&gt;\n&lt;!--            &lt;artifactId&gt;spring-security-web&lt;/artifactId&gt;--&gt;\n&lt;!--        &lt;/dependency&gt;--&gt;\n\n&lt;!--        &lt;dependency&gt;--&gt;\n&lt;!--            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;--&gt;\n&lt;!--            &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;--&gt;\n&lt;!--            &lt;scope&gt;provided&lt;/scope&gt;--&gt;\n&lt;!--        &lt;/dependency&gt;--&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>After sending a POST request, validation errors should be displayed in the view if validation is violated</p>\n<p>in most sources , such an implementation</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"comments":[{"owner":{"account_id":10483819,"reputation":1431,"user_id":7728038,"display_name":"Steven W. Klassen"},"score":1,"creation_date":1554322301,"post_id":55500788,"comment_id":97713299,"body_markdown":"First, I want to thank you for this answer - it does exactly what I was hoping it would do. To make it work in my environment (configured using gradle), I needed to add the line `runtime(&quot;org.slf4j:jul-to-slf4j&quot;)` to my dependancies list.","body":"First, I want to thank you for this answer - it does exactly what I was hoping it would do. To make it work in my environment (configured using gradle), I needed to add the line <code>runtime(&quot;org.slf4j:jul-to-slf4j&quot;)</code> to my dependancies list."},{"owner":{"account_id":10483819,"reputation":1431,"user_id":7728038,"display_name":"Steven W. Klassen"},"score":1,"creation_date":1554322376,"post_id":55500788,"comment_id":97713338,"body_markdown":"Unfortunately, for me at least, it didn&#39;t solve my actual problem. In digger a bit deeper it seems the library I&#39;m using isn&#39;t using java logging but is just manually writing to the standard output device. Annoying and I will probably log (pun intended) it to the author. But your answer did exactly what it was supposed to, so I&#39;m going to mark it as accepted.","body":"Unfortunately, for me at least, it didn&#39;t solve my actual problem. In digger a bit deeper it seems the library I&#39;m using isn&#39;t using java logging but is just manually writing to the standard output device. Annoying and I will probably log (pun intended) it to the author. But your answer did exactly what it was supposed to, so I&#39;m going to mark it as accepted."},{"owner":{"account_id":1971682,"reputation":2496,"user_id":1770433,"display_name":"mle"},"score":0,"creation_date":1554325617,"post_id":55500788,"comment_id":97714694,"body_markdown":"Yeah, just saw your new issue in Github. That is really a mess, just logging to the stdout. However it should not be a big deal for the maintainer to switch this to JUL or even better SLF4J. May be the jlibmodbus community accepts pull requests so you could contribute your preferred solution. :-)","body":"Yeah, just saw your new issue in Github. That is really a mess, just logging to the stdout. However it should not be a big deal for the maintainer to switch this to JUL or even better SLF4J. May be the jlibmodbus community accepts pull requests so you could contribute your preferred solution. :-)"},{"owner":{"account_id":10483819,"reputation":1431,"user_id":7728038,"display_name":"Steven W. Klassen"},"score":0,"creation_date":1554331236,"post_id":55500788,"comment_id":97716584,"body_markdown":"I suppose we are getting off topic here, but my preferred solution would actually be JUL over SLF4J, then relying on a bridge when used in Spring. My key reasoning is that I don&#39;t like having to add libraries I wouldn&#39;t otherwise care about in order to use one that I need. Not every application I write will necessarily be a Spring app.","body":"I suppose we are getting off topic here, but my preferred solution would actually be JUL over SLF4J, then relying on a bridge when used in Spring. My key reasoning is that I don&#39;t like having to add libraries I wouldn&#39;t otherwise care about in order to use one that I need. Not every application I write will necessarily be a Spring app."},{"owner":{"account_id":343146,"reputation":11083,"user_id":674669,"accept_rate":58,"display_name":"user674669"},"score":1,"creation_date":1693923126,"post_id":55500788,"comment_id":135821518,"body_markdown":"The first link mentioned in the answer does not work any more. https://github.com/spring-projects/spring-boot/blob/main/spring-boot-project/spring-boot-dependencies/build.gradle seems to work.","body":"The first link mentioned in the answer does not work any more. <a href=\"https://github.com/spring-projects/spring-boot/blob/main/spring-boot-project/spring-boot-dependencies/build.gradle\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-boot/blob/main/&hellip;</a> seems to work."},{"owner":{"account_id":1971682,"reputation":2496,"user_id":1770433,"display_name":"mle"},"score":0,"creation_date":1694030922,"post_id":55500788,"comment_id":135839472,"body_markdown":"Thanks @user674669, updated this one.","body":"Thanks @user674669, updated this one."}],"tags":[],"owner":{"account_id":1971682,"reputation":2496,"user_id":1770433,"display_name":"mle"},"comment_count":6,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1694030900,"creation_date":1554311846,"answer_id":55500788,"question_id":55496995,"body_markdown":"If I understand you correctly, you want to configure the logging of a lib which uses Java Util Logging.\r\n\r\nSpring Boot comes already with a [managed dependency](https://github.com/spring-projects/spring-boot/blob/d9af7cec141190fb32e20de6a64c2d3b03b644e4/spring-boot-project/spring-boot-dependencies/build.gradle#L1465) which helps you to fix your issue.\r\n\r\nPlease add or verify that you&#39;ve already added the JUL to SLF4J bridge:\r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jul-to-slf4j&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nPlease check also, that you put your logger configurations in the [correct config file](https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-logging.html#boot-features-custom-log-configuration), especially referencing:\r\n\r\n* Logback – logback-spring.xml, …\r\n* Log4j2 – log4j2-spring.xml, …\r\n* JDK (Java Util Logging) – logging.properties","title":"can I configure Java logging to make use of Spring Boot logging?","body":"<p>If I understand you correctly, you want to configure the logging of a lib which uses Java Util Logging.</p>\n<p>Spring Boot comes already with a <a href=\"https://github.com/spring-projects/spring-boot/blob/d9af7cec141190fb32e20de6a64c2d3b03b644e4/spring-boot-project/spring-boot-dependencies/build.gradle#L1465\" rel=\"nofollow noreferrer\">managed dependency</a> which helps you to fix your issue.</p>\n<p>Please add or verify that you've already added the JUL to SLF4J bridge:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n    &lt;artifactId&gt;jul-to-slf4j&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Please check also, that you put your logger configurations in the <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-logging.html#boot-features-custom-log-configuration\" rel=\"nofollow noreferrer\">correct config file</a>, especially referencing:</p>\n<ul>\n<li>Logback – logback-spring.xml, …</li>\n<li>Log4j2 – log4j2-spring.xml, …</li>\n<li>JDK (Java Util Logging) – logging.properties</li>\n</ul>\n"}],"owner":{"account_id":10483819,"reputation":1431,"user_id":7728038,"display_name":"Steven W. Klassen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1092,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":55500788,"answer_count":1,"score":2,"last_activity_date":1694030900,"creation_date":1554300000,"question_id":55496995,"body_markdown":"My use case is as follows. I&#39;m developing a large spring based application and we are using spring boot logging throughout. However, for various reasons I need to use a third-party library that uses java.util.Logger in its internals. This causes the two separate loggers to both send their output to our console.\r\n\r\nI&#39;ve found many examples on how to configure spring boot logging to use java logging as its output, but I haven&#39;t been able to determine how to go the other way.\r\n\r\nThe library in question - JLibModbus - includes API access to set it&#39;s logging level or to turn it off, but I don&#39;t see any way to actually tell it to use a different logger. Presumably this should be possible. I&#39;m hoping that someone else has already done this.\r\n\r\n(Actually I&#39;m working in Kotlin, not Java, but any answer that works in one I should be able to convert to the other.)","title":"can I configure Java logging to make use of Spring Boot logging?","body":"<p>My use case is as follows. I'm developing a large spring based application and we are using spring boot logging throughout. However, for various reasons I need to use a third-party library that uses java.util.Logger in its internals. This causes the two separate loggers to both send their output to our console.</p>\n\n<p>I've found many examples on how to configure spring boot logging to use java logging as its output, but I haven't been able to determine how to go the other way.</p>\n\n<p>The library in question - JLibModbus - includes API access to set it's logging level or to turn it off, but I don't see any way to actually tell it to use a different logger. Presumably this should be possible. I'm hoping that someone else has already done this.</p>\n\n<p>(Actually I'm working in Kotlin, not Java, but any answer that works in one I should be able to convert to the other.)</p>\n"},{"tags":["java","solr","rhel"],"owner":{"account_id":8338251,"reputation":1,"user_id":22511619,"display_name":"asmox"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694030698,"creation_date":1694030698,"question_id":77054967,"body_markdown":"We recently upgraded several servers from RHEL 7.9 to RHEL 8.8 and are now attempting to perform clean installations of Solr 9.3 with OpenJDK 11. RHEL is running in FIPS mode with SELinux enabled but our particular Solr environment does not require any crypto, so we&#39;ve disabled FIPS and SSL within Solr by adding the following to /etc/default/solr.in.sh -\r\n\r\nSOLR_OPTS=&quot;$SOLR_OPTS -Dcom.redhat.fips=false&quot;\r\n\r\nSOLR_SSL_ENABLED=false\r\n\r\n--\r\n\r\nSolr itself starts normally but attempting to create a core errors out with this - \r\n\r\n&gt; ERROR: java.lang.IllegalStateException: /var/solr/NONE is not a valid keystore\r\n&gt; \r\n&gt; java.lang.RuntimeException: java.lang.IllegalStateException: /var/solr/NONE is not a valid keystore\r\n&gt; at org.apache.solr.client.solrj.impl.Http2SolrClient.createHttpClient(Http2SolrClient.java:290)\r\n&gt; at org.apache.solr.client.solrj.impl.Http2SolrClient.&lt;init&gt;(Http2SolrClient.java:180)\r\n&gt; at org.apache.solr.client.solrj.impl.Http2SolrClient$Builder.build(Http2SolrClient.java:1052)\r\n&gt; at org.apache.solr.cli.SolrCLI.getSolrClient(SolrCLI.java:426)\r\n&gt; at org.apache.solr.cli.CreateCoreTool.runImpl(CreateCoreTool.java:109)\r\n&gt; at org.apache.solr.cli.ToolBase.runTool(ToolBase.java:52)\r\n&gt; at org.apache.solr.cli.SolrCLI.main(SolrCLI.java:156)\r\n&gt; Caused by: java.lang.IllegalStateException: /var/solr/NONE is not a valid keystore\r\n&gt; at org.eclipse.jetty.util.security.CertificateUtils.getKeyStore(CertificateUtils.java:45)\r\n&gt; at org.eclipse.jetty.util.ssl.SslContextFactory.loadKeyStore(SslContextFactory.java:1121)\r\n&gt; at org.eclipse.jetty.util.ssl.SslContextFactory.load(SslContextFactory.java:291)\r\n&gt; at org.eclipse.jetty.util.ssl.SslContextFactory.doStart(SslContextFactory.java:213)\r\n&gt; at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:93)\r\n&gt; at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:171)\r\n&gt; at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:121)\r\n&gt; at org.eclipse.jetty.io.ClientConnector.doStart(ClientConnector.java:376)\r\n&gt; at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:93)\r\n&gt; at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:171)\r\n&gt; at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:121)\r\n&gt; at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:93)\r\n&gt; at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:171)\r\n&gt; at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:121)\r\n&gt; at org.eclipse.jetty.http2.client.http.HttpClientTransportOverHTTP2.doStart(HttpClientTransportOverHTTP2.java:100)\r\n&gt; at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:93)\r\n&gt; at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:171)\r\n&gt; at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:121)\r\n&gt; at org.eclipse.jetty.client.HttpClient.doStart(HttpClient.java:232)\r\n&gt; at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:93)\r\n&gt; at org.apache.solr.client.solrj.impl.Http2SolrClient.createHttpClient(Http2SolrClient.java:287)\r\n&gt; 6 more\r\n\r\n--\r\n\r\nWith SSL explicitly disabled, we would have expected all SSL-specific requirements to be ignored, but seems like they are not. The same process works as expected in our old environment with Solr 8.8. Are there other parameters or configuration files we&#39;ve missed which may be specific to Solr 9.x?\r\n\r\nTo clarify - Solr itself starts without issues and bypasses FIPS requirements as expected. It&#39;s only core creation which behaves this way.\r\n\r\nThanks for any insight.","title":"Solr 9.3 without SSL on RHEL 8.8 - cannot create core","body":"<p>We recently upgraded several servers from RHEL 7.9 to RHEL 8.8 and are now attempting to perform clean installations of Solr 9.3 with OpenJDK 11. RHEL is running in FIPS mode with SELinux enabled but our particular Solr environment does not require any crypto, so we've disabled FIPS and SSL within Solr by adding the following to /etc/default/solr.in.sh -</p>\n<p>SOLR_OPTS=&quot;$SOLR_OPTS -Dcom.redhat.fips=false&quot;</p>\n<p>SOLR_SSL_ENABLED=false</p>\n<p>--</p>\n<p>Solr itself starts normally but attempting to create a core errors out with this -</p>\n<blockquote>\n<p>ERROR: java.lang.IllegalStateException: /var/solr/NONE is not a valid keystore</p>\n<p>java.lang.RuntimeException: java.lang.IllegalStateException: /var/solr/NONE is not a valid keystore\nat org.apache.solr.client.solrj.impl.Http2SolrClient.createHttpClient(Http2SolrClient.java:290)\nat org.apache.solr.client.solrj.impl.Http2SolrClient.(Http2SolrClient.java:180)\nat org.apache.solr.client.solrj.impl.Http2SolrClient$Builder.build(Http2SolrClient.java:1052)\nat org.apache.solr.cli.SolrCLI.getSolrClient(SolrCLI.java:426)\nat org.apache.solr.cli.CreateCoreTool.runImpl(CreateCoreTool.java:109)\nat org.apache.solr.cli.ToolBase.runTool(ToolBase.java:52)\nat org.apache.solr.cli.SolrCLI.main(SolrCLI.java:156)\nCaused by: java.lang.IllegalStateException: /var/solr/NONE is not a valid keystore\nat org.eclipse.jetty.util.security.CertificateUtils.getKeyStore(CertificateUtils.java:45)\nat org.eclipse.jetty.util.ssl.SslContextFactory.loadKeyStore(SslContextFactory.java:1121)\nat org.eclipse.jetty.util.ssl.SslContextFactory.load(SslContextFactory.java:291)\nat org.eclipse.jetty.util.ssl.SslContextFactory.doStart(SslContextFactory.java:213)\nat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:93)\nat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:171)\nat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:121)\nat org.eclipse.jetty.io.ClientConnector.doStart(ClientConnector.java:376)\nat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:93)\nat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:171)\nat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:121)\nat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:93)\nat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:171)\nat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:121)\nat org.eclipse.jetty.http2.client.http.HttpClientTransportOverHTTP2.doStart(HttpClientTransportOverHTTP2.java:100)\nat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:93)\nat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:171)\nat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:121)\nat org.eclipse.jetty.client.HttpClient.doStart(HttpClient.java:232)\nat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:93)\nat org.apache.solr.client.solrj.impl.Http2SolrClient.createHttpClient(Http2SolrClient.java:287)\n6 more</p>\n</blockquote>\n<p>--</p>\n<p>With SSL explicitly disabled, we would have expected all SSL-specific requirements to be ignored, but seems like they are not. The same process works as expected in our old environment with Solr 8.8. Are there other parameters or configuration files we've missed which may be specific to Solr 9.x?</p>\n<p>To clarify - Solr itself starts without issues and bypasses FIPS requirements as expected. It's only core creation which behaves this way.</p>\n<p>Thanks for any insight.</p>\n"},{"tags":["java","spring-boot","maven","google-cloud-platform","spring-cloud-gcp"],"comments":[{"owner":{"account_id":15760814,"reputation":68973,"user_id":11372593,"display_name":"guillaume blaquiere"},"score":1,"creation_date":1694071959,"post_id":77054939,"comment_id":135843625,"body_markdown":"Do you want to share the commons module with different app and have it stored centrally to be able to import it easily?","body":"Do you want to share the commons module with different app and have it stored centrally to be able to import it easily?"},{"owner":{"account_id":17168363,"reputation":334,"user_id":12426044,"display_name":"Akash Sharma"},"score":0,"creation_date":1694078689,"post_id":77054939,"comment_id":135844998,"body_markdown":"@guillaumeblaquiere yes, right","body":"@guillaumeblaquiere yes, right"},{"owner":{"account_id":15760814,"reputation":68973,"user_id":11372593,"display_name":"guillaume blaquiere"},"score":0,"creation_date":1694079392,"post_id":77054939,"comment_id":135845170,"body_markdown":"Publish your module in Artifact Registry. You have a maven repository managed for you. It&#39;s the best place. https://cloud.google.com/artifact-registry/docs/java/store-java","body":"Publish your module in Artifact Registry. You have a maven repository managed for you. It&#39;s the best place. <a href=\"https://cloud.google.com/artifact-registry/docs/java/store-java\" rel=\"nofollow noreferrer\">cloud.google.com/artifact-registry/docs/java/store-java</a>"}],"owner":{"account_id":17168363,"reputation":334,"user_id":12426044,"display_name":"Akash Sharma"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694030362,"creation_date":1694030362,"question_id":77054939,"body_markdown":"I am setting up a new multi-module Springboot project.\r\n\r\n**MyApp(root)**\r\n - **my-app-commons**\r\n - **my-app-api-a**\r\n\r\nThe **my-app-commons** module will have the model classes and so Application(Main) class isn&#39;t required and it can be used as a library (dependency) in other modules.\r\n\r\nI intend to connect to GCP bucket from the **my-app-api-a** module.In future I will have to add more child modules to MyApp. I was thinking if I can have my GCP storage related configuration inside the **my-app-commons** module and use it as spring managed dependency (autowired) in **my-app-api-a** module, and possibly in future modules, instead of repeating the configuration related code in multiple modules.\r\n\r\nAs I am a beginner, I am not sure if its a good approach. I also think I will need Application(Main) class and have component scan to read the configuration.\r\n\r\nPlease can you suggest the best practice for what I am trying to achieve here.","title":"Sharing configuration across modules in Springboot multi-module project","body":"<p>I am setting up a new multi-module Springboot project.</p>\n<p><strong>MyApp(root)</strong></p>\n<ul>\n<li><strong>my-app-commons</strong></li>\n<li><strong>my-app-api-a</strong></li>\n</ul>\n<p>The <strong>my-app-commons</strong> module will have the model classes and so Application(Main) class isn't required and it can be used as a library (dependency) in other modules.</p>\n<p>I intend to connect to GCP bucket from the <strong>my-app-api-a</strong> module.In future I will have to add more child modules to MyApp. I was thinking if I can have my GCP storage related configuration inside the <strong>my-app-commons</strong> module and use it as spring managed dependency (autowired) in <strong>my-app-api-a</strong> module, and possibly in future modules, instead of repeating the configuration related code in multiple modules.</p>\n<p>As I am a beginner, I am not sure if its a good approach. I also think I will need Application(Main) class and have component scan to read the configuration.</p>\n<p>Please can you suggest the best practice for what I am trying to achieve here.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9935,"page":199,"page_size":100}
