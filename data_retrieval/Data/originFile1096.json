{"items":[{"tags":["java","android","android-studio","text-to-speech","google-text-to-speech"],"comments":[{"owner":{"display_name":"user2711811"},"score":0,"creation_date":1629489891,"post_id":68866638,"comment_id":121709278,"body_markdown":"Could you clarify the region corresponding to &quot;XA&quot; please.  I was able to get your code running for &quot;ar&quot; and a few regions &quot;ar-..&quot; : be sure to use an emulator with google play installed and install &quot;Speech Services by Google&quot;.  I can provide more details in an answer but the -XA region is not available and so I was not able to verify that region.  In addition, specifically the error (without a TTS engine installed) would be -2 (TextToSpeech.LANG_NOT_SUPPORTED).","body":"Could you clarify the region corresponding to &quot;XA&quot; please.  I was able to get your code running for &quot;ar&quot; and a few regions &quot;ar-..&quot; : be sure to use an emulator with google play installed and install &quot;Speech Services by Google&quot;.  I can provide more details in an answer but the -XA region is not available and so I was not able to verify that region.  In addition, specifically the error (without a TTS engine installed) would be -2 (TextToSpeech.LANG_NOT_SUPPORTED)."},{"owner":{"account_id":19823236,"reputation":42,"user_id":14519284,"display_name":"ZeinZebib"},"score":0,"creation_date":1629508003,"post_id":68866638,"comment_id":121712497,"body_markdown":"https://cloud.google.com/text-to-speech/docs/voices. I found the ar-XA here and thought the error was the second Lang not supported. But then I realised the error was from init failed. Could you please tell me more details on howI could download the google TTS services please.","body":"<a href=\"https://cloud.google.com/text-to-speech/docs/voices\" rel=\"nofollow noreferrer\">cloud.google.com/text-to-speech/docs/voices</a>. I found the ar-XA here and thought the error was the second Lang not supported. But then I realised the error was from init failed. Could you please tell me more details on howI could download the google TTS services please."}],"answers":[{"tags":[],"owner":{"display_name":"user2711811"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1629513730,"creation_date":1629511949,"answer_id":68869600,"question_id":68866638,"body_markdown":"This is some information that may help you get TTS working on an android emulator.\r\n\r\nWhen I first tried your code I got the `LANG_NOT_SUPPORTED` error but soon realized my particular emulator instance did not have an TTS engine installed.\r\n\r\nTo install a TTS engine with an emulator I then had to use an emulator with Google Play (only a small subset of the AVD emulators have them).  From the Android Virtual Device Manager you can `Create Virtual Device` and see (under phone for example) a few with Play Store: Pixel 4, Pixel 3a, Pixel 3, Pixel, Nexus 5X, Nexus 5.\r\n\r\nI then used the Nexus 5 with API 25.  (I already had it created.)\r\n\r\nWith the the emulator running I can then see the `Play Store` app listed.   Run the Play Store app as you would on a phone (you&#39;ll have to authenticate yourself with your google account just as you would on a phone).  Use the search bar and search for &quot;speech services by google&quot; - and install this app if not already installed.  This is one TTS engine example which worked for me.  Since this is the only TTS engine installed it is also the default.  So if you choose to load other engines then you would have select the proper engine.  (The engine name is a package name such as `com.google.android.tts`.)\r\n\r\nI then ran your code (slightly modified) as in the following.  I added some diagnostics to list the available languages and variants.  I also reviewed the available languages and regions here: https://cloud.google.com/speech-to-text/docs/languages and for example just chose &quot;ar-iq&quot; (but &quot;ar&quot; also worked).  \r\n\r\nNote your &quot;ar-XA&quot; is a language tag used for voices and not for the engine language.\r\n\r\n\r\n\r\n    TTS = new TextToSpeech(this, new TextToSpeech.OnInitListener() {\r\n        @Override\r\n        public void onInit(int status) {\r\n            if (status==TextToSpeech.SUCCESS){\r\n\r\n                Set&lt;Locale&gt; avail = TTS.getAvailableLanguages();\r\n                for (Locale locale : avail) {\r\n                    Log.e(TAG,&quot;local: &quot;+locale);\r\n                    if (locale.getDisplayVariant() != null) {\r\n                        Log.e(TAG,&quot;  var: &quot;+locale.getVariant());\r\n                    }\r\n                }\r\n                List&lt;TextToSpeech.EngineInfo&gt; engineInfo = TTS.getEngines();\r\n                for (TextToSpeech.EngineInfo info : engineInfo) {\r\n                    Log.e(TAG,&quot;info: &quot;+info);\r\n                }\r\n\r\n                int res = TTS.setLanguage(Locale.forLanguageTag(&quot;ar-iq&quot;));\r\n                if (res == TextToSpeech.LANG_MISSING_DATA || res == TextToSpeech.LANG_NOT_SUPPORTED){\r\n\r\n                    Log.e(&quot;TTS&quot;,&quot;Language not Supporter&quot;);\r\n                }\r\n                else{\r\n                    //speak.setEnabled(true);\r\n\r\n                    TTS.speak(&quot;اَلْعَرَبِيَّةُ&quot;, TextToSpeech.QUEUE_ADD, null);\r\n                }\r\n\r\n            }\r\n            else{\r\n                Log.e(&quot;TTS&quot;,&quot;Init Failed&quot;);\r\n            }\r\n        }\r\n    });\r\n\r\nOnce you have the TTS engine installed and your code or above code works - I think you can then use `Settings` to install your voice data:\r\n\r\n    Settings | Speech | Text-to-speech output | (choose Speech Services by Google) and select the gear icon | and select your voice data.\r\n\r\nYou could also use the voice data programmatically.\r\n\r\nNote you can install another TTS engine (not the default) by using the constructor:\r\n\r\n    TextToSpeech(Context context, TextToSpeech.OnInitListener listener, String engine)\r\n\r\nThe Arabic voices which come with the Google TTS engine have the following language tags - I&#39;m guessing that when the language is set a preferred voice is used which is one of these:\r\n\r\n    ar-xa-x-arz-local\r\n    ar-xa-x-arc-local","title":"Text to Speech Android Studio","body":"<p>This is some information that may help you get TTS working on an android emulator.</p>\n<p>When I first tried your code I got the <code>LANG_NOT_SUPPORTED</code> error but soon realized my particular emulator instance did not have an TTS engine installed.</p>\n<p>To install a TTS engine with an emulator I then had to use an emulator with Google Play (only a small subset of the AVD emulators have them).  From the Android Virtual Device Manager you can <code>Create Virtual Device</code> and see (under phone for example) a few with Play Store: Pixel 4, Pixel 3a, Pixel 3, Pixel, Nexus 5X, Nexus 5.</p>\n<p>I then used the Nexus 5 with API 25.  (I already had it created.)</p>\n<p>With the the emulator running I can then see the <code>Play Store</code> app listed.   Run the Play Store app as you would on a phone (you'll have to authenticate yourself with your google account just as you would on a phone).  Use the search bar and search for &quot;speech services by google&quot; - and install this app if not already installed.  This is one TTS engine example which worked for me.  Since this is the only TTS engine installed it is also the default.  So if you choose to load other engines then you would have select the proper engine.  (The engine name is a package name such as <code>com.google.android.tts</code>.)</p>\n<p>I then ran your code (slightly modified) as in the following.  I added some diagnostics to list the available languages and variants.  I also reviewed the available languages and regions here: <a href=\"https://cloud.google.com/speech-to-text/docs/languages\" rel=\"nofollow noreferrer\">https://cloud.google.com/speech-to-text/docs/languages</a> and for example just chose &quot;ar-iq&quot; (but &quot;ar&quot; also worked).</p>\n<p>Note your &quot;ar-XA&quot; is a language tag used for voices and not for the engine language.</p>\n<pre><code>TTS = new TextToSpeech(this, new TextToSpeech.OnInitListener() {\n    @Override\n    public void onInit(int status) {\n        if (status==TextToSpeech.SUCCESS){\n\n            Set&lt;Locale&gt; avail = TTS.getAvailableLanguages();\n            for (Locale locale : avail) {\n                Log.e(TAG,&quot;local: &quot;+locale);\n                if (locale.getDisplayVariant() != null) {\n                    Log.e(TAG,&quot;  var: &quot;+locale.getVariant());\n                }\n            }\n            List&lt;TextToSpeech.EngineInfo&gt; engineInfo = TTS.getEngines();\n            for (TextToSpeech.EngineInfo info : engineInfo) {\n                Log.e(TAG,&quot;info: &quot;+info);\n            }\n\n            int res = TTS.setLanguage(Locale.forLanguageTag(&quot;ar-iq&quot;));\n            if (res == TextToSpeech.LANG_MISSING_DATA || res == TextToSpeech.LANG_NOT_SUPPORTED){\n\n                Log.e(&quot;TTS&quot;,&quot;Language not Supporter&quot;);\n            }\n            else{\n                //speak.setEnabled(true);\n\n                TTS.speak(&quot;اَلْعَرَبِيَّةُ&quot;, TextToSpeech.QUEUE_ADD, null);\n            }\n\n        }\n        else{\n            Log.e(&quot;TTS&quot;,&quot;Init Failed&quot;);\n        }\n    }\n});\n</code></pre>\n<p>Once you have the TTS engine installed and your code or above code works - I think you can then use <code>Settings</code> to install your voice data:</p>\n<pre><code>Settings | Speech | Text-to-speech output | (choose Speech Services by Google) and select the gear icon | and select your voice data.\n</code></pre>\n<p>You could also use the voice data programmatically.</p>\n<p>Note you can install another TTS engine (not the default) by using the constructor:</p>\n<pre><code>TextToSpeech(Context context, TextToSpeech.OnInitListener listener, String engine)\n</code></pre>\n<p>The Arabic voices which come with the Google TTS engine have the following language tags - I'm guessing that when the language is set a preferred voice is used which is one of these:</p>\n<pre><code>ar-xa-x-arz-local\nar-xa-x-arc-local\n</code></pre>\n"}],"owner":{"account_id":19823236,"reputation":42,"user_id":14519284,"display_name":"ZeinZebib"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2993,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1661085412,"creation_date":1629483923,"question_id":68866638,"body_markdown":"I am trying to do a TTS app for Arabic however whenever I want to initialize my TTS it always fails. I have no idea what I&#39;m supposed to do to fix it. I tried to enter the TTS engine on the emulator but it doesn&#39;t show me anything. So I&#39;m unsure whether the issue is from the emulator or my code. \r\n  \r\n\r\n      TTS = new TextToSpeech(this, new TextToSpeech.OnInitListener() {\r\n        @Override\r\n        public void onInit(int status) {\r\n            if (status==TextToSpeech.SUCCESS){\r\n                int res = TTS.setLanguage(Locale.forLanguageTag(&quot;ar-XA&quot;));\r\n                if (res == TextToSpeech.LANG_MISSING_DATA || res == TextToSpeech.LANG_NOT_SUPPORTED){\r\n\r\n                    Log.e(&quot;TTS&quot;,&quot;Language not Supporter&quot;);\r\n                }\r\n                else{\r\n                    speak.setEnabled(true);\r\n                }\r\n\r\n            }\r\n            else{\r\n                Log.e(&quot;TTS&quot;,&quot;Init Failed&quot;);\r\n            }\r\n        }\r\n    });","title":"Text to Speech Android Studio","body":"<p>I am trying to do a TTS app for Arabic however whenever I want to initialize my TTS it always fails. I have no idea what I'm supposed to do to fix it. I tried to enter the TTS engine on the emulator but it doesn't show me anything. So I'm unsure whether the issue is from the emulator or my code.</p>\n<pre><code>  TTS = new TextToSpeech(this, new TextToSpeech.OnInitListener() {\n    @Override\n    public void onInit(int status) {\n        if (status==TextToSpeech.SUCCESS){\n            int res = TTS.setLanguage(Locale.forLanguageTag(&quot;ar-XA&quot;));\n            if (res == TextToSpeech.LANG_MISSING_DATA || res == TextToSpeech.LANG_NOT_SUPPORTED){\n\n                Log.e(&quot;TTS&quot;,&quot;Language not Supporter&quot;);\n            }\n            else{\n                speak.setEnabled(true);\n            }\n\n        }\n        else{\n            Log.e(&quot;TTS&quot;,&quot;Init Failed&quot;);\n        }\n    }\n});\n</code></pre>\n"},{"tags":["java","lambda","functional-programming","java-stream"],"answers":[{"tags":[],"owner":{"account_id":2496,"reputation":266234,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660933006,"creation_date":1660933006,"answer_id":73420785,"question_id":73420208,"body_markdown":"There are two differences in the examples: the `map()` operation, and the terminal operation (`min()` and `max()`). So, to reuse the rest of the pipeline, you&#39;ll want to parameterize these.\r\n\r\nI will warn you up front, however, that if you call this parameterized method directly from many places, your code will be harder to read. Comprehension of the caller&#39;s code will be easier if you keep a helper function&amp;mdash;with a meaningful name&amp;mdash;that delegates to the generic method. Obviously, there is a balance here. If you wanted to add additional functional parameters, the number of helper methods would grow rapidly and become cumbersome. And if you only call each helper from one place, maybe using the underlying function directly won&#39;t add too much clutter.\r\n\r\nYou don&#39;t show the type of elements in the stream. I&#39;m using the name `MyClass` in this example as a placeholder.\r\n\r\n```java\r\n    private static OptionalInt extremum(\r\n        Collection&lt;? extends MyClass&gt; input,\r\n        Clazz clazz,\r\n        ToIntFunction&lt;? super MyClass&gt; valExtractor,\r\n        Function&lt;IntStream, OptionalInt&gt; terminalOp) {\r\n\r\n        IntStream matches = input.stream()\r\n            .filter(y -&gt; y.getName().matches(clazz.getFilter()))\r\n            .mapToInt(valExtractor);\r\n        return terminalOp.apply(matches);\r\n    }\r\n\r\n    private OptionalInt calcMinUserNumber(Clazz clazz) {\r\n        return extremum(listOfObjects, clazz, MyClass::getUserNumber, IntStream::min);\r\n    }\r\n\r\n    private OptionalInt calcMaxUserNumber(Clazz clazz) {\r\n        return extremum(listOfObjects, clazz, MyClass::getUserNumber, IntStream::max);\r\n    }\r\n\r\n    private OptionalInt calcMinGroupNumber(Clazz clazz) {\r\n        return extremum(listOfObjects, clazz, MyClass::getGroupNumber, IntStream::min);\r\n    }\r\n\r\n    private OptionalInt calcMaxGroupNumber(Clazz clazz) {\r\n        return extremum(listOfObjects, clazz, MyClass::getGroupNumber, IntStream::max);\r\n    }\r\n\r\n    ...\r\n```\r\n\r\nAnd here&#39;s a usage example:\r\n\r\n    calcMaxGroupNumber(clazz).ifPresent(list::add);\r\n\r\n","title":"How could I make a stream pipeline more variable in Java?","body":"<p>There are two differences in the examples: the <code>map()</code> operation, and the terminal operation (<code>min()</code> and <code>max()</code>). So, to reuse the rest of the pipeline, you'll want to parameterize these.</p>\n<p>I will warn you up front, however, that if you call this parameterized method directly from many places, your code will be harder to read. Comprehension of the caller's code will be easier if you keep a helper function—with a meaningful name—that delegates to the generic method. Obviously, there is a balance here. If you wanted to add additional functional parameters, the number of helper methods would grow rapidly and become cumbersome. And if you only call each helper from one place, maybe using the underlying function directly won't add too much clutter.</p>\n<p>You don't show the type of elements in the stream. I'm using the name <code>MyClass</code> in this example as a placeholder.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private static OptionalInt extremum(\n        Collection&lt;? extends MyClass&gt; input,\n        Clazz clazz,\n        ToIntFunction&lt;? super MyClass&gt; valExtractor,\n        Function&lt;IntStream, OptionalInt&gt; terminalOp) {\n\n        IntStream matches = input.stream()\n            .filter(y -&gt; y.getName().matches(clazz.getFilter()))\n            .mapToInt(valExtractor);\n        return terminalOp.apply(matches);\n    }\n\n    private OptionalInt calcMinUserNumber(Clazz clazz) {\n        return extremum(listOfObjects, clazz, MyClass::getUserNumber, IntStream::min);\n    }\n\n    private OptionalInt calcMaxUserNumber(Clazz clazz) {\n        return extremum(listOfObjects, clazz, MyClass::getUserNumber, IntStream::max);\n    }\n\n    private OptionalInt calcMinGroupNumber(Clazz clazz) {\n        return extremum(listOfObjects, clazz, MyClass::getGroupNumber, IntStream::min);\n    }\n\n    private OptionalInt calcMaxGroupNumber(Clazz clazz) {\n        return extremum(listOfObjects, clazz, MyClass::getGroupNumber, IntStream::max);\n    }\n\n    ...\n</code></pre>\n<p>And here's a usage example:</p>\n<pre><code>calcMaxGroupNumber(clazz).ifPresent(list::add);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18891758,"reputation":144,"user_id":13781909,"display_name":"Danny Briskin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660933966,"creation_date":1660933966,"answer_id":73420952,"question_id":73420208,"body_markdown":"The solution may reduce redundancy but it removes readability from the code. \r\n\r\n     IntStream maxi = listOfObjects.stream().filter(y -&gt; (y.getName()\r\n                    .matches(clazz.getFilter())))\r\n                    .map(y -&gt; (y.getUserNumber()))\r\n                    .mapToInt(Integer::intValue);\r\n        System.out.println(applier(() -&gt; maxi, IntStream::max));\r\n        //System.out.println(applier(() -&gt; maxi, IntStream::min));\r\n\r\n...\r\n\r\n    public static OptionalInt applier(Supplier&lt;IntStream&gt; supplier, Function&lt;IntStream, OptionalInt&gt; predicate) {\r\n        return predicate.apply(supplier.get());\r\n    }\r\n\r\n\r\n","title":"How could I make a stream pipeline more variable in Java?","body":"<p>The solution may reduce redundancy but it removes readability from the code.</p>\n<pre><code> IntStream maxi = listOfObjects.stream().filter(y -&gt; (y.getName()\n                .matches(clazz.getFilter())))\n                .map(y -&gt; (y.getUserNumber()))\n                .mapToInt(Integer::intValue);\n    System.out.println(applier(() -&gt; maxi, IntStream::max));\n    //System.out.println(applier(() -&gt; maxi, IntStream::min));\n</code></pre>\n<p>...</p>\n<pre><code>public static OptionalInt applier(Supplier&lt;IntStream&gt; supplier, Function&lt;IntStream, OptionalInt&gt; predicate) {\n    return predicate.apply(supplier.get());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661084874,"creation_date":1661084874,"answer_id":73434395,"question_id":73420208,"body_markdown":"For the sake of variety, I want to add the following approach which uses a nested `Collectors.teeing` (Java 12 or higher) which enables to get all values by just streaming over the collection only once. \r\n\r\nFor the set up, I am using the below simple class :\r\n\r\n    @AllArgsConstructor\r\n    @ToString\r\n    @Getter\r\n    static class MyObject {\r\n        int userNumber;\r\n        int groupNumber;\r\n    }\r\n\r\nand a list of MyObjects:\r\n\r\n    List&lt;MyObject&gt; myObjectList = List.of(\r\n            new MyObject(1, 2),\r\n            new MyObject(2, 3),\r\n            new MyObject(3, 4),\r\n            new MyObject(5, 3),\r\n            new MyObject(6, 2),\r\n            new MyObject(7, 6),\r\n            new MyObject(1, 12));\r\n\r\nIf the task was to get the max and min userNumber one could do a simple `teeing` like below and add for example the values to map:\r\n\r\n    Map&lt;String , Integer&gt; maxMinUserNum =\r\n            myObjectList.stream()\r\n                        .collect(\r\n                                Collectors.teeing(\r\n                                        Collectors.reducing(Integer.MAX_VALUE, MyObject::getUserNumber, Integer::min),\r\n                                        Collectors.reducing(Integer.MIN_VALUE, MyObject::getUserNumber, Integer::max),\r\n                                        (min,max) -&gt; {\r\n                                            Map&lt;String,Integer&gt; map = new HashMap&lt;&gt;();\r\n                                            map.put(&quot;minUser&quot;,min);\r\n                                            map.put(&quot;maxUser&quot;,max);\r\n                                            return map;\r\n                                        }));\r\n    System.out.println(maxMinUserNum);\r\n\r\n    //output: {minUser=1, maxUser=7}\r\n\r\nSince the task also includes to get the max and min group numbers, we could use the same approach as above and only need to nest the teeing collector :\r\n\r\n    Map&lt;String , Integer&gt; result =\r\n        myObjectList.stream()\r\n                    .collect(\r\n                            Collectors.teeing(\r\n                                    Collectors.teeing(\r\n                                            Collectors.reducing(Integer.MAX_VALUE, MyObject::getUserNumber, Integer::min),\r\n                                            Collectors.reducing(Integer.MIN_VALUE, MyObject::getUserNumber, Integer::max),\r\n                                            (min,max) -&gt; {\r\n                                                Map&lt;String,Integer&gt; map = new LinkedHashMap&lt;&gt;();\r\n                                                map.put(&quot;minUser&quot;,min);\r\n                                                map.put(&quot;maxUser&quot;,max);\r\n                                                return map;\r\n                                            }),\r\n                                    Collectors.teeing(\r\n                                            Collectors.reducing(Integer.MAX_VALUE, MyObject::getGroupNumber, Integer::min),\r\n                                            Collectors.reducing(Integer.MIN_VALUE, MyObject::getGroupNumber, Integer::max),\r\n                                            (min,max) -&gt; {\r\n                                                Map&lt;String,Integer&gt; map = new LinkedHashMap&lt;&gt;();\r\n                                                map.put(&quot;minGroup&quot;,min);\r\n                                                map.put(&quot;maxGroup&quot;,max);\r\n                                                return map;\r\n                                            }),\r\n                                    (map1,map2) -&gt; {\r\n                                        map1.putAll(map2);\r\n                                        return map1;\r\n                                    }));\r\n\r\n    System.out.println(result);\r\n\r\noutput\r\n\r\n    {minUser=1, maxUser=7, minGroup=2, maxGroup=12}","title":"How could I make a stream pipeline more variable in Java?","body":"<p>For the sake of variety, I want to add the following approach which uses a nested <code>Collectors.teeing</code> (Java 12 or higher) which enables to get all values by just streaming over the collection only once.</p>\n<p>For the set up, I am using the below simple class :</p>\n<pre><code>@AllArgsConstructor\n@ToString\n@Getter\nstatic class MyObject {\n    int userNumber;\n    int groupNumber;\n}\n</code></pre>\n<p>and a list of MyObjects:</p>\n<pre><code>List&lt;MyObject&gt; myObjectList = List.of(\n        new MyObject(1, 2),\n        new MyObject(2, 3),\n        new MyObject(3, 4),\n        new MyObject(5, 3),\n        new MyObject(6, 2),\n        new MyObject(7, 6),\n        new MyObject(1, 12));\n</code></pre>\n<p>If the task was to get the max and min userNumber one could do a simple <code>teeing</code> like below and add for example the values to map:</p>\n<pre><code>Map&lt;String , Integer&gt; maxMinUserNum =\n        myObjectList.stream()\n                    .collect(\n                            Collectors.teeing(\n                                    Collectors.reducing(Integer.MAX_VALUE, MyObject::getUserNumber, Integer::min),\n                                    Collectors.reducing(Integer.MIN_VALUE, MyObject::getUserNumber, Integer::max),\n                                    (min,max) -&gt; {\n                                        Map&lt;String,Integer&gt; map = new HashMap&lt;&gt;();\n                                        map.put(&quot;minUser&quot;,min);\n                                        map.put(&quot;maxUser&quot;,max);\n                                        return map;\n                                    }));\nSystem.out.println(maxMinUserNum);\n\n//output: {minUser=1, maxUser=7}\n</code></pre>\n<p>Since the task also includes to get the max and min group numbers, we could use the same approach as above and only need to nest the teeing collector :</p>\n<pre><code>Map&lt;String , Integer&gt; result =\n    myObjectList.stream()\n                .collect(\n                        Collectors.teeing(\n                                Collectors.teeing(\n                                        Collectors.reducing(Integer.MAX_VALUE, MyObject::getUserNumber, Integer::min),\n                                        Collectors.reducing(Integer.MIN_VALUE, MyObject::getUserNumber, Integer::max),\n                                        (min,max) -&gt; {\n                                            Map&lt;String,Integer&gt; map = new LinkedHashMap&lt;&gt;();\n                                            map.put(&quot;minUser&quot;,min);\n                                            map.put(&quot;maxUser&quot;,max);\n                                            return map;\n                                        }),\n                                Collectors.teeing(\n                                        Collectors.reducing(Integer.MAX_VALUE, MyObject::getGroupNumber, Integer::min),\n                                        Collectors.reducing(Integer.MIN_VALUE, MyObject::getGroupNumber, Integer::max),\n                                        (min,max) -&gt; {\n                                            Map&lt;String,Integer&gt; map = new LinkedHashMap&lt;&gt;();\n                                            map.put(&quot;minGroup&quot;,min);\n                                            map.put(&quot;maxGroup&quot;,max);\n                                            return map;\n                                        }),\n                                (map1,map2) -&gt; {\n                                    map1.putAll(map2);\n                                    return map1;\n                                }));\n\nSystem.out.println(result);\n</code></pre>\n<p>output</p>\n<pre><code>{minUser=1, maxUser=7, minGroup=2, maxGroup=12}\n</code></pre>\n"}],"owner":{"account_id":23808129,"reputation":924,"user_id":17817329,"display_name":"robni"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":128,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73420785,"answer_count":3,"score":0,"last_activity_date":1661084874,"creation_date":1660929459,"question_id":73420208,"body_markdown":"I wrote a stream pipeline:\r\n\r\n```Java\r\nprivate void calcMin(Clazz clazz) {\r\n    OptionalInt min = listOfObjects.stream().filter(y -&gt; (y.getName()\r\n                    .matches(clazz.getFilter())))\r\n                    .map(y -&gt; (y.getUserNumber()))\r\n                    .mapToInt(Integer::intValue)\r\n                    .min();\r\n    list.add(min.getAsInt());\r\n}\r\n```\r\nThis pipeline gives me the lowest `UserNumber`.\r\n\r\nSo far, so good.\r\n\r\nBut I also need the greatest `UserNumber`.\r\nAnd I also need the lowest `GroupNumber`.\r\nAnd also the greatest `GroupNumber`.\r\n\r\nI could write:\r\n\r\n```Java\r\nprivate void calcMax(Clazz clazz) {\r\n    OptionalInt max = listOfObjects.stream().filter(y -&gt; (y.getName()\r\n                    .matches(clazz.getFilter())))\r\n                    .map(y -&gt; (y.getUserNumber()))\r\n                    .mapToInt(Integer::intValue)\r\n                    .max();\r\n    list.add(max.getAsInt());\r\n}\r\n```\r\nAnd I could also write the same for `.map(y -&gt; (y.getGroupNumber()))`.\r\n\r\nThis will work, but it is very redudant.\r\n\r\nIs there a way to do it more variable?","title":"How could I make a stream pipeline more variable in Java?","body":"<p>I wrote a stream pipeline:</p>\n<pre><code>private void calcMin(Clazz clazz) {\n    OptionalInt min = listOfObjects.stream().filter(y -&gt; (y.getName()\n                    .matches(clazz.getFilter())))\n                    .map(y -&gt; (y.getUserNumber()))\n                    .mapToInt(Integer::intValue)\n                    .min();\n    list.add(min.getAsInt());\n}\n</code></pre>\n<p>This pipeline gives me the lowest <code>UserNumber</code>.</p>\n<p>So far, so good.</p>\n<p>But I also need the greatest <code>UserNumber</code>.\nAnd I also need the lowest <code>GroupNumber</code>.\nAnd also the greatest <code>GroupNumber</code>.</p>\n<p>I could write:</p>\n<pre><code>private void calcMax(Clazz clazz) {\n    OptionalInt max = listOfObjects.stream().filter(y -&gt; (y.getName()\n                    .matches(clazz.getFilter())))\n                    .map(y -&gt; (y.getUserNumber()))\n                    .mapToInt(Integer::intValue)\n                    .max();\n    list.add(max.getAsInt());\n}\n</code></pre>\n<p>And I could also write the same for <code>.map(y -&gt; (y.getGroupNumber()))</code>.</p>\n<p>This will work, but it is very redudant.</p>\n<p>Is there a way to do it more variable?</p>\n"},{"tags":["java","jfreechart"],"owner":{"account_id":7055162,"reputation":870,"user_id":5517820,"accept_rate":68,"display_name":"MehdiB"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1661947581,"answer_count":0,"score":1,"last_activity_date":1661084787,"creation_date":1661049000,"question_id":73431254,"body_markdown":"I am trying to create a chart with black background using JFreeChart. I am setting the chart background to black using\r\n\r\n    chart.getPlot().setBackgroundPaint(Color.BLACK);\r\n\r\nThis is the code:\r\n\r\n```\r\nXYSeries series = new XYSeries(&quot;USD-Toman&quot;);\r\nseries.add(0, 31000);\r\nseries.add(1, 31500);\r\nseries.add(2, 32000);\r\nseries.add(3, 31100);\r\nseries.add(4, 30500);\r\nseries.add(5, 29800);\r\n\r\nXYDataset dataset = new XYSeriesCollection(series);\r\nString[] labels = new String[series.getItemCount()];\r\nlabels[0] = &quot;Saturday&quot;;\r\nlabels[1] = &quot;Sunday&quot;;\r\nlabels[2] = &quot;Monday&quot;;\r\nlabels[3] = &quot;Tuesday&quot;;\r\nlabels[4] = &quot;Wednesday&quot;;\r\nlabels[5] = &quot;Thursday&quot;;\r\n\r\nNumberAxis domain = new SymbolAxis(&quot;&quot;, labels);\r\n\r\nNumberAxis range = new NumberAxis(&quot;&quot;);\r\nXYSplineRenderer r = new XYSplineRenderer(15);\r\nXYPlot xyplot = new XYPlot(dataset, domain, range, r);\r\n\r\nJFreeChart chart = new JFreeChart(xyplot);\r\n\r\nFont font = new Font(&quot;Dialog&quot;, Font.PLAIN, 20);\r\nchart.getPlot().setBackgroundPaint(Color.BLACK);\r\nxyplot.setDomainMinorGridlinesVisible(false);\r\nxyplot.setDomainGridlinesVisible(false);\r\nxyplot.setRangeGridlinesVisible(false);\r\nxyplot.getDomainAxis().setTickLabelFont(font);\r\nxyplot.getRangeAxis().setTickLabelsVisible(false);\r\n\r\n\r\nNumberAxis yAxis = (NumberAxis) chart.getXYPlot().getRangeAxis();\r\nyAxis.setAutoRangeIncludesZero(false);\r\n\r\nXYSplineRenderer renderer = (XYSplineRenderer) chart.getXYPlot().getRenderer();\r\nrenderer.setSeriesVisible(0, true);\r\nrenderer.setAutoPopulateSeriesStroke(false);\r\nrenderer.setDefaultStroke(new BasicStroke(5.0f));\r\nrenderer.setSeriesPaint(0, new Color(39, 112, 96, 255));\r\n\r\nrenderer.setDefaultItemLabelGenerator(new StandardXYItemLabelGenerator());\r\nrenderer.setDefaultItemLabelPaint(Color.WHITE);\r\n\r\n\r\nrenderer.setDefaultItemLabelFont(font);\r\n\r\nrenderer.setSeriesItemLabelsVisible(0, true);\r\n\r\n\r\nChartUtils.saveChartAsPNG(new File(&quot;soft3d2.png&quot;), chart, 1024, 768);\r\n\r\n```\r\n\r\nAlthough the background color is set to black, the result is striped black and grey:\r\n\r\n[![striped background][1]][1]\r\n\r\nany idea how to set it to black only?\r\n\r\n  [1]: https://i.stack.imgur.com/SoneP.png","title":"Chart displays striped background although color is set to black","body":"<p>I am trying to create a chart with black background using JFreeChart. I am setting the chart background to black using</p>\n<pre><code>chart.getPlot().setBackgroundPaint(Color.BLACK);\n</code></pre>\n<p>This is the code:</p>\n<pre><code>XYSeries series = new XYSeries(&quot;USD-Toman&quot;);\nseries.add(0, 31000);\nseries.add(1, 31500);\nseries.add(2, 32000);\nseries.add(3, 31100);\nseries.add(4, 30500);\nseries.add(5, 29800);\n\nXYDataset dataset = new XYSeriesCollection(series);\nString[] labels = new String[series.getItemCount()];\nlabels[0] = &quot;Saturday&quot;;\nlabels[1] = &quot;Sunday&quot;;\nlabels[2] = &quot;Monday&quot;;\nlabels[3] = &quot;Tuesday&quot;;\nlabels[4] = &quot;Wednesday&quot;;\nlabels[5] = &quot;Thursday&quot;;\n\nNumberAxis domain = new SymbolAxis(&quot;&quot;, labels);\n\nNumberAxis range = new NumberAxis(&quot;&quot;);\nXYSplineRenderer r = new XYSplineRenderer(15);\nXYPlot xyplot = new XYPlot(dataset, domain, range, r);\n\nJFreeChart chart = new JFreeChart(xyplot);\n\nFont font = new Font(&quot;Dialog&quot;, Font.PLAIN, 20);\nchart.getPlot().setBackgroundPaint(Color.BLACK);\nxyplot.setDomainMinorGridlinesVisible(false);\nxyplot.setDomainGridlinesVisible(false);\nxyplot.setRangeGridlinesVisible(false);\nxyplot.getDomainAxis().setTickLabelFont(font);\nxyplot.getRangeAxis().setTickLabelsVisible(false);\n\n\nNumberAxis yAxis = (NumberAxis) chart.getXYPlot().getRangeAxis();\nyAxis.setAutoRangeIncludesZero(false);\n\nXYSplineRenderer renderer = (XYSplineRenderer) chart.getXYPlot().getRenderer();\nrenderer.setSeriesVisible(0, true);\nrenderer.setAutoPopulateSeriesStroke(false);\nrenderer.setDefaultStroke(new BasicStroke(5.0f));\nrenderer.setSeriesPaint(0, new Color(39, 112, 96, 255));\n\nrenderer.setDefaultItemLabelGenerator(new StandardXYItemLabelGenerator());\nrenderer.setDefaultItemLabelPaint(Color.WHITE);\n\n\nrenderer.setDefaultItemLabelFont(font);\n\nrenderer.setSeriesItemLabelsVisible(0, true);\n\n\nChartUtils.saveChartAsPNG(new File(&quot;soft3d2.png&quot;), chart, 1024, 768);\n\n</code></pre>\n<p>Although the background color is set to black, the result is striped black and grey:</p>\n<p><a href=\"https://i.stack.imgur.com/SoneP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SoneP.png\" alt=\"striped background\" /></a></p>\n<p>any idea how to set it to black only?</p>\n"},{"tags":["java","android","onesignal"],"answers":[{"tags":[],"owner":{"account_id":1665482,"reputation":1194,"user_id":1532975,"display_name":"dt dino"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1609173859,"creation_date":1609173859,"answer_id":65480983,"question_id":65479223,"body_markdown":"You have to install this:\r\n\r\n\r\n\r\nhttps://documentation.onesignal.com/docs/android-sdk-setup\r\n\r\n\r\nand then the code is something like: \r\n\r\n    OSDeviceState deviceState = OneSignal.getDeviceState();\r\n    String userId = deviceState != null ? deviceState.getUserId() : null;\r\n\r\n","title":"Android/Java: How to get the userId in the new OneSignal 4.0.0? (idsAvailable is deprecated and getPermissionSubscriptionState doesn&#39;t work)","body":"<p>You have to install this:</p>\n<p><a href=\"https://documentation.onesignal.com/docs/android-sdk-setup\" rel=\"nofollow noreferrer\">https://documentation.onesignal.com/docs/android-sdk-setup</a></p>\n<p>and then the code is something like:</p>\n<pre><code>OSDeviceState deviceState = OneSignal.getDeviceState();\nString userId = deviceState != null ? deviceState.getUserId() : null;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9631872,"reputation":5616,"user_id":7149454,"display_name":"Nick Kovalsky"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661083835,"creation_date":1661083835,"answer_id":73434276,"question_id":65479223,"body_markdown":"    OneSignal.Default.PushSubscriptionStateChanged += PushSubscriptionStateChanged;\r\n    \r\n            private void PushSubscriptionStateChanged(PushSubscriptionState current, PushSubscriptionState previous)\r\n            {\r\n                if (current.isSubscribed)\r\n                {\r\n                     // consume current.userId + current.pushToken\r\n                }\r\n            }","title":"Android/Java: How to get the userId in the new OneSignal 4.0.0? (idsAvailable is deprecated and getPermissionSubscriptionState doesn&#39;t work)","body":"<pre><code>OneSignal.Default.PushSubscriptionStateChanged += PushSubscriptionStateChanged;\n\n        private void PushSubscriptionStateChanged(PushSubscriptionState current, PushSubscriptionState previous)\n        {\n            if (current.isSubscribed)\n            {\n                 // consume current.userId + current.pushToken\n            }\n        }\n</code></pre>\n"}],"owner":{"account_id":4393982,"reputation":2533,"user_id":3581620,"accept_rate":81,"display_name":"ΩlostA"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1613,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":65480983,"answer_count":2,"score":1,"last_activity_date":1661083835,"creation_date":1609165960,"question_id":65479223,"body_markdown":"I upgraded onesignal by adding `implementation &#39;com.onesignal:OneSignal:4.0.0&#39;` and now some piece of code doesn&#39;t work.\r\n\r\nOld code deprecated that doesn&#39;t work anymore:\r\n\r\n            OneSignal.idsAvailable(new OneSignal.IdsAvailableHandler() {\r\n                @Override\r\n                public void idsAvailable(String userId, String registrationId) {\r\n\r\n\r\n                }\r\n            });\r\n\r\nNew code that doesn&#39;t work: \r\n\r\n            String userId = OneSignal .getPermissionSubscriptionState().getSubscriptionStatus().getUserId();\r\n\r\nAny ideas? ","title":"Android/Java: How to get the userId in the new OneSignal 4.0.0? (idsAvailable is deprecated and getPermissionSubscriptionState doesn&#39;t work)","body":"<p>I upgraded onesignal by adding <code>implementation 'com.onesignal:OneSignal:4.0.0'</code> and now some piece of code doesn't work.</p>\n<p>Old code deprecated that doesn't work anymore:</p>\n<pre><code>        OneSignal.idsAvailable(new OneSignal.IdsAvailableHandler() {\n            @Override\n            public void idsAvailable(String userId, String registrationId) {\n\n\n            }\n        });\n</code></pre>\n<p>New code that doesn't work:</p>\n<pre><code>        String userId = OneSignal .getPermissionSubscriptionState().getSubscriptionStatus().getUserId();\n</code></pre>\n<p>Any ideas?</p>\n"},{"tags":["java","spring","spring-boot","buildpack","paketo"],"answers":[{"tags":[],"owner":{"account_id":6402290,"reputation":12668,"user_id":4964553,"display_name":"jonashackt"},"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1628530727,"creation_date":1607498430,"answer_id":65212256,"question_id":65212231,"body_markdown":"[According to the docs](https://paketo.io/docs/buildpacks/configuration/#dependency-mappings):\r\n\r\n&gt; Paketo Buildpacks may download dependencies from the internet. For\r\n&gt; example, the Java Buildpack will download the BellSoft Liberica JRE\r\n&gt; from the Liberica github releases by default. If a dependency URI is inaccessible from the build environment, a binding can be used to map a new URI to a given dependency.  \r\n\r\nConfiguring bindings using the spring-boot-maven-plugin (or the Gradle plugin) requires Spring Boot 2.5+. If you are on an older version, you need to upgrade or switch over to [pack CLI](https://buildpacks.io/docs/tools/pack/).\r\n\r\n=== **Use pack CLI with bindings to configure a different JDK download uri** ===\r\n\r\n[The pack docs](https://paketo.io/docs/buildpacks/configuration/#what-is-a-binding) tell us about the general layout of a binding directory (`/platform/bindings` is later created inside the pack build container):\r\n\r\n    /chooseYourBindingsName\r\n    ├── key-name-of-our-buildpacks-binding-configuration\r\n    └── type-name-of-our-buildpacks-binding-configuration\r\n\r\n**1. Create bindings directory**\r\n\r\nSo let&#39;s try to create a fully running example! In order to hand over the binding configuration to `pack` CLI we need to **create a directory first**:\r\n\r\n    mkdir bellsoft-jdk-config &amp;&amp; cd bellsoft-jdk-config\r\n\r\n**2. Create file type, containing the binding key**\r\n\r\nNow we need to create a file called `type` inside this directory containing the binding key for [the bellsoft-liberica binding type `dependency-mapping`](https://github.com/paketo-buildpacks/bellsoft-liberica#type-dependency-mapping):\r\n\r\n    echo &quot;dependency-mapping&quot; &gt;&gt; type\r\n\r\nA new file `type` should be present in the directory containing the string `dependency-mapping`.\r\n\r\n**3. Choose JDK version from buildpack.toml**\r\n\r\nAs we want to change the bellsoft-liberica&#39;s download uri of the JDK, **we need to decide which JDK version we exaclty want to use.** The bellsoft-liberica buildpack&#39;s [buildpack.toml](https://github.com/paketo-buildpacks/bellsoft-liberica/blob/main/buildpack.toml) gives an overview on which JRE/JDK versions are available inside the buildpack. For this example here I used the latest JDK version `11` which is configured inside the `buildpack.toml` like this:\r\n\r\n    ...\r\n\r\n    [[metadata.dependencies]]\r\n    id      = &quot;jdk&quot;\r\n    name    = &quot;BellSoft Liberica JDK&quot;\r\n    version = &quot;11.0.9&quot;\r\n    uri     = &quot;https://github.com/bell-sw/Liberica/releases/download/11.0.9.1+1/bellsoft-jdk11.0.9.1+1-linux-amd64.tar.gz&quot;\r\n    sha256  = &quot;786c48fa6429d6a3f0afb189a65f0a43772e42afbab836852b9a1fdfdb8fc502&quot;\r\n    stacks  = [ &quot;io.buildpacks.stacks.bionic&quot;, &quot;org.cloudfoundry.stacks.cflinuxfs3&quot; ]\r\n    ...\r\n\r\n**4. Download JDK**\r\n\r\nHaving decided on the version, **we need to download the JDK from the location provided inside the `uri` field to a location we have access to later inside our build environment** (since we don&#39;t have access to github.com). Let&#39;s assume, we have the JDK downloaded and available at `http://your-accessible-uri-to/bellsoft-jdk11.0.9.1+1-linux-amd64.tar.gz`.\r\n\r\n**5. Create file named as the sha256, containing the JDK uri**\r\n\r\nNow we should create another **file named exactly according to the `sha256` digest value** of the `[[metadata.dependencies]]` section of the JDK version we chose inside the [buildpack.toml](https://github.com/paketo-buildpacks/bellsoft-liberica/blob/main/buildpack.toml). This file must contain the uri of our downloaded JDK:\r\n\r\n    echo &quot;http://your-accessible-uri-to/bellsoft-jdk11.0.9.1+1-linux-amd64.tar.gz&quot; &gt;&gt; 786c48fa6429d6a3f0afb189a65f0a43772e42afbab836852b9a1fdfdb8fc502\r\n\r\nIn the end our directory `bellsoft-jdk-config` should comply to [the pack CLI bindings directory docs](https://paketo.io/docs/buildpacks/configuration/#what-is-a-binding) and looks somehow like this:\r\n\r\n    /bellsoft-jdk-config\r\n    ├── 786c48fa6429d6a3f0afb189a65f0a43772e42afbab836852b9a1fdfdb8fc502\r\n    └── type\r\n\r\n**6. Execute pack CLI with --volume for binding &amp; BP_JVM_VERSION**\r\n\r\nFinally we can issue our `pack` CLI command. Ensure that [pack CLI is installed on your system](https://buildpacks.io/docs/tools/pack/). Be also sure to also provide the exact JDK version number using the `--env BP_JVM_VERSION=exactJDKversionNumberHere` [environment variable configuration](https://paketo.io/docs/buildpacks/configuration/#build-time-environment-variables), which matches your downloaded JDK version and the section in the [buildpack.toml](https://github.com/paketo-buildpacks/bellsoft-liberica/blob/main/buildpack.toml):\r\n\r\n    pack build your-application-name-here \\\r\n    \t--path . \\\r\n    \t--volume $(pwd)/bellsoft-jdk-config:/platform/bindings/bellsoft-jdk-config \\\r\n    \t--env BP_JVM_VERSION=11.0.9 \\\r\n    \t--builder paketobuildpacks/builder:base\r\n\r\nNow the bellsoft-liberica buildpack will download the JDK tar.gz from `http://your-accessible-uri-to/bellsoft-jdk11.0.9.1+1-linux-amd64.tar.gz`:\r\n\r\n    ...\r\n    Paketo BellSoft Liberica Buildpack 5.2.1\r\n      https://github.com/paketo-buildpacks/bellsoft-liberica\r\n      Build Configuration:\r\n        $BP_JVM_VERSION              11.0.9          the Java version\r\n      Launch Configuration:\r\n        $BPL_JVM_HEAD_ROOM           0               the headroom in memory calculation\r\n        $BPL_JVM_LOADED_CLASS_COUNT  35% of classes  the number of loaded classes in memory calculation\r\n        $BPL_JVM_THREAD_COUNT        250             the number of threads in memory calculation\r\n        $JAVA_TOOL_OPTIONS                           the JVM launch flags\r\n      BellSoft Liberica JDK 11.0.9: Contributing to layer\r\n        Downloading from http://your-accessible-uri-to/bellsoft-jdk11.0.9.1+1-linux-amd64.tar.gz \r\n    ...","title":"Cloud Native Buildpacks/Paketo with Java/Spring Boot: How to configure different JDK download uri (e.g. no access to github.com)","body":"<p><a href=\"https://paketo.io/docs/buildpacks/configuration/#dependency-mappings\" rel=\"noreferrer\">According to the docs</a>:</p>\n<blockquote>\n<p>Paketo Buildpacks may download dependencies from the internet. For\nexample, the Java Buildpack will download the BellSoft Liberica JRE\nfrom the Liberica github releases by default. If a dependency URI is inaccessible from the build environment, a binding can be used to map a new URI to a given dependency.</p>\n</blockquote>\n<p>Configuring bindings using the spring-boot-maven-plugin (or the Gradle plugin) requires Spring Boot 2.5+. If you are on an older version, you need to upgrade or switch over to <a href=\"https://buildpacks.io/docs/tools/pack/\" rel=\"noreferrer\">pack CLI</a>.</p>\n<p>=== <strong>Use pack CLI with bindings to configure a different JDK download uri</strong> ===</p>\n<p><a href=\"https://paketo.io/docs/buildpacks/configuration/#what-is-a-binding\" rel=\"noreferrer\">The pack docs</a> tell us about the general layout of a binding directory (<code>/platform/bindings</code> is later created inside the pack build container):</p>\n<pre><code>/chooseYourBindingsName\n├── key-name-of-our-buildpacks-binding-configuration\n└── type-name-of-our-buildpacks-binding-configuration\n</code></pre>\n<p><strong>1. Create bindings directory</strong></p>\n<p>So let's try to create a fully running example! In order to hand over the binding configuration to <code>pack</code> CLI we need to <strong>create a directory first</strong>:</p>\n<pre><code>mkdir bellsoft-jdk-config &amp;&amp; cd bellsoft-jdk-config\n</code></pre>\n<p><strong>2. Create file type, containing the binding key</strong></p>\n<p>Now we need to create a file called <code>type</code> inside this directory containing the binding key for <a href=\"https://github.com/paketo-buildpacks/bellsoft-liberica#type-dependency-mapping\" rel=\"noreferrer\">the bellsoft-liberica binding type <code>dependency-mapping</code></a>:</p>\n<pre><code>echo &quot;dependency-mapping&quot; &gt;&gt; type\n</code></pre>\n<p>A new file <code>type</code> should be present in the directory containing the string <code>dependency-mapping</code>.</p>\n<p><strong>3. Choose JDK version from buildpack.toml</strong></p>\n<p>As we want to change the bellsoft-liberica's download uri of the JDK, <strong>we need to decide which JDK version we exaclty want to use.</strong> The bellsoft-liberica buildpack's <a href=\"https://github.com/paketo-buildpacks/bellsoft-liberica/blob/main/buildpack.toml\" rel=\"noreferrer\">buildpack.toml</a> gives an overview on which JRE/JDK versions are available inside the buildpack. For this example here I used the latest JDK version <code>11</code> which is configured inside the <code>buildpack.toml</code> like this:</p>\n<pre><code>...\n\n[[metadata.dependencies]]\nid      = &quot;jdk&quot;\nname    = &quot;BellSoft Liberica JDK&quot;\nversion = &quot;11.0.9&quot;\nuri     = &quot;https://github.com/bell-sw/Liberica/releases/download/11.0.9.1+1/bellsoft-jdk11.0.9.1+1-linux-amd64.tar.gz&quot;\nsha256  = &quot;786c48fa6429d6a3f0afb189a65f0a43772e42afbab836852b9a1fdfdb8fc502&quot;\nstacks  = [ &quot;io.buildpacks.stacks.bionic&quot;, &quot;org.cloudfoundry.stacks.cflinuxfs3&quot; ]\n...\n</code></pre>\n<p><strong>4. Download JDK</strong></p>\n<p>Having decided on the version, <strong>we need to download the JDK from the location provided inside the <code>uri</code> field to a location we have access to later inside our build environment</strong> (since we don't have access to github.com). Let's assume, we have the JDK downloaded and available at <code>http://your-accessible-uri-to/bellsoft-jdk11.0.9.1+1-linux-amd64.tar.gz</code>.</p>\n<p><strong>5. Create file named as the sha256, containing the JDK uri</strong></p>\n<p>Now we should create another <strong>file named exactly according to the <code>sha256</code> digest value</strong> of the <code>[[metadata.dependencies]]</code> section of the JDK version we chose inside the <a href=\"https://github.com/paketo-buildpacks/bellsoft-liberica/blob/main/buildpack.toml\" rel=\"noreferrer\">buildpack.toml</a>. This file must contain the uri of our downloaded JDK:</p>\n<pre><code>echo &quot;http://your-accessible-uri-to/bellsoft-jdk11.0.9.1+1-linux-amd64.tar.gz&quot; &gt;&gt; 786c48fa6429d6a3f0afb189a65f0a43772e42afbab836852b9a1fdfdb8fc502\n</code></pre>\n<p>In the end our directory <code>bellsoft-jdk-config</code> should comply to <a href=\"https://paketo.io/docs/buildpacks/configuration/#what-is-a-binding\" rel=\"noreferrer\">the pack CLI bindings directory docs</a> and looks somehow like this:</p>\n<pre><code>/bellsoft-jdk-config\n├── 786c48fa6429d6a3f0afb189a65f0a43772e42afbab836852b9a1fdfdb8fc502\n└── type\n</code></pre>\n<p><strong>6. Execute pack CLI with --volume for binding &amp; BP_JVM_VERSION</strong></p>\n<p>Finally we can issue our <code>pack</code> CLI command. Ensure that <a href=\"https://buildpacks.io/docs/tools/pack/\" rel=\"noreferrer\">pack CLI is installed on your system</a>. Be also sure to also provide the exact JDK version number using the <code>--env BP_JVM_VERSION=exactJDKversionNumberHere</code> <a href=\"https://paketo.io/docs/buildpacks/configuration/#build-time-environment-variables\" rel=\"noreferrer\">environment variable configuration</a>, which matches your downloaded JDK version and the section in the <a href=\"https://github.com/paketo-buildpacks/bellsoft-liberica/blob/main/buildpack.toml\" rel=\"noreferrer\">buildpack.toml</a>:</p>\n<pre><code>pack build your-application-name-here \\\n    --path . \\\n    --volume $(pwd)/bellsoft-jdk-config:/platform/bindings/bellsoft-jdk-config \\\n    --env BP_JVM_VERSION=11.0.9 \\\n    --builder paketobuildpacks/builder:base\n</code></pre>\n<p>Now the bellsoft-liberica buildpack will download the JDK tar.gz from <code>http://your-accessible-uri-to/bellsoft-jdk11.0.9.1+1-linux-amd64.tar.gz</code>:</p>\n<pre><code>...\nPaketo BellSoft Liberica Buildpack 5.2.1\n  https://github.com/paketo-buildpacks/bellsoft-liberica\n  Build Configuration:\n    $BP_JVM_VERSION              11.0.9          the Java version\n  Launch Configuration:\n    $BPL_JVM_HEAD_ROOM           0               the headroom in memory calculation\n    $BPL_JVM_LOADED_CLASS_COUNT  35% of classes  the number of loaded classes in memory calculation\n    $BPL_JVM_THREAD_COUNT        250             the number of threads in memory calculation\n    $JAVA_TOOL_OPTIONS                           the JVM launch flags\n  BellSoft Liberica JDK 11.0.9: Contributing to layer\n    Downloading from http://your-accessible-uri-to/bellsoft-jdk11.0.9.1+1-linux-amd64.tar.gz \n...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9006206,"reputation":43,"user_id":6712820,"display_name":"Sebastian K."},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1643448082,"creation_date":1608224870,"answer_id":65345234,"question_id":65212231,"body_markdown":"I create bindings:\r\n \r\n```\r\n/bindings/bellsoft-jdk-config\r\n├── 786c48fa6429d6a3f0afb189a65f0a43772e42afbab836852b9a1fdfdb8fc502\r\n├── a3092627b082cb3cdbbe4b255d35687126aa604e6b613dcda33be9f7e1277162\r\n├── be27df8838a6d069a2212de5f46da4e39f33f087f2e77c8a725d0f7ec8b5273e\r\n├── d9ff2d84528a2154ff669b85e6dbdee7f244194dcc64e0a8a1bedc470b3bcf56\r\n└── type\r\n```\r\n \r\nThen created a Dockerfile that copies these bindings and builds a new platform based on the previous one:\r\n \r\n```Dockerfile\r\nFROM paketobuildpacks/builder:0.0.464-base-platform-api-0.3\r\n \r\nCOPY bindings /platform/bindings\r\n \r\nCMD [&quot;/bin/bash&quot;]\r\n```\r\n\r\n``` \r\ndocker build -t your-repo-url/java-builder-test:1 .\r\ndocker push your-repo-url/java-builder-test:1\r\n```\r\n\r\nthen I configured the spring plugin to use this platform:\r\n \r\n```\r\n&lt;configuration&gt;\r\n    &lt;imageBuilder&gt;your-repo-url/java-builder-test:1&lt;/imageBuilder&gt;\r\n    &lt;layers&gt;\r\n        &lt;enabled&gt;true&lt;/enabled&gt;\r\n    &lt;/layers&gt;\r\n    &lt;image&gt;\r\n        &lt;name&gt;your-repo-url/${project.artifactId}:${project.version}&lt;/name&gt;\r\n    &lt;/image&gt;\r\n&lt;/configuration&gt;\r\n```\r\n \r\nThis workaround worked, but you have to use correct directory permission.","title":"Cloud Native Buildpacks/Paketo with Java/Spring Boot: How to configure different JDK download uri (e.g. no access to github.com)","body":"<p>I create bindings:</p>\n<pre><code>/bindings/bellsoft-jdk-config\n├── 786c48fa6429d6a3f0afb189a65f0a43772e42afbab836852b9a1fdfdb8fc502\n├── a3092627b082cb3cdbbe4b255d35687126aa604e6b613dcda33be9f7e1277162\n├── be27df8838a6d069a2212de5f46da4e39f33f087f2e77c8a725d0f7ec8b5273e\n├── d9ff2d84528a2154ff669b85e6dbdee7f244194dcc64e0a8a1bedc470b3bcf56\n└── type\n</code></pre>\n<p>Then created a Dockerfile that copies these bindings and builds a new platform based on the previous one:</p>\n<pre><code>FROM paketobuildpacks/builder:0.0.464-base-platform-api-0.3\n \nCOPY bindings /platform/bindings\n \nCMD [&quot;/bin/bash&quot;]\n</code></pre>\n<pre><code>docker build -t your-repo-url/java-builder-test:1 .\ndocker push your-repo-url/java-builder-test:1\n</code></pre>\n<p>then I configured the spring plugin to use this platform:</p>\n<pre><code>&lt;configuration&gt;\n    &lt;imageBuilder&gt;your-repo-url/java-builder-test:1&lt;/imageBuilder&gt;\n    &lt;layers&gt;\n        &lt;enabled&gt;true&lt;/enabled&gt;\n    &lt;/layers&gt;\n    &lt;image&gt;\n        &lt;name&gt;your-repo-url/${project.artifactId}:${project.version}&lt;/name&gt;\n    &lt;/image&gt;\n&lt;/configuration&gt;\n</code></pre>\n<p>This workaround worked, but you have to use correct directory permission.</p>\n"},{"tags":[],"owner":{"account_id":16606113,"reputation":609,"user_id":12000556,"display_name":"Govind Kumar Thakur"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1643448151,"creation_date":1636518849,"answer_id":69908034,"question_id":65212231,"body_markdown":"I changed my Java version in pom.xml to 17:\r\n\r\n    &lt;properties&gt;\r\n    \t&lt;java.version&gt;17&lt;/java.version&gt;\r\n    \t&lt;spring-cloud.version&gt;2020.0.2&lt;/spring-cloud.version&gt;\r\n    &lt;/properties&gt;","title":"Cloud Native Buildpacks/Paketo with Java/Spring Boot: How to configure different JDK download uri (e.g. no access to github.com)","body":"<p>I changed my Java version in pom.xml to 17:</p>\n<pre><code>&lt;properties&gt;\n    &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;spring-cloud.version&gt;2020.0.2&lt;/spring-cloud.version&gt;\n&lt;/properties&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24151613,"reputation":1,"user_id":18116372,"display_name":"Aparna Bhumkar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643953341,"creation_date":1643953341,"answer_id":70981921,"question_id":65212231,"body_markdown":"I changed the java version in pom.xml file to 17 and it worked!","title":"Cloud Native Buildpacks/Paketo with Java/Spring Boot: How to configure different JDK download uri (e.g. no access to github.com)","body":"<p>I changed the java version in pom.xml file to 17 and it worked!</p>\n"},{"tags":[],"owner":{"account_id":24312643,"reputation":1,"user_id":18254393,"display_name":"Anil Pal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645293028,"creation_date":1645293028,"answer_id":71187612,"question_id":65212231,"body_markdown":"Change the Java version in pom.xml and it will work. i have changed it to java 17. and it worked for me.","title":"Cloud Native Buildpacks/Paketo with Java/Spring Boot: How to configure different JDK download uri (e.g. no access to github.com)","body":"<p>Change the Java version in pom.xml and it will work. i have changed it to java 17. and it worked for me.</p>\n"}],"owner":{"account_id":6402290,"reputation":12668,"user_id":4964553,"display_name":"jonashackt"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7422,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":65212256,"answer_count":5,"score":5,"last_activity_date":1661083018,"creation_date":1607498334,"question_id":65212231,"body_markdown":"Having a Spring Boot app I tried to build it using the `spring-boot-maven-plugin` goal `mvn spring-boot:build-image`. But the build fails downloading the `bellsoft-jre11.0.9.1+1-linux-amd64.tar.gz` from `github.com`, since I don&#39;t have access to it from my build pipeline:\r\n\r\n    ...\r\n    Paketo BellSoft Liberica Buildpack 5.2.1\r\n      https://github.com/paketo-buildpacks/bellsoft-liberica\r\n      Build Configuration:\r\n        $BP_JVM_VERSION              11.0.9          the Java version\r\n      Launch Configuration:\r\n        $BPL_JVM_HEAD_ROOM           0               the headroom in memory calculation\r\n        $BPL_JVM_LOADED_CLASS_COUNT  35% of classes  the number of loaded classes in memory calculation\r\n        $BPL_JVM_THREAD_COUNT        250             the number of threads in memory calculation\r\n        $JAVA_TOOL_OPTIONS                           the JVM launch flags\r\n      BellSoft Liberica JDK 11.0.9: Contributing to layer\r\n        Downloading from https://github.com/bell-sw/Liberica/releases/download/11.0.9.1+1/bellsoft-jdk11.0.9.1+1-linux-amd64.tar.gz\r\n    unable to invoke layer creator\r\n    unable to get dependency jdk\r\n    unable to download https://github.com/bell-sw/Liberica/releases/download/11.0.9.1+1/bellsoft-jdk11.0.9.1+1-linux-amd64.tar.gz\r\n    unable to request https://github.com/bell-sw/Liberica/releases/download/11.0.9.1+1/bellsoft-jdk11.0.9.1+1-linux-amd64.tar.gz\r\n    ERROR: failed to build: exit status 1\r\n\r\nIs there a way I can download the `bellsoft-jdk11.0.9.1+1-linux-amd64.tar.gz` to a location accessible to my build pipeline and configure the bellsoft-liberica buildpack to use this instead?","title":"Cloud Native Buildpacks/Paketo with Java/Spring Boot: How to configure different JDK download uri (e.g. no access to github.com)","body":"<p>Having a Spring Boot app I tried to build it using the <code>spring-boot-maven-plugin</code> goal <code>mvn spring-boot:build-image</code>. But the build fails downloading the <code>bellsoft-jre11.0.9.1+1-linux-amd64.tar.gz</code> from <code>github.com</code>, since I don't have access to it from my build pipeline:</p>\n<pre><code>...\nPaketo BellSoft Liberica Buildpack 5.2.1\n  https://github.com/paketo-buildpacks/bellsoft-liberica\n  Build Configuration:\n    $BP_JVM_VERSION              11.0.9          the Java version\n  Launch Configuration:\n    $BPL_JVM_HEAD_ROOM           0               the headroom in memory calculation\n    $BPL_JVM_LOADED_CLASS_COUNT  35% of classes  the number of loaded classes in memory calculation\n    $BPL_JVM_THREAD_COUNT        250             the number of threads in memory calculation\n    $JAVA_TOOL_OPTIONS                           the JVM launch flags\n  BellSoft Liberica JDK 11.0.9: Contributing to layer\n    Downloading from https://github.com/bell-sw/Liberica/releases/download/11.0.9.1+1/bellsoft-jdk11.0.9.1+1-linux-amd64.tar.gz\nunable to invoke layer creator\nunable to get dependency jdk\nunable to download https://github.com/bell-sw/Liberica/releases/download/11.0.9.1+1/bellsoft-jdk11.0.9.1+1-linux-amd64.tar.gz\nunable to request https://github.com/bell-sw/Liberica/releases/download/11.0.9.1+1/bellsoft-jdk11.0.9.1+1-linux-amd64.tar.gz\nERROR: failed to build: exit status 1\n</code></pre>\n<p>Is there a way I can download the <code>bellsoft-jdk11.0.9.1+1-linux-amd64.tar.gz</code> to a location accessible to my build pipeline and configure the bellsoft-liberica buildpack to use this instead?</p>\n"},{"tags":["java","android","xml"],"answers":[{"tags":[],"owner":{"account_id":2358246,"reputation":8471,"user_id":2065587,"display_name":"mmBs"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1661082843,"creation_date":1661082843,"answer_id":73434164,"question_id":73434080,"body_markdown":"Here you have an answer: https://stackoverflow.com/a/45953855/2065587\r\n\r\nAlso, to create a shape you can follow this thread: https://stackoverflow.com/questions/30831242/simplest-way-to-create-a-shape-in-android-studio\r\n\r\nThen, you can use your shape as a background in your `RecyclerView` item.","title":"How to Create Shapes with code in Android","body":"<p>Here you have an answer: <a href=\"https://stackoverflow.com/a/45953855/2065587\">https://stackoverflow.com/a/45953855/2065587</a></p>\n<p>Also, to create a shape you can follow this thread: <a href=\"https://stackoverflow.com/questions/30831242/simplest-way-to-create-a-shape-in-android-studio\">Simplest way to create a Shape in Android Studio</a></p>\n<p>Then, you can use your shape as a background in your <code>RecyclerView</code> item.</p>\n"}],"owner":{"account_id":20941623,"reputation":31,"user_id":15385543,"display_name":"Jonathan Schuder"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73434164,"answer_count":1,"score":0,"last_activity_date":1661082843,"creation_date":1661082094,"question_id":73434080,"body_markdown":"I have an Array List and for every Item, in the Array, I want to create a shape with a Title which should be the String in the Array. \r\nThe Blocks should be scroled through horizontally.\r\n\r\n[![example][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/IFJcYm.png\r\n\r\n\r\nI dont know how to add shapes with code, do I have to create a drawable and how do I make it scrollable?","title":"How to Create Shapes with code in Android","body":"<p>I have an Array List and for every Item, in the Array, I want to create a shape with a Title which should be the String in the Array.\nThe Blocks should be scroled through horizontally.</p>\n<p><a href=\"https://i.stack.imgur.com/IFJcYm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IFJcYm.png\" alt=\"example\" /></a></p>\n<p>I dont know how to add shapes with code, do I have to create a drawable and how do I make it scrollable?</p>\n"},{"tags":["java","intellij-idea","annotations","structural-search"],"answers":[{"tags":[],"owner":{"account_id":3169,"reputation":24379,"user_id":4510,"display_name":"Bas Leijdekkers"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661082331,"creation_date":1661082331,"answer_id":73434112,"question_id":73431140,"body_markdown":"Something like the following Structural Search &amp; Replace should work.\r\n\r\n#### Search template:\r\n\r\n```\r\n@Test($groups$ = $v$)\r\n```\r\n\r\nModifiers:  \r\n`$group$` - text=`groups`, count=`[0,0]`\r\n\r\n\r\n#### Replace template:\r\n```\r\n@Test(timeOut=100L)\r\n```\r\n\r\nOr copy the following complete template and `Import Template from Clipboard`:\r\n```\r\n&lt;replaceConfiguration name=&quot;Add time-out to @Test&quot; text=&quot;@Test($groups$ = $v$)&quot; recursive=&quot;false&quot; type=&quot;JAVA&quot; pattern_context=&quot;default&quot; reformatAccordingToStyle=&quot;true&quot; shortenFQN=&quot;true&quot; replacement=&quot;@Test(timeOut=100L)&quot; case_sensitive=&quot;true&quot;&gt;\r\n  &lt;constraint name=&quot;__context__&quot; within=&quot;&quot; contains=&quot;&quot; /&gt;\r\n  &lt;constraint name=&quot;groups&quot; regexp=&quot;groups&quot; minCount=&quot;0&quot; maxCount=&quot;0&quot; within=&quot;&quot; contains=&quot;&quot; /&gt;\r\n  &lt;constraint name=&quot;v&quot; within=&quot;&quot; contains=&quot;&quot; /&gt;\r\n&lt;/replaceConfiguration&gt;\r\n````","title":"how to find and replace annotations based on parameters?","body":"<p>Something like the following Structural Search &amp; Replace should work.</p>\n<h4>Search template:</h4>\n<pre><code>@Test($groups$ = $v$)\n</code></pre>\n<p>Modifiers:<br />\n<code>$group$</code> - text=<code>groups</code>, count=<code>[0,0]</code></p>\n<h4>Replace template:</h4>\n<pre><code>@Test(timeOut=100L)\n</code></pre>\n<p>Or copy the following complete template and <code>Import Template from Clipboard</code>:</p>\n<pre><code>&lt;replaceConfiguration name=&quot;Add time-out to @Test&quot; text=&quot;@Test($groups$ = $v$)&quot; recursive=&quot;false&quot; type=&quot;JAVA&quot; pattern_context=&quot;default&quot; reformatAccordingToStyle=&quot;true&quot; shortenFQN=&quot;true&quot; replacement=&quot;@Test(timeOut=100L)&quot; case_sensitive=&quot;true&quot;&gt;\n  &lt;constraint name=&quot;__context__&quot; within=&quot;&quot; contains=&quot;&quot; /&gt;\n  &lt;constraint name=&quot;groups&quot; regexp=&quot;groups&quot; minCount=&quot;0&quot; maxCount=&quot;0&quot; within=&quot;&quot; contains=&quot;&quot; /&gt;\n  &lt;constraint name=&quot;v&quot; within=&quot;&quot; contains=&quot;&quot; /&gt;\n&lt;/replaceConfiguration&gt;\n</code></pre>\n"}],"owner":{"account_id":23015633,"reputation":187,"user_id":17186230,"display_name":"gabriel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1661082331,"creation_date":1661046216,"question_id":73431140,"body_markdown":"I have a big java project using TestNG Test annotation.\r\n\r\nI want to add parameter `timeOut=100L` to all tests, that are not part of a group (defined via Test Annotation parameters). We use groups for functional/integration/etc. I want to impact only unit tests, which lack any group.\r\n\r\nMy unit tests (which are the ones I want to match) have `@Test` annotation by itself, or other parameters. e.g.\r\n```\r\n@Test\r\npublic void aSimpleTest() \r\n{\r\n...\r\n\r\n@Test(expectedExceptions = SomeException.class,\r\n        expectedExceptionsMessageRegExp = &quot;my error message&quot;,\r\n        description = &quot;Test will fail validation on X&quot;)\r\npublic void aSimpleTestWithAnotatedParameters() {\r\n...\r\n\r\n@Test(dataProvider = &quot;testDataProvider&quot;)\r\npublic void aSimpleTestWithAnotatedParameters(Int InputVal) {\r\n...\r\n```\r\n\r\nMy first attempt was using IntelliJ Structural Find and Replace:\r\n\r\nSearch Template:\r\n```\r\n@$Annotation$($param1$ = $value1$,/*...*/ $paramN$ = $valueN$)\r\n```\r\nwith Modifiers for both param1 and paramN: `Text=!groups`\r\n\r\nreplace with:\r\n```\r\n@$Annotation$(timeOut = 100L, $param1$ = $value1$,/*...*/ $paramN$ = $valueN$)\r\n```\r\n\r\nWhich almost works!\r\n\r\nThe problem I can&#39;t solve is that it also matches things like:\r\n```\r\n@Test(description = &quot;should not match this test, but it does&quot;, groups = &quot;SlowIntegrationTest&quot;)\r\n```\r\n\r\nThat is, Annotations with parameters other than group. The ones that have *only* group are not matched.\r\n\r\n\r\n","title":"how to find and replace annotations based on parameters?","body":"<p>I have a big java project using TestNG Test annotation.</p>\n<p>I want to add parameter <code>timeOut=100L</code> to all tests, that are not part of a group (defined via Test Annotation parameters). We use groups for functional/integration/etc. I want to impact only unit tests, which lack any group.</p>\n<p>My unit tests (which are the ones I want to match) have <code>@Test</code> annotation by itself, or other parameters. e.g.</p>\n<pre><code>@Test\npublic void aSimpleTest() \n{\n...\n\n@Test(expectedExceptions = SomeException.class,\n        expectedExceptionsMessageRegExp = &quot;my error message&quot;,\n        description = &quot;Test will fail validation on X&quot;)\npublic void aSimpleTestWithAnotatedParameters() {\n...\n\n@Test(dataProvider = &quot;testDataProvider&quot;)\npublic void aSimpleTestWithAnotatedParameters(Int InputVal) {\n...\n</code></pre>\n<p>My first attempt was using IntelliJ Structural Find and Replace:</p>\n<p>Search Template:</p>\n<pre><code>@$Annotation$($param1$ = $value1$,/*...*/ $paramN$ = $valueN$)\n</code></pre>\n<p>with Modifiers for both param1 and paramN: <code>Text=!groups</code></p>\n<p>replace with:</p>\n<pre><code>@$Annotation$(timeOut = 100L, $param1$ = $value1$,/*...*/ $paramN$ = $valueN$)\n</code></pre>\n<p>Which almost works!</p>\n<p>The problem I can't solve is that it also matches things like:</p>\n<pre><code>@Test(description = &quot;should not match this test, but it does&quot;, groups = &quot;SlowIntegrationTest&quot;)\n</code></pre>\n<p>That is, Annotations with parameters other than group. The ones that have <em>only</em> group are not matched.</p>\n"},{"tags":["java","spring","spring-boot","jpa"],"answers":[{"tags":[],"owner":{"account_id":25539720,"reputation":446,"user_id":19326039,"display_name":"Nikolay"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661082321,"creation_date":1660156828,"answer_id":73311209,"question_id":73311136,"body_markdown":"Your question is not bad, you want to make it better, but you are already doing it, like it is supposed to be done.\r\n\r\nHowever, having a lot of fields in a table, could indicate a problem in the DB design, if you are not using Cassandra or something like that.","title":"The best way to update entity in spring boot","body":"<p>Your question is not bad, you want to make it better, but you are already doing it, like it is supposed to be done.</p>\n<p>However, having a lot of fields in a table, could indicate a problem in the DB design, if you are not using Cassandra or something like that.</p>\n"},{"tags":[],"owner":{"account_id":7778530,"reputation":3138,"user_id":9860374,"display_name":"Matheus"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1660157213,"creation_date":1660157213,"answer_id":73311277,"question_id":73311136,"body_markdown":"You could use an entity mapper like [MapStruct][1] or [ModelMapper][2]\r\n\r\nA ModelMapper example:\r\n\r\n    ModelMapper mapper = new ModelMapper();\r\n    // this will tell ModelMapper to ignore null fields when mapping the source (newData) to the destination (user)\r\n    mapper.getConfiguration().setSkipNullEnabled(true);\r\n    \r\n    UserEntity user = userRepo.findById(userId).orElseThrow();\r\n    // this will tell ModelMapper to map newData into user\r\n    mapper.map(newData, user);\r\n\r\n\r\n  [1]: https://mapstruct.org/\r\n  [2]: http://modelmapper.org/","title":"The best way to update entity in spring boot","body":"<p>You could use an entity mapper like <a href=\"https://mapstruct.org/\" rel=\"nofollow noreferrer\">MapStruct</a> or <a href=\"http://modelmapper.org/\" rel=\"nofollow noreferrer\">ModelMapper</a></p>\n<p>A ModelMapper example:</p>\n<pre><code>ModelMapper mapper = new ModelMapper();\n// this will tell ModelMapper to ignore null fields when mapping the source (newData) to the destination (user)\nmapper.getConfiguration().setSkipNullEnabled(true);\n\nUserEntity user = userRepo.findById(userId).orElseThrow();\n// this will tell ModelMapper to map newData into user\nmapper.map(newData, user);\n</code></pre>\n"}],"owner":{"account_id":20204611,"reputation":559,"user_id":14819402,"display_name":"Cross"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1634,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":73311277,"answer_count":2,"score":1,"last_activity_date":1661082321,"creation_date":1660156371,"question_id":73311136,"body_markdown":"I&#39;m new to spring boot and trying to make my first api. I&#39;ve made a lot of apis on python using FastAPI framework, but now i decided to study this technology. But here, I met a problem. So I&#39;m using the jpa for database communication and I don&#39;t really understand how to update entity&#39;s fields correctly. \r\n\r\nI&#39;ve read a lot of guidelines, and all of them says that updating an entity carried out like this:\r\n```java\r\n    public void updateUserInDatabase(long userId, UserUpdateModel newData) {\r\n        UserEntity user = userRepo.findById(userId).orElseThrow();\r\n        if(newData.getUsername() != null) {\r\n            user.setUsername(newData.getUsername());\r\n        }\r\n        if(newData.getPassword() != null) {\r\n            user.setPassword(newData.getPassword());\r\n        }\r\n    }\r\n```\r\nBut I think it&#39;s not useful as ```newData``` can have a lot of fields, so for updating an entity I&#39;ll need a lot of conditions. \r\n\r\nSo, yeah, maybe this question is not good, but I really try to understand XD.\r\n","title":"The best way to update entity in spring boot","body":"<p>I'm new to spring boot and trying to make my first api. I've made a lot of apis on python using FastAPI framework, but now i decided to study this technology. But here, I met a problem. So I'm using the jpa for database communication and I don't really understand how to update entity's fields correctly.</p>\n<p>I've read a lot of guidelines, and all of them says that updating an entity carried out like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public void updateUserInDatabase(long userId, UserUpdateModel newData) {\n        UserEntity user = userRepo.findById(userId).orElseThrow();\n        if(newData.getUsername() != null) {\n            user.setUsername(newData.getUsername());\n        }\n        if(newData.getPassword() != null) {\n            user.setPassword(newData.getPassword());\n        }\n    }\n</code></pre>\n<p>But I think it's not useful as <code>newData</code> can have a lot of fields, so for updating an entity I'll need a lot of conditions.</p>\n<p>So, yeah, maybe this question is not good, but I really try to understand XD.</p>\n"},{"tags":["java","thymeleaf"],"comments":[{"owner":{"account_id":4610643,"reputation":1454,"user_id":3738870,"display_name":"user3738870"},"score":0,"creation_date":1660829801,"post_id":73403803,"comment_id":129629542,"body_markdown":"I think you need to add a condition for displaying the `img`. Something like `&lt;img th:if=&quot;${randomSummerCamps.image != null}&quot; alt=&quot;sample&quot; th:src= ...`","body":"I think you need to add a condition for displaying the <code>img</code>. Something like <code>&lt;img th:if=&quot;${randomSummerCamps.image != null}&quot; alt=&quot;sample&quot; th:src= ...</code>"},{"owner":{"account_id":26021002,"reputation":33,"user_id":19728708,"display_name":"Stefan Jankovic"},"score":1,"creation_date":1661081651,"post_id":73403803,"comment_id":129682036,"body_markdown":"That works, thanks! I didnt know I can use `if` inside html like that","body":"That works, thanks! I didnt know I can use <code>if</code> inside html like that"},{"owner":{"account_id":4610643,"reputation":1454,"user_id":3738870,"display_name":"user3738870"},"score":0,"creation_date":1661082128,"post_id":73403803,"comment_id":129682133,"body_markdown":"Nice, I&#39;ve added it as an answer too.","body":"Nice, I&#39;ve added it as an answer too."}],"answers":[{"tags":[],"owner":{"account_id":4610643,"reputation":1454,"user_id":3738870,"display_name":"user3738870"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1661082085,"creation_date":1661082085,"answer_id":73434078,"question_id":73403803,"body_markdown":"The code you posted is not simple HTML, it&#39;s written in a template engine called [Thymeleaf][1]. In this engine, it&#39;s possible to add a conditional HTML tag (`&lt;img&gt;`) in the following way:\r\n```thyme\r\n    &lt;img th:if=&quot;${randomSummerCamps.image != null}&quot; alt=&quot;sample&quot; th:src=&quot;*{&#39;data:image/png;base64,&#39;+image}&quot; src=&quot;&quot;/&gt;\r\n```\r\n\r\nNow the `&lt;img&gt;` tag will only be present in the resulting HTML if the source image is not missing (not `null`).\r\n\r\n  [1]: https://www.thymeleaf.org/","title":"Image appear for each document instead for just one","body":"<p>The code you posted is not simple HTML, it's written in a template engine called <a href=\"https://www.thymeleaf.org/\" rel=\"nofollow noreferrer\">Thymeleaf</a>. In this engine, it's possible to add a conditional HTML tag (<code>&lt;img&gt;</code>) in the following way:</p>\n<pre><code>    &lt;img th:if=&quot;${randomSummerCamps.image != null}&quot; alt=&quot;sample&quot; th:src=&quot;*{'data:image/png;base64,'+image}&quot; src=&quot;&quot;/&gt;\n</code></pre>\n<p>Now the <code>&lt;img&gt;</code> tag will only be present in the resulting HTML if the source image is not missing (not <code>null</code>).</p>\n"}],"owner":{"account_id":26021002,"reputation":33,"user_id":19728708,"display_name":"Stefan Jankovic"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73434078,"answer_count":1,"score":1,"last_activity_date":1661082085,"creation_date":1660828760,"question_id":73403803,"body_markdown":"I have two documents in collection:\r\n\r\n`doc1`\r\n\r\n    id: 1\r\n    title: &quot;example&quot;\r\n    image: &quot;binary numbers...&quot;\r\n\r\n`doc2`\r\n\r\n    id: 2\r\n    title: &quot;example2&quot;\r\n\r\nAnd I have this API to return random document from collection:\r\n\r\n    @GetMapping(&quot;/getRandomSummerCamps&quot;)\r\n    public String getRandomSummerCamps(Model model) {\r\n        countSummerCamps.incrementAndGet();\r\n        if (getCountSummerCamps() &lt;= adventureHolidaysService.countAdventureHolidays(&quot;summerCamps&quot;)) {\r\n            AdventureHolidays photo = adventureHolidaysService.getPhoto();\r\n            model.addAttribute(&quot;randomSummerCamps&quot;, adventureHolidaysService.findRandomAdventureHolidays(&quot;summerCamps&quot;));\r\n            System.out.println(&quot;in if&quot;);\r\n            model.addAttribute(&quot;randomImage&quot;, Base64.getEncoder().encodeToString(photo.getImage().getData()));\r\n            return &quot;randomSummerCamps&quot;;\r\n        } else {\r\n            countSummerCamps.set(0);\r\n            return &quot;noMoreDoc&quot;;\r\n        }\r\n    }\r\n\r\nAnd I have this inside HTML \r\n\r\n    &lt;tr th:each=&quot;randomSummerCamps:${randomSummerCamps}&quot;&gt;\r\n    &lt;div class=&quot;title&quot;&gt;\r\n        &lt;h1&gt;We think this trip best suit you.&lt;/h1&gt;\r\n        &lt;h1 th:text=&quot;${randomSummerCamps.title}&quot;&gt;&lt;/h1&gt;\r\n        &lt;h1 th:text=&quot;${randomSummerCamps.state}&quot;&gt;&lt;/h1&gt;\r\n        &lt;div class=&quot;description&quot;&gt;\r\n            &lt;td th:text=&quot;${randomSummerCamps.description}&quot;&gt;&lt;/td&gt;\r\n        &lt;/div&gt;\r\n        &lt;img alt=&quot;sample&quot; th:src=&quot;*{&#39;data:image/png;base64,&#39;+image}&quot; src=&quot;&quot;/&gt;\r\n        &lt;button type=&quot;button&quot; onclick=&quot;document.location.href = &#39;/adventureHolidays/getRandomSummerCamps&#39;&quot;&gt;Randomize\r\n            again!\r\n        &lt;/button&gt;\r\n    &lt;/div&gt;\r\n&lt;/tr&gt;\r\n\r\nWhat is problem, image appear for both documents instead for just one, the first one where image is saved. Other fields as `title` and `state` are fine, I get them well for each document but I get image for both instead for just first document.\r\n\r\n\r\n\r\n\r\n","title":"Image appear for each document instead for just one","body":"<p>I have two documents in collection:</p>\n<p><code>doc1</code></p>\n<pre><code>id: 1\ntitle: &quot;example&quot;\nimage: &quot;binary numbers...&quot;\n</code></pre>\n<p><code>doc2</code></p>\n<pre><code>id: 2\ntitle: &quot;example2&quot;\n</code></pre>\n<p>And I have this API to return random document from collection:</p>\n<pre><code>@GetMapping(&quot;/getRandomSummerCamps&quot;)\npublic String getRandomSummerCamps(Model model) {\n    countSummerCamps.incrementAndGet();\n    if (getCountSummerCamps() &lt;= adventureHolidaysService.countAdventureHolidays(&quot;summerCamps&quot;)) {\n        AdventureHolidays photo = adventureHolidaysService.getPhoto();\n        model.addAttribute(&quot;randomSummerCamps&quot;, adventureHolidaysService.findRandomAdventureHolidays(&quot;summerCamps&quot;));\n        System.out.println(&quot;in if&quot;);\n        model.addAttribute(&quot;randomImage&quot;, Base64.getEncoder().encodeToString(photo.getImage().getData()));\n        return &quot;randomSummerCamps&quot;;\n    } else {\n        countSummerCamps.set(0);\n        return &quot;noMoreDoc&quot;;\n    }\n}\n</code></pre>\n<p>And I have this inside HTML</p>\n<pre><code>&lt;tr th:each=&quot;randomSummerCamps:${randomSummerCamps}&quot;&gt;\n&lt;div class=&quot;title&quot;&gt;\n    &lt;h1&gt;We think this trip best suit you.&lt;/h1&gt;\n    &lt;h1 th:text=&quot;${randomSummerCamps.title}&quot;&gt;&lt;/h1&gt;\n    &lt;h1 th:text=&quot;${randomSummerCamps.state}&quot;&gt;&lt;/h1&gt;\n    &lt;div class=&quot;description&quot;&gt;\n        &lt;td th:text=&quot;${randomSummerCamps.description}&quot;&gt;&lt;/td&gt;\n    &lt;/div&gt;\n    &lt;img alt=&quot;sample&quot; th:src=&quot;*{'data:image/png;base64,'+image}&quot; src=&quot;&quot;/&gt;\n    &lt;button type=&quot;button&quot; onclick=&quot;document.location.href = '/adventureHolidays/getRandomSummerCamps'&quot;&gt;Randomize\n        again!\n    &lt;/button&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>What is problem, image appear for both documents instead for just one, the first one where image is saved. Other fields as <code>title</code> and <code>state</code> are fine, I get them well for each document but I get image for both instead for just first document.</p>\n"},{"tags":["java","intellij-idea","annotations","structural-search"],"comments":[{"owner":{"account_id":13252051,"reputation":1635,"user_id":9569292,"display_name":"Thomas Timbul"},"score":0,"creation_date":1523445463,"post_id":49773467,"comment_id":86562180,"body_markdown":"Can you somehow use `name= &quot; seq_gen&quot;, $param$ = $value$` with multiple occurrences of the latter?","body":"Can you somehow use <code>name= &quot; seq_gen&quot;, $param$ = $value$</code> with multiple occurrences of the latter?"},{"owner":{"account_id":335756,"reputation":1663,"user_id":663012,"accept_rate":80,"display_name":"Czar"},"score":0,"creation_date":1523445976,"post_id":49773467,"comment_id":86562531,"body_markdown":"If I do it like that and specify `1, ∞` for `$param$` and `$value$` the result comes out with the latter part as `$param$ $param$ = $value$, $value` O_o E.g. `@SequenceGenerator(name = &quot;BankAccountTurnover_seq_gen&quot;, sequenceName allocationSize = &quot;bank_account_turnovers_seq&quot;,1)`","body":"If I do it like that and specify <code>1, ∞</code> for <code>$param$</code> and <code>$value$</code> the result comes out with the latter part as <code>$param$ $param$ = $value$, $value</code> O_o E.g. <code>@SequenceGenerator(name = &quot;BankAccountTurnover_seq_gen&quot;, sequenceName allocationSize = &quot;bank_account_turnovers_seq&quot;,1)</code>"},{"owner":{"account_id":3169,"reputation":24379,"user_id":4510,"display_name":"Bas Leijdekkers"},"score":0,"creation_date":1568815485,"post_id":49773467,"comment_id":102395862,"body_markdown":"The patterns in the question work without problems in IntelliJ IDEA 2019.3 (which is in early access program at thee moment)","body":"The patterns in the question work without problems in IntelliJ IDEA 2019.3 (which is in early access program at thee moment)"}],"answers":[{"tags":[],"owner":{"account_id":335756,"reputation":1663,"user_id":663012,"accept_rate":80,"display_name":"Czar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1523453622,"creation_date":1523453622,"answer_id":49776547,"question_id":49773467,"body_markdown":"I&#39;ve found an ugly work around, just do this for all possible N:\r\n\r\nSearch:\r\n\r\n    @SequenceGenerator(name = &quot;$VALUE$&quot;, $param1$ = $value1$,/*...*/ $paramN$ = $valueN$)\r\n    class $Class$ {}\r\n\r\nReplacement:\r\n\r\n    @SequenceGenerator(name = &quot;$Class$_$VALUE$&quot;, $param1$ = $value1$,/*...*/ $paramN$ = $valueN$)\r\n    class $Class$ {}\r\n\r\nI really don&#39;t want this to be the real answer, so I won&#39;t be accepting it for the duration of the next week, in hopes that someone provides a better answer :)","title":"How to structurally replace value of one parameter of an annotation in IntelliJ","body":"<p>I've found an ugly work around, just do this for all possible N:</p>\n\n<p>Search:</p>\n\n<pre><code>@SequenceGenerator(name = \"$VALUE$\", $param1$ = $value1$,/*...*/ $paramN$ = $valueN$)\nclass $Class$ {}\n</code></pre>\n\n<p>Replacement:</p>\n\n<pre><code>@SequenceGenerator(name = \"$Class$_$VALUE$\", $param1$ = $value1$,/*...*/ $paramN$ = $valueN$)\nclass $Class$ {}\n</code></pre>\n\n<p>I really don't want this to be the real answer, so I won't be accepting it for the duration of the next week, in hopes that someone provides a better answer :)</p>\n"},{"tags":[],"owner":{"account_id":3169,"reputation":24379,"user_id":4510,"display_name":"Bas Leijdekkers"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1661081358,"creation_date":1523471358,"answer_id":49782145,"question_id":49773467,"body_markdown":"This used to be difficult to accomplish because of a [bug][1] in Structural Search relating to annotation parameters. This bug has been fixed. Currently you can use the first suggestion in the question: \r\n\r\nSearch template:\r\n```\r\n@SequenceGenerator(name = &quot;seq_gen&quot;)\r\nclass $Class$ {}\r\n```\r\n\r\nReplacement template:\r\n```\r\n@SequenceGenerator(name = &quot;$Class$_seq_gen&quot;)\r\nclass $Class$ {}\r\n```\r\n\r\n#### Old workaround\r\n\r\nPreviously a workaround was needed, which used a replacement variable and Groovy script. Like the following search template:\r\n\r\n    @SequenceGenerator(name = $value$)\r\n    class $Class$ {}\r\n\r\n#### $value$ constraints\r\ntext/regexp: `&quot;seq_gen&quot;` (including quotes)  \r\nThis variable is target of the search: enabled\r\n\r\n\r\nReplacement template: \r\n\r\n    $replacement$\r\n\r\n#### $replacement$ script constraints\r\nscript text: \r\n\r\n    import com.intellij.psi.util.PsiTreeUtil\r\n    import com.intellij.psi.PsiClass\r\n\r\n    def x = PsiTreeUtil.getParentOfType(value, PsiClass.class);\r\n    &quot;\\&quot;&quot; + x.name + &quot;_seq_gen\\&quot;&quot;\r\n\r\n[1]: https://youtrack.jetbrains.com/issue/IDEA-65982","title":"How to structurally replace value of one parameter of an annotation in IntelliJ","body":"<p>This used to be difficult to accomplish because of a <a href=\"https://youtrack.jetbrains.com/issue/IDEA-65982\" rel=\"nofollow noreferrer\">bug</a> in Structural Search relating to annotation parameters. This bug has been fixed. Currently you can use the first suggestion in the question:</p>\n<p>Search template:</p>\n<pre><code>@SequenceGenerator(name = &quot;seq_gen&quot;)\nclass $Class$ {}\n</code></pre>\n<p>Replacement template:</p>\n<pre><code>@SequenceGenerator(name = &quot;$Class$_seq_gen&quot;)\nclass $Class$ {}\n</code></pre>\n<h4>Old workaround</h4>\n<p>Previously a workaround was needed, which used a replacement variable and Groovy script. Like the following search template:</p>\n<pre><code>@SequenceGenerator(name = $value$)\nclass $Class$ {}\n</code></pre>\n<h4>$value$ constraints</h4>\n<p>text/regexp: <code>&quot;seq_gen&quot;</code> (including quotes)<br />\nThis variable is target of the search: enabled</p>\n<p>Replacement template:</p>\n<pre><code>$replacement$\n</code></pre>\n<h4>$replacement$ script constraints</h4>\n<p>script text:</p>\n<pre><code>import com.intellij.psi.util.PsiTreeUtil\nimport com.intellij.psi.PsiClass\n\ndef x = PsiTreeUtil.getParentOfType(value, PsiClass.class);\n&quot;\\&quot;&quot; + x.name + &quot;_seq_gen\\&quot;&quot;\n</code></pre>\n"}],"owner":{"account_id":335756,"reputation":1663,"user_id":663012,"accept_rate":80,"display_name":"Czar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":781,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":49782145,"answer_count":2,"score":1,"last_activity_date":1661081358,"creation_date":1523444773,"question_id":49773467,"body_markdown":"I have classes annotated with\r\n`@SequenceGenerator(name = &quot;seq_gen&quot;,/*other_parameters*/)`\r\nI need to replace `&quot;seq_gen&quot;` with `&quot;$Class$_seq_gen&quot;` in each class.\r\n\r\nI&#39;ve tried following.\r\n\r\n**Search**\r\n\r\n    @SequenceGenerator(name = &quot;seq_gen&quot;)\r\n    class $Class$ {}\r\n\r\n**Replacement**\r\n\r\n    @SequenceGenerator(name = &quot;$Class$_seq_gen&quot;)\r\n    class $Class$ {}\r\n\r\nWhen I run the replacement the `/*other_parameters*/` part gets removed. \r\n\r\nI also tried\r\n\r\n**Search**\r\n\r\n    @SequenceGenerator(name = &quot;$VALUE$&quot;)\r\n    class $Class$ {}\r\n\r\n**Replacement**\r\n\r\n    &quot;$Class$_$VALUE$&quot;\r\n\r\nwith `$VALUE$` as target, it does not remove anything now but replaces with `_seq_gen` as if `$Class$` was not defined.\r\n\r\nHow can I accomplish this? Documentation of SSR is quite confusing and not detailed.\r\n\r\n---\r\nI&#39;ve found this question through search on SO, but it doesn&#39;t have and actual answer and is really about issue with arrays. https://stackoverflow.com/questions/45148556/replace-one-of-annotation-parameters-with-intellij-ideas-structural-replace","title":"How to structurally replace value of one parameter of an annotation in IntelliJ","body":"<p>I have classes annotated with\n<code>@SequenceGenerator(name = \"seq_gen\",/*other_parameters*/)</code>\nI need to replace <code>\"seq_gen\"</code> with <code>\"$Class$_seq_gen\"</code> in each class.</p>\n\n<p>I've tried following.</p>\n\n<p><strong>Search</strong></p>\n\n<pre><code>@SequenceGenerator(name = \"seq_gen\")\nclass $Class$ {}\n</code></pre>\n\n<p><strong>Replacement</strong></p>\n\n<pre><code>@SequenceGenerator(name = \"$Class$_seq_gen\")\nclass $Class$ {}\n</code></pre>\n\n<p>When I run the replacement the <code>/*other_parameters*/</code> part gets removed. </p>\n\n<p>I also tried</p>\n\n<p><strong>Search</strong></p>\n\n<pre><code>@SequenceGenerator(name = \"$VALUE$\")\nclass $Class$ {}\n</code></pre>\n\n<p><strong>Replacement</strong></p>\n\n<pre><code>\"$Class$_$VALUE$\"\n</code></pre>\n\n<p>with <code>$VALUE$</code> as target, it does not remove anything now but replaces with <code>_seq_gen</code> as if <code>$Class$</code> was not defined.</p>\n\n<p>How can I accomplish this? Documentation of SSR is quite confusing and not detailed.</p>\n\n<hr>\n\n<p>I've found this question through search on SO, but it doesn't have and actual answer and is really about issue with arrays. <a href=\"https://stackoverflow.com/questions/45148556/replace-one-of-annotation-parameters-with-intellij-ideas-structural-replace\">Replace one of annotation parameters with IntelliJ IDEA&#39;s Structural replace</a></p>\n"},{"tags":["java","android","kotlin","runtime-error"],"comments":[{"owner":{"account_id":18463410,"reputation":18363,"user_id":13598222,"display_name":"cactustictacs"},"score":0,"creation_date":1661109863,"post_id":73433906,"comment_id":129688280,"body_markdown":"You probably need to increase the emulated storage on your virtual device. I had an old API one that did that, I had to bump up the space a fair bit over what I thought it actually needed! Before I did that it would *sometimes* work though, so try a Cold Boot, maybe clear the cache (inside Android) or do Wipe Data if you&#39;re happy to do that","body":"You probably need to increase the emulated storage on your virtual device. I had an old API one that did that, I had to bump up the space a fair bit over what I thought it actually needed! Before I did that it would <i>sometimes</i> work though, so try a Cold Boot, maybe clear the cache (inside Android) or do Wipe Data if you&#39;re happy to do that"},{"owner":{"account_id":25050647,"reputation":400,"user_id":18906612,"display_name":"Josef M"},"score":0,"creation_date":1661160924,"post_id":73433906,"comment_id":129697337,"body_markdown":"Alright, will give it a try! However, isnt there a way to make it automatic instead of having to increase space everytime it becomes full ?","body":"Alright, will give it a try! However, isnt there a way to make it automatic instead of having to increase space everytime it becomes full ?"},{"owner":{"account_id":18463410,"reputation":18363,"user_id":13598222,"display_name":"cactustictacs"},"score":0,"creation_date":1661194231,"post_id":73433906,"comment_id":129709361,"body_markdown":"I don&#39;t think so, I don&#39;t know a lot of the details about how it works though! If you create a new device, the *SD card* disk image is the size of the card you specified (like it&#39;s set aside the required amount of space) but the *user data* one is basically empty. So it doesn&#39;t need to allocate all the space you set in the config, and over time that image will grow (and the *Size on Disk* field in the AVD Manager will increase). But in my experience, it fills up even though I&#39;m not using much space on the virtual device, until it hits the defined storage size","body":"I don&#39;t think so, I don&#39;t know a lot of the details about how it works though! If you create a new device, the <i>SD card</i> disk image is the size of the card you specified (like it&#39;s set aside the required amount of space) but the <i>user data</i> one is basically empty. So it doesn&#39;t need to allocate all the space you set in the config, and over time that image will grow (and the <i>Size on Disk</i> field in the AVD Manager will increase). But in my experience, it fills up even though I&#39;m not using much space on the virtual device, until it hits the defined storage size"},{"owner":{"account_id":18463410,"reputation":18363,"user_id":13598222,"display_name":"cactustictacs"},"score":0,"creation_date":1661194505,"post_id":73433906,"comment_id":129709450,"body_markdown":"I don&#39;t know why that happens - at a guess, it&#39;s something about the system managing the storage, maybe treating it as solid-state memory and writing all over the drive (the disk image, really) for wear-levelling reasons. Because it doesn&#39;t know it&#39;s not a real mobile device - but if the emulator is being smart and not allocating space for the disk image if it hasn&#39;t been used, but the device is writing all over it (even though most of it is &quot;empty&quot;) then the file size would grow. I&#39;m just speculating but yeah","body":"I don&#39;t know why that happens - at a guess, it&#39;s something about the system managing the storage, maybe treating it as solid-state memory and writing all over the drive (the disk image, really) for wear-levelling reasons. Because it doesn&#39;t know it&#39;s not a real mobile device - but if the emulator is being smart and not allocating space for the disk image if it hasn&#39;t been used, but the device is writing all over it (even though most of it is &quot;empty&quot;) then the file size would grow. I&#39;m just speculating but yeah"},{"owner":{"account_id":18463410,"reputation":18363,"user_id":13598222,"display_name":"cactustictacs"},"score":0,"creation_date":1661194624,"post_id":73433906,"comment_id":129709488,"body_markdown":"But no I don&#39;t think there&#39;s a way to make it redefine the storage space available to the device automatically. I used to try and keep that number low, since I&#39;d only be using a few hundred MB anyway, but it just seems to cause problems","body":"But no I don&#39;t think there&#39;s a way to make it redefine the storage space available to the device automatically. I used to try and keep that number low, since I&#39;d only be using a few hundred MB anyway, but it just seems to cause problems"},{"owner":{"account_id":25050647,"reputation":400,"user_id":18906612,"display_name":"Josef M"},"score":0,"creation_date":1661199368,"post_id":73433906,"comment_id":129710893,"body_markdown":"&quot;But in my experience, it fills up even though I&#39;m not using much space on the virtual device, until it hits the defined storage size&quot; - Yes I noticed that as well. Did some quick tests and its seems to be consistent, but I am pretty sure it is not supposed to do that. Maybe it can be reported as a bug!","body":"&quot;But in my experience, it fills up even though I&#39;m not using much space on the virtual device, until it hits the defined storage size&quot; - Yes I noticed that as well. Did some quick tests and its seems to be consistent, but I am pretty sure it is not supposed to do that. Maybe it can be reported as a bug!"},{"owner":{"account_id":25050647,"reputation":400,"user_id":18906612,"display_name":"Josef M"},"score":0,"creation_date":1661199693,"post_id":73433906,"comment_id":129710983,"body_markdown":"Alright I got you. Guess I will have to wipe it more often then when toggling between projects. Its unfortunate because before i re-installed android studio I did not have this problem. It used to automatically increase the space for every project I added so it was not known to be something I had to do manually. I did however force wipe data now and then when there was too many projects. Anyway, Hopefully they will fix it in the future! Appreciate the feedback!","body":"Alright I got you. Guess I will have to wipe it more often then when toggling between projects. Its unfortunate because before i re-installed android studio I did not have this problem. It used to automatically increase the space for every project I added so it was not known to be something I had to do manually. I did however force wipe data now and then when there was too many projects. Anyway, Hopefully they will fix it in the future! Appreciate the feedback!"}],"owner":{"account_id":25050647,"reputation":400,"user_id":18906612,"display_name":"Josef M"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":318,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1661080686,"creation_date":1661080686,"question_id":73433906,"body_markdown":"I have been getting this error lately after re-installing Android Studio on my pc. Anyone got a clue on how to fix it ? \r\n\r\nhttps://gyazo.com/be54539661824450357d83980623e4f8\r\n\r\nThis is the Logcat:\r\n\r\n```\r\nInstallation did not succeed.\r\nThe application could not be installed.\r\n\r\nList of apks:\r\n[0] &#39;C:\\Users\\joe\\AndroidStudioProjects\\MyProject\\app\\build\\intermediates\\apk\\debug\\app-debug.apk&#39;\r\nInstallation failed due to: &#39;&#39;cmd package install-create -r -t --user current --full --dont-kill --skip-verification -S 57625483&#39; returns error &#39;Unknown failure: Exception occurred while executing &#39;install-create&#39;:\r\nandroid.os.ParcelableException: java.io.IOException: Requested internal only, but not enough space\r\nat android.util.ExceptionUtils.wrap(ExceptionUtils.java:34)\r\nat com.android.server.pm.PackageInstallerService.createSession(PackageInstallerService.java:595)\r\nat com.android.server.pm.PackageManagerShellCommand.doCreateSession(PackageManagerShellCommand.java:3434)\r\nat com.android.server.pm.PackageManagerShellCommand.runInstallCreate(PackageManagerShellCommand.java:1561)\r\nat com.android.server.pm.PackageManagerShellCommand.onCommand(PackageManagerShellCommand.java:232)\r\nat com.android.modules.utils.BasicShellCommandHandler.exec(BasicShellCommandHandler.java:97)\r\nat android.os.ShellCommand.exec(ShellCommand.java:38)\r\nat com.android.server.pm.PackageManagerService$IPackageManagerImpl.onShellCommand(PackageManagerService.java:5954)\r\nat android.os.Binder.shellCommand(Binder.java:1049)\r\nat android.os.Binder.onTransact(Binder.java:877)\r\nat android.content.pm.IPackageManager$Stub.onTransact(IPackageManager.java:4313)\r\nat com.android.server.pm.PackageManagerService$IPackageManagerImpl.onTransact(PackageManagerService.java:5938)\r\nat android.os.Binder.execTransactInternal(Binder.java:1285)\r\nat android.os.Binder.execTransact(Binder.java:1244)\r\nCaused by: java.io.IOException: Requested internal only, but not enough space\r\nat com.android.internal.content.InstallLocationUtils.resolveInstallVolume(InstallLocationUtils.java:241)\r\nat com.android.internal.content.InstallLocationUtils.resolveInstallVolume(InstallLocationUtils.java:152)\r\nat com.android.internal.content.InstallLocationUtils.resolveInstallVolume(InstallLocationUtils.java:167)\r\nat com.android.server.pm.PackageInstallerService.createSessionInternal(PackageInstallerService.java:803)\r\nat com.android.server.pm.PackageInstallerService.createSession(PackageInstallerService.java:592)\r\n... 12 more&#39;&#39;\r\nRetry\r\nFailed to launch an application on all devices\r\n```","title":"Error: INSTALL_FAILED_INSUFFICIENT_STORAGE","body":"<p>I have been getting this error lately after re-installing Android Studio on my pc. Anyone got a clue on how to fix it ?</p>\n<p><a href=\"https://gyazo.com/be54539661824450357d83980623e4f8\" rel=\"nofollow noreferrer\">https://gyazo.com/be54539661824450357d83980623e4f8</a></p>\n<p>This is the Logcat:</p>\n<pre><code>Installation did not succeed.\nThe application could not be installed.\n\nList of apks:\n[0] 'C:\\Users\\joe\\AndroidStudioProjects\\MyProject\\app\\build\\intermediates\\apk\\debug\\app-debug.apk'\nInstallation failed due to: ''cmd package install-create -r -t --user current --full --dont-kill --skip-verification -S 57625483' returns error 'Unknown failure: Exception occurred while executing 'install-create':\nandroid.os.ParcelableException: java.io.IOException: Requested internal only, but not enough space\nat android.util.ExceptionUtils.wrap(ExceptionUtils.java:34)\nat com.android.server.pm.PackageInstallerService.createSession(PackageInstallerService.java:595)\nat com.android.server.pm.PackageManagerShellCommand.doCreateSession(PackageManagerShellCommand.java:3434)\nat com.android.server.pm.PackageManagerShellCommand.runInstallCreate(PackageManagerShellCommand.java:1561)\nat com.android.server.pm.PackageManagerShellCommand.onCommand(PackageManagerShellCommand.java:232)\nat com.android.modules.utils.BasicShellCommandHandler.exec(BasicShellCommandHandler.java:97)\nat android.os.ShellCommand.exec(ShellCommand.java:38)\nat com.android.server.pm.PackageManagerService$IPackageManagerImpl.onShellCommand(PackageManagerService.java:5954)\nat android.os.Binder.shellCommand(Binder.java:1049)\nat android.os.Binder.onTransact(Binder.java:877)\nat android.content.pm.IPackageManager$Stub.onTransact(IPackageManager.java:4313)\nat com.android.server.pm.PackageManagerService$IPackageManagerImpl.onTransact(PackageManagerService.java:5938)\nat android.os.Binder.execTransactInternal(Binder.java:1285)\nat android.os.Binder.execTransact(Binder.java:1244)\nCaused by: java.io.IOException: Requested internal only, but not enough space\nat com.android.internal.content.InstallLocationUtils.resolveInstallVolume(InstallLocationUtils.java:241)\nat com.android.internal.content.InstallLocationUtils.resolveInstallVolume(InstallLocationUtils.java:152)\nat com.android.internal.content.InstallLocationUtils.resolveInstallVolume(InstallLocationUtils.java:167)\nat com.android.server.pm.PackageInstallerService.createSessionInternal(PackageInstallerService.java:803)\nat com.android.server.pm.PackageInstallerService.createSession(PackageInstallerService.java:592)\n... 12 more''\nRetry\nFailed to launch an application on all devices\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":3,"creation_date":1473471747,"post_id":39421639,"comment_id":66168236,"body_markdown":"Short answer: You need to use the `add` method to increase the size of a list.  You can&#39;t do it just by calling `set` on elements that you haven&#39;t inserted yet.","body":"Short answer: You need to use the <code>add</code> method to increase the size of a list.  You can&#39;t do it just by calling <code>set</code> on elements that you haven&#39;t inserted yet."},{"owner":{"account_id":1968221,"reputation":428,"user_id":1767890,"accept_rate":75,"display_name":"Ben Braun"},"score":1,"creation_date":1473471826,"post_id":39421639,"comment_id":66168246,"body_markdown":"What @David Wallace said, also even if set did allow this, your line                list.set(i, list.get(0)); isn&#39;t the same as a[i] = a[i - 1], you are doing something like a[i] = a[0]. So you have two bugs.\n\nAlso I&#39;m just guessing that you are misinterpreting what list = new ArrayList&lt;String&gt;(10); does, in this case it doesn&#39;t make a list of 10 strings it just uses the number 10 as a &quot;hint&quot; to set the initial capacity (which is not the size) to 10","body":"What @David Wallace said, also even if set did allow this, your line                list.set(i, list.get(0)); isn&#39;t the same as a[i] = a[i - 1], you are doing something like a[i] = a[0]. So you have two bugs.  Also I&#39;m just guessing that you are misinterpreting what list = new ArrayList&lt;String&gt;(10); does, in this case it doesn&#39;t make a list of 10 strings it just uses the number 10 as a &quot;hint&quot; to set the initial capacity (which is not the size) to 10"},{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1473474707,"post_id":39421639,"comment_id":66168601,"body_markdown":"@ben it&#39;s not a &quot;hint&quot;. It&#39;s the actual size. As per the [javadoc](https://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html#ArrayList-int-): ***Constructs an empty list with the specified initial capacity***","body":"@ben it&#39;s not a &quot;hint&quot;. It&#39;s the actual size. As per the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html#ArrayList-int-\" rel=\"nofollow noreferrer\">javadoc</a>: <b><i>Constructs an empty list with the specified initial capacity</i></b>"},{"owner":{"account_id":1968221,"reputation":428,"user_id":1767890,"accept_rate":75,"display_name":"Ben Braun"},"score":0,"creation_date":1473477464,"post_id":39421639,"comment_id":66169000,"body_markdown":"Hi @Bohemian , you are right in that the capacity is the list&#39;s &quot;size&quot; in memory. When I say size I mean the &quot;size()&quot; of the list, which is the number of elements actually in the list. You are mistaken if you think capacity is the number of actual elements in the list.","body":"Hi @Bohemian , you are right in that the capacity is the list&#39;s &quot;size&quot; in memory. When I say size I mean the &quot;size()&quot; of the list, which is the number of elements actually in the list. You are mistaken if you think capacity is the number of actual elements in the list."},{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1473478020,"post_id":39421639,"comment_id":66169063,"body_markdown":"@ben ah, right. capacity != size.","body":"@ben ah, right. capacity != size."}],"answers":[{"tags":[],"owner":{"account_id":1968221,"reputation":428,"user_id":1767890,"accept_rate":75,"display_name":"Ben Braun"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1473472003,"creation_date":1473472003,"answer_id":39421719,"question_id":39421639,"body_markdown":"One solution to your problem is instead of\r\n\r\n    stringList() {\r\n      list = new ArrayList&lt;String&gt;(10);\r\n    }\r\n\r\ndo\r\n\r\n    stringList() {\r\n      list = new ArrayList&lt;String&gt;(10);\r\n      for(int i = 0; i &lt; 10; i++){\r\n          list.add(&quot;&quot;);\r\n      }\r\n    }\r\n\r\nbecause only this will achieve a list of 10 strings, the first just makes a list that has the capacity to hold 10 strings (which is more of a performance hint)","title":"Trouble with converting ordered int array to ordered array list","body":"<p>One solution to your problem is instead of</p>\n\n<pre><code>stringList() {\n  list = new ArrayList&lt;String&gt;(10);\n}\n</code></pre>\n\n<p>do</p>\n\n<pre><code>stringList() {\n  list = new ArrayList&lt;String&gt;(10);\n  for(int i = 0; i &lt; 10; i++){\n      list.add(\"\");\n  }\n}\n</code></pre>\n\n<p>because only this will achieve a list of 10 strings, the first just makes a list that has the capacity to hold 10 strings (which is more of a performance hint)</p>\n"},{"tags":[],"owner":{"account_id":4563475,"reputation":27298,"user_id":3705127,"accept_rate":52,"display_name":"sprinter"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1473473329,"creation_date":1473472971,"answer_id":39421813,"question_id":39421639,"body_markdown":"An interesting aspect of this assignment is that arrays and lists have a significant difference in behaviour: arrays have a fixed size while lists expand as items are added. For lists, adding items anywhere other than the end is an insert and it automatically moves the items to the right to make room. That doesn&#39;t happen with an array so it needs to be done manually in the code you are refactoring. \r\n\r\nSo, in my opinion, the correct minimal refactoring of an array to a list is to turn the `set` into an `insert` and then remove the code that used to be required to shift elements. It&#39;s no longer required for a list:\r\n\r\n    public void insert(String element) {\r\n        if (c == 0) {\r\n            list.add(element);\r\n            c++;\r\n        } else {\r\n            int j = 0;\r\n            for (int i = 0; i &lt; c; i++, j++) {\r\n                if (element.compareTo(list.get(i)) &lt; 0 ) \r\n                    break;\r\n            }\r\n            list.insert(j, element);\r\n            c++;\r\n        }\r\n    }\r\n\r\nFor lists, adding to an empty list is the same as inserting at position 0. So the specially handling for an empty list is completely unnecessary. But that might be not &#39;reflecting the original&#39; code.\r\n\r\nAnother more subtle difference is that this code won&#39;t cause an error if more than 10 items are inserted. To correctly reflect the behaviour of the initial code you would need to specifically add a test for that. \r\n\r\n    if (c == MAX_SIZE)\r\n        throw new ArrayIndexOutOfBoundsException(c);\r\n\r\nIt&#39;s likely your assignment is not expect you to handle that condition but it is worth knowing that the refactoring is changing the behaviour of the function if it&#39;s not included.\r\n","title":"Trouble with converting ordered int array to ordered array list","body":"<p>An interesting aspect of this assignment is that arrays and lists have a significant difference in behaviour: arrays have a fixed size while lists expand as items are added. For lists, adding items anywhere other than the end is an insert and it automatically moves the items to the right to make room. That doesn't happen with an array so it needs to be done manually in the code you are refactoring. </p>\n\n<p>So, in my opinion, the correct minimal refactoring of an array to a list is to turn the <code>set</code> into an <code>insert</code> and then remove the code that used to be required to shift elements. It's no longer required for a list:</p>\n\n<pre><code>public void insert(String element) {\n    if (c == 0) {\n        list.add(element);\n        c++;\n    } else {\n        int j = 0;\n        for (int i = 0; i &lt; c; i++, j++) {\n            if (element.compareTo(list.get(i)) &lt; 0 ) \n                break;\n        }\n        list.insert(j, element);\n        c++;\n    }\n}\n</code></pre>\n\n<p>For lists, adding to an empty list is the same as inserting at position 0. So the specially handling for an empty list is completely unnecessary. But that might be not 'reflecting the original' code.</p>\n\n<p>Another more subtle difference is that this code won't cause an error if more than 10 items are inserted. To correctly reflect the behaviour of the initial code you would need to specifically add a test for that. </p>\n\n<pre><code>if (c == MAX_SIZE)\n    throw new ArrayIndexOutOfBoundsException(c);\n</code></pre>\n\n<p>It's likely your assignment is not expect you to handle that condition but it is worth knowing that the refactoring is changing the behaviour of the function if it's not included.</p>\n"}],"owner":{"account_id":9165915,"reputation":23,"user_id":6815524,"display_name":"recidplayer"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1661080610,"creation_date":1473470938,"question_id":39421639,"body_markdown":"My professor gave us this code that creates a sorted int array and wants us to convert it to a sorted array list with strings. This is an assignment on maintenance and must reflect the original code. So, I can&#39;t use the size method, Collections.sort(), or anything that doesn&#39;t reflect the original code.\r\n\r\nWe are given\r\n\r\n    \tOrderedIntList() {\r\n\t\ta = new int[10];\r\n\t}\r\n\r\n    \tpublic void insert(int v) {\r\n\t\tif(c == 0) {\r\n\t\t\ta[0]= v;\r\n\t\t\tc++;\r\n\t\t} else {\r\n\t\t\tint j = 0;\r\n\t\t\tfor (int i = 0; i &lt; c; i++, j++) {\r\n\t\t\t\tif(v &lt; a[i]) \r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tfor (int i = c; i &gt; j; i--) {\r\n\t\t\t\ta[i] = a[i - 1];\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\ta[j]= v; \r\n\t\t\tc++;\r\n\t\t}\r\n\t}\r\nThis is what I have come up with to convert it to an array list\r\n\r\n    \t\tstringList() {\r\n\t\tlist = new ArrayList&lt;String&gt;(10);\r\n\t}\r\n\r\n    \tpublic void insert(String element) {\r\n\t\tif(c == 0) {\r\n\t\t\tlist.add(0, element);\r\n\t\t\tc++;\r\n\t\t} else {\r\n\t\t\tint j = 0;\r\n\t\t\tfor (int i = 0; i &lt; c; i++, j++) {\r\n\t\t\t\tif(element.compareTo(list.get(i)) == -1) \r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tfor (int i = c; i &gt; j; i--) {\r\n\t\t\t\tlist.set(i, list.get(0));\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tlist.set(j, element);\r\n\t\t\tc++;\r\n\t\t}\r\n\t}\r\nIt keeps throwing an exception on\r\n\r\n    list.set(i, list.get(0));\r\nWhen debugging I see that ArrayList.class is throwing the exception because the index equals the size. I can&#39;t seem to come up with a solution. Any help will be greatly appreciated.","title":"Trouble with converting ordered int array to ordered array list","body":"<p>My professor gave us this code that creates a sorted int array and wants us to convert it to a sorted array list with strings. This is an assignment on maintenance and must reflect the original code. So, I can't use the size method, Collections.sort(), or anything that doesn't reflect the original code.</p>\n\n<p>We are given</p>\n\n<pre><code>    OrderedIntList() {\n    a = new int[10];\n}\n\n    public void insert(int v) {\n    if(c == 0) {\n        a[0]= v;\n        c++;\n    } else {\n        int j = 0;\n        for (int i = 0; i &lt; c; i++, j++) {\n            if(v &lt; a[i]) \n                break;\n        }\n        for (int i = c; i &gt; j; i--) {\n            a[i] = a[i - 1];\n        }\n\n        a[j]= v; \n        c++;\n    }\n}\n</code></pre>\n\n<p>This is what I have come up with to convert it to an array list</p>\n\n<pre><code>        stringList() {\n    list = new ArrayList&lt;String&gt;(10);\n}\n\n    public void insert(String element) {\n    if(c == 0) {\n        list.add(0, element);\n        c++;\n    } else {\n        int j = 0;\n        for (int i = 0; i &lt; c; i++, j++) {\n            if(element.compareTo(list.get(i)) == -1) \n                break;\n        }\n        for (int i = c; i &gt; j; i--) {\n            list.set(i, list.get(0));\n        }\n\n        list.set(j, element);\n        c++;\n    }\n}\n</code></pre>\n\n<p>It keeps throwing an exception on</p>\n\n<pre><code>list.set(i, list.get(0));\n</code></pre>\n\n<p>When debugging I see that ArrayList.class is throwing the exception because the index equals the size. I can't seem to come up with a solution. Any help will be greatly appreciated.</p>\n"},{"tags":["java","oop","design-patterns"],"comments":[{"owner":{"account_id":22624308,"reputation":57,"user_id":16802595,"display_name":"Noah"},"score":0,"creation_date":1661075700,"post_id":73433235,"comment_id":129680843,"body_markdown":"@Mat The other methods which I omitted might have other functions that are different.","body":"@Mat The other methods which I omitted might have other functions that are different."},{"owner":{"account_id":22624308,"reputation":57,"user_id":16802595,"display_name":"Noah"},"score":0,"creation_date":1661076491,"post_id":73433235,"comment_id":129680994,"body_markdown":"I think it is a quite common situation where you have many similar classes, and you want to reuse the logic for a long long function. However, the fucntion uses a attribute that are present in all the classes but the values are different.","body":"I think it is a quite common situation where you have many similar classes, and you want to reuse the logic for a long long function. However, the fucntion uses a attribute that are present in all the classes but the values are different."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1661078608,"post_id":73433235,"comment_id":129681429,"body_markdown":"You seem to be focusing on the wrong thing. Your name attribute is an instance field, and so it is a property of the object, not the class, and you wouldn&#39;t create multiple classes if this were the key thing that changes. In this situation, it&#39;s the differing behaviors that likely matter more, the information that you *don&#39;t* show us.","body":"You seem to be focusing on the wrong thing. Your name attribute is an instance field, and so it is a property of the object, not the class, and you wouldn&#39;t create multiple classes if this were the key thing that changes. In this situation, it&#39;s the differing behaviors that likely matter more, the information that you <i>don&#39;t</i> show us."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1661079224,"post_id":73433235,"comment_id":129681559,"body_markdown":"I think that this question could be improved by making both the problem and the code more concrete, showing more of a realistic and real-life code example. Else we could be barking up an [XY Problem](http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem) tree.","body":"I think that this question could be improved by making both the problem and the code more concrete, showing more of a realistic and real-life code example. Else we could be barking up an <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY Problem</a> tree."},{"owner":{"account_id":22624308,"reputation":57,"user_id":16802595,"display_name":"Noah"},"score":0,"creation_date":1661080854,"post_id":73433235,"comment_id":129681866,"body_markdown":"@HovercraftFullOfEels Tried my best to make the question clearer.","body":"@HovercraftFullOfEels Tried my best to make the question clearer."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1661081877,"post_id":73433235,"comment_id":129682077,"body_markdown":"I&#39;m sorry, perhaps I wasn&#39;t clear about what I meant by &quot;more concrete&quot;. This would be posting code that is much closer to your current production code, code that shows some purpose, as well as telling more detail about how this question and issue fits into your current project. But if QBrute&#39;s answer fully answers your question, then feel free to ignore this suggestion.","body":"I&#39;m sorry, perhaps I wasn&#39;t clear about what I meant by &quot;more concrete&quot;. This would be posting code that is much closer to your current production code, code that shows some purpose, as well as telling more detail about how this question and issue fits into your current project. But if QBrute&#39;s answer fully answers your question, then feel free to ignore this suggestion."}],"answers":[{"tags":[],"owner":{"account_id":1937019,"reputation":4428,"user_id":1744230,"accept_rate":100,"display_name":"QBrute"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661078828,"creation_date":1661078383,"answer_id":73433634,"question_id":73433235,"body_markdown":"You already have an `abstract` class that you can use as parent to `A` and `B`. Parent classes contain fields and methods that are common to all child classes. \r\n\r\nYou can use `abstract` methods in the parent class to denote methods that need to be implemented by the children, i.e. behvavior that differs from child to child.\r\n\r\nSo I&#39;d suggest the following:\r\n\r\n    public abstract class I {\r\n        /**\r\n         * Common attribute for all children.\r\n         */\r\n        private final String name;\r\n\r\n        protected I(String name) {\r\n            this.name = name;\r\n        }\r\n\r\n        public String getName() {\r\n            return name;\r\n        }\r\n\r\n        @Override\r\n        public String toString() {\r\n            return &quot;It is &quot; + name;\r\n        }\r\n\r\n        /**\r\n         * Needs to be explicitly implemented by all children.\r\n         */ \r\n        public abstract void someMethod1();\r\n\r\n        /**\r\n         * Needs to be explicitly implemented by all children.\r\n         */\r\n        public abstract void someMethod2();\r\n    }\r\n\r\n    public class A extends I {\r\n        public A() {\r\n            super(&quot;A&quot;);\r\n        }\r\n\r\n        @Override\r\n        public void someMethod1() {\r\n            // specific implementation for A\r\n        }\r\n\r\n        @Override\r\n        public void someMethod2() {\r\n            // specific implementation for A\r\n        }\r\n    }\r\n\r\n    public class B extends I {\r\n        public B() {\r\n            super(&quot;B&quot;);\r\n        }\r\n\r\n        @Override\r\n        public void someMethod1() {\r\n            // specific implementation for B\r\n        }\r\n\r\n        @Override\r\n        public void someMethod2() {\r\n            // specific implementation for B\r\n        }\r\n    }","title":"What&#39;s the best way to write classes that are only different in some attributes?","body":"<p>You already have an <code>abstract</code> class that you can use as parent to <code>A</code> and <code>B</code>. Parent classes contain fields and methods that are common to all child classes.</p>\n<p>You can use <code>abstract</code> methods in the parent class to denote methods that need to be implemented by the children, i.e. behvavior that differs from child to child.</p>\n<p>So I'd suggest the following:</p>\n<pre><code>public abstract class I {\n    /**\n     * Common attribute for all children.\n     */\n    private final String name;\n\n    protected I(String name) {\n        this.name = name;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;It is &quot; + name;\n    }\n\n    /**\n     * Needs to be explicitly implemented by all children.\n     */ \n    public abstract void someMethod1();\n\n    /**\n     * Needs to be explicitly implemented by all children.\n     */\n    public abstract void someMethod2();\n}\n\npublic class A extends I {\n    public A() {\n        super(&quot;A&quot;);\n    }\n\n    @Override\n    public void someMethod1() {\n        // specific implementation for A\n    }\n\n    @Override\n    public void someMethod2() {\n        // specific implementation for A\n    }\n}\n\npublic class B extends I {\n    public B() {\n        super(&quot;B&quot;);\n    }\n\n    @Override\n    public void someMethod1() {\n        // specific implementation for B\n    }\n\n    @Override\n    public void someMethod2() {\n        // specific implementation for B\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":22624308,"reputation":57,"user_id":16802595,"display_name":"Noah"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"closed_date":1661082823,"answer_count":1,"score":-2,"last_activity_date":1661080533,"creation_date":1661074938,"question_id":73433235,"body_markdown":"*(revised example)*\r\n```java\r\n// A.java\r\npublic class A {\r\n    private static final String name = &quot;A&quot;;\r\n\r\n    public void print() {\r\n        System.out.println(&quot;name is &quot; + name);\r\n    }\r\n\r\n    public void doSomethingELse() {\r\n        // do something\r\n    }\r\n}\r\n\r\n// B.java\r\npublic class B {\r\n    private static final String name = &quot;B&quot;;\r\n\r\n    public void print() {\r\n        System.out.println(&quot;name is &quot; + name);\r\n    }\r\n\r\n    public void doSomethingELse() {\r\n        // do something\r\n    }\r\n}\r\n```\r\n\r\nLike the example above, I have 2 similar classes that are only different in the `name` attribute.\r\n\r\nI want to create an interface or an abstract class, in order to reuse the logic of `print` function. What is the recommended way of doing that?","title":"What&#39;s the best way to write classes that are only different in some attributes?","body":"<p><em>(revised example)</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>// A.java\npublic class A {\n    private static final String name = &quot;A&quot;;\n\n    public void print() {\n        System.out.println(&quot;name is &quot; + name);\n    }\n\n    public void doSomethingELse() {\n        // do something\n    }\n}\n\n// B.java\npublic class B {\n    private static final String name = &quot;B&quot;;\n\n    public void print() {\n        System.out.println(&quot;name is &quot; + name);\n    }\n\n    public void doSomethingELse() {\n        // do something\n    }\n}\n</code></pre>\n<p>Like the example above, I have 2 similar classes that are only different in the <code>name</code> attribute.</p>\n<p>I want to create an interface or an abstract class, in order to reuse the logic of <code>print</code> function. What is the recommended way of doing that?</p>\n"},{"tags":["java","android","numberpicker","android-number-picker"],"comments":[{"owner":{"account_id":11873112,"reputation":1073,"user_id":8688810,"display_name":"Dan Baruch"},"score":0,"creation_date":1661080522,"post_id":73433851,"comment_id":129681805,"body_markdown":"If you will try using onValueChange event of any sort (not sure there is one but I&#39;m speaking in general) you&#39;ll get stackOverFlow Exception as each change will drag 2 changes that will drag 2 more each and so on and on until you stack is full. Best approach would be, imo, set an &quot;active&quot; pointer to the number picker that was changed and upon pressing a button / applying the change in any way you see fit, you&#39;ll change the values of the other numbers according to your logic","body":"If you will try using onValueChange event of any sort (not sure there is one but I&#39;m speaking in general) you&#39;ll get stackOverFlow Exception as each change will drag 2 changes that will drag 2 more each and so on and on until you stack is full. Best approach would be, imo, set an &quot;active&quot; pointer to the number picker that was changed and upon pressing a button / applying the change in any way you see fit, you&#39;ll change the values of the other numbers according to your logic"},{"owner":{"account_id":32581,"reputation":76091,"user_id":90527,"accept_rate":85,"display_name":"outis"},"score":0,"creation_date":1661158060,"post_id":73433851,"comment_id":129696368,"body_markdown":"Do you want the maximums adjusted, or do you want the three quantities to always sum to 100? In either case, if the pickers are at maximum and one is increased, how should the others be adjusted?","body":"Do you want the maximums adjusted, or do you want the three quantities to always sum to 100? In either case, if the pickers are at maximum and one is increased, how should the others be adjusted?"},{"owner":{"display_name":"user18504539"},"score":0,"creation_date":1661182937,"post_id":73433851,"comment_id":129705638,"body_markdown":"Hello to everyone who commented, I am the owner of the topic, but I had to write with my old account because I could not enter my e-mail address. (this account was closed for asking questions) @DanBaruch","body":"Hello to everyone who commented, I am the owner of the topic, but I had to write with my old account because I could not enter my e-mail address. (this account was closed for asking questions) @DanBaruch"},{"owner":{"display_name":"user18504539"},"score":0,"creation_date":1661183077,"post_id":73433851,"comment_id":129705692,"body_markdown":"I think I can&#39;t make a listener for each number picker. and with each number picker, another two will be triggered, so that the sum of the three will be 100. For example, the first number picker will increase as 50,51,52,53, while the minimum value of the other two number pickers will be reduced until its minimum value is one.. I hope I have been able to explain. so at the end of everything this 3 number picker sum will be 100","body":"I think I can&#39;t make a listener for each number picker. and with each number picker, another two will be triggered, so that the sum of the three will be 100. For example, the first number picker will increase as 50,51,52,53, while the minimum value of the other two number pickers will be reduced until its minimum value is one.. I hope I have been able to explain. so at the end of everything this 3 number picker sum will be 100"},{"owner":{"account_id":11873112,"reputation":1073,"user_id":8688810,"display_name":"Dan Baruch"},"score":0,"creation_date":1661207768,"post_id":73433851,"comment_id":129712852,"body_markdown":"Yes but you can&#39;t know which picker to reduce. You have picker A,B and C. If you change A&#39;s value, do you change B&#39;s or C&#39;s value to match it? That&#39;s your business logic. In anyway, I&#39;d recommend having a button pressed doing all the magic, unless you want you logic to apply to a single picker effecting the other 2 pickers, in which you can use some sort of onValueChanged event.","body":"Yes but you can&#39;t know which picker to reduce. You have picker A,B and C. If you change A&#39;s value, do you change B&#39;s or C&#39;s value to match it? That&#39;s your business logic. In anyway, I&#39;d recommend having a button pressed doing all the magic, unless you want you logic to apply to a single picker effecting the other 2 pickers, in which you can use some sort of onValueChanged event."}],"owner":{"account_id":26120944,"reputation":1,"user_id":19813252,"display_name":"NOTR"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1661080398,"creation_date":1661080248,"question_id":73433851,"body_markdown":"I want to make an application with 3 number pickers. I want to find the percentage distribution of carbohydrates, fat and protein. and this 3 number picker works in coordination with each other and I want to adjust the max and min values ​​accordingly. The sum of these 3 number pickers will be 100. e.g; like 15,35,50 or 50.45.5 or 10,20,70\r\n\r\n\r\n[Screenshot][1]\r\n\r\n\r\n```\r\n        NumberPicker carb=add_dialog.findViewById(R.id.carb);\r\n        NumberPicker protein=add_dialog.findViewById(R.id.protein);\r\n        NumberPicker fat=add_dialog.findViewById(R.id.fat);\r\n\r\n        carb.setMinValue(1);\r\n        carb.setMaxValue(99);\r\n        protein.setMinValue(1);\r\n        protein.setMaxValue(99);\r\n        fat.setMinValue(1);\r\n        fat.setMaxValue(99);\r\n\r\n        // Initial\r\n        carb.setValue(25);\r\n        protein.setValue(40);\r\n        fat.setValue(35);\r\n\r\n\r\n        carb.setOnValueChangedListener((picker, oldVal, newVal) -&gt; {\r\n            protein.setMaxValue(100-(newVal+fat.getValue()));\r\n            fat.setMaxValue(100-(newVal+protein.getValue()));\r\n        });\r\n      \r\n\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nfdMI.jpg","title":"How can I make the sum of 3 number picker 100?","body":"<p>I want to make an application with 3 number pickers. I want to find the percentage distribution of carbohydrates, fat and protein. and this 3 number picker works in coordination with each other and I want to adjust the max and min values ​​accordingly. The sum of these 3 number pickers will be 100. e.g; like 15,35,50 or 50.45.5 or 10,20,70</p>\n<p><a href=\"https://i.stack.imgur.com/nfdMI.jpg\" rel=\"nofollow noreferrer\">Screenshot</a></p>\n<pre><code>        NumberPicker carb=add_dialog.findViewById(R.id.carb);\n        NumberPicker protein=add_dialog.findViewById(R.id.protein);\n        NumberPicker fat=add_dialog.findViewById(R.id.fat);\n\n        carb.setMinValue(1);\n        carb.setMaxValue(99);\n        protein.setMinValue(1);\n        protein.setMaxValue(99);\n        fat.setMinValue(1);\n        fat.setMaxValue(99);\n\n        // Initial\n        carb.setValue(25);\n        protein.setValue(40);\n        fat.setValue(35);\n\n\n        carb.setOnValueChangedListener((picker, oldVal, newVal) -&gt; {\n            protein.setMaxValue(100-(newVal+fat.getValue()));\n            fat.setMaxValue(100-(newVal+protein.getValue()));\n        });\n      \n\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":481416,"reputation":355324,"user_id":895245,"accept_rate":49,"display_name":"Ciro Santilli OurBigBook.com"},"score":0,"creation_date":1426501852,"post_id":11288083,"comment_id":46382890,"body_markdown":"Possible subset of: http://stackoverflow.com/questions/4526113/java-conditional-compilation-how-to-prevent-code-chunks-to-be-compiled","body":"Possible subset of: <a href=\"http://stackoverflow.com/questions/4526113/java-conditional-compilation-how-to-prevent-code-chunks-to-be-compiled\" title=\"java conditional compilation how to prevent code chunks to be compiled\">stackoverflow.com/questions/4526113/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":95910,"reputation":238649,"user_id":260990,"accept_rate":81,"display_name":"jmj"},"down_vote_count":1,"up_vote_count":22,"is_accepted":false,"score":21,"last_activity_date":1341206150,"creation_date":1341206150,"answer_id":11288090,"question_id":11288083,"body_markdown":"You don&#39;t have conditional import with java\r\n\r\n\r\nBut you could conditionally use different classes with same name using fully qualified name\r\n\r\nfor example:\r\n\r\n    if(useSql){\r\n      java.sql.Date date = new java.sql.Date()\r\n    }else{\r\n      java.util.Date date = new java.util.Date()\r\n    }","title":"Java conditional imports","body":"<p>You don't have conditional import with java</p>\n\n<p>But you could conditionally use different classes with same name using fully qualified name</p>\n\n<p>for example:</p>\n\n<pre><code>if(useSql){\n  java.sql.Date date = new java.sql.Date()\n}else{\n  java.util.Date date = new java.util.Date()\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1513180,"reputation":7944,"user_id":1414799,"accept_rate":56,"display_name":"Pramod Kumar"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1341206206,"creation_date":1341206206,"answer_id":11288095,"question_id":11288083,"body_markdown":"We don&#39;t have conditional import in java","title":"Java conditional imports","body":"<p>We don't have conditional import in java</p>\n"},{"tags":[],"owner":{"account_id":1578571,"reputation":4109,"user_id":1464455,"accept_rate":38,"display_name":"Yair Zaslavsky"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1536637228,"creation_date":1341206744,"answer_id":11288152,"question_id":11288083,"body_markdown":"There is no support for this at Java. &lt;BR&gt;\r\nBear in mind that #IFDEF is done at pre-processor stage at C++ - No support in Java for that. &lt;BR&gt;\r\nWhat you can try and have is something like an annotation processor, prior to the days annotations were introduced in JDK 1.5. &lt;BR&gt;\r\nIn addition, you can use annotations to be processed during compile time. &lt;BR&gt;\r\n[This][1] blog provides some information.\r\n\r\n\r\n  [1]: http://deors.wordpress.com/2011/10/08/annotation-processors/","title":"Java conditional imports","body":"<p>There is no support for this at Java. <BR>\nBear in mind that #IFDEF is done at pre-processor stage at C++ - No support in Java for that. <BR>\nWhat you can try and have is something like an annotation processor, prior to the days annotations were introduced in JDK 1.5. <BR>\nIn addition, you can use annotations to be processed during compile time. <BR>\n<a href=\"http://deors.wordpress.com/2011/10/08/annotation-processors/\" rel=\"nofollow noreferrer\">This</a> blog provides some information.</p>\n"},{"tags":[],"owner":{"account_id":378790,"reputation":869,"user_id":731752,"display_name":"LadyCailin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1387228512,"creation_date":1387228512,"answer_id":20621045,"question_id":11288083,"body_markdown":"What you&#39;re trying to do is a valid idea, but you should use mocks instead. [Mockito][1] is a great library for that.\r\n\r\nThe paradigm is a bit different, but you should look into unit testing with a mocking library and get an understanding of that, which will allow you to do what you&#39;re trying, in a better (in my opinion) way.\r\n\r\n\r\n  [1]: http://code.google.com/p/mockito/","title":"Java conditional imports","body":"<p>What you're trying to do is a valid idea, but you should use mocks instead. <a href=\"http://code.google.com/p/mockito/\" rel=\"nofollow\">Mockito</a> is a great library for that.</p>\n\n<p>The paradigm is a bit different, but you should look into unit testing with a mocking library and get an understanding of that, which will allow you to do what you're trying, in a better (in my opinion) way.</p>\n"},{"tags":[],"owner":{"account_id":2015227,"reputation":833,"user_id":1802697,"display_name":"Igor Maznitsa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1428072836,"creation_date":1428072836,"answer_id":29434527,"question_id":11288083,"body_markdown":"[Java Comment Preprocessor][1] supports prefix and postfix sections in result document and it is very useful to form class import section, you can place import string even in middle of your class\r\n\r\n    //#ifdef FLAG\r\n    //+prefix\r\n    import some.class.Clazz;\r\n    //-prefix\r\n       Clazz.call();\r\n    //#endif\r\n\r\n\r\n  [1]: https://github.com/raydac/java-comment-preprocessor","title":"Java conditional imports","body":"<p><a href=\"https://github.com/raydac/java-comment-preprocessor\" rel=\"nofollow\">Java Comment Preprocessor</a> supports prefix and postfix sections in result document and it is very useful to form class import section, you can place import string even in middle of your class</p>\n\n<pre><code>//#ifdef FLAG\n//+prefix\nimport some.class.Clazz;\n//-prefix\n   Clazz.call();\n//#endif\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1815814,"reputation":987,"user_id":1650913,"accept_rate":86,"display_name":"Scoopta"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1475655065,"creation_date":1475655065,"answer_id":39868631,"question_id":11288083,"body_markdown":"You could use a traditional if statement and then instead of importing do `Class.forName(&quot;example.ExampleClass&quot;)` That would return a `Class` object which you could then invoke `Class.newInstance()` on. It would allow you to avoid compile time errors for dependencies that may not exist as well as do something that&#39;s similar to conditional importing.","title":"Java conditional imports","body":"<p>You could use a traditional if statement and then instead of importing do <code>Class.forName(\"example.ExampleClass\")</code> That would return a <code>Class</code> object which you could then invoke <code>Class.newInstance()</code> on. It would allow you to avoid compile time errors for dependencies that may not exist as well as do something that's similar to conditional importing.</p>\n"},{"tags":[],"owner":{"account_id":12681102,"reputation":11,"user_id":9214747,"display_name":"Abdelaty"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661080284,"creation_date":1661080284,"answer_id":73433854,"question_id":11288083,"body_markdown":"instead of doing this:\r\n\r\n    import com.test.example.interceptorModule\r\n    {\r\n       example().intercepte();\r\n    }\r\nI figured out that we can call the class using it&#39;s path like this\r\n\r\n    com.test.example.interceptorModule().intercepte()\r\n\r\nso to import the above class conditionally you can do this:\r\n\r\n    if(!intercepting)\r\n     {\r\n       com.test.example.interceptorModule().intercepte()\r\n     }\r\n\r\n","title":"Java conditional imports","body":"<p>instead of doing this:</p>\n<pre><code>import com.test.example.interceptorModule\n{\n   example().intercepte();\n}\n</code></pre>\n<p>I figured out that we can call the class using it's path like this</p>\n<pre><code>com.test.example.interceptorModule().intercepte()\n</code></pre>\n<p>so to import the above class conditionally you can do this:</p>\n<pre><code>if(!intercepting)\n {\n   com.test.example.interceptorModule().intercepte()\n }\n</code></pre>\n"}],"owner":{"account_id":1618029,"reputation":211,"user_id":1495174,"display_name":"user1495174"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17045,"favorite_count":0,"down_vote_count":0,"up_vote_count":21,"answer_count":7,"score":21,"last_activity_date":1661080284,"creation_date":1341206103,"question_id":11288083,"body_markdown":" How to have conditional imports in Java like we have the `ifdefs` in C\r\nThis is what I intend to achieve\r\n\r\n    ifdef TEST\r\n    import com.google.mystubs.swing;\r\n    elif\r\n    import javax.swing.*;\r\n    endif\r\n\r\n","title":"Java conditional imports","body":"<p>How to have conditional imports in Java like we have the <code>ifdefs</code> in C\nThis is what I intend to achieve</p>\n\n<pre><code>ifdef TEST\nimport com.google.mystubs.swing;\nelif\nimport javax.swing.*;\nendif\n</code></pre>\n"},{"tags":["java","sum","user-input"],"comments":[{"owner":{"account_id":1888343,"reputation":176607,"user_id":1707091,"display_name":"rgettman"},"score":0,"creation_date":1395785487,"post_id":22647352,"comment_id":34493765,"body_markdown":"Please show any code you have that attempts to solve the problem, along with any problems you might have encountered, and then you will receive some guidance.  But, we won&#39;t do your (home)work for you.","body":"Please show any code you have that attempts to solve the problem, along with any problems you might have encountered, and then you will receive some guidance.  But, we won&#39;t do your (home)work for you."},{"owner":{"account_id":3743556,"reputation":106,"user_id":3112783,"display_name":"Will_61"},"score":0,"creation_date":1395785568,"post_id":22647352,"comment_id":34493796,"body_markdown":"Have a look at the Scanner class in Java for standard input.\nhttp://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html","body":"Have a look at the Scanner class in Java for standard input. <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/java/util/Scanner.html</a>"},{"owner":{"account_id":3403175,"reputation":22394,"user_id":2854908,"accept_rate":95,"display_name":"libik"},"score":0,"creation_date":1395785853,"post_id":22647352,"comment_id":34493934,"body_markdown":"Nice class name :D :D","body":"Nice class name :D :D"},{"owner":{"account_id":4195560,"reputation":35,"user_id":3437060,"accept_rate":100,"display_name":"SamsinOzo"},"score":0,"creation_date":1395785911,"post_id":22647352,"comment_id":34493953,"body_markdown":"@rgettman Added my code as asked, also not homework but rather doing a little bit extra, as the last thing I did with numbers was adding inputted data from diff int, but thank you for your reply.\n\nAlso the problem I was having is it wasn&#39;t reading any numbers after the first input Example 123 123 would return 123 not 246.","body":"@rgettman Added my code as asked, also not homework but rather doing a little bit extra, as the last thing I did with numbers was adding inputted data from diff int, but thank you for your reply.  Also the problem I was having is it wasn&#39;t reading any numbers after the first input Example 123 123 would return 123 not 246."},{"owner":{"account_id":4195560,"reputation":35,"user_id":3437060,"accept_rate":100,"display_name":"SamsinOzo"},"score":0,"creation_date":1395786177,"post_id":22647352,"comment_id":34494077,"body_markdown":"@libik LOL sorry I copied the bulk of the code from Lab 20 that was far easier then Lab 19 and I was annoyed, forgot to change it haha.\n\nAlso ended up just removing all of the code from the stuff I copied and rewrote it.","body":"@libik LOL sorry I copied the bulk of the code from Lab 20 that was far easier then Lab 19 and I was annoyed, forgot to change it haha.  Also ended up just removing all of the code from the stuff I copied and rewrote it."}],"answers":[{"tags":[],"owner":{"account_id":3403175,"reputation":22394,"user_id":2854908,"accept_rate":95,"display_name":"libik"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1395788840,"creation_date":1395785699,"answer_id":22647434,"question_id":22647352,"body_markdown":"It is very easy actually\r\n\r\n    import java.util.Scanner;\r\n    \r\n    public class JavaApplication115 {\r\n    \r\n        public static void main(String[] args) {\r\n            System.out.println(&quot;write numbers, if you write zero, program ends&quot;);\r\n            Scanner input = new Scanner(System.in); //just copy-and paste this line, you dont have to understand it yet.\r\n            int number;\r\n            int sum = 0;\r\n            do {\r\n                number = input.nextInt(); //this reads number from input and store its value in variable number\r\n                sum+= number; //here you add number to the total sum\r\n            } while(number != 0); //just repeat cycle as long as number is not zero\r\n            \r\n            System.out.println(&quot;Sum is : &quot; + sum);\r\n        }\r\n        \r\n    }\r\n\r\n***\r\n\r\nWorking code based on your code :\r\n\r\n    public static void main(String[] args) {\r\n        Scanner kb = new Scanner(System.in);\r\n        int score = 0;\r\n        int sum = 0;\r\n\r\n        System.out.println(&quot;Enter numbers here&quot;);\r\n        String line = kb.nextLine();\r\n        \r\n        kb = new Scanner(line); //has to do this to make the kb.hasNexInt() work.\r\n        while (kb.hasNextInt()) {\r\n            score = kb.nextInt();\r\n            sum += score;\r\n        }\r\n        System.out.println(sum);\r\n    }\r\n\r\n***\r\n\r\nAlso if you are interested in &quot;minimal&quot; version, which is the same as the one before, but using as less code as possible, here it is :\r\n\r\n    public static void main(String[] args) {\r\n        int sum = 0;\r\n        System.out.println(&quot;Enter numbers here&quot;);\r\n        Scanner kb = new Scanner((new Scanner(System.in)).nextLine()); //has to do this to make the kb.hasNexInt() work.\r\n        while (kb.hasNextInt()) {\r\n            sum += kb.nextInt();\r\n        }\r\n        System.out.println(sum);\r\n    }\r\n\r\n***\r\n\r\nFind sum of each line as long as sum is not zero (based on second block of code) :\r\n\r\n    public static void main(String[] args) {\r\n        System.out.println(&quot;Enter numbers here&quot;);\r\n        int sum;\r\n        do {\r\n            Scanner kb = new Scanner(System.in);\r\n            int score = 0;\r\n            sum = 0;\r\n            String line = kb.nextLine();\r\n            kb = new Scanner(line); //has to do this to make the kb.hasNexInt() work.\r\n            while (kb.hasNextInt()) {\r\n                score = kb.nextInt();\r\n                sum += score;\r\n            }\r\n            System.out.println(&quot;Sum = &quot; + sum);\r\n        } while (sum != 0);\r\n    }","title":"How to sum any amount of user inputted numbers from a single line","body":"<p>It is very easy actually</p>\n\n<pre><code>import java.util.Scanner;\n\npublic class JavaApplication115 {\n\n    public static void main(String[] args) {\n        System.out.println(\"write numbers, if you write zero, program ends\");\n        Scanner input = new Scanner(System.in); //just copy-and paste this line, you dont have to understand it yet.\n        int number;\n        int sum = 0;\n        do {\n            number = input.nextInt(); //this reads number from input and store its value in variable number\n            sum+= number; //here you add number to the total sum\n        } while(number != 0); //just repeat cycle as long as number is not zero\n\n        System.out.println(\"Sum is : \" + sum);\n    }\n\n}\n</code></pre>\n\n<hr>\n\n<p>Working code based on your code :</p>\n\n<pre><code>public static void main(String[] args) {\n    Scanner kb = new Scanner(System.in);\n    int score = 0;\n    int sum = 0;\n\n    System.out.println(\"Enter numbers here\");\n    String line = kb.nextLine();\n\n    kb = new Scanner(line); //has to do this to make the kb.hasNexInt() work.\n    while (kb.hasNextInt()) {\n        score = kb.nextInt();\n        sum += score;\n    }\n    System.out.println(sum);\n}\n</code></pre>\n\n<hr>\n\n<p>Also if you are interested in \"minimal\" version, which is the same as the one before, but using as less code as possible, here it is :</p>\n\n<pre><code>public static void main(String[] args) {\n    int sum = 0;\n    System.out.println(\"Enter numbers here\");\n    Scanner kb = new Scanner((new Scanner(System.in)).nextLine()); //has to do this to make the kb.hasNexInt() work.\n    while (kb.hasNextInt()) {\n        sum += kb.nextInt();\n    }\n    System.out.println(sum);\n}\n</code></pre>\n\n<hr>\n\n<p>Find sum of each line as long as sum is not zero (based on second block of code) :</p>\n\n<pre><code>public static void main(String[] args) {\n    System.out.println(\"Enter numbers here\");\n    int sum;\n    do {\n        Scanner kb = new Scanner(System.in);\n        int score = 0;\n        sum = 0;\n        String line = kb.nextLine();\n        kb = new Scanner(line); //has to do this to make the kb.hasNexInt() work.\n        while (kb.hasNextInt()) {\n            score = kb.nextInt();\n            sum += score;\n        }\n        System.out.println(\"Sum = \" + sum);\n    } while (sum != 0);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23049025,"reputation":1,"user_id":17166145,"display_name":"Ishan Gaur"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634367467,"creation_date":1634367467,"answer_id":69593396,"question_id":22647352,"body_markdown":" Question - Keep taking numbers as inputs till the user enters ‘x’, after that print sum of all.\r\n\r\n    Scanner sc = new Scanner(System.in);\r\n            int input = 0;\r\n            int sum = 0;\r\n            while (true){\r\n                sum = sum+input;\r\n                if (input==5){\r\n                    System.out.println(&quot;Loop is stopped&quot;);\r\n                    System.out.println(&quot;The sum is &quot; + sum);\r\n                    break;\r\n                }\r\n                else {\r\n                    System.out.println(&quot;Take the inputs&quot;);\r\n                    input = sc.nextInt();\r\n                }\r\n            }","title":"How to sum any amount of user inputted numbers from a single line","body":"<p>Question - Keep taking numbers as inputs till the user enters ‘x’, after that print sum of all.</p>\n<pre><code>Scanner sc = new Scanner(System.in);\n        int input = 0;\n        int sum = 0;\n        while (true){\n            sum = sum+input;\n            if (input==5){\n                System.out.println(&quot;Loop is stopped&quot;);\n                System.out.println(&quot;The sum is &quot; + sum);\n                break;\n            }\n            else {\n                System.out.println(&quot;Take the inputs&quot;);\n                input = sc.nextInt();\n            }\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22798305,"reputation":11,"user_id":16951498,"display_name":"Dushyant Verma"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661080050,"creation_date":1661079806,"answer_id":73433796,"question_id":22647352,"body_markdown":"//Input the number in a single line (but be in size limit of integer)\r\n\r\n    import java.util.Scanner;\r\n    \r\n    public class Sum_of_integers {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tScanner sc = new Scanner(System.in);\r\n    \t\tint num = sc.nextInt();\r\n    \t\tint sum = 0;\r\n    \t\twhile(num &gt;= 1) {  //base value\r\n    \t\t\tint lastval = num % 10;  //the logic\r\n    \t\t\tnum = num  / 10;\r\n    \t\t\tsum += lastval;\r\n    \t\t}\r\n    \t\tSystem.out.println(sum);\r\n    \t}\r\n    }\r\n\r\n\r\n","title":"How to sum any amount of user inputted numbers from a single line","body":"<p>//Input the number in a single line (but be in size limit of integer)</p>\n<pre><code>import java.util.Scanner;\n\npublic class Sum_of_integers {\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        int num = sc.nextInt();\n        int sum = 0;\n        while(num &gt;= 1) {  //base value\n            int lastval = num % 10;  //the logic\n            num = num  / 10;\n            sum += lastval;\n        }\n        System.out.println(sum);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":4195560,"reputation":35,"user_id":3437060,"accept_rate":100,"display_name":"SamsinOzo"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44685,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":22647434,"answer_count":3,"score":1,"last_activity_date":1661080050,"creation_date":1395785341,"question_id":22647352,"body_markdown":"Trying to figure out how I would take any amount of inputted numbers from a user and add them together\r\n\r\nExample user input: 1 2 3 4\r\nSum = 10\r\n\r\nThe user can put any amount of numbers in not a specified amount so if he wanted to add 1 2 3 4 5 6 7 8 9 10 11 12 13, it would sum them all up to 91\r\n\r\nThanks for the help in advance.\r\n\r\n    import java.util.Scanner;\r\n    \r\n    public class test\r\n    {\r\n        public static final int SENTINEL = -1;\r\n        public static void main(String[] args) {\r\n            Scanner kb = new Scanner(System.in);\r\n            int score = 0;\r\n            int sum = 0;\r\n         \r\n            System.out.println(&quot;Enter numbers here&quot;);\r\n            while (score &gt;= 0) {\r\n                if (score &lt;= -1) {\r\n                score = kb.nextInt();\r\n                sum += score;\r\n                score = 0;\r\n            }\r\n                System.out.println(sum);\r\n        }\r\n      }\r\n    }\r\n\r\n---------------------------------------\r\n\r\nThanks to libik for all his time and help, here is the finished code.\r\n\r\n    import java.util.Scanner;\r\n    \r\n    public class JavaApplication1156 {\r\n    \r\n        public static void main(String[] args) {\r\n        System.out.println(&quot;Enter numbers here&quot;);\r\n        int sum;\r\n        do {\r\n            Scanner kb = new Scanner(System.in);\r\n            int score = 0;\r\n            sum = 0;\r\n            String line = kb.nextLine();\r\n            kb = new Scanner(line); //has to do this to make the kb.hasNexInt() work.\r\n            while (kb.hasNextInt()) {\r\n                score = kb.nextInt();\r\n                sum += score;\r\n            }\r\n            if (sum &lt;= -1)\r\n            System.out.println(&quot;Application ended&quot;);\r\n            else if (sum &gt;= 0)\r\n            System.out.println(&quot;Sum = &quot; + sum);\r\n    \r\n        } while (sum != -1);\r\n      }\r\n    \r\n    }\r\n\r\n","title":"How to sum any amount of user inputted numbers from a single line","body":"<p>Trying to figure out how I would take any amount of inputted numbers from a user and add them together</p>\n\n<p>Example user input: 1 2 3 4\nSum = 10</p>\n\n<p>The user can put any amount of numbers in not a specified amount so if he wanted to add 1 2 3 4 5 6 7 8 9 10 11 12 13, it would sum them all up to 91</p>\n\n<p>Thanks for the help in advance.</p>\n\n<pre><code>import java.util.Scanner;\n\npublic class test\n{\n    public static final int SENTINEL = -1;\n    public static void main(String[] args) {\n        Scanner kb = new Scanner(System.in);\n        int score = 0;\n        int sum = 0;\n\n        System.out.println(\"Enter numbers here\");\n        while (score &gt;= 0) {\n            if (score &lt;= -1) {\n            score = kb.nextInt();\n            sum += score;\n            score = 0;\n        }\n            System.out.println(sum);\n    }\n  }\n}\n</code></pre>\n\n<hr>\n\n<p>Thanks to libik for all his time and help, here is the finished code.</p>\n\n<pre><code>import java.util.Scanner;\n\npublic class JavaApplication1156 {\n\n    public static void main(String[] args) {\n    System.out.println(\"Enter numbers here\");\n    int sum;\n    do {\n        Scanner kb = new Scanner(System.in);\n        int score = 0;\n        sum = 0;\n        String line = kb.nextLine();\n        kb = new Scanner(line); //has to do this to make the kb.hasNexInt() work.\n        while (kb.hasNextInt()) {\n            score = kb.nextInt();\n            sum += score;\n        }\n        if (sum &lt;= -1)\n        System.out.println(\"Application ended\");\n        else if (sum &gt;= 0)\n        System.out.println(\"Sum = \" + sum);\n\n    } while (sum != -1);\n  }\n\n}\n</code></pre>\n"},{"tags":["java","microsoft-graph-api","microsoft-graph-sdks","microsoft-graph-files"],"answers":[{"tags":[],"owner":{"account_id":24140407,"reputation":571,"user_id":18106676,"display_name":"vicky kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660922373,"creation_date":1660915581,"answer_id":73417522,"question_id":73416272,"body_markdown":"It looks like you are trying with the wrong code. Use this code to search the file:\r\n\r\n```\r\nGraphServiceClient graphClient = GraphServiceClient.builder().authenticationProvider( authProvider ).buildClient();\r\n\r\nDriveItemSearchCollectionPage search = graphClient.me().drive().root()\r\n\t.search(DriveItemSearchParameterSet\r\n\t\t.newBuilder()\r\n\t\t.withQ(&quot;File_Name&quot;)\r\n\t\t.build())\r\n\t.buildRequest()\r\n\t.get();\r\n```\r\n\r\nReference: https://learn.microsoft.com/en-us/graph/api/driveitem-search?view=graph-rest-1.0&amp;tabs=java","title":"I receive 403 HTTP status on &quot;/drive/root/search(q=&#39;file-name&#39;)&quot;","body":"<p>It looks like you are trying with the wrong code. Use this code to search the file:</p>\n<pre><code>GraphServiceClient graphClient = GraphServiceClient.builder().authenticationProvider( authProvider ).buildClient();\n\nDriveItemSearchCollectionPage search = graphClient.me().drive().root()\n    .search(DriveItemSearchParameterSet\n        .newBuilder()\n        .withQ(&quot;File_Name&quot;)\n        .build())\n    .buildRequest()\n    .get();\n</code></pre>\n<p>Reference: <a href=\"https://learn.microsoft.com/en-us/graph/api/driveitem-search?view=graph-rest-1.0&amp;tabs=java\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/graph/api/driveitem-search?view=graph-rest-1.0&amp;tabs=java</a></p>\n"},{"tags":[],"owner":{"account_id":14141709,"reputation":51,"user_id":13848365,"display_name":"Artur Kovalchuk"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1661079031,"creation_date":1661078655,"answer_id":73433666,"question_id":73416272,"body_markdown":"Need to add the scope &quot;Sites.Read.All&quot; before the update I had &quot;User.Read.All&quot; and &quot;Files.Read.All&quot;","title":"I receive 403 HTTP status on &quot;/drive/root/search(q=&#39;file-name&#39;)&quot;","body":"<p>Need to add the scope &quot;Sites.Read.All&quot; before the update I had &quot;User.Read.All&quot; and &quot;Files.Read.All&quot;</p>\n"}],"owner":{"account_id":14141709,"reputation":51,"user_id":13848365,"display_name":"Artur Kovalchuk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":174,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73433666,"answer_count":2,"score":2,"last_activity_date":1661079031,"creation_date":1660909504,"question_id":73416272,"body_markdown":"I build GraphServiceClient \r\n```\r\n        final ClientSecretCredential clientSecretCredential = new ClientSecretCredentialBuilder()\r\n            .clientId(&quot;todo-replace-on-own&quot;)\r\n            .clientSecret(&quot;todo-replace-on-own&quot;)\r\n            .tenantId(&quot;todo-replace-on-own&quot;)\r\n            .build();\r\n\r\n        final TokenCredentialAuthProvider tokenCredAuthProvider =\r\n            new TokenCredentialAuthProvider(List.of(&quot;https://graph.microsoft.com/.default&quot;), clientSecretCredential);\r\n\r\n        final GraphServiceClient graphClient = GraphServiceClient\r\n            .builder()\r\n            .authenticationProvider(tokenCredAuthProvider)\r\n            .buildClient();\r\n```\r\n\r\nand I try to find a file\r\n\r\n```\r\ngraphClient.customRequest(&quot;/drive/root/search(q=&#39;file-name&#39;)&quot;)\r\n    .buildRequest()\r\n    .get();\r\n```\r\n\r\nbut receive 403 HTTP status, is it a problem in scope or file permissions?\r\n\r\nUDP: \r\nI also try with\r\n```\r\n        DriveItemSearchCollectionPage search = graphClient\r\n            .drive()\r\n            .root()\r\n            .search(DriveItemSearchParameterSet.newBuilder() .withQ(&quot;File_Name&quot;).build())\r\n            .buildRequest()\r\n            .get();\r\n```\r\nResponse:\r\n```\r\nError message: Access denied\r\n\r\nGET https://graph.microsoft.com/v1.0/drive/root/microsoft.graph.search(q=&#39;File_Name&#39;)\r\nSdkVersion : graph-java/v5.31.0\r\n\r\n\r\n403 : Forbidden\r\n```","title":"I receive 403 HTTP status on &quot;/drive/root/search(q=&#39;file-name&#39;)&quot;","body":"<p>I build GraphServiceClient</p>\n<pre><code>        final ClientSecretCredential clientSecretCredential = new ClientSecretCredentialBuilder()\n            .clientId(&quot;todo-replace-on-own&quot;)\n            .clientSecret(&quot;todo-replace-on-own&quot;)\n            .tenantId(&quot;todo-replace-on-own&quot;)\n            .build();\n\n        final TokenCredentialAuthProvider tokenCredAuthProvider =\n            new TokenCredentialAuthProvider(List.of(&quot;https://graph.microsoft.com/.default&quot;), clientSecretCredential);\n\n        final GraphServiceClient graphClient = GraphServiceClient\n            .builder()\n            .authenticationProvider(tokenCredAuthProvider)\n            .buildClient();\n</code></pre>\n<p>and I try to find a file</p>\n<pre><code>graphClient.customRequest(&quot;/drive/root/search(q='file-name')&quot;)\n    .buildRequest()\n    .get();\n</code></pre>\n<p>but receive 403 HTTP status, is it a problem in scope or file permissions?</p>\n<p>UDP:\nI also try with</p>\n<pre><code>        DriveItemSearchCollectionPage search = graphClient\n            .drive()\n            .root()\n            .search(DriveItemSearchParameterSet.newBuilder() .withQ(&quot;File_Name&quot;).build())\n            .buildRequest()\n            .get();\n</code></pre>\n<p>Response:</p>\n<pre><code>Error message: Access denied\n\nGET https://graph.microsoft.com/v1.0/drive/root/microsoft.graph.search(q='File_Name')\nSdkVersion : graph-java/v5.31.0\n\n\n403 : Forbidden\n</code></pre>\n"},{"tags":["java","android","zxing","qr-code"],"comments":[{"owner":{"account_id":2162158,"reputation":540,"user_id":1916093,"display_name":"Flaxie"},"score":0,"creation_date":1422607695,"post_id":28232116,"comment_id":44826468,"body_markdown":"Are you running proguard on the code?","body":"Are you running proguard on the code?"},{"owner":{"display_name":"user2531590"},"score":0,"creation_date":1422607806,"post_id":28232116,"comment_id":44826512,"body_markdown":"@Flaxie Nope but why?","body":"@Flaxie Nope but why?"},{"owner":{"account_id":4182503,"reputation":2396,"user_id":3427079,"accept_rate":87,"display_name":"G_V"},"score":0,"creation_date":1422607973,"post_id":28232116,"comment_id":44826578,"body_markdown":"Did you add the jar to the build path?","body":"Did you add the jar to the build path?"},{"owner":{"account_id":2162158,"reputation":540,"user_id":1916093,"display_name":"Flaxie"},"score":0,"creation_date":1422608006,"post_id":28232116,"comment_id":44826594,"body_markdown":"If it works in debug but you have &quot;minifyEnabled true&quot; in your gradle file the release builds will get obfuscated and the names on the classes will change.","body":"If it works in debug but you have &quot;minifyEnabled true&quot; in your gradle file the release builds will get obfuscated and the names on the classes will change."},{"owner":{"display_name":"user2531590"},"score":0,"creation_date":1422608051,"post_id":28232116,"comment_id":44826612,"body_markdown":"@G_V Yeah, I added the core.jar into the build path and under the libs already","body":"@G_V Yeah, I added the core.jar into the build path and under the libs already"},{"owner":{"display_name":"user2531590"},"score":0,"creation_date":1422608082,"post_id":28232116,"comment_id":44826622,"body_markdown":"@Flaxie Sorry but what do I have to change? And yeah sorry my mistake, I saw the proguard.txt under the file structure","body":"@Flaxie Sorry but what do I have to change? And yeah sorry my mistake, I saw the proguard.txt under the file structure"},{"owner":{"account_id":2162158,"reputation":540,"user_id":1916093,"display_name":"Flaxie"},"score":0,"creation_date":1422608264,"post_id":28232116,"comment_id":44826700,"body_markdown":"In your build.gradle try setting &quot;minifyEnabled false&quot;.","body":"In your build.gradle try setting &quot;minifyEnabled false&quot;."},{"owner":{"display_name":"user2531590"},"score":0,"creation_date":1422608366,"post_id":28232116,"comment_id":44826749,"body_markdown":"But then I could not find the build.gradle file","body":"But then I could not find the build.gradle file"},{"owner":{"account_id":2255261,"reputation":1459,"user_id":1986576,"display_name":"HenryChuang"},"score":0,"creation_date":1422608567,"post_id":28232116,"comment_id":44826865,"body_markdown":"make sure your core.jar has been exported, in eclipse : project -&gt; properties -&gt; java build path -&gt; order and export","body":"make sure your core.jar has been exported, in eclipse : project -&gt; properties -&gt; java build path -&gt; order and export"},{"owner":{"account_id":2069643,"reputation":18925,"user_id":1844392,"accept_rate":65,"display_name":"Piyush"},"score":0,"creation_date":1422608787,"post_id":28232116,"comment_id":44826986,"body_markdown":"@IWasSoLost Is it in Android Studio?","body":"@IWasSoLost Is it in Android Studio?"},{"owner":{"display_name":"user2531590"},"score":0,"creation_date":1422609185,"post_id":28232116,"comment_id":44827201,"body_markdown":"Nope, I am using eclipse for Android.","body":"Nope, I am using eclipse for Android."},{"owner":{"display_name":"user2531590"},"score":0,"creation_date":1422609255,"post_id":28232116,"comment_id":44827240,"body_markdown":"@HenryChuang And yup, the core.jar is inside the order and export as well","body":"@HenryChuang And yup, the core.jar is inside the order and export as well"},{"owner":{"account_id":2069643,"reputation":18925,"user_id":1844392,"accept_rate":65,"display_name":"Piyush"},"score":0,"creation_date":1422609665,"post_id":28232116,"comment_id":44827446,"body_markdown":"@IWasSoLost So is it checked in order and export menu too?","body":"@IWasSoLost So is it checked in order and export menu too?"},{"owner":{"display_name":"user2531590"},"score":0,"creation_date":1422610098,"post_id":28232116,"comment_id":44827689,"body_markdown":"Oh yeah, sorry my bad. I didn&#39;t checked it","body":"Oh yeah, sorry my bad. I didn&#39;t checked it"},{"owner":{"account_id":2069643,"reputation":18925,"user_id":1844392,"accept_rate":65,"display_name":"Piyush"},"score":0,"creation_date":1422610649,"post_id":28232116,"comment_id":44828004,"body_markdown":"So you need to check it. Clean your project and run it.","body":"So you need to check it. Clean your project and run it."}],"answers":[{"tags":[],"owner":{"account_id":55135,"reputation":21845,"user_id":165071,"accept_rate":96,"display_name":"Alexander Farber"},"down_vote_count":0,"up_vote_count":75,"is_accepted":false,"score":75,"last_activity_date":1651403108,"creation_date":1432900978,"answer_id":30529128,"question_id":28232116,"body_markdown":"I have updated [my small demo project at Github][1] and my answer below for the year 2022:\r\n\r\n[![screenshot][2]][2]\r\n\r\nAdd the ZXing library to your [app/build.gradle][3] file:\r\n\r\n    implementation &#39;com.google.zxing:core:3.4.1&#39;\r\n\r\nAnd then use the following function in your [MainActivity.java][4] to generate a QR code image out of a string:\r\n\r\n    Bitmap encodeAsBitmap(String str) throws WriterException {\r\n        QRCodeWriter writer = new QRCodeWriter();\r\n        BitMatrix bitMatrix = writer.encode(str, BarcodeFormat.QR_CODE, 400, 400);\r\n\r\n        int w = bitMatrix.getWidth();\r\n        int h = bitMatrix.getHeight();\r\n        int[] pixels = new int[w * h];\r\n        for (int y = 0; y &lt; h; y++) {\r\n            for (int x = 0; x &lt; w; x++) {\r\n                pixels[y * w + x] = bitMatrix.get(x, y) ? Color.BLACK : Color.WHITE;\r\n            }\r\n        }\r\n\r\n        Bitmap bitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);\r\n        bitmap.setPixels(pixels, 0, w, 0, 0, w, h);\r\n        return bitmap;\r\n    }\r\n\r\n  [1]: https://github.com/afarber/android-questions/tree/master/QREncoder\r\n  [2]: https://i.stack.imgur.com/ZWKxy.png\r\n  [3]: https://github.com/afarber/android-questions/blob/master/QREncoder/app/build.gradle\r\n  [4]: https://github.com/afarber/android-questions/blob/master/QREncoder/app/src/main/java/de/afarber/qrencoder/MainActivity.java","title":"Android Using ZXing Generate QR Code","body":"<p>I have updated <a href=\"https://github.com/afarber/android-questions/tree/master/QREncoder\" rel=\"noreferrer\">my small demo project at Github</a> and my answer below for the year 2022:</p>\n<p><a href=\"https://i.stack.imgur.com/ZWKxy.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ZWKxy.png\" alt=\"screenshot\" /></a></p>\n<p>Add the ZXing library to your <a href=\"https://github.com/afarber/android-questions/blob/master/QREncoder/app/build.gradle\" rel=\"noreferrer\">app/build.gradle</a> file:</p>\n<pre><code>implementation 'com.google.zxing:core:3.4.1'\n</code></pre>\n<p>And then use the following function in your <a href=\"https://github.com/afarber/android-questions/blob/master/QREncoder/app/src/main/java/de/afarber/qrencoder/MainActivity.java\" rel=\"noreferrer\">MainActivity.java</a> to generate a QR code image out of a string:</p>\n<pre><code>Bitmap encodeAsBitmap(String str) throws WriterException {\n    QRCodeWriter writer = new QRCodeWriter();\n    BitMatrix bitMatrix = writer.encode(str, BarcodeFormat.QR_CODE, 400, 400);\n\n    int w = bitMatrix.getWidth();\n    int h = bitMatrix.getHeight();\n    int[] pixels = new int[w * h];\n    for (int y = 0; y &lt; h; y++) {\n        for (int x = 0; x &lt; w; x++) {\n            pixels[y * w + x] = bitMatrix.get(x, y) ? Color.BLACK : Color.WHITE;\n        }\n    }\n\n    Bitmap bitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);\n    bitmap.setPixels(pixels, 0, w, 0, 0, w, h);\n    return bitmap;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1428565,"reputation":3002,"user_id":1351505,"accept_rate":30,"display_name":"Anirudh"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1547644981,"creation_date":1481542080,"answer_id":41099837,"question_id":28232116,"body_markdown":"    public static int white = 0xFFFFFFFF;\r\n\tpublic static int black = 0xFF000000;\r\n\tpublic final static int WIDTH = 500;\r\n\r\n\r\n    try\r\n\t\t{\r\n\t\t\tBitmap bmp =  encodeAsBitmap(&quot;Life is a bitch&quot;);\r\n            imgView.setImageBitmap(bmp);\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\r\n\r\n    Bitmap encodeAsBitmap(String str) throws WriterException {\r\n\t\tBitMatrix result;\r\n\t\tBitmap bitmap=null;\r\n\t\ttry\r\n\t\t{\r\n\t\t\tresult = new MultiFormatWriter().encode(str,\r\n\t\t\t\t\tBarcodeFormat.QR_CODE, WIDTH, WIDTH, null);\r\n\r\n\t\t\tint w = result.getWidth();\r\n\t\t\tint h = result.getHeight();\r\n\t\t\tint[] pixels = new int[w * h];\r\n\t\t\tfor (int y = 0; y &lt; h; y++) {\r\n\t\t\t\tint offset = y * w;\r\n\t\t\t\tfor (int x = 0; x &lt; w; x++) {\r\n\t\t\t\t\tpixels[offset + x] = result.get(x, y) ? black:white;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tbitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);\r\n\t\t\tbitmap.setPixels(pixels, 0, WIDTH, 0, 0, w, h);\r\n\t\t} catch (Exception iae) {\r\n\t\t\tiae.printStackTrace();\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn bitmap;\r\n\t}","title":"Android Using ZXing Generate QR Code","body":"<pre><code>public static int white = 0xFFFFFFFF;\npublic static int black = 0xFF000000;\npublic final static int WIDTH = 500;\n\n\ntry\n    {\n        Bitmap bmp =  encodeAsBitmap(\"Life is a bitch\");\n        imgView.setImageBitmap(bmp);\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n\n\nBitmap encodeAsBitmap(String str) throws WriterException {\n    BitMatrix result;\n    Bitmap bitmap=null;\n    try\n    {\n        result = new MultiFormatWriter().encode(str,\n                BarcodeFormat.QR_CODE, WIDTH, WIDTH, null);\n\n        int w = result.getWidth();\n        int h = result.getHeight();\n        int[] pixels = new int[w * h];\n        for (int y = 0; y &lt; h; y++) {\n            int offset = y * w;\n            for (int x = 0; x &lt; w; x++) {\n                pixels[offset + x] = result.get(x, y) ? black:white;\n            }\n        }\n        bitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);\n        bitmap.setPixels(pixels, 0, WIDTH, 0, 0, w, h);\n    } catch (Exception iae) {\n        iae.printStackTrace();\n        return null;\n    }\n    return bitmap;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7973859,"reputation":483,"user_id":6017633,"display_name":"user6017633"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1651411474,"creation_date":1491587031,"answer_id":43284184,"question_id":28232116,"body_markdown":"ZXing library can help here.\r\n\r\nOrigin is: [Generate QRCode Android Example][1]\r\n\r\nAdd in dependencies\r\n\r\n    compile &#39;com.google.zxing:core:3.2.1&#39;\r\n\r\nHere is the method to convert string into QR Image \r\n \r\n\r\n    private Bitmap TextToImageEncode(String Value) throws WriterException {\r\n            BitMatrix bitMatrix;\r\n            try {\r\n                bitMatrix = new MultiFormatWriter().encode(\r\n                        Value,\r\n                        BarcodeFormat.DATA_MATRIX.QR_CODE,\r\n                        QRcodeWidth, QRcodeWidth, null\r\n                );\r\n     \r\n            } catch (IllegalArgumentException Illegalargumentexception) {\r\n     \r\n                return null;\r\n            }\r\n            int bitMatrixWidth = bitMatrix.getWidth();\r\n     \r\n            int bitMatrixHeight = bitMatrix.getHeight();\r\n     \r\n            int[] pixels = new int[bitMatrixWidth * bitMatrixHeight];\r\n     \r\n            for (int y = 0; y &lt; bitMatrixHeight; y++) {\r\n                int offset = y * bitMatrixWidth;\r\n     \r\n                for (int x = 0; x &lt; bitMatrixWidth; x++) {\r\n     \r\n                    pixels[offset + x] = bitMatrix.get(x, y) ?\r\n                            getResources().getColor(R.color.black):getResources().getColor(R.color.white);\r\n                }\r\n            }\r\n            Bitmap bitmap = Bitmap.createBitmap(bitMatrixWidth, bitMatrixHeight, Bitmap.Config.ARGB_4444);\r\n     \r\n            bitmap.setPixels(pixels, 0, 500, 0, 0, bitMatrixWidth, bitMatrixHeight);\r\n            return bitmap;\r\n        }\r\n\r\nSave generated QR image \r\n\r\n     public String saveImage(Bitmap myBitmap) {\r\n            ByteArrayOutputStream bytes = new ByteArrayOutputStream();\r\n            myBitmap.compress(Bitmap.CompressFormat.JPEG, 90, bytes);\r\n            File wallpaperDirectory = new File(\r\n                    Environment.getExternalStorageDirectory() + IMAGE_DIRECTORY);\r\n            // have the object build the directory structure, if needed.\r\n     \r\n            if (!wallpaperDirectory.exists()) {\r\n                Log.d(&quot;dirrrrrr&quot;, &quot;&quot; + wallpaperDirectory.mkdirs());\r\n                wallpaperDirectory.mkdirs();\r\n            }\r\n     \r\n            try {\r\n                File f = new File(wallpaperDirectory, Calendar.getInstance()\r\n                        .getTimeInMillis() + &quot;.jpg&quot;);\r\n                f.createNewFile();   //give read write permission\r\n                FileOutputStream fo = new FileOutputStream(f);\r\n                fo.write(bytes.toByteArray());\r\n                MediaScannerConnection.scanFile(this,\r\n                        new String[]{f.getPath()},\r\n                        new String[]{&quot;image/jpeg&quot;}, null);\r\n                fo.close();\r\n                Log.d(&quot;TAG&quot;, &quot;File Saved::---&gt;&quot; + f.getAbsolutePath());\r\n     \r\n                return f.getAbsolutePath();\r\n            } catch (IOException e1) {\r\n                e1.printStackTrace();\r\n            }\r\n            return &quot;&quot;;\r\n     \r\n        }\r\n\r\n\r\n  [1]: https://demonuts.com/generate-qr-code/","title":"Android Using ZXing Generate QR Code","body":"<p>ZXing library can help here.</p>\n<p>Origin is: <a href=\"https://demonuts.com/generate-qr-code/\" rel=\"nofollow noreferrer\">Generate QRCode Android Example</a></p>\n<p>Add in dependencies</p>\n<pre><code>compile 'com.google.zxing:core:3.2.1'\n</code></pre>\n<p>Here is the method to convert string into QR Image</p>\n<pre><code>private Bitmap TextToImageEncode(String Value) throws WriterException {\n        BitMatrix bitMatrix;\n        try {\n            bitMatrix = new MultiFormatWriter().encode(\n                    Value,\n                    BarcodeFormat.DATA_MATRIX.QR_CODE,\n                    QRcodeWidth, QRcodeWidth, null\n            );\n \n        } catch (IllegalArgumentException Illegalargumentexception) {\n \n            return null;\n        }\n        int bitMatrixWidth = bitMatrix.getWidth();\n \n        int bitMatrixHeight = bitMatrix.getHeight();\n \n        int[] pixels = new int[bitMatrixWidth * bitMatrixHeight];\n \n        for (int y = 0; y &lt; bitMatrixHeight; y++) {\n            int offset = y * bitMatrixWidth;\n \n            for (int x = 0; x &lt; bitMatrixWidth; x++) {\n \n                pixels[offset + x] = bitMatrix.get(x, y) ?\n                        getResources().getColor(R.color.black):getResources().getColor(R.color.white);\n            }\n        }\n        Bitmap bitmap = Bitmap.createBitmap(bitMatrixWidth, bitMatrixHeight, Bitmap.Config.ARGB_4444);\n \n        bitmap.setPixels(pixels, 0, 500, 0, 0, bitMatrixWidth, bitMatrixHeight);\n        return bitmap;\n    }\n</code></pre>\n<p>Save generated QR image</p>\n<pre><code> public String saveImage(Bitmap myBitmap) {\n        ByteArrayOutputStream bytes = new ByteArrayOutputStream();\n        myBitmap.compress(Bitmap.CompressFormat.JPEG, 90, bytes);\n        File wallpaperDirectory = new File(\n                Environment.getExternalStorageDirectory() + IMAGE_DIRECTORY);\n        // have the object build the directory structure, if needed.\n \n        if (!wallpaperDirectory.exists()) {\n            Log.d(&quot;dirrrrrr&quot;, &quot;&quot; + wallpaperDirectory.mkdirs());\n            wallpaperDirectory.mkdirs();\n        }\n \n        try {\n            File f = new File(wallpaperDirectory, Calendar.getInstance()\n                    .getTimeInMillis() + &quot;.jpg&quot;);\n            f.createNewFile();   //give read write permission\n            FileOutputStream fo = new FileOutputStream(f);\n            fo.write(bytes.toByteArray());\n            MediaScannerConnection.scanFile(this,\n                    new String[]{f.getPath()},\n                    new String[]{&quot;image/jpeg&quot;}, null);\n            fo.close();\n            Log.d(&quot;TAG&quot;, &quot;File Saved::---&gt;&quot; + f.getAbsolutePath());\n \n            return f.getAbsolutePath();\n        } catch (IOException e1) {\n            e1.printStackTrace();\n        }\n        return &quot;&quot;;\n \n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6830603,"reputation":934,"user_id":5254754,"accept_rate":100,"display_name":"Harshil"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1506428953,"creation_date":1506428953,"answer_id":46426616,"question_id":28232116,"body_markdown":"Following code worked for me:\r\n\r\n    ...\r\n    String QRcode = &quot;...&quot;;\r\n    new generateQrcode(qrcodeImageview).execute(QRcode);\r\n    ...\r\n    private class generateQrcode extends AsyncTask&lt;String, Void, Bitmap&gt; {\r\n            public final static int WIDTH = 400;\r\n            ImageView bmImage;\r\n    \r\n            public generateQrcode(ImageView bmImage) {\r\n                this.bmImage = bmImage;\r\n            }\r\n    \r\n            protected Bitmap doInBackground(String... urls) {\r\n                String Value = urls[0];\r\n                com.google.zxing.Writer writer = new QRCodeWriter();\r\n                Bitmap bitmap = null;\r\n                BitMatrix bitMatrix = null;\r\n                try {\r\n                    bitMatrix = writer.encode(Value, com.google.zxing.BarcodeFormat.QR_CODE, WIDTH, WIDTH,\r\n                            ImmutableMap.of(EncodeHintType.MARGIN, 1));\r\n                    bitmap = Bitmap.createBitmap(400, 400, Bitmap.Config.ARGB_8888);\r\n                    for (int i = 0; i &lt; 400; i++) {\r\n                        for (int j = 0; j &lt; 400; j++) {\r\n                            bitmap.setPixel(i, j, bitMatrix.get(i, j) ? Color.BLACK\r\n                                    : Color.WHITE);\r\n                        }\r\n                    }\r\n                } catch (WriterException e) {\r\n                    e.printStackTrace();\r\n                }\r\n                return bitmap;\r\n            }\r\n    \r\n            protected void onPostExecute(Bitmap result) {\r\n                bmImage.setImageBitmap(result);\r\n            }\r\n        }","title":"Android Using ZXing Generate QR Code","body":"<p>Following code worked for me:</p>\n\n<pre><code>...\nString QRcode = \"...\";\nnew generateQrcode(qrcodeImageview).execute(QRcode);\n...\nprivate class generateQrcode extends AsyncTask&lt;String, Void, Bitmap&gt; {\n        public final static int WIDTH = 400;\n        ImageView bmImage;\n\n        public generateQrcode(ImageView bmImage) {\n            this.bmImage = bmImage;\n        }\n\n        protected Bitmap doInBackground(String... urls) {\n            String Value = urls[0];\n            com.google.zxing.Writer writer = new QRCodeWriter();\n            Bitmap bitmap = null;\n            BitMatrix bitMatrix = null;\n            try {\n                bitMatrix = writer.encode(Value, com.google.zxing.BarcodeFormat.QR_CODE, WIDTH, WIDTH,\n                        ImmutableMap.of(EncodeHintType.MARGIN, 1));\n                bitmap = Bitmap.createBitmap(400, 400, Bitmap.Config.ARGB_8888);\n                for (int i = 0; i &lt; 400; i++) {\n                    for (int j = 0; j &lt; 400; j++) {\n                        bitmap.setPixel(i, j, bitMatrix.get(i, j) ? Color.BLACK\n                                : Color.WHITE);\n                    }\n                }\n            } catch (WriterException e) {\n                e.printStackTrace();\n            }\n            return bitmap;\n        }\n\n        protected void onPostExecute(Bitmap result) {\n            bmImage.setImageBitmap(result);\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2081724,"reputation":3713,"user_id":2472350,"accept_rate":67,"display_name":"Amin Keshavarzian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661078003,"creation_date":1661078003,"answer_id":73433597,"question_id":28232116,"body_markdown":"Using this [library][1] its easier\r\n\r\n\r\n  [1]: https://github.com/journeyapps/zxing-android-embedded\r\n\r\nadd the dependency :\r\n\r\n    implementation &#39;com.journeyapps:zxing-android-embedded:4.3.0&#39;\r\n\r\nand easily get the bitmap:\r\n\r\n    try {\r\n           val qrCodeBitmap = BarcodeEncoder().encodeBitmap(&quot;your qr code data here&quot;, BarcodeFormat.QR_CODE, 400, 400)\r\n    } catch (e: Exception) {\r\n\r\n    }","title":"Android Using ZXing Generate QR Code","body":"<p>Using this <a href=\"https://github.com/journeyapps/zxing-android-embedded\" rel=\"nofollow noreferrer\">library</a> its easier</p>\n<p>add the dependency :</p>\n<pre><code>implementation 'com.journeyapps:zxing-android-embedded:4.3.0'\n</code></pre>\n<p>and easily get the bitmap:</p>\n<pre><code>try {\n       val qrCodeBitmap = BarcodeEncoder().encodeBitmap(&quot;your qr code data here&quot;, BarcodeFormat.QR_CODE, 400, 400)\n} catch (e: Exception) {\n\n}\n</code></pre>\n"}],"owner":{"display_name":"user2531590"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63055,"favorite_count":0,"down_vote_count":0,"up_vote_count":32,"answer_count":5,"score":32,"last_activity_date":1661078003,"creation_date":1422607328,"question_id":28232116,"body_markdown":"I was having some problem when trying to generate QR code in Android Programming. Here is the [Tutorial][1] I followed. When my generate button on click, I am calling this method:\r\n\r\n\tprivate void generateQR(){\r\n\t\tString qrInputText = &quot;test&quot;;\r\n\t\t\r\n\t\t//Find screen size\r\n\t\tWindowManager manager = (WindowManager) getSystemService(WINDOW_SERVICE);\r\n\t\tDisplay display = manager.getDefaultDisplay();\r\n\t\tPoint point = new Point();\r\n\t\tdisplay.getSize(point);\r\n\t\tint width = point.x;\r\n\t\tint height = point.y;\r\n\t\tint smallerDimension = width &lt; height ? width : height;\r\n\t\tsmallerDimension = smallerDimension * 3/4;\r\n\t\t\r\n\t\t//Encode with a QR Code image\r\n\t\tQRCodeEncoder qrCodeEncoder = new QRCodeEncoder(\r\n\t\t\tqrInputText, \r\n\t\t\tnull, \r\n\t\t\tContents.Type.TEXT,  \r\n\t\t\tBarcodeFormat.QR_CODE.toString(), \r\n\t\t\tsmallerDimension\r\n\t\t);\r\n\t\ttry {\r\n\t\t\tBitmap bitmap = qrCodeEncoder.encodeAsBitmap();\r\n\t\t\tImageView myImage = (ImageView) findViewById(R.id.ivImage);\r\n\t\t\tmyImage.setImageBitmap(bitmap);\r\n\t\t} catch (WriterException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\r\nAnd then for the QRCodeEncoder and Contents classes, I followed the one in the tutorial. However, when I click on generate, I am getting the error message as:\r\n\r\n    01-30 16:37:03.093: I/dalvikvm(1069): Could not find method com.google.zxing.BarcodeFormat.valueOf, referenced from method com.example.qrcodescan.QRCodeEncoder.encodeContents\r\n    01-30 16:37:03.093: W/dalvikvm(1069): VFY: unable to resolve static method 338: Lcom/google/zxing/BarcodeFormat;.valueOf (Ljava/lang/String;)Lcom/google/zxing/BarcodeFormat;\r\n    01-30 16:37:03.093: D/dalvikvm(1069): VFY: replacing opcode 0x71 at 0x0005\r\n    01-30 16:37:03.093: W/dalvikvm(1069): VFY: unable to resolve static field 287 (QR_CODE) in Lcom/google/zxing/BarcodeFormat;\r\n    01-30 16:37:03.093: D/dalvikvm(1069): VFY: replacing opcode 0x62 at 0x0011\r\n    01-30 16:37:03.093: W/dalvikvm(1069): VFY: unable to resolve static field 287 (QR_CODE) in Lcom/google/zxing/BarcodeFormat;\r\n    01-30 16:37:03.093: D/dalvikvm(1069): VFY: replacing opcode 0x62 at 0x0015\r\n    01-30 16:37:03.093: W/dalvikvm(1069): VFY: unable to resolve static field 294 (CHARACTER_SET) in Lcom/google/zxing/EncodeHintType;\r\n    01-30 16:37:03.093: D/dalvikvm(1069): VFY: replacing opcode 0x62 at 0x0018\r\n    01-30 16:37:03.093: E/dalvikvm(1069): Could not find class &#39;com.google.zxing.MultiFormatWriter&#39;, referenced from method com.example.qrcodescan.QRCodeEncoder.encodeAsBitmap\r\n    01-30 16:37:03.093: W/dalvikvm(1069): VFY: unable to resolve new-instance 150 (Lcom/google/zxing/MultiFormatWriter;) in Lcom/example/qrcodescan/QRCodeEncoder;\r\n    01-30 16:37:03.093: D/dalvikvm(1069): VFY: replacing opcode 0x22 at 0x001d\r\n    01-30 16:37:03.093: D/dalvikvm(1069): DexOpt: unable to opt direct call 0x0159 at 0x1f in Lcom/example/qrcodescan/QRCodeEncoder;.encodeAsBitmap\r\n    01-30 16:37:03.093: D/AndroidRuntime(1069): Shutting down VM\r\n    01-30 16:37:03.093: W/dalvikvm(1069): threadid=1: thread exiting with uncaught exception (group=0x40c341f8)\r\n    01-30 16:37:03.101: E/AndroidRuntime(1069): FATAL EXCEPTION: main\r\n    01-30 16:37:03.101: E/AndroidRuntime(1069): java.lang.NoClassDefFoundError: com.google.zxing.BarcodeFormat\r\n    01-30 16:37:03.101: E/AndroidRuntime(1069): \tat com.example.qrcodescan.MainActivity.generateQR(MainActivity.java:95)\r\n    01-30 16:37:03.101: E/AndroidRuntime(1069): \tat com.example.qrcodescan.MainActivity.access$0(MainActivity.java:77)\r\n    01-30 16:37:03.101: E/AndroidRuntime(1069): \tat com.example.qrcodescan.MainActivity$2.onClick(MainActivity.java:54)\r\n    01-30 16:37:03.101: E/AndroidRuntime(1069): \tat android.view.View.performClick(View.java:3620)\r\n    01-30 16:37:03.101: E/AndroidRuntime(1069): \tat android.view.View$PerformClick.run(View.java:14292)\r\n    01-30 16:37:03.101: E/AndroidRuntime(1069): \tat android.os.Handler.handleCallback(Handler.java:605)\r\n    01-30 16:37:03.101: E/AndroidRuntime(1069): \tat android.os.Handler.dispatchMessage(Handler.java:92)\r\n    01-30 16:37:03.101: E/AndroidRuntime(1069): \tat android.os.Looper.loop(Looper.java:137)\r\n    01-30 16:37:03.101: E/AndroidRuntime(1069): \tat android.app.ActivityThread.main(ActivityThread.java:4512)\r\n    01-30 16:37:03.101: E/AndroidRuntime(1069): \tat java.lang.reflect.Method.invokeNative(Native Method)\r\n    01-30 16:37:03.101: E/AndroidRuntime(1069): \tat java.lang.reflect.Method.invoke(Method.java:511)\r\n    01-30 16:37:03.101: E/AndroidRuntime(1069): \tat com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:982)\r\n    01-30 16:37:03.101: E/AndroidRuntime(1069): \tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:749)\r\n    01-30 16:37:03.101: E/AndroidRuntime(1069): \tat dalvik.system.NativeStart.main(Native Method)\r\n\r\nI did added the core.jar under libs folder. Any ideas? Thanks in advance.\r\n\r\n  [1]: http://www.mysamplecode.com/2012/09/android-generate-qr-code-using-zxing.html#comment-form_3020102673987308109","title":"Android Using ZXing Generate QR Code","body":"<p>I was having some problem when trying to generate QR code in Android Programming. Here is the <a href=\"http://www.mysamplecode.com/2012/09/android-generate-qr-code-using-zxing.html#comment-form_3020102673987308109\">Tutorial</a> I followed. When my generate button on click, I am calling this method:</p>\n\n<pre><code>private void generateQR(){\n    String qrInputText = \"test\";\n\n    //Find screen size\n    WindowManager manager = (WindowManager) getSystemService(WINDOW_SERVICE);\n    Display display = manager.getDefaultDisplay();\n    Point point = new Point();\n    display.getSize(point);\n    int width = point.x;\n    int height = point.y;\n    int smallerDimension = width &lt; height ? width : height;\n    smallerDimension = smallerDimension * 3/4;\n\n    //Encode with a QR Code image\n    QRCodeEncoder qrCodeEncoder = new QRCodeEncoder(\n        qrInputText, \n        null, \n        Contents.Type.TEXT,  \n        BarcodeFormat.QR_CODE.toString(), \n        smallerDimension\n    );\n    try {\n        Bitmap bitmap = qrCodeEncoder.encodeAsBitmap();\n        ImageView myImage = (ImageView) findViewById(R.id.ivImage);\n        myImage.setImageBitmap(bitmap);\n    } catch (WriterException e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n\n<p>And then for the QRCodeEncoder and Contents classes, I followed the one in the tutorial. However, when I click on generate, I am getting the error message as:</p>\n\n<pre><code>01-30 16:37:03.093: I/dalvikvm(1069): Could not find method com.google.zxing.BarcodeFormat.valueOf, referenced from method com.example.qrcodescan.QRCodeEncoder.encodeContents\n01-30 16:37:03.093: W/dalvikvm(1069): VFY: unable to resolve static method 338: Lcom/google/zxing/BarcodeFormat;.valueOf (Ljava/lang/String;)Lcom/google/zxing/BarcodeFormat;\n01-30 16:37:03.093: D/dalvikvm(1069): VFY: replacing opcode 0x71 at 0x0005\n01-30 16:37:03.093: W/dalvikvm(1069): VFY: unable to resolve static field 287 (QR_CODE) in Lcom/google/zxing/BarcodeFormat;\n01-30 16:37:03.093: D/dalvikvm(1069): VFY: replacing opcode 0x62 at 0x0011\n01-30 16:37:03.093: W/dalvikvm(1069): VFY: unable to resolve static field 287 (QR_CODE) in Lcom/google/zxing/BarcodeFormat;\n01-30 16:37:03.093: D/dalvikvm(1069): VFY: replacing opcode 0x62 at 0x0015\n01-30 16:37:03.093: W/dalvikvm(1069): VFY: unable to resolve static field 294 (CHARACTER_SET) in Lcom/google/zxing/EncodeHintType;\n01-30 16:37:03.093: D/dalvikvm(1069): VFY: replacing opcode 0x62 at 0x0018\n01-30 16:37:03.093: E/dalvikvm(1069): Could not find class 'com.google.zxing.MultiFormatWriter', referenced from method com.example.qrcodescan.QRCodeEncoder.encodeAsBitmap\n01-30 16:37:03.093: W/dalvikvm(1069): VFY: unable to resolve new-instance 150 (Lcom/google/zxing/MultiFormatWriter;) in Lcom/example/qrcodescan/QRCodeEncoder;\n01-30 16:37:03.093: D/dalvikvm(1069): VFY: replacing opcode 0x22 at 0x001d\n01-30 16:37:03.093: D/dalvikvm(1069): DexOpt: unable to opt direct call 0x0159 at 0x1f in Lcom/example/qrcodescan/QRCodeEncoder;.encodeAsBitmap\n01-30 16:37:03.093: D/AndroidRuntime(1069): Shutting down VM\n01-30 16:37:03.093: W/dalvikvm(1069): threadid=1: thread exiting with uncaught exception (group=0x40c341f8)\n01-30 16:37:03.101: E/AndroidRuntime(1069): FATAL EXCEPTION: main\n01-30 16:37:03.101: E/AndroidRuntime(1069): java.lang.NoClassDefFoundError: com.google.zxing.BarcodeFormat\n01-30 16:37:03.101: E/AndroidRuntime(1069):     at com.example.qrcodescan.MainActivity.generateQR(MainActivity.java:95)\n01-30 16:37:03.101: E/AndroidRuntime(1069):     at com.example.qrcodescan.MainActivity.access$0(MainActivity.java:77)\n01-30 16:37:03.101: E/AndroidRuntime(1069):     at com.example.qrcodescan.MainActivity$2.onClick(MainActivity.java:54)\n01-30 16:37:03.101: E/AndroidRuntime(1069):     at android.view.View.performClick(View.java:3620)\n01-30 16:37:03.101: E/AndroidRuntime(1069):     at android.view.View$PerformClick.run(View.java:14292)\n01-30 16:37:03.101: E/AndroidRuntime(1069):     at android.os.Handler.handleCallback(Handler.java:605)\n01-30 16:37:03.101: E/AndroidRuntime(1069):     at android.os.Handler.dispatchMessage(Handler.java:92)\n01-30 16:37:03.101: E/AndroidRuntime(1069):     at android.os.Looper.loop(Looper.java:137)\n01-30 16:37:03.101: E/AndroidRuntime(1069):     at android.app.ActivityThread.main(ActivityThread.java:4512)\n01-30 16:37:03.101: E/AndroidRuntime(1069):     at java.lang.reflect.Method.invokeNative(Native Method)\n01-30 16:37:03.101: E/AndroidRuntime(1069):     at java.lang.reflect.Method.invoke(Method.java:511)\n01-30 16:37:03.101: E/AndroidRuntime(1069):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:982)\n01-30 16:37:03.101: E/AndroidRuntime(1069):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:749)\n01-30 16:37:03.101: E/AndroidRuntime(1069):     at dalvik.system.NativeStart.main(Native Method)\n</code></pre>\n\n<p>I did added the core.jar under libs folder. Any ideas? Thanks in advance.</p>\n"},{"tags":["java","spring","firebase","google-cloud-firestore","collections"],"comments":[{"owner":{"account_id":16683494,"reputation":126,"user_id":12058001,"display_name":"Aitsuken"},"score":0,"creation_date":1661075077,"post_id":73433229,"comment_id":129680719,"body_markdown":"What if you make a list of all collections and there they are added or removed/modified on parallel with corresponding actions?","body":"What if you make a list of all collections and there they are added or removed/modified on parallel with corresponding actions?"},{"owner":{"account_id":11416432,"reputation":578,"user_id":8369150,"display_name":"Halil Sahin"},"score":1,"creation_date":1661075193,"post_id":73433229,"comment_id":129680745,"body_markdown":"@Kloody The service I wrote already provides control of this every minute.","body":"@Kloody The service I wrote already provides control of this every minute."},{"owner":{"account_id":16683494,"reputation":126,"user_id":12058001,"display_name":"Aitsuken"},"score":0,"creation_date":1661075285,"post_id":73433229,"comment_id":129680764,"body_markdown":"then whats the issue if you can use that list to iterate through all collections? You can use that list to get ids/names and go through them or whatever you desire","body":"then whats the issue if you can use that list to iterate through all collections? You can use that list to get ids/names and go through them or whatever you desire"},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1661076901,"post_id":73433229,"comment_id":129681088,"body_markdown":"There is no way you can return `currencyList` as a result of a method. Firebase API is asynchronous. So please check the duplicate to see how can you solve this using a callback. You might also be interested in reading this [resource](https://medium.com/firebase-tips-tricks/how-to-read-data-from-cloud-firestore-using-get-bf03b6ee4953).","body":"There is no way you can return <code>currencyList</code> as a result of a method. Firebase API is asynchronous. So please check the duplicate to see how can you solve this using a callback. You might also be interested in reading this <a href=\"https://medium.com/firebase-tips-tricks/how-to-read-data-from-cloud-firestore-using-get-bf03b6ee4953\" rel=\"nofollow noreferrer\">resource</a>."}],"owner":{"account_id":11416432,"reputation":578,"user_id":8369150,"display_name":"Halil Sahin"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1661076871,"answer_count":0,"score":1,"last_activity_date":1661077833,"creation_date":1661074849,"question_id":73433229,"body_markdown":"I have a service that creates collections based on id and saves necessary data to them. I want to return all of these collections without knowing their name or id. I tried several ways but every time I access the top collection and its contents. Is there a way to reach all collections?\r\n\r\nAs you can see in the picture below, I have two collections starting with `ckJCeY...` and one starting with `fzwKx...` but unfortunately I can only access the one starting with `ckJCeY....`\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n**Here is my code:**\r\n\r\n    public List&lt;Currency&gt; getRemindedCurrencies() throws ExecutionException, InterruptedException {\r\n        String key = &quot;deviceKey&quot;;\r\n        Firestore db = FirestoreClient.getFirestore();\r\n    \r\n        Iterable&lt;CollectionReference&gt; collectionReferences = db.listCollections();\r\n        Iterator&lt;CollectionReference&gt; iterator = collectionReferences.iterator();\r\n        List&lt;Currency&gt; currencyList = new ArrayList&lt;&gt;();\r\n        HashMap&lt;String, List&lt;Currency&gt;&gt; deviceKeyCurrencyListMap = new HashMap&lt;&gt;();\r\n    \r\n        if (iterator.hasNext()) {\r\n            CollectionReference next = iterator.next();\r\n            for (Currencies currencies : Currencies.values()) {\r\n                DocumentReference document = next.document(currencies.name().toLowerCase() + &quot;-reminder&quot;);\r\n                ApiFuture&lt;DocumentSnapshot&gt; snapshotApiFuture = document.get();\r\n                DocumentSnapshot documentSnapshot = snapshotApiFuture.get();\r\n                if (documentSnapshot.exists()) {\r\n                    String keyVal = documentSnapshot.getData().get(key).toString();\r\n                    currencyList.add(documentSnapshot.toObject(Currency.class));\r\n                    deviceKeyCurrencyListMap.put(keyVal, currencyList);\r\n                    if (deviceKeyCurrencyListMap.containsKey(key)) {\r\n                        deviceKeyCurrencyListMap.get(keyVal).add(documentSnapshot.toObject(Currency.class));\r\n                    }\r\n                } else {\r\n                    continue;\r\n                }\r\n            }\r\n        }\r\n        return currencyList;\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/wp7UH.png","title":"How to iterate all collections without knowing their names or id","body":"<p>I have a service that creates collections based on id and saves necessary data to them. I want to return all of these collections without knowing their name or id. I tried several ways but every time I access the top collection and its contents. Is there a way to reach all collections?</p>\n<p>As you can see in the picture below, I have two collections starting with <code>ckJCeY...</code> and one starting with <code>fzwKx...</code> but unfortunately I can only access the one starting with <code>ckJCeY....</code></p>\n<p><a href=\"https://i.stack.imgur.com/wp7UH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wp7UH.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Here is my code:</strong></p>\n<pre><code>public List&lt;Currency&gt; getRemindedCurrencies() throws ExecutionException, InterruptedException {\n    String key = &quot;deviceKey&quot;;\n    Firestore db = FirestoreClient.getFirestore();\n\n    Iterable&lt;CollectionReference&gt; collectionReferences = db.listCollections();\n    Iterator&lt;CollectionReference&gt; iterator = collectionReferences.iterator();\n    List&lt;Currency&gt; currencyList = new ArrayList&lt;&gt;();\n    HashMap&lt;String, List&lt;Currency&gt;&gt; deviceKeyCurrencyListMap = new HashMap&lt;&gt;();\n\n    if (iterator.hasNext()) {\n        CollectionReference next = iterator.next();\n        for (Currencies currencies : Currencies.values()) {\n            DocumentReference document = next.document(currencies.name().toLowerCase() + &quot;-reminder&quot;);\n            ApiFuture&lt;DocumentSnapshot&gt; snapshotApiFuture = document.get();\n            DocumentSnapshot documentSnapshot = snapshotApiFuture.get();\n            if (documentSnapshot.exists()) {\n                String keyVal = documentSnapshot.getData().get(key).toString();\n                currencyList.add(documentSnapshot.toObject(Currency.class));\n                deviceKeyCurrencyListMap.put(keyVal, currencyList);\n                if (deviceKeyCurrencyListMap.containsKey(key)) {\n                    deviceKeyCurrencyListMap.get(keyVal).add(documentSnapshot.toObject(Currency.class));\n                }\n            } else {\n                continue;\n            }\n        }\n    }\n    return currencyList;\n}\n</code></pre>\n"},{"tags":["java","faker"],"comments":[{"owner":{"account_id":4610643,"reputation":1454,"user_id":3738870,"display_name":"user3738870"},"score":0,"creation_date":1661076552,"post_id":73433408,"comment_id":129681012,"body_markdown":"Is this library the one you&#39;re using? https://github.com/DiUS/java-faker","body":"Is this library the one you&#39;re using? <a href=\"https://github.com/DiUS/java-faker\" rel=\"nofollow noreferrer\">github.com/DiUS/java-faker</a>"},{"owner":{"account_id":24620122,"reputation":33,"user_id":19813004,"display_name":"Max"},"score":1,"creation_date":1661076810,"post_id":73433408,"comment_id":129681064,"body_markdown":"Exactly this one","body":"Exactly this one"},{"owner":{"account_id":4610643,"reputation":1454,"user_id":3738870,"display_name":"user3738870"},"score":0,"creation_date":1661077018,"post_id":73433408,"comment_id":129681114,"body_markdown":"If a login only consists of an email address and a password, you can use `faker.internet().emailAddress()` and `faker.internet().password()`. If you want a username instead of an email address, you can use `faker.internet().username()`","body":"If a login only consists of an email address and a password, you can use <code>faker.internet().emailAddress()</code> and <code>faker.internet().password()</code>. If you want a username instead of an email address, you can use <code>faker.internet().username()</code>"},{"owner":{"account_id":24620122,"reputation":33,"user_id":19813004,"display_name":"Max"},"score":0,"creation_date":1661077359,"post_id":73433408,"comment_id":129681184,"body_markdown":"I&#39;ve got only `faker.internet().userAgent()` method. No userName","body":"I&#39;ve got only <code>faker.internet().userAgent()</code> method. No userName"},{"owner":{"account_id":4610643,"reputation":1454,"user_id":3738870,"display_name":"user3738870"},"score":0,"creation_date":1661077448,"post_id":73433408,"comment_id":129681208,"body_markdown":"Oh yes, sorry for that, you have to use `faker.name().username()`, not internet.","body":"Oh yes, sorry for that, you have to use <code>faker.name().username()</code>, not internet."},{"owner":{"account_id":4610643,"reputation":1454,"user_id":3738870,"display_name":"user3738870"},"score":0,"creation_date":1661077616,"post_id":73433408,"comment_id":129681230,"body_markdown":"You&#39;re welcome, added it as an answer so future visitors will find it easily.","body":"You&#39;re welcome, added it as an answer so future visitors will find it easily."}],"answers":[{"tags":[],"owner":{"account_id":4610643,"reputation":1454,"user_id":3738870,"display_name":"user3738870"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1661077582,"creation_date":1661077582,"answer_id":73433545,"question_id":73433408,"body_markdown":"If you would like to use an email address along with a password:\r\n```java\r\nfaker.internet().emailAddress()\r\nfaker.internet().password()\r\n```\r\n\r\nIf you would like to use a username along with a password:\r\n```java\r\nfaker.name().username()\r\nfaker.internet().password()\r\n```","title":"How to create a random login with Faker on Java","body":"<p>If you would like to use an email address along with a password:</p>\n<pre class=\"lang-java prettyprint-override\"><code>faker.internet().emailAddress()\nfaker.internet().password()\n</code></pre>\n<p>If you would like to use a username along with a password:</p>\n<pre class=\"lang-java prettyprint-override\"><code>faker.name().username()\nfaker.internet().password()\n</code></pre>\n"}],"owner":{"account_id":24620122,"reputation":33,"user_id":19813004,"display_name":"Max"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1831,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":73433545,"answer_count":1,"score":3,"last_activity_date":1661077582,"creation_date":1661076420,"question_id":73433408,"body_markdown":"I need to create a random user for autotests with Faker. For that I need to obtain a random login and password. How can I done it?\r\n\r\nI suppose that for passwords I can use\r\n\r\n    faker.internet().password()\r\n\r\nAnd I don&#39;t know what to do about login.","title":"How to create a random login with Faker on Java","body":"<p>I need to create a random user for autotests with Faker. For that I need to obtain a random login and password. How can I done it?</p>\n<p>I suppose that for passwords I can use</p>\n<pre><code>faker.internet().password()\n</code></pre>\n<p>And I don't know what to do about login.</p>\n"},{"tags":["java","android","flutter","gradle","build.gradle"],"comments":[{"owner":{"account_id":16953339,"reputation":70,"user_id":12262357,"display_name":"Vishnu E R"},"score":0,"creation_date":1660981603,"post_id":73092205,"comment_id":129665972,"body_markdown":"Hey @Antonio Pe&#241;a Did you found a solution? I am stuck with this issue now.","body":"Hey @Antonio Pe&#241;a Did you found a solution? I am stuck with this issue now."},{"owner":{"account_id":25586263,"reputation":155,"user_id":19363972,"display_name":"Antoniou"},"score":0,"creation_date":1661073981,"post_id":73092205,"comment_id":129680496,"body_markdown":"Yes, although I don&#39;t remember what to do exactly. In the solution to this issue are mentioned some possible answers.","body":"Yes, although I don&#39;t remember what to do exactly. In the solution to this issue are mentioned some possible answers."}],"answers":[{"tags":[],"owner":{"account_id":25586263,"reputation":155,"user_id":19363972,"display_name":"Antoniou"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1661077204,"creation_date":1661077204,"answer_id":73433502,"question_id":73092205,"body_markdown":"I fixed the bug, although don&#39;t remember exactly how. Here are some of the things I did, ordered by level of importance (the most likely answer it at the top).\r\n\r\n\r\n**1. Configure your `packagingOptions`**\r\n----------------------------------\r\n\r\nGo to your `android/app/build.gradle` and add the following snippet of code at the end of your `android {...}`:\r\n\r\n    android {\r\n    \r\n        // Some stuff...\r\n    \r\n        packagingOptions {\r\n            exclude &#39;META-INF/services/javax.annotation.processing.Processor&#39;\r\n        }\r\n    \r\n    }\r\n\r\n\r\n**2. Check `buildTypes`**\r\n---------------------\r\n\r\nOnce again, in your `android/app/build.gradle`, at `android {...}`, you should have a `buildscript {...}` inside. If not, add it. If added, revise it has the same values for the following properties (`packagingOptions` from the first point added):\r\n\r\n    android {\r\n    \r\n        // Some stuff...\r\n    \r\n        buildTypes {\r\n            release {\r\n                minifyEnabled true\r\n                shrinkResources true\r\n                signingConfig signingConfigs.release\r\n            }\r\n        }\r\n    \r\n        packagingOptions {\r\n            exclude &#39;META-INF/services/javax.annotation.processing.Processor&#39;\r\n        }\r\n    \r\n    }\r\n\r\n\r\n**3. Update multidex**\r\n------------------\r\n\r\nInside of your `android/app/build.gradle` as well, update the multidex you have at `dependencies {...}`. It&#39;d also be great to update any other implementation you have there, but the important one is multidex. This is mine:\r\n\r\n    dependencies {\r\n        implementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version&quot;\r\n        implementation &quot;androidx.multidex:multidex:2.0.1&quot;\r\n    }\r\n\r\nIf you don&#39;t have `dependencies {...}` in your file, add it at the end.\r\n\r\n\r\n**4. Another dependencies upgrade**\r\n-------------------------------\r\n\r\nThis time it&#39;s in the other gradle file. The route is `android/build.gradle`, and you just have to enter in the `buildscript {...}` and update what you find in `dependencies {...}`. In my case:\r\n\r\n    buildscript {\r\n\r\n        // Some stuff...\r\n    \r\n        dependencies {\r\n            classpath &quot;com.android.tools.build:gradle:7.1.2&quot;\r\n            classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\r\n        }\r\n    }\r\n\r\n\r\n**5. Increase the value of your `org.gradle.jvmargs`**\r\n--------------------------------------------------\r\n\r\nThis is how much can your builder take of memory to run the bundle&#39;s generation. The higher, the better, although it has to be lower than your computer/laptop&#39;s RAM and doesn&#39;t need to be really big. I have a laptop of 8 GB RAM and it goes without any error with the following configuration:\r\n\r\n    org.gradle.jvmargs=-Xmx4608M\r\n    android.useAndroidX=true\r\n    android.enableJetifier=true\r\n\r\nThat&#39;s a bit more than half of the RAM&#39;s power. `4608M` = 4.608 GB!\r\n\r\nWhy did I choose it? Random. It was of only `1204M` or so before changing it.","title":"A failure occurred while executing com.android.build.gradle.internal.transforms.ShrinkAppBundleResourcesAction","body":"<p>I fixed the bug, although don't remember exactly how. Here are some of the things I did, ordered by level of importance (the most likely answer it at the top).</p>\n<h2><strong>1. Configure your <code>packagingOptions</code></strong></h2>\n<p>Go to your <code>android/app/build.gradle</code> and add the following snippet of code at the end of your <code>android {...}</code>:</p>\n<pre><code>android {\n\n    // Some stuff...\n\n    packagingOptions {\n        exclude 'META-INF/services/javax.annotation.processing.Processor'\n    }\n\n}\n</code></pre>\n<h2><strong>2. Check <code>buildTypes</code></strong></h2>\n<p>Once again, in your <code>android/app/build.gradle</code>, at <code>android {...}</code>, you should have a <code>buildscript {...}</code> inside. If not, add it. If added, revise it has the same values for the following properties (<code>packagingOptions</code> from the first point added):</p>\n<pre><code>android {\n\n    // Some stuff...\n\n    buildTypes {\n        release {\n            minifyEnabled true\n            shrinkResources true\n            signingConfig signingConfigs.release\n        }\n    }\n\n    packagingOptions {\n        exclude 'META-INF/services/javax.annotation.processing.Processor'\n    }\n\n}\n</code></pre>\n<h2><strong>3. Update multidex</strong></h2>\n<p>Inside of your <code>android/app/build.gradle</code> as well, update the multidex you have at <code>dependencies {...}</code>. It'd also be great to update any other implementation you have there, but the important one is multidex. This is mine:</p>\n<pre><code>dependencies {\n    implementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version&quot;\n    implementation &quot;androidx.multidex:multidex:2.0.1&quot;\n}\n</code></pre>\n<p>If you don't have <code>dependencies {...}</code> in your file, add it at the end.</p>\n<h2><strong>4. Another dependencies upgrade</strong></h2>\n<p>This time it's in the other gradle file. The route is <code>android/build.gradle</code>, and you just have to enter in the <code>buildscript {...}</code> and update what you find in <code>dependencies {...}</code>. In my case:</p>\n<pre><code>buildscript {\n\n    // Some stuff...\n\n    dependencies {\n        classpath &quot;com.android.tools.build:gradle:7.1.2&quot;\n        classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\n    }\n}\n</code></pre>\n<h2><strong>5. Increase the value of your <code>org.gradle.jvmargs</code></strong></h2>\n<p>This is how much can your builder take of memory to run the bundle's generation. The higher, the better, although it has to be lower than your computer/laptop's RAM and doesn't need to be really big. I have a laptop of 8 GB RAM and it goes without any error with the following configuration:</p>\n<pre><code>org.gradle.jvmargs=-Xmx4608M\nandroid.useAndroidX=true\nandroid.enableJetifier=true\n</code></pre>\n<p>That's a bit more than half of the RAM's power. <code>4608M</code> = 4.608 GB!</p>\n<p>Why did I choose it? Random. It was of only <code>1204M</code> or so before changing it.</p>\n"}],"owner":{"account_id":25586263,"reputation":155,"user_id":19363972,"display_name":"Antoniou"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":828,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73433502,"answer_count":1,"score":1,"last_activity_date":1661077204,"creation_date":1658592006,"question_id":73092205,"body_markdown":"I am trying to create an appbundle for my Flutter app. It&#39;s been working nice until now, but  for some reason it&#39;s giving an error now. I just went to the project&#39;s folder and ran `flutter clean` and then `flutter build appbundle`. Nonetheless, it gave the following error:\r\n\r\n    Running &quot;flutter pub get&quot; in quotes...                           2.060ms\r\n    \r\n     Building with sound null safety\r\n    \r\n    Note: Some input files use or override a deprecated API.\r\n    Note: Recompile with -Xlint:deprecation for details.\r\n    \r\n    FAILURE: Build failed with an exception.\r\n    \r\n    * What went wrong:\r\n    Execution failed for task &#39;:app:shrinkBundleReleaseResources&#39;.\r\n    &gt; A failure occurred while executing com.android.build.gradle.internal.transforms.ShrinkAppBundleResourcesAction\r\n       &gt; java.nio.file.FileSystemAlreadyExistsException (no error message)\r\n    \r\n    * Try:\r\n    &gt; Run with --stacktrace option to get the stack trace.\r\n    &gt; Run with --info or --debug option to get more log output.\r\n    &gt; Run with --scan to get full insights.\r\n    \r\n    * Get more help at https://help.gradle.org\r\n    \r\n    BUILD FAILED in 1m 43s\r\n    Running Gradle task &#39;bundleRelease&#39;...                            105,0s\r\n    Gradle task bundleRelease failed with exit code 1","title":"A failure occurred while executing com.android.build.gradle.internal.transforms.ShrinkAppBundleResourcesAction","body":"<p>I am trying to create an appbundle for my Flutter app. It's been working nice until now, but  for some reason it's giving an error now. I just went to the project's folder and ran <code>flutter clean</code> and then <code>flutter build appbundle</code>. Nonetheless, it gave the following error:</p>\n<pre><code>Running &quot;flutter pub get&quot; in quotes...                           2.060ms\n\n Building with sound null safety\n\nNote: Some input files use or override a deprecated API.\nNote: Recompile with -Xlint:deprecation for details.\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':app:shrinkBundleReleaseResources'.\n&gt; A failure occurred while executing com.android.build.gradle.internal.transforms.ShrinkAppBundleResourcesAction\n   &gt; java.nio.file.FileSystemAlreadyExistsException (no error message)\n\n* Try:\n&gt; Run with --stacktrace option to get the stack trace.\n&gt; Run with --info or --debug option to get more log output.\n&gt; Run with --scan to get full insights.\n\n* Get more help at https://help.gradle.org\n\nBUILD FAILED in 1m 43s\nRunning Gradle task 'bundleRelease'...                            105,0s\nGradle task bundleRelease failed with exit code 1\n</code></pre>\n"},{"tags":["java","asynchronous","java-8","future","completable-future"],"answers":[{"tags":[],"owner":{"account_id":9011049,"reputation":2363,"user_id":6715629,"accept_rate":100,"display_name":"Simon"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1660820148,"creation_date":1660820148,"answer_id":73401832,"question_id":73401286,"body_markdown":"You need to have a specific task that will collect the result of the others and complete only when desired.\r\n\r\nFor instance:\r\n```\r\npublic class Testing {\r\n\tpublic static void main(String args[]) throws InterruptedException, ExecutionException {\r\n\t\t\r\n\t\tString result = aggregator(\r\n\t\t\t\tArrays.asList(\r\n\t\t\t\t\t\ttest(&quot;future1&quot;, 10000),\r\n\t\t\t\t\t\ttest(&quot;future2&quot;, 0),\r\n\t\t\t\t\t\ttest(&quot;future3&quot;, 0)),\r\n\t\t\t\t(value) -&gt; { return value != null; },\r\n\t\t\t\t&quot;default value&quot;\r\n\t\t\t\t).get();\r\n\t\t\r\n\t\tSystem.out.println(result);\r\n    }\r\n\t\r\n\tprivate static CompletableFuture&lt;String&gt; aggregator(Collection&lt;CompletableFuture&lt;String&gt;&gt; tasks, Predicate&lt;String&gt; validator, String defaultValue)\r\n\t{\r\n\t\tCompletableFuture&lt;String&gt; a = new CompletableFuture&lt;String&gt;();\r\n\t\tAtomicInteger count = new AtomicInteger(0);\r\n\t\t\r\n\t\ttasks.forEach((t) -&gt; {\r\n\t\t\tt.whenComplete((value, error) -&gt; { \r\n\t\t\t\tint c = count.incrementAndGet();\r\n\t\t\t\tif( error == null &amp;&amp; validator.test(value) ) a.complete(value);\r\n\t\t\t\telse if( c == tasks.size() ) a.complete(defaultValue);\r\n\t\t\t}); \r\n\t\t}); \r\n\t\t\r\n\t\treturn a;\r\n\t}\r\n\r\n    private static CompletableFuture&lt;String&gt; test(String str, int i) {\r\n        return CompletableFuture.supplyAsync(() -&gt; {\r\n            try {\r\n                Thread.sleep(i);\r\n            } catch (InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n            return str;\r\n        });\r\n    }\r\n}\r\n```\r\n\r\nThe `aggregator` method will accept any number of other tasks and will compare the result of each using the `validator` provided. The first one that matches is returned immediately without waiting for the others.\r\n\r\nAnd at the end, if none matched, it completes with the default value.","title":"Return the future that gets executed first with a specific condition on the response","body":"<p>You need to have a specific task that will collect the result of the others and complete only when desired.</p>\n<p>For instance:</p>\n<pre><code>public class Testing {\n    public static void main(String args[]) throws InterruptedException, ExecutionException {\n        \n        String result = aggregator(\n                Arrays.asList(\n                        test(&quot;future1&quot;, 10000),\n                        test(&quot;future2&quot;, 0),\n                        test(&quot;future3&quot;, 0)),\n                (value) -&gt; { return value != null; },\n                &quot;default value&quot;\n                ).get();\n        \n        System.out.println(result);\n    }\n    \n    private static CompletableFuture&lt;String&gt; aggregator(Collection&lt;CompletableFuture&lt;String&gt;&gt; tasks, Predicate&lt;String&gt; validator, String defaultValue)\n    {\n        CompletableFuture&lt;String&gt; a = new CompletableFuture&lt;String&gt;();\n        AtomicInteger count = new AtomicInteger(0);\n        \n        tasks.forEach((t) -&gt; {\n            t.whenComplete((value, error) -&gt; { \n                int c = count.incrementAndGet();\n                if( error == null &amp;&amp; validator.test(value) ) a.complete(value);\n                else if( c == tasks.size() ) a.complete(defaultValue);\n            }); \n        }); \n        \n        return a;\n    }\n\n    private static CompletableFuture&lt;String&gt; test(String str, int i) {\n        return CompletableFuture.supplyAsync(() -&gt; {\n            try {\n                Thread.sleep(i);\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n            return str;\n        });\n    }\n}\n</code></pre>\n<p>The <code>aggregator</code> method will accept any number of other tasks and will compare the result of each using the <code>validator</code> provided. The first one that matches is returned immediately without waiting for the others.</p>\n<p>And at the end, if none matched, it completes with the default value.</p>\n"},{"tags":[],"owner":{"account_id":173621,"reputation":10596,"user_id":402428,"display_name":"michid"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1661076269,"creation_date":1661076269,"answer_id":73433394,"question_id":73401286,"body_markdown":"You can race the futures against each other and delegate completions to another one:\r\n\r\n    static &lt;T&gt; CompletableFuture&lt;T&gt; first(Stream&lt;CompletableFuture&lt;T&gt;&gt; futures) {\r\n        var delegate = new CompletableFuture&lt;T&gt;();\r\n\r\n        runAsync(() -&gt;\r\n             futures.forEach(future -&gt;\r\n                 future.handle(\r\n                     (value, error) -&gt; {\r\n                         if (value == null) {\r\n                             return delegate.completeExceptionally(error);\r\n                         } else {\r\n                             return delegate.complete(value);\r\n                         }\r\n                     })));\r\n\r\n        return delegate;\r\n    }\r\n\r\nThe future returned by `first` completes (either successfully or with an error), whenever the first one passed in the `futures` argument completes. \r\n\r\nNow \r\n\r\n    CompletableFuture&lt;String&gt;  combinedFuture =\r\n        first(Stream.of(test(&quot;future1&quot;, 10000), test2(), test3()));\r\n\r\n    System.out.println(combinedFuture.get());\r\n\r\nprints either &quot;future2&quot; or &quot;future3&quot; depending on which on happens to complete first. ","title":"Return the future that gets executed first with a specific condition on the response","body":"<p>You can race the futures against each other and delegate completions to another one:</p>\n<pre><code>static &lt;T&gt; CompletableFuture&lt;T&gt; first(Stream&lt;CompletableFuture&lt;T&gt;&gt; futures) {\n    var delegate = new CompletableFuture&lt;T&gt;();\n\n    runAsync(() -&gt;\n         futures.forEach(future -&gt;\n             future.handle(\n                 (value, error) -&gt; {\n                     if (value == null) {\n                         return delegate.completeExceptionally(error);\n                     } else {\n                         return delegate.complete(value);\n                     }\n                 })));\n\n    return delegate;\n}\n</code></pre>\n<p>The future returned by <code>first</code> completes (either successfully or with an error), whenever the first one passed in the <code>futures</code> argument completes.</p>\n<p>Now</p>\n<pre><code>CompletableFuture&lt;String&gt;  combinedFuture =\n    first(Stream.of(test(&quot;future1&quot;, 10000), test2(), test3()));\n\nSystem.out.println(combinedFuture.get());\n</code></pre>\n<p>prints either &quot;future2&quot; or &quot;future3&quot; depending on which on happens to complete first.</p>\n"}],"owner":{"account_id":12396841,"reputation":81,"user_id":9036196,"display_name":"RTN9"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":513,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1661076269,"creation_date":1660817759,"question_id":73401286,"body_markdown":"I am trying to make 3 rest calls using completablefutures and return for the first one that matches a specific response. Below is sample test code I wrote (Minus the rest calls) for it but that does not seem to work. I always see &quot;future1&quot; getting returned even with the wait time, which means, test2 and test3 are blocking. How do I achieve the ask?\r\n\r\nI thought of using CompletableFuture.anyOf but that just returns the result for the first future that gets executed. Not the first one that matches a specified response. Please advise\r\n\r\n    import java.util.concurrent.CompletableFuture;\r\n    import java.util.concurrent.ExecutionException;\r\n    \r\n    public class Testing {\r\n        public static void main(String args[]) throws InterruptedException, ExecutionException {\r\n            CompletableFuture&lt;String&gt; combinedFuture = test(&quot;future1&quot;, 10000)\r\n                    .thenCompose(response1 -&gt; test2()\r\n                            .thenCompose(response2 -&gt; test3()\r\n                                    .thenApply(response3 -&gt; {\r\n                                        return combine(response1, response2, response3);\r\n                                    })));\r\n            System.out.println(combinedFuture.get());\r\n        }\r\n    \r\n        private static CompletableFuture&lt;String&gt; test(String str, int i) {\r\n            return CompletableFuture.supplyAsync(() -&gt; {\r\n                try {\r\n                    Thread.sleep(i);\r\n                } catch (InterruptedException e) {\r\n                    e.printStackTrace();\r\n                }\r\n                return str;\r\n            });\r\n        }\r\n    \r\n        private static CompletableFuture&lt;String&gt; test2() {\r\n            return test(&quot;future2&quot;, 0);\r\n        }\r\n    \r\n        private static CompletableFuture&lt;String&gt; test3() {\r\n            return test(&quot;future3&quot;, 0);\r\n        }\r\n    \r\n        private static String combine(String response1, String response2, String response3) {\r\n            String responseString = null;\r\n            if (response1 != null) {\r\n                return response1;\r\n            } else if (response2 != null) {\r\n                return response2;\r\n            } else if (response3 != null) {\r\n                return response3;\r\n            }\r\n            return responseString;\r\n        }\r\n    \r\n    }\r\n\r\n","title":"Return the future that gets executed first with a specific condition on the response","body":"<p>I am trying to make 3 rest calls using completablefutures and return for the first one that matches a specific response. Below is sample test code I wrote (Minus the rest calls) for it but that does not seem to work. I always see &quot;future1&quot; getting returned even with the wait time, which means, test2 and test3 are blocking. How do I achieve the ask?</p>\n<p>I thought of using CompletableFuture.anyOf but that just returns the result for the first future that gets executed. Not the first one that matches a specified response. Please advise</p>\n<pre><code>import java.util.concurrent.CompletableFuture;\nimport java.util.concurrent.ExecutionException;\n\npublic class Testing {\n    public static void main(String args[]) throws InterruptedException, ExecutionException {\n        CompletableFuture&lt;String&gt; combinedFuture = test(&quot;future1&quot;, 10000)\n                .thenCompose(response1 -&gt; test2()\n                        .thenCompose(response2 -&gt; test3()\n                                .thenApply(response3 -&gt; {\n                                    return combine(response1, response2, response3);\n                                })));\n        System.out.println(combinedFuture.get());\n    }\n\n    private static CompletableFuture&lt;String&gt; test(String str, int i) {\n        return CompletableFuture.supplyAsync(() -&gt; {\n            try {\n                Thread.sleep(i);\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n            return str;\n        });\n    }\n\n    private static CompletableFuture&lt;String&gt; test2() {\n        return test(&quot;future2&quot;, 0);\n    }\n\n    private static CompletableFuture&lt;String&gt; test3() {\n        return test(&quot;future3&quot;, 0);\n    }\n\n    private static String combine(String response1, String response2, String response3) {\n        String responseString = null;\n        if (response1 != null) {\n            return response1;\n        } else if (response2 != null) {\n            return response2;\n        } else if (response3 != null) {\n            return response3;\n        }\n        return responseString;\n    }\n\n}\n</code></pre>\n"},{"tags":["java","hashmap"],"comments":[{"owner":{"account_id":10150295,"reputation":1257,"user_id":7497127,"accept_rate":67,"display_name":"JAMSHAID"},"score":0,"creation_date":1661074391,"post_id":73433144,"comment_id":129680565,"body_markdown":"yeah. that is possible","body":"yeah. that is possible"},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1661074975,"post_id":73433144,"comment_id":129680692,"body_markdown":"Can you provide the &quot;whole picture&quot;? Where do these variables `baseSpeed`, `gear` and `gearRatio` come from?","body":"Can you provide the &quot;whole picture&quot;? Where do these variables <code>baseSpeed</code>, <code>gear</code> and <code>gearRatio</code> come from?"},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1661075044,"post_id":73433144,"comment_id":129680712,"body_markdown":"Sidenote: in Java, type `String` starts from a capital letter.","body":"Sidenote: in Java, type <code>String</code> starts from a capital letter."},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":1,"creation_date":1661076013,"post_id":73433144,"comment_id":129680906,"body_markdown":"*&quot;hashmap that stores the speed of every wheel at a given time&quot;* - So what should be the Key of the Map?","body":"<i>&quot;hashmap that stores the speed of every wheel at a given time&quot;</i> - So what should be the Key of the Map?"},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1661076027,"post_id":73433144,"comment_id":129680908,"body_markdown":"This declaration would not compile, and it doesn&#39;t explain how map value is intended to be provided `private int Integer= baseSpeed +gear*gearRatio;`","body":"This declaration would not compile, and it doesn&#39;t explain how map value is intended to be provided <code>private int Integer= baseSpeed +gear*gearRatio;</code>"}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1661075772,"creation_date":1661075772,"answer_id":73433340,"question_id":73433144,"body_markdown":"It I understand what you are saying correctly ... the answer is that it is not possible unless you build a lot of extra infrastructure.\r\n\r\nFirst, the value in a `HashMap` are just that: values.  Java values don&#39;t change spontaneously.\r\n\r\nIf you want something to change in response to (say) something else changing, you need to implement it on top of an event notification mechanism of some kind.  So suppose we had \r\n\r\n    speed = baseSpeed + gear * gearRatio;\r\n\r\nwhat we would need is an event that means &quot;object value has changed&quot;.  Then the object that represents the `speed` variable would need to register an event listener for the &quot;changed&quot; event on the objects that represent the `baseSpeed`, `gear` and `gearRatio`.  When the `speed` object gets one of these events, it would need to recalculate its value, and then notify any other objects that are listening for &quot;changed&quot; events on it.\r\n\r\nIt is complicated, but do-able. And you will need to do most of the work for yourself, or find a 3rd-party framework that does this.  The Java Swing event notification framework does this kind of thing.  I wouldn&#39;t advocate using it for events that are not Swing related, but you can use it as an example of how to do this kind of thing.  Java Bean notifications are another example.\r\n\r\n-------------------------\r\n\r\nHowever, I suspect that this is an XY problem, and that there is likely be a better (simpler) way to solve it.\r\n","title":"Can i create a hashmap in java with variable values?","body":"<p>It I understand what you are saying correctly ... the answer is that it is not possible unless you build a lot of extra infrastructure.</p>\n<p>First, the value in a <code>HashMap</code> are just that: values.  Java values don't change spontaneously.</p>\n<p>If you want something to change in response to (say) something else changing, you need to implement it on top of an event notification mechanism of some kind.  So suppose we had</p>\n<pre><code>speed = baseSpeed + gear * gearRatio;\n</code></pre>\n<p>what we would need is an event that means &quot;object value has changed&quot;.  Then the object that represents the <code>speed</code> variable would need to register an event listener for the &quot;changed&quot; event on the objects that represent the <code>baseSpeed</code>, <code>gear</code> and <code>gearRatio</code>.  When the <code>speed</code> object gets one of these events, it would need to recalculate its value, and then notify any other objects that are listening for &quot;changed&quot; events on it.</p>\n<p>It is complicated, but do-able. And you will need to do most of the work for yourself, or find a 3rd-party framework that does this.  The Java Swing event notification framework does this kind of thing.  I wouldn't advocate using it for events that are not Swing related, but you can use it as an example of how to do this kind of thing.  Java Bean notifications are another example.</p>\n<hr />\n<p>However, I suspect that this is an XY problem, and that there is likely be a better (simpler) way to solve it.</p>\n"}],"owner":{"account_id":19726119,"reputation":77,"user_id":14442680,"display_name":"AlexandrosS"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":176,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":73433340,"answer_count":1,"score":0,"last_activity_date":1661075772,"creation_date":1661074214,"question_id":73433144,"body_markdown":"I want to create an object in java that includes a hashmap.Let&#39;s say that my object is a car and i want to create a hashmap that stores the speed of every wheel at a given time.\r\nWhat i mean is this :\r\n    \r\n    private int baseSpeed=60;\r\n    private int gearRatio=5;\r\n    private int  gear; \r\n    private int Integer= baseSpeed +gear*gearRatio;\r\n    private HashMap&lt;String, Integer&gt; carSpeed = new HashMap&lt;&gt;();\r\n     \r\n\r\nLet&#39;s say that string is frontLeft,frontRight etc  and integer is the speed of that wheel,that changes over time.Can i do something like this, or do i have to redeclare each entry whenever Integer gear changer ?\r\n   ","title":"Can i create a hashmap in java with variable values?","body":"<p>I want to create an object in java that includes a hashmap.Let's say that my object is a car and i want to create a hashmap that stores the speed of every wheel at a given time.\nWhat i mean is this :</p>\n<pre><code>private int baseSpeed=60;\nprivate int gearRatio=5;\nprivate int  gear; \nprivate int Integer= baseSpeed +gear*gearRatio;\nprivate HashMap&lt;String, Integer&gt; carSpeed = new HashMap&lt;&gt;();\n \n</code></pre>\n<p>Let's say that string is frontLeft,frontRight etc  and integer is the speed of that wheel,that changes over time.Can i do something like this, or do i have to redeclare each entry whenever Integer gear changer ?</p>\n"},{"tags":["java","arrays","performance","jvm"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":1,"creation_date":1472709367,"post_id":39263591,"comment_id":65862614,"body_markdown":"`difference in performance` - try it and see.","body":"<code>difference in performance</code> - try it and see."}],"answers":[{"tags":[],"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1472711025,"creation_date":1472711025,"answer_id":39264050,"question_id":39263591,"body_markdown":"&gt; In Thinking in Java book 4th edition I read, that leaving the comma after the last object in list makes automatic generating such lists easier, but it is optional.\r\n\r\nCorrect.\r\n\r\n&gt; On the other hand here, in Java SE Specifications I can read, that trailing comma is ignored.\r\n\r\nCorrect, but there&#39;s no &#39;on the other hand&#39; about it. It&#39;s ignored. By the compiler. There is no conflict between the above two statements.\r\n\r\n&gt; On StackOverflow questions I read that it makes code easier to maintain.\r\n\r\nCorrect again.\r\n\r\n &gt; But I would like to ask you if it makes any difference for the JVM work?\r\n\r\nNo, because it&#39;s ignored by the compiler, so the JVM doesn&#39;t even get to see it.\r\n\r\n&gt; I deduce that it&#39;s only a good practice, am I right?\r\n\r\nIt&#39;s an optional practice that is useful in certain situations.\r\n\r\n&gt; If there is no difference in performance, should I use it as default?\r\n\r\nNo, why?\r\n \r\n&gt; Which version is used in practice more frequently?\r\n\r\nThat isn&#39;t answerable without a complete survey of all the Java code in existence, or enough of it to constitute a statistically significant sample. And in any case you should do what is best for you, not what everybody does statistically speaking.\r\n\r\n","title":"Is there a difference in performance whether I put the trailing comma in array or not?","body":"<blockquote>\n  <p>In Thinking in Java book 4th edition I read, that leaving the comma after the last object in list makes automatic generating such lists easier, but it is optional.</p>\n</blockquote>\n\n<p>Correct.</p>\n\n<blockquote>\n  <p>On the other hand here, in Java SE Specifications I can read, that trailing comma is ignored.</p>\n</blockquote>\n\n<p>Correct, but there's no 'on the other hand' about it. It's ignored. By the compiler. There is no conflict between the above two statements.</p>\n\n<blockquote>\n  <p>On StackOverflow questions I read that it makes code easier to maintain.</p>\n</blockquote>\n\n<p>Correct again.</p>\n\n<blockquote>\n  <p>But I would like to ask you if it makes any difference for the JVM work?</p>\n</blockquote>\n\n<p>No, because it's ignored by the compiler, so the JVM doesn't even get to see it.</p>\n\n<blockquote>\n  <p>I deduce that it's only a good practice, am I right?</p>\n</blockquote>\n\n<p>It's an optional practice that is useful in certain situations.</p>\n\n<blockquote>\n  <p>If there is no difference in performance, should I use it as default?</p>\n</blockquote>\n\n<p>No, why?</p>\n\n<blockquote>\n  <p>Which version is used in practice more frequently?</p>\n</blockquote>\n\n<p>That isn't answerable without a complete survey of all the Java code in existence, or enough of it to constitute a statistically significant sample. And in any case you should do what is best for you, not what everybody does statistically speaking.</p>\n"}],"owner":{"account_id":6139432,"reputation":7718,"user_id":4787269,"accept_rate":92,"display_name":"Michał Szewczyk"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":186,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":39264050,"answer_count":1,"score":-1,"last_activity_date":1661075464,"creation_date":1472709025,"question_id":39263591,"body_markdown":"In the &quot;Thinking in Java&quot; book 4th edition I read that leaving the comma after the last object in list **makes automatic generating such lists easier, but it is optional**. On the other hand &lt;a href=&quot;https://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html&quot;&gt;here&lt;/a&gt;, in the Java SE Specifications I can read, that the **trailing comma is ignored**. On StackOverflow questions I read that it makes code **easier to maintain**. \r\n\r\nDoes it make any difference on the JVM work? I deduce that it&#39;s only a good practice, am I right? If there is no difference in performance, should I use it as default? Which version is used in practice more frequently?\r\n\r\nHere is a sample code to show the problem:\r\n\r\n    Integer[] arrFst = new Integer[]{new Integer(1), new Integer(2), };\r\n    Integer[] arrSnd = new Integer[]{new Integer(1), new Integer(2) };","title":"Is there a difference in performance whether I put the trailing comma in array or not?","body":"<p>In the &quot;Thinking in Java&quot; book 4th edition I read that leaving the comma after the last object in list <strong>makes automatic generating such lists easier, but it is optional</strong>. On the other hand <a href=\"https://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html\" rel=\"nofollow noreferrer\">here</a>, in the Java SE Specifications I can read, that the <strong>trailing comma is ignored</strong>. On StackOverflow questions I read that it makes code <strong>easier to maintain</strong>.</p>\n<p>Does it make any difference on the JVM work? I deduce that it's only a good practice, am I right? If there is no difference in performance, should I use it as default? Which version is used in practice more frequently?</p>\n<p>Here is a sample code to show the problem:</p>\n<pre><code>Integer[] arrFst = new Integer[]{new Integer(1), new Integer(2), };\nInteger[] arrSnd = new Integer[]{new Integer(1), new Integer(2) };\n</code></pre>\n"},{"tags":["java","spring-boot","maven","unit-testing","junit"],"comments":[{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1661076354,"post_id":73433291,"comment_id":129680961,"body_markdown":"`@AllArgsConstructor` in combination with unit tests means you&#39;re asking JUnit to inject all fields in the constructor, not Spring. Why don&#39;t you a) remove the annotation, b) remove the `final` from both fields, and c) add `@Autowired` to the `customerRepository` field? Your test class then only has a default no-args constructor, which allows JUnit to create instances of it. The autowiring will be done by Spring.","body":"<code>@AllArgsConstructor</code> in combination with unit tests means you&#39;re asking JUnit to inject all fields in the constructor, not Spring. Why don&#39;t you a) remove the annotation, b) remove the <code>final</code> from both fields, and c) add <code>@Autowired</code> to the <code>customerRepository</code> field? Your test class then only has a default no-args constructor, which allows JUnit to create instances of it. The autowiring will be done by Spring."},{"owner":{"account_id":19786225,"reputation":21,"user_id":16340059,"display_name":"Anurag"},"score":0,"creation_date":1661077725,"post_id":73433291,"comment_id":129681260,"body_markdown":"@RobSpoor Thank You so much. Both tests worked. Why did i have to remove final? and why was JUnit trying to inject all fields instead of Spring? Does Junit only work with no args constructor by default? you&#39;re telling me the control transfers from Spring to Junit and then to Spring. Sorry about this but can you tell me where can I get this knowledge from?","body":"@RobSpoor Thank You so much. Both tests worked. Why did i have to remove final? and why was JUnit trying to inject all fields instead of Spring? Does Junit only work with no args constructor by default? you&#39;re telling me the control transfers from Spring to Junit and then to Spring. Sorry about this but can you tell me where can I get this knowledge from?"},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1661098494,"post_id":73433291,"comment_id":129685633,"body_markdown":"If you don&#39;t remove final, then the compiler will complain that the fields will not have been set. That&#39;s what you needed the `@AllArgsConstructor` for. But JUnit doesn&#39;t work that way. When it encounters a method or constructor argument that it can&#39;t handle by default (like `TestInfo`), it checks the available extensions (like `SpringExtension`) if one of them can provide it. If none can, then JUnit will fail, as you have seen.","body":"If you don&#39;t remove final, then the compiler will complain that the fields will not have been set. That&#39;s what you needed the <code>@AllArgsConstructor</code> for. But JUnit doesn&#39;t work that way. When it encounters a method or constructor argument that it can&#39;t handle by default (like <code>TestInfo</code>), it checks the available extensions (like <code>SpringExtension</code>) if one of them can provide it. If none can, then JUnit will fail, as you have seen."},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1661098574,"post_id":73433291,"comment_id":129685646,"body_markdown":"You can also try to re-add what you removed, but then also add an `@Autowired` to the `customerRepository` field. Perhaps that will make the `SpringExtension`, which is enabled because of the `DataJpaTest`, provide a value for JUnit. Without the annotation the field has no special meaning for JUnit and no special meaning for Spring, which means neither will try to provide a value for it.","body":"You can also try to re-add what you removed, but then also add an <code>@Autowired</code> to the <code>customerRepository</code> field. Perhaps that will make the <code>SpringExtension</code>, which is enabled because of the <code>DataJpaTest</code>, provide a value for JUnit. Without the annotation the field has no special meaning for JUnit and no special meaning for Spring, which means neither will try to provide a value for it."}],"owner":{"account_id":19786225,"reputation":21,"user_id":16340059,"display_name":"Anurag"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":266,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1661075438,"creation_date":1661075438,"question_id":73433291,"body_markdown":"**Error for test 1 - org.junit.jupiter.api.extension.ParameterResolutionException: No ParameterResolver registered for parameter [final com.orrs.authmicro.customer.CustomerService customerService] in constructor [public com.orrs.authmicro.AuthMicroApplicationTests(com.orrs.authmicro.customer.CustomerService,com.orrs.authmicro.customer.CustomerRepository)].**\r\n\r\n\r\n**Error for Test 2 -org.junit.jupiter.api.extension.ParameterResolutionException: No ParameterResolver registered for parameter [final com.orrs.authmicro.customer.CustomerService customerService] in constructor [public com.orrs.authmicro.AuthMicroApplicationTests(com.orrs.authmicro.customer.CustomerService,com.orrs.authmicro.customer.CustomerRepository)].**\r\n\r\nI have looked at most of the solutions available and they advice to remove @Test or @ParameterizedTest . My tests are not found if I remove @Test and I cant remove @ParameterizedTest because I&#39;m not using it. I have spent hours already and can&#39;t seem to overcome this. Before this there were **Bean Creation Errors--- UnsatisfiedDependencyException: Error creating bean with name customerService** \r\n\r\n**Testfile**  \r\n\r\n```\r\npackage com.orrs.authmicro;\r\n\r\nimport com.orrs.authmicro.customer.*;\r\nimport lombok.AllArgsConstructor;\r\nimport org.junit.jupiter.api.Test;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;\r\nimport org.springframework.boot.test.context.SpringBootTest;\r\n\r\nimport static org.assertj.core.api.AssertionsForClassTypes.assertThat;\r\n\r\n@AllArgsConstructor\r\n@DataJpaTest\r\nclass AuthMicroApplicationTests {\r\n\r\n\t@Autowired\r\n\tprivate final CustomerService customerService;\r\n\r\n\tprivate final CustomerRepository customerRepository;\r\n\r\n\r\n\t@Test\r\n\tpublic void testJpaSave(){\r\n\t\tCustomer customer = customerRepository.save(new Customer(\r\n\t\t\t\t&quot;TestFname&quot;,\r\n\t\t\t\t&quot;TestLname&quot;,\r\n\t\t\t\t&quot;TestAddress&quot;,\r\n\t\t\t\t&quot;99999999999&quot;,\r\n\t\t\t\tGender.MALE,\r\n\t\t\t\t&quot;TestPassword&quot;,\r\n\t\t\t\t&quot;testEmail@gmail.com&quot;,\r\n\t\t\t\tCustomerRole.USER\r\n\t\t));\r\n\r\n\r\n\t\tassertThat(customer.getId()).isGreaterThan(0);\r\n\t}\r\n\r\n\r\n\r\n\t@Test\r\n\tpublic void testRegistration(){\r\n\r\n\r\n\r\n\t\tString response = customerService.signUpCustomer(\r\n\t\t\t\tnew Customer(\r\n\t\t\t\t\t\t&quot;TestFname&quot;,\r\n\t\t\t\t\t\t&quot;TestLname&quot;,\r\n\t\t\t\t\t\t&quot;TestAddress&quot;,\r\n\t\t\t\t\t\t&quot;99999999999&quot;,\r\n\t\t\t\t\t\tGender.MALE,\r\n\t\t\t\t\t\t&quot;TestPassword&quot;,\r\n\t\t\t\t\t\t&quot;testEmail@gmail.com&quot;,\r\n\t\t\t\t\t\tCustomerRole.USER\r\n\t\t\t\t)\r\n\t\t);\r\n\r\n\t\tassertThat(response.equals(&quot;Signed up perfectly)&quot;));\r\n\t}\r\n\r\n}\r\n```\r\n\r\n**CustomerRespository**\r\n\r\n```  \r\npackage com.orrs.authmicro.customer;\r\n\r\n\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\nimport org.springframework.stereotype.Repository;\r\nimport org.springframework.transaction.annotation.Transactional;\r\n\r\nimport java.util.Optional;\r\n\r\n@Transactional(readOnly = true)\r\n@Repository\r\npublic interface CustomerRepository extends JpaRepository&lt;Customer, Long&gt; {\r\n    Optional&lt;Customer&gt; findByEmail(String email);\r\n\r\n\r\n}\r\n\r\n```\r\n\r\n**CustomerService**\r\n\r\n```\r\npackage com.orrs.authmicro.customer;\r\n\r\nimport lombok.AllArgsConstructor;\r\nimport org.springframework.security.core.context.SecurityContextHolder;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\nimport org.springframework.security.core.userdetails.UserDetailsService;\r\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\r\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport java.security.Principal;\r\nimport java.util.Optional;\r\n\r\n@Service\r\n@AllArgsConstructor\r\npublic class CustomerService implements UserDetailsService {\r\n\r\n\r\n\r\n    private final BCryptPasswordEncoder bCryptPasswordEncoder;\r\n\r\n    private final String  USER_NOT_FOUND = &quot;Customer with email %s not found&quot;;\r\n    private final CustomerRepository customerRepository;\r\n\r\n\r\n    @Override\r\n    public UserDetails loadUserByUsername(String email) throws UsernameNotFoundException {\r\n\r\n        return customerRepository.findByEmail(email)\r\n                .orElseThrow(()-&gt; new UsernameNotFoundException(String.format(USER_NOT_FOUND,email)));\r\n    }\r\n    public String signUpCustomer(Customer customer){\r\n        boolean customerExists = customerRepository.findByEmail(customer.getEmail())\r\n                .isPresent();\r\n        if(customerExists){\r\n            throw new IllegalStateException(&quot;User with Email already exist!&quot;);\r\n        }\r\n\r\n        if(customer.getPassword() == &quot;&quot;){\r\n            throw new IllegalStateException(&quot;Password cannot be empty&quot;);\r\n        }\r\n\r\n        if(customer.getFname() == &quot;&quot; || customer.getFname().isEmpty()){\r\n            throw new IllegalStateException(&quot;Name cannot be empty&quot;);\r\n        }\r\n\r\n        if(customer.getGender().equals(&quot;&quot;)){\r\n            throw new IllegalStateException(&quot;Gender cannot be empty&quot;);\r\n        }\r\n\r\n        if(customer.getAddress().equals(&quot;&quot;)){\r\n            throw new IllegalStateException(&quot;Address cannot be empty&quot;);\r\n        }\r\n\r\n        String encodedPassword = bCryptPasswordEncoder.encode(customer.getPassword());\r\n        customer.setPassword(encodedPassword);\r\n        customerRepository.save(customer);\r\n\r\n        return &quot;Signed up perfectly&quot;;\r\n    }\r\n\r\n    public String currentUsername(Principal principal){\r\n        return principal.getName();\r\n    }\r\n\r\n\r\n\r\n\r\n    public Customer updateCustomer(Customer customer){\r\n\r\n        //Object principal =  SecurityContextHolder.getContext().getAuthentication().getPrincipal();\r\n\r\n        //String userName = currentUsername((Principal) principal);\r\n\r\n        boolean customerExists = customerRepository.findByEmail(customer.getEmail()).isPresent();\r\n        if(customerExists){\r\n\r\n            Optional&lt;Customer&gt; wrapperCustomer = customerRepository.findByEmail(customer.getEmail());\r\n            Customer  existingCustomer = wrapperCustomer.get();\r\n            existingCustomer.setAddress(customer.getAddress());\r\n            existingCustomer.setFname(customer.getFname());\r\n            existingCustomer.setLname(customer.getLname());\r\n            existingCustomer.setPhoneNumber(customer.getPhoneNumber());\r\n            existingCustomer.setGender(customer.getGender());\r\n            customerRepository.save(existingCustomer);\r\n            return existingCustomer;\r\n        }else{\r\n            throw new IllegalStateException(&quot;User doesn&#39;t exist&quot;);\r\n        }\r\n\r\n\r\n    }\r\n    public String deleteCustomerById(String email){\r\n        boolean customerExists = customerRepository.findByEmail(email).isPresent();\r\n        if(customerExists){\r\n\r\n            Optional&lt;Customer&gt; wrapperCustomer = customerRepository.findByEmail(email);\r\n            Customer  existingCustomer = wrapperCustomer.get();\r\n            customerRepository.deleteById(existingCustomer.getId());\r\n\r\n            return &quot;Customer Deleted Successfully!&quot;;\r\n\r\n        }else{\r\n            throw new IllegalStateException(&quot;User Not Found&quot;);\r\n        }\r\n    }\r\n}\r\n\r\n\r\n```\r\n\r\n**pom.xml**\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.7.2&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.orrs&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;auth-micro&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;auth-micro&lt;/name&gt;\r\n\t&lt;description&gt;Authorisation microservice&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t\t&lt;spring-cloud.version&gt;2021.0.3&lt;/spring-cloud.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.9.0&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.9.0&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t&lt;/dependencies&gt;\r\n\t&lt;dependencyManagement&gt;\r\n\t\t&lt;dependencies&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;${spring-cloud.version}&lt;/version&gt;\r\n\t\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n\t\t\t\t&lt;scope&gt;import&lt;/scope&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t&lt;/dependencies&gt;\r\n\t&lt;/dependencyManagement&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"CRUD Testing with Jupiter in spring boots giving error:jupiter.api.extension.ParameterResolutionException: No ParameterResolver registered","body":"<p><strong>Error for test 1 - org.junit.jupiter.api.extension.ParameterResolutionException: No ParameterResolver registered for parameter [final com.orrs.authmicro.customer.CustomerService customerService] in constructor [public com.orrs.authmicro.AuthMicroApplicationTests(com.orrs.authmicro.customer.CustomerService,com.orrs.authmicro.customer.CustomerRepository)].</strong></p>\n<p><strong>Error for Test 2 -org.junit.jupiter.api.extension.ParameterResolutionException: No ParameterResolver registered for parameter [final com.orrs.authmicro.customer.CustomerService customerService] in constructor [public com.orrs.authmicro.AuthMicroApplicationTests(com.orrs.authmicro.customer.CustomerService,com.orrs.authmicro.customer.CustomerRepository)].</strong></p>\n<p>I have looked at most of the solutions available and they advice to remove @Test or @ParameterizedTest . My tests are not found if I remove @Test and I cant remove @ParameterizedTest because I'm not using it. I have spent hours already and can't seem to overcome this. Before this there were <strong>Bean Creation Errors--- UnsatisfiedDependencyException: Error creating bean with name customerService</strong></p>\n<p><strong>Testfile</strong></p>\n<pre><code>package com.orrs.authmicro;\n\nimport com.orrs.authmicro.customer.*;\nimport lombok.AllArgsConstructor;\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;\nimport org.springframework.boot.test.context.SpringBootTest;\n\nimport static org.assertj.core.api.AssertionsForClassTypes.assertThat;\n\n@AllArgsConstructor\n@DataJpaTest\nclass AuthMicroApplicationTests {\n\n    @Autowired\n    private final CustomerService customerService;\n\n    private final CustomerRepository customerRepository;\n\n\n    @Test\n    public void testJpaSave(){\n        Customer customer = customerRepository.save(new Customer(\n                &quot;TestFname&quot;,\n                &quot;TestLname&quot;,\n                &quot;TestAddress&quot;,\n                &quot;99999999999&quot;,\n                Gender.MALE,\n                &quot;TestPassword&quot;,\n                &quot;testEmail@gmail.com&quot;,\n                CustomerRole.USER\n        ));\n\n\n        assertThat(customer.getId()).isGreaterThan(0);\n    }\n\n\n\n    @Test\n    public void testRegistration(){\n\n\n\n        String response = customerService.signUpCustomer(\n                new Customer(\n                        &quot;TestFname&quot;,\n                        &quot;TestLname&quot;,\n                        &quot;TestAddress&quot;,\n                        &quot;99999999999&quot;,\n                        Gender.MALE,\n                        &quot;TestPassword&quot;,\n                        &quot;testEmail@gmail.com&quot;,\n                        CustomerRole.USER\n                )\n        );\n\n        assertThat(response.equals(&quot;Signed up perfectly)&quot;));\n    }\n\n}\n</code></pre>\n<p><strong>CustomerRespository</strong></p>\n<pre><code>package com.orrs.authmicro.customer;\n\n\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.util.Optional;\n\n@Transactional(readOnly = true)\n@Repository\npublic interface CustomerRepository extends JpaRepository&lt;Customer, Long&gt; {\n    Optional&lt;Customer&gt; findByEmail(String email);\n\n\n}\n\n</code></pre>\n<p><strong>CustomerService</strong></p>\n<pre><code>package com.orrs.authmicro.customer;\n\nimport lombok.AllArgsConstructor;\nimport org.springframework.security.core.context.SecurityContextHolder;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.stereotype.Service;\n\nimport java.security.Principal;\nimport java.util.Optional;\n\n@Service\n@AllArgsConstructor\npublic class CustomerService implements UserDetailsService {\n\n\n\n    private final BCryptPasswordEncoder bCryptPasswordEncoder;\n\n    private final String  USER_NOT_FOUND = &quot;Customer with email %s not found&quot;;\n    private final CustomerRepository customerRepository;\n\n\n    @Override\n    public UserDetails loadUserByUsername(String email) throws UsernameNotFoundException {\n\n        return customerRepository.findByEmail(email)\n                .orElseThrow(()-&gt; new UsernameNotFoundException(String.format(USER_NOT_FOUND,email)));\n    }\n    public String signUpCustomer(Customer customer){\n        boolean customerExists = customerRepository.findByEmail(customer.getEmail())\n                .isPresent();\n        if(customerExists){\n            throw new IllegalStateException(&quot;User with Email already exist!&quot;);\n        }\n\n        if(customer.getPassword() == &quot;&quot;){\n            throw new IllegalStateException(&quot;Password cannot be empty&quot;);\n        }\n\n        if(customer.getFname() == &quot;&quot; || customer.getFname().isEmpty()){\n            throw new IllegalStateException(&quot;Name cannot be empty&quot;);\n        }\n\n        if(customer.getGender().equals(&quot;&quot;)){\n            throw new IllegalStateException(&quot;Gender cannot be empty&quot;);\n        }\n\n        if(customer.getAddress().equals(&quot;&quot;)){\n            throw new IllegalStateException(&quot;Address cannot be empty&quot;);\n        }\n\n        String encodedPassword = bCryptPasswordEncoder.encode(customer.getPassword());\n        customer.setPassword(encodedPassword);\n        customerRepository.save(customer);\n\n        return &quot;Signed up perfectly&quot;;\n    }\n\n    public String currentUsername(Principal principal){\n        return principal.getName();\n    }\n\n\n\n\n    public Customer updateCustomer(Customer customer){\n\n        //Object principal =  SecurityContextHolder.getContext().getAuthentication().getPrincipal();\n\n        //String userName = currentUsername((Principal) principal);\n\n        boolean customerExists = customerRepository.findByEmail(customer.getEmail()).isPresent();\n        if(customerExists){\n\n            Optional&lt;Customer&gt; wrapperCustomer = customerRepository.findByEmail(customer.getEmail());\n            Customer  existingCustomer = wrapperCustomer.get();\n            existingCustomer.setAddress(customer.getAddress());\n            existingCustomer.setFname(customer.getFname());\n            existingCustomer.setLname(customer.getLname());\n            existingCustomer.setPhoneNumber(customer.getPhoneNumber());\n            existingCustomer.setGender(customer.getGender());\n            customerRepository.save(existingCustomer);\n            return existingCustomer;\n        }else{\n            throw new IllegalStateException(&quot;User doesn't exist&quot;);\n        }\n\n\n    }\n    public String deleteCustomerById(String email){\n        boolean customerExists = customerRepository.findByEmail(email).isPresent();\n        if(customerExists){\n\n            Optional&lt;Customer&gt; wrapperCustomer = customerRepository.findByEmail(email);\n            Customer  existingCustomer = wrapperCustomer.get();\n            customerRepository.deleteById(existingCustomer.getId());\n\n            return &quot;Customer Deleted Successfully!&quot;;\n\n        }else{\n            throw new IllegalStateException(&quot;User Not Found&quot;);\n        }\n    }\n}\n\n\n</code></pre>\n<p><strong>pom.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.2&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.orrs&lt;/groupId&gt;\n    &lt;artifactId&gt;auth-micro&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;auth-micro&lt;/name&gt;\n    &lt;description&gt;Authorisation microservice&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n        &lt;spring-cloud.version&gt;2021.0.3&lt;/spring-cloud.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n            &lt;version&gt;5.9.0&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\n            &lt;version&gt;5.9.0&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n\n</code></pre>\n"},{"tags":["java","mapstruct"],"comments":[{"owner":{"account_id":1128956,"reputation":19765,"user_id":1115491,"display_name":"Filip"},"score":0,"creation_date":1661063824,"post_id":73432142,"comment_id":129678997,"body_markdown":"What do you mean with you want to map from Aggregator to Header? Can you give an example?","body":"What do you mean with you want to map from Aggregator to Header? Can you give an example?"},{"owner":{"account_id":26090540,"reputation":43,"user_id":19787507,"display_name":"Matanya Jellinek"},"score":0,"creation_date":1661064166,"post_id":73432142,"comment_id":129679039,"body_markdown":"@Filip\nThanks for answering\nI created an abstract class with annotation: @Mapper(unmappedTargetPolicy = ReportingPolicy.IGNORE)\nand the method:\npublic abstract HeaderDTO toDTO(Aggregator aggregator);\n\nSo the goal is to get the Header from aggregator and map it to headerDTO","body":"@Filip Thanks for answering I created an abstract class with annotation: @Mapper(unmappedTargetPolicy = ReportingPolicy.IGNORE) and the method: public abstract HeaderDTO toDTO(Aggregator aggregator);  So the goal is to get the Header from aggregator and map it to headerDTO"}],"answers":[{"tags":[],"owner":{"account_id":1128956,"reputation":19765,"user_id":1115491,"display_name":"Filip"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1661075064,"creation_date":1661075064,"answer_id":73433251,"question_id":73432142,"body_markdown":"MapStruct allows you to map the entire target object to a particular source reference. \r\n\r\ne.g.\r\n\r\n```\r\n@Mapper(unmappedTargetPolicy = ReportingPolicy.IGNORE)\r\npublic abstract class AggregatorMapper {\r\n\r\n    @Mapping(target = &quot;.&quot;, source = &quot;header&quot;\r\n    public abstract HeaderDTO toDTO(Aggregator aggregator);\r\n\r\n}\r\n```","title":"Using mapstruct to get inner object from outer object","body":"<p>MapStruct allows you to map the entire target object to a particular source reference.</p>\n<p>e.g.</p>\n<pre><code>@Mapper(unmappedTargetPolicy = ReportingPolicy.IGNORE)\npublic abstract class AggregatorMapper {\n\n    @Mapping(target = &quot;.&quot;, source = &quot;header&quot;\n    public abstract HeaderDTO toDTO(Aggregator aggregator);\n\n}\n</code></pre>\n"}],"owner":{"account_id":26090540,"reputation":43,"user_id":19787507,"display_name":"Matanya Jellinek"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":443,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73433251,"answer_count":1,"score":2,"last_activity_date":1661075064,"creation_date":1661063394,"question_id":73432142,"body_markdown":"I have an object that looks like this:\r\n\r\n    public class Aggregator {\r\n\r\n    private Header header;\r\n    private Second second;\r\n\r\n    }\r\n\r\nAnd I want to map from Aggregator to Header but I can&#39;t use void methods \r\nMapstruct version is 1.3\r\n\r\nHow can I achieve that goal?\r\n\r\nEdit:\r\n\r\nI&#39;m trying to map the business entity &quot;Aggregator&quot; to the DTO entity &quot;HeaderDTO&quot; \r\n\r\nI&#39;m trying to achieve that by creating an abstract class with the annotation: @Mapper(unmappedTargetPolicy = ReportingPolicy.IGNORE)\r\nand the method:\r\n&quot;public abstract HeaderDTO toDTO(Aggregator aggregator);&quot;\r\n\r\n    @Mapper(unmappedTargetPolicy = ReportingPolicy.IGNORE)\r\n    public abstract class AggregatorMapper {\r\n\r\n  \r\n    public abstract HeaderDTO toDTO(Aggregator aggregator);\r\n\r\n    }","title":"Using mapstruct to get inner object from outer object","body":"<p>I have an object that looks like this:</p>\n<pre><code>public class Aggregator {\n\nprivate Header header;\nprivate Second second;\n\n}\n</code></pre>\n<p>And I want to map from Aggregator to Header but I can't use void methods\nMapstruct version is 1.3</p>\n<p>How can I achieve that goal?</p>\n<p>Edit:</p>\n<p>I'm trying to map the business entity &quot;Aggregator&quot; to the DTO entity &quot;HeaderDTO&quot;</p>\n<p>I'm trying to achieve that by creating an abstract class with the annotation: @Mapper(unmappedTargetPolicy = ReportingPolicy.IGNORE)\nand the method:\n&quot;public abstract HeaderDTO toDTO(Aggregator aggregator);&quot;</p>\n<pre><code>@Mapper(unmappedTargetPolicy = ReportingPolicy.IGNORE)\npublic abstract class AggregatorMapper {\n\n\npublic abstract HeaderDTO toDTO(Aggregator aggregator);\n\n}\n</code></pre>\n"},{"tags":["java","collections","guava"],"comments":[{"owner":{"account_id":266709,"reputation":11846,"user_id":554431,"display_name":"bestsss"},"score":2,"creation_date":1305019418,"post_id":5947869,"comment_id":6857276,"body_markdown":"Collections.singletonMap","body":"Collections.singletonMap"},{"owner":{"account_id":69527,"reputation":40466,"user_id":202214,"display_name":"Kevin Bourrillion"},"score":4,"creation_date":1305039472,"post_id":5947869,"comment_id":6863053,"body_markdown":"he&#39;s asking for a mutable map, and to support more than just one entry.","body":"he&#39;s asking for a mutable map, and to support more than just one entry."},{"owner":{"account_id":266709,"reputation":11846,"user_id":554431,"display_name":"bestsss"},"score":0,"creation_date":1305039762,"post_id":5947869,"comment_id":6863160,"body_markdown":"@kevin, you mean a mutable map w/ just one entry, what&#39;s exactly the point of? If you imply a general hashmap, you&#39;d be better off initializing it w/ the expected capacity than just a single key-value (which makes little to no sense to me)","body":"@kevin, you mean a mutable map w/ just one entry, what&#39;s exactly the point of? If you imply a general hashmap, you&#39;d be better off initializing it w/ the expected capacity than just a single key-value (which makes little to no sense to me)"}],"answers":[{"tags":[],"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1305019288,"creation_date":1305019288,"answer_id":5947904,"question_id":5947869,"body_markdown":"The difference is that for an immutable map, you *have* to provide everything up-front, because you can&#39;t change it after construction. For mutable maps, you can just create the map and then add the entries. Admittedly this makes it slightly harder to create a map in a single expression, but that doesn&#39;t *tend* to be a problem where you&#39;d want a mutable map anyway, in my experience.","title":"ImmutableMap.of() workaround for HashMap in Maps?","body":"<p>The difference is that for an immutable map, you <em>have</em> to provide everything up-front, because you can't change it after construction. For mutable maps, you can just create the map and then add the entries. Admittedly this makes it slightly harder to create a map in a single expression, but that doesn't <em>tend</em> to be a problem where you'd want a mutable map anyway, in my experience.</p>\n"},{"tags":[],"owner":{"account_id":45934,"reputation":203659,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"down_vote_count":2,"up_vote_count":24,"is_accepted":true,"score":22,"last_activity_date":1305042232,"creation_date":1305019361,"answer_id":5947915,"question_id":5947869,"body_markdown":"Why would you want those for a regular `HashMap` or `LinkedHashMap`? You can just do this:\r\n\r\n    Map&lt;String, Object&gt; map = Maps.newHashMap();\r\n    map.put(key, value);\r\n\r\nThe thing with `ImmutableMap` is that it is a little bit more cumbersome to create; you first need to make a `Builder`, then put the key-value pairs in the builder and then call `build()` on it to create your `ImmutableMap`. The `ImmutableMap.of()` method makes it shorter to write if you want to create an `ImmutableMap` with a single key-value pair.\r\n\r\nConsider what you&#39;d have to write if you wouldn&#39;t use the `ImmutableMap.of()` method:\r\n\r\n    ImmutableMap&lt;String, Object&gt; map = ImmutableMap.builder()\r\n        .put(key, value);\r\n        .build();\r\n","title":"ImmutableMap.of() workaround for HashMap in Maps?","body":"<p>Why would you want those for a regular <code>HashMap</code> or <code>LinkedHashMap</code>? You can just do this:</p>\n\n<pre><code>Map&lt;String, Object&gt; map = Maps.newHashMap();\nmap.put(key, value);\n</code></pre>\n\n<p>The thing with <code>ImmutableMap</code> is that it is a little bit more cumbersome to create; you first need to make a <code>Builder</code>, then put the key-value pairs in the builder and then call <code>build()</code> on it to create your <code>ImmutableMap</code>. The <code>ImmutableMap.of()</code> method makes it shorter to write if you want to create an <code>ImmutableMap</code> with a single key-value pair.</p>\n\n<p>Consider what you'd have to write if you wouldn't use the <code>ImmutableMap.of()</code> method:</p>\n\n<pre><code>ImmutableMap&lt;String, Object&gt; map = ImmutableMap.builder()\n    .put(key, value);\n    .build();\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user638455"},"down_vote_count":1,"up_vote_count":18,"is_accepted":false,"score":17,"last_activity_date":1507615842,"creation_date":1305019851,"answer_id":5948019,"question_id":5947869,"body_markdown":"Try `Maps.newHashMap(ImmutableMap.of(...))`\r\n\r\n[`Maps.newHashMap(Map map)`][1]\r\n\r\n\r\n  [1]: https://google.github.io/guava/releases/19.0/api/docs/com/google/common/collect/Maps.html#newHashMap(java.util.Map)","title":"ImmutableMap.of() workaround for HashMap in Maps?","body":"<p>Try <code>Maps.newHashMap(ImmutableMap.of(...))</code></p>\n\n<p><a href=\"https://google.github.io/guava/releases/19.0/api/docs/com/google/common/collect/Maps.html#newHashMap(java.util.Map)\" rel=\"nofollow noreferrer\"><code>Maps.newHashMap(Map map)</code></a></p>\n"},{"tags":[],"owner":{"account_id":109733,"reputation":31428,"user_id":290629,"accept_rate":88,"display_name":"卢声远 Shengyuan Lu"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1305021849,"creation_date":1305021462,"answer_id":5948329,"question_id":5947869,"body_markdown":"`ImmutableMap.of()` returns a hash based immutable map without order.\r\n\r\nIf you need ordered immutable map, `ImmutableSortedMap.of()` is a choice. \r\n\r\nImmutableSortedMap provides methods such as `firstKey()`, `lastKey()`, `headMap(K)` and `tailMap(K)`;\r\n\r\nBoth classes provide `copyOf(Map)` method.","title":"ImmutableMap.of() workaround for HashMap in Maps?","body":"<p><code>ImmutableMap.of()</code> returns a hash based immutable map without order.</p>\n\n<p>If you need ordered immutable map, <code>ImmutableSortedMap.of()</code> is a choice. </p>\n\n<p>ImmutableSortedMap provides methods such as <code>firstKey()</code>, <code>lastKey()</code>, <code>headMap(K)</code> and <code>tailMap(K)</code>;</p>\n\n<p>Both classes provide <code>copyOf(Map)</code> method.</p>\n"},{"tags":[],"owner":{"account_id":2868209,"reputation":3106,"user_id":2462052,"accept_rate":65,"display_name":"danny"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1545023800,"creation_date":1545023800,"answer_id":53809321,"question_id":5947869,"body_markdown":"cannot you use the `copyOf` method of `ImmutableMap` described [here]?\r\n\r\nit should be something like \r\n\r\n    Map newImmutableMap = ImmutableMap.copyOf(yourMap);\r\n\r\n  [here]: https://google.github.io/guava/releases/21.0/api/docs/com/google/common/collect/ImmutableMap.html#copyOf-java.util.Map-","title":"ImmutableMap.of() workaround for HashMap in Maps?","body":"<p>cannot you use the <code>copyOf</code> method of <code>ImmutableMap</code> described <a href=\"https://google.github.io/guava/releases/21.0/api/docs/com/google/common/collect/ImmutableMap.html#copyOf-java.util.Map-\" rel=\"noreferrer\">here</a>?</p>\n\n<p>it should be something like </p>\n\n<pre><code>Map newImmutableMap = ImmutableMap.copyOf(yourMap);\n</code></pre>\n"}],"owner":{"account_id":306710,"reputation":7852,"user_id":617612,"accept_rate":83,"display_name":"Premraj"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64452,"favorite_count":0,"down_vote_count":0,"up_vote_count":33,"accepted_answer_id":5947915,"answer_count":5,"score":33,"last_activity_date":1661074990,"creation_date":1305019068,"question_id":5947869,"body_markdown":"There are utility methods to create `ImmutableMap` like `Immutable.of(Key, value)` and its overload. &lt;br/&gt;&lt;br/&gt;\r\nBut such methods don&#39;t exist for `HashMap` or `LinkedHashMap` in `Maps` class. &lt;br/&gt;&lt;br/&gt;\r\nIs there any better way to do this or Guava assumes such a map is always a constant map and `ImmutableMap` is best option to go with and don&#39;t need to provide a utility for `HashMap`.\r\n","title":"ImmutableMap.of() workaround for HashMap in Maps?","body":"<p>There are utility methods to create <code>ImmutableMap</code> like <code>Immutable.of(Key, value)</code> and its overload. <br/><br/>\nBut such methods don't exist for <code>HashMap</code> or <code>LinkedHashMap</code> in <code>Maps</code> class. <br/><br/>\nIs there any better way to do this or Guava assumes such a map is always a constant map and <code>ImmutableMap</code> is best option to go with and don't need to provide a utility for <code>HashMap</code>.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":4,"creation_date":1343667193,"post_id":11726023,"comment_id":15558308,"body_markdown":"Please show *what* you&#39;ve tried (did you look for the word &quot;split&quot; in the docs for String, for example?)","body":"Please show <i>what</i> you&#39;ve tried (did you look for the word &quot;split&quot; in the docs for String, for example?)"},{"owner":{"account_id":73312,"reputation":5791,"user_id":211197,"display_name":"maksimov"},"score":11,"creation_date":1343667239,"post_id":11726023,"comment_id":15558324,"body_markdown":"Yes, String#split() is named very ambiguously :-P","body":"Yes, String#split() is named very ambiguously :-P"}],"answers":[{"tags":[],"owner":{"account_id":95910,"reputation":238649,"user_id":260990,"accept_rate":81,"display_name":"jmj"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1343667205,"creation_date":1343667205,"answer_id":11726038,"question_id":11726023,"body_markdown":"Use [`split()`][1]\r\n\r\n    String words[] = stringInstance.split(&quot; &quot;);\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29","title":"Split string into individual words Java","body":"<p>Use <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29\" rel=\"nofollow\"><code>split()</code></a></p>\n\n<pre><code>String words[] = stringInstance.split(\" \");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1355206,"reputation":33312,"user_id":1293744,"accept_rate":44,"display_name":"Kumar Vivek Mitra"},"down_vote_count":1,"up_vote_count":87,"is_accepted":true,"score":86,"last_activity_date":1524572792,"creation_date":1343667269,"answer_id":11726055,"question_id":11726023,"body_markdown":"Use `split()` method\r\n\r\n\r\n**Eg:**\r\n\r\n \r\n\r\n    String s = &quot;I want to walk my dog&quot;;\r\n    String[] arr = s.split(&quot; &quot;);    \r\n    \r\n    for ( String ss : arr) {\r\n        System.out.println(ss);\r\n    }","title":"Split string into individual words Java","body":"<p>Use <code>split()</code> method</p>\n\n<p><strong>Eg:</strong></p>\n\n<pre><code>String s = \"I want to walk my dog\";\nString[] arr = s.split(\" \");    \n\nfor ( String ss : arr) {\n    System.out.println(ss);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3916524,"reputation":182,"user_id":3240229,"accept_rate":0,"display_name":"AKT"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1405793925,"creation_date":1405792475,"answer_id":24843315,"question_id":11726023,"body_markdown":"You can use `split(&quot; &quot;)` method of the `String` class and can get each word as code given below:\r\n\r\n    String s = &quot;I want to walk my dog&quot;;\r\n    String []strArray=s.split(&quot; &quot;);\r\n    for(int i=0; i&lt;strArray.length;i++) {\r\n         System.out.println(strArray[i]);\r\n    }","title":"Split string into individual words Java","body":"<p>You can use <code>split(\" \")</code> method of the <code>String</code> class and can get each word as code given below:</p>\n\n<pre><code>String s = \"I want to walk my dog\";\nString []strArray=s.split(\" \");\nfor(int i=0; i&lt;strArray.length;i++) {\n     System.out.println(strArray[i]);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4063653,"reputation":7235,"user_id":3401555,"accept_rate":87,"display_name":"Kao"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1410339432,"creation_date":1410339432,"answer_id":25761246,"question_id":11726023,"body_markdown":"Yet another method, using [StringTokenizer][1] :\r\n         \r\n    String s = &quot;I want to walk my dog&quot;;\r\n\tStringTokenizer tokenizer = new StringTokenizer(s);\r\n\t\r\n\twhile(tokenizer.hasMoreTokens()) {\r\n\t    System.out.println(tokenizer.nextToken());\r\n\t}\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/StringTokenizer.html","title":"Split string into individual words Java","body":"<p>Yet another method, using <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/StringTokenizer.html\" rel=\"noreferrer\">StringTokenizer</a> :</p>\n\n<pre><code>String s = \"I want to walk my dog\";\nStringTokenizer tokenizer = new StringTokenizer(s);\n\nwhile(tokenizer.hasMoreTokens()) {\n    System.out.println(tokenizer.nextToken());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2035784,"reputation":670,"user_id":1879990,"display_name":"Pete"},"down_vote_count":0,"up_vote_count":32,"is_accepted":false,"score":32,"last_activity_date":1524575526,"creation_date":1422742346,"answer_id":28257108,"question_id":11726023,"body_markdown":"A regex can also be used to split words. \r\n\r\n`\\w` can be used to match word characters (`[A-Za-z0-9_]`), so that punctuation is removed from the results:\r\n\r\n    String s = &quot;I want to walk my dog, and why not?&quot;;\r\n\tPattern pattern = Pattern.compile(&quot;\\\\w+&quot;);\r\n\tMatcher matcher = pattern.matcher(s);\r\n\twhile (matcher.find()) {\r\n\t\tSystem.out.println(matcher.group());\r\n\t}\r\n\r\nOutputs:\r\n\r\n    I\r\n    want\r\n    to\r\n    walk\r\n    my\r\n    dog\r\n    and\r\n    why\r\n    not\r\n\r\nSee Java API documentation for [Pattern][1]\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html","title":"Split string into individual words Java","body":"<p>A regex can also be used to split words. </p>\n\n<p><code>\\w</code> can be used to match word characters (<code>[A-Za-z0-9_]</code>), so that punctuation is removed from the results:</p>\n\n<pre><code>String s = \"I want to walk my dog, and why not?\";\nPattern pattern = Pattern.compile(\"\\\\w+\");\nMatcher matcher = pattern.matcher(s);\nwhile (matcher.find()) {\n    System.out.println(matcher.group());\n}\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>I\nwant\nto\nwalk\nmy\ndog\nand\nwhy\nnot\n</code></pre>\n\n<p>See Java API documentation for <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html\" rel=\"noreferrer\">Pattern</a></p>\n"},{"tags":[],"owner":{"account_id":6696839,"reputation":855,"user_id":5164612,"display_name":"Teodor Anton"},"down_vote_count":2,"up_vote_count":74,"is_accepted":false,"score":72,"last_activity_date":1495374639,"creation_date":1438082767,"answer_id":31674929,"question_id":11726023,"body_markdown":"As a more general solution (but ASCII only!), to include any other separators between words (like commas and semicolons), I suggest:\r\n\r\n    String s = &quot;I want to walk my dog, cat, and tarantula; maybe even my tortoise.&quot;;\r\n    String[] words = s.split(&quot;\\\\W+&quot;);\r\n\r\nThe regex means that the delimiters will be anything that is not a word [\\W], in groups of at least one [+]. Because [+] is greedy, it will take for instance &#39;;&#39; and &#39; &#39; together as one delimiter.","title":"Split string into individual words Java","body":"<p>As a more general solution (but ASCII only!), to include any other separators between words (like commas and semicolons), I suggest:</p>\n\n<pre><code>String s = \"I want to walk my dog, cat, and tarantula; maybe even my tortoise.\";\nString[] words = s.split(\"\\\\W+\");\n</code></pre>\n\n<p>The regex means that the delimiters will be anything that is not a word [\\W], in groups of at least one [+]. Because [+] is greedy, it will take for instance ';' and ' ' together as one delimiter.</p>\n"},{"tags":[],"owner":{"account_id":1535921,"reputation":3060,"user_id":1431979,"display_name":"Pierre C"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1478227039,"creation_date":1478227039,"answer_id":40414433,"question_id":11726023,"body_markdown":"See my [other answer][1] if your phrase contains accentuated characters :\r\n\r\n    String[] listeMots = phrase.split(&quot;\\\\P{L}+&quot;);\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/40414384/1431979","title":"Split string into individual words Java","body":"<p>See my <a href=\"https://stackoverflow.com/a/40414384/1431979\">other answer</a> if your phrase contains accentuated characters :</p>\n\n<pre><code>String[] listeMots = phrase.split(\"\\\\P{L}+\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3270506,"reputation":73,"user_id":2754001,"display_name":"Akib Imtiaz"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1479622538,"creation_date":1479621377,"answer_id":40701153,"question_id":11726023,"body_markdown":"To include any separators between words (like everything except all lower case and upper case letters), we can do:\r\n    \r\n    String mystring = &quot;hi, there,hi Leo&quot;;\r\n    String[] arr = mystring.split(&quot;[^a-zA-Z]+&quot;);\r\n    for(int i = 0; i &lt; arr.length; i += 1)\r\n    {\r\n         System.out.println(arr[i]);\r\n    }\r\n\r\nHere the regex means that the separators will be anything that is not a upper or lower case letter `[^a-zA-Z]`, in groups of at least one [+].","title":"Split string into individual words Java","body":"<p>To include any separators between words (like everything except all lower case and upper case letters), we can do:</p>\n\n<pre><code>String mystring = \"hi, there,hi Leo\";\nString[] arr = mystring.split(\"[^a-zA-Z]+\");\nfor(int i = 0; i &lt; arr.length; i += 1)\n{\n     System.out.println(arr[i]);\n}\n</code></pre>\n\n<p>Here the regex means that the separators will be anything that is not a upper or lower case letter <code>[^a-zA-Z]</code>, in groups of at least one [+].</p>\n"},{"tags":[],"owner":{"account_id":8262338,"reputation":322,"user_id":6213262,"display_name":"Gagan Chouhan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1643711024,"creation_date":1524573125,"answer_id":50001798,"question_id":11726023,"body_markdown":"you can use Apache commons&#39; StringUtils class\r\n\r\n\r\n    String[] partsOfString = StringUtils.split(&quot;I want to walk my dog&quot;, StringUtils.SPACE)","title":"Split string into individual words Java","body":"<p>you can use Apache commons' StringUtils class</p>\n<pre><code>String[] partsOfString = StringUtils.split(&quot;I want to walk my dog&quot;, StringUtils.SPACE)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10134977,"reputation":9,"user_id":7486880,"display_name":"Yan Nan"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1575677090,"creation_date":1548091086,"answer_id":54294893,"question_id":11726023,"body_markdown":"    String[] str = s.split(&quot;[^a-zA-Z]+&quot;);\r\n\r\n","title":"Split string into individual words Java","body":"<pre><code>String[] str = s.split(\"[^a-zA-Z]+\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10225897,"reputation":551,"user_id":7548514,"display_name":"Kyo Huu"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1589884115,"creation_date":1589884115,"answer_id":61888811,"question_id":11726023,"body_markdown":"\r\nThis regex will split word by space like space, tab, line break:\r\n\r\n    String[] str = s.split(&quot;\\\\s+&quot;);","title":"Split string into individual words Java","body":"<p>This regex will split word by space like space, tab, line break:</p>\n\n<pre><code>String[] str = s.split(\"\\\\s+\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18885179,"reputation":19,"user_id":13776792,"display_name":"ch Noman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1596045024,"creation_date":1596045024,"answer_id":63159606,"question_id":11726023,"body_markdown":"    StringTokenizer separate = new StringTokenizer(s, &quot; &quot;);\r\n    String word = separate.nextToken();\r\n    System.out.println(word);\r\n\r\n","title":"Split string into individual words Java","body":"<pre><code>StringTokenizer separate = new StringTokenizer(s, &quot; &quot;);\nString word = separate.nextToken();\nSystem.out.println(word);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5096768,"reputation":1551,"user_id":4087817,"display_name":"ngg"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1624344127,"creation_date":1624344127,"answer_id":68078680,"question_id":11726023,"body_markdown":" \r\n\r\n***Java String split() method example***\r\n\r\n      \r\n     public class SplitExample{  \r\n        \tpublic static void main(String args[]){  \r\n        \t\tString str=&quot;java string split method&quot;;  \r\n        \t\tString[] words=str.split(&quot;\\\\s&quot;);//splits the string based on whitespace  \r\n         \r\n        \t\tfor(String word:words){  \r\n        \t\t\tSystem.out.println(word);  \r\n        \t\t}  \r\n        \t}\r\n        }","title":"Split string into individual words Java","body":"<p><em><strong>Java String split() method example</strong></em></p>\n<pre><code> public class SplitExample{  \n        public static void main(String args[]){  \n            String str=&quot;java string split method&quot;;  \n            String[] words=str.split(&quot;\\\\s&quot;);//splits the string based on whitespace  \n     \n            for(String word:words){  \n                System.out.println(word);  \n            }  \n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18954391,"reputation":1,"user_id":13831317,"display_name":"Rakesh pal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1628088473,"creation_date":1628087327,"answer_id":68653066,"question_id":11726023,"body_markdown":"    class test{\r\n               \r\n        public static void main(String[] args){\r\n                \tStringTokenizer st= new StringTokenizer(&quot;I want to walk my dog.&quot;);\r\n                    \r\n                    while (st.hasMoreTokens())\r\n                        System.out.println(st.nextToken());\r\n             \r\n                }\r\n            }\r\n\r\n","title":"Split string into individual words Java","body":"<pre><code>class test{\n           \n    public static void main(String[] args){\n                StringTokenizer st= new StringTokenizer(&quot;I want to walk my dog.&quot;);\n                \n                while (st.hasMoreTokens())\n                    System.out.println(st.nextToken());\n         \n            }\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4983174,"reputation":100,"user_id":4007530,"accept_rate":50,"display_name":"Arafath"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661074783,"creation_date":1661074783,"answer_id":73433221,"question_id":11726023,"body_markdown":"Using Java Stream API:\r\n\r\n    String sentence = &quot;I want to walk my dog.&quot;;\r\n    \r\n    Arrays.stream(sentence.split(&quot; &quot;)).forEach(System.out::println);\r\n\r\nOutput:\r\n\r\n    I\r\n    want\r\n    to\r\n    walk\r\n    my\r\n    dog.\r\n\r\nOr\r\n\r\n    String sentence2 = &quot;I want to walk my dog.&quot;;\r\n\r\n    Arrays.stream(sentence2.split(&quot; &quot;)).map(str -&gt; str.replace(&quot;.&quot;, &quot;&quot;)).forEach(System.out::println);\r\n\r\nOutput:\r\n\r\n    I\r\n    want\r\n    to\r\n    walk\r\n    my\r\n    dog\r\n\r\n","title":"Split string into individual words Java","body":"<p>Using Java Stream API:</p>\n<pre><code>String sentence = &quot;I want to walk my dog.&quot;;\n\nArrays.stream(sentence.split(&quot; &quot;)).forEach(System.out::println);\n</code></pre>\n<p>Output:</p>\n<pre><code>I\nwant\nto\nwalk\nmy\ndog.\n</code></pre>\n<p>Or</p>\n<pre><code>String sentence2 = &quot;I want to walk my dog.&quot;;\n\nArrays.stream(sentence2.split(&quot; &quot;)).map(str -&gt; str.replace(&quot;.&quot;, &quot;&quot;)).forEach(System.out::println);\n</code></pre>\n<p>Output:</p>\n<pre><code>I\nwant\nto\nwalk\nmy\ndog\n</code></pre>\n"}],"owner":{"account_id":1088478,"reputation":1676,"user_id":1083653,"accept_rate":56,"display_name":"fosho"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":304541,"favorite_count":0,"down_vote_count":9,"up_vote_count":62,"accepted_answer_id":11726055,"answer_count":15,"score":53,"last_activity_date":1661074783,"creation_date":1343667131,"question_id":11726023,"body_markdown":"I would like to know how to split up a large string into a series of smaller strings or words.\r\nFor example:\r\n\r\n&gt; I want to walk my dog.\r\n\r\nI want to have a string: `&quot;I&quot;`,\r\nanother string:`&quot;want&quot;`, etc.\r\n\r\nHow would I do this?","title":"Split string into individual words Java","body":"<p>I would like to know how to split up a large string into a series of smaller strings or words.\nFor example:</p>\n\n<blockquote>\n  <p>I want to walk my dog.</p>\n</blockquote>\n\n<p>I want to have a string: <code>\"I\"</code>,\nanother string:<code>\"want\"</code>, etc.</p>\n\n<p>How would I do this?</p>\n"},{"tags":["java","spring","elasticsearch","full-text-search"],"comments":[{"owner":{"account_id":24908380,"reputation":3091,"user_id":18778181,"display_name":"rabbitbr"},"score":0,"creation_date":1660997218,"post_id":73424106,"comment_id":129668687,"body_markdown":"what is the motive for use postFilter?","body":"what is the motive for use postFilter?"}],"answers":[{"tags":[],"owner":{"account_id":20863305,"reputation":63,"user_id":15324997,"display_name":"GhoRdoU MaeMoN"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1661074576,"creation_date":1661074576,"answer_id":73433191,"question_id":73424106,"body_markdown":"The problem was in the employeeNumber field, I don&#39;t know if it because it a long or because, it was a Long when the index was created and I changed it to a String and a mismatch occured between the index and my spring document but it worked find after I deleted the index and recreated it","title":"exception [type=search_phase_execution_exception, reason=all shards failed] when trying full text search","body":"<p>The problem was in the employeeNumber field, I don't know if it because it a long or because, it was a Long when the index was created and I changed it to a String and a mismatch occured between the index and my spring document but it worked find after I deleted the index and recreated it</p>\n"}],"owner":{"account_id":20863305,"reputation":63,"user_id":15324997,"display_name":"GhoRdoU MaeMoN"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":291,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73433191,"answer_count":1,"score":1,"last_activity_date":1661074576,"creation_date":1660969848,"question_id":73424106,"body_markdown":"I tried to implement a full text search in spring data elasticsearch, but when a request is sent this exception is raised &quot;Elasticsearch exception [type=search_phase_execution_exception, reason=all shards failed]&quot;\r\n```java\r\nMultiMatchQueryBuilder queryBuilder = QueryBuilders.multiMatchQuery(searchTerm)\r\n                .type(MultiMatchQueryBuilder.Type.CROSS_FIELDS)\r\n                .operator(Operator.AND)\r\n                .field(&quot;firstName&quot;)\r\n                .field(&quot;lastName&quot;)\r\n                .field(&quot;activeDirectoryUsername&quot;)\r\n                .field(&quot;employeeNumber&quot;)\r\n                .field(&quot;personalEmail&quot;)\r\n                .field(&quot;corporateEmail&quot;)\r\n                .field(&quot;project&quot;);\r\n\r\n        SearchSourceBuilder searchSourceBuilder = new SearchSourceBuilder()\r\n                .postFilter(queryBuilder);\r\n\r\n        SearchRequest request = new SearchRequest(&quot;employee&quot;);\r\n        request.source(searchSourceBuilder);\r\n\r\n        SearchResponse response = client.search(request, RequestOptions.DEFAULT);\r\n```\r\nthe exception is raised in the last line.","title":"exception [type=search_phase_execution_exception, reason=all shards failed] when trying full text search","body":"<p>I tried to implement a full text search in spring data elasticsearch, but when a request is sent this exception is raised &quot;Elasticsearch exception [type=search_phase_execution_exception, reason=all shards failed]&quot;</p>\n<pre class=\"lang-java prettyprint-override\"><code>MultiMatchQueryBuilder queryBuilder = QueryBuilders.multiMatchQuery(searchTerm)\n                .type(MultiMatchQueryBuilder.Type.CROSS_FIELDS)\n                .operator(Operator.AND)\n                .field(&quot;firstName&quot;)\n                .field(&quot;lastName&quot;)\n                .field(&quot;activeDirectoryUsername&quot;)\n                .field(&quot;employeeNumber&quot;)\n                .field(&quot;personalEmail&quot;)\n                .field(&quot;corporateEmail&quot;)\n                .field(&quot;project&quot;);\n\n        SearchSourceBuilder searchSourceBuilder = new SearchSourceBuilder()\n                .postFilter(queryBuilder);\n\n        SearchRequest request = new SearchRequest(&quot;employee&quot;);\n        request.source(searchSourceBuilder);\n\n        SearchResponse response = client.search(request, RequestOptions.DEFAULT);\n</code></pre>\n<p>the exception is raised in the last line.</p>\n"},{"tags":["java","hadoop","eof"],"answers":[{"tags":[],"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1320026703,"creation_date":1320026703,"answer_id":7949362,"question_id":7949058,"body_markdown":"EOFException on a socket means there&#39;s no more data and the peer has closed the connection.","title":"What is the meaning of EOF exceptions in hadoop namenode connections from hbase/filesystem?","body":"<p>EOFException on a socket means there's no more data and the peer has closed the connection.</p>\n"},{"tags":[],"owner":{"account_id":142682,"reputation":17410,"user_id":350542,"accept_rate":43,"display_name":"jayunit100"},"down_vote_count":1,"up_vote_count":8,"is_accepted":true,"score":7,"last_activity_date":1320040384,"creation_date":1320040384,"answer_id":7950372,"question_id":7949058,"body_markdown":"Regarding hadoop : I fixed the error ! You need to make sure the core-site.xml is serving to 0.0.0.0 instead of 127.0.0.1(localhost).\r\n\r\nIf you get the EOF exception, it means that the port is not accessible externally on that ip, so there is no data to read between the hadoop client / server ipc.","title":"What is the meaning of EOF exceptions in hadoop namenode connections from hbase/filesystem?","body":"<p>Regarding hadoop : I fixed the error ! You need to make sure the core-site.xml is serving to 0.0.0.0 instead of 127.0.0.1(localhost).</p>\n\n<p>If you get the EOF exception, it means that the port is not accessible externally on that ip, so there is no data to read between the hadoop client / server ipc.</p>\n"}],"owner":{"account_id":142682,"reputation":17410,"user_id":350542,"accept_rate":43,"display_name":"jayunit100"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21736,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":7950372,"answer_count":2,"score":10,"last_activity_date":1661073653,"creation_date":1320022543,"question_id":7949058,"body_markdown":"This is both a general question about java EOF exceptions, as well as Hadoop&#39;s EOF exception which is related to jar interoperability.  Comments and answers on either topic are acceptable. \r\n\r\n**Background**\r\n\r\nI&#39;m noting some threads which discuss a cryptic exception, which is ultimately caused by a &quot;readInt&quot; method.  This exception seems to have some generic implications which are independent of hadoop, but ultimately, is caused by interoperability of Hadoop jars.\r\n\r\nIn my case, I&#39;m getting it when I try to create a new FileSystem object in hadoop, in java.  \r\n\r\n**Question**\r\n\r\nMy question is : What is happening and why does the reading of an integer throw an EOF  exception ?  What &quot;File&quot; is this EOF exception referring to, and why would such an exception be thrown if two jars are not capable of interoperating  ?  \r\n\r\nSecondarily, I also would like to know how to fix this error so i can connect to and read/write hadoops filesystem using the hdfs protocol with the java api, remotely.... \r\n\r\n&lt;pre&gt;\r\njava.io.IOException: Call to /10.0.1.37:50070 failed on local exception: java.io.EOFException\r\n\tat org.apache.hadoop.ipc.Client.wrapException(Client.java:1139)\r\n\tat org.apache.hadoop.ipc.Client.call(Client.java:1107)\r\n\tat org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:226)\r\n\tat $Proxy0.getProtocolVersion(Unknown Source)\r\n\tat org.apache.hadoop.ipc.RPC.getProxy(RPC.java:398)\r\n\tat org.apache.hadoop.ipc.RPC.getProxy(RPC.java:384)\r\n\tat org.apache.hadoop.hdfs.DFSClient.createRPCNamenode(DFSClient.java:111)\r\n\tat org.apache.hadoop.hdfs.DFSClient.&lt;init&gt;(DFSClient.java:213)\r\n\tat org.apache.hadoop.hdfs.DFSClient.&lt;init&gt;(DFSClient.java:180)\r\n\tat org.apache.hadoop.hdfs.DistributedFileSystem.initialize(DistributedFileSystem.java:89)\r\n\tat org.apache.hadoop.fs.FileSystem.createFileSystem(FileSystem.java:1514)\r\n\tat org.apache.hadoop.fs.FileSystem.access$200(FileSystem.java:67)\r\n\tat org.apache.hadoop.fs.FileSystem$Cache.getInternal(FileSystem.java:1548)\r\n\tat org.apache.hadoop.fs.FileSystem$Cache.get(FileSystem.java:1530)\r\n\tat org.apache.hadoop.fs.FileSystem.get(FileSystem.java:228)\r\n\tat sb.HadoopRemote.main(HadoopRemote.java:35)\r\nCaused by: java.io.EOFException\r\n\tat java.io.DataInputStream.readInt(DataInputStream.java:375)\r\n\tat org.apache.hadoop.ipc.Client$Connection.receiveResponse(Client.java:819)\r\n\tat org.apache.hadoop.ipc.Client$Connection.run(Client.java:720)\r\n\r\n&lt;/pre&gt;","title":"What is the meaning of EOF exceptions in hadoop namenode connections from hbase/filesystem?","body":"<p>This is both a general question about java EOF exceptions, as well as Hadoop's EOF exception which is related to jar interoperability.  Comments and answers on either topic are acceptable. </p>\n\n<p><strong>Background</strong></p>\n\n<p>I'm noting some threads which discuss a cryptic exception, which is ultimately caused by a \"readInt\" method.  This exception seems to have some generic implications which are independent of hadoop, but ultimately, is caused by interoperability of Hadoop jars.</p>\n\n<p>In my case, I'm getting it when I try to create a new FileSystem object in hadoop, in java.  </p>\n\n<p><strong>Question</strong></p>\n\n<p>My question is : What is happening and why does the reading of an integer throw an EOF  exception ?  What \"File\" is this EOF exception referring to, and why would such an exception be thrown if two jars are not capable of interoperating  ?  </p>\n\n<p>Secondarily, I also would like to know how to fix this error so i can connect to and read/write hadoops filesystem using the hdfs protocol with the java api, remotely.... </p>\n\n<pre>\njava.io.IOException: Call to /10.0.1.37:50070 failed on local exception: java.io.EOFException\n    at org.apache.hadoop.ipc.Client.wrapException(Client.java:1139)\n    at org.apache.hadoop.ipc.Client.call(Client.java:1107)\n    at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:226)\n    at $Proxy0.getProtocolVersion(Unknown Source)\n    at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:398)\n    at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:384)\n    at org.apache.hadoop.hdfs.DFSClient.createRPCNamenode(DFSClient.java:111)\n    at org.apache.hadoop.hdfs.DFSClient.(DFSClient.java:213)\n    at org.apache.hadoop.hdfs.DFSClient.(DFSClient.java:180)\n    at org.apache.hadoop.hdfs.DistributedFileSystem.initialize(DistributedFileSystem.java:89)\n    at org.apache.hadoop.fs.FileSystem.createFileSystem(FileSystem.java:1514)\n    at org.apache.hadoop.fs.FileSystem.access$200(FileSystem.java:67)\n    at org.apache.hadoop.fs.FileSystem$Cache.getInternal(FileSystem.java:1548)\n    at org.apache.hadoop.fs.FileSystem$Cache.get(FileSystem.java:1530)\n    at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:228)\n    at sb.HadoopRemote.main(HadoopRemote.java:35)\nCaused by: java.io.EOFException\n    at java.io.DataInputStream.readInt(DataInputStream.java:375)\n    at org.apache.hadoop.ipc.Client$Connection.receiveResponse(Client.java:819)\n    at org.apache.hadoop.ipc.Client$Connection.run(Client.java:720)\n\n</pre>\n"},{"tags":["java","android","firebase","google-cloud-platform","firebase-authentication"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1660470684,"post_id":73349136,"comment_id":129536589,"body_markdown":"Nice question, btw.","body":"Nice question, btw."}],"answers":[{"tags":[],"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661073213,"creation_date":1660470545,"answer_id":73350623,"question_id":73349136,"body_markdown":"The [AuthResult][1] class contains a method called [getCredential()][2], which returns an object of type [AuthCredential][3]. However, this class, does **not** contain any getAccessToken(), or getSecret() methods. There is also **no** super class that might hold them.\r\n\r\nWhen you try to implement a sign-in mechanism with a provider, there are two operations that you should do:\r\n\r\n1. Get provider credentials.\r\n2. Go forward and perform the authentication. If you do it with Firebase, then you should pass them to the [FirebaseAuth#signInWithCredential(AuthCredential)][4] method.\r\n\r\nIf you need to get the values of the token and the secret, you have to get them from inside a [TwitterAuthToken][5] object. As you can see, this class exposes two public fields called `token` and `secret`.\r\n\r\nSo once you press a sign-in button and choose an account, you&#39;ll get as a result an object of type [Result&lt;TwitterSession&gt;][6]. As you can see, this is a generic class. This means that the `data` field inside the class is of type [TwitterSession][7], which is a class that extends [Session][8]. Now you&#39;ll be able to get both objects like this:\r\n\r\n    String token = session.getAuthToken().token;\r\n    String secret = session.getAuthToken().secret;\r\n\r\nNow you can go forward and create an [AuthCredential][3] object:\r\n\r\n    AuthCredential credential = TwitterAuthProvider.getCredential(token, secret);\r\n\r\nAnd perform the Firebase authentication with Twitter:\r\n\r\n    auth.signInWithCredential(credential).addOnCompleteListener(/* ... */);\r\n\r\n**Edit:**\r\n\r\nAccording to your comment:\r\n\r\n&gt; Twitter stopped supporting the SDK 4 years ago.\r\n\r\nYou&#39;re absolutely right. Getting back to Firebase, please note that there is a commented line there that says:\r\n\r\n&gt; The **OAuth** access token can also be retrieved.\r\n\r\nSo you should take a look into [OAuthCredential class][9], which exposes the [getAccessToken()][10] and [getSecret()][11] methods.\r\n\r\n\r\n  [1]: https://firebase.google.com/docs/reference/android/com/google/firebase/auth/AuthResult\r\n  [2]: https://firebase.google.com/docs/reference/android/com/google/firebase/auth/AuthResult#getCredential()\r\n  [3]: https://firebase.google.com/docs/reference/android/com/google/firebase/auth/AuthCredential\r\n  [4]: https://firebase.google.com/docs/reference/android/com/google/firebase/auth/FirebaseAuth#signInWithCredential(com.google.firebase.auth.AuthCredential)\r\n  [5]: https://github.com/twitter-archive/twitter-kit-android/blob/master/twitter-core/src/main/java/com/twitter/sdk/android/core/TwitterAuthToken.java\r\n  [6]: https://github.com/twitter-archive/twitter-kit-android/blob/master/twitter-core/src/main/java/com/twitter/sdk/android/core/Result.java\r\n  [7]: https://github.com/twitter-archive/twitter-kit-android/blob/master/twitter-core/src/main/java/com/twitter/sdk/android/core/TwitterSession.java\r\n  [8]: https://github.com/twitter-archive/twitter-kit-android/blob/master/twitter-core/src/main/java/com/twitter/sdk/android/core/Session.java\r\n  [9]: https://firebase.google.com/docs/reference/android/com/google/firebase/auth/OAuthCredential\r\n  [10]: https://firebase.google.com/docs/reference/android/com/google/firebase/auth/OAuthCredential#getAccessToken()\r\n  [11]: https://firebase.google.com/docs/reference/android/com/google/firebase/auth/OAuthCredential#getSecret()","title":"How can I get the token and secret in Firebase Twitter Login?","body":"<p>The <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/auth/AuthResult\" rel=\"nofollow noreferrer\">AuthResult</a> class contains a method called <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/auth/AuthResult#getCredential()\" rel=\"nofollow noreferrer\">getCredential()</a>, which returns an object of type <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/auth/AuthCredential\" rel=\"nofollow noreferrer\">AuthCredential</a>. However, this class, does <strong>not</strong> contain any getAccessToken(), or getSecret() methods. There is also <strong>no</strong> super class that might hold them.</p>\n<p>When you try to implement a sign-in mechanism with a provider, there are two operations that you should do:</p>\n<ol>\n<li>Get provider credentials.</li>\n<li>Go forward and perform the authentication. If you do it with Firebase, then you should pass them to the <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/auth/FirebaseAuth#signInWithCredential(com.google.firebase.auth.AuthCredential)\" rel=\"nofollow noreferrer\">FirebaseAuth#signInWithCredential(AuthCredential)</a> method.</li>\n</ol>\n<p>If you need to get the values of the token and the secret, you have to get them from inside a <a href=\"https://github.com/twitter-archive/twitter-kit-android/blob/master/twitter-core/src/main/java/com/twitter/sdk/android/core/TwitterAuthToken.java\" rel=\"nofollow noreferrer\">TwitterAuthToken</a> object. As you can see, this class exposes two public fields called <code>token</code> and <code>secret</code>.</p>\n<p>So once you press a sign-in button and choose an account, you'll get as a result an object of type <a href=\"https://github.com/twitter-archive/twitter-kit-android/blob/master/twitter-core/src/main/java/com/twitter/sdk/android/core/Result.java\" rel=\"nofollow noreferrer\">Result</a>. As you can see, this is a generic class. This means that the <code>data</code> field inside the class is of type <a href=\"https://github.com/twitter-archive/twitter-kit-android/blob/master/twitter-core/src/main/java/com/twitter/sdk/android/core/TwitterSession.java\" rel=\"nofollow noreferrer\">TwitterSession</a>, which is a class that extends <a href=\"https://github.com/twitter-archive/twitter-kit-android/blob/master/twitter-core/src/main/java/com/twitter/sdk/android/core/Session.java\" rel=\"nofollow noreferrer\">Session</a>. Now you'll be able to get both objects like this:</p>\n<pre><code>String token = session.getAuthToken().token;\nString secret = session.getAuthToken().secret;\n</code></pre>\n<p>Now you can go forward and create an <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/auth/AuthCredential\" rel=\"nofollow noreferrer\">AuthCredential</a> object:</p>\n<pre><code>AuthCredential credential = TwitterAuthProvider.getCredential(token, secret);\n</code></pre>\n<p>And perform the Firebase authentication with Twitter:</p>\n<pre><code>auth.signInWithCredential(credential).addOnCompleteListener(/* ... */);\n</code></pre>\n<p><strong>Edit:</strong></p>\n<p>According to your comment:</p>\n<blockquote>\n<p>Twitter stopped supporting the SDK 4 years ago.</p>\n</blockquote>\n<p>You're absolutely right. Getting back to Firebase, please note that there is a commented line there that says:</p>\n<blockquote>\n<p>The <strong>OAuth</strong> access token can also be retrieved.</p>\n</blockquote>\n<p>So you should take a look into <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/auth/OAuthCredential\" rel=\"nofollow noreferrer\">OAuthCredential class</a>, which exposes the <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/auth/OAuthCredential#getAccessToken()\" rel=\"nofollow noreferrer\">getAccessToken()</a> and <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/auth/OAuthCredential#getSecret()\" rel=\"nofollow noreferrer\">getSecret()</a> methods.</p>\n"}],"owner":{"account_id":2189290,"reputation":2657,"user_id":1936853,"accept_rate":0,"display_name":"yoonhok"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":440,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1661073213,"creation_date":1660451513,"question_id":73349136,"body_markdown":"I am developing an android app using Firebase Auth.\r\nMy app should provide a login feature using Twitter.\r\nSo I am developing Twitter Login using the Firebase Auth.\r\n\r\nI should send the Twitter user&#39;s token and the secret to our backend server. But I don&#39;t know how to get them.\r\n\r\nAccording to the firebase official documents, \r\n```kotlin\r\nfirebaseAuth\r\n    .startActivityForSignInWithProvider(/* activity= */ this, provider.build())\r\n    .addOnSuccessListener(\r\n        new OnSuccessListener&lt;AuthResult&gt;() {\r\n          @Override\r\n          public void onSuccess(AuthResult authResult) {\r\n            // User is signed in.\r\n            // IdP data available in\r\n            // authResult.getAdditionalUserInfo().getProfile().\r\n            // The OAuth access token can also be retrieved:\r\n            // authResult.getCredential().getAccessToken().\r\n            // The OAuth secret can be retrieved by calling:\r\n            // authResult.getCredential().getSecret().\r\n          }\r\n        })\r\n    .addOnFailureListener(\r\n        new OnFailureListener() {\r\n          @Override\r\n          public void onFailure(@NonNull Exception e) {\r\n            // Handle failure.\r\n          }\r\n        });\r\n```\r\n\r\n`onSuccess` callback returns `AuthResult`\r\nBut when I try to use below function: \r\n```kotlin\r\nauthResult.getCredential().getAccessToken()\r\nauthResult.getCredential().getSecret()\r\n```\r\n\r\nThere are no functions! How can I get them???","title":"How can I get the token and secret in Firebase Twitter Login?","body":"<p>I am developing an android app using Firebase Auth.\nMy app should provide a login feature using Twitter.\nSo I am developing Twitter Login using the Firebase Auth.</p>\n<p>I should send the Twitter user's token and the secret to our backend server. But I don't know how to get them.</p>\n<p>According to the firebase official documents,</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>firebaseAuth\n    .startActivityForSignInWithProvider(/* activity= */ this, provider.build())\n    .addOnSuccessListener(\n        new OnSuccessListener&lt;AuthResult&gt;() {\n          @Override\n          public void onSuccess(AuthResult authResult) {\n            // User is signed in.\n            // IdP data available in\n            // authResult.getAdditionalUserInfo().getProfile().\n            // The OAuth access token can also be retrieved:\n            // authResult.getCredential().getAccessToken().\n            // The OAuth secret can be retrieved by calling:\n            // authResult.getCredential().getSecret().\n          }\n        })\n    .addOnFailureListener(\n        new OnFailureListener() {\n          @Override\n          public void onFailure(@NonNull Exception e) {\n            // Handle failure.\n          }\n        });\n</code></pre>\n<p><code>onSuccess</code> callback returns <code>AuthResult</code>\nBut when I try to use below function:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>authResult.getCredential().getAccessToken()\nauthResult.getCredential().getSecret()\n</code></pre>\n<p>There are no functions! How can I get them???</p>\n"},{"tags":["java","calculator","degrees","radians"],"comments":[{"owner":{"account_id":10346755,"reputation":21971,"user_id":7631480,"display_name":"CryptoFool"},"score":1,"creation_date":1661069773,"post_id":73432677,"comment_id":129679814,"body_markdown":"Why not just leave PI out of the equation completely.  Compute `180/deg` and then print &quot;Pi/&quot; followed by the result of your calculation.","body":"Why not just leave PI out of the equation completely.  Compute <code>180&#47;deg</code> and then print &quot;Pi/&quot; followed by the result of your calculation."},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1661069896,"post_id":73432677,"comment_id":129679832,"body_markdown":"Or you want `pi / 2` `pi / 3`, `pi / 6` depending on specific results? Like 270 deg -&gt; `3 pi / 2`, 120 deg -&gt; `2 pi / 3` etc?","body":"Or you want <code>pi &#47; 2</code> <code>pi &#47; 3</code>, <code>pi &#47; 6</code> depending on specific results? Like 270 deg -&gt; <code>3 pi &#47; 2</code>, 120 deg -&gt; <code>2 pi &#47; 3</code> etc?"},{"owner":{"account_id":10346755,"reputation":21971,"user_id":7631480,"display_name":"CryptoFool"},"score":1,"creation_date":1661070282,"post_id":73432677,"comment_id":129679884,"body_markdown":"Your function returns just a number.  Per your print statement, you are assuming that your function returns radians. To satisfy those two requirements, you want to do exactly what you&#39;re showing above.  You can&#39;t return a decimal value that includes PI.  Why would you want to?  If you don&#39;t like displaying so many digits, there is an easy way to deal with that in Python.","body":"Your function returns just a number.  Per your print statement, you are assuming that your function returns radians. To satisfy those two requirements, you want to do exactly what you&#39;re showing above.  You can&#39;t return a decimal value that includes PI.  Why would you want to?  If you don&#39;t like displaying so many digits, there is an easy way to deal with that in Python."},{"owner":{"account_id":19864258,"reputation":33,"user_id":14551926,"display_name":"Username978"},"score":0,"creation_date":1661070445,"post_id":73432677,"comment_id":129679912,"body_markdown":"I would like the calculator to be able to simplify the answer, keeping the pi in the numerator (keeping it a fraction instead of a decimal unless that&#39;s not a thing)","body":"I would like the calculator to be able to simplify the answer, keeping the pi in the numerator (keeping it a fraction instead of a decimal unless that&#39;s not a thing)"},{"owner":{"account_id":10346755,"reputation":21971,"user_id":7631480,"display_name":"CryptoFool"},"score":2,"creation_date":1661070642,"post_id":73432677,"comment_id":129679943,"body_markdown":"It&#39;s not a standard thing in Python.  It&#39;s not a standard thing in programming in general.  If you aren&#39;t being asked explicitly to do this, I would forget about it.","body":"It&#39;s not a standard thing in Python.  It&#39;s not a standard thing in programming in general.  If you aren&#39;t being asked explicitly to do this, I would forget about it."}],"answers":[{"tags":[],"owner":{"account_id":26117452,"reputation":1,"user_id":19810346,"display_name":"vityaman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661073053,"creation_date":1661072974,"answer_id":73433009,"question_id":73432677,"body_markdown":"You can&#39;t set formatting up to convert degrees to radians with pi out of the box in java, but you can write your own function to do this.\r\n\r\n```\r\nWe know that \r\n360 degrees = 2 * PI   radians =&gt;\r\n180 degrees = PI       radians =&gt;\r\n1   degree  = PI / 180 radians =&gt;\r\n\r\nTherefore\r\nX degrees = PI * (X / 180) radians\r\n\r\nIn case degrees is an integer value \r\n  we can simplify a fraction X / 180\r\n  if gcd(X, 180) &gt; 1, gcd -- the greater common divider.\r\n  X / 180 = (X / gcd(X, 180)) / (180 / gcd(X, 180))\r\n\r\nThe code is something like this (don&#39;t forget to check corner cases):\r\n\r\nString formatDegreesAsFractionWithPI(int degrees) {\r\n  int gcd = gcd(degrees, 180);\r\n  return &quot;(&quot; + (degrees / gcd) + &quot; / &quot; + (180 / gcd) + &quot;) * PI&quot;\r\n}\r\n\r\nint gcd(int a, int b) = { ... }\r\n\r\nIn case degrees is a floating point number, \r\n  the problem is more complicated and my advice \r\n  is to read about &#39;converting decimal floating \r\n  point number to integers fraction&#39;.\r\n``` \r\n\r\nRelated questions: [gcd in java](https://stackoverflow.com/questions/4009198/java-get-greatest-common-divisor), [convert float to fraction (maybe works)](https://ru.stackoverflow.com/questions/748560/Перевод-десятичной-дроби-в-обычную-java)","title":"Calculating degrees to radians in terms of pi","body":"<p>You can't set formatting up to convert degrees to radians with pi out of the box in java, but you can write your own function to do this.</p>\n<pre><code>We know that \n360 degrees = 2 * PI   radians =&gt;\n180 degrees = PI       radians =&gt;\n1   degree  = PI / 180 radians =&gt;\n\nTherefore\nX degrees = PI * (X / 180) radians\n\nIn case degrees is an integer value \n  we can simplify a fraction X / 180\n  if gcd(X, 180) &gt; 1, gcd -- the greater common divider.\n  X / 180 = (X / gcd(X, 180)) / (180 / gcd(X, 180))\n\nThe code is something like this (don't forget to check corner cases):\n\nString formatDegreesAsFractionWithPI(int degrees) {\n  int gcd = gcd(degrees, 180);\n  return &quot;(&quot; + (degrees / gcd) + &quot; / &quot; + (180 / gcd) + &quot;) * PI&quot;\n}\n\nint gcd(int a, int b) = { ... }\n\nIn case degrees is a floating point number, \n  the problem is more complicated and my advice \n  is to read about 'converting decimal floating \n  point number to integers fraction'.\n</code></pre>\n<p>Related questions: <a href=\"https://stackoverflow.com/questions/4009198/java-get-greatest-common-divisor\">gcd in java</a>, <a href=\"https://ru.stackoverflow.com/questions/748560/%D0%9F%D0%B5%D1%80%D0%B5%D0%B2%D0%BE%D0%B4-%D0%B4%D0%B5%D1%81%D1%8F%D1%82%D0%B8%D1%87%D0%BD%D0%BE%D0%B9-%D0%B4%D1%80%D0%BE%D0%B1%D0%B8-%D0%B2-%D0%BE%D0%B1%D1%8B%D1%87%D0%BD%D1%83%D1%8E-java\">convert float to fraction (maybe works)</a></p>\n"}],"owner":{"account_id":19864258,"reputation":33,"user_id":14551926,"display_name":"Username978"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":646,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1661073053,"creation_date":1661069571,"question_id":73432677,"body_markdown":"I made a code converting degrees to radians following my teacher&#39;s format but I want to try to make it in terms of pi. Right now when I plug in 30 as my degrees the output is a loooong decimal but I want it to come out as pi/6. Is there a way to keep the pi symbol in the output?\r\n\r\nThis is my current code:\r\n```\r\n    public static double convertDeg(double deg)\r\n\t{\r\n\t\tdouble rad = deg * (Math.PI/180);\r\n\t\treturn rad;\r\n\t}\r\n```\r\nand\r\n\r\n```\r\nSystem.out.println(&quot;Degrees to radians: &quot;+Calculate.convertDeg(30));\r\n```\r\n\r\nThe output is: &quot;Degrees to radians: 0.5235987755982988&quot;","title":"Calculating degrees to radians in terms of pi","body":"<p>I made a code converting degrees to radians following my teacher's format but I want to try to make it in terms of pi. Right now when I plug in 30 as my degrees the output is a loooong decimal but I want it to come out as pi/6. Is there a way to keep the pi symbol in the output?</p>\n<p>This is my current code:</p>\n<pre><code>    public static double convertDeg(double deg)\n    {\n        double rad = deg * (Math.PI/180);\n        return rad;\n    }\n</code></pre>\n<p>and</p>\n<pre><code>System.out.println(&quot;Degrees to radians: &quot;+Calculate.convertDeg(30));\n</code></pre>\n<p>The output is: &quot;Degrees to radians: 0.5235987755982988&quot;</p>\n"},{"tags":["java","android","height","openweathermap","pressure"],"comments":[{"owner":{"account_id":25554374,"reputation":11,"user_id":19338198,"display_name":"Pavol Švančarek"},"score":0,"creation_date":1661075476,"post_id":73432953,"comment_id":129680802,"body_markdown":"@user16320675 Thank you! Anyways, I just need to calculate difference between two measured places at relatively same time. I was on 40 meter transmitter and difference between real mesurment and mine was only 1-3 meters. But I would like to improve that :)","body":"@user16320675 Thank you! Anyways, I just need to calculate difference between two measured places at relatively same time. I was on 40 meter transmitter and difference between real mesurment and mine was only 1-3 meters. But I would like to improve that :)"},{"owner":{"account_id":471603,"reputation":2835,"user_id":879508,"accept_rate":57,"display_name":"Ifor"},"score":0,"creation_date":1661163850,"post_id":73432953,"comment_id":129698252,"body_markdown":"If your only interested in the difference in height then your weather API service should be OK.  Just keep the same calibration for both measuremnts.  You may want to filter the raw presure readings a bit to improve the difference measurments e.g. take a seoconds worth each time.  I typically see about a +-1.5 m altitude variation between raw presure readings on my old Sony Z5c","body":"If your only interested in the difference in height then your weather API service should be OK.  Just keep the same calibration for both measuremnts.  You may want to filter the raw presure readings a bit to improve the difference measurments e.g. take a seoconds worth each time.  I typically see about a +-1.5 m altitude variation between raw presure readings on my old Sony Z5c"},{"owner":{"account_id":25554374,"reputation":11,"user_id":19338198,"display_name":"Pavol Švančarek"},"score":0,"creation_date":1661418450,"post_id":73432953,"comment_id":129769437,"body_markdown":"@Ifor I see +-0,1-0,2m. You mean to make average? Thats not a big problem. I am working on app that measures height of vertical object. App automaticly finds out if you go up hill or up the tree and mark the lowest height and the highest. Than When you walk away from the tree you get the height marked in google maps (maximum-minimum). Problem that I am facing is if you stay on the tree for e.g 30 minutes, pressure can change by one meter or so. And also I am woried about exponential grow of pressure as you go higher... if that formula is the same or I need to multiply 0,04 to every meter","body":"@Ifor I see +-0,1-0,2m. You mean to make average? Thats not a big problem. I am working on app that measures height of vertical object. App automaticly finds out if you go up hill or up the tree and mark the lowest height and the highest. Than When you walk away from the tree you get the height marked in google maps (maximum-minimum). Problem that I am facing is if you stay on the tree for e.g 30 minutes, pressure can change by one meter or so. And also I am woried about exponential grow of pressure as you go higher... if that formula is the same or I need to multiply 0,04 to every meter"},{"owner":{"account_id":471603,"reputation":2835,"user_id":879508,"accept_rate":57,"display_name":"Ifor"},"score":0,"creation_date":1661508869,"post_id":73432953,"comment_id":129794300,"body_markdown":"Yes an average over say a second.  Yes your right about the weather, time gap can not be too big between measurments.  For small readings differences like you want say 30m the inaccuracys of the model are probably not too bad.  I do a biking app and a 1000m deference can be affected more.  It all depends what ccuracy you need to get.","body":"Yes an average over say a second.  Yes your right about the weather, time gap can not be too big between measurments.  For small readings differences like you want say 30m the inaccuracys of the model are probably not too bad.  I do a biking app and a 1000m deference can be affected more.  It all depends what ccuracy you need to get."},{"owner":{"account_id":25554374,"reputation":11,"user_id":19338198,"display_name":"Pavol Švančarek"},"score":0,"creation_date":1661523048,"post_id":73432953,"comment_id":129799256,"body_markdown":"@Ifor for sure. I tried to average every like 20sec and you can literally see how the value just few minutes increases than stops for few minutes and again increases. I can see big difference after 30 minutes sometimes its over 3 meters.. Than I get api call and value goes down by 10 meters :D So I dont know what to do, cant receive api call while climbing and longer I am on the tree higher value it will be. Need probably let phone rest on one place for 5 minutes to calculate average increase (it will be like +0.05m for every minute) and then exponentially sum it up...","body":"@Ifor for sure. I tried to average every like 20sec and you can literally see how the value just few minutes increases than stops for few minutes and again increases. I can see big difference after 30 minutes sometimes its over 3 meters.. Than I get api call and value goes down by 10 meters :D So I dont know what to do, cant receive api call while climbing and longer I am on the tree higher value it will be. Need probably let phone rest on one place for 5 minutes to calculate average increase (it will be like +0.05m for every minute) and then exponentially sum it up..."}],"owner":{"account_id":25554374,"reputation":11,"user_id":19338198,"display_name":"Pavol Švančarek"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1661072611,"creation_date":1661072611,"question_id":73432953,"body_markdown":"I am trying to get as close height in meters as possible from atmospheric pressure sensor on android device. I am using https://openweathermap.org to get current pressure at sea level on my location and also temperature. Its much closer if i am not using standard pressure and sea level and temperature 15 but not the best. I am getting pressure from that api without decimals which affects the result quite a bit. Now I am off by like +-10 meters. What can I do to get closer numbers? \r\n\r\nMy ideas are:\r\n- Set starting point at my house to calibrate height\r\n- Find closer Api client\r\n- Calibrate using GPS height (average of values)\r\n- Find better formula\r\n- Get more sensors\r\n\r\nHere is the formula I am using:\r\n\r\n        double p0p = apiPressure / currentPressure;\r\n        double mocnina = 1/5.257;\r\n        p0p = Math.pow(p0p, mocnina);\r\n        p0p = p0p - 1;\r\n        double citatel = p0p*(apiTemp + 273.15);\r\n        double result = citatel / 0.0065;","title":"Get height in meters from pressure sensor on android with weather API","body":"<p>I am trying to get as close height in meters as possible from atmospheric pressure sensor on android device. I am using <a href=\"https://openweathermap.org\" rel=\"nofollow noreferrer\">https://openweathermap.org</a> to get current pressure at sea level on my location and also temperature. Its much closer if i am not using standard pressure and sea level and temperature 15 but not the best. I am getting pressure from that api without decimals which affects the result quite a bit. Now I am off by like +-10 meters. What can I do to get closer numbers?</p>\n<p>My ideas are:</p>\n<ul>\n<li>Set starting point at my house to calibrate height</li>\n<li>Find closer Api client</li>\n<li>Calibrate using GPS height (average of values)</li>\n<li>Find better formula</li>\n<li>Get more sensors</li>\n</ul>\n<p>Here is the formula I am using:</p>\n<pre><code>    double p0p = apiPressure / currentPressure;\n    double mocnina = 1/5.257;\n    p0p = Math.pow(p0p, mocnina);\n    p0p = p0p - 1;\n    double citatel = p0p*(apiTemp + 273.15);\n    double result = citatel / 0.0065;\n</code></pre>\n"},{"tags":["java","android","string"],"comments":[{"owner":{"account_id":12924971,"reputation":2766,"user_id":9346054,"accept_rate":100,"display_name":"Ticherhaz FreePalestine"},"score":0,"creation_date":1657929993,"post_id":73000372,"comment_id":128934278,"body_markdown":"Hi there, so you are not using `TextView` to display the `strMessage`?","body":"Hi there, so you are not using <code>TextView</code> to display the <code>strMessage</code>?"},{"owner":{"account_id":9051606,"reputation":19,"user_id":14263294,"display_name":"His R.H"},"score":0,"creation_date":1657930435,"post_id":73000372,"comment_id":128934333,"body_markdown":"No I&#39;m using `String strMessage = snapshot1.child(&quot;message&quot;).getValue().toString();`","body":"No I&#39;m using <code>String strMessage = snapshot1.child(&quot;message&quot;).getValue().toString();</code>"},{"owner":{"account_id":12924971,"reputation":2766,"user_id":9346054,"accept_rate":100,"display_name":"Ticherhaz FreePalestine"},"score":0,"creation_date":1657930648,"post_id":73000372,"comment_id":128934346,"body_markdown":"and after that, you don&#39;t display the `strMessage` at the `TextView`?","body":"and after that, you don&#39;t display the <code>strMessage</code> at the <code>TextView</code>?"},{"owner":{"account_id":9051606,"reputation":19,"user_id":14263294,"display_name":"His R.H"},"score":0,"creation_date":1657930863,"post_id":73000372,"comment_id":128934370,"body_markdown":"Ohh ok I forgot I had an adapter. Yeah it&#39;s a textview. `public TextView senderMessageText, receiverMessageText;` `senderMessageText = itemView.findViewById(R.id.sender_message_text);\n            receiverMessageText = itemView.findViewById(R.id.receiver_message_text);`","body":"Ohh ok I forgot I had an adapter. Yeah it&#39;s a textview. <code>public TextView senderMessageText, receiverMessageText;</code> <code>senderMessageText = itemView.findViewById(R.id.sender_message_text);             receiverMessageText = itemView.findViewById(R.id.receiver_message_text);</code>"},{"owner":{"account_id":12924971,"reputation":2766,"user_id":9346054,"accept_rate":100,"display_name":"Ticherhaz FreePalestine"},"score":0,"creation_date":1657931935,"post_id":73000372,"comment_id":128934466,"body_markdown":"So you can check out their accomplish goal.","body":"So you can check out their accomplish goal."}],"answers":[{"tags":[],"owner":{"account_id":13113788,"reputation":10080,"user_id":9473786,"display_name":"Tyler V"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1658789240,"creation_date":1657937722,"answer_id":73001095,"question_id":73000372,"body_markdown":"There are two common ways to do this. One, like you have done, is to add html to the string. The second is to use the TextView&#39;s auto link mask feature.\r\n\r\n**Using HTML**\r\n\r\nOnce you have identified URLs in your incoming string and added the appropriate html tags to turn them into links, you just need to use `HtmlCompat` when you go to actually display it in the `TextView`. You also need to make sure to call `setMovementMethod` or you won&#39;t be able to click the link. The advantage of using HTML is that you can have the link text be a readable phrase instead of a URL.\r\n\r\n```java\r\nString txt = &quot;This is &lt;a href=\\&quot;https://www.google.com\\&quot;&gt;www.google.com&lt;/a&gt;&quot;;\r\n\r\nTextView link = findViewById(R.id.link);\r\nlink.setMovementMethod(LinkMovementMethod.getInstance());\r\nlink.setText(HtmlCompat.fromHtml(txt,HtmlCompat.FROM_HTML_MODE_LEGACY));\r\n```\r\n\r\nIf you choose to go this route, your existing code just needs to be modified a bit to save the HTML string in the messages list passed to the adapter, then add the TextView calls above inside the adapter when you set the text.\r\n\r\n```java\r\nString [] parts = strMessage.split(&quot;\\\\s+&quot;);\r\n\r\n// replace URL parts with html links\r\nfor( int i = 0; i &lt; parts.length; ++i ) {\r\n    if(urlPattern.matcher(parts[i]).matches()) {\r\n        parts[i] = &quot;&lt;a href=\\&quot;&quot; + parts[i] + &quot;\\&quot;&gt;&quot; + parts[i] + &quot;&lt;/a&gt;&quot;;\r\n    }\r\n}\r\n\r\n// re-join parts back into a single string\r\nString htmlMessage = String.join(&quot; &quot;, parts);\r\n\r\n// save a list of html strings to pass to your adapter\r\nhtmlMessageStrings.add(htmlMessage);\r\n```\r\n\r\n**Using Link Mask**\r\n\r\nThis method doesn&#39;t require you to edit the string at all. If you use `Linkify.ALL` it also recognizes things like web links, emails, phone numbers, and physical addresses - not just web links. If you only want it to recognize web links use `Linkify.WEB_URLS` instead. This requires a lot less code on your part - you no longer have to try to parse the string for links.\r\n\r\n```java        \r\nString txt = &quot;This is www.google.com&quot;; // no need to modify the string\r\n\r\nTextView link = findViewById(R.id.link);\r\nlink.setAutoLinkMask(Linkify.ALL); // or Linkify.WEB_URLS\r\nlink.setText(txt);\r\n```\r\n\r\nYou can also add `android:autoLink=&quot;all&quot;` to the `TextView` XML definition instead of calling it in-code.\r\n\r\nBoth methods produce this output \r\n\r\n[![link output][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/G25o6.png","title":"Make link inside of string clickable: Java","body":"<p>There are two common ways to do this. One, like you have done, is to add html to the string. The second is to use the TextView's auto link mask feature.</p>\n<p><strong>Using HTML</strong></p>\n<p>Once you have identified URLs in your incoming string and added the appropriate html tags to turn them into links, you just need to use <code>HtmlCompat</code> when you go to actually display it in the <code>TextView</code>. You also need to make sure to call <code>setMovementMethod</code> or you won't be able to click the link. The advantage of using HTML is that you can have the link text be a readable phrase instead of a URL.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String txt = &quot;This is &lt;a href=\\&quot;https://www.google.com\\&quot;&gt;www.google.com&lt;/a&gt;&quot;;\n\nTextView link = findViewById(R.id.link);\nlink.setMovementMethod(LinkMovementMethod.getInstance());\nlink.setText(HtmlCompat.fromHtml(txt,HtmlCompat.FROM_HTML_MODE_LEGACY));\n</code></pre>\n<p>If you choose to go this route, your existing code just needs to be modified a bit to save the HTML string in the messages list passed to the adapter, then add the TextView calls above inside the adapter when you set the text.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String [] parts = strMessage.split(&quot;\\\\s+&quot;);\n\n// replace URL parts with html links\nfor( int i = 0; i &lt; parts.length; ++i ) {\n    if(urlPattern.matcher(parts[i]).matches()) {\n        parts[i] = &quot;&lt;a href=\\&quot;&quot; + parts[i] + &quot;\\&quot;&gt;&quot; + parts[i] + &quot;&lt;/a&gt;&quot;;\n    }\n}\n\n// re-join parts back into a single string\nString htmlMessage = String.join(&quot; &quot;, parts);\n\n// save a list of html strings to pass to your adapter\nhtmlMessageStrings.add(htmlMessage);\n</code></pre>\n<p><strong>Using Link Mask</strong></p>\n<p>This method doesn't require you to edit the string at all. If you use <code>Linkify.ALL</code> it also recognizes things like web links, emails, phone numbers, and physical addresses - not just web links. If you only want it to recognize web links use <code>Linkify.WEB_URLS</code> instead. This requires a lot less code on your part - you no longer have to try to parse the string for links.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String txt = &quot;This is www.google.com&quot;; // no need to modify the string\n\nTextView link = findViewById(R.id.link);\nlink.setAutoLinkMask(Linkify.ALL); // or Linkify.WEB_URLS\nlink.setText(txt);\n</code></pre>\n<p>You can also add <code>android:autoLink=&quot;all&quot;</code> to the <code>TextView</code> XML definition instead of calling it in-code.</p>\n<p>Both methods produce this output</p>\n<p><a href=\"https://i.stack.imgur.com/G25o6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/G25o6.png\" alt=\"link output\" /></a></p>\n"}],"owner":{"account_id":9051606,"reputation":19,"user_id":14263294,"display_name":"His R.H"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1037,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73001095,"answer_count":1,"score":1,"last_activity_date":1661071803,"creation_date":1657926775,"question_id":73000372,"body_markdown":"I am creating a messaging system in Java using android studio.\r\n\r\nPeople can send messages back and forth. But if they send a link, it just shows up as regular text. I want the part that is the link to show up as a clickable link and the rest just text.\r\n\r\nI checked all day on this site and others but no seems to do this in the way I&#39;m trying too. Most of the answers I see are people using a `TexView` to accomplish their goal. I&#39;m using a string. Can someone please help me figure this out ?\r\n\r\n    private void showMessages(){\r\n\r\n        DatabaseReference userMessageKeyRef = RootRef.child(&quot;Messages&quot;).child(messageSenderID).child(messageReceiverID);\r\n        userMessageKeyRef.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                for (DataSnapshot snapshot1 : snapshot.getChildren()) {\r\n\r\n                     Messages messages = new Messages();\r\n                     String strMessage = snapshot1.child(&quot;message&quot;).getValue().toString();\r\n                     String strFrom = snapshot1.child(&quot;from&quot;).getValue().toString();\r\n                     String strType = snapshot1.child(&quot;type&quot;).getValue().toString();\r\n                     messages.setMessage(strMessage);\r\n                     messages.setFrom(strFrom);\r\n                     messages.setType(strType);\r\n                     messagesList.add(messages);\r\n\r\n                    // Pattern for recognizing a URL, based off RFC 3986\r\n                    final Pattern urlPattern = Pattern.compile(\r\n                            &quot;(?:^|[\\\\W])((ht|f)tp(s?):\\\\/\\\\/|www\\\\.)&quot;\r\n                                    + &quot;(([\\\\w\\\\-]+\\\\.){1,}?([\\\\w\\\\-.~]+\\\\/?)*&quot;\r\n                                    + &quot;[\\\\p{Alnum}.,%_=?&amp;#\\\\-+()\\\\[\\\\]\\\\*$~@!:/{};&#39;]*)&quot;,\r\n                            Pattern.CASE_INSENSITIVE | Pattern.MULTILINE | Pattern.DOTALL);\r\n\r\n                    // separate input by spaces ( URLs don&#39;t have spaces )\r\n                    String [] parts = strMessage.split(&quot;\\\\s+&quot;);\r\n\r\n                    // get every part\r\n                    for( String item : parts ) {\r\n                        if(urlPattern.matcher(item).matches()) {\r\n                            //it&#39;s a good url\r\n                            System.out.print(&quot;&lt;a href=\\&quot;&quot; + item + &quot;\\&quot;&gt;&quot;+ item + &quot;&lt;/a&gt; &quot; );\r\n                        } else {\r\n                            // it isn&#39;t a url\r\n                            System.out.print(item + &quot; &quot;);\r\n                        }\r\n                    }\r\n                    \r\n                }\r\n                messageAdapter = new MessageAdapter(ChatActivity.this,messagesList);\r\n                userMessagesList.setAdapter(messageAdapter);\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n            }\r\n        });\r\n    }","title":"Make link inside of string clickable: Java","body":"<p>I am creating a messaging system in Java using android studio.</p>\n<p>People can send messages back and forth. But if they send a link, it just shows up as regular text. I want the part that is the link to show up as a clickable link and the rest just text.</p>\n<p>I checked all day on this site and others but no seems to do this in the way I'm trying too. Most of the answers I see are people using a <code>TexView</code> to accomplish their goal. I'm using a string. Can someone please help me figure this out ?</p>\n<pre><code>private void showMessages(){\n\n    DatabaseReference userMessageKeyRef = RootRef.child(&quot;Messages&quot;).child(messageSenderID).child(messageReceiverID);\n    userMessageKeyRef.addValueEventListener(new ValueEventListener() {\n        @Override\n        public void onDataChange(@NonNull DataSnapshot snapshot) {\n            for (DataSnapshot snapshot1 : snapshot.getChildren()) {\n\n                 Messages messages = new Messages();\n                 String strMessage = snapshot1.child(&quot;message&quot;).getValue().toString();\n                 String strFrom = snapshot1.child(&quot;from&quot;).getValue().toString();\n                 String strType = snapshot1.child(&quot;type&quot;).getValue().toString();\n                 messages.setMessage(strMessage);\n                 messages.setFrom(strFrom);\n                 messages.setType(strType);\n                 messagesList.add(messages);\n\n                // Pattern for recognizing a URL, based off RFC 3986\n                final Pattern urlPattern = Pattern.compile(\n                        &quot;(?:^|[\\\\W])((ht|f)tp(s?):\\\\/\\\\/|www\\\\.)&quot;\n                                + &quot;(([\\\\w\\\\-]+\\\\.){1,}?([\\\\w\\\\-.~]+\\\\/?)*&quot;\n                                + &quot;[\\\\p{Alnum}.,%_=?&amp;#\\\\-+()\\\\[\\\\]\\\\*$~@!:/{};']*)&quot;,\n                        Pattern.CASE_INSENSITIVE | Pattern.MULTILINE | Pattern.DOTALL);\n\n                // separate input by spaces ( URLs don't have spaces )\n                String [] parts = strMessage.split(&quot;\\\\s+&quot;);\n\n                // get every part\n                for( String item : parts ) {\n                    if(urlPattern.matcher(item).matches()) {\n                        //it's a good url\n                        System.out.print(&quot;&lt;a href=\\&quot;&quot; + item + &quot;\\&quot;&gt;&quot;+ item + &quot;&lt;/a&gt; &quot; );\n                    } else {\n                        // it isn't a url\n                        System.out.print(item + &quot; &quot;);\n                    }\n                }\n                \n            }\n            messageAdapter = new MessageAdapter(ChatActivity.this,messagesList);\n            userMessagesList.setAdapter(messageAdapter);\n        }\n\n        @Override\n        public void onCancelled(@NonNull DatabaseError error) {\n        }\n    });\n}\n</code></pre>\n"},{"tags":["java","android","api"],"comments":[{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":1,"creation_date":1661044620,"post_id":73430934,"comment_id":129677130,"body_markdown":"There is no API for it.  Android runs on Linux so you can do it at that level, but you&#39;d need a rooted app writing directly to the /dev files to simulate input.  There is purposely no API to do this from another app for security reasons.","body":"There is no API for it.  Android runs on Linux so you can do it at that level, but you&#39;d need a rooted app writing directly to the /dev files to simulate input.  There is purposely no API to do this from another app for security reasons."},{"owner":{"account_id":15669400,"reputation":33,"user_id":11306363,"display_name":"Văn Chiến Trương"},"score":0,"creation_date":1661072126,"post_id":73430934,"comment_id":129680170,"body_markdown":"Hi Gabe, thanks for quick reply. It&#39;s sad to know. Since there is no public way to access /dev/ directory of current android version, I think I will stick with adb until there is another option.","body":"Hi Gabe, thanks for quick reply. It&#39;s sad to know. Since there is no public way to access /dev/ directory of current android version, I think I will stick with adb until there is another option."}],"owner":{"account_id":15669400,"reputation":33,"user_id":11306363,"display_name":"Văn Chiến Trương"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1661072797,"answer_count":0,"score":0,"last_activity_date":1661071640,"creation_date":1661041496,"question_id":73430934,"body_markdown":"I have a few experiences on Windows automation using Windows API and now I want to make some automations in Android apps.\r\n\r\nAt the moment, I am using ADB and it works great, but it needs my phone rooted.\r\nTherefore, I want to deep dive into the lower API like Windows API.\r\nI know there is Android API, but I can&#39;t find any materials to simulate events outside the source code of application.\r\n\r\nWhat are some references related to it?","title":"What is equivalent for Windows API in Android?","body":"<p>I have a few experiences on Windows automation using Windows API and now I want to make some automations in Android apps.</p>\n<p>At the moment, I am using ADB and it works great, but it needs my phone rooted.\nTherefore, I want to deep dive into the lower API like Windows API.\nI know there is Android API, but I can't find any materials to simulate events outside the source code of application.</p>\n<p>What are some references related to it?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2094057,"reputation":506074,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"score":3,"creation_date":1661066070,"post_id":73432347,"comment_id":129679303,"body_markdown":"Why are you calling your custom class `StringBuilder`, which collides with a core Java class of the same name?  Your code should be working, other than this potential problem.","body":"Why are you calling your custom class <code>StringBuilder</code>, which collides with a core Java class of the same name?  Your code should be working, other than this potential problem."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1661066188,"post_id":73432347,"comment_id":129679320,"body_markdown":"What does &quot;not working&quot; mean exactly?","body":"What does &quot;not working&quot; mean exactly?"},{"owner":{"account_id":21152597,"reputation":9,"user_id":15552576,"display_name":"Shivam Singh"},"score":0,"creation_date":1661068085,"post_id":73432347,"comment_id":129679593,"body_markdown":"It says &quot; method append(char) is undefined for the type StingBuilder&quot;","body":"It says &quot; method append(char) is undefined for the type StingBuilder&quot;"}],"owner":{"account_id":21152597,"reputation":9,"user_id":15552576,"display_name":"Shivam Singh"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":143,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1661071454,"answer_count":0,"score":0,"last_activity_date":1661071589,"creation_date":1661065929,"question_id":73432347,"body_markdown":"```\r\npublic class StringBuilder {\r\n    public static void main(String[] args) {\r\n        StringBuilder sb = new StringBuilder();\r\n        for(char ch=&#39;a&#39;; ch&lt;=&#39;z&#39;; ch++){\r\n            sb.append(ch);\r\n        }\r\n        System.out.println(sb);\r\n    }    \r\n}\r\n```","title":"Append Not working in StringBuilder in Java It says &quot;method append(char) is undefined for the type StringBuilder&quot;","body":"<pre><code>public class StringBuilder {\n    public static void main(String[] args) {\n        StringBuilder sb = new StringBuilder();\n        for(char ch='a'; ch&lt;='z'; ch++){\n            sb.append(ch);\n        }\n        System.out.println(sb);\n    }    \n}\n</code></pre>\n"},{"tags":["java","package"],"owner":{"account_id":1117208,"reputation":962,"user_id":1106285,"accept_rate":81,"display_name":"jaw"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1661071451,"creation_date":1410944105,"question_id":25886196,"body_markdown":"We are providing software for an embedded JavaME device. Besides standard JavaME APIs, this device provides some proprietary API&#39;s which were in packages like `com.somecompany.icm.io` for example.\r\n\r\nBecause of legal issues, the packages were renamed in later firmware revisions to `com.othercompany.io` e.g. but with the same class names, interfaces and functionality.\r\n\r\nNow, what I could do is running `sed` or similar over our code base and rename every required package and then commit it to our VCS as &quot;the new&quot; version. Unfortunately, we need to provide updates for both firmware revisions so bug fixes or even features then needs to be merged back into the old version.\r\n\r\nI was thinking about having a special ANT build task that first copies all sources to another directory, runs the `sed` script and then compiles it again. This is not very elegant but may work (haven&#39;t done this yet).\r\n\r\nI know this might be a very special case, but maybe someone can come up with a smarter solution.\r\n\r\n**[UPDATE]**\r\n\r\nI&#39;ve been thinking about this for a while and came up with the following idea: I wrote a small application that contains the following line:\r\n\r\n\ttry {\r\n\t\tSystem.out.println(&quot;[somecompany] File &#39;foo&#39; exists: &quot; + com.somecompany.icm.io.File.exists(&quot;foo&quot;));\r\n\t} catch(NoClassDefFoundError ex) {\r\n\t\tSystem.out.println(&quot;[othercompany] File &#39;foo&#39; exists: &quot; + com.othercompany.io.File.exists(&quot;foo&quot;));\r\n\t}\r\n\r\nI&#39;ve compiled this providing both the libraries of somecompany and othercompany as classpath. `File.exists` is just some arbitrary static method to test this idea.\r\nAnd it actually does work on both target devices:\r\n\r\nOld firmware:\r\n\r\n    [somecompany] File &#39;foo&#39; exists: false\r\n\r\nNew firmware:\r\n\r\n    [othercompany] File &#39;foo&#39; exists: false\r\n\r\nHowever, this does only work for static methods and class initialization. However, this won&#39;t work on class instances and instance method access.\r\n\r\nNow, one thing that could be done is writing two versions of a factory classes for each firmware version. Then, I could use the code above to determine at runtime which firmware is running and load the right factory class.\r\n\r\n    MyFactory factory;\r\n\ttry {\r\n\t\tcom.somecompany.icm.io.File.exists(&quot;foo&quot;);\r\n        factory = new SomeCompanyFactory();\r\n\t} catch(NoClassDefFoundError ex) {\r\n        factory = new OtherCompanyFactory();\r\n\t}\r\n    // use the factory to create instances of classes of the right package\r\n\r\nObviously, the instances have to be wrapped in classes that implement a common interface which is applicable in my case.\r\n\r\nThis would result in a bit of class overhead (in terms of number of classes and jar file size) but since these classes won&#39;t be loaded there should be no effect (or only a little) on the memory usage (We have very limited RAM on this target).","title":"How to maintain different SW versions with different package names","body":"<p>We are providing software for an embedded JavaME device. Besides standard JavaME APIs, this device provides some proprietary API's which were in packages like <code>com.somecompany.icm.io</code> for example.</p>\n\n<p>Because of legal issues, the packages were renamed in later firmware revisions to <code>com.othercompany.io</code> e.g. but with the same class names, interfaces and functionality.</p>\n\n<p>Now, what I could do is running <code>sed</code> or similar over our code base and rename every required package and then commit it to our VCS as \"the new\" version. Unfortunately, we need to provide updates for both firmware revisions so bug fixes or even features then needs to be merged back into the old version.</p>\n\n<p>I was thinking about having a special ANT build task that first copies all sources to another directory, runs the <code>sed</code> script and then compiles it again. This is not very elegant but may work (haven't done this yet).</p>\n\n<p>I know this might be a very special case, but maybe someone can come up with a smarter solution.</p>\n\n<p><strong>[UPDATE]</strong></p>\n\n<p>I've been thinking about this for a while and came up with the following idea: I wrote a small application that contains the following line:</p>\n\n<pre><code>try {\n    System.out.println(\"[somecompany] File 'foo' exists: \" + com.somecompany.icm.io.File.exists(\"foo\"));\n} catch(NoClassDefFoundError ex) {\n    System.out.println(\"[othercompany] File 'foo' exists: \" + com.othercompany.io.File.exists(\"foo\"));\n}\n</code></pre>\n\n<p>I've compiled this providing both the libraries of somecompany and othercompany as classpath. <code>File.exists</code> is just some arbitrary static method to test this idea.\nAnd it actually does work on both target devices:</p>\n\n<p>Old firmware:</p>\n\n<pre><code>[somecompany] File 'foo' exists: false\n</code></pre>\n\n<p>New firmware:</p>\n\n<pre><code>[othercompany] File 'foo' exists: false\n</code></pre>\n\n<p>However, this does only work for static methods and class initialization. However, this won't work on class instances and instance method access.</p>\n\n<p>Now, one thing that could be done is writing two versions of a factory classes for each firmware version. Then, I could use the code above to determine at runtime which firmware is running and load the right factory class.</p>\n\n<pre><code>MyFactory factory;\ntry {\n    com.somecompany.icm.io.File.exists(\"foo\");\n    factory = new SomeCompanyFactory();\n} catch(NoClassDefFoundError ex) {\n    factory = new OtherCompanyFactory();\n}\n// use the factory to create instances of classes of the right package\n</code></pre>\n\n<p>Obviously, the instances have to be wrapped in classes that implement a common interface which is applicable in my case.</p>\n\n<p>This would result in a bit of class overhead (in terms of number of classes and jar file size) but since these classes won't be loaded there should be no effect (or only a little) on the memory usage (We have very limited RAM on this target).</p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":256642,"reputation":6092,"user_id":537503,"accept_rate":42,"display_name":"Andy Dufresne"},"score":0,"creation_date":1368536383,"post_id":11983789,"comment_id":23761898,"body_markdown":"So you suggest a call to awaitTermination() as a solution? But how do figure out how long to wait?","body":"So you suggest a call to awaitTermination() as a solution? But how do figure out how long to wait?"}],"answers":[{"tags":[],"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1345107874,"creation_date":1345107874,"answer_id":11983859,"question_id":11983789,"body_markdown":"I strongly suggest you use a robust mechanism to count down the latch. Use an all-encompassing `try-finally { latch.countDown(); }` Detect errors in threads using a separate mechanism.","title":"How to stop all the running threads, if one of those throws an Exception?","body":"<p>I strongly suggest you use a robust mechanism to count down the latch. Use an all-encompassing <code>try-finally { latch.countDown(); }</code> Detect errors in threads using a separate mechanism.</p>\n"},{"tags":[],"owner":{"account_id":63162,"reputation":102381,"user_id":187141,"accept_rate":82,"display_name":"yegor256"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1345108255,"creation_date":1345108255,"answer_id":11983972,"question_id":11983789,"body_markdown":"I think that you will need one more thread, call it a &quot;Watcher&quot;, which will check the value of an `AtomicBoolean` for `true`. Once it&#39;s set - you will shutdown the main execution service. Keep in mind that shutdown mechanism won&#39;t guarantee an immediate stop of all threads. Read this, for example: https://stackoverflow.com/questions/3332832","title":"How to stop all the running threads, if one of those throws an Exception?","body":"<p>I think that you will need one more thread, call it a \"Watcher\", which will check the value of an <code>AtomicBoolean</code> for <code>true</code>. Once it's set - you will shutdown the main execution service. Keep in mind that shutdown mechanism won't guarantee an immediate stop of all threads. Read this, for example: <a href=\"https://stackoverflow.com/questions/3332832\">Graceful shutdown of threads and executor</a></p>\n"},{"tags":[],"owner":{"account_id":162919,"reputation":53273,"user_id":384706,"accept_rate":64,"display_name":"Cratylus"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1345108518,"creation_date":1345108518,"answer_id":11984046,"question_id":11983789,"body_markdown":"I think you need to restructure your code. Take a look into [ExecutorService#invokeAny][1]  \r\n\r\n&gt; Executes the given tasks, returning the result of one that has\r\n&gt; completed successfully (i.e., without throwing an exception), if any\r\n&gt; do. Upon normal or exceptional return, tasks that have not completed\r\n&gt; are cancelled. The results of this method are undefined if the given\r\n&gt; collection is modified while this operation is in progress.    \r\n\r\nThis seems to be the behavior you need. And you don&#39;t need a `CountDownLatch` as `main` will block in the `invokeAny`\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html#invokeAny%28java.util.Collection%29","title":"How to stop all the running threads, if one of those throws an Exception?","body":"<p>I think you need to restructure your code. Take a look into <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html#invokeAny%28java.util.Collection%29\" rel=\"nofollow\">ExecutorService#invokeAny</a>  </p>\n\n<blockquote>\n  <p>Executes the given tasks, returning the result of one that has\n  completed successfully (i.e., without throwing an exception), if any\n  do. Upon normal or exceptional return, tasks that have not completed\n  are cancelled. The results of this method are undefined if the given\n  collection is modified while this operation is in progress.    </p>\n</blockquote>\n\n<p>This seems to be the behavior you need. And you don't need a <code>CountDownLatch</code> as <code>main</code> will block in the <code>invokeAny</code></p>\n"},{"tags":[],"owner":{"account_id":40221,"reputation":32100,"user_id":116509,"accept_rate":100,"display_name":"artbristol"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1661070647,"creation_date":1345109888,"answer_id":11984456,"question_id":11983789,"body_markdown":"Use an `ExecutorCompletionService`, complete with an `ExecutorService` that outlives the duration of the tasks (i.e. it doesn&#39;t get shut down afterwards):\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.Iterator;\r\n    import java.util.List;\r\n    import java.util.concurrent.Callable;\r\n    import java.util.concurrent.CompletionService;\r\n    import java.util.concurrent.ExecutionException;\r\n    import java.util.concurrent.ExecutorCompletionService;\r\n    import java.util.concurrent.ExecutorService;\r\n    import java.util.concurrent.Executors;\r\n    import java.util.concurrent.Future;\r\n    \r\n    class Threader {\r\n    \r\n    \tstatic ExecutorService service = Executors.newCachedThreadPool();\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tnew Threader().start();\r\n    \t\tservice.shutdown();\r\n    \t}\r\n    \r\n    \tprivate void start() {\r\n    \t\tCompletionService&lt;Void&gt; completionService = new ExecutorCompletionService&lt;Void&gt;(\r\n    \t\t\t\tservice);\r\n    \t\t/*\r\n    \t\t * Holds all the futures for the submitted tasks\r\n    \t\t */\r\n    \t\tList&lt;Future&lt;Void&gt;&gt; results = new ArrayList&lt;Future&lt;Void&gt;&gt;();\r\n    \r\n    \t\tfor (int i = 0; i &lt; 3; i++) {\r\n    \t\t\tfinal int callableNumber = i;\r\n    \r\n    \t\t\tresults.add(completionService.submit(new Callable&lt;Void&gt;() {\r\n    \t\t\t\t @Override\r\n    \t\t\t\t public Void call() throws Exception {\r\n    \t\t\t\t\t System.out.println(&quot;Task &quot; + callableNumber\r\n    \t\t\t\t\t\t\t + &quot; in progress&quot;);\r\n    \t\t\t\t\t try {\r\n    \t\t\t\t\t\t Thread.sleep(callableNumber * 1000);\r\n    \t\t\t\t\t } catch (InterruptedException ex) {\r\n    \t\t\t\t\t\t System.out.println(&quot;Task &quot; + callableNumber\r\n    \t\t\t\t\t\t\t\t + &quot; cancelled&quot;);\r\n    \t\t\t\t\t\t return null;\r\n    \t\t\t\t\t }\r\n    \t\t\t\t\t if (callableNumber == 1) {\r\n    \t\t\t\t\t\t throw new Exception(&quot;Wrong answer for task &quot;\r\n    \t\t\t\t\t\t\t\t + callableNumber);\r\n    \t\t\t\t\t }\r\n    \t\t\t\t\t System.out.println(&quot;Task &quot; + callableNumber + &quot; complete&quot;);\r\n    \t\t\t\t\t return null;\r\n    \t\t\t\t }\r\n    \t\t\t }));\r\n    \t\t}\r\n    \r\n    \t\tboolean complete = false;\r\n    \t\twhile (!complete) {\r\n    \t\t\tcomplete = true;\r\n    \t\t\tIterator&lt;Future&lt;Void&gt;&gt; futuresIt = results.iterator();\r\n    \t\t\twhile (futuresIt.hasNext()) {\r\n    \t\t\t\tif (futuresIt.next().isDone()) {\r\n    \t\t\t\t\tfuturesIt.remove();\r\n    \t\t\t\t} else {\r\n    \t\t\t\t\tcomplete = false;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \r\n    \t\t\tif (!results.isEmpty()) {\r\n    \t\t\t\ttry {\r\n    \t\t\t\t\t/*\r\n    \t\t\t\t\t * Examine results of next completed task\r\n    \t\t\t\t\t */\r\n    \t\t\t\t\tcompletionService.take().get();\r\n    \t\t\t\t} catch (InterruptedException e) {\r\n    \t\t\t\t\t/*\r\n    \t\t\t\t\t * Give up - interrupted.\r\n    \t\t\t\t\t */\r\n    \t\t\t\t\tThread.currentThread().interrupt();\r\n    \t\t\t\t\tthrow new RuntimeException(e);\r\n    \t\t\t\t} catch (ExecutionException e) {\r\n    \t\t\t\t\t/*\r\n    \t\t\t\t\t * The task threw an exception\r\n    \t\t\t\t\t */\r\n    \t\t\t\t\tSystem.out.println(&quot;Execution exception &quot; + e.getMessage());\r\n    \t\t\t\t\tcomplete = true;\r\n    \t\t\t\t\tfor (Future&lt;Void&gt; future : results) {\r\n    \t\t\t\t\t\tif (!future.isDone()) {\r\n    \t\t\t\t\t\t\tSystem.out.println(&quot;Cancelling &quot; + future);\r\n    \t\t\t\t\t\t\tfuture.cancel(true);\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t}\r\n    }\r\n\r\nOutput is something like:\r\n\r\n    Task 0 in progress\r\n    Task 2 in progress\r\n    Task 1 in progress\r\n    Task 0 complete\r\n    Execution exception java.lang.Exception: Wrong answer for task 1\r\n    Cancelling java.util.concurrent.FutureTask@a59698\r\n    Task 2 cancelled\r\n\r\nwhere Task 2 got cancelled due to the failure of Task 1.\r\n","title":"How to stop all the running threads, if one of those throws an Exception?","body":"<p>Use an <code>ExecutorCompletionService</code>, complete with an <code>ExecutorService</code> that outlives the duration of the tasks (i.e. it doesn't get shut down afterwards):</p>\n<pre><code>import java.util.ArrayList;\nimport java.util.Iterator;\nimport java.util.List;\nimport java.util.concurrent.Callable;\nimport java.util.concurrent.CompletionService;\nimport java.util.concurrent.ExecutionException;\nimport java.util.concurrent.ExecutorCompletionService;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\nimport java.util.concurrent.Future;\n\nclass Threader {\n\n    static ExecutorService service = Executors.newCachedThreadPool();\n\n    public static void main(String[] args) {\n        new Threader().start();\n        service.shutdown();\n    }\n\n    private void start() {\n        CompletionService&lt;Void&gt; completionService = new ExecutorCompletionService&lt;Void&gt;(\n                service);\n        /*\n         * Holds all the futures for the submitted tasks\n         */\n        List&lt;Future&lt;Void&gt;&gt; results = new ArrayList&lt;Future&lt;Void&gt;&gt;();\n\n        for (int i = 0; i &lt; 3; i++) {\n            final int callableNumber = i;\n\n            results.add(completionService.submit(new Callable&lt;Void&gt;() {\n                 @Override\n                 public Void call() throws Exception {\n                     System.out.println(&quot;Task &quot; + callableNumber\n                             + &quot; in progress&quot;);\n                     try {\n                         Thread.sleep(callableNumber * 1000);\n                     } catch (InterruptedException ex) {\n                         System.out.println(&quot;Task &quot; + callableNumber\n                                 + &quot; cancelled&quot;);\n                         return null;\n                     }\n                     if (callableNumber == 1) {\n                         throw new Exception(&quot;Wrong answer for task &quot;\n                                 + callableNumber);\n                     }\n                     System.out.println(&quot;Task &quot; + callableNumber + &quot; complete&quot;);\n                     return null;\n                 }\n             }));\n        }\n\n        boolean complete = false;\n        while (!complete) {\n            complete = true;\n            Iterator&lt;Future&lt;Void&gt;&gt; futuresIt = results.iterator();\n            while (futuresIt.hasNext()) {\n                if (futuresIt.next().isDone()) {\n                    futuresIt.remove();\n                } else {\n                    complete = false;\n                }\n            }\n\n            if (!results.isEmpty()) {\n                try {\n                    /*\n                     * Examine results of next completed task\n                     */\n                    completionService.take().get();\n                } catch (InterruptedException e) {\n                    /*\n                     * Give up - interrupted.\n                     */\n                    Thread.currentThread().interrupt();\n                    throw new RuntimeException(e);\n                } catch (ExecutionException e) {\n                    /*\n                     * The task threw an exception\n                     */\n                    System.out.println(&quot;Execution exception &quot; + e.getMessage());\n                    complete = true;\n                    for (Future&lt;Void&gt; future : results) {\n                        if (!future.isDone()) {\n                            System.out.println(&quot;Cancelling &quot; + future);\n                            future.cancel(true);\n                        }\n                    }\n                }\n            }\n        }\n\n    }\n}\n</code></pre>\n<p>Output is something like:</p>\n<pre><code>Task 0 in progress\nTask 2 in progress\nTask 1 in progress\nTask 0 complete\nExecution exception java.lang.Exception: Wrong answer for task 1\nCancelling java.util.concurrent.FutureTask@a59698\nTask 2 cancelled\n</code></pre>\n<p>where Task 2 got cancelled due to the failure of Task 1.</p>\n"}],"owner":{"account_id":1645191,"reputation":171,"user_id":1516847,"display_name":"Achu S"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10830,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"answer_count":4,"score":15,"last_activity_date":1661070647,"creation_date":1345107603,"question_id":11983789,"body_markdown":"In one of my application I&#39;m using the `ExecutorService` class to create a fixed thread pool and `CountDownLatch` to wait for the threads to complete. This is working fine if the process didn&#39;t throw any exception . If there is an exception occurred in any of the threads, I need to stop all the running thread and report the error to the main thread. Can any one please help me to solve this? \r\n\r\nThis is the sample code I&#39;m using for executing multiple threads.\r\n\r\n        private void executeThreads()\r\n    \t{\r\n    \t\tint noOfThreads = 10;\r\n    \t\tExecutorService executor = Executors.newFixedThreadPool(noOfThreads);     \r\n    \t\ttry      \r\n    \t   {\r\n    \t\tCountDownLatch latch = new CountDownLatch(noOfThreads);\r\n    \t\tfor(int i=0; i&lt; noOfThreads; i++){\r\n    \t\t executor.submit(new ThreadExecutor(latch));\r\n    \t\t}\r\n    \t\tlatch.await();           \r\n    \t   }\r\n    \t   catch(Exception e)\r\n    \t   {\r\n    \t\te.printStackTrace();\r\n    \t   }\r\n    \t   finally\r\n    \t   {\r\n    \t\texecutor.shutDown();\r\n    \t   }\r\n       }\r\n       \r\n      \r\nThis is the Executor Class\r\n\r\n         public class ThreadExecutor implements Callable&lt;String&gt; {\r\n        \tCountDownLatch latch ;\r\n        \tpublic ThreadExecutor(CountDownLatch latch){\r\n        \t\tthis.latch = latch;\r\n        \t}  \t\r\n    \r\n        @Override\r\n        public String call() throws Exception\r\n        {\r\n    \t\tdoMyTask(); // process logic goes here!\r\n            this.latch.countDown();\r\n            return &quot;Success&quot;;\r\n        }\r\n\r\n  =============================================================================\r\n\r\nThank you all :)\r\n\r\nI have corrected my class as given below and that is working now.\r\n\r\n    private void executeThreads()\r\n        {\r\n            int noOfThreads = 10;\r\n            ExecutorService executor = Executors.newFixedThreadPool(noOfThreads);     \r\n           ArrayList&lt;Future&lt;Object&gt;&gt; futureList = new ArrayList&lt;Future&lt;Object&gt;&gt;(noOfThreads );\r\n        try\r\n        {\r\n            userContext = BSF.getMyContext();\r\n    \t\tCountDownLatch latch = new CountDownLatch(noOfComponentsToImport);\r\n\r\n    \t\tfor(ImportContent artifact:artifactList){\r\n    \t\t    futureList.add(executor.submit(new ThreadExecutor(latch)));\r\n    \t\t}\r\n    \t\t\r\n            latch.await();\r\n            \r\n    \t\tfor(Future&lt;Object&gt; future : futureList)\r\n    \t\t{\r\n                      try\r\n                      {\r\n                          future.get();                 \r\n                       }\r\n                       catch(ExecutionException e)\r\n                       {   //handle it               \r\n                        }\r\n    \t\t}   \t\t\r\n\r\n    \t}\r\n        catch (Exception e) {\r\n           //handle it\r\n        }\r\n        finally\r\n        {\r\n            executor.shutdown();      \r\n         \r\n            try\r\n            {\r\n                executor.awaitTermination(90000, TimeUnit.MILLISECONDS);\r\n            }\r\n            catch (InterruptedException e)\r\n            {\r\n               //handle it\r\n            }\r\n        }\r\n       }\r\n\r\nExecutor Class :\r\n\r\n    public class ThreadExecutor implements Callable&lt;String&gt; {\r\n            private static volatile boolean isAnyError;\r\n            CountDownLatch latch ;\r\n            public ThreadExecutor(CountDownLatch latch){\r\n                this.latch = latch;\r\n            }   \r\n    \r\n        @Override\r\n        public String call() throws Exception\r\n        {\r\n\r\n          try{\r\n                if(!isAnyError)\r\n                { \r\n                   doMyTask(); // process logic goes here!\r\n                }\r\n         }\r\n         catch(Exception e)\r\n         {\r\n            isAnyError = true ;\r\n            throw e;\r\n          }\r\n          finally\r\n          {\r\n            this.latch.countDown();\r\n           }\r\n            return &quot;Success&quot;;\r\n        }\r\n","title":"How to stop all the running threads, if one of those throws an Exception?","body":"<p>In one of my application I'm using the <code>ExecutorService</code> class to create a fixed thread pool and <code>CountDownLatch</code> to wait for the threads to complete. This is working fine if the process didn't throw any exception . If there is an exception occurred in any of the threads, I need to stop all the running thread and report the error to the main thread. Can any one please help me to solve this? </p>\n\n<p>This is the sample code I'm using for executing multiple threads.</p>\n\n<pre><code>    private void executeThreads()\n    {\n        int noOfThreads = 10;\n        ExecutorService executor = Executors.newFixedThreadPool(noOfThreads);     \n        try      \n       {\n        CountDownLatch latch = new CountDownLatch(noOfThreads);\n        for(int i=0; i&lt; noOfThreads; i++){\n         executor.submit(new ThreadExecutor(latch));\n        }\n        latch.await();           \n       }\n       catch(Exception e)\n       {\n        e.printStackTrace();\n       }\n       finally\n       {\n        executor.shutDown();\n       }\n   }\n</code></pre>\n\n<p>This is the Executor Class</p>\n\n<pre><code>     public class ThreadExecutor implements Callable&lt;String&gt; {\n        CountDownLatch latch ;\n        public ThreadExecutor(CountDownLatch latch){\n            this.latch = latch;\n        }   \n\n    @Override\n    public String call() throws Exception\n    {\n        doMyTask(); // process logic goes here!\n        this.latch.countDown();\n        return \"Success\";\n    }\n</code></pre>\n\n<p>=============================================================================</p>\n\n<p>Thank you all :)</p>\n\n<p>I have corrected my class as given below and that is working now.</p>\n\n<pre><code>private void executeThreads()\n    {\n        int noOfThreads = 10;\n        ExecutorService executor = Executors.newFixedThreadPool(noOfThreads);     \n       ArrayList&lt;Future&lt;Object&gt;&gt; futureList = new ArrayList&lt;Future&lt;Object&gt;&gt;(noOfThreads );\n    try\n    {\n        userContext = BSF.getMyContext();\n        CountDownLatch latch = new CountDownLatch(noOfComponentsToImport);\n\n        for(ImportContent artifact:artifactList){\n            futureList.add(executor.submit(new ThreadExecutor(latch)));\n        }\n\n        latch.await();\n\n        for(Future&lt;Object&gt; future : futureList)\n        {\n                  try\n                  {\n                      future.get();                 \n                   }\n                   catch(ExecutionException e)\n                   {   //handle it               \n                    }\n        }           \n\n    }\n    catch (Exception e) {\n       //handle it\n    }\n    finally\n    {\n        executor.shutdown();      \n\n        try\n        {\n            executor.awaitTermination(90000, TimeUnit.MILLISECONDS);\n        }\n        catch (InterruptedException e)\n        {\n           //handle it\n        }\n    }\n   }\n</code></pre>\n\n<p>Executor Class :</p>\n\n<pre><code>public class ThreadExecutor implements Callable&lt;String&gt; {\n        private static volatile boolean isAnyError;\n        CountDownLatch latch ;\n        public ThreadExecutor(CountDownLatch latch){\n            this.latch = latch;\n        }   \n\n    @Override\n    public String call() throws Exception\n    {\n\n      try{\n            if(!isAnyError)\n            { \n               doMyTask(); // process logic goes here!\n            }\n     }\n     catch(Exception e)\n     {\n        isAnyError = true ;\n        throw e;\n      }\n      finally\n      {\n        this.latch.countDown();\n       }\n        return \"Success\";\n    }\n</code></pre>\n"},{"tags":["java","selenium","google-chrome","selenium-webdriver","selenium-chromedriver"],"comments":[{"owner":{"account_id":2463872,"reputation":4439,"user_id":2147409,"display_name":"Amit Jain"},"score":0,"creation_date":1584671479,"post_id":60767509,"comment_id":107514879,"body_markdown":"what error you see ?","body":"what error you see ?"},{"owner":{"account_id":17629418,"reputation":111,"user_id":12793815,"display_name":"nuclear_party"},"score":0,"creation_date":1584700916,"post_id":60767509,"comment_id":107523019,"body_markdown":"@AmitJain the browser starts up normally, however the IP is still mine (no proxy routing)","body":"@AmitJain the browser starts up normally, however the IP is still mine (no proxy routing)"}],"answers":[{"tags":[],"owner":{"account_id":17629418,"reputation":111,"user_id":12793815,"display_name":"nuclear_party"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1661070525,"creation_date":1661070525,"answer_id":73432746,"question_id":60767509,"body_markdown":"I was able to solve this problem by setting system-level proxy:\r\n\r\n        System.setProperty(&quot;java.net.useSystemProxies&quot;, &quot;true&quot;);\r\n\r\n        // http\r\n        System.setProperty(&quot;http.proxyHost&quot;, &quot;1.2.3.4&quot;);\r\n        System.setProperty(&quot;http.proxyPort&quot;, 8080);\r\n        System.setProperty(&quot;http.proxyUser&quot;, &quot;username&quot;);\r\n        System.setProperty(&quot;http.proxyPassword&quot;, &quot;pass&quot;);\r\n\r\n        // https\r\n        System.setProperty(&quot;https.proxyHost&quot;,&quot;1.2.3.4&quot;);\r\n        System.setProperty(&quot;https.proxyPort&quot;, 8080);\r\n        System.setProperty(&quot;https.proxyUser&quot;, &quot;username&quot;);\r\n        System.setProperty(&quot;https.proxyPassword&quot;, &quot;pass&quot;);\r\n\r\n        System.setProperty(&quot;jdk.http.auth.tunneling.disabledSchemes&quot;, &quot;&quot;);\r\n        System.setProperty(&quot;jdk.https.auth.tunneling.disabledSchemes&quot;, &quot;&quot;);\r\n\r\n        Authenticator.setDefault(new Authenticator() {\r\n            @Override\r\n            public PasswordAuthentication getPasswordAuthentication() {\r\n                return new PasswordAuthentication(&quot;user&quot;, &quot;pass&quot;.toCharArray());\r\n            }\r\n        });","title":"How to perform proxy authentication in ChromeDriver using Selenium + Java?","body":"<p>I was able to solve this problem by setting system-level proxy:</p>\n<pre><code>    System.setProperty(&quot;java.net.useSystemProxies&quot;, &quot;true&quot;);\n\n    // http\n    System.setProperty(&quot;http.proxyHost&quot;, &quot;1.2.3.4&quot;);\n    System.setProperty(&quot;http.proxyPort&quot;, 8080);\n    System.setProperty(&quot;http.proxyUser&quot;, &quot;username&quot;);\n    System.setProperty(&quot;http.proxyPassword&quot;, &quot;pass&quot;);\n\n    // https\n    System.setProperty(&quot;https.proxyHost&quot;,&quot;1.2.3.4&quot;);\n    System.setProperty(&quot;https.proxyPort&quot;, 8080);\n    System.setProperty(&quot;https.proxyUser&quot;, &quot;username&quot;);\n    System.setProperty(&quot;https.proxyPassword&quot;, &quot;pass&quot;);\n\n    System.setProperty(&quot;jdk.http.auth.tunneling.disabledSchemes&quot;, &quot;&quot;);\n    System.setProperty(&quot;jdk.https.auth.tunneling.disabledSchemes&quot;, &quot;&quot;);\n\n    Authenticator.setDefault(new Authenticator() {\n        @Override\n        public PasswordAuthentication getPasswordAuthentication() {\n            return new PasswordAuthentication(&quot;user&quot;, &quot;pass&quot;.toCharArray());\n        }\n    });\n</code></pre>\n"}],"owner":{"account_id":17629418,"reputation":111,"user_id":12793815,"display_name":"nuclear_party"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":344,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73432746,"answer_count":1,"score":0,"last_activity_date":1661070525,"creation_date":1584669063,"question_id":60767509,"body_markdown":"Alright, so my problem is that I can&#39;t find a way to launch Chrome with authenticated proxy connection. \r\nWhat I have is: proxy ip, port, username and password.\r\nWhat I need: to launch Chrome instance with connection with this proxy using Selenium\r\n\r\nwhat I&#39;ve tried:\r\n\r\n        DesiredCapabilities capabilities = DesiredCapabilities.chrome();\r\n        capabilities.setCapability(&quot;chrome.switches&quot;, Arrays.asList(&quot;--proxy-server=USERNAME:PASS@IP_ADDRESS:PORT&quot;));\r\n        WebDriver driver = new ChromeDriver(capabilities);\r\n\r\nand:\r\n\r\n        Proxy proxy = new Proxy();\r\n        proxy.setHttpProxy(&quot;IP_ADDRESS:PORT&quot;);\r\n        proxy.setSocksUsername(&quot;USERNAME&quot;);\r\n        proxy.setSocksPassword(&quot;PASSWORD&quot;);\r\n        ChromeOptions options = new ChromeOptions();\r\n        options.setProxy(proxy);\r\n        ChromeDriver driver = new ChromeDriver(options);\r\n\r\nUnfortunately, none of this approaches work...\r\n\r\n ","title":"How to perform proxy authentication in ChromeDriver using Selenium + Java?","body":"<p>Alright, so my problem is that I can't find a way to launch Chrome with authenticated proxy connection. \nWhat I have is: proxy ip, port, username and password.\nWhat I need: to launch Chrome instance with connection with this proxy using Selenium</p>\n\n<p>what I've tried:</p>\n\n<pre><code>    DesiredCapabilities capabilities = DesiredCapabilities.chrome();\n    capabilities.setCapability(\"chrome.switches\", Arrays.asList(\"--proxy-server=USERNAME:PASS@IP_ADDRESS:PORT\"));\n    WebDriver driver = new ChromeDriver(capabilities);\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>    Proxy proxy = new Proxy();\n    proxy.setHttpProxy(\"IP_ADDRESS:PORT\");\n    proxy.setSocksUsername(\"USERNAME\");\n    proxy.setSocksPassword(\"PASSWORD\");\n    ChromeOptions options = new ChromeOptions();\n    options.setProxy(proxy);\n    ChromeDriver driver = new ChromeDriver(options);\n</code></pre>\n\n<p>Unfortunately, none of this approaches work...</p>\n"},{"tags":["java","xml","hibernate","pom.xml"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1661098747,"post_id":73432587,"comment_id":129685684,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"owner":{"account_id":23051480,"reputation":23,"user_id":17168233,"display_name":"hedi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1661070017,"creation_date":1661068582,"question_id":73432587,"body_markdown":"Exception in thread &quot;main&quot; java.lang.ExceptionInInitializerError\r\nCaused by: javax.persistence.PersistenceException: [PersistenceUnit: MyUnit] Unable to build Hibernate SessionFactory\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.persistenceException(EntityManagerFactoryBuilderImpl.java:1597)\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1503)\r\n\tat org.hibernate.jpa.HibernatePersistenceProvider.createEntityManagerFactory(HibernatePersistenceProvider.java:56)\r\n\tat java.persistence@2.2/javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:79)\r\n\tat java.persistence@2.2/javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:54)\r\n\tat com.example.Main/com.example.Main.TestHibernate.&lt;clinit&gt;(TestHibernate.java:11)\r\nCaused by: org.hibernate.MappingException: Could not instantiate persister org.hibernate.persister.entity.SingleTableEntityPersister\r\n\tat org.hibernate.persister.internal.PersisterFactoryImpl.createEntityPersister(PersisterFactoryImpl.java:112)\r\n\tat org.hibernate.persister.internal.PersisterFactoryImpl.createEntityPersister(PersisterFactoryImpl.java:77)\r\n\tat org.hibernate.metamodel.internal.MetamodelImpl.initialize(MetamodelImpl.java:181)\r\n\tat org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:319)\r\n\tat org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:471)\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1498)\r\n\t... 4 more\r\nCaused by: java.lang.reflect.InaccessibleObjectException: Unable to make field private long com.example.Main.Database.Test.id accessible: module com.example.Main does not &quot;opens com.example.Main.Database&quot; to unnamed module @7f1302d6\r\n\tat java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:354)\r\n\tat java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:297)\r\n\tat java.base/java.lang.reflect.Field.checkCanSetAccessible(Field.java:178)\r\n\tat java.base/java.lang.reflect.Field.setAccessible(Field.java:172)\r\n\tat org.hibernate.internal.util.ReflectHelper.ensureAccessibility(ReflectHelper.java:418)\r\n\tat org.hibernate.internal.util.ReflectHelper.findField(ReflectHelper.java:408)\r\n\tat org.hibernate.property.access.internal.PropertyAccessFieldImpl.&lt;init&gt;(PropertyAccessFieldImpl.java:34)\r\n\tat org.hibernate.property.access.internal.PropertyAccessStrategyFieldImpl.buildPropertyAccess(PropertyAccessStrategyFieldImpl.java:26)\r\n\tat org.hibernate.tuple.PropertyFactory.getGetter(PropertyFactory.java:341)\r\n\tat org.hibernate.tuple.PropertyFactory.buildIdentifierAttribute(PropertyFactory.java:67)\r\n\tat org.hibernate.tuple.entity.EntityMetamodel.&lt;init&gt;(EntityMetamodel.java:142)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.&lt;init&gt;(AbstractEntityPersister.java:613)\r\n\tat org.hibernate.persister.entity.SingleTableEntityPersister.&lt;init&gt;(SingleTableEntityPersister.java:126)\r\n\tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n\tat java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\r\n\tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\r\n\tat org.hibernate.persister.internal.PersisterFactoryImpl.createEntityPersister(PersisterFactoryImpl.java:96)\r\n\t... 9 more\r\n\r\n\r\n\r\n\r\n\r\nTest.java\r\n\r\n    @Entity\r\n    public class Test\r\n    {\r\n        @Id\r\n        @GeneratedValue\r\n        private long id;\r\n        private String imie;\r\n        private String nazwisko;\r\n    \r\n        public Test(long id, String imie, String nazwisko)\r\n        {\r\n            this.id = id;\r\n            this.imie = imie;\r\n            this.nazwisko = nazwisko;\r\n        }\r\n    \r\n        public Test()\r\n        {\r\n        }\r\n    \r\n        public long getId()\r\n        {\r\n            return id;\r\n        }\r\n    \r\n        public void setId(long id)\r\n        {\r\n            this.id = id;\r\n        }\r\n    \r\n        public String getImie()\r\n        {\r\n            return imie;\r\n        }\r\n    \r\n        public void setImie(String imie)\r\n        {\r\n            this.imie = imie;\r\n        }\r\n    \r\n        public String getNazwisko()\r\n        {\r\n            return nazwisko;\r\n        }\r\n    \r\n        public void setNazwisko(String nazwisko)\r\n        {\r\n            this.nazwisko = nazwisko;\r\n        }\r\n    \r\n        @Override\r\n        public String toString()\r\n        {\r\n            return &quot;Test{&quot; +\r\n                    &quot;id=&quot; + id +\r\n                    &quot;, imie=&#39;&quot; + imie + &#39;\\&#39;&#39; +\r\n                    &quot;, nazwisko=&#39;&quot; + nazwisko + &#39;\\&#39;&#39; +\r\n                    &#39;}&#39;;\r\n        }\r\n    }\r\n\r\n\r\nTestService.java\r\n\r\n\r\n\r\n    public class TestService\r\n    {\r\n        //Nie dziala\r\n        public void addUser(String imie, String nazwisko)\r\n        {\r\n            Test test = new Test();\r\n            test.setImie(imie);\r\n            test.setNazwisko(nazwisko);\r\n            EntityManager entityManager = TestHibernate.getFactory().createEntityManager();\r\n            EntityTransaction entityTransaction = entityManager.getTransaction();\r\n            entityTransaction.begin(); \r\n            entityManager.persist(test);\r\n            entityTransaction.commit(); \r\n        }\r\n    \r\n        public Test findOne(long id) {\r\n            EntityManager entityManager = TestHibernate.getFactory().createEntityManager();\r\n            return entityManager.find(Test.class, id);\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\nTestHibernate.java\r\n\r\n\r\n\r\n    public class TestHibernate\r\n    {\r\n        private static final EntityManagerFactory FACTORY =\r\n                Persistence.createEntityManagerFactory(&quot;MyUnit&quot;);\r\n    \r\n        public static void main(String[] args)\r\n        {\r\n            TestService testService = new TestService();\r\n            testService.findOne(1);\r\n        }\r\n        \r\n        public static EntityManagerFactory getFactory()\r\n        {\r\n            return FACTORY;\r\n        }\r\n    }\r\n\r\n\r\n\r\npom.xml\r\n\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n        &lt;groupId&gt;com.example&lt;/groupId&gt; &lt;!-- To moze miec wplyw --&gt;\r\n        &lt;artifactId&gt;Game&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;name&gt;Game&lt;/name&gt;\r\n    \r\n        &lt;properties&gt;\r\n            &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n            &lt;junit.version&gt;5.8.1&lt;/junit.version&gt;\r\n    \r\n            &lt;!--DODANIE PROPERTIES --&gt;\r\n            &lt;maven.compiler.source&gt;16&lt;/maven.compiler.source&gt;\r\n            &lt;maven.compiler.target&gt;16&lt;/maven.compiler.target&gt;\r\n        &lt;/properties&gt;\r\n    \r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\r\n                &lt;version&gt;18-ea+6&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;\r\n                &lt;version&gt;18-ea+6&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n                &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\r\n                &lt;version&gt;${junit.version}&lt;/version&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n                &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\r\n                &lt;version&gt;${junit.version}&lt;/version&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;!-- https://mvnrepository.com/artifact/org.openjfx/javafx.media --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javafx-media&lt;/artifactId&gt;\r\n                &lt;version&gt;18.0.2&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;!-- https://mvnrepository.com/artifact/org.postgresql/postgresql --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n                &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n                &lt;version&gt;42.3.6&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;!-- https://mvnrepository.com/artifact/org.hibernate/hibernate-core --&gt;\r\n            &lt;!-- https://mvnrepository.com/artifact/org.hibernate/hibernate-core --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n                &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n                &lt;version&gt;5.6.9.Final&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n    \r\n            &lt;!-- https://mvnrepository.com/artifact/org.hibernate/hibernate-entitymanager --&gt;\r\n            &lt;!-- https://mvnrepository.com/artifact/org.hibernate/hibernate-entitymanager --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n                &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\r\n                &lt;version&gt;5.6.9.Final&lt;/version&gt;\r\n            &lt;/dependency&gt;    \r\n        &lt;/dependencies&gt;\r\n    \r\n    \r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.8.1&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;source&gt;17&lt;/source&gt;\r\n                        &lt;target&gt;17&lt;/target&gt; \r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;0.0.8&lt;/version&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;!-- Default configuration for running with: mvn clean javafx:run --&gt;\r\n                            &lt;id&gt;default-cli&lt;/id&gt;\r\n                            &lt;configuration&gt;\r\n                                &lt;mainClass&gt;com.example.game/com.example.game.StartLoginApplication&lt;/mainClass&gt;\r\n                                &lt;launcher&gt;app&lt;/launcher&gt;\r\n                                &lt;jlinkZipName&gt;app&lt;/jlinkZipName&gt;\r\n                                &lt;jlinkImageName&gt;app&lt;/jlinkImageName&gt;\r\n                                &lt;noManPages&gt;true&lt;/noManPages&gt;\r\n                                &lt;stripDebug&gt;true&lt;/stripDebug&gt;\r\n                                &lt;noHeaderFiles&gt;true&lt;/noHeaderFiles&gt;\r\n                            &lt;/configuration&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\n\r\n\r\npersistence.xml\r\n\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;persistence version=&quot;2.0&quot;\r\n                 xmlns=&quot;http://java.sun.com/xml/ns/persistence&quot;\r\n                 xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n                 xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/persistence\r\n    http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd&quot;&gt;\r\n        &lt;persistence-unit name=&quot;MyUnit&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt; &lt;!-- Tutaj nazwa MyUnit - wyrzuca blad --&gt;\r\n            &lt;!-- Persistence provider --&gt;\r\n            &lt;provider&gt;org.hibernate.jpa.HibernatePersistenceProvider&lt;/provider&gt;\r\n            &lt;!-- Entity classes --&gt;\r\n            &lt;class&gt;com.example.Main.Database.Test&lt;/class&gt;\r\n            &lt;properties&gt;\r\n                &lt;!-- Musisz pozmieniac na swoje dane --&gt;\r\n                &lt;!-- The JDBC driver of your database --&gt;\r\n                &lt;property name=&quot;javax.persistence.jdbc.driver&quot;\r\n                          value=&quot;org.postgresql.Driver&quot; /&gt;\r\n                &lt;!-- The JDBC URL to the database instance --&gt;\r\n                &lt;property name=&quot;javax.persistence.jdbc.url&quot;\r\n                          value=&quot;jdbc:postgresql://localhost:5432/Nowa&quot; /&gt;\r\n                &lt;!-- The database username --&gt;\r\n                &lt;property name=&quot;javax.persistence.jdbc.user&quot; value=&quot;postgres&quot; /&gt;\r\n                &lt;!-- The database password --&gt;\r\n                &lt;property name=&quot;javax.persistence.jdbc.password&quot; value=&quot;Bakalie37&quot; /&gt;\r\n    \r\n            &lt;/properties&gt;\r\n        &lt;/persistence-unit&gt;\r\n    &lt;/persistence&gt;\r\n\r\n\r\n\r\n\r\nIt&#39;s weird, cause in the similar project I haven&#39;t problems with that.\r\nSecond project without problems:\r\n\r\n\r\n\r\nCompany.java\r\n\r\n\r\n\r\n    @Entity\r\n    public class Company {\r\n    \r\n        @Id\r\n        @GeneratedValue\r\n        private Long id;\r\n    \r\n        private String name;\r\n    \r\n        private int age;\r\n    \r\n        private String address;\r\n    \r\n        private double salary;\r\n    \r\n        public Company() {\r\n        }\r\n    \r\n        public Company(Long id, String name, int age, String address, double salary) {\r\n            this.id = id;\r\n            this.name = name;\r\n            this.age = age;\r\n            this.address = address;\r\n            this.salary = salary;\r\n        }\r\n    \r\n        public Company(String name, int age, String address, double salary) {\r\n            this.name = name;\r\n            this.age = age;\r\n            this.address = address;\r\n            this.salary = salary;\r\n        }\r\n    \r\n        public Long getId() {\r\n            return id;\r\n        }\r\n    \r\n        public void setId(Long id) {\r\n            this.id = id;\r\n        }\r\n    \r\n        public String getName() {\r\n            return name;\r\n        }\r\n    \r\n        public void setName(String name) {\r\n            this.name = name;\r\n        }\r\n    \r\n        public int getAge() {\r\n            return age;\r\n        }\r\n    \r\n        public void setAge(int age) {\r\n            this.age = age;\r\n        }\r\n    \r\n        public String getAddress() {\r\n            return address;\r\n        }\r\n    \r\n        public void setAddress(String address) {\r\n            this.address = address;\r\n        }\r\n    \r\n        public double getSalary() {\r\n            return salary;\r\n        }\r\n    \r\n        public void setSalary(double salary) {\r\n            this.salary = salary;\r\n        }\r\n    \r\n        @Override\r\n        public String toString() {\r\n            return &quot;Company{&quot; +\r\n                    &quot;id=&quot; + id +\r\n                    &quot;, name=&#39;&quot; + name + &#39;\\&#39;&#39; +\r\n                    &quot;, age=&quot; + age +\r\n                    &quot;, address=&#39;&quot; + address + &#39;\\&#39;&#39; +\r\n                    &quot;, salary=&quot; + salary +\r\n                    &#39;}&#39;;\r\n        }\r\n    }\r\n\r\n\r\n\r\nCompanyService.java\r\n\r\n\r\n\r\n    public class CompanyService {\r\n    \r\n        public Company findOne(long id) {\r\n            EntityManager entityManager = Main.getFactory().createEntityManager();\r\n            return entityManager.find(Company.class, id);\r\n        }\r\n    \r\n        public void addCompany(String name, int age, String address, double salary) {\r\n            Company company = new Company();\r\n            company.setName(name);\r\n            company.setAge(age);\r\n            company.setAddress(address);\r\n            company.setSalary(salary);\r\n            EntityManager entityManager = Main.getFactory().createEntityManager();\r\n            EntityTransaction transaction = entityManager.getTransaction();\r\n            transaction.begin();\r\n            entityManager.contains(company);\r\n            transaction.commit();\r\n        }\r\n    \r\n        public List&lt;Company&gt; findByName(String name) {\r\n            EntityManager entityManager = Main.getFactory().createEntityManager();\r\n            Query query = entityManager.createQuery(&quot;select c from Company c where c.name=&#39;&quot; + name + &quot;&#39;&quot;);\r\n            return query.getResultList();\r\n        }\r\n    \r\n        public List&lt;Company&gt; findAll() {\r\n            EntityManager entityManager = Main.getFactory().createEntityManager();\r\n            Query query = entityManager.createQuery(&quot;select c from Company c&quot;);\r\n            return query.getResultList();\r\n        }\r\n    \r\n        public void updateCompanyName(long id, String name) {\r\n            EntityManager entityManager = Main.getFactory().createEntityManager();\r\n            Company company = entityManager.find(Company.class, id);\r\n            EntityTransaction transaction = entityManager.getTransaction();\r\n            transaction.begin();\r\n            company.setName(name);\r\n            entityManager.merge(company);\r\n            transaction.commit();\r\n        }\r\n    \r\n        public void delete(long id) {\r\n            EntityManager entityManager = Main.getFactory().createEntityManager();\r\n            Company company = entityManager.find(Company.class, id);\r\n            EntityTransaction transaction = entityManager.getTransaction();\r\n            transaction.begin();\r\n            entityManager.remove(company);\r\n            transaction.commit();\r\n        }\r\n    \r\n    }\r\n\r\n\r\n\r\n\r\npom.xml\r\n\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n        &lt;groupId&gt;groupId&lt;/groupId&gt;\r\n        &lt;artifactId&gt;JPAZad1&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    \r\n        &lt;properties&gt;\r\n            &lt;maven.compiler.source&gt;16&lt;/maven.compiler.source&gt;\r\n            &lt;maven.compiler.target&gt;16&lt;/maven.compiler.target&gt;\r\n        &lt;/properties&gt;\r\n    \r\n        &lt;dependencies&gt;\r\n            &lt;!-- https://mvnrepository.com/artifact/org.postgresql/postgresql --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n                &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n                &lt;version&gt;42.3.6&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n    \r\n            &lt;!-- https://mvnrepository.com/artifact/org.hibernate/hibernate-core --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n                &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n                &lt;version&gt;5.6.9.Final&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n    \r\n            &lt;!-- https://mvnrepository.com/artifact/org.hibernate/hibernate-entitymanager --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n                &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\r\n                &lt;version&gt;5.6.9.Final&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n        \r\n    &lt;/project&gt;\r\n\r\n\r\n\r\npersistence.xml\r\n\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;persistence version=&quot;2.0&quot;\r\n                 xmlns=&quot;http://java.sun.com/xml/ns/persistence&quot;\r\n                 xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n                 xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/persistence\r\n    http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd&quot;&gt;\r\n        &lt;persistence-unit name=&quot;MyUnit&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\r\n            &lt;!-- Persistence provider --&gt;\r\n            &lt;provider&gt;org.hibernate.jpa.HibernatePersistenceProvider&lt;/provider&gt;\r\n            &lt;!-- Entity classes --&gt;\r\n            &lt;class&gt;com.company.Donica.Company&lt;/class&gt;\r\n            &lt;properties&gt;\r\n                &lt;!-- The JDBC driver of your database --&gt;\r\n                &lt;property name=&quot;javax.persistence.jdbc.driver&quot;\r\n                          value=&quot;org.postgresql.Driver&quot; /&gt;\r\n                &lt;!-- The JDBC URL to the database instance --&gt;\r\n                &lt;property name=&quot;javax.persistence.jdbc.url&quot;\r\n                          value=&quot;jdbc:postgresql://localhost:5432/Nowa&quot; /&gt;\r\n                &lt;!-- The database username --&gt;\r\n                &lt;property name=&quot;javax.persistence.jdbc.user&quot; value=&quot;postgres&quot; /&gt;\r\n                &lt;!-- The database password --&gt;\r\n                &lt;property name=&quot;javax.persistence.jdbc.password&quot; value=&quot;Bakalie37&quot; /&gt;\r\n    \r\n            &lt;/properties&gt;\r\n        &lt;/persistence-unit&gt;\r\n    &lt;/persistence&gt;","title":"Hibernate problem with PersistenceUnit creates breakpoints (Unable to build Hibernate SessionFactory)","body":"<p>Exception in thread &quot;main&quot; java.lang.ExceptionInInitializerError\nCaused by: javax.persistence.PersistenceException: [PersistenceUnit: MyUnit] Unable to build Hibernate SessionFactory\nat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.persistenceException(EntityManagerFactoryBuilderImpl.java:1597)\nat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1503)\nat org.hibernate.jpa.HibernatePersistenceProvider.createEntityManagerFactory(HibernatePersistenceProvider.java:56)\nat java.persistence@2.2/javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:79)\nat java.persistence@2.2/javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:54)\nat com.example.Main/com.example.Main.TestHibernate.(TestHibernate.java:11)\nCaused by: org.hibernate.MappingException: Could not instantiate persister org.hibernate.persister.entity.SingleTableEntityPersister\nat org.hibernate.persister.internal.PersisterFactoryImpl.createEntityPersister(PersisterFactoryImpl.java:112)\nat org.hibernate.persister.internal.PersisterFactoryImpl.createEntityPersister(PersisterFactoryImpl.java:77)\nat org.hibernate.metamodel.internal.MetamodelImpl.initialize(MetamodelImpl.java:181)\nat org.hibernate.internal.SessionFactoryImpl.(SessionFactoryImpl.java:319)\nat org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:471)\nat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1498)\n... 4 more\nCaused by: java.lang.reflect.InaccessibleObjectException: Unable to make field private long com.example.Main.Database.Test.id accessible: module com.example.Main does not &quot;opens com.example.Main.Database&quot; to unnamed module @7f1302d6\nat java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:354)\nat java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:297)\nat java.base/java.lang.reflect.Field.checkCanSetAccessible(Field.java:178)\nat java.base/java.lang.reflect.Field.setAccessible(Field.java:172)\nat org.hibernate.internal.util.ReflectHelper.ensureAccessibility(ReflectHelper.java:418)\nat org.hibernate.internal.util.ReflectHelper.findField(ReflectHelper.java:408)\nat org.hibernate.property.access.internal.PropertyAccessFieldImpl.(PropertyAccessFieldImpl.java:34)\nat org.hibernate.property.access.internal.PropertyAccessStrategyFieldImpl.buildPropertyAccess(PropertyAccessStrategyFieldImpl.java:26)\nat org.hibernate.tuple.PropertyFactory.getGetter(PropertyFactory.java:341)\nat org.hibernate.tuple.PropertyFactory.buildIdentifierAttribute(PropertyFactory.java:67)\nat org.hibernate.tuple.entity.EntityMetamodel.(EntityMetamodel.java:142)\nat org.hibernate.persister.entity.AbstractEntityPersister.(AbstractEntityPersister.java:613)\nat org.hibernate.persister.entity.SingleTableEntityPersister.(SingleTableEntityPersister.java:126)\nat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\nat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)\nat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\nat java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\nat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\nat org.hibernate.persister.internal.PersisterFactoryImpl.createEntityPersister(PersisterFactoryImpl.java:96)\n... 9 more</p>\n<p>Test.java</p>\n<pre><code>@Entity\npublic class Test\n{\n    @Id\n    @GeneratedValue\n    private long id;\n    private String imie;\n    private String nazwisko;\n\n    public Test(long id, String imie, String nazwisko)\n    {\n        this.id = id;\n        this.imie = imie;\n        this.nazwisko = nazwisko;\n    }\n\n    public Test()\n    {\n    }\n\n    public long getId()\n    {\n        return id;\n    }\n\n    public void setId(long id)\n    {\n        this.id = id;\n    }\n\n    public String getImie()\n    {\n        return imie;\n    }\n\n    public void setImie(String imie)\n    {\n        this.imie = imie;\n    }\n\n    public String getNazwisko()\n    {\n        return nazwisko;\n    }\n\n    public void setNazwisko(String nazwisko)\n    {\n        this.nazwisko = nazwisko;\n    }\n\n    @Override\n    public String toString()\n    {\n        return &quot;Test{&quot; +\n                &quot;id=&quot; + id +\n                &quot;, imie='&quot; + imie + '\\'' +\n                &quot;, nazwisko='&quot; + nazwisko + '\\'' +\n                '}';\n    }\n}\n</code></pre>\n<p>TestService.java</p>\n<pre><code>public class TestService\n{\n    //Nie dziala\n    public void addUser(String imie, String nazwisko)\n    {\n        Test test = new Test();\n        test.setImie(imie);\n        test.setNazwisko(nazwisko);\n        EntityManager entityManager = TestHibernate.getFactory().createEntityManager();\n        EntityTransaction entityTransaction = entityManager.getTransaction();\n        entityTransaction.begin(); \n        entityManager.persist(test);\n        entityTransaction.commit(); \n    }\n\n    public Test findOne(long id) {\n        EntityManager entityManager = TestHibernate.getFactory().createEntityManager();\n        return entityManager.find(Test.class, id);\n    }\n}\n</code></pre>\n<p>TestHibernate.java</p>\n<pre><code>public class TestHibernate\n{\n    private static final EntityManagerFactory FACTORY =\n            Persistence.createEntityManagerFactory(&quot;MyUnit&quot;);\n\n    public static void main(String[] args)\n    {\n        TestService testService = new TestService();\n        testService.findOne(1);\n    }\n    \n    public static EntityManagerFactory getFactory()\n    {\n        return FACTORY;\n    }\n}\n</code></pre>\n<p>pom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.example&lt;/groupId&gt; &lt;!-- To moze miec wplyw --&gt;\n    &lt;artifactId&gt;Game&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;Game&lt;/name&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;junit.version&gt;5.8.1&lt;/junit.version&gt;\n\n        &lt;!--DODANIE PROPERTIES --&gt;\n        &lt;maven.compiler.source&gt;16&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;16&lt;/maven.compiler.target&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\n            &lt;version&gt;18-ea+6&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;\n            &lt;version&gt;18-ea+6&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n            &lt;version&gt;${junit.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\n            &lt;version&gt;${junit.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.openjfx/javafx.media --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-media&lt;/artifactId&gt;\n            &lt;version&gt;18.0.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.postgresql/postgresql --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;version&gt;42.3.6&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/org.hibernate/hibernate-core --&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.hibernate/hibernate-core --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n            &lt;version&gt;5.6.9.Final&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;!-- https://mvnrepository.com/artifact/org.hibernate/hibernate-entitymanager --&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.hibernate/hibernate-entitymanager --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n            &lt;version&gt;5.6.9.Final&lt;/version&gt;\n        &lt;/dependency&gt;    \n    &lt;/dependencies&gt;\n\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.8.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;17&lt;/source&gt;\n                    &lt;target&gt;17&lt;/target&gt; \n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n                &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;0.0.8&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;!-- Default configuration for running with: mvn clean javafx:run --&gt;\n                        &lt;id&gt;default-cli&lt;/id&gt;\n                        &lt;configuration&gt;\n                            &lt;mainClass&gt;com.example.game/com.example.game.StartLoginApplication&lt;/mainClass&gt;\n                            &lt;launcher&gt;app&lt;/launcher&gt;\n                            &lt;jlinkZipName&gt;app&lt;/jlinkZipName&gt;\n                            &lt;jlinkImageName&gt;app&lt;/jlinkImageName&gt;\n                            &lt;noManPages&gt;true&lt;/noManPages&gt;\n                            &lt;stripDebug&gt;true&lt;/stripDebug&gt;\n                            &lt;noHeaderFiles&gt;true&lt;/noHeaderFiles&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>persistence.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;persistence version=&quot;2.0&quot;\n             xmlns=&quot;http://java.sun.com/xml/ns/persistence&quot;\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n             xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/persistence\nhttp://java.sun.com/xml/ns/persistence/persistence_2_0.xsd&quot;&gt;\n    &lt;persistence-unit name=&quot;MyUnit&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt; &lt;!-- Tutaj nazwa MyUnit - wyrzuca blad --&gt;\n        &lt;!-- Persistence provider --&gt;\n        &lt;provider&gt;org.hibernate.jpa.HibernatePersistenceProvider&lt;/provider&gt;\n        &lt;!-- Entity classes --&gt;\n        &lt;class&gt;com.example.Main.Database.Test&lt;/class&gt;\n        &lt;properties&gt;\n            &lt;!-- Musisz pozmieniac na swoje dane --&gt;\n            &lt;!-- The JDBC driver of your database --&gt;\n            &lt;property name=&quot;javax.persistence.jdbc.driver&quot;\n                      value=&quot;org.postgresql.Driver&quot; /&gt;\n            &lt;!-- The JDBC URL to the database instance --&gt;\n            &lt;property name=&quot;javax.persistence.jdbc.url&quot;\n                      value=&quot;jdbc:postgresql://localhost:5432/Nowa&quot; /&gt;\n            &lt;!-- The database username --&gt;\n            &lt;property name=&quot;javax.persistence.jdbc.user&quot; value=&quot;postgres&quot; /&gt;\n            &lt;!-- The database password --&gt;\n            &lt;property name=&quot;javax.persistence.jdbc.password&quot; value=&quot;Bakalie37&quot; /&gt;\n\n        &lt;/properties&gt;\n    &lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n<p>It's weird, cause in the similar project I haven't problems with that.\nSecond project without problems:</p>\n<p>Company.java</p>\n<pre><code>@Entity\npublic class Company {\n\n    @Id\n    @GeneratedValue\n    private Long id;\n\n    private String name;\n\n    private int age;\n\n    private String address;\n\n    private double salary;\n\n    public Company() {\n    }\n\n    public Company(Long id, String name, int age, String address, double salary) {\n        this.id = id;\n        this.name = name;\n        this.age = age;\n        this.address = address;\n        this.salary = salary;\n    }\n\n    public Company(String name, int age, String address, double salary) {\n        this.name = name;\n        this.age = age;\n        this.address = address;\n        this.salary = salary;\n    }\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public int getAge() {\n        return age;\n    }\n\n    public void setAge(int age) {\n        this.age = age;\n    }\n\n    public String getAddress() {\n        return address;\n    }\n\n    public void setAddress(String address) {\n        this.address = address;\n    }\n\n    public double getSalary() {\n        return salary;\n    }\n\n    public void setSalary(double salary) {\n        this.salary = salary;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Company{&quot; +\n                &quot;id=&quot; + id +\n                &quot;, name='&quot; + name + '\\'' +\n                &quot;, age=&quot; + age +\n                &quot;, address='&quot; + address + '\\'' +\n                &quot;, salary=&quot; + salary +\n                '}';\n    }\n}\n</code></pre>\n<p>CompanyService.java</p>\n<pre><code>public class CompanyService {\n\n    public Company findOne(long id) {\n        EntityManager entityManager = Main.getFactory().createEntityManager();\n        return entityManager.find(Company.class, id);\n    }\n\n    public void addCompany(String name, int age, String address, double salary) {\n        Company company = new Company();\n        company.setName(name);\n        company.setAge(age);\n        company.setAddress(address);\n        company.setSalary(salary);\n        EntityManager entityManager = Main.getFactory().createEntityManager();\n        EntityTransaction transaction = entityManager.getTransaction();\n        transaction.begin();\n        entityManager.contains(company);\n        transaction.commit();\n    }\n\n    public List&lt;Company&gt; findByName(String name) {\n        EntityManager entityManager = Main.getFactory().createEntityManager();\n        Query query = entityManager.createQuery(&quot;select c from Company c where c.name='&quot; + name + &quot;'&quot;);\n        return query.getResultList();\n    }\n\n    public List&lt;Company&gt; findAll() {\n        EntityManager entityManager = Main.getFactory().createEntityManager();\n        Query query = entityManager.createQuery(&quot;select c from Company c&quot;);\n        return query.getResultList();\n    }\n\n    public void updateCompanyName(long id, String name) {\n        EntityManager entityManager = Main.getFactory().createEntityManager();\n        Company company = entityManager.find(Company.class, id);\n        EntityTransaction transaction = entityManager.getTransaction();\n        transaction.begin();\n        company.setName(name);\n        entityManager.merge(company);\n        transaction.commit();\n    }\n\n    public void delete(long id) {\n        EntityManager entityManager = Main.getFactory().createEntityManager();\n        Company company = entityManager.find(Company.class, id);\n        EntityTransaction transaction = entityManager.getTransaction();\n        transaction.begin();\n        entityManager.remove(company);\n        transaction.commit();\n    }\n\n}\n</code></pre>\n<p>pom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;groupId&lt;/groupId&gt;\n    &lt;artifactId&gt;JPAZad1&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;16&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;16&lt;/maven.compiler.target&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.postgresql/postgresql --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;version&gt;42.3.6&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;!-- https://mvnrepository.com/artifact/org.hibernate/hibernate-core --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n            &lt;version&gt;5.6.9.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;!-- https://mvnrepository.com/artifact/org.hibernate/hibernate-entitymanager --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n            &lt;version&gt;5.6.9.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    \n&lt;/project&gt;\n</code></pre>\n<p>persistence.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;persistence version=&quot;2.0&quot;\n             xmlns=&quot;http://java.sun.com/xml/ns/persistence&quot;\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n             xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/persistence\nhttp://java.sun.com/xml/ns/persistence/persistence_2_0.xsd&quot;&gt;\n    &lt;persistence-unit name=&quot;MyUnit&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\n        &lt;!-- Persistence provider --&gt;\n        &lt;provider&gt;org.hibernate.jpa.HibernatePersistenceProvider&lt;/provider&gt;\n        &lt;!-- Entity classes --&gt;\n        &lt;class&gt;com.company.Donica.Company&lt;/class&gt;\n        &lt;properties&gt;\n            &lt;!-- The JDBC driver of your database --&gt;\n            &lt;property name=&quot;javax.persistence.jdbc.driver&quot;\n                      value=&quot;org.postgresql.Driver&quot; /&gt;\n            &lt;!-- The JDBC URL to the database instance --&gt;\n            &lt;property name=&quot;javax.persistence.jdbc.url&quot;\n                      value=&quot;jdbc:postgresql://localhost:5432/Nowa&quot; /&gt;\n            &lt;!-- The database username --&gt;\n            &lt;property name=&quot;javax.persistence.jdbc.user&quot; value=&quot;postgres&quot; /&gt;\n            &lt;!-- The database password --&gt;\n            &lt;property name=&quot;javax.persistence.jdbc.password&quot; value=&quot;Bakalie37&quot; /&gt;\n\n        &lt;/properties&gt;\n    &lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1661039291,"post_id":73430551,"comment_id":129676565,"body_markdown":"Put a breakpoint in updateEmployee and make sure that the incoming data is what you expect.","body":"Put a breakpoint in updateEmployee and make sure that the incoming data is what you expect."},{"owner":{"account_id":1010971,"reputation":11524,"user_id":1023553,"accept_rate":59,"display_name":"NoDataFound"},"score":0,"creation_date":1661040457,"post_id":73430551,"comment_id":129676701,"body_markdown":"Attach the JSON you send. Your problem is due to `employeeCode` being null in the entity probably because your JSON don&#39;t add `employeeCode` in the output. You would be best annotating it `@JsonIgnore` - and generate its value in the create operation.","body":"Attach the JSON you send. Your problem is due to <code>employeeCode</code> being null in the entity probably because your JSON don&#39;t add <code>employeeCode</code> in the output. You would be best annotating it <code>@JsonIgnore</code> - and generate its value in the create operation."},{"owner":{"account_id":25979387,"reputation":1,"user_id":19693378,"display_name":"Filip."},"score":0,"creation_date":1661041510,"post_id":73430551,"comment_id":129676842,"body_markdown":"I have tried annotating employeeCode in the Employee class, and it does not do anything","body":"I have tried annotating employeeCode in the Employee class, and it does not do anything"}],"answers":[{"tags":[],"owner":{"account_id":15722637,"reputation":1,"user_id":11345152,"display_name":"Jack.web"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1661042622,"creation_date":1661042605,"answer_id":73430991,"question_id":73430551,"body_markdown":"you give the employeeCode a null, but it was defined not null in database","title":"I am getting an Status 500 Internal Error from my backend with Spring Boot","body":"<p>you give the employeeCode a null, but it was defined not null in database</p>\n"},{"tags":[],"owner":{"account_id":15413608,"reputation":99,"user_id":11529048,"display_name":"Akhil"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661062220,"creation_date":1661062220,"answer_id":73432055,"question_id":73430551,"body_markdown":"The JSON payload what you are using to update your entity :\r\n\r\n{ &quot;id&quot;: 17, &quot;email&quot;: &quot;cjufi@gmail.com&quot;, &quot;imageUrl&quot;: &quot;bootdey.com/img/Content/avatar/avatar1.png&quot;, &quot;jobTitle&quot;: &quot;Java&quot;, &quot;name&quot;: &quot;cjufi&quot;, &quot;phoneNumber&quot;: &quot;555333&quot; }\r\n\r\nDoes not contain employeeCode. So it&#39;s like you are passing NULL value but in your DB you said it should be non-null. That&#39;s why you are getting error.\r\nYou can either remove the constraints for the employeeCode column or provide the actual value when updating","title":"I am getting an Status 500 Internal Error from my backend with Spring Boot","body":"<p>The JSON payload what you are using to update your entity :</p>\n<p>{ &quot;id&quot;: 17, &quot;email&quot;: &quot;cjufi@gmail.com&quot;, &quot;imageUrl&quot;: &quot;bootdey.com/img/Content/avatar/avatar1.png&quot;, &quot;jobTitle&quot;: &quot;Java&quot;, &quot;name&quot;: &quot;cjufi&quot;, &quot;phoneNumber&quot;: &quot;555333&quot; }</p>\n<p>Does not contain employeeCode. So it's like you are passing NULL value but in your DB you said it should be non-null. That's why you are getting error.\nYou can either remove the constraints for the employeeCode column or provide the actual value when updating</p>\n"},{"tags":[],"owner":{"account_id":48638,"reputation":5943,"user_id":144578,"accept_rate":79,"display_name":"Sebastiaan van den Broek"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661069873,"creation_date":1661069197,"answer_id":73432642,"question_id":73430551,"body_markdown":"If I&#39;m reading you correctly, you don&#39;t want `employeeCode` to be updatable, as defined by your Entity with `@Column(nullable = false, updatable = false)`.\r\n\r\nThe other answers are wrong, you don&#39;t have to add that field to your JSON when you&#39;re only updating. But this fails on your PUT request as you don&#39;t attempt to find the existing Employee first, but simply try to update with an entirely new object (which does have that null field that shouldn&#39;t be nullable by then) and are re-using your Entity as an input object for your Controller.\r\n\r\nThe usual way to do this would be to create a DTO specifically for this, then try to find the existing database entity based on the id and update that.\r\n\r\nAnother problem with your current approach is that there&#39;s nothing stopping someone from just passing an entirely new Employee with a new id to that update endpoint, and creating their own id that way.\r\n\r\nYou could also require that id to be in the request path so you don&#39;t have a PUT request on the main endpoint or a separate /update path, but rather have a structure like /employees/{id} where you can then parse the path and first attempt to find that employee with the parsed id.\r\n\r\nSmall example:\r\n\r\n```\r\n@PutMapping(value = &quot;/{id}&quot;, consumes = APPLICATION_JSON_VALUE)\r\npublic ResponseEntity&lt;EmployeeOutputDTO&gt; updateEmployee(\r\n    @PathVariable(&quot;id&quot;) UUID id,\r\n    @RequestBody @Valid EmployeeInputDTO employeeDTO) {\r\n    EmployeeOutputDTO responseDTO = employeeService.apiUpdate(id, employeeDTO);\r\n    return ResponseEntity.ok(responseDTO);\r\n}\r\n```\r\n\r\n```\r\npublic EmployeeOutputDTO apiUpdate(UUID id, EmployeeInputDTO employeeDTO) {\r\n    log.info(&quot;Updating employee&quot;);\r\n\r\n    Employee existingEmployee = findOrThrowNotFoundException(id);\r\n    // ...do update\r\n}\r\n```\r\n","title":"I am getting an Status 500 Internal Error from my backend with Spring Boot","body":"<p>If I'm reading you correctly, you don't want <code>employeeCode</code> to be updatable, as defined by your Entity with <code>@Column(nullable = false, updatable = false)</code>.</p>\n<p>The other answers are wrong, you don't have to add that field to your JSON when you're only updating. But this fails on your PUT request as you don't attempt to find the existing Employee first, but simply try to update with an entirely new object (which does have that null field that shouldn't be nullable by then) and are re-using your Entity as an input object for your Controller.</p>\n<p>The usual way to do this would be to create a DTO specifically for this, then try to find the existing database entity based on the id and update that.</p>\n<p>Another problem with your current approach is that there's nothing stopping someone from just passing an entirely new Employee with a new id to that update endpoint, and creating their own id that way.</p>\n<p>You could also require that id to be in the request path so you don't have a PUT request on the main endpoint or a separate /update path, but rather have a structure like /employees/{id} where you can then parse the path and first attempt to find that employee with the parsed id.</p>\n<p>Small example:</p>\n<pre><code>@PutMapping(value = &quot;/{id}&quot;, consumes = APPLICATION_JSON_VALUE)\npublic ResponseEntity&lt;EmployeeOutputDTO&gt; updateEmployee(\n    @PathVariable(&quot;id&quot;) UUID id,\n    @RequestBody @Valid EmployeeInputDTO employeeDTO) {\n    EmployeeOutputDTO responseDTO = employeeService.apiUpdate(id, employeeDTO);\n    return ResponseEntity.ok(responseDTO);\n}\n</code></pre>\n<pre><code>public EmployeeOutputDTO apiUpdate(UUID id, EmployeeInputDTO employeeDTO) {\n    log.info(&quot;Updating employee&quot;);\n\n    Employee existingEmployee = findOrThrowNotFoundException(id);\n    // ...do update\n}\n</code></pre>\n"}],"owner":{"account_id":25979387,"reputation":1,"user_id":19693378,"display_name":"Filip."},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":641,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1661069873,"creation_date":1661035403,"question_id":73430551,"body_markdown":"So I am testing my employee manager app in postman, and my delete get and all of the other requests work, but my update(put) request doesn&#39;t. I have also made the front end in Angular that is connected to the BE, but I think the Angular part isn&#39;t making the problem, if someone thinks that it is, please let me know I will gladly post that code also.  \r\nI am not sure how to fix this error, this is the code: \r\n\r\n**Employee Service**\r\n```\r\n@Service(&quot;employeeService&quot;)\r\n@Transactional\r\npublic class EmployeeService {\r\n    private final EmployeeRepo employeeRepo;\r\n\r\n    @Autowired\r\n    public EmployeeService(EmployeeRepo employeeRepo) {\r\n        this.employeeRepo = employeeRepo;\r\n    }\r\n\r\n    public Employee addEmployee(Employee employee) {\r\n        employee.setEmployeeCode(UUID.randomUUID().toString());\r\n        return employeeRepo.save(employee);\r\n    }\r\n\r\n    public List&lt;Employee&gt; findAllEmployees() {\r\n        return employeeRepo.findAll();\r\n    }\r\n\r\n    public Employee updateEmployee(Employee employee) {\r\n        return employeeRepo.save(employee);\r\n    }\r\n\r\n    public Employee findEmployeeById(Long id) {\r\n        return employeeRepo.findEmployeeById(id)\r\n                .orElseThrow(() -&gt; new UserNotFoundException(&quot;User by id &quot; + id + &quot; was not found&quot;));\r\n    }\r\n     public void deleteEmployee(Long id){\r\n        employeeRepo.deleteById(id);\r\n         }\r\n}\r\n```\r\n\r\n**Employee Resource**\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/employee&quot;)\r\npublic class EmployeeResource {\r\n    private final EmployeeService employeeService;\r\n\r\n    public EmployeeResource(EmployeeService employeeService) {\r\n        this.employeeService = employeeService;\r\n    }\r\n\r\n    @GetMapping(&quot;/all&quot;)\r\n    public ResponseEntity&lt;List&lt;Employee&gt;&gt; getAllEmployees () {//vratice http responce u cijem body-u ce biti lista zaposlenih\r\n        List&lt;Employee&gt; employees = employeeService.findAllEmployees();\r\n        return new ResponseEntity&lt;&gt;(employees, HttpStatus.OK);\r\n    }\r\n\r\n    @GetMapping(&quot;/find/{id}&quot;)\r\n    public ResponseEntity&lt;Employee&gt; getEmployeeById (@PathVariable(&quot;id&quot;) Long id) {\r\n        Employee employee = employeeService.findEmployeeById(id);\r\n        return new ResponseEntity&lt;&gt;(employee, HttpStatus.OK);\r\n    }\r\n\r\n    @PostMapping(&quot;/add&quot;)\r\n    public ResponseEntity&lt;Employee&gt; addEmployee(@RequestBody Employee employee) {//posto u JSON formatu vraca ceo kao body\r\n        Employee newEmployee = employeeService.addEmployee(employee);\r\n        return new ResponseEntity&lt;&gt;(newEmployee, HttpStatus.CREATED);\r\n    }\r\n\r\n    @PutMapping(&quot;/update&quot;)\r\n    public ResponseEntity&lt;Employee&gt; updateEmployee(@RequestBody Employee employee) {\r\n        Employee updateEmployee = employeeService.updateEmployee(employee);\r\n        return new ResponseEntity&lt;&gt;(updateEmployee, HttpStatus.OK);\r\n    }\r\n\r\n    @DeleteMapping(&quot;/delete/{id}&quot;)\r\n    public ResponseEntity&lt;?&gt; deleteEmployee(@PathVariable(&quot;id&quot;) Long id) {\r\n        employeeService.deleteEmployee(id);\r\n        return new ResponseEntity&lt;&gt;(HttpStatus.OK);\r\n    }\r\n}\r\n```\r\n\r\n**Employee Repository**\r\n```\r\n@Repository\r\npublic interface EmployeeRepo extends JpaRepository&lt;Employee, Long&gt; {\r\n   // employeeRepo.deleteById(Long id);\r\n    Optional&lt;Employee&gt; findEmployeeById(Long id);\r\n}\r\n```\r\n\r\n**Employee**\r\n```\r\n@Entity\r\npublic class Employee implements Serializable {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(nullable = false, updatable = false)\r\n    private Long id;\r\n    private String name;\r\n    private String email;\r\n    private String jobTitle;\r\n    private String phoneNumber;\r\n    private String imageUrl;\r\n    @Column(nullable = false, updatable = false)\r\n    private String employeeCode;\r\n\r\n    public Employee() {}\r\n\r\n    public Employee(String name, String email, String jobTitle, String phoneNumber, String imageUrl, String employeeCode) {\r\n        this.name = name;\r\n        this.email = email;\r\n        this.jobTitle = jobTitle;\r\n        this.phoneNumber = phoneNumber;\r\n        this.imageUrl = imageUrl;\r\n        this.employeeCode = employeeCode;\r\n    }\r\n\r\n    public Long getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(Long id) {\r\n        id = id;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public String getEmail() {\r\n        return email;\r\n    }\r\n\r\n    public void setEmail(String email) {\r\n        this.email = email;\r\n    }\r\n\r\n    public String getJobTitle() {\r\n        return jobTitle;\r\n    }\r\n\r\n    public void setJobTitle(String jobTitle) {\r\n        this.jobTitle = jobTitle;\r\n    }\r\n\r\n    public String getPhoneNumber() {\r\n        return phoneNumber;\r\n    }\r\n\r\n    public void setPhoneNumber(String phoneNumber) {\r\n        this.phoneNumber = phoneNumber;\r\n    }\r\n\r\n    public String getImageUrl() {\r\n        return imageUrl;\r\n    }\r\n\r\n    public void setImageUrl(String imageUrl) {\r\n        this.imageUrl = imageUrl;\r\n    }\r\n\r\n    public String getEmployeeCode() {\r\n        return employeeCode;\r\n    }\r\n\r\n    public void setEmployeeCode(String employeeCode) {\r\n        this.employeeCode = employeeCode;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;Employee{&quot; +\r\n                &quot;Id=&quot; + id +\r\n                &quot;, name=&#39;&quot; + name + &#39;\\&#39;&#39; +\r\n                &quot;, email=&#39;&quot; + email + &#39;\\&#39;&#39; +\r\n                &quot;, jobTitle=&#39;&quot; + jobTitle + &#39;\\&#39;&#39; +\r\n                &quot;, phoneNumber=&#39;&quot; + phoneNumber + &#39;\\&#39;&#39; +\r\n                &quot;, imageUrl=&#39;&quot; + imageUrl + &#39;\\&#39;&#39; +\r\n                &quot;, employeeCode=&#39;&quot; + employeeCode + &#39;\\&#39;&#39; +\r\n                &#39;}&#39;;\r\n    }\r\n}\r\n```\r\n\r\n**Stack Trace**\r\n\r\n```\r\norg.hibernate.PropertyValueException: not-null property references a null or transient value : com.cjufi.employeemanager.model.Employee.employeeCode\r\n\tat org.hibernate.engine.internal.Nullability.checkNullability(Nullability.java:111) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.engine.internal.Nullability.checkNullability(Nullability.java:55) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.action.internal.AbstractEntityInsertAction.nullifyTransientReferencesIfNotAlready(AbstractEntityInsertAction.java:116) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:72) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:645) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:282) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:263) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:317) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:330) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:287) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:193) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:123) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:185) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:128) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:756) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.internal.SessionImpl.persist(SessionImpl.java:742) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:577) ~[na:na]\r\n\tat org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:362) ~[spring-orm-5.3.22.jar:5.3.22]\r\n\tat jdk.proxy2/jdk.proxy2.$Proxy96.persist(Unknown Source) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:577) ~[na:na]\r\n\tat org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311) ~[spring-orm-5.3.22.jar:5.3.22]\r\n\tat jdk.proxy2/jdk.proxy2.$Proxy96.persist(Unknown Source) ~[na:na]\r\n\tat org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:666) ~[spring-data-jpa-2.7.2.jar:2.7.2]\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:577) ~[na:na]\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:289) ~[spring-data-commons-2.7.2.jar:2.7.2]\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137) ~[spring-data-commons-2.7.2.jar:2.7.2]\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121) ~[spring-data-commons-2.7.2.jar:2.7.2]\r\n\tat org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:530) ~[spring-data-commons-2.7.2.jar:2.7.2]\r\n\tat org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:286) ~[spring-data-commons-2.7.2.jar:2.7.2]\r\n\tat org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:640) ~[spring-data-commons-2.7.2.jar:2.7.2]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164) ~[spring-data-commons-2.7.2.jar:2.7.2]\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139) ~[spring-data-commons-2.7.2.jar:2.7.2]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:81) ~[spring-data-commons-2.7.2.jar:2.7.2]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-5.3.22.jar:5.3.22]\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388) ~[spring-tx-5.3.22.jar:5.3.22]\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-5.3.22.jar:5.3.22]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137) ~[spring-tx-5.3.22.jar:5.3.22]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174) ~[spring-data-jpa-2.7.2.jar:2.7.2]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215) ~[spring-aop-5.3.22.jar:5.3.22]\r\n\tat jdk.proxy2/jdk.proxy2.$Proxy100.save(Unknown Source) ~[na:na]\r\n\tat com.cjufi.employeemanager.service.EmployeeService.updateEmployee(EmployeeService.java:34) ~[classes/:na]\r\n\tat com.cjufi.employeemanager.service.EmployeeService$$FastClassBySpringCGLIB$$f9421ab5.invoke(&lt;generated&gt;) ~[classes/:na]\r\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.22.jar:5.3.22]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793) ~[spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-5.3.22.jar:5.3.22]\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388) ~[spring-tx-5.3.22.jar:5.3.22]\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-5.3.22.jar:5.3.22]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-5.3.22.jar:5.3.22]\r\n\tat com.cjufi.employeemanager.service.EmployeeService$$EnhancerBySpringCGLIB$$83e2c27e.updateEmployee(&lt;generated&gt;) ~[classes/:na]\r\n\tat com.cjufi.employeemanager.resource.EmployeeResource.updateEmployee(EmployeeResource.java:40) ~[classes/:na]\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:577) ~[na:na]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.22.jar:5.3.22]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.22.jar:5.3.22]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.22.jar:5.3.22]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.22.jar:5.3.22]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.22.jar:5.3.22]\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.22.jar:5.3.22]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1070) ~[spring-webmvc-5.3.22.jar:5.3.22]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.22.jar:5.3.22]\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.22.jar:5.3.22]\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:920) ~[spring-webmvc-5.3.22.jar:5.3.22]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:684) ~[tomcat-embed-core-9.0.65.jar:4.0.FR]\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.22.jar:5.3.22]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.65.jar:4.0.FR]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-5.3.22.jar:5.3.22]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.22.jar:5.3.22]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.22.jar:5.3.22]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.22.jar:5.3.22]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.22.jar:5.3.22]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.22.jar:5.3.22]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.22.jar:5.3.22]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.22.jar:5.3.22]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n\r\nHibernate: select employee0_.id as id1_0_, employee0_.email as email2_0_, employee0_.employee_code as employee3_0_, employee0_.image_url as image_ur4_0_, employee0_.job_title as job_titl5_0_, employee0_.name as name6_0_, employee0_.phone_number as phone_nu7_0_ from employee employee0_\r\n2022-08-21 02:01:02.830  WARN 7332 --- [l-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=44m1s400ms600&#181;s500ns).\r\n```\r\n\r\nExample of my JSON that I put  \r\n`{ &quot;id&quot;: 17, &quot;email&quot;: &quot;cjufi@gmail.com&quot;, &quot;imageUrl&quot;: &quot;bootdey.com/img/Content/avatar/avatar1.png&quot;, &quot;jobTitle&quot;: &quot;Java&quot;, &quot;name&quot;: &quot;cjufi&quot;, &quot;phoneNumber&quot;: &quot;555333&quot; }`","title":"I am getting an Status 500 Internal Error from my backend with Spring Boot","body":"<p>So I am testing my employee manager app in postman, and my delete get and all of the other requests work, but my update(put) request doesn't. I have also made the front end in Angular that is connected to the BE, but I think the Angular part isn't making the problem, if someone thinks that it is, please let me know I will gladly post that code also.<br />\nI am not sure how to fix this error, this is the code:</p>\n<p><strong>Employee Service</strong></p>\n<pre><code>@Service(&quot;employeeService&quot;)\n@Transactional\npublic class EmployeeService {\n    private final EmployeeRepo employeeRepo;\n\n    @Autowired\n    public EmployeeService(EmployeeRepo employeeRepo) {\n        this.employeeRepo = employeeRepo;\n    }\n\n    public Employee addEmployee(Employee employee) {\n        employee.setEmployeeCode(UUID.randomUUID().toString());\n        return employeeRepo.save(employee);\n    }\n\n    public List&lt;Employee&gt; findAllEmployees() {\n        return employeeRepo.findAll();\n    }\n\n    public Employee updateEmployee(Employee employee) {\n        return employeeRepo.save(employee);\n    }\n\n    public Employee findEmployeeById(Long id) {\n        return employeeRepo.findEmployeeById(id)\n                .orElseThrow(() -&gt; new UserNotFoundException(&quot;User by id &quot; + id + &quot; was not found&quot;));\n    }\n     public void deleteEmployee(Long id){\n        employeeRepo.deleteById(id);\n         }\n}\n</code></pre>\n<p><strong>Employee Resource</strong></p>\n<pre><code>@RestController\n@RequestMapping(&quot;/employee&quot;)\npublic class EmployeeResource {\n    private final EmployeeService employeeService;\n\n    public EmployeeResource(EmployeeService employeeService) {\n        this.employeeService = employeeService;\n    }\n\n    @GetMapping(&quot;/all&quot;)\n    public ResponseEntity&lt;List&lt;Employee&gt;&gt; getAllEmployees () {//vratice http responce u cijem body-u ce biti lista zaposlenih\n        List&lt;Employee&gt; employees = employeeService.findAllEmployees();\n        return new ResponseEntity&lt;&gt;(employees, HttpStatus.OK);\n    }\n\n    @GetMapping(&quot;/find/{id}&quot;)\n    public ResponseEntity&lt;Employee&gt; getEmployeeById (@PathVariable(&quot;id&quot;) Long id) {\n        Employee employee = employeeService.findEmployeeById(id);\n        return new ResponseEntity&lt;&gt;(employee, HttpStatus.OK);\n    }\n\n    @PostMapping(&quot;/add&quot;)\n    public ResponseEntity&lt;Employee&gt; addEmployee(@RequestBody Employee employee) {//posto u JSON formatu vraca ceo kao body\n        Employee newEmployee = employeeService.addEmployee(employee);\n        return new ResponseEntity&lt;&gt;(newEmployee, HttpStatus.CREATED);\n    }\n\n    @PutMapping(&quot;/update&quot;)\n    public ResponseEntity&lt;Employee&gt; updateEmployee(@RequestBody Employee employee) {\n        Employee updateEmployee = employeeService.updateEmployee(employee);\n        return new ResponseEntity&lt;&gt;(updateEmployee, HttpStatus.OK);\n    }\n\n    @DeleteMapping(&quot;/delete/{id}&quot;)\n    public ResponseEntity&lt;?&gt; deleteEmployee(@PathVariable(&quot;id&quot;) Long id) {\n        employeeService.deleteEmployee(id);\n        return new ResponseEntity&lt;&gt;(HttpStatus.OK);\n    }\n}\n</code></pre>\n<p><strong>Employee Repository</strong></p>\n<pre><code>@Repository\npublic interface EmployeeRepo extends JpaRepository&lt;Employee, Long&gt; {\n   // employeeRepo.deleteById(Long id);\n    Optional&lt;Employee&gt; findEmployeeById(Long id);\n}\n</code></pre>\n<p><strong>Employee</strong></p>\n<pre><code>@Entity\npublic class Employee implements Serializable {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(nullable = false, updatable = false)\n    private Long id;\n    private String name;\n    private String email;\n    private String jobTitle;\n    private String phoneNumber;\n    private String imageUrl;\n    @Column(nullable = false, updatable = false)\n    private String employeeCode;\n\n    public Employee() {}\n\n    public Employee(String name, String email, String jobTitle, String phoneNumber, String imageUrl, String employeeCode) {\n        this.name = name;\n        this.email = email;\n        this.jobTitle = jobTitle;\n        this.phoneNumber = phoneNumber;\n        this.imageUrl = imageUrl;\n        this.employeeCode = employeeCode;\n    }\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n    public String getJobTitle() {\n        return jobTitle;\n    }\n\n    public void setJobTitle(String jobTitle) {\n        this.jobTitle = jobTitle;\n    }\n\n    public String getPhoneNumber() {\n        return phoneNumber;\n    }\n\n    public void setPhoneNumber(String phoneNumber) {\n        this.phoneNumber = phoneNumber;\n    }\n\n    public String getImageUrl() {\n        return imageUrl;\n    }\n\n    public void setImageUrl(String imageUrl) {\n        this.imageUrl = imageUrl;\n    }\n\n    public String getEmployeeCode() {\n        return employeeCode;\n    }\n\n    public void setEmployeeCode(String employeeCode) {\n        this.employeeCode = employeeCode;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Employee{&quot; +\n                &quot;Id=&quot; + id +\n                &quot;, name='&quot; + name + '\\'' +\n                &quot;, email='&quot; + email + '\\'' +\n                &quot;, jobTitle='&quot; + jobTitle + '\\'' +\n                &quot;, phoneNumber='&quot; + phoneNumber + '\\'' +\n                &quot;, imageUrl='&quot; + imageUrl + '\\'' +\n                &quot;, employeeCode='&quot; + employeeCode + '\\'' +\n                '}';\n    }\n}\n</code></pre>\n<p><strong>Stack Trace</strong></p>\n<pre><code>org.hibernate.PropertyValueException: not-null property references a null or transient value : com.cjufi.employeemanager.model.Employee.employeeCode\n    at org.hibernate.engine.internal.Nullability.checkNullability(Nullability.java:111) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.engine.internal.Nullability.checkNullability(Nullability.java:55) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.action.internal.AbstractEntityInsertAction.nullifyTransientReferencesIfNotAlready(AbstractEntityInsertAction.java:116) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:72) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:645) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:282) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:263) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:317) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:330) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:287) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:193) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:123) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:185) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:128) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:756) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:742) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:577) ~[na:na]\n    at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:362) ~[spring-orm-5.3.22.jar:5.3.22]\n    at jdk.proxy2/jdk.proxy2.$Proxy96.persist(Unknown Source) ~[na:na]\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:577) ~[na:na]\n    at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311) ~[spring-orm-5.3.22.jar:5.3.22]\n    at jdk.proxy2/jdk.proxy2.$Proxy96.persist(Unknown Source) ~[na:na]\n    at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:666) ~[spring-data-jpa-2.7.2.jar:2.7.2]\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:577) ~[na:na]\n    at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:289) ~[spring-data-commons-2.7.2.jar:2.7.2]\n    at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137) ~[spring-data-commons-2.7.2.jar:2.7.2]\n    at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121) ~[spring-data-commons-2.7.2.jar:2.7.2]\n    at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:530) ~[spring-data-commons-2.7.2.jar:2.7.2]\n    at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:286) ~[spring-data-commons-2.7.2.jar:2.7.2]\n    at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:640) ~[spring-data-commons-2.7.2.jar:2.7.2]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164) ~[spring-data-commons-2.7.2.jar:2.7.2]\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139) ~[spring-data-commons-2.7.2.jar:2.7.2]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:81) ~[spring-data-commons-2.7.2.jar:2.7.2]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-5.3.22.jar:5.3.22]\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388) ~[spring-tx-5.3.22.jar:5.3.22]\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-5.3.22.jar:5.3.22]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137) ~[spring-tx-5.3.22.jar:5.3.22]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174) ~[spring-data-jpa-2.7.2.jar:2.7.2]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215) ~[spring-aop-5.3.22.jar:5.3.22]\n    at jdk.proxy2/jdk.proxy2.$Proxy100.save(Unknown Source) ~[na:na]\n    at com.cjufi.employeemanager.service.EmployeeService.updateEmployee(EmployeeService.java:34) ~[classes/:na]\n    at com.cjufi.employeemanager.service.EmployeeService$$FastClassBySpringCGLIB$$f9421ab5.invoke(&lt;generated&gt;) ~[classes/:na]\n    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.22.jar:5.3.22]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793) ~[spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-5.3.22.jar:5.3.22]\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388) ~[spring-tx-5.3.22.jar:5.3.22]\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-5.3.22.jar:5.3.22]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-5.3.22.jar:5.3.22]\n    at com.cjufi.employeemanager.service.EmployeeService$$EnhancerBySpringCGLIB$$83e2c27e.updateEmployee(&lt;generated&gt;) ~[classes/:na]\n    at com.cjufi.employeemanager.resource.EmployeeResource.updateEmployee(EmployeeResource.java:40) ~[classes/:na]\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:577) ~[na:na]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.22.jar:5.3.22]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.22.jar:5.3.22]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.22.jar:5.3.22]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.22.jar:5.3.22]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.22.jar:5.3.22]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.22.jar:5.3.22]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1070) ~[spring-webmvc-5.3.22.jar:5.3.22]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.22.jar:5.3.22]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.22.jar:5.3.22]\n    at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:920) ~[spring-webmvc-5.3.22.jar:5.3.22]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:684) ~[tomcat-embed-core-9.0.65.jar:4.0.FR]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.22.jar:5.3.22]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.65.jar:4.0.FR]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-5.3.22.jar:5.3.22]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.22.jar:5.3.22]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.22.jar:5.3.22]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.22.jar:5.3.22]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.22.jar:5.3.22]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.22.jar:5.3.22]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.22.jar:5.3.22]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.22.jar:5.3.22]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n\nHibernate: select employee0_.id as id1_0_, employee0_.email as email2_0_, employee0_.employee_code as employee3_0_, employee0_.image_url as image_ur4_0_, employee0_.job_title as job_titl5_0_, employee0_.name as name6_0_, employee0_.phone_number as phone_nu7_0_ from employee employee0_\n2022-08-21 02:01:02.830  WARN 7332 --- [l-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=44m1s400ms600µs500ns).\n</code></pre>\n<p>Example of my JSON that I put<br />\n<code>{ &quot;id&quot;: 17, &quot;email&quot;: &quot;cjufi@gmail.com&quot;, &quot;imageUrl&quot;: &quot;bootdey.com/img/Content/avatar/avatar1.png&quot;, &quot;jobTitle&quot;: &quot;Java&quot;, &quot;name&quot;: &quot;cjufi&quot;, &quot;phoneNumber&quot;: &quot;555333&quot; }</code></p>\n"},{"tags":["java","android-studio","activity-recognition"],"comments":[{"owner":{"account_id":17668560,"reputation":166,"user_id":12825336,"display_name":"Conta"},"score":0,"creation_date":1661069890,"post_id":73432654,"comment_id":129679830,"body_markdown":"you&#39;ve already imported the library into your activity code, right?If yes, have you tried to implement an older version? (Try with 19.0.1). So: implementation &#39;com.google.android.gms:play-services-location:19.0.1&#39;","body":"you&#39;ve already imported the library into your activity code, right?If yes, have you tried to implement an older version? (Try with 19.0.1). So: implementation &#39;com.google.android.gms:play-services-location:19.0.1&#39;"},{"owner":{"account_id":15988224,"reputation":49,"user_id":19224324,"display_name":"Nick"},"score":0,"creation_date":1661076521,"post_id":73432654,"comment_id":129681001,"body_markdown":"I tested with ver. 19.0.1. Same result. Looking like my Android Studio never heared by TransitionReceiver.","body":"I tested with ver. 19.0.1. Same result. Looking like my Android Studio never heared by TransitionReceiver."},{"owner":{"account_id":17668560,"reputation":166,"user_id":12825336,"display_name":"Conta"},"score":0,"creation_date":1661179105,"post_id":73432654,"comment_id":129704181,"body_markdown":"but you&#39;ve already imported the library into your activity code? the TransitionsReceiver object in: `private TransitionsReceiver mTransitionsReceiver` the IDE points it out to you red? or is it just red without underlining? because if red with underlining you would have to import the package into the imports of that activity","body":"but you&#39;ve already imported the library into your activity code? the TransitionsReceiver object in: <code>private TransitionsReceiver mTransitionsReceiver</code> the IDE points it out to you red? or is it just red without underlining? because if red with underlining you would have to import the package into the imports of that activity"}],"owner":{"account_id":15988224,"reputation":49,"user_id":19224324,"display_name":"Nick"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1661069380,"creation_date":1661069380,"question_id":73432654,"body_markdown":"Trying to test next Google sample https://developer.android.com/codelabs/activity-recognition-transition#4 I was stuck on 5 step.\r\n\r\n    private TransitionsReceiver mTransitionsReceiver; \r\nreturn me next error message &quot;cannot resolve symbol TransitionReceiver&quot;.\r\n\r\nOn my build.gradle I have \r\n\r\n    implementation &#39;com.google.android.gms:play-services-location:20.0.0&#39;\r\n\r\nWhat I do wrong?","title":"cannot resove symbol TransitionsReceiver","body":"<p>Trying to test next Google sample <a href=\"https://developer.android.com/codelabs/activity-recognition-transition#4\" rel=\"nofollow noreferrer\">https://developer.android.com/codelabs/activity-recognition-transition#4</a> I was stuck on 5 step.</p>\n<pre><code>private TransitionsReceiver mTransitionsReceiver; \n</code></pre>\n<p>return me next error message &quot;cannot resolve symbol TransitionReceiver&quot;.</p>\n<p>On my build.gradle I have</p>\n<pre><code>implementation 'com.google.android.gms:play-services-location:20.0.0'\n</code></pre>\n<p>What I do wrong?</p>\n"},{"tags":["java","elasticsearch","homebrew"],"comments":[{"owner":{"account_id":6887735,"reputation":21370,"user_id":5292302,"accept_rate":100,"display_name":"Petter Friberg"},"score":2,"creation_date":1495833782,"post_id":44210273,"comment_id":75433088,"body_markdown":"Possible duplicate of [Unable to install Elasticsearch on Mac Sierra (10.12.2)](https://stackoverflow.com/questions/41149796/unable-to-install-elasticsearch-on-mac-sierra-10-12-2)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/41149796/unable-to-install-elasticsearch-on-mac-sierra-10-12-2\">Unable to install Elasticsearch on Mac Sierra (10.12.2)</a>"}],"answers":[{"tags":[],"owner":{"account_id":2021629,"reputation":57953,"user_id":1807667,"accept_rate":60,"display_name":"Ortomala Lokni"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1496776524,"creation_date":1496776524,"answer_id":44398104,"question_id":44210273,"body_markdown":"If you have set :\r\n\r\n    export GREP_OPTIONS=&#39;--color=always&#39;\r\nin your `.bashrc` or somewhere else, it will probably broke shell pipes and causes problems. Try to remove it.\r\n","title":"elasticsearch - Could not find or load main class -Xms2g","body":"<p>If you have set :</p>\n\n<pre><code>export GREP_OPTIONS='--color=always'\n</code></pre>\n\n<p>in your <code>.bashrc</code> or somewhere else, it will probably broke shell pipes and causes problems. Try to remove it.</p>\n"},{"tags":[],"owner":{"account_id":7792321,"reputation":994,"user_id":6602159,"display_name":"M. Rostami"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1643376436,"creation_date":1643376436,"answer_id":70894532,"question_id":44210273,"body_markdown":"In my instance, it was a mistake when I fill the environment in the docker-compose file. It was like:\r\n```\r\n...\r\n    environment:\r\n      - ES_JAVA_OPTS=&quot;-Xms1g -Xmx1g&quot;\r\n...\r\n```\r\nSo, the docker couldn&#39;t set the env properly, then after I recreated the container, it has fixed:\r\n```\r\n...\r\n    environment:\r\n      - &quot;ES_JAVA_OPTS=-Xms1g -Xmx1g&quot;\r\n...\r\n```","title":"elasticsearch - Could not find or load main class -Xms2g","body":"<p>In my instance, it was a mistake when I fill the environment in the docker-compose file. It was like:</p>\n<pre><code>...\n    environment:\n      - ES_JAVA_OPTS=&quot;-Xms1g -Xmx1g&quot;\n...\n</code></pre>\n<p>So, the docker couldn't set the env properly, then after I recreated the container, it has fixed:</p>\n<pre><code>...\n    environment:\n      - &quot;ES_JAVA_OPTS=-Xms1g -Xmx1g&quot;\n...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7561297,"reputation":1,"user_id":5738780,"display_name":"Faraz Ahmed"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661069032,"creation_date":1661069032,"answer_id":73432627,"question_id":44210273,"body_markdown":"If there is any anti-virus or security scanner tool installed on the host, it may delete the vulnerable packages which are required by elasticsearch. In my case, clamav scanner deleted log4j package on the host machine which is required by elasticsearch. The logs did not indicate anything like that, instead I was getting the following error:\r\n\r\n```Error: Could not find or load main class 8-:-Xmx1g Caused by: java.lang.ClassNotFoundException: 8-:-Xmx1g```\r\n\r\nThe issue was fixed by installing log4j using yum package manager\r\n\r\n```yum install log4j```\r\n\r\n\r\n\r\n\r\n","title":"elasticsearch - Could not find or load main class -Xms2g","body":"<p>If there is any anti-virus or security scanner tool installed on the host, it may delete the vulnerable packages which are required by elasticsearch. In my case, clamav scanner deleted log4j package on the host machine which is required by elasticsearch. The logs did not indicate anything like that, instead I was getting the following error:</p>\n<p><code>Error: Could not find or load main class 8-:-Xmx1g Caused by: java.lang.ClassNotFoundException: 8-:-Xmx1g</code></p>\n<p>The issue was fixed by installing log4j using yum package manager</p>\n<p><code>yum install log4j</code></p>\n"}],"owner":{"account_id":7428895,"reputation":13,"user_id":5650573,"display_name":"Micodel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2404,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":44398104,"answer_count":3,"score":1,"last_activity_date":1661069032,"creation_date":1495833659,"question_id":44210273,"body_markdown":"I installed elasticsearch with homebrew on Mac OSX Sierra (10.12.5).\r\n\r\nThe installation with homebrew appears successful and brew info states it is installed meeting all prerequisites.\r\n\r\nWhen I go to run the &quot;elasticsearch&quot; command, I get the following error...\r\n\r\n    Error: Could not find or load main class -Xms2g\r\n\r\nI have tried installing java 1.8 both via homebrew and manually.\r\n\r\nI am using java JDK not JRE.\r\n\r\nI also tried installing elasticsearch manually, however the installation itself fails with the same exact error.\r\n\r\nAny insight would be appreciated.\r\n\r\n\r\n=== UPDATE ===\r\n\r\nQuick answer below.\r\n\r\nAdditional information can be found here:\r\nhttps://stackoverflow.com/questions/41149796/unable-to-install-elasticsearch-on-mac-sierra-10-12-2\r\n\r\n","title":"elasticsearch - Could not find or load main class -Xms2g","body":"<p>I installed elasticsearch with homebrew on Mac OSX Sierra (10.12.5).</p>\n\n<p>The installation with homebrew appears successful and brew info states it is installed meeting all prerequisites.</p>\n\n<p>When I go to run the \"elasticsearch\" command, I get the following error...</p>\n\n<pre><code>Error: Could not find or load main class -Xms2g\n</code></pre>\n\n<p>I have tried installing java 1.8 both via homebrew and manually.</p>\n\n<p>I am using java JDK not JRE.</p>\n\n<p>I also tried installing elasticsearch manually, however the installation itself fails with the same exact error.</p>\n\n<p>Any insight would be appreciated.</p>\n\n<p>=== UPDATE ===</p>\n\n<p>Quick answer below.</p>\n\n<p>Additional information can be found here:\n<a href=\"https://stackoverflow.com/questions/41149796/unable-to-install-elasticsearch-on-mac-sierra-10-12-2\">Unable to install Elasticsearch on Mac Sierra (10.12.2)</a></p>\n"},{"tags":["java","logging","log4j2","jsontemplate"],"comments":[{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":0,"creation_date":1661085315,"post_id":73432624,"comment_id":129682822,"body_markdown":"please use text instead of images in your question. You probably have a library version mismatch: can you run `mvn dependency:list` and add the result (as text) to your question)?","body":"please use text instead of images in your question. You probably have a library version mismatch: can you run <code>mvn dependency:list</code> and add the result (as text) to your question)?"},{"owner":{"account_id":13784342,"reputation":79,"user_id":9948679,"display_name":"anshu_anand"},"score":0,"creation_date":1661151929,"post_id":73432624,"comment_id":129694540,"body_markdown":"Thanks @PiotrP.Karwasz , I am actually getting these errors in VM , so I am unable to copy paste here and cant login inside vm . So please bare with images , I am adding the list , Please Check .","body":"Thanks @PiotrP.Karwasz , I am actually getting these errors in VM , so I am unable to copy paste here and cant login inside vm . So please bare with images , I am adding the list , Please Check ."},{"owner":{"account_id":11516104,"reputation":155,"user_id":8439424,"display_name":"yobb"},"score":0,"creation_date":1670927536,"post_id":73432624,"comment_id":131981086,"body_markdown":"Got the same issue, created a thread here https://stackoverflow.com/q/74783286/8439424","body":"Got the same issue, created a thread here <a href=\"https://stackoverflow.com/q/74783286/8439424\">stackoverflow.com/q/74783286/8439424</a>"}],"owner":{"account_id":13784342,"reputation":79,"user_id":9948679,"display_name":"anshu_anand"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":144,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1661069021,"creation_date":1661069021,"question_id":73432624,"body_markdown":"Error : -\r\n  [![IllegalAccessError][1]][1]\r\n\r\n\r\nLog4j2.xml :- \r\n\r\n\r\n[![Log4j2 configuration][2]][2]\r\n\r\nMaven dependencies :- \r\n\r\n[![pom.xml][3]][3]\r\n\r\nCode :- \r\n\r\n[![Controller class][4]][4]\r\n\r\n\r\nTIA\r\n  [1]: https://i.stack.imgur.com/vvEQv.png\r\n  [2]: https://i.stack.imgur.com/ZhLEu.png\r\n  [3]: https://i.stack.imgur.com/99aWb.png\r\n  [4]: https://i.stack.imgur.com/x62a2.png","title":"IllegalAccessError in JsonTemplateLayout in log4j2","body":"<p>Error : -\n[![IllegalAccessError][1]][1]</p>\n<p>Log4j2.xml :-</p>\n<p>[![Log4j2 configuration][2]][2]</p>\n<p>Maven dependencies :-</p>\n<p>[![pom.xml][3]][3]</p>\n<p>Code :-</p>\n<p>[![Controller class][4]][4]</p>\n<p>TIA\n[1]: <a href=\"https://i.stack.imgur.com/vvEQv.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/vvEQv.png</a>\n[2]: <a href=\"https://i.stack.imgur.com/ZhLEu.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/ZhLEu.png</a>\n[3]: <a href=\"https://i.stack.imgur.com/99aWb.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/99aWb.png</a>\n[4]: <a href=\"https://i.stack.imgur.com/x62a2.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/x62a2.png</a></p>\n"},{"tags":["java","jpa","one-to-many"],"comments":[{"owner":{"account_id":1023013,"reputation":16655,"user_id":1032890,"accept_rate":100,"display_name":"GeertPt"},"score":0,"creation_date":1660723202,"post_id":73379294,"comment_id":129597149,"body_markdown":"Can you show the code where it does throw that exception?\nAnd a couple more lines of the stacktrace?\n\nWhy are you not using an @Id field?","body":"Can you show the code where it does throw that exception? And a couple more lines of the stacktrace?  Why are you not using an @Id field?"}],"answers":[{"tags":[],"owner":{"account_id":3214004,"reputation":1859,"user_id":4871676,"accept_rate":90,"display_name":"Plain_Dude_Sleeping_Alone"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661067475,"creation_date":1661067475,"answer_id":73432492,"question_id":73379294,"body_markdown":"The tables don&#39;t have such internal relation through any of *FK* fields. No join whatsoever eventhough the two tables clearly share the same column. This makes mapping operations on *JPA* side harder.\r\n\r\nI ended up just declare such:\r\n\r\n    @Id\r\n    private Long id;\r\n\r\nBeside this makes my entity much more readable.\r\n\r\nAnd finally managing any *CRUD* operations through the Spring Data JPA&#39;s (`JpaRepository`). And utilize the `@Query` for retrieval as this annotations seems to be independent to the underlying table/schema relations.","title":"How to join 2 tables without the unique key variables declared explicitly?","body":"<p>The tables don't have such internal relation through any of <em>FK</em> fields. No join whatsoever eventhough the two tables clearly share the same column. This makes mapping operations on <em>JPA</em> side harder.</p>\n<p>I ended up just declare such:</p>\n<pre><code>@Id\nprivate Long id;\n</code></pre>\n<p>Beside this makes my entity much more readable.</p>\n<p>And finally managing any <em>CRUD</em> operations through the Spring Data JPA's (<code>JpaRepository</code>). And utilize the <code>@Query</code> for retrieval as this annotations seems to be independent to the underlying table/schema relations.</p>\n"}],"owner":{"account_id":3214004,"reputation":1859,"user_id":4871676,"accept_rate":90,"display_name":"Plain_Dude_Sleeping_Alone"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1661067475,"creation_date":1660677759,"question_id":73379294,"body_markdown":"JPA join 2 tables without the unique key variables declared explicitly?\r\n\r\nI have these 2 tables where a student can borrow many books.\r\n\r\nDB:\r\n\r\n    book\r\n    \t- id\r\n    \t- book_name\r\n    \t- student_id\r\n    \t\r\n    \t\r\n    student\r\n    \t-id\r\n    \t-student_name\r\n\t\r\n\r\nJPA:\r\n\r\n*Book* entity : \r\n\r\n  \r\n\r\n      @Entity (&quot;book&quot;)\r\n        class Book {\r\n\r\n        @Column (&quot;book_name&quot;)\r\n        private String bookName;\r\n        \r\n            @ManyToOne\r\n           @JoinColumn(name = &quot;student_id&quot;, insertable=false, updatable=false)\r\n           private Student student;\r\n        \r\n        ..\r\n        ..\r\n        }\r\n    \r\n    \r\n  and *Student* entity:\r\n    \r\n  \r\n\r\n      @Entity (&quot;student&quot;)\r\n        class Student {\r\n        \r\n        @Column (&quot;student_name&quot;)\r\n        private String student_name;\r\n        \r\n        \r\n           @OneToMany(mappedBy = &quot;student&quot;)\r\n        private List &lt;Book&gt; book;\r\n        ..\r\n        }\r\n\t\t\r\nFor some reason it complains about \r\n\r\n`org.springframework.orm.jpa.JpaObjectRetrievalFailureException: Unable to find com.Student with id 7402`","title":"How to join 2 tables without the unique key variables declared explicitly?","body":"<p>JPA join 2 tables without the unique key variables declared explicitly?</p>\n<p>I have these 2 tables where a student can borrow many books.</p>\n<p>DB:</p>\n<pre><code>book\n    - id\n    - book_name\n    - student_id\n    \n    \nstudent\n    -id\n    -student_name\n</code></pre>\n<p>JPA:</p>\n<p><em>Book</em> entity :</p>\n<pre><code>  @Entity (&quot;book&quot;)\n    class Book {\n\n    @Column (&quot;book_name&quot;)\n    private String bookName;\n    \n        @ManyToOne\n       @JoinColumn(name = &quot;student_id&quot;, insertable=false, updatable=false)\n       private Student student;\n    \n    ..\n    ..\n    }\n</code></pre>\n<p>and <em>Student</em> entity:</p>\n<pre><code>  @Entity (&quot;student&quot;)\n    class Student {\n    \n    @Column (&quot;student_name&quot;)\n    private String student_name;\n    \n    \n       @OneToMany(mappedBy = &quot;student&quot;)\n    private List &lt;Book&gt; book;\n    ..\n    }\n    \n</code></pre>\n<p>For some reason it complains about</p>\n<p><code>org.springframework.orm.jpa.JpaObjectRetrievalFailureException: Unable to find com.Student with id 7402</code></p>\n"},{"tags":["java","spring","amazon-web-services","amazon-rds","hikaricp"],"comments":[{"owner":{"account_id":6250572,"reputation":736,"user_id":4860775,"display_name":"ASharma7"},"score":0,"creation_date":1561386608,"post_id":52728639,"comment_id":100036188,"body_markdown":"https://github.com/brettwooldridge/HikariCP/issues/856","body":"<a href=\"https://github.com/brettwooldridge/HikariCP/issues/856\" rel=\"nofollow noreferrer\">github.com/brettwooldridge/HikariCP/issues/856</a>"}],"answers":[{"tags":[],"owner":{"account_id":479498,"reputation":2088,"user_id":892200,"display_name":"Sid Malani"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1542773729,"creation_date":1542459666,"answer_id":53351494,"question_id":52728639,"body_markdown":"Most definitely opening connection per tenant is a very bad idea. All you need is a pool of connections shared across all users.\r\n\r\n1. So first step would be to find the load or anticipate what it would be based on some projections.\r\n\r\n2. Decide how much latency is acceptable, what is the burst peak time traffic etc\r\n\r\n3. Finally come to number of connections you will need for this and decide on number of instances required. For instance if your peak time usage is 10k per s and each query takes 10ms then you will need 100 open connections for latency of 1s.\r\n\r\n4. Implement it without any bindings to user. i.e. the same pool shared across all. Unless you have a case to group say premium/basic users to say have set of two pools etc\r\n\r\n5. Finally as you are doing this in AWS if you need more than 1 instance based on point 3 - see if you can autoscale up/down based on load to save costs.\r\n\r\nCheck these out for some comparison metrics  \r\n\r\nThis one is probably most interesting in terms of spike demand\r\n\r\nhttps://github.com/brettwooldridge/HikariCP/blob/dev/documents/Welcome-To-The-Jungle.md\r\n\r\nSome more...\r\n\r\nhttps://github.com/brettwooldridge/HikariCP\r\n\r\nhttps://www.wix.engineering/blog/how-does-hikaricp-compare-to-other-connection-pools\r\n","title":"Connection pooling in multi tenant app. Shared pool vs pool per tenant","body":"<p>Most definitely opening connection per tenant is a very bad idea. All you need is a pool of connections shared across all users.</p>\n\n<ol>\n<li><p>So first step would be to find the load or anticipate what it would be based on some projections.</p></li>\n<li><p>Decide how much latency is acceptable, what is the burst peak time traffic etc</p></li>\n<li><p>Finally come to number of connections you will need for this and decide on number of instances required. For instance if your peak time usage is 10k per s and each query takes 10ms then you will need 100 open connections for latency of 1s.</p></li>\n<li><p>Implement it without any bindings to user. i.e. the same pool shared across all. Unless you have a case to group say premium/basic users to say have set of two pools etc</p></li>\n<li><p>Finally as you are doing this in AWS if you need more than 1 instance based on point 3 - see if you can autoscale up/down based on load to save costs.</p></li>\n</ol>\n\n<p>Check these out for some comparison metrics  </p>\n\n<p>This one is probably most interesting in terms of spike demand</p>\n\n<p><a href=\"https://github.com/brettwooldridge/HikariCP/blob/dev/documents/Welcome-To-The-Jungle.md\" rel=\"nofollow noreferrer\">https://github.com/brettwooldridge/HikariCP/blob/dev/documents/Welcome-To-The-Jungle.md</a></p>\n\n<p>Some more...</p>\n\n<p><a href=\"https://github.com/brettwooldridge/HikariCP\" rel=\"nofollow noreferrer\">https://github.com/brettwooldridge/HikariCP</a></p>\n\n<p><a href=\"https://www.wix.engineering/blog/how-does-hikaricp-compare-to-other-connection-pools\" rel=\"nofollow noreferrer\">https://www.wix.engineering/blog/how-does-hikaricp-compare-to-other-connection-pools</a></p>\n"},{"tags":[],"owner":{"account_id":9847991,"reputation":56906,"user_id":7294900,"accept_rate":94,"display_name":"Ori Marko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1542649779,"creation_date":1542635630,"answer_id":53376132,"question_id":52728639,"body_markdown":"Follow [previous Q&amp;A][1] the selected strategy for multi tenant environment will be (surprisingly) using connection pool per tenant \n\n&gt;Strategy 2 : each tenant have it&#39;s own schema and it&#39;s own connection pool in a single database\n&gt;\n&gt;strategy 2 is more flexible and safe : every tenant cannot consume more than a given amount of connection (and this amount can be configured per tenant if you need it)\n\nI suggest put the HikariCP&#39;s formula aside here, and use less tenants number as 10 (dynamic size? ) with low connection pool size as 2.\n\nBe more focus on the traffic you expect, notice that 10 connection pool size comment in `HikariCP Pool Size` maybe should suffice:\n\n&gt;10 as a nice round number. Seem low? Give it a try, we&#39;d wager that you could easily handle 3000 front-end users running simple queries at 6000 TPS on such a setup. \n\nSee also [comment][2] indicates that 100 instances are too much \n\n&gt;, but it would have to be a massive load to require 100s. \n\nBy @EssexBoy\n\n[1]:https://stackoverflow.com/questions/21223894/manage-connection-pooling-in-multi-tenant-web-app-with-spring-hibernate-and-c3p\n\n[2]:https://stackoverflow.com/questions/53377757/using-tomcat-in-production-for-spring-boot-apps#comment93631843_53377926","title":"Connection pooling in multi tenant app. Shared pool vs pool per tenant","body":"<p>Follow <a href=\"https://stackoverflow.com/questions/21223894/manage-connection-pooling-in-multi-tenant-web-app-with-spring-hibernate-and-c3p\">previous Q&amp;A</a> the selected strategy for multi tenant environment will be (surprisingly) using connection pool per tenant</p>\n<blockquote>\n<p>Strategy 2 : each tenant have it's own schema and it's own connection pool in a single database</p>\n<p>strategy 2 is more flexible and safe : every tenant cannot consume more than a given amount of connection (and this amount can be configured per tenant if you need it)</p>\n</blockquote>\n<p>I suggest put the HikariCP's formula aside here, and use less tenants number as 10 (dynamic size? ) with low connection pool size as 2.</p>\n<p>Be more focus on the traffic you expect, notice that 10 connection pool size comment in <code>HikariCP Pool Size</code> maybe should suffice:</p>\n<blockquote>\n<p>10 as a nice round number. Seem low? Give it a try, we'd wager that you could easily handle 3000 front-end users running simple queries at 6000 TPS on such a setup.</p>\n</blockquote>\n<p>See also <a href=\"https://stackoverflow.com/questions/53377757/using-tomcat-in-production-for-spring-boot-apps#comment93631843_53377926\">comment</a> indicates that 100 instances are too much</p>\n<blockquote>\n<p>, but it would have to be a massive load to require 100s.</p>\n</blockquote>\n<p>By @EssexBoy</p>\n"}],"owner":{"account_id":2289332,"reputation":5954,"user_id":2012635,"accept_rate":54,"display_name":"drenda"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6106,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":2,"score":9,"last_activity_date":1661066844,"creation_date":1539115932,"question_id":52728639,"body_markdown":"I&#39;m building a multi tenant REST server application with Spring 2.x, Hibernate 5.x, Spring Data REST, Mysql 5.7.\r\nSpring 2.x uses Hikari for connection pooling.\r\n\r\nI&#39;m going to use a **DB per tenant approach**, so every tenant will have his own database.\r\n\r\nI created my MultiTenantConnectionProvider in this way:\r\n\r\n    @Component\r\n    @Profile(&quot;prod&quot;)\r\n    public class MultiTenantConnectionProviderImpl implements MultiTenantConnectionProvider {\r\n    \tprivate static final long serialVersionUID = 3193007611085791247L;\r\n    \tprivate Logger log = LogManager.getLogger();\r\n    \r\n    \tprivate Map&lt;String, HikariDataSource&gt; dataSourceMap = new ConcurrentHashMap&lt;String, HikariDataSource&gt;();\r\n    \r\n    \t@Autowired\r\n    \tprivate TenantRestClient tenantRestClient;\r\n    \r\n    \t@Autowired\r\n    \tprivate PasswordEncrypt passwordEncrypt;\r\n    \r\n    \t@Override\r\n    \tpublic void releaseAnyConnection(Connection connection) throws SQLException {\r\n    \t\tconnection.close();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic Connection getAnyConnection() throws SQLException {\r\n    \t\tConnection connection = getDataSource(TenantIdResolver.TENANT_DEFAULT).getConnection();\r\n    \t\treturn connection;\r\n    \r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic Connection getConnection(String tenantId) throws SQLException {\r\n    \t\tConnection connection = getDataSource(tenantId).getConnection();\r\n    \t\treturn connection;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void releaseConnection(String tenantId, Connection connection) throws SQLException {\r\n    \t\tlog.info(&quot;releaseConnection &quot; + tenantId);\r\n    \t\tconnection.close();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean supportsAggressiveRelease() {\r\n    \t\treturn false;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean isUnwrappableAs(Class unwrapType) {\r\n    \t\treturn false;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic &lt;T&gt; T unwrap(Class&lt;T&gt; unwrapType) {\r\n    \t\treturn null;\r\n    \t}\r\n    \r\n    \tpublic HikariDataSource getDataSource(@NotNull String tentantId) throws SQLException {\r\n    \t\tif (dataSourceMap.containsKey(tentantId)) {\r\n    \t\t\treturn dataSourceMap.get(tentantId);\r\n    \t\t} else {\r\n    \t\t\tHikariDataSource dataSource = createDataSource(tentantId);\r\n    \t\t\tdataSourceMap.put(tentantId, dataSource);\r\n    \t\t\treturn dataSource;\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic HikariDataSource createDataSource(String tenantId) throws SQLException {\r\n    \t\tlog.info(&quot;Create Datasource for tenant {}&quot;, tenantId);\r\n    \t\ttry {\r\n    \t\t\tDatabase database = tenantRestClient.getDatabase(tenantId);\r\n    \t\t\tDatabaseInstance databaseInstance = tenantRestClient.getDatabaseInstance(tenantId);\r\n    \t\t\tif (database != null &amp;&amp; databaseInstance != null) {\r\n    \t\t\t\tHikariConfig hikari = new HikariConfig();\r\n    \t\t\t\tString driver = &quot;&quot;;\r\n    \t\t\t\tString options = &quot;&quot;;\r\n    \t\t\t\tswitch (databaseInstance.getType()) {\r\n    \t\t\t\tcase MYSQL:\r\n    \t\t\t\t\tdriver = &quot;jdbc:mysql://&quot;;\r\n    \t\t\t\t\toptions = &quot;?useLegacyDatetimeCode=false&amp;serverTimezone=UTC&amp;useUnicode=yes&amp;characterEncoding=UTF-8&amp;useSSL=false&quot;;\r\n    \t\t\t\t\tbreak;\r\n    \r\n    \t\t\t\tdefault:\r\n    \t\t\t\t\tdriver = &quot;jdbc:mysql://&quot;;\r\n    \t\t\t\t\toptions = &quot;?useLegacyDatetimeCode=false&amp;serverTimezone=UTC&amp;useUnicode=yes&amp;characterEncoding=UTF-8&amp;useSSL=false&quot;;\r\n    \t\t\t\t}\r\n    \r\n    \t\t\t\thikari.setJdbcUrl(driver + databaseInstance.getHost() + &quot;:&quot; + databaseInstance.getPort() + &quot;/&quot; + database.getName() + options);\r\n    \t\t\t\thikari.setUsername(database.getUsername());\r\n    \t\t\t\thikari.setPassword(passwordEncrypt.decryptPassword(database.getPassword()));\r\n    \r\n    \t\t\t\t// MySQL optimizations, see\r\n    \t\t\t\t// https://github.com/brettwooldridge/HikariCP/wiki/MySQL-Configuration\r\n    \t\t\t\thikari.addDataSourceProperty(&quot;cachePrepStmts&quot;, true);\r\n    \t\t\t\thikari.addDataSourceProperty(&quot;prepStmtCacheSize&quot;, &quot;250&quot;);\r\n    \t\t\t\thikari.addDataSourceProperty(&quot;prepStmtCacheSqlLimit&quot;, &quot;2048&quot;);\r\n    \t\t\t\thikari.addDataSourceProperty(&quot;useServerPrepStmts&quot;, &quot;true&quot;);\r\n    \t\t\t\thikari.addDataSourceProperty(&quot;useLocalSessionState&quot;, &quot;true&quot;);\r\n    \t\t\t\thikari.addDataSourceProperty(&quot;useLocalTransactionState&quot;, &quot;true&quot;);\r\n    \t\t\t\thikari.addDataSourceProperty(&quot;rewriteBatchedStatements&quot;, &quot;true&quot;);\r\n    \t\t\t\thikari.addDataSourceProperty(&quot;cacheResultSetMetadata&quot;, &quot;true&quot;);\r\n    \t\t\t\thikari.addDataSourceProperty(&quot;cacheServerConfiguration&quot;, &quot;true&quot;);\r\n    \t\t\t\thikari.addDataSourceProperty(&quot;elideSetAutoCommits&quot;, &quot;true&quot;);\r\n    \t\t\t\thikari.addDataSourceProperty(&quot;maintainTimeStats&quot;, &quot;false&quot;);\r\n    \t\t\t\thikari.setMinimumIdle(3);\r\n    \t\t\t\thikari.setMaximumPoolSize(5);\r\n    \r\n    \t\t\t\thikari.setIdleTimeout(30000);\r\n    \t\t\t\thikari.setPoolName(&quot;JPAHikari_&quot; + tenantId);\r\n    \t\t\t\t// mysql wait_timeout 600seconds\r\n    \t\t\t\thikari.setMaxLifetime(580000);\r\n    \t\t\t\thikari.setLeakDetectionThreshold(60 * 1000);\r\n    \r\n    \t\t\t\tHikariDataSource dataSource = new HikariDataSource(hikari);\r\n   \r\n    \r\n    \t\t\t\treturn dataSource;\r\n    \r\n    \t\t\t} else {\r\n    \t\t\t\tthrow new SQLException(String.format(&quot;DB not found for tenant %s!&quot;, tenantId));\r\n    \t\t\t}\r\n    \t\t} catch (Exception e) {\r\n    \t\t\tthrow new SQLException(e.getMessage());\r\n    \t\t}\r\n    \t}\r\n    \r\n    }\r\n\r\nIn my implementation I read tenantId and I get information about the database instance from a central management system.\r\nI create a new pool for each tenant and I cache the pool in order to avoid to recreate it each time.\r\n\r\nI read this [interesting question][1], but my question is quite different.\r\nI&#39;m thinking to use AWS (both for server instance, and RDS db instance).\r\n\r\nLet&#39;s hypothesize a concrete scenario in which I&#39;ve 100 tenants. \r\nThe application is a management/point of sale software. It will be used just from agents. Let&#39;s say each tenants has an average of 3 agents working concurrently in each moment.\r\n\r\nWith that numbers in mind and according to [this article][2], the first thing I realize is that it seems hard to have **a pool for each tenant**.\r\n\r\nFor 100 tenants I would like to think that a [db.r4.large][3] (2vcore, 15,25GB RAM and fast disk access ) with Aurora should be enough (about 150€/month).\r\n\r\nAccording to the formula to size a connection pool:\r\n\r\n    connections = ((core_count * 2) + effective_spindle_count)\r\n\r\nI should have 2core*2 + 1 = 5 connections in the pool.\r\n\r\nFrom what I got, this should be the max connections in the pool to maximise performance on that DB instance.\r\n\r\n**1st solution**\r\n\r\nSo my first question is pretty simple: how can I create a separate connection pool for each tenant seen that I should only use 5 connection in total?\r\n\r\nIt seems not possible to me. Even if I assign 2 connections to each tenant, I would have 200 connections to the DBMS!!\r\n\r\nAccording to [this question][4], on a `db.r4.large` instance I could have at max 1300 connections, so seems the instance should face quite well the load.\r\nBut according the article I mentioned before, seems a bad practice use hundreds connections to the db:\r\n\r\n&gt; If you have 10,000 front-end users, having a connection pool of 10,000 would be shear insanity. 1000 still horrible. Even 100 connections, overkill. You want a small pool of a few dozen connections at most, and you want the rest of the application threads blocked on the pool awaiting connections.\r\n\r\n**2nd solution**\r\n\r\nThe second solution I have in mind is to share a connection pool for tenants on the same DMBS. This means that all 100 tenants will use the same Hikari pool of 5 connections (honestly it seems quite low to me).\r\n\r\nShould this the right way to maximize performance and redure the response time of the application?\r\n\r\nDo you have a better idea of how to manage this scenario with Spring, Hibernate, Mysql (hosted on AWS RDS Aurora)?\r\n\r\n  [1]: https://stackoverflow.com/q/21223894/2012635\r\n  [2]: https://github.com/brettwooldridge/HikariCP/wiki/About-Pool-Sizing\r\n  [3]: https://aws.amazon.com/it/rds/instance-types/\r\n  [4]: https://serverfault.com/a/862418","title":"Connection pooling in multi tenant app. Shared pool vs pool per tenant","body":"<p>I'm building a multi tenant REST server application with Spring 2.x, Hibernate 5.x, Spring Data REST, Mysql 5.7.\nSpring 2.x uses Hikari for connection pooling.</p>\n\n<p>I'm going to use a <strong>DB per tenant approach</strong>, so every tenant will have his own database.</p>\n\n<p>I created my MultiTenantConnectionProvider in this way:</p>\n\n<pre><code>@Component\n@Profile(\"prod\")\npublic class MultiTenantConnectionProviderImpl implements MultiTenantConnectionProvider {\n    private static final long serialVersionUID = 3193007611085791247L;\n    private Logger log = LogManager.getLogger();\n\n    private Map&lt;String, HikariDataSource&gt; dataSourceMap = new ConcurrentHashMap&lt;String, HikariDataSource&gt;();\n\n    @Autowired\n    private TenantRestClient tenantRestClient;\n\n    @Autowired\n    private PasswordEncrypt passwordEncrypt;\n\n    @Override\n    public void releaseAnyConnection(Connection connection) throws SQLException {\n        connection.close();\n    }\n\n    @Override\n    public Connection getAnyConnection() throws SQLException {\n        Connection connection = getDataSource(TenantIdResolver.TENANT_DEFAULT).getConnection();\n        return connection;\n\n    }\n\n    @Override\n    public Connection getConnection(String tenantId) throws SQLException {\n        Connection connection = getDataSource(tenantId).getConnection();\n        return connection;\n    }\n\n    @Override\n    public void releaseConnection(String tenantId, Connection connection) throws SQLException {\n        log.info(\"releaseConnection \" + tenantId);\n        connection.close();\n    }\n\n    @Override\n    public boolean supportsAggressiveRelease() {\n        return false;\n    }\n\n    @Override\n    public boolean isUnwrappableAs(Class unwrapType) {\n        return false;\n    }\n\n    @Override\n    public &lt;T&gt; T unwrap(Class&lt;T&gt; unwrapType) {\n        return null;\n    }\n\n    public HikariDataSource getDataSource(@NotNull String tentantId) throws SQLException {\n        if (dataSourceMap.containsKey(tentantId)) {\n            return dataSourceMap.get(tentantId);\n        } else {\n            HikariDataSource dataSource = createDataSource(tentantId);\n            dataSourceMap.put(tentantId, dataSource);\n            return dataSource;\n        }\n    }\n\n    public HikariDataSource createDataSource(String tenantId) throws SQLException {\n        log.info(\"Create Datasource for tenant {}\", tenantId);\n        try {\n            Database database = tenantRestClient.getDatabase(tenantId);\n            DatabaseInstance databaseInstance = tenantRestClient.getDatabaseInstance(tenantId);\n            if (database != null &amp;&amp; databaseInstance != null) {\n                HikariConfig hikari = new HikariConfig();\n                String driver = \"\";\n                String options = \"\";\n                switch (databaseInstance.getType()) {\n                case MYSQL:\n                    driver = \"jdbc:mysql://\";\n                    options = \"?useLegacyDatetimeCode=false&amp;serverTimezone=UTC&amp;useUnicode=yes&amp;characterEncoding=UTF-8&amp;useSSL=false\";\n                    break;\n\n                default:\n                    driver = \"jdbc:mysql://\";\n                    options = \"?useLegacyDatetimeCode=false&amp;serverTimezone=UTC&amp;useUnicode=yes&amp;characterEncoding=UTF-8&amp;useSSL=false\";\n                }\n\n                hikari.setJdbcUrl(driver + databaseInstance.getHost() + \":\" + databaseInstance.getPort() + \"/\" + database.getName() + options);\n                hikari.setUsername(database.getUsername());\n                hikari.setPassword(passwordEncrypt.decryptPassword(database.getPassword()));\n\n                // MySQL optimizations, see\n                // https://github.com/brettwooldridge/HikariCP/wiki/MySQL-Configuration\n                hikari.addDataSourceProperty(\"cachePrepStmts\", true);\n                hikari.addDataSourceProperty(\"prepStmtCacheSize\", \"250\");\n                hikari.addDataSourceProperty(\"prepStmtCacheSqlLimit\", \"2048\");\n                hikari.addDataSourceProperty(\"useServerPrepStmts\", \"true\");\n                hikari.addDataSourceProperty(\"useLocalSessionState\", \"true\");\n                hikari.addDataSourceProperty(\"useLocalTransactionState\", \"true\");\n                hikari.addDataSourceProperty(\"rewriteBatchedStatements\", \"true\");\n                hikari.addDataSourceProperty(\"cacheResultSetMetadata\", \"true\");\n                hikari.addDataSourceProperty(\"cacheServerConfiguration\", \"true\");\n                hikari.addDataSourceProperty(\"elideSetAutoCommits\", \"true\");\n                hikari.addDataSourceProperty(\"maintainTimeStats\", \"false\");\n                hikari.setMinimumIdle(3);\n                hikari.setMaximumPoolSize(5);\n\n                hikari.setIdleTimeout(30000);\n                hikari.setPoolName(\"JPAHikari_\" + tenantId);\n                // mysql wait_timeout 600seconds\n                hikari.setMaxLifetime(580000);\n                hikari.setLeakDetectionThreshold(60 * 1000);\n\n                HikariDataSource dataSource = new HikariDataSource(hikari);\n\n\n                return dataSource;\n\n            } else {\n                throw new SQLException(String.format(\"DB not found for tenant %s!\", tenantId));\n            }\n        } catch (Exception e) {\n            throw new SQLException(e.getMessage());\n        }\n    }\n\n}\n</code></pre>\n\n<p>In my implementation I read tenantId and I get information about the database instance from a central management system.\nI create a new pool for each tenant and I cache the pool in order to avoid to recreate it each time.</p>\n\n<p>I read this <a href=\"https://stackoverflow.com/q/21223894/2012635\">interesting question</a>, but my question is quite different.\nI'm thinking to use AWS (both for server instance, and RDS db instance).</p>\n\n<p>Let's hypothesize a concrete scenario in which I've 100 tenants. \nThe application is a management/point of sale software. It will be used just from agents. Let's say each tenants has an average of 3 agents working concurrently in each moment.</p>\n\n<p>With that numbers in mind and according to <a href=\"https://github.com/brettwooldridge/HikariCP/wiki/About-Pool-Sizing\" rel=\"noreferrer\">this article</a>, the first thing I realize is that it seems hard to have <strong>a pool for each tenant</strong>.</p>\n\n<p>For 100 tenants I would like to think that a <a href=\"https://aws.amazon.com/it/rds/instance-types/\" rel=\"noreferrer\">db.r4.large</a> (2vcore, 15,25GB RAM and fast disk access ) with Aurora should be enough (about 150€/month).</p>\n\n<p>According to the formula to size a connection pool:</p>\n\n<pre><code>connections = ((core_count * 2) + effective_spindle_count)\n</code></pre>\n\n<p>I should have 2core*2 + 1 = 5 connections in the pool.</p>\n\n<p>From what I got, this should be the max connections in the pool to maximise performance on that DB instance.</p>\n\n<p><strong>1st solution</strong></p>\n\n<p>So my first question is pretty simple: how can I create a separate connection pool for each tenant seen that I should only use 5 connection in total?</p>\n\n<p>It seems not possible to me. Even if I assign 2 connections to each tenant, I would have 200 connections to the DBMS!!</p>\n\n<p>According to <a href=\"https://serverfault.com/a/862418\">this question</a>, on a <code>db.r4.large</code> instance I could have at max 1300 connections, so seems the instance should face quite well the load.\nBut according the article I mentioned before, seems a bad practice use hundreds connections to the db:</p>\n\n<blockquote>\n  <p>If you have 10,000 front-end users, having a connection pool of 10,000 would be shear insanity. 1000 still horrible. Even 100 connections, overkill. You want a small pool of a few dozen connections at most, and you want the rest of the application threads blocked on the pool awaiting connections.</p>\n</blockquote>\n\n<p><strong>2nd solution</strong></p>\n\n<p>The second solution I have in mind is to share a connection pool for tenants on the same DMBS. This means that all 100 tenants will use the same Hikari pool of 5 connections (honestly it seems quite low to me).</p>\n\n<p>Should this the right way to maximize performance and redure the response time of the application?</p>\n\n<p>Do you have a better idea of how to manage this scenario with Spring, Hibernate, Mysql (hosted on AWS RDS Aurora)?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1027975,"reputation":6932,"user_id":1036843,"accept_rate":83,"display_name":"Adam Hopkins"},"score":3,"creation_date":1456077212,"post_id":35539685,"comment_id":58767987,"body_markdown":"What is the desired output? Not sure I understand what you mean by reverse.","body":"What is the desired output? Not sure I understand what you mean by reverse."},{"owner":{"account_id":1936546,"reputation":133675,"user_id":1743880,"accept_rate":100,"display_name":"Tunaki"},"score":3,"creation_date":1456077216,"post_id":35539685,"comment_id":58767989,"body_markdown":"What do you mean by &quot;reverse&quot;? What is the reverse of &quot;0.5&quot;?","body":"What do you mean by &quot;reverse&quot;? What is the reverse of &quot;0.5&quot;?"},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":1,"creation_date":1456077304,"post_id":35539685,"comment_id":58768023,"body_markdown":"Unrelated, but non-static variable names should be named with all lower-case to follow Java conventions.","body":"Unrelated, but non-static variable names should be named with all lower-case to follow Java conventions."},{"owner":{"account_id":36018,"reputation":95910,"user_id":102441,"accept_rate":76,"display_name":"Eric"},"score":2,"creation_date":1456077415,"post_id":35539685,"comment_id":58768063,"body_markdown":"Is the &quot;reverse&quot; of `0.123` `321.0`? Are you trying to reverse a number, or it&#39;s string representation? What should happen if you reverse `1.0000000000000000000001`?","body":"Is the &quot;reverse&quot; of <code>0.123</code> <code>321.0</code>? Are you trying to reverse a number, or it&#39;s string representation? What should happen if you reverse <code>1.0000000000000000000001</code>?"},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1456078015,"post_id":35539685,"comment_id":58768317,"body_markdown":"If you are using Integer.parseInt, then you will loose all of the value after the decimal.","body":"If you are using Integer.parseInt, then you will loose all of the value after the decimal."},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1456078251,"post_id":35539685,"comment_id":58768412,"body_markdown":"What is Result? You should change d from an int to a BigDecimal.","body":"What is Result? You should change d from an int to a BigDecimal."},{"owner":{"account_id":7271858,"reputation":917,"user_id":5544609,"display_name":"suroh"},"score":0,"creation_date":1456078354,"post_id":35539685,"comment_id":58768450,"body_markdown":"@Eric yes the reverse is the number printed in reverse so if it were 0.123 then yes the reverse would be 321.0","body":"@Eric yes the reverse is the number printed in reverse so if it were 0.123 then yes the reverse would be 321.0"},{"owner":{"account_id":7271858,"reputation":917,"user_id":5544609,"display_name":"suroh"},"score":0,"creation_date":1456078425,"post_id":35539685,"comment_id":58768481,"body_markdown":"@matt this was simply an example to show you what I&#39;m attempting to do, if you use type int with a decimal number you will always loose the value after the decimal point parsing the int is inconsequential.","body":"@matt this was simply an example to show you what I&#39;m attempting to do, if you use type int with a decimal number you will always loose the value after the decimal point parsing the int is inconsequential."}],"answers":[{"tags":[],"owner":{"account_id":36018,"reputation":95910,"user_id":102441,"accept_rate":76,"display_name":"Eric"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1456077771,"creation_date":1456077554,"answer_id":35539765,"question_id":35539685,"body_markdown":"Are you content with reversing the string representation?\r\n\r\n    String input = d.toString();\r\n    String reversed = new StringBuffer(input).reverse().toString();\r\n\r\n    System.out.println(&quot;The Reverse of input is &quot; + reversed);   ","title":"How do you reverse a decimal number like 0.5","body":"<p>Are you content with reversing the string representation?</p>\n\n<pre><code>String input = d.toString();\nString reversed = new StringBuffer(input).reverse().toString();\n\nSystem.out.println(\"The Reverse of input is \" + reversed);   \n</code></pre>\n"},{"tags":[],"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1456080119,"creation_date":1456080119,"answer_id":35540299,"question_id":35539685,"body_markdown":"I would use BigDecimal, because you are working with decimals. eg. 0.1 is a repeating number in base two. So it will get truncated. \r\n\r\n    BigDecimal d = new BigDecimal(in.nextLine());\r\n\r\nWith decimals, the value doesn&#39;t go to zero when you divide by 10 the same way an int does. Eg. 123 divided by ten becomes, 12.3. So your previous algorithm isn&#39;t going to work. Also you don&#39;t know how far to the right the number terminates. It can be done:\r\n    \r\n    int n = 0;\r\n    while(d.remainder(BigDecimal.ONE).intValue()&gt;0){\r\n        d = d.movePointRight(1);\r\n        n++;\r\n    }\r\n\r\nAfter that loop finishes you have a BigDecimal that is actually an integer. You can use your previous algorithm, but you need to place the decimal point back in the right place. Which is what n is for.","title":"How do you reverse a decimal number like 0.5","body":"<p>I would use BigDecimal, because you are working with decimals. eg. 0.1 is a repeating number in base two. So it will get truncated. </p>\n\n<pre><code>BigDecimal d = new BigDecimal(in.nextLine());\n</code></pre>\n\n<p>With decimals, the value doesn't go to zero when you divide by 10 the same way an int does. Eg. 123 divided by ten becomes, 12.3. So your previous algorithm isn't going to work. Also you don't know how far to the right the number terminates. It can be done:</p>\n\n<pre><code>int n = 0;\nwhile(d.remainder(BigDecimal.ONE).intValue()&gt;0){\n    d = d.movePointRight(1);\n    n++;\n}\n</code></pre>\n\n<p>After that loop finishes you have a BigDecimal that is actually an integer. You can use your previous algorithm, but you need to place the decimal point back in the right place. Which is what n is for.</p>\n"},{"tags":[],"owner":{"account_id":26119205,"reputation":1,"user_id":19811773,"display_name":"Md Adnan Khan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661065278,"creation_date":1661060860,"answer_id":73431950,"question_id":35539685,"body_markdown":"        Scanner sc=new Scanner(System.in);\r\n\t    BigDecimal bd=new BigDecimal(sc.nextLine());\r\n\t    int integervalue =bd.intValue();\r\n\t    //System.out.println(integervalue);\r\n\t    BigDecimal floatpart=bd.remainder(BigDecimal.ONE);\r\n\t    while(floatpart.remainder(BigDecimal.ONE).floatValue()&gt;0){\r\n\t        floatpart = floatpart.movePointRight(1); \r\n\t    }\r\n\t    int  floatValue=floatpart.intValue();\r\n\t    int  intpart=0;\r\n\t    while(floatValue&gt;0) {\r\n\t    \tintpart=intpart*10+floatValue%10;\r\n\t    \tfloatValue/=10;\r\n\t    }\r\n\t   int newfloatpart=0;\r\n\t   boolean b=true;\r\n\t   int count =0;\r\n\t    while(integervalue&gt;0) {\r\n\t    \tif(b==true &amp;&amp; integervalue%10==0) {\r\n\t    \t newfloatpart=newfloatpart*10+integervalue%10;\r\n\t    \t count++;\r\n\t    \t}\r\n\t    \telse {\r\n\t    \t\tb=false;\r\n\t    \t\tnewfloatpart=newfloatpart*10+integervalue%10;\r\n\t    \t}\r\n\t    \tintegervalue/=10;\r\n\t    }\r\n\t    System.out.print(intpart+&quot;.&quot;);\r\n\t    while(count--&gt;0) {\r\n\t    \tSystem.out.print(0);\r\n\t    }\r\n\t    System.out.println(newfloatpart);","title":"How do you reverse a decimal number like 0.5","body":"<pre><code>    Scanner sc=new Scanner(System.in);\n    BigDecimal bd=new BigDecimal(sc.nextLine());\n    int integervalue =bd.intValue();\n    //System.out.println(integervalue);\n    BigDecimal floatpart=bd.remainder(BigDecimal.ONE);\n    while(floatpart.remainder(BigDecimal.ONE).floatValue()&gt;0){\n        floatpart = floatpart.movePointRight(1); \n    }\n    int  floatValue=floatpart.intValue();\n    int  intpart=0;\n    while(floatValue&gt;0) {\n        intpart=intpart*10+floatValue%10;\n        floatValue/=10;\n    }\n   int newfloatpart=0;\n   boolean b=true;\n   int count =0;\n    while(integervalue&gt;0) {\n        if(b==true &amp;&amp; integervalue%10==0) {\n         newfloatpart=newfloatpart*10+integervalue%10;\n         count++;\n        }\n        else {\n            b=false;\n            newfloatpart=newfloatpart*10+integervalue%10;\n        }\n        integervalue/=10;\n    }\n    System.out.print(intpart+&quot;.&quot;);\n    while(count--&gt;0) {\n        System.out.print(0);\n    }\n    System.out.println(newfloatpart);\n</code></pre>\n"}],"owner":{"account_id":7271858,"reputation":917,"user_id":5544609,"display_name":"suroh"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6723,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":35540299,"answer_count":3,"score":-1,"last_activity_date":1661065278,"creation_date":1456077160,"question_id":35539685,"body_markdown":"My question is how can you reverse a decimal in java? \r\n\r\nNumbers such as 0.5 , 0.8 etc.. \r\n\r\nAll my attempts at reproducing this code using a double variable instead of an int have literally caused my terminal to output &quot; Infinity &quot; or the symbol for infinity.\r\n\r\n    import java.util.*; \r\n    public class Example\r\n    {\r\n\t    public static void main(String[] args)\r\n\t    {\t\t\t\t\t\t\r\n\t\t\tint d = 0, \r\n\t\t\t       Result = 0;\r\n\t\t\t\t   \r\n\t\t\tScanner in = new Scanner(System.in); \r\n\t\t\t\r\n\t\t\tSystem.out.print(&quot;enter a number: &quot;);\r\n\r\n\t\t\td = Integer.parseInt(in.nextLine()); \r\n\t\t\t\r\n\t\t\twhile(d &gt; 0)\r\n\t\t\t{ \r\n\t\t\t\tResult = (Result * 10) + d % 10; \r\n\t\t\t\td = d / 10;\r\n\t\t\t} \r\n\t\t\t\r\n\t\t\tSystem.out.println(&quot;\\nThe Reversed Number Is: &quot; + Result);\t\t\t\r\n\t\r\n\t    }\r\n    } \r\n\r\nEDIT: Sorry guys I meant to put the output in.\r\n\r\nSo if you were to run this program the output would look like this (depending on the numbers you enter)\r\n\r\n    enter a number: 123456789\r\n\r\n    The Reversed Number Is: 987654321 \r\n\r\nMy desired output would look like the following\r\n\r\n    Enter a decimal number: 0.5\r\n    \r\n    The Reversed number is: 5.0 \r\n\r\n\r\n    import java.util.*; \r\n    public class Example\r\n    {\r\n\t    public static void main(String[] args)\r\n\t    {\t\t\t\t\t\t\r\n\t\t\tdouble d = 0, \r\n\t\t\t       Result = 0;\r\n\t\t\t\t   \r\n\t\t\tScanner in = new Scanner(System.in); \r\n\t\t\t\r\n\t\t\tSystem.out.print(&quot;enter a number: &quot;);\r\n\r\n\t\t\t//d = Double.parseDouble(in.nextLine()); \r\n            //^ That will not cut off any result lol\r\n            \r\n            d = in.nextDouble(); \r\n\t\t\t\r\n\t\t\twhile(d &gt; 0)\r\n\t\t\t{ \r\n\t\t\t\tResult = (Result * 10) + d % 10; \r\n\t\t\t\td = d / 10;\r\n\t\t\t} \r\n\t\t\t\r\n\t\t\tSystem.out.println(&quot;\\nThe Reversed Number Is: &quot; + Result);\t\t\t\r\n\t\r\n\t    }\r\n    } \r\n\r\n    enter a number: 0.5\r\n\r\n    The Reversed Number Is: Infinity\r\n    // The above result used d = Double.parseDouble(in.nextLine()) \r\n\r\n\r\n\r\n     //The below output used d = in.nextDouble(); \r\n\r\nThe only difference between those two methods of accepting input \r\nis that one accounts for people not following directions and the other doesn&#39;t\r\nThere is of course no try or catch etc.. or any thing here to terminate if any thing but a number is input and there does not need to be. The point is both of those input methods will generate the same results\r\n\r\n    enter a number: 5.0\r\n\r\n    The Reversed Number Is: Infinity","title":"How do you reverse a decimal number like 0.5","body":"<p>My question is how can you reverse a decimal in java? </p>\n\n<p>Numbers such as 0.5 , 0.8 etc.. </p>\n\n<p>All my attempts at reproducing this code using a double variable instead of an int have literally caused my terminal to output \" Infinity \" or the symbol for infinity.</p>\n\n<pre><code>import java.util.*; \npublic class Example\n{\n    public static void main(String[] args)\n    {                       \n        int d = 0, \n               Result = 0;\n\n        Scanner in = new Scanner(System.in); \n\n        System.out.print(\"enter a number: \");\n\n        d = Integer.parseInt(in.nextLine()); \n\n        while(d &gt; 0)\n        { \n            Result = (Result * 10) + d % 10; \n            d = d / 10;\n        } \n\n        System.out.println(\"\\nThe Reversed Number Is: \" + Result);          \n\n    }\n} \n</code></pre>\n\n<p>EDIT: Sorry guys I meant to put the output in.</p>\n\n<p>So if you were to run this program the output would look like this (depending on the numbers you enter)</p>\n\n<pre><code>enter a number: 123456789\n\nThe Reversed Number Is: 987654321 \n</code></pre>\n\n<p>My desired output would look like the following</p>\n\n<pre><code>Enter a decimal number: 0.5\n\nThe Reversed number is: 5.0 \n\n\nimport java.util.*; \npublic class Example\n{\n    public static void main(String[] args)\n    {                       \n        double d = 0, \n               Result = 0;\n\n        Scanner in = new Scanner(System.in); \n\n        System.out.print(\"enter a number: \");\n\n        //d = Double.parseDouble(in.nextLine()); \n        //^ That will not cut off any result lol\n\n        d = in.nextDouble(); \n\n        while(d &gt; 0)\n        { \n            Result = (Result * 10) + d % 10; \n            d = d / 10;\n        } \n\n        System.out.println(\"\\nThe Reversed Number Is: \" + Result);          \n\n    }\n} \n\nenter a number: 0.5\n\nThe Reversed Number Is: Infinity\n// The above result used d = Double.parseDouble(in.nextLine()) \n\n\n\n //The below output used d = in.nextDouble(); \n</code></pre>\n\n<p>The only difference between those two methods of accepting input \nis that one accounts for people not following directions and the other doesn't\nThere is of course no try or catch etc.. or any thing here to terminate if any thing but a number is input and there does not need to be. The point is both of those input methods will generate the same results</p>\n\n<pre><code>enter a number: 5.0\n\nThe Reversed Number Is: Infinity\n</code></pre>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":5279068,"reputation":895,"user_id":4215032,"display_name":"Pp88"},"score":0,"creation_date":1661028313,"post_id":73429979,"comment_id":129675065,"body_markdown":"Can’t you count in the forEach incrementing a counter and also print the values?","body":"Can’t you count in the forEach incrementing a counter and also print the values?"}],"answers":[{"tags":[],"owner":{"account_id":298886,"reputation":40480,"user_id":605153,"accept_rate":67,"display_name":"Mark Bramnik"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1661029508,"creation_date":1661028990,"answer_id":73430110,"question_id":73429979,"body_markdown":"You can use `reduce` function:\r\n\r\n```java\r\n\r\nimport java.util.Arrays;\r\nclass HelloWorld {\r\n    public static void main(String[] args) {\r\n        var l = Arrays.asList(1,2,3,4,5,6,7,8);\r\n        var count= l.stream()\r\n                    .filter(x -&gt; x%2 == 0)\r\n                    .reduce(0, (acc, elem) -&gt; {\r\n                        System.out.println(elem);\r\n                        return acc + 1; \r\n                    });\r\n        System.out.println(&quot;Total Count: &quot; + count);\r\n    }\r\n}\r\n```\r\n\r\nThis will print “Total Count: 4” as well as the elements themselves (2,4,6,8)\r\n\r\nNote that this printing is a side effect so personally I would also consider writing this “as usual” with for-loops (in an imperative style) without streams at all.","title":"Counting AND printing values in Java stream","body":"<p>You can use <code>reduce</code> function:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\nimport java.util.Arrays;\nclass HelloWorld {\n    public static void main(String[] args) {\n        var l = Arrays.asList(1,2,3,4,5,6,7,8);\n        var count= l.stream()\n                    .filter(x -&gt; x%2 == 0)\n                    .reduce(0, (acc, elem) -&gt; {\n                        System.out.println(elem);\n                        return acc + 1; \n                    });\n        System.out.println(&quot;Total Count: &quot; + count);\n    }\n}\n</code></pre>\n<p>This will print “Total Count: 4” as well as the elements themselves (2,4,6,8)</p>\n<p>Note that this printing is a side effect so personally I would also consider writing this “as usual” with for-loops (in an imperative style) without streams at all.</p>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1661064913,"creation_date":1661029035,"answer_id":73430116,"question_id":73429979,"body_markdown":"If you need to see all the elements that passed all the filters in the pipeline on the console, you can use `peek()`. This method was introduces in the Stream API for debugging.\r\n\r\n```\r\nlong counted = someList.stream()\r\n    .filter(s -&gt; predicate1())\r\n    .filter(s -&gt; predicate2())\r\n    .peek(System.out::println)\r\n    .count();\r\n```\r\n***Note:*** that this method should be used **only** for debugging purposes. If let&#39;s say instead of printing you would decide to store these elements into a collection, then you need to be aware that it&#39;s **discouraged** by [*API the documentation*](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/package-summary.html#SideEffects).\r\n\r\nAnd, also, pay attention to the documentation of [`peek()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Stream.html#peek(java.util.function.Consumer))\r\n\r\n&gt; This method **exists mainly** to **support debugging**, where you want to see the elements as they flow past a certain point in a pipeline\r\n&gt; \r\n&gt; In cases where the stream implementation is able to **optimize away** the\r\n&gt; production of some or all the elements (such as with *short-circuiting\r\n&gt; operations* like `findFirst`, or in the example described in `count()`),\r\n&gt; the action **will not be invoked for those elements**.\r\n\r\nThat means when have in mind something more important than printing elements on the console (and you don&#39;t want this action to be optimized away), then you can generate a collection as a result. And then you can do whatever you need with its contents and find out its size as well.\r\n\r\n    public List&lt;String&gt; foo(List&lt;String&gt; source) {\r\n        \r\n        return source.stream()\r\n            .filter(s -&gt; predicate1())\r\n            .filter(s -&gt; predicate2())\r\n            .toList(); // for Java 16+ or collect(Collectors.toList());\r\n    }\r\n","title":"Counting AND printing values in Java stream","body":"<p>If you need to see all the elements that passed all the filters in the pipeline on the console, you can use <code>peek()</code>. This method was introduces in the Stream API for debugging.</p>\n<pre><code>long counted = someList.stream()\n    .filter(s -&gt; predicate1())\n    .filter(s -&gt; predicate2())\n    .peek(System.out::println)\n    .count();\n</code></pre>\n<p><em><strong>Note:</strong></em> that this method should be used <strong>only</strong> for debugging purposes. If let's say instead of printing you would decide to store these elements into a collection, then you need to be aware that it's <strong>discouraged</strong> by <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/package-summary.html#SideEffects\" rel=\"nofollow noreferrer\"><em>API the documentation</em></a>.</p>\n<p>And, also, pay attention to the documentation of <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Stream.html#peek(java.util.function.Consumer)\" rel=\"nofollow noreferrer\"><code>peek()</code></a></p>\n<blockquote>\n<p>This method <strong>exists mainly</strong> to <strong>support debugging</strong>, where you want to see the elements as they flow past a certain point in a pipeline</p>\n<p>In cases where the stream implementation is able to <strong>optimize away</strong> the\nproduction of some or all the elements (such as with <em>short-circuiting\noperations</em> like <code>findFirst</code>, or in the example described in <code>count()</code>),\nthe action <strong>will not be invoked for those elements</strong>.</p>\n</blockquote>\n<p>That means when have in mind something more important than printing elements on the console (and you don't want this action to be optimized away), then you can generate a collection as a result. And then you can do whatever you need with its contents and find out its size as well.</p>\n<pre><code>public List&lt;String&gt; foo(List&lt;String&gt; source) {\n    \n    return source.stream()\n        .filter(s -&gt; predicate1())\n        .filter(s -&gt; predicate2())\n        .toList(); // for Java 16+ or collect(Collectors.toList());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13459822,"reputation":1807,"user_id":9712270,"display_name":"magicmn"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1661036703,"creation_date":1661036703,"answer_id":73430652,"question_id":73429979,"body_markdown":"It&#39;s not really intended to be used for that, but you could use an `AtomicLong`.\r\n\r\n        List&lt;String&gt; someList  = Arrays.asList(&quot;string1&quot;, &quot;string2&quot;, &quot;s1&quot;, &quot;s2&quot;);\r\n        AtomicLong count = new AtomicLong();\r\n        someList .stream()\r\n                .filter(s -&gt; s.contains(&quot;string&quot;))\r\n                .forEach(s -&gt; {\r\n                    System.out.println(s);\r\n                    count.incrementAndGet();\r\n                });\r\n        System.out.println(count.get());","title":"Counting AND printing values in Java stream","body":"<p>It's not really intended to be used for that, but you could use an <code>AtomicLong</code>.</p>\n<pre><code>    List&lt;String&gt; someList  = Arrays.asList(&quot;string1&quot;, &quot;string2&quot;, &quot;s1&quot;, &quot;s2&quot;);\n    AtomicLong count = new AtomicLong();\n    someList .stream()\n            .filter(s -&gt; s.contains(&quot;string&quot;))\n            .forEach(s -&gt; {\n                System.out.println(s);\n                count.incrementAndGet();\n            });\n    System.out.println(count.get());\n</code></pre>\n"}],"owner":{"account_id":6368951,"reputation":65,"user_id":4942033,"display_name":"jakubkrol"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1007,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73430652,"answer_count":3,"score":0,"last_activity_date":1661064913,"creation_date":1661027768,"question_id":73429979,"body_markdown":"I am writing a code, that runs a collection through a stream, and in the stream it filters the data with several filter functions, and then prints the result of filtering:\r\n\r\n    List&lt;String&gt; someList = Arrays.asList(&quot;string1&quot;, &quot;string2&quot;, etc.);\r\n\r\n    someList.stream().filter(s -&gt; predicate1()).filter(s -&gt; predicate2()).forEach(System.out::println);\r\nand what would greatly help me, would be the ability to **print and count** filtered elements. Since `forEach()` uses consumer function, and returns `Void` type, I cannot do anything further to the data. But if I change `forEach()` with `count()`, I receive a `long` value, and stream is ended this way or another.\r\nIs there any elegant way to have something like:\r\n\r\n    long counted = someList.stream().filter(s -&gt; predicate1()).filter(s -&gt; predicate2()).map??reduce??(printAndAlsoCountPrintedAndReturnFinalCountValue())\r\nin one stream without having to run it 2 times, first with `count()`, and the second with `forEach(System.out::println)`? I was thinking about some mapper function, but `map()` also returns `Stream&lt;R&gt;` data, so even if I did some mapping printing-counting function, I don&#39;t see how I&#39;d have to return counted value into a parameter.\r\n\r\nGenerally it&#39;s not a problem to run the collection through 2 streams, but I believe it&#39;s not very resource-wise, depending on how heavy the filtering functions would be, that&#39;s why I am looking for more &quot;clever&quot; solution, if it exists.","title":"Counting AND printing values in Java stream","body":"<p>I am writing a code, that runs a collection through a stream, and in the stream it filters the data with several filter functions, and then prints the result of filtering:</p>\n<pre><code>List&lt;String&gt; someList = Arrays.asList(&quot;string1&quot;, &quot;string2&quot;, etc.);\n\nsomeList.stream().filter(s -&gt; predicate1()).filter(s -&gt; predicate2()).forEach(System.out::println);\n</code></pre>\n<p>and what would greatly help me, would be the ability to <strong>print and count</strong> filtered elements. Since <code>forEach()</code> uses consumer function, and returns <code>Void</code> type, I cannot do anything further to the data. But if I change <code>forEach()</code> with <code>count()</code>, I receive a <code>long</code> value, and stream is ended this way or another.\nIs there any elegant way to have something like:</p>\n<pre><code>long counted = someList.stream().filter(s -&gt; predicate1()).filter(s -&gt; predicate2()).map??reduce??(printAndAlsoCountPrintedAndReturnFinalCountValue())\n</code></pre>\n<p>in one stream without having to run it 2 times, first with <code>count()</code>, and the second with <code>forEach(System.out::println)</code>? I was thinking about some mapper function, but <code>map()</code> also returns <code>Stream&lt;R&gt;</code> data, so even if I did some mapping printing-counting function, I don't see how I'd have to return counted value into a parameter.</p>\n<p>Generally it's not a problem to run the collection through 2 streams, but I believe it's not very resource-wise, depending on how heavy the filtering functions would be, that's why I am looking for more &quot;clever&quot; solution, if it exists.</p>\n"},{"tags":["java","memory-management","jvm","garbage-collection"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":2,"creation_date":1661064712,"post_id":73432088,"comment_id":129679114,"body_markdown":"Circular chains of reference don&#39;t inhibit GC. The class won&#39;t be collected until the classloader is, which may be never in the case of the system class loader. For application-created classloaders, the application would have to release all references to them.","body":"Circular chains of reference don&#39;t inhibit GC. The class won&#39;t be collected until the classloader is, which may be never in the case of the system class loader. For application-created classloaders, the application would have to release all references to them."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1661170035,"post_id":73432088,"comment_id":129700343,"body_markdown":"As soon as you see “PermGen” in an article, you can stop reading or should only continue reading with great care. The “PermGen” does not exist anymore, since Java&#160;8, in other words, since almost a decade.","body":"As soon as you see “PermGen” in an article, you can stop reading or should only continue reading with great care. The “PermGen” does not exist anymore, since Java 8, in other words, since almost a decade."}],"owner":{"account_id":6619055,"reputation":2065,"user_id":5111394,"accept_rate":53,"display_name":"pjj"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1661064703,"creation_date":1661062649,"question_id":73432088,"body_markdown":"I am reading about GC and in particular I read [Dynatrace][1] and [JLS][2], and I am getting an impression that there is a circular dependency between the GC of classes and class loaders because classes hold a reference to class loaders which loaded them and class loaders hold a reference to all the classes that loaded them.\r\n\r\nAlso, if a class holds reference to a class loader and vice-versa, then I wonder how they can ever get GC&#39;ed-of course, unless the JVM is shutdown or the application is unloaded.\r\n\r\nCould a JVM expert please confirm or correct my understanding? Any extra information or explanation is highly appreciated.\r\n\r\n\r\n  [1]: https://www.dynatrace.com/resources/ebooks/javabook/class-loader-issues/\r\n  [2]: https://docs.oracle.com/javase/specs/jls/se8/html/jls-12.html#jls-12.7","title":"Is there a circular dependency between class loader and class garbage collection?","body":"<p>I am reading about GC and in particular I read <a href=\"https://www.dynatrace.com/resources/ebooks/javabook/class-loader-issues/\" rel=\"nofollow noreferrer\">Dynatrace</a> and <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-12.html#jls-12.7\" rel=\"nofollow noreferrer\">JLS</a>, and I am getting an impression that there is a circular dependency between the GC of classes and class loaders because classes hold a reference to class loaders which loaded them and class loaders hold a reference to all the classes that loaded them.</p>\n<p>Also, if a class holds reference to a class loader and vice-versa, then I wonder how they can ever get GC'ed-of course, unless the JVM is shutdown or the application is unloaded.</p>\n<p>Could a JVM expert please confirm or correct my understanding? Any extra information or explanation is highly appreciated.</p>\n"},{"tags":["java","java-stream"],"answers":[{"tags":[],"owner":{"account_id":5553464,"reputation":17547,"user_id":4405757,"accept_rate":57,"display_name":"Thiyagu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1661063818,"creation_date":1661063818,"answer_id":73432189,"question_id":73432188,"body_markdown":"The example is working with a small data set. We need to have a lot of elements to see this behaviour (also depends on the capacity of the machine in which the code is run).\r\n\r\nFor instance, creating 100 strings and running this, I can see `Accumulator called with 1 and a` printed.\r\n\r\nGreater the number of elements, greater the number of times the accumulator will be called repeatedly for accumulation.","title":"Accumulator on parallel stream reduction is always called only with identity","body":"<p>The example is working with a small data set. We need to have a lot of elements to see this behaviour (also depends on the capacity of the machine in which the code is run).</p>\n<p>For instance, creating 100 strings and running this, I can see <code>Accumulator called with 1 and a</code> printed.</p>\n<p>Greater the number of elements, greater the number of times the accumulator will be called repeatedly for accumulation.</p>\n"}],"owner":{"account_id":5553464,"reputation":17547,"user_id":4405757,"accept_rate":57,"display_name":"Thiyagu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":73432189,"answer_count":1,"score":-1,"last_activity_date":1661063818,"creation_date":1661063818,"question_id":73432188,"body_markdown":"I&#39;m using the three-argument version of Stream#reduce. Starting with a list of strings, and 0 as the *identity*, the *accumulator* adds the identity and length of the string. The *combiner* adds two partial results.\r\n\r\n\r\n    List&lt;String&gt; strings = new ArrayList&lt;&gt;();\r\n    IntStream.range(0, 10)\r\n                .forEach(i -&gt; strings.add(&quot;a&quot;));\r\n    \r\n    System.out.println(strings.stream()\r\n        .parallel()\r\n        .reduce(0,\r\n                (res, s) -&gt; {\r\n                    System.out.println(&quot;Accumulator called with &quot; + res + &quot; and &quot; + s);\r\n                    return res + s.length();\r\n                },\r\n                (a, b) -&gt; {\r\n                    System.out.println(&quot;Combiner called with &quot; + a + &quot; and &quot; + b);\r\n                    return a + b;\r\n                }));\r\n\r\nWhen running this `Accumulator called with 0 and a` is printed 10 times whereas summing of partial results happen *only* in the combiner like,\r\n\r\n\r\n    Combiner called with 1 and 1\r\n    Combiner called with 1 and 2\r\n    ....\r\n    Combiner called with 2 and 3\r\n    Combiner called with 5 and 5\r\n\r\nWhy isn&#39;t the accumulator called with a previous (non-identity) result and a string i.e., why don&#39;t we see a print statement like `Accumulator called with 1 and a`?\r\n\r\n\r\n","title":"Accumulator on parallel stream reduction is always called only with identity","body":"<p>I'm using the three-argument version of Stream#reduce. Starting with a list of strings, and 0 as the <em>identity</em>, the <em>accumulator</em> adds the identity and length of the string. The <em>combiner</em> adds two partial results.</p>\n<pre><code>List&lt;String&gt; strings = new ArrayList&lt;&gt;();\nIntStream.range(0, 10)\n            .forEach(i -&gt; strings.add(&quot;a&quot;));\n\nSystem.out.println(strings.stream()\n    .parallel()\n    .reduce(0,\n            (res, s) -&gt; {\n                System.out.println(&quot;Accumulator called with &quot; + res + &quot; and &quot; + s);\n                return res + s.length();\n            },\n            (a, b) -&gt; {\n                System.out.println(&quot;Combiner called with &quot; + a + &quot; and &quot; + b);\n                return a + b;\n            }));\n</code></pre>\n<p>When running this <code>Accumulator called with 0 and a</code> is printed 10 times whereas summing of partial results happen <em>only</em> in the combiner like,</p>\n<pre><code>Combiner called with 1 and 1\nCombiner called with 1 and 2\n....\nCombiner called with 2 and 3\nCombiner called with 5 and 5\n</code></pre>\n<p>Why isn't the accumulator called with a previous (non-identity) result and a string i.e., why don't we see a print statement like <code>Accumulator called with 1 and a</code>?</p>\n"},{"tags":["java","hashmap"],"answers":[{"tags":[],"owner":{"account_id":2818342,"reputation":299858,"user_id":2422776,"display_name":"Mureinik"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661022400,"creation_date":1661022208,"answer_id":73429409,"question_id":73429361,"body_markdown":"You could iterate over `defaultTaskScores` and use [`putIfAbsent`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html#putIfAbsent(K,V)) to add the missing keys to `taskScores`:\r\n\r\n```java\r\ndefaultTaskScores.keySet().forEach(k -&gt; taskScores.putIfAbsent(k, 0));\r\n```\r\n\r\n**EDIT:**\\\r\nAn alternate approach could be to apply the default value when retrieving a score from the map. Instead of calling `taskScaores.get(someKey)`, you could use `taskScores.getOrDefault(someKey, 0)`.","title":"Copying keys from one Map to another","body":"<p>You could iterate over <code>defaultTaskScores</code> and use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html#putIfAbsent(K,V)\" rel=\"nofollow noreferrer\"><code>putIfAbsent</code></a> to add the missing keys to <code>taskScores</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>defaultTaskScores.keySet().forEach(k -&gt; taskScores.putIfAbsent(k, 0));\n</code></pre>\n<p><strong>EDIT:</strong><br />\nAn alternate approach could be to apply the default value when retrieving a score from the map. Instead of calling <code>taskScaores.get(someKey)</code>, you could use <code>taskScores.getOrDefault(someKey, 0)</code>.</p>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661025147,"creation_date":1661023307,"answer_id":73429524,"question_id":73429361,"body_markdown":"You can create iterate over the entries of `defaultTaskScores` with enhanced `for`-loop using entry set as a source, or by invoking [`forEach()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html#forEach(java.util.function.BiConsumer)) method on the`defaultTaskScores` map directly.\r\n\r\nTo update `taskScores` you can use Java 8 methods:\r\n\r\n* [`putIfAbsent()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html#putIfAbsent(K,V)):\r\n```\r\ndefaultTaskScores.forEach(taskScores::putIfAbsent);\r\n```\r\n\r\n*  or [`computeIfAbsent()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html#computeIfAbsent(K,java.util.function.Function)):\r\n```\r\ndefaultTaskScores.forEach((k, v) -&gt; taskScores.computeIfAbsent(k, (key) -&gt; v));\r\n```\r\n&lt;sup&gt;&lt;i&gt;In case if you&#39;re not comfortable with lambda expressions and method references, have a look at [this tutorial](https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html) created by Oracle.&lt;/i&gt;&lt;/sup&gt; \r\n\r\n***Sidenote:*** avoid using obsolete double brace initialization, it creates an anonymous class under the hood and might cause memory leaks. Since Java 9 we have a family of overloaded factory methods `Map.of()` and method `Map.ofEntries()` which produce an *immutable map*. When you need a map which is *mutable* like in this case, you can wrap it with a `HashMap`, like that:\r\n```\r\nMap&lt;String, Integer&gt; taskScores = new HashMap&lt;&gt;(Map.of(\r\n    &quot;Phalanxing&quot;, 90, &quot;Shieldwalling&quot;,56,&quot;Wedging&quot;,24\r\n));\r\n```","title":"Copying keys from one Map to another","body":"<p>You can create iterate over the entries of <code>defaultTaskScores</code> with enhanced <code>for</code>-loop using entry set as a source, or by invoking <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html#forEach(java.util.function.BiConsumer)\" rel=\"nofollow noreferrer\"><code>forEach()</code></a> method on the<code>defaultTaskScores</code> map directly.</p>\n<p>To update <code>taskScores</code> you can use Java 8 methods:</p>\n<ul>\n<li><a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html#putIfAbsent(K,V)\" rel=\"nofollow noreferrer\"><code>putIfAbsent()</code></a>:</li>\n</ul>\n<pre><code>defaultTaskScores.forEach(taskScores::putIfAbsent);\n</code></pre>\n<ul>\n<li>or <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html#computeIfAbsent(K,java.util.function.Function)\" rel=\"nofollow noreferrer\"><code>computeIfAbsent()</code></a>:</li>\n</ul>\n<pre><code>defaultTaskScores.forEach((k, v) -&gt; taskScores.computeIfAbsent(k, (key) -&gt; v));\n</code></pre>\n<p><sup><i>In case if you're not comfortable with lambda expressions and method references, have a look at <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html\" rel=\"nofollow noreferrer\">this tutorial</a> created by Oracle.</i></sup></p>\n<p><em><strong>Sidenote:</strong></em> avoid using obsolete double brace initialization, it creates an anonymous class under the hood and might cause memory leaks. Since Java 9 we have a family of overloaded factory methods <code>Map.of()</code> and method <code>Map.ofEntries()</code> which produce an <em>immutable map</em>. When you need a map which is <em>mutable</em> like in this case, you can wrap it with a <code>HashMap</code>, like that:</p>\n<pre><code>Map&lt;String, Integer&gt; taskScores = new HashMap&lt;&gt;(Map.of(\n    &quot;Phalanxing&quot;, 90, &quot;Shieldwalling&quot;,56,&quot;Wedging&quot;,24\n));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":953960,"reputation":2945,"user_id":979590,"accept_rate":38,"display_name":"Gabriel Belingueres"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661023436,"creation_date":1661023436,"answer_id":73429540,"question_id":73429361,"body_markdown":"Only put in the Map those values if the key is not already there:\r\n\r\n    for(Map.Entry&lt;String, Integer&gt; entry : defaultTaskScores.entrySet()) {\r\n      taskScores.putIfAbsent( entry.getKey(), entry.getValue() );\r\n    }","title":"Copying keys from one Map to another","body":"<p>Only put in the Map those values if the key is not already there:</p>\n<pre><code>for(Map.Entry&lt;String, Integer&gt; entry : defaultTaskScores.entrySet()) {\n  taskScores.putIfAbsent( entry.getKey(), entry.getValue() );\n}\n</code></pre>\n"}],"owner":{"account_id":25070695,"reputation":1,"user_id":18924554,"display_name":"Piotruz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":646,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1661063183,"creation_date":1661021890,"question_id":73429361,"body_markdown":"I have two maps. One with default values of `0` and one with set values.\r\n\r\n*For example:*\r\n\r\n    Map&lt;String,Integer&gt; defaultTaskScores = new HashMap&lt;String, Integer&gt;(){{\r\n       put(&quot;Phalanxing&quot;, 0);\r\n       put(&quot;Shieldwalling&quot;,0);\r\n       put(&quot;Tercioing&quot;,0);\r\n       put(&quot;Wedging&quot;,0);\r\n    }};\r\n\r\n    Map&lt;String,Integer&gt; taskScores = new HashMap&lt;String, Integer&gt;(){{\r\n       put(&quot;Phalanxing&quot;, 90);\r\n       put(&quot;Shieldwalling&quot;,56);\r\n       put(&quot;Wedging&quot;,24);\r\n    }};\r\n\r\nI want to put into `taskScores` a pair of key-value from `defaultTaskScores` which key&#39;s isn&#39;t in `taskScores`. For this example it&#39;s putting Tercioing with value of `0`.\r\n\r\n`taskScores` maps are in the list\r\n\r\n    List&lt;CourseResult&gt; courseResultList;\r\n\r\n    public class CourseResult {\r\n      private final Person person;\r\n      private final Map&lt;String, Integer&gt; taskResults;\r\n\r\n      public CourseResult(final Person person, final Map&lt;String, Integer&gt; taskResults) {\r\n          this.person = person;\r\n          this.taskResults = taskResults;\r\n      }\r\n    }","title":"Copying keys from one Map to another","body":"<p>I have two maps. One with default values of <code>0</code> and one with set values.</p>\n<p><em>For example:</em></p>\n<pre><code>Map&lt;String,Integer&gt; defaultTaskScores = new HashMap&lt;String, Integer&gt;(){{\n   put(&quot;Phalanxing&quot;, 0);\n   put(&quot;Shieldwalling&quot;,0);\n   put(&quot;Tercioing&quot;,0);\n   put(&quot;Wedging&quot;,0);\n}};\n\nMap&lt;String,Integer&gt; taskScores = new HashMap&lt;String, Integer&gt;(){{\n   put(&quot;Phalanxing&quot;, 90);\n   put(&quot;Shieldwalling&quot;,56);\n   put(&quot;Wedging&quot;,24);\n}};\n</code></pre>\n<p>I want to put into <code>taskScores</code> a pair of key-value from <code>defaultTaskScores</code> which key's isn't in <code>taskScores</code>. For this example it's putting Tercioing with value of <code>0</code>.</p>\n<p><code>taskScores</code> maps are in the list</p>\n<pre><code>List&lt;CourseResult&gt; courseResultList;\n\npublic class CourseResult {\n  private final Person person;\n  private final Map&lt;String, Integer&gt; taskResults;\n\n  public CourseResult(final Person person, final Map&lt;String, Integer&gt; taskResults) {\n      this.person = person;\n      this.taskResults = taskResults;\n  }\n}\n</code></pre>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":26081702,"reputation":16,"user_id":19779724,"display_name":"Bob"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1661063056,"creation_date":1660692119,"answer_id":73381321,"question_id":71576543,"body_markdown":"I had a similar error when I submitted to &quot;TMC&quot;, but when I sent the same solution to the server, it worked. \r\n\r\n```java\r\npublic class YourFirstAccount {\r\n\r\n    public static void main(String[] args) {\r\n        // Do not touch the code in Account.java\r\n        // Write your program here\r\n        Account bobsAccount = new Account(&quot;Bob&#39;s account&quot;, 100.0);\r\n        bobsAccount.deposit(20.0);\r\n        System.out.println(bobsAccount);\r\n    }\r\n}\r\n```","title":"MOOC Helsinki Java/ Part 4/ Exercise 1(Your First Account)","body":"<p>I had a similar error when I submitted to &quot;TMC&quot;, but when I sent the same solution to the server, it worked.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class YourFirstAccount {\n\n    public static void main(String[] args) {\n        // Do not touch the code in Account.java\n        // Write your program here\n        Account bobsAccount = new Account(&quot;Bob's account&quot;, 100.0);\n        bobsAccount.deposit(20.0);\n        System.out.println(bobsAccount);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":24647929,"reputation":13,"user_id":18545358,"display_name":"Kere"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":928,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73381321,"answer_count":1,"score":1,"last_activity_date":1661063056,"creation_date":1647970391,"question_id":71576543,"body_markdown":"I&#39;m doing MOOC Helsinki course for Java and until part 4 of Java I, everything was all right. &quot;Account&quot; Class is already written by MOOC, I just need to create Account Class Object in YourFirstAccount class, deposit 20 to it and print final balance, It shows correctly to console, but when I try to submit, gives back this error:\r\n\r\n\r\n&gt;Unable to make protected native java.lang.Object java.lang.Object.clone() throws java.lang.CloneNotSupportedException accessible: module java.base does not &quot;opens java.lang&quot; to unnamed module @44198d29 java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:354) java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:297) java.lang.reflect.Method.checkCanSetAccessible(Method.java:199) java.lang.reflect.Method.setAccessible(Method.java:193) org.powermock.reflect.internal.WhiteboxImpl.doGetAllMethods(WhiteboxImpl.java:1499) org.powermock.reflect.internal.WhiteboxImpl.getAllMethods(WhiteboxImpl.java:1473) org.powermock.reflect.internal.WhiteboxImpl.findMethodOrThrowException(WhiteboxImpl.java:853) org.powermock.reflect.internal.WhiteboxImpl.doInvokeMethod(WhiteboxImpl.java:813) org.powermock.reflect.internal.WhiteboxImpl.invokeMethod(WhiteboxImpl.java:681) org.powermock.reflect.Whitebox.invokeMethod(Whitebox.java:401) org.powermock.classloading.AbstractClassloaderExecutor.getResult(AbstractClassloaderExecutor.java:76) org.powermock.classloading.AbstractClassloaderExecutor.invokeWithClassLoader(AbstractClassloaderExecutor.java:64) org.powermock.classloading.AbstractClassloaderExecutor.executeWithClassLoader(AbstractClassloaderExecutor.java:56) org.powermock.classloading.SingleClassloaderExecutor.execute(SingleClassloaderExecutor.java:33) org.powermock.classloading.AbstractClassloaderExecutor.execute(AbstractClassloaderExecutor.java:40) org.powermock.modules.junit4.rule.PowerMockStatement.evaluate(PowerMockRule.java:75) org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271) org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70) org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50) org.junit.runners.ParentRunner$3.run(ParentRunner.java:238) org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63) org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236) org.junit.runners.ParentRunner.access$000(ParentRunner.java:53) org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229) org.junit.runners.ParentRunner.run(ParentRunner.java:309) fi.helsinki.cs.tmc.testrunner.TestRunner$TestingRunnable.runTestCase(TestRunner.java:134) fi.helsinki.cs.tmc.testrunner.TestRunner$TestingRunnable.doRun(TestRunner.java:89) fi.helsinki.cs.tmc.testrunner.TestRunner$TestingRunnable.run(TestRunner.java:70) java.lang.Thread.run(Thread.java:833) \r\n\r\nMy Code:\r\n\r\n```\r\npublic class YourFirstAccount {\r\n\r\n    public static void main(String[] args) {\r\n        // Do not touch the code in Account.java\r\n        // Write your program here\r\n        Account myAccount = new Account(&quot;My Account&quot;, 100.00);\r\n        \r\n        myAccount.deposit(20.00);\r\n        \r\n        System.out.println(myAccount);\r\n    }\r\n\r\n}\r\n\r\nCode that was already written my MOOC:\r\n/\\*\r\n\r\n* DO NOT TOUCH THIS !\r\n  \\*/\r\n\r\npublic class Account {\r\n\r\n    private double balance;\r\n    private String owner;\r\n    \r\n    public Account(String owner, double balance) {\r\n        this.balance = balance;\r\n        this.owner = owner;\r\n    }\r\n    \r\n    public void deposit(double amount) {\r\n        this.balance = this.balance + amount;\r\n    }\r\n    \r\n    public void withdrawal(double amount) {\r\n        this.balance = this.balance - amount;\r\n    }\r\n    \r\n    public double saldo() {\r\n        return this.balance;\r\n    }\r\n    \r\n    @Override\r\n    public String toString() {\r\n        return this.owner + &quot; balance: &quot; + this.balance;\r\n    }\r\n\r\n}\r\n```","title":"MOOC Helsinki Java/ Part 4/ Exercise 1(Your First Account)","body":"<p>I'm doing MOOC Helsinki course for Java and until part 4 of Java I, everything was all right. &quot;Account&quot; Class is already written by MOOC, I just need to create Account Class Object in YourFirstAccount class, deposit 20 to it and print final balance, It shows correctly to console, but when I try to submit, gives back this error:</p>\n<blockquote>\n<p>Unable to make protected native java.lang.Object java.lang.Object.clone() throws java.lang.CloneNotSupportedException accessible: module java.base does not &quot;opens java.lang&quot; to unnamed module @44198d29 java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:354) java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:297) java.lang.reflect.Method.checkCanSetAccessible(Method.java:199) java.lang.reflect.Method.setAccessible(Method.java:193) org.powermock.reflect.internal.WhiteboxImpl.doGetAllMethods(WhiteboxImpl.java:1499) org.powermock.reflect.internal.WhiteboxImpl.getAllMethods(WhiteboxImpl.java:1473) org.powermock.reflect.internal.WhiteboxImpl.findMethodOrThrowException(WhiteboxImpl.java:853) org.powermock.reflect.internal.WhiteboxImpl.doInvokeMethod(WhiteboxImpl.java:813) org.powermock.reflect.internal.WhiteboxImpl.invokeMethod(WhiteboxImpl.java:681) org.powermock.reflect.Whitebox.invokeMethod(Whitebox.java:401) org.powermock.classloading.AbstractClassloaderExecutor.getResult(AbstractClassloaderExecutor.java:76) org.powermock.classloading.AbstractClassloaderExecutor.invokeWithClassLoader(AbstractClassloaderExecutor.java:64) org.powermock.classloading.AbstractClassloaderExecutor.executeWithClassLoader(AbstractClassloaderExecutor.java:56) org.powermock.classloading.SingleClassloaderExecutor.execute(SingleClassloaderExecutor.java:33) org.powermock.classloading.AbstractClassloaderExecutor.execute(AbstractClassloaderExecutor.java:40) org.powermock.modules.junit4.rule.PowerMockStatement.evaluate(PowerMockRule.java:75) org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271) org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70) org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50) org.junit.runners.ParentRunner$3.run(ParentRunner.java:238) org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63) org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236) org.junit.runners.ParentRunner.access$000(ParentRunner.java:53) org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229) org.junit.runners.ParentRunner.run(ParentRunner.java:309) fi.helsinki.cs.tmc.testrunner.TestRunner$TestingRunnable.runTestCase(TestRunner.java:134) fi.helsinki.cs.tmc.testrunner.TestRunner$TestingRunnable.doRun(TestRunner.java:89) fi.helsinki.cs.tmc.testrunner.TestRunner$TestingRunnable.run(TestRunner.java:70) java.lang.Thread.run(Thread.java:833)</p>\n</blockquote>\n<p>My Code:</p>\n<pre><code>public class YourFirstAccount {\n\n    public static void main(String[] args) {\n        // Do not touch the code in Account.java\n        // Write your program here\n        Account myAccount = new Account(&quot;My Account&quot;, 100.00);\n        \n        myAccount.deposit(20.00);\n        \n        System.out.println(myAccount);\n    }\n\n}\n\nCode that was already written my MOOC:\n/\\*\n\n* DO NOT TOUCH THIS !\n  \\*/\n\npublic class Account {\n\n    private double balance;\n    private String owner;\n    \n    public Account(String owner, double balance) {\n        this.balance = balance;\n        this.owner = owner;\n    }\n    \n    public void deposit(double amount) {\n        this.balance = this.balance + amount;\n    }\n    \n    public void withdrawal(double amount) {\n        this.balance = this.balance - amount;\n    }\n    \n    public double saldo() {\n        return this.balance;\n    }\n    \n    @Override\n    public String toString() {\n        return this.owner + &quot; balance: &quot; + this.balance;\n    }\n\n}\n</code></pre>\n"},{"tags":["java","htmlunit"],"answers":[{"tags":[],"owner":{"account_id":384802,"reputation":10056,"user_id":741558,"accept_rate":83,"display_name":"Grooveek"},"down_vote_count":2,"up_vote_count":27,"is_accepted":true,"score":25,"last_activity_date":1306414413,"creation_date":1306407096,"answer_id":6137369,"question_id":6136435,"body_markdown":"\r\nThis code works in GroovyConsole\r\n\r\n    @Grapes(\r\n        @Grab(group=&#39;net.sourceforge.htmlunit&#39;, module=&#39;htmlunit&#39;, version=&#39;2.8&#39;)\r\n    )\r\n\r\n    import com.gargoylesoftware.htmlunit.*\r\n    import com.gargoylesoftware.htmlunit.html.*\r\n    \r\n    URL url = new URL(&quot;http://www.example.com&quot;);\r\n    StringWebResponse response = new StringWebResponse(&quot;&lt;html&gt;&lt;head&gt;&lt;title&gt;Test&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;/body&gt;&lt;/html&gt;&quot;, url);\r\n    WebClient client = new WebClient()\r\n    HtmlPage page = HTMLParser.parseHtml(response, client.getCurrentWindow());\r\n    System.out.println(page.getTitleText());","title":"How to create HtmlUnit HTMLPage object from String?","body":"<p>This code works in GroovyConsole</p>\n\n<pre><code>@Grapes(\n    @Grab(group='net.sourceforge.htmlunit', module='htmlunit', version='2.8')\n)\n\nimport com.gargoylesoftware.htmlunit.*\nimport com.gargoylesoftware.htmlunit.html.*\n\nURL url = new URL(\"http://www.example.com\");\nStringWebResponse response = new StringWebResponse(\"&lt;html&gt;&lt;head&gt;&lt;title&gt;Test&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;/body&gt;&lt;/html&gt;\", url);\nWebClient client = new WebClient()\nHtmlPage page = HTMLParser.parseHtml(response, client.getCurrentWindow());\nSystem.out.println(page.getTitleText());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2768882,"reputation":695,"user_id":2383897,"display_name":"mrzzmr"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1594064429,"creation_date":1594064429,"answer_id":62763309,"question_id":6136435,"body_markdown":"Using HTMLUnit 2.40, Grooveek&#39;s code won&#39;t compile, you get &quot;Cannot make a static reference to the non-static method parseHtml(WebResponse, WebWindow) from the type HTMLParser&quot;. But there is now a class HtmlUnitNekoHtmlParser implementing the HTMLParser interface, so the following code works:\r\n\r\n    StringWebResponse response = new StringWebResponse(\r\n        &quot;&lt;html&gt;&lt;head&gt;&lt;title&gt;Test&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;/body&gt;&lt;/html&gt;&quot;, \r\n        new URL(&quot;http://www.example.com&quot;));\r\n    HtmlPage page = new HtmlUnitNekoHtmlParser().parseHtml(\r\n        response, new WebClient().getCurrentWindow());","title":"How to create HtmlUnit HTMLPage object from String?","body":"<p>Using HTMLUnit 2.40, Grooveek's code won't compile, you get &quot;Cannot make a static reference to the non-static method parseHtml(WebResponse, WebWindow) from the type HTMLParser&quot;. But there is now a class HtmlUnitNekoHtmlParser implementing the HTMLParser interface, so the following code works:</p>\n<pre><code>StringWebResponse response = new StringWebResponse(\n    &quot;&lt;html&gt;&lt;head&gt;&lt;title&gt;Test&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;/body&gt;&lt;/html&gt;&quot;, \n    new URL(&quot;http://www.example.com&quot;));\nHtmlPage page = new HtmlUnitNekoHtmlParser().parseHtml(\n    response, new WebClient().getCurrentWindow());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2152111,"reputation":75,"user_id":1908198,"accept_rate":50,"display_name":"Andr&#233; Henriques"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661062944,"creation_date":1660686855,"answer_id":73380773,"question_id":6136435,"body_markdown":"```java\r\nString htmlAsString = &quot;&lt;Your content: O Mour&#227;o &#233; o maior!&gt;&quot;;\r\nStringWebResponse response = new StringWebResponse(htmlAsString, new URL(&quot;your url&quot;));\r\nHtmlPage htmlPage = new HtmlPage(response, webClient.getCurrentWindow());\r\n```","title":"How to create HtmlUnit HTMLPage object from String?","body":"<pre class=\"lang-java prettyprint-override\"><code>String htmlAsString = &quot;&lt;Your content: O Mourão é o maior!&gt;&quot;;\nStringWebResponse response = new StringWebResponse(htmlAsString, new URL(&quot;your url&quot;));\nHtmlPage htmlPage = new HtmlPage(response, webClient.getCurrentWindow());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6163228,"reputation":2754,"user_id":4804091,"display_name":"RBRi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660729408,"creation_date":1660729408,"answer_id":73386255,"question_id":6136435,"body_markdown":"There is some sample code in the FAQ https://htmlunit.sourceforge.io/faq.html#HowToParseHtmlString\r\n\r\ne.g.\r\n\r\n    final String htmlCode = &quot;&lt;html&gt;&quot;\r\n            + &quot;  &lt;head&gt;&quot;\r\n            + &quot;    &lt;title&gt;Title&lt;/title&gt;&quot;\r\n            + &quot;  &lt;/head&gt;&quot;\r\n            + &quot;  &lt;body&gt;&quot;\r\n            + &quot;    content...&quot;\r\n            + &quot;  &lt;/body&gt;&quot;\r\n            + &quot;&lt;/html&gt; &quot;;\r\n    try (WebClient webClient = new WebClient(browserVersion)) {\r\n        final HtmlPage page = webClient.loadHtmlCodeIntoCurrentWindow(htmlCode);\r\n        // work with the html page\r\n    }\r\n","title":"How to create HtmlUnit HTMLPage object from String?","body":"<p>There is some sample code in the FAQ <a href=\"https://htmlunit.sourceforge.io/faq.html#HowToParseHtmlString\" rel=\"nofollow noreferrer\">https://htmlunit.sourceforge.io/faq.html#HowToParseHtmlString</a></p>\n<p>e.g.</p>\n<pre><code>final String htmlCode = &quot;&lt;html&gt;&quot;\n        + &quot;  &lt;head&gt;&quot;\n        + &quot;    &lt;title&gt;Title&lt;/title&gt;&quot;\n        + &quot;  &lt;/head&gt;&quot;\n        + &quot;  &lt;body&gt;&quot;\n        + &quot;    content...&quot;\n        + &quot;  &lt;/body&gt;&quot;\n        + &quot;&lt;/html&gt; &quot;;\ntry (WebClient webClient = new WebClient(browserVersion)) {\n    final HtmlPage page = webClient.loadHtmlCodeIntoCurrentWindow(htmlCode);\n    // work with the html page\n}\n</code></pre>\n"}],"owner":{"account_id":116952,"reputation":21661,"user_id":306488,"accept_rate":78,"display_name":"lisak"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13204,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"accepted_answer_id":6137369,"answer_count":4,"score":20,"last_activity_date":1661062944,"creation_date":1306402242,"question_id":6136435,"body_markdown":"This [question was asked once already][1], but the API changed I guess and the answers are no valid anymore.\r\n\r\n    URL url = new URL(&quot;http://www.example.com&quot;);\r\n    StringWebResponse response = new StringWebResponse(&quot;&lt;html&gt;&lt;head&gt;&lt;title&gt;Test&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;/body&gt;&lt;/html&gt;&quot;, url);\r\n    HtmlPage page = HTMLParser.parseHtml(response, new TopLevelWindow(&quot;top&quot;, new WebClient()));\r\n    System.out.println(page.getTitleText());\r\n\r\nCan&#39;t be done because TopLevelWindow is protected and stuff like extending/implementing the window because of that is ridiculous :) \r\n\r\nAnybody has an idea how to do that ? It seems to me weird that it can&#39;t be done easily.\r\n\r\n\r\n  [1]: https://stackoverflow.com/q/2016762/306488","title":"How to create HtmlUnit HTMLPage object from String?","body":"<p>This <a href=\"https://stackoverflow.com/q/2016762/306488\">question was asked once already</a>, but the API changed I guess and the answers are no valid anymore.</p>\n\n<pre><code>URL url = new URL(\"http://www.example.com\");\nStringWebResponse response = new StringWebResponse(\"&lt;html&gt;&lt;head&gt;&lt;title&gt;Test&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;/body&gt;&lt;/html&gt;\", url);\nHtmlPage page = HTMLParser.parseHtml(response, new TopLevelWindow(\"top\", new WebClient()));\nSystem.out.println(page.getTitleText());\n</code></pre>\n\n<p>Can't be done because TopLevelWindow is protected and stuff like extending/implementing the window because of that is ridiculous :) </p>\n\n<p>Anybody has an idea how to do that ? It seems to me weird that it can't be done easily.</p>\n"},{"tags":["java","simulation","anylogic"],"answers":[{"tags":[],"owner":{"account_id":26084596,"reputation":1,"user_id":19782263,"display_name":"Ramesh Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661062066,"creation_date":1660718923,"answer_id":73383986,"question_id":73381544,"body_markdown":"Instead of taking select block, you can try with multiple split block. Split blocks allow you to change or create new agent.","title":"AnyLogic : All the delays are full So new agent is not suppose to enter according to condition","body":"<p>Instead of taking select block, you can try with multiple split block. Split blocks allow you to change or create new agent.</p>\n"},{"tags":[],"owner":{"account_id":4196914,"reputation":8766,"user_id":3438111,"accept_rate":100,"display_name":"Felipe"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660719172,"creation_date":1660719172,"answer_id":73384014,"question_id":73381544,"body_markdown":"First i have to say that those seize/release blocks are completely useless and probably are just a desperate way you are using to solve the problem\r\n\r\nNow, according to your model, there is absolutely nothing blocking your model to move an agent to your seize block because the condition clearly states that if delay1 is free, the agent can exit delay (and in your picture, delay1.size IS equal to zero)\r\n\r\nI don&#39;t know what you have in selectOutput7 though ","title":"AnyLogic : All the delays are full So new agent is not suppose to enter according to condition","body":"<p>First i have to say that those seize/release blocks are completely useless and probably are just a desperate way you are using to solve the problem</p>\n<p>Now, according to your model, there is absolutely nothing blocking your model to move an agent to your seize block because the condition clearly states that if delay1 is free, the agent can exit delay (and in your picture, delay1.size IS equal to zero)</p>\n<p>I don't know what you have in selectOutput7 though</p>\n"}],"owner":{"account_id":22597080,"reputation":315,"user_id":16779211,"display_name":"Aqeel Tariq"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":132,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1661062066,"creation_date":1660694630,"question_id":73381544,"body_markdown":"Of the conditions I listed in `SelectOutput8`, one of them must be true every time.\r\n\r\nBut that is not the case, and it seems like there is no reason for that.\r\nDetails are shown in the image below. \r\n\r\n[![enter image description here][1]][1]\r\n\r\nThe problem is the delay2, delay4, delay7 is full So no new agent needs to enter according to the condition but that is not the case.\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ZJ5wf.jpg\r\n  [2]: https://i.stack.imgur.com/e3yQH.jpg","title":"AnyLogic : All the delays are full So new agent is not suppose to enter according to condition","body":"<p>Of the conditions I listed in <code>SelectOutput8</code>, one of them must be true every time.</p>\n<p>But that is not the case, and it seems like there is no reason for that.\nDetails are shown in the image below.</p>\n<p><a href=\"https://i.stack.imgur.com/ZJ5wf.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZJ5wf.jpg\" alt=\"enter image description here\" /></a></p>\n<p>The problem is the delay2, delay4, delay7 is full So no new agent needs to enter according to the condition but that is not the case.\n<a href=\"https://i.stack.imgur.com/e3yQH.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/e3yQH.jpg\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","user-interface","null","spigot"],"answers":[{"tags":[],"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660996262,"creation_date":1660996262,"answer_id":73426484,"question_id":73426357,"body_markdown":"Of public interface MakeItem.\r\nAn interface in Java is always public and static\r\nand\r\nAll fields (variables) must be static constants\r\nand\r\nAll methods are an abstract signature only , no body code\r\nYou must &quot;implement&quot; the coded methods inside a class that uses the implement keyword and the interface name.","title":"getItemMeta is always returning null in my spigot plugin","body":"<p>Of public interface MakeItem.\nAn interface in Java is always public and static\nand\nAll fields (variables) must be static constants\nand\nAll methods are an abstract signature only , no body code\nYou must &quot;implement&quot; the coded methods inside a class that uses the implement keyword and the interface name.</p>\n"},{"tags":[],"owner":{"account_id":26114681,"reputation":1,"user_id":19808007,"display_name":"Jimmy Graham"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1661061259,"creation_date":1661061174,"answer_id":73431973,"question_id":73426357,"body_markdown":"In BluntKnife.java I did the constructor wrong.\r\n\r\nSo I changed it from ```public void BluntKnife()``` too ```public BluntKnife()```","title":"getItemMeta is always returning null in my spigot plugin","body":"<p>In BluntKnife.java I did the constructor wrong.</p>\n<p>So I changed it from <code>public void BluntKnife()</code> too <code>public BluntKnife()</code></p>\n"}],"owner":{"account_id":26114681,"reputation":1,"user_id":19808007,"display_name":"Jimmy Graham"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":396,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73431973,"answer_count":2,"score":0,"last_activity_date":1661061259,"creation_date":1660995283,"question_id":73426357,"body_markdown":"Hi fellow coders I have been trying to make a custom sword and put it into a shop gui but when I try to change the swords meta using ItemStack.getitemmeta() and then i try to set the display name or something it says the sword  meta is null. Also I am changing My actual name in irl to my name and the server name to server name\r\n\r\nError:\r\n\r\nCaused by: java.lang.NullPointerException: Cannot invoke &quot;org.bukkit.inventory.meta.ItemMeta.setDisplayName(String)&quot; because &quot;weaponMeta&quot; is null\r\n\r\nBlunt Knife.java\r\n```\r\npackage me.myname.servername.items.weapons;\r\n\r\nimport me.myname.servername.Utils.Weapon;\r\nimport org.bukkit.Material;\r\nimport org.bukkit.inventory.ItemStack;\r\n\r\nimport java.util.ArrayList;\r\n\r\npublic class BluntKnife extends Weapon\r\n{\r\n\r\n    public void BluntKnife()\r\n    {\r\n        tradable = true;\r\n        damage = 12;\r\n        rarity = &quot;COMMON&quot;;\r\n        name = &quot;Blunt Knife&quot;;\r\n        ArrayList&lt;String&gt; lore = new ArrayList&lt;String&gt;();\r\n        lore.add(&quot;Damage: +12&quot;);\r\n        lore.add(&quot;&quot;);\r\n        lore.add(&quot;Can be upgraded with /upgrade for 500 coins!&quot;);\r\n        lore.add(&quot;&quot;);\r\n        lore.add(&quot;⚔ COMMON SWORD ⚔&quot;);\r\n        item = new ItemStack(Material.AIR, 1);\r\n\r\n    }\r\n}\r\n```\r\nMakeItem.java\r\n\r\n```\r\npackage me.myname.servername.Utils;\r\n\r\nimport org.bukkit.Bukkit;\r\nimport org.bukkit.inventory.ItemStack;\r\nimport org.bukkit.inventory.meta.ItemMeta;\r\n\r\npublic interface MakeItem\r\n{\r\n    public default ItemStack makeItemFromWeapon(Weapon wpn)\r\n    {\r\n        ItemStack weapon = wpn.item;\r\n        ItemMeta weaponMeta = weapon.getItemMeta();\r\n\r\n        weaponMeta.setDisplayName(wpn.name);\r\n        weaponMeta.setLore(wpn.lore);\r\n        weapon.setItemMeta(weaponMeta);\r\n        \r\n        return weapon;\r\n    }\r\n}\r\n```\r\nWeapon.java\r\n```\r\npackage me.myname.servername.Utils;\r\n\r\nimport org.bukkit.Material;\r\nimport org.bukkit.inventory.ItemStack;\r\n\r\nimport java.util.ArrayList;\r\n\r\npublic class Weapon\r\n{\r\n    protected boolean tradable = true;\r\n    protected int damage = 5;\r\n    protected String rarity = null;\r\n    protected String name = null;\r\n    protected ArrayList&lt;String&gt; lore = new ArrayList&lt;&gt;();\r\n    protected ItemStack item = new ItemStack(Material.AIR, 1);\r\n}\r\n```\r\nShopCommand.java\r\n```\r\npackage me.myname.servername.commands;\r\n\r\nimport me.myname.servername.Utils.MakeItem;\r\nimport me.myname.servername.Utils.Weapon;\r\nimport me.myname.servername.items.weapons.BluntKnife;\r\nimport org.bukkit.Bukkit;\r\nimport org.bukkit.ChatColor;\r\nimport org.bukkit.command.Command;\r\nimport org.bukkit.command.CommandExecutor;\r\nimport org.bukkit.command.CommandSender;\r\nimport org.bukkit.entity.Player;\r\nimport org.bukkit.inventory.Inventory;\r\nimport org.bukkit.inventory.ItemStack;\r\n\r\npublic class ShopCommand implements CommandExecutor, MakeItem {\r\n\r\n    @Override\r\n    public boolean onCommand(CommandSender sender, Command command, String label, String[] args)\r\n    {\r\n        if(sender instanceof Player){\r\n            Player player = (Player) sender;\r\n            Inventory shopinv = Bukkit.createInventory(player, 9, ChatColor.AQUA + &quot;Shop&quot;);\r\n            BluntKnife item1 = new BluntKnife();\r\n\r\n\r\n            ItemStack[] menu_items = {makeItemFromWeapon(item1)};\r\n\r\n\r\n            shopinv.setContents(menu_items);\r\n            player.openInventory(shopinv);\r\n        }\r\n\r\n        return true;\r\n    }\r\n}\r\n```","title":"getItemMeta is always returning null in my spigot plugin","body":"<p>Hi fellow coders I have been trying to make a custom sword and put it into a shop gui but when I try to change the swords meta using ItemStack.getitemmeta() and then i try to set the display name or something it says the sword  meta is null. Also I am changing My actual name in irl to my name and the server name to server name</p>\n<p>Error:</p>\n<p>Caused by: java.lang.NullPointerException: Cannot invoke &quot;org.bukkit.inventory.meta.ItemMeta.setDisplayName(String)&quot; because &quot;weaponMeta&quot; is null</p>\n<p>Blunt Knife.java</p>\n<pre><code>package me.myname.servername.items.weapons;\n\nimport me.myname.servername.Utils.Weapon;\nimport org.bukkit.Material;\nimport org.bukkit.inventory.ItemStack;\n\nimport java.util.ArrayList;\n\npublic class BluntKnife extends Weapon\n{\n\n    public void BluntKnife()\n    {\n        tradable = true;\n        damage = 12;\n        rarity = &quot;COMMON&quot;;\n        name = &quot;Blunt Knife&quot;;\n        ArrayList&lt;String&gt; lore = new ArrayList&lt;String&gt;();\n        lore.add(&quot;Damage: +12&quot;);\n        lore.add(&quot;&quot;);\n        lore.add(&quot;Can be upgraded with /upgrade for 500 coins!&quot;);\n        lore.add(&quot;&quot;);\n        lore.add(&quot;⚔ COMMON SWORD ⚔&quot;);\n        item = new ItemStack(Material.AIR, 1);\n\n    }\n}\n</code></pre>\n<p>MakeItem.java</p>\n<pre><code>package me.myname.servername.Utils;\n\nimport org.bukkit.Bukkit;\nimport org.bukkit.inventory.ItemStack;\nimport org.bukkit.inventory.meta.ItemMeta;\n\npublic interface MakeItem\n{\n    public default ItemStack makeItemFromWeapon(Weapon wpn)\n    {\n        ItemStack weapon = wpn.item;\n        ItemMeta weaponMeta = weapon.getItemMeta();\n\n        weaponMeta.setDisplayName(wpn.name);\n        weaponMeta.setLore(wpn.lore);\n        weapon.setItemMeta(weaponMeta);\n        \n        return weapon;\n    }\n}\n</code></pre>\n<p>Weapon.java</p>\n<pre><code>package me.myname.servername.Utils;\n\nimport org.bukkit.Material;\nimport org.bukkit.inventory.ItemStack;\n\nimport java.util.ArrayList;\n\npublic class Weapon\n{\n    protected boolean tradable = true;\n    protected int damage = 5;\n    protected String rarity = null;\n    protected String name = null;\n    protected ArrayList&lt;String&gt; lore = new ArrayList&lt;&gt;();\n    protected ItemStack item = new ItemStack(Material.AIR, 1);\n}\n</code></pre>\n<p>ShopCommand.java</p>\n<pre><code>package me.myname.servername.commands;\n\nimport me.myname.servername.Utils.MakeItem;\nimport me.myname.servername.Utils.Weapon;\nimport me.myname.servername.items.weapons.BluntKnife;\nimport org.bukkit.Bukkit;\nimport org.bukkit.ChatColor;\nimport org.bukkit.command.Command;\nimport org.bukkit.command.CommandExecutor;\nimport org.bukkit.command.CommandSender;\nimport org.bukkit.entity.Player;\nimport org.bukkit.inventory.Inventory;\nimport org.bukkit.inventory.ItemStack;\n\npublic class ShopCommand implements CommandExecutor, MakeItem {\n\n    @Override\n    public boolean onCommand(CommandSender sender, Command command, String label, String[] args)\n    {\n        if(sender instanceof Player){\n            Player player = (Player) sender;\n            Inventory shopinv = Bukkit.createInventory(player, 9, ChatColor.AQUA + &quot;Shop&quot;);\n            BluntKnife item1 = new BluntKnife();\n\n\n            ItemStack[] menu_items = {makeItemFromWeapon(item1)};\n\n\n            shopinv.setContents(menu_items);\n            player.openInventory(shopinv);\n        }\n\n        return true;\n    }\n}\n</code></pre>\n"},{"tags":["java","camunda"],"answers":[{"tags":[],"owner":{"account_id":1612994,"reputation":7243,"user_id":1491439,"display_name":"rob2universe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661060816,"creation_date":1661060816,"answer_id":73431945,"question_id":73418721,"body_markdown":"Have you adjusted the other dependencies (jUnit, bpm-assert) and packages to jUnit 5 and the bootstrapping of the engine to the new way?\r\n\r\nPlease see full examples here:\r\nhttps://camunda.com/blog/2021/01/test-your-processes-with-junit-5/\r\n\r\nand here:\r\n\r\nhttps://github.com/camunda-community-hub/camunda-bpm-junit5/blob/master/examples/camunda-bpm-assert/src/test/java/org/camunda/bpm/unittest/SimpleTestCase.java\r\n\r\nIf this does not help please add the test case code (imports, bootstrap, 1 test) to your question.\r\n\r\n","title":"NoSuchMethodError when switching from camunda extension to camunda base module","body":"<p>Have you adjusted the other dependencies (jUnit, bpm-assert) and packages to jUnit 5 and the bootstrapping of the engine to the new way?</p>\n<p>Please see full examples here:\n<a href=\"https://camunda.com/blog/2021/01/test-your-processes-with-junit-5/\" rel=\"nofollow noreferrer\">https://camunda.com/blog/2021/01/test-your-processes-with-junit-5/</a></p>\n<p>and here:</p>\n<p><a href=\"https://github.com/camunda-community-hub/camunda-bpm-junit5/blob/master/examples/camunda-bpm-assert/src/test/java/org/camunda/bpm/unittest/SimpleTestCase.java\" rel=\"nofollow noreferrer\">https://github.com/camunda-community-hub/camunda-bpm-junit5/blob/master/examples/camunda-bpm-assert/src/test/java/org/camunda/bpm/unittest/SimpleTestCase.java</a></p>\n<p>If this does not help please add the test case code (imports, bootstrap, 1 test) to your question.</p>\n"}],"owner":{"account_id":9596677,"reputation":21,"user_id":7125582,"display_name":"Bob Lauer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":425,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1661060816,"creation_date":1660921275,"question_id":73418721,"body_markdown":"I just saw that the Maven artifact org.camunda.bpm.extension:camunda-bpm-junit5 has not seen updates lately but seems to have been incorporated into org.camunda.bpm:camunda-bpm-junit5. So I tried to switch to the new package. This comes with some package changes, apparently.\r\n\r\nI tried to just replace the package name for ProcessEngineExtension in my code from\r\n\r\n```import org.camunda.bpm.extension.junit5.test.ProcessEngineExtension;```\r\n\r\nto\r\n\r\n```import org.camunda.bpm.engine.test.junit5.ProcessEngineExtension;```\r\n\r\nThis does compile, however the unit tests fail with this ominous error (I am not using the below TestHelper class myself):\r\n\r\n```NoSuchMethodError: org.camunda.bpm.engine.impl.test.TestHelper.annotationDeploymentSetUp```\r\n\r\nThe weirdest part is that Maven is not showing me any stack trace (static initializer problem?); this is the kind of output I get:\r\n\r\n```[ERROR] de.mycompany.bla.x.SomeProcessTest.testSingleBescheidMitAbruf  Time elapsed: 0.001 s  &lt;&lt;&lt; ERROR!\r\njava.lang.NoSuchMethodError: org.camunda.bpm.engine.impl.test.TestHelper.annotationDeploymentSetUp(\r\nLorg/camunda/bpm/engine/ProcessEngine;Ljava/lang/Class;Ljava/lang/String;\r\nLorg/camunda/bpm/engine/test/Deployment;[Ljava/lang/Class;)Ljava/lang/String;```\r\n","title":"NoSuchMethodError when switching from camunda extension to camunda base module","body":"<p>I just saw that the Maven artifact org.camunda.bpm.extension:camunda-bpm-junit5 has not seen updates lately but seems to have been incorporated into org.camunda.bpm:camunda-bpm-junit5. So I tried to switch to the new package. This comes with some package changes, apparently.</p>\n<p>I tried to just replace the package name for ProcessEngineExtension in my code from</p>\n<p><code>import org.camunda.bpm.extension.junit5.test.ProcessEngineExtension;</code></p>\n<p>to</p>\n<p><code>import org.camunda.bpm.engine.test.junit5.ProcessEngineExtension;</code></p>\n<p>This does compile, however the unit tests fail with this ominous error (I am not using the below TestHelper class myself):</p>\n<p><code>NoSuchMethodError: org.camunda.bpm.engine.impl.test.TestHelper.annotationDeploymentSetUp</code></p>\n<p>The weirdest part is that Maven is not showing me any stack trace (static initializer problem?); this is the kind of output I get:</p>\n<pre><code>java.lang.NoSuchMethodError: org.camunda.bpm.engine.impl.test.TestHelper.annotationDeploymentSetUp(\nLorg/camunda/bpm/engine/ProcessEngine;Ljava/lang/Class;Ljava/lang/String;\nLorg/camunda/bpm/engine/test/Deployment;[Ljava/lang/Class;)Ljava/lang/String;```\n</code></pre>\n"},{"tags":["java","spring-boot","intellij-idea","spring-data-jpa"],"comments":[{"owner":{"account_id":5665259,"reputation":13,"user_id":4481585,"display_name":"DJuno"},"score":0,"creation_date":1661035752,"post_id":73430562,"comment_id":129676142,"body_markdown":"also confirmed in IntelliJ `2022.2.1`","body":"also confirmed in IntelliJ <code>2022.2.1</code>"},{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":2,"creation_date":1661038651,"post_id":73430562,"comment_id":129676489,"body_markdown":"You shouldn&#39;t make fields `final` when using libraries that instantiate instances, eg hibernate, jackson, et al. If you want to not have a setter, remove @Setter from the class and annotate only the settable fields with @Setter","body":"You shouldn&#39;t make fields <code>final</code> when using libraries that instantiate instances, eg hibernate, jackson, et al. If you want to not have a setter, remove @Setter from the class and annotate only the settable fields with @Setter"}],"answers":[{"tags":[],"owner":{"account_id":16139017,"reputation":129,"user_id":15817444,"display_name":"Mazhar Ibna Zahur"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1661059391,"creation_date":1661059391,"answer_id":73431844,"question_id":73430562,"body_markdown":"As per JPA documentation &#39;**No methods or persistent instance variables must be declared final**&#39;. remove final keyword from variable. \r\n\r\nfor details [check][1] \r\n\r\n\r\n  [1]: https://docs.oracle.com/cd/E19798-01/821-1841/bnbqb/index.html","title":"IntelliJ can&#39;t find inverse attribute in many-to-many relationship when the inverse attribute has final keywords","body":"<p>As per JPA documentation '<strong>No methods or persistent instance variables must be declared final</strong>'. remove final keyword from variable.</p>\n<p>for details <a href=\"https://docs.oracle.com/cd/E19798-01/821-1841/bnbqb/index.html\" rel=\"nofollow noreferrer\">check</a></p>\n"}],"owner":{"account_id":5665259,"reputation":13,"user_id":4481585,"display_name":"DJuno"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1058,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1661059391,"creation_date":1661035518,"question_id":73430562,"body_markdown":"Let&#39;s suppose we have two entities in many-to-many bi-directional relationships, `Student` and `Subject`.\r\n\r\n```java\r\n@Getter\r\n@Entity\r\npublic class Student {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    @Setter\r\n    private String name;\r\n\r\n    @JoinTable(\r\n            name = &quot;student_subject&quot;,\r\n            joinColumns = @JoinColumn(name = &quot;student_id&quot;),\r\n            inverseJoinColumns = @JoinColumn(name = &quot;subject_id&quot;)\r\n    )\r\n    @ManyToMany(cascade = CascadeType.ALL)\r\n    private final Set&lt;Subject&gt; subjects = new LinkedHashSet&lt;&gt;();\r\n\r\n// constructors and etc.\r\n}\r\n```\r\n\r\n```java\r\n@Getter\r\n@Entity\r\npublic class Subject {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    @Setter\r\n    private String name;\r\n\r\n    @ManyToMany(mappedBy = &quot;subjects&quot;)\r\n    private final Set&lt;Student&gt; students = new LinkedHashSet&lt;&gt;();\r\n\r\n// constructors and etc.\r\n}\r\n```\r\n\r\nEach collection field is set to `final` and has no setter. This is intentional design to prevent it from being accidentally re-initialized to other collection instance after the persistence context takes care of it.\r\n\r\nYou can test if the entities above are working using this simple repository interface:\r\n\r\n```java\r\npublic interface StudentRepository extends JpaRepository&lt;Student, Long&gt; {}\r\n```\r\n\r\nand the following test works:\r\n\r\n```java\r\n@Test\r\nvoid studentMattStudiesMathAndHistory() {\r\n    Student student = new Student(&quot;Matt&quot;);\r\n    student.getSubjects().add(new Subject(&quot;Math&quot;));\r\n    student.getSubjects().add(new Subject(&quot;History&quot;));\r\n    studentRepository.saveAndFlush(student);\r\n}\r\n```\r\n\r\nSo it looks like there&#39;s no trouble in entity design. However, IntelliJ seems to have different thought about this.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nIntelliJ tells me that it `can&#39;t find inverse attribute`, in this case it&#39;s `subjects` field and is obviously existent right inside the `Student`. Well I figured out how to fix this red underline. Just remove `final` keyword like this:\r\n\r\n```java\r\nprivate Set&lt;Subject&gt; subjects = new LinkedHashSet&lt;&gt;();\r\n```\r\n\r\nand the red underline is gone. Of course there&#39;s still no setter for it, so IntelliJ tells me to put the `final` keyword back for the code suggestion.\r\n\r\n[![enter image description here][2]][2]\r\n\r\nSo the question is, why IntelliJ is not able to find the inverse attribute `subjects`? Is it a bug, or am I missing something?\r\n\r\n### Version spec.\r\n\r\n* Spring Boot: `2.7.2`\r\n* IntelliJ: `2022.2`\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/lnfku.png\r\n  [2]: https://i.stack.imgur.com/GR66j.png","title":"IntelliJ can&#39;t find inverse attribute in many-to-many relationship when the inverse attribute has final keywords","body":"<p>Let's suppose we have two entities in many-to-many bi-directional relationships, <code>Student</code> and <code>Subject</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Getter\n@Entity\npublic class Student {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Setter\n    private String name;\n\n    @JoinTable(\n            name = &quot;student_subject&quot;,\n            joinColumns = @JoinColumn(name = &quot;student_id&quot;),\n            inverseJoinColumns = @JoinColumn(name = &quot;subject_id&quot;)\n    )\n    @ManyToMany(cascade = CascadeType.ALL)\n    private final Set&lt;Subject&gt; subjects = new LinkedHashSet&lt;&gt;();\n\n// constructors and etc.\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Getter\n@Entity\npublic class Subject {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Setter\n    private String name;\n\n    @ManyToMany(mappedBy = &quot;subjects&quot;)\n    private final Set&lt;Student&gt; students = new LinkedHashSet&lt;&gt;();\n\n// constructors and etc.\n}\n</code></pre>\n<p>Each collection field is set to <code>final</code> and has no setter. This is intentional design to prevent it from being accidentally re-initialized to other collection instance after the persistence context takes care of it.</p>\n<p>You can test if the entities above are working using this simple repository interface:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface StudentRepository extends JpaRepository&lt;Student, Long&gt; {}\n</code></pre>\n<p>and the following test works:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\nvoid studentMattStudiesMathAndHistory() {\n    Student student = new Student(&quot;Matt&quot;);\n    student.getSubjects().add(new Subject(&quot;Math&quot;));\n    student.getSubjects().add(new Subject(&quot;History&quot;));\n    studentRepository.saveAndFlush(student);\n}\n</code></pre>\n<p>So it looks like there's no trouble in entity design. However, IntelliJ seems to have different thought about this.</p>\n<p><a href=\"https://i.stack.imgur.com/lnfku.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lnfku.png\" alt=\"enter image description here\" /></a></p>\n<p>IntelliJ tells me that it <code>can't find inverse attribute</code>, in this case it's <code>subjects</code> field and is obviously existent right inside the <code>Student</code>. Well I figured out how to fix this red underline. Just remove <code>final</code> keyword like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private Set&lt;Subject&gt; subjects = new LinkedHashSet&lt;&gt;();\n</code></pre>\n<p>and the red underline is gone. Of course there's still no setter for it, so IntelliJ tells me to put the <code>final</code> keyword back for the code suggestion.</p>\n<p><a href=\"https://i.stack.imgur.com/GR66j.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GR66j.png\" alt=\"enter image description here\" /></a></p>\n<p>So the question is, why IntelliJ is not able to find the inverse attribute <code>subjects</code>? Is it a bug, or am I missing something?</p>\n<h3>Version spec.</h3>\n<ul>\n<li>Spring Boot: <code>2.7.2</code></li>\n<li>IntelliJ: <code>2022.2</code></li>\n</ul>\n"},{"tags":["java","spring-boot","hibernate","nativequery"],"comments":[{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":1,"creation_date":1661060585,"post_id":73431822,"comment_id":129678592,"body_markdown":"JDBC type 2002 is STRUCT (java.sql.Types#STRUCT), I believe there is mistake in your native query: `select t from transactions t` - shouldn&#39;t it be `select t.* from transactions t`?","body":"JDBC type 2002 is STRUCT (java.sql.Types#STRUCT), I believe there is mistake in your native query: <code>select t from transactions t</code> - shouldn&#39;t it be <code>select t.* from transactions t</code>?"}],"owner":{"account_id":9543839,"reputation":1,"user_id":17801155,"display_name":"Fabian Yate"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":899,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1661058919,"creation_date":1661058919,"question_id":73431822,"body_markdown":"I&#39;m getting org.hibernate.MappingException: No Dialect mapping for JDBC type: 2002 when I try to execute this query in a jpa repository;\r\n\r\n    @Query(value = &quot;select t from transactions t inner join accounts a on t.account_id_account_id = a.account_id \\n&quot; +\r\n                &quot; where a.account_id = :accountId&quot;, nativeQuery = true)\r\n        List&lt;Transaction&gt; getAccountTransactions(@Param(&quot;accountId&quot;) Integer accountId);\r\n\r\nDoes anyone have any idea what am I doing wrong?","title":"No Dialect mapping for JDBC type: 2002","body":"<p>I'm getting org.hibernate.MappingException: No Dialect mapping for JDBC type: 2002 when I try to execute this query in a jpa repository;</p>\n<pre><code>@Query(value = &quot;select t from transactions t inner join accounts a on t.account_id_account_id = a.account_id \\n&quot; +\n            &quot; where a.account_id = :accountId&quot;, nativeQuery = true)\n    List&lt;Transaction&gt; getAccountTransactions(@Param(&quot;accountId&quot;) Integer accountId);\n</code></pre>\n<p>Does anyone have any idea what am I doing wrong?</p>\n"},{"tags":["java","spring","spring-boot","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":25690087,"reputation":1360,"user_id":19451633,"display_name":"Andrei Titov"},"score":1,"creation_date":1661170070,"post_id":73431427,"comment_id":129700360,"body_markdown":"it&#39;s not working because entityManager expects that the execution result can be mapped to a passed class, i.e. ProductInfo.class. in the first case you fetch the whole object, so it works, but in the other cases you&#39;re trying to fetch one field, that can&#39;t be mapped to an object of the provided class","body":"it&#39;s not working because entityManager expects that the execution result can be mapped to a passed class, i.e. ProductInfo.class. in the first case you fetch the whole object, so it works, but in the other cases you&#39;re trying to fetch one field, that can&#39;t be mapped to an object of the provided class"}],"answers":[{"tags":[],"owner":{"account_id":16048418,"reputation":250,"user_id":11582987,"display_name":"Abhinav manthri"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661056770,"creation_date":1661053594,"answer_id":73431494,"question_id":73431427,"body_markdown":"Since your query is specific to a column, it will return a list of Object, which contains all your column results\r\n\r\n```\r\nList&lt;Object&gt; productInfo = em.createQuery( &quot;select m.model from ProductInfo AS m&quot;, Object.class).getResultList();     \r\n```\r\n\r\nor to retrieve results as list of `ProductInfo`\r\n\r\n```\r\nTypedQuery&lt;ProductInfo&gt; typedQuery = em.createQuery(&quot;SELECT NEW &lt;package-name&gt;.ProductInfo(m.model) from ProductInfo AS m&quot;, ProductInfo.class);    \r\nList&lt;ProductInfo&gt; results = typedQuery.getResultList();\r\n```","title":"jpa createQuery select column","body":"<p>Since your query is specific to a column, it will return a list of Object, which contains all your column results</p>\n<pre><code>List&lt;Object&gt; productInfo = em.createQuery( &quot;select m.model from ProductInfo AS m&quot;, Object.class).getResultList();     \n</code></pre>\n<p>or to retrieve results as list of <code>ProductInfo</code></p>\n<pre><code>TypedQuery&lt;ProductInfo&gt; typedQuery = em.createQuery(&quot;SELECT NEW &lt;package-name&gt;.ProductInfo(m.model) from ProductInfo AS m&quot;, ProductInfo.class);    \nList&lt;ProductInfo&gt; results = typedQuery.getResultList();\n</code></pre>\n"}],"owner":{"account_id":25888394,"reputation":37,"user_id":19616150,"display_name":"JayCold"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":433,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1661056770,"creation_date":1661052376,"question_id":73431427,"body_markdown":"I want to make query for specific column\r\n\r\nI tried this. and this one worked.\r\n```\r\nList&lt;ProductInfo&gt; productInfo = em.createQuery( &quot;select m from ProductInfo AS m&quot;, ProductInfo.class).getResultList();\t\t\t\r\n```\r\n\r\nBut below were not working. \r\n\r\n```\r\nList&lt;ProductInfo&gt; productInfo = em.createQuery( &quot;select m.model from ProductInfo AS m&quot;, ProductInfo.class).getResultList();\t\t\r\n\r\n//or\r\nList&lt;ProductInfo&gt; productInfo = em.createQuery( &quot;select model from ProductInfo AS m&quot;, ProductInfo.class).getResultList();\t\t\r\n```\r\n\r\n  \r\n","title":"jpa createQuery select column","body":"<p>I want to make query for specific column</p>\n<p>I tried this. and this one worked.</p>\n<pre><code>List&lt;ProductInfo&gt; productInfo = em.createQuery( &quot;select m from ProductInfo AS m&quot;, ProductInfo.class).getResultList();           \n</code></pre>\n<p>But below were not working.</p>\n<pre><code>List&lt;ProductInfo&gt; productInfo = em.createQuery( &quot;select m.model from ProductInfo AS m&quot;, ProductInfo.class).getResultList();     \n\n//or\nList&lt;ProductInfo&gt; productInfo = em.createQuery( &quot;select model from ProductInfo AS m&quot;, ProductInfo.class).getResultList();       \n</code></pre>\n"},{"tags":["java","stackexchange-api"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":2,"creation_date":1605188210,"post_id":64804130,"comment_id":114578185,"body_markdown":"The URL you are fetching is the documentation URL for one of the methods the API.  Naturally it returns the documentation.  You probably ought to read it rather than fetching it in a Java program.","body":"The URL you are fetching is the documentation URL for one of the methods the API.  Naturally it returns the documentation.  You probably ought to read it rather than fetching it in a Java program."},{"owner":{"account_id":13741321,"reputation":119,"user_id":9916335,"display_name":"Saikat Mondal"},"score":0,"creation_date":1605190514,"post_id":64804130,"comment_id":114579359,"body_markdown":"@StephenC got it. But when I am passing this: https://api.stackexchange.com/2.2/questions/805107?order=desc&amp;sort=activity&amp;site=stackoverflow, I am getting garbage text in response to the query.","body":"@StephenC got it. But when I am passing this: <a href=\"https://api.stackexchange.com/2.2/questions/805107?order=desc&amp;sort=activity&amp;site=stackoverflow\">api.stackexchange.com/2.2/questions/&hellip;</a>, I am getting garbage text in response to the query."},{"owner":{"account_id":14294775,"reputation":344,"user_id":10325765,"display_name":"Andreas"},"score":0,"creation_date":1605194077,"post_id":64804130,"comment_id":114581204,"body_markdown":"As stated in my answer, that is the correct response to the query. Your result is returned in json format. I&#39;d try parsing the json result instead of reading it line by line.","body":"As stated in my answer, that is the correct response to the query. Your result is returned in json format. I&#39;d try parsing the json result instead of reading it line by line."},{"owner":{"account_id":14688437,"reputation":5100,"user_id":10607772,"display_name":"double-beep"},"score":2,"creation_date":1605360749,"post_id":64804130,"comment_id":114629202,"body_markdown":"The API response is gzipped. See https://stackoverflow.com/a/23560986.","body":"The API response is gzipped. See <a href=\"https://stackoverflow.com/a/23560986\">stackoverflow.com/a/23560986</a>."}],"answers":[{"tags":[],"owner":{"account_id":14294775,"reputation":344,"user_id":10325765,"display_name":"Andreas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1605189934,"creation_date":1605189934,"answer_id":64805436,"question_id":64804130,"body_markdown":"As Stephen C said, you need to use the query URL, not the URL of the documentation. You can find the query URL in the &quot;Try it&quot; part of the documentation page. Try using \r\n\r\n    url = new URL (&quot;https://api.stackexchange.com/2.2/questions/805107?order=desc&amp;sort=activity&amp;site=stackoverflow&quot;)\r\n\r\nIt will return the result you are looking for as JSON like it is displayed on the documentation page.","title":"Is there any way to get the SEDE query result from my Java program using Stack Exchange API?","body":"<p>As Stephen C said, you need to use the query URL, not the URL of the documentation. You can find the query URL in the &quot;Try it&quot; part of the documentation page. Try using</p>\n<pre><code>url = new URL (&quot;https://api.stackexchange.com/2.2/questions/805107?order=desc&amp;sort=activity&amp;site=stackoverflow&quot;)\n</code></pre>\n<p>It will return the result you are looking for as JSON like it is displayed on the documentation page.</p>\n"}],"owner":{"account_id":13741321,"reputation":119,"user_id":9916335,"display_name":"Saikat Mondal"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":237,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1661054821,"creation_date":1605184900,"question_id":64804130,"body_markdown":"I want to get a query result from Stack Exchange API using my Java program. For example, I want to pass [this URL](https://api.stackexchange.com/docs/questions-by-ids#order=desc&amp;sort=activity&amp;ids=805107&amp;filter=default&amp;site=stackoverflow&amp;run=true) and get the data of the question with id 805107. I have tried but only got the resulted web page content. I did not get the query result, i.e. the question data, although the resulted page shows the question data.\r\n\r\n    url = new URL (&quot;https://api.stackexchange.com/docs/questions-by-ids#order=desc&amp;sort=activity&amp;ids=805107&amp;filter=default&amp;site=stackoverflow&amp;run=true&quot;);\r\n\tbyte[] encodedBytes = Base64.encodeBase64(&quot;root:pass&quot;.getBytes());\r\n    String encoding = new String (encodedBytes);\r\n    HttpURLConnection connection = (HttpURLConnection) url.openConnection();\r\n    connection.setRequestMethod(&quot;GET&quot;);\r\n    connection.setDoInput (true);\r\n    connection.setRequestProperty  (&quot;Authorization&quot;, &quot;Basic &quot; + encoding);\r\n    connection.connect();\r\n    InputStream content = (InputStream)connection.getInputStream();\r\n    BufferedReader in   = new BufferedReader (new InputStreamReader (content));\r\n    String line;\r\n\r\n    while ((line = in.readLine()) != null) {\r\n       System.out.println(line);\r\n    }","title":"Is there any way to get the SEDE query result from my Java program using Stack Exchange API?","body":"<p>I want to get a query result from Stack Exchange API using my Java program. For example, I want to pass <a href=\"https://api.stackexchange.com/docs/questions-by-ids#order=desc&amp;sort=activity&amp;ids=805107&amp;filter=default&amp;site=stackoverflow&amp;run=true\">this URL</a> and get the data of the question with id 805107. I have tried but only got the resulted web page content. I did not get the query result, i.e. the question data, although the resulted page shows the question data.</p>\n<pre><code>url = new URL (&quot;https://api.stackexchange.com/docs/questions-by-ids#order=desc&amp;sort=activity&amp;ids=805107&amp;filter=default&amp;site=stackoverflow&amp;run=true&quot;);\nbyte[] encodedBytes = Base64.encodeBase64(&quot;root:pass&quot;.getBytes());\nString encoding = new String (encodedBytes);\nHttpURLConnection connection = (HttpURLConnection) url.openConnection();\nconnection.setRequestMethod(&quot;GET&quot;);\nconnection.setDoInput (true);\nconnection.setRequestProperty  (&quot;Authorization&quot;, &quot;Basic &quot; + encoding);\nconnection.connect();\nInputStream content = (InputStream)connection.getInputStream();\nBufferedReader in   = new BufferedReader (new InputStreamReader (content));\nString line;\n\nwhile ((line = in.readLine()) != null) {\n   System.out.println(line);\n}\n</code></pre>\n"},{"tags":["java","android","android-studio"],"comments":[{"owner":{"account_id":11972742,"reputation":1949,"user_id":8760805,"display_name":"ocos"},"score":0,"creation_date":1661043388,"post_id":73430844,"comment_id":129677017,"body_markdown":"You can safely ignore &quot;disable your anti-virus&quot; warning. It is just a friendly warning to speed up a few seconds your build time. Difficult to find a virus which may infect build process intermediates files and can stop working your app.","body":"You can safely ignore &quot;disable your anti-virus&quot; warning. It is just a friendly warning to speed up a few seconds your build time. Difficult to find a virus which may infect build process intermediates files and can stop working your app."}],"answers":[{"tags":[],"owner":{"account_id":18463410,"reputation":18363,"user_id":13598222,"display_name":"cactustictacs"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1661054262,"creation_date":1661054262,"answer_id":73431530,"question_id":73430844,"body_markdown":"Here&#39;s the official documentation about it: [Optimize Android Studio performance on Windows][1]\r\n\r\nThe short version is no, you don&#39;t have to exclude anything if you don&#39;t want. The issue is that real-time scanning can slow down your builds, because it involves generating a lot of files that the antivirus wants to check over. So the build process keeps stopping while that happens. Depending on your machine, the sources that need to be built, the build config and its cached state, this could create a lot of slowdown.\r\n\r\nThey&#39;re &quot;recommending&quot; disabling antivirus because the implication is those files are safe, but the AV has no way of knowing that. It&#39;s up to you whether you trust that &quot;recommendation&quot; - air-quotes because they never actually say you *should* do it, just that you *can*, including the &quot;heyyyyyy just sayin&#39; if you excluded a few folders...&quot; popups.\r\n\r\nWhat you could do, is try excluding those folders and comparing builds - you&#39;d have to invalidate your caches each time to get a fair comparison (rebuilding can be quick when some stuff doesn&#39;t need to be redone) and see if it makes a difference to you, and if you think it&#39;s worth it. Maybe try it with a release build (since those are a lot slower). Work out how much time it saves, how often you build during a day, and if it&#39;s a significant total. That kind of thing!\r\n\r\n\r\n  [1]: https://developer.android.com/studio/intro/studio-config#antivirus-impact","title":"Is it okay to ignore antivirus warning in Android Studio?","body":"<p>Here's the official documentation about it: <a href=\"https://developer.android.com/studio/intro/studio-config#antivirus-impact\" rel=\"nofollow noreferrer\">Optimize Android Studio performance on Windows</a></p>\n<p>The short version is no, you don't have to exclude anything if you don't want. The issue is that real-time scanning can slow down your builds, because it involves generating a lot of files that the antivirus wants to check over. So the build process keeps stopping while that happens. Depending on your machine, the sources that need to be built, the build config and its cached state, this could create a lot of slowdown.</p>\n<p>They're &quot;recommending&quot; disabling antivirus because the implication is those files are safe, but the AV has no way of knowing that. It's up to you whether you trust that &quot;recommendation&quot; - air-quotes because they never actually say you <em>should</em> do it, just that you <em>can</em>, including the &quot;heyyyyyy just sayin' if you excluded a few folders...&quot; popups.</p>\n<p>What you could do, is try excluding those folders and comparing builds - you'd have to invalidate your caches each time to get a fair comparison (rebuilding can be quick when some stuff doesn't need to be redone) and see if it makes a difference to you, and if you think it's worth it. Maybe try it with a release build (since those are a lot slower). Work out how much time it saves, how often you build during a day, and if it's a significant total. That kind of thing!</p>\n"}],"owner":{"account_id":25929375,"reputation":69,"user_id":19650731,"display_name":"Eldestornillador"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":266,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1661054262,"creation_date":1661039888,"question_id":73430844,"body_markdown":"Sometimes Android stusio warns me with the following warning: &quot;Your anti-virus program might be impacting your build performance. Android Studio checked the following directories&quot;:\r\n\r\n```\r\n C:\\Users\\user.name\\.AndroidStudio\\system\r\n C:\\Users\\user.name\\Documents\\app\r\n C:\\Users\\user.name\\AppData\\Local\\Android\\Sdk\r\n C:\\Users\\user.name\\AppData\\Local\\Google\\AndroidStudio\r\n C:\\Users\\user.name\\.gradle\r\n```\r\nI would like to know if it is okay to ignore this warning as I would want to not exclude any directories for my antivirus. Could I have any issue if I have sometimes this warning in my app builds and I don&#180;t exclude thos directories so I will still be warned? Could my app stop working fine or something like that or it doesn&#180;t matter to have that warning? I would like to know if it is recommended to solve this warning for my app health...\r\n\r\n","title":"Is it okay to ignore antivirus warning in Android Studio?","body":"<p>Sometimes Android stusio warns me with the following warning: &quot;Your anti-virus program might be impacting your build performance. Android Studio checked the following directories&quot;:</p>\n<pre><code> C:\\Users\\user.name\\.AndroidStudio\\system\n C:\\Users\\user.name\\Documents\\app\n C:\\Users\\user.name\\AppData\\Local\\Android\\Sdk\n C:\\Users\\user.name\\AppData\\Local\\Google\\AndroidStudio\n C:\\Users\\user.name\\.gradle\n</code></pre>\n<p>I would like to know if it is okay to ignore this warning as I would want to not exclude any directories for my antivirus. Could I have any issue if I have sometimes this warning in my app builds and I don´t exclude thos directories so I will still be warned? Could my app stop working fine or something like that or it doesn´t matter to have that warning? I would like to know if it is recommended to solve this warning for my app health...</p>\n"},{"tags":["java","spring","asynchronous","spring-security","spring-webflux"],"comments":[{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1660861665,"post_id":73409071,"comment_id":129640302,"body_markdown":"you do know that spring security already has full support for jwts? read the docs","body":"you do know that spring security already has full support for jwts? read the docs"},{"owner":{"account_id":6898784,"reputation":518,"user_id":5299082,"accept_rate":0,"display_name":"Krusty the Clown"},"score":0,"creation_date":1660874973,"post_id":73409071,"comment_id":129642390,"body_markdown":"@Toerktumlare well isn&#39;t that lovely, now do you have an actual answer as to why this isn&#39;t working?","body":"@Toerktumlare well isn&#39;t that lovely, now do you have an actual answer as to why this isn&#39;t working?"},{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1660889704,"post_id":73409071,"comment_id":129644505,"body_markdown":"After reading the above comment, not anymore, good luck with your problem.","body":"After reading the above comment, not anymore, good luck with your problem."},{"owner":{"account_id":14583346,"reputation":863,"user_id":10533012,"display_name":"Elyorbek Ibrokhimov"},"score":0,"creation_date":1660905289,"post_id":73409071,"comment_id":129649304,"body_markdown":"Possible duplicate of https://stackoverflow.com/questions/55498838/manually-set-authentication-with-reactivesecuritycontextholder","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/55498838/manually-set-authentication-with-reactivesecuritycontextholder\" title=\"manually set authentication with reactivesecuritycontextholder\">stackoverflow.com/questions/55498838/&hellip;</a>"},{"owner":{"account_id":6898784,"reputation":518,"user_id":5299082,"accept_rate":0,"display_name":"Krusty the Clown"},"score":0,"creation_date":1661053356,"post_id":73409071,"comment_id":129677909,"body_markdown":"@Toerktumlare won&#39;t need it my guy","body":"@Toerktumlare won&#39;t need it my guy"}],"answers":[{"tags":[],"owner":{"account_id":6898784,"reputation":518,"user_id":5299082,"accept_rate":0,"display_name":"Krusty the Clown"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1661053309,"creation_date":1661053309,"answer_id":73431478,"question_id":73409071,"body_markdown":"Fixed it by changing\r\n\r\n    return ReactiveSecurityContextHolder.getContext().flatMap((context) -&gt; {\r\n            context.setAuthentication(\r\n                    new UsernamePasswordAuthenticationToken(\r\n                            user, null, authorities));\r\n            \r\n            return chain.filter(exchange);\r\n    });\r\n\r\nto\r\n\r\n    Context context = ReactiveSecurityContextHolder.withAuthentication(new UsernamePasswordAuthenticationToken(\r\n\t\t\t\t\tuser, null, authorities));\r\n\t\t\t\r\n    return chain.filter(exchange).contextWrite(context);\r\n\r\nFrom what I&#39;m seeing the former didn&#39;t work because it doesn&#39;t have an Authentication object associated.","title":"Trouble getting SecurityContext from ReactiveSecurityContextHolder in a WebFilter","body":"<p>Fixed it by changing</p>\n<pre><code>return ReactiveSecurityContextHolder.getContext().flatMap((context) -&gt; {\n        context.setAuthentication(\n                new UsernamePasswordAuthenticationToken(\n                        user, null, authorities));\n        \n        return chain.filter(exchange);\n});\n</code></pre>\n<p>to</p>\n<pre><code>Context context = ReactiveSecurityContextHolder.withAuthentication(new UsernamePasswordAuthenticationToken(\n                user, null, authorities));\n        \nreturn chain.filter(exchange).contextWrite(context);\n</code></pre>\n<p>From what I'm seeing the former didn't work because it doesn't have an Authentication object associated.</p>\n"}],"owner":{"account_id":6898784,"reputation":518,"user_id":5299082,"accept_rate":0,"display_name":"Krusty the Clown"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":542,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1661053309,"creation_date":1660854593,"question_id":73409071,"body_markdown":"In my Webflux application, I&#39;m trying to use JWT tokens for stateless sessions with Spring Security. I have two WebFilters, one that generates the token, and one that validates it. My token generation filter works fine, but my validation filter is acting up. Its filter method looks as follows:\r\n\r\n    @Override\r\n\tprotected Mono&lt;Void&gt; filter(ServerWebExchange exchange, WebFilterChain chain) {\r\n\t\tfinal String jwt = exchange.getRequest().getHeaders().getFirst(authHeader);\r\n\t\t\r\n\t\ttry {\r\n\t\t\tSecretKey key = Keys.hmacShaKeyFor(signingKey);\r\n\t\t\t\r\n\t\t\tClaims claims = Jwts.parserBuilder().setSigningKey(key)\r\n\t\t\t\t\t.build().parseClaimsJws(jwt).getBody();\r\n\t\t\t\r\n\t\t\tvar authorities = Toolkit.getAuthorities(String.valueOf(claims.get(&quot;authorities&quot;)));\r\n\t\t\tString user = String.valueOf(claims.get(&quot;username&quot;));\r\n\t\t\t\r\n\t\t\treturn ReactiveSecurityContextHolder.getContext().flatMap((context) -&gt; {\r\n\t\t\t\tcontext.setAuthentication(\r\n\t\t\t\t\t\tnew UsernamePasswordAuthenticationToken(\r\n\t\t\t\t\t\t\t\tuser, null, authorities));\r\n\t\t\t\t\r\n\t\t\t\treturn chain.filter(exchange);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t} catch (Exception e) {\r\n\t\t\texchange.getResponse().setStatusCode(HttpStatus.FORBIDDEN);\r\n\t\t\t\r\n\t\t\te.printStackTrace();\r\n\t\t\treturn exchange.getResponse().setComplete();\r\n\t\t}\r\n\t}\r\n\r\nEverything inside of ReactiveSecurityContextHolder.getContext().flatMap() never gets called, which as a result breaks the filter chain since chain.filter() is called inside flatMap(). Does anyone know what could be causing this? ","title":"Trouble getting SecurityContext from ReactiveSecurityContextHolder in a WebFilter","body":"<p>In my Webflux application, I'm trying to use JWT tokens for stateless sessions with Spring Security. I have two WebFilters, one that generates the token, and one that validates it. My token generation filter works fine, but my validation filter is acting up. Its filter method looks as follows:</p>\n<pre><code>@Override\nprotected Mono&lt;Void&gt; filter(ServerWebExchange exchange, WebFilterChain chain) {\n    final String jwt = exchange.getRequest().getHeaders().getFirst(authHeader);\n    \n    try {\n        SecretKey key = Keys.hmacShaKeyFor(signingKey);\n        \n        Claims claims = Jwts.parserBuilder().setSigningKey(key)\n                .build().parseClaimsJws(jwt).getBody();\n        \n        var authorities = Toolkit.getAuthorities(String.valueOf(claims.get(&quot;authorities&quot;)));\n        String user = String.valueOf(claims.get(&quot;username&quot;));\n        \n        return ReactiveSecurityContextHolder.getContext().flatMap((context) -&gt; {\n            context.setAuthentication(\n                    new UsernamePasswordAuthenticationToken(\n                            user, null, authorities));\n            \n            return chain.filter(exchange);\n        });\n        \n    } catch (Exception e) {\n        exchange.getResponse().setStatusCode(HttpStatus.FORBIDDEN);\n        \n        e.printStackTrace();\n        return exchange.getResponse().setComplete();\n    }\n}\n</code></pre>\n<p>Everything inside of ReactiveSecurityContextHolder.getContext().flatMap() never gets called, which as a result breaks the filter chain since chain.filter() is called inside flatMap(). Does anyone know what could be causing this?</p>\n"},{"tags":["java","android","android-recyclerview"],"answers":[{"tags":[],"owner":{"account_id":18463410,"reputation":18363,"user_id":13598222,"display_name":"cactustictacs"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1661053306,"creation_date":1661053306,"answer_id":73431477,"question_id":73429211,"body_markdown":"Your problem&#39;s here:\r\n\r\n````\r\nif(messagesList.get(position).getUserName().equals(userNameString)){\r\n    holder.messageMyMessage.setText(messagesList.get(position).getMessage());\r\n    holder.messageMyMessage.setVisibility(View.VISIBLE);\r\n} else {\r\n    holder.messageYourMessage.setText(messagesList.get(position).getMessage());\r\n    holder.messageYourMessage.setVisibility(View.VISIBLE);\r\n}\r\n````\r\n\r\nYou&#39;re only making stuff *visible*, you&#39;re never *hiding* the other thing.\r\n\r\nSo if a specific `ViewHolder` is used to display one kind of message, it&#39;ll be made visible in `onBindViewHolder`. The view in that ViewHolder&#39;s layout will be set to `VISIBLE`.\r\n\r\nThen, if you scroll down the list and *the same ViewHolder is reused* to display the **other** kind of message, the *other* message view in the layout will be set to `VISIBLE`. **The other message view hasn&#39;t changed, it&#39;s still in the same state, VISIBLE**. So you see them both (depending on how the layout works, one might be covering the other).\r\n\r\nWhen you&#39;re using a `RecyclerView`, because the `ViewHolder`s are **reused** (*recycled*) you need to set them up correctly for each item, clearing all the previous state. So in your case, for **each** message display, you have to either make it visible **or** hide it. You can&#39;t do nothing, because that can leave you with old state from the previous item it was displaying, right?\r\n\r\nSo you need to do this:\r\n\r\n````\r\nif(messagesList.get(position).getUserName().equals(userNameString)){\r\n    holder.messageMyMessage.setText(messagesList.get(position).getMessage());\r\n    holder.messageMyMessage.setVisibility(View.VISIBLE);\r\n    // now you need to make sure the other is -not- visible!\r\n    holder.messageYourMessage.setVisibility(View.GONE);\r\n} else {\r\n    holder.messageYourMessage.setText(messagesList.get(position).getMessage());\r\n    holder.messageYourMessage.setVisibility(View.VISIBLE);\r\n    // same thing - explicitly hide the other one, assume it could be visible\r\n    holder.messageMyMessage.setVisibility(View.GONE);\r\n}\r\n````\r\n\r\nThis is the number one thing you need to do with a `RecyclerView` - in `onBindViewHolder`, *always* set up *everything* that can change depending on the item. Assume it has old data or the wrong thing set, and explicitly initialise everything. It&#39;s like a whiteboard - when you start using it you need to clean it, because maybe there&#39;s some old stuff on there","title":"Incorrect displaying items in RecyclerView while scrolling","body":"<p>Your problem's here:</p>\n<pre><code>if(messagesList.get(position).getUserName().equals(userNameString)){\n    holder.messageMyMessage.setText(messagesList.get(position).getMessage());\n    holder.messageMyMessage.setVisibility(View.VISIBLE);\n} else {\n    holder.messageYourMessage.setText(messagesList.get(position).getMessage());\n    holder.messageYourMessage.setVisibility(View.VISIBLE);\n}\n</code></pre>\n<p>You're only making stuff <em>visible</em>, you're never <em>hiding</em> the other thing.</p>\n<p>So if a specific <code>ViewHolder</code> is used to display one kind of message, it'll be made visible in <code>onBindViewHolder</code>. The view in that ViewHolder's layout will be set to <code>VISIBLE</code>.</p>\n<p>Then, if you scroll down the list and <em>the same ViewHolder is reused</em> to display the <strong>other</strong> kind of message, the <em>other</em> message view in the layout will be set to <code>VISIBLE</code>. <strong>The other message view hasn't changed, it's still in the same state, VISIBLE</strong>. So you see them both (depending on how the layout works, one might be covering the other).</p>\n<p>When you're using a <code>RecyclerView</code>, because the <code>ViewHolder</code>s are <strong>reused</strong> (<em>recycled</em>) you need to set them up correctly for each item, clearing all the previous state. So in your case, for <strong>each</strong> message display, you have to either make it visible <strong>or</strong> hide it. You can't do nothing, because that can leave you with old state from the previous item it was displaying, right?</p>\n<p>So you need to do this:</p>\n<pre><code>if(messagesList.get(position).getUserName().equals(userNameString)){\n    holder.messageMyMessage.setText(messagesList.get(position).getMessage());\n    holder.messageMyMessage.setVisibility(View.VISIBLE);\n    // now you need to make sure the other is -not- visible!\n    holder.messageYourMessage.setVisibility(View.GONE);\n} else {\n    holder.messageYourMessage.setText(messagesList.get(position).getMessage());\n    holder.messageYourMessage.setVisibility(View.VISIBLE);\n    // same thing - explicitly hide the other one, assume it could be visible\n    holder.messageMyMessage.setVisibility(View.GONE);\n}\n</code></pre>\n<p>This is the number one thing you need to do with a <code>RecyclerView</code> - in <code>onBindViewHolder</code>, <em>always</em> set up <em>everything</em> that can change depending on the item. Assume it has old data or the wrong thing set, and explicitly initialise everything. It's like a whiteboard - when you start using it you need to clean it, because maybe there's some old stuff on there</p>\n"}],"owner":{"account_id":10279405,"reputation":3,"user_id":10619254,"display_name":"Алексей"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73431477,"answer_count":1,"score":0,"last_activity_date":1661053306,"creation_date":1661020567,"question_id":73429211,"body_markdown":"Could you please assist in following issue:\r\n\r\nI have incorrect displaying items in my messenger app.\r\n\r\nMy layout for items:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;com.google.android.material.card.MaterialCardView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;wrap_content&quot;\r\n    android:layout_marginHorizontal=&quot;10dp&quot;\r\n    android:layout_marginTop=&quot;10dp&quot;\r\n    app:cardElevation=&quot;0dp&quot;&gt;\r\n\r\n        &lt;TextView\r\n            android:id=&quot;@+id/message_my_message&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_gravity=&quot;end&quot;\r\n            android:gravity=&quot;end&quot;\r\n            android:textColor=&quot;@color/black&quot;\r\n            android:textSize=&quot;14sp&quot;\r\n            android:visibility=&quot;invisible&quot;\r\n            /&gt;\r\n\r\n        &lt;TextView\r\n            android:id=&quot;@+id/message_your_message&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_gravity=&quot;start&quot;\r\n            android:gravity=&quot;start&quot;\r\n            android:textColor=&quot;@color/black&quot;\r\n            android:textSize=&quot;14sp&quot;\r\n            android:visibility=&quot;invisible&quot;\r\n            /&gt;\r\n\r\n&lt;/com.google.android.material.card.MaterialCardView&gt;\r\n```\r\n\r\nMy layout for dialog activity:\r\n```\r\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;.DialogActivity&quot;&gt;\r\n\r\n    &lt;com.google.android.material.appbar.AppBarLayout\r\n        android:id=&quot;@+id/dialog_appbar&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:theme=&quot;@style/Theme.AnonymousAd.AppBarOverlay&quot;&gt;\r\n\r\n        &lt;include\r\n            android:id=&quot;@+id/dialog_app_bar&quot;\r\n            layout=&quot;@layout/app_bar_layout&quot;\r\n            &gt;\r\n\r\n        &lt;/include&gt;\r\n\r\n    &lt;/com.google.android.material.appbar.AppBarLayout&gt;\r\n\r\n\r\n\r\n        &lt;com.google.android.material.floatingactionbutton.FloatingActionButton\r\n            android:id=&quot;@+id/dialog_send&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_alignParentEnd=&quot;true&quot;\r\n            android:layout_alignParentBottom=&quot;true&quot;\r\n            android:clickable=&quot;true&quot;\r\n            android:contentDescription=&quot;TODO&quot;\r\n            android:focusable=&quot;true&quot;\r\n            android:src=&quot;@drawable/ic_send&quot;\r\n            android:visibility=&quot;invisible&quot;\r\n            app:fabSize=&quot;mini&quot;\r\n            tools:ignore=&quot;SpeakableTextPresentCheck&quot; /&gt;\r\n\r\n        &lt;com.google.android.material.floatingactionbutton.FloatingActionButton\r\n            android:id=&quot;@+id/dialog_attach&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_alignParentEnd=&quot;true&quot;\r\n            android:layout_alignParentBottom=&quot;true&quot;\r\n            android:clickable=&quot;true&quot;\r\n            android:contentDescription=&quot;TODO&quot;\r\n            android:focusable=&quot;true&quot;\r\n            android:src=&quot;@drawable/ic_attach&quot;\r\n            app:fabSize=&quot;mini&quot;\r\n            tools:ignore=&quot;SpeakableTextPresentCheck&quot; /&gt;\r\n\r\n        &lt;com.google.android.material.floatingactionbutton.FloatingActionButton\r\n            android:id=&quot;@+id/dialog_gift&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_alignParentStart=&quot;true&quot;\r\n            android:layout_alignParentBottom=&quot;true&quot;\r\n            android:clickable=&quot;true&quot;\r\n            android:contentDescription=&quot;TODO&quot;\r\n            android:focusable=&quot;true&quot;\r\n            android:src=&quot;@drawable/ic_gift&quot;\r\n            app:fabSize=&quot;mini&quot;\r\n            tools:ignore=&quot;SpeakableTextPresentCheck&quot; /&gt;\r\n\r\n        &lt;EditText\r\n            android:id=&quot;@+id/dialog_message&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_alignParentBottom=&quot;true&quot;\r\n            android:layout_toLeftOf=&quot;@+id/dialog_send&quot;\r\n            android:layout_toRightOf=&quot;@+id/dialog_gift&quot;\r\n            android:autofillHints=&quot;&quot;\r\n            android:backgroundTint=&quot;@color/teal_700&quot;\r\n            android:hint=&quot;@string/dialog_enter_message&quot;\r\n            android:inputType=&quot;textCapSentences|textMultiLine&quot;\r\n            android:maxHeight=&quot;120dp&quot;\r\n            android:maxLength=&quot;500&quot;\r\n            android:minHeight=&quot;48dp&quot;\r\n            android:textColorHint=&quot;#757575&quot;\r\n            android:textSize=&quot;16sp&quot; /&gt;\r\n\r\n        &lt;androidx.recyclerview.widget.RecyclerView\r\n            android:id=&quot;@+id/dialog_recycler_view&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:layout_above=&quot;@+id/dialog_message&quot;\r\n            android:layout_below=&quot;@+id/dialog_appbar&quot;\r\n            android:layout_marginBottom=&quot;5dp&quot;\r\n            android:focusedByDefault=&quot;true&quot;\r\n            android:scrollbars=&quot;vertical&quot; /&gt;\r\n```\r\nClass DialogActivity\r\n\r\n```\r\npublic class DialogActivity extends AppCompatActivity {\r\n\r\n    private RecyclerView dialogRecyclerView;\r\n    private LinearLayoutManager layoutManager;\r\n    private final List&lt;Message&gt; messageList = new ArrayList&lt;&gt;();\r\n    private MessageAdapter messageAdapter;\r\n    private String idText;\r\n    private String userNameText;\r\n    private EditText dialogMessage;\r\n    private Toolbar toolbar;\r\n    private FloatingActionButton dialogSend;\r\n    private FloatingActionButton dialogAttach;\r\n    private String downloadedImageUrl;\r\n    private StorageTask uploadTask;\r\n    private Uri imageUri;\r\n    private DatabaseReference dialogsDataBase;\r\n    private ProgressDialog loadingBar;\r\n\r\n    private FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n    private CollectionReference answersDataBase = db.collection(&quot;AnswersDataBase&quot;);\r\n    private StorageReference imageDataBase;\r\n\r\n    @SuppressLint(&quot;WrongViewCast&quot;)\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_dialog);\r\n\r\n        idText = getIntent().getExtras().get(&quot;idText&quot;).toString();\r\n        userNameText = getIntent().getExtras().get(&quot;userNameText&quot;).toString();\r\n\r\n        dialogsDataBase = FirebaseDatabase.getInstance().getReference().child(&quot;DialogsDataBase&quot;).child(idText);\r\n        imageDataBase = FirebaseStorage.getInstance().getReference().child(&quot;imageDataBase&quot;);\r\n\r\n        toolbar = findViewById(R.id.dialog_app_bar);\r\n        setSupportActionBar(toolbar);\r\n        getSupportActionBar().setTitle(userNameText);\r\n\r\n        messageAdapter = new MessageAdapter(this, messageList);\r\n        dialogRecyclerView = findViewById(R.id.dialog_recycler_view);\r\n        dialogRecyclerView.setHasFixedSize(true);\r\n        layoutManager = new LinearLayoutManager(this);\r\n        layoutManager.setStackFromEnd(true);\r\n        dialogRecyclerView.setLayoutManager(layoutManager);\r\n        dialogRecyclerView.setAdapter(messageAdapter);\r\n\r\n        loadingBar = new ProgressDialog(this);\r\n\r\n        dialogMessage = findViewById(R.id.dialog_message);\r\n\r\n        dialogAttach = findViewById(R.id.dialog_attach);\r\n\r\n        dialogAttach.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Intent intent = new Intent();\r\n                intent.setAction(Intent.ACTION_GET_CONTENT);\r\n                intent.setType(&quot;image/*&quot;);\r\n                //startActivityForResult(intent, 438);\r\n                someActivityResultLauncher.launch(intent);\r\n            }\r\n        });\r\n\r\n        dialogMessage.addTextChangedListener(new TextWatcher() {\r\n            @Override\r\n            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n                if(dialogMessage.getText().toString().length() &gt; 0){\r\n                    dialogAttach.setVisibility(View.INVISIBLE);\r\n                    dialogSend.setVisibility(View.VISIBLE);\r\n                }\r\n                else {\r\n                    dialogAttach.setVisibility(View.VISIBLE);\r\n                    dialogSend.setVisibility(View.INVISIBLE);\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void afterTextChanged(Editable editable) {\r\n\r\n            }\r\n        });\r\n\r\n        dialogSend = findViewById(R.id.dialog_send);\r\n\r\n        dialogSend.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                if(dialogMessage.getText().toString().length() &gt; 0){\r\n                    answersDataBase.document(idText).update(&quot;answer&quot;, dialogMessage.getText().toString());\r\n                    dialogsDataBase.push().setValue(new Message(Paper.book().read(&quot;userName&quot;), dialogMessage.getText().toString(), &quot;text&quot;));\r\n                    dialogMessage.setText(&quot;&quot;);\r\n                }\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n\r\n        dialogsDataBase.addChildEventListener(new ChildEventListener() {\r\n            @Override\r\n            public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n                Message message = snapshot.getValue(Message.class);\r\n\r\n                messageList.add(message);\r\n\r\n                messageAdapter.notifyDataSetChanged();\r\n\r\n                dialogRecyclerView.smoothScrollToPosition(dialogRecyclerView.getAdapter().getItemCount());\r\n            }\r\n\r\n            @Override\r\n            public void onChildChanged(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildRemoved(@NonNull DataSnapshot snapshot) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildMoved(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    ActivityResultLauncher&lt;Intent&gt; someActivityResultLauncher = registerForActivityResult(\r\n            new ActivityResultContracts.StartActivityForResult(),\r\n            new ActivityResultCallback&lt;ActivityResult&gt;() {\r\n                @Override\r\n                public void onActivityResult(ActivityResult result) {\r\n                    if (result.getResultCode() == Activity.RESULT_OK) {\r\n\r\n                        loadingBar.setTitle(&quot;Sending Image&quot;);\r\n                        loadingBar.setMessage(&quot;Please wait, we are sending that image&quot;);\r\n                        loadingBar.setCanceledOnTouchOutside(false);\r\n                        loadingBar.show();\r\n\r\n                        // There are no request codes\r\n                        Intent data = result.getData();\r\n                        imageUri = data.getData();\r\n\r\n                        StorageReference filePath = imageDataBase.child(System.currentTimeMillis() + &quot;.jpg&quot;);\r\n\r\n                        uploadTask = filePath.putFile(imageUri);\r\n                        uploadTask.continueWithTask(new Continuation() {\r\n                            @Override\r\n                            public Object then(@NonNull Task task) throws Exception {\r\n\r\n                                if(!task.isSuccessful()){\r\n                                    throw task.getException();\r\n                                }\r\n\r\n                                return filePath.getDownloadUrl();\r\n                            }\r\n                        }).addOnCompleteListener(new OnCompleteListener&lt;Uri&gt;() {\r\n                            @Override\r\n                            public void onComplete(@NonNull Task&lt;Uri&gt; task) {\r\n\r\n                                if(task.isSuccessful()){\r\n\r\n                                    Uri downloadUrl = task.getResult();\r\n                                    downloadedImageUrl = downloadUrl.toString();\r\n\r\n                                    answersDataBase.document(idText).update(&quot;answer&quot;, &quot;Photo&quot;);\r\n                                    dialogsDataBase.push().setValue(new Message(Paper.book().read(&quot;userName&quot;), downloadedImageUrl, &quot;image&quot;));\r\n                                    loadingBar.dismiss();\r\n                                    recreate();\r\n                                }\r\n\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            });\r\n\r\n    @Override\r\n    protected void onDestroy() {\r\n        super.onDestroy();\r\n        messageList.clear();\r\n    }\r\n\r\n    @Override\r\n    protected void onPause() {\r\n        super.onPause();\r\n        messageList.clear();\r\n    }\r\n}\r\n```\r\n\r\nAdapter class\r\n\r\n```\r\npublic class MessageAdapter extends RecyclerView.Adapter&lt;MessageAdapter.MessageViewHolderNew&gt; {\r\n\r\n    private Context context;\r\n    private List&lt;Message&gt; messagesList;\r\n    private Dialog dialog;\r\n    private String userNameString;\r\n\r\n    public MessageAdapter(Context context, List&lt;Message&gt; messagesList){\r\n\r\n        this.context = context;\r\n        this.messagesList = messagesList;\r\n        userNameString = Paper.book().read(&quot;userName&quot;);\r\n\r\n    }\r\n\r\n    public class MessageViewHolderNew extends RecyclerView.ViewHolder{\r\n\r\n        private TextView messageMyMessage;\r\n        private TextView messageYourMessage;\r\n        private ImageView messageMyImage;\r\n        private ImageView messageYourImage;\r\n\r\n\r\n\r\n        public MessageViewHolderNew(@NonNull View itemView) {\r\n            super(itemView);\r\n\r\n            messageMyMessage = (TextView) itemView.findViewById(R.id.message_my_message);\r\n            messageYourMessage = (TextView) itemView.findViewById(R.id.message_your_message);\r\n            messageMyImage = (ImageView) itemView.findViewById(R.id.message_my_image);\r\n            messageYourImage = (ImageView) itemView.findViewById(R.id.message_your_image);\r\n\r\n        }\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public MessageViewHolderNew onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View view = LayoutInflater.from(parent.getContext())\r\n                .inflate(R.layout.message_items_layout, parent, false);\r\n\r\n        return new MessageViewHolderNew(view);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull MessageViewHolderNew holder, int position) {\r\n\r\n        if(messagesList.get(position).getUserName().equals(userNameString)){\r\n            holder.messageMyMessage.setText(messagesList.get(position).getMessage());\r\n            holder.messageMyMessage.setVisibility(View.VISIBLE);\r\n        }\r\n        else{\r\n            holder.messageYourMessage.setText(messagesList.get(position).getMessage());\r\n            holder.messageYourMessage.setVisibility(View.VISIBLE);\r\n        }\r\n\r\n   }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return messagesList.size();\r\n    }\r\n\r\n}\r\n```\r\nIn this place I check user name. \r\n\r\n```\r\n   if(messagesList.get(position).getUserName().equals(userNameString)){\r\n            holder.messageMyMessage.setText(messagesList.get(position).getMessage());\r\n            holder.messageMyMessage.setVisibility(View.VISIBLE);\r\n        }\r\n        else{\r\n            holder.messageYourMessage.setText(messagesList.get(position).getMessage());\r\n            holder.messageYourMessage.setVisibility(View.VISIBLE);\r\n        }\r\n```\r\n\r\nIf user name is my name then I set message and visible to holder.messageMyMessage.\r\nElse I set message and visible to holder.messageYourMessage.\r\nBut sometimes message and visible are set to both messages while scrolling or sent new message. .\r\n[See attached screenshot for details][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/6kLBp.jpg","title":"Incorrect displaying items in RecyclerView while scrolling","body":"<p>Could you please assist in following issue:</p>\n<p>I have incorrect displaying items in my messenger app.</p>\n<p>My layout for items:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;com.google.android.material.card.MaterialCardView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:layout_marginHorizontal=&quot;10dp&quot;\n    android:layout_marginTop=&quot;10dp&quot;\n    app:cardElevation=&quot;0dp&quot;&gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/message_my_message&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_gravity=&quot;end&quot;\n            android:gravity=&quot;end&quot;\n            android:textColor=&quot;@color/black&quot;\n            android:textSize=&quot;14sp&quot;\n            android:visibility=&quot;invisible&quot;\n            /&gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/message_your_message&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_gravity=&quot;start&quot;\n            android:gravity=&quot;start&quot;\n            android:textColor=&quot;@color/black&quot;\n            android:textSize=&quot;14sp&quot;\n            android:visibility=&quot;invisible&quot;\n            /&gt;\n\n&lt;/com.google.android.material.card.MaterialCardView&gt;\n</code></pre>\n<p>My layout for dialog activity:</p>\n<pre><code>&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.DialogActivity&quot;&gt;\n\n    &lt;com.google.android.material.appbar.AppBarLayout\n        android:id=&quot;@+id/dialog_appbar&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:theme=&quot;@style/Theme.AnonymousAd.AppBarOverlay&quot;&gt;\n\n        &lt;include\n            android:id=&quot;@+id/dialog_app_bar&quot;\n            layout=&quot;@layout/app_bar_layout&quot;\n            &gt;\n\n        &lt;/include&gt;\n\n    &lt;/com.google.android.material.appbar.AppBarLayout&gt;\n\n\n\n        &lt;com.google.android.material.floatingactionbutton.FloatingActionButton\n            android:id=&quot;@+id/dialog_send&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_alignParentEnd=&quot;true&quot;\n            android:layout_alignParentBottom=&quot;true&quot;\n            android:clickable=&quot;true&quot;\n            android:contentDescription=&quot;TODO&quot;\n            android:focusable=&quot;true&quot;\n            android:src=&quot;@drawable/ic_send&quot;\n            android:visibility=&quot;invisible&quot;\n            app:fabSize=&quot;mini&quot;\n            tools:ignore=&quot;SpeakableTextPresentCheck&quot; /&gt;\n\n        &lt;com.google.android.material.floatingactionbutton.FloatingActionButton\n            android:id=&quot;@+id/dialog_attach&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_alignParentEnd=&quot;true&quot;\n            android:layout_alignParentBottom=&quot;true&quot;\n            android:clickable=&quot;true&quot;\n            android:contentDescription=&quot;TODO&quot;\n            android:focusable=&quot;true&quot;\n            android:src=&quot;@drawable/ic_attach&quot;\n            app:fabSize=&quot;mini&quot;\n            tools:ignore=&quot;SpeakableTextPresentCheck&quot; /&gt;\n\n        &lt;com.google.android.material.floatingactionbutton.FloatingActionButton\n            android:id=&quot;@+id/dialog_gift&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_alignParentStart=&quot;true&quot;\n            android:layout_alignParentBottom=&quot;true&quot;\n            android:clickable=&quot;true&quot;\n            android:contentDescription=&quot;TODO&quot;\n            android:focusable=&quot;true&quot;\n            android:src=&quot;@drawable/ic_gift&quot;\n            app:fabSize=&quot;mini&quot;\n            tools:ignore=&quot;SpeakableTextPresentCheck&quot; /&gt;\n\n        &lt;EditText\n            android:id=&quot;@+id/dialog_message&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_alignParentBottom=&quot;true&quot;\n            android:layout_toLeftOf=&quot;@+id/dialog_send&quot;\n            android:layout_toRightOf=&quot;@+id/dialog_gift&quot;\n            android:autofillHints=&quot;&quot;\n            android:backgroundTint=&quot;@color/teal_700&quot;\n            android:hint=&quot;@string/dialog_enter_message&quot;\n            android:inputType=&quot;textCapSentences|textMultiLine&quot;\n            android:maxHeight=&quot;120dp&quot;\n            android:maxLength=&quot;500&quot;\n            android:minHeight=&quot;48dp&quot;\n            android:textColorHint=&quot;#757575&quot;\n            android:textSize=&quot;16sp&quot; /&gt;\n\n        &lt;androidx.recyclerview.widget.RecyclerView\n            android:id=&quot;@+id/dialog_recycler_view&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;match_parent&quot;\n            android:layout_above=&quot;@+id/dialog_message&quot;\n            android:layout_below=&quot;@+id/dialog_appbar&quot;\n            android:layout_marginBottom=&quot;5dp&quot;\n            android:focusedByDefault=&quot;true&quot;\n            android:scrollbars=&quot;vertical&quot; /&gt;\n</code></pre>\n<p>Class DialogActivity</p>\n<pre><code>public class DialogActivity extends AppCompatActivity {\n\n    private RecyclerView dialogRecyclerView;\n    private LinearLayoutManager layoutManager;\n    private final List&lt;Message&gt; messageList = new ArrayList&lt;&gt;();\n    private MessageAdapter messageAdapter;\n    private String idText;\n    private String userNameText;\n    private EditText dialogMessage;\n    private Toolbar toolbar;\n    private FloatingActionButton dialogSend;\n    private FloatingActionButton dialogAttach;\n    private String downloadedImageUrl;\n    private StorageTask uploadTask;\n    private Uri imageUri;\n    private DatabaseReference dialogsDataBase;\n    private ProgressDialog loadingBar;\n\n    private FirebaseFirestore db = FirebaseFirestore.getInstance();\n    private CollectionReference answersDataBase = db.collection(&quot;AnswersDataBase&quot;);\n    private StorageReference imageDataBase;\n\n    @SuppressLint(&quot;WrongViewCast&quot;)\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_dialog);\n\n        idText = getIntent().getExtras().get(&quot;idText&quot;).toString();\n        userNameText = getIntent().getExtras().get(&quot;userNameText&quot;).toString();\n\n        dialogsDataBase = FirebaseDatabase.getInstance().getReference().child(&quot;DialogsDataBase&quot;).child(idText);\n        imageDataBase = FirebaseStorage.getInstance().getReference().child(&quot;imageDataBase&quot;);\n\n        toolbar = findViewById(R.id.dialog_app_bar);\n        setSupportActionBar(toolbar);\n        getSupportActionBar().setTitle(userNameText);\n\n        messageAdapter = new MessageAdapter(this, messageList);\n        dialogRecyclerView = findViewById(R.id.dialog_recycler_view);\n        dialogRecyclerView.setHasFixedSize(true);\n        layoutManager = new LinearLayoutManager(this);\n        layoutManager.setStackFromEnd(true);\n        dialogRecyclerView.setLayoutManager(layoutManager);\n        dialogRecyclerView.setAdapter(messageAdapter);\n\n        loadingBar = new ProgressDialog(this);\n\n        dialogMessage = findViewById(R.id.dialog_message);\n\n        dialogAttach = findViewById(R.id.dialog_attach);\n\n        dialogAttach.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                Intent intent = new Intent();\n                intent.setAction(Intent.ACTION_GET_CONTENT);\n                intent.setType(&quot;image/*&quot;);\n                //startActivityForResult(intent, 438);\n                someActivityResultLauncher.launch(intent);\n            }\n        });\n\n        dialogMessage.addTextChangedListener(new TextWatcher() {\n            @Override\n            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n\n            }\n\n            @Override\n            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n                if(dialogMessage.getText().toString().length() &gt; 0){\n                    dialogAttach.setVisibility(View.INVISIBLE);\n                    dialogSend.setVisibility(View.VISIBLE);\n                }\n                else {\n                    dialogAttach.setVisibility(View.VISIBLE);\n                    dialogSend.setVisibility(View.INVISIBLE);\n                }\n            }\n\n            @Override\n            public void afterTextChanged(Editable editable) {\n\n            }\n        });\n\n        dialogSend = findViewById(R.id.dialog_send);\n\n        dialogSend.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                if(dialogMessage.getText().toString().length() &gt; 0){\n                    answersDataBase.document(idText).update(&quot;answer&quot;, dialogMessage.getText().toString());\n                    dialogsDataBase.push().setValue(new Message(Paper.book().read(&quot;userName&quot;), dialogMessage.getText().toString(), &quot;text&quot;));\n                    dialogMessage.setText(&quot;&quot;);\n                }\n            }\n        });\n\n    }\n\n    @Override\n    protected void onStart() {\n        super.onStart();\n\n        dialogsDataBase.addChildEventListener(new ChildEventListener() {\n            @Override\n            public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\n                Message message = snapshot.getValue(Message.class);\n\n                messageList.add(message);\n\n                messageAdapter.notifyDataSetChanged();\n\n                dialogRecyclerView.smoothScrollToPosition(dialogRecyclerView.getAdapter().getItemCount());\n            }\n\n            @Override\n            public void onChildChanged(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\n\n            }\n\n            @Override\n            public void onChildRemoved(@NonNull DataSnapshot snapshot) {\n\n            }\n\n            @Override\n            public void onChildMoved(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\n\n            }\n\n            @Override\n            public void onCancelled(@NonNull DatabaseError error) {\n\n            }\n        });\n    }\n\n    ActivityResultLauncher&lt;Intent&gt; someActivityResultLauncher = registerForActivityResult(\n            new ActivityResultContracts.StartActivityForResult(),\n            new ActivityResultCallback&lt;ActivityResult&gt;() {\n                @Override\n                public void onActivityResult(ActivityResult result) {\n                    if (result.getResultCode() == Activity.RESULT_OK) {\n\n                        loadingBar.setTitle(&quot;Sending Image&quot;);\n                        loadingBar.setMessage(&quot;Please wait, we are sending that image&quot;);\n                        loadingBar.setCanceledOnTouchOutside(false);\n                        loadingBar.show();\n\n                        // There are no request codes\n                        Intent data = result.getData();\n                        imageUri = data.getData();\n\n                        StorageReference filePath = imageDataBase.child(System.currentTimeMillis() + &quot;.jpg&quot;);\n\n                        uploadTask = filePath.putFile(imageUri);\n                        uploadTask.continueWithTask(new Continuation() {\n                            @Override\n                            public Object then(@NonNull Task task) throws Exception {\n\n                                if(!task.isSuccessful()){\n                                    throw task.getException();\n                                }\n\n                                return filePath.getDownloadUrl();\n                            }\n                        }).addOnCompleteListener(new OnCompleteListener&lt;Uri&gt;() {\n                            @Override\n                            public void onComplete(@NonNull Task&lt;Uri&gt; task) {\n\n                                if(task.isSuccessful()){\n\n                                    Uri downloadUrl = task.getResult();\n                                    downloadedImageUrl = downloadUrl.toString();\n\n                                    answersDataBase.document(idText).update(&quot;answer&quot;, &quot;Photo&quot;);\n                                    dialogsDataBase.push().setValue(new Message(Paper.book().read(&quot;userName&quot;), downloadedImageUrl, &quot;image&quot;));\n                                    loadingBar.dismiss();\n                                    recreate();\n                                }\n\n                            }\n                        });\n                    }\n                }\n            });\n\n    @Override\n    protected void onDestroy() {\n        super.onDestroy();\n        messageList.clear();\n    }\n\n    @Override\n    protected void onPause() {\n        super.onPause();\n        messageList.clear();\n    }\n}\n</code></pre>\n<p>Adapter class</p>\n<pre><code>public class MessageAdapter extends RecyclerView.Adapter&lt;MessageAdapter.MessageViewHolderNew&gt; {\n\n    private Context context;\n    private List&lt;Message&gt; messagesList;\n    private Dialog dialog;\n    private String userNameString;\n\n    public MessageAdapter(Context context, List&lt;Message&gt; messagesList){\n\n        this.context = context;\n        this.messagesList = messagesList;\n        userNameString = Paper.book().read(&quot;userName&quot;);\n\n    }\n\n    public class MessageViewHolderNew extends RecyclerView.ViewHolder{\n\n        private TextView messageMyMessage;\n        private TextView messageYourMessage;\n        private ImageView messageMyImage;\n        private ImageView messageYourImage;\n\n\n\n        public MessageViewHolderNew(@NonNull View itemView) {\n            super(itemView);\n\n            messageMyMessage = (TextView) itemView.findViewById(R.id.message_my_message);\n            messageYourMessage = (TextView) itemView.findViewById(R.id.message_your_message);\n            messageMyImage = (ImageView) itemView.findViewById(R.id.message_my_image);\n            messageYourImage = (ImageView) itemView.findViewById(R.id.message_your_image);\n\n        }\n    }\n\n    @NonNull\n    @Override\n    public MessageViewHolderNew onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n        View view = LayoutInflater.from(parent.getContext())\n                .inflate(R.layout.message_items_layout, parent, false);\n\n        return new MessageViewHolderNew(view);\n    }\n\n    @Override\n    public void onBindViewHolder(@NonNull MessageViewHolderNew holder, int position) {\n\n        if(messagesList.get(position).getUserName().equals(userNameString)){\n            holder.messageMyMessage.setText(messagesList.get(position).getMessage());\n            holder.messageMyMessage.setVisibility(View.VISIBLE);\n        }\n        else{\n            holder.messageYourMessage.setText(messagesList.get(position).getMessage());\n            holder.messageYourMessage.setVisibility(View.VISIBLE);\n        }\n\n   }\n\n    @Override\n    public int getItemCount() {\n        return messagesList.size();\n    }\n\n}\n</code></pre>\n<p>In this place I check user name.</p>\n<pre><code>   if(messagesList.get(position).getUserName().equals(userNameString)){\n            holder.messageMyMessage.setText(messagesList.get(position).getMessage());\n            holder.messageMyMessage.setVisibility(View.VISIBLE);\n        }\n        else{\n            holder.messageYourMessage.setText(messagesList.get(position).getMessage());\n            holder.messageYourMessage.setVisibility(View.VISIBLE);\n        }\n</code></pre>\n<p>If user name is my name then I set message and visible to holder.messageMyMessage.\nElse I set message and visible to holder.messageYourMessage.\nBut sometimes message and visible are set to both messages while scrolling or sent new message. .\n<a href=\"https://i.stack.imgur.com/6kLBp.jpg\" rel=\"nofollow noreferrer\">See attached screenshot for details</a></p>\n"},{"tags":["java","scala","apache-spark","shapeless"],"comments":[{"owner":{"account_id":97791,"reputation":324357,"user_id":1560062,"accept_rate":100,"display_name":"zero323"},"score":1,"creation_date":1488500139,"post_id":42568010,"comment_id":72270747,"body_markdown":"A guess: Spark depends on Shapeless 2.0.0 (via Breeze). It is really old not compatible with current releases.","body":"A guess: Spark depends on Shapeless 2.0.0 (via Breeze). It is really old not compatible with current releases."},{"owner":{"account_id":1284726,"reputation":1432,"user_id":1238044,"accept_rate":64,"display_name":"Todor Kolev"},"score":1,"creation_date":1513682094,"post_id":42568010,"comment_id":82737050,"body_markdown":"Had a similar issue but in my case the culprit was the apache avro library as spark uses an older version compared to the one that avro4s pulls.","body":"Had a similar issue but in my case the culprit was the apache avro library as spark uses an older version compared to the one that avro4s pulls."}],"answers":[{"tags":[],"owner":{"account_id":2177169,"reputation":527,"user_id":1927561,"display_name":"Daniel Drexler"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1488922930,"creation_date":1488922930,"answer_id":42658876,"question_id":42568010,"body_markdown":"[zero323](https://stackoverflow.com/users/1560062/zero323) has the right answer as far as I can tell. Spark 2.1.0 has a dependency that itself depends on Shapeless 2.0.0. \r\n\r\nThis problem could be solved one of two ways: Import the dependency that uses Shapeless and [shade](https://github.com/sbt/sbt-assembly#shading) shapeless, or use a different avro library. I went with the latter solution.","title":"NoSuchMethodError in shapeless seen only in Spark","body":"<p><a href=\"https://stackoverflow.com/users/1560062/zero323\">zero323</a> has the right answer as far as I can tell. Spark 2.1.0 has a dependency that itself depends on Shapeless 2.0.0. </p>\n\n<p>This problem could be solved one of two ways: Import the dependency that uses Shapeless and <a href=\"https://github.com/sbt/sbt-assembly#shading\" rel=\"nofollow noreferrer\">shade</a> shapeless, or use a different avro library. I went with the latter solution.</p>\n"},{"tags":[],"owner":{"account_id":3549768,"reputation":1538,"user_id":2964911,"display_name":"Iraj Hedayati"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1661052893,"creation_date":1652240913,"answer_id":72195186,"question_id":42568010,"body_markdown":"Same issue myself. I just add more details for others facing it.\r\n\r\n## Error\r\n\r\nEverything works fine till I deploy to cluster. Then I get\r\n\r\n    Exception in thread &quot;main&quot; java.lang.NoSuchMethodError: &#39;shapeless.DefaultSymbolicLabelling shapeless.DefaultSymbolicLabelling$.instance(shapeless.HList)&#39;\r\n\r\n## Root Cause\r\nFollowing the stacktrace, I know it is related to the circe library. Then I run the dependency (make sure you have `addDependencyTreePlugin` in your `~/.sbt/1.0/plugins/plugins.sbt` file):\r\n\r\n    ❯ sbt &quot;whatDependsOn com.chuusai shapeless_2.12&quot;\r\n    [info] welcome to sbt 1.6.2 (Amazon.com Inc. Java 1.8.0_332)\r\n    [info] com.chuusai:shapeless_2.12:2.3.7 [S]\r\n    [info]   +-io.circe:circe-generic_2.12:0.14.1 [S]\r\n    [info]     +-***\r\n\r\nbut if I run the dependency with &quot;provided&quot; scope, I get:\r\n\r\n    ❯ sbt provided:&quot;whatDependsOn com.chuusai shapeless_2.12&quot;\r\n    [info] welcome to sbt 1.6.2 (Amazon.com Inc. Java 1.8.0_332)\r\n    [info] com.chuusai:shapeless_2.12:2.3.3 [S]\r\n    [info]   +-org.scalanlp:breeze_2.12:1.0 [S]\r\n    [info]     +-org.apache.spark:spark-mllib-local_2.12:3.1.3\r\n    [info]     | +-org.apache.spark:spark-graphx_2.12:3.1.3\r\n    [info]     | | +-org.apache.spark:spark-mllib_2.12:3.1.3\r\n    [info]     | |   +-***\r\n    [info]     | |\r\n    [info]     | +-org.apache.spark:spark-mllib_2.12:3.1.3\r\n    [info]     |   +-***\r\n    [info]     |\r\n    [info]     +-org.apache.spark:spark-mllib_2.12:3.1.3\r\n    [info]       +-***\r\n\r\nAs you can see, the `instance` function in version 2.3.7 is not present in version 2.3.3 (it is added in version 2.3.5):\r\n- https://javadoc.io/static/com.chuusai/shapeless_2.12/2.3.3/shapeless/DefaultSymbolicLabelling$.html\r\n- https://javadoc.io/static/com.chuusai/shapeless_2.12/2.3.7/shapeless/DefaultSymbolicLabelling$.html\r\n\r\n## Didn&#39;t work\r\n\r\nAdding the dependency didn&#39;t fix my issue.\r\n\r\n    val CirceVersion = &quot;0.14.1&quot;\r\n    val ShapelessVersion = &quot;2.3.7&quot; // Circe 0.14.1 uses 2.3.7; Spark 3.1.3 uses 2.3.3\r\n    val SparkVersion = &quot;3.1.3&quot;\r\n\r\n    lazy val CirceDeps: Seq[ModuleID] = Seq(\r\n        &quot;io.circe&quot; %% &quot;circe-generic&quot; % CirceVersion,\r\n        /* Shapeless is one of the Spark dependencies. As Spark is provided, it is not included in the uber jar.\r\n         * Adding the dependency explicitly to make sure we have the correct version at run-time\r\n         */\r\n        &quot;com.chuusai&quot; %% &quot;shapeless&quot; % ShapelessVersion\r\n      )\r\n\r\nI keep this in my code just for documentation purpose only.\r\n\r\n## What worked\r\n\r\nThe main fix is actually to rename Shapeless library (see my comments)[the question that I pick the answer][1]\r\n\r\n\r\n    /** Shapeless is one of the Spark dependencies. At run-time, they clash and Spark&#39;s shapeless package takes\r\n      * precedence. It results run-time error as shapeless 2.3.7 and 2.3.3 are not fully compatible.\r\n      * Here, we are are renaming the library so they co-exist in run-time and Spark uses its own version and Circe also\r\n      * uses its own version.\r\n      */\r\n    // noinspection SbtDependencyVersionInspection\r\n    lazy val shadingRules: Def.Setting[Seq[ShadeRule]] =\r\n      assembly / assemblyShadeRules := Seq(\r\n        ShadeRule\r\n          .rename(&quot;shapeless.**&quot; -&gt; &quot;shadeshapless.@1&quot;)\r\n          .inLibrary(&quot;com.chuusai&quot; % &quot;shapeless_2.12&quot; % Dependencies.ShapelessVersion)\r\n          .inProject,\r\n        ShadeRule\r\n          .rename(&quot;shapeless.**&quot; -&gt; &quot;shadeshapless.@1&quot;)\r\n          .inLibrary(&quot;io.circe&quot; % &quot;circe-generic_2.12&quot; % Dependencies.CirceVersion)\r\n          .inProject\r\n      )\r\n\r\n**Update 2022-08-20**\r\n\r\nBased on @denis-arnaud comment, here is a simpler version from [pureconfig][2]\r\n\r\n\r\n    assembly / assemblyShadeRules := Seq(ShadeRule.rename(&quot;shapeless.**&quot; -&gt; &quot;new_shapeless.@1&quot;).inAll)\r\n\r\nI guess the simple one works for most the situations. The more complex one is good for when there are different versions of shapeless in the classpath, and you&#39;d like to rename them in `@1`, `@2`, etc.\r\n\r\n  [1]: https://stackoverflow.com/questions/43611147/spark-not-working-with-pureconfig\r\n  [2]: https://pureconfig.github.io/docs/faq.html#how-can-i-use-pureconfig-with-spark-210-problematic-shapeless-dependency","title":"NoSuchMethodError in shapeless seen only in Spark","body":"<p>Same issue myself. I just add more details for others facing it.</p>\n<h2>Error</h2>\n<p>Everything works fine till I deploy to cluster. Then I get</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.NoSuchMethodError: 'shapeless.DefaultSymbolicLabelling shapeless.DefaultSymbolicLabelling$.instance(shapeless.HList)'\n</code></pre>\n<h2>Root Cause</h2>\n<p>Following the stacktrace, I know it is related to the circe library. Then I run the dependency (make sure you have <code>addDependencyTreePlugin</code> in your <code>~/.sbt/1.0/plugins/plugins.sbt</code> file):</p>\n<pre><code>❯ sbt &quot;whatDependsOn com.chuusai shapeless_2.12&quot;\n[info] welcome to sbt 1.6.2 (Amazon.com Inc. Java 1.8.0_332)\n[info] com.chuusai:shapeless_2.12:2.3.7 [S]\n[info]   +-io.circe:circe-generic_2.12:0.14.1 [S]\n[info]     +-***\n</code></pre>\n<p>but if I run the dependency with &quot;provided&quot; scope, I get:</p>\n<pre><code>❯ sbt provided:&quot;whatDependsOn com.chuusai shapeless_2.12&quot;\n[info] welcome to sbt 1.6.2 (Amazon.com Inc. Java 1.8.0_332)\n[info] com.chuusai:shapeless_2.12:2.3.3 [S]\n[info]   +-org.scalanlp:breeze_2.12:1.0 [S]\n[info]     +-org.apache.spark:spark-mllib-local_2.12:3.1.3\n[info]     | +-org.apache.spark:spark-graphx_2.12:3.1.3\n[info]     | | +-org.apache.spark:spark-mllib_2.12:3.1.3\n[info]     | |   +-***\n[info]     | |\n[info]     | +-org.apache.spark:spark-mllib_2.12:3.1.3\n[info]     |   +-***\n[info]     |\n[info]     +-org.apache.spark:spark-mllib_2.12:3.1.3\n[info]       +-***\n</code></pre>\n<p>As you can see, the <code>instance</code> function in version 2.3.7 is not present in version 2.3.3 (it is added in version 2.3.5):</p>\n<ul>\n<li><a href=\"https://javadoc.io/static/com.chuusai/shapeless_2.12/2.3.3/shapeless/DefaultSymbolicLabelling$.html\" rel=\"nofollow noreferrer\">https://javadoc.io/static/com.chuusai/shapeless_2.12/2.3.3/shapeless/DefaultSymbolicLabelling$.html</a></li>\n<li><a href=\"https://javadoc.io/static/com.chuusai/shapeless_2.12/2.3.7/shapeless/DefaultSymbolicLabelling$.html\" rel=\"nofollow noreferrer\">https://javadoc.io/static/com.chuusai/shapeless_2.12/2.3.7/shapeless/DefaultSymbolicLabelling$.html</a></li>\n</ul>\n<h2>Didn't work</h2>\n<p>Adding the dependency didn't fix my issue.</p>\n<pre><code>val CirceVersion = &quot;0.14.1&quot;\nval ShapelessVersion = &quot;2.3.7&quot; // Circe 0.14.1 uses 2.3.7; Spark 3.1.3 uses 2.3.3\nval SparkVersion = &quot;3.1.3&quot;\n\nlazy val CirceDeps: Seq[ModuleID] = Seq(\n    &quot;io.circe&quot; %% &quot;circe-generic&quot; % CirceVersion,\n    /* Shapeless is one of the Spark dependencies. As Spark is provided, it is not included in the uber jar.\n     * Adding the dependency explicitly to make sure we have the correct version at run-time\n     */\n    &quot;com.chuusai&quot; %% &quot;shapeless&quot; % ShapelessVersion\n  )\n</code></pre>\n<p>I keep this in my code just for documentation purpose only.</p>\n<h2>What worked</h2>\n<p>The main fix is actually to rename Shapeless library (see my comments)<a href=\"https://stackoverflow.com/questions/43611147/spark-not-working-with-pureconfig\">the question that I pick the answer</a></p>\n<pre><code>/** Shapeless is one of the Spark dependencies. At run-time, they clash and Spark's shapeless package takes\n  * precedence. It results run-time error as shapeless 2.3.7 and 2.3.3 are not fully compatible.\n  * Here, we are are renaming the library so they co-exist in run-time and Spark uses its own version and Circe also\n  * uses its own version.\n  */\n// noinspection SbtDependencyVersionInspection\nlazy val shadingRules: Def.Setting[Seq[ShadeRule]] =\n  assembly / assemblyShadeRules := Seq(\n    ShadeRule\n      .rename(&quot;shapeless.**&quot; -&gt; &quot;shadeshapless.@1&quot;)\n      .inLibrary(&quot;com.chuusai&quot; % &quot;shapeless_2.12&quot; % Dependencies.ShapelessVersion)\n      .inProject,\n    ShadeRule\n      .rename(&quot;shapeless.**&quot; -&gt; &quot;shadeshapless.@1&quot;)\n      .inLibrary(&quot;io.circe&quot; % &quot;circe-generic_2.12&quot; % Dependencies.CirceVersion)\n      .inProject\n  )\n</code></pre>\n<p><strong>Update 2022-08-20</strong></p>\n<p>Based on @denis-arnaud comment, here is a simpler version from <a href=\"https://pureconfig.github.io/docs/faq.html#how-can-i-use-pureconfig-with-spark-210-problematic-shapeless-dependency\" rel=\"nofollow noreferrer\">pureconfig</a></p>\n<pre><code>assembly / assemblyShadeRules := Seq(ShadeRule.rename(&quot;shapeless.**&quot; -&gt; &quot;new_shapeless.@1&quot;).inAll)\n</code></pre>\n<p>I guess the simple one works for most the situations. The more complex one is good for when there are different versions of shapeless in the classpath, and you'd like to rename them in <code>@1</code>, <code>@2</code>, etc.</p>\n"}],"owner":{"account_id":2177169,"reputation":527,"user_id":1927561,"display_name":"Daniel Drexler"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3343,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":72195186,"answer_count":2,"score":4,"last_activity_date":1661052893,"creation_date":1488497732,"question_id":42568010,"body_markdown":"I am trying to write a Spark connector to pull AVRO messages off a RabbitMQ message queue. When decoding the AVRO messages, there is a NoSuchMethodError error that occurs only when running in Spark. \r\n\r\nI could not reproduce the Spark code exactly outside of spark, but I believe the two examples are sufficiently similar. I think this is the smallest code that reproduces the same scenario.\r\n\r\nI&#39;ve removed all the connection parameters both because the information is private and the connection does not appear to be the issue.\r\n\r\nSpark code:\r\n \r\n    package simpleexample\r\n\r\n    import org.apache.spark.SparkConf\r\n    import org.apache.spark.streaming.rabbitmq.distributed.RabbitMQDistributedKey\r\n    import org.apache.spark.streaming.rabbitmq.models.ExchangeAndRouting\r\n    import org.apache.spark.streaming.rabbitmq.RabbitMQUtils\r\n    import org.apache.spark.streaming.{Seconds, StreamingContext}\r\n    import org.apache.spark.storage.StorageLevel\r\n\r\n    import org.apache.kafka.clients.producer.{KafkaProducer, ProducerRecord}\r\n\r\n    import com.sksamuel.avro4s._\r\n\r\n    import java.io.{ByteArrayInputStream, ByteArrayOutputStream}\r\n    import com.rabbitmq.client.QueueingConsumer.Delivery\r\n    import java.util.HashMap\r\n\r\n\r\n    case class AttributeTuple(attrName: String, attrValue: String)\r\n\r\n    // AVRO Schema for Events\r\n\r\n    case class DeviceEvent(\r\n        tenantName: String, \r\n        groupName: String, \r\n        subgroupName: String, \r\n        eventType: String, \r\n        eventSource: String,\r\n        deviceTypeName: String,\r\n        deviceId: Int,\r\n        timestamp: Long,\r\n        attribute: AttributeTuple\r\n    )\r\n\r\n    object RabbitMonitor {\r\n      def main(args: Array[String]) {\r\n        println(&quot;start&quot;)\r\n\r\n        val sparkConf = new SparkConf().setMaster(&quot;local[2]&quot;).setAppName(&quot;RabbitMonitor&quot;)\r\n        val ssc = new StreamingContext(sparkConf, Seconds(60))\r\n\r\n        def parseArrayEvent(delivery: Delivery): Seq[DeviceEvent] = {\r\n            val in = new ByteArrayInputStream(delivery.getBody())\r\n            val input = AvroInputStream.binary[DeviceEvent](in)\r\n            input.iterator.toSeq\r\n        }\r\n\r\n        val params: Map[String, String] = Map(\r\n            /* many rabbit connection parameters */\r\n            &quot;maxReceiveTime&quot; -&gt; &quot;60000&quot; // 60s\r\n          )\r\n\r\n        val distributedKey = Seq(\r\n            RabbitMQDistributedKey(\r\n              /* queue name */, \r\n              new ExchangeAndRouting(/* exchange name */, /* routing key */),\r\n              params\r\n            )\r\n        )\r\n\r\n        var events = RabbitMQUtils.createDistributedStream[Seq[DeviceEvent]](ssc, distributedKey, params, parseArrayEvent)\r\n        events.print()\r\n\r\n        ssc.start()\r\n        ssc.awaitTermination()\r\n      }\r\n    }\r\n\r\nNon-Spark code:\r\n\r\n    package simpleexample\r\n\r\n    import com.thenewmotion.akka.rabbitmq._\r\n    import akka.actor._\r\n    // avoid name collision with rabbitmq channel\r\n    import scala.concurrent.{Channel =&gt; BasicChannel}\r\n    import scala.concurrent.ExecutionContext.Implicits.global\r\n\r\n    import com.sksamuel.avro4s._\r\n    import java.io.{ByteArrayInputStream, ByteArrayOutputStream}\r\n\r\n    object Test extends App {\r\n        implicit val system = ActorSystem()\r\n\r\n        val factory = new ConnectionFactory()\r\n        /* Set connection parameters*/\r\n        val exchange: String = /* exchange name */\r\n\r\n        val connection: ActorRef = system.actorOf(ConnectionActor.props(factory), &quot;rabbitmq&quot;)\r\n\r\n        def setupSubscriber(channel: Channel, self: ActorRef) {\r\n            val queue = channel.queueDeclare().getQueue\r\n            channel.queueBind(queue, exchange, /* routing key */)\r\n            val consumer = new DefaultConsumer(channel) {\r\n              override def handleDelivery(consumerTag: String, envelope: Envelope, properties: BasicProperties, body: Array[Byte]) {\r\n                val in = new ByteArrayInputStream(body)\r\n                val input = AvroInputStream.binary[DeviceEvent](in)\r\n                val result = input.iterator.toSeq\r\n                println(result)\r\n              }\r\n            }\r\n\r\n            channel.basicConsume(queue, true, consumer)\r\n          }\r\n\r\n        connection ! CreateChannel(ChannelActor.props(setupSubscriber), Some(&quot;eventSubscriber&quot;))\r\n\r\n\r\n        scala.concurrent.Future {\r\n            def loop(n: Long) {\r\n                Thread.sleep(1000)\r\n                if (n &lt; 30) {\r\n                    loop(n + 1)\r\n                }\r\n            }\r\n            loop(0)\r\n        }\r\n    }\r\n\r\nNon-Spark Output (the last line is a successfully decoded update):\r\n\r\n    drex@drexThinkPad:~/src/scala/so-repro/connector/target/scala-2.11$ scala project.jar \r\n    [INFO] [03/02/2017 14:11:06.899] [default-akka.actor.default-dispatcher-4] [akka://default/deadLetters] Message [com.thenewmotion.akka.rabbitmq.ChannelCreated] from Actor[akka://default/user/rabbitmq#-889215077] to Actor[akka://default/deadLetters] was not delivered. [1] dead letters encountered. This logging can be turned off or adjusted with configuration settings &#39;akka.log-dead-letters&#39; and &#39;akka.log-dead-letters-during-shutdown&#39;.\r\n    [INFO] [03/02/2017 14:11:07.337] [default-akka.actor.default-dispatcher-3] [akka://default/user/rabbitmq] akka://default/user/rabbitmq connected to amqp://&lt;rabbit info&gt;\r\n    [INFO] [03/02/2017 14:11:07.509] [default-akka.actor.default-dispatcher-4] [akka://default/user/rabbitmq/eventSubscriber] akka://default/user/rabbitmq/eventSubscriber connected\r\n    Stream(DeviceEvent(int,na,d01,deviceAttrUpdate,device,TestDeviceType,33554434,1488492704421,AttributeTuple(temperature,60)), ?)\r\n\r\nSpark Output: \r\n\r\n    drex@drexThinkPad:~/src/scala/so-repro/connector/target/scala-2.11$ spark-submit ./project.jar --class RabbitMonitor\r\n    start\r\n    Using Spark&#39;s default log4j profile: org/apache/spark/log4j-defaults.properties\r\n    17/03/02 14:20:15 INFO SparkContext: Running Spark version 2.1.0\r\n    17/03/02 14:20:15 WARN NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable\r\n    17/03/02 14:20:16 WARN Utils: Your hostname, drexThinkPad resolves to a loopback address: 127.0.1.1; using 192.168.1.11 instead (on interface wlp3s0)\r\n    17/03/02 14:20:16 WARN Utils: Set SPARK_LOCAL_IP if you need to bind to another address\r\n    17/03/02 14:20:16 INFO SecurityManager: Changing view acls to: drex\r\n    17/03/02 14:20:16 INFO SecurityManager: Changing modify acls to: drex\r\n    17/03/02 14:20:16 INFO SecurityManager: Changing view acls groups to: \r\n    17/03/02 14:20:16 INFO SecurityManager: Changing modify acls groups to: \r\n    17/03/02 14:20:16 INFO SecurityManager: SecurityManager: authentication disabled; ui acls disabled; users  with view permissions: Set(drex); groups with view permissions: Set(); users  with modify permissions: Set(drex); groups with modify permissions: Set()\r\n    17/03/02 14:20:16 INFO Utils: Successfully started service &#39;sparkDriver&#39; on port 34701.\r\n    17/03/02 14:20:16 INFO SparkEnv: Registering MapOutputTracker\r\n    17/03/02 14:20:16 INFO SparkEnv: Registering BlockManagerMaster\r\n    17/03/02 14:20:16 INFO BlockManagerMasterEndpoint: Using org.apache.spark.storage.DefaultTopologyMapper for getting topology information\r\n    17/03/02 14:20:16 INFO BlockManagerMasterEndpoint: BlockManagerMasterEndpoint up\r\n    17/03/02 14:20:16 INFO DiskBlockManager: Created local directory at /tmp/blockmgr-5cbb13bf-78fe-4227-81b3-1afea40f899a\r\n    17/03/02 14:20:16 INFO MemoryStore: MemoryStore started with capacity 366.3 MB\r\n    17/03/02 14:20:16 INFO SparkEnv: Registering OutputCommitCoordinator\r\n    17/03/02 14:20:16 INFO Utils: Successfully started service &#39;SparkUI&#39; on port 4040.\r\n    17/03/02 14:20:16 INFO SparkUI: Bound SparkUI to 0.0.0.0, and started at http://192.168.1.11:4040\r\n    17/03/02 14:20:16 INFO SparkContext: Added JAR file:/home/drex/src/scala/so-repro/connector/target/scala-2.11/./project.jar at spark://192.168.1.11:34701/jars/project.jar with timestamp 1488493216614\r\n    17/03/02 14:20:16 INFO Executor: Starting executor ID driver on host localhost\r\n    17/03/02 14:20:16 INFO Utils: Successfully started service &#39;org.apache.spark.network.netty.NettyBlockTransferService&#39; on port 33276.\r\n    17/03/02 14:20:16 INFO NettyBlockTransferService: Server created on 192.168.1.11:33276\r\n    17/03/02 14:20:16 INFO BlockManager: Using org.apache.spark.storage.RandomBlockReplicationPolicy for block replication policy\r\n    17/03/02 14:20:16 INFO BlockManagerMaster: Registering BlockManager BlockManagerId(driver, 192.168.1.11, 33276, None)\r\n    17/03/02 14:20:16 INFO BlockManagerMasterEndpoint: Registering block manager 192.168.1.11:33276 with 366.3 MB RAM, BlockManagerId(driver, 192.168.1.11, 33276, None)\r\n    17/03/02 14:20:16 INFO BlockManagerMaster: Registered BlockManager BlockManagerId(driver, 192.168.1.11, 33276, None)\r\n    17/03/02 14:20:16 INFO BlockManager: Initialized BlockManager: BlockManagerId(driver, 192.168.1.11, 33276, None)\r\n    17/03/02 14:20:17 INFO RabbitMQDStream: Duration for remembering RDDs set to 60000 ms for org.apache.spark.streaming.rabbitmq.distributed.RabbitMQDStream@546621c4\r\n    17/03/02 14:20:17 INFO RabbitMQDStream: Slide time = 60000 ms\r\n    17/03/02 14:20:17 INFO RabbitMQDStream: Storage level = Memory Deserialized 1x Replicated\r\n    17/03/02 14:20:17 INFO RabbitMQDStream: Checkpoint interval = null\r\n    17/03/02 14:20:17 INFO RabbitMQDStream: Remember interval = 60000 ms\r\n    17/03/02 14:20:17 INFO RabbitMQDStream: Initialized and validated org.apache.spark.streaming.rabbitmq.distributed.RabbitMQDStream@546621c4\r\n    17/03/02 14:20:17 INFO ForEachDStream: Slide time = 60000 ms\r\n    17/03/02 14:20:17 INFO ForEachDStream: Storage level = Serialized 1x Replicated\r\n    17/03/02 14:20:17 INFO ForEachDStream: Checkpoint interval = null\r\n    17/03/02 14:20:17 INFO ForEachDStream: Remember interval = 60000 ms\r\n    17/03/02 14:20:17 INFO ForEachDStream: Initialized and validated org.apache.spark.streaming.dstream.ForEachDStream@49c6ddef\r\n    17/03/02 14:20:17 INFO RecurringTimer: Started timer for JobGenerator at time 1488493260000\r\n    17/03/02 14:20:17 INFO JobGenerator: Started JobGenerator at 1488493260000 ms\r\n    17/03/02 14:20:17 INFO JobScheduler: Started JobScheduler\r\n    17/03/02 14:20:17 INFO StreamingContext: StreamingContext started\r\n    17/03/02 14:21:00 INFO JobScheduler: Added jobs for time 1488493260000 ms\r\n    17/03/02 14:21:00 INFO JobScheduler: Starting job streaming job 1488493260000 ms.0 from job set of time 1488493260000 ms\r\n    17/03/02 14:21:00 INFO SparkContext: Starting job: print at RabbitMonitor.scala:94\r\n    17/03/02 14:21:00 INFO DAGScheduler: Got job 0 (print at RabbitMonitor.scala:94) with 1 output partitions\r\n    17/03/02 14:21:00 INFO DAGScheduler: Final stage: ResultStage 0 (print at RabbitMonitor.scala:94)\r\n    17/03/02 14:21:00 INFO DAGScheduler: Parents of final stage: List()\r\n    17/03/02 14:21:00 INFO DAGScheduler: Missing parents: List()\r\n    17/03/02 14:21:00 INFO DAGScheduler: Submitting ResultStage 0 (RabbitMQRDD[0] at createDistributedStream at RabbitMonitor.scala:93), which has no missing parents\r\n    17/03/02 14:21:00 INFO MemoryStore: Block broadcast_0 stored as values in memory (estimated size 2.7 KB, free 366.3 MB)\r\n    17/03/02 14:21:00 INFO MemoryStore: Block broadcast_0_piece0 stored as bytes in memory (estimated size 1752.0 B, free 366.3 MB)\r\n    17/03/02 14:21:00 INFO BlockManagerInfo: Added broadcast_0_piece0 in memory on 192.168.1.11:33276 (size: 1752.0 B, free: 366.3 MB)\r\n    17/03/02 14:21:00 INFO SparkContext: Created broadcast 0 from broadcast at DAGScheduler.scala:996\r\n    17/03/02 14:21:00 INFO DAGScheduler: Submitting 1 missing tasks from ResultStage 0 (RabbitMQRDD[0] at createDistributedStream at RabbitMonitor.scala:93)\r\n    17/03/02 14:21:00 INFO TaskSchedulerImpl: Adding task set 0.0 with 1 tasks\r\n    17/03/02 14:21:00 INFO TaskSetManager: Starting task 0.0 in stage 0.0 (TID 0, localhost, executor driver, partition 0, ANY, 7744 bytes)\r\n    17/03/02 14:21:00 INFO Executor: Running task 0.0 in stage 0.0 (TID 0)\r\n    17/03/02 14:21:00 INFO Executor: Fetching spark://192.168.1.11:34701/jars/project.jar with timestamp 1488493216614\r\n    17/03/02 14:21:00 INFO TransportClientFactory: Successfully created connection to /192.168.1.11:34701 after 23 ms (0 ms spent in bootstraps)\r\n    17/03/02 14:21:00 INFO Utils: Fetching spark://192.168.1.11:34701/jars/project.jar to /tmp/spark-92b6ff6a-b120-4fd0-ba46-a450eff80636/userFiles-c0a334f3-68fc-495f-8ccd-cfe90e6d0bf8/fetchFileTemp2710654534934784726.tmp\r\n    17/03/02 14:21:00 INFO Executor: Adding file:/tmp/spark-92b6ff6a-b120-4fd0-ba46-a450eff80636/userFiles-c0a334f3-68fc-495f-8ccd-cfe90e6d0bf8/project.jar to class loader\r\n    &lt;removing rabbit queue connection parameters&gt;\r\n    17/03/02 14:21:02 INFO RabbitMQRDD: Receiving data in Partition 0 from  \r\n    &lt;/removing rabbit queue connection parameters&gt;\r\n    17/03/02 14:21:50 WARN BlockManager: Putting block rdd_0_0 failed due to an exception\r\n    17/03/02 14:21:50 WARN BlockManager: Block rdd_0_0 could not be removed as it was not found on disk or in memory\r\n    17/03/02 14:21:50 ERROR Executor: Exception in task 0.0 in stage 0.0 (TID 0)\r\n    java.lang.NoSuchMethodError: shapeless.Lazy.map(Lscala/Function1;)Lshapeless/Lazy;\r\n        at com.sksamuel.avro4s.SchemaFor$.recordBuilder(SchemaFor.scala:447)\r\n        at simpleexample.RabbitMonitor$$anon$3.&lt;init&gt;(RabbitMonitor.scala:70)\r\n        at simpleexample.RabbitMonitor$.simpleexample$RabbitMonitor$$parseArrayEvent$1(RabbitMonitor.scala:70)\r\n        at simpleexample.RabbitMonitor$$anonfun$15.apply(RabbitMonitor.scala:93)\r\n        at simpleexample.RabbitMonitor$$anonfun$15.apply(RabbitMonitor.scala:93)\r\n        at org.apache.spark.streaming.rabbitmq.distributed.RabbitMQRDD$RabbitMQRDDIterator$$anonfun$5.apply(RabbitMQRDD.scala:209)\r\n        at scala.util.Try$.apply(Try.scala:192)\r\n        at org.apache.spark.streaming.rabbitmq.distributed.RabbitMQRDD$RabbitMQRDDIterator.processDelivery(RabbitMQRDD.scala:209)\r\n        at org.apache.spark.streaming.rabbitmq.distributed.RabbitMQRDD$RabbitMQRDDIterator.getNext(RabbitMQRDD.scala:194)\r\n        at org.apache.spark.util.NextIterator.hasNext(NextIterator.scala:73)\r\n        at org.apache.spark.storage.memory.MemoryStore.putIteratorAsValues(MemoryStore.scala:215)\r\n        at org.apache.spark.storage.BlockManager$$anonfun$doPutIterator$1.apply(BlockManager.scala:957)\r\n        at org.apache.spark.storage.BlockManager$$anonfun$doPutIterator$1.apply(BlockManager.scala:948)\r\n        at org.apache.spark.storage.BlockManager.doPut(BlockManager.scala:888)\r\n        at org.apache.spark.storage.BlockManager.doPutIterator(BlockManager.scala:948)\r\n        at org.apache.spark.storage.BlockManager.getOrElseUpdate(BlockManager.scala:694)\r\n        at org.apache.spark.rdd.RDD.getOrCompute(RDD.scala:334)\r\n        at org.apache.spark.rdd.RDD.iterator(RDD.scala:285)\r\n        at org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:87)\r\n        at org.apache.spark.scheduler.Task.run(Task.scala:99)\r\n        at org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:282)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n        at java.lang.Thread.run(Thread.java:745)\r\n    17/03/02 14:21:50 WARN TaskSetManager: Lost task 0.0 in stage 0.0 (TID 0, localhost, executor driver): java.lang.NoSuchMethodError: shapeless.Lazy.map(Lscala/Function1;)Lshapeless/Lazy;\r\n        at com.sksamuel.avro4s.SchemaFor$.recordBuilder(SchemaFor.scala:447)\r\n        at simpleexample.RabbitMonitor$$anon$3.&lt;init&gt;(RabbitMonitor.scala:70)\r\n        at simpleexample.RabbitMonitor$.simpleexample$RabbitMonitor$$parseArrayEvent$1(RabbitMonitor.scala:70)\r\n        at simpleexample.RabbitMonitor$$anonfun$15.apply(RabbitMonitor.scala:93)\r\n        at simpleexample.RabbitMonitor$$anonfun$15.apply(RabbitMonitor.scala:93)\r\n        at org.apache.spark.streaming.rabbitmq.distributed.RabbitMQRDD$RabbitMQRDDIterator$$anonfun$5.apply(RabbitMQRDD.scala:209)\r\n        at scala.util.Try$.apply(Try.scala:192)\r\n        at org.apache.spark.streaming.rabbitmq.distributed.RabbitMQRDD$RabbitMQRDDIterator.processDelivery(RabbitMQRDD.scala:209)\r\n        at org.apache.spark.streaming.rabbitmq.distributed.RabbitMQRDD$RabbitMQRDDIterator.getNext(RabbitMQRDD.scala:194)\r\n        at org.apache.spark.util.NextIterator.hasNext(NextIterator.scala:73)\r\n        at org.apache.spark.storage.memory.MemoryStore.putIteratorAsValues(MemoryStore.scala:215)\r\n        at org.apache.spark.storage.BlockManager$$anonfun$doPutIterator$1.apply(BlockManager.scala:957)\r\n        at org.apache.spark.storage.BlockManager$$anonfun$doPutIterator$1.apply(BlockManager.scala:948)\r\n        at org.apache.spark.storage.BlockManager.doPut(BlockManager.scala:888)\r\n        at org.apache.spark.storage.BlockManager.doPutIterator(BlockManager.scala:948)\r\n        at org.apache.spark.storage.BlockManager.getOrElseUpdate(BlockManager.scala:694)\r\n        at org.apache.spark.rdd.RDD.getOrCompute(RDD.scala:334)\r\n        at org.apache.spark.rdd.RDD.iterator(RDD.scala:285)\r\n        at org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:87)\r\n        at org.apache.spark.scheduler.Task.run(Task.scala:99)\r\n        at org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:282)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n        at java.lang.Thread.run(Thread.java:745)\r\n\r\n    17/03/02 14:21:50 ERROR TaskSetManager: Task 0 in stage 0.0 failed 1 times; aborting job\r\n    17/03/02 14:21:50 INFO TaskSchedulerImpl: Removed TaskSet 0.0, whose tasks have all completed, from pool \r\n    17/03/02 14:21:50 INFO TaskSchedulerImpl: Cancelling stage 0\r\n\r\n\r\nbuild.sbt:\r\n\r\n    retrieveManaged := true\r\n\r\n    lazy val sparkVersion = &quot;2.1.0&quot;\r\n\r\n    scalaVersion in ThisBuild := &quot;2.11.8&quot;\r\n\r\n    lazy val rabbit = (project in file(&quot;rabbit-plugin&quot;)).settings(\r\n        name := &quot;Spark Streaming RabbitMQ Receiver&quot;,\r\n        homepage := Some(url(&quot;https://github.com/Stratio/RabbitMQ-Receiver&quot;)),\r\n        description := &quot;RabbitMQ-Receiver is a library that allows the user to read data with Apache Spark from RabbitMQ.&quot;,\r\n        exportJars := true,\r\n\r\n        assemblyJarName in assembly := &quot;rabbit.jar&quot;,\r\n        test in assembly := {},\r\n\r\n        moduleName := &quot;spark-rabbitmq&quot;,\r\n        organization := &quot;com.stratio.receive&quot;,\r\n        version := &quot;0.6.0&quot;,\r\n\r\n        libraryDependencies ++= Seq(\r\n            &quot;org.apache.spark&quot; %% &quot;spark-core&quot; % sparkVersion % &quot;provided&quot;,\r\n            &quot;org.apache.spark&quot; %% &quot;spark-streaming&quot; % sparkVersion % &quot;provided&quot;, \r\n            &quot;org.apache.spark&quot; %% &quot;spark-sql&quot; % sparkVersion % &quot;provided&quot;, \r\n            &quot;com.typesafe.akka&quot; %% &quot;akka-actor&quot; % &quot;2.4.11&quot;,\r\n            &quot;com.rabbitmq&quot; % &quot;amqp-client&quot; % &quot;3.6.6&quot;,\r\n            &quot;joda-time&quot; % &quot;joda-time&quot; % &quot;2.8.2&quot;,\r\n            &quot;com.github.sstone&quot; %% &quot;amqp-client&quot; % &quot;1.5&quot; % Test,\r\n            &quot;org.scalatest&quot; %% &quot;scalatest&quot; % &quot;2.2.2&quot; % Test,\r\n            &quot;org.scalacheck&quot; %% &quot;scalacheck&quot; % &quot;1.11.3&quot; % Test,\r\n            &quot;junit&quot; % &quot;junit&quot; % &quot;4.12&quot; % Test, \r\n            &quot;com.typesafe.akka&quot; %% &quot;akka-testkit&quot; % &quot;2.4.11&quot; % Test\r\n            ) \r\n    )\r\n\r\n    lazy val root = (project in file(&quot;connector&quot;)).settings(\r\n        name := &quot;Connector from Rabbit to Kafka queue&quot;,\r\n        description := &quot;&quot;,\r\n        exportJars := true,\r\n\r\n        test in assembly := {},\r\n        assemblyJarName in assembly := &quot;project.jar&quot;,\r\n\r\n        libraryDependencies ++= Seq(\r\n            &quot;org.apache.spark&quot; %% &quot;spark-core&quot; % sparkVersion % &quot;provided&quot;,\r\n            &quot;org.apache.spark&quot; %% &quot;spark-streaming&quot; % sparkVersion % &quot;provided&quot;,\r\n            &quot;com.thenewmotion&quot; %% &quot;akka-rabbitmq&quot; % &quot;3.0.0&quot;,\r\n            &quot;org.apache.kafka&quot; % &quot;kafka_2.10&quot; % &quot;0.10.1.1&quot;,\r\n            &quot;com.sksamuel.avro4s&quot; %% &quot;avro4s-core&quot; % &quot;1.6.4&quot;\r\n            ) \r\n    ) dependsOn rabbit\r\n\r\nI am also using assembly to put together a &quot;fat jar&quot; for spark (`addSbtPlugin(&quot;com.eed3si9n&quot; % &quot;sbt-assembly&quot; % &quot;0.14.4&quot;)`) and using the command `sbt assembly` to produce the jar used in both examples above. I&#39;m running Spark 2.1.0. \r\n\r\nI&#39;m relatively new to the Spark / Scala ecosystem so hopefully this is a problem with my build settings. It makes no sense that shapeless would be unavailable in Spark.","title":"NoSuchMethodError in shapeless seen only in Spark","body":"<p>I am trying to write a Spark connector to pull AVRO messages off a RabbitMQ message queue. When decoding the AVRO messages, there is a NoSuchMethodError error that occurs only when running in Spark. </p>\n\n<p>I could not reproduce the Spark code exactly outside of spark, but I believe the two examples are sufficiently similar. I think this is the smallest code that reproduces the same scenario.</p>\n\n<p>I've removed all the connection parameters both because the information is private and the connection does not appear to be the issue.</p>\n\n<p>Spark code:</p>\n\n<pre><code>package simpleexample\n\nimport org.apache.spark.SparkConf\nimport org.apache.spark.streaming.rabbitmq.distributed.RabbitMQDistributedKey\nimport org.apache.spark.streaming.rabbitmq.models.ExchangeAndRouting\nimport org.apache.spark.streaming.rabbitmq.RabbitMQUtils\nimport org.apache.spark.streaming.{Seconds, StreamingContext}\nimport org.apache.spark.storage.StorageLevel\n\nimport org.apache.kafka.clients.producer.{KafkaProducer, ProducerRecord}\n\nimport com.sksamuel.avro4s._\n\nimport java.io.{ByteArrayInputStream, ByteArrayOutputStream}\nimport com.rabbitmq.client.QueueingConsumer.Delivery\nimport java.util.HashMap\n\n\ncase class AttributeTuple(attrName: String, attrValue: String)\n\n// AVRO Schema for Events\n\ncase class DeviceEvent(\n    tenantName: String, \n    groupName: String, \n    subgroupName: String, \n    eventType: String, \n    eventSource: String,\n    deviceTypeName: String,\n    deviceId: Int,\n    timestamp: Long,\n    attribute: AttributeTuple\n)\n\nobject RabbitMonitor {\n  def main(args: Array[String]) {\n    println(\"start\")\n\n    val sparkConf = new SparkConf().setMaster(\"local[2]\").setAppName(\"RabbitMonitor\")\n    val ssc = new StreamingContext(sparkConf, Seconds(60))\n\n    def parseArrayEvent(delivery: Delivery): Seq[DeviceEvent] = {\n        val in = new ByteArrayInputStream(delivery.getBody())\n        val input = AvroInputStream.binary[DeviceEvent](in)\n        input.iterator.toSeq\n    }\n\n    val params: Map[String, String] = Map(\n        /* many rabbit connection parameters */\n        \"maxReceiveTime\" -&gt; \"60000\" // 60s\n      )\n\n    val distributedKey = Seq(\n        RabbitMQDistributedKey(\n          /* queue name */, \n          new ExchangeAndRouting(/* exchange name */, /* routing key */),\n          params\n        )\n    )\n\n    var events = RabbitMQUtils.createDistributedStream[Seq[DeviceEvent]](ssc, distributedKey, params, parseArrayEvent)\n    events.print()\n\n    ssc.start()\n    ssc.awaitTermination()\n  }\n}\n</code></pre>\n\n<p>Non-Spark code:</p>\n\n<pre><code>package simpleexample\n\nimport com.thenewmotion.akka.rabbitmq._\nimport akka.actor._\n// avoid name collision with rabbitmq channel\nimport scala.concurrent.{Channel =&gt; BasicChannel}\nimport scala.concurrent.ExecutionContext.Implicits.global\n\nimport com.sksamuel.avro4s._\nimport java.io.{ByteArrayInputStream, ByteArrayOutputStream}\n\nobject Test extends App {\n    implicit val system = ActorSystem()\n\n    val factory = new ConnectionFactory()\n    /* Set connection parameters*/\n    val exchange: String = /* exchange name */\n\n    val connection: ActorRef = system.actorOf(ConnectionActor.props(factory), \"rabbitmq\")\n\n    def setupSubscriber(channel: Channel, self: ActorRef) {\n        val queue = channel.queueDeclare().getQueue\n        channel.queueBind(queue, exchange, /* routing key */)\n        val consumer = new DefaultConsumer(channel) {\n          override def handleDelivery(consumerTag: String, envelope: Envelope, properties: BasicProperties, body: Array[Byte]) {\n            val in = new ByteArrayInputStream(body)\n            val input = AvroInputStream.binary[DeviceEvent](in)\n            val result = input.iterator.toSeq\n            println(result)\n          }\n        }\n\n        channel.basicConsume(queue, true, consumer)\n      }\n\n    connection ! CreateChannel(ChannelActor.props(setupSubscriber), Some(\"eventSubscriber\"))\n\n\n    scala.concurrent.Future {\n        def loop(n: Long) {\n            Thread.sleep(1000)\n            if (n &lt; 30) {\n                loop(n + 1)\n            }\n        }\n        loop(0)\n    }\n}\n</code></pre>\n\n<p>Non-Spark Output (the last line is a successfully decoded update):</p>\n\n<pre><code>drex@drexThinkPad:~/src/scala/so-repro/connector/target/scala-2.11$ scala project.jar \n[INFO] [03/02/2017 14:11:06.899] [default-akka.actor.default-dispatcher-4] [akka://default/deadLetters] Message [com.thenewmotion.akka.rabbitmq.ChannelCreated] from Actor[akka://default/user/rabbitmq#-889215077] to Actor[akka://default/deadLetters] was not delivered. [1] dead letters encountered. This logging can be turned off or adjusted with configuration settings 'akka.log-dead-letters' and 'akka.log-dead-letters-during-shutdown'.\n[INFO] [03/02/2017 14:11:07.337] [default-akka.actor.default-dispatcher-3] [akka://default/user/rabbitmq] akka://default/user/rabbitmq connected to amqp://&lt;rabbit info&gt;\n[INFO] [03/02/2017 14:11:07.509] [default-akka.actor.default-dispatcher-4] [akka://default/user/rabbitmq/eventSubscriber] akka://default/user/rabbitmq/eventSubscriber connected\nStream(DeviceEvent(int,na,d01,deviceAttrUpdate,device,TestDeviceType,33554434,1488492704421,AttributeTuple(temperature,60)), ?)\n</code></pre>\n\n<p>Spark Output: </p>\n\n<pre><code>drex@drexThinkPad:~/src/scala/so-repro/connector/target/scala-2.11$ spark-submit ./project.jar --class RabbitMonitor\nstart\nUsing Spark's default log4j profile: org/apache/spark/log4j-defaults.properties\n17/03/02 14:20:15 INFO SparkContext: Running Spark version 2.1.0\n17/03/02 14:20:15 WARN NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable\n17/03/02 14:20:16 WARN Utils: Your hostname, drexThinkPad resolves to a loopback address: 127.0.1.1; using 192.168.1.11 instead (on interface wlp3s0)\n17/03/02 14:20:16 WARN Utils: Set SPARK_LOCAL_IP if you need to bind to another address\n17/03/02 14:20:16 INFO SecurityManager: Changing view acls to: drex\n17/03/02 14:20:16 INFO SecurityManager: Changing modify acls to: drex\n17/03/02 14:20:16 INFO SecurityManager: Changing view acls groups to: \n17/03/02 14:20:16 INFO SecurityManager: Changing modify acls groups to: \n17/03/02 14:20:16 INFO SecurityManager: SecurityManager: authentication disabled; ui acls disabled; users  with view permissions: Set(drex); groups with view permissions: Set(); users  with modify permissions: Set(drex); groups with modify permissions: Set()\n17/03/02 14:20:16 INFO Utils: Successfully started service 'sparkDriver' on port 34701.\n17/03/02 14:20:16 INFO SparkEnv: Registering MapOutputTracker\n17/03/02 14:20:16 INFO SparkEnv: Registering BlockManagerMaster\n17/03/02 14:20:16 INFO BlockManagerMasterEndpoint: Using org.apache.spark.storage.DefaultTopologyMapper for getting topology information\n17/03/02 14:20:16 INFO BlockManagerMasterEndpoint: BlockManagerMasterEndpoint up\n17/03/02 14:20:16 INFO DiskBlockManager: Created local directory at /tmp/blockmgr-5cbb13bf-78fe-4227-81b3-1afea40f899a\n17/03/02 14:20:16 INFO MemoryStore: MemoryStore started with capacity 366.3 MB\n17/03/02 14:20:16 INFO SparkEnv: Registering OutputCommitCoordinator\n17/03/02 14:20:16 INFO Utils: Successfully started service 'SparkUI' on port 4040.\n17/03/02 14:20:16 INFO SparkUI: Bound SparkUI to 0.0.0.0, and started at http://192.168.1.11:4040\n17/03/02 14:20:16 INFO SparkContext: Added JAR file:/home/drex/src/scala/so-repro/connector/target/scala-2.11/./project.jar at spark://192.168.1.11:34701/jars/project.jar with timestamp 1488493216614\n17/03/02 14:20:16 INFO Executor: Starting executor ID driver on host localhost\n17/03/02 14:20:16 INFO Utils: Successfully started service 'org.apache.spark.network.netty.NettyBlockTransferService' on port 33276.\n17/03/02 14:20:16 INFO NettyBlockTransferService: Server created on 192.168.1.11:33276\n17/03/02 14:20:16 INFO BlockManager: Using org.apache.spark.storage.RandomBlockReplicationPolicy for block replication policy\n17/03/02 14:20:16 INFO BlockManagerMaster: Registering BlockManager BlockManagerId(driver, 192.168.1.11, 33276, None)\n17/03/02 14:20:16 INFO BlockManagerMasterEndpoint: Registering block manager 192.168.1.11:33276 with 366.3 MB RAM, BlockManagerId(driver, 192.168.1.11, 33276, None)\n17/03/02 14:20:16 INFO BlockManagerMaster: Registered BlockManager BlockManagerId(driver, 192.168.1.11, 33276, None)\n17/03/02 14:20:16 INFO BlockManager: Initialized BlockManager: BlockManagerId(driver, 192.168.1.11, 33276, None)\n17/03/02 14:20:17 INFO RabbitMQDStream: Duration for remembering RDDs set to 60000 ms for org.apache.spark.streaming.rabbitmq.distributed.RabbitMQDStream@546621c4\n17/03/02 14:20:17 INFO RabbitMQDStream: Slide time = 60000 ms\n17/03/02 14:20:17 INFO RabbitMQDStream: Storage level = Memory Deserialized 1x Replicated\n17/03/02 14:20:17 INFO RabbitMQDStream: Checkpoint interval = null\n17/03/02 14:20:17 INFO RabbitMQDStream: Remember interval = 60000 ms\n17/03/02 14:20:17 INFO RabbitMQDStream: Initialized and validated org.apache.spark.streaming.rabbitmq.distributed.RabbitMQDStream@546621c4\n17/03/02 14:20:17 INFO ForEachDStream: Slide time = 60000 ms\n17/03/02 14:20:17 INFO ForEachDStream: Storage level = Serialized 1x Replicated\n17/03/02 14:20:17 INFO ForEachDStream: Checkpoint interval = null\n17/03/02 14:20:17 INFO ForEachDStream: Remember interval = 60000 ms\n17/03/02 14:20:17 INFO ForEachDStream: Initialized and validated org.apache.spark.streaming.dstream.ForEachDStream@49c6ddef\n17/03/02 14:20:17 INFO RecurringTimer: Started timer for JobGenerator at time 1488493260000\n17/03/02 14:20:17 INFO JobGenerator: Started JobGenerator at 1488493260000 ms\n17/03/02 14:20:17 INFO JobScheduler: Started JobScheduler\n17/03/02 14:20:17 INFO StreamingContext: StreamingContext started\n17/03/02 14:21:00 INFO JobScheduler: Added jobs for time 1488493260000 ms\n17/03/02 14:21:00 INFO JobScheduler: Starting job streaming job 1488493260000 ms.0 from job set of time 1488493260000 ms\n17/03/02 14:21:00 INFO SparkContext: Starting job: print at RabbitMonitor.scala:94\n17/03/02 14:21:00 INFO DAGScheduler: Got job 0 (print at RabbitMonitor.scala:94) with 1 output partitions\n17/03/02 14:21:00 INFO DAGScheduler: Final stage: ResultStage 0 (print at RabbitMonitor.scala:94)\n17/03/02 14:21:00 INFO DAGScheduler: Parents of final stage: List()\n17/03/02 14:21:00 INFO DAGScheduler: Missing parents: List()\n17/03/02 14:21:00 INFO DAGScheduler: Submitting ResultStage 0 (RabbitMQRDD[0] at createDistributedStream at RabbitMonitor.scala:93), which has no missing parents\n17/03/02 14:21:00 INFO MemoryStore: Block broadcast_0 stored as values in memory (estimated size 2.7 KB, free 366.3 MB)\n17/03/02 14:21:00 INFO MemoryStore: Block broadcast_0_piece0 stored as bytes in memory (estimated size 1752.0 B, free 366.3 MB)\n17/03/02 14:21:00 INFO BlockManagerInfo: Added broadcast_0_piece0 in memory on 192.168.1.11:33276 (size: 1752.0 B, free: 366.3 MB)\n17/03/02 14:21:00 INFO SparkContext: Created broadcast 0 from broadcast at DAGScheduler.scala:996\n17/03/02 14:21:00 INFO DAGScheduler: Submitting 1 missing tasks from ResultStage 0 (RabbitMQRDD[0] at createDistributedStream at RabbitMonitor.scala:93)\n17/03/02 14:21:00 INFO TaskSchedulerImpl: Adding task set 0.0 with 1 tasks\n17/03/02 14:21:00 INFO TaskSetManager: Starting task 0.0 in stage 0.0 (TID 0, localhost, executor driver, partition 0, ANY, 7744 bytes)\n17/03/02 14:21:00 INFO Executor: Running task 0.0 in stage 0.0 (TID 0)\n17/03/02 14:21:00 INFO Executor: Fetching spark://192.168.1.11:34701/jars/project.jar with timestamp 1488493216614\n17/03/02 14:21:00 INFO TransportClientFactory: Successfully created connection to /192.168.1.11:34701 after 23 ms (0 ms spent in bootstraps)\n17/03/02 14:21:00 INFO Utils: Fetching spark://192.168.1.11:34701/jars/project.jar to /tmp/spark-92b6ff6a-b120-4fd0-ba46-a450eff80636/userFiles-c0a334f3-68fc-495f-8ccd-cfe90e6d0bf8/fetchFileTemp2710654534934784726.tmp\n17/03/02 14:21:00 INFO Executor: Adding file:/tmp/spark-92b6ff6a-b120-4fd0-ba46-a450eff80636/userFiles-c0a334f3-68fc-495f-8ccd-cfe90e6d0bf8/project.jar to class loader\n&lt;removing rabbit queue connection parameters&gt;\n17/03/02 14:21:02 INFO RabbitMQRDD: Receiving data in Partition 0 from  \n&lt;/removing rabbit queue connection parameters&gt;\n17/03/02 14:21:50 WARN BlockManager: Putting block rdd_0_0 failed due to an exception\n17/03/02 14:21:50 WARN BlockManager: Block rdd_0_0 could not be removed as it was not found on disk or in memory\n17/03/02 14:21:50 ERROR Executor: Exception in task 0.0 in stage 0.0 (TID 0)\njava.lang.NoSuchMethodError: shapeless.Lazy.map(Lscala/Function1;)Lshapeless/Lazy;\n    at com.sksamuel.avro4s.SchemaFor$.recordBuilder(SchemaFor.scala:447)\n    at simpleexample.RabbitMonitor$$anon$3.&lt;init&gt;(RabbitMonitor.scala:70)\n    at simpleexample.RabbitMonitor$.simpleexample$RabbitMonitor$$parseArrayEvent$1(RabbitMonitor.scala:70)\n    at simpleexample.RabbitMonitor$$anonfun$15.apply(RabbitMonitor.scala:93)\n    at simpleexample.RabbitMonitor$$anonfun$15.apply(RabbitMonitor.scala:93)\n    at org.apache.spark.streaming.rabbitmq.distributed.RabbitMQRDD$RabbitMQRDDIterator$$anonfun$5.apply(RabbitMQRDD.scala:209)\n    at scala.util.Try$.apply(Try.scala:192)\n    at org.apache.spark.streaming.rabbitmq.distributed.RabbitMQRDD$RabbitMQRDDIterator.processDelivery(RabbitMQRDD.scala:209)\n    at org.apache.spark.streaming.rabbitmq.distributed.RabbitMQRDD$RabbitMQRDDIterator.getNext(RabbitMQRDD.scala:194)\n    at org.apache.spark.util.NextIterator.hasNext(NextIterator.scala:73)\n    at org.apache.spark.storage.memory.MemoryStore.putIteratorAsValues(MemoryStore.scala:215)\n    at org.apache.spark.storage.BlockManager$$anonfun$doPutIterator$1.apply(BlockManager.scala:957)\n    at org.apache.spark.storage.BlockManager$$anonfun$doPutIterator$1.apply(BlockManager.scala:948)\n    at org.apache.spark.storage.BlockManager.doPut(BlockManager.scala:888)\n    at org.apache.spark.storage.BlockManager.doPutIterator(BlockManager.scala:948)\n    at org.apache.spark.storage.BlockManager.getOrElseUpdate(BlockManager.scala:694)\n    at org.apache.spark.rdd.RDD.getOrCompute(RDD.scala:334)\n    at org.apache.spark.rdd.RDD.iterator(RDD.scala:285)\n    at org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:87)\n    at org.apache.spark.scheduler.Task.run(Task.scala:99)\n    at org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:282)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n17/03/02 14:21:50 WARN TaskSetManager: Lost task 0.0 in stage 0.0 (TID 0, localhost, executor driver): java.lang.NoSuchMethodError: shapeless.Lazy.map(Lscala/Function1;)Lshapeless/Lazy;\n    at com.sksamuel.avro4s.SchemaFor$.recordBuilder(SchemaFor.scala:447)\n    at simpleexample.RabbitMonitor$$anon$3.&lt;init&gt;(RabbitMonitor.scala:70)\n    at simpleexample.RabbitMonitor$.simpleexample$RabbitMonitor$$parseArrayEvent$1(RabbitMonitor.scala:70)\n    at simpleexample.RabbitMonitor$$anonfun$15.apply(RabbitMonitor.scala:93)\n    at simpleexample.RabbitMonitor$$anonfun$15.apply(RabbitMonitor.scala:93)\n    at org.apache.spark.streaming.rabbitmq.distributed.RabbitMQRDD$RabbitMQRDDIterator$$anonfun$5.apply(RabbitMQRDD.scala:209)\n    at scala.util.Try$.apply(Try.scala:192)\n    at org.apache.spark.streaming.rabbitmq.distributed.RabbitMQRDD$RabbitMQRDDIterator.processDelivery(RabbitMQRDD.scala:209)\n    at org.apache.spark.streaming.rabbitmq.distributed.RabbitMQRDD$RabbitMQRDDIterator.getNext(RabbitMQRDD.scala:194)\n    at org.apache.spark.util.NextIterator.hasNext(NextIterator.scala:73)\n    at org.apache.spark.storage.memory.MemoryStore.putIteratorAsValues(MemoryStore.scala:215)\n    at org.apache.spark.storage.BlockManager$$anonfun$doPutIterator$1.apply(BlockManager.scala:957)\n    at org.apache.spark.storage.BlockManager$$anonfun$doPutIterator$1.apply(BlockManager.scala:948)\n    at org.apache.spark.storage.BlockManager.doPut(BlockManager.scala:888)\n    at org.apache.spark.storage.BlockManager.doPutIterator(BlockManager.scala:948)\n    at org.apache.spark.storage.BlockManager.getOrElseUpdate(BlockManager.scala:694)\n    at org.apache.spark.rdd.RDD.getOrCompute(RDD.scala:334)\n    at org.apache.spark.rdd.RDD.iterator(RDD.scala:285)\n    at org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:87)\n    at org.apache.spark.scheduler.Task.run(Task.scala:99)\n    at org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:282)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n\n17/03/02 14:21:50 ERROR TaskSetManager: Task 0 in stage 0.0 failed 1 times; aborting job\n17/03/02 14:21:50 INFO TaskSchedulerImpl: Removed TaskSet 0.0, whose tasks have all completed, from pool \n17/03/02 14:21:50 INFO TaskSchedulerImpl: Cancelling stage 0\n</code></pre>\n\n<p>build.sbt:</p>\n\n<pre><code>retrieveManaged := true\n\nlazy val sparkVersion = \"2.1.0\"\n\nscalaVersion in ThisBuild := \"2.11.8\"\n\nlazy val rabbit = (project in file(\"rabbit-plugin\")).settings(\n    name := \"Spark Streaming RabbitMQ Receiver\",\n    homepage := Some(url(\"https://github.com/Stratio/RabbitMQ-Receiver\")),\n    description := \"RabbitMQ-Receiver is a library that allows the user to read data with Apache Spark from RabbitMQ.\",\n    exportJars := true,\n\n    assemblyJarName in assembly := \"rabbit.jar\",\n    test in assembly := {},\n\n    moduleName := \"spark-rabbitmq\",\n    organization := \"com.stratio.receive\",\n    version := \"0.6.0\",\n\n    libraryDependencies ++= Seq(\n        \"org.apache.spark\" %% \"spark-core\" % sparkVersion % \"provided\",\n        \"org.apache.spark\" %% \"spark-streaming\" % sparkVersion % \"provided\", \n        \"org.apache.spark\" %% \"spark-sql\" % sparkVersion % \"provided\", \n        \"com.typesafe.akka\" %% \"akka-actor\" % \"2.4.11\",\n        \"com.rabbitmq\" % \"amqp-client\" % \"3.6.6\",\n        \"joda-time\" % \"joda-time\" % \"2.8.2\",\n        \"com.github.sstone\" %% \"amqp-client\" % \"1.5\" % Test,\n        \"org.scalatest\" %% \"scalatest\" % \"2.2.2\" % Test,\n        \"org.scalacheck\" %% \"scalacheck\" % \"1.11.3\" % Test,\n        \"junit\" % \"junit\" % \"4.12\" % Test, \n        \"com.typesafe.akka\" %% \"akka-testkit\" % \"2.4.11\" % Test\n        ) \n)\n\nlazy val root = (project in file(\"connector\")).settings(\n    name := \"Connector from Rabbit to Kafka queue\",\n    description := \"\",\n    exportJars := true,\n\n    test in assembly := {},\n    assemblyJarName in assembly := \"project.jar\",\n\n    libraryDependencies ++= Seq(\n        \"org.apache.spark\" %% \"spark-core\" % sparkVersion % \"provided\",\n        \"org.apache.spark\" %% \"spark-streaming\" % sparkVersion % \"provided\",\n        \"com.thenewmotion\" %% \"akka-rabbitmq\" % \"3.0.0\",\n        \"org.apache.kafka\" % \"kafka_2.10\" % \"0.10.1.1\",\n        \"com.sksamuel.avro4s\" %% \"avro4s-core\" % \"1.6.4\"\n        ) \n) dependsOn rabbit\n</code></pre>\n\n<p>I am also using assembly to put together a \"fat jar\" for spark (<code>addSbtPlugin(\"com.eed3si9n\" % \"sbt-assembly\" % \"0.14.4\")</code>) and using the command <code>sbt assembly</code> to produce the jar used in both examples above. I'm running Spark 2.1.0. </p>\n\n<p>I'm relatively new to the Spark / Scala ecosystem so hopefully this is a problem with my build settings. It makes no sense that shapeless would be unavailable in Spark.</p>\n"},{"tags":["java","elasticsearch","apache-httpclient-5.x"],"comments":[{"owner":{"account_id":3896512,"reputation":193,"user_id":3225404,"display_name":"lia"},"score":1,"creation_date":1677235903,"post_id":72676450,"comment_id":133302186,"body_markdown":"I have the same issue with elastic rest client 7.13.2 \nHave you found the solution and the cause of the error? please share it if you have fixed the problem.","body":"I have the same issue with elastic rest client 7.13.2  Have you found the solution and the cause of the error? please share it if you have fixed the problem."},{"owner":{"account_id":10645250,"reputation":3023,"user_id":7838169,"display_name":"badger"},"score":0,"creation_date":1677239763,"post_id":72676450,"comment_id":133303226,"body_markdown":"@lia actually I couldn&#39;t find a solution, but as a work around I defined the scope of  the RestHighLevelClient as prototype, so each thread will receive a new resthighlevelclient.","body":"@lia actually I couldn&#39;t find a solution, but as a work around I defined the scope of  the RestHighLevelClient as prototype, so each thread will receive a new resthighlevelclient."}],"owner":{"account_id":10645250,"reputation":3023,"user_id":7838169,"display_name":"badger"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1038,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":0,"score":4,"last_activity_date":1661051569,"creation_date":1655637807,"question_id":72676450,"body_markdown":"I am using Elasticsearch client version 7.15.2 \r\n\r\nhere is my `Pom.xml`\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.elasticsearch&lt;/groupId&gt;\r\n        &lt;artifactId&gt;elasticsearch&lt;/artifactId&gt;\r\n        &lt;version&gt;7.15.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.elasticsearch.client&lt;/groupId&gt;\r\n        &lt;artifactId&gt;elasticsearch-rest-client&lt;/artifactId&gt;\r\n        &lt;version&gt;7.15.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.elasticsearch.client&lt;/groupId&gt;\r\n        &lt;artifactId&gt;elasticsearch-rest-high-level-client&lt;/artifactId&gt;\r\n        &lt;version&gt;7.15.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nwe use Elasticsearch as service and other company provided us an IP/port to connect to it.\r\n\r\nhere is my configuration for `RestHighLevelClient`\r\n\r\n    @Bean\r\n    public RestHighLevelClient getElasticSearchClient() {\r\n        String encoding = Base64.getEncoder().encodeToString((username + &quot;:&quot; + password).getBytes());\r\n        Header[] headers = {\r\n              new BasicHeader(HttpHeaders.CONTENT_TYPE, &quot;application/json;charset=utf-8&quot;),\r\n              new BasicHeader(HttpHeaders.ACCEPT, &quot;application/json&quot;),\r\n              new BasicHeader(HttpHeaders.ACCESS_CONTROL_ALLOW_ORIGIN, &quot;*&quot;),\r\n              new BasicHeader(HttpHeaders.ACCESS_CONTROL_ALLOW_METHODS, &quot;GET, PUT, POST, DELETE, OPTIONS&quot;),\r\n              new BasicHeader(HttpHeaders.ACCESS_CONTROL_ALLOW_HEADERS,\r\n                    &quot;X-Requested-With,X-Auth-Token,Content-Type, Content-Length, Authorization&quot;),\r\n              new BasicHeader(HttpHeaders.AUTHORIZATION, &quot;basic &quot; + encoding)};\r\n\r\n        return new RestHighLevelClient(RestClient\r\n              .builder(new HttpHost(elasticSearchIp, elasticSearchPort))\r\n              .setHttpClientConfigCallback(configurer -&gt; {\r\n                  configurer.setMaxConnTotal(maxConnection);\r\n                  configurer.setMaxConnPerRoute(Math.max(30, maxConnection / 10));\r\n                  configurer.setKeepAliveStrategy((httpResponse, httpContext) -&gt; keepAlive * 60 * 1000);\r\n                  configurer.setDefaultIOReactorConfig(\r\n                        IOReactorConfig.custom().setIoThreadCount(Math.min(ioThreadCount, 15)).build());\r\n                  return configurer;\r\n              })\r\n              .setRequestConfigCallback(configurer -&gt; {\r\n                  configurer.setSocketTimeout(socketTimeout * 60 * 1000);\r\n                  configurer.setConnectTimeout(connectionTimeout * 60 * 1000);\r\n                  configurer.setConnectionRequestTimeout(0);\r\n                  configurer.setContentCompressionEnabled(true);\r\n                  return configurer;\r\n              })\r\n              .setCompressionEnabled(true)\r\n              .setDefaultHeaders(headers));\r\n    }\r\n\r\nwe run heavy, numerous, automated queries against this Elasticsearch and sometimes I‌ see in the logs that the only Ip/port for this Elasticsearch gets blacklisted\r\n\r\n    [DEBUG]-2022/06/19 11:28:01-[http-nio-6060-exec-14]-RestClient.onFailure(514) - added [[host=http://xx.xx.xx.xx:3500]] to blacklist\r\n    [DEBUG]-2022/06/19 11:28:01-[http-nio-6060-exec-7]-RestClient.onFailure(521) - updated [[host=http://xx.xx.xx.xx:3500]] already in blacklist\r\n\r\n 1. How can I prevent this behavior(I mean blacklisting IP/port)?\r\n 2. Is my configuration convenient for heavy, numerous, automated queries?\r\n\r\n","title":"How to prevent RestHighLevelClient from blacklisting the Host?","body":"<p>I am using Elasticsearch client version 7.15.2</p>\n<p>here is my <code>Pom.xml</code></p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.elasticsearch&lt;/groupId&gt;\n    &lt;artifactId&gt;elasticsearch&lt;/artifactId&gt;\n    &lt;version&gt;7.15.2&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.elasticsearch.client&lt;/groupId&gt;\n    &lt;artifactId&gt;elasticsearch-rest-client&lt;/artifactId&gt;\n    &lt;version&gt;7.15.2&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.elasticsearch.client&lt;/groupId&gt;\n    &lt;artifactId&gt;elasticsearch-rest-high-level-client&lt;/artifactId&gt;\n    &lt;version&gt;7.15.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>we use Elasticsearch as service and other company provided us an IP/port to connect to it.</p>\n<p>here is my configuration for <code>RestHighLevelClient</code></p>\n<pre><code>@Bean\npublic RestHighLevelClient getElasticSearchClient() {\n    String encoding = Base64.getEncoder().encodeToString((username + &quot;:&quot; + password).getBytes());\n    Header[] headers = {\n          new BasicHeader(HttpHeaders.CONTENT_TYPE, &quot;application/json;charset=utf-8&quot;),\n          new BasicHeader(HttpHeaders.ACCEPT, &quot;application/json&quot;),\n          new BasicHeader(HttpHeaders.ACCESS_CONTROL_ALLOW_ORIGIN, &quot;*&quot;),\n          new BasicHeader(HttpHeaders.ACCESS_CONTROL_ALLOW_METHODS, &quot;GET, PUT, POST, DELETE, OPTIONS&quot;),\n          new BasicHeader(HttpHeaders.ACCESS_CONTROL_ALLOW_HEADERS,\n                &quot;X-Requested-With,X-Auth-Token,Content-Type, Content-Length, Authorization&quot;),\n          new BasicHeader(HttpHeaders.AUTHORIZATION, &quot;basic &quot; + encoding)};\n\n    return new RestHighLevelClient(RestClient\n          .builder(new HttpHost(elasticSearchIp, elasticSearchPort))\n          .setHttpClientConfigCallback(configurer -&gt; {\n              configurer.setMaxConnTotal(maxConnection);\n              configurer.setMaxConnPerRoute(Math.max(30, maxConnection / 10));\n              configurer.setKeepAliveStrategy((httpResponse, httpContext) -&gt; keepAlive * 60 * 1000);\n              configurer.setDefaultIOReactorConfig(\n                    IOReactorConfig.custom().setIoThreadCount(Math.min(ioThreadCount, 15)).build());\n              return configurer;\n          })\n          .setRequestConfigCallback(configurer -&gt; {\n              configurer.setSocketTimeout(socketTimeout * 60 * 1000);\n              configurer.setConnectTimeout(connectionTimeout * 60 * 1000);\n              configurer.setConnectionRequestTimeout(0);\n              configurer.setContentCompressionEnabled(true);\n              return configurer;\n          })\n          .setCompressionEnabled(true)\n          .setDefaultHeaders(headers));\n}\n</code></pre>\n<p>we run heavy, numerous, automated queries against this Elasticsearch and sometimes I‌ see in the logs that the only Ip/port for this Elasticsearch gets blacklisted</p>\n<pre><code>[DEBUG]-2022/06/19 11:28:01-[http-nio-6060-exec-14]-RestClient.onFailure(514) - added [[host=http://xx.xx.xx.xx:3500]] to blacklist\n[DEBUG]-2022/06/19 11:28:01-[http-nio-6060-exec-7]-RestClient.onFailure(521) - updated [[host=http://xx.xx.xx.xx:3500]] already in blacklist\n</code></pre>\n<ol>\n<li>How can I prevent this behavior(I mean blacklisting IP/port)?</li>\n<li>Is my configuration convenient for heavy, numerous, automated queries?</li>\n</ol>\n"},{"tags":["java","spring","timer","camunda","camunda-modeler"],"comments":[{"owner":{"account_id":1742788,"reputation":201,"user_id":1593719,"accept_rate":40,"display_name":"Lauri"},"score":0,"creation_date":1681645109,"post_id":73431340,"comment_id":134086805,"body_markdown":"Not answer, but rather a finding.\nIt might be the correct behaviour https://docs.oracle.com/cd/E23943_01/doc.1111/e15176/timers_bpmpd.htm#BPMPD581\n\nIt says: When you configure a timer intermediate event as a cycle, the timer event only runs one time. It waits until the specified interval passes and then the token continues moving through the rest of the process flow.","body":"Not answer, but rather a finding. It might be the correct behaviour <a href=\"https://docs.oracle.com/cd/E23943_01/doc.1111/e15176/timers_bpmpd.htm#BPMPD581\" rel=\"nofollow noreferrer\">docs.oracle.com/cd/E23943_01/doc.1111/e15176/&hellip;</a>  It says: When you configure a timer intermediate event as a cycle, the timer event only runs one time. It waits until the specified interval passes and then the token continues moving through the rest of the process flow."}],"owner":{"account_id":26118692,"reputation":11,"user_id":19811349,"display_name":"Ashika Methal"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":837,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1661050865,"creation_date":1661050580,"question_id":73431340,"body_markdown":"I am currently trying to use a timer event with a timecycle to execute a script task multiple times. I use the following code to define the timer event.\r\n```\r\n        &lt;bpmn:boundaryEvent id=&quot;Event_12mc2pf&quot; cancelActivity=&quot;false&quot; attachedToRef=&quot;Activity_1wf3mho&quot;&gt;\r\n      &lt;bpmn:timerEventDefinition id=&quot;TimerEventDefinition_0c8olxa&quot;&gt;\r\n        &lt;bpmn:timeCycle xsi:type=&quot;bpmn:tFormalExpression&quot;&gt;R4/PT30S&lt;/bpmn:timeCycle&gt;\r\n      &lt;/bpmn:timerEventDefinition&gt;\r\n    &lt;/bpmn:boundaryEvent&gt;\r\n  &lt;/bpmn:process&gt;\r\n```\r\n\r\nAfter the timer event there is the script task and after the script task an end event.\r\n\r\nWhen deploying and executing this process the script task is only executed once. Since [camunda][1] claims to support this feature my question is, whether I defined the event correctly.\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/UuYua.png","title":"Camunda Timer Event with Time cycle Repeatation is not Working","body":"<p>I am currently trying to use a timer event with a timecycle to execute a script task multiple times. I use the following code to define the timer event.</p>\n<pre><code>        &lt;bpmn:boundaryEvent id=&quot;Event_12mc2pf&quot; cancelActivity=&quot;false&quot; attachedToRef=&quot;Activity_1wf3mho&quot;&gt;\n      &lt;bpmn:timerEventDefinition id=&quot;TimerEventDefinition_0c8olxa&quot;&gt;\n        &lt;bpmn:timeCycle xsi:type=&quot;bpmn:tFormalExpression&quot;&gt;R4/PT30S&lt;/bpmn:timeCycle&gt;\n      &lt;/bpmn:timerEventDefinition&gt;\n    &lt;/bpmn:boundaryEvent&gt;\n  &lt;/bpmn:process&gt;\n</code></pre>\n<p>After the timer event there is the script task and after the script task an end event.</p>\n<p>When deploying and executing this process the script task is only executed once. Since <a href=\"https://i.stack.imgur.com/UuYua.png\" rel=\"nofollow noreferrer\">camunda</a> claims to support this feature my question is, whether I defined the event correctly.</p>\n"},{"tags":["java","config","minecraft","spigot"],"answers":[{"tags":[],"owner":{"account_id":26117369,"reputation":1,"user_id":19810279,"display_name":"splitpea89"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1661048727,"creation_date":1661048727,"answer_id":73431239,"question_id":73429811,"body_markdown":"I had to call \r\n`saveDefaultConfig();`\r\nin my OnEnable method... whoops","title":"I&#39;m creating a spigot plugin, and the config file that appears on my test server doesn&#39;t match the one in Intellij","body":"<p>I had to call\n<code>saveDefaultConfig();</code>\nin my OnEnable method... whoops</p>\n"}],"owner":{"account_id":26117369,"reputation":1,"user_id":19810279,"display_name":"splitpea89"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":429,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1661623995,"accepted_answer_id":73431239,"answer_count":1,"score":-1,"last_activity_date":1661048727,"creation_date":1661026098,"question_id":73429811,"body_markdown":"The part of my config file specifically is this:\r\n```\r\nPlayers:\r\n  &quot;examplePlayer1&quot;:\r\n    - 10\r\n    - 0\r\n  &quot;examplePlayer2&quot;:\r\n    - 75\r\n    - 3\r\n```\r\nThat&#39;s what it looks like in Intellij, but when I package the plugin and put it in my test server, the config file looks like this:\r\n```\r\nPlayers:\r\n- examplePlayer:\r\n  - 10\r\n  - 0\r\n```\r\n\r\nThat&#39;s an older version that didn&#39;t work for a few reasons, so I changed it, but now the new config won&#39;t save to the server.\r\n\r\nIn my OnEnable method, I have this line:\r\n`getConfig().options().copyDefaults();`\r\n\r\nIn my OnDisable method, I have:\r\n`saveConfig();`\r\n\r\nDoes anyone know what I&#39;m doing wrong? \r\nThanks!","title":"I&#39;m creating a spigot plugin, and the config file that appears on my test server doesn&#39;t match the one in Intellij","body":"<p>The part of my config file specifically is this:</p>\n<pre><code>Players:\n  &quot;examplePlayer1&quot;:\n    - 10\n    - 0\n  &quot;examplePlayer2&quot;:\n    - 75\n    - 3\n</code></pre>\n<p>That's what it looks like in Intellij, but when I package the plugin and put it in my test server, the config file looks like this:</p>\n<pre><code>Players:\n- examplePlayer:\n  - 10\n  - 0\n</code></pre>\n<p>That's an older version that didn't work for a few reasons, so I changed it, but now the new config won't save to the server.</p>\n<p>In my OnEnable method, I have this line:\n<code>getConfig().options().copyDefaults();</code></p>\n<p>In my OnDisable method, I have:\n<code>saveConfig();</code></p>\n<p>Does anyone know what I'm doing wrong?\nThanks!</p>\n"},{"tags":["java","dom"],"comments":[{"owner":{"account_id":25937120,"reputation":2268,"user_id":19657183,"display_name":"Mihe"},"score":0,"creation_date":1661039896,"post_id":73430355,"comment_id":129676627,"body_markdown":"The last line of the XML is missing (closing CountrysList). The method should work. I think there&#39;s a mistake at some other location in your code. Have you tried to call your methods directly (e. g. with a hard-coded Country)?","body":"The last line of the XML is missing (closing CountrysList). The method should work. I think there&#39;s a mistake at some other location in your code. Have you tried to call your methods directly (e. g. with a hard-coded Country)?"},{"owner":{"account_id":26117748,"reputation":11,"user_id":19810583,"display_name":"Timama"},"score":0,"creation_date":1661043624,"post_id":73430355,"comment_id":129677038,"body_markdown":"God, I found the mistake. Apparently lack of sleep makes itself felt. Thank you very much, everything is really like that, I forgot to create a new instance of the class with the changed fields and passed it with the previous ones, so everything worked, but I didn&#39;t overwrite it, I didn&#39;t even see it at the breakpoint. Thanks again","body":"God, I found the mistake. Apparently lack of sleep makes itself felt. Thank you very much, everything is really like that, I forgot to create a new instance of the class with the changed fields and passed it with the previous ones, so everything worked, but I didn&#39;t overwrite it, I didn&#39;t even see it at the breakpoint. Thanks again"},{"owner":{"account_id":25937120,"reputation":2268,"user_id":19657183,"display_name":"Mihe"},"score":0,"creation_date":1661043952,"post_id":73430355,"comment_id":129677076,"body_markdown":"No problem. Even we developers are human beings.","body":"No problem. Even we developers are human beings."},{"owner":{"account_id":26117748,"reputation":11,"user_id":19810583,"display_name":"Timama"},"score":0,"creation_date":1661044364,"post_id":73430355,"comment_id":129677108,"body_markdown":"More than I would like.","body":"More than I would like."},{"owner":{"account_id":26117748,"reputation":11,"user_id":19810583,"display_name":"Timama"},"score":0,"creation_date":1661044373,"post_id":73430355,"comment_id":129677110,"body_markdown":"t&#39;s my first day here, can&#39;t a comment be marked as a solution?","body":"t&#39;s my first day here, can&#39;t a comment be marked as a solution?"},{"owner":{"account_id":25937120,"reputation":2268,"user_id":19657183,"display_name":"Mihe"},"score":0,"creation_date":1661044843,"post_id":73430355,"comment_id":129677151,"body_markdown":"Don&#39;t think so but don&#39;t know for sure (I&#39;m here for just under a month and haven&#39;t asked a question yet). Perhaps it&#39;s possible to provide an answer on your own and mark it as correct.  Or delete the question?","body":"Don&#39;t think so but don&#39;t know for sure (I&#39;m here for just under a month and haven&#39;t asked a question yet). Perhaps it&#39;s possible to provide an answer on your own and mark it as correct.  Or delete the question?"}],"answers":[{"tags":[],"owner":{"account_id":26117748,"reputation":11,"user_id":19810583,"display_name":"Timama"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1661047548,"creation_date":1661047548,"answer_id":73431187,"question_id":73430355,"body_markdown":" I found the mistake.Everything is really like that, I forgot to create a new instance of the class with the changed fields and passed it with the previous ones, so everything worked","title":"Edit an xml file element using dom","body":"<p>I found the mistake.Everything is really like that, I forgot to create a new instance of the class with the changed fields and passed it with the previous ones, so everything worked</p>\n"}],"owner":{"account_id":26117748,"reputation":11,"user_id":19810583,"display_name":"Timama"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73431187,"answer_count":1,"score":0,"last_activity_date":1661047548,"creation_date":1661032344,"question_id":73430355,"body_markdown":"Please tell me what I&#39;m doing wrong. \r\nI work with javafx and by clicking on the button, when the listview element is selected, I pass an object of the Country class to the editing method, but the xml file is not being edited, what is the problem? \r\nI attached an xml file, a broken edit function and a working delete function. I think it&#39;s about the setContext I&#39;m calling? But I&#39;m not sure\r\n\r\nXml file:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;\r\n    &lt;CountrysList lastId=&quot;3&quot;&gt;\r\n    &lt;Country id=&quot;1&quot;&gt;\r\n        &lt;name&gt;Russia&lt;/name&gt;\r\n        &lt;continent&gt;Eurasia&lt;/continent&gt;\r\n        &lt;area&gt;17125191&lt;/area&gt;\r\n        &lt;population&gt;145557576&lt;/population&gt;\r\n        &lt;capital&gt;Moscow&lt;/capital&gt;\r\n    &lt;/Country&gt;\r\n    &lt;Country id=&quot;2&quot;&gt;\r\n        &lt;name&gt;Russia&lt;/name&gt;\r\n        &lt;continent&gt;Eurasia&lt;/continent&gt;\r\n        &lt;area&gt;17125191&lt;/area&gt;\r\n        &lt;population&gt;145557576&lt;/population&gt;\r\n        &lt;capital&gt;Moscow&lt;/capital&gt;\r\n    &lt;/Country&gt;\r\n    &lt;Country id=&quot;3&quot;&gt;\r\n        &lt;name&gt;Russia&lt;/name&gt;\r\n        &lt;continent&gt;Eurasia&lt;/continent&gt;\r\n        &lt;area&gt;17125191&lt;/area&gt;\r\n        &lt;population&gt;145557576&lt;/population&gt;\r\n        &lt;capital&gt;Moscow&lt;/capital&gt;\r\n    &lt;/Country&gt;\r\n&lt;/CountrysList&gt;\r\n\r\nElement search function:\r\n\r\n        public Element findCountry(Document document, int id) {\r\n        NodeList countries = document.getElementsByTagName(&quot;Country&quot;);\r\n        Element currentCountry = null;\r\n        int i = 0;\r\n\r\n        while(i &lt; countries.getLength() &amp;&amp; currentCountry == null){\r\n            Node node = countries.item(i);\r\n            if (node.getNodeType() == Node.ELEMENT_NODE){\r\n                Element element = (Element) node;\r\n                if(String.valueOf(id).equals(element.getAttribute(&quot;id&quot;))){\r\n                    currentCountry = element;\r\n                }\r\n            }\r\n            i++;\r\n        }\r\n        return currentCountry;\r\n    }\r\nBroken editing function:\r\n\r\n    public void redact(Country country) throws ParserConfigurationException, IOException, SAXException, TransformerException {\r\n        DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();\r\n        DocumentBuilder docBuilder = docFactory.newDocumentBuilder();\r\n        Document document = docBuilder.parse(path);\r\n\r\n        Element currentCountry = findCountry(document, country.getId());\r\n\r\n        if(currentCountry != null){\r\n            NodeList children = currentCountry.getChildNodes();\r\n\r\n            for (int j=0; j &lt; children.getLength(); j++){\r\n                Node node = children.item(j);\r\n                if (node.getNodeType() == Node.ELEMENT_NODE) {\r\n                    Element element = (Element) node;\r\n                    switch (element.getTagName()){\r\n                        case &quot;name&quot;:\r\n                            element.setTextContent(country.getName());\r\n                            break;\r\n                        case &quot;continent&quot;:\r\n                            element.setTextContent(country.getContinent());\r\n                            break;\r\n                        case &quot;area&quot;:\r\n                            element.setTextContent(String.valueOf(country.getArea()));\r\n                            break;\r\n                        case &quot;population&quot;:\r\n                            element.setTextContent(String.valueOf(country.getPopulation()));\r\n                            break;\r\n                        case &quot;capital&quot;:\r\n                            element.setTextContent(country.getCapital());\r\n                            break;\r\n                    }\r\n                }\r\n            }\r\n\r\n            TransformerFactory transformerFactory = TransformerFactory.newInstance();\r\n            Transformer transformer = transformerFactory.newTransformer();\r\n            transformer.setOutputProperty(OutputKeys.INDENT, &quot;yes&quot;);\r\n            transformer.transform(new DOMSource(document), new StreamResult(path));\r\n        }\r\n    }\r\nWorking deletion function:\r\n\r\n    public void delete(Country country) throws ParserConfigurationException, IOException, SAXException, TransformerException {\r\n        DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();\r\n        DocumentBuilder docBuilder = docFactory.newDocumentBuilder();\r\n        Document document = docBuilder.parse(path);\r\n        Element rootElement = document.getDocumentElement();\r\n\r\n        Element currentCountry = findCountry(document, country.getId());\r\n\r\n        if(currentCountry != null){\r\n            rootElement.removeChild(currentCountry);\r\n            TransformerFactory transformerFactory = TransformerFactory.newInstance();\r\n            Transformer transformer = transformerFactory.newTransformer();\r\n            transformer.setOutputProperty(OutputKeys.INDENT, &quot;yes&quot;);\r\n            transformer.transform(new DOMSource(document), new StreamResult(path));\r\n        }\r\n    }","title":"Edit an xml file element using dom","body":"<p>Please tell me what I'm doing wrong.\nI work with javafx and by clicking on the button, when the listview element is selected, I pass an object of the Country class to the editing method, but the xml file is not being edited, what is the problem?\nI attached an xml file, a broken edit function and a working delete function. I think it's about the setContext I'm calling? But I'm not sure</p>\n<p>Xml file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;\n&lt;CountrysList lastId=&quot;3&quot;&gt;\n&lt;Country id=&quot;1&quot;&gt;\n    &lt;name&gt;Russia&lt;/name&gt;\n    &lt;continent&gt;Eurasia&lt;/continent&gt;\n    &lt;area&gt;17125191&lt;/area&gt;\n    &lt;population&gt;145557576&lt;/population&gt;\n    &lt;capital&gt;Moscow&lt;/capital&gt;\n&lt;/Country&gt;\n&lt;Country id=&quot;2&quot;&gt;\n    &lt;name&gt;Russia&lt;/name&gt;\n    &lt;continent&gt;Eurasia&lt;/continent&gt;\n    &lt;area&gt;17125191&lt;/area&gt;\n    &lt;population&gt;145557576&lt;/population&gt;\n    &lt;capital&gt;Moscow&lt;/capital&gt;\n&lt;/Country&gt;\n&lt;Country id=&quot;3&quot;&gt;\n    &lt;name&gt;Russia&lt;/name&gt;\n    &lt;continent&gt;Eurasia&lt;/continent&gt;\n    &lt;area&gt;17125191&lt;/area&gt;\n    &lt;population&gt;145557576&lt;/population&gt;\n    &lt;capital&gt;Moscow&lt;/capital&gt;\n&lt;/Country&gt;\n</code></pre>\n\n<p>Element search function:</p>\n<pre><code>    public Element findCountry(Document document, int id) {\n    NodeList countries = document.getElementsByTagName(&quot;Country&quot;);\n    Element currentCountry = null;\n    int i = 0;\n\n    while(i &lt; countries.getLength() &amp;&amp; currentCountry == null){\n        Node node = countries.item(i);\n        if (node.getNodeType() == Node.ELEMENT_NODE){\n            Element element = (Element) node;\n            if(String.valueOf(id).equals(element.getAttribute(&quot;id&quot;))){\n                currentCountry = element;\n            }\n        }\n        i++;\n    }\n    return currentCountry;\n}\n</code></pre>\n<p>Broken editing function:</p>\n<pre><code>public void redact(Country country) throws ParserConfigurationException, IOException, SAXException, TransformerException {\n    DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();\n    DocumentBuilder docBuilder = docFactory.newDocumentBuilder();\n    Document document = docBuilder.parse(path);\n\n    Element currentCountry = findCountry(document, country.getId());\n\n    if(currentCountry != null){\n        NodeList children = currentCountry.getChildNodes();\n\n        for (int j=0; j &lt; children.getLength(); j++){\n            Node node = children.item(j);\n            if (node.getNodeType() == Node.ELEMENT_NODE) {\n                Element element = (Element) node;\n                switch (element.getTagName()){\n                    case &quot;name&quot;:\n                        element.setTextContent(country.getName());\n                        break;\n                    case &quot;continent&quot;:\n                        element.setTextContent(country.getContinent());\n                        break;\n                    case &quot;area&quot;:\n                        element.setTextContent(String.valueOf(country.getArea()));\n                        break;\n                    case &quot;population&quot;:\n                        element.setTextContent(String.valueOf(country.getPopulation()));\n                        break;\n                    case &quot;capital&quot;:\n                        element.setTextContent(country.getCapital());\n                        break;\n                }\n            }\n        }\n\n        TransformerFactory transformerFactory = TransformerFactory.newInstance();\n        Transformer transformer = transformerFactory.newTransformer();\n        transformer.setOutputProperty(OutputKeys.INDENT, &quot;yes&quot;);\n        transformer.transform(new DOMSource(document), new StreamResult(path));\n    }\n}\n</code></pre>\n<p>Working deletion function:</p>\n<pre><code>public void delete(Country country) throws ParserConfigurationException, IOException, SAXException, TransformerException {\n    DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();\n    DocumentBuilder docBuilder = docFactory.newDocumentBuilder();\n    Document document = docBuilder.parse(path);\n    Element rootElement = document.getDocumentElement();\n\n    Element currentCountry = findCountry(document, country.getId());\n\n    if(currentCountry != null){\n        rootElement.removeChild(currentCountry);\n        TransformerFactory transformerFactory = TransformerFactory.newInstance();\n        Transformer transformer = transformerFactory.newTransformer();\n        transformer.setOutputProperty(OutputKeys.INDENT, &quot;yes&quot;);\n        transformer.transform(new DOMSource(document), new StreamResult(path));\n    }\n}\n</code></pre>\n"},{"tags":["java","sql","oracle","jdbc"],"comments":[{"owner":{"display_name":"user2763765"},"score":0,"creation_date":1379569431,"post_id":18886864,"comment_id":27876370,"body_markdown":"Try this:\n     `rs.moveToInsertRow();\n     rs.updateString(&quot;STATUS&quot;, &quot;S&quot;);\n     rs.insertRow();`\nin place of just \n     `rs.updateString(&quot;STATUS&quot;, &quot;S&quot;);`\n\nI am not sure...Just check and let me know","body":"Try this:      <code>rs.moveToInsertRow();      rs.updateString(&quot;STATUS&quot;, &quot;S&quot;);      rs.insertRow();</code> in place of just       <code>rs.updateString(&quot;STATUS&quot;, &quot;S&quot;);</code>  I am not sure...Just check and let me know"},{"owner":{"account_id":33759,"reputation":36049,"user_id":94813,"accept_rate":70,"display_name":"Rakesh Juyal"},"score":0,"creation_date":1379569632,"post_id":18886864,"comment_id":27876438,"body_markdown":"@bhushan rs is `instanceOf` what. That might be readonly.","body":"@bhushan rs is <code>instanceOf</code> what. That might be readonly."},{"owner":{"account_id":1688397,"reputation":6151,"user_id":1551233,"accept_rate":84,"display_name":"Bhushan"},"score":0,"creation_date":1379570063,"post_id":18886864,"comment_id":27876579,"body_markdown":"@RakeshJuyal I have declared rs as `ResultSet rs=null&#39;","body":"@RakeshJuyal I have declared rs as `ResultSet rs=null&#39;"},{"owner":{"account_id":1688397,"reputation":6151,"user_id":1551233,"accept_rate":84,"display_name":"Bhushan"},"score":0,"creation_date":1379570182,"post_id":18886864,"comment_id":27876621,"body_markdown":"@Sandeep I am getting error when I try code in comment: `Invalid operation for read only resultset: moveToInsertRow`","body":"@Sandeep I am getting error when I try code in comment: <code>Invalid operation for read only resultset: moveToInsertRow</code>"},{"owner":{"account_id":3150686,"reputation":13778,"user_id":2664200,"accept_rate":71,"display_name":"SpringLearner"},"score":0,"creation_date":1379570337,"post_id":18886864,"comment_id":27876674,"body_markdown":"@Bhushan can i know your exact requiremtn so that we can have alternate solution as per your requirement","body":"@Bhushan can i know your exact requiremtn so that we can have alternate solution as per your requirement"},{"owner":{"account_id":1688397,"reputation":6151,"user_id":1551233,"accept_rate":84,"display_name":"Bhushan"},"score":0,"creation_date":1379570588,"post_id":18886864,"comment_id":27876746,"body_markdown":"@javaBeginner Above query is reconstructed to my similar requirement. My requirement is Read mails to be send from TABLE_ONE then read mail template &amp; parameters from two different tables and when mail is sent then update the STATUS in TABLE_ONE to `S` (send). Let me know if you need more details.","body":"@javaBeginner Above query is reconstructed to my similar requirement. My requirement is Read mails to be send from TABLE_ONE then read mail template &amp; parameters from two different tables and when mail is sent then update the STATUS in TABLE_ONE to <code>S</code> (send). Let me know if you need more details."},{"owner":{"account_id":3150686,"reputation":13778,"user_id":2664200,"accept_rate":71,"display_name":"SpringLearner"},"score":0,"creation_date":1379571215,"post_id":18886864,"comment_id":27876921,"body_markdown":"@Bhushan which table is having column status","body":"@Bhushan which table is having column status"},{"owner":{"account_id":1688397,"reputation":6151,"user_id":1551233,"accept_rate":84,"display_name":"Bhushan"},"score":0,"creation_date":1379571268,"post_id":18886864,"comment_id":27876943,"body_markdown":"@javaBeginner TABLE_ONE is having column `STATUS`","body":"@javaBeginner TABLE_ONE is having column <code>STATUS</code>"},{"owner":{"account_id":3150686,"reputation":13778,"user_id":2664200,"accept_rate":71,"display_name":"SpringLearner"},"score":0,"creation_date":1379572011,"post_id":18886864,"comment_id":27877170,"body_markdown":"@Bhushan do you have a primary key in table one?","body":"@Bhushan do you have a primary key in table one?"},{"owner":{"account_id":1688397,"reputation":6151,"user_id":1551233,"accept_rate":84,"display_name":"Bhushan"},"score":0,"creation_date":1379572153,"post_id":18886864,"comment_id":27877238,"body_markdown":"@javaBeginner Yes. TABLE_ONE contains primary key.","body":"@javaBeginner Yes. TABLE_ONE contains primary key."},{"owner":{"account_id":3150686,"reputation":13778,"user_id":2664200,"accept_rate":71,"display_name":"SpringLearner"},"score":0,"creation_date":1379572215,"post_id":18886864,"comment_id":27877271,"body_markdown":"let us [continue this discussion in chat](http://chat.stackoverflow.com/rooms/37625/discussion-between-javabeginner-and-bhushan)","body":"let us <a href=\"http://chat.stackoverflow.com/rooms/37625/discussion-between-javabeginner-and-bhushan\">continue this discussion in chat</a>"},{"owner":{"account_id":3150686,"reputation":13778,"user_id":2664200,"accept_rate":71,"display_name":"SpringLearner"},"score":1,"creation_date":1379572596,"post_id":18886864,"comment_id":27877424,"body_markdown":"@Bhushan change your query to select * from table_one and let me know if it works or not","body":"@Bhushan change your query to select * from table_one and let me know if it works or not"},{"owner":{"account_id":1688397,"reputation":6151,"user_id":1551233,"accept_rate":84,"display_name":"Bhushan"},"score":0,"creation_date":1379574214,"post_id":18886864,"comment_id":27878132,"body_markdown":"@javaBeginner If I select data from only one table (TABLE_ONE) then it works. but my requirement is to select data from three tables.","body":"@javaBeginner If I select data from only one table (TABLE_ONE) then it works. but my requirement is to select data from three tables."},{"owner":{"account_id":3150686,"reputation":13778,"user_id":2664200,"accept_rate":71,"display_name":"SpringLearner"},"score":3,"creation_date":1379574329,"post_id":18886864,"comment_id":27878197,"body_markdown":"@Bhushan it will work only for one table,please have a look on jdbc api 2.2 section 5.6","body":"@Bhushan it will work only for one table,please have a look on jdbc api 2.2 section 5.6"}],"answers":[{"tags":[],"owner":{"display_name":"user2763765"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1379571675,"creation_date":1379571675,"answer_id":18887430,"question_id":18886864,"body_markdown":"Try This :\r\n\r\n     Statement stmt = conn.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE,ResultSet.CONCUR_UPDATABLE);\r\n     \r\n    //Execute a query\r\n     String sql = &quot;select A.NAME, A.ADDRESS, A.STATUS, B.CLASS from TABLE_ONE A, TABLE_TWO B where A.STATUS=&#39;N&#39;&quot;;\r\n     ResultSet rs = stmt.executeQuery(sql);\r\n    //Extract data from result set\r\n      rs.beforeFirst();\r\n    while(rs.next())\r\n    {\r\n        String name = rs.getString(&quot;NAME&quot;);\r\n        String address = rs.getString(&quot;ADDRESS&quot;);\r\n        String class = rs.getString(&quot;CLASS&quot;);\r\n    \r\n        String msg = //Other statements to check what status to be set\r\n    \r\n        if(msg.equals(&quot;OK&quot;))\r\n            rs.updateString(&quot;STATUS&quot;, &quot;S&quot;);\r\n        else\r\n            rs.updateString(&quot;STATUS&quot;, &quot;E&quot;);\r\n        rs.updateRow();\r\n    }\r\n\r\nJust changed Prepared statement to create statement","title":"Invalid operation for read only resultset: updateString","body":"<p>Try This :</p>\n\n<pre><code> Statement stmt = conn.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE,ResultSet.CONCUR_UPDATABLE);\n\n//Execute a query\n String sql = \"select A.NAME, A.ADDRESS, A.STATUS, B.CLASS from TABLE_ONE A, TABLE_TWO B where A.STATUS='N'\";\n ResultSet rs = stmt.executeQuery(sql);\n//Extract data from result set\n  rs.beforeFirst();\nwhile(rs.next())\n{\n    String name = rs.getString(\"NAME\");\n    String address = rs.getString(\"ADDRESS\");\n    String class = rs.getString(\"CLASS\");\n\n    String msg = //Other statements to check what status to be set\n\n    if(msg.equals(\"OK\"))\n        rs.updateString(\"STATUS\", \"S\");\n    else\n        rs.updateString(\"STATUS\", \"E\");\n    rs.updateRow();\n}\n</code></pre>\n\n<p>Just changed Prepared statement to create statement</p>\n"},{"tags":[],"owner":{"account_id":938654,"reputation":621,"user_id":967130,"accept_rate":90,"display_name":"Eugene Hoza"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1414750048,"creation_date":1414750048,"answer_id":26672027,"question_id":18886864,"body_markdown":"The following limitations are placed on queries for enhanced result sets. Failure to follow these guidelines will result in the JDBC driver choosing an alternative result set type or concurrency type.\r\n\r\nTo produce an updatable result set (from specification):\r\n\r\n* A query can select from only a single table and cannot contain any join operations.\r\n\r\nIn addition, for inserts to be feasible, the query must select all non-nullable columns and all columns that do not have a default value.\r\n* A query cannot use &quot;SELECT * &quot;. (But see the workaround below.)\r\n* A query must select table columns only. It cannot select derived columns or aggregates such as the SUM or MAX of a set of columns.\r\n\r\nTo produce a scroll-sensitive result set:\r\n\r\n* A query cannot use &quot;SELECT * &quot;. (But see the workaround below.)\r\n* A query can select from only a single table.","title":"Invalid operation for read only resultset: updateString","body":"<p>The following limitations are placed on queries for enhanced result sets. Failure to follow these guidelines will result in the JDBC driver choosing an alternative result set type or concurrency type.</p>\n\n<p>To produce an updatable result set (from specification):</p>\n\n<ul>\n<li>A query can select from only a single table and cannot contain any join operations.</li>\n</ul>\n\n<p>In addition, for inserts to be feasible, the query must select all non-nullable columns and all columns that do not have a default value.\n* A query cannot use \"SELECT * \". (But see the workaround below.)\n* A query must select table columns only. It cannot select derived columns or aggregates such as the SUM or MAX of a set of columns.</p>\n\n<p>To produce a scroll-sensitive result set:</p>\n\n<ul>\n<li>A query cannot use \"SELECT * \". (But see the workaround below.)</li>\n<li>A query can select from only a single table.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":22393592,"reputation":1,"user_id":16605203,"display_name":"Bibekananda Behera"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661045425,"creation_date":1660718733,"answer_id":73383952,"question_id":18886864,"body_markdown":"```SELECT *``` makes the resultSet readonly. ```SELECT COLUMN_NAME``` makes it updatable.  \r\nSo instead of ```SELECT * FROM TABLE``` use ```SELECT COLUMN1, COLUMN2, ... FROM TABLE```.","title":"Invalid operation for read only resultset: updateString","body":"<p><code>SELECT *</code> makes the resultSet readonly. <code>SELECT COLUMN_NAME</code> makes it updatable.<br />\nSo instead of <code>SELECT * FROM TABLE</code> use <code>SELECT COLUMN1, COLUMN2, ... FROM TABLE</code>.</p>\n"}],"owner":{"account_id":1688397,"reputation":6151,"user_id":1551233,"accept_rate":84,"display_name":"Bhushan"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10604,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":26672027,"answer_count":3,"score":2,"last_activity_date":1661045425,"creation_date":1379568924,"question_id":18886864,"body_markdown":"Following is my code(Re-constructed) which select &amp; update STATUS field depending upon the conditions. (Using Servlets, Oracle as Backend and JDBC driver)\r\n\r\n    ResultSet rs=null;\r\n    String query = &quot;select A.NAME, A.ADDRESS, A.STATUS, B.CLASS from TABLE_ONE A, TABLE_TWO B where A.STATUS=&#39;N&#39;&quot;;\r\n    pstmt = con.prepareStatement(query,ResultSet.TYPE_SCROLL_INSENSITIVE,ResultSet.CONCUR_UPDATABLE);\r\n    rs = pstmt.executeQuery();\r\n    while(rs.next())\r\n    {\r\n        String name = rs.getString(&quot;NAME&quot;);\r\n        String address = rs.getString(&quot;ADDRESS&quot;);\r\n        String class = rs.getString(&quot;CLASS&quot;);\r\n        \r\n        String msg = //Other statements to check what status to be set\r\n        \r\n        if(msg.equals(&quot;OK&quot;))\r\n            rs.updateString(&quot;STATUS&quot;, &quot;S&quot;);\r\n        else\r\n            rs.updateString(&quot;STATUS&quot;, &quot;E&quot;);\r\n        rs.updateRow();\r\n    }\r\n\r\nI am getting the error while updating:\r\n\r\n    java.sql.SQLException: Invalid operation for read only resultset: updateString\r\n\r\nAny suggestions will be appreciated.\r\n\r\n**Update 1:**\r\nThe same code was working when select statement was selecting data from single table, so is there any issue when selecting data from two tables in single query?\r\n\r\n[**Note**: As @javaBeginner has mentioned in comments it will work only for one table.]","title":"Invalid operation for read only resultset: updateString","body":"<p>Following is my code(Re-constructed) which select &amp; update STATUS field depending upon the conditions. (Using Servlets, Oracle as Backend and JDBC driver)</p>\n\n<pre><code>ResultSet rs=null;\nString query = \"select A.NAME, A.ADDRESS, A.STATUS, B.CLASS from TABLE_ONE A, TABLE_TWO B where A.STATUS='N'\";\npstmt = con.prepareStatement(query,ResultSet.TYPE_SCROLL_INSENSITIVE,ResultSet.CONCUR_UPDATABLE);\nrs = pstmt.executeQuery();\nwhile(rs.next())\n{\n    String name = rs.getString(\"NAME\");\n    String address = rs.getString(\"ADDRESS\");\n    String class = rs.getString(\"CLASS\");\n\n    String msg = //Other statements to check what status to be set\n\n    if(msg.equals(\"OK\"))\n        rs.updateString(\"STATUS\", \"S\");\n    else\n        rs.updateString(\"STATUS\", \"E\");\n    rs.updateRow();\n}\n</code></pre>\n\n<p>I am getting the error while updating:</p>\n\n<pre><code>java.sql.SQLException: Invalid operation for read only resultset: updateString\n</code></pre>\n\n<p>Any suggestions will be appreciated.</p>\n\n<p><strong>Update 1:</strong>\nThe same code was working when select statement was selecting data from single table, so is there any issue when selecting data from two tables in single query?</p>\n\n<p>[<strong>Note</strong>: As @javaBeginner has mentioned in comments it will work only for one table.]</p>\n"},{"tags":["java","apache-spark","cassandra","out-of-memory","spark-cassandra-connector"],"answers":[{"tags":[],"owner":{"account_id":3345065,"reputation":136,"user_id":2810383,"display_name":"cbbetz"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1435687024,"creation_date":1435687024,"answer_id":31145134,"question_id":31141998,"body_markdown":"Not having used Cassandra with Spark, from reading the section you provided (thanks for that) I see that:\r\n\r\n&gt; Note: Although the ALLOW FILTERING clause is implicitly added to the\r\n&gt; generated CQL query, not all predicates are currently allowed by the\r\n&gt; Cassandra engine. This limitation is going to be addressed in the\r\n&gt; future Cassandra releases. Currently, ALLOW FILTERING works well with\r\n&gt; columns indexed by secondary indexes or clustering columns.\r\n\r\nI&#39;m pretty sure (but haven&#39;t tested) that the &quot;IN&quot; predicate is not supported: See https://github.com/datastax/spark-cassandra-connector/blob/24fbe6a10e083ddc3f770d1f52c07dfefeb7f59a/spark-cassandra-connector-java/src/main/java/com/datastax/spark/connector/japi/rdd/CassandraJavaRDD.java#L80\r\n\r\nSo, you could try to limit your where-clause to Id (assuming that there is a secondary index for that) and use spark filtering for the date range.","title":"Why Apache Spark is performing the filters on client","body":"<p>Not having used Cassandra with Spark, from reading the section you provided (thanks for that) I see that:</p>\n\n<blockquote>\n  <p>Note: Although the ALLOW FILTERING clause is implicitly added to the\n  generated CQL query, not all predicates are currently allowed by the\n  Cassandra engine. This limitation is going to be addressed in the\n  future Cassandra releases. Currently, ALLOW FILTERING works well with\n  columns indexed by secondary indexes or clustering columns.</p>\n</blockquote>\n\n<p>I'm pretty sure (but haven't tested) that the \"IN\" predicate is not supported: See <a href=\"https://github.com/datastax/spark-cassandra-connector/blob/24fbe6a10e083ddc3f770d1f52c07dfefeb7f59a/spark-cassandra-connector-java/src/main/java/com/datastax/spark/connector/japi/rdd/CassandraJavaRDD.java#L80\" rel=\"nofollow\">https://github.com/datastax/spark-cassandra-connector/blob/24fbe6a10e083ddc3f770d1f52c07dfefeb7f59a/spark-cassandra-connector-java/src/main/java/com/datastax/spark/connector/japi/rdd/CassandraJavaRDD.java#L80</a></p>\n\n<p>So, you could try to limit your where-clause to Id (assuming that there is a secondary index for that) and use spark filtering for the date range.</p>\n"},{"tags":[],"owner":{"account_id":5456538,"reputation":9295,"user_id":4339776,"accept_rate":57,"display_name":"Jim Meyer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1435715309,"creation_date":1435708981,"answer_id":31150509,"question_id":31141998,"body_markdown":"I&#39;d suggest reading the table in as a DataFrame instead of an RDD.  Those are available in Spark 1.3 and higher.  Then you can specify the CQL query as a string like this:\r\n\r\n    CassandraSQLContext sqlContext = new CassandraSQLContext(sc);\r\n    \r\n    String query = &quot;SELECT * FROM testing.cf_text where id=&#39;Open&#39; and date IN (&#39;2015-01-21&#39;,&#39;2015-01-22&#39;)&quot;;\r\n    DataFrame resultsFrame = sqlContext.sql(query);\r\n    \r\n    System.out.println(resultsFrame.count());\r\n\r\nSo try that and see if it works better for you.\r\n\r\nOnce you have the data in a DataFrame, you can run Spark SQL operations on it.  And if you want the data in an RDD, you can convert the DataFrame into an RDD.\r\n","title":"Why Apache Spark is performing the filters on client","body":"<p>I'd suggest reading the table in as a DataFrame instead of an RDD.  Those are available in Spark 1.3 and higher.  Then you can specify the CQL query as a string like this:</p>\n\n<pre><code>CassandraSQLContext sqlContext = new CassandraSQLContext(sc);\n\nString query = \"SELECT * FROM testing.cf_text where id='Open' and date IN ('2015-01-21','2015-01-22')\";\nDataFrame resultsFrame = sqlContext.sql(query);\n\nSystem.out.println(resultsFrame.count());\n</code></pre>\n\n<p>So try that and see if it works better for you.</p>\n\n<p>Once you have the data in a DataFrame, you can run Spark SQL operations on it.  And if you want the data in an RDD, you can convert the DataFrame into an RDD.</p>\n"},{"tags":[],"owner":{"account_id":2733798,"reputation":562,"user_id":2356907,"accept_rate":40,"display_name":"107"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1435732754,"creation_date":1435732754,"answer_id":31154161,"question_id":31141998,"body_markdown":"setting spark.cassandra.input.split.size_in_mb in SparkConfing solved the issue.\r\n\r\n    conf = new SparkConf();\r\n            conf.setAppName(&quot;Test&quot;);\r\n            conf.setMaster(&quot;local[4]&quot;);\r\n            conf.set(&quot;spark.cassandra.connection.host&quot;, &quot;192.168.1.15&quot;).\r\n            set(&quot;spark.executor.memory&quot;, &quot;2g&quot;).\r\n            set(&quot;spark.cassandra.input.split.size_in_mb&quot;, &quot;67108864&quot;);\r\n\r\nSpark-cassnadra-connector reads the wrong value of spark.cassandra.input.split.size_in_mb so overriding this value in the SparkConf does the work. Now IN clause is also working good.","title":"Why Apache Spark is performing the filters on client","body":"<p>setting spark.cassandra.input.split.size_in_mb in SparkConfing solved the issue.</p>\n\n<pre><code>conf = new SparkConf();\n        conf.setAppName(\"Test\");\n        conf.setMaster(\"local[4]\");\n        conf.set(\"spark.cassandra.connection.host\", \"192.168.1.15\").\n        set(\"spark.executor.memory\", \"2g\").\n        set(\"spark.cassandra.input.split.size_in_mb\", \"67108864\");\n</code></pre>\n\n<p>Spark-cassnadra-connector reads the wrong value of spark.cassandra.input.split.size_in_mb so overriding this value in the SparkConf does the work. Now IN clause is also working good.</p>\n"}],"owner":{"account_id":2733798,"reputation":562,"user_id":2356907,"accept_rate":40,"display_name":"107"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1395,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1661044374,"creation_date":1435676894,"question_id":31141998,"body_markdown":"Being newbie on apache spark, facing some issue on fetching Cassandra data on Spark. \r\n\r\n    List&lt;String&gt; dates = Arrays.asList(&quot;2015-01-21&quot;,&quot;2015-01-22&quot;);\r\n    CassandraJavaRDD&lt;A&gt; aRDD = CassandraJavaUtil.javaFunctions(sc).\r\n    \t    \t\t\tcassandraTable(&quot;testing&quot;, &quot;cf_text&quot;,CassandraJavaUtil.mapRowTo(A.class, colMap)).\r\n    \t    \t\t\twhere(&quot;Id=? and date IN ?&quot;,&quot;Open&quot;,dates);\r\nThis query is not filtering data on the cassandra server. While this java statement is executing its shooting up the memory and finally throwing spark java.lang.OutOfMemoryError exception. Query should be filtering out data on the cassandra server instead of client side as mentioned on https://github.com/datastax/spark-cassandra-connector/blob/master/doc/3_selection.md.\r\n\r\nWhile i am performing the query with filters on the cassandra cqlsh its performing fine but performing the query without the filter (where clause) is giving timeout which is expected. So its clear that spark is not applying the filters on the client side. \r\n\r\n    SparkConf conf = new SparkConf();\r\n    \t        conf.setAppName(&quot;Test&quot;);\r\n    \t        conf.setMaster(&quot;local[8]&quot;);\r\n    \t        conf.set(&quot;spark.cassandra.connection.host&quot;, &quot;192.168.1.15&quot;)\r\n\r\nWhy filters are applied on the client side and how it can be improved to apply the filters on the server side.\r\n\r\nHow we could configure the spark cluster on top of the cassandra cluster on windows platform??\r\n\r\n    ","title":"Why Apache Spark is performing the filters on client","body":"<p>Being newbie on apache spark, facing some issue on fetching Cassandra data on Spark. </p>\n\n<pre><code>List&lt;String&gt; dates = Arrays.asList(\"2015-01-21\",\"2015-01-22\");\nCassandraJavaRDD&lt;A&gt; aRDD = CassandraJavaUtil.javaFunctions(sc).\n                    cassandraTable(\"testing\", \"cf_text\",CassandraJavaUtil.mapRowTo(A.class, colMap)).\n                    where(\"Id=? and date IN ?\",\"Open\",dates);\n</code></pre>\n\n<p>This query is not filtering data on the cassandra server. While this java statement is executing its shooting up the memory and finally throwing spark java.lang.OutOfMemoryError exception. Query should be filtering out data on the cassandra server instead of client side as mentioned on <a href=\"https://github.com/datastax/spark-cassandra-connector/blob/master/doc/3_selection.md\" rel=\"nofollow\">https://github.com/datastax/spark-cassandra-connector/blob/master/doc/3_selection.md</a>.</p>\n\n<p>While i am performing the query with filters on the cassandra cqlsh its performing fine but performing the query without the filter (where clause) is giving timeout which is expected. So its clear that spark is not applying the filters on the client side. </p>\n\n<pre><code>SparkConf conf = new SparkConf();\n            conf.setAppName(\"Test\");\n            conf.setMaster(\"local[8]\");\n            conf.set(\"spark.cassandra.connection.host\", \"192.168.1.15\")\n</code></pre>\n\n<p>Why filters are applied on the client side and how it can be improved to apply the filters on the server side.</p>\n\n<p>How we could configure the spark cluster on top of the cassandra cluster on windows platform??</p>\n"},{"tags":["java","apache-spark","cassandra","rdd","spark-cassandra-connector"],"comments":[{"owner":{"account_id":2056159,"reputation":2386,"user_id":1833862,"display_name":"vanekjar"},"score":2,"creation_date":1436964198,"post_id":31430309,"comment_id":50831716,"body_markdown":"I think this behavior is expected. You haven&#39;t mentioned the size of your cluster and size of the data. But I think filtering 3 million records may take a while.","body":"I think this behavior is expected. You haven&#39;t mentioned the size of your cluster and size of the data. But I think filtering 3 million records may take a while."}],"owner":{"account_id":5492902,"reputation":735,"user_id":4365113,"accept_rate":82,"display_name":"Justin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":583,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1661044330,"creation_date":1436963018,"question_id":31430309,"body_markdown":"I am using Apache Spark with spark-Cassandra-connector for data analysis.For that i created a JavaRDD of a table from Cassandra which contains more than 3 million records.\r\n\r\n    JavaRDD&lt;MyTestBean&gt; testRDD = testFunction\r\n\t\t\t\t.cassandraTable(&quot;keyspace&quot;, &quot;table&quot;)\r\n\t\t\t\t.map(new Function&lt;CassandraRow, MyTestBean&gt;() {\r\n\r\n\t\t\t\t\t@Override\r\n\t\t\t\t\tpublic MyTestBean call(\r\n\t\t\t\t\t\t\tfinal CassandraRow line) {\r\n\r\n\t\t\t\t\t\tfinal MyTestBean beanObj = new MyTestBean();\r\n\t\t\t\t\t\tbeanObj.setId(line.getString(&quot;id&quot;)));\r\n                        return beanObj ;\r\n                     }).filter(new Function&lt;MyTestBean , Boolean&gt;() {\r\n\t\t\t\t\t          public Boolean call(MyTestBean s) {\r\n\t\t\t\t\t\t         long id = s.getId();\r\n\t\t\t\t\t\t         if (id &gt; 600000) {\r\n\t\t\t\t\t\t\t        final_check = true;\r\n\t\t\t\t\t\t         }\r\n\t\t\t\t\t\t         return final_check;\r\n\t\t\t\t\t          }\r\n\t\t\t\t     });\r\n\r\nIt wont return any rows after the filtering. So when i apply ,\r\n           \r\n\r\n    testRDD.count();\r\n\r\nIt took approximately 2 minutes to show its count as 0. Is this behavior expected or is there any possible issues from my side? \r\n\r\n","title":"When using collect() on JavaRDD in spark , application becomes slower","body":"<p>I am using Apache Spark with spark-Cassandra-connector for data analysis.For that i created a JavaRDD of a table from Cassandra which contains more than 3 million records.</p>\n\n<pre><code>JavaRDD&lt;MyTestBean&gt; testRDD = testFunction\n            .cassandraTable(\"keyspace\", \"table\")\n            .map(new Function&lt;CassandraRow, MyTestBean&gt;() {\n\n                @Override\n                public MyTestBean call(\n                        final CassandraRow line) {\n\n                    final MyTestBean beanObj = new MyTestBean();\n                    beanObj.setId(line.getString(\"id\")));\n                    return beanObj ;\n                 }).filter(new Function&lt;MyTestBean , Boolean&gt;() {\n                          public Boolean call(MyTestBean s) {\n                             long id = s.getId();\n                             if (id &gt; 600000) {\n                                final_check = true;\n                             }\n                             return final_check;\n                          }\n                 });\n</code></pre>\n\n<p>It wont return any rows after the filtering. So when i apply ,</p>\n\n<pre><code>testRDD.count();\n</code></pre>\n\n<p>It took approximately 2 minutes to show its count as 0. Is this behavior expected or is there any possible issues from my side? </p>\n"},{"tags":["java","eclipse","apache-spark","cassandra","spark-cassandra-connector"],"answers":[{"tags":[],"owner":{"account_id":476496,"reputation":766,"user_id":887441,"accept_rate":50,"display_name":"Antonio"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1435155842,"creation_date":1435155842,"answer_id":31029241,"question_id":31026511,"body_markdown":"Try also to include [Scala Jar][1] at your class path. If you do not use Maven, download the jar and include it in the Project build properties.\r\n\r\n\r\n  [1]: http://mvnrepository.com/artifact/org.scala-lang/scala-library/2.10.3","title":"Need some help on setting up spark for cassandra on java","body":"<p>Try also to include <a href=\"http://mvnrepository.com/artifact/org.scala-lang/scala-library/2.10.3\" rel=\"nofollow\">Scala Jar</a> at your class path. If you do not use Maven, download the jar and include it in the Project build properties.</p>\n"}],"owner":{"account_id":2733798,"reputation":562,"user_id":2356907,"accept_rate":40,"display_name":"107"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1071,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":31029241,"answer_count":1,"score":1,"last_activity_date":1661043976,"creation_date":1435148715,"question_id":31026511,"body_markdown":"Setting up spark to access cassandra on java is throwing NoClassDefFoundError\r\n\r\n    Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: scala/Cloneable\r\n    \tat java.lang.ClassLoader.defineClass1(Native Method)\r\n    \tat java.lang.ClassLoader.defineClass(Unknown Source)\r\n    \tat java.security.SecureClassLoader.defineClass(Unknown Source)\r\n    \tat java.net.URLClassLoader.defineClass(Unknown Source)\r\n    \tat java.net.URLClassLoader.access$100(Unknown Source)\r\n    \tat java.net.URLClassLoader$1.run(Unknown Source)\r\n    \tat java.net.URLClassLoader$1.run(Unknown Source)\r\n    \tat java.security.AccessController.doPrivileged(Native Method)\r\n    \tat java.net.URLClassLoader.findClass(Unknown Source)\r\n    \tat java.lang.ClassLoader.loadClass(Unknown Source)\r\n    \tat sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)\r\n    \tat java.lang.ClassLoader.loadClass(Unknown Source)\r\n    \tat Client.main(Client.java:22)\r\n    Caused by: java.lang.ClassNotFoundException: scala.Cloneable\r\n    \tat java.net.URLClassLoader$1.run(Unknown Source)\r\n    \tat java.net.URLClassLoader$1.run(Unknown Source)\r\n    \tat java.security.AccessController.doPrivileged(Native Method)\r\n    \tat java.net.URLClassLoader.findClass(Unknown Source)\r\n    \tat java.lang.ClassLoader.loadClass(Unknown Source)\r\n    \tat sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)\r\n    \tat java.lang.ClassLoader.loadClass(Unknown Source)\r\n    \t... 13 more\r\n\r\nTwo jar files are added. spark-cassandra-connector-java-assembly-1.4.0-M1-SNAPSHOT.jar &amp; spark-core_2.10-0.9.0-incubating.jar. spark-cassandra-connector-java-assembly-1.4.0-M1-SNAPSHOT.jar is build against scala 2.10. \r\nTyping scala -version on command prompt showing scala code runner version 2.11.6. Accessing spark from spark-shell have no issue. Even access in cassandra column family from spark-shell is working fine.\r\n\r\n\r\n    import java.util.*;\r\n    import org.apache.spark.SparkConf;\r\n    import org.apache.spark.api.java.JavaRDD;\r\n    import org.apache.spark.api.java.JavaSparkContext;\r\n    import com.datastax.spark.connector.*;\r\n    import com.datastax.spark.connector.cql.*;\r\n    import com.datastax.spark.*;\r\n    import org.apache.spark.SparkConf;\r\n    import org.apache.spark.SparkContext;\r\n    import org.apache.spark.api.java.JavaPairRDD;\r\n    import org.apache.spark.api.java.JavaRDD;\r\n    import org.apache.spark.api.java.JavaSparkContext;\r\n    import org.apache.spark.api.java.function.PairFunction;\r\n    //import scala.Tuple2;\r\n    import org.apache.spark.api.java.*;\r\n    \r\n    public class Client {\r\n    \tpublic static void main(String[] a)\r\n    \t{\r\n    \t\tSparkConf conf = new SparkConf().setAppName(&quot;MTMPNLTesting&quot;).setMaster(&quot;192.168.1.15&quot;);\r\n        }\r\n    }\r\n\r\n   What might be the reason of the error?? ","title":"Need some help on setting up spark for cassandra on java","body":"<p>Setting up spark to access cassandra on java is throwing NoClassDefFoundError</p>\n\n<pre><code>Exception in thread \"main\" java.lang.NoClassDefFoundError: scala/Cloneable\n    at java.lang.ClassLoader.defineClass1(Native Method)\n    at java.lang.ClassLoader.defineClass(Unknown Source)\n    at java.security.SecureClassLoader.defineClass(Unknown Source)\n    at java.net.URLClassLoader.defineClass(Unknown Source)\n    at java.net.URLClassLoader.access$100(Unknown Source)\n    at java.net.URLClassLoader$1.run(Unknown Source)\n    at java.net.URLClassLoader$1.run(Unknown Source)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.net.URLClassLoader.findClass(Unknown Source)\n    at java.lang.ClassLoader.loadClass(Unknown Source)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)\n    at java.lang.ClassLoader.loadClass(Unknown Source)\n    at Client.main(Client.java:22)\nCaused by: java.lang.ClassNotFoundException: scala.Cloneable\n    at java.net.URLClassLoader$1.run(Unknown Source)\n    at java.net.URLClassLoader$1.run(Unknown Source)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.net.URLClassLoader.findClass(Unknown Source)\n    at java.lang.ClassLoader.loadClass(Unknown Source)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)\n    at java.lang.ClassLoader.loadClass(Unknown Source)\n    ... 13 more\n</code></pre>\n\n<p>Two jar files are added. spark-cassandra-connector-java-assembly-1.4.0-M1-SNAPSHOT.jar &amp; spark-core_2.10-0.9.0-incubating.jar. spark-cassandra-connector-java-assembly-1.4.0-M1-SNAPSHOT.jar is build against scala 2.10. \nTyping scala -version on command prompt showing scala code runner version 2.11.6. Accessing spark from spark-shell have no issue. Even access in cassandra column family from spark-shell is working fine.</p>\n\n<pre><code>import java.util.*;\nimport org.apache.spark.SparkConf;\nimport org.apache.spark.api.java.JavaRDD;\nimport org.apache.spark.api.java.JavaSparkContext;\nimport com.datastax.spark.connector.*;\nimport com.datastax.spark.connector.cql.*;\nimport com.datastax.spark.*;\nimport org.apache.spark.SparkConf;\nimport org.apache.spark.SparkContext;\nimport org.apache.spark.api.java.JavaPairRDD;\nimport org.apache.spark.api.java.JavaRDD;\nimport org.apache.spark.api.java.JavaSparkContext;\nimport org.apache.spark.api.java.function.PairFunction;\n//import scala.Tuple2;\nimport org.apache.spark.api.java.*;\n\npublic class Client {\n    public static void main(String[] a)\n    {\n        SparkConf conf = new SparkConf().setAppName(\"MTMPNLTesting\").setMaster(\"192.168.1.15\");\n    }\n}\n</code></pre>\n\n<p>What might be the reason of the error?? </p>\n"},{"tags":["java","apache-spark","cassandra","spark-cassandra-connector"],"comments":[{"owner":{"account_id":2119556,"reputation":1809,"user_id":3187921,"display_name":"abalcerek"},"score":0,"creation_date":1435436751,"post_id":31092908,"comment_id":50202748,"body_markdown":"My first guess would be that some of mtms are null.","body":"My first guess would be that some of mtms are null."}],"answers":[{"tags":[],"owner":{"account_id":4033122,"reputation":27140,"user_id":3318517,"accept_rate":67,"display_name":"Daniel Darabos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1435436814,"creation_date":1435436814,"answer_id":31093191,"question_id":31092908,"body_markdown":"I think the error is not in the code that you included in the question. Spark is trying to run `count` on an RDD. The code you included does not call `count`, so that&#39;s one sign. But the exception suggests that the RDD being counted has an iterator that was created in Java and is now being converted to a Scala iterator. At that point it turns out this iterator is in fact `null`.\r\n\r\nDoes your code produce an iterator somewhere? Perhaps in a `mapPartitions` call or some such?","title":"need help in joining spark RDD&#39;s in java","body":"<p>I think the error is not in the code that you included in the question. Spark is trying to run <code>count</code> on an RDD. The code you included does not call <code>count</code>, so that's one sign. But the exception suggests that the RDD being counted has an iterator that was created in Java and is now being converted to a Scala iterator. At that point it turns out this iterator is in fact <code>null</code>.</p>\n\n<p>Does your code produce an iterator somewhere? Perhaps in a <code>mapPartitions</code> call or some such?</p>\n"},{"tags":[],"owner":{"account_id":4643461,"reputation":59,"user_id":3762573,"display_name":"Malemi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1440004362,"creation_date":1439991312,"answer_id":32097087,"question_id":31092908,"body_markdown":"This exception is due to return a null value from one of your functions. You can return null and after that filter null tuples such as:\r\n    \r\n    JavaPairRDD&lt;String,MarkToMarketPNL&gt; openMTMPNL = openMTM.keyBy(new Function&lt;MarkToMarketPNL,String&gt;(){\r\n                public String call(MarkToMarketPNL mtm) throws Exception\r\n                {\r\n                        return mtm.getTaxlot();\r\n                }\r\n            }).filter(new Function&lt;Tuple2&lt;String, MarkToMarketPNL&gt;, Boolean&gt;() {\r\n            \r\n            @Override\r\n\t\t\tpublic Boolean call(Tuple2&lt;String, MarkToMarketPNL&gt; arg) throws Exception {\r\n\t\t\t\treturn arg == null ? false : true;\r\n           }\r\n\t\t}); ","title":"need help in joining spark RDD&#39;s in java","body":"<p>This exception is due to return a null value from one of your functions. You can return null and after that filter null tuples such as:</p>\n\n<pre><code>JavaPairRDD&lt;String,MarkToMarketPNL&gt; openMTMPNL = openMTM.keyBy(new Function&lt;MarkToMarketPNL,String&gt;(){\n            public String call(MarkToMarketPNL mtm) throws Exception\n            {\n                    return mtm.getTaxlot();\n            }\n        }).filter(new Function&lt;Tuple2&lt;String, MarkToMarketPNL&gt;, Boolean&gt;() {\n\n        @Override\n        public Boolean call(Tuple2&lt;String, MarkToMarketPNL&gt; arg) throws Exception {\n            return arg == null ? false : true;\n       }\n    }); \n</code></pre>\n"},{"tags":[],"owner":{"account_id":158927,"reputation":362,"user_id":377902,"display_name":"Abhiram"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1485482516,"creation_date":1485482516,"answer_id":41886047,"question_id":31092908,"body_markdown":"\r\nI had faced the same issue. When join operation is performed internally &amp;lt;key,Iterable&amp;lt;values&gt;&gt; gets created. If one of the Iterable&amp;lt;values&gt; object is null, we see the null pointer exception like above.\r\n\r\nMake sure that none of the values are null before performing the join. ","title":"need help in joining spark RDD&#39;s in java","body":"<p>I had faced the same issue. When join operation is performed internally &lt;key,Iterable&lt;values>> gets created. If one of the Iterable&lt;values> object is null, we see the null pointer exception like above.</p>\n\n<p>Make sure that none of the values are null before performing the join. </p>\n"}],"owner":{"account_id":2733798,"reputation":562,"user_id":2356907,"accept_rate":40,"display_name":"107"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1425,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1661043928,"creation_date":1435434848,"question_id":31092908,"body_markdown":"Need to perform the following join operation in spark      \r\n\r\n    JavaPairRDD&lt;String, Tuple2&lt;Optional&lt;MarkToMarketPNL&gt;, Optional&lt;MarkToMarketPNL&gt;&gt;&gt; finalMTMPNLRDD = openMTMPNL.fullOuterJoin(closedMTMPNL);\r\n\r\nTo perform this operation i need two JavaPairRDD which are closedMTMPNL and openMTMPNL. OpenMTM and closeMTM are working fine but keyBy on both RDD are giving error at runtime. \r\n\r\n    JavaPairRDD&lt;String,MarkToMarketPNL&gt; openMTMPNL = openMTM.keyBy(new Function&lt;MarkToMarketPNL,String&gt;(){\r\n    \t    \t\tpublic String call(MarkToMarketPNL mtm) throws Exception\r\n    \t    \t\t{\r\n    \t    \t\t\t\treturn mtm.getTaxlot();\r\n    \t    \t\t}\r\n    \t    \t}); \r\n\r\n    JavaPairRDD&lt;String,MarkToMarketPNL&gt; closedMTMPNL = closedMTM.keyBy(new Function&lt;MarkToMarketPNL,String&gt;(){\r\n        \t    \t\tpublic String call(MarkToMarketPNL mtm) throws Exception\r\n        \t    \t\t{\r\n        \t    \t\t\treturn mtm.getTaxlot();\r\n        \t    \t\t}\r\n        \t    \t}); \r\n\r\nIs there any other way in which i can join openMTM and closeMTM RDD&#39;s? As of now trying to get two &lt;String,MarkToMarket&gt; RDD&#39;s on which the join can be performed on String. What causing the exception to occur??\r\n\r\nAttaching the stack trace\r\n\r\n    java.lang.NullPointerException\r\n    15/06/28 01:19:30 ERROR Executor: Exception in task 0.0 in stage 1.0 (TID 1)\r\n    java.lang.NullPointerException\r\n    \tat scala.collection.convert.Wrappers$JIterableWrapper.iterator(Wrappers.scala:53)\r\n    \tat scala.collection.IterableLike$class.toIterator(IterableLike.scala:89)\r\n    \tat scala.collection.AbstractIterable.toIterator(Iterable.scala:54)\r\n    \tat scala.collection.Iterator$$anon$13.hasNext(Iterator.scala:371)\r\n    \tat scala.collection.Iterator$$anon$11.hasNext(Iterator.scala:327)\r\n    \tat org.apache.spark.util.Utils$.getIteratorSize(Utils.scala:1626)\r\n    \tat org.apache.spark.rdd.RDD$$anonfun$count$1.apply(RDD.scala:1095)\r\n    \tat org.apache.spark.rdd.RDD$$anonfun$count$1.apply(RDD.scala:1095)\r\n    \tat org.apache.spark.SparkContext$$anonfun$runJob$5.apply(SparkContext.scala:1765)\r\n    \tat org.apache.spark.SparkContext$$anonfun$runJob$5.apply(SparkContext.scala:1765)\r\n    \tat org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:63)\r\n    \tat org.apache.spark.scheduler.Task.run(Task.scala:70)\r\n    \tat org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:213)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\r\n    \tat java.lang.Thread.run(Unknown Source)\r\n    15/06/28 01:19:30 WARN TaskSetManager: Lost task 0.0 in stage 1.0 (TID 1, localhost): java.lang.NullPointerException\r\n    \tat scala.collection.convert.Wrappers$JIterableWrapper.iterator(Wrappers.scala:53)\r\n    \tat scala.collection.IterableLike$class.toIterator(IterableLike.scala:89)\r\n    \tat scala.collection.AbstractIterable.toIterator(Iterable.scala:54)\r\n    \tat scala.collection.Iterator$$anon$13.hasNext(Iterator.scala:371)\r\n    \tat scala.collection.Iterator$$anon$11.hasNext(Iterator.scala:327)\r\n    \tat org.apache.spark.util.Utils$.getIteratorSize(Utils.scala:1626)\r\n    \tat org.apache.spark.rdd.RDD$$anonfun$count$1.apply(RDD.scala:1095)\r\n    \tat org.apache.spark.rdd.RDD$$anonfun$count$1.apply(RDD.scala:1095)\r\n    \tat org.apache.spark.SparkContext$$anonfun$runJob$5.apply(SparkContext.scala:1765)\r\n    \tat org.apache.spark.SparkContext$$anonfun$runJob$5.apply(SparkContext.scala:1765)\r\n    \tat org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:63)\r\n    \tat org.apache.spark.scheduler.Task.run(Task.scala:70)\r\n    \tat org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:213)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\r\n    \tat java.lang.Thread.run(Unknown Source)","title":"need help in joining spark RDD&#39;s in java","body":"<p>Need to perform the following join operation in spark      </p>\n\n<pre><code>JavaPairRDD&lt;String, Tuple2&lt;Optional&lt;MarkToMarketPNL&gt;, Optional&lt;MarkToMarketPNL&gt;&gt;&gt; finalMTMPNLRDD = openMTMPNL.fullOuterJoin(closedMTMPNL);\n</code></pre>\n\n<p>To perform this operation i need two JavaPairRDD which are closedMTMPNL and openMTMPNL. OpenMTM and closeMTM are working fine but keyBy on both RDD are giving error at runtime. </p>\n\n<pre><code>JavaPairRDD&lt;String,MarkToMarketPNL&gt; openMTMPNL = openMTM.keyBy(new Function&lt;MarkToMarketPNL,String&gt;(){\n                public String call(MarkToMarketPNL mtm) throws Exception\n                {\n                        return mtm.getTaxlot();\n                }\n            }); \n\nJavaPairRDD&lt;String,MarkToMarketPNL&gt; closedMTMPNL = closedMTM.keyBy(new Function&lt;MarkToMarketPNL,String&gt;(){\n                    public String call(MarkToMarketPNL mtm) throws Exception\n                    {\n                        return mtm.getTaxlot();\n                    }\n                }); \n</code></pre>\n\n<p>Is there any other way in which i can join openMTM and closeMTM RDD's? As of now trying to get two  RDD's on which the join can be performed on String. What causing the exception to occur??</p>\n\n<p>Attaching the stack trace</p>\n\n<pre><code>java.lang.NullPointerException\n15/06/28 01:19:30 ERROR Executor: Exception in task 0.0 in stage 1.0 (TID 1)\njava.lang.NullPointerException\n    at scala.collection.convert.Wrappers$JIterableWrapper.iterator(Wrappers.scala:53)\n    at scala.collection.IterableLike$class.toIterator(IterableLike.scala:89)\n    at scala.collection.AbstractIterable.toIterator(Iterable.scala:54)\n    at scala.collection.Iterator$$anon$13.hasNext(Iterator.scala:371)\n    at scala.collection.Iterator$$anon$11.hasNext(Iterator.scala:327)\n    at org.apache.spark.util.Utils$.getIteratorSize(Utils.scala:1626)\n    at org.apache.spark.rdd.RDD$$anonfun$count$1.apply(RDD.scala:1095)\n    at org.apache.spark.rdd.RDD$$anonfun$count$1.apply(RDD.scala:1095)\n    at org.apache.spark.SparkContext$$anonfun$runJob$5.apply(SparkContext.scala:1765)\n    at org.apache.spark.SparkContext$$anonfun$runJob$5.apply(SparkContext.scala:1765)\n    at org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:63)\n    at org.apache.spark.scheduler.Task.run(Task.scala:70)\n    at org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:213)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n    at java.lang.Thread.run(Unknown Source)\n15/06/28 01:19:30 WARN TaskSetManager: Lost task 0.0 in stage 1.0 (TID 1, localhost): java.lang.NullPointerException\n    at scala.collection.convert.Wrappers$JIterableWrapper.iterator(Wrappers.scala:53)\n    at scala.collection.IterableLike$class.toIterator(IterableLike.scala:89)\n    at scala.collection.AbstractIterable.toIterator(Iterable.scala:54)\n    at scala.collection.Iterator$$anon$13.hasNext(Iterator.scala:371)\n    at scala.collection.Iterator$$anon$11.hasNext(Iterator.scala:327)\n    at org.apache.spark.util.Utils$.getIteratorSize(Utils.scala:1626)\n    at org.apache.spark.rdd.RDD$$anonfun$count$1.apply(RDD.scala:1095)\n    at org.apache.spark.rdd.RDD$$anonfun$count$1.apply(RDD.scala:1095)\n    at org.apache.spark.SparkContext$$anonfun$runJob$5.apply(SparkContext.scala:1765)\n    at org.apache.spark.SparkContext$$anonfun$runJob$5.apply(SparkContext.scala:1765)\n    at org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:63)\n    at org.apache.spark.scheduler.Task.run(Task.scala:70)\n    at org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:213)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n    at java.lang.Thread.run(Unknown Source)\n</code></pre>\n"},{"tags":["java","apache-kafka","cassandra","spark-streaming","spark-cassandra-connector"],"owner":{"account_id":5386504,"reputation":76,"user_id":4290205,"display_name":"Harshit Mathur"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":401,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1661043620,"creation_date":1442557233,"question_id":32645122,"body_markdown":"I have been trying to push large number of json messages (around 2KB each), to cassandra, coming from kafka to spark streaming.\r\n\r\nSimulator----&gt;Kafka----&gt;SparkStreaming---&gt;Cassandra.\r\n\r\nEach of these are running on separate ec2 instances with 30GB of Ram and 8 core processor as standalone single node setup.\r\n\r\nWhen, I am trying to push around 5 million messages from simulator, after around 100k messages, cassandra stops inserting messages, and spark streaming job just keeps creating batches (as seen in the spark streaming web ui). I have even checked the logs but didn&#39;t find any issues there.\r\n\r\nAlso, i am not sure about the way i am using the spark connector in the code for writing to cassandra.\r\n\r\nplease see the code below,\r\n\r\n    \r\n    \r\n    /**\r\n     * Spark Streaming to cassandra code\r\n     */\r\n\r\n    package org.sparkexample;\r\n\r\n\r\n\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n\r\n    import org.apache.spark.SparkConf;\r\n    import org.apache.spark.api.java.function.Function;\r\n    import org.apache.spark.streaming.Duration;\r\n    import org.apache.spark.streaming.api.java.JavaDStream;\r\n    import org.apache.spark.streaming.api.java.JavaPairReceiverInputDStream;\r\n    import org.apache.spark.streaming.api.java.JavaStreamingContext;\r\n    import org.apache.spark.streaming.kafka.KafkaUtils;\r\n\r\n    import com.datastax.spark.connector.japi.CassandraJavaUtil;\r\n    import com.datastax.spark.connector.japi.CassandraStreamingJavaUtil;\r\n\r\n    import scala.Tuple2;\r\n\r\n    public class SparkStreamingKafkaTest {\r\n\r\n\r\n\tprivate SparkStreamingKafkaTest() {\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tif (args.length &lt; 6) {\r\n\t\t\tSystem.err.println(&quot;Usage: SparkStreamingKafka &lt;zkQuorum&gt; &lt;group&gt; &lt;topics&gt; &lt;numThreads&gt; &lt;conc write&gt; &lt;cassandra ip&gt;&quot;);\r\n\t\t\tSystem.exit(1);\r\n\t\t}\r\n\t\r\n\t\tSparkConf sparkConf = new SparkConf().setAppName(&quot;SparkStreamingKafka&quot;);\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t//specific to cassandra\r\n\t\t\r\n\t\tsparkConf.set(&quot;spark.cassandra.output.concurrent.writes&quot;, args[4]);\r\n\t\tsparkConf.set(&quot;spark.cassandra.connection.host&quot;,args[5]);\r\n\t\t\r\n\t\t// Create the context with a 2 second batch size\r\n\t\tJavaStreamingContext jssc = new JavaStreamingContext(sparkConf, new Duration(2000));\r\n\t\tint numThreads = Integer.parseInt(args[3]);\r\n\t\tMap&lt;String, Integer&gt; topicMap = new HashMap&lt;String, Integer&gt;();\r\n\t\tString[] topics = args[2].split(&quot;,&quot;);\r\n\t\tfor (String topic : topics) {\r\n\t\t\ttopicMap.put(topic, numThreads);\r\n\t\t}\r\n\t\t\r\n\t\tJavaPairReceiverInputDStream&lt;String, String&gt; messages = KafkaUtils.createStream(jssc, args[0], args[1],\r\n\t\t\t\ttopicMap);\r\n\t\t\r\n\t\tJavaDStream&lt;WordCount&gt; wc = messages.map(new Function&lt;Tuple2&lt;String, String&gt;, WordCount&gt;() {\r\n\t\t\t\r\n\t\t\t@Override\r\n\t\t\tpublic WordCount call(Tuple2&lt;String, String&gt; tuple2) {\r\n\t\t\t\tString key = System.currentTimeMillis()+ &quot;_&quot;+ Math.random();\r\n\t\t\t\treturn new WordCount(key, tuple2._2());\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tMap &lt;String, String&gt; map =  new HashMap&lt;String, String&gt;();\r\n\t\tmap.put(&quot;word&quot;, &quot;word&quot;);\r\n\t\tmap.put(&quot;count&quot;, &quot;count&quot;);\r\n\t\r\n        CassandraStreamingJavaUtil.javaFunctions(wc).writerBuilder(&quot;mykeyspace&quot;, &quot;wordcount&quot;,CassandraJavaUtil.mapToRow(WordCount.class, map)).saveToCassandra(); \r\n\t\t\r\n\t\tjssc.start();\r\n\t\tjssc.awaitTermination();\r\n   \t  }\r\n\r\n\r\n      }\r\n\r\nWordCount.java\r\n     \r\n\r\n      package org.sparkexample;\r\n\r\n      import java.io.Serializable;\r\n\r\n      public class WordCount implements Serializable{\r\n\r\n\t  private String word;\r\n\t  private String count;\r\n\t\r\n\t  public WordCount(){\r\n\t\t\r\n\t  }\r\n\r\n\t  public String getWord() {\r\n\t\treturn word;\r\n\t  }\r\n\t  public void setWord(String word) {\r\n\t\tthis.word = word;\r\n\t  }\r\n\t  public String getCount() {\r\n\t\treturn count;\r\n\t  }\r\n\t  public void setCount(String count) {\r\n\t\tthis.count = count;\r\n\t  }\r\n\t\r\n\t  public WordCount(String key, String count) {\r\n\t\tthis.word = key;\r\n\t\tthis.count = count;\r\n\t  }\r\n      }\r\n\r\nI have been using the default cassandra.yml with the following major dependencies,\r\n\r\n - spark-cassandra-connector_2.10 - 1.4.0-M3 \r\n - spark-cassandra-connector-java_2.10 - 1.4.0-M3\r\n - cassandra-driver-core - 2.1.7.1\r\n - spark-streaming-kafka_2.10 - 1.4.1\r\n - spark-streaming_2.10 - 1.4.1\r\n - spark-core_2.10 - 1.4.1\r\n\r\nPlease suggest what can be the issue.\r\n\r\n\r\n\r\nThe output of the nodetool info and nodetool tpstats is as under.\r\n\r\n[![nodetool info][1]][1]\r\n\r\n\r\n[![nodetool tpstat][2]][2]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/6inWE.png\r\n  [2]: http://i.stack.imgur.com/485MH.png","title":"Issue pushing large number of messages in Cassandra from spark streaming using cassandra spark connector (java)","body":"<p>I have been trying to push large number of json messages (around 2KB each), to cassandra, coming from kafka to spark streaming.</p>\n\n<p>Simulator---->Kafka---->SparkStreaming--->Cassandra.</p>\n\n<p>Each of these are running on separate ec2 instances with 30GB of Ram and 8 core processor as standalone single node setup.</p>\n\n<p>When, I am trying to push around 5 million messages from simulator, after around 100k messages, cassandra stops inserting messages, and spark streaming job just keeps creating batches (as seen in the spark streaming web ui). I have even checked the logs but didn't find any issues there.</p>\n\n<p>Also, i am not sure about the way i am using the spark connector in the code for writing to cassandra.</p>\n\n<p>please see the code below,</p>\n\n<pre><code>/**\n * Spark Streaming to cassandra code\n */\n\npackage org.sparkexample;\n\n\n\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport org.apache.spark.SparkConf;\nimport org.apache.spark.api.java.function.Function;\nimport org.apache.spark.streaming.Duration;\nimport org.apache.spark.streaming.api.java.JavaDStream;\nimport org.apache.spark.streaming.api.java.JavaPairReceiverInputDStream;\nimport org.apache.spark.streaming.api.java.JavaStreamingContext;\nimport org.apache.spark.streaming.kafka.KafkaUtils;\n\nimport com.datastax.spark.connector.japi.CassandraJavaUtil;\nimport com.datastax.spark.connector.japi.CassandraStreamingJavaUtil;\n\nimport scala.Tuple2;\n\npublic class SparkStreamingKafkaTest {\n\n\nprivate SparkStreamingKafkaTest() {\n}\n\npublic static void main(String[] args) {\n    if (args.length &lt; 6) {\n        System.err.println(\"Usage: SparkStreamingKafka &lt;zkQuorum&gt; &lt;group&gt; &lt;topics&gt; &lt;numThreads&gt; &lt;conc write&gt; &lt;cassandra ip&gt;\");\n        System.exit(1);\n    }\n\n    SparkConf sparkConf = new SparkConf().setAppName(\"SparkStreamingKafka\");\n\n\n\n\n    //specific to cassandra\n\n    sparkConf.set(\"spark.cassandra.output.concurrent.writes\", args[4]);\n    sparkConf.set(\"spark.cassandra.connection.host\",args[5]);\n\n    // Create the context with a 2 second batch size\n    JavaStreamingContext jssc = new JavaStreamingContext(sparkConf, new Duration(2000));\n    int numThreads = Integer.parseInt(args[3]);\n    Map&lt;String, Integer&gt; topicMap = new HashMap&lt;String, Integer&gt;();\n    String[] topics = args[2].split(\",\");\n    for (String topic : topics) {\n        topicMap.put(topic, numThreads);\n    }\n\n    JavaPairReceiverInputDStream&lt;String, String&gt; messages = KafkaUtils.createStream(jssc, args[0], args[1],\n            topicMap);\n\n    JavaDStream&lt;WordCount&gt; wc = messages.map(new Function&lt;Tuple2&lt;String, String&gt;, WordCount&gt;() {\n\n        @Override\n        public WordCount call(Tuple2&lt;String, String&gt; tuple2) {\n            String key = System.currentTimeMillis()+ \"_\"+ Math.random();\n            return new WordCount(key, tuple2._2());\n        }\n    });\n\n    Map &lt;String, String&gt; map =  new HashMap&lt;String, String&gt;();\n    map.put(\"word\", \"word\");\n    map.put(\"count\", \"count\");\n\n    CassandraStreamingJavaUtil.javaFunctions(wc).writerBuilder(\"mykeyspace\", \"wordcount\",CassandraJavaUtil.mapToRow(WordCount.class, map)).saveToCassandra(); \n\n    jssc.start();\n    jssc.awaitTermination();\n  }\n\n\n  }\n</code></pre>\n\n<p>WordCount.java</p>\n\n<pre><code>  package org.sparkexample;\n\n  import java.io.Serializable;\n\n  public class WordCount implements Serializable{\n\n  private String word;\n  private String count;\n\n  public WordCount(){\n\n  }\n\n  public String getWord() {\n    return word;\n  }\n  public void setWord(String word) {\n    this.word = word;\n  }\n  public String getCount() {\n    return count;\n  }\n  public void setCount(String count) {\n    this.count = count;\n  }\n\n  public WordCount(String key, String count) {\n    this.word = key;\n    this.count = count;\n  }\n  }\n</code></pre>\n\n<p>I have been using the default cassandra.yml with the following major dependencies,</p>\n\n<ul>\n<li>spark-cassandra-connector_2.10 - 1.4.0-M3 </li>\n<li>spark-cassandra-connector-java_2.10 - 1.4.0-M3</li>\n<li>cassandra-driver-core - 2.1.7.1</li>\n<li>spark-streaming-kafka_2.10 - 1.4.1</li>\n<li>spark-streaming_2.10 - 1.4.1</li>\n<li>spark-core_2.10 - 1.4.1</li>\n</ul>\n\n<p>Please suggest what can be the issue.</p>\n\n<p>The output of the nodetool info and nodetool tpstats is as under.</p>\n\n<p><a href=\"https://i.stack.imgur.com/6inWE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6inWE.png\" alt=\"nodetool info\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/485MH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/485MH.png\" alt=\"nodetool tpstat\"></a></p>\n"},{"tags":["java","binary-serialization","project-panama"],"comments":[{"owner":{"account_id":4610643,"reputation":1454,"user_id":3738870,"display_name":"user3738870"},"score":0,"creation_date":1661033188,"post_id":73430301,"comment_id":129675807,"body_markdown":"Maybe you also need to set `withBitAlignment` on `SIZE_FIELD`?","body":"Maybe you also need to set <code>withBitAlignment</code> on <code>SIZE_FIELD</code>?"},{"owner":{"account_id":18510058,"reputation":615,"user_id":13485494,"display_name":"Gavin Ray"},"score":0,"creation_date":1661034382,"post_id":73430301,"comment_id":129675971,"body_markdown":"@user3738870 Unfortunately not, but maybe you&#39;re on to something there. I used pahole to look at how GCC lays out the C struct when compiling and there are 4 bytes of padding between the fields for alignment, maybe it&#39;s something to do with that?","body":"@user3738870 Unfortunately not, but maybe you&#39;re on to something there. I used pahole to look at how GCC lays out the C struct when compiling and there are 4 bytes of padding between the fields for alignment, maybe it&#39;s something to do with that?"},{"owner":{"account_id":4610643,"reputation":1454,"user_id":3738870,"display_name":"user3738870"},"score":0,"creation_date":1661034753,"post_id":73430301,"comment_id":129676021,"body_markdown":"Based on the error message, it does have to do with alignment. Another thing you can try is to set in on `LAYOUT` with `withBitAlignment`.","body":"Based on the error message, it does have to do with alignment. Another thing you can try is to set in on <code>LAYOUT</code> with <code>withBitAlignment</code>."}],"answers":[{"tags":[],"owner":{"account_id":18510058,"reputation":615,"user_id":13485494,"display_name":"Gavin Ray"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661038869,"creation_date":1661038869,"answer_id":73430759,"question_id":73430301,"body_markdown":"I managed to fix it, there were two changes I made:\r\n\r\n1. I used the `jextract` tool to generate Java code similar to mine, to see where it might differ. It was mostly the same, but they defined C interop types like this:\r\n\r\n```java\r\nclass Constants {\r\n    static final ValueLayout.OfBoolean C_BOOL_LAYOUT = ValueLayout.JAVA_BOOLEAN;\r\n    static final ValueLayout.OfByte C_CHAR_LAYOUT = ValueLayout.JAVA_BYTE;\r\n    static final ValueLayout.OfShort C_SHORT_LAYOUT = ValueLayout.JAVA_SHORT.withBitAlignment(16);\r\n    static final ValueLayout.OfInt C_INT_LAYOUT = ValueLayout.JAVA_INT.withBitAlignment(32);\r\n    static final ValueLayout.OfInt C_LONG_LAYOUT = ValueLayout.JAVA_INT.withBitAlignment(32);\r\n    static final ValueLayout.OfLong C_LONG_LONG_LAYOUT = ValueLayout.JAVA_LONG.withBitAlignment(64);\r\n    static final ValueLayout.OfFloat C_FLOAT_LAYOUT = ValueLayout.JAVA_FLOAT.withBitAlignment(32);\r\n    static final ValueLayout.OfDouble C_DOUBLE_LAYOUT = ValueLayout.JAVA_DOUBLE.withBitAlignment(64);\r\n    static final ValueLayout.OfAddress C_POINTER_LAYOUT = ValueLayout.ADDRESS.withBitAlignment(64);\r\n}\r\n```\r\n\r\nAnd I noticed it had inserted 32 bytes of padding between the fields.\r\nSo I changed the definition of `Tuple`&#39;s layout to the below:\r\n\r\n```java\r\npublic static ValueLayout.OfInt SIZE_FIELD = Constants.C_LONG_LAYOUT.withName(&quot;size&quot;);\r\npublic static ValueLayout.OfAddress DATA_FIELD = Constants.C_POINTER_LAYOUT.withName(&quot;data&quot;);\r\n\r\npublic static GroupLayout LAYOUT = MemoryLayout.structLayout(\r\n        SIZE_FIELD,\r\n        MemoryLayout.paddingLayout(32),\r\n        DATA_FIELD\r\n).withName(&quot;Tuple&quot;);\r\n```\r\n\r\n2. Instead of trying to pass in the memory segment from `MemorySegment.ofArray(bytes)` to `.deserialize()`, I allocated the memory first and then copied the bytes memory into it:\r\n\r\n```java\r\n// Now read the file back in\r\ntry (MemorySession session = MemorySession.openConfined()) {\r\n    byte[] bytes = Files.readAllBytes(Paths.get(&quot;tuple.bin&quot;));\r\n\r\n    MemorySegment segment = session.allocate(Tuple.LAYOUT);\r\n    segment.copyFrom(MemorySegment.ofArray(bytes));\r\n\r\n    Tuple tuple2 = Tuple.deserialize(segment);\r\n    System.out.println(tuple2);\r\n    System.out.println(new String(tuple2.data()));\r\n} catch (Exception e) {\r\n    throw new RuntimeException(e);\r\n}\r\n```\r\n","title":"Java: Foreign Memory &quot;VarHandleSegmentViewBase&quot; error, Misaligned Access at Address","body":"<p>I managed to fix it, there were two changes I made:</p>\n<ol>\n<li>I used the <code>jextract</code> tool to generate Java code similar to mine, to see where it might differ. It was mostly the same, but they defined C interop types like this:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>class Constants {\n    static final ValueLayout.OfBoolean C_BOOL_LAYOUT = ValueLayout.JAVA_BOOLEAN;\n    static final ValueLayout.OfByte C_CHAR_LAYOUT = ValueLayout.JAVA_BYTE;\n    static final ValueLayout.OfShort C_SHORT_LAYOUT = ValueLayout.JAVA_SHORT.withBitAlignment(16);\n    static final ValueLayout.OfInt C_INT_LAYOUT = ValueLayout.JAVA_INT.withBitAlignment(32);\n    static final ValueLayout.OfInt C_LONG_LAYOUT = ValueLayout.JAVA_INT.withBitAlignment(32);\n    static final ValueLayout.OfLong C_LONG_LONG_LAYOUT = ValueLayout.JAVA_LONG.withBitAlignment(64);\n    static final ValueLayout.OfFloat C_FLOAT_LAYOUT = ValueLayout.JAVA_FLOAT.withBitAlignment(32);\n    static final ValueLayout.OfDouble C_DOUBLE_LAYOUT = ValueLayout.JAVA_DOUBLE.withBitAlignment(64);\n    static final ValueLayout.OfAddress C_POINTER_LAYOUT = ValueLayout.ADDRESS.withBitAlignment(64);\n}\n</code></pre>\n<p>And I noticed it had inserted 32 bytes of padding between the fields.\nSo I changed the definition of <code>Tuple</code>'s layout to the below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static ValueLayout.OfInt SIZE_FIELD = Constants.C_LONG_LAYOUT.withName(&quot;size&quot;);\npublic static ValueLayout.OfAddress DATA_FIELD = Constants.C_POINTER_LAYOUT.withName(&quot;data&quot;);\n\npublic static GroupLayout LAYOUT = MemoryLayout.structLayout(\n        SIZE_FIELD,\n        MemoryLayout.paddingLayout(32),\n        DATA_FIELD\n).withName(&quot;Tuple&quot;);\n</code></pre>\n<ol start=\"2\">\n<li>Instead of trying to pass in the memory segment from <code>MemorySegment.ofArray(bytes)</code> to <code>.deserialize()</code>, I allocated the memory first and then copied the bytes memory into it:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>// Now read the file back in\ntry (MemorySession session = MemorySession.openConfined()) {\n    byte[] bytes = Files.readAllBytes(Paths.get(&quot;tuple.bin&quot;));\n\n    MemorySegment segment = session.allocate(Tuple.LAYOUT);\n    segment.copyFrom(MemorySegment.ofArray(bytes));\n\n    Tuple tuple2 = Tuple.deserialize(segment);\n    System.out.println(tuple2);\n    System.out.println(new String(tuple2.data()));\n} catch (Exception e) {\n    throw new RuntimeException(e);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1661043612,"creation_date":1661043612,"answer_id":73431044,"question_id":73430301,"body_markdown":"You are reading values with aligned layouts from a `byte[]`, but the elements of a `byte[]` are only assumed/guaranteed to be aligned to 1 byte (i.e. not aligned really). So, reading/writing a value with a layout that has a larger alignment constraint (such as the layouts you&#39;re using) will fail with an exception like that.\r\n\r\nIt likely works in the case where you are writing the data because in that case you&#39;re using a native segment. For native segments the &#39;real&#39; memory address is used to do alignment checking, and the underlying allocator, which is `malloc`, typically return 16-byte aligned memory regions. (Though, [the Java code only requests 1-byte alignment](https://download.java.net/java/early_access/jdk20/docs/api/java.base/java/lang/foreign/SegmentAllocator.html#allocate(long)))\r\n\r\nIf you want to read from a `byte[]` directly like that, you can get around the exception by applying `.withBitAlignment(8)` to all the layouts you&#39;re using, which will effectively turn off the alignment checking.","title":"Java: Foreign Memory &quot;VarHandleSegmentViewBase&quot; error, Misaligned Access at Address","body":"<p>You are reading values with aligned layouts from a <code>byte[]</code>, but the elements of a <code>byte[]</code> are only assumed/guaranteed to be aligned to 1 byte (i.e. not aligned really). So, reading/writing a value with a layout that has a larger alignment constraint (such as the layouts you're using) will fail with an exception like that.</p>\n<p>It likely works in the case where you are writing the data because in that case you're using a native segment. For native segments the 'real' memory address is used to do alignment checking, and the underlying allocator, which is <code>malloc</code>, typically return 16-byte aligned memory regions. (Though, <a href=\"https://download.java.net/java/early_access/jdk20/docs/api/java.base/java/lang/foreign/SegmentAllocator.html#allocate(long)\" rel=\"nofollow noreferrer\">the Java code only requests 1-byte alignment</a>)</p>\n<p>If you want to read from a <code>byte[]</code> directly like that, you can get around the exception by applying <code>.withBitAlignment(8)</code> to all the layouts you're using, which will effectively turn off the alignment checking.</p>\n"}],"owner":{"account_id":18510058,"reputation":615,"user_id":13485494,"display_name":"Gavin Ray"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":292,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":73431044,"answer_count":2,"score":2,"last_activity_date":1661043612,"creation_date":1661031477,"question_id":73430301,"body_markdown":"I&#39;m trying to understand how to read/write binary encoded versions of a simple struct, like below:\r\n\r\n```c\r\ntypedef struct Tuple {\r\n    uint32_t length;\r\n    uint8_t* data;\r\n} Tuple;\r\n```\r\n\r\nI have the following code, which can correctly write a `Tuple` record in Java to binary data in a `MemorySegment` directly. But trying to read that data back fails -- whereas a simple C program can read it just fine.\r\n\r\n```java\r\nCaused by: java.lang.IllegalArgumentException: Misaligned access at address: 16\r\n\tat java.base/java.lang.invoke.VarHandleSegmentViewBase.newIllegalArgumentExceptionForMisalignedAccess(VarHandleSegmentViewBase.java:57)\r\n\tat java.base/java.lang.invoke.VarHandleSegmentAsInts.offsetNoVMAlignCheck(VarHandleSegmentAsInts.java:100)\r\n\tat java.base/java.lang.invoke.VarHandleSegmentAsInts.get(VarHandleSegmentAsInts.java:111)\r\n\tat com.example.Tuple.deserialize(App.java:233)\r\n```\r\n\r\nWhat am I doing wrong in the below?\r\n\r\n```java\r\nrecord Tuple(int size, byte[] data) {\r\n\r\n    public static ValueLayout.OfInt SIZE_FIELD = ValueLayout.JAVA_INT.withName(&quot;size&quot;);\r\n    public static ValueLayout.OfAddress DATA_FIELD = ValueLayout.ADDRESS.withName(&quot;data&quot;).withBitAlignment(32);\r\n\r\n    public static GroupLayout LAYOUT = MemoryLayout.structLayout(SIZE_FIELD, DATA_FIELD).withName(&quot;Tuple&quot;);\r\n\r\n    public static VarHandle VH_SIZE = LAYOUT.varHandle(MemoryLayout.PathElement.groupElement(&quot;size&quot;));\r\n    public static VarHandle VH_DATA = LAYOUT.varHandle(MemoryLayout.PathElement.groupElement(&quot;data&quot;));\r\n\r\n    Tuple(byte[] data) {\r\n        this(data.length, data);\r\n    }\r\n\r\n    public static Tuple deserialize(MemorySegment segment) {\r\n        int size = (int) VH_SIZE.get(segment);\r\n        byte[] data = segment\r\n                .asSlice(SIZE_FIELD.byteSize())\r\n                .toArray(ValueLayout.JAVA_BYTE);\r\n        return new Tuple(size, data);\r\n    }\r\n\r\n    public int byteSize() {\r\n        return (int) (size + ValueLayout.JAVA_INT.byteSize());\r\n    }\r\n\r\n    public void serialize(MemorySegment segment) {\r\n        VH_SIZE.set(segment, size);\r\n        segment\r\n                .asSlice(ValueLayout.JAVA_INT.byteSize())\r\n                .copyFrom(MemorySegment.ofArray(data));\r\n    }\r\n}\r\n```\r\n\r\n```java\r\npublic static void main(String[] args) throws Exception {\r\n    Tuple tuple = new Tuple(&quot;Hello&quot;.getBytes());\r\n\r\n    File file = new File(&quot;tuple.bin&quot;);\r\n    file.createNewFile();\r\n\r\n    try (MemorySession session = MemorySession.openConfined()) {\r\n        MemorySegment segment = session.allocate(tuple.byteSize() * 2L);\r\n        tuple.serialize(segment);\r\n        byte[] bytes = segment.toArray(ValueLayout.JAVA_BYTE);\r\n        Files.write(file.toPath(), bytes);\r\n    } catch (Exception e) {\r\n        throw new RuntimeException(e);\r\n    }\r\n\r\n    // Now read the file back in\r\n    try (MemorySession session = MemorySession.openConfined()) {\r\n        byte[] bytes = Files.readAllBytes(Paths.get(&quot;tuple.bin&quot;));\r\n        MemorySegment segment = MemorySegment.ofArray(bytes);\r\n        Tuple tuple2 = Tuple.deserialize(segment);\r\n        System.out.println(tuple2);\r\n    } catch (Exception e) {\r\n        throw new RuntimeException(e);\r\n    }\r\n}\r\n```\r\n\r\nI use the below C program to confirm it works there:\r\n```c\r\n#include &lt;stdint.h&gt;\r\n#include &lt;stdio.h&gt;\r\n#include &lt;stdlib.h&gt;\r\n\r\ntypedef struct Tuple {\r\n    uint32_t length;\r\n    uint8_t* data;\r\n} Tuple;\r\n\r\nconst char* EXAMPLE_FILE = &quot;tuple.bin&quot;;\r\n\r\nint main() {\r\n    FILE* file = fopen(EXAMPLE_FILE, &quot;rb&quot;);\r\n    if (file == NULL) {\r\n        printf(&quot;Could not open file %s\\n&quot;, EXAMPLE_FILE);\r\n        return 1;\r\n    }\r\n\r\n    Tuple tuple;\r\n    fread(&amp;tuple.length, sizeof(uint32_t), 1, file);\r\n    tuple.data = malloc(tuple.length);\r\n    fread(tuple.data, sizeof(uint8_t), tuple.length, file);\r\n    fclose(file);\r\n\r\n    // Convert tuple data to string\r\n    char* string = malloc(tuple.length + 1);\r\n    for (uint32_t i = 0; i &lt; tuple.length; i++) {\r\n        string[i] = tuple.data[i];\r\n    }\r\n    string[tuple.length] = &#39;\\0&#39;;\r\n\r\n    printf(&quot;Tuple size: %u bytes\\n&quot;, tuple.length);\r\n    printf(&quot;Tuple data: %s\\n&quot;, string);\r\n\r\n    return 0;\r\n}\r\n```\r\n\r\n**EDIT:** After using `pahole` to look at compiled struct layout, it seems there is 4 bytes padding inserted between the `Tuple` fields for alignment\r\n\r\nMaybe the error is to do with this?\r\n\r\n```c\r\nstruct Tuple {\r\n\tuint32_t                   length;               /*     0     4 */\r\n\r\n\t/* XXX 4 bytes hole, try to pack */\r\n\r\n\tuint8_t *                  data;                 /*     8     8 */\r\n\r\n\t/* size: 16, cachelines: 1, members: 2 */\r\n\t/* sum members: 12, holes: 1, sum holes: 4 */\r\n\t/* last cacheline: 16 bytes */\r\n};\r\n```\r\n\r\n[![enter image description here][1]][1]\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/sjfVH.png\r\n  [2]: https://i.stack.imgur.com/Of0Nd.png","title":"Java: Foreign Memory &quot;VarHandleSegmentViewBase&quot; error, Misaligned Access at Address","body":"<p>I'm trying to understand how to read/write binary encoded versions of a simple struct, like below:</p>\n<pre class=\"lang-c prettyprint-override\"><code>typedef struct Tuple {\n    uint32_t length;\n    uint8_t* data;\n} Tuple;\n</code></pre>\n<p>I have the following code, which can correctly write a <code>Tuple</code> record in Java to binary data in a <code>MemorySegment</code> directly. But trying to read that data back fails -- whereas a simple C program can read it just fine.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Caused by: java.lang.IllegalArgumentException: Misaligned access at address: 16\n    at java.base/java.lang.invoke.VarHandleSegmentViewBase.newIllegalArgumentExceptionForMisalignedAccess(VarHandleSegmentViewBase.java:57)\n    at java.base/java.lang.invoke.VarHandleSegmentAsInts.offsetNoVMAlignCheck(VarHandleSegmentAsInts.java:100)\n    at java.base/java.lang.invoke.VarHandleSegmentAsInts.get(VarHandleSegmentAsInts.java:111)\n    at com.example.Tuple.deserialize(App.java:233)\n</code></pre>\n<p>What am I doing wrong in the below?</p>\n<pre class=\"lang-java prettyprint-override\"><code>record Tuple(int size, byte[] data) {\n\n    public static ValueLayout.OfInt SIZE_FIELD = ValueLayout.JAVA_INT.withName(&quot;size&quot;);\n    public static ValueLayout.OfAddress DATA_FIELD = ValueLayout.ADDRESS.withName(&quot;data&quot;).withBitAlignment(32);\n\n    public static GroupLayout LAYOUT = MemoryLayout.structLayout(SIZE_FIELD, DATA_FIELD).withName(&quot;Tuple&quot;);\n\n    public static VarHandle VH_SIZE = LAYOUT.varHandle(MemoryLayout.PathElement.groupElement(&quot;size&quot;));\n    public static VarHandle VH_DATA = LAYOUT.varHandle(MemoryLayout.PathElement.groupElement(&quot;data&quot;));\n\n    Tuple(byte[] data) {\n        this(data.length, data);\n    }\n\n    public static Tuple deserialize(MemorySegment segment) {\n        int size = (int) VH_SIZE.get(segment);\n        byte[] data = segment\n                .asSlice(SIZE_FIELD.byteSize())\n                .toArray(ValueLayout.JAVA_BYTE);\n        return new Tuple(size, data);\n    }\n\n    public int byteSize() {\n        return (int) (size + ValueLayout.JAVA_INT.byteSize());\n    }\n\n    public void serialize(MemorySegment segment) {\n        VH_SIZE.set(segment, size);\n        segment\n                .asSlice(ValueLayout.JAVA_INT.byteSize())\n                .copyFrom(MemorySegment.ofArray(data));\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) throws Exception {\n    Tuple tuple = new Tuple(&quot;Hello&quot;.getBytes());\n\n    File file = new File(&quot;tuple.bin&quot;);\n    file.createNewFile();\n\n    try (MemorySession session = MemorySession.openConfined()) {\n        MemorySegment segment = session.allocate(tuple.byteSize() * 2L);\n        tuple.serialize(segment);\n        byte[] bytes = segment.toArray(ValueLayout.JAVA_BYTE);\n        Files.write(file.toPath(), bytes);\n    } catch (Exception e) {\n        throw new RuntimeException(e);\n    }\n\n    // Now read the file back in\n    try (MemorySession session = MemorySession.openConfined()) {\n        byte[] bytes = Files.readAllBytes(Paths.get(&quot;tuple.bin&quot;));\n        MemorySegment segment = MemorySegment.ofArray(bytes);\n        Tuple tuple2 = Tuple.deserialize(segment);\n        System.out.println(tuple2);\n    } catch (Exception e) {\n        throw new RuntimeException(e);\n    }\n}\n</code></pre>\n<p>I use the below C program to confirm it works there:</p>\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdint.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct Tuple {\n    uint32_t length;\n    uint8_t* data;\n} Tuple;\n\nconst char* EXAMPLE_FILE = &quot;tuple.bin&quot;;\n\nint main() {\n    FILE* file = fopen(EXAMPLE_FILE, &quot;rb&quot;);\n    if (file == NULL) {\n        printf(&quot;Could not open file %s\\n&quot;, EXAMPLE_FILE);\n        return 1;\n    }\n\n    Tuple tuple;\n    fread(&amp;tuple.length, sizeof(uint32_t), 1, file);\n    tuple.data = malloc(tuple.length);\n    fread(tuple.data, sizeof(uint8_t), tuple.length, file);\n    fclose(file);\n\n    // Convert tuple data to string\n    char* string = malloc(tuple.length + 1);\n    for (uint32_t i = 0; i &lt; tuple.length; i++) {\n        string[i] = tuple.data[i];\n    }\n    string[tuple.length] = '\\0';\n\n    printf(&quot;Tuple size: %u bytes\\n&quot;, tuple.length);\n    printf(&quot;Tuple data: %s\\n&quot;, string);\n\n    return 0;\n}\n</code></pre>\n<p><strong>EDIT:</strong> After using <code>pahole</code> to look at compiled struct layout, it seems there is 4 bytes padding inserted between the <code>Tuple</code> fields for alignment</p>\n<p>Maybe the error is to do with this?</p>\n<pre class=\"lang-c prettyprint-override\"><code>struct Tuple {\n    uint32_t                   length;               /*     0     4 */\n\n    /* XXX 4 bytes hole, try to pack */\n\n    uint8_t *                  data;                 /*     8     8 */\n\n    /* size: 16, cachelines: 1, members: 2 */\n    /* sum members: 12, holes: 1, sum holes: 4 */\n    /* last cacheline: 16 bytes */\n};\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/sjfVH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sjfVH.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/Of0Nd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Of0Nd.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","apache-spark","cassandra","spark-cassandra-connector"],"comments":[{"owner":{"account_id":74439,"reputation":10875,"user_id":213901,"accept_rate":82,"display_name":"Mike Park"},"score":0,"creation_date":1447781081,"post_id":33760644,"comment_id":55294106,"body_markdown":"Can you print the `toDebugString` for `storeCustomerReport` and see what it says?","body":"Can you print the <code>toDebugString</code> for <code>storeCustomerReport</code> and see what it says?"},{"owner":{"account_id":79996,"reputation":5442,"user_id":226487,"accept_rate":71,"display_name":"Ivan Stoyanov"},"score":0,"creation_date":1447832529,"post_id":33760644,"comment_id":55315255,"body_markdown":"@climbage I edited my question and added the debug string","body":"@climbage I edited my question and added the debug string"}],"answers":[{"tags":[],"owner":{"account_id":3025334,"reputation":2293,"user_id":2565484,"display_name":"code"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1480072655,"creation_date":1480072655,"answer_id":40803785,"question_id":33760644,"body_markdown":"It looks like you are applying two actions in below code segment\r\n\r\n    // Map the customers to a custom class, thus adding new properties.\r\n    DataFrame storeCustomerReport = sqlContext.createDataFrame(customersWhoHaventOrderedTheProduct.toJavaRDD()\r\n        .map(row -&gt; new StoreCustomerReport(bStoreId.value(), bReportName.getValue(), bReportTime.getValue(), bNumberOfCustomers.getValue(), row.getString(0), row.getString(1), row.getString(2))), StoreCustomerReport.class);\r\n    \r\n    \r\n    // Save the DataFrame to cassandra\r\n    storeCustomerReport.write().mode(SaveMode.Append)\r\n        .option(&quot;keyspace&quot;, &quot;my_keyspace&quot;)\r\n\r\nOne at `sqlContext.createDataFrame()` and the other at `storeCustomerReport.write()` and both of these require `customersWhoHaventOrderedTheProduct.toJavaRDD()`.\r\n\r\nPersisting the RDD produced by should solve this issue. \r\n\r\n    JavaRDD cachedRdd = customersWhoHaventOrderedTheProduct.toJavaRDD().persist(StorageLevel.DISK_AND_MEMORY) //Or any other storage level","title":"Spark is executing every single action two times","body":"<p>It looks like you are applying two actions in below code segment</p>\n\n<pre><code>// Map the customers to a custom class, thus adding new properties.\nDataFrame storeCustomerReport = sqlContext.createDataFrame(customersWhoHaventOrderedTheProduct.toJavaRDD()\n    .map(row -&gt; new StoreCustomerReport(bStoreId.value(), bReportName.getValue(), bReportTime.getValue(), bNumberOfCustomers.getValue(), row.getString(0), row.getString(1), row.getString(2))), StoreCustomerReport.class);\n\n\n// Save the DataFrame to cassandra\nstoreCustomerReport.write().mode(SaveMode.Append)\n    .option(\"keyspace\", \"my_keyspace\")\n</code></pre>\n\n<p>One at <code>sqlContext.createDataFrame()</code> and the other at <code>storeCustomerReport.write()</code> and both of these require <code>customersWhoHaventOrderedTheProduct.toJavaRDD()</code>.</p>\n\n<p>Persisting the RDD produced by should solve this issue. </p>\n\n<pre><code>JavaRDD cachedRdd = customersWhoHaventOrderedTheProduct.toJavaRDD().persist(StorageLevel.DISK_AND_MEMORY) //Or any other storage level\n</code></pre>\n"}],"owner":{"account_id":79996,"reputation":5442,"user_id":226487,"accept_rate":71,"display_name":"Ivan Stoyanov"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4908,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1661043376,"creation_date":1447773885,"question_id":33760644,"body_markdown":"I have created a simple Java application that uses Apache Spark to retrieve data from Cassandra, do some transformation on it and save it in another Cassandra table. \r\n\r\nI am using Apache Spark 1.4.1 configured in a standalone cluster mode with a single master and slave, located on my machine.\r\n \r\n\r\n    DataFrame customers = sqlContext.cassandraSql(&quot;SELECT email, first_name, last_name FROM customer &quot; +\r\n        &quot;WHERE CAST(store_id as string) = &#39;&quot; + storeId + &quot;&#39;&quot;);\r\n    \r\n    DataFrame customersWhoOrderedTheProduct = sqlContext.cassandraSql(&quot;SELECT email FROM customer_bought_product &quot; +\r\n        &quot;WHERE CAST(store_id as string) = &#39;&quot; + storeId + &quot;&#39; AND product_id = &quot; + productId + &quot;&quot;);\r\n    \r\n    // We need only the customers who did not order the product\r\n    // We cache the DataFrame because we use it twice.\r\n    DataFrame customersWhoHaventOrderedTheProduct = customers\r\n        .join(customersWhoOrderedTheProduct\r\n        .select(customersWhoOrderedTheProduct.col(&quot;email&quot;)), customers.col(&quot;email&quot;).equalTo(customersWhoOrderedTheProduct.col(&quot;email&quot;)), &quot;leftouter&quot;)\r\n        .where(customersWhoOrderedTheProduct.col(&quot;email&quot;).isNull())\r\n        .drop(customersWhoOrderedTheProduct.col(&quot;email&quot;))\r\n        .cache();\r\n    \r\n    int numberOfCustomers = (int) customersWhoHaventOrderedTheProduct.count();\r\n    \r\n    Date reportTime = new Date();\r\n    \r\n    // Prepare the Broadcast values. They are used in the map below.\r\n    Broadcast&lt;String&gt; bStoreId = sparkContext.broadcast(storeId, classTag(String.class));\r\n    Broadcast&lt;String&gt; bReportName = sparkContext.broadcast(MessageBrokerQueue.report_did_not_buy_product.toString(), classTag(String.class));\r\n    Broadcast&lt;java.sql.Timestamp&gt; bReportTime = sparkContext.broadcast(new java.sql.Timestamp(reportTime.getTime()), classTag(java.sql.Timestamp.class));\r\n    Broadcast&lt;Integer&gt; bNumberOfCustomers = sparkContext.broadcast(numberOfCustomers, classTag(Integer.class));\r\n    \r\n    // Map the customers to a custom class, thus adding new properties.\r\n    DataFrame storeCustomerReport = sqlContext.createDataFrame(customersWhoHaventOrderedTheProduct.toJavaRDD()\r\n        .map(row -&gt; new StoreCustomerReport(bStoreId.value(), bReportName.getValue(), bReportTime.getValue(), bNumberOfCustomers.getValue(), row.getString(0), row.getString(1), row.getString(2))), StoreCustomerReport.class);\r\n    \r\n    \r\n    // Save the DataFrame to cassandra\r\n    storeCustomerReport.write().mode(SaveMode.Append)\r\n        .option(&quot;keyspace&quot;, &quot;my_keyspace&quot;)\r\n        .option(&quot;table&quot;, &quot;my_report&quot;)\r\n        .format(&quot;org.apache.spark.sql.cassandra&quot;)\r\n        .save();\r\n\r\nAs you can see I `cache` the `customersWhoHaventOrderedTheProduct` DataFrame, after that I execute a `count`and call `toJavaRDD`. \r\n\r\nBy my calculations these actions should be executed only once. But when I go in the Spark UI for the current job I see the following stages:\r\n[![enter image description here][1]][1]\r\n\r\nAs you can see every action is executed twice.\r\n\r\nAm I doing something wrong? Is there any setting that I&#39;ve missed?\r\n\r\nAny ideas are greatly appreciated.\r\n\r\n\r\n----------\r\n**EDIT:**\r\n\r\nAfter I called `System.out.println(storeCustomerReport.toJavaRDD().toDebugString());`\r\n\r\nThis is the debug string:\r\n\r\n    (200) MapPartitionsRDD[43] at toJavaRDD at DidNotBuyProductReport.java:93 []\r\n      |   MapPartitionsRDD[42] at createDataFrame at DidNotBuyProductReport.java:89 []\r\n      |   MapPartitionsRDD[41] at map at DidNotBuyProductReport.java:90 []\r\n      |   MapPartitionsRDD[40] at toJavaRDD at DidNotBuyProductReport.java:89 []\r\n      |   MapPartitionsRDD[39] at toJavaRDD at DidNotBuyProductReport.java:89 []\r\n      |   MapPartitionsRDD[38] at toJavaRDD at DidNotBuyProductReport.java:89 []\r\n      |   ZippedPartitionsRDD2[37] at toJavaRDD at DidNotBuyProductReport.java:89 []\r\n      |   MapPartitionsRDD[31] at toJavaRDD at DidNotBuyProductReport.java:89 []\r\n      |   ShuffledRDD[30] at toJavaRDD at DidNotBuyProductReport.java:89 []\r\n      +-(2) MapPartitionsRDD[29] at toJavaRDD at DidNotBuyProductReport.java:89 []\r\n         |  MapPartitionsRDD[28] at toJavaRDD at DidNotBuyProductReport.java:89 []\r\n         |  MapPartitionsRDD[27] at toJavaRDD at DidNotBuyProductReport.java:89 []\r\n         |  MapPartitionsRDD[3] at cache at DidNotBuyProductReport.java:76 []\r\n         |  CassandraTableScanRDD[2] at RDD at CassandraRDD.scala:15 []\r\n      |   MapPartitionsRDD[36] at toJavaRDD at DidNotBuyProductReport.java:89 []\r\n      |   ShuffledRDD[35] at toJavaRDD at DidNotBuyProductReport.java:89 []\r\n      +-(2) MapPartitionsRDD[34] at toJavaRDD at DidNotBuyProductReport.java:89 []\r\n         |  MapPartitionsRDD[33] at toJavaRDD at DidNotBuyProductReport.java:89 []\r\n         |  MapPartitionsRDD[32] at toJavaRDD at DidNotBuyProductReport.java:89 []\r\n         |  MapPartitionsRDD[5] at cache at DidNotBuyProductReport.java:76 []\r\n         |  CassandraTableScanRDD[4] at RDD at CassandraRDD.scala:15 []\r\n\r\n\r\n----------\r\n**EDIT 2:**\r\n\r\nSo after some research combined with trials and errors, I managed to optimize the job.\r\n\r\nI created an RDD from `customersWhoHaventOrderedTheProduct` and I cache it before I call the `count()` action. (I moved the cache from the `DataFrame` to the `RDD`).\r\n\r\nAfter that I use this `RDD` to create the `storeCustomerReport` `DataFrame`.\r\n\r\n    JavaRDD&lt;Row&gt; customersWhoHaventOrderedTheProductRdd = customersWhoHaventOrderedTheProduct.javaRDD().cache();\r\n\r\n\r\nNow the stages look like this:\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\nAs you can see the two `count` and `cache` are now gone, but there are still two &#39;javaRDD&#39; actions. I have no idea where they are coming from, as I call `toJavaRDD` only once in my code. \r\n\r\n  [1]: http://i.stack.imgur.com/YeLVj.png\r\n  [2]: http://i.stack.imgur.com/6dzeG.png","title":"Spark is executing every single action two times","body":"<p>I have created a simple Java application that uses Apache Spark to retrieve data from Cassandra, do some transformation on it and save it in another Cassandra table. </p>\n\n<p>I am using Apache Spark 1.4.1 configured in a standalone cluster mode with a single master and slave, located on my machine.</p>\n\n<pre><code>DataFrame customers = sqlContext.cassandraSql(\"SELECT email, first_name, last_name FROM customer \" +\n    \"WHERE CAST(store_id as string) = '\" + storeId + \"'\");\n\nDataFrame customersWhoOrderedTheProduct = sqlContext.cassandraSql(\"SELECT email FROM customer_bought_product \" +\n    \"WHERE CAST(store_id as string) = '\" + storeId + \"' AND product_id = \" + productId + \"\");\n\n// We need only the customers who did not order the product\n// We cache the DataFrame because we use it twice.\nDataFrame customersWhoHaventOrderedTheProduct = customers\n    .join(customersWhoOrderedTheProduct\n    .select(customersWhoOrderedTheProduct.col(\"email\")), customers.col(\"email\").equalTo(customersWhoOrderedTheProduct.col(\"email\")), \"leftouter\")\n    .where(customersWhoOrderedTheProduct.col(\"email\").isNull())\n    .drop(customersWhoOrderedTheProduct.col(\"email\"))\n    .cache();\n\nint numberOfCustomers = (int) customersWhoHaventOrderedTheProduct.count();\n\nDate reportTime = new Date();\n\n// Prepare the Broadcast values. They are used in the map below.\nBroadcast&lt;String&gt; bStoreId = sparkContext.broadcast(storeId, classTag(String.class));\nBroadcast&lt;String&gt; bReportName = sparkContext.broadcast(MessageBrokerQueue.report_did_not_buy_product.toString(), classTag(String.class));\nBroadcast&lt;java.sql.Timestamp&gt; bReportTime = sparkContext.broadcast(new java.sql.Timestamp(reportTime.getTime()), classTag(java.sql.Timestamp.class));\nBroadcast&lt;Integer&gt; bNumberOfCustomers = sparkContext.broadcast(numberOfCustomers, classTag(Integer.class));\n\n// Map the customers to a custom class, thus adding new properties.\nDataFrame storeCustomerReport = sqlContext.createDataFrame(customersWhoHaventOrderedTheProduct.toJavaRDD()\n    .map(row -&gt; new StoreCustomerReport(bStoreId.value(), bReportName.getValue(), bReportTime.getValue(), bNumberOfCustomers.getValue(), row.getString(0), row.getString(1), row.getString(2))), StoreCustomerReport.class);\n\n\n// Save the DataFrame to cassandra\nstoreCustomerReport.write().mode(SaveMode.Append)\n    .option(\"keyspace\", \"my_keyspace\")\n    .option(\"table\", \"my_report\")\n    .format(\"org.apache.spark.sql.cassandra\")\n    .save();\n</code></pre>\n\n<p>As you can see I <code>cache</code> the <code>customersWhoHaventOrderedTheProduct</code> DataFrame, after that I execute a <code>count</code>and call <code>toJavaRDD</code>. </p>\n\n<p>By my calculations these actions should be executed only once. But when I go in the Spark UI for the current job I see the following stages:\n<a href=\"https://i.stack.imgur.com/YeLVj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YeLVj.png\" alt=\"enter image description here\"></a></p>\n\n<p>As you can see every action is executed twice.</p>\n\n<p>Am I doing something wrong? Is there any setting that I've missed?</p>\n\n<p>Any ideas are greatly appreciated.</p>\n\n<hr>\n\n<p><strong>EDIT:</strong></p>\n\n<p>After I called <code>System.out.println(storeCustomerReport.toJavaRDD().toDebugString());</code></p>\n\n<p>This is the debug string:</p>\n\n<pre><code>(200) MapPartitionsRDD[43] at toJavaRDD at DidNotBuyProductReport.java:93 []\n  |   MapPartitionsRDD[42] at createDataFrame at DidNotBuyProductReport.java:89 []\n  |   MapPartitionsRDD[41] at map at DidNotBuyProductReport.java:90 []\n  |   MapPartitionsRDD[40] at toJavaRDD at DidNotBuyProductReport.java:89 []\n  |   MapPartitionsRDD[39] at toJavaRDD at DidNotBuyProductReport.java:89 []\n  |   MapPartitionsRDD[38] at toJavaRDD at DidNotBuyProductReport.java:89 []\n  |   ZippedPartitionsRDD2[37] at toJavaRDD at DidNotBuyProductReport.java:89 []\n  |   MapPartitionsRDD[31] at toJavaRDD at DidNotBuyProductReport.java:89 []\n  |   ShuffledRDD[30] at toJavaRDD at DidNotBuyProductReport.java:89 []\n  +-(2) MapPartitionsRDD[29] at toJavaRDD at DidNotBuyProductReport.java:89 []\n     |  MapPartitionsRDD[28] at toJavaRDD at DidNotBuyProductReport.java:89 []\n     |  MapPartitionsRDD[27] at toJavaRDD at DidNotBuyProductReport.java:89 []\n     |  MapPartitionsRDD[3] at cache at DidNotBuyProductReport.java:76 []\n     |  CassandraTableScanRDD[2] at RDD at CassandraRDD.scala:15 []\n  |   MapPartitionsRDD[36] at toJavaRDD at DidNotBuyProductReport.java:89 []\n  |   ShuffledRDD[35] at toJavaRDD at DidNotBuyProductReport.java:89 []\n  +-(2) MapPartitionsRDD[34] at toJavaRDD at DidNotBuyProductReport.java:89 []\n     |  MapPartitionsRDD[33] at toJavaRDD at DidNotBuyProductReport.java:89 []\n     |  MapPartitionsRDD[32] at toJavaRDD at DidNotBuyProductReport.java:89 []\n     |  MapPartitionsRDD[5] at cache at DidNotBuyProductReport.java:76 []\n     |  CassandraTableScanRDD[4] at RDD at CassandraRDD.scala:15 []\n</code></pre>\n\n<hr>\n\n<p><strong>EDIT 2:</strong></p>\n\n<p>So after some research combined with trials and errors, I managed to optimize the job.</p>\n\n<p>I created an RDD from <code>customersWhoHaventOrderedTheProduct</code> and I cache it before I call the <code>count()</code> action. (I moved the cache from the <code>DataFrame</code> to the <code>RDD</code>).</p>\n\n<p>After that I use this <code>RDD</code> to create the <code>storeCustomerReport</code> <code>DataFrame</code>.</p>\n\n<pre><code>JavaRDD&lt;Row&gt; customersWhoHaventOrderedTheProductRdd = customersWhoHaventOrderedTheProduct.javaRDD().cache();\n</code></pre>\n\n<p>Now the stages look like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/6dzeG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6dzeG.png\" alt=\"enter image description here\"></a></p>\n\n<p>As you can see the two <code>count</code> and <code>cache</code> are now gone, but there are still two 'javaRDD' actions. I have no idea where they are coming from, as I call <code>toJavaRDD</code> only once in my code. </p>\n"},{"tags":["java","scala","apache-spark","cassandra","spark-cassandra-connector"],"comments":[{"owner":{"account_id":73184,"reputation":15998,"user_id":210905,"accept_rate":75,"display_name":"Odomontois"},"score":1,"creation_date":1449001396,"post_id":34029051,"comment_id":55814191,"body_markdown":"You could try [sbt-assembly](https://github.com/sbt/sbt-assembly) to build include-all JAR or upload datastax libs from ivy cache to spark classpath","body":"You could try <a href=\"https://github.com/sbt/sbt-assembly\" rel=\"nofollow noreferrer\">sbt-assembly</a> to build include-all JAR or upload datastax libs from ivy cache to spark classpath"},{"owner":{"account_id":2776621,"reputation":12858,"user_id":2390083,"accept_rate":75,"display_name":"Beryllium"},"score":0,"creation_date":1449001491,"post_id":34029051,"comment_id":55814241,"body_markdown":"Have you tried to add the spark-cassandra jar to to `spark-submit`? Something like `spark-submit --jars x.jar` with a fat jar whose name is possibly something like `spark-cassandra-connector-xxx.jar`?","body":"Have you tried to add the spark-cassandra jar to to <code>spark-submit</code>? Something like <code>spark-submit --jars x.jar</code> with a fat jar whose name is possibly something like <code>spark-cassandra-connector-xxx.jar</code>?"},{"owner":{"account_id":3833801,"reputation":691,"user_id":3178668,"accept_rate":41,"display_name":"Simoyw"},"score":0,"creation_date":1449049177,"post_id":34029051,"comment_id":55833471,"body_markdown":"Yes i tried but i have another error (see update question)","body":"Yes i tried but i have another error (see update question)"},{"owner":{"account_id":3833801,"reputation":691,"user_id":3178668,"accept_rate":41,"display_name":"Simoyw"},"score":0,"creation_date":1449062615,"post_id":34029051,"comment_id":55842155,"body_markdown":"@Odomontois thanks works with your solutions","body":"@Odomontois thanks works with your solutions"}],"answers":[{"tags":[],"owner":{"account_id":268226,"reputation":1410,"user_id":556867,"display_name":"Sumit"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1449028442,"creation_date":1449028442,"answer_id":34034634,"question_id":34029051,"body_markdown":"You also need to add the dependency of Datastax Cassandra Driver from (As per the version of Spark-cassandra connector): -\r\nhttps://repo1.maven.org/maven2/com/datastax/cassandra/cassandra-driver-core/","title":"Error with spark-cassandra-connector in Spark java.lang.NoClassDefFoundError: com/datastax/driver/core/ProtocolOptions$Compression","body":"<p>You also need to add the dependency of Datastax Cassandra Driver from (As per the version of Spark-cassandra connector): -\n<a href=\"https://repo1.maven.org/maven2/com/datastax/cassandra/cassandra-driver-core/\" rel=\"nofollow\">https://repo1.maven.org/maven2/com/datastax/cassandra/cassandra-driver-core/</a></p>\n"},{"tags":[],"owner":{"account_id":3833801,"reputation":691,"user_id":3178668,"accept_rate":41,"display_name":"Simoyw"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1449062639,"creation_date":1449062093,"answer_id":34043695,"question_id":34029051,"body_markdown":"Finally resolved using sbt-assembly as suggested by @Odomontois\r\n\r\nThis is the final build.sbt:\r\n\r\n    \r\n    name := &quot;Simple Project&quot;\r\n\r\n    version := &quot;1.0&quot;\r\n\r\n    scalaVersion := &quot;2.10.6&quot;\r\n\r\n    libraryDependencies += &quot;org.apache.spark&quot; %% &quot;spark-core&quot; % &quot;1.5.1&quot; % &quot;provided&quot;\r\n\r\n    libraryDependencies += &quot;org.apache.spark&quot; %% &quot;spark-sql&quot; % &quot;1.5.1&quot; % &quot;provided&quot;\r\n\r\n    libraryDependencies += &quot;com.datastax.cassandra&quot; % &quot;cassandra-driver-core&quot; % &quot;2.1.9&quot;\r\n\r\n    libraryDependencies += &quot;com.datastax.spark&quot; % &quot;spark-cassandra-connector_2.10&quot; % &quot;1.5.0-M2&quot;\r\n\r\n\r\n\r\n    jarName in assembly :=&quot;my-project-assembly.jar&quot;\r\n\r\n    assemblyOption in assembly := (assemblyOption in             assembly).value.copy(includeScala = false)\r\n\r\n\r\n    resolvers += &quot;Akka Repository&quot; at &quot;http://repo.akka.io/releases/&quot;\r\n\r\n    mergeStrategy in assembly &lt;&lt;= (mergeStrategy in assembly) { (old) =&gt;\r\n        {\r\n            case PathList(&quot;netty&quot;, &quot;handler&quot;, xs @ _*)         =&gt; MergeStrategy.first\r\n            case PathList(&quot;netty&quot;, &quot;buffer&quot;, xs @ _*)     =&gt; MergeStrategy.first\r\n            case PathList(&quot;netty&quot;, &quot;common&quot;, xs @ _*)     =&gt; MergeStrategy.first\r\n            case PathList(&quot;netty&quot;, &quot;transport&quot;, xs @ _*)     =&gt; MergeStrategy.first\r\n            case PathList(&quot;netty&quot;, &quot;codec&quot;, xs @ _*)     =&gt; MergeStrategy.first\r\n        \r\n            case PathList(&quot;META-INF&quot;, &quot;io.netty.versions.properties&quot;) =&gt; MergeStrategy.first\r\n            case x =&gt; old(x)\r\n            }\r\n        }","title":"Error with spark-cassandra-connector in Spark java.lang.NoClassDefFoundError: com/datastax/driver/core/ProtocolOptions$Compression","body":"<p>Finally resolved using sbt-assembly as suggested by @Odomontois</p>\n\n<p>This is the final build.sbt:</p>\n\n<pre><code>name := \"Simple Project\"\n\nversion := \"1.0\"\n\nscalaVersion := \"2.10.6\"\n\nlibraryDependencies += \"org.apache.spark\" %% \"spark-core\" % \"1.5.1\" % \"provided\"\n\nlibraryDependencies += \"org.apache.spark\" %% \"spark-sql\" % \"1.5.1\" % \"provided\"\n\nlibraryDependencies += \"com.datastax.cassandra\" % \"cassandra-driver-core\" % \"2.1.9\"\n\nlibraryDependencies += \"com.datastax.spark\" % \"spark-cassandra-connector_2.10\" % \"1.5.0-M2\"\n\n\n\njarName in assembly :=\"my-project-assembly.jar\"\n\nassemblyOption in assembly := (assemblyOption in             assembly).value.copy(includeScala = false)\n\n\nresolvers += \"Akka Repository\" at \"http://repo.akka.io/releases/\"\n\nmergeStrategy in assembly &lt;&lt;= (mergeStrategy in assembly) { (old) =&gt;\n    {\n        case PathList(\"netty\", \"handler\", xs @ _*)         =&gt; MergeStrategy.first\n        case PathList(\"netty\", \"buffer\", xs @ _*)     =&gt; MergeStrategy.first\n        case PathList(\"netty\", \"common\", xs @ _*)     =&gt; MergeStrategy.first\n        case PathList(\"netty\", \"transport\", xs @ _*)     =&gt; MergeStrategy.first\n        case PathList(\"netty\", \"codec\", xs @ _*)     =&gt; MergeStrategy.first\n\n        case PathList(\"META-INF\", \"io.netty.versions.properties\") =&gt; MergeStrategy.first\n        case x =&gt; old(x)\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":3833801,"reputation":691,"user_id":3178668,"accept_rate":41,"display_name":"Simoyw"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4016,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1661043158,"creation_date":1449000000,"question_id":34029051,"body_markdown":"I have this error when I try to connect to cassandra with spark-cassandra-connector:\r\n\r\n&gt; Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: com/datastax/driver/core/ProtocolOptions$Compression\r\n\tat com.datastax.spark.connector.cql.CassandraConnectorConf$.&lt;init&gt;(CassandraConnectorConf.scala:112)\r\n\tat com.datastax.spark.connector.cql.CassandraConnectorConf$.&lt;clinit&gt;(CassandraConnectorConf.scala)\r\n\tat com.datastax.spark.connector.cql.CassandraConnector$.apply(CassandraConnector.scala:192)\r\n\tat com.datastax.spark.connector.SparkContextFunctions.cassandraTable$default$3(SparkContextFunctions.scala:48)\r\n\tat main.scala.TestSpark$.main(TestSpark.scala:19)\r\n\tat main.scala.TestSpark.main(TestSpark.scala)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:606)\r\n\tat org.apache.spark.deploy.SparkSubmit$.org$apache$spark$deploy$SparkSubmit$$runMain(SparkSubmit.scala:672)\r\n\tat org.apache.spark.deploy.SparkSubmit$.doRunMain$1(SparkSubmit.scala:180)\r\n\tat org.apache.spark.deploy.SparkSubmit$.submit(SparkSubmit.scala:205)\r\n\tat org.apache.spark.deploy.SparkSubmit$.main(SparkSubmit.scala:120)\r\n\tat org.apache.spark.deploy.SparkSubmit.main(SparkSubmit.scala)\r\nCaused by: java.lang.ClassNotFoundException: com.datastax.driver.core.ProtocolOptions$Compression\r\n\tat java.net.URLClassLoader$1.run(URLClassLoader.java:366)\r\n\tat java.net.URLClassLoader$1.run(URLClassLoader.java:355)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat java.net.URLClassLoader.findClass(URLClassLoader.java:354)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:425)\r\n\tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:358)\r\n\t... 15 more\r\nI have added the jar in the spark class path\r\n&gt; spark-cassandra-connector_2.11-1.5.0-M2.jar \r\n\r\nI have added the dependencies in the sbt file:\r\n\r\n    name := &quot;Simple Project&quot;\r\n\r\n    version := &quot;1.0&quot;\r\n\r\n    scalaVersion := &quot;2.11.7&quot;\r\n\r\n    libraryDependencies += &quot;org.apache.spark&quot; %% &quot;spark-core&quot; % &quot;1.5.1&quot;\r\n\r\n    libraryDependencies += &quot;org.apache.spark&quot; %% &quot;spark-sql&quot; % &quot;1.5.1&quot;\r\n  \r\n    libraryDependencies += &quot;com.datastax.spark&quot; %% &quot;spark-cassandra-connector&quot; % &quot;1.5.0-M2&quot;\r\n\r\n    libraryDependencies += &quot;com.datastax.spark&quot; %% &quot;spark-cassandra-connector-java&quot; % &quot;1.5.0-M2&quot;\r\n\r\nThis is the scala program I try to execute:\r\n\r\n    package main.scala\r\n\r\n\r\n    import org.apache.spark.SparkContext\r\n    import org.apache.spark.SparkContext._\r\n    import org.apache.spark.SparkConf\r\n    import com.datastax.spark.connector._\r\n\r\n    /**\r\n     * Created by Simo on 01.12.15.\r\n     */\r\n    object TestSpark {\r\n      def main(args: Array[String]) {\r\n       val conf = new SparkConf(true)\r\n            .set(&quot;spark.cassandra.connection.host&quot;, &quot;54.229.218.236&quot;)\r\n            .setAppName(&quot;Simple Application&quot;)\r\n        val sc= new SparkContext(&quot;local&quot;, &quot;test&quot;, conf)\r\n        val rdd = sc.cassandraTable(&quot;test&quot;, &quot;kv&quot;)\r\n        println(rdd.count)\r\n        println(rdd.first)\r\n        println(rdd.map(_.getInt(&quot;value&quot;)).sum)\r\n      }\r\n    }\r\n\r\nAnd this is how i run it:\r\n\r\n    $ sbt package\r\n    $ $SPARK_HOME/bin/spark-submit --class &quot;main.scala.TestSpark&quot; target/scala-2.11/simple-project_2.11-1.0.jar\r\n\r\nCan you help me to understand what I&#39;m doing wrong?\r\n\r\nThanks!\r\n\r\n**Edit:**\r\n\r\nI have tried to add the Datastax driver in the dependencies list and in the spark classpath:\r\n    \r\n    libraryDependencies += &quot;com.datastax.cassandra&quot; % &quot;cassandra-driver-core&quot; % &quot;2.1.9&quot;\r\n    libraryDependencies += &quot;com.datastax.cassandra&quot; % &quot;cassandra-driver-mapping&quot; % &quot;2.1.9&quot;\r\n\r\nThe last error no longer appear but now I have another error:\r\n\r\n&gt; Exception in thread &quot;main&quot; java.lang.NoSuchMethodError: scala.runtime.ObjectRef.zero()Lscala/runtime/ObjectRef;\r\n\tat com.datastax.spark.connector.cql.CassandraConnector$.com$datastax$spark$connector$cql$CassandraConnector$$createSession(CassandraConnector.scala)\r\n\tat com.datastax.spark.connector.cql.CassandraConnector$$anonfun$2.apply(CassandraConnector.scala:150)\r\n\tat com.datastax.spark.connector.cql.CassandraConnector$$anonfun$2.apply(CassandraConnector.scala:150)\r\n\tat com.datastax.spark.connector.cql.RefCountedCache.createNewValueAndKeys(RefCountedCache.scala:31)\r\n\tat com.datastax.spark.connector.cql.RefCountedCache.acquire(RefCountedCache.scala:56)\r\n\tat com.datastax.spark.connector.cql.CassandraConnector.openSession(CassandraConnector.scala:81)\r\n\tat com.datastax.spark.connector.cql.CassandraConnector.withSessionDo(CassandraConnector.scala:109)\r\n\tat com.datastax.spark.connector.cql.CassandraConnector.withClusterDo(CassandraConnector.scala:120)\r\n\tat com.datastax.spark.connector.cql.Schema$.fromCassandra(Schema.scala:241)\r\n\tat com.datastax.spark.connector.rdd.CassandraTableRowReaderProvider$class.tableDef(CassandraTableRowReaderProvider.scala:51)\r\n\tat com.datastax.spark.connector.rdd.CassandraTableScanRDD.tableDef$lzycompute(CassandraTableScanRDD.scala:59)\r\n\tat com.datastax.spark.connector.rdd.CassandraTableScanRDD.tableDef(CassandraTableScanRDD.scala:59)\r\n\tat com.datastax.spark.connector.rdd.CassandraTableRowReaderProvider$class.verify(CassandraTableRowReaderProvider.scala:146)\r\n\tat com.datastax.spark.connector.rdd.CassandraTableScanRDD.verify(CassandraTableScanRDD.scala:59)\r\n\tat com.datastax.spark.connector.rdd.CassandraTableScanRDD.getPartitions(CassandraTableScanRDD.scala:143)\r\n\tat org.apache.spark.rdd.RDD$$anonfun$partitions$2.apply(RDD.scala:239)\r\n\tat org.apache.spark.rdd.RDD$$anonfun$partitions$2.apply(RDD.scala:237)\r\n\tat scala.Option.getOrElse(Option.scala:120)\r\n\tat org.apache.spark.rdd.RDD.partitions(RDD.scala:237)\r\n\tat org.apache.spark.SparkContext.runJob(SparkContext.scala:1919)\r\n\tat org.apache.spark.rdd.RDD.count(RDD.scala:1121)\r\n\tat main.scala.TestSpark$.main(TestSpark.scala:20)\r\n\tat main.scala.TestSpark.main(TestSpark.scala)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:606)\r\n\tat org.apache.spark.deploy.SparkSubmit$.org$apache$spark$deploy$SparkSubmit$$runMain(SparkSubmit.scala:672)\r\n\tat org.apache.spark.deploy.SparkSubmit$.doRunMain$1(SparkSubmit.scala:180)\r\n\tat org.apache.spark.deploy.SparkSubmit$.submit(SparkSubmit.scala:205)\r\n\tat org.apache.spark.deploy.SparkSubmit$.main(SparkSubmit.scala:120)\r\n\tat org.apache.spark.deploy.SparkSubmit.main(SparkSubmit.scala)\r\n\r\nEdit 2: Make scala 2.10.6 at compile time (same as the scala version of spark)\r\nThe previous error no longer appear but i have this new error:\r\n\r\n&gt; Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: com/google/common/util/concurrent/AsyncFunction\r\n\tat com.datastax.spark.connector.cql.DefaultConnectionFactory$.clusterBuilder(CassandraConnectionFactory.scala:36)\r\n\tat com.datastax.spark.connector.cql.DefaultConnectionFactory$.createCluster(CassandraConnectionFactory.scala:85)\r\n\tat com.datastax.spark.connector.cql.CassandraConnector$.com$datastax$spark$connector$cql$CassandraConnector$$createSession(CassandraConnector.scala:155)\r\n\tat com.datastax.spark.connector.cql.CassandraConnector$$anonfun$2.apply(CassandraConnector.scala:150)\r\n\tat com.datastax.spark.connector.cql.CassandraConnector$$anonfun$2.apply(CassandraConnector.scala:150)\r\n\tat com.datastax.spark.connector.cql.RefCountedCache.createNewValueAndKeys(RefCountedCache.scala:31)\r\n\tat com.datastax.spark.connector.cql.RefCountedCache.acquire(RefCountedCache.scala:56)\r\n\tat com.datastax.spark.connector.cql.CassandraConnector.openSession(CassandraConnector.scala:81)\r\n\tat com.datastax.spark.connector.cql.CassandraConnector.withSessionDo(CassandraConnector.scala:109)\r\n\tat com.datastax.spark.connector.cql.CassandraConnector.withClusterDo(CassandraConnector.scala:120)\r\n\tat com.datastax.spark.connector.cql.Schema$.fromCassandra(Schema.scala:241)\r\n\tat com.datastax.spark.connector.rdd.CassandraTableRowReaderProvider$class.tableDef(CassandraTableRowReaderProvider.scala:51)\r\n\tat com.datastax.spark.connector.rdd.CassandraTableScanRDD.tableDef$lzycompute(CassandraTableScanRDD.scala:59)\r\n\tat com.datastax.spark.connector.rdd.CassandraTableScanRDD.tableDef(CassandraTableScanRDD.scala:59)\r\n\tat com.datastax.spark.connector.rdd.CassandraTableRowReaderProvider$class.verify(CassandraTableRowReaderProvider.scala:150)\r\n\tat com.datastax.spark.connector.rdd.CassandraTableScanRDD.verify(CassandraTableScanRDD.scala:59)\r\n\tat com.datastax.spark.connector.rdd.CassandraTableScanRDD.getPartitions(CassandraTableScanRDD.scala:143)\r\n\tat org.apache.spark.rdd.RDD$$anonfun$partitions$2.apply(RDD.scala:239)\r\n\tat org.apache.spark.rdd.RDD$$anonfun$partitions$2.apply(RDD.scala:237)\r\n\tat scala.Option.getOrElse(Option.scala:120)\r\n\tat org.apache.spark.rdd.RDD.partitions(RDD.scala:237)\r\n\tat org.apache.spark.SparkContext.runJob(SparkContext.scala:1919)\r\n\tat org.apache.spark.rdd.RDD.count(RDD.scala:1121)\r\n\tat main.scala.TestSpark$.main(TestSpark.scala:20)\r\n\tat main.scala.TestSpark.main(TestSpark.scala)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:606)\r\n\tat org.apache.spark.deploy.SparkSubmit$.org$apache$spark$deploy$SparkSubmit$$runMain(SparkSubmit.scala:672)\r\n\tat org.apache.spark.deploy.SparkSubmit$.doRunMain$1(SparkSubmit.scala:180)\r\n\tat org.apache.spark.deploy.SparkSubmit$.submit(SparkSubmit.scala:205)\r\n\tat org.apache.spark.deploy.SparkSubmit$.main(SparkSubmit.scala:120)\r\n\tat org.apache.spark.deploy.SparkSubmit.main(SparkSubmit.scala)\r\nCaused by: java.lang.ClassNotFoundException: com.google.common.util.concurrent.AsyncFunction\r\n\tat java.net.URLClassLoader$1.run(URLClassLoader.java:366)\r\n\tat java.net.URLClassLoader$1.run(URLClassLoader.java:355)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat java.net.URLClassLoader.findClass(URLClassLoader.java:354)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:425)\r\n\tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:358)\r\n\t... 34 more\r\n\r\n\r\n    ","title":"Error with spark-cassandra-connector in Spark java.lang.NoClassDefFoundError: com/datastax/driver/core/ProtocolOptions$Compression","body":"<p>I have this error when I try to connect to cassandra with spark-cassandra-connector:</p>\n\n<blockquote>\n  <p>Exception in thread \"main\" java.lang.NoClassDefFoundError: com/datastax/driver/core/ProtocolOptions$Compression\n      at com.datastax.spark.connector.cql.CassandraConnectorConf$.(CassandraConnectorConf.scala:112)\n      at com.datastax.spark.connector.cql.CassandraConnectorConf$.(CassandraConnectorConf.scala)\n      at com.datastax.spark.connector.cql.CassandraConnector$.apply(CassandraConnector.scala:192)\n      at com.datastax.spark.connector.SparkContextFunctions.cassandraTable$default$3(SparkContextFunctions.scala:48)\n      at main.scala.TestSpark$.main(TestSpark.scala:19)\n      at main.scala.TestSpark.main(TestSpark.scala)\n      at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n      at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n      at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n      at java.lang.reflect.Method.invoke(Method.java:606)\n      at org.apache.spark.deploy.SparkSubmit$.org$apache$spark$deploy$SparkSubmit$$runMain(SparkSubmit.scala:672)\n      at org.apache.spark.deploy.SparkSubmit$.doRunMain$1(SparkSubmit.scala:180)\n      at org.apache.spark.deploy.SparkSubmit$.submit(SparkSubmit.scala:205)\n      at org.apache.spark.deploy.SparkSubmit$.main(SparkSubmit.scala:120)\n      at org.apache.spark.deploy.SparkSubmit.main(SparkSubmit.scala)\n  Caused by: java.lang.ClassNotFoundException: com.datastax.driver.core.ProtocolOptions$Compression\n      at java.net.URLClassLoader$1.run(URLClassLoader.java:366)\n      at java.net.URLClassLoader$1.run(URLClassLoader.java:355)\n      at java.security.AccessController.doPrivileged(Native Method)\n      at java.net.URLClassLoader.findClass(URLClassLoader.java:354)\n      at java.lang.ClassLoader.loadClass(ClassLoader.java:425)\n      at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)\n      at java.lang.ClassLoader.loadClass(ClassLoader.java:358)\n      ... 15 more\n  I have added the jar in the spark class path\n  spark-cassandra-connector_2.11-1.5.0-M2.jar </p>\n</blockquote>\n\n<p>I have added the dependencies in the sbt file:</p>\n\n<pre><code>name := \"Simple Project\"\n\nversion := \"1.0\"\n\nscalaVersion := \"2.11.7\"\n\nlibraryDependencies += \"org.apache.spark\" %% \"spark-core\" % \"1.5.1\"\n\nlibraryDependencies += \"org.apache.spark\" %% \"spark-sql\" % \"1.5.1\"\n\nlibraryDependencies += \"com.datastax.spark\" %% \"spark-cassandra-connector\" % \"1.5.0-M2\"\n\nlibraryDependencies += \"com.datastax.spark\" %% \"spark-cassandra-connector-java\" % \"1.5.0-M2\"\n</code></pre>\n\n<p>This is the scala program I try to execute:</p>\n\n<pre><code>package main.scala\n\n\nimport org.apache.spark.SparkContext\nimport org.apache.spark.SparkContext._\nimport org.apache.spark.SparkConf\nimport com.datastax.spark.connector._\n\n/**\n * Created by Simo on 01.12.15.\n */\nobject TestSpark {\n  def main(args: Array[String]) {\n   val conf = new SparkConf(true)\n        .set(\"spark.cassandra.connection.host\", \"54.229.218.236\")\n        .setAppName(\"Simple Application\")\n    val sc= new SparkContext(\"local\", \"test\", conf)\n    val rdd = sc.cassandraTable(\"test\", \"kv\")\n    println(rdd.count)\n    println(rdd.first)\n    println(rdd.map(_.getInt(\"value\")).sum)\n  }\n}\n</code></pre>\n\n<p>And this is how i run it:</p>\n\n<pre><code>$ sbt package\n$ $SPARK_HOME/bin/spark-submit --class \"main.scala.TestSpark\" target/scala-2.11/simple-project_2.11-1.0.jar\n</code></pre>\n\n<p>Can you help me to understand what I'm doing wrong?</p>\n\n<p>Thanks!</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>I have tried to add the Datastax driver in the dependencies list and in the spark classpath:</p>\n\n<pre><code>libraryDependencies += \"com.datastax.cassandra\" % \"cassandra-driver-core\" % \"2.1.9\"\nlibraryDependencies += \"com.datastax.cassandra\" % \"cassandra-driver-mapping\" % \"2.1.9\"\n</code></pre>\n\n<p>The last error no longer appear but now I have another error:</p>\n\n<blockquote>\n  <p>Exception in thread \"main\" java.lang.NoSuchMethodError: scala.runtime.ObjectRef.zero()Lscala/runtime/ObjectRef;\n      at com.datastax.spark.connector.cql.CassandraConnector$.com$datastax$spark$connector$cql$CassandraConnector$$createSession(CassandraConnector.scala)\n      at com.datastax.spark.connector.cql.CassandraConnector$$anonfun$2.apply(CassandraConnector.scala:150)\n      at com.datastax.spark.connector.cql.CassandraConnector$$anonfun$2.apply(CassandraConnector.scala:150)\n      at com.datastax.spark.connector.cql.RefCountedCache.createNewValueAndKeys(RefCountedCache.scala:31)\n      at com.datastax.spark.connector.cql.RefCountedCache.acquire(RefCountedCache.scala:56)\n      at com.datastax.spark.connector.cql.CassandraConnector.openSession(CassandraConnector.scala:81)\n      at com.datastax.spark.connector.cql.CassandraConnector.withSessionDo(CassandraConnector.scala:109)\n      at com.datastax.spark.connector.cql.CassandraConnector.withClusterDo(CassandraConnector.scala:120)\n      at com.datastax.spark.connector.cql.Schema$.fromCassandra(Schema.scala:241)\n      at com.datastax.spark.connector.rdd.CassandraTableRowReaderProvider$class.tableDef(CassandraTableRowReaderProvider.scala:51)\n      at com.datastax.spark.connector.rdd.CassandraTableScanRDD.tableDef$lzycompute(CassandraTableScanRDD.scala:59)\n      at com.datastax.spark.connector.rdd.CassandraTableScanRDD.tableDef(CassandraTableScanRDD.scala:59)\n      at com.datastax.spark.connector.rdd.CassandraTableRowReaderProvider$class.verify(CassandraTableRowReaderProvider.scala:146)\n      at com.datastax.spark.connector.rdd.CassandraTableScanRDD.verify(CassandraTableScanRDD.scala:59)\n      at com.datastax.spark.connector.rdd.CassandraTableScanRDD.getPartitions(CassandraTableScanRDD.scala:143)\n      at org.apache.spark.rdd.RDD$$anonfun$partitions$2.apply(RDD.scala:239)\n      at org.apache.spark.rdd.RDD$$anonfun$partitions$2.apply(RDD.scala:237)\n      at scala.Option.getOrElse(Option.scala:120)\n      at org.apache.spark.rdd.RDD.partitions(RDD.scala:237)\n      at org.apache.spark.SparkContext.runJob(SparkContext.scala:1919)\n      at org.apache.spark.rdd.RDD.count(RDD.scala:1121)\n      at main.scala.TestSpark$.main(TestSpark.scala:20)\n      at main.scala.TestSpark.main(TestSpark.scala)\n      at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n      at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n      at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n      at java.lang.reflect.Method.invoke(Method.java:606)\n      at org.apache.spark.deploy.SparkSubmit$.org$apache$spark$deploy$SparkSubmit$$runMain(SparkSubmit.scala:672)\n      at org.apache.spark.deploy.SparkSubmit$.doRunMain$1(SparkSubmit.scala:180)\n      at org.apache.spark.deploy.SparkSubmit$.submit(SparkSubmit.scala:205)\n      at org.apache.spark.deploy.SparkSubmit$.main(SparkSubmit.scala:120)\n      at org.apache.spark.deploy.SparkSubmit.main(SparkSubmit.scala)</p>\n</blockquote>\n\n<p>Edit 2: Make scala 2.10.6 at compile time (same as the scala version of spark)\nThe previous error no longer appear but i have this new error:</p>\n\n<blockquote>\n  <p>Exception in thread \"main\" java.lang.NoClassDefFoundError: com/google/common/util/concurrent/AsyncFunction\n      at com.datastax.spark.connector.cql.DefaultConnectionFactory$.clusterBuilder(CassandraConnectionFactory.scala:36)\n      at com.datastax.spark.connector.cql.DefaultConnectionFactory$.createCluster(CassandraConnectionFactory.scala:85)\n      at com.datastax.spark.connector.cql.CassandraConnector$.com$datastax$spark$connector$cql$CassandraConnector$$createSession(CassandraConnector.scala:155)\n      at com.datastax.spark.connector.cql.CassandraConnector$$anonfun$2.apply(CassandraConnector.scala:150)\n      at com.datastax.spark.connector.cql.CassandraConnector$$anonfun$2.apply(CassandraConnector.scala:150)\n      at com.datastax.spark.connector.cql.RefCountedCache.createNewValueAndKeys(RefCountedCache.scala:31)\n      at com.datastax.spark.connector.cql.RefCountedCache.acquire(RefCountedCache.scala:56)\n      at com.datastax.spark.connector.cql.CassandraConnector.openSession(CassandraConnector.scala:81)\n      at com.datastax.spark.connector.cql.CassandraConnector.withSessionDo(CassandraConnector.scala:109)\n      at com.datastax.spark.connector.cql.CassandraConnector.withClusterDo(CassandraConnector.scala:120)\n      at com.datastax.spark.connector.cql.Schema$.fromCassandra(Schema.scala:241)\n      at com.datastax.spark.connector.rdd.CassandraTableRowReaderProvider$class.tableDef(CassandraTableRowReaderProvider.scala:51)\n      at com.datastax.spark.connector.rdd.CassandraTableScanRDD.tableDef$lzycompute(CassandraTableScanRDD.scala:59)\n      at com.datastax.spark.connector.rdd.CassandraTableScanRDD.tableDef(CassandraTableScanRDD.scala:59)\n      at com.datastax.spark.connector.rdd.CassandraTableRowReaderProvider$class.verify(CassandraTableRowReaderProvider.scala:150)\n      at com.datastax.spark.connector.rdd.CassandraTableScanRDD.verify(CassandraTableScanRDD.scala:59)\n      at com.datastax.spark.connector.rdd.CassandraTableScanRDD.getPartitions(CassandraTableScanRDD.scala:143)\n      at org.apache.spark.rdd.RDD$$anonfun$partitions$2.apply(RDD.scala:239)\n      at org.apache.spark.rdd.RDD$$anonfun$partitions$2.apply(RDD.scala:237)\n      at scala.Option.getOrElse(Option.scala:120)\n      at org.apache.spark.rdd.RDD.partitions(RDD.scala:237)\n      at org.apache.spark.SparkContext.runJob(SparkContext.scala:1919)\n      at org.apache.spark.rdd.RDD.count(RDD.scala:1121)\n      at main.scala.TestSpark$.main(TestSpark.scala:20)\n      at main.scala.TestSpark.main(TestSpark.scala)\n      at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n      at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n      at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n      at java.lang.reflect.Method.invoke(Method.java:606)\n      at org.apache.spark.deploy.SparkSubmit$.org$apache$spark$deploy$SparkSubmit$$runMain(SparkSubmit.scala:672)\n      at org.apache.spark.deploy.SparkSubmit$.doRunMain$1(SparkSubmit.scala:180)\n      at org.apache.spark.deploy.SparkSubmit$.submit(SparkSubmit.scala:205)\n      at org.apache.spark.deploy.SparkSubmit$.main(SparkSubmit.scala:120)\n      at org.apache.spark.deploy.SparkSubmit.main(SparkSubmit.scala)\n  Caused by: java.lang.ClassNotFoundException: com.google.common.util.concurrent.AsyncFunction\n      at java.net.URLClassLoader$1.run(URLClassLoader.java:366)\n      at java.net.URLClassLoader$1.run(URLClassLoader.java:355)\n      at java.security.AccessController.doPrivileged(Native Method)\n      at java.net.URLClassLoader.findClass(URLClassLoader.java:354)\n      at java.lang.ClassLoader.loadClass(ClassLoader.java:425)\n      at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)\n      at java.lang.ClassLoader.loadClass(ClassLoader.java:358)\n      ... 34 more</p>\n</blockquote>\n"},{"tags":["java","apache-spark","cassandra","spark-cassandra-connector"],"answers":[{"tags":[],"owner":{"account_id":1443585,"reputation":3287,"user_id":1362926,"accept_rate":65,"display_name":"Kaushal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1449834683,"creation_date":1449834683,"answer_id":34222898,"question_id":34222678,"body_markdown":"Once you inserted your data into cassandra, call `ctx.stop()` method, it will stop spark context.","title":"Batch Insert In Cassandra using Apache Spark hanging and context not getting closed when triggered from a Web Ser","body":"<p>Once you inserted your data into cassandra, call <code>ctx.stop()</code> method, it will stop spark context.</p>\n"}],"owner":{"account_id":5914315,"reputation":373,"user_id":4653573,"accept_rate":50,"display_name":"Syed Ammar Mustafa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1067,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1661043055,"creation_date":1449833840,"question_id":34222678,"body_markdown":"I am a new to spark . I am trying to insert csv files into cassandra table using spark-cassandra connector as below:\r\nThe files are in Hdfs and I am getting the Paths of all files and for each path I call a method which does converts the csv data to corressponding cassandra data types and creates a prepared statement binds the data to the prepared statement and adds it to a batch. Finally I execute the batch when its 1000. \r\nKey Points \r\n1. I am using Apache Cassandra 2.1.8 and Spark 1.5 \r\n2. I read the Csv files using Spark Context \r\n3. I am using the com.datastax.spark.connector.cql.CassandraConnector to create a Session with Cassandra.\r\n\r\nI have 9 Files , each files data goes to a table in cassandra. Every Things works fine All inserts are happening as expected and the job gets completed when I submit the jar on spark submit.\r\n\r\nThe problem I am facing is When the same Jar is invoked through a web-service (web service calls the script to invoke the jar) One of the files data doesn’t get inserted and the spark context doesn’t stop due to which the jobs is forever running. \r\n\r\nWhen I insert 4 files or 5 files everything works fine even through the web-service. But all together it hanging and I get 10 records less in one of the tables and context doesn’t stop.\r\n\r\nIts strange because when I am submitting the jar on the spark submit directly everything works fine and through the web service I face this issue , Its strange bcz even the web-service submits the job to the same spark submit.\r\n\r\nHere is my code\r\n\r\n    package com.pz.loadtocassandra;\r\n\r\n   \r\n\r\n     import java.io.File;\r\n    import java.io.IOException;\r\n     import java.math.BigDecimal;\r\n    import java.net.URI;\r\n    import java.net.URISyntaxException;\r\n    import java.util.ArrayList;\r\n    import java.util.Arrays;\r\n    import java.util.LinkedHashMap;\r\n     import java.util.List;\r\n    import java.util.Map;\r\n    import java.util.logging.ConsoleHandler;\r\n    import java.util.logging.FileHandler;\r\n\r\n    import org.apache.hadoop.conf.Configuration;\r\n    import org.apache.hadoop.fs.FileStatus;\r\n    import org.apache.hadoop.fs.FileSystem;\r\n    import org.apache.hadoop.fs.FileUtil;\r\n    import org.apache.hadoop.fs.Path;\r\n    import org.apache.hadoop.io.LongWritable;\r\n    import org.apache.spark.SparkConf;\r\n    import org.apache.spark.api.java.JavaPairRDD;\r\n    import org.apache.spark.api.java.JavaRDD;\r\n    import org.apache.spark.api.java.JavaSparkContext;\r\n    import org.apache.spark.api.java.function.Function;\r\n\r\n    import com.datastax.driver.core.BatchStatement;\r\n    import com.datastax.driver.core.BoundStatement;\r\n    import com.datastax.driver.core.PreparedStatement;\r\n    import com.datastax.driver.core.Session;\r\n    import com.datastax.driver.core.exceptions.InvalidTypeException;\r\n    import com.datastax.spark.connector.cql.CassandraConnector;\r\n    import com.datastax.spark.connector.japi.CassandraRow;\r\n    import com.pz.shared.UnicodeBOMInputStream;\r\n    import com.pz.shared.fileformat.Header;\r\n    import com.pz.shared.mr.fileformat.MRFileFormats.CSVInputFormat;\r\n    import com.pz.shared.mr.fileformat.MRFileFormats.TextArrayWritable;\r\n\r\n\r\n     public class LoadToCassandra {\r\n\r\n\tpublic static final String STUDYID = &quot;STUDYID&quot;;\r\n\tpublic static final String PROJECTNAME = &quot;PROJECTNAME&quot;;\r\n\tpublic static final String FILEID = &quot;FILEID&quot;;\r\n\tpublic static int count = 0;\r\n\tpublic static final String FILE_SERPERATOR = &quot;/&quot;;\r\n\tpublic static Logger log = Logger.getLogger(LoadToCassandra.class.getName());\r\n\tpublic static void main(String[] args) {\r\n\t\t\tString propFileLoc = args[0];\r\n\t\t\tString hdfsHome = args[1];\r\n\t\t\tString hdfs_DtdXmlPath = args[2];\r\n\t\t\tString hdfs_NormalizedDataPath = args[3];\r\n\t\t\t\r\n\t\t\trun(propFileLoc, hdfsHome,     hdfs_DtdXmlPath,hdfs_NormalizedDataPath);\r\n\t\t} catch (IOException exception) {\r\n\t\t\tlog.log(Level.SEVERE, &quot;Error occur in FileHandler.&quot;, exception);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static void run(String propFileLoc, String hdfsHome,\r\n\t\t\tString hdfs_DtdXmlPath, String hdfs_NormalizedDataPath) {\r\n\t\tJavaSparkContext ctx = null;\r\n\t\tFileSystem hadoopFs = null;\r\n\t\ttry {\r\n\r\n\t\t\tPropInitialize.initailizeConfig(propFileLoc);\r\n\t\t\t//setting spark context\r\n\t\t\tctx = setSparkContext(propFileLoc);\r\n\t\t\tParseDtdXml.parseDTDXML(hdfsHome, hdfs_DtdXmlPath);\r\n\t\t\tConfiguration configuration = setHadoopConf();\r\n\t\t\thadoopFs = getHadoopFs(hdfsHome, configuration);\r\n\t\t\tFileStatus[] fstat = hadoopFs.listStatus(new Path(hdfs_NormalizedDataPath));\r\n\t\t\t//Getting the csv paths\r\n\t\t\tPath[] paths = FileUtil.stat2Paths(fstat);\r\n\t\t\tlog.info(&quot;PATH.size - &quot; + paths.length);\r\n\t\t\tfor (Path path : paths) {\r\n\t\t\t\tlog.info(&quot;path is : &quot;+path.toString());\r\n\t\t\t\tloadToCassandra(propFileLoc, path, configuration,hdfsHome, ctx);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t} catch (IOException | URISyntaxException e) {\r\n\t\t\tlog.log(Level.SEVERE, &quot;run method&quot;, e);\r\n\t\t\te.printStackTrace();\r\n\t\t} finally {\r\n\t\t\tlog.info(&quot;finally &quot;);\r\n\t\t\tif (ctx!= null) {\r\n\t\t\t\tctx.stop();\r\n\t\t\t\tSystem.out.println(&quot;SC Stopped&quot;);\r\n\t\t\t}\r\n\t\t\tif (hadoopFs != null) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\thadoopFs.close();\r\n\t\t\t\t} catch (IOException e) {\r\n\t\t\t\t\tlog.log(Level.SEVERE, &quot;run method&quot;, e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\t// input : 1. String hdfs home ,\r\n\t// 2. Configuration hadoop conf object\r\n\t// returns : hadoop File System object\r\n\tprivate static FileSystem getHadoopFs(String hdfsHome,\r\n\t\t\tConfiguration configuration) throws IOException, URISyntaxException {\r\n\t\treturn FileSystem.get(new URI(hdfsHome), configuration);\r\n\r\n\t}\r\n\r\n\t// input : no inputs\r\n\t// process : sets hadoop config parameters\r\n\t// output : retuns hadoop conf object\r\n\tprivate static Configuration setHadoopConf() throws IOException,\r\n\t\t\tURISyntaxException {\r\n\t\tConfiguration configuration = new Configuration();\r\n\t\tconfiguration.setBoolean(&quot;csvFileFormat.encoded.flag&quot;, true);\r\n\t\tconfiguration.set(&quot;csvinputformat.token.delimiter&quot;, &quot;,&quot;);\r\n\t\treturn configuration;\r\n\r\n\t}\r\n\r\n\t// input : string Properties File Location\r\n\t// process : creates and sets the configurations of spark context\r\n\t// retuns : JavaSparkContext object with configurations set to it.\r\n\tprivate static JavaSparkContext setSparkContext(String propFileLoc) {\r\n\t\tPropInitialize.initailizeConfig(propFileLoc);\r\n\t\tSparkConf conf = new SparkConf();\r\n\t\tconf.set(&quot;spark.serializer&quot;,\r\n\t\t\t\t&quot;org.apache.spark.serializer.KryoSerializer&quot;);\r\n\t\tconf.setAppName(&quot;Loading Data&quot;);\r\n\t\tconf.setMaster(PropInitialize.spark_master);\r\n\t\tconf.set(&quot;spark.cassandra.connection.host&quot;,\r\n\t\t\t\tPropInitialize.cassandra_hostname);\r\n\t\tconf.setJars(PropInitialize.external_jars);\r\n\t\treturn new JavaSparkContext(conf);\r\n\r\n\t}\r\n\r\n\tprivate static void loadToCassandra(String propFileLoc, Path sourceFileHdfsPath,\r\n\t\t\tConfiguration hadoopConf, String hdfsHome,JavaSparkContext ctx) {\r\n\t\tSystem.out.println(&quot;File :: &quot; + sourceFileHdfsPath.toString());\r\n\t\tFileSystem hadoopFs = null;\r\n\t\tPropInitialize.initailizeConfig(propFileLoc);\r\n\t\tString cassKeyspaceName = PropInitialize.cass_keyspace_name;\r\n\t\tlog.info(&quot;entered here for file &quot;+sourceFileHdfsPath.toString());\r\n\t\t\r\n\t\tfinal String strInputFileName = StringUtils.split(\r\n\t\t\t\tsourceFileHdfsPath.getName(), &quot;#&quot;)[0].toLowerCase();\r\n\t\tfinal String strTableNameInCass = StringUtils.split(\r\n\t\t\t\tsourceFileHdfsPath.getName(), &quot;-&quot;)[0].split(&quot;#&quot;)[1]\r\n\t\t\t\t.toLowerCase();\r\n\r\n\t\tfinal String strSourceFilePath = sourceFileHdfsPath.toString();\r\n\r\n\t\ttry {\r\n\t\t\thadoopFs = getHadoopFs(hdfsHome, hadoopConf);\r\n\t\t\t\r\n\t\t\t//getting the cassandra connection using spark conf\r\n\t\t\tfinal CassandraConnector connector = getCassandraConnection(ctx);\r\n\t\t\r\n\t\t\t final JavaRDD&lt;CassandraRow&gt; cassTableObj=getCassTableObj(ctx,cassKeyspaceName,strTableNameInCass);\r\n\r\n\t\t\tfinal Map&lt;String, List&lt;String&gt;&gt; tabColMapWithColTypes1 = ParseDtdXml.tabColMapWithColTypes;\r\n\r\n\t\t\tfinal String headersUpdated;\r\n\t\t\tfinal String headers;\r\n\r\n\t\t\tUnicodeBOMInputStream ubis = new UnicodeBOMInputStream(\r\n\t\t\t\t\thadoopFs.open(sourceFileHdfsPath));\r\n\t\t\tHeader CsvHeader = Header.getCSVHeader(ubis, &quot;,&quot;);\r\n\t\t\tif (!strTableNameInCass.equalsIgnoreCase(&quot;PCMASTER&quot;)) {\r\n\r\n\t\t\t\tString fString = &quot;&quot;;\r\n\t\t\t\tfor (int i = 0; i &lt; CsvHeader.size() - 1; i++) {\r\n\t\t\t\t\tfString = fString + CsvHeader.get(i).ColumnName + &quot;,&quot;;\r\n\t\t\t\t}\r\n\t\t\t\tfString = fString\r\n\t\t\t\t\t\t+ CsvHeader.get(CsvHeader.size() - 1).ColumnName;\r\n\r\n\t\t\t\theaders = fString; // StringUtils.join(stringArr.toString(),&quot;,&quot;);\r\n\r\n\t\t\t\theadersUpdated = strTableNameInCass.toUpperCase() + &quot;ID,&quot;\r\n\t\t\t\t\t\t+ headers;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tString[] stringArr = new String[CsvHeader.size()];\r\n\t\t\t\tString fString = &quot;&quot;;\r\n\t\t\t\tfor (int i = 0; i &lt; CsvHeader.size() - 1; i++) {\r\n\t\t\t\t\t// stringArr[i] = CsvHeader.get(i).ColumnName;\r\n\t\t\t\t\tfString = fString + CsvHeader.get(i).ColumnName + &quot;,&quot;;\r\n\t\t\t\t}\r\n\t\t\t\tfString = fString\r\n\t\t\t\t\t\t+ CsvHeader.get(CsvHeader.size() - 1).ColumnName;\r\n\t\t\t\theaders = StringUtils.join(stringArr.toString(), &quot;,&quot;);\r\n\t\t\t\theadersUpdated = fString;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tubis.close();\r\n\r\n\t\t\t\r\n\t\t\t//Reading the file using spark context\r\n\t\t\tJavaPairRDD&lt;LongWritable, TextArrayWritable&gt; fileRdd = ctx\r\n\t\t\t\t\t.newAPIHadoopFile(strSourceFilePath, CSVInputFormat.class,\r\n\t\t\t\t\t\t\tLongWritable.class, TextArrayWritable.class,\r\n\t\t\t\t\t\t\thadoopConf);\r\n\t\t\t\r\n\r\n\t\t\tfinal long recCount = fileRdd.count();\r\n\r\n\t\t\t\r\n\r\n\t\t\tfinal String[] actCols = headersUpdated.split(&quot;,&quot;);\r\n\r\n\t\t\tfinal LinkedHashMap&lt;Object, String&gt; mapOfColNameAndType = new LinkedHashMap&lt;Object, String&gt;();\r\n\t\t\tfinal List&lt;String&gt; colNameAndType = tabColMapWithColTypes1\r\n\t\t\t\t\t.get(strTableNameInCass.toUpperCase());\r\n\r\n\t\t\tfor (int i = 0; i &lt; actCols.length; i++) {\r\n\r\n\t\t\t\tif (colNameAndType.contains(actCols[i] + &quot; &quot; + &quot;text&quot;)) {\r\n\t\t\t\t\tint indexOfColName = colNameAndType.indexOf(actCols[i]\r\n\t\t\t\t\t\t\t+ &quot; &quot; + &quot;text&quot;);\r\n\r\n\t\t\t\t\tmapOfColNameAndType.put(i,\r\n\t\t\t\t\t\t\tcolNameAndType.get(indexOfColName).split(&quot; &quot;)[1]);\r\n\r\n\t\t\t\t} else if (colNameAndType\r\n\t\t\t\t\t\t.contains(actCols[i] + &quot; &quot; + &quot;decimal&quot;)) {\r\n\t\t\t\t\tint indexOfColName = colNameAndType.indexOf(actCols[i]\r\n\t\t\t\t\t\t\t+ &quot; &quot; + &quot;decimal&quot;);\r\n\t\t\t\t\tmapOfColNameAndType.put(i,\r\n\t\t\t\t\t\t\tcolNameAndType.get(indexOfColName).split(&quot; &quot;)[1]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t//creates the query for prepared statement\r\n\t\t\tfinal String makeStatement = makeSt(cassKeyspaceName,\r\n\t\t\t\t\tstrTableNameInCass, actCols);\r\n\t\t\tfinal long seqId1 = cassTableObj.count();\r\n\t\t\t\r\n\r\n\t\t\t//calling map on the fileRdd \r\n\t\t\tJavaRDD&lt;String&gt; data = fileRdd.values().map(\r\n\t\t\t\t\tnew Function&lt;TextArrayWritable, String&gt;() {\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * \r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tprivate static final long serialVersionUID = 1L;\r\n\t\t\t\t\t\tSession session;\r\n\t\t\t\t\t\tboolean isssession = false;\r\n\t\t\t\t\t\tPreparedStatement statement;\r\n\t\t\t\t\t\tBatchStatement batch;\r\n\t\t\t\t\t\tint lineCount = 0;\r\n\t\t\r\n\t\t\t\t\t\tlong seqId = seqId1;\r\n\r\n\t\t\t\t\t\t/*for each line returned as an TextArrayWritable convert each cell the corresponding\r\n\t\t\t\t\t\t * bind the data to prepared statement\r\n\t\t\t\t\t\t * add it to batch\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\t@Override\r\n\t\t\t\t\t\tpublic String call(TextArrayWritable tup)\r\n\t\t\t\t\t\t\t\tthrows Exception {\r\n\t\t\t\t\t\t\tseqId++;\r\n\t\t\t\t\t\t\tlineCount++;\r\n\r\n\t\t\t\t\t\t\tlog.info(&quot;entered here 3 for file &quot;+strSourceFilePath.toString());\r\n\t\t\t\t\t\t\tString[] part = tup.toStrings();\r\n\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tObject[] parts = getDataWithUniqueId(\r\n\t\t\t\t\t\t\t\t\tstrTableNameInCass, part);\r\n\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t//For each file\r\n\t\t\t\t\t\t\t//Creates the session\r\n\t\t\t\t\t\t\t//creates the PreparedStatement\r\n\t\t\t\t\t\t\tif (!isssession) {\r\n\t\t\t\t\t\t\t\tsession = connector.openSession();\r\n\t\t\t\t\t\t\t\tstatement = session.prepare(makeStatement);\r\n\t\t\t\t\t\t\t\tlog.info(&quot;entered here 4 for file &quot;+strSourceFilePath.toString());\r\n\t\t\t\t\t\t\t\t// System.out.println(&quot;statement :&quot; +\r\n\t\t\t\t\t\t\t\t// statement);\r\n\t\t\t\t\t\t\t\tisssession = true;\r\n\t\t\t\t\t\t\t\tbatch = new BatchStatement();\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tList&lt;Object&gt; typeConvData = new ArrayList&lt;Object&gt;();\r\n\r\n\t\t\t\t\t\t\tfor (int i = 0; i &lt; parts.length; i++) {\r\n\t\t\t\t\t\t\t\tString type = mapOfColNameAndType.get(i);\r\n\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\tif (type.equalsIgnoreCase(&quot;text&quot;)) {\r\n\r\n\t\t\t\t\t\t\t\t\t\ttypeConvData.add(parts[i]);\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\t\t\t// parts[i] =\r\n\t\t\t\t\t\t\t\t\t\t// parts[i].toString().replace(&quot;\\&quot;&quot;,\r\n\t\t\t\t\t\t\t\t\t\t// &quot;&quot;);\r\n\t\t\t\t\t\t\t\t\t\t// check if the String the has to\r\n\t\t\t\t\t\t\t\t\t\t// converted to a BigDecimal is any\r\n\t\t\t\t\t\t\t\t\t\t// positive or negetive integer or not.\r\n\t\t\t\t\t\t\t\t\t\t// if its not a positive integer or\r\n\t\t\t\t\t\t\t\t\t\t// negative forcefully convert it to\r\n\t\t\t\t\t\t\t\t\t\t// zero (avoiding NumberFormatException)\r\n\t\t\t\t\t\t\t\t\t\tif (!((String) parts[i])\r\n\t\t\t\t\t\t\t\t\t\t\t\t.matches(&quot;-?\\\\d+&quot;)) {\r\n\t\t\t\t\t\t\t\t\t\t\tparts[i] = &quot;0&quot;;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tlong s = Long\r\n\t\t\t\t\t\t\t\t\t\t\t\t.valueOf((String) parts[i]);\r\n\t\t\t\t\t\t\t\t\t\ttypeConvData.add(BigDecimal.valueOf(s));\r\n\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} catch (NullPointerException e) {\r\n\t\t\t\t\t\t\t\t\tlog.log(Level.SEVERE, &quot;loadToCass method&quot;, e);\r\n\t\t\t\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t\t\t} catch (NumberFormatException e) {\r\n\t\t\t\t\t\t\t\t\tlog.log(Level.SEVERE, &quot;loadToCass method&quot;, e);\r\n\t\t\t\t\t\t\t\t} catch (InvalidTypeException e) {\r\n\t\t\t\t\t\t\t\t\tlog.log(Level.SEVERE, &quot;loadToCass method&quot;, e);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tList&lt;Object&gt; data = typeConvData;\r\n\r\n\t\t\t\t\t\t\t//bind data to query\r\n\t\t\t\t\t\t\tfinal BoundStatement query = statement.bind(data\r\n\t\t\t\t\t\t\t\t\t.toArray(new Object[data.size()]));\r\n\r\n\t\t\t\t\t\t\t//add query to batch\r\n\t\t\t\t\t\t\tbatch.add(query);\r\n\t\t\t\t\t\t\tint count = LoadToCassandra.count;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t//when count is 1k execute batch\r\n\t\t\t\t\t\t\tif (count == 1000) {\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tlog.info(&quot;entered here 5 for file &quot;+strSourceFilePath.toString());\r\n\t\t\t\t\t\t\t\tlog.info(&quot;batch done&quot;);\r\n\t\t\t\t\t\t\t\tsession.execute(batch);\r\n\t\t\t\t\t\t\t\tLoadToCassandra.count = 0;\r\n\t\t\t\t\t\t\t\tbatch = new BatchStatement();\r\n\t\t\t\t\t\t\t\treturn StringUtils.join(tup.toStrings());\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t//if its the last batch and its not of size 1k\r\n\t\t\t\t\t\t\tif (lineCount == (recCount))\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tlog.info(&quot;Last Batch&quot;);\r\n\t\t\t\t\t\t\t\tsession.executeAsync(batch);\r\n\t\t\t\t\t\t\t\tlog.info(&quot;entered here 6 for file &quot;+strSourceFilePath.toString());\r\n\t\t\t\t\t\t\t\t//session.execute(batch);\r\n\t\t\t\t\t\t\t\tsession.close();\r\n\t\t\t\t\t\t\t\tlog.info(&quot;Session closed&quot;);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tLoadToCassandra.count++;\r\n\t\t\t\t\t\t\treturn StringUtils.join(tup.toStrings());\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tprivate Object[] getDataWithUniqueId(\r\n\t\t\t\t\t\t\t\tString strTableNameInCass, String[] part) {\r\n\t\t\t\t\t\t\tObject[] parts = null;\r\n\t\t\t\t\t\t\tArrayList&lt;String&gt; tempArraylist = new ArrayList&lt;String&gt;();\r\n\t\t\t\t\t\t\tif (!strTableNameInCass\r\n\t\t\t\t\t\t\t\t\t.equalsIgnoreCase(&quot;PCMASTER&quot;)) {\r\n\t\t\t\t\t\t\t\tfor (int i = 0; i &lt; part.length; i++) {\r\n\t\t\t\t\t\t\t\t\tif (i == 0) {\r\n\t\t\t\t\t\t\t\t\t\ttempArraylist.add(0,\r\n\t\t\t\t\t\t\t\t\t\t\t\tString.valueOf(seqId));\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\ttempArraylist.add(part[i]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tparts = tempArraylist.toArray();\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tparts = part;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\treturn parts;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t});\r\n\r\n\t\t\tdata.count();\r\n\t\t\thadoopFs.close();\r\n\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate static JavaRDD&lt;CassandraRow&gt; getCassTableObj(\r\n\t\t\tJavaSparkContext ctx, String cassKeyspaceName,\r\n\t\t\tString strTableNameInCass) {\r\n\t\treturn javaFunctions(ctx)\r\n\t\t\t\t.cassandraTable(cassKeyspaceName,\r\n\t\t\t\t\t\tstrTableNameInCass.toLowerCase());\r\n\t}\r\n\r\n\tprivate static CassandraConnector getCassandraConnection(\r\n\t\t\tJavaSparkContext ctx) {\r\n\t\treturn CassandraConnector.apply(ctx.getConf());\r\n\r\n\t}\r\n\r\n\tprivate static String makeSt(String keyspace, String tabName,\r\n\t\t\tString[] colNames) {\r\n\t\tStringBuilder sb = new StringBuilder();\r\n\t\tsb.append(&quot;INSERT INTO &quot; + keyspace + &quot;.&quot; + tabName + &quot; ( &quot;);\r\n\t\tList&lt;String&gt; vars = new ArrayList&lt;&gt;();\r\n\t\tfor (int i = 0; i &lt; (colNames.length - 1); i++) {\r\n\t\t\tsb.append(colNames[i] + &quot;,&quot;);\r\n\t\t\tvars.add(&quot;?&quot;);\r\n\t\t}\r\n\t\tvars.add(&quot;?&quot;);\r\n\t\tsb.append(colNames[colNames.length - 1] + &quot; ) values ( &quot;\r\n\t\t\t\t+ StringUtils.join(vars, &quot;,&quot;) + &quot; ) &quot;);\r\n\r\n\t\treturn sb.toString();\r\n\t   }}\r\n\r\nCan anyone tell me what could the reason that causes this problem and how can it be resolved. Thanks\r\n\r\n\r\n   \r\n","title":"Batch Insert In Cassandra using Apache Spark hanging and context not getting closed when triggered from a Web Ser","body":"<p>I am a new to spark . I am trying to insert csv files into cassandra table using spark-cassandra connector as below:\nThe files are in Hdfs and I am getting the Paths of all files and for each path I call a method which does converts the csv data to corressponding cassandra data types and creates a prepared statement binds the data to the prepared statement and adds it to a batch. Finally I execute the batch when its 1000. \nKey Points \n1. I am using Apache Cassandra 2.1.8 and Spark 1.5 \n2. I read the Csv files using Spark Context \n3. I am using the com.datastax.spark.connector.cql.CassandraConnector to create a Session with Cassandra.</p>\n\n<p>I have 9 Files , each files data goes to a table in cassandra. Every Things works fine All inserts are happening as expected and the job gets completed when I submit the jar on spark submit.</p>\n\n<p>The problem I am facing is When the same Jar is invoked through a web-service (web service calls the script to invoke the jar) One of the files data doesn’t get inserted and the spark context doesn’t stop due to which the jobs is forever running. </p>\n\n<p>When I insert 4 files or 5 files everything works fine even through the web-service. But all together it hanging and I get 10 records less in one of the tables and context doesn’t stop.</p>\n\n<p>Its strange because when I am submitting the jar on the spark submit directly everything works fine and through the web service I face this issue , Its strange bcz even the web-service submits the job to the same spark submit.</p>\n\n<p>Here is my code</p>\n\n<pre><code>package com.pz.loadtocassandra;\n\n\n\n import java.io.File;\nimport java.io.IOException;\n import java.math.BigDecimal;\nimport java.net.URI;\nimport java.net.URISyntaxException;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.LinkedHashMap;\n import java.util.List;\nimport java.util.Map;\nimport java.util.logging.ConsoleHandler;\nimport java.util.logging.FileHandler;\n\nimport org.apache.hadoop.conf.Configuration;\nimport org.apache.hadoop.fs.FileStatus;\nimport org.apache.hadoop.fs.FileSystem;\nimport org.apache.hadoop.fs.FileUtil;\nimport org.apache.hadoop.fs.Path;\nimport org.apache.hadoop.io.LongWritable;\nimport org.apache.spark.SparkConf;\nimport org.apache.spark.api.java.JavaPairRDD;\nimport org.apache.spark.api.java.JavaRDD;\nimport org.apache.spark.api.java.JavaSparkContext;\nimport org.apache.spark.api.java.function.Function;\n\nimport com.datastax.driver.core.BatchStatement;\nimport com.datastax.driver.core.BoundStatement;\nimport com.datastax.driver.core.PreparedStatement;\nimport com.datastax.driver.core.Session;\nimport com.datastax.driver.core.exceptions.InvalidTypeException;\nimport com.datastax.spark.connector.cql.CassandraConnector;\nimport com.datastax.spark.connector.japi.CassandraRow;\nimport com.pz.shared.UnicodeBOMInputStream;\nimport com.pz.shared.fileformat.Header;\nimport com.pz.shared.mr.fileformat.MRFileFormats.CSVInputFormat;\nimport com.pz.shared.mr.fileformat.MRFileFormats.TextArrayWritable;\n\n\n public class LoadToCassandra {\n\npublic static final String STUDYID = \"STUDYID\";\npublic static final String PROJECTNAME = \"PROJECTNAME\";\npublic static final String FILEID = \"FILEID\";\npublic static int count = 0;\npublic static final String FILE_SERPERATOR = \"/\";\npublic static Logger log = Logger.getLogger(LoadToCassandra.class.getName());\npublic static void main(String[] args) {\n        String propFileLoc = args[0];\n        String hdfsHome = args[1];\n        String hdfs_DtdXmlPath = args[2];\n        String hdfs_NormalizedDataPath = args[3];\n\n        run(propFileLoc, hdfsHome,     hdfs_DtdXmlPath,hdfs_NormalizedDataPath);\n    } catch (IOException exception) {\n        log.log(Level.SEVERE, \"Error occur in FileHandler.\", exception);\n    }\n}\n\npublic static void run(String propFileLoc, String hdfsHome,\n        String hdfs_DtdXmlPath, String hdfs_NormalizedDataPath) {\n    JavaSparkContext ctx = null;\n    FileSystem hadoopFs = null;\n    try {\n\n        PropInitialize.initailizeConfig(propFileLoc);\n        //setting spark context\n        ctx = setSparkContext(propFileLoc);\n        ParseDtdXml.parseDTDXML(hdfsHome, hdfs_DtdXmlPath);\n        Configuration configuration = setHadoopConf();\n        hadoopFs = getHadoopFs(hdfsHome, configuration);\n        FileStatus[] fstat = hadoopFs.listStatus(new Path(hdfs_NormalizedDataPath));\n        //Getting the csv paths\n        Path[] paths = FileUtil.stat2Paths(fstat);\n        log.info(\"PATH.size - \" + paths.length);\n        for (Path path : paths) {\n            log.info(\"path is : \"+path.toString());\n            loadToCassandra(propFileLoc, path, configuration,hdfsHome, ctx);\n        }\n\n\n    } catch (IOException | URISyntaxException e) {\n        log.log(Level.SEVERE, \"run method\", e);\n        e.printStackTrace();\n    } finally {\n        log.info(\"finally \");\n        if (ctx!= null) {\n            ctx.stop();\n            System.out.println(\"SC Stopped\");\n        }\n        if (hadoopFs != null) {\n            try {\n                hadoopFs.close();\n            } catch (IOException e) {\n                log.log(Level.SEVERE, \"run method\", e);\n            }\n        }\n    }\n}\n\n\n\n// input : 1. String hdfs home ,\n// 2. Configuration hadoop conf object\n// returns : hadoop File System object\nprivate static FileSystem getHadoopFs(String hdfsHome,\n        Configuration configuration) throws IOException, URISyntaxException {\n    return FileSystem.get(new URI(hdfsHome), configuration);\n\n}\n\n// input : no inputs\n// process : sets hadoop config parameters\n// output : retuns hadoop conf object\nprivate static Configuration setHadoopConf() throws IOException,\n        URISyntaxException {\n    Configuration configuration = new Configuration();\n    configuration.setBoolean(\"csvFileFormat.encoded.flag\", true);\n    configuration.set(\"csvinputformat.token.delimiter\", \",\");\n    return configuration;\n\n}\n\n// input : string Properties File Location\n// process : creates and sets the configurations of spark context\n// retuns : JavaSparkContext object with configurations set to it.\nprivate static JavaSparkContext setSparkContext(String propFileLoc) {\n    PropInitialize.initailizeConfig(propFileLoc);\n    SparkConf conf = new SparkConf();\n    conf.set(\"spark.serializer\",\n            \"org.apache.spark.serializer.KryoSerializer\");\n    conf.setAppName(\"Loading Data\");\n    conf.setMaster(PropInitialize.spark_master);\n    conf.set(\"spark.cassandra.connection.host\",\n            PropInitialize.cassandra_hostname);\n    conf.setJars(PropInitialize.external_jars);\n    return new JavaSparkContext(conf);\n\n}\n\nprivate static void loadToCassandra(String propFileLoc, Path sourceFileHdfsPath,\n        Configuration hadoopConf, String hdfsHome,JavaSparkContext ctx) {\n    System.out.println(\"File :: \" + sourceFileHdfsPath.toString());\n    FileSystem hadoopFs = null;\n    PropInitialize.initailizeConfig(propFileLoc);\n    String cassKeyspaceName = PropInitialize.cass_keyspace_name;\n    log.info(\"entered here for file \"+sourceFileHdfsPath.toString());\n\n    final String strInputFileName = StringUtils.split(\n            sourceFileHdfsPath.getName(), \"#\")[0].toLowerCase();\n    final String strTableNameInCass = StringUtils.split(\n            sourceFileHdfsPath.getName(), \"-\")[0].split(\"#\")[1]\n            .toLowerCase();\n\n    final String strSourceFilePath = sourceFileHdfsPath.toString();\n\n    try {\n        hadoopFs = getHadoopFs(hdfsHome, hadoopConf);\n\n        //getting the cassandra connection using spark conf\n        final CassandraConnector connector = getCassandraConnection(ctx);\n\n         final JavaRDD&lt;CassandraRow&gt; cassTableObj=getCassTableObj(ctx,cassKeyspaceName,strTableNameInCass);\n\n        final Map&lt;String, List&lt;String&gt;&gt; tabColMapWithColTypes1 = ParseDtdXml.tabColMapWithColTypes;\n\n        final String headersUpdated;\n        final String headers;\n\n        UnicodeBOMInputStream ubis = new UnicodeBOMInputStream(\n                hadoopFs.open(sourceFileHdfsPath));\n        Header CsvHeader = Header.getCSVHeader(ubis, \",\");\n        if (!strTableNameInCass.equalsIgnoreCase(\"PCMASTER\")) {\n\n            String fString = \"\";\n            for (int i = 0; i &lt; CsvHeader.size() - 1; i++) {\n                fString = fString + CsvHeader.get(i).ColumnName + \",\";\n            }\n            fString = fString\n                    + CsvHeader.get(CsvHeader.size() - 1).ColumnName;\n\n            headers = fString; // StringUtils.join(stringArr.toString(),\",\");\n\n            headersUpdated = strTableNameInCass.toUpperCase() + \"ID,\"\n                    + headers;\n\n        } else {\n\n            String[] stringArr = new String[CsvHeader.size()];\n            String fString = \"\";\n            for (int i = 0; i &lt; CsvHeader.size() - 1; i++) {\n                // stringArr[i] = CsvHeader.get(i).ColumnName;\n                fString = fString + CsvHeader.get(i).ColumnName + \",\";\n            }\n            fString = fString\n                    + CsvHeader.get(CsvHeader.size() - 1).ColumnName;\n            headers = StringUtils.join(stringArr.toString(), \",\");\n            headersUpdated = fString;\n\n        }\n\n        ubis.close();\n\n\n        //Reading the file using spark context\n        JavaPairRDD&lt;LongWritable, TextArrayWritable&gt; fileRdd = ctx\n                .newAPIHadoopFile(strSourceFilePath, CSVInputFormat.class,\n                        LongWritable.class, TextArrayWritable.class,\n                        hadoopConf);\n\n\n        final long recCount = fileRdd.count();\n\n\n\n        final String[] actCols = headersUpdated.split(\",\");\n\n        final LinkedHashMap&lt;Object, String&gt; mapOfColNameAndType = new LinkedHashMap&lt;Object, String&gt;();\n        final List&lt;String&gt; colNameAndType = tabColMapWithColTypes1\n                .get(strTableNameInCass.toUpperCase());\n\n        for (int i = 0; i &lt; actCols.length; i++) {\n\n            if (colNameAndType.contains(actCols[i] + \" \" + \"text\")) {\n                int indexOfColName = colNameAndType.indexOf(actCols[i]\n                        + \" \" + \"text\");\n\n                mapOfColNameAndType.put(i,\n                        colNameAndType.get(indexOfColName).split(\" \")[1]);\n\n            } else if (colNameAndType\n                    .contains(actCols[i] + \" \" + \"decimal\")) {\n                int indexOfColName = colNameAndType.indexOf(actCols[i]\n                        + \" \" + \"decimal\");\n                mapOfColNameAndType.put(i,\n                        colNameAndType.get(indexOfColName).split(\" \")[1]);\n            } else {\n                continue;\n            }\n\n        }\n\n        //creates the query for prepared statement\n        final String makeStatement = makeSt(cassKeyspaceName,\n                strTableNameInCass, actCols);\n        final long seqId1 = cassTableObj.count();\n\n\n        //calling map on the fileRdd \n        JavaRDD&lt;String&gt; data = fileRdd.values().map(\n                new Function&lt;TextArrayWritable, String&gt;() {\n                    /**\n                     * \n                     */\n                    private static final long serialVersionUID = 1L;\n                    Session session;\n                    boolean isssession = false;\n                    PreparedStatement statement;\n                    BatchStatement batch;\n                    int lineCount = 0;\n\n                    long seqId = seqId1;\n\n                    /*for each line returned as an TextArrayWritable convert each cell the corresponding\n                     * bind the data to prepared statement\n                     * add it to batch\n                     */\n                    @Override\n                    public String call(TextArrayWritable tup)\n                            throws Exception {\n                        seqId++;\n                        lineCount++;\n\n                        log.info(\"entered here 3 for file \"+strSourceFilePath.toString());\n                        String[] part = tup.toStrings();\n\n\n                        Object[] parts = getDataWithUniqueId(\n                                strTableNameInCass, part);\n\n\n                        //For each file\n                        //Creates the session\n                        //creates the PreparedStatement\n                        if (!isssession) {\n                            session = connector.openSession();\n                            statement = session.prepare(makeStatement);\n                            log.info(\"entered here 4 for file \"+strSourceFilePath.toString());\n                            // System.out.println(\"statement :\" +\n                            // statement);\n                            isssession = true;\n                            batch = new BatchStatement();\n                        }\n\n                        List&lt;Object&gt; typeConvData = new ArrayList&lt;Object&gt;();\n\n                        for (int i = 0; i &lt; parts.length; i++) {\n                            String type = mapOfColNameAndType.get(i);\n                            try {\n                                if (type.equalsIgnoreCase(\"text\")) {\n\n                                    typeConvData.add(parts[i]);\n                                } else {\n\n                                    // parts[i] =\n                                    // parts[i].toString().replace(\"\\\"\",\n                                    // \"\");\n                                    // check if the String the has to\n                                    // converted to a BigDecimal is any\n                                    // positive or negetive integer or not.\n                                    // if its not a positive integer or\n                                    // negative forcefully convert it to\n                                    // zero (avoiding NumberFormatException)\n                                    if (!((String) parts[i])\n                                            .matches(\"-?\\\\d+\")) {\n                                        parts[i] = \"0\";\n                                    }\n                                    long s = Long\n                                            .valueOf((String) parts[i]);\n                                    typeConvData.add(BigDecimal.valueOf(s));\n\n                                }\n                            } catch (NullPointerException e) {\n                                log.log(Level.SEVERE, \"loadToCass method\", e);\n\n\n                            } catch (NumberFormatException e) {\n                                log.log(Level.SEVERE, \"loadToCass method\", e);\n                            } catch (InvalidTypeException e) {\n                                log.log(Level.SEVERE, \"loadToCass method\", e);\n                            }\n                        }\n\n                                                    List&lt;Object&gt; data = typeConvData;\n\n                        //bind data to query\n                        final BoundStatement query = statement.bind(data\n                                .toArray(new Object[data.size()]));\n\n                        //add query to batch\n                        batch.add(query);\n                        int count = LoadToCassandra.count;\n\n                        //when count is 1k execute batch\n                        if (count == 1000) {\n\n                            log.info(\"entered here 5 for file \"+strSourceFilePath.toString());\n                            log.info(\"batch done\");\n                            session.execute(batch);\n                            LoadToCassandra.count = 0;\n                            batch = new BatchStatement();\n                            return StringUtils.join(tup.toStrings());\n                        }\n\n                        //if its the last batch and its not of size 1k\n                        if (lineCount == (recCount))\n                            {\n                            log.info(\"Last Batch\");\n                            session.executeAsync(batch);\n                            log.info(\"entered here 6 for file \"+strSourceFilePath.toString());\n                            //session.execute(batch);\n                            session.close();\n                            log.info(\"Session closed\");\n                        }\n\n                        LoadToCassandra.count++;\n                        return StringUtils.join(tup.toStrings());\n                    }\n\n                    private Object[] getDataWithUniqueId(\n                            String strTableNameInCass, String[] part) {\n                        Object[] parts = null;\n                        ArrayList&lt;String&gt; tempArraylist = new ArrayList&lt;String&gt;();\n                        if (!strTableNameInCass\n                                .equalsIgnoreCase(\"PCMASTER\")) {\n                            for (int i = 0; i &lt; part.length; i++) {\n                                if (i == 0) {\n                                    tempArraylist.add(0,\n                                            String.valueOf(seqId));\n                                }\n                                tempArraylist.add(part[i]);\n                            }\n                            parts = tempArraylist.toArray();\n                        } else {\n                            parts = part;\n                        }\n\n                        return parts;\n                    }\n\n                });\n\n        data.count();\n        hadoopFs.close();\n\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n}\n\nprivate static JavaRDD&lt;CassandraRow&gt; getCassTableObj(\n        JavaSparkContext ctx, String cassKeyspaceName,\n        String strTableNameInCass) {\n    return javaFunctions(ctx)\n            .cassandraTable(cassKeyspaceName,\n                    strTableNameInCass.toLowerCase());\n}\n\nprivate static CassandraConnector getCassandraConnection(\n        JavaSparkContext ctx) {\n    return CassandraConnector.apply(ctx.getConf());\n\n}\n\nprivate static String makeSt(String keyspace, String tabName,\n        String[] colNames) {\n    StringBuilder sb = new StringBuilder();\n    sb.append(\"INSERT INTO \" + keyspace + \".\" + tabName + \" ( \");\n    List&lt;String&gt; vars = new ArrayList&lt;&gt;();\n    for (int i = 0; i &lt; (colNames.length - 1); i++) {\n        sb.append(colNames[i] + \",\");\n        vars.add(\"?\");\n    }\n    vars.add(\"?\");\n    sb.append(colNames[colNames.length - 1] + \" ) values ( \"\n            + StringUtils.join(vars, \",\") + \" ) \");\n\n    return sb.toString();\n   }}\n</code></pre>\n\n<p>Can anyone tell me what could the reason that causes this problem and how can it be resolved. Thanks</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":1,"creation_date":1661027057,"post_id":73429866,"comment_id":129674846,"body_markdown":"https://stackoverflow.com/questions/1066589/iterate-through-a-hashmap","body":"<a href=\"https://stackoverflow.com/questions/1066589/iterate-through-a-hashmap\" title=\"iterate through a hashmap\">stackoverflow.com/questions/1066589/iterate-through-a-hashma&zwnj;&#8203;p</a>"},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1661027320,"post_id":73429866,"comment_id":129674889,"body_markdown":"Set `minValue = Integer.MAX_VALUE`. Set `key  = someDefaultValue or null`.Iterate through the values. If a value is less than minValue, minValue = that value and key equals that key.","body":"Set <code>minValue = Integer.MAX_VALUE</code>. Set <code>key  = someDefaultValue or null</code>.Iterate through the values. If a value is less than minValue, minValue = that value and key equals that key."},{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1661028010,"post_id":73429866,"comment_id":129675006,"body_markdown":"`minValue` was obtained from the key set, so `containsKey` will always return true. The while loop never loops, so should just be an if-statement","body":"<code>minValue</code> was obtained from the key set, so <code>containsKey</code> will always return true. The while loop never loops, so should just be an if-statement"},{"owner":{"account_id":953960,"reputation":2945,"user_id":979590,"accept_rate":38,"display_name":"Gabriel Belingueres"},"score":0,"creation_date":1661028582,"post_id":73429866,"comment_id":129675119,"body_markdown":"You should instead use a TreeMap. TreeMaps are ordered by keys, so you just iterate over the map until the first entry with value zero is found.","body":"You should instead use a TreeMap. TreeMaps are ordered by keys, so you just iterate over the map until the first entry with value zero is found."}],"answers":[{"tags":[],"owner":{"account_id":25937120,"reputation":2268,"user_id":19657183,"display_name":"Mihe"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1661028602,"creation_date":1661028602,"answer_id":73430074,"question_id":73429866,"body_markdown":"In a non-empty Map you can find the Map.Entry with minimum key having value 0 by:\r\n```\r\nMap.Entry&lt;Integer,Integer&gt; entry = map.entrySet().stream()\r\n    .filter(e -&gt; e.getValue() == 0)\r\n    .min(Comparator.comparingInt(Map.Entry::getKey))\r\n    .get();\r\n\r\nSystem.out.printf(&quot;Key %d with value %d%n&quot;, entry.getKey(), entry.getValue());\r\n```\r\n","title":"Hashmap-return the lowest key","body":"<p>In a non-empty Map you can find the Map.Entry with minimum key having value 0 by:</p>\n<pre><code>Map.Entry&lt;Integer,Integer&gt; entry = map.entrySet().stream()\n    .filter(e -&gt; e.getValue() == 0)\n    .min(Comparator.comparingInt(Map.Entry::getKey))\n    .get();\n\nSystem.out.printf(&quot;Key %d with value %d%n&quot;, entry.getKey(), entry.getValue());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1661042184,"creation_date":1661040474,"answer_id":73430880,"question_id":73429866,"body_markdown":"If you use a `TreeMap` where the entries are sorted by keys, you can return the first entry that has a value of `0`. Then simply get the `key` for that entry.\r\n\r\n```\r\nSortedMap&lt;Integer, Integer&gt; map =\r\n\t\tnew TreeMap&lt;&gt;(Map.of(2, 1, 3, 1, 4, 0, 8, 0));\r\n\r\nInteger key =\r\n\t\tmap.entrySet().stream().filter(e -&gt; e.getValue() == 0)\r\n\t\t\t\t.findFirst().map(Entry::getKey).orElse(null);\r\nSystem.out.println(key);\r\n```\r\nprints\r\n```\r\n4\r\n```\r\nNote:  If all that is required is a single lookup, then simply iterating over a regular `HashMap` would be more efficient.  The advantage of a `TreeMap` is that it lends itself to get the key for subsequent retrievals without repeated iterations.","title":"Hashmap-return the lowest key","body":"<p>If you use a <code>TreeMap</code> where the entries are sorted by keys, you can return the first entry that has a value of <code>0</code>. Then simply get the <code>key</code> for that entry.</p>\n<pre><code>SortedMap&lt;Integer, Integer&gt; map =\n        new TreeMap&lt;&gt;(Map.of(2, 1, 3, 1, 4, 0, 8, 0));\n\nInteger key =\n        map.entrySet().stream().filter(e -&gt; e.getValue() == 0)\n                .findFirst().map(Entry::getKey).orElse(null);\nSystem.out.println(key);\n</code></pre>\n<p>prints</p>\n<pre><code>4\n</code></pre>\n<p>Note:  If all that is required is a single lookup, then simply iterating over a regular <code>HashMap</code> would be more efficient.  The advantage of a <code>TreeMap</code> is that it lends itself to get the key for subsequent retrievals without repeated iterations.</p>\n"}],"owner":{"account_id":23558102,"reputation":13,"user_id":17599809,"display_name":"Lohit Kumar Biswas"},"comment_count":4,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":105,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"closed_date":1661062458,"answer_count":2,"score":1,"last_activity_date":1661042184,"creation_date":1661026719,"question_id":73429866,"body_markdown":"I have a hashmap and want to return the smallest key which value is 0\r\n\r\nhashmap:\r\n    \r\n     10   1\r\n     2    1\r\n     3    1\r\n     4    0\r\n     8    0\r\n\r\nit will return 4\r\n\r\n    while( map.containsValue(0))\r\n    {   \t \r\n\t    int minValue=(Collections.min(map.keySet())); \r\n\t    if( map.containsKey(minValue))\r\n\t    {\r\n\t        System.out.println(minValue);\r\n\t    }\r\n\t    break;  \t \r\n\t}","title":"Hashmap-return the lowest key","body":"<p>I have a hashmap and want to return the smallest key which value is 0</p>\n<p>hashmap:</p>\n<pre><code> 10   1\n 2    1\n 3    1\n 4    0\n 8    0\n</code></pre>\n<p>it will return 4</p>\n<pre><code>while( map.containsValue(0))\n{        \n    int minValue=(Collections.min(map.keySet())); \n    if( map.containsKey(minValue))\n    {\n        System.out.println(minValue);\n    }\n    break;       \n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","nats.io"],"comments":[{"owner":{"account_id":5279068,"reputation":895,"user_id":4215032,"display_name":"Pp88"},"score":0,"creation_date":1661065052,"post_id":73430793,"comment_id":129679164,"body_markdown":"I think you are looking for [custom spring boot starter](https://www.baeldung.com/spring-boot-custom-starter)","body":"I think you are looking for <a href=\"https://www.baeldung.com/spring-boot-custom-starter\" rel=\"nofollow noreferrer\">custom spring boot starter</a>"}],"owner":{"account_id":3635110,"reputation":1239,"user_id":3030406,"accept_rate":55,"display_name":"Rookie007"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":206,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1661039313,"creation_date":1661039313,"question_id":73430793,"body_markdown":"I am trying to build a shared platform library (`streaming-client.jar`), which will be used in Spring Boot applications.\r\n\r\nThat library (`streaming-client.jar`) internally uses a dependency (`nats-spring`), which provides auto configuration, \r\n\r\nso whenever it finds some properties in `application.properties` like `serverUrl`, `maxConnection` it will automatically connects to server and does all the configuration server so we can just simply use `@Autowired` to get those connection objects. \r\n\r\nThis is working as expected in as standalone jar file. \r\n\r\n\r\nNow, my usecase is that I want to add this lib (`straming-client.jar`) in some spring boot microserivice, and I want, this jar file to read `props` from client microservice `application.properties` and create objects, which should be available by using `@Autowired`\r\n\r\nI want to do in two ways\r\n\r\n1. If `streaming-client.jar` finds certains props in client `application.properties` it should auto configure and create required objects.\r\n\r\n2. Client service should provide some sort of properties object `StreamingProperties.java` a simple POJO with all required properties in it. and inject that to the `streaming-client.jar` context. and it should automatically create objects. \r\n\r\n\r\nI am stuck on how to approach this.\r\n\r\nYour guidance is very much appreciated.  \r\n\r\n\r\n\r\n","title":"Inject configuration from client to library auto configuration","body":"<p>I am trying to build a shared platform library (<code>streaming-client.jar</code>), which will be used in Spring Boot applications.</p>\n<p>That library (<code>streaming-client.jar</code>) internally uses a dependency (<code>nats-spring</code>), which provides auto configuration,</p>\n<p>so whenever it finds some properties in <code>application.properties</code> like <code>serverUrl</code>, <code>maxConnection</code> it will automatically connects to server and does all the configuration server so we can just simply use <code>@Autowired</code> to get those connection objects.</p>\n<p>This is working as expected in as standalone jar file.</p>\n<p>Now, my usecase is that I want to add this lib (<code>straming-client.jar</code>) in some spring boot microserivice, and I want, this jar file to read <code>props</code> from client microservice <code>application.properties</code> and create objects, which should be available by using <code>@Autowired</code></p>\n<p>I want to do in two ways</p>\n<ol>\n<li><p>If <code>streaming-client.jar</code> finds certains props in client <code>application.properties</code> it should auto configure and create required objects.</p>\n</li>\n<li><p>Client service should provide some sort of properties object <code>StreamingProperties.java</code> a simple POJO with all required properties in it. and inject that to the <code>streaming-client.jar</code> context. and it should automatically create objects.</p>\n</li>\n</ol>\n<p>I am stuck on how to approach this.</p>\n<p>Your guidance is very much appreciated.</p>\n"},{"tags":["java","android","android-edittext"],"answers":[{"tags":[],"owner":{"account_id":25916347,"reputation":1,"user_id":19639690,"display_name":"Jeffin Pulsator"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660971405,"creation_date":1660971405,"answer_id":73424198,"question_id":73423973,"body_markdown":"i think what you are looking for is textchangelistener of edittext\r\n\r\n     edittext.addTextChangedListener(new TextWatcher() {\r\n            @Override\r\n            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n                edittext.setText(splitDigit(Float.parseFloat(charSequence.toString())));\r\n            }\r\n\r\n            @Override\r\n            public void afterTextChanged(Editable editable) {\r\n\r\n            }\r\n        });","title":"In android studio I want to change the format of entering a int 1000000 in a edit text like 1.000.000 but I can&#39;t","body":"<p>i think what you are looking for is textchangelistener of edittext</p>\n<pre><code> edittext.addTextChangedListener(new TextWatcher() {\n        @Override\n        public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n\n        }\n\n        @Override\n        public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n            edittext.setText(splitDigit(Float.parseFloat(charSequence.toString())));\n        }\n\n        @Override\n        public void afterTextChanged(Editable editable) {\n\n        }\n    });\n</code></pre>\n"}],"owner":{"account_id":23522507,"reputation":11,"user_id":17569455,"display_name":"Mohammad Javad Yousefi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1661037046,"creation_date":1660967630,"question_id":73423973,"body_markdown":"I want user to enter the amount of money so my app do the math I done all the things and it works great even I made the output to show numbers like 1.000.000 with the help of:\r\n\r\n\r\n    public static String splitDigits(float number) {\r\n            return new DecimalFormat(&quot;###,###,###&quot;).format(number);\r\n        }\r\n\r\n But for edit text I don&#39;t know how to do it I want to make the number easy to read for the user when entering the number in edit text is there any way to use this method for edit text?\r\n\r\n","title":"In android studio I want to change the format of entering a int 1000000 in a edit text like 1.000.000 but I can&#39;t","body":"<p>I want user to enter the amount of money so my app do the math I done all the things and it works great even I made the output to show numbers like 1.000.000 with the help of:</p>\n<pre><code>public static String splitDigits(float number) {\n        return new DecimalFormat(&quot;###,###,###&quot;).format(number);\n    }\n</code></pre>\n<p>But for edit text I don't know how to do it I want to make the number easy to read for the user when entering the number in edit text is there any way to use this method for edit text?</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":15837194,"reputation":498,"user_id":11426731,"display_name":"shadow-lad"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1661036381,"creation_date":1661035773,"answer_id":73430580,"question_id":73430463,"body_markdown":"It is because you have 2 layout files for TrackerActivity. For Android 12 (v31) it is loading the second file.\r\n\r\n[![activity_tracker file tree][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/LI1UC.png\r\n\r\nThe `NullPointerException` is caused as the `TextView` with id `textView_characterName` is not present in the `v31` layout file.\r\n\r\nEither delete the second file or make sure ALL the **ids** and **views** are consistent across both the files.\r\n\r\n","title":"Null Point Reference on Android 12 but not on Android 9","body":"<p>It is because you have 2 layout files for TrackerActivity. For Android 12 (v31) it is loading the second file.</p>\n<p><a href=\"https://i.stack.imgur.com/LI1UC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LI1UC.png\" alt=\"activity_tracker file tree\" /></a></p>\n<p>The <code>NullPointerException</code> is caused as the <code>TextView</code> with id <code>textView_characterName</code> is not present in the <code>v31</code> layout file.</p>\n<p>Either delete the second file or make sure ALL the <strong>ids</strong> and <strong>views</strong> are consistent across both the files.</p>\n"}],"owner":{"account_id":15297637,"reputation":67,"user_id":11037145,"display_name":"Turwaith"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":123,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":73430580,"answer_count":1,"score":-1,"last_activity_date":1661036381,"creation_date":1661034052,"question_id":73430463,"body_markdown":"I am writing a small Android app using Java. Now is there a strange problem that my app runs on Android 9 very well, but crashes on Android 12. My Logcat tells me, Java gets a null pointer Reference at a certain location. To me, this doesn&#39;t make any sense. If there was a null pointer reference in my Java code, why would the app work on Android 9 then?\r\n\r\nYou can find my app [here][1].\r\n\r\nThe Error occurs in this [file][2] on line 104, which is the 3rd line of the following code block:\r\n\r\n    characterNameTextView = findViewById(R.id.textView_characterName);\r\n    String tempCharName = intent.getStringExtra(&quot;characterName&quot;);\r\n    characterNameTextView.setText(tempCharName);\r\n\r\n\r\n  [1]: https://github.com/turw41th/DnDHealthTracker/tree/develop\r\n  [2]: https://github.com/turw41th/DnDHealthTracker/blob/develop/app/src/main/java/ch/turwaith/ddhealthtracker/TrackerActivity.java","title":"Null Point Reference on Android 12 but not on Android 9","body":"<p>I am writing a small Android app using Java. Now is there a strange problem that my app runs on Android 9 very well, but crashes on Android 12. My Logcat tells me, Java gets a null pointer Reference at a certain location. To me, this doesn't make any sense. If there was a null pointer reference in my Java code, why would the app work on Android 9 then?</p>\n<p>You can find my app <a href=\"https://github.com/turw41th/DnDHealthTracker/tree/develop\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>The Error occurs in this <a href=\"https://github.com/turw41th/DnDHealthTracker/blob/develop/app/src/main/java/ch/turwaith/ddhealthtracker/TrackerActivity.java\" rel=\"nofollow noreferrer\">file</a> on line 104, which is the 3rd line of the following code block:</p>\n<pre><code>characterNameTextView = findViewById(R.id.textView_characterName);\nString tempCharName = intent.getStringExtra(&quot;characterName&quot;);\ncharacterNameTextView.setText(tempCharName);\n</code></pre>\n"},{"tags":["java","spring-boot","api","rest"],"answers":[{"tags":[],"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1660963382,"creation_date":1660963382,"answer_id":73423751,"question_id":73423717,"body_markdown":"the best way is to change method return type from `User` to `ResponseEntity&lt;?&gt;`, smth. like:\r\n\r\n```\r\n@GetMapping(&quot;get/{id}&quot;)\r\npublic ResponseEntity&lt;?&gt; findById(@PathVariable int id) throws Exception {\r\n    User user = userMapper.findById(id);\r\n    if (user == null) {\r\n       return ResponseEntity.notFound().build();\r\n    }\r\n    return ResponseEntity.ok(user);\r\n}\r\n```\r\n\r\nor using optional:\r\n\r\n```\r\n@GetMapping(&quot;get/{id}&quot;)\r\npublic ResponseEntity&lt;?&gt; findById(@PathVariable int id) throws Exception {\r\n    return Optional.ofNullable(userMapper.findById(id))\r\n       .map(ResponseEntity::ok)\r\n       .orElseGet(ResponseEntity.notFound()::build);\r\n}\r\n```","title":"How to handle null return value in spring boot","body":"<p>the best way is to change method return type from <code>User</code> to <code>ResponseEntity&lt;?&gt;</code>, smth. like:</p>\n<pre><code>@GetMapping(&quot;get/{id}&quot;)\npublic ResponseEntity&lt;?&gt; findById(@PathVariable int id) throws Exception {\n    User user = userMapper.findById(id);\n    if (user == null) {\n       return ResponseEntity.notFound().build();\n    }\n    return ResponseEntity.ok(user);\n}\n</code></pre>\n<p>or using optional:</p>\n<pre><code>@GetMapping(&quot;get/{id}&quot;)\npublic ResponseEntity&lt;?&gt; findById(@PathVariable int id) throws Exception {\n    return Optional.ofNullable(userMapper.findById(id))\n       .map(ResponseEntity::ok)\n       .orElseGet(ResponseEntity.notFound()::build);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8900519,"reputation":503,"user_id":6644123,"display_name":"shanfeng"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660964023,"creation_date":1660964023,"answer_id":73423789,"question_id":73423717,"body_markdown":"We can try to define a exception with reponse status.\r\n```\r\n@ResponseStatus(value = HttpStatus.NOT_FOUND)\r\npublic class ResourceNotFoundException extends RuntimeException {\r\n}\r\n```\r\nAnd then, in your controller, throw this exception  \r\n```\r\nthrow new ResourceNotFoundException()\r\n```\r\nOr, just set the status of `Response` directly.  \r\nBTW, a better approach is to define our business code to implement it.","title":"How to handle null return value in spring boot","body":"<p>We can try to define a exception with reponse status.</p>\n<pre><code>@ResponseStatus(value = HttpStatus.NOT_FOUND)\npublic class ResourceNotFoundException extends RuntimeException {\n}\n</code></pre>\n<p>And then, in your controller, throw this exception</p>\n<pre><code>throw new ResourceNotFoundException()\n</code></pre>\n<p>Or, just set the status of <code>Response</code> directly.<br />\nBTW, a better approach is to define our business code to implement it.</p>\n"},{"tags":[],"owner":{"account_id":18238807,"reputation":51,"user_id":13276211,"display_name":"FrozenBanana"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1661036258,"creation_date":1661036258,"answer_id":73430613,"question_id":73423717,"body_markdown":"You could use an exception handler to handle these kind of exceptions. To make this work, you could first return an `Optional&lt;User&gt;` instead of a `User`. Then you could write your controller as following. \r\n\r\n    @GetMapping(value = &quot;/get/{id}&quot;, produces = MediaType.APPLICATION_JSON_VALUE)\r\n    public ResponseEntity&lt;User&gt; findById(@PathVariable int id) {\r\n    \r\n    return ResponseEntity\r\n       .status(HttpStatus.OK)\r\n       .body(userMapper.findById(id)\r\n       .orElseThrow(UserNotFoundException::new);\r\n    }\r\n\r\nThe `UserNotFoundException` is a custom class. You can extend from `RuntimeException` so the exception becomes unchecked. \r\n\r\n    public class UserNotFoundException extends RuntimeException {}\r\n\r\nThen you could make an `ErrorResponse` class. You&#39;re free to add the fields you like, but it could look like this:\r\n\r\n    @Getter\r\n    @Setter\r\n    public class ErrorResponse {\r\n       private int code;\r\n       private String description;\r\n    }\r\n\r\n\r\n\r\nYou could then handle this `UserNotFoundException` in an `ExceptionHandler`:\r\n\r\n    @RestControllerAdvice\r\n    @Slf4j\r\n    public class ApplicationNameExceptionHandler {\r\n    \r\n        @ExceptionHandler\r\n        public ResponseEntity&lt;ErrorResponse&gt; handleException(UserNotFoundException e) {\r\n        log.info(&quot;User not found&quot;);\r\n    \r\n        ErrorResponse errorResponse = new ErrorResponse();\r\n        errorResponse.setCode(HttpStatus.NOT_FOUND.value());\r\n        errorResponse.setDescription(&quot;User not found&quot;);\r\n    \r\n        return ResponseEntity\r\n            .status(HttpStatus.NOT_FOUND)\r\n            .contentType(MediaType.APPLICATION_PROBLEM_JSON)\r\n            .body(errorResponse);\r\n    }\r\n\r\nThe advantage of this approach is that you can keep your controllers concise and tidy and all your controller exceptions can be handled in the same class (`ApplicationNameExceptionHandler`).","title":"How to handle null return value in spring boot","body":"<p>You could use an exception handler to handle these kind of exceptions. To make this work, you could first return an <code>Optional&lt;User&gt;</code> instead of a <code>User</code>. Then you could write your controller as following.</p>\n<pre><code>@GetMapping(value = &quot;/get/{id}&quot;, produces = MediaType.APPLICATION_JSON_VALUE)\npublic ResponseEntity&lt;User&gt; findById(@PathVariable int id) {\n\nreturn ResponseEntity\n   .status(HttpStatus.OK)\n   .body(userMapper.findById(id)\n   .orElseThrow(UserNotFoundException::new);\n}\n</code></pre>\n<p>The <code>UserNotFoundException</code> is a custom class. You can extend from <code>RuntimeException</code> so the exception becomes unchecked.</p>\n<pre><code>public class UserNotFoundException extends RuntimeException {}\n</code></pre>\n<p>Then you could make an <code>ErrorResponse</code> class. You're free to add the fields you like, but it could look like this:</p>\n<pre><code>@Getter\n@Setter\npublic class ErrorResponse {\n   private int code;\n   private String description;\n}\n</code></pre>\n<p>You could then handle this <code>UserNotFoundException</code> in an <code>ExceptionHandler</code>:</p>\n<pre><code>@RestControllerAdvice\n@Slf4j\npublic class ApplicationNameExceptionHandler {\n\n    @ExceptionHandler\n    public ResponseEntity&lt;ErrorResponse&gt; handleException(UserNotFoundException e) {\n    log.info(&quot;User not found&quot;);\n\n    ErrorResponse errorResponse = new ErrorResponse();\n    errorResponse.setCode(HttpStatus.NOT_FOUND.value());\n    errorResponse.setDescription(&quot;User not found&quot;);\n\n    return ResponseEntity\n        .status(HttpStatus.NOT_FOUND)\n        .contentType(MediaType.APPLICATION_PROBLEM_JSON)\n        .body(errorResponse);\n}\n</code></pre>\n<p>The advantage of this approach is that you can keep your controllers concise and tidy and all your controller exceptions can be handled in the same class (<code>ApplicationNameExceptionHandler</code>).</p>\n"}],"owner":{"account_id":17065357,"reputation":103,"user_id":12347681,"display_name":"DGulyasar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3860,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"accepted_answer_id":73423751,"answer_count":3,"score":4,"last_activity_date":1661036258,"creation_date":1660962712,"question_id":73423717,"body_markdown":"I have a question about spring boot. When I want to get the specific user from my database everything is ok but how can I handle the null response (There is no such a user)? I want to handle the return value of null as ResponseEntity but when there is a user with that id I need to return User details. So I could not set return value as ResponseEntity. Here is the screenshot of the problem:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/LHodV.png\r\n\r\nHere is the code:\r\n\r\n    @GetMapping(&quot;get/{id}&quot;)\r\n    public User findById(@PathVariable int id) throws Exception {\r\n        try {\r\n            if(userMapper.findById(id) != null) {\r\n                return userMapper.findById(id);\r\n            }else {\r\n                throw new Exception(&quot;YOK ULAN YOK&quot;);\r\n            }\r\n        }catch (Exception e) {\r\n            // TODO: Make perfect\r\n            return new User(-1);\r\n        }\r\n    }\r\n\r\nand here is the return value:\r\n\r\n    {\r\n    &quot;email&quot;: null,\r\n    &quot;username&quot;: null,\r\n    &quot;password&quot;: null,\r\n    &quot;name&quot;: null,\r\n    &quot;surname&quot;: null,\r\n    &quot;age&quot;: 0,\r\n    &quot;photoLink&quot;: null,\r\n    &quot;dateOfBirth&quot;: null,\r\n    &quot;phoneNumber&quot;: null,\r\n    &quot;city&quot;: null,\r\n    &quot;country&quot;: null,\r\n    &quot;friendList&quot;: null,\r\n    &quot;plan&quot;: null,\r\n    &quot;id&quot;: -1,\r\n    &quot;planned&quot;: false\r\n}\r\n\r\nI don&#39;t want to send a -1 user, I want to send a user not found response. How can I handle it?\r\n\r\nThanks,","title":"How to handle null return value in spring boot","body":"<p>I have a question about spring boot. When I want to get the specific user from my database everything is ok but how can I handle the null response (There is no such a user)? I want to handle the return value of null as ResponseEntity but when there is a user with that id I need to return User details. So I could not set return value as ResponseEntity. Here is the screenshot of the problem:</p>\n<p><a href=\"https://i.stack.imgur.com/LHodV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LHodV.png\" alt=\"enter image description here\" /></a></p>\n<p>Here is the code:</p>\n<pre><code>@GetMapping(&quot;get/{id}&quot;)\npublic User findById(@PathVariable int id) throws Exception {\n    try {\n        if(userMapper.findById(id) != null) {\n            return userMapper.findById(id);\n        }else {\n            throw new Exception(&quot;YOK ULAN YOK&quot;);\n        }\n    }catch (Exception e) {\n        // TODO: Make perfect\n        return new User(-1);\n    }\n}\n</code></pre>\n<p>and here is the return value:</p>\n<pre><code>{\n&quot;email&quot;: null,\n&quot;username&quot;: null,\n&quot;password&quot;: null,\n&quot;name&quot;: null,\n&quot;surname&quot;: null,\n&quot;age&quot;: 0,\n&quot;photoLink&quot;: null,\n&quot;dateOfBirth&quot;: null,\n&quot;phoneNumber&quot;: null,\n&quot;city&quot;: null,\n&quot;country&quot;: null,\n&quot;friendList&quot;: null,\n&quot;plan&quot;: null,\n&quot;id&quot;: -1,\n&quot;planned&quot;: false\n</code></pre>\n<p>}</p>\n<p>I don't want to send a -1 user, I want to send a user not found response. How can I handle it?</p>\n<p>Thanks,</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1661062164,"post_id":73430066,"comment_id":129678777,"body_markdown":"What kind of application is this?  What kind of event are you talking about?","body":"What kind of application is this?  What kind of event are you talking about?"}],"answers":[{"tags":[],"owner":{"account_id":9827,"reputation":6784,"user_id":2049208,"display_name":"Kire Haglin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661036224,"creation_date":1661036224,"answer_id":73430610,"question_id":73430066,"body_markdown":"Perhaps JDK Flight Recorder could be of help. It&#39;s event based and it&#39;s possible to listen to events from another process, for example when a thread is started, a class is loaded or a lock is contended.\r\n\r\n**Process A:**\r\n\r\n    $ java -XX:StartFlightRecording:class-loading=true \r\n           -XX:FlightRecorderOptions:repository=/data ...\r\n\r\n\r\n**Process B:**\r\n\r\n    try (var es = EventStream.openRepository(Path.of(&quot;/data&quot;))) {\r\n     es.onEvent(&quot;jdk.ClassLoad&quot;, e -&gt; {\r\n       RecordedClass rc = e.getClass(&quot;loadedClass&quot;);\r\n       System.out.println(&quot;Class loaded: &quot; + rc.getName()));\r\n     });\r\n     es.start(); \r\n    }\r\n\r\nIt&#39;s also possible to listen on events over the network using the RemoteRecordingStream class. Custom events can be created, but then you need to change the code or use an [instrumentation agent][1].\r\n\r\n\r\n  [1]: https://developers.redhat.com/articles/2021/11/16/jvm-performance-monitoring-jmc-agent#using_the_jmc_agent_plugin","title":"Java Process Event listening","body":"<p>Perhaps JDK Flight Recorder could be of help. It's event based and it's possible to listen to events from another process, for example when a thread is started, a class is loaded or a lock is contended.</p>\n<p><strong>Process A:</strong></p>\n<pre><code>$ java -XX:StartFlightRecording:class-loading=true \n       -XX:FlightRecorderOptions:repository=/data ...\n</code></pre>\n<p><strong>Process B:</strong></p>\n<pre><code>try (var es = EventStream.openRepository(Path.of(&quot;/data&quot;))) {\n es.onEvent(&quot;jdk.ClassLoad&quot;, e -&gt; {\n   RecordedClass rc = e.getClass(&quot;loadedClass&quot;);\n   System.out.println(&quot;Class loaded: &quot; + rc.getName()));\n });\n es.start(); \n}\n</code></pre>\n<p>It's also possible to listen on events over the network using the RemoteRecordingStream class. Custom events can be created, but then you need to change the code or use an <a href=\"https://developers.redhat.com/articles/2021/11/16/jvm-performance-monitoring-jmc-agent#using_the_jmc_agent_plugin\" rel=\"nofollow noreferrer\">instrumentation agent</a>.</p>\n"}],"owner":{"account_id":2094791,"reputation":183,"user_id":1863823,"display_name":"imixtron"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1661036224,"creation_date":1661028556,"question_id":73430066,"body_markdown":"I have a situation where a jar file is running perfectly. Without having to change anything in the application:\r\n\r\n1. Is there a way to figure out if that java application is generating any events i can listen and work with. Maybe some way to get ApplicationEvents from the process?\r\n \r\n- Curious about this usecase\r\n- it can always be achieved by stand alone event processor i know that already\r\n- java version is 17, but it does not matter to the usecase\r\n\r\nif there is a way of building this sort of architecture I am also interested in that, like generating custom event to be listened by any other process (user_login,... etc)","title":"Java Process Event listening","body":"<p>I have a situation where a jar file is running perfectly. Without having to change anything in the application:</p>\n<ol>\n<li>Is there a way to figure out if that java application is generating any events i can listen and work with. Maybe some way to get ApplicationEvents from the process?</li>\n</ol>\n<ul>\n<li>Curious about this usecase</li>\n<li>it can always be achieved by stand alone event processor i know that already</li>\n<li>java version is 17, but it does not matter to the usecase</li>\n</ul>\n<p>if there is a way of building this sort of architecture I am also interested in that, like generating custom event to be listened by any other process (user_login,... etc)</p>\n"},{"tags":["java","maven","quarkus","classnotfoundexception","quarkus-native"],"answers":[{"tags":[],"owner":{"account_id":17069157,"reputation":210,"user_id":12350428,"display_name":"bob"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661035468,"creation_date":1661035100,"answer_id":73430527,"question_id":73421095,"body_markdown":"This has now been solved, following this guide https://quarkus.io/guides/logging#logging-adapters.\r\n\r\nIn the common module inside the pom I added this, to ALL dependencies (uncertain if all of them really need to exclude `commons-logging`).\r\n\r\n       &lt;exclusions&gt;\r\n            &lt;exclusion&gt;\r\n                &lt;groupId&gt;commons-logging&lt;/groupId&gt;\r\n                &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\r\n            &lt;/exclusion&gt;\r\n        &lt;/exclusions&gt;\r\n\r\nAnd also added one of the JBoss Logging adapters as suggested in Quarkus documentation.\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.jboss.logging&lt;/groupId&gt;\r\n        &lt;artifactId&gt;commons-logging-jboss-logging&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;","title":"Quarkus rest client ClassNotFoundException: org.apache.commons.logging.impl.LogFactoryImpl in native mode","body":"<p>This has now been solved, following this guide <a href=\"https://quarkus.io/guides/logging#logging-adapters\" rel=\"nofollow noreferrer\">https://quarkus.io/guides/logging#logging-adapters</a>.</p>\n<p>In the common module inside the pom I added this, to ALL dependencies (uncertain if all of them really need to exclude <code>commons-logging</code>).</p>\n<pre><code>   &lt;exclusions&gt;\n        &lt;exclusion&gt;\n            &lt;groupId&gt;commons-logging&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n</code></pre>\n<p>And also added one of the JBoss Logging adapters as suggested in Quarkus documentation.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.jboss.logging&lt;/groupId&gt;\n    &lt;artifactId&gt;commons-logging-jboss-logging&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":17069157,"reputation":210,"user_id":12350428,"display_name":"bob"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":397,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1661035468,"creation_date":1660935050,"question_id":73421095,"body_markdown":"I&#39;ve got a Quarkus project with multiple modules.\r\n\r\n    └── Parent module\r\n            └── Common module\r\n            └── child module\r\n            └── some module\r\n\r\nIn the common module I&#39;ve added the following dependencies (following this guide https://quarkus.io/guides/rest-client).\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n        &lt;artifactId&gt;quarkus-rest-client&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n        &lt;artifactId&gt;quarkus-rest-client-jackson&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\nThe child module has the common module as a dependency.\r\n\r\nAnd the code snippets I&#39;m using inside the child module. \r\n\r\n    @Produces(MediaType.APPLICATION_JSON)\r\n    @Consumes(MediaType.APPLICATION_JSON)\r\n    @ApplicationScoped\r\n    @RegisterRestClient(configKey = &quot;URL&quot;)\r\n    @RegisterClientHeaders(AuthorizationHeaderFactory.class)\r\n    public interface MyRestClient {\r\n    \r\n    \t@POST\r\n    \t@Path(&quot;/{id}&quot;)\r\n    \tFooResponse&lt;FooResponseData&gt; makeFooPayout(@PathParam(&quot;id&quot;) String accountId,\r\n                                                FooRequest&lt;FooData&gt; requestData);\r\n        }\r\n    }\r\n\r\nAnd calling it from another ApplicationScoped class:\r\n\r\n\t\tFooResponse&lt;FooResponseData&gt; fooResponse = myRestClient.makeFooPayout(\r\n\t\t\t\tpayoutDTO.id(),\r\n\t\t\t\tfooRequest\r\n\t\t);\r\n\r\n\r\n\r\nWhen running the the application in native mode it throws the `ClassNotFoundException: org.apache.commons.logging.impl.LogFactoryImpl`.\r\n\r\nI stumbled across this one (https://quarkus.io/guides/logging#logging-adapters) thinking it would solve the issue for me.\r\n\r\nI followed the guide by trying to exclude the logging from the rest-client dependencies in the parent module.\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n            &lt;artifactId&gt;quarkus-rest-client&lt;/artifactId&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;commons-logging&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n            &lt;artifactId&gt;quarkus-rest-client-jackson&lt;/artifactId&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;commons-logging&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n\r\n\r\nAnd added one of the adapters as suggested in the documentation:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.jboss.logging&lt;/groupId&gt;\r\n        &lt;artifactId&gt;commons-logging-jboss-logging&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\nWhy is this not solving the issue? Have I missed something? Am I supposed to exclude the logging dependency inside of the child pom.xml?\r\n","title":"Quarkus rest client ClassNotFoundException: org.apache.commons.logging.impl.LogFactoryImpl in native mode","body":"<p>I've got a Quarkus project with multiple modules.</p>\n<pre><code>└── Parent module\n        └── Common module\n        └── child module\n        └── some module\n</code></pre>\n<p>In the common module I've added the following dependencies (following this guide <a href=\"https://quarkus.io/guides/rest-client\" rel=\"nofollow noreferrer\">https://quarkus.io/guides/rest-client</a>).</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n    &lt;artifactId&gt;quarkus-rest-client&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n    &lt;artifactId&gt;quarkus-rest-client-jackson&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>The child module has the common module as a dependency.</p>\n<p>And the code snippets I'm using inside the child module.</p>\n<pre><code>@Produces(MediaType.APPLICATION_JSON)\n@Consumes(MediaType.APPLICATION_JSON)\n@ApplicationScoped\n@RegisterRestClient(configKey = &quot;URL&quot;)\n@RegisterClientHeaders(AuthorizationHeaderFactory.class)\npublic interface MyRestClient {\n\n    @POST\n    @Path(&quot;/{id}&quot;)\n    FooResponse&lt;FooResponseData&gt; makeFooPayout(@PathParam(&quot;id&quot;) String accountId,\n                                            FooRequest&lt;FooData&gt; requestData);\n    }\n}\n</code></pre>\n<p>And calling it from another ApplicationScoped class:</p>\n<pre><code>    FooResponse&lt;FooResponseData&gt; fooResponse = myRestClient.makeFooPayout(\n            payoutDTO.id(),\n            fooRequest\n    );\n</code></pre>\n<p>When running the the application in native mode it throws the <code>ClassNotFoundException: org.apache.commons.logging.impl.LogFactoryImpl</code>.</p>\n<p>I stumbled across this one (<a href=\"https://quarkus.io/guides/logging#logging-adapters\" rel=\"nofollow noreferrer\">https://quarkus.io/guides/logging#logging-adapters</a>) thinking it would solve the issue for me.</p>\n<p>I followed the guide by trying to exclude the logging from the rest-client dependencies in the parent module.</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n        &lt;artifactId&gt;quarkus-rest-client&lt;/artifactId&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;commons-logging&lt;/groupId&gt;\n                &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n        &lt;artifactId&gt;quarkus-rest-client-jackson&lt;/artifactId&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;commons-logging&lt;/groupId&gt;\n                &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>And added one of the adapters as suggested in the documentation:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.jboss.logging&lt;/groupId&gt;\n    &lt;artifactId&gt;commons-logging-jboss-logging&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Why is this not solving the issue? Have I missed something? Am I supposed to exclude the logging dependency inside of the child pom.xml?</p>\n"},{"tags":["java","spring-boot","junit","unmarshalling"],"comments":[{"owner":{"account_id":483434,"reputation":25487,"user_id":898478,"accept_rate":86,"display_name":"m0skit0"},"score":0,"creation_date":1661016576,"post_id":73427008,"comment_id":129672743,"body_markdown":"What exactly you don&#39;t know? Seems pretty straightforward to me, there are just 2 methods, both are public and only depend on the inputs.","body":"What exactly you don&#39;t know? Seems pretty straightforward to me, there are just 2 methods, both are public and only depend on the inputs."},{"owner":{"account_id":23238787,"reputation":1,"user_id":17328445,"display_name":"Cristi Manolache"},"score":0,"creation_date":1661086373,"post_id":73427008,"comment_id":129683056,"body_markdown":"@m0skit0 I am beginner and It&#39;s my first Junit test. I don&#39;t know the steps to test it. :)","body":"@m0skit0 I am beginner and It&#39;s my first Junit test. I don&#39;t know the steps to test it. :)"}],"answers":[{"tags":[],"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661035366,"creation_date":1661035366,"answer_id":73430548,"question_id":73427008,"body_markdown":"Your code is hard to test because your methods operate by side effects (that is, printing to a `PrintStream`) instead of returning values.\r\n\r\nA simple approach to make your code more testable is to create two more methods in your class:\r\n```java\r\n@Service\r\npublic class MapperServiceImpl implements MapperService {\r\n\r\n    public void mappingContent(String directoryPath, String fileName) throws JAXBException {\r\n        File xmlFile = new File(directoryPath + &quot;/&quot; + fileName);\r\n        displayMappingContent(unmarshallMenu(xmlFile));\r\n    }\r\n\r\n    public void displayMappingContent(Menu menu) {\r\n        System.out.println(renderMenu(menu));\r\n    }\r\n    \r\n    public String renderMenu(Menu menu) {\r\n        AtomicInteger count = new AtomicInteger(1);\r\n        List&lt;Content&gt; contents = menu.getContents();\r\n        StringBuffer sb = new StringBuffer();\r\n        sb.append(&quot;Type : &quot; + menu.getType().toUpperCase());\r\n        contents.stream()\r\n                .flatMap(content -&gt; content.getFoods().stream()).toList()\r\n                .forEach(food -&gt; sb.append(&quot;NR. &quot; + count.getAndIncrement()\r\n                        + &quot;\\nName : &quot; + food.getName() + &quot;\\nPrice : &quot; + food.getPrice()\r\n                        + &quot;\\nDescription : &quot; + food.getDescription() + &quot;\\nCalories&quot; + food.getCalories() + &quot;\\n&quot;));\r\n        return sb.toString()\r\n    }\r\n    \r\n    public Menu unmarshallMenu(File xmlFile) {\r\n        JAXBContext jaxbContext = JAXBContext.newInstance(Menu.class);\r\n        Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();\r\n        Menu menu = (Menu) jaxbUnmarshaller.unmarshal(xmlFile);\r\n    }\r\n}\r\n```\r\nNow the original two methods are trivial, and the new ones are simple to test.\r\n\r\nYou could also split your service into three: a `@Component` to unmarshall, a `@Component` to render menus, and the existing service which is a client of those components. Then when you test the service you can mock those components.\r\n","title":"Junit test for unmarshalling method","body":"<p>Your code is hard to test because your methods operate by side effects (that is, printing to a <code>PrintStream</code>) instead of returning values.</p>\n<p>A simple approach to make your code more testable is to create two more methods in your class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class MapperServiceImpl implements MapperService {\n\n    public void mappingContent(String directoryPath, String fileName) throws JAXBException {\n        File xmlFile = new File(directoryPath + &quot;/&quot; + fileName);\n        displayMappingContent(unmarshallMenu(xmlFile));\n    }\n\n    public void displayMappingContent(Menu menu) {\n        System.out.println(renderMenu(menu));\n    }\n    \n    public String renderMenu(Menu menu) {\n        AtomicInteger count = new AtomicInteger(1);\n        List&lt;Content&gt; contents = menu.getContents();\n        StringBuffer sb = new StringBuffer();\n        sb.append(&quot;Type : &quot; + menu.getType().toUpperCase());\n        contents.stream()\n                .flatMap(content -&gt; content.getFoods().stream()).toList()\n                .forEach(food -&gt; sb.append(&quot;NR. &quot; + count.getAndIncrement()\n                        + &quot;\\nName : &quot; + food.getName() + &quot;\\nPrice : &quot; + food.getPrice()\n                        + &quot;\\nDescription : &quot; + food.getDescription() + &quot;\\nCalories&quot; + food.getCalories() + &quot;\\n&quot;));\n        return sb.toString()\n    }\n    \n    public Menu unmarshallMenu(File xmlFile) {\n        JAXBContext jaxbContext = JAXBContext.newInstance(Menu.class);\n        Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();\n        Menu menu = (Menu) jaxbUnmarshaller.unmarshal(xmlFile);\n    }\n}\n</code></pre>\n<p>Now the original two methods are trivial, and the new ones are simple to test.</p>\n<p>You could also split your service into three: a <code>@Component</code> to unmarshall, a <code>@Component</code> to render menus, and the existing service which is a client of those components. Then when you test the service you can mock those components.</p>\n"}],"owner":{"account_id":23238787,"reputation":1,"user_id":17328445,"display_name":"Cristi Manolache"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":326,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1661035366,"creation_date":1661001302,"question_id":73427008,"body_markdown":"I have to test my methods for unmarshalling functionality and I don&#39;t know how to do it. Can someone explain me?\r\n\r\nHere are my methods:\r\n    \r\n    @Service\r\n    public class MapperServiceImpl implements MapperService {\r\n    \r\n        public void mappingContent(String directoryPath, String fileName) throws JAXBException {\r\n            File xmlFile = new File(directoryPath + &quot;/&quot; + fileName);\r\n    \r\n            JAXBContext jaxbContext = JAXBContext.newInstance(Menu.class);\r\n            Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();\r\n            Menu menu = (Menu) jaxbUnmarshaller.unmarshal(xmlFile);\r\n    \r\n            displayMappingContent(menu);\r\n        }\r\n    \r\n        public void displayMappingContent(Menu menu) {\r\n            List&lt;Content&gt; contents = menu.getContents();\r\n            AtomicInteger count = new AtomicInteger(1);\r\n    \r\n            System.out.println(&quot;Type : &quot; + menu.getType().toUpperCase());\r\n            contents.stream()\r\n                    .flatMap(content -&gt; content.getFoods().stream()).toList()\r\n                    .forEach(food -&gt; System.out.println(&quot;NR. &quot; + count.getAndIncrement()\r\n                            + &quot;\\nName : &quot; + food.getName() + &quot;\\nPrice : &quot; + food.getPrice()\r\n                            + &quot;\\nDescription : &quot; + food.getDescription() + &quot;\\nCalories&quot; + food.getCalories() + &quot;\\n&quot;));\r\n    \r\n        }\r\n    }","title":"Junit test for unmarshalling method","body":"<p>I have to test my methods for unmarshalling functionality and I don't know how to do it. Can someone explain me?</p>\n<p>Here are my methods:</p>\n<pre><code>@Service\npublic class MapperServiceImpl implements MapperService {\n\n    public void mappingContent(String directoryPath, String fileName) throws JAXBException {\n        File xmlFile = new File(directoryPath + &quot;/&quot; + fileName);\n\n        JAXBContext jaxbContext = JAXBContext.newInstance(Menu.class);\n        Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();\n        Menu menu = (Menu) jaxbUnmarshaller.unmarshal(xmlFile);\n\n        displayMappingContent(menu);\n    }\n\n    public void displayMappingContent(Menu menu) {\n        List&lt;Content&gt; contents = menu.getContents();\n        AtomicInteger count = new AtomicInteger(1);\n\n        System.out.println(&quot;Type : &quot; + menu.getType().toUpperCase());\n        contents.stream()\n                .flatMap(content -&gt; content.getFoods().stream()).toList()\n                .forEach(food -&gt; System.out.println(&quot;NR. &quot; + count.getAndIncrement()\n                        + &quot;\\nName : &quot; + food.getName() + &quot;\\nPrice : &quot; + food.getPrice()\n                        + &quot;\\nDescription : &quot; + food.getDescription() + &quot;\\nCalories&quot; + food.getCalories() + &quot;\\n&quot;));\n\n    }\n}\n</code></pre>\n"},{"tags":["java","encoding","utf-8","jetty","iso-8859-1"],"comments":[{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1661037885,"post_id":73430535,"comment_id":129676390,"body_markdown":"By “sql server”, do you mean *Microsoft SQL Server*? If so, say so, as that might be important here.","body":"By “sql server”, do you mean <i>Microsoft SQL Server</i>? If so, say so, as that might be important here."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1661038001,"post_id":73430535,"comment_id":129676402,"body_markdown":"Your Question is a bit vague. You should recreate the problem with an absolute minimum of code, an [MCVE](https://stackoverflow.com/help/mcve).","body":"Your Question is a bit vague. You should recreate the problem with an absolute minimum of code, an <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>."},{"owner":{"account_id":4198672,"reputation":28840,"user_id":3439404,"display_name":"JosefZ"},"score":0,"creation_date":1661075625,"post_id":73430535,"comment_id":129680827,"body_markdown":"You face a [mojibake](https://en.wikipedia.org/wiki/Mojibake) case (*example in Python for its universal intelligibility*): `&#39;&#248;&#39;.encode( &#39;utf-8&#39;).decode( &#39;iso-8859-1&#39;)` returns `&#39;&#195;&#184;&#39;`.","body":"You face a <a href=\"https://en.wikipedia.org/wiki/Mojibake\" rel=\"nofollow noreferrer\">mojibake</a> case (<i>example in Python for its universal intelligibility</i>): <code>&#39;&#248;&#39;.encode( &#39;utf-8&#39;).decode( &#39;iso-8859-1&#39;)</code> returns <code>&#39;&#195;&#184;&#39;</code>."},{"owner":{"account_id":15910041,"reputation":592,"user_id":11480221,"display_name":"AddeusExMachina"},"score":0,"creation_date":1661088008,"post_id":73430535,"comment_id":129683390,"body_markdown":"Try launching the java app with ```java -Dfile.encoding=UTF-8 -jar file.jar```","body":"Try launching the java app with <code>java -Dfile.encoding=UTF-8 -jar file.jar</code>"}],"owner":{"account_id":26117880,"reputation":1,"user_id":19810692,"display_name":"Nand"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1661035254,"creation_date":1661035254,"question_id":73430535,"body_markdown":"I&#39;ve Spring JDK8 code(REST service) deployed over Jetty 9.4.44 version {the same issue with JDK7 &amp; lower version of jetty } where I&#39;m facing issue with European characters.Those are showing incorrect over server.\r\nData has saving correctly over DB(sql server).but when we see it over server its not correct.\r\nEverything works fine locally but as soon we deploy the code to server its not working.\r\nWe have tried every other solution which converts data explicitly into UTF-8 technically,Also over server we&#39;ve updated everywhere encoding standard to &#39;UTF-8&#39;. But nothing helping out and it continue to show wrong data over server.\r\n\r\nActual character: &#248; |\r\nOver server: &#195;&#184; |\r\nat the receiving end: �\r\n\r\nI guess something wrong with server settings but not getting what causing this exactly. Can someone please help out with this?\r\nThank you!!","title":"European Character Encoding Issue: Java + Jetty","body":"<p>I've Spring JDK8 code(REST service) deployed over Jetty 9.4.44 version {the same issue with JDK7 &amp; lower version of jetty } where I'm facing issue with European characters.Those are showing incorrect over server.\nData has saving correctly over DB(sql server).but when we see it over server its not correct.\nEverything works fine locally but as soon we deploy the code to server its not working.\nWe have tried every other solution which converts data explicitly into UTF-8 technically,Also over server we've updated everywhere encoding standard to 'UTF-8'. But nothing helping out and it continue to show wrong data over server.</p>\n<p>Actual character: ø |\nOver server: Ã¸ |\nat the receiving end: �</p>\n<p>I guess something wrong with server settings but not getting what causing this exactly. Can someone please help out with this?\nThank you!!</p>\n"},{"tags":["java","regex","string"],"comments":[{"owner":{"display_name":"user843337"},"score":0,"creation_date":1322233043,"post_id":8270784,"comment_id":10181430,"body_markdown":"I haven&#39;t tried anything yet - I don&#39;t even know where to begin with the problem as it&#39;s the first time I&#39;ve come across anything quite like it.","body":"I haven&#39;t tried anything yet - I don&#39;t even know where to begin with the problem as it&#39;s the first time I&#39;ve come across anything quite like it."},{"owner":{"account_id":7670,"reputation":34993,"user_id":13379,"accept_rate":86,"display_name":"Michael"},"score":0,"creation_date":1322233132,"post_id":8270784,"comment_id":10181457,"body_markdown":"Users are asked to add a &quot;homework&quot; tag to all questions regarding homework problems.","body":"Users are asked to add a &quot;homework&quot; tag to all questions regarding homework problems."},{"owner":{"display_name":"user843337"},"score":1,"creation_date":1322233235,"post_id":8270784,"comment_id":10181498,"body_markdown":"@Michael this isn&#39;t a &#39;homework&#39; question. I have just never come across this sort of problem before.","body":"@Michael this isn&#39;t a &#39;homework&#39; question. I have just never come across this sort of problem before."},{"owner":{"account_id":8964286,"reputation":1071,"user_id":6685632,"accept_rate":100,"display_name":"Dylan"},"score":0,"creation_date":1575248293,"post_id":8270784,"comment_id":104490884,"body_markdown":"This is not a &#39;homework&#39; question there are cases where you need to do this.","body":"This is not a &#39;homework&#39; question there are cases where you need to do this."},{"owner":{"account_id":1150042,"reputation":7000,"user_id":1131949,"accept_rate":73,"display_name":"Captain Kenpachi"},"score":0,"creation_date":1614162024,"post_id":8270784,"comment_id":117299091,"body_markdown":"I came her because I was looking for a similar solution. In my case I get back a long string of &quot;rules&quot; and have to split them before performing a lookup.","body":"I came her because I was looking for a similar solution. In my case I get back a long string of &quot;rules&quot; and have to split them before performing a lookup."}],"answers":[{"tags":[],"owner":{"account_id":37482,"reputation":33416,"user_id":107152,"accept_rate":87,"display_name":"Qtax"},"down_vote_count":1,"up_vote_count":110,"is_accepted":true,"score":109,"last_activity_date":1554981843,"creation_date":1322232936,"answer_id":8270824,"question_id":8270784,"body_markdown":"You could try to split on `(?&lt;=\\D)(?=\\d)|(?&lt;=\\d)(?=\\D)`, like:\r\n\r\n    str.split(&quot;(?&lt;=\\\\D)(?=\\\\d)|(?&lt;=\\\\d)(?=\\\\D)&quot;);\r\n\r\nIt matches positions between a number and not-a-number (in any order).\r\n\r\n - `(?&lt;=\\D)(?=\\d)` - matches a position between a non-digit (`\\D`) and a digit (`\\d`)\r\n - `(?&lt;=\\d)(?=\\D)` - matches a position between a digit and a non-digit.","title":"How to split a string between letters and digits (or between digits and letters)?","body":"<p>You could try to split on <code>(?&lt;=\\D)(?=\\d)|(?&lt;=\\d)(?=\\D)</code>, like:</p>\n\n<pre><code>str.split(\"(?&lt;=\\\\D)(?=\\\\d)|(?&lt;=\\\\d)(?=\\\\D)\");\n</code></pre>\n\n<p>It matches positions between a number and not-a-number (in any order).</p>\n\n<ul>\n<li><code>(?&lt;=\\D)(?=\\d)</code> - matches a position between a non-digit (<code>\\D</code>) and a digit (<code>\\d</code>)</li>\n<li><code>(?&lt;=\\d)(?=\\D)</code> - matches a position between a digit and a non-digit.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":267393,"reputation":10719,"user_id":555553,"accept_rate":62,"display_name":"mishadoff"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1322233055,"creation_date":1322233055,"answer_id":8270842,"question_id":8270784,"body_markdown":"Use two different patterns: `[0-9]*` and `[a-zA-Z]*` and split twice by each of them.","title":"How to split a string between letters and digits (or between digits and letters)?","body":"<p>Use two different patterns: <code>[0-9]*</code> and <code>[a-zA-Z]*</code> and split twice by each of them.</p>\n"},{"tags":[],"owner":{"account_id":178026,"reputation":35934,"user_id":409744,"display_name":"Mario"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1322233335,"creation_date":1322233335,"answer_id":8270895,"question_id":8270784,"body_markdown":"Didn&#39;t use Java for ages, so just some pseudo code, that should help get you started (faster for me than looking up everything :) ).\r\n\r\n     string a = &quot;123abc345def&quot;;\r\n     string[] result;\r\n     while(a.Length &gt; 0)\r\n     {\r\n          string part;\r\n          if((part = a.Match(/\\d+/)).Length) // match digits\r\n               ;\r\n          else if((part = a.Match(/\\a+/)).Length) // match letters\r\n               ;\r\n          else\r\n               break; // something invalid - neither digit nor letter\r\n          result.append(part);\r\n          a = a.SubStr(part.Length - 1); // remove the part we&#39;ve found\r\n     }","title":"How to split a string between letters and digits (or between digits and letters)?","body":"<p>Didn't use Java for ages, so just some pseudo code, that should help get you started (faster for me than looking up everything :) ).</p>\n\n<pre><code> string a = \"123abc345def\";\n string[] result;\n while(a.Length &gt; 0)\n {\n      string part;\n      if((part = a.Match(/\\d+/)).Length) // match digits\n           ;\n      else if((part = a.Match(/\\a+/)).Length) // match letters\n           ;\n      else\n           break; // something invalid - neither digit nor letter\n      result.append(part);\n      a = a.SubStr(part.Length - 1); // remove the part we've found\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":334987,"reputation":9182,"user_id":661797,"accept_rate":88,"display_name":"nullpotent"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1322233794,"creation_date":1322233415,"answer_id":8270914,"question_id":8270784,"body_markdown":"How about:\r\n\r\n    private List&lt;String&gt; Parse(String str) {\r\n        List&lt;String&gt; output = new ArrayList&lt;String&gt;();\r\n        Matcher match = Pattern.compile(&quot;[0-9]+|[a-z]+|[A-Z]+&quot;).matcher(str);\r\n        while (match.find()) {\r\n            output.add(match.group());\r\n        }\r\n        return output;\r\n    }\r\n\r\n","title":"How to split a string between letters and digits (or between digits and letters)?","body":"<p>How about:</p>\n\n<pre><code>private List&lt;String&gt; Parse(String str) {\n    List&lt;String&gt; output = new ArrayList&lt;String&gt;();\n    Matcher match = Pattern.compile(\"[0-9]+|[a-z]+|[A-Z]+\").matcher(str);\n    while (match.find()) {\n        output.add(match.group());\n    }\n    return output;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1218248,"reputation":757,"user_id":1185419,"accept_rate":62,"display_name":"The Anh Nguyen"},"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1482200239,"creation_date":1450333924,"answer_id":34328035,"question_id":8270784,"body_markdown":"You can try this:\r\n\r\n    Pattern p = Pattern.compile(&quot;[a-z]+|\\\\d+&quot;);\r\n    Matcher m = p.matcher(&quot;123abc345def&quot;);\r\n    ArrayList&lt;String&gt; allMatches = new ArrayList&lt;&gt;();\r\n    while (m.find()) {\r\n        allMatches.add(m.group());\r\n    }\r\n\r\nThe result (allMatches) will be:\r\n\r\n    [&quot;123&quot;, &quot;abc&quot;, &quot;345&quot;, &quot;def&quot;]","title":"How to split a string between letters and digits (or between digits and letters)?","body":"<p>You can try this:</p>\n\n<pre><code>Pattern p = Pattern.compile(\"[a-z]+|\\\\d+\");\nMatcher m = p.matcher(\"123abc345def\");\nArrayList&lt;String&gt; allMatches = new ArrayList&lt;&gt;();\nwhile (m.find()) {\n    allMatches.add(m.group());\n}\n</code></pre>\n\n<p>The result (allMatches) will be:</p>\n\n<pre><code>[\"123\", \"abc\", \"345\", \"def\"]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2995755,"reputation":1183,"user_id":2542332,"accept_rate":100,"display_name":"sergeyan"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1495629242,"creation_date":1481029958,"answer_id":40996269,"question_id":8270784,"body_markdown":"If you are looking for solution without using Java `String` functionality (i.e. `split`, `match`, etc.) then the following should help:\r\n\r\n    List&lt;String&gt; splitString(String string) {\r\n    \t\tList&lt;String&gt; list = new ArrayList&lt;String&gt;();\r\n    \t\tString token = &quot;&quot;;\r\n    \t\tchar curr;\r\n    \t\tfor (int e = 0; e &lt; string.length() + 1; e++) {\r\n    \t\t\tif (e == 0)\r\n    \t\t\t\tcurr = string.charAt(0);\r\n    \t\t\telse {\r\n    \t\t\t\tcurr = string.charAt(--e);\r\n    \t\t\t}\r\n    \r\n    \t\t\tif (isNumber(curr)) {\r\n    \t\t\t\twhile (e &lt; string.length() &amp;&amp; isNumber(string.charAt(e))) {\r\n    \t\t\t\t\ttoken += string.charAt(e++);\r\n    \t\t\t\t}\r\n    \t\t\t\tlist.add(token);\r\n    \t\t\t\ttoken = &quot;&quot;;\r\n    \t\t\t} else {\r\n    \t\t\t\twhile (e &lt; string.length() &amp;&amp; !isNumber(string.charAt(e))) {\r\n    \t\t\t\t\ttoken += string.charAt(e++);\r\n    \t\t\t\t}\r\n    \t\t\t\tlist.add(token);\r\n    \t\t\t\ttoken = &quot;&quot;;\r\n    \t\t\t}\r\n    \r\n    \t\t}\r\n    \r\n    \t\treturn list;\r\n    \t}\r\n\r\n    boolean isNumber(char c) {\r\n    \t\treturn c &gt;= &#39;0&#39; &amp;&amp; c &lt;= &#39;9&#39;;\r\n    \t}\r\n\r\nThis solution will split numbers and &#39;words&#39;, where &#39;words&#39; are strings that don&#39;t contain numbers. However, if you like to have only &#39;words&#39; containing English letters then you can easily modify it by adding more conditions (like `isNumber` method call) depending on your requirements (for example you may wish to skip words that contain non English letters). Also note that the `splitString` method returns `ArrayList` which later can be converted to `String` array.\r\n\r\n","title":"How to split a string between letters and digits (or between digits and letters)?","body":"<p>If you are looking for solution without using Java <code>String</code> functionality (i.e. <code>split</code>, <code>match</code>, etc.) then the following should help:</p>\n\n<pre><code>List&lt;String&gt; splitString(String string) {\n        List&lt;String&gt; list = new ArrayList&lt;String&gt;();\n        String token = \"\";\n        char curr;\n        for (int e = 0; e &lt; string.length() + 1; e++) {\n            if (e == 0)\n                curr = string.charAt(0);\n            else {\n                curr = string.charAt(--e);\n            }\n\n            if (isNumber(curr)) {\n                while (e &lt; string.length() &amp;&amp; isNumber(string.charAt(e))) {\n                    token += string.charAt(e++);\n                }\n                list.add(token);\n                token = \"\";\n            } else {\n                while (e &lt; string.length() &amp;&amp; !isNumber(string.charAt(e))) {\n                    token += string.charAt(e++);\n                }\n                list.add(token);\n                token = \"\";\n            }\n\n        }\n\n        return list;\n    }\n\nboolean isNumber(char c) {\n        return c &gt;= '0' &amp;&amp; c &lt;= '9';\n    }\n</code></pre>\n\n<p>This solution will split numbers and 'words', where 'words' are strings that don't contain numbers. However, if you like to have only 'words' containing English letters then you can easily modify it by adding more conditions (like <code>isNumber</code> method call) depending on your requirements (for example you may wish to skip words that contain non English letters). Also note that the <code>splitString</code> method returns <code>ArrayList</code> which later can be converted to <code>String</code> array.</p>\n"},{"tags":[],"owner":{"account_id":315980,"reputation":10348,"user_id":631911,"display_name":"Tatarize"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1483608366,"creation_date":1483608366,"answer_id":41481283,"question_id":8270784,"body_markdown":"I was doing this sort of thing for mission critical code. Like every fraction of a second counts because I need to process 180k entries in an unnoticeable amount of time. So I skipped the regex and split altogether and allowed for inline processing of each element (though adding them to an `ArrayList&lt;String&gt;` would be fine). If you want to do this exact thing but need it to be something like 20x faster...\r\n\r\n\r\n    void parseGroups(String text) {\r\n        int last = 0;\r\n        int state = 0;\r\n        for (int i = 0, s = text.length(); i &lt; s; i++) {\r\n            switch (text.charAt(i)) {\r\n                case &#39;0&#39;:\r\n                case &#39;1&#39;:\r\n                case &#39;2&#39;:\r\n                case &#39;3&#39;:\r\n                case &#39;4&#39;:\r\n                case &#39;5&#39;:\r\n                case &#39;6&#39;:\r\n                case &#39;7&#39;:\r\n                case &#39;8&#39;:\r\n                case &#39;9&#39;:\r\n                    if (state == 2) {\r\n                        processElement(text.substring(last, i));\r\n                        last = i;\r\n                    }\r\n                    state = 1;\r\n                    break;\r\n                default:\r\n                    if (state == 1) {\r\n                        processElement(text.substring(last, i));\r\n                        last = i;\r\n                    }\r\n                    state = 2;\r\n                    break;\r\n            }\r\n        }\r\n        processElement(text.substring(last));\r\n    }","title":"How to split a string between letters and digits (or between digits and letters)?","body":"<p>I was doing this sort of thing for mission critical code. Like every fraction of a second counts because I need to process 180k entries in an unnoticeable amount of time. So I skipped the regex and split altogether and allowed for inline processing of each element (though adding them to an <code>ArrayList&lt;String&gt;</code> would be fine). If you want to do this exact thing but need it to be something like 20x faster...</p>\n\n<pre><code>void parseGroups(String text) {\n    int last = 0;\n    int state = 0;\n    for (int i = 0, s = text.length(); i &lt; s; i++) {\n        switch (text.charAt(i)) {\n            case '0':\n            case '1':\n            case '2':\n            case '3':\n            case '4':\n            case '5':\n            case '6':\n            case '7':\n            case '8':\n            case '9':\n                if (state == 2) {\n                    processElement(text.substring(last, i));\n                    last = i;\n                }\n                state = 1;\n                break;\n            default:\n                if (state == 1) {\n                    processElement(text.substring(last, i));\n                    last = i;\n                }\n                state = 2;\n                break;\n        }\n    }\n    processElement(text.substring(last));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4221153,"reputation":1104,"user_id":3455918,"accept_rate":11,"display_name":"Andrew Anderson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661033223,"creation_date":1559595083,"answer_id":56434396,"question_id":8270784,"body_markdown":"Wouldn&#39;t this\r\n`&quot;\\d+|\\D+&quot;`\r\ndo the job instead of the cumbersome:\r\n`&quot;(?&lt;=\\\\D)(?=\\\\d)|(?&lt;=\\\\d)(?=\\\\D)&quot;`\r\n?","title":"How to split a string between letters and digits (or between digits and letters)?","body":"<p>Wouldn't this\n<code>&quot;\\d+|\\D+&quot;</code>\ndo the job instead of the cumbersome:\n<code>&quot;(?&lt;=\\\\D)(?=\\\\d)|(?&lt;=\\\\d)(?=\\\\D)&quot;</code>\n?</p>\n"}],"owner":{"display_name":"user843337"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":125818,"favorite_count":0,"down_vote_count":0,"up_vote_count":64,"accepted_answer_id":8270824,"answer_count":8,"score":64,"last_activity_date":1661033223,"creation_date":1322232798,"question_id":8270784,"body_markdown":"I&#39;m trying to work out a way of splitting up a string in java that follows a pattern like so:\r\n\r\n    String a = &quot;123abc345def&quot;;\r\n\r\nThe results from this should be the following:\r\n\r\n    x[0] = &quot;123&quot;;\r\n    x[1] = &quot;abc&quot;;\r\n    x[2] = &quot;345&quot;;\r\n    x[3] = &quot;def&quot;;\r\n\r\nHowever I&#39;m completely stumped as to how I can achieve this. Please can someone help me out? I have tried searching online for a similar problem, however it&#39;s very difficult to phrase it correctly in a search.\r\n\r\n**Please note:** The number of letters &amp; numbers may vary (e.g. There could be a string like so &#39;1234a5bcdef&#39;)","title":"How to split a string between letters and digits (or between digits and letters)?","body":"<p>I'm trying to work out a way of splitting up a string in java that follows a pattern like so:</p>\n\n<pre><code>String a = \"123abc345def\";\n</code></pre>\n\n<p>The results from this should be the following:</p>\n\n<pre><code>x[0] = \"123\";\nx[1] = \"abc\";\nx[2] = \"345\";\nx[3] = \"def\";\n</code></pre>\n\n<p>However I'm completely stumped as to how I can achieve this. Please can someone help me out? I have tried searching online for a similar problem, however it's very difficult to phrase it correctly in a search.</p>\n\n<p><strong>Please note:</strong> The number of letters &amp; numbers may vary (e.g. There could be a string like so '1234a5bcdef')</p>\n"},{"tags":["java","string","formatting"],"comments":[{"owner":{"account_id":25654118,"reputation":61,"user_id":19420875,"display_name":"fireballun"},"score":0,"creation_date":1661010252,"post_id":73427851,"comment_id":129671353,"body_markdown":"Now I feel stupid. I use String.format in my code but didn&#39;t think of using it like that. Do you mind me asking if you know how do I combine it with &quot;.2f&quot; format tho? I can ofc just search on my own.","body":"Now I feel stupid. I use String.format in my code but didn&#39;t think of using it like that. Do you mind me asking if you know how do I combine it with &quot;.2f&quot; format tho? I can ofc just search on my own."},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1661012486,"post_id":73427851,"comment_id":129671843,"body_markdown":"This problem, isn&#39;t related to streams (although you&#39;ve implemented this task using streams), it&#39;s purely about `String` formatting.","body":"This problem, isn&#39;t related to streams (although you&#39;ve implemented this task using streams), it&#39;s purely about <code>String</code> formatting."},{"owner":{"account_id":25654118,"reputation":61,"user_id":19420875,"display_name":"fireballun"},"score":0,"creation_date":1661013601,"post_id":73427851,"comment_id":129672074,"body_markdown":"Yes, I do apologize though I have a problem with the names still. I stream a class with Person objects that contain names. I need to format the table based on the longest name. Is this a stream problem? I wouldn&#39;t want to categorise it wrong again.","body":"Yes, I do apologize though I have a problem with the names still. I stream a class with Person objects that contain names. I need to format the table based on the longest name. Is this a stream problem? I wouldn&#39;t want to categorise it wrong again."},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1661019347,"post_id":73427851,"comment_id":129673272,"body_markdown":"The title of the question as well as tags are meant to pinpoint the core parts of the problem. There could be lots of things used in your project, from JDK features to Frameworks, and other staff. You need to emphasize things that are most relevant to the problem. Let&#39;s say you think the problem can be resolved by dealing with Maven, then you need to reflect it in the tags/title and elaborate in the question body. And if you think that the problem can be solved by utilizing different operations in the pipeline, applying different collectors, etc. - it&#39;s a stream-related problem.","body":"The title of the question as well as tags are meant to pinpoint the core parts of the problem. There could be lots of things used in your project, from JDK features to Frameworks, and other staff. You need to emphasize things that are most relevant to the problem. Let&#39;s say you think the problem can be resolved by dealing with Maven, then you need to reflect it in the tags/title and elaborate in the question body. And if you think that the problem can be solved by utilizing different operations in the pipeline, applying different collectors, etc. - it&#39;s a stream-related problem."}],"answers":[{"tags":[],"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661012302,"creation_date":1661012302,"answer_id":73428295,"question_id":73427851,"body_markdown":"You can specify the length of your formatted numbers before and after the comma:\r\n\r\n```lang-java\r\nString.format(Locale.US, &quot;%14.2f&quot;, 59.3)\r\n```\r\n\r\nThis will make your total formatted number 14 characters long, 2 of that characters will be after the comma, 1 will be the comma itself, that leaves 11 characters for the part before the comma. The number will be right aligned and padded with spaces. \r\n\r\nNow you just have to know the length of each heading (you could store it in a list) and adjust that total length for each column. But I think that a stream is not the ideal solution here, I would prefer a loop with an index counter, this way you can access two lists by index (the list of headings or their lengths and the list of values you want to output).","title":"String joining with different number of White Spaces in Java","body":"<p>You can specify the length of your formatted numbers before and after the comma:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String.format(Locale.US, &quot;%14.2f&quot;, 59.3)\n</code></pre>\n<p>This will make your total formatted number 14 characters long, 2 of that characters will be after the comma, 1 will be the comma itself, that leaves 11 characters for the part before the comma. The number will be right aligned and padded with spaces.</p>\n<p>Now you just have to know the length of each heading (you could store it in a list) and adjust that total length for each column. But I think that a stream is not the ideal solution here, I would prefer a loop with an index counter, this way you can access two lists by index (the list of headings or their lengths and the list of values you want to output).</p>\n"},{"tags":[],"owner":{"account_id":16366460,"reputation":131,"user_id":11820819,"display_name":"Dorin Simion"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661032316,"creation_date":1661032316,"answer_id":73430353,"question_id":73427851,"body_markdown":"You should align also Strings not only numbers. For student the same, student name have different length.\r\nI would extract the part that calculate averageScores as a String.\r\n\r\n    String averageScores = averageScoresPerTask(Stream.of(courseResults.toArray\r\n            (new CourseResult[0]))).entrySet().stream()\r\n            .sorted(Map.Entry.comparingByKey())\r\n            .map(t-&gt;String.format(Locale.US,&quot;%15.2f&quot;, t.getValue())).collect(Collectors.joining(&quot;|&quot;));\r\n\r\nAlso don&#39;t add spaces on Collectors.joining.\r\n\r\nAnd than use a single String.format like this:\r\n\r\n    String.format(Locale.US,&quot;\\n%20s|%s| %15.2f|%10s&quot;,&quot;Average&quot;,averageScores, averageTotalScore, mark(averageTotalScore));","title":"String joining with different number of White Spaces in Java","body":"<p>You should align also Strings not only numbers. For student the same, student name have different length.\nI would extract the part that calculate averageScores as a String.</p>\n<pre><code>String averageScores = averageScoresPerTask(Stream.of(courseResults.toArray\n        (new CourseResult[0]))).entrySet().stream()\n        .sorted(Map.Entry.comparingByKey())\n        .map(t-&gt;String.format(Locale.US,&quot;%15.2f&quot;, t.getValue())).collect(Collectors.joining(&quot;|&quot;));\n</code></pre>\n<p>Also don't add spaces on Collectors.joining.</p>\n<p>And than use a single String.format like this:</p>\n<pre><code>String.format(Locale.US,&quot;\\n%20s|%s| %15.2f|%10s&quot;,&quot;Average&quot;,averageScores, averageTotalScore, mark(averageTotalScore));\n</code></pre>\n"}],"owner":{"account_id":25654118,"reputation":61,"user_id":19420875,"display_name":"fireballun"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1661102554,"answer_count":2,"score":0,"last_activity_date":1661032316,"creation_date":1661008719,"question_id":73427851,"body_markdown":"I&#39;d like to ask if there&#39;s a way to use different delimiters or prefixes based on key value of streamed map.\r\n\r\nHere&#39;s my code:\r\n\r\n    Map&lt;String, Double&gt; averageScoresPerTask...\r\n\r\n    String summary=&quot;\\nAverage         |      &quot;+averageScoresPerTask(Stream.of(courseResults.toArray\r\n                        (new CourseResult[0]))).entrySet().stream()\r\n                        .sorted(Map.Entry.comparingByKey())\r\n                        .map(t-&gt;String.format(Locale.US,&quot;%.2f&quot;, t.getValue())).collect(Collectors.joining(&quot; |                &quot;))\r\n                        +&quot; | &quot;+String.format(Locale.US,&quot;%.2f&quot;,averageTotalScore) +&quot; |    &quot;+mark(averageTotalScore)+&quot; |&quot;;\r\n\r\nWhat it prints \r\n\r\n    Student         | Lab 1. Figures | Lab 2. War and Peace | Lab 3. File Tree | Total | Mark |\r\n    Eco Johnny |56              |69              |90              | 71.67         |    D |\r\n    Lodbrok Umberto |70              |95              |59              | 74.67         |    D |\r\n    Paige Ragnar |51              |68              |57              | 58.67         |    F |\r\n    Average         |          59.00 |                77.33 |                68.67 | 68.33 |    D |\r\n\r\nSimilar problem with students but my question is regarding Average line so please ignore them.\r\nHere&#39;s how it should look like.\r\n\r\n    Student         | Lab 1. Figures | Lab 2. War and Peace | Lab 3. File Tree | Total | Mark |\r\n    Eco Johnny      |             56 |                   69 |               90 | 71.67 |    D |\r\n    Lodbrok Umberto |             70 |                   95 |               59 | 74.67 |    D |\r\n    Paige Ragnar    |             51 |                   68 |               57 | 58.67 |    F |\r\n    Average         |          59.00 |                77.33 |            68.67 | 68.33 |    D |\r\n\r\nSo the &quot;|&quot; are perfectly aligned","title":"String joining with different number of White Spaces in Java","body":"<p>I'd like to ask if there's a way to use different delimiters or prefixes based on key value of streamed map.</p>\n<p>Here's my code:</p>\n<pre><code>Map&lt;String, Double&gt; averageScoresPerTask...\n\nString summary=&quot;\\nAverage         |      &quot;+averageScoresPerTask(Stream.of(courseResults.toArray\n                    (new CourseResult[0]))).entrySet().stream()\n                    .sorted(Map.Entry.comparingByKey())\n                    .map(t-&gt;String.format(Locale.US,&quot;%.2f&quot;, t.getValue())).collect(Collectors.joining(&quot; |                &quot;))\n                    +&quot; | &quot;+String.format(Locale.US,&quot;%.2f&quot;,averageTotalScore) +&quot; |    &quot;+mark(averageTotalScore)+&quot; |&quot;;\n</code></pre>\n<p>What it prints</p>\n<pre><code>Student         | Lab 1. Figures | Lab 2. War and Peace | Lab 3. File Tree | Total | Mark |\nEco Johnny |56              |69              |90              | 71.67         |    D |\nLodbrok Umberto |70              |95              |59              | 74.67         |    D |\nPaige Ragnar |51              |68              |57              | 58.67         |    F |\nAverage         |          59.00 |                77.33 |                68.67 | 68.33 |    D |\n</code></pre>\n<p>Similar problem with students but my question is regarding Average line so please ignore them.\nHere's how it should look like.</p>\n<pre><code>Student         | Lab 1. Figures | Lab 2. War and Peace | Lab 3. File Tree | Total | Mark |\nEco Johnny      |             56 |                   69 |               90 | 71.67 |    D |\nLodbrok Umberto |             70 |                   95 |               59 | 74.67 |    D |\nPaige Ragnar    |             51 |                   68 |               57 | 58.67 |    F |\nAverage         |          59.00 |                77.33 |            68.67 | 68.33 |    D |\n</code></pre>\n<p>So the &quot;|&quot; are perfectly aligned</p>\n"},{"tags":["java","android","nullpointerexception"],"comments":[{"owner":{"account_id":16537587,"reputation":486,"user_id":11949116,"display_name":"Abdo21"},"score":0,"creation_date":1659908886,"post_id":73270925,"comment_id":129401069,"body_markdown":"Replace `ActivityResultContracts.StartActivityForResult()` with `ActivityResultContracts.TakePicture()` and `stockCameraActivityResultLauncher.launch(intent)` with `stockCameraActivityResultLauncher.launch(uri)`. no need for `intent` in this case.","body":"Replace <code>ActivityResultContracts.StartActivityForResult()</code> with <code>ActivityResultContracts.TakePicture()</code> and <code>stockCameraActivityResultLauncher.launch(intent)</code> with <code>stockCameraActivityResultLauncher.launch(uri)</code>. no need for <code>intent</code> in this case."},{"owner":{"account_id":14033656,"reputation":105,"user_id":13463349,"display_name":"Chris972"},"score":0,"creation_date":1659914707,"post_id":73270925,"comment_id":129401859,"body_markdown":"@Abdo21\nLet&#39;s assume, although that doesn&#39;t explain why it works fine elsewhere in the application without errors.\nHowever, if I change to TakePicture(), I also have to change the other to GetContent( ) since I get an error on each. But unfortunately, the presentation of the image selection is not the same, and I prefer the other one.\nStill, I&#39;m going to adapt this, and submit to google to see if it works.\nThanks.","body":"@Abdo21 Let&#39;s assume, although that doesn&#39;t explain why it works fine elsewhere in the application without errors. However, if I change to TakePicture(), I also have to change the other to GetContent( ) since I get an error on each. But unfortunately, the presentation of the image selection is not the same, and I prefer the other one. Still, I&#39;m going to adapt this, and submit to google to see if it works. Thanks."},{"owner":{"account_id":18463410,"reputation":18363,"user_id":13598222,"display_name":"cactustictacs"},"score":0,"creation_date":1659915318,"post_id":73270925,"comment_id":129401928,"body_markdown":"It&#39;s crashing because either `stockGalleryActivityResultLauncher` or `stockCameraActivityResultLauncher` is *null* in your `StockInputDialog` at the moment those buttons are clicked, an you can&#39;t call `launch` on *null*. I can&#39;t see anything wrong with the code you&#39;ve posted (`registerForActivityResult` doesn&#39;t return *null* according to the docs) so I&#39;m guessing there&#39;s a bug that&#39;s not present in this simplified version. Your error&#39;s happening on *line 417* of that class so that&#39;s a fair bit of code that&#39;s missing! Might be worth creating your own emulator for API 31 and debugging it","body":"It&#39;s crashing because either <code>stockGalleryActivityResultLauncher</code> or <code>stockCameraActivityResultLauncher</code> is <i>null</i> in your <code>StockInputDialog</code> at the moment those buttons are clicked, an you can&#39;t call <code>launch</code> on <i>null</i>. I can&#39;t see anything wrong with the code you&#39;ve posted (<code>registerForActivityResult</code> doesn&#39;t return <i>null</i> according to the docs) so I&#39;m guessing there&#39;s a bug that&#39;s not present in this simplified version. Your error&#39;s happening on <i>line 417</i> of that class so that&#39;s a fair bit of code that&#39;s missing! Might be worth creating your own emulator for API 31 and debugging it"},{"owner":{"account_id":16537587,"reputation":486,"user_id":11949116,"display_name":"Abdo21"},"score":0,"creation_date":1659918731,"post_id":73270925,"comment_id":129402253,"body_markdown":"If this feature is not the main feature in your App, you can check for nullability instead of craching maybe like this : `if(stockCameraActivityResultLauncher != null) stockCameraActivityResultLauncher.launch() else Toast.makeText(&quot;sorry this feature is not available on your device&quot;)`","body":"If this feature is not the main feature in your App, you can check for nullability instead of craching maybe like this : <code>if(stockCameraActivityResultLauncher != null) stockCameraActivityResultLauncher.launch() else Toast.makeText(&quot;sorry this feature is not available on your device&quot;)</code>"},{"owner":{"account_id":13113788,"reputation":10080,"user_id":9473786,"display_name":"Tyler V"},"score":0,"creation_date":1659924509,"post_id":73270925,"comment_id":129402859,"body_markdown":"You can watch the video on Google of what actions it took to make it crash then try doing those same steps in an emulator to replicate it locally. The steps it takes are semi random so it may pass again later even if there is still a bug, or may fail on a totally different device and Android version","body":"You can watch the video on Google of what actions it took to make it crash then try doing those same steps in an emulator to replicate it locally. The steps it takes are semi random so it may pass again later even if there is still a bug, or may fail on a totally different device and Android version"},{"owner":{"account_id":14033656,"reputation":105,"user_id":13463349,"display_name":"Chris972"},"score":0,"creation_date":1659928082,"post_id":73270925,"comment_id":129403313,"body_markdown":"@cactustictacs I understand what you mean, but the problem is that I don&#39;t have the crash, even with avd Pixel 2 API 31. I saw that I&#39;m not the only one who get google crash signaling about this pixel 2.","body":"@cactustictacs I understand what you mean, but the problem is that I don&#39;t have the crash, even with avd Pixel 2 API 31. I saw that I&#39;m not the only one who get google crash signaling about this pixel 2."},{"owner":{"account_id":13113788,"reputation":10080,"user_id":9473786,"display_name":"Tyler V"},"score":0,"creation_date":1659929524,"post_id":73270925,"comment_id":129403485,"body_markdown":"To clarify, the videos I was referring to are from the pre-launch app tests that Google runs and which show up in your developer console for each release. There are no videos for production crashes.","body":"To clarify, the videos I was referring to are from the pre-launch app tests that Google runs and which show up in your developer console for each release. There are no videos for production crashes."},{"owner":{"account_id":14033656,"reputation":105,"user_id":13463349,"display_name":"Chris972"},"score":0,"creation_date":1659931629,"post_id":73270925,"comment_id":129403712,"body_markdown":"@Abdo21 same crash with TakePicture() and GetContent(). I&#39;m now sending a version with this workarround (test if null). Wait &amp; See.","body":"@Abdo21 same crash with TakePicture() and GetContent(). I&#39;m now sending a version with this workarround (test if null). Wait &amp; See."},{"owner":{"account_id":14033656,"reputation":105,"user_id":13463349,"display_name":"Chris972"},"score":0,"creation_date":1659989122,"post_id":73270925,"comment_id":129422260,"body_markdown":"@TylerV didn&#39;t find any video, only screenshots. May be because I&#39;m still in phase &quot;internal tests&quot;","body":"@TylerV didn&#39;t find any video, only screenshots. May be because I&#39;m still in phase &quot;internal tests&quot;"}],"answers":[{"tags":[],"owner":{"account_id":14033656,"reputation":105,"user_id":13463349,"display_name":"Chris972"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1659991129,"creation_date":1659991129,"answer_id":73283762,"question_id":73270925,"body_markdown":"No more crashes when testing the &quot;nullity&quot; of the launchers (@Abdo21 2nd answer).\r\n\r\n\t\timgButtonCam.setOnClickListener(view -&gt; {\r\n\t\t\tUri uri = FileProvider.getUriForFile(mContext, &quot;fr.novazur.donteat.provider&quot;,\r\n\t\t\t\t\tnew Product(Consts.TEMP_NUM).getIMGPathCacheFile(mContext));\r\n\t\t\tif (stockCameraActivityResultLauncher != null)\r\n\t\t\t\tstockCameraActivityResultLauncher.launch(uri);\r\n\t\t\telse\r\n\t\t\t\tToast.makeText(mContext, R.string.featureAbsent, Toast.LENGTH_LONG).show();\r\n\t\t});\r\n\t\timgButtonGal.setOnClickListener(view -&gt; {\r\n\t\t\tif (stockGalleryActivityResultLauncher != null)\r\n\t\t\t\tstockGalleryActivityResultLauncher.launch(&quot;image/*&quot;);\r\n\t\t\telse\r\n\t\t\t\tToast.makeText(mContext, R.string.featureAbsent, Toast.LENGTH_LONG).show();\r\n\t\t});\r\n\r\n\r\nThat&#39;s what I should have done from the start. I&#39;m a little sorry for not having thought of it, it&#39;s so obvious. I guess it&#39;s related to the creation of the AlertDialog which should not allow immediate access to the launchers. What I don&#39;t understand in this case is why only the Pixel 2 crashes, but problem seems to be solved for the moment. Thanks all.","title":"google tells me that my app crashes on (only) Google Pixel 2 (virtuel)","body":"<p>No more crashes when testing the &quot;nullity&quot; of the launchers (@Abdo21 2nd answer).</p>\n<pre><code>    imgButtonCam.setOnClickListener(view -&gt; {\n        Uri uri = FileProvider.getUriForFile(mContext, &quot;fr.novazur.donteat.provider&quot;,\n                new Product(Consts.TEMP_NUM).getIMGPathCacheFile(mContext));\n        if (stockCameraActivityResultLauncher != null)\n            stockCameraActivityResultLauncher.launch(uri);\n        else\n            Toast.makeText(mContext, R.string.featureAbsent, Toast.LENGTH_LONG).show();\n    });\n    imgButtonGal.setOnClickListener(view -&gt; {\n        if (stockGalleryActivityResultLauncher != null)\n            stockGalleryActivityResultLauncher.launch(&quot;image/*&quot;);\n        else\n            Toast.makeText(mContext, R.string.featureAbsent, Toast.LENGTH_LONG).show();\n    });\n</code></pre>\n<p>That's what I should have done from the start. I'm a little sorry for not having thought of it, it's so obvious. I guess it's related to the creation of the AlertDialog which should not allow immediate access to the launchers. What I don't understand in this case is why only the Pixel 2 crashes, but problem seems to be solved for the moment. Thanks all.</p>\n"}],"owner":{"account_id":14033656,"reputation":105,"user_id":13463349,"display_name":"Chris972"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":420,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73283762,"answer_count":1,"score":0,"last_activity_date":1661032066,"creation_date":1659905126,"question_id":73270925,"body_markdown":"I&#39;m trying to publish my app in google play console.\r\nBut it tells me that it crashes on Google Pixel 2 (virtuel) (works on the 9 others) with 2 errors (very similar)\r\n\r\n    Google Pixel 2 (virtuel) 1080x1920 Android 12 (SDK 31) - x86_64 en_US\r\n\r\n**Error**:\r\n\r\n    java.lang.NullPointerException: Attempt to invoke virtual method &#39;void androidx.activity.result.ActivityResultLauncher.launch(java.lang.Object)&#39; on a null object reference\r\n\r\n**Detail**:\r\n\r\n    FATAL EXCEPTION: Thread-2\r\n    Process: xxxxxxxx, PID: 8724\r\n    java.lang.NullPointerException: Attempt to invoke virtual method &#39;void androidx.activity.result.ActivityResultLauncher.launch(java.lang.Object)&#39; on a null object reference\r\n    \tat xxxxxxxx.models.StockInputDialog.lambda$init$9$xxxxxxxx-models-StockInputDialog(StockInputDialog.java:417)\r\n    \tat xxxxxxxx.models.StockInputDialog$$ExternalSyntheticLambda9.onClick(Unknown Source:2)\r\n    \tat android.view.View.performClick(View.java:7441)\r\n    \tat android.view.View.performClickInternal(View.java:7418)\r\n    \tat android.view.View.access$3700(View.java:835)\r\n    \tat android.view.View$PerformClick.run(View.java:28676)\r\n    \tat android.os.Handler.handleCallback(Handler.java:938)\r\n    \tat android.os.Handler.dispatchMessage(Handler.java:99)\r\n    \tat androidx.test.espresso.base.Interrogator.loopAndInterrogate(Interrogator.java:10)\r\n    \tat androidx.test.espresso.base.UiControllerImpl.loopUntil(UiControllerImpl.java:7)\r\n    \tat androidx.test.espresso.base.UiControllerImpl.loopUntil(UiControllerImpl.java:1)\r\n    \tat androidx.test.espresso.base.UiControllerImpl.injectMotionEvent(UiControllerImpl.java:5)\r\n    \tat androidx.test.espresso.action.MotionEvents.sendUp(MotionEvents.java:6)\r\n    \tat androidx.test.espresso.action.MotionEvents.sendUp(MotionEvents.java:1)\r\n    \tat androidx.test.espresso.action.Tap.sendSingleTap(Tap.java:5)\r\n    \tat androidx.test.espresso.action.Tap.-$$Nest$smsendSingleTap(Unknown Source:0)\r\n    \tat androidx.test.espresso.action.Tap$1.sendTap(Tap.java:1)\r\n    \tat androidx.test.espresso.action.GeneralClickAction.perform(GeneralClickAction.java:4)\r\n    \tat androidx.test.espresso.ViewInteraction$SingleExecutionViewAction.perform(ViewInteraction.java:2)\r\n    \tat androidx.test.espresso.ViewInteraction.doPerform(ViewInteraction.java:21)\r\n    \tat androidx.test.espresso.ViewInteraction.-$$Nest$mdoPerform(Unknown Source:0)\r\n    \tat androidx.test.espresso.ViewInteraction$1.call(ViewInteraction.java:6)\r\n    \tat androidx.test.espresso.ViewInteraction$1.call(ViewInteraction.java:1)\r\n    \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n    \tat android.os.Handler.handleCallback(Handler.java:938)\r\n    \tat android.os.Handler.dispatchMessage(Handler.java:99)\r\n    \tat android.os.Looper.loopOnce(Looper.java:201)\r\n    \tat android.os.Looper.loop(Looper.java:288)\r\n    \tat android.app.ActivityThread.main(ActivityThread.java:7839)\r\n    \tat java.lang.reflect.Method.invoke(Native Method)\r\n    \tat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)\r\n    \tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1003)\r\n\r\nMy code is explained (and the reason why) https://stackoverflow.com/q/73072829/13463349, and simplified to the maximum:\r\n\r\n    public class StockActivity extends AppCompatActivity implements DialogCloseListener {\r\n    \tprivate ActivityResultLauncher&lt;Intent&gt; stockGalleryActivityResultLauncher;\r\n    \tprivate ActivityResultLauncher&lt;Intent&gt; stockCameraActivityResultLauncher;\r\n    \r\n    \t@Override\r\n    \tprotected void onCreate(Bundle savedInstanceState) {\r\n    \t\tsuper.onCreate(savedInstanceState);\r\n    \t\tstockCameraActivityResultLauncher = registerForActivityResult(new ActivityResultContracts.StartActivityForResult(),\r\n    \t\t\t\tresult -&gt; {\r\n    \t\t\t\t\t// code\r\n    \t\t\t\t});\r\n    \t\tstockGalleryActivityResultLauncher = registerForActivityResult(new ActivityResultContracts.StartActivityForResult(),\r\n    \t\t\t\tresult -&gt; {\r\n    \t\t\t\t\t// code\r\n    \t\t\t\t});\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean onOptionsItemSelected(@NonNull MenuItem item) {\r\n    \t\tif (id == R.id.action_add) {\r\n    \t\t\tmStockInputDialog = new StockInputDialog(this, stockCameraActivityResultLauncher,\tstockGalleryActivityResultLauncher,);\r\n    \t\t\treturn true;\r\n    \t\t} else {\r\n    \t\t\treturn super.onOptionsItemSelected(item);\r\n    \t\t}\r\n    \t}\r\n    }\r\n    \r\n    public class StockInputDialog {\r\n    \tprivate final Context mContext;\r\n    \tprivate AlertDialog mInputDialog;\r\n    \tprivate ActivityResultLauncher&lt;Intent&gt; stockCameraActivityResultLauncher;\r\n    \tprivate ActivityResultLauncher&lt;Intent&gt; stockGalleryActivityResultLauncher;\r\n    \r\n    \tpublic StockInputDialog(Context context, ActivityResultLauncher&lt;Intent&gt; pStockCameraActivityResultLaunchera, ActivityResultLauncher&lt;Intent&gt; pStockGalleryActivityResultLauncher) {\r\n    \t\tmContext = context;\r\n    \t\tstockCameraActivityResultLauncher = pStockCameraActivityResultLaunchera;\r\n    \t\tstockGalleryActivityResultLauncher = pStockGalleryActivityResultLauncher;\r\n    \t\tLayoutInflater li = LayoutInflater.from(this.mContext);\r\n    \t\tmPromptsView = li.inflate(R.layout.text_input_stock, null);\r\n    \t\tfinal AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(this.mContext);\r\n    \t\talertDialogBuilder.setView(mPromptsView);\r\n    \r\n    \t\tfinal ImageButton imgButtonCam = mPromptsView.findViewById(R.id.addCam);\r\n    \t\tfinal ImageButton imgButtonGal = mPromptsView.findViewById(R.id.addGal);\r\n    \r\n    \t\timgButtonCam.setOnClickListener(view -&gt; {\r\n    \t\t\tUri uri = FileProvider.getUriForFile(mContext, &quot;fr.foo.bar.provider&quot;,\r\n    \t\t\t\t\tnew Product(Consts.TEMP_NUM).getIMGPathCacheFile(mContext));\r\n    \t\t\tIntent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\r\n    \t\t\tintent.putExtra(MediaStore.EXTRA_OUTPUT, uri);\r\n    \t\t\tstockCameraActivityResultLauncher.launch(intent); &lt;= ERROR\r\n    \t\t});\r\n    \r\n    \t\timgButtonGal.setOnClickListener(view -&gt; {\r\n    \t\t\tstockGalleryActivityResultLauncher.launch(new Intent(Intent.ACTION_PICK, MediaStore.Images.Media.EXTERNAL_CONTENT_URI)) &lt;= ERROR\r\n    \t\t});\r\n    \t}\r\n    }\r\n\r\nThe 2 errors correspond to the 2 `launch()`\r\n\r\nWhat I don&#39;t understand is that I&#39;m using this same principle elsewhere in the application without an error being raised.","title":"google tells me that my app crashes on (only) Google Pixel 2 (virtuel)","body":"<p>I'm trying to publish my app in google play console.\nBut it tells me that it crashes on Google Pixel 2 (virtuel) (works on the 9 others) with 2 errors (very similar)</p>\n<pre><code>Google Pixel 2 (virtuel) 1080x1920 Android 12 (SDK 31) - x86_64 en_US\n</code></pre>\n<p><strong>Error</strong>:</p>\n<pre><code>java.lang.NullPointerException: Attempt to invoke virtual method 'void androidx.activity.result.ActivityResultLauncher.launch(java.lang.Object)' on a null object reference\n</code></pre>\n<p><strong>Detail</strong>:</p>\n<pre><code>FATAL EXCEPTION: Thread-2\nProcess: xxxxxxxx, PID: 8724\njava.lang.NullPointerException: Attempt to invoke virtual method 'void androidx.activity.result.ActivityResultLauncher.launch(java.lang.Object)' on a null object reference\n    at xxxxxxxx.models.StockInputDialog.lambda$init$9$xxxxxxxx-models-StockInputDialog(StockInputDialog.java:417)\n    at xxxxxxxx.models.StockInputDialog$$ExternalSyntheticLambda9.onClick(Unknown Source:2)\n    at android.view.View.performClick(View.java:7441)\n    at android.view.View.performClickInternal(View.java:7418)\n    at android.view.View.access$3700(View.java:835)\n    at android.view.View$PerformClick.run(View.java:28676)\n    at android.os.Handler.handleCallback(Handler.java:938)\n    at android.os.Handler.dispatchMessage(Handler.java:99)\n    at androidx.test.espresso.base.Interrogator.loopAndInterrogate(Interrogator.java:10)\n    at androidx.test.espresso.base.UiControllerImpl.loopUntil(UiControllerImpl.java:7)\n    at androidx.test.espresso.base.UiControllerImpl.loopUntil(UiControllerImpl.java:1)\n    at androidx.test.espresso.base.UiControllerImpl.injectMotionEvent(UiControllerImpl.java:5)\n    at androidx.test.espresso.action.MotionEvents.sendUp(MotionEvents.java:6)\n    at androidx.test.espresso.action.MotionEvents.sendUp(MotionEvents.java:1)\n    at androidx.test.espresso.action.Tap.sendSingleTap(Tap.java:5)\n    at androidx.test.espresso.action.Tap.-$$Nest$smsendSingleTap(Unknown Source:0)\n    at androidx.test.espresso.action.Tap$1.sendTap(Tap.java:1)\n    at androidx.test.espresso.action.GeneralClickAction.perform(GeneralClickAction.java:4)\n    at androidx.test.espresso.ViewInteraction$SingleExecutionViewAction.perform(ViewInteraction.java:2)\n    at androidx.test.espresso.ViewInteraction.doPerform(ViewInteraction.java:21)\n    at androidx.test.espresso.ViewInteraction.-$$Nest$mdoPerform(Unknown Source:0)\n    at androidx.test.espresso.ViewInteraction$1.call(ViewInteraction.java:6)\n    at androidx.test.espresso.ViewInteraction$1.call(ViewInteraction.java:1)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at android.os.Handler.handleCallback(Handler.java:938)\n    at android.os.Handler.dispatchMessage(Handler.java:99)\n    at android.os.Looper.loopOnce(Looper.java:201)\n    at android.os.Looper.loop(Looper.java:288)\n    at android.app.ActivityThread.main(ActivityThread.java:7839)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1003)\n</code></pre>\n<p>My code is explained (and the reason why) <a href=\"https://stackoverflow.com/q/73072829/13463349\">startActivityForResult migration, call registerForActivityResult outside activity</a>, and simplified to the maximum:</p>\n<pre><code>public class StockActivity extends AppCompatActivity implements DialogCloseListener {\n    private ActivityResultLauncher&lt;Intent&gt; stockGalleryActivityResultLauncher;\n    private ActivityResultLauncher&lt;Intent&gt; stockCameraActivityResultLauncher;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        stockCameraActivityResultLauncher = registerForActivityResult(new ActivityResultContracts.StartActivityForResult(),\n                result -&gt; {\n                    // code\n                });\n        stockGalleryActivityResultLauncher = registerForActivityResult(new ActivityResultContracts.StartActivityForResult(),\n                result -&gt; {\n                    // code\n                });\n    }\n\n    @Override\n    public boolean onOptionsItemSelected(@NonNull MenuItem item) {\n        if (id == R.id.action_add) {\n            mStockInputDialog = new StockInputDialog(this, stockCameraActivityResultLauncher,   stockGalleryActivityResultLauncher,);\n            return true;\n        } else {\n            return super.onOptionsItemSelected(item);\n        }\n    }\n}\n\npublic class StockInputDialog {\n    private final Context mContext;\n    private AlertDialog mInputDialog;\n    private ActivityResultLauncher&lt;Intent&gt; stockCameraActivityResultLauncher;\n    private ActivityResultLauncher&lt;Intent&gt; stockGalleryActivityResultLauncher;\n\n    public StockInputDialog(Context context, ActivityResultLauncher&lt;Intent&gt; pStockCameraActivityResultLaunchera, ActivityResultLauncher&lt;Intent&gt; pStockGalleryActivityResultLauncher) {\n        mContext = context;\n        stockCameraActivityResultLauncher = pStockCameraActivityResultLaunchera;\n        stockGalleryActivityResultLauncher = pStockGalleryActivityResultLauncher;\n        LayoutInflater li = LayoutInflater.from(this.mContext);\n        mPromptsView = li.inflate(R.layout.text_input_stock, null);\n        final AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(this.mContext);\n        alertDialogBuilder.setView(mPromptsView);\n\n        final ImageButton imgButtonCam = mPromptsView.findViewById(R.id.addCam);\n        final ImageButton imgButtonGal = mPromptsView.findViewById(R.id.addGal);\n\n        imgButtonCam.setOnClickListener(view -&gt; {\n            Uri uri = FileProvider.getUriForFile(mContext, &quot;fr.foo.bar.provider&quot;,\n                    new Product(Consts.TEMP_NUM).getIMGPathCacheFile(mContext));\n            Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\n            intent.putExtra(MediaStore.EXTRA_OUTPUT, uri);\n            stockCameraActivityResultLauncher.launch(intent); &lt;= ERROR\n        });\n\n        imgButtonGal.setOnClickListener(view -&gt; {\n            stockGalleryActivityResultLauncher.launch(new Intent(Intent.ACTION_PICK, MediaStore.Images.Media.EXTERNAL_CONTENT_URI)) &lt;= ERROR\n        });\n    }\n}\n</code></pre>\n<p>The 2 errors correspond to the 2 <code>launch()</code></p>\n<p>What I don't understand is that I'm using this same principle elsewhere in the application without an error being raised.</p>\n"},{"tags":["java","chromium-embedded","netbeans-platform"],"comments":[{"owner":{"account_id":1822557,"reputation":3265,"user_id":1656244,"display_name":"Krishnakant Kadam"},"score":0,"creation_date":1639994782,"post_id":68801485,"comment_id":124481176,"body_markdown":"I am also facing this problem, have you found the solution?","body":"I am also facing this problem, have you found the solution?"},{"owner":{"account_id":17436819,"reputation":97,"user_id":12639646,"display_name":"Daki"},"score":0,"creation_date":1640084653,"post_id":68801485,"comment_id":124506294,"body_markdown":"Sadly no, not yet. I didn&#39;t have much more time to look for it though.  If I ever find a solution, I will post it here.","body":"Sadly no, not yet. I didn&#39;t have much more time to look for it though.  If I ever find a solution, I will post it here."}],"answers":[{"tags":[],"owner":{"account_id":3132103,"reputation":3987,"user_id":2649570,"accept_rate":83,"display_name":"ced-b"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661031485,"creation_date":1661031485,"answer_id":73430303,"question_id":68801485,"body_markdown":"I ran into a similar issue and found that when you are adding it to a `JPanel` you have to set the size of the client.\r\n\r\n```java\r\nclient_.setSize(800, 600)\r\n```\r\n\r\nOnce I did that it showed for me.","title":"Adding JCEF Browser in jPanel within Netbeans Platform Application","body":"<p>I ran into a similar issue and found that when you are adding it to a <code>JPanel</code> you have to set the size of the client.</p>\n<pre class=\"lang-java prettyprint-override\"><code>client_.setSize(800, 600)\n</code></pre>\n<p>Once I did that it showed for me.</p>\n"}],"owner":{"account_id":17436819,"reputation":97,"user_id":12639646,"display_name":"Daki"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":441,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1661031485,"creation_date":1629110718,"question_id":68801485,"body_markdown":"I&#39;m working on a Netbeans Platform application running on Java 11 in which I&#39;d like to use the chromium browser from the JCEF project. (&lt;code&gt;org.jcef&lt;/code&gt;)\r\n\r\nI&#39;ve already implemented the browser within an &lt;code&gt;org.openide.windows.TopComponent&lt;/code&gt; and that works just fine by implementing it in the constructor like so:\r\n```\r\npublic BrowserTopComponent() {\r\n        initComponents();\r\n\r\n        CefSettings settings = new CefSettings();\r\n        settings.windowless_rendering_enabled = false;\r\n\r\n        File jcef_helper = InstalledFileLocator.getDefault().locate(\r\n                &quot;modules/lib/jcef_helper.exe&quot;,\r\n                &quot;com.mycompany.nbm.browser&quot;,\r\n                false);\r\n        settings.browser_subprocess_path = jcef_helper.getAbsolutePath();\r\n        modules_path = jcef_helper.getAbsolutePath().split(&quot;modules&quot;)[0] + &quot;modules&quot;;\r\n\r\n        cefApp_ = CefApp.getInstance(settings);\r\n\r\n        client_ = cefApp_.createClient();\r\n\r\n        browser_ = client_.createBrowser(HOME, false, false);\r\n        browerUI_ = browser_.getUIComponent();\r\n\r\n        add(browerUI_, BorderLayout.CENTER);\r\n    }\r\n```\r\n\r\nNow I&#39;d like to include the browser in another &lt;code&gt;TopComponent&lt;/code&gt; but not in its entire area, but instead within just one &lt;code&gt;jPanel&lt;/code&gt;.\r\n\r\nTheoretically that should be possible by exchanging &lt;code&gt;add(browerUI_, BorderLayout.CENTER);&lt;/code&gt; from the previous code with:\r\n```\r\njPanelBrowser.add(browerUI_, BorderLayout.CENTER);\r\njPanelBrowser.validate();\r\n```\r\n\r\nThat however did not work at all. It doesn&#39;t throw any errors, it just doesn&#39;t do anything.\r\n\r\nIf anyone has any experience in making jcef work in such a scenario, any help would be greatly appreciated!","title":"Adding JCEF Browser in jPanel within Netbeans Platform Application","body":"<p>I'm working on a Netbeans Platform application running on Java 11 in which I'd like to use the chromium browser from the JCEF project. (<code>org.jcef</code>)</p>\n<p>I've already implemented the browser within an <code>org.openide.windows.TopComponent</code> and that works just fine by implementing it in the constructor like so:</p>\n<pre><code>public BrowserTopComponent() {\n        initComponents();\n\n        CefSettings settings = new CefSettings();\n        settings.windowless_rendering_enabled = false;\n\n        File jcef_helper = InstalledFileLocator.getDefault().locate(\n                &quot;modules/lib/jcef_helper.exe&quot;,\n                &quot;com.mycompany.nbm.browser&quot;,\n                false);\n        settings.browser_subprocess_path = jcef_helper.getAbsolutePath();\n        modules_path = jcef_helper.getAbsolutePath().split(&quot;modules&quot;)[0] + &quot;modules&quot;;\n\n        cefApp_ = CefApp.getInstance(settings);\n\n        client_ = cefApp_.createClient();\n\n        browser_ = client_.createBrowser(HOME, false, false);\n        browerUI_ = browser_.getUIComponent();\n\n        add(browerUI_, BorderLayout.CENTER);\n    }\n</code></pre>\n<p>Now I'd like to include the browser in another <code>TopComponent</code> but not in its entire area, but instead within just one <code>jPanel</code>.</p>\n<p>Theoretically that should be possible by exchanging <code>add(browerUI_, BorderLayout.CENTER);</code> from the previous code with:</p>\n<pre><code>jPanelBrowser.add(browerUI_, BorderLayout.CENTER);\njPanelBrowser.validate();\n</code></pre>\n<p>That however did not work at all. It doesn't throw any errors, it just doesn't do anything.</p>\n<p>If anyone has any experience in making jcef work in such a scenario, any help would be greatly appreciated!</p>\n"},{"tags":["java","minecraft","minecraft-fabric"],"answers":[{"tags":[],"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1631546754,"creation_date":1631546754,"answer_id":69165336,"question_id":69163761,"body_markdown":"Such as the error said `Unknown or incomplete command, see below for error at position 0`: The issue is on the first char of your config.\r\n\r\nIt&#39;s because you&#39;re telling &quot;I want to run a command&quot;, so you don&#39;t have to use the `/`.\r\n\r\nAlso, such as you can config it (even if everyone keep /), it can create issue. That&#39;s why you don&#39;t have to enter it here ...","title":"Why this code can&#39;t execute command in Minecraft?","body":"<p>Such as the error said <code>Unknown or incomplete command, see below for error at position 0</code>: The issue is on the first char of your config.</p>\n<p>It's because you're telling &quot;I want to run a command&quot;, so you don't have to use the <code>/</code>.</p>\n<p>Also, such as you can config it (even if everyone keep /), it can create issue. That's why you don't have to enter it here ...</p>\n"},{"tags":[],"owner":{"account_id":22627774,"reputation":1,"user_id":16805629,"display_name":"IAFEnvoy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651889286,"creation_date":1651889286,"answer_id":72148943,"question_id":69163761,"body_markdown":"Ok i finally know how to send command correctly.\r\n```Java\r\n//&quot;source&quot; is ServerCommandSource\r\nString command=&quot;time set 0&quot;;\r\nsource.getMinecraftServer().getCommandManager().execute(source.getMinecraftServer().getCommandSource(),command);\r\n//Execute command with server permission level\r\n```\r\nOr use this to get Minecraft Server Instance, then execute command\r\n```Java\r\n// @Mixin(MinecraftServer.class)\r\npublic MinecraftServer getServer(){\r\n  return (MinecraftServer) (Object) this;\r\n}\r\n```","title":"Why this code can&#39;t execute command in Minecraft?","body":"<p>Ok i finally know how to send command correctly.</p>\n<pre><code>//&quot;source&quot; is ServerCommandSource\nString command=&quot;time set 0&quot;;\nsource.getMinecraftServer().getCommandManager().execute(source.getMinecraftServer().getCommandSource(),command);\n//Execute command with server permission level\n</code></pre>\n<p>Or use this to get Minecraft Server Instance, then execute command</p>\n<pre><code>// @Mixin(MinecraftServer.class)\npublic MinecraftServer getServer(){\n  return (MinecraftServer) (Object) this;\n}\n</code></pre>\n"}],"owner":{"account_id":22627774,"reputation":1,"user_id":16805629,"display_name":"IAFEnvoy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":914,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1661031272,"creation_date":1631540577,"question_id":69163761,"body_markdown":"Environment: Minecraft 1.16.5, Fabric 0.11.6\r\n\r\nI write these code to try to execute command in Minecraft.\r\n\r\n```\r\n@Override\r\npublic void inventoryTick(ItemStack stack, World world, Entity entity, int slot, boolean selected) {\r\n\tif (entity instanceof final PlayerEntity player) {\r\n\t\tif (player.getEquippedStack(EquipmentSlot.CHEST) == stack) {\r\n\t\t\tCommandDispatcher&lt;PlayerEntity&gt; cDispatcher = new CommandDispatcher&lt;PlayerEntity&gt;();\r\n\t\t\tfinal String command = &quot;/time set 0&quot;;\r\n\t\t\ttry {\r\n\t\t\t\tcDispatcher.execute(command, player);\r\n\t\t\t} catch (CommandSyntaxException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n```\r\nBut Minecraft throw these errors:\r\n```\r\n[main/INFO] (Minecraft) [STDERR]: com.mojang.brigadier.exceptions.CommandSyntaxException: Unknown or incomplete command, see below for error at position 0: &lt;--[HERE]\r\n[Server thread/INFO] (Minecraft) [STDERR]: com.mojang.brigadier.exceptions.CommandSyntaxException: Unknown or incomplete command, see below for error at position 0: &lt;--[HERE]\r\n```\r\nI have try a lot of commands but it only give these same errors. So how to execute commands in game?\r\n","title":"Why this code can&#39;t execute command in Minecraft?","body":"<p>Environment: Minecraft 1.16.5, Fabric 0.11.6</p>\n<p>I write these code to try to execute command in Minecraft.</p>\n<pre><code>@Override\npublic void inventoryTick(ItemStack stack, World world, Entity entity, int slot, boolean selected) {\n    if (entity instanceof final PlayerEntity player) {\n        if (player.getEquippedStack(EquipmentSlot.CHEST) == stack) {\n            CommandDispatcher&lt;PlayerEntity&gt; cDispatcher = new CommandDispatcher&lt;PlayerEntity&gt;();\n            final String command = &quot;/time set 0&quot;;\n            try {\n                cDispatcher.execute(command, player);\n            } catch (CommandSyntaxException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n}\n</code></pre>\n<p>But Minecraft throw these errors:</p>\n<pre><code>[main/INFO] (Minecraft) [STDERR]: com.mojang.brigadier.exceptions.CommandSyntaxException: Unknown or incomplete command, see below for error at position 0: &lt;--[HERE]\n[Server thread/INFO] (Minecraft) [STDERR]: com.mojang.brigadier.exceptions.CommandSyntaxException: Unknown or incomplete command, see below for error at position 0: &lt;--[HERE]\n</code></pre>\n<p>I have try a lot of commands but it only give these same errors. So how to execute commands in game?</p>\n"},{"tags":["java","spring","spring-boot","ehcache","ehcache-3"],"comments":[{"owner":{"account_id":19974820,"reputation":11,"user_id":14639407,"display_name":"Alae Annassi"},"score":0,"creation_date":1644849490,"post_id":71104689,"comment_id":125707631,"body_markdown":"pleaaaaaaaaaaaaaaaaaaaaaaaaaaaaase help","body":"pleaaaaaaaaaaaaaaaaaaaaaaaaaaaaase help"}],"answers":[{"tags":[],"owner":{"account_id":14446626,"reputation":2578,"user_id":10435528,"display_name":"devatherock"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661030288,"creation_date":1661030288,"answer_id":73430210,"question_id":71104689,"body_markdown":"I think I faced this before when at least one of my tests had the `@DirtiesContext` annotation which re-initializes the Spring context. I got around it by making a call to the `cacheManager.destroyCache` method before attempting to create the cache. Can you try adding the statement `cacheManager.destroyCache(&quot;currenciesCache&quot;);` before the `cacheManager.createCache` statement? Alternatively, you could try initializing the cache manager without the explicit call to the `createCache` method like it has been done in [this Stack Overflow answer](https://stackoverflow.com/questions/53929804/converting-ehcache-cachemanager-v-3-x-to-spring-cachemanager-without-xml-confi) ","title":"Ehcache 3 spring boot not working in integration test","body":"<p>I think I faced this before when at least one of my tests had the <code>@DirtiesContext</code> annotation which re-initializes the Spring context. I got around it by making a call to the <code>cacheManager.destroyCache</code> method before attempting to create the cache. Can you try adding the statement <code>cacheManager.destroyCache(&quot;currenciesCache&quot;);</code> before the <code>cacheManager.createCache</code> statement? Alternatively, you could try initializing the cache manager without the explicit call to the <code>createCache</code> method like it has been done in <a href=\"https://stackoverflow.com/questions/53929804/converting-ehcache-cachemanager-v-3-x-to-spring-cachemanager-without-xml-confi\">this Stack Overflow answer</a></p>\n"}],"owner":{"account_id":19974820,"reputation":11,"user_id":14639407,"display_name":"Alae Annassi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":880,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1661030288,"creation_date":1644784971,"question_id":71104689,"body_markdown":"I need your help please. I integrated Ehcache 3 with springboot 2. everything works perfectly in production. integration tests also work if i execute them manualy ( I&#39;m using Intellij IDE ). \r\nbut when i run &quot;mvn install&quot;, i get this error : \r\n\r\n&gt; java.lang.IllegalStateException: Failed to load ApplicationContext\r\n&gt; Caused by: org.springframework.beans.factory.BeanCreationException:\r\n&gt; Error creating bean with name &#39;ehCacheManager&#39; defined in class path\r\n&gt; resource [com/afklm/belem/payment/config/EhCacheConfiguration.class]:\r\n&gt; Bean instantiation via factory method failed; nested exception is\r\n&gt; org.springframework.beans.BeanInstantiationException: Failed to\r\n&gt; instantiate [org.springframework.cache.CacheManager]: Factory method\r\n&gt; &#39;ehCacheManager&#39; threw exception; nested exception is\r\n&gt; javax.cache.CacheException: A Cache named [currenciesCache] already\r\n&gt; exists\r\n\r\n  \r\n\r\n  **CurrencyRepository  interface** :\r\n\r\n\r\n    @Repository\r\n    public interface CurrencyRepository extends JpaRepository&lt;Currency, String&gt; {\r\n        /**\r\n         * Gets currencies from Cache.\r\n         * The real call to the DataBase will be performed if the response is not in cache\r\n         *\r\n         * @return list of {@link Currency}\r\n         */\r\n        @Cacheable(cacheNames = &quot;currenciesCache&quot;, key =&quot;#root.methodName&quot;, unless = &quot;#result==null or #result.size()==0&quot;)\r\n        default List&lt;Currency&gt; getCachedCurrencies() {\r\n            return findAll();\r\n        }\r\n\r\n\r\n**Cache configuration class**\r\n\r\n\r\n    import org.ehcache.config.CacheConfiguration;\r\n    import org.ehcache.config.builders.CacheConfigurationBuilder;\r\n    import org.ehcache.config.builders.ExpiryPolicyBuilder;\r\n    import org.ehcache.config.builders.ResourcePoolsBuilder;\r\n    import org.ehcache.jsr107.Eh107Configuration;\r\n    \r\n    import org.springframework.cache.annotation.CachingConfigurerSupport;\r\n    import org.springframework.cache.annotation.EnableCaching;\r\n    import org.springframework.cache.jcache.JCacheCacheManager;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    \r\n    import org.springframework.cache.CacheManager;\r\n    \r\n    import javax.cache.Caching;\r\n    import java.time.Duration;\r\n    import java.util.List;\r\n    \r\n    \r\n    @EnableCaching\r\n    @Configuration\r\n    public class EhCacheConfiguration extends CachingConfigurerSupport {\r\n    \r\n        @Bean\r\n        public CacheManager ehCacheManager() {\r\n    \r\n            //-&gt; currencies cache configuration\r\n            CacheConfiguration&lt;String, List&gt; currenciesCacheConfig =\r\n                    CacheConfigurationBuilder\r\n                            .newCacheConfigurationBuilder(String.class, List.class, ResourcePoolsBuilder.heap(1000))\r\n                            .withExpiry(ExpiryPolicyBuilder.timeToLiveExpiration(Duration.ofDays(30)))\r\n                            .withDefaultEventListenersThreadPool()\r\n                            .build();\r\n    \r\n            javax.cache.CacheManager cacheManager = Caching.getCachingProvider().getCacheManager();\r\n    \r\n            cacheManager.createCache(&quot;currenciesCache&quot;, Eh107Configuration.fromEhcacheCacheConfiguration(currenciesCacheConfig));\r\n    \r\n      \r\n    \r\n            return  new JCacheCacheManager(cacheManager);\r\n        }\r\n\r\nThanks for your help; i&#39;m stuck","title":"Ehcache 3 spring boot not working in integration test","body":"<p>I need your help please. I integrated Ehcache 3 with springboot 2. everything works perfectly in production. integration tests also work if i execute them manualy ( I'm using Intellij IDE ).\nbut when i run &quot;mvn install&quot;, i get this error :</p>\n<blockquote>\n<p>java.lang.IllegalStateException: Failed to load ApplicationContext\nCaused by: org.springframework.beans.factory.BeanCreationException:\nError creating bean with name 'ehCacheManager' defined in class path\nresource [com/afklm/belem/payment/config/EhCacheConfiguration.class]:\nBean instantiation via factory method failed; nested exception is\norg.springframework.beans.BeanInstantiationException: Failed to\ninstantiate [org.springframework.cache.CacheManager]: Factory method\n'ehCacheManager' threw exception; nested exception is\njavax.cache.CacheException: A Cache named [currenciesCache] already\nexists</p>\n</blockquote>\n<p><strong>CurrencyRepository  interface</strong> :</p>\n<pre><code>@Repository\npublic interface CurrencyRepository extends JpaRepository&lt;Currency, String&gt; {\n    /**\n     * Gets currencies from Cache.\n     * The real call to the DataBase will be performed if the response is not in cache\n     *\n     * @return list of {@link Currency}\n     */\n    @Cacheable(cacheNames = &quot;currenciesCache&quot;, key =&quot;#root.methodName&quot;, unless = &quot;#result==null or #result.size()==0&quot;)\n    default List&lt;Currency&gt; getCachedCurrencies() {\n        return findAll();\n    }\n</code></pre>\n<p><strong>Cache configuration class</strong></p>\n<pre><code>import org.ehcache.config.CacheConfiguration;\nimport org.ehcache.config.builders.CacheConfigurationBuilder;\nimport org.ehcache.config.builders.ExpiryPolicyBuilder;\nimport org.ehcache.config.builders.ResourcePoolsBuilder;\nimport org.ehcache.jsr107.Eh107Configuration;\n\nimport org.springframework.cache.annotation.CachingConfigurerSupport;\nimport org.springframework.cache.annotation.EnableCaching;\nimport org.springframework.cache.jcache.JCacheCacheManager;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\nimport org.springframework.cache.CacheManager;\n\nimport javax.cache.Caching;\nimport java.time.Duration;\nimport java.util.List;\n\n\n@EnableCaching\n@Configuration\npublic class EhCacheConfiguration extends CachingConfigurerSupport {\n\n    @Bean\n    public CacheManager ehCacheManager() {\n\n        //-&gt; currencies cache configuration\n        CacheConfiguration&lt;String, List&gt; currenciesCacheConfig =\n                CacheConfigurationBuilder\n                        .newCacheConfigurationBuilder(String.class, List.class, ResourcePoolsBuilder.heap(1000))\n                        .withExpiry(ExpiryPolicyBuilder.timeToLiveExpiration(Duration.ofDays(30)))\n                        .withDefaultEventListenersThreadPool()\n                        .build();\n\n        javax.cache.CacheManager cacheManager = Caching.getCachingProvider().getCacheManager();\n\n        cacheManager.createCache(&quot;currenciesCache&quot;, Eh107Configuration.fromEhcacheCacheConfiguration(currenciesCacheConfig));\n\n  \n\n        return  new JCacheCacheManager(cacheManager);\n    }\n</code></pre>\n<p>Thanks for your help; i'm stuck</p>\n"},{"tags":["java","hashmap","maps","predicate","apache-commons-collection"],"comments":[{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":1,"creation_date":1661023714,"post_id":73429531,"comment_id":129674174,"body_markdown":"Looking at the docs of `PredicatedMap`, it doesn&#39;t look like it&#39;s built to do what you&#39;re trying to do with it.  It&#39;s not _supposed_ to get you submaps, it&#39;s supposed to build maps that apply constraints to new data.","body":"Looking at the docs of <code>PredicatedMap</code>, it doesn&#39;t look like it&#39;s built to do what you&#39;re trying to do with it.  It&#39;s not <i>supposed</i> to get you submaps, it&#39;s supposed to build maps that apply constraints to new data."}],"answers":[{"tags":[],"owner":{"account_id":16366460,"reputation":131,"user_id":11820819,"display_name":"Dorin Simion"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661029769,"creation_date":1661029769,"answer_id":73430170,"question_id":73429531,"body_markdown":"It doesn&#39;t seems PredicatedMap do what you want to achive. It looks more like a validator when adding new values to map.\r\n\r\nIf you want to extract some values from a map base on predicate, Stream API from JDK should be enough.\r\n\r\nIf doesn&#39;t bother you to modify initial list:\r\n\r\n     myMap.entrySet().removeIf( e -&gt; !(e.getValue().equals(&quot;1&quot;) || e.getValue().equals(&quot;2&quot;)));\r\n\r\nIf you want to keep initial list and create a new one:\r\n\r\n    Map&lt;String, String&gt; collect = myMap.entrySet().stream().filter(x -&gt; x.getValue().equals(&quot;1&quot;) || x.getValue().equals(&quot;2&quot;))\r\n                    .collect(Collectors.toMap(e -&gt; e.getKey(),e -&gt; e.getValue()));\r\n\r\nIf you have a bigger list of value that you want to keep, you can create a set of them:\r\n\r\n    Set&lt;String&gt;  values = Set.of(&quot;1&quot;,&quot;2&quot;);\r\n\r\nand filter base on this set:\r\n\r\n    collect = myMap.entrySet().stream().filter(x -&gt; values.contains(x.getValue()))\r\n                    .collect(Collectors.toMap(e -&gt; e.getKey(),e -&gt; e.getValue()));\r\n\r\nOr for the case with modifying initial list:\r\n\r\n    myMap.entrySet().removeIf( e -&gt; !values.contains(e.getValue()));\r\n\r\nLooks a bit clear if you extract values to keep as a set in my opinion.\r\n\r\n\r\n","title":"Get Submap from Map using PredicateMap","body":"<p>It doesn't seems PredicatedMap do what you want to achive. It looks more like a validator when adding new values to map.</p>\n<p>If you want to extract some values from a map base on predicate, Stream API from JDK should be enough.</p>\n<p>If doesn't bother you to modify initial list:</p>\n<pre><code> myMap.entrySet().removeIf( e -&gt; !(e.getValue().equals(&quot;1&quot;) || e.getValue().equals(&quot;2&quot;)));\n</code></pre>\n<p>If you want to keep initial list and create a new one:</p>\n<pre><code>Map&lt;String, String&gt; collect = myMap.entrySet().stream().filter(x -&gt; x.getValue().equals(&quot;1&quot;) || x.getValue().equals(&quot;2&quot;))\n                .collect(Collectors.toMap(e -&gt; e.getKey(),e -&gt; e.getValue()));\n</code></pre>\n<p>If you have a bigger list of value that you want to keep, you can create a set of them:</p>\n<pre><code>Set&lt;String&gt;  values = Set.of(&quot;1&quot;,&quot;2&quot;);\n</code></pre>\n<p>and filter base on this set:</p>\n<pre><code>collect = myMap.entrySet().stream().filter(x -&gt; values.contains(x.getValue()))\n                .collect(Collectors.toMap(e -&gt; e.getKey(),e -&gt; e.getValue()));\n</code></pre>\n<p>Or for the case with modifying initial list:</p>\n<pre><code>myMap.entrySet().removeIf( e -&gt; !values.contains(e.getValue()));\n</code></pre>\n<p>Looks a bit clear if you extract values to keep as a set in my opinion.</p>\n"}],"owner":{"account_id":21976362,"reputation":19,"user_id":16252121,"display_name":"Rahul Maurya"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":138,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1661029769,"creation_date":1661023365,"question_id":73429531,"body_markdown":"I wanted to get a submap from predicateMap:\r\n\r\nI have tried this:\r\n\r\npublic class first {\r\n\r\n\tpublic static void main(String[] args)\r\n\t{\r\n\t\tTreeMap&lt;String, String&gt; myMap = new TreeMap&lt;String, String&gt;();\r\n\t\tPredicate onlyStrings = new InstanceofPredicate( String.class );\r\n\t\tmyMap.put(&quot;Key1&quot;,&quot;1&quot;);\r\n\t\tmyMap.put(&quot;Key2&quot;,&quot;2&quot;);\r\n\t\tmyMap.put(&quot;Key3&quot;,&quot;3&quot;);\r\n\t\t\r\n\t\tSystem.out.println(&quot;Before using submap: &quot;+ myMap );\r\n\t\t\r\n\t\tPredicate pred1 = new EqualPredicate( &quot;1&quot; );\r\n\t\tPredicate pred2 = new EqualPredicate( &quot;2&quot; );\r\n\t\t\r\n\t\tPredicate rule = new OrPredicate( pred1, pred2 );\r\n\t\t\r\n        Map map = PredicatedMap.decorate( myMap, onlyStrings, rule ); \r\n        \r\n\r\n\t\tSystem.out.println(&quot;Before using submap: &quot;+ map );\r\n\t\t    \r\n\t}\r\n\r\n\r\nI am not able to get the desired submap which is the following:\r\n\r\n&gt; Initial Map: {key1=1, key2=2, key3=3}\r\n&gt; \r\n&gt; Output (submap): {key2=2, key3=3} \r\n\r\nCan someone please help with this\r\n\r\n","title":"Get Submap from Map using PredicateMap","body":"<p>I wanted to get a submap from predicateMap:</p>\n<p>I have tried this:</p>\n<p>public class first {</p>\n<pre><code>public static void main(String[] args)\n{\n    TreeMap&lt;String, String&gt; myMap = new TreeMap&lt;String, String&gt;();\n    Predicate onlyStrings = new InstanceofPredicate( String.class );\n    myMap.put(&quot;Key1&quot;,&quot;1&quot;);\n    myMap.put(&quot;Key2&quot;,&quot;2&quot;);\n    myMap.put(&quot;Key3&quot;,&quot;3&quot;);\n    \n    System.out.println(&quot;Before using submap: &quot;+ myMap );\n    \n    Predicate pred1 = new EqualPredicate( &quot;1&quot; );\n    Predicate pred2 = new EqualPredicate( &quot;2&quot; );\n    \n    Predicate rule = new OrPredicate( pred1, pred2 );\n    \n    Map map = PredicatedMap.decorate( myMap, onlyStrings, rule ); \n    \n\n    System.out.println(&quot;Before using submap: &quot;+ map );\n        \n}\n</code></pre>\n<p>I am not able to get the desired submap which is the following:</p>\n<blockquote>\n<p>Initial Map: {key1=1, key2=2, key3=3}</p>\n<p>Output (submap): {key2=2, key3=3}</p>\n</blockquote>\n<p>Can someone please help with this</p>\n"},{"tags":["java","html","spring"],"answers":[{"tags":[],"owner":{"account_id":13507739,"reputation":21,"user_id":9745169,"display_name":"Muluadam Temesgen"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1661028521,"creation_date":1661028521,"answer_id":73430063,"question_id":73424809,"body_markdown":"I guess this is is happening because of @OneToMany relationship between countries and state. If you share your &quot;State&quot; Model I can tell you what to change. \r\nHowever, this error usually happens when countries are loaded with state and  state also has country in it. This creates endless JSON Tree.  Check this Link \r\nhttps://stackoverflow.com/questions/59912934/springboot-hibernate-one-to-many-infinty-recursion","title":"Cannot render error page for request [/countries] as the response has already been committed. As a result, the response may have the wrong status code","body":"<p>I guess this is is happening because of @OneToMany relationship between countries and state. If you share your &quot;State&quot; Model I can tell you what to change.\nHowever, this error usually happens when countries are loaded with state and  state also has country in it. This creates endless JSON Tree.  Check this Link\n<a href=\"https://stackoverflow.com/questions/59912934/springboot-hibernate-one-to-many-infinty-recursion\">Springboot Hibernate One to Many infinty recursion</a></p>\n"}],"owner":{"account_id":26112913,"reputation":21,"user_id":19806496,"display_name":"Tefera Tilaye"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2778,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1661028521,"creation_date":1660980115,"question_id":73424809,"body_markdown":"I want to read data from services to controler and display on the UI on Spring boot, but it gives the below error\r\n\r\n&gt; ERROR 20984 --- [nio-8080-exec-2] s.e.ErrorMvcAutoConfiguration$StaticView : Cannot render error page for request [/countries] as the response has already been committed. As a result, the response may have the wrong status code.\r\n\r\nThe database has also the below data\r\n\r\nmysql&gt; select * from country;\r\n\r\n    +----+-------------+------+---------------+---------------+-------------+\r\n    | id | capital     | code | continent     | description   | nationality |\r\n    +----+-------------+------+---------------+---------------+-------------+\r\n    |  1 | Washington  | 01   | North America | United States | American    |\r\n    |  2 | Addis Ababa | 01   | Africa        | Ethiopia      | Ethiopian   |\r\n    +----+-------------+------+---------------+---------------+-------------+ \r\n\r\nModel\r\n\r\n     \r\n    @Entity\r\n    @Data\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = &quot;id&quot;)\r\n    public class Country {\r\n    \t\r\n    \t@Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    \tprivate Integer id;\r\n    \tprivate String code;\r\n    \tprivate String capital;\r\n    \tprivate String description;\r\n    \tprivate String nationality;\r\n    \tprivate String continent;\r\n    \t\r\n    \t@OneToMany(mappedBy=&quot;country&quot;)\r\n    \tprivate List&lt;State&gt; states;\r\n    }\r\nRepository\r\n\r\n    import org.springframework.data.jpa.repository.JpaRepository;\r\n    import org.springframework.stereotype.Repository;\r\n\r\n    import com.kindsonthegenius.FleetApp.models.Country;\r\n\r\n    @Repository\r\n    public interface CountryRepository extends JpaRepository&lt;Country, Integer&gt; {\r\n\r\n    }\r\n\r\nService\r\n\r\n      @Service\r\n    public class CountryService {\r\n    \r\n        @Autowired\r\n    \tprivate CountryRepository countryRepository;\r\n    \t\r\n    \tpublic List&lt;Country&gt; getCountries(){\r\n    \t    return countryRepository.findAll();\r\n    \t}\r\n    \t\r\n    }\r\nController\r\n\r\n    @Controller\r\n    public class CountryController {\r\n\t@Autowired\r\n\tprivate CountryService countryService;\r\n\t\r\n\t@GetMapping(&quot;/countries&quot;)\r\n    public String goCountry(Model model) {\r\n\t\tList&lt;Country&gt; countryList = countryService.getCountries(); \r\n\t\tmodel.addAttribute(&quot;countries&quot;, countryList);\r\n    \treturn &quot;country&quot;;\r\n    }\r\n    }\r\nUI\r\n\r\n    &lt;table class=&quot;table&quot;&gt;\r\n                &lt;thead&gt;\r\n                  &lt;tr&gt;\r\n                    &lt;th scope=&quot;col&quot;&gt;id&lt;/th&gt;\r\n                    &lt;th scope=&quot;col&quot;&gt;Description&lt;/th&gt;\r\n                    &lt;th scope=&quot;col&quot;&gt;Capital&lt;/th&gt; \r\n                  &lt;/tr&gt;\r\n                &lt;/thead&gt;\r\n                &lt;tbody&gt; \r\n                  &lt;tr th:each=&quot;country : ${countries}&quot;&gt;\r\n                    &lt;td th:text=&quot;${country.id}&quot;&gt;&lt;/td&gt;\r\n                    &lt;td th:text=&quot;${country.description}&quot;&gt;&lt;/td&gt;\r\n                    &lt;td th:text=&quot;${country.capital}&quot;&gt;&lt;/td&gt; \r\n                  &lt;/tr&gt;\r\n                &lt;/tbody&gt;\r\n           &lt;/table&gt;\r\n\r\n\r\n***Please help me to fix this error?***","title":"Cannot render error page for request [/countries] as the response has already been committed. As a result, the response may have the wrong status code","body":"<p>I want to read data from services to controler and display on the UI on Spring boot, but it gives the below error</p>\n<blockquote>\n<p>ERROR 20984 --- [nio-8080-exec-2] s.e.ErrorMvcAutoConfiguration$StaticView : Cannot render error page for request [/countries] as the response has already been committed. As a result, the response may have the wrong status code.</p>\n</blockquote>\n<p>The database has also the below data</p>\n<p>mysql&gt; select * from country;</p>\n<pre><code>+----+-------------+------+---------------+---------------+-------------+\n| id | capital     | code | continent     | description   | nationality |\n+----+-------------+------+---------------+---------------+-------------+\n|  1 | Washington  | 01   | North America | United States | American    |\n|  2 | Addis Ababa | 01   | Africa        | Ethiopia      | Ethiopian   |\n+----+-------------+------+---------------+---------------+-------------+ \n</code></pre>\n<p>Model</p>\n<pre><code>@Entity\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = &quot;id&quot;)\npublic class Country {\n    \n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Integer id;\n    private String code;\n    private String capital;\n    private String description;\n    private String nationality;\n    private String continent;\n    \n    @OneToMany(mappedBy=&quot;country&quot;)\n    private List&lt;State&gt; states;\n}\n</code></pre>\n<p>Repository</p>\n<pre><code>import org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\n\nimport com.kindsonthegenius.FleetApp.models.Country;\n\n@Repository\npublic interface CountryRepository extends JpaRepository&lt;Country, Integer&gt; {\n\n}\n</code></pre>\n<p>Service</p>\n<pre><code>  @Service\npublic class CountryService {\n\n    @Autowired\n    private CountryRepository countryRepository;\n    \n    public List&lt;Country&gt; getCountries(){\n        return countryRepository.findAll();\n    }\n    \n}\n</code></pre>\n<p>Controller</p>\n<pre><code>@Controller\npublic class CountryController {\n@Autowired\nprivate CountryService countryService;\n\n@GetMapping(&quot;/countries&quot;)\npublic String goCountry(Model model) {\n    List&lt;Country&gt; countryList = countryService.getCountries(); \n    model.addAttribute(&quot;countries&quot;, countryList);\n    return &quot;country&quot;;\n}\n}\n</code></pre>\n<p>UI</p>\n<pre><code>&lt;table class=&quot;table&quot;&gt;\n            &lt;thead&gt;\n              &lt;tr&gt;\n                &lt;th scope=&quot;col&quot;&gt;id&lt;/th&gt;\n                &lt;th scope=&quot;col&quot;&gt;Description&lt;/th&gt;\n                &lt;th scope=&quot;col&quot;&gt;Capital&lt;/th&gt; \n              &lt;/tr&gt;\n            &lt;/thead&gt;\n            &lt;tbody&gt; \n              &lt;tr th:each=&quot;country : ${countries}&quot;&gt;\n                &lt;td th:text=&quot;${country.id}&quot;&gt;&lt;/td&gt;\n                &lt;td th:text=&quot;${country.description}&quot;&gt;&lt;/td&gt;\n                &lt;td th:text=&quot;${country.capital}&quot;&gt;&lt;/td&gt; \n              &lt;/tr&gt;\n            &lt;/tbody&gt;\n       &lt;/table&gt;\n</code></pre>\n<p><em><strong>Please help me to fix this error?</strong></em></p>\n"},{"tags":["java","android","android-studio"],"comments":[{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1661025723,"post_id":73429753,"comment_id":129674564,"body_markdown":"If it breaks when you remove `maven { url &quot;https://jitpack.io&quot; }` then I think you know the answer. If it doesn&#39;t break, then I have no idea why you would keep it. Best of luck!","body":"If it breaks when you remove <code>maven { url &quot;https:&#47;&#47;jitpack.io&quot; }</code> then I think you know the answer. If it doesn&#39;t break, then I have no idea why you would keep it. Best of luck!"},{"owner":{"account_id":25929375,"reputation":69,"user_id":19650731,"display_name":"Eldestornillador"},"score":0,"creation_date":1661027146,"post_id":73429753,"comment_id":129674858,"body_markdown":"@ElliottFrisch I am confused. So I would like an awnser with an explenation better that trying to removing jitpack and see if my app breaks, I think that it is not a good solution to know if I have to use it or not because maybe my app seemingly is working without it but in fact it is causing some crashes that I can&#180;t see only seeing if ir breaks or not.. I don&#180;t know if it was a rhetoric awnser to tell me that I don&#180;t have to use it, I would like if you could explain me better, sorry for my little wisdom","body":"@ElliottFrisch I am confused. So I would like an awnser with an explenation better that trying to removing jitpack and see if my app breaks, I think that it is not a good solution to know if I have to use it or not because maybe my app seemingly is working without it but in fact it is causing some crashes that I can&#180;t see only seeing if ir breaks or not.. I don&#180;t know if it was a rhetoric awnser to tell me that I don&#180;t have to use it, I would like if you could explain me better, sorry for my little wisdom"},{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":1,"creation_date":1661027564,"post_id":73429753,"comment_id":129674936,"body_markdown":"You are asking us to tell you if your project has any external dependencies which are only available on this particular third party website. Honestly, the answer is almost certainly no. But I can&#39;t go and perform your due diligence for you. Run [`gradle dependencies`](https://stackoverflow.com/a/21650904/2970947) and look through the list.","body":"You are asking us to tell you if your project has any external dependencies which are only available on this particular third party website. Honestly, the answer is almost certainly no. But I can&#39;t go and perform your due diligence for you. Run <a href=\"https://stackoverflow.com/a/21650904/2970947\"><code>gradle dependencies</code></a> and look through the list."},{"owner":{"account_id":25929375,"reputation":69,"user_id":19650731,"display_name":"Eldestornillador"},"score":0,"creation_date":1661028273,"post_id":73429753,"comment_id":129675055,"body_markdown":"@ElliottFrisch Thanks, I think I can imrpove my question to let you help me better. If I needed that &quot;maven { url &quot;https://jitpack.io&quot; }&quot; in my project before using jcenter(), my question is, if now I am using maveCentral(), is mavenCentral including &quot;maven { url &quot;https://jitpack.io&quot; }&quot; or it is totally indifferent if I am using jcenter or mavenCentral ? I mean, is &quot;maven { url &quot;https://jitpack.io&quot; }&quot; independent of jcenter() and mavenCentral()?","body":"@ElliottFrisch Thanks, I think I can imrpove my question to let you help me better. If I needed that &quot;maven { url &quot;<a href=\"https://jitpack.io\" rel=\"nofollow noreferrer\">jitpack.io</a>&quot; }&quot; in my project before using jcenter(), my question is, if now I am using maveCentral(), is mavenCentral including &quot;maven { url &quot;<a href=\"https://jitpack.io\" rel=\"nofollow noreferrer\">jitpack.io</a>&quot; }&quot; or it is totally indifferent if I am using jcenter or mavenCentral ? I mean, is &quot;maven { url &quot;<a href=\"https://jitpack.io\" rel=\"nofollow noreferrer\">jitpack.io</a>&quot; }&quot; independent of jcenter() and mavenCentral()?"},{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1661213006,"post_id":73429753,"comment_id":129713598,"body_markdown":"Yes. `mavenCentral()` is basically the same thing as `maven { url &quot;https://repo.maven.apache.org/maven2/&quot; }`. This is [documented](https://docs.gradle.org/current/dsl/org.gradle.api.artifacts.dsl.RepositoryHandler.html#org.gradle.api.artifacts.dsl.RepositoryHandler:mavenCentral()).","body":"Yes. <code>mavenCentral()</code> is basically the same thing as <code>maven { url &quot;https:&#47;&#47;repo.maven.apache.org&#47;maven2&#47;&quot; }</code>. This is <a href=\"https://docs.gradle.org/current/dsl/org.gradle.api.artifacts.dsl.RepositoryHandler.html#org.gradle.api.artifacts.dsl.RepositoryHandler:mavenCentral()\" rel=\"nofollow noreferrer\">documented</a>."}],"answers":[{"tags":[],"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661028209,"creation_date":1661028209,"answer_id":73430033,"question_id":73429753,"body_markdown":"&gt; Or actually I should use the code line of maven jitpack (maven { url &quot;https://jitpack.io&quot; }&quot;) although now I am using mavenCentral() instead of jcenter()?\r\n\r\nThe choice of `mavenCentral()` versus `jcenter()` has nothing to do with jitpack.io and whether you should be using it as a repository.\r\n\r\nYou need a repository to obtain artifacts hosted by that repository. So, for example, you need the `google()` repository for most of Google&#39;s artifacts, such as the `com.google.gms:google-services` that you are using.\r\n\r\nWhether you need jitpack.io will depend on whether you have any dependencies that come from that repository. We have no way of telling whether you do or you do not.\r\n\r\nA comment on your question suggests removing it and seeing if your build breaks. That will not work immediately, as Gradle caches downloaded artifacts and usually works off of your cached copy. Your build would break in the future if you try updating the version of some dependency and none of the other repositories host that artifact (at least for that version).\r\n\r\nThe safest thing to do is to go through all your dependencies (everything listed in a `dependencies` closure in your project-level and module-level `build.gradle` files) and identify where they come from. Perhaps add comments to your Gradle files to help you keep track. If you find that none of your dependencies seem to come from jitpack.io, you can remove that repository.","title":"Is Jitpack needed as repository if I am using mavenCentral()?","body":"<blockquote>\n<p>Or actually I should use the code line of maven jitpack (maven { url &quot;https://jitpack.io&quot; }&quot;) although now I am using mavenCentral() instead of jcenter()?</p>\n</blockquote>\n<p>The choice of <code>mavenCentral()</code> versus <code>jcenter()</code> has nothing to do with jitpack.io and whether you should be using it as a repository.</p>\n<p>You need a repository to obtain artifacts hosted by that repository. So, for example, you need the <code>google()</code> repository for most of Google's artifacts, such as the <code>com.google.gms:google-services</code> that you are using.</p>\n<p>Whether you need jitpack.io will depend on whether you have any dependencies that come from that repository. We have no way of telling whether you do or you do not.</p>\n<p>A comment on your question suggests removing it and seeing if your build breaks. That will not work immediately, as Gradle caches downloaded artifacts and usually works off of your cached copy. Your build would break in the future if you try updating the version of some dependency and none of the other repositories host that artifact (at least for that version).</p>\n<p>The safest thing to do is to go through all your dependencies (everything listed in a <code>dependencies</code> closure in your project-level and module-level <code>build.gradle</code> files) and identify where they come from. Perhaps add comments to your Gradle files to help you keep track. If you find that none of your dependencies seem to come from jitpack.io, you can remove that repository.</p>\n"}],"owner":{"account_id":25929375,"reputation":69,"user_id":19650731,"display_name":"Eldestornillador"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":868,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1661028209,"creation_date":1661025554,"question_id":73429753,"body_markdown":"So I am working on an old project in which I have the following code in the project build.gradle:\r\n\r\n```\r\nbuildscript {\r\n    repositories {\r\n        google()\r\n        jcenter()\r\n        \r\n    }\r\n    dependencies {\r\n        classpath &#39;com.android.tools.build:gradle:7.2.1&#39;\r\n        classpath &#39;com.google.gms:google-services:4.3.13&#39;\r\n    }\r\n}\r\n\r\nallprojects {\r\n    repositories {\r\n        google()\r\n        jcenter()\r\n        maven { url &quot;https://jitpack.io&quot; }\r\n    }\r\n}\r\n\r\ntask clean(type: Delete) {\r\n    delete rootProject.buildDir\r\n}\r\n```\r\n\r\nAndroid Studio is warning me to use mavenCentral() instead of jcenter() as jcenter is not being updated. So I have change it to the following code:\r\n```\r\nbuildscript {\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n        \r\n    }\r\n    dependencies {\r\n        classpath &#39;com.android.tools.build:gradle:7.2.1&#39;\r\n        classpath &#39;com.google.gms:google-services:4.3.13&#39;\r\n    }\r\n}\r\n\r\nallprojects {\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n        maven { url &quot;https://jitpack.io&quot; }\r\n    }\r\n}\r\n\r\ntask clean(type: Delete) {\r\n    delete rootProject.buildDir\r\n}\r\n```\r\nSo my question is, if now I am using mavenCentral() instead of jcenter(), do I have to use the &quot;        maven { url &quot;https://jitpack.io&quot; }&quot; line of code or I should&#180;t use it? I mean, the correct code\r\nwould be the following instead of the previous code? -&gt;\r\n\r\n```\r\nbuildscript {\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n        \r\n    }\r\n    dependencies {\r\n        classpath &#39;com.android.tools.build:gradle:7.2.1&#39;\r\n        classpath &#39;com.google.gms:google-services:4.3.13&#39;\r\n    }\r\n}\r\n\r\nallprojects {\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n        \r\n    }\r\n}\r\n\r\ntask clean(type: Delete) {\r\n    delete rootProject.buildDir\r\n}\r\n```\r\nOr actually I should use the code line of maven jitpack (maven { url &quot;https://jitpack.io&quot; }&quot;) although now I am using mavenCentral() instead of jcenter()?","title":"Is Jitpack needed as repository if I am using mavenCentral()?","body":"<p>So I am working on an old project in which I have the following code in the project build.gradle:</p>\n<pre><code>buildscript {\n    repositories {\n        google()\n        jcenter()\n        \n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:7.2.1'\n        classpath 'com.google.gms:google-services:4.3.13'\n    }\n}\n\nallprojects {\n    repositories {\n        google()\n        jcenter()\n        maven { url &quot;https://jitpack.io&quot; }\n    }\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n<p>Android Studio is warning me to use mavenCentral() instead of jcenter() as jcenter is not being updated. So I have change it to the following code:</p>\n<pre><code>buildscript {\n    repositories {\n        google()\n        mavenCentral()\n        \n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:7.2.1'\n        classpath 'com.google.gms:google-services:4.3.13'\n    }\n}\n\nallprojects {\n    repositories {\n        google()\n        mavenCentral()\n        maven { url &quot;https://jitpack.io&quot; }\n    }\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n<p>So my question is, if now I am using mavenCentral() instead of jcenter(), do I have to use the &quot;        maven { url &quot;https://jitpack.io&quot; }&quot; line of code or I should´t use it? I mean, the correct code\nwould be the following instead of the previous code? -&gt;</p>\n<pre><code>buildscript {\n    repositories {\n        google()\n        mavenCentral()\n        \n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:7.2.1'\n        classpath 'com.google.gms:google-services:4.3.13'\n    }\n}\n\nallprojects {\n    repositories {\n        google()\n        mavenCentral()\n        \n    }\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n<p>Or actually I should use the code line of maven jitpack (maven { url &quot;https://jitpack.io&quot; }&quot;) although now I am using mavenCentral() instead of jcenter()?</p>\n"},{"tags":["java","graphql"],"answers":[{"tags":[],"owner":{"account_id":8145804,"reputation":466,"user_id":6134498,"display_name":"Nils Hartmann"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661028154,"creation_date":1661028154,"answer_id":73430026,"question_id":73311186,"body_markdown":"Instead of writing an &quot;hard coded&quot; string and then replace the values, you could use GraphQL variables in your mutation.\r\n\r\nVariables need to be declared in your mutation (or query or subscribtion), and can then be used everywhere inside your operation. The values for the variables are sent as an extra (JSON) object to your GraphQL endpoint (somehow comparable to a prepared SQL statement).\r\n\r\n```graphql\r\nmutation CreateComment($name: String!, $message: String!) {\r\n  createComment(data: { name: $name, message: $message }) {\r\n    id\r\n    name\r\n  }\r\n}\r\n```\r\n\r\nHow the variables are sent to your GraphQL API depends on your client library. In general you would create the &quot;normal&quot; HTTP POST request with your GraphQL query but in addition a `variables` field that contains the variable names and values as an object:\r\n\r\n```json\r\n{\r\n  &quot;query&quot;: &quot;mutation CreateComment($name: String!, $message: String!) .....&quot;,\r\n  &quot;variables&quot;: {&quot;name&quot;:&quot;Face Mask&quot;, &quot;message&quot;: &quot;face-mask&quot;}\r\n}\r\n```\r\n\r\nMore on variables in the GraphQL docs: https://graphql.org/learn/queries/#variables","title":"How to create/generate GraphQL query programatically in Java","body":"<p>Instead of writing an &quot;hard coded&quot; string and then replace the values, you could use GraphQL variables in your mutation.</p>\n<p>Variables need to be declared in your mutation (or query or subscribtion), and can then be used everywhere inside your operation. The values for the variables are sent as an extra (JSON) object to your GraphQL endpoint (somehow comparable to a prepared SQL statement).</p>\n<pre><code>mutation CreateComment($name: String!, $message: String!) {\n  createComment(data: { name: $name, message: $message }) {\n    id\n    name\n  }\n}\n</code></pre>\n<p>How the variables are sent to your GraphQL API depends on your client library. In general you would create the &quot;normal&quot; HTTP POST request with your GraphQL query but in addition a <code>variables</code> field that contains the variable names and values as an object:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;query&quot;: &quot;mutation CreateComment($name: String!, $message: String!) .....&quot;,\n  &quot;variables&quot;: {&quot;name&quot;:&quot;Face Mask&quot;, &quot;message&quot;: &quot;face-mask&quot;}\n}\n</code></pre>\n<p>More on variables in the GraphQL docs: <a href=\"https://graphql.org/learn/queries/#variables\" rel=\"nofollow noreferrer\">https://graphql.org/learn/queries/#variables</a></p>\n"}],"owner":{"account_id":402747,"reputation":71,"user_id":770090,"accept_rate":100,"display_name":"scmbgx"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1111,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1661028154,"creation_date":1660156698,"question_id":73311186,"body_markdown":"I&#39;m new in GraphQL with Java, so I understand that having this model:\r\n\r\n``` lang-js\r\ntype Comment {\r\n\tid: ID!\r\n\tname: String!\r\n\tmessage: String!\r\n}\r\n```\r\nI need to generate (and send to an API) this query to insert a entry:\r\n\r\n``` lang-js\r\nmutation {\r\n  createComment(data: { name: &quot;Face Mask&quot;, message: &quot;face-mask&quot; }) {\r\n    id\r\n    name\r\n  }\r\n}\r\n```\r\n\r\nI was looking a programatically way to generate this string in Java with some library, but i can&#39;t find anything.\r\n\r\nWe are wondering if there is a more generic way rater than write a &quot;hard coded&quot; string and then replace the values.\r\n\r\nWe are running a spring boot server, as a REST API and we need to save the comments in GraphCMS (now Hygraph) besides to a MySql database (already working).\r\n","title":"How to create/generate GraphQL query programatically in Java","body":"<p>I'm new in GraphQL with Java, so I understand that having this model:</p>\n<pre class=\"lang-js prettyprint-override\"><code>type Comment {\n    id: ID!\n    name: String!\n    message: String!\n}\n</code></pre>\n<p>I need to generate (and send to an API) this query to insert a entry:</p>\n<pre class=\"lang-js prettyprint-override\"><code>mutation {\n  createComment(data: { name: &quot;Face Mask&quot;, message: &quot;face-mask&quot; }) {\n    id\n    name\n  }\n}\n</code></pre>\n<p>I was looking a programatically way to generate this string in Java with some library, but i can't find anything.</p>\n<p>We are wondering if there is a more generic way rater than write a &quot;hard coded&quot; string and then replace the values.</p>\n<p>We are running a spring boot server, as a REST API and we need to save the comments in GraphCMS (now Hygraph) besides to a MySql database (already working).</p>\n"},{"tags":["java","soap","xml-parsing"],"answers":[{"tags":[],"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1661026238,"creation_date":1661026238,"answer_id":73429825,"question_id":73428578,"body_markdown":"1) You have a `node` variable in the for loop of your `getString` method which you don&#39;t use, instead you keep using the same element `list.item(0)`\r\n\r\n2) You return immediately after the first iteration, so even if you fix the above issue withe `node` variable you will get only the first because you return on the first iteration\r\n\r\n3) Your method returns a string where it should return a list of strings\r\n\r\nSomething like below might be what you want:\r\n\r\n    protected static List&lt;String&gt; getString(String tagName, Element element) {\r\n        NodeList list = element.getElementsByTagName(tagName);\r\n        List&lt;String&gt; result = new ArrayList&lt;&gt;();\r\n        \r\n        for (Node node : iterable(list)) {\r\n            result.add(node.getFirstChild().getNodeValue());\r\n        }\r\n\r\n        return result;\r\n    }","title":"How to get multiple values from SOAP XML String in Java","body":"<ol>\n<li><p>You have a <code>node</code> variable in the for loop of your <code>getString</code> method which you don't use, instead you keep using the same element <code>list.item(0)</code></p>\n</li>\n<li><p>You return immediately after the first iteration, so even if you fix the above issue withe <code>node</code> variable you will get only the first because you return on the first iteration</p>\n</li>\n<li><p>Your method returns a string where it should return a list of strings</p>\n</li>\n</ol>\n<p>Something like below might be what you want:</p>\n<pre><code>protected static List&lt;String&gt; getString(String tagName, Element element) {\n    NodeList list = element.getElementsByTagName(tagName);\n    List&lt;String&gt; result = new ArrayList&lt;&gt;();\n    \n    for (Node node : iterable(list)) {\n        result.add(node.getFirstChild().getNodeValue());\n    }\n\n    return result;\n}\n</code></pre>\n"}],"owner":{"account_id":8634173,"reputation":103,"user_id":13743288,"display_name":"James"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":533,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73429825,"answer_count":1,"score":0,"last_activity_date":1661026238,"creation_date":1661014721,"question_id":73428578,"body_markdown":"I have a SOAP XML as below:\r\n\r\n\r\n    &lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39;?&gt;\r\n    &lt;soapenv:Envelope&gt;\r\n    \t&lt;soapenv:Header/&gt;\r\n    \t&lt;soapenv:Body&gt;\r\n    \t\t&lt;bcs:IntegrationEnquiryResultMsg&gt;\r\n    \t\t\t&lt;ResultHeader&gt;\r\n    \t\t\t\t&lt;cbs:ResultCode&gt;0&lt;/cbs:ResultCode&gt;\r\n    \t\t\t\t&lt;cbs:ResultDesc&gt;Operation successfully.&lt;/cbs:ResultDesc&gt;\r\n    \t\t\t&lt;/ResultHeader&gt;\r\n    \t\t\t&lt;IntegrationEnquiryResult&gt;\r\n    \t\t\t\t&lt;bcs:Subscriber&gt;\r\n    \t\t\t\t\t&lt;bcs:SupplementaryOffering&gt;\r\n    \t\t\t\t\t\t&lt;bcc:OfferingKey&gt;\r\n    \t\t\t\t\t\t\t&lt;bcc:OfferingID&gt;14205004&lt;/bcc:OfferingID&gt;\r\n    \t\t\t\t\t\t\t&lt;bcc:PurchaseSeq&gt;300000000856956&lt;/bcc:PurchaseSeq&gt;\r\n    \t\t\t\t\t\t&lt;/bcc:OfferingKey&gt;\r\n    \t\t\t\t\t&lt;/bcs:SupplementaryOffering&gt;\r\n    \t\t\t\t\t&lt;bcs:SupplementaryOffering&gt;\r\n    \t\t\t\t\t\t&lt;bcc:OfferingKey&gt;\r\n    \t\t\t\t\t\t\t&lt;bcc:OfferingID&gt;20220504&lt;/bcc:OfferingID&gt;\r\n    \t\t\t\t\t\t\t&lt;bcc:PurchaseSeq&gt;300000000850496&lt;/bcc:PurchaseSeq&gt;\r\n    \t\t\t\t\t\t&lt;/bcc:OfferingKey&gt;\r\n    \t\t\t\t\t&lt;/bcs:SupplementaryOffering&gt;\r\n    \t\t\t\t\t&lt;bcs:SupplementaryOffering&gt;\r\n    \t\t\t\t\t\t&lt;bcc:OfferingKey&gt;\r\n    \t\t\t\t\t\t\t&lt;bcc:OfferingID&gt;14205003&lt;/bcc:OfferingID&gt;\r\n    \t\t\t\t\t\t\t&lt;bcc:PurchaseSeq&gt;300000000853681&lt;/bcc:PurchaseSeq&gt;\r\n    \t\t\t\t\t\t&lt;/bcc:OfferingKey&gt;\r\n    \t\t\t\t\t&lt;/bcs:SupplementaryOffering&gt;\r\n    \t\t\t\t&lt;/bcs:Subscriber&gt;\r\n    \t\t\t&lt;/IntegrationEnquiryResult&gt;\r\n    \t\t&lt;/bcs:IntegrationEnquiryResultMsg&gt;\r\n    \t&lt;/soapenv:Body&gt;\r\n    &lt;/soapenv:Envelope&gt;\r\n\r\nI would want to get the values of `OfferingID`. There could be multiple as in this case there are 3. I have tried the code below but I only get the first one. \r\n\r\n```\r\n    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\r\n\tDocumentBuilder builder = factory.newDocumentBuilder();\r\n\tDocument document = builder.parse(new InputSource(new StringReader(xml)));\r\n\tElement rootElement = document.getDocumentElement();\r\n    System.out.println(getString(&quot;bcc:OfferingID&quot;, rootElement));\r\n\r\n    protected static String getString(String tagName, Element element) {\r\n\t\tNodeList list = element.getElementsByTagName(tagName);\r\n\t\tfor (Node node : iterable(list)) {\r\n\t\t\tif (list != null &amp;&amp; list.getLength() &gt; 0) {\r\n\t\t\t\tNodeList subList = list.item(0).getChildNodes();\r\n\r\n\t\t\t\tif (subList != null &amp;&amp; subList.getLength() &gt; 0) {\r\n\t\t\t\t\treturn subList.item(0).getNodeValue();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\tpublic static Iterable&lt;Node&gt; iterable(final NodeList nodeList) {\r\n\t\treturn () -&gt; new Iterator&lt;Node&gt;() {\r\n\r\n\t\t\tprivate int index = 0;\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic boolean hasNext() {\r\n\t\t\t\treturn index &lt; nodeList.getLength();\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic Node next() {\r\n\t\t\t\tif (!hasNext())\r\n\t\t\t\t\tthrow new NoSuchElementException();\r\n\t\t\t\treturn nodeList.item(index++);\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\nIn this case, I only get `14205004`. Where am I missing a step? ","title":"How to get multiple values from SOAP XML String in Java","body":"<p>I have a SOAP XML as below:</p>\n<pre><code>&lt;?xml version='1.0' encoding='UTF-8'?&gt;\n&lt;soapenv:Envelope&gt;\n    &lt;soapenv:Header/&gt;\n    &lt;soapenv:Body&gt;\n        &lt;bcs:IntegrationEnquiryResultMsg&gt;\n            &lt;ResultHeader&gt;\n                &lt;cbs:ResultCode&gt;0&lt;/cbs:ResultCode&gt;\n                &lt;cbs:ResultDesc&gt;Operation successfully.&lt;/cbs:ResultDesc&gt;\n            &lt;/ResultHeader&gt;\n            &lt;IntegrationEnquiryResult&gt;\n                &lt;bcs:Subscriber&gt;\n                    &lt;bcs:SupplementaryOffering&gt;\n                        &lt;bcc:OfferingKey&gt;\n                            &lt;bcc:OfferingID&gt;14205004&lt;/bcc:OfferingID&gt;\n                            &lt;bcc:PurchaseSeq&gt;300000000856956&lt;/bcc:PurchaseSeq&gt;\n                        &lt;/bcc:OfferingKey&gt;\n                    &lt;/bcs:SupplementaryOffering&gt;\n                    &lt;bcs:SupplementaryOffering&gt;\n                        &lt;bcc:OfferingKey&gt;\n                            &lt;bcc:OfferingID&gt;20220504&lt;/bcc:OfferingID&gt;\n                            &lt;bcc:PurchaseSeq&gt;300000000850496&lt;/bcc:PurchaseSeq&gt;\n                        &lt;/bcc:OfferingKey&gt;\n                    &lt;/bcs:SupplementaryOffering&gt;\n                    &lt;bcs:SupplementaryOffering&gt;\n                        &lt;bcc:OfferingKey&gt;\n                            &lt;bcc:OfferingID&gt;14205003&lt;/bcc:OfferingID&gt;\n                            &lt;bcc:PurchaseSeq&gt;300000000853681&lt;/bcc:PurchaseSeq&gt;\n                        &lt;/bcc:OfferingKey&gt;\n                    &lt;/bcs:SupplementaryOffering&gt;\n                &lt;/bcs:Subscriber&gt;\n            &lt;/IntegrationEnquiryResult&gt;\n        &lt;/bcs:IntegrationEnquiryResultMsg&gt;\n    &lt;/soapenv:Body&gt;\n&lt;/soapenv:Envelope&gt;\n</code></pre>\n<p>I would want to get the values of <code>OfferingID</code>. There could be multiple as in this case there are 3. I have tried the code below but I only get the first one.</p>\n<pre><code>    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\n    DocumentBuilder builder = factory.newDocumentBuilder();\n    Document document = builder.parse(new InputSource(new StringReader(xml)));\n    Element rootElement = document.getDocumentElement();\n    System.out.println(getString(&quot;bcc:OfferingID&quot;, rootElement));\n\n    protected static String getString(String tagName, Element element) {\n        NodeList list = element.getElementsByTagName(tagName);\n        for (Node node : iterable(list)) {\n            if (list != null &amp;&amp; list.getLength() &gt; 0) {\n                NodeList subList = list.item(0).getChildNodes();\n\n                if (subList != null &amp;&amp; subList.getLength() &gt; 0) {\n                    return subList.item(0).getNodeValue();\n                }\n            }\n        }\n\n        return null;\n    }\n\n    public static Iterable&lt;Node&gt; iterable(final NodeList nodeList) {\n        return () -&gt; new Iterator&lt;Node&gt;() {\n\n            private int index = 0;\n\n            @Override\n            public boolean hasNext() {\n                return index &lt; nodeList.getLength();\n            }\n\n            @Override\n            public Node next() {\n                if (!hasNext())\n                    throw new NoSuchElementException();\n                return nodeList.item(index++);\n            }\n        };\n    }\n\nIn this case, I only get `14205004`. Where am I missing a step? \n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2301478,"reputation":197,"user_id":2021693,"display_name":"Reeta Wani"},"score":0,"creation_date":1586354373,"post_id":61102495,"comment_id":108097854,"body_markdown":"Have a look at this..https://www.geeksforgeeks.org/find-difference-between-sums-of-two-diagonals/","body":"Have a look at this..<a href=\"https://www.geeksforgeeks.org/find-difference-between-sums-of-two-diagonals/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/find-difference-between-sums-of-two-&zwnj;&#8203;diagonals</a>"},{"owner":{"account_id":14739603,"reputation":264,"user_id":10644556,"display_name":"PaianganuOm"},"score":1,"creation_date":1586354508,"post_id":61102495,"comment_id":108097928,"body_markdown":"Please provide some code with your attempts and we&#39;ll be happy to help with solutions to problems, not the complete homework.","body":"Please provide some code with your attempts and we&#39;ll be happy to help with solutions to problems, not the complete homework."}],"answers":[{"tags":[],"owner":{"account_id":18216828,"reputation":104,"user_id":13258364,"display_name":"Ner"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1586354495,"creation_date":1586354495,"answer_id":61102566,"question_id":61102495,"body_markdown":"Use Math.abs() to get the absolute difference between the diagonals\r\n\r\nhttps://www.tutorialspoint.com/java/lang/math_abs_int.htm","title":"How to calculate the absolute difference between the sum of diagonals?","body":"<p>Use Math.abs() to get the absolute difference between the diagonals</p>\n\n<p><a href=\"https://www.tutorialspoint.com/java/lang/math_abs_int.htm\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/java/lang/math_abs_int.htm</a></p>\n"},{"tags":[],"owner":{"account_id":2818342,"reputation":299858,"user_id":2422776,"display_name":"Mureinik"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1586354902,"creation_date":1586354832,"answer_id":61102686,"question_id":61102495,"body_markdown":"Consider a matrix as an array of arrays of the size N*N. The left-to-right diagonal the row and the column have the same index. On the right to left diagonal the indexes sum up to `N-1`. Once you sum them, you can then subtract them and apply the absolute value to it:\r\n\r\n```java\r\nint[][] matrix = ...; // \r\n\r\nint sum1 = 0;\r\nint sum2 = 0;\r\nfor (int i = 0; i &lt; matrix.length; ++i) {\r\n    sum1 += matrix[i][i];\r\n    sum2 += matrix[i][matrix.length - i - 1];\r\n}\r\nint result = Math.abs(sum1 - sum2);\r\n```","title":"How to calculate the absolute difference between the sum of diagonals?","body":"<p>Consider a matrix as an array of arrays of the size N*N. The left-to-right diagonal the row and the column have the same index. On the right to left diagonal the indexes sum up to <code>N-1</code>. Once you sum them, you can then subtract them and apply the absolute value to it:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>int[][] matrix = ...; // \n\nint sum1 = 0;\nint sum2 = 0;\nfor (int i = 0; i &lt; matrix.length; ++i) {\n    sum1 += matrix[i][i];\n    sum2 += matrix[i][matrix.length - i - 1];\n}\nint result = Math.abs(sum1 - sum2);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24326117,"reputation":2235,"user_id":18265638,"display_name":"Sathi Aiswarya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646312179,"creation_date":1646312179,"answer_id":71337580,"question_id":61102495,"body_markdown":"    import java.util.*;\r\n    public class Main\r\n    {\r\n    static int diagonalDiff(int arr[][])\r\n    {\r\n        int leftSum=0;\r\n        int rightSum=0;\r\n        int n=arr.length;\r\n        for(int i=0;i&lt;arr.length-1;i++)\r\n        {\r\n            leftSum=leftSum+arr[i][i];\r\n            rightSum=rightSum+arr[i][n-1-i];\r\n        }\r\n        return java.lang.Math.abs(leftSum-rightSum);\r\n    }\r\n    public static void main(String[] args)\r\n    {\r\n        Scanner scan=new Scanner(System.in);\r\n        System.out.print(&quot;Enter size&quot;);\r\n        int n=scan.nextInt();\r\n        int a[][]=new int[n][n];\r\n        System.out.print(&quot;Enter array elements&quot;);\r\n        for(int i=0;i&lt;a.length-1;i++)\r\n        {\r\n            for(int j=0;j&lt;=a[i].length-1;j++)\r\n            {\r\n                a[i][j]=scan.nextInt();\r\n            }\r\n        }\r\n        System.out.print(diagonalDiff(a));\r\n    }\r\n    }","title":"How to calculate the absolute difference between the sum of diagonals?","body":"<pre><code>import java.util.*;\npublic class Main\n{\nstatic int diagonalDiff(int arr[][])\n{\n    int leftSum=0;\n    int rightSum=0;\n    int n=arr.length;\n    for(int i=0;i&lt;arr.length-1;i++)\n    {\n        leftSum=leftSum+arr[i][i];\n        rightSum=rightSum+arr[i][n-1-i];\n    }\n    return java.lang.Math.abs(leftSum-rightSum);\n}\npublic static void main(String[] args)\n{\n    Scanner scan=new Scanner(System.in);\n    System.out.print(&quot;Enter size&quot;);\n    int n=scan.nextInt();\n    int a[][]=new int[n][n];\n    System.out.print(&quot;Enter array elements&quot;);\n    for(int i=0;i&lt;a.length-1;i++)\n    {\n        for(int j=0;j&lt;=a[i].length-1;j++)\n        {\n            a[i][j]=scan.nextInt();\n        }\n    }\n    System.out.print(diagonalDiff(a));\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15486586,"reputation":106,"user_id":11185081,"display_name":"Manir Mahamat"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661025619,"creation_date":1661025619,"answer_id":73429763,"question_id":61102495,"body_markdown":"     public int diagonalDifferences(List&lt;List&lt;Integer&gt;&gt; list) {\r\n   \r\n        int rSum = 0;\r\n        int lSum = 0;\r\n        int i = 0;\r\n        int j = 0;\r\n        int dif = 0;\r\n        for(i=0; i&lt;list.size(); i++){\r\n            for(j=0; j&lt;list.get(0).size(); j++){\r\n                if(i==j){\r\n                    lSum +=list.get(i).get(j);\r\n                }\r\n                if((i+j) == (list.get(0).size()-1)){\r\n                    rSum +=list.get(i).get(j);\r\n                }\r\n            }\r\n        }\r\n        \r\n        dif = Math.abs(rSum - lSum);\r\n        return dif;\r\n    }","title":"How to calculate the absolute difference between the sum of diagonals?","body":"<pre><code> public int diagonalDifferences(List&lt;List&lt;Integer&gt;&gt; list) {\n\n    int rSum = 0;\n    int lSum = 0;\n    int i = 0;\n    int j = 0;\n    int dif = 0;\n    for(i=0; i&lt;list.size(); i++){\n        for(j=0; j&lt;list.get(0).size(); j++){\n            if(i==j){\n                lSum +=list.get(i).get(j);\n            }\n            if((i+j) == (list.get(0).size()-1)){\n                rSum +=list.get(i).get(j);\n            }\n        }\n    }\n    \n    dif = Math.abs(rSum - lSum);\n    return dif;\n}\n</code></pre>\n"}],"owner":{"account_id":18044780,"reputation":39,"user_id":13116067,"display_name":"Shruthi Ravishankar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4723,"favorite_count":0,"down_vote_count":4,"up_vote_count":2,"answer_count":4,"score":-2,"last_activity_date":1661025619,"creation_date":1586354281,"question_id":61102495,"body_markdown":"Given a square matrix, calculate the absolute difference between the sums of its diagonals.\r\n\r\nFor example, the square matrix  is shown below:\r\n\r\n    1 2 3\r\n    4 5 6\r\n    9 8 9  \r\n\r\nThe left-to-right diagonal =15 . The right to left diagonal = 17. Their absolute difference is 2.\r\nPlease help with the code for Java.\r\n","title":"How to calculate the absolute difference between the sum of diagonals?","body":"<p>Given a square matrix, calculate the absolute difference between the sums of its diagonals.</p>\n\n<p>For example, the square matrix  is shown below:</p>\n\n<pre><code>1 2 3\n4 5 6\n9 8 9  \n</code></pre>\n\n<p>The left-to-right diagonal =15 . The right to left diagonal = 17. Their absolute difference is 2.\nPlease help with the code for Java.</p>\n"},{"tags":["java","jsp","tomcat","version","factory"],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661025429,"creation_date":1661025429,"answer_id":73429744,"question_id":73429340,"body_markdown":"Both your project and Tomcat 10 support Jakarta EE.\r\nThe javax.servlet package is part of Java EE. If you want that, modify your project and run on Tomcat 9.\r\n\r\nFrom https://tomcat.apache.org/whichversion.html:\r\n\r\n*Apache Tomcat 10.0.x builds on Tomcat 9.0.x and implements the Servlet 5.0, JSP 3.0, EL 4.0, WebSocket 2.0 and Authentication 2.0 specifications (the versions required by Jakarta EE 9 platform).\r\n \r\n[...]\r\n\r\nApache Tomcat 9.x builds on Tomcat 8.0.x and 8.5.x and implements the Servlet 4.0, JSP 2.3, EL 3.0, WebSocket 1.1 and JASPIC 1.1 specifications (the versions required by Java EE 8 platform).*","title":"Check jsp version with Tomcat","body":"<p>Both your project and Tomcat 10 support Jakarta EE.\nThe javax.servlet package is part of Java EE. If you want that, modify your project and run on Tomcat 9.</p>\n<p>From <a href=\"https://tomcat.apache.org/whichversion.html\" rel=\"nofollow noreferrer\">https://tomcat.apache.org/whichversion.html</a>:</p>\n<p>*Apache Tomcat 10.0.x builds on Tomcat 9.0.x and implements the Servlet 5.0, JSP 3.0, EL 4.0, WebSocket 2.0 and Authentication 2.0 specifications (the versions required by Jakarta EE 9 platform).</p>\n<p>[...]</p>\n<p>Apache Tomcat 9.x builds on Tomcat 8.0.x and 8.5.x and implements the Servlet 4.0, JSP 2.3, EL 3.0, WebSocket 1.1 and JASPIC 1.1 specifications (the versions required by Java EE 8 platform).*</p>\n"}],"owner":{"account_id":10051824,"reputation":1,"user_id":7431405,"display_name":"P. Gauthier"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":504,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1661025429,"creation_date":1661021664,"question_id":73429340,"body_markdown":"I wrote a jsp script to display Tomcat, Servlets and JSP versions.\r\nI am using Eclipse / STS 4.\r\n\r\nThis is my script :\r\n\r\n    &lt;%@page import=&quot;javax.servlet.jsp.*&quot; %&gt;\r\n    &lt;!DOCTYPE html&gt;\r\n    &lt;html&gt;\r\n    &lt;body&gt;\r\n       &lt;h2&gt;Hello World START !&lt;/h2&gt;\r\n       The current date is &lt;%=new java.util.Date() %&gt;\r\n    &lt;br&gt;\r\n    Tomcat Version : \r\n    &lt;%= application.getServerInfo() %&gt;&lt;br&gt;    \r\n    Servlet Specification Version : \r\n    &lt;%= application.getMajorVersion() %&gt;.&lt;%= application.getMinorVersion() %&gt; &lt;br&gt;    \r\n    JSP Version:\r\n    &lt;%= JspFactory.getDefaultFactory().getEngineInfo().getSpecificationVersion() %&gt;\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\nResult of the previous code is as follow :\r\n\r\n**Hello World START !&lt;br&gt;\r\nThe current date is Sun Aug 14 17:21:46 CEST 2022&lt;br&gt;\r\nTomcat Version : Apache Tomcat/10.0.21&lt;br&gt;\r\nServlet Specification Version : 5.0&lt;br&gt;\r\nJSP Version: 3.0 &lt;br&gt;**\r\n\r\nHowever, my code has two errors in my IDE :  \r\n\r\nline 1 : The import javax.servlet.jsp cannot be resolved.&lt;br&gt;\r\nline 14 : JspFactory cannot be resolved\r\n\r\nI used **pom.xml**\r\n  \r\n     &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;    \r\n  \r\n     &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; \r\n     xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n     xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org         \r\n     /xsd/maven-4.0.0.xsd&quot;&gt;\r\n     &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n      \r\n     &lt;groupId&gt;com.incvision.springwebflow&lt;/groupId&gt; \r\n      &lt;artifactId&gt;SpringWebFlowStart&lt;/artifactId&gt; \r\n      &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n      &lt;packaging&gt;war&lt;/packaging&gt;   \r\n\r\n      &lt;name&gt;SpringWebFlowStart Maven Webapp&lt;/name&gt;\r\n      &lt;!-- FIXME change it to the project&#39;s website --&gt;\r\n      &lt;url&gt;http://www.example.com&lt;/url&gt;\r\n\r\n      &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n      &lt;/properties&gt;\r\n    \r\n      &lt;dependencies&gt;\r\n \r\n        &lt;dependency&gt;\r\n    \t  &lt;groupId&gt;jakarta.servlet&lt;/groupId&gt;\r\n    \t  &lt;artifactId&gt;jakarta.servlet-api&lt;/artifactId&gt;\r\n    \t  &lt;version&gt;6.0.0&lt;/version&gt;\r\n    \t  &lt;scope&gt;provided&lt;/scope&gt;\r\n\t    &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;junit&lt;/groupId&gt;\r\n          &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n          &lt;version&gt;4.11&lt;/version&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n      &lt;/dependencies&gt;\r\n\r\n      &lt;build&gt;\r\n        &lt;finalName&gt;SpringWebFlowStart&lt;/finalName&gt;\r\n        &lt;pluginManagement&gt;\r\n        &lt;plugins&gt;\r\n          &lt;plugin&gt;\r\n            &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;3.1.0&lt;/version&gt;\r\n          &lt;/plugin&gt;\r\n          &lt;plugin&gt;\r\n            &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;3.0.2&lt;/version&gt;\r\n          &lt;/plugin&gt;\r\n          &lt;plugin&gt;\r\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;3.8.0&lt;/version&gt;\r\n          &lt;/plugin&gt;\r\n          &lt;plugin&gt;\r\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;2.22.1&lt;/version&gt;\r\n          &lt;/plugin&gt;\r\n          &lt;plugin&gt;\r\n            &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;3.2.2&lt;/version&gt;\r\n          &lt;/plugin&gt;\r\n          &lt;plugin&gt;\r\n            &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;2.5.2&lt;/version&gt;\r\n          &lt;/plugin&gt;\r\n          &lt;plugin&gt;\r\n            &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;2.8.2&lt;/version&gt;\r\n          &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n      &lt;/pluginManagement&gt;\r\n    &lt;/build&gt;\r\n&lt;/project&gt;\r\n\r\n\r\nHow to clean this code to remove indication error code in problems ? \r\n\r\nThanks.\r\n    ","title":"Check jsp version with Tomcat","body":"<p>I wrote a jsp script to display Tomcat, Servlets and JSP versions.\nI am using Eclipse / STS 4.</p>\n<p>This is my script :</p>\n<pre><code>&lt;%@page import=&quot;javax.servlet.jsp.*&quot; %&gt;\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;body&gt;\n   &lt;h2&gt;Hello World START !&lt;/h2&gt;\n   The current date is &lt;%=new java.util.Date() %&gt;\n&lt;br&gt;\nTomcat Version : \n&lt;%= application.getServerInfo() %&gt;&lt;br&gt;    \nServlet Specification Version : \n&lt;%= application.getMajorVersion() %&gt;.&lt;%= application.getMinorVersion() %&gt; &lt;br&gt;    \nJSP Version:\n&lt;%= JspFactory.getDefaultFactory().getEngineInfo().getSpecificationVersion() %&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>Result of the previous code is as follow :</p>\n<p><strong>Hello World START !<br>\nThe current date is Sun Aug 14 17:21:46 CEST 2022<br>\nTomcat Version : Apache Tomcat/10.0.21<br>\nServlet Specification Version : 5.0<br>\nJSP Version: 3.0 <br></strong></p>\n<p>However, my code has two errors in my IDE :</p>\n<p>line 1 : The import javax.servlet.jsp cannot be resolved.<br>\nline 14 : JspFactory cannot be resolved</p>\n<p>I used <strong>pom.xml</strong></p>\n<pre><code> &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;    \n\n &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; \n xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org         \n /xsd/maven-4.0.0.xsd&quot;&gt;\n &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  \n &lt;groupId&gt;com.incvision.springwebflow&lt;/groupId&gt; \n  &lt;artifactId&gt;SpringWebFlowStart&lt;/artifactId&gt; \n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;packaging&gt;war&lt;/packaging&gt;   \n\n  &lt;name&gt;SpringWebFlowStart Maven Webapp&lt;/name&gt;\n  &lt;!-- FIXME change it to the project's website --&gt;\n  &lt;url&gt;http://www.example.com&lt;/url&gt;\n\n  &lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n  &lt;/properties&gt;\n\n  &lt;dependencies&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;jakarta.servlet&lt;/groupId&gt;\n      &lt;artifactId&gt;jakarta.servlet-api&lt;/artifactId&gt;\n      &lt;version&gt;6.0.0&lt;/version&gt;\n      &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;4.11&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n  &lt;/dependencies&gt;\n\n  &lt;build&gt;\n    &lt;finalName&gt;SpringWebFlowStart&lt;/finalName&gt;\n    &lt;pluginManagement&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.1.0&lt;/version&gt;\n      &lt;/plugin&gt;\n      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.0.2&lt;/version&gt;\n      &lt;/plugin&gt;\n      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.8.0&lt;/version&gt;\n      &lt;/plugin&gt;\n      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n        &lt;version&gt;2.22.1&lt;/version&gt;\n      &lt;/plugin&gt;\n      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.2.2&lt;/version&gt;\n      &lt;/plugin&gt;\n      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\n        &lt;version&gt;2.5.2&lt;/version&gt;\n      &lt;/plugin&gt;\n      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\n        &lt;version&gt;2.8.2&lt;/version&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/pluginManagement&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p>How to clean this code to remove indication error code in problems ?</p>\n<p>Thanks.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8896,"page":1096,"page_size":100}
