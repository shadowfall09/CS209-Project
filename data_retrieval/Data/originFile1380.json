{"items":[{"tags":["java","rest","jsp","jpa"],"owner":{"account_id":20786927,"reputation":55,"user_id":19008388,"display_name":"BaselE"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1651585343,"creation_date":1651581898,"question_id":72099562,"body_markdown":"I have a jsp form (candEditQues) that reads DB content and the submit button runs a jpa method (/editAnswer) to update the DB content. However, when I click the submit button I get the\r\n\r\n&gt; Error 405 Method Not Allowed.\r\n\r\nwhat am I doing wrong? \r\n\r\nCndEditQues.jsp\r\n\r\n\t&lt;h1&gt;Candidate Questions Form&lt;/h1&gt;\r\n\t&lt;br&gt;\r\n\t&lt;form action=&#39;/rest/service/editAnswer&#39; method=&#39;post&#39;&gt;\r\n\t\t&lt;%-- &lt;input type=&quot;text&quot; name=&quot;candidate_id&quot;\r\n\t\t\tvalue=&quot;${sessionScope.LoggedUser.candidate_id}&quot;&gt; --%&gt;\r\n\t\t&lt;table&gt;\r\n\t\t\t&lt;tr&gt;\r\n\t\t\t\t&lt;td&gt;CandidateID&lt;/td&gt;\r\n\t\t\t\t&lt;td&gt;QuestionsID&lt;/td&gt;\r\n\t\t\t\t&lt;td&gt;Answers&lt;/td&gt;\r\n\r\n\r\n\t\t\t&lt;/tr&gt;\r\n\t\t\t&lt;c:forEach var=&quot;Vastaus&quot; items=&quot;${requestScope.Vastauslista}&quot;&gt;\r\n\t\t\t\t&lt;tr&gt;\r\n\t\t\t\t\t&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;candidate_id&quot;\r\n\t\t\t\t\t\tvalue=&quot;${sessionScope.LoggedUser.candidate_id}&quot; hidden&gt;${sessionScope.LoggedUser.candidate_id}&lt;/td&gt;\r\n\t\t\t\t\t&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;id${Vastaus.id}&quot;\r\n\t\t\t\t\t\tvalue=&quot;${Vastaus.id}&quot; hidden&gt;${Vastaus.id}&lt;/td&gt;\r\n\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\r\n\t\t\t\t\t&lt;td&gt;${Vastaus.vastaus}&lt;/td&gt;\r\n\t\t\t\t\t&lt;td&gt;${Vastaus.kommentti}&lt;/td&gt;\r\n\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\r\n\t\t\t\t\t&lt;td&gt;&lt;input type=&quot;radio&quot; id=&quot;q1${Vastaus.id}&quot;\r\n\t\t\t\t\t\tname=&quot;vastaus${Vastaus.id}&quot; value=&quot;1&quot;&gt; &lt;label\r\n\t\t\t\t\t\tfor=&quot;q1${Vastaus.id}&quot;&gt;1&lt;/label&gt;&lt;br&gt;&lt;/td&gt;\r\n\r\n\t\t\t\t\t&lt;td&gt;&lt;input type=&quot;radio&quot; id=&quot;q2${Vastaus.id}&quot;\r\n\t\t\t\t\t\tname=&quot;vastaus${Vastaus.id}&quot; value=&quot;2&quot;&gt; &lt;label\r\n\t\t\t\t\t\tfor=&quot;q2${Vastaus.id}&quot;&gt;2&lt;/label&gt;&lt;br&gt;&lt;/td&gt;\r\n\r\n\t\t\t\t\t&lt;td&gt;&lt;input type=&quot;radio&quot; id=&quot;q3${Vastaus.id}&quot;\r\n\t\t\t\t\t\tname=&quot;vastaus${Vastaus.id}&quot; value=&quot;3&quot;&gt; &lt;label\r\n\t\t\t\t\t\tfor=&quot;q3${Vastaus.id}&quot;&gt;3&lt;/label&gt;&lt;br&gt;&lt;/td&gt;\r\n\r\n\t\t\t\t\t&lt;td&gt;&lt;input type=&quot;radio&quot; id=&quot;q4${Vastaus.id}&quot;\r\n\t\t\t\t\t\tname=&quot;vastaus${Vastaus.id}&quot; value=&quot;4&quot;&gt; &lt;label\r\n\t\t\t\t\t\tfor=&quot;q4${Vastaus.id}&quot;&gt;4&lt;/label&gt;&lt;br&gt;&lt;/td&gt;\r\n\r\n\t\t\t\t\t&lt;td&gt;&lt;input type=&quot;radio&quot; id=&quot;q5${Vastaus.id}&quot;\r\n\t\t\t\t\t\tname=&quot;vastaus${Vastaus.id}&quot; value=&quot;5&quot;&gt; &lt;label\r\n\t\t\t\t\t\tfor=&quot;q5${Vastaus.id}&quot;&gt;5&lt;/label&gt;&lt;br&gt;&lt;/td&gt;\r\n\r\n\t\t\t\t\t&lt;td&gt;&lt;input type=&quot;text&quot; id=&quot;kommentti${Vastaus.id}&quot;\r\n\t\t\t\t\t\tname=&quot;kommentti${Vastaus.id}&quot; placeholder=&quot;Add an Explanation&quot;&gt;\r\n\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\r\n\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\r\n\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\r\n\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\r\n\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\r\n\t\t\t\t&lt;/tr&gt;\r\n\t\t\t&lt;/c:forEach&gt;\r\n\t\t&lt;/table&gt;\r\n\r\n\t\t&lt;br&gt; &lt;br&gt;\r\n\t\t&lt;table&gt;\r\n\t\t\t&lt;tr&gt;\r\n\t\t\t\t&lt;td&gt;&lt;input type=&#39;submit&#39; name=&#39;ok&#39; value=&#39;Update&#39;\r\n\t\t\t\t\tstyle=&quot;font-size: 30px&quot;&gt;&lt;/td&gt;\r\n\t\t\t\t&lt;td&gt;&lt;input style=&quot;font-size: 30px;&quot; type=&#39;reset&#39;\r\n\t\t\t\t\tname=&#39;reset&#39; value=&#39;Reset&#39; id=&quot;button2&quot;&gt;&lt;/td&gt;\r\n\t\t\t\t&lt;td&gt;&lt;input style=&#39;font-size: 30px&#39; type=&#39;button&#39;\r\n\t\t\t\t\tname=&#39;cancel&#39; value=&#39;Cancel&#39; onclick=&#39;window.history.back()&#39;&gt;&lt;/td&gt;\r\n\r\n\t\t\t&lt;/tr&gt;\r\n\t\t&lt;/table&gt;\r\n\t&lt;/form&gt;\r\n\r\nService.java:\r\n\r\n    ..code\r\n    @PUT\r\n    \t@Path(&quot;/editAnswer&quot;)\r\n    //\t@Produces(MediaType.TEXT_HTML)\r\n    //\t@Produces(MediaType.APPLICATION_JSON)\r\n    //\t@Consumes(MediaType.APPLICATION_JSON)\r\n    \t@Consumes(&quot;application/x-www-form-urlencoded&quot;)\r\n    \tpublic void editAnswer(MultivaluedMap&lt;String, String&gt; fp, @Context HttpServletRequest request,\r\n    \t\t\t@Context HttpServletResponse response) throws IOException, ServletException {\r\n    \r\n    \t\tEntityManagerFactory emf = Persistence.createEntityManagerFactory(&quot;electionMachine&quot;);\r\n    \t\tEntityManager em = emf.createEntityManager();\r\n    \r\n    \t\ttry {\r\n    \r\n    \t\t\tfor (int i = 1; i &lt; fp.keySet().size(); i++) {\r\n    \r\n    \t\t\t\tint vastaus = Integer.parseInt(fp.getFirst(&quot;vastaus&quot; + i));\r\n    \t\t\t\tString kommentti = fp.getFirst(&quot;kommentti&quot; + i);\r\n    \r\n    \t\t\t\tint candidate_id = Integer.parseInt(fp.getFirst(&quot;candidate_id&quot;));\r\n    \t\t\t\tint kysymys_ID = Integer.parseInt(fp.getFirst(&quot;kysymys_ID&quot; + i));\r\n    \r\n    \t\t\t\tSystem.out.println(&quot;     &quot; + kommentti + &quot;    &quot; + vastaus + &quot;   &quot; + candidate_id + &quot;    &quot; + kysymys_ID);\r\n    \r\n    \t\t\t\tVastaukset vas = new Vastaukset(kommentti, vastaus, candidate_id, kysymys_ID);\r\n    \r\n    \t\t\t\tCandidate ca = new Candidate();\r\n    \t\t\t\tca.setCandidate_id(candidate_id);\r\n    \t\t\t\tvas.setCandidate(ca);\r\n    \r\n    \t\t\t\tKysymykset k = new Kysymykset();\r\n    \t\t\t\tk.setKysymys_ID(kysymys_ID);\r\n    \t\t\t\tvas.setKysymykset(k);\r\n    \r\n    \t\t\t\tem.getTransaction().begin();\r\n    \t\t\t\tca = em.find(Candidate.class, candidate_id);\r\n    \t\t\t\tk = em.find(Kysymykset.class, kysymys_ID);\r\n    \t\t\t\tvas = em.find(Vastaukset.class, kommentti);\r\n    \t\t\t\tvas = em.find(Vastaukset.class, vastaus);\r\n    \t\t\t\tvas = em.find(Vastaukset.class, candidate_id);\r\n    \t\t\t\tvas = em.find(Vastaukset.class, kysymys_ID);\r\n    \r\n    \t\t\t\tSystem.out.println(&quot;check 1&quot;);\r\n    \t\t\t\tif (vas != null) {\r\n    \r\n    \t\t\t\t\tem.merge(vas);\r\n    \t\t\t\t\tSystem.out.println(&quot;check 2&quot;);\r\n    \t\t\t\t\tem.getTransaction().commit();\r\n    \t\t\t\t\tSystem.out.println(&quot;check final&quot;);\r\n    \t\t\t\t}\r\n    \r\n    \t\t\t}\r\n    \t\t\tem.close();\r\n    \t\t} catch (Exception e) {\r\n    \t\t\t// TODO Auto-generated catch block\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \r\n    \t}\r\n\r\n\r\nIf more code is needed to help find the problem please let me know. And please bare with me as I am a beginner.","title":"How to edit data in database using JPA?","body":"<p>I have a jsp form (candEditQues) that reads DB content and the submit button runs a jpa method (/editAnswer) to update the DB content. However, when I click the submit button I get the</p>\n<blockquote>\n<p>Error 405 Method Not Allowed.</p>\n</blockquote>\n<p>what am I doing wrong?</p>\n<p>CndEditQues.jsp</p>\n<pre><code>&lt;h1&gt;Candidate Questions Form&lt;/h1&gt;\n&lt;br&gt;\n&lt;form action='/rest/service/editAnswer' method='post'&gt;\n    &lt;%-- &lt;input type=&quot;text&quot; name=&quot;candidate_id&quot;\n        value=&quot;${sessionScope.LoggedUser.candidate_id}&quot;&gt; --%&gt;\n    &lt;table&gt;\n        &lt;tr&gt;\n            &lt;td&gt;CandidateID&lt;/td&gt;\n            &lt;td&gt;QuestionsID&lt;/td&gt;\n            &lt;td&gt;Answers&lt;/td&gt;\n\n\n        &lt;/tr&gt;\n        &lt;c:forEach var=&quot;Vastaus&quot; items=&quot;${requestScope.Vastauslista}&quot;&gt;\n            &lt;tr&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;candidate_id&quot;\n                    value=&quot;${sessionScope.LoggedUser.candidate_id}&quot; hidden&gt;${sessionScope.LoggedUser.candidate_id}&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;id${Vastaus.id}&quot;\n                    value=&quot;${Vastaus.id}&quot; hidden&gt;${Vastaus.id}&lt;/td&gt;\n                &lt;td&gt;&lt;/td&gt;\n                &lt;td&gt;${Vastaus.vastaus}&lt;/td&gt;\n                &lt;td&gt;${Vastaus.kommentti}&lt;/td&gt;\n                &lt;td&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;radio&quot; id=&quot;q1${Vastaus.id}&quot;\n                    name=&quot;vastaus${Vastaus.id}&quot; value=&quot;1&quot;&gt; &lt;label\n                    for=&quot;q1${Vastaus.id}&quot;&gt;1&lt;/label&gt;&lt;br&gt;&lt;/td&gt;\n\n                &lt;td&gt;&lt;input type=&quot;radio&quot; id=&quot;q2${Vastaus.id}&quot;\n                    name=&quot;vastaus${Vastaus.id}&quot; value=&quot;2&quot;&gt; &lt;label\n                    for=&quot;q2${Vastaus.id}&quot;&gt;2&lt;/label&gt;&lt;br&gt;&lt;/td&gt;\n\n                &lt;td&gt;&lt;input type=&quot;radio&quot; id=&quot;q3${Vastaus.id}&quot;\n                    name=&quot;vastaus${Vastaus.id}&quot; value=&quot;3&quot;&gt; &lt;label\n                    for=&quot;q3${Vastaus.id}&quot;&gt;3&lt;/label&gt;&lt;br&gt;&lt;/td&gt;\n\n                &lt;td&gt;&lt;input type=&quot;radio&quot; id=&quot;q4${Vastaus.id}&quot;\n                    name=&quot;vastaus${Vastaus.id}&quot; value=&quot;4&quot;&gt; &lt;label\n                    for=&quot;q4${Vastaus.id}&quot;&gt;4&lt;/label&gt;&lt;br&gt;&lt;/td&gt;\n\n                &lt;td&gt;&lt;input type=&quot;radio&quot; id=&quot;q5${Vastaus.id}&quot;\n                    name=&quot;vastaus${Vastaus.id}&quot; value=&quot;5&quot;&gt; &lt;label\n                    for=&quot;q5${Vastaus.id}&quot;&gt;5&lt;/label&gt;&lt;br&gt;&lt;/td&gt;\n\n                &lt;td&gt;&lt;input type=&quot;text&quot; id=&quot;kommentti${Vastaus.id}&quot;\n                    name=&quot;kommentti${Vastaus.id}&quot; placeholder=&quot;Add an Explanation&quot;&gt;\n                &lt;td&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n        &lt;/c:forEach&gt;\n    &lt;/table&gt;\n\n    &lt;br&gt; &lt;br&gt;\n    &lt;table&gt;\n        &lt;tr&gt;\n            &lt;td&gt;&lt;input type='submit' name='ok' value='Update'\n                style=&quot;font-size: 30px&quot;&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;input style=&quot;font-size: 30px;&quot; type='reset'\n                name='reset' value='Reset' id=&quot;button2&quot;&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;input style='font-size: 30px' type='button'\n                name='cancel' value='Cancel' onclick='window.history.back()'&gt;&lt;/td&gt;\n\n        &lt;/tr&gt;\n    &lt;/table&gt;\n&lt;/form&gt;\n</code></pre>\n<p>Service.java:</p>\n<pre><code>..code\n@PUT\n    @Path(&quot;/editAnswer&quot;)\n//  @Produces(MediaType.TEXT_HTML)\n//  @Produces(MediaType.APPLICATION_JSON)\n//  @Consumes(MediaType.APPLICATION_JSON)\n    @Consumes(&quot;application/x-www-form-urlencoded&quot;)\n    public void editAnswer(MultivaluedMap&lt;String, String&gt; fp, @Context HttpServletRequest request,\n            @Context HttpServletResponse response) throws IOException, ServletException {\n\n        EntityManagerFactory emf = Persistence.createEntityManagerFactory(&quot;electionMachine&quot;);\n        EntityManager em = emf.createEntityManager();\n\n        try {\n\n            for (int i = 1; i &lt; fp.keySet().size(); i++) {\n\n                int vastaus = Integer.parseInt(fp.getFirst(&quot;vastaus&quot; + i));\n                String kommentti = fp.getFirst(&quot;kommentti&quot; + i);\n\n                int candidate_id = Integer.parseInt(fp.getFirst(&quot;candidate_id&quot;));\n                int kysymys_ID = Integer.parseInt(fp.getFirst(&quot;kysymys_ID&quot; + i));\n\n                System.out.println(&quot;     &quot; + kommentti + &quot;    &quot; + vastaus + &quot;   &quot; + candidate_id + &quot;    &quot; + kysymys_ID);\n\n                Vastaukset vas = new Vastaukset(kommentti, vastaus, candidate_id, kysymys_ID);\n\n                Candidate ca = new Candidate();\n                ca.setCandidate_id(candidate_id);\n                vas.setCandidate(ca);\n\n                Kysymykset k = new Kysymykset();\n                k.setKysymys_ID(kysymys_ID);\n                vas.setKysymykset(k);\n\n                em.getTransaction().begin();\n                ca = em.find(Candidate.class, candidate_id);\n                k = em.find(Kysymykset.class, kysymys_ID);\n                vas = em.find(Vastaukset.class, kommentti);\n                vas = em.find(Vastaukset.class, vastaus);\n                vas = em.find(Vastaukset.class, candidate_id);\n                vas = em.find(Vastaukset.class, kysymys_ID);\n\n                System.out.println(&quot;check 1&quot;);\n                if (vas != null) {\n\n                    em.merge(vas);\n                    System.out.println(&quot;check 2&quot;);\n                    em.getTransaction().commit();\n                    System.out.println(&quot;check final&quot;);\n                }\n\n            }\n            em.close();\n        } catch (Exception e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n\n    }\n</code></pre>\n<p>If more code is needed to help find the problem please let me know. And please bare with me as I am a beginner.</p>\n"},{"tags":["java","mysql","hibernate"],"comments":[{"owner":{"account_id":20906134,"reputation":483,"user_id":15358022,"display_name":"Dawson Smith"},"score":0,"creation_date":1651593717,"post_id":72100103,"comment_id":127397938,"body_markdown":"@Ivan can you help me out with this?","body":"@Ivan can you help me out with this?"},{"owner":{"account_id":12223265,"reputation":8608,"user_id":8921755,"display_name":"Ivan"},"score":0,"creation_date":1651599883,"post_id":72100103,"comment_id":127400229,"body_markdown":"could you please add code you tried to the question? You can also try to search over Stackoverflow, possibly this can help you https://stackoverflow.com/questions/41982998/hibernate-criteriabuilder-to-join-multiple-tables. Bt again without seeing your code it is impossible to know what you already tried and what hasn&#39;t worked for you.","body":"could you please add code you tried to the question? You can also try to search over Stackoverflow, possibly this can help you <a href=\"https://stackoverflow.com/questions/41982998/hibernate-criteriabuilder-to-join-multiple-tables\" title=\"hibernate criteriabuilder to join multiple tables\">stackoverflow.com/questions/41982998/&hellip;</a>. Bt again without seeing your code it is impossible to know what you already tried and what hasn&#39;t worked for you."}],"owner":{"account_id":20906134,"reputation":483,"user_id":15358022,"display_name":"Dawson Smith"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1651585276,"creation_date":1651584327,"question_id":72100103,"body_markdown":"I have the following two tables:\r\n```\r\nTable name - Cake\r\n-----------------------------\r\nId  | CakeType   |CakeState |\r\n1   | Large      |Cooked    |\r\n2   | Small      |Uncooked  |\r\n----------------------------\r\n\r\nTable name - Cake Feature\r\n--------------------------------------------------\r\nId  | FeatureType    | FeatureValue       | CakeId|\r\n1   | Flavour        | Chocolate          | 1     |\r\n2   | Icing          | Whipped            | 1     |\r\n3   | Maker          | John               | 1     |\r\n4   | Flavour        | Orange             | 2     |\r\n5   | Icing          | Cream Cheese       | 2     |\r\n6   | Maker          | Mark               | 2     |\r\n--------------------------------------------------\r\n\r\n```\r\nThe queries on this table will be based on the following conditions:\r\n\r\n1. Get all the Cakes based on the input Flavour and Icing. Flavour and Icing will always be present in the input. So I&#39;ll need to perform a join on the above two tables and specify the FeatureType (which can be Flavour or Icing) and the FeatureValue.\r\n2. The other conditions can be the CakeType and CakeState. But these conditions are optional, and a null pointer check will be required for them.\r\n\r\nCan somebody help me in writing the JAVA/Hibernate function for this? I am trying to use CriteriaBuilder and Hibernate Joins&lt;&gt; for this, but am unable to construct a query. \r\nThe output will be **List&lt;Cake&gt;**","title":"Construct complex SQL query using hibernate criteria builder and join&lt;&gt; techniques","body":"<p>I have the following two tables:</p>\n<pre><code>Table name - Cake\n-----------------------------\nId  | CakeType   |CakeState |\n1   | Large      |Cooked    |\n2   | Small      |Uncooked  |\n----------------------------\n\nTable name - Cake Feature\n--------------------------------------------------\nId  | FeatureType    | FeatureValue       | CakeId|\n1   | Flavour        | Chocolate          | 1     |\n2   | Icing          | Whipped            | 1     |\n3   | Maker          | John               | 1     |\n4   | Flavour        | Orange             | 2     |\n5   | Icing          | Cream Cheese       | 2     |\n6   | Maker          | Mark               | 2     |\n--------------------------------------------------\n\n</code></pre>\n<p>The queries on this table will be based on the following conditions:</p>\n<ol>\n<li>Get all the Cakes based on the input Flavour and Icing. Flavour and Icing will always be present in the input. So I'll need to perform a join on the above two tables and specify the FeatureType (which can be Flavour or Icing) and the FeatureValue.</li>\n<li>The other conditions can be the CakeType and CakeState. But these conditions are optional, and a null pointer check will be required for them.</li>\n</ol>\n<p>Can somebody help me in writing the JAVA/Hibernate function for this? I am trying to use CriteriaBuilder and Hibernate Joins&lt;&gt; for this, but am unable to construct a query.\nThe output will be <strong>List</strong></p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":24357463,"reputation":321,"user_id":18292391,"display_name":"mrOlympia"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651585048,"creation_date":1651585048,"answer_id":72100264,"question_id":72099926,"body_markdown":"Here is what I done to get this working.\r\n\r\n``` \r\ntry {\r\n\r\n                        Android model = Android.newInstance(getApplicationContext());\r\n\r\n                        // Creates inputs for reference.\r\n                        TensorImage image = TensorImage.fromBitmap(img);\r\n\r\n                        // Runs model inference and gets result.\r\n                        Android.Outputs outputs = model.process(image);\r\n                        Android.DetectionResult detectionResult = outputs.getDetectionResultList().get(0);\r\n\r\n                        // Gets result from DetectionResult.\r\n                        float score = detectionResult.getScoreAsFloat();\r\n                        RectF location = detectionResult.getLocationAsRectF();\r\n                        String category = detectionResult.getCategoryAsString();\r\n                        //Create a new canvas to draw on\r\n                        Canvas canvas = new Canvas(img);\r\n                        //draw on the canvas with the given location from the model\r\n                        drawBoundingBox(canvas, location);\r\n                        // Releases model resources if no longer used.\r\n                        model.close();\r\n                        // here we will print out the results of the object to text views based on the image that is inputted by the user\r\n                        // we print out object type, accuracy score and location of object on the image\r\n\r\n                        objecttv.setText(category);\r\n                        scoretv.setText(Float.toString(score));\r\n                        textBox.setText(newText);\r\n                        imageBox.setImageBitmap(img);\r\n\r\n                    }\r\n```\r\n\r\n```\r\nvoid drawBoundingBox(Canvas canvas, RectF location) {\r\n        // Draw what you want\r\n        Paint boxPaint = new Paint();\r\n        boxPaint.setColor(Color.RED);\r\n        boxPaint.setAlpha(200);\r\n        boxPaint.setStyle(Paint.Style.STROKE);\r\n        canvas.drawRect(location, boxPaint);\r\n    }\r\n```\r\n","title":"Java - Save newly drawn canvas to bitmap and display back in imageView","body":"<p>Here is what I done to get this working.</p>\n<pre><code>try {\n\n                        Android model = Android.newInstance(getApplicationContext());\n\n                        // Creates inputs for reference.\n                        TensorImage image = TensorImage.fromBitmap(img);\n\n                        // Runs model inference and gets result.\n                        Android.Outputs outputs = model.process(image);\n                        Android.DetectionResult detectionResult = outputs.getDetectionResultList().get(0);\n\n                        // Gets result from DetectionResult.\n                        float score = detectionResult.getScoreAsFloat();\n                        RectF location = detectionResult.getLocationAsRectF();\n                        String category = detectionResult.getCategoryAsString();\n                        //Create a new canvas to draw on\n                        Canvas canvas = new Canvas(img);\n                        //draw on the canvas with the given location from the model\n                        drawBoundingBox(canvas, location);\n                        // Releases model resources if no longer used.\n                        model.close();\n                        // here we will print out the results of the object to text views based on the image that is inputted by the user\n                        // we print out object type, accuracy score and location of object on the image\n\n                        objecttv.setText(category);\n                        scoretv.setText(Float.toString(score));\n                        textBox.setText(newText);\n                        imageBox.setImageBitmap(img);\n\n                    }\n</code></pre>\n<pre><code>void drawBoundingBox(Canvas canvas, RectF location) {\n        // Draw what you want\n        Paint boxPaint = new Paint();\n        boxPaint.setColor(Color.RED);\n        boxPaint.setAlpha(200);\n        boxPaint.setStyle(Paint.Style.STROKE);\n        canvas.drawRect(location, boxPaint);\n    }\n</code></pre>\n"}],"owner":{"account_id":24357463,"reputation":321,"user_id":18292391,"display_name":"mrOlympia"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1651585048,"creation_date":1651583540,"question_id":72099926,"body_markdown":"I have this code where I am receiving RectF coordinates based on detecting an object from where the user has uploaded an image.\r\n\r\n``` \r\nimg = Bitmap.createScaledBitmap(img, 128, 128, true);\r\n                    try {\r\n\r\n                        Android model = Android.newInstance(getApplicationContext());\r\n\r\n                        // Creates inputs for reference.\r\n                        TensorImage image = TensorImage.fromBitmap(img);\r\n\r\n                        // Runs model inference and gets result.\r\n                        Android.Outputs outputs = model.process(image);\r\n                        Android.DetectionResult detectionResult = outputs.getDetectionResultList().get(0);\r\n\r\n                        // Gets result from DetectionResult.\r\n                        float score = detectionResult.getScoreAsFloat();\r\n                        RectF location = detectionResult.getLocationAsRectF();\r\n                        String category = detectionResult.getCategoryAsString();\r\n\r\n                        // Releases model resources if no longer used.\r\n                        model.close();\r\n                        // here we will print out the results of the object to text views based on the image that is inputted by the user\r\n                        // we print out object type and its accuracy score\r\n                        objecttv.setText(category);\r\n                        scoretv.setText(Float.toString(score));\r\n                        textBox.setText(newText);\r\n\r\n\r\n                        boxPaint.setColor(Color.RED);\r\n                        boxPaint.setAlpha(200);\r\n                        boxPaint.setStyle(Paint.Style.STROKE);\r\n                       // here I am trying to create a new canvas to draw on with the location provided by the model and then save that back to a bitmap to display back with the newly drawn rectangle.\r\n\r\n                        Canvas canvas = new Canvas(img);\r\n                        canvas.drawRect(location,boxPaint);\r\n\r\n                       \r\n                        imageBox.setImageBitmap(img);\r\n                    }\r\n```\r\n\r\nThis is clearly wrong as I am receiving a `java.lang.NullPointerException: Attempt to invoke virtual method &#39;void android.graphics.Paint.setColor(int)&#39; on a null object reference `\r\n\r\nWhat way can I modify it to draw the newly created rectangle on the original image and display it back into my imageView? ","title":"Java - Save newly drawn canvas to bitmap and display back in imageView","body":"<p>I have this code where I am receiving RectF coordinates based on detecting an object from where the user has uploaded an image.</p>\n<pre><code>img = Bitmap.createScaledBitmap(img, 128, 128, true);\n                    try {\n\n                        Android model = Android.newInstance(getApplicationContext());\n\n                        // Creates inputs for reference.\n                        TensorImage image = TensorImage.fromBitmap(img);\n\n                        // Runs model inference and gets result.\n                        Android.Outputs outputs = model.process(image);\n                        Android.DetectionResult detectionResult = outputs.getDetectionResultList().get(0);\n\n                        // Gets result from DetectionResult.\n                        float score = detectionResult.getScoreAsFloat();\n                        RectF location = detectionResult.getLocationAsRectF();\n                        String category = detectionResult.getCategoryAsString();\n\n                        // Releases model resources if no longer used.\n                        model.close();\n                        // here we will print out the results of the object to text views based on the image that is inputted by the user\n                        // we print out object type and its accuracy score\n                        objecttv.setText(category);\n                        scoretv.setText(Float.toString(score));\n                        textBox.setText(newText);\n\n\n                        boxPaint.setColor(Color.RED);\n                        boxPaint.setAlpha(200);\n                        boxPaint.setStyle(Paint.Style.STROKE);\n                       // here I am trying to create a new canvas to draw on with the location provided by the model and then save that back to a bitmap to display back with the newly drawn rectangle.\n\n                        Canvas canvas = new Canvas(img);\n                        canvas.drawRect(location,boxPaint);\n\n                       \n                        imageBox.setImageBitmap(img);\n                    }\n</code></pre>\n<p>This is clearly wrong as I am receiving a <code>java.lang.NullPointerException: Attempt to invoke virtual method 'void android.graphics.Paint.setColor(int)' on a null object reference </code></p>\n<p>What way can I modify it to draw the newly created rectangle on the original image and display it back into my imageView?</p>\n"},{"tags":["java","arrays","hashmap","java-stream","collectors"],"answers":[{"tags":[],"owner":{"account_id":25179625,"reputation":19,"user_id":19021281,"display_name":"Tarek Salah"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651557493,"creation_date":1651557493,"answer_id":72095312,"question_id":72095187,"body_markdown":"You can loop through your array and for every character you can check if this key is saved before in your map, if yes just push the corresponding character to the list of that repeated key","title":"How can I collect two-dimensional Array into a Map&lt;String, Set&lt;String&gt;&gt;?","body":"<p>You can loop through your array and for every character you can check if this key is saved before in your map, if yes just push the corresponding character to the list of that repeated key</p>\n"},{"tags":[],"owner":{"account_id":16429226,"reputation":1519,"user_id":11868502,"display_name":"Saurabh Dhage"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1651558700,"creation_date":1651557581,"answer_id":72095330,"question_id":72095187,"body_markdown":"**You can simply do this by using for-each loop**\r\n\r\n       Map&lt;String, Set&lt;String&gt;&gt; map=new HashMap&lt;&gt;();\r\n       for(String []arr : array){\r\n         Set&lt;String&gt; set = map.getOrDefault(arr[0], new HashSet&lt;&gt;());\r\n         set.add(arr[1]);\r\n         map.put(arr[0],set);\r\n       }\r\n       System.out.println(map);\r\n     \r\n**Output :**\r\n\r\n`{a=[1, 2], b=[3]}`\r\n","title":"How can I collect two-dimensional Array into a Map&lt;String, Set&lt;String&gt;&gt;?","body":"<p><strong>You can simply do this by using for-each loop</strong></p>\n<pre><code>   Map&lt;String, Set&lt;String&gt;&gt; map=new HashMap&lt;&gt;();\n   for(String []arr : array){\n     Set&lt;String&gt; set = map.getOrDefault(arr[0], new HashSet&lt;&gt;());\n     set.add(arr[1]);\n     map.put(arr[0],set);\n   }\n   System.out.println(map);\n \n</code></pre>\n<p><strong>Output :</strong></p>\n<p><code>{a=[1, 2], b=[3]}</code></p>\n"},{"tags":[],"owner":{"account_id":9725613,"reputation":53334,"user_id":7212686,"accept_rate":100,"display_name":"azro"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1651557617,"creation_date":1651557617,"answer_id":72095335,"question_id":72095187,"body_markdown":"You need a `Collectors.mapping` (also you don&#39;t need to specify `String[]` inside)\r\n\r\n    var array = new String[][]{{&quot;a&quot;, &quot;1&quot;}, {&quot;a&quot;, &quot;2&quot;}, {&quot;b&quot;, &quot;3&quot;},};\r\n\r\n    Map&lt;String, Set&lt;String&gt;&gt; res = Arrays.stream(array).collect(Collectors.groupingBy(\r\n            a -&gt; a[0],\r\n            Collectors.mapping(a -&gt; a[1], Collectors.toSet())\r\n    ));\r\n\r\n    System.out.println(res); // {a=[1, 2], b=[3]}\r\n\r\n","title":"How can I collect two-dimensional Array into a Map&lt;String, Set&lt;String&gt;&gt;?","body":"<p>You need a <code>Collectors.mapping</code> (also you don't need to specify <code>String[]</code> inside)</p>\n<pre><code>var array = new String[][]{{&quot;a&quot;, &quot;1&quot;}, {&quot;a&quot;, &quot;2&quot;}, {&quot;b&quot;, &quot;3&quot;},};\n\nMap&lt;String, Set&lt;String&gt;&gt; res = Arrays.stream(array).collect(Collectors.groupingBy(\n        a -&gt; a[0],\n        Collectors.mapping(a -&gt; a[1], Collectors.toSet())\n));\n\nSystem.out.println(res); // {a=[1, 2], b=[3]}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7595189,"reputation":44576,"user_id":5761558,"display_name":"ernest_k"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1651557709,"creation_date":1651557709,"answer_id":72095344,"question_id":72095187,"body_markdown":"You can use `Collectors.mapping()` with a `toSet()` downstream:\r\n\r\n    Collectors.groupingBy(a -&gt; a[0],\r\n\t\tCollectors.mapping(v -&gt; v[1], Collectors.toSet()))\r\n\r\nWhich produces `{a=[1, 2], b=[3]}`. That first maps stream elements to the array&#39;s second element, then collects those as a set mapped to the group key.","title":"How can I collect two-dimensional Array into a Map&lt;String, Set&lt;String&gt;&gt;?","body":"<p>You can use <code>Collectors.mapping()</code> with a <code>toSet()</code> downstream:</p>\n<pre><code>Collectors.groupingBy(a -&gt; a[0],\n    Collectors.mapping(v -&gt; v[1], Collectors.toSet()))\n</code></pre>\n<p>Which produces <code>{a=[1, 2], b=[3]}</code>. That first maps stream elements to the array's second element, then collects those as a set mapped to the group key.</p>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1651558468,"creation_date":1651557711,"answer_id":72095346,"question_id":72095187,"body_markdown":"Use `Collectors.groupingBy` in conjuction with `Collectors.mapping()`.\r\n\r\n    public static void main(String[] args) {\r\n        var array = new String[][]{\r\n            {&quot;a&quot;, &quot;1&quot;},\r\n            {&quot;a&quot;, &quot;2&quot;},\r\n            {&quot;b&quot;, &quot;3&quot;}\r\n        };\r\n    \r\n        Map&lt;String, Set&lt;String&gt;&gt; result =\r\n            Stream.of(array)\r\n                .collect(Collectors.groupingBy(arr -&gt; arr[0],\r\n                    Collectors.mapping(arr -&gt; arr[1],\r\n                        Collectors.toSet())));\r\n    \r\n        System.out.println(result);\r\n    }\r\n\r\nAnother way of doing this is to utilize `Collector.of()`:\r\n```\r\nMap&lt;String, Set&lt;String&gt;&gt; result =\r\n    Stream.of(array)\r\n        .collect(Collector.of(\r\n            HashMap::new,\r\n            (Map&lt;String, Set&lt;String&gt;&gt; map, String[] arr) -&gt;\r\n                map.computeIfAbsent(arr[0], k -&gt; new HashSet&lt;&gt;()).add(arr[1]),\r\n            (Map&lt;String, Set&lt;String&gt;&gt; left, Map&lt;String, Set&lt;String&gt;&gt; right) -&gt;\r\n                { left.putAll(right); return left; }));\r\n```\r\n\r\n**Output**\r\n```\r\n{a=[1, 2], b=[3]}\r\n```","title":"How can I collect two-dimensional Array into a Map&lt;String, Set&lt;String&gt;&gt;?","body":"<p>Use <code>Collectors.groupingBy</code> in conjuction with <code>Collectors.mapping()</code>.</p>\n<pre><code>public static void main(String[] args) {\n    var array = new String[][]{\n        {&quot;a&quot;, &quot;1&quot;},\n        {&quot;a&quot;, &quot;2&quot;},\n        {&quot;b&quot;, &quot;3&quot;}\n    };\n\n    Map&lt;String, Set&lt;String&gt;&gt; result =\n        Stream.of(array)\n            .collect(Collectors.groupingBy(arr -&gt; arr[0],\n                Collectors.mapping(arr -&gt; arr[1],\n                    Collectors.toSet())));\n\n    System.out.println(result);\n}\n</code></pre>\n<p>Another way of doing this is to utilize <code>Collector.of()</code>:</p>\n<pre><code>Map&lt;String, Set&lt;String&gt;&gt; result =\n    Stream.of(array)\n        .collect(Collector.of(\n            HashMap::new,\n            (Map&lt;String, Set&lt;String&gt;&gt; map, String[] arr) -&gt;\n                map.computeIfAbsent(arr[0], k -&gt; new HashSet&lt;&gt;()).add(arr[1]),\n            (Map&lt;String, Set&lt;String&gt;&gt; left, Map&lt;String, Set&lt;String&gt;&gt; right) -&gt;\n                { left.putAll(right); return left; }));\n</code></pre>\n<p><strong>Output</strong></p>\n<pre><code>{a=[1, 2], b=[3]}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1651559170,"creation_date":1651559170,"answer_id":72095522,"question_id":72095187,"body_markdown":"Instead of `Collectors.groupingBy`, you could use `Collectors.toMap`.\r\n```\r\npublic class Main {\r\n\r\n  public static void main(String[] args) throws Exception {\r\n    String[][] array = new String[][]{{&quot;a&quot;, &quot;1&quot;}, {&quot;a&quot;, &quot;2&quot;}, {&quot;b&quot;, &quot;3&quot;}};\r\n    Map&lt;String, Set&lt;String&gt;&gt; map = Arrays.stream(array).collect(Collectors.toMap(\r\n            arr -&gt; arr[0],\r\n            arr -&gt; new HashSet&lt;&gt;(Collections.singleton(arr[1])),\r\n            (l, r) -&gt; {\r\n              l.addAll(r);\r\n              return l;\r\n            }));\r\n    System.out.println(map);\r\n  }\r\n}\r\n```\r\nFirst parameter is `keyMapper`, second is `valueMapper`, third - `mergeFunction`.","title":"How can I collect two-dimensional Array into a Map&lt;String, Set&lt;String&gt;&gt;?","body":"<p>Instead of <code>Collectors.groupingBy</code>, you could use <code>Collectors.toMap</code>.</p>\n<pre><code>public class Main {\n\n  public static void main(String[] args) throws Exception {\n    String[][] array = new String[][]{{&quot;a&quot;, &quot;1&quot;}, {&quot;a&quot;, &quot;2&quot;}, {&quot;b&quot;, &quot;3&quot;}};\n    Map&lt;String, Set&lt;String&gt;&gt; map = Arrays.stream(array).collect(Collectors.toMap(\n            arr -&gt; arr[0],\n            arr -&gt; new HashSet&lt;&gt;(Collections.singleton(arr[1])),\n            (l, r) -&gt; {\n              l.addAll(r);\n              return l;\n            }));\n    System.out.println(map);\n  }\n}\n</code></pre>\n<p>First parameter is <code>keyMapper</code>, second is <code>valueMapper</code>, third - <code>mergeFunction</code>.</p>\n"}],"owner":{"account_id":130873,"reputation":20683,"user_id":330457,"accept_rate":82,"display_name":"Jin Kwon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":558,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":72095335,"answer_count":6,"score":5,"last_activity_date":1651584463,"creation_date":1651556280,"question_id":72095187,"body_markdown":"I have an array of arrays of two strings.\r\n\r\n```\r\nvar array = new String[][]{\r\n    {&quot;a&quot;, &quot;1&quot;},\r\n    {&quot;a&quot;, &quot;2&quot;},\r\n    {&quot;b&quot;, &quot;3&quot;},\r\n    ...\r\n};\r\n```\r\n\r\nHow can I collect the above array into a `Map&lt;String, Set&lt;String&gt;&gt;` whose key is the first element of each array and the value is a set of second elements of the array?\r\n\r\nSo that I get following map?\r\n\r\n```plain\r\n// Map&lt;String, Set&lt;String&gt;&gt;\r\n&lt;&quot;a&quot;, [&quot;1, &quot;2&quot;]&gt;,\r\n&lt;&quot;b&quot;, [&quot;3&quot;]&gt;,\r\n...\r\n```\r\n\r\nSo far, I found I can classify the first element of each array like this.\r\n\r\n```java\r\n\r\nArrays.stream(array).collect(Collectors.groupingBy(\r\n        a -&gt; ((String[])a)[0],\r\n        // how can I collect the downstream?\r\n);\r\n```","title":"How can I collect two-dimensional Array into a Map&lt;String, Set&lt;String&gt;&gt;?","body":"<p>I have an array of arrays of two strings.</p>\n<pre><code>var array = new String[][]{\n    {&quot;a&quot;, &quot;1&quot;},\n    {&quot;a&quot;, &quot;2&quot;},\n    {&quot;b&quot;, &quot;3&quot;},\n    ...\n};\n</code></pre>\n<p>How can I collect the above array into a <code>Map&lt;String, Set&lt;String&gt;&gt;</code> whose key is the first element of each array and the value is a set of second elements of the array?</p>\n<p>So that I get following map?</p>\n<pre><code>// Map&lt;String, Set&lt;String&gt;&gt;\n&lt;&quot;a&quot;, [&quot;1, &quot;2&quot;]&gt;,\n&lt;&quot;b&quot;, [&quot;3&quot;]&gt;,\n...\n</code></pre>\n<p>So far, I found I can classify the first element of each array like this.</p>\n<pre class=\"lang-java prettyprint-override\"><code>\nArrays.stream(array).collect(Collectors.groupingBy(\n        a -&gt; ((String[])a)[0],\n        // how can I collect the downstream?\n);\n</code></pre>\n"},{"tags":["java","operating-system"],"comments":[{"owner":{"account_id":8347513,"reputation":11,"user_id":6270785,"display_name":"Shivangi Tripathi"},"score":0,"creation_date":1638875441,"post_id":70257332,"comment_id":124198520,"body_markdown":"Okay. Let me put my question in this way : How to &quot;getSystemCpuLoad &quot; method in  java.lang.management.OperatingSystemMXBean","body":"Okay. Let me put my question in this way : How to &quot;getSystemCpuLoad &quot; method in  java.lang.management.OperatingSystemMXBean"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1639354072,"post_id":70257332,"comment_id":124320770,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1651584312,"creation_date":1638870048,"answer_id":70257814,"question_id":70257332,"body_markdown":"1.  I don&#39;t think there is an alternative. At least not in the standard Java SE class libraries&lt;sup&gt;1&lt;/sup&gt;.\r\n\r\n2.  Not all `com.sun.*` packages are considered to be closed APIs.  In this case the [javadocs][1] include this interface.  I take that as an *implicit* statement that this is an open API.\r\n\r\n3.  If this is just the generic warning from SonarQube that you shouldn&#39;t depend on `com.sun.*` and `sun.*` APIs (see [RSPEC-1191][2]), my advice is to suppress the warning for this particular case.\r\n\r\n4.  I don&#39;t see how this is a project &quot;security&quot; issue.  Please explain why you think that.\r\n\r\n-----------------------\r\n\r\n&gt; Okay. Let me put my question in this way : How to `getSystemCpuLoad` method in `java.lang.management.OperatingSystemMXBean`.\r\n\r\nOne way is just like your current code (presumably) does.  Cast the `MXBean` instance to a `com.sun.management.OperatingSystemMXBean` and call the method.   (And suppress the SonarQube warning.)\r\n\r\n-----------------------\r\n\r\nThe one thing to note is that the `getSystemCpuLoad` method is marked as deprecated in Java 17.  You should now use `getCpuLoad` instead.\r\n\r\n-----------------------\r\n\r\n&lt;sup&gt;1 - If you found and used a 3rd-party library&lt;sup&gt;2&lt;/sup&gt; that provides this functionality, or it you implemented your own (in native code, for example), I think you will be making the problem worse.  Now you have an extra dependency to track or extra code to maintain.  Bear in mind that the implementation of this functionality is OS specific, so you would need to find or write an implementation that works on all of your platforms, both now and in the future.&lt;br&gt;\r\n2 - Beware of posts that suggest using the SIGAR library.  It hasn&#39;t been updated in a long time, and there are reports that its problematic on some platforms.&lt;/sup&gt;\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/jdk.management/com/sun/management/OperatingSystemMXBean.html\r\n  [2]: https://rules.sonarsource.com/java/RSPEC-1191","title":"what else we can use instead of import com.sun.management.OperatingSystemMXBean as this import is giving me Sonar issue","body":"<ol>\n<li><p>I don't think there is an alternative. At least not in the standard Java SE class libraries<sup>1</sup>.</p>\n</li>\n<li><p>Not all <code>com.sun.*</code> packages are considered to be closed APIs.  In this case the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/jdk.management/com/sun/management/OperatingSystemMXBean.html\" rel=\"nofollow noreferrer\">javadocs</a> include this interface.  I take that as an <em>implicit</em> statement that this is an open API.</p>\n</li>\n<li><p>If this is just the generic warning from SonarQube that you shouldn't depend on <code>com.sun.*</code> and <code>sun.*</code> APIs (see <a href=\"https://rules.sonarsource.com/java/RSPEC-1191\" rel=\"nofollow noreferrer\">RSPEC-1191</a>), my advice is to suppress the warning for this particular case.</p>\n</li>\n<li><p>I don't see how this is a project &quot;security&quot; issue.  Please explain why you think that.</p>\n</li>\n</ol>\n<hr />\n<blockquote>\n<p>Okay. Let me put my question in this way : How to <code>getSystemCpuLoad</code> method in <code>java.lang.management.OperatingSystemMXBean</code>.</p>\n</blockquote>\n<p>One way is just like your current code (presumably) does.  Cast the <code>MXBean</code> instance to a <code>com.sun.management.OperatingSystemMXBean</code> and call the method.   (And suppress the SonarQube warning.)</p>\n<hr />\n<p>The one thing to note is that the <code>getSystemCpuLoad</code> method is marked as deprecated in Java 17.  You should now use <code>getCpuLoad</code> instead.</p>\n<hr />\n<p><sup>1 - If you found and used a 3rd-party library<sup>2</sup> that provides this functionality, or it you implemented your own (in native code, for example), I think you will be making the problem worse.  Now you have an extra dependency to track or extra code to maintain.  Bear in mind that the implementation of this functionality is OS specific, so you would need to find or write an implementation that works on all of your platforms, both now and in the future.<br>\n2 - Beware of posts that suggest using the SIGAR library.  It hasn't been updated in a long time, and there are reports that its problematic on some platforms.</sup></p>\n"}],"owner":{"account_id":8347513,"reputation":11,"user_id":6270785,"display_name":"Shivangi Tripathi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":678,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1651584312,"creation_date":1638867689,"question_id":70257332,"body_markdown":"Due to project sec. issues . Not allowed to use com.sun.management.OperatingSystemMXBean . Instead i am trying to use java.lang.management.OperatingSystemMXBean . But in my method i need to know the cpuLoad (getSystemCpuLoad) . how can i get the same using lang.management ? is there any method present in java. lang.* to get the systemcpuLoad ?","title":"what else we can use instead of import com.sun.management.OperatingSystemMXBean as this import is giving me Sonar issue","body":"<p>Due to project sec. issues . Not allowed to use com.sun.management.OperatingSystemMXBean . Instead i am trying to use java.lang.management.OperatingSystemMXBean . But in my method i need to know the cpuLoad (getSystemCpuLoad) . how can i get the same using lang.management ? is there any method present in java. lang.* to get the systemcpuLoad ?</p>\n"},{"tags":["java","android","android-adapter","autocompletetextview"],"comments":[{"owner":{"account_id":6023206,"reputation":7989,"user_id":4729721,"display_name":"a_local_nobody"},"score":0,"creation_date":1651584133,"post_id":72100015,"comment_id":127393928,"body_markdown":"`Is there a way to do that ?` most likely, but you&#39;d have to post your code","body":"<code>Is there a way to do that ?</code> most likely, but you&#39;d have to post your code"},{"owner":{"account_id":1951,"reputation":26904,"user_id":2684,"accept_rate":87,"display_name":"Martin Marconcini"},"score":0,"creation_date":1651584930,"post_id":72100015,"comment_id":127394259,"body_markdown":"Welcome to StackOverflow! Please refer to the guide on [how to ask a good question](https://stackoverflow.com/help/how-to-ask) and when needed, how to provide a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example) so people can try to help you with a problem. You&#39;re often expected to do your own homework and research before asking a question.","body":"Welcome to StackOverflow! Please refer to the guide on <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask a good question</a> and when needed, how to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so people can try to help you with a problem. You&#39;re often expected to do your own homework and research before asking a question."}],"owner":{"account_id":21497902,"reputation":5,"user_id":15842629,"display_name":"Mika"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1651584111,"creation_date":1651583937,"question_id":72100015,"body_markdown":"I have implemented an autocomplete adapter that works fine. I have found the code on this forum.\r\n\r\nThis adapter lists customers and their associated code :\r\n\r\nCust01  061213&lt;br&gt;\r\nCust02  086554&lt;br&gt;\r\noldCust01  654235&lt;br&gt;\r\n...&lt;br&gt;\r\n...&lt;br&gt;\r\nCust12  876521\r\n\r\nAt the moment if I search with &quot;12&quot; in the autocomplete it shows :\r\n\r\nCust01  061213&lt;br&gt;\r\nCust12  876521&lt;br&gt;\r\n\r\nAnd now I would like it to only show the corresponding customer but with its associated code :\r\n\r\nCust12  876521\r\n\r\nIn other words, I only want the search to be made on the 6 first characters.\r\n\r\nIs there a way to do that ?\r\n\r\nThanks.","title":"How can limit the search in an adapter?","body":"<p>I have implemented an autocomplete adapter that works fine. I have found the code on this forum.</p>\n<p>This adapter lists customers and their associated code :</p>\n<p>Cust01  061213<br>\nCust02  086554<br>\noldCust01  654235<br>\n...<br>\n...<br>\nCust12  876521</p>\n<p>At the moment if I search with &quot;12&quot; in the autocomplete it shows :</p>\n<p>Cust01  061213<br>\nCust12  876521<br></p>\n<p>And now I would like it to only show the corresponding customer but with its associated code :</p>\n<p>Cust12  876521</p>\n<p>In other words, I only want the search to be made on the 6 first characters.</p>\n<p>Is there a way to do that ?</p>\n<p>Thanks.</p>\n"},{"tags":["java","automated-tests","appium","appium-android"],"answers":[{"tags":[],"owner":{"account_id":14915043,"reputation":93,"user_id":10769117,"display_name":"J.Klimov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651584101,"creation_date":1651584101,"answer_id":72100046,"question_id":71414899,"body_markdown":"GRID 4 cant work with customa locatorn and UIselector, downgrade to GRID 3 or work directly with devices","title":"Unable to determine element locating strategy for -android uiautomator","body":"<p>GRID 4 cant work with customa locatorn and UIselector, downgrade to GRID 3 or work directly with devices</p>\n"}],"owner":{"account_id":14915043,"reputation":93,"user_id":10769117,"display_name":"J.Klimov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":227,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1651584101,"creation_date":1646853412,"question_id":71414899,"body_markdown":"I have a method which works perfectly on locally, but when I launch it on server I&#39;ve got an error:\r\n\r\n&gt; org.openqa.selenium.InvalidArgumentException: Unable to determine element locating strategy for -android uiautomator\r\n\r\nMethod is scrolling view till element with text I need:\r\n\r\n```\r\npublic void tapOnElementByIdAndText(String resourceId, String visibleText) {\r\n        driver.findElementByAndroidUIAutomator(\r\n                &quot;new UiScrollable(new UiSelector().scrollable(true).instance(0)).scrollIntoView(new UiSelector().resourceId(\\&quot;&quot; + resourceId + &quot;\\&quot;).text(\\&quot;&quot; + visibleText + &quot;\\&quot;).instance(0))&quot;).click();\r\n        hideKeyboard();\r\n    }\r\n\r\nHow can I make it work or any other smooth solution for scrolling screen?","title":"Unable to determine element locating strategy for -android uiautomator","body":"<p>I have a method which works perfectly on locally, but when I launch it on server I've got an error:</p>\n<blockquote>\n<p>org.openqa.selenium.InvalidArgumentException: Unable to determine element locating strategy for -android uiautomator</p>\n</blockquote>\n<p>Method is scrolling view till element with text I need:</p>\n<pre><code>public void tapOnElementByIdAndText(String resourceId, String visibleText) {\n        driver.findElementByAndroidUIAutomator(\n                &quot;new UiScrollable(new UiSelector().scrollable(true).instance(0)).scrollIntoView(new UiSelector().resourceId(\\&quot;&quot; + resourceId + &quot;\\&quot;).text(\\&quot;&quot; + visibleText + &quot;\\&quot;).instance(0))&quot;).click();\n        hideKeyboard();\n    }\n\nHow can I make it work or any other smooth solution for scrolling screen?\n</code></pre>\n"},{"tags":["java","arrays","spring","mongodb","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":3189466,"reputation":22172,"user_id":2694184,"accept_rate":48,"display_name":"Gibbs"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1651584004,"creation_date":1651584004,"answer_id":72100032,"question_id":72097299,"body_markdown":"It is not possible to match `String` and `List&lt;String&gt;` using `$all` in a straightforward way. \r\n\r\nThe best bet is that use `String` field for the method and do the conversion programmatically.\r\n\r\nOr else you can give a try with aggregation framework which has many useful aggregation operators.","title":"Is there such a query for mongodb?","body":"<p>It is not possible to match <code>String</code> and <code>List&lt;String&gt;</code> using <code>$all</code> in a straightforward way.</p>\n<p>The best bet is that use <code>String</code> field for the method and do the conversion programmatically.</p>\n<p>Or else you can give a try with aggregation framework which has many useful aggregation operators.</p>\n"}],"owner":{"account_id":18070515,"reputation":15,"user_id":17245942,"display_name":"Sergio "},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72100032,"answer_count":1,"score":0,"last_activity_date":1651584004,"creation_date":1651569769,"question_id":72097299,"body_markdown":"I need to do a query on mongoDB due to I am developing in Java with Spring Boot and MongoDB. I know that this command is for arrays:\r\n\r\n    @Query(&quot;{ &#39;skills&#39; : {$all : ?0}} &quot;)\r\n    List&lt;DataCV2&gt; findAllSkillsInCV(ArrayList&lt;String&gt; skillsOfCV);\r\nThis query let me to find if all fields of the arraylist &quot;skillsOfCV&quot; are in the arraylist called &quot;skills&quot;\r\nHowever, I am trying to pass an arraylist as &quot;skillsOfCV&quot; to compare all the fields with a string field in database.\r\n\r\n    @Query(&quot;{ &#39;experienceCV&#39; : {$all : ?0}} &quot;)\r\n    List&lt;DataCV2&gt; findAllExperienceInCV(ArrayList&lt;String&gt; experienceOfCV);\r\n\r\nThe field &quot;experienceCV&quot; is a string one, and I want to compare if this string field contains all the fields of the arraylist &quot;experienceOfCV&quot;.How could I do that? ","title":"Is there such a query for mongodb?","body":"<p>I need to do a query on mongoDB due to I am developing in Java with Spring Boot and MongoDB. I know that this command is for arrays:</p>\n<pre><code>@Query(&quot;{ 'skills' : {$all : ?0}} &quot;)\nList&lt;DataCV2&gt; findAllSkillsInCV(ArrayList&lt;String&gt; skillsOfCV);\n</code></pre>\n<p>This query let me to find if all fields of the arraylist &quot;skillsOfCV&quot; are in the arraylist called &quot;skills&quot;\nHowever, I am trying to pass an arraylist as &quot;skillsOfCV&quot; to compare all the fields with a string field in database.</p>\n<pre><code>@Query(&quot;{ 'experienceCV' : {$all : ?0}} &quot;)\nList&lt;DataCV2&gt; findAllExperienceInCV(ArrayList&lt;String&gt; experienceOfCV);\n</code></pre>\n<p>The field &quot;experienceCV&quot; is a string one, and I want to compare if this string field contains all the fields of the arraylist &quot;experienceOfCV&quot;.How could I do that?</p>\n"},{"tags":["java","arrays","shortest-path","dijkstra"],"comments":[{"owner":{"account_id":7226774,"reputation":19717,"user_id":5515060,"accept_rate":100,"display_name":"Lino"},"score":0,"creation_date":1625064856,"post_id":68196827,"comment_id":120529232,"body_markdown":"And, what does your code do? Which approach did you choose? For the future I recommend to comment and properly indent your code, currently I have no idea what&#39;s going on. Additionally: We don&#39;t know the test cases. So you&#39;d have to somehow debug the code to check what exactly it is doing and where you may went wrong","body":"And, what does your code do? Which approach did you choose? For the future I recommend to comment and properly indent your code, currently I have no idea what&#39;s going on. Additionally: We don&#39;t know the test cases. So you&#39;d have to somehow debug the code to check what exactly it is doing and where you may went wrong"},{"owner":{"account_id":22093523,"reputation":94,"user_id":16351223,"display_name":"KSP"},"score":0,"creation_date":1625066556,"post_id":68196827,"comment_id":120530028,"body_markdown":"@Lino Thank you so much for your input. This is my first time asking a question on StackOverflow. I&#39;m working on making the edits you mentioned! Have a nice day!","body":"@Lino Thank you so much for your input. This is my first time asking a question on StackOverflow. I&#39;m working on making the edits you mentioned! Have a nice day!"},{"owner":{"account_id":7536364,"reputation":3543,"user_id":5722505,"display_name":"Egan Wolf"},"score":0,"creation_date":1625139645,"post_id":68196827,"comment_id":120551155,"body_markdown":"Your code doesn&#39;t check at all what is to the left or above the node that is being processed. So it will fail for all maps where the optimal path after removing the wall goes left or up at some point.","body":"Your code doesn&#39;t check at all what is to the left or above the node that is being processed. So it will fail for all maps where the optimal path after removing the wall goes left or up at some point."},{"owner":{"account_id":22093523,"reputation":94,"user_id":16351223,"display_name":"KSP"},"score":0,"creation_date":1625150915,"post_id":68196827,"comment_id":120556652,"body_markdown":"@EganWolf I tried implementing it that way as well, but I still wound up at the same dead end. I&#39;m not quite sure what to do. Do you have a particular solution in mind?","body":"@EganWolf I tried implementing it that way as well, but I still wound up at the same dead end. I&#39;m not quite sure what to do. Do you have a particular solution in mind?"},{"owner":{"account_id":7536364,"reputation":3543,"user_id":5722505,"display_name":"Egan Wolf"},"score":0,"creation_date":1625154783,"post_id":68196827,"comment_id":120558469,"body_markdown":"Maybe something like: initialize `dp` with very high number for each node and create a list of nodes to process. When you process a node check all 4 directions. If you found a lower value than the one that was assigned before add adjacent nodes to a list to process them again and see if their value can be lowered.","body":"Maybe something like: initialize <code>dp</code> with very high number for each node and create a list of nodes to process. When you process a node check all 4 directions. If you found a lower value than the one that was assigned before add adjacent nodes to a list to process them again and see if their value can be lowered."},{"owner":{"account_id":7536364,"reputation":3543,"user_id":5722505,"display_name":"Egan Wolf"},"score":0,"creation_date":1625155044,"post_id":68196827,"comment_id":120558575,"body_markdown":"But I think it won&#39;t solve properly maps that start with a viable path that can be shorter after removing a wall.","body":"But I think it won&#39;t solve properly maps that start with a viable path that can be shorter after removing a wall."},{"owner":{"account_id":22093523,"reputation":94,"user_id":16351223,"display_name":"KSP"},"score":0,"creation_date":1625195464,"post_id":68196827,"comment_id":120568561,"body_markdown":"@EganWolf Yeah, that approach doesn&#39;t work optimally for solutions where you might need to remove a wall. I keep hitting a dead end. I do, however have the solution to this question in Python, but I don&#39;t know python so I&#39;ve not been able to draw inspiration from it. I ran the python code and it passes 5/5 test cases. So, here&#39;s the link, If it can be of any help.... https://blog.finxter.com/googles-foobar/   (Its the Level3 Challenge 1 question)","body":"@EganWolf Yeah, that approach doesn&#39;t work optimally for solutions where you might need to remove a wall. I keep hitting a dead end. I do, however have the solution to this question in Python, but I don&#39;t know python so I&#39;ve not been able to draw inspiration from it. I ran the python code and it passes 5/5 test cases. So, here&#39;s the link, If it can be of any help.... <a href=\"https://blog.finxter.com/googles-foobar/\" rel=\"nofollow noreferrer\">blog.finxter.com/googles-foobar</a>   (Its the Level3 Challenge 1 question)"},{"owner":{"account_id":8286991,"reputation":134,"user_id":6229821,"accept_rate":75,"display_name":"Anirudh Goel"},"score":0,"creation_date":1639344249,"post_id":68196827,"comment_id":124319076,"body_markdown":"Does this answer your question? [Python breadth first shortest path for Google foo bar (prepare the bunnies escape)](https://stackoverflow.com/questions/46656412/python-breadth-first-shortest-path-for-google-foo-bar-prepare-the-bunnies-escap)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/46656412/python-breadth-first-shortest-path-for-google-foo-bar-prepare-the-bunnies-escap\">Python breadth first shortest path for Google foo bar (prepare the bunnies escape)</a>"}],"owner":{"account_id":22093523,"reputation":94,"user_id":16351223,"display_name":"KSP"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1993,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":0,"score":2,"last_activity_date":1651583832,"creation_date":1625063748,"question_id":68196827,"body_markdown":"*I recently received an invitation to a google foobar challenge\r\nI am currently on level 3. I&#39;ve written a code which passes 3/5 test cases and I can&#39;t seem to figure out where I went wrong!*\r\nI used a minimum cost path algorithm to do it\r\n\r\n**This is the challenge:**\r\nYou&#39;re awfully close to destroying the LAMBCHOP doomsday device and freeing Commander Lambda&#39;s bunny workers, but once they&#39;re free of the work duties the bunnies are going to need to escape Lambda&#39;s space station via the escape pods as quickly as possible. Unfortunately, the halls of the space station are a maze of corridors and dead ends that will be a deathtrap for the escaping bunnies. Fortunately, Commander Lambda has put you in charge of a remodeling project that will give you the opportunity to make things a little easier for the bunnies. Unfortunately (again), you can&#39;t just remove all obstacles between the bunnies and the escape pods - at most you can remove one wall per escape pod path, both to maintain structural integrity of the station and to avoid arousing Commander Lambda&#39;s suspicions. \r\n\r\nYou have maps of parts of the space station, each starting at a work area exit and ending at the door to an escape pod. The map is represented as a matrix of 0s and 1s, where 0s are passable space and 1s are impassable walls. The door out of the station is at the top left (0,0) and the door into an escape pod is at the bottom right (w-1,h-1). \r\n\r\nWrite a function solution(map) that generates the length of the shortest path from the station door to the escape pod, where you are allowed to remove one wall as part of your remodeling plans. The path length is the total number of nodes you pass through, counting both the entrance and exit nodes. The starting and ending positions are always passable (0). The map will always be solvable, though you may or may not need to remove a wall. The height and width of the map can be from 2 to 20. Moves can only be made in cardinal directions; no diagonal moves are allowed.\r\n\r\n\r\nAnd this is the code I&#39;ve written \r\n\r\n    public class Main \r\n    {\r\n\t    //function to return shortest path\r\n\t    public static int solution(int[][] map) \r\n\t    {\r\n\t\t    int n=map[0].length;\r\n\t\t    int m=map.length;\r\n\t\t    System.out.println(n+&quot;,&quot;+m);\r\n\t\t    //assigning weights to the array\r\n\t\t    //such that the blocked walls have a large weight of 1000\r\n\t\t    int w[][]=new int[m][n];\r\n\t\t    for(int i=0;i&lt;m;i++) \r\n\t\t    {\r\n\t\t\t    for(int j=0;j&lt;n;j++) \r\n\t\t\t    {\r\n\t\t\t\t    if(map[i][j]==0)\r\n\t\t\t\t\t    w[i][j]=1;\r\n\t\t\t\t    else if(map[i][j]==1)\r\n\t\t\t\t\t    w[i][j]=1000;\r\n\t\t\t    }\r\n\t\t    }\r\n\t\t\r\n\t\t    int[][] dp=new int[m][n];\r\n\t\t    for(int i=dp.length-1;i&gt;=0;i--) \r\n\t\t    {\r\n\t\t\t    for(int j=dp[0].length-1;j&gt;=0;j--) \r\n\t\t\t    {\r\n\t\t\t\t    if(i==dp.length-1 &amp;&amp; j==dp[0].length-1)\r\n\t\t\t\t    {\r\n\t\t\t\t\t    dp[i][j]=w[i][j];\r\n\t\t\t\t    }\r\n\t\t\t\t    else if(i==dp.length-1)\r\n\t\t\t\t    {\r\n\t\t\t\t\t    dp[i][j]=dp[i][j+1]+w[i][j];\r\n\t\t\t\t    }\r\n\t\t\t\t    else if(j==dp[0].length-1) \r\n\t\t\t\t    {\r\n\t\t\t\t\t    dp[i][j]=dp[i+1][j]+w[i][j];\r\n\t\t\t\t    }\r\n\t\t\t\t    else \r\n                    {\r\n\t\t\t\t\t    dp[i][j]=Math.min(dp[i+1][j], dp[i][j+1])+w[i][j];\r\n\t\t\t\t    }\r\n\t\t\t    }\r\n\t\t    }\r\n\t\t    int distance=dp[0][0];\r\n\t\t    int d;\r\n\t\t    if(distance&gt;1000) \r\n\t\t    {\r\n\t\t\t    d= distance-999;\r\n\t\t\t    return d;\r\n\t\t    }\r\n\t\t    else\r\n\t\t\t    return distance;\r\n        }\r\n\t    public static void main(String[] args)throws Exception\r\n\t    {\r\n\t\t    int arr[][]= {{0,1,1},{0,0,0},{1,1,0},{1,1,0}};\r\n\t\t    System.out.println(&quot;Distance: &quot;+solution(arr));\r\n\t    }\r\n    }\r\n\r\nand it passes 3/5 test cases\r\n\r\n![test cases][1]\r\n\r\n\r\nI know two of the test cases, please find them here.\r\n\r\n![two of the test cases][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ogvHP.png\r\n  [2]: https://i.stack.imgur.com/aqZjp.png\r\nbut the other three test cases are given at random.\r\n\r\nI have made an array w (weight) such that 1&#39;s translate to passable paths and 1000&#39;s translate to impassable paths so that they&#39;re less favored by the algorithm.\r\nI&#39;ve used a simplified Dijkstra&#39;s algorithm in this code.\r\n\r\n\r\nEdit: I&#39;ve figured out that for most inputs, the output tends to be n+m-1.\r\n\r\nI&#39;ve also found out a case where my code doesn&#39;t work.\r\nInput:\r\n\r\n    {{0,0,1,1},\r\n     {1,0,0,0},\r\n     {0,0,1,1},\r\n     {0,1,1,1},\r\n     {0,1,1,1},\r\n     {0,1,0,0}}\r\n\r\nExpected output = 11\r\n\r\nOutput from above code = 1008","title":"Google foobar challenge (Prepare the bunnies escape)","body":"<p><em>I recently received an invitation to a google foobar challenge\nI am currently on level 3. I've written a code which passes 3/5 test cases and I can't seem to figure out where I went wrong!</em>\nI used a minimum cost path algorithm to do it</p>\n<p><strong>This is the challenge:</strong>\nYou're awfully close to destroying the LAMBCHOP doomsday device and freeing Commander Lambda's bunny workers, but once they're free of the work duties the bunnies are going to need to escape Lambda's space station via the escape pods as quickly as possible. Unfortunately, the halls of the space station are a maze of corridors and dead ends that will be a deathtrap for the escaping bunnies. Fortunately, Commander Lambda has put you in charge of a remodeling project that will give you the opportunity to make things a little easier for the bunnies. Unfortunately (again), you can't just remove all obstacles between the bunnies and the escape pods - at most you can remove one wall per escape pod path, both to maintain structural integrity of the station and to avoid arousing Commander Lambda's suspicions.</p>\n<p>You have maps of parts of the space station, each starting at a work area exit and ending at the door to an escape pod. The map is represented as a matrix of 0s and 1s, where 0s are passable space and 1s are impassable walls. The door out of the station is at the top left (0,0) and the door into an escape pod is at the bottom right (w-1,h-1).</p>\n<p>Write a function solution(map) that generates the length of the shortest path from the station door to the escape pod, where you are allowed to remove one wall as part of your remodeling plans. The path length is the total number of nodes you pass through, counting both the entrance and exit nodes. The starting and ending positions are always passable (0). The map will always be solvable, though you may or may not need to remove a wall. The height and width of the map can be from 2 to 20. Moves can only be made in cardinal directions; no diagonal moves are allowed.</p>\n<p>And this is the code I've written</p>\n<pre><code>public class Main \n{\n    //function to return shortest path\n    public static int solution(int[][] map) \n    {\n        int n=map[0].length;\n        int m=map.length;\n        System.out.println(n+&quot;,&quot;+m);\n        //assigning weights to the array\n        //such that the blocked walls have a large weight of 1000\n        int w[][]=new int[m][n];\n        for(int i=0;i&lt;m;i++) \n        {\n            for(int j=0;j&lt;n;j++) \n            {\n                if(map[i][j]==0)\n                    w[i][j]=1;\n                else if(map[i][j]==1)\n                    w[i][j]=1000;\n            }\n        }\n    \n        int[][] dp=new int[m][n];\n        for(int i=dp.length-1;i&gt;=0;i--) \n        {\n            for(int j=dp[0].length-1;j&gt;=0;j--) \n            {\n                if(i==dp.length-1 &amp;&amp; j==dp[0].length-1)\n                {\n                    dp[i][j]=w[i][j];\n                }\n                else if(i==dp.length-1)\n                {\n                    dp[i][j]=dp[i][j+1]+w[i][j];\n                }\n                else if(j==dp[0].length-1) \n                {\n                    dp[i][j]=dp[i+1][j]+w[i][j];\n                }\n                else \n                {\n                    dp[i][j]=Math.min(dp[i+1][j], dp[i][j+1])+w[i][j];\n                }\n            }\n        }\n        int distance=dp[0][0];\n        int d;\n        if(distance&gt;1000) \n        {\n            d= distance-999;\n            return d;\n        }\n        else\n            return distance;\n    }\n    public static void main(String[] args)throws Exception\n    {\n        int arr[][]= {{0,1,1},{0,0,0},{1,1,0},{1,1,0}};\n        System.out.println(&quot;Distance: &quot;+solution(arr));\n    }\n}\n</code></pre>\n<p>and it passes 3/5 test cases</p>\n<p><img src=\"https://i.stack.imgur.com/ogvHP.png\" alt=\"test cases\" /></p>\n<p>I know two of the test cases, please find them here.</p>\n<p><img src=\"https://i.stack.imgur.com/aqZjp.png\" alt=\"two of the test cases\" /></p>\n<p>but the other three test cases are given at random.</p>\n<p>I have made an array w (weight) such that 1's translate to passable paths and 1000's translate to impassable paths so that they're less favored by the algorithm.\nI've used a simplified Dijkstra's algorithm in this code.</p>\n<p>Edit: I've figured out that for most inputs, the output tends to be n+m-1.</p>\n<p>I've also found out a case where my code doesn't work.\nInput:</p>\n<pre><code>{{0,0,1,1},\n {1,0,0,0},\n {0,0,1,1},\n {0,1,1,1},\n {0,1,1,1},\n {0,1,0,0}}\n</code></pre>\n<p>Expected output = 11</p>\n<p>Output from above code = 1008</p>\n"},{"tags":["java","c++","jvm-hotspot","compare-and-swap"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1651583733,"post_id":72099254,"comment_id":127393761,"body_markdown":"Are you aware that this implements cas for a `byte` using `cmpxchg` operating on `int`?","body":"Are you aware that this implements cas for a <code>byte</code> using <code>cmpxchg</code> operating on <code>int</code>?"}],"answers":[{"tags":[],"owner":{"account_id":16377449,"reputation":3654,"user_id":11829247,"display_name":"Frodyne"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1651583791,"creation_date":1651583791,"answer_id":72099991,"question_id":72099254,"body_markdown":"Yes, it is for alignment. The posted code implements a single-byte compare-exchange, using an already existing int-based compare-exchange.\r\n\r\nThis gives a few problems that the code needs to solve:\r\n\r\n - The int-based compare-exchange is restricted to reading int-aligned values, which means that you have to work out which of the (4?) bytes of the int you actually want to change. After all, the other bytes in the int must be unaffected\r\n- When you then actually do the compare-exchange, it is only a failure if the single byte you are trying to alter has been changed behind your back. If any of the other bytes in the int have changed, then that is only a failure for the int-cmpxchg, but not a failure for the byte-cmpxchg\r\n\r\nThe part before the `while`-loop handles the first part of that, by creating an int-aligned pointer that the int-value can be read from, and then setting up the &quot;int we expect to see&quot; and &quot;int we want to change to&quot; values.\r\n\r\nThe loop then handles the second part, where the algorithm attempts the int-cmpxchg, and then retries any failures as long as it is one of the other bytes that have been changed from expected.","title":"What&#39;s the use of `offset` in the version of `Atomic::cmpxchg` in Hotspot?","body":"<p>Yes, it is for alignment. The posted code implements a single-byte compare-exchange, using an already existing int-based compare-exchange.</p>\n<p>This gives a few problems that the code needs to solve:</p>\n<ul>\n<li>The int-based compare-exchange is restricted to reading int-aligned values, which means that you have to work out which of the (4?) bytes of the int you actually want to change. After all, the other bytes in the int must be unaffected</li>\n<li>When you then actually do the compare-exchange, it is only a failure if the single byte you are trying to alter has been changed behind your back. If any of the other bytes in the int have changed, then that is only a failure for the int-cmpxchg, but not a failure for the byte-cmpxchg</li>\n</ul>\n<p>The part before the <code>while</code>-loop handles the first part of that, by creating an int-aligned pointer that the int-value can be read from, and then setting up the &quot;int we expect to see&quot; and &quot;int we want to change to&quot; values.</p>\n<p>The loop then handles the second part, where the algorithm attempts the int-cmpxchg, and then retries any failures as long as it is one of the other bytes that have been changed from expected.</p>\n"}],"owner":{"account_id":18567887,"reputation":1,"user_id":14878190,"display_name":"wuxj"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1651583791,"creation_date":1651580209,"question_id":72099254,"body_markdown":"[Here][1] is a version of implementation of function `Atomic::cmpxchg` used for CAS:\r\n```c++\r\njbyte Atomic::cmpxchg(jbyte exchange_value, volatile jbyte* dest, jbyte compare_value) {\r\n  assert(sizeof(jbyte) == 1, &quot;assumption.&quot;);\r\n  uintptr_t dest_addr = (uintptr_t)dest;\r\n  // look here\r\n  uintptr_t offset = dest_addr % sizeof(jint);\r\n  volatile jint* dest_int = (volatile jint*)(dest_addr - offset);\r\n  jint cur = *dest_int;\r\n  jbyte* cur_as_bytes = (jbyte*)(&amp;cur);\r\n  jint new_val = cur;\r\n  jbyte* new_val_as_bytes = (jbyte*)(&amp;new_val);\r\n  // ... and here\r\n  new_val_as_bytes[offset] = exchange_value;\r\n  while (cur_as_bytes[offset] == compare_value) {\r\n    jint res = cmpxchg(new_val, dest_int, cur);\r\n    if (res == cur) break;\r\n    cur = res;\r\n    new_val = cur;\r\n    new_val_as_bytes[offset] = exchange_value;\r\n  }\r\n  return cur_as_bytes[offset];\r\n}\r\n```\r\nIn the code above, I want to know what the use of `offset` actually is. I think we could simply and directly comapre `cur_as_bytes` and `compare_value`, without any `offset`. So why do we need it and how does it work? Is it for alignment? Thanks.\r\n\r\n  [1]: https://hg.openjdk.java.net/jdk8u/jdk8u/hotspot/file/tip/src/share/vm/runtime/atomic.cpp","title":"What&#39;s the use of `offset` in the version of `Atomic::cmpxchg` in Hotspot?","body":"<p><a href=\"https://hg.openjdk.java.net/jdk8u/jdk8u/hotspot/file/tip/src/share/vm/runtime/atomic.cpp\" rel=\"nofollow noreferrer\">Here</a> is a version of implementation of function <code>Atomic::cmpxchg</code> used for CAS:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>jbyte Atomic::cmpxchg(jbyte exchange_value, volatile jbyte* dest, jbyte compare_value) {\n  assert(sizeof(jbyte) == 1, &quot;assumption.&quot;);\n  uintptr_t dest_addr = (uintptr_t)dest;\n  // look here\n  uintptr_t offset = dest_addr % sizeof(jint);\n  volatile jint* dest_int = (volatile jint*)(dest_addr - offset);\n  jint cur = *dest_int;\n  jbyte* cur_as_bytes = (jbyte*)(&amp;cur);\n  jint new_val = cur;\n  jbyte* new_val_as_bytes = (jbyte*)(&amp;new_val);\n  // ... and here\n  new_val_as_bytes[offset] = exchange_value;\n  while (cur_as_bytes[offset] == compare_value) {\n    jint res = cmpxchg(new_val, dest_int, cur);\n    if (res == cur) break;\n    cur = res;\n    new_val = cur;\n    new_val_as_bytes[offset] = exchange_value;\n  }\n  return cur_as_bytes[offset];\n}\n</code></pre>\n<p>In the code above, I want to know what the use of <code>offset</code> actually is. I think we could simply and directly comapre <code>cur_as_bytes</code> and <code>compare_value</code>, without any <code>offset</code>. So why do we need it and how does it work? Is it for alignment? Thanks.</p>\n"},{"tags":["java","data-structures","tree","filesystems"],"comments":[{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1339069810,"post_id":10929775,"comment_id":14259962,"body_markdown":"*&quot;source code to start?&quot;*  See [File Browser GUI](http://codereview.stackexchange.com/questions/4446/file-browser-gui).","body":"<i>&quot;source code to start?&quot;</i>  See <a href=\"http://codereview.stackexchange.com/questions/4446/file-browser-gui\">File Browser GUI</a>."},{"owner":{"account_id":18437,"reputation":31654,"user_id":42223,"accept_rate":79,"display_name":"dreftymac"},"score":0,"creation_date":1493054549,"post_id":10929775,"comment_id":74238126,"body_markdown":"**See also:** http://stackoverflow.com/questions/1005551/construct-a-tree-structure-from-list-of-string-paths","body":"<b>See also:</b> <a href=\"http://stackoverflow.com/questions/1005551/construct-a-tree-structure-from-list-of-string-paths\" title=\"construct a tree structure from list of string paths\">stackoverflow.com/questions/1005551/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":467422,"reputation":1264,"user_id":872803,"accept_rate":43,"display_name":"cl-r"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1339074552,"creation_date":1339074552,"answer_id":10932470,"question_id":10929775,"body_markdown":"Have a look in new [Java 7 - nio2 package][1]. All you need is inside.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/tutorial/essential/io/fileio.html","title":"Java Tree to represent filesystem (files/dir) from list of paths","body":"<p>Have a look in new <a href=\"http://docs.oracle.com/javase/tutorial/essential/io/fileio.html\" rel=\"nofollow\">Java 7 - nio2 package</a>. All you need is inside.</p>\n"},{"tags":[],"owner":{"account_id":203750,"reputation":2708,"user_id":451590,"accept_rate":100,"display_name":"David B"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1339074863,"creation_date":1339074863,"answer_id":10932567,"question_id":10929775,"body_markdown":"I would recommend reading up on [data structures](http://en.wikipedia.org/wiki/Data_structure), particularly [trees](http://en.wikipedia.org/wiki/Tree_(data_structure)). In Java, you can represent these by creating a node class that has references to other nodes. For example:\r\n\r\n    public class Node {\r\n        private Node[] children;\r\n        /* snip other fields */\r\n        public boolean isFile() {\r\n             return children.count == 0;\r\n        }\r\n    }\r\n\r\nObviously, you can store your node references anyway you like- arrays or collections will work with non-binary trees.\r\n\r\nGiven your list of files, you can read these and populate your tree structure.","title":"Java Tree to represent filesystem (files/dir) from list of paths","body":"<p>I would recommend reading up on <a href=\"http://en.wikipedia.org/wiki/Data_structure\" rel=\"nofollow\">data structures</a>, particularly <a href=\"http://en.wikipedia.org/wiki/Tree_%28data_structure%29\" rel=\"nofollow\">trees</a>. In Java, you can represent these by creating a node class that has references to other nodes. For example:</p>\n\n<pre><code>public class Node {\n    private Node[] children;\n    /* snip other fields */\n    public boolean isFile() {\n         return children.count == 0;\n    }\n}\n</code></pre>\n\n<p>Obviously, you can store your node references anyway you like- arrays or collections will work with non-binary trees.</p>\n\n<p>Given your list of files, you can read these and populate your tree structure.</p>\n"},{"tags":[],"owner":{"account_id":917853,"reputation":4196,"user_id":950252,"accept_rate":88,"display_name":"Justin"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1385042491,"creation_date":1339075322,"answer_id":10932694,"question_id":10929775,"body_markdown":"Seems like you could adapt either a [Trie][1] / [Radix Trie][2] or a [Binary Search Tree][3] to work in either situation. You could augment a Trie to store &quot;folders&quot; as the inner nodes (instead of characters like in a regular Trie) or you could augment a Binary Search Tree to store &quot;folders&quot; as inner nodes (as long as they implement a comparable interface) and &quot;files&quot; as leaf nodes.\r\n\r\nMy implementation of those structures are linked in the text above.\r\n\r\n\r\n  [1]: http://code.google.com/p/java-algorithms-implementation/source/browse/src/com/jwetherell/algorithms/data_structures/Trie.java\r\n  [2]: http://code.google.com/p/java-algorithms-implementation/source/browse/src/com/jwetherell/algorithms/data_structures/RadixTrie.java\r\n  [3]: http://code.google.com/p/java-algorithms-implementation/source/browse/src/com/jwetherell/algorithms/data_structures/BinarySearchTree.java","title":"Java Tree to represent filesystem (files/dir) from list of paths","body":"<p>Seems like you could adapt either a <a href=\"http://code.google.com/p/java-algorithms-implementation/source/browse/src/com/jwetherell/algorithms/data_structures/Trie.java\" rel=\"nofollow\">Trie</a> / <a href=\"http://code.google.com/p/java-algorithms-implementation/source/browse/src/com/jwetherell/algorithms/data_structures/RadixTrie.java\" rel=\"nofollow\">Radix Trie</a> or a <a href=\"http://code.google.com/p/java-algorithms-implementation/source/browse/src/com/jwetherell/algorithms/data_structures/BinarySearchTree.java\" rel=\"nofollow\">Binary Search Tree</a> to work in either situation. You could augment a Trie to store \"folders\" as the inner nodes (instead of characters like in a regular Trie) or you could augment a Binary Search Tree to store \"folders\" as inner nodes (as long as they implement a comparable interface) and \"files\" as leaf nodes.</p>\n\n<p>My implementation of those structures are linked in the text above.</p>\n"},{"tags":[],"owner":{"account_id":382423,"reputation":5419,"user_id":737636,"accept_rate":56,"display_name":"StErMi"},"down_vote_count":0,"up_vote_count":25,"is_accepted":true,"score":25,"last_activity_date":1339083480,"creation_date":1339083480,"answer_id":10935115,"question_id":10929775,"body_markdown":"Thank you for all your answer. I made my working implementation.\r\nI think that I will need to improve it in order to make it works better with more caching in adding element to the tree structure.\r\n\r\nAs I said what I was needing was a structure that allow me to have a &quot;virtual&quot; rappresentation of a FS.\r\n\r\nMXMTree.java\r\n\r\n\r\n    public class MXMTree {\r\n    \r\n    \tMXMNode root;\r\n    \tMXMNode commonRoot;\r\n    \t\r\n    \tpublic MXMTree( MXMNode root ) {\r\n    \t\tthis.root = root;\r\n    \t\tcommonRoot = null;\r\n    \t}\r\n    \t\r\n    \tpublic void addElement( String elementValue ) {\t\r\n    \t\tString[] list = elementValue.split(&quot;/&quot;);\r\n    \t\t\r\n    \t\t// latest element of the list is the filename.extrension\r\n    \t\troot.addElement(root.incrementalPath, list);\r\n    \t\t\r\n    \t}\r\n    \t\r\n    \tpublic void printTree() {\r\n    \t\t//I move the tree common root to the current common root because I don&#39;t mind about initial folder\r\n    \t\t//that has only 1 child (and no leaf)\r\n    \t\tgetCommonRoot();\r\n    \t\tcommonRoot.printNode(0);\r\n    \t}\r\n    \t\r\n    \tpublic MXMNode getCommonRoot() {\r\n    \t\tif ( commonRoot != null)\r\n    \t\t\treturn commonRoot;\r\n    \t\telse {\r\n    \t\t\tMXMNode current = root;\r\n    \t\t\twhile ( current.leafs.size() &lt;= 0 ) {\r\n    \t\t\t\tcurrent = current.childs.get(0);\r\n    \t\t\t}\r\n    \t\t\tcommonRoot = current;\r\n    \t\t\treturn commonRoot;\r\n    \t\t}\r\n    \t\t\t\r\n    \t}\r\n    \t\r\n    \t\r\n    }\r\n\r\nMXMNode.java\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.Arrays;\r\n    import java.util.List;\r\n    \r\n    \r\n    public class MXMNode {\r\n    \t\r\n    \tList&lt;MXMNode&gt; childs;\r\n    \tList&lt;MXMNode&gt; leafs;\r\n    \tString data;\r\n    \tString incrementalPath;\r\n    \t\r\n    \tpublic MXMNode( String nodeValue, String incrementalPath ) {\r\n    \t\tchilds = new ArrayList&lt;MXMNode&gt;();\r\n    \t\tleafs = new ArrayList&lt;MXMNode&gt;();\r\n    \t\tdata = nodeValue;\r\n    \t\tthis. incrementalPath = incrementalPath;\r\n    \t}\r\n    \t\r\n    \tpublic boolean isLeaf() {\r\n    \t\treturn childs.isEmpty() &amp;&amp; leafs.isEmpty();\r\n    \t}\r\n    \t\r\n    \tpublic void addElement(String currentPath, String[] list) {\r\n    \t\t\r\n    \t\t//Avoid first element that can be an empty string if you split a string that has a starting slash as /sd/card/\r\n    \t\twhile( list[0] == null || list[0].equals(&quot;&quot;) )\r\n    \t\t\tlist = Arrays.copyOfRange(list, 1, list.length);\r\n    \t\t\r\n    \t\tMXMNode currentChild = new MXMNode(list[0], currentPath+&quot;/&quot;+list[0]);\r\n    \t\tif ( list.length == 1 ) {\r\n    \t\t\tleafs.add( currentChild );\r\n    \t\t\treturn;\r\n    \t\t} else {\r\n    \t\t\tint index = childs.indexOf( currentChild );\r\n    \t\t\tif ( index == -1 ) {\r\n    \t\t\t\tchilds.add( currentChild );\r\n    \t\t\t\tcurrentChild.addElement(currentChild.incrementalPath, Arrays.copyOfRange(list, 1, list.length));\r\n    \t\t\t} else {\r\n    \t\t\t\tMXMNode nextChild = childs.get(index);\r\n    \t\t\t\tnextChild.addElement(currentChild.incrementalPath, Arrays.copyOfRange(list, 1, list.length));\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \t@Override\r\n    \tpublic boolean equals(Object obj) {\r\n    \t\tMXMNode cmpObj = (MXMNode)obj;\r\n    \t\treturn incrementalPath.equals( cmpObj.incrementalPath ) &amp;&amp; data.equals( cmpObj.data );\r\n    \t}\r\n    \r\n    \tpublic void printNode( int increment ) {\r\n    \t\tfor (int i = 0; i &lt; increment; i++) {\r\n                System.out.print(&quot; &quot;);\r\n            }\r\n            System.out.println(incrementalPath + (isLeaf() ? &quot; -&gt; &quot; + data : &quot;&quot;)  );\r\n            for( MXMNode n: childs)\r\n            \tn.printNode(increment+2);\r\n            for( MXMNode n: leafs)\r\n            \tn.printNode(increment+2);\r\n    \t}\r\n    \t\r\n    \t@Override\r\n    \tpublic String toString() {\r\n    \t\treturn data;\r\n    \t}\r\n    \t\r\n    \r\n    }\r\n\r\n\r\nTest.java for test code\r\n\r\n\r\n    public class Test {\r\n    \r\n    \t/**\r\n    \t * @param args\r\n    \t */\r\n    \tpublic static void main(String[] args) {\r\n    \r\n    \t\tString slist[] = new String[] { \r\n    \t\t\t\t&quot;/mnt/sdcard/folder1/a/b/file1.file&quot;, \r\n    \t\t\t\t&quot;/mnt/sdcard/folder1/a/b/file2.file&quot;, \r\n    \t\t\t\t&quot;/mnt/sdcard/folder1/a/b/file3.file&quot;, \r\n    \t\t\t\t&quot;/mnt/sdcard/folder1/a/b/file4.file&quot;,\r\n    \t\t\t\t&quot;/mnt/sdcard/folder1/a/b/file5.file&quot;, \r\n    \t\t\t\t&quot;/mnt/sdcard/folder1/e/c/file6.file&quot;, \r\n    \t\t\t\t&quot;/mnt/sdcard/folder2/d/file7.file&quot;, \r\n    \t\t\t\t&quot;/mnt/sdcard/folder2/d/file8.file&quot;, \r\n    \t\t\t\t&quot;/mnt/sdcard/file9.file&quot; \r\n    \t\t};\r\n    \r\n    \t\tMXMTree tree = new MXMTree(new MXMNode(&quot;root&quot;, &quot;root&quot;));\r\n    \t\tfor (String data : slist) {\r\n    \t\t\ttree.addElement(data);\r\n    \t\t}\r\n    \r\n    \t\ttree.printTree();\r\n    \t}\r\n    \r\n    }\r\n\r\nPlease tell me if you have some good advice about improvments :)","title":"Java Tree to represent filesystem (files/dir) from list of paths","body":"<p>Thank you for all your answer. I made my working implementation.\nI think that I will need to improve it in order to make it works better with more caching in adding element to the tree structure.</p>\n\n<p>As I said what I was needing was a structure that allow me to have a \"virtual\" rappresentation of a FS.</p>\n\n<p>MXMTree.java</p>\n\n<pre><code>public class MXMTree {\n\n    MXMNode root;\n    MXMNode commonRoot;\n\n    public MXMTree( MXMNode root ) {\n        this.root = root;\n        commonRoot = null;\n    }\n\n    public void addElement( String elementValue ) { \n        String[] list = elementValue.split(\"/\");\n\n        // latest element of the list is the filename.extrension\n        root.addElement(root.incrementalPath, list);\n\n    }\n\n    public void printTree() {\n        //I move the tree common root to the current common root because I don't mind about initial folder\n        //that has only 1 child (and no leaf)\n        getCommonRoot();\n        commonRoot.printNode(0);\n    }\n\n    public MXMNode getCommonRoot() {\n        if ( commonRoot != null)\n            return commonRoot;\n        else {\n            MXMNode current = root;\n            while ( current.leafs.size() &lt;= 0 ) {\n                current = current.childs.get(0);\n            }\n            commonRoot = current;\n            return commonRoot;\n        }\n\n    }\n\n\n}\n</code></pre>\n\n<p>MXMNode.java</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.List;\n\n\npublic class MXMNode {\n\n    List&lt;MXMNode&gt; childs;\n    List&lt;MXMNode&gt; leafs;\n    String data;\n    String incrementalPath;\n\n    public MXMNode( String nodeValue, String incrementalPath ) {\n        childs = new ArrayList&lt;MXMNode&gt;();\n        leafs = new ArrayList&lt;MXMNode&gt;();\n        data = nodeValue;\n        this. incrementalPath = incrementalPath;\n    }\n\n    public boolean isLeaf() {\n        return childs.isEmpty() &amp;&amp; leafs.isEmpty();\n    }\n\n    public void addElement(String currentPath, String[] list) {\n\n        //Avoid first element that can be an empty string if you split a string that has a starting slash as /sd/card/\n        while( list[0] == null || list[0].equals(\"\") )\n            list = Arrays.copyOfRange(list, 1, list.length);\n\n        MXMNode currentChild = new MXMNode(list[0], currentPath+\"/\"+list[0]);\n        if ( list.length == 1 ) {\n            leafs.add( currentChild );\n            return;\n        } else {\n            int index = childs.indexOf( currentChild );\n            if ( index == -1 ) {\n                childs.add( currentChild );\n                currentChild.addElement(currentChild.incrementalPath, Arrays.copyOfRange(list, 1, list.length));\n            } else {\n                MXMNode nextChild = childs.get(index);\n                nextChild.addElement(currentChild.incrementalPath, Arrays.copyOfRange(list, 1, list.length));\n            }\n        }\n    }\n\n    @Override\n    public boolean equals(Object obj) {\n        MXMNode cmpObj = (MXMNode)obj;\n        return incrementalPath.equals( cmpObj.incrementalPath ) &amp;&amp; data.equals( cmpObj.data );\n    }\n\n    public void printNode( int increment ) {\n        for (int i = 0; i &lt; increment; i++) {\n            System.out.print(\" \");\n        }\n        System.out.println(incrementalPath + (isLeaf() ? \" -&gt; \" + data : \"\")  );\n        for( MXMNode n: childs)\n            n.printNode(increment+2);\n        for( MXMNode n: leafs)\n            n.printNode(increment+2);\n    }\n\n    @Override\n    public String toString() {\n        return data;\n    }\n\n\n}\n</code></pre>\n\n<p>Test.java for test code</p>\n\n<pre><code>public class Test {\n\n    /**\n     * @param args\n     */\n    public static void main(String[] args) {\n\n        String slist[] = new String[] { \n                \"/mnt/sdcard/folder1/a/b/file1.file\", \n                \"/mnt/sdcard/folder1/a/b/file2.file\", \n                \"/mnt/sdcard/folder1/a/b/file3.file\", \n                \"/mnt/sdcard/folder1/a/b/file4.file\",\n                \"/mnt/sdcard/folder1/a/b/file5.file\", \n                \"/mnt/sdcard/folder1/e/c/file6.file\", \n                \"/mnt/sdcard/folder2/d/file7.file\", \n                \"/mnt/sdcard/folder2/d/file8.file\", \n                \"/mnt/sdcard/file9.file\" \n        };\n\n        MXMTree tree = new MXMTree(new MXMNode(\"root\", \"root\"));\n        for (String data : slist) {\n            tree.addElement(data);\n        }\n\n        tree.printTree();\n    }\n\n}\n</code></pre>\n\n<p>Please tell me if you have some good advice about improvments :)</p>\n"},{"tags":[],"owner":{"account_id":1809091,"reputation":4321,"user_id":1645517,"accept_rate":54,"display_name":"Markus Schulte"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1512637887,"creation_date":1512637887,"answer_id":47691399,"question_id":10929775,"body_markdown":"I implemented a solution to the challenge myself, it is [available as a GitHubGist][1].\r\n\r\nI am representing each node of a filesystem-hierarchy in a DirectoryNode. A helper-method *createDirectoryTree(String[] filesystemList)* creates a direcotry-tree.\r\n\r\n\r\nHere is the usage example, which is included in the [GitHubGist][1].\r\n\r\n    final String[] list = new String[]{\r\n      &quot;/mnt/sdcard/folder1/a/b/file1.file&quot;,\r\n      &quot;/mnt/sdcard/folder1/a/b/file2.file&quot;,\r\n      &quot;/mnt/sdcard/folder1/a/b/file3.file&quot;,\r\n      &quot;/mnt/sdcard/folder1/a/b/file4.file&quot;,\r\n      &quot;/mnt/sdcard/folder1/a/b/file5.file&quot;,\r\n      &quot;/mnt/sdcard/folder1/e/c/file6.file&quot;,\r\n      &quot;/mnt/sdcard/folder2/d/file7.file&quot;,\r\n      &quot;/mnt/sdcard/folder2/d/file8.file&quot;,\r\n      &quot;/mnt/sdcard/file9.file&quot;\r\n    };\r\n\r\n    final DirectoryNode directoryRootNode = createDirectoryTree(list);\r\n\r\n    System.out.println(directoryRootNode);\r\n\r\nThe *System.out.println* -output is:\r\n\r\n      {value=&#39;mnt&#39;, children=[{value=&#39;sdcard&#39;, children=[{value=&#39;folder1&#39;, \r\n      children=[{value=&#39;a&#39;, children=[{value=&#39;b&#39;, children=[{value=&#39;file1.file&#39;, \r\n      children=[]}, {value=&#39;file2.file&#39;, children=[]}, {value=&#39;file3.file&#39;, \r\n      children=[]}, {value=&#39;file4.file&#39;, children=[]}, {value=&#39;file5.file&#39;, \r\n      children=[]}]}]}, {value=&#39;e&#39;, children=[{value=&#39;c&#39;, \r\n      children=[{value=&#39;file6.file&#39;, children=[]}]}]}]}, \r\n      {value=&#39;folder2&#39;, children=[{value=&#39;d&#39;, children=[{value=&#39;file7.file&#39;, \r\n      children=[]}, {value=&#39;file8.file&#39;, children=[]}]}]}, \r\n      {value=&#39;file9.file&#39;, children=[]}]}]}\r\n\r\n  [1]: https://gist.github.com/SchulteMarkus/1a67f4e6081d0f2f4e0481bf967fd17f &quot;Demonstrating how to convert a list of a filesystem-hierarchy to a data-structure Raw&quot;","title":"Java Tree to represent filesystem (files/dir) from list of paths","body":"<p>I implemented a solution to the challenge myself, it is <a href=\"https://gist.github.com/SchulteMarkus/1a67f4e6081d0f2f4e0481bf967fd17f\" rel=\"nofollow noreferrer\" title=\"Demonstrating how to convert a list of a filesystem-hierarchy to a data-structure Raw\">available as a GitHubGist</a>.</p>\n\n<p>I am representing each node of a filesystem-hierarchy in a DirectoryNode. A helper-method <em>createDirectoryTree(String[] filesystemList)</em> creates a direcotry-tree.</p>\n\n<p>Here is the usage example, which is included in the <a href=\"https://gist.github.com/SchulteMarkus/1a67f4e6081d0f2f4e0481bf967fd17f\" rel=\"nofollow noreferrer\" title=\"Demonstrating how to convert a list of a filesystem-hierarchy to a data-structure Raw\">GitHubGist</a>.</p>\n\n<pre><code>final String[] list = new String[]{\n  \"/mnt/sdcard/folder1/a/b/file1.file\",\n  \"/mnt/sdcard/folder1/a/b/file2.file\",\n  \"/mnt/sdcard/folder1/a/b/file3.file\",\n  \"/mnt/sdcard/folder1/a/b/file4.file\",\n  \"/mnt/sdcard/folder1/a/b/file5.file\",\n  \"/mnt/sdcard/folder1/e/c/file6.file\",\n  \"/mnt/sdcard/folder2/d/file7.file\",\n  \"/mnt/sdcard/folder2/d/file8.file\",\n  \"/mnt/sdcard/file9.file\"\n};\n\nfinal DirectoryNode directoryRootNode = createDirectoryTree(list);\n\nSystem.out.println(directoryRootNode);\n</code></pre>\n\n<p>The <em>System.out.println</em> -output is:</p>\n\n<pre><code>  {value='mnt', children=[{value='sdcard', children=[{value='folder1', \n  children=[{value='a', children=[{value='b', children=[{value='file1.file', \n  children=[]}, {value='file2.file', children=[]}, {value='file3.file', \n  children=[]}, {value='file4.file', children=[]}, {value='file5.file', \n  children=[]}]}]}, {value='e', children=[{value='c', \n  children=[{value='file6.file', children=[]}]}]}]}, \n  {value='folder2', children=[{value='d', children=[{value='file7.file', \n  children=[]}, {value='file8.file', children=[]}]}]}, \n  {value='file9.file', children=[]}]}]}\n</code></pre>\n"}],"owner":{"account_id":382423,"reputation":5419,"user_id":737636,"accept_rate":56,"display_name":"StErMi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37234,"favorite_count":0,"down_vote_count":0,"up_vote_count":22,"accepted_answer_id":10935115,"answer_count":5,"score":22,"last_activity_date":1651582976,"creation_date":1339063992,"question_id":10929775,"body_markdown":"I&#39;ve a list of paths like this \r\n\r\n    /mnt/sdcard/folder1/a/b/file1\r\n    /mnt/sdcard/folder1/a/b/file2\r\n    /mnt/sdcard/folder1/a/b/file3\r\n    /mnt/sdcard/folder1/a/b/file4\r\n    /mnt/sdcard/folder1/a/b/file5\r\n    /mnt/sdcard/folder1/e/c/file6\r\n    /mnt/sdcard/folder2/d/file7\r\n    /mnt/sdcard/folder2/d/file8\r\n    /mnt/sdcard/file9\r\n\r\nSo from this list of paths (Stings) I need to crete a Java Tree structure that has folders as nodes and files as leaf (there wont be empty folders as leaf).\r\n\r\nWhat I need I think is the add method where I pass to them a String (path of the file) and it add it to the correct place in the tree creating correct nodes (Folder) if they are not already there\r\n\r\nThis tree structure will need me to get list of nodes when I&#39;m on node and list of leafs (but I think this will be a normal features for trees)\r\n\r\nI will always have Strings as paths and not real file or folders.\r\nIs there something ready to use or a source code to start?\r\n\r\nThank you very much.\r\n\r\n","title":"Java Tree to represent filesystem (files/dir) from list of paths","body":"<p>I've a list of paths like this </p>\n\n<pre><code>/mnt/sdcard/folder1/a/b/file1\n/mnt/sdcard/folder1/a/b/file2\n/mnt/sdcard/folder1/a/b/file3\n/mnt/sdcard/folder1/a/b/file4\n/mnt/sdcard/folder1/a/b/file5\n/mnt/sdcard/folder1/e/c/file6\n/mnt/sdcard/folder2/d/file7\n/mnt/sdcard/folder2/d/file8\n/mnt/sdcard/file9\n</code></pre>\n\n<p>So from this list of paths (Stings) I need to crete a Java Tree structure that has folders as nodes and files as leaf (there wont be empty folders as leaf).</p>\n\n<p>What I need I think is the add method where I pass to them a String (path of the file) and it add it to the correct place in the tree creating correct nodes (Folder) if they are not already there</p>\n\n<p>This tree structure will need me to get list of nodes when I'm on node and list of leafs (but I think this will be a normal features for trees)</p>\n\n<p>I will always have Strings as paths and not real file or folders.\nIs there something ready to use or a source code to start?</p>\n\n<p>Thank you very much.</p>\n"},{"tags":["java","arraylist"],"comments":[{"owner":{"account_id":17260375,"reputation":460,"user_id":12642499,"display_name":"Esther"},"score":1,"creation_date":1651522005,"post_id":72091635,"comment_id":127380043,"body_markdown":"what did you try so far? this is not a code-writing service, we can help answer a *specific* question if you have one, but this question sounds like it&#39;s asking for ready code, and it is not even clear what, exactly, you want this code to do.","body":"what did you try so far? this is not a code-writing service, we can help answer a <i>specific</i> question if you have one, but this question sounds like it&#39;s asking for ready code, and it is not even clear what, exactly, you want this code to do."},{"owner":{"account_id":13377386,"reputation":305,"user_id":9653879,"display_name":"aki"},"score":0,"creation_date":1651542996,"post_id":72091635,"comment_id":127383980,"body_markdown":"I would have easily done this if ts with JS , Im new to Java. I was searching online on how to loop through an arraylist and compare object properties. I couldn&#39;t find any good examples which compared dates. Being kind to each other helps community growth","body":"I would have easily done this if ts with JS , Im new to Java. I was searching online on how to loop through an arraylist and compare object properties. I couldn&#39;t find any good examples which compared dates. Being kind to each other helps community growth"},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":1,"creation_date":1651546085,"post_id":72091635,"comment_id":127384341,"body_markdown":"if you are looking to remove the oldest utc, why not just have a variable pointing towards the current oldest utc found? as you iterate through the list, update if an older utc is found. After finish iterating. remove the oldest utc based on the variable. The logic of the code you wrote already has issues as you are not removing the oldest utc, rather the opposite.","body":"if you are looking to remove the oldest utc, why not just have a variable pointing towards the current oldest utc found? as you iterate through the list, update if an older utc is found. After finish iterating. remove the oldest utc based on the variable. The logic of the code you wrote already has issues as you are not removing the oldest utc, rather the opposite."}],"answers":[{"tags":[],"owner":{"account_id":13377386,"reputation":305,"user_id":9653879,"display_name":"aki"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651582777,"creation_date":1651582777,"answer_id":72099768,"question_id":72091635,"body_markdown":"Here&#39;s how i implemented it, \r\n\r\n```\r\n                  if(pList.size() &gt; 2) {\r\n                   for(int i = 1; i &lt; pList.size() ; i++ ) {\r\n                     Instant prior = pList.get( i - 1 ).getUtc();\r\n                        Instant current = pList.get( i ).getUtc();\r\n                        if(prior.isBefore(current)) {\r\n                            pList.remove(i-1);\r\n                        }\r\n                   }\r\n                  }\r\n```\r\n\r\nIt made sure that pList has only 2 items at given instance and removed the oldest if there&#39;s a new item coming into the list.","title":"loop through a list of objects with utc and remove the object with oldest utc java","body":"<p>Here's how i implemented it,</p>\n<pre><code>                  if(pList.size() &gt; 2) {\n                   for(int i = 1; i &lt; pList.size() ; i++ ) {\n                     Instant prior = pList.get( i - 1 ).getUtc();\n                        Instant current = pList.get( i ).getUtc();\n                        if(prior.isBefore(current)) {\n                            pList.remove(i-1);\n                        }\n                   }\n                  }\n</code></pre>\n<p>It made sure that pList has only 2 items at given instance and removed the oldest if there's a new item coming into the list.</p>\n"}],"owner":{"account_id":13377386,"reputation":305,"user_id":9653879,"display_name":"aki"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1651582777,"creation_date":1651520727,"question_id":72091635,"body_markdown":"I have a list like below \r\n\r\n```\r\n&quot;pList&quot;: [\r\n   {\r\n    &quot;Utc&quot;: &quot;2021-12-20T05:10:20+0000&quot;,\r\n    &quot;key&quot;: {\r\n     &quot;num&quot;: &quot;23131&quot;\r\n    }\r\n   },\r\n   {\r\n    &quot;Utc&quot;: &quot;2021-12-20T05:15:20+0000&quot;,\r\n    &quot;key&quot;: {\r\n     &quot;num&quot;: &quot;23131&quot;\r\n    }\r\n   },\r\n   {\r\n    &quot;Utc&quot;: &quot;2021-12-20T05:20:20+0000&quot;,\r\n    &quot;key&quot;: {\r\n     &quot;num&quot;: &quot;23131&quot;\r\n    }\r\n   }\r\n  ]\r\n```\r\n\r\nnow , i need to loop through this list and delete the oldest utc. How do i achieve this in java ? (List should contain 2 items at given instance. I need to look for the oldest utc item and remove it from the list)\r\n\r\nThis is what i have tried \r\n\r\n```\r\nif(pList.size() &gt; 2) {\r\n\r\n                   for(int i = 1; i &lt; pList.size() ; i++ ) {\r\n                     Instant prior = pList.get( i - 1 ).Utc();\r\n                        Instant current = pList.get( i ).Utc();\r\n                        if(prior.isBefore(current)) {\r\n                            pList.remove(i);\r\n                        }\r\n                   }\r\n                   \r\n                  }\r\n```\r\n\r\n\r\n\r\n","title":"loop through a list of objects with utc and remove the object with oldest utc java","body":"<p>I have a list like below</p>\n<pre><code>&quot;pList&quot;: [\n   {\n    &quot;Utc&quot;: &quot;2021-12-20T05:10:20+0000&quot;,\n    &quot;key&quot;: {\n     &quot;num&quot;: &quot;23131&quot;\n    }\n   },\n   {\n    &quot;Utc&quot;: &quot;2021-12-20T05:15:20+0000&quot;,\n    &quot;key&quot;: {\n     &quot;num&quot;: &quot;23131&quot;\n    }\n   },\n   {\n    &quot;Utc&quot;: &quot;2021-12-20T05:20:20+0000&quot;,\n    &quot;key&quot;: {\n     &quot;num&quot;: &quot;23131&quot;\n    }\n   }\n  ]\n</code></pre>\n<p>now , i need to loop through this list and delete the oldest utc. How do i achieve this in java ? (List should contain 2 items at given instance. I need to look for the oldest utc item and remove it from the list)</p>\n<p>This is what i have tried</p>\n<pre><code>if(pList.size() &gt; 2) {\n\n                   for(int i = 1; i &lt; pList.size() ; i++ ) {\n                     Instant prior = pList.get( i - 1 ).Utc();\n                        Instant current = pList.get( i ).Utc();\n                        if(prior.isBefore(current)) {\n                            pList.remove(i);\n                        }\n                   }\n                   \n                  }\n</code></pre>\n"},{"tags":["java","android","c++","java-native-interface","java-native-library"],"comments":[{"owner":{"account_id":6095312,"reputation":33135,"user_id":4756299,"display_name":"Andrew Henle"},"score":0,"creation_date":1630700457,"post_id":69012062,"comment_id":122037393,"body_markdown":"*this method opens the library libcloser.so first time and libcloser_2.so second time. These two libs are equals, only names are different*  ***WHY?!?!***  Read this:  https://community.oracle.com/tech/developers/discussion/1550086/how-to-unload-jni-native-library  And note that even Java 14 has no supported way to unload a native library:  https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/lang/System.html","body":"<i>this method opens the library libcloser.so first time and libcloser_2.so second time. These two libs are equals, only names are different</i>  <b><i>WHY?!?!</i></b>  Read this:  <a href=\"https://community.oracle.com/tech/developers/discussion/1550086/how-to-unload-jni-native-library\" rel=\"nofollow noreferrer\">community.oracle.com/tech/developers/discussion/1550086/&hellip;</a>  And note that even Java 14 has no supported way to unload a native library:  <a href=\"https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/lang/System.html\" rel=\"nofollow noreferrer\">docs.oracle.com/en/java/javase/14/docs/api/java.base/java/la&zwnj;&#8203;ng/&hellip;</a>"},{"owner":{"account_id":11304076,"reputation":133,"user_id":8289201,"accept_rate":25,"display_name":"Bistaff"},"score":0,"creation_date":1630923142,"post_id":69012062,"comment_id":122078350,"body_markdown":"&quot;&quot;&quot;this method opens the library libcloser.so first time and libcloser_2.so second time. These two libs are equals, only names are different&quot;&quot;&quot;.\nI&#39;ve created to equals libs, because i&#39;ve wanted to check which memory address has given me the exception and if the exception was generated from first library or from the second. The issue is explained following this concept.\nWhen the program tries to close the lib first time, the lib is closed successfully, but it seems like the native function registered is not being unregistered and generates exception on second actions cicle.","body":"&quot;&quot;&quot;this method opens the library libcloser.so first time and libcloser_2.so second time. These two libs are equals, only names are different&quot;&quot;&quot;. I&#39;ve created to equals libs, because i&#39;ve wanted to check which memory address has given me the exception and if the exception was generated from first library or from the second. The issue is explained following this concept. When the program tries to close the lib first time, the lib is closed successfully, but it seems like the native function registered is not being unregistered and generates exception on second actions cicle."},{"owner":{"account_id":11304076,"reputation":133,"user_id":8289201,"accept_rate":25,"display_name":"Bistaff"},"score":0,"creation_date":1630923145,"post_id":69012062,"comment_id":122078352,"body_markdown":"So I would like to know it there is a way to definetly unregister the native function","body":"So I would like to know it there is a way to definetly unregister the native function"}],"owner":{"account_id":11304076,"reputation":133,"user_id":8289201,"accept_rate":25,"display_name":"Bistaff"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":244,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1651582544,"creation_date":1630492214,"question_id":69012062,"body_markdown":"I have an Android app that is structured in the following way:\r\n * **CORE**: Is the class of the accessibility service that dinamically loads a few dex files. It will be loaded when app starts;\r\n * **MODULE**: Is the classe created by loading relative dex file\r\n\r\n### Actions\r\n1) When **Core** starts, in **onServiceConnected**, this service loads a native library **libbridge.so**.\r\n\r\n * **libbridge.so** exposes two methods:\r\n    * **openLib(module)**:\r\n       * this method opens the library **libcloser.so** first time and **libcloser_2.so** second time. **These two libs are equals, only names are different**.\r\n       * registers a function called **doSum** of **libcloser.so / libsloser_2.so** by using **RegisterNatives** JNI function, to the module received in input.\r\n         ```\r\n          void* func = dlsym(handle, &quot;Java_com_android_dynamic_FileGrabberModule_doSum&quot;);\r\n          static JNINativeMethod methods[] = { {&quot;doSum&quot;, &quot;()V&quot;, func} };\r\n          jclass clazz = env-&gt;GetObjectClass(module);\r\n          int ret = (*env).RegisterNatives(clazz, methods, sizeof(methods)/sizeof(methods[0]));\r\n          if (ret == 0) {\r\n              LOGI(&quot;registerNatives() Successfull registration&quot;);\r\n          } else {\r\n              LOGI(&quot;registerNatives() Registration Failed&quot;);\r\n          }\r\n          (*env).DeleteLocalRef( clazz );\r\n          ```\r\n     * **closeLib(module)**: Unregisters the function **doSum** for the module received in input and closes the  **libcloser.so / libsloser_2.so** lib\r\n       ```\r\n       jclass clazz = env-&gt;GetObjectClass(module);\r\n       int ret = (*env).UnregisterNatives(clazz);\r\n       if (ret == 0) {\r\n           LOGI(&quot;unregisterNatives() Successfull unregistration&quot;);\r\n       } else {\r\n           LOGI(&quot;unregisterNatives() Unregistration Failed&quot;);\r\n       }\r\n       (*env).DeleteLocalRef( clazz );\r\n       ```\r\n2) **Core** exposes two methods:\r\n   * **onOpenLib(module)**: Calls **libbridge.so** method **openLib(module)**\r\n   * **onCloseLib(module)**: Calls **libbridge.so** method **closeLib(module)**\r\n\r\n3) From the Module, dinamically loaded from a dex, in **doSumInLib** function (called from **constructor**), **Core** **openLib(module)** is called, passing **this**: ```Core.onOpenLib(this)```\r\n   * **libbridge.so** **openLib(module)** is called;\r\n   * **libcloser.so** is opened, and an handle is returned;\r\n   * the function **doSum** is registered (with the same handle);\r\n\r\n4) When **Module** call function **doSum()**, **libcloser.so** is called and **executes code successfully**.\r\n\r\n5) With certain conditions, **Core** terminates the **Module thread**.\r\n   * **Core** **onCloseLib(module)** is called;\r\n   * **libbridge.so** **closeLib(module)** is called;\r\n   * function are unregistered (with the same handle);\r\n   * **libcloser.so** is closed (by the same handle);\r\n\r\n6) After some time, **Core** reloads the **Module** from the dex file and tries to execute the same actions writed before **(Back to 3)**. **Now the lib that will be opened is *libcloser_2.so*.**\r\n\r\nAt this time, when **point 3** is executed again, when **Module** call **libcloser_2.so doSum()**, JNI crash and return this stack:\r\n```shell\r\nBuild fingerprint: &#39;xiaomi/jasmine/jasmine_sprout:9/PKQ1.180904.001/V10.0.17.0.PDIMIXM:user/release-keys&#39;\r\nDEBUG   : Revision: &#39;0&#39;\r\nDEBUG   : ABI: &#39;arm64&#39;\r\nDEBUG   : pid: 17433, tid: 17517, name: Thread-3  &gt;&gt;&gt; com.xxxxx.xxxx &lt;&lt;&lt;\r\nDEBUG   : signal 11 (SIGSEGV), code 2 (SEGV_ACCERR), fault addr 0x72f74536b8\r\nDEBUG   :     x0  000000730d82fc40  x1  00000072f92f58f4  x2  005b0000fc9280a0  x3  ac6603ef4e6e40fd\r\nDEBUG   :     x4  0000000000000000  x5  0000000000000002  x6  00000072fc9280a0  x7  ac6603ef4e6e40fd\r\nDEBUG   :     x8  ac6603ef4e6e40fd  x9  ac6603ef4e6e40fd  x10 0000000000430000  x11 00000072f92f5860\r\nDEBUG   :     x12 00000072f92f58f4  x13 00000072f92f58e8  x14 0000000000000000  x15 00000072f92f43b8\r\nDEBUG   :     x16 00000072f74536b8  x17 0000000000000000  x18 0000000000000010  x19 00000072fc928000\r\nDEBUG   :     x20 0000000000000000  x21 00000072fc928000  x22 00000072f92f5bc0  x23 00000072f653e33b\r\nDEBUG   :     x24 0000000000000004  x25 00000072f92f9588  x26 00000072fc9280a0  x27 0000000000000001\r\nDEBUG   :     x28 00000072f92f58f0  x29 00000072f92f58f0\r\nDEBUG   :     sp  00000072f92f58d0  lr  00000073162befe4  pc  00000072f74536b8\r\nlinker  : CANNOT LINK EXECUTABLE &quot;/system/bin/dpmd&quot;: &quot;/system/lib64/libdpmframework.so&quot; is 32-bit instead of 64-bit\r\n[Wed Sep 01 11:08:57 GMT+02:00 2021] : [Downloader_88cfcebe-c617-4e72-b27f-5676229afb61] Received heartbeat ack\r\nDEBUG   :\r\nDEBUG   : backtrace:\r\nDEBUG   :     #00 pc 00000000000eb6b8  &lt;anonymous:00000072f7368000&gt;\r\nDEBUG   :     #01 pc 000000000055dfe0  /system/lib64/libart.so (offset 0x43f000) (art_quick_generic_jni_trampoline+144)\r\nDEBUG   :     #02 pc 0000000000554f88  /system/lib64/libart.so (offset 0x43f000) (art_quick_invoke_stub+584)\r\nDEBUG   :     #03 pc 00000000000cf6c8  /system/lib64/libart.so (art::ArtMethod::Invoke(art::Thread*, unsigned int*, unsigned int, art::JValue*, char const*)+200)\r\nDEBUG   :     #04 pc 000000000027f230  /system/lib64/libart.so (offset 0x20d000) (art::interpreter::ArtInterpreterToCompiledCodeBridge(art::Thread*, art::ArtMethod*, art::ShadowFrame*, unsigned short, art::JValue*)+344)\r\nDEBUG   :     #05 pc 0000000000279244  /system/lib64/libart.so (offset 0x20d000) (bool art::interpreter::DoCall&lt;false, false&gt;(art::ArtMethod*, art::Thread*, art::ShadowFrame&amp;, art::Instruction const*, unsigned short, art::JValue*)+968)\r\nDEBUG   :     #06 pc 000000000052473c  /system/lib64/libart.so (offset 0x43f000) (MterpInvokeVirtual+588)\r\nDEBUG   :     #07 pc 0000000000547694  /system/lib64/libart.so (offset 0x43f000) (ExecuteMterpImpl+14228)\r\nDEBUG   :     #08 pc 0000000000010ec6  /dev/ashmem/dalvik-DEX data (deleted) (com.xxxx.xxxx.xxxx.doSumInLib+38)\r\n( Other logs ...)\r\n```\r\n\r\n### FYI\r\n * **0x72f74536b8** is the memory address of the function gotten from **libcloser.so** with **dlsym()**\r\n\r\nSO, JNI crash on **doSum** calling of **libcloser_2.so** and the address memory that generates exception is the handle of **doSum** of **libcloser.so** opened and closed before opening **libcloser_2.so**\r\n\r\nAnyone can help me?","title":"JNI: SIGSEGV when calling native function from Java, after native registration of same function on library second opening","body":"<p>I have an Android app that is structured in the following way:</p>\n<ul>\n<li><strong>CORE</strong>: Is the class of the accessibility service that dinamically loads a few dex files. It will be loaded when app starts;</li>\n<li><strong>MODULE</strong>: Is the classe created by loading relative dex file</li>\n</ul>\n<h3>Actions</h3>\n<ol>\n<li>When <strong>Core</strong> starts, in <strong>onServiceConnected</strong>, this service loads a native library <strong>libbridge.so</strong>.</li>\n</ol>\n<ul>\n<li><strong>libbridge.so</strong> exposes two methods:\n<ul>\n<li><strong>openLib(module)</strong>:\n<ul>\n<li>this method opens the library <strong>libcloser.so</strong> first time and <strong>libcloser_2.so</strong> second time. <strong>These two libs are equals, only names are different</strong>.</li>\n<li>registers a function called <strong>doSum</strong> of <strong>libcloser.so / libsloser_2.so</strong> by using <strong>RegisterNatives</strong> JNI function, to the module received in input.\n<pre><code> void* func = dlsym(handle, &quot;Java_com_android_dynamic_FileGrabberModule_doSum&quot;);\n static JNINativeMethod methods[] = { {&quot;doSum&quot;, &quot;()V&quot;, func} };\n jclass clazz = env-&gt;GetObjectClass(module);\n int ret = (*env).RegisterNatives(clazz, methods, sizeof(methods)/sizeof(methods[0]));\n if (ret == 0) {\n     LOGI(&quot;registerNatives() Successfull registration&quot;);\n } else {\n     LOGI(&quot;registerNatives() Registration Failed&quot;);\n }\n (*env).DeleteLocalRef( clazz );\n</code></pre>\n</li>\n</ul>\n</li>\n<li><strong>closeLib(module)</strong>: Unregisters the function <strong>doSum</strong> for the module received in input and closes the  <strong>libcloser.so / libsloser_2.so</strong> lib\n<pre><code>jclass clazz = env-&gt;GetObjectClass(module);\nint ret = (*env).UnregisterNatives(clazz);\nif (ret == 0) {\n    LOGI(&quot;unregisterNatives() Successfull unregistration&quot;);\n} else {\n    LOGI(&quot;unregisterNatives() Unregistration Failed&quot;);\n}\n(*env).DeleteLocalRef( clazz );\n</code></pre>\n</li>\n</ul>\n</li>\n</ul>\n<ol start=\"2\">\n<li><p><strong>Core</strong> exposes two methods:</p>\n<ul>\n<li><strong>onOpenLib(module)</strong>: Calls <strong>libbridge.so</strong> method <strong>openLib(module)</strong></li>\n<li><strong>onCloseLib(module)</strong>: Calls <strong>libbridge.so</strong> method <strong>closeLib(module)</strong></li>\n</ul>\n</li>\n<li><p>From the Module, dinamically loaded from a dex, in <strong>doSumInLib</strong> function (called from <strong>constructor</strong>), <strong>Core</strong> <strong>openLib(module)</strong> is called, passing <strong>this</strong>: <code>Core.onOpenLib(this)</code></p>\n<ul>\n<li><strong>libbridge.so</strong> <strong>openLib(module)</strong> is called;</li>\n<li><strong>libcloser.so</strong> is opened, and an handle is returned;</li>\n<li>the function <strong>doSum</strong> is registered (with the same handle);</li>\n</ul>\n</li>\n<li><p>When <strong>Module</strong> call function <strong>doSum()</strong>, <strong>libcloser.so</strong> is called and <strong>executes code successfully</strong>.</p>\n</li>\n<li><p>With certain conditions, <strong>Core</strong> terminates the <strong>Module thread</strong>.</p>\n<ul>\n<li><strong>Core</strong> <strong>onCloseLib(module)</strong> is called;</li>\n<li><strong>libbridge.so</strong> <strong>closeLib(module)</strong> is called;</li>\n<li>function are unregistered (with the same handle);</li>\n<li><strong>libcloser.so</strong> is closed (by the same handle);</li>\n</ul>\n</li>\n<li><p>After some time, <strong>Core</strong> reloads the <strong>Module</strong> from the dex file and tries to execute the same actions writed before <strong>(Back to 3)</strong>. <strong>Now the lib that will be opened is <em>libcloser_2.so</em>.</strong></p>\n</li>\n</ol>\n<p>At this time, when <strong>point 3</strong> is executed again, when <strong>Module</strong> call <strong>libcloser_2.so doSum()</strong>, JNI crash and return this stack:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>Build fingerprint: 'xiaomi/jasmine/jasmine_sprout:9/PKQ1.180904.001/V10.0.17.0.PDIMIXM:user/release-keys'\nDEBUG   : Revision: '0'\nDEBUG   : ABI: 'arm64'\nDEBUG   : pid: 17433, tid: 17517, name: Thread-3  &gt;&gt;&gt; com.xxxxx.xxxx &lt;&lt;&lt;\nDEBUG   : signal 11 (SIGSEGV), code 2 (SEGV_ACCERR), fault addr 0x72f74536b8\nDEBUG   :     x0  000000730d82fc40  x1  00000072f92f58f4  x2  005b0000fc9280a0  x3  ac6603ef4e6e40fd\nDEBUG   :     x4  0000000000000000  x5  0000000000000002  x6  00000072fc9280a0  x7  ac6603ef4e6e40fd\nDEBUG   :     x8  ac6603ef4e6e40fd  x9  ac6603ef4e6e40fd  x10 0000000000430000  x11 00000072f92f5860\nDEBUG   :     x12 00000072f92f58f4  x13 00000072f92f58e8  x14 0000000000000000  x15 00000072f92f43b8\nDEBUG   :     x16 00000072f74536b8  x17 0000000000000000  x18 0000000000000010  x19 00000072fc928000\nDEBUG   :     x20 0000000000000000  x21 00000072fc928000  x22 00000072f92f5bc0  x23 00000072f653e33b\nDEBUG   :     x24 0000000000000004  x25 00000072f92f9588  x26 00000072fc9280a0  x27 0000000000000001\nDEBUG   :     x28 00000072f92f58f0  x29 00000072f92f58f0\nDEBUG   :     sp  00000072f92f58d0  lr  00000073162befe4  pc  00000072f74536b8\nlinker  : CANNOT LINK EXECUTABLE &quot;/system/bin/dpmd&quot;: &quot;/system/lib64/libdpmframework.so&quot; is 32-bit instead of 64-bit\n[Wed Sep 01 11:08:57 GMT+02:00 2021] : [Downloader_88cfcebe-c617-4e72-b27f-5676229afb61] Received heartbeat ack\nDEBUG   :\nDEBUG   : backtrace:\nDEBUG   :     #00 pc 00000000000eb6b8  &lt;anonymous:00000072f7368000&gt;\nDEBUG   :     #01 pc 000000000055dfe0  /system/lib64/libart.so (offset 0x43f000) (art_quick_generic_jni_trampoline+144)\nDEBUG   :     #02 pc 0000000000554f88  /system/lib64/libart.so (offset 0x43f000) (art_quick_invoke_stub+584)\nDEBUG   :     #03 pc 00000000000cf6c8  /system/lib64/libart.so (art::ArtMethod::Invoke(art::Thread*, unsigned int*, unsigned int, art::JValue*, char const*)+200)\nDEBUG   :     #04 pc 000000000027f230  /system/lib64/libart.so (offset 0x20d000) (art::interpreter::ArtInterpreterToCompiledCodeBridge(art::Thread*, art::ArtMethod*, art::ShadowFrame*, unsigned short, art::JValue*)+344)\nDEBUG   :     #05 pc 0000000000279244  /system/lib64/libart.so (offset 0x20d000) (bool art::interpreter::DoCall&lt;false, false&gt;(art::ArtMethod*, art::Thread*, art::ShadowFrame&amp;, art::Instruction const*, unsigned short, art::JValue*)+968)\nDEBUG   :     #06 pc 000000000052473c  /system/lib64/libart.so (offset 0x43f000) (MterpInvokeVirtual+588)\nDEBUG   :     #07 pc 0000000000547694  /system/lib64/libart.so (offset 0x43f000) (ExecuteMterpImpl+14228)\nDEBUG   :     #08 pc 0000000000010ec6  /dev/ashmem/dalvik-DEX data (deleted) (com.xxxx.xxxx.xxxx.doSumInLib+38)\n( Other logs ...)\n</code></pre>\n<h3>FYI</h3>\n<ul>\n<li><strong>0x72f74536b8</strong> is the memory address of the function gotten from <strong>libcloser.so</strong> with <strong>dlsym()</strong></li>\n</ul>\n<p>SO, JNI crash on <strong>doSum</strong> calling of <strong>libcloser_2.so</strong> and the address memory that generates exception is the handle of <strong>doSum</strong> of <strong>libcloser.so</strong> opened and closed before opening <strong>libcloser_2.so</strong></p>\n<p>Anyone can help me?</p>\n"},{"tags":["java","tomcat","servlets","server","httpresponse"],"comments":[{"owner":{"account_id":7701,"reputation":47163,"user_id":13447,"accept_rate":100,"display_name":"Olaf Kock"},"score":0,"creation_date":1651582952,"post_id":72099682,"comment_id":127393435,"body_markdown":"If there are other layers in between: How do you know that this is a problem on the Tomcat side, and not on load-balancer or webserver side? Based on that infrastructure, this question sounds suspiciously like a system administration (and configuration) question, rather than a programming question as defined in [help/on-topic]","body":"If there are other layers in between: How do you know that this is a problem on the Tomcat side, and not on load-balancer or webserver side? Based on that infrastructure, this question sounds suspiciously like a system administration (and configuration) question, rather than a programming question as defined in <a href=\"https://stackoverflow.com/help/on-topic\">help center</a>"},{"owner":{"account_id":1617839,"reputation":324,"user_id":1495021,"accept_rate":75,"display_name":"YS_NE"},"score":1,"creation_date":1651583092,"post_id":72099682,"comment_id":127393497,"body_markdown":"@OlafKock -  Sure but I want to know if Tomcat itself can object, if lets say a response of 2GB ended up. Is there any limit on response size from tomcat side?","body":"@OlafKock -  Sure but I want to know if Tomcat itself can object, if lets say a response of 2GB ended up. Is there any limit on response size from tomcat side?"},{"owner":{"account_id":978946,"reputation":1499,"user_id":999198,"accept_rate":80,"display_name":"comodoro"},"score":0,"creation_date":1661962609,"post_id":72099682,"comment_id":129897916,"body_markdown":"Same here for Tomcat 9 and 10","body":"Same here for Tomcat 9 and 10"}],"owner":{"account_id":1617839,"reputation":324,"user_id":1495021,"accept_rate":75,"display_name":"YS_NE"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":302,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1651582463,"creation_date":1651582463,"question_id":72099682,"body_markdown":"I am looking for how to configure or verify limits of response size a Tomcat 8 server can support. I have some GET apis which can return a very large response. I see whenever response is like 50MB or 100MB there is no problem, but sometime it could be much larger than this size. Could be in GBs. Whenever that happens, api is failing. Can someone suggest that at least for Tomcat level, it shouldnt fail. For the other layers e.g. load balancer or web server I will look into it.  I know there is request size limit which could be configured by maxHttpHeaderSize. But I am looking for response size.","title":"How to configure limit of response size from Tomcat8 server","body":"<p>I am looking for how to configure or verify limits of response size a Tomcat 8 server can support. I have some GET apis which can return a very large response. I see whenever response is like 50MB or 100MB there is no problem, but sometime it could be much larger than this size. Could be in GBs. Whenever that happens, api is failing. Can someone suggest that at least for Tomcat level, it shouldnt fail. For the other layers e.g. load balancer or web server I will look into it.  I know there is request size limit which could be configured by maxHttpHeaderSize. But I am looking for response size.</p>\n"},{"tags":["java","spring","oracle","hibernate","jpa"],"comments":[{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1651578181,"post_id":72098786,"comment_id":127391644,"body_markdown":"Maybe an issue with `private List&lt;OrderDocDAO&gt; DOCS;`","body":"Maybe an issue with <code>private List&lt;OrderDocDAO&gt; DOCS;</code>"},{"owner":{"account_id":3454968,"reputation":827,"user_id":4252857,"display_name":"AlexKibo88"},"score":0,"creation_date":1651578608,"post_id":72098786,"comment_id":127391793,"body_markdown":"Hi! Why is that? That parameter could be null, since no DOCS could be lined to the parent DAO. Besides, looking a the logs, the error is encountered when the first INSERT statement for DART_ODATE is processed.","body":"Hi! Why is that? That parameter could be null, since no DOCS could be lined to the parent DAO. Besides, looking a the logs, the error is encountered when the first INSERT statement for DART_ODATE is processed."},{"owner":{"account_id":3454968,"reputation":827,"user_id":4252857,"display_name":"AlexKibo88"},"score":0,"creation_date":1651578724,"post_id":72098786,"comment_id":127391827,"body_markdown":"org.springframework.orm.jpa.JpaSystemException: could not insert: [eu.unicredit.dtm.dtm_be.dao.oracle.OrderDateDAO]; nested exception is org.hibernate.exception.GenericJDBCException: could not insert: [eu.unicredit.dtm.dtm_be.dao.oracle.OrderDateDAO]","body":"org.springframework.orm.jpa.JpaSystemException: could not insert: [eu.unicredit.dtm.dtm_be.dao.oracle.OrderDateDAO]; nested exception is org.hibernate.exception.GenericJDBCException: could not insert: [eu.unicredit.dtm.dtm_be.dao.oracle.OrderDateDAO]"}],"answers":[{"tags":[],"owner":{"account_id":3454968,"reputation":827,"user_id":4252857,"display_name":"AlexKibo88"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651581972,"creation_date":1651581972,"answer_id":72099580,"question_id":72098786,"body_markdown":"I finally managed to understand my mistake!\r\n\r\nThe issue was related to a wrong use of the *JoinColumn* annotation.\r\nBasically, I removed the **ORDER** attribute within the *OrderDateDAO&quot;, and changed the parent **DATES** attribute as follows:\r\n```\r\n@OneToMany(cascade = CascadeType.ALL)\r\n@JoinColumn(name = &quot;REF_ORDERID&quot;, referencedColumnName = &quot;ORDERID&quot;)\r\n@ToString.Exclude\r\nprivate List&lt;OrderDateDAO&gt; DATES;\r\n```\r\nUsing a uni-directional relation, the INSERT statement worked like a charm! :-)","title":"Spring JPA - &quot;Invalid column index&quot; when inserting in DB","body":"<p>I finally managed to understand my mistake!</p>\n<p>The issue was related to a wrong use of the <em>JoinColumn</em> annotation.\nBasically, I removed the <strong>ORDER</strong> attribute within the *OrderDateDAO&quot;, and changed the parent <strong>DATES</strong> attribute as follows:</p>\n<pre><code>@OneToMany(cascade = CascadeType.ALL)\n@JoinColumn(name = &quot;REF_ORDERID&quot;, referencedColumnName = &quot;ORDERID&quot;)\n@ToString.Exclude\nprivate List&lt;OrderDateDAO&gt; DATES;\n</code></pre>\n<p>Using a uni-directional relation, the INSERT statement worked like a charm! :-)</p>\n"}],"owner":{"account_id":3454968,"reputation":827,"user_id":4252857,"display_name":"AlexKibo88"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":443,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1651581972,"creation_date":1651577687,"question_id":72098786,"body_markdown":"I am facing an issue when trying to insert 1 record in a parent table (**DART_ORDER**) and 2 records in a child table connected to the parent (**DART_ODATE**). Those 2 tables are linked by a OneToMany-ManyToOne relation as follows:\r\n\r\n```\r\n@Getter\r\n@Setter\r\n@ToString\r\n@NoArgsConstructor\r\n@Accessors(chain = true)\r\n@Entity\r\n@Table(\r\n    name = &quot;DART_ORDER&quot;,\r\n    schema = Constants.ORACLE_DB_SCHEMA\r\n)\r\npublic class OrderDAO implements Serializable {\r\n\r\n  @NotNull\r\n  private String WHY;\r\n\r\n  @NotNull\r\n  private String WHO;\r\n\r\n  @Id\r\n  @NotNull\r\n  private String ORDERID;\r\n\r\n  private String DESCRIPTION;\r\n\r\n  @NotNull\r\n  private String STATUS;\r\n\r\n  @NotNull\r\n  private String COUNTRY;\r\n\r\n  @NotNull\r\n  private String TYPE;\r\n\r\n  @NotNull\r\n  private String REPETITION;\r\n\r\n  private String REF_REFORDERID;\r\n\r\n  @OneToMany(mappedBy = &quot;ORDER&quot;, cascade = CascadeType.ALL)\r\n  @OrderBy(&quot;DID ASC&quot;)\r\n  @ToString.Exclude\r\n  private List&lt;OrderDateDAO&gt; DATES;\r\n\r\n  @OneToMany(mappedBy = &quot;ORDER&quot;, cascade = CascadeType.ALL)\r\n  @OrderBy(&quot;DID ASC&quot;)\r\n  @ToString.Exclude\r\n  private List&lt;OrderDocDAO&gt; DOCS;\r\n\r\n}\r\n```\r\n```\r\n@Getter\r\n@Setter\r\n@ToString\r\n@NoArgsConstructor\r\n@Accessors(chain = true)\r\n@Entity\r\n@Table(\r\n    name = &quot;DART_ODATE&quot;,\r\n    schema = Constants.ORACLE_DB_SCHEMA,\r\n    indexes = @Index(\r\n        name = &quot;PK_DART_ODATE&quot;,\r\n        columnList = &quot;REF_ORDERID, ODTTYPE&quot;,\r\n        unique = true\r\n    )\r\n)\r\n@IdClass(OrderDateDAO.class)\r\npublic class OrderDateDAO implements Serializable {\r\n\r\n  @NotNull\r\n  private String WHY;\r\n\r\n  @NotNull\r\n  private String WHO;\r\n\r\n  @Id\r\n  @NotNull\r\n  private String REF_ORDERID;\r\n\r\n  @Id\r\n  @NotNull\r\n  private String ODTTYPE;\r\n\r\n  @NotNull\r\n  private LocalDate ODATE;\r\n\r\n  @ManyToOne(fetch = FetchType.LAZY)\r\n  @JoinColumn(name = &quot;REF_ORDERID&quot;, referencedColumnName = &quot;ORDERID&quot;, insertable = false, updatable = false)\r\n  @ToString.Exclude\r\n  private OrderDAO ORDER;\r\n\r\n}\r\n```\r\nWhen I try saving a record giving a complete *OrderDAO* object, I get the following exception:\r\n\r\n&gt; Caused by: java.sql.SQLException: Invalid column index\r\n\tat oracle.jdbc.driver.OraclePreparedStatement.setFormOfUseInternal(OraclePreparedStatement.java:10470)\r\n\tat oracle.jdbc.driver.OraclePreparedStatement.setFormOfUseInternal(OraclePreparedStatement.java:10451)\r\n\tat oracle.jdbc.driver.OraclePreparedStatement.setString(OraclePreparedStatement.java:5240)\r\n\tat oracle.jdbc.driver.OraclePreparedStatementWrapper.setString(OraclePreparedStatementWrapper.java:255)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.setString(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.type.descriptor.sql.VarcharTypeDescriptor$1.doBind(VarcharTypeDescriptor.java:46)\r\n\tat org.hibernate.type.descriptor.sql.BasicBinder.bind(BasicBinder.java:73)\r\n\tat org.hibernate.type.AbstractStandardBasicType.nullSafeSet(AbstractStandardBasicType.java:276)\r\n\tat org.hibernate.type.AbstractStandardBasicType.nullSafeSet(AbstractStandardBasicType.java:271)\r\n\tat org.hibernate.type.ComponentType.nullSafeSet(ComponentType.java:340)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.dehydrateId(AbstractEntityPersister.java:3121)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.dehydrate(AbstractEntityPersister.java:3079)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3372)\r\n\t... 87 more\r\n\r\n\r\nBy enabling the logs for Hibernate&#39;s SQL statements, I noticed that the insert one for the *DART_ODATE* table has the correct number of *?* symbols as parameters, but, for no apparent reason, the log immediately below shows **7 parameters passed, instead of 6**, among which 1 seems to be *null*.\r\n\r\n&gt; 2022-05-03T13:27:24,074 TRACE [http-nio-8080-exec-5] o.h.t.d.s.BasicBinder: binding parameter [4] as [VARCHAR] - [null]\r\n\r\nI don&#39;t honestly know why it keeps considering 1 parameter in addition, since the only additional mapping set in the DAO is the *JoinColumn* one...\r\nBesides, I already tried upgrading both my SpringBoot and Hibernate Validator versions to the latest ones, but I still got the error.\r\n\r\nHas any of you experienced the same issue?\r\n\r\nThank you.\r\n\r\nRegards,\r\nA.M.","title":"Spring JPA - &quot;Invalid column index&quot; when inserting in DB","body":"<p>I am facing an issue when trying to insert 1 record in a parent table (<strong>DART_ORDER</strong>) and 2 records in a child table connected to the parent (<strong>DART_ODATE</strong>). Those 2 tables are linked by a OneToMany-ManyToOne relation as follows:</p>\n<pre><code>@Getter\n@Setter\n@ToString\n@NoArgsConstructor\n@Accessors(chain = true)\n@Entity\n@Table(\n    name = &quot;DART_ORDER&quot;,\n    schema = Constants.ORACLE_DB_SCHEMA\n)\npublic class OrderDAO implements Serializable {\n\n  @NotNull\n  private String WHY;\n\n  @NotNull\n  private String WHO;\n\n  @Id\n  @NotNull\n  private String ORDERID;\n\n  private String DESCRIPTION;\n\n  @NotNull\n  private String STATUS;\n\n  @NotNull\n  private String COUNTRY;\n\n  @NotNull\n  private String TYPE;\n\n  @NotNull\n  private String REPETITION;\n\n  private String REF_REFORDERID;\n\n  @OneToMany(mappedBy = &quot;ORDER&quot;, cascade = CascadeType.ALL)\n  @OrderBy(&quot;DID ASC&quot;)\n  @ToString.Exclude\n  private List&lt;OrderDateDAO&gt; DATES;\n\n  @OneToMany(mappedBy = &quot;ORDER&quot;, cascade = CascadeType.ALL)\n  @OrderBy(&quot;DID ASC&quot;)\n  @ToString.Exclude\n  private List&lt;OrderDocDAO&gt; DOCS;\n\n}\n</code></pre>\n<pre><code>@Getter\n@Setter\n@ToString\n@NoArgsConstructor\n@Accessors(chain = true)\n@Entity\n@Table(\n    name = &quot;DART_ODATE&quot;,\n    schema = Constants.ORACLE_DB_SCHEMA,\n    indexes = @Index(\n        name = &quot;PK_DART_ODATE&quot;,\n        columnList = &quot;REF_ORDERID, ODTTYPE&quot;,\n        unique = true\n    )\n)\n@IdClass(OrderDateDAO.class)\npublic class OrderDateDAO implements Serializable {\n\n  @NotNull\n  private String WHY;\n\n  @NotNull\n  private String WHO;\n\n  @Id\n  @NotNull\n  private String REF_ORDERID;\n\n  @Id\n  @NotNull\n  private String ODTTYPE;\n\n  @NotNull\n  private LocalDate ODATE;\n\n  @ManyToOne(fetch = FetchType.LAZY)\n  @JoinColumn(name = &quot;REF_ORDERID&quot;, referencedColumnName = &quot;ORDERID&quot;, insertable = false, updatable = false)\n  @ToString.Exclude\n  private OrderDAO ORDER;\n\n}\n</code></pre>\n<p>When I try saving a record giving a complete <em>OrderDAO</em> object, I get the following exception:</p>\n<blockquote>\n<p>Caused by: java.sql.SQLException: Invalid column index\nat oracle.jdbc.driver.OraclePreparedStatement.setFormOfUseInternal(OraclePreparedStatement.java:10470)\nat oracle.jdbc.driver.OraclePreparedStatement.setFormOfUseInternal(OraclePreparedStatement.java:10451)\nat oracle.jdbc.driver.OraclePreparedStatement.setString(OraclePreparedStatement.java:5240)\nat oracle.jdbc.driver.OraclePreparedStatementWrapper.setString(OraclePreparedStatementWrapper.java:255)\nat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.setString(HikariProxyPreparedStatement.java)\nat org.hibernate.type.descriptor.sql.VarcharTypeDescriptor$1.doBind(VarcharTypeDescriptor.java:46)\nat org.hibernate.type.descriptor.sql.BasicBinder.bind(BasicBinder.java:73)\nat org.hibernate.type.AbstractStandardBasicType.nullSafeSet(AbstractStandardBasicType.java:276)\nat org.hibernate.type.AbstractStandardBasicType.nullSafeSet(AbstractStandardBasicType.java:271)\nat org.hibernate.type.ComponentType.nullSafeSet(ComponentType.java:340)\nat org.hibernate.persister.entity.AbstractEntityPersister.dehydrateId(AbstractEntityPersister.java:3121)\nat org.hibernate.persister.entity.AbstractEntityPersister.dehydrate(AbstractEntityPersister.java:3079)\nat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3372)\n... 87 more</p>\n</blockquote>\n<p>By enabling the logs for Hibernate's SQL statements, I noticed that the insert one for the <em>DART_ODATE</em> table has the correct number of <em>?</em> symbols as parameters, but, for no apparent reason, the log immediately below shows <strong>7 parameters passed, instead of 6</strong>, among which 1 seems to be <em>null</em>.</p>\n<blockquote>\n<p>2022-05-03T13:27:24,074 TRACE [http-nio-8080-exec-5] o.h.t.d.s.BasicBinder: binding parameter [4] as [VARCHAR] - [null]</p>\n</blockquote>\n<p>I don't honestly know why it keeps considering 1 parameter in addition, since the only additional mapping set in the DAO is the <em>JoinColumn</em> one...\nBesides, I already tried upgrading both my SpringBoot and Hibernate Validator versions to the latest ones, but I still got the error.</p>\n<p>Has any of you experienced the same issue?</p>\n<p>Thank you.</p>\n<p>Regards,\nA.M.</p>\n"},{"tags":["java","multidimensional-array"],"owner":{"account_id":25182927,"reputation":11,"user_id":19024216,"display_name":"sbs94"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1651581937,"creation_date":1651581937,"question_id":72099571,"body_markdown":"    public class J1_LAB08_1 {\r\n    public static void main(String[] args) {\r\n        int r1 = 5, c1 = 3;//rows and column for matrix a\r\n        int r2 = 3, c2 = 4;//rows and column for matrix b\r\n        int matrixA[][] = new int[5][3];//initialize matrix a\r\n        System.out.println(&quot;Matrix A&quot;);\r\n        for (int i = 0; i &lt; matrixA.length; i++) {\r\n            for (int j = 0; j &lt; matrixA[i].length; j++) {//create random single integer matrix\r\n                matrixA[i][j] = ((int) (Math.random() * 10));\r\n                System.out.print(matrixA[i][j]);//print matrix a\r\n            }\r\n            System.out.println();\r\n        }\r\n        System.out.println();\r\n        System.out.println(&quot;Matrix B&quot;);\r\n        int matrixB[][] = new int[3][4];\r\n        for (int i = 0; i &lt; matrixB.length; i++) {\r\n            for (int j = 0; j &lt; matrixB[i].length; j++) {//create random single integer matrix\r\n                matrixB[i][j] = ((int) (Math.random() * 10));\r\n                System.out.print(matrixB[i][j]);//print matrix b\r\n            }\r\n            System.out.println();\r\n        }\r\n        System.out.println();\r\n        int[][] matrixC = multiplyMatrices(matrixA, matrixB, r1, c1, c2);//pass variables to multiply matrices function\r\n        printC(matrixC);//print matrix c\r\n\r\n    }\r\n    public static int[][] multiplyMatrices(int[][] matrixA, int[][] matrixB, int r1, int c1, int c2){//multiply the 2 given matrices and return the product\r\n        int[][] matrixC = new int[r1][c2];//initialize the product matrix using row a and column 2 as its parameters\r\n        for(int i = 0; i &lt; r1; i++) {\r\n            for (int j = 0; j &lt; c2; j++) {\r\n                for (int k = 0; k &lt; c1; k++) {\r\n                    matrixC[i][j] += matrixA[i][k] * matrixB[k][j];//multiply using textbook formula\r\n                }\r\n            }\r\n        }\r\n        return matrixC;\r\n    }\r\n    public static void printC(int[][] matrixC) {//print the matrix\r\n        System.out.println(&quot;A x B is: &quot;);\r\n        for(int[] row : matrixC) {\r\n            for (int column : row) {\r\n                System.out.print(column + &quot;    &quot;);\r\n            }\r\n            System.out.println();\r\n        }\r\n    }\r\n}\r\n\r\n&gt; is there any way to simplify my code for matrix multiplication? \r\n&gt; the resulting matrix should be 3 x 5 after multiplication\r\n&gt; any help would be greatly appreciated, thank you for your time and consideration.\r\n\r\n\r\n\r\n","title":"is there any way to simplify my code for matrix multiplication?","body":"<pre><code>public class J1_LAB08_1 {\npublic static void main(String[] args) {\n    int r1 = 5, c1 = 3;//rows and column for matrix a\n    int r2 = 3, c2 = 4;//rows and column for matrix b\n    int matrixA[][] = new int[5][3];//initialize matrix a\n    System.out.println(&quot;Matrix A&quot;);\n    for (int i = 0; i &lt; matrixA.length; i++) {\n        for (int j = 0; j &lt; matrixA[i].length; j++) {//create random single integer matrix\n            matrixA[i][j] = ((int) (Math.random() * 10));\n            System.out.print(matrixA[i][j]);//print matrix a\n        }\n        System.out.println();\n    }\n    System.out.println();\n    System.out.println(&quot;Matrix B&quot;);\n    int matrixB[][] = new int[3][4];\n    for (int i = 0; i &lt; matrixB.length; i++) {\n        for (int j = 0; j &lt; matrixB[i].length; j++) {//create random single integer matrix\n            matrixB[i][j] = ((int) (Math.random() * 10));\n            System.out.print(matrixB[i][j]);//print matrix b\n        }\n        System.out.println();\n    }\n    System.out.println();\n    int[][] matrixC = multiplyMatrices(matrixA, matrixB, r1, c1, c2);//pass variables to multiply matrices function\n    printC(matrixC);//print matrix c\n\n}\npublic static int[][] multiplyMatrices(int[][] matrixA, int[][] matrixB, int r1, int c1, int c2){//multiply the 2 given matrices and return the product\n    int[][] matrixC = new int[r1][c2];//initialize the product matrix using row a and column 2 as its parameters\n    for(int i = 0; i &lt; r1; i++) {\n        for (int j = 0; j &lt; c2; j++) {\n            for (int k = 0; k &lt; c1; k++) {\n                matrixC[i][j] += matrixA[i][k] * matrixB[k][j];//multiply using textbook formula\n            }\n        }\n    }\n    return matrixC;\n}\npublic static void printC(int[][] matrixC) {//print the matrix\n    System.out.println(&quot;A x B is: &quot;);\n    for(int[] row : matrixC) {\n        for (int column : row) {\n            System.out.print(column + &quot;    &quot;);\n        }\n        System.out.println();\n    }\n}\n</code></pre>\n<p>}</p>\n<blockquote>\n<p>is there any way to simplify my code for matrix multiplication?\nthe resulting matrix should be 3 x 5 after multiplication\nany help would be greatly appreciated, thank you for your time and consideration.</p>\n</blockquote>\n"},{"tags":["java","android","android-recyclerview"],"comments":[{"owner":{"account_id":3292987,"reputation":11366,"user_id":2770850,"accept_rate":85,"display_name":"Nabin"},"score":0,"creation_date":1495104347,"post_id":44043501,"comment_id":75116461,"body_markdown":"Does this help any? http://stackoverflow.com/questions/26370289/snappy-scrolling-in-recyclerview","body":"Does this help any? <a href=\"http://stackoverflow.com/questions/26370289/snappy-scrolling-in-recyclerview\" title=\"snappy scrolling in recyclerview\">stackoverflow.com/questions/26370289/&hellip;</a>"},{"owner":{"account_id":3292987,"reputation":11366,"user_id":2770850,"accept_rate":85,"display_name":"Nabin"},"score":0,"creation_date":1495104457,"post_id":44043501,"comment_id":75116547,"body_markdown":"See its second answer and comment to it as well. :)","body":"See its second answer and comment to it as well. :)"}],"answers":[{"tags":[],"owner":{"account_id":2516691,"reputation":5379,"user_id":2187976,"accept_rate":70,"display_name":"Mohamed ALOUANE"},"down_vote_count":0,"up_vote_count":105,"is_accepted":false,"score":105,"last_activity_date":1496337144,"creation_date":1496337144,"answer_id":44313476,"question_id":44043501,"body_markdown":"I managed to sovle this with adding this line \r\n\r\n    recyclerView.setOnFlingListener(null); \r\n\r\nbefore \r\n\r\n    snapHelper.attachToRecyclerView(recyclerView);\r\n\r\n\r\n\r\n","title":"An instance of OnFlingListener already set in Recyclerview","body":"<p>I managed to sovle this with adding this line </p>\n\n<pre><code>recyclerView.setOnFlingListener(null); \n</code></pre>\n\n<p>before </p>\n\n<pre><code>snapHelper.attachToRecyclerView(recyclerView);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2531739,"reputation":3664,"user_id":2199894,"display_name":"Bassel Mourjan"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1522190082,"creation_date":1522190082,"answer_id":49523471,"question_id":44043501,"body_markdown":"**All you have to do is place**\r\n\r\n    SnapHelper snapHelper = new PagerSnapHelper();\r\n    snapHelper.attachToRecyclerView(recyclerView);\r\n\r\ninside **onCreateViewHolder** instead of **onBindViewHolder**\r\n","title":"An instance of OnFlingListener already set in Recyclerview","body":"<p><strong>All you have to do is place</strong></p>\n\n<pre><code>SnapHelper snapHelper = new PagerSnapHelper();\nsnapHelper.attachToRecyclerView(recyclerView);\n</code></pre>\n\n<p>inside <strong>onCreateViewHolder</strong> instead of <strong>onBindViewHolder</strong></p>\n"},{"tags":[],"owner":{"account_id":4863205,"reputation":1631,"user_id":3922262,"accept_rate":89,"display_name":"saintjab"},"down_vote_count":1,"up_vote_count":32,"is_accepted":false,"score":31,"last_activity_date":1539764004,"creation_date":1539764004,"answer_id":52850198,"question_id":44043501,"body_markdown":"You can check for OnFlingListener on the RecyclerView first before you add it\r\n\r\n    if (recycler.getOnFlingListener() == null)\r\n            snapHelper.attachToRecyclerView(recycler);","title":"An instance of OnFlingListener already set in Recyclerview","body":"<p>You can check for OnFlingListener on the RecyclerView first before you add it</p>\n\n<pre><code>if (recycler.getOnFlingListener() == null)\n        snapHelper.attachToRecyclerView(recycler);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5620925,"reputation":812,"user_id":4450805,"accept_rate":78,"display_name":"pamobo0609"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1591052858,"creation_date":1591052858,"answer_id":62142327,"question_id":44043501,"body_markdown":"This happens because you&#39;re setting the `SnapPagerHelper` twice somehow. Note that if you have a `RecyclerView` inside another `RecyclerView`, this should only happen in each other&#39;s constructors or Kotlin&#39;s `init {}` block (once per item).&lt;br&gt;&lt;/br&gt;\r\nMy case is quite similar to yours since I have a big vertical `RecyclerView` and a small `RecyclerView` within.\r\n\r\nCode that will cause the exception:\r\n\r\n     fun bind(value: ArrayList&lt;Item&gt;) {\r\n        listAdapter = ItemCellDelegate(value)\r\n\r\n        val manager = LinearLayoutManager(itemView.context)\r\n        manager.orientation = LinearLayoutManager.HORIZONTAL\r\n\r\n        horizontalRecyclerView?.apply {\r\n            layoutManager = manager\r\n            adapter = listAdapter\r\n            setHasFixedSize(true)\r\n        }\r\n\r\n        val snapHelper: SnapHelper = PagerSnapHelper()\r\n        snapHelper.attachToRecyclerView(horizontalRecyclerView)\r\n\r\n    }\r\n\r\nCorrect code using `init {}` block:\r\n\r\n    init {\r\n        val snapHelper: SnapHelper = PagerSnapHelper()\r\n        snapHelper.attachToRecyclerView(horizontalRecyclerView)\r\n    }\r\n","title":"An instance of OnFlingListener already set in Recyclerview","body":"<p>This happens because you're setting the <code>SnapPagerHelper</code> twice somehow. Note that if you have a <code>RecyclerView</code> inside another <code>RecyclerView</code>, this should only happen in each other's constructors or Kotlin's <code>init {}</code> block (once per item).<br>\nMy case is quite similar to yours since I have a big vertical <code>RecyclerView</code> and a small <code>RecyclerView</code> within.</p>\n\n<p>Code that will cause the exception:</p>\n\n<pre><code> fun bind(value: ArrayList&lt;Item&gt;) {\n    listAdapter = ItemCellDelegate(value)\n\n    val manager = LinearLayoutManager(itemView.context)\n    manager.orientation = LinearLayoutManager.HORIZONTAL\n\n    horizontalRecyclerView?.apply {\n        layoutManager = manager\n        adapter = listAdapter\n        setHasFixedSize(true)\n    }\n\n    val snapHelper: SnapHelper = PagerSnapHelper()\n    snapHelper.attachToRecyclerView(horizontalRecyclerView)\n\n}\n</code></pre>\n\n<p>Correct code using <code>init {}</code> block:</p>\n\n<pre><code>init {\n    val snapHelper: SnapHelper = PagerSnapHelper()\n    snapHelper.attachToRecyclerView(horizontalRecyclerView)\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4640232,"reputation":5623,"user_id":3760297,"accept_rate":67,"display_name":"Iman Marashi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1613327563,"creation_date":1613327563,"answer_id":66198720,"question_id":44043501,"body_markdown":"something like this:\r\n\r\n    override fun onAttachedToWindow(view: RecyclerView) {\r\n        super.onAttachedToWindow(view)\r\n        view.onFlingListener = null;\r\n        StartSnapHelper().attachToRecyclerView(view)\r\n    }","title":"An instance of OnFlingListener already set in Recyclerview","body":"<p>something like this:</p>\n<pre><code>override fun onAttachedToWindow(view: RecyclerView) {\n    super.onAttachedToWindow(view)\n    view.onFlingListener = null;\n    StartSnapHelper().attachToRecyclerView(view)\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15514414,"reputation":146,"user_id":12504817,"display_name":"Mukesh Kumar Patel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1651581733,"creation_date":1651581733,"answer_id":72099536,"question_id":44043501,"body_markdown":"I also getting Error in neasted RecyclerView or inner RecyclerView,\r\nI managed to sovle this with adding this line.\r\n\r\n    holder.rv_sub_loaction.setOnFlingListener(null);\r\n\r\nWhole recyclerView set code:\r\n\r\n    subLocationModels.addAll(response.body());\r\n                recyclerDataAdapter = new SubSubLocationAdapter(subLocationModels);\r\n                SnapHelper helper = new LinearSnapHelper();\r\n                LinearLayoutManager layoutManager = new  GridLayoutManager(mContext, 2, GridLayoutManager.HORIZONTAL, false);\r\n                holder.rv_sub_loaction.setLayoutManager(layoutManager);\r\n                holder.rv_sub_loaction.setOnFlingListener(null);\r\n                holder.rv_sub_loaction.setAdapter(recyclerDataAdapter);\r\n                helper.attachToRecyclerView(holder.rv_sub_loaction);\r\n                holder.rv_sub_loaction.setHasFixedSize(true);\r\n\r\n","title":"An instance of OnFlingListener already set in Recyclerview","body":"<p>I also getting Error in neasted RecyclerView or inner RecyclerView,\nI managed to sovle this with adding this line.</p>\n<pre><code>holder.rv_sub_loaction.setOnFlingListener(null);\n</code></pre>\n<p>Whole recyclerView set code:</p>\n<pre><code>subLocationModels.addAll(response.body());\n            recyclerDataAdapter = new SubSubLocationAdapter(subLocationModels);\n            SnapHelper helper = new LinearSnapHelper();\n            LinearLayoutManager layoutManager = new  GridLayoutManager(mContext, 2, GridLayoutManager.HORIZONTAL, false);\n            holder.rv_sub_loaction.setLayoutManager(layoutManager);\n            holder.rv_sub_loaction.setOnFlingListener(null);\n            holder.rv_sub_loaction.setAdapter(recyclerDataAdapter);\n            helper.attachToRecyclerView(holder.rv_sub_loaction);\n            holder.rv_sub_loaction.setHasFixedSize(true);\n</code></pre>\n"}],"owner":{"account_id":10869332,"reputation":583,"user_id":7991742,"display_name":"Nitya"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18974,"favorite_count":0,"down_vote_count":0,"up_vote_count":51,"answer_count":6,"score":51,"last_activity_date":1651581733,"creation_date":1495098863,"question_id":44043501,"body_markdown":"I&#39;m using a RecyclerView in my Android app. I&#39;ve many cardviews in my RecyclerView, such that only 1 cardview is displayed to the user at a time. The user has to swipe to see the next card.\r\n\r\nI faced an issue that when user makes a swipe, the recyclerview gets scrolled to the end. Instead, what I need is when the user swipes, display the next card to the user as mentioned in this post.\r\n\r\nhttps://stackoverflow.com/questions/38778461/how-to-make-swipe-on-horizontal-recyclerview-bring-only-the-next-item-into-view\r\n\r\n    SnapHelper snapHelper = new PagerSnapHelper();\r\n    snapHelper.attachToRecyclerView(recyclerView);\r\n\r\nI tried the answer mentioned in the above link. But I&#39;m getting an exception when the user makes a swipe. \r\n\r\nPlease help me resolve it.\r\n\r\n**Error**\r\n\r\n    java.lang.IllegalStateException: An instance of OnFlingListener already set.\r\n        at android.support.v7.widget.SnapHelper.setupCallbacks(SnapHelper.java:114)\r\n        at android.support.v7.widget.SnapHelper.attachToRecyclerView(SnapHelper.java:102)\r\n        at com.abc.ui.trm.TrCard.setupCardView(TrCard.java:62)\r\n        at com.abc.ui.trm.TrCard.setupCardView(TrCard.java:29)\r\n        at com.abc.ui.core.card.BaseCardView.processCardView(BaseCardView.java:134)\r\n        at com.abc.ui.card.CardRecyclerAdapter.onViewAttachedToWindow(CardRecyclerAdapter.java:398)\r\n        at android.support.v7.widget.RecyclerView.dispatchChildAttached(RecyclerView.java:6758)\r\n        at android.support.v7.widget.RecyclerView$5.addView(RecyclerView.java:696)\r\n        at android.support.v7.widget.ChildHelper.addView(ChildHelper.java:107)\r\n        at android.support.v7.widget.RecyclerView$LayoutManager.addViewInt(RecyclerView.java:7697)\r\n        at android.support.v7.widget.RecyclerView$LayoutManager.addView(RecyclerView.java:7655)\r\n        at android.support.v7.widget.RecyclerView$LayoutManager.addView(RecyclerView.java:7643)\r\n        at android.support.v7.widget.LinearLayoutManager.layoutChunk(LinearLayoutManager.java:1539)\r\n        at android.support.v7.widget.LinearLayoutManager.fill(LinearLayoutManager.java:1488)\r\n        at android.support.v7.widget.LinearLayoutManager.onLayoutChildren(LinearLayoutManager.java:585)\r\n        at android.support.v7.widget.RecyclerView.dispatchLayoutStep2(RecyclerView.java:3506)\r\n        at android.support.v7.widget.RecyclerView.dispatchLayout(RecyclerView.java:3254)\r\n        at android.support.v7.widget.RecyclerView.onLayout(RecyclerView.java:3767)\r\n        at android.view.View.layout(View.java:18799)\r\n        at android.view.ViewGroup.layout(ViewGroup.java:5952)\r\n        at com.abc.ui.core.refresh.LegacySwipeRefreshLayout.onLayout(LegacySwipeRefreshLayout.java:337)\r\n        at android.view.View.layout(View.java:18799)\r\n        at android.view.ViewGroup.layout(ViewGroup.java:5952)\r\n        at android.widget.FrameLayout.layoutChildren(FrameLayout.java:323)\r\n        at android.widget.FrameLayout.onLayout(FrameLayout.java:261)\r\n        at android.view.View.layout(View.java:18799)\r\n        at android.view.ViewGroup.layout(ViewGroup.java:5952)\r\n        at android.widget.RelativeLayout.onLayout(RelativeLayout.java:1079)\r\n        at android.view.View.layout(View.java:18799)\r\n        at android.view.ViewGroup.layout(ViewGroup.java:5952)\r\n        at android.widget.FrameLayout.layoutChildren(FrameLayout.java:323)\r\n        at android.widget.FrameLayout.onLayout(FrameLayout.java:261)\r\n        at android.view.View.layout(View.java:18799)\r\n        at android.view.ViewGroup.layout(ViewGroup.java:5952)\r\n        at android.widget.FrameLayout.layoutChildren(FrameLayout.java:323)\r\n        at android.widget.FrameLayout.onLayout(FrameLayout.java:261)\r\n        at android.view.View.layout(View.java:18799)\r\n        at android.view.ViewGroup.layout(ViewGroup.java:5952)\r\n        at android.support.v4.widget.DrawerLayout.onLayout(DrawerLayout.java:1193)\r\n        at android.view.View.layout(View.java:18799)\r\n        at android.view.ViewGroup.layout(ViewGroup.java:5952)\r\n        at android.widget.FrameLayout.layoutChildren(FrameLayout.java:323)\r\n        at android.widget.FrameLayout.onLayout(FrameLayout.java:261)\r\n        at android.view.View.layout(View.java:18799)\r\n        at android.view.ViewGroup.layout(ViewGroup.java:5952)\r\n        at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1741)\r\n        at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1585)\r\n        at android.widget.LinearLayout.onLayout(LinearLayout.java:1494)\r\n        at android.view.View.layout(View.java:18799)\r\n        at android.view.ViewGroup.layout(ViewGroup.java:5952)\r\n        at android.widget.FrameLayout.layoutChildren(FrameLayout.java:323)\r\n        at android.widget.FrameLayout.onLayout(FrameLayout.java:261)\r\n        at com.android.internal.policy.DecorView.onLayout(DecorView.java:822)\r\n        at android.view.View.layout(View.java:18799)\r\n        at android.view.ViewGroup.layout(ViewGroup.java:5952)\r\n\r\n\r\n","title":"An instance of OnFlingListener already set in Recyclerview","body":"<p>I'm using a RecyclerView in my Android app. I've many cardviews in my RecyclerView, such that only 1 cardview is displayed to the user at a time. The user has to swipe to see the next card.</p>\n\n<p>I faced an issue that when user makes a swipe, the recyclerview gets scrolled to the end. Instead, what I need is when the user swipes, display the next card to the user as mentioned in this post.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/38778461/how-to-make-swipe-on-horizontal-recyclerview-bring-only-the-next-item-into-view\">How to make swipe on horizontal recyclerview bring only the next item into view - Android</a></p>\n\n<pre><code>SnapHelper snapHelper = new PagerSnapHelper();\nsnapHelper.attachToRecyclerView(recyclerView);\n</code></pre>\n\n<p>I tried the answer mentioned in the above link. But I'm getting an exception when the user makes a swipe. </p>\n\n<p>Please help me resolve it.</p>\n\n<p><strong>Error</strong></p>\n\n<pre><code>java.lang.IllegalStateException: An instance of OnFlingListener already set.\n    at android.support.v7.widget.SnapHelper.setupCallbacks(SnapHelper.java:114)\n    at android.support.v7.widget.SnapHelper.attachToRecyclerView(SnapHelper.java:102)\n    at com.abc.ui.trm.TrCard.setupCardView(TrCard.java:62)\n    at com.abc.ui.trm.TrCard.setupCardView(TrCard.java:29)\n    at com.abc.ui.core.card.BaseCardView.processCardView(BaseCardView.java:134)\n    at com.abc.ui.card.CardRecyclerAdapter.onViewAttachedToWindow(CardRecyclerAdapter.java:398)\n    at android.support.v7.widget.RecyclerView.dispatchChildAttached(RecyclerView.java:6758)\n    at android.support.v7.widget.RecyclerView$5.addView(RecyclerView.java:696)\n    at android.support.v7.widget.ChildHelper.addView(ChildHelper.java:107)\n    at android.support.v7.widget.RecyclerView$LayoutManager.addViewInt(RecyclerView.java:7697)\n    at android.support.v7.widget.RecyclerView$LayoutManager.addView(RecyclerView.java:7655)\n    at android.support.v7.widget.RecyclerView$LayoutManager.addView(RecyclerView.java:7643)\n    at android.support.v7.widget.LinearLayoutManager.layoutChunk(LinearLayoutManager.java:1539)\n    at android.support.v7.widget.LinearLayoutManager.fill(LinearLayoutManager.java:1488)\n    at android.support.v7.widget.LinearLayoutManager.onLayoutChildren(LinearLayoutManager.java:585)\n    at android.support.v7.widget.RecyclerView.dispatchLayoutStep2(RecyclerView.java:3506)\n    at android.support.v7.widget.RecyclerView.dispatchLayout(RecyclerView.java:3254)\n    at android.support.v7.widget.RecyclerView.onLayout(RecyclerView.java:3767)\n    at android.view.View.layout(View.java:18799)\n    at android.view.ViewGroup.layout(ViewGroup.java:5952)\n    at com.abc.ui.core.refresh.LegacySwipeRefreshLayout.onLayout(LegacySwipeRefreshLayout.java:337)\n    at android.view.View.layout(View.java:18799)\n    at android.view.ViewGroup.layout(ViewGroup.java:5952)\n    at android.widget.FrameLayout.layoutChildren(FrameLayout.java:323)\n    at android.widget.FrameLayout.onLayout(FrameLayout.java:261)\n    at android.view.View.layout(View.java:18799)\n    at android.view.ViewGroup.layout(ViewGroup.java:5952)\n    at android.widget.RelativeLayout.onLayout(RelativeLayout.java:1079)\n    at android.view.View.layout(View.java:18799)\n    at android.view.ViewGroup.layout(ViewGroup.java:5952)\n    at android.widget.FrameLayout.layoutChildren(FrameLayout.java:323)\n    at android.widget.FrameLayout.onLayout(FrameLayout.java:261)\n    at android.view.View.layout(View.java:18799)\n    at android.view.ViewGroup.layout(ViewGroup.java:5952)\n    at android.widget.FrameLayout.layoutChildren(FrameLayout.java:323)\n    at android.widget.FrameLayout.onLayout(FrameLayout.java:261)\n    at android.view.View.layout(View.java:18799)\n    at android.view.ViewGroup.layout(ViewGroup.java:5952)\n    at android.support.v4.widget.DrawerLayout.onLayout(DrawerLayout.java:1193)\n    at android.view.View.layout(View.java:18799)\n    at android.view.ViewGroup.layout(ViewGroup.java:5952)\n    at android.widget.FrameLayout.layoutChildren(FrameLayout.java:323)\n    at android.widget.FrameLayout.onLayout(FrameLayout.java:261)\n    at android.view.View.layout(View.java:18799)\n    at android.view.ViewGroup.layout(ViewGroup.java:5952)\n    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1741)\n    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1585)\n    at android.widget.LinearLayout.onLayout(LinearLayout.java:1494)\n    at android.view.View.layout(View.java:18799)\n    at android.view.ViewGroup.layout(ViewGroup.java:5952)\n    at android.widget.FrameLayout.layoutChildren(FrameLayout.java:323)\n    at android.widget.FrameLayout.onLayout(FrameLayout.java:261)\n    at com.android.internal.policy.DecorView.onLayout(DecorView.java:822)\n    at android.view.View.layout(View.java:18799)\n    at android.view.ViewGroup.layout(ViewGroup.java:5952)\n</code></pre>\n"},{"tags":["java","spring-boot","apache-kafka","spring-kafka","reactor-kafka"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1651614101,"post_id":72096741,"comment_id":127404624,"body_markdown":"No, the log format is not always backward compatible. Several notes and warnings here about it - https://kafka.apache.org/documentation/#upgrade","body":"No, the log format is not always backward compatible. Several notes and warnings here about it - <a href=\"https://kafka.apache.org/documentation/#upgrade\" rel=\"nofollow noreferrer\">kafka.apache.org/documentation/#upgrade</a>"}],"answers":[{"tags":[],"owner":{"account_id":1288095,"reputation":169326,"user_id":1240763,"display_name":"Gary Russell"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1651581555,"creation_date":1651580965,"answer_id":72099395,"question_id":72096741,"body_markdown":"0.10.0 is ancient (if that&#39;s your broker version).\r\n\r\nI am not sure, but perhaps with the new major version (3.0.x), they dropped support for really old brokers.\r\n\r\nIn any case, spring-kafka 2.8.5, which comes with Boot 2.6.7, also works with the 2.8.1 kafka-clients, so you could try downgrading to that version.\r\n\r\nhttps://docs.spring.io/spring-kafka/docs/2.8.1/reference/html/#update-deps\r\n\r\nBut you really need to look at moving your prod broker to a much newer version.","title":"Upgrading Kafka-client causes UnsupportedForMessageFormatException","body":"<p>0.10.0 is ancient (if that's your broker version).</p>\n<p>I am not sure, but perhaps with the new major version (3.0.x), they dropped support for really old brokers.</p>\n<p>In any case, spring-kafka 2.8.5, which comes with Boot 2.6.7, also works with the 2.8.1 kafka-clients, so you could try downgrading to that version.</p>\n<p><a href=\"https://docs.spring.io/spring-kafka/docs/2.8.1/reference/html/#update-deps\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-kafka/docs/2.8.1/reference/html/#update-deps</a></p>\n<p>But you really need to look at moving your prod broker to a much newer version.</p>\n"}],"owner":{"account_id":4892973,"reputation":461,"user_id":4206960,"display_name":"rishav"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1061,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1651581555,"creation_date":1651566804,"question_id":72096741,"body_markdown":"I wanted to upgrade the `spring-boot` version of my project from `2.4.4` to `2.6.7`. Because of this, the `kafka-client` version also increased from `2.6.0` to `3.0.1`. There were few other version upgrades but the only relevant one for the issue I am about to describe was `kafka-reactor` upgrade from `1.2.11.RELEASE` to `1.3.11`. \r\nWe load tested the change on our pre-production environment and it worked fine there. However, after release we started getting the following exception and had to rollback our release:\r\n\r\n    org.apache.kafka.common.errors.UnsupportedForMessageFormatException: The message format version on the broker does not support the request.\r\n\r\nUpon investigation we figured out that the only difference bewteen our pre-prod and prod Kafka setup was the message format version, `log.message.format.version`. In pre-prod it was `2.0` but in prod it was `0.10.0`.\r\n\r\nWhat I don&#39;t understand is why a new `Kakfa-client` version won&#39;t work with an old broker version? Should it not be **backward-compatible**?\r\n\r\nIs there any way I can fix it without actually changing the broker config?","title":"Upgrading Kafka-client causes UnsupportedForMessageFormatException","body":"<p>I wanted to upgrade the <code>spring-boot</code> version of my project from <code>2.4.4</code> to <code>2.6.7</code>. Because of this, the <code>kafka-client</code> version also increased from <code>2.6.0</code> to <code>3.0.1</code>. There were few other version upgrades but the only relevant one for the issue I am about to describe was <code>kafka-reactor</code> upgrade from <code>1.2.11.RELEASE</code> to <code>1.3.11</code>.\nWe load tested the change on our pre-production environment and it worked fine there. However, after release we started getting the following exception and had to rollback our release:</p>\n<pre><code>org.apache.kafka.common.errors.UnsupportedForMessageFormatException: The message format version on the broker does not support the request.\n</code></pre>\n<p>Upon investigation we figured out that the only difference bewteen our pre-prod and prod Kafka setup was the message format version, <code>log.message.format.version</code>. In pre-prod it was <code>2.0</code> but in prod it was <code>0.10.0</code>.</p>\n<p>What I don't understand is why a new <code>Kakfa-client</code> version won't work with an old broker version? Should it not be <strong>backward-compatible</strong>?</p>\n<p>Is there any way I can fix it without actually changing the broker config?</p>\n"},{"tags":["java","api","httpclient"],"answers":[{"tags":[],"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1651581427,"creation_date":1651581427,"answer_id":72099477,"question_id":72097918,"body_markdown":"You could use Postman or Advanced Rest Client (A plugin for Chrome) that allows you to send HTTP requests and see the responses. There is a tool called Fidler that shows HHTP traffic. \r\n\r\nAlso there are some other HTTP clients you could use:\r\n\r\n1. [Apache Http client][1] - very popular and well known 3d party Http Client \r\n 2. [OK Http client][2] - Open-source Http client. [Here][3] is tutorial\r\n 3. MgntUtils Http client - very simple 3d party HttpClient: Provided in MgntUtils Open source library (written by me). Very simple in use. Take a look at [Javadoc][4]. Library itself provided as [Maven artifacts][5] and on [Git][6] (including source code and Javadoc). \r\n\r\n\r\n\r\n  [1]: https://hc.apache.org/httpcomponents-client-4.5.x/index.html\r\n  [2]: https://square.github.io/okhttp/4.x/okhttp/okhttp3/-ok-http-client/\r\n  [3]: https://www.vogella.com/tutorials/JavaLibrary-OkHttp/article.html\r\n  [4]: http://michaelgantman.github.io/Mgnt/docs/com/mgnt/lifecycle/management/httpclient/HttpClient.html\r\n  [5]: https://search.maven.org/artifact/com.github.michaelgantman/MgntUtils/1.5.0.7/jar\r\n  [6]: https://github.com/michaelgantman/Mgnt/releases/tag/1.5.0.7\r\n","title":"How can I analyze the header and body posted by my api call","body":"<p>You could use Postman or Advanced Rest Client (A plugin for Chrome) that allows you to send HTTP requests and see the responses. There is a tool called Fidler that shows HHTP traffic.</p>\n<p>Also there are some other HTTP clients you could use:</p>\n<ol>\n<li><a href=\"https://hc.apache.org/httpcomponents-client-4.5.x/index.html\" rel=\"nofollow noreferrer\">Apache Http client</a> - very popular and well known 3d party Http Client</li>\n<li><a href=\"https://square.github.io/okhttp/4.x/okhttp/okhttp3/-ok-http-client/\" rel=\"nofollow noreferrer\">OK Http client</a> - Open-source Http client. <a href=\"https://www.vogella.com/tutorials/JavaLibrary-OkHttp/article.html\" rel=\"nofollow noreferrer\">Here</a> is tutorial</li>\n<li>MgntUtils Http client - very simple 3d party HttpClient: Provided in MgntUtils Open source library (written by me). Very simple in use. Take a look at <a href=\"http://michaelgantman.github.io/Mgnt/docs/com/mgnt/lifecycle/management/httpclient/HttpClient.html\" rel=\"nofollow noreferrer\">Javadoc</a>. Library itself provided as <a href=\"https://search.maven.org/artifact/com.github.michaelgantman/MgntUtils/1.5.0.7/jar\" rel=\"nofollow noreferrer\">Maven artifacts</a> and on <a href=\"https://github.com/michaelgantman/Mgnt/releases/tag/1.5.0.7\" rel=\"nofollow noreferrer\">Git</a> (including source code and Javadoc).</li>\n</ol>\n"}],"owner":{"account_id":23376537,"reputation":3,"user_id":17445838,"display_name":"Vincent Kleine"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72099477,"answer_count":1,"score":0,"last_activity_date":1651581427,"creation_date":1651572832,"question_id":72097918,"body_markdown":"In Java, using httpclient5.1.3 and httpcore5.1.3 I&#39;m trying to do a POST request to an API url. However, I keep receiving a 400 Bad request. Are there any tools so I can debug how the request is exactly received by the API? To see how the headers and body are received exactly?","title":"How can I analyze the header and body posted by my api call","body":"<p>In Java, using httpclient5.1.3 and httpcore5.1.3 I'm trying to do a POST request to an API url. However, I keep receiving a 400 Bad request. Are there any tools so I can debug how the request is exactly received by the API? To see how the headers and body are received exactly?</p>\n"},{"tags":["java","nio","nonblocking"],"comments":[{"owner":{"account_id":5569841,"reputation":3750,"user_id":4415625,"display_name":"dani-vta"},"score":0,"creation_date":1651584254,"post_id":72099461,"comment_id":127393968,"body_markdown":"I&#39;ve copied your exact snippet and tested your code with two files of 2Mb and 300Mb. In both cases the code runs properly. In the 300Mb file case the code takes significantly much more, but the thread is not blocked at the read operation. It keeps retrieving and printing what it has read. It might be something else that blocks your thread or if it&#39;s not then define  what you mean by &quot;blocked&quot;","body":"I&#39;ve copied your exact snippet and tested your code with two files of 2Mb and 300Mb. In both cases the code runs properly. In the 300Mb file case the code takes significantly much more, but the thread is not blocked at the read operation. It keeps retrieving and printing what it has read. It might be something else that blocks your thread or if it&#39;s not then define  what you mean by &quot;blocked&quot;"},{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":1,"creation_date":1651585198,"post_id":72099461,"comment_id":127394351,"body_markdown":"FileChannel always performs *blocking* I/O, please check javadoc for java.nio.channels.ReadableByteChannel#read","body":"FileChannel always performs <i>blocking</i> I/O, please check javadoc for java.nio.channels.ReadableByteChannel#read"},{"owner":{"account_id":2140858,"reputation":53,"user_id":1899526,"display_name":"HienNg"},"score":0,"creation_date":1651588347,"post_id":72099461,"comment_id":127395668,"body_markdown":"@Dan yes, the snippet code runs properly. I expected that after executing fileChannel.read(buf), the buf does not need to be fulfilled with data and then execute the next line of code. \n\nFor instance, the buf size is 102400, the next line of code can get executed when the buf is written some bytes (0 or less than buf size); the rest bytes can be done automatically by a non-blocking mechanism.(As my understanding)\n\nIn other words, the thread can continue working when the buf is not full of data yet.","body":"@Dan yes, the snippet code runs properly. I expected that after executing fileChannel.read(buf), the buf does not need to be fulfilled with data and then execute the next line of code.   For instance, the buf size is 102400, the next line of code can get executed when the buf is written some bytes (0 or less than buf size); the rest bytes can be done automatically by a non-blocking mechanism.(As my understanding)  In other words, the thread can continue working when the buf is not full of data yet."},{"owner":{"account_id":5569841,"reputation":3750,"user_id":4415625,"display_name":"dani-vta"},"score":2,"creation_date":1651588766,"post_id":72099461,"comment_id":127395864,"body_markdown":"@HienNg The documentation does not say that. It states that at every read the method will attempt to retrieve a number of bytes up to the size of the `ByteBuffer` specified, which implies anything between 0 and the buffer&#39;s size. In fact: &quot;Bytes are read starting at this channel&#39;s current file position, and then the file position is updated **with the number of bytes actually read.** The ByteBuffer does not refill itself after the first read while the thread is performing other operations. If that was the behavior you were expecting.","body":"@HienNg The documentation does not say that. It states that at every read the method will attempt to retrieve a number of bytes up to the size of the <code>ByteBuffer</code> specified, which implies anything between 0 and the buffer&#39;s size. In fact: &quot;Bytes are read starting at this channel&#39;s current file position, and then the file position is updated <b>with the number of bytes actually read.</b> The ByteBuffer does not refill itself after the first read while the thread is performing other operations. If that was the behavior you were expecting."},{"owner":{"account_id":2140858,"reputation":53,"user_id":1899526,"display_name":"HienNg"},"score":0,"creation_date":1651590032,"post_id":72099461,"comment_id":127396392,"body_markdown":"@Dan yes, your last statement is what I wanted to see and made me so confused, but now I saw that I was wrong. I had no deep understanding of non-blocking with Java Nio.  I will dive deeper into java doc.\nI still want to see a case that with only one thread, java can work with a non-blocking IO mechanism that only one thread can back to its work when the buf is full of data and do other work if the buf is not full yet.","body":"@Dan yes, your last statement is what I wanted to see and made me so confused, but now I saw that I was wrong. I had no deep understanding of non-blocking with Java Nio.  I will dive deeper into java doc. I still want to see a case that with only one thread, java can work with a non-blocking IO mechanism that only one thread can back to its work when the buf is full of data and do other work if the buf is not full yet."},{"owner":{"account_id":69443,"reputation":85343,"user_id":202009,"accept_rate":79,"display_name":"Andy Thomas"},"score":1,"creation_date":1651591023,"post_id":72099461,"comment_id":127396810,"body_markdown":"@HienNg - Nonblocking does not mean &quot;performed asynchronously.&quot; It means a method will not wait to read (or write) all the bytes you&#39;ve requested, if they&#39;re not yet available (or cannot yet be received).","body":"@HienNg - Nonblocking does not mean &quot;performed asynchronously.&quot; It means a method will not wait to read (or write) all the bytes you&#39;ve requested, if they&#39;re not yet available (or cannot yet be received)."},{"owner":{"account_id":2496,"reputation":266234,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"score":3,"creation_date":1651594784,"post_id":72099461,"comment_id":127398365,"body_markdown":"Trying to read between the lines, I think what you are missing is that &quot;non-blocking I/O&quot; usually implies selectable channels and selectors so that a single thread can process I/O from many, many channels by polling for those that are ready without blocking. The most authoritative and clear resource to study might be [the package description.](https://docs.oracle.com/javase/8/docs/api/java/nio/channels/package-summary.html#package.description)","body":"Trying to read between the lines, I think what you are missing is that &quot;non-blocking I/O&quot; usually implies selectable channels and selectors so that a single thread can process I/O from many, many channels by polling for those that are ready without blocking. The most authoritative and clear resource to study might be <a href=\"https://docs.oracle.com/javase/8/docs/api/java/nio/channels/package-summary.html#package.description\" rel=\"nofollow noreferrer\">the package description.</a>"},{"owner":{"account_id":2140858,"reputation":53,"user_id":1899526,"display_name":"HienNg"},"score":0,"creation_date":1651653330,"post_id":72099461,"comment_id":127411882,"body_markdown":"@AndyThomas your comment made me confused, as you have said so it means my example is already non-blocking i/o, but actually, it doesn&#39;t.\nI expected a non-blocking mechanism will not block the thread so that only one thread can perform asynchronously while i/o devices operate their work.","body":"@AndyThomas your comment made me confused, as you have said so it means my example is already non-blocking i/o, but actually, it doesn&#39;t. I expected a non-blocking mechanism will not block the thread so that only one thread can perform asynchronously while i/o devices operate their work."},{"owner":{"account_id":2140858,"reputation":53,"user_id":1899526,"display_name":"HienNg"},"score":0,"creation_date":1651653368,"post_id":72099461,"comment_id":127411895,"body_markdown":"@AndyThomas I have tried learning the basic concept of DMA, hardware controller, I thought I understand the concept of non-blocking i/o until I try to illustrate them by coding.\nBecause I purely believe that if the thread does not need to wait i/o operate then it can continue working other work asynchronously.\n\nI&#39;m happy if you can explain more from a concept perspective.","body":"@AndyThomas I have tried learning the basic concept of DMA, hardware controller, I thought I understand the concept of non-blocking i/o until I try to illustrate them by coding. Because I purely believe that if the thread does not need to wait i/o operate then it can continue working other work asynchronously.  I&#39;m happy if you can explain more from a concept perspective."}],"owner":{"account_id":2140858,"reputation":53,"user_id":1899526,"display_name":"HienNg"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":905,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":0,"score":5,"last_activity_date":1651581353,"creation_date":1651581353,"question_id":72099461,"body_markdown":"I&#39;m learning about non-blocking i/o terms. Mainly, I&#39;m learning java Nio. I&#39;m trying to understand non-blocking i/o better and observe how it works in the implementation with Java Nio.\r\n\r\nI read a dozen questions and answers related to the non-blocking i/o term and the non-blocking i/o by using java Nio.\r\n\r\nI see a following similar statement everywhere.\r\n\r\n&gt; Non-blocking IO does not wait for the data to be read or written before returning. Java NIO non-blocking mode allows the thread to request writing data to a channel, but Non-blocking IO does not wait for the data to be read or written before returning.\r\n\r\nI tried to illustrate the statement with an example java code that reads a file&#39;s content using Nio. However, the thread is still blocked at the channel&#39;s read() method.\r\n\r\n```\r\nSystem.out.println(&quot;Thread-&quot; + Thread.currentThread().getName() \r\n+ &quot;-&quot; + Thread.currentThread().getId());// Thread-main-1\r\n\r\nString filePath = &quot;./resources/nio-demo.txt&quot;;\r\nFileInputStream fis = new FileInputStream(new File(filePath));\r\nFileChannel fileChannel = fis.getChannel();\r\n\r\nByteBuffer buf = ByteBuffer.allocate(102400);\r\n\r\nint bytesRead = fileChannel.read(buf);\r\nSystem.out.println(buf.position()); //check how many bytes are written to the buf, always 102400\r\n\r\nwhile (bytesRead != -1)\r\n{\r\n\r\n    buf.flip();\r\n\r\n    while (buf.hasRemaining())\r\n    {\r\n        System.out.print((char) buf.get());\r\n    }\r\n\r\n    buf.clear();\r\n    bytesRead = fileChannel.read(buf);\r\n}\r\nfis.close();\r\n\r\n```\r\nAs I understand, after triggering the read() method, the thread will execute the following line of code. It doesn&#39;t matter if the buf is full of data or not.\r\nBut here, the thread is blocked until the buf is complete and continues the process sequence.\r\n\r\nThe above example reads a file about 300M with buf is 102400.\r\n\r\nThe situation confused me much; perhaps I misunderstood non-blocking i/o with java Nio.\r\n\r\nCould you please help me explain this situation?\r\n\r\nHow does java Nio achieve purely non-blocking i/o with only one thread?\r\n","title":"Does java nio read/write file actually non-blocking io?","body":"<p>I'm learning about non-blocking i/o terms. Mainly, I'm learning java Nio. I'm trying to understand non-blocking i/o better and observe how it works in the implementation with Java Nio.</p>\n<p>I read a dozen questions and answers related to the non-blocking i/o term and the non-blocking i/o by using java Nio.</p>\n<p>I see a following similar statement everywhere.</p>\n<blockquote>\n<p>Non-blocking IO does not wait for the data to be read or written before returning. Java NIO non-blocking mode allows the thread to request writing data to a channel, but Non-blocking IO does not wait for the data to be read or written before returning.</p>\n</blockquote>\n<p>I tried to illustrate the statement with an example java code that reads a file's content using Nio. However, the thread is still blocked at the channel's read() method.</p>\n<pre><code>System.out.println(&quot;Thread-&quot; + Thread.currentThread().getName() \n+ &quot;-&quot; + Thread.currentThread().getId());// Thread-main-1\n\nString filePath = &quot;./resources/nio-demo.txt&quot;;\nFileInputStream fis = new FileInputStream(new File(filePath));\nFileChannel fileChannel = fis.getChannel();\n\nByteBuffer buf = ByteBuffer.allocate(102400);\n\nint bytesRead = fileChannel.read(buf);\nSystem.out.println(buf.position()); //check how many bytes are written to the buf, always 102400\n\nwhile (bytesRead != -1)\n{\n\n    buf.flip();\n\n    while (buf.hasRemaining())\n    {\n        System.out.print((char) buf.get());\n    }\n\n    buf.clear();\n    bytesRead = fileChannel.read(buf);\n}\nfis.close();\n\n</code></pre>\n<p>As I understand, after triggering the read() method, the thread will execute the following line of code. It doesn't matter if the buf is full of data or not.\nBut here, the thread is blocked until the buf is complete and continues the process sequence.</p>\n<p>The above example reads a file about 300M with buf is 102400.</p>\n<p>The situation confused me much; perhaps I misunderstood non-blocking i/o with java Nio.</p>\n<p>Could you please help me explain this situation?</p>\n<p>How does java Nio achieve purely non-blocking i/o with only one thread?</p>\n"},{"tags":["java","swing","awt"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1651581993,"post_id":72099449,"comment_id":127393087,"body_markdown":"You are going to give the user just a few nanoseconds to enter their name and password? (The execution time between `new loginTest` and `login_form.GetName();`)\nYour naming makes the code v. difficult to read btw: https://technojeeves.com/index.php/aliasjava1/106-java-style-conventions","body":"You are going to give the user just a few nanoseconds to enter their name and password? (The execution time between <code>new loginTest</code> and <code>login_form.GetName();</code>) Your naming makes the code v. difficult to read btw: <a href=\"https://technojeeves.com/index.php/aliasjava1/106-java-style-conventions\" rel=\"nofollow noreferrer\">technojeeves.com/index.php/aliasjava1/&hellip;</a>"},{"owner":{"account_id":12414668,"reputation":65,"user_id":9044933,"display_name":"J.K"},"score":0,"creation_date":1651582179,"post_id":72099449,"comment_id":127393158,"body_markdown":"@g00se then should i use try and catch ? how long should i have to give it ? i","body":"@g00se then should i use try and catch ? how long should i have to give it ? i"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1651583292,"post_id":72099449,"comment_id":127393587,"body_markdown":"What did you change? - please tell us. Incidentally, you can get around this problem, and have a more rational arrangement by using a `CardLayout`: https://technojeeves.com/index.php/aliasjava1/64-java-login-with-cardlayout","body":"What did you change? - please tell us. Incidentally, you can get around this problem, and have a more rational arrangement by using a <code>CardLayout</code>: <a href=\"https://technojeeves.com/index.php/aliasjava1/64-java-login-with-cardlayout\" rel=\"nofollow noreferrer\">technojeeves.com/index.php/aliasjava1/&hellip;</a>"},{"owner":{"account_id":12414668,"reputation":65,"user_id":9044933,"display_name":"J.K"},"score":0,"creation_date":1651584504,"post_id":72099449,"comment_id":127394074,"body_markdown":"@g00se i just use try and catch as u said are u give the user just a few nanoseconds,  Thread.sleep(10000); // for my slow hand and I&#39;m not sure i will use CardLayout but i need something similar things like that as i want to switch frame after that frame.","body":"@g00se i just use try and catch as u said are u give the user just a few nanoseconds,  Thread.sleep(10000); // for my slow hand and I&#39;m not sure i will use CardLayout but i need something similar things like that as i want to switch frame after that frame."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1651586343,"post_id":72099449,"comment_id":127394823,"body_markdown":"Your LoginForm should be a modal JDialog. A modal dialog will block until the dialog is closed, which means the statements after the setVisible(...) statement will not execute in your main class until the dialog is closed.","body":"Your LoginForm should be a modal JDialog. A modal dialog will block until the dialog is closed, which means the statements after the setVisible(...) statement will not execute in your main class until the dialog is closed."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1651586349,"post_id":72099449,"comment_id":127394826,"body_markdown":"Hehe, no don&#39;t do that! I wondered how on earth you solved it so quickly, Now I know you used a hammer instead of a screwdriver ;) You don&#39;t want to pause the main thread of your application and lock up the gui. I can&#39;t see how you&#39;re running the app. but I&#39;m going to guess that&#39;s going to be quite weird. @camickr&#39;s way is better but not (IMO) as good as seeing the login screen as part of the whole application which must be passed to start","body":"Hehe, no don&#39;t do that! I wondered how on earth you solved it so quickly, Now I know you used a hammer instead of a screwdriver ;) You don&#39;t want to pause the main thread of your application and lock up the gui. I can&#39;t see how you&#39;re running the app. but I&#39;m going to guess that&#39;s going to be quite weird. @camickr&#39;s way is better but not (IMO) as good as seeing the login screen as part of the whole application which must be passed to start"},{"owner":{"account_id":12414668,"reputation":65,"user_id":9044933,"display_name":"J.K"},"score":0,"creation_date":1651588799,"post_id":72099449,"comment_id":127395878,"body_markdown":"@camickr can u give me some example by answer this question?","body":"@camickr can u give me some example by answer this question?"},{"owner":{"account_id":12414668,"reputation":65,"user_id":9044933,"display_name":"J.K"},"score":0,"creation_date":1651588945,"post_id":72099449,"comment_id":127395946,"body_markdown":"@g00se as i&#39;m not good at Java GUI i  don&#39;t know how to solved it properly. i mean something more efficient way , smart way. yeah it&#39;s quite weird to act but i don&#39;t have any other idea right now. if u don&#39;t mind can u give me some example?","body":"@g00se as i&#39;m not good at Java GUI i  don&#39;t know how to solved it properly. i mean something more efficient way , smart way. yeah it&#39;s quite weird to act but i don&#39;t have any other idea right now. if u don&#39;t mind can u give me some example?"},{"owner":{"account_id":12414668,"reputation":65,"user_id":9044933,"display_name":"J.K"},"score":0,"creation_date":1651589139,"post_id":72099449,"comment_id":127396023,"body_markdown":"@g00se and as u said it&#39;s hard to read the code, any suggestion for good coding naming style? thank u for read my code.","body":"@g00se and as u said it&#39;s hard to read the code, any suggestion for good coding naming style? thank u for read my code."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1651594729,"post_id":72099449,"comment_id":127398345,"body_markdown":"Yes. I gave you a link: https://technojeeves.com/index.php/aliasjava1/106-java-style-conventions","body":"Yes. I gave you a link: <a href=\"https://technojeeves.com/index.php/aliasjava1/106-java-style-conventions\" rel=\"nofollow noreferrer\">technojeeves.com/index.php/aliasjava1/&hellip;</a>"}],"owner":{"account_id":12414668,"reputation":65,"user_id":9044933,"display_name":"J.K"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1651581294,"creation_date":1651581294,"question_id":72099449,"body_markdown":"I made two classes in Java.Using GUI  &lt;br&gt;\r\nOne is the main class and the other is the login class.&lt;br&gt;\r\nThe login class is as follows.&lt;br&gt;\r\n```\r\nloginTest.java\r\n```\r\n```\r\nimport javax.swing.*;\r\nimport java.awt.*;\r\nimport java.awt.event.ActionEvent;\r\nimport java.awt.event.ActionListener;\r\n\r\nimport javax.swing.border.*;\r\n\r\npublic class loginTest \r\n{\r\n\tpublic static String Username=&quot; &quot;;\r\n\tpublic static String Password=&quot; &quot;;\r\n    public loginTest()\r\n    {\r\n    \tJPanel panel = new JPanel();\r\n    \tJFrame frame = new JFrame();\r\n    \tframe.setSize(350,200);\r\n    \tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    \tframe.add(panel);\r\n    \t\r\n    \tpanel.setLayout(null);\r\n    \t\r\n    \tJLabel userlabel = new JLabel(&quot;user&quot;);\r\n    \tuserlabel.setBounds(10, 20, 80, 25); // x y width height\r\n    \tpanel.add(userlabel);\r\n    \t\r\n    \tJTextField userText = new JTextField(20);\r\n    \tuserText.setBounds(100, 20, 165, 25);\r\n    \tpanel.add(userText);\r\n    \t\r\n    \tJLabel passwordlabel = new JLabel(&quot;password&quot;);\r\n    \tpasswordlabel.setBounds(10, 50, 80, 25);\r\n    \tpanel.add(passwordlabel);\r\n\r\n    \tJTextField passwordText = new JPasswordField();\r\n    \tpasswordText.setBounds(100, 50, 165, 25);\r\n    \tpanel.add(passwordText);\r\n\r\n    \tJButton button = new JButton(&quot;login&quot;);\r\n    \tbutton.setBounds(140,80,80,25);\r\n   \r\n    \tbutton.addActionListener(new ActionListener() {\r\n\t\t\t@Override\r\n\t\t\tpublic void actionPerformed(ActionEvent e) {\r\n\t\t\t\t// TODO Auto-generated method stub\r\n\t\t\t\tUsername = userText.getText();\r\n\t\t\t\tPassword = passwordText.getText();\r\n                SetName(Username);\r\n                SetPW(Password);\r\n\t\t\t}\r\n    \t});\r\n    \tpanel.add(button);\r\n    \t\r\n    \tJLabel success = new JLabel(&quot;&quot;);\r\n    \tsuccess.setBounds(10, 100, 300,25);\r\n    \tpanel.add(success);    \t\r\n    \tframe.setVisible(true);   \t\r\n    }\r\n    public void SetName(String Username)\r\n    {\r\n    \tthis.Username = Username;\r\n    }\r\n    public void SetPW(String PassWord)\r\n    {\r\n    \tthis.Password = PassWord;\r\n    }\r\n    public String GetName()\r\n    {\r\n    \treturn Username;\r\n    }\r\n    public String GetPW()\r\n    {\r\n    \treturn Password;\r\n    }\r\n}\r\n```\r\nand main_menu class: &lt;br&gt;\r\n```\r\nmain_menu.java\r\n```\r\n```\r\npublic class main_menu {\r\n\t     public static String ID= &quot; &quot;;\r\n         public static String PW= &quot; &quot;;\r\n         public static void main(String[] args) {\r\n \t     loginTest login_form = new loginTest(); \r\n         ID = login_form.GetName();\r\n    \t PW = login_form.GetPW();\r\n    \t System.out.println(&quot;user:&quot; + ID+ &quot;pw:&quot; + PW);\r\n         }\r\n}\r\n```\r\nThe result is nothing. NULL values appear or  user:null pw:null. &lt;br&gt;\r\nhow can i pass that name and password to main_menu class? &lt;br&gt;\r\nI tried to hand over the value using set or get, but it didn&#39;t work. &lt;br&gt;","title":"how to pass the entered value to a variable of another class after clicking the button? (java)","body":"<p>I made two classes in Java.Using GUI  <br>\nOne is the main class and the other is the login class.<br>\nThe login class is as follows.<br></p>\n<pre><code>loginTest.java\n</code></pre>\n<pre><code>import javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\n\nimport javax.swing.border.*;\n\npublic class loginTest \n{\n    public static String Username=&quot; &quot;;\n    public static String Password=&quot; &quot;;\n    public loginTest()\n    {\n        JPanel panel = new JPanel();\n        JFrame frame = new JFrame();\n        frame.setSize(350,200);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.add(panel);\n        \n        panel.setLayout(null);\n        \n        JLabel userlabel = new JLabel(&quot;user&quot;);\n        userlabel.setBounds(10, 20, 80, 25); // x y width height\n        panel.add(userlabel);\n        \n        JTextField userText = new JTextField(20);\n        userText.setBounds(100, 20, 165, 25);\n        panel.add(userText);\n        \n        JLabel passwordlabel = new JLabel(&quot;password&quot;);\n        passwordlabel.setBounds(10, 50, 80, 25);\n        panel.add(passwordlabel);\n\n        JTextField passwordText = new JPasswordField();\n        passwordText.setBounds(100, 50, 165, 25);\n        panel.add(passwordText);\n\n        JButton button = new JButton(&quot;login&quot;);\n        button.setBounds(140,80,80,25);\n   \n        button.addActionListener(new ActionListener() {\n            @Override\n            public void actionPerformed(ActionEvent e) {\n                // TODO Auto-generated method stub\n                Username = userText.getText();\n                Password = passwordText.getText();\n                SetName(Username);\n                SetPW(Password);\n            }\n        });\n        panel.add(button);\n        \n        JLabel success = new JLabel(&quot;&quot;);\n        success.setBounds(10, 100, 300,25);\n        panel.add(success);     \n        frame.setVisible(true);     \n    }\n    public void SetName(String Username)\n    {\n        this.Username = Username;\n    }\n    public void SetPW(String PassWord)\n    {\n        this.Password = PassWord;\n    }\n    public String GetName()\n    {\n        return Username;\n    }\n    public String GetPW()\n    {\n        return Password;\n    }\n}\n</code></pre>\n<p>and main_menu class: <br></p>\n<pre><code>main_menu.java\n</code></pre>\n<pre><code>public class main_menu {\n         public static String ID= &quot; &quot;;\n         public static String PW= &quot; &quot;;\n         public static void main(String[] args) {\n         loginTest login_form = new loginTest(); \n         ID = login_form.GetName();\n         PW = login_form.GetPW();\n         System.out.println(&quot;user:&quot; + ID+ &quot;pw:&quot; + PW);\n         }\n}\n</code></pre>\n<p>The result is nothing. NULL values appear or  user:null pw:null. <br>\nhow can i pass that name and password to main_menu class? <br>\nI tried to hand over the value using set or get, but it didn't work. <br></p>\n"},{"tags":["java","operating-system"],"comments":[{"owner":{"account_id":7595189,"reputation":44576,"user_id":5761558,"display_name":"ernest_k"},"score":1,"creation_date":1651581166,"post_id":72099397,"comment_id":127392801,"body_markdown":"You stopped just before telling us why you want to do this... and we think you&#39;re probably asking how to design the wrong solution. Please share your problem and you&#39;ll get relevant answers.","body":"You stopped just before telling us why you want to do this... and we think you&#39;re probably asking how to design the wrong solution. Please share your problem and you&#39;ll get relevant answers."},{"owner":{"account_id":22110691,"reputation":1,"user_id":16365628,"display_name":"minasamy"},"score":0,"creation_date":1651581372,"post_id":72099397,"comment_id":127392868,"body_markdown":"I have a project in the operating systems course which asks us to read the instruction file and execute it in the desired way.\none of the instructions is &#39;assign a b&#39; ,\nwhich means that we need to make a string a hold value of b that&#39;s it.","body":"I have a project in the operating systems course which asks us to read the instruction file and execute it in the desired way. one of the instructions is &#39;assign a b&#39; , which means that we need to make a string a hold value of b that&#39;s it."},{"owner":{"account_id":22110691,"reputation":1,"user_id":16365628,"display_name":"minasamy"},"score":0,"creation_date":1651581663,"post_id":72099397,"comment_id":127392957,"body_markdown":"Do you mean that I make all variables hashmap and put in it what is assigned?","body":"Do you mean that I make all variables hashmap and put in it what is assigned?"},{"owner":{"account_id":22110691,"reputation":1,"user_id":16365628,"display_name":"minasamy"},"score":0,"creation_date":1651581764,"post_id":72099397,"comment_id":127392995,"body_markdown":"But how can I make it accepts &lt;string,string&gt; and &lt;string,int&gt; ?","body":"But how can I make it accepts &lt;string,string&gt; and &lt;string,int&gt; ?"},{"owner":{"account_id":22110691,"reputation":1,"user_id":16365628,"display_name":"minasamy"},"score":0,"creation_date":1651581939,"post_id":72099397,"comment_id":127393064,"body_markdown":"Okay, I&#39;ve got the point I will make my research thank you so much for your effort.","body":"Okay, I&#39;ve got the point I will make my research thank you so much for your effort."}],"owner":{"account_id":22110691,"reputation":1,"user_id":16365628,"display_name":"minasamy"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1651580989,"creation_date":1651580989,"question_id":72099397,"body_markdown":"I want to make new variable \r\n\r\n&gt; String x = new String();\r\n\r\nNote that I want &quot;x&quot; to be replaced with a function parameter as follows --&gt;\r\n\r\n\r\n    void function(String desiredName){\r\n         String desiredName = &quot;bbb&quot;;\r\n    }\r\n\r\nTo make it simple I just need to make a variable with the same name of a function input.\r\n","title":"Assigning Variable name as function parameter java","body":"<p>I want to make new variable</p>\n<blockquote>\n<p>String x = new String();</p>\n</blockquote>\n<p>Note that I want &quot;x&quot; to be replaced with a function parameter as follows --&gt;</p>\n<pre><code>void function(String desiredName){\n     String desiredName = &quot;bbb&quot;;\n}\n</code></pre>\n<p>To make it simple I just need to make a variable with the same name of a function input.</p>\n"},{"tags":["java","spring-data-r2dbc","r2dbc","r2dbc-postgresql"],"answers":[{"tags":[],"owner":{"account_id":1867958,"reputation":1226,"user_id":1691018,"accept_rate":84,"display_name":"Anakin001"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1651580943,"creation_date":1651580943,"answer_id":72099391,"question_id":72056016,"body_markdown":"It&#39;s a known bug in R2DBC pool, here&#39;s the [issue][1]. As a workaround, `maxLifeTime` should be explicitly set, for example I set it to the maximum allowed value in milliseconds (otherwise, if set to a value greater than the maximum allowed value in milliseconds, R2DBC will throw an Exception):\r\n\r\n        val cp = ConnectionPoolConfiguration.builder(cf)\r\n            .initialSize(poolInitialSize)\r\n            .maxSize(poolMaxSize)\r\n            .maxLifeTime(Duration.ofMillis(Long.MAX_VALUE))\r\n            .metricsRecorder(DatabaseMetricsRecorder())\r\n            .build()\r\n\r\n\r\n  [1]: https://github.com/r2dbc/r2dbc-pool/issues/129","title":"R2DBC pool closes all connections before each query","body":"<p>It's a known bug in R2DBC pool, here's the <a href=\"https://github.com/r2dbc/r2dbc-pool/issues/129\" rel=\"nofollow noreferrer\">issue</a>. As a workaround, <code>maxLifeTime</code> should be explicitly set, for example I set it to the maximum allowed value in milliseconds (otherwise, if set to a value greater than the maximum allowed value in milliseconds, R2DBC will throw an Exception):</p>\n<pre><code>    val cp = ConnectionPoolConfiguration.builder(cf)\n        .initialSize(poolInitialSize)\n        .maxSize(poolMaxSize)\n        .maxLifeTime(Duration.ofMillis(Long.MAX_VALUE))\n        .metricsRecorder(DatabaseMetricsRecorder())\n        .build()\n</code></pre>\n"}],"owner":{"account_id":1867958,"reputation":1226,"user_id":1691018,"accept_rate":84,"display_name":"Anakin001"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2402,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72099391,"answer_count":1,"score":0,"last_activity_date":1651580943,"creation_date":1651225630,"question_id":72056016,"body_markdown":"We&#39;re using the latest versions of `spring-data-r2dbc`, `r2dbc-pool` and `r2dbc-postgresql` for connecting to a PostgreSQL database using a connection pool. We noticed some high response times, much higher than the query response times taken from the database itself (`query_store.qs_view`)\r\n\r\nWe added a `metricsRecorder` to the pool and, for debugging purposes, we&#39;re only printing when each method is invoked. It seems that before each SQL query, we get as many `recordDestroyLatency` invocations as there are connections in the pool and the same number of `recordAllocationSuccessAndLatency` invocations. We assumed that this means that each connection gets closed and reopened before each query. We then compared with the database logs and it proves this is true: there is the same number of `could not receive data from client: An existing connection was forcibly closed by the remote host` followed by `connection received:` messages.\r\n\r\nWhy would this happen? Below is the code we&#39;re using for creating the connection factory.\r\n\r\n    @Configuration\r\n    open class DatabaseConfiguration : AbstractR2dbcConfiguration() {\r\n    \r\n    //some variable initialisations\r\n    \r\n        @Bean\r\n        override fun connectionFactory(): ConnectionFactory {\r\n            val cf = PostgresqlConnectionFactory(\r\n                PostgresqlConnectionConfiguration.builder()\r\n                    .host(hostname)\r\n                    .database(dbName)\r\n                    .schema(dbSchema)\r\n                    .username(dbUsername)\r\n                    .password(dbPassword)\r\n                    .build()\r\n            )\r\n            val cp = ConnectionPoolConfiguration.builder(cf)\r\n                .initialSize(poolInitialSize)\r\n                .maxSize(poolMaxSize)\r\n                .metricsRecorder(DatabaseMetricsRecorder())\r\n                .build()\r\n            return ConnectionPool(cp)\r\n        }\r\n    }\r\n\r\nAs mentioned, the `DatabaseMetricsRecorder` just prints each operation. For the query itself, we&#39;re extending the `ReactiveCrudRepository` interface. The `ConnectionPoolConfiguration` is in its simplest form here, we tried adding parameters like `maxIdleTime` or `validationQuery` (as we&#39;ll have for production) but it doesn&#39;t seem to help.","title":"R2DBC pool closes all connections before each query","body":"<p>We're using the latest versions of <code>spring-data-r2dbc</code>, <code>r2dbc-pool</code> and <code>r2dbc-postgresql</code> for connecting to a PostgreSQL database using a connection pool. We noticed some high response times, much higher than the query response times taken from the database itself (<code>query_store.qs_view</code>)</p>\n<p>We added a <code>metricsRecorder</code> to the pool and, for debugging purposes, we're only printing when each method is invoked. It seems that before each SQL query, we get as many <code>recordDestroyLatency</code> invocations as there are connections in the pool and the same number of <code>recordAllocationSuccessAndLatency</code> invocations. We assumed that this means that each connection gets closed and reopened before each query. We then compared with the database logs and it proves this is true: there is the same number of <code>could not receive data from client: An existing connection was forcibly closed by the remote host</code> followed by <code>connection received:</code> messages.</p>\n<p>Why would this happen? Below is the code we're using for creating the connection factory.</p>\n<pre><code>@Configuration\nopen class DatabaseConfiguration : AbstractR2dbcConfiguration() {\n\n//some variable initialisations\n\n    @Bean\n    override fun connectionFactory(): ConnectionFactory {\n        val cf = PostgresqlConnectionFactory(\n            PostgresqlConnectionConfiguration.builder()\n                .host(hostname)\n                .database(dbName)\n                .schema(dbSchema)\n                .username(dbUsername)\n                .password(dbPassword)\n                .build()\n        )\n        val cp = ConnectionPoolConfiguration.builder(cf)\n            .initialSize(poolInitialSize)\n            .maxSize(poolMaxSize)\n            .metricsRecorder(DatabaseMetricsRecorder())\n            .build()\n        return ConnectionPool(cp)\n    }\n}\n</code></pre>\n<p>As mentioned, the <code>DatabaseMetricsRecorder</code> just prints each operation. For the query itself, we're extending the <code>ReactiveCrudRepository</code> interface. The <code>ConnectionPoolConfiguration</code> is in its simplest form here, we tried adding parameters like <code>maxIdleTime</code> or <code>validationQuery</code> (as we'll have for production) but it doesn't seem to help.</p>\n"},{"tags":["java","android","xamarin","visual-studio-2019"],"comments":[{"owner":{"account_id":11006863,"reputation":674,"user_id":8085527,"display_name":"Ricko.."},"score":0,"creation_date":1663679846,"post_id":70332420,"comment_id":130292925,"body_markdown":"i switched to VS 2022 and it works fine","body":"i switched to VS 2022 and it works fine"}],"answers":[{"tags":[],"owner":{"account_id":16405322,"reputation":10599,"user_id":11850033,"display_name":"Wendy Zang - MSFT"},"down_vote_count":2,"up_vote_count":0,"is_accepted":true,"score":-2,"last_activity_date":1639463005,"creation_date":1639463005,"answer_id":70344563,"question_id":70332420,"body_markdown":"For the error with java development kit location, you could try the stpes below.\r\n\r\n 1. Install the latest JDK 8 that&#39;s available from the Oracle Java SE\r\n   Development Kit 8 Downloads webpage. https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\r\n 2. Follow the instructions in the\r\n   error message to manually point your Visual Studio instance to the\r\n   location of your new JDK.\r\n\r\nFor the best mobile development experience, we encourage you to update to the latest Visual Studio version to keep up with the latest changes in iOS and Android development.\r\n\r\nIf you still want to use the old version and could not fix the error with the stpes above. You could try to repair the Visual Studio.\r\n","title":"vs2019 - Xamarin: loses path settings of &quot;Java Development Kit Location&quot;","body":"<p>For the error with java development kit location, you could try the stpes below.</p>\n<ol>\n<li>Install the latest JDK 8 that's available from the Oracle Java SE\nDevelopment Kit 8 Downloads webpage. <a href=\"https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\" rel=\"nofollow noreferrer\">https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html</a></li>\n<li>Follow the instructions in the\nerror message to manually point your Visual Studio instance to the\nlocation of your new JDK.</li>\n</ol>\n<p>For the best mobile development experience, we encourage you to update to the latest Visual Studio version to keep up with the latest changes in iOS and Android development.</p>\n<p>If you still want to use the old version and could not fix the error with the stpes above. You could try to repair the Visual Studio.</p>\n"},{"tags":[],"owner":{"account_id":13100252,"reputation":309,"user_id":9464846,"display_name":"Anass"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1651580617,"creation_date":1651580617,"answer_id":72099335,"question_id":70332420,"body_markdown":"I faced a similar issue when updating visual studio 2019 from version **16.3** to **16.11** while working on a react native project, somehow my jdk installation got corrupted during or after installation.\r\nInitiating a repair it from the VS SDK manager did not work and I later found out that my jdk location was changed from:\r\n\r\n```\r\nC:\\Program Files\\Android\\jdk\\microsoft_dist_openjdk_1.8.0.25\r\n```\r\nto\r\n```\r\nC:\\Program Files\\Eclipse Foundation\\jdk-8.0.302.8-hotspot\r\n```\r\nI updated the **JAVA_HOME** env variable to point to the new location then clean rebuild and everything is back to normal.\r\n\r\nHope this helps.","title":"vs2019 - Xamarin: loses path settings of &quot;Java Development Kit Location&quot;","body":"<p>I faced a similar issue when updating visual studio 2019 from version <strong>16.3</strong> to <strong>16.11</strong> while working on a react native project, somehow my jdk installation got corrupted during or after installation.\nInitiating a repair it from the VS SDK manager did not work and I later found out that my jdk location was changed from:</p>\n<pre><code>C:\\Program Files\\Android\\jdk\\microsoft_dist_openjdk_1.8.0.25\n</code></pre>\n<p>to</p>\n<pre><code>C:\\Program Files\\Eclipse Foundation\\jdk-8.0.302.8-hotspot\n</code></pre>\n<p>I updated the <strong>JAVA_HOME</strong> env variable to point to the new location then clean rebuild and everything is back to normal.</p>\n<p>Hope this helps.</p>\n"}],"owner":{"account_id":11006863,"reputation":674,"user_id":8085527,"display_name":"Ricko.."},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":981,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":70344563,"answer_count":2,"score":4,"last_activity_date":1651580617,"creation_date":1639387772,"question_id":70332420,"body_markdown":"I do a very simple thing.\r\n\r\nI go to Tools -&gt; Options -&gt; Xamarin&gt; Android Settings\r\nand I change the &quot;Java Development Kit Location&quot; path.\r\nI press ok.\r\n\r\nI compile the project and the option is used correctly.\r\n\r\nI go to Tools -&gt; Options -&gt; Xamarin&gt; Android Settings and the path is correct.\r\n\r\nI restart VS, I go to Tools -&gt; Options -&gt; Xamarin&gt; Android Settings and the **path is wrong**, it is the previous one.\r\n\r\nVisual studio version used:\r\nMicrosoft Visual Studio Community 2019\r\nVersion 16.11.7\r\n\r\nhappens to someone else?\r\n\r\nis it a bug?\r\n\r\nthanks","title":"vs2019 - Xamarin: loses path settings of &quot;Java Development Kit Location&quot;","body":"<p>I do a very simple thing.</p>\n<p>I go to Tools -&gt; Options -&gt; Xamarin&gt; Android Settings\nand I change the &quot;Java Development Kit Location&quot; path.\nI press ok.</p>\n<p>I compile the project and the option is used correctly.</p>\n<p>I go to Tools -&gt; Options -&gt; Xamarin&gt; Android Settings and the path is correct.</p>\n<p>I restart VS, I go to Tools -&gt; Options -&gt; Xamarin&gt; Android Settings and the <strong>path is wrong</strong>, it is the previous one.</p>\n<p>Visual studio version used:\nMicrosoft Visual Studio Community 2019\nVersion 16.11.7</p>\n<p>happens to someone else?</p>\n<p>is it a bug?</p>\n<p>thanks</p>\n"},{"tags":["java","servlets","jersey","jax-rs","jetty"],"answers":[{"tags":[],"owner":{"account_id":406289,"reputation":47511,"user_id":775715,"accept_rate":100,"display_name":"Joakim Erdfelt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651580574,"creation_date":1651580574,"answer_id":72099328,"question_id":72098937,"body_markdown":"Typically a database (DataSource) for Servlet is configured via JNDI (the definition exists on the server JNDI context, and the webapp JNDI context contains a hardcoded reference to the server level location)\r\n\r\nYour server level will typically have an XML that defines the `DataSource` as a `org.eclipse.jetty.plus.jndi.Resource` against the server level context.\r\n\r\nAnd your webapp&#39;s `WEB-INF/web.xml` contains the `&lt;resource-ref&gt;` back to that server level location.\r\n\r\nYour code then uses the `InitialContext` on JNDI to access this already defined `DataSource`.\r\n\r\nThis has the added bonus that the datasource can be any JDBC compatible implementation, and even include complex configurations like a Connection pool implementation (eg: c3p0) in front of your JDBC DataSource.\r\n\r\nFor unit testing, you&#39;ll set it up like this ...  \r\nhttps://stackoverflow.com/questions/69729215/jndi-lookup-failing-for-embedded-jetty-server\r\n\r\nFor standard webapp deployment in a standalone Jetty container, you&#39;ll set it up like this ...  \r\n[Declaring JNDI Resources](https://www.eclipse.org/jetty/documentation/jetty-10/operations-guide/index.html#og-declaring-resources)\r\n","title":"How do I get config paramerters from my web.xml in Jersey?","body":"<p>Typically a database (DataSource) for Servlet is configured via JNDI (the definition exists on the server JNDI context, and the webapp JNDI context contains a hardcoded reference to the server level location)</p>\n<p>Your server level will typically have an XML that defines the <code>DataSource</code> as a <code>org.eclipse.jetty.plus.jndi.Resource</code> against the server level context.</p>\n<p>And your webapp's <code>WEB-INF/web.xml</code> contains the <code>&lt;resource-ref&gt;</code> back to that server level location.</p>\n<p>Your code then uses the <code>InitialContext</code> on JNDI to access this already defined <code>DataSource</code>.</p>\n<p>This has the added bonus that the datasource can be any JDBC compatible implementation, and even include complex configurations like a Connection pool implementation (eg: c3p0) in front of your JDBC DataSource.</p>\n<p>For unit testing, you'll set it up like this ...<br />\n<a href=\"https://stackoverflow.com/questions/69729215/jndi-lookup-failing-for-embedded-jetty-server\">JNDI Lookup Failing For Embedded Jetty Server</a></p>\n<p>For standard webapp deployment in a standalone Jetty container, you'll set it up like this ...<br />\n<a href=\"https://www.eclipse.org/jetty/documentation/jetty-10/operations-guide/index.html#og-declaring-resources\" rel=\"nofollow noreferrer\">Declaring JNDI Resources</a></p>\n"}],"owner":{"account_id":4972685,"reputation":2505,"user_id":8098236,"accept_rate":100,"display_name":"Ian Rehwinkel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":372,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1651580574,"creation_date":1651578617,"question_id":72098937,"body_markdown":"I have been trying to get parameters from my `web.xml` file from within my Jakarta JAX-RS resource. My web.xml is as follows:\r\n\r\n```xml\r\n&lt;web-app&gt;\r\n    &lt;servlet&gt;\r\n        &lt;servlet-name&gt;Jersey REST Service&lt;/servlet-name&gt;\r\n        &lt;servlet-class&gt;org.glassfish.jersey.servlet.ServletContainer&lt;/servlet-class&gt;\r\n        &lt;init-param&gt;\r\n            &lt;param-name&gt;jersey.config.server.provider.packages&lt;/param-name&gt;\r\n            &lt;param-value&gt;terrible.package.name&lt;/param-value&gt;\r\n        &lt;/init-param&gt;\r\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\r\n    &lt;/servlet&gt;\r\n    &lt;servlet-mapping&gt;\r\n        &lt;servlet-name&gt;Jersey REST Service&lt;/servlet-name&gt;\r\n        &lt;url-pattern&gt;/api/v1/*&lt;/url-pattern&gt;\r\n    &lt;/servlet-mapping&gt;\r\n    &lt;context-param&gt;\r\n        &lt;param-name&gt;max-customers-size&lt;/param-name&gt;\r\n        &lt;param-value&gt;10&lt;/param-value&gt;\r\n    &lt;/context-param&gt;\r\n&lt;/web-app&gt;\r\n```\r\nIn my test setup, I am running my web app with Jetty:\r\n```java\r\npublic static void main(String[] args) throws Exception {\r\n    Server server = new Server(8080);\r\n    WebAppContext ctx = new WebAppContext(&quot;target/the-finished-servlet.war&quot;, &quot;/&quot;);\r\n    server.setHandler(ctx);\r\n    server.start();\r\n}\r\n```\r\nAnd I have the following user resource defined using jakarta:\r\n```java\r\n@Path(&quot;user&quot;)\r\npublic class UserResource {\r\n\r\n    ServletContext context;\r\n    \r\n    @Context\r\n    public void setServletContext(ServletContext context) {\r\n        this.context = context;\r\n        System.out.println(&quot;setting to: &quot; + context);\r\n    }\r\n\r\n    @GET\r\n    @Path(&quot;/list&quot;)\r\n    @Produces(MediaType.APPLICATION_JSON)\r\n    public Response getListOfAllUsers(final @Context HttpHeaders hdrs) throws SQLException {\r\n        System.out.println(context.getInitParameter(&quot;max-customers-size&quot;));\r\n        return Response.ok(&quot;{}&quot;).build();\r\n    }\r\n\r\n}\r\n```\r\n\r\nThe context is always `null`, which makes absolutely no sense. The `setServletContext` method is called, and the parameter is `null`. I&#39;ve tried using `@Context` on a constructor parameter, I&#39;ve tried it on my context field, and I&#39;ve tried it in the `getListOfAllUsers` method. None of them work. \r\n\r\nI just want to configure my servlet (for MySQL database path and user, in this example I&#39;m testing with `max-customers-size`, which doesn&#39;t matter though, because my context is `null` either way). Is there an easier way to get custom config data into my servlet? I want the user of my resulting `war` file to be able to supply things like the database port. Why isn&#39;t ServletContext working, and if there is an easier way to make my servlet configurable, how do I do that? ","title":"How do I get config paramerters from my web.xml in Jersey?","body":"<p>I have been trying to get parameters from my <code>web.xml</code> file from within my Jakarta JAX-RS resource. My web.xml is as follows:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;web-app&gt;\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;Jersey REST Service&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;org.glassfish.jersey.servlet.ServletContainer&lt;/servlet-class&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;jersey.config.server.provider.packages&lt;/param-name&gt;\n            &lt;param-value&gt;terrible.package.name&lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;Jersey REST Service&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/api/v1/*&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n    &lt;context-param&gt;\n        &lt;param-name&gt;max-customers-size&lt;/param-name&gt;\n        &lt;param-value&gt;10&lt;/param-value&gt;\n    &lt;/context-param&gt;\n&lt;/web-app&gt;\n</code></pre>\n<p>In my test setup, I am running my web app with Jetty:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) throws Exception {\n    Server server = new Server(8080);\n    WebAppContext ctx = new WebAppContext(&quot;target/the-finished-servlet.war&quot;, &quot;/&quot;);\n    server.setHandler(ctx);\n    server.start();\n}\n</code></pre>\n<p>And I have the following user resource defined using jakarta:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Path(&quot;user&quot;)\npublic class UserResource {\n\n    ServletContext context;\n    \n    @Context\n    public void setServletContext(ServletContext context) {\n        this.context = context;\n        System.out.println(&quot;setting to: &quot; + context);\n    }\n\n    @GET\n    @Path(&quot;/list&quot;)\n    @Produces(MediaType.APPLICATION_JSON)\n    public Response getListOfAllUsers(final @Context HttpHeaders hdrs) throws SQLException {\n        System.out.println(context.getInitParameter(&quot;max-customers-size&quot;));\n        return Response.ok(&quot;{}&quot;).build();\n    }\n\n}\n</code></pre>\n<p>The context is always <code>null</code>, which makes absolutely no sense. The <code>setServletContext</code> method is called, and the parameter is <code>null</code>. I've tried using <code>@Context</code> on a constructor parameter, I've tried it on my context field, and I've tried it in the <code>getListOfAllUsers</code> method. None of them work.</p>\n<p>I just want to configure my servlet (for MySQL database path and user, in this example I'm testing with <code>max-customers-size</code>, which doesn't matter though, because my context is <code>null</code> either way). Is there an easier way to get custom config data into my servlet? I want the user of my resulting <code>war</code> file to be able to supply things like the database port. Why isn't ServletContext working, and if there is an easier way to make my servlet configurable, how do I do that?</p>\n"},{"tags":["java","antlr4"],"comments":[{"owner":{"account_id":9293314,"reputation":2267,"user_id":6901081,"display_name":"jsotola"},"score":0,"creation_date":1651542045,"post_id":72093942,"comment_id":127383872,"body_markdown":"the two questions cannot be answered with one answer ... please post two separate questions","body":"the two questions cannot be answered with one answer ... please post two separate questions"}],"answers":[{"tags":[],"owner":{"account_id":20937,"reputation":167577,"user_id":50476,"accept_rate":100,"display_name":"Bart Kiers"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1651580333,"creation_date":1651558591,"answer_id":72095456,"question_id":72093942,"body_markdown":"A character set `[a-za-z]` is exactly the same as `[a-z]`. And including `ug` in a set that already contains `a-z`: `[a-zug]` is not necessary because the range `a-z` already includes both `u` and `g`. So `C` would just be:\r\n\r\n```\r\nC: ~[a-zA-Z]; // note that `A-z` must be `A-Z`\r\n```\r\n\r\nW.r.t.:\r\n\r\n```\r\nA: (&#39;/*&#39;(.)*&#39;*/&#39;);\r\nB: ~A; // No, this is incorrect!\r\n```\r\n\r\nAs I mentioned in the other question: you cannot negate a rule (`A` in this case) that matches multiple characters. You can only negate rules that match a single character.\r\n\r\nIf you want to skip comments, just do:\r\n\r\n```\r\nCOMMENT\r\n : &#39;/*&#39; .*? &#39;*/&#39; -&gt; skip\r\n ;\r\n```\r\n\r\n## EDIT\r\n\r\n&gt; For example you have the input: AA this should also be at C but it would not work.\r\n\r\nThat is correct, you said you wanted `C` to recognize &quot;all Characters which not belong to A or B&quot;. What you&#39;re looking for is probably just this:\r\n\r\n```\r\nA: [a-z]+ &#39;ug&#39;;\r\nB: [A-Z][a-z]+;\r\nC: [a-zA-Z]+;\r\n```\r\n\r\nThat way, lowercase letters ending with `&quot;ug&quot;` would become an `A` token, letters starting with an uppercase will become a `B` token, and all the others will become `C` tokens.","title":"ANTLR4 How can I create a regular expression that allows all except this two statements // How to delete a part of a input","body":"<p>A character set <code>[a-za-z]</code> is exactly the same as <code>[a-z]</code>. And including <code>ug</code> in a set that already contains <code>a-z</code>: <code>[a-zug]</code> is not necessary because the range <code>a-z</code> already includes both <code>u</code> and <code>g</code>. So <code>C</code> would just be:</p>\n<pre><code>C: ~[a-zA-Z]; // note that `A-z` must be `A-Z`\n</code></pre>\n<p>W.r.t.:</p>\n<pre><code>A: ('/*'(.)*'*/');\nB: ~A; // No, this is incorrect!\n</code></pre>\n<p>As I mentioned in the other question: you cannot negate a rule (<code>A</code> in this case) that matches multiple characters. You can only negate rules that match a single character.</p>\n<p>If you want to skip comments, just do:</p>\n<pre><code>COMMENT\n : '/*' .*? '*/' -&gt; skip\n ;\n</code></pre>\n<h2>EDIT</h2>\n<blockquote>\n<p>For example you have the input: AA this should also be at C but it would not work.</p>\n</blockquote>\n<p>That is correct, you said you wanted <code>C</code> to recognize &quot;all Characters which not belong to A or B&quot;. What you're looking for is probably just this:</p>\n<pre><code>A: [a-z]+ 'ug';\nB: [A-Z][a-z]+;\nC: [a-zA-Z]+;\n</code></pre>\n<p>That way, lowercase letters ending with <code>&quot;ug&quot;</code> would become an <code>A</code> token, letters starting with an uppercase will become a <code>B</code> token, and all the others will become <code>C</code> tokens.</p>\n"}],"owner":{"account_id":25178375,"reputation":3,"user_id":19020206,"display_name":"kaden42"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72095456,"answer_count":1,"score":0,"last_activity_date":1651580333,"creation_date":1651540711,"question_id":72093942,"body_markdown":"I saw this question:\r\nhttps://stackoverflow.com/questions/72088870/antlr4-how-can-i-create-a-regular-expression-that-allows-all-characters-except-t\r\n\r\nbecause of this I thought a little bit about antlr4 (I used antlr years ago).\r\n\r\nNow I have a other question for example we would have:\r\n\r\n    A: [a-z]+&#39;ug&#39;;\r\n    B: [A-Z][a-z]+;\r\n    C:\r\n\r\nNow I want that C recognize all Characters which not belong to A or B.\r\n\r\nHow we could make this? What would be here the correct regEx?\r\n\r\n       C: ~[a-zugA-za-z]\r\n\r\nThat would be false or?\r\n\r\nI thougth a lot, but without sucess.\r\n\r\n_________________________________\r\n\r\nAnd a other question is, just for interest.\r\n\r\nNow, for example, if I wanted antlr to recognize this for me:\r\n\r\nI have e.g. as input:\r\n\r\n    thisisonlyatest/*oidjqiodjqw*/test\r\n\r\nNow i want to delete all between `/* */`, so that the result is only:\r\n\r\n    thisisonlyatesttest\r\n\r\nHow we could make that?\r\n\r\nOr for example the input would be:\r\n\r\n    thisisonlyatest/*oidjqiodjqw*/test\r\n    another line /*kjdqio*/ another text\r\n\r\nthe result:\r\n\r\n    thisisonlyatest test\r\n    another line another text\r\n\r\n\r\nI tought that we could make:\r\n\r\n    A: (&#39;/*&#39;(.)*&#39;*/&#39;)\r\n    B: ~A\r\n\r\nbut it didnot work.\r\n\r\n","title":"ANTLR4 How can I create a regular expression that allows all except this two statements // How to delete a part of a input","body":"<p>I saw this question:\n<a href=\"https://stackoverflow.com/questions/72088870/antlr4-how-can-i-create-a-regular-expression-that-allows-all-characters-except-t\">ANTLR4 How can I create a regular expression that allows all characters except two selected ones?</a></p>\n<p>because of this I thought a little bit about antlr4 (I used antlr years ago).</p>\n<p>Now I have a other question for example we would have:</p>\n<pre><code>A: [a-z]+'ug';\nB: [A-Z][a-z]+;\nC:\n</code></pre>\n<p>Now I want that C recognize all Characters which not belong to A or B.</p>\n<p>How we could make this? What would be here the correct regEx?</p>\n<pre><code>   C: ~[a-zugA-za-z]\n</code></pre>\n<p>That would be false or?</p>\n<p>I thougth a lot, but without sucess.</p>\n<hr />\n<p>And a other question is, just for interest.</p>\n<p>Now, for example, if I wanted antlr to recognize this for me:</p>\n<p>I have e.g. as input:</p>\n<pre><code>thisisonlyatest/*oidjqiodjqw*/test\n</code></pre>\n<p>Now i want to delete all between <code>/* */</code>, so that the result is only:</p>\n<pre><code>thisisonlyatesttest\n</code></pre>\n<p>How we could make that?</p>\n<p>Or for example the input would be:</p>\n<pre><code>thisisonlyatest/*oidjqiodjqw*/test\nanother line /*kjdqio*/ another text\n</code></pre>\n<p>the result:</p>\n<pre><code>thisisonlyatest test\nanother line another text\n</code></pre>\n<p>I tought that we could make:</p>\n<pre><code>A: ('/*'(.)*'*/')\nB: ~A\n</code></pre>\n<p>but it didnot work.</p>\n"},{"tags":["java","android","android-layout","android-activity","android-databinding"],"comments":[{"owner":{"account_id":402229,"reputation":93994,"user_id":769265,"display_name":"David Wasser"},"score":0,"creation_date":1605608586,"post_id":64865021,"comment_id":114696294,"body_markdown":"what is the file name of your layout xml file?","body":"what is the file name of your layout xml file?"}],"answers":[{"tags":[],"owner":{"account_id":10311711,"reputation":51,"user_id":7607324,"display_name":"Adam Giergun"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1651579901,"creation_date":1649849892,"answer_id":71856849,"question_id":64865021,"body_markdown":"I strongly suspect some Android Studio bug.\r\n\r\nI had the same bug, and everything I&#39;ve had done was adding some TextView.\r\nAs it was easy to find this difference, I&#39;ve just started fiddling with this TextView in xml. At some point bug disappeared.\r\nAnd here comes the best. Before starting to deal with the problem I&#39;ve saved problematic change with git. So at the end I&#39;ve reapplied this change and ... everything worked. No more bug !\r\n\r\nP.S. As this bug reappears, I&#39;ve found that the easiest solution for getting rid of it is to use &quot;Clean Project&quot; from &quot;Build&quot; menu.\r\n","title":"Data binding: Missing required view with ID","body":"<p>I strongly suspect some Android Studio bug.</p>\n<p>I had the same bug, and everything I've had done was adding some TextView.\nAs it was easy to find this difference, I've just started fiddling with this TextView in xml. At some point bug disappeared.\nAnd here comes the best. Before starting to deal with the problem I've saved problematic change with git. So at the end I've reapplied this change and ... everything worked. No more bug !</p>\n<p>P.S. As this bug reappears, I've found that the easiest solution for getting rid of it is to use &quot;Clean Project&quot; from &quot;Build&quot; menu.</p>\n"}],"owner":{"account_id":19950635,"reputation":31,"user_id":14620384,"display_name":"final project"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4089,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":1,"score":2,"last_activity_date":1651579901,"creation_date":1605557442,"question_id":64865021,"body_markdown":"I create an app using binding and I get an error that I couldn&#39;t solve.\r\nThe error is\r\n\r\n```\r\njava.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.newtest/com.example.mylibrary.MainActivity1}: java.lang.NullPointerException: Missing required view with ID: com.example.newtest:id/myRecyclerview\r\n```\r\nThanks!\r\n\r\n```\r\npublic class MainActivity1 extends AppCompatActivity {\r\n\r\n    RecyclerView.LayoutManager layoutManager;\r\n    ArrayList&lt;POJOimage&gt;pojoImageArrayList;\r\n    ActivityMainBinding binding;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        binding = ActivityMainBinding.inflate(getLayoutInflater());\r\n        setContentView(binding.getRoot());\r\n\r\n        layoutManager = new LinearLayoutManager(this);\r\n        binding.myRecyclerview.setLayoutManager(layoutManager);\r\n        init();\r\n    }\r\n```\r\nXML:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n\r\n&lt;androidx.constraintlayout.widget.ConstraintLayout\r\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;.MainActivity1&quot;\r\n    android:background=&quot;#000&quot;\r\n    android:padding=&quot;10dp&quot;&gt;\r\n\r\n    &lt;androidx.recyclerview.widget.RecyclerView\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:id=&quot;@+id/myRecyclerview&quot;/&gt;\r\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n```","title":"Data binding: Missing required view with ID","body":"<p>I create an app using binding and I get an error that I couldn't solve.\nThe error is</p>\n<pre><code>java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.newtest/com.example.mylibrary.MainActivity1}: java.lang.NullPointerException: Missing required view with ID: com.example.newtest:id/myRecyclerview\n</code></pre>\n<p>Thanks!</p>\n<pre><code>public class MainActivity1 extends AppCompatActivity {\n\n    RecyclerView.LayoutManager layoutManager;\n    ArrayList&lt;POJOimage&gt;pojoImageArrayList;\n    ActivityMainBinding binding;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        binding = ActivityMainBinding.inflate(getLayoutInflater());\n        setContentView(binding.getRoot());\n\n        layoutManager = new LinearLayoutManager(this);\n        binding.myRecyclerview.setLayoutManager(layoutManager);\n        init();\n    }\n</code></pre>\n<p>XML:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n\n&lt;androidx.constraintlayout.widget.ConstraintLayout\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.MainActivity1&quot;\n    android:background=&quot;#000&quot;\n    android:padding=&quot;10dp&quot;&gt;\n\n    &lt;androidx.recyclerview.widget.RecyclerView\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:id=&quot;@+id/myRecyclerview&quot;/&gt;\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n"},{"tags":["java","spring","spring-data-keyvalue"],"comments":[{"owner":{"account_id":1139389,"reputation":536,"user_id":1123709,"accept_rate":60,"display_name":"Jonathan"},"score":0,"creation_date":1651578183,"post_id":72098806,"comment_id":127391646,"body_markdown":"Maybe it could help to also share your Book class, Maybe also try out if findByAuthor works as expected","body":"Maybe it could help to also share your Book class, Maybe also try out if findByAuthor works as expected"},{"owner":{"account_id":16871523,"reputation":706,"user_id":12199915,"display_name":"Alex"},"score":0,"creation_date":1651580992,"post_id":72098806,"comment_id":127392728,"body_markdown":"Does this answer your question? [Spring Data JPA Redis : Cannot write custom method based query](https://stackoverflow.com/questions/51101829/spring-data-jpa-redis-cannot-write-custom-method-based-query)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/51101829/spring-data-jpa-redis-cannot-write-custom-method-based-query\">Spring Data JPA Redis : Cannot write custom method based query</a>"}],"answers":[{"tags":[],"owner":{"account_id":6375285,"reputation":35,"user_id":4946450,"display_name":"Leuchtfeuer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651579739,"creation_date":1651579739,"answer_id":72099182,"question_id":72098806,"body_markdown":"Repositories work with Entity classes.\r\nSo my guess is, that you should annotate your Book Class with @Entity.\r\n\r\n    @Value\r\n    @NoArgsConstructor(force = true, access = AccessLevel.PRIVATE)\r\n    @AllArgsConstructor\r\n    @KeySpace(&quot;books&quot;)\r\n    @Entity\r\n    class Book {\r\n        @Id\r\n        String id;\r\n        String title;\r\n        String author;\r\n        String isbn;\r\n    }\r\n\r\n","title":"Spring Data key-value custom queries does not work","body":"<p>Repositories work with Entity classes.\nSo my guess is, that you should annotate your Book Class with @Entity.</p>\n<pre><code>@Value\n@NoArgsConstructor(force = true, access = AccessLevel.PRIVATE)\n@AllArgsConstructor\n@KeySpace(&quot;books&quot;)\n@Entity\nclass Book {\n    @Id\n    String id;\n    String title;\n    String author;\n    String isbn;\n}\n</code></pre>\n"}],"owner":{"account_id":14856402,"reputation":697,"user_id":10728774,"display_name":"Reddi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":317,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1651579739,"creation_date":1651577841,"question_id":72098806,"body_markdown":"There is an in-memory repository class:\r\n```\r\n@Repository\r\ninterface InMemoryBookRepository extends CrudRepository&lt;Book, String&gt; {\r\n    int countByAuthor(String author);\r\n}\r\n```\r\nThe book model class:\r\n```\r\n@Value\r\n@NoArgsConstructor(force = true, access = AccessLevel.PRIVATE)\r\n@AllArgsConstructor\r\n@KeySpace(&quot;books&quot;)\r\nclass Book {\r\n    @Id\r\n    String id;\r\n    String title;\r\n    String author;\r\n    String isbn;\r\n}\r\n```\r\nwhenever I try to invoke this method an exception is thrown: `java.lang.UnsupportedOperationException: Query method not supported.` The version of the spring-data-keyvalue is 2.6.4 - the latest one. Any advice?","title":"Spring Data key-value custom queries does not work","body":"<p>There is an in-memory repository class:</p>\n<pre><code>@Repository\ninterface InMemoryBookRepository extends CrudRepository&lt;Book, String&gt; {\n    int countByAuthor(String author);\n}\n</code></pre>\n<p>The book model class:</p>\n<pre><code>@Value\n@NoArgsConstructor(force = true, access = AccessLevel.PRIVATE)\n@AllArgsConstructor\n@KeySpace(&quot;books&quot;)\nclass Book {\n    @Id\n    String id;\n    String title;\n    String author;\n    String isbn;\n}\n</code></pre>\n<p>whenever I try to invoke this method an exception is thrown: <code>java.lang.UnsupportedOperationException: Query method not supported.</code> The version of the spring-data-keyvalue is 2.6.4 - the latest one. Any advice?</p>\n"},{"tags":["java","exception","jvm","openj9"],"comments":[{"owner":{"account_id":1217449,"reputation":4099,"user_id":1184752,"accept_rate":43,"display_name":"Juraj Martinka"},"score":0,"creation_date":1651463493,"post_id":72075378,"comment_id":127363182,"body_markdown":"Maybe they do some sort of interning of OutOfMemoryError-s? What if you call the first initCause (`var6.initCause`) with some other exception like RuntimeException?","body":"Maybe they do some sort of interning of OutOfMemoryError-s? What if you call the first initCause (<code>var6.initCause</code>) with some other exception like RuntimeException?"},{"owner":{"account_id":8763100,"reputation":51,"user_id":6552491,"display_name":"cbcwestwolf"},"score":0,"creation_date":1651466177,"post_id":72075378,"comment_id":127363563,"body_markdown":"Thx for your reply. I replace the `OutOfMemoryError` with `RuntimeException` in `var6.initCause`, and the result retains the same.","body":"Thx for your reply. I replace the <code>OutOfMemoryError</code> with <code>RuntimeException</code> in <code>var6.initCause</code>, and the result retains the same."},{"owner":{"account_id":1217449,"reputation":4099,"user_id":1184752,"accept_rate":43,"display_name":"Juraj Martinka"},"score":0,"creation_date":1651474561,"post_id":72075378,"comment_id":127365001,"body_markdown":"That is strange. I have not tried with OpenJ9 but reading the source, it looks like the same behavior: https://github.com/eclipse-openj9/openj9/blob/master/jcl/src/java.base/share/classes/java/lang/Throwable.java#L383-L386","body":"That is strange. I have not tried with OpenJ9 but reading the source, it looks like the same behavior: <a href=\"https://github.com/eclipse-openj9/openj9/blob/master/jcl/src/java.base/share/classes/java/lang/Throwable.java#L383-L386\" rel=\"nofollow noreferrer\">github.com/eclipse-openj9/openj9/blob/master/jcl/src/java.ba&zwnj;&#8203;se/&hellip;</a>"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1651477606,"post_id":72075378,"comment_id":127365744,"body_markdown":"Generally, your main method catches the `IllegalStateException` thrown by the failed `initCause` at `Harness.java:12`. The specification of `initCause` says that it will throw an `IllegalStateException` if the cause is already initialized but it doesnt say whether that `IllegalStateException` will have an initialized cause. So it has in OpenJDK, but it might not have in a different implementation.","body":"Generally, your main method catches the <code>IllegalStateException</code> thrown by the failed <code>initCause</code> at <code>Harness.java:12</code>. The specification of <code>initCause</code> says that it will throw an <code>IllegalStateException</code> if the cause is already initialized but it doesnt say whether that <code>IllegalStateException</code> will have an initialized cause. So it has in OpenJDK, but it might not have in a different implementation."},{"owner":{"account_id":8763100,"reputation":51,"user_id":6552491,"display_name":"cbcwestwolf"},"score":0,"creation_date":1651491283,"post_id":72075378,"comment_id":127369453,"body_markdown":"@Holger So is it an undefined behavior? Could you please post the link to the specification of `initCause`? Thanks!","body":"@Holger So is it an undefined behavior? Could you please post the link to the specification of <code>initCause</code>? Thanks!"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1651495877,"post_id":72075378,"comment_id":127371006,"body_markdown":"The specification is the javadoc. https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Throwable.html#initCause(java.lang.Throwable) which everyone should have bookmarked already. But to verify that this explanation is on the right track, just insert something like `System.err.println(&quot;old cause: &quot; + var11.getCause());` before `var11.initCause(`","body":"The specification is the javadoc. <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Throwable.html#initCause(java.lang.Throwable)\" rel=\"nofollow noreferrer\">docs.oracle.com/en/java/javase/17/docs/api/java.base/java/la&zwnj;&#8203;ng/&hellip;</a> which everyone should have bookmarked already. But to verify that this explanation is on the right track, just insert something like <code>System.err.println(&quot;old cause: &quot; + var11.getCause());</code> before <code>var11.initCause(</code>"},{"owner":{"account_id":8763100,"reputation":51,"user_id":6552491,"display_name":"cbcwestwolf"},"score":0,"creation_date":1651576514,"post_id":72075378,"comment_id":127391150,"body_markdown":"@Holger Thanks! I think I have found a discussion for this problem: https://github.com/eclipse-openj9/openj9/issues/14873","body":"@Holger Thanks! I think I have found a discussion for this problem: <a href=\"https://github.com/eclipse-openj9/openj9/issues/14873\" rel=\"nofollow noreferrer\">github.com/eclipse-openj9/openj9/issues/14873</a>"}],"answers":[{"tags":[],"owner":{"account_id":16380457,"reputation":151,"user_id":11831614,"display_name":"Keith W. Campbell"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1651578476,"creation_date":1651578476,"answer_id":72098913,"question_id":72075378,"body_markdown":"This difference has been corrected; see https://github.com/eclipse-openj9/openj9/pull/14877. The fix should be in the next (0.33.0) release of OpenJ9.","title":"The cause field in Throwable object is set to this after popping method stack frames","body":"<p>This difference has been corrected; see <a href=\"https://github.com/eclipse-openj9/openj9/pull/14877\" rel=\"nofollow noreferrer\">https://github.com/eclipse-openj9/openj9/pull/14877</a>. The fix should be in the next (0.33.0) release of OpenJ9.</p>\n"}],"owner":{"account_id":8763100,"reputation":51,"user_id":6552491,"display_name":"cbcwestwolf"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":192,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1651578476,"creation_date":1651395936,"question_id":72075378,"body_markdown":"Here is my openj9 version:\r\n```\r\nopenjdk version &quot;11.0.10&quot; 2021-01-19\r\nOpenJDK Runtime Environment AdoptOpenJDK (build 11.0.10+9)\r\nEclipse OpenJ9 VM AdoptOpenJDK (build openj9-0.24.0, JRE 11 Linux amd64-64-Bit Compressed References 20210120_910 (JIT enabled, AOT enabled)\r\nOpenJ9   - 345e1b09e\r\nOMR      - 741e94ea8\r\nJCL      - 0a86953833 based on jdk-11.0.10+9)\r\n```\r\n\r\nWhen I run the following program in some other JVMs like HotSpot:\r\n\r\n```Java\r\npackage dacapo6_26;\r\n\r\nclass Option {\r\n    public boolean isRequired() {\r\n        try {\r\n            OutOfMemoryError var6 = new OutOfMemoryError(&quot;java.lang.OutOfMemoryError in ThrowCatch without counter&quot;);\r\n            var6.initCause(new OutOfMemoryError(&quot;java.lang.OutOfMemoryError as cause exception&quot;));\r\n            throw var6;\r\n        } catch (OutOfMemoryError var3) {\r\n            /*\r\n                The calling of var3.initCause would throw an IllegalStateException,\r\n                since var6 has EXPLICITLY set a cause exception at line 7.\r\n             */\r\n            var3.initCause(new NoSuchMethodException(&quot;Cause Exception&quot;));\r\n        }\r\n        return true;\r\n    }\r\n}\r\n\r\npublic class Harness {\r\n    public static void main(String[] args) {\r\n        try {\r\n            Option option = new Option();\r\n            System.out.println(option.isRequired());\r\n        } catch (Exception var11) {\r\n            /*\r\n                The calling of var11.initCause would throw an IllegalStateException,\r\n                since var11 has IMPLICITLY set a cause exception at line 14.\r\n             */\r\n            var11.initCause(new NoSuchMethodException(&quot;Cause Exception&quot;));\r\n            System.err.println(&quot;should not reach here&quot;);\r\n        }\r\n    }\r\n}\r\n``` \r\n\r\nThe result is:\r\n```\r\nException in thread &quot;main&quot; java.lang.IllegalStateException: Can&#39;t overwrite cause with java.lang.NoSuchMethodException: Cause Exception\r\n\tat java.base/java.lang.Throwable.initCause(Throwable.java:462)\r\n\tat dacapo6_26.Harness.main(Harness.java:33)\r\nCaused by: java.lang.IllegalStateException: Can&#39;t overwrite cause with java.lang.NoSuchMethodException: Cause Exception\r\n\tat java.base/java.lang.Throwable.initCause(Throwable.java:462)\r\n\tat dacapo6_26.Option.isRequired(Harness.java:12)\r\n\tat dacapo6_26.Harness.main(Harness.java:29)\r\nCaused by: java.lang.OutOfMemoryError: java.lang.OutOfMemoryError in ThrowCatch without counter\r\n\tat dacapo6_26.Option.isRequired(Harness.java:6)\r\n\t... 1 more\r\nCaused by: java.lang.OutOfMemoryError: java.lang.OutOfMemoryError as cause exception\r\n\tat dacapo6_26.Option.isRequired(Harness.java:7)\r\n\t... 1 more\r\n```\r\n\r\nBut when running on the OpenJ9, the result is:\r\n```\r\nshould not reach here\r\n```\r\n\r\nIs the result expected, or a bug in OpenJ9?\r\n\r\nDoes OpenJ9 miss the `cause` field information gained at line `var3.initCause(new NoSuchMethodException(&quot;Cause Exception&quot;));`?\r\n\r\nThanks!\r\n","title":"The cause field in Throwable object is set to this after popping method stack frames","body":"<p>Here is my openj9 version:</p>\n<pre><code>openjdk version &quot;11.0.10&quot; 2021-01-19\nOpenJDK Runtime Environment AdoptOpenJDK (build 11.0.10+9)\nEclipse OpenJ9 VM AdoptOpenJDK (build openj9-0.24.0, JRE 11 Linux amd64-64-Bit Compressed References 20210120_910 (JIT enabled, AOT enabled)\nOpenJ9   - 345e1b09e\nOMR      - 741e94ea8\nJCL      - 0a86953833 based on jdk-11.0.10+9)\n</code></pre>\n<p>When I run the following program in some other JVMs like HotSpot:</p>\n<pre><code>package dacapo6_26;\n\nclass Option {\n    public boolean isRequired() {\n        try {\n            OutOfMemoryError var6 = new OutOfMemoryError(&quot;java.lang.OutOfMemoryError in ThrowCatch without counter&quot;);\n            var6.initCause(new OutOfMemoryError(&quot;java.lang.OutOfMemoryError as cause exception&quot;));\n            throw var6;\n        } catch (OutOfMemoryError var3) {\n            /*\n                The calling of var3.initCause would throw an IllegalStateException,\n                since var6 has EXPLICITLY set a cause exception at line 7.\n             */\n            var3.initCause(new NoSuchMethodException(&quot;Cause Exception&quot;));\n        }\n        return true;\n    }\n}\n\npublic class Harness {\n    public static void main(String[] args) {\n        try {\n            Option option = new Option();\n            System.out.println(option.isRequired());\n        } catch (Exception var11) {\n            /*\n                The calling of var11.initCause would throw an IllegalStateException,\n                since var11 has IMPLICITLY set a cause exception at line 14.\n             */\n            var11.initCause(new NoSuchMethodException(&quot;Cause Exception&quot;));\n            System.err.println(&quot;should not reach here&quot;);\n        }\n    }\n}\n</code></pre>\n<p>The result is:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.IllegalStateException: Can't overwrite cause with java.lang.NoSuchMethodException: Cause Exception\n    at java.base/java.lang.Throwable.initCause(Throwable.java:462)\n    at dacapo6_26.Harness.main(Harness.java:33)\nCaused by: java.lang.IllegalStateException: Can't overwrite cause with java.lang.NoSuchMethodException: Cause Exception\n    at java.base/java.lang.Throwable.initCause(Throwable.java:462)\n    at dacapo6_26.Option.isRequired(Harness.java:12)\n    at dacapo6_26.Harness.main(Harness.java:29)\nCaused by: java.lang.OutOfMemoryError: java.lang.OutOfMemoryError in ThrowCatch without counter\n    at dacapo6_26.Option.isRequired(Harness.java:6)\n    ... 1 more\nCaused by: java.lang.OutOfMemoryError: java.lang.OutOfMemoryError as cause exception\n    at dacapo6_26.Option.isRequired(Harness.java:7)\n    ... 1 more\n</code></pre>\n<p>But when running on the OpenJ9, the result is:</p>\n<pre><code>should not reach here\n</code></pre>\n<p>Is the result expected, or a bug in OpenJ9?</p>\n<p>Does OpenJ9 miss the <code>cause</code> field information gained at line <code>var3.initCause(new NoSuchMethodException(&quot;Cause Exception&quot;));</code>?</p>\n<p>Thanks!</p>\n"},{"tags":["java","raspberry-pi"],"comments":[{"owner":{"account_id":418148,"reputation":4085,"user_id":794539,"display_name":"blubberdiblub"},"score":2,"creation_date":1484848126,"post_id":41747822,"comment_id":70689357,"body_markdown":"Maybe you need to install a font that supports the specific glyphs? Anyway, it may be better to use a character from that group: http://jrgraphix.net/r/Unicode/2500-257F - or from that: http://jrgraphix.net/r/Unicode/2300-23FF","body":"Maybe you need to install a font that supports the specific glyphs? Anyway, it may be better to use a character from that group: <a href=\"http://jrgraphix.net/r/Unicode/2500-257F\" rel=\"nofollow noreferrer\">jrgraphix.net/r/Unicode/2500-257F</a> - or from that: <a href=\"http://jrgraphix.net/r/Unicode/2300-23FF\" rel=\"nofollow noreferrer\">jrgraphix.net/r/Unicode/2300-23FF</a>"},{"owner":{"account_id":8866931,"reputation":175,"user_id":6621815,"accept_rate":0,"display_name":"gjwo"},"score":0,"creation_date":1484856554,"post_id":41747822,"comment_id":70693982,"body_markdown":"The box characters work on the midpoint of the line so to do a reasonable square wave I would need to use 2 lines, which is not ideal. I think you are right about installing fonts though.","body":"The box characters work on the midpoint of the line so to do a reasonable square wave I would need to use 2 lines, which is not ideal. I think you are right about installing fonts though."},{"owner":{"account_id":8866931,"reputation":175,"user_id":6621815,"accept_rate":0,"display_name":"gjwo"},"score":0,"creation_date":1484911807,"post_id":41747822,"comment_id":70716577,"body_markdown":"I added Unifont, this fixed the issue with no display in a terminal window, I am still looking for a suitable character to use though. I will keep looking.","body":"I added Unifont, this fixed the issue with no display in a terminal window, I am still looking for a suitable character to use though. I will keep looking."},{"owner":{"account_id":418148,"reputation":4085,"user_id":794539,"display_name":"blubberdiblub"},"score":0,"creation_date":1484912260,"post_id":41747822,"comment_id":70716859,"body_markdown":"Maybe there is none that perfectly fits the task. Sometimes, actually drawing it with graphics primitives is the right thing to do. Failing that, you could also go into the opposite direction and opt for a good-enough approximation with US-ASCII-only characters. (like _ | &quot; or something)","body":"Maybe there is none that perfectly fits the task. Sometimes, actually drawing it with graphics primitives is the right thing to do. Failing that, you could also go into the opposite direction and opt for a good-enough approximation with US-ASCII-only characters. (like _ | &quot; or something)"},{"owner":{"account_id":418148,"reputation":4085,"user_id":794539,"display_name":"blubberdiblub"},"score":0,"creation_date":1484913459,"post_id":41747822,"comment_id":70717601,"body_markdown":"Maybe a [Jupyter](http://jupyter.org/) Notebook with the [tikzmagic extension](https://github.com/robjstan/tikzmagic) for [timing diagrams](http://www.texample.net/tikz/examples/tikz-timing/) could be a drastically different but nice approach. (Disclaimer: I don&#39;t know if those diagrams are possible in tikzmagic.)","body":"Maybe a <a href=\"http://jupyter.org/\" rel=\"nofollow noreferrer\">Jupyter</a> Notebook with the <a href=\"https://github.com/robjstan/tikzmagic\" rel=\"nofollow noreferrer\">tikzmagic extension</a> for <a href=\"http://www.texample.net/tikz/examples/tikz-timing/\" rel=\"nofollow noreferrer\">timing diagrams</a> could be a drastically different but nice approach. (Disclaimer: I don&#39;t know if those diagrams are possible in tikzmagic.)"}],"answers":[{"tags":[],"owner":{"account_id":8866931,"reputation":175,"user_id":6621815,"accept_rate":0,"display_name":"gjwo"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1485334937,"creation_date":1485334937,"answer_id":41847293,"question_id":41747822,"body_markdown":"After much experimentation this works for me\r\n\r\n    public String waveform()\r\n    {\r\n        String s = &quot;&quot;;\r\n        int pulses;\r\n        int pulseWidth;\r\n        // Characters tried for drawing the pulse train\r\n        // Low line - &quot;_&quot;, &quot;\\u0332&quot; Combining Low Line, &quot;\\uFF3F&quot;; FULLWIDTH LOW LINE\r\n        // High line - &quot;\\u0305&quot; COMBINING OVERLINE, &quot;\\u203E&quot; over line \r\n        // Vertical -  &quot;\\u20D2&quot; COMBINING LONG VERTICAL LINE OVERLAY, &quot;\\u007C&quot; Vertical line, &quot;\\u02E9&quot; MODIFIER LETTER EXTRA-LOW TONE BAR\r\n        if (events.get(0).duration &gt; 50000) {return &quot;Excessive duration in pluse 0 &quot;+events.get(0).duration;}\r\n        pulseWidth = 100; //gives a reasonable pulse train\r\n        for (RF433Event e: events)\r\n        {\r\n            pulses = e.duration/pulseWidth;\r\n            if (e.gpioEvent.getEdge() == PinEdge.RISING)\r\n            {\r\n                // rising edge so for the duration it was low\r\n                for (int i = 0; i&lt;pulses; i++) s = s+ &quot;_&quot;;\r\n                s = s+&quot;\\u20D2&quot;;\r\n            } else\r\n            {\r\n                // falling edge so for the duration it was high\r\n                for (int i = 0; i&lt;pulses; i++) s = s+&quot;\\u0305&quot;;\r\n                s = s+&quot;\\u20D2&quot;;\r\n            }\r\n        }\r\n        return s;\r\n    }\r\n\r\nthese are the results\r\n[![Pulse Trains][1]][1]\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/94kyN.jpg","title":"What unicode characters are best for drawing a squarewave in a string","body":"<p>After much experimentation this works for me</p>\n\n<pre><code>public String waveform()\n{\n    String s = \"\";\n    int pulses;\n    int pulseWidth;\n    // Characters tried for drawing the pulse train\n    // Low line - \"_\", \"\\u0332\" Combining Low Line, \"\\uFF3F\"; FULLWIDTH LOW LINE\n    // High line - \"\\u0305\" COMBINING OVERLINE, \"\\u203E\" over line \n    // Vertical -  \"\\u20D2\" COMBINING LONG VERTICAL LINE OVERLAY, \"\\u007C\" Vertical line, \"\\u02E9\" MODIFIER LETTER EXTRA-LOW TONE BAR\n    if (events.get(0).duration &gt; 50000) {return \"Excessive duration in pluse 0 \"+events.get(0).duration;}\n    pulseWidth = 100; //gives a reasonable pulse train\n    for (RF433Event e: events)\n    {\n        pulses = e.duration/pulseWidth;\n        if (e.gpioEvent.getEdge() == PinEdge.RISING)\n        {\n            // rising edge so for the duration it was low\n            for (int i = 0; i&lt;pulses; i++) s = s+ \"_\";\n            s = s+\"\\u20D2\";\n        } else\n        {\n            // falling edge so for the duration it was high\n            for (int i = 0; i&lt;pulses; i++) s = s+\"\\u0305\";\n            s = s+\"\\u20D2\";\n        }\n    }\n    return s;\n}\n</code></pre>\n\n<p>these are the results\n<a href=\"https://i.stack.imgur.com/94kyN.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/94kyN.jpg\" alt=\"Pulse Trains\"></a></p>\n"},{"tags":[],"owner":{"account_id":5164137,"reputation":21,"user_id":4134779,"display_name":"Clif Kussmaul"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1651578342,"creation_date":1651578342,"answer_id":72098886,"question_id":41747822,"body_markdown":"I like the idea of using &quot;combining characters&quot;, \r\nbut find them harder to edit.\r\nHere are other unicode options I&#39;ve used or tried.\r\n\r\n1. box drawings (light or heavy), which (as noted) need 2 rows:\r\n\r\n```\r\n1         \r\n0           \r\n```\r\n\r\n2. &quot;lower one eighth block&quot; (2581) with &quot;lower three quarters block&quot; (2586) or &quot;full block&quot; (2588). (Depending on font and line spacing, &quot;full block&quot; can reach the previous line.)\r\n\r\n```\r\n\r\n\r\n```\r\n\r\n3. &quot;solidus&quot; (slash), &quot;reverses solidus&quot; (backslash), &quot;horizontal scan line 1&quot; (23BA), and &quot;horizontal scan line 9&quot; (23BD) - for non-vertical transitions.\r\n\r\n```\r\n\\/\\\r\n```\r\n","title":"What unicode characters are best for drawing a squarewave in a string","body":"<p>I like the idea of using &quot;combining characters&quot;,\nbut find them harder to edit.\nHere are other unicode options I've used or tried.</p>\n<ol>\n<li>box drawings (light or heavy), which (as noted) need 2 rows:</li>\n</ol>\n<pre><code>1         \n0           \n</code></pre>\n<ol start=\"2\">\n<li>&quot;lower one eighth block&quot; (2581) with &quot;lower three quarters block&quot; (2586) or &quot;full block&quot; (2588). (Depending on font and line spacing, &quot;full block&quot; can reach the previous line.)</li>\n</ol>\n<pre><code>\n\n</code></pre>\n<ol start=\"3\">\n<li>&quot;solidus&quot; (slash), &quot;reverses solidus&quot; (backslash), &quot;horizontal scan line 1&quot; (23BA), and &quot;horizontal scan line 9&quot; (23BD) - for non-vertical transitions.</li>\n</ol>\n<pre><code>\\/\\\n</code></pre>\n"}],"owner":{"account_id":8866931,"reputation":175,"user_id":6621815,"accept_rate":0,"display_name":"gjwo"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2159,"favorite_count":0,"down_vote_count":2,"up_vote_count":7,"answer_count":2,"score":5,"last_activity_date":1651578342,"creation_date":1484846129,"question_id":41747822,"body_markdown":"I am trying to represent a square wave pulse train in a string, from an array of stored GPIO events and timings. the code is working but I need better Unicode characters for the transitions.\r\n\r\nthis is my current method\r\n\r\n        public String waveform()\r\n        {\r\n        String s = &quot;&quot;;\r\n        int pulses;\r\n        int pulseWidth;\r\n\r\n        pulseWidth = events.get(1).duration; //mostly right!\r\n        for (RF433Event e: events)\r\n        {\r\n            pulses = e.duration/pulseWidth;\r\n            if (e.gpioEvent.getEdge() == PinEdge.RISING)\r\n            {\r\n                // rising edge so for the duration it was low\r\n                for (int i = 0; i&lt;pulses; i++) s = s+&#39;_&#39;;\r\n                s = s+&quot;\\u02E9&quot;;\r\n            } else\r\n            {\r\n                // falling edge so for the duration it was high\r\n                for (int i = 0; i&lt;pulses; i++) s = s+&quot;\\u0305&quot;;\r\n                s = s+&quot;\\u02E5&quot;;\r\n            }\r\n\r\n        }\r\n        return s;\r\n        }\r\n\r\n\r\nThe output looks like this in the Intellij console window\r\n[![enter image description here][1]][1]\r\n\r\nbut strangely is not appearing on the RPi, do I need to install something else on the Pi? \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/wF4fQ.jpg","title":"What unicode characters are best for drawing a squarewave in a string","body":"<p>I am trying to represent a square wave pulse train in a string, from an array of stored GPIO events and timings. the code is working but I need better Unicode characters for the transitions.</p>\n\n<p>this is my current method</p>\n\n<pre><code>    public String waveform()\n    {\n    String s = \"\";\n    int pulses;\n    int pulseWidth;\n\n    pulseWidth = events.get(1).duration; //mostly right!\n    for (RF433Event e: events)\n    {\n        pulses = e.duration/pulseWidth;\n        if (e.gpioEvent.getEdge() == PinEdge.RISING)\n        {\n            // rising edge so for the duration it was low\n            for (int i = 0; i&lt;pulses; i++) s = s+'_';\n            s = s+\"\\u02E9\";\n        } else\n        {\n            // falling edge so for the duration it was high\n            for (int i = 0; i&lt;pulses; i++) s = s+\"\\u0305\";\n            s = s+\"\\u02E5\";\n        }\n\n    }\n    return s;\n    }\n</code></pre>\n\n<p>The output looks like this in the Intellij console window\n<a href=\"https://i.stack.imgur.com/wF4fQ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wF4fQ.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>but strangely is not appearing on the RPi, do I need to install something else on the Pi? </p>\n"},{"tags":["java","hibernate","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":12261633,"reputation":13,"user_id":8949859,"display_name":"Edvestemhem"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1651578312,"creation_date":1651578312,"answer_id":72098878,"question_id":72098711,"body_markdown":"What I have missed here was I think polymorphism. When I tried to get Class of results like\r\n\r\n      List&lt;BillingDetails&gt; details=billingDetailsRepository.findAll();\r\n      details.forEach(x-&gt; System.out.println(x.getClass()));\r\nI got the following output :\r\n\r\n    class com.rumlor.domainmodelmapping.models.inheritancemodels.CreditCard\r\nso somehow I missed somewhere even if results are cast to List Of BillingDetails ,Hibernate polymorphed every sub instance to base entity for me.\r\nadditional check :\r\n\r\n      CreditCard card= (CreditCard) details.get(0);\r\n      System.out.println(card);\r\nresult :\r\n\r\n    CreditCard(super=BillingDetails(Id=1, owner=Mehmet Dogan), cardNumber=6145 1233 4577 2360, expDate=2022-05-03, cardKey=673)\r\n","title":"How is it possible that querying base entity in joined inheritance strategy also fetches sub entities?","body":"<p>What I have missed here was I think polymorphism. When I tried to get Class of results like</p>\n<pre><code>  List&lt;BillingDetails&gt; details=billingDetailsRepository.findAll();\n  details.forEach(x-&gt; System.out.println(x.getClass()));\n</code></pre>\n<p>I got the following output :</p>\n<pre><code>class com.rumlor.domainmodelmapping.models.inheritancemodels.CreditCard\n</code></pre>\n<p>so somehow I missed somewhere even if results are cast to List Of BillingDetails ,Hibernate polymorphed every sub instance to base entity for me.\nadditional check :</p>\n<pre><code>  CreditCard card= (CreditCard) details.get(0);\n  System.out.println(card);\n</code></pre>\n<p>result :</p>\n<pre><code>CreditCard(super=BillingDetails(Id=1, owner=Mehmet Dogan), cardNumber=6145 1233 4577 2360, expDate=2022-05-03, cardKey=673)\n</code></pre>\n"}],"owner":{"account_id":12261633,"reputation":13,"user_id":8949859,"display_name":"Edvestemhem"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72098878,"answer_count":1,"score":0,"last_activity_date":1651578312,"creation_date":1651577260,"question_id":72098711,"body_markdown":"I have an abstract base class:\r\n\r\n    @Inheritance(strategy = InheritanceType.JOINED)\r\n    @Getter\r\n    @Setter\r\n    @Entity\r\n    @ToString\r\n    public abstract class BillingDetails {\r\n     @javax.persistence.Id\r\n     @GeneratedValue(strategy = GenerationType.SEQUENCE,\r\n            generator = &quot;pk_for_inheritance&quot;)\r\n    Long Id;\r\n    @NotNull\r\n    private String owner;\r\n    }\r\nand one subclass extending base class \r\n\r\n    @Entity\r\n    @Getter\r\n    @Setter\r\n    @ToString(callSuper = true)\r\n    public class CreditCard extends BillingDetails{\r\n\r\n     @Basic(optional = false)\r\n     private String cardNumber;\r\n     @Basic(optional = false)\r\n     private LocalDate expDate;\r\n     @Basic(optional = false)\r\n     private String cardKey;\r\n     } \r\nwhen I query against base Entity BillingDetails and print results like so:\r\n\r\n     List&lt;BillingDetails&gt; details=billingDetailsRepository.findAll();\r\n     details.forEach(System.out::println);\r\nI get the following output:\r\n\r\n    CreditCard(super=BillingDetails(Id=1, owner=Mehmet Dogan), cardNumber=6145 1233 4577 2360, expDate=2022-05-03, cardKey=673)\r\nMy question is:\r\nAlthough I understand in joined strategy hibernates joins related base and sub tables ,How is it possible that I can print properties of subclass CreditCard when my result list is of type BillingDetails and only Id and Owner properties are declared in my base class ?","title":"How is it possible that querying base entity in joined inheritance strategy also fetches sub entities?","body":"<p>I have an abstract base class:</p>\n<pre><code>@Inheritance(strategy = InheritanceType.JOINED)\n@Getter\n@Setter\n@Entity\n@ToString\npublic abstract class BillingDetails {\n @javax.persistence.Id\n @GeneratedValue(strategy = GenerationType.SEQUENCE,\n        generator = &quot;pk_for_inheritance&quot;)\nLong Id;\n@NotNull\nprivate String owner;\n}\n</code></pre>\n<p>and one subclass extending base class</p>\n<pre><code>@Entity\n@Getter\n@Setter\n@ToString(callSuper = true)\npublic class CreditCard extends BillingDetails{\n\n @Basic(optional = false)\n private String cardNumber;\n @Basic(optional = false)\n private LocalDate expDate;\n @Basic(optional = false)\n private String cardKey;\n } \n</code></pre>\n<p>when I query against base Entity BillingDetails and print results like so:</p>\n<pre><code> List&lt;BillingDetails&gt; details=billingDetailsRepository.findAll();\n details.forEach(System.out::println);\n</code></pre>\n<p>I get the following output:</p>\n<pre><code>CreditCard(super=BillingDetails(Id=1, owner=Mehmet Dogan), cardNumber=6145 1233 4577 2360, expDate=2022-05-03, cardKey=673)\n</code></pre>\n<p>My question is:\nAlthough I understand in joined strategy hibernates joins related base and sub tables ,How is it possible that I can print properties of subclass CreditCard when my result list is of type BillingDetails and only Id and Owner properties are declared in my base class ?</p>\n"},{"tags":["java","json","spring","rest"],"answers":[{"tags":[],"owner":{"account_id":22915385,"reputation":106,"user_id":17052051,"display_name":"Ranjit C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651573536,"creation_date":1651573536,"answer_id":72098059,"question_id":72094877,"body_markdown":"Use a class to encapsulate the response.\r\n```\r\nclass ArticleResponse{\r\n  List&lt;ArticleDto&gt; articles;\r\n  Pagination pagination;\r\n}\r\n```\r\nPopulate these values and then send the object back.\r\n","title":"Spring Boot - Returning JSON with map of list of object and another object","body":"<p>Use a class to encapsulate the response.</p>\n<pre><code>class ArticleResponse{\n  List&lt;ArticleDto&gt; articles;\n  Pagination pagination;\n}\n</code></pre>\n<p>Populate these values and then send the object back.</p>\n"},{"tags":[],"owner":{"account_id":14320275,"reputation":1315,"user_id":10343888,"display_name":"fatih"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651577983,"creation_date":1651577983,"answer_id":72098827,"question_id":72094877,"body_markdown":"`Spring Data JPA` already provides an interface for `Pagination`. \r\n\r\nYou can read the [documentation](https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.special-parameters) or review the [javadocs](https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/domain/Pageable.html).","title":"Spring Boot - Returning JSON with map of list of object and another object","body":"<p><code>Spring Data JPA</code> already provides an interface for <code>Pagination</code>.</p>\n<p>You can read the <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.special-parameters\" rel=\"nofollow noreferrer\">documentation</a> or review the <a href=\"https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/domain/Pageable.html\" rel=\"nofollow noreferrer\">javadocs</a>.</p>\n"}],"owner":{"account_id":25179325,"reputation":1,"user_id":19021017,"display_name":"Seungjae Lee"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1388,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1651577983,"creation_date":1651553114,"question_id":72094877,"body_markdown":"I made a RestController for bulletin board application. Firstly, I made a simple version without pagination logic as follows.\r\n\r\nRequest URL is:\r\n```\r\n    http://localhost:8005/article =&gt; show article list(List&lt;ArticleDto&gt;)\r\n```\r\nI can make json response like this\r\n```\r\n    public ResponseEntity&lt;List&lt;ArticleDto&gt;&gt; articleList(){\r\n\t\tList&lt;ArticleDto&gt; list = articleService.list();\r\n\t\treturn new ResponseEntity&lt;List&lt;ArticleDto&gt;&gt;(list, HttpStatus.OK);\r\n\t}\r\n```\r\n\r\nand I got this json.\r\n```\r\n[{&quot;articleId&quot;:1, &quot;title&quot;: &quot;...&quot;, &quot;content&quot;: &quot;...&quot;},\r\n{&quot;articleId&quot;:1, &quot;title&quot;: &quot;...&quot;, &quot;content&quot;: &quot;...&quot;},\r\n{&quot;articleId&quot;:1, &quot;title&quot;: &quot;...&quot;, &quot;content&quot;: &quot;...&quot;}, ...]\r\n```\r\nIt is a really long list, so, I want to make a more complex version with pagenation info. But, I don&#39;t know how to make a json response with both article list and pagenation info because my response type is `ResponseEntity&lt;List&lt;ArticleDto&gt;&gt;`.\r\n\r\nRequest URL is:\r\n```\r\n    http://localhost:8005/article?currentPage=1 =&gt; show 10 articles of first page(List&lt;ArticleDto&gt;) with pagenation(Pagination object).\r\n```\r\n\r\n\r\n```\r\npublic ?? articleList(@RequestParam(value=&quot;currentPage&quot;, required=false) String currentPage) throws Exception {\r\n\r\n\t\tint itemsPerPage = 10;\r\n\t\tint pagesPerGroup = 10;\r\n\t\tif (currentPage == null || currentPage == &quot;&quot;) currentPage = &quot;1&quot;;\r\n\r\n\t\tMap&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();\r\n\t\tmap.put(&quot;currentPage&quot;, currentPage);\r\n\r\n\t\tint totalItemCount = articleService.totalItemCount(map);\r\n\t\tPagination pagination = new Pagination(totalItemCount, itemsPerPage, pagesPerGroup, Integer.parseInt(currentPage));\r\n\r\n\t\tmap.put(&quot;offset&quot;, &quot;&quot;+pagination.getOffset());\r\n\t\tmap.put(&quot;limit&quot;, &quot;&quot;+pagination.getLimit());\r\n\t\t\r\n\t\tList&lt;ArticleDto&gt; list = articleService.list(map);\r\n\t\t\r\n\t\t\r\n\t\treturn new ?? ( ?? , HttpStatus.OK);\r\n\t}\r\n```\r\n\r\nI want to get a json return like this:\r\n```\r\n{\r\n  &quot;articles&quot;: [{&quot;articleId&quot;: 1, &quot;title&quot;: &quot;...&quot;, &quot;content&quot;: &quot;...&quot;} ...],\r\n  &quot;pagination&quot;: {\r\n    &quot;currentPage&quot;: 1,\r\n    &quot;totalItemCount&quot;: 121,\r\n    &quot;itemsPerPage: 10,\r\n    &quot;lastPage&quot;: 13,\r\n    ...\r\n  }\r\n}\r\n```\r\n\r\nI can do it very easily when I use express or laravel, but it is really hard in Java. I am new to Java, please help me.","title":"Spring Boot - Returning JSON with map of list of object and another object","body":"<p>I made a RestController for bulletin board application. Firstly, I made a simple version without pagination logic as follows.</p>\n<p>Request URL is:</p>\n<pre><code>    http://localhost:8005/article =&gt; show article list(List&lt;ArticleDto&gt;)\n</code></pre>\n<p>I can make json response like this</p>\n<pre><code>    public ResponseEntity&lt;List&lt;ArticleDto&gt;&gt; articleList(){\n        List&lt;ArticleDto&gt; list = articleService.list();\n        return new ResponseEntity&lt;List&lt;ArticleDto&gt;&gt;(list, HttpStatus.OK);\n    }\n</code></pre>\n<p>and I got this json.</p>\n<pre><code>[{&quot;articleId&quot;:1, &quot;title&quot;: &quot;...&quot;, &quot;content&quot;: &quot;...&quot;},\n{&quot;articleId&quot;:1, &quot;title&quot;: &quot;...&quot;, &quot;content&quot;: &quot;...&quot;},\n{&quot;articleId&quot;:1, &quot;title&quot;: &quot;...&quot;, &quot;content&quot;: &quot;...&quot;}, ...]\n</code></pre>\n<p>It is a really long list, so, I want to make a more complex version with pagenation info. But, I don't know how to make a json response with both article list and pagenation info because my response type is <code>ResponseEntity&lt;List&lt;ArticleDto&gt;&gt;</code>.</p>\n<p>Request URL is:</p>\n<pre><code>    http://localhost:8005/article?currentPage=1 =&gt; show 10 articles of first page(List&lt;ArticleDto&gt;) with pagenation(Pagination object).\n</code></pre>\n<pre><code>public ?? articleList(@RequestParam(value=&quot;currentPage&quot;, required=false) String currentPage) throws Exception {\n\n        int itemsPerPage = 10;\n        int pagesPerGroup = 10;\n        if (currentPage == null || currentPage == &quot;&quot;) currentPage = &quot;1&quot;;\n\n        Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();\n        map.put(&quot;currentPage&quot;, currentPage);\n\n        int totalItemCount = articleService.totalItemCount(map);\n        Pagination pagination = new Pagination(totalItemCount, itemsPerPage, pagesPerGroup, Integer.parseInt(currentPage));\n\n        map.put(&quot;offset&quot;, &quot;&quot;+pagination.getOffset());\n        map.put(&quot;limit&quot;, &quot;&quot;+pagination.getLimit());\n        \n        List&lt;ArticleDto&gt; list = articleService.list(map);\n        \n        \n        return new ?? ( ?? , HttpStatus.OK);\n    }\n</code></pre>\n<p>I want to get a json return like this:</p>\n<pre><code>{\n  &quot;articles&quot;: [{&quot;articleId&quot;: 1, &quot;title&quot;: &quot;...&quot;, &quot;content&quot;: &quot;...&quot;} ...],\n  &quot;pagination&quot;: {\n    &quot;currentPage&quot;: 1,\n    &quot;totalItemCount&quot;: 121,\n    &quot;itemsPerPage: 10,\n    &quot;lastPage&quot;: 13,\n    ...\n  }\n}\n</code></pre>\n<p>I can do it very easily when I use express or laravel, but it is really hard in Java. I am new to Java, please help me.</p>\n"},{"tags":["java","gradle","sonarqube","multi-module"],"answers":[{"tags":[],"owner":{"account_id":4730991,"reputation":651,"user_id":3826641,"display_name":"karikevinod"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1651577962,"creation_date":1590595995,"answer_id":62047783,"question_id":62015834,"body_markdown":"Need to include sonarqube outside the subproject block and then all the sub modules will be analysed and report will be exported.\r\n\r\n```groovy\r\nbuildscript {\r\n    repositories {\r\n        mavenCentral()\r\n    }\r\n    dependencies {\r\n        classpath &#39;org.jetbrains.kotlin:kotlin-gradle-plugin:1.3.61&#39;\r\n        classpath &#39;io.spring.gradle:dependency-management-plugin:1.0.9.RELEASE&#39;\r\n        classpath &#39;org.springframework.boot:spring-boot-gradle-plugin:2.2.4.RELEASE&#39;\r\n        classpath &quot;org.sonarsource.scanner.gradle:sonarqube-gradle-plugin:2.7&quot;\r\n    }\r\n}\r\n\r\next {\r\n    springCloudVersion = &#39;Hoxton.SR1&#39;\r\n    springBootVersion = &#39;2.2.4.RELEASE&#39;\r\n}\r\n\r\nconfigurations.all {\r\n    resolutionStrategy.cacheChangingModulesFor 0, &#39;seconds&#39;\r\n}\r\n\r\nallprojects {\r\n    group = &#39;com.organiz&#39;\r\n    version = &#39;1.0.0-SNAPSHOT&#39;\r\n\r\n    repositories {\r\n        mavenCentral()\r\n        maven {\r\n            //        url =&quot;s3url&quot;  //   only for releases\r\n            url = &quot;s3url&quot;  //  only for snapshots\r\n            credentials(AwsCredentials) {\r\n                accessKey project.accessKey\r\n                secretKey project.secretKey\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\napply plugin: &#39;org.sonarqube&#39;\r\nsonarqube {\r\n    properties {\r\n        property &quot;sonar.projectKey&quot;, &quot;projectKey&quot;\r\n        property &quot;sonar.organization&quot;, &quot;org&quot;\r\n        property &quot;sonar.host.url&quot;, &quot;https://sonarcloud.io&quot;\r\n        property &quot;sonar.verbose&quot;, &quot;true&quot;\r\n    }\r\n}\r\n\r\nsubprojects {\r\n\r\n    apply plugin: &#39;java&#39;\r\n    apply plugin: &#39;kotlin&#39;\r\n    apply plugin: &#39;org.springframework.boot&#39;\r\n    apply plugin: &#39;idea&#39;\r\n    sourceCompatibility = &#39;1.8&#39;\r\n\r\n    dependencies {\r\n        implementation &#39;org.springframework.boot:spring-boot-starter&#39;\r\n        testImplementation(&#39;org.springframework.boot:spring-boot-starter-test&#39;) {\r\n            exclude group: &#39;org.junit.vintage&#39;, module: &#39;junit-vintage-engine&#39;\r\n        }\r\n        implementation &#39;org.jetbrains.kotlin:kotlin-stdlib-jdk8&#39;\r\n        implementation(&#39;someappcommon:1.0.0-SNAPSHOT&#39;) { changing = true }\r\n        implementation(&quot;com.h2database:h2:1.4.200&quot;)\r\n    }\r\n\r\n    repositories {\r\n        mavenCentral()\r\n        jcenter()\r\n        maven {\r\n            url &quot;someurlhere&quot;\r\n        }\r\n        someappMavenRepoUrl.split(&#39;,&#39;).each { repoUrl -&gt; maven { url repoUrl } }\r\n    }\r\n\r\n    test {\r\n        useJUnitPlatform()\r\n    }\r\n\r\n    compileKotlin {\r\n        kotlinOptions {\r\n            jvmTarget = &quot;1.8&quot;\r\n        }\r\n    }\r\n    compileTestKotlin {\r\n        kotlinOptions {\r\n            jvmTarget = &quot;1.8&quot;\r\n        }\r\n    }\r\n}\r\n\r\nproject(&#39;:project1&#39;) {\r\n    dependencies {\r\n        implementation project(&quot;:common&quot;)\r\n    }\r\n}\r\n\r\nproject(&#39;:project2&#39;) {\r\n    dependencies {\r\n        implementation project(&quot;:common&quot;)\r\n    }\r\n}\r\n```","title":"Sonar with multi-module gradle project","body":"<p>Need to include sonarqube outside the subproject block and then all the sub modules will be analysed and report will be exported.</p>\n<pre><code>buildscript {\n    repositories {\n        mavenCentral()\n    }\n    dependencies {\n        classpath 'org.jetbrains.kotlin:kotlin-gradle-plugin:1.3.61'\n        classpath 'io.spring.gradle:dependency-management-plugin:1.0.9.RELEASE'\n        classpath 'org.springframework.boot:spring-boot-gradle-plugin:2.2.4.RELEASE'\n        classpath &quot;org.sonarsource.scanner.gradle:sonarqube-gradle-plugin:2.7&quot;\n    }\n}\n\next {\n    springCloudVersion = 'Hoxton.SR1'\n    springBootVersion = '2.2.4.RELEASE'\n}\n\nconfigurations.all {\n    resolutionStrategy.cacheChangingModulesFor 0, 'seconds'\n}\n\nallprojects {\n    group = 'com.organiz'\n    version = '1.0.0-SNAPSHOT'\n\n    repositories {\n        mavenCentral()\n        maven {\n            //        url =&quot;s3url&quot;  //   only for releases\n            url = &quot;s3url&quot;  //  only for snapshots\n            credentials(AwsCredentials) {\n                accessKey project.accessKey\n                secretKey project.secretKey\n            }\n        }\n    }\n}\n\napply plugin: 'org.sonarqube'\nsonarqube {\n    properties {\n        property &quot;sonar.projectKey&quot;, &quot;projectKey&quot;\n        property &quot;sonar.organization&quot;, &quot;org&quot;\n        property &quot;sonar.host.url&quot;, &quot;https://sonarcloud.io&quot;\n        property &quot;sonar.verbose&quot;, &quot;true&quot;\n    }\n}\n\nsubprojects {\n\n    apply plugin: 'java'\n    apply plugin: 'kotlin'\n    apply plugin: 'org.springframework.boot'\n    apply plugin: 'idea'\n    sourceCompatibility = '1.8'\n\n    dependencies {\n        implementation 'org.springframework.boot:spring-boot-starter'\n        testImplementation('org.springframework.boot:spring-boot-starter-test') {\n            exclude group: 'org.junit.vintage', module: 'junit-vintage-engine'\n        }\n        implementation 'org.jetbrains.kotlin:kotlin-stdlib-jdk8'\n        implementation('someappcommon:1.0.0-SNAPSHOT') { changing = true }\n        implementation(&quot;com.h2database:h2:1.4.200&quot;)\n    }\n\n    repositories {\n        mavenCentral()\n        jcenter()\n        maven {\n            url &quot;someurlhere&quot;\n        }\n        someappMavenRepoUrl.split(',').each { repoUrl -&gt; maven { url repoUrl } }\n    }\n\n    test {\n        useJUnitPlatform()\n    }\n\n    compileKotlin {\n        kotlinOptions {\n            jvmTarget = &quot;1.8&quot;\n        }\n    }\n    compileTestKotlin {\n        kotlinOptions {\n            jvmTarget = &quot;1.8&quot;\n        }\n    }\n}\n\nproject(':project1') {\n    dependencies {\n        implementation project(&quot;:common&quot;)\n    }\n}\n\nproject(':project2') {\n    dependencies {\n        implementation project(&quot;:common&quot;)\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13632899,"reputation":2116,"user_id":9834603,"display_name":"Dmitry Kaltovich"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1622633962,"creation_date":1622633962,"answer_id":67804393,"question_id":62015834,"body_markdown":"My solution for kotlin multi-module project with `junit 5` &amp; `spring boot`, using [gradle-jacoco-log](https://gitlab.com/barfuin/gradle-jacoco-log#gradle-jacoco-log) plugin:\r\n\r\n1.&#127995; In your root `build.gradle.kts`:\r\n\r\n```kotlin\r\nplugins {\r\n    kotlin(&quot;jvm&quot;) version &quot;1.5.0&quot;\r\n    id(&quot;org.sonarqube&quot;) version &quot;3.2.0&quot;\r\n    id (&quot;org.barfuin.gradle.jacocolog&quot;) version &quot;1.2.4&quot;\r\n}\r\n\r\n\r\nsonarqube {\r\n    val sonarOrganization: String by project\r\n    val sonarProjectKey: String by project\r\n    val sonarLogin: String by project\r\n\r\n    properties {\r\n        properties(\r\n            hashMapOf&lt;String, String&gt;(\r\n                &quot;sonar.login&quot; to sonarLogin,\r\n                &quot;sonar.projectKey&quot; to sonarProjectKey,\r\n                &quot;sonar.organization&quot; to sonarOrganization,\r\n                &quot;sonar.host.url&quot; to &quot;https://sonarcloud.io&quot;,\r\n                &quot;sonar.coverage.jacoco.xmlReportPaths&quot; to &quot;${buildDir}/reports/jacoco/jacocoAggregatedReport/jacocoAggregatedReport.xml&quot;\r\n            )\r\n        )\r\n    }\r\n}\r\n```\r\n\r\n2.&#128073;&#127995; In backend suprojects which have tests:\r\n```kotlin\r\nplugins{\r\n    jacoco\r\n}\r\n\r\njacoco { toolVersion = &quot;0.8.7&quot; }\r\n\r\ntasks{\r\n    test { useJUnitPlatform()\r\n    jacocoTestReport { reports { xml.required.set( true ) } }\r\n    finalizedBy(jacocoTestReport) \r\n    }\r\n}\r\n\r\n```\r\n___\r\n&gt; Optional step (example how to use)\r\n\r\n3.&#128076;&#127995; In your CI file (`.github/workflows/master.yml` in my case):\r\n\r\n```yaml\r\nname: Master CI\r\non:\r\n  push:\r\n    branches:\r\n      - master\r\n\r\n\r\njobs:\r\n  DEPLOY:\r\n    runs-on: ubuntu-latest\r\n    steps:\r\n      - uses: actions/checkout@v2\r\n\r\n      - name: &#129692; Set up JDK 16\r\n        uses: actions/setup-java@v1\r\n        with:\r\n          java-version: 16\r\n\r\n      - name: &#128294; Test\r\n        run: |\r\n          chmod +x ./gradlew\r\n          ./gradlew test\r\n\r\n      # Create `build/jacoco/jacocoMergeSubprojects.exec` \r\n      - name:  1) Jacoco merge subprojects reports\r\n        run: ./gradlew jacocoMergeSubprojects -x test\r\n\r\n      # Create `build/reports/jacoco/jacocoAggregatedReport/jacocoAggregatedReport.xml`\r\n      - name:  2) Jacoco Jacoco aggregated report\r\n        run: ./gradlew jacocoAggregatedReport -x test\r\n\r\n      - name:  3) Sonarqube report\r\n        run: ./gradlew sonarqube -x test\r\n        env:\r\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\r\n```\r\n","title":"Sonar with multi-module gradle project","body":"<p>My solution for kotlin multi-module project with <code>junit 5</code> &amp; <code>spring boot</code>, using <a href=\"https://gitlab.com/barfuin/gradle-jacoco-log#gradle-jacoco-log\" rel=\"nofollow noreferrer\">gradle-jacoco-log</a> plugin:</p>\n<p>1. In your root <code>build.gradle.kts</code>:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>plugins {\n    kotlin(&quot;jvm&quot;) version &quot;1.5.0&quot;\n    id(&quot;org.sonarqube&quot;) version &quot;3.2.0&quot;\n    id (&quot;org.barfuin.gradle.jacocolog&quot;) version &quot;1.2.4&quot;\n}\n\n\nsonarqube {\n    val sonarOrganization: String by project\n    val sonarProjectKey: String by project\n    val sonarLogin: String by project\n\n    properties {\n        properties(\n            hashMapOf&lt;String, String&gt;(\n                &quot;sonar.login&quot; to sonarLogin,\n                &quot;sonar.projectKey&quot; to sonarProjectKey,\n                &quot;sonar.organization&quot; to sonarOrganization,\n                &quot;sonar.host.url&quot; to &quot;https://sonarcloud.io&quot;,\n                &quot;sonar.coverage.jacoco.xmlReportPaths&quot; to &quot;${buildDir}/reports/jacoco/jacocoAggregatedReport/jacocoAggregatedReport.xml&quot;\n            )\n        )\n    }\n}\n</code></pre>\n<p>2. In backend suprojects which have tests:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>plugins{\n    jacoco\n}\n\njacoco { toolVersion = &quot;0.8.7&quot; }\n\ntasks{\n    test { useJUnitPlatform()\n    jacocoTestReport { reports { xml.required.set( true ) } }\n    finalizedBy(jacocoTestReport) \n    }\n}\n\n</code></pre>\n<hr />\n<blockquote>\n<p>Optional step (example how to use)</p>\n</blockquote>\n<p>3. In your CI file (<code>.github/workflows/master.yml</code> in my case):</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>name: Master CI\non:\n  push:\n    branches:\n      - master\n\n\njobs:\n  DEPLOY:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v2\n\n      - name:  Set up JDK 16\n        uses: actions/setup-java@v1\n        with:\n          java-version: 16\n\n      - name:  Test\n        run: |\n          chmod +x ./gradlew\n          ./gradlew test\n\n      # Create `build/jacoco/jacocoMergeSubprojects.exec` \n      - name:  1) Jacoco merge subprojects reports\n        run: ./gradlew jacocoMergeSubprojects -x test\n\n      # Create `build/reports/jacoco/jacocoAggregatedReport/jacocoAggregatedReport.xml`\n      - name:  2) Jacoco Jacoco aggregated report\n        run: ./gradlew jacocoAggregatedReport -x test\n\n      - name:  3) Sonarqube report\n        run: ./gradlew sonarqube -x test\n        env:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n</code></pre>\n"}],"owner":{"account_id":4730991,"reputation":651,"user_id":3826641,"display_name":"karikevinod"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7048,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":62047783,"answer_count":2,"score":8,"last_activity_date":1651577962,"creation_date":1590474009,"question_id":62015834,"body_markdown":"I have java and kotlin based multi module gradle project. I am trying to setup sonar analysis for the same. I configured sonar at root project and ran analysis with CircleCI. The result in sonarcloud gets for only one of the sub-project.\r\n\r\nMy project structure is as below:\r\n\r\n - projectA/build.gradle\r\n - ProjectB/build.gradle\r\n - ProjectC/build.gradle\r\n - build.gradle\r\n\r\nHere is my root build.gradle.\r\n\r\n    buildscript {\r\n        repositories {\r\n            mavenCentral()\r\n        }\r\n        dependencies {\r\n            classpath &#39;org.jetbrains.kotlin:kotlin-gradle-plugin:1.3.61&#39;\r\n            classpath &#39;io.spring.gradle:dependency-management-plugin:1.0.9.RELEASE&#39;\r\n            classpath &#39;org.springframework.boot:spring-boot-gradle-plugin:2.2.4.RELEASE&#39;\r\n            classpath &quot;org.sonarsource.scanner.gradle:sonarqube-gradle-plugin:2.7&quot;\r\n        }\r\n    }\r\n    \r\n    ext {\r\n        springCloudVersion = &#39;Hoxton.SR1&#39;\r\n        springBootVersion = &#39;2.2.4.RELEASE&#39;\r\n    }\r\n    \r\n    configurations.all {\r\n        resolutionStrategy.cacheChangingModulesFor 0, &#39;seconds&#39;\r\n    }\r\n    \r\n    allprojects {\r\n        group = &#39;com.organiz&#39;\r\n        version = &#39;1.0.0-SNAPSHOT&#39;\r\n    \r\n        repositories {\r\n            mavenCentral()\r\n            maven {\r\n                //        url =&quot;s3url&quot;  //   only for releases\r\n                url =&quot;s3url&quot;  //  only for snapshots\r\n                credentials(AwsCredentials) {\r\n                    accessKey project.accessKey\r\n                    secretKey project.secretKey\r\n                }\r\n            }\r\n        }\r\n    }\r\n    \r\n    subprojects {\r\n    \r\n        apply plugin: &#39;java&#39;\r\n        apply plugin: &#39;kotlin&#39;\r\n        apply plugin: &#39;org.springframework.boot&#39;\r\n        apply plugin: &#39;idea&#39;\r\n        apply plugin: &#39;org.sonarqube&#39;\r\n        sourceCompatibility = &#39;1.8&#39;\r\n    \r\n        dependencies {\r\n            implementation &#39;org.springframework.boot:spring-boot-starter&#39;\r\n            testImplementation(&#39;org.springframework.boot:spring-boot-starter-test&#39;) {\r\n                exclude group: &#39;org.junit.vintage&#39;, module: &#39;junit-vintage-engine&#39;\r\n            }\r\n            implementation &#39;org.jetbrains.kotlin:kotlin-stdlib-jdk8&#39;\r\n            implementation(&#39;someappcommon:1.0.0-SNAPSHOT&#39;) { changing = true }\r\n            implementation(&quot;com.h2database:h2:1.4.200&quot;)\r\n        }\r\n    \r\n        repositories {\r\n            mavenCentral()\r\n            jcenter()\r\n            maven {\r\n                url &quot;someurlhere&quot;\r\n            }\r\n            someappMavenRepoUrl.split(&#39;,&#39;).each { repoUrl -&gt; maven { url repoUrl } }\r\n        }\r\n    \r\n        test {\r\n            useJUnitPlatform()\r\n        }\r\n    \r\n        compileKotlin {\r\n            kotlinOptions {\r\n                jvmTarget = &quot;1.8&quot;\r\n            }\r\n        }\r\n        compileTestKotlin {\r\n            kotlinOptions {\r\n                jvmTarget = &quot;1.8&quot;\r\n            }\r\n        }\r\n        sonarqube {\r\n             properties {\r\n        property &quot;sonar.projectKey&quot;, &quot;projectKey&quot;\r\n        property &quot;sonar.organization&quot;, &quot;org&quot;\r\n        property &quot;sonar.host.url&quot;, &quot;https://sonarcloud.io&quot;\r\n        property &quot;sonar.verbose&quot;, &quot;true&quot;\r\n      }\r\n    }\r\n    }\r\n    \r\n    project(&#39;:project1&#39;) {\r\n        dependencies {\r\n            implementation project(&quot;:common&quot;)\r\n        }\r\n    }\r\n    \r\n    project(&#39;:project2&#39;) {\r\n        dependencies {\r\n            implementation project(&quot;:common&quot;)\r\n        }\r\n    }","title":"Sonar with multi-module gradle project","body":"<p>I have java and kotlin based multi module gradle project. I am trying to setup sonar analysis for the same. I configured sonar at root project and ran analysis with CircleCI. The result in sonarcloud gets for only one of the sub-project.</p>\n\n<p>My project structure is as below:</p>\n\n<ul>\n<li>projectA/build.gradle</li>\n<li>ProjectB/build.gradle</li>\n<li>ProjectC/build.gradle</li>\n<li>build.gradle</li>\n</ul>\n\n<p>Here is my root build.gradle.</p>\n\n<pre><code>buildscript {\n    repositories {\n        mavenCentral()\n    }\n    dependencies {\n        classpath 'org.jetbrains.kotlin:kotlin-gradle-plugin:1.3.61'\n        classpath 'io.spring.gradle:dependency-management-plugin:1.0.9.RELEASE'\n        classpath 'org.springframework.boot:spring-boot-gradle-plugin:2.2.4.RELEASE'\n        classpath \"org.sonarsource.scanner.gradle:sonarqube-gradle-plugin:2.7\"\n    }\n}\n\next {\n    springCloudVersion = 'Hoxton.SR1'\n    springBootVersion = '2.2.4.RELEASE'\n}\n\nconfigurations.all {\n    resolutionStrategy.cacheChangingModulesFor 0, 'seconds'\n}\n\nallprojects {\n    group = 'com.organiz'\n    version = '1.0.0-SNAPSHOT'\n\n    repositories {\n        mavenCentral()\n        maven {\n            //        url =\"s3url\"  //   only for releases\n            url =\"s3url\"  //  only for snapshots\n            credentials(AwsCredentials) {\n                accessKey project.accessKey\n                secretKey project.secretKey\n            }\n        }\n    }\n}\n\nsubprojects {\n\n    apply plugin: 'java'\n    apply plugin: 'kotlin'\n    apply plugin: 'org.springframework.boot'\n    apply plugin: 'idea'\n    apply plugin: 'org.sonarqube'\n    sourceCompatibility = '1.8'\n\n    dependencies {\n        implementation 'org.springframework.boot:spring-boot-starter'\n        testImplementation('org.springframework.boot:spring-boot-starter-test') {\n            exclude group: 'org.junit.vintage', module: 'junit-vintage-engine'\n        }\n        implementation 'org.jetbrains.kotlin:kotlin-stdlib-jdk8'\n        implementation('someappcommon:1.0.0-SNAPSHOT') { changing = true }\n        implementation(\"com.h2database:h2:1.4.200\")\n    }\n\n    repositories {\n        mavenCentral()\n        jcenter()\n        maven {\n            url \"someurlhere\"\n        }\n        someappMavenRepoUrl.split(',').each { repoUrl -&gt; maven { url repoUrl } }\n    }\n\n    test {\n        useJUnitPlatform()\n    }\n\n    compileKotlin {\n        kotlinOptions {\n            jvmTarget = \"1.8\"\n        }\n    }\n    compileTestKotlin {\n        kotlinOptions {\n            jvmTarget = \"1.8\"\n        }\n    }\n    sonarqube {\n         properties {\n    property \"sonar.projectKey\", \"projectKey\"\n    property \"sonar.organization\", \"org\"\n    property \"sonar.host.url\", \"https://sonarcloud.io\"\n    property \"sonar.verbose\", \"true\"\n  }\n}\n}\n\nproject(':project1') {\n    dependencies {\n        implementation project(\":common\")\n    }\n}\n\nproject(':project2') {\n    dependencies {\n        implementation project(\":common\")\n    }\n}\n</code></pre>\n"},{"tags":["java","java-8","interface","hashmap"],"comments":[{"owner":{"account_id":2364762,"reputation":919,"user_id":2070667,"accept_rate":56,"display_name":"mahesh"},"score":0,"creation_date":1651576510,"post_id":72098560,"comment_id":127391148,"body_markdown":"Could you add current implementation? more code will help more to understand","body":"Could you add current implementation? more code will help more to understand"},{"owner":{"account_id":18108075,"reputation":39,"user_id":13165294,"display_name":"Saif"},"score":0,"creation_date":1651576801,"post_id":72098560,"comment_id":127391238,"body_markdown":"current implementation? I didn&#39;t get it. like it is just an interface inside and interface where i want to initailize this.","body":"current implementation? I didn&#39;t get it. like it is just an interface inside and interface where i want to initailize this."},{"owner":{"account_id":5150443,"reputation":34158,"user_id":4125191,"display_name":"RealSkeptic"},"score":2,"creation_date":1651576864,"post_id":72098560,"comment_id":127391257,"body_markdown":"Have you tried a static initialization block?","body":"Have you tried a static initialization block?"},{"owner":{"account_id":2364762,"reputation":919,"user_id":2070667,"accept_rate":56,"display_name":"mahesh"},"score":0,"creation_date":1651577357,"post_id":72098560,"comment_id":127391420,"body_markdown":"you can use static/default method as per your requirement","body":"you can use static/default method as per your requirement"}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1651577503,"creation_date":1651577503,"answer_id":72098756,"question_id":72098560,"body_markdown":"Any &#39;field&#39; in an interface immediately becomes a `public static final` one, therefore, making a __mutable__ field is an incredibly bad idea - that&#39;s making global state, the thing just about every style guide out there lists as number one on the list of &#39;bad ideas&#39;.\r\n\r\nBut, you&#39;re trying to &#39;initialize it&#39;, so I think your intent is that this map is itself &#39;constant&#39; (it has a bunch of key/value mappings and can no longer be changed).\r\n\r\nYou have a few options.\r\n\r\n## You don&#39;t have many k/v pairs\r\n\r\n```\r\nMap&lt;String, HttpMethod&gt; API_METHOD = Map.of(\r\n  &quot;POST&quot;, HttpMethod.POST,\r\n  &quot;GET&quot;, HttpMethod.GET);\r\n```\r\n\r\n## You have a lot of k/v pairs\r\n\r\nUse the guava (a.k.a. google collections) library.\r\n\r\nThen you can do:\r\n\r\n```java\r\nMap&lt;String, HttpMethod&gt; API_METHOD = ImmutableMap.&lt;String, HttpMethod&gt;builder()\r\n  .put(&quot;POST&quot;, HttpMethod.POST)\r\n  .put(&quot;GET&quot;, HttpMethod.GET)\r\n  .build();\r\n```\r\n\r\n## You have a lot and do not want to use guava\r\n\r\nNow it gets a little mad, especially without java 11. You can write a static method in a _class_ (which can be private if you want), and then call that static method from your interface:\r\n\r\n```\r\npublic interface MyInterface {\r\n  Map&lt;String, HttpMethod&gt; httpMethods = MyInterfaceUtil.makeHttpMethodMap();\r\n}\r\n\r\nclass MyInterfaceUtil {\r\n  static Map&lt;String, HttpMethod&gt; makeHttpMethodMap() {\r\n    Map&lt;String, HttpMethod&gt; map = new HashMap&lt;&gt;();\r\n    map.put(&quot;POST&quot;, HttpMethod.POST);\r\n    return Collections.unmodifiableMap(map);\r\n  }\r\n}\r\n```\r\n\r\nNote:\r\n\r\n* That util class can be in the same file, but you should not make it `public`.\r\n* `Collections.unmodifiableMap` is very important.\r\n","title":"How to initialize maps inside interfaces in java","body":"<p>Any 'field' in an interface immediately becomes a <code>public static final</code> one, therefore, making a <strong>mutable</strong> field is an incredibly bad idea - that's making global state, the thing just about every style guide out there lists as number one on the list of 'bad ideas'.</p>\n<p>But, you're trying to 'initialize it', so I think your intent is that this map is itself 'constant' (it has a bunch of key/value mappings and can no longer be changed).</p>\n<p>You have a few options.</p>\n<h2>You don't have many k/v pairs</h2>\n<pre><code>Map&lt;String, HttpMethod&gt; API_METHOD = Map.of(\n  &quot;POST&quot;, HttpMethod.POST,\n  &quot;GET&quot;, HttpMethod.GET);\n</code></pre>\n<h2>You have a lot of k/v pairs</h2>\n<p>Use the guava (a.k.a. google collections) library.</p>\n<p>Then you can do:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String, HttpMethod&gt; API_METHOD = ImmutableMap.&lt;String, HttpMethod&gt;builder()\n  .put(&quot;POST&quot;, HttpMethod.POST)\n  .put(&quot;GET&quot;, HttpMethod.GET)\n  .build();\n</code></pre>\n<h2>You have a lot and do not want to use guava</h2>\n<p>Now it gets a little mad, especially without java 11. You can write a static method in a <em>class</em> (which can be private if you want), and then call that static method from your interface:</p>\n<pre><code>public interface MyInterface {\n  Map&lt;String, HttpMethod&gt; httpMethods = MyInterfaceUtil.makeHttpMethodMap();\n}\n\nclass MyInterfaceUtil {\n  static Map&lt;String, HttpMethod&gt; makeHttpMethodMap() {\n    Map&lt;String, HttpMethod&gt; map = new HashMap&lt;&gt;();\n    map.put(&quot;POST&quot;, HttpMethod.POST);\n    return Collections.unmodifiableMap(map);\n  }\n}\n</code></pre>\n<p>Note:</p>\n<ul>\n<li>That util class can be in the same file, but you should not make it <code>public</code>.</li>\n<li><code>Collections.unmodifiableMap</code> is very important.</li>\n</ul>\n"}],"owner":{"account_id":18108075,"reputation":39,"user_id":13165294,"display_name":"Saif"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":862,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1651577863,"creation_date":1651576368,"question_id":72098560,"body_markdown":"I want to initialize a hashmap inside an nested interface. I have tried doing smtng like\r\n\r\n    interface constants{\r\n        .........\r\n        .........\r\n        interface anotherInterface{\r\n            ........\r\n            ........\r\n            Map&lt;String, HttpMethod&gt; API_METHOD = new HashMap&lt;String,HttpMethod&gt;();\r\n            API_METHOD.put(POST, HttpMethod.POST);\r\n        }\r\n    }\r\n\r\nbut this is givin error &quot;Cannot resolve symbol &#39;put&#39;&quot;. \r\ncan someone please tell me the reason for this and some other way to initialize the map.\r\n\r\n**Note:** I don&#39;t want to initialize my map like and i am using java 8\r\n\r\n    new HashMap&lt;String, HttpMethod&gt;() {\r\n            {\r\n                put(POST, HttpMethod.POST);\r\n              \r\n            }\r\n        };\r\n\r\n","title":"How to initialize maps inside interfaces in java","body":"<p>I want to initialize a hashmap inside an nested interface. I have tried doing smtng like</p>\n<pre><code>interface constants{\n    .........\n    .........\n    interface anotherInterface{\n        ........\n        ........\n        Map&lt;String, HttpMethod&gt; API_METHOD = new HashMap&lt;String,HttpMethod&gt;();\n        API_METHOD.put(POST, HttpMethod.POST);\n    }\n}\n</code></pre>\n<p>but this is givin error &quot;Cannot resolve symbol 'put'&quot;.\ncan someone please tell me the reason for this and some other way to initialize the map.</p>\n<p><strong>Note:</strong> I don't want to initialize my map like and i am using java 8</p>\n<pre><code>new HashMap&lt;String, HttpMethod&gt;() {\n        {\n            put(POST, HttpMethod.POST);\n          \n        }\n    };\n</code></pre>\n"},{"tags":["java","android","retrofit2"],"comments":[{"owner":{"account_id":4460600,"reputation":453,"user_id":3629588,"display_name":"Muneesh"},"score":0,"creation_date":1651469346,"post_id":72078969,"comment_id":127364028,"body_markdown":"Return live data or use suspend function with retrofit service using coroutine.\nhttps://developer.android.com/codelabs/kotlin-coroutines#0\n\nYour call back are asyn and you cant put return statement there.","body":"Return live data or use suspend function with retrofit service using coroutine. <a href=\"https://developer.android.com/codelabs/kotlin-coroutines#0\" rel=\"nofollow noreferrer\">developer.android.com/codelabs/kotlin-coroutines#0</a>  Your call back are asyn and you cant put return statement there."},{"owner":{"account_id":24664257,"reputation":5,"user_id":18560143,"display_name":"LevPrav"},"score":0,"creation_date":1651491497,"post_id":72078969,"comment_id":127369517,"body_markdown":"@Mundroid suspend function works only with kotlin?","body":"@Mundroid suspend function works only with kotlin?"},{"owner":{"account_id":24664257,"reputation":5,"user_id":18560143,"display_name":"LevPrav"},"score":0,"creation_date":1651506275,"post_id":72078969,"comment_id":127375019,"body_markdown":"@Mundroid I tried using coroutine functions, but they still fire after the return of the main function. are there any other solutions to the problem?","body":"@Mundroid I tried using coroutine functions, but they still fire after the return of the main function. are there any other solutions to the problem?"},{"owner":{"account_id":4460600,"reputation":453,"user_id":3629588,"display_name":"Muneesh"},"score":0,"creation_date":1651577044,"post_id":72078969,"comment_id":127391313,"body_markdown":"Why you returning value from function before getting it? Once you get value from server post it in live data and observe in UI (activity)","body":"Why you returning value from function before getting it? Once you get value from server post it in live data and observe in UI (activity)"}],"answers":[{"tags":[],"owner":{"account_id":4460600,"reputation":453,"user_id":3629588,"display_name":"Muneesh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1651577531,"creation_date":1651577531,"answer_id":72098759,"question_id":72078969,"body_markdown":"You can modify logic in Java, this code is for reference to avoid callback.\r\n\r\n     fun checkAccountByPhone(phone: String):String{\r\n        viewModelScope.launch(Dispatchers.IO) {\r\n            val response : Response&lt;String&gt; = try {\r\n                DbHandler.getApi().checkAccountByPhone(phone)\r\n            } catch (ex: Exception) {\r\n                ex.logException()\r\n                null\r\n            }\r\n\r\n            //you can check response.body() here and can post either response.body() or DbHandler.find\r\n            _yourLiveData.post(response.body() or DbHandler.find)\r\n\r\n\r\n    }","title":"Get boolean value from Retrofit2 onResponse","body":"<p>You can modify logic in Java, this code is for reference to avoid callback.</p>\n<pre><code> fun checkAccountByPhone(phone: String):String{\n    viewModelScope.launch(Dispatchers.IO) {\n        val response : Response&lt;String&gt; = try {\n            DbHandler.getApi().checkAccountByPhone(phone)\n        } catch (ex: Exception) {\n            ex.logException()\n            null\n        }\n\n        //you can check response.body() here and can post either response.body() or DbHandler.find\n        _yourLiveData.post(response.body() or DbHandler.find)\n\n\n}\n</code></pre>\n"}],"owner":{"account_id":24664257,"reputation":5,"user_id":18560143,"display_name":"LevPrav"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":140,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72098759,"answer_count":1,"score":0,"last_activity_date":1651577531,"creation_date":1651426075,"question_id":72078969,"body_markdown":"I am trying to make an asynchronous request to the server, which should return me true or false. But the problem is that the function first returns false, and only then the retrofit function is triggered. How can I get the value I need while maintaining the speed of program execution?\r\nMy code:\r\n```\r\nprivate static boolean find;\r\npublic boolean checkAccountByPhone(String phone){\r\n\r\n    Log.d(&quot;dbHandler&quot;, &quot;function started...&quot;);\r\n\r\n    DbHandler.getApi().checkAccountByPhone(phone).enqueue(new Callback&lt;String&gt;() {\r\n        @Override\r\n        public void onResponse(Call&lt;String&gt; call, Response&lt;String&gt; response) {\r\n            Log.d(&quot;dbHandler&quot;, &quot;data is: &quot;+response.body().equals(&quot;true&quot;));\r\n\r\n            // return response.body().equals(&quot;true&quot;);\r\n\r\n            Log.d(&quot;dbHandler&quot;, &quot;sent!&quot;);\r\n\r\n        }\r\n        @Override\r\n        public void onFailure(Call&lt;String&gt; call, Throwable t) {\r\n            Log.d(&quot;dbHandler&quot;, t.getMessage());\r\n        }\r\n    });\r\n\r\n    Log.d(&quot;dbHandler&quot;, &quot;returned: &quot;+DbHandler.find);\r\n    return DbHandler.find; // always false???\r\n}\r\n```","title":"Get boolean value from Retrofit2 onResponse","body":"<p>I am trying to make an asynchronous request to the server, which should return me true or false. But the problem is that the function first returns false, and only then the retrofit function is triggered. How can I get the value I need while maintaining the speed of program execution?\nMy code:</p>\n<pre><code>private static boolean find;\npublic boolean checkAccountByPhone(String phone){\n\n    Log.d(&quot;dbHandler&quot;, &quot;function started...&quot;);\n\n    DbHandler.getApi().checkAccountByPhone(phone).enqueue(new Callback&lt;String&gt;() {\n        @Override\n        public void onResponse(Call&lt;String&gt; call, Response&lt;String&gt; response) {\n            Log.d(&quot;dbHandler&quot;, &quot;data is: &quot;+response.body().equals(&quot;true&quot;));\n\n            // return response.body().equals(&quot;true&quot;);\n\n            Log.d(&quot;dbHandler&quot;, &quot;sent!&quot;);\n\n        }\n        @Override\n        public void onFailure(Call&lt;String&gt; call, Throwable t) {\n            Log.d(&quot;dbHandler&quot;, t.getMessage());\n        }\n    });\n\n    Log.d(&quot;dbHandler&quot;, &quot;returned: &quot;+DbHandler.find);\n    return DbHandler.find; // always false???\n}\n</code></pre>\n"},{"tags":["java","spring-boot","jpa"],"comments":[{"owner":{"account_id":2364762,"reputation":919,"user_id":2070667,"accept_rate":56,"display_name":"mahesh"},"score":0,"creation_date":1651577910,"post_id":72098755,"comment_id":127391575,"body_markdown":"You can look into spring projections. This will help you.","body":"You can look into spring projections. This will help you."},{"owner":{"account_id":9088973,"reputation":408,"user_id":6765734,"display_name":"randy"},"score":0,"creation_date":1651579078,"post_id":72098755,"comment_id":127391963,"body_markdown":"You could create another class, a &quot;sparse&quot; DTO that includes only those important fields. Rather than returning Task, the endpoint would return the new class.","body":"You could create another class, a &quot;sparse&quot; DTO that includes only those important fields. Rather than returning Task, the endpoint would return the new class."},{"owner":{"account_id":24673101,"reputation":159,"user_id":18567855,"display_name":"blabla blabla"},"score":0,"creation_date":1651585982,"post_id":72098755,"comment_id":127394667,"body_markdown":"@mahesh that&#39;s what i&#39;m currently doing with it but it seems unpractical. is there a better alternative?","body":"@mahesh that&#39;s what i&#39;m currently doing with it but it seems unpractical. is there a better alternative?"}],"owner":{"account_id":24673101,"reputation":159,"user_id":18567855,"display_name":"blabla blabla"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1651577498,"creation_date":1651577498,"question_id":72098755,"body_markdown":"I have the following JPA entity\r\n\r\n    public class Task {\r\n        @Id\r\n        @GeneratedValue(strategy = SEQUENCE)\r\n        private Long id;\r\n    \r\n        private String name;\r\n        private String description;\r\n    \r\n        private LocalDate start_date;\r\n        private LocalDate end_date;\r\n        private String tag;\r\n        private String status;\r\n    \r\n\r\nlet&#39;s say I want to send a GET request where I get only the name,description and status while ignoring the other fields. how can i achieve that? \r\n\r\nI want to ignore certain fields ONLY FOR THIS SPECIFIC REQUEST, so using @JSONIGNORE is out of the question\r\n\r\n","title":"Ignore certain Entity fields in Controller level","body":"<p>I have the following JPA entity</p>\n<pre><code>public class Task {\n    @Id\n    @GeneratedValue(strategy = SEQUENCE)\n    private Long id;\n\n    private String name;\n    private String description;\n\n    private LocalDate start_date;\n    private LocalDate end_date;\n    private String tag;\n    private String status;\n</code></pre>\n<p>let's say I want to send a GET request where I get only the name,description and status while ignoring the other fields. how can i achieve that?</p>\n<p>I want to ignore certain fields ONLY FOR THIS SPECIFIC REQUEST, so using @JSONIGNORE is out of the question</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":2126282,"reputation":667,"user_id":1888360,"accept_rate":67,"display_name":"Aditya Peshave"},"score":1,"creation_date":1424704663,"post_id":28676941,"comment_id":45647104,"body_markdown":"Did you write in your xml which package to scan? `&lt;context:component-scan base-package=&quot;blah.blah.blah&quot; /&gt;`","body":"Did you write in your xml which package to scan? <code>&lt;context:component-scan base-package=&quot;blah.blah.blah&quot; &#47;&gt;</code>"},{"owner":{"account_id":2126282,"reputation":667,"user_id":1888360,"accept_rate":67,"display_name":"Aditya Peshave"},"score":0,"creation_date":1424704726,"post_id":28676941,"comment_id":45647138,"body_markdown":"and I think in the class you should use `@Autowired` instead of `@Resource`","body":"and I think in the class you should use <code>@Autowired</code> instead of <code>@Resource</code>"}],"answers":[{"tags":[],"owner":{"account_id":5619368,"reputation":1394,"user_id":4449729,"display_name":"Cristian Sevescu"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1424706015,"creation_date":1424705281,"answer_id":28677215,"question_id":28676941,"body_markdown":"You did a good job defining all 3 beans in XML.\r\n\r\nBut you also need to activate configurations through annotations, else there is nothing to interpret `@Resource`. Spring does this only if you instruct it so. \r\n\r\nThis [Bean Post Processor][1] handles `@Resource`.\r\n\r\nYou can simply define it as a bean:\r\n\r\n    &lt;bean class=&quot;org.springframework.context.annotation.CommonAnnotationBeanPostProcessor&quot;/&gt;\r\n\r\nOr you can use this:\r\n\r\n    &lt;context:annotation-config&gt;\r\n\r\n  [1]: http://docs.spring.io/spring-framework/docs/2.5.6/api/org/springframework/context/annotation/CommonAnnotationBeanPostProcessor.html","title":"@Resource in Spring do not work?","body":"<p>You did a good job defining all 3 beans in XML.</p>\n\n<p>But you also need to activate configurations through annotations, else there is nothing to interpret <code>@Resource</code>. Spring does this only if you instruct it so. </p>\n\n<p>This <a href=\"http://docs.spring.io/spring-framework/docs/2.5.6/api/org/springframework/context/annotation/CommonAnnotationBeanPostProcessor.html\" rel=\"nofollow\">Bean Post Processor</a> handles <code>@Resource</code>.</p>\n\n<p>You can simply define it as a bean:</p>\n\n<pre><code>&lt;bean class=\"org.springframework.context.annotation.CommonAnnotationBeanPostProcessor\"/&gt;\n</code></pre>\n\n<p>Or you can use this:</p>\n\n<pre><code>&lt;context:annotation-config&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16332223,"reputation":1,"user_id":18414774,"display_name":"Brucelee"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651577459,"creation_date":1651576587,"answer_id":72098596,"question_id":28676941,"body_markdown":"Instead of using applicationcontextas @Resource annotation is jdk based annotation so use configurableapplicationcontext.","title":"@Resource in Spring do not work?","body":"<p>Instead of using applicationcontextas @Resource annotation is jdk based annotation so use configurableapplicationcontext.</p>\n"}],"owner":{"account_id":5833593,"reputation":33,"user_id":4597371,"display_name":"SpringNewbie"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5782,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":28677215,"answer_count":2,"score":3,"last_activity_date":1651577459,"creation_date":1424704466,"question_id":28676941,"body_markdown":"i am new with the Spring Framework and I tried the following example:\r\n\r\nFirst I created two very simple classes\r\n\r\n    public class ObjectA {\r\n\r\n        @Override\r\n        public String toString() {\r\n            return &quot;I am ObjectA&quot;;\r\n        }\r\n    }\r\n\r\n    public class ObjectB {\r\n        @Override\r\n        public String toString() {\r\n            return &quot;I am ObjectB&quot;;\r\n        }\r\n    }\r\n\r\nNo I want to use this Classes managed by Spring.\r\nSo I made another Class which uses the @Resource (javax.annotation.Resource) Annotiation for wiring the two Objects.\r\n\r\n    public class MyApp {\r\n\r\n        @Resource\r\n        public ObjectA oa;\r\n\r\n        @Resource\r\n        public ObjectB ob;\r\n        \r\n        public void info() {\r\n            System.out.println(&quot;--------------&quot;);\r\n            System.out.println(oa);\r\n            System.out.println(&quot;--------------&quot;);\r\n            System.out.println(ob);\r\n            System.out.println(&quot;--------------&quot;);\r\n            \r\n        }\r\n        \r\n        public static void main( String[] args ) {\r\n            ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;mySpringConfig.xml&quot;);\r\n            System.out.println(applicationContext.getBean( ObjectA.class ));\r\n            System.out.println(applicationContext.getBean( ObjectB.class ));\r\n            MyApp myApp = applicationContext.getBean( MyApp.class );\r\n            myApp.info();\r\n        }\r\n\r\n    }\r\n\r\nThe mySpringConfig.xml contains this:\r\n\r\n    [..]\r\n    &lt;bean id=&quot;objectA&quot; class=&quot;com.mySpringCompany.ObjectA&quot; /&gt;\r\n    &lt;bean id=&quot;objectb&quot; class=&quot;com.mySpringCompany.ObjectB&quot; /&gt;\r\n    &lt;bean id=&quot;myApp&quot; class=&quot;com.mySpringCompany.MyApp&quot; /&gt;\r\n    [..]\r\n\r\nNow when I run the Main-Method of MyApp I get the following:\r\n\r\n    I am ObjectA\r\n    I am ObjectB\r\n    --------------\r\n    null\r\n    --------------\r\n    null\r\n    --------------\r\n\r\nSo when I directly use applicationContext.getBean( ObjectA.class ) in the main-method I get an instance of ObjectA. When I want to get within the MyApp Object it doesn&#39;t work. But I think Spring should have injected the two Objects in the MyApp class. What does i made wrong? Thanks in advance for every help.","title":"@Resource in Spring do not work?","body":"<p>i am new with the Spring Framework and I tried the following example:</p>\n\n<p>First I created two very simple classes</p>\n\n<pre><code>public class ObjectA {\n\n    @Override\n    public String toString() {\n        return \"I am ObjectA\";\n    }\n}\n\npublic class ObjectB {\n    @Override\n    public String toString() {\n        return \"I am ObjectB\";\n    }\n}\n</code></pre>\n\n<p>No I want to use this Classes managed by Spring.\nSo I made another Class which uses the @Resource (javax.annotation.Resource) Annotiation for wiring the two Objects.</p>\n\n<pre><code>public class MyApp {\n\n    @Resource\n    public ObjectA oa;\n\n    @Resource\n    public ObjectB ob;\n\n    public void info() {\n        System.out.println(\"--------------\");\n        System.out.println(oa);\n        System.out.println(\"--------------\");\n        System.out.println(ob);\n        System.out.println(\"--------------\");\n\n    }\n\n    public static void main( String[] args ) {\n        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(\"mySpringConfig.xml\");\n        System.out.println(applicationContext.getBean( ObjectA.class ));\n        System.out.println(applicationContext.getBean( ObjectB.class ));\n        MyApp myApp = applicationContext.getBean( MyApp.class );\n        myApp.info();\n    }\n\n}\n</code></pre>\n\n<p>The mySpringConfig.xml contains this:</p>\n\n<pre><code>[..]\n&lt;bean id=\"objectA\" class=\"com.mySpringCompany.ObjectA\" /&gt;\n&lt;bean id=\"objectb\" class=\"com.mySpringCompany.ObjectB\" /&gt;\n&lt;bean id=\"myApp\" class=\"com.mySpringCompany.MyApp\" /&gt;\n[..]\n</code></pre>\n\n<p>Now when I run the Main-Method of MyApp I get the following:</p>\n\n<pre><code>I am ObjectA\nI am ObjectB\n--------------\nnull\n--------------\nnull\n--------------\n</code></pre>\n\n<p>So when I directly use applicationContext.getBean( ObjectA.class ) in the main-method I get an instance of ObjectA. When I want to get within the MyApp Object it doesn't work. But I think Spring should have injected the two Objects in the MyApp class. What does i made wrong? Thanks in advance for every help.</p>\n"},{"tags":["java","installation","apache-nifi","cloudera"],"comments":[{"owner":{"account_id":3622515,"reputation":3911,"user_id":3020903,"accept_rate":50,"display_name":"Tarmo"},"score":0,"creation_date":1622458356,"post_id":67771427,"comment_id":119790631,"body_markdown":"Does this answer your question? [can not run Apache nifi on Windows](https://stackoverflow.com/questions/38604052/can-not-run-apache-nifi-on-windows)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/38604052/can-not-run-apache-nifi-on-windows\">can not run Apache nifi on Windows</a>"},{"owner":{"account_id":2976512,"reputation":3160,"user_id":2527458,"accept_rate":36,"display_name":"Majid Hajibaba"},"score":0,"creation_date":1622459740,"post_id":67771427,"comment_id":119791169,"body_markdown":"Run `cmd` as *Administrator* may help.","body":"Run <code>cmd</code> as <i>Administrator</i> may help."},{"owner":{"account_id":17810646,"reputation":29,"user_id":12935356,"display_name":"EduardoCabria"},"score":0,"creation_date":1622461955,"post_id":67771427,"comment_id":119792031,"body_markdown":"both solutions didn&#39;t work for me :(","body":"both solutions didn&#39;t work for me :("},{"owner":{"account_id":1263578,"reputation":2781,"user_id":1221355,"accept_rate":100,"display_name":"Vikramsinh Shinde"},"score":0,"creation_date":1622463043,"post_id":67771427,"comment_id":119792484,"body_markdown":"Did you get it from here - https://www.apache.org/dyn/closer.lua?path=/nifi/1.13.2/nifi-1.13.2-bin.zip","body":"Did you get it from here - <a href=\"https://www.apache.org/dyn/closer.lua?path=/nifi/1.13.2/nifi-1.13.2-bin.zip\" rel=\"nofollow noreferrer\">apache.org/dyn/closer.lua?path=/nifi/1.13.2/nifi-1.13.2-bin.&zwnj;&#8203;zip</a>"},{"owner":{"account_id":1263578,"reputation":2781,"user_id":1221355,"accept_rate":100,"display_name":"Vikramsinh Shinde"},"score":0,"creation_date":1622463524,"post_id":67771427,"comment_id":119792683,"body_markdown":"Have a look at this as well - https://stackoverflow.com/questions/37607634/run-as-option-does-not-work-other-than-nifi-user","body":"Have a look at this as well - <a href=\"https://stackoverflow.com/questions/37607634/run-as-option-does-not-work-other-than-nifi-user\" title=\"run as option does not work other than nifi user\">stackoverflow.com/questions/37607634/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":6061058,"reputation":191,"user_id":4966708,"display_name":"Greg Rowles"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651576541,"creation_date":1651576541,"answer_id":72098590,"question_id":67771427,"body_markdown":"SOLVED the exact same problem by granting permissions (full control) to Users and Authenticated Users; I assume only one of these groups was necessary but shotgunned it, and it now runs correctly\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Uo5kf.png","title":"Can&#39;t start NiFi in win10","body":"<p>SOLVED the exact same problem by granting permissions (full control) to Users and Authenticated Users; I assume only one of these groups was necessary but shotgunned it, and it now runs correctly</p>\n<p><a href=\"https://i.stack.imgur.com/Uo5kf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Uo5kf.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":17810646,"reputation":29,"user_id":12935356,"display_name":"EduardoCabria"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":585,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1651576541,"creation_date":1622454286,"question_id":67771427,"body_markdown":"I have installed NiFi but when I try to start it from the command line, with `bin\\run-nifi.bat`, I get the following error:\r\n\r\n    Error: Could not find or load main class org.apache.nifi.bootstrap.RunNiFi\r\n\r\nI have:\r\nWindows 10 SO 19042.867\r\nJava 8 1.8.0_291-b10\r\n\r\nI tried doing it from administrator but it still doesn&#39;t work.... can anyone help me?\r\n\r\nThankyou!\r\n","title":"Can&#39;t start NiFi in win10","body":"<p>I have installed NiFi but when I try to start it from the command line, with <code>bin\\run-nifi.bat</code>, I get the following error:</p>\n<pre><code>Error: Could not find or load main class org.apache.nifi.bootstrap.RunNiFi\n</code></pre>\n<p>I have:\nWindows 10 SO 19042.867\nJava 8 1.8.0_291-b10</p>\n<p>I tried doing it from administrator but it still doesn't work.... can anyone help me?</p>\n<p>Thankyou!</p>\n"},{"tags":["java","php","apache","docker","tomcat"],"comments":[{"owner":{"account_id":7172796,"reputation":605,"user_id":5913437,"accept_rate":0,"display_name":"DHARMENDRA SINGH"},"score":0,"creation_date":1565177610,"post_id":57203732,"comment_id":101268673,"body_markdown":"This is approximately the same issue, follow this link https://stackoverflow.com/questions/7121372/cannot-run-php-script-under-tomcat and https://github.com/belgattitude/php-java-bridge/issues/62","body":"This is approximately the same issue, follow this link <a href=\"https://stackoverflow.com/questions/7121372/cannot-run-php-script-under-tomcat\" title=\"cannot run php script under tomcat\">stackoverflow.com/questions/7121372/&hellip;</a> and <a href=\"https://github.com/belgattitude/php-java-bridge/issues/62\" rel=\"nofollow noreferrer\">github.com/belgattitude/php-java-bridge/issues/62</a>"}],"answers":[{"tags":[],"owner":{"account_id":8017980,"reputation":1,"user_id":6087547,"display_name":"qw008"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1564072556,"creation_date":1564072556,"answer_id":57206619,"question_id":57203732,"body_markdown":"Some of the dependent module related to Protocol are not loaded and therefore resulting in java.io.IOException, it is unable to establish a connection with the target resource.\r\n","title":"PHP Java bridge exception - protocol error","body":"<p>Some of the dependent module related to Protocol are not loaded and therefore resulting in java.io.IOException, it is unable to establish a connection with the target resource.</p>\n"},{"tags":[],"owner":{"account_id":389161,"reputation":385,"user_id":748462,"display_name":"AltShiftZero"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1564654620,"creation_date":1564654620,"answer_id":57306789,"question_id":57203732,"body_markdown":"The error message says it had an exception on the connection because of a protocol error. This could happen for various reasons:\r\n\r\n- Server that needs to be contacted is unavailable at the time the request was made\r\n\r\n- the php-fcgi is still starting up at the time JAVA was trying to call the application\r\n- you are requesting the data from php using the wrong protocol\r\n\r\nIf it is the first, you could edit the startup file so tomcat will wait for the other service to start depending on what service you use for this. If you are using systemd, look at this answer: https://unix.stackexchange.com/questions/43202/how-can-i-start-a-systemd-service-only-after-mysql-has-started\r\n\r\nYou could have a look at the php error-logs, access logs and see if you get errors there that could be of help.\r\nYou should also look into the messages right above and below the stacktrace you posted. It could be of help for what is going wrong.","title":"PHP Java bridge exception - protocol error","body":"<p>The error message says it had an exception on the connection because of a protocol error. This could happen for various reasons:</p>\n\n<ul>\n<li><p>Server that needs to be contacted is unavailable at the time the request was made</p></li>\n<li><p>the php-fcgi is still starting up at the time JAVA was trying to call the application</p></li>\n<li>you are requesting the data from php using the wrong protocol</li>\n</ul>\n\n<p>If it is the first, you could edit the startup file so tomcat will wait for the other service to start depending on what service you use for this. If you are using systemd, look at this answer: <a href=\"https://unix.stackexchange.com/questions/43202/how-can-i-start-a-systemd-service-only-after-mysql-has-started\">https://unix.stackexchange.com/questions/43202/how-can-i-start-a-systemd-service-only-after-mysql-has-started</a></p>\n\n<p>You could have a look at the php error-logs, access logs and see if you get errors there that could be of help.\nYou should also look into the messages right above and below the stacktrace you posted. It could be of help for what is going wrong.</p>\n"}],"owner":{"account_id":3683606,"reputation":5652,"user_id":3067928,"accept_rate":43,"display_name":"RNK"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1006,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":2,"score":6,"last_activity_date":1651575583,"creation_date":1564062975,"question_id":57203732,"body_markdown":"I am running the PHP-Java bridge server (apache-tomcat). Sometimes I get an intermittent error. It&#39;s working when I restart the tomcat server from `/opt/apache-tomcat-8.5.43/bin` directory by `./shutdown.sh` and `startup.sh`.\r\n\r\n    25-Jul-2019 13:53:52.766 SEVERE [http-nio-8080-exec-8] org.apache.catalina.core.StandardWrapperValve.invoke Servlet.service() for servlet [PhpCGIServlet] in context with path [/JavaBridge] threw exception\r\n        php.java.fastcgi.ConnectionException\r\n                at php.java.fastcgi.FCGIInputStream.read(FCGIInputStream.java:31)\r\n                at php.java.fastcgi.FCGIHeaderParser.parseBody(FCGIHeaderParser.java:82)\r\n                at php.java.servlet.fastcgi.FastCGIServlet.doExecute(FastCGIServlet.java:442)\r\n                at php.java.servlet.fastcgi.FastCGIServlet.execute(FastCGIServlet.java:468)\r\n                at php.java.servlet.fastcgi.FastCGIServlet.handle(FastCGIServlet.java:479)\r\n                at php.java.servlet.fastcgi.FastCGIServlet.doGet(FastCGIServlet.java:507)\r\n                at javax.servlet.http.HttpServlet.service(HttpServlet.java:635)\r\n                at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)\r\n                at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)\r\n                at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n                at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\r\n                at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n                at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n                at php.java.servlet.PhpCGIFilter.doFilter(PhpCGIFilter.java:126)\r\n                at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n                at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n                at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199)\r\n                at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)\r\n                at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)\r\n                at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:137)\r\n                at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)\r\n                at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:660)\r\n                at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)\r\n                at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)\r\n                at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:798)\r\n                at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)\r\n                at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:808)\r\n                at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1498)\r\n                at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n                at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n                at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n                at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n                at java.lang.Thread.run(Thread.java:748)\r\n        Caused by: java.io.IOException: Protocol error\r\n                at php.java.fastcgi.FCGIInputStream.doRead(FCGIInputStream.java:56)\r\n                at php.java.fastcgi.FCGIInputStream.read(FCGIInputStream.java:29)\r\n\r\n**Dockerfile:**\r\n\r\n\tFROM ubuntu:16.04\r\n\r\n\tMAINTAINER Alexey Nurgaliev &lt;atnurgaliev@gmail.com&gt;\r\n\r\n\tENV DEBIAN_FRONTEND=noninteractive\r\n\r\n\tENV JAVA_BRIDGE_URL=&quot;https://sourceforge.net/projects/php-java-bridge/files/Binary%20package/php-java-bridge_7.1.3/php-java-bridge_7.1.3_documentation.zip/download&quot;\r\n\r\n\tENV JAYBIRD_URL=&quot;https://github.com/FirebirdSQL/jaybird/releases/download/v2.2.13/Jaybird-2.2.13-JDK_1.8.zip&quot;\r\n\tENV JAYBIRD_FILE_NAME=&quot;jaybird-full-2.2.13.jar&quot;\r\n\r\n\tENV POSTGRESQL_URL=&quot;https://jdbc.postgresql.org/download/postgresql-9.4.1212.jar&quot;\r\n\tENV POSTGRESQL_FILE_NAME=&quot;postgresql-9.4.1212.jar&quot;\r\n\r\n\tENV TOMCAT_VERSION=&quot;8.5.43&quot;\r\n\tENV TOMCAT_URL=&quot;http://apache-mirror.rbc.ru/pub/apache/tomcat/tomcat-8/v8.5.43/bin/apache-tomcat-8.5.43.tar.gz&quot;\r\n\tENV TOMCAT_DIR=&quot;/opt/apache-tomcat-${TOMCAT_VERSION}&quot;\r\n\tENV TOMCAT_LIB_DIR=&quot;${TOMCAT_DIR}/webapps/JavaBridge/WEB-INF/lib&quot;\r\n\r\n\tRUN apt-get update -y &amp;&amp; \\\r\n\t    apt-get upgrade -y &amp;&amp; \\\r\n\t    apt-get install -y unzip wget php-cgi openjdk-8-jre-headless locales &amp;&amp; \\\r\n\t    apt-get install -y nano &amp;&amp; \\\r\n\t    apt-get install -y curl wget &amp;&amp; \\\r\n\t    locale-gen --lang ru_RU.UTF-8\r\n\r\n\tRUN cd /opt &amp;&amp;\\\r\n\r\n\t    wget -O &quot;tomcat.tar.gz&quot; &quot;${TOMCAT_URL}&quot; &amp;&amp;\\\r\n\t    tar -xf &quot;tomcat.tar.gz&quot; &amp;&amp;\\\r\n\t    rm &quot;tomcat.tar.gz&quot; &amp;&amp;\\\r\n\r\n\t    wget -O &quot;JavaBridge.zip&quot; &quot;${JAVA_BRIDGE_URL}&quot; &amp;&amp;\\\r\n\t    unzip &quot;JavaBridge.zip&quot; -d &quot;JavaBridge&quot; &amp;&amp;\\\r\n\t    unzip -o &quot;JavaBridge/JavaBridge.war&quot; -d &quot;${TOMCAT_DIR}/webapps/JavaBridge&quot; &amp;&amp;\\\r\n\t    rm -R JavaBridge &amp;&amp;\\\r\n\t    rm JavaBridge.zip &amp;&amp;\\\r\n\r\n\t    wget -O &quot;jaybird.zip&quot; &quot;${JAYBIRD_URL}&quot; &amp;&amp;\\\r\n\t    unzip &quot;jaybird.zip&quot; -d &quot;jaybird&quot; &amp;&amp;\\\r\n\t    cp &quot;jaybird/${JAYBIRD_FILE_NAME}&quot; &quot;${TOMCAT_LIB_DIR}&quot; &amp;&amp;\\\r\n\t    rm -R &quot;jaybird&quot; &amp;&amp;\\\r\n\r\n\t    wget &quot;${POSTGRESQL_URL}&quot; &amp;&amp;\\\r\n\t    cp &quot;${POSTGRESQL_FILE_NAME}&quot; &quot;${TOMCAT_LIB_DIR}&quot; &amp;&amp;\\\r\n\t    rm &quot;${POSTGRESQL_FILE_NAME}&quot;\r\n\r\n\tEXPOSE 8080\r\n\r\n\tCMD LANG=ru_RU.UTF-8 &quot;${TOMCAT_DIR}/bin/catalina.sh&quot; run\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/dIELo.png","title":"PHP Java bridge exception - protocol error","body":"<p>I am running the PHP-Java bridge server (apache-tomcat). Sometimes I get an intermittent error. It's working when I restart the tomcat server from <code>/opt/apache-tomcat-8.5.43/bin</code> directory by <code>./shutdown.sh</code> and <code>startup.sh</code>.</p>\n\n<pre><code>25-Jul-2019 13:53:52.766 SEVERE [http-nio-8080-exec-8] org.apache.catalina.core.StandardWrapperValve.invoke Servlet.service() for servlet [PhpCGIServlet] in context with path [/JavaBridge] threw exception\n    php.java.fastcgi.ConnectionException\n            at php.java.fastcgi.FCGIInputStream.read(FCGIInputStream.java:31)\n            at php.java.fastcgi.FCGIHeaderParser.parseBody(FCGIHeaderParser.java:82)\n            at php.java.servlet.fastcgi.FastCGIServlet.doExecute(FastCGIServlet.java:442)\n            at php.java.servlet.fastcgi.FastCGIServlet.execute(FastCGIServlet.java:468)\n            at php.java.servlet.fastcgi.FastCGIServlet.handle(FastCGIServlet.java:479)\n            at php.java.servlet.fastcgi.FastCGIServlet.doGet(FastCGIServlet.java:507)\n            at javax.servlet.http.HttpServlet.service(HttpServlet.java:635)\n            at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)\n            at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)\n            at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n            at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\n            at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n            at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n            at php.java.servlet.PhpCGIFilter.doFilter(PhpCGIFilter.java:126)\n            at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n            at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n            at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199)\n            at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)\n            at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)\n            at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:137)\n            at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)\n            at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:660)\n            at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)\n            at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)\n            at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:798)\n            at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)\n            at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:808)\n            at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1498)\n            at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n            at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n            at java.lang.Thread.run(Thread.java:748)\n    Caused by: java.io.IOException: Protocol error\n            at php.java.fastcgi.FCGIInputStream.doRead(FCGIInputStream.java:56)\n            at php.java.fastcgi.FCGIInputStream.read(FCGIInputStream.java:29)\n</code></pre>\n\n<p><strong>Dockerfile:</strong></p>\n\n<pre><code>FROM ubuntu:16.04\n\nMAINTAINER Alexey Nurgaliev &lt;atnurgaliev@gmail.com&gt;\n\nENV DEBIAN_FRONTEND=noninteractive\n\nENV JAVA_BRIDGE_URL=\"https://sourceforge.net/projects/php-java-bridge/files/Binary%20package/php-java-bridge_7.1.3/php-java-bridge_7.1.3_documentation.zip/download\"\n\nENV JAYBIRD_URL=\"https://github.com/FirebirdSQL/jaybird/releases/download/v2.2.13/Jaybird-2.2.13-JDK_1.8.zip\"\nENV JAYBIRD_FILE_NAME=\"jaybird-full-2.2.13.jar\"\n\nENV POSTGRESQL_URL=\"https://jdbc.postgresql.org/download/postgresql-9.4.1212.jar\"\nENV POSTGRESQL_FILE_NAME=\"postgresql-9.4.1212.jar\"\n\nENV TOMCAT_VERSION=\"8.5.43\"\nENV TOMCAT_URL=\"http://apache-mirror.rbc.ru/pub/apache/tomcat/tomcat-8/v8.5.43/bin/apache-tomcat-8.5.43.tar.gz\"\nENV TOMCAT_DIR=\"/opt/apache-tomcat-${TOMCAT_VERSION}\"\nENV TOMCAT_LIB_DIR=\"${TOMCAT_DIR}/webapps/JavaBridge/WEB-INF/lib\"\n\nRUN apt-get update -y &amp;&amp; \\\n    apt-get upgrade -y &amp;&amp; \\\n    apt-get install -y unzip wget php-cgi openjdk-8-jre-headless locales &amp;&amp; \\\n    apt-get install -y nano &amp;&amp; \\\n    apt-get install -y curl wget &amp;&amp; \\\n    locale-gen --lang ru_RU.UTF-8\n\nRUN cd /opt &amp;&amp;\\\n\n    wget -O \"tomcat.tar.gz\" \"${TOMCAT_URL}\" &amp;&amp;\\\n    tar -xf \"tomcat.tar.gz\" &amp;&amp;\\\n    rm \"tomcat.tar.gz\" &amp;&amp;\\\n\n    wget -O \"JavaBridge.zip\" \"${JAVA_BRIDGE_URL}\" &amp;&amp;\\\n    unzip \"JavaBridge.zip\" -d \"JavaBridge\" &amp;&amp;\\\n    unzip -o \"JavaBridge/JavaBridge.war\" -d \"${TOMCAT_DIR}/webapps/JavaBridge\" &amp;&amp;\\\n    rm -R JavaBridge &amp;&amp;\\\n    rm JavaBridge.zip &amp;&amp;\\\n\n    wget -O \"jaybird.zip\" \"${JAYBIRD_URL}\" &amp;&amp;\\\n    unzip \"jaybird.zip\" -d \"jaybird\" &amp;&amp;\\\n    cp \"jaybird/${JAYBIRD_FILE_NAME}\" \"${TOMCAT_LIB_DIR}\" &amp;&amp;\\\n    rm -R \"jaybird\" &amp;&amp;\\\n\n    wget \"${POSTGRESQL_URL}\" &amp;&amp;\\\n    cp \"${POSTGRESQL_FILE_NAME}\" \"${TOMCAT_LIB_DIR}\" &amp;&amp;\\\n    rm \"${POSTGRESQL_FILE_NAME}\"\n\nEXPOSE 8080\n\nCMD LANG=ru_RU.UTF-8 \"${TOMCAT_DIR}/bin/catalina.sh\" run\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/dIELo.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/dIELo.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":["java","java-11","jlink"],"comments":[{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":1,"creation_date":1651572361,"post_id":72097622,"comment_id":127389873,"body_markdown":"Is it possible that the whole customized JRE will run on Linux only? AFAIK you&#39;d have to run jlink on Windows for a Windows JRE.","body":"Is it possible that the whole customized JRE will run on Linux only? AFAIK you&#39;d have to run jlink on Windows for a Windows JRE."},{"owner":{"account_id":18795083,"reputation":97,"user_id":15248265,"display_name":"Kalich"},"score":0,"creation_date":1651573885,"post_id":72097622,"comment_id":127390318,"body_markdown":"I don&#39;t then understand the whole idea of custom JRE. On Windows I can even create an executable instead of custom JRE, why do I even need it then? Before JDK 11, the client would just install the JRE, then I send them the jar or .class file which they run. Starting from JDK 11 there is no JRE that the client can install, so as I understood, I have to create the custom JRE on my own, which I then send to the client and they can run it wherever they want.","body":"I don&#39;t then understand the whole idea of custom JRE. On Windows I can even create an executable instead of custom JRE, why do I even need it then? Before JDK 11, the client would just install the JRE, then I send them the jar or .class file which they run. Starting from JDK 11 there is no JRE that the client can install, so as I understood, I have to create the custom JRE on my own, which I then send to the client and they can run it wherever they want."},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1651574600,"post_id":72097622,"comment_id":127390543,"body_markdown":"The JRE is different for different platforms. You can&#39;t create a custom JRE for Windows (or any other non-Linux platform) if your full JRE (from the JDK) is the Linux version.","body":"The JRE is different for different platforms. You can&#39;t create a custom JRE for Windows (or any other non-Linux platform) if your full JRE (from the JDK) is the Linux version."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1651575263,"post_id":72097622,"comment_id":127390757,"body_markdown":"Yes, you have to run jlink on your target platform. &#39;Cross-linking&#39; isn&#39;t possible. The platform-neutral element in Java is its bytecode. That which interprets that bytecode is platform-specfic","body":"Yes, you have to run jlink on your target platform. &#39;Cross-linking&#39; isn&#39;t possible. The platform-neutral element in Java is its bytecode. That which interprets that bytecode is platform-specfic"}],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1651575495,"creation_date":1651575495,"answer_id":72098419,"question_id":72097622,"body_markdown":"Considering the question and the comments so far...\r\n\r\nEither you go the traditional way and continue to distribute jar files. Your client can run the application on any machine that has a Java Runtime (and today that means they install the JDK as there is no JRE any more).\r\n\r\nOr you package your application to include the JRE so the client does not have to care which version of Java they need. To make this easier, jlink and jpackage have been created. Have a look at https://docs.oracle.com/en/java/javase/17/jpackage/packaging-overview.html\r\nJust be aware Windows packages will have to be created on a Windows machine, Linux packages on a Linux machine etc. Cross-compiling is not supported.\r\n\r\nIf you prefer something like Webstart (which means automated online distribution of your application), take a look at https://openwebstart.com/","title":"on Ubuntu jlink does not generate .bat script, only bash script","body":"<p>Considering the question and the comments so far...</p>\n<p>Either you go the traditional way and continue to distribute jar files. Your client can run the application on any machine that has a Java Runtime (and today that means they install the JDK as there is no JRE any more).</p>\n<p>Or you package your application to include the JRE so the client does not have to care which version of Java they need. To make this easier, jlink and jpackage have been created. Have a look at <a href=\"https://docs.oracle.com/en/java/javase/17/jpackage/packaging-overview.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/en/java/javase/17/jpackage/packaging-overview.html</a>\nJust be aware Windows packages will have to be created on a Windows machine, Linux packages on a Linux machine etc. Cross-compiling is not supported.</p>\n<p>If you prefer something like Webstart (which means automated online distribution of your application), take a look at <a href=\"https://openwebstart.com/\" rel=\"nofollow noreferrer\">https://openwebstart.com/</a></p>\n"}],"owner":{"account_id":18795083,"reputation":97,"user_id":15248265,"display_name":"Kalich"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72098419,"answer_count":1,"score":0,"last_activity_date":1651575495,"creation_date":1651571471,"question_id":72097622,"body_markdown":"I am trying to create a custom JRE with laucher scripts using [this guide][1]. I am running Ubuntu 20.04, and at the end I got only the bash script in the bin folder, but wasn&#39;t it supposed for jlink to create both .bat and bash scripts?\r\n\r\n\r\n  [1]: https://www.baeldung.com/jlink","title":"on Ubuntu jlink does not generate .bat script, only bash script","body":"<p>I am trying to create a custom JRE with laucher scripts using <a href=\"https://www.baeldung.com/jlink\" rel=\"nofollow noreferrer\">this guide</a>. I am running Ubuntu 20.04, and at the end I got only the bash script in the bin folder, but wasn't it supposed for jlink to create both .bat and bash scripts?</p>\n"},{"tags":["java","error-handling","constructor"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1651574997,"post_id":72098292,"comment_id":127390677,"body_markdown":"That&#39;s valid &gt;= Java 11. What are you using?","body":"That&#39;s valid &gt;= Java 11. What are you using?"}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1651575416,"creation_date":1651575416,"answer_id":72098398,"question_id":72098292,"body_markdown":"That constructor has only existed since JDK11. It definitely wasn&#39;t in 8. Which explains how you got there: Your IDE is configured with a compatibility level of 8, or is straight up configured to compile &#39;against&#39; a JDK8.\r\n\r\nEven so, FileWriter is an outdated concept. Try:\r\n\r\n```java\r\nPath p = Paths.get(&quot;/path/to/file&quot;);\r\ntry (var writer = Files.newBufferedWriter(p)) {\r\n}\r\n```\r\n\r\nThis one:\r\n\r\n* Defaults to UTF-8 (unlike `new FileWriter(file)`, which defaults to &#39;platform default&#39; until JDK17, and UTF-8 from JDK18 onwards).\r\n* You can call `newBufferedWriter(p, charset)` instead if you prefer.\r\n* Exists since JDK8 (7, even, I think).\r\n\r\nThe JDK 1.0 version is this:\r\n\r\n```java\r\ntry (var fileOut = new FileOutputStream(file);\r\n     var writer = new OutputStreamWriter(fileOut, charset)) {\r\n...\r\n}\r\n```\r\n\r\nAnd you might want to wrap that in `BufferedWriter` to boot.\r\n\r\nDon&#39;t use this unless you need compatibility with JDKs that have been end-of-lifed for years at this point, i.e. - don&#39;t use this.\r\n","title":"Unable to compile code for no constuctor found for FileWriter","body":"<p>That constructor has only existed since JDK11. It definitely wasn't in 8. Which explains how you got there: Your IDE is configured with a compatibility level of 8, or is straight up configured to compile 'against' a JDK8.</p>\n<p>Even so, FileWriter is an outdated concept. Try:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Path p = Paths.get(&quot;/path/to/file&quot;);\ntry (var writer = Files.newBufferedWriter(p)) {\n}\n</code></pre>\n<p>This one:</p>\n<ul>\n<li>Defaults to UTF-8 (unlike <code>new FileWriter(file)</code>, which defaults to 'platform default' until JDK17, and UTF-8 from JDK18 onwards).</li>\n<li>You can call <code>newBufferedWriter(p, charset)</code> instead if you prefer.</li>\n<li>Exists since JDK8 (7, even, I think).</li>\n</ul>\n<p>The JDK 1.0 version is this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>try (var fileOut = new FileOutputStream(file);\n     var writer = new OutputStreamWriter(fileOut, charset)) {\n...\n}\n</code></pre>\n<p>And you might want to wrap that in <code>BufferedWriter</code> to boot.</p>\n<p>Don't use this unless you need compatibility with JDKs that have been end-of-lifed for years at this point, i.e. - don't use this.</p>\n"}],"owner":{"account_id":25182010,"reputation":3,"user_id":19023415,"display_name":"Deepak Sachan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":186,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1651604635,"accepted_answer_id":72098398,"answer_count":1,"score":-2,"last_activity_date":1651575416,"creation_date":1651574810,"question_id":72098292,"body_markdown":"While I was working on one of the projects, I found that my IDE was not able to compile a piece of code which says \r\nerror: no suitable constructor found for FileWriter(File,Charset)\r\n\r\nI was wondering if this was an error how this came in the codebase at the very first place. \r\n\r\nI am wondering if this is an issue with my IDE or am I missing something.Please help!!!","title":"Unable to compile code for no constuctor found for FileWriter","body":"<p>While I was working on one of the projects, I found that my IDE was not able to compile a piece of code which says\nerror: no suitable constructor found for FileWriter(File,Charset)</p>\n<p>I was wondering if this was an error how this came in the codebase at the very first place.</p>\n<p>I am wondering if this is an issue with my IDE or am I missing something.Please help!!!</p>\n"},{"tags":["java","web-services","soap","fault","soapfault"],"answers":[{"tags":[],"owner":{"account_id":24823704,"reputation":11,"user_id":18703766,"display_name":"Pandemonius"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1651575188,"creation_date":1651575188,"answer_id":72098363,"question_id":72046509,"body_markdown":"for everyone still looking for the answer I&#39;ve understood that basically if you have an xsd schema, you have to define the complex type of your  exception detail. For example: \r\n\r\n      &lt;xs:complexType name=&quot;YourCustomException&quot;&gt;\r\n        &lt;xs:sequence&gt;\r\n          &lt;xs:element name=&quot;exName&quot; type=&quot;xs:string&quot; minOccurs=&quot;0&quot;&gt;&lt;/xs:element&gt;\r\n          &lt;xs:element name=&quot;exMessage&quot; type=&quot;xs:string&quot; minOccurs=&quot;0&quot;&gt;&lt;/xs:element&gt;\r\n          &lt;xs:element name=&quot;exDetails&quot; type=&quot;xs:string&quot; minOccurs=&quot;0&quot;&gt;&lt;/xs:element&gt;\r\n        &lt;/xs:sequence&gt;\r\n      &lt;/xs:complexType&gt;\r\n\r\nin Java your going to have the class from this complexType and his exception class. In the exception class you have to bring an attribute of the complexType (if you generate the classes with CXF or some other tools everything is taken care of) and you have to figure your preferred way for instanciate the complexType in your customException so in the SOAP Fault the &quot;detail&quot; tag is populated. \r\n\r\nExample of the CustomException in Java:\r\n\r\n    @WebFault(name = &quot;YourCustomException&quot;, targetNamespace = &quot;http://serviceendpoint/&quot;)\r\n    public class YourCustomException_Exception extends Exception {\r\n    \r\n        private it.your.package.YourCustomException YourCustomException;\r\n    \r\n        public YourCustomException_Exception() {\r\n            super();\r\n        }\r\n    \r\n        public YourCustomException_Exception(String message) {\r\n            super(message);\r\n        }\r\n    \r\n        public YourCustomException_Exception(String message, java.lang.Throwable cause) {\r\n            super(message);\r\n            this.YourCustomException = new YourCustomException();\r\n            this.YourCustomException.setExName(cause.getClass().getName());\r\n            this.YourCustomException.setExMessage(cause.getMessage());\r\n            this.YourCustomException.setExDetails(cause.getLocalizedMessage());\r\n            \r\n        }\r\n    }\r\n\r\nexample of the ComplexType in Java:\r\n\r\n    @XmlAccessorType(XmlAccessType.FIELD)\r\n    @XmlType(name = &quot;YourCustomException &quot;, propOrder = {\r\n        &quot;exName&quot;,\r\n        &quot;exMessage&quot;,\r\n        &quot;exDetails&quot;\r\n    })\r\n    public class YourCustomException {\r\n    \r\n        protected String exName;  \r\n        protected String exMessage;\r\n        protected String exDetails;\r\n    \r\n    \tpublic String getExName() {\r\n    \t\treturn exName;\r\n    \t}\r\n    \r\n    \tpublic void setExName(String exName) {\r\n    \t\tthis.exName = exName;\r\n    \t}\r\n    \r\n    \tpublic String getExMessage() {\r\n    \t\treturn exMessage;\r\n    \t}\r\n    \r\n    \tpublic void setExMessage(String exMessage) {\r\n    \t\tthis.exMessage = exMessage;\r\n    \t}\r\n    \r\n    \tpublic String getExDetails() {\r\n    \t\treturn exDetails;\r\n    \t}\r\n    \r\n    \tpublic void setExDetails(String exDetails) {\r\n    \t\tthis.exDetails = exDetails;\r\n    \t}\r\n        \r\n        \r\n    \r\n    }\r\n\r\nSOAP Fault in the response forcing an IndexOutOfBounds in the method called:\r\n\r\n    &lt;soap:Envelope xmlns:soap=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;\r\n       &lt;soap:Body&gt;\r\n          &lt;soap:Fault&gt;\r\n             &lt;faultcode&gt;soap:Server&lt;/faultcode&gt;\r\n             &lt;faultstring&gt;Error in your method&lt;/faultstring&gt;\r\n             &lt;detail&gt;\r\n                &lt;ns2:YourCustomException xmlns:ns2=&quot;http://serviceendpoint/&quot;&gt;\r\n                   &lt;exName&gt;java.lang.IndexOutOfBoundsException&lt;/exName&gt;\r\n                   &lt;exMessage&gt;Index: 0, Size: 0&lt;/exMessage&gt;\r\n                   &lt;exDetails&gt;Index: 0, Size: 0&lt;/exDetails&gt;\r\n                &lt;/ns2:YourCustomException &gt;\r\n             &lt;/detail&gt;\r\n          &lt;/soap:Fault&gt;\r\n       &lt;/soap:Body&gt;\r\n    &lt;/soap:Envelope&gt;\r\n\r\n\r\nHope this helps.","title":"SOAP Faults &lt;detail&gt; in http response not visible","body":"<p>for everyone still looking for the answer I've understood that basically if you have an xsd schema, you have to define the complex type of your  exception detail. For example:</p>\n<pre><code>  &lt;xs:complexType name=&quot;YourCustomException&quot;&gt;\n    &lt;xs:sequence&gt;\n      &lt;xs:element name=&quot;exName&quot; type=&quot;xs:string&quot; minOccurs=&quot;0&quot;&gt;&lt;/xs:element&gt;\n      &lt;xs:element name=&quot;exMessage&quot; type=&quot;xs:string&quot; minOccurs=&quot;0&quot;&gt;&lt;/xs:element&gt;\n      &lt;xs:element name=&quot;exDetails&quot; type=&quot;xs:string&quot; minOccurs=&quot;0&quot;&gt;&lt;/xs:element&gt;\n    &lt;/xs:sequence&gt;\n  &lt;/xs:complexType&gt;\n</code></pre>\n<p>in Java your going to have the class from this complexType and his exception class. In the exception class you have to bring an attribute of the complexType (if you generate the classes with CXF or some other tools everything is taken care of) and you have to figure your preferred way for instanciate the complexType in your customException so in the SOAP Fault the &quot;detail&quot; tag is populated.</p>\n<p>Example of the CustomException in Java:</p>\n<pre><code>@WebFault(name = &quot;YourCustomException&quot;, targetNamespace = &quot;http://serviceendpoint/&quot;)\npublic class YourCustomException_Exception extends Exception {\n\n    private it.your.package.YourCustomException YourCustomException;\n\n    public YourCustomException_Exception() {\n        super();\n    }\n\n    public YourCustomException_Exception(String message) {\n        super(message);\n    }\n\n    public YourCustomException_Exception(String message, java.lang.Throwable cause) {\n        super(message);\n        this.YourCustomException = new YourCustomException();\n        this.YourCustomException.setExName(cause.getClass().getName());\n        this.YourCustomException.setExMessage(cause.getMessage());\n        this.YourCustomException.setExDetails(cause.getLocalizedMessage());\n        \n    }\n}\n</code></pre>\n<p>example of the ComplexType in Java:</p>\n<pre><code>@XmlAccessorType(XmlAccessType.FIELD)\n@XmlType(name = &quot;YourCustomException &quot;, propOrder = {\n    &quot;exName&quot;,\n    &quot;exMessage&quot;,\n    &quot;exDetails&quot;\n})\npublic class YourCustomException {\n\n    protected String exName;  \n    protected String exMessage;\n    protected String exDetails;\n\n    public String getExName() {\n        return exName;\n    }\n\n    public void setExName(String exName) {\n        this.exName = exName;\n    }\n\n    public String getExMessage() {\n        return exMessage;\n    }\n\n    public void setExMessage(String exMessage) {\n        this.exMessage = exMessage;\n    }\n\n    public String getExDetails() {\n        return exDetails;\n    }\n\n    public void setExDetails(String exDetails) {\n        this.exDetails = exDetails;\n    }\n    \n    \n\n}\n</code></pre>\n<p>SOAP Fault in the response forcing an IndexOutOfBounds in the method called:</p>\n<pre><code>&lt;soap:Envelope xmlns:soap=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;\n   &lt;soap:Body&gt;\n      &lt;soap:Fault&gt;\n         &lt;faultcode&gt;soap:Server&lt;/faultcode&gt;\n         &lt;faultstring&gt;Error in your method&lt;/faultstring&gt;\n         &lt;detail&gt;\n            &lt;ns2:YourCustomException xmlns:ns2=&quot;http://serviceendpoint/&quot;&gt;\n               &lt;exName&gt;java.lang.IndexOutOfBoundsException&lt;/exName&gt;\n               &lt;exMessage&gt;Index: 0, Size: 0&lt;/exMessage&gt;\n               &lt;exDetails&gt;Index: 0, Size: 0&lt;/exDetails&gt;\n            &lt;/ns2:YourCustomException &gt;\n         &lt;/detail&gt;\n      &lt;/soap:Fault&gt;\n   &lt;/soap:Body&gt;\n&lt;/soap:Envelope&gt;\n</code></pre>\n<p>Hope this helps.</p>\n"}],"owner":{"account_id":24823704,"reputation":11,"user_id":18703766,"display_name":"Pandemonius"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":767,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72098363,"answer_count":1,"score":0,"last_activity_date":1651575188,"creation_date":1651159934,"question_id":72046509,"body_markdown":"I have one issue. I&#39;ve generated a WS server from a wsdl and i&#39;m am trying to understand the exceptions handiling. Basically in the WSDL is defined a custom exception called Throwable_Exception. Now I&#39;ve tired to test the fault in the SOAP response and it work and thats the result:\r\n\r\n     &lt;soap:Envelope xmlns:soap=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;\r\n       &lt;soap:Body&gt;\r\n          &lt;soap:Fault&gt;\r\n             &lt;faultcode&gt;soap:Server&lt;/faultcode&gt;\r\n             &lt;faultstring&gt;TEST Custom Exception&lt;/faultstring&gt;\r\n          &lt;/soap:Fault&gt;\r\n       &lt;/soap:Body&gt;\r\n     &lt;/soap:Envelope&gt;\r\n\r\nThe text in the &quot;faultstring&quot; tag is the messagge that i&#39;ve thrown in the exception. \r\nNow my goal its to send in the response this kind of informations: \r\n\r\n1) A readable messagge about the exception\r\n2) The exception thrown from the server \r\n3) eventually the details about the exception\r\n\r\nI&#39;ve seen on an guide from Oracle that the SOAP fault envelope should be like this:\r\n\r\n    &lt;S:Envelope xmlns:S=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;\r\n       &lt;S:Body&gt;\r\n          &lt;S:Fault xmlns:ns4=&quot;http://www.w3.org/2003/05/soap-envelope&quot;&gt;\r\n             &lt;faultcode&gt;S:Server&lt;/faultcode&gt;\r\n             &lt;faultstring&gt;Your name is required.&lt;/faultstring&gt;\r\n             &lt;detail&gt;\r\n                &lt;ns2:MissingName xmlns:ns2=&quot;http://examples/&quot;&gt;\r\n                   &lt;message&gt;Your name is required.&lt;/message&gt;\r\n                &lt;/ns2:MissingName&gt;\r\n                &lt;ns2:exception xmlns:ns2=&quot;http://jax-ws.dev.java.net/&quot;\r\n     class=&quot;examples.MissingName&quot; note=&quot;To disable this feature, set\r\n     com.sun.xml.ws.fault.SOAPFaultBuilder.disableCaptureStackTrace system \r\n     property to false&quot;&gt;\r\n                   &lt;message&gt;Your name is required.&lt;/message&gt;\r\n                   &lt;ns2:stackTrace&gt;\r\n                      &lt;ns2:frame class=&quot;examples.HelloWorld&quot; file=&quot;HelloWorld.java&quot; \r\n      line=&quot;14&quot; method=&quot;sayHelloWorld&quot;/&gt;\r\n      ...\r\n                   &lt;/ns2:stackTrace&gt;\r\n                &lt;/ns2:exception&gt;\r\n             &lt;/detail&gt;\r\n          &lt;/S:Fault&gt;\r\n       &lt;/S:Body&gt;\r\n    &lt;/S:Envelope&gt;\r\n\r\nThe thing is that in my code as you see, it doesn&#39;t show the &quot;detail&quot; tag. You guys know how to show this kind of information in the SOAP response?\r\n\r\n    public String myMethod(String field1, String field2) throws Throwable_Exception {\r\n    \r\n            LOG.info(&quot;Executing operation myMethod&quot;);\r\n            \r\n            try {\r\n            \t\r\n                java.lang.String _return = &quot;&quot;;\r\n                \r\n                List&lt;String&gt; testExceptions = new ArrayList&lt;&gt;();\r\n                \r\n                testExceptions.get(0);            \r\n                return _return;\r\n            \r\n            } catch (IndexOutOfBoundsException ex) {\r\n            \tthrow new Throwable_Exception(&quot;TEST Custom Exception&quot;, ex.getCause());\r\n            }\r\n            \r\n            //throw new Throwable_Exception(&quot;Throwable...&quot;);\r\n        }\r\n\r\nIn the impl class I&#39;ve tried to force an IndexOutOfBoundsException as well and tried to use this constructor: \r\n\r\n    public Exception(String message, Throwable cause) {\r\n            super(message, cause);\r\n        }\r\n\r\nand I thought that this approach could resolve the issue but apparently not.\r\n\r\nNote: the WS is deployed on WildFly18.","title":"SOAP Faults &lt;detail&gt; in http response not visible","body":"<p>I have one issue. I've generated a WS server from a wsdl and i'm am trying to understand the exceptions handiling. Basically in the WSDL is defined a custom exception called Throwable_Exception. Now I've tired to test the fault in the SOAP response and it work and thats the result:</p>\n<pre><code> &lt;soap:Envelope xmlns:soap=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;\n   &lt;soap:Body&gt;\n      &lt;soap:Fault&gt;\n         &lt;faultcode&gt;soap:Server&lt;/faultcode&gt;\n         &lt;faultstring&gt;TEST Custom Exception&lt;/faultstring&gt;\n      &lt;/soap:Fault&gt;\n   &lt;/soap:Body&gt;\n &lt;/soap:Envelope&gt;\n</code></pre>\n<p>The text in the &quot;faultstring&quot; tag is the messagge that i've thrown in the exception.\nNow my goal its to send in the response this kind of informations:</p>\n<ol>\n<li>A readable messagge about the exception</li>\n<li>The exception thrown from the server</li>\n<li>eventually the details about the exception</li>\n</ol>\n<p>I've seen on an guide from Oracle that the SOAP fault envelope should be like this:</p>\n<pre><code>&lt;S:Envelope xmlns:S=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;\n   &lt;S:Body&gt;\n      &lt;S:Fault xmlns:ns4=&quot;http://www.w3.org/2003/05/soap-envelope&quot;&gt;\n         &lt;faultcode&gt;S:Server&lt;/faultcode&gt;\n         &lt;faultstring&gt;Your name is required.&lt;/faultstring&gt;\n         &lt;detail&gt;\n            &lt;ns2:MissingName xmlns:ns2=&quot;http://examples/&quot;&gt;\n               &lt;message&gt;Your name is required.&lt;/message&gt;\n            &lt;/ns2:MissingName&gt;\n            &lt;ns2:exception xmlns:ns2=&quot;http://jax-ws.dev.java.net/&quot;\n class=&quot;examples.MissingName&quot; note=&quot;To disable this feature, set\n com.sun.xml.ws.fault.SOAPFaultBuilder.disableCaptureStackTrace system \n property to false&quot;&gt;\n               &lt;message&gt;Your name is required.&lt;/message&gt;\n               &lt;ns2:stackTrace&gt;\n                  &lt;ns2:frame class=&quot;examples.HelloWorld&quot; file=&quot;HelloWorld.java&quot; \n  line=&quot;14&quot; method=&quot;sayHelloWorld&quot;/&gt;\n  ...\n               &lt;/ns2:stackTrace&gt;\n            &lt;/ns2:exception&gt;\n         &lt;/detail&gt;\n      &lt;/S:Fault&gt;\n   &lt;/S:Body&gt;\n&lt;/S:Envelope&gt;\n</code></pre>\n<p>The thing is that in my code as you see, it doesn't show the &quot;detail&quot; tag. You guys know how to show this kind of information in the SOAP response?</p>\n<pre><code>public String myMethod(String field1, String field2) throws Throwable_Exception {\n\n        LOG.info(&quot;Executing operation myMethod&quot;);\n        \n        try {\n            \n            java.lang.String _return = &quot;&quot;;\n            \n            List&lt;String&gt; testExceptions = new ArrayList&lt;&gt;();\n            \n            testExceptions.get(0);            \n            return _return;\n        \n        } catch (IndexOutOfBoundsException ex) {\n            throw new Throwable_Exception(&quot;TEST Custom Exception&quot;, ex.getCause());\n        }\n        \n        //throw new Throwable_Exception(&quot;Throwable...&quot;);\n    }\n</code></pre>\n<p>In the impl class I've tried to force an IndexOutOfBoundsException as well and tried to use this constructor:</p>\n<pre><code>public Exception(String message, Throwable cause) {\n        super(message, cause);\n    }\n</code></pre>\n<p>and I thought that this approach could resolve the issue but apparently not.</p>\n<p>Note: the WS is deployed on WildFly18.</p>\n"},{"tags":["java","algorithm","mergesort"],"answers":[{"tags":[],"owner":{"account_id":25178358,"reputation":1,"user_id":19020190,"display_name":"Rounak Mukherjee"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651541125,"creation_date":1651541125,"answer_id":72093978,"question_id":72093812,"body_markdown":"The Errors you did in the code:\r\n\r\n    Finished in N/A\r\n    Line 87: error: &#39;]&#39; expected [in MSort.java]\r\n            int a[l]=new int[n];\r\n                  ^\r\n    Line 87: error: &#39;;&#39; expected [in MSort.java]\r\n            int a[l]=new int[n];\r\n                   ^\r\n    Line 87: error: not a statement [in MSort.java]\r\n            int a[l]=new int[n];\r\n                     ^\r\n    Line 95: error: illegal start of expression [in MSort.java]\r\n             if (p=l)){ System.out.println(&quot;Sorta Right&quot;);\r\n                     ^\r\n    Line 96: error: &#39;else&#39; without &#39;if&#39; [in MSort.java]\r\n         } else{\r\n           ^\r\n    5 errors\r\n\r\nThose all are syntactical errors. \r\n\r\nAfter that in merge function after the main for loop you write while loops in this way -\r\n\r\n \r\n\r\n    while(i &lt;= m )    \r\n                     b[c++] = a[i++];\r\n     \r\n                   while(j&lt;=h)   \r\n                     b[c++] = a[j++];\r\n\r\nhere the problem is proper indention, If you cant use proper indention then make sure you use curly braces on your code.","title":"What&#39;s wrong with this merge sort java code with user input?","body":"<p>The Errors you did in the code:</p>\n<pre><code>Finished in N/A\nLine 87: error: ']' expected [in MSort.java]\n        int a[l]=new int[n];\n              ^\nLine 87: error: ';' expected [in MSort.java]\n        int a[l]=new int[n];\n               ^\nLine 87: error: not a statement [in MSort.java]\n        int a[l]=new int[n];\n                 ^\nLine 95: error: illegal start of expression [in MSort.java]\n         if (p=l)){ System.out.println(&quot;Sorta Right&quot;);\n                 ^\nLine 96: error: 'else' without 'if' [in MSort.java]\n     } else{\n       ^\n5 errors\n</code></pre>\n<p>Those all are syntactical errors.</p>\n<p>After that in merge function after the main for loop you write while loops in this way -</p>\n<pre><code>while(i &lt;= m )    \n                 b[c++] = a[i++];\n \n               while(j&lt;=h)   \n                 b[c++] = a[j++];\n</code></pre>\n<p>here the problem is proper indention, If you cant use proper indention then make sure you use curly braces on your code.</p>\n"}],"owner":{"account_id":25178065,"reputation":1,"user_id":19019959,"display_name":"Txzi Laimi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1651575038,"creation_date":1651539185,"question_id":72093812,"body_markdown":"        int n,l;\r\n        Scanner s = new Scanner(System.in);\r\n        System.out.print(&quot;Enter number of elements in the array:&quot;);\r\n        n = s.nextInt();\r\n        int a[] = new int[n];\r\n        System.out.println(&quot;Enter &quot;+n+&quot; elements &quot;);\r\n        for( l=0; l&lt; n; l++) {\r\n            a[l] = s.nextInt();\r\n        }\r\n        \r\n        System.out.println( &quot;Enter expected position after sorting:  &quot;);\r\n        p = s.nextInt();\r\n        int a[l]=new int[n];\r\n        Sort(a,0,n-1);\r\n        printarray(p);int n,l;\r\n\r\n        \r\n       \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  \r\n https://pastebin.com/sSaCDE6v\r\n    \r\n        \r\n    \r\n\r\n&gt; Blockquote\r\n\r\n The last part of the code where I have problem, I put comment on that part to which is supposed to function. The problems 1,the comparison of two list, as the index of the 1st set of list should be store first and will use to the 2nd set of array list. 2nd is in the comment in the code.   [1] \r\n\r\n\r\n\r\n  \r\n\r\n\r\n  [1]: https://pastebin.com/sSaCDE6v","title":"What&#39;s wrong with this merge sort java code with user input?","body":"<pre><code>    int n,l;\n    Scanner s = new Scanner(System.in);\n    System.out.print(&quot;Enter number of elements in the array:&quot;);\n    n = s.nextInt();\n    int a[] = new int[n];\n    System.out.println(&quot;Enter &quot;+n+&quot; elements &quot;);\n    for( l=0; l&lt; n; l++) {\n        a[l] = s.nextInt();\n    }\n    \n    System.out.println( &quot;Enter expected position after sorting:  &quot;);\n    p = s.nextInt();\n    int a[l]=new int[n];\n    Sort(a,0,n-1);\n    printarray(p);int n,l;\n\n    \n   \n</code></pre>\n<p><a href=\"https://pastebin.com/sSaCDE6v\" rel=\"nofollow noreferrer\">https://pastebin.com/sSaCDE6v</a></p>\n<blockquote>\n<p>Blockquote</p>\n</blockquote>\n<p>The last part of the code where I have problem, I put comment on that part to which is supposed to function. The problems 1,the comparison of two list, as the index of the 1st set of list should be store first and will use to the 2nd set of array list. 2nd is in the comment in the code.   <a href=\"https://pastebin.com/sSaCDE6v\" rel=\"nofollow noreferrer\">1</a></p>\n"},{"tags":["java","unit-testing","junit","amazon-dynamodb"],"comments":[{"owner":{"account_id":250759,"reputation":9405,"user_id":2160152,"accept_rate":100,"display_name":"cheffe"},"score":2,"creation_date":1415873140,"post_id":26901613,"comment_id":42362815,"body_markdown":"As you say that you want to write unit tests - not integration tests - why not use a mock? Something like DynamoDB-mock. This one allows [to be encapsulated as library](http://ddbmock.readthedocs.org/en/latest/pages/getting_started.html#using-ddbmock-for-tests).","body":"As you say that you want to write unit tests - not integration tests - why not use a mock? Something like DynamoDB-mock. This one allows <a href=\"http://ddbmock.readthedocs.org/en/latest/pages/getting_started.html#using-ddbmock-for-tests\" rel=\"nofollow noreferrer\">to be encapsulated as library</a>."},{"owner":{"account_id":1534935,"reputation":9687,"user_id":1431244,"accept_rate":71,"display_name":"Oliver Dain"},"score":3,"creation_date":1415901474,"post_id":26901613,"comment_id":42379469,"body_markdown":"@cheffe, thanks for the thought. That appears to be exactly what I want, but it&#39;s Python, not Java so I&#39;d still have to spawn an external executable from my tests just like I&#39;m doing with DynamoDB Local (and make sure all users had the right version of Python installed, had that on their $PATH, etc.). I&#39;m looking for something very much like that, but in Java. Note that creating my own mock would be a huge task since the Dynamo API is pretty rich.","body":"@cheffe, thanks for the thought. That appears to be exactly what I want, but it&#39;s Python, not Java so I&#39;d still have to spawn an external executable from my tests just like I&#39;m doing with DynamoDB Local (and make sure all users had the right version of Python installed, had that on their $PATH, etc.). I&#39;m looking for something very much like that, but in Java. Note that creating my own mock would be a huge task since the Dynamo API is pretty rich."}],"answers":[{"tags":[],"owner":{"account_id":3992568,"reputation":49,"user_id":3290994,"display_name":"Steve Smith"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1425489803,"creation_date":1425489803,"answer_id":28860848,"question_id":26901613,"body_markdown":"For unit testing at work I use Mockito, then just mock the AmazonDynamoDBClient. then mock out the returns using when. like the following:\r\n\r\n    when(mockAmazonDynamoDBClient.getItem(isA(GetItemRequest.class))).thenAnswer(new Answer&lt;GetItemResult&gt;() {\r\n\t\t\t@Override\r\n\t\t\tpublic GetItemResult answer(InvocationOnMock invocation) throws Throwable {\r\n\t\t\t\tGetItemResult result = new GetItemResult();\r\n\t\t\t\tresult.setItem( testResultItem );\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t});\r\nnot sure if that is what your looking for but that&#39;s how we do it.","title":"Easier DynamoDB local testing","body":"<p>For unit testing at work I use Mockito, then just mock the AmazonDynamoDBClient. then mock out the returns using when. like the following:</p>\n\n<pre><code>when(mockAmazonDynamoDBClient.getItem(isA(GetItemRequest.class))).thenAnswer(new Answer&lt;GetItemResult&gt;() {\n        @Override\n        public GetItemResult answer(InvocationOnMock invocation) throws Throwable {\n            GetItemResult result = new GetItemResult();\n            result.setItem( testResultItem );\n            return result;\n        }\n    });\n</code></pre>\n\n<p>not sure if that is what your looking for but that's how we do it.</p>\n"},{"tags":[],"owner":{"account_id":1010015,"reputation":5074,"user_id":1022807,"display_name":"Alexander Patrikalakis"},"down_vote_count":1,"up_vote_count":20,"is_accepted":false,"score":19,"last_activity_date":1437194184,"creation_date":1437194184,"answer_id":31487843,"question_id":26901613,"body_markdown":"You can use DynamoDB Local as a Maven test dependency in your test code, as is shown in this [announcement][1]. You can run over HTTP:\r\n\r\n    import com.amazonaws.services.dynamodbv2.local.main.ServerRunner;\r\n    import com.amazonaws.services.dynamodbv2.local.server.DynamoDBProxyServer;\r\n\r\n    final String[] localArgs = { &quot;-inMemory&quot; };\r\n    DynamoDBProxyServer server = ServerRunner.createServerFromCommandLineArgs(localArgs);\r\n    server.start();\r\n    AmazonDynamoDB dynamodb = new AmazonDynamoDBClient();\r\n    dynamodb.setEndpoint(&quot;http://localhost:8000&quot;);\r\n    dynamodb.listTables();\r\n    server.stop();\r\n\r\nYou can also run in embedded mode:\r\n\r\n    import com.amazonaws.services.dynamodbv2.local.embedded.DynamoDBEmbedded;\r\n\r\n    AmazonDynamoDB dynamodb = DynamoDBEmbedded.create();\r\n    dynamodb.listTables();\r\n\r\n\r\n  [1]: https://forums.aws.amazon.com/ann.jspa?annID=3148","title":"Easier DynamoDB local testing","body":"<p>You can use DynamoDB Local as a Maven test dependency in your test code, as is shown in this <a href=\"https://forums.aws.amazon.com/ann.jspa?annID=3148\" rel=\"noreferrer\">announcement</a>. You can run over HTTP:</p>\n\n<pre><code>import com.amazonaws.services.dynamodbv2.local.main.ServerRunner;\nimport com.amazonaws.services.dynamodbv2.local.server.DynamoDBProxyServer;\n\nfinal String[] localArgs = { \"-inMemory\" };\nDynamoDBProxyServer server = ServerRunner.createServerFromCommandLineArgs(localArgs);\nserver.start();\nAmazonDynamoDB dynamodb = new AmazonDynamoDBClient();\ndynamodb.setEndpoint(\"http://localhost:8000\");\ndynamodb.listTables();\nserver.stop();\n</code></pre>\n\n<p>You can also run in embedded mode:</p>\n\n<pre><code>import com.amazonaws.services.dynamodbv2.local.embedded.DynamoDBEmbedded;\n\nAmazonDynamoDB dynamodb = DynamoDBEmbedded.create();\ndynamodb.listTables();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":161274,"reputation":6294,"user_id":381897,"accept_rate":100,"display_name":"bhdrkn"},"down_vote_count":0,"up_vote_count":87,"is_accepted":false,"score":87,"last_activity_date":1629361471,"creation_date":1465774062,"answer_id":37780083,"question_id":26901613,"body_markdown":"In order to use DynamoDBLocal you need to follow these steps.\r\n\r\n 1. Get Direct DynamoDBLocal Dependency\r\n 2. Get Native SQLite4Java dependencies\r\n 3. Set `sqlite4java.library.path` to show native libraries\r\n\r\n**1. Get Direct DynamoDBLocal Dependency**\r\n\r\nThis one is the easy one. You need this repository as explained  [here][1].\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;!--Dependency:--&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\r\n            &lt;artifactId&gt;DynamoDBLocal&lt;/artifactId&gt;\r\n            &lt;version&gt;1.11.0.1&lt;/version&gt;\r\n            &lt;scope&gt;&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n    &lt;!--Custom repository:--&gt;\r\n    &lt;repositories&gt;\r\n        &lt;repository&gt;\r\n            &lt;id&gt;dynamodb-local&lt;/id&gt;\r\n            &lt;name&gt;DynamoDB Local Release Repository&lt;/name&gt;\r\n            &lt;url&gt;https://s3-us-west-2.amazonaws.com/dynamodb-local/release&lt;/url&gt;\r\n        &lt;/repository&gt;\r\n    &lt;/repositories&gt;\r\n\r\n**2. Get Native SQLite4Java dependencies**\r\n\r\nIf you do not add these dependencies, your tests will fail with 500 internal error.\r\n\r\nFirst, add these dependencies:\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.almworks.sqlite4java&lt;/groupId&gt;\r\n        &lt;artifactId&gt;sqlite4java&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0.392&lt;/version&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.almworks.sqlite4java&lt;/groupId&gt;\r\n        &lt;artifactId&gt;sqlite4java-win32-x86&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0.392&lt;/version&gt;\r\n        &lt;type&gt;dll&lt;/type&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.almworks.sqlite4java&lt;/groupId&gt;\r\n        &lt;artifactId&gt;sqlite4java-win32-x64&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0.392&lt;/version&gt;\r\n        &lt;type&gt;dll&lt;/type&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.almworks.sqlite4java&lt;/groupId&gt;\r\n        &lt;artifactId&gt;libsqlite4java-osx&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0.392&lt;/version&gt;\r\n        &lt;type&gt;dylib&lt;/type&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.almworks.sqlite4java&lt;/groupId&gt;\r\n        &lt;artifactId&gt;libsqlite4java-linux-i386&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0.392&lt;/version&gt;\r\n        &lt;type&gt;so&lt;/type&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.almworks.sqlite4java&lt;/groupId&gt;\r\n        &lt;artifactId&gt;libsqlite4java-linux-amd64&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0.392&lt;/version&gt;\r\n        &lt;type&gt;so&lt;/type&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\nThen, add this plugin to get native dependencies to specific folder:\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.10&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;copy&lt;/id&gt;\r\n                        &lt;phase&gt;test-compile&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;copy-dependencies&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;includeScope&gt;test&lt;/includeScope&gt;\r\n                            &lt;includeTypes&gt;so,dll,dylib&lt;/includeTypes&gt;\r\n                            &lt;outputDirectory&gt;${project.basedir}/native-libs&lt;/outputDirectory&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n**3. Set `sqlite4java.library.path` to show native libraries**\r\n\r\nAs last step, you need to set `sqlite4java.library.path` system property to native-libs directory. It is OK to do that just before creating your local server.\r\n\r\n    System.setProperty(&quot;sqlite4java.library.path&quot;, &quot;native-libs&quot;);\r\n\r\nAfter these steps you can use DynamoDBLocal as you want. Here is a Junit rule that creates local server for that.\r\n\r\n    import com.amazonaws.auth.BasicAWSCredentials;\r\n    import com.amazonaws.services.dynamodbv2.AmazonDynamoDB;\r\n    import com.amazonaws.services.dynamodbv2.AmazonDynamoDBClient;\r\n    import com.amazonaws.services.dynamodbv2.local.main.ServerRunner;\r\n    import com.amazonaws.services.dynamodbv2.local.server.DynamoDBProxyServer;\r\n    import org.junit.rules.ExternalResource;\r\n    \r\n    import java.io.IOException;\r\n    import java.net.ServerSocket;\r\n    \r\n    /**\r\n     * Creates a local DynamoDB instance for testing.\r\n     */\r\n    public class LocalDynamoDBCreationRule extends ExternalResource {\r\n    \r\n        private DynamoDBProxyServer server;\r\n        private AmazonDynamoDB amazonDynamoDB;\r\n    \r\n        public LocalDynamoDBCreationRule() {\r\n            // This one should be copied during test-compile time. If project&#39;s basedir does not contains a folder\r\n            // named &#39;native-libs&#39; please try &#39;$ mvn clean install&#39; from command line first\r\n            System.setProperty(&quot;sqlite4java.library.path&quot;, &quot;native-libs&quot;);\r\n        }\r\n    \r\n        @Override\r\n        protected void before() throws Throwable {\r\n    \r\n            try {\r\n                final String port = getAvailablePort();\r\n                this.server = ServerRunner.createServerFromCommandLineArgs(new String[]{&quot;-inMemory&quot;, &quot;-port&quot;, port});\r\n                server.start();\r\n                amazonDynamoDB = new AmazonDynamoDBClient(new BasicAWSCredentials(&quot;access&quot;, &quot;secret&quot;));\r\n                amazonDynamoDB.setEndpoint(&quot;http://localhost:&quot; + port);\r\n            } catch (Exception e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        protected void after() {\r\n    \r\n            if (server == null) {\r\n                return;\r\n            }\r\n    \r\n            try {\r\n                server.stop();\r\n            } catch (Exception e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n    \r\n        public AmazonDynamoDB getAmazonDynamoDB() {\r\n            return amazonDynamoDB;\r\n        }\r\n    \r\n        private String getAvailablePort() {\r\n            try (final ServerSocket serverSocket = new ServerSocket(0)) {\r\n                return String.valueOf(serverSocket.getLocalPort());\r\n            } catch (IOException e) {\r\n                throw new RuntimeException(&quot;Available port was not found&quot;, e);\r\n            }\r\n        }\r\n    }\r\n\r\nYou can use this rule like this\r\n\r\n    @RunWith(JUnit4.class)\r\n    public class UserDAOImplTest {\r\n    \r\n        @ClassRule\r\n        public static final LocalDynamoDBCreationRule dynamoDB = new LocalDynamoDBCreationRule();\r\n    }\r\n\r\n  [1]: https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/DynamoDBLocal.DownloadingAndRunning.html","title":"Easier DynamoDB local testing","body":"<p>In order to use DynamoDBLocal you need to follow these steps.</p>\n<ol>\n<li>Get Direct DynamoDBLocal Dependency</li>\n<li>Get Native SQLite4Java dependencies</li>\n<li>Set <code>sqlite4java.library.path</code> to show native libraries</li>\n</ol>\n<p><strong>1. Get Direct DynamoDBLocal Dependency</strong></p>\n<p>This one is the easy one. You need this repository as explained  <a href=\"https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/DynamoDBLocal.DownloadingAndRunning.html\" rel=\"noreferrer\">here</a>.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;!--Dependency:--&gt;\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\n        &lt;artifactId&gt;DynamoDBLocal&lt;/artifactId&gt;\n        &lt;version&gt;1.11.0.1&lt;/version&gt;\n        &lt;scope&gt;&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n&lt;!--Custom repository:--&gt;\n&lt;repositories&gt;\n    &lt;repository&gt;\n        &lt;id&gt;dynamodb-local&lt;/id&gt;\n        &lt;name&gt;DynamoDB Local Release Repository&lt;/name&gt;\n        &lt;url&gt;https://s3-us-west-2.amazonaws.com/dynamodb-local/release&lt;/url&gt;\n    &lt;/repository&gt;\n&lt;/repositories&gt;\n</code></pre>\n<p><strong>2. Get Native SQLite4Java dependencies</strong></p>\n<p>If you do not add these dependencies, your tests will fail with 500 internal error.</p>\n<p>First, add these dependencies:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.almworks.sqlite4java&lt;/groupId&gt;\n    &lt;artifactId&gt;sqlite4java&lt;/artifactId&gt;\n    &lt;version&gt;1.0.392&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.almworks.sqlite4java&lt;/groupId&gt;\n    &lt;artifactId&gt;sqlite4java-win32-x86&lt;/artifactId&gt;\n    &lt;version&gt;1.0.392&lt;/version&gt;\n    &lt;type&gt;dll&lt;/type&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.almworks.sqlite4java&lt;/groupId&gt;\n    &lt;artifactId&gt;sqlite4java-win32-x64&lt;/artifactId&gt;\n    &lt;version&gt;1.0.392&lt;/version&gt;\n    &lt;type&gt;dll&lt;/type&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.almworks.sqlite4java&lt;/groupId&gt;\n    &lt;artifactId&gt;libsqlite4java-osx&lt;/artifactId&gt;\n    &lt;version&gt;1.0.392&lt;/version&gt;\n    &lt;type&gt;dylib&lt;/type&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.almworks.sqlite4java&lt;/groupId&gt;\n    &lt;artifactId&gt;libsqlite4java-linux-i386&lt;/artifactId&gt;\n    &lt;version&gt;1.0.392&lt;/version&gt;\n    &lt;type&gt;so&lt;/type&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.almworks.sqlite4java&lt;/groupId&gt;\n    &lt;artifactId&gt;libsqlite4java-linux-amd64&lt;/artifactId&gt;\n    &lt;version&gt;1.0.392&lt;/version&gt;\n    &lt;type&gt;so&lt;/type&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Then, add this plugin to get native dependencies to specific folder:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.10&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;copy&lt;/id&gt;\n                    &lt;phase&gt;test-compile&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;copy-dependencies&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;includeScope&gt;test&lt;/includeScope&gt;\n                        &lt;includeTypes&gt;so,dll,dylib&lt;/includeTypes&gt;\n                        &lt;outputDirectory&gt;${project.basedir}/native-libs&lt;/outputDirectory&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n<p><strong>3. Set <code>sqlite4java.library.path</code> to show native libraries</strong></p>\n<p>As last step, you need to set <code>sqlite4java.library.path</code> system property to native-libs directory. It is OK to do that just before creating your local server.</p>\n<pre><code>System.setProperty(&quot;sqlite4java.library.path&quot;, &quot;native-libs&quot;);\n</code></pre>\n<p>After these steps you can use DynamoDBLocal as you want. Here is a Junit rule that creates local server for that.</p>\n<pre><code>import com.amazonaws.auth.BasicAWSCredentials;\nimport com.amazonaws.services.dynamodbv2.AmazonDynamoDB;\nimport com.amazonaws.services.dynamodbv2.AmazonDynamoDBClient;\nimport com.amazonaws.services.dynamodbv2.local.main.ServerRunner;\nimport com.amazonaws.services.dynamodbv2.local.server.DynamoDBProxyServer;\nimport org.junit.rules.ExternalResource;\n\nimport java.io.IOException;\nimport java.net.ServerSocket;\n\n/**\n * Creates a local DynamoDB instance for testing.\n */\npublic class LocalDynamoDBCreationRule extends ExternalResource {\n\n    private DynamoDBProxyServer server;\n    private AmazonDynamoDB amazonDynamoDB;\n\n    public LocalDynamoDBCreationRule() {\n        // This one should be copied during test-compile time. If project's basedir does not contains a folder\n        // named 'native-libs' please try '$ mvn clean install' from command line first\n        System.setProperty(&quot;sqlite4java.library.path&quot;, &quot;native-libs&quot;);\n    }\n\n    @Override\n    protected void before() throws Throwable {\n\n        try {\n            final String port = getAvailablePort();\n            this.server = ServerRunner.createServerFromCommandLineArgs(new String[]{&quot;-inMemory&quot;, &quot;-port&quot;, port});\n            server.start();\n            amazonDynamoDB = new AmazonDynamoDBClient(new BasicAWSCredentials(&quot;access&quot;, &quot;secret&quot;));\n            amazonDynamoDB.setEndpoint(&quot;http://localhost:&quot; + port);\n        } catch (Exception e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    @Override\n    protected void after() {\n\n        if (server == null) {\n            return;\n        }\n\n        try {\n            server.stop();\n        } catch (Exception e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    public AmazonDynamoDB getAmazonDynamoDB() {\n        return amazonDynamoDB;\n    }\n\n    private String getAvailablePort() {\n        try (final ServerSocket serverSocket = new ServerSocket(0)) {\n            return String.valueOf(serverSocket.getLocalPort());\n        } catch (IOException e) {\n            throw new RuntimeException(&quot;Available port was not found&quot;, e);\n        }\n    }\n}\n</code></pre>\n<p>You can use this rule like this</p>\n<pre><code>@RunWith(JUnit4.class)\npublic class UserDAOImplTest {\n\n    @ClassRule\n    public static final LocalDynamoDBCreationRule dynamoDB = new LocalDynamoDBCreationRule();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1685845,"reputation":19120,"user_id":1549165,"accept_rate":100,"display_name":"Ashan"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1468062798,"creation_date":1468062798,"answer_id":38281210,"question_id":26901613,"body_markdown":"There are couple of node.js wrappers for DynamoDB Local. These allows to easily execute unit tests combining with task runners like gulp or grunt. Try [dynamodb-localhost][1],\r\n[dynamodb-local][2]\r\n\r\n\r\n  [1]: https://www.npmjs.com/package/dynamodb-localhost\r\n  [2]: https://www.npmjs.com/package/dynamodb-local","title":"Easier DynamoDB local testing","body":"<p>There are couple of node.js wrappers for DynamoDB Local. These allows to easily execute unit tests combining with task runners like gulp or grunt. Try <a href=\"https://www.npmjs.com/package/dynamodb-localhost\" rel=\"nofollow\">dynamodb-localhost</a>,\n<a href=\"https://www.npmjs.com/package/dynamodb-local\" rel=\"nofollow\">dynamodb-local</a></p>\n"},{"tags":[],"owner":{"account_id":2423823,"reputation":4011,"user_id":2116213,"display_name":"Jeffery Grajkowski"},"down_vote_count":1,"up_vote_count":21,"is_accepted":false,"score":20,"last_activity_date":1536764426,"creation_date":1471889933,"answer_id":39086207,"question_id":26901613,"body_markdown":"This is a restating of bhdrkn&#39;s answer for Gradle users (his is based on Maven).  It&#39;s still the same three steps:\r\n\r\n&gt; 1. Get Direct DynamoDBLocal Dependency\r\n&gt; 2. Get Native SQLite4Java dependencies\r\n&gt; 3. Set sqlite4java.library.path to show native libraries\r\n\r\n# 1. Get Direct DynamoDBLocal Dependency\r\n\r\nAdd to the dependencies section of your build.gradle file...\r\n\r\n&lt;!-- language: lang-groovy --&gt;\r\n\r\n    dependencies {\r\n        testCompile &quot;com.amazonaws:DynamoDBLocal:1.+&quot;\r\n    }\r\n\r\n# 2. Get Native SQLite4Java dependencies\r\n\r\nThe sqlite4java libraries will already be downloaded as a dependency of DynamoDBLocal, but the library files need to be copied to the right place.  Add to your build.gradle file...\r\n\r\n&lt;!-- language: lang-groovy --&gt;\r\n\r\n    task copyNativeDeps(type: Copy) {\r\n        from(configurations.compile + configurations.testCompile) {\r\n            include &#39;*.dll&#39;\r\n            include &#39;*.dylib&#39;\r\n            include &#39;*.so&#39;\r\n        }\r\n        into &#39;build/libs&#39;\r\n    }\r\n\r\n# 3. Set sqlite4java.library.path to show native libraries\r\n\r\nWe need to tell Gradle to run `copyNativeDeps` for testing and tell sqlite4java where to find the files.  Add to your build.gradle file...\r\n\r\n&lt;!-- language: lang-groovy --&gt;\r\n\r\n    test {\r\n        dependsOn copyNativeDeps\r\n        systemProperty &quot;java.library.path&quot;, &#39;build/libs&#39;\r\n    }\r\n","title":"Easier DynamoDB local testing","body":"<p>This is a restating of bhdrkn's answer for Gradle users (his is based on Maven).  It's still the same three steps:</p>\n\n<blockquote>\n  <ol>\n  <li>Get Direct DynamoDBLocal Dependency</li>\n  <li>Get Native SQLite4Java dependencies</li>\n  <li>Set sqlite4java.library.path to show native libraries</li>\n  </ol>\n</blockquote>\n\n<h1>1. Get Direct DynamoDBLocal Dependency</h1>\n\n<p>Add to the dependencies section of your build.gradle file...</p>\n\n<pre class=\"lang-groovy prettyprint-override\"><code>dependencies {\n    testCompile \"com.amazonaws:DynamoDBLocal:1.+\"\n}\n</code></pre>\n\n<h1>2. Get Native SQLite4Java dependencies</h1>\n\n<p>The sqlite4java libraries will already be downloaded as a dependency of DynamoDBLocal, but the library files need to be copied to the right place.  Add to your build.gradle file...</p>\n\n<pre class=\"lang-groovy prettyprint-override\"><code>task copyNativeDeps(type: Copy) {\n    from(configurations.compile + configurations.testCompile) {\n        include '*.dll'\n        include '*.dylib'\n        include '*.so'\n    }\n    into 'build/libs'\n}\n</code></pre>\n\n<h1>3. Set sqlite4java.library.path to show native libraries</h1>\n\n<p>We need to tell Gradle to run <code>copyNativeDeps</code> for testing and tell sqlite4java where to find the files.  Add to your build.gradle file...</p>\n\n<pre class=\"lang-groovy prettyprint-override\"><code>test {\n    dependsOn copyNativeDeps\n    systemProperty \"java.library.path\", 'build/libs'\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":52748,"reputation":14581,"user_id":157672,"accept_rate":86,"display_name":"Michael Lloyd Lee mlk"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1536764336,"creation_date":1499980592,"answer_id":45091040,"question_id":26901613,"body_markdown":"I have wrapped the answers above into two [JUnit rules][1] that does not require changes to the build script as the rules handles the native library stuff. I did this as I found that Idea did not like the Gradle/Maven solutions as it just went off and did its own thing anyhoos.\r\n\r\nThis means the steps are:\r\n\r\n* Get the AssortmentOfJUnitRules version 1.5.32 or above dependency \r\n* Get the Direct DynamoDBLocal dependency\r\n* Add the LocalDynamoDbRule or HttpDynamoDbRule to your JUnit test.\r\n\r\n\r\n**Maven:** \r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;!--Dependency:--&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\r\n            &lt;artifactId&gt;DynamoDBLocal&lt;/artifactId&gt;\r\n            &lt;version&gt;1.11.0.1&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;com.github.mlk&lt;/groupId&gt;\r\n          &lt;artifactId&gt;assortmentofjunitrules&lt;/artifactId&gt;\r\n          &lt;version&gt;1.5.36&lt;/version&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n    &lt;!--Custom repository:--&gt;\r\n    &lt;repositories&gt;\r\n        &lt;repository&gt;\r\n            &lt;id&gt;dynamodb-local&lt;/id&gt;\r\n            &lt;name&gt;DynamoDB Local Release Repository&lt;/name&gt;\r\n            &lt;url&gt;https://s3-us-west-2.amazonaws.com/dynamodb-local/release&lt;/url&gt;\r\n        &lt;/repository&gt;\r\n    &lt;/repositories&gt;\r\n\r\n**Gradle:**\r\n\r\n\r\n    repositories {\r\n      mavenCentral()\r\n\r\n       maven {\r\n        url = &quot;https://s3-us-west-2.amazonaws.com/dynamodb-local/release&quot;\r\n      }\r\n    }\r\n\r\n    dependencies {\r\n        testCompile &quot;com.github.mlk:assortmentofjunitrules:1.5.36&quot;\r\n        testCompile &quot;com.amazonaws:DynamoDBLocal:1.+&quot;\r\n    }\r\n\r\n\r\n**Code:**\r\n\r\n    public class LocalDynamoDbRuleTest {\r\n      @Rule\r\n      public LocalDynamoDbRule ddb = new LocalDynamoDbRule();\r\n    \r\n      @Test\r\n      public void test() {\r\n        doDynamoStuff(ddb.getClient());\r\n      }\r\n    }\r\n\r\n  [1]: https://github.com/mlk/AssortmentOfJUnitRules/blob/master/README.md#localdynamodbrule\r\n\r\n\r\n","title":"Easier DynamoDB local testing","body":"<p>I have wrapped the answers above into two <a href=\"https://github.com/mlk/AssortmentOfJUnitRules/blob/master/README.md#localdynamodbrule\" rel=\"nofollow noreferrer\">JUnit rules</a> that does not require changes to the build script as the rules handles the native library stuff. I did this as I found that Idea did not like the Gradle/Maven solutions as it just went off and did its own thing anyhoos.</p>\n\n<p>This means the steps are:</p>\n\n<ul>\n<li>Get the AssortmentOfJUnitRules version 1.5.32 or above dependency </li>\n<li>Get the Direct DynamoDBLocal dependency</li>\n<li>Add the LocalDynamoDbRule or HttpDynamoDbRule to your JUnit test.</li>\n</ul>\n\n<p><strong>Maven:</strong> </p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;!--Dependency:--&gt;\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\n        &lt;artifactId&gt;DynamoDBLocal&lt;/artifactId&gt;\n        &lt;version&gt;1.11.0.1&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.github.mlk&lt;/groupId&gt;\n      &lt;artifactId&gt;assortmentofjunitrules&lt;/artifactId&gt;\n      &lt;version&gt;1.5.36&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n&lt;!--Custom repository:--&gt;\n&lt;repositories&gt;\n    &lt;repository&gt;\n        &lt;id&gt;dynamodb-local&lt;/id&gt;\n        &lt;name&gt;DynamoDB Local Release Repository&lt;/name&gt;\n        &lt;url&gt;https://s3-us-west-2.amazonaws.com/dynamodb-local/release&lt;/url&gt;\n    &lt;/repository&gt;\n&lt;/repositories&gt;\n</code></pre>\n\n<p><strong>Gradle:</strong></p>\n\n<pre><code>repositories {\n  mavenCentral()\n\n   maven {\n    url = \"https://s3-us-west-2.amazonaws.com/dynamodb-local/release\"\n  }\n}\n\ndependencies {\n    testCompile \"com.github.mlk:assortmentofjunitrules:1.5.36\"\n    testCompile \"com.amazonaws:DynamoDBLocal:1.+\"\n}\n</code></pre>\n\n<p><strong>Code:</strong></p>\n\n<pre><code>public class LocalDynamoDbRuleTest {\n  @Rule\n  public LocalDynamoDbRule ddb = new LocalDynamoDbRule();\n\n  @Test\n  public void test() {\n    doDynamoStuff(ddb.getClient());\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1600325,"reputation":3347,"user_id":1481475,"accept_rate":52,"display_name":"Michael Coxon"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1524348225,"creation_date":1524347247,"answer_id":49960490,"question_id":26901613,"body_markdown":"I have found that the amazon repo as no index file, so does not seem to function in a way that allows you to bring it in like this:\r\n\r\n    maven {\r\n       url = &quot;https://s3-us-west-2.amazonaws.com/dynamodb-local/release&quot;\r\n    }\r\n\r\nThe only way I could get the dependencies to load is by downloading DynamoDbLocal as a jar and bringing it into my build script like this:\r\n\r\n    dependencies {\r\n        ...\r\n        runtime files(&#39;libs/DynamoDBLocal.jar&#39;)\r\n        ...\r\n    }\r\n\r\nOf course this means that all the SQLite and Jetty dependencies need to be brought in by hand - I&#39;m still trying to get this right. If anyone knows of a reliable repo for DynamoDbLocal, I would really love to know.","title":"Easier DynamoDB local testing","body":"<p>I have found that the amazon repo as no index file, so does not seem to function in a way that allows you to bring it in like this:</p>\n\n<pre><code>maven {\n   url = \"https://s3-us-west-2.amazonaws.com/dynamodb-local/release\"\n}\n</code></pre>\n\n<p>The only way I could get the dependencies to load is by downloading DynamoDbLocal as a jar and bringing it into my build script like this:</p>\n\n<pre><code>dependencies {\n    ...\n    runtime files('libs/DynamoDBLocal.jar')\n    ...\n}\n</code></pre>\n\n<p>Of course this means that all the SQLite and Jetty dependencies need to be brought in by hand - I'm still trying to get this right. If anyone knows of a reliable repo for DynamoDbLocal, I would really love to know.</p>\n"},{"tags":[],"owner":{"account_id":390441,"reputation":32048,"user_id":750510,"accept_rate":98,"display_name":"madhead"},"down_vote_count":1,"up_vote_count":27,"is_accepted":false,"score":26,"last_activity_date":1651574980,"creation_date":1543778375,"answer_id":53583725,"question_id":26901613,"body_markdown":"In August 2018 [Amazon announced](https://aws.amazon.com/about-aws/whats-new/2018/08/use-amazon-dynamodb-local-more-easily-with-the-new-docker-image/) new [Docker image](https://hub.docker.com/r/amazon/dynamodb-local/) with Amazon DynamoDB Local onboard. It does not require downloading and running any JARs as well as adding using third-party OS-specific binaries (I&#39;m talking about `sqlite4java`).\r\n\r\nIt is as simple as starting a Docker container before the tests:\r\n\r\n    docker run -p 8000:8000 amazon/dynamodb-local\r\n\r\nYou can do that manually for local development, as described above, or use it in your CI pipeline. Many CI services provide an ability to start additional containers during the pipeline that can provide dependencies for your tests. Here is an example for Gitlab CI/CD:\r\n\r\n    test:\r\n      stage: test\r\n      image: openjdk:8-alpine\r\n      services:\r\n        - name: amazon/dynamodb-local\r\n          alias: dynamodb-local\r\n      script:\r\n        - DYNAMODB_LOCAL_URL=http://dynamodb-local:8000 ./gradlew clean test\r\n\r\nOr Bitbucket Pipelines:\r\n\r\n    definitions:\r\n      services:\r\n        dynamodb-local:\r\n          image: amazon/dynamodb-local\r\n    \r\n    step:\r\n      name: test\r\n      image:\r\n        name: openjdk:8-alpine\r\n      services:\r\n        - dynamodb-local\r\n      script:\r\n        - DYNAMODB_LOCAL_URL=http://localhost:8000 ./gradlew clean test\r\n\r\nAnd so on. The idea is to move all the configuration you can see in [other](https://stackoverflow.com/a/37780083/750510) [answers](https://stackoverflow.com/a/39086207/750510) out of your build tool and provide the dependency externally. Think of it as of dependency injection / IoC but for the whole service, not just a single bean.\r\n\r\nAfter you&#39;ve started the container you can create a client pointing to it:\r\n\r\n    private AmazonDynamoDB createAmazonDynamoDB(final DynamoDBLocal configuration) {\r\n        return AmazonDynamoDBClientBuilder\r\n            .standard()\r\n            .withEndpointConfiguration(\r\n                new AwsClientBuilder.EndpointConfiguration(\r\n                    &quot;http://localhost:8000&quot;,\r\n                    Regions.US_EAST_1.getName()\r\n                )\r\n            )\r\n            .withCredentials(\r\n                new AWSStaticCredentialsProvider(\r\n                    // DynamoDB Local works with any non-null credentials\r\n                    new BasicAWSCredentials(&quot;&quot;, &quot;&quot;)\r\n                )\r\n            )\r\n            .build();\r\n    }\r\n\r\nNow to the original questions:\r\n\r\n&gt; You have to somehow start the server before your tests run\r\n\r\nYou can just start it manually, or prepare a developsers&#39; script for it. IDEs usually provide a way to run arbitrary commands before executing a task, so you can [make IDE](https://www.jetbrains.com/help/idea/run-debug-configuration-junit.html#before-launch-options) to start the container for you. I think that running something locally should not be a top priority in this case, but instead you should focus on configuring CI and let the developers start the container as it&#39;s comfortable to them.\r\n\r\n&gt;The server isn&#39;t started and stopped before each test so tests become inter-dependent unless you add code to delete all tables, etc. after each test\r\n\r\nThat&#39;s trueee, but You should not start and stop such heavyweight things \r\nand recreate tables before / after each test. DB tests are almost always inter-dependent and that&#39;s ok for them. Just use unique  values for each test case (e.g. set item&#39;s hash key to ticket id / specific test case id you&#39;re working on). As for the seed data, I&#39;d recommend moving it from the build tool and test code as well. Either make your own image with all the data you need or use AWS CLI to create tables and insert data. Follow the single responsibility principle and dependency injection principles: your test code must not do anything but tests. All the environment (tables and data in this case should be provided for them). Creating a table in a test is wrong, because in a real life that table already exist (unless you&#39;re testing a method that actually creates a table, of course).\r\n\r\n&gt;All developers need to have it installed\r\n\r\nDocker should be a must for every developer in 2018, so that&#39;s not a problem.\r\n\r\n----------\r\n\r\nAnd if you&#39;re using JUnit 5, it can be a good idea to use a [DynamoDB Local extension](https://github.com/madhead/aws-junit5) that will inject the client in your tests (yes, I&#39;m doing a self-promotion):\r\n\r\n 1. Add a dependency on `me.madhead.aws-junit5:dynamo-v1`\r\n\r\n    *pom.xml*:\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;me.madhead.aws-junit5&lt;/groupId&gt;\r\n            &lt;artifactId&gt;dynamo-v1&lt;/artifactId&gt;\r\n            &lt;version&gt;6.0.1&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n    *build.gradle*\r\n\r\n        dependencies {\r\n            testImplementation(&quot;me.madhead.aws-junit5:dynamo-v1:6.0.1&quot;)\r\n        }\r\n\r\n 1. Use the extension in your tests:\r\n\r\n        @ExtendWith(DynamoDBLocalExtension.class)\r\n        class MultipleInjectionsTest {\r\n            @DynamoDBLocal(\r\n                url = &quot;http://dynamodb-local-1:8000&quot;\r\n            )\r\n            private AmazonDynamoDB first;\r\n\r\n            @DynamoDBLocal(\r\n                urlEnvironmentVariable = &quot;DYNAMODB_LOCAL_URL&quot;\r\n            )\r\n            private AmazonDynamoDB second;\r\n\r\n            @Test\r\n            void test() {\r\n                first.listTables();\r\n                second.listTables();\r\n            }\r\n        }","title":"Easier DynamoDB local testing","body":"<p>In August 2018 <a href=\"https://aws.amazon.com/about-aws/whats-new/2018/08/use-amazon-dynamodb-local-more-easily-with-the-new-docker-image/\" rel=\"nofollow noreferrer\">Amazon announced</a> new <a href=\"https://hub.docker.com/r/amazon/dynamodb-local/\" rel=\"nofollow noreferrer\">Docker image</a> with Amazon DynamoDB Local onboard. It does not require downloading and running any JARs as well as adding using third-party OS-specific binaries (I'm talking about <code>sqlite4java</code>).</p>\n<p>It is as simple as starting a Docker container before the tests:</p>\n<pre><code>docker run -p 8000:8000 amazon/dynamodb-local\n</code></pre>\n<p>You can do that manually for local development, as described above, or use it in your CI pipeline. Many CI services provide an ability to start additional containers during the pipeline that can provide dependencies for your tests. Here is an example for Gitlab CI/CD:</p>\n<pre><code>test:\n  stage: test\n  image: openjdk:8-alpine\n  services:\n    - name: amazon/dynamodb-local\n      alias: dynamodb-local\n  script:\n    - DYNAMODB_LOCAL_URL=http://dynamodb-local:8000 ./gradlew clean test\n</code></pre>\n<p>Or Bitbucket Pipelines:</p>\n<pre><code>definitions:\n  services:\n    dynamodb-local:\n      image: amazon/dynamodb-local\n\nstep:\n  name: test\n  image:\n    name: openjdk:8-alpine\n  services:\n    - dynamodb-local\n  script:\n    - DYNAMODB_LOCAL_URL=http://localhost:8000 ./gradlew clean test\n</code></pre>\n<p>And so on. The idea is to move all the configuration you can see in <a href=\"https://stackoverflow.com/a/37780083/750510\">other</a> <a href=\"https://stackoverflow.com/a/39086207/750510\">answers</a> out of your build tool and provide the dependency externally. Think of it as of dependency injection / IoC but for the whole service, not just a single bean.</p>\n<p>After you've started the container you can create a client pointing to it:</p>\n<pre><code>private AmazonDynamoDB createAmazonDynamoDB(final DynamoDBLocal configuration) {\n    return AmazonDynamoDBClientBuilder\n        .standard()\n        .withEndpointConfiguration(\n            new AwsClientBuilder.EndpointConfiguration(\n                &quot;http://localhost:8000&quot;,\n                Regions.US_EAST_1.getName()\n            )\n        )\n        .withCredentials(\n            new AWSStaticCredentialsProvider(\n                // DynamoDB Local works with any non-null credentials\n                new BasicAWSCredentials(&quot;&quot;, &quot;&quot;)\n            )\n        )\n        .build();\n}\n</code></pre>\n<p>Now to the original questions:</p>\n<blockquote>\n<p>You have to somehow start the server before your tests run</p>\n</blockquote>\n<p>You can just start it manually, or prepare a developsers' script for it. IDEs usually provide a way to run arbitrary commands before executing a task, so you can <a href=\"https://www.jetbrains.com/help/idea/run-debug-configuration-junit.html#before-launch-options\" rel=\"nofollow noreferrer\">make IDE</a> to start the container for you. I think that running something locally should not be a top priority in this case, but instead you should focus on configuring CI and let the developers start the container as it's comfortable to them.</p>\n<blockquote>\n<p>The server isn't started and stopped before each test so tests become inter-dependent unless you add code to delete all tables, etc. after each test</p>\n</blockquote>\n<p>That's trueee, but You should not start and stop such heavyweight things\nand recreate tables before / after each test. DB tests are almost always inter-dependent and that's ok for them. Just use unique  values for each test case (e.g. set item's hash key to ticket id / specific test case id you're working on). As for the seed data, I'd recommend moving it from the build tool and test code as well. Either make your own image with all the data you need or use AWS CLI to create tables and insert data. Follow the single responsibility principle and dependency injection principles: your test code must not do anything but tests. All the environment (tables and data in this case should be provided for them). Creating a table in a test is wrong, because in a real life that table already exist (unless you're testing a method that actually creates a table, of course).</p>\n<blockquote>\n<p>All developers need to have it installed</p>\n</blockquote>\n<p>Docker should be a must for every developer in 2018, so that's not a problem.</p>\n<hr />\n<p>And if you're using JUnit 5, it can be a good idea to use a <a href=\"https://github.com/madhead/aws-junit5\" rel=\"nofollow noreferrer\">DynamoDB Local extension</a> that will inject the client in your tests (yes, I'm doing a self-promotion):</p>\n<ol>\n<li><p>Add a dependency on <code>me.madhead.aws-junit5:dynamo-v1</code></p>\n<p><em>pom.xml</em>:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;me.madhead.aws-junit5&lt;/groupId&gt;\n    &lt;artifactId&gt;dynamo-v1&lt;/artifactId&gt;\n    &lt;version&gt;6.0.1&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><em>build.gradle</em></p>\n<pre><code>dependencies {\n    testImplementation(&quot;me.madhead.aws-junit5:dynamo-v1:6.0.1&quot;)\n}\n</code></pre>\n</li>\n<li><p>Use the extension in your tests:</p>\n<pre><code>@ExtendWith(DynamoDBLocalExtension.class)\nclass MultipleInjectionsTest {\n    @DynamoDBLocal(\n        url = &quot;http://dynamodb-local-1:8000&quot;\n    )\n    private AmazonDynamoDB first;\n\n    @DynamoDBLocal(\n        urlEnvironmentVariable = &quot;DYNAMODB_LOCAL_URL&quot;\n    )\n    private AmazonDynamoDB second;\n\n    @Test\n    void test() {\n        first.listTables();\n        second.listTables();\n    }\n}\n</code></pre>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":17450915,"reputation":452,"user_id":12650909,"display_name":"Sandeep Lakdawala"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1578840537,"creation_date":1578837765,"answer_id":59704584,"question_id":26901613,"body_markdown":"You could also use this lightweight test container &#39;Dynalite&#39;\r\n\r\nhttps://www.testcontainers.org/modules/databases/dynalite/\r\n\r\nFrom testcontainers:  \r\n\r\n&gt; Dynalite is a clone of DynamoDB, enabling local testing. It&#39;s light\r\n&gt; and quick to run.\r\n\r\n","title":"Easier DynamoDB local testing","body":"<p>You could also use this lightweight test container 'Dynalite'</p>\n\n<p><a href=\"https://www.testcontainers.org/modules/databases/dynalite/\" rel=\"nofollow noreferrer\">https://www.testcontainers.org/modules/databases/dynalite/</a></p>\n\n<p>From testcontainers:  </p>\n\n<blockquote>\n  <p>Dynalite is a clone of DynamoDB, enabling local testing. It's light\n  and quick to run.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1217837,"reputation":4578,"user_id":1185087,"display_name":"user1185087"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1611824594,"creation_date":1611758621,"answer_id":65921434,"question_id":26901613,"body_markdown":"**Shortest** solution with fix for `sqlite4java.SQLiteException UnsatisfiedLinkError` if it is a java/kotlin project built with gradle (a changed `$PATH` is **not** needed). \r\n\r\n    repositories {\r\n        // ... other dependencies\r\n        maven { url &#39;https://s3-us-west-2.amazonaws.com/dynamodb-local/release&#39; } \r\n    }\r\n\r\n    dependencies {\r\n        testImplementation(&quot;com.amazonaws:DynamoDBLocal:1.13.6&quot;)\r\n    }\r\n    \r\n    import org.gradle.internal.os.OperatingSystem\r\n    test {\r\n        doFirst {\r\n            // Fix for: UnsatisfiedLinkError -&gt; provide a valid native lib path\r\n            String nativePrefix = OperatingSystem.current().nativePrefix\r\n            File nativeLib = sourceSets.test.runtimeClasspath.files.find {it.name.startsWith(&quot;libsqlite4java&quot;) &amp;&amp; it.name.contains(nativePrefix) } as File\r\n            systemProperty &quot;sqlite4java.library.path&quot;, nativeLib.parent\r\n        }\r\n    }\r\n\r\nStraightforward usage in test classes (`src/test`):\r\n    \r\n    private lateinit var db: AmazonDynamoDBLocal\r\n\r\n    @BeforeAll\r\n    fun runDb() { db = DynamoDBEmbedded.create() }\r\n\r\n    @AfterAll\r\n    fun shutdownDb() { db.shutdown() }","title":"Easier DynamoDB local testing","body":"<p><strong>Shortest</strong> solution with fix for <code>sqlite4java.SQLiteException UnsatisfiedLinkError</code> if it is a java/kotlin project built with gradle (a changed <code>$PATH</code> is <strong>not</strong> needed).</p>\n<pre><code>repositories {\n    // ... other dependencies\n    maven { url 'https://s3-us-west-2.amazonaws.com/dynamodb-local/release' } \n}\n\ndependencies {\n    testImplementation(&quot;com.amazonaws:DynamoDBLocal:1.13.6&quot;)\n}\n\nimport org.gradle.internal.os.OperatingSystem\ntest {\n    doFirst {\n        // Fix for: UnsatisfiedLinkError -&gt; provide a valid native lib path\n        String nativePrefix = OperatingSystem.current().nativePrefix\n        File nativeLib = sourceSets.test.runtimeClasspath.files.find {it.name.startsWith(&quot;libsqlite4java&quot;) &amp;&amp; it.name.contains(nativePrefix) } as File\n        systemProperty &quot;sqlite4java.library.path&quot;, nativeLib.parent\n    }\n}\n</code></pre>\n<p>Straightforward usage in test classes (<code>src/test</code>):</p>\n<pre><code>private lateinit var db: AmazonDynamoDBLocal\n\n@BeforeAll\nfun runDb() { db = DynamoDBEmbedded.create() }\n\n@AfterAll\nfun shutdownDb() { db.shutdown() }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5288328,"reputation":51,"user_id":4221568,"display_name":"Zhixuan Lai"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1625249678,"creation_date":1625241335,"answer_id":68228201,"question_id":26901613,"body_markdown":"Try out [tempest-testing](https://cashapp.github.io/tempest/guide/testing/)! It ships a JUnit4 Rule and a JUnit5 Extension. It also supports both AWS SDK v1 and SDK v2.\r\n\r\nTempest provides a library for testing DynamoDB clients\r\nusing [DynamoDBLocal](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/DynamoDBLocal.html)\r\n. It comes with two implementations:\r\n\r\n- **JVM:** This is the preferred option, running a `DynamoDBProxyServer` backed by `sqlite4java`,\r\n  which is available on [most platforms](https://github.com/cashapp/tempest/blob/24beb08b2be88d3666b5b64879618d01771b529a/tempest-testing-jvm/src/main/kotlin/app/cash/tempest/testing/JvmDynamoDbServer.kt#L66).\r\n- **Docker:** This runs [dynamodb-local](https://hub.docker.com/r/amazon/dynamodb-local) in a Docker\r\n  container.\r\n\r\nFeature matrix:\r\n\r\nFeature         |tempest-testing-jvm        |tempest-testing-docker\r\n----------------|---------------------------|----------------------\r\nStart up time   |~1s                        |~10s\r\nMemory usage    |Less                       |More\r\nDependency      |sqlite4java native library |Docker\r\n\r\n\r\nTo use `tempest-testing`, first add this library as a test dependency:\r\n\r\nFor AWS SDK 1.x:\r\n\r\n```groovy\r\ndependencies {\r\n  testImplementation &quot;app.cash.tempest:tempest-testing-jvm:1.5.2&quot;\r\n  testImplementation &quot;app.cash.tempest:tempest-testing-junit5:1.5.2&quot;\r\n}\r\n// Or\r\ndependencies {\r\n  testImplementation &quot;app.cash.tempest:tempest-testing-docker:1.5.2&quot;\r\n  testImplementation &quot;app.cash.tempest:tempest-testing-junit5:1.5.2&quot;\r\n}\r\n```\r\n\r\nFor AWS SDK 2.x:\r\n\r\n```groovy\r\ndependencies {\r\n  testImplementation &quot;app.cash.tempest:tempest2-testing-jvm:1.5.2&quot;\r\n  testImplementation &quot;app.cash.tempest:tempest2-testing-junit5:1.5.2&quot;\r\n}\r\n// Or\r\ndependencies {\r\n  testImplementation &quot;app.cash.tempest:tempest2-testing-docker:1.5.2&quot;\r\n  testImplementation &quot;app.cash.tempest:tempest2-testing-junit5:1.5.2&quot;\r\n}\r\n```\r\n\r\nThen in tests annotated with `@org.junit.jupiter.api.Test`, you may add `TestDynamoDb` as a test\r\n[extension](https://junit.org/junit5/docs/current/user-guide/#extensions). This extension spins up a\r\nDynamoDB server. It shares the server across tests and keeps it running until the process exits. It\r\nalso manages test tables for you, recreating them before each test.\r\n\r\n\r\n```java\r\nclass MyTest {\r\n  @RegisterExtension\r\n  TestDynamoDb db = new TestDynamoDb.Builder(JvmDynamoDbServer.Factory.INSTANCE) // or DockerDynamoDbServer\r\n      // `MusicItem` is annotated with `@DynamoDBTable`. Tempest recreates this table before each test.\r\n      .addTable(TestTable.create(MusicItem.TABLE_NAME, MusicItem.class))\r\n      .build();\r\n\r\n  @Test\r\n  public void test() {\r\n    PutItemRequest request = // ...;\r\n    // Talk to the local DynamoDB.\r\n    db.dynamoDb().putItem(request);\r\n  }\r\n\r\n}\r\n```","title":"Easier DynamoDB local testing","body":"<p>Try out <a href=\"https://cashapp.github.io/tempest/guide/testing/\" rel=\"nofollow noreferrer\">tempest-testing</a>! It ships a JUnit4 Rule and a JUnit5 Extension. It also supports both AWS SDK v1 and SDK v2.</p>\n<p>Tempest provides a library for testing DynamoDB clients\nusing <a href=\"https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/DynamoDBLocal.html\" rel=\"nofollow noreferrer\">DynamoDBLocal</a>\n. It comes with two implementations:</p>\n<ul>\n<li><strong>JVM:</strong> This is the preferred option, running a <code>DynamoDBProxyServer</code> backed by <code>sqlite4java</code>,\nwhich is available on <a href=\"https://github.com/cashapp/tempest/blob/24beb08b2be88d3666b5b64879618d01771b529a/tempest-testing-jvm/src/main/kotlin/app/cash/tempest/testing/JvmDynamoDbServer.kt#L66\" rel=\"nofollow noreferrer\">most platforms</a>.</li>\n<li><strong>Docker:</strong> This runs <a href=\"https://hub.docker.com/r/amazon/dynamodb-local\" rel=\"nofollow noreferrer\">dynamodb-local</a> in a Docker\ncontainer.</li>\n</ul>\n<p>Feature matrix:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Feature</th>\n<th>tempest-testing-jvm</th>\n<th>tempest-testing-docker</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Start up time</td>\n<td>~1s</td>\n<td>~10s</td>\n</tr>\n<tr>\n<td>Memory usage</td>\n<td>Less</td>\n<td>More</td>\n</tr>\n<tr>\n<td>Dependency</td>\n<td>sqlite4java native library</td>\n<td>Docker</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>To use <code>tempest-testing</code>, first add this library as a test dependency:</p>\n<p>For AWS SDK 1.x:</p>\n<pre><code>dependencies {\n  testImplementation &quot;app.cash.tempest:tempest-testing-jvm:1.5.2&quot;\n  testImplementation &quot;app.cash.tempest:tempest-testing-junit5:1.5.2&quot;\n}\n// Or\ndependencies {\n  testImplementation &quot;app.cash.tempest:tempest-testing-docker:1.5.2&quot;\n  testImplementation &quot;app.cash.tempest:tempest-testing-junit5:1.5.2&quot;\n}\n</code></pre>\n<p>For AWS SDK 2.x:</p>\n<pre><code>dependencies {\n  testImplementation &quot;app.cash.tempest:tempest2-testing-jvm:1.5.2&quot;\n  testImplementation &quot;app.cash.tempest:tempest2-testing-junit5:1.5.2&quot;\n}\n// Or\ndependencies {\n  testImplementation &quot;app.cash.tempest:tempest2-testing-docker:1.5.2&quot;\n  testImplementation &quot;app.cash.tempest:tempest2-testing-junit5:1.5.2&quot;\n}\n</code></pre>\n<p>Then in tests annotated with <code>@org.junit.jupiter.api.Test</code>, you may add <code>TestDynamoDb</code> as a test\n<a href=\"https://junit.org/junit5/docs/current/user-guide/#extensions\" rel=\"nofollow noreferrer\">extension</a>. This extension spins up a\nDynamoDB server. It shares the server across tests and keeps it running until the process exits. It\nalso manages test tables for you, recreating them before each test.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class MyTest {\n  @RegisterExtension\n  TestDynamoDb db = new TestDynamoDb.Builder(JvmDynamoDbServer.Factory.INSTANCE) // or DockerDynamoDbServer\n      // `MusicItem` is annotated with `@DynamoDBTable`. Tempest recreates this table before each test.\n      .addTable(TestTable.create(MusicItem.TABLE_NAME, MusicItem.class))\n      .build();\n\n  @Test\n  public void test() {\n    PutItemRequest request = // ...;\n    // Talk to the local DynamoDB.\n    db.dynamoDb().putItem(request);\n  }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7164076,"reputation":9426,"user_id":5473824,"display_name":"Adrian Baker"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1630605870,"creation_date":1630604473,"answer_id":69034936,"question_id":26901613,"body_markdown":"&gt;It seems like there should be an easier way. DynamoDB Local is, after all, just Java code. Can&#39;t I somehow ask the JVM to fork itself and look inside the resources to build a classpath?\r\n\r\nYou can do something along these lines, but much simpler: programmatically search the classpath for the location of the native libraries, then set the `sqlite4java.library.path` property before starting DynamoDB. This is the approach implemented in [tempest-testing][1], as well as in [this answer][2] ([code here)][3] which is why they just work as pure library/classpath dependency and nothing more.\r\n\r\nIn my case needed access to DynamoDB outside of a JUnit extension, but I still wanted something self-contained in library code, so I extracted the approach it takes:\r\n\r\n    import com.amazonaws.services.dynamodbv2.local.embedded.DynamoDBEmbedded;\r\n    import com.amazonaws.services.dynamodbv2.local.shared.access.AmazonDynamoDBLocal;\r\n    import com.google.common.collect.MoreCollectors;\r\n    import java.io.File;\r\n    import java.util.Arrays;\r\n    import java.util.stream.Stream;\r\n    import org.junit.jupiter.api.condition.OS;\r\n   \r\n    ... \r\n    \r\n      public AmazonDynamoDBLocal embeddedDynamoDb() {\r\n        final OS os = Stream.of(OS.values()).filter(OS::isCurrentOs)\r\n            .collect(MoreCollectors.onlyElement());\r\n        final String prefix;\r\n        switch (os) {\r\n          case LINUX:\r\n            prefix = &quot;libsqlite4java-linux-amd64-&quot;;\r\n            break;\r\n          case MAC:\r\n            prefix = &quot;libsqlite4java-osx-&quot;;\r\n            break;\r\n          case WINDOWS:\r\n            prefix = &quot;sqlite4java-win32-x64-&quot;;\r\n            break;\r\n          default:\r\n            throw new UnsupportedOperationException(os.toString());\r\n        }\r\n      \r\n        System.setProperty(&quot;sqlite4java.library.path&quot;,\r\n            Arrays.asList(System.getProperty(&quot;java.class.path&quot;).split(File.pathSeparator))\r\n                .stream()\r\n                .map(File::new)\r\n                .filter(file -&gt; file.getName().startsWith(prefix))\r\n                .collect(MoreCollectors.onlyElement())\r\n                .getParent());\r\n        return DynamoDBEmbedded.create();\r\n      }\r\n\r\nNot had a chance to test on a lot of platforms, and the error handling could likely be improved.\r\n\r\nIt&#39;s a pity AWS haven&#39;t taken the time to make the library more friendly, as this could easily be done in the library code itself. \r\n\r\n\r\n  [1]: https://github.com/cashapp/tempest/blob/master/tempest2-testing-jvm/src/main/kotlin/app/cash/tempest2/testing/JvmDynamoDbServer.kt\r\n  [2]: https://stackoverflow.com/a/45091040/5473824\r\n  [3]: https://github.com/mlk/AssortmentOfJUnitRules/blob/master/src/main/java/com/github/mlk/junit/rules/NativeLibraryRule.java","title":"Easier DynamoDB local testing","body":"<blockquote>\n<p>It seems like there should be an easier way. DynamoDB Local is, after all, just Java code. Can't I somehow ask the JVM to fork itself and look inside the resources to build a classpath?</p>\n</blockquote>\n<p>You can do something along these lines, but much simpler: programmatically search the classpath for the location of the native libraries, then set the <code>sqlite4java.library.path</code> property before starting DynamoDB. This is the approach implemented in <a href=\"https://github.com/cashapp/tempest/blob/master/tempest2-testing-jvm/src/main/kotlin/app/cash/tempest2/testing/JvmDynamoDbServer.kt\" rel=\"nofollow noreferrer\">tempest-testing</a>, as well as in <a href=\"https://stackoverflow.com/a/45091040/5473824\">this answer</a> (<a href=\"https://github.com/mlk/AssortmentOfJUnitRules/blob/master/src/main/java/com/github/mlk/junit/rules/NativeLibraryRule.java\" rel=\"nofollow noreferrer\">code here)</a> which is why they just work as pure library/classpath dependency and nothing more.</p>\n<p>In my case needed access to DynamoDB outside of a JUnit extension, but I still wanted something self-contained in library code, so I extracted the approach it takes:</p>\n<pre><code>import com.amazonaws.services.dynamodbv2.local.embedded.DynamoDBEmbedded;\nimport com.amazonaws.services.dynamodbv2.local.shared.access.AmazonDynamoDBLocal;\nimport com.google.common.collect.MoreCollectors;\nimport java.io.File;\nimport java.util.Arrays;\nimport java.util.stream.Stream;\nimport org.junit.jupiter.api.condition.OS;\n\n... \n\n  public AmazonDynamoDBLocal embeddedDynamoDb() {\n    final OS os = Stream.of(OS.values()).filter(OS::isCurrentOs)\n        .collect(MoreCollectors.onlyElement());\n    final String prefix;\n    switch (os) {\n      case LINUX:\n        prefix = &quot;libsqlite4java-linux-amd64-&quot;;\n        break;\n      case MAC:\n        prefix = &quot;libsqlite4java-osx-&quot;;\n        break;\n      case WINDOWS:\n        prefix = &quot;sqlite4java-win32-x64-&quot;;\n        break;\n      default:\n        throw new UnsupportedOperationException(os.toString());\n    }\n  \n    System.setProperty(&quot;sqlite4java.library.path&quot;,\n        Arrays.asList(System.getProperty(&quot;java.class.path&quot;).split(File.pathSeparator))\n            .stream()\n            .map(File::new)\n            .filter(file -&gt; file.getName().startsWith(prefix))\n            .collect(MoreCollectors.onlyElement())\n            .getParent());\n    return DynamoDBEmbedded.create();\n  }\n</code></pre>\n<p>Not had a chance to test on a lot of platforms, and the error handling could likely be improved.</p>\n<p>It's a pity AWS haven't taken the time to make the library more friendly, as this could easily be done in the library code itself.</p>\n"},{"tags":[],"owner":{"account_id":2256125,"reputation":1387,"user_id":2172566,"display_name":"forresthopkinsa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648947045,"creation_date":1648947045,"answer_id":71722197,"question_id":26901613,"body_markdown":"The DynamoDB Gradle dependency **already includes** the SQLite libraries. You can pretty easily instruct the Java runtime to use it in your Gradle build script. Here&#39;s my `build.gradle.kts` as an example:\r\n\r\n```lang-kotlin\r\nimport org.apache.tools.ant.taskdefs.condition.Os\r\n\r\nplugins {\r\n    application\r\n}\r\n\r\nrepositories {\r\n    mavenCentral()\r\n    maven {\r\n        url = uri(&quot;https://s3-us-west-2.amazonaws.com/dynamodb-local/release&quot;)\r\n    }\r\n}\r\n\r\ndependencies {\r\n    implementation(&quot;com.amazonaws:DynamoDBLocal:[1.12,2.0)&quot;)\r\n}\r\n\r\nfun getSqlitePath(): String? {\r\n    val dirName = when {\r\n        Os.isFamily(Os.FAMILY_MAC) -&gt; &quot;libsqlite4java-osx&quot;\r\n        Os.isFamily(Os.FAMILY_UNIX) -&gt; &quot;libsqlite4java-linux-amd64&quot;\r\n        Os.isFamily(Os.FAMILY_WINDOWS) -&gt; &quot;sqlite4java-win32-x64&quot;\r\n        else -&gt; throw kotlin.Exception(&quot;DynamoDB emulator cannot run on this platform&quot;)\r\n    }\r\n    return project.configurations.runtimeClasspath.get().find { it.name.contains(dirName) }?.parent\r\n}\r\n\r\napplication {\r\n    mainClass.set(&quot;com.amazonaws.services.dynamodbv2.local.main.ServerRunner&quot;)\r\n    applicationDefaultJvmArgs = listOf(&quot;-Djava.library.path=${getSqlitePath()}&quot;)\r\n}\r\n\r\ntasks.named&lt;JavaExec&gt;(&quot;run&quot;) {\r\n    args(&quot;-inMemory&quot;)\r\n}\r\n\r\n```","title":"Easier DynamoDB local testing","body":"<p>The DynamoDB Gradle dependency <strong>already includes</strong> the SQLite libraries. You can pretty easily instruct the Java runtime to use it in your Gradle build script. Here's my <code>build.gradle.kts</code> as an example:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>import org.apache.tools.ant.taskdefs.condition.Os\n\nplugins {\n    application\n}\n\nrepositories {\n    mavenCentral()\n    maven {\n        url = uri(&quot;https://s3-us-west-2.amazonaws.com/dynamodb-local/release&quot;)\n    }\n}\n\ndependencies {\n    implementation(&quot;com.amazonaws:DynamoDBLocal:[1.12,2.0)&quot;)\n}\n\nfun getSqlitePath(): String? {\n    val dirName = when {\n        Os.isFamily(Os.FAMILY_MAC) -&gt; &quot;libsqlite4java-osx&quot;\n        Os.isFamily(Os.FAMILY_UNIX) -&gt; &quot;libsqlite4java-linux-amd64&quot;\n        Os.isFamily(Os.FAMILY_WINDOWS) -&gt; &quot;sqlite4java-win32-x64&quot;\n        else -&gt; throw kotlin.Exception(&quot;DynamoDB emulator cannot run on this platform&quot;)\n    }\n    return project.configurations.runtimeClasspath.get().find { it.name.contains(dirName) }?.parent\n}\n\napplication {\n    mainClass.set(&quot;com.amazonaws.services.dynamodbv2.local.main.ServerRunner&quot;)\n    applicationDefaultJvmArgs = listOf(&quot;-Djava.library.path=${getSqlitePath()}&quot;)\n}\n\ntasks.named&lt;JavaExec&gt;(&quot;run&quot;) {\n    args(&quot;-inMemory&quot;)\n}\n\n</code></pre>\n"}],"owner":{"account_id":1534935,"reputation":9687,"user_id":1431244,"accept_rate":71,"display_name":"Oliver Dain"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":93431,"favorite_count":0,"down_vote_count":0,"up_vote_count":79,"answer_count":13,"score":79,"last_activity_date":1651574980,"creation_date":1415854624,"question_id":26901613,"body_markdown":"I&#39;m using [DynamoDB local][1] for unit testing. It&#39;s not bad, but has some drawbacks. Specifically:\r\n\r\n* You have to somehow start the server before your tests run\r\n* The server isn&#39;t started and stopped before each test so tests become inter-dependent unless you add code to delete all tables, etc. after each test\r\n* All developers need to have it installed\r\n\r\nWhat I want to do is something like put the DynamoDB local jar, and the other jars upon which it depends, in my `test/resources` directory (I&#39;m writing in Java). Then before each test I&#39;d start it up, running with `-inMemory`, and after the test I&#39;d stop it. That way anyone pulling down the git repo gets a copy of everything they need to run the tests and each test is independent of the others.\r\n\r\nI have found a way to make this work, but it&#39;s ugly, so I&#39;m looking for alternatives. The solution I have is to put a .zip file of the DynamoDB local stuff in `test/resources`, then in the `@Before` method, I&#39;d extract it to some temporary directory and start a new java process to execute it. That works, but it&#39;s ugly and has some drawbacks:\r\n\r\n* Everyone needs the java executable on their `$PATH`\r\n* I have to unpack a zip to the local disk. Using local disk is often dicey for testing, especially with continuous builds and such.\r\n* I have to spawn a process and wait for it to start for each unit test, and then kill that process after each test. Besides being slow, the potential for left-over processes seems ugly.\r\n\r\nIt seems like there should be an easier way. DynamoDB Local is, after all, just Java code. Can&#39;t I somehow ask the JVM to fork itself and look inside the resources to build a classpath? Or, even better, can&#39;t I just call the `main` method of DynamoDB Local from some other thread so this all happens in a single process? Any ideas?\r\n\r\nPS: I am aware of Alternator, but it appears to have other drawbacks so I&#39;m inclined to stick with Amazon&#39;s supported solution if I can make it work.\r\n\r\n\r\n  [1]: http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Tools.DynamoDBLocal.html","title":"Easier DynamoDB local testing","body":"<p>I'm using <a href=\"http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Tools.DynamoDBLocal.html\" rel=\"noreferrer\">DynamoDB local</a> for unit testing. It's not bad, but has some drawbacks. Specifically:</p>\n\n<ul>\n<li>You have to somehow start the server before your tests run</li>\n<li>The server isn't started and stopped before each test so tests become inter-dependent unless you add code to delete all tables, etc. after each test</li>\n<li>All developers need to have it installed</li>\n</ul>\n\n<p>What I want to do is something like put the DynamoDB local jar, and the other jars upon which it depends, in my <code>test/resources</code> directory (I'm writing in Java). Then before each test I'd start it up, running with <code>-inMemory</code>, and after the test I'd stop it. That way anyone pulling down the git repo gets a copy of everything they need to run the tests and each test is independent of the others.</p>\n\n<p>I have found a way to make this work, but it's ugly, so I'm looking for alternatives. The solution I have is to put a .zip file of the DynamoDB local stuff in <code>test/resources</code>, then in the <code>@Before</code> method, I'd extract it to some temporary directory and start a new java process to execute it. That works, but it's ugly and has some drawbacks:</p>\n\n<ul>\n<li>Everyone needs the java executable on their <code>$PATH</code></li>\n<li>I have to unpack a zip to the local disk. Using local disk is often dicey for testing, especially with continuous builds and such.</li>\n<li>I have to spawn a process and wait for it to start for each unit test, and then kill that process after each test. Besides being slow, the potential for left-over processes seems ugly.</li>\n</ul>\n\n<p>It seems like there should be an easier way. DynamoDB Local is, after all, just Java code. Can't I somehow ask the JVM to fork itself and look inside the resources to build a classpath? Or, even better, can't I just call the <code>main</code> method of DynamoDB Local from some other thread so this all happens in a single process? Any ideas?</p>\n\n<p>PS: I am aware of Alternator, but it appears to have other drawbacks so I'm inclined to stick with Amazon's supported solution if I can make it work.</p>\n"},{"tags":["java","junit","mockito","powermock","powermockito"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":1,"creation_date":1651572006,"post_id":72097693,"comment_id":127389765,"body_markdown":"You can&#39;t. And using `this` to call a method in the same class is just poor style. Everyone knows it&#39;s calling a method in the same class, you&#39;re adding useless information.","body":"You can&#39;t. And using <code>this</code> to call a method in the same class is just poor style. Everyone knows it&#39;s calling a method in the same class, you&#39;re adding useless information."},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":1,"creation_date":1651572871,"post_id":72097693,"comment_id":127390023,"body_markdown":"No, adding `this` is useless info. It&#39;s against Java code style and is extra clutter. As for you to accomplish your task, you may need to refactor your code to be more testable.","body":"No, adding <code>this</code> is useless info. It&#39;s against Java code style and is extra clutter. As for you to accomplish your task, you may need to refactor your code to be more testable."},{"owner":{"account_id":16425473,"reputation":1,"user_id":11865643,"display_name":"Nainesh Goel"},"score":0,"creation_date":1651573112,"post_id":72097693,"comment_id":127390094,"body_markdown":"gotcha! It was actually a legacy code and I was supposed to add test cases for it.","body":"gotcha! It was actually a legacy code and I was supposed to add test cases for it."},{"owner":{"display_name":"user1373996"},"score":0,"creation_date":1651582876,"post_id":72097693,"comment_id":127393399,"body_markdown":"@NaineshGoel feel free to refactor legacy code, that should be an easy fix.","body":"@NaineshGoel feel free to refactor legacy code, that should be an easy fix."}],"answers":[{"tags":[],"owner":{"account_id":6475519,"reputation":4496,"user_id":5014221,"accept_rate":71,"display_name":"Ashish Patil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651574976,"creation_date":1651574976,"answer_id":72098320,"question_id":72097693,"body_markdown":"If refactoring is not possible as mentioned in comments then one alternative is to use `spy` for your `DispenseRuleLogic` in your test class:\r\n\r\n    @Mock\r\n    DispenseRuleLogic dispenseRuleLogic;\r\n\r\nThen in your test method :\r\n   \r\n     dispenseRuleLogic =spy(DispenseRuleLogic.class);\r\n     ..\r\n  \r\n    when(dispenseRuleLogic.getAllocationCodeList(..)).thenReturn(allocationCodeList); //returning code list.\r\n               when(dispenseRuleLogic.getAllocationAccessRulePin(..)).thenReturn(Booleam.TRUE); // retuning true when test calls this method.\r\n                ..\r\n                dispenseRuleLogic.getAccessRuleSelect(..) //test actual method","title":"Unit Test For methods using this this keyword in function","body":"<p>If refactoring is not possible as mentioned in comments then one alternative is to use <code>spy</code> for your <code>DispenseRuleLogic</code> in your test class:</p>\n<pre><code>@Mock\nDispenseRuleLogic dispenseRuleLogic;\n</code></pre>\n<p>Then in your test method :</p>\n<pre><code> dispenseRuleLogic =spy(DispenseRuleLogic.class);\n ..\n\nwhen(dispenseRuleLogic.getAllocationCodeList(..)).thenReturn(allocationCodeList); //returning code list.\n           when(dispenseRuleLogic.getAllocationAccessRulePin(..)).thenReturn(Booleam.TRUE); // retuning true when test calls this method.\n            ..\n            dispenseRuleLogic.getAccessRuleSelect(..) //test actual method\n</code></pre>\n"}],"owner":{"account_id":16425473,"reputation":1,"user_id":11865643,"display_name":"Nainesh Goel"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":746,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1651574976,"creation_date":1651571761,"question_id":72097693,"body_markdown":"**I wanted to know how to write unit test cases for methods involving this keyword.**&lt;br/&gt;&lt;br/&gt;\r\n\r\nDispenseRuleLogic contains these two methods in which one is calling another function using this keyword. So I wanted to know how to create a stub for the line calling another inbuilt method.&lt;br/&gt;\r\nI have included the code , the test case and the error.\r\nClass name : DispenseRuleLogic&lt;br/&gt;&lt;hr&gt;\r\nHere is the method for which I want the test case to be written.\r\n\r\n    public boolean getAccessRuleSelect(String companyId) {\r\n\t\tboolean pinFlag = false;\r\n\t\tAllocationCode ac = new AllocationCode();\r\n\t\tac.setCompanyId(companyId);\r\n\t\tVector alCode = this.getAllocationCodeList(ac);\r\n\t\tAllocationAccessRule aar = new AllocationAccessRule();\r\n\t\tfor (int i = 0; i &lt; alCode.size(); i++) {\r\n\t\t\taar.setAllocationCodeId(((AllocationCode) alCode.get(i))\r\n\t\t\t\t\t.getAllocationCodeId());\r\n\r\n       //here this refers to DispenseRuleLogic\r\n\t\t\tif (this.getAllocationAccessRulePin(aar)) {\r\n\t\t\t\tpinFlag = true;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn pinFlag;\r\n\t}\r\n&lt;hr/&gt;\r\nWhat I have tried:\r\n\r\n    @Test\r\n\tpublic void testGetAccessRuleSelect() throws Exception {\r\n\t\t// given\r\n\t\tboolean expected = true;\r\n\t\tVector&lt;AllocationCode&gt; allocationCodeList = new Vector&lt;&gt;();\r\n\t\tAllocationCode allocationCodeMock = mock(AllocationCode.class);\r\n\t\tallocationCodeMock.setCompanyId(comId);\r\n\t\tallocationCodeList.add(allocationCodeMock);\r\n\r\n\t\tDispenseRuleLogic dispenseRuleLogic = new DispenseRuleLogic(dao);\r\n\t\tPowerMockito.whenNew(DispenseRuleLogic.class).withAnyArguments().thenReturn(dispenseRuleLogic);\r\n\t\tPowerMockito.when(DispenseRuleLogic.class, &quot;getAllocationAccessRulePin&quot;, any(AllocationAccessRule.class)).thenReturn(true);\r\n        //DispenseRuleLogic is the name of the class for which case is being written \r\n\t\t\r\n        // when\r\n    \tboolean actual_result = dispenseRuleLogic.getAccessRuleSelect(comId);\r\n\r\n\t\t// then\r\n\t\tassertEquals(expected, actual_result);\r\n\t}\r\n\r\n&lt;hr/&gt;\r\nError i am getting is:\r\n\r\n    java.lang.IllegalArgumentException: object is not an instance of declaring class\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.powermock.reflect.internal.WhiteboxImpl.performMethodInvocation(WhiteboxImpl.java:1899)\r\n\tat org.powermock.reflect.internal.WhiteboxImpl.doInvokeMethod(WhiteboxImpl.java:801)\r\n\tat org.powermock.reflect.internal.WhiteboxImpl.invokeMethod(WhiteboxImpl.java:781)\r\n\tat org.powermock.reflect.Whitebox.invokeMethod(Whitebox.java:466)\r\n\tat org.powermock.api.mockito.PowerMockito.when(PowerMockito.java:474)\r\n\tat apex.web.action.account.DispenseRuleLogicTest.testGetAccessRuleSelect(DispenseRuleLogicTest.java:815)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.junit.internal.runners.TestMethod.invoke(TestMethod.java:68)\r\n\tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:316)\r\n\tat org.junit.internal.runners.MethodRoadie$2.run(MethodRoadie.java:89)\r\n\tat org.junit.internal.runners.MethodRoadie.runBeforesThenTestThenAfters(MethodRoadie.java:97)\r\n\tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.executeTest(PowerMockJUnit44RunnerDelegateImpl.java:300)\r\n\tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.executeTestInSuper(PowerMockJUnit47RunnerDelegateImpl.java:131)\r\n\tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.access$100(PowerMockJUnit47RunnerDelegateImpl.java:59)\r\n\tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner$TestExecutorStatement.evaluate(PowerMockJUnit47RunnerDelegateImpl.java:147)\r\n\tat org.mockito.internal.junit.JUnitRule$1.evaluate(JUnitRule.java:16)\r\n\tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.evaluateStatement(PowerMockJUnit47RunnerDelegateImpl.java:107)\r\n\tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.executeTest(PowerMockJUnit47RunnerDelegateImpl.java:82)\r\n\tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runBeforesThenTestThenAfters(PowerMockJUnit44RunnerDelegateImpl.java:288)\r\n\tat org.junit.internal.runners.MethodRoadie.runTest(MethodRoadie.java:87)\r\n\tat org.junit.internal.runners.MethodRoadie.run(MethodRoadie.java:50)\r\n\tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.invokeTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:208)\r\n\tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.runMethods(PowerMockJUnit44RunnerDelegateImpl.java:147)\r\n\tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$1.run(PowerMockJUnit44RunnerDelegateImpl.java:121)\r\n\tat org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:34)\r\n\tat org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:44)\r\n\tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.run(PowerMockJUnit44RunnerDelegateImpl.java:123)\r\n\tat org.powermock.modules.junit4.common.internal.impl.JUnit4TestSuiteChunkerImpl.run(JUnit4TestSuiteChunkerImpl.java:121)\r\n\tat org.powermock.modules.junit4.common.internal.impl.AbstractCommonPowerMockRunner.run(AbstractCommonPowerMockRunner.java:53)\r\n\tat org.powermock.modules.junit4.PowerMockRunner.run(PowerMockRunner.java:59)\r\n\tat org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:93)\r\n\tat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:40)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:529)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:756)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:452)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:210)\r\n\r\n\r\n","title":"Unit Test For methods using this this keyword in function","body":"<p><strong>I wanted to know how to write unit test cases for methods involving this keyword.</strong><br/><br/></p>\n<p>DispenseRuleLogic contains these two methods in which one is calling another function using this keyword. So I wanted to know how to create a stub for the line calling another inbuilt method.<br/>\nI have included the code , the test case and the error.\nClass name : DispenseRuleLogic<br/><hr>\nHere is the method for which I want the test case to be written.</p>\n<pre><code>public boolean getAccessRuleSelect(String companyId) {\n    boolean pinFlag = false;\n    AllocationCode ac = new AllocationCode();\n    ac.setCompanyId(companyId);\n    Vector alCode = this.getAllocationCodeList(ac);\n    AllocationAccessRule aar = new AllocationAccessRule();\n    for (int i = 0; i &lt; alCode.size(); i++) {\n        aar.setAllocationCodeId(((AllocationCode) alCode.get(i))\n                .getAllocationCodeId());\n\n   //here this refers to DispenseRuleLogic\n        if (this.getAllocationAccessRulePin(aar)) {\n            pinFlag = true;\n            break;\n        }\n    }\n    return pinFlag;\n}\n</code></pre>\n<hr/>\nWhat I have tried:\n<pre><code>@Test\npublic void testGetAccessRuleSelect() throws Exception {\n    // given\n    boolean expected = true;\n    Vector&lt;AllocationCode&gt; allocationCodeList = new Vector&lt;&gt;();\n    AllocationCode allocationCodeMock = mock(AllocationCode.class);\n    allocationCodeMock.setCompanyId(comId);\n    allocationCodeList.add(allocationCodeMock);\n\n    DispenseRuleLogic dispenseRuleLogic = new DispenseRuleLogic(dao);\n    PowerMockito.whenNew(DispenseRuleLogic.class).withAnyArguments().thenReturn(dispenseRuleLogic);\n    PowerMockito.when(DispenseRuleLogic.class, &quot;getAllocationAccessRulePin&quot;, any(AllocationAccessRule.class)).thenReturn(true);\n    //DispenseRuleLogic is the name of the class for which case is being written \n    \n    // when\n    boolean actual_result = dispenseRuleLogic.getAccessRuleSelect(comId);\n\n    // then\n    assertEquals(expected, actual_result);\n}\n</code></pre>\n<hr/>\nError i am getting is:\n<pre><code>java.lang.IllegalArgumentException: object is not an instance of declaring class\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:498)\nat org.powermock.reflect.internal.WhiteboxImpl.performMethodInvocation(WhiteboxImpl.java:1899)\nat org.powermock.reflect.internal.WhiteboxImpl.doInvokeMethod(WhiteboxImpl.java:801)\nat org.powermock.reflect.internal.WhiteboxImpl.invokeMethod(WhiteboxImpl.java:781)\nat org.powermock.reflect.Whitebox.invokeMethod(Whitebox.java:466)\nat org.powermock.api.mockito.PowerMockito.when(PowerMockito.java:474)\nat apex.web.action.account.DispenseRuleLogicTest.testGetAccessRuleSelect(DispenseRuleLogicTest.java:815)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:498)\nat org.junit.internal.runners.TestMethod.invoke(TestMethod.java:68)\nat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:316)\nat org.junit.internal.runners.MethodRoadie$2.run(MethodRoadie.java:89)\nat org.junit.internal.runners.MethodRoadie.runBeforesThenTestThenAfters(MethodRoadie.java:97)\nat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.executeTest(PowerMockJUnit44RunnerDelegateImpl.java:300)\nat org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.executeTestInSuper(PowerMockJUnit47RunnerDelegateImpl.java:131)\nat org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.access$100(PowerMockJUnit47RunnerDelegateImpl.java:59)\nat org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner$TestExecutorStatement.evaluate(PowerMockJUnit47RunnerDelegateImpl.java:147)\nat org.mockito.internal.junit.JUnitRule$1.evaluate(JUnitRule.java:16)\nat org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.evaluateStatement(PowerMockJUnit47RunnerDelegateImpl.java:107)\nat org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.executeTest(PowerMockJUnit47RunnerDelegateImpl.java:82)\nat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runBeforesThenTestThenAfters(PowerMockJUnit44RunnerDelegateImpl.java:288)\nat org.junit.internal.runners.MethodRoadie.runTest(MethodRoadie.java:87)\nat org.junit.internal.runners.MethodRoadie.run(MethodRoadie.java:50)\nat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.invokeTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:208)\nat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.runMethods(PowerMockJUnit44RunnerDelegateImpl.java:147)\nat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$1.run(PowerMockJUnit44RunnerDelegateImpl.java:121)\nat org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:34)\nat org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:44)\nat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.run(PowerMockJUnit44RunnerDelegateImpl.java:123)\nat org.powermock.modules.junit4.common.internal.impl.JUnit4TestSuiteChunkerImpl.run(JUnit4TestSuiteChunkerImpl.java:121)\nat org.powermock.modules.junit4.common.internal.impl.AbstractCommonPowerMockRunner.run(AbstractCommonPowerMockRunner.java:53)\nat org.powermock.modules.junit4.PowerMockRunner.run(PowerMockRunner.java:59)\nat org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:93)\nat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:40)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:529)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:756)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:452)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:210)\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1324952,"reputation":5977,"user_id":1270000,"accept_rate":100,"display_name":"sorifiend"},"score":0,"creation_date":1651544394,"post_id":72094181,"comment_id":127384135,"body_markdown":"You can not read from and write to the same file at the same time. You either need to read the whole file first and then write it by moving the FileWriter code to be after the scanner is closed, or you need to write to a different file and replace the old one with the new one once it&#39;s closed.","body":"You can not read from and write to the same file at the same time. You either need to read the whole file first and then write it by moving the FileWriter code to be after the scanner is closed, or you need to write to a different file and replace the old one with the new one once it&#39;s closed."},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1651575147,"post_id":72094181,"comment_id":127390720,"body_markdown":"@sorifiend Or use RandomAccessFile.","body":"@sorifiend Or use RandomAccessFile."},{"owner":{"account_id":732315,"reputation":4996,"user_id":681444,"display_name":"racraman"},"score":1,"creation_date":1651578413,"post_id":72094181,"comment_id":127391718,"body_markdown":"Yes, RandomAccessFile is the way to go.  One thing too mention in case you werent are - what if instead of adding 1 you add 901 - that makes the value that you will want to write is 1001, which is one character LONGER than the 100 that you are overwriting.  If your application allows that, that is something you will have to deal with - what you will probably want to do is shift the rest of the file by that one character, and that is something YOU will have to do (read the rest of the file, write the 1001 then writing the rest of that file); no libraries will do that for you.","body":"Yes, RandomAccessFile is the way to go.  One thing too mention in case you werent are - what if instead of adding 1 you add 901 - that makes the value that you will want to write is 1001, which is one character LONGER than the 100 that you are overwriting.  If your application allows that, that is something you will have to deal with - what you will probably want to do is shift the rest of the file by that one character, and that is something YOU will have to do (read the rest of the file, write the 1001 then writing the rest of that file); no libraries will do that for you."}],"owner":{"account_id":18012566,"reputation":1,"user_id":13091817,"display_name":"mike mane"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1651575122,"answer_count":0,"score":0,"last_activity_date":1651574959,"creation_date":1651543896,"question_id":72094181,"body_markdown":"I&#39;m trying to update a value in a text file. In my text file I have the value 100 which I&#39;m trying to add 1 too. Whenever I run the code though, it doesn&#39;t print anything or write into the text file.\r\n\r\n```\r\npublic static void main(String[] args) throws IOException {  \r\n    try {\r\n      File myObj = new File(&quot;C:\\\\Users\\\\proto\\\\OneDrive\\\\Documents\\\\atmDep.txt&quot;);\r\n      Scanner myReader = new Scanner(myObj);  \r\n      FileWriter myWriter = new FileWriter(&quot;C:\\\\Users\\\\proto\\\\OneDrive\\\\Documents\\\\atmDep.txt&quot;);\r\n      while (myReader.hasNextLine()) {\r\n        int data = myReader.nextInt();\r\n        \r\n        int num = 1;\r\n        myWriter.write(data + num);\r\n        System.out.println(data);\r\n        \r\n      }\r\n      myReader.close();\r\n    } catch (FileNotFoundException e) {\r\n      System.out.println(&quot;An error occurred.&quot;);\r\n      e.printStackTrace();\r\n    }\r\n```\r\n","title":"How to update a value in a text file","body":"<p>I'm trying to update a value in a text file. In my text file I have the value 100 which I'm trying to add 1 too. Whenever I run the code though, it doesn't print anything or write into the text file.</p>\n<pre><code>public static void main(String[] args) throws IOException {  \n    try {\n      File myObj = new File(&quot;C:\\\\Users\\\\proto\\\\OneDrive\\\\Documents\\\\atmDep.txt&quot;);\n      Scanner myReader = new Scanner(myObj);  \n      FileWriter myWriter = new FileWriter(&quot;C:\\\\Users\\\\proto\\\\OneDrive\\\\Documents\\\\atmDep.txt&quot;);\n      while (myReader.hasNextLine()) {\n        int data = myReader.nextInt();\n        \n        int num = 1;\n        myWriter.write(data + num);\n        System.out.println(data);\n        \n      }\n      myReader.close();\n    } catch (FileNotFoundException e) {\n      System.out.println(&quot;An error occurred.&quot;);\n      e.printStackTrace();\n    }\n</code></pre>\n"},{"tags":["java","android","paypal","integration","braintree"],"answers":[{"tags":[],"owner":{"account_id":25182002,"reputation":1,"user_id":19023409,"display_name":"Park Bo Young"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651574721,"creation_date":1651574721,"answer_id":72098273,"question_id":54221312,"body_markdown":"This works for me, try to remove this one \r\n`implementation &quot;com.braintreepayments.api:braintree:$braintree_version&quot;`\r\n\r\n[This is the solution i gained from ][1]\r\n\r\n\r\n  [1]: https://github.com/braintree/braintree-android-drop-in/issues/191","title":"Braintree Integration - Error: Class not found: com.braintreepayments.api.dropin.DropInRequest","body":"<p>This works for me, try to remove this one\n<code>implementation &quot;com.braintreepayments.api:braintree:$braintree_version&quot;</code></p>\n<p><a href=\"https://github.com/braintree/braintree-android-drop-in/issues/191\" rel=\"nofollow noreferrer\">This is the solution i gained from </a></p>\n"}],"owner":{"account_id":15045291,"reputation":61,"user_id":10858661,"display_name":"Janis Hoff&#228;ller"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":989,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1651574721,"creation_date":1547655990,"question_id":54221312,"body_markdown":"so we are currently trying to integrate Braintree in our Android App in Sandbox Environment. We have set up a server with WAMP, which is generating a client token. That is working. \r\nHowever, when we are trying to start the payment the following error message appears in logcat:\r\n\r\n&quot;E/Parcel: Class not found when unmarshalling: com.braintreepayments.api.dropin.DropInRequest\r\njava.lang.ClassNotFoundException: com.braintreepayments.api.dropin.DropInRequest&quot;\r\n\r\nThe app does not perfom any actions. The error is weird, as we added the dependencies to the gradle file and the intent filter to the manifest. I will attach a screenshot of the error message, the complete code and the PHP code to this request.\r\n\r\nWe don&#39;t know what to do.\r\nPlease help. Thank you.\r\n\r\n\r\n\r\nGradle File:\r\n\r\n    implementation &#39;com.braintreepayments.api:drop-in:3.7.1&#39;\r\n    implementation &#39;com.loopj.android:android-async-http:1.4.9&#39;\r\n    implementation &#39;com.android.volley:volley:1.1.0&#39;\r\n    implementation &#39;com.google.code.gson:gson:2.8.5&#39;\r\n    implementation &#39;junit:junit:4.12&#39;\r\n    implementation &#39;com.android.support:multidex:1.0.1&#39;\r\n\r\nManifest:\r\n\r\n     &lt;activity android:name=&quot;com.braintreepayments.api.BraintreeBrowserSwitchActivity&quot;\r\n            android:launchMode=&quot;singleTask&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.VIEW&quot; /&gt;\r\n                &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\r\n                &lt;category android:name=&quot;android.intent.category.BROWSABLE&quot; /&gt;\r\n                &lt;data android:scheme=&quot;${applicationId}.braintree&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n\r\nRelevant Code\r\n    \r\n    essenBes&#228;tigenBtn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n                submitPayment();\r\n         }\r\n    });\r\n\r\n    private void submitPayment() {\r\n        DropInRequest dropInRequest = new DropInRequest()\r\n                .clientToken(clientToken);\r\n        startActivityForResult(dropInRequest.getIntent(this), BRAINTREE_REQUEST_CODE);\r\n    }\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        if (requestCode == BRAINTREE_REQUEST_CODE) {\r\n            if (resultCode == RESULT_OK) {\r\n                DropInResult result = data.getParcelableExtra(DropInResult.EXTRA_DROP_IN_RESULT);\r\n                PaymentMethodNonce nonce = result.getPaymentMethodNonce();\r\n                String strNonce = nonce.getNonce();\r\n\r\n                if (anzahlPortionen.getText().toString().isEmpty()) {\r\n                    anzahlPortionen.setError(&quot;Bitte gib eine Anzahl an Portionen an&quot;);\r\n                } else if (preisRechner.getText().toString().equals(&quot;0&quot;)) {\r\n                    Toast.makeText(EssenActivity.this, &quot;Bitte berechne den Gesamtpreis vorher&quot;, Toast.LENGTH_SHORT).show();\r\n                } else if (ungef&#228;hreAnkunft.getText().toString().equals(&quot;Wann ist deine ungef&#228;hre Ankunft?&quot;)) {\r\n                    ungef&#228;hreAnkunft.requestFocus();\r\n                    ungef&#228;hreAnkunft.setError(&quot;Bite gib deine ungef&#228;hre Ankunft an&quot;);\r\n                } else\r\n                    irwas = preisRechner.getText().toString();\r\n                amountB = irwas.replace(&quot;&quot;, &quot;&quot;);\r\n                paramsHash = new HashMap&lt;&gt;();\r\n                paramsHash.put(&quot;amount&quot;, amountB);\r\n                paramsHash.put(&quot;nonce&quot;, strNonce);\r\n\r\n                sendPayments();\r\n                {\r\n                }\r\n            } else if (resultCode == RESULT_CANCELED) {\r\n                Toast.makeText(EssenActivity.this, &quot;Benutzer hat abgebrochen&quot;, Toast.LENGTH_SHORT).show();\r\n            } else {\r\n                Exception error = (Exception) data.getSerializableExtra(DropInActivity.EXTRA_ERROR);\r\n                Toast.makeText(EssenActivity.this, error.toString(), Toast.LENGTH_SHORT).show();\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    private void sendPayments() {\r\n        RequestQueue queue = Volley.newRequestQueue(EssenActivity.this);\r\n        StringRequest stringRequest = new StringRequest(Request.Method.POST, API_CHECK_OUT,\r\n                new Response.Listener&lt;String&gt;() {\r\n                    @Override\r\n                    public void onResponse(String response) {\r\n                        if (response.toString().contains(&quot;Successfull&quot;)) {\r\n                            Toast.makeText(EssenActivity.this, &quot;Bezahlung war erfolgreich&quot;,\r\n                                    Toast.LENGTH_SHORT).show();\r\n                        } else {\r\n                            Toast.makeText(EssenActivity.this, &quot;Bezahlung war nicht erfolgreich&quot;,\r\n                                    Toast.LENGTH_SHORT).show();\r\n                        }\r\n                        Log.d(TAG, &quot;onErrorResponse: &quot; + response);\r\n                    }\r\n                }, new Response.ErrorListener() {\r\n            @Override\r\n            public void onErrorResponse(VolleyError error) {\r\n                Log.d(TAG, &quot;onErrorResponse: &quot; + error.toString());\r\n            }\r\n        }) {\r\n            @Override\r\n            protected Map&lt;String, String&gt; getParams() throws AuthFailureError {\r\n                if (paramsHash == null)\r\n                    return null;\r\n                Map&lt;String,String&gt; params = new HashMap&lt;&gt;();\r\n                for (String key: params.keySet())\r\n                {\r\n                    params.put(key, paramsHash.get(key));\r\n                }\r\n                return params;\r\n            }\r\n\r\n            @Override\r\n            public Map&lt;String, String&gt; getHeaders() throws AuthFailureError {\r\n                Map&lt;String, String&gt; params = new HashMap&lt;&gt;();\r\n                params.put(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;);\r\n                return params;\r\n            }\r\n        };\r\n        queue.add(stringRequest);\r\n    }\r\n\r\n    private class getToken extends AsyncTask {\r\n\r\n\r\n        //VLLT HIER?\r\n        ProgressDialog mDialog;\r\n\r\n        @Override\r\n        protected void onPreExecute() {\r\n            super.onPreExecute();\r\n            mDialog = new ProgressDialog(EssenActivity.this, android.R.style.Theme_DeviceDefault_Dialog);\r\n            mDialog.setCancelable(false);\r\n            mDialog.setMessage(&quot;Bitte warten&quot;);\r\n            mDialog.show();\r\n        }\r\n\r\n        @Override\r\n        protected Object doInBackground(Object[] objects) {\r\n            HttpClient client = new HttpClient();\r\n            client.get(API_GET_TOKEN, new HttpResponseCallback() {\r\n                @Override\r\n                public void success(final String responseBody) {\r\n                    runOnUiThread(new Runnable() {\r\n                        @Override\r\n                        public void run() {\r\n                            token = responseBody;\r\n                        }\r\n                    });\r\n                }\r\n\r\n                @Override\r\n                public void failure(Exception exception) {\r\n                    Toast.makeText(EssenActivity.this, exception.toString(), Toast.LENGTH_SHORT).show();\r\n                }\r\n            });\r\n            return null;\r\n        }\r\n\r\n        @Override\r\n        protected void onPostExecute(Object o) {\r\n            super.onPostExecute(o);\r\n            mDialog.dismiss();\r\n        }\r\n    }","title":"Braintree Integration - Error: Class not found: com.braintreepayments.api.dropin.DropInRequest","body":"<p>so we are currently trying to integrate Braintree in our Android App in Sandbox Environment. We have set up a server with WAMP, which is generating a client token. That is working. \nHowever, when we are trying to start the payment the following error message appears in logcat:</p>\n\n<p>\"E/Parcel: Class not found when unmarshalling: com.braintreepayments.api.dropin.DropInRequest\njava.lang.ClassNotFoundException: com.braintreepayments.api.dropin.DropInRequest\"</p>\n\n<p>The app does not perfom any actions. The error is weird, as we added the dependencies to the gradle file and the intent filter to the manifest. I will attach a screenshot of the error message, the complete code and the PHP code to this request.</p>\n\n<p>We don't know what to do.\nPlease help. Thank you.</p>\n\n<p>Gradle File:</p>\n\n<pre><code>implementation 'com.braintreepayments.api:drop-in:3.7.1'\nimplementation 'com.loopj.android:android-async-http:1.4.9'\nimplementation 'com.android.volley:volley:1.1.0'\nimplementation 'com.google.code.gson:gson:2.8.5'\nimplementation 'junit:junit:4.12'\nimplementation 'com.android.support:multidex:1.0.1'\n</code></pre>\n\n<p>Manifest:</p>\n\n<pre><code> &lt;activity android:name=\"com.braintreepayments.api.BraintreeBrowserSwitchActivity\"\n        android:launchMode=\"singleTask\"&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=\"android.intent.action.VIEW\" /&gt;\n            &lt;category android:name=\"android.intent.category.DEFAULT\" /&gt;\n            &lt;category android:name=\"android.intent.category.BROWSABLE\" /&gt;\n            &lt;data android:scheme=\"${applicationId}.braintree\" /&gt;\n        &lt;/intent-filter&gt;\n    &lt;/activity&gt;\n</code></pre>\n\n<p>Relevant Code</p>\n\n<pre><code>essenBestigenBtn.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n\n            submitPayment();\n     }\n});\n\nprivate void submitPayment() {\n    DropInRequest dropInRequest = new DropInRequest()\n            .clientToken(clientToken);\n    startActivityForResult(dropInRequest.getIntent(this), BRAINTREE_REQUEST_CODE);\n}\n\n@Override\nprotected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\n    if (requestCode == BRAINTREE_REQUEST_CODE) {\n        if (resultCode == RESULT_OK) {\n            DropInResult result = data.getParcelableExtra(DropInResult.EXTRA_DROP_IN_RESULT);\n            PaymentMethodNonce nonce = result.getPaymentMethodNonce();\n            String strNonce = nonce.getNonce();\n\n            if (anzahlPortionen.getText().toString().isEmpty()) {\n                anzahlPortionen.setError(\"Bitte gib eine Anzahl an Portionen an\");\n            } else if (preisRechner.getText().toString().equals(\"0\")) {\n                Toast.makeText(EssenActivity.this, \"Bitte berechne den Gesamtpreis vorher\", Toast.LENGTH_SHORT).show();\n            } else if (ungefhreAnkunft.getText().toString().equals(\"Wann ist deine ungefhre Ankunft?\")) {\n                ungefhreAnkunft.requestFocus();\n                ungefhreAnkunft.setError(\"Bite gib deine ungefhre Ankunft an\");\n            } else\n                irwas = preisRechner.getText().toString();\n            amountB = irwas.replace(\"\", \"\");\n            paramsHash = new HashMap&lt;&gt;();\n            paramsHash.put(\"amount\", amountB);\n            paramsHash.put(\"nonce\", strNonce);\n\n            sendPayments();\n            {\n            }\n        } else if (resultCode == RESULT_CANCELED) {\n            Toast.makeText(EssenActivity.this, \"Benutzer hat abgebrochen\", Toast.LENGTH_SHORT).show();\n        } else {\n            Exception error = (Exception) data.getSerializableExtra(DropInActivity.EXTRA_ERROR);\n            Toast.makeText(EssenActivity.this, error.toString(), Toast.LENGTH_SHORT).show();\n        }\n\n    }\n}\n\nprivate void sendPayments() {\n    RequestQueue queue = Volley.newRequestQueue(EssenActivity.this);\n    StringRequest stringRequest = new StringRequest(Request.Method.POST, API_CHECK_OUT,\n            new Response.Listener&lt;String&gt;() {\n                @Override\n                public void onResponse(String response) {\n                    if (response.toString().contains(\"Successfull\")) {\n                        Toast.makeText(EssenActivity.this, \"Bezahlung war erfolgreich\",\n                                Toast.LENGTH_SHORT).show();\n                    } else {\n                        Toast.makeText(EssenActivity.this, \"Bezahlung war nicht erfolgreich\",\n                                Toast.LENGTH_SHORT).show();\n                    }\n                    Log.d(TAG, \"onErrorResponse: \" + response);\n                }\n            }, new Response.ErrorListener() {\n        @Override\n        public void onErrorResponse(VolleyError error) {\n            Log.d(TAG, \"onErrorResponse: \" + error.toString());\n        }\n    }) {\n        @Override\n        protected Map&lt;String, String&gt; getParams() throws AuthFailureError {\n            if (paramsHash == null)\n                return null;\n            Map&lt;String,String&gt; params = new HashMap&lt;&gt;();\n            for (String key: params.keySet())\n            {\n                params.put(key, paramsHash.get(key));\n            }\n            return params;\n        }\n\n        @Override\n        public Map&lt;String, String&gt; getHeaders() throws AuthFailureError {\n            Map&lt;String, String&gt; params = new HashMap&lt;&gt;();\n            params.put(\"Content-Type\", \"application/x-www-form-urlencoded\");\n            return params;\n        }\n    };\n    queue.add(stringRequest);\n}\n\nprivate class getToken extends AsyncTask {\n\n\n    //VLLT HIER?\n    ProgressDialog mDialog;\n\n    @Override\n    protected void onPreExecute() {\n        super.onPreExecute();\n        mDialog = new ProgressDialog(EssenActivity.this, android.R.style.Theme_DeviceDefault_Dialog);\n        mDialog.setCancelable(false);\n        mDialog.setMessage(\"Bitte warten\");\n        mDialog.show();\n    }\n\n    @Override\n    protected Object doInBackground(Object[] objects) {\n        HttpClient client = new HttpClient();\n        client.get(API_GET_TOKEN, new HttpResponseCallback() {\n            @Override\n            public void success(final String responseBody) {\n                runOnUiThread(new Runnable() {\n                    @Override\n                    public void run() {\n                        token = responseBody;\n                    }\n                });\n            }\n\n            @Override\n            public void failure(Exception exception) {\n                Toast.makeText(EssenActivity.this, exception.toString(), Toast.LENGTH_SHORT).show();\n            }\n        });\n        return null;\n    }\n\n    @Override\n    protected void onPostExecute(Object o) {\n        super.onPostExecute(o);\n        mDialog.dismiss();\n    }\n}\n</code></pre>\n"},{"tags":["java","abstract-class"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1651555982,"post_id":72094693,"comment_id":127385603,"body_markdown":"Objects aren&#39;t &#39;instantiated in compilation time&#39;. Your question is based on a false assumption.","body":"Objects aren&#39;t &#39;instantiated in compilation time&#39;. Your question is based on a false assumption."}],"answers":[{"tags":[],"owner":{"account_id":298886,"reputation":40480,"user_id":605153,"accept_rate":67,"display_name":"Mark Bramnik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1651551765,"creation_date":1651551765,"answer_id":72094786,"question_id":72094693,"body_markdown":"The work of compiler basically boils down to accepting your java code as an input and producing a valid byte code that later can be loaded into/run by the JVM.\r\nWhen you create an instance of Abstract Class at the level of code the compiler can&#39;t really produce a valid bytecode and hence it complains.\r\n\r\nSo bottom line, the compiler **doesn&#39;t really try to create your object**. It only tries to translate what it sees into the valid bytecode and in this case it can&#39;t...\r\n\r\nNow if you use reflection, for example, where all the class names are strings or even calculated in runtime, then the compiler won&#39;t be able to detect such a mistake and will compile your code successfully.\r\nBut then, when you run a program the error will arise, this time it will be a runtime error - a result of an attempt to create an instance of an abstract class.\r\n","title":"Is instantiating an instance of an abstract class a runtime or compilation error?","body":"<p>The work of compiler basically boils down to accepting your java code as an input and producing a valid byte code that later can be loaded into/run by the JVM.\nWhen you create an instance of Abstract Class at the level of code the compiler can't really produce a valid bytecode and hence it complains.</p>\n<p>So bottom line, the compiler <strong>doesn't really try to create your object</strong>. It only tries to translate what it sees into the valid bytecode and in this case it can't...</p>\n<p>Now if you use reflection, for example, where all the class names are strings or even calculated in runtime, then the compiler won't be able to detect such a mistake and will compile your code successfully.\nBut then, when you run a program the error will arise, this time it will be a runtime error - a result of an attempt to create an instance of an abstract class.</p>\n"}],"owner":{"account_id":22231380,"reputation":29,"user_id":16467488,"display_name":"pjyamas"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":281,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":72094786,"answer_count":1,"score":-2,"last_activity_date":1651574703,"creation_date":1651550323,"question_id":72094693,"body_markdown":"From my understanding, no objects are instantiated in compilation time. Hence, the error should be classified as a run time error when the instance of the abstract object is created in runtime. Am I correct or will such an error be picked up by the compiler before runtime?\r\n","title":"Is instantiating an instance of an abstract class a runtime or compilation error?","body":"<p>From my understanding, no objects are instantiated in compilation time. Hence, the error should be classified as a run time error when the instance of the abstract object is created in runtime. Am I correct or will such an error be picked up by the compiler before runtime?</p>\n"},{"tags":["java","oracle","spring-boot","triggers","change-data-capture"],"comments":[{"owner":{"account_id":17782616,"reputation":6789,"user_id":12913491,"display_name":"pmdba"},"score":0,"creation_date":1651575729,"post_id":72098238,"comment_id":127390906,"body_markdown":"Oracle PL/SQL will not have visibility of anything in your app directly. You would either have to 1) let your app poll the data periodically; 2) perhaps use Oracle Advanced Queueing and have your app poll a queue in the DB with messages from the trigger containing the new values; or 3) have your app provide a REST API that could be called by the trigger. Anything you do could affect the performance of the other app too, by adding more work and/or dependency to the insert/update transactions. e.g. trigger processing is part of the transaction and a failed API call could fail the transaction.","body":"Oracle PL/SQL will not have visibility of anything in your app directly. You would either have to 1) let your app poll the data periodically; 2) perhaps use Oracle Advanced Queueing and have your app poll a queue in the DB with messages from the trigger containing the new values; or 3) have your app provide a REST API that could be called by the trigger. Anything you do could affect the performance of the other app too, by adding more work and/or dependency to the insert/update transactions. e.g. trigger processing is part of the transaction and a failed API call could fail the transaction."},{"owner":{"account_id":17782616,"reputation":6789,"user_id":12913491,"display_name":"pmdba"},"score":0,"creation_date":1651576333,"post_id":72098238,"comment_id":127391098,"body_markdown":"Not sure if *any* of those options are viable in your situation: can&#39;t tell how difficult it would be to identify changed rows *without* a trigger; not sure about the SQL performance issues of polling the data directly; not sure if your app can work with Oracle AQ; not sure you want to create a dependency between your app and the other app (using an API, yours would have to be running in order for the other to process *any* transactions on the data). Too many unknowns in your situation to guess; you really, really need to come here with a specific code issue and not general design questions.","body":"Not sure if <i>any</i> of those options are viable in your situation: can&#39;t tell how difficult it would be to identify changed rows <i>without</i> a trigger; not sure about the SQL performance issues of polling the data directly; not sure if your app can work with Oracle AQ; not sure you want to create a dependency between your app and the other app (using an API, yours would have to be running in order for the other to process <i>any</i> transactions on the data). Too many unknowns in your situation to guess; you really, really need to come here with a specific code issue and not general design questions."},{"owner":{"account_id":16362432,"reputation":155,"user_id":11817672,"display_name":"APK"},"score":0,"creation_date":1651578956,"post_id":72098238,"comment_id":127391918,"body_markdown":"@pmdba  thank you for your suggestions, To your 1st approach, the table is not getting updated frequently, so not sure if polling would be feasible. \nAbout your 3rd approach,   I couldn&#39;t understand it, If I implement a trigger in my springboot application then why do I need to provide an API?? OR I can only create a trigger in the application which updates the table is that the case ??? \nCan&#39;t I implement something like the below link.\nhttps://docs.oracle.com/en/database/oracle/oracle-database/12.2/jjdev/calling-Java-from-database-triggers.html#GUID-5C498DEF-0348-484D-AA26-2A88EF348D5C","body":"@pmdba  thank you for your suggestions, To your 1st approach, the table is not getting updated frequently, so not sure if polling would be feasible.  About your 3rd approach,   I couldn&#39;t understand it, If I implement a trigger in my springboot application then why do I need to provide an API?? OR I can only create a trigger in the application which updates the table is that the case ???  Can&#39;t I implement something like the below link. <a href=\"https://docs.oracle.com/en/database/oracle/oracle-database/12.2/jjdev/calling-Java-from-database-triggers.html#GUID-5C498DEF-0348-484D-AA26-2A88EF348D5C\" rel=\"nofollow noreferrer\">docs.oracle.com/en/database/oracle/oracle-database/12.2/jjde&zwnj;&#8203;v/&hellip;</a>"},{"owner":{"account_id":16362432,"reputation":155,"user_id":11817672,"display_name":"APK"},"score":0,"creation_date":1651586206,"post_id":72098238,"comment_id":127394766,"body_markdown":"@pmdba can&#39;t we create a trigger in spring boot application like we create store procedures, I am new to the oracle database (haven&#39;t worked much on databases side).","body":"@pmdba can&#39;t we create a trigger in spring boot application like we create store procedures, I am new to the oracle database (haven&#39;t worked much on databases side)."},{"owner":{"account_id":17782616,"reputation":6789,"user_id":12913491,"display_name":"pmdba"},"score":0,"creation_date":1651594121,"post_id":72098238,"comment_id":127398111,"body_markdown":"The trigger is created within the database and executes within the context of the database session performing the data transaction, not from within your application. Database constructs will have no visibility of your external classes, code, or application state. The example you linked to is for calling a Java stored procedure - also in the database and executing within the context of the transaction, not your external application. It would have to reach back over the network to your app, which would need an API for the DB to interact with.","body":"The trigger is created within the database and executes within the context of the database session performing the data transaction, not from within your application. Database constructs will have no visibility of your external classes, code, or application state. The example you linked to is for calling a Java stored procedure - also in the database and executing within the context of the transaction, not your external application. It would have to reach back over the network to your app, which would need an API for the DB to interact with."},{"owner":{"account_id":17782616,"reputation":6789,"user_id":12913491,"display_name":"pmdba"},"score":0,"creation_date":1651594803,"post_id":72098238,"comment_id":127398375,"body_markdown":"Also consider the dependency you&#39;re creating between the apps: what if the app changing the data wants to add new rows, but the second app is down? Do you fail the transactions until the second app is up? Do you queue the change records asynchronously with AQ so the second app can pick them up later? Do you have some other way to poll the data so you know what has changed since last you checked? What happens if the same record is changed *twice* while your app is down? Do you need to capture both changes, or just the most recent? Using AQ avoids dependency and increases robustness of your app.","body":"Also consider the dependency you&#39;re creating between the apps: what if the app changing the data wants to add new rows, but the second app is down? Do you fail the transactions until the second app is up? Do you queue the change records asynchronously with AQ so the second app can pick them up later? Do you have some other way to poll the data so you know what has changed since last you checked? What happens if the same record is changed <i>twice</i> while your app is down? Do you need to capture both changes, or just the most recent? Using AQ avoids dependency and increases robustness of your app."}],"owner":{"account_id":16362432,"reputation":155,"user_id":11817672,"display_name":"APK"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1027,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1651574524,"creation_date":1651574524,"question_id":72098238,"body_markdown":"I have an ***oracle table*** which is updated by an external spring boot application. In my spring boot application, I want to create a database trigger so that whenever there is an update or insert operation happens on that table, my spring boot application can call a method in the class with new values.  \r\n\r\nCan someone please share an example with similar kind of set up.","title":"Database trigger calling a spring boot Class method","body":"<p>I have an <em><strong>oracle table</strong></em> which is updated by an external spring boot application. In my spring boot application, I want to create a database trigger so that whenever there is an update or insert operation happens on that table, my spring boot application can call a method in the class with new values.</p>\n<p>Can someone please share an example with similar kind of set up.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":4,"creation_date":1651574074,"post_id":72098128,"comment_id":127390364,"body_markdown":"It&#39;s not totally impossible, that some complex combination of steps leads to wrongly excluded boundary checks where they would be needed, but I still find it pretty unlikely to happen as late as Java 6.","body":"It&#39;s not totally impossible, that some complex combination of steps leads to wrongly excluded boundary checks where they would be needed, but I still find it pretty unlikely to happen as late as Java 6."},{"owner":{"account_id":7822670,"reputation":1609,"user_id":5915318,"display_name":"David Kariuki"},"score":0,"creation_date":1651574284,"post_id":72098128,"comment_id":127390443,"body_markdown":"What is the output of the stacktrace in java 11?","body":"What is the output of the stacktrace in java 11?"},{"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"score":6,"creation_date":1651575504,"post_id":72098128,"comment_id":127390829,"body_markdown":"No, there was never a java version where this _did not_ throw an out of bounds exception. Most likely explanation: Your decompiler messed up. They aren&#39;t perfect.","body":"No, there was never a java version where this <i>did not</i> throw an out of bounds exception. Most likely explanation: Your decompiler messed up. They aren&#39;t perfect."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":3,"creation_date":1651578896,"post_id":72098128,"comment_id":127391895,"body_markdown":"If this complex code is using multiple threads, its possible that different thread visibility semantics are responsible.  Reassignment of a non-volatile array field might have been visible to different threads sooner (or later) in Java 6 than in Java 11.","body":"If this complex code is using multiple threads, its possible that different thread visibility semantics are responsible.  Reassignment of a non-volatile array field might have been visible to different threads sooner (or later) in Java 6 than in Java 11."},{"owner":{"account_id":21754970,"reputation":49,"user_id":16461385,"display_name":"lmattcris"},"score":0,"creation_date":1651579829,"post_id":72098128,"comment_id":127392268,"body_markdown":"@rzwitserloot No idea about that, used JD-GUI and everything else made sense so far. :shrug:","body":"@rzwitserloot No idea about that, used JD-GUI and everything else made sense so far. :shrug:"},{"owner":{"account_id":21754970,"reputation":49,"user_id":16461385,"display_name":"lmattcris"},"score":0,"creation_date":1651580272,"post_id":72098128,"comment_id":127392461,"body_markdown":"@VGR This is an interesting issue. However, this array allocation and thread creation follow a user selection, so this happens only once. I know that &quot;complex&quot; is vague, but I&#39;ve been left myself with a bunch of &quot;lasagna&quot; code (yes, not &quot;spaghetti&quot;...) with an enormous amount of messy layers...","body":"@VGR This is an interesting issue. However, this array allocation and thread creation follow a user selection, so this happens only once. I know that &quot;complex&quot; is vague, but I&#39;ve been left myself with a bunch of &quot;lasagna&quot; code (yes, not &quot;spaghetti&quot;...) with an enormous amount of messy layers..."},{"owner":{"account_id":21754970,"reputation":49,"user_id":16461385,"display_name":"lmattcris"},"score":0,"creation_date":1651581785,"post_id":72098128,"comment_id":127393005,"body_markdown":"@DavidKariuki the stacktrace is as simple as this `java.lang.ArrayIndexOutOfBoundsException: Index 189 out of bounds for length 189\n\tat com.example.appl.IO.file.USBDumper.readFile(USBDumper.java:521)\n\tat com.example.appl.IO.file.USBDumper.dumpToUsb(USBDumper.java:243)\n\tat com.example.appl.gui.ExportThread.run(ExportThread.java:125)`","body":"@DavidKariuki the stacktrace is as simple as this <code>java.lang.ArrayIndexOutOfBoundsException: Index 189 out of bounds for length 189 \tat com.example.appl.IO.file.USBDumper.readFile(USBDumper.java:5&zwnj;&#8203;21) \tat com.example.appl.IO.file.USBDumper.dumpToUsb(USBDumper.java:&zwnj;&#8203;243) \tat com.example.appl.gui.ExportThread.run(ExportThread.java:125)</code>"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1651582155,"post_id":72098128,"comment_id":127393147,"body_markdown":"Can you really be sure that neither `N` nor `array` changes in-between or that the evaluation of `value` does not fail in a different way even before writing to `array[N]`? Or that there is no conditional in between causing this statement not to be executed? Mind that even if this statement would be executed without causing an exception, the array still would be one `float` smaller than intended which would affect the behavior of subsequent operations.","body":"Can you really be sure that neither <code>N</code> nor <code>array</code> changes in-between or that the evaluation of <code>value</code> does not fail in a different way even before writing to <code>array[N]</code>? Or that there is no conditional in between causing this statement not to be executed? Mind that even if this statement would be executed without causing an exception, the array still would be one <code>float</code> smaller than intended which would affect the behavior of subsequent operations."},{"owner":{"account_id":21754970,"reputation":49,"user_id":16461385,"display_name":"lmattcris"},"score":0,"creation_date":1651588756,"post_id":72098128,"comment_id":127395855,"body_markdown":"@Holger The thread is executed to completion, approximately `N` is the number of lines read from a text file (that cannot be changed, has been saved in a separate dedicated operation); the `array` is a sample of data in those lines (like one out of 8); when the array is filled up the thread ends correctly and `array` data is saved to a new file. Error code was simply adding one element more than available. Every other UI thread is waiting for this one to end or abort. I can&#39;t believe I succeeded with the synthesis of this horrible mess :D","body":"@Holger The thread is executed to completion, approximately <code>N</code> is the number of lines read from a text file (that cannot be changed, has been saved in a separate dedicated operation); the <code>array</code> is a sample of data in those lines (like one out of 8); when the array is filled up the thread ends correctly and <code>array</code> data is saved to a new file. Error code was simply adding one element more than available. Every other UI thread is waiting for this one to end or abort. I can&#39;t believe I succeeded with the synthesis of this horrible mess :D"}],"owner":{"account_id":21754970,"reputation":49,"user_id":16461385,"display_name":"lmattcris"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1651573858,"creation_date":1651573858,"question_id":72098128,"body_markdown":"I have an old application that was running on an old piece of software/hardware system on Java 6, which has been restored decompiled and running on Java 11.\r\nAmong the many adaptations and corrections, I found an &quot;array out of bounds exception&quot;, which I fixed.\r\nThe funny part is that the same code, with the same data causing the exception on Java 11, runs (apparently) flawlessly on Java 6!\r\n\r\nNow the code is too complex to report it all here, but the problem boils down to a couple of arrays, allocated for **N** elements as in `array = new float[N];` and accessed later as `array[N] = value;`\r\n\r\nThis is obviously an error, and that code is enclosed in a `try...catch` in the caller method, which triggers the exception, in Java 11. That&#39;s just **perfect**.\r\n\r\nHowever, the unpatched code with Java 6 doesn&#39;t trigger the exception. The running hardware/software system is too old to be debugged, but I&#39;ve got reports that it still runs **apparently flawlessly**.\r\n\r\nIs there any assessed reason for it? I&#39;m puzzled...\r\n\r\n","title":"Is it possible that old Java 6 didn&#39;t get some &quot;array out of bounds exception&quot;?","body":"<p>I have an old application that was running on an old piece of software/hardware system on Java 6, which has been restored decompiled and running on Java 11.\nAmong the many adaptations and corrections, I found an &quot;array out of bounds exception&quot;, which I fixed.\nThe funny part is that the same code, with the same data causing the exception on Java 11, runs (apparently) flawlessly on Java 6!</p>\n<p>Now the code is too complex to report it all here, but the problem boils down to a couple of arrays, allocated for <strong>N</strong> elements as in <code>array = new float[N];</code> and accessed later as <code>array[N] = value;</code></p>\n<p>This is obviously an error, and that code is enclosed in a <code>try...catch</code> in the caller method, which triggers the exception, in Java 11. That's just <strong>perfect</strong>.</p>\n<p>However, the unpatched code with Java 6 doesn't trigger the exception. The running hardware/software system is too old to be debugged, but I've got reports that it still runs <strong>apparently flawlessly</strong>.</p>\n<p>Is there any assessed reason for it? I'm puzzled...</p>\n"},{"tags":["java","file","https"],"comments":[{"owner":{"account_id":370994,"reputation":35154,"user_id":719263,"accept_rate":100,"display_name":"Jean-Baptiste Yun&#232;s"},"score":0,"creation_date":1650994460,"post_id":72018186,"comment_id":127254286,"body_markdown":"What was the URL used? Message is clear, your URL is not of kind `file:`.","body":"What was the URL used? Message is clear, your URL is not of kind <code>file:</code>."},{"owner":{"account_id":24405620,"reputation":45,"user_id":18333852,"display_name":"user18333852"},"score":0,"creation_date":1650994524,"post_id":72018186,"comment_id":127254311,"body_markdown":"My URL is https","body":"My URL is https"},{"owner":{"account_id":370994,"reputation":35154,"user_id":719263,"accept_rate":100,"display_name":"Jean-Baptiste Yun&#232;s"},"score":0,"creation_date":1650994584,"post_id":72018186,"comment_id":127254334,"body_markdown":"Then it is not a file... What do you really want to achieve. Modify your question accordingly, to give us an example of the input and what you want to achieve with...","body":"Then it is not a file... What do you really want to achieve. Modify your question accordingly, to give us an example of the input and what you want to achieve with..."},{"owner":{"account_id":24405620,"reputation":45,"user_id":18333852,"display_name":"user18333852"},"score":0,"creation_date":1650995784,"post_id":72018186,"comment_id":127254802,"body_markdown":"strURL = &quot;https://gb-us-west-2-prod-doc-source.s3.us-west-2.amazonaws.com/9295df64f21c15ff4b5beb4c95c348a2180&quot;\nI just want to convert this strURL to File, this URL is contains Excel File.","body":"strURL = &quot;<a href=\"https://gb-us-west-2-prod-doc-source.s3.us-west-2.amazonaws.com/9295df64f21c15ff4b5beb4c95c348a2180\" rel=\"nofollow noreferrer\">gb-us-west-2-prod-doc-source.s3.us-west-2.amazonaws.com/&hellip;</a>&quot; I just want to convert this strURL to File, this URL is contains Excel File."},{"owner":{"account_id":24405620,"reputation":45,"user_id":18333852,"display_name":"user18333852"},"score":0,"creation_date":1650995831,"post_id":72018186,"comment_id":127254818,"body_markdown":"Do I need to download the file first?","body":"Do I need to download the file first?"},{"owner":{"account_id":370994,"reputation":35154,"user_id":719263,"accept_rate":100,"display_name":"Jean-Baptiste Yun&#232;s"},"score":0,"creation_date":1650996149,"post_id":72018186,"comment_id":127254938,"body_markdown":"Not clear what you want...","body":"Not clear what you want..."},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1651044630,"post_id":72018186,"comment_id":127265481,"body_markdown":"A `File` refers to local file so if you need a `File` instance e.g. for calling a certain API function you need to download the file and save it in the local file-system. https://stackoverflow.com/q/921262/150978","body":"A <code>File</code> refers to local file so if you need a <code>File</code> instance e.g. for calling a certain API function you need to download the file and save it in the local file-system. <a href=\"https://stackoverflow.com/q/921262/150978\">stackoverflow.com/q/921262/150978</a>"}],"answers":[{"tags":[],"owner":{"account_id":24405620,"reputation":45,"user_id":18333852,"display_name":"user18333852"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1651573428,"creation_date":1651573428,"answer_id":72098039,"question_id":72018186,"body_markdown":"``` FileUtils.copyURLToFile ``` worked well for me.\r\n\r\nReference - https://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/FileUtils.html#copyURLToFile-java.net.URL-java.io.File-","title":"How to convert https url to File in Java?","body":"<p><code>FileUtils.copyURLToFile</code> worked well for me.</p>\n<p>Reference - <a href=\"https://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/FileUtils.html#copyURLToFile-java.net.URL-java.io.File-\" rel=\"nofollow noreferrer\">https://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/FileUtils.html#copyURLToFile-java.net.URL-java.io.File-</a></p>\n"}],"owner":{"account_id":24405620,"reputation":45,"user_id":18333852,"display_name":"user18333852"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":381,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72098039,"answer_count":1,"score":0,"last_activity_date":1651573428,"creation_date":1650994288,"question_id":72018186,"body_markdown":"\r\n\r\nI have an https url which is of String format. How can I convert it to File? I tried this but I&#39;m getting error - ```URI scheme is not &quot;file&quot;```\r\n\r\n```\r\n public static File convertURLToFile(String strURL) throws MalformedURLException {\r\n        URL url = new URL(strURL);\r\n        File file;\r\n        try {\r\n            file = new File(url.toURI());\r\n        } catch (URISyntaxException e) {\r\n            String message = &quot;Error in converting url to file&quot;;\r\n            throw new RuntimeException(message, e);\r\n        }\r\n        return file;\r\n    }\r\n```\r\n","title":"How to convert https url to File in Java?","body":"<p>I have an https url which is of String format. How can I convert it to File? I tried this but I'm getting error - <code>URI scheme is not &quot;file&quot;</code></p>\n<pre><code> public static File convertURLToFile(String strURL) throws MalformedURLException {\n        URL url = new URL(strURL);\n        File file;\n        try {\n            file = new File(url.toURI());\n        } catch (URISyntaxException e) {\n            String message = &quot;Error in converting url to file&quot;;\n            throw new RuntimeException(message, e);\n        }\n        return file;\n    }\n</code></pre>\n"},{"tags":["java","multithreading","swing"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1651158131,"post_id":72045826,"comment_id":127301911,"body_markdown":"The state of a component should be updated on the Event Dispatch Thread (EDT). You should be using the Swing Timer instead of a Thread to schedule the animation.","body":"The state of a component should be updated on the Event Dispatch Thread (EDT). You should be using the Swing Timer instead of a Thread to schedule the animation."},{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1651158694,"post_id":72045826,"comment_id":127302165,"body_markdown":"Also, there should only be one game loop.  You update the state of the game, draw the state of the game, and wait a certain amount of time.","body":"Also, there should only be one game loop.  You update the state of the game, draw the state of the game, and wait a certain amount of time."}],"owner":{"account_id":25129290,"reputation":1,"user_id":18976718,"display_name":"newbiecoder"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1651573308,"creation_date":1651157337,"question_id":72045826,"body_markdown":"I&#39;m working on a project which is about creating a game. I was implementing threads to move my background but had some problems with the smoothness of background movement. I also have a bird component, but it is supposed to be used with keybindings. Both of these components are drawn by using the `paintComponent()` method. \r\n\r\nThe problem is when I start the game, the background starts moving, but after 1-2 seconds, it starts lagging, but when I use keys to move my bird component right and left, the background movement becomes smooth again, and when I don&#39;t press any key, it starts lagging again. I also observed that when I hover the mouse over the window, it also starts moving smoothly. I couldn&#39;t realize the problem. Tried to use alternatives instead of original ones, like using labels instead of `paintComponent()` and using `timer`. instead of `thread`, but nothing changes. \r\n\r\nI also searched about this problem a lot, and found some options like PC performance and so on. But I don&#39;t think that I have a problem with that. Is there a way to solve this problem? Thanks beforehand! Here is the code:\r\n\r\n**FlyingChicken.java**\r\n\r\nThis is the main class to call other classes\r\n\r\n    import java.io.*;\r\n    import java.time.*;\r\n    import java.lang.*;\r\n    import java.util.*;\r\n    import java.awt.*;\r\n    import java.awt.event.*;\r\n    import javax.swing.*;\r\n    import javax.swing.Timer;\r\n    \r\n    public class FlyingChicken extends JFrame implements ActionListener{\r\n    \r\n    \tJButton startButton, firstLoginButton, firstRegisterButton, firstQuitButton;\r\n    \tboolean gameStarted = false, gameOver = false, gamePaused = false;\r\n    \tRegisterPage registerPage;\r\n    \tLoginPage loginPage;\r\n    \tGamePage gamePage;\r\n    \r\n    \r\n    \tpublic FlyingChicken(){\r\n    \r\n    \t\t//FirstRegisterButton\r\n    \t\tfirstRegisterButton = new JButton(&quot;Register Account&quot;);\r\n    \t\tfirstRegisterButton.setBounds(360,445,200,50);\r\n    \t\tfirstRegisterButton.setFocusable(false);\r\n    \t\tfirstRegisterButton.addActionListener(this);\r\n    \t\tfirstRegisterButton.setBackground(Color.green);\r\n    \t\tfirstRegisterButton.setForeground(Color.white);\r\n    \r\n    \t\t//FirstLoginButton\r\n    \t\tfirstLoginButton = new JButton(&quot;Login Account&quot;);\r\n    \t\tfirstLoginButton.setBounds(360,520,200,50);\r\n    \t\tfirstLoginButton.setFocusable(false);\r\n    \t\tfirstLoginButton.addActionListener(this);\r\n    \t\tfirstLoginButton.setBackground(Color.green);\r\n    \t\tfirstLoginButton.setForeground(Color.white);\r\n    \r\n    \t\t//FirstQuitButton\r\n    \t\tfirstQuitButton = new JButton(&quot;Quit the Game&quot;);\r\n    \t\tfirstQuitButton.setBounds(385,595,150,50);\r\n    \t\tfirstQuitButton.setFocusable(false);\r\n    \t\tfirstQuitButton.addActionListener(this);\r\n    \t\tfirstQuitButton.setBackground(Color.green);\r\n    \t\tfirstQuitButton.setForeground(Color.white);\r\n    \r\n    \t\t//StartButton\r\n    \t\tstartButton = new JButton(&quot;Start Game&quot;);\r\n    \t\tstartButton.setBounds(360,495,200,50);\r\n    \t\tstartButton.setFocusable(false);\r\n    \t\tstartButton.addActionListener(this);\r\n    \t\tstartButton.setVisible(false);\r\n    \t\tstartButton.setFont(new Font(&quot;Arial&quot;,Font.BOLD, 20));\r\n    \r\n    \t\tloginPage = new LoginPage();\r\n    \t\tregisterPage = new RegisterPage();\r\n    \t\tgamePage = new GamePage();\r\n    \r\n    \t\tloginPage.loginPageVisibility(false);\r\n    \t\tregisterPage.registerPageVisibility(false);\r\n    \t\tgamePage.gamePageVisibility(false);\r\n    \r\n            loginPage.backButton.addActionListener(this);\r\n    \t\tloginPage.loginButton.addActionListener(this);\r\n            registerPage.registerButton.addActionListener(this);\r\n            registerPage.backButton.addActionListener(this);\r\n            gamePage.quitButton.addActionListener(this);\r\n    \r\n    \t\t//Frame Settings\r\n    \t\tImage img = new ImageIcon(&quot;Flying_Chicken_Icon.png&quot;).getImage();\r\n    \t\tthis.setIconImage(img);\r\n        \tthis.setSize(920,1080);\r\n        \tthis.setTitle(&quot;Flying Chicken&quot;);\r\n    \t\tthis.getContentPane().setBackground(new Color(14, 194, 176));\r\n        \tthis.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        \tthis.setResizable(false);\r\n        \tthis.setFocusable(true);\r\n        \tthis.setLayout(null);\r\n        \tthis.setVisible(true);\r\n        \tthis.add(loginPage);this.add(registerPage);\r\n        \tthis.add(gamePage);this.add(startButton);\r\n        \tthis.add(firstQuitButton);this.add(firstRegisterButton);\r\n        \tthis.add(firstLoginButton);\r\n    \r\n    \t}\r\n    \r\n    \tpublic void mainPanel(){\r\n    \t\tthis.getContentPane().setBackground(new Color(14, 194, 176));\r\n    \t\tfirstRegisterButton.setVisible(true);\r\n    \t\tfirstQuitButton.setVisible(true);\t\r\n    \t\tfirstLoginButton.setVisible(true);\r\n    \t\tloginPage.loginPageVisibility(false);\r\n    \t\tregisterPage.registerPageVisibility(false);\r\n    \t\tloginPage.loginLabel.setVisible(false);\r\n    \t\tregisterPage.label1.setVisible(false);\r\n    \t\tregisterPage.label2.setVisible(false);\r\n    \t\tregisterPage.label3.setVisible(false);\r\n    \t\tregisterPage.label4.setVisible(false);\r\n    \t\tregisterPage.label5.setVisible(false);\t\r\n    \t}\r\n    \r\n    \tpublic void loginPanel(){\r\n    \r\n    \t\tloginPage.tpassword.setText(&quot;&quot;);\r\n    \t\tloginPage.tusername.setText(&quot;&quot;);\r\n    \t\tfirstRegisterButton.setVisible(false);\r\n    \t\tfirstQuitButton.setVisible(false);\t\r\n    \t\tfirstLoginButton.setVisible(false);\r\n    \t\tloginPage.loginPageVisibility(true);\r\n    \t\tregisterPage.registerPageVisibility(false);\r\n    \t\t\r\n    \t}\r\n    \r\n    \tpublic void registerPanel(){\r\n    \r\n    \t\tloginPage.loginPageVisibility(false);\r\n    \t\tregisterPage.registerPageVisibility(true);\r\n    \t\tregisterPage.tpassword.setText(&quot;&quot;);\r\n    \t\tregisterPage.tusername.setText(&quot;&quot;);\t\r\n    \t\tfirstRegisterButton.setVisible(false);\r\n    \t\tfirstQuitButton.setVisible(false);\t\r\n    \t\tfirstLoginButton.setVisible(false);\r\n    \t}\r\n    \r\n    \tpublic void startPage(){\r\n    \r\n    \t\tthis.getContentPane().setBackground(new Color(128,198,209));\r\n    \t\tstartButton.setVisible(true);\r\n    \t\tloginPage.loginPageVisibility(false);\r\n    \t\tregisterPage.registerPageVisibility(false);\t\r\n    \t}\r\n    \r\n    \tpublic void startGame(){\r\n    \r\n    \t\tstartButton.setVisible(false);\r\n    \t\tgamePage.gamePageVisibility(true);\r\n    \t\t// gamePage.timer.start();\r\n    \t\tgameStarted = true;\r\n    \t}\r\n    \r\n    \tpublic void quitFunction(){\r\n    \t\tString[] resp = {&quot;Resume&quot;, &quot;Quit&quot;};\r\n    \t\tint k = JOptionPane.showOptionDialog(this, &quot;Are you sure you want to quit?&quot;,&quot;Quit Panel&quot;,JOptionPane.YES_NO_OPTION,JOptionPane.INFORMATION_MESSAGE, null, resp, 0);\r\n    \t\tif (k==1){\r\n    \t\t\tthis.setVisible(false);\r\n    \t\t\tthis.dispose();\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void actionPerformed(ActionEvent e){\r\n    \t\tif(e.getSource() == startButton){\r\n    \t\t\tstartGame();\r\n    \t\t}\r\n    \t\tif(e.getSource() == gamePage.quitButton){\r\n    \t\t\t// gamePage.timer.stop();\r\n    \t\t\tquitFunction();\r\n    \t\t}\r\n    \t\tif(e.getSource() == firstQuitButton){\r\n    \t\t\tquitFunction();\r\n    \t\t}\r\n    \t\tif(e.getSource() == firstRegisterButton){\r\n    \t\t\tregisterPanel();\r\n    \t\t}\r\n    \t\tif(e.getSource() == firstLoginButton){\r\n    \t\t\tloginPanel();\r\n    \t\t}\r\n    \t\tif(e.getSource() == registerPage.registerButton){\r\n    \t\t\tif(registerPage.registerValidate() == false){\r\n    \t\t\t\tregisterPage.registerData();\r\n    \t\t\t\tloginPanel();\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tif(e.getSource() == loginPage.loginButton){\r\n    \t\t\tif(loginPage.loginValidate() == false)\r\n    \t\t\t\tstartPage();\r\n    \t\t}\r\n    \t\tif(e.getSource() == loginPage.backButton || e.getSource() == registerPage.backButton){\r\n    \t\t\tmainPanel();\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args){\r\n    \r\n    \t\tFlyingChicken game = new FlyingChicken();\r\n    \t}\r\n    }\r\n**GamePage.java**\r\n\r\nThis is the class that I&#39;m supposed to create animations and game\r\n\r\n    import java.io.*;\r\n    import java.time.*;\r\n    import java.lang.*;\r\n    import java.util.*;\r\n    import java.awt.*;\r\n    import java.awt.event.*;\r\n    import javax.swing.*;\r\n    import javax.swing.Timer;\r\n    \r\n    public class GamePage extends JPanel implements ActionListener, Runnable{\r\n    \r\n    \tJLabel scoreBoard;\r\n    \tImage backgroundImage, birdImage, catImage;\r\n    \tJButton quitButton;\r\n    \tint birdX, birdY, xpos=0, ypos=0, score = 0;\r\n    \tTimer timer;\r\n    \tThread animator;\r\n    \tAction leftAction, rightAction;\r\n    \r\n    \tpublic GamePage(){\r\n    \r\n    \t\t//GamePage Panel Settings\r\n    \t\tthis.setSize(920,1080);\r\n    \t\tthis.setLocation(xpos,ypos);\r\n    \t\tthis.setLayout(null);\r\n    \t\tthis.setFocusable(true);\r\n    \t\tthis.setVisible(true);\r\n    \r\n    \t\tbackgroundImage = new ImageIcon(&quot;background.jpg&quot;).getImage();\r\n    \t\tbirdImage = new ImageIcon(&quot;bird.png&quot;).getImage();\r\n    \t\tbirdX = 264;birdY = 230;\r\n    \r\n    \r\n    \r\n    \t\t//Scoreboard\r\n    \t\tscoreBoard = new JLabel(&quot;Score: &quot;+ score);\r\n    \t\tscoreBoard.setOpaque(false);\r\n    \t\tscoreBoard.setForeground(new Color(33,30,31));\r\n    \t\tscoreBoard.setFont(new Font(&quot;Arial&quot;, Font.BOLD, 25));\r\n    \t\tscoreBoard.setBounds(0,0,200,30);\r\n    \t\tscoreBoard.setVisible(true);\r\n    \r\n    \t\t//QuitButton\r\n    \t\tquitButton = new JButton(&quot;Quit&quot;);\r\n    \t\tquitButton.setBounds(820,0,100,50);\r\n    \t\tquitButton.setFocusable(false);\r\n    \t\tquitButton.setVisible(true);\r\n    \r\n    \t\t// timer = new Timer(10,this);\r\n    \t\tcreateKeyBindings(this);\r\n    \r\n    \t\tthis.add(quitButton);\r\n    \t\tthis.add(scoreBoard);\r\n    \t}\r\n    \r\n    \tpublic void addNotify(){\r\n    \t\tsuper.addNotify();\r\n    \t\tanimator = new Thread(this);\r\n    \t\tanimator.start();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void run(){\r\n    \r\n    \t\twhile(true){\r\n    \t\t\ttry{\r\n    \t\t\t\typos = ypos-1;\r\n    \t\t\t\trepaint();\r\n    \t\t\t\tThread.sleep(25);\r\n    \t\t\t} catch(InterruptedException e){System.out.println(&quot;hey&quot;);}\t\t\t\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t//The function to draw background\r\n    \t@Override\r\n    \tpublic void paintComponent(Graphics g){\r\n    \r\n        \tsuper.paintComponent(g);\r\n        \tg.drawImage(backgroundImage, xpos, ypos, null);\r\n        \tg.drawImage(birdImage,birdX,birdY,null);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void actionPerformed(ActionEvent e){\r\n    \t\t\r\n    \t\t// scoreBoard.setText(&quot;Score: &quot;+score);\r\n    \t\trepaint();\r\n    \t}\r\n    \r\n    \t//The function to create keybindings\r\n    \tpublic void createKeyBindings(JPanel p) {\r\n    \r\n    \t    InputMap im = p.getInputMap(JPanel.WHEN_IN_FOCUSED_WINDOW);\r\n    \t    ActionMap am = p.getActionMap();\r\n    \t    leftAction = new LeftAction();\r\n    \t    rightAction = new RightAction();\r\n    \t    im.put(KeyStroke.getKeyStroke(&quot;LEFT&quot;), &quot;left&quot;);\r\n    \t    im.put(KeyStroke.getKeyStroke(&quot;RIGHT&quot;), &quot;right&quot;);\r\n    \t    am.put(&quot;left&quot;, leftAction);\r\n    \t    am.put(&quot;right&quot;, rightAction);\r\n    \t}\r\n    \r\n    \tpublic class LeftAction extends AbstractAction{\r\n    \t\t@Override\r\n    \t\tpublic void actionPerformed(ActionEvent e){\r\n    \t\t\tif(birdX&gt;0)\r\n    \t\t\t\tbirdX = birdX-10;\r\n    \t\t\trepaint();\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic class RightAction extends AbstractAction{\r\n    \t\t@Override\r\n    \t\tpublic void actionPerformed(ActionEvent e){\r\n    \t\t\tif(birdX+530&lt;1080)\r\n    \t\t\t\tbirdX = birdX+10;\r\n    \t\t\trepaint();\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic void gamePageVisibility(boolean x){\r\n    \t\tthis.setVisible(x);\r\n    \t}\r\n    \r\n    }\r\n\r\n**EDIT: I found the actual reason my application was lagging. The problem was mainly related with Linux OS graphics and solved it by adding `Toolkit.getDefaultToolkit().sync()` to my loop.**","title":"Creating Game using multithreading, but have problems with smoothness of background movement in Java Swing","body":"<p>I'm working on a project which is about creating a game. I was implementing threads to move my background but had some problems with the smoothness of background movement. I also have a bird component, but it is supposed to be used with keybindings. Both of these components are drawn by using the <code>paintComponent()</code> method.</p>\n<p>The problem is when I start the game, the background starts moving, but after 1-2 seconds, it starts lagging, but when I use keys to move my bird component right and left, the background movement becomes smooth again, and when I don't press any key, it starts lagging again. I also observed that when I hover the mouse over the window, it also starts moving smoothly. I couldn't realize the problem. Tried to use alternatives instead of original ones, like using labels instead of <code>paintComponent()</code> and using <code>timer</code>. instead of <code>thread</code>, but nothing changes.</p>\n<p>I also searched about this problem a lot, and found some options like PC performance and so on. But I don't think that I have a problem with that. Is there a way to solve this problem? Thanks beforehand! Here is the code:</p>\n<p><strong>FlyingChicken.java</strong></p>\n<p>This is the main class to call other classes</p>\n<pre><code>import java.io.*;\nimport java.time.*;\nimport java.lang.*;\nimport java.util.*;\nimport java.awt.*;\nimport java.awt.event.*;\nimport javax.swing.*;\nimport javax.swing.Timer;\n\npublic class FlyingChicken extends JFrame implements ActionListener{\n\n    JButton startButton, firstLoginButton, firstRegisterButton, firstQuitButton;\n    boolean gameStarted = false, gameOver = false, gamePaused = false;\n    RegisterPage registerPage;\n    LoginPage loginPage;\n    GamePage gamePage;\n\n\n    public FlyingChicken(){\n\n        //FirstRegisterButton\n        firstRegisterButton = new JButton(&quot;Register Account&quot;);\n        firstRegisterButton.setBounds(360,445,200,50);\n        firstRegisterButton.setFocusable(false);\n        firstRegisterButton.addActionListener(this);\n        firstRegisterButton.setBackground(Color.green);\n        firstRegisterButton.setForeground(Color.white);\n\n        //FirstLoginButton\n        firstLoginButton = new JButton(&quot;Login Account&quot;);\n        firstLoginButton.setBounds(360,520,200,50);\n        firstLoginButton.setFocusable(false);\n        firstLoginButton.addActionListener(this);\n        firstLoginButton.setBackground(Color.green);\n        firstLoginButton.setForeground(Color.white);\n\n        //FirstQuitButton\n        firstQuitButton = new JButton(&quot;Quit the Game&quot;);\n        firstQuitButton.setBounds(385,595,150,50);\n        firstQuitButton.setFocusable(false);\n        firstQuitButton.addActionListener(this);\n        firstQuitButton.setBackground(Color.green);\n        firstQuitButton.setForeground(Color.white);\n\n        //StartButton\n        startButton = new JButton(&quot;Start Game&quot;);\n        startButton.setBounds(360,495,200,50);\n        startButton.setFocusable(false);\n        startButton.addActionListener(this);\n        startButton.setVisible(false);\n        startButton.setFont(new Font(&quot;Arial&quot;,Font.BOLD, 20));\n\n        loginPage = new LoginPage();\n        registerPage = new RegisterPage();\n        gamePage = new GamePage();\n\n        loginPage.loginPageVisibility(false);\n        registerPage.registerPageVisibility(false);\n        gamePage.gamePageVisibility(false);\n\n        loginPage.backButton.addActionListener(this);\n        loginPage.loginButton.addActionListener(this);\n        registerPage.registerButton.addActionListener(this);\n        registerPage.backButton.addActionListener(this);\n        gamePage.quitButton.addActionListener(this);\n\n        //Frame Settings\n        Image img = new ImageIcon(&quot;Flying_Chicken_Icon.png&quot;).getImage();\n        this.setIconImage(img);\n        this.setSize(920,1080);\n        this.setTitle(&quot;Flying Chicken&quot;);\n        this.getContentPane().setBackground(new Color(14, 194, 176));\n        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        this.setResizable(false);\n        this.setFocusable(true);\n        this.setLayout(null);\n        this.setVisible(true);\n        this.add(loginPage);this.add(registerPage);\n        this.add(gamePage);this.add(startButton);\n        this.add(firstQuitButton);this.add(firstRegisterButton);\n        this.add(firstLoginButton);\n\n    }\n\n    public void mainPanel(){\n        this.getContentPane().setBackground(new Color(14, 194, 176));\n        firstRegisterButton.setVisible(true);\n        firstQuitButton.setVisible(true);   \n        firstLoginButton.setVisible(true);\n        loginPage.loginPageVisibility(false);\n        registerPage.registerPageVisibility(false);\n        loginPage.loginLabel.setVisible(false);\n        registerPage.label1.setVisible(false);\n        registerPage.label2.setVisible(false);\n        registerPage.label3.setVisible(false);\n        registerPage.label4.setVisible(false);\n        registerPage.label5.setVisible(false);  \n    }\n\n    public void loginPanel(){\n\n        loginPage.tpassword.setText(&quot;&quot;);\n        loginPage.tusername.setText(&quot;&quot;);\n        firstRegisterButton.setVisible(false);\n        firstQuitButton.setVisible(false);  \n        firstLoginButton.setVisible(false);\n        loginPage.loginPageVisibility(true);\n        registerPage.registerPageVisibility(false);\n        \n    }\n\n    public void registerPanel(){\n\n        loginPage.loginPageVisibility(false);\n        registerPage.registerPageVisibility(true);\n        registerPage.tpassword.setText(&quot;&quot;);\n        registerPage.tusername.setText(&quot;&quot;); \n        firstRegisterButton.setVisible(false);\n        firstQuitButton.setVisible(false);  \n        firstLoginButton.setVisible(false);\n    }\n\n    public void startPage(){\n\n        this.getContentPane().setBackground(new Color(128,198,209));\n        startButton.setVisible(true);\n        loginPage.loginPageVisibility(false);\n        registerPage.registerPageVisibility(false); \n    }\n\n    public void startGame(){\n\n        startButton.setVisible(false);\n        gamePage.gamePageVisibility(true);\n        // gamePage.timer.start();\n        gameStarted = true;\n    }\n\n    public void quitFunction(){\n        String[] resp = {&quot;Resume&quot;, &quot;Quit&quot;};\n        int k = JOptionPane.showOptionDialog(this, &quot;Are you sure you want to quit?&quot;,&quot;Quit Panel&quot;,JOptionPane.YES_NO_OPTION,JOptionPane.INFORMATION_MESSAGE, null, resp, 0);\n        if (k==1){\n            this.setVisible(false);\n            this.dispose();\n        }\n    }\n\n    @Override\n    public void actionPerformed(ActionEvent e){\n        if(e.getSource() == startButton){\n            startGame();\n        }\n        if(e.getSource() == gamePage.quitButton){\n            // gamePage.timer.stop();\n            quitFunction();\n        }\n        if(e.getSource() == firstQuitButton){\n            quitFunction();\n        }\n        if(e.getSource() == firstRegisterButton){\n            registerPanel();\n        }\n        if(e.getSource() == firstLoginButton){\n            loginPanel();\n        }\n        if(e.getSource() == registerPage.registerButton){\n            if(registerPage.registerValidate() == false){\n                registerPage.registerData();\n                loginPanel();\n            }\n        }\n        if(e.getSource() == loginPage.loginButton){\n            if(loginPage.loginValidate() == false)\n                startPage();\n        }\n        if(e.getSource() == loginPage.backButton || e.getSource() == registerPage.backButton){\n            mainPanel();\n        }\n    }\n\n    public static void main(String[] args){\n\n        FlyingChicken game = new FlyingChicken();\n    }\n}\n</code></pre>\n<p><strong>GamePage.java</strong></p>\n<p>This is the class that I'm supposed to create animations and game</p>\n<pre><code>import java.io.*;\nimport java.time.*;\nimport java.lang.*;\nimport java.util.*;\nimport java.awt.*;\nimport java.awt.event.*;\nimport javax.swing.*;\nimport javax.swing.Timer;\n\npublic class GamePage extends JPanel implements ActionListener, Runnable{\n\n    JLabel scoreBoard;\n    Image backgroundImage, birdImage, catImage;\n    JButton quitButton;\n    int birdX, birdY, xpos=0, ypos=0, score = 0;\n    Timer timer;\n    Thread animator;\n    Action leftAction, rightAction;\n\n    public GamePage(){\n\n        //GamePage Panel Settings\n        this.setSize(920,1080);\n        this.setLocation(xpos,ypos);\n        this.setLayout(null);\n        this.setFocusable(true);\n        this.setVisible(true);\n\n        backgroundImage = new ImageIcon(&quot;background.jpg&quot;).getImage();\n        birdImage = new ImageIcon(&quot;bird.png&quot;).getImage();\n        birdX = 264;birdY = 230;\n\n\n\n        //Scoreboard\n        scoreBoard = new JLabel(&quot;Score: &quot;+ score);\n        scoreBoard.setOpaque(false);\n        scoreBoard.setForeground(new Color(33,30,31));\n        scoreBoard.setFont(new Font(&quot;Arial&quot;, Font.BOLD, 25));\n        scoreBoard.setBounds(0,0,200,30);\n        scoreBoard.setVisible(true);\n\n        //QuitButton\n        quitButton = new JButton(&quot;Quit&quot;);\n        quitButton.setBounds(820,0,100,50);\n        quitButton.setFocusable(false);\n        quitButton.setVisible(true);\n\n        // timer = new Timer(10,this);\n        createKeyBindings(this);\n\n        this.add(quitButton);\n        this.add(scoreBoard);\n    }\n\n    public void addNotify(){\n        super.addNotify();\n        animator = new Thread(this);\n        animator.start();\n    }\n\n    @Override\n    public void run(){\n\n        while(true){\n            try{\n                ypos = ypos-1;\n                repaint();\n                Thread.sleep(25);\n            } catch(InterruptedException e){System.out.println(&quot;hey&quot;);}         \n        }\n    }\n\n    //The function to draw background\n    @Override\n    public void paintComponent(Graphics g){\n\n        super.paintComponent(g);\n        g.drawImage(backgroundImage, xpos, ypos, null);\n        g.drawImage(birdImage,birdX,birdY,null);\n    }\n\n    @Override\n    public void actionPerformed(ActionEvent e){\n        \n        // scoreBoard.setText(&quot;Score: &quot;+score);\n        repaint();\n    }\n\n    //The function to create keybindings\n    public void createKeyBindings(JPanel p) {\n\n        InputMap im = p.getInputMap(JPanel.WHEN_IN_FOCUSED_WINDOW);\n        ActionMap am = p.getActionMap();\n        leftAction = new LeftAction();\n        rightAction = new RightAction();\n        im.put(KeyStroke.getKeyStroke(&quot;LEFT&quot;), &quot;left&quot;);\n        im.put(KeyStroke.getKeyStroke(&quot;RIGHT&quot;), &quot;right&quot;);\n        am.put(&quot;left&quot;, leftAction);\n        am.put(&quot;right&quot;, rightAction);\n    }\n\n    public class LeftAction extends AbstractAction{\n        @Override\n        public void actionPerformed(ActionEvent e){\n            if(birdX&gt;0)\n                birdX = birdX-10;\n            repaint();\n        }\n    }\n\n    public class RightAction extends AbstractAction{\n        @Override\n        public void actionPerformed(ActionEvent e){\n            if(birdX+530&lt;1080)\n                birdX = birdX+10;\n            repaint();\n        }\n    }\n\n    public void gamePageVisibility(boolean x){\n        this.setVisible(x);\n    }\n\n}\n</code></pre>\n<p><strong>EDIT: I found the actual reason my application was lagging. The problem was mainly related with Linux OS graphics and solved it by adding <code>Toolkit.getDefaultToolkit().sync()</code> to my loop.</strong></p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":1197390,"reputation":1157,"user_id":4467687,"display_name":"Crispert"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1651572167,"creation_date":1651482943,"answer_id":72084634,"question_id":72075798,"body_markdown":"There are several problems:\r\n\r\n- if you want to access a static field outside of its class in Java you need to either specify the class name like this `DrawView.mCanvas` or to use a static import (add a line \r\n\r\n      import static /*class.package.name.here.*/DrawView.mCanvas;\r\n\r\n  above the class declaration and then you can use mCanvas directly)\r\n\r\n- drawBoundingBox() is a method in DrawView, not canvas so the correct way to call would be drawView.drawBoundingBox()\r\n\r\n- even if the class would compile you&#39;d get a NullPointerException when drawRoundingBox() was called because mCanvas has not been initialized in DrawView\r\n\r\n- the canvas in a View is only a temporary variable as parameter to onDraw used to create the user interface at that moment in time (each frame) and is not meant to be used outside of that method since it points/refers to a video memory buffer that is continuously changed\r\n\r\nWhat you should do is create a Canvas for the Bitmap you&#39;re trying to draw on and use it (you don&#39;t need a view to alter a bitmap):\r\n\r\n    //if img is the bitmap you want to draw on\r\n    Canvas c = new Canvas(img); //before createScaledBitmap()\r\n    drawBoundingBox(c);// move onDraw code to drawBoundingBox()\r\n                       // and the latter method to CameraActivity\r\n    \r\n    //Should you need to get the bitmap screenshot of a view simply draw it:\r\n    Bitmap vscr = Bitmap.createBitmap(yourView.getWidth(), yourView.getHeight(), Bitmap.Config.ARGB_8888);\r\n    //ensure the view was added to the layout (measured) so that its width and height are greater than  zero when you create the bitmap\r\n    yourView.draw(vscr);\r\n\r\n\r\n\r\nExample\r\n\r\n    public class CameraActivity extends ActivityCompat {\r\n\r\n\r\n        public void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            //...\r\n\r\n            predictBtn.setOnClickListener(new View.OnClickListener()  {\r\n\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n                img = Bitmap.createScaledBitmap(img, 128, 128, true);\r\n\r\n                try {\r\n                    //DrawView drawView = new DrawView(getApplicationContext());\r\n                    Android model = Android.newInstance(getApplicationContext());\r\n\r\n                    // Creates inputs for reference.\r\n                    TensorImage image = TensorImage.fromBitmap(img);\r\n\r\n\r\n                    // Runs model inference and gets result.\r\n                    Android.Outputs outputs = model.process(image);\r\n                    Android.DetectionResult detectionResult = outputs.getDetectionResultList().get(0);\r\n\r\n                    // Gets result from DetectionResult.\r\n                    float score = detectionResult.getScoreAsFloat();\r\n                    RectF location = detectionResult.getLocationAsRectF();\r\n                    String category = detectionResult.getCategoryAsString();\r\n\r\n                    // Releases model resources if no longer used.\r\n                    Canvas canvas = new Canvas(img);\r\n\r\n                    drawBoundingBox(canvas, location);\r\n                    model.close();\r\n                    // here we will print out the results of the object to text views based on the image that is inputted by the user\r\n                    // we print out object type and its accuracy score\r\n                    mCanvasView.drawRect();\r\n                    objecttv.setText(category);\r\n                    scoretv.setText(Float.toString(score));\r\n\r\n                } catch (IOException e) {\r\n                    // TODO Handle the exception\r\n                }\r\n\r\n            }\r\n        });\r\n\r\n        } //onCreate\r\n\r\n        void drawBoundingBox(Canvas canvas, RectF location) {\r\n            // Draw what you want\r\n            Paint boxPaint = new Paint();\r\n            boxPaint.setColor(Color.RED);\r\n            boxPaint.setAlpha(200);\r\n            boxPaint.setStyle(Paint.Style.STROKE);\r\n            canvas.drawRect(location, boxPaint);\r\n       }\r\n\r\n    }","title":"Android - draw rectangle on uploaded bitmap image","body":"<p>There are several problems:</p>\n<ul>\n<li><p>if you want to access a static field outside of its class in Java you need to either specify the class name like this <code>DrawView.mCanvas</code> or to use a static import (add a line</p>\n<pre><code>import static /*class.package.name.here.*/DrawView.mCanvas;\n</code></pre>\n<p>above the class declaration and then you can use mCanvas directly)</p>\n</li>\n<li><p>drawBoundingBox() is a method in DrawView, not canvas so the correct way to call would be drawView.drawBoundingBox()</p>\n</li>\n<li><p>even if the class would compile you'd get a NullPointerException when drawRoundingBox() was called because mCanvas has not been initialized in DrawView</p>\n</li>\n<li><p>the canvas in a View is only a temporary variable as parameter to onDraw used to create the user interface at that moment in time (each frame) and is not meant to be used outside of that method since it points/refers to a video memory buffer that is continuously changed</p>\n</li>\n</ul>\n<p>What you should do is create a Canvas for the Bitmap you're trying to draw on and use it (you don't need a view to alter a bitmap):</p>\n<pre><code>//if img is the bitmap you want to draw on\nCanvas c = new Canvas(img); //before createScaledBitmap()\ndrawBoundingBox(c);// move onDraw code to drawBoundingBox()\n                   // and the latter method to CameraActivity\n\n//Should you need to get the bitmap screenshot of a view simply draw it:\nBitmap vscr = Bitmap.createBitmap(yourView.getWidth(), yourView.getHeight(), Bitmap.Config.ARGB_8888);\n//ensure the view was added to the layout (measured) so that its width and height are greater than  zero when you create the bitmap\nyourView.draw(vscr);\n</code></pre>\n<p>Example</p>\n<pre><code>public class CameraActivity extends ActivityCompat {\n\n\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        //...\n\n        predictBtn.setOnClickListener(new View.OnClickListener()  {\n\n        @Override\n        public void onClick(View v) {\n\n            img = Bitmap.createScaledBitmap(img, 128, 128, true);\n\n            try {\n                //DrawView drawView = new DrawView(getApplicationContext());\n                Android model = Android.newInstance(getApplicationContext());\n\n                // Creates inputs for reference.\n                TensorImage image = TensorImage.fromBitmap(img);\n\n\n                // Runs model inference and gets result.\n                Android.Outputs outputs = model.process(image);\n                Android.DetectionResult detectionResult = outputs.getDetectionResultList().get(0);\n\n                // Gets result from DetectionResult.\n                float score = detectionResult.getScoreAsFloat();\n                RectF location = detectionResult.getLocationAsRectF();\n                String category = detectionResult.getCategoryAsString();\n\n                // Releases model resources if no longer used.\n                Canvas canvas = new Canvas(img);\n\n                drawBoundingBox(canvas, location);\n                model.close();\n                // here we will print out the results of the object to text views based on the image that is inputted by the user\n                // we print out object type and its accuracy score\n                mCanvasView.drawRect();\n                objecttv.setText(category);\n                scoretv.setText(Float.toString(score));\n\n            } catch (IOException e) {\n                // TODO Handle the exception\n            }\n\n        }\n    });\n\n    } //onCreate\n\n    void drawBoundingBox(Canvas canvas, RectF location) {\n        // Draw what you want\n        Paint boxPaint = new Paint();\n        boxPaint.setColor(Color.RED);\n        boxPaint.setAlpha(200);\n        boxPaint.setStyle(Paint.Style.STROKE);\n        canvas.drawRect(location, boxPaint);\n   }\n\n}\n</code></pre>\n"}],"owner":{"account_id":24357463,"reputation":321,"user_id":18292391,"display_name":"mrOlympia"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":295,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":72084634,"answer_count":1,"score":2,"last_activity_date":1651572167,"creation_date":1651400029,"question_id":72075798,"body_markdown":"I am using a tflite model and I am trying to draw a RectF on the image where the object is detected.\r\n\r\nHere is my CameraActivity.java class where I am detecting the object.\r\n```\r\npredictBtn.setOnClickListener(new View.OnClickListener() {\r\n\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n                img = Bitmap.createScaledBitmap(img, 128, 128, true);\r\n\r\n                try {\r\n                    DrawView drawView = new DrawView(getApplicationContext());\r\n                    Android model = Android.newInstance(getApplicationContext());\r\n\r\n                    // Creates inputs for reference.\r\n                    TensorImage image = TensorImage.fromBitmap(img);\r\n\r\n\r\n                    // Runs model inference and gets result.\r\n                    Android.Outputs outputs = model.process(image);\r\n                    Android.DetectionResult detectionResult = outputs.getDetectionResultList().get(0);\r\n\r\n                    // Gets result from DetectionResult.\r\n                    float score = detectionResult.getScoreAsFloat();\r\n                    RectF location = detectionResult.getLocationAsRectF();\r\n                    String category = detectionResult.getCategoryAsString();\r\n\r\n                    // Releases model resources if no longer used.\r\n\r\n                    mCanvas.drawBoundingBox();\r\n                    model.close();\r\n                    // here we will print out the results of the object to text views based on the image that is inputted by the user\r\n                    // we print out object type and its accuracy score\r\n                    mCanvasView.drawRect();\r\n                    objecttv.setText(category);\r\n                    scoretv.setText(Float.toString(score));\r\n\r\n                } catch (IOException e) {\r\n                    // TODO Handle the exception\r\n                }\r\n\r\n            }\r\n        }\r\n        );\r\n```\r\nHere is my DrawView.java class\r\n\r\n```\r\nimport android.content.Context;\r\nimport android.graphics.Canvas;\r\nimport android.graphics.Color;\r\nimport android.graphics.Paint;\r\nimport android.util.AttributeSet;\r\nimport android.view.View;\r\n\r\npublic class DrawView extends View {\r\n    Paint boxPaint;\r\n    public static Canvas mCanvas;\r\n\r\n    public DrawView(Context context) {\r\n        super(context);\r\n        boxPaint = new Paint();\r\n    }\r\n\r\n    public void drawBoundingBox() {\r\n        // Refresh the view by calling onDraw function\r\n        invalidate();\r\n    }\r\n\r\n    \r\n    public void onDraw(Canvas canvas, AttributeSet attrs) {\r\n        // Draw what you want\r\n        boxPaint.setColor(Color.RED);\r\n        boxPaint.setAlpha(200);\r\n        boxPaint.setStyle(Paint.Style.STROKE);\r\n        canvas.drawRect(location, boxPaint);\r\n    }\r\n}\r\n```\r\nIn my activity_camera.xml , I added the drawview to match the image I am uploading.\r\n\r\n```\r\n  &lt;com.example.aPROJECT.DrawView\r\n        android:id=&quot;@+id/canvasView&quot;\r\n        android:layout_width=&quot;281dp&quot;\r\n        android:layout_height=&quot;324dp&quot;\r\n        android:layout_marginTop=&quot;30dp&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n         /&gt;\r\n\r\n    &lt;ImageView\r\n        android:id=&quot;@+id/imageView&quot;\r\n        android:layout_width=&quot;281dp&quot;\r\n        android:layout_height=&quot;324dp&quot;\r\n        android:layout_marginTop=&quot;30dp&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n        app:srcCompat=&quot;@android:drawable/ic_menu_gallery&quot;\r\n        tools:ignore=&quot;ImageContrastCheck&quot; /&gt;\r\n```\r\n\r\n\r\n\r\nIn the CameraActivity.java , on line `mCanvas.drawBoundingBox();` it cannot access the mCanvas from the DrawView.java class.\r\n\r\nOn line `mCanvasView.drawRect();`  it cannot resolve the symbol .\r\n\r\nWhat am I missing here?","title":"Android - draw rectangle on uploaded bitmap image","body":"<p>I am using a tflite model and I am trying to draw a RectF on the image where the object is detected.</p>\n<p>Here is my CameraActivity.java class where I am detecting the object.</p>\n<pre><code>predictBtn.setOnClickListener(new View.OnClickListener() {\n\n            @Override\n            public void onClick(View v) {\n\n                img = Bitmap.createScaledBitmap(img, 128, 128, true);\n\n                try {\n                    DrawView drawView = new DrawView(getApplicationContext());\n                    Android model = Android.newInstance(getApplicationContext());\n\n                    // Creates inputs for reference.\n                    TensorImage image = TensorImage.fromBitmap(img);\n\n\n                    // Runs model inference and gets result.\n                    Android.Outputs outputs = model.process(image);\n                    Android.DetectionResult detectionResult = outputs.getDetectionResultList().get(0);\n\n                    // Gets result from DetectionResult.\n                    float score = detectionResult.getScoreAsFloat();\n                    RectF location = detectionResult.getLocationAsRectF();\n                    String category = detectionResult.getCategoryAsString();\n\n                    // Releases model resources if no longer used.\n\n                    mCanvas.drawBoundingBox();\n                    model.close();\n                    // here we will print out the results of the object to text views based on the image that is inputted by the user\n                    // we print out object type and its accuracy score\n                    mCanvasView.drawRect();\n                    objecttv.setText(category);\n                    scoretv.setText(Float.toString(score));\n\n                } catch (IOException e) {\n                    // TODO Handle the exception\n                }\n\n            }\n        }\n        );\n</code></pre>\n<p>Here is my DrawView.java class</p>\n<pre><code>import android.content.Context;\nimport android.graphics.Canvas;\nimport android.graphics.Color;\nimport android.graphics.Paint;\nimport android.util.AttributeSet;\nimport android.view.View;\n\npublic class DrawView extends View {\n    Paint boxPaint;\n    public static Canvas mCanvas;\n\n    public DrawView(Context context) {\n        super(context);\n        boxPaint = new Paint();\n    }\n\n    public void drawBoundingBox() {\n        // Refresh the view by calling onDraw function\n        invalidate();\n    }\n\n    \n    public void onDraw(Canvas canvas, AttributeSet attrs) {\n        // Draw what you want\n        boxPaint.setColor(Color.RED);\n        boxPaint.setAlpha(200);\n        boxPaint.setStyle(Paint.Style.STROKE);\n        canvas.drawRect(location, boxPaint);\n    }\n}\n</code></pre>\n<p>In my activity_camera.xml , I added the drawview to match the image I am uploading.</p>\n<pre><code>  &lt;com.example.aPROJECT.DrawView\n        android:id=&quot;@+id/canvasView&quot;\n        android:layout_width=&quot;281dp&quot;\n        android:layout_height=&quot;324dp&quot;\n        android:layout_marginTop=&quot;30dp&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n         /&gt;\n\n    &lt;ImageView\n        android:id=&quot;@+id/imageView&quot;\n        android:layout_width=&quot;281dp&quot;\n        android:layout_height=&quot;324dp&quot;\n        android:layout_marginTop=&quot;30dp&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:srcCompat=&quot;@android:drawable/ic_menu_gallery&quot;\n        tools:ignore=&quot;ImageContrastCheck&quot; /&gt;\n</code></pre>\n<p>In the CameraActivity.java , on line <code>mCanvas.drawBoundingBox();</code> it cannot access the mCanvas from the DrawView.java class.</p>\n<p>On line <code>mCanvasView.drawRect();</code>  it cannot resolve the symbol .</p>\n<p>What am I missing here?</p>\n"},{"tags":["java","servlets","performance-testing","performance-measuring"],"owner":{"account_id":25181007,"reputation":81,"user_id":19022508,"display_name":"Mykhailo Pavliuk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":167,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1651572108,"creation_date":1651568111,"question_id":72096972,"body_markdown":"There is a Java EE project. Its goal is getting client-side and server-side performance metrics (as much as possible) of some predeffined URL with some frequency and collect that data for visualisation and so on...\r\nSo I expect to recieve those metrics (it could be done with different methods/libraries, it&#39;s okey). \r\n\r\nI suppose that I can get responce time by using org.apache.http. But is there some better way with probably some more information besides responce time of server-side peromance metric? \r\nAnd is there some library or method of getting cliend-side metrics?","title":"How can I get client-side and server-side performance metrics in Java EE (Servlets) project","body":"<p>There is a Java EE project. Its goal is getting client-side and server-side performance metrics (as much as possible) of some predeffined URL with some frequency and collect that data for visualisation and so on...\nSo I expect to recieve those metrics (it could be done with different methods/libraries, it's okey).</p>\n<p>I suppose that I can get responce time by using org.apache.http. But is there some better way with probably some more information besides responce time of server-side peromance metric?\nAnd is there some library or method of getting cliend-side metrics?</p>\n"},{"tags":["java","xml"],"comments":[{"owner":{"display_name":"user2845360"},"score":1,"creation_date":1458741799,"post_id":36179764,"comment_id":59995682,"body_markdown":"What have you tried this far? Consider posting your code. Having shown some effort in terms of actual code is usually considered a good practice when asking questions. It&#39;s also much easier to provide a usable answer after having seen what you&#39;ve already tried.","body":"What have you tried this far? Consider posting your code. Having shown some effort in terms of actual code is usually considered a good practice when asking questions. It&#39;s also much easier to provide a usable answer after having seen what you&#39;ve already tried."},{"owner":{"account_id":208830,"reputation":10240,"user_id":459557,"display_name":"vanje"},"score":0,"creation_date":1458742781,"post_id":36179764,"comment_id":59996499,"body_markdown":"Hello JMK, please take the [tour](http://stackoverflow.com/tour) and [How do I ask a good question](http://stackoverflow.com/help/how-to-ask).","body":"Hello JMK, please take the <a href=\"http://stackoverflow.com/tour\">tour</a> and <a href=\"http://stackoverflow.com/help/how-to-ask\">How do I ask a good question</a>."},{"owner":{"account_id":7719155,"reputation":219,"user_id":5845895,"accept_rate":45,"display_name":"JMK"},"score":0,"creation_date":1458742885,"post_id":36179764,"comment_id":59996595,"body_markdown":"@vanje imho I know how to ask good question here. But how can I show what I have already done when I am stucked and have no idea where to start? :)","body":"@vanje imho I know how to ask good question here. But how can I show what I have already done when I am stucked and have no idea where to start? :)"},{"owner":{"account_id":208830,"reputation":10240,"user_id":459557,"display_name":"vanje"},"score":0,"creation_date":1458743325,"post_id":36179764,"comment_id":59996926,"body_markdown":"Then do some research. As a starting point, you should consider using a SAX parser. Google for it. There you can implement a callback for each start and end element. You could hold a stack for the element path. Adding the current element at start element and removing the last element on end element callback.","body":"Then do some research. As a starting point, you should consider using a SAX parser. Google for it. There you can implement a callback for each start and end element. You could hold a stack for the element path. Adding the current element at start element and removing the last element on end element callback."},{"owner":{"account_id":4440133,"reputation":13373,"user_id":3614835,"accept_rate":67,"display_name":"Jeffrey Bosboom"},"score":0,"creation_date":1458771442,"post_id":36179764,"comment_id":60014594,"body_markdown":"If you have no idea where to start, type &quot;parse XML with Java&quot; into Google.  Now you have a place to start research from.  (Also, the official Java Tutorials have a decent trail on XML processing.)","body":"If you have no idea where to start, type &quot;parse XML with Java&quot; into Google.  Now you have a place to start research from.  (Also, the official Java Tutorials have a decent trail on XML processing.)"}],"answers":[{"tags":[],"owner":{"account_id":7236580,"reputation":16350,"user_id":5521607,"accept_rate":25,"display_name":"Olivier Boiss&#233;"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1458743040,"creation_date":1458740607,"answer_id":36179901,"question_id":36179764,"body_markdown":"you can you [xPath][1] to select nodes by expressions and print the path of each nodes,\r\n\r\n\r\n  [1]: http://viralpatel.net/blogs/java-xml-xpath-tutorial-parse-xml/\r\n\r\nHere is the java code : \r\n\r\n    public static void main(String[] args) throws Exception {\r\n\t\tFile file = new File(&quot;src/main/resources/file.xml&quot;);\r\n\t\tXPath xPath =  XPathFactory.newInstance().newXPath();\r\n\t\tString expression = &quot;//*[not(*)]&quot;;\r\n\t\t\t\r\n\t\tDocumentBuilderFactory builderFactory = DocumentBuilderFactory.newInstance();\r\n\t\tDocumentBuilder builder = builderFactory.newDocumentBuilder();\r\n\t\tDocument document = builder.parse(file);\r\n\t\tdocument.getDocumentElement().normalize();\r\n\t\t\r\n\t\tNodeList nodeList = (NodeList) xPath.compile(expression).evaluate(document, XPathConstants.NODESET);\r\n\t\tfor(int i = 0 ; i &lt; nodeList.getLength(); i++) {\r\n\t\t\tSystem.out.println(getXPath(nodeList.item(i)));\r\n\t\t}\r\n\t}\r\n\t\r\n\tprivate static String getXPath(Node node) {\r\n\t    Node parent = node.getParentNode();\r\n\t    if (parent == null) {\r\n\t        return node.getNodeName();\r\n\t    }\r\n\t    return getXPath(parent) + &quot;/&quot; + node.getNodeName();\r\n\t}\r\nThe final output is :\r\n\r\ndocument/message/metadata/msg_id\r\n\r\ndocument/message/metadata/client_type\r\n\r\ndocument/message/individual/name\r\n\r\ndocument/message/individual/surname","title":"Get path to all XML&#39;s nodes","body":"<p>you can you <a href=\"http://viralpatel.net/blogs/java-xml-xpath-tutorial-parse-xml/\" rel=\"noreferrer\">xPath</a> to select nodes by expressions and print the path of each nodes,</p>\n\n<p>Here is the java code : </p>\n\n<pre><code>public static void main(String[] args) throws Exception {\n    File file = new File(\"src/main/resources/file.xml\");\n    XPath xPath =  XPathFactory.newInstance().newXPath();\n    String expression = \"//*[not(*)]\";\n\n    DocumentBuilderFactory builderFactory = DocumentBuilderFactory.newInstance();\n    DocumentBuilder builder = builderFactory.newDocumentBuilder();\n    Document document = builder.parse(file);\n    document.getDocumentElement().normalize();\n\n    NodeList nodeList = (NodeList) xPath.compile(expression).evaluate(document, XPathConstants.NODESET);\n    for(int i = 0 ; i &lt; nodeList.getLength(); i++) {\n        System.out.println(getXPath(nodeList.item(i)));\n    }\n}\n\nprivate static String getXPath(Node node) {\n    Node parent = node.getParentNode();\n    if (parent == null) {\n        return node.getNodeName();\n    }\n    return getXPath(parent) + \"/\" + node.getNodeName();\n}\n</code></pre>\n\n<p>The final output is :</p>\n\n<p>document/message/metadata/msg_id</p>\n\n<p>document/message/metadata/client_type</p>\n\n<p>document/message/individual/name</p>\n\n<p>document/message/individual/surname</p>\n"},{"tags":[],"owner":{"account_id":11299252,"reputation":161,"user_id":8285760,"display_name":"Jason Smiley"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1518988307,"creation_date":1518988307,"answer_id":48856626,"question_id":36179764,"body_markdown":"Can&#39;t comment yet (no points yet), but the previously supplied answer doesn&#39;t address Nodes inside an array. the following will determine the full Path to a node when the child node being checked is inside an array element of some sort  \r\n    \r\n    public static void main(String[] args) throws Exception {\r\n       File file = new File(&quot;src/main/resources/file.xml&quot;);\r\n       XPath xPath =  XPathFactory.newInstance().newXPath();\r\n       String expression = &quot;//*[not(*)]&quot;;\r\n\r\n       DocumentBuilderFactory builderFactory = \r\n       DocumentBuilderFactory.newInstance();\r\n       DocumentBuilder builder = builderFactory.newDocumentBuilder();\r\n       Document document = builder.parse(file);\r\n       document.getDocumentElement().normalize();\r\n\r\n       NodeList nodeList = (NodeList) \r\n       xPath.compile(expression).evaluate(document, XPathConstants.NODESET);\r\n       for(int i = 0 ; i &lt; nodeList.getLength(); i++) {\r\n          System.out.println(getNodePath(nodeList.item(i)));\r\n       }\r\n    }\r\n\r\n    /**\r\n     * Builds the Path to the Node in the XML Structure.\r\n     *\r\n     * @param node Child {@link Node}\r\n     * @return {@link String} representation of Path to XML Node.\r\n     */\r\n    public String getNodePath(Node node) {\r\n        if(node == null) {\r\n            throw new IllegalArgumentException(&quot;Node cannot be null&quot;);\r\n        }\r\n        StringBuilder pathBuilder = new StringBuilder(&quot;/&quot;);\r\n        pathBuilder.append(node.getNodeName());\r\n\r\n        Node currentNode = node;\r\n\r\n        if(currentNode.getNodeType() != Node.DOCUMENT_NODE) {\r\n            while (currentNode.getParentNode() != null) {\r\n                currentNode = currentNode.getParentNode();\r\n\r\n                if(currentNode.getNodeType() == Node.DOCUMENT_NODE) {\r\n                    break;\r\n                } else if(getIndexOfArrayNode(currentNode) != null) {\r\n                    pathBuilder.insert(0, &quot;/&quot; + currentNode.getNodeName() + &quot;[&quot; + getIndexOfArrayNode(currentNode) + &quot;]&quot;);\r\n                } else {\r\n                    pathBuilder.insert(0, &quot;/&quot; + currentNode.getNodeName());\r\n                }\r\n            }\r\n        }\r\n\r\n        return pathBuilder.toString();\r\n    }\r\n\r\n    /**\r\n     * TODO - doesn&#39;t handle Formatted XML - treats formatting as Text Nodes and needs to skip these.\r\n     *\r\n     * Light node test to see if Node is part of an Array of Elements.\r\n     *\r\n     * @param node {@link Node}\r\n     * @return True if part of an array. Otherwise false.\r\n     */\r\n    private boolean isArrayNode(Node node) {\r\n        if (node.getNextSibling() == null &amp;&amp; node.getPreviousSibling() == null) {\r\n            // Node has no siblings\r\n            return false;\r\n        } else {\r\n            // Check if node siblings are of the same name. If so, then we are inside an array.\r\n            return (node.getNextSibling() != null &amp;&amp; node.getNextSibling().getNodeName().equalsIgnoreCase(node.getNodeName()))\r\n                    || (node.getPreviousSibling() != null &amp;&amp; node.getPreviousSibling().getNodeName().equalsIgnoreCase(node.getNodeName()));\r\n        }\r\n    }\r\n\r\n    /**\r\n     *  TODO - doesn&#39;t handle Formatted XML - treats formatting as Text Nodes and needs to skip these.\r\n     *  Figures out the Index of the Array Node.\r\n     *\r\n     *  @param node {@link Node}\r\n     *  @return Index of element in array. Returns null if not inside an array.\r\n     */\r\n    private Integer getIndexOfArrayNode(Node node) {\r\n        if(isArrayNode(node)) {\r\n            int leftCount = 0;\r\n\r\n            Node currentNode = node.getPreviousSibling();\r\n\r\n            while(currentNode != null) {\r\n                leftCount++;\r\n                currentNode = currentNode.getPreviousSibling();\r\n            }\r\n            return leftCount;\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n\r\noutputs would be something like this (potentially):\r\n\r\n    /messages[0]/message/metadata/msg_id\r\n    /messages[0]/message/metadata/client_type\r\n    /messages[0]/message/individual/name\r\n    /messages[1]/message/metadata/msg_id\r\n    /messages[1]/message/metadata/client_type\r\n    /messages[1]/message/individual/name\r\n    etc.","title":"Get path to all XML&#39;s nodes","body":"<p>Can't comment yet (no points yet), but the previously supplied answer doesn't address Nodes inside an array. the following will determine the full Path to a node when the child node being checked is inside an array element of some sort  </p>\n\n<pre><code>public static void main(String[] args) throws Exception {\n   File file = new File(\"src/main/resources/file.xml\");\n   XPath xPath =  XPathFactory.newInstance().newXPath();\n   String expression = \"//*[not(*)]\";\n\n   DocumentBuilderFactory builderFactory = \n   DocumentBuilderFactory.newInstance();\n   DocumentBuilder builder = builderFactory.newDocumentBuilder();\n   Document document = builder.parse(file);\n   document.getDocumentElement().normalize();\n\n   NodeList nodeList = (NodeList) \n   xPath.compile(expression).evaluate(document, XPathConstants.NODESET);\n   for(int i = 0 ; i &lt; nodeList.getLength(); i++) {\n      System.out.println(getNodePath(nodeList.item(i)));\n   }\n}\n\n/**\n * Builds the Path to the Node in the XML Structure.\n *\n * @param node Child {@link Node}\n * @return {@link String} representation of Path to XML Node.\n */\npublic String getNodePath(Node node) {\n    if(node == null) {\n        throw new IllegalArgumentException(\"Node cannot be null\");\n    }\n    StringBuilder pathBuilder = new StringBuilder(\"/\");\n    pathBuilder.append(node.getNodeName());\n\n    Node currentNode = node;\n\n    if(currentNode.getNodeType() != Node.DOCUMENT_NODE) {\n        while (currentNode.getParentNode() != null) {\n            currentNode = currentNode.getParentNode();\n\n            if(currentNode.getNodeType() == Node.DOCUMENT_NODE) {\n                break;\n            } else if(getIndexOfArrayNode(currentNode) != null) {\n                pathBuilder.insert(0, \"/\" + currentNode.getNodeName() + \"[\" + getIndexOfArrayNode(currentNode) + \"]\");\n            } else {\n                pathBuilder.insert(0, \"/\" + currentNode.getNodeName());\n            }\n        }\n    }\n\n    return pathBuilder.toString();\n}\n\n/**\n * TODO - doesn't handle Formatted XML - treats formatting as Text Nodes and needs to skip these.\n *\n * Light node test to see if Node is part of an Array of Elements.\n *\n * @param node {@link Node}\n * @return True if part of an array. Otherwise false.\n */\nprivate boolean isArrayNode(Node node) {\n    if (node.getNextSibling() == null &amp;&amp; node.getPreviousSibling() == null) {\n        // Node has no siblings\n        return false;\n    } else {\n        // Check if node siblings are of the same name. If so, then we are inside an array.\n        return (node.getNextSibling() != null &amp;&amp; node.getNextSibling().getNodeName().equalsIgnoreCase(node.getNodeName()))\n                || (node.getPreviousSibling() != null &amp;&amp; node.getPreviousSibling().getNodeName().equalsIgnoreCase(node.getNodeName()));\n    }\n}\n\n/**\n *  TODO - doesn't handle Formatted XML - treats formatting as Text Nodes and needs to skip these.\n *  Figures out the Index of the Array Node.\n *\n *  @param node {@link Node}\n *  @return Index of element in array. Returns null if not inside an array.\n */\nprivate Integer getIndexOfArrayNode(Node node) {\n    if(isArrayNode(node)) {\n        int leftCount = 0;\n\n        Node currentNode = node.getPreviousSibling();\n\n        while(currentNode != null) {\n            leftCount++;\n            currentNode = currentNode.getPreviousSibling();\n        }\n        return leftCount;\n    } else {\n        return null;\n    }\n}\n</code></pre>\n\n<p>outputs would be something like this (potentially):</p>\n\n<pre><code>/messages[0]/message/metadata/msg_id\n/messages[0]/message/metadata/client_type\n/messages[0]/message/individual/name\n/messages[1]/message/metadata/msg_id\n/messages[1]/message/metadata/client_type\n/messages[1]/message/individual/name\netc.\n</code></pre>\n"}],"owner":{"account_id":7719155,"reputation":219,"user_id":5845895,"accept_rate":45,"display_name":"JMK"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14758,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"accepted_answer_id":36179901,"answer_count":2,"score":3,"last_activity_date":1651572079,"creation_date":1458740236,"question_id":36179764,"body_markdown":"I have an example XML as follows:\r\n\r\n    &lt;message&gt;\r\n      &lt;metadata&gt; \r\n        &lt;msg_id&gt;1&lt;/msg_id&gt;\r\n        &lt;client_type&gt;type1&lt;/client_type&gt;\r\n      &lt;/metadata&gt;\r\n      &lt;individual&gt;\r\n        &lt;name&gt;John&lt;/name&gt;\r\n        &lt;surname&gt;Smith&lt;/surname&gt;\r\n          &lt;additional_information&gt;\r\n    \t\t&lt;e_mail&gt;aaa@gmail.com&lt;/e_mail&gt;\r\n    \t\t&lt;phone_number&gt;11110000&lt;/phone_number&gt;\r\n    \t  &lt;/additional_information&gt;\r\n      &lt;/individual&gt;\r\n    &lt;/message&gt;\r\n\r\nmy goal is to get output which will show me the path to every element XML like here:\r\n\r\n    /message/metadata/msg_id\r\n    /message/metadata/client_type\r\n    /message/individual/name\r\n\r\nand so one. How can I handle this in Java? \r\n\r\nThanks a lot in advance for any hints!","title":"Get path to all XML&#39;s nodes","body":"<p>I have an example XML as follows:</p>\n\n<pre><code>&lt;message&gt;\n  &lt;metadata&gt; \n    &lt;msg_id&gt;1&lt;/msg_id&gt;\n    &lt;client_type&gt;type1&lt;/client_type&gt;\n  &lt;/metadata&gt;\n  &lt;individual&gt;\n    &lt;name&gt;John&lt;/name&gt;\n    &lt;surname&gt;Smith&lt;/surname&gt;\n      &lt;additional_information&gt;\n        &lt;e_mail&gt;aaa@gmail.com&lt;/e_mail&gt;\n        &lt;phone_number&gt;11110000&lt;/phone_number&gt;\n      &lt;/additional_information&gt;\n  &lt;/individual&gt;\n&lt;/message&gt;\n</code></pre>\n\n<p>my goal is to get output which will show me the path to every element XML like here:</p>\n\n<pre><code>/message/metadata/msg_id\n/message/metadata/client_type\n/message/individual/name\n</code></pre>\n\n<p>and so one. How can I handle this in Java? </p>\n\n<p>Thanks a lot in advance for any hints!</p>\n"},{"tags":["javascript","java"],"comments":[{"owner":{"account_id":10934700,"reputation":1723,"user_id":8036814,"display_name":"Andus"},"score":0,"creation_date":1651646629,"post_id":72096882,"comment_id":127409735,"body_markdown":"If you could use Typescript on top of JavaScript then you can have class and static variable just like Java","body":"If you could use Typescript on top of JavaScript then you can have class and static variable just like Java"}],"answers":[{"tags":[],"owner":{"account_id":23122127,"reputation":1,"user_id":17228512,"display_name":"Marshall Crew"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651569067,"creation_date":1651569067,"answer_id":72097149,"question_id":72096882,"body_markdown":"It depends.\r\n\r\nAs there is Web Development among the topics and there is no NodeJS, my assumption is that this is Web and HTTP communication related question. So the JavaScript is HTTP client side run by the browser and Java class is server side e.g. a Servlet.\r\n\r\nIn Java there is request and response objects. To pass a value back to the client what you do is write the value as string to the response.\r\n\r\nresponse.getWriter().append(value.toString());","title":"How to convert Java class variables to JavaScript?","body":"<p>It depends.</p>\n<p>As there is Web Development among the topics and there is no NodeJS, my assumption is that this is Web and HTTP communication related question. So the JavaScript is HTTP client side run by the browser and Java class is server side e.g. a Servlet.</p>\n<p>In Java there is request and response objects. To pass a value back to the client what you do is write the value as string to the response.</p>\n<p>response.getWriter().append(value.toString());</p>\n"},{"tags":[],"owner":{"account_id":205805,"reputation":5603,"user_id":454741,"accept_rate":67,"display_name":"VadimB"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651571626,"creation_date":1651571626,"answer_id":72097655,"question_id":72096882,"body_markdown":"If your web-server exposes API and your DTOs are valid API models, you can expose it through Swagger description. Integrate Swagger in SpringBoot is very easy: https://www.baeldung.com/swagger-2-documentation-for-spring-rest-api and can be done almost declaratively.\r\n\r\nHaving this done, you already can represent your API and DTOs in a machine-friendly description language (JSON), so can validate/use/build your front-end model against server DTO representation by casting it into JS objects.\r\n\r\nFor casting can be used swagger parser https://github.com/APIDevTools/swagger-parser\r\n\r\n```\r\nSwaggerParser.validate(myAPI, (err, api) =&gt; {\r\n    console.log(&quot;API name: %s, Version: %s&quot;, api.info.title, api.info.version);\r\n});\r\n```\r\n\r\nIn this example your `api` variable will contains the `definitions` property with all your public server DTOs, so you can dynamically use it. Or, if you need it at compile time - generate these objects as part of the pre-build action. \r\n\r\nHope this helps.","title":"How to convert Java class variables to JavaScript?","body":"<p>If your web-server exposes API and your DTOs are valid API models, you can expose it through Swagger description. Integrate Swagger in SpringBoot is very easy: <a href=\"https://www.baeldung.com/swagger-2-documentation-for-spring-rest-api\" rel=\"nofollow noreferrer\">https://www.baeldung.com/swagger-2-documentation-for-spring-rest-api</a> and can be done almost declaratively.</p>\n<p>Having this done, you already can represent your API and DTOs in a machine-friendly description language (JSON), so can validate/use/build your front-end model against server DTO representation by casting it into JS objects.</p>\n<p>For casting can be used swagger parser <a href=\"https://github.com/APIDevTools/swagger-parser\" rel=\"nofollow noreferrer\">https://github.com/APIDevTools/swagger-parser</a></p>\n<pre><code>SwaggerParser.validate(myAPI, (err, api) =&gt; {\n    console.log(&quot;API name: %s, Version: %s&quot;, api.info.title, api.info.version);\n});\n</code></pre>\n<p>In this example your <code>api</code> variable will contains the <code>definitions</code> property with all your public server DTOs, so you can dynamically use it. Or, if you need it at compile time - generate these objects as part of the pre-build action.</p>\n<p>Hope this helps.</p>\n"}],"owner":{"account_id":14629078,"reputation":1614,"user_id":10565504,"display_name":"CptDayDreamer"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1651571626,"creation_date":1651567603,"question_id":72096882,"body_markdown":"We got a project where we are using multiple databases with Spring Boot as backend and AngularJS as frontend. \r\nWe use our own exchange maven package that tells us about the structure of the database like the following:\r\n\r\n    public class Place {\r\n        public UUID placeID;\r\n        public LocalDate start;\r\n        public LocalDate end;\r\n        public String network;\r\n        public String placeName;\r\n        public String placeNumber;\r\n        public String project;\r\n    }\r\n\r\nA very basic class for example and we want to convert this to JavaScript so we can also use them in our frontend. Because we are using Camunda as engine we need to access the same variable names in front- and backend. For that purpose we have created a Java class with constants so that we can reuse them at different places without struggling with any uppercase for example:\r\n\r\n    public class CamVariable {\r\n      // Process\r\n      public static final String ASSIGNEE = &quot;assignee&quot;;\r\n      public static final String NAME = &quot;name&quot;;\r\n      public static final String PLACE = &quot;place&quot;;\r\n    }\r\n\r\nCurrently we need to maintain the same variable also in JavaScript to have them there which is redundant and really not a good approach. But we don&#39;t know how to do it different and that&#39;s why I&#39;m asking how we can maybe convert the Java class to some code thats readable for JavaScript.\r\n\r\n    const CamVariable = {\r\n        AREA: &#39;area&#39;,\r\n        AREA_ID: &#39;areaID&#39;,\r\n    };","title":"How to convert Java class variables to JavaScript?","body":"<p>We got a project where we are using multiple databases with Spring Boot as backend and AngularJS as frontend.\nWe use our own exchange maven package that tells us about the structure of the database like the following:</p>\n<pre><code>public class Place {\n    public UUID placeID;\n    public LocalDate start;\n    public LocalDate end;\n    public String network;\n    public String placeName;\n    public String placeNumber;\n    public String project;\n}\n</code></pre>\n<p>A very basic class for example and we want to convert this to JavaScript so we can also use them in our frontend. Because we are using Camunda as engine we need to access the same variable names in front- and backend. For that purpose we have created a Java class with constants so that we can reuse them at different places without struggling with any uppercase for example:</p>\n<pre><code>public class CamVariable {\n  // Process\n  public static final String ASSIGNEE = &quot;assignee&quot;;\n  public static final String NAME = &quot;name&quot;;\n  public static final String PLACE = &quot;place&quot;;\n}\n</code></pre>\n<p>Currently we need to maintain the same variable also in JavaScript to have them there which is redundant and really not a good approach. But we don't know how to do it different and that's why I'm asking how we can maybe convert the Java class to some code thats readable for JavaScript.</p>\n<pre><code>const CamVariable = {\n    AREA: 'area',\n    AREA_ID: 'areaID',\n};\n</code></pre>\n"},{"tags":["java","web-scraping","jsoup"],"comments":[{"owner":{"account_id":4168155,"reputation":2397,"user_id":3416648,"accept_rate":83,"display_name":"DDS"},"score":0,"creation_date":1651571567,"post_id":72097561,"comment_id":127389620,"body_markdown":"What errors does it prints? What&#39;s the input (for us behind firewalls), what&#39;s the desired output?","body":"What errors does it prints? What&#39;s the input (for us behind firewalls), what&#39;s the desired output?"},{"owner":{"account_id":25181259,"reputation":1,"user_id":19022738,"display_name":"Daniel N"},"score":0,"creation_date":1651584963,"post_id":72097561,"comment_id":127394270,"body_markdown":"@DDS - There is no error, the program runs fine  with other tables on other websites and it prints row data. However, with morningstar table (r_table1.text2) it runs but returns nothing","body":"@DDS - There is no error, the program runs fine  with other tables on other websites and it prints row data. However, with morningstar table (r_table1.text2) it runs but returns nothing"}],"owner":{"account_id":25181259,"reputation":1,"user_id":19022738,"display_name":"Daniel N"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1651571224,"creation_date":1651571224,"question_id":72097561,"body_markdown":"I have a code to scape html table- the code works fine with other websites except for Morningstar. Please assist, Not sure what I&#39;m missing. The code looks like this;\r\n\r\n```\r\nimport org.jsoup.Jsoup;\r\nimport org.jsoup.nodes.Document;\r\nimport org.jsoup.nodes.Element;\r\nimport org.jsoup.select.Elements;\r\n\r\npublic class WebScrapping {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t// TODO Auto-generated method stub\r\nfinal String url=&quot;https://financials.morningstar.com/ratios/r.htmlt=0P0000MPIU&amp;culture=en&amp;platform=sal&quot;;\r\n\t\t\r\n\t\t\r\n\t\ttry {\r\n\t\t\t\r\n\t\t\torg.jsoup.nodes.Document doc = Jsoup.connect(url).get();\r\n\t\t\torg.jsoup.select.Elements rows = doc.select(&quot;table.r_table1.text2 tr&quot;);\r\n\t\t\t \tfor (org.jsoup.nodes.Element row : rows) {\r\n\t\t\t \t\t\torg.jsoup.select.Elements columns = row.select(&quot;td&quot;);\r\n\t\t\t \t\t\t\t\r\n\t\t\t \t\t\tfor (org.jsoup.nodes.Element column : columns) {\r\n\t\t\t \t\t\t\t\t\tSystem.out.print(column.text());\r\n\t\t\t \t\t\t}\r\n\t\t\t       System.out.println();\r\n\t\t\t    }\r\n        }\r\n\t\tcatch(Exception ex) {\r\n\t\tex.printStackTrace();\t\r\n\t\t}\r\n\t}\r\n}\r\n","title":"HTML table with JSOUP","body":"<p>I have a code to scape html table- the code works fine with other websites except for Morningstar. Please assist, Not sure what I'm missing. The code looks like this;</p>\n<pre><code>import org.jsoup.Jsoup;\nimport org.jsoup.nodes.Document;\nimport org.jsoup.nodes.Element;\nimport org.jsoup.select.Elements;\n\npublic class WebScrapping {\n\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\nfinal String url=&quot;https://financials.morningstar.com/ratios/r.htmlt=0P0000MPIU&amp;culture=en&amp;platform=sal&quot;;\n        \n        \n        try {\n            \n            org.jsoup.nodes.Document doc = Jsoup.connect(url).get();\n            org.jsoup.select.Elements rows = doc.select(&quot;table.r_table1.text2 tr&quot;);\n                for (org.jsoup.nodes.Element row : rows) {\n                        org.jsoup.select.Elements columns = row.select(&quot;td&quot;);\n                            \n                        for (org.jsoup.nodes.Element column : columns) {\n                                    System.out.print(column.text());\n                        }\n                   System.out.println();\n                }\n        }\n        catch(Exception ex) {\n        ex.printStackTrace();   \n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","android","android-notifications","visibility"],"comments":[{"owner":{"account_id":22564906,"reputation":3594,"user_id":17133283,"display_name":"Sambhav Khandelwal"},"score":0,"creation_date":1651507273,"post_id":72089298,"comment_id":127375399,"body_markdown":"Can you share the code of what you try to show the notification?","body":"Can you share the code of what you try to show the notification?"},{"owner":{"account_id":11027038,"reputation":186,"user_id":8099601,"display_name":"Nitzan Daloomy"},"score":0,"creation_date":1651507314,"post_id":72089298,"comment_id":127375415,"body_markdown":"I don&#39;t understand... the code that initializes the notification and shows it?","body":"I don&#39;t understand... the code that initializes the notification and shows it?"},{"owner":{"account_id":22564906,"reputation":3594,"user_id":17133283,"display_name":"Sambhav Khandelwal"},"score":0,"creation_date":1651507344,"post_id":72089298,"comment_id":127375429,"body_markdown":"Yes. That is it","body":"Yes. That is it"},{"owner":{"account_id":11027038,"reputation":186,"user_id":8099601,"display_name":"Nitzan Daloomy"},"score":0,"creation_date":1651507807,"post_id":72089298,"comment_id":127375586,"body_markdown":"just a moment, I&#39;ll do it. can you get into the chat I&#39;ve opened?","body":"just a moment, I&#39;ll do it. can you get into the chat I&#39;ve opened?"},{"owner":{"account_id":22564906,"reputation":3594,"user_id":17133283,"display_name":"Sambhav Khandelwal"},"score":0,"creation_date":1651507901,"post_id":72089298,"comment_id":127375619,"body_markdown":"Where is it? I could not find it","body":"Where is it? I could not find it"},{"owner":{"account_id":11027038,"reputation":186,"user_id":8099601,"display_name":"Nitzan Daloomy"},"score":0,"creation_date":1651509271,"post_id":72089298,"comment_id":127376067,"body_markdown":"nevermind, I&#39;d close the chat... but I actually recall sharing this code with you in the previous questions, didn&#39;t I?","body":"nevermind, I&#39;d close the chat... but I actually recall sharing this code with you in the previous questions, didn&#39;t I?"},{"owner":{"account_id":22564906,"reputation":3594,"user_id":17133283,"display_name":"Sambhav Khandelwal"},"score":0,"creation_date":1651509780,"post_id":72089298,"comment_id":127376226,"body_markdown":"Its the same u use? Can u share it here also pls. It makes it easy to navigate","body":"Its the same u use? Can u share it here also pls. It makes it easy to navigate"},{"owner":{"account_id":11027038,"reputation":186,"user_id":8099601,"display_name":"Nitzan Daloomy"},"score":0,"creation_date":1651510589,"post_id":72089298,"comment_id":127376479,"body_markdown":"it is the same use... I&#39;ll share it though, sure","body":"it is the same use... I&#39;ll share it though, sure"},{"owner":{"account_id":11027038,"reputation":186,"user_id":8099601,"display_name":"Nitzan Daloomy"},"score":0,"creation_date":1651511028,"post_id":72089298,"comment_id":127376637,"body_markdown":"I added the code","body":"I added the code"}],"answers":[{"tags":[],"owner":{"account_id":22564906,"reputation":3594,"user_id":17133283,"display_name":"Sambhav Khandelwal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651551126,"creation_date":1651551126,"answer_id":72094737,"question_id":72089298,"body_markdown":"&gt;How can I hide the notification panel?\r\n\r\nI see that you are receiving the action button click in the Receiver. So, then it becomes an easy task to dismiss it. In the receiver, add this line:\r\n```java\r\nNotificationManager manager = (NotificationManager) context.getSystemService(NOTIFICATION_SERVICE);\r\nmanager.cancel(TIMER_NOTIFICATION_ID);\r\n```\r\n---\r\n&gt; When I click the Button, the app does open, but the dialog won&#39;t show.\r\n\r\nYou need to pass an intent extra that you are wanting to show the dialog. Then, you can, in the `onCreate()` get that extra and then show the dialog accordingly.\r\n\r\n\r\n\r\n","title":"Android: Changing Views visibility on Activity start | Hide Notification panel on Notification Button click","body":"<blockquote>\n<p>How can I hide the notification panel?</p>\n</blockquote>\n<p>I see that you are receiving the action button click in the Receiver. So, then it becomes an easy task to dismiss it. In the receiver, add this line:</p>\n<pre class=\"lang-java prettyprint-override\"><code>NotificationManager manager = (NotificationManager) context.getSystemService(NOTIFICATION_SERVICE);\nmanager.cancel(TIMER_NOTIFICATION_ID);\n</code></pre>\n<hr />\n<blockquote>\n<p>When I click the Button, the app does open, but the dialog won't show.</p>\n</blockquote>\n<p>You need to pass an intent extra that you are wanting to show the dialog. Then, you can, in the <code>onCreate()</code> get that extra and then show the dialog accordingly.</p>\n"}],"owner":{"account_id":11027038,"reputation":186,"user_id":8099601,"display_name":"Nitzan Daloomy"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":155,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1651570100,"creation_date":1651507128,"question_id":72089298,"body_markdown":"My app has a `Notification` that holds a `Button`.\r\n\r\nWhen the user clicks the `Button`, the app should open (if it was closed) and show a custom dialog, which I&#39;ve created by a bunch of views.\r\n\r\nShowing the dialog means setting its `Visibility` to `View.VISIBLE`.\r\n\r\nI use a `BroadcastReceiver` to receive the `Notification`s `Button` click, and it works (I&#39;ve used `Toast` messages to check it, and it does - the `Receiver` is getting called when the `Button` is clicked, and it reaches to the function that changes the dialogs `Visibility` to `View.VISIBLE`)\r\n\r\nWhen I click the `Button`, the app does open, but the dialog won&#39;t show.\r\n\r\nAlso, I&#39;ve noticed that when I click the `Button`, the `Notification` panel does not hide (unlike when clicking the `Notification` itself), and I thought maybe it has something to do with it.\r\n\r\nSo I found [this][1] answer, but it didn&#39;t work for me (below there&#39;s another answer, much newer, but I didn&#39;t understand what he did there or how can I do it).\r\n\r\nI also checked using `Toast` messages whether the `Visibility` parameter of the dialog is changing or not, and it is changing to `View.VISIBLE` (0), and still, the dialog is not shown.\\\r\nIf I&#39;m in the app and trying to show the dialog, it works, the dialog shows on an in-app button click, the issue occurs when trying to show the dialog as soon as opening the app using the `Notification`s `Button` click\r\n\r\nIs the `Notification Panel` the problem?\\\r\nIf it is, why is it happening and how can I hide the notification panel?\\\r\nIf it&#39;s not, what is it, and how can I solve this?\r\n\r\n## Edit ##\r\nI was asked for the code that inits and shows the notification, so here it is:\r\n```java\r\n@RequiresApi(api = Build.VERSION_CODES.M)\r\nprivate void updateNotification() {\r\n    isBatteryOptimizationActive = App.isBatteryOptimizationActive();\r\n\r\n    clearAllTimerNotificationActionButtons();\r\n\r\n    if (isBatteryOptimizationActive) {\r\n        initBatteryOptimizationActiveNotification();\r\n    } else {\r\n        if (notificationJustStarted) {\r\n            initNotificationBase();\r\n        }\r\n        initAndStartPomodoroTimerNotification();\r\n    }\r\n\r\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\r\n        NotificationManager manager = getSystemService(NotificationManager.class);\r\n        manager.notify(TIMER_NOTIFICATION_ID, pomodoroNotificationBuilder.build());\r\n    }\r\n\r\n}\r\nprivate void initNotificationBase() {\r\n    pomodoroNotificationBuilder = new NotificationCompat.Builder(this, CHANNEL_ID);\r\n    Intent notificationIntent = new Intent(this, MainActivity.class);\r\n    PendingIntent pendingIntent = PendingIntent.getActivity(this,\r\n            0, notificationIntent, PendingIntent.FLAG_IMMUTABLE);\r\n\r\n    pomodoroNotificationBuilder\r\n            .setContentTitle(getString(R.string.timer_notification_background_allowed_title))\r\n            .setOngoing(true)\r\n            .setAutoCancel(false)\r\n            .setSmallIcon(R.drawable.tomato)\r\n            .setContentIntent(pendingIntent)\r\n            .setNotificationSilent()\r\n            .setPriority(NotificationCompat.PRIORITY_DEFAULT);\r\n    notificationJustStarted = false;\r\n}\r\n\r\n@RequiresApi(api = Build.VERSION_CODES.M)\r\nprivate void initAndStartTimerNotification() {\r\n    String enableScreenOverlayText = &quot;&quot;,\r\n            actionButtonTitle;\r\n    PendingIntent pendingIntent;\r\n    if (!Settings.canDrawOverlays(this)) {\r\n        /** Initialize the notification in case &quot;draw over other apps&quot; setting is disabled */\r\n        Intent notificationIntent = new Intent(Settings.ACTION_MANAGE_OVERLAY_PERMISSION);\r\n        pendingIntent = PendingIntent.getActivity(this,\r\n                0, notificationIntent, PendingIntent.FLAG_IMMUTABLE);\r\n        actionButtonTitle = &quot;Enable&quot;;\r\n        enableScreenOverlayText = String.format(&quot;To be able stopping the timer from the notification:\\nClick Enable -&gt; Search for %s -&gt; Allow Display over other apps&quot;, getString(R.string.app_name));\r\n    } else {\r\n        /** Initialize the notification in case &quot;draw over other apps&quot; setting is enabled */\r\n        Intent stopActionIntent = new Intent(this, PomodoroService.class);\r\n        stopActionIntent.setAction(ACTION_STOP_SERVICE);\r\n        stopActionIntent.putExtra(POMODORO_SERVICE_STOP_FOR_REAL_EXTRA_NAME, false);\r\n        pendingIntent = PendingIntent.getService(this, 1, stopActionIntent, PendingIntent.FLAG_IMMUTABLE);\r\n        actionButtonTitle = &quot;Stop&quot;;\r\n    }\r\n\r\n\r\n    pomodoroNotificationBuilder\r\n            .setContentText(String.format(&quot;%s is in progress\\nThis session remains: %s until finished&quot;, goalName, PublicMethods.formatStopWatchTime(millisRemaining)))\r\n            .setStyle(new NotificationCompat.BigTextStyle().bigText(enableScreenOverlayText))\r\n            .addAction(R.drawable.stop, actionButtonTitle, pendingIntent);\r\n}\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/20420509/8099601","title":"Android: Changing Views visibility on Activity start | Hide Notification panel on Notification Button click","body":"<p>My app has a <code>Notification</code> that holds a <code>Button</code>.</p>\n<p>When the user clicks the <code>Button</code>, the app should open (if it was closed) and show a custom dialog, which I've created by a bunch of views.</p>\n<p>Showing the dialog means setting its <code>Visibility</code> to <code>View.VISIBLE</code>.</p>\n<p>I use a <code>BroadcastReceiver</code> to receive the <code>Notification</code>s <code>Button</code> click, and it works (I've used <code>Toast</code> messages to check it, and it does - the <code>Receiver</code> is getting called when the <code>Button</code> is clicked, and it reaches to the function that changes the dialogs <code>Visibility</code> to <code>View.VISIBLE</code>)</p>\n<p>When I click the <code>Button</code>, the app does open, but the dialog won't show.</p>\n<p>Also, I've noticed that when I click the <code>Button</code>, the <code>Notification</code> panel does not hide (unlike when clicking the <code>Notification</code> itself), and I thought maybe it has something to do with it.</p>\n<p>So I found <a href=\"https://stackoverflow.com/a/20420509/8099601\">this</a> answer, but it didn't work for me (below there's another answer, much newer, but I didn't understand what he did there or how can I do it).</p>\n<p>I also checked using <code>Toast</code> messages whether the <code>Visibility</code> parameter of the dialog is changing or not, and it is changing to <code>View.VISIBLE</code> (0), and still, the dialog is not shown.<br />\nIf I'm in the app and trying to show the dialog, it works, the dialog shows on an in-app button click, the issue occurs when trying to show the dialog as soon as opening the app using the <code>Notification</code>s <code>Button</code> click</p>\n<p>Is the <code>Notification Panel</code> the problem?<br />\nIf it is, why is it happening and how can I hide the notification panel?<br />\nIf it's not, what is it, and how can I solve this?</p>\n<h2>Edit</h2>\n<p>I was asked for the code that inits and shows the notification, so here it is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RequiresApi(api = Build.VERSION_CODES.M)\nprivate void updateNotification() {\n    isBatteryOptimizationActive = App.isBatteryOptimizationActive();\n\n    clearAllTimerNotificationActionButtons();\n\n    if (isBatteryOptimizationActive) {\n        initBatteryOptimizationActiveNotification();\n    } else {\n        if (notificationJustStarted) {\n            initNotificationBase();\n        }\n        initAndStartPomodoroTimerNotification();\n    }\n\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\n        NotificationManager manager = getSystemService(NotificationManager.class);\n        manager.notify(TIMER_NOTIFICATION_ID, pomodoroNotificationBuilder.build());\n    }\n\n}\nprivate void initNotificationBase() {\n    pomodoroNotificationBuilder = new NotificationCompat.Builder(this, CHANNEL_ID);\n    Intent notificationIntent = new Intent(this, MainActivity.class);\n    PendingIntent pendingIntent = PendingIntent.getActivity(this,\n            0, notificationIntent, PendingIntent.FLAG_IMMUTABLE);\n\n    pomodoroNotificationBuilder\n            .setContentTitle(getString(R.string.timer_notification_background_allowed_title))\n            .setOngoing(true)\n            .setAutoCancel(false)\n            .setSmallIcon(R.drawable.tomato)\n            .setContentIntent(pendingIntent)\n            .setNotificationSilent()\n            .setPriority(NotificationCompat.PRIORITY_DEFAULT);\n    notificationJustStarted = false;\n}\n\n@RequiresApi(api = Build.VERSION_CODES.M)\nprivate void initAndStartTimerNotification() {\n    String enableScreenOverlayText = &quot;&quot;,\n            actionButtonTitle;\n    PendingIntent pendingIntent;\n    if (!Settings.canDrawOverlays(this)) {\n        /** Initialize the notification in case &quot;draw over other apps&quot; setting is disabled */\n        Intent notificationIntent = new Intent(Settings.ACTION_MANAGE_OVERLAY_PERMISSION);\n        pendingIntent = PendingIntent.getActivity(this,\n                0, notificationIntent, PendingIntent.FLAG_IMMUTABLE);\n        actionButtonTitle = &quot;Enable&quot;;\n        enableScreenOverlayText = String.format(&quot;To be able stopping the timer from the notification:\\nClick Enable -&gt; Search for %s -&gt; Allow Display over other apps&quot;, getString(R.string.app_name));\n    } else {\n        /** Initialize the notification in case &quot;draw over other apps&quot; setting is enabled */\n        Intent stopActionIntent = new Intent(this, PomodoroService.class);\n        stopActionIntent.setAction(ACTION_STOP_SERVICE);\n        stopActionIntent.putExtra(POMODORO_SERVICE_STOP_FOR_REAL_EXTRA_NAME, false);\n        pendingIntent = PendingIntent.getService(this, 1, stopActionIntent, PendingIntent.FLAG_IMMUTABLE);\n        actionButtonTitle = &quot;Stop&quot;;\n    }\n\n\n    pomodoroNotificationBuilder\n            .setContentText(String.format(&quot;%s is in progress\\nThis session remains: %s until finished&quot;, goalName, PublicMethods.formatStopWatchTime(millisRemaining)))\n            .setStyle(new NotificationCompat.BigTextStyle().bigText(enableScreenOverlayText))\n            .addAction(R.drawable.stop, actionButtonTitle, pendingIntent);\n}\n</code></pre>\n"},{"tags":["java","android","firebase","google-cloud-platform","google-cloud-firestore"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1651487478,"post_id":72081200,"comment_id":127368448,"body_markdown":"What type of object is `profileImg`? An ImageView?","body":"What type of object is <code>profileImg</code>? An ImageView?"},{"owner":{"account_id":20270978,"reputation":55,"user_id":18471564,"display_name":"Yassine"},"score":0,"creation_date":1651528316,"post_id":72081200,"comment_id":127381814,"body_markdown":"Yes    profileImg is an ImageView","body":"Yes    profileImg is an ImageView"},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1651554809,"post_id":72081200,"comment_id":127385407,"body_markdown":"Is `downloadUrl` returning the correct data?","body":"Is <code>downloadUrl</code> returning the correct data?"},{"owner":{"account_id":20270978,"reputation":55,"user_id":18471564,"display_name":"Yassine"},"score":0,"creation_date":1651563077,"post_id":72081200,"comment_id":127387186,"body_markdown":"Yes it does, I&#39;m already using the same code to set a profile picture in a profile fragment","body":"Yes it does, I&#39;m already using the same code to set a profile picture in a profile fragment"}],"answers":[{"tags":[],"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651569538,"creation_date":1651569538,"answer_id":72097252,"question_id":72081200,"body_markdown":"If you need to set the image that you from `downloadUrl` to the icon that exists in the BottomNavigation, then you can convert it like this:\r\n\r\n    if (doc.get(&quot;profilePictureUrl&quot;)!= null) { //set profile pic into image view\r\n        String downloadUrl = doc.get(&quot;profilePictureUrl&quot;).toString();\r\n        Glide.with(BottomNavigationActivity.this)\r\n            .load(downloadUrl)\r\n            .into(profileImg);\r\n\r\n        try {\r\n            URL url = new URL(downloadUrl);\r\n            InputStream inputStream = (InputStream) url.getContent();\r\n            Drawable icon = Drawable.createFromStream(inputStream, &quot;src name&quot;);\r\n            bottomNav.getMenu().getItem(4).setIcon(icon);\r\n        } catch (IOException e) {\r\n            Log.e(TAG, e.getMessage());\r\n        }\r\n    }","title":"How do I set an image view to an Icon?","body":"<p>If you need to set the image that you from <code>downloadUrl</code> to the icon that exists in the BottomNavigation, then you can convert it like this:</p>\n<pre><code>if (doc.get(&quot;profilePictureUrl&quot;)!= null) { //set profile pic into image view\n    String downloadUrl = doc.get(&quot;profilePictureUrl&quot;).toString();\n    Glide.with(BottomNavigationActivity.this)\n        .load(downloadUrl)\n        .into(profileImg);\n\n    try {\n        URL url = new URL(downloadUrl);\n        InputStream inputStream = (InputStream) url.getContent();\n        Drawable icon = Drawable.createFromStream(inputStream, &quot;src name&quot;);\n        bottomNav.getMenu().getItem(4).setIcon(icon);\n    } catch (IOException e) {\n        Log.e(TAG, e.getMessage());\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":20270978,"reputation":55,"user_id":18471564,"display_name":"Yassine"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1651569627,"creation_date":1651448842,"question_id":72081200,"body_markdown":"I&#39;m trying to load an image from Firebase Storage, put it inside an ImageView and set it to the bottom navigation bar icon, here&#39;s my code:\r\n\r\n    DocumentReference df = fstore.collection(&quot;Users&quot;).document(user.getUid());\r\n        df.get().addOnCompleteListener(new OnCompleteListener&lt;DocumentSnapshot&gt;() {\r\n            @Override\r\n            public void onComplete(@NonNull Task&lt;DocumentSnapshot&gt; task) {\r\n                if (task.isSuccessful())\r\n                {\r\n                    DocumentSnapshot doc = task.getResult();\r\n                    if (doc.exists())\r\n                    {\r\n                        if (doc.get(&quot;profilePictureUrl&quot;)!= null) { //set profile pic into image view\r\n                            String downloadUrl = doc.get(&quot;profilePictureUrl&quot;).toString();\r\n                            Glide.with(BottomNavigationActivity.this).load(downloadUrl).into(profileImg);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        //set icon only accepts a drawable file\r\n        bottomNav.getMenu().getItem(4).setIcon(profileImg);&#39;\r\n\r\nbut the setIcon method can only receive a drawable file, how do I solve this problem? \r\n","title":"How do I set an image view to an Icon?","body":"<p>I'm trying to load an image from Firebase Storage, put it inside an ImageView and set it to the bottom navigation bar icon, here's my code:</p>\n<pre><code>DocumentReference df = fstore.collection(&quot;Users&quot;).document(user.getUid());\n    df.get().addOnCompleteListener(new OnCompleteListener&lt;DocumentSnapshot&gt;() {\n        @Override\n        public void onComplete(@NonNull Task&lt;DocumentSnapshot&gt; task) {\n            if (task.isSuccessful())\n            {\n                DocumentSnapshot doc = task.getResult();\n                if (doc.exists())\n                {\n                    if (doc.get(&quot;profilePictureUrl&quot;)!= null) { //set profile pic into image view\n                        String downloadUrl = doc.get(&quot;profilePictureUrl&quot;).toString();\n                        Glide.with(BottomNavigationActivity.this).load(downloadUrl).into(profileImg);\n                    }\n                }\n            }\n        }\n    });\n\n    //set icon only accepts a drawable file\n    bottomNav.getMenu().getItem(4).setIcon(profileImg);'\n</code></pre>\n<p>but the setIcon method can only receive a drawable file, how do I solve this problem?</p>\n"},{"tags":["java","concurrency","parallel-processing","future","completable-future"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1651234466,"post_id":72057226,"comment_id":127321596,"body_markdown":"If you really are retrieving the results of all three CompletableFutures in the same place, one after another, then there is no need for CompletableFuture.allOf.  Calling all three `get()` methods effectively will wait for them all to complete anyway.","body":"If you really are retrieving the results of all three CompletableFutures in the same place, one after another, then there is no need for CompletableFuture.allOf.  Calling all three <code>get()</code> methods effectively will wait for them all to complete anyway."},{"owner":{"account_id":18044566,"reputation":101,"user_id":13115896,"display_name":"sg2000"},"score":0,"creation_date":1651283681,"post_id":72057226,"comment_id":127334470,"body_markdown":"Thanks, How else to do it if we are using ofAll to get the results? I can use the thenApply option because of variable scope mentioned above","body":"Thanks, How else to do it if we are using ofAll to get the results? I can use the thenApply option because of variable scope mentioned above"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1651324288,"post_id":72057226,"comment_id":127340391,"body_markdown":"Just remove the creation and use of `combinedFuture`.  It is not needed.  Simply calling `get()` on each of the individual futures is sufficient.  Waiting for them one at a time will guarantee all of them have finished.","body":"Just remove the creation and use of <code>combinedFuture</code>.  It is not needed.  Simply calling <code>get()</code> on each of the individual futures is sufficient.  Waiting for them one at a time will guarantee all of them have finished."},{"owner":{"account_id":18044566,"reputation":101,"user_id":13115896,"display_name":"sg2000"},"score":0,"creation_date":1651325511,"post_id":72057226,"comment_id":127340616,"body_markdown":"Thanks. Yes but if i want to use the allOf, how would i retrieve the data from the futures in that case?","body":"Thanks. Yes but if i want to use the allOf, how would i retrieve the data from the futures in that case?"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1651326995,"post_id":72057226,"comment_id":127340920,"body_markdown":"The only way to get individual futures return values is to keep references to the individual futures, so you can call their get() methods.  The object returned by allOf does not provide any way to access the individual constituent futures.","body":"The only way to get individual futures return values is to keep references to the individual futures, so you can call their get() methods.  The object returned by allOf does not provide any way to access the individual constituent futures."},{"owner":{"account_id":18044566,"reputation":101,"user_id":13115896,"display_name":"sg2000"},"score":0,"creation_date":1651365814,"post_id":72057226,"comment_id":127347785,"body_markdown":"Thanks. Yes thats why i have no choice but to do the gets on them. The other alternative is to do whenComplete to make it concise but that will do the same get/joins on the individual futures and also cant use method local variables.","body":"Thanks. Yes thats why i have no choice but to do the gets on them. The other alternative is to do whenComplete to make it concise but that will do the same get/joins on the individual futures and also cant use method local variables."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1651366601,"post_id":72057226,"comment_id":127347865,"body_markdown":"Is there a reason you dont want to call `get()` for each future?","body":"Is there a reason you dont want to call <code>get()</code> for each future?"},{"owner":{"account_id":18044566,"reputation":101,"user_id":13115896,"display_name":"sg2000"},"score":0,"creation_date":1651426117,"post_id":72057226,"comment_id":127357593,"body_markdown":"Are you suggesting to do just that instead of calling allOf? The reason is when we do that the futures are not going to be invoked until the get() is called no? If i understand correctly, allOf() call helps grouping them which we can then use the get/join to get the individual results upon completion. Do you see it done any other way?","body":"Are you suggesting to do just that instead of calling allOf? The reason is when we do that the futures are not going to be invoked until the get() is called no? If i understand correctly, allOf() call helps grouping them which we can then use the get/join to get the individual results upon completion. Do you see it done any other way?"},{"owner":{"account_id":18044566,"reputation":101,"user_id":13115896,"display_name":"sg2000"},"score":0,"creation_date":1651426665,"post_id":72057226,"comment_id":127357702,"body_markdown":"Are you suggesting we don&#39;t need allOf call and instead just do get/join on the Futures?","body":"Are you suggesting we don&#39;t need allOf call and instead just do get/join on the Futures?"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1651429350,"post_id":72057226,"comment_id":127358276,"body_markdown":"Yes, Im saying that calling each futures get(), one at a time, will effectively do the same thing as waiting for the result of allOf.  In both cases, every future will have completed.","body":"Yes, Im saying that calling each futures get(), one at a time, will effectively do the same thing as waiting for the result of allOf.  In both cases, every future will have completed."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1651447319,"post_id":72057226,"comment_id":127361432,"body_markdown":"VGR already addressed, but there are a few caveats. If you want ALL the futures to be completed before you do ANYTHING, then you need to call `allOf(......).get()`, then you must call `get()` for each of the 3 futures. However, if you merely want each future to be completed before it is processed (while also allowing the other, unreached futures to continue in the background), then you just do what @VGR said.","body":"VGR already addressed, but there are a few caveats. If you want ALL the futures to be completed before you do ANYTHING, then you need to call <code>allOf(......).get()</code>, then you must call <code>get()</code> for each of the 3 futures. However, if you merely want each future to be completed before it is processed (while also allowing the other, unreached futures to continue in the background), then you just do what @VGR said."},{"owner":{"account_id":173621,"reputation":10596,"user_id":402428,"display_name":"michid"},"score":0,"creation_date":1651568803,"post_id":72057226,"comment_id":127388736,"body_markdown":"You can use the &quot;hidden Applicative&quot; to run multiple futures in parallel and collect individual results when all completed. See https://stackoverflow.com/a/70724491/402428","body":"You can use the &quot;hidden Applicative&quot; to run multiple futures in parallel and collect individual results when all completed. See <a href=\"https://stackoverflow.com/a/70724491/402428\">stackoverflow.com/a/70724491/402428</a>"}],"answers":[{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1651569610,"creation_date":1651569610,"answer_id":72097264,"question_id":72057226,"body_markdown":"Calling `get` or `join` just implies wait for the completion. It has no influence of the completion itself.\r\n\r\nWhen you call `CompletableFuture.supplyAsync(() -&gt; getAList())`, this method will submit the evaluation of the supplier to the [common pool] *immediately*. The callers only influence on the execution of `getAList()` is the fact that the JVM will terminate if there are no non-daemon threads running. This is a common error in simple test programs, incorporating a `main` method that doesnt wait for completion. Otherwise, the execution of `getAList()` will complete, regardless of whether its result will ever be queried.\r\n\r\nSo when you use\r\n\r\n```java\r\nCompletableFuture&lt;List&lt;A&gt;&gt; aFuture = CompletableFuture.supplyAsync(() -&gt; getAList());\r\nCompletableFuture&lt;Map&lt;String,B&gt;&gt; bFuture=CompletableFuture.supplyAsync(() -&gt; getBMap());\r\nCompletableFuture&lt;Map&lt;String,C&gt;&gt; cFuture=CompletableFuture.supplyAsync(() -&gt; getCMap());\r\n\r\nList&lt;A&gt; aData = aFuture.join();\r\nMap&lt;String, B&gt; bData = bFuture.join();\r\nMap&lt;String, C&gt; cData = cFuture.join();\r\n```\r\n\r\nThe three subsequent `supplyAsync` calls ensure that the three operations might run concurrently. The three `join()` calls only wait for the result and when the third `join()` returned, you know that all three operations are completed. Its possible that the first `join()` returns at a time when `aFuture` has been completed, but either or both of the other operations are still running, but that doesnt matter for three independent operations.\r\n\r\nWhen you execute `CompletableFuture.allOf(aFuture, bFuture, cFuture).join();` before the individual `join()` calls, it ensures that all three operations completed before the first individual `join()` call, but as said, it has no impact when all three operations are independent and youre not relying on some side effect of their execution (which you shouldnt in general).\r\n\r\nThe actual purpose of `allOf` is to construct a new future when you do *not* want to wait for the result immediately. E.g.\r\n\r\n```java\r\nrecord Result(List&lt;A&gt; aData, Map&lt;String, B&gt; bData, Map&lt;String, C&gt; cData) {}\r\n```\r\n```java\r\nCompletableFuture&lt;Result&gt; r = CompletableFuture.allOf(aFuture, bFuture, cFuture)\r\n    .thenApply(v -&gt; new Result(aFuture.join(), bFuture.join(), cFuture.join()));\r\n// return r or pass it to some other code...\r\n```\r\nhere, the use of `allOf` is preferable to, e.g.\r\n\r\n```java\r\nCompletableFuture&lt;Result&gt; r = CompletableFuture.supplyAsync(\r\n    () -&gt; new Result(aFuture.join(), bFuture.join(), cFuture.join()));\r\n```\r\n\r\nbecause the latter might block a worker thread when `join()` is called from the supplier. The underlying framework might compensate when it detects this, e.g. start a new thread, but this is still an expensive operation. In contrast, the function chained to `allOf` is only evaluated after all futures completed, so all embedded `join()` calls are guaranteed to return immediately.\r\n\r\nFor a small number of futures, theres still an alternative to `allOf`, e.g.\r\n\r\n```java\r\nvar r = aFuture.thenCompose(a -&gt;\r\n            bFuture.thenCombine(cFuture, (b, c) -&gt; new Result(a, b, c)));\r\n```\r\n\r\n[common pool]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ForkJoinPool.html#commonPool()","title":"Java CompletableFuture allOf approach","body":"<p>Calling <code>get</code> or <code>join</code> just implies wait for the completion. It has no influence of the completion itself.</p>\n<p>When you call <code>CompletableFuture.supplyAsync(() -&gt; getAList())</code>, this method will submit the evaluation of the supplier to the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ForkJoinPool.html#commonPool()\" rel=\"nofollow noreferrer\">common pool</a> <em>immediately</em>. The callers only influence on the execution of <code>getAList()</code> is the fact that the JVM will terminate if there are no non-daemon threads running. This is a common error in simple test programs, incorporating a <code>main</code> method that doesnt wait for completion. Otherwise, the execution of <code>getAList()</code> will complete, regardless of whether its result will ever be queried.</p>\n<p>So when you use</p>\n<pre class=\"lang-java prettyprint-override\"><code>CompletableFuture&lt;List&lt;A&gt;&gt; aFuture = CompletableFuture.supplyAsync(() -&gt; getAList());\nCompletableFuture&lt;Map&lt;String,B&gt;&gt; bFuture=CompletableFuture.supplyAsync(() -&gt; getBMap());\nCompletableFuture&lt;Map&lt;String,C&gt;&gt; cFuture=CompletableFuture.supplyAsync(() -&gt; getCMap());\n\nList&lt;A&gt; aData = aFuture.join();\nMap&lt;String, B&gt; bData = bFuture.join();\nMap&lt;String, C&gt; cData = cFuture.join();\n</code></pre>\n<p>The three subsequent <code>supplyAsync</code> calls ensure that the three operations might run concurrently. The three <code>join()</code> calls only wait for the result and when the third <code>join()</code> returned, you know that all three operations are completed. Its possible that the first <code>join()</code> returns at a time when <code>aFuture</code> has been completed, but either or both of the other operations are still running, but that doesnt matter for three independent operations.</p>\n<p>When you execute <code>CompletableFuture.allOf(aFuture, bFuture, cFuture).join();</code> before the individual <code>join()</code> calls, it ensures that all three operations completed before the first individual <code>join()</code> call, but as said, it has no impact when all three operations are independent and youre not relying on some side effect of their execution (which you shouldnt in general).</p>\n<p>The actual purpose of <code>allOf</code> is to construct a new future when you do <em>not</em> want to wait for the result immediately. E.g.</p>\n<pre class=\"lang-java prettyprint-override\"><code>record Result(List&lt;A&gt; aData, Map&lt;String, B&gt; bData, Map&lt;String, C&gt; cData) {}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>CompletableFuture&lt;Result&gt; r = CompletableFuture.allOf(aFuture, bFuture, cFuture)\n    .thenApply(v -&gt; new Result(aFuture.join(), bFuture.join(), cFuture.join()));\n// return r or pass it to some other code...\n</code></pre>\n<p>here, the use of <code>allOf</code> is preferable to, e.g.</p>\n<pre class=\"lang-java prettyprint-override\"><code>CompletableFuture&lt;Result&gt; r = CompletableFuture.supplyAsync(\n    () -&gt; new Result(aFuture.join(), bFuture.join(), cFuture.join()));\n</code></pre>\n<p>because the latter might block a worker thread when <code>join()</code> is called from the supplier. The underlying framework might compensate when it detects this, e.g. start a new thread, but this is still an expensive operation. In contrast, the function chained to <code>allOf</code> is only evaluated after all futures completed, so all embedded <code>join()</code> calls are guaranteed to return immediately.</p>\n<p>For a small number of futures, theres still an alternative to <code>allOf</code>, e.g.</p>\n<pre class=\"lang-java prettyprint-override\"><code>var r = aFuture.thenCompose(a -&gt;\n            bFuture.thenCombine(cFuture, (b, c) -&gt; new Result(a, b, c)));\n</code></pre>\n"}],"owner":{"account_id":18044566,"reputation":101,"user_id":13115896,"display_name":"sg2000"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1548,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1651569610,"creation_date":1651231571,"question_id":72057226,"body_markdown":"I am trying to run 3 operations in parallel using the CompletableFuture approach. Now these 3 operations return different types so need to retrieve the data separately. Here is what i am trying to do:\r\n\r\n    CompletableFuture&lt;List&lt;A&gt;&gt; aFuture = CompletableFuture.supplyAsync (() -&gt; getAList());\r\n    CompletableFuture&lt;Map&lt;String,B&gt; bFuture = CompletableFuture.supplyAsync (() -&gt; getBMap());\r\n    CompletableFuture&lt;Map&lt;String,C&gt; cFuture = CompletableFuture.supplyAsync (() -&gt; getCMap());\r\n    \r\n    CompletableFuture&lt;Void&gt; combinedFuture =\r\n                        CompletableFuture.allOf (aFuture, bFuture, cFuture);\r\n    \r\n    combinedFuture.get(); (or join())\r\n    \r\n    List&lt;A&gt; aData = aFuture.get(); (or join)\r\n    Map&lt;String, C&gt; bData = bFuture.get(); (or join)\r\n    Map&lt;String, C&gt; cData = cFuture.get(); (or join)\r\n\r\nThis does the job and works but i am trying to understand if we need to do these gets/joins on combined future as well as individual ones and if there is a better way to do this.\r\n\r\nAlso i tried using then whenComplete() approach but then the variables i want to assign the returned data are inside the method so i am getting a &quot;The final local variable cannot be assigned, since it is defined in an enclosing type in Java&quot; error and i don&#39;t want to move them to the class level.\r\n\r\nlooking for some expert/alternate opinions. Thank you in advance\r\n\r\nSG\r\n","title":"Java CompletableFuture allOf approach","body":"<p>I am trying to run 3 operations in parallel using the CompletableFuture approach. Now these 3 operations return different types so need to retrieve the data separately. Here is what i am trying to do:</p>\n<pre><code>CompletableFuture&lt;List&lt;A&gt;&gt; aFuture = CompletableFuture.supplyAsync (() -&gt; getAList());\nCompletableFuture&lt;Map&lt;String,B&gt; bFuture = CompletableFuture.supplyAsync (() -&gt; getBMap());\nCompletableFuture&lt;Map&lt;String,C&gt; cFuture = CompletableFuture.supplyAsync (() -&gt; getCMap());\n\nCompletableFuture&lt;Void&gt; combinedFuture =\n                    CompletableFuture.allOf (aFuture, bFuture, cFuture);\n\ncombinedFuture.get(); (or join())\n\nList&lt;A&gt; aData = aFuture.get(); (or join)\nMap&lt;String, C&gt; bData = bFuture.get(); (or join)\nMap&lt;String, C&gt; cData = cFuture.get(); (or join)\n</code></pre>\n<p>This does the job and works but i am trying to understand if we need to do these gets/joins on combined future as well as individual ones and if there is a better way to do this.</p>\n<p>Also i tried using then whenComplete() approach but then the variables i want to assign the returned data are inside the method so i am getting a &quot;The final local variable cannot be assigned, since it is defined in an enclosing type in Java&quot; error and i don't want to move them to the class level.</p>\n<p>looking for some expert/alternate opinions. Thank you in advance</p>\n<p>SG</p>\n"},{"tags":["java","elasticsearch","elasticsearch-java-api"],"comments":[{"owner":{"account_id":205805,"reputation":5603,"user_id":454741,"accept_rate":67,"display_name":"VadimB"},"score":0,"creation_date":1651570523,"post_id":72095698,"comment_id":127389272,"body_markdown":"Whole `SearchResponse&lt;Product&gt;` is not what you need? You can always cast hit to Product when needed, but use other metadata as well.","body":"Whole <code>SearchResponse&lt;Product&gt;</code> is not what you need? You can always cast hit to Product when needed, but use other metadata as well."},{"owner":{"account_id":12332768,"reputation":165,"user_id":8998128,"display_name":"Pompompurin"},"score":0,"creation_date":1651576266,"post_id":72095698,"comment_id":127391071,"body_markdown":"I want the whole searchresponse. At the moment I get the right data yes but I&#39;d like to try a variation that gives me the whole shebang of metadata! Or does showing ALL metadata at once just make no sense and I should just stick with the right data I have now?","body":"I want the whole searchresponse. At the moment I get the right data yes but I&#39;d like to try a variation that gives me the whole shebang of metadata! Or does showing ALL metadata at once just make no sense and I should just stick with the right data I have now?"}],"answers":[{"tags":[],"owner":{"account_id":5028364,"reputation":31224,"user_id":4039431,"accept_rate":94,"display_name":"Amit"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1651562852,"creation_date":1651562852,"answer_id":72096059,"question_id":72095698,"body_markdown":"You can get that using the `SearchResponse&lt;&gt;` class , You are using the `product` class to map the `hits` section of the search response of the JSON api, but it has all the metadata which you get on Kibana(Kibana also provides the JSON output of search API).  \r\n\r\nBelow is the sample fields in the `SearchResponse` class, and you can notice its similar to Search JSON output.\r\n\r\n```\r\n@JsonpDeserializable\r\npublic class SearchResponse&lt;TDocument&gt; implements JsonpSerializable {\r\n    private final long took;\r\n    private final boolean timedOut;\r\n    private final ShardStatistics shards;\r\n    private final HitsMetadata&lt;TDocument&gt; hits;\r\n    private final Map&lt;String, Aggregate&gt; aggregations;\r\n    @Nullable\r\n    private final ClusterStatistics clusters;\r\n    private final Map&lt;String, JsonData&gt; fields;\r\n    @Nullable\r\n    private final Double maxScore;\r\n    @Nullable\r\n    private final Long numReducePhases;\r\n    @Nullable\r\n    private final Profile profile;\r\n    @Nullable\r\n    private final String pitId;\r\n    @Nullable\r\n    private final String scrollId;\r\n    private final Map&lt;String, List&lt;Suggestion&lt;TDocument&gt;&gt;&gt; suggest;\r\n    @Nullable\r\n    private final Boolean terminatedEarly;\r\n\r\n```","title":"returning the entire Elasticsearch response (as SearchResponse) from Java API Client in Spring Boot REST API","body":"<p>You can get that using the <code>SearchResponse&lt;&gt;</code> class , You are using the <code>product</code> class to map the <code>hits</code> section of the search response of the JSON api, but it has all the metadata which you get on Kibana(Kibana also provides the JSON output of search API).</p>\n<p>Below is the sample fields in the <code>SearchResponse</code> class, and you can notice its similar to Search JSON output.</p>\n<pre><code>@JsonpDeserializable\npublic class SearchResponse&lt;TDocument&gt; implements JsonpSerializable {\n    private final long took;\n    private final boolean timedOut;\n    private final ShardStatistics shards;\n    private final HitsMetadata&lt;TDocument&gt; hits;\n    private final Map&lt;String, Aggregate&gt; aggregations;\n    @Nullable\n    private final ClusterStatistics clusters;\n    private final Map&lt;String, JsonData&gt; fields;\n    @Nullable\n    private final Double maxScore;\n    @Nullable\n    private final Long numReducePhases;\n    @Nullable\n    private final Profile profile;\n    @Nullable\n    private final String pitId;\n    @Nullable\n    private final String scrollId;\n    private final Map&lt;String, List&lt;Suggestion&lt;TDocument&gt;&gt;&gt; suggest;\n    @Nullable\n    private final Boolean terminatedEarly;\n\n</code></pre>\n"}],"owner":{"account_id":12332768,"reputation":165,"user_id":8998128,"display_name":"Pompompurin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2498,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":72096059,"answer_count":1,"score":1,"last_activity_date":1651569481,"creation_date":1651560550,"question_id":72095698,"body_markdown":"I&#39;m learning about Elasticsearch and the Java Client API (currently just following the documentation), it works well but I&#39;m wondering if it&#39;s possible to return the whole search response from a query back? So far I only get back the &quot;_source&quot; part from the hits containing the three class variables. Which is good but I want to try one with the whole response like I would see in the Kibana console. Here are my classes and REST points:\r\n\r\nClient configuration:\r\n```\r\n@Configuration\r\npublic class ClientConf {\r\n\t\r\n\tRestClient restClient = RestClient.builder(new HttpHost(&quot;localhost&quot;, 9200)).build();\r\n\tElasticsearchTransport transport = new RestClientTransport(restClient, new JacksonJsonpMapper());\r\n\tElasticsearchClient client = new ElasticsearchClient(transport);\r\n\r\n}\r\n```\r\n\r\nThe class where the queries take place:\r\n```\r\n@Component\r\npublic class ElasticSearcher {\r\n\t\r\n\t@Autowired\r\n\tClientConf conf;\r\n\r\n\tpublic List&lt;Product&gt; searchByType(String type) throws Exception{\r\n\t\tList&lt;Product&gt; returnProduct = new ArrayList&lt;Product&gt;();\r\n\t\t\r\n\t\t//searches EXACT term\r\n\t\tSearchResponse&lt;Product&gt; search = conf.client.search(s -&gt; s\r\n\t\t\t    .index(&quot;test&quot;)\r\n\t\t\t    .query(q -&gt; q\r\n\t\t\t        .term(t -&gt; t\r\n\t\t\t            .field(&quot;type&quot;)\r\n\t\t\t            .value(v -&gt; v.stringValue(type))\r\n\t\t\t        )),\r\n\t\t\t    Product.class);\r\n\t\t\r\n\t\tList&lt;Hit&lt;Product&gt;&gt; hits = search.hits().hits();\r\n\t\t \r\n\t\t\r\n\t\tfor (Hit&lt;Product&gt; hit: hits) {\r\n\t\t\treturnProduct.add(hit.source());\r\n\t\t}\r\n\t\t\r\n\t\treturn returnProduct;\r\n\r\n\t}\r\n\t\r\n\tpublic void indexProduct(String type, String name, double price) throws ElasticsearchException, IOException {\r\n\t\tProduct product = new Product(type, name, price);\r\n\t\t\r\n// I was just trying both variants here\r\n//\t\tIndexResponse response=conf.client.index(i-&gt;i\r\n//\t\t\t\t.index(&quot;test&quot;)\r\n//\t\t\t\t.document(product)\r\n//\t\t\t\t);\r\n\t\t\r\n\t\tIndexRequest&lt;Product&gt; request = IndexRequest.of(i -&gt; i\r\n\t\t\t    .index(&quot;test&quot;)\r\n\t\t\t    .document(product)\r\n\t\t\t);\r\n\t\t\r\n\t\tIndexResponse response = conf.client.index(request);\r\n\t}\r\n\t\r\n\tpublic Product getById(String id) throws ElasticsearchException, IOException {\r\n\t\t\r\n\t\tProduct product=null;\r\n\t\t\r\n\t\tGetResponse&lt;Product&gt; response = conf.client.get(g -&gt; g\r\n\t\t\t    .index(&quot;test&quot;) \r\n\t\t\t    .id(id),\r\n\t\t\t    Product.class      \r\n\t\t\t);\r\n\t\t\r\n\t\tif (response.found()) {\r\n\t\t    product = response.source();\r\n\t\t} \r\n\t\t\r\n\t\treturn product;\r\n\t}\r\n\t\r\n//this is the one I&#39;m trying to return entire responses with:\r\n\tpublic SearchResponse matchNameSearch(String text) throws ElasticsearchException, IOException{\r\n\t\t\t\t\r\n\t\tSearchResponse response = conf.client.search(s -&gt; s\r\n\t\t\t    .index(&quot;test&quot;) \r\n\t\t\t    .query(q -&gt; q      \r\n\t\t\t        .match(t -&gt; t   \r\n\t\t\t            .field(&quot;name&quot;)  \r\n\t\t\t            .query(text)\r\n\t\t\t        )\r\n\t\t\t    ),\r\n\t\t\t    Product.class      \r\n\t\t\t);\r\n\r\n\t\treturn response;\r\n\t}\r\n\r\n\t\r\n}\r\n```\r\nEdit: if I call upon matchNameSearch (I test with Postman), it returns an empty object. I assumed by returning ```response```, which is a SearchResponse class would give me the entire response?\r\n\r\n\r\nthe object class I&#39;m using:\r\n```\r\n//I have lombok\r\n@Data\r\npublic class Product {\r\n\t\r\n\tprivate String type;\r\n\tprivate String name;\r\n\tprivate double price;\r\n\t\r\n\tpublic Product() {\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic Product(String type, String name, double price) {\r\n\t\tthis.type=type;\r\n\t\tthis.name=name;\r\n\t\tthis.price=price;\r\n\t}\r\n\r\n}\r\n```\r\n\r\nLastly, the rest endpoints:\r\n```\r\n@RestController\r\npublic class SearchController {\r\n\t\r\n\t@Autowired\r\n\tElasticSearcher searcher;\r\n\t\r\n\t@GetMapping(&quot;/search/{type}&quot;)\r\n\tpublic List&lt;Product&gt; searchByType(@PathVariable(&quot;type&quot;) String type) throws Exception {\r\n\t\treturn searcher.searchByType(type);\r\n\t}\r\n\t\r\n\t@PostMapping(&quot;/index/{type}/{name}/{price}&quot;)\r\n\tpublic void indexProduct(@PathVariable(&quot;type&quot;) String type,\r\n\t\t\t\t\t\t\t\t@PathVariable(&quot;name&quot;) String name,\r\n\t\t\t\t\t\t\t\t@PathVariable(&quot;price&quot;) String price) throws ElasticsearchException, IOException {\r\n\t\tsearcher.indexProduct(type, name, Double.parseDouble(price));\r\n\t}\r\n\t\r\n\t@GetMapping(&quot;/read/{id}&quot;)\r\n\tpublic Product searchById(@PathVariable(&quot;id&quot;) String id) throws ElasticsearchException, IOException {\r\n\t\treturn searcher.getById(id);\r\n\t}\r\n\t\r\n\r\n//this is the one:\r\n\t@GetMapping(&quot;/match/{text}&quot;)\r\n\tpublic SearchResponse matchText(@PathVariable(&quot;text&quot;) String text) throws ElasticsearchException, IOException{\r\n\t\treturn searcher.matchNameSearch(text);\r\n\t}\r\n\r\n}\r\n```\r\n\r\nAny pointers in improving the code is also welcome. I have no prior knowledge to how the (now deprecated) high rest client worked, so I don&#39;t actually know what the best way to build this kind of application is. ","title":"returning the entire Elasticsearch response (as SearchResponse) from Java API Client in Spring Boot REST API","body":"<p>I'm learning about Elasticsearch and the Java Client API (currently just following the documentation), it works well but I'm wondering if it's possible to return the whole search response from a query back? So far I only get back the &quot;_source&quot; part from the hits containing the three class variables. Which is good but I want to try one with the whole response like I would see in the Kibana console. Here are my classes and REST points:</p>\n<p>Client configuration:</p>\n<pre><code>@Configuration\npublic class ClientConf {\n    \n    RestClient restClient = RestClient.builder(new HttpHost(&quot;localhost&quot;, 9200)).build();\n    ElasticsearchTransport transport = new RestClientTransport(restClient, new JacksonJsonpMapper());\n    ElasticsearchClient client = new ElasticsearchClient(transport);\n\n}\n</code></pre>\n<p>The class where the queries take place:</p>\n<pre><code>@Component\npublic class ElasticSearcher {\n    \n    @Autowired\n    ClientConf conf;\n\n    public List&lt;Product&gt; searchByType(String type) throws Exception{\n        List&lt;Product&gt; returnProduct = new ArrayList&lt;Product&gt;();\n        \n        //searches EXACT term\n        SearchResponse&lt;Product&gt; search = conf.client.search(s -&gt; s\n                .index(&quot;test&quot;)\n                .query(q -&gt; q\n                    .term(t -&gt; t\n                        .field(&quot;type&quot;)\n                        .value(v -&gt; v.stringValue(type))\n                    )),\n                Product.class);\n        \n        List&lt;Hit&lt;Product&gt;&gt; hits = search.hits().hits();\n         \n        \n        for (Hit&lt;Product&gt; hit: hits) {\n            returnProduct.add(hit.source());\n        }\n        \n        return returnProduct;\n\n    }\n    \n    public void indexProduct(String type, String name, double price) throws ElasticsearchException, IOException {\n        Product product = new Product(type, name, price);\n        \n// I was just trying both variants here\n//      IndexResponse response=conf.client.index(i-&gt;i\n//              .index(&quot;test&quot;)\n//              .document(product)\n//              );\n        \n        IndexRequest&lt;Product&gt; request = IndexRequest.of(i -&gt; i\n                .index(&quot;test&quot;)\n                .document(product)\n            );\n        \n        IndexResponse response = conf.client.index(request);\n    }\n    \n    public Product getById(String id) throws ElasticsearchException, IOException {\n        \n        Product product=null;\n        \n        GetResponse&lt;Product&gt; response = conf.client.get(g -&gt; g\n                .index(&quot;test&quot;) \n                .id(id),\n                Product.class      \n            );\n        \n        if (response.found()) {\n            product = response.source();\n        } \n        \n        return product;\n    }\n    \n//this is the one I'm trying to return entire responses with:\n    public SearchResponse matchNameSearch(String text) throws ElasticsearchException, IOException{\n                \n        SearchResponse response = conf.client.search(s -&gt; s\n                .index(&quot;test&quot;) \n                .query(q -&gt; q      \n                    .match(t -&gt; t   \n                        .field(&quot;name&quot;)  \n                        .query(text)\n                    )\n                ),\n                Product.class      \n            );\n\n        return response;\n    }\n\n    \n}\n</code></pre>\n<p>Edit: if I call upon matchNameSearch (I test with Postman), it returns an empty object. I assumed by returning <code>response</code>, which is a SearchResponse class would give me the entire response?</p>\n<p>the object class I'm using:</p>\n<pre><code>//I have lombok\n@Data\npublic class Product {\n    \n    private String type;\n    private String name;\n    private double price;\n    \n    public Product() {\n        \n    }\n    \n    public Product(String type, String name, double price) {\n        this.type=type;\n        this.name=name;\n        this.price=price;\n    }\n\n}\n</code></pre>\n<p>Lastly, the rest endpoints:</p>\n<pre><code>@RestController\npublic class SearchController {\n    \n    @Autowired\n    ElasticSearcher searcher;\n    \n    @GetMapping(&quot;/search/{type}&quot;)\n    public List&lt;Product&gt; searchByType(@PathVariable(&quot;type&quot;) String type) throws Exception {\n        return searcher.searchByType(type);\n    }\n    \n    @PostMapping(&quot;/index/{type}/{name}/{price}&quot;)\n    public void indexProduct(@PathVariable(&quot;type&quot;) String type,\n                                @PathVariable(&quot;name&quot;) String name,\n                                @PathVariable(&quot;price&quot;) String price) throws ElasticsearchException, IOException {\n        searcher.indexProduct(type, name, Double.parseDouble(price));\n    }\n    \n    @GetMapping(&quot;/read/{id}&quot;)\n    public Product searchById(@PathVariable(&quot;id&quot;) String id) throws ElasticsearchException, IOException {\n        return searcher.getById(id);\n    }\n    \n\n//this is the one:\n    @GetMapping(&quot;/match/{text}&quot;)\n    public SearchResponse matchText(@PathVariable(&quot;text&quot;) String text) throws ElasticsearchException, IOException{\n        return searcher.matchNameSearch(text);\n    }\n\n}\n</code></pre>\n<p>Any pointers in improving the code is also welcome. I have no prior knowledge to how the (now deprecated) high rest client worked, so I don't actually know what the best way to build this kind of application is.</p>\n"},{"tags":["java","debugging","exception","remote-debugging"],"comments":[{"owner":{"account_id":81456,"reputation":11655,"user_id":229672,"display_name":"denis.solonenko"},"score":0,"creation_date":1305263714,"post_id":5987463,"comment_id":6912896,"body_markdown":"I suppose you&#39;re doing remote debug. Please make sure that you re-deploy correctly, then restart the server and the re-attach the debugger and check again..","body":"I suppose you&#39;re doing remote debug. Please make sure that you re-deploy correctly, then restart the server and the re-attach the debugger and check again.."},{"owner":{"account_id":35502,"reputation":28362,"user_id":100565,"accept_rate":59,"display_name":"MeBigFatGuy"},"score":1,"creation_date":1305263785,"post_id":5987463,"comment_id":6912903,"body_markdown":"make sure the code fully compiled and deployed.","body":"make sure the code fully compiled and deployed."},{"owner":{"account_id":113024,"reputation":4516,"user_id":297907,"accept_rate":56,"display_name":"StackOverFlow"},"score":0,"creation_date":1305264178,"post_id":5987463,"comment_id":6912955,"body_markdown":"@denis.solonenka Thanks for reply. I am debugging remote java app. I again re-deploy correctly and started server. Still same stack tarce mentioned above.","body":"@denis.solonenka Thanks for reply. I am debugging remote java app. I again re-deploy correctly and started server. Still same stack tarce mentioned above."},{"owner":{"account_id":113024,"reputation":4516,"user_id":297907,"accept_rate":56,"display_name":"StackOverFlow"},"score":0,"creation_date":1305264329,"post_id":5987463,"comment_id":6912969,"body_markdown":"@MeBigFatGuy Thanks for reply. Yes code is fully compiled and deployed. Running well but at particular position gives exception (NullPointerException) :(","body":"@MeBigFatGuy Thanks for reply. Yes code is fully compiled and deployed. Running well but at particular position gives exception (NullPointerException) :("},{"owner":{"account_id":81456,"reputation":11655,"user_id":229672,"display_name":"denis.solonenko"},"score":0,"creation_date":1305264460,"post_id":5987463,"comment_id":6912989,"body_markdown":"@Vaibhav Bhalke ok, then you should check if you have the freshest code in the eclipse - sync from vcs if any or hit f5 on the project to get the latest changes from the disk","body":"@Vaibhav Bhalke ok, then you should check if you have the freshest code in the eclipse - sync from vcs if any or hit f5 on the project to get the latest changes from the disk"},{"owner":{"account_id":151689,"reputation":8339,"user_id":365719,"accept_rate":65,"display_name":"Mike Baranczak"},"score":1,"creation_date":1305264508,"post_id":5987463,"comment_id":6913001,"body_markdown":"The source code that you&#39;re looking at is not the source code that was used to produce the compiled code that&#39;s throwing the error. There could be many things causing this, so without knowing anything about your build environment or your workflow I can&#39;t say for sure. Just make sure that when you redeploy, you re-compile *everything*.","body":"The source code that you&#39;re looking at is not the source code that was used to produce the compiled code that&#39;s throwing the error. There could be many things causing this, so without knowing anything about your build environment or your workflow I can&#39;t say for sure. Just make sure that when you redeploy, you re-compile <i>everything</i>."},{"owner":{"account_id":417009,"reputation":1953,"user_id":792760,"accept_rate":50,"display_name":"Sushant Kr"},"score":0,"creation_date":1335169213,"post_id":5987463,"comment_id":13218802,"body_markdown":"@VaibhaV I am facing same problem, can you tell what you did to solve it??","body":"@VaibhaV I am facing same problem, can you tell what you did to solve it??"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1651569600,"post_id":5987463,"comment_id":127388991,"body_markdown":"By the way, if anyone else is still using Java 1.6, you should have upgraded ~10 years ago.   And 1.6.0_16 is nearly 15 years out of date.","body":"By the way, if anyone else is still using Java 1.6, you should have upgraded ~10 years ago.   And 1.6.0_16 is nearly 15 years out of date."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1651569406,"creation_date":1305264698,"answer_id":5987595,"question_id":5987463,"body_markdown":"&gt; I am using eclipse helios, Java 1.6.0_16. Is it eclipse problem ? \r\n\r\nNo.  The JVM creates the stack traces, not Eclipse.  (It is *theoretically* possible that Eclipse&#39;s Java compiler could insert incorrect line numbers into the `.class` files ... but hundreds of thousands of Java developers would have noticed by now ...)\r\n\r\n&gt; I redeployed project still same problem.  what to do next ? How to solve this problem?\r\n\r\nAs @Mike says *&quot;The source code that you&#39;re looking at is not the source code that was used to produce the compiled code that&#39;s throwing the error.&quot;*\r\n\r\nIt therefore is either a build, deployment or configuration problem:\r\n\r\n  1.  In Eclipse, do an F5 refresh, clean and build the project, then redeploy and see if that fixes the line numbers.\r\n\r\n  1.  Manually shutdown the server, delete the deployed WAR file and expanded directory, redeploy the WAR file and restart the server.\r\n\r\n  1.  Search the deployed webapp, including all JAR files to find all copies of `AddProductServlet.class`.\r\n\r\n      - If there is more than one, figure out why.  \r\n\r\n      - If there is only one, check that it is identical to the one that you just built, and if it is not, find out why.\r\n\r\n  1.  Use `Ant` or whatever to build the code outside of Eclipse, then deploy that.  (This will eliminate any possibility that it is Eclipse&#39;s fault ...)\r\n\r\n","title":"Stack trace shows exception at wrong position","body":"<blockquote>\n<p>I am using eclipse helios, Java 1.6.0_16. Is it eclipse problem ?</p>\n</blockquote>\n<p>No.  The JVM creates the stack traces, not Eclipse.  (It is <em>theoretically</em> possible that Eclipse's Java compiler could insert incorrect line numbers into the <code>.class</code> files ... but hundreds of thousands of Java developers would have noticed by now ...)</p>\n<blockquote>\n<p>I redeployed project still same problem.  what to do next ? How to solve this problem?</p>\n</blockquote>\n<p>As @Mike says <em>&quot;The source code that you're looking at is not the source code that was used to produce the compiled code that's throwing the error.&quot;</em></p>\n<p>It therefore is either a build, deployment or configuration problem:</p>\n<ol>\n<li><p>In Eclipse, do an F5 refresh, clean and build the project, then redeploy and see if that fixes the line numbers.</p>\n</li>\n<li><p>Manually shutdown the server, delete the deployed WAR file and expanded directory, redeploy the WAR file and restart the server.</p>\n</li>\n<li><p>Search the deployed webapp, including all JAR files to find all copies of <code>AddProductServlet.class</code>.</p>\n<ul>\n<li><p>If there is more than one, figure out why.</p>\n</li>\n<li><p>If there is only one, check that it is identical to the one that you just built, and if it is not, find out why.</p>\n</li>\n</ul>\n</li>\n<li><p>Use <code>Ant</code> or whatever to build the code outside of Eclipse, then deploy that.  (This will eliminate any possibility that it is Eclipse's fault ...)</p>\n</li>\n</ol>\n"}],"owner":{"account_id":113024,"reputation":4516,"user_id":297907,"accept_rate":56,"display_name":"StackOverFlow"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7411,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":5987595,"answer_count":1,"score":3,"last_activity_date":1651569406,"creation_date":1305263262,"question_id":5987463,"body_markdown":"I&#39;m dealing with a null pointer exception for which I have a stack trace. In my log files, stack traces provide line numbers. It seems like the line numbers on the exception&#39;s stack trace are wrong. This is in a project that&#39;s new to me.\r\n\r\nWhen I look at the source code at the specified lines, there is sometimes no code (a blank line) or an end curly brace (`}`), so I&#39;m unable to find the cause of the `NullPointerException`.\r\n\r\n&gt; java.lang.NullPointerException  at  \r\n&gt; com.test.AddProductServlet.list(AddProductServlet.java:776)  \r\n&gt; \tat  \r\n&gt; com.test.AddProductServlet.list(AddProductServlet.java:436)  \r\n&gt; \tat  \r\n&gt; com.test.AddProductServlet.routeAction(AddProductServlet.java:263)  \r\n&gt; \tat  \r\n&gt; com.test.AddProductServlet.onService(AddProductServlet.java:145)  \r\n&gt; \tat  \r\n&gt; com.test.MqServlet.service(MqServlet.java:500)  \r\n&gt; \tat  \r\n&gt; javax.servlet.http.HttpServlet.service(HttpServlet.java:803)\r\n\r\nI inserted breakpoints before the lines from the stack trace (i.e. 770, 430 and 260) and still can&#39;t find the cause of the exception.\r\n\r\nI am using Eclipse Helios with Java 1.6.0_16. Is this an Eclipse problem? If so, what changes are required?\r\n\r\nI redeployed the project but still have the same problem.\r\n\r\nWhat do I do next? How can I solve this problem?","title":"Stack trace shows exception at wrong position","body":"<p>I'm dealing with a null pointer exception for which I have a stack trace. In my log files, stack traces provide line numbers. It seems like the line numbers on the exception's stack trace are wrong. This is in a project that's new to me.</p>\n\n<p>When I look at the source code at the specified lines, there is sometimes no code (a blank line) or an end curly brace (<code>}</code>), so I'm unable to find the cause of the <code>NullPointerException</code>.</p>\n\n<blockquote>\n  <p>java.lang.NullPointerException  at<br>\n  com.test.AddProductServlet.list(AddProductServlet.java:776)<br>\n    at<br>\n  com.test.AddProductServlet.list(AddProductServlet.java:436)<br>\n    at<br>\n  com.test.AddProductServlet.routeAction(AddProductServlet.java:263)<br>\n    at<br>\n  com.test.AddProductServlet.onService(AddProductServlet.java:145)<br>\n    at<br>\n  com.test.MqServlet.service(MqServlet.java:500)<br>\n    at<br>\n  javax.servlet.http.HttpServlet.service(HttpServlet.java:803)</p>\n</blockquote>\n\n<p>I inserted breakpoints before the lines from the stack trace (i.e. 770, 430 and 260) and still can't find the cause of the exception.</p>\n\n<p>I am using Eclipse Helios with Java 1.6.0_16. Is this an Eclipse problem? If so, what changes are required?</p>\n\n<p>I redeployed the project but still have the same problem.</p>\n\n<p>What do I do next? How can I solve this problem?</p>\n"},{"tags":["java","apache-camel","salesforce"],"answers":[{"tags":[],"owner":{"account_id":2269593,"reputation":43907,"user_id":1997376,"accept_rate":100,"display_name":"Nicolas Filotto"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1651569148,"creation_date":1651569148,"answer_id":72097161,"question_id":72095666,"body_markdown":"Your problem is related to the fact that [`clientId` is a **component option**][1] so it must be configured at the component level while you try to configure it like it was a query parameter / an endpoint option which cannot work.\r\n\r\nDepending on the runtime that you use, the way to configure a component may change but the idea remains the same.\r\n\r\nFor example, assuming that you use an `application.properties` to configure your application, the configuration of your salesforce component would look like this:\r\n\r\n**In application.properties**\r\n\r\n```\r\n# Salesforce credentials\r\ncamel.component.salesforce.login-config.client-id=&lt;Your Client ID&gt;\r\ncamel.component.salesforce.login-config.client-secret=&lt;Your Client Secret&gt;\r\ncamel.component.salesforce.login-config.refresh-token=&lt;Your Refresh Token&gt;\r\n...\r\n\r\n```\r\n\r\nHere is a salesforce example https://github.com/apache/camel-examples/blob/main/examples/salesforce-consumer/\r\n\r\n\r\n  [1]: https://camel.apache.org/components/next/salesforce-component.html#_component_option_clientId","title":"Unable to create camel salesforce endpoint","body":"<p>Your problem is related to the fact that <a href=\"https://camel.apache.org/components/next/salesforce-component.html#_component_option_clientId\" rel=\"nofollow noreferrer\"><code>clientId</code> is a <strong>component option</strong></a> so it must be configured at the component level while you try to configure it like it was a query parameter / an endpoint option which cannot work.</p>\n<p>Depending on the runtime that you use, the way to configure a component may change but the idea remains the same.</p>\n<p>For example, assuming that you use an <code>application.properties</code> to configure your application, the configuration of your salesforce component would look like this:</p>\n<p><strong>In application.properties</strong></p>\n<pre><code># Salesforce credentials\ncamel.component.salesforce.login-config.client-id=&lt;Your Client ID&gt;\ncamel.component.salesforce.login-config.client-secret=&lt;Your Client Secret&gt;\ncamel.component.salesforce.login-config.refresh-token=&lt;Your Refresh Token&gt;\n...\n\n</code></pre>\n<p>Here is a salesforce example <a href=\"https://github.com/apache/camel-examples/blob/main/examples/salesforce-consumer/\" rel=\"nofollow noreferrer\">https://github.com/apache/camel-examples/blob/main/examples/salesforce-consumer/</a></p>\n"}],"owner":{"account_id":1310169,"reputation":3813,"user_id":1258319,"accept_rate":81,"display_name":"Julian"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":637,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72097161,"answer_count":1,"score":0,"last_activity_date":1651569148,"creation_date":1651560258,"question_id":72095666,"body_markdown":"I am trying to connect to salesforce using Apache Camel salesforce component.\r\n\r\nHere is a very simple route I am trying to start:\r\n\r\n    @Override\r\n    public void configure() throws Exception {\r\n        from(&quot;salesforce:event/Case__e&quot;)\r\n                .to(&quot;mock:end&quot;);\r\n    }\r\n\r\nWhen trying to start it I am getting an obvious error saying I did not specify a client id:\r\n\r\n    Caused by: java.lang.IllegalArgumentException: clientId must be specified\r\n\tat org.apache.camel.util.ObjectHelper.notNull(ObjectHelper.java:149) ~[camel-util-3.16.0.jar:3.16.0]\r\n\tat org.apache.camel.component.salesforce.SalesforceLoginConfig.validate(SalesforceLoginConfig.java:238) ~[camel-salesforce-3.16.0.jar:3.16.0]\r\n\r\nThat makes perfectly sense as according to Camel docs clentId parameter must be specified. To address this I am specifying a `clientId` as below:\r\n\r\n    @Override\r\n    public void configure() throws Exception {\r\n        from(&quot;salesforce:event/Case__e?clientId=xyz&quot;)\r\n                .to(&quot;mock:end&quot;);\r\n    }\r\n\r\nWhen trying to start the route this time I am getting a rather strange error complaining about `clientId` being an unknown parameter:\r\n\r\n    Failed to resolve endpoint: salesforce://event/Case__e?clientId=xyz due to: There are 1 parameters that couldn&#39;t be set on the endpoint.\r\n    Check the uri if the parameters are spelt correctly and that they are properties of the endpoint.\r\n    Unknown parameters=[{clientId=xyz}]\r\n\r\nNot sure what I am doing wrong and how should I address this.\r\n\r\nThank you in advance for your inputs.\r\n\r\n","title":"Unable to create camel salesforce endpoint","body":"<p>I am trying to connect to salesforce using Apache Camel salesforce component.</p>\n<p>Here is a very simple route I am trying to start:</p>\n<pre><code>@Override\npublic void configure() throws Exception {\n    from(&quot;salesforce:event/Case__e&quot;)\n            .to(&quot;mock:end&quot;);\n}\n</code></pre>\n<p>When trying to start it I am getting an obvious error saying I did not specify a client id:</p>\n<pre><code>Caused by: java.lang.IllegalArgumentException: clientId must be specified\nat org.apache.camel.util.ObjectHelper.notNull(ObjectHelper.java:149) ~[camel-util-3.16.0.jar:3.16.0]\nat org.apache.camel.component.salesforce.SalesforceLoginConfig.validate(SalesforceLoginConfig.java:238) ~[camel-salesforce-3.16.0.jar:3.16.0]\n</code></pre>\n<p>That makes perfectly sense as according to Camel docs clentId parameter must be specified. To address this I am specifying a <code>clientId</code> as below:</p>\n<pre><code>@Override\npublic void configure() throws Exception {\n    from(&quot;salesforce:event/Case__e?clientId=xyz&quot;)\n            .to(&quot;mock:end&quot;);\n}\n</code></pre>\n<p>When trying to start the route this time I am getting a rather strange error complaining about <code>clientId</code> being an unknown parameter:</p>\n<pre><code>Failed to resolve endpoint: salesforce://event/Case__e?clientId=xyz due to: There are 1 parameters that couldn't be set on the endpoint.\nCheck the uri if the parameters are spelt correctly and that they are properties of the endpoint.\nUnknown parameters=[{clientId=xyz}]\n</code></pre>\n<p>Not sure what I am doing wrong and how should I address this.</p>\n<p>Thank you in advance for your inputs.</p>\n"},{"tags":["java","algorithm","matrix","depth-first-search","word-count"],"comments":[{"owner":{"account_id":6350313,"reputation":1134,"user_id":5594167,"display_name":"Mr. Brickowski"},"score":0,"creation_date":1651566889,"post_id":72096126,"comment_id":127388187,"body_markdown":"Could you also share the main? It helps us to test.","body":"Could you also share the main? It helps us to test."}],"answers":[{"tags":[],"owner":{"account_id":10805595,"reputation":3025,"user_id":7947994,"display_name":"JANO"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1651567323,"creation_date":1651567323,"answer_id":72096829,"question_id":72096126,"body_markdown":"I think your problem is that you return all calls if you find your word. However, even if you found one word you still want to search all other possibilities because the word you search for can occur multiple times starting from the same cell. \r\n\r\nTherefore, I suggest removing the boolean return value from the dfs function as you still want to search for other possibilities if you found the word. I tested following code with your example inputs and it seems to work.\r\n\r\n```\r\nstatic void searchWord(char board[][], String word, int i, int j, int m, int n, int index) {\r\n\r\n    if (i &lt; 0 || j &lt; 0 || i &gt;= m || j &gt;= n)\r\n        return;\r\n\r\n    if (visited[i][j] || board[i][j] != word.charAt(index))\r\n        return;\r\n\r\n    if (index + 1 == word.length()) {\r\n        count++;\r\n        return;\r\n    }\r\n\r\n    visited[i][j] = true;\r\n\r\n    searchWord(board, word, i - 1, j, m, n, index + 1);\r\n    searchWord(board, word, i + 1, j, m, n, index + 1);\r\n    searchWord(board, word, i, j - 1, m, n, index + 1);\r\n    searchWord(board, word, i, j + 1, m, n, index + 1);\r\n\r\n    visited[i][j] = false;\r\n}\r\n``` \r\n\r\nEDIT: I also had to change the order of your `if` statements as you otherwise would count each occurrence four times.","title":"How to count all occurrences of a word in a character matrix?","body":"<p>I think your problem is that you return all calls if you find your word. However, even if you found one word you still want to search all other possibilities because the word you search for can occur multiple times starting from the same cell.</p>\n<p>Therefore, I suggest removing the boolean return value from the dfs function as you still want to search for other possibilities if you found the word. I tested following code with your example inputs and it seems to work.</p>\n<pre><code>static void searchWord(char board[][], String word, int i, int j, int m, int n, int index) {\n\n    if (i &lt; 0 || j &lt; 0 || i &gt;= m || j &gt;= n)\n        return;\n\n    if (visited[i][j] || board[i][j] != word.charAt(index))\n        return;\n\n    if (index + 1 == word.length()) {\n        count++;\n        return;\n    }\n\n    visited[i][j] = true;\n\n    searchWord(board, word, i - 1, j, m, n, index + 1);\n    searchWord(board, word, i + 1, j, m, n, index + 1);\n    searchWord(board, word, i, j - 1, m, n, index + 1);\n    searchWord(board, word, i, j + 1, m, n, index + 1);\n\n    visited[i][j] = false;\n}\n</code></pre>\n<p>EDIT: I also had to change the order of your <code>if</code> statements as you otherwise would count each occurrence four times.</p>\n"}],"owner":{"account_id":21539399,"reputation":33,"user_id":15877392,"display_name":"Anonymous"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1910,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":72096829,"answer_count":1,"score":3,"last_activity_date":1651569070,"creation_date":1651563299,"question_id":72096126,"body_markdown":"**Problem**\r\n===========\r\n\r\nGiven a m x n 2D board of characters and a word, find how many times the word is present in the board.\r\n\r\nThe word can be constructed from letters of sequentially adjacent cells, where adjacent cells are horizontally or vertically neighboring.\r\n\r\nNote: The same letter cell may not be used more than once.\r\n\r\nInput Format\r\n\r\nFirst line contains two space separated integers m, n that denotes the number of rows and columns in the board respectively.\r\nNext m lines contain n characters each.\r\nLast line contains the word to be searched.\r\n\r\nConstraints\r\n\r\n1 &lt;= m, n &lt;= 5\r\n\r\n1 &lt;= lengthOf(word) &lt;= 30\r\n\r\n    enter code here\r\n\r\nOutput Format\r\n\r\nPrint the total count of the given word in the 2-D board. \r\n\r\n**Sample Input** \r\n\r\n```\r\n3 4\r\nHDST\r\nANEO\r\nBENY\r\nNEST  // word\r\n```\r\n**Sample Output** \r\n```\r\n2\r\n```\r\nAlso I am not able to satisfy the test case \r\n```\r\n5 5\r\nLACOO \r\nOOOCL\r\nNLOOO\r\nECOCO\r\nMECOO\r\nCOOLOOC\r\n```\r\n**Output should be**\r\n\r\n```\r\n28\r\n```\r\n\r\n**My Code**\r\n\r\n```\r\n public static void main(String[] args) {\r\n        int m, n;\r\n        Scanner sc = new Scanner(System.in);\r\n        m = sc.nextInt();\r\n        n = sc.nextInt();\r\n\r\n        char[][] board = new char[m][n + 1];\r\n        for (int i = 0; i &lt; m; i++) {\r\n            String temp = sc.next();\r\n            board[i] = temp.toCharArray();\r\n        }\r\n\r\n        String word = sc.next();\r\n\r\n        System.out.print(new Result().countWord(board, word, m, n));\r\n    }\r\n\r\nstatic class Result {\r\n        static boolean[][] visited;\r\n        static int count = 0;\r\n\r\n        int countWord(char board[][], String word, int m, int n) {\r\n            visited = new boolean[m][n];\r\n            for (int i = 0; i &lt; m; i++) {\r\n                for (int j = 0; j &lt; n; j++) {\r\n                    if (board[i][j] == word.charAt(0)) {\r\n                        if(searchWord(board, word, i, j, m, n, 0))\r\n                            count++;\r\n                    }\r\n                }\r\n            }\r\n            return count;\r\n        }\r\n\r\n        static boolean searchWord(char board[][], String word, int i, int j, int m, int n, int index) {\r\n            if (index == word.length()) {\r\n                count++;\r\n                return true;\r\n            }\r\n\r\n            if (i &lt; 0 || j &lt; 0 || i &gt;= m || j &gt;= n)\r\n                return false;\r\n\r\n            if (visited[i][j] || board[i][j] != word.charAt(index))\r\n                return false;\r\n\r\n            visited[i][j] = true;\r\n\r\n            if (searchWord(board, word, i - 1, j, m, n, index + 1) ||\r\n                    searchWord(board, word, i + 1, j, m, n, index + 1) ||\r\n                    searchWord(board, word, i, j - 1, m, n, index + 1) ||\r\n                    searchWord(board, word, i, j + 1, m, n, index + 1)) {\r\n                return true;\r\n            }\r\n\r\n            visited[i][j] = false;\r\n            return false;\r\n        }\r\n    }\r\n```\r\n","title":"How to count all occurrences of a word in a character matrix?","body":"<h1><strong>Problem</strong></h1>\n<p>Given a m x n 2D board of characters and a word, find how many times the word is present in the board.</p>\n<p>The word can be constructed from letters of sequentially adjacent cells, where adjacent cells are horizontally or vertically neighboring.</p>\n<p>Note: The same letter cell may not be used more than once.</p>\n<p>Input Format</p>\n<p>First line contains two space separated integers m, n that denotes the number of rows and columns in the board respectively.\nNext m lines contain n characters each.\nLast line contains the word to be searched.</p>\n<p>Constraints</p>\n<p>1 &lt;= m, n &lt;= 5</p>\n<p>1 &lt;= lengthOf(word) &lt;= 30</p>\n<pre><code>enter code here\n</code></pre>\n<p>Output Format</p>\n<p>Print the total count of the given word in the 2-D board.</p>\n<p><strong>Sample Input</strong></p>\n<pre><code>3 4\nHDST\nANEO\nBENY\nNEST  // word\n</code></pre>\n<p><strong>Sample Output</strong></p>\n<pre><code>2\n</code></pre>\n<p>Also I am not able to satisfy the test case</p>\n<pre><code>5 5\nLACOO \nOOOCL\nNLOOO\nECOCO\nMECOO\nCOOLOOC\n</code></pre>\n<p><strong>Output should be</strong></p>\n<pre><code>28\n</code></pre>\n<p><strong>My Code</strong></p>\n<pre><code> public static void main(String[] args) {\n        int m, n;\n        Scanner sc = new Scanner(System.in);\n        m = sc.nextInt();\n        n = sc.nextInt();\n\n        char[][] board = new char[m][n + 1];\n        for (int i = 0; i &lt; m; i++) {\n            String temp = sc.next();\n            board[i] = temp.toCharArray();\n        }\n\n        String word = sc.next();\n\n        System.out.print(new Result().countWord(board, word, m, n));\n    }\n\nstatic class Result {\n        static boolean[][] visited;\n        static int count = 0;\n\n        int countWord(char board[][], String word, int m, int n) {\n            visited = new boolean[m][n];\n            for (int i = 0; i &lt; m; i++) {\n                for (int j = 0; j &lt; n; j++) {\n                    if (board[i][j] == word.charAt(0)) {\n                        if(searchWord(board, word, i, j, m, n, 0))\n                            count++;\n                    }\n                }\n            }\n            return count;\n        }\n\n        static boolean searchWord(char board[][], String word, int i, int j, int m, int n, int index) {\n            if (index == word.length()) {\n                count++;\n                return true;\n            }\n\n            if (i &lt; 0 || j &lt; 0 || i &gt;= m || j &gt;= n)\n                return false;\n\n            if (visited[i][j] || board[i][j] != word.charAt(index))\n                return false;\n\n            visited[i][j] = true;\n\n            if (searchWord(board, word, i - 1, j, m, n, index + 1) ||\n                    searchWord(board, word, i + 1, j, m, n, index + 1) ||\n                    searchWord(board, word, i, j - 1, m, n, index + 1) ||\n                    searchWord(board, word, i, j + 1, m, n, index + 1)) {\n                return true;\n            }\n\n            visited[i][j] = false;\n            return false;\n        }\n    }\n</code></pre>\n"},{"tags":["java","session","tomcat","webserver","session-timeout"],"answers":[{"tags":[],"owner":{"account_id":3084600,"reputation":5860,"user_id":2612030,"display_name":"ewramner"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1651568469,"creation_date":1651568469,"answer_id":72097053,"question_id":72095832,"body_markdown":"You can get the configured timeout from the session itself, use [getMaxInactiveInterval][1]. It gives you the time in seconds.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpSession.html#getMaxInactiveInterval--","title":"How to access Session Timeout Value in web.xml?","body":"<p>You can get the configured timeout from the session itself, use <a href=\"https://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpSession.html#getMaxInactiveInterval--\" rel=\"nofollow noreferrer\">getMaxInactiveInterval</a>. It gives you the time in seconds.</p>\n"}],"owner":{"account_id":19069906,"reputation":17,"user_id":13924302,"display_name":"Kavin Velusamy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1051,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72097053,"answer_count":1,"score":0,"last_activity_date":1651568469,"creation_date":1651561412,"question_id":72095832,"body_markdown":"I want to implement idle session Timeout on the server-side in my web application. I&#39;m using the Tomcat server.\r\n\r\n```\r\n  &lt;session-config&gt;\r\n  \t&lt;session-timeout&gt;10&lt;/session-timeout&gt;\r\n  &lt;/session-config&gt;\r\n```\r\n\r\nI can able to create an idle Session Timeout of 10 minutes but I also want to notify users if the timer is going to expire.\r\nExample: If only 2 minutes remaining in Timer, then I&#39;ll create a modal window displaying &quot;Your session is going to expire, press ok to continue your session&quot;\r\n\r\nFor those activities, I need to access and modify the session Timeout value. \r\n\r\nMy question is,\r\n1) Is it possible to access the session configuration?\r\n2) If yes, how to access it?\r\n3) If no, what are the other ways to perform these actions?\r\n\r\nThanks in advance!","title":"How to access Session Timeout Value in web.xml?","body":"<p>I want to implement idle session Timeout on the server-side in my web application. I'm using the Tomcat server.</p>\n<pre><code>  &lt;session-config&gt;\n    &lt;session-timeout&gt;10&lt;/session-timeout&gt;\n  &lt;/session-config&gt;\n</code></pre>\n<p>I can able to create an idle Session Timeout of 10 minutes but I also want to notify users if the timer is going to expire.\nExample: If only 2 minutes remaining in Timer, then I'll create a modal window displaying &quot;Your session is going to expire, press ok to continue your session&quot;</p>\n<p>For those activities, I need to access and modify the session Timeout value.</p>\n<p>My question is,</p>\n<ol>\n<li>Is it possible to access the session configuration?</li>\n<li>If yes, how to access it?</li>\n<li>If no, what are the other ways to perform these actions?</li>\n</ol>\n<p>Thanks in advance!</p>\n"},{"tags":["java","design-patterns"],"comments":[{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":1,"creation_date":1651568588,"post_id":72096350,"comment_id":127388676,"body_markdown":"Note: not using a generic type on your return type is a raw type, something you absolutely never do. And yeah: just not possible: you can&#39;t have different return types from the same method in Java, unless returning Object for example.","body":"Note: not using a generic type on your return type is a raw type, something you absolutely never do. And yeah: just not possible: you can&#39;t have different return types from the same method in Java, unless returning Object for example."},{"owner":{"account_id":8546,"reputation":17688,"user_id":15472,"accept_rate":87,"display_name":"tucuxi"},"score":0,"creation_date":1651593771,"post_id":72096350,"comment_id":127397963,"body_markdown":"Where would such a function-that-returns-functions-with-different-parameter-counts be useful? In the above case, I argue (see answer below) that using an interface would be much clearer. You *could* just return a `Function` that takes a `String[]` ...","body":"Where would such a function-that-returns-functions-with-different-parameter-cou&zwnj;&#8203;nts be useful? In the above case, I argue (see answer below) that using an interface would be much clearer. You <i>could</i> just return a <code>Function</code> that takes a <code>String[]</code> ..."}],"answers":[{"tags":[],"owner":{"account_id":8546,"reputation":17688,"user_id":15472,"accept_rate":87,"display_name":"tucuxi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1651568460,"creation_date":1651568460,"answer_id":72097051,"question_id":72096350,"body_markdown":"I would create a `KeyBuilder` interface as follows, and implement it differently for each type. No enums needed:\r\n\r\n     public interface KeyBuilder {\r\n         String buildKey();\r\n     }\r\n\r\n     // things that use userId &amp; productId:\r\n     public class Foo implements KeyBuilder {\r\n         // ...\r\n         public String buildKey() { return userId + &quot;-&quot; + productId; }\r\n     }\r\n\r\n     // things that use appId {\r\n     public class Bar implements KeyBuilder {\r\n         // ...\r\n         public String buildKey() { return appId; }\r\n     }\r\n\r\nThen, your code becomes cleaner and is still easy to test\r\n\r\n     // before: have to build explicitly \r\n     lookupSomethingExternal(foo.getUserId() + &quot;-&quot; + foo.getProductId());\r\n     lookupSomethingExternal(bar.getAppId());\r\n\r\n     // after: lookupSomethingInternal expects something implementing KeyBuilder\r\n     lookupSomethingExternal(foo);\r\n     lookupSomethingExternal(bar);\r\n\r\n     // after: can mock for unit-tests\r\n     lookupSomethingExternal(() -&gt; &quot;testKey&quot;);","title":"What is the Java pattern to return functions with different signatures based on some condition?","body":"<p>I would create a <code>KeyBuilder</code> interface as follows, and implement it differently for each type. No enums needed:</p>\n<pre><code> public interface KeyBuilder {\n     String buildKey();\n }\n\n // things that use userId &amp; productId:\n public class Foo implements KeyBuilder {\n     // ...\n     public String buildKey() { return userId + &quot;-&quot; + productId; }\n }\n\n // things that use appId {\n public class Bar implements KeyBuilder {\n     // ...\n     public String buildKey() { return appId; }\n }\n</code></pre>\n<p>Then, your code becomes cleaner and is still easy to test</p>\n<pre><code> // before: have to build explicitly \n lookupSomethingExternal(foo.getUserId() + &quot;-&quot; + foo.getProductId());\n lookupSomethingExternal(bar.getAppId());\n\n // after: lookupSomethingInternal expects something implementing KeyBuilder\n lookupSomethingExternal(foo);\n lookupSomethingExternal(bar);\n\n // after: can mock for unit-tests\n lookupSomethingExternal(() -&gt; &quot;testKey&quot;);\n</code></pre>\n"}],"owner":{"account_id":11102083,"reputation":1171,"user_id":9914653,"display_name":"hitchhiker"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":72097051,"answer_count":1,"score":-1,"last_activity_date":1651568460,"creation_date":1651564608,"question_id":72096350,"body_markdown":"I&#39;m trying to write a `Client` class which can look up entities from an external data store. The main parameter used to look up entities is a key. The problem is that sometimes a key is just a `userId`, sometimes it&#39;s a combination of `userId` and `productId`. So I&#39;d like to enforce the consumer of my `Client` API to use a key builder specific to an entity. I tried the code below:\r\n```java\r\nimport java.util.function.BiFunction;\r\nimport java.util.function.Function;\r\n\r\npublic class Client {\r\n  public Function getBuilder(SomeEnum type) {\r\n    switch (type) {\r\n      case TYPE_X:\r\n        BiFunction&lt;String, String, Entity&gt; builder = (userId, productId) -&gt; {\r\n          String key = userId + &quot;-&quot; + productId;\r\n          // lookup something in external data store based on the key and return the found entity\r\n        };\r\n        return builder;\r\n      case TYPE_Y:\r\n        Function&lt;String, Entity&gt; b = appId -&gt; {\r\n          String key = userId;\r\n          // lookup something in external data store based on the key and return the found entity\r\n        };\r\n        return b;\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nThe code doesn&#39;t compile of course because the return types don&#39;t match. I&#39;m wondering if the code can be fixed and if not what is the correct Java pattern to enforce such builders with different signatures.","title":"What is the Java pattern to return functions with different signatures based on some condition?","body":"<p>I'm trying to write a <code>Client</code> class which can look up entities from an external data store. The main parameter used to look up entities is a key. The problem is that sometimes a key is just a <code>userId</code>, sometimes it's a combination of <code>userId</code> and <code>productId</code>. So I'd like to enforce the consumer of my <code>Client</code> API to use a key builder specific to an entity. I tried the code below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.function.BiFunction;\nimport java.util.function.Function;\n\npublic class Client {\n  public Function getBuilder(SomeEnum type) {\n    switch (type) {\n      case TYPE_X:\n        BiFunction&lt;String, String, Entity&gt; builder = (userId, productId) -&gt; {\n          String key = userId + &quot;-&quot; + productId;\n          // lookup something in external data store based on the key and return the found entity\n        };\n        return builder;\n      case TYPE_Y:\n        Function&lt;String, Entity&gt; b = appId -&gt; {\n          String key = userId;\n          // lookup something in external data store based on the key and return the found entity\n        };\n        return b;\n    }\n  }\n}\n</code></pre>\n<p>The code doesn't compile of course because the return types don't match. I'm wondering if the code can be fixed and if not what is the correct Java pattern to enforce such builders with different signatures.</p>\n"},{"tags":["java","spring","ignite"],"answers":[{"tags":[],"owner":{"account_id":2182,"reputation":51860,"user_id":2998,"accept_rate":69,"display_name":"Stephen Darlington"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1651568311,"creation_date":1651568311,"answer_id":72097022,"question_id":72086894,"body_markdown":"You hint at the problem in your last paragraph. You can store Sets in Ignite, and you can &quot;peer class load&quot; code over the network. What you _can&#39;t_ do is peer class load code used in your &quot;model,&quot; that is, any class used to define your caches. In your sample code, that&#39;s the closure in `Collections.newSetFromMap`.\r\n\r\nI think storing your custom Set in Ignite is a bit messy. You can&#39;t query collections using SQL, for instance. So the best solution would be to model your data differently.\r\n\r\nIf you really want to go this route, if you put a copy of your class on the server-side it should work.","title":"Why apache ignite is not deserializing the java.util.Collections$SetFromMap?","body":"<p>You hint at the problem in your last paragraph. You can store Sets in Ignite, and you can &quot;peer class load&quot; code over the network. What you <em>can't</em> do is peer class load code used in your &quot;model,&quot; that is, any class used to define your caches. In your sample code, that's the closure in <code>Collections.newSetFromMap</code>.</p>\n<p>I think storing your custom Set in Ignite is a bit messy. You can't query collections using SQL, for instance. So the best solution would be to model your data differently.</p>\n<p>If you really want to go this route, if you put a copy of your class on the server-side it should work.</p>\n"}],"owner":{"account_id":17338875,"reputation":59,"user_id":12560110,"display_name":"Bharath Kumar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":160,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72097022,"answer_count":1,"score":0,"last_activity_date":1651568311,"creation_date":1651495449,"question_id":72086894,"body_markdown":"Apache ignite is throwing below exception when i am trying to put data into cache,\r\n\r\n    Caused by: class org.apache.ignite.IgniteCheckedException: Failed to deserialize object with given class loader: [clsLdr=org.apache.ignite.internal.processors.cache.GridCacheDeploymentManager$CacheClassLoader@5d5b5fa7, err=Failed to deserialize object [typeName=java.util.Collections$SetFromMap]]\r\n\t\tCaused by: java.lang.reflect.InvocationTargetException\r\n\t\t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\t\t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\t\t\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\t\t\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\t\t\tat org.apache.ignite.internal.marshaller.optimized.OptimizedObjectInputStream.readSerializable(OptimizedObjectInputStream.java:608)\r\n\t\t\t... 43 more\r\n\t\tCaused by: java.lang.ClassNotFoundException: com.example.springapachecache.HelloWorld$1\r\n\r\n\r\nProgram:\r\n\r\n     package com.example.springapachecache;\r\n\r\n     import org.apache.ignite.Ignite;\r\n     import org.apache.ignite.IgniteCache;\r\n     import org.apache.ignite.IgniteException;\r\n     import org.apache.ignite.Ignition;\r\n     import org.apache.ignite.configuration.IgniteConfiguration;\r\n     import org.apache.ignite.spi.discovery.tcp.TcpDiscoverySpi;\r\n     import org.apache.ignite.spi.discovery.tcp.ipfinder.multicast.TcpDiscoveryMulticastIpFinder;\r\n\r\n     import java.util.*;\r\n\r\n     public class HelloWorld {\r\n     public static void main(String[] args) throws IgniteException {\r\n        // Preparing IgniteConfiguration using Java APIs\r\n        IgniteConfiguration cfg = new IgniteConfiguration();\r\n\r\n        // The node will be started as a client node.\r\n        cfg.setClientMode(true);\r\n\r\n        // Classes of custom Java logic will be transferred over the wire from this app.\r\n        cfg.setPeerClassLoadingEnabled(true);\r\n\r\n        // Setting up an IP Finder to ensure the client can locate the servers.\r\n        TcpDiscoveryMulticastIpFinder ipFinder = new TcpDiscoveryMulticastIpFinder();\r\n        ipFinder.setAddresses(Collections.singletonList(&quot;127.0.0.1:47500..47509&quot;));\r\n        cfg.setDiscoverySpi(new TcpDiscoverySpi().setIpFinder(ipFinder));\r\n\r\n        // Starting the node\r\n        Ignite ignite = Ignition.start(cfg);\r\n        IgniteCache&lt;Integer, Set&lt;String&gt;&gt; setCache = ignite.getOrCreateCache(&quot;mySetCache&quot;);\r\n        System.out.println(&quot;setCache before: &quot;+setCache.get(1));\r\n        Set&lt;String&gt; meetingUuids = Collections.newSetFromMap(new LinkedHashMap&lt;String, Boolean&gt;() {\r\n            // Set backed by LRU map.\r\n            private static final long serialVersionUID = -8251614405342939979L;\r\n            @Override\r\n            protected boolean removeEldestEntry(Map.Entry&lt;String, Boolean&gt; eldest) {\r\n                return size() &gt; 1000;\r\n            }\r\n        });\r\n\r\n        meetingUuids.add(&quot;meetingId&quot;);\r\n       //        Set&lt;String&gt; meetingUuidSet = new HashSet&lt;&gt;(meetingUuids);\r\n       //        setCache.put(3, meetingUuidSet);\r\n        setCache.put(1, meetingUuids);\r\n        System.out.println(&quot;setCache after: &quot;+setCache.get(1));\r\n\r\n        // Disconnect from the cluster.\r\n        ignite.close();\r\n    }\r\n}\r\n\r\nConstructing Set using simple linkedHashMap(Set&lt;String&gt; meetingUuids = Collections.newSetFromMap(new LinkedHashMap&lt;String, Boolean&gt;()) works fine. \r\nCould you please help?","title":"Why apache ignite is not deserializing the java.util.Collections$SetFromMap?","body":"<p>Apache ignite is throwing below exception when i am trying to put data into cache,</p>\n<pre><code>Caused by: class org.apache.ignite.IgniteCheckedException: Failed to deserialize object with given class loader: [clsLdr=org.apache.ignite.internal.processors.cache.GridCacheDeploymentManager$CacheClassLoader@5d5b5fa7, err=Failed to deserialize object [typeName=java.util.Collections$SetFromMap]]\n    Caused by: java.lang.reflect.InvocationTargetException\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n        at org.apache.ignite.internal.marshaller.optimized.OptimizedObjectInputStream.readSerializable(OptimizedObjectInputStream.java:608)\n        ... 43 more\n    Caused by: java.lang.ClassNotFoundException: com.example.springapachecache.HelloWorld$1\n</code></pre>\n<p>Program:</p>\n<pre><code> package com.example.springapachecache;\n\n import org.apache.ignite.Ignite;\n import org.apache.ignite.IgniteCache;\n import org.apache.ignite.IgniteException;\n import org.apache.ignite.Ignition;\n import org.apache.ignite.configuration.IgniteConfiguration;\n import org.apache.ignite.spi.discovery.tcp.TcpDiscoverySpi;\n import org.apache.ignite.spi.discovery.tcp.ipfinder.multicast.TcpDiscoveryMulticastIpFinder;\n\n import java.util.*;\n\n public class HelloWorld {\n public static void main(String[] args) throws IgniteException {\n    // Preparing IgniteConfiguration using Java APIs\n    IgniteConfiguration cfg = new IgniteConfiguration();\n\n    // The node will be started as a client node.\n    cfg.setClientMode(true);\n\n    // Classes of custom Java logic will be transferred over the wire from this app.\n    cfg.setPeerClassLoadingEnabled(true);\n\n    // Setting up an IP Finder to ensure the client can locate the servers.\n    TcpDiscoveryMulticastIpFinder ipFinder = new TcpDiscoveryMulticastIpFinder();\n    ipFinder.setAddresses(Collections.singletonList(&quot;127.0.0.1:47500..47509&quot;));\n    cfg.setDiscoverySpi(new TcpDiscoverySpi().setIpFinder(ipFinder));\n\n    // Starting the node\n    Ignite ignite = Ignition.start(cfg);\n    IgniteCache&lt;Integer, Set&lt;String&gt;&gt; setCache = ignite.getOrCreateCache(&quot;mySetCache&quot;);\n    System.out.println(&quot;setCache before: &quot;+setCache.get(1));\n    Set&lt;String&gt; meetingUuids = Collections.newSetFromMap(new LinkedHashMap&lt;String, Boolean&gt;() {\n        // Set backed by LRU map.\n        private static final long serialVersionUID = -8251614405342939979L;\n        @Override\n        protected boolean removeEldestEntry(Map.Entry&lt;String, Boolean&gt; eldest) {\n            return size() &gt; 1000;\n        }\n    });\n\n    meetingUuids.add(&quot;meetingId&quot;);\n   //        Set&lt;String&gt; meetingUuidSet = new HashSet&lt;&gt;(meetingUuids);\n   //        setCache.put(3, meetingUuidSet);\n    setCache.put(1, meetingUuids);\n    System.out.println(&quot;setCache after: &quot;+setCache.get(1));\n\n    // Disconnect from the cluster.\n    ignite.close();\n}\n</code></pre>\n<p>}</p>\n<p>Constructing Set using simple linkedHashMap(Set meetingUuids = Collections.newSetFromMap(new LinkedHashMap&lt;String, Boolean&gt;()) works fine.\nCould you please help?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":209503,"reputation":22790,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":0,"creation_date":1651528169,"post_id":72092678,"comment_id":127381782,"body_markdown":"Hi There, please post your stack trace exception. Without an executable code, no information what is the external service (therefore no way of verifying if you are following their documentation) and no log error your question is close to impossible to answer. And please mask any confidential information for whatever you post :)","body":"Hi There, please post your stack trace exception. Without an executable code, no information what is the external service (therefore no way of verifying if you are following their documentation) and no log error your question is close to impossible to answer. And please mask any confidential information for whatever you post :)"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1651549937,"post_id":72092678,"comment_id":127384793,"body_markdown":"The peer seems to have closed the connection while you are still writing it. You are probably exceeding an upload limit at the server.","body":"The peer seems to have closed the connection while you are still writing it. You are probably exceeding an upload limit at the server."}],"owner":{"account_id":25177179,"reputation":1,"user_id":19019190,"display_name":"mythu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":655,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1651568017,"creation_date":1651527577,"question_id":72092678,"body_markdown":"Here we need to post multipart body with text parameters and files to an external api to upload the files so we tried with below code, but its giving java.net.SocketException: Connection reset by peer: socket write error when calling the httpclient.execute method. can anyone pls give any inputs to resolve this.\r\nThanks in advance  \r\n\r\n     HttpPost postRequest = new HttpPost(uri);\r\n       \r\n          MultipartEntityBuilder builder = MultipartEntityBuilder.create();\r\n          builder.setMode(HttpMultipartMode.BROWSER_COMPATIBLE);\r\n              for (NameValuePair param : body) {            \r\n                   builder.addTextBody(param.getName(), param.getValue(), ContentType.TEXT_PLAIN);\r\n              }\r\n        if (files != null &amp;&amp; !files.isEmpty()) {\r\n            for (File file : files) {\r\n                   byte[] arr = Files.readAllBytes(Paths.get(file.getPath()));\r\n                   builder.addBinaryBody(\r\n                        &quot;files&quot;,\r\n                        arr,\r\n                        ContentType.APPLICATION_OCTET_STREAM,\r\n                        file.getName()\r\n                );\r\n            }\r\n        }\r\n        HttpEntity entity = builder.build();\r\n        postRequest.setEntity(entity);\r\n        postRequest.addHeader(&quot;Authorization&quot;, authorization);       \r\n            CloseableHttpResponse response = httpClient.execute(postRequest);\r\n\r\nbelow is the exception stacktrace\r\n\r\n    java.net.SocketException: Connection reset by peer: socket write error\r\n\tat java.net.SocketOutputStream.socketWrite0(Native Method)\r\n\tat java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:111)\r\n\tat java.net.SocketOutputStream.write(SocketOutputStream.java:155)\r\n\tat sun.security.ssl.OutputRecord.writeBuffer(OutputRecord.java:431)\r\n\tat sun.security.ssl.OutputRecord.write(OutputRecord.java:417)\r\n\tat sun.security.ssl.SSLSocketImpl.writeRecordInternal(SSLSocketImpl.java:879)\r\n\tat sun.security.ssl.SSLSocketImpl.writeRecord(SSLSocketImpl.java:850)\r\n\tat sun.security.ssl.AppOutputStream.write(AppOutputStream.java:123)\r\n\tat org.apache.http.impl.io.SessionOutputBufferImpl.streamWrite(SessionOutputBufferImpl.java:126)\r\n\tat org.apache.http.impl.io.SessionOutputBufferImpl.write(SessionOutputBufferImpl.java:162)\r\n\tat org.apache.http.impl.io.ContentLengthOutputStream.write(ContentLengthOutputStream.java:115)\r\n\tat org.apache.http.impl.io.ContentLengthOutputStream.write(ContentLengthOutputStream.java:122)\r\n\tat org.apache.http.entity.mime.content.ByteArrayBody.writeTo(ByteArrayBody.java:97)\r\n\tat org.apache.http.entity.mime.AbstractMultipartForm.doWriteTo(AbstractMultipartForm.java:134)\r\n\tat org.apache.http.entity.mime.AbstractMultipartForm.writeTo(AbstractMultipartForm.java:157)\r\n\tat org.apache.http.entity.mime.MultipartFormEntity.writeTo(MultipartFormEntity.java:113)\r\n\tat org.apache.http.impl.DefaultBHttpClientConnection.sendRequestEntity(DefaultBHttpClientConnection.java:158)\r\n\tat org.apache.http.impl.conn.CPoolProxy.sendRequestEntity(CPoolProxy.java:162)\r\n\tat org.apache.http.protocol.HttpRequestExecutor.doSendRequest(HttpRequestExecutor.java:237)\r\n\tat org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:122)\r\n\tat org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:271)\r\n\tat org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:184)\r\n\tat org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:88)\r\n\tat org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)\r\n\tat org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:184)\r\n\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:82)\r\n\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:107)\r\n\r\n\r\nand I am using a mock(https://run.mocky.io/v3/d734cbfc-4d78-4654-8f0b-c00bd5912fbd) as an external api for development and I am trying to upload 2 files which are one pdf and one jpeg format and both are less than 200kb","title":"java.net.SocketException: Connection reset by peer: socket write error when posting multipart form data(text and files) to an external api in java","body":"<p>Here we need to post multipart body with text parameters and files to an external api to upload the files so we tried with below code, but its giving java.net.SocketException: Connection reset by peer: socket write error when calling the httpclient.execute method. can anyone pls give any inputs to resolve this.\nThanks in advance</p>\n<pre><code> HttpPost postRequest = new HttpPost(uri);\n   \n      MultipartEntityBuilder builder = MultipartEntityBuilder.create();\n      builder.setMode(HttpMultipartMode.BROWSER_COMPATIBLE);\n          for (NameValuePair param : body) {            \n               builder.addTextBody(param.getName(), param.getValue(), ContentType.TEXT_PLAIN);\n          }\n    if (files != null &amp;&amp; !files.isEmpty()) {\n        for (File file : files) {\n               byte[] arr = Files.readAllBytes(Paths.get(file.getPath()));\n               builder.addBinaryBody(\n                    &quot;files&quot;,\n                    arr,\n                    ContentType.APPLICATION_OCTET_STREAM,\n                    file.getName()\n            );\n        }\n    }\n    HttpEntity entity = builder.build();\n    postRequest.setEntity(entity);\n    postRequest.addHeader(&quot;Authorization&quot;, authorization);       \n        CloseableHttpResponse response = httpClient.execute(postRequest);\n</code></pre>\n<p>below is the exception stacktrace</p>\n<pre><code>java.net.SocketException: Connection reset by peer: socket write error\nat java.net.SocketOutputStream.socketWrite0(Native Method)\nat java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:111)\nat java.net.SocketOutputStream.write(SocketOutputStream.java:155)\nat sun.security.ssl.OutputRecord.writeBuffer(OutputRecord.java:431)\nat sun.security.ssl.OutputRecord.write(OutputRecord.java:417)\nat sun.security.ssl.SSLSocketImpl.writeRecordInternal(SSLSocketImpl.java:879)\nat sun.security.ssl.SSLSocketImpl.writeRecord(SSLSocketImpl.java:850)\nat sun.security.ssl.AppOutputStream.write(AppOutputStream.java:123)\nat org.apache.http.impl.io.SessionOutputBufferImpl.streamWrite(SessionOutputBufferImpl.java:126)\nat org.apache.http.impl.io.SessionOutputBufferImpl.write(SessionOutputBufferImpl.java:162)\nat org.apache.http.impl.io.ContentLengthOutputStream.write(ContentLengthOutputStream.java:115)\nat org.apache.http.impl.io.ContentLengthOutputStream.write(ContentLengthOutputStream.java:122)\nat org.apache.http.entity.mime.content.ByteArrayBody.writeTo(ByteArrayBody.java:97)\nat org.apache.http.entity.mime.AbstractMultipartForm.doWriteTo(AbstractMultipartForm.java:134)\nat org.apache.http.entity.mime.AbstractMultipartForm.writeTo(AbstractMultipartForm.java:157)\nat org.apache.http.entity.mime.MultipartFormEntity.writeTo(MultipartFormEntity.java:113)\nat org.apache.http.impl.DefaultBHttpClientConnection.sendRequestEntity(DefaultBHttpClientConnection.java:158)\nat org.apache.http.impl.conn.CPoolProxy.sendRequestEntity(CPoolProxy.java:162)\nat org.apache.http.protocol.HttpRequestExecutor.doSendRequest(HttpRequestExecutor.java:237)\nat org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:122)\nat org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:271)\nat org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:184)\nat org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:88)\nat org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)\nat org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:184)\nat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:82)\nat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:107)\n</code></pre>\n<p>and I am using a mock(<a href=\"https://run.mocky.io/v3/d734cbfc-4d78-4654-8f0b-c00bd5912fbd\" rel=\"nofollow noreferrer\">https://run.mocky.io/v3/d734cbfc-4d78-4654-8f0b-c00bd5912fbd</a>) as an external api for development and I am trying to upload 2 files which are one pdf and one jpeg format and both are less than 200kb</p>\n"},{"tags":["java","reflection","modelmapper"],"comments":[{"owner":{"account_id":1547313,"reputation":82154,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"score":1,"creation_date":1651499152,"post_id":72087606,"comment_id":127372238,"body_markdown":"What do you mean by &quot;convert the A class primitive data types to wrapper classes&quot;? Do you want to change the types in the `class A` declaration? Or do you want to assign the values in `class A` to another variable? The first one is difficult if not impossible. The second one is trivial.","body":"What do you mean by &quot;convert the A class primitive data types to wrapper classes&quot;? Do you want to change the types in the <code>class A</code> declaration? Or do you want to assign the values in <code>class A</code> to another variable? The first one is difficult if not impossible. The second one is trivial."},{"owner":{"account_id":2991126,"reputation":420,"user_id":2538699,"accept_rate":25,"display_name":"Naveen Kumar"},"score":0,"creation_date":1651499614,"post_id":72087606,"comment_id":127372440,"body_markdown":"Hi @Code-Apprentice, I dont want to change the variable names. I want to have them as &quot;null&quot; instead of their default values which I think can be possible if we can change the data type to wrapper classes like int to Integer.","body":"Hi @Code-Apprentice, I dont want to change the variable names. I want to have them as &quot;null&quot; instead of their default values which I think can be possible if we can change the data type to wrapper classes like int to Integer."},{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1651500037,"post_id":72087606,"comment_id":127372599,"body_markdown":"I don&#39;t think you can do that. You can&#39;t treat some primitives as primitives and some as their wrapper classes.","body":"I don&#39;t think you can do that. You can&#39;t treat some primitives as primitives and some as their wrapper classes."},{"owner":{"account_id":2991126,"reputation":420,"user_id":2538699,"accept_rate":25,"display_name":"Naveen Kumar"},"score":0,"creation_date":1651500255,"post_id":72087606,"comment_id":127372685,"body_markdown":"Can we clone this A class to some other class changing its field through reflection instead of manually? Is it possible?","body":"Can we clone this A class to some other class changing its field through reflection instead of manually? Is it possible?"},{"owner":{"account_id":1547313,"reputation":82154,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"score":0,"creation_date":1651504921,"post_id":72087606,"comment_id":127374418,"body_markdown":"@NaveenKumar You could create a class B like you show and just assign values. No need to make it complicated with reflection.","body":"@NaveenKumar You could create a class B like you show and just assign values. No need to make it complicated with reflection."},{"owner":{"account_id":2991126,"reputation":420,"user_id":2538699,"accept_rate":25,"display_name":"Naveen Kumar"},"score":0,"creation_date":1651559180,"post_id":72087606,"comment_id":127386205,"body_markdown":"@Code-Apprentice, But what about maintainability like if in future there is any new field added in A class then same we have to handle in B class like we have to keep track on A class every time for any field update. Thoughts?","body":"@Code-Apprentice, But what about maintainability like if in future there is any new field added in A class then same we have to handle in B class like we have to keep track on A class every time for any field update. Thoughts?"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1651562177,"post_id":72087606,"comment_id":127386963,"body_markdown":"Thats obviously an [xy problem](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem/66378#66378). Just solve the *actual task* in a different way, without the requirement to create `B` out of `A`. If you have a question about a JSON converter, you should ask a question about that JSON converter.","body":"Thats obviously an <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem/66378#66378\">xy problem</a>. Just solve the <i>actual task</i> in a different way, without the requirement to create <code>B</code> out of <code>A</code>. If you have a question about a JSON converter, you should ask a question about that JSON converter."}],"owner":{"account_id":2991126,"reputation":420,"user_id":2538699,"accept_rate":25,"display_name":"Naveen Kumar"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":176,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1651567795,"creation_date":1651498956,"question_id":72087606,"body_markdown":"I have a class from third party jar which have primitive fields inside it.\r\nFor example:\r\n```\r\npublic class A {\r\n\r\nprivate int id;\r\n\r\nprivate int score;\r\n\r\n//Getter And Setters below\r\n}\r\n```\r\n\r\nI have another class which have all fields of A class and have more fields as well and can be partially updated.\r\nFor example\r\n```\r\npublic class B {\r\n\r\nprivate Integer id;\r\n\r\nprivate Integer score;\r\n\r\nprivate Integer age;\r\n\r\n//Getter and Setters below\r\n}\r\n```\r\nB class is in my project and can be modified. Partial update is allowed  in B class for example\r\n```\r\nB b = new B();\r\nb.setAge(32);\r\n```\r\n\r\nNow using ModelMapper class I am doing the mapping of both the classes.\r\n```\r\nA object = new ModelMapper().map(b, A.class);\r\n\r\nObjectMapper mapper = new ObjectMapper();\r\nJsonNode jsonNode = mapper.readTree(object, JsonNode.class);\r\n```\r\nAs A class have primitive data type fields hence after mapping those fields get initialized with default value.\r\n\r\n| Current Outcome | Expected Outcome |\r\n|:--------------- |:----------------:|\r\n|{&quot;id&quot; : 0, &quot;score&quot; : 0 ,&quot;age&quot; 32}| {&quot;age&quot;: 32}|\r\n\r\nIs there a way using which we can convert the A class primitive data types to wrapper classes like int to Integer so that instead of default value it get initialized with NULL value and later on can be ignore in JSON converter?\r\n\r\nOr is there any way using which we can achieve this using ModelMapper.\r\n                            \r\n\r\n\r\n\r\n","title":"How to change class primitive fields to respective wrapper fields dynamically for exclusion in JsonConverter to remove null fields?","body":"<p>I have a class from third party jar which have primitive fields inside it.\nFor example:</p>\n<pre><code>public class A {\n\nprivate int id;\n\nprivate int score;\n\n//Getter And Setters below\n}\n</code></pre>\n<p>I have another class which have all fields of A class and have more fields as well and can be partially updated.\nFor example</p>\n<pre><code>public class B {\n\nprivate Integer id;\n\nprivate Integer score;\n\nprivate Integer age;\n\n//Getter and Setters below\n}\n</code></pre>\n<p>B class is in my project and can be modified. Partial update is allowed  in B class for example</p>\n<pre><code>B b = new B();\nb.setAge(32);\n</code></pre>\n<p>Now using ModelMapper class I am doing the mapping of both the classes.</p>\n<pre><code>A object = new ModelMapper().map(b, A.class);\n\nObjectMapper mapper = new ObjectMapper();\nJsonNode jsonNode = mapper.readTree(object, JsonNode.class);\n</code></pre>\n<p>As A class have primitive data type fields hence after mapping those fields get initialized with default value.</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th style=\"text-align: left;\">Current Outcome</th>\n<th style=\"text-align: center;\">Expected Outcome</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: left;\">{&quot;id&quot; : 0, &quot;score&quot; : 0 ,&quot;age&quot; 32}</td>\n<td style=\"text-align: center;\">{&quot;age&quot;: 32}</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Is there a way using which we can convert the A class primitive data types to wrapper classes like int to Integer so that instead of default value it get initialized with NULL value and later on can be ignore in JSON converter?</p>\n<p>Or is there any way using which we can achieve this using ModelMapper.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":4,"creation_date":1651564613,"post_id":72096316,"comment_id":127387590,"body_markdown":"The set created from `Collectors.toSet()` is unsorted. I suggest you use a list.","body":"The set created from <code>Collectors.toSet()</code> is unsorted. I suggest you use a list."}],"answers":[{"tags":[],"owner":{"account_id":8055177,"reputation":2649,"user_id":6072570,"display_name":"Trishant Pahwa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1651567730,"creation_date":1651564901,"answer_id":72096393,"question_id":72096316,"body_markdown":"Each data structure has its own unique feature. A `Set` is an unordered list with no duplicate elements in it.\r\n\r\nYou need to use an `Array` or a `List` in order to keep the positions of your elements intact, such as in the case of sorting.\r\n\r\nYou can go through this [blog](https://beginnersbook.com/2014/07/difference-between-list-and-set-in-java/#:~:text=Set%20is%20an%20unordered%20collection,doesn&#39;t%20allow%20duplicate%20elements.) to understand the difference between a `Set` and a `List`.\r\n\r\nYou can also modify the last chained method `.collect(Collectors.toSet())` to `.collect(Collectors.toList())`, to acheive your desired result.","title":"Sort contact list by name using Java stream.sort()","body":"<p>Each data structure has its own unique feature. A <code>Set</code> is an unordered list with no duplicate elements in it.</p>\n<p>You need to use an <code>Array</code> or a <code>List</code> in order to keep the positions of your elements intact, such as in the case of sorting.</p>\n<p>You can go through this <a href=\"https://beginnersbook.com/2014/07/difference-between-list-and-set-in-java/#:%7E:text=Set%20is%20an%20unordered%20collection,doesn%27t%20allow%20duplicate%20elements.\" rel=\"nofollow noreferrer\">blog</a> to understand the difference between a <code>Set</code> and a <code>List</code>.</p>\n<p>You can also modify the last chained method <code>.collect(Collectors.toSet())</code> to <code>.collect(Collectors.toList())</code>, to acheive your desired result.</p>\n"}],"owner":{"account_id":25180645,"reputation":5,"user_id":19022192,"display_name":"Kalimuthu K"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"closed_date":1651565534,"accepted_answer_id":72096393,"answer_count":1,"score":-2,"last_activity_date":1651567730,"creation_date":1651564437,"question_id":72096316,"body_markdown":"In my code I want to sort the contacts by their firstname, so I wrote the below method which is not working for me. Actually this code instead of giving me a sorted contact list it is giving me a normal unordered contactlist\r\n\r\n    public Set&lt;Contact&gt; sortContacts() {\r\n        Set&lt;Contact&gt; sortedContacts = contactList.stream().sorted((c1, c2) -&gt; c1.firstName.compareTo(c2.firstName)).collect(Collectors.toSet());\r\n        return sortedContacts;\r\n    }\r\n\r\n","title":"Sort contact list by name using Java stream.sort()","body":"<p>In my code I want to sort the contacts by their firstname, so I wrote the below method which is not working for me. Actually this code instead of giving me a sorted contact list it is giving me a normal unordered contactlist</p>\n<pre><code>public Set&lt;Contact&gt; sortContacts() {\n    Set&lt;Contact&gt; sortedContacts = contactList.stream().sorted((c1, c2) -&gt; c1.firstName.compareTo(c2.firstName)).collect(Collectors.toSet());\n    return sortedContacts;\n}\n</code></pre>\n"},{"tags":["java","facebook-graph-api","javafx","webview","restfb"],"owner":{"account_id":6741955,"reputation":41,"user_id":5194911,"display_name":"Ben Simms"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":230,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1651567567,"creation_date":1490896983,"question_id":43125254,"body_markdown":"I&#39;ve been trying a number of ways to achieve a way to post to Facebook from within my JavaFX application using a WebView to manage login.\r\n\r\nI have read Facebook&#39;s documentation but continue to get lost with user_key, codes, access_code, tokens and what not.\r\n\r\nWhat I have so far is this:\r\n\r\nMy WebView loads this URL.\r\n\r\n    public static String userLogin() {\r\n        String state = UUID.randomUUID().toString();\r\n        return String.format(AUTHORIZATION_URL, CLIENT_ID, REDIRECT_URI, state);\r\n    }\r\n\r\n    \r\nUser logs in and authorises my Facebook application and I capture the response\r\n     \r\n\r\n    System.out.println(&quot;Response: &quot; + response);\r\n        if (response.contains(&quot;code=&quot;)) {\r\n            String[] finalCode = response.split(&quot;code=&quot;);\r\n            Facebook.CODE = finalCode[1];\r\n            System.out.println(&quot;Access Key:&quot; + finalCode[1]);\r\n        }\r\n    }\r\n\r\nMy webview displays the following:\r\n\r\n&gt; SECURITY WARNING: Please treat the URL above as you would your password and do not share it with anyone. See the Facebook Help Centre for more information. \r\n    \r\nI also see my code returned:\r\n`https://www.facebook.com/connect/login_success.html?code=AQA4w...`\r\n\r\nI then try to get my User Token, by directing my webView here:\r\n\r\n    public static String getUserToken() {\r\n        return String.format(ACCESS_TOKEN_URL, CLIENT_ID, REDIRECT_URI, CLIENT_SECRET, CODE);\r\n    }\r\n\r\nAt which point my webview displays the following:\r\n\r\n```\r\n{\r\n   &quot;error&quot;: {\r\n      &quot;message&quot;: &quot;Missing authorization code&quot;,\r\n      &quot;type&quot;: &quot;OAuthException&quot;,\r\n      &quot;code&quot;: 1,\r\n      &quot;fbtrace_id&quot;: &quot;D/0gXWRYkx4&quot;\r\n   }\r\n}\r\n```\r\n\r\nHow can I solve this?","title":"Using RestFB along side a JavaFX WebView, how can I post to Facebook?","body":"<p>I've been trying a number of ways to achieve a way to post to Facebook from within my JavaFX application using a WebView to manage login.</p>\n<p>I have read Facebook's documentation but continue to get lost with user_key, codes, access_code, tokens and what not.</p>\n<p>What I have so far is this:</p>\n<p>My WebView loads this URL.</p>\n<pre><code>public static String userLogin() {\n    String state = UUID.randomUUID().toString();\n    return String.format(AUTHORIZATION_URL, CLIENT_ID, REDIRECT_URI, state);\n}\n</code></pre>\n<p>User logs in and authorises my Facebook application and I capture the response</p>\n<pre><code>System.out.println(&quot;Response: &quot; + response);\n    if (response.contains(&quot;code=&quot;)) {\n        String[] finalCode = response.split(&quot;code=&quot;);\n        Facebook.CODE = finalCode[1];\n        System.out.println(&quot;Access Key:&quot; + finalCode[1]);\n    }\n}\n</code></pre>\n<p>My webview displays the following:</p>\n<blockquote>\n<p>SECURITY WARNING: Please treat the URL above as you would your password and do not share it with anyone. See the Facebook Help Centre for more information.</p>\n</blockquote>\n<p>I also see my code returned:\n<code>https://www.facebook.com/connect/login_success.html?code=AQA4w...</code></p>\n<p>I then try to get my User Token, by directing my webView here:</p>\n<pre><code>public static String getUserToken() {\n    return String.format(ACCESS_TOKEN_URL, CLIENT_ID, REDIRECT_URI, CLIENT_SECRET, CODE);\n}\n</code></pre>\n<p>At which point my webview displays the following:</p>\n<pre><code>{\n   &quot;error&quot;: {\n      &quot;message&quot;: &quot;Missing authorization code&quot;,\n      &quot;type&quot;: &quot;OAuthException&quot;,\n      &quot;code&quot;: 1,\n      &quot;fbtrace_id&quot;: &quot;D/0gXWRYkx4&quot;\n   }\n}\n</code></pre>\n<p>How can I solve this?</p>\n"},{"tags":["java","spring","spring-boot","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":5433910,"reputation":10649,"user_id":4323935,"accept_rate":69,"display_name":"dpr"},"score":0,"creation_date":1651570940,"post_id":72096872,"comment_id":127389416,"body_markdown":"By audit you mean track who has made changes to this relation? i.e. which user added/removed a product from an order?","body":"By audit you mean track who has made changes to this relation? i.e. which user added/removed a product from an order?"},{"owner":{"account_id":15567040,"reputation":71,"user_id":11230458,"display_name":"tooFastForSatan"},"score":0,"creation_date":1651571171,"post_id":72096872,"comment_id":127389484,"body_markdown":"Yes using somehow @PrePersist","body":"Yes using somehow @PrePersist"},{"owner":{"account_id":5433910,"reputation":10649,"user_id":4323935,"accept_rate":69,"display_name":"dpr"},"score":0,"creation_date":1651572752,"post_id":72096872,"comment_id":127389991,"body_markdown":"The orders entity is `@Audited` as well?","body":"The orders entity is <code>@Audited</code> as well?"},{"owner":{"account_id":15567040,"reputation":71,"user_id":11230458,"display_name":"tooFastForSatan"},"score":0,"creation_date":1651573066,"post_id":72096872,"comment_id":127390082,"body_markdown":"Yes, the question is how to audit product_oders","body":"Yes, the question is how to audit product_oders"},{"owner":{"account_id":5433910,"reputation":10649,"user_id":4323935,"accept_rate":69,"display_name":"dpr"},"score":0,"creation_date":1651673621,"post_id":72096872,"comment_id":127419372,"body_markdown":"I think you should/could model the Many-to-Many relation using a dedicated entity that is @Audited as well. Like it is done in this example to add additional attributes to the jointable https://www.codejava.net/frameworks/hibernate/hibernate-many-to-many-association-with-extra-columns-in-join-table-example","body":"I think you should/could model the Many-to-Many relation using a dedicated entity that is @Audited as well. Like it is done in this example to add additional attributes to the jointable <a href=\"https://www.codejava.net/frameworks/hibernate/hibernate-many-to-many-association-with-extra-columns-in-join-table-example\" rel=\"nofollow noreferrer\">codejava.net/frameworks/hibernate/&hellip;</a>"},{"owner":{"account_id":15567040,"reputation":71,"user_id":11230458,"display_name":"tooFastForSatan"},"score":0,"creation_date":1652012610,"post_id":72096872,"comment_id":127497979,"body_markdown":"@Dpr Thank you . I used this as part of an template changed the ManyToMany as ManyToOne with an compositeKey.","body":"@Dpr Thank you . I used this as part of an template changed the ManyToMany as ManyToOne with an compositeKey."}],"owner":{"account_id":15567040,"reputation":71,"user_id":11230458,"display_name":"tooFastForSatan"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":171,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1651567522,"creation_date":1651567522,"question_id":72096872,"body_markdown":"Lets assume \r\n\r\nEnity Order \r\n```\r\nUUID id;\r\n...\r\n\r\nLocalDateTime createdAt;\r\n\r\n@CreatedBy\r\nUUID createdBy;\r\nLocalDateTime updatedAt;\r\n\r\n@LastModyfiedBy\r\nUUID updatedBy;\r\n\r\n@PrePersist\r\nvoid onCreate() {\r\n    this.createdAt = LocalDateTime.now();\r\n}\r\n\r\n@PreUpdate\r\nvoid onUpdate() {\r\n    this.updatedAt = LocalDateTime.now();\r\n}\r\n\r\n@JsonIgnore\r\n@ManyToMany\r\n@JoinTable(name = &quot;product_orders&quot;,\r\n            joinColumns = @JoinColumn(\r\n                    name = &quot;id&quot;,\r\n                    referencedColumnName = &quot;product_id&quot;),\r\n            inverseJoinColumns = @JoinColumn(\r\n                    name = &quot;order_id&quot;,\r\n                    referencedColumnName = &quot;id&quot;)\r\n)\r\nprivate Set&lt;Oders&gt; Orders;\r\n```\r\nIs it possbile to Audit the join Column in a manyToMany relationship using spring data jpa ? \r\n\r\nIn the product_oders table I have a column &#39;createdAt&#39;and I&#39;m struggeling with finding a solution how to audit this column.","title":"ManyToMany Jpa Audtiting","body":"<p>Lets assume</p>\n<p>Enity Order</p>\n<pre><code>UUID id;\n...\n\nLocalDateTime createdAt;\n\n@CreatedBy\nUUID createdBy;\nLocalDateTime updatedAt;\n\n@LastModyfiedBy\nUUID updatedBy;\n\n@PrePersist\nvoid onCreate() {\n    this.createdAt = LocalDateTime.now();\n}\n\n@PreUpdate\nvoid onUpdate() {\n    this.updatedAt = LocalDateTime.now();\n}\n\n@JsonIgnore\n@ManyToMany\n@JoinTable(name = &quot;product_orders&quot;,\n            joinColumns = @JoinColumn(\n                    name = &quot;id&quot;,\n                    referencedColumnName = &quot;product_id&quot;),\n            inverseJoinColumns = @JoinColumn(\n                    name = &quot;order_id&quot;,\n                    referencedColumnName = &quot;id&quot;)\n)\nprivate Set&lt;Oders&gt; Orders;\n</code></pre>\n<p>Is it possbile to Audit the join Column in a manyToMany relationship using spring data jpa ?</p>\n<p>In the product_oders table I have a column 'createdAt'and I'm struggeling with finding a solution how to audit this column.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":4,"creation_date":1651564420,"post_id":72096285,"comment_id":127387532,"body_markdown":"Use a `Map&lt;Character, Integer&gt;` and call `merge(temp.charAt(i), 1, Integer::sum)`","body":"Use a <code>Map&lt;Character, Integer&gt;</code> and call <code>merge(temp.charAt(i), 1, Integer::sum)</code>"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1651576412,"post_id":72096285,"comment_id":127391118,"body_markdown":"When your file is encoded in UTF-8, you should use `new Scanner(datei, StandardCharsets.UTF_8)` to read it correctly in the first place, instead of trying to fix the strings via `replace` after reading it incorrectly. Further, you should use `try(Scanner scan = new Scanner(datei, StandardCharsets.UTF_8)) { while (scan.hasNext()) { /*  */ } } catch (FileNotFoundException e) { System.out.println(&quot;File not found.&quot;); }` to close the file correctly afterwards. See also [The try-with-resources Statement](https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)","body":"When your file is encoded in UTF-8, you should use <code>new Scanner(datei, StandardCharsets.UTF_8)</code> to read it correctly in the first place, instead of trying to fix the strings via <code>replace</code> after reading it incorrectly. Further, you should use <code>try(Scanner scan = new Scanner(datei, StandardCharsets.UTF_8)) { while (scan.hasNext()) { &#47;*  *&#47; } } catch (FileNotFoundException e) { System.out.println(&quot;File not found.&quot;); }</code> to close the file correctly afterwards. See also <a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html\" rel=\"nofollow noreferrer\">The try-with-resources Statement</a>"}],"answers":[{"tags":[],"owner":{"account_id":13469447,"reputation":588,"user_id":9718523,"display_name":"yaken"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651565448,"creation_date":1651565448,"answer_id":72096481,"question_id":72096285,"body_markdown":"You&#39;ve got the first part of the algorithm, the data processing:\r\n1. Process the data, from a text file to an ArrayList of characters, `car`.\r\n2. Count the characters in the list.\r\n\r\nYou want to associate each character to a count. A HashMap would be great for that.\r\n\r\nHere&#39;s a method for the second part, with some explanations:\r\n\r\n```java \r\n/*\r\nThis will return something that looks like:\r\n{ a: 16, b: 7, c: 24, ... }\r\n*/\r\nHashMap&lt;Character, Int&gt; getCharacterCount(ArrayList&lt;Character&gt; charList) {\r\n  // for each character we associate an int, its count.\r\n  HashMap&lt;Character, Int&gt; counter = new Hashmap&lt;&gt;();\r\n\r\n  for (Character car: charList) {\t\r\n    // if the map doesn&#39;t contain our character, we&#39;ve never seen it before.\t      \r\n    int currentCount = counter.containsKey(car) ? counter.get(car) : 0;\r\n    // increment this character&#39;s current count\r\n    counter.put(car, currentCount + 1);\r\n  }\r\n\r\n  return counter;\r\n}\r\n```","title":"How do I count every unique item in an Arraylist?","body":"<p>You've got the first part of the algorithm, the data processing:</p>\n<ol>\n<li>Process the data, from a text file to an ArrayList of characters, <code>car</code>.</li>\n<li>Count the characters in the list.</li>\n</ol>\n<p>You want to associate each character to a count. A HashMap would be great for that.</p>\n<p>Here's a method for the second part, with some explanations:</p>\n<pre class=\"lang-java prettyprint-override\"><code>/*\nThis will return something that looks like:\n{ a: 16, b: 7, c: 24, ... }\n*/\nHashMap&lt;Character, Int&gt; getCharacterCount(ArrayList&lt;Character&gt; charList) {\n  // for each character we associate an int, its count.\n  HashMap&lt;Character, Int&gt; counter = new Hashmap&lt;&gt;();\n\n  for (Character car: charList) {   \n    // if the map doesn't contain our character, we've never seen it before.          \n    int currentCount = counter.containsKey(car) ? counter.get(car) : 0;\n    // increment this character's current count\n    counter.put(car, currentCount + 1);\n  }\n\n  return counter;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5569841,"reputation":3750,"user_id":4415625,"display_name":"dani-vta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651565475,"creation_date":1651565475,"answer_id":72096487,"question_id":72096285,"body_markdown":"If you need to count the number of characters within your car list, you could use a collection stream and the aggregate operation `groupingby` in conjunction with the downstream `counting`. \r\n\r\nThis operation will yield a `Map` whose keys are the list&#39;s characters and their corresponding values their occurrences within the list.\r\n\r\n&lt;h4&gt;Sample Code&lt;/h4&gt;\r\n\r\n```\r\nList&lt;Character&gt; list = new ArrayList&lt;&gt;(List.of(&#39;a&#39;, &#39;a&#39;, &#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;b&#39;, &#39;b&#39;, &#39;b&#39;, &#39;a&#39;, &#39;c&#39;));\r\nMap&lt;Character, Long&gt; mapRes = list.stream().collect(Collectors.groupingBy(c -&gt; c, Collectors.counting()));\r\nSystem.out.println(mapRes);\r\n```\r\n\r\n&lt;h4&gt;Your Code&lt;/h4&gt;\r\n\r\n```\r\npublic class Aschenputtel {\r\n    public static void main(String args[]) {\r\n        ArrayList&lt;String&gt; txtLowCase = new ArrayList&lt;String&gt;();\r\n        ArrayList&lt;Character&gt; car = new ArrayList&lt;Character&gt;();\r\n\r\n        File datei = new File(&quot;C:/Users/Thomas/Downloads/Aschenputtel.txt&quot;);\r\n        Scanner scan = null;\r\n        try {\r\n            scan = new Scanner(datei);\r\n        } catch (FileNotFoundException e) {\r\n            System.out.println(&quot;File not found.&quot;);\r\n        }\r\n        while (scan.hasNext()) {\r\n            String temp = scan.next().replace(&quot;&#226;&quot;, &quot;&quot;).replace(&quot;&#226;&quot;, &quot;&quot;).toLowerCase();\r\n            txtLowCase.add(temp);\r\n            for (int i = 0; i &lt; temp.length(); i++) {\r\n                car.add(temp.charAt(i));\r\n            }\r\n        }\r\n\r\n        Map&lt;Character, Long&gt; mapRes = car.stream().collect(Collectors.groupingBy(c -&gt; c, Collectors.counting()));\r\n        System.out.println(mapRes);\r\n    }\r\n}\r\n```","title":"How do I count every unique item in an Arraylist?","body":"<p>If you need to count the number of characters within your car list, you could use a collection stream and the aggregate operation <code>groupingby</code> in conjunction with the downstream <code>counting</code>.</p>\n<p>This operation will yield a <code>Map</code> whose keys are the list's characters and their corresponding values their occurrences within the list.</p>\n<h4>Sample Code</h4>\n<pre><code>List&lt;Character&gt; list = new ArrayList&lt;&gt;(List.of('a', 'a', 'a', 'b', 'c', 'b', 'b', 'b', 'a', 'c'));\nMap&lt;Character, Long&gt; mapRes = list.stream().collect(Collectors.groupingBy(c -&gt; c, Collectors.counting()));\nSystem.out.println(mapRes);\n</code></pre>\n<h4>Your Code</h4>\n<pre><code>public class Aschenputtel {\n    public static void main(String args[]) {\n        ArrayList&lt;String&gt; txtLowCase = new ArrayList&lt;String&gt;();\n        ArrayList&lt;Character&gt; car = new ArrayList&lt;Character&gt;();\n\n        File datei = new File(&quot;C:/Users/Thomas/Downloads/Aschenputtel.txt&quot;);\n        Scanner scan = null;\n        try {\n            scan = new Scanner(datei);\n        } catch (FileNotFoundException e) {\n            System.out.println(&quot;File not found.&quot;);\n        }\n        while (scan.hasNext()) {\n            String temp = scan.next().replace(&quot;&quot;, &quot;&quot;).replace(&quot;&quot;, &quot;&quot;).toLowerCase();\n            txtLowCase.add(temp);\n            for (int i = 0; i &lt; temp.length(); i++) {\n                car.add(temp.charAt(i));\n            }\n        }\n\n        Map&lt;Character, Long&gt; mapRes = car.stream().collect(Collectors.groupingBy(c -&gt; c, Collectors.counting()));\n        System.out.println(mapRes);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6475519,"reputation":4496,"user_id":5014221,"accept_rate":71,"display_name":"Ashish Patil"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1651566446,"creation_date":1651566446,"answer_id":72096666,"question_id":72096285,"body_markdown":"Once you have your `character` you can do something like in your for loop :\r\n\r\n    ... \r\n    Map&lt;Character, Integer&gt; map2=new HashMap&lt;Character, Integer&gt;();\r\n         for (int i = 0; i &lt; temp.length(); i++) {\r\n    \t\tmap2.put(temp.charAt(i), map2.getOrDefault(temp.charAt(i), 0)+1);\r\n       }\r\n        System.out.println(map2);\r\n    ...","title":"How do I count every unique item in an Arraylist?","body":"<p>Once you have your <code>character</code> you can do something like in your for loop :</p>\n<pre><code>... \nMap&lt;Character, Integer&gt; map2=new HashMap&lt;Character, Integer&gt;();\n     for (int i = 0; i &lt; temp.length(); i++) {\n        map2.put(temp.charAt(i), map2.getOrDefault(temp.charAt(i), 0)+1);\n   }\n    System.out.println(map2);\n...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8055177,"reputation":2649,"user_id":6072570,"display_name":"Trishant Pahwa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651566881,"creation_date":1651566881,"answer_id":72096753,"question_id":72096285,"body_markdown":"Here is the most simplistic approach, pass on your array list to a HashSet when initializing it.\r\n\r\n\r\n\r\n    import java.io.File;\r\n    import java.io.FileNotFoundException;\r\n    import java.util.Scanner;\r\n    import java.util.ArrayList;\r\n    \r\n    public class Aschenputtel {\r\n        public static void main(String args[]) {\r\n            ArrayList &lt;String&gt; txtLowCase = new ArrayList &lt;String&gt; ();\r\n            ArrayList &lt;Character&gt; car = new ArrayList &lt;Character&gt; ();\r\n            \r\n            File datei = new File (&quot;C:/Users/Thomas/Downloads/Aschenputtel.txt&quot;);\r\n            Scanner scan = null;\r\n            try {\r\n                    scan = new Scanner (datei);\r\n            } catch (FileNotFoundException e) {\r\n                System.out.println(&quot;File not found.&quot;);\r\n            }\r\n            while (scan.hasNext()) {\r\n                String temp = scan.next().replace(&quot;&#226;&quot;, &quot;&quot;).replace(&quot;&#226;&quot;, &quot;&quot;).toLowerCase();\r\n                txtLowCase.add(temp);\r\n                for(int i = 0; i &lt; temp.length(); i++) {\r\n                    car.add(temp.charAt(i));\r\n                }\r\n            }\r\n            HashSet&lt;String&gt; hset = new HashSet&lt;String&gt;(ArrList);  // Only adds an element if it doesn&#39;t exists prior.\r\n            System.out.println(&quot;ArrayList Unique Values is : &quot; + hset);  // All the unique values.\r\n            System.out.println(&quot;ArrayList Total Coutn Of Unique Values is : &quot; + hset.size());  // Count of all unique items.\r\n        }\r\n    }","title":"How do I count every unique item in an Arraylist?","body":"<p>Here is the most simplistic approach, pass on your array list to a HashSet when initializing it.</p>\n<pre><code>import java.io.File;\nimport java.io.FileNotFoundException;\nimport java.util.Scanner;\nimport java.util.ArrayList;\n\npublic class Aschenputtel {\n    public static void main(String args[]) {\n        ArrayList &lt;String&gt; txtLowCase = new ArrayList &lt;String&gt; ();\n        ArrayList &lt;Character&gt; car = new ArrayList &lt;Character&gt; ();\n        \n        File datei = new File (&quot;C:/Users/Thomas/Downloads/Aschenputtel.txt&quot;);\n        Scanner scan = null;\n        try {\n                scan = new Scanner (datei);\n        } catch (FileNotFoundException e) {\n            System.out.println(&quot;File not found.&quot;);\n        }\n        while (scan.hasNext()) {\n            String temp = scan.next().replace(&quot;&quot;, &quot;&quot;).replace(&quot;&quot;, &quot;&quot;).toLowerCase();\n            txtLowCase.add(temp);\n            for(int i = 0; i &lt; temp.length(); i++) {\n                car.add(temp.charAt(i));\n            }\n        }\n        HashSet&lt;String&gt; hset = new HashSet&lt;String&gt;(ArrList);  // Only adds an element if it doesn't exists prior.\n        System.out.println(&quot;ArrayList Unique Values is : &quot; + hset);  // All the unique values.\n        System.out.println(&quot;ArrayList Total Coutn Of Unique Values is : &quot; + hset.size());  // Count of all unique items.\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1313746,"reputation":4358,"user_id":1261166,"accept_rate":87,"display_name":"Viktor Mellgren"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651567433,"creation_date":1651567433,"answer_id":72096851,"question_id":72096285,"body_markdown":"If you want to have more control/customizability you could also do something like this:\r\n\r\n     private static void calcCount(List&lt;Character&gt; chars) {\r\n        chars.sort(Comparator.naturalOrder());\r\n    \r\n        Character prevChar = null;\r\n        int currentCount = 0;\r\n        for (Character aChar : chars) {\r\n          if (aChar != prevChar) {\r\n            if (prevChar != null) {\r\n              System.out.print(currentCount + &quot; &quot;);\r\n              currentCount = 0;\r\n            }\r\n            System.out.print(aChar + &quot;:&quot;);\r\n            prevChar = aChar;\r\n          }\r\n          currentCount++;\r\n        }\r\n    \r\n        System.out.print(currentCount);\r\n      }","title":"How do I count every unique item in an Arraylist?","body":"<p>If you want to have more control/customizability you could also do something like this:</p>\n<pre><code> private static void calcCount(List&lt;Character&gt; chars) {\n    chars.sort(Comparator.naturalOrder());\n\n    Character prevChar = null;\n    int currentCount = 0;\n    for (Character aChar : chars) {\n      if (aChar != prevChar) {\n        if (prevChar != null) {\n          System.out.print(currentCount + &quot; &quot;);\n          currentCount = 0;\n        }\n        System.out.print(aChar + &quot;:&quot;);\n        prevChar = aChar;\n      }\n      currentCount++;\n    }\n\n    System.out.print(currentCount);\n  }\n</code></pre>\n"}],"owner":{"account_id":25180390,"reputation":23,"user_id":19021963,"display_name":"th0sf4n"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":162,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":72096666,"answer_count":5,"score":2,"last_activity_date":1651567433,"creation_date":1651564257,"question_id":72096285,"body_markdown":"I need to count every unique character in an Arraylist. I already seperated everys single character. \r\n\r\n```\r\nimport java.io.File;\r\nimport java.io.FileNotFoundException;\r\nimport java.util.Scanner;\r\nimport java.util.ArrayList;\r\n\r\npublic class Aschenputtel {\r\n\tpublic static void main(String args[]) {\r\n\t\tArrayList &lt;String&gt; txtLowCase = new ArrayList &lt;String&gt; ();\r\n\t\tArrayList &lt;Character&gt; car = new ArrayList &lt;Character&gt; ();\r\n\t\t\r\n\t\tFile datei = new File (&quot;C:/Users/Thomas/Downloads/Aschenputtel.txt&quot;);\r\n\t\tScanner scan = null;\r\n\t\ttry {\r\n\t\t\t\tscan = new Scanner (datei);\r\n\t\t} catch (FileNotFoundException e) {\r\n\t\t\tSystem.out.println(&quot;File not found.&quot;);\r\n\t\t}\r\n\t\twhile (scan.hasNext()) {\r\n\t\t\tString temp = scan.next().replace(&quot;&#226;&quot;, &quot;&quot;).replace(&quot;&#226;&quot;, &quot;&quot;).toLowerCase();\r\n\t\t\ttxtLowCase.add(temp);\r\n\t\t\tfor(int i = 0; i &lt; temp.length(); i++) {\r\n\t\t\t\tcar.add(temp.charAt(i));\r\n\t\t\t}\r\n\t\t}\r\n\t\tSystem.out.println(car);\r\n\t}\r\n}\r\n```\r\nThat is my current code.\r\ncar currently gives every single character but the result should be something like:\r\na = 16, b = 7, c = 24,....\r\nIs there a good way to do that?","title":"How do I count every unique item in an Arraylist?","body":"<p>I need to count every unique character in an Arraylist. I already seperated everys single character.</p>\n<pre><code>import java.io.File;\nimport java.io.FileNotFoundException;\nimport java.util.Scanner;\nimport java.util.ArrayList;\n\npublic class Aschenputtel {\n    public static void main(String args[]) {\n        ArrayList &lt;String&gt; txtLowCase = new ArrayList &lt;String&gt; ();\n        ArrayList &lt;Character&gt; car = new ArrayList &lt;Character&gt; ();\n        \n        File datei = new File (&quot;C:/Users/Thomas/Downloads/Aschenputtel.txt&quot;);\n        Scanner scan = null;\n        try {\n                scan = new Scanner (datei);\n        } catch (FileNotFoundException e) {\n            System.out.println(&quot;File not found.&quot;);\n        }\n        while (scan.hasNext()) {\n            String temp = scan.next().replace(&quot;&quot;, &quot;&quot;).replace(&quot;&quot;, &quot;&quot;).toLowerCase();\n            txtLowCase.add(temp);\n            for(int i = 0; i &lt; temp.length(); i++) {\n                car.add(temp.charAt(i));\n            }\n        }\n        System.out.println(car);\n    }\n}\n</code></pre>\n<p>That is my current code.\ncar currently gives every single character but the result should be something like:\na = 16, b = 7, c = 24,....\nIs there a good way to do that?</p>\n"},{"tags":["java","spring-boot","ibm-mq","spring-jms"],"comments":[{"owner":{"account_id":1535582,"reputation":7172,"user_id":1431734,"display_name":"Roger"},"score":0,"creation_date":1651355202,"post_id":72067959,"comment_id":127346437,"body_markdown":"I&#39;m confused.  What is wrong with setting the flag to false after a successful connection?","body":"I&#39;m confused.  What is wrong with setting the flag to false after a successful connection?"},{"owner":{"account_id":24439874,"reputation":35,"user_id":18363703,"display_name":"Pakalu Papito"},"score":0,"creation_date":1651428977,"post_id":72067959,"comment_id":127358193,"body_markdown":"Hi @Roger that is exactly what I want to do. But I am not sure where in the code exactly should I set it to false. How do I detect if connection has been successful and exception is over so that I can set the flag to false after that.","body":"Hi @Roger that is exactly what I want to do. But I am not sure where in the code exactly should I set it to false. How do I detect if connection has been successful and exception is over so that I can set the flag to false after that."}],"answers":[{"tags":[],"owner":{"account_id":5765894,"reputation":972,"user_id":4550871,"display_name":"Doug Grove"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651504132,"creation_date":1651504132,"answer_id":72088677,"question_id":72067959,"body_markdown":"Set the flag to `false` in your `BackOff` class.  This class is called just before the reconnect attempt.  If there is no exception, then the reconnect was successful and your flag will still be clear.","title":"How to set flag to false after exception gets over or connection is established again","body":"<p>Set the flag to <code>false</code> in your <code>BackOff</code> class.  This class is called just before the reconnect attempt.  If there is no exception, then the reconnect was successful and your flag will still be clear.</p>\n"}],"owner":{"account_id":24439874,"reputation":35,"user_id":18363703,"display_name":"Pakalu Papito"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":402,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1651567280,"creation_date":1651316835,"question_id":72067959,"body_markdown":"I am using ExceptionListener to listen to any exceptions that may happen after connecting to IBM MQ. To know when the connection is down i am setting a flag to true in OnException Method.\r\n\r\nThis is because i dont want to put messages onto the queue when the connection is down. So basically, my requirement is to not send messages to the queue whenever the queue manager is down.\r\n\r\n**I want to know how to set the flag to false after the the exception is resolved and the connection is back on**. \r\n\r\nI know this is a very silly question but i am not able to figure it out.\r\n\r\nThis is my app.java file:\r\n\r\n    public static void main( String[] args )\r\n        {\r\n            SpringApplication.run(App.class);\r\n        }\r\n        \r\n    \t@Override\r\n    \tpublic void run(String... args) throws Exception {\r\n\r\n        \tfor(int i=0;i&lt;20;i++) {\r\n        \t\tThread.sleep(3000);\r\n                System.out.println(&quot;Iteration : &quot;+i);\r\n        \t\tSystem.out.println(MQExceptionListener.flag + &quot; FLAG&quot;);\r\n        \t\t\r\n               if(!MQExceptionListener.flag) {\r\n            \t\t\tproducer.send(qName);\r\n            \t\t}else {\r\n            \t\t\tcontinue;\r\n            \t\t}\t\t\r\n            \t}   \t\t\r\n        \t} \r\nThis is my connection config file:\r\n\r\n    @Bean\r\n    \tpublic MQConnectionFactory mqQueueConnectionFactory() {\r\n    \t\t\r\n    \t    MQConnectionFactory mqQueueConnectionFactory = new MQConnectionFactory();\r\n    \t    try {\r\n    \t    \tmqQueueConnectionFactory.setTransportType(WMQConstants.WMQ_CM_CLIENT);\r\n    \t        mqQueueConnectionFactory.setBooleanProperty(WMQConstants.USER_AUTHENTICATION_MQCSP, false);\r\n    \t        mqQueueConnectionFactory.setCCSID(1208);\r\n    \t        mqQueueConnectionFactory.setChannel(channel);\r\n    \t        mqQueueConnectionFactory.setStringProperty(WMQConstants.USERID, user);\r\n    \t        mqQueueConnectionFactory.setStringProperty(WMQConstants.PASSWORD, password);\r\n    \t        mqQueueConnectionFactory.setQueueManager(queueManager);\r\n    \t        mqQueueConnectionFactory.setConnectionNameList(connName);\r\n    \t    } catch (Exception e) {\r\n    \t        e.printStackTrace();\r\n    \t        \r\n    \t    }\r\n    \t    return mqQueueConnectionFactory;\r\n    \t    \r\n    \t}\r\n       \r\n    \t@Bean\r\n    \tpublic JmsListenerContainerFactory&lt;?&gt; qm1JmsListenerContainerFactory(@Qualifier(&quot;mqQueueConnectionFactory&quot;) MQConnectionFactory mqQueueConnectionFactory, DefaultJmsListenerContainerFactoryConfigurer configurer) throws InterruptedException {\r\n    \t  DefaultJmsListenerContainerFactory factory = new DefaultJmsListenerContainerFactory();\r\n    \t  factory.setExceptionListener(new MQExceptionListener());\r\n    \t  configurer.configure(factory, mqQueueConnectionFactory);\r\n    \t  return factory;\r\n    \t}\r\n    \t\r\n    \t@Bean(&quot;jmsTemplate1&quot;)\r\n    \tpublic JmsTemplate jmsTemplate(@Qualifier(&quot;mqQueueConnectionFactory&quot;) MQConnectionFactory mqQueueConnectionFactory) {\r\n    \t\tJmsTemplate jmsTemplate1  = new JmsTemplate(mqQueueConnectionFactory);\r\n    \t\treturn jmsTemplate1;\r\n    \t}\r\n\r\nThis is my Exception Listener File:\r\n\r\n    public class MQExceptionListener implements ExceptionListener {\r\n        private static final Logger LOGGER = LoggerFactory.getLogger(MQExceptionListener.class);\r\n   \r\n        static boolean flag = false;\r\n         \r\n    \t@Override\r\n    \tpublic void onException(JMSException ex) {\r\n    \t\tflag=true;\r\n    \t\t\t\t        LOGGER.error(ex.toString());\r\n    \t\t\t\t        if (ex.getLinkedException() != null) {\r\n    \t\t\t\t            LOGGER.error(ex.getLinkedException().toString());\r\n    \t\t\t\t        }\r\n    \t}\r\n    }\r\n\r\nThis is my Output when i run my application:\r\n\r\n    Iteration : 0\r\n    false FLAG\r\n    In Listener 1\r\n    Received from qm1: Hi From Producer for QM1 with LISTENER\r\n    Iteration : 1\r\n    false FLAG\r\n    In Listener 1\r\n    Received from qm1: Hi From Producer for QM1 with LISTENER\r\n\r\nWhen i end queue manager, i get the following exception every 5 seconds in a loop with iteration value, output :\r\n\r\n    2022-04-30 16:03:46.377  WARN 21484 --- [enerContainer-1] com.mq.sslMQ.MQExceptionListener         : com.ibm.msg.client.jms.DetailedIllegalStateException: JMSWMQ0018: Failed to connect to queue manager &#39;QM5&#39; with connection mode &#39;Client&#39; and host name &#39;Client&#39;.\r\n    Check the queue manager is started and if running in client mode, check there is a listener running. Please see the linked exception for more information.\r\n    2022-04-30 16:03:46.377  WARN 21484 --- [enerContainer-1] com.mq.sslMQ.MQExceptionListener         : com.ibm.mq.MQException: JMSCMQ0001: IBM MQ call failed with compcode &#39;2&#39; (&#39;MQCC_FAILED&#39;) reason &#39;2059&#39; (&#39;MQRC_Q_MGR_NOT_AVAILABLE&#39;)       \r\n    Iteration : 2\r\n    true FLAG\r\n    Iteration : 3\r\n    true FLAG\r\n\r\nAs you can see the flag becomes true when exception occurs. but after connecting as well the flag is true only.\r\n\r\nSo after starting the queue manager I want the flag to be set to false. Can you please guide, on how to set flag to false once exception gets over?\r\n\r\nAny Help would be greatly appreciated. Thanks !","title":"How to set flag to false after exception gets over or connection is established again","body":"<p>I am using ExceptionListener to listen to any exceptions that may happen after connecting to IBM MQ. To know when the connection is down i am setting a flag to true in OnException Method.</p>\n<p>This is because i dont want to put messages onto the queue when the connection is down. So basically, my requirement is to not send messages to the queue whenever the queue manager is down.</p>\n<p><strong>I want to know how to set the flag to false after the the exception is resolved and the connection is back on</strong>.</p>\n<p>I know this is a very silly question but i am not able to figure it out.</p>\n<p>This is my app.java file:</p>\n<pre><code>public static void main( String[] args )\n    {\n        SpringApplication.run(App.class);\n    }\n    \n    @Override\n    public void run(String... args) throws Exception {\n\n        for(int i=0;i&lt;20;i++) {\n            Thread.sleep(3000);\n            System.out.println(&quot;Iteration : &quot;+i);\n            System.out.println(MQExceptionListener.flag + &quot; FLAG&quot;);\n            \n           if(!MQExceptionListener.flag) {\n                    producer.send(qName);\n                }else {\n                    continue;\n                }       \n            }           \n        } \n</code></pre>\n<p>This is my connection config file:</p>\n<pre><code>@Bean\n    public MQConnectionFactory mqQueueConnectionFactory() {\n        \n        MQConnectionFactory mqQueueConnectionFactory = new MQConnectionFactory();\n        try {\n            mqQueueConnectionFactory.setTransportType(WMQConstants.WMQ_CM_CLIENT);\n            mqQueueConnectionFactory.setBooleanProperty(WMQConstants.USER_AUTHENTICATION_MQCSP, false);\n            mqQueueConnectionFactory.setCCSID(1208);\n            mqQueueConnectionFactory.setChannel(channel);\n            mqQueueConnectionFactory.setStringProperty(WMQConstants.USERID, user);\n            mqQueueConnectionFactory.setStringProperty(WMQConstants.PASSWORD, password);\n            mqQueueConnectionFactory.setQueueManager(queueManager);\n            mqQueueConnectionFactory.setConnectionNameList(connName);\n        } catch (Exception e) {\n            e.printStackTrace();\n            \n        }\n        return mqQueueConnectionFactory;\n        \n    }\n   \n    @Bean\n    public JmsListenerContainerFactory&lt;?&gt; qm1JmsListenerContainerFactory(@Qualifier(&quot;mqQueueConnectionFactory&quot;) MQConnectionFactory mqQueueConnectionFactory, DefaultJmsListenerContainerFactoryConfigurer configurer) throws InterruptedException {\n      DefaultJmsListenerContainerFactory factory = new DefaultJmsListenerContainerFactory();\n      factory.setExceptionListener(new MQExceptionListener());\n      configurer.configure(factory, mqQueueConnectionFactory);\n      return factory;\n    }\n    \n    @Bean(&quot;jmsTemplate1&quot;)\n    public JmsTemplate jmsTemplate(@Qualifier(&quot;mqQueueConnectionFactory&quot;) MQConnectionFactory mqQueueConnectionFactory) {\n        JmsTemplate jmsTemplate1  = new JmsTemplate(mqQueueConnectionFactory);\n        return jmsTemplate1;\n    }\n</code></pre>\n<p>This is my Exception Listener File:</p>\n<pre><code>public class MQExceptionListener implements ExceptionListener {\n    private static final Logger LOGGER = LoggerFactory.getLogger(MQExceptionListener.class);\n\n    static boolean flag = false;\n     \n    @Override\n    public void onException(JMSException ex) {\n        flag=true;\n                        LOGGER.error(ex.toString());\n                        if (ex.getLinkedException() != null) {\n                            LOGGER.error(ex.getLinkedException().toString());\n                        }\n    }\n}\n</code></pre>\n<p>This is my Output when i run my application:</p>\n<pre><code>Iteration : 0\nfalse FLAG\nIn Listener 1\nReceived from qm1: Hi From Producer for QM1 with LISTENER\nIteration : 1\nfalse FLAG\nIn Listener 1\nReceived from qm1: Hi From Producer for QM1 with LISTENER\n</code></pre>\n<p>When i end queue manager, i get the following exception every 5 seconds in a loop with iteration value, output :</p>\n<pre><code>2022-04-30 16:03:46.377  WARN 21484 --- [enerContainer-1] com.mq.sslMQ.MQExceptionListener         : com.ibm.msg.client.jms.DetailedIllegalStateException: JMSWMQ0018: Failed to connect to queue manager 'QM5' with connection mode 'Client' and host name 'Client'.\nCheck the queue manager is started and if running in client mode, check there is a listener running. Please see the linked exception for more information.\n2022-04-30 16:03:46.377  WARN 21484 --- [enerContainer-1] com.mq.sslMQ.MQExceptionListener         : com.ibm.mq.MQException: JMSCMQ0001: IBM MQ call failed with compcode '2' ('MQCC_FAILED') reason '2059' ('MQRC_Q_MGR_NOT_AVAILABLE')       \nIteration : 2\ntrue FLAG\nIteration : 3\ntrue FLAG\n</code></pre>\n<p>As you can see the flag becomes true when exception occurs. but after connecting as well the flag is true only.</p>\n<p>So after starting the queue manager I want the flag to be set to false. Can you please guide, on how to set flag to false once exception gets over?</p>\n<p>Any Help would be greatly appreciated. Thanks !</p>\n"},{"tags":["java","multithreading","kotlin","threadpool","kotlin-coroutines"],"answers":[{"tags":[],"owner":{"account_id":62423,"reputation":3486,"user_id":185498,"display_name":"Manushin Igor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640734099,"creation_date":1535715617,"answer_id":52114694,"question_id":50355071,"body_markdown":"I found, that there are not simple solution to create such context.\r\n\r\nThere is open issue on githuib - https://github.com/Kotlin/kotlinx.coroutines/issues/261\r\n\r\nI think I will update this question when I find right solution.","title":"How can I create single-thread coroutine context under Common pool in Kotlin?","body":"<p>I found, that there are not simple solution to create such context.</p>\n<p>There is open issue on githuib - <a href=\"https://github.com/Kotlin/kotlinx.coroutines/issues/261\" rel=\"nofollow noreferrer\">https://github.com/Kotlin/kotlinx.coroutines/issues/261</a></p>\n<p>I think I will update this question when I find right solution.</p>\n"},{"tags":[],"owner":{"account_id":7178634,"reputation":55168,"user_id":5483526,"display_name":"Matt Timmermans"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1575427606,"creation_date":1575427170,"answer_id":59168180,"question_id":50355071,"body_markdown":"Here&#39;s a solution:\r\n\r\nWhen you say, for example `withSerialContext(Dispatchers.Default) {doWork()}`, it executes `doWork()` on a default dispatcher thread, but all of its parts will execute one at a time like they do in runBlocking{}.   Note that even though it&#39;s one thread at a time, there is no guarantee that it will be the same thread for the whole operation.\r\n\r\n\r\n    suspend fun &lt;T&gt; withSerialContext(\r\n            context: CoroutineDispatcher,\r\n            block: suspend CoroutineScope.() -&gt; T\r\n    ): T = withContext(SerialContextDispatcher(context), block)\r\n    \r\n    private class SerialContextDispatcher(private val target: CoroutineDispatcher) : CoroutineDispatcher() {\r\n    \r\n        private val q = ConcurrentLinkedQueue&lt;Runnable&gt;()\r\n        //Whoever CASes this false-&gt;true schedules execution of runproc\r\n        private val pending = AtomicBoolean(false)\r\n        //Only one of these runs at a time\r\n        private val runproc = object: Runnable {\r\n            override fun run() {\r\n                while(true) {\r\n                    val proc = q.poll();\r\n                    if (proc != null) {\r\n                        try {\r\n                            proc.run()\r\n                        }\r\n                        catch (e: Throwable) {\r\n                            target.dispatch(EmptyCoroutineContext, this)\r\n                            throw e\r\n                        }\r\n                    } else {\r\n                        pending.set(false);\r\n                        if (q.isEmpty() || !pending.compareAndSet(false, true)) {\r\n                            return\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    \r\n        override fun dispatch(context: CoroutineContext, block: Runnable) {\r\n            q.add(block)\r\n            if (pending.compareAndSet(false, true)) {\r\n                target.dispatch(EmptyCoroutineContext, runproc)\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n","title":"How can I create single-thread coroutine context under Common pool in Kotlin?","body":"<p>Here's a solution:</p>\n\n<p>When you say, for example <code>withSerialContext(Dispatchers.Default) {doWork()}</code>, it executes <code>doWork()</code> on a default dispatcher thread, but all of its parts will execute one at a time like they do in runBlocking{}.   Note that even though it's one thread at a time, there is no guarantee that it will be the same thread for the whole operation.</p>\n\n<pre><code>suspend fun &lt;T&gt; withSerialContext(\n        context: CoroutineDispatcher,\n        block: suspend CoroutineScope.() -&gt; T\n): T = withContext(SerialContextDispatcher(context), block)\n\nprivate class SerialContextDispatcher(private val target: CoroutineDispatcher) : CoroutineDispatcher() {\n\n    private val q = ConcurrentLinkedQueue&lt;Runnable&gt;()\n    //Whoever CASes this false-&gt;true schedules execution of runproc\n    private val pending = AtomicBoolean(false)\n    //Only one of these runs at a time\n    private val runproc = object: Runnable {\n        override fun run() {\n            while(true) {\n                val proc = q.poll();\n                if (proc != null) {\n                    try {\n                        proc.run()\n                    }\n                    catch (e: Throwable) {\n                        target.dispatch(EmptyCoroutineContext, this)\n                        throw e\n                    }\n                } else {\n                    pending.set(false);\n                    if (q.isEmpty() || !pending.compareAndSet(false, true)) {\n                        return\n                    }\n                }\n            }\n        }\n    }\n\n    override fun dispatch(context: CoroutineContext, block: Runnable) {\n        q.add(block)\n        if (pending.compareAndSet(false, true)) {\n            target.dispatch(EmptyCoroutineContext, runproc)\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1919838,"reputation":28264,"user_id":1731626,"display_name":"Sergio"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1640639007,"creation_date":1640637791,"answer_id":70500240,"question_id":50355071,"body_markdown":"Starting from the [`1.6.0`][1] version of the `kotlinx.coroutines` library we can use [`limitedParallelism`][2] function on the [`CoroutineDispatcher`][3] object, which lets you limit parallelism without creating additional thread pools and provides a unified way to create dispatchers for unbound parallelism. \r\n\r\nExample of usage:\r\n\r\n    class UserRepository {\r\n        private val dbDispatcher = Dispatchers.IO.limitedParallelism(1)\r\n\r\n        suspend fun getUserById(userId: Int): User? = withContext(dbDispatcher) {\r\n            executeQuery(&quot;SELECT * FROM users WHERE id = $1&quot;, userId).singleOrNull()\r\n       }\r\n    }\r\n\r\n`limitedParallelism(1)` guarantees the parallelism restriction - at most 1 coroutine can be executed concurrently in this dispatcher.\r\n\r\nIt should solve the problem: \r\n\r\n&gt; Maximum one task can be executed at the same time.\r\n\r\n\r\n  [1]: https://blog.jetbrains.com/kotlin/2021/12/introducing-kotlinx-coroutines-1-6-0/#dispatcher-views-api\r\n  [2]: https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/-coroutine-dispatcher/limited-parallelism.html?query=open%20fun%20limitedParallelism(parallelism:%20Int):%20CoroutineDispatcher\r\n  [3]: https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/-coroutine-dispatcher/index.html","title":"How can I create single-thread coroutine context under Common pool in Kotlin?","body":"<p>Starting from the <a href=\"https://blog.jetbrains.com/kotlin/2021/12/introducing-kotlinx-coroutines-1-6-0/#dispatcher-views-api\" rel=\"noreferrer\"><code>1.6.0</code></a> version of the <code>kotlinx.coroutines</code> library we can use <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/-coroutine-dispatcher/limited-parallelism.html?query=open%20fun%20limitedParallelism(parallelism:%20Int):%20CoroutineDispatcher\" rel=\"noreferrer\"><code>limitedParallelism</code></a> function on the <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/-coroutine-dispatcher/index.html\" rel=\"noreferrer\"><code>CoroutineDispatcher</code></a> object, which lets you limit parallelism without creating additional thread pools and provides a unified way to create dispatchers for unbound parallelism.</p>\n<p>Example of usage:</p>\n<pre><code>class UserRepository {\n    private val dbDispatcher = Dispatchers.IO.limitedParallelism(1)\n\n    suspend fun getUserById(userId: Int): User? = withContext(dbDispatcher) {\n        executeQuery(&quot;SELECT * FROM users WHERE id = $1&quot;, userId).singleOrNull()\n   }\n}\n</code></pre>\n<p><code>limitedParallelism(1)</code> guarantees the parallelism restriction - at most 1 coroutine can be executed concurrently in this dispatcher.</p>\n<p>It should solve the problem:</p>\n<blockquote>\n<p>Maximum one task can be executed at the same time.</p>\n</blockquote>\n"}],"owner":{"account_id":62423,"reputation":3486,"user_id":185498,"display_name":"Manushin Igor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3351,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":70500240,"answer_count":3,"score":2,"last_activity_date":1651566493,"creation_date":1526401529,"question_id":50355071,"body_markdown":"Short requirement: have ability to create corotine context, which will executed in the single thread only (e.g. without parallelism).\r\n\r\nAdditional requirement: it is better to use existing CommonPool (e.g. Thread Pool) for these tasks\r\n\r\nActually kotlin coroutines have method ```newSingleThreadContext``` which will create separate thread and schedule all tasks into it. However, this is dedicated thread, so ~1000 such contexts will require a lot of resources.\r\n\r\nTherefore, I&#39;d like to have context with the following characteristics:\r\n\r\n* Maximum one task can be executed at the same time\r\n* This context should reuse any other (e.g. parent context). E.g context should hold no additional threads\r\n\r\n","title":"How can I create single-thread coroutine context under Common pool in Kotlin?","body":"<p>Short requirement: have ability to create corotine context, which will executed in the single thread only (e.g. without parallelism).</p>\n\n<p>Additional requirement: it is better to use existing CommonPool (e.g. Thread Pool) for these tasks</p>\n\n<p>Actually kotlin coroutines have method <code>newSingleThreadContext</code> which will create separate thread and schedule all tasks into it. However, this is dedicated thread, so ~1000 such contexts will require a lot of resources.</p>\n\n<p>Therefore, I'd like to have context with the following characteristics:</p>\n\n<ul>\n<li>Maximum one task can be executed at the same time</li>\n<li>This context should reuse any other (e.g. parent context). E.g context should hold no additional threads</li>\n</ul>\n"},{"tags":["java","jasper-reports","jfreechart"],"comments":[{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1651515968,"post_id":72086174,"comment_id":127378345,"body_markdown":"Have you looked at `SymbolAxis`, seen [here](https://stackoverflow.com/search?tab=votes&amp;q=%5bjfreechart%5d%20SymbolAxis)?","body":"Have you looked at <code>SymbolAxis</code>, seen <a href=\"https://stackoverflow.com/search?tab=votes&amp;q=%5bjfreechart%5d%20SymbolAxis\">here</a>?"},{"owner":{"account_id":25172475,"reputation":21,"user_id":19015124,"display_name":"Alumbo"},"score":0,"creation_date":1651564407,"post_id":72086174,"comment_id":127387528,"body_markdown":"Hi, thanks for your response. My problem is that the Timeline Axis does not show, I want a second Domain Axis.","body":"Hi, thanks for your response. My problem is that the Timeline Axis does not show, I want a second Domain Axis."},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1651580343,"post_id":72086174,"comment_id":127392489,"body_markdown":"Can you verify your `mapDatasetToDomainAxis` parameters, for [example](https://stackoverflow.com/q/15025434/230513)?","body":"Can you verify your <code>mapDatasetToDomainAxis</code> parameters, for <a href=\"https://stackoverflow.com/q/15025434/230513\">example</a>?"},{"owner":{"account_id":25172475,"reputation":21,"user_id":19015124,"display_name":"Alumbo"},"score":0,"creation_date":1651846153,"post_id":72086174,"comment_id":127468049,"body_markdown":"Actually it works! I do have the timeline axis. In fact I&#39;m using a multiAxis chart with multiple chartCustomizers so I had to replicate this sprint axis to all of them. Now I need to add a labels to my axis to finish the timeline.","body":"Actually it works! I do have the timeline axis. In fact I&#39;m using a multiAxis chart with multiple chartCustomizers so I had to replicate this sprint axis to all of them. Now I need to add a labels to my axis to finish the timeline."},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1651862133,"post_id":72086174,"comment_id":127473840,"body_markdown":"You can [answer your own question](http://meta.stackoverflow.com/q/17463/163188) going forward.","body":"You can <a href=\"http://meta.stackoverflow.com/q/17463/163188\">answer your own question</a> going forward."},{"owner":{"account_id":25172475,"reputation":21,"user_id":19015124,"display_name":"Alumbo"},"score":0,"creation_date":1652187364,"post_id":72086174,"comment_id":127541519,"body_markdown":"I have one problem left. It is not possible to use a SymbolAxis with a category plot.","body":"I have one problem left. It is not possible to use a SymbolAxis with a category plot."},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1652196154,"post_id":72086174,"comment_id":127545486,"body_markdown":"Maybe a `CategoryMarker`?","body":"Maybe a <code>CategoryMarker</code>?"}],"owner":{"account_id":25172475,"reputation":21,"user_id":19015124,"display_name":"Alumbo"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":157,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1651566462,"creation_date":1651491830,"question_id":72086174,"body_markdown":"I&#39;m struggling with the dual X-axis chart with jfree chart. After a few trials with a chart customizer it still doesn&#39;t work. I would like to have events based labels on the axis that are in my datasource. The problem is the second x-axis does not show.\r\nHere is my code:\r\n\r\n    public class BurnupTimelineChartCustomizer extends JRAbstractChartCustomizer {\r\n\tprivate static final String Y_AXIS_MAX_VALUE = &quot;yaxisMaxValue&quot;;\r\n\r\n\tprivate static final String EXPECTED_TOTAL_SCOPE = &quot;expectedTotalScope&quot;;\r\n\t@Override\r\n\tpublic void customize(JFreeChart chart, JRChart jasperChart) {\r\n\r\n\t\tDouble yaxisMaxValue = (Double) this.getParameterValue(Y_AXIS_MAX_VALUE);\r\n\t\tDouble expectedTotalScope = (Double) this.getParameterValue(EXPECTED_TOTAL_SCOPE);\r\n\t\tCategoryPlot plot = chart.getCategoryPlot();\r\n\r\n\t\t// Value Marker\r\n\t\tValueMarker marker = new ValueMarker(Math.max(yaxisMaxValue,expectedTotalScope));\r\n\t\tmarker.setPaint(Color.black);\r\n\t\tplot.addRangeMarker(marker);\r\n\t\t// Dual Axis\r\n\t\tCategoryAxis sprintAxis = new CategoryAxis(&quot;TimeLine Axis&quot;);\r\n\t\tplot.setDomainAxis(1, sprintAxis );\r\n\t\tplot.mapDatasetToDomainAxis(1, 1);\t\t// Range Axis\r\n\r\n\t\tValueAxis rangeAxis = plot.getRangeAxis();\r\n\t\trangeAxis.setUpperBound(Math.max(expectedTotalScope, yaxisMaxValue) +100);\r\n\t\trangeAxis.setLowerBound(0.);\r\n\t\trangeAxis.setVisible(false);\r\n\r\n\t\t// Dashed line\r\n\t\tLineAndShapeRenderer lineAndShapeRenderer = new LineAndShapeRenderer(true, true);\r\n\t\tlineAndShapeRenderer.setSeriesPaint(0,Color.black);\r\n\t\tlineAndShapeRenderer.setBaseItemLabelsVisible(Boolean.TRUE);\r\n\t\tlineAndShapeRenderer.setBaseItemLabelGenerator(new StandardCategoryItemLabelGenerator());\r\n\r\n\t\tplot.setRenderer(lineAndShapeRenderer);\r\n\t}}\r\n\r\n\r\n\t","title":"How to create a dual X-axis chart with jfreeChart? Timeline with sprint names","body":"<p>I'm struggling with the dual X-axis chart with jfree chart. After a few trials with a chart customizer it still doesn't work. I would like to have events based labels on the axis that are in my datasource. The problem is the second x-axis does not show.\nHere is my code:</p>\n<pre><code>public class BurnupTimelineChartCustomizer extends JRAbstractChartCustomizer {\nprivate static final String Y_AXIS_MAX_VALUE = &quot;yaxisMaxValue&quot;;\n\nprivate static final String EXPECTED_TOTAL_SCOPE = &quot;expectedTotalScope&quot;;\n@Override\npublic void customize(JFreeChart chart, JRChart jasperChart) {\n\n    Double yaxisMaxValue = (Double) this.getParameterValue(Y_AXIS_MAX_VALUE);\n    Double expectedTotalScope = (Double) this.getParameterValue(EXPECTED_TOTAL_SCOPE);\n    CategoryPlot plot = chart.getCategoryPlot();\n\n    // Value Marker\n    ValueMarker marker = new ValueMarker(Math.max(yaxisMaxValue,expectedTotalScope));\n    marker.setPaint(Color.black);\n    plot.addRangeMarker(marker);\n    // Dual Axis\n    CategoryAxis sprintAxis = new CategoryAxis(&quot;TimeLine Axis&quot;);\n    plot.setDomainAxis(1, sprintAxis );\n    plot.mapDatasetToDomainAxis(1, 1);      // Range Axis\n\n    ValueAxis rangeAxis = plot.getRangeAxis();\n    rangeAxis.setUpperBound(Math.max(expectedTotalScope, yaxisMaxValue) +100);\n    rangeAxis.setLowerBound(0.);\n    rangeAxis.setVisible(false);\n\n    // Dashed line\n    LineAndShapeRenderer lineAndShapeRenderer = new LineAndShapeRenderer(true, true);\n    lineAndShapeRenderer.setSeriesPaint(0,Color.black);\n    lineAndShapeRenderer.setBaseItemLabelsVisible(Boolean.TRUE);\n    lineAndShapeRenderer.setBaseItemLabelGenerator(new StandardCategoryItemLabelGenerator());\n\n    plot.setRenderer(lineAndShapeRenderer);\n}}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","junit","jasypt"],"comments":[{"owner":{"account_id":421432,"reputation":550,"user_id":1701261,"display_name":"Dhiraj"},"score":0,"creation_date":1600823217,"post_id":64019162,"comment_id":113207536,"body_markdown":"Haven&#39;t used jasypt, but looks like you need to activate jasypt beans in your application. Although this [jasypt+spring2](http://www.jasypt.org/spring2.html) is about Spring 2, you might find some useful information on how to activate those in your application.","body":"Haven&#39;t used jasypt, but looks like you need to activate jasypt beans in your application. Although this <a href=\"http://www.jasypt.org/spring2.html\" rel=\"nofollow noreferrer\">jasypt+spring2</a> is about Spring 2, you might find some useful information on how to activate those in your application."},{"owner":{"account_id":6683527,"reputation":1411,"user_id":5155759,"accept_rate":85,"display_name":"navy1978"},"score":0,"creation_date":1661512992,"post_id":64019162,"comment_id":129795669,"body_markdown":"Have you found a solution for that? I have the same problem","body":"Have you found a solution for that? I have the same problem"}],"answers":[{"tags":[],"owner":{"account_id":10915140,"reputation":41,"user_id":8023194,"display_name":"cldaly"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1600830088,"creation_date":1600830088,"answer_id":64020439,"question_id":64019162,"body_markdown":"Solved this. I needed to annotate my application&#39;s test class with @SpringBootTest. Once I did that, the password became decrypted. Not 100% sure how or why, but I believe that the SpringBootTest annotation was needed to connect Jasypt to the Spring Boot environment during the running of the tests.","title":"Jasypt not decrypting properties during junit testing, but works fine when spring boot app runs","body":"<p>Solved this. I needed to annotate my application's test class with @SpringBootTest. Once I did that, the password became decrypted. Not 100% sure how or why, but I believe that the SpringBootTest annotation was needed to connect Jasypt to the Spring Boot environment during the running of the tests.</p>\n"},{"tags":[],"owner":{"account_id":21506556,"reputation":31,"user_id":15849855,"display_name":"Shino"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1620286898,"creation_date":1620282152,"answer_id":67412850,"question_id":64019162,"body_markdown":"I had the same issue, I annotated the Test class with `@Import(EnableEncryptablePropertiesConfiguration.class)`.\r\n\r\nYes it was working fine with `@SpringBootTest`, but it was taking so much time to load the entire application.","title":"Jasypt not decrypting properties during junit testing, but works fine when spring boot app runs","body":"<p>I had the same issue, I annotated the Test class with <code>@Import(EnableEncryptablePropertiesConfiguration.class)</code>.</p>\n<p>Yes it was working fine with <code>@SpringBootTest</code>, but it was taking so much time to load the entire application.</p>\n"},{"tags":[],"owner":{"account_id":6375285,"reputation":35,"user_id":4946450,"display_name":"Leuchtfeuer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651566377,"creation_date":1651566377,"answer_id":72096652,"question_id":64019162,"body_markdown":"I had a similar Problem with @SpringBootTest annotated tests.\r\nWhen the application starts by the test, it tries to decrypt the passwords from the properties-files.\r\nSince I dont want to either put the secret into a application-test.properties file or run the tests everytime with the secret by hand, the application Context couldnt be loaded and the tests failed. But I found the following workaround.\r\n\r\n    jasypt.encryptor.property.prefix=[[[[[\r\n    jasypt.encryptor.property.suffix=]]]]]\r\n\r\nI put those into my application-test.properties.\r\nThis way jasypt doesn&#39;t see my passwords in the properties as encrypted, since i overwrite the standard ENC( prefix and ) suffix.\r\nNow all my tests run. And since I don&#39;t need the decrypted passwords in my tests, all works out.\r\n\r\nIt doesn&#39;t matter, what you enter as prefix or suffix, it just mustn&#39;t be likely to be the start of a propertie in your files, so jasypt tries to decrypt something else.","title":"Jasypt not decrypting properties during junit testing, but works fine when spring boot app runs","body":"<p>I had a similar Problem with @SpringBootTest annotated tests.\nWhen the application starts by the test, it tries to decrypt the passwords from the properties-files.\nSince I dont want to either put the secret into a application-test.properties file or run the tests everytime with the secret by hand, the application Context couldnt be loaded and the tests failed. But I found the following workaround.</p>\n<pre><code>jasypt.encryptor.property.prefix=[[[[[\njasypt.encryptor.property.suffix=]]]]]\n</code></pre>\n<p>I put those into my application-test.properties.\nThis way jasypt doesn't see my passwords in the properties as encrypted, since i overwrite the standard ENC( prefix and ) suffix.\nNow all my tests run. And since I don't need the decrypted passwords in my tests, all works out.</p>\n<p>It doesn't matter, what you enter as prefix or suffix, it just mustn't be likely to be the start of a propertie in your files, so jasypt tries to decrypt something else.</p>\n"}],"owner":{"account_id":10915140,"reputation":41,"user_id":8023194,"display_name":"cldaly"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4307,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":3,"score":4,"last_activity_date":1651566377,"creation_date":1600818997,"question_id":64019162,"body_markdown":"I have a Spring Boot application with a few properties encrypted with Jasypt, and I provide the secret key with the following VM option: `-Djasypt.encryptor.password=secretkey`\r\n\r\nEverything is working perfectly when I run my application locally and in production. The issue is, I&#39;m not sure what I need to do to decrypt the properties I have encrypted in my application-test.properties file I am using during jUnit tests. I&#39;m even passing the same VM option above to my jUnit test.\r\n\r\nI&#39;m not receiving any sort of exception during jUnit testing that is telling me why I&#39;m unable to decrypt, but the properties I need decrypted just simply are not being decrypted. Is this even possible or is there some sort of configuration I can setup my tests with to utilize Jasypt decrypting.\r\n\r\nI&#39;ll include the code I have below. The test I am running in particular is for a JavaMailService method. I have the password encrypted in application-test.properties, and the test fails because it cannot authenticate the user (because password is still encrypted)\r\n\r\napplication-test.properties:\r\n```\r\nspring.mail.password=ENC(1NrovUC7+YAzVNhbbpHkRi9TghEPys0aQk1nXonk354=)\r\n```\r\n\r\nMain Test Class:\r\n```\r\n@RunWith(SpringRunner.class)\r\n@WebMvcTest(value = { ApiController.class, RestController.class })\r\n@ContextConfiguration(classes = { MyApplication.class, EmailService.class, EmailServiceTestConfig.class })\r\n@ActiveProfiles(&quot;test&quot;)\r\nclass MyApplicationTests {\r\n\r\n\t@Autowired\r\n\tprivate MockMvc mockMvc;\r\n\r\n\t@Test\r\n\tpublic void testSendEmail() throws Exception {\r\n\t\t...\r\n\t}\r\n\r\n}\r\n```\r\n\r\nEmailServiceTestConfig Class:\r\n```\r\n@SpringBootConfiguration\r\npublic class EmailServiceTestConfig {\r\n\r\n    @Value(&quot;${spring.mail.username}&quot;)\r\n    private String username;\r\n\r\n    @Value(&quot;${spring.mail.password}&quot;)\r\n    private String password;\r\n\r\n    @Bean\r\n    public JavaMailSender javaMailService() {\r\n        ...\r\n    }\r\n\r\n    private Properties getMailProperties() {\r\n        ...\r\n    }\r\n}\r\n```\r\n\r\nI left out some unimportant information, however from this EmailServiceTestConfig class, I&#39;ve checked the password retrieved from the properties file, and It has not been decrypted. Any ideas, please let me know! If I find a solution, I&#39;ll post here as well. Any additional information you might need, please let me know!","title":"Jasypt not decrypting properties during junit testing, but works fine when spring boot app runs","body":"<p>I have a Spring Boot application with a few properties encrypted with Jasypt, and I provide the secret key with the following VM option: <code>-Djasypt.encryptor.password=secretkey</code></p>\n<p>Everything is working perfectly when I run my application locally and in production. The issue is, I'm not sure what I need to do to decrypt the properties I have encrypted in my application-test.properties file I am using during jUnit tests. I'm even passing the same VM option above to my jUnit test.</p>\n<p>I'm not receiving any sort of exception during jUnit testing that is telling me why I'm unable to decrypt, but the properties I need decrypted just simply are not being decrypted. Is this even possible or is there some sort of configuration I can setup my tests with to utilize Jasypt decrypting.</p>\n<p>I'll include the code I have below. The test I am running in particular is for a JavaMailService method. I have the password encrypted in application-test.properties, and the test fails because it cannot authenticate the user (because password is still encrypted)</p>\n<p>application-test.properties:</p>\n<pre><code>spring.mail.password=ENC(1NrovUC7+YAzVNhbbpHkRi9TghEPys0aQk1nXonk354=)\n</code></pre>\n<p>Main Test Class:</p>\n<pre><code>@RunWith(SpringRunner.class)\n@WebMvcTest(value = { ApiController.class, RestController.class })\n@ContextConfiguration(classes = { MyApplication.class, EmailService.class, EmailServiceTestConfig.class })\n@ActiveProfiles(&quot;test&quot;)\nclass MyApplicationTests {\n\n    @Autowired\n    private MockMvc mockMvc;\n\n    @Test\n    public void testSendEmail() throws Exception {\n        ...\n    }\n\n}\n</code></pre>\n<p>EmailServiceTestConfig Class:</p>\n<pre><code>@SpringBootConfiguration\npublic class EmailServiceTestConfig {\n\n    @Value(&quot;${spring.mail.username}&quot;)\n    private String username;\n\n    @Value(&quot;${spring.mail.password}&quot;)\n    private String password;\n\n    @Bean\n    public JavaMailSender javaMailService() {\n        ...\n    }\n\n    private Properties getMailProperties() {\n        ...\n    }\n}\n</code></pre>\n<p>I left out some unimportant information, however from this EmailServiceTestConfig class, I've checked the password retrieved from the properties file, and It has not been decrypted. Any ideas, please let me know! If I find a solution, I'll post here as well. Any additional information you might need, please let me know!</p>\n"},{"tags":["java","spring-boot","azure-blob-storage"],"comments":[{"owner":{"account_id":19635311,"reputation":1574,"user_id":14372685,"display_name":"tbjorch"},"score":0,"creation_date":1651505456,"post_id":72087187,"comment_id":127374656,"body_markdown":"Have you added the relevant maven/gradle dependency to the project?","body":"Have you added the relevant maven/gradle dependency to the project?"},{"owner":{"account_id":17305621,"reputation":1541,"user_id":12898748,"display_name":"Yago Biermann"},"score":0,"creation_date":1651555376,"post_id":72087187,"comment_id":127385498,"body_markdown":"Welcome to stackoverflow! please, instead of including your code as image, include it with the **code sample** tool from the text editor and provide enough code to reproduce a minimal example of your problem, take a look at [how to ask](https://stackoverflow.com/help/how-to-ask) and [how to create a Minimal, Reproducible Example](https://stackoverflow.com/help/minimal-reproducible-example) as well.","body":"Welcome to stackoverflow! please, instead of including your code as image, include it with the <b>code sample</b> tool from the text editor and provide enough code to reproduce a minimal example of your problem, take a look at <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask</a> and <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">how to create a Minimal, Reproducible Example</a> as well."},{"owner":{"account_id":19907447,"reputation":1,"user_id":14586169,"display_name":"Antonio"},"score":0,"creation_date":1651595835,"post_id":72087187,"comment_id":127398756,"body_markdown":"yes, i entered.","body":"yes, i entered."}],"owner":{"account_id":19907447,"reputation":1,"user_id":14586169,"display_name":"Antonio"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1651566314,"creation_date":1651496856,"question_id":72087187,"body_markdown":"I&#39;m following a tutorial to upload files to Azure Storage Blob using Spring Boot. At some point in the code, when I try to use the `ContainerURL` it turns red and I can&#39;t import it into the project. Does anyone know why?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/BkVPa.png","title":"ContainerURL not works in SpringBoot","body":"<p>I'm following a tutorial to upload files to Azure Storage Blob using Spring Boot. At some point in the code, when I try to use the <code>ContainerURL</code> it turns red and I can't import it into the project. Does anyone know why?</p>\n<p><a href=\"https://i.stack.imgur.com/BkVPa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BkVPa.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","junit4"],"comments":[{"owner":{"account_id":6475519,"reputation":4496,"user_id":5014221,"accept_rate":71,"display_name":"Ashish Patil"},"score":0,"creation_date":1651571869,"post_id":72096623,"comment_id":127389703,"body_markdown":"Do you mean `C:\\\\usr\\` to be replaced with new folder?","body":"Do you mean `C:\\\\usr` to be replaced with new folder?"},{"owner":{"account_id":16600082,"reputation":1,"user_id":11996010,"display_name":"hanene"},"score":0,"creation_date":1651572866,"post_id":72096623,"comment_id":127390021,"body_markdown":"I don&#39;t want the &#39; junit991415299992369999 folder&#39; to generate","body":"I don&#39;t want the &#39; junit991415299992369999 folder&#39; to generate"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1651574872,"post_id":72096623,"comment_id":127390633,"body_markdown":"The purpose of a temporary file or directory is not to clash with existing files or directories. Think of what would happen if two processes run this unit test at the same time. Why do you want a behavior that contradicts the main purpose of the feature?","body":"The purpose of a temporary file or directory is not to clash with existing files or directories. Think of what would happen if two processes run this unit test at the same time. Why do you want a behavior that contradicts the main purpose of the feature?"},{"owner":{"account_id":16600082,"reputation":1,"user_id":11996010,"display_name":"hanene"},"score":0,"creation_date":1651579682,"post_id":72096623,"comment_id":127392210,"body_markdown":"I had this problem: folder path &#39;/usr/&#39; is not a relative path","body":"I had this problem: folder path &#39;/usr/&#39; is not a relative path"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":0,"creation_date":1651666381,"post_id":72096623,"comment_id":127416283,"body_markdown":"So your actual problem is not even remotely connected to what you have posted so far? How about posting the code that produces the error, together with a description of the error? Recommended read: [What is the XY problem?](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem/66378#66378)","body":"So your actual problem is not even remotely connected to what you have posted so far? How about posting the code that produces the error, together with a description of the error? Recommended read: <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem/66378#66378\">What is the XY problem?</a>"}],"owner":{"account_id":16600082,"reputation":1,"user_id":11996010,"display_name":"hanene"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":130,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1651566241,"creation_date":1651566241,"question_id":72096623,"body_markdown":"I&#39;m using JUnit&#39;s TemporaryFolder class rule to create a temporary folder during JUnit run.\r\n\r\n    @Rule\r\n    public final TemporaryFolder folder = new TemporaryFolder(\r\n            new File(&quot;C:\\\\usr&quot;)\r\n    );\r\n    \r\nThe new folder gets created at the path like below\r\n\r\n    C:\\usr\\junit991415299992369999\r\nI&#39;m looking for new folder to be created at the root, for example:\r\n\r\n    C:\\usr\\\r\n\r\nThanks!\r\n\r\n","title":"How to set the location of junit TemporaryFolder to an environment variable java","body":"<p>I'm using JUnit's TemporaryFolder class rule to create a temporary folder during JUnit run.</p>\n<pre><code>@Rule\npublic final TemporaryFolder folder = new TemporaryFolder(\n        new File(&quot;C:\\\\usr&quot;)\n);\n</code></pre>\n<p>The new folder gets created at the path like below</p>\n<pre><code>C:\\usr\\junit991415299992369999\n</code></pre>\n<p>I'm looking for new folder to be created at the root, for example:</p>\n<pre><code>C:\\usr\\\n</code></pre>\n<p>Thanks!</p>\n"},{"tags":["java","string","search"],"comments":[{"owner":{"account_id":229412,"reputation":45082,"user_id":492364,"accept_rate":82,"display_name":"thejh"},"score":0,"creation_date":1292100514,"post_id":4418860,"comment_id":4820752,"body_markdown":"Do the strings have the same lenght? Would padding all to the length of the longest one be a problem?","body":"Do the strings have the same lenght? Would padding all to the length of the longest one be a problem?"},{"owner":{"account_id":48948,"reputation":35452,"user_id":145574,"accept_rate":90,"display_name":"pstanton"},"score":0,"creation_date":1292100897,"post_id":4418860,"comment_id":4820788,"body_markdown":"what is the structure/architecture of the source of the strings? is it a 40gb line separated text file? is this for spam production? ;)","body":"what is the structure/architecture of the source of the strings? is it a 40gb line separated text file? is this for spam production? ;)"},{"owner":{"account_id":29751,"reputation":7797,"user_id":80617,"accept_rate":88,"display_name":"ghempton"},"score":1,"creation_date":1292101439,"post_id":4418860,"comment_id":4820844,"body_markdown":"It&#39;s only 40 mb not gb and they are individual terms. It&#39;s basically just for a super fast existence check for a term (&lt; 40 chars). I could even use sql or lucene for this, but since the data is going to be static I assume I could do way better.","body":"It&#39;s only 40 mb not gb and they are individual terms. It&#39;s basically just for a super fast existence check for a term (&lt; 40 chars). I could even use sql or lucene for this, but since the data is going to be static I assume I could do way better."},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":1,"creation_date":1292104953,"post_id":4418860,"comment_id":4821207,"body_markdown":"If you want ultra-fast I suggest you get more than 40 MB of free memory. Are you developing for a phone? You are willing to use SQL but not load the data into memory??  I would have said the later was simpler.","body":"If you want ultra-fast I suggest you get more than 40 MB of free memory. Are you developing for a phone? You are willing to use SQL but not load the data into memory??  I would have said the later was simpler."}],"answers":[{"tags":[],"owner":{"account_id":31682,"reputation":22471,"user_id":87197,"accept_rate":81,"display_name":"Chris Dennett"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1651566027,"creation_date":1292100805,"answer_id":4418895,"question_id":4418860,"body_markdown":"It looks like you need something like this: http://en.wikipedia.org/wiki/Trie\r\n\r\nAn implementation in Java can be found [here][1], although it isn&#39;t disk-based. I&#39;ll keep searching :/\r\n\r\nUseful papers: [Trie methods for text and spatial data on secondary storage][2], [B-tries for disk-based string management][3]\r\n\r\nEdit: I came across this might might be useful: [MG4J: Managing Gigabytes for Java][4]\r\n\r\n\r\n  [1]: https://web.archive.org/web/20120928020216/http://www.koders.com:80/java/fid0F06E53F2CFCC6E591C38752F355A7178F92FFE5.aspx\r\n  [2]: https://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.64.4843\r\n  [3]: http://www.springerlink.com/content/x7545u2g85675u17/\r\n  [4]: https://web.archive.org/web/20140208163214/http://mg4j.dsi.unimi.it:80/","title":"Ultra-fast &quot;Begins With&quot; Query from Disk","body":"<p>It looks like you need something like this: <a href=\"http://en.wikipedia.org/wiki/Trie\" rel=\"nofollow noreferrer\">http://en.wikipedia.org/wiki/Trie</a></p>\n<p>An implementation in Java can be found <a href=\"https://web.archive.org/web/20120928020216/http://www.koders.com:80/java/fid0F06E53F2CFCC6E591C38752F355A7178F92FFE5.aspx\" rel=\"nofollow noreferrer\">here</a>, although it isn't disk-based. I'll keep searching :/</p>\n<p>Useful papers: <a href=\"https://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.64.4843\" rel=\"nofollow noreferrer\">Trie methods for text and spatial data on secondary storage</a>, <a href=\"http://www.springerlink.com/content/x7545u2g85675u17/\" rel=\"nofollow noreferrer\">B-tries for disk-based string management</a></p>\n<p>Edit: I came across this might might be useful: <a href=\"https://web.archive.org/web/20140208163214/http://mg4j.dsi.unimi.it:80/\" rel=\"nofollow noreferrer\">MG4J: Managing Gigabytes for Java</a></p>\n"},{"tags":[],"owner":{"account_id":130930,"reputation":67596,"user_id":330565,"accept_rate":79,"display_name":"Nikita Rybak"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1292101079,"creation_date":1292101079,"answer_id":4418914,"question_id":4418860,"body_markdown":"Can&#39;t suggest any existing library, but I dealt with similar problem before. It&#39;s quite easy, if you don&#39;t plan on modifying your list dynamically and you can sort strings in the file (for binary search).\r\n\r\nLet&#39;s break your 40Mb into 1000 chunks of approximately equal size and keep first string from each chunk in memory. That would be an array of 1000 strings. They&#39;re ordered, because original list is ordered.  \r\nWhen you need to execute a query, you can use binary search on that array. This will show you in which chunk result string lies. Then you can read that chunk from disk (approx 40kb) and search in its contents.\r\n\r\nE.g., if array holds values `[&quot;andrew&quot;, &quot;brian&quot;, &quot;donald&quot;, &quot;john&quot;]` and you search for prefix `&quot;cris&quot;`, you know that all Cristophers and Cristians are in the second chunk.","title":"Ultra-fast &quot;Begins With&quot; Query from Disk","body":"<p>Can't suggest any existing library, but I dealt with similar problem before. It's quite easy, if you don't plan on modifying your list dynamically and you can sort strings in the file (for binary search).</p>\n\n<p>Let's break your 40Mb into 1000 chunks of approximately equal size and keep first string from each chunk in memory. That would be an array of 1000 strings. They're ordered, because original list is ordered.<br>\nWhen you need to execute a query, you can use binary search on that array. This will show you in which chunk result string lies. Then you can read that chunk from disk (approx 40kb) and search in its contents.</p>\n\n<p>E.g., if array holds values <code>[\"andrew\", \"brian\", \"donald\", \"john\"]</code> and you search for prefix <code>\"cris\"</code>, you know that all Cristophers and Cristians are in the second chunk.</p>\n"}],"owner":{"account_id":29751,"reputation":7797,"user_id":80617,"accept_rate":88,"display_name":"ghempton"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":319,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":4418895,"answer_count":2,"score":2,"last_activity_date":1651566027,"creation_date":1292100290,"question_id":4418860,"body_markdown":"I have a 40MB (too big for memory in this case) list of strings that I want to do &quot;begins with&quot; queries on to extract matches. Anyone know of a good data structure for this? Bonus points for an existing os java implementation. I would be willing to sacrifice &quot;begins with&quot; to just exact matching if something already exists. A disk-based trie sounds ideal.","title":"Ultra-fast &quot;Begins With&quot; Query from Disk","body":"<p>I have a 40MB (too big for memory in this case) list of strings that I want to do \"begins with\" queries on to extract matches. Anyone know of a good data structure for this? Bonus points for an existing os java implementation. I would be willing to sacrifice \"begins with\" to just exact matching if something already exists. A disk-based trie sounds ideal.</p>\n"},{"tags":["java","type-conversion","config"],"comments":[{"owner":{"account_id":11502933,"reputation":5909,"user_id":8430155,"display_name":"Harshal Parekh"},"score":0,"creation_date":1651509031,"post_id":72089574,"comment_id":127376002,"body_markdown":"You might want to look into the `substring()` method.","body":"You might want to look into the <code>substring()</code> method."},{"owner":{"account_id":2141010,"reputation":118229,"user_id":1899640,"display_name":"that other guy"},"score":2,"creation_date":1651509238,"post_id":72089574,"comment_id":127376061,"body_markdown":"There is no standard API for parsing [JLS 3.10.1](https://docs.oracle.com/javase/specs/jls/se8/html/jls-3.html#jls-3.10.1) integer constants into the corresponding value the way a Java compiler would if that&#39;s what you mean.","body":"There is no standard API for parsing <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-3.html#jls-3.10.1\" rel=\"nofollow noreferrer\">JLS 3.10.1</a> integer constants into the corresponding value the way a Java compiler would if that&#39;s what you mean."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1651510765,"post_id":72089574,"comment_id":127376547,"body_markdown":"You are reading the entire properties file for getting a single property? I hope, youre not calling this method once for each property youre interested in","body":"You are reading the entire properties file for getting a single property? I hope, youre not calling this method once for each property youre interested in"},{"owner":{"account_id":3580374,"reputation":108855,"user_id":2988730,"accept_rate":96,"display_name":"Mad Physicist"},"score":0,"creation_date":1651511961,"post_id":72089574,"comment_id":127376947,"body_markdown":"@Holger. You know it!","body":"@Holger. You know it!"},{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1651512180,"post_id":72089574,"comment_id":127377010,"body_markdown":"Related: [Why Long.parseLong(String s) won&#39;t consider a trailing &quot;L&quot; as valid?](https://stackoverflow.com/questions/36739676/why-long-parselongstring-s-wont-consider-a-trailing-l-as-valid)","body":"Related: <a href=\"https://stackoverflow.com/questions/36739676/why-long-parselongstring-s-wont-consider-a-trailing-l-as-valid\">Why Long.parseLong(String s) won&#39;t consider a trailing &quot;L&quot; as valid?</a>"}],"answers":[{"tags":[],"owner":{"account_id":7181840,"reputation":1565,"user_id":5485454,"display_name":"Kai-Sheng Yang"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1651512885,"creation_date":1651509463,"answer_id":72089692,"question_id":72089574,"body_markdown":"Neither `Long.parseLong` nor `Long.valueOf` can directly parse `1L`.\r\n\r\nA workaround: You can implement a simple `stripTrailingL` function to remove the trailing `L` and then parse it to Long.\r\n\r\n```java\r\nString str = &quot;1234L&quot;;\r\nLong yourLong = Long.parseLong(stripTrailingL(str));\r\n\r\npublic String stripTrailingL(String str) {\r\n    return str.endsWith(&quot;L&quot;) ? str.substring(0, str.length() - 1) : str;\r\n}\r\n```","title":"Is it possible to convert the String &quot;1L&quot; to the corresponding Long value?","body":"<p>Neither <code>Long.parseLong</code> nor <code>Long.valueOf</code> can directly parse <code>1L</code>.</p>\n<p>A workaround: You can implement a simple <code>stripTrailingL</code> function to remove the trailing <code>L</code> and then parse it to Long.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String str = &quot;1234L&quot;;\nLong yourLong = Long.parseLong(stripTrailingL(str));\n\npublic String stripTrailingL(String str) {\n    return str.endsWith(&quot;L&quot;) ? str.substring(0, str.length() - 1) : str;\n}\n</code></pre>\n"}],"owner":{"account_id":21295225,"reputation":398,"user_id":15671866,"display_name":"ma4strong"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":381,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":72089692,"answer_count":1,"score":2,"last_activity_date":1651566005,"creation_date":1651508711,"question_id":72089574,"body_markdown":"I am parsing a config file with the following instructions:\r\n```java\r\npublic String getProperty(String key) throws IOException {\r\n  Properties prop = new Properties();\r\n  String path = &quot;path/to/file/file.properties&quot;;\r\n  InputStream stream = this.class.getResourceAsStream(path);\r\n  prop.load(stream);\r\n  return prop.getProperty(key);\r\n```\r\nThe returned value, that is a `String`, is later converted into the expected type from the calling method. How can I convert the String `1L` into a `Long` type? &lt;br&gt;\r\nI tried:\r\n```java\r\nLong.valueOf(this.getProperty(key));\r\n```\r\nbut it raises `NumberFormatException`. Is there a way to do it?","title":"Is it possible to convert the String &quot;1L&quot; to the corresponding Long value?","body":"<p>I am parsing a config file with the following instructions:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public String getProperty(String key) throws IOException {\n  Properties prop = new Properties();\n  String path = &quot;path/to/file/file.properties&quot;;\n  InputStream stream = this.class.getResourceAsStream(path);\n  prop.load(stream);\n  return prop.getProperty(key);\n</code></pre>\n<p>The returned value, that is a <code>String</code>, is later converted into the expected type from the calling method. How can I convert the String <code>1L</code> into a <code>Long</code> type? <br>\nI tried:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Long.valueOf(this.getProperty(key));\n</code></pre>\n<p>but it raises <code>NumberFormatException</code>. Is there a way to do it?</p>\n"},{"tags":["java","datetime-format","timezone-offset","java.time.instant"],"comments":[{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1651304926,"post_id":72066624,"comment_id":127336869,"body_markdown":"How do you want the timezone or time offset to be chosen?  An `Instant` doesn&#39;t have a time offset built in, although in your snippet above, you&#39;ve shown it in UTC.","body":"How do you want the timezone or time offset to be chosen?  An <code>Instant</code> doesn&#39;t have a time offset built in, although in your snippet above, you&#39;ve shown it in UTC."},{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1651306443,"post_id":72066624,"comment_id":127337107,"body_markdown":"Why are you comparing *strings*? How about converting the string to an `Instant` and comparing the `Instant`s?","body":"Why are you comparing <i>strings</i>? How about converting the string to an <code>Instant</code> and comparing the <code>Instant</code>s?"}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1651307194,"creation_date":1651306639,"answer_id":72066803,"question_id":72066624,"body_markdown":"Think in terms of objects, not text. Date-time objects have their own internal implementations of the date-time values they represent. So tte have no format because that are not mere strings.  \r\n\r\nParse your input text as an `OffsetDateTime` using `DateTimeFormatter`. This has been covered many many times already on Stack Overflow. Search to learn more. \r\n\r\nFrom that `OffsetDateTime` object, extract an `Instant`. \r\n\r\n    Instant myInstant = myOffsetDateTime.toInstant() ;\r\n\r\nCompare that `Instant` with the current moment. \r\n\r\n    boolean isInThePast = myInstant.isBefore( Instant.now() ) ;\r\n\r\nNotice that no text is involved. The objects do the heavy lifting for us, rather than us doing string manipulations and comparisons. \r\n\r\n","title":"Convert Java Instant to String with timezone","body":"<p>Think in terms of objects, not text. Date-time objects have their own internal implementations of the date-time values they represent. So tte have no format because that are not mere strings.</p>\n<p>Parse your input text as an <code>OffsetDateTime</code> using <code>DateTimeFormatter</code>. This has been covered many many times already on Stack Overflow. Search to learn more.</p>\n<p>From that <code>OffsetDateTime</code> object, extract an <code>Instant</code>.</p>\n<pre><code>Instant myInstant = myOffsetDateTime.toInstant() ;\n</code></pre>\n<p>Compare that <code>Instant</code> with the current moment.</p>\n<pre><code>boolean isInThePast = myInstant.isBefore( Instant.now() ) ;\n</code></pre>\n<p>Notice that no text is involved. The objects do the heavy lifting for us, rather than us doing string manipulations and comparisons.</p>\n"}],"owner":{"account_id":17122673,"reputation":137,"user_id":12390562,"display_name":"Broshet"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":425,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1651565627,"creation_date":1651304776,"question_id":72066624,"body_markdown":"I have to compare a instant with a date String but format are differents. \r\n\r\nThe Instant is initiate with &quot;now&quot; but without &quot;+nnnn&quot; part (I think it&#39;s timezone).\r\n\r\nHow can I create a Instant and convert it to String with this format for compare with my String ?\r\n\r\n    String :  2022-04-30T07:41:36.413+0000\r\n    Instant : 2022-04-30T07:41:36.413Z\r\n\r\n","title":"Convert Java Instant to String with timezone","body":"<p>I have to compare a instant with a date String but format are differents.</p>\n<p>The Instant is initiate with &quot;now&quot; but without &quot;+nnnn&quot; part (I think it's timezone).</p>\n<p>How can I create a Instant and convert it to String with this format for compare with my String ?</p>\n<pre><code>String :  2022-04-30T07:41:36.413+0000\nInstant : 2022-04-30T07:41:36.413Z\n</code></pre>\n"},{"tags":["java","json","jackson","jackson-databind","jackson2"],"answers":[{"tags":[],"owner":{"account_id":16914570,"reputation":1532,"user_id":12232870,"display_name":"terrorrussia-keeps-killing"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1651564371,"creation_date":1651564371,"answer_id":72096310,"question_id":72089765,"body_markdown":"I don&#39;t think I can write really efficient Jackson code while being a Gson-oriented guy, but I guess you could incorporate the following Q/As to resolve your question:\r\n\r\n* https://stackoverflow.com/a/27893673/12232870 - in order to overcome your issue;\r\n* https://stackoverflow.com/a/31057934/12232870 - in order to use the default serialization strategies.\r\n\r\nAlso, I&#39;d like to refactor your code (a lot) in order to make it flexible by using the strategy design pattern (where necessary), and demonstrate how it works using with simple unit tests.\r\n\r\n```java\r\npublic final class InterceptingSerializerModifier&lt;T&gt;\r\n\t\textends BeanSerializerModifier {\r\n\r\n\tpublic interface IAppender&lt;T&gt; {\r\n\r\n\t\tvoid append(JsonGenerator generator, T value)\r\n\t\t\t\tthrows IOException;\r\n\r\n\t}\r\n\r\n\tprivate final Class&lt;T&gt; baseClass;\r\n\tprivate final IAppender&lt;? super T&gt; appender;\r\n\r\n\tprivate InterceptingSerializerModifier(final Class&lt;T&gt; baseClass, final IAppender&lt;? super T&gt; appender) {\r\n\t\tthis.baseClass = baseClass;\r\n\t\tthis.appender = appender;\r\n\t}\r\n\r\n\tpublic static &lt;T&gt; BeanSerializerModifier create(final Class&lt;T&gt; baseClass, final IAppender&lt;? super T&gt; appender) {\r\n\t\treturn new InterceptingSerializerModifier&lt;&gt;(baseClass, appender);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic JsonSerializer&lt;?&gt; modifySerializer(final SerializationConfig config, final BeanDescription description, final JsonSerializer&lt;?&gt; serializer) {\r\n\t\tif ( !baseClass.isAssignableFrom(description.getBeanClass()) ) {\r\n\t\t\treturn serializer;\r\n\t\t}\r\n\t\t@SuppressWarnings(&quot;unchecked&quot;)\r\n\t\tfinal JsonSerializer&lt;? super T&gt; castSerializer = (JsonSerializer&lt;? super T&gt;) serializer;\r\n\t\treturn InterceptingJsonSerializer.create(castSerializer, appender);\r\n\t}\r\n\r\n\tprivate static final class InterceptingJsonSerializer&lt;T&gt;\r\n\t\t\textends JsonSerializer&lt;T&gt; {\r\n\r\n\t\tprivate static final NameTransformer identityNameTransformer = new NameTransformer() {\r\n\t\t\t@Override\r\n\t\t\tpublic String transform(final String name) {\r\n\t\t\t\treturn name;\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic String reverse(final String transformed) {\r\n\t\t\t\treturn transformed;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tprivate final JsonSerializer&lt;? super T&gt; unwrappedSerializer;\r\n\t\tprivate final IAppender&lt;? super T&gt; appender;\r\n\r\n\t\tprivate InterceptingJsonSerializer(final JsonSerializer&lt;? super T&gt; unwrappedSerializer, final IAppender&lt;? super T&gt; appender) {\r\n\t\t\tthis.unwrappedSerializer = unwrappedSerializer;\r\n\t\t\tthis.appender = appender;\r\n\t\t}\r\n\r\n\t\tprivate static &lt;T&gt; JsonSerializer&lt;T&gt; create(final JsonSerializer&lt;? super T&gt; serializer, final IAppender&lt;? super T&gt; appender) {\r\n\t\t\treturn new InterceptingJsonSerializer&lt;&gt;(serializer.unwrappingSerializer(identityNameTransformer), appender);\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic void serializeWithType(final T value, final JsonGenerator generator, final SerializerProvider provider, final TypeSerializer serializer)\r\n\t\t\t\tthrows IOException {\r\n\t\t\tserializer.writeTypePrefix(generator, serializer.typeId(value, JsonToken.START_OBJECT));\r\n\t\t\tdoSerialize(value, generator, provider);\r\n\t\t\tserializer.writeTypeSuffix(generator, serializer.typeId(value, JsonToken.START_OBJECT));\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic void serialize(final T value, final JsonGenerator generator, final SerializerProvider provider)\r\n\t\t\t\tthrows IOException {\r\n\t\t\tgenerator.writeStartObject();\r\n\t\t\tdoSerialize(value, generator, provider);\r\n\t\t\tgenerator.writeEndObject();\r\n\t\t}\r\n\r\n\t\tprivate void doSerialize(final T value, final JsonGenerator generator, final SerializerProvider provider)\r\n\t\t\t\tthrows IOException {\r\n\t\t\tunwrappedSerializer.serialize(value, generator, provider);\r\n\t\t\tappender.append(generator, value);\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n```\r\n\r\n```java\r\npublic final class InterceptingSerializerModifierTest {\r\n\r\n\tprivate static final BeanSerializerModifier unit = InterceptingSerializerModifier.create(\r\n\t\t\tIValue.class,\r\n\t\t\t(generator, value) -&gt; {\r\n\t\t\t\tif ( value instanceof Foo foo ) {\r\n\t\t\t\t\tgenerator.writeObjectField(&quot;@extra.message&quot;, &quot;this is from foo: &quot; + foo.value);\r\n\t\t\t\t} else if ( value instanceof Bar bar ) {\r\n\t\t\t\t\tgenerator.writeObjectField(&quot;@extra.message&quot;, &quot;this is from bar: &quot; + bar.value);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgenerator.writeObjectField(&quot;@extra.message&quot;, &quot;something else...&quot;);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t);\r\n\r\n\tprivate static final ObjectMapper objectMapper = new ObjectMapper()\r\n\t\t\t.registerModule(new SimpleModule()\r\n\t\t\t\t\t.setSerializerModifier(unit)\r\n\t\t\t);\r\n\r\n\tprivate static Stream&lt;Arguments&gt; test() {\r\n\t\treturn Stream.of(\r\n\t\t\t\tArguments.of(\r\n\t\t\t\t\t\t&quot;{\\&quot;@type\\&quot;:\\&quot;FOO\\&quot;,\\&quot;value\\&quot;:1,\\&quot;@extra.message\\&quot;:\\&quot;this is from foo: 1\\&quot;}&quot;,\r\n\t\t\t\t\t\tnew Foo(1)\r\n\t\t\t\t),\r\n\t\t\t\tArguments.of(\r\n\t\t\t\t\t\t&quot;{\\&quot;@type\\&quot;:\\&quot;BAR\\&quot;,\\&quot;value\\&quot;:2.0,\\&quot;@extra.message\\&quot;:\\&quot;this is from bar: 2.0\\&quot;}&quot;,\r\n\t\t\t\t\t\tnew Bar(2)\r\n\t\t\t\t)\r\n\t\t);\r\n\t}\r\n\r\n\t@ParameterizedTest\r\n\t@MethodSource\r\n\tpublic void test(final String expectedJson, final IValue actualValue)\r\n\t\t\tthrows JsonProcessingException {\r\n\t\tAssertions.assertEquals(expectedJson, objectMapper.writeValueAsString(actualValue));\r\n\t}\r\n\r\n\t@JsonTypeInfo(use = JsonTypeInfo.Id.NAME)\r\n\t@JsonSubTypes({\r\n\t\t\t@JsonSubTypes.Type(value = Foo.class, name = &quot;FOO&quot;),\r\n\t\t\t@JsonSubTypes.Type(value = Bar.class, name = &quot;BAR&quot;)\r\n\t})\r\n\tprivate sealed interface IValue\r\n\t\t\tpermits Foo, Bar {\r\n\t}\r\n\r\n\t@RequiredArgsConstructor(access = AccessLevel.PRIVATE)\r\n\tprivate static final class Foo\r\n\t\t\timplements IValue {\r\n\r\n\t\t@Getter\r\n\t\tprivate final int value;\r\n\r\n\t}\r\n\r\n\t@RequiredArgsConstructor(access = AccessLevel.PRIVATE)\r\n\tprivate static final class Bar\r\n\t\t\timplements IValue {\r\n\r\n\t\t@Getter\r\n\t\tprivate final double value;\r\n\r\n\t}\r\n\r\n}\r\n```\r\n\r\nI hope the code above is pretty self-explaining. You may also want to enhance the code in order to make `identityNameTransformer` injectable too, if you need to use extra property name transformations.\r\n\r\n----\r\n\r\nUnrelated to the subject, but duplicating JSON object property names like `my_extra_field` in your question may be considered not recommended (not sure if vulnerable). See more: https://stackoverflow.com/questions/21832701/does-json-syntax-allow-duplicate-keys-in-an-object . ","title":"Jackson adding additional fields to JSON throws com.fasterxml.jackson.databind.exc.InvalidDefinitionException","body":"<p>I don't think I can write really efficient Jackson code while being a Gson-oriented guy, but I guess you could incorporate the following Q/As to resolve your question:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/a/27893673/12232870\">https://stackoverflow.com/a/27893673/12232870</a> - in order to overcome your issue;</li>\n<li><a href=\"https://stackoverflow.com/a/31057934/12232870\">https://stackoverflow.com/a/31057934/12232870</a> - in order to use the default serialization strategies.</li>\n</ul>\n<p>Also, I'd like to refactor your code (a lot) in order to make it flexible by using the strategy design pattern (where necessary), and demonstrate how it works using with simple unit tests.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public final class InterceptingSerializerModifier&lt;T&gt;\n        extends BeanSerializerModifier {\n\n    public interface IAppender&lt;T&gt; {\n\n        void append(JsonGenerator generator, T value)\n                throws IOException;\n\n    }\n\n    private final Class&lt;T&gt; baseClass;\n    private final IAppender&lt;? super T&gt; appender;\n\n    private InterceptingSerializerModifier(final Class&lt;T&gt; baseClass, final IAppender&lt;? super T&gt; appender) {\n        this.baseClass = baseClass;\n        this.appender = appender;\n    }\n\n    public static &lt;T&gt; BeanSerializerModifier create(final Class&lt;T&gt; baseClass, final IAppender&lt;? super T&gt; appender) {\n        return new InterceptingSerializerModifier&lt;&gt;(baseClass, appender);\n    }\n\n    @Override\n    public JsonSerializer&lt;?&gt; modifySerializer(final SerializationConfig config, final BeanDescription description, final JsonSerializer&lt;?&gt; serializer) {\n        if ( !baseClass.isAssignableFrom(description.getBeanClass()) ) {\n            return serializer;\n        }\n        @SuppressWarnings(&quot;unchecked&quot;)\n        final JsonSerializer&lt;? super T&gt; castSerializer = (JsonSerializer&lt;? super T&gt;) serializer;\n        return InterceptingJsonSerializer.create(castSerializer, appender);\n    }\n\n    private static final class InterceptingJsonSerializer&lt;T&gt;\n            extends JsonSerializer&lt;T&gt; {\n\n        private static final NameTransformer identityNameTransformer = new NameTransformer() {\n            @Override\n            public String transform(final String name) {\n                return name;\n            }\n\n            @Override\n            public String reverse(final String transformed) {\n                return transformed;\n            }\n        };\n\n        private final JsonSerializer&lt;? super T&gt; unwrappedSerializer;\n        private final IAppender&lt;? super T&gt; appender;\n\n        private InterceptingJsonSerializer(final JsonSerializer&lt;? super T&gt; unwrappedSerializer, final IAppender&lt;? super T&gt; appender) {\n            this.unwrappedSerializer = unwrappedSerializer;\n            this.appender = appender;\n        }\n\n        private static &lt;T&gt; JsonSerializer&lt;T&gt; create(final JsonSerializer&lt;? super T&gt; serializer, final IAppender&lt;? super T&gt; appender) {\n            return new InterceptingJsonSerializer&lt;&gt;(serializer.unwrappingSerializer(identityNameTransformer), appender);\n        }\n\n        @Override\n        public void serializeWithType(final T value, final JsonGenerator generator, final SerializerProvider provider, final TypeSerializer serializer)\n                throws IOException {\n            serializer.writeTypePrefix(generator, serializer.typeId(value, JsonToken.START_OBJECT));\n            doSerialize(value, generator, provider);\n            serializer.writeTypeSuffix(generator, serializer.typeId(value, JsonToken.START_OBJECT));\n        }\n\n        @Override\n        public void serialize(final T value, final JsonGenerator generator, final SerializerProvider provider)\n                throws IOException {\n            generator.writeStartObject();\n            doSerialize(value, generator, provider);\n            generator.writeEndObject();\n        }\n\n        private void doSerialize(final T value, final JsonGenerator generator, final SerializerProvider provider)\n                throws IOException {\n            unwrappedSerializer.serialize(value, generator, provider);\n            appender.append(generator, value);\n        }\n\n    }\n\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public final class InterceptingSerializerModifierTest {\n\n    private static final BeanSerializerModifier unit = InterceptingSerializerModifier.create(\n            IValue.class,\n            (generator, value) -&gt; {\n                if ( value instanceof Foo foo ) {\n                    generator.writeObjectField(&quot;@extra.message&quot;, &quot;this is from foo: &quot; + foo.value);\n                } else if ( value instanceof Bar bar ) {\n                    generator.writeObjectField(&quot;@extra.message&quot;, &quot;this is from bar: &quot; + bar.value);\n                } else {\n                    generator.writeObjectField(&quot;@extra.message&quot;, &quot;something else...&quot;);\n                }\n            }\n    );\n\n    private static final ObjectMapper objectMapper = new ObjectMapper()\n            .registerModule(new SimpleModule()\n                    .setSerializerModifier(unit)\n            );\n\n    private static Stream&lt;Arguments&gt; test() {\n        return Stream.of(\n                Arguments.of(\n                        &quot;{\\&quot;@type\\&quot;:\\&quot;FOO\\&quot;,\\&quot;value\\&quot;:1,\\&quot;@extra.message\\&quot;:\\&quot;this is from foo: 1\\&quot;}&quot;,\n                        new Foo(1)\n                ),\n                Arguments.of(\n                        &quot;{\\&quot;@type\\&quot;:\\&quot;BAR\\&quot;,\\&quot;value\\&quot;:2.0,\\&quot;@extra.message\\&quot;:\\&quot;this is from bar: 2.0\\&quot;}&quot;,\n                        new Bar(2)\n                )\n        );\n    }\n\n    @ParameterizedTest\n    @MethodSource\n    public void test(final String expectedJson, final IValue actualValue)\n            throws JsonProcessingException {\n        Assertions.assertEquals(expectedJson, objectMapper.writeValueAsString(actualValue));\n    }\n\n    @JsonTypeInfo(use = JsonTypeInfo.Id.NAME)\n    @JsonSubTypes({\n            @JsonSubTypes.Type(value = Foo.class, name = &quot;FOO&quot;),\n            @JsonSubTypes.Type(value = Bar.class, name = &quot;BAR&quot;)\n    })\n    private sealed interface IValue\n            permits Foo, Bar {\n    }\n\n    @RequiredArgsConstructor(access = AccessLevel.PRIVATE)\n    private static final class Foo\n            implements IValue {\n\n        @Getter\n        private final int value;\n\n    }\n\n    @RequiredArgsConstructor(access = AccessLevel.PRIVATE)\n    private static final class Bar\n            implements IValue {\n\n        @Getter\n        private final double value;\n\n    }\n\n}\n</code></pre>\n<p>I hope the code above is pretty self-explaining. You may also want to enhance the code in order to make <code>identityNameTransformer</code> injectable too, if you need to use extra property name transformations.</p>\n<hr />\n<p>Unrelated to the subject, but duplicating JSON object property names like <code>my_extra_field</code> in your question may be considered not recommended (not sure if vulnerable). See more: <a href=\"https://stackoverflow.com/questions/21832701/does-json-syntax-allow-duplicate-keys-in-an-object\">Does JSON syntax allow duplicate keys in an object?</a> .</p>\n"}],"owner":{"account_id":10278040,"reputation":2869,"user_id":7584240,"accept_rate":17,"display_name":"BATMAN_2008"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2299,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1651565438,"creation_date":1651509811,"question_id":72089765,"body_markdown":"I am using Jackson to serialize my Java POJO classes. In addition to fields, I have in Java POJO, I would like to add some additional information in JSON I am writing my own custom `CustomClassSerializer`. If I use this class and register to `ObjectMapper` then I get the error:\r\n```\r\nException in thread &quot;main&quot; com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Type id handling not implemented for type org.acme.Tiger (by serializer of type org.acme.CustomModule$CustomClassSerializer)\r\n```\r\n\r\nI am unable to understand what might be going wrong here. If I remove the custom registered model then everything works perfectly.\r\n\r\nCan someone please let me know what may be the cause of this issue? I am currently using Jackson 2.13.2 latest version dependencies: `jackson-core, jackson-databind, jackson-annotations, jackson-datatype-jdk8`:\r\n\r\nFollowing is the sample code:\r\n```\r\nimport com.fasterxml.jackson.annotation.JsonInclude;\r\nimport com.fasterxml.jackson.annotation.JsonSubTypes;\r\nimport com.fasterxml.jackson.annotation.JsonTypeInfo;\r\nimport lombok.*;\r\n\r\n@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.PROPERTY, visible = true, property = &quot;type&quot;)\r\n@JsonSubTypes({@JsonSubTypes.Type(value = Bat.class, name = &quot;Bat&quot;),\r\n        @JsonSubTypes.Type(value = Tiger.class, name = &quot;Tiger&quot;)})\r\n@JsonInclude(JsonInclude.Include.NON_NULL)\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Builder\r\npublic class Animal {\r\n    private String type;\r\n    private String name;\r\n}\r\n```\r\n\r\n\r\n```\r\n@JsonInclude(JsonInclude.Include.NON_NULL)\r\n@EqualsAndHashCode(callSuper = true)\r\n@ToString(callSuper = true)\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@JsonTypeName(&quot;Tiger&quot;)\r\npublic class Tiger extends Animal {\r\n    private String livingType;\r\n    private String foundIn;\r\n}\r\n```\r\n\r\n```\r\n@JsonInclude(JsonInclude.Include.NON_NULL)\r\n@EqualsAndHashCode(callSuper = true)\r\n@ToString(callSuper = true)\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@JsonTypeName(&quot;Bat&quot;)\r\npublic class Bat extends Animal{\r\n    private String livingType;\r\n    private String foundIn;\r\n}\r\n```\r\n\r\n```\r\nimport com.fasterxml.jackson.core.JsonGenerator;\r\nimport com.fasterxml.jackson.databind.BeanDescription;\r\nimport com.fasterxml.jackson.databind.JavaType;\r\nimport com.fasterxml.jackson.databind.JsonSerializer;\r\nimport com.fasterxml.jackson.databind.SerializerProvider;\r\nimport com.fasterxml.jackson.databind.module.SimpleModule;\r\nimport com.fasterxml.jackson.databind.ser.BeanSerializerFactory;\r\n\r\nimport java.io.IOException;\r\n\r\npublic class CustomModule extends SimpleModule {\r\n    public CustomModule() {\r\n        addSerializer(Tiger.class, new CustomClassSerializer());\r\n    }\r\n\r\n    private static class CustomClassSerializer extends JsonSerializer {\r\n        @Override\r\n        public void serialize(Object value, JsonGenerator jgen, SerializerProvider provider) throws IOException {\r\n            jgen.writeStartObject();\r\n            jgen.writeObjectField(&quot;my_extra_field1&quot;, &quot;some data&quot;);\r\n            jgen.writeObjectField(&quot;my_extra_field2&quot;, &quot;some more data&quot;);\r\n            JavaType javaType = provider.constructType(Tiger.class);\r\n            BeanDescription beanDesc = provider.getConfig().introspect(javaType);\r\n            JsonSerializer&lt;Object&gt; serializer = BeanSerializerFactory.instance.createSerializer(provider, javaType);\r\n            serializer.unwrappingSerializer(null).serialize(value, jgen, provider);\r\n            jgen.writeEndObject();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n\r\n```\r\nimport com.fasterxml.jackson.annotation.JsonInclude;\r\nimport com.fasterxml.jackson.core.JsonProcessingException;\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\n\r\npublic class TestMain {\r\n    public static void main(String[] args) throws JsonProcessingException {\r\n        final ObjectMapper objectMapper = new ObjectMapper();\r\n        objectMapper.setSerializationInclusion(JsonInclude.Include.NON_NULL);\r\n        objectMapper.registerModule(new CustomModule());\r\n\r\n        Tiger tiger = new Tiger();\r\n        tiger.setType(&quot;Tiger&quot;);\r\n        tiger.setName(&quot;Shera&quot;);\r\n        tiger.setFoundIn(&quot;Ground&quot;);\r\n        tiger.setLivingType(&quot;Tree&quot;);\r\n        System.out.println(objectMapper.writerWithDefaultPrettyPrinter().writeValueAsString(tiger));\r\n    }\r\n}\r\n```\r\n\r\nI would like to know what are the causes for the above-mentioned exception.","title":"Jackson adding additional fields to JSON throws com.fasterxml.jackson.databind.exc.InvalidDefinitionException","body":"<p>I am using Jackson to serialize my Java POJO classes. In addition to fields, I have in Java POJO, I would like to add some additional information in JSON I am writing my own custom <code>CustomClassSerializer</code>. If I use this class and register to <code>ObjectMapper</code> then I get the error:</p>\n<pre><code>Exception in thread &quot;main&quot; com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Type id handling not implemented for type org.acme.Tiger (by serializer of type org.acme.CustomModule$CustomClassSerializer)\n</code></pre>\n<p>I am unable to understand what might be going wrong here. If I remove the custom registered model then everything works perfectly.</p>\n<p>Can someone please let me know what may be the cause of this issue? I am currently using Jackson 2.13.2 latest version dependencies: <code>jackson-core, jackson-databind, jackson-annotations, jackson-datatype-jdk8</code>:</p>\n<p>Following is the sample code:</p>\n<pre><code>import com.fasterxml.jackson.annotation.JsonInclude;\nimport com.fasterxml.jackson.annotation.JsonSubTypes;\nimport com.fasterxml.jackson.annotation.JsonTypeInfo;\nimport lombok.*;\n\n@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.PROPERTY, visible = true, property = &quot;type&quot;)\n@JsonSubTypes({@JsonSubTypes.Type(value = Bat.class, name = &quot;Bat&quot;),\n        @JsonSubTypes.Type(value = Tiger.class, name = &quot;Tiger&quot;)})\n@JsonInclude(JsonInclude.Include.NON_NULL)\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder\npublic class Animal {\n    private String type;\n    private String name;\n}\n</code></pre>\n<pre><code>@JsonInclude(JsonInclude.Include.NON_NULL)\n@EqualsAndHashCode(callSuper = true)\n@ToString(callSuper = true)\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@JsonTypeName(&quot;Tiger&quot;)\npublic class Tiger extends Animal {\n    private String livingType;\n    private String foundIn;\n}\n</code></pre>\n<pre><code>@JsonInclude(JsonInclude.Include.NON_NULL)\n@EqualsAndHashCode(callSuper = true)\n@ToString(callSuper = true)\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@JsonTypeName(&quot;Bat&quot;)\npublic class Bat extends Animal{\n    private String livingType;\n    private String foundIn;\n}\n</code></pre>\n<pre><code>import com.fasterxml.jackson.core.JsonGenerator;\nimport com.fasterxml.jackson.databind.BeanDescription;\nimport com.fasterxml.jackson.databind.JavaType;\nimport com.fasterxml.jackson.databind.JsonSerializer;\nimport com.fasterxml.jackson.databind.SerializerProvider;\nimport com.fasterxml.jackson.databind.module.SimpleModule;\nimport com.fasterxml.jackson.databind.ser.BeanSerializerFactory;\n\nimport java.io.IOException;\n\npublic class CustomModule extends SimpleModule {\n    public CustomModule() {\n        addSerializer(Tiger.class, new CustomClassSerializer());\n    }\n\n    private static class CustomClassSerializer extends JsonSerializer {\n        @Override\n        public void serialize(Object value, JsonGenerator jgen, SerializerProvider provider) throws IOException {\n            jgen.writeStartObject();\n            jgen.writeObjectField(&quot;my_extra_field1&quot;, &quot;some data&quot;);\n            jgen.writeObjectField(&quot;my_extra_field2&quot;, &quot;some more data&quot;);\n            JavaType javaType = provider.constructType(Tiger.class);\n            BeanDescription beanDesc = provider.getConfig().introspect(javaType);\n            JsonSerializer&lt;Object&gt; serializer = BeanSerializerFactory.instance.createSerializer(provider, javaType);\n            serializer.unwrappingSerializer(null).serialize(value, jgen, provider);\n            jgen.writeEndObject();\n        }\n    }\n}\n</code></pre>\n<pre><code>import com.fasterxml.jackson.annotation.JsonInclude;\nimport com.fasterxml.jackson.core.JsonProcessingException;\nimport com.fasterxml.jackson.databind.ObjectMapper;\n\npublic class TestMain {\n    public static void main(String[] args) throws JsonProcessingException {\n        final ObjectMapper objectMapper = new ObjectMapper();\n        objectMapper.setSerializationInclusion(JsonInclude.Include.NON_NULL);\n        objectMapper.registerModule(new CustomModule());\n\n        Tiger tiger = new Tiger();\n        tiger.setType(&quot;Tiger&quot;);\n        tiger.setName(&quot;Shera&quot;);\n        tiger.setFoundIn(&quot;Ground&quot;);\n        tiger.setLivingType(&quot;Tree&quot;);\n        System.out.println(objectMapper.writerWithDefaultPrettyPrinter().writeValueAsString(tiger));\n    }\n}\n</code></pre>\n<p>I would like to know what are the causes for the above-mentioned exception.</p>\n"},{"tags":["java","oop","interface"],"comments":[{"owner":{"account_id":176226,"reputation":1855,"user_id":406777,"accept_rate":85,"display_name":"Julio"},"score":0,"creation_date":1288361803,"post_id":4052621,"comment_id":4352021,"body_markdown":"Sorry about my awful &#39;typos&#39; Carl just clicked the button without really reading it thoroughly. Lot on my mind it seems. Cringe-worthy stuff when you look at the mistakes.","body":"Sorry about my awful &#39;typos&#39; Carl just clicked the button without really reading it thoroughly. Lot on my mind it seems. Cringe-worthy stuff when you look at the mistakes."},{"owner":{"account_id":1346255,"reputation":7003,"user_id":1286942,"accept_rate":78,"display_name":"Jo Smo"},"score":0,"creation_date":1437967613,"post_id":4052621,"comment_id":51235451,"body_markdown":"http://stackoverflow.com/a/24436493/1286942","body":"<a href=\"http://stackoverflow.com/a/24436493/1286942\">stackoverflow.com/a/24436493/1286942</a>"}],"answers":[{"tags":[],"owner":{"account_id":30171,"reputation":40012,"user_id":82118,"accept_rate":72,"display_name":"Carl Manaster"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1288365062,"creation_date":1288361725,"answer_id":4052663,"question_id":4052621,"body_markdown":"[Prefer Composition over Inheritance.][1]  This way, you can implement (say) eat() in a class that gets incorporated into all your animals as a data member.  Write it once, reuse it, but in a way that doesn&#39;t bind one kind of functionality explicitly to another.\r\n\r\nIf you had two (or ten) different ways of eating, you could swap them out as needed.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/49002/prefer-composition-over-inheritance","title":"The purpose of interfaces continued","body":"<p><a href=\"https://stackoverflow.com/questions/49002/prefer-composition-over-inheritance\">Prefer Composition over Inheritance.</a>  This way, you can implement (say) eat() in a class that gets incorporated into all your animals as a data member.  Write it once, reuse it, but in a way that doesn't bind one kind of functionality explicitly to another.</p>\n\n<p>If you had two (or ten) different ways of eating, you could swap them out as needed.</p>\n"},{"tags":[],"owner":{"account_id":19409,"reputation":304,"user_id":45492,"accept_rate":80,"display_name":"user45492"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1288361756,"creation_date":1288361756,"answer_id":4052667,"question_id":4052621,"body_markdown":"Right, you need to implement it ever time but you can implement it differently every time and any class that calls it doesn&#39;t need to worry about how it&#39;s implemented.  \r\n\r\nFor example, if you have a Zoo object with a bunch of animals (new Tiger(), Lion(), Bear()) then your zoo can do for each Animal a in some collection a.eat() and it will work.  The zoo doesn&#39;t care that there are three different types of animals that eat in totally different ways.","title":"The purpose of interfaces continued","body":"<p>Right, you need to implement it ever time but you can implement it differently every time and any class that calls it doesn't need to worry about how it's implemented.  </p>\n\n<p>For example, if you have a Zoo object with a bunch of animals (new Tiger(), Lion(), Bear()) then your zoo can do for each Animal a in some collection a.eat() and it will work.  The zoo doesn't care that there are three different types of animals that eat in totally different ways.</p>\n"},{"tags":[],"owner":{"account_id":78181,"reputation":46967,"user_id":222674,"accept_rate":97,"display_name":"Petar Minchev"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1288361761,"creation_date":1288361761,"answer_id":4052671,"question_id":4052621,"body_markdown":"You are confusing interfaces and inheritance. They are different concepts and can complement to each other. If all the eat methods are only slightly different, then you can create a base class which will contain the common code and will be invoked from the subclasses through overriden methods which add the different parts. The base class can still implement the interface. Hope it is clear.","title":"The purpose of interfaces continued","body":"<p>You are confusing interfaces and inheritance. They are different concepts and can complement to each other. If all the eat methods are only slightly different, then you can create a base class which will contain the common code and will be invoked from the subclasses through overriden methods which add the different parts. The base class can still implement the interface. Hope it is clear.</p>\n"},{"tags":[],"owner":{"account_id":109439,"reputation":15772,"user_id":289984,"accept_rate":71,"display_name":"Andrew Bezzub"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1288361782,"creation_date":1288361782,"answer_id":4052674,"question_id":4052621,"body_markdown":"&gt; and it has no implementation as such\r\n&gt; then whoever uses your interface has\r\n&gt; to write it from scratch..every time.\r\n\r\nEach implementation of the interface can be different. The point is that you can use interface without knowing the implementation. Consider example:\r\n\r\n    public interface ILogger\r\n    {\r\n        void WriteMessage(string message);\r\n    }\r\n\r\nYour application may use `ILogger` interface for logging errors/debug information, etc. But it doesn&#39;t matter how logger is implemented - it can be `FileSystemLogger`, or `DatabaseLogger`, or any other implementation. So you will be able to substitute implementations at any time without changing all places in code where logging was mentioned.\r\n","title":"The purpose of interfaces continued","body":"<blockquote>\n  <p>and it has no implementation as such\n  then whoever uses your interface has\n  to write it from scratch..every time.</p>\n</blockquote>\n\n<p>Each implementation of the interface can be different. The point is that you can use interface without knowing the implementation. Consider example:</p>\n\n<pre><code>public interface ILogger\n{\n    void WriteMessage(string message);\n}\n</code></pre>\n\n<p>Your application may use <code>ILogger</code> interface for logging errors/debug information, etc. But it doesn't matter how logger is implemented - it can be <code>FileSystemLogger</code>, or <code>DatabaseLogger</code>, or any other implementation. So you will be able to substitute implementations at any time without changing all places in code where logging was mentioned.</p>\n"},{"tags":[],"owner":{"account_id":41850,"reputation":132318,"user_id":121747,"accept_rate":89,"display_name":"Jack"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1288361909,"creation_date":1288361909,"answer_id":4052683,"question_id":4052621,"body_markdown":"&gt; If you are creating a number of classes all implementing such features and the implementation is only slightly different, this is going to be a lot of hard work.\r\n\r\nIn that case you are easily allowed to create another layer in you hierarchy of classes which implements `Animal` but is an ancestor class for all animals that eat in some way, for example\r\n\r\n    class Herbivore implements Animal {\r\n      public void eat(Object food) {\r\n       ...\r\n      }\r\n    }\r\n    \r\n    class Cow extends Herbivore..\r\n    class Horse extends Herbivore..\r\n\r\nand you are allowed to override `eat` by using `super.eat()` and changing only the slight part..\r\n\r\nYou should look forward code reuse and encapsulation of components at the same time.. then if your interface really doesn&#39;t characterize the class itself but just a component of it you can go by composition as suggested by Carl Manaster.\r\n\r\n","title":"The purpose of interfaces continued","body":"<blockquote>\n  <p>If you are creating a number of classes all implementing such features and the implementation is only slightly different, this is going to be a lot of hard work.</p>\n</blockquote>\n\n<p>In that case you are easily allowed to create another layer in you hierarchy of classes which implements <code>Animal</code> but is an ancestor class for all animals that eat in some way, for example</p>\n\n<pre><code>class Herbivore implements Animal {\n  public void eat(Object food) {\n   ...\n  }\n}\n\nclass Cow extends Herbivore..\nclass Horse extends Herbivore..\n</code></pre>\n\n<p>and you are allowed to override <code>eat</code> by using <code>super.eat()</code> and changing only the slight part..</p>\n\n<p>You should look forward code reuse and encapsulation of components at the same time.. then if your interface really doesn't characterize the class itself but just a component of it you can go by composition as suggested by Carl Manaster.</p>\n"},{"tags":[],"owner":{"account_id":58838,"reputation":11661,"user_id":176134,"accept_rate":62,"display_name":"Thomas Weller"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1288361985,"creation_date":1288361985,"answer_id":4052694,"question_id":4052621,"body_markdown":"You should think of an interface as an authoritative *declaration of behaviour*, which has nothing to do with implementation issues in the first place.\r\n\r\nIf you want to avoid code duplication, then you use an abstract base class in combination with the interface. Here you then can implement all the stuff that might be repeated in all interface-implementing classes otherwise.\r\n\r\nHTH.&lt;br/&gt;\r\nThomas","title":"The purpose of interfaces continued","body":"<p>You should think of an interface as an authoritative <em>declaration of behaviour</em>, which has nothing to do with implementation issues in the first place.</p>\n\n<p>If you want to avoid code duplication, then you use an abstract base class in combination with the interface. Here you then can implement all the stuff that might be repeated in all interface-implementing classes otherwise.</p>\n\n<p>HTH.<br/>\nThomas</p>\n"},{"tags":[],"owner":{"account_id":217201,"reputation":3337,"user_id":472883,"display_name":"Joe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1288362045,"creation_date":1288362045,"answer_id":4052700,"question_id":4052621,"body_markdown":"You are thinking about it backwards.\r\nInstead of thinking about the implementation first, you think about behavior (as described by the method signature) first. Then you implement the behavior as appropriate in the base classes giving a much more flexible, extensible system.\r\nYou dismissed &quot;design by contract&#39; pretty quickly, but it&#39;s  a key design strategy and the basis for web services, SOA, etc.\r\n","title":"The purpose of interfaces continued","body":"<p>You are thinking about it backwards.\nInstead of thinking about the implementation first, you think about behavior (as described by the method signature) first. Then you implement the behavior as appropriate in the base classes giving a much more flexible, extensible system.\nYou dismissed \"design by contract' pretty quickly, but it's  a key design strategy and the basis for web services, SOA, etc.</p>\n"},{"tags":[],"owner":{"account_id":7777,"reputation":9670,"user_id":13611,"accept_rate":71,"display_name":"Wes P"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1288362474,"creation_date":1288362474,"answer_id":4052774,"question_id":4052621,"body_markdown":"Using interfaces is more about giving the consuming code a way to know what you expect from it, rather than you needing to be concerned about the details of the consuming code.\r\n\r\nFor example, one of the ways we use interfaces a lot is in our Business Layer / Data Access Layer.\r\n\r\nBecause our business layer (BL) assembly will communicate with directly with the data access layer (DAL) assembly, the DAL cannot communicate directly with the BL.  What happens if the DAL wants to use objects rather than individual fields?  You would have to define your own DAL objects, and hydrate them with the input you&#39;ve just received.  Basically, a lot more work, more resources consumed, and multiple objects that represent the same data which makes for a maintenance nightmare.\r\n\r\nBut, if you define interfaces in the DAL, you can tell consumers of the DAL what it expects.  Then you can implement those interfaces in the BL and pass instances of the interfaces instead of BL objects.\r\n\r\nInterfaces are all about abstracting out the details of the implementation where they&#39;re not absolutely necessary.\r\n\r\n[Edit]\r\nIf you have a lot of objects that do similar things, a combination of an interface and a base class with overridable/virtual methods might be more useful than just an interface.","title":"The purpose of interfaces continued","body":"<p>Using interfaces is more about giving the consuming code a way to know what you expect from it, rather than you needing to be concerned about the details of the consuming code.</p>\n\n<p>For example, one of the ways we use interfaces a lot is in our Business Layer / Data Access Layer.</p>\n\n<p>Because our business layer (BL) assembly will communicate with directly with the data access layer (DAL) assembly, the DAL cannot communicate directly with the BL.  What happens if the DAL wants to use objects rather than individual fields?  You would have to define your own DAL objects, and hydrate them with the input you've just received.  Basically, a lot more work, more resources consumed, and multiple objects that represent the same data which makes for a maintenance nightmare.</p>\n\n<p>But, if you define interfaces in the DAL, you can tell consumers of the DAL what it expects.  Then you can implement those interfaces in the BL and pass instances of the interfaces instead of BL objects.</p>\n\n<p>Interfaces are all about abstracting out the details of the implementation where they're not absolutely necessary.</p>\n\n<p>[Edit]\nIf you have a lot of objects that do similar things, a combination of an interface and a base class with overridable/virtual methods might be more useful than just an interface.</p>\n"},{"tags":[],"owner":{"account_id":129236,"reputation":7706,"user_id":327679,"accept_rate":80,"display_name":"Andrei Fierbinteanu"},"down_vote_count":0,"up_vote_count":23,"is_accepted":true,"score":23,"last_activity_date":1288363352,"creation_date":1288362875,"answer_id":4052821,"question_id":4052621,"body_markdown":"Interfaces are the only way to create multiple inheritance in Java.\r\n\r\nSay you create a class `Animal`. And all animals, including humans extend that. And each of those animals inherits common methods like eat, breathe, etc.\r\n\r\nBut now let&#39;s say you have a `MathProblem` class.\r\nAnd you want to have certain classes that can solve that problem by passing the problem to a `solve(MathProblem problem)` method.\r\nAnd you know that a `Human`, but also a `Computer` might solve the math problem. So they both need to be able to solve that problem. You might be able to get the Computer to extend some `MathSolver` class that has the method, but Human already extends Animal, and can&#39;t extends anything else. So a better way is to make MathSolver an interface and have both `Human`, `Computer`, and any other classes that need to solve problems implement that.\r\n\r\nAlso note that a `Human` and a `Computer` might solve the problems in completely different ways, since their such different objects. That&#39;s what interfaces are best for. Defining certain abilities that cut across multiple inheritance hierarchies, and can have very different implementations, but can all be passed to a method that accepts any of them. Think of the `Comparable` interface; it&#39;s not something a certain class of objects has, all sort of things can be compared, and usually in very different ways. But you can always call sort on a `List` of `Comparable` objects since you know they have a certain order, no matter if they&#39;re `Numbers`, `Animals`, `Computers` or anything else (as long as they implement `Comparable` and define their ordering).","title":"The purpose of interfaces continued","body":"<p>Interfaces are the only way to create multiple inheritance in Java.</p>\n\n<p>Say you create a class <code>Animal</code>. And all animals, including humans extend that. And each of those animals inherits common methods like eat, breathe, etc.</p>\n\n<p>But now let's say you have a <code>MathProblem</code> class.\nAnd you want to have certain classes that can solve that problem by passing the problem to a <code>solve(MathProblem problem)</code> method.\nAnd you know that a <code>Human</code>, but also a <code>Computer</code> might solve the math problem. So they both need to be able to solve that problem. You might be able to get the Computer to extend some <code>MathSolver</code> class that has the method, but Human already extends Animal, and can't extends anything else. So a better way is to make MathSolver an interface and have both <code>Human</code>, <code>Computer</code>, and any other classes that need to solve problems implement that.</p>\n\n<p>Also note that a <code>Human</code> and a <code>Computer</code> might solve the problems in completely different ways, since their such different objects. That's what interfaces are best for. Defining certain abilities that cut across multiple inheritance hierarchies, and can have very different implementations, but can all be passed to a method that accepts any of them. Think of the <code>Comparable</code> interface; it's not something a certain class of objects has, all sort of things can be compared, and usually in very different ways. But you can always call sort on a <code>List</code> of <code>Comparable</code> objects since you know they have a certain order, no matter if they're <code>Numbers</code>, <code>Animals</code>, <code>Computers</code> or anything else (as long as they implement <code>Comparable</code> and define their ordering).</p>\n"},{"tags":[],"owner":{"account_id":214394,"reputation":1467,"user_id":468341,"accept_rate":65,"display_name":"nosirrahcd"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1288365086,"creation_date":1288365086,"answer_id":4053160,"question_id":4052621,"body_markdown":"This isn&#39;t really an answer so much as an example that I find helpful when thinking about interfaces, but think about the interface `Comparable&lt;T&gt;` which requires the method \r\n\r\n    public int compareTo(T anotherObject)\r\n\r\nThe user can implement this however he or she wants.  If a `Person implements Comparable&lt;Person&gt;`, for example, the comparison can be based on last name then first name, ignoring capitalization.  Or it can be based on age, etc.  However the user wants.  Implementing this interface is very useful, in that it allows the user to use things like `Collections.sort()` which require that the elements to be sorted need to be comparable (how else could a comparison be made?)","title":"The purpose of interfaces continued","body":"<p>This isn't really an answer so much as an example that I find helpful when thinking about interfaces, but think about the interface <code>Comparable&lt;T&gt;</code> which requires the method </p>\n\n<pre><code>public int compareTo(T anotherObject)\n</code></pre>\n\n<p>The user can implement this however he or she wants.  If a <code>Person implements Comparable&lt;Person&gt;</code>, for example, the comparison can be based on last name then first name, ignoring capitalization.  Or it can be based on age, etc.  However the user wants.  Implementing this interface is very useful, in that it allows the user to use things like <code>Collections.sort()</code> which require that the elements to be sorted need to be comparable (how else could a comparison be made?)</p>\n"},{"tags":[],"owner":{"account_id":1823397,"reputation":11,"user_id":1656894,"display_name":"Marcus"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1347118045,"creation_date":1347118045,"answer_id":12332011,"question_id":4052621,"body_markdown":"And old thread, I know. But I just read &quot;Interfaces are the only way to create multiple inheritance in Java&quot;. This is very wrong, because delegation (or &quot;compositon&quot; as Carl said) is the only way to get multiple inheritance (remember: &quot;delegation is inheritance&quot;, well, almost).\r\n\r\nYou only need interfaces to tell the developer &quot;hey, don&#39;t forget to delegate this or that class&quot;! Interfaces are only needed as reminder for a correct delegation (or in general: implementation), but they can&#39;t inherite any code. With multiple inheritance interfaces wouldn&#39;t be needed at all.\r\n\r\nActually, you don&#39;t really need interfaces to create a working program, they&#39;re just helpers without any function or functional code. Btw Thomas was very right with the abstract classes, these are far more important than interfaces, because that&#39;s where you can get reusable code from.\r\n\r\nNormally, when I write a java application I only create interfaces in the very end, as a helper for future programmers. Or I don&#39;t create any interfaces at all ;D","title":"The purpose of interfaces continued","body":"<p>And old thread, I know. But I just read \"Interfaces are the only way to create multiple inheritance in Java\". This is very wrong, because delegation (or \"compositon\" as Carl said) is the only way to get multiple inheritance (remember: \"delegation is inheritance\", well, almost).</p>\n\n<p>You only need interfaces to tell the developer \"hey, don't forget to delegate this or that class\"! Interfaces are only needed as reminder for a correct delegation (or in general: implementation), but they can't inherite any code. With multiple inheritance interfaces wouldn't be needed at all.</p>\n\n<p>Actually, you don't really need interfaces to create a working program, they're just helpers without any function or functional code. Btw Thomas was very right with the abstract classes, these are far more important than interfaces, because that's where you can get reusable code from.</p>\n\n<p>Normally, when I write a java application I only create interfaces in the very end, as a helper for future programmers. Or I don't create any interfaces at all ;D</p>\n"},{"tags":[],"owner":{"account_id":6181632,"reputation":73,"user_id":4816941,"display_name":"Milk Man"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1651565405,"creation_date":1430018585,"answer_id":29873339,"question_id":4052621,"body_markdown":"One major reason is that you can create an object using an interface reference, similar to an abstract method.  When you do this, every object which implements the interface can be assigned to it.  For example, if `Dog` and `Car` both implement `Washable`, then you can do:\r\n```\r\nWashable wD=new Dog();\r\n\r\nWashable wC=new Car();\r\n```\r\nIf Washable has the public abstract method `wash()`, then you can do this:\r\n```\r\nwD.wash();\r\n\r\nwC.wash();\r\n```\r\nand their respective methods will be called.  This also means that you can accept an interface as a parameter for a method meaning you don&#39;t have to add unecessary code to deal with every class which implements a certain interface.  \r\n\r\nSee here for a more detailed explanation: http://www.artima.com/objectsandjava/webuscript/PolymorphismInterfaces1.html\r\n\r\n","title":"The purpose of interfaces continued","body":"<p>One major reason is that you can create an object using an interface reference, similar to an abstract method.  When you do this, every object which implements the interface can be assigned to it.  For example, if <code>Dog</code> and <code>Car</code> both implement <code>Washable</code>, then you can do:</p>\n<pre><code>Washable wD=new Dog();\n\nWashable wC=new Car();\n</code></pre>\n<p>If Washable has the public abstract method <code>wash()</code>, then you can do this:</p>\n<pre><code>wD.wash();\n\nwC.wash();\n</code></pre>\n<p>and their respective methods will be called.  This also means that you can accept an interface as a parameter for a method meaning you don't have to add unecessary code to deal with every class which implements a certain interface.</p>\n<p>See here for a more detailed explanation: <a href=\"http://www.artima.com/objectsandjava/webuscript/PolymorphismInterfaces1.html\" rel=\"nofollow noreferrer\">http://www.artima.com/objectsandjava/webuscript/PolymorphismInterfaces1.html</a></p>\n"},{"tags":[],"owner":{"account_id":7416952,"reputation":45,"user_id":5642401,"display_name":"Manish Bannur"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1463674121,"creation_date":1463674121,"answer_id":37328689,"question_id":4052621,"body_markdown":"**Generalization** \r\n\r\nUsing JAVA Interface we can achieve generalization across sub-class. The generalization means here sub-classes having same behavior implemented in a different way.\r\n\r\n**Standardization**\r\n\r\nInterface allows to set standardization for all the sub-classes which implements it. It specifies &quot;what&quot; the sub-classes must have but doesn&#39;t enforce how it should have.\r\n\r\n**100 % Abstraction**\r\n\r\nInterface body provides 100% abstraction, so that the sub-class should not miss any implementation of abstract method. This isn&#39;t possible if we use abstract classes.\r\n\r\n**De-Coupling(Loose Coupling)**\r\n\r\nWhile developing an application, the code which interacts with end users can be loosely coupled to the code running on the server[B L C] by using interfaces.\r\n\r\n**Multiple Inheritance**\r\n\r\nUsing interfaces we can achieve MI which is not possible using classes. \r\n\r\n","title":"The purpose of interfaces continued","body":"<p><strong>Generalization</strong> </p>\n\n<p>Using JAVA Interface we can achieve generalization across sub-class. The generalization means here sub-classes having same behavior implemented in a different way.</p>\n\n<p><strong>Standardization</strong></p>\n\n<p>Interface allows to set standardization for all the sub-classes which implements it. It specifies \"what\" the sub-classes must have but doesn't enforce how it should have.</p>\n\n<p><strong>100 % Abstraction</strong></p>\n\n<p>Interface body provides 100% abstraction, so that the sub-class should not miss any implementation of abstract method. This isn't possible if we use abstract classes.</p>\n\n<p><strong>De-Coupling(Loose Coupling)</strong></p>\n\n<p>While developing an application, the code which interacts with end users can be loosely coupled to the code running on the server[B L C] by using interfaces.</p>\n\n<p><strong>Multiple Inheritance</strong></p>\n\n<p>Using interfaces we can achieve MI which is not possible using classes. </p>\n"}],"owner":{"account_id":176226,"reputation":1855,"user_id":406777,"accept_rate":85,"display_name":"Julio"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17553,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":4052821,"answer_count":13,"score":8,"last_activity_date":1651565405,"creation_date":1288361411,"question_id":4052621,"body_markdown":"OK so I gather that Interfaces are a way to enforce that an object implements a certain amount of functionality, without having to use inheritance. Kind of like a contract. And I semi see the point of them.\r\n\r\nBut if all you have in the interface is:    \r\n\r\n     public interface animal{\r\n      void eat(object food);\r\n    }\r\n\r\nand it has no implementation as such, then whoever uses your interface has to write it from scratch, every time.\r\n\r\nIf you are creating a number of classes all implementing such features and the implementation is only slightly different, this is going to be a lot of hard work.\r\n\r\nAny help to get my head around this is appreciated because I know it&#39;s really important.\r\n\r\n","title":"The purpose of interfaces continued","body":"<p>OK so I gather that Interfaces are a way to enforce that an object implements a certain amount of functionality, without having to use inheritance. Kind of like a contract. And I semi see the point of them.</p>\n\n<p>But if all you have in the interface is:    </p>\n\n<pre><code> public interface animal{\n  void eat(object food);\n}\n</code></pre>\n\n<p>and it has no implementation as such, then whoever uses your interface has to write it from scratch, every time.</p>\n\n<p>If you are creating a number of classes all implementing such features and the implementation is only slightly different, this is going to be a lot of hard work.</p>\n\n<p>Any help to get my head around this is appreciated because I know it's really important.</p>\n"},{"tags":["java","kotlin","influxdb","ninjaframework"],"answers":[{"tags":[],"owner":{"account_id":4634809,"reputation":549,"user_id":3756347,"display_name":"Nirmal"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1529572289,"creation_date":1529572289,"answer_id":50964716,"question_id":50922473,"body_markdown":"I changed the default timeout of OKHttpClient and the exceptions were not thrown within the particular duration. Missed it earlier as I had passed a different instance of DB.\r\n\r\n    val client = OkHttpClient.Builder()\r\n                    .connectTimeout(1, TimeUnit.MINUTES)\r\n                    .readTimeout(1, TimeUnit.MINUTES)\r\n                    .writeTimeout(1, TimeUnit.MINUTES)\r\n                    .retryOnConnectionFailure(true)\r\n    val influxConnection = InfluxDBFactory.connect(&quot;http://localhost:8086&quot;, client)","title":"InfluxDBIOException: java.net.SocketTimeoutException: timeout","body":"<p>I changed the default timeout of OKHttpClient and the exceptions were not thrown within the particular duration. Missed it earlier as I had passed a different instance of DB.</p>\n\n<pre><code>val client = OkHttpClient.Builder()\n                .connectTimeout(1, TimeUnit.MINUTES)\n                .readTimeout(1, TimeUnit.MINUTES)\n                .writeTimeout(1, TimeUnit.MINUTES)\n                .retryOnConnectionFailure(true)\nval influxConnection = InfluxDBFactory.connect(\"http://localhost:8086\", client)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7501711,"reputation":709,"user_id":5699784,"display_name":"Kai"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1548897375,"creation_date":1548897375,"answer_id":54452002,"question_id":50922473,"body_markdown":"I translate @Nirmal &#39;s answer to java\r\n\r\n       OkHttpClient.Builder client = new OkHttpClient.Builder()\r\n                .connectTimeout(1, TimeUnit.MINUTES)\r\n                .readTimeout(1, TimeUnit.MINUTES)\r\n                .writeTimeout(1, TimeUnit.MINUTES)\r\n                .retryOnConnectionFailure(true);\r\n       InfluxDB influxdb = InfluxDBFactory.connect(influxUrl, client);","title":"InfluxDBIOException: java.net.SocketTimeoutException: timeout","body":"<p>I translate @Nirmal 's answer to java</p>\n\n<pre><code>   OkHttpClient.Builder client = new OkHttpClient.Builder()\n            .connectTimeout(1, TimeUnit.MINUTES)\n            .readTimeout(1, TimeUnit.MINUTES)\n            .writeTimeout(1, TimeUnit.MINUTES)\n            .retryOnConnectionFailure(true);\n   InfluxDB influxdb = InfluxDBFactory.connect(influxUrl, client);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":191505,"reputation":7321,"user_id":432115,"accept_rate":64,"display_name":"niels"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651565382,"creation_date":1651565382,"answer_id":72096471,"question_id":50922473,"body_markdown":"A simpler approach with newer clients (I testet 6.0):\r\nYou can add to the url `?readTimeout=1m&amp;connectTimeout=1m&amp;writeTimeout=30s`\r\nThe default is 10s. See JavaDoc of `com.influxdb.client.InfluxDBClientFactory#create(java.lang.String, char[], java.lang.String)`","title":"InfluxDBIOException: java.net.SocketTimeoutException: timeout","body":"<p>A simpler approach with newer clients (I testet 6.0):\nYou can add to the url <code>?readTimeout=1m&amp;connectTimeout=1m&amp;writeTimeout=30s</code>\nThe default is 10s. See JavaDoc of <code>com.influxdb.client.InfluxDBClientFactory#create(java.lang.String, char[], java.lang.String)</code></p>\n"}],"owner":{"account_id":4634809,"reputation":549,"user_id":3756347,"display_name":"Nirmal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5405,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":50964716,"answer_count":3,"score":1,"last_activity_date":1651565382,"creation_date":1529392070,"question_id":50922473,"body_markdown":"I&#39;m using Influx Db java wrapper and adding data in influx db for every 5 seconds with a retention policy of 30 days.\r\n\r\nWhen I&#39;m trying to query the data by sending multiple requests, the timeout exception is seen. \r\nOnce I clear the db data , the response is received properly.\r\n\r\n    org.influxdb.InfluxDBIOException: java.net.SocketTimeoutException: timeout\r\n    \tat org.influxdb.impl.InfluxDBImpl.execute(InfluxDBImpl.java:587)\r\n    \tat org.influxdb.impl.InfluxDBImpl.query(InfluxDBImpl.java:425)\r\n    \t**at services.SampleService.getTotalCount(SampleService.kt:45)**\r\n    \tat sun.reflect.GeneratedMethodAccessor83.invoke(Unknown Source)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \tat ninja.params.ControllerMethodInvoker.invoke(ControllerMethodInvoker.java:76)\r\n    \tat ninja.FilterChainEnd.next(FilterChainEnd.java:45)\r\n    \tat filters.PermissionFilter.filter(PermissionFilter.kt:30)\r\n    \tat ninja.FilterChainImpl.next(FilterChainImpl.java:36)\r\n    \tat filters.JwtFilter.filter(JwtFilter.kt:40)\r\n    \tat ninja.FilterChainImpl.next(FilterChainImpl.java:36)\r\n    \tat filters.CorsFilter.filter(CorsFilter.kt:10)\r\n    \tat ninja.FilterChainImpl.next(FilterChainImpl.java:36)\r\n    \tat ninja.NinjaDefault.onRouteRequest(NinjaDefault.java:102)\r\n    \tat ninja.servlet.NinjaServletDispatcher.service(NinjaServletDispatcher.java:86)\r\n    \tat com.google.inject.servlet.ServletDefinition.doServiceImpl(ServletDefinition.java:286)\r\n    \tat com.google.inject.servlet.ServletDefinition.doService(ServletDefinition.java:276)\r\n    \tat com.google.inject.servlet.ServletDefinition.service(ServletDefinition.java:181)\r\n    \tat com.google.inject.servlet.ManagedServletPipeline.service(ManagedServletPipeline.java:91)\r\n    \tat com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:85)\r\n    \tat com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:120)\r\n    \tat com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:135)\r\n    \tat ninja.servlet.NinjaServletFilter.doFilter(NinjaServletFilter.java:106)\r\n    \tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1759)\r\n    \tat org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:582)\r\n    \tat org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1180)\r\n    \tat org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:512)\r\n    \tat org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1112)\r\n    \tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\r\n    \tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:134)\r\n    \tat org.eclipse.jetty.server.Server.handle(Server.java:534)\r\n    \tat org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:320)\r\n    \tat org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:251)\r\n    \tat org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:283)\r\n    \tat org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:110)\r\n    \tat org.eclipse.jetty.io.SelectChannelEndPoint$2.run(SelectChannelEndPoint.java:93)\r\n    \tat org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.executeProduceConsume(ExecuteProduceConsume.java:303)\r\n    \tat org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceConsume(ExecuteProduceConsume.java:148)\r\n    \tat org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:136)\r\n    \tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:671)\r\n    \tat org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:589)\r\n    \tat java.lang.Thread.run(Thread.java:748)\r\n    Caused by: java.net.SocketTimeoutException: timeout\r\n    \tat okio.Okio$4.newTimeoutException(Okio.java:232)\r\n    \tat okio.AsyncTimeout.exit(AsyncTimeout.java:285)\r\n    \tat okio.AsyncTimeout$2.read(AsyncTimeout.java:241)\r\n    \tat okio.RealBufferedSource.request(RealBufferedSource.java:68)\r\n    \tat okio.RealBufferedSource.require(RealBufferedSource.java:61)\r\n    \tat okio.RealBufferedSource.readHexadecimalUnsignedLong(RealBufferedSource.java:304)\r\n    \tat okhttp3.internal.http.Http1xStream$ChunkedSource.readChunkSize(Http1xStream.java:441)\r\n    \tat okhttp3.internal.http.Http1xStream$ChunkedSource.read(Http1xStream.java:422)\r\n    \tat okio.RealBufferedSource.read(RealBufferedSource.java:47)\r\n    \tat okio.RealBufferedSource.request(RealBufferedSource.java:68)\r\n    \tat okio.RealBufferedSource.require(RealBufferedSource.java:61)\r\n    \tat okio.GzipSource.consumeHeader(GzipSource.java:114)\r\n    \tat okio.GzipSource.read(GzipSource.java:73)\r\n    \tat okio.RealBufferedSource.read(RealBufferedSource.java:47)\r\n    \tat okio.ForwardingSource.read(ForwardingSource.java:35)\r\n    \tat retrofit2.OkHttpCall$ExceptionCatchingRequestBody$1.read(OkHttpCall.java:279)\r\n    \tat okio.RealBufferedSource.request(RealBufferedSource.java:68)\r\n    \tat okio.RealBufferedSource.rangeEquals(RealBufferedSource.java:418)\r\n    \tat okio.RealBufferedSource.rangeEquals(RealBufferedSource.java:402)\r\n    \tat retrofit2.converter.moshi.MoshiResponseBodyConverter.convert(MoshiResponseBodyConverter.java:39)\r\n    \tat retrofit2.converter.moshi.MoshiResponseBodyConverter.convert(MoshiResponseBodyConverter.java:25)\r\n    \tat retrofit2.ServiceMethod.toResponse(ServiceMethod.java:117)\r\n    \tat retrofit2.OkHttpCall.parseResponse(OkHttpCall.java:211)\r\n    \tat retrofit2.OkHttpCall.execute(OkHttpCall.java:174)\r\n    \tat org.influxdb.impl.InfluxDBImpl.execute(InfluxDBImpl.java:579)\r\n    \t... 46 more\r\n    Caused by: java.net.SocketException: Socket closed\r\n    \tat java.net.SocketInputStream.read(SocketInputStream.java:204)\r\n    \tat java.net.SocketInputStream.read(SocketInputStream.java:141)\r\n    \tat okio.Okio$2.read(Okio.java:140)\r\n    \tat okio.AsyncTimeout$2.read(AsyncTimeout.java:237)\r\n\r\nThe exception cause points to this line\r\n`val results = influxDB.query(q)`\r\n\r\n    val q = Query(\r\n                &quot;select sum(firstCount) as totalFirstCount, sum(secondCount) as totalSecondCount&quot; +\r\n                    &quot; ,sum(thirdCount) as totalThirdCount, sum(fourthCount) as totalFourthCount &quot; +\r\n                    &quot;from counters where time &gt; now() - &quot;1h&quot; group by field1 , field2&quot;,\r\n                &quot;dbname&quot;)\r\n\r\nAll the field values are of Long Type and have values like 2721976000.\r\n\r\nBelow is response from explain statement of the above query.\r\n\r\n    EXPRESSION: sum(firstCount::integer)\r\n    NUMBER OF SHARDS: 123\r\n    NUMBER OF SERIES: 26568\r\n    CACHED VALUES: 105408\r\n    NUMBER OF FILES: 16200\r\n    NUMBER OF BLOCKS: 16200\r\n    SIZE OF BLOCKS: 76693173\r\n\r\n    EXPRESSION: sum(secondCount::integer)\r\n    NUMBER OF SHARDS: 123\r\n    NUMBER OF SERIES: 26568\r\n    CACHED VALUES: 105408\r\n    NUMBER OF FILES: 16200\r\n    NUMBER OF BLOCKS: 16200\r\n    SIZE OF BLOCKS: 86133364\r\n\r\n    EXPRESSION: sum(thirdCount::integer)\r\n    NUMBER OF SHARDS: 123\r\n    NUMBER OF SERIES: 26568\r\n    CACHED VALUES: 105408\r\n    NUMBER OF FILES: 16200\r\n    NUMBER OF BLOCKS: 16200\r\n    SIZE OF BLOCKS: 61967770\r\n\r\n    EXPRESSION: sum(fourthCount::integer)\r\n    NUMBER OF SHARDS: 123\r\n    NUMBER OF SERIES: 26568\r\n    CACHED VALUES: 105408\r\n    NUMBER OF FILES: 16200\r\n    NUMBER OF BLOCKS: 16200\r\n    SIZE OF BLOCKS: 61967754\r\n\r\nI could not find the solution to solve the exception , in the java console logs the response is received properly. Any pointers whether to look at query optimization or cause of exception would be helpful.\r\n\r\n","title":"InfluxDBIOException: java.net.SocketTimeoutException: timeout","body":"<p>I'm using Influx Db java wrapper and adding data in influx db for every 5 seconds with a retention policy of 30 days.</p>\n\n<p>When I'm trying to query the data by sending multiple requests, the timeout exception is seen. \nOnce I clear the db data , the response is received properly.</p>\n\n<pre><code>org.influxdb.InfluxDBIOException: java.net.SocketTimeoutException: timeout\n    at org.influxdb.impl.InfluxDBImpl.execute(InfluxDBImpl.java:587)\n    at org.influxdb.impl.InfluxDBImpl.query(InfluxDBImpl.java:425)\n    **at services.SampleService.getTotalCount(SampleService.kt:45)**\n    at sun.reflect.GeneratedMethodAccessor83.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at ninja.params.ControllerMethodInvoker.invoke(ControllerMethodInvoker.java:76)\n    at ninja.FilterChainEnd.next(FilterChainEnd.java:45)\n    at filters.PermissionFilter.filter(PermissionFilter.kt:30)\n    at ninja.FilterChainImpl.next(FilterChainImpl.java:36)\n    at filters.JwtFilter.filter(JwtFilter.kt:40)\n    at ninja.FilterChainImpl.next(FilterChainImpl.java:36)\n    at filters.CorsFilter.filter(CorsFilter.kt:10)\n    at ninja.FilterChainImpl.next(FilterChainImpl.java:36)\n    at ninja.NinjaDefault.onRouteRequest(NinjaDefault.java:102)\n    at ninja.servlet.NinjaServletDispatcher.service(NinjaServletDispatcher.java:86)\n    at com.google.inject.servlet.ServletDefinition.doServiceImpl(ServletDefinition.java:286)\n    at com.google.inject.servlet.ServletDefinition.doService(ServletDefinition.java:276)\n    at com.google.inject.servlet.ServletDefinition.service(ServletDefinition.java:181)\n    at com.google.inject.servlet.ManagedServletPipeline.service(ManagedServletPipeline.java:91)\n    at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:85)\n    at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:120)\n    at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:135)\n    at ninja.servlet.NinjaServletFilter.doFilter(NinjaServletFilter.java:106)\n    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1759)\n    at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:582)\n    at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1180)\n    at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:512)\n    at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1112)\n    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\n    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:134)\n    at org.eclipse.jetty.server.Server.handle(Server.java:534)\n    at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:320)\n    at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:251)\n    at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:283)\n    at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:110)\n    at org.eclipse.jetty.io.SelectChannelEndPoint$2.run(SelectChannelEndPoint.java:93)\n    at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.executeProduceConsume(ExecuteProduceConsume.java:303)\n    at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceConsume(ExecuteProduceConsume.java:148)\n    at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:136)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:671)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:589)\n    at java.lang.Thread.run(Thread.java:748)\nCaused by: java.net.SocketTimeoutException: timeout\n    at okio.Okio$4.newTimeoutException(Okio.java:232)\n    at okio.AsyncTimeout.exit(AsyncTimeout.java:285)\n    at okio.AsyncTimeout$2.read(AsyncTimeout.java:241)\n    at okio.RealBufferedSource.request(RealBufferedSource.java:68)\n    at okio.RealBufferedSource.require(RealBufferedSource.java:61)\n    at okio.RealBufferedSource.readHexadecimalUnsignedLong(RealBufferedSource.java:304)\n    at okhttp3.internal.http.Http1xStream$ChunkedSource.readChunkSize(Http1xStream.java:441)\n    at okhttp3.internal.http.Http1xStream$ChunkedSource.read(Http1xStream.java:422)\n    at okio.RealBufferedSource.read(RealBufferedSource.java:47)\n    at okio.RealBufferedSource.request(RealBufferedSource.java:68)\n    at okio.RealBufferedSource.require(RealBufferedSource.java:61)\n    at okio.GzipSource.consumeHeader(GzipSource.java:114)\n    at okio.GzipSource.read(GzipSource.java:73)\n    at okio.RealBufferedSource.read(RealBufferedSource.java:47)\n    at okio.ForwardingSource.read(ForwardingSource.java:35)\n    at retrofit2.OkHttpCall$ExceptionCatchingRequestBody$1.read(OkHttpCall.java:279)\n    at okio.RealBufferedSource.request(RealBufferedSource.java:68)\n    at okio.RealBufferedSource.rangeEquals(RealBufferedSource.java:418)\n    at okio.RealBufferedSource.rangeEquals(RealBufferedSource.java:402)\n    at retrofit2.converter.moshi.MoshiResponseBodyConverter.convert(MoshiResponseBodyConverter.java:39)\n    at retrofit2.converter.moshi.MoshiResponseBodyConverter.convert(MoshiResponseBodyConverter.java:25)\n    at retrofit2.ServiceMethod.toResponse(ServiceMethod.java:117)\n    at retrofit2.OkHttpCall.parseResponse(OkHttpCall.java:211)\n    at retrofit2.OkHttpCall.execute(OkHttpCall.java:174)\n    at org.influxdb.impl.InfluxDBImpl.execute(InfluxDBImpl.java:579)\n    ... 46 more\nCaused by: java.net.SocketException: Socket closed\n    at java.net.SocketInputStream.read(SocketInputStream.java:204)\n    at java.net.SocketInputStream.read(SocketInputStream.java:141)\n    at okio.Okio$2.read(Okio.java:140)\n    at okio.AsyncTimeout$2.read(AsyncTimeout.java:237)\n</code></pre>\n\n<p>The exception cause points to this line\n<code>val results = influxDB.query(q)</code></p>\n\n<pre><code>val q = Query(\n            \"select sum(firstCount) as totalFirstCount, sum(secondCount) as totalSecondCount\" +\n                \" ,sum(thirdCount) as totalThirdCount, sum(fourthCount) as totalFourthCount \" +\n                \"from counters where time &gt; now() - \"1h\" group by field1 , field2\",\n            \"dbname\")\n</code></pre>\n\n<p>All the field values are of Long Type and have values like 2721976000.</p>\n\n<p>Below is response from explain statement of the above query.</p>\n\n<pre><code>EXPRESSION: sum(firstCount::integer)\nNUMBER OF SHARDS: 123\nNUMBER OF SERIES: 26568\nCACHED VALUES: 105408\nNUMBER OF FILES: 16200\nNUMBER OF BLOCKS: 16200\nSIZE OF BLOCKS: 76693173\n\nEXPRESSION: sum(secondCount::integer)\nNUMBER OF SHARDS: 123\nNUMBER OF SERIES: 26568\nCACHED VALUES: 105408\nNUMBER OF FILES: 16200\nNUMBER OF BLOCKS: 16200\nSIZE OF BLOCKS: 86133364\n\nEXPRESSION: sum(thirdCount::integer)\nNUMBER OF SHARDS: 123\nNUMBER OF SERIES: 26568\nCACHED VALUES: 105408\nNUMBER OF FILES: 16200\nNUMBER OF BLOCKS: 16200\nSIZE OF BLOCKS: 61967770\n\nEXPRESSION: sum(fourthCount::integer)\nNUMBER OF SHARDS: 123\nNUMBER OF SERIES: 26568\nCACHED VALUES: 105408\nNUMBER OF FILES: 16200\nNUMBER OF BLOCKS: 16200\nSIZE OF BLOCKS: 61967754\n</code></pre>\n\n<p>I could not find the solution to solve the exception , in the java console logs the response is received properly. Any pointers whether to look at query optimization or cause of exception would be helpful.</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":9843267,"reputation":1142,"user_id":7291660,"display_name":"A. Llorente"},"score":0,"creation_date":1651563589,"post_id":72096142,"comment_id":127387321,"body_markdown":"At what area did you add the annotation? You have to add it to `@Bean public class JwtUtils`. Spring cannot find any JwtUtils in the dependency container because probably there is none","body":"At what area did you add the annotation? You have to add it to <code>@Bean public class JwtUtils</code>. Spring cannot find any JwtUtils in the dependency container because probably there is none"},{"owner":{"account_id":20020131,"reputation":27,"user_id":14675264,"display_name":"narashimhaa kannan"},"score":0,"creation_date":1651588398,"post_id":72096142,"comment_id":127395689,"body_markdown":"I did add there,  It say&#39;s &quot;It is disallowed for this location&quot;","body":"I did add there,  It say&#39;s &quot;It is disallowed for this location&quot;"}],"answers":[{"tags":[],"owner":{"account_id":1979094,"reputation":3912,"user_id":1776132,"display_name":"Smile"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1651563654,"creation_date":1651563654,"answer_id":72096177,"question_id":72096142,"body_markdown":"Add `@Component` annotation to `JwtUtils` so that Spring creates its bean at runtime which can be injected in `JwtFilterRequest`.","title":"How to solve the @Bean required error while implementing JWT token","body":"<p>Add <code>@Component</code> annotation to <code>JwtUtils</code> so that Spring creates its bean at runtime which can be injected in <code>JwtFilterRequest</code>.</p>\n"},{"tags":[],"owner":{"account_id":6475519,"reputation":4496,"user_id":5014221,"accept_rate":71,"display_name":"Ashish Patil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651565104,"creation_date":1651565104,"answer_id":72096428,"question_id":72096142,"body_markdown":"If you have any existing class which is annotated with `@Configuration` then you can define `@Bean` in that class :\r\n\r\n    import com.example.demo.utils.JwtUtils;\r\n    ..\r\n    @Configuration\r\n    public class Config{\r\n    .. // other configs\r\n    @Bean\r\n    public JwtUtils jwtUtils(){\r\n    return new JwtUtils();\r\n    }\r\n    \r\n    }\r\n\r\n","title":"How to solve the @Bean required error while implementing JWT token","body":"<p>If you have any existing class which is annotated with <code>@Configuration</code> then you can define <code>@Bean</code> in that class :</p>\n<pre><code>import com.example.demo.utils.JwtUtils;\n..\n@Configuration\npublic class Config{\n.. // other configs\n@Bean\npublic JwtUtils jwtUtils(){\nreturn new JwtUtils();\n}\n\n}\n</code></pre>\n"}],"owner":{"account_id":20020131,"reputation":27,"user_id":14675264,"display_name":"narashimhaa kannan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1211,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72096177,"answer_count":2,"score":0,"last_activity_date":1651565104,"creation_date":1651563425,"question_id":72096142,"body_markdown":"I am trying to do an authentication web API using spring boot. I have used spring security and JWT token methods to build this API. But at some Extent I get this error:\r\n\r\n    Field jwtUtils in com.example.demo.services.JwtFilterRequest required a bean of type &#39;com.example.demo.utils.JwtUtils&#39; that could not be found.\r\n    \r\n    The injection point has the following annotations:\r\n    \t- @org.springframework.beans.factory.annotation.Autowired(required=true)\r\n    \r\n    \r\n    Action:\r\n    \r\n    Consider defining a bean of type &#39;com.example.demo.utils.JwtUtils&#39; in your configuration.\r\n\r\n\r\nHere is my `JwtFilterRequest` file:\r\n\r\n    package com.example.demo.services;\r\n    \r\n    import java.io.IOException;\r\n    \r\n    import javax.servlet.FilterChain;\r\n    import javax.servlet.ServletException;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletResponse;\r\n    \r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\r\n    import org.springframework.security.core.context.SecurityContextHolder;\r\n    import org.springframework.security.core.userdetails.UserDetails;\r\n    import org.springframework.security.web.authentication.WebAuthenticationDetailsSource;\r\n    import org.springframework.stereotype.Component;\r\n    import org.springframework.web.filter.OncePerRequestFilter;\r\n    \r\n    import com.example.demo.utils.JwtUtils;\r\n    \r\n    @Component\r\n    public class JwtFilterRequest extends OncePerRequestFilter {\r\n    \t\r\n    \t@Autowired\r\n    \tprivate JwtUtils jwtUtils;\r\n    \t\r\n    \t@Autowired\r\n    \tprivate UserService userService;\r\n    \r\n    \t@Override\r\n    \tprotected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\r\n    \t\t\tthrows ServletException, IOException {\r\n    \t\tString authorizationHeader=request.getHeader(&quot;Authorization&quot;);\r\n    \t\tString username=null;\r\n    \t\tString jwtToken=null;\r\n    \t\tif(authorizationHeader != null &amp;&amp; authorizationHeader.startsWith(&quot;Bearer&quot;)) {\r\n    \t\t\tjwtToken = authorizationHeader.substring(7);\r\n    \t\t\tusername=jwtUtils.extractUsername(jwtToken);\r\n    \t\t}\r\n    \t\tif(username != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication()==null) {\r\n    \t\t\tUserDetails currentUserDetails=userService.loadUserByUsername(username);\r\n    \t\t\tBoolean tokenValidated=jwtUtils.validateToken( jwtToken,currentUserDetails);\r\n    \t\t\tif(tokenValidated) {\r\n    \t\t\t\t UsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken=new UsernamePasswordAuthenticationToken (currentUserDetails,null);\r\n    \t\t\t\t usernamePasswordAuthenticationToken.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\r\n    \t\t\t\t SecurityContextHolder.getContext().setAuthentication(usernamePasswordAuthenticationToken);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tfilterChain.doFilter(request, response);\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\nHere is my `JwtUtils` file:\r\n\r\n    package com.example.demo.utils;\r\n    \r\n    import java.util.Date;\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    \r\n    import org.springframework.security.core.userdetails.UserDetails;\r\n    \r\n    import com.mongodb.Function;\r\n    \r\n    import io.jsonwebtoken.Claims;\r\n    import io.jsonwebtoken.Jwts;\r\n    import io.jsonwebtoken.SignatureAlgorithm;\r\n    \r\n    public class JwtUtils {\r\n    \t\r\n    \tprivate static final String Secret_Key=&quot;dsfbhzksbnvrjaehglxkj&quot;;\r\n    \t\r\n    \tpublic String generateToken(UserDetails userdetails) {\r\n    \t\tMap&lt;String,Object&gt;claims=new HashMap&lt;&gt;();\r\n    \t\treturn createToken(claims,userdetails.getUsername());\r\n    \t}\r\n    \t\r\n    \tpublic Boolean validateToken(String token, UserDetails userdetails) {\r\n    \t\tString userName=extractUsername(token);\r\n    \t\treturn userName.equals(userdetails.getUsername()) &amp;&amp; !isTokenExpired(token);\r\n    \t\t\r\n    \t}\r\n    \t\r\n    \tprivate String createToken(Map&lt;String, Object&gt;claims,String subject) {\r\n    \t\t\r\n    \t\tDate now=new Date(System.currentTimeMillis());\r\n    \t\tDate util=new Date(System.currentTimeMillis()+1000*60*60*10);\r\n    \t\treturn Jwts.builder().setClaims(claims).setSubject(subject).setIssuedAt(now).setExpiration(util).signWith(SignatureAlgorithm.HS256, Secret_Key).compact() ;\r\n    \t\t\r\n    \t}\r\n    \tpublic &lt;T&gt; T extractClaim(String token, Function &lt;Claims,T&gt; claimsResolver) {\r\n    \t\tfinal Claims claims = extractAllClaims(token);\r\n    \t\treturn claimsResolver.apply(claims);\r\n    \t}\r\n    \tprivate Claims extractAllClaims(String token) {\r\n    \t\treturn Jwts.parser().setSigningKey(Secret_Key).parseClaimsJws(token).getBody();\r\n    \t}\r\n    \tpublic String extractUsername(String token) {\r\n    \t\treturn extractClaim(token,Claims::getSubject);\r\n    \t}\r\n    \tpublic Date extractExpiration (String token) {\r\n    \t\treturn extractClaim(token,Claims::getExpiration);\t\t\r\n    \t}\r\n    \t\r\n    \tpublic Boolean isTokenExpired(String token) {\r\n    \t\treturn extractExpiration(token).before(new Date());\r\n    \t}\r\n    \t\r\n    \r\n    }\r\n\r\n\r\nI tried adding `@Bean` annotation at the area and it throwed an error again that it is not allowed there.\r\n\r\n\r\n\r\n\r\n\r\n","title":"How to solve the @Bean required error while implementing JWT token","body":"<p>I am trying to do an authentication web API using spring boot. I have used spring security and JWT token methods to build this API. But at some Extent I get this error:</p>\n<pre><code>Field jwtUtils in com.example.demo.services.JwtFilterRequest required a bean of type 'com.example.demo.utils.JwtUtils' that could not be found.\n\nThe injection point has the following annotations:\n    - @org.springframework.beans.factory.annotation.Autowired(required=true)\n\n\nAction:\n\nConsider defining a bean of type 'com.example.demo.utils.JwtUtils' in your configuration.\n</code></pre>\n<p>Here is my <code>JwtFilterRequest</code> file:</p>\n<pre><code>package com.example.demo.services;\n\nimport java.io.IOException;\n\nimport javax.servlet.FilterChain;\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\nimport org.springframework.security.core.context.SecurityContextHolder;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.web.authentication.WebAuthenticationDetailsSource;\nimport org.springframework.stereotype.Component;\nimport org.springframework.web.filter.OncePerRequestFilter;\n\nimport com.example.demo.utils.JwtUtils;\n\n@Component\npublic class JwtFilterRequest extends OncePerRequestFilter {\n    \n    @Autowired\n    private JwtUtils jwtUtils;\n    \n    @Autowired\n    private UserService userService;\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\n            throws ServletException, IOException {\n        String authorizationHeader=request.getHeader(&quot;Authorization&quot;);\n        String username=null;\n        String jwtToken=null;\n        if(authorizationHeader != null &amp;&amp; authorizationHeader.startsWith(&quot;Bearer&quot;)) {\n            jwtToken = authorizationHeader.substring(7);\n            username=jwtUtils.extractUsername(jwtToken);\n        }\n        if(username != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication()==null) {\n            UserDetails currentUserDetails=userService.loadUserByUsername(username);\n            Boolean tokenValidated=jwtUtils.validateToken( jwtToken,currentUserDetails);\n            if(tokenValidated) {\n                 UsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken=new UsernamePasswordAuthenticationToken (currentUserDetails,null);\n                 usernamePasswordAuthenticationToken.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n                 SecurityContextHolder.getContext().setAuthentication(usernamePasswordAuthenticationToken);\n            }\n        }\n        filterChain.doFilter(request, response);\n    }\n\n}\n</code></pre>\n<p>Here is my <code>JwtUtils</code> file:</p>\n<pre><code>package com.example.demo.utils;\n\nimport java.util.Date;\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport org.springframework.security.core.userdetails.UserDetails;\n\nimport com.mongodb.Function;\n\nimport io.jsonwebtoken.Claims;\nimport io.jsonwebtoken.Jwts;\nimport io.jsonwebtoken.SignatureAlgorithm;\n\npublic class JwtUtils {\n    \n    private static final String Secret_Key=&quot;dsfbhzksbnvrjaehglxkj&quot;;\n    \n    public String generateToken(UserDetails userdetails) {\n        Map&lt;String,Object&gt;claims=new HashMap&lt;&gt;();\n        return createToken(claims,userdetails.getUsername());\n    }\n    \n    public Boolean validateToken(String token, UserDetails userdetails) {\n        String userName=extractUsername(token);\n        return userName.equals(userdetails.getUsername()) &amp;&amp; !isTokenExpired(token);\n        \n    }\n    \n    private String createToken(Map&lt;String, Object&gt;claims,String subject) {\n        \n        Date now=new Date(System.currentTimeMillis());\n        Date util=new Date(System.currentTimeMillis()+1000*60*60*10);\n        return Jwts.builder().setClaims(claims).setSubject(subject).setIssuedAt(now).setExpiration(util).signWith(SignatureAlgorithm.HS256, Secret_Key).compact() ;\n        \n    }\n    public &lt;T&gt; T extractClaim(String token, Function &lt;Claims,T&gt; claimsResolver) {\n        final Claims claims = extractAllClaims(token);\n        return claimsResolver.apply(claims);\n    }\n    private Claims extractAllClaims(String token) {\n        return Jwts.parser().setSigningKey(Secret_Key).parseClaimsJws(token).getBody();\n    }\n    public String extractUsername(String token) {\n        return extractClaim(token,Claims::getSubject);\n    }\n    public Date extractExpiration (String token) {\n        return extractClaim(token,Claims::getExpiration);       \n    }\n    \n    public Boolean isTokenExpired(String token) {\n        return extractExpiration(token).before(new Date());\n    }\n    \n\n}\n</code></pre>\n<p>I tried adding <code>@Bean</code> annotation at the area and it throwed an error again that it is not allowed there.</p>\n"},{"tags":["java","log4j2"],"answers":[{"tags":[],"owner":{"account_id":14027419,"reputation":36,"user_id":10132113,"display_name":"Maciej Piorun"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651483294,"creation_date":1651483294,"answer_id":72084709,"question_id":72084325,"body_markdown":"You can try to copy the current log file to some different file and try to zip the copied one.","title":"How to programmatically force rolling the log file with Log4j2?","body":"<p>You can try to copy the current log file to some different file and try to zip the copied one.</p>\n"}],"owner":{"account_id":5833253,"reputation":369,"user_id":4597128,"accept_rate":80,"display_name":"yogev levi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":142,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1651564534,"answer_count":1,"score":0,"last_activity_date":1651564627,"creation_date":1651481225,"question_id":72084325,"body_markdown":"There is a situation in my program where I need to gather all the log files created until now, zip them all and save them. The problem is that the current log file can&#39;t be zipped because it&#39;s still open to writing.\r\n \r\nI think the best solution can be if I can roll the log file and then I can zip them all, but I can&#39;t figure out how to do it. Is this even possible?","title":"How to programmatically force rolling the log file with Log4j2?","body":"<p>There is a situation in my program where I need to gather all the log files created until now, zip them all and save them. The problem is that the current log file can't be zipped because it's still open to writing.</p>\n<p>I think the best solution can be if I can roll the log file and then I can zip them all, but I can't figure out how to do it. Is this even possible?</p>\n"},{"tags":["java","tomcat","logging","configuration","log4j2"],"comments":[{"owner":{"account_id":435063,"reputation":4304,"user_id":821436,"accept_rate":79,"display_name":"Martin Schr&#246;der"},"score":0,"creation_date":1508316006,"post_id":38763578,"comment_id":80558999,"body_markdown":"See also https://stackoverflow.com/q/22975094/821436","body":"See also <a href=\"https://stackoverflow.com/q/22975094/821436\">stackoverflow.com/q/22975094/821436</a>"}],"answers":[{"tags":[],"owner":{"account_id":1555751,"reputation":35615,"user_id":1446916,"display_name":"Remko Popma"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1470440408,"creation_date":1470440408,"answer_id":38799138,"question_id":38763578,"body_markdown":"In your log4j2.xml configuration, I assume you have configured a RollingFileAppender. The log4j 2 [RollingFileAppender manual page][1] offers more detail, but you can control when the log file rolls over with the &quot;triggering policy&quot;. The TimeBasedTriggeringPolicy only fires when a new log event arrives. Based on your description I think this is what you have in your configuration. \n\nWhat you can use instead is the CronTriggeringPolicy, where you define a schedule at which the log file should be rolled over. The schedule is defined in a [cron expression][2]. \n\nOne note of caution: I&#39;ve seen a few bug reports against CronTriggeringPolicy for Log4j 2.6.2. If you experience any issues please use 2.6.1. \n\n\n  [1]: https://logging.apache.org/log4j/2.x/manual/appenders.html#RollingFileAppender\n  [2]: https://logging.apache.org/log4j/2.x/log4j-core/apidocs/org/apache/logging/log4j/core/util/CronExpression.html","title":"Force log rollover in tomcat log4j2 even if no traffic","body":"<p>In your log4j2.xml configuration, I assume you have configured a RollingFileAppender. The log4j 2 <a href=\"https://logging.apache.org/log4j/2.x/manual/appenders.html#RollingFileAppender\" rel=\"nofollow\">RollingFileAppender manual page</a> offers more detail, but you can control when the log file rolls over with the \"triggering policy\". The TimeBasedTriggeringPolicy only fires when a new log event arrives. Based on your description I think this is what you have in your configuration. </p>\n\n<p>What you can use instead is the CronTriggeringPolicy, where you define a schedule at which the log file should be rolled over. The schedule is defined in a <a href=\"https://logging.apache.org/log4j/2.x/log4j-core/apidocs/org/apache/logging/log4j/core/util/CronExpression.html\" rel=\"nofollow\">cron expression</a>. </p>\n\n<p>One note of caution: I've seen a few bug reports against CronTriggeringPolicy for Log4j 2.6.2. If you experience any issues please use 2.6.1. </p>\n"}],"owner":{"account_id":4105086,"reputation":378,"user_id":3369417,"accept_rate":36,"display_name":"user3369417"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":676,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1651564441,"creation_date":1470303037,"question_id":38763578,"body_markdown":"Is there an option in tomcat log4j2 to force the logs to roll over after a defined interval even though there is no traffic at the time of rollover.\r\n\r\nUsual behavior of log4j is, it will roll over the logs only if it gets the next subsequent traffic, in case it didn&#39;t get any traffic the logs will be stayed in there until new traffic arrives.\r\n\r\n","title":"Force log rollover in tomcat log4j2 even if no traffic","body":"<p>Is there an option in tomcat log4j2 to force the logs to roll over after a defined interval even though there is no traffic at the time of rollover.</p>\n<p>Usual behavior of log4j is, it will roll over the logs only if it gets the next subsequent traffic, in case it didn't get any traffic the logs will be stayed in there until new traffic arrives.</p>\n"},{"tags":["java","text-files"],"comments":[{"owner":{"account_id":2978820,"reputation":1757,"user_id":2529284,"display_name":"GiorgosDev"},"score":0,"creation_date":1651563303,"post_id":72096070,"comment_id":127387239,"body_markdown":"Typically you read file line by line till end of file. May be you could share code how you are reading the file, so that it would be possible to advice you an applicable approach in your case.","body":"Typically you read file line by line till end of file. May be you could share code how you are reading the file, so that it would be possible to advice you an applicable approach in your case."},{"owner":{"account_id":23261657,"reputation":13,"user_id":17347836,"display_name":"user123"},"score":0,"creation_date":1651563806,"post_id":72096070,"comment_id":127387375,"body_markdown":"@tresf Yes in a way it helps. Many Thanks!","body":"@tresf Yes in a way it helps. Many Thanks!"}],"answers":[{"tags":[],"owner":{"account_id":22072908,"reputation":13,"user_id":16333666,"display_name":"Alexey Surovenko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651563302,"creation_date":1651563302,"answer_id":72096127,"question_id":72096070,"body_markdown":"```\r\ntry (ReversedLinesFileReader reader = new ReversedLinesFileReader(new File(&quot;path/to/file.txt&quot;), StandardCharsets.UTF_8)) {\r\n    System.out.println(&quot;Last line is: &quot; + reader.readLine());\r\n} catch (IOException e) {\r\n    // ignore for now\r\n}\r\n```\r\n\r\nIt should work perfect","title":"Read last line of a text file using Java","body":"<pre><code>try (ReversedLinesFileReader reader = new ReversedLinesFileReader(new File(&quot;path/to/file.txt&quot;), StandardCharsets.UTF_8)) {\n    System.out.println(&quot;Last line is: &quot; + reader.readLine());\n} catch (IOException e) {\n    // ignore for now\n}\n</code></pre>\n<p>It should work perfect</p>\n"}],"owner":{"account_id":23261657,"reputation":13,"user_id":17347836,"display_name":"user123"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":417,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1651564081,"answer_count":1,"score":0,"last_activity_date":1651563302,"creation_date":1651562958,"question_id":72096070,"body_markdown":"I am fairly new to Java and I would like to ask how is it possible to get the last line of a text file using Java? For example, the contents of the text file would be something like:\r\n\r\n\r\n*001,abc,abc@yahoo.com,123456,President*\r\n\r\n*002,xxx,xxx@gmail.com,xxx,Member*\r\n\r\nWhat I am trying to get is the userID of the users (eg:001). I already know how to read from a text file normally, but what I need is the last line from the text file so that I can give users incrementing IDs. ","title":"Read last line of a text file using Java","body":"<p>I am fairly new to Java and I would like to ask how is it possible to get the last line of a text file using Java? For example, the contents of the text file would be something like:</p>\n<p><em>001,abc,abc@yahoo.com,123456,President</em></p>\n<p><em>002,xxx,xxx@gmail.com,xxx,Member</em></p>\n<p>What I am trying to get is the userID of the users (eg:001). I already know how to read from a text file normally, but what I need is the last line from the text file so that I can give users incrementing IDs.</p>\n"},{"tags":["java","string","sentence"],"comments":[{"owner":{"account_id":2238583,"reputation":31529,"user_id":1974224,"accept_rate":82,"display_name":"Cristik"},"score":0,"creation_date":1651552420,"post_id":71927319,"comment_id":127385084,"body_markdown":"Where did you get stuck?","body":"Where did you get stuck?"}],"answers":[{"tags":[],"owner":{"account_id":24924278,"reputation":1,"user_id":18792251,"display_name":"Calico Jack"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1650384727,"creation_date":1650384727,"answer_id":71928072,"question_id":71927319,"body_markdown":"Here: \r\n\r\n                for (int j = 0; j &lt; s.length(); j++){\r\n                    if (s.charAt(j) == s.charAt(j + 1)){\r\n                        System.out.println(s);\r\n                        count++;\r\n                        s = &quot; &quot;;\r\n                    }\r\n                }\r\n\r\nYou are looping through a string comparing the j index character with the j+1 index character. When j is the index of the last character j+1 will be out of range. If you want to do the comparation this way, you just have to go to the penultimate index (where you will compare the penultimate with the last).\r\n\r\nThis way the code should work: \r\n\r\n     public static void main(String[] args) {\r\n\r\n        Scanner sc = new Scanner(System.in);\r\n        System.out.println(&quot;Enter the sentence&quot;);\r\n        String str = sc.nextLine();\r\n        str = str.toUpperCase();\r\n        String s = &quot; &quot;;\r\n        int count = 0;\r\n        \r\n        for (int i = 0; i &lt; str.length(); i++) {\r\n            char ch = str.charAt(i);\r\n\r\n            if (ch != &#39; &#39;)\r\n                s = s + ch;\r\n            else {\r\n                for (int j = 0; j &lt; s.length()-1; j++) {\r\n                    if (s.charAt(j) == s.charAt(j + 1)) {\r\n                        System.out.println(s);\r\n                        count++;\r\n                    }\r\n                }\r\n                s = &quot; &quot;;\r\n            }\r\n        }\r\n        System.out.println(&quot;There are &quot; + count + &quot; consecutive words&quot;);\r\n    }\r\n\r\nAnd as you can see I have moved the s = &quot; &quot;; piece of code outside of the for and if block, leaving it just inside the else block. If you don&#39;t do that the string variable s will not be cleaned after each word.","title":"WAP to accept a string and print only the words having consecutive letters as same and number of occurrences","body":"<p>Here:</p>\n<pre><code>            for (int j = 0; j &lt; s.length(); j++){\n                if (s.charAt(j) == s.charAt(j + 1)){\n                    System.out.println(s);\n                    count++;\n                    s = &quot; &quot;;\n                }\n            }\n</code></pre>\n<p>You are looping through a string comparing the j index character with the j+1 index character. When j is the index of the last character j+1 will be out of range. If you want to do the comparation this way, you just have to go to the penultimate index (where you will compare the penultimate with the last).</p>\n<p>This way the code should work:</p>\n<pre><code> public static void main(String[] args) {\n\n    Scanner sc = new Scanner(System.in);\n    System.out.println(&quot;Enter the sentence&quot;);\n    String str = sc.nextLine();\n    str = str.toUpperCase();\n    String s = &quot; &quot;;\n    int count = 0;\n    \n    for (int i = 0; i &lt; str.length(); i++) {\n        char ch = str.charAt(i);\n\n        if (ch != ' ')\n            s = s + ch;\n        else {\n            for (int j = 0; j &lt; s.length()-1; j++) {\n                if (s.charAt(j) == s.charAt(j + 1)) {\n                    System.out.println(s);\n                    count++;\n                }\n            }\n            s = &quot; &quot;;\n        }\n    }\n    System.out.println(&quot;There are &quot; + count + &quot; consecutive words&quot;);\n}\n</code></pre>\n<p>And as you can see I have moved the s = &quot; &quot;; piece of code outside of the for and if block, leaving it just inside the else block. If you don't do that the string variable s will not be cleaned after each word.</p>\n"}],"owner":{"account_id":25005394,"reputation":1,"user_id":18865397,"display_name":"Kami Sama"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":299,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1651574148,"answer_count":1,"score":-1,"last_activity_date":1651562929,"creation_date":1650381339,"question_id":71927319,"body_markdown":"I was solving this question(the title) and I cant find the mistakes present so please help\r\n\r\n \r\n\r\n&gt; Input : The buffalo is stuck in a soggy field and roads are flooded\r\n&gt; everywhere.\r\n&gt; \r\n&gt; \r\n&gt; Output : buffalo, soggy, flooded\r\n&gt; \r\n&gt; \r\n&gt; There are  3 words that have consecutive letters.\r\n\r\n          \r\n\r\n\r\n```\r\npackage com.company;\r\nimport java.util.*;\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        Scanner sc = new Scanner(System.in);\r\n        System.out.println(&quot;Enter the sentence&quot;);\r\n        String str = sc.nextLine();\r\n        str = str.toUpperCase();\r\n        String s = &quot; &quot;;\r\n        int count = 0;\r\n        for (int i = 0; i &lt; str.length(); i++) {\r\n            char ch = str.charAt(i);\r\n\r\n            if (ch != &#39; &#39;)\r\n                s = s + ch;\r\n            else {\r\n                for (int j = 0; j &lt; s.length(); j++) {\r\n                    if (s.charAt(j) == s.charAt(j + 1)) {\r\n                        System.out.println(s);\r\n                        count++;\r\n                        s = &quot; &quot;;\r\n                    }\r\n\r\n                }\r\n            }\r\n        }\r\n        System.out.println(&quot;There are &quot; + count + &quot; consecutive words&quot;);\r\n    }\r\n}\r\n\r\n\r\n```\r\n\r\n**Output**\r\n```\r\nEnter the sentence\r\nI love apples\r\nException in thread &quot;main&quot; java.lang.StringIndexOutOfBoundsException: String index out of range: 2\r\n\tat java.base/java.lang.StringLatin1.charAt(StringLatin1.java:48)\r\n\tat java.base/java.lang.String.charAt(String.java:1512)\r\n\tat com.company.Main.main(Main.java:18)\r\n\r\nProcess finished with exit code 1\r\n```\r\nI tried solving it but it gets complicated as such","title":"WAP to accept a string and print only the words having consecutive letters as same and number of occurrences","body":"<p>I was solving this question(the title) and I cant find the mistakes present so please help</p>\n<blockquote>\n<p>Input : The buffalo is stuck in a soggy field and roads are flooded\neverywhere.</p>\n<p>Output : buffalo, soggy, flooded</p>\n<p>There are  3 words that have consecutive letters.</p>\n</blockquote>\n<pre><code>package com.company;\nimport java.util.*;\npublic class Main {\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        System.out.println(&quot;Enter the sentence&quot;);\n        String str = sc.nextLine();\n        str = str.toUpperCase();\n        String s = &quot; &quot;;\n        int count = 0;\n        for (int i = 0; i &lt; str.length(); i++) {\n            char ch = str.charAt(i);\n\n            if (ch != ' ')\n                s = s + ch;\n            else {\n                for (int j = 0; j &lt; s.length(); j++) {\n                    if (s.charAt(j) == s.charAt(j + 1)) {\n                        System.out.println(s);\n                        count++;\n                        s = &quot; &quot;;\n                    }\n\n                }\n            }\n        }\n        System.out.println(&quot;There are &quot; + count + &quot; consecutive words&quot;);\n    }\n}\n\n\n</code></pre>\n<p><strong>Output</strong></p>\n<pre><code>Enter the sentence\nI love apples\nException in thread &quot;main&quot; java.lang.StringIndexOutOfBoundsException: String index out of range: 2\n    at java.base/java.lang.StringLatin1.charAt(StringLatin1.java:48)\n    at java.base/java.lang.String.charAt(String.java:1512)\n    at com.company.Main.main(Main.java:18)\n\nProcess finished with exit code 1\n</code></pre>\n<p>I tried solving it but it gets complicated as such</p>\n"},{"tags":["java","jenkins","jenkins-api"],"answers":[{"tags":[],"owner":{"account_id":12003859,"reputation":831,"user_id":8782778,"display_name":"Meiswjn"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1651562599,"creation_date":1651562599,"answer_id":72096015,"question_id":72095842,"body_markdown":"REST does not persist any session information:\r\n\r\n&gt; Relevant session data is sent to the receiver by the client in such a way that every packet of information transferred can be understood in isolation, without context information from previous packets in the session.\r\n\r\nFrom https://en.wikipedia.org/wiki/Representational_state_transfer#Statelessness\r\n\r\nThat means, you must send the credentials with every call by design.\r\n\r\nYou can have a look at the Java API Client for Jenkins, but it uses the REST API under the hood as well I assume: https://github.com/jenkinsci/java-client-api","title":"How to call Jenkins REST API without passing credentials using Java in already logged-in Jenkins?","body":"<p>REST does not persist any session information:</p>\n<blockquote>\n<p>Relevant session data is sent to the receiver by the client in such a way that every packet of information transferred can be understood in isolation, without context information from previous packets in the session.</p>\n</blockquote>\n<p>From <a href=\"https://en.wikipedia.org/wiki/Representational_state_transfer#Statelessness\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Representational_state_transfer#Statelessness</a></p>\n<p>That means, you must send the credentials with every call by design.</p>\n<p>You can have a look at the Java API Client for Jenkins, but it uses the REST API under the hood as well I assume: <a href=\"https://github.com/jenkinsci/java-client-api\" rel=\"nofollow noreferrer\">https://github.com/jenkinsci/java-client-api</a></p>\n"}],"owner":{"account_id":11571021,"reputation":343,"user_id":8477797,"display_name":"Jayakumari Arumugham"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":350,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1651562599,"creation_date":1651561486,"question_id":72095842,"body_markdown":"I have used Jenkins REST API URL to get build status using Java (JAR). It is working successfully by passing user name and password to the API URL. I created a job in Jenkins and using that JAR file to get build status. But, my question is that why should the credential be passed again to API URL as I already logged-in in Jenkins to access the job? The API URL should be accessible without credentials. How to achieve the same?","title":"How to call Jenkins REST API without passing credentials using Java in already logged-in Jenkins?","body":"<p>I have used Jenkins REST API URL to get build status using Java (JAR). It is working successfully by passing user name and password to the API URL. I created a job in Jenkins and using that JAR file to get build status. But, my question is that why should the credential be passed again to API URL as I already logged-in in Jenkins to access the job? The API URL should be accessible without credentials. How to achieve the same?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1008660,"reputation":13673,"user_id":1021725,"accept_rate":75,"display_name":"David Brossard"},"score":0,"creation_date":1651526790,"post_id":72092532,"comment_id":127381477,"body_markdown":"Can you add the entire stack trace?","body":"Can you add the entire stack trace?"},{"owner":{"account_id":14482834,"reputation":3894,"user_id":10461625,"display_name":"PatPanda"},"score":0,"creation_date":1651531035,"post_id":72092532,"comment_id":127382317,"body_markdown":"I should have pasted it, edited, and thanks David for pointing that out","body":"I should have pasted it, edited, and thanks David for pointing that out"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1651556086,"post_id":72092532,"comment_id":127385616,"body_markdown":"If you don&#39;t want it secure why are you using SSL? NB It is not valid for `getAcceptedIssuers() to return null. Don&#39;t use this insecure code.","body":"If you don&#39;t want it secure why are you using SSL? NB It is not valid for `getAcceptedIssuers() to return null. Don&#39;t use this insecure code."}],"answers":[{"tags":[],"owner":{"account_id":1008660,"reputation":13673,"user_id":1021725,"accept_rate":75,"display_name":"David Brossard"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651550581,"creation_date":1651550581,"answer_id":72094710,"question_id":72092532,"body_markdown":"Based on the stack trace, if you want to avoid the check, you need to implement your own instance of `X509TrustManager` i.e. what `X509TrustManagerImpl` implements. This is the class that&#39;s throwing the error.","title":"javax.net.ssl.SSLContext to trust everything sslContext.init(keyManagerFactory.getKeyManagers(), ???, new SecureRandom());","body":"<p>Based on the stack trace, if you want to avoid the check, you need to implement your own instance of <code>X509TrustManager</code> i.e. what <code>X509TrustManagerImpl</code> implements. This is the class that's throwing the error.</p>\n"},{"tags":[],"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1651562462,"creation_date":1651561887,"answer_id":72095902,"question_id":72092532,"body_markdown":"Since your problem is only(!) hostname verification and not actual cert validation (like many other Qs), to avoid JSSE wrapping your `InsecureTrustManager` and adding the hostname verification, either you must &#39;implement&#39; [X509ExtendedKeyManager](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/javax/net/ssl/X509ExtendedTrustManager.html) instead -- and since this is an abstract class (it was designed before Java started allowing default methods in interfaces), you actually use `extends` and override its 4 (abstract) methods in addition to the ones in `X509TrustManager` -- or else turn it off specifically with `jdk.internal.httpclient.disableHostnameVerification` in which case you don&#39;t need a custom TrustManager at all.\r\n\r\nEffectively dupe https://stackoverflow.com/questions/52988677/allow-insecure-https-connection-for-java-jdk-11-httpclient particularly &#39;Update&#39; in https://stackoverflow.com/a/52995420/2868801 and https://stackoverflow.com/a/70741993/2868801 \r\n \r\nand https://stackoverflow.com/questions/6031258/java-ssl-how-to-disable-hostname-verification particularly https://stackoverflow.com/a/54513917/2868801 and https://stackoverflow.com/a/70604898/2868801 ","title":"javax.net.ssl.SSLContext to trust everything sslContext.init(keyManagerFactory.getKeyManagers(), ???, new SecureRandom());","body":"<p>Since your problem is only(!) hostname verification and not actual cert validation (like many other Qs), to avoid JSSE wrapping your <code>InsecureTrustManager</code> and adding the hostname verification, either you must 'implement' <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/javax/net/ssl/X509ExtendedTrustManager.html\" rel=\"nofollow noreferrer\">X509ExtendedKeyManager</a> instead -- and since this is an abstract class (it was designed before Java started allowing default methods in interfaces), you actually use <code>extends</code> and override its 4 (abstract) methods in addition to the ones in <code>X509TrustManager</code> -- or else turn it off specifically with <code>jdk.internal.httpclient.disableHostnameVerification</code> in which case you don't need a custom TrustManager at all.</p>\n<p>Effectively dupe <a href=\"https://stackoverflow.com/questions/52988677/allow-insecure-https-connection-for-java-jdk-11-httpclient\">Allow insecure HTTPS connection for Java JDK 11 HttpClient</a> particularly 'Update' in <a href=\"https://stackoverflow.com/a/52995420/2868801\">https://stackoverflow.com/a/52995420/2868801</a> and <a href=\"https://stackoverflow.com/a/70741993/2868801\">https://stackoverflow.com/a/70741993/2868801</a></p>\n<p>and <a href=\"https://stackoverflow.com/questions/6031258/java-ssl-how-to-disable-hostname-verification\">Java SSL: how to disable hostname verification</a> particularly <a href=\"https://stackoverflow.com/a/54513917/2868801\">https://stackoverflow.com/a/54513917/2868801</a> and <a href=\"https://stackoverflow.com/a/70604898/2868801\">https://stackoverflow.com/a/70604898/2868801</a></p>\n"}],"owner":{"account_id":14482834,"reputation":3894,"user_id":10461625,"display_name":"PatPanda"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2135,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":72095902,"answer_count":2,"score":1,"last_activity_date":1651562462,"creation_date":1651526448,"question_id":72092532,"body_markdown":"Small java question regarding the Java built in Http client please.\r\n\r\nI have a small piece of code where I am trying the Java built in Http client.\r\n\r\n```\r\nfinal KeyManagerFactory keyManagerFactory = getAndInitKeyManagerFactory();\r\nSSLContext sslContext = SSLContext.getInstance(&quot;TLSv1.3&quot;);\r\nsslContext.init(keyManagerFactory.getKeyManagers(), null, new SecureRandom());\r\n```\r\n\r\n(Please note the null for ```TrustManager[] tm```)\r\n\r\nI would like to avoid carrying an extra truststore, and since this is mainly for testing, I am more than ok trusting any server even knowing this might be insecure.\r\n\r\nUnfortunately, even with this null for the trust, I am still getting :\r\n\r\n```\r\nCaused by: java.security.cert.CertificateException: No subject alternative DNS name matching abc.com\r\n```\r\n\r\nI even tried giving a\r\n\r\n```\r\nstatic class InsecureTrustManager implements X509TrustManager {\r\n        @Override\r\n        public X509Certificate[] getAcceptedIssuers() {\r\n            return null;\r\n        }\r\n\r\n        @Override\r\n        public void checkServerTrusted(X509Certificate[] chain, String authType) throws CertificateException {\r\n            \r\n        }\r\n\r\n        @Override\r\n        public void checkClientTrusted(X509Certificate[] chain, String authType) throws CertificateException {\r\n\r\n        }\r\n    }\r\n\r\nsslContext.init(keyManagerFactory.getKeyManagers(), new TrustManager[] { new InsecureTrustManager() }, new SecureRandom());\r\n```\r\n\r\nBut no luck, still the same exception with stack trace:\r\n\r\n```\r\nException in thread &quot;main&quot; java.io.IOException: No subject alternative DNS name matching abc.com found.\r\n\tat java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:565)\r\n\tat java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:119)\r\n\tat question.Question.main(Question.java:54)\r\nCaused by: javax.net.ssl.SSLHandshakeException: No subject alternative DNS name matching abc.com found.\r\n\tat java.base/sun.security.ssl.Alert.createSSLException(Alert.java:131)\r\n\tat java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:320)\r\n[...]\r\nCaused by: java.security.cert.CertificateException: abc.com found.\r\n\tat java.base/sun.security.util.HostnameChecker.matchDNS(HostnameChecker.java:207)\r\n\tat java.base/sun.security.util.HostnameChecker.match(HostnameChecker.java:98)\r\n\tat java.base/sun.security.ssl.X509TrustManagerImpl.checkIdentity(X509TrustManagerImpl.java:455)\r\n\tat java.base/sun.security.ssl.X509TrustManagerImpl.checkIdentity(X509TrustManagerImpl.java:415)\r\n\tat java.base/sun.security.ssl.AbstractTrustManagerWrapper.checkAdditionalTrust(SSLContextImpl.java:1584)\r\n\tat java.base/sun.security.ssl.AbstractTrustManagerWrapper.checkServerTrusted(SSLContextImpl.java:1525)\r\n\tat java.base/sun.security.ssl.CertificateMessage$T13CertificateConsumer.checkServerCerts(CertificateMessage.java:1310)\r\n\r\n```\r\n\r\nI am not quite understanding the issue, and would like to ask what is the proper way to configure from the code, with Java built in, to trust everything.\r\n\r\nThank you","title":"javax.net.ssl.SSLContext to trust everything sslContext.init(keyManagerFactory.getKeyManagers(), ???, new SecureRandom());","body":"<p>Small java question regarding the Java built in Http client please.</p>\n<p>I have a small piece of code where I am trying the Java built in Http client.</p>\n<pre><code>final KeyManagerFactory keyManagerFactory = getAndInitKeyManagerFactory();\nSSLContext sslContext = SSLContext.getInstance(&quot;TLSv1.3&quot;);\nsslContext.init(keyManagerFactory.getKeyManagers(), null, new SecureRandom());\n</code></pre>\n<p>(Please note the null for <code>TrustManager[] tm</code>)</p>\n<p>I would like to avoid carrying an extra truststore, and since this is mainly for testing, I am more than ok trusting any server even knowing this might be insecure.</p>\n<p>Unfortunately, even with this null for the trust, I am still getting :</p>\n<pre><code>Caused by: java.security.cert.CertificateException: No subject alternative DNS name matching abc.com\n</code></pre>\n<p>I even tried giving a</p>\n<pre><code>static class InsecureTrustManager implements X509TrustManager {\n        @Override\n        public X509Certificate[] getAcceptedIssuers() {\n            return null;\n        }\n\n        @Override\n        public void checkServerTrusted(X509Certificate[] chain, String authType) throws CertificateException {\n            \n        }\n\n        @Override\n        public void checkClientTrusted(X509Certificate[] chain, String authType) throws CertificateException {\n\n        }\n    }\n\nsslContext.init(keyManagerFactory.getKeyManagers(), new TrustManager[] { new InsecureTrustManager() }, new SecureRandom());\n</code></pre>\n<p>But no luck, still the same exception with stack trace:</p>\n<pre><code>Exception in thread &quot;main&quot; java.io.IOException: No subject alternative DNS name matching abc.com found.\n    at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:565)\n    at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:119)\n    at question.Question.main(Question.java:54)\nCaused by: javax.net.ssl.SSLHandshakeException: No subject alternative DNS name matching abc.com found.\n    at java.base/sun.security.ssl.Alert.createSSLException(Alert.java:131)\n    at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:320)\n[...]\nCaused by: java.security.cert.CertificateException: abc.com found.\n    at java.base/sun.security.util.HostnameChecker.matchDNS(HostnameChecker.java:207)\n    at java.base/sun.security.util.HostnameChecker.match(HostnameChecker.java:98)\n    at java.base/sun.security.ssl.X509TrustManagerImpl.checkIdentity(X509TrustManagerImpl.java:455)\n    at java.base/sun.security.ssl.X509TrustManagerImpl.checkIdentity(X509TrustManagerImpl.java:415)\n    at java.base/sun.security.ssl.AbstractTrustManagerWrapper.checkAdditionalTrust(SSLContextImpl.java:1584)\n    at java.base/sun.security.ssl.AbstractTrustManagerWrapper.checkServerTrusted(SSLContextImpl.java:1525)\n    at java.base/sun.security.ssl.CertificateMessage$T13CertificateConsumer.checkServerCerts(CertificateMessage.java:1310)\n\n</code></pre>\n<p>I am not quite understanding the issue, and would like to ask what is the proper way to configure from the code, with Java built in, to trust everything.</p>\n<p>Thank you</p>\n"},{"tags":["java","class","collections"],"comments":[{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":1,"creation_date":1649676902,"post_id":71827046,"comment_id":126928657,"body_markdown":"Consider passing a `ToDoubleFunction&lt;Item&gt;` to a helper method: `getAverage(Item::getPrice)`...","body":"Consider passing a <code>ToDoubleFunction&lt;Item&gt;</code> to a helper method: <code>getAverage(Item::getPrice)</code>..."}],"answers":[{"tags":[],"owner":{"account_id":2933712,"reputation":6419,"user_id":2513200,"accept_rate":83,"display_name":"Hulk"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1649677235,"creation_date":1649677235,"answer_id":71827191,"question_id":71827046,"body_markdown":"As Johannes Kuhn proposed in a comment, you can pass the getter as a `ToDoubleFunction&lt;Item&gt;`  to your calculation method:\r\n\r\n\tprivate double calcAverage(ToDoubleFunction&lt;Item&gt; getter) {\r\n\t\tdouble sum = 0;\r\n\r\n        if (!items.isEmpty()) {\r\n            for (Item item : items) {\r\n                sum += getter.applyAsDouble(item);\r\n            }\r\n            return sum / items.size();\r\n        }\r\n        return sum;\r\n\t}\r\n\t\r\n\tpublic double getAveragePrice() {       \r\n        return calcAverage(Item::getPrice);\r\n    }\r\n\r\nYou can then reuse the calculation:\r\n\r\n    public double getAverageMass() {\r\n    \treturn calcAverage(Item::getMass);\r\n    }\r\n\r\n    public double getAverageVolume() {\r\n    \treturn calcAverage(Item::getVolume);\r\n    }","title":"How to put class field into method argument to avoid code repeat","body":"<p>As Johannes Kuhn proposed in a comment, you can pass the getter as a <code>ToDoubleFunction&lt;Item&gt;</code>  to your calculation method:</p>\n<pre><code>private double calcAverage(ToDoubleFunction&lt;Item&gt; getter) {\n    double sum = 0;\n\n    if (!items.isEmpty()) {\n        for (Item item : items) {\n            sum += getter.applyAsDouble(item);\n        }\n        return sum / items.size();\n    }\n    return sum;\n}\n\npublic double getAveragePrice() {       \n    return calcAverage(Item::getPrice);\n}\n</code></pre>\n<p>You can then reuse the calculation:</p>\n<pre><code>public double getAverageMass() {\n    return calcAverage(Item::getMass);\n}\n\npublic double getAverageVolume() {\n    return calcAverage(Item::getVolume);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24897601,"reputation":33,"user_id":18768670,"display_name":"Daniel Han&#225;k"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1651562082,"creation_date":1651562082,"answer_id":72095939,"question_id":71827046,"body_markdown":"Here is a solution using stream API\r\n\r\n    public double getAverageMass() {\r\n        return calcAverage(Item::getMass);\r\n    }\r\n\r\n    public double getAverageVolume() {\r\n        return calcAverage(Item::getVolume);\r\n    }\r\n\r\n    private double calcAverage(ToDoubleFunction&lt;Item&gt; getter) {\r\n        return items.stream().mapToDouble(getter).average().orElse(0);\r\n    }","title":"How to put class field into method argument to avoid code repeat","body":"<p>Here is a solution using stream API</p>\n<pre><code>public double getAverageMass() {\n    return calcAverage(Item::getMass);\n}\n\npublic double getAverageVolume() {\n    return calcAverage(Item::getVolume);\n}\n\nprivate double calcAverage(ToDoubleFunction&lt;Item&gt; getter) {\n    return items.stream().mapToDouble(getter).average().orElse(0);\n}\n</code></pre>\n"}],"owner":{"account_id":24897601,"reputation":33,"user_id":18768670,"display_name":"Daniel Han&#225;k"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71827191,"answer_count":2,"score":1,"last_activity_date":1651562082,"creation_date":1649676669,"question_id":71827046,"body_markdown":"I am currently solving this issue. For example. I have two classes. One for item and second for some kind of records of these items. What I need to do, if I want to have a few methods for get average of different kind from all items in collection. In my example, there is average of price, mass and volume. The methods are repetitive and the only one different thing is the getter. So, is there any option, how to have one private method for counting and another three public, that will use this one private method and somehow put the field as argument?\r\n\r\nItem class\r\n\r\n    public class Item {\r\n        private double price;\r\n        private double mass;\r\n        private double volume;\r\n    \r\n        public double getPrice() {\r\n            return price;\r\n        }\r\n    \r\n        public double getMass() {\r\n            return mass;\r\n        }\r\n    \r\n        public double getVolume() {\r\n            return volume;\r\n        }\r\n    }\r\n\r\nStock class\r\n\r\n    package model;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    public class Stock {\r\n        private List&lt;Item&gt; items;\r\n    \r\n        public Stock() {\r\n            items = new ArrayList&lt;&gt;();\r\n        }\r\n    \r\n        public double getAveragePrice() {\r\n            double sum = 0;\r\n    \r\n            if (!items.isEmpty()) {\r\n                for (Item item : items) {\r\n                    sum += item.getPrice();\r\n                }\r\n    \t        return sum / items.size();\r\n            }\r\n            return sum;\r\n        }\r\n    \r\n        public double getAverageMass() {\r\n            double sum = 0;\r\n    \r\n            if (!items.isEmpty()) {\r\n                for (Item item : items) {\r\n                    sum += item.getMass();\r\n                }\r\n    \t        return sum / items.size();\r\n            }\r\n            return sum;\r\n        }\r\n    \r\n        public double getAverageVolume() {\r\n            double sum = 0;\r\n    \r\n            if (!items.isEmpty()) {\r\n                for (Item item : items) {\r\n                    sum += item.getVolume();\r\n                }\r\n    \t        return sum / items.size();\r\n            }\r\n            return sum;\r\n        }\r\n    }","title":"How to put class field into method argument to avoid code repeat","body":"<p>I am currently solving this issue. For example. I have two classes. One for item and second for some kind of records of these items. What I need to do, if I want to have a few methods for get average of different kind from all items in collection. In my example, there is average of price, mass and volume. The methods are repetitive and the only one different thing is the getter. So, is there any option, how to have one private method for counting and another three public, that will use this one private method and somehow put the field as argument?</p>\n<p>Item class</p>\n<pre><code>public class Item {\n    private double price;\n    private double mass;\n    private double volume;\n\n    public double getPrice() {\n        return price;\n    }\n\n    public double getMass() {\n        return mass;\n    }\n\n    public double getVolume() {\n        return volume;\n    }\n}\n</code></pre>\n<p>Stock class</p>\n<pre><code>package model;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class Stock {\n    private List&lt;Item&gt; items;\n\n    public Stock() {\n        items = new ArrayList&lt;&gt;();\n    }\n\n    public double getAveragePrice() {\n        double sum = 0;\n\n        if (!items.isEmpty()) {\n            for (Item item : items) {\n                sum += item.getPrice();\n            }\n            return sum / items.size();\n        }\n        return sum;\n    }\n\n    public double getAverageMass() {\n        double sum = 0;\n\n        if (!items.isEmpty()) {\n            for (Item item : items) {\n                sum += item.getMass();\n            }\n            return sum / items.size();\n        }\n        return sum;\n    }\n\n    public double getAverageVolume() {\n        double sum = 0;\n\n        if (!items.isEmpty()) {\n            for (Item item : items) {\n                sum += item.getVolume();\n            }\n            return sum / items.size();\n        }\n        return sum;\n    }\n}\n</code></pre>\n"},{"tags":["java","exception","io","java-io"],"answers":[{"tags":[],"owner":{"account_id":19940940,"reputation":199,"user_id":14612693,"display_name":"Jolly"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651561497,"creation_date":1651561497,"answer_id":72095844,"question_id":72095674,"body_markdown":"**It depends.** I guess there is no single clear answer to this, so other members of the community might view this differently than I do.\r\n\r\nAccording to the [Javadoc](https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/io/File.html#createNewFile()), `createNewFile` returns false only if the file already exists.\r\n\r\nTherefore, in cases where the file should not be present whatsoever, I also just throw an `IOException`.\r\nIf I have a reason to assume the file could be present, the user interacting with the program should be notified of this problem in some way. How exactly you do this depends on the UI of your program.","title":"Given the following snippet, would it be wise to specify the reason of the failure or throw an IOException?","body":"<p><strong>It depends.</strong> I guess there is no single clear answer to this, so other members of the community might view this differently than I do.</p>\n<p>According to the <a href=\"https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/io/File.html#createNewFile()\" rel=\"nofollow noreferrer\">Javadoc</a>, <code>createNewFile</code> returns false only if the file already exists.</p>\n<p>Therefore, in cases where the file should not be present whatsoever, I also just throw an <code>IOException</code>.\nIf I have a reason to assume the file could be present, the user interacting with the program should be notified of this problem in some way. How exactly you do this depends on the UI of your program.</p>\n"},{"tags":[],"owner":{"account_id":11180480,"reputation":7021,"user_id":8207228,"display_name":"Ralf Kleberhoff"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651561901,"creation_date":1651561901,"answer_id":72095904,"question_id":72095674,"body_markdown":"The code snippet you showed us does not make much sense. Throwing an exception, just to catch it immediately, isn&#39;t very performant (unless the clever Java optimizers eliminate the costly operations).\r\n\r\nYour current run() method does:\r\n1. `MessageHandler.createSuccess()` if the file didn&#39;t exist and could be created (`file.createNewFile()` returned `true`).\r\n2. `MessageHandler.error500()` if the file didn&#39;t exist, but could not be created, e.g. because of not having the necessary permissions (`file.createNewFile()` threw an `IOException`).\r\n3. `MessageHandler.error500()` if the file already existed (`file.createNewFile()` returned `true`). [Are you sure that already having the file is an error?]\r\n\r\nFor the case number 3, creating, throwing and catching an `IOException` does not serve any useful purpose (other than guiding the code into the `catch` clause).\r\n\r\nI&#39;d simply rewrite the code to something like\r\n\r\n    @Override\r\n    public void run() {\r\n        File file = new File(src + &quot;\\\\&quot; + srcName);\r\n        try {\r\n            if (file.createNewFile()) {\r\n                MessageHandler.createSuccess(comp);\r\n            } else {\r\n                MessageHandler.error500(comp);\r\n            }\r\n        } catch (IOException e) {\r\n            MessageHandler.error500(comp);\r\n        }\r\n    }\r\n\r\nYou might even find a result code different from 500, better representing the cause of the failure.\r\n\r\nExceptions are a very good way for one method to communicate to the other methods up its caller hierarchy that it wasn&#39;t able to do its job. Throwing and catching an exception within one method rarely is a good idea.","title":"Given the following snippet, would it be wise to specify the reason of the failure or throw an IOException?","body":"<p>The code snippet you showed us does not make much sense. Throwing an exception, just to catch it immediately, isn't very performant (unless the clever Java optimizers eliminate the costly operations).</p>\n<p>Your current run() method does:</p>\n<ol>\n<li><code>MessageHandler.createSuccess()</code> if the file didn't exist and could be created (<code>file.createNewFile()</code> returned <code>true</code>).</li>\n<li><code>MessageHandler.error500()</code> if the file didn't exist, but could not be created, e.g. because of not having the necessary permissions (<code>file.createNewFile()</code> threw an <code>IOException</code>).</li>\n<li><code>MessageHandler.error500()</code> if the file already existed (<code>file.createNewFile()</code> returned <code>true</code>). [Are you sure that already having the file is an error?]</li>\n</ol>\n<p>For the case number 3, creating, throwing and catching an <code>IOException</code> does not serve any useful purpose (other than guiding the code into the <code>catch</code> clause).</p>\n<p>I'd simply rewrite the code to something like</p>\n<pre><code>@Override\npublic void run() {\n    File file = new File(src + &quot;\\\\&quot; + srcName);\n    try {\n        if (file.createNewFile()) {\n            MessageHandler.createSuccess(comp);\n        } else {\n            MessageHandler.error500(comp);\n        }\n    } catch (IOException e) {\n        MessageHandler.error500(comp);\n    }\n}\n</code></pre>\n<p>You might even find a result code different from 500, better representing the cause of the failure.</p>\n<p>Exceptions are a very good way for one method to communicate to the other methods up its caller hierarchy that it wasn't able to do its job. Throwing and catching an exception within one method rarely is a good idea.</p>\n"}],"owner":{"account_id":23456358,"reputation":1,"user_id":17511778,"display_name":"WardenHelmet"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1651561901,"creation_date":1651560310,"question_id":72095674,"body_markdown":"I&#39;m creating a &quot;File Manager&quot; to practice my IO skills. **If I&#39;m creating a file, how would I handle an error if file#createNewFile() returns false?**\r\n\r\n```\r\n@Override\r\n    public void run() {\r\n        File file = new File(src + &quot;\\\\&quot; + srcName);\r\n        try {\r\n            if (file.createNewFile()) {\r\n                MessageHandler.createSuccess(comp);\r\n            } else {\r\n                throw new IOException();\r\n            }\r\n        } catch (IOException e) {\r\n            MessageHandler.error500(comp);\r\n        }\r\n    }\r\n```\r\nRight now I&#39;m simply throwing an IOException to be caught in the next block, but I&#39;m not sure if that is the best idea. It should be fine on the client end but when debugging I would have no idea what went wrong internally.","title":"Given the following snippet, would it be wise to specify the reason of the failure or throw an IOException?","body":"<p>I'm creating a &quot;File Manager&quot; to practice my IO skills. <strong>If I'm creating a file, how would I handle an error if file#createNewFile() returns false?</strong></p>\n<pre><code>@Override\n    public void run() {\n        File file = new File(src + &quot;\\\\&quot; + srcName);\n        try {\n            if (file.createNewFile()) {\n                MessageHandler.createSuccess(comp);\n            } else {\n                throw new IOException();\n            }\n        } catch (IOException e) {\n            MessageHandler.error500(comp);\n        }\n    }\n</code></pre>\n<p>Right now I'm simply throwing an IOException to be caught in the next block, but I'm not sure if that is the best idea. It should be fine on the client end but when debugging I would have no idea what went wrong internally.</p>\n"},{"tags":["java","swing","windows-10","jframe","awt"],"comments":[{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1651563429,"post_id":72095883,"comment_id":127387273,"body_markdown":"Because the frame decorations are provided by the native OS, it&#39;s not possible (always) possible to have a custom frame shape on a decorated window (while using the native look and feel)","body":"Because the frame decorations are provided by the native OS, it&#39;s not possible (always) possible to have a custom frame shape on a decorated window (while using the native look and feel)"},{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1651563531,"post_id":72095883,"comment_id":127387304,"body_markdown":"Looking at the source code for `Frame#setShape`, `if ((shape != null) &amp;&amp; !isUndecorated()) {` it&#39;s actually hardcode to be impossible","body":"Looking at the source code for <code>Frame#setShape</code>, <code>if ((shape != null) &amp;&amp; !isUndecorated()) {</code> it&#39;s actually hardcode to be impossible"},{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1651563654,"post_id":72095883,"comment_id":127387340,"body_markdown":"It &quot;might&quot; possible if you used the JNA library (I&#39;ve not tried), but it&#39;s API has something which might work - [`WindowUtils.setWindowMask(Component, Shape)`](https://java-native-access.github.io/jna/4.2.1/com/sun/jna/platform/WindowUtils.NativeWindowUtils.html#setWindowMask-java.awt.Component-java.awt.Shape-)","body":"It &quot;might&quot; possible if you used the JNA library (I&#39;ve not tried), but it&#39;s API has something which might work - <a href=\"https://java-native-access.github.io/jna/4.2.1/com/sun/jna/platform/WindowUtils.NativeWindowUtils.html#setWindowMask-java.awt.Component-java.awt.Shape-\" rel=\"nofollow noreferrer\"><code>WindowUtils.setWindowMask(Component, Shape)</code></a>"},{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1651565507,"post_id":72095883,"comment_id":127387839,"body_markdown":"So I tried JNA and on MacOS, it still doesnt like it when its decorated","body":"So I tried JNA and on MacOS, it still doesnt like it when its decorated"},{"owner":{"account_id":9736891,"reputation":225,"user_id":7219867,"display_name":"Liso"},"score":0,"creation_date":1651566044,"post_id":72095883,"comment_id":127387963,"body_markdown":"Too bad. Maybe adding a new component with the functionality of the menu bar (minimize, close and if needed dragging) to the undecorated shaped frame will be the most simple option.","body":"Too bad. Maybe adding a new component with the functionality of the menu bar (minimize, close and if needed dragging) to the undecorated shaped frame will be the most simple option."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1651587376,"post_id":72095883,"comment_id":127395274,"body_markdown":"You could use a Look &amp; Feel decorated Window for that, but unfortunately, the Windows Look &amp; Feel does not support this feature. It does support internal frames though, which you could add to a shaped window, but they get an outdated ugly look instead of Windows&#160;10s native look.","body":"You could use a Look &amp; Feel decorated Window for that, but unfortunately, the Windows Look &amp; Feel does not support this feature. It does support internal frames though, which you could add to a shaped window, but they get an outdated ugly look instead of Windows 10s native look."}],"owner":{"account_id":9736891,"reputation":225,"user_id":7219867,"display_name":"Liso"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":240,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1651561740,"creation_date":1651561740,"question_id":72095883,"body_markdown":"I&#39;m looking for a way to create a JFrame with rounded corners AND also have the close and minimize buttons in the right to corner of the frame. \r\nIs there asimple solution since the following only adds rounded corners with setUndecorated(true):\r\n\r\n    setUndecorated(false);\r\n\taddComponentListener(new ComponentAdapter() {\r\n\t\t@Override\r\n\t\tpublic void componentResized(ComponentEvent e) {\r\n\t\t\tsetShape(new RoundRectangle2D.Double(0, 0, getWidth(), getHeight(), 20, 20));\r\n\t\t}\r\n\t});\r\n\r\nI know in Windows 11 the frames would automatically have rounded corners but I need a solution for Windows 10.","title":"Java Swing decorated JFrame with rounded corners","body":"<p>I'm looking for a way to create a JFrame with rounded corners AND also have the close and minimize buttons in the right to corner of the frame.\nIs there asimple solution since the following only adds rounded corners with setUndecorated(true):</p>\n<pre><code>setUndecorated(false);\naddComponentListener(new ComponentAdapter() {\n    @Override\n    public void componentResized(ComponentEvent e) {\n        setShape(new RoundRectangle2D.Double(0, 0, getWidth(), getHeight(), 20, 20));\n    }\n});\n</code></pre>\n<p>I know in Windows 11 the frames would automatically have rounded corners but I need a solution for Windows 10.</p>\n"},{"tags":["java","jsf","jsf-2","captcha","java-ee-6"],"comments":[{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1298028506,"post_id":5040384,"comment_id":5639982,"body_markdown":"There is no captcha tool included in Java EE 6.","body":"There is no captcha tool included in Java EE 6."}],"answers":[{"tags":[],"owner":{"account_id":287953,"reputation":3186,"user_id":588077,"accept_rate":86,"display_name":"Eduard"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1449963983,"creation_date":1298026408,"answer_id":5040401,"question_id":5040384,"body_markdown":"[Here][1] is good example I thing you can use. There is no integrated support in JEE6, you have to do this yourself as in provided example or you have to get some componenet that has this functionality. I know of another one in primefaces components [here][2] (it uses popular reCAPTCHA componenet)\r\n\r\n\r\n  [1]: http://javahunter.wordpress.com/2010/09/25/integrating-captcha-in-jsf-2-0/\r\n  [2]: http://www.primefaces.org/showcase/ui/misc/captcha.xhtml","title":"JSF 2.0 How a CAPTCHA works","body":"<p><a href=\"http://javahunter.wordpress.com/2010/09/25/integrating-captcha-in-jsf-2-0/\" rel=\"nofollow\">Here</a> is good example I thing you can use. There is no integrated support in JEE6, you have to do this yourself as in provided example or you have to get some componenet that has this functionality. I know of another one in primefaces components <a href=\"http://www.primefaces.org/showcase/ui/misc/captcha.xhtml\" rel=\"nofollow\">here</a> (it uses popular reCAPTCHA componenet)</p>\n"},{"tags":[],"owner":{"account_id":135264,"reputation":972,"user_id":337997,"accept_rate":100,"display_name":"ygram"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1298026637,"creation_date":1298026637,"answer_id":5040437,"question_id":5040384,"body_markdown":"[Jcapthca][1] is good. You can use it at different levels (just for image generation or us their servlet), it would be easy to use in the t-edd&#39;s example if you need more advanced captcha images.\r\n\r\n\r\n  \r\n\r\n\r\n  [1]: http://jcaptcha.sourceforge.net/","title":"JSF 2.0 How a CAPTCHA works","body":"<p><a href=\"http://jcaptcha.sourceforge.net/\" rel=\"nofollow\">Jcapthca</a> is good. You can use it at different levels (just for image generation or us their servlet), it would be easy to use in the t-edd's example if you need more advanced captcha images.</p>\n"},{"tags":[],"owner":{"account_id":52822,"reputation":1088970,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1449962131,"creation_date":1298030423,"answer_id":5041028,"question_id":5040384,"body_markdown":"If you&#39;re using PrimeFaces, you could use the [`&lt;p:captcha&gt;`][1] component.\r\n\r\n\r\n  [1]: http://www.primefaces.org/showcase/ui/misc/captcha.xhtml","title":"JSF 2.0 How a CAPTCHA works","body":"<p>If you're using PrimeFaces, you could use the <a href=\"http://www.primefaces.org/showcase/ui/misc/captcha.xhtml\" rel=\"nofollow\"><code>&lt;p:captcha&gt;</code></a> component.</p>\n"},{"tags":[],"owner":{"account_id":13039762,"reputation":294,"user_id":9423518,"display_name":"Black Bear"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1651561331,"creation_date":1651504704,"answer_id":72088803,"question_id":5040384,"body_markdown":"If you&#39;re using myfaces, you can use the `&lt;t:captcha&gt;` component. It works without the  internet too.","title":"JSF 2.0 How a CAPTCHA works","body":"<p>If you're using myfaces, you can use the <code>&lt;t:captcha&gt;</code> component. It works without the  internet too.</p>\n"}],"owner":{"account_id":304562,"reputation":12355,"user_id":614141,"accept_rate":96,"display_name":"javing"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8743,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":5040401,"answer_count":4,"score":2,"last_activity_date":1651561331,"creation_date":1298026225,"question_id":5040384,"body_markdown":"Can sombody recommend me a good captcha tool for my JSF pages? Is there any captcha tool included in JEE6 or i have to add it to my project, like an external .jar?\r\n\r\nAlso is there any brief tutorial on how to include it in my program? \r\nor\r\nDoes Someone what would be the steps i should follow to do so?(I never used a captcha before).\r\n","title":"JSF 2.0 How a CAPTCHA works","body":"<p>Can sombody recommend me a good captcha tool for my JSF pages? Is there any captcha tool included in JEE6 or i have to add it to my project, like an external .jar?</p>\n\n<p>Also is there any brief tutorial on how to include it in my program? \nor\nDoes Someone what would be the steps i should follow to do so?(I never used a captcha before).</p>\n"},{"tags":["java","android","api"],"comments":[{"owner":{"account_id":6207142,"reputation":388,"user_id":4834735,"accept_rate":50,"display_name":"Knu8"},"score":0,"creation_date":1651559486,"post_id":72095507,"comment_id":127386281,"body_markdown":"Need more info here. Do you need an endpoint which should give you your sample response? Or you just need to formulate sample response? Is it Json endpoint you are expecting.","body":"Need more info here. Do you need an endpoint which should give you your sample response? Or you just need to formulate sample response? Is it Json endpoint you are expecting."},{"owner":{"account_id":1820600,"reputation":201,"user_id":1654760,"accept_rate":30,"display_name":"T B"},"score":0,"creation_date":1651560465,"post_id":72095507,"comment_id":127386510,"body_markdown":"Yes need an endpoint which should give sample response and expecting a json endpoint - @Knu8","body":"Yes need an endpoint which should give sample response and expecting a json endpoint - @Knu8"}],"answers":[{"tags":[],"owner":{"account_id":6207142,"reputation":388,"user_id":4834735,"accept_rate":50,"display_name":"Knu8"},"down_vote_count":2,"up_vote_count":1,"is_accepted":true,"score":-1,"last_activity_date":1651560985,"creation_date":1651560985,"answer_id":72095769,"question_id":72095507,"body_markdown":"There might be multiple solutions to what you want to do. \r\n\r\nhttps://www.mockaroo.com/ is something I use to generate test data. It has the flexibility to generate 1000s of rows of data and also in many formats e.g. Json, csv.\r\n\r\nIf you want to get that data via an endpoint then you can use **postman** on your local.\r\n\r\nI am also sure that there are many websites that will provide the test Json data you want and serve it via an endpoint. example https://mocki.io/fake-json-api","title":"How can find a sample api from internet for list of category and list of subCategory. subCategory will be based on category","body":"<p>There might be multiple solutions to what you want to do.</p>\n<p><a href=\"https://www.mockaroo.com/\" rel=\"nofollow noreferrer\">https://www.mockaroo.com/</a> is something I use to generate test data. It has the flexibility to generate 1000s of rows of data and also in many formats e.g. Json, csv.</p>\n<p>If you want to get that data via an endpoint then you can use <strong>postman</strong> on your local.</p>\n<p>I am also sure that there are many websites that will provide the test Json data you want and serve it via an endpoint. example <a href=\"https://mocki.io/fake-json-api\" rel=\"nofollow noreferrer\">https://mocki.io/fake-json-api</a></p>\n"}],"owner":{"account_id":1820600,"reputation":201,"user_id":1654760,"accept_rate":30,"display_name":"T B"},"comment_count":2,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":106,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1651576206,"accepted_answer_id":72095769,"answer_count":1,"score":-2,"last_activity_date":1651560985,"creation_date":1651559025,"question_id":72095507,"body_markdown":"I need the sample Api to integrate in my android application. If any one provide me the link it will be help full for me. Based on the api I will able to create the model classes also and will able to show the list in recyclerView.\r\n\r\n","title":"How can find a sample api from internet for list of category and list of subCategory. subCategory will be based on category","body":"<p>I need the sample Api to integrate in my android application. If any one provide me the link it will be help full for me. Based on the api I will able to create the model classes also and will able to show the list in recyclerView.</p>\n"},{"tags":["java","junit5","testcontainers"],"answers":[{"tags":[],"owner":{"account_id":1488715,"reputation":1432,"user_id":1396362,"display_name":"Kevin Wittek"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651560848,"creation_date":1651560848,"answer_id":72095742,"question_id":72071672,"body_markdown":"I am unsure what is the most elegant JUnit-Jupiter-idiomatic way to do this, but if there is only 1 instance of the container per JVM process, you could either use a `public static` field or save it System Properties. \r\n\r\nAlso, see the Singleton Container Pattern for another example of how to do this without JUnit:\r\nhttps://www.testcontainers.org/test_framework_integration/manual_lifecycle_control/#singleton-containers","title":"Access field in a Rabbitmq testContainer extension class in junit5","body":"<p>I am unsure what is the most elegant JUnit-Jupiter-idiomatic way to do this, but if there is only 1 instance of the container per JVM process, you could either use a <code>public static</code> field or save it System Properties.</p>\n<p>Also, see the Singleton Container Pattern for another example of how to do this without JUnit:\n<a href=\"https://www.testcontainers.org/test_framework_integration/manual_lifecycle_control/#singleton-containers\" rel=\"nofollow noreferrer\">https://www.testcontainers.org/test_framework_integration/manual_lifecycle_control/#singleton-containers</a></p>\n"}],"owner":{"account_id":20445225,"reputation":71,"user_id":15001181,"display_name":"mark dev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":379,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1651560848,"creation_date":1651347953,"question_id":72071672,"body_markdown":"I am using TestContainer to run RabbitMQ instance in order to use it in my integration tests. \r\n\r\nI create a Junit 5 extension class that implement the BeforeAllCallback interface to run the container only once before my tests, to connect to the container i need to retrieve the mapped port that is exposed in my host machine, so i am wandering if there is any solution in order to access the extension class field from my integration test class.\r\n\r\n**The Extension**\r\n\r\n   \r\n```\r\npublic  class RmqExtension implements BeforeAllCallback {\r\n    private static final String DEFAULT_USER = &quot;guest&quot;;\r\n    private static final String DEFAULT_PASS = &quot;guest&quot;;\r\n    public static final int RABBIT_HTTP_API_PORT = 15672;\r\n    private static final String RABBIT_MQ_IMAGE_NAME = &quot;rmqImage&quot;;\r\n    private static final String RABBIT_MQ_OVERVIEW_PATH = &quot;/api/overview&quot;;\r\n\r\n    private static final GenericContainer rabbitMqContainer = new GenericContainer(DockerImageName.parse(RABBIT_MQ_IMAGE_NAME))\r\n            .withExposedPorts(RABBIT_HTTP_API_PORT)\r\n            .waitingFor(Wait.forHttp(RABBIT_MQ_OVERVIEW_PATH).withBasicCredentials(DEFAULT_USER, DEFAULT_PASS).forStatusCode(HttpStatus.SC_OK));\r\n   \r\n\r\n\r\n    @Override\r\n    public void beforeAll(ExtensionContext extensionContext) throws Exception {\r\n        rabbitMqContainer.start();\r\n    }\r\n\r\n}\r\n```\r\n\r\n**My test Class**\r\n\r\n```\r\n@ExtendWith(RmqExtension.class)\r\n\r\nclass RabbitMqIT {\r\n    \r\n   private int myPort;\r\n\r\n   @Test\r\n   void myTest(){\r\n\r\n      // What i need to do\r\n\r\n      myPort = rabbitMqContainer.getMappedPort(15672);\r\n     }\r\n}\r\n\r\n```\r\n\r\n\r\n\r\n\r\n\r\n","title":"Access field in a Rabbitmq testContainer extension class in junit5","body":"<p>I am using TestContainer to run RabbitMQ instance in order to use it in my integration tests.</p>\n<p>I create a Junit 5 extension class that implement the BeforeAllCallback interface to run the container only once before my tests, to connect to the container i need to retrieve the mapped port that is exposed in my host machine, so i am wandering if there is any solution in order to access the extension class field from my integration test class.</p>\n<p><strong>The Extension</strong></p>\n<pre><code>public  class RmqExtension implements BeforeAllCallback {\n    private static final String DEFAULT_USER = &quot;guest&quot;;\n    private static final String DEFAULT_PASS = &quot;guest&quot;;\n    public static final int RABBIT_HTTP_API_PORT = 15672;\n    private static final String RABBIT_MQ_IMAGE_NAME = &quot;rmqImage&quot;;\n    private static final String RABBIT_MQ_OVERVIEW_PATH = &quot;/api/overview&quot;;\n\n    private static final GenericContainer rabbitMqContainer = new GenericContainer(DockerImageName.parse(RABBIT_MQ_IMAGE_NAME))\n            .withExposedPorts(RABBIT_HTTP_API_PORT)\n            .waitingFor(Wait.forHttp(RABBIT_MQ_OVERVIEW_PATH).withBasicCredentials(DEFAULT_USER, DEFAULT_PASS).forStatusCode(HttpStatus.SC_OK));\n   \n\n\n    @Override\n    public void beforeAll(ExtensionContext extensionContext) throws Exception {\n        rabbitMqContainer.start();\n    }\n\n}\n</code></pre>\n<p><strong>My test Class</strong></p>\n<pre><code>@ExtendWith(RmqExtension.class)\n\nclass RabbitMqIT {\n    \n   private int myPort;\n\n   @Test\n   void myTest(){\n\n      // What i need to do\n\n      myPort = rabbitMqContainer.getMappedPort(15672);\n     }\n}\n\n</code></pre>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":24412972,"reputation":49,"user_id":18340187,"display_name":"XDfox"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1651560069,"creation_date":1651560069,"answer_id":72095646,"question_id":72087117,"body_markdown":"public class ProductList {\r\n\r\n    public FieldValue Timestamp;\r\n    public double totalPrice;\r\n    public String userId;\r\n    public List&lt;String&gt; productList;\r\n\r\n    public ProductList(double totalPrice, String userId, List list, FieldValue fieldValue) {\r\n        this.totalPrice = totalPrice;\r\n        this.userId = userId;\r\n        this.productList = list;\r\n        this.Timestamp = fieldValue;\r\n    }\r\n}\r\n\r\n\r\n                    List&lt;String&gt; list = Arrays.asList(ScanResulttoArray);\r\n                    ProductList = new ProductList(ProductTotalPrice, &quot;I20018673&quot;,list,FieldValue.serverTimestamp());","title":"Is there any ways to store firestore datetime stamp with writebath in android studio java?","body":"<p>public class ProductList {</p>\n<pre><code>public FieldValue Timestamp;\npublic double totalPrice;\npublic String userId;\npublic List&lt;String&gt; productList;\n\npublic ProductList(double totalPrice, String userId, List list, FieldValue fieldValue) {\n    this.totalPrice = totalPrice;\n    this.userId = userId;\n    this.productList = list;\n    this.Timestamp = fieldValue;\n}\n</code></pre>\n<p>}</p>\n<pre><code>                List&lt;String&gt; list = Arrays.asList(ScanResulttoArray);\n                ProductList = new ProductList(ProductTotalPrice, &quot;I20018673&quot;,list,FieldValue.serverTimestamp());\n</code></pre>\n"}],"owner":{"account_id":24412972,"reputation":49,"user_id":18340187,"display_name":"XDfox"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72095646,"answer_count":1,"score":0,"last_activity_date":1651560069,"creation_date":1651496536,"question_id":72087117,"body_markdown":"                    WriteBatch batch = firebaseFirestore.batch();\r\n                    DocumentReference doc1 = firebaseFirestore.collection(&quot;Order&quot;).document();\r\n                    batch.set(doc1, ProductList);\r\n\r\n                    DocumentReference doc2 = firebaseFirestore.collection(&quot;user&quot;).document(firebaseAuth.getCurrentUser().getUid());\r\n                    batch.update(doc2, &quot;studentAmount&quot;, user.getStudentAmount() - ProductTotalPrice);\r\n\r\n\r\n                    batch.commit().addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\r\n                        @Override\r\n                        public void onComplete(@NonNull Task&lt;Void&gt; task) {\r\n                            Toast.makeText(ConfirmPaymentActivity.this, &quot;Complete the transaction successfully&quot;, Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    }).addOnFailureListener(new OnFailureListener() {\r\n                        @Override\r\n                        public void onFailure(@NonNull Exception e) {\r\n                            Toast.makeText(ConfirmPaymentActivity.this, &quot;Fail to complete the transaction&quot;, Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    });\r\n\r\n\r\n\r\n\r\nIs there any way to store the date with the DateTime stamp based on the time that the document wrote to the firestore? Now I using the writebatch doc1 to store the data but I unable to add in one more field for the datetime field.........Can anyone help? \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/tcVaC.png","title":"Is there any ways to store firestore datetime stamp with writebath in android studio java?","body":"<pre><code>                WriteBatch batch = firebaseFirestore.batch();\n                DocumentReference doc1 = firebaseFirestore.collection(&quot;Order&quot;).document();\n                batch.set(doc1, ProductList);\n\n                DocumentReference doc2 = firebaseFirestore.collection(&quot;user&quot;).document(firebaseAuth.getCurrentUser().getUid());\n                batch.update(doc2, &quot;studentAmount&quot;, user.getStudentAmount() - ProductTotalPrice);\n\n\n                batch.commit().addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\n                    @Override\n                    public void onComplete(@NonNull Task&lt;Void&gt; task) {\n                        Toast.makeText(ConfirmPaymentActivity.this, &quot;Complete the transaction successfully&quot;, Toast.LENGTH_SHORT).show();\n                    }\n                }).addOnFailureListener(new OnFailureListener() {\n                    @Override\n                    public void onFailure(@NonNull Exception e) {\n                        Toast.makeText(ConfirmPaymentActivity.this, &quot;Fail to complete the transaction&quot;, Toast.LENGTH_SHORT).show();\n                    }\n                });\n</code></pre>\n<p>Is there any way to store the date with the DateTime stamp based on the time that the document wrote to the firestore? Now I using the writebatch doc1 to store the data but I unable to add in one more field for the datetime field.........Can anyone help?</p>\n<p><a href=\"https://i.stack.imgur.com/tcVaC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tcVaC.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","junit","static","mockito","suppress"],"comments":[{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":0,"creation_date":1438790210,"post_id":31837327,"comment_id":51596307,"body_markdown":"Is `evilMethod` supposed to be the same as `otherMethod` ?","body":"Is <code>evilMethod</code> supposed to be the same as <code>otherMethod</code> ?"},{"owner":{"account_id":6368527,"reputation":265,"user_id":4941769,"accept_rate":53,"display_name":"Miles Peterson"},"score":0,"creation_date":1438790295,"post_id":31837327,"comment_id":51596371,"body_markdown":"Good catch. I&#39;ll edit.","body":"Good catch. I&#39;ll edit."},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":1,"creation_date":1438790825,"post_id":31837327,"comment_id":51596722,"body_markdown":"Use PowerMockito to mock it? I&#39;m not sure there&#39;s another way other than attacking the bytecode.","body":"Use PowerMockito to mock it? I&#39;m not sure there&#39;s another way other than attacking the bytecode."}],"answers":[{"tags":[],"owner":{"account_id":2728269,"reputation":8653,"user_id":2352699,"accept_rate":36,"display_name":"Fred Porci&#250;ncula"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1438792533,"creation_date":1438792533,"answer_id":31838156,"question_id":31837327,"body_markdown":"Your only way out is to mock the static method, as mentioned by @Dave. You can do that with PowerMock.\r\n\r\nSee https://stackoverflow.com/questions/21105403/mocking-static-methods-with-mockito.","title":"How to suppress/bypass a static method in a junit test?","body":"<p>Your only way out is to mock the static method, as mentioned by @Dave. You can do that with PowerMock.</p>\n\n<p>See <a href=\"https://stackoverflow.com/questions/21105403/mocking-static-methods-with-mockito\">Mocking static methods with Mockito</a>.</p>\n"},{"tags":[],"owner":{"account_id":3562114,"reputation":1493,"user_id":2974766,"accept_rate":73,"display_name":"DoubleDouble"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1438793622,"creation_date":1438792998,"answer_id":31838298,"question_id":31837327,"body_markdown":"Depending on how complicated your actual method implementation is, you could separate your return call from your exception throwing - then test on the return call which will not throw the exception. In a lot of cases it&#39;s best if strange ints such as `42` have their own variable anyway to explain what it corresponds too - If it is *always* 42, then it is static and final.\r\n\r\nThis is what I would do for your exact situation here, but I&#39;m guessing this is a major simple abstraction from your actual problem so you probably still want to mock it as previously suggested.\r\n\r\n    static final int theAnswerToLife = 42;\r\n\r\n    protected int returnFourtyTwo() {\r\n        evilMethod(new Object, &quot;&quot;);\r\n        return getTheAnswerToLife();\r\n    }\r\n\r\n    protected int getTheAnswerToLife() {\r\n        return theAnswerToLife;\r\n    }\r\n\r\n    protected static void evilMethod(Object obj, String string) {\r\n        throw new RuntimeException(&quot;This is me being evil.&quot;);\r\n    }","title":"How to suppress/bypass a static method in a junit test?","body":"<p>Depending on how complicated your actual method implementation is, you could separate your return call from your exception throwing - then test on the return call which will not throw the exception. In a lot of cases it's best if strange ints such as <code>42</code> have their own variable anyway to explain what it corresponds too - If it is <em>always</em> 42, then it is static and final.</p>\n\n<p>This is what I would do for your exact situation here, but I'm guessing this is a major simple abstraction from your actual problem so you probably still want to mock it as previously suggested.</p>\n\n<pre><code>static final int theAnswerToLife = 42;\n\nprotected int returnFourtyTwo() {\n    evilMethod(new Object, \"\");\n    return getTheAnswerToLife();\n}\n\nprotected int getTheAnswerToLife() {\n    return theAnswerToLife;\n}\n\nprotected static void evilMethod(Object obj, String string) {\n    throw new RuntimeException(\"This is me being evil.\");\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6687268,"reputation":28,"user_id":5158018,"display_name":"Ravi Teja Patchipala"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1438794847,"creation_date":1438794847,"answer_id":31838837,"question_id":31837327,"body_markdown":"In simple you can use @Ignore annotation to your method.","title":"How to suppress/bypass a static method in a junit test?","body":"<p>In simple you can use @Ignore annotation to your method.</p>\n"},{"tags":[],"owner":{"account_id":3222029,"reputation":2156,"user_id":2719243,"display_name":"Vahab Ghadiri"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651560043,"creation_date":1651560043,"answer_id":72095640,"question_id":31837327,"body_markdown":"I don&#39;t say it is a good approach, but at least it works and it is not that bad.\r\nyou can do this :\r\n\r\n 1. create a public method in your **inTest class** and move your static method call there\r\n 2. in your unit test - you are testing **inTest class** - you can use a spy instead of mock for your **inTest class**\r\n 3. just ask unit test to **do nothing** for that method!\r\n\r\n*down side? we have a public method instead of private*\r\n\r\n**Example :** \r\nI am unit testing the recyclerView Adapter :\r\n\r\nI have a logger **which has static method call** so I moved all logs to a method\r\n\r\n        fun logMe(message: String) {\r\n           MyCrashAnalytics.leaveBreadcrumb(message)\r\n        }\r\nand in unit test we have:\r\n\r\n       val underTest = MyAdapter(....)\r\nthen in **tests or in setup method** we can do this.\r\n\r\n       val spiedUnderTest = spy(underTest)\r\n       doNothing().`when`(spiedUnderTest).logMe(anyString())\r\nThen we are good to go!\r\n\r\n","title":"How to suppress/bypass a static method in a junit test?","body":"<p>I don't say it is a good approach, but at least it works and it is not that bad.\nyou can do this :</p>\n<ol>\n<li>create a public method in your <strong>inTest class</strong> and move your static method call there</li>\n<li>in your unit test - you are testing <strong>inTest class</strong> - you can use a spy instead of mock for your <strong>inTest class</strong></li>\n<li>just ask unit test to <strong>do nothing</strong> for that method!</li>\n</ol>\n<p><em>down side? we have a public method instead of private</em></p>\n<p><strong>Example :</strong>\nI am unit testing the recyclerView Adapter :</p>\n<p>I have a logger <strong>which has static method call</strong> so I moved all logs to a method</p>\n<pre><code>    fun logMe(message: String) {\n       MyCrashAnalytics.leaveBreadcrumb(message)\n    }\n</code></pre>\n<p>and in unit test we have:</p>\n<pre><code>   val underTest = MyAdapter(....)\n</code></pre>\n<p>then in <strong>tests or in setup method</strong> we can do this.</p>\n<pre><code>   val spiedUnderTest = spy(underTest)\n   doNothing().`when`(spiedUnderTest).logMe(anyString())\n</code></pre>\n<p>Then we are good to go!</p>\n"}],"owner":{"account_id":6368527,"reputation":265,"user_id":4941769,"accept_rate":53,"display_name":"Miles Peterson"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2963,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":31838156,"answer_count":4,"score":1,"last_activity_date":1651560043,"creation_date":1438790127,"question_id":31837327,"body_markdown":"Let&#39;s say I have the following code:\r\n\r\n    protected int returnFourtyTwo() {\r\n        evilMethod(new Object, &quot;&quot;);\r\n        return 42;\r\n    }\r\n\r\n    protected static void evilMethod(Object obj, String string) {\r\n        throw new RuntimeException(&quot;This is me being evil.&quot;);\r\n    }\r\n\r\nWhat I&#39;m trying to do is to run my returnFourtyTwo() method without throwing the runtime exception in my unit test. I&#39;ve been able to use the suppress() method to bypass class constructors before just fine, but this is the first time I&#39;ve had to bypass a static method (with more than one argument) in a non-static class. Unfortunately, resources on the topic are a bit scarce.","title":"How to suppress/bypass a static method in a junit test?","body":"<p>Let's say I have the following code:</p>\n\n<pre><code>protected int returnFourtyTwo() {\n    evilMethod(new Object, \"\");\n    return 42;\n}\n\nprotected static void evilMethod(Object obj, String string) {\n    throw new RuntimeException(\"This is me being evil.\");\n}\n</code></pre>\n\n<p>What I'm trying to do is to run my returnFourtyTwo() method without throwing the runtime exception in my unit test. I've been able to use the suppress() method to bypass class constructors before just fine, but this is the first time I've had to bypass a static method (with more than one argument) in a non-static class. Unfortunately, resources on the topic are a bit scarce.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8612,"page":1380,"page_size":100}
