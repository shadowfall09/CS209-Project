{"items":[{"tags":["java","spring","jsp"],"comments":[{"owner":{"account_id":282080,"reputation":911,"user_id":578762,"accept_rate":86,"display_name":"Abhishek Ranjan"},"score":0,"creation_date":1411336147,"post_id":25963892,"comment_id":40652401,"body_markdown":"How are you calling the /changeLanguage controller? Are you making a  POST request or are you making a GET request.\nAre you using Jquery ajax or any other similar method to submit form data ?You will need to post the code which you are using to call changeLanguage","body":"How are you calling the /changeLanguage controller? Are you making a  POST request or are you making a GET request. Are you using Jquery ajax or any other similar method to submit form data ?You will need to post the code which you are using to call changeLanguage"},{"owner":{"account_id":5063655,"reputation":13,"user_id":4064378,"display_name":"Milen Yanchev"},"score":0,"creation_date":1411336380,"post_id":25963892,"comment_id":40652455,"body_markdown":"I&#39;m using POST request. It&#39;s called by clicking a button.","body":"I&#39;m using POST request. It&#39;s called by clicking a button."},{"owner":{"account_id":282080,"reputation":911,"user_id":578762,"accept_rate":86,"display_name":"Abhishek Ranjan"},"score":0,"creation_date":1411336456,"post_id":25963892,"comment_id":40652478,"body_markdown":"Did you add some debug line to see if the controller is getting called.Also can you post the code you are using to call the controller","body":"Did you add some debug line to see if the controller is getting called.Also can you post the code you are using to call the controller"},{"owner":{"account_id":5063655,"reputation":13,"user_id":4064378,"display_name":"Milen Yanchev"},"score":0,"creation_date":1411336704,"post_id":25963892,"comment_id":40652550,"body_markdown":"Yes. In debug I see that /changeLanguage method is calling /index method.","body":"Yes. In debug I see that /changeLanguage method is calling /index method."},{"owner":{"account_id":3672896,"reputation":7910,"user_id":3059623,"accept_rate":60,"display_name":"Aeseir"},"score":0,"creation_date":1411348911,"post_id":25963892,"comment_id":40655096,"body_markdown":"is your changeLanguage() located in a RESTController? Considering its also a async call why do you have it redirecting to index, all it will do is return a the whole index.jsp page to the ajax call.","body":"is your changeLanguage() located in a RESTController? Considering its also a async call why do you have it redirecting to index, all it will do is return a the whole index.jsp page to the ajax call."},{"owner":{"account_id":5063655,"reputation":13,"user_id":4064378,"display_name":"Milen Yanchev"},"score":0,"creation_date":1411376404,"post_id":25963892,"comment_id":40663322,"body_markdown":"I&#39;m not sure I understand what is RESTController. The reason for redirecting to index page is because after call /changeLanguage method, I need to refresh the index page. If there is a better approach, I will be more then happy to see it.","body":"I&#39;m not sure I understand what is RESTController. The reason for redirecting to index page is because after call /changeLanguage method, I need to refresh the index page. If there is a better approach, I will be more then happy to see it."}],"answers":[{"tags":[],"owner":{"account_id":5063655,"reputation":13,"user_id":4064378,"display_name":"Milen Yanchev"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1411396867,"creation_date":1411396867,"answer_id":25976809,"question_id":25963892,"body_markdown":"I have solved my problem. Not the way I wished but still... \r\nThe way I solved it is by create form in my jsp. In the controller I create one \r\nwrapper &quot;LanguageWrapper&quot; and add it like model attribute. \r\nLast, when a button is clicked, I submit the form &quot; $(&#39;#formName&#39;).submit();&quot; and this \r\nwork perfectly for me. \r\nI still don&#39;t know my when submit with ajax the page is not refreshed and when submit the form like this it refresh. I will spend some time researching this... \r\nIf someone knows more about this, please fill free to add more info. \r\nI hope my answer can help others with similar problems.","title":"Refresh jsp page from Spring Controller","body":"<p>I have solved my problem. Not the way I wished but still... \nThe way I solved it is by create form in my jsp. In the controller I create one \nwrapper \"LanguageWrapper\" and add it like model attribute. \nLast, when a button is clicked, I submit the form \" $('#formName').submit();\" and this \nwork perfectly for me. \nI still don't know my when submit with ajax the page is not refreshed and when submit the form like this it refresh. I will spend some time researching this... \nIf someone knows more about this, please fill free to add more info. \nI hope my answer can help others with similar problems.</p>\n"}],"owner":{"account_id":5063655,"reputation":13,"user_id":4064378,"display_name":"Milen Yanchev"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9765,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1694210445,"creation_date":1411333756,"question_id":25963892,"body_markdown":"I&#39;m having problem with refreshing my jsp page after calling Spring controller. \r\nIn my index page, I have login, and after the user enter username and password, the form gets submitted to the controller and then validate and create new user session. After all this, my page is refreshed and everything is working fine. The problem occur when I implement logic for changing page language. I&#39;m doing the same but this time, the page is not refreshing! \r\nHere is what I have tried so far: \r\n\r\n**JAVA CODE:**\r\n\r\n    \t@RequestMapping(value=&quot;/index&quot;, method=RequestMethod.GET)\r\n\tpublic String initializeIndex(ModelMap model) {\t\t\t\t\t\r\n\t\t// IMPLEMENT SOME BUSINESS LOGIC HERE\r\n\t\tString l = (String) model.get(&quot;language&quot;);\r\n\r\n        if (l == null) {\r\n\t        l = &quot;English&quot;;  //Default  \r\n        }\r\n\r\n        model.addAttribute(&quot;currentLanguage&quot;, l);\r\n\t\treturn &quot;index&quot;;\r\n\t}\r\n\r\n\t/**\r\n\t * When the user login.\r\n\t * \r\n\t * @param model\r\n\t * @return\r\n\t */\r\n\t@RequestMapping(value=&quot;/welcome&quot;, method=RequestMethod.POST)\r\n\tpublic String login(ModelMap model) {\r\n\r\n\t\t// IMPLEMENT SOME BUSINESS LOGIC HERE\r\n\r\n\t\treturn &quot;redirect:/index&quot;;\r\n\t}\r\n\t\r\n\t/**\r\n\t * When the user change website language.\r\n\t * \r\n\t * @param model\r\n\t * @return\r\n\t */\r\n\t@RequestMapping(value=&quot;/changeLanguage&quot;, method=RequestMethod.POST)\r\n\tpublic String changeLanguage(@RequestParam String language, ModelMap model) {\r\n\t\t\r\n\t\t//CHANGE SITE LANGUAGE...\r\n\t\t\r\n\t\tmodel.addAttribute(&quot;language&quot;, language);\t\t\t\r\n\r\n\t\treturn &quot;redirect:/index&quot;;\r\n\t}\r\n\r\n**EDIT**\r\n\r\nHere is how I&#39;m calling /changeLanguage method. This function is called after a button click event. \r\n\r\n**JS**\r\n\r\n    function changeLanguage(language) {\r\n\t$.ajax({\r\n        type: &quot;POST&quot;,\r\n        url: &quot;changeLanguage&quot;,\r\n        data: &quot;language=&quot; + language,\r\n        success: function(){\r\n          alert($(&#39;#languageHolder&#39;).val());\r\n        } \r\n        }\r\n\t});\r\n\r\n**HTML**\r\n\r\n\t&lt;input type=&quot;hidden&quot; id=&quot;languageHolder&quot; value=&#39;&lt;c:out value=&quot;${currentLanguage}&quot; /&gt;&#39;/&gt;\r\n\r\n\r\nNow when I debug the app, I see that everything is working perfect. The only difference is that when call /welcome method and the redirect to /index method, after that the index.jsp is refreshed and when call /changeLanguage method and then to /index method, the index.jsp is not refreshed.\r\n\r\nOne other difference is that on login I user form and submit the form. In change language I use ajax to submit the data to the server. Could this be the problem ? \r\nAny help will be appreciated.\r\n\r\n**EDIT**\r\nI had just made some small experiments: I add one holder in my index.jsp \r\nand then in the controller I&#39;m setting &quot;language&quot; variable to this holder. Then I\r\nalert this value in js and observe the result. \r\nI just edit the code above. \r\nWhat I observe is that the JAVA code is working perfect - e.g. when there is no language set in the model, it set the default &quot;English&quot; and set it to the model. Also when there is such attribute, I uses it and set the new value to the model. BUT in the js, alert is always print &quot;English&quot; ???","title":"Refresh jsp page from Spring Controller","body":"<p>I'm having problem with refreshing my jsp page after calling Spring controller. \nIn my index page, I have login, and after the user enter username and password, the form gets submitted to the controller and then validate and create new user session. After all this, my page is refreshed and everything is working fine. The problem occur when I implement logic for changing page language. I'm doing the same but this time, the page is not refreshing! \nHere is what I have tried so far: </p>\n\n<p><strong>JAVA CODE:</strong></p>\n\n<pre><code>    @RequestMapping(value=\"/index\", method=RequestMethod.GET)\npublic String initializeIndex(ModelMap model) {                 \n    // IMPLEMENT SOME BUSINESS LOGIC HERE\n    String l = (String) model.get(\"language\");\n\n    if (l == null) {\n        l = \"English\";  //Default  \n    }\n\n    model.addAttribute(\"currentLanguage\", l);\n    return \"index\";\n}\n\n/**\n * When the user login.\n * \n * @param model\n * @return\n */\n@RequestMapping(value=\"/welcome\", method=RequestMethod.POST)\npublic String login(ModelMap model) {\n\n    // IMPLEMENT SOME BUSINESS LOGIC HERE\n\n    return \"redirect:/index\";\n}\n\n/**\n * When the user change website language.\n * \n * @param model\n * @return\n */\n@RequestMapping(value=\"/changeLanguage\", method=RequestMethod.POST)\npublic String changeLanguage(@RequestParam String language, ModelMap model) {\n\n    //CHANGE SITE LANGUAGE...\n\n    model.addAttribute(\"language\", language);           \n\n    return \"redirect:/index\";\n}\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>Here is how I'm calling /changeLanguage method. This function is called after a button click event. </p>\n\n<p><strong>JS</strong></p>\n\n<pre><code>function changeLanguage(language) {\n$.ajax({\n    type: \"POST\",\n    url: \"changeLanguage\",\n    data: \"language=\" + language,\n    success: function(){\n      alert($('#languageHolder').val());\n    } \n    }\n});\n</code></pre>\n\n<p><strong>HTML</strong></p>\n\n<pre><code>&lt;input type=\"hidden\" id=\"languageHolder\" value='&lt;c:out value=\"${currentLanguage}\" /&gt;'/&gt;\n</code></pre>\n\n<p>Now when I debug the app, I see that everything is working perfect. The only difference is that when call /welcome method and the redirect to /index method, after that the index.jsp is refreshed and when call /changeLanguage method and then to /index method, the index.jsp is not refreshed.</p>\n\n<p>One other difference is that on login I user form and submit the form. In change language I use ajax to submit the data to the server. Could this be the problem ? \nAny help will be appreciated.</p>\n\n<p><strong>EDIT</strong>\nI had just made some small experiments: I add one holder in my index.jsp \nand then in the controller I'm setting \"language\" variable to this holder. Then I\nalert this value in js and observe the result. \nI just edit the code above. \nWhat I observe is that the JAVA code is working perfect - e.g. when there is no language set in the model, it set the default \"English\" and set it to the model. Also when there is such attribute, I uses it and set the new value to the model. BUT in the js, alert is always print \"English\" ???</p>\n"},{"tags":["java","database","oracle","netbeans"],"answers":[{"tags":[],"owner":{"account_id":2819775,"reputation":97,"user_id":2423783,"accept_rate":36,"display_name":"Iqbal Hossain"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1375976697,"creation_date":1375976697,"answer_id":18130402,"question_id":18129108,"body_markdown":"Problem is in your SQL Query; \r\n\r\n    ResultSet rs1=select.executeQuery(&quot;select * from narocnik,prevoz&quot;);\r\n\r\nIf you want to join two tables you should use joining like inner join, left join, right join or outer join. But when you just use comma (,) in your query to join two tables it will be outer join. It will give you multiple result;\r\n\r\nUser Inner Join like - \r\n\r\n    Select * from table1 inner join table2 on table1.id = table2.id;\r\n\r\nHope it will work for you.","title":"How to display data from 2 tables in Netbeans from ORACLE database","body":"<p>Problem is in your SQL Query; </p>\n\n<pre><code>ResultSet rs1=select.executeQuery(\"select * from narocnik,prevoz\");\n</code></pre>\n\n<p>If you want to join two tables you should use joining like inner join, left join, right join or outer join. But when you just use comma (,) in your query to join two tables it will be outer join. It will give you multiple result;</p>\n\n<p>User Inner Join like - </p>\n\n<pre><code>Select * from table1 inner join table2 on table1.id = table2.id;\n</code></pre>\n\n<p>Hope it will work for you.</p>\n"}],"owner":{"account_id":3151306,"reputation":1,"user_id":2664713,"display_name":"Alex Bibi Mavrič"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8693,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694210445,"creation_date":1375973302,"question_id":18129108,"body_markdown":"I don&#39;t know how to properly display data from 2 tables in the TextArea field. I added 2 rows in the database tables but the program displays 4 rows in the textArea instead of 2(duplicate), if I add 3 rows program displays 3xfirst row,3x second row,3x third row...etc.This is my code. Please help me in some way :(\r\n\r\n        jTextArea1.setText(null);\r\n        Connection connection=null;\r\n        try\r\n        {  \r\n            String driverName=&quot;oracle.jdbc.driver.OracleDriver&quot;;\r\n            Class.forName(driverName);\r\n    \r\n            String serverName = &quot;193.2.139.xxx&quot;;\r\n            String portNumber = &quot;1521&quot;;\r\n            String sid = &quot;ers&quot;;\r\n            String url = &quot;jdbc:oracle:thin:@&quot;+serverName+&quot;:&quot;+portNumber+&quot;:&quot;+sid;\r\n            String username = &quot;xxxxxxxx&quot;;\r\n            String password = &quot;xxxxxxxxxx&quot;;\r\n    \r\n            connection = DriverManager.getConnection(url, username, password);\r\n            java.sql.Statement select = connection.createStatement();\r\n    \r\n            int id;\r\n            String name; //column from table narocnik\r\n            String surname; //column from table narocnik\r\n            String address; //column from table narocnik\r\n            String telephone; //column from table narocnik\r\n            String date; //column from table prevoz\r\n            String od; //column from table prevoz\r\n            String v; //column from table prevoz\r\n            String odhod; //column from table prevoz\r\n            String cena; //column from table prevoz\r\n            ResultSet rs1=select.executeQuery(&quot;select * from narocnik,prevoz&quot;);\r\n            while(rs1.next()){\r\n                id=rs1.getInt(&quot;id&quot;);\r\n                name=rs1.getString(&quot;name&quot;);\r\n                surname=rs1.getString(&quot;surname&quot;);\r\n                address=rs1.getString(&quot;address&quot;);\r\n                telephone=rs1.getString(&quot;telephone&quot;);\r\n                date=rs1.getString(&quot;date&quot;);\r\n                od=rs1.getString(&quot;od&quot;);\r\n                v=rs1.getString(&quot;do&quot;);\r\n                odhod=rs1.getString(&quot;odhod&quot;);\r\n                cena=rs1.getString(&quot;cena&quot;);\r\n                jTextArea1.append(name+&quot;, &quot;+surname+&quot;, &quot;+address+&quot;, &quot;+telephone+&quot;, &quot;+date+&quot;, &quot;+od+&quot;, &quot;+v+&quot;, &quot;+odhod+&quot;, &quot;+cena+&quot;\\n&quot;);\r\n            }\r\n            connection.close();       \r\n        }\r\n        catch(ClassNotFoundException e)\r\n        {\r\n            JOptionPane.showMessageDialog(this,&quot;Ni gonilnika! &quot;+e);\r\n        }catch(SQLException e){\r\n            JOptionPane.showMessageDialog(this,&quot;Napaka pri povezavi! &quot;+e);\r\n        } ","title":"How to display data from 2 tables in Netbeans from ORACLE database","body":"<p>I don't know how to properly display data from 2 tables in the TextArea field. I added 2 rows in the database tables but the program displays 4 rows in the textArea instead of 2(duplicate), if I add 3 rows program displays 3xfirst row,3x second row,3x third row...etc.This is my code. Please help me in some way :(</p>\n\n<pre><code>    jTextArea1.setText(null);\n    Connection connection=null;\n    try\n    {  \n        String driverName=\"oracle.jdbc.driver.OracleDriver\";\n        Class.forName(driverName);\n\n        String serverName = \"193.2.139.xxx\";\n        String portNumber = \"1521\";\n        String sid = \"ers\";\n        String url = \"jdbc:oracle:thin:@\"+serverName+\":\"+portNumber+\":\"+sid;\n        String username = \"xxxxxxxx\";\n        String password = \"xxxxxxxxxx\";\n\n        connection = DriverManager.getConnection(url, username, password);\n        java.sql.Statement select = connection.createStatement();\n\n        int id;\n        String name; //column from table narocnik\n        String surname; //column from table narocnik\n        String address; //column from table narocnik\n        String telephone; //column from table narocnik\n        String date; //column from table prevoz\n        String od; //column from table prevoz\n        String v; //column from table prevoz\n        String odhod; //column from table prevoz\n        String cena; //column from table prevoz\n        ResultSet rs1=select.executeQuery(\"select * from narocnik,prevoz\");\n        while(rs1.next()){\n            id=rs1.getInt(\"id\");\n            name=rs1.getString(\"name\");\n            surname=rs1.getString(\"surname\");\n            address=rs1.getString(\"address\");\n            telephone=rs1.getString(\"telephone\");\n            date=rs1.getString(\"date\");\n            od=rs1.getString(\"od\");\n            v=rs1.getString(\"do\");\n            odhod=rs1.getString(\"odhod\");\n            cena=rs1.getString(\"cena\");\n            jTextArea1.append(name+\", \"+surname+\", \"+address+\", \"+telephone+\", \"+date+\", \"+od+\", \"+v+\", \"+odhod+\", \"+cena+\"\\n\");\n        }\n        connection.close();       \n    }\n    catch(ClassNotFoundException e)\n    {\n        JOptionPane.showMessageDialog(this,\"Ni gonilnika! \"+e);\n    }catch(SQLException e){\n        JOptionPane.showMessageDialog(this,\"Napaka pri povezavi! \"+e);\n    } \n</code></pre>\n"},{"tags":["java","scala","jms","actor","akka"],"comments":[{"owner":{"account_id":35027,"reputation":83,"user_id":99069,"display_name":"srnm"},"score":2,"creation_date":1303091176,"post_id":5693346,"comment_id":12879189,"body_markdown":"http://stackoverflow.com/questions/4648280/scala-actors-vs-jms/4648843#4648843 might be useful.","body":"<a href=\"http://stackoverflow.com/questions/4648280/scala-actors-vs-jms/4648843#4648843\" title=\"scala actors vs jms\">stackoverflow.com/questions/4648280/scala-actors-vs-jms/&hellip;</a> might be useful."}],"answers":[{"comments":[{"owner":{"account_id":414154,"reputation":122081,"user_id":788207,"accept_rate":84,"display_name":"Vladimir Matveev"},"score":6,"creation_date":1350938754,"post_id":5693657,"comment_id":17670431,"body_markdown":"ZeroMQ is not exactly a messaging system. It is rather some kind of improved sockets. Full-fledged messaging systems are much more complex than ZeroMQ. The project at your link seems to be just a thin wrapper around ZeroMQ with Akka.","body":"ZeroMQ is not exactly a messaging system. It is rather some kind of improved sockets. Full-fledged messaging systems are much more complex than ZeroMQ. The project at your link seems to be just a thin wrapper around ZeroMQ with Akka."}],"tags":[],"owner":{"account_id":163162,"reputation":2141,"user_id":385104,"display_name":"Dean Wampler"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1303045425,"creation_date":1303045425,"answer_id":5693657,"question_id":5693346,"body_markdown":"I&#39;m not an expert in messaging systems, but you can combine them with Akka in your apps, getting the best of both worlds. Here&#39;s an example that you might find useful for experimenting with Akka and messaging systems, in this case ZeroMQ:\r\n\r\n[https://github.com/zcox/akka-zeromq-java][1]\r\n\r\n  [1]: https://github.com/zcox/akka-zeromq-java","title":"When to use actors instead of messaging solutions such as WebSphere MQ or Tibco Rendezvous?","body":"<p>I'm not an expert in messaging systems, but you can combine them with Akka in your apps, getting the best of both worlds. Here's an example that you might find useful for experimenting with Akka and messaging systems, in this case ZeroMQ:</p>\n\n<p><a href=\"https://github.com/zcox/akka-zeromq-java\" rel=\"nofollow\">https://github.com/zcox/akka-zeromq-java</a></p>\n"},{"comments":[{"owner":{"account_id":355687,"reputation":563,"user_id":694773,"display_name":"Igor S."},"score":3,"creation_date":1425594125,"post_id":13018198,"comment_id":46038909,"body_markdown":"I think an answer to a wrong question can&#39;t be right. You can&#39;t compare a message queue and a concurrency model. They are built to solve COMPLETELY different tasks and have in common only the &quot;message&quot; word.","body":"I think an answer to a wrong question can&#39;t be right. You can&#39;t compare a message queue and a concurrency model. They are built to solve COMPLETELY different tasks and have in common only the &quot;message&quot; word."},{"owner":{"account_id":123612,"reputation":48061,"user_id":318174,"accept_rate":71,"display_name":"Adam Gent"},"score":2,"creation_date":1425604595,"post_id":13018198,"comment_id":46042626,"body_markdown":"Well yes and no. Akka supports distributed messaging and you could very easily build concurrency model off of message queue paradigm (google Spring&#39;s Reactor). Really the only distinction now is that RabbitMQ has durable messages.. oh wait Akka supports that now also. He may say &quot;Actor&quot; in the title but explicitly points out Akka which does have massive overlap with many message based systems (both concurrent and distributed).","body":"Well yes and no. Akka supports distributed messaging and you could very easily build concurrency model off of message queue paradigm (google Spring&#39;s Reactor). Really the only distinction now is that RabbitMQ has durable messages.. oh wait Akka supports that now also. He may say &quot;Actor&quot; in the title but explicitly points out Akka which does have massive overlap with many message based systems (both concurrent and distributed)."},{"owner":{"account_id":123612,"reputation":48061,"user_id":318174,"accept_rate":71,"display_name":"Adam Gent"},"score":4,"creation_date":1425605903,"post_id":13018198,"comment_id":46042967,"body_markdown":"BTW @IgorS. the typically concurrency model used with message queues is called SEDA (staged event driven architecture). Besides using Queues, Topics, and Exchanges is a concurrency model in itself (that just happens to be distributed model also.. just like the actor model). I also really despise when someone says &quot;wrong question&quot;.. besides inappropriate questions, when can a question be wrong? Its snarky and elitist to say something like that.","body":"BTW @IgorS. the typically concurrency model used with message queues is called SEDA (staged event driven architecture). Besides using Queues, Topics, and Exchanges is a concurrency model in itself (that just happens to be distributed model also.. just like the actor model). I also really despise when someone says &quot;wrong question&quot;.. besides inappropriate questions, when can a question be wrong? Its snarky and elitist to say something like that."},{"owner":{"account_id":355687,"reputation":563,"user_id":694773,"display_name":"Igor S."},"score":0,"creation_date":1425611956,"post_id":13018198,"comment_id":46044520,"body_markdown":"The question is wrong not in the sense that the author shouldn&#39;t ask it. The opposite is true - it should&#39;ve been asked, but it involves comparing a message broker implementation and an actor model framework. \nIf I was asked about EDA I wouldn&#39;t even mention concurrency as an advantage of this approach, but scalability, problem decomposition, loose coupling, maintainability in the long run, SLA adherence - everything except concurrency.\n\nBut if I was asked about how to implement highly concurrent system that can handle millions of concurrent requests - then actor model comes to play.","body":"The question is wrong not in the sense that the author shouldn&#39;t ask it. The opposite is true - it should&#39;ve been asked, but it involves comparing a message broker implementation and an actor model framework.  If I was asked about EDA I wouldn&#39;t even mention concurrency as an advantage of this approach, but scalability, problem decomposition, loose coupling, maintainability in the long run, SLA adherence - everything except concurrency.  But if I was asked about how to implement highly concurrent system that can handle millions of concurrent requests - then actor model comes to play."},{"owner":{"account_id":355687,"reputation":563,"user_id":694773,"display_name":"Igor S."},"score":0,"creation_date":1425612235,"post_id":13018198,"comment_id":46044575,"body_markdown":"So I know that you can abstract away from the original intention of akka and rabbitMQ and say &quot;they both support messaging&quot; and thus are comparable, but I&#39;m trying to think about a problem where akka and rabbitmq will be  interchangable and can&#39;t find one.","body":"So I know that you can abstract away from the original intention of akka and rabbitMQ and say &quot;they both support messaging&quot; and thus are comparable, but I&#39;m trying to think about a problem where akka and rabbitmq will be  interchangable and can&#39;t find one."},{"owner":{"account_id":123612,"reputation":48061,"user_id":318174,"accept_rate":71,"display_name":"Adam Gent"},"score":1,"creation_date":1425641633,"post_id":13018198,"comment_id":46055204,"body_markdown":"I never said they were interchangeable. I even say they work great together and why. But he clearly is talking about distributed akka here and not akka the actor library. That&#39;s how I read it. Feel free to edit my post as your point is valid and could confuse others that stumble on the post.","body":"I never said they were interchangeable. I even say they work great together and why. But he clearly is talking about distributed akka here and not akka the actor library. That&#39;s how I read it. Feel free to edit my post as your point is valid and could confuse others that stumble on the post."},{"owner":{"account_id":123612,"reputation":48061,"user_id":318174,"accept_rate":71,"display_name":"Adam Gent"},"score":0,"creation_date":1425646049,"post_id":13018198,"comment_id":46057348,"body_markdown":"@IgorS. I tried fixing the answer but it is rather difficult because adding concurrency makes the answer too broad but I hope maybe it will help others.","body":"@IgorS. I tried fixing the answer but it is rather difficult because adding concurrency makes the answer too broad but I hope maybe it will help others."},{"owner":{"account_id":237843,"reputation":546,"user_id":506313,"display_name":"Rob Crawford"},"score":1,"creation_date":1508335070,"post_id":13018198,"comment_id":80571042,"body_markdown":"One the Akka Java API -- it&#39;s very clean now, especially with JDK 8 lambdas. I suspect it will get better if/when they introduce value objects with JDK 10.","body":"One the Akka Java API -- it&#39;s very clean now, especially with JDK 8 lambdas. I suspect it will get better if/when they introduce value objects with JDK 10."}],"tags":[],"owner":{"account_id":123612,"reputation":48061,"user_id":318174,"accept_rate":71,"display_name":"Adam Gent"},"comment_count":8,"down_vote_count":0,"up_vote_count":96,"is_accepted":false,"score":96,"last_activity_date":1463041644,"creation_date":1350933342,"answer_id":13018198,"question_id":5693346,"body_markdown":"First off the &quot;older&quot; message systems (MQ) are older in implementation but they are a newer in engineering idea of: *transactional persistent queues*. Scala Actors and Akka maybe a newer implementation but are built on an older concurrency model of Actors.\r\n\r\nThe two models however end up being very similar in practice because they both are event message based: See my answer to [RabbitMQ vs Akka][1].\r\n \r\nIf you&#39;re going to code only for the JVM then Akka is probably a good choice. Otherwise I would use RabbitMQ.\r\n\r\nAlso if you&#39;re a Scala developer, then Akka should be a no-brainer. However Akka&#39;s Java bindings are not very Java-ish and require casting due to Scala&#39;s type system. \r\n\r\nAlso in Java people don&#39;t typically make immutable objects which I recommend you do for messaging. Consequently its very easy in Java to accidentally do something using Akka that will not scale (using mutable objects for messages, relying on weird closure callback state). With MQ this is not a problem because the messages are always serialized at the cost of speed. With Akka they are generally not.\r\n\r\nAkka also scales better with large amount of consumers than most MQ. This is because for most MQ (JMS, AMQP) clients  every queue connection requires a thread... thus lots of queues == lots of permanently running threads. This is mainly a client issue though. I think ActiveMQ Apollo has a non-blocking dispatcher that purportedly fixes that issue for AMQP. The RabbitMQ client has channels that allow you to combine multiple consumers but there are still issues with large number of consumers potentially causing deadlocks or connections to die so generally more threads are added to avoid this issue. \r\n\r\nThat being said [Akka&#39;s remoting][2] is rather new and probably still doesn&#39;t offer all the reliable message guarantees and QoS that traditional message queues provide (but that is changing everyday). Its also generally peer-to-peer but does I think support server-to-peer which is generally what most MQ systems do (ie single point of failure) but there are MQ systems that are peer-to-peer (RabbitMQ is server-to-peer).\r\n\r\n**Finally RabbitMQ and Akka actually make a good pair.** You can use Akka as a wrapper to RabbitMQ particularly since RabbitMQ does not help you with handling the consumption of messages and routing the messages locally (in a single JVM).\r\n\r\n**When to choose Akka**\r\n\r\n * Have lots of consumers (think millions).\r\n * Need low latency\r\n * Open to the Actor concurrency model\r\n\r\n*Example system: An interactive real time chat system*\r\n\r\n**When to choose MQ**\r\n\r\n * Need to integrate with lots of different systems (ie non JVM)\r\n * Message reliability is more important than latency\r\n * Would like more tools and admin UI\r\n * Because of previous points better for long running tasks\r\n * Would like to use a different concurrency model than Actors\r\n\r\n*Example system: A scheduled transactional batch processing system*\r\n \r\n**EDIT based on concerned comments**\r\n\r\nI made an assumption that the OP was concerned with distributed processing which both [Akka][3] and Message Queues can handle. That is I assumed he was talking about [distributed Akka][4]. **Using Akka for local concurrency is an apples to orange comparison to most message queues**. I say most because you can apply the message queue model locally as a concurrency model (ie topic, queues, exchanges) which both the [Reactor][5] library and [simple-react][6] do.\r\n\r\nPicking the right concurrency model/library is very important for low latency applications. A distributed processing solution such as a message queue is generally not ideal because the routing is almost always done over the wire which is obviously slower than within application and thus Akka would be a superior choice. However I believe some proprietary MQ technologies allow for local routing. Also as I mentioned earlier most MQ clients are pretty stupid about threading and do not rely on non-blocking IO and have a thread per connection/queue/channel... ironically non-blocking io is not always low latency but is generally more resource efficient.\r\n\r\nAs you can see the topic of distributed programming and concurrent programming is rather large and changing everyday so my original intention was not confuse but rather focus on one particular area of distributed message processing which is what I though the OP was concerned with. In terms of concurrency one might want to focus their searches on &quot;reactive&quot; programming (RFP / streams) which is a &quot;newer&quot; but similar model to the actor model and message queue model of which all of these models can be generally combined because they are event based.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/11787971/318174\r\n  [2]: http://doc.akka.io/docs/akka/snapshot/scala/remoting.html\r\n  [3]: http://doc.akka.io/docs/akka/snapshot/scala/remoting.html\r\n  [4]: http://doc.akka.io/docs/akka/snapshot/scala/remoting.html\r\n  [5]: https://github.com/reactor/reactor\r\n  [6]: https://github.com/aol/simple-react#queues-topics-signals-quick-overview","title":"When to use actors instead of messaging solutions such as WebSphere MQ or Tibco Rendezvous?","body":"<p>First off the \"older\" message systems (MQ) are older in implementation but they are a newer in engineering idea of: <em>transactional persistent queues</em>. Scala Actors and Akka maybe a newer implementation but are built on an older concurrency model of Actors.</p>\n\n<p>The two models however end up being very similar in practice because they both are event message based: See my answer to <a href=\"https://stackoverflow.com/a/11787971/318174\">RabbitMQ vs Akka</a>.</p>\n\n<p>If you're going to code only for the JVM then Akka is probably a good choice. Otherwise I would use RabbitMQ.</p>\n\n<p>Also if you're a Scala developer, then Akka should be a no-brainer. However Akka's Java bindings are not very Java-ish and require casting due to Scala's type system. </p>\n\n<p>Also in Java people don't typically make immutable objects which I recommend you do for messaging. Consequently its very easy in Java to accidentally do something using Akka that will not scale (using mutable objects for messages, relying on weird closure callback state). With MQ this is not a problem because the messages are always serialized at the cost of speed. With Akka they are generally not.</p>\n\n<p>Akka also scales better with large amount of consumers than most MQ. This is because for most MQ (JMS, AMQP) clients  every queue connection requires a thread... thus lots of queues == lots of permanently running threads. This is mainly a client issue though. I think ActiveMQ Apollo has a non-blocking dispatcher that purportedly fixes that issue for AMQP. The RabbitMQ client has channels that allow you to combine multiple consumers but there are still issues with large number of consumers potentially causing deadlocks or connections to die so generally more threads are added to avoid this issue. </p>\n\n<p>That being said <a href=\"http://doc.akka.io/docs/akka/snapshot/scala/remoting.html\" rel=\"noreferrer\">Akka's remoting</a> is rather new and probably still doesn't offer all the reliable message guarantees and QoS that traditional message queues provide (but that is changing everyday). Its also generally peer-to-peer but does I think support server-to-peer which is generally what most MQ systems do (ie single point of failure) but there are MQ systems that are peer-to-peer (RabbitMQ is server-to-peer).</p>\n\n<p><strong>Finally RabbitMQ and Akka actually make a good pair.</strong> You can use Akka as a wrapper to RabbitMQ particularly since RabbitMQ does not help you with handling the consumption of messages and routing the messages locally (in a single JVM).</p>\n\n<p><strong>When to choose Akka</strong></p>\n\n<ul>\n<li>Have lots of consumers (think millions).</li>\n<li>Need low latency</li>\n<li>Open to the Actor concurrency model</li>\n</ul>\n\n<p><em>Example system: An interactive real time chat system</em></p>\n\n<p><strong>When to choose MQ</strong></p>\n\n<ul>\n<li>Need to integrate with lots of different systems (ie non JVM)</li>\n<li>Message reliability is more important than latency</li>\n<li>Would like more tools and admin UI</li>\n<li>Because of previous points better for long running tasks</li>\n<li>Would like to use a different concurrency model than Actors</li>\n</ul>\n\n<p><em>Example system: A scheduled transactional batch processing system</em></p>\n\n<p><strong>EDIT based on concerned comments</strong></p>\n\n<p>I made an assumption that the OP was concerned with distributed processing which both <a href=\"http://doc.akka.io/docs/akka/snapshot/scala/remoting.html\" rel=\"noreferrer\">Akka</a> and Message Queues can handle. That is I assumed he was talking about <a href=\"http://doc.akka.io/docs/akka/snapshot/scala/remoting.html\" rel=\"noreferrer\">distributed Akka</a>. <strong>Using Akka for local concurrency is an apples to orange comparison to most message queues</strong>. I say most because you can apply the message queue model locally as a concurrency model (ie topic, queues, exchanges) which both the <a href=\"https://github.com/reactor/reactor\" rel=\"noreferrer\">Reactor</a> library and <a href=\"https://github.com/aol/simple-react#queues-topics-signals-quick-overview\" rel=\"noreferrer\">simple-react</a> do.</p>\n\n<p>Picking the right concurrency model/library is very important for low latency applications. A distributed processing solution such as a message queue is generally not ideal because the routing is almost always done over the wire which is obviously slower than within application and thus Akka would be a superior choice. However I believe some proprietary MQ technologies allow for local routing. Also as I mentioned earlier most MQ clients are pretty stupid about threading and do not rely on non-blocking IO and have a thread per connection/queue/channel... ironically non-blocking io is not always low latency but is generally more resource efficient.</p>\n\n<p>As you can see the topic of distributed programming and concurrent programming is rather large and changing everyday so my original intention was not confuse but rather focus on one particular area of distributed message processing which is what I though the OP was concerned with. In terms of concurrency one might want to focus their searches on \"reactive\" programming (RFP / streams) which is a \"newer\" but similar model to the actor model and message queue model of which all of these models can be generally combined because they are event based.</p>\n"},{"tags":[],"owner":{"account_id":1307057,"reputation":5794,"user_id":1255825,"accept_rate":74,"display_name":"JasonG"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1418503965,"creation_date":1418503965,"answer_id":27463527,"question_id":5693346,"body_markdown":"Akka-Camel would be a better example than ZeroMQ - ZeroMQ is a direct tcp to tcp communication (hence zero - there is no message queue).\r\n\r\nWith AkkaCamel you can abstract away the queue and produce/consume messages direct from an actor without any code to deal with the message queue message pushing/pulling.\r\n\r\nYou can forego akka-zeromq and use Akka directly with remoting.\r\nI think akka-zeromq is being removed from the core library but we built a good zeromq library for akka called scala-zeromq (https://github.com/mDialog/scala-zeromq)\r\n\r\nAkka has a couple key core use cases:\r\n\r\n1) Mutable state\r\n\r\nIt&#39;s easier to handle shared state by hiding it in an actor. As actors handle messages synchronously, you can hold state in an actor and expose that field with high consistency via the actor API\r\n\r\n2) Distribution\r\n\r\nConcurrency is free in akka so you say it&#39;s really about solving distribution problems. Distribution across machines and cores. Akka has build in &quot;location transparency&quot; for sending messages over the wire. It has clustering and patters associated for scaling up a single service as well. This makes it a very good solution for distribution (eg micro-service architecture)\r\n\r\nHere is an example of using Akka with ActiveMQ with Akka-Camel (using Java8)\r\n    \r\n    import akka.actor.Props;\r\n    import akka.camel.Camel;\r\n    import akka.camel.CamelExtension;\r\n    import akka.testkit.TestActorRef;\r\n    import akka.testkit.TestProbe;\r\n    import org.junit.Ignore;\r\n    import org.junit.Test;\r\n    import akka.camel.javaapi.UntypedProducerActor;\r\n    import akka.camel.javaapi.UntypedConsumerActor;\r\n    import static com.rogers.totes.TotesTestFixtures.*;\r\n    import org.apache.activemq.camel.component.*;\r\n    \r\n    public class MessagingTest {\r\n        @Test @Ignore\r\n        public void itShouldStoreAMessage() throws Exception{\r\n            String amqUrl = &quot;nio://localhost:61616&quot;;\r\n            Camel camel = (Camel) CamelExtension.apply(system);\r\n            camel.context().addComponent(&quot;activemq&quot;, ActiveMQComponent.activeMQComponent(amqUrl));\r\n    \r\n            TestProbe probe = TestProbe.apply(system);\r\n            TestActorRef producer = TestActorRef.create(system, Props.create((Producer.class)));\r\n            TestActorRef consumer = TestActorRef.create(system, Props.create((Consumer.class)));\r\n            producer.tell(&quot;Produce&quot;, probe.ref());\r\n    \r\n            Thread.sleep(1000);\r\n        }\r\n    }\r\n    \r\n    class Producer extends UntypedProducerActor{\r\n    \r\n        @Override\r\n        public String getEndpointUri() {\r\n            return &quot;activemq:foo.bar&quot;;\r\n        }\r\n    }\r\n    \r\n    class Consumer extends UntypedConsumerActor{\r\n    \r\n        @Override\r\n        public String getEndpointUri() {\r\n            return &quot;activemq:foo.bar&quot;;\r\n        }\r\n    \r\n        @Override\r\n        public void onReceive(Object message) throws Exception {\r\n            System.out.println(&quot;GOT A MESSAGE!&quot; + message);\r\n    \r\n        }\r\n    }\r\n\r\n","title":"When to use actors instead of messaging solutions such as WebSphere MQ or Tibco Rendezvous?","body":"<p>Akka-Camel would be a better example than ZeroMQ - ZeroMQ is a direct tcp to tcp communication (hence zero - there is no message queue).</p>\n\n<p>With AkkaCamel you can abstract away the queue and produce/consume messages direct from an actor without any code to deal with the message queue message pushing/pulling.</p>\n\n<p>You can forego akka-zeromq and use Akka directly with remoting.\nI think akka-zeromq is being removed from the core library but we built a good zeromq library for akka called scala-zeromq (<a href=\"https://github.com/mDialog/scala-zeromq\" rel=\"nofollow\">https://github.com/mDialog/scala-zeromq</a>)</p>\n\n<p>Akka has a couple key core use cases:</p>\n\n<p>1) Mutable state</p>\n\n<p>It's easier to handle shared state by hiding it in an actor. As actors handle messages synchronously, you can hold state in an actor and expose that field with high consistency via the actor API</p>\n\n<p>2) Distribution</p>\n\n<p>Concurrency is free in akka so you say it's really about solving distribution problems. Distribution across machines and cores. Akka has build in \"location transparency\" for sending messages over the wire. It has clustering and patters associated for scaling up a single service as well. This makes it a very good solution for distribution (eg micro-service architecture)</p>\n\n<p>Here is an example of using Akka with ActiveMQ with Akka-Camel (using Java8)</p>\n\n<pre><code>import akka.actor.Props;\nimport akka.camel.Camel;\nimport akka.camel.CamelExtension;\nimport akka.testkit.TestActorRef;\nimport akka.testkit.TestProbe;\nimport org.junit.Ignore;\nimport org.junit.Test;\nimport akka.camel.javaapi.UntypedProducerActor;\nimport akka.camel.javaapi.UntypedConsumerActor;\nimport static com.rogers.totes.TotesTestFixtures.*;\nimport org.apache.activemq.camel.component.*;\n\npublic class MessagingTest {\n    @Test @Ignore\n    public void itShouldStoreAMessage() throws Exception{\n        String amqUrl = \"nio://localhost:61616\";\n        Camel camel = (Camel) CamelExtension.apply(system);\n        camel.context().addComponent(\"activemq\", ActiveMQComponent.activeMQComponent(amqUrl));\n\n        TestProbe probe = TestProbe.apply(system);\n        TestActorRef producer = TestActorRef.create(system, Props.create((Producer.class)));\n        TestActorRef consumer = TestActorRef.create(system, Props.create((Consumer.class)));\n        producer.tell(\"Produce\", probe.ref());\n\n        Thread.sleep(1000);\n    }\n}\n\nclass Producer extends UntypedProducerActor{\n\n    @Override\n    public String getEndpointUri() {\n        return \"activemq:foo.bar\";\n    }\n}\n\nclass Consumer extends UntypedConsumerActor{\n\n    @Override\n    public String getEndpointUri() {\n        return \"activemq:foo.bar\";\n    }\n\n    @Override\n    public void onReceive(Object message) throws Exception {\n        System.out.println(\"GOT A MESSAGE!\" + message);\n\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2963929,"reputation":1238,"user_id":2914935,"display_name":"shvahabi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694208055,"creation_date":1694207744,"answer_id":77069911,"question_id":5693346,"body_markdown":"I do not know mentioned tools very well, but I&#39;m familiar with the underlying software engineering concepts. So I think the point relies on a single decision clue: decentralization. I mean other than distribution which all XXX&#160;-&#160;MQ and Akka (as message passing architecture components) can bring to your application there is another capability called decentralization. But since in most use cases decentralization and distribution can be reduced to each other, the validity of such questioning on your case shall be first rechecked. Then ask yourself, handling the message passing requirement on which of the singleton or peer-2-peer basis suits your needs.\r\n\r\nAkka does the job on a peer-2-peer basis so it offers a decentralized solution, but other mentioned tools offer centralized solutions. As a clarifying example think of implementing a network which require message passing architecture like Bitcoin. Akka is capable to support such use case, but other mentioned tools will fail. All other mentioned tools support message passing architecture as well, but none can support decentralization requirements of Bitcoin except Akka.","title":"When to use actors instead of messaging solutions such as WebSphere MQ or Tibco Rendezvous?","body":"<p>I do not know mentioned tools very well, but I'm familiar with the underlying software engineering concepts. So I think the point relies on a single decision clue: decentralization. I mean other than distribution which all XXX - MQ and Akka (as message passing architecture components) can bring to your application there is another capability called decentralization. But since in most use cases decentralization and distribution can be reduced to each other, the validity of such questioning on your case shall be first rechecked. Then ask yourself, handling the message passing requirement on which of the singleton or peer-2-peer basis suits your needs.</p>\n<p>Akka does the job on a peer-2-peer basis so it offers a decentralized solution, but other mentioned tools offer centralized solutions. As a clarifying example think of implementing a network which require message passing architecture like Bitcoin. Akka is capable to support such use case, but other mentioned tools will fail. All other mentioned tools support message passing architecture as well, but none can support decentralization requirements of Bitcoin except Akka.</p>\n"}],"owner":{"account_id":241323,"reputation":1201,"user_id":512063,"display_name":"Kai W&#228;hner"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39404,"favorite_count":0,"down_vote_count":0,"up_vote_count":115,"answer_count":4,"score":115,"last_activity_date":1694208055,"creation_date":1303041073,"question_id":5693346,"body_markdown":"I&#39;ve already read the question and answers to [What design decisions would favour Scala&#39;s Actors instead of JMS?][1].\r\n\r\nUsually, we use messaging solutions which have existed for years already: either a JMS implementation such as WebSphere MQ or Apache ActiveMQ is used for Point-To-Point communication, or Tibco Rendevous for Multicast messaging.\r\n\r\nThey are very stable, proven and offer high availability and performance. Nevertheless, configuration and setup seem much more complex than in Akka.\r\n\r\nWhen and why should I use Akka for some use cases where the aforementioned products - WebSphere MQ or ActiveMQ - have been used successfully so far? Why should I consider using Akka instead of WebSphere MQ or Tibco RV in my future project? \r\n\r\nAnd when should I avoid Akka? Does it offer the same high availability and performance as the other solutions? Or is it a bad idea to even compare Akka to the other messaging middlewares?\r\n\r\nMaybe there also is another messaging solution in the JVM environment which I should consider besides JMS (Point-to-Point), TibcoRV (Multicast) and Akka?\r\n\r\n  [1]: https://stackoverflow.com/q/4648280/1305344","title":"When to use actors instead of messaging solutions such as WebSphere MQ or Tibco Rendezvous?","body":"<p>I've already read the question and answers to <a href=\"https://stackoverflow.com/q/4648280/1305344\">What design decisions would favour Scala's Actors instead of JMS?</a>.</p>\n\n<p>Usually, we use messaging solutions which have existed for years already: either a JMS implementation such as WebSphere MQ or Apache ActiveMQ is used for Point-To-Point communication, or Tibco Rendevous for Multicast messaging.</p>\n\n<p>They are very stable, proven and offer high availability and performance. Nevertheless, configuration and setup seem much more complex than in Akka.</p>\n\n<p>When and why should I use Akka for some use cases where the aforementioned products - WebSphere MQ or ActiveMQ - have been used successfully so far? Why should I consider using Akka instead of WebSphere MQ or Tibco RV in my future project? </p>\n\n<p>And when should I avoid Akka? Does it offer the same high availability and performance as the other solutions? Or is it a bad idea to even compare Akka to the other messaging middlewares?</p>\n\n<p>Maybe there also is another messaging solution in the JVM environment which I should consider besides JMS (Point-to-Point), TibcoRV (Multicast) and Akka?</p>\n"},{"tags":["java","kotlin","google-home","google-smart-home"],"answers":[{"tags":[],"owner":{"account_id":27501705,"reputation":79,"user_id":20985270,"display_name":"Armen Sarkisyan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694207613,"creation_date":1694207613,"answer_id":77069905,"question_id":77007912,"body_markdown":"Thanks for bringing this up. When you implement Report State you send us the data every time the state of the device changes. If you are seeing any discrepancies with the state of device you are sending to us and one in the [Homegraph viewer][1] tool, you can open a [public issue tracker ticket][2] and we can take a look.\r\nWe highly suggest taking one of our [Smart Home Codelabs][3] to get a hands-on experience on how to implement Report State, RequestSync etc.\r\n\r\n\r\n  [1]: https://smarthome-test-suite.withgoogle.com/devices\r\n  [2]: https://issuetracker.google.com/issues/new?component=655104&amp;template=1284148\r\n  [3]: https://developers.home.google.com/codelabs/smarthome-washer?hl=en#5","title":"google HomeGraphService reportStateAndNotification","body":"<p>Thanks for bringing this up. When you implement Report State you send us the data every time the state of the device changes. If you are seeing any discrepancies with the state of device you are sending to us and one in the <a href=\"https://smarthome-test-suite.withgoogle.com/devices\" rel=\"nofollow noreferrer\">Homegraph viewer</a> tool, you can open a <a href=\"https://issuetracker.google.com/issues/new?component=655104&amp;template=1284148\" rel=\"nofollow noreferrer\">public issue tracker ticket</a> and we can take a look.\nWe highly suggest taking one of our <a href=\"https://developers.home.google.com/codelabs/smarthome-washer?hl=en#5\" rel=\"nofollow noreferrer\">Smart Home Codelabs</a> to get a hands-on experience on how to implement Report State, RequestSync etc.</p>\n"}],"owner":{"account_id":4702178,"reputation":1183,"user_id":3805467,"display_name":"shalama"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1694207613,"creation_date":1693397459,"question_id":77007912,"body_markdown":"I try to implement [StateReporting][1] with the [HomeGraphService][2] api for my google action.  \r\nFor this I followed the google [state-report][1] documentation.\r\n\r\nThe issue is that the reportStateAndNotification function seems to do nothing.\r\nIt just returns an empty list of com.google.api.services.homegraph.v1.HomeGraphService$Devices$ReportStateAndNotification.\r\nAlso the state does not change in the HomeGraphViewer.\r\n\r\nWhen I use the access token from credentials.accessToken with curl everything works fine.\r\nAny help would be much appreciated. \r\n\r\n\r\n    val stream = Base64.getDecoder().decode(homeGraphServiceKey)\r\n        val credentials = GoogleCredentials.fromStream(stream.inputStream())\r\n            .createScoped(&quot;https://www.googleapis.com/auth/homegraph&quot;)\r\n        credentials.refreshIfExpired()\r\n        val token = credentials.accessToken\r\n\r\n\r\n        val service = HomeGraphService.Builder(\r\n            GoogleNetHttpTransport.newTrustedTransport(),\r\n            GsonFactory.getDefaultInstance(),\r\n            HttpCredentialsAdapter(credentials)\r\n\r\n        )\r\n            .setApplicationName(&quot;ff&quot;)\r\n            .build()\r\n\r\n        val states = mutableMapOf&lt;String, MutableMap&lt;String, Any&gt;&gt;()\r\n        val state = mutableMapOf&lt;String, Any&gt;()\r\n        state[&quot;on&quot;] = true\r\n        states[&quot;hue:cE1&quot;] = state\r\n\r\n\r\n        val request =\r\n            ReportStateAndNotificationRequest().setRequestId(\r\n                kotlin.random.Random.nextLong().toString()\r\n            )\r\n                .setAgentUserId(&quot;7b1d52e3-e68f-46cd-a8b9-6ce1fdfe5b62&quot;).setPayload(\r\n                    StateAndNotificationPayload().setDevices(\r\n                        ReportStateAndNotificationDevice().setStates(\r\n                            states.toMap()\r\n                        )\r\n                    )\r\n                )\r\n\r\n\r\n        val response = service?.devices()?.reportStateAndNotification(request)\r\n\r\n\r\ncurl:\r\n\r\n\r\n    {\r\n      &quot;requestId&quot;: &quot;123ABC&quot;,\r\n      &quot;agentUserId&quot;: &quot;7b1d52e3-e68f-46cd-a8b9-6ce1fdfe5b62&quot;,\r\n      &quot;payload&quot;: {\r\n        &quot;devices&quot;: {\r\n          &quot;states&quot;: {\r\n            &quot;hue:cE1&quot;: {\r\n              &quot;on&quot;: true\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    curl -X POST -H &quot;Authorization: Bearer token”   -H &quot;Content-Type: application/json&quot;   -d @request   &quot;https://homegraph.googleapis.com/v1/devices:reportStateAndNotification&quot;\r\n\r\n\r\n  [1]: https://developers.home.google.com/cloud-to-cloud/integration/report-state\r\n  [2]: https://developers.home.google.com/reference/home-graph/rpc","title":"google HomeGraphService reportStateAndNotification","body":"<p>I try to implement <a href=\"https://developers.home.google.com/cloud-to-cloud/integration/report-state\" rel=\"nofollow noreferrer\">StateReporting</a> with the <a href=\"https://developers.home.google.com/reference/home-graph/rpc\" rel=\"nofollow noreferrer\">HomeGraphService</a> api for my google action.<br />\nFor this I followed the google <a href=\"https://developers.home.google.com/cloud-to-cloud/integration/report-state\" rel=\"nofollow noreferrer\">state-report</a> documentation.</p>\n<p>The issue is that the reportStateAndNotification function seems to do nothing.\nIt just returns an empty list of com.google.api.services.homegraph.v1.HomeGraphService$Devices$ReportStateAndNotification.\nAlso the state does not change in the HomeGraphViewer.</p>\n<p>When I use the access token from credentials.accessToken with curl everything works fine.\nAny help would be much appreciated.</p>\n<pre><code>val stream = Base64.getDecoder().decode(homeGraphServiceKey)\n    val credentials = GoogleCredentials.fromStream(stream.inputStream())\n        .createScoped(&quot;https://www.googleapis.com/auth/homegraph&quot;)\n    credentials.refreshIfExpired()\n    val token = credentials.accessToken\n\n\n    val service = HomeGraphService.Builder(\n        GoogleNetHttpTransport.newTrustedTransport(),\n        GsonFactory.getDefaultInstance(),\n        HttpCredentialsAdapter(credentials)\n\n    )\n        .setApplicationName(&quot;ff&quot;)\n        .build()\n\n    val states = mutableMapOf&lt;String, MutableMap&lt;String, Any&gt;&gt;()\n    val state = mutableMapOf&lt;String, Any&gt;()\n    state[&quot;on&quot;] = true\n    states[&quot;hue:cE1&quot;] = state\n\n\n    val request =\n        ReportStateAndNotificationRequest().setRequestId(\n            kotlin.random.Random.nextLong().toString()\n        )\n            .setAgentUserId(&quot;7b1d52e3-e68f-46cd-a8b9-6ce1fdfe5b62&quot;).setPayload(\n                StateAndNotificationPayload().setDevices(\n                    ReportStateAndNotificationDevice().setStates(\n                        states.toMap()\n                    )\n                )\n            )\n\n\n    val response = service?.devices()?.reportStateAndNotification(request)\n</code></pre>\n<p>curl:</p>\n<pre><code>{\n  &quot;requestId&quot;: &quot;123ABC&quot;,\n  &quot;agentUserId&quot;: &quot;7b1d52e3-e68f-46cd-a8b9-6ce1fdfe5b62&quot;,\n  &quot;payload&quot;: {\n    &quot;devices&quot;: {\n      &quot;states&quot;: {\n        &quot;hue:cE1&quot;: {\n          &quot;on&quot;: true\n        }\n      }\n    }\n  }\n}\n\ncurl -X POST -H &quot;Authorization: Bearer token”   -H &quot;Content-Type: application/json&quot;   -d @request   &quot;https://homegraph.googleapis.com/v1/devices:reportStateAndNotification&quot;\n</code></pre>\n"},{"tags":["java","python","jvm","jpype"],"answers":[{"tags":[],"owner":{"account_id":2748789,"reputation":972,"user_id":2368596,"display_name":"Marcelo Sardelich"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1399061705,"creation_date":1399061705,"answer_id":23436235,"question_id":23430466,"body_markdown":"I solved the problem and I would let the answer here for the records.\r\n\r\n1) **Nothing was wrong with the source code.**\r\n\r\n2) Problem was that my `Python` was 32 bits and my `java sdk` (including the javac bytecode compiler) was 64 bits. I uninstalled the `java sdk` and re-installed a 32bits version. Done! Solved!\r\n  ","title":"JPype class not found","body":"<p>I solved the problem and I would let the answer here for the records.</p>\n\n<p>1) <strong>Nothing was wrong with the source code.</strong></p>\n\n<p>2) Problem was that my <code>Python</code> was 32 bits and my <code>java sdk</code> (including the javac bytecode compiler) was 64 bits. I uninstalled the <code>java sdk</code> and re-installed a 32bits version. Done! Solved!</p>\n"},{"tags":[],"owner":{"account_id":7746273,"reputation":89,"user_id":5863915,"display_name":"lixiaosi33"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1461654460,"creation_date":1461654460,"answer_id":36857669,"question_id":23430466,"body_markdown":"Try to change your path like this:\r\n\r\n        jpype.startJVM(jpype.getDefaultJVMPath(), &#39;-ea&#39;, &#39;-Djava.class.path=c:\\\\tmp\\&#39;)","title":"JPype class not found","body":"<p>Try to change your path like this:</p>\n\n<pre><code>    jpype.startJVM(jpype.getDefaultJVMPath(), '-ea', '-Djava.class.path=c:\\\\tmp\\')\n</code></pre>\n"},{"comments":[{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":1,"creation_date":1694208394,"post_id":77069878,"comment_id":135866141,"body_markdown":"you are aware that the author found the solution himself and already added an [answer](https://stackoverflow.com/a/23436235/85421) ? (almost 10 years ago)","body":"you are aware that the author found the solution himself and already added an <a href=\"https://stackoverflow.com/a/23436235/85421\">answer</a> ? (almost 10 years ago)"},{"owner":{"account_id":24222271,"reputation":1,"user_id":18177283,"display_name":"Daniel Felipe Henao Toro"},"score":0,"creation_date":1694755143,"post_id":77069878,"comment_id":135935460,"body_markdown":"Yes I know, I just wanted to add any other possible solution, in case someone goes through the same, didn&#180;t know I could not post for that reason. I think this world needs more empathy @user85421","body":"Yes I know, I just wanted to add any other possible solution, in case someone goes through the same, didn&#180;t know I could not post for that reason. I think this world needs more empathy @user85421"}],"tags":[],"owner":{"account_id":24222271,"reputation":1,"user_id":18177283,"display_name":"Daniel Felipe Henao Toro"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1694207381,"creation_date":1694207146,"answer_id":77069878,"question_id":23430466,"body_markdown":"Try to use your path with one `\\` instead of two `\\` and also the root of the Windows platform with a capitalized `C` as in:\r\n\r\n```\r\njpype.startJVM(jpype.getDefaultJVMPath(), &quot;-Djava.class.path=C:\\tmp\\A.jar&quot;)\r\n```\r\n\r\nIn my case, it worked.\r\n\r\n**Important notes:**\r\n- I have a JDK 11 and Python 3.9.6, both in 64 bits.\r\n\r\n- You could create a jar file that packages the class A.\r\n\r\n- You could check for the number of bits of Python you have installed by executing the following command in your command line:\r\n\r\n```\r\npython -c &quot;import sys; print(sys.maxsize &gt; 2**32)&quot;\r\n```","title":"JPype class not found","body":"<p>Try to use your path with one <code>\\</code> instead of two <code>\\</code> and also the root of the Windows platform with a capitalized <code>C</code> as in:</p>\n<pre><code>jpype.startJVM(jpype.getDefaultJVMPath(), &quot;-Djava.class.path=C:\\tmp\\A.jar&quot;)\n</code></pre>\n<p>In my case, it worked.</p>\n<p><strong>Important notes:</strong></p>\n<ul>\n<li><p>I have a JDK 11 and Python 3.9.6, both in 64 bits.</p>\n</li>\n<li><p>You could create a jar file that packages the class A.</p>\n</li>\n<li><p>You could check for the number of bits of Python you have installed by executing the following command in your command line:</p>\n</li>\n</ul>\n<pre><code>python -c &quot;import sys; print(sys.maxsize &gt; 2**32)&quot;\n</code></pre>\n"}],"owner":{"account_id":2748789,"reputation":972,"user_id":2368596,"display_name":"Marcelo Sardelich"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8399,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":23436235,"answer_count":3,"score":2,"last_activity_date":1694207381,"creation_date":1399040679,"question_id":23430466,"body_markdown":"JPype is an amazing project since I allows to instantiate a `JVM` directly from `Python`.\r\n\r\nUnfortunately, I got stuck in the first baby steps.\r\n\r\nI have `A.java` source code (**`located in C:\\tmp folder`**):\r\n\r\n    class A {\r\n    \tpublic A() {\r\n            super();\r\n        }\r\n        public String sayHi() {\r\n            return(&quot;Hello&quot;);\r\n        }\r\n    }\r\n\r\nWhich was compiled to a class, using: `javac A.java`\r\n\r\nThus, A.class is located in **`C:\\tmp`** folder.\r\n\r\nI have the following `Python` source code:\r\n\r\n    import os\r\n    import jpype\r\n    jpype.startJVM(jpype.getDefaultJVMPath(), &#39;-ea&#39;, &#39;-Djava.class.path=c:\\\\tmp&#39;)\r\n    A = jpype.JClass(&quot;A&quot;)\r\n    a = A()\r\n    print a.sayHi()\r\n    jpype.shutdownJVM()\r\n\r\nWhen I run it, I get the error below:\r\n\r\n    C:\\tmp&gt;jpype_test.py\r\n    Traceback (most recent call last):\r\n      File &quot;C:\\tmp\\jpype_test.py&quot;, line 10, in &lt;module&gt;\r\n        A = jpype.JClass(&quot;A&quot;)\r\n      File &quot;C:\\Python27\\lib\\site-packages\\jpype\\_jclass.py&quot;, line 54, in JClass\r\n        raise _RUNTIMEEXCEPTION.PYEXC(&quot;Class %s not found&quot; % name)\r\n    jpype._jexception.ExceptionPyRaisable: java.lang.Exception: Class A not found\r\n\r\nSince I can&#39;t find the A class, it is probably an issue related to CLASSPATH, but I can&#39;t realize what I am doing wrong.\r\n\r\nAny clues?\r\n\r\n**EDIT 1:**\r\n\r\nThe problem persists. But, just to add to my question, if I use native java libraries, like: java.util, the code runs WITHOUT errors. For example, the code below works:\r\n\r\n    import jpype\r\n    jpype.startJVM(jpype.getDefaultJVMPath())\r\n    util = jpype.JPackage(&quot;java.util&quot;)\r\n    al = util.ArrayList()\r\n    al.add(1)\r\n    al.add(2)\r\n    print al.size()\r\n    jpype.shutdownJVM()\r\n\r\nAnd returns 2.\r\n\r\n\r\n**EDIT 2:**\r\n\r\nIssue solved, see answer below...\r\n","title":"JPype class not found","body":"<p>JPype is an amazing project since I allows to instantiate a <code>JVM</code> directly from <code>Python</code>.</p>\n\n<p>Unfortunately, I got stuck in the first baby steps.</p>\n\n<p>I have <code>A.java</code> source code (<strong><code>located in C:\\tmp folder</code></strong>):</p>\n\n<pre><code>class A {\n    public A() {\n        super();\n    }\n    public String sayHi() {\n        return(\"Hello\");\n    }\n}\n</code></pre>\n\n<p>Which was compiled to a class, using: <code>javac A.java</code></p>\n\n<p>Thus, A.class is located in <strong><code>C:\\tmp</code></strong> folder.</p>\n\n<p>I have the following <code>Python</code> source code:</p>\n\n<pre><code>import os\nimport jpype\njpype.startJVM(jpype.getDefaultJVMPath(), '-ea', '-Djava.class.path=c:\\\\tmp')\nA = jpype.JClass(\"A\")\na = A()\nprint a.sayHi()\njpype.shutdownJVM()\n</code></pre>\n\n<p>When I run it, I get the error below:</p>\n\n<pre><code>C:\\tmp&gt;jpype_test.py\nTraceback (most recent call last):\n  File \"C:\\tmp\\jpype_test.py\", line 10, in &lt;module&gt;\n    A = jpype.JClass(\"A\")\n  File \"C:\\Python27\\lib\\site-packages\\jpype\\_jclass.py\", line 54, in JClass\n    raise _RUNTIMEEXCEPTION.PYEXC(\"Class %s not found\" % name)\njpype._jexception.ExceptionPyRaisable: java.lang.Exception: Class A not found\n</code></pre>\n\n<p>Since I can't find the A class, it is probably an issue related to CLASSPATH, but I can't realize what I am doing wrong.</p>\n\n<p>Any clues?</p>\n\n<p><strong>EDIT 1:</strong></p>\n\n<p>The problem persists. But, just to add to my question, if I use native java libraries, like: java.util, the code runs WITHOUT errors. For example, the code below works:</p>\n\n<pre><code>import jpype\njpype.startJVM(jpype.getDefaultJVMPath())\nutil = jpype.JPackage(\"java.util\")\nal = util.ArrayList()\nal.add(1)\nal.add(2)\nprint al.size()\njpype.shutdownJVM()\n</code></pre>\n\n<p>And returns 2.</p>\n\n<p><strong>EDIT 2:</strong></p>\n\n<p>Issue solved, see answer below...</p>\n"},{"tags":["java","unsigned","division"],"answers":[{"tags":[],"owner":{"account_id":20439,"reputation":4580,"user_id":48839,"display_name":"Chad Okere"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1261196318,"creation_date":1261196318,"answer_id":1931941,"question_id":1931904,"body_markdown":"Well, if you shift down by one bit, you could divide the resulting two numbers, then shift up twice (because the resulting number would be 4 times smaller). But that would only work on even numbers, since you would lose the least significant bit. \r\n\r\nI don&#39;t really think it would save you any time to check for that condition. (or check for numbers smaller then 2&lt;sup&gt;31&lt;/sup&gt;) ","title":"Java unsigned division without casting to long?","body":"<p>Well, if you shift down by one bit, you could divide the resulting two numbers, then shift up twice (because the resulting number would be 4 times smaller). But that would only work on even numbers, since you would lose the least significant bit. </p>\n\n<p>I don't really think it would save you any time to check for that condition. (or check for numbers smaller then 2<sup>31</sup>) </p>\n"},{"tags":[],"owner":{"account_id":77142,"reputation":9356,"user_id":220381,"accept_rate":75,"display_name":"Ash"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1261196648,"creation_date":1261196648,"answer_id":1931949,"question_id":1931904,"body_markdown":"You could always used `BigInteger`, which works on arbitrary sized integers, but that would be a lot more expensive than promoting to `long` and cast back as `int`. Is your intention to improve performance (hence you want a &quot;pure integer&quot; solution to avoid the time for casts) or to improve how readable/understandable the code is (in which case BigInteger might be neater)?","title":"Java unsigned division without casting to long?","body":"<p>You could always used <code>BigInteger</code>, which works on arbitrary sized integers, but that would be a lot more expensive than promoting to <code>long</code> and cast back as <code>int</code>. Is your intention to improve performance (hence you want a \"pure integer\" solution to avoid the time for casts) or to improve how readable/understandable the code is (in which case BigInteger might be neater)?</p>\n"},{"comments":[{"owner":{"account_id":446566,"reputation":18084,"user_id":839689,"accept_rate":71,"display_name":"Nayuki"},"score":0,"creation_date":1661140600,"post_id":65536248,"comment_id":129692488,"body_markdown":"And if the JVM implementers did their job well, this function call would be intrinsified into a native unsigned division machine instruction - which means there would be no overhead, and would probably be just as fast as signed division.","body":"And if the JVM implementers did their job well, this function call would be intrinsified into a native unsigned division machine instruction - which means there would be no overhead, and would probably be just as fast as signed division."}],"tags":[],"owner":{"account_id":7123842,"reputation":27597,"user_id":5684257,"display_name":"HTNW"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1609564721,"creation_date":1609564721,"answer_id":65536248,"question_id":1931904,"body_markdown":"In Java 8 and up, `Integer` has a whole collection of operations on unsigned `int`s\r\n\r\n&lt;pre&gt;&lt;code&gt;reg[a] = &lt;a href=&quot;https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html#divideUnsigned-int-int-&quot;&gt;Integer.divideUnsigned&lt;/a&gt;(reg[b], reg[c]);&lt;/code&gt;&lt;/pre&gt;","title":"Java unsigned division without casting to long?","body":"<p>In Java 8 and up, <code>Integer</code> has a whole collection of operations on unsigned <code>int</code>s</p>\n<pre><code>reg[a] = <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html#divideUnsigned-int-int-\" rel=\"nofollow noreferrer\">Integer.divideUnsigned</a>(reg[b], reg[c]);</code></pre>\n"},{"tags":[],"owner":{"account_id":446566,"reputation":18084,"user_id":839689,"accept_rate":71,"display_name":"Nayuki"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694204822,"creation_date":1661142643,"answer_id":73440242,"question_id":1931904,"body_markdown":"Other people have mentioned simple and clearly correct approaches like casting to `long`, or using [`Integer.divideUnsigned()`](https://cr.openjdk.java.net/~iris/se/17/latestSpec/api/java.base/java/lang/Integer.html#divideUnsigned(int,int)) (Java SE 8+), or using [`BigInteger`](https://cr.openjdk.java.net/~iris/se/17/latestSpec/api/java.base/java/math/BigInteger.html).\r\n\r\nPractically speaking, **`Integer.divideUnsigned()`** is the clearest and most performant way to do it, because the JVM probably intrinsifies this function call into a native unsigned division machine instruction, making it run as fast as the language-level signed division operator `/`.\r\n\r\nBut for the sake of completeness, here is how to emulate `uint32 / uint32` in pure Java (no C or assembly) in a relatively efficient manner, *without using wider types* like `long` or `BigInteger`:\r\n\r\n```java\r\nint divideUint32(int x, int y) {\r\n    if (y &lt; 0) {  // i.e. 2^31 &lt;= unsigned y &lt; 2^32\r\n        // Do unsigned comparison\r\n        return (x ^ 0x8000_0000) &gt;= (y ^ 0x8000_0000) ? 1 : 0;\r\n    }\r\n    else if (x &gt;= 0 || y == 0) {\r\n        assert y &gt;= 0;\r\n        return x / y;  // Straightforward or division by zero\r\n    }\r\n    else {  // The hard case: signed x &lt; 0 &amp;&amp; signed y &gt; 0\r\n        assert x &lt; 0 &amp;&amp; y &gt; 0;\r\n        // In other words, 2^31 &lt;= unsigned x &lt; 2^32 &amp;&amp; 0 &lt; unsigned y &lt; 2^31\r\n        int shift = Integer.numberOfLeadingZeros(y);\r\n        assert shift &gt; 0;\r\n        assert (y &lt;&lt; shift) &lt; 0;\r\n        // Do one step of long division\r\n        if (x &lt; (y &lt;&lt; shift))\r\n            shift--;\r\n        return (1 &lt;&lt; shift) | (x - (y &lt;&lt; shift)) / y;\r\n    }\r\n}\r\n```\r\n\r\nI have checked this code on millions of random test cases over the full range of `int` values. In case anyone is wondering about adapting the code to work with `long`, it is easy to do so by following the implicit patterns in the logic.","title":"Java unsigned division without casting to long?","body":"<p>Other people have mentioned simple and clearly correct approaches like casting to <code>long</code>, or using <a href=\"https://cr.openjdk.java.net/%7Eiris/se/17/latestSpec/api/java.base/java/lang/Integer.html#divideUnsigned(int,int)\" rel=\"nofollow noreferrer\"><code>Integer.divideUnsigned()</code></a> (Java SE 8+), or using <a href=\"https://cr.openjdk.java.net/%7Eiris/se/17/latestSpec/api/java.base/java/math/BigInteger.html\" rel=\"nofollow noreferrer\"><code>BigInteger</code></a>.</p>\n<p>Practically speaking, <strong><code>Integer.divideUnsigned()</code></strong> is the clearest and most performant way to do it, because the JVM probably intrinsifies this function call into a native unsigned division machine instruction, making it run as fast as the language-level signed division operator <code>/</code>.</p>\n<p>But for the sake of completeness, here is how to emulate <code>uint32 / uint32</code> in pure Java (no C or assembly) in a relatively efficient manner, <em>without using wider types</em> like <code>long</code> or <code>BigInteger</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>int divideUint32(int x, int y) {\n    if (y &lt; 0) {  // i.e. 2^31 &lt;= unsigned y &lt; 2^32\n        // Do unsigned comparison\n        return (x ^ 0x8000_0000) &gt;= (y ^ 0x8000_0000) ? 1 : 0;\n    }\n    else if (x &gt;= 0 || y == 0) {\n        assert y &gt;= 0;\n        return x / y;  // Straightforward or division by zero\n    }\n    else {  // The hard case: signed x &lt; 0 &amp;&amp; signed y &gt; 0\n        assert x &lt; 0 &amp;&amp; y &gt; 0;\n        // In other words, 2^31 &lt;= unsigned x &lt; 2^32 &amp;&amp; 0 &lt; unsigned y &lt; 2^31\n        int shift = Integer.numberOfLeadingZeros(y);\n        assert shift &gt; 0;\n        assert (y &lt;&lt; shift) &lt; 0;\n        // Do one step of long division\n        if (x &lt; (y &lt;&lt; shift))\n            shift--;\n        return (1 &lt;&lt; shift) | (x - (y &lt;&lt; shift)) / y;\n    }\n}\n</code></pre>\n<p>I have checked this code on millions of random test cases over the full range of <code>int</code> values. In case anyone is wondering about adapting the code to work with <code>long</code>, it is easy to do so by following the implicit patterns in the logic.</p>\n"}],"owner":{"account_id":36637,"reputation":7380,"user_id":104533,"accept_rate":88,"display_name":"Adam Goode"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1930,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":1931941,"answer_count":4,"score":4,"last_activity_date":1694204822,"creation_date":1261195221,"question_id":1931904,"body_markdown":"I have written an interpreter that requires me to perform 32-bit division of unsigned integers. In Java, I can do this as:\r\n\r\n    reg[a] = (int) ((reg[b] &amp; 0xFFFFFFFFL) / (reg[c] &amp; 0xFFFFFFFFL));\r\n\r\nBut I would like to avoid the conversion to long and back to int. Java already gives the unsigned right shift operator `&gt;&gt;&gt;` for that special case, so maybe there is a clever way to do unsigned division in the same way.\r\n\r\nNote that add and multiply work fine, since two&#39;s compliment numbers just work.\r\n\r\nIs there a better way in Java to do this?","title":"Java unsigned division without casting to long?","body":"<p>I have written an interpreter that requires me to perform 32-bit division of unsigned integers. In Java, I can do this as:</p>\n\n<pre><code>reg[a] = (int) ((reg[b] &amp; 0xFFFFFFFFL) / (reg[c] &amp; 0xFFFFFFFFL));\n</code></pre>\n\n<p>But I would like to avoid the conversion to long and back to int. Java already gives the unsigned right shift operator <code>&gt;&gt;&gt;</code> for that special case, so maybe there is a clever way to do unsigned division in the same way.</p>\n\n<p>Note that add and multiply work fine, since two's compliment numbers just work.</p>\n\n<p>Is there a better way in Java to do this?</p>\n"},{"tags":["java","opengl","lwjgl"],"comments":[{"owner":{"account_id":64944,"reputation":710,"user_id":191443,"accept_rate":91,"display_name":"Eric Fortier"},"score":0,"creation_date":1694204298,"post_id":45342366,"comment_id":135865602,"body_markdown":"I know this post is really old, but I&#39;m running in this exact problem with the stutter, but using Delphi as a programming language. Same &quot;Fix your timestep&quot; loop. \n\nI have spent close to 40 hours working on this in the past month. I have the main loop timed to the microsecond, and everything triggers as it should and the animation is really smooth, but it will have some stutter at extremely random moments. I have trimmed down the animation and loop to the bare minimum, a cube moving from left to right, repeating over and over.\n\nVSync or no, frame capping or no. Did you fix your problem?","body":"I know this post is really old, but I&#39;m running in this exact problem with the stutter, but using Delphi as a programming language. Same &quot;Fix your timestep&quot; loop.   I have spent close to 40 hours working on this in the past month. I have the main loop timed to the microsecond, and everything triggers as it should and the animation is really smooth, but it will have some stutter at extremely random moments. I have trimmed down the animation and loop to the bare minimum, a cube moving from left to right, repeating over and over.  VSync or no, frame capping or no. Did you fix your problem?"},{"owner":{"account_id":2968584,"reputation":50571,"user_id":2521214,"accept_rate":71,"display_name":"Spektre"},"score":1,"creation_date":1694675040,"post_id":45342366,"comment_id":135922886,"body_markdown":"@EricFortier without seeing MCVE  just guessing here but do you actually measure time or just use timer interval  as constant? You know at least on windows the timers are not very accurate time source (can be affected by OS any time) For C++ Builder (similar to Delphi) time critical stuff I prefer to measure the elapsed time directly either with `PerformanceCounters` (Windows) or `RDTSC`  (x86 x64). Another source of stuttering might be that your rendering is not synchronized with monitor sync signals along with double/triple buffering or bug in sequence of buffers (swapped them occasionaly)","body":"@EricFortier without seeing MCVE  just guessing here but do you actually measure time or just use timer interval  as constant? You know at least on windows the timers are not very accurate time source (can be affected by OS any time) For C++ Builder (similar to Delphi) time critical stuff I prefer to measure the elapsed time directly either with <code>PerformanceCounters</code> (Windows) or <code>RDTSC</code>  (x86 x64). Another source of stuttering might be that your rendering is not synchronized with monitor sync signals along with double/triple buffering or bug in sequence of buffers (swapped them occasionaly)"},{"owner":{"account_id":2968584,"reputation":50571,"user_id":2521214,"accept_rate":71,"display_name":"Spektre"},"score":1,"creation_date":1694675233,"post_id":45342366,"comment_id":135922927,"body_markdown":"@EricFortier for example I got MC perfect emulation and timing Z80 emulator done like this (timing in `[us]`) interconecting other ICs and passing ZEXALL which is way more difficult on timing than just rendering. See this: [Sprites sequence control through DeltaTime](https://stackoverflow.com/a/41920247/2521214) and all the sublinks in there it should be a good start point to your problem ... if its not time related then it might be gfx api used what is it (GDI encapsulated in VCL,firemonkey or GL,DX,X11 or what)?","body":"@EricFortier for example I got MC perfect emulation and timing Z80 emulator done like this (timing in <code>[us]</code>) interconecting other ICs and passing ZEXALL which is way more difficult on timing than just rendering. See this: <a href=\"https://stackoverflow.com/a/41920247/2521214\">Sprites sequence control through DeltaTime</a> and all the sublinks in there it should be a good start point to your problem ... if its not time related then it might be gfx api used what is it (GDI encapsulated in VCL,firemonkey or GL,DX,X11 or what)?"},{"owner":{"account_id":2968584,"reputation":50571,"user_id":2521214,"accept_rate":71,"display_name":"Spektre"},"score":1,"creation_date":1694675627,"post_id":45342366,"comment_id":135922992,"body_markdown":"@EricFortier Also in case you have separate threads for render and physics it might be the core source of your problem syncing them ... locking mechanisms (at least on windows) are a nightmare and usually the behavior changes with each windows version and SP ... making lockless schemes unreliable with updates... My experience lately (from win10+) sometimes even OS locks does not work as expected or at all","body":"@EricFortier Also in case you have separate threads for render and physics it might be the core source of your problem syncing them ... locking mechanisms (at least on windows) are a nightmare and usually the behavior changes with each windows version and SP ... making lockless schemes unreliable with updates... My experience lately (from win10+) sometimes even OS locks does not work as expected or at all"}],"answers":[{"comments":[{"owner":{"account_id":11342697,"reputation":117,"user_id":8316191,"accept_rate":80,"display_name":"Robert Harbison"},"score":0,"creation_date":1501194895,"post_id":45351205,"comment_id":77685351,"body_markdown":"For the first part I am using my own timer class. (I edited my original post to include it). Im not sure I understand what you are saying. I am currently running the update method at 30 UPS in that while loop. Is this not the same as what the scheduleAtFixedRate() would do? Or is scheduleAtFixedRate() just using ms to measure instead of measuring the amount of times called a second? If thats the case why would it matter which I use wouldn&#39;t the result be the same? For you second part I am currently working on implementing that. Is there any resources you can give me on that?","body":"For the first part I am using my own timer class. (I edited my original post to include it). Im not sure I understand what you are saying. I am currently running the update method at 30 UPS in that while loop. Is this not the same as what the scheduleAtFixedRate() would do? Or is scheduleAtFixedRate() just using ms to measure instead of measuring the amount of times called a second? If thats the case why would it matter which I use wouldn&#39;t the result be the same? For you second part I am currently working on implementing that. Is there any resources you can give me on that?"},{"owner":{"account_id":11342697,"reputation":117,"user_id":8316191,"accept_rate":80,"display_name":"Robert Harbison"},"score":0,"creation_date":1501198916,"post_id":45351205,"comment_id":77686490,"body_markdown":"Also I don&#39;t think it has anything to do with the speed of the rendering as I am only dealing with rendering 1 thing which is the player.","body":"Also I don&#39;t think it has anything to do with the speed of the rendering as I am only dealing with rendering 1 thing which is the player."},{"owner":{"account_id":11342697,"reputation":117,"user_id":8316191,"accept_rate":80,"display_name":"Robert Harbison"},"score":0,"creation_date":1501213690,"post_id":45351205,"comment_id":77689845,"body_markdown":"Thanks for explaining why I should use scheduleAtFixedRate(). I would still like to use my own Timer though so I can count fps, ups and calculate a alpha value. Is it correct that what you are saying is to replace my timer with the java timer? And to replace my while loop with scheduleAtFixedRate(). I tried just replacing my while loop with that method and I end up running at about 6270 UPS.","body":"Thanks for explaining why I should use scheduleAtFixedRate(). I would still like to use my own Timer though so I can count fps, ups and calculate a alpha value. Is it correct that what you are saying is to replace my timer with the java timer? And to replace my while loop with scheduleAtFixedRate(). I tried just replacing my while loop with that method and I end up running at about 6270 UPS."}],"tags":[],"owner":{"account_id":4792116,"reputation":7079,"user_id":3871028,"display_name":"Ripi2"},"comment_count":3,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1501197624,"creation_date":1501159490,"answer_id":45351205,"question_id":45342366,"body_markdown":"Your &quot;fixed time step&quot; is not as smooth as you think.\r\n&lt;br&gt;This code:\r\n\r\n    while (accumulator &gt;= interval) {\r\n        gameApp.update();\r\n        timer.updateUPS();\r\n        accumulator -= interval;\r\n    }\r\nmay run at 10000000Hz or at 0.1Hz depending on how long `gameApp.update()`takes to execute.\r\n&lt;p&gt;**Edit**: You can&#39;t take for sure that `timer.getDelta()` is aproximately the same value each time is called. Same goes for `accumulator`, which also depends on the remaining value after last `-=interval` call but starts with a different `delta` each time.\r\n&lt;br&gt;The OS can take more time for its own proccesses, delaying yours. Sometimes your *time-step based on measures* may run fine, and the next second it halts for a few milliseconds, enough to mess those measures.\r\n&lt;br&gt;Also, be aware that sending commands to GPU doesn&#39;t guarantee they get processed immediately; perhaps they accumulate and later run all in a row.\r\n\r\n&lt;p&gt;If you wish some code to be executed every M milliseconds (e.g. 16.6ms for 60 FPS) then use a **Timer** and **scheduleAtFixedRate()**. See [this](https://stackoverflow.com/questions/4044726/how-to-set-a-timer-in-java)\r\n\r\n&lt;p&gt;The next issue you must deal with is that rendering must be done in a shorter time than the fixed step, or else some delay appears. To achieve this goal send to the GPU most of data (vertices, textures, etc) just once. And for each frame render send only the updated data (the camera position, or just a few objects).\r\n","title":"Fixed time step stutter even with interpolation?","body":"<p>Your \"fixed time step\" is not as smooth as you think.\n<br>This code:</p>\n\n<pre><code>while (accumulator &gt;= interval) {\n    gameApp.update();\n    timer.updateUPS();\n    accumulator -= interval;\n}\n</code></pre>\n\n<p>may run at 10000000Hz or at 0.1Hz depending on how long <code>gameApp.update()</code>takes to execute.\n<p><strong>Edit</strong>: You can't take for sure that <code>timer.getDelta()</code> is aproximately the same value each time is called. Same goes for <code>accumulator</code>, which also depends on the remaining value after last <code>-=interval</code> call but starts with a different <code>delta</code> each time.\n<br>The OS can take more time for its own proccesses, delaying yours. Sometimes your <em>time-step based on measures</em> may run fine, and the next second it halts for a few milliseconds, enough to mess those measures.\n<br>Also, be aware that sending commands to GPU doesn't guarantee they get processed immediately; perhaps they accumulate and later run all in a row.</p>\n\n<p><p>If you wish some code to be executed every M milliseconds (e.g. 16.6ms for 60 FPS) then use a <strong>Timer</strong> and <strong>scheduleAtFixedRate()</strong>. See <a href=\"https://stackoverflow.com/questions/4044726/how-to-set-a-timer-in-java\">this</a></p>\n\n<p><p>The next issue you must deal with is that rendering must be done in a shorter time than the fixed step, or else some delay appears. To achieve this goal send to the GPU most of data (vertices, textures, etc) just once. And for each frame render send only the updated data (the camera position, or just a few objects).</p>\n"}],"owner":{"account_id":11342697,"reputation":117,"user_id":8316191,"accept_rate":80,"display_name":"Robert Harbison"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":716,"favorite_count":0,"down_vote_count":2,"up_vote_count":5,"answer_count":1,"score":3,"last_activity_date":1694204604,"creation_date":1501134749,"question_id":45342366,"body_markdown":"First let me describe what I mean by stutter. When the player moves it looks as if it moves forward a little then back to where it should be and keeps doing it. I am making a small game for learning purposes in lwjgl3 and I am using JOML as my math library. I implemented a fixed time step loop (FPS = 60 and UPS = 30) and I use interpolation to try and smooth my player movement. It works nicely sometimes (not as smooth as I want it though) but other times its just as stuttery as without it. Any ideas on how to fix this? Am I doing the interpolation correctly?\r\n\r\nGame Loop:\r\n\r\n\t@Override\r\n\tpublic void run() {\r\n\t\twindow.init(&quot;Game&quot;, 1280, 720);\r\n\t\tGL.createCapabilities();\r\n\t\t\r\n\t\tgameApp.init();\r\n\t\t\r\n\t\ttimer.init();\r\n\t\t\r\n\t\tfloat delta;\r\n\t\tfloat accumulator = 0f;\r\n\t\tfloat interval = 1f / Settings.TARGET_UPS;\r\n\t\tfloat alpha;\r\n\r\n\t\twhile (running) {\r\n\t\t\tdelta = timer.getDelta();\r\n\t\t\taccumulator += delta;\r\n\t\t\t\r\n\t\t\tgameApp.input();\r\n\t\t\t\r\n\t\t\twhile (accumulator &gt;= interval) {\r\n\t\t\t\tgameApp.update();\r\n\t\t\t\ttimer.updateUPS();\r\n\t\t\t\taccumulator -= interval;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\talpha = accumulator / interval;\r\n\t\t\t\r\n\t\t\tgameApp.render(alpha);\r\n\t\t\ttimer.updateFPS();\r\n\t\t\ttimer.update();\r\n\t\t\twindow.update();\r\n\t\t\t\r\n\t\t\tif (Settings.SHOW_PERFORMANCE) {\r\n\t\t\t\tSystem.out.println(&quot;FPS: &quot; + timer.getFPS() + &quot; UPS: &quot; + timer.getUPS());\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (window.windowShouldClose()) {\r\n\t\t\t\trunning = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tgameApp.cleanUp();\r\n\t\twindow.cleanUp();\r\n\t}\r\n\r\nSpriteRenderer:\r\n\r\n    public class SpriteRenderer {\r\n    \r\n    \tpublic StaticShader staticShader;\r\n    \t\r\n    \tpublic SpriteRenderer(StaticShader staticShader, Matrix4f projectionMatrix) {\r\n    \t\tthis.staticShader = staticShader;\r\n    \t\tstaticShader.start();\r\n    \t\tstaticShader.loadProjectionMatrix(projectionMatrix);\r\n    \t\tstaticShader.stop();\r\n    \t}\r\n    \t\r\n    \tpublic void render(Map&lt;TexturedMesh, List&lt;Entity&gt;&gt; entities, float alpha) {\r\n    \t\tfor (TexturedMesh mesh : entities.keySet()) {\r\n    \t\t\tprepareTexturedMesh(mesh);\r\n    \t\t\tList&lt;Entity&gt; batch = entities.get(mesh);\r\n    \t\t\tfor (Entity entity : batch) {\r\n    \t\t\t\t\r\n    \t\t\t\tVector2f spritePos = entity.getSprite().getTransform().getPosition();\r\n    \t\t\t\tVector2f playerPos = entity.getTransform().getPosition();\r\n    \t\t\t\tspritePos.x = playerPos.x * alpha + spritePos.x * (1.0f - alpha);\r\n    \t\t\t\tspritePos.y = playerPos.y * alpha + spritePos.y * (1.0f - alpha);\r\n    \t\t\t\t\r\n    \t\t\t\tprepareInstance(entity.getSprite());\r\n    \t\t\t\tGL11.glDrawArrays(GL11.GL_TRIANGLES, 0, entity.getSprite().getTexturedMesh().getMesh().getVertexCount());\r\n    \t\t\t}\r\n    \t\t\tunbindTexturedMesh();\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tprivate void unbindTexturedMesh() {\r\n    \t\tGL20.glDisableVertexAttribArray(0);\r\n    \t\tGL20.glDisableVertexAttribArray(1);\r\n    \t\tGL30.glBindVertexArray(0);\r\n    \t}\r\n    \t\r\n    \tprivate void prepareInstance(Sprite sprite) {\r\n    \t\tTransform spriteTransform = sprite.getTransform();\r\n    \t\tMatrix4f modelMatrix = Maths.createModelMatrix(spriteTransform.getPosition(), spriteTransform.getScale(), spriteTransform.getRotation());\r\n    \t\tstaticShader.loadModelMatrix(modelMatrix);\r\n    \t}\r\n    \r\n    \tprivate void prepareTexturedMesh(TexturedMesh texturedMesh) {\r\n    \t\tMesh mesh = texturedMesh.getMesh();\r\n    \t\tmesh.getVao().bind();\r\n    \t\tGL20.glEnableVertexAttribArray(0);\r\n    \t\tGL20.glEnableVertexAttribArray(1);\r\n    \r\n    \t\tGL13.glActiveTexture(GL13.GL_TEXTURE0);\r\n    \t\ttexturedMesh.getTexture().bind();\r\n    \t}\r\n    }\r\n\r\nEntityPlayer:\r\n\r\n    public class EntityPlayer extends Entity {\r\n    \t\r\n    \tprivate float xspeed = 0;\r\n    \tprivate float yspeed = 0;\r\n    \t\r\n    \tprivate final float SPEED = 0.04f;\r\n    \t\r\n    \tpublic EntityPlayer(Sprite sprite, Vector2f position, Vector2f scale, float rotation) {\r\n    \t\tsuper(sprite, position, scale, rotation);\r\n    \t\tthis.getSprite().getTransform().setPosition(position);\r\n    \t\tthis.getSprite().getTransform().setScale(scale);\r\n    \t\tthis.getSprite().getTransform().setRotation(rotation);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void update() {\r\n    \t\tthis.getTransform().setPosition(new Vector2f(this.getTransform().getPosition().x += xspeed, this.getTransform().getPosition().y += yspeed));\r\n    \t}\r\n    \t\r\n    \tpublic void input() {\r\n    \t\tif (KeyboardHandler.isKeyDown(GLFW.GLFW_KEY_RIGHT)) {\r\n    \t\t\txspeed = SPEED;\r\n    \t\t} else if (KeyboardHandler.isKeyDown(GLFW.GLFW_KEY_LEFT)) {\r\n    \t\t\txspeed = -SPEED;\r\n    \t\t} else {\r\n    \t\t\txspeed = 0;\r\n    \t\t}\r\n    \r\n    \t\tif (KeyboardHandler.isKeyDown(GLFW.GLFW_KEY_UP)) {\r\n    \t\t\tyspeed = SPEED;\r\n    \t\t} else if (KeyboardHandler.isKeyDown(GLFW.GLFW_KEY_DOWN)) {\r\n    \t\t\tyspeed = -SPEED;\r\n    \t\t} else {\r\n    \t\t\tyspeed = 0;\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nTimer:\r\n\r\n        public class Timer {\r\n    \r\n    \tprivate double lastLoopTime;\r\n    \tprivate float timeCount;\r\n    \tprivate int fps;\r\n    \tprivate int fpsCount;\r\n    \tprivate int ups;\r\n    \tprivate int upsCount;\r\n    \t\r\n    \tpublic void init() {\r\n    \t\tlastLoopTime = getTime();\r\n    \t}\r\n    \t\r\n    \tpublic double getTime() {\r\n    \t\treturn GLFW.glfwGetTime();\r\n    \t}\r\n    \t\r\n    \tpublic float getDelta() {\r\n    \t\tdouble time = getTime();\r\n    \t\tfloat delta = (float) (time - lastLoopTime);\r\n    \t\tlastLoopTime = time;\r\n    \t\ttimeCount += delta;\r\n    \t\treturn delta;\r\n    \t}\r\n    \t\r\n    \tpublic void updateFPS() {\r\n    \t\tfpsCount++;\r\n    \t}\r\n    \t\r\n    \tpublic void updateUPS() {\r\n    \t\tupsCount++;\r\n    \t}\r\n    \t\r\n    \t// Update the FPS and UPS if a whole second has passed\r\n    \tpublic void update() {\r\n    \t\tif (timeCount &gt; 1f) {\r\n    \t\t\tfps = fpsCount;\r\n    \t\t\tfpsCount = 0;\r\n    \t\t\t\r\n    \t\t\tups = upsCount;\r\n    \t\t\tupsCount = 0;\r\n    \t\t\t\r\n    \t\t\ttimeCount -= 1f;\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tpublic int getFPS() {\r\n    \t\treturn fps &gt; 0 ? fps : fpsCount;\r\n    \t}\r\n    \t\r\n    \tpublic int getUPS() {\r\n    \t\treturn ups &gt; 0 ? ups : upsCount;\r\n    \t}\r\n    \t\r\n    \tpublic double getLastLoopTime() {\r\n    \t\treturn lastLoopTime;\r\n    \t}\r\n    }\r\n\r\n\r\n","title":"Fixed time step stutter even with interpolation?","body":"<p>First let me describe what I mean by stutter. When the player moves it looks as if it moves forward a little then back to where it should be and keeps doing it. I am making a small game for learning purposes in lwjgl3 and I am using JOML as my math library. I implemented a fixed time step loop (FPS = 60 and UPS = 30) and I use interpolation to try and smooth my player movement. It works nicely sometimes (not as smooth as I want it though) but other times its just as stuttery as without it. Any ideas on how to fix this? Am I doing the interpolation correctly?</p>\n\n<p>Game Loop:</p>\n\n<pre><code>@Override\npublic void run() {\n    window.init(\"Game\", 1280, 720);\n    GL.createCapabilities();\n\n    gameApp.init();\n\n    timer.init();\n\n    float delta;\n    float accumulator = 0f;\n    float interval = 1f / Settings.TARGET_UPS;\n    float alpha;\n\n    while (running) {\n        delta = timer.getDelta();\n        accumulator += delta;\n\n        gameApp.input();\n\n        while (accumulator &gt;= interval) {\n            gameApp.update();\n            timer.updateUPS();\n            accumulator -= interval;\n        }\n\n        alpha = accumulator / interval;\n\n        gameApp.render(alpha);\n        timer.updateFPS();\n        timer.update();\n        window.update();\n\n        if (Settings.SHOW_PERFORMANCE) {\n            System.out.println(\"FPS: \" + timer.getFPS() + \" UPS: \" + timer.getUPS());\n        }\n\n        if (window.windowShouldClose()) {\n            running = false;\n        }\n    }\n\n    gameApp.cleanUp();\n    window.cleanUp();\n}\n</code></pre>\n\n<p>SpriteRenderer:</p>\n\n<pre><code>public class SpriteRenderer {\n\n    public StaticShader staticShader;\n\n    public SpriteRenderer(StaticShader staticShader, Matrix4f projectionMatrix) {\n        this.staticShader = staticShader;\n        staticShader.start();\n        staticShader.loadProjectionMatrix(projectionMatrix);\n        staticShader.stop();\n    }\n\n    public void render(Map&lt;TexturedMesh, List&lt;Entity&gt;&gt; entities, float alpha) {\n        for (TexturedMesh mesh : entities.keySet()) {\n            prepareTexturedMesh(mesh);\n            List&lt;Entity&gt; batch = entities.get(mesh);\n            for (Entity entity : batch) {\n\n                Vector2f spritePos = entity.getSprite().getTransform().getPosition();\n                Vector2f playerPos = entity.getTransform().getPosition();\n                spritePos.x = playerPos.x * alpha + spritePos.x * (1.0f - alpha);\n                spritePos.y = playerPos.y * alpha + spritePos.y * (1.0f - alpha);\n\n                prepareInstance(entity.getSprite());\n                GL11.glDrawArrays(GL11.GL_TRIANGLES, 0, entity.getSprite().getTexturedMesh().getMesh().getVertexCount());\n            }\n            unbindTexturedMesh();\n        }\n    }\n\n    private void unbindTexturedMesh() {\n        GL20.glDisableVertexAttribArray(0);\n        GL20.glDisableVertexAttribArray(1);\n        GL30.glBindVertexArray(0);\n    }\n\n    private void prepareInstance(Sprite sprite) {\n        Transform spriteTransform = sprite.getTransform();\n        Matrix4f modelMatrix = Maths.createModelMatrix(spriteTransform.getPosition(), spriteTransform.getScale(), spriteTransform.getRotation());\n        staticShader.loadModelMatrix(modelMatrix);\n    }\n\n    private void prepareTexturedMesh(TexturedMesh texturedMesh) {\n        Mesh mesh = texturedMesh.getMesh();\n        mesh.getVao().bind();\n        GL20.glEnableVertexAttribArray(0);\n        GL20.glEnableVertexAttribArray(1);\n\n        GL13.glActiveTexture(GL13.GL_TEXTURE0);\n        texturedMesh.getTexture().bind();\n    }\n}\n</code></pre>\n\n<p>EntityPlayer:</p>\n\n<pre><code>public class EntityPlayer extends Entity {\n\n    private float xspeed = 0;\n    private float yspeed = 0;\n\n    private final float SPEED = 0.04f;\n\n    public EntityPlayer(Sprite sprite, Vector2f position, Vector2f scale, float rotation) {\n        super(sprite, position, scale, rotation);\n        this.getSprite().getTransform().setPosition(position);\n        this.getSprite().getTransform().setScale(scale);\n        this.getSprite().getTransform().setRotation(rotation);\n    }\n\n    @Override\n    public void update() {\n        this.getTransform().setPosition(new Vector2f(this.getTransform().getPosition().x += xspeed, this.getTransform().getPosition().y += yspeed));\n    }\n\n    public void input() {\n        if (KeyboardHandler.isKeyDown(GLFW.GLFW_KEY_RIGHT)) {\n            xspeed = SPEED;\n        } else if (KeyboardHandler.isKeyDown(GLFW.GLFW_KEY_LEFT)) {\n            xspeed = -SPEED;\n        } else {\n            xspeed = 0;\n        }\n\n        if (KeyboardHandler.isKeyDown(GLFW.GLFW_KEY_UP)) {\n            yspeed = SPEED;\n        } else if (KeyboardHandler.isKeyDown(GLFW.GLFW_KEY_DOWN)) {\n            yspeed = -SPEED;\n        } else {\n            yspeed = 0;\n        }\n    }\n}\n</code></pre>\n\n<p>Timer:</p>\n\n<pre><code>    public class Timer {\n\n    private double lastLoopTime;\n    private float timeCount;\n    private int fps;\n    private int fpsCount;\n    private int ups;\n    private int upsCount;\n\n    public void init() {\n        lastLoopTime = getTime();\n    }\n\n    public double getTime() {\n        return GLFW.glfwGetTime();\n    }\n\n    public float getDelta() {\n        double time = getTime();\n        float delta = (float) (time - lastLoopTime);\n        lastLoopTime = time;\n        timeCount += delta;\n        return delta;\n    }\n\n    public void updateFPS() {\n        fpsCount++;\n    }\n\n    public void updateUPS() {\n        upsCount++;\n    }\n\n    // Update the FPS and UPS if a whole second has passed\n    public void update() {\n        if (timeCount &gt; 1f) {\n            fps = fpsCount;\n            fpsCount = 0;\n\n            ups = upsCount;\n            upsCount = 0;\n\n            timeCount -= 1f;\n        }\n    }\n\n    public int getFPS() {\n        return fps &gt; 0 ? fps : fpsCount;\n    }\n\n    public int getUPS() {\n        return ups &gt; 0 ? ups : upsCount;\n    }\n\n    public double getLastLoopTime() {\n        return lastLoopTime;\n    }\n}\n</code></pre>\n"},{"tags":["java","enums"],"comments":[{"owner":{"account_id":1061383,"reputation":8686,"user_id":1062933,"accept_rate":85,"display_name":"NaN"},"score":1,"creation_date":1542221650,"post_id":2709593,"comment_id":93494648,"body_markdown":"https://dzone.com/articles/java-extensible-enum-with-interface","body":"<a href=\"https://dzone.com/articles/java-extensible-enum-with-interface\" rel=\"nofollow noreferrer\">dzone.com/articles/java-extensible-enum-with-interface</a>"}],"answers":[{"tags":[],"owner":{"account_id":7450,"reputation":269220,"user_id":12960,"display_name":"Brian Agnew"},"comment_count":0,"down_vote_count":1,"up_vote_count":156,"is_accepted":true,"score":155,"last_activity_date":1272224078,"creation_date":1272224078,"answer_id":2709604,"question_id":2709593,"body_markdown":"Enums don&#39;t just have to represent passive sets (e.g. colours). They can represent more complex objects with functionality, and so you&#39;re then likely to want to add further functionality to these - e.g. you may have interfaces such as `Printable`, `Reportable` etc. and components that support these.","title":"Why would an Enum implement an Interface?","body":"<p>Enums don't just have to represent passive sets (e.g. colours). They can represent more complex objects with functionality, and so you're then likely to want to add further functionality to these - e.g. you may have interfaces such as <code>Printable</code>, <code>Reportable</code> etc. and components that support these.</p>\n"},{"comments":[{"owner":{"account_id":244931,"reputation":18072,"user_id":808804,"accept_rate":80,"display_name":"Adam Parkin"},"score":4,"creation_date":1366755951,"post_id":2709615,"comment_id":23129410,"body_markdown":"&quot;... so for the most part anything you can do with a class you can do with an enum&quot;, yet I can&#39;t say have my enum inherit from an abstract class.  So yeah, emphasis on &quot;for the most part&quot;.","body":"&quot;... so for the most part anything you can do with a class you can do with an enum&quot;, yet I can&#39;t say have my enum inherit from an abstract class.  So yeah, emphasis on &quot;for the most part&quot;."},{"owner":{"account_id":25591,"reputation":61024,"user_id":65868,"accept_rate":68,"display_name":"TofuBeer"},"score":5,"creation_date":1366757487,"post_id":2709615,"comment_id":23129896,"body_markdown":"That is because enums all extend java.lang.Enum, and Java classes can only extend from one class.","body":"That is because enums all extend java.lang.Enum, and Java classes can only extend from one class."}],"tags":[],"owner":{"account_id":25591,"reputation":61024,"user_id":65868,"accept_rate":68,"display_name":"TofuBeer"},"comment_count":2,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1366757393,"creation_date":1272224192,"answer_id":2709615,"question_id":2709593,"body_markdown":"Enums are just classes in disguise, so for the most part, anything you can do with a class you can do with an enum.\r\n\r\nI cannot think of a reason that an enum should not be able to implement an interface, at the same time I cannot think of a good reason for them to either.  \r\n\r\nI would say once you start adding thing like interfaces, or method to an enum you should really consider making it a class instead.  Of course I am sure there are valid cases for doing non-traditional enum things, and since the limit would be an artificial one, I am in favour of letting people do what they want there.","title":"Why would an Enum implement an Interface?","body":"<p>Enums are just classes in disguise, so for the most part, anything you can do with a class you can do with an enum.</p>\n\n<p>I cannot think of a reason that an enum should not be able to implement an interface, at the same time I cannot think of a good reason for them to either.  </p>\n\n<p>I would say once you start adding thing like interfaces, or method to an enum you should really consider making it a class instead.  Of course I am sure there are valid cases for doing non-traditional enum things, and since the limit would be an artificial one, I am in favour of letting people do what they want there.</p>\n"},{"tags":[],"owner":{"account_id":31682,"reputation":22471,"user_id":87197,"accept_rate":81,"display_name":"Chris Dennett"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1272227477,"creation_date":1272224237,"answer_id":2709618,"question_id":2709593,"body_markdown":"It&#39;s required for extensibility -- if someone uses an API you&#39;ve developed, the enums you define are static; they can&#39;t be added to or modified. However, if you let it implement an interface, the person using the API can develop their own enum using the same interface. You can then register this enum with an enum manager which conglomerates the enums together with the standard interface.\r\n\r\nEdit: [@Helper Method][1] has the perfect example of this. Think about having other libraries defining new operators and then telling a manager class that &#39;hey, this enum exists -- register it&#39;. Otherwise, you&#39;d only be able to define Operators in your own code - there&#39;d be no extensibility.\r\n\r\n\r\n  [1]: #2709831","title":"Why would an Enum implement an Interface?","body":"<p>It's required for extensibility -- if someone uses an API you've developed, the enums you define are static; they can't be added to or modified. However, if you let it implement an interface, the person using the API can develop their own enum using the same interface. You can then register this enum with an enum manager which conglomerates the enums together with the standard interface.</p>\n\n<p>Edit: @Helper Method has the perfect example of this. Think about having other libraries defining new operators and then telling a manager class that 'hey, this enum exists -- register it'. Otherwise, you'd only be able to define Operators in your own code - there'd be no extensibility.</p>\n"},{"comments":[{"owner":{"account_id":1913219,"reputation":1641,"user_id":1726450,"accept_rate":61,"display_name":"Dylanthepiguy"},"score":1,"creation_date":1492578457,"post_id":2709672,"comment_id":74028864,"body_markdown":"`for inheriting from your singleton and overriding your singleton&#39;s methods with something else`. you can just use a `final class` to prevent that","body":"<code>for inheriting from your singleton and overriding your singleton&#39;s methods with something else</code>. you can just use a <code>final class</code> to prevent that"}],"tags":[],"owner":{"account_id":109330,"reputation":1789,"user_id":289746,"accept_rate":71,"display_name":"Tansir1"},"comment_count":1,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1272224950,"creation_date":1272224950,"answer_id":2709672,"question_id":2709593,"body_markdown":"Since Enums can implement interfaces they can be used for strict enforcing of the singleton pattern.  Trying to make a standard class a singleton allows...\r\n\r\n - for the possibility of using reflection techniques to expose private methods as public \r\n - for inheriting from your singleton and overriding your singleton&#39;s methods with something else\r\n\r\nEnums as singletons help to prevent these security issues.  This might have been one of the contributing reasons to let Enums act as classes and implement interfaces.  Just a guess.\r\n\r\nSee [https://stackoverflow.com/questions/427902/java-enum-singleton][1] and [https://stackoverflow.com/questions/2111768/singleton-class-in-java][2] for more discussion.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/427902/java-enum-singleton &quot;https://stackoverflow.com/questions/427902/java-enum-singleton&quot;\r\n  [2]: https://stackoverflow.com/questions/2111768/singleton-class-in-java","title":"Why would an Enum implement an Interface?","body":"<p>Since Enums can implement interfaces they can be used for strict enforcing of the singleton pattern.  Trying to make a standard class a singleton allows...</p>\n\n<ul>\n<li>for the possibility of using reflection techniques to expose private methods as public </li>\n<li>for inheriting from your singleton and overriding your singleton's methods with something else</li>\n</ul>\n\n<p>Enums as singletons help to prevent these security issues.  This might have been one of the contributing reasons to let Enums act as classes and implement interfaces.  Just a guess.</p>\n\n<p>See <a href=\"https://stackoverflow.com/questions/427902/java-enum-singleton\" title=\"https://stackoverflow.com/questions/427902/java-enum-singleton\">https://stackoverflow.com/questions/427902/java-enum-singleton</a> and <a href=\"https://stackoverflow.com/questions/2111768/singleton-class-in-java\">Singleton class in java</a> for more discussion.</p>\n"},{"comments":[{"owner":{"account_id":258578,"reputation":6003,"user_id":540837,"accept_rate":94,"display_name":"Pimgd"},"score":3,"creation_date":1471468467,"post_id":2709831,"comment_id":65364402,"body_markdown":"Complex operators could be &quot;pow&quot; and the like.","body":"Complex operators could be &quot;pow&quot; and the like."},{"owner":{"account_id":3156329,"reputation":5805,"user_id":2668666,"accept_rate":76,"display_name":"jmrah"},"score":5,"creation_date":1567122269,"post_id":2709831,"comment_id":101879382,"body_markdown":"First time ever seeing that Enum syntax (with the curly braces after the members), and I&#39;ve been programming with Java for 6 years. TIL.","body":"First time ever seeing that Enum syntax (with the curly braces after the members), and I&#39;ve been programming with Java for 6 years. TIL."}],"tags":[],"owner":{"account_id":88014,"reputation":60053,"user_id":1178669,"accept_rate":93,"display_name":"helpermethod"},"comment_count":2,"down_vote_count":0,"up_vote_count":297,"is_accepted":false,"score":297,"last_activity_date":1332432117,"creation_date":1272227130,"answer_id":2709831,"question_id":2709593,"body_markdown":"Here&#39;s one example (a similar/better one is found in Effective Java 2nd Edition):\r\n\r\n    public interface Operator {\r\n        int apply (int a, int b);\r\n    }\r\n\r\n    public enum SimpleOperators implements Operator {\r\n        PLUS { \r\n            int apply(int a, int b) { return a + b; }\r\n        },\r\n        MINUS { \r\n            int apply(int a, int b) { return a - b; }\r\n        };\r\n    }\r\n\r\n    public enum ComplexOperators implements Operator {\r\n        // can&#39;t think of an example right now :-/\r\n    }\r\n\r\nNow to get a list of both the Simple + Complex Operators:\r\n\r\n    List&lt;Operator&gt; operators = new ArrayList&lt;Operator&gt;();\r\n\r\n    operators.addAll(Arrays.asList(SimpleOperators.values()));\r\n    operators.addAll(Arrays.asList(ComplexOperators.values()));\r\n\r\nSo here you use an interface to simulate extensible enums (which wouldn&#39;t be possible without using an interface).\r\n   ","title":"Why would an Enum implement an Interface?","body":"<p>Here's one example (a similar/better one is found in Effective Java 2nd Edition):</p>\n\n<pre><code>public interface Operator {\n    int apply (int a, int b);\n}\n\npublic enum SimpleOperators implements Operator {\n    PLUS { \n        int apply(int a, int b) { return a + b; }\n    },\n    MINUS { \n        int apply(int a, int b) { return a - b; }\n    };\n}\n\npublic enum ComplexOperators implements Operator {\n    // can't think of an example right now :-/\n}\n</code></pre>\n\n<p>Now to get a list of both the Simple + Complex Operators:</p>\n\n<pre><code>List&lt;Operator&gt; operators = new ArrayList&lt;Operator&gt;();\n\noperators.addAll(Arrays.asList(SimpleOperators.values()));\noperators.addAll(Arrays.asList(ComplexOperators.values()));\n</code></pre>\n\n<p>So here you use an interface to simulate extensible enums (which wouldn't be possible without using an interface).</p>\n"},{"comments":[{"owner":{"account_id":127351,"reputation":5961,"user_id":324446,"accept_rate":64,"display_name":"Akh"},"score":2,"creation_date":1345513367,"post_id":2711682,"comment_id":16085386,"body_markdown":"Yes.Weird !!. Enum already implements the Comparable interface and doesnt permit to override. I looked up java source code for enum class and couldnt find the compareTo implementation. Can anyone tell me whats gets compared inside a compareTo method an ENUM?","body":"Yes.Weird !!. Enum already implements the Comparable interface and doesnt permit to override. I looked up java source code for enum class and couldnt find the compareTo implementation. Can anyone tell me whats gets compared inside a compareTo method an ENUM?"},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":2,"creation_date":1345585398,"post_id":2711682,"comment_id":16111720,"body_markdown":"@AKh it compares the ordinals, meaning the natural ordering is the order the enum constants are in the source file.","body":"@AKh it compares the ordinals, meaning the natural ordering is the order the enum constants are in the source file."},{"owner":{"account_id":40774,"reputation":28739,"user_id":118228,"accept_rate":85,"display_name":"djangofan"},"score":0,"creation_date":1551289585,"post_id":2711682,"comment_id":96589749,"body_markdown":"Enum vars are final and so compare occurs with == , right?","body":"Enum vars are final and so compare occurs with == , right?"}],"tags":[],"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"comment_count":3,"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1272291320,"creation_date":1272266537,"answer_id":2711682,"question_id":2709593,"body_markdown":"The `Comparable` example given by several people here is wrong, since `Enum` already implements that. You can&#39;t even override it.\r\n\r\nA better example is having an interface that defines, let&#39;s say, a data type. You can have an enum to implement the simple types, and have normal classes to implement complicated types:\r\n\r\n    interface DataType {\r\n      // methods here\r\n    }\r\n    \r\n    enum SimpleDataType implements DataType {\r\n      INTEGER, STRING;\r\n\r\n      // implement methods\r\n    }\r\n    \r\n    class IdentifierDataType implements DataType {\r\n      // implement interface and maybe add more specific methods\r\n    }","title":"Why would an Enum implement an Interface?","body":"<p>The <code>Comparable</code> example given by several people here is wrong, since <code>Enum</code> already implements that. You can't even override it.</p>\n\n<p>A better example is having an interface that defines, let's say, a data type. You can have an enum to implement the simple types, and have normal classes to implement complicated types:</p>\n\n<pre><code>interface DataType {\n  // methods here\n}\n\nenum SimpleDataType implements DataType {\n  INTEGER, STRING;\n\n  // implement methods\n}\n\nclass IdentifierDataType implements DataType {\n  // implement interface and maybe add more specific methods\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":130067,"reputation":335,"user_id":329053,"display_name":"Johan"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1272555444,"creation_date":1272555444,"answer_id":2738648,"question_id":2709593,"body_markdown":"For example if you have a Logger enum. Then you should have the logger methods such as debug, info, warning and error in the interface. It makes your code loosely coupled.","title":"Why would an Enum implement an Interface?","body":"<p>For example if you have a Logger enum. Then you should have the logger methods such as debug, info, warning and error in the interface. It makes your code loosely coupled.</p>\n"},{"comments":[{"owner":{"account_id":244931,"reputation":18072,"user_id":808804,"accept_rate":80,"display_name":"Adam Parkin"},"score":0,"creation_date":1366756005,"post_id":6289804,"comment_id":23129422,"body_markdown":"What about `enum Foo extends SomeOtherClass`?  So not quite the same thing as a regular class, in fact, quite different.","body":"What about <code>enum Foo extends SomeOtherClass</code>?  So not quite the same thing as a regular class, in fact, quite different."},{"owner":{"account_id":2293921,"reputation":9958,"user_id":2015912,"accept_rate":70,"display_name":"scottb"},"score":0,"creation_date":1367242538,"post_id":6289804,"comment_id":23299696,"body_markdown":"@Adam: I would say that the ways in which Enums resemble classes are much more numerous than the ways in which they differ from classes.  But, no, they are not identical.","body":"@Adam: I would say that the ways in which Enums resemble classes are much more numerous than the ways in which they differ from classes.  But, no, they are not identical."},{"owner":{"account_id":261099,"reputation":1526,"user_id":545061,"accept_rate":55,"display_name":"Cosmin Cosmin"},"score":0,"creation_date":1367318104,"post_id":6289804,"comment_id":23330591,"body_markdown":"if you decompile an enum you will see it&#39;s a class which extends Enumeration and has the &quot;constants&quot; already instantiated in constructor / initialization fields.","body":"if you decompile an enum you will see it&#39;s a class which extends Enumeration and has the &quot;constants&quot; already instantiated in constructor / initialization fields."}],"tags":[],"owner":{"account_id":261099,"reputation":1526,"user_id":545061,"accept_rate":55,"display_name":"Cosmin Cosmin"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1307606534,"creation_date":1307606534,"answer_id":6289804,"question_id":2709593,"body_markdown":"Enums are like Java Classes, they can have Constructors, Methods, etc. The only thing that you can&#39;t do with them is `new EnumName()`. The instances are predefined in your enum declaration.","title":"Why would an Enum implement an Interface?","body":"<p>Enums are like Java Classes, they can have Constructors, Methods, etc. The only thing that you can't do with them is <code>new EnumName()</code>. The instances are predefined in your enum declaration.</p>\n"},{"comments":[{"owner":{"account_id":6469743,"reputation":2377,"user_id":5010285,"display_name":"Petronella"},"score":0,"creation_date":1594712769,"post_id":10496435,"comment_id":111213576,"body_markdown":"Exactly what I needed!","body":"Exactly what I needed!"}],"tags":[],"owner":{"account_id":45917,"reputation":20089,"user_id":167365,"accept_rate":78,"display_name":"sinuhepop"},"comment_count":1,"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1336471147,"creation_date":1336471147,"answer_id":10496435,"question_id":2709593,"body_markdown":"There is a case I often use. I have a `IdUtil` class with static methods to work with objects implementing a very simple `Identifiable` interface:\r\n\r\n    public interface Identifiable&lt;K&gt; {\r\n        K getId();\r\n    }\r\n\r\n\r\n    public abstract class IdUtil {\r\n\r\n        public static &lt;T extends Enum&lt;T&gt; &amp; Identifiable&lt;S&gt;, S&gt; T get(Class&lt;T&gt; type, S id) {\r\n            for (T t : type.getEnumConstants()) {\r\n                if (Util.equals(t.getId(), id)) {\r\n                    return t;\r\n                }\r\n\t\t    }\r\n\t\t    return null;\r\n\t    }\r\n\r\n\t    public static &lt;T extends Enum&lt;T&gt; &amp; Identifiable&lt;S&gt;, S extends Comparable&lt;? super S&gt;&gt; List&lt;T&gt; getLower(T en) {\r\n\t\t    List&lt;T&gt; list = new ArrayList&lt;&gt;();\r\n\t\t    for (T t : en.getDeclaringClass().getEnumConstants()) {\r\n\t\t\t     if (t.getId().compareTo(en.getId()) &lt; 0) {\r\n\t\t\t\t     list.add(t);\r\n\t\t\t    }\r\n\t\t    }\r\n\t\t    return list;\r\n\t    }\r\n    }\r\n\r\n\r\nIf I create an `Identifiable` `enum`:\r\n\r\n    \tpublic enum MyEnum implements Identifiable&lt;Integer&gt; {\r\n\r\n\t\t    FIRST(1), SECOND(2);\r\n\r\n\t\t    private int id;\r\n\r\n\t\t    private MyEnum(int id) {\r\n\t\t\t    this.id = id;\r\n\t\t    }\r\n\r\n\t\t    public Integer getId() {\r\n\t\t\t    return id;\r\n\t\t    }\r\n\r\n\t    }\r\n\r\nThen I can get it by its `id` this way:\r\n\r\n    MyEnum e = IdUtil.get(MyEnum.class, 1);\r\n\r\n","title":"Why would an Enum implement an Interface?","body":"<p>There is a case I often use. I have a <code>IdUtil</code> class with static methods to work with objects implementing a very simple <code>Identifiable</code> interface:</p>\n\n<pre><code>public interface Identifiable&lt;K&gt; {\n    K getId();\n}\n\n\npublic abstract class IdUtil {\n\n    public static &lt;T extends Enum&lt;T&gt; &amp; Identifiable&lt;S&gt;, S&gt; T get(Class&lt;T&gt; type, S id) {\n        for (T t : type.getEnumConstants()) {\n            if (Util.equals(t.getId(), id)) {\n                return t;\n            }\n        }\n        return null;\n    }\n\n    public static &lt;T extends Enum&lt;T&gt; &amp; Identifiable&lt;S&gt;, S extends Comparable&lt;? super S&gt;&gt; List&lt;T&gt; getLower(T en) {\n        List&lt;T&gt; list = new ArrayList&lt;&gt;();\n        for (T t : en.getDeclaringClass().getEnumConstants()) {\n             if (t.getId().compareTo(en.getId()) &lt; 0) {\n                 list.add(t);\n            }\n        }\n        return list;\n    }\n}\n</code></pre>\n\n<p>If I create an <code>Identifiable</code> <code>enum</code>:</p>\n\n<pre><code>    public enum MyEnum implements Identifiable&lt;Integer&gt; {\n\n        FIRST(1), SECOND(2);\n\n        private int id;\n\n        private MyEnum(int id) {\n            this.id = id;\n        }\n\n        public Integer getId() {\n            return id;\n        }\n\n    }\n</code></pre>\n\n<p>Then I can get it by its <code>id</code> this way:</p>\n\n<pre><code>MyEnum e = IdUtil.get(MyEnum.class, 1);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":887546,"reputation":9293,"user_id":926620,"display_name":"Anton Bessonov"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1337523124,"creation_date":1337523124,"answer_id":10674125,"question_id":2709593,"body_markdown":"One of the best use case for me to use enum&#39;s with interface is Predicate filters. It&#39;s very elegant way to remedy lack of typness of apache collections (If other libraries mayn&#39;t be used).\r\n\r\n\timport java.util.ArrayList;\r\n\timport java.util.Collection;\r\n\t\r\n\timport org.apache.commons.collections.CollectionUtils;\r\n\timport org.apache.commons.collections.Predicate;\r\n\t\r\n\t\r\n\tpublic class Test {\r\n\t\tpublic final static String DEFAULT_COMPONENT = &quot;Default&quot;;\r\n\t\r\n\t\tenum FilterTest implements Predicate {\r\n\t\t\tActive(false) {\r\n\t\t\t\t@Override\r\n\t\t\t\tboolean eval(Test test) {\r\n\t\t\t\t\treturn test.active;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tDefaultComponent(true) {\r\n\t\t\t\t@Override\r\n\t\t\t\tboolean eval(Test test) {\r\n\t\t\t\t\treturn DEFAULT_COMPONENT.equals(test.component);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\r\n\t\t\t;\r\n\t\r\n\t\t\tprivate boolean defaultValue;\r\n\t\r\n\t\t\tprivate FilterTest(boolean defautValue) {\r\n\t\t\t\tthis.defaultValue = defautValue;\r\n\t\t\t}\r\n\t\r\n\t\t\tabstract boolean eval(Test test);\r\n\t\r\n\t\t\tpublic boolean evaluate(Object o) {\r\n\t\t\t\tif (o instanceof Test) {\r\n\t\t\t\t\treturn eval((Test)o);\r\n\t\t\t\t}\r\n\t\t\t\treturn defaultValue;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\r\n\t\tprivate boolean active = true;\r\n\t\tprivate String component = DEFAULT_COMPONENT;\r\n\t\r\n\t\tpublic static void main(String[] args) {\r\n\t\t\tCollection&lt;Test&gt; tests = new ArrayList&lt;Test&gt;();\r\n\t\t\ttests.add(new Test());\r\n\t\r\n\t\t\tCollectionUtils.filter(tests, FilterTest.Active);\r\n\t\t}\r\n\t}\r\n","title":"Why would an Enum implement an Interface?","body":"<p>One of the best use case for me to use enum's with interface is Predicate filters. It's very elegant way to remedy lack of typness of apache collections (If other libraries mayn't be used).</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.Collection;\n\nimport org.apache.commons.collections.CollectionUtils;\nimport org.apache.commons.collections.Predicate;\n\n\npublic class Test {\n    public final static String DEFAULT_COMPONENT = \"Default\";\n\n    enum FilterTest implements Predicate {\n        Active(false) {\n            @Override\n            boolean eval(Test test) {\n                return test.active;\n            }\n        },\n        DefaultComponent(true) {\n            @Override\n            boolean eval(Test test) {\n                return DEFAULT_COMPONENT.equals(test.component);\n            }\n        }\n\n        ;\n\n        private boolean defaultValue;\n\n        private FilterTest(boolean defautValue) {\n            this.defaultValue = defautValue;\n        }\n\n        abstract boolean eval(Test test);\n\n        public boolean evaluate(Object o) {\n            if (o instanceof Test) {\n                return eval((Test)o);\n            }\n            return defaultValue;\n        }\n\n    }\n\n    private boolean active = true;\n    private String component = DEFAULT_COMPONENT;\n\n    public static void main(String[] args) {\n        Collection&lt;Test&gt; tests = new ArrayList&lt;Test&gt;();\n        tests.add(new Test());\n\n        CollectionUtils.filter(tests, FilterTest.Active);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2293921,"reputation":9958,"user_id":2015912,"accept_rate":70,"display_name":"scottb"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1367242383,"creation_date":1367242383,"answer_id":16279972,"question_id":2709593,"body_markdown":"Here&#39;s my reason why ...\r\n\r\nI have populated a JavaFX ComboBox with the values of an Enum.  I have an interface, Identifiable (specifying one method: identify), that allows me to specify how any object identifies itself to my application for searching purposes.  This interface enables me to scan lists of any type of objects (whichever field the object may use for identity) for an identity match.\r\n\r\nI&#39;d like to find a match for an identity value in my ComboBox list. In order to use this capability on my ComboBox containing the Enum values, I must be able to implement the Identifiable interface in my Enum (which, as it happens, is trivial to implement in the case of an Enum).\r\n","title":"Why would an Enum implement an Interface?","body":"<p>Here's my reason why ...</p>\n\n<p>I have populated a JavaFX ComboBox with the values of an Enum.  I have an interface, Identifiable (specifying one method: identify), that allows me to specify how any object identifies itself to my application for searching purposes.  This interface enables me to scan lists of any type of objects (whichever field the object may use for identity) for an identity match.</p>\n\n<p>I'd like to find a match for an identity value in my ComboBox list. In order to use this capability on my ComboBox containing the Enum values, I must be able to implement the Identifiable interface in my Enum (which, as it happens, is trivial to implement in the case of an Enum).</p>\n"},{"tags":[],"owner":{"account_id":8539,"reputation":14603,"user_id":15461,"accept_rate":71,"display_name":"husayt"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1383607133,"creation_date":1383607133,"answer_id":19779148,"question_id":2709593,"body_markdown":"Most common usage for this would be to merge the values of two enums into one group and treat them similarly. For example, see how  to [join Fruits and Vegatables][1]. \r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/17646335/combining-enums-and-using-getter-to-return-a-specified-enum/19778800#19778800","title":"Why would an Enum implement an Interface?","body":"<p>Most common usage for this would be to merge the values of two enums into one group and treat them similarly. For example, see how  to <a href=\"https://stackoverflow.com/questions/17646335/combining-enums-and-using-getter-to-return-a-specified-enum/19778800#19778800\">join Fruits and Vegatables</a>. </p>\n"},{"tags":[],"owner":{"account_id":366370,"reputation":2002,"user_id":711855,"display_name":"juanmf"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1447607384,"creation_date":1447607384,"answer_id":33722419,"question_id":2709593,"body_markdown":"I used an inner enum in an interface describing a strategy to keep instance control (each strategy is a Singleton) from there.\r\n\r\n    public interface VectorizeStrategy {\r\n        \r\n        /**\r\n         * Keep instance control from here.\r\n         * \r\n         * Concrete classes constructors should be package private.\r\n         */\r\n        enum ConcreteStrategy implements VectorizeStrategy {\r\n            DEFAULT (new VectorizeImpl());\r\n            \r\n            private final VectorizeStrategy INSTANCE;\r\n            \r\n            ConcreteStrategy(VectorizeStrategy concreteStrategy) {\r\n                INSTANCE = concreteStrategy;\r\n            }\r\n\r\n            @Override\r\n            public VectorImageGridIntersections processImage(MarvinImage img) {\r\n                return INSTANCE.processImage(img);\r\n            }\r\n        }\r\n        \r\n        /**\r\n         * Should perform edge Detection in order to have lines, that can be vectorized.\r\n         * \r\n         * @param img An Image suitable for edge detection.\r\n         * \r\n         * @return the VectorImageGridIntersections representing img&#39;s vectors \r\n         * intersections with the grids.\r\n         */\r\n        VectorImageGridIntersections processImage(MarvinImage img);\r\n    }\r\n\r\nThe fact that the enum implements the strategy is convenient to allow the enum class to act as proxy for its enclosed Instance. which also implements the interface.\r\n\r\nit&#39;s a sort of strategyEnumProxy :P the clent code looks like this:\r\n\r\n    VectorizeStrategy.ConcreteStrategy.DEFAULT.processImage(img);\r\n\r\nIf it didn&#39;t implement the interface it&#39;d had been:\r\n\r\n    VectorizeStrategy.ConcreteStrategy.DEFAULT.getInstance().processImage(img);\r\n\r\n","title":"Why would an Enum implement an Interface?","body":"<p>I used an inner enum in an interface describing a strategy to keep instance control (each strategy is a Singleton) from there.</p>\n\n<pre><code>public interface VectorizeStrategy {\n\n    /**\n     * Keep instance control from here.\n     * \n     * Concrete classes constructors should be package private.\n     */\n    enum ConcreteStrategy implements VectorizeStrategy {\n        DEFAULT (new VectorizeImpl());\n\n        private final VectorizeStrategy INSTANCE;\n\n        ConcreteStrategy(VectorizeStrategy concreteStrategy) {\n            INSTANCE = concreteStrategy;\n        }\n\n        @Override\n        public VectorImageGridIntersections processImage(MarvinImage img) {\n            return INSTANCE.processImage(img);\n        }\n    }\n\n    /**\n     * Should perform edge Detection in order to have lines, that can be vectorized.\n     * \n     * @param img An Image suitable for edge detection.\n     * \n     * @return the VectorImageGridIntersections representing img's vectors \n     * intersections with the grids.\n     */\n    VectorImageGridIntersections processImage(MarvinImage img);\n}\n</code></pre>\n\n<p>The fact that the enum implements the strategy is convenient to allow the enum class to act as proxy for its enclosed Instance. which also implements the interface.</p>\n\n<p>it's a sort of strategyEnumProxy :P the clent code looks like this:</p>\n\n<pre><code>VectorizeStrategy.ConcreteStrategy.DEFAULT.processImage(img);\n</code></pre>\n\n<p>If it didn't implement the interface it'd had been:</p>\n\n<pre><code>VectorizeStrategy.ConcreteStrategy.DEFAULT.getInstance().processImage(img);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11890945,"reputation":66,"user_id":8701820,"display_name":"Jorge Aranda"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1518518538,"creation_date":1518517862,"answer_id":48764601,"question_id":2709593,"body_markdown":"Another posibility:\r\n\r\n    public enum ConditionsToBeSatisfied implements Predicate&lt;Number&gt; {\r\n        IS_NOT_NULL(Objects::nonNull, &quot;Item is null&quot;),\r\n        IS_NOT_AN_INTEGER(item -&gt; item instanceof Integer, &quot;Item is not an integer&quot;),\r\n        IS_POSITIVE(item -&gt; item instanceof Integer &amp;&amp; (Integer) item &gt; 0, &quot;Item is negative&quot;);\r\n\r\n        private final Predicate&lt;Number&gt; predicate;\r\n        private final String notSatisfiedLogMessage;\r\n\r\n        ConditionsToBeSatisfied(final Predicate&lt;Number&gt; predicate, final String notSatisfiedLogMessage) {\r\n            this.predicate = predicate;\r\n            this.notSatisfiedLogMessage = notSatisfiedLogMessage;\r\n        }\r\n\r\n        @Override\r\n        public boolean test(final Number item) {\r\n            final boolean isNotValid = predicate.negate().test(item);\r\n\r\n            if (isNotValid) {\r\n                log.warn(&quot;Invalid {}. Cause: {}&quot;, item, notSatisfiedLogMessage);\r\n            }\r\n\r\n            return predicate.test(item);\r\n        }\r\n    }\r\n\r\n\r\nand using:\r\n\r\n    Predicate&lt;Number&gt; p = IS_NOT_NULL.and(IS_NOT_AN_INTEGER).and(IS_POSITIVE);","title":"Why would an Enum implement an Interface?","body":"<p>Another posibility:</p>\n\n<pre><code>public enum ConditionsToBeSatisfied implements Predicate&lt;Number&gt; {\n    IS_NOT_NULL(Objects::nonNull, \"Item is null\"),\n    IS_NOT_AN_INTEGER(item -&gt; item instanceof Integer, \"Item is not an integer\"),\n    IS_POSITIVE(item -&gt; item instanceof Integer &amp;&amp; (Integer) item &gt; 0, \"Item is negative\");\n\n    private final Predicate&lt;Number&gt; predicate;\n    private final String notSatisfiedLogMessage;\n\n    ConditionsToBeSatisfied(final Predicate&lt;Number&gt; predicate, final String notSatisfiedLogMessage) {\n        this.predicate = predicate;\n        this.notSatisfiedLogMessage = notSatisfiedLogMessage;\n    }\n\n    @Override\n    public boolean test(final Number item) {\n        final boolean isNotValid = predicate.negate().test(item);\n\n        if (isNotValid) {\n            log.warn(\"Invalid {}. Cause: {}\", item, notSatisfiedLogMessage);\n        }\n\n        return predicate.test(item);\n    }\n}\n</code></pre>\n\n<p>and using:</p>\n\n<pre><code>Predicate&lt;Number&gt; p = IS_NOT_NULL.and(IS_NOT_AN_INTEGER).and(IS_POSITIVE);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":406060,"reputation":21895,"user_id":775345,"accept_rate":96,"display_name":"Robert Moskal"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1640743222,"creation_date":1541457468,"answer_id":53163279,"question_id":2709593,"body_markdown":"The post above that mentioned strategies didn&#39;t stress enough what a nice lightweight implementation of the strategy pattern using enums gets you:\r\n\r\n    public enum Strategy {\r\n    \r\n      A {\r\n        @Override\r\n        void execute() {\r\n          System.out.print(&quot;Executing strategy A&quot;);\r\n        }\r\n      },\r\n      \r\n      B {\r\n        @Override\r\n        void execute() {\r\n          System.out.print(&quot;Executing strategy B&quot;);\r\n        }\r\n      };\r\n    \r\n      abstract void execute();\r\n    }\r\n\r\nYou can have all your strategies in one place without needing a separate compilation unit for each. You get a nice dynamic dispatch with just:\r\n\r\n    Strategy.valueOf(&quot;A&quot;).execute();\r\n\r\nMakes java read almost like a tasty loosely typed language!","title":"Why would an Enum implement an Interface?","body":"<p>The post above that mentioned strategies didn't stress enough what a nice lightweight implementation of the strategy pattern using enums gets you:</p>\n<pre><code>public enum Strategy {\n\n  A {\n    @Override\n    void execute() {\n      System.out.print(&quot;Executing strategy A&quot;);\n    }\n  },\n  \n  B {\n    @Override\n    void execute() {\n      System.out.print(&quot;Executing strategy B&quot;);\n    }\n  };\n\n  abstract void execute();\n}\n</code></pre>\n<p>You can have all your strategies in one place without needing a separate compilation unit for each. You get a nice dynamic dispatch with just:</p>\n<pre><code>Strategy.valueOf(&quot;A&quot;).execute();\n</code></pre>\n<p>Makes java read almost like a tasty loosely typed language!</p>\n"},{"tags":[],"owner":{"account_id":36915,"reputation":3723,"user_id":105408,"accept_rate":75,"display_name":"markthegrea"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1578684068,"creation_date":1567533121,"answer_id":57776583,"question_id":2709593,"body_markdown":"When creating constants in a jar file, it is often helpful to let users extend enum values.  We used enums for PropertyFile keys and got stuck because nobody could add any new ones!  Below would have worked much better.\r\n\r\nGiven:\r\n\r\n    public interface Color {\r\n      String fetchName();\r\n    }\r\n\r\nand:\r\n\r\n    public class MarkTest {\r\n    \r\n      public static void main(String[] args) {\r\n        MarkTest.showColor(Colors.BLUE);\r\n        MarkTest.showColor(MyColors.BROWN);\r\n      }\r\n    \r\n      private static void showColor(Color c) {\r\n        System.out.println(c.fetchName());\r\n      }\r\n    }\r\n\r\none could have one enum in the jar:\r\n\r\n    public enum Colors implements Color {\r\n      BLUE, RED, GREEN;\r\n      @Override\r\n      public String fetchName() {\r\n        return this.name();\r\n      }\r\n    }\r\n\r\nand a user could extend it to add his own colors:\r\n\r\n    public enum MyColors implements Color {\r\n      BROWN, GREEN, YELLOW;\r\n      @Override\r\n      public String fetchName() {\r\n        return this.name();\r\n      }\r\n    }\r\n\r\n\r\n\r\n","title":"Why would an Enum implement an Interface?","body":"<p>When creating constants in a jar file, it is often helpful to let users extend enum values.  We used enums for PropertyFile keys and got stuck because nobody could add any new ones!  Below would have worked much better.</p>\n\n<p>Given:</p>\n\n<pre><code>public interface Color {\n  String fetchName();\n}\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>public class MarkTest {\n\n  public static void main(String[] args) {\n    MarkTest.showColor(Colors.BLUE);\n    MarkTest.showColor(MyColors.BROWN);\n  }\n\n  private static void showColor(Color c) {\n    System.out.println(c.fetchName());\n  }\n}\n</code></pre>\n\n<p>one could have one enum in the jar:</p>\n\n<pre><code>public enum Colors implements Color {\n  BLUE, RED, GREEN;\n  @Override\n  public String fetchName() {\n    return this.name();\n  }\n}\n</code></pre>\n\n<p>and a user could extend it to add his own colors:</p>\n\n<pre><code>public enum MyColors implements Color {\n  BROWN, GREEN, YELLOW;\n  @Override\n  public String fetchName() {\n    return this.name();\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29114412,"reputation":19,"user_id":22303452,"display_name":"Aisu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694204506,"creation_date":1694204123,"answer_id":77069655,"question_id":2709593,"body_markdown":"Yes, Enum implements an interface in Java, it can be useful when we need to implement some business logic that is tightly coupled with a discriminatory property of a given object or class.\r\n\r\nTake a look at the example below, it&#39;s simple to follow and shows special cases of operations that are conducted with some particular properties of the enums only.\r\n\r\n    interface EnumInterface {\r\n       int calculate(int first, int second);\r\n    }\r\n    \r\n    enum EnumClassOperator implements EnumInterface {\r\n       ADD {\r\n          @Override\r\n          public int calculate(int first, int second) {\r\n             return first + second;\r\n          }\r\n       },\r\n       SUBTRACT {\r\n          @Override\r\n          public int calculate(int first, int second) {\r\n             return first - second;\r\n          }\r\n       };\r\n    }\r\n\r\n    class Operation {\r\n       private int first, second;\r\n       private EnumClassOperator operator;\r\n       public Operation(int first, int second, EnumClassOperator operator) {\r\n          this.first = first;\r\n          this.second = second;\r\n          this.operator = operator;\r\n       }\r\n       public int calculate() {\r\n          return operator.calculate(first, second);\r\n       }\r\n    }\r\n\r\n    // Main Class\r\n    public class EnumTest {\r\n       public static void main (String [] args) {\r\n          Operation add = new Operation(20, 10, EnumClassOperator.ADD);\r\n          Operation subtract = new Operation(20, 10, EnumClassOperator.SUBTRACT);\r\n          System.out.println(&quot;Addition: &quot; + add.calculate());\r\n          System.out.println(&quot;Subtraction: &quot; + subtract.calculate());\r\n       }\r\n    }\r\n\r\nHere is one more base example:\r\n\r\n    // Java program to demonstrate\r\n    // how an enum implements an\r\n    // interface\r\n    \r\n    // Defining an interface\r\n    interface week {\r\n    \r\n    \t// Defining an abstract method\r\n    \tpublic int day();\r\n    }\r\n    \r\n    // Initializing an enum which\r\n    // implements the above interface\r\n    enum Day implements week {\r\n    \r\n    \t// Initializing the possible\r\n    \t// days\r\n    \tMonday,\r\n    \tTuesday,\r\n    \tWednesday,\r\n    \tThursday,\r\n    \tFriday,\r\n    \tSaturday,\r\n    \tSunday;\r\n    \r\n    \tpublic int day()\r\n    \t{\r\n    \t\treturn ordinal() + 1;\r\n    \t}\r\n    }\r\n    \r\n    // Main Class\r\n    public class Daycount {\r\n    \tpublic static void main(String args[])\r\n    \t{\r\n    \t\tSystem.out.println(&quot;It is day number &quot;\r\n    \t\t\t\t\t\t+ Day.Wednesday.day()\r\n    \t\t\t\t\t\t+ &quot; of a week.&quot;);\r\n    \t}\r\n    }\r\n","title":"Why would an Enum implement an Interface?","body":"<p>Yes, Enum implements an interface in Java, it can be useful when we need to implement some business logic that is tightly coupled with a discriminatory property of a given object or class.</p>\n<p>Take a look at the example below, it's simple to follow and shows special cases of operations that are conducted with some particular properties of the enums only.</p>\n<pre><code>interface EnumInterface {\n   int calculate(int first, int second);\n}\n\nenum EnumClassOperator implements EnumInterface {\n   ADD {\n      @Override\n      public int calculate(int first, int second) {\n         return first + second;\n      }\n   },\n   SUBTRACT {\n      @Override\n      public int calculate(int first, int second) {\n         return first - second;\n      }\n   };\n}\n\nclass Operation {\n   private int first, second;\n   private EnumClassOperator operator;\n   public Operation(int first, int second, EnumClassOperator operator) {\n      this.first = first;\n      this.second = second;\n      this.operator = operator;\n   }\n   public int calculate() {\n      return operator.calculate(first, second);\n   }\n}\n\n// Main Class\npublic class EnumTest {\n   public static void main (String [] args) {\n      Operation add = new Operation(20, 10, EnumClassOperator.ADD);\n      Operation subtract = new Operation(20, 10, EnumClassOperator.SUBTRACT);\n      System.out.println(&quot;Addition: &quot; + add.calculate());\n      System.out.println(&quot;Subtraction: &quot; + subtract.calculate());\n   }\n}\n</code></pre>\n<p>Here is one more base example:</p>\n<pre><code>// Java program to demonstrate\n// how an enum implements an\n// interface\n\n// Defining an interface\ninterface week {\n\n    // Defining an abstract method\n    public int day();\n}\n\n// Initializing an enum which\n// implements the above interface\nenum Day implements week {\n\n    // Initializing the possible\n    // days\n    Monday,\n    Tuesday,\n    Wednesday,\n    Thursday,\n    Friday,\n    Saturday,\n    Sunday;\n\n    public int day()\n    {\n        return ordinal() + 1;\n    }\n}\n\n// Main Class\npublic class Daycount {\n    public static void main(String args[])\n    {\n        System.out.println(&quot;It is day number &quot;\n                        + Day.Wednesday.day()\n                        + &quot; of a week.&quot;);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":30252,"reputation":52431,"user_id":82368,"accept_rate":71,"display_name":"unj2"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":209310,"favorite_count":0,"down_vote_count":2,"up_vote_count":230,"accepted_answer_id":2709604,"answer_count":17,"score":228,"last_activity_date":1694204506,"creation_date":1272223919,"question_id":2709593,"body_markdown":"I just found out that Java allows enums to implement an interface. What would be a good use case for that?","title":"Why would an Enum implement an Interface?","body":"<p>I just found out that Java allows enums to implement an interface. What would be a good use case for that?</p>\n"},{"tags":["java","mouse","human-computer-interface"],"comments":[{"owner":{"account_id":957,"reputation":10233,"user_id":1266,"accept_rate":82,"display_name":"pbh101"},"score":0,"creation_date":1225812590,"post_id":262125,"comment_id":119132,"body_markdown":"Bump to this question:  I have been thinking of software to utilize the second screen many developers (should) have, and giving both developers in pair programming a mouse input.  Then I realized that would be messing with a lot of HW driver stuff where I have no clue how to start.","body":"Bump to this question:  I have been thinking of software to utilize the second screen many developers (should) have, and giving both developers in pair programming a mouse input.  Then I realized that would be messing with a lot of HW driver stuff where I have no clue how to start."}],"answers":[{"tags":[],"owner":{"account_id":2720,"reputation":3516,"user_id":3825,"accept_rate":67,"display_name":"ShoeLace"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1225822381,"creation_date":1225822381,"answer_id":262781,"question_id":262125,"body_markdown":"dont know about java.. but for C#/c++ you can try the \r\n[Microsoft Windows MultiPoint Software Development Kit][1]\r\n\r\ni&#39;ve tried it on windows.. it works with 2 USB mice.\r\n\r\n\r\n\r\n  [1]: http://www.microsoft.com/downloads/details.aspx?FamilyID=A137998B-E8D6-4FFF-B805-2798D2C6E41D&amp;displaylang=en","title":"How can I handle multiple mouse inputs in Java?","body":"<p>dont know about java.. but for C#/c++ you can try the \n<a href=\"http://www.microsoft.com/downloads/details.aspx?FamilyID=A137998B-E8D6-4FFF-B805-2798D2C6E41D&amp;displaylang=en\" rel=\"nofollow noreferrer\">Microsoft Windows MultiPoint Software Development Kit</a></p>\n\n<p>i've tried it on windows.. it works with 2 USB mice.</p>\n"},{"comments":[{"owner":{"account_id":13952,"reputation":301,"user_id":28299,"display_name":"Keith Lawrence"},"score":0,"creation_date":1226420138,"post_id":262830,"comment_id":132266,"body_markdown":"I agree with Paul. In fact, a little digging around in the JInput forums throws up this:\nhttp://www.javagaming.org/index.php/topic,16681.0.html","body":"I agree with Paul. In fact, a little digging around in the JInput forums throws up this: <a href=\"http://www.javagaming.org/index.php/topic,16681.0.html\" rel=\"nofollow noreferrer\">javagaming.org/index.php/topic,16681.0.html</a>"}],"tags":[],"owner":{"account_id":2218,"reputation":16624,"user_id":3050,"accept_rate":95,"display_name":"Paul Whelan"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1337008327,"creation_date":1225823073,"answer_id":262830,"question_id":262125,"body_markdown":"Look at [jinput][1].\r\n\r\nI have had multiple keyboards working with it, I am nearly certain it supports multiple mice too.\r\n\r\n[1]: http://java.net/projects/jinput\r\n","title":"How can I handle multiple mouse inputs in Java?","body":"<p>Look at <a href=\"http://java.net/projects/jinput\" rel=\"nofollow noreferrer\">jinput</a>.</p>\n\n<p>I have had multiple keyboards working with it, I am nearly certain it supports multiple mice too.</p>\n"},{"tags":[],"owner":{"account_id":15223,"reputation":614,"user_id":31962,"display_name":"dongilmore"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1225837750,"creation_date":1225837750,"answer_id":263720,"question_id":262125,"body_markdown":"You can use multiple devices, but at the Java level, all mouse events are coalesced into a single stream. The event does not include which mouse it came from. You did say you wanted to mix audio, right? Well this mix might be interesting, but surely not what you want. \r\n\r\nI&#39;d suggest using the Java-supported midi interface and connecting some simple midi controller device with multiple knobs or trackballs. These will come in as midi events, and you can examine the state for the details you need.\r\n","title":"How can I handle multiple mouse inputs in Java?","body":"<p>You can use multiple devices, but at the Java level, all mouse events are coalesced into a single stream. The event does not include which mouse it came from. You did say you wanted to mix audio, right? Well this mix might be interesting, but surely not what you want. </p>\n\n<p>I'd suggest using the Java-supported midi interface and connecting some simple midi controller device with multiple knobs or trackballs. These will come in as midi events, and you can examine the state for the details you need.</p>\n"},{"tags":[],"owner":{"account_id":15872,"reputation":10463,"user_id":33982,"accept_rate":94,"display_name":"kshahar"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1225841480,"creation_date":1225841480,"answer_id":263886,"question_id":262125,"body_markdown":"It depends on which operating system you intend to use.\r\n\r\nOn **Windows**, you can use:\r\n\r\n 1. [CPNMouse][1] - a driver+software combination, very flexible and allows to completely hide some of the mice from the operating system.\r\n 2. [RawInput][2] - an API provided by Windows XP only. You can use it to distinguish between two mouse inputs, draw the cursors yourself and hide the main cursor. Take a look at the code of [SDGT][3], a C# usage of this API.\r\n 3. For both solutions you would have to build a JNI bridge to your application\r\n\r\nIf you are using **X.Org (X11)** server, there is patched version called [MPX][4] that should support multiple mice even for legacy applications. It should now be a part of the X.Org trunk, but I&#39;m not very familiar with it. Anyway it has an API so you can use it via JNI bridge.\r\n\r\n  [1]: http://cpnmouse.sourceforge.net/\r\n  [2]: http://www.google.com/search?q=rawinput&amp;ie=UTF-8\r\n  [3]: http://grouplab.cpsc.ucalgary.ca/software/SDGT\r\n  [4]: http://wearables.unisa.edu.au/mpx/","title":"How can I handle multiple mouse inputs in Java?","body":"<p>It depends on which operating system you intend to use.</p>\n\n<p>On <strong>Windows</strong>, you can use:</p>\n\n<ol>\n<li><a href=\"http://cpnmouse.sourceforge.net/\" rel=\"nofollow noreferrer\">CPNMouse</a> - a driver+software combination, very flexible and allows to completely hide some of the mice from the operating system.</li>\n<li><a href=\"http://www.google.com/search?q=rawinput&amp;ie=UTF-8\" rel=\"nofollow noreferrer\">RawInput</a> - an API provided by Windows XP only. You can use it to distinguish between two mouse inputs, draw the cursors yourself and hide the main cursor. Take a look at the code of <a href=\"http://grouplab.cpsc.ucalgary.ca/software/SDGT\" rel=\"nofollow noreferrer\">SDGT</a>, a C# usage of this API.</li>\n<li>For both solutions you would have to build a JNI bridge to your application</li>\n</ol>\n\n<p>If you are using <strong>X.Org (X11)</strong> server, there is patched version called <a href=\"http://wearables.unisa.edu.au/mpx/\" rel=\"nofollow noreferrer\">MPX</a> that should support multiple mice even for legacy applications. It should now be a part of the X.Org trunk, but I'm not very familiar with it. Anyway it has an API so you can use it via JNI bridge.</p>\n"}],"owner":{"account_id":3370,"reputation":7124,"user_id":4857,"accept_rate":96,"display_name":"Ande Turner"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6152,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":262830,"answer_count":4,"score":12,"last_activity_date":1694204081,"creation_date":1225811921,"question_id":262125,"body_markdown":"A friend of mine asked me to implement a blue and a red pointer to represent the inputs of two separate mice to expedite a mixing desk scenario for real time audio mixing.  I&#39;d love to, but as much as I think it is a great idea, I don&#39;t have a clue as to where to start looking for a possible solution.\r\n\r\nWhere should I start researching a viable method of implementing dual mouse inputs?","title":"How can I handle multiple mouse inputs in Java?","body":"<p>A friend of mine asked me to implement a blue and a red pointer to represent the inputs of two separate mice to expedite a mixing desk scenario for real time audio mixing.  I'd love to, but as much as I think it is a great idea, I don't have a clue as to where to start looking for a possible solution.</p>\n\n<p>Where should I start researching a viable method of implementing dual mouse inputs?</p>\n"},{"tags":["java","generics","testing","hamcrest"],"answers":[{"tags":[],"owner":{"account_id":11175092,"reputation":45706,"user_id":8200937,"display_name":"glytching"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1500384932,"creation_date":1500384932,"answer_id":45168368,"question_id":45167133,"body_markdown":"Both of the matchers must conform to ...\r\n        \r\n    Matcher&lt;? super LHS&gt; matcher\r\n\r\n... where LHS is a `Collection&lt;?&gt;` because `strings` is a `Collection&lt;?&gt;`.\r\n\r\nIn your code `hasSize(1)` is a `Matcher&lt;Collection&lt;?&gt;&gt;` but `hasItem(&quot;Some string&quot;)` is a `Matcher&lt;Iterable&lt;? super String&gt;&gt;` hence the compilation error.\r\n\r\nThis example uses a combinable matcher and it is compilable because both matchers address a collection ...\r\n\r\n    assertThat(strings, either(empty()).or(hasSize(1)));\r\n\r\nBut given the method signature of `both()` you cannot combine `hasSize()` and `hasItem()`.\r\n\r\nThe combinable matcher is just a short cut so perhaps you could replace it with two assertions:\r\n\r\n    assertThat(strings, hasSize(1));\r\n    assertThat(strings, hasItem(&quot;Some string&quot;));\r\n","title":"Compilation error when trying to combine hamcrest matchers","body":"<p>Both of the matchers must conform to ...</p>\n\n<pre><code>Matcher&lt;? super LHS&gt; matcher\n</code></pre>\n\n<p>... where LHS is a <code>Collection&lt;?&gt;</code> because <code>strings</code> is a <code>Collection&lt;?&gt;</code>.</p>\n\n<p>In your code <code>hasSize(1)</code> is a <code>Matcher&lt;Collection&lt;?&gt;&gt;</code> but <code>hasItem(\"Some string\")</code> is a <code>Matcher&lt;Iterable&lt;? super String&gt;&gt;</code> hence the compilation error.</p>\n\n<p>This example uses a combinable matcher and it is compilable because both matchers address a collection ...</p>\n\n<pre><code>assertThat(strings, either(empty()).or(hasSize(1)));\n</code></pre>\n\n<p>But given the method signature of <code>both()</code> you cannot combine <code>hasSize()</code> and <code>hasItem()</code>.</p>\n\n<p>The combinable matcher is just a short cut so perhaps you could replace it with two assertions:</p>\n\n<pre><code>assertThat(strings, hasSize(1));\nassertThat(strings, hasItem(\"Some string\"));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26731243,"reputation":1,"user_id":20333538,"display_name":"J. Wong"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694203099,"creation_date":1694203079,"answer_id":77069569,"question_id":45167133,"body_markdown":"Use Hamcrest contains instead. It will match when the collection has exactly 1 item that matches the value, but report an error if there are too many or too little items:\r\n\r\n    assertThat(strings, contains(&quot;Some string&quot;))","title":"Compilation error when trying to combine hamcrest matchers","body":"<p>Use Hamcrest contains instead. It will match when the collection has exactly 1 item that matches the value, but report an error if there are too many or too little items:</p>\n<pre><code>assertThat(strings, contains(&quot;Some string&quot;))\n</code></pre>\n"}],"owner":{"account_id":3563444,"reputation":413,"user_id":2975684,"accept_rate":44,"display_name":"Nir Brachel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1946,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":45168368,"answer_count":2,"score":0,"last_activity_date":1694203099,"creation_date":1500381706,"question_id":45167133,"body_markdown":"I have a Queue of string and I want to combine 2 matchers in a single assert\r\nThe (simplified) code is something like this\r\n\r\n\t\tQueue&lt;String&gt; strings = new LinkedList&lt;&gt;();\r\n\t\tassertThat(strings, both(hasSize(1)).and(hasItem(&quot;Some string&quot;)));\r\n\r\nbut when I compile it I get the following message:\r\n\r\n    incompatible types: no instance(s) of type variable(s) T exist so that org.hamcrest.Matcher&lt;java.lang.Iterable&lt;? super T&gt;&gt; conforms to org.hamcrest.Matcher&lt;? super java.util.Collection&lt;? extends java.lang.Object&gt;&gt;\r\n\r\n- hasItem returns `Matcher&lt;Iterable&lt;? super T&gt;&gt;`\r\n- hasSize returns `Matcher&lt;Collection&lt;? extends E&gt;&gt;`\r\n\r\nhow can I resolve this?","title":"Compilation error when trying to combine hamcrest matchers","body":"<p>I have a Queue of string and I want to combine 2 matchers in a single assert\nThe (simplified) code is something like this</p>\n\n<pre><code>    Queue&lt;String&gt; strings = new LinkedList&lt;&gt;();\n    assertThat(strings, both(hasSize(1)).and(hasItem(\"Some string\")));\n</code></pre>\n\n<p>but when I compile it I get the following message:</p>\n\n<pre><code>incompatible types: no instance(s) of type variable(s) T exist so that org.hamcrest.Matcher&lt;java.lang.Iterable&lt;? super T&gt;&gt; conforms to org.hamcrest.Matcher&lt;? super java.util.Collection&lt;? extends java.lang.Object&gt;&gt;\n</code></pre>\n\n<ul>\n<li>hasItem returns <code>Matcher&lt;Iterable&lt;? super T&gt;&gt;</code></li>\n<li>hasSize returns <code>Matcher&lt;Collection&lt;? extends E&gt;&gt;</code></li>\n</ul>\n\n<p>how can I resolve this?</p>\n"},{"tags":["java","hibernate","jdbc"],"answers":[{"comments":[{"owner":{"account_id":2750029,"reputation":937,"user_id":2369634,"accept_rate":0,"display_name":"user2369634"},"score":0,"creation_date":1470231715,"post_id":38744972,"comment_id":64864435,"body_markdown":"so all database schema have the table &quot;ALL_SEQUENCES&quot; by default?","body":"so all database schema have the table &quot;ALL_SEQUENCES&quot; by default?"},{"owner":{"account_id":2652155,"reputation":28560,"user_id":2293534,"accept_rate":75,"display_name":"SkyWalker"},"score":0,"creation_date":1470232017,"post_id":38744972,"comment_id":64864664,"body_markdown":"`ALL_SEQUENCES`  describes all sequences accessible to the current user.\n\n`DBA_SEQUENCES` - describes all sequences in the database.\n\n`USER_SEQUENCES` - describes all sequences owned by the current user. This view does not display the SEQUENCE_OWNER column.","body":"<code>ALL_SEQUENCES</code>  describes all sequences accessible to the current user.  <code>DBA_SEQUENCES</code> - describes all sequences in the database.  <code>USER_SEQUENCES</code> - describes all sequences owned by the current user. This view does not display the SEQUENCE_OWNER column."},{"owner":{"account_id":47518,"reputation":21228,"user_id":140803,"accept_rate":78,"display_name":"Blessed Geek"},"score":0,"creation_date":1694203137,"post_id":38744972,"comment_id":135865441,"body_markdown":"My impression was &quot; I don&#39;t have to ensure&quot; because wouldn&#39;t spring test jpa auto-create all tables used by the junit?","body":"My impression was &quot; I don&#39;t have to ensure&quot; because wouldn&#39;t spring test jpa auto-create all tables used by the junit?"}],"tags":[],"owner":{"account_id":2652155,"reputation":28560,"user_id":2293534,"accept_rate":75,"display_name":"SkyWalker"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1470231523,"creation_date":1470230764,"answer_id":38744972,"question_id":38744825,"body_markdown":"You have to ensure that the table and the sequence is created. If it is created, then it will work. \r\n\r\nThe table `&quot;ALL_SEQUENCES&quot;` is not created. Please check your database is it exists or not?\r\n\r\nYour problem is the sequence is not created as well as the table is not created.\r\n\r\n\r\n[Solution:][1]\r\n---\r\nCheck your hibernate.cfg.xml. It is not configured well.\r\nFor your clarification, I have given a [cfg file][2] below:\r\n\r\n    &lt;?xml version=&#39;1.0&#39; encoding=&#39;utf-8&#39;?&gt;\r\n    \r\n    &lt;!DOCTYPE hibernate-configuration PUBLIC\r\n            &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;\r\n            &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\r\n    \r\n    &lt;hibernate-configuration&gt;\r\n    \r\n        &lt;session-factory&gt;\r\n    \r\n            &lt;!-- Database connection settings --&gt;\r\n            &lt;property name=&quot;connection.driver_class&quot;&gt;org.h2.Driver&lt;/property&gt;\r\n            &lt;property name=&quot;connection.url&quot;&gt;jdbc:h2:database/test&lt;/property&gt;\r\n            &lt;property name=&quot;connection.username&quot;&gt;sa&lt;/property&gt;\r\n            &lt;property name=&quot;connection.password&quot;/&gt;\r\n            \r\n            &lt;property name=&quot;hibernate.default_schema&quot;&gt;PUBLIC&lt;/property&gt;\r\n    \r\n            &lt;!-- JDBC connection pool (use the built-in) --&gt;\r\n            &lt;property name=&quot;connection.pool_size&quot;&gt;1&lt;/property&gt;\r\n    \r\n            &lt;!-- SQL dialect --&gt;\r\n            &lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.H2Dialect&lt;/property&gt;\r\n    \r\n            &lt;!-- Disable the second-level cache  --&gt;\r\n            &lt;property name=&quot;cache.provider_class&quot;&gt;org.hibernate.cache.internal.NoCacheProvider&lt;/property&gt;\r\n    \r\n            &lt;!-- Echo all executed SQL to stdout --&gt;\r\n            &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\r\n    \r\n            &lt;!-- Drop and re-create the database schema on startup --&gt;\r\n            &lt;property name=&quot;hbm2ddl.auto&quot;&gt;create&lt;/property&gt;\r\n    \r\n            &lt;mapping class=&quot;au.com.ozblog.hibernate.h2.example.User&quot;/&gt;\r\n    \r\n        &lt;/session-factory&gt;\r\n    \r\n    &lt;/hibernate-configuration&gt;\r\n\r\n\r\n  [1]: http://betterlogic.com/roger/2011/12/hibernate-woe-2/\r\n  [2]: https://github.com/levi-putna/Hibernate-H2-Example/blob/master/hibernate-h2-example/src/hibernate.cfg.xml","title":"org.h2.jdbc.JdbcSQLException: Table &quot;ALL_SEQUENCES&quot; not found","body":"<p>You have to ensure that the table and the sequence is created. If it is created, then it will work. </p>\n\n<p>The table <code>\"ALL_SEQUENCES\"</code> is not created. Please check your database is it exists or not?</p>\n\n<p>Your problem is the sequence is not created as well as the table is not created.</p>\n\n<h2><a href=\"http://betterlogic.com/roger/2011/12/hibernate-woe-2/\" rel=\"nofollow\">Solution:</a></h2>\n\n<p>Check your hibernate.cfg.xml. It is not configured well.\nFor your clarification, I have given a <a href=\"https://github.com/levi-putna/Hibernate-H2-Example/blob/master/hibernate-h2-example/src/hibernate.cfg.xml\" rel=\"nofollow\">cfg file</a> below:</p>\n\n<pre><code>&lt;?xml version='1.0' encoding='utf-8'?&gt;\n\n&lt;!DOCTYPE hibernate-configuration PUBLIC\n        \"-//Hibernate/Hibernate Configuration DTD 3.0//EN\"\n        \"http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd\"&gt;\n\n&lt;hibernate-configuration&gt;\n\n    &lt;session-factory&gt;\n\n        &lt;!-- Database connection settings --&gt;\n        &lt;property name=\"connection.driver_class\"&gt;org.h2.Driver&lt;/property&gt;\n        &lt;property name=\"connection.url\"&gt;jdbc:h2:database/test&lt;/property&gt;\n        &lt;property name=\"connection.username\"&gt;sa&lt;/property&gt;\n        &lt;property name=\"connection.password\"/&gt;\n\n        &lt;property name=\"hibernate.default_schema\"&gt;PUBLIC&lt;/property&gt;\n\n        &lt;!-- JDBC connection pool (use the built-in) --&gt;\n        &lt;property name=\"connection.pool_size\"&gt;1&lt;/property&gt;\n\n        &lt;!-- SQL dialect --&gt;\n        &lt;property name=\"dialect\"&gt;org.hibernate.dialect.H2Dialect&lt;/property&gt;\n\n        &lt;!-- Disable the second-level cache  --&gt;\n        &lt;property name=\"cache.provider_class\"&gt;org.hibernate.cache.internal.NoCacheProvider&lt;/property&gt;\n\n        &lt;!-- Echo all executed SQL to stdout --&gt;\n        &lt;property name=\"show_sql\"&gt;true&lt;/property&gt;\n\n        &lt;!-- Drop and re-create the database schema on startup --&gt;\n        &lt;property name=\"hbm2ddl.auto\"&gt;create&lt;/property&gt;\n\n        &lt;mapping class=\"au.com.ozblog.hibernate.h2.example.User\"/&gt;\n\n    &lt;/session-factory&gt;\n\n&lt;/hibernate-configuration&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":140076,"reputation":14964,"user_id":346112,"accept_rate":97,"display_name":"Jim Tough"},"score":1,"creation_date":1609785764,"post_id":40171681,"comment_id":115925797,"body_markdown":"This answer helped me find the problem. It was the `org.hibernate.dialect.Oracle10gDialect` value, but in my code this was buried within a Spring `@Configuration` class in a `@Bean` method that creates a `HibernateJpaVendorAdapter`. With the Oracle dialect property removed, Spring is able to automagically configure for H2 and the error goes away.","body":"This answer helped me find the problem. It was the <code>org.hibernate.dialect.Oracle10gDialect</code> value, but in my code this was buried within a Spring <code>@Configuration</code> class in a <code>@Bean</code> method that creates a <code>HibernateJpaVendorAdapter</code>. With the Oracle dialect property removed, Spring is able to automagically configure for H2 and the error goes away."}],"tags":[],"owner":{"account_id":124590,"reputation":8425,"user_id":319773,"accept_rate":89,"display_name":"Bevor"},"comment_count":1,"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1477038092,"creation_date":1477038092,"answer_id":40171681,"question_id":38744825,"body_markdown":"This happens when you use either a wrong dialect in your `persistence-unit` inside your `persistence.xml`, or you validate against the wrong database. For example, when you run your application against a local H2 database, the best choice would be to remove the dialect, since Hibernate can recognize the database without this property (if the Version of Hibernate is new enough to recognize newer databases). Another solution would be to remove the validate attribute, but I would not recommend that, since you have no database checks at startup then:\r\n\r\n    &lt;properties&gt;\r\n        &lt;property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.Oracle10gDialect&quot; /&gt;\r\n    \t&lt;property name=&quot;hibernate.hbm2ddl.auto&quot; value=&quot;validate&quot; /&gt;\r\n    &lt;/properties&gt;","title":"org.h2.jdbc.JdbcSQLException: Table &quot;ALL_SEQUENCES&quot; not found","body":"<p>This happens when you use either a wrong dialect in your <code>persistence-unit</code> inside your <code>persistence.xml</code>, or you validate against the wrong database. For example, when you run your application against a local H2 database, the best choice would be to remove the dialect, since Hibernate can recognize the database without this property (if the Version of Hibernate is new enough to recognize newer databases). Another solution would be to remove the validate attribute, but I would not recommend that, since you have no database checks at startup then:</p>\n\n<pre><code>&lt;properties&gt;\n    &lt;property name=\"hibernate.dialect\" value=\"org.hibernate.dialect.Oracle10gDialect\" /&gt;\n    &lt;property name=\"hibernate.hbm2ddl.auto\" value=\"validate\" /&gt;\n&lt;/properties&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6911442,"reputation":11,"user_id":5307130,"display_name":"ncc"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1521077311,"creation_date":1521077311,"answer_id":49290166,"question_id":38744825,"body_markdown":"I used multiple dataSources\r\n\r\n``OracleDb1Configuration``\r\n\r\n\r\n    @Primary\r\n    @Bean(name = &quot;oracleDb1EntityManager&quot;)\r\n    public LocalContainerEntityManagerFactoryBean oracleDb1EntityManagerFactory(EntityManagerFactoryBuilder builder) {\r\n        return builder\r\n                .dataSource(oracleDb1DataSource)\r\n                .properties(hibernateProperties())\r\n                .packages(&quot;com.fengxin58.user.ddd.domain.model.oracle.db1&quot;)//设置实体类所在位置\r\n                .persistenceUnit(&quot;oracleDb1PersistenceUnit&quot;)\r\n                .build();\r\n    }\r\n\r\n    private Map&lt;String, Object&gt; hibernateProperties() {\r\n    \t\r\n    \tString env = monitorService.env();\r\n    \tif(log.isDebugEnabled()) {\r\n    \t\tlog.debug(&quot;current profile: {}&quot;, env);\r\n    \t}\r\n        Resource resource = null;\r\n\t\tif(EnvEnum.TEST.key().equals(env)) {\r\n\t\t\tresource = new ClassPathResource(&quot;hibernate-oracle-db1-test.properties&quot;);\r\n\t\t}else {\r\n\t\t\tresource = new ClassPathResource(&quot;hibernate-oracle-db1.properties&quot;);\r\n\t\t}\r\n        try {\r\n            Properties properties = PropertiesLoaderUtils.loadProperties(resource);\r\n            return properties.entrySet().stream()\r\n                    .collect(Collectors.toMap(\r\n                            e -&gt; e.getKey().toString(),\r\n                            e -&gt; e.getValue())\r\n                    );\r\n        } catch (IOException e) {\r\n            return new HashMap&lt;String, Object&gt;();\r\n        }\r\n    }\r\n\r\n\r\n``hibernate-oracle-db1-test.properties``\r\n\r\nhibernate.hbm2ddl.auto=update\r\n\r\n``application-test.yml``\r\n```\r\noracle:\r\n  db1:\r\n    datasource:\r\n      url: jdbc:h2:mem:test\r\n      driver-class-name: org.h2.Driver\r\n      username: root\r\n      password: \r\n  db2:\r\n    datasource:\r\n      url: jdbc:h2:mem:test\r\n      driver-class-name: org.h2.Driver\r\n      username: root\r\n      password: \r\n```","title":"org.h2.jdbc.JdbcSQLException: Table &quot;ALL_SEQUENCES&quot; not found","body":"<p>I used multiple dataSources</p>\n\n<p><code>OracleDb1Configuration</code></p>\n\n<pre><code>@Primary\n@Bean(name = \"oracleDb1EntityManager\")\npublic LocalContainerEntityManagerFactoryBean oracleDb1EntityManagerFactory(EntityManagerFactoryBuilder builder) {\n    return builder\n            .dataSource(oracleDb1DataSource)\n            .properties(hibernateProperties())\n            .packages(\"com.fengxin58.user.ddd.domain.model.oracle.db1\")//设置实体类所在位置\n            .persistenceUnit(\"oracleDb1PersistenceUnit\")\n            .build();\n}\n\nprivate Map&lt;String, Object&gt; hibernateProperties() {\n\n    String env = monitorService.env();\n    if(log.isDebugEnabled()) {\n        log.debug(\"current profile: {}\", env);\n    }\n    Resource resource = null;\n    if(EnvEnum.TEST.key().equals(env)) {\n        resource = new ClassPathResource(\"hibernate-oracle-db1-test.properties\");\n    }else {\n        resource = new ClassPathResource(\"hibernate-oracle-db1.properties\");\n    }\n    try {\n        Properties properties = PropertiesLoaderUtils.loadProperties(resource);\n        return properties.entrySet().stream()\n                .collect(Collectors.toMap(\n                        e -&gt; e.getKey().toString(),\n                        e -&gt; e.getValue())\n                );\n    } catch (IOException e) {\n        return new HashMap&lt;String, Object&gt;();\n    }\n}\n</code></pre>\n\n<p><code>hibernate-oracle-db1-test.properties</code></p>\n\n<p>hibernate.hbm2ddl.auto=update</p>\n\n<p><code>application-test.yml</code>\n<code>\noracle:\n  db1:\n    datasource:\n      url: jdbc:h2:mem:test\n      driver-class-name: org.h2.Driver\n      username: root\n      password: \n  db2:\n    datasource:\n      url: jdbc:h2:mem:test\n      driver-class-name: org.h2.Driver\n      username: root\n      password:\n</code></p>\n"},{"tags":[],"owner":{"account_id":1650357,"reputation":133,"user_id":1521087,"accept_rate":0,"display_name":"Fozix"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1606228313,"creation_date":1606228313,"answer_id":64988613,"question_id":38744825,"body_markdown":"In my case, I was using multiple datasources in my application, and using H2 for tests.\r\nIn this case, you have to set manually the dialect in JPA properties of the datasource, not via application.properties file.\r\n\r\n    Map&lt;String, Object&gt; properties = new HashMap&lt;&gt;();\r\n                properties.put(&quot;hibernate.dialect&quot;, &quot;org.hibernate.dialect.H2Dialect&quot;);\r\n                return builder\r\n                        .dataSource(ds)\r\n                        .packages(&quot;com.application.demo&quot;)\r\n                        .properties(properties)\r\n                        .persistenceUnit(&quot;persitenceUnit1&quot;)\r\n                        .build();\r\nIn every datasource used.\r\n\r\nIn case it can help someone.\r\n\r\nregards","title":"org.h2.jdbc.JdbcSQLException: Table &quot;ALL_SEQUENCES&quot; not found","body":"<p>In my case, I was using multiple datasources in my application, and using H2 for tests.\nIn this case, you have to set manually the dialect in JPA properties of the datasource, not via application.properties file.</p>\n<pre><code>Map&lt;String, Object&gt; properties = new HashMap&lt;&gt;();\n            properties.put(&quot;hibernate.dialect&quot;, &quot;org.hibernate.dialect.H2Dialect&quot;);\n            return builder\n                    .dataSource(ds)\n                    .packages(&quot;com.application.demo&quot;)\n                    .properties(properties)\n                    .persistenceUnit(&quot;persitenceUnit1&quot;)\n                    .build();\n</code></pre>\n<p>In every datasource used.</p>\n<p>In case it can help someone.</p>\n<p>regards</p>\n"}],"owner":{"account_id":2750029,"reputation":937,"user_id":2369634,"accept_rate":0,"display_name":"user2369634"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22555,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"answer_count":4,"score":16,"last_activity_date":1694203094,"creation_date":1470230340,"question_id":38744825,"body_markdown":"Could someone please tell me the reasons for the below error.\r\n\r\nI am using Hibernate in my project and face the below error during server startup\r\n\r\n    15:04:27.909 [localhost-startStop-1] ERROR o.h.tool.hbm2ddl.SchemaValidator - HHH000319: Could not get database metadata\r\n    org.h2.jdbc.JdbcSQLException: Table &quot;ALL_SEQUENCES&quot; not found; SQL statement:\r\n     select sequence_name from all_sequences  union select synonym_name   from all_synonyms us, all_sequences asq  where asq.sequence_name = us.table_name    and asq.sequence_owner = us.table_owner [42102-168]\r\n    \tat org.h2.message.DbException.getJdbcSQLException(DbException.java:329) ~[h2-1.3.168.jar:1.3.168]\r\n    \tat org.h2.message.DbException.get(DbException.java:169) ~[h2-1.3.168.jar:1.3.168]\r\n    \tat org.h2.message.DbException.get(DbException.java:146) ~[h2-1.3.168.jar:1.3.168]\r\n    \tat org.h2.command.Parser.readTableOrView(Parser.java:4770) ~[h2-1.3.168.jar:1.3.168]\r\n    \tat org.h2.command.Parser.readTableFilter(Parser.java:1084) ~[h2-1.3.168.jar:1.3.168]\r\n    \tat org.h2.command.Parser.parseSelectSimpleFromPart(Parser.java:1690) ~[h2-1.3.168.jar:1.3.168]","title":"org.h2.jdbc.JdbcSQLException: Table &quot;ALL_SEQUENCES&quot; not found","body":"<p>Could someone please tell me the reasons for the below error.</p>\n\n<p>I am using Hibernate in my project and face the below error during server startup</p>\n\n<pre><code>15:04:27.909 [localhost-startStop-1] ERROR o.h.tool.hbm2ddl.SchemaValidator - HHH000319: Could not get database metadata\norg.h2.jdbc.JdbcSQLException: Table \"ALL_SEQUENCES\" not found; SQL statement:\n select sequence_name from all_sequences  union select synonym_name   from all_synonyms us, all_sequences asq  where asq.sequence_name = us.table_name    and asq.sequence_owner = us.table_owner [42102-168]\n    at org.h2.message.DbException.getJdbcSQLException(DbException.java:329) ~[h2-1.3.168.jar:1.3.168]\n    at org.h2.message.DbException.get(DbException.java:169) ~[h2-1.3.168.jar:1.3.168]\n    at org.h2.message.DbException.get(DbException.java:146) ~[h2-1.3.168.jar:1.3.168]\n    at org.h2.command.Parser.readTableOrView(Parser.java:4770) ~[h2-1.3.168.jar:1.3.168]\n    at org.h2.command.Parser.readTableFilter(Parser.java:1084) ~[h2-1.3.168.jar:1.3.168]\n    at org.h2.command.Parser.parseSelectSimpleFromPart(Parser.java:1690) ~[h2-1.3.168.jar:1.3.168]\n</code></pre>\n"},{"tags":["java","enums","enumeration"],"comments":[{"owner":{"account_id":735316,"reputation":2338,"user_id":692054,"display_name":"Anon"},"score":0,"creation_date":1305230708,"post_id":5983776,"comment_id":6907472,"body_markdown":"Does the second variant actually compile? It appears to be creating separate *classes* for each enum constant (which is the only way that you could override getURL(). The first is definitely nicer.","body":"Does the second variant actually compile? It appears to be creating separate <i>classes</i> for each enum constant (which is the only way that you could override getURL(). The first is definitely nicer."},{"owner":{"account_id":40248,"reputation":56308,"user_id":116614,"accept_rate":92,"display_name":"mellamokb"},"score":0,"creation_date":1305230773,"post_id":5983776,"comment_id":6907492,"body_markdown":"Personally, I like the second one better.  It&#39;s more flexible.  But essentially they are doing the same thing.","body":"Personally, I like the second one better.  It&#39;s more flexible.  But essentially they are doing the same thing."},{"owner":{"account_id":735316,"reputation":2338,"user_id":692054,"display_name":"Anon"},"score":0,"creation_date":1305230881,"post_id":5983776,"comment_id":6907522,"body_markdown":"@mellamokb - the *behavior* may be the same. How it gets translated into bytecode and executed are very different (and yes, to answer my earlier question, it does compile, and it does create anonymous subclasses)","body":"@mellamokb - the <i>behavior</i> may be the same. How it gets translated into bytecode and executed are very different (and yes, to answer my earlier question, it does compile, and it does create anonymous subclasses)"},{"owner":{"account_id":24844,"reputation":10434,"user_id":63436,"accept_rate":75,"display_name":"Ravi Wallau"},"score":0,"creation_date":1305230993,"post_id":5983776,"comment_id":6907553,"body_markdown":"I always use the first one. I never used the second method to create enums.","body":"I always use the first one. I never used the second method to create enums."},{"owner":{"account_id":374564,"reputation":4903,"user_id":724835,"accept_rate":100,"display_name":"JustinKSU"},"score":0,"creation_date":1305231001,"post_id":5983776,"comment_id":6907557,"body_markdown":"@Anon.  I had no idea it created a subclass.  Does that mean it&#39;s less efficient?","body":"@Anon.  I had no idea it created a subclass.  Does that mean it&#39;s less efficient?"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":3,"creation_date":1305231036,"post_id":5983776,"comment_id":6907572,"body_markdown":"@JustinKSU: Well, it means the JIT is less likely to be able to inline it. I think the chances of it being significant are pretty much nil though.","body":"@JustinKSU: Well, it means the JIT is less likely to be able to inline it. I think the chances of it being significant are pretty much nil though."},{"owner":{"account_id":181901,"reputation":25638,"user_id":416224,"accept_rate":96,"display_name":"Kijewski"},"score":0,"creation_date":1305231358,"post_id":5983776,"comment_id":6907685,"body_markdown":"If that isn&#39;t just a very simple example, I think you should make url public final as Strings are immutable. And no, the second variant is not less efficient.","body":"If that isn&#39;t just a very simple example, I think you should make url public final as Strings are immutable. And no, the second variant is not less efficient."},{"owner":{"account_id":374564,"reputation":4903,"user_id":724835,"accept_rate":100,"display_name":"JustinKSU"},"score":0,"creation_date":1305231448,"post_id":5983776,"comment_id":6907716,"body_markdown":"@Kay Someone else pointed that out.  I updated the variable to be final.  Would you really want to make it public?","body":"@Kay Someone else pointed that out.  I updated the variable to be final.  Would you really want to make it public?"},{"owner":{"account_id":181901,"reputation":25638,"user_id":416224,"accept_rate":96,"display_name":"Kijewski"},"score":0,"creation_date":1305231657,"post_id":5983776,"comment_id":6907775,"body_markdown":"@JustingKSU: yes, I would make it public. There aren&#39;t any drawbacks. The JIT could do much better work if url was public, since accessing it wouldn&#39;t require any calls but only pointer arithmetic.","body":"@JustingKSU: yes, I would make it public. There aren&#39;t any drawbacks. The JIT could do much better work if url was public, since accessing it wouldn&#39;t require any calls but only pointer arithmetic."}],"answers":[{"comments":[{"owner":{"account_id":110937,"reputation":10882,"user_id":293330,"display_name":"Kaj"},"score":0,"creation_date":1305231140,"post_id":5983849,"comment_id":6907612,"body_markdown":"I agree. I usually use case 1 when I don&#39;t have any logic, just constants, and case 2 when I have logic.","body":"I agree. I usually use case 1 when I don&#39;t have any logic, just constants, and case 2 when I have logic."},{"owner":{"account_id":374564,"reputation":4903,"user_id":724835,"accept_rate":100,"display_name":"JustinKSU"},"score":0,"creation_date":1305231236,"post_id":5983849,"comment_id":6907645,"body_markdown":"1. url is private...\n2. The downside to this approach I see is when there are multiple proprieties.  It is nice to see the value next to the property in which is associated instead of having to check the constructor.","body":"1. url is private... 2. The downside to this approach I see is when there are multiple proprieties.  It is nice to see the value next to the property in which is associated instead of having to check the constructor."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1305231275,"post_id":5983849,"comment_id":6907656,"body_markdown":"@JustinKSU: Yes, it&#39;s private and certainly should be - but IMO it should *also* be final.","body":"@JustinKSU: Yes, it&#39;s private and certainly should be - but IMO it should <i>also</i> be final."}],"tags":[],"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"comment_count":3,"down_vote_count":0,"up_vote_count":20,"is_accepted":true,"score":20,"last_activity_date":1305230961,"creation_date":1305230961,"answer_id":5983849,"question_id":5983776,"body_markdown":"The first clearly looks cleaner to me - it makes use of the commonality that each element of the enum will have a fixed String URL which is known at initialization. You&#39;re effectively repeating that &quot;logic&quot; in each implementation in the second version. You&#39;re overriding a method to provide the same *logic* (&quot;just return a string which is known at compile-time&quot;) in each case. I prefer to reserve overriding for changes in *behaviour*.\r\n\r\nI suggest making the `url` field private though, in the first.","title":"Java Enum property best practice","body":"<p>The first clearly looks cleaner to me - it makes use of the commonality that each element of the enum will have a fixed String URL which is known at initialization. You're effectively repeating that \"logic\" in each implementation in the second version. You're overriding a method to provide the same <em>logic</em> (\"just return a string which is known at compile-time\") in each case. I prefer to reserve overriding for changes in <em>behaviour</em>.</p>\n\n<p>I suggest making the <code>url</code> field private though, in the first.</p>\n"},{"comments":[{"owner":{"account_id":374564,"reputation":4903,"user_id":724835,"accept_rate":100,"display_name":"JustinKSU"},"score":0,"creation_date":1305232709,"post_id":5983979,"comment_id":6908081,"body_markdown":"This chapter seems to be about how to implement enums with classes prior to JDK 1.5","body":"This chapter seems to be about how to implement enums with classes prior to JDK 1.5"},{"owner":{"account_id":374564,"reputation":4903,"user_id":724835,"accept_rate":100,"display_name":"JustinKSU"},"score":0,"creation_date":1693668168,"post_id":5983979,"comment_id":135792396,"body_markdown":"link is broken now","body":"link is broken now"}],"tags":[],"owner":{"account_id":111302,"reputation":4393,"user_id":294097,"accept_rate":67,"display_name":"John Kane"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694202365,"creation_date":1305231654,"answer_id":5983979,"question_id":5983776,"body_markdown":"Take a look at item 21 from this chapter of [Josh Bloch&#39;s Effective Java][1]. It talks about the type safe enum pattern.\r\n\r\n\r\n  [1]: https://www.amazon.com/Effective-Java-2nd-Joshua-Bloch/dp/0321356683","title":"Java Enum property best practice","body":"<p>Take a look at item 21 from this chapter of <a href=\"https://rads.stackoverflow.com/amzn/click/com/0321356683\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">Josh Bloch's Effective Java</a>. It talks about the type safe enum pattern.</p>\n"},{"comments":[{"owner":{"account_id":374564,"reputation":4903,"user_id":724835,"accept_rate":100,"display_name":"JustinKSU"},"score":1,"creation_date":1305232066,"post_id":5983993,"comment_id":6907906,"body_markdown":"In the second approach the compiler will complain if you don&#39;t override the getURL() method achieving the same purpose.","body":"In the second approach the compiler will complain if you don&#39;t override the getURL() method achieving the same purpose."},{"owner":{"account_id":181901,"reputation":25638,"user_id":416224,"accept_rate":96,"display_name":"Kijewski"},"score":0,"creation_date":1305232079,"post_id":5983993,"comment_id":6907910,"body_markdown":"In the second the compiler complains, too: `&lt;anonymous SEARCH_ENGINE$2&gt; is not abstract and does not override abstract method getURL() in SEARCH_ENGINE`.","body":"In the second the compiler complains, too: <code>&lt;anonymous SEARCH_ENGINE$2&gt; is not abstract and does not override abstract method getURL() in SEARCH_ENGINE</code>."}],"tags":[],"owner":{"account_id":67532,"reputation":15704,"user_id":197574,"accept_rate":83,"display_name":"DerMike"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1305231739,"creation_date":1305231739,"answer_id":5983993,"question_id":5983776,"body_markdown":"I&#39;d go with the first since the compiler complains if you somehow forget to add a url. The second would let you make errors here.","title":"Java Enum property best practice","body":"<p>I'd go with the first since the compiler complains if you somehow forget to add a url. The second would let you make errors here.</p>\n"}],"owner":{"account_id":374564,"reputation":4903,"user_id":724835,"accept_rate":100,"display_name":"JustinKSU"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12184,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":5983849,"answer_count":3,"score":13,"last_activity_date":1694202365,"creation_date":1305230606,"question_id":5983776,"body_markdown":"I&#39;ve seen two approaches to handling enums with properties.  Is one better than the other?\r\n\r\nAs a property:\r\n\r\n    public enum SEARCH_ENGINE {\r\n    \tGOOGLE(&quot;http://www.google.com&quot;),\r\n    \tBING(&quot;http://www.bing.com&quot;);\r\n    \t\r\n    \tprivate final String url;\r\n    \t\r\n    \tprivate SEARCH_ENGINE(String url) {\r\n    \t\tthis.url = url;\r\n    \t}\r\n    \t\r\n    \tpublic String getURL() {\r\n    \t\treturn url;\r\n    \t}\r\n    }\r\n\r\nAs a method:\r\n\r\n    public enum SEARCH_ENGINE {\r\n    \tGOOGLE {\r\n    \t\tpublic String getURL() {return &quot;http://www.google.com&quot;;}\r\n    \t},\r\n    \tBING {\r\n    \t\tpublic String getURL() {return &quot;http://www.bing.com&quot;;}\r\n    \t};\r\n    \t\r\n    \tpublic abstract String getURL();\r\n    }\r\n","title":"Java Enum property best practice","body":"<p>I've seen two approaches to handling enums with properties.  Is one better than the other?</p>\n\n<p>As a property:</p>\n\n<pre><code>public enum SEARCH_ENGINE {\n    GOOGLE(\"http://www.google.com\"),\n    BING(\"http://www.bing.com\");\n\n    private final String url;\n\n    private SEARCH_ENGINE(String url) {\n        this.url = url;\n    }\n\n    public String getURL() {\n        return url;\n    }\n}\n</code></pre>\n\n<p>As a method:</p>\n\n<pre><code>public enum SEARCH_ENGINE {\n    GOOGLE {\n        public String getURL() {return \"http://www.google.com\";}\n    },\n    BING {\n        public String getURL() {return \"http://www.bing.com\";}\n    };\n\n    public abstract String getURL();\n}\n</code></pre>\n"},{"tags":["java","nested","checkstyle","intellij-plugin"],"comments":[{"owner":{"account_id":4640113,"reputation":2872,"user_id":3760216,"accept_rate":36,"display_name":"Sachith Muhandiram"},"score":0,"creation_date":1694240455,"post_id":77067415,"comment_id":135868304,"body_markdown":"Please post what you had tried already (your code, errors etc)","body":"Please post what you had tried already (your code, errors etc)"}],"answers":[{"tags":[],"owner":{"account_id":2345147,"reputation":118,"user_id":2055614,"display_name":"mlebedy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694201985,"creation_date":1694201985,"answer_id":77069477,"question_id":77067415,"body_markdown":"I think the [LeftCurly][1] check is the closest implementation of your intention. \r\n\r\nI would start by creating a new checker (what you&#39;ve already done) based on the [LeftCurlyCheck][2] code and modifying the [verifyBrace][3] method.\r\n\r\nThere you can get the line after the left curly bracket (e.g. `String lineAfterBrace = getLine(brace.getLineNo());`) and check if it is empty or not.\r\n\r\n(Or you can extend the original LeftCurly check with an option to verify if the next line is blank)\r\n\r\n\r\n  [1]: https://checkstyle.sourceforge.io/checks/blocks/leftcurly.html\r\n  [2]: https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/checks/blocks/LeftCurlyCheck.java\r\n  [3]: https://github.com/checkstyle/checkstyle/blob/c2e65aa2e9f6854f3902c8c018301ba97e8a1706/src/main/java/com/puppycrawl/tools/checkstyle/checks/blocks/LeftCurlyCheck.java#L369","title":"Custom Checkstyle Check Nesting Isssue","body":"<p>I think the <a href=\"https://checkstyle.sourceforge.io/checks/blocks/leftcurly.html\" rel=\"nofollow noreferrer\">LeftCurly</a> check is the closest implementation of your intention.</p>\n<p>I would start by creating a new checker (what you've already done) based on the <a href=\"https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/checks/blocks/LeftCurlyCheck.java\" rel=\"nofollow noreferrer\">LeftCurlyCheck</a> code and modifying the <a href=\"https://github.com/checkstyle/checkstyle/blob/c2e65aa2e9f6854f3902c8c018301ba97e8a1706/src/main/java/com/puppycrawl/tools/checkstyle/checks/blocks/LeftCurlyCheck.java#L369\" rel=\"nofollow noreferrer\">verifyBrace</a> method.</p>\n<p>There you can get the line after the left curly bracket (e.g. <code>String lineAfterBrace = getLine(brace.getLineNo());</code>) and check if it is empty or not.</p>\n<p>(Or you can extend the original LeftCurly check with an option to verify if the next line is blank)</p>\n"}],"owner":{"account_id":29395666,"reputation":1,"user_id":22523068,"display_name":"nulluser"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694201985,"creation_date":1694180381,"question_id":77067415,"body_markdown":"I am trying to create a custom Checkstyle check that enforces a rule in Java that after an opening curly brace there is a new blank line. I have tried a couple approaches but the issue I keep running into is that my check only applies to whatever the top level of code is. \r\n\r\nFor example in a Java file it only enforces the rule on classes but not methods themselves are inside them. \r\n\r\nI have tried two main approaches to writing the check by either checking for the line by going through all the curly brace tokens, or an approach where you look at the entire file contents and check line number similar to this Github issue, https://github.com/checkstyle/checkstyle/pull/11525/files. \r\n\r\nIn either case I am extending the puppycrawl Checkstyle tools and using the visitToken method for the implementation. Then in the checkstyle.xml I am adding my check into the `TreeWalker` module of the `Checker` module. Also as a note I am trying to use this check in the Intellij Checkstyle plugin.","title":"Custom Checkstyle Check Nesting Isssue","body":"<p>I am trying to create a custom Checkstyle check that enforces a rule in Java that after an opening curly brace there is a new blank line. I have tried a couple approaches but the issue I keep running into is that my check only applies to whatever the top level of code is.</p>\n<p>For example in a Java file it only enforces the rule on classes but not methods themselves are inside them.</p>\n<p>I have tried two main approaches to writing the check by either checking for the line by going through all the curly brace tokens, or an approach where you look at the entire file contents and check line number similar to this Github issue, <a href=\"https://github.com/checkstyle/checkstyle/pull/11525/files\" rel=\"nofollow noreferrer\">https://github.com/checkstyle/checkstyle/pull/11525/files</a>.</p>\n<p>In either case I am extending the puppycrawl Checkstyle tools and using the visitToken method for the implementation. Then in the checkstyle.xml I am adding my check into the <code>TreeWalker</code> module of the <code>Checker</code> module. Also as a note I am trying to use this check in the Intellij Checkstyle plugin.</p>\n"},{"tags":["java","apache","maven","dependencies","apache-commons"],"comments":[{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1423845088,"post_id":28504174,"comment_id":45327438,"body_markdown":"How exactly are you running it?","body":"How exactly are you running it?"},{"owner":{"account_id":11435230,"reputation":317,"user_id":9611924,"display_name":"bieboebap"},"score":0,"creation_date":1536063761,"post_id":28504174,"comment_id":91627822,"body_markdown":"I got this error for selenium, i noticed that i added some files manually &amp; some with maven, wich caused this error.. So probably a problem with the compatibility between selenium and htmlDriver (in my case)","body":"I got this error for selenium, i noticed that i added some files manually &amp; some with maven, wich caused this error.. So probably a problem with the compatibility between selenium and htmlDriver (in my case)"}],"answers":[{"comments":[{"owner":{"account_id":200910,"reputation":3887,"user_id":447040,"accept_rate":66,"display_name":"Gobliins"},"score":0,"creation_date":1445607751,"post_id":28504261,"comment_id":54406383,"body_markdown":"which dependency is it?","body":"which dependency is it?"},{"owner":{"account_id":1441481,"reputation":10825,"user_id":1361506,"display_name":"azurefrog"},"score":0,"creation_date":1445611564,"post_id":28504261,"comment_id":54409163,"body_markdown":"@Gobliins The [apache commons-lang](http://commons.apache.org/proper/commons-lang/) home page has instructions to download it directly, or include it as a maven dependency.","body":"@Gobliins The <a href=\"http://commons.apache.org/proper/commons-lang/\" rel=\"nofollow noreferrer\">apache commons-lang</a> home page has instructions to download it directly, or include it as a maven dependency."},{"owner":{"account_id":200910,"reputation":3887,"user_id":447040,"accept_rate":66,"display_name":"Gobliins"},"score":0,"creation_date":1445611939,"post_id":28504261,"comment_id":54409461,"body_markdown":"ah yes i found it i forgot to remove the comment sry","body":"ah yes i found it i forgot to remove the comment sry"},{"owner":{"account_id":949458,"reputation":307,"user_id":975928,"accept_rate":73,"display_name":"MBK"},"score":0,"creation_date":1453170903,"post_id":28504261,"comment_id":57474376,"body_markdown":"I have &lt;version&gt;3.3.2&lt;/version&gt; of commons-lang3 in pom. This did not solve the issue. I still get java.lang.NoClassDefFoundError: org/apache/commons/lang3/StringUtils.   Here is the code which has this error  if (StringUtils.equals(blah.getHaha().getLaugh(), &quot;hehe&quot;)).","body":"I have &lt;version&gt;3.3.2&lt;/version&gt; of commons-lang3 in pom. This did not solve the issue. I still get java.lang.NoClassDefFoundError: org/apache/commons/lang3/StringUtils.   Here is the code which has this error  if (StringUtils.equals(blah.getHaha().getLaugh(), &quot;hehe&quot;))."},{"owner":{"account_id":1441481,"reputation":10825,"user_id":1361506,"display_name":"azurefrog"},"score":0,"creation_date":1453173306,"post_id":28504261,"comment_id":57475002,"body_markdown":"@MBK In the comments here isn&#39;t a great place to try to ask a question.  If this answer didn&#39;t help you, it may be because you have a different problem than the OP.  Try posting your own question, including your code and pom.xml.","body":"@MBK In the comments here isn&#39;t a great place to try to ask a question.  If this answer didn&#39;t help you, it may be because you have a different problem than the OP.  Try posting your own question, including your code and pom.xml."},{"owner":{"account_id":12968566,"reputation":1479,"user_id":9375172,"display_name":"Vikash Choudhary"},"score":0,"creation_date":1573887472,"post_id":28504261,"comment_id":104042786,"body_markdown":"Thanks, @azurefrog. The provided solution worked for me. Cheers!!","body":"Thanks, @azurefrog. The provided solution worked for me. Cheers!!"}],"tags":[],"owner":{"account_id":1441481,"reputation":10825,"user_id":1361506,"display_name":"azurefrog"},"comment_count":6,"down_vote_count":0,"up_vote_count":39,"is_accepted":true,"score":39,"last_activity_date":1423845128,"creation_date":1423845128,"answer_id":28504261,"question_id":28504174,"body_markdown":"&gt; I have added commons-lang-2.6.jar &amp; commons-lang3-3.1-sources.jar...\r\n\r\nHere&#39;s your problem:  `commons-lang-2.6.jar` doesn&#39;t contain the `org.apache.commons.lang3` package, since that&#39;s part of version 3, and `commons-lang3-3.1-sources.jar` contains the source code, not the byte code.\r\n\r\nYou need to include `commons-lang3-3.1.jar` instead.","title":"NoClassDefFoundError: org/apache/commons/lang3/StringUtils","body":"<blockquote>\n  <p>I have added commons-lang-2.6.jar &amp; commons-lang3-3.1-sources.jar...</p>\n</blockquote>\n\n<p>Here's your problem:  <code>commons-lang-2.6.jar</code> doesn't contain the <code>org.apache.commons.lang3</code> package, since that's part of version 3, and <code>commons-lang3-3.1-sources.jar</code> contains the source code, not the byte code.</p>\n\n<p>You need to include <code>commons-lang3-3.1.jar</code> instead.</p>\n"},{"comments":[{"owner":{"account_id":2892194,"reputation":6142,"user_id":2480714,"accept_rate":67,"display_name":"PGMacDesign"},"score":1,"creation_date":1501708745,"post_id":42674106,"comment_id":77903372,"body_markdown":"Or Gradle -- compile &#39;org.apache.commons:commons-lang3:3.1&#39;","body":"Or Gradle -- compile &#39;org.apache.commons:commons-lang3:3.1&#39;"},{"owner":{"account_id":2938635,"reputation":1870,"user_id":2517035,"display_name":"Rajeev Rathor"},"score":1,"creation_date":1511368929,"post_id":42674106,"comment_id":81834500,"body_markdown":"I have added below dependency and my problem get resolved.\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n    &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\n    &lt;version&gt;3.1&lt;/version&gt;\n&lt;/dependency&gt;\n\nThanks","body":"I have added below dependency and my problem get resolved. &lt;dependency&gt;     &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;     &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;     &lt;version&gt;3.1&lt;/version&gt; &lt;/dependency&gt;  Thanks"}],"tags":[],"owner":{"account_id":7394006,"reputation":5031,"user_id":5626568,"display_name":"ℛɑƒ&#230;Ŀᴿᴹᴿ"},"comment_count":2,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1671897662,"creation_date":1488983572,"answer_id":42674106,"question_id":28504174,"body_markdown":"If you&#39;re using **Maven**, put this inside your `pom.xml` file:\r\n\r\nMaven Central  Repository for [Commons Lang](https://mvnrepository.com/artifact/commons-lang/commons-lang):\r\n\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;commons-lang&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;commons-lang&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.6&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\r\nMaven Central Repository for [Apache Commons Lang](https://mvnrepository.com/artifact/org.apache.commons/commons-lang3):\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n        &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\r\n        &lt;version&gt;3.12&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n----------\r\n\r\n&gt; ### Don&#39;t forget: Update Maven Project\r\n\r\n----------\r\n\r\n### Apache Commons Lang ™ Dependency Information\r\n\r\nLast Published: 2 March 2021 | Version: 3.12\r\n\r\n### Apache Maven\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n      &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\r\n      &lt;version&gt;3.12&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nApache Buildr\r\n\r\n    &#39;org.apache.commons:commons-lang3:jar:3.12&#39;\r\n\r\nApache Ivy\r\n\r\n    &lt;dependency org=&quot;org.apache.commons&quot; name=&quot;commons-lang3&quot; rev=&quot;3.12&quot;&gt;\r\n      &lt;artifact name=&quot;commons-lang3&quot; type=&quot;jar&quot; /&gt;\r\n    &lt;/dependency&gt;\r\n\r\nGroovy Grape\r\n\r\n    @Grapes(\r\n    @Grab(group=&#39;org.apache.commons&#39;, module=&#39;commons-lang3&#39;, version=&#39;3.12&#39;)\r\n    )\r\n\r\nGradle/Grails\r\n\r\n    compile &#39;org.apache.commons:commons-lang3:3.12&#39;\r\n\r\nScala SBT\r\n\r\n    libraryDependencies += &quot;org.apache.commons&quot; % &quot;commons-lang3&quot; % &quot;3.12&quot;\r\n\r\nLeiningen\r\n\r\n    [org.apache.commons/commons-lang3 &quot;3.12&quot;]\r\n\r\n----------\r\n\r\n\r\n### Reference:\r\n\r\n- https://commons.apache.org/proper/commons-lang/dependency-info.html","title":"NoClassDefFoundError: org/apache/commons/lang3/StringUtils","body":"<p>If you're using <strong>Maven</strong>, put this inside your <code>pom.xml</code> file:</p>\n<p>Maven Central  Repository for <a href=\"https://mvnrepository.com/artifact/commons-lang/commons-lang\" rel=\"nofollow noreferrer\">Commons Lang</a>:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;commons-lang&lt;/groupId&gt;\n    &lt;artifactId&gt;commons-lang&lt;/artifactId&gt;\n    &lt;version&gt;2.6&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Maven Central Repository for <a href=\"https://mvnrepository.com/artifact/org.apache.commons/commons-lang3\" rel=\"nofollow noreferrer\">Apache Commons Lang</a>:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n    &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\n    &lt;version&gt;3.12&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<hr />\n<blockquote>\n<h3>Don't forget: Update Maven Project</h3>\n</blockquote>\n<hr />\n<h3>Apache Commons Lang ™ Dependency Information</h3>\n<p>Last Published: 2 March 2021 | Version: 3.12</p>\n<h3>Apache Maven</h3>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n  &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\n  &lt;version&gt;3.12&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Apache Buildr</p>\n<pre><code>'org.apache.commons:commons-lang3:jar:3.12'\n</code></pre>\n<p>Apache Ivy</p>\n<pre><code>&lt;dependency org=&quot;org.apache.commons&quot; name=&quot;commons-lang3&quot; rev=&quot;3.12&quot;&gt;\n  &lt;artifact name=&quot;commons-lang3&quot; type=&quot;jar&quot; /&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Groovy Grape</p>\n<pre><code>@Grapes(\n@Grab(group='org.apache.commons', module='commons-lang3', version='3.12')\n)\n</code></pre>\n<p>Gradle/Grails</p>\n<pre><code>compile 'org.apache.commons:commons-lang3:3.12'\n</code></pre>\n<p>Scala SBT</p>\n<pre><code>libraryDependencies += &quot;org.apache.commons&quot; % &quot;commons-lang3&quot; % &quot;3.12&quot;\n</code></pre>\n<p>Leiningen</p>\n<pre><code>[org.apache.commons/commons-lang3 &quot;3.12&quot;]\n</code></pre>\n<hr />\n<h3>Reference:</h3>\n<ul>\n<li><a href=\"https://commons.apache.org/proper/commons-lang/dependency-info.html\" rel=\"nofollow noreferrer\">https://commons.apache.org/proper/commons-lang/dependency-info.html</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":20713,"reputation":2149,"user_id":49767,"accept_rate":75,"display_name":"Mohan Narayanaswamy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1528604359,"creation_date":1528604359,"answer_id":50780515,"question_id":28504174,"body_markdown":"When everything else is correct, rarely jar file gets corrupted. Ensure you don&#39;t see error something like below while compiling\r\n\r\n    [ERROR] error reading \r\n    C:\\Users\\Mohan\\.m2\\repository\\org\\apache\\commons\\commons-lang3\\3.7\\commons-lang3-3.7.jar; \r\n    ZipFile invalid LOC header (bad signature)\r\n\r\n","title":"NoClassDefFoundError: org/apache/commons/lang3/StringUtils","body":"<p>When everything else is correct, rarely jar file gets corrupted. Ensure you don't see error something like below while compiling</p>\n\n<pre><code>[ERROR] error reading \nC:\\Users\\Mohan\\.m2\\repository\\org\\apache\\commons\\commons-lang3\\3.7\\commons-lang3-3.7.jar; \nZipFile invalid LOC header (bad signature)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4005056,"reputation":131,"user_id":3299930,"accept_rate":0,"display_name":"kiran"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1672211740,"creation_date":1532694824,"answer_id":51558027,"question_id":28504174,"body_markdown":"Yo adding the below and update maven project worked like a charm:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n        &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\r\n        &lt;version&gt;3.1&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"NoClassDefFoundError: org/apache/commons/lang3/StringUtils","body":"<p>Yo adding the below and update maven project worked like a charm:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n    &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\n    &lt;version&gt;3.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12014784,"reputation":512,"user_id":8790285,"display_name":"Shell_Leko"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1556527388,"creation_date":1556527388,"answer_id":55899752,"question_id":28504174,"body_markdown":"I was having this issue in IJ version 2016 after updating it to 2018.3.4 and clicking &quot;Generate sources and update folders for all projects&quot; at Maven options tab the issue went away\r\n\r\n[![IJ Maven tab at IJ 2018.3.4][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/0IMEa.png","title":"NoClassDefFoundError: org/apache/commons/lang3/StringUtils","body":"<p>I was having this issue in IJ version 2016 after updating it to 2018.3.4 and clicking \"Generate sources and update folders for all projects\" at Maven options tab the issue went away</p>\n\n<p><a href=\"https://i.stack.imgur.com/0IMEa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0IMEa.png\" alt=\"IJ Maven tab at IJ 2018.3.4\"></a></p>\n"},{"tags":[],"owner":{"account_id":5618037,"reputation":43,"user_id":4448729,"display_name":"smita"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672211714,"creation_date":1562655914,"answer_id":56947021,"question_id":28504174,"body_markdown":"Adding below worked for me:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n        &lt;artifactId&gt;commons-math3&lt;/artifactId&gt;\r\n        &lt;version&gt;3.6.1&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"NoClassDefFoundError: org/apache/commons/lang3/StringUtils","body":"<p>Adding below worked for me:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n    &lt;artifactId&gt;commons-math3&lt;/artifactId&gt;\n    &lt;version&gt;3.6.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":1896746,"reputation":4539,"user_id":1713531,"accept_rate":64,"display_name":"Rachita Nanda"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":146411,"favorite_count":0,"down_vote_count":0,"up_vote_count":35,"accepted_answer_id":28504261,"answer_count":6,"score":35,"last_activity_date":1694201020,"creation_date":1423844876,"question_id":28504174,"body_markdown":"I&#39;m trying to run the sample project with [this][1] library and I get the following error:\r\n\r\n    Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: \r\n\r\n        org/apache/commons/lang3/StringUtils\r\n\r\n    \tat com.github.devnied.emvnfccard.enums.EmvCardScheme.&lt;init&gt;(EmvCardScheme.java:97)\r\n    \tat com.github.devnied.emvnfccard.enums.EmvCardScheme.&lt;clinit&gt;(EmvCardScheme.java:32)\r\n    \tat com.github.devnied.emvnfccard.parser.EmvParser.readWithAID(EmvParser.java:277)\r\n    \tat com.github.devnied.emvnfccard.parser.EmvParser.readEmvCard(EmvParser.java:120)\r\n    \tat com.github.devnied.emvpcsccard.Main.main(Main.java:64)\r\n    Caused by: java.lang.ClassNotFoundException: org.apache.commons.lang3.StringUtils\r\n    \tat java.net.URLClassLoader$1.run(Unknown Source)\r\n    \tat java.net.URLClassLoader$1.run(Unknown Source)\r\n    \tat java.security.AccessController.doPrivileged(Native Method)\r\n    \tat java.net.URLClassLoader.findClass(Unknown Source)\r\n    \tat java.lang.ClassLoader.loadClass(Unknown Source)\r\n    \tat sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)\r\n    \tat java.lang.ClassLoader.loadClass(Unknown Source)\r\n    \t... 5 more\r\n\r\nI&#39;ve added **commons-lang-2.6.jar** &amp; **commons-lang3-3.1-sources.jar** in **libs** and **classpath**\r\n\r\n**Main class:**\r\n\r\n\r\n    public static void main(final String[] args) throws CardException {\r\n    \tMain pcsc = new Main();\r\n    \tCardTerminal ct = pcsc.selectCardTerminal();\r\n    \tCard c = null;\r\n    \tif (ct != null) {\r\n    \t\tc = pcsc.establishConnection(ct);\r\n    \t\tCardChannel channel = c.getBasicChannel();\r\n    \t\tPcscProvider provider = new PcscProvider(channel);\r\n    \t\tEmvParser parser = new EmvParser(provider, false);\r\n    \t\tparser.readEmvCard();\r\n    \t\tc.disconnect(false);\r\n    \t}\r\n    }\r\n\r\nI have referred to the following links:\r\n\r\n- https://stackoverflow.com/questions/17781746/java-lang-classnotfoundexception-org-apache-commons-lang-stringutils-from-basec\r\n\r\n- https://stackoverflow.com/questions/20681530/struts-2-framework-demo\r\n\r\n- http://apache-commons.680414.n4.nabble.com/lang-java-lang-NoClassDefFoundError-org-apache-commons-lang-StringUtils-Exception-td3735881.html\r\n\r\n  [1]: https://github.com/devnied/EMV-NFC-Paycard-Enrollment\r\n\r\n","title":"NoClassDefFoundError: org/apache/commons/lang3/StringUtils","body":"<p>I'm trying to run the sample project with <a href=\"https://github.com/devnied/EMV-NFC-Paycard-Enrollment\" rel=\"noreferrer\">this</a> library and I get the following error:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.NoClassDefFoundError: \n\n    org/apache/commons/lang3/StringUtils\n\n    at com.github.devnied.emvnfccard.enums.EmvCardScheme.&lt;init&gt;(EmvCardScheme.java:97)\n    at com.github.devnied.emvnfccard.enums.EmvCardScheme.&lt;clinit&gt;(EmvCardScheme.java:32)\n    at com.github.devnied.emvnfccard.parser.EmvParser.readWithAID(EmvParser.java:277)\n    at com.github.devnied.emvnfccard.parser.EmvParser.readEmvCard(EmvParser.java:120)\n    at com.github.devnied.emvpcsccard.Main.main(Main.java:64)\nCaused by: java.lang.ClassNotFoundException: org.apache.commons.lang3.StringUtils\n    at java.net.URLClassLoader$1.run(Unknown Source)\n    at java.net.URLClassLoader$1.run(Unknown Source)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.net.URLClassLoader.findClass(Unknown Source)\n    at java.lang.ClassLoader.loadClass(Unknown Source)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)\n    at java.lang.ClassLoader.loadClass(Unknown Source)\n    ... 5 more\n</code></pre>\n\n<p>I've added <strong>commons-lang-2.6.jar</strong> &amp; <strong>commons-lang3-3.1-sources.jar</strong> in <strong>libs</strong> and <strong>classpath</strong></p>\n\n<p><strong>Main class:</strong></p>\n\n<pre><code>public static void main(final String[] args) throws CardException {\n    Main pcsc = new Main();\n    CardTerminal ct = pcsc.selectCardTerminal();\n    Card c = null;\n    if (ct != null) {\n        c = pcsc.establishConnection(ct);\n        CardChannel channel = c.getBasicChannel();\n        PcscProvider provider = new PcscProvider(channel);\n        EmvParser parser = new EmvParser(provider, false);\n        parser.readEmvCard();\n        c.disconnect(false);\n    }\n}\n</code></pre>\n\n<p>I have referred to the following links:</p>\n\n<ul>\n<li><p><a href=\"https://stackoverflow.com/questions/17781746/java-lang-classnotfoundexception-org-apache-commons-lang-stringutils-from-basec\">java.lang.ClassNotFoundException: org.apache.commons.lang.StringUtils from BaseClassLoader</a></p></li>\n<li><p><a href=\"https://stackoverflow.com/questions/20681530/struts-2-framework-demo\">Struts 2 framework demo</a></p></li>\n<li><p><a href=\"http://apache-commons.680414.n4.nabble.com/lang-java-lang-NoClassDefFoundError-org-apache-commons-lang-StringUtils-Exception-td3735881.html\" rel=\"noreferrer\">http://apache-commons.680414.n4.nabble.com/lang-java-lang-NoClassDefFoundError-org-apache-commons-lang-StringUtils-Exception-td3735881.html</a></p></li>\n</ul>\n"},{"tags":["java","apache-kafka","project-reactor","reactor-kafka"],"comments":[{"owner":{"account_id":2149787,"reputation":599,"user_id":1906518,"display_name":"dagra"},"score":0,"creation_date":1673911304,"post_id":75139651,"comment_id":132598685,"body_markdown":"Hey mate! you may have to check the replication setting for your partitions. Kafka works on CAP theorem, if you have high number assigned to partitions and replica. Kafka will spent time in rebalancing to make it consistent (C), and the Availability (A) will suffer.\n\nIt looks like you choose Consistency + Partitioning scarifying Availability.","body":"Hey mate! you may have to check the replication setting for your partitions. Kafka works on CAP theorem, if you have high number assigned to partitions and replica. Kafka will spent time in rebalancing to make it consistent (C), and the Availability (A) will suffer.  It looks like you choose Consistency + Partitioning scarifying Availability."}],"answers":[{"tags":[],"owner":{"account_id":129567,"reputation":953,"user_id":328237,"display_name":"Tony"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694200965,"creation_date":1694200965,"answer_id":77069400,"question_id":75139651,"body_markdown":"I&#39;m assuming when you say 70 consumers you mean consumer instances within a group, not 70 different consumer groups. I think the cause of your continuous rebalancing is that you have more consumers than partitions. That means some consumers will never get a partition. I think that&#39;s a bad state for the rebalance. Even if that isn&#39;t the cause of the problem, there is no benefit in having more consumers than partitions. The number of partitions is the maximum amount or parallelization you can have. Try decreasing the number of consumers to 60, or increasing the number of partitions to 70.\r\nAnother common cause of constant rebalancing is that one or more consumers is taking longer than the timeout period to send a heartbeat. This can happen when it takes a long time to process one batch of data. Make the timeout period longer or request smaller batches.","title":"Reactive Kafka consumer is rebalancing continuosly","body":"<p>I'm assuming when you say 70 consumers you mean consumer instances within a group, not 70 different consumer groups. I think the cause of your continuous rebalancing is that you have more consumers than partitions. That means some consumers will never get a partition. I think that's a bad state for the rebalance. Even if that isn't the cause of the problem, there is no benefit in having more consumers than partitions. The number of partitions is the maximum amount or parallelization you can have. Try decreasing the number of consumers to 60, or increasing the number of partitions to 70.\nAnother common cause of constant rebalancing is that one or more consumers is taking longer than the timeout period to send a heartbeat. This can happen when it takes a long time to process one batch of data. Make the timeout period longer or request smaller batches.</p>\n"}],"owner":{"account_id":6816720,"reputation":473,"user_id":5245143,"accept_rate":25,"display_name":"Vijay Manohar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":288,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694200965,"creation_date":1673902875,"question_id":75139651,"body_markdown":"We are using 60 Partitions and have 70 consumers(10 more than partitions),There is no consumer Lag in any of the partitions, but rebalancing is happening in loop continuosly.\r\nProcessing time of Each kafkaEvent is 10ms\r\n\r\nThe following is the CommitFailed Exception which i get \r\n\r\n    org.apache.kafka.common.errors.RebalanceInProgressException: Offset commit cannot be completed since the consumer is undergoing a rebalance for auto partition assignment. You can try completing the rebalance by calling poll() and then retry the operation.\r\n\r\nI am using reactor-kafka:1.3.12 , reactor-core:3.4.18 , kafka-clients:3.0.1 , Java 17 version and Tomcat Webserver\r\n\r\n```\r\nProperties props = new Properties();\r\n      props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG,&quot;CommentedbootStrapServersUrl&quot;);\r\n      props.put(ConsumerConfig.GROUP_ID_CONFIG,&quot;user-groupid-1&quot;);\r\n      props.put(ConsumerConfig.CLIENT_ID_CONFIG,&quot;client-1&quot;);\r\n      props.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG,true);\r\n      props.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG,&quot;earliest&quot;);\r\n      props.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class.getName());\r\n      props.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG,StringDeserializer.class.getName());\r\n      props.put(ConsumerConfig.SESSION_TIMEOUT_MS_CONFIG,360000);\r\n      props.put(ConsumerConfig.REQUEST_TIMEOUT_MS_CONFIG,300500);\r\n      props.put(ConsumerConfig.HEARTBEAT_INTERVAL_MS_CONFIG,30500);\r\n      props.put(ConsumerConfig.MAX_POLL_INTERVAL_MS_CONFIG,300000);\r\n      props.put(ConsumerConfig.MAX_POLL_RECORDS_CONFIG,5);\r\n      props.put(ConsumerConfig.PARTITION_ASSIGNMENT_STRATEGY_CONFIG, &quot;org.apache.kafka.clients.consumer.CooperativeStickyAssignor&quot;);\r\n\r\nReceiverOptions&lt;String,String&gt; receiverOptions = ReceiverOptions.&lt;String,String&gt;create(props)\r\n              .addAssignListener(partitions -&gt;LOGGER.info(&quot;onPartitionAssigned {}&quot;,partitions))\r\n              .addRevokeListener(partitions -&gt; LOGGER.info(&quot;onPartitionRevoked {}&quot;,partitions))\r\n              .commitRetryInterval(Duration.ofMillis(3000))\r\n              .commitBatchSize(3)\r\n              .commitInterval(Duration.ofMillis(2000))\r\n              .maxDelayRebalance(Duration.ofSeconds(60))\r\n              .subscription(Collections.singleton(&quot;commentedTopicName&quot;));\r\n\r\n      Flux&lt;ReceiverRecord&lt;String,String&gt;&gt; inboundFlux = KafkaReceiver.create(receiverOptions)\r\n              .receive()\r\n              .onErrorContinue((throwable,o) -&gt; {\r\n                  LOGGER.error(&quot;Error while consuming in this pod&quot;);\r\n              })\r\n              .retryWhen(Retry.backoff(3, Duration.ofSeconds(3)).transientErrors(true))\r\n              .repeat();\r\n\r\n              try {\r\n                   Scheduler schedulers = Schedulers.newBoundedElastic(2,2,&quot;UThread&quot;);\r\n                   inboundFlux\r\n                           .publishOn(schedulers)\r\n                           .doOnNext(kafkaEvent -&gt; {\r\n                                callBusinessLogic(kafkaEvent);\r\n                                kafkaEvent.receiverOffset().acknowledge();\r\n                           })\r\n                           .doOnError(e-&gt;e.printStackTrace())\r\n                           .subscribe();\r\n               } catch (Exception e){\r\n                   e.printStackTrace();\r\n               } \r\n```\r\n\r\nNeeded help with fixing rebalancing issue, consumers are stable at times , but if a rebalance starts , then it never stops.","title":"Reactive Kafka consumer is rebalancing continuosly","body":"<p>We are using 60 Partitions and have 70 consumers(10 more than partitions),There is no consumer Lag in any of the partitions, but rebalancing is happening in loop continuosly.\nProcessing time of Each kafkaEvent is 10ms</p>\n<p>The following is the CommitFailed Exception which i get</p>\n<pre><code>org.apache.kafka.common.errors.RebalanceInProgressException: Offset commit cannot be completed since the consumer is undergoing a rebalance for auto partition assignment. You can try completing the rebalance by calling poll() and then retry the operation.\n</code></pre>\n<p>I am using reactor-kafka:1.3.12 , reactor-core:3.4.18 , kafka-clients:3.0.1 , Java 17 version and Tomcat Webserver</p>\n<pre><code>Properties props = new Properties();\n      props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG,&quot;CommentedbootStrapServersUrl&quot;);\n      props.put(ConsumerConfig.GROUP_ID_CONFIG,&quot;user-groupid-1&quot;);\n      props.put(ConsumerConfig.CLIENT_ID_CONFIG,&quot;client-1&quot;);\n      props.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG,true);\n      props.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG,&quot;earliest&quot;);\n      props.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class.getName());\n      props.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG,StringDeserializer.class.getName());\n      props.put(ConsumerConfig.SESSION_TIMEOUT_MS_CONFIG,360000);\n      props.put(ConsumerConfig.REQUEST_TIMEOUT_MS_CONFIG,300500);\n      props.put(ConsumerConfig.HEARTBEAT_INTERVAL_MS_CONFIG,30500);\n      props.put(ConsumerConfig.MAX_POLL_INTERVAL_MS_CONFIG,300000);\n      props.put(ConsumerConfig.MAX_POLL_RECORDS_CONFIG,5);\n      props.put(ConsumerConfig.PARTITION_ASSIGNMENT_STRATEGY_CONFIG, &quot;org.apache.kafka.clients.consumer.CooperativeStickyAssignor&quot;);\n\nReceiverOptions&lt;String,String&gt; receiverOptions = ReceiverOptions.&lt;String,String&gt;create(props)\n              .addAssignListener(partitions -&gt;LOGGER.info(&quot;onPartitionAssigned {}&quot;,partitions))\n              .addRevokeListener(partitions -&gt; LOGGER.info(&quot;onPartitionRevoked {}&quot;,partitions))\n              .commitRetryInterval(Duration.ofMillis(3000))\n              .commitBatchSize(3)\n              .commitInterval(Duration.ofMillis(2000))\n              .maxDelayRebalance(Duration.ofSeconds(60))\n              .subscription(Collections.singleton(&quot;commentedTopicName&quot;));\n\n      Flux&lt;ReceiverRecord&lt;String,String&gt;&gt; inboundFlux = KafkaReceiver.create(receiverOptions)\n              .receive()\n              .onErrorContinue((throwable,o) -&gt; {\n                  LOGGER.error(&quot;Error while consuming in this pod&quot;);\n              })\n              .retryWhen(Retry.backoff(3, Duration.ofSeconds(3)).transientErrors(true))\n              .repeat();\n\n              try {\n                   Scheduler schedulers = Schedulers.newBoundedElastic(2,2,&quot;UThread&quot;);\n                   inboundFlux\n                           .publishOn(schedulers)\n                           .doOnNext(kafkaEvent -&gt; {\n                                callBusinessLogic(kafkaEvent);\n                                kafkaEvent.receiverOffset().acknowledge();\n                           })\n                           .doOnError(e-&gt;e.printStackTrace())\n                           .subscribe();\n               } catch (Exception e){\n                   e.printStackTrace();\n               } \n</code></pre>\n<p>Needed help with fixing rebalancing issue, consumers are stable at times , but if a rebalance starts , then it never stops.</p>\n"},{"tags":["java","intellij-idea"],"comments":[{"owner":{"account_id":36734,"reputation":392137,"user_id":104891,"display_name":"CrazyCoder"},"score":2,"creation_date":1372171323,"post_id":17300318,"comment_id":25087002,"body_markdown":"Source roots configuration is not correct, you have `main` directory set as source root, but the parent of this directory should be used instead, or you need to fix the package statement.","body":"Source roots configuration is not correct, you have <code>main</code> directory set as source root, but the parent of this directory should be used instead, or you need to fix the package statement."},{"owner":{"account_id":38931,"reputation":32526,"user_id":112079,"display_name":"fvu"},"score":2,"creation_date":1372171556,"post_id":17300318,"comment_id":25087187,"body_markdown":"`main.java` is a rather odd name for a `package`","body":"<code>main.java</code> is a rather odd name for a <code>package</code>"},{"owner":{"account_id":1656678,"reputation":1542,"user_id":1526048,"accept_rate":65,"display_name":"Aido"},"score":0,"creation_date":1372171647,"post_id":17300318,"comment_id":25087236,"body_markdown":"@fvu It was auto generated. I thing it has something to do with the fact that the class is in project\\src\\main\\java","body":"@fvu It was auto generated. I thing it has something to do with the fact that the class is in project\\src\\main\\java"},{"owner":{"account_id":104591,"reputation":2404,"user_id":279554,"accept_rate":64,"display_name":"Jaydeep Patel"},"score":0,"creation_date":1372171701,"post_id":17300318,"comment_id":25087270,"body_markdown":"classpath starts from project\\src\\main\\java. So what ever dir under this are actual packages. Try removing the package if your file is under src\\java and run","body":"classpath starts from project\\src\\main\\java. So what ever dir under this are actual packages. Try removing the package if your file is under src\\java and run"},{"owner":{"account_id":38931,"reputation":32526,"user_id":112079,"display_name":"fvu"},"score":0,"creation_date":1372171861,"post_id":17300318,"comment_id":25087377,"body_markdown":"@AidanEdwards actually I think it&#39;s something **you** entered, not a regular IntelliJ user myself but I don&#39;t believe a respectable IDE will autosuggest main.**java** as a **package name**.  Throw away that project and start over, paying careful attention to everything you enter is the best advice I can give you.","body":"@AidanEdwards actually I think it&#39;s something <b>you</b> entered, not a regular IntelliJ user myself but I don&#39;t believe a respectable IDE will autosuggest main.**java** as a <b>package name</b>.  Throw away that project and start over, paying careful attention to everything you enter is the best advice I can give you."}],"answers":[{"tags":[],"owner":{"account_id":166521,"reputation":30443,"user_id":390695,"accept_rate":72,"display_name":"Damian Leszczyński - Vash"},"comment_count":0,"down_vote_count":6,"up_vote_count":1,"is_accepted":false,"score":-5,"last_activity_date":1372171867,"creation_date":1372171867,"answer_id":17300613,"question_id":17300318,"body_markdown":"Your package is `main.java`, you pass the argument `com.intellij.rt.execution.application.AppMain java.start`, and you exception says that that can not found `java.start`. And this is correct. \r\n\r\nTry to compile it using only console. Leave the IDE for the beginning, invest you time to understand the compiler not how the IDE works. \r\n\r\n","title":"Error &quot;ClassNotFoundException&quot; in IntelliJ IDEA","body":"<p>Your package is <code>main.java</code>, you pass the argument <code>com.intellij.rt.execution.application.AppMain java.start</code>, and you exception says that that can not found <code>java.start</code>. And this is correct. </p>\n\n<p>Try to compile it using only console. Leave the IDE for the beginning, invest you time to understand the compiler not how the IDE works. </p>\n"},{"comments":[{"owner":{"account_id":94508,"reputation":729,"user_id":258001,"display_name":"Murali Mohan"},"score":0,"creation_date":1426738551,"post_id":17304563,"comment_id":46498812,"body_markdown":"Cool hint. For IntelliJ IDEA 14, I had to remove the following line from the .iml file. &lt;sourceFolder url=&quot;file://$MODULE_DIR$&quot; isTestSource=&quot;false&quot; /&gt;","body":"Cool hint. For IntelliJ IDEA 14, I had to remove the following line from the .iml file. &lt;sourceFolder url=&quot;file://$MODULE_DIR$&quot; isTestSource=&quot;false&quot; /&gt;"},{"owner":{"account_id":37188,"reputation":1578,"user_id":106275,"display_name":"Stein"},"score":0,"creation_date":1476916645,"post_id":17304563,"comment_id":67555208,"body_markdown":"Or in other words @Murali, in the same dialog, you also have to unmark any parent folder like *src* or *src/main* that were marked as Source Folder earlier. Otherwise, it seems the files are compiled twice and errors emerge about multiple definitions.","body":"Or in other words @Murali, in the same dialog, you also have to unmark any parent folder like <i>src</i> or <i>src/main</i> that were marked as Source Folder earlier. Otherwise, it seems the files are compiled twice and errors emerge about multiple definitions."}],"tags":[],"owner":{"account_id":2202156,"reputation":736,"user_id":1946286,"display_name":"Mateusz D."},"comment_count":2,"down_vote_count":0,"up_vote_count":54,"is_accepted":true,"score":54,"last_activity_date":1524361828,"creation_date":1372183898,"answer_id":17304563,"question_id":17300318,"body_markdown":"Probably your project structure was ***src/main/java/start.java*** but when you added it to IntelliJ you have set ***src*** as a source folder, so IntelliJ put ***main.java*** as a package.\r\n\r\nIn **Project Setting (&lt;kbd&gt;Ctrl&lt;/kbd&gt;+&lt;kbd&gt;Shift&lt;/kbd&gt;+&lt;kbd&gt;Alt&lt;/kbd&gt;+&lt;kbd&gt;S&lt;/kbd&gt;) → Modules → Sources tab**  set ***src/main/java*** as **Source Folder**. Then in your simple program change package to whatever you like (e.g. *my.test*). After that if IntelliJ reports any error in line with *package* quick fix with &lt;kbd&gt;Alt&lt;/kbd&gt;+&lt;kbd&gt;Enter&lt;/kbd&gt; should help\r\n","title":"Error &quot;ClassNotFoundException&quot; in IntelliJ IDEA","body":"<p>Probably your project structure was <strong><em>src/main/java/start.java</em></strong> but when you added it to IntelliJ you have set <strong><em>src</em></strong> as a source folder, so IntelliJ put <strong><em>main.java</em></strong> as a package.</p>\n\n<p>In <strong>Project Setting (<kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>Alt</kbd>+<kbd>S</kbd>) → Modules → Sources tab</strong>  set <strong><em>src/main/java</em></strong> as <strong>Source Folder</strong>. Then in your simple program change package to whatever you like (e.g. <em>my.test</em>). After that if IntelliJ reports any error in line with <em>package</em> quick fix with <kbd>Alt</kbd>+<kbd>Enter</kbd> should help</p>\n"},{"tags":[],"owner":{"account_id":1692466,"reputation":311,"user_id":1554559,"display_name":"TomT"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1384122936,"creation_date":1384122936,"answer_id":19896124,"question_id":17300318,"body_markdown":"Just for the future: I had unicode characters in the folder name like &quot;Course name&quot;/Teht&#228;v&#228;t/Project and the problem was in &quot;&#228;&quot;. When i changed it to &quot;a&quot; the program started to work.","title":"Error &quot;ClassNotFoundException&quot; in IntelliJ IDEA","body":"<p>Just for the future: I had unicode characters in the folder name like \"Course name\"/Tehtävät/Project and the problem was in \"ä\". When i changed it to \"a\" the program started to work.</p>\n"},{"tags":[],"owner":{"account_id":5020589,"reputation":538,"user_id":4034182,"accept_rate":50,"display_name":"a.parfenov"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1524361872,"creation_date":1429173390,"answer_id":29669467,"question_id":17300318,"body_markdown":"As mentioned before you should check File → ProjectStructure → ProjectSettings → Modules → Sources - your folder must be marked as a &quot;Source&quot;.\r\nAlso you should update your Run → EditConfigurations → Configuration → Main class to correspond with your package","title":"Error &quot;ClassNotFoundException&quot; in IntelliJ IDEA","body":"<p>As mentioned before you should check File → ProjectStructure → ProjectSettings → Modules → Sources - your folder must be marked as a \"Source\".\nAlso you should update your Run → EditConfigurations → Configuration → Main class to correspond with your package</p>\n"},{"tags":[],"owner":{"account_id":6358864,"reputation":149,"user_id":4935064,"display_name":"Trionet"},"comment_count":0,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1474764768,"creation_date":1474747970,"answer_id":39680539,"question_id":17300318,"body_markdown":"I had this problem and couldn&#39;t solve it with any of these solutions. However I think the problem was that I was using &#39;open&#39; to create a project from a directory with some java files in. Instead I had to &#39;create new project&#39; with the same directory as root.\r\n\r\nMake sure you delete any &#39;.idea&#39; directories and &#39;.iml&#39; files when &#39;create new project&#39; since it will otherwise complain about a project already being in the given directory.","title":"Error &quot;ClassNotFoundException&quot; in IntelliJ IDEA","body":"<p>I had this problem and couldn't solve it with any of these solutions. However I think the problem was that I was using 'open' to create a project from a directory with some java files in. Instead I had to 'create new project' with the same directory as root.</p>\n\n<p>Make sure you delete any '.idea' directories and '.iml' files when 'create new project' since it will otherwise complain about a project already being in the given directory.</p>\n"},{"comments":[{"owner":{"account_id":3019250,"reputation":2067,"user_id":2560666,"accept_rate":42,"display_name":"Alec"},"score":0,"creation_date":1482534699,"post_id":41122731,"comment_id":69820755,"body_markdown":"If I use &quot;**Inherit...**&quot;, then I get an error on run, saying &quot;the output path is not specified&quot;.","body":"If I use &quot;<b>Inherit...</b>&quot;, then I get an error on run, saying &quot;the output path is not specified&quot;."},{"owner":{"account_id":7685533,"reputation":2655,"user_id":5823489,"accept_rate":40,"display_name":"Guillaume Lebreton"},"score":1,"creation_date":1483905048,"post_id":41122731,"comment_id":70279381,"body_markdown":"The answer is [here](http://stackoverflow.com/questions/23688702/cannot-start-compilation-the-output-path-is-not-specified-for-module)","body":"The answer is <a href=\"http://stackoverflow.com/questions/23688702/cannot-start-compilation-the-output-path-is-not-specified-for-module\">here</a>"}],"tags":[],"owner":{"account_id":7685533,"reputation":2655,"user_id":5823489,"accept_rate":40,"display_name":"Guillaume Lebreton"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1481636836,"creation_date":1481636836,"answer_id":41122731,"question_id":17300318,"body_markdown":"For me, in IntelliJ-Idea 2016, the problem was that in `Project_structure/modules`, in the Path tab you have to check **&quot;Inherit project compile output path&quot;**, rather than **&quot;Use module compile output path&quot;**","title":"Error &quot;ClassNotFoundException&quot; in IntelliJ IDEA","body":"<p>For me, in IntelliJ-Idea 2016, the problem was that in <code>Project_structure/modules</code>, in the Path tab you have to check <strong>\"Inherit project compile output path\"</strong>, rather than <strong>\"Use module compile output path\"</strong></p>\n"},{"tags":[],"owner":{"account_id":6288722,"reputation":21,"user_id":6336351,"display_name":"mariotaz"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1483087208,"creation_date":1483087208,"answer_id":41393172,"question_id":17300318,"body_markdown":"I falled down this problem after a recent  re install of my intellif community edition.\r\n\r\nIntelliJ IDEA 2016.3.2\r\nBuild #IC-163.10154.41, built on December 21, 2016\r\nJRE: 1.8.0_112-release-408-b6 amd64\r\nJVM: OpenJDK 64-Bit Server VM by JetBrains s.r.o\r\nom my laptop asus N73SV with Ubuntu 16.04\r\n\r\nThe Context is:\r\nI was trying to restart Intellij projects previously running fine. That projects where done with intellij CI, AND THEY WHERE located on my freebox server.\r\n\r\nI&#39;ve tryed all solutions proposed here, but without result.\r\nAt the end I just:\r\nClose the project. Shutdown Intellij. copy / paste the entire project from my freebox server to my system folder. Re start Intellij, open the project previously paste into my system folder. Rebuild the projet from the /Build/Re build menu. And finaly Run my project. And !!! DONE...It works!!\r\n\r\nMy suggest is: Is there a problem with pathname lenght or characters contented in that pathname to the project.\r\nIndeed /run/user/1000/gvfs/smb-share:server=freebox,share=disque%20dur/blaBlaToMyFileProjectFolder\r\nThe full pathname contents 127 caracters among :,-_/%=\r\n\r\nIt that the tric?\r\n\r\nHope it&#39;s help.\r\nSorry for my broken english. I&#39;m french ;-)\r\nOliver","title":"Error &quot;ClassNotFoundException&quot; in IntelliJ IDEA","body":"<p>I falled down this problem after a recent  re install of my intellif community edition.</p>\n\n<p>IntelliJ IDEA 2016.3.2\nBuild #IC-163.10154.41, built on December 21, 2016\nJRE: 1.8.0_112-release-408-b6 amd64\nJVM: OpenJDK 64-Bit Server VM by JetBrains s.r.o\nom my laptop asus N73SV with Ubuntu 16.04</p>\n\n<p>The Context is:\nI was trying to restart Intellij projects previously running fine. That projects where done with intellij CI, AND THEY WHERE located on my freebox server.</p>\n\n<p>I've tryed all solutions proposed here, but without result.\nAt the end I just:\nClose the project. Shutdown Intellij. copy / paste the entire project from my freebox server to my system folder. Re start Intellij, open the project previously paste into my system folder. Rebuild the projet from the /Build/Re build menu. And finaly Run my project. And !!! DONE...It works!!</p>\n\n<p>My suggest is: Is there a problem with pathname lenght or characters contented in that pathname to the project.\nIndeed /run/user/1000/gvfs/smb-share:server=freebox,share=disque%20dur/blaBlaToMyFileProjectFolder\nThe full pathname contents 127 caracters among :,-_/%=</p>\n\n<p>It that the tric?</p>\n\n<p>Hope it's help.\nSorry for my broken english. I'm french ;-)\nOliver</p>\n"},{"tags":[],"owner":{"account_id":3203236,"reputation":5435,"user_id":2704885,"accept_rate":56,"display_name":"Boldijar Paul"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1487624907,"creation_date":1487624907,"answer_id":42354229,"question_id":17300318,"body_markdown":"In my case the path to the project had some characters such as : \\ /\r\n\r\nex: C:\\something\\other:thing\\aaa\\project , and that&#39;s why it didn&#39;t worked. Moving the project to a path that doesn&#39;t have those characters fixed the errors.","title":"Error &quot;ClassNotFoundException&quot; in IntelliJ IDEA","body":"<p>In my case the path to the project had some characters such as : \\ /</p>\n\n<p>ex: C:\\something\\other:thing\\aaa\\project , and that's why it didn't worked. Moving the project to a path that doesn't have those characters fixed the errors.</p>\n"},{"tags":[],"owner":{"account_id":14939593,"reputation":69,"user_id":10786696,"display_name":"Prateek shrivastava"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1544713863,"creation_date":1544713863,"answer_id":53764805,"question_id":17300318,"body_markdown":"I also had same problem but I couldn&#39;t find solution on web so tried rectifying myself, after reading so many blogs i understood the concept, In my case everything was fine as I have download code from git but my IDE intellij couldn&#39;t recognise maven dependencies and that&#39;s why intellij was throwing this error, my pom.xml was having all dependencies but still intellij couldn&#39;t able to recognise it. I navigated to maven window at right in intellij and added path of the project in which I was working after adding it maven loaded all the dependencies and my code worked fine.So basically only three steps can make you resolve it:\r\n1. Open maven window in intellij.\r\n2. Click &quot;+&quot; and add path where your prjojects pom.xml file is present.\r\n3. Click Enter.\r\nNow you can run your project.\r\nHappy coding!!","title":"Error &quot;ClassNotFoundException&quot; in IntelliJ IDEA","body":"<p>I also had same problem but I couldn't find solution on web so tried rectifying myself, after reading so many blogs i understood the concept, In my case everything was fine as I have download code from git but my IDE intellij couldn't recognise maven dependencies and that's why intellij was throwing this error, my pom.xml was having all dependencies but still intellij couldn't able to recognise it. I navigated to maven window at right in intellij and added path of the project in which I was working after adding it maven loaded all the dependencies and my code worked fine.So basically only three steps can make you resolve it:\n1. Open maven window in intellij.\n2. Click \"+\" and add path where your prjojects pom.xml file is present.\n3. Click Enter.\nNow you can run your project.\nHappy coding!!</p>\n"},{"comments":[{"owner":{"account_id":4215498,"reputation":1219,"user_id":3451846,"display_name":"Valerio Bozz"},"score":0,"creation_date":1589207108,"post_id":55259776,"comment_id":109193660,"body_markdown":"Or, instead, change the dependency to &quot;compile&quot; instead of &quot;provided&quot;.","body":"Or, instead, change the dependency to &quot;compile&quot; instead of &quot;provided&quot;."}],"tags":[],"owner":{"account_id":15568682,"reputation":69,"user_id":11231733,"display_name":"Rimjhim Doshi"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1553081573,"creation_date":1553081573,"answer_id":55259776,"question_id":17300318,"body_markdown":"Check the scope of the dependency from which the class which is shown in error stack is derived. In my case, the scope was given as provided, when I removed the scope, it worked.","title":"Error &quot;ClassNotFoundException&quot; in IntelliJ IDEA","body":"<p>Check the scope of the dependency from which the class which is shown in error stack is derived. In my case, the scope was given as provided, when I removed the scope, it worked.</p>\n"},{"tags":[],"owner":{"account_id":3469352,"reputation":856,"user_id":2904163,"accept_rate":83,"display_name":"&#199;ağdaş Tunca"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1579011971,"creation_date":1579011971,"answer_id":59735739,"question_id":17300318,"body_markdown":"I&#39;ve got this error when i updated Intellij Idea to 2019.3 and couldn&#39;t solve it with any of these solutions. But it solved when i uncheck all profiles in maven window and check proper profile again.","title":"Error &quot;ClassNotFoundException&quot; in IntelliJ IDEA","body":"<p>I've got this error when i updated Intellij Idea to 2019.3 and couldn't solve it with any of these solutions. But it solved when i uncheck all profiles in maven window and check proper profile again.</p>\n"},{"tags":[],"owner":{"account_id":13343717,"reputation":995,"user_id":9631158,"display_name":"sujithramanathan"},"comment_count":0,"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1586621604,"creation_date":1586621604,"answer_id":61159889,"question_id":17300318,"body_markdown":"Above answers are fine. I would like to add an one more option if someone has any dependency with scope as provided then following configuration is needed.\r\n\r\n```\r\nRun -&gt; Edit Configurations -&gt; Include dependencies with &quot;Provided&quot; scope.\r\n```\r\nMark the tick box, apply and run.","title":"Error &quot;ClassNotFoundException&quot; in IntelliJ IDEA","body":"<p>Above answers are fine. I would like to add an one more option if someone has any dependency with scope as provided then following configuration is needed.</p>\n\n<pre><code>Run -&gt; Edit Configurations -&gt; Include dependencies with \"Provided\" scope.\n</code></pre>\n\n<p>Mark the tick box, apply and run.</p>\n"},{"tags":[],"owner":{"account_id":22859029,"reputation":9,"user_id":17003440,"display_name":"Tal"},"comment_count":0,"down_vote_count":7,"up_vote_count":1,"is_accepted":false,"score":-6,"last_activity_date":1632593489,"creation_date":1632593489,"answer_id":69328846,"question_id":17300318,"body_markdown":"Rebuild the project. It&#39;s that easy. Don&#39;t thank","title":"Error &quot;ClassNotFoundException&quot; in IntelliJ IDEA","body":"<p>Rebuild the project. It's that easy. Don't thank</p>\n"},{"tags":[],"owner":{"account_id":15433098,"reputation":139,"user_id":11133935,"display_name":"Ankitha J"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672037814,"creation_date":1672037814,"answer_id":74917910,"question_id":17300318,"body_markdown":"If the error is with external library jars, we need to include them in provided scope. \r\n\r\nIn Intellij run configuration, modify options - &gt; select `Add dependencies with &quot;provided&quot; scope to classpath`. ","title":"Error &quot;ClassNotFoundException&quot; in IntelliJ IDEA","body":"<p>If the error is with external library jars, we need to include them in provided scope.</p>\n<p>In Intellij run configuration, modify options - &gt; select <code>Add dependencies with &quot;provided&quot; scope to classpath</code>.</p>\n"},{"tags":[],"owner":{"account_id":27850230,"reputation":87,"user_id":21264879,"display_name":"Chaandha Raghav C"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1690182061,"creation_date":1690182061,"answer_id":76752078,"question_id":17300318,"body_markdown":"If this happened to you when working with class files or jar files, the reason may be that you have not initialized a static variable but still you are using it in your code. \r\n\r\nMake sure that you&#39;ve initialized all static variables","title":"Error &quot;ClassNotFoundException&quot; in IntelliJ IDEA","body":"<p>If this happened to you when working with class files or jar files, the reason may be that you have not initialized a static variable but still you are using it in your code.</p>\n<p>Make sure that you've initialized all static variables</p>\n"},{"tags":[],"owner":{"account_id":3345927,"reputation":382,"user_id":2811078,"display_name":"Chandan Gawri"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1694200957,"creation_date":1694200957,"answer_id":77069397,"question_id":17300318,"body_markdown":"If you are using some dependencies with provided scope do configure intellij for following highlighted.\r\n\r\nOpen Run/Debug Configurations-&gt;Modify options--&gt; select Add dependencies with &quot;provided&quot; scope to classpath\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xpiet.png","title":"Error &quot;ClassNotFoundException&quot; in IntelliJ IDEA","body":"<p>If you are using some dependencies with provided scope do configure intellij for following highlighted.</p>\n<p>Open Run/Debug Configurations-&gt;Modify options--&gt; select Add dependencies with &quot;provided&quot; scope to classpath</p>\n<p><a href=\"https://i.stack.imgur.com/xpiet.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xpiet.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":1656678,"reputation":1542,"user_id":1526048,"accept_rate":65,"display_name":"Aido"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":147459,"favorite_count":0,"down_vote_count":1,"up_vote_count":55,"accepted_answer_id":17304563,"answer_count":16,"score":54,"last_activity_date":1694200957,"creation_date":1372171163,"question_id":17300318,"body_markdown":"I made this simple program:\r\n\r\n    package main.java;\r\n    \r\n    public class start {\r\n        public static void main(String[] args) {\r\n            System.out.println(&quot;Hello World!&quot;);\r\n        }\r\n    }\r\n\r\nAnd got this error. I have NO idea what is happening,\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    &quot;C:\\Program Files\\Java\\jdk1.7.0_21\\bin\\java&quot; -Didea.launcher.port=7532 &quot;-Didea.launcher.bin.path=C:\\Program Files (x86)\\JetBrains\\IntelliJ IDEA Community Edition 12.1.4\\bin&quot; -Dfile.encoding=UTF-8 -classpath &quot;C:\\Program Files\\Java\\jdk1.7.0_21\\jre\\lib\\charsets.jar;C:\\Program Files\\Java\\jdk1.7.0_21\\jre\\lib\\deploy.jar;C:\\Program Files\\Java\\jdk1.7.0_21\\jre\\lib\\javaws.jar;C:\\Program Files\\Java\\jdk1.7.0_21\\jre\\lib\\jce.jar;C:\\Program Files\\Java\\jdk1.7.0_21\\jre\\lib\\jfr.jar;C:\\Program Files\\Java\\jdk1.7.0_21\\jre\\lib\\jfxrt.jar;C:\\Program Files\\Java\\jdk1.7.0_21\\jre\\lib\\jsse.jar;C:\\Program Files\\Java\\jdk1.7.0_21\\jre\\lib\\management-agent.jar;C:\\Program Files\\Java\\jdk1.7.0_21\\jre\\lib\\plugin.jar;C:\\Program Files\\Java\\jdk1.7.0_21\\jre\\lib\\resources.jar;C:\\Program Files\\Java\\jdk1.7.0_21\\jre\\lib\\rt.jar;C:\\Program Files\\Java\\jdk1.7.0_21\\jre\\lib\\ext\\access-bridge-64.jar;C:\\Program Files\\Java\\jdk1.7.0_21\\jre\\lib\\ext\\dnsns.jar;C:\\Program Files\\Java\\jdk1.7.0_21\\jre\\lib\\ext\\jaccess.jar;C:\\Program Files\\Java\\jdk1.7.0_21\\jre\\lib\\ext\\localedata.jar;C:\\Program Files\\Java\\jdk1.7.0_21\\jre\\lib\\ext\\sunec.jar;C:\\Program Files\\Java\\jdk1.7.0_21\\jre\\lib\\ext\\sunjce_provider.jar;C:\\Program Files\\Java\\jdk1.7.0_21\\jre\\lib\\ext\\sunmscapi.jar;C:\\Program Files\\Java\\jdk1.7.0_21\\jre\\lib\\ext\\zipfs.jar;C:\\Users\\Tim\\IdeaProjects\\Rust\\out\\production\\Rust;C:\\Program Files (x86)\\JetBrains\\IntelliJ IDEA Community Edition 12.1.4\\lib\\idea_rt.jar&quot; com.intellij.rt.execution.application.AppMain java.start\r\n    Exception in thread &quot;main&quot; java.lang.ClassNotFoundException: java.start\r\n    \tat java.net.URLClassLoader$1.run(URLClassLoader.java:366)\r\n    \tat java.net.URLClassLoader$1.run(URLClassLoader.java:355)\r\n    \tat java.security.AccessController.doPrivileged(Native Method)\r\n    \tat java.net.URLClassLoader.findClass(URLClassLoader.java:354)\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:423)\r\n    \tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:356)\r\n    \tat java.lang.Class.forName0(Native Method)\r\n    \tat java.lang.Class.forName(Class.java:188)\r\n    \tat com.intellij.rt.execution.application.AppMain.main(AppMain.java:113)\r\n    \r\n    Process finished with exit code 1\r\n\r\nAnyone know what is wrong?","title":"Error &quot;ClassNotFoundException&quot; in IntelliJ IDEA","body":"<p>I made this simple program:</p>\n\n<pre><code>package main.java;\n\npublic class start {\n    public static void main(String[] args) {\n        System.out.println(\"Hello World!\");\n    }\n}\n</code></pre>\n\n<p>And got this error. I have NO idea what is happening,</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>\"C:\\Program Files\\Java\\jdk1.7.0_21\\bin\\java\" -Didea.launcher.port=7532 \"-Didea.launcher.bin.path=C:\\Program Files (x86)\\JetBrains\\IntelliJ IDEA Community Edition 12.1.4\\bin\" -Dfile.encoding=UTF-8 -classpath \"C:\\Program Files\\Java\\jdk1.7.0_21\\jre\\lib\\charsets.jar;C:\\Program Files\\Java\\jdk1.7.0_21\\jre\\lib\\deploy.jar;C:\\Program Files\\Java\\jdk1.7.0_21\\jre\\lib\\javaws.jar;C:\\Program Files\\Java\\jdk1.7.0_21\\jre\\lib\\jce.jar;C:\\Program Files\\Java\\jdk1.7.0_21\\jre\\lib\\jfr.jar;C:\\Program Files\\Java\\jdk1.7.0_21\\jre\\lib\\jfxrt.jar;C:\\Program Files\\Java\\jdk1.7.0_21\\jre\\lib\\jsse.jar;C:\\Program Files\\Java\\jdk1.7.0_21\\jre\\lib\\management-agent.jar;C:\\Program Files\\Java\\jdk1.7.0_21\\jre\\lib\\plugin.jar;C:\\Program Files\\Java\\jdk1.7.0_21\\jre\\lib\\resources.jar;C:\\Program Files\\Java\\jdk1.7.0_21\\jre\\lib\\rt.jar;C:\\Program Files\\Java\\jdk1.7.0_21\\jre\\lib\\ext\\access-bridge-64.jar;C:\\Program Files\\Java\\jdk1.7.0_21\\jre\\lib\\ext\\dnsns.jar;C:\\Program Files\\Java\\jdk1.7.0_21\\jre\\lib\\ext\\jaccess.jar;C:\\Program Files\\Java\\jdk1.7.0_21\\jre\\lib\\ext\\localedata.jar;C:\\Program Files\\Java\\jdk1.7.0_21\\jre\\lib\\ext\\sunec.jar;C:\\Program Files\\Java\\jdk1.7.0_21\\jre\\lib\\ext\\sunjce_provider.jar;C:\\Program Files\\Java\\jdk1.7.0_21\\jre\\lib\\ext\\sunmscapi.jar;C:\\Program Files\\Java\\jdk1.7.0_21\\jre\\lib\\ext\\zipfs.jar;C:\\Users\\Tim\\IdeaProjects\\Rust\\out\\production\\Rust;C:\\Program Files (x86)\\JetBrains\\IntelliJ IDEA Community Edition 12.1.4\\lib\\idea_rt.jar\" com.intellij.rt.execution.application.AppMain java.start\nException in thread \"main\" java.lang.ClassNotFoundException: java.start\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)\n    at java.lang.Class.forName0(Native Method)\n    at java.lang.Class.forName(Class.java:188)\n    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:113)\n\nProcess finished with exit code 1\n</code></pre>\n\n<p>Anyone know what is wrong?</p>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":9760,"reputation":85860,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":3,"creation_date":1694192051,"post_id":77068398,"comment_id":135863706,"body_markdown":"From the Javadoc: **Updates the message property. Calls to updateMessage are coalesced and run later on the FX application thread, so calls to updateMessage, even from the FX Application thread, may not necessarily result in immediate updates to this property, and intermediate message values may be coalesced to save on event notifications.**  And BTW, it&#39;s `javafx.concurrent.Task#updateMessage()` not `ScheduledService`.","body":"From the Javadoc: <b>Updates the message property. Calls to updateMessage are coalesced and run later on the FX application thread, so calls to updateMessage, even from the FX Application thread, may not necessarily result in immediate updates to this property, and intermediate message values may be coalesced to save on event notifications.</b>  And BTW, it&#39;s <code>javafx.concurrent.Task#updateMessage()</code> not <code>ScheduledService</code>."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":2,"creation_date":1694193311,"post_id":77068398,"comment_id":135863891,"body_markdown":"I don&#39;t understand what you are doing here.  Why do you restart the scheduled service every three seconds? `threeSecondsWonder.setOnFinished((t) -&gt; { checkForScheduledService.restart(); });`.  The service is already scheduled to execute its task every five seconds `checkForScheduledService.setPeriod(Duration.seconds(5));`.  Also why cancel the service `checkForScheduledService.cancel();`? Why not just start the service and leave it alone?  There seem to be numerous errors and misconceptions here.","body":"I don&#39;t understand what you are doing here.  Why do you restart the scheduled service every three seconds? <code>threeSecondsWonder.setOnFinished((t) -&gt; { checkForScheduledService.restart(); });</code>.  The service is already scheduled to execute its task every five seconds <code>checkForScheduledService.setPeriod(Duration.seconds(5));</code>.  Also why cancel the service <code>checkForScheduledService.cancel();</code>? Why not just start the service and leave it alone?  There seem to be numerous errors and misconceptions here."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":1,"creation_date":1694194979,"post_id":77068398,"comment_id":135864139,"body_markdown":"One other problem here (perhaps the fundamental problem?) is thread liveness. You are updating `fakeDatabaseHandler.fakeDbData` from the FX Application Thread (via the button&#39;s event handler) but you are accessing it from the background thread (in the task created by the service). Since there is no synchronization on `fakeDbData` there is no guarantee one thread will ever see changes made in the other thread.","body":"One other problem here (perhaps the fundamental problem?) is thread liveness. You are updating <code>fakeDatabaseHandler.fakeDbData</code> from the FX Application Thread (via the button&#39;s event handler) but you are accessing it from the background thread (in the task created by the service). Since there is no synchronization on <code>fakeDbData</code> there is no guarantee one thread will ever see changes made in the other thread."},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1694195912,"post_id":77068398,"comment_id":135864290,"body_markdown":"@JimGarrison, Thanks for clearing up `javafx.concurrent.Task#updateMessage()`.  In the past, when I used `Task#updateMessage()`, `Labels` would update as expected. Even if updates are not immediate, I expect to see the updates in a reasonable amount of time. I haven&#39;t seen any updates.","body":"@JimGarrison, Thanks for clearing up <code>javafx.concurrent.Task#updateMessage()</code>.  In the past, when I used <code>Task#updateMessage()</code>, <code>Labels</code> would update as expected. Even if updates are not immediate, I expect to see the updates in a reasonable amount of time. I haven&#39;t seen any updates."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":1,"creation_date":1694196090,"post_id":77068398,"comment_id":135864324,"body_markdown":"Some quick testing shows that the message gets reset to `null` once the task has completed. So the `updateMessage()` call results in a call being scheduled via `Platform.runLater()` to update the Task&#39;s message property to the current value (of an internally-held `AtomicReference&lt;String&gt;`). Then the task immediately exits, causing another `Platform.runLater(...)` call which updates the value to the results of the task and the message to null. (The latter *might* be coalesced with the earlier call, but I don&#39;t think that&#39;s the implementation.) The label&#39;s text is only ever `null`.","body":"Some quick testing shows that the message gets reset to <code>null</code> once the task has completed. So the <code>updateMessage()</code> call results in a call being scheduled via <code>Platform.runLater()</code> to update the Task&#39;s message property to the current value (of an internally-held <code>AtomicReference&lt;String&gt;</code>). Then the task immediately exits, causing another <code>Platform.runLater(...)</code> call which updates the value to the results of the task and the message to null. (The latter <i>might</i> be coalesced with the earlier call, but I don&#39;t think that&#39;s the implementation.) The label&#39;s text is only ever <code>null</code>."},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1694196225,"post_id":77068398,"comment_id":135864344,"body_markdown":"@jewelsea, I was thinking that once the service finds message(s), I should stop looking for new messages until after the current messages have been processed.  I thought the following code restarts the services after all of the messages are processed, but you pointed out that the service restarts after each notification is processed. This could be causing the issue. I will check once I get back to work.","body":"@jewelsea, I was thinking that once the service finds message(s), I should stop looking for new messages until after the current messages have been processed.  I thought the following code restarts the services after all of the messages are processed, but you pointed out that the service restarts after each notification is processed. This could be causing the issue. I will check once I get back to work."},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1694196390,"post_id":77068398,"comment_id":135864359,"body_markdown":"@James_D, Thanks; I will try to see what happens if I synchronize things.","body":"@James_D, Thanks; I will try to see what happens if I synchronize things."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1694202627,"post_id":77068398,"comment_id":135865349,"body_markdown":"This seems a bit like a producer/consumer problem.  Such problems can be solved using a [deque](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Deque.html).  For instance as in this [logging framework](https://stackoverflow.com/questions/24116858/most-efficient-way-to-log-messages-to-javafx-textarea-via-threads-with-simple-cu).","body":"This seems a bit like a producer/consumer problem.  Such problems can be solved using a <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Deque.html\" rel=\"nofollow noreferrer\">deque</a>.  For instance as in this <a href=\"https://stackoverflow.com/questions/24116858/most-efficient-way-to-log-messages-to-javafx-textarea-via-threads-with-simple-cu\">logging framework</a>."},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1694203057,"post_id":77068398,"comment_id":135865426,"body_markdown":"@jewelsea, Thanks. I figured it out and learned a lot from you all in the process!","body":"@jewelsea, Thanks. I figured it out and learned a lot from you all in the process!"},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1694203071,"post_id":77068398,"comment_id":135865429,"body_markdown":"@JimGarrison, Thanks! I learned a lot.","body":"@JimGarrison, Thanks! I learned a lot."}],"answers":[{"comments":[{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":1,"creation_date":1694202952,"post_id":77069080,"comment_id":135865413,"body_markdown":"Thanks for helping me understand what is going on. Though I do have tons of other issues with this code, the core issue for the `updateMessage` was that, as written, it appeared to be always null. I put `updateMessage` in a loop, and I could see the changes before it went back to null. This all stemmed from my not understanding how `ScheduledService` works. I thought it starts, runs, and only stops on error or when someone cancels it. It actually stops and restarts each X amount of time passed. I finally looked at the JavaDocs.","body":"Thanks for helping me understand what is going on. Though I do have tons of other issues with this code, the core issue for the <code>updateMessage</code> was that, as written, it appeared to be always null. I put <code>updateMessage</code> in a loop, and I could see the changes before it went back to null. This all stemmed from my not understanding how <code>ScheduledService</code> works. I thought it starts, runs, and only stops on error or when someone cancels it. It actually stops and restarts each X amount of time passed. I finally looked at the JavaDocs."}],"tags":[],"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694196865,"creation_date":1694196865,"answer_id":77069080,"question_id":77068398,"body_markdown":"Note there are two messages: one belonging to the tasks that are created, and one belonging to the service. When the service is in the process of running a task, its message is bound to the task&#39;s message, but once the task completes the service&#39;s message is reset to null.\r\n\r\nConsequently, your task sets its message (and consequently the service&#39;s message), based on the values generated by the button press, but then the task immediately exits, causing the service&#39;s message to be set to null. \r\n\r\nNote that these two changes may be coalesced, depending on the implementation of the service. But even if they are not, the change to null will immediately follow the change explicitly coded in the task, before the next frame is rendered. So in either case the label will only ever display null text.\r\n\r\nThere are various other issues with your code, as pointed out in the comments below the question (the model class is not threadsafe, but is accessed from multiple threads, and the `ScheduledService` is repeatedly restarted, making it redundant).","title":"Odd Behavior javafx.concurrent.Task","body":"<p>Note there are two messages: one belonging to the tasks that are created, and one belonging to the service. When the service is in the process of running a task, its message is bound to the task's message, but once the task completes the service's message is reset to null.</p>\n<p>Consequently, your task sets its message (and consequently the service's message), based on the values generated by the button press, but then the task immediately exits, causing the service's message to be set to null.</p>\n<p>Note that these two changes may be coalesced, depending on the implementation of the service. But even if they are not, the change to null will immediately follow the change explicitly coded in the task, before the next frame is rendered. So in either case the label will only ever display null text.</p>\n<p>There are various other issues with your code, as pointed out in the comments below the question (the model class is not threadsafe, but is accessed from multiple threads, and the <code>ScheduledService</code> is repeatedly restarted, making it redundant).</p>\n"}],"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77069080,"answer_count":1,"score":0,"last_activity_date":1694200816,"creation_date":1694189113,"question_id":77068398,"body_markdown":"I created an app to answer a question. For the most part, the app runs correctly, but I am getting some strange behavior out of `ScheduledService` `updateMessage`. My understanding of `udpateMessage` could be wrong, which could be leading me astray. My understanding is that `updateMessage` should update `messageProperty` every time `updateMessage` is called. In this case, that should be every three seconds. In this app, that is not happening. `updateValue` and `System.out.println` are both updating as expected. Is this faulty behavior, or is my thinking wrong about how `updateMessage` works? \r\n\r\n## Main ##\r\n```\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.concurrent.atomic.AtomicInteger;\r\nimport javafx.animation.KeyFrame;\r\nimport javafx.animation.Timeline;\r\nimport javafx.application.Application;\r\nimport javafx.concurrent.ScheduledService;\r\nimport javafx.concurrent.Task;\r\nimport javafx.stage.Stage;\r\nimport javafx.scene.Scene;\r\nimport javafx.scene.control.Button;\r\nimport javafx.scene.control.Label;\r\nimport javafx.scene.layout.StackPane;\r\nimport javafx.scene.layout.VBox;\r\nimport javafx.util.Duration;\r\nimport org.controlsfx.control.Notifications;\r\n\r\npublic class App extends Application {\r\n    \r\n    static List&lt;MyNotification&gt; myNotifications = new ArrayList();\r\n    static FakeDatabaseHandler fakeDatabaseHandler = new FakeDatabaseHandler();\r\n    \r\n    @Override\r\n    public void start(Stage stage) {\r\n        \r\n        Button btnGenerateNotification = new Button(&quot;Generate!&quot;);\r\n        btnGenerateNotification.setOnAction(actionEvent -&gt;{            \r\n             fakeDatabaseHandler.addFakeNotificationsToDb();\r\n        });\r\n\r\n        Label lblUpdateMessage = new Label(&quot;Update Message: &quot;);\r\n        \r\n        ScheduledService&lt;List&lt;MyNotification&gt;&gt; checkForScheduledService = new CheckForNotificationsScheduledService();\r\n        checkForScheduledService.setPeriod(Duration.seconds(5));\r\n        checkForScheduledService.messageProperty().addListener((ov, oldValue, newValue) -&gt; {\r\n            if(newValue != null)\r\n            {\r\n                lblUpdateMessage.setText(&quot;Update Message: &quot; + newValue);\r\n            }\r\n        });\r\n        \r\n        checkForScheduledService.valueProperty().addListener((ov, oldValue, newValue) -&gt; {\r\n            if(newValue != null &amp;&amp; !newValue.isEmpty())\r\n            {\r\n                myNotifications.clear();\r\n                myNotifications.addAll(newValue);\r\n                checkForScheduledService.cancel();\r\n                \r\n                AtomicInteger index = new AtomicInteger(0);\r\n                checkForScheduledService.cancel();\r\n                Timeline threeSecondsWonder = new Timeline(\r\n                    new KeyFrame(Duration.seconds(3),  event -&gt; {    \r\n                        MyNotification myNotification = myNotifications.get(index.getAndIncrement());\r\n                        Notifications.create().title(myNotification.department()+ &quot; - &quot; + myNotification.title()).text(myNotification.message()).hideAfter(Duration.seconds(3)).showWarning();\r\n                    })\r\n                );\r\n                threeSecondsWonder.setCycleCount(myNotifications.size());\r\n                threeSecondsWonder.play();\r\n                threeSecondsWonder.setOnFinished((t) -&gt; {\r\n                    checkForScheduledService.restart();\r\n                });\r\n            }\r\n        });\r\n        checkForScheduledService.start();\r\n        \r\n        StackPane root = new StackPane(new VBox(btnGenerateNotification, lblUpdateMessage));\r\n\r\n        stage.setScene(new Scene(root, 500, 500));\r\n        stage.setTitle(&quot;Facilities&quot;);\r\n        stage.show();        \r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        launch(args);\r\n    }\r\n    \r\n    private static class CheckForNotificationsScheduledService extends ScheduledService&lt;List&lt;MyNotification&gt;&gt; {\r\n\r\n    @Override\r\n    protected Task&lt;List&lt;MyNotification&gt;&gt; createTask() {\r\n        return new Task&lt;List&lt;MyNotification&gt;&gt;() {\r\n            @Override\r\n            protected List&lt;MyNotification&gt; call() throws Exception {\r\n                List&lt;MyNotification&gt; fakeNotificationList = fakeDatabaseHandler.getFakeNotificationsFromDB();\r\n                \r\n                System.out.println(&quot;Checking for notifications. Notifications Found: &quot; + fakeNotificationList.size());\r\n                updateMessage(&quot;Checking for notifications. Notifications Found: &quot; + fakeNotificationList.size());             \r\n                updateValue(fakeNotificationList);                \r\n                \r\n                return fakeNotificationList; \r\n            }\r\n        };\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n## FakeDatabaseHandler ##\r\n```\r\nimport java.util.ArrayList;\r\nimport java.util.Arrays;\r\nimport java.util.List;\r\nimport java.util.concurrent.ThreadLocalRandom;\r\n\r\n/**\r\n *\r\n * @author Sed\r\n */\r\npublic class FakeDatabaseHandler {\r\n    private final List&lt;MyNotification&gt; fakeDBData = new ArrayList();    \r\n    \r\n    public FakeDatabaseHandler() {}\r\n    \r\n    public void addFakeNotificationsToDb(){\r\n        List&lt;String&gt; departmentList = Arrays.asList(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;);\r\n              \r\n        for(int i = 0; i &lt; ThreadLocalRandom.current().nextInt(1, 6); i++)\r\n        {\r\n            int notificationID = ThreadLocalRandom.current().nextInt( 1000000);\r\n            fakeDBData.add(new MyNotification(&quot;Department: &quot; + departmentList.get(ThreadLocalRandom.current().nextInt(4)), &quot;Title &quot; + notificationID, &quot;Message: &quot; + notificationID));\r\n        }\r\n    }\r\n    \r\n    public List&lt;MyNotification&gt; getFakeNotificationsFromDB(){\r\n        List&lt;MyNotification&gt; returnList = new ArrayList(fakeDBData);\r\n        fakeDBData.clear();\r\n        \r\n        return returnList;\r\n    }\r\n}\r\n```\r\n\r\n## MyNotification ##\r\n```\r\npublic record MyNotification(String department, String title, String message) {}\r\n```\r\n\r\n## Module-Info ##\r\n```\r\nmodule com.mycompany.javafxsimpletest {  \r\n    requires org.controlsfx.controls;\r\n    exports com.mycompany.javafxsimpletest;\r\n}\r\n```\r\n\r\n## Output ##\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/GOOEv.gif\r\n\r\n\r\n## Tech Info ##\r\n```\r\nProduct Version: Apache NetBeans IDE 18\r\nJava: 19.0.2; OpenJDK 64-Bit Server VM 19.0.2+7-jvmci-22.3-b12\r\nRuntime: OpenJDK Runtime Environment 19.0.2+7-jvmci-22.3-b12\r\nSystem: Windows 11 version 10.0 running on amd64; UTF-8; en_US (nb)\r\n```\r\n","title":"Odd Behavior javafx.concurrent.Task","body":"<p>I created an app to answer a question. For the most part, the app runs correctly, but I am getting some strange behavior out of <code>ScheduledService</code> <code>updateMessage</code>. My understanding of <code>udpateMessage</code> could be wrong, which could be leading me astray. My understanding is that <code>updateMessage</code> should update <code>messageProperty</code> every time <code>updateMessage</code> is called. In this case, that should be every three seconds. In this app, that is not happening. <code>updateValue</code> and <code>System.out.println</code> are both updating as expected. Is this faulty behavior, or is my thinking wrong about how <code>updateMessage</code> works?</p>\n<h2>Main</h2>\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\nimport java.util.concurrent.atomic.AtomicInteger;\nimport javafx.animation.KeyFrame;\nimport javafx.animation.Timeline;\nimport javafx.application.Application;\nimport javafx.concurrent.ScheduledService;\nimport javafx.concurrent.Task;\nimport javafx.stage.Stage;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.control.Label;\nimport javafx.scene.layout.StackPane;\nimport javafx.scene.layout.VBox;\nimport javafx.util.Duration;\nimport org.controlsfx.control.Notifications;\n\npublic class App extends Application {\n    \n    static List&lt;MyNotification&gt; myNotifications = new ArrayList();\n    static FakeDatabaseHandler fakeDatabaseHandler = new FakeDatabaseHandler();\n    \n    @Override\n    public void start(Stage stage) {\n        \n        Button btnGenerateNotification = new Button(&quot;Generate!&quot;);\n        btnGenerateNotification.setOnAction(actionEvent -&gt;{            \n             fakeDatabaseHandler.addFakeNotificationsToDb();\n        });\n\n        Label lblUpdateMessage = new Label(&quot;Update Message: &quot;);\n        \n        ScheduledService&lt;List&lt;MyNotification&gt;&gt; checkForScheduledService = new CheckForNotificationsScheduledService();\n        checkForScheduledService.setPeriod(Duration.seconds(5));\n        checkForScheduledService.messageProperty().addListener((ov, oldValue, newValue) -&gt; {\n            if(newValue != null)\n            {\n                lblUpdateMessage.setText(&quot;Update Message: &quot; + newValue);\n            }\n        });\n        \n        checkForScheduledService.valueProperty().addListener((ov, oldValue, newValue) -&gt; {\n            if(newValue != null &amp;&amp; !newValue.isEmpty())\n            {\n                myNotifications.clear();\n                myNotifications.addAll(newValue);\n                checkForScheduledService.cancel();\n                \n                AtomicInteger index = new AtomicInteger(0);\n                checkForScheduledService.cancel();\n                Timeline threeSecondsWonder = new Timeline(\n                    new KeyFrame(Duration.seconds(3),  event -&gt; {    \n                        MyNotification myNotification = myNotifications.get(index.getAndIncrement());\n                        Notifications.create().title(myNotification.department()+ &quot; - &quot; + myNotification.title()).text(myNotification.message()).hideAfter(Duration.seconds(3)).showWarning();\n                    })\n                );\n                threeSecondsWonder.setCycleCount(myNotifications.size());\n                threeSecondsWonder.play();\n                threeSecondsWonder.setOnFinished((t) -&gt; {\n                    checkForScheduledService.restart();\n                });\n            }\n        });\n        checkForScheduledService.start();\n        \n        StackPane root = new StackPane(new VBox(btnGenerateNotification, lblUpdateMessage));\n\n        stage.setScene(new Scene(root, 500, 500));\n        stage.setTitle(&quot;Facilities&quot;);\n        stage.show();        \n    }\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n    \n    private static class CheckForNotificationsScheduledService extends ScheduledService&lt;List&lt;MyNotification&gt;&gt; {\n\n    @Override\n    protected Task&lt;List&lt;MyNotification&gt;&gt; createTask() {\n        return new Task&lt;List&lt;MyNotification&gt;&gt;() {\n            @Override\n            protected List&lt;MyNotification&gt; call() throws Exception {\n                List&lt;MyNotification&gt; fakeNotificationList = fakeDatabaseHandler.getFakeNotificationsFromDB();\n                \n                System.out.println(&quot;Checking for notifications. Notifications Found: &quot; + fakeNotificationList.size());\n                updateMessage(&quot;Checking for notifications. Notifications Found: &quot; + fakeNotificationList.size());             \n                updateValue(fakeNotificationList);                \n                \n                return fakeNotificationList; \n            }\n        };\n    }\n  }\n}\n</code></pre>\n<h2>FakeDatabaseHandler</h2>\n<pre><code>import java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.List;\nimport java.util.concurrent.ThreadLocalRandom;\n\n/**\n *\n * @author Sed\n */\npublic class FakeDatabaseHandler {\n    private final List&lt;MyNotification&gt; fakeDBData = new ArrayList();    \n    \n    public FakeDatabaseHandler() {}\n    \n    public void addFakeNotificationsToDb(){\n        List&lt;String&gt; departmentList = Arrays.asList(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;);\n              \n        for(int i = 0; i &lt; ThreadLocalRandom.current().nextInt(1, 6); i++)\n        {\n            int notificationID = ThreadLocalRandom.current().nextInt( 1000000);\n            fakeDBData.add(new MyNotification(&quot;Department: &quot; + departmentList.get(ThreadLocalRandom.current().nextInt(4)), &quot;Title &quot; + notificationID, &quot;Message: &quot; + notificationID));\n        }\n    }\n    \n    public List&lt;MyNotification&gt; getFakeNotificationsFromDB(){\n        List&lt;MyNotification&gt; returnList = new ArrayList(fakeDBData);\n        fakeDBData.clear();\n        \n        return returnList;\n    }\n}\n</code></pre>\n<h2>MyNotification</h2>\n<pre><code>public record MyNotification(String department, String title, String message) {}\n</code></pre>\n<h2>Module-Info</h2>\n<pre><code>module com.mycompany.javafxsimpletest {  \n    requires org.controlsfx.controls;\n    exports com.mycompany.javafxsimpletest;\n}\n</code></pre>\n<h2>Output</h2>\n<p><a href=\"https://i.stack.imgur.com/GOOEv.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GOOEv.gif\" alt=\"enter image description here\" /></a></p>\n<h2>Tech Info</h2>\n<pre><code>Product Version: Apache NetBeans IDE 18\nJava: 19.0.2; OpenJDK 64-Bit Server VM 19.0.2+7-jvmci-22.3-b12\nRuntime: OpenJDK Runtime Environment 19.0.2+7-jvmci-22.3-b12\nSystem: Windows 11 version 10.0 running on amd64; UTF-8; en_US (nb)\n</code></pre>\n"},{"tags":["java","spring","spring-retry"],"comments":[{"owner":{"account_id":187094,"reputation":5113,"user_id":424903,"display_name":"Gimby"},"score":0,"creation_date":1694181317,"post_id":77067378,"comment_id":135861663,"body_markdown":"You could always employ two queues; one which sends to DLQ immediately and one which retries. Case 2 in your pseudo code would requeue the message on the secondary queue.","body":"You could always employ two queues; one which sends to DLQ immediately and one which retries. Case 2 in your pseudo code would requeue the message on the secondary queue."},{"owner":{"account_id":1109371,"reputation":14160,"user_id":1100135,"accept_rate":53,"display_name":"piotrek"},"score":0,"creation_date":1694181689,"post_id":77067378,"comment_id":135861752,"body_markdown":"yes, it&#39;s just i prefer to reuse existing libraries whenever possible. but i&#39;m not sure if spring retry is designed for that case","body":"yes, it&#39;s just i prefer to reuse existing libraries whenever possible. but i&#39;m not sure if spring retry is designed for that case"},{"owner":{"account_id":75804,"reputation":94840,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"score":0,"creation_date":1694182073,"post_id":77067378,"comment_id":135861832,"body_markdown":"What if you have 2 recovery methods, each of which handles a different exception? Then throw the exception for the recovery you want?","body":"What if you have 2 recovery methods, each of which handles a different exception? Then throw the exception for the recovery you want?"},{"owner":{"account_id":1109371,"reputation":14160,"user_id":1100135,"accept_rate":53,"display_name":"piotrek"},"score":0,"creation_date":1694184547,"post_id":77067378,"comment_id":135862311,"body_markdown":"no, one error class can have different details. some of them result in &#39;all is fine, exit without error&#39; state, others result in &#39;keep retrying&#39; and others result in &#39;permanent error, exist with exception&#39;","body":"no, one error class can have different details. some of them result in &#39;all is fine, exit without error&#39; state, others result in &#39;keep retrying&#39; and others result in &#39;permanent error, exist with exception&#39;"}],"answers":[{"tags":[],"owner":{"account_id":75804,"reputation":94840,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694200108,"creation_date":1694195667,"answer_id":77068979,"question_id":77067378,"body_markdown":"The way spring-retry works is that you add the Retryable annotation to some service method, and that method gets retried up to a number of times that you specify in the annotation. If something within the method throws an exception, that exception is compared to the exception specified by the Retryable annotation, and if they are the same then the method gets re-tried. Exceptions that don&#39;t match what Retryable is looking for, and retryable exceptions thrown when the method has already been tried the set number of times both have the recover method called for them. The recover method is overloaded with the type of the exception. Recover methods can return a default value or rethrow the exception passed in, or throw a different exception.\r\n\r\nI would make a specific exception class for retryable exceptions and wrap only those exceptions that I wanted to be retried in that. That makes it easy to make sure nothing else gets retried. For other exceptions, you can let them be thrown and they will be handled by a recover method that you write for them. Then of course you can have the method directly return a result.\r\n\r\nYou can definitely catch an exception in your code and either directly return a result, or let it be thrown, and have the recover method return a result. \r\n\r\nHere is an example demonstrating both retryable and non-retryable exceptions:\r\n\r\n    @Service\r\n    @Slf4j\r\n    @RequiredArgsConstructor\r\n    public class MyRetryableService {\r\n    \r\n        private final RandomNumberService randomNumberService;\r\n      \r\n        @Retryable(value = {RetryableException.class}, maxAttempts = 2, backoff = @Backoff(delay=100)) \r\n        public int doStuff(String s) {\r\n    \r\n            log.info(&quot;doing stuff with {}, try = {}&quot;, s, RetrySynchronizationManager.getContext().getRetryCount() + 1);\r\n            int i = randomNumberService.randomNumber();\r\n    \r\n            // simulate having something bad happen that is recoverable\r\n            if (i % 2 == 0) {\r\n                String issue = &quot;oops&quot;;\r\n                log.warn(&quot;condition = {}&quot;, issue);\r\n                throw new RetryableException(issue);\r\n            }\r\n    \r\n            // simulate having something bad happen that is not recoverable\r\n            if (i % 5 == 0) {\r\n                String issue = &quot;ohnoes&quot;;\r\n                log.warn(&quot;condition = {}&quot;, issue);\r\n                throw new IllegalArgumentException(issue);\r\n            }\r\n    \r\n            return i;\r\n        }\r\n    \r\n        /*\r\n        Provides default value and writes to log once retries are exhausted\r\n        */\r\n        @Recover\r\n        public int recover(RetryableException e, String s) {\r\n    \r\n            log.info(&quot;in recover for RetryableException, s is {}&quot;, s);\r\n            return -1;\r\n        }\r\n    \r\n        /*\r\n        Need to provide this so that non-recoverable exception doesn&#39;t get wrapped in an ExhaustedRetriesException\r\n        with message that no recover method was found\r\n        */\r\n        @Recover\r\n        public int recover(RuntimeException e, String s) {\r\n    \r\n            log.info(&quot;in recover for RuntimeException, s is {}&quot;, s);\r\n            throw e;\r\n        }\r\n    }\r\n\r\nThis code is part of a small working example at https://github.com/nathan-hughes/spring-retry-examples. Also I found this [tutorial](https://www.baeldung.com/spring-retry) helpful.\r\n\r\n","title":"Spring retry, recovery method only for some cases","body":"<p>The way spring-retry works is that you add the Retryable annotation to some service method, and that method gets retried up to a number of times that you specify in the annotation. If something within the method throws an exception, that exception is compared to the exception specified by the Retryable annotation, and if they are the same then the method gets re-tried. Exceptions that don't match what Retryable is looking for, and retryable exceptions thrown when the method has already been tried the set number of times both have the recover method called for them. The recover method is overloaded with the type of the exception. Recover methods can return a default value or rethrow the exception passed in, or throw a different exception.</p>\n<p>I would make a specific exception class for retryable exceptions and wrap only those exceptions that I wanted to be retried in that. That makes it easy to make sure nothing else gets retried. For other exceptions, you can let them be thrown and they will be handled by a recover method that you write for them. Then of course you can have the method directly return a result.</p>\n<p>You can definitely catch an exception in your code and either directly return a result, or let it be thrown, and have the recover method return a result.</p>\n<p>Here is an example demonstrating both retryable and non-retryable exceptions:</p>\n<pre><code>@Service\n@Slf4j\n@RequiredArgsConstructor\npublic class MyRetryableService {\n\n    private final RandomNumberService randomNumberService;\n  \n    @Retryable(value = {RetryableException.class}, maxAttempts = 2, backoff = @Backoff(delay=100)) \n    public int doStuff(String s) {\n\n        log.info(&quot;doing stuff with {}, try = {}&quot;, s, RetrySynchronizationManager.getContext().getRetryCount() + 1);\n        int i = randomNumberService.randomNumber();\n\n        // simulate having something bad happen that is recoverable\n        if (i % 2 == 0) {\n            String issue = &quot;oops&quot;;\n            log.warn(&quot;condition = {}&quot;, issue);\n            throw new RetryableException(issue);\n        }\n\n        // simulate having something bad happen that is not recoverable\n        if (i % 5 == 0) {\n            String issue = &quot;ohnoes&quot;;\n            log.warn(&quot;condition = {}&quot;, issue);\n            throw new IllegalArgumentException(issue);\n        }\n\n        return i;\n    }\n\n    /*\n    Provides default value and writes to log once retries are exhausted\n    */\n    @Recover\n    public int recover(RetryableException e, String s) {\n\n        log.info(&quot;in recover for RetryableException, s is {}&quot;, s);\n        return -1;\n    }\n\n    /*\n    Need to provide this so that non-recoverable exception doesn't get wrapped in an ExhaustedRetriesException\n    with message that no recover method was found\n    */\n    @Recover\n    public int recover(RuntimeException e, String s) {\n\n        log.info(&quot;in recover for RuntimeException, s is {}&quot;, s);\n        throw e;\n    }\n}\n</code></pre>\n<p>This code is part of a small working example at <a href=\"https://github.com/nathan-hughes/spring-retry-examples\" rel=\"nofollow noreferrer\">https://github.com/nathan-hughes/spring-retry-examples</a>. Also I found this <a href=\"https://www.baeldung.com/spring-retry\" rel=\"nofollow noreferrer\">tutorial</a> helpful.</p>\n"}],"owner":{"account_id":1109371,"reputation":14160,"user_id":1100135,"accept_rate":53,"display_name":"piotrek"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":206,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1694200108,"creation_date":1694180150,"question_id":77067378,"body_markdown":"i need to implement a recovery method that kicks in only in some specific cases. is it possible with Spring Retry? it seems i can&#39;t do it using just:\r\n\r\n - Policy as it can&#39;t change an error into a correct result. \r\n - RetryListener as it can&#39;t return value from onError\r\n\r\n .\r\n\r\n    int do_something_that_may_throw_exception() {...}\r\n    \r\n    int analyze_thrown_exception(exc) {\r\n\r\n      switch (analyze(exc)) {\r\n         case 1: \r\n           // everything is fine, don&#39;t retry, the returned result should be 7\r\n         case 2:\r\n           // transient error, request another retry\r\n         default:\r\n          // permanent exception, raise an error, don&#39;t retry\r\n      }\r\n    }\r\n\r\n\r\n\r\n","title":"Spring retry, recovery method only for some cases","body":"<p>i need to implement a recovery method that kicks in only in some specific cases. is it possible with Spring Retry? it seems i can't do it using just:</p>\n<ul>\n<li>Policy as it can't change an error into a correct result.</li>\n<li>RetryListener as it can't return value from onError</li>\n</ul>\n<p>.</p>\n<pre><code>int do_something_that_may_throw_exception() {...}\n\nint analyze_thrown_exception(exc) {\n\n  switch (analyze(exc)) {\n     case 1: \n       // everything is fine, don't retry, the returned result should be 7\n     case 2:\n       // transient error, request another retry\n     default:\n      // permanent exception, raise an error, don't retry\n  }\n}\n</code></pre>\n"},{"tags":["java","functional-programming","underscore-java"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":5,"creation_date":1694179921,"post_id":77067345,"comment_id":135861365,"body_markdown":"What do you think the return type of `Stream.reduce` is?","body":"What do you think the return type of <code>Stream.reduce</code> is?"},{"owner":{"account_id":14203739,"reputation":41,"user_id":10260948,"display_name":"Ashika Jinturkar"},"score":0,"creation_date":1694180003,"post_id":77067345,"comment_id":135861394,"body_markdown":"So how do we handle it?","body":"So how do we handle it?"},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":3,"creation_date":1694180066,"post_id":77067345,"comment_id":135861409,"body_markdown":"I&#39;m sure figuring that out is part of the assignment. Just take a look at the docs for that type, it&#39;s pretty simple.","body":"I&#39;m sure figuring that out is part of the assignment. Just take a look at the docs for that type, it&#39;s pretty simple."}],"answers":[{"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1694180793,"post_id":77067444,"comment_id":135861556,"body_markdown":"Users with your rep should know better than to just give away the solution to homework questions","body":"Users with your rep should know better than to just give away the solution to homework questions"},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1694180927,"post_id":77067444,"comment_id":135861575,"body_markdown":"@Jorn I did not see the word homework in the question.  Nor am I psychic.","body":"@Jorn I did not see the word homework in the question.  Nor am I psychic."},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1694181479,"post_id":77067444,"comment_id":135861701,"body_markdown":"@jorn  [This](https://stackoverflow.com/questions/76464455/how-to-convert-listobject-to-mapinteger-setsetstring-in-java-8-stream) looks like a homework question to me.  But I am not going to downvote you for answering it since that is just my opinion.   And you&#39;re not psychic either.","body":"@jorn  <a href=\"https://stackoverflow.com/questions/76464455/how-to-convert-listobject-to-mapinteger-setsetstring-in-java-8-stream\">This</a> looks like a homework question to me.  But I am not going to downvote you for answering it since that is just my opinion.   And you&#39;re not psychic either."},{"owner":{"account_id":14203739,"reputation":41,"user_id":10260948,"display_name":"Ashika Jinturkar"},"score":2,"creation_date":1694184576,"post_id":77067444,"comment_id":135862318,"body_markdown":"Hey this is not a homework question. I am visiting Java 8 new feature for the first time. That&#39;s why asked for the help","body":"Hey this is not a homework question. I am visiting Java 8 new feature for the first time. That&#39;s why asked for the help"},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1694185412,"post_id":77067444,"comment_id":135862489,"body_markdown":"@AshikaJinturkar Thank you for pointing that out and making my case.","body":"@AshikaJinturkar Thank you for pointing that out and making my case."},{"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"score":0,"creation_date":1694198920,"post_id":77067444,"comment_id":135864757,"body_markdown":"You could also use the &quot;identity&quot; function for unboxing an integer: `.mapToInt(Integer::intValue)`, rather than an arrow function.","body":"You could also use the &quot;identity&quot; function for unboxing an integer: <code>.mapToInt(Integer::intValue)</code>, rather than an arrow function."},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1694199154,"post_id":77067444,"comment_id":135864803,"body_markdown":"@Mr.Polywhirl  True.  And it is more descriptive.  But I just do `a-&gt;a` out of habit.","body":"@Mr.Polywhirl  True.  And it is more descriptive.  But I just do <code>a-&gt;a</code> out of habit."}],"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":7,"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1694180962,"creation_date":1694180619,"answer_id":77067444,"question_id":77067345,"body_markdown":"Reduce, in this case, returns an [OptionalInt](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/OptionalInt.html) and to retrieve it you need to use `OptionalInt.getAsInt()`.  You could also do it like this.\r\n```\r\nList&lt;Integer&gt; list = List.of(12,45,34,22,56,65);\r\nint sum = list.stream().mapToInt(a-&gt;a).sum();\r\nSystem.out.println(sum);\r\n```\r\nprints\r\n```\r\n234","title":"Optional[value] is getting printed","body":"<p>Reduce, in this case, returns an <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/OptionalInt.html\" rel=\"nofollow noreferrer\">OptionalInt</a> and to retrieve it you need to use <code>OptionalInt.getAsInt()</code>.  You could also do it like this.</p>\n<pre><code>List&lt;Integer&gt; list = List.of(12,45,34,22,56,65);\nint sum = list.stream().mapToInt(a-&gt;a).sum();\nSystem.out.println(sum);\n</code></pre>\n<p>prints</p>\n<pre><code>234\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1694196001,"post_id":77067902,"comment_id":135864311,"body_markdown":"I&#39;ve added an answer that removes the optional completely. There&#39;s no need to call `ifPresent`, which will do nothing if you pass an empty list.","body":"I&#39;ve added an answer that removes the optional completely. There&#39;s no need to call <code>ifPresent</code>, which will do nothing if you pass an empty list."}],"tags":[],"owner":{"account_id":14203739,"reputation":41,"user_id":10260948,"display_name":"Ashika Jinturkar"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694199129,"creation_date":1694184658,"answer_id":77067902,"question_id":77067345,"body_markdown":"I did this over my research, firstly thought its bit ununderstood but it was an easy concept\r\n\r\n```java\r\nOptional&lt;Integer&gt; op = list.stream().reduce(PStructured01::printSum);\r\n\r\nop.ifPresent(System.out::println);\r\n```","title":"Optional[value] is getting printed","body":"<p>I did this over my research, firstly thought its bit ununderstood but it was an easy concept</p>\n<pre class=\"lang-java prettyprint-override\"><code>Optional&lt;Integer&gt; op = list.stream().reduce(PStructured01::printSum);\n\nop.ifPresent(System.out::println);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694199140,"creation_date":1694195931,"answer_id":77069001,"question_id":77067345,"body_markdown":"Instead of using this overload of `reduce` that returns an `Optional&lt;Integer&gt;`&lt;sup&gt;1&lt;/sup&gt;, use the overload that takes an identity element. If the list is empty, this identity element will be returned:\r\n\r\n```java\r\nSystem.out.println(list.stream().reduce(0, PStructured01::printSum));\r\n```\r\n\r\n&lt;sup&gt;1&lt;/sup&gt; Since the source is `List&lt;Integer&gt;` and the stream is nowhere mapped to an `IntStream`, the result cannot be an `OptionalInt`.","title":"Optional[value] is getting printed","body":"<p>Instead of using this overload of <code>reduce</code> that returns an <code>Optional&lt;Integer&gt;</code><sup>1</sup>, use the overload that takes an identity element. If the list is empty, this identity element will be returned:</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println(list.stream().reduce(0, PStructured01::printSum));\n</code></pre>\n<p><sup>1</sup> Since the source is <code>List&lt;Integer&gt;</code> and the stream is nowhere mapped to an <code>IntStream</code>, the result cannot be an <code>OptionalInt</code>.</p>\n"}],"owner":{"account_id":14203739,"reputation":41,"user_id":10260948,"display_name":"Ashika Jinturkar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":77067444,"answer_count":3,"score":2,"last_activity_date":1694199140,"creation_date":1694179857,"question_id":77067345,"body_markdown":"\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t\r\n\t\tprintSumOfAllNumbersInList(List.of(12,45,34,22,56,65));\r\n\t\tprintSumOfAllNumbersInListUsingFP(List.of(12,45,34,22,56,65));\r\n\t}\r\n\t\r\n\tprivate static void printSumOfAllNumbersInListUsingFP(List&lt;Integer&gt; list) {\r\n\t\t\r\n\t\t/*\r\n\t\t * Learning the use of reduce()\r\n\t\t */\r\n\t\tSystem.out.println(list.stream().reduce(PStructured01::printSum));\r\n\t\t\r\n\t}\r\n\t\r\n\tprivate static int printSum(int a,int b)\r\n\t{\r\n\t\tint sum  =  a +b;\r\n\t\treturn sum;\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t}\r\n\tprivate static void printSumOfAllNumbersInList(List&lt;Integer&gt; list) {\r\n\t\tint sum = 0;\r\n\t\tfor (Integer integer: list) {\r\n\t\t\tsum = sum + integer;\r\n\t\t}\r\n\t\tSystem.out.println(sum);\r\n\t}}\r\n\r\n\r\n\r\nI am solving the Use Case - Print the sum of all list numbers and return the sum.  \r\nI tried using the traditional approach and later tried to solve it using the Functional Approach.  \r\nBut during the Functional Approach, I am getting the value - 234 as correct but as - Optional[234]  \r\nCan some one please explain the reason","title":"Optional[value] is getting printed","body":"<pre><code>public static void main(String[] args) {\n    \n    printSumOfAllNumbersInList(List.of(12,45,34,22,56,65));\n    printSumOfAllNumbersInListUsingFP(List.of(12,45,34,22,56,65));\n}\n\nprivate static void printSumOfAllNumbersInListUsingFP(List&lt;Integer&gt; list) {\n    \n    /*\n     * Learning the use of reduce()\n     */\n    System.out.println(list.stream().reduce(PStructured01::printSum));\n    \n}\n\nprivate static int printSum(int a,int b)\n{\n    int sum  =  a +b;\n    return sum;\n            \n            \n}\nprivate static void printSumOfAllNumbersInList(List&lt;Integer&gt; list) {\n    int sum = 0;\n    for (Integer integer: list) {\n        sum = sum + integer;\n    }\n    System.out.println(sum);\n}}\n</code></pre>\n<p>I am solving the Use Case - Print the sum of all list numbers and return the sum.<br />\nI tried using the traditional approach and later tried to solve it using the Functional Approach.<br />\nBut during the Functional Approach, I am getting the value - 234 as correct but as - Optional[234]<br />\nCan some one please explain the reason</p>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":1,"creation_date":1694176202,"post_id":77066833,"comment_id":135860569,"body_markdown":"Please, provide a [MCVE].","body":"Please, provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1694177544,"post_id":77066833,"comment_id":135860804,"body_markdown":"[How to resize JLabel ImageIcon?](https://stackoverflow.com/questions/6714045/how-to-resize-jlabel-imageicon)","body":"<a href=\"https://stackoverflow.com/questions/6714045/how-to-resize-jlabel-imageicon\">How to resize JLabel ImageIcon?</a>"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":1,"creation_date":1694177667,"post_id":77066833,"comment_id":135860829,"body_markdown":"[Resize a picture to fit a JLabel](https://stackoverflow.com/questions/16343098/resize-a-picture-to-fit-a-jlabel)","body":"<a href=\"https://stackoverflow.com/questions/16343098/resize-a-picture-to-fit-a-jlabel\">Resize a picture to fit a JLabel</a>"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1694177737,"post_id":77066833,"comment_id":135860848,"body_markdown":"[Scale the ImageIcon automatically to label size](https://stackoverflow.com/questions/14548808/scale-the-imageicon-automatically-to-label-size)","body":"<a href=\"https://stackoverflow.com/questions/14548808/scale-the-imageicon-automatically-to-label-size\">Scale the ImageIcon automatically to label size</a>"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1694178034,"post_id":77066833,"comment_id":135860913,"body_markdown":"[Java ImageIcon size](https://stackoverflow.com/questions/2244848/java-imageicon-size)","body":"<a href=\"https://stackoverflow.com/questions/2244848/java-imageicon-size\">Java ImageIcon size</a>"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1694178278,"post_id":77066833,"comment_id":135860970,"body_markdown":"[Resize ImageIcon](https://coderanch.com/t/331731/java/Resize-ImageIcon) (from _JavaRanch_ forums)","body":"<a href=\"https://coderanch.com/t/331731/java/Resize-ImageIcon\" rel=\"nofollow noreferrer\">Resize ImageIcon</a> (from <i>JavaRanch</i> forums)"}],"owner":{"account_id":28253565,"reputation":1,"user_id":21599382,"display_name":"beginner"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694197729,"creation_date":1694175586,"question_id":77066833,"body_markdown":"Actually I want to create a car dealer application using `Java Swing`. In which I want the user to select an image of the car which he wants to sell and that image should be visible automatically in the `JLabel` in the same `JFrame`. So the user will select an image from his own device, that image might be big or small. So how to make that image resize automatically according to my `JLabel`\r\n\r\nI tried few things but it didn&#39;t help, the image won&#39;t fit properly inside my `JLabel`.","title":"How to make image automatically resize in the JLabel after it is selected by the user","body":"<p>Actually I want to create a car dealer application using <code>Java Swing</code>. In which I want the user to select an image of the car which he wants to sell and that image should be visible automatically in the <code>JLabel</code> in the same <code>JFrame</code>. So the user will select an image from his own device, that image might be big or small. So how to make that image resize automatically according to my <code>JLabel</code></p>\n<p>I tried few things but it didn't help, the image won't fit properly inside my <code>JLabel</code>.</p>\n"},{"tags":["python","java","interop","alloy","jpype"],"comments":[{"owner":{"account_id":3159259,"reputation":109678,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1682937379,"post_id":76144420,"comment_id":134286423,"body_markdown":"Not sure about that particular JVM but with the Oracle JDK 11 libjli.dylib is in a different place - only later releases (Java 17 for example) have it in that location.","body":"Not sure about that particular JVM but with the Oracle JDK 11 libjli.dylib is in a different place - only later releases (Java 17 for example) have it in that location."}],"answers":[{"tags":[],"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694197710,"creation_date":1682916543,"answer_id":76144779,"question_id":76144420,"body_markdown":"It is possible that the issue is due to different architectures. Ensure that your Python and JDK installations use the same architecture. For example for the M1 Apple chip architecture.","title":"Problem using JPype on Mac OS X: I try to start the JVM but I get a DLL not found, but it is there","body":"<p>It is possible that the issue is due to different architectures. Ensure that your Python and JDK installations use the same architecture. For example for the M1 Apple chip architecture.</p>\n"}],"owner":{"account_id":4935567,"reputation":415,"user_id":4038547,"accept_rate":18,"display_name":"Rodrigo Stv"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":729,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1694197710,"creation_date":1682907438,"question_id":76144420,"body_markdown":"My Python code is:\r\n\r\n```python\r\nimport jpype\r\n\r\njvm_path = &quot;/Library/Java/JavaVirtualMachines/microsoft-11.jdk/Contents/Home/lib/jli/libjli.dylib&quot;\r\n\r\njpype.startJVM(\r\n    jvm_path,\r\n    classpath=[&#39;~/org.alloytools.alloy.dist.jar&#39;],\r\n)\r\n```\r\n\r\nI get the following error:\r\n\r\n```bash\r\nTraceback (most recent call last):\r\n  File &quot;/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/runpy.py&quot;, line 196, in _run_module_as_main\r\n    return _run_code(code, main_globals, None,\r\n  File &quot;/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/runpy.py&quot;, line 86, in _run_code\r\n    exec(code, run_globals)\r\n  File &quot;/Users/&lt;username&gt;/research-llm/alloy-bridge/src/__main__.py&quot;, line 5, in &lt;module&gt;\r\n    jpype.startJVM(\r\n  File &quot;/Users/&lt;username&gt;/research-llm/alloy-bridge/.env/lib/python3.10/site-packages/jpype/_core.py&quot;, line 224, in startJVM\r\n    _jpype.startup(jvmpath, tuple(args),\r\nFileNotFoundError: [Errno 2] JVM DLL not found: /Library/Java/JavaVirtualMachines/microsoft-11.jdk/Contents/Home/lib/jli/libjli.dylib\r\n```\r\n\r\nA few useful diagnostics:\r\n\r\n```bash\r\njava -version\r\nopenjdk version &quot;11.0.12&quot; 2021-07-20\r\nOpenJDK Runtime Environment Microsoft-25199 (build 11.0.12+7)\r\nOpenJDK 64-Bit Server VM Microsoft-25199 (build 11.0.12+7, mixed mode)\r\n\r\n\r\njavac -version\r\njavac 11.0.12\r\n\r\npython --version\r\nPython 3.10.4\r\n\r\npip show jpype1\r\nName: JPype1 Version: 1.4.1 Summary: A Python to Java bridge. Home-page: https://github.com/jpype-project/jpype Author: Steve Menard Author-email: devilwolf@users.sourceforge.net License: License :: OSI Approved :: Apache Software License Location: /Users/username/projects/alloy-bridge/.env/lib/python3.10/site-packages Requires: packaging Required-by:\r\n\r\nsw_vers\r\nProductName: macOS ProductVersion: 13.2.1 BuildVersion: 22D68\r\n```\r\n\r\nGiven the context, can someone point me in a right direction? I tried a lot myself but couldn&#39;t get it working yet.","title":"Problem using JPype on Mac OS X: I try to start the JVM but I get a DLL not found, but it is there","body":"<p>My Python code is:</p>\n<pre class=\"lang-py prettyprint-override\"><code>import jpype\n\njvm_path = &quot;/Library/Java/JavaVirtualMachines/microsoft-11.jdk/Contents/Home/lib/jli/libjli.dylib&quot;\n\njpype.startJVM(\n    jvm_path,\n    classpath=['~/org.alloytools.alloy.dist.jar'],\n)\n</code></pre>\n<p>I get the following error:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>Traceback (most recent call last):\n  File &quot;/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/runpy.py&quot;, line 196, in _run_module_as_main\n    return _run_code(code, main_globals, None,\n  File &quot;/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/runpy.py&quot;, line 86, in _run_code\n    exec(code, run_globals)\n  File &quot;/Users/&lt;username&gt;/research-llm/alloy-bridge/src/__main__.py&quot;, line 5, in &lt;module&gt;\n    jpype.startJVM(\n  File &quot;/Users/&lt;username&gt;/research-llm/alloy-bridge/.env/lib/python3.10/site-packages/jpype/_core.py&quot;, line 224, in startJVM\n    _jpype.startup(jvmpath, tuple(args),\nFileNotFoundError: [Errno 2] JVM DLL not found: /Library/Java/JavaVirtualMachines/microsoft-11.jdk/Contents/Home/lib/jli/libjli.dylib\n</code></pre>\n<p>A few useful diagnostics:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>java -version\nopenjdk version &quot;11.0.12&quot; 2021-07-20\nOpenJDK Runtime Environment Microsoft-25199 (build 11.0.12+7)\nOpenJDK 64-Bit Server VM Microsoft-25199 (build 11.0.12+7, mixed mode)\n\n\njavac -version\njavac 11.0.12\n\npython --version\nPython 3.10.4\n\npip show jpype1\nName: JPype1 Version: 1.4.1 Summary: A Python to Java bridge. Home-page: https://github.com/jpype-project/jpype Author: Steve Menard Author-email: devilwolf@users.sourceforge.net License: License :: OSI Approved :: Apache Software License Location: /Users/username/projects/alloy-bridge/.env/lib/python3.10/site-packages Requires: packaging Required-by:\n\nsw_vers\nProductName: macOS ProductVersion: 13.2.1 BuildVersion: 22D68\n</code></pre>\n<p>Given the context, can someone point me in a right direction? I tried a lot myself but couldn't get it working yet.</p>\n"},{"tags":["java","kotlin","android-studio"],"answers":[{"comments":[{"owner":{"account_id":29263434,"reputation":3,"user_id":22419820,"display_name":"&#214;zcan Bayram"},"score":0,"creation_date":1694192590,"post_id":77068693,"comment_id":135863778,"body_markdown":"how can i fix this?","body":"how can i fix this?"},{"owner":{"account_id":26840344,"reputation":134,"user_id":20426969,"display_name":"Sarmad Ali"},"score":0,"creation_date":1694192973,"post_id":77068693,"comment_id":135863833,"body_markdown":"What do you want to achieve? You said that you don&#39;t have a title bar in app, and when you press the button it doesn&#39;t show the ActionBar? So how you can expect it to appear when you don&#39;t have one? And please specify what activity you chose when creating the project? Empty Activity? Empty View Activity? or any other ?","body":"What do you want to achieve? You said that you don&#39;t have a title bar in app, and when you press the button it doesn&#39;t show the ActionBar? So how you can expect it to appear when you don&#39;t have one? And please specify what activity you chose when creating the project? Empty Activity? Empty View Activity? or any other ?"},{"owner":{"account_id":26840344,"reputation":134,"user_id":20426969,"display_name":"Sarmad Ali"},"score":0,"creation_date":1694193050,"post_id":77068693,"comment_id":135863844,"body_markdown":"@&#214;zcanBayram You can always create a custom action Bar... if you wan the one let me know i will post the code here.","body":"@&#214;zcanBayram You can always create a custom action Bar... if you wan the one let me know i will post the code here."},{"owner":{"account_id":29263434,"reputation":3,"user_id":22419820,"display_name":"&#214;zcan Bayram"},"score":0,"creation_date":1694193336,"post_id":77068693,"comment_id":135863895,"body_markdown":"See the image link above. It looks that way. But I want to see a bar above where the title of the project is written. In a classic default way. Since I&#39;m new to this, I need your help.","body":"See the image link above. It looks that way. But I want to see a bar above where the title of the project is written. In a classic default way. Since I&#39;m new to this, I need your help."},{"owner":{"account_id":29263434,"reputation":3,"user_id":22419820,"display_name":"&#214;zcan Bayram"},"score":0,"creation_date":1694193958,"post_id":77068693,"comment_id":135863996,"body_markdown":"&quot;You have set NoActionBar theme. Thats why it is not appearing.&quot; What should I write instead?","body":"&quot;You have set NoActionBar theme. Thats why it is not appearing.&quot; What should I write instead?"},{"owner":{"account_id":26840344,"reputation":134,"user_id":20426969,"display_name":"Sarmad Ali"},"score":0,"creation_date":1694194039,"post_id":77068693,"comment_id":135864008,"body_markdown":"use this as your parent theme : **parent=&quot;Theme.AppCompat.Light.DarkActionBar&quot;**. It will have actionbar with the app name but it will not have 3 dotted menu on the right side.","body":"use this as your parent theme : <b>parent=&quot;Theme.AppCompat.Light.DarkActionBar&quot;</b>. It will have actionbar with the app name but it will not have 3 dotted menu on the right side."},{"owner":{"account_id":26840344,"reputation":134,"user_id":20426969,"display_name":"Sarmad Ali"},"score":0,"creation_date":1694194344,"post_id":77068693,"comment_id":135864034,"body_markdown":"@&#214;zcanBayram updated the answer please see","body":"@&#214;zcanBayram updated the answer please see"},{"owner":{"account_id":29263434,"reputation":3,"user_id":22419820,"display_name":"&#214;zcan Bayram"},"score":0,"creation_date":1694194379,"post_id":77068693,"comment_id":135864038,"body_markdown":"Thank you very much :))) . So how can I adjust its color?","body":"Thank you very much :))) . So how can I adjust its color?"},{"owner":{"account_id":26840344,"reputation":134,"user_id":20426969,"display_name":"Sarmad Ali"},"score":0,"creation_date":1694195748,"post_id":77068693,"comment_id":135864260,"body_markdown":"@&#214;zcanBayram updated the answer. please see.","body":"@&#214;zcanBayram updated the answer. please see."}],"tags":[],"owner":{"account_id":26840344,"reputation":134,"user_id":20426969,"display_name":"Sarmad Ali"},"comment_count":9,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694195662,"creation_date":1694192306,"answer_id":77068693,"question_id":77068674,"body_markdown":"     &lt;style name=&quot;Base.Theme.TitleBarSettings&quot; parent=&quot;Theme.Material3.DayNight.NoActionBar&quot;&gt;\r\n\r\nYou have set NoActionBar theme. Thats why it is not appearing.\r\n\r\nuse this as your parent theme: \r\n\r\n    parent=&quot;Theme.AppCompat.Light.DarkActionBar&quot;\r\n\r\n It will have actionbar with the app name but it will not have 3 dotted menu on the right side. \r\n\r\nFor changing the color of the ActionBar add following code in your onCreate of the mainActivity.\r\n\r\n    // Define ActionBar object\r\n            ActionBar actionBar;\r\n            actionBar = getSupportActionBar();\r\n    \r\n            // Define ColorDrawable object and parse color\r\n            // using parseColor method\r\n            // with color hash code as its parameter\r\n            ColorDrawable colorDrawable\r\n                    = new ColorDrawable(Color.parseColor(&quot;#0F9D58&quot;));\r\n    \r\n            // Set BackgroundDrawable\r\n            actionBar.setBackgroundDrawable(colorDrawable);\r\n\r\n\r\nYou can change the **&quot;#0F9D58&quot;** to any color code you want. \r\n\r\n","title":"I don&#39;t have a title bar in Android studio. When I press the Show System UI button, my title bar does not appear","body":"<pre><code> &lt;style name=&quot;Base.Theme.TitleBarSettings&quot; parent=&quot;Theme.Material3.DayNight.NoActionBar&quot;&gt;\n</code></pre>\n<p>You have set NoActionBar theme. Thats why it is not appearing.</p>\n<p>use this as your parent theme:</p>\n<pre><code>parent=&quot;Theme.AppCompat.Light.DarkActionBar&quot;\n</code></pre>\n<p>It will have actionbar with the app name but it will not have 3 dotted menu on the right side.</p>\n<p>For changing the color of the ActionBar add following code in your onCreate of the mainActivity.</p>\n<pre><code>// Define ActionBar object\n        ActionBar actionBar;\n        actionBar = getSupportActionBar();\n\n        // Define ColorDrawable object and parse color\n        // using parseColor method\n        // with color hash code as its parameter\n        ColorDrawable colorDrawable\n                = new ColorDrawable(Color.parseColor(&quot;#0F9D58&quot;));\n\n        // Set BackgroundDrawable\n        actionBar.setBackgroundDrawable(colorDrawable);\n</code></pre>\n<p>You can change the <strong>&quot;#0F9D58&quot;</strong> to any color code you want.</p>\n"},{"tags":[],"owner":{"account_id":26840344,"reputation":134,"user_id":20426969,"display_name":"Sarmad Ali"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1694196615,"creation_date":1694196615,"answer_id":77069061,"question_id":77068674,"body_markdown":"there is another way to add a default toolbar to your app while setting your parent theme same as: \r\n\r\n    parent=&quot;Theme.Material3.DayNight.NoActionBar&quot;\r\n\r\nactivity_main.xml\r\n\r\nby following this approach you don&#39;t need to change background color from the java code but you can easily change background color as a simple attribute of toolbar.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        tools:context=&quot;.MainActivity&quot;&gt;\r\n    \r\n        &lt;com.google.android.material.appbar.MaterialToolbar\r\n            android:id=&quot;@+id/myToolbar&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:background=&quot;#1F6C23&quot;\r\n            android:elevation=&quot;4dp&quot;\r\n            android:minHeight=&quot;?attr/actionBarSize&quot;\r\n            android:theme=&quot;?attr/actionBarTheme&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintHorizontal_bias=&quot;0.5&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n\r\n \r\nMainActivity.class\r\n\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    import androidx.appcompat.widget.Toolbar;\r\n    import android.os.Bundle;\r\n    \r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n            Toolbar myToolbar = (Toolbar) findViewById(R.id.myToolbar);\r\n            setSupportActionBar(myToolbar);\r\n        }\r\n    }\r\n\r\n\r\nsee the official documentation here :\r\nhttps://developer.android.com/develop/ui/views/components/appbar/setting-up","title":"I don&#39;t have a title bar in Android studio. When I press the Show System UI button, my title bar does not appear","body":"<p>there is another way to add a default toolbar to your app while setting your parent theme same as:</p>\n<pre><code>parent=&quot;Theme.Material3.DayNight.NoActionBar&quot;\n</code></pre>\n<p>activity_main.xml</p>\n<p>by following this approach you don't need to change background color from the java code but you can easily change background color as a simple attribute of toolbar.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.MainActivity&quot;&gt;\n\n    &lt;com.google.android.material.appbar.MaterialToolbar\n        android:id=&quot;@+id/myToolbar&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:background=&quot;#1F6C23&quot;\n        android:elevation=&quot;4dp&quot;\n        android:minHeight=&quot;?attr/actionBarSize&quot;\n        android:theme=&quot;?attr/actionBarTheme&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintHorizontal_bias=&quot;0.5&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p>MainActivity.class</p>\n<pre><code>import androidx.appcompat.app.AppCompatActivity;\nimport androidx.appcompat.widget.Toolbar;\nimport android.os.Bundle;\n\npublic class MainActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        Toolbar myToolbar = (Toolbar) findViewById(R.id.myToolbar);\n        setSupportActionBar(myToolbar);\n    }\n}\n</code></pre>\n<p>see the official documentation here :\n<a href=\"https://developer.android.com/develop/ui/views/components/appbar/setting-up\" rel=\"nofollow noreferrer\">https://developer.android.com/develop/ui/views/components/appbar/setting-up</a></p>\n"}],"owner":{"account_id":29263434,"reputation":3,"user_id":22419820,"display_name":"&#214;zcan Bayram"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77069061,"answer_count":2,"score":0,"last_activity_date":1694196615,"creation_date":1694192068,"question_id":77068674,"body_markdown":"Look the image:\r\nimage: [enter image description here][1]\r\n\r\n# I don&#39;t know what code this is caused by. That&#39;s why I will only share themes.xml codes. \r\n```\r\n//Themes.xml\r\n\r\n&lt;resources xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n    &lt;!-- Base application theme. --&gt;\r\n    &lt;style name=&quot;Base.Theme.TitleBarSettings&quot; parent=&quot;Theme.Material3.DayNight.NoActionBar&quot;&gt;\r\n        &lt;!-- Customize your light theme here. --&gt;\r\n        &lt;!-- &lt;item name=&quot;colorPrimary&quot;&gt;@color/my_light_primary&lt;/item&gt; --&gt;\r\n    &lt;/style&gt;\r\n\r\n    &lt;style name=&quot;Theme.TitleBarSettings&quot; parent=&quot;Base.Theme.TitleBarSettings&quot; /&gt;\r\n&lt;/resources&gt;\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/KROXw.png","title":"I don&#39;t have a title bar in Android studio. When I press the Show System UI button, my title bar does not appear","body":"<p>Look the image:\nimage: <a href=\"https://i.stack.imgur.com/KROXw.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<h1>I don't know what code this is caused by. That's why I will only share themes.xml codes.</h1>\n<pre><code>//Themes.xml\n\n&lt;resources xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n    &lt;!-- Base application theme. --&gt;\n    &lt;style name=&quot;Base.Theme.TitleBarSettings&quot; parent=&quot;Theme.Material3.DayNight.NoActionBar&quot;&gt;\n        &lt;!-- Customize your light theme here. --&gt;\n        &lt;!-- &lt;item name=&quot;colorPrimary&quot;&gt;@color/my_light_primary&lt;/item&gt; --&gt;\n    &lt;/style&gt;\n\n    &lt;style name=&quot;Theme.TitleBarSettings&quot; parent=&quot;Base.Theme.TitleBarSettings&quot; /&gt;\n&lt;/resources&gt;\n</code></pre>\n"},{"tags":["java","apache-beam","airflow-2.x"],"answers":[{"comments":[{"owner":{"account_id":18028082,"reputation":305,"user_id":13103493,"display_name":"sidd"},"score":0,"creation_date":1691343924,"post_id":76846833,"comment_id":135475781,"body_markdown":"I have read the link above. I also read extensively about KeyedPCollectionTuple. But unable to connect my example to it. In PCollection&lt;KV&lt;Integer, String&gt;&gt; key i.e. Integer could be the productId which is common to the 2 files. But file 1 has no String value and file 2 is a comma seperated Strings which includes the productId i.e the key. Could you please help me connect the dots here.","body":"I have read the link above. I also read extensively about KeyedPCollectionTuple. But unable to connect my example to it. In PCollection&lt;KV&lt;Integer, String&gt;&gt; key i.e. Integer could be the productId which is common to the 2 files. But file 1 has no String value and file 2 is a comma seperated Strings which includes the productId i.e the key. Could you please help me connect the dots here."},{"owner":{"account_id":18028082,"reputation":305,"user_id":13103493,"display_name":"sidd"},"score":0,"creation_date":1691427164,"post_id":76846833,"comment_id":135487101,"body_markdown":"Thanks @Gaya-rupasinghe KeyedPCollectionTuple was used to join the 2 files and get the desired result.","body":"Thanks @Gaya-rupasinghe KeyedPCollectionTuple was used to join the 2 files and get the desired result."}],"tags":[],"owner":{"account_id":16448586,"reputation":114,"user_id":11882586,"display_name":"Gayal Rupasinghe"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691339821,"creation_date":1691339821,"answer_id":76846833,"question_id":76846772,"body_markdown":"You can use KeyedPCollectionTuple to join the two files, this might just be a starting off point but have a look: https://beam.apache.org/documentation/pipelines/design-your-pipeline/ ","title":"Comparing 2 csv files using apache beam java","body":"<p>You can use KeyedPCollectionTuple to join the two files, this might just be a starting off point but have a look: <a href=\"https://beam.apache.org/documentation/pipelines/design-your-pipeline/\" rel=\"nofollow noreferrer\">https://beam.apache.org/documentation/pipelines/design-your-pipeline/</a></p>\n"},{"comments":[{"owner":{"account_id":18028082,"reputation":305,"user_id":13103493,"display_name":"sidd"},"score":0,"creation_date":1691346823,"post_id":76846852,"comment_id":135476160,"body_markdown":"thanks @Naveen-a-d. I just had a look at it and have some questions. I understand that ExtractKeyValueFn puspose is to make the data into key / value pair. For file 1 we have only the productIds (Integer) and actually since I am writing with TextIO it has no commans it&#39;s just that its name is .csv . would it work on file 1. For file 2 I understand you are trying to convert the first field into productId which looks ok. Nevertheless, I would try the code my morning tomorrow and would get back to you with more details.","body":"thanks @Naveen-a-d. I just had a look at it and have some questions. I understand that ExtractKeyValueFn puspose is to make the data into key / value pair. For file 1 we have only the productIds (Integer) and actually since I am writing with TextIO it has no commans it&#39;s just that its name is .csv . would it work on file 1. For file 2 I understand you are trying to convert the first field into productId which looks ok. Nevertheless, I would try the code my morning tomorrow and would get back to you with more details."},{"owner":{"account_id":18028082,"reputation":305,"user_id":13103493,"display_name":"sidd"},"score":0,"creation_date":1691427055,"post_id":76846852,"comment_id":135487090,"body_markdown":"I executed the above code. I had to create 2 separate DoFn - ExtractKeyValueFn for the first file and second file. So in the first file I created both Key &lt;K&gt; and Value &lt;V&gt; as productIds and for the second file I extracted the Key&lt;K&gt; by splitting the line and taking parts[3] which gives me the prodcutId and for Value &lt;V&gt; I take as &quot;line&quot; which gives me the whole line of reference image.  After that we use CoGroupByKey to join lines with same ID.  But I didn&#39;t find the need for &quot;CompareCsvFn&quot;. I just wrote the line of the second file as the output. Thanks again for your help on this.","body":"I executed the above code. I had to create 2 separate DoFn - ExtractKeyValueFn for the first file and second file. So in the first file I created both Key &lt;K&gt; and Value &lt;V&gt; as productIds and for the second file I extracted the Key&lt;K&gt; by splitting the line and taking parts[3] which gives me the prodcutId and for Value &lt;V&gt; I take as &quot;line&quot; which gives me the whole line of reference image.  After that we use CoGroupByKey to join lines with same ID.  But I didn&#39;t find the need for &quot;CompareCsvFn&quot;. I just wrote the line of the second file as the output. Thanks again for your help on this."}],"tags":[],"owner":{"account_id":25102613,"reputation":111,"user_id":18953150,"display_name":"Naveen A D"},"comment_count":2,"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1691340108,"creation_date":1691340108,"answer_id":76846852,"question_id":76846772,"body_markdown":"I think that a few changes in the code can fix it \r\n\r\nTry this code :\r\n\r\n       public class CsvComparer {\r\n    public static void main(String[] args) {\r\n        Pipeline pipeline = Pipeline.create();\r\n\r\n        // Read the first CSV file as KV pairs (ID, Line)\r\n        PCollection&lt;KV&lt;String, String&gt;&gt; file1 = pipeline.apply(TextIO.read().from(&quot;gs://my-bucket/file1.csv&quot;))\r\n                .apply(ParDo.of(new ExtractKeyValueFn()));\r\n\r\n        // Read the second CSV file as KV pairs (ID, Line)\r\n        PCollection&lt;KV&lt;String, String&gt;&gt; file2 = pipeline.apply(TextIO.read().from(&quot;gs://my-bucket/file2.csv&quot;))\r\n                .apply(ParDo.of(new ExtractKeyValueFn()));\r\n\r\n        // CoGroupByKey to join lines with the same ID\r\n        PCollection&lt;KV&lt;String, CoGbkResult&gt;&gt; groupedLines = KeyedPCollectionTuple.of(&quot;file1&quot;, file1)\r\n                .and(&quot;file2&quot;, file2)\r\n                .apply(CoGroupByKey.create());\r\n\r\n        // Compare the data in the files and write the results to a file\r\n        PCollection&lt;String&gt; results = groupedLines.apply(ParDo.of(new CompareCsvFn()));\r\n        results.apply(TextIO.write().to(&quot;gs://my-bucket/comparison_results.csv&quot;).withSuffix(&quot;.csv&quot;));\r\n\r\n        pipeline.run().waitUntilFinish();\r\n    }\r\n\r\n    public static class ExtractKeyValueFn extends DoFn&lt;String, KV&lt;String, String&gt;&gt; {\r\n        @ProcessElement\r\n        public void processElement(@Element String line, OutputReceiver&lt;KV&lt;String, String&gt;&gt; out) {\r\n            // Split the line by &#39;,&#39; and use the first part as the key (ID) and the whole line as the value\r\n            String[] parts = line.split(&quot;,&quot;);\r\n            String key = parts[0].substring(parts[0].lastIndexOf(&#39;/&#39;) + 1);\r\n            out.output(KV.of(key, line));\r\n        }\r\n    }\r\n\r\n    public static class CompareCsvFn extends DoFn&lt;KV&lt;String, CoGbkResult&gt;, String&gt; {\r\n        @ProcessElement\r\n        public void processElement(@Element KV&lt;String, CoGbkResult&gt; element, OutputReceiver&lt;String&gt; out) {\r\n            String id = element.getKey();\r\n            Iterable&lt;String&gt; linesFromFirstFile = element.getValue().getAll(&quot;file1&quot;);\r\n            Iterable&lt;String&gt; linesFromSecondFile = element.getValue().getAll(&quot;file2&quot;);\r\n\r\n            // Compare the lines for the given ID and output if they match\r\n            for (String line1 : linesFromFirstFile) {\r\n                for (String line2 : linesFromSecondFile) {\r\n                    if (line1.equals(line2)) {\r\n                        // Format the output\r\n                        String output = String.format(&quot;Line in file 1: %s\\nLine in file 2: %s\\n&quot;, line1, line2);\r\n                        out.output(output);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    }\r\n\r\nI changed a few things in it ,let me know that it works or not.","title":"Comparing 2 csv files using apache beam java","body":"<p>I think that a few changes in the code can fix it</p>\n<p>Try this code :</p>\n<pre><code>   public class CsvComparer {\npublic static void main(String[] args) {\n    Pipeline pipeline = Pipeline.create();\n\n    // Read the first CSV file as KV pairs (ID, Line)\n    PCollection&lt;KV&lt;String, String&gt;&gt; file1 = pipeline.apply(TextIO.read().from(&quot;gs://my-bucket/file1.csv&quot;))\n            .apply(ParDo.of(new ExtractKeyValueFn()));\n\n    // Read the second CSV file as KV pairs (ID, Line)\n    PCollection&lt;KV&lt;String, String&gt;&gt; file2 = pipeline.apply(TextIO.read().from(&quot;gs://my-bucket/file2.csv&quot;))\n            .apply(ParDo.of(new ExtractKeyValueFn()));\n\n    // CoGroupByKey to join lines with the same ID\n    PCollection&lt;KV&lt;String, CoGbkResult&gt;&gt; groupedLines = KeyedPCollectionTuple.of(&quot;file1&quot;, file1)\n            .and(&quot;file2&quot;, file2)\n            .apply(CoGroupByKey.create());\n\n    // Compare the data in the files and write the results to a file\n    PCollection&lt;String&gt; results = groupedLines.apply(ParDo.of(new CompareCsvFn()));\n    results.apply(TextIO.write().to(&quot;gs://my-bucket/comparison_results.csv&quot;).withSuffix(&quot;.csv&quot;));\n\n    pipeline.run().waitUntilFinish();\n}\n\npublic static class ExtractKeyValueFn extends DoFn&lt;String, KV&lt;String, String&gt;&gt; {\n    @ProcessElement\n    public void processElement(@Element String line, OutputReceiver&lt;KV&lt;String, String&gt;&gt; out) {\n        // Split the line by ',' and use the first part as the key (ID) and the whole line as the value\n        String[] parts = line.split(&quot;,&quot;);\n        String key = parts[0].substring(parts[0].lastIndexOf('/') + 1);\n        out.output(KV.of(key, line));\n    }\n}\n\npublic static class CompareCsvFn extends DoFn&lt;KV&lt;String, CoGbkResult&gt;, String&gt; {\n    @ProcessElement\n    public void processElement(@Element KV&lt;String, CoGbkResult&gt; element, OutputReceiver&lt;String&gt; out) {\n        String id = element.getKey();\n        Iterable&lt;String&gt; linesFromFirstFile = element.getValue().getAll(&quot;file1&quot;);\n        Iterable&lt;String&gt; linesFromSecondFile = element.getValue().getAll(&quot;file2&quot;);\n\n        // Compare the lines for the given ID and output if they match\n        for (String line1 : linesFromFirstFile) {\n            for (String line2 : linesFromSecondFile) {\n                if (line1.equals(line2)) {\n                    // Format the output\n                    String output = String.format(&quot;Line in file 1: %s\\nLine in file 2: %s\\n&quot;, line1, line2);\n                    out.output(output);\n                }\n            }\n        }\n    }\n}\n}\n</code></pre>\n<p>I changed a few things in it ,let me know that it works or not.</p>\n"}],"owner":{"account_id":18028082,"reputation":305,"user_id":13103493,"display_name":"sidd"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76846852,"answer_count":2,"score":0,"last_activity_date":1694196146,"creation_date":1691338865,"question_id":76846772,"body_markdown":"I have a task of comparing 2 csv files using Apache Beam Java. \r\n    \r\nI have to compare the Ids in file 1 with the all Ids in File 2 and if it matches then I have to get the whole line which consists of that Ids and save it in a file. For e.g.: Id is found in 1st reference image. Hence I would copy this line to another file and save it. if the ID would not have found then it would search on the next line .. till the end of file. \r\n\r\nThe code which I have come up with is as per below: \r\n\r\n    public class CsvComparer {\r\n        public static void main(String[] args) {\r\n            Pipeline pipeline = Pipeline.create();\r\n    \r\n            // Read the first CSV file\r\n            PCollection&lt;String&gt; file1 = pipeline.apply(TextIO.read().from(&quot;gs://my-bucket/file1.csv&quot;));\r\n    \r\n            // Read the second CSV file\r\n            PCollection&lt;String&gt; file2 = pipeline.apply(TextIO.read().from(&quot;gs://my-bucket/file2.csv&quot;));\r\n    \r\n            // Compare the data in the files and write the results to a file\r\n            PCollection&lt;String&gt; results = file1.apply(ParDo.of(new CompareCsvFn(file2)));\r\n            results.apply(TextIO.write().to(&quot;gs://my-bucket/comparison_results.csv&quot;).withSuffix(&quot;.csv&quot;));\r\n    \r\n            pipeline.run().waitUntilFinish();\r\n        } \r\n    \r\n        public static class CompareCsvFn extends DoFn&lt;String, String&gt; {\r\n            private final PCollection&lt;String&gt; file2; \r\n    \r\n            public CompareCsvFn(PCollection&lt;String&gt; file2) {\r\n                this.file2 = file2;\r\n            } \r\n    \r\n            @ProcessElement\r\n            public void processElement(@Element String line, OutputReceiver&lt;String&gt; out) {\r\n                // Compare the line with the lines in file2\r\n                PCollection&lt;KV&lt;String, String&gt;&gt; matches = file2.apply(ParDo.of(new CompareLinesFn(line))); \r\n    \r\n                // Write the matching lines to the output\r\n                matches.apply(ParDo.of(new FormatOutputFn(line))).apply(out);\r\n            }\r\n        } \r\n    \r\n        public static class CompareLinesFn extends DoFn&lt;String, KV&lt;String, String&gt;&gt; {\r\n            private final String line; \r\n    \r\n            public CompareLinesFn(String line) {\r\n                this.line = line;\r\n            } \r\n    \r\n            @ProcessElement\r\n            public void processElement(@Element String otherLine, OutputReceiver&lt;KV&lt;String, String&gt;&gt; out) {\r\n                // Compare the lines and output a KV pair if they match\r\n    // this logic would need to be changed I understand as I have to compare one line in file1 with all other lines in file2 \r\n                if (line.equals(otherLine)) {\r\n                    out.output(KV.of(line, otherLine));\r\n                }\r\n            }\r\n        } \r\n    \r\n        public static class FormatOutputFn extends DoFn&lt;KV&lt;String, String&gt;, String&gt; {\r\n            private final String line; \r\n    \r\n            public FormatOutputFn(String line) {\r\n                this.line = line;\r\n            } \r\n    \r\n            @ProcessElement\r\n            public void processElement(@Element KV&lt;String, String&gt; match, OutputReceiver&lt;String&gt; out) {\r\n                // Format the output\r\n                String output = String.format(&quot;Line in file 1: %s\\nLine in file 2: %s\\n&quot;, line, match.getValue());\r\n                out.output(output);\r\n            }\r\n        }\r\n    }\r\n\r\nPlease kindly help me and advise on the above. I have search the net and other areas but to no avail. ","title":"Comparing 2 csv files using apache beam java","body":"<p>I have a task of comparing 2 csv files using Apache Beam Java.</p>\n<p>I have to compare the Ids in file 1 with the all Ids in File 2 and if it matches then I have to get the whole line which consists of that Ids and save it in a file. For e.g.: Id is found in 1st reference image. Hence I would copy this line to another file and save it. if the ID would not have found then it would search on the next line .. till the end of file.</p>\n<p>The code which I have come up with is as per below:</p>\n<pre><code>public class CsvComparer {\n    public static void main(String[] args) {\n        Pipeline pipeline = Pipeline.create();\n\n        // Read the first CSV file\n        PCollection&lt;String&gt; file1 = pipeline.apply(TextIO.read().from(&quot;gs://my-bucket/file1.csv&quot;));\n\n        // Read the second CSV file\n        PCollection&lt;String&gt; file2 = pipeline.apply(TextIO.read().from(&quot;gs://my-bucket/file2.csv&quot;));\n\n        // Compare the data in the files and write the results to a file\n        PCollection&lt;String&gt; results = file1.apply(ParDo.of(new CompareCsvFn(file2)));\n        results.apply(TextIO.write().to(&quot;gs://my-bucket/comparison_results.csv&quot;).withSuffix(&quot;.csv&quot;));\n\n        pipeline.run().waitUntilFinish();\n    } \n\n    public static class CompareCsvFn extends DoFn&lt;String, String&gt; {\n        private final PCollection&lt;String&gt; file2; \n\n        public CompareCsvFn(PCollection&lt;String&gt; file2) {\n            this.file2 = file2;\n        } \n\n        @ProcessElement\n        public void processElement(@Element String line, OutputReceiver&lt;String&gt; out) {\n            // Compare the line with the lines in file2\n            PCollection&lt;KV&lt;String, String&gt;&gt; matches = file2.apply(ParDo.of(new CompareLinesFn(line))); \n\n            // Write the matching lines to the output\n            matches.apply(ParDo.of(new FormatOutputFn(line))).apply(out);\n        }\n    } \n\n    public static class CompareLinesFn extends DoFn&lt;String, KV&lt;String, String&gt;&gt; {\n        private final String line; \n\n        public CompareLinesFn(String line) {\n            this.line = line;\n        } \n\n        @ProcessElement\n        public void processElement(@Element String otherLine, OutputReceiver&lt;KV&lt;String, String&gt;&gt; out) {\n            // Compare the lines and output a KV pair if they match\n// this logic would need to be changed I understand as I have to compare one line in file1 with all other lines in file2 \n            if (line.equals(otherLine)) {\n                out.output(KV.of(line, otherLine));\n            }\n        }\n    } \n\n    public static class FormatOutputFn extends DoFn&lt;KV&lt;String, String&gt;, String&gt; {\n        private final String line; \n\n        public FormatOutputFn(String line) {\n            this.line = line;\n        } \n\n        @ProcessElement\n        public void processElement(@Element KV&lt;String, String&gt; match, OutputReceiver&lt;String&gt; out) {\n            // Format the output\n            String output = String.format(&quot;Line in file 1: %s\\nLine in file 2: %s\\n&quot;, line, match.getValue());\n            out.output(output);\n        }\n    }\n}\n</code></pre>\n<p>Please kindly help me and advise on the above. I have search the net and other areas but to no avail.</p>\n"},{"tags":["java","arrays","json"],"comments":[{"owner":{"account_id":9265744,"reputation":24921,"user_id":6881240,"accept_rate":96,"display_name":"kabanus"},"score":0,"creation_date":1482752813,"post_id":41330715,"comment_id":69864505,"body_markdown":"You probably want to tag Java as well. What do you mean does not work in the first example? what is the input, output, and expected output?","body":"You probably want to tag Java as well. What do you mean does not work in the first example? what is the input, output, and expected output?"},{"owner":{"display_name":"user7265561"},"score":0,"creation_date":1482752925,"post_id":41330715,"comment_id":69864550,"body_markdown":"if the json is of object type then i am able to get the difference","body":"if the json is of object type then i am able to get the difference"},{"owner":{"display_name":"user7265561"},"score":0,"creation_date":1482753485,"post_id":41330715,"comment_id":69864758,"body_markdown":"added the java code as well. could anyone help me with this. Also i dont know if my code is an optimized one","body":"added the java code as well. could anyone help me with this. Also i dont know if my code is an optimized one"},{"owner":{"account_id":7827308,"reputation":1498,"user_id":5918453,"display_name":"Mark"},"score":0,"creation_date":1482835983,"post_id":41330715,"comment_id":69889535,"body_markdown":"So... wait... the second code snippet is where exactly? Outside of your compare method?","body":"So... wait... the second code snippet is where exactly? Outside of your compare method?"},{"owner":{"display_name":"user7265561"},"score":0,"creation_date":1482836088,"post_id":41330715,"comment_id":69889591,"body_markdown":"@Mark it is inside the compare method only. when i execute the above code in debug the object array is null","body":"@Mark it is inside the compare method only. when i execute the above code in debug the object array is null"},{"owner":{"display_name":"user7265561"},"score":0,"creation_date":1482836640,"post_id":41330715,"comment_id":69889875,"body_markdown":"@axelH i need to do a deep compare of the two json what i have posted is  sample one and the real json is very huge","body":"@axelH i need to do a deep compare of the two json what i have posted is  sample one and the real json is very huge"},{"owner":{"account_id":2774008,"reputation":18025,"user_id":2387977,"accept_rate":69,"display_name":"Dherik"},"score":1,"creation_date":1482836683,"post_id":41330715,"comment_id":69889895,"body_markdown":"Possible duplicate of [Compare two JSON objects in Java](http://stackoverflow.com/questions/2253750/compare-two-json-objects-in-java)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/2253750/compare-two-json-objects-in-java\">Compare two JSON objects in Java</a>"},{"owner":{"display_name":"user7265561"},"score":0,"creation_date":1482837155,"post_id":41330715,"comment_id":69890140,"body_markdown":"@Dherik see i am able to compare the jsons but could not print the all the differences if the two json are not equal","body":"@Dherik see i am able to compare the jsons but could not print the all the differences if the two json are not equal"},{"owner":{"account_id":2774008,"reputation":18025,"user_id":2387977,"accept_rate":69,"display_name":"Dherik"},"score":0,"creation_date":1482837679,"post_id":41330715,"comment_id":69890385,"body_markdown":"@Calvin, I think `JSONAssert` can show only the differences. Try the `JSONCompare` (http://jsonassert.skyscreamer.org/apidocs/index.html) available in `JSONAssert `.","body":"@Calvin, I think <code>JSONAssert</code> can show only the differences. Try the <code>JSONCompare</code> (<a href=\"http://jsonassert.skyscreamer.org/apidocs/index.html\" rel=\"nofollow noreferrer\">jsonassert.skyscreamer.org/apidocs/index.html</a>) available in <code>JSONAssert </code>."},{"owner":{"display_name":"user7265561"},"score":0,"creation_date":1482838807,"post_id":41330715,"comment_id":69890904,"body_markdown":"@Mark any idea on the reason why the array returned as null","body":"@Mark any idea on the reason why the array returned as null"},{"owner":{"account_id":7827308,"reputation":1498,"user_id":5918453,"display_name":"Mark"},"score":0,"creation_date":1482839929,"post_id":41330715,"comment_id":69891437,"body_markdown":"Actually, no :(. I tried creating an empty ArrayList and calling the toArray() method, it doesn&#39;t return null, just makes the resulting array empty. Of course if your ArrayList was null, you&#39;d get a NullPointerException, but it doesn&#39;t seem like that&#39;s your problem. Did you debug it? Are you sure the .toArray() method returned null instead of an array?","body":"Actually, no :(. I tried creating an empty ArrayList and calling the toArray() method, it doesn&#39;t return null, just makes the resulting array empty. Of course if your ArrayList was null, you&#39;d get a NullPointerException, but it doesn&#39;t seem like that&#39;s your problem. Did you debug it? Are you sure the .toArray() method returned null instead of an array?"},{"owner":{"display_name":"user7265561"},"score":0,"creation_date":1482895381,"post_id":41330715,"comment_id":69911684,"body_markdown":"@Mark i have edited the code now the arraylist is not empty, but when comparing two json with same key but with different value it return as true instead of returning as false","body":"@Mark i have edited the code now the arraylist is not empty, but when comparing two json with same key but with different value it return as true instead of returning as false"},{"owner":{"account_id":7827308,"reputation":1498,"user_id":5918453,"display_name":"Mark"},"score":0,"creation_date":1482913521,"post_id":41330715,"comment_id":69917609,"body_markdown":"@Calvin Which json library are you using? I&#39;d like to test the code myself, but a different library might screw up the results","body":"@Calvin Which json library are you using? I&#39;d like to test the code myself, but a different library might screw up the results"},{"owner":{"display_name":"user7265561"},"score":0,"creation_date":1482913728,"post_id":41330715,"comment_id":69917686,"body_markdown":"@Mark i am using Gson. These are the imports that i did              import com.google.common.collect.Maps;\nimport com.google.gson.Gson;\nimport com.google.gson.JsonArray;\nimport com.google.gson.JsonElement;\nimport com.google.gson.JsonObject;\nimport com.google.gson.JsonParser;\nimport com.google.gson.reflect.TypeToken;","body":"@Mark i am using Gson. These are the imports that i did              import com.google.common.collect.Maps; import com.google.gson.Gson; import com.google.gson.JsonArray; import com.google.gson.JsonElement; import com.google.gson.JsonObject; import com.google.gson.JsonParser; import com.google.gson.reflect.TypeToken;"},{"owner":{"display_name":"user7265561"},"score":0,"creation_date":1482913849,"post_id":41330715,"comment_id":69917747,"body_markdown":"@Mark i need to do something like this if the json values are same irrespective of their order then it should not do anything. if the json are not same then i need to print the differences","body":"@Mark i need to do something like this if the json values are same irrespective of their order then it should not do anything. if the json are not same then i need to print the differences"},{"owner":{"account_id":7827308,"reputation":1498,"user_id":5918453,"display_name":"Mark"},"score":0,"creation_date":1482914516,"post_id":41330715,"comment_id":69918034,"body_markdown":"@Calvin So... here&#39;s the thing... if I try your code with your example, this is my output: `Is the two JSON File Same: false` `not equal: value differences={Company List=([Compnay: Paypal, Compnay: eBay, Compnay: Google], [Compnay: Viswesh, Compnay: Anand, Compnay: Anand])}`","body":"@Calvin So... here&#39;s the thing... if I try your code with your example, this is my output: <code>Is the two JSON File Same: false</code> <code>not equal: value differences={Company List=([Compnay: Paypal, Compnay: eBay, Compnay: Google], [Compnay: Viswesh, Compnay: Anand, Compnay: Anand])}</code>"},{"owner":{"display_name":"user7265561"},"score":0,"creation_date":1482914953,"post_id":41330715,"comment_id":69918237,"body_markdown":"@Mark if you try this on json1: {&quot;Company List&quot;:[&quot;Compnay: eBay&quot;,&quot;Compnay: Google&quot;,&quot;Compnay: Paypal&quot;]} and json2: {&quot;Company List&quot;:[&quot;Compnay: Paypal&quot;,&quot;Compnay: eBay&quot;,&quot;Compnay: Google&quot;]} in these two json the values are same but the order is different my code returns not equal but i need to get the result as they are equal","body":"@Mark if you try this on json1: {&quot;Company List&quot;:[&quot;Compnay: eBay&quot;,&quot;Compnay: Google&quot;,&quot;Compnay: Paypal&quot;]} and json2: {&quot;Company List&quot;:[&quot;Compnay: Paypal&quot;,&quot;Compnay: eBay&quot;,&quot;Compnay: Google&quot;]} in these two json the values are same but the order is different my code returns not equal but i need to get the result as they are equal"},{"owner":{"display_name":"user7265561"},"score":0,"creation_date":1482915065,"post_id":41330715,"comment_id":69918287,"body_markdown":"@Mark my thing is my code should return as two json are same if the order of the json is different but the values are same","body":"@Mark my thing is my code should return as two json are same if the order of the json is different but the values are same"},{"owner":{"display_name":"user7265561"},"score":0,"creation_date":1482916281,"post_id":41330715,"comment_id":69918929,"body_markdown":"@Mark just like you had posted these two json are also returning that they are same {&quot;Company List&quot;:[&quot;Compnay: eBay&quot;,&quot;Compnay: Google&quot;,&quot;Compnay: Paypal&quot;]} {&quot;Company List&quot;:&quot;ImAString&quot;}","body":"@Mark just like you had posted these two json are also returning that they are same {&quot;Company List&quot;:[&quot;Compnay: eBay&quot;,&quot;Compnay: Google&quot;,&quot;Compnay: Paypal&quot;]} {&quot;Company List&quot;:&quot;ImAString&quot;}"}],"answers":[{"comments":[{"owner":{"account_id":5113734,"reputation":50640,"user_id":4099593,"accept_rate":100,"display_name":"Bhargav Rao"},"score":0,"creation_date":1482926927,"post_id":41358525,"comment_id":69924738,"body_markdown":"Comments are not for extended discussion; this conversation has been [moved to chat](http://chat.stackoverflow.com/rooms/131699/discussion-on-answer-by-mark-deep-comparing-of-two-json-and-displaying-the-diffe).","body":"Comments are not for extended discussion; this conversation has been <a href=\"http://chat.stackoverflow.com/rooms/131699/discussion-on-answer-by-mark-deep-comparing-of-two-json-and-displaying-the-diffe\">moved to chat</a>."},{"owner":{"display_name":"user7265561"},"score":0,"creation_date":1482926940,"post_id":41358525,"comment_id":69924745,"body_markdown":"let me make surethat my understanding of your thoughts is correct. You want me to say that if the json has an array/list and the order is different or the value are not equal then i say that the json are not equal and then use the ma to print the differences. is it right?","body":"let me make surethat my understanding of your thoughts is correct. You want me to say that if the json has an array/list and the order is different or the value are not equal then i say that the json are not equal and then use the ma to print the differences. is it right?"},{"owner":{"display_name":"user7265561"},"score":0,"creation_date":1482995875,"post_id":41358525,"comment_id":69951402,"body_markdown":"@Mark is this the way you had mentioned","body":"@Mark is this the way you had mentioned"}],"tags":[],"owner":{"account_id":7827308,"reputation":1498,"user_id":5918453,"display_name":"Mark"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1482919884,"creation_date":1482915402,"answer_id":41358525,"question_id":41330715,"body_markdown":"The comment section was getting too long, so here&#39;s an answer instead:\r\n\r\nFirst off, you still have a problem if your Json Objects have different structures. For example:\r\n\r\n    {&quot;Company List&quot;:[&quot;Compnay: eBay&quot;,&quot;Compnay: Google&quot;,&quot;Compnay: Paypal&quot;]} \r\n    \r\n    {&quot;Company List&quot;:&quot;ImAString&quot;}\r\n\r\nNeither is null, it&#39;s a primitive and an array. You don&#39;t catch that case, so your isEqual will remain true.\r\n\r\n---\r\n\r\nAnyway, back to the problem at hand.\r\n\r\nArrays should not have to be ordered the same to be equal in your case.\r\n\r\n\r\n    if (isEqual) {\r\n        Object[] o1 = ls1.toArray();\r\n        Object[] o2 = ls2.toArray();\r\n        isEqual = Arrays.deepEquals(o1, o2);\r\n    }\r\n\r\nYou should be able to easily solve it by changing this into this:\r\n\r\n\r\n    if (isEqual) {\r\n        isEqual = ls1.containsAll(ls2);\r\n    }\r\n\r\nAlthough I should mention that I find it really odd that your ls1 and ls2 are both static and just keep getting entries. In your examples it doesn&#39;t matter because they are so small, but on big files, you will get huge ArrayLists with lots of values appearing multiple times. \r\n\r\nAnd comparing them all every time you get to a JsonArray seems like it would be a huge waste of time.\r\n\r\n---\r\n\r\nSince this still has the problem of not being able to compare differently ordered JSON Arrays with JSON Elements that aren&#39;t primitives, here&#39;s the brute force approach to comparing two arrays. Keep in mind that it&#39;s far from being an optimal approach, but it IS relatively easy to implement:\r\n\r\n    public static boolean equality(ArrayList&lt;Object&gt; list1, ArrayList&lt;Object&gt; list2) { \t\r\n    \tif (list1.length != list2.length) return false;\r\n    \t\t\r\n    \tfor (Object entry1 : list1) {\r\n    \t\tObject equalEntry = null;\r\n    \t\t\r\n    \t\tfor(Object entry2 : list2) { \r\n    \t\t\tif (entry1.equals(entry2)) {\r\n    \t\t\t\tequalEntry = entry2;\r\n    \t\t\t\tbreak;\r\n    \t\t\t}\r\n    \t\t} \r\n    \t\t\r\n    \t\tif (equalEntry == null) return false;\t\t\r\n    \t\tlist2.remove(equalEntry);\r\n    \t} \r\n    \t\r\n    \treturn true;\r\n    }\r\n\r\nI should also mention that it&#39;s obviously not as simple as `if (entry1.equals(entry2))`. You will probably have to do the recursion at this point and call your compare method. Also I&#39;m pretty sure your Lists hold JSON Elements and not Objects ;)","title":"Deep Comparing of two json and displaying the differences","body":"<p>The comment section was getting too long, so here's an answer instead:</p>\n\n<p>First off, you still have a problem if your Json Objects have different structures. For example:</p>\n\n<pre><code>{\"Company List\":[\"Compnay: eBay\",\"Compnay: Google\",\"Compnay: Paypal\"]} \n\n{\"Company List\":\"ImAString\"}\n</code></pre>\n\n<p>Neither is null, it's a primitive and an array. You don't catch that case, so your isEqual will remain true.</p>\n\n<hr>\n\n<p>Anyway, back to the problem at hand.</p>\n\n<p>Arrays should not have to be ordered the same to be equal in your case.</p>\n\n<pre><code>if (isEqual) {\n    Object[] o1 = ls1.toArray();\n    Object[] o2 = ls2.toArray();\n    isEqual = Arrays.deepEquals(o1, o2);\n}\n</code></pre>\n\n<p>You should be able to easily solve it by changing this into this:</p>\n\n<pre><code>if (isEqual) {\n    isEqual = ls1.containsAll(ls2);\n}\n</code></pre>\n\n<p>Although I should mention that I find it really odd that your ls1 and ls2 are both static and just keep getting entries. In your examples it doesn't matter because they are so small, but on big files, you will get huge ArrayLists with lots of values appearing multiple times. </p>\n\n<p>And comparing them all every time you get to a JsonArray seems like it would be a huge waste of time.</p>\n\n<hr>\n\n<p>Since this still has the problem of not being able to compare differently ordered JSON Arrays with JSON Elements that aren't primitives, here's the brute force approach to comparing two arrays. Keep in mind that it's far from being an optimal approach, but it IS relatively easy to implement:</p>\n\n<pre><code>public static boolean equality(ArrayList&lt;Object&gt; list1, ArrayList&lt;Object&gt; list2) {  \n    if (list1.length != list2.length) return false;\n\n    for (Object entry1 : list1) {\n        Object equalEntry = null;\n\n        for(Object entry2 : list2) { \n            if (entry1.equals(entry2)) {\n                equalEntry = entry2;\n                break;\n            }\n        } \n\n        if (equalEntry == null) return false;       \n        list2.remove(equalEntry);\n    } \n\n    return true;\n}\n</code></pre>\n\n<p>I should also mention that it's obviously not as simple as <code>if (entry1.equals(entry2))</code>. You will probably have to do the recursion at this point and call your compare method. Also I'm pretty sure your Lists hold JSON Elements and not Objects ;)</p>\n"}],"owner":{"display_name":"user7265561"},"comment_count":19,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19159,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1694196095,"creation_date":1482752430,"question_id":41330715,"body_markdown":"I am trying to compare two dynamic json data and if they are not equal then i am printing the differences. For this i am using  \r\n\r\n    Type mapType = new TypeToken&lt;Map&lt;String, Object&gt;&gt;(){}.getType();\r\n    Map&lt;String,Object&gt; firstMap = g.fromJson(jsonElement1, mapType);\r\n    Map&lt;String, Object&gt; secondMap = g.fromJson(jsonElement2, mapType);\r\n    System.out.println(Maps.difference(firstMap, secondMap));\r\n I need to display the difference in the console.\r\nThis is the java code in which i am trying to display the differences of the json\r\n\r\n  \r\n\r\n          public class Tester {\r\n    public static ArrayList&lt;Object&gt; ls1 = new ArrayList&lt;Object&gt;();\r\n     public static      \t\tArrayList&lt;Object&gt; ls2 = new ArrayList&lt;Object&gt;();\r\n            \tpublic static void main(String[] args) throws Exception {\r\n            \t\tJsonParser parser = new JsonParser();\r\n            \t\t\r\n            \t\ttry{\r\n            \t\t\tGson g = new Gson();\r\n            \t\t\tJsonElement jsonElement1 = parser\r\n            \t\t\t\t\t.parse(new FileReader(&quot;D:\\\\file1.json&quot;));\r\n            \t\t\tJsonElement jsonElement2 = parser\r\n            \t\t\t\t\t.parse(new FileReader(&quot;D:\\\\file2.json&quot;));\r\n            \t\t\tSystem.out.println(&quot;Is the two JSON File Same: &quot;+compareJson(jsonElement1, jsonElement2));\r\n            \t\t\tif(!compareJson(jsonElement1, jsonElement2)){\r\n            \t\t\t\tType mapType = new TypeToken&lt;Map&lt;String, Object&gt;&gt;(){}.getType();\r\n            \t\t\t\tMap&lt;String,Object&gt; firstMap = g.fromJson(jsonElement1, mapType);\r\n            \t\t\t\tMap&lt;String, Object&gt; secondMap = g.fromJson(jsonElement2, mapType);\r\n            \t\t\t\tSystem.out.println(Maps.difference(firstMap, secondMap));\r\n            \t\t\t}\r\n            \t\t\telse{\r\n            \t\t\t\tSystem.out.println(&quot;The Two JSON Are SAME!!!!!!!!!!!!!!!&quot;);\r\n            \t\t\t}\r\n            \t\t\t\r\n            \t\t}catch(Exception e1){\r\n            \t\t\te1.printStackTrace();\r\n            \t\t}\r\n            \r\n            \t}\r\n            \r\n            \tpublic static boolean compareJson(JsonElement json1, JsonElement json2) {\r\n            \t\tboolean isEqual = true;\r\n            \t\t\r\n            \t\t// Check whether both jsonElement are not null\r\n            \t\tif (json1 != null &amp;&amp; json2 != null) {\r\n            \r\n            \t\t\t// Check whether both jsonElement are objects\r\n            \t\t\tif (json1.isJsonObject() &amp;&amp; json2.isJsonObject()) {\r\n            \t\t\t\tSet&lt;Entry&lt;String, JsonElement&gt;&gt; ens1 = ((JsonObject) json1).entrySet();\r\n            \t\t\t\tSet&lt;Entry&lt;String, JsonElement&gt;&gt; ens2 = ((JsonObject) json2).entrySet();\r\n            \t\t\t\tJsonObject json2obj = (JsonObject) json2;\r\n            \t\t\t\tif (ens1 != null &amp;&amp; ens2 != null &amp;&amp; (ens2.size() == ens1.size())) {\r\n            \t\t\t\t\t// Iterate JSON Elements with Key values\r\n            \t\t\t\t\tfor (Entry&lt;String, JsonElement&gt; en : ens1) {\r\n            \t\t\t\t\t\tisEqual = isEqual &amp;&amp; compareJson(en.getValue(),json2obj.get(en.getKey()));\r\n            \t\t\t\t\t}\r\n            \t\t\t\t} else {\r\n            \t\t\t\t\treturn false;\r\n            \t\t\t\t}\r\n            \t\t\t}\r\n            \t\t\t// Check whether both jsonElement are arrays\r\n            \t\t\telse if (json1.isJsonArray() &amp;&amp; json2.isJsonArray()) {\r\n            \t\t\t\tJsonArray jarr1 = json1.getAsJsonArray();\r\n            \t\t\t\tJsonArray jarr2 = json2.getAsJsonArray();\r\n            \t\t\t\tif (jarr1.size() != jarr2.size()) {\r\n            \t\t\t\t\treturn false;\r\n            \t\t\t\t} else {\r\n            \t\t\t\t\tint i = 0;\r\n            \t\t\t\t\t// Iterate JSON Array to JSON Elements\r\n            \t\t\t\t\tfor (JsonElement je : jarr1) {\r\n            \t\t\t\t\t\tisEqual = isEqual &amp;&amp; compareJson(je, jarr2.get(i));\r\n            \t\t\t\t\t\ti++;\r\n            \t\t\t\t\t}\r\n            \t\t\t\t\tif (isEqual) {\r\n            \t\t\t\t\t\tObject[] o1 = ls1.toArray();\r\n            \t\t\t\t\t\tObject[] o2 = ls2.toArray();\r\n            \t\t\t\t\t\tisEqual = Arrays.deepEquals(o1, o2);\r\n            \t\t\t\t\t}\r\n            \t\t\t\t}\r\n            \t\t\t\t\r\n            \t\t\t}\r\n            \r\n            \t\t\t// Check whether both jsonElement are null\r\n            \t\t\telse if (json1.isJsonNull() &amp;&amp; json2.isJsonNull()) {\r\n            \t\t\t\treturn true;\r\n            \t\t\t}\r\n            \r\n            \t\t\t// Check whether both jsonElement are primitives\r\n            \t\t\telse if (json1.isJsonPrimitive() &amp;&amp; json2.isJsonPrimitive()) {\r\n            \t\t\t\tls1.add(json1);\r\n            \t\t\t\tls2.add(json2);\t\t\t\r\n            \t\t\t}\t\t\t\t\r\n            \t\t} else if (json1 == null &amp;&amp; json2 == null) {\r\n            \t\t\treturn true;\r\n            \t\t} else {\r\n            \t\t\treturn false;\r\n            \t\t}\r\n            \t\treturn isEqual;\r\n            \t}\r\n            }\r\n\r\nthe object array\r\n\r\n    if (isEqual) {\r\n        \t\t\t\t\t\tObject[] o1 = ls1.toArray();\r\n        \t\t\t\t\t\tObject[] o2 = ls2.toArray();\r\n        \t\t\t\t\t\tisEqual = Arrays.deepEquals(o1, o2);\r\n        \t\t\t\t\t}\r\n\r\n the object array o1 and o2 are null dont know why it is null.\r\nThese are the two sample json i am using for testing json1 `{&quot;Company List&quot;:[&quot;Compnay: Paypal&quot;,&quot;Compnay: eBay&quot;,&quot;Compnay: Google&quot;]}` json2 `{&quot;Company List&quot;:[&quot;Compnay: Viswesh&quot;,&quot;Compnay: Anand&quot;,&quot;Compnay: Anand&quot;]}` in both the json the value for company is different so the code has to return false but the code return true\r\n","title":"Deep Comparing of two json and displaying the differences","body":"<p>I am trying to compare two dynamic json data and if they are not equal then i am printing the differences. For this i am using  </p>\n\n<pre><code>Type mapType = new TypeToken&lt;Map&lt;String, Object&gt;&gt;(){}.getType();\nMap&lt;String,Object&gt; firstMap = g.fromJson(jsonElement1, mapType);\nMap&lt;String, Object&gt; secondMap = g.fromJson(jsonElement2, mapType);\nSystem.out.println(Maps.difference(firstMap, secondMap));\n</code></pre>\n\n<p>I need to display the difference in the console.\nThis is the java code in which i am trying to display the differences of the json</p>\n\n<pre><code>      public class Tester {\npublic static ArrayList&lt;Object&gt; ls1 = new ArrayList&lt;Object&gt;();\n public static              ArrayList&lt;Object&gt; ls2 = new ArrayList&lt;Object&gt;();\n            public static void main(String[] args) throws Exception {\n                JsonParser parser = new JsonParser();\n\n                try{\n                    Gson g = new Gson();\n                    JsonElement jsonElement1 = parser\n                            .parse(new FileReader(\"D:\\\\file1.json\"));\n                    JsonElement jsonElement2 = parser\n                            .parse(new FileReader(\"D:\\\\file2.json\"));\n                    System.out.println(\"Is the two JSON File Same: \"+compareJson(jsonElement1, jsonElement2));\n                    if(!compareJson(jsonElement1, jsonElement2)){\n                        Type mapType = new TypeToken&lt;Map&lt;String, Object&gt;&gt;(){}.getType();\n                        Map&lt;String,Object&gt; firstMap = g.fromJson(jsonElement1, mapType);\n                        Map&lt;String, Object&gt; secondMap = g.fromJson(jsonElement2, mapType);\n                        System.out.println(Maps.difference(firstMap, secondMap));\n                    }\n                    else{\n                        System.out.println(\"The Two JSON Are SAME!!!!!!!!!!!!!!!\");\n                    }\n\n                }catch(Exception e1){\n                    e1.printStackTrace();\n                }\n\n            }\n\n            public static boolean compareJson(JsonElement json1, JsonElement json2) {\n                boolean isEqual = true;\n\n                // Check whether both jsonElement are not null\n                if (json1 != null &amp;&amp; json2 != null) {\n\n                    // Check whether both jsonElement are objects\n                    if (json1.isJsonObject() &amp;&amp; json2.isJsonObject()) {\n                        Set&lt;Entry&lt;String, JsonElement&gt;&gt; ens1 = ((JsonObject) json1).entrySet();\n                        Set&lt;Entry&lt;String, JsonElement&gt;&gt; ens2 = ((JsonObject) json2).entrySet();\n                        JsonObject json2obj = (JsonObject) json2;\n                        if (ens1 != null &amp;&amp; ens2 != null &amp;&amp; (ens2.size() == ens1.size())) {\n                            // Iterate JSON Elements with Key values\n                            for (Entry&lt;String, JsonElement&gt; en : ens1) {\n                                isEqual = isEqual &amp;&amp; compareJson(en.getValue(),json2obj.get(en.getKey()));\n                            }\n                        } else {\n                            return false;\n                        }\n                    }\n                    // Check whether both jsonElement are arrays\n                    else if (json1.isJsonArray() &amp;&amp; json2.isJsonArray()) {\n                        JsonArray jarr1 = json1.getAsJsonArray();\n                        JsonArray jarr2 = json2.getAsJsonArray();\n                        if (jarr1.size() != jarr2.size()) {\n                            return false;\n                        } else {\n                            int i = 0;\n                            // Iterate JSON Array to JSON Elements\n                            for (JsonElement je : jarr1) {\n                                isEqual = isEqual &amp;&amp; compareJson(je, jarr2.get(i));\n                                i++;\n                            }\n                            if (isEqual) {\n                                Object[] o1 = ls1.toArray();\n                                Object[] o2 = ls2.toArray();\n                                isEqual = Arrays.deepEquals(o1, o2);\n                            }\n                        }\n\n                    }\n\n                    // Check whether both jsonElement are null\n                    else if (json1.isJsonNull() &amp;&amp; json2.isJsonNull()) {\n                        return true;\n                    }\n\n                    // Check whether both jsonElement are primitives\n                    else if (json1.isJsonPrimitive() &amp;&amp; json2.isJsonPrimitive()) {\n                        ls1.add(json1);\n                        ls2.add(json2);         \n                    }               \n                } else if (json1 == null &amp;&amp; json2 == null) {\n                    return true;\n                } else {\n                    return false;\n                }\n                return isEqual;\n            }\n        }\n</code></pre>\n\n<p>the object array</p>\n\n<pre><code>if (isEqual) {\n                            Object[] o1 = ls1.toArray();\n                            Object[] o2 = ls2.toArray();\n                            isEqual = Arrays.deepEquals(o1, o2);\n                        }\n</code></pre>\n\n<p>the object array o1 and o2 are null dont know why it is null.\nThese are the two sample json i am using for testing json1 <code>{\"Company List\":[\"Compnay: Paypal\",\"Compnay: eBay\",\"Compnay: Google\"]}</code> json2 <code>{\"Company List\":[\"Compnay: Viswesh\",\"Compnay: Anand\",\"Compnay: Anand\"]}</code> in both the json the value for company is different so the code has to return false but the code return true</p>\n"},{"tags":["java","pkcs#11"],"comments":[{"owner":{"account_id":1128201,"reputation":2051,"user_id":1114934,"display_name":"ivan.mylyanyk"},"score":1,"creation_date":1439217141,"post_id":31921939,"comment_id":51757117,"body_markdown":"Please, give us more details about what you are trying to achieve.","body":"Please, give us more details about what you are trying to achieve."},{"owner":{"account_id":5507200,"reputation":9829,"user_id":4374739,"accept_rate":97,"display_name":"SuperBiasedMan"},"score":0,"creation_date":1439217740,"post_id":31921939,"comment_id":51757561,"body_markdown":"Welcome to Stack Overflow! Please post the code you&#39;ve written, it&#39;s usually not possible to answer a question without seeing your code.","body":"Welcome to Stack Overflow! Please post the code you&#39;ve written, it&#39;s usually not possible to answer a question without seeing your code."}],"answers":[{"comments":[{"owner":{"account_id":6766601,"reputation":11,"user_id":5211421,"display_name":"user5211421"},"score":0,"creation_date":1439221308,"post_id":31922044,"comment_id":51760035,"body_markdown":"Thanks for the answer, the data file has numbers and dates only, the problem started when I changed the Algorithm sha1 to sha256.","body":"Thanks for the answer, the data file has numbers and dates only, the problem started when I changed the Algorithm sha1 to sha256."},{"owner":{"account_id":6641612,"reputation":7881,"user_id":5128464,"display_name":"vlp"},"score":0,"creation_date":1439762017,"post_id":31922044,"comment_id":51981137,"body_markdown":"What is the length of the key? If you were using a _very short_ key, you _might_ encounter a similar problem. Did you try with at least 1024 bit key? (I assume you are using RSA)","body":"What is the length of the key? If you were using a <i>very short</i> key, you <i>might</i> encounter a similar problem. Did you try with at least 1024 bit key? (I assume you are using RSA)"}],"tags":[],"owner":{"account_id":5896458,"reputation":5083,"user_id":4641455,"display_name":"JFPicard"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1439216392,"creation_date":1439216392,"answer_id":31922044,"question_id":31921939,"body_markdown":"After searching on CKR_DATA_INVALID I found that the error is:\r\n\r\n&gt;  The plaintext input data to a cryptographic operation is invalid.\r\n&gt; This return value has lower priority than CKR_DATA_LEN_RANGE.\r\n\r\nSee: http://www.cryptsoft.com/pkcs11doc/v220/pkcs11__all_8h.html#aCKR_DATA_INVALID\r\n\r\nMy guest is you have an encoding problem with your data between windows and Linux. Check your data file to find invalid windows characters.\r\n","title":"Caused by: sun.security.pkcs11.wrapper.PKCS11Exception: CKR_DATA_INVALID","body":"<p>After searching on CKR_DATA_INVALID I found that the error is:</p>\n\n<blockquote>\n  <p>The plaintext input data to a cryptographic operation is invalid.\n  This return value has lower priority than CKR_DATA_LEN_RANGE.</p>\n</blockquote>\n\n<p>See: <a href=\"http://www.cryptsoft.com/pkcs11doc/v220/pkcs11__all_8h.html#aCKR_DATA_INVALID\" rel=\"nofollow\">http://www.cryptsoft.com/pkcs11doc/v220/pkcs11__all_8h.html#aCKR_DATA_INVALID</a></p>\n\n<p>My guest is you have an encoding problem with your data between windows and Linux. Check your data file to find invalid windows characters.</p>\n"},{"tags":[],"owner":{"account_id":3685567,"reputation":11,"user_id":3181669,"display_name":"Juraj"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1513852389,"creation_date":1513852389,"answer_id":47922987,"question_id":31921939,"body_markdown":"I experienced a similar problem while I was working with an older version of the p11-capi library. In my case I wanted to use a new signature algorithm (SHA256withRSA instead of SHA1withRSA) and received the same Java exception. The exception is not very helpful, so it took quite long until I found out that the problem has been fixed in the recent library version: https://risacher.org/p11-capi/","title":"Caused by: sun.security.pkcs11.wrapper.PKCS11Exception: CKR_DATA_INVALID","body":"<p>I experienced a similar problem while I was working with an older version of the p11-capi library. In my case I wanted to use a new signature algorithm (SHA256withRSA instead of SHA1withRSA) and received the same Java exception. The exception is not very helpful, so it took quite long until I found out that the problem has been fixed in the recent library version: <a href=\"https://risacher.org/p11-capi/\" rel=\"nofollow noreferrer\">https://risacher.org/p11-capi/</a></p>\n"},{"tags":[],"owner":{"account_id":7611095,"reputation":33,"user_id":5771894,"display_name":"Vishwambhar Bhat"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636371648,"creation_date":1636371648,"answer_id":69882901,"question_id":31921939,"body_markdown":"If anybody is facing the CKR_FUNCTION_FAILED under provider exception,then kindly check whether alias name is proper .if there are multiple alias then check one by one in keystore.","title":"Caused by: sun.security.pkcs11.wrapper.PKCS11Exception: CKR_DATA_INVALID","body":"<p>If anybody is facing the CKR_FUNCTION_FAILED under provider exception,then kindly check whether alias name is proper .if there are multiple alias then check one by one in keystore.</p>\n"}],"owner":{"account_id":6766601,"reputation":11,"user_id":5211421,"display_name":"user5211421"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8983,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1694196095,"creation_date":1439216097,"question_id":31921939,"body_markdown":"I&#39;m having problems with my application that generates xml signed, but just happen it on Windows, I don&#39;t have the problem on Linux, proves with jre 7 and jre 8 thanks advance.\r\n\r\n        java.security.ProviderException: sun.security.pkcs11.wrapper.PKCS11Exception: E\r\n    \r\n    \tat sun.security.pkcs11.P11Signature.engineSign(P11Signature.java:547)\r\n    \tat java.security.Signature$Delegate.engineSign(Unknown Source)\r\n    \tat java.security.Signature.sign(Unknown Source)\r\n    \tat org.apache.xml.security.algorithms.implementations.SignatureBaseRSA.engineSign(SignatureBaseRSA.java:130)\r\n    \tat org.apache.xml.security.algorithms.SignatureAlgorithm.sign(SignatureAlgorithm.java:173)\r\n    \tat org.apache.xml.security.signature.XMLSignature.sign(XMLSignature.java:614)\r\n    \tat bo.accl.clientelynx.Signer.firmar(Signer.java:283)\r\n    \tat bo.accl.clientelynx.Signer.sign(Signer.java:168)\r\n    \tat bo.accl.clientelynx.Signer.apply(Signer.java:350)\r\n    \tat bo.accl.clientelynx.Signer.apply(Signer.java:61)\r\n    \tat com.google.common.collect.Iterators$8.transform(Iterators.java:860)\r\n    \tat com.google.common.collect.TransformedIterator.next(TransformedIterator.java:48)\r\n    \tat bo.accl.clientelynx.App$17.doInBackground(App.java:1130)\r\n    \tat bo.accl.clientelynx.App$17.doInBackground(App.java:1095)\r\n    \tat javax.swing.SwingWorker$1.call(Unknown Source)\r\n    \tat java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)\r\n    \tat java.util.concurrent.FutureTask.run(Unknown Source)\r\n    \tat javax.swing.SwingWorker.run(Unknown Source)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\r\n    \tat java.lang.Thread.run(Unknown Source)\r\n    Caused by: sun.security.pkcs11.wrapper.PKCS11Exception: CKR_DATA_INVALID\r\n    \tat sun.security.pkcs11.wrapper.PKCS11.C_Sign(Native Method)\r\n    \tat sun.security.pkcs11.P11Signature.engineSign(P11Signature.java:538)\r\n\r\n","title":"Caused by: sun.security.pkcs11.wrapper.PKCS11Exception: CKR_DATA_INVALID","body":"<p>I'm having problems with my application that generates xml signed, but just happen it on Windows, I don't have the problem on Linux, proves with jre 7 and jre 8 thanks advance.</p>\n\n<pre><code>    java.security.ProviderException: sun.security.pkcs11.wrapper.PKCS11Exception: E\n\n    at sun.security.pkcs11.P11Signature.engineSign(P11Signature.java:547)\n    at java.security.Signature$Delegate.engineSign(Unknown Source)\n    at java.security.Signature.sign(Unknown Source)\n    at org.apache.xml.security.algorithms.implementations.SignatureBaseRSA.engineSign(SignatureBaseRSA.java:130)\n    at org.apache.xml.security.algorithms.SignatureAlgorithm.sign(SignatureAlgorithm.java:173)\n    at org.apache.xml.security.signature.XMLSignature.sign(XMLSignature.java:614)\n    at bo.accl.clientelynx.Signer.firmar(Signer.java:283)\n    at bo.accl.clientelynx.Signer.sign(Signer.java:168)\n    at bo.accl.clientelynx.Signer.apply(Signer.java:350)\n    at bo.accl.clientelynx.Signer.apply(Signer.java:61)\n    at com.google.common.collect.Iterators$8.transform(Iterators.java:860)\n    at com.google.common.collect.TransformedIterator.next(TransformedIterator.java:48)\n    at bo.accl.clientelynx.App$17.doInBackground(App.java:1130)\n    at bo.accl.clientelynx.App$17.doInBackground(App.java:1095)\n    at javax.swing.SwingWorker$1.call(Unknown Source)\n    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)\n    at java.util.concurrent.FutureTask.run(Unknown Source)\n    at javax.swing.SwingWorker.run(Unknown Source)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n    at java.lang.Thread.run(Unknown Source)\nCaused by: sun.security.pkcs11.wrapper.PKCS11Exception: CKR_DATA_INVALID\n    at sun.security.pkcs11.wrapper.PKCS11.C_Sign(Native Method)\n    at sun.security.pkcs11.P11Signature.engineSign(P11Signature.java:538)\n</code></pre>\n"},{"tags":["java","spring-boot","docker","docker-compose"],"answers":[{"tags":[],"owner":{"account_id":1473276,"reputation":111009,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1694194905,"creation_date":1694194905,"answer_id":77068929,"question_id":77065832,"body_markdown":"Spring Boot&#39;s Docker Compose integration requires Docker to run the containers listed in your `compose.yaml` file. Your app should not be one of those services. The services should be only the things upon which your app depends. In your case that would appear to just be Postgres.\r\n\r\nTo use the Docker Compose integration, you start your application by running its main method in your IDE. As part of starting up, Spring Boot will then call `docker compose up` to ensure that the services upon which it depends are available.\r\n\r\nIf you don&#39;t have Docker installed then you can&#39;t use Docker Compose and, therefore, can&#39;t use Spring Boot&#39;s Docker Compose integration. You can either remove the `spring-boot-docker-compose` dependency from your app or set `spring.docker.compose.enabled` to disable it.","title":"how to run SpringBoot App with dependency `spring-boot-docker-compose` locally outside of docker?","body":"<p>Spring Boot's Docker Compose integration requires Docker to run the containers listed in your <code>compose.yaml</code> file. Your app should not be one of those services. The services should be only the things upon which your app depends. In your case that would appear to just be Postgres.</p>\n<p>To use the Docker Compose integration, you start your application by running its main method in your IDE. As part of starting up, Spring Boot will then call <code>docker compose up</code> to ensure that the services upon which it depends are available.</p>\n<p>If you don't have Docker installed then you can't use Docker Compose and, therefore, can't use Spring Boot's Docker Compose integration. You can either remove the <code>spring-boot-docker-compose</code> dependency from your app or set <code>spring.docker.compose.enabled</code> to disable it.</p>\n"}],"owner":{"account_id":9013194,"reputation":220,"user_id":10663941,"display_name":"The Prototype"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":253,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77068929,"answer_count":1,"score":1,"last_activity_date":1694194905,"creation_date":1694166336,"question_id":77065832,"body_markdown":"Using the website https://start.spring.io / I have created a new spring boot project.\r\n\r\nI am add to dependencies &#39;Docker Compose Support&#39;\r\n[![Docker Compose Support from start.spring.io][1]][1]\r\n\r\nNow, when I try to run the application locally, I get an error that docker was not found. But I don&#39;t want to run the application locally in docker during development. On debian, where docker is installed, the application runs without problems, but how do I run it locally OUTSIDE of docker?\r\n[![Run from IDEA on remote(virtual box) Debian][2]][2]\r\n\r\nThe main reason is that every time you change the application, you need to recreate the image, which is wildly inconvenient.\r\n\r\nI&#39;ve been working with docker since yesterday.\r\n\r\n[![IDEA Run configuration][3]][3]\r\n[![IDea run configuration local machine][4]][4]\r\n[![Unable to start docker process. Is docker correctly installed?][5]][5]\r\n\r\napplication.yaml:\r\n```yml\r\nserver:\r\n  port: 8080\r\nspring:\r\n  devtools:\r\n    add-properties: false\r\n  datasource:\r\n    driver-class-name: org.postgresql.Driver\r\n  jpa:\r\n    show-sql: true\r\n    properties:\r\n      hibernate:\r\n        format_sql: true\r\n    database-platform: org.hibernate.dialect.PostgreSQLDialect\r\n\r\nlogging:\r\n  file:\r\n    name: &#39;./logs/app-backend.log&#39;\r\n  level:\r\n    com.prototype.app: INFO\r\n  logback:\r\n    rollingpolicy:\r\n      file-name-pattern: &#39;./logs/archived/app-backend-%d{yyyy-MM-dd}-%i.log.gz&#39;\r\n      max-file-size: 10MB\r\n      total-size-cap: 1GB\r\n      max-history: 60\r\n```\r\n[![app configs structure][6]][6]\r\n\r\nDockerfile:\r\n```docker\r\n# Build stage\r\nFROM gradle:8.3.0-jdk20 AS BUILD\r\nWORKDIR /usr/app/\r\nCOPY . .\r\nRUN gradle clean build -x test\r\n\r\n# Package stage\r\nFROM eclipse-temurin:20.0.2_9-jdk\r\nENV JAR_NAME=app-backend-0.0.1-SNAPSHOT.jar\r\nENV APP_HOME=/usr/app/\r\nWORKDIR $APP_HOME\r\nCOPY --from=BUILD $APP_HOME .\r\nEXPOSE 8080\r\nENTRYPOINT exec java -jar $APP_HOME/build/libs/$JAR_NAME --spring.profiles.active=dev\r\n```\r\n\r\ndocker-compose.yaml:\r\n```docker\r\nservices:\r\n  app:\r\n    image: &#39;docker-spring-boot-postgres:latest&#39;\r\n    container_name: &#39;app&#39;\r\n    build:\r\n      context: &#39;.&#39;\r\n    depends_on:\r\n      &#39;postgres-db&#39;:\r\n        condition: service_healthy\r\n    volumes:\r\n      - &#39;postgres-db:/data/postgres&#39;\r\n    environment:\r\n      - &#39;SPRING_DATASOURCE_URL=jdbc:postgresql://postgres-db:5432/mydatabase&#39;\r\n      - &#39;SPRING_DATASOURCE_USERNAME=myuser&#39;\r\n      - &#39;SPRING_DATASOURCE_PASSWORD=secret&#39;\r\n      - &#39;SPRING_JPA_HIBERNATE_DDL_AUTO=validate&#39;\r\n    ports:\r\n      - &quot;8081:8080&quot;\r\n    networks:\r\n      - &#39;postgres-db&#39;\r\n    restart: &#39;always&#39;\r\n\r\n  postgres-db:\r\n    image: &#39;postgres:latest&#39;\r\n    container_name: &#39;postgres-db&#39;\r\n    environment:\r\n      - &#39;POSTGRES_DB=mydatabase&#39;\r\n      - &#39;POSTGRES_PASSWORD=secret&#39;\r\n      - &#39;POSTGRES_USER=myuser&#39;\r\n    volumes:\r\n      - &#39;postgres-db:/data/postgres&#39;\r\n    ports:\r\n      - &#39;5432:5432&#39;\r\n    networks:\r\n      - &#39;postgres-db&#39;\r\n    restart: &#39;unless-stopped&#39;\r\n    healthcheck:\r\n      test: pg_isready -U myuser -d mydatabase\r\n      interval: 10s\r\n      timeout: 3s\r\n      retries: 3\r\n\r\nnetworks:\r\n  postgres-db:\r\n    driver: &#39;bridge&#39;\r\n\r\nvolumes:\r\n  postgres-db:\r\n```\r\n\r\nIf you notice obvious errors in the docker configuration, please report it, I have configured this for the first time.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/8r1rc.png\r\n  [2]: https://i.stack.imgur.com/T12vQ.png\r\n  [3]: https://i.stack.imgur.com/xrXSC.png\r\n  [4]: https://i.stack.imgur.com/eX1Dg.png\r\n  [5]: https://i.stack.imgur.com/Ydp5p.png\r\n  [6]: https://i.stack.imgur.com/03R7I.png","title":"how to run SpringBoot App with dependency `spring-boot-docker-compose` locally outside of docker?","body":"<p>Using the website <a href=\"https://start.spring.io\" rel=\"nofollow noreferrer\">https://start.spring.io</a> / I have created a new spring boot project.</p>\n<p>I am add to dependencies 'Docker Compose Support'\n<a href=\"https://i.stack.imgur.com/8r1rc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8r1rc.png\" alt=\"Docker Compose Support from start.spring.io\" /></a></p>\n<p>Now, when I try to run the application locally, I get an error that docker was not found. But I don't want to run the application locally in docker during development. On debian, where docker is installed, the application runs without problems, but how do I run it locally OUTSIDE of docker?\n<a href=\"https://i.stack.imgur.com/T12vQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/T12vQ.png\" alt=\"Run from IDEA on remote(virtual box) Debian\" /></a></p>\n<p>The main reason is that every time you change the application, you need to recreate the image, which is wildly inconvenient.</p>\n<p>I've been working with docker since yesterday.</p>\n<p><a href=\"https://i.stack.imgur.com/xrXSC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xrXSC.png\" alt=\"IDEA Run configuration\" /></a>\n<a href=\"https://i.stack.imgur.com/eX1Dg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eX1Dg.png\" alt=\"IDea run configuration local machine\" /></a>\n<a href=\"https://i.stack.imgur.com/Ydp5p.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ydp5p.png\" alt=\"Unable to start docker process. Is docker correctly installed?\" /></a></p>\n<p>application.yaml:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>server:\n  port: 8080\nspring:\n  devtools:\n    add-properties: false\n  datasource:\n    driver-class-name: org.postgresql.Driver\n  jpa:\n    show-sql: true\n    properties:\n      hibernate:\n        format_sql: true\n    database-platform: org.hibernate.dialect.PostgreSQLDialect\n\nlogging:\n  file:\n    name: './logs/app-backend.log'\n  level:\n    com.prototype.app: INFO\n  logback:\n    rollingpolicy:\n      file-name-pattern: './logs/archived/app-backend-%d{yyyy-MM-dd}-%i.log.gz'\n      max-file-size: 10MB\n      total-size-cap: 1GB\n      max-history: 60\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/03R7I.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/03R7I.png\" alt=\"app configs structure\" /></a></p>\n<p>Dockerfile:</p>\n<pre><code># Build stage\nFROM gradle:8.3.0-jdk20 AS BUILD\nWORKDIR /usr/app/\nCOPY . .\nRUN gradle clean build -x test\n\n# Package stage\nFROM eclipse-temurin:20.0.2_9-jdk\nENV JAR_NAME=app-backend-0.0.1-SNAPSHOT.jar\nENV APP_HOME=/usr/app/\nWORKDIR $APP_HOME\nCOPY --from=BUILD $APP_HOME .\nEXPOSE 8080\nENTRYPOINT exec java -jar $APP_HOME/build/libs/$JAR_NAME --spring.profiles.active=dev\n</code></pre>\n<p>docker-compose.yaml:</p>\n<pre><code>services:\n  app:\n    image: 'docker-spring-boot-postgres:latest'\n    container_name: 'app'\n    build:\n      context: '.'\n    depends_on:\n      'postgres-db':\n        condition: service_healthy\n    volumes:\n      - 'postgres-db:/data/postgres'\n    environment:\n      - 'SPRING_DATASOURCE_URL=jdbc:postgresql://postgres-db:5432/mydatabase'\n      - 'SPRING_DATASOURCE_USERNAME=myuser'\n      - 'SPRING_DATASOURCE_PASSWORD=secret'\n      - 'SPRING_JPA_HIBERNATE_DDL_AUTO=validate'\n    ports:\n      - &quot;8081:8080&quot;\n    networks:\n      - 'postgres-db'\n    restart: 'always'\n\n  postgres-db:\n    image: 'postgres:latest'\n    container_name: 'postgres-db'\n    environment:\n      - 'POSTGRES_DB=mydatabase'\n      - 'POSTGRES_PASSWORD=secret'\n      - 'POSTGRES_USER=myuser'\n    volumes:\n      - 'postgres-db:/data/postgres'\n    ports:\n      - '5432:5432'\n    networks:\n      - 'postgres-db'\n    restart: 'unless-stopped'\n    healthcheck:\n      test: pg_isready -U myuser -d mydatabase\n      interval: 10s\n      timeout: 3s\n      retries: 3\n\nnetworks:\n  postgres-db:\n    driver: 'bridge'\n\nvolumes:\n  postgres-db:\n</code></pre>\n<p>If you notice obvious errors in the docker configuration, please report it, I have configured this for the first time.</p>\n"},{"tags":["java","gradle","build.gradle","gradle-kotlin-dsl","gradle-dependencies"],"answers":[{"tags":[],"owner":{"account_id":31011,"reputation":122006,"user_id":84889,"display_name":"Peter Niederwieser"},"comment_count":0,"down_vote_count":0,"up_vote_count":35,"is_accepted":false,"score":35,"last_activity_date":1392322039,"creation_date":1392322039,"answer_id":21764418,"question_id":21764128,"body_markdown":"Your approach is correct. (Depending on the circumstances, you might want to use `configurations.all { exclude ... }`.) If these excludes really exclude more than a single dependency (I haven&#39;t ever noticed that when using them), please file a bug at http://forums.gradle.org, ideally with a reproducible example.","title":"How do I exclude all instances of a transitive dependency when using Gradle?","body":"<p>Your approach is correct. (Depending on the circumstances, you might want to use <code>configurations.all { exclude ... }</code>.) If these excludes really exclude more than a single dependency (I haven't ever noticed that when using them), please file a bug at <a href=\"http://forums.gradle.org\">http://forums.gradle.org</a>, ideally with a reproducible example.</p>\n"},{"comments":[{"owner":{"account_id":1204476,"reputation":5633,"user_id":1174467,"display_name":"superEb"},"score":2,"creation_date":1392326914,"post_id":21765656,"comment_id":32926185,"body_markdown":"This seems like better discussion for the [Gradle forums](http://forums.gradle.org/gradle).","body":"This seems like better discussion for the <a href=\"http://forums.gradle.org/gradle\" rel=\"nofollow noreferrer\">Gradle forums</a>."},{"owner":{"account_id":1965722,"reputation":4269,"user_id":1766065,"accept_rate":57,"display_name":"Jens D"},"score":0,"creation_date":1392328390,"post_id":21765656,"comment_id":32927087,"body_markdown":"So done - http://forums.gradle.org/gradle/topics/what_exactly_is_a_module_as_defined_by_gradle_dependencies","body":"So done - <a href=\"http://forums.gradle.org/gradle/topics/what_exactly_is_a_module_as_defined_by_gradle_dependencies\" rel=\"nofollow noreferrer\">forums.gradle.org/gradle/topics/&hellip;</a>"},{"owner":{"account_id":1015031,"reputation":163,"user_id":1026785,"display_name":"cjbooms"},"score":21,"creation_date":1461336840,"post_id":21765656,"comment_id":61168345,"body_markdown":"Ugh, I just struggled with this exact issue. I find it so exceptionally difficult to do anything with gradle, especially resolve conflicts on a large project. I&#39;d happily take verbose xml with xsd validation over gradle&#39;s dsl","body":"Ugh, I just struggled with this exact issue. I find it so exceptionally difficult to do anything with gradle, especially resolve conflicts on a large project. I&#39;d happily take verbose xml with xsd validation over gradle&#39;s dsl"},{"owner":{"account_id":969372,"reputation":128,"user_id":992200,"display_name":"GuyK"},"score":2,"creation_date":1479514036,"post_id":21765656,"comment_id":68606031,"body_markdown":"The &quot;name:&quot; should be &quot;module:&quot;, then it will work for u :)","body":"The &quot;name:&quot; should be &quot;module:&quot;, then it will work for u :)"},{"owner":{"account_id":1071023,"reputation":143,"user_id":1070304,"display_name":"sfdurbano"},"score":1,"creation_date":1488463079,"post_id":21765656,"comment_id":72249106,"body_markdown":"For the benefit of future me and others, I wanted to exclude ALL dependency libraries (Gradle 3.3) from my war package. So rather than list out each one, I simply did `configurations { runtime.exclude group: &#39;*&#39; }`.","body":"For the benefit of future me and others, I wanted to exclude ALL dependency libraries (Gradle 3.3) from my war package. So rather than list out each one, I simply did <code>configurations { runtime.exclude group: &#39;*&#39; }</code>."},{"owner":{"account_id":192003,"reputation":30422,"user_id":432903,"accept_rate":64,"display_name":"prayagupa"},"score":1,"creation_date":1603413593,"post_id":21765656,"comment_id":114037495,"body_markdown":"there is no name object, I had to use `module`. example : `exclude group: &quot;org.apache.logging.log4j&quot;, module: &quot;log4j-slf4j-impl&quot;`","body":"there is no name object, I had to use <code>module</code>. example : <code>exclude group: &quot;org.apache.logging.log4j&quot;, module: &quot;log4j-slf4j-impl&quot;</code>"},{"owner":{"account_id":8435883,"reputation":924,"user_id":6330089,"display_name":"Nifal Nizar"},"score":0,"creation_date":1608739454,"post_id":21765656,"comment_id":115672379,"body_markdown":"Type com.facebook.react.bridge.ReactMethod is defined multiple times\nHow can I solve this","body":"Type com.facebook.react.bridge.ReactMethod is defined multiple times How can I solve this"},{"owner":{"account_id":4829496,"reputation":679,"user_id":4781155,"accept_rate":40,"display_name":"mark ortiz"},"score":0,"creation_date":1611980906,"post_id":21765656,"comment_id":116630464,"body_markdown":"this can still cause an issue if other dependencies have same transitive dependency, use configuration exclude instead https://stackoverflow.com/a/48968390/4781155","body":"this can still cause an issue if other dependencies have same transitive dependency, use configuration exclude instead <a href=\"https://stackoverflow.com/a/48968390/4781155\">stackoverflow.com/a/48968390/4781155</a>"}],"tags":[],"owner":{"account_id":1965722,"reputation":4269,"user_id":1766065,"accept_rate":57,"display_name":"Jens D"},"comment_count":8,"down_vote_count":0,"up_vote_count":192,"is_accepted":true,"score":192,"last_activity_date":1651163171,"creation_date":1392326215,"answer_id":21765656,"question_id":21764128,"body_markdown":"Ah, the following works and does what I want:\r\n\r\n    configurations {\r\n      runtime.exclude group: &quot;org.slf4j&quot;, module: &quot;slf4j-log4j12&quot;\r\n    }\r\n\r\nIt seems that an [Exclude Rule](http://www.gradle.org/docs/current/javadoc/org/gradle/api/artifacts/ExcludeRule.html) only has two attributes - `group` and `module`.  \r\nHence for excluding from only an individual dependency, we can do something like:\r\n\r\n    dependencies {\r\n      compile (&#39;org.springframework.data:spring-data-hadoop-core:2.0.0.M4-hadoop22&#39;) {\r\n        exclude group: &quot;org.slf4j&quot;, module: &quot;slf4j-log4j12&quot;\r\n      }\r\n    }\r\n\r\n---\r\n\r\nHowever, the above syntax doesn&#39;t prevent you from specifying any arbitrary property as a predicate. When trying to exclude from an individual dependency you cannot specify arbitrary properties. For example, this fails:\r\n\r\n    dependencies {\r\n      compile (&#39;org.springframework.data:spring-data-hadoop-core:2.0.0.M4-hadoop22&#39;) {\r\n        exclude group: &quot;org.slf4j&quot;, name: &quot;slf4j-log4j12&quot;\r\n      }\r\n    }\r\n\r\nwith\r\n\r\n    No such property: name for class: org.gradle.api.internal.artifacts.DefaultExcludeRule\r\n\r\nSo even though you can specify a dependency with a `group:` and `name:` you can&#39;t specify an exclusion with a `name:`!?!\r\n\r\nPerhaps a separate question, but what **exactly** is a _module_ then? I can understand the Maven notion of groupId:artifactId:version, which I understand translates to group:name:version in Gradle. But then, how do I know what module (in gradle-speak) a particular Maven artifact belongs to?","title":"How do I exclude all instances of a transitive dependency when using Gradle?","body":"<p>Ah, the following works and does what I want:</p>\n<pre><code>configurations {\n  runtime.exclude group: &quot;org.slf4j&quot;, module: &quot;slf4j-log4j12&quot;\n}\n</code></pre>\n<p>It seems that an <a href=\"http://www.gradle.org/docs/current/javadoc/org/gradle/api/artifacts/ExcludeRule.html\" rel=\"noreferrer\">Exclude Rule</a> only has two attributes - <code>group</code> and <code>module</code>.<br />\nHence for excluding from only an individual dependency, we can do something like:</p>\n<pre><code>dependencies {\n  compile ('org.springframework.data:spring-data-hadoop-core:2.0.0.M4-hadoop22') {\n    exclude group: &quot;org.slf4j&quot;, module: &quot;slf4j-log4j12&quot;\n  }\n}\n</code></pre>\n<hr />\n<p>However, the above syntax doesn't prevent you from specifying any arbitrary property as a predicate. When trying to exclude from an individual dependency you cannot specify arbitrary properties. For example, this fails:</p>\n<pre><code>dependencies {\n  compile ('org.springframework.data:spring-data-hadoop-core:2.0.0.M4-hadoop22') {\n    exclude group: &quot;org.slf4j&quot;, name: &quot;slf4j-log4j12&quot;\n  }\n}\n</code></pre>\n<p>with</p>\n<pre><code>No such property: name for class: org.gradle.api.internal.artifacts.DefaultExcludeRule\n</code></pre>\n<p>So even though you can specify a dependency with a <code>group:</code> and <code>name:</code> you can't specify an exclusion with a <code>name:</code>!?!</p>\n<p>Perhaps a separate question, but what <strong>exactly</strong> is a <em>module</em> then? I can understand the Maven notion of groupId:artifactId:version, which I understand translates to group:name:version in Gradle. But then, how do I know what module (in gradle-speak) a particular Maven artifact belongs to?</p>\n"},{"tags":[],"owner":{"account_id":2659819,"reputation":6153,"user_id":2299789,"accept_rate":62,"display_name":"BERGUIGA Mohamed Amine"},"comment_count":0,"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1578473925,"creation_date":1449577743,"answer_id":34155950,"question_id":21764128,"body_markdown":"in the example below I exclude \r\n\r\n&gt; spring-boot-starter-tomcat\r\n\r\n\t    \r\n    compile(&quot;org.springframework.boot:spring-boot-starter-web&quot;) {\r\n         //by both name and group\r\n\t     exclude group: &#39;org.springframework.boot&#39;, module: &#39;spring-boot-starter-tomcat&#39; \r\n\t}","title":"How do I exclude all instances of a transitive dependency when using Gradle?","body":"<p>in the example below I exclude </p>\n\n<blockquote>\n  <p>spring-boot-starter-tomcat</p>\n</blockquote>\n\n<pre><code>compile(\"org.springframework.boot:spring-boot-starter-web\") {\n     //by both name and group\n     exclude group: 'org.springframework.boot', module: 'spring-boot-starter-tomcat' \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1072255,"reputation":851,"user_id":1071247,"display_name":"venom.unleashed"},"comment_count":0,"down_vote_count":0,"up_vote_count":75,"is_accepted":false,"score":75,"last_activity_date":1490083386,"creation_date":1490083386,"answer_id":42921322,"question_id":21764128,"body_markdown":"For excluding one or more library globally add the following to your build.gradle\r\n\r\n    configurations.all {\r\n       exclude group:&quot;org.apache.geronimo.specs&quot;, module: &quot;geronimo-servlet_2.5_spec&quot;\r\n       exclude group:&quot;ch.qos.logback&quot;, module:&quot;logback-core&quot;\r\n    }\r\n\r\nNow the exclude block has two properties **group** and **module**. For those of you coming from maven background, **group** is same as **groupId** and **module** is same as **artifactId**.\r\nExample: To exclude com.mchange:c3p0:0.9.2.1 following should be exclude block \r\n\r\n    exclude group:&quot;com.mchange&quot;, module:&quot;c3p0&quot;","title":"How do I exclude all instances of a transitive dependency when using Gradle?","body":"<p>For excluding one or more library globally add the following to your build.gradle</p>\n\n<pre><code>configurations.all {\n   exclude group:\"org.apache.geronimo.specs\", module: \"geronimo-servlet_2.5_spec\"\n   exclude group:\"ch.qos.logback\", module:\"logback-core\"\n}\n</code></pre>\n\n<p>Now the exclude block has two properties <strong>group</strong> and <strong>module</strong>. For those of you coming from maven background, <strong>group</strong> is same as <strong>groupId</strong> and <strong>module</strong> is same as <strong>artifactId</strong>.\nExample: To exclude com.mchange:c3p0:0.9.2.1 following should be exclude block </p>\n\n<pre><code>exclude group:\"com.mchange\", module:\"c3p0\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4829496,"reputation":679,"user_id":4781155,"accept_rate":40,"display_name":"mark ortiz"},"comment_count":0,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1519512154,"creation_date":1519512154,"answer_id":48968390,"question_id":21764128,"body_markdown":"I was using spring boot 1.5.10 and tries to exclude logback, the given solution above did not work well, I use configurations instead\r\n\r\n    configurations.all {\r\n        exclude group: &quot;org.springframework.boot&quot;, module:&quot;spring-boot-starter-logging&quot;\r\n    }","title":"How do I exclude all instances of a transitive dependency when using Gradle?","body":"<p>I was using spring boot 1.5.10 and tries to exclude logback, the given solution above did not work well, I use configurations instead</p>\n\n<pre><code>configurations.all {\n    exclude group: \"org.springframework.boot\", module:\"spring-boot-starter-logging\"\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11312519,"reputation":3618,"user_id":8295283,"accept_rate":100,"display_name":"Arnold Schrijver"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1553428280,"creation_date":1553428280,"answer_id":55323490,"question_id":21764128,"body_markdown":"In addition to what @berguiga-mohamed-amine stated, I just found that a wildcard requires leaving the module argument the empty string:\r\n\r\n    compile (&quot;com.github.jsonld-java:jsonld-java:$jsonldJavaVersion&quot;) {\r\n        exclude group: &#39;org.apache.httpcomponents&#39;, module: &#39;&#39;\r\n        exclude group: &#39;org.slf4j&#39;, module: &#39;&#39;\r\n    }","title":"How do I exclude all instances of a transitive dependency when using Gradle?","body":"<p>In addition to what @berguiga-mohamed-amine stated, I just found that a wildcard requires leaving the module argument the empty string:</p>\n\n<pre><code>compile (\"com.github.jsonld-java:jsonld-java:$jsonldJavaVersion\") {\n    exclude group: 'org.apache.httpcomponents', module: ''\n    exclude group: 'org.slf4j', module: ''\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5240236,"reputation":3531,"user_id":4187541,"accept_rate":80,"display_name":"Peter Chaula"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1637413144,"creation_date":1637413144,"answer_id":70046134,"question_id":21764128,"body_markdown":"`compile` is deprecated and it was replaced by `implementation`. Therefore, the solution for those running newer versions of gradle:\r\n\r\n    implementation(&quot;org.springframework.boot:spring-boot-starter-web&quot;) {\r\n         exclude group: &#39;org.springframework.boot&#39;, module: &#39;spring-boot-starter-tomcat&#39; \r\n    }","title":"How do I exclude all instances of a transitive dependency when using Gradle?","body":"<p><code>compile</code> is deprecated and it was replaced by <code>implementation</code>. Therefore, the solution for those running newer versions of gradle:</p>\n<pre><code>implementation(&quot;org.springframework.boot:spring-boot-starter-web&quot;) {\n     exclude group: 'org.springframework.boot', module: 'spring-boot-starter-tomcat' \n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":13430029,"reputation":945,"user_id":9690114,"display_name":"RomanMitasov"},"score":1,"creation_date":1678006238,"post_id":71091566,"comment_id":133446598,"body_markdown":"Consider using `configureEach` instead of `all` to avoid unnecessary configuration","body":"Consider using <code>configureEach</code> instead of <code>all</code> to avoid unnecessary configuration"}],"tags":[],"owner":{"account_id":11726648,"reputation":19553,"user_id":8583692,"display_name":"Mahozad"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1694194603,"creation_date":1644666303,"answer_id":71091566,"question_id":21764128,"body_markdown":"This is for [Kotlin DSL][1] (build.gradle.**kts**) which prevents you from using wrong properties.\r\n\r\nExclude the library from all configrations (`implementation`, `runtimeOnly`, etc.):\r\n\r\n```kotlin\r\nconfigurations.all {\r\n    exclude(group = &quot;ir.mahozad.android&quot;, module = &quot;pie-chart&quot;)\r\n    // OR exclude(&quot;ir.mahozad.android&quot;, &quot;pie-chart&quot;)\r\n}\r\n\r\n// Another notation:\r\n// configurations {\r\n//     all {\r\n//         exclude(group = &quot;ir.mahozad.android&quot;, module = &quot;pie-chart&quot;)\r\n//     }\r\n// }\r\n```\r\n\r\nExclude the library from a single configuration (like `implementation`):\r\n\r\n```kotlin\r\nconfigurations.implementation {\r\n    exclude(group = &quot;ir.mahozad.android&quot;, module = &quot;pie-chart&quot;)\r\n}\r\n\r\n// Another notation:\r\n// configurations {\r\n//     implementation {\r\n//         exclude(group = &quot;ir.mahozad.android&quot;, module = &quot;pie-chart&quot;)\r\n//     }\r\n// }\r\n```\r\n\r\nExclude the library for a single dependency:\r\n\r\n```kotlin\r\ndependencies {\r\n    // ...\r\n    implementation(&quot;ir.mahozad.android:charts:1.2.3&quot;) {\r\n        exclude(group = &quot;ir.mahozad.android&quot;, module = &quot;pie-chart&quot;)\r\n    }\r\n}\r\n```\r\n\r\n\r\n  [1]: https://docs.gradle.org/current/userguide/kotlin_dsl.html","title":"How do I exclude all instances of a transitive dependency when using Gradle?","body":"<p>This is for <a href=\"https://docs.gradle.org/current/userguide/kotlin_dsl.html\" rel=\"nofollow noreferrer\">Kotlin DSL</a> (build.gradle.<strong>kts</strong>) which prevents you from using wrong properties.</p>\n<p>Exclude the library from all configrations (<code>implementation</code>, <code>runtimeOnly</code>, etc.):</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>configurations.all {\n    exclude(group = &quot;ir.mahozad.android&quot;, module = &quot;pie-chart&quot;)\n    // OR exclude(&quot;ir.mahozad.android&quot;, &quot;pie-chart&quot;)\n}\n\n// Another notation:\n// configurations {\n//     all {\n//         exclude(group = &quot;ir.mahozad.android&quot;, module = &quot;pie-chart&quot;)\n//     }\n// }\n</code></pre>\n<p>Exclude the library from a single configuration (like <code>implementation</code>):</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>configurations.implementation {\n    exclude(group = &quot;ir.mahozad.android&quot;, module = &quot;pie-chart&quot;)\n}\n\n// Another notation:\n// configurations {\n//     implementation {\n//         exclude(group = &quot;ir.mahozad.android&quot;, module = &quot;pie-chart&quot;)\n//     }\n// }\n</code></pre>\n<p>Exclude the library for a single dependency:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>dependencies {\n    // ...\n    implementation(&quot;ir.mahozad.android:charts:1.2.3&quot;) {\n        exclude(group = &quot;ir.mahozad.android&quot;, module = &quot;pie-chart&quot;)\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1965722,"reputation":4269,"user_id":1766065,"accept_rate":57,"display_name":"Jens D"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":259932,"favorite_count":0,"down_vote_count":0,"up_vote_count":157,"accepted_answer_id":21765656,"answer_count":8,"score":157,"last_activity_date":1694194603,"creation_date":1392320963,"question_id":21764128,"body_markdown":"My gradle project uses the `application` plugin to build a jar file. As part of the runtime transitive dependencies, I end up pulling in `org.slf4j:slf4j-log4j12`. (It&#39;s referenced as a sub-transitive dependency in at least 5 or 6 other transitive dependencies - this project is using spring and hadoop, so everything but the kitchen sink is getting pulled in... no wait... that&#39;s there too :) ).\r\n\r\nI want to globally exclude the `slf4j-log4j12` jar from my built jar. So I&#39;ve tried this:\r\n\r\n    configurations {\r\n      runtime.exclude group: &quot;org.slf4j&quot;, name: &quot;slf4j-log4j12&quot;\r\n    }\r\n\r\nHowever, this seems to exclude **all** `org.slf4j` artifacts including `slf4j-api`. When running under debug mode I see lines such as:\r\n\r\n    org.slf4j#slf4j-api is excluded from com.pivotal.gfxd:gfxd-demo-mapreduce:1.0(runtime).\r\n    org.slf4j#slf4j-simple is excluded from com.pivotal.gfxd:gfxd-demo-mapreduce:1.0(runtime).\r\n    org.slf4j#slf4j-log4j12 is excluded from org.apache.hadoop:hadoop-common:2.2.0(runtime).\r\n\r\nI do not want to have to look up the source of each `slf4j-log4j12` transitive dependency and then have individual `compile foo { exclude slf4j... }` statements in my `dependencies` block.\r\n\r\n**Update:**\r\n\r\nI did also try this:\r\n\r\n    configurations {\r\n      runtime.exclude name: &quot;slf4j-log4j12&quot;\r\n    }\r\n\r\nWhich ends up excluding **everything** from the build! As though I specified `group: &quot;*&quot;`.\r\n\r\n**Update 2:**\r\n\r\nI&#39;m using Gradle version 1.10 for this.\r\n","title":"How do I exclude all instances of a transitive dependency when using Gradle?","body":"<p>My gradle project uses the <code>application</code> plugin to build a jar file. As part of the runtime transitive dependencies, I end up pulling in <code>org.slf4j:slf4j-log4j12</code>. (It's referenced as a sub-transitive dependency in at least 5 or 6 other transitive dependencies - this project is using spring and hadoop, so everything but the kitchen sink is getting pulled in... no wait... that's there too :) ).</p>\n\n<p>I want to globally exclude the <code>slf4j-log4j12</code> jar from my built jar. So I've tried this:</p>\n\n<pre><code>configurations {\n  runtime.exclude group: \"org.slf4j\", name: \"slf4j-log4j12\"\n}\n</code></pre>\n\n<p>However, this seems to exclude <strong>all</strong> <code>org.slf4j</code> artifacts including <code>slf4j-api</code>. When running under debug mode I see lines such as:</p>\n\n<pre><code>org.slf4j#slf4j-api is excluded from com.pivotal.gfxd:gfxd-demo-mapreduce:1.0(runtime).\norg.slf4j#slf4j-simple is excluded from com.pivotal.gfxd:gfxd-demo-mapreduce:1.0(runtime).\norg.slf4j#slf4j-log4j12 is excluded from org.apache.hadoop:hadoop-common:2.2.0(runtime).\n</code></pre>\n\n<p>I do not want to have to look up the source of each <code>slf4j-log4j12</code> transitive dependency and then have individual <code>compile foo { exclude slf4j... }</code> statements in my <code>dependencies</code> block.</p>\n\n<p><strong>Update:</strong></p>\n\n<p>I did also try this:</p>\n\n<pre><code>configurations {\n  runtime.exclude name: \"slf4j-log4j12\"\n}\n</code></pre>\n\n<p>Which ends up excluding <strong>everything</strong> from the build! As though I specified <code>group: \"*\"</code>.</p>\n\n<p><strong>Update 2:</strong></p>\n\n<p>I'm using Gradle version 1.10 for this.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1551563520,"post_id":54963337,"comment_id":96687588,"body_markdown":"Possible duplicate of [Copying a HashMap in Java](https://stackoverflow.com/questions/10079266/copying-a-hashmap-in-java)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/10079266/copying-a-hashmap-in-java\">Copying a HashMap in Java</a>"}],"answers":[{"comments":[{"owner":{"account_id":1266843,"reputation":93064,"user_id":1223975,"accept_rate":54,"display_name":"Alexander Mills"},"score":1,"creation_date":1551566044,"post_id":54963366,"comment_id":96688220,"body_markdown":"so that might be `new ArrayList&lt;&gt;(List.of())` right","body":"so that might be <code>new ArrayList&lt;&gt;(List.of())</code> right"},{"owner":{"account_id":45934,"reputation":203679,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":1,"creation_date":1551566102,"post_id":54963366,"comment_id":96688228,"body_markdown":"@AlexanderMills Yes, exactly.","body":"@AlexanderMills Yes, exactly."},{"owner":{"account_id":1726810,"reputation":402,"user_id":1581286,"display_name":"ntrp"},"score":6,"creation_date":1621254752,"post_id":54963366,"comment_id":119431866,"body_markdown":"I am really starting to hate Java slowly.. why every other language can evolve to be expressive while Java has to stay like this? This is th emain reason I will move to Kotlin as soon as possible (and I am not picking Scala just because of impossibility at work)","body":"I am really starting to hate Java slowly.. why every other language can evolve to be expressive while Java has to stay like this? This is th emain reason I will move to Kotlin as soon as possible (and I am not picking Scala just because of impossibility at work)"},{"owner":{"account_id":18420551,"reputation":404,"user_id":13418296,"display_name":"Generous Badger"},"score":2,"creation_date":1631268179,"post_id":54963366,"comment_id":122182072,"body_markdown":"@nrtp: Java is evolving, the uptake is just very slow unfortunately. `List.of()` and `Map.of()` are unfortunately considered *relatively* recent additions, even though Java 9 was released 4 years ago.","body":"@nrtp: Java is evolving, the uptake is just very slow unfortunately. <code>List.of()</code> and <code>Map.of()</code> are unfortunately considered <i>relatively</i> recent additions, even though Java 9 was released 4 years ago."}],"tags":[],"owner":{"account_id":45934,"reputation":203679,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"comment_count":4,"down_vote_count":0,"up_vote_count":73,"is_accepted":true,"score":73,"last_activity_date":1551563454,"creation_date":1551563454,"answer_id":54963366,"question_id":54963337,"body_markdown":"`HashMap` has a constructor that can take another `Map`, so you can create a `HashMap` by passing it whatever `Map.of(...)` produces:\r\n\r\n    HashMap&lt;String, String&gt; map = new HashMap&lt;&gt;(Map.of(&quot;k1&quot;, &quot;v1&quot;, &quot;k2&quot;, &quot;v2&quot;));\r\n\r\nLikewise for `ArrayList` and `List.of(...)`.","title":"Create mutable collections (Map.of and List.of)","body":"<p><code>HashMap</code> has a constructor that can take another <code>Map</code>, so you can create a <code>HashMap</code> by passing it whatever <code>Map.of(...)</code> produces:</p>\n\n<pre><code>HashMap&lt;String, String&gt; map = new HashMap&lt;&gt;(Map.of(\"k1\", \"v1\", \"k2\", \"v2\"));\n</code></pre>\n\n<p>Likewise for <code>ArrayList</code> and <code>List.of(...)</code>.</p>\n"},{"tags":[],"owner":{"account_id":9992410,"reputation":460,"user_id":8710383,"display_name":"Oleksandr"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1631267439,"creation_date":1631266992,"answer_id":69130335,"question_id":54963337,"body_markdown":"I use a custom method inside of the utils class. Please try, it works correctly.\r\n\r\n```    \r\npublic static Map&lt;String, Object&gt; mutableMap(Object... args) {\r\n        return IntStream.iterate(0, i -&gt; i &lt; args.length, i -&gt; i + 2)\r\n                        .filter(i -&gt; i + 1 &lt; args.length)\r\n                        .boxed()\r\n                        .collect(toMap(i -&gt; (String) args[i], i -&gt; args[i + 1], (a, b) -&gt; b, HashMap::new));\r\n}\r\n```\r\n\r\nAlso, you can add validation on paired number of arguments OR add logic to replace the &#39;null&#39; value according to your requires.","title":"Create mutable collections (Map.of and List.of)","body":"<p>I use a custom method inside of the utils class. Please try, it works correctly.</p>\n<pre><code>public static Map&lt;String, Object&gt; mutableMap(Object... args) {\n        return IntStream.iterate(0, i -&gt; i &lt; args.length, i -&gt; i + 2)\n                        .filter(i -&gt; i + 1 &lt; args.length)\n                        .boxed()\n                        .collect(toMap(i -&gt; (String) args[i], i -&gt; args[i + 1], (a, b) -&gt; b, HashMap::new));\n}\n</code></pre>\n<p>Also, you can add validation on paired number of arguments OR add logic to replace the 'null' value according to your requires.</p>\n"},{"tags":[],"owner":{"account_id":21960464,"reputation":294,"user_id":16238436,"display_name":"Todd"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1694193852,"creation_date":1694193852,"answer_id":77068844,"question_id":54963337,"body_markdown":"I would recommend using Javas&#39; &quot;double brace initialization&quot;.  This allows for the nice, short, one-line initialization syntax without creating unnecessary intermediate object instances.\r\n\r\n    HashMap&lt;String, String&gt; mutableMap = new HashMap&lt;&gt;(1) {{ put(&quot;key&quot;, &quot;value&quot;); }};\r\n\r\n","title":"Create mutable collections (Map.of and List.of)","body":"<p>I would recommend using Javas' &quot;double brace initialization&quot;.  This allows for the nice, short, one-line initialization syntax without creating unnecessary intermediate object instances.</p>\n<pre><code>HashMap&lt;String, String&gt; mutableMap = new HashMap&lt;&gt;(1) {{ put(&quot;key&quot;, &quot;value&quot;); }};\n</code></pre>\n"}],"owner":{"account_id":1266843,"reputation":93064,"user_id":1223975,"accept_rate":54,"display_name":"Alexander Mills"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25767,"favorite_count":0,"down_vote_count":0,"up_vote_count":42,"accepted_answer_id":54963366,"answer_count":3,"score":42,"last_activity_date":1694193852,"creation_date":1551563232,"question_id":54963337,"body_markdown":"Looks like `Map.of()` and `List.of()` both create immutable collections. That&#39;s useful, but I am looking for a way to create mutable collections sometimes using a factory method.\r\n\r\nWhen I try: `HashMap.of()` I get this error:\r\n\r\n&gt; Static method may be invoked on containing interface class only","title":"Create mutable collections (Map.of and List.of)","body":"<p>Looks like <code>Map.of()</code> and <code>List.of()</code> both create immutable collections. That's useful, but I am looking for a way to create mutable collections sometimes using a factory method.</p>\n\n<p>When I try: <code>HashMap.of()</code> I get this error:</p>\n\n<blockquote>\n  <p>Static method may be invoked on containing interface class only</p>\n</blockquote>\n"},{"tags":["java","sharepoint","microsoft-graph-api","httpclient"],"owner":{"account_id":29396330,"reputation":1,"user_id":22523599,"display_name":"Thibault Grard"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694193528,"creation_date":1694192918,"question_id":77068757,"body_markdown":"I&#39;m trying to update excel file from microsoft graph api using JAVA 19.\r\n\r\nI tried using JAVA sdk graph APi client v5.0.0 to execute equivalent of:\r\n\r\n```\r\nPATCH https://graph.microsoft.com/v1.0/me/drive/items/{id}/workbook/worksheets/{sheet-id}/range(address=&#39;A1:B2&#39;) Content-type: application/json\r\n\r\n{ &quot;values&quot; : [[&quot;Hello&quot;, &quot;100&quot;],[&quot;1/1/2016&quot;, null]], &quot;formulas&quot; : [[null, null], [null, &quot;=B1*2&quot;]], &quot;numberFormat&quot; : [[null,null], [&quot;m-ddd&quot;, null]] }\r\n```\r\n\r\nBut I was unable to find the good patch() method to do so. I only try the following examples:\r\n```\r\nvar valueOfA1 = _graphApiClient\r\n             .drives(DRIVE_ID)\r\n             .items(ITEM_ID)\r\n             .workbook()\r\n             .worksheets(&quot;Sheet1&quot;)\r\n             .range(WorkbookWorksheetRangeParameterSet.newBuilder()\r\n                     .withAddress(&quot;A1&quot;)\r\n                     .build())\r\n             .buildRequest()\r\n             .get();\r\n```\r\n\r\n[https://github.com/microsoftgraph/msgraph-sdk-java/issues/1063](https://github.com/microsoftgraph/msgraph-sdk-java/issues/1063)\r\n```\r\nWorkbookRangeFill workbookRangeFill = new WorkbookRangeFill(); workbookRangeFill.color = &quot;#00FF00&quot;;\r\n\r\ngraphClient.me().drive().items(&quot;{id}&quot;).workbook().worksheets(&quot;sheet1&quot;)\r\n    .range(WorkbookWorksheetRangeParameterSet\r\n        .newBuilder()\r\n        .withAddress(&quot;$B$1&quot;)\r\n        .build()).format().fill()\r\n    .buildRequest()\r\n    .patch(workbookRangeFill);\r\n```\r\n\r\n[https://github.com/microsoftgraph/msgraph-sdk-java/issues/744](https://github.com/microsoftgraph/msgraph-sdk-java/issues/744)\r\nBut seems there is an issue with address.\r\n\r\n\r\nThen try by Http client:\r\n```\r\nCloseableHttpClient httpClient = HttpClients.createDefault(); \r\nHttpPatch httpPatch = new HttpPatch(&quot;http://graph.microsoft.com/v1.0/drives/{driveId}/items/{itemId}/workbook/worksheets/{name}/range(address=&#39;F10:F12&#39;)&quot;); \r\nhttpPatch.addHeader(&quot;Authorization&quot;, accessToken); \r\nhttpPatch.setEntity(new StringEntity(&quot;{\\&quot;values\\&quot;:[[\\&quot;Hello\\&quot;],[\\&quot;How\\&quot;],[\\&quot;Are You?\\&quot;]]}&quot;, &quot;application/json&quot;, &quot;UTF-8&quot;)); \r\nHttpEntity responseEntity = httpClient.execute(httpPatch).getEntity(); \r\nString responseString = EntityUtils.toString(responseEntity);\r\n```\r\n\r\nResulting in nothing, no error and no content returned and no update range. Does anyone got a working http request ?","title":"Microsoft Graph API Update Range Java","body":"<p>I'm trying to update excel file from microsoft graph api using JAVA 19.</p>\n<p>I tried using JAVA sdk graph APi client v5.0.0 to execute equivalent of:</p>\n<pre><code>PATCH https://graph.microsoft.com/v1.0/me/drive/items/{id}/workbook/worksheets/{sheet-id}/range(address='A1:B2') Content-type: application/json\n\n{ &quot;values&quot; : [[&quot;Hello&quot;, &quot;100&quot;],[&quot;1/1/2016&quot;, null]], &quot;formulas&quot; : [[null, null], [null, &quot;=B1*2&quot;]], &quot;numberFormat&quot; : [[null,null], [&quot;m-ddd&quot;, null]] }\n</code></pre>\n<p>But I was unable to find the good patch() method to do so. I only try the following examples:</p>\n<pre><code>var valueOfA1 = _graphApiClient\n             .drives(DRIVE_ID)\n             .items(ITEM_ID)\n             .workbook()\n             .worksheets(&quot;Sheet1&quot;)\n             .range(WorkbookWorksheetRangeParameterSet.newBuilder()\n                     .withAddress(&quot;A1&quot;)\n                     .build())\n             .buildRequest()\n             .get();\n</code></pre>\n<p><a href=\"https://github.com/microsoftgraph/msgraph-sdk-java/issues/1063\" rel=\"nofollow noreferrer\">https://github.com/microsoftgraph/msgraph-sdk-java/issues/1063</a></p>\n<pre><code>WorkbookRangeFill workbookRangeFill = new WorkbookRangeFill(); workbookRangeFill.color = &quot;#00FF00&quot;;\n\ngraphClient.me().drive().items(&quot;{id}&quot;).workbook().worksheets(&quot;sheet1&quot;)\n    .range(WorkbookWorksheetRangeParameterSet\n        .newBuilder()\n        .withAddress(&quot;$B$1&quot;)\n        .build()).format().fill()\n    .buildRequest()\n    .patch(workbookRangeFill);\n</code></pre>\n<p><a href=\"https://github.com/microsoftgraph/msgraph-sdk-java/issues/744\" rel=\"nofollow noreferrer\">https://github.com/microsoftgraph/msgraph-sdk-java/issues/744</a>\nBut seems there is an issue with address.</p>\n<p>Then try by Http client:</p>\n<pre><code>CloseableHttpClient httpClient = HttpClients.createDefault(); \nHttpPatch httpPatch = new HttpPatch(&quot;http://graph.microsoft.com/v1.0/drives/{driveId}/items/{itemId}/workbook/worksheets/{name}/range(address='F10:F12')&quot;); \nhttpPatch.addHeader(&quot;Authorization&quot;, accessToken); \nhttpPatch.setEntity(new StringEntity(&quot;{\\&quot;values\\&quot;:[[\\&quot;Hello\\&quot;],[\\&quot;How\\&quot;],[\\&quot;Are You?\\&quot;]]}&quot;, &quot;application/json&quot;, &quot;UTF-8&quot;)); \nHttpEntity responseEntity = httpClient.execute(httpPatch).getEntity(); \nString responseString = EntityUtils.toString(responseEntity);\n</code></pre>\n<p>Resulting in nothing, no error and no content returned and no update range. Does anyone got a working http request ?</p>\n"},{"tags":["java","android","flutter","gradle"],"comments":[{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":1,"creation_date":1694215770,"post_id":77068786,"comment_id":135866826,"body_markdown":"AGP 8.x requires Java 17. You need to switch to Java 17.According to the error message you are using Java 8. Check the JDK configured for Gradle within Android Studio. There are multiple identical questions here on SO.","body":"AGP 8.x requires Java 17. You need to switch to Java 17.According to the error message you are using Java 8. Check the JDK configured for Gradle within Android Studio. There are multiple identical questions here on SO."},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1694275885,"post_id":77068786,"comment_id":135871413,"body_markdown":"Possible duplicate of https://stackoverflow.com/q/76137431/150978","body":"Possible duplicate of <a href=\"https://stackoverflow.com/q/76137431/150978\">stackoverflow.com/q/76137431/150978</a>"}],"owner":{"account_id":1158163,"reputation":16333,"user_id":1830228,"accept_rate":55,"display_name":"DolDurma"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":328,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694193319,"creation_date":1694193319,"question_id":77068786,"body_markdown":"After upgrading the `Gradle` version and trying to run `gradlew clean` i get this error and i can&#39;t resolve that\r\n\r\n```\r\n   &gt; Could not resolve com.android.tools.build:gradle:8.1.1.\r\n     Required by:\r\n         project :\r\n      &gt; No matching variant of com.android.tools.build:gradle:8.1.1 was found. The consumer was configured to find a library for use during runtime, compatible with Java 8, packaged as a jar, and its dependencies declared externally, as well as attribute &#39;org.gradle.plugin.api-version&#39; with value &#39;8.0&#39; but:\r\n          - Variant &#39;apiElements&#39; capability com.android.tools.build:gradle:8.1.1 declares a library, packaged as a jar, and its dependencies declared externally:\r\n              - Incompatible because this component declares a component for use during compile-time, compatible with Java 11 and the consumer needed a component for use during runtime, compatible with Java 8  \r\n              - Other compatible attribute:\r\n                  - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;8.0&#39;)\r\n          - Variant &#39;javadocElements&#39; capability com.android.tools.build:gradle:8.1.1 declares a component for use during runtime, and its dependencies declared externally:\r\n              - Incompatible because this component declares documentation and the consumer needed a library\r\n              - Other compatible attributes:\r\n                  - Doesn&#39;t say anything about its target Java version (required compatibility with Java 8)\r\n```\r\n\r\ni read more documentation and issues about this problem and i try to change java version to `11`\r\n\r\n```gradle\r\ncompileOptions {\r\n    sourceCompatibility JavaVersion.VERSION_11\r\n    targetCompatibility JavaVersion.VERSION_11\r\n}\r\n```\r\n\r\n`distributionUrl` \r\n\r\n```\r\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-8.0-all.zip\r\n```\r\n\r\nand `gradle.properties`:\r\n\r\n```gradle\r\norg.gradle.jvmargs=-Xmx2048M -XX:MaxMetaspaceSize=512m\r\nandroid.useAndroidX=true\r\nandroid.enableJetifier=true\r\nandroid.defaults.buildfeatures.buildconfig=true\r\nandroid.nonTransitiveRClass=false\r\nandroid.nonFinalResIds=false\r\n```","title":"Android No matching variant of com.android.tools.build:gradle:8.1.1","body":"<p>After upgrading the <code>Gradle</code> version and trying to run <code>gradlew clean</code> i get this error and i can't resolve that</p>\n<pre><code>   &gt; Could not resolve com.android.tools.build:gradle:8.1.1.\n     Required by:\n         project :\n      &gt; No matching variant of com.android.tools.build:gradle:8.1.1 was found. The consumer was configured to find a library for use during runtime, compatible with Java 8, packaged as a jar, and its dependencies declared externally, as well as attribute 'org.gradle.plugin.api-version' with value '8.0' but:\n          - Variant 'apiElements' capability com.android.tools.build:gradle:8.1.1 declares a library, packaged as a jar, and its dependencies declared externally:\n              - Incompatible because this component declares a component for use during compile-time, compatible with Java 11 and the consumer needed a component for use during runtime, compatible with Java 8  \n              - Other compatible attribute:\n                  - Doesn't say anything about org.gradle.plugin.api-version (required '8.0')\n          - Variant 'javadocElements' capability com.android.tools.build:gradle:8.1.1 declares a component for use during runtime, and its dependencies declared externally:\n              - Incompatible because this component declares documentation and the consumer needed a library\n              - Other compatible attributes:\n                  - Doesn't say anything about its target Java version (required compatibility with Java 8)\n</code></pre>\n<p>i read more documentation and issues about this problem and i try to change java version to <code>11</code></p>\n<pre><code>compileOptions {\n    sourceCompatibility JavaVersion.VERSION_11\n    targetCompatibility JavaVersion.VERSION_11\n}\n</code></pre>\n<p><code>distributionUrl</code></p>\n<pre><code>distributionUrl=https\\://services.gradle.org/distributions/gradle-8.0-all.zip\n</code></pre>\n<p>and <code>gradle.properties</code>:</p>\n<pre><code>org.gradle.jvmargs=-Xmx2048M -XX:MaxMetaspaceSize=512m\nandroid.useAndroidX=true\nandroid.enableJetifier=true\nandroid.defaults.buildfeatures.buildconfig=true\nandroid.nonTransitiveRClass=false\nandroid.nonFinalResIds=false\n</code></pre>\n"},{"tags":["java","multithreading","executorservice"],"answers":[{"tags":[],"owner":{"account_id":1370752,"reputation":5480,"user_id":1306024,"display_name":"k5_"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1534563247,"creation_date":1534563247,"answer_id":51905025,"question_id":51904936,"body_markdown":"Because you start a second thread for each of the Runnables in the constructor with `new Thread(this).start();`\r\n\r\nThe Runnables are started with the ExecutorService, no need for an additional `Thread.start()` just remove it.","title":"Executor is executing twice","body":"<p>Because you start a second thread for each of the Runnables in the constructor with <code>new Thread(this).start();</code></p>\n\n<p>The Runnables are started with the ExecutorService, no need for an additional <code>Thread.start()</code> just remove it.</p>\n"},{"tags":[],"owner":{"account_id":1255397,"reputation":2306,"user_id":1214974,"accept_rate":67,"display_name":"Janus Varmarken"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1534563347,"creation_date":1534563347,"answer_id":51905032,"question_id":51904936,"body_markdown":"This happens because you spawn two threads *outside* the `ExecutorService` and execute your `Runnable` implementation on those *in addition to also submitting them for execution on the single thread associated with your `ExecutorService`*.\r\n\r\nRemove `new Thread(this).start();` and you&#39;ll only see the printouts once. However, since you use `newFixedThreadPool(1)`, this effectively means that your program will run sequentially.","title":"Executor is executing twice","body":"<p>This happens because you spawn two threads <em>outside</em> the <code>ExecutorService</code> and execute your <code>Runnable</code> implementation on those <em>in addition to also submitting them for execution on the single thread associated with your <code>ExecutorService</code></em>.</p>\n\n<p>Remove <code>new Thread(this).start();</code> and you'll only see the printouts once. However, since you use <code>newFixedThreadPool(1)</code>, this effectively means that your program will run sequentially.</p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1694192414,"creation_date":1534580870,"answer_id":51906743,"question_id":51904936,"body_markdown":"# Let executor service manage threads\r\n\r\nAs others Answers have said, you are needlessly creating and managing threads. That is exactly the job of an executor service, to make concurrency easier by managing the creation, usage, and destruction of threads on your behalf.\r\n\r\n# Example app\r\n\r\nReduce your `main` method to simply this:\r\n\r\n    try (\r\n        ExecutorService executorService = Executors.newFixedThreadPool( 1 );\r\n    ) {\r\n        executorService.execute( new ZeroToFourCounter( &quot;first &quot; ) );\r\n        executorService.execute( new ZeroToFourCounter( &quot;Second&quot; ) );\r\n    }\r\n\r\nI believe there is no need for your use of [`CountDownLatch`][1]. That class is used to make one or more threads wait until a set of operations in other threads completes. But with a thread pool of only one thread, the tasks will be completed in the order submitted. So no need to coordinate.\r\n\r\n\r\n\r\nChange your [`Runnable`][2] implementation’s `run` method to simply doing its intended job, counting 1-4 in a loop. \r\n\r\n    for ( int i = 0 ; i &lt; 5 ; i++ ) {\r\n        System.out.println( this.name + &quot; &quot; + i + &quot; at &quot; + Instant.now() );\r\n    }\r\n\r\nNo need to spawn a thread in that constructor of your [`Runnable`][2]. You asked the executor service to manage a thread pool for you.\r\n\r\n\r\n\r\nComplete application code:\r\n\r\n    package com.basilbourque.example;\r\n    \r\n    import java.time.Instant;\r\n    import java.util.concurrent.ExecutorService;\r\n    import java.util.concurrent.Executors;\r\n    \r\n    public class ExecDemo {\r\n    \r\n        public static void main ( String[] args ) {\r\n            System.out.println( &quot;DEMO - Running `main`. &quot; + Instant.now() );\r\n            try (\r\n                ExecutorService executorService = Executors.newFixedThreadPool( 1 );\r\n            ) {\r\n                executorService.execute( new ZeroToFourCounter( &quot;first &quot; ) );\r\n                executorService.execute( new ZeroToFourCounter( &quot;Second&quot; ) );\r\n                System.out.println( &quot;DEMO - In `main`, executorService will now shutdown. &quot; + Instant.now() );\r\n            } \r\n        }\r\n    }\r\n    \r\n    class ZeroToFourCounter implements Runnable {\r\n        private String name;\r\n    \r\n        public ZeroToFourCounter ( String name ) {\r\n            this.name = name;\r\n        }\r\n    \r\n        @Override\r\n        public void run () {\r\n            for ( int i = 0 ; i &lt; 5 ; i++ ) {\r\n                System.out.println( this.name + &quot; &quot; + i + &quot; at &quot; + Instant.now() );\r\n            }\r\n        }\r\n    }\r\n\r\nWhen run:\r\n\r\n&gt;DEMO - Running `main`. 2018-08-18T08:20:42.916806Z\r\n&gt;\r\n&gt;DEMO - In `main`, asking executorService to shutdown(). 2018-08-18T08:20:42.986941Z\r\n&gt;\r\n&gt;DEMO - Ending `main`. 2018-08-18T08:20:42.987724Z\r\n&gt;\r\n&gt;first  0 at 2018-08-18T08:20:42.987058Z\r\n&gt;\r\n&gt;first  1 at 2018-08-18T08:20:43.027013Z\r\n&gt;\r\n&gt;first  2 at 2018-08-18T08:20:43.027090Z\r\n&gt;\r\n&gt;first  3 at 2018-08-18T08:20:43.027184Z\r\n&gt;\r\n&gt;first  4 at 2018-08-18T08:20:43.027259Z\r\n&gt;\r\n&gt;Second 0 at 2018-08-18T08:20:43.027413Z\r\n&gt;\r\n&gt;Second 1 at 2018-08-18T08:20:43.027544Z\r\n&gt;\r\n&gt;Second 2 at 2018-08-18T08:20:43.027673Z\r\n&gt;\r\n&gt;Second 3 at 2018-08-18T08:20:43.027784Z\r\n&gt;\r\n&gt;Second 4 at 2018-08-18T08:20:43.027891Z\r\n\r\nInteresting… notice how these lines are *not* chronological! The `first  0` line captured a moment *earlier* than the line above it.\r\n\r\nNote that calling [`ExecutorService::shutdown`][3] does *not* interrupt the working threads. That call is a request to the executor to (a) stop accepting new work, and (b) finish the current work. To quote the doc:\r\n\r\n&gt;Initiates an orderly shutdown in which previously submitted tasks are executed, but no new tasks will be accepted. Invocation has no additional effect if already shut down.\r\n&gt;\r\n&gt;This method does not wait for previously submitted tasks to complete execution. Use awaitTermination to do that.\r\n\r\nThe call to `ExecutorService::shutdown` does not block. Nor does it check to see if the executor service ever shuts down. Consider if you would be better off calling `awaitTermination` as suggested to get the behavior of blocking until the executor service completes or fails to complete by the time-out.\r\n\r\nIn modern Java, `ExecutorService` is `AutoCloseable`. So we can use try-with-resources syntax to automatically close (shutdown). \r\n\r\n# Not `LocalDateTime`\r\n\r\nBy the way, the `LocalDateTime` class is the wrong date-time class to use here. Lacking any concept of time zone or offset-from-UTC, that class cannot represent an actual moment. Instead use `Instant` or `ZonedDateTime`. \r\n\r\nI understand you are just doing some quick-and-dirty logging, so it is not important. But using `LocalDateTime` for a moment is a bad habit that could come back to haunt you later.\r\n\r\n    Instant.now()       // Capture current moment in UTC.\r\n    ZonedDateTime.now() // Capture the current moment in the JVM’s current default time zone.\r\n\r\nGenerally best to get in the habit of using [UTC][4] for most of your logging, storing, and exchanging of moments.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/10/docs/api/java/util/concurrent/CountDownLatch.html\r\n  [2]: https://docs.oracle.com/javase/10/docs/api/java/lang/Runnable.html\r\n  [3]: https://docs.oracle.com/javase/10/docs/api/java/util/concurrent/ExecutorService.html#shutdown()\r\n  [4]: https://en.wikipedia.org/wiki/Coordinated_Universal_Time","title":"Executor is executing twice","body":"<h1>Let executor service manage threads</h1>\n<p>As others Answers have said, you are needlessly creating and managing threads. That is exactly the job of an executor service, to make concurrency easier by managing the creation, usage, and destruction of threads on your behalf.</p>\n<h1>Example app</h1>\n<p>Reduce your <code>main</code> method to simply this:</p>\n<pre><code>try (\n    ExecutorService executorService = Executors.newFixedThreadPool( 1 );\n) {\n    executorService.execute( new ZeroToFourCounter( &quot;first &quot; ) );\n    executorService.execute( new ZeroToFourCounter( &quot;Second&quot; ) );\n}\n</code></pre>\n<p>I believe there is no need for your use of <a href=\"https://docs.oracle.com/javase/10/docs/api/java/util/concurrent/CountDownLatch.html\" rel=\"nofollow noreferrer\"><code>CountDownLatch</code></a>. That class is used to make one or more threads wait until a set of operations in other threads completes. But with a thread pool of only one thread, the tasks will be completed in the order submitted. So no need to coordinate.</p>\n<p>Change your <a href=\"https://docs.oracle.com/javase/10/docs/api/java/lang/Runnable.html\" rel=\"nofollow noreferrer\"><code>Runnable</code></a> implementation’s <code>run</code> method to simply doing its intended job, counting 1-4 in a loop.</p>\n<pre><code>for ( int i = 0 ; i &lt; 5 ; i++ ) {\n    System.out.println( this.name + &quot; &quot; + i + &quot; at &quot; + Instant.now() );\n}\n</code></pre>\n<p>No need to spawn a thread in that constructor of your <a href=\"https://docs.oracle.com/javase/10/docs/api/java/lang/Runnable.html\" rel=\"nofollow noreferrer\"><code>Runnable</code></a>. You asked the executor service to manage a thread pool for you.</p>\n<p>Complete application code:</p>\n<pre><code>package com.basilbourque.example;\n\nimport java.time.Instant;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\n\npublic class ExecDemo {\n\n    public static void main ( String[] args ) {\n        System.out.println( &quot;DEMO - Running `main`. &quot; + Instant.now() );\n        try (\n            ExecutorService executorService = Executors.newFixedThreadPool( 1 );\n        ) {\n            executorService.execute( new ZeroToFourCounter( &quot;first &quot; ) );\n            executorService.execute( new ZeroToFourCounter( &quot;Second&quot; ) );\n            System.out.println( &quot;DEMO - In `main`, executorService will now shutdown. &quot; + Instant.now() );\n        } \n    }\n}\n\nclass ZeroToFourCounter implements Runnable {\n    private String name;\n\n    public ZeroToFourCounter ( String name ) {\n        this.name = name;\n    }\n\n    @Override\n    public void run () {\n        for ( int i = 0 ; i &lt; 5 ; i++ ) {\n            System.out.println( this.name + &quot; &quot; + i + &quot; at &quot; + Instant.now() );\n        }\n    }\n}\n</code></pre>\n<p>When run:</p>\n<blockquote>\n<p>DEMO - Running <code>main</code>. 2018-08-18T08:20:42.916806Z</p>\n<p>DEMO - In <code>main</code>, asking executorService to shutdown(). 2018-08-18T08:20:42.986941Z</p>\n<p>DEMO - Ending <code>main</code>. 2018-08-18T08:20:42.987724Z</p>\n<p>first  0 at 2018-08-18T08:20:42.987058Z</p>\n<p>first  1 at 2018-08-18T08:20:43.027013Z</p>\n<p>first  2 at 2018-08-18T08:20:43.027090Z</p>\n<p>first  3 at 2018-08-18T08:20:43.027184Z</p>\n<p>first  4 at 2018-08-18T08:20:43.027259Z</p>\n<p>Second 0 at 2018-08-18T08:20:43.027413Z</p>\n<p>Second 1 at 2018-08-18T08:20:43.027544Z</p>\n<p>Second 2 at 2018-08-18T08:20:43.027673Z</p>\n<p>Second 3 at 2018-08-18T08:20:43.027784Z</p>\n<p>Second 4 at 2018-08-18T08:20:43.027891Z</p>\n</blockquote>\n<p>Interesting… notice how these lines are <em>not</em> chronological! The <code>first  0</code> line captured a moment <em>earlier</em> than the line above it.</p>\n<p>Note that calling <a href=\"https://docs.oracle.com/javase/10/docs/api/java/util/concurrent/ExecutorService.html#shutdown()\" rel=\"nofollow noreferrer\"><code>ExecutorService::shutdown</code></a> does <em>not</em> interrupt the working threads. That call is a request to the executor to (a) stop accepting new work, and (b) finish the current work. To quote the doc:</p>\n<blockquote>\n<p>Initiates an orderly shutdown in which previously submitted tasks are executed, but no new tasks will be accepted. Invocation has no additional effect if already shut down.</p>\n<p>This method does not wait for previously submitted tasks to complete execution. Use awaitTermination to do that.</p>\n</blockquote>\n<p>The call to <code>ExecutorService::shutdown</code> does not block. Nor does it check to see if the executor service ever shuts down. Consider if you would be better off calling <code>awaitTermination</code> as suggested to get the behavior of blocking until the executor service completes or fails to complete by the time-out.</p>\n<p>In modern Java, <code>ExecutorService</code> is <code>AutoCloseable</code>. So we can use try-with-resources syntax to automatically close (shutdown).</p>\n<h1>Not <code>LocalDateTime</code></h1>\n<p>By the way, the <code>LocalDateTime</code> class is the wrong date-time class to use here. Lacking any concept of time zone or offset-from-UTC, that class cannot represent an actual moment. Instead use <code>Instant</code> or <code>ZonedDateTime</code>.</p>\n<p>I understand you are just doing some quick-and-dirty logging, so it is not important. But using <code>LocalDateTime</code> for a moment is a bad habit that could come back to haunt you later.</p>\n<pre><code>Instant.now()       // Capture current moment in UTC.\nZonedDateTime.now() // Capture the current moment in the JVM’s current default time zone.\n</code></pre>\n<p>Generally best to get in the habit of using <a href=\"https://en.wikipedia.org/wiki/Coordinated_Universal_Time\" rel=\"nofollow noreferrer\">UTC</a> for most of your logging, storing, and exchanging of moments.</p>\n"}],"owner":{"account_id":7772811,"reputation":1523,"user_id":5881773,"accept_rate":0,"display_name":"Vipul Pandey"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2358,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1694192414,"creation_date":1534562329,"question_id":51904936,"body_markdown":"I am trying to run 2 threads simultaneously to achieve multithreading and my program is working, but I am in doubt as to why my program is prints to standard out twice.\r\n\r\nHere is my code base:\r\n\r\n\r\n    public class SimpleExec {\r\n        public static void main(String[] args) {\r\n            CountDownLatch countDownLatch = new CountDownLatch(5);\r\n            CountDownLatch countDownLatch6 = new CountDownLatch(5);\r\n            ExecutorService executorService = Executors.newFixedThreadPool(1);\r\n            System.out.println(&quot;start&quot; + LocalDateTime.now());\r\n            executorService.execute(new MyThread(&quot;first &quot;, countDownLatch));\r\n            executorService.execute(new MyThread(&quot;Second&quot;, countDownLatch6));\r\n\r\n            try {\r\n                countDownLatch.await();\r\n                countDownLatch6.await();\r\n            } catch (InterruptedException e) {\r\n                System.out.println(e);\r\n            }\r\n            System.out.println(&quot;end&quot; + LocalDateTime.now());\r\n            executorService.shutdown();\r\n\r\n        }\r\n    }\r\n\r\n    class MyThread implements Runnable {\r\n        String name;\r\n        CountDownLatch cdl;\r\n\r\n        public MyThread(String name, CountDownLatch cdl) {\r\n            this.cdl = cdl;\r\n            this.name = name;\r\n            new Thread(this).start();\r\n        }\r\n\r\n        public void run() {\r\n            for (int i = 0; i &lt; 5; i++) {\r\n                System.out.println(name + &quot; &quot; + i);\r\n                cdl.countDown();\r\n            }\r\n        }\r\n    }\r\n\r\nAnd here&#39;s a sample of the program&#39;s output:\r\n\r\n    start 2018-08-18T08:41:51.867\r\n    first  0 // first time thread labeled &#39;first&#39; prints 0 through 4\r\n    first  1\r\n    first  2\r\n    first  3\r\n    first  4\r\n    Second 0\r\n    Second 1\r\n    Second 2\r\n    first  0   // second time thread labeled &#39;first&#39; prints 0 through 4 - why does it print again here?\r\n    first  1\r\n    Second 3\r\n    first  2\r\n    Second 4\r\n    first  3\r\n    first  4\r\n    end2018-08-18T08:41:51.870\r\n    Second 0\r\n    Second 1\r\n    Second 2\r\n    Second 3\r\n    Second 4","title":"Executor is executing twice","body":"<p>I am trying to run 2 threads simultaneously to achieve multithreading and my program is working, but I am in doubt as to why my program is prints to standard out twice.</p>\n\n<p>Here is my code base:</p>\n\n<pre><code>public class SimpleExec {\n    public static void main(String[] args) {\n        CountDownLatch countDownLatch = new CountDownLatch(5);\n        CountDownLatch countDownLatch6 = new CountDownLatch(5);\n        ExecutorService executorService = Executors.newFixedThreadPool(1);\n        System.out.println(\"start\" + LocalDateTime.now());\n        executorService.execute(new MyThread(\"first \", countDownLatch));\n        executorService.execute(new MyThread(\"Second\", countDownLatch6));\n\n        try {\n            countDownLatch.await();\n            countDownLatch6.await();\n        } catch (InterruptedException e) {\n            System.out.println(e);\n        }\n        System.out.println(\"end\" + LocalDateTime.now());\n        executorService.shutdown();\n\n    }\n}\n\nclass MyThread implements Runnable {\n    String name;\n    CountDownLatch cdl;\n\n    public MyThread(String name, CountDownLatch cdl) {\n        this.cdl = cdl;\n        this.name = name;\n        new Thread(this).start();\n    }\n\n    public void run() {\n        for (int i = 0; i &lt; 5; i++) {\n            System.out.println(name + \" \" + i);\n            cdl.countDown();\n        }\n    }\n}\n</code></pre>\n\n<p>And here's a sample of the program's output:</p>\n\n<pre><code>start 2018-08-18T08:41:51.867\nfirst  0 // first time thread labeled 'first' prints 0 through 4\nfirst  1\nfirst  2\nfirst  3\nfirst  4\nSecond 0\nSecond 1\nSecond 2\nfirst  0   // second time thread labeled 'first' prints 0 through 4 - why does it print again here?\nfirst  1\nSecond 3\nfirst  2\nSecond 4\nfirst  3\nfirst  4\nend2018-08-18T08:41:51.870\nSecond 0\nSecond 1\nSecond 2\nSecond 3\nSecond 4\n</code></pre>\n"},{"tags":["java","spring-boot","docker","kotlin","testcontainers"],"comments":[{"owner":{"account_id":2537085,"reputation":6205,"user_id":2203890,"display_name":"Edd&#250; Mel&#233;ndez"},"score":0,"creation_date":1694035738,"post_id":77054154,"comment_id":135840145,"body_markdown":"how are you managing the container? Do you call start() and stop(), using try-with-resources? can you share a repository?","body":"how are you managing the container? Do you call start() and stop(), using try-with-resources? can you share a repository?"},{"owner":{"account_id":913963,"reputation":7092,"user_id":947199,"accept_rate":100,"display_name":"troig"},"score":0,"creation_date":1694048857,"post_id":77054154,"comment_id":135841382,"body_markdown":"Just calling start(), which never finishes for that particular container. I will complete a little bit more the OP but I&#39;m afraid I cannot share a repo as the docker image is internal and has confifentiality constraints. Thanks anyway.","body":"Just calling start(), which never finishes for that particular container. I will complete a little bit more the OP but I&#39;m afraid I cannot share a repo as the docker image is internal and has confifentiality constraints. Thanks anyway."},{"owner":{"account_id":913963,"reputation":7092,"user_id":947199,"accept_rate":100,"display_name":"troig"},"score":0,"creation_date":1694449209,"post_id":77054154,"comment_id":135889281,"body_markdown":"@Edd&#250;Mel&#233;ndez just check my answer if you are curious ;)","body":"@Edd&#250;Mel&#233;ndez just check my answer if you are curious ;)"}],"answers":[{"tags":[],"owner":{"account_id":913963,"reputation":7092,"user_id":947199,"accept_rate":100,"display_name":"troig"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1694192381,"creation_date":1694161256,"answer_id":77065268,"question_id":77054154,"body_markdown":"After further investigation, the issue was that, for some reasons, one of the exposed ports(`38080`) was not responding. In this case, `TestContainers` `start()` keeps trying to establish connection with the port until the configured timeout happens.\r\n\r\nThis is the reason why `TestContainers` was considering that the container hadn&#39;t been started successfully.","title":"TestContainers GenericContainer start() never finishes","body":"<p>After further investigation, the issue was that, for some reasons, one of the exposed ports(<code>38080</code>) was not responding. In this case, <code>TestContainers</code> <code>start()</code> keeps trying to establish connection with the port until the configured timeout happens.</p>\n<p>This is the reason why <code>TestContainers</code> was considering that the container hadn't been started successfully.</p>\n"}],"owner":{"account_id":913963,"reputation":7092,"user_id":947199,"accept_rate":100,"display_name":"troig"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":106,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77065268,"answer_count":1,"score":0,"last_activity_date":1694192381,"creation_date":1694021879,"question_id":77054154,"body_markdown":"I&#39;m using [TestContainers][1] for some *acceptance-testing* in a kotlin spring-boot project. \r\n\r\nI start all the docker containers successfully except a particular one, for which the `start()` method never finishes although (apparently) the container has started successfully. \r\n\r\nI see it running both:\r\n- In docker desktop and \r\n- if I check it with docker ps in the terminal.\r\n\r\nI have simplified to the extreme the configuration, startup strategies, etc. but the problem still remains.\r\n\r\nAny idea of what can be happening?\r\n\r\n    GenericContainer(&quot;docker-image-identifier:latest&quot;)\r\n                .withImagePullPolicy(PullPolicy.defaultPolicy())\r\n                .withStartupTimeout(Duration.ofSeconds(300))\r\n                .withExposedPorts(38080, 8080)\r\n                .withNetwork(network)\r\n                .withEnv(\r\n                    mapOf(\r\n                        &quot;SPRING_PROFILES_ACTIVE&quot; to &quot;local,mock&quot;\r\n                        // and some more env\r\n                    )\r\n                )\r\n\r\n\r\n  [1]: https://java.testcontainers.org/test_framework_integration/manual_lifecycle_control/","title":"TestContainers GenericContainer start() never finishes","body":"<p>I'm using <a href=\"https://java.testcontainers.org/test_framework_integration/manual_lifecycle_control/\" rel=\"nofollow noreferrer\">TestContainers</a> for some <em>acceptance-testing</em> in a kotlin spring-boot project.</p>\n<p>I start all the docker containers successfully except a particular one, for which the <code>start()</code> method never finishes although (apparently) the container has started successfully.</p>\n<p>I see it running both:</p>\n<ul>\n<li>In docker desktop and</li>\n<li>if I check it with docker ps in the terminal.</li>\n</ul>\n<p>I have simplified to the extreme the configuration, startup strategies, etc. but the problem still remains.</p>\n<p>Any idea of what can be happening?</p>\n<pre><code>GenericContainer(&quot;docker-image-identifier:latest&quot;)\n            .withImagePullPolicy(PullPolicy.defaultPolicy())\n            .withStartupTimeout(Duration.ofSeconds(300))\n            .withExposedPorts(38080, 8080)\n            .withNetwork(network)\n            .withEnv(\n                mapOf(\n                    &quot;SPRING_PROFILES_ACTIVE&quot; to &quot;local,mock&quot;\n                    // and some more env\n                )\n            )\n</code></pre>\n"},{"tags":["java","xml","spring","rest"],"answers":[{"tags":[],"owner":{"account_id":1089170,"reputation":3080,"user_id":1084204,"display_name":"MattSenter"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1383863328,"creation_date":1383863328,"answer_id":19848009,"question_id":19842446,"body_markdown":"I believe you are going to need to set the content-type handled by your `MarshallingHttpMessageConverter`:\r\n\r\n    ...\r\n    &lt;bean id=&quot;marshallingHttpMessageConverter&quot; \r\n            class=&quot;org.springframework.http.converter.xml.MarshallingHttpMessageConverter&quot;\r\n            p:marshaller-ref=&quot;jaxb2Marshaller&quot; p:unmarshaller-ref=&quot;jaxb2Marshaller&quot; \r\n            p:supportedMediaTypes=&quot;application/vnd.tmrk.cloud.organization&quot;/&gt;\r\n    ...\r\n\r\n...something along those lines. The default supported media type for `MarshallingHttpMessageConverter` is simply `application/*+xml`.","title":"Spring RestTemplate content type mismatch","body":"<p>I believe you are going to need to set the content-type handled by your <code>MarshallingHttpMessageConverter</code>:</p>\n\n<pre><code>...\n&lt;bean id=\"marshallingHttpMessageConverter\" \n        class=\"org.springframework.http.converter.xml.MarshallingHttpMessageConverter\"\n        p:marshaller-ref=\"jaxb2Marshaller\" p:unmarshaller-ref=\"jaxb2Marshaller\" \n        p:supportedMediaTypes=\"application/vnd.tmrk.cloud.organization\"/&gt;\n...\n</code></pre>\n\n<p>...something along those lines. The default supported media type for <code>MarshallingHttpMessageConverter</code> is simply <code>application/*+xml</code>.</p>\n"}],"owner":{"account_id":1017979,"reputation":4294,"user_id":1029089,"accept_rate":90,"display_name":"Piyush-Ask Any Difference"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":862,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":19848009,"answer_count":1,"score":0,"last_activity_date":1694190246,"creation_date":1383844826,"question_id":19842446,"body_markdown":"I am trying to consume one of the REST web service from Terremark enterprise cloud. Here is what I have done:\r\n1) Take the xsd and generate jaxb artifacts\r\n2) Send Rest call and let Restclient populate the Organizations class.\r\n\r\n    ResponseEntity exchange = template.exchange(&quot;https://services.enterprisecloud.terremark.com/cloudapi/ecloud/organizations/&quot;, \r\n    \t\t\t\t\tHttpMethod.GET, \r\n    \t\t\t\t\tnew HttpEntity(operation.getInput(), operation.getHeader()), \r\n    \t\t\t\t\tOrganizations.class, \r\n    \t\t\t\t\turlVariables);\r\n\r\nThe error I see is\r\n\r\n    org.springframework.web.client.RestClientException: Could not extract response: no suitable HttpMessageConverter found for response type [com.dto.Organizations] and content type [application/vnd.tmrk.cloud.organization;type=collection]\r\n\r\nIn the above error, com.dto.Organizations is generated java class by JAXB. Any generic Spring pointers to resolve this issue would also be helpful.\r\n\r\nP.S.\r\nIn spring dispatcher, I have following:\r\n\r\n    &lt;bean id=&quot;restTemplate&quot; class=&quot;org.springframework.web.client.RestTemplate&quot;&gt;\r\n        &lt;property name=&quot;messageConverters&quot;&gt;\r\n            &lt;list&gt;\r\n               &lt;bean id=&quot;marshallingHttpMessageConverter&quot; \r\n               \tclass=&quot;org.springframework.http.converter.xml.MarshallingHttpMessageConverter&quot;\r\n    \t\t\tp:marshaller-ref=&quot;jaxb2Marshaller&quot; p:unmarshaller-ref=&quot;jaxb2Marshaller&quot; /&gt;\r\n            \t&lt;bean class=&quot;org.springframework.http.converter.StringHttpMessageConverter&quot;/&gt;\r\n            \t&lt;bean class=&quot;org.springframework.http.converter.json.MappingJacksonHttpMessageConverter&quot;/&gt;\r\n            \t&lt;bean class=&quot;org.springframework.http.converter.ResourceHttpMessageConverter&quot;/&gt;\r\n            &lt;/list&gt;\r\n        &lt;/property&gt;\r\n    &lt;/bean&gt;","title":"Spring RestTemplate content type mismatch","body":"<p>I am trying to consume one of the REST web service from Terremark enterprise cloud. Here is what I have done:\n1) Take the xsd and generate jaxb artifacts\n2) Send Rest call and let Restclient populate the Organizations class.</p>\n\n<pre><code>ResponseEntity exchange = template.exchange(\"https://services.enterprisecloud.terremark.com/cloudapi/ecloud/organizations/\", \n                    HttpMethod.GET, \n                    new HttpEntity(operation.getInput(), operation.getHeader()), \n                    Organizations.class, \n                    urlVariables);\n</code></pre>\n\n<p>The error I see is</p>\n\n<pre><code>org.springframework.web.client.RestClientException: Could not extract response: no suitable HttpMessageConverter found for response type [com.dto.Organizations] and content type [application/vnd.tmrk.cloud.organization;type=collection]\n</code></pre>\n\n<p>In the above error, com.dto.Organizations is generated java class by JAXB. Any generic Spring pointers to resolve this issue would also be helpful.</p>\n\n<p>P.S.\nIn spring dispatcher, I have following:</p>\n\n<pre><code>&lt;bean id=\"restTemplate\" class=\"org.springframework.web.client.RestTemplate\"&gt;\n    &lt;property name=\"messageConverters\"&gt;\n        &lt;list&gt;\n           &lt;bean id=\"marshallingHttpMessageConverter\" \n            class=\"org.springframework.http.converter.xml.MarshallingHttpMessageConverter\"\n            p:marshaller-ref=\"jaxb2Marshaller\" p:unmarshaller-ref=\"jaxb2Marshaller\" /&gt;\n            &lt;bean class=\"org.springframework.http.converter.StringHttpMessageConverter\"/&gt;\n            &lt;bean class=\"org.springframework.http.converter.json.MappingJacksonHttpMessageConverter\"/&gt;\n            &lt;bean class=\"org.springframework.http.converter.ResourceHttpMessageConverter\"/&gt;\n        &lt;/list&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n"},{"tags":["java","amazon-web-services","amazon-sqs"],"comments":[{"owner":{"account_id":200716,"reputation":2145,"user_id":446717,"display_name":"Roberto"},"score":0,"creation_date":1480092968,"post_id":39253144,"comment_id":68839754,"body_markdown":"Why the downvote? It seems a good question","body":"Why the downvote? It seems a good question"}],"answers":[{"comments":[{"owner":{"account_id":6306906,"reputation":505,"user_id":4899746,"accept_rate":64,"display_name":"Jaidyn Belbin"},"score":0,"creation_date":1472656387,"post_id":39253262,"comment_id":65842351,"body_markdown":"Ah, I thought there may have been docs, but I couldn&#39;t find what I was looking for. Cheers for that","body":"Ah, I thought there may have been docs, but I couldn&#39;t find what I was looking for. Cheers for that"}],"tags":[],"owner":{"account_id":8860912,"reputation":4843,"user_id":6617152,"display_name":"Ramachandran.A.G"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1472656296,"creation_date":1472656296,"answer_id":39253262,"question_id":39253144,"body_markdown":"Just looking at the API for doing something similar [DeleteMessageBatchRequest][1] seems to do the trick. \r\n\r\n\r\n  [1]: http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/sqs/model/DeleteMessageBatchRequest.html","title":"How to delete all messages from SQS Queue at once Java","body":"<p>Just looking at the API for doing something similar <a href=\"http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/sqs/model/DeleteMessageBatchRequest.html\" rel=\"nofollow\">DeleteMessageBatchRequest</a> seems to do the trick. </p>\n"},{"tags":[],"owner":{"account_id":7501,"reputation":187982,"user_id":13070,"accept_rate":90,"display_name":"Mark B"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1472656311,"creation_date":1472656311,"answer_id":39253267,"question_id":39253144,"body_markdown":"If you look at the [SDK documentation][1], you will see a `deleteMessageBatch` method which takes a list of messages.\r\n\r\n\r\n  [1]: http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/sqs/AmazonSQSClient.html","title":"How to delete all messages from SQS Queue at once Java","body":"<p>If you look at the <a href=\"http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/sqs/AmazonSQSClient.html\" rel=\"nofollow\">SDK documentation</a>, you will see a <code>deleteMessageBatch</code> method which takes a list of messages.</p>\n"},{"tags":[],"owner":{"account_id":200716,"reputation":2145,"user_id":446717,"display_name":"Roberto"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1480092774,"creation_date":1480092774,"answer_id":40809540,"question_id":39253144,"body_markdown":"If you want to delete all messages you don&#39;t need batch delete, you should Purge the queue like so:\r\n\r\n    var request = new Amazon.SQS.Model.PurgeQueueRequest\r\n    {\r\n        QueueUrl = &quot;your queue url&quot;\r\n    };\r\n    _sqsClient.PurgeQueue(request);\r\n\r\nPurging a queue removes all the messages already in the queue","title":"How to delete all messages from SQS Queue at once Java","body":"<p>If you want to delete all messages you don't need batch delete, you should Purge the queue like so:</p>\n\n<pre><code>var request = new Amazon.SQS.Model.PurgeQueueRequest\n{\n    QueueUrl = \"your queue url\"\n};\n_sqsClient.PurgeQueue(request);\n</code></pre>\n\n<p>Purging a queue removes all the messages already in the queue</p>\n"},{"tags":[],"owner":{"account_id":133209,"reputation":24579,"user_id":334402,"accept_rate":50,"display_name":"Mick"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694190143,"creation_date":1694190143,"answer_id":77068493,"question_id":39253144,"body_markdown":"For completeness as this Q&amp;A comes up still when searching and Java 2 API examples are hard to find, here is the purge example in Java:\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    SqsClient sqs = SqsClient.builder()\r\n             .region(Region.EU_WEST_1)\r\n             .credentialsProvider(ProfileCredentialsProvider.create(&quot;default&quot;))\r\n             .build();\r\n\r\n\r\n    PurgeQueueRequest pqRequest = PurgeQueueRequest.builder()\r\n                .queueUrl(&quot;your SQS queu URL (not ARN!)&quot;)\r\n                .build();\r\n\r\n    sqs.purgeQueue(pqRequest);\r\n\r\n","title":"How to delete all messages from SQS Queue at once Java","body":"<p>For completeness as this Q&amp;A comes up still when searching and Java 2 API examples are hard to find, here is the purge example in Java:</p>\n<pre class=\"lang-js prettyprint-override\"><code>SqsClient sqs = SqsClient.builder()\n         .region(Region.EU_WEST_1)\n         .credentialsProvider(ProfileCredentialsProvider.create(&quot;default&quot;))\n         .build();\n\n\nPurgeQueueRequest pqRequest = PurgeQueueRequest.builder()\n            .queueUrl(&quot;your SQS queu URL (not ARN!)&quot;)\n            .build();\n\nsqs.purgeQueue(pqRequest);\n</code></pre>\n"}],"owner":{"account_id":6306906,"reputation":505,"user_id":4899746,"accept_rate":64,"display_name":"Jaidyn Belbin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5894,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"accepted_answer_id":39253262,"answer_count":4,"score":4,"last_activity_date":1694190143,"creation_date":1472655928,"question_id":39253144,"body_markdown":"According to the Amazon documentation, the code to delete a single message from the SQS Queue is: \r\n\r\n        // Delete a message\r\n    System.out.println(&quot;Deleting a message.\\n&quot;);\r\n    String messageReceiptHandle = messages.get(0).getReceiptHandle();\r\n    sqs.deleteMessage(new DeleteMessageRequest()\r\n        .withQueueUrl(myQueueUrl)\r\n        .withReceiptHandle(messageReceiptHandle));\r\n\r\nHowever, say I have more than 20 or so messages, do I really have to process this for every single message? Or is there a way to do a batch delete?\r\n\r\nThanks for any insights.\r\n\r\n\r\n","title":"How to delete all messages from SQS Queue at once Java","body":"<p>According to the Amazon documentation, the code to delete a single message from the SQS Queue is: </p>\n\n<pre><code>    // Delete a message\nSystem.out.println(\"Deleting a message.\\n\");\nString messageReceiptHandle = messages.get(0).getReceiptHandle();\nsqs.deleteMessage(new DeleteMessageRequest()\n    .withQueueUrl(myQueueUrl)\n    .withReceiptHandle(messageReceiptHandle));\n</code></pre>\n\n<p>However, say I have more than 20 or so messages, do I really have to process this for every single message? Or is there a way to do a batch delete?</p>\n\n<p>Thanks for any insights.</p>\n"},{"tags":["java","logging","log4j","runtime"],"comments":[{"owner":{"account_id":40503,"reputation":2087,"user_id":117376,"accept_rate":52,"display_name":"Cincinnati Joe"},"score":2,"creation_date":1312913338,"post_id":4598702,"comment_id":8357231,"body_markdown":"http://stackoverflow.com/questions/1200449/how-do-i-adjust-log4j-levels-at-runtime","body":"<a href=\"http://stackoverflow.com/questions/1200449/how-do-i-adjust-log4j-levels-at-runtime\" title=\"how do i adjust log4j levels at runtime\">stackoverflow.com/questions/1200449/&hellip;</a>"},{"owner":{"account_id":52375,"reputation":6473,"user_id":156522,"accept_rate":83,"display_name":"vsingh"},"score":0,"creation_date":1426859130,"post_id":4598702,"comment_id":46554469,"body_markdown":"Very similar to http://stackoverflow.com/questions/2115900/is-it-possible-to-reload-log4j-xml-log4j-properties-file-dynamically-in-tomcat/","body":"Very similar to <a href=\"http://stackoverflow.com/questions/2115900/is-it-possible-to-reload-log4j-xml-log4j-properties-file-dynamically-in-tomcat/\" title=\"is it possible to reload log4j xml log4j properties file dynamically in tomcat\">stackoverflow.com/questions/2115900/&hellip;</a>"},{"owner":{"account_id":3839832,"reputation":4671,"user_id":3183264,"accept_rate":91,"display_name":"slaadvak"},"score":4,"creation_date":1536089242,"post_id":4598702,"comment_id":91296285,"body_markdown":"Updated question for log4j2: https://stackoverflow.com/questions/23434252/programmatically-change-log-level-in-log4j2","body":"Updated question for log4j2: <a href=\"https://stackoverflow.com/questions/23434252/programmatically-change-log-level-in-log4j2\" title=\"programmatically change log level in log4j2\">stackoverflow.com/questions/23434252/&hellip;</a>"},{"owner":{"account_id":1401475,"reputation":1995,"user_id":1339923,"accept_rate":100,"display_name":"Lambart"},"score":2,"creation_date":1580752238,"post_id":4598702,"comment_id":106192674,"body_markdown":"NOTE that (almost) everything on this page is about log4j, not log4j2. This whole page is so full of confusion and misdirection that it&#39;s USELESS. Go to https://stackoverflow.com/questions/23434252/programmatically-change-log-level-in-log4j2 as @slaadvak recommends.","body":"NOTE that (almost) everything on this page is about log4j, not log4j2. This whole page is so full of confusion and misdirection that it&#39;s USELESS. Go to <a href=\"https://stackoverflow.com/questions/23434252/programmatically-change-log-level-in-log4j2\" title=\"programmatically change log level in log4j2\">stackoverflow.com/questions/23434252/&hellip;</a> as @slaadvak recommends."}],"answers":[{"comments":[{"owner":{"account_id":59477,"reputation":7989,"user_id":177971,"accept_rate":44,"display_name":"Ravi"},"score":0,"creation_date":1294178035,"post_id":4598829,"comment_id":5052661,"body_markdown":"But with this approach don&#39;t we have to compile and redeploy the app?","body":"But with this approach don&#39;t we have to compile and redeploy the app?"},{"owner":{"account_id":74910,"reputation":24557,"user_id":215030,"accept_rate":85,"display_name":"Aaron McIver"},"score":0,"creation_date":1294193730,"post_id":4598829,"comment_id":5054714,"body_markdown":"@Ravi No; you are grabbing the logger instance and setting it at runtime in the above code","body":"@Ravi No; you are grabbing the logger instance and setting it at runtime in the above code"},{"owner":{"account_id":167931,"reputation":1877,"user_id":393046,"accept_rate":43,"display_name":"CelinHC"},"score":7,"creation_date":1318790312,"post_id":4598829,"comment_id":9483358,"body_markdown":"For only runtime dependencies `LogManager.getLogger(Class.forName(&quot;org.hibernate.util.JDBCExceptionReporter&quot;)).setLevel(Level.FATAL);`","body":"For only runtime dependencies <code>LogManager.getLogger(Class.forName(&quot;org.hibernate.util.JDBCE&zwnj;&#8203;xceptionReporter&quot;)).&zwnj;&#8203;setLevel(Level.FATAL&zwnj;&#8203;);</code>"},{"owner":{"account_id":469080,"reputation":3843,"user_id":875449,"display_name":"ChrisCantrell"},"score":11,"creation_date":1383078972,"post_id":4598829,"comment_id":29209697,"body_markdown":"Note that the log4j 2 API does not provide a &quot;setLevel&quot; method.","body":"Note that the log4j 2 API does not provide a &quot;setLevel&quot; method."},{"owner":{"account_id":3842362,"reputation":2222,"user_id":3185056,"accept_rate":78,"display_name":"TheMonkWhoSoldHisCode"},"score":6,"creation_date":1405070254,"post_id":4598829,"comment_id":38291717,"body_markdown":"But this only sets the root logger , isn&#39;t it? If individual levels are set for loggers under root, setting the root logger will have no effect on those LOGGER&#39;s. Wouldn&#39;t we have to do something like root.getLoggerRepository().getCurrentCategories(), iterate over each instance of the logger and set LEVELs for each logger? @AaronMcIver","body":"But this only sets the root logger , isn&#39;t it? If individual levels are set for loggers under root, setting the root logger will have no effect on those LOGGER&#39;s. Wouldn&#39;t we have to do something like root.getLoggerRepository().getCurrentCategories(), iterate over each instance of the logger and set LEVELs for each logger? @AaronMcIver"},{"owner":{"account_id":74910,"reputation":24557,"user_id":215030,"accept_rate":85,"display_name":"Aaron McIver"},"score":0,"creation_date":1405187438,"post_id":4598829,"comment_id":38333191,"body_markdown":"@VishalP If you are using the latest version of Log4j 2 you should be using implementation classes to solve this...","body":"@VishalP If you are using the latest version of Log4j 2 you should be using implementation classes to solve this..."},{"owner":{"account_id":1380055,"reputation":17338,"user_id":1313268,"accept_rate":88,"display_name":"CorayThan"},"score":9,"creation_date":1405964339,"post_id":4598829,"comment_id":38627806,"body_markdown":"@ChrisCantrell Log4j 2 [does provide a way to do this](http://stackoverflow.com/questions/23434252/programmatically-change-log-level-in-log4j2), although it&#39;s not as simple.","body":"@ChrisCantrell Log4j 2 <a href=\"http://stackoverflow.com/questions/23434252/programmatically-change-log-level-in-log4j2\">does provide a way to do this</a>, although it&#39;s not as simple."},{"owner":{"account_id":118444,"reputation":20516,"user_id":309483,"accept_rate":88,"display_name":"Janus Troelsen"},"score":0,"creation_date":1417197184,"post_id":4598829,"comment_id":42873068,"body_markdown":"how does this compare to `LogManager.getLogManager().getLogger(Logger.GLOBAL_LOGGER_NAME).setLevel(Level.DEBUG)`?","body":"how does this compare to <code>LogManager.getLogManager().getLogger(Logger.GLOBAL_LOGGER_NA&zwnj;&#8203;ME).setLevel(Level.D&zwnj;&#8203;EBUG)</code>?"},{"owner":{"account_id":3211455,"reputation":1907,"user_id":2711378,"accept_rate":94,"display_name":"Amanuel Nega"},"score":0,"creation_date":1420708999,"post_id":4598829,"comment_id":44077714,"body_markdown":"will it applly to only the current class","body":"will it applly to only the current class"},{"owner":{"account_id":40307,"reputation":3297,"user_id":116810,"accept_rate":80,"display_name":"Kimball Robinson"},"score":2,"creation_date":1441040218,"post_id":4598829,"comment_id":52507445,"body_markdown":"Log4j2 can be configured to refresh its configuration by scanning the log4j2.xml file (or equivalent) at given intervals.  E.g.  &lt;Configuration status=&quot;warn&quot; monitorInterval=&quot;5&quot; name=&quot;tryItApp&quot; packages=&quot;&quot;&gt;","body":"Log4j2 can be configured to refresh its configuration by scanning the log4j2.xml file (or equivalent) at given intervals.  E.g.  &lt;Configuration status=&quot;warn&quot; monitorInterval=&quot;5&quot; name=&quot;tryItApp&quot; packages=&quot;&quot;&gt;"},{"owner":{"account_id":86049,"reputation":7044,"user_id":239558,"accept_rate":72,"display_name":"user239558"},"score":4,"creation_date":1521542624,"post_id":4598829,"comment_id":85764878,"body_markdown":"This answer should be downvoted, changed, removed or something.  It only causes confusion as it doesn&#39;t document how to solve it for log4j2.","body":"This answer should be downvoted, changed, removed or something.  It only causes confusion as it doesn&#39;t document how to solve it for log4j2."}],"tags":[],"owner":{"account_id":74910,"reputation":24557,"user_id":215030,"accept_rate":85,"display_name":"Aaron McIver"},"comment_count":11,"down_vote_count":4,"up_vote_count":100,"is_accepted":true,"score":96,"last_activity_date":1383090904,"creation_date":1294177913,"answer_id":4598829,"question_id":4598702,"body_markdown":"Changing the log level is simple; modifying other portions of the configuration will pose a more in depth approach.\r\n\r\n    LogManager.getRootLogger().setLevel(Level.DEBUG);\r\n\r\nThe changes are permanent through the life cyle of the `Logger`. On reinitialization the configuration will be read and used as setting the level at runtime does not persist the level change.\r\n\r\n**UPDATE:** If you are using Log4j 2 you should remove the calls to `setLevel` per the [documentation][1] as this can be achieved via implementation classes.\r\n\r\n&gt; Calls to logger.setLevel() or similar methods are not supported in the\r\n&gt; API. Applications should remove these. Equivalent functionality is\r\n&gt; provided in the Log4j 2 implementation classes but may leave the\r\n&gt; application susceptible to changes in Log4j 2 internals.\r\n\r\n\r\n\r\n  [1]: http://logging.apache.org/log4j/2.x/manual/migration.html","title":"Dynamically Changing log4j log level","body":"<p>Changing the log level is simple; modifying other portions of the configuration will pose a more in depth approach.</p>\n\n<pre><code>LogManager.getRootLogger().setLevel(Level.DEBUG);\n</code></pre>\n\n<p>The changes are permanent through the life cyle of the <code>Logger</code>. On reinitialization the configuration will be read and used as setting the level at runtime does not persist the level change.</p>\n\n<p><strong>UPDATE:</strong> If you are using Log4j 2 you should remove the calls to <code>setLevel</code> per the <a href=\"http://logging.apache.org/log4j/2.x/manual/migration.html\">documentation</a> as this can be achieved via implementation classes.</p>\n\n<blockquote>\n  <p>Calls to logger.setLevel() or similar methods are not supported in the\n  API. Applications should remove these. Equivalent functionality is\n  provided in the Log4j 2 implementation classes but may leave the\n  application susceptible to changes in Log4j 2 internals.</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":165768,"reputation":3642,"user_id":389489,"accept_rate":78,"display_name":"Somu"},"score":9,"creation_date":1322594948,"post_id":4599083,"comment_id":10249738,"body_markdown":"A word of caution regarding log4j watchdog approach: &quot;Because the configureAndWatch launches a separate watchdog thread, and because there is no way to stop this thread in log4j 1.2, the configureAndWatch method is unsafe for use in J2EE envrironments where applications are recycled&quot;.\nReference: [Log4J FAQ](http://logging.apache.org/log4j/1.2/faq.html#a3.6)","body":"A word of caution regarding log4j watchdog approach: &quot;Because the configureAndWatch launches a separate watchdog thread, and because there is no way to stop this thread in log4j 1.2, the configureAndWatch method is unsafe for use in J2EE envrironments where applications are recycled&quot;. Reference: <a href=\"http://logging.apache.org/log4j/1.2/faq.html#a3.6\" rel=\"nofollow noreferrer\">Log4J FAQ</a>"},{"owner":{"account_id":104301,"reputation":2012,"user_id":278938,"accept_rate":68,"display_name":"Robin Bajaj"},"score":0,"creation_date":1380312528,"post_id":4599083,"comment_id":28169225,"body_markdown":"If i was to use configureAndWatch functionality of Log4j I could stop that watchdog thread in an EJB&#39;s @PostDestroy method (that&#39;s a good enough indicator of when the container is shutting down) That&#39;s it ?\nOr is there more to it that I am missing..!","body":"If i was to use configureAndWatch functionality of Log4j I could stop that watchdog thread in an EJB&#39;s @PostDestroy method (that&#39;s a good enough indicator of when the container is shutting down) That&#39;s it ? Or is there more to it that I am missing..!"},{"owner":{"account_id":104301,"reputation":2012,"user_id":278938,"accept_rate":68,"display_name":"Robin Bajaj"},"score":0,"creation_date":1380312860,"post_id":4599083,"comment_id":28169360,"body_markdown":"sorry I meant @PreDestroy method","body":"sorry I meant @PreDestroy method"},{"owner":{"account_id":873159,"reputation":26684,"user_id":923560,"accept_rate":47,"display_name":"Abdull"},"score":0,"creation_date":1453124378,"post_id":4599083,"comment_id":57451646,"body_markdown":"&quot;*Log4j registers its loggers as JMX MBeans.*&quot;. My servlet uses log4j 1.2 I don&#39;t see any log4j MBeans.","body":"&quot;<i>Log4j registers its loggers as JMX MBeans.</i>&quot;. My servlet uses log4j 1.2 I don&#39;t see any log4j MBeans."},{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":0,"creation_date":1473070920,"post_id":4599083,"comment_id":65988415,"body_markdown":"**All you need to do is to invoke DOMConfigurator.configureAndWatch() once.** How can I achieve this ?","body":"<b>All you need to do is to invoke DOMConfigurator.configureAndWatch() once.</b> How can I achieve this ?"},{"owner":{"account_id":86049,"reputation":7044,"user_id":239558,"accept_rate":72,"display_name":"user239558"},"score":2,"creation_date":1521542776,"post_id":4599083,"comment_id":85764974,"body_markdown":"&quot;As described by Aaron&quot; - who is Aaron, and what is described?  This answer needs to say whether there&#39;s a programmatic way to do this, and the answer seems to be NO.  Please say so, as this is what you&#39;d expect to exist, and there is no such solution apparently.","body":"&quot;As described by Aaron&quot; - who is Aaron, and what is described?  This answer needs to say whether there&#39;s a programmatic way to do this, and the answer seems to be NO.  Please say so, as this is what you&#39;d expect to exist, and there is no such solution apparently."}],"tags":[],"owner":{"account_id":28208,"reputation":14132,"user_id":75126,"accept_rate":100,"display_name":"mhaller"},"comment_count":6,"down_vote_count":1,"up_vote_count":99,"is_accepted":false,"score":98,"last_activity_date":1354807818,"creation_date":1294179762,"answer_id":4599083,"question_id":4598702,"body_markdown":"File Watchdog\r\n==\r\nLog4j is able to watch the `log4j.xml` file for configuration changes. If you change the log4j file, log4j will automatically refresh the log levels according to your changes. See the documentation of `org.apache.log4j.xml.DOMConfigurator.configureAndWatch(String,long`) for details. The default wait time between checks is 60 seconds. These changes would be persistent, since you directly change the configuration file on the filesystem. All you need to do is to invoke DOMConfigurator.configureAndWatch() once.\r\n\r\n*Caution: configureAndWatch method is unsafe for use in J2EE environments due to a Thread leak*\r\n\r\nJMX\r\n==\r\nAnother way to set the log level (or reconfiguring in general) log4j is by using JMX. Log4j registers its loggers as JMX MBeans. Using the application servers MBeanServer consoles (or JDK&#39;s jconsole.exe) you can reconfigure each individual loggers. These changes are not persistent and would be reset to the config as set in the configuration file after you restart your application (server).\r\n\r\nSelf-Made\r\n==\r\nAs described by Aaron, you can set the log level programmatically. You can implement it in your application in the way you would like it to happen. For example, you could have a GUI where the user or admin changes the log level and then call the `setLevel()` methods on the logger. Whether you persist the settings somewhere or not is up to you.\r\n","title":"Dynamically Changing log4j log level","body":"<h1>File Watchdog</h1>\n\n<p>Log4j is able to watch the <code>log4j.xml</code> file for configuration changes. If you change the log4j file, log4j will automatically refresh the log levels according to your changes. See the documentation of <code>org.apache.log4j.xml.DOMConfigurator.configureAndWatch(String,long</code>) for details. The default wait time between checks is 60 seconds. These changes would be persistent, since you directly change the configuration file on the filesystem. All you need to do is to invoke DOMConfigurator.configureAndWatch() once.</p>\n\n<p><em>Caution: configureAndWatch method is unsafe for use in J2EE environments due to a Thread leak</em></p>\n\n<h1>JMX</h1>\n\n<p>Another way to set the log level (or reconfiguring in general) log4j is by using JMX. Log4j registers its loggers as JMX MBeans. Using the application servers MBeanServer consoles (or JDK's jconsole.exe) you can reconfigure each individual loggers. These changes are not persistent and would be reset to the config as set in the configuration file after you restart your application (server).</p>\n\n<h1>Self-Made</h1>\n\n<p>As described by Aaron, you can set the log level programmatically. You can implement it in your application in the way you would like it to happen. For example, you could have a GUI where the user or admin changes the log level and then call the <code>setLevel()</code> methods on the logger. Whether you persist the settings somewhere or not is up to you.</p>\n"},{"comments":[{"owner":{"account_id":40307,"reputation":3297,"user_id":116810,"accept_rate":80,"display_name":"Kimball Robinson"},"score":0,"creation_date":1550081164,"post_id":32316234,"comment_id":96142664,"body_markdown":"@vsingh, are you deploying inside spring boot, tomcat, or a container or with an IDE?  Sometimes there can be extra steps in those cases (not the fault of log4j2) -- basically the app can&#39;t see the file changing because it&#39;s been copied to another location by a framework or tool.","body":"@vsingh, are you deploying inside spring boot, tomcat, or a container or with an IDE?  Sometimes there can be extra steps in those cases (not the fault of log4j2) -- basically the app can&#39;t see the file changing because it&#39;s been copied to another location by a framework or tool."},{"owner":{"account_id":4205998,"reputation":177,"user_id":3444882,"accept_rate":100,"display_name":"Pupusa"},"score":0,"creation_date":1551287655,"post_id":32316234,"comment_id":96588804,"body_markdown":"Hi I tested this on Jboss6.4 and I updated the log4j2 config file under the location (inside of .war file) where app can see the file. However it still didn&#39;t work. Any suggestion?","body":"Hi I tested this on Jboss6.4 and I updated the log4j2 config file under the location (inside of .war file) where app can see the file. However it still didn&#39;t work. Any suggestion?"}],"tags":[],"owner":{"account_id":40307,"reputation":3297,"user_id":116810,"accept_rate":80,"display_name":"Kimball Robinson"},"comment_count":2,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1550081090,"creation_date":1441040294,"answer_id":32316234,"question_id":4598702,"body_markdown":"Log4j2 can be configured to refresh its configuration by scanning the log4j**2**.xml file (or equivalent) at given intervals. Just add the &quot;**monitorInterval**&quot; parameter to your configuration tag.  See line 2 of the sample log4j**2**.xml file, which tells log4j to to re-scan its configuration if more than 5 seconds have passed since the last log event.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;\r\n    &lt;Configuration status=&quot;warn&quot; monitorInterval=&quot;5&quot; name=&quot;tryItApp&quot; packages=&quot;&quot;&gt;\r\n    \r\n    \t&lt;Appenders&gt;\r\n    \t\t&lt;RollingFile name=&quot;MY_TRY_IT&quot;\r\n    \t\t             fileName=&quot;/var/log/tryIt.log&quot;\r\n    \t\t             filePattern=&quot;/var/log/tryIt-%i.log.gz&quot;&gt;\r\n    \t\t\t&lt;Policies&gt;\r\n    \t\t\t\t&lt;SizeBasedTriggeringPolicy size=&quot;25 MB&quot;/&gt;\r\n    \t\t\t&lt;/Policies&gt;\r\n                ...\r\n    \t\t&lt;/RollingFile&gt;\r\n    \t&lt;/Appenders&gt;\r\n    \r\n    \r\n    \t&lt;Loggers&gt;\r\n    \t\t&lt;Root level=&quot;error&quot;&gt;\r\n    \t\t\t&lt;AppenderRef ref=&quot;MY_TRY_IT&quot;/&gt;\r\n    \t\t&lt;/Root&gt;\r\n    \t&lt;/Loggers&gt;\r\n  \r\n    &lt;/Configuration&gt;\r\n\r\n\r\nThere are extra steps to make this work if you are deploying to a tomcat instance, inside an IDE, or when using spring boot.  That seems somewhat out of scope here and probably merits a separate question.","title":"Dynamically Changing log4j log level","body":"<p>Log4j2 can be configured to refresh its configuration by scanning the log4j<strong>2</strong>.xml file (or equivalent) at given intervals. Just add the \"<strong>monitorInterval</strong>\" parameter to your configuration tag.  See line 2 of the sample log4j<strong>2</strong>.xml file, which tells log4j to to re-scan its configuration if more than 5 seconds have passed since the last log event.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;Configuration status=\"warn\" monitorInterval=\"5\" name=\"tryItApp\" packages=\"\"&gt;\n\n    &lt;Appenders&gt;\n        &lt;RollingFile name=\"MY_TRY_IT\"\n                     fileName=\"/var/log/tryIt.log\"\n                     filePattern=\"/var/log/tryIt-%i.log.gz\"&gt;\n            &lt;Policies&gt;\n                &lt;SizeBasedTriggeringPolicy size=\"25 MB\"/&gt;\n            &lt;/Policies&gt;\n            ...\n        &lt;/RollingFile&gt;\n    &lt;/Appenders&gt;\n\n\n    &lt;Loggers&gt;\n        &lt;Root level=\"error\"&gt;\n            &lt;AppenderRef ref=\"MY_TRY_IT\"/&gt;\n        &lt;/Root&gt;\n    &lt;/Loggers&gt;\n\n&lt;/Configuration&gt;\n</code></pre>\n\n<p>There are extra steps to make this work if you are deploying to a tomcat instance, inside an IDE, or when using spring boot.  That seems somewhat out of scope here and probably merits a separate question.</p>\n"},{"comments":[{"owner":{"account_id":105902,"reputation":3968,"user_id":282345,"accept_rate":88,"display_name":"asgs"},"score":0,"creation_date":1459455852,"post_id":35083184,"comment_id":60307893,"body_markdown":"what is the triggering point of this method? how does it know this method has to be invoked whenever there&#39;s a change in the log4j config?","body":"what is the triggering point of this method? how does it know this method has to be invoked whenever there&#39;s a change in the log4j config?"},{"owner":{"account_id":105902,"reputation":3968,"user_id":282345,"accept_rate":88,"display_name":"asgs"},"score":0,"creation_date":1459575761,"post_id":35083184,"comment_id":60358128,"body_markdown":"I still don&#39;t get what you mean &quot;on demand&quot;. Can you please show a snippet where you hook this method up?","body":"I still don&#39;t get what you mean &quot;on demand&quot;. Can you please show a snippet where you hook this method up?"},{"owner":{"account_id":5623469,"reputation":1703,"user_id":4452578,"display_name":"ISparkes"},"score":2,"creation_date":1459849782,"post_id":35083184,"comment_id":60459975,"body_markdown":"Here you go: This is a snippet from the Controller where we use it. We have an admin page with some links to dynamically reconfigure logging, which then makes a GET to the link \n\n_/admin/setLogLevel?level=Error_\n\n and then we catch this in the controller like this\n\n_@RequestMapping(value = &quot;setLogLevel&quot;, method = RequestMethod.GET)\n  public ModelAndView setLogLevel(@RequestParam(value = &quot;level&quot;, required = true) String level) {\n\n    Log4jReconfigurator.reconfigureExisting(level);_","body":"Here you go: This is a snippet from the Controller where we use it. We have an admin page with some links to dynamically reconfigure logging, which then makes a GET to the link   <i>/admin/setLogLevel?level=Error</i>   and then we catch this in the controller like this  <i>@RequestMapping(value = &quot;setLogLevel&quot;, method = RequestMethod.GET)   public ModelAndView setLogLevel(@RequestParam(value = &quot;level&quot;, required = true) String level) {      Log4jReconfigurator.reconfigureExisting(level);</i>"},{"owner":{"account_id":5623469,"reputation":1703,"user_id":4452578,"display_name":"ISparkes"},"score":0,"creation_date":1459850118,"post_id":35083184,"comment_id":60460248,"body_markdown":"So, &quot;on demand&quot; means &quot;when the user clicks the button&quot; in my case","body":"So, &quot;on demand&quot; means &quot;when the user clicks the button&quot; in my case"},{"owner":{"account_id":105902,"reputation":3968,"user_id":282345,"accept_rate":88,"display_name":"asgs"},"score":0,"creation_date":1459852892,"post_id":35083184,"comment_id":60462329,"body_markdown":"Ah, got you. So your admin console has to make a request to invoke this method.","body":"Ah, got you. So your admin console has to make a request to invoke this method."}],"tags":[],"owner":{"account_id":5623469,"reputation":1703,"user_id":4452578,"display_name":"ISparkes"},"comment_count":5,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1454066236,"creation_date":1454066236,"answer_id":35083184,"question_id":4598702,"body_markdown":"With log4j 1.x I find the best way is to use a DOMConfigurator to submit one of a predefined set of XML log configurations (say, one for normal use and one for debugging).\r\n\r\nMaking use of these can be done with something like this:\r\n\r\n      public static void reconfigurePredefined(String newLoggerConfigName) {\r\n        String name = newLoggerConfigName.toLowerCase();\r\n        if (&quot;default&quot;.equals(name)) {\r\n          name = &quot;log4j.xml&quot;;\r\n        } else {\r\n          name = &quot;log4j-&quot; + name + &quot;.xml&quot;;\r\n        }\r\n    \r\n        if (Log4jReconfigurator.class.getResource(&quot;/&quot; + name) != null) {\r\n          String logConfigPath = Log4jReconfigurator.class.getResource(&quot;/&quot; + name).getPath();\r\n          logger.warn(&quot;Using log4j configuration: &quot; + logConfigPath);\r\n          try (InputStream defaultIs = Log4jReconfigurator.class.getResourceAsStream(&quot;/&quot; + name)) {\r\n            new DOMConfigurator().doConfigure(defaultIs, LogManager.getLoggerRepository());\r\n          } catch (IOException e) {\r\n            logger.error(&quot;Failed to reconfigure log4j configuration, could not find file &quot; + logConfigPath + &quot; on the classpath&quot;, e);\r\n          } catch (FactoryConfigurationError e) {\r\n            logger.error(&quot;Failed to reconfigure log4j configuration, could not load file &quot; + logConfigPath, e);\r\n          }\r\n        } else {\r\n          logger.error(&quot;Could not find log4j configuration file &quot; + name + &quot;.xml on classpath&quot;);\r\n        }\r\n      }\r\n\r\nJust call this with the appropriate config name, and make sure that you put the templates on the classpath.","title":"Dynamically Changing log4j log level","body":"<p>With log4j 1.x I find the best way is to use a DOMConfigurator to submit one of a predefined set of XML log configurations (say, one for normal use and one for debugging).</p>\n\n<p>Making use of these can be done with something like this:</p>\n\n<pre><code>  public static void reconfigurePredefined(String newLoggerConfigName) {\n    String name = newLoggerConfigName.toLowerCase();\n    if (\"default\".equals(name)) {\n      name = \"log4j.xml\";\n    } else {\n      name = \"log4j-\" + name + \".xml\";\n    }\n\n    if (Log4jReconfigurator.class.getResource(\"/\" + name) != null) {\n      String logConfigPath = Log4jReconfigurator.class.getResource(\"/\" + name).getPath();\n      logger.warn(\"Using log4j configuration: \" + logConfigPath);\n      try (InputStream defaultIs = Log4jReconfigurator.class.getResourceAsStream(\"/\" + name)) {\n        new DOMConfigurator().doConfigure(defaultIs, LogManager.getLoggerRepository());\n      } catch (IOException e) {\n        logger.error(\"Failed to reconfigure log4j configuration, could not find file \" + logConfigPath + \" on the classpath\", e);\n      } catch (FactoryConfigurationError e) {\n        logger.error(\"Failed to reconfigure log4j configuration, could not load file \" + logConfigPath, e);\n      }\n    } else {\n      logger.error(\"Could not find log4j configuration file \" + name + \".xml on classpath\");\n    }\n  }\n</code></pre>\n\n<p>Just call this with the appropriate config name, and make sure that you put the templates on the classpath.</p>\n"},{"comments":[{"owner":{"account_id":2850838,"reputation":1053,"user_id":2452417,"accept_rate":100,"display_name":"Azim"},"score":3,"creation_date":1468411887,"post_id":37056483,"comment_id":64115051,"body_markdown":"Whatever you mentioned seems to be fine, but the question is about dynamically changing the logging level.","body":"Whatever you mentioned seems to be fine, but the question is about dynamically changing the logging level."},{"owner":{"account_id":6619736,"reputation":3818,"user_id":5111870,"accept_rate":57,"display_name":"kk."},"score":0,"creation_date":1498128144,"post_id":37056483,"comment_id":76377110,"body_markdown":"To do this, you need to restart the service. This does not change the logging levels dynamically.","body":"To do this, you need to restart the service. This does not change the logging levels dynamically."}],"tags":[],"owner":{"account_id":3992551,"reputation":1386,"user_id":3290983,"display_name":"Anandkumar"},"comment_count":2,"down_vote_count":4,"up_vote_count":8,"is_accepted":false,"score":4,"last_activity_date":1553263172,"creation_date":1462468587,"answer_id":37056483,"question_id":4598702,"body_markdown":"&gt; **This answer won&#39;t help you to change the logging level dynamically, you need to restart the service, if you are fine restarting the\r\n&gt; service, please use the below solution**\r\n\r\n\r\nI did this to Change log4j log level and it worked for me, I have n&#39;t referred any document. I used this system property value to set my logfile name. I used the same technique to set logging level as well, and it worked \r\n\r\npassed this as JVM parameter (I use Java 1.7)\r\n\r\n **Sorry this won&#39;t dynamically change the logging level, it requires a restart of the service**\r\n\r\n    java -Dlogging.level=DEBUG -cp xxxxxx.jar  xxxxx.java\r\n\r\nin the log4j.properties file, I added this entry \r\n\r\n    log4j.rootLogger=${logging.level},file,stdout\r\n\r\nI tried \r\n\r\n     java -Dlogging.level=DEBUG -cp xxxxxx.jar  xxxxx.java\r\n     java -Dlogging.level=INFO-cp xxxxxx.jar  xxxxx.java\r\n     java -Dlogging.level=OFF -cp xxxxxx.jar  xxxxx.java\r\n\r\nIt all worked. hope this helps!\r\n\r\nI have these following dependencies in my pom.xml\r\n\r\n    &lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;log4j&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;log4j&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.2.17&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;log4j&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;apache-log4j-extras&lt;/artifactId&gt;\r\n    \t&lt;version&gt;1.2.17&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"Dynamically Changing log4j log level","body":"<blockquote>\n  <p><strong>This answer won't help you to change the logging level dynamically, you need to restart the service, if you are fine restarting the\n  service, please use the below solution</strong></p>\n</blockquote>\n\n<p>I did this to Change log4j log level and it worked for me, I have n't referred any document. I used this system property value to set my logfile name. I used the same technique to set logging level as well, and it worked </p>\n\n<p>passed this as JVM parameter (I use Java 1.7)</p>\n\n<p><strong>Sorry this won't dynamically change the logging level, it requires a restart of the service</strong></p>\n\n<pre><code>java -Dlogging.level=DEBUG -cp xxxxxx.jar  xxxxx.java\n</code></pre>\n\n<p>in the log4j.properties file, I added this entry </p>\n\n<pre><code>log4j.rootLogger=${logging.level},file,stdout\n</code></pre>\n\n<p>I tried </p>\n\n<pre><code> java -Dlogging.level=DEBUG -cp xxxxxx.jar  xxxxx.java\n java -Dlogging.level=INFO-cp xxxxxx.jar  xxxxx.java\n java -Dlogging.level=OFF -cp xxxxxx.jar  xxxxx.java\n</code></pre>\n\n<p>It all worked. hope this helps!</p>\n\n<p>I have these following dependencies in my pom.xml</p>\n\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j&lt;/artifactId&gt;\n            &lt;version&gt;1.2.17&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;log4j&lt;/groupId&gt;\n    &lt;artifactId&gt;apache-log4j-extras&lt;/artifactId&gt;\n    &lt;version&gt;1.2.17&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3077598,"reputation":1,"user_id":2606570,"display_name":"user2606570"},"comment_count":0,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1471362485,"creation_date":1471362011,"answer_id":38979121,"question_id":4598702,"body_markdown":"You can use following code snippet\r\n\r\n    ((ch.qos.logback.classic.Logger)LoggerFactory.getLogger(packageName)).setLevel(ch.qos.logback.classic.Level.toLevel(logLevel));","title":"Dynamically Changing log4j log level","body":"<p>You can use following code snippet</p>\n\n<pre><code>((ch.qos.logback.classic.Logger)LoggerFactory.getLogger(packageName)).setLevel(ch.qos.logback.classic.Level.toLevel(logLevel));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6619736,"reputation":3818,"user_id":5111870,"accept_rate":57,"display_name":"kk."},"comment_count":0,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1498135789,"creation_date":1498135789,"answer_id":44699902,"question_id":4598702,"body_markdown":"If you would want to change the logging level of all the loggers use the below method. This will enumerate over all the loggers and change the logging level to given level. Please make sure that you **DO NOT** have `log4j.appender.loggerName.Threshold=DEBUG` property set in your `log4j.properties` file.\r\n\r\n   \r\n\r\n    public static void changeLogLevel(Level level) {\r\n        Enumeration&lt;?&gt; loggers = LogManager.getCurrentLoggers();\r\n        while(loggers.hasMoreElements()) {\r\n        \tLogger logger = (Logger) loggers.nextElement();\r\n        \tlogger.setLevel(level);\r\n        }\r\n    }","title":"Dynamically Changing log4j log level","body":"<p>If you would want to change the logging level of all the loggers use the below method. This will enumerate over all the loggers and change the logging level to given level. Please make sure that you <strong>DO NOT</strong> have <code>log4j.appender.loggerName.Threshold=DEBUG</code> property set in your <code>log4j.properties</code> file.</p>\n\n<pre><code>public static void changeLogLevel(Level level) {\n    Enumeration&lt;?&gt; loggers = LogManager.getCurrentLoggers();\n    while(loggers.hasMoreElements()) {\n        Logger logger = (Logger) loggers.nextElement();\n        logger.setLevel(level);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16027697,"reputation":1,"user_id":11567525,"display_name":"Thomas Bernardin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1574762872,"creation_date":1574762872,"answer_id":59048397,"question_id":4598702,"body_markdown":"I have used this method with success to reduce the verbosity of the &quot;org.apache.http&quot; logs:\r\n```\r\nch.qos.logback.classic.Logger logger = (ch.qos.logback.classic.Logger) LoggerFactory.getLogger(&quot;org.apache.http&quot;);\r\nlogger.setLevel(Level.TRACE);\r\nlogger.setAdditive(false);\r\n```\r\n\r\n","title":"Dynamically Changing log4j log level","body":"<p>I have used this method with success to reduce the verbosity of the \"org.apache.http\" logs:</p>\n\n<pre><code>ch.qos.logback.classic.Logger logger = (ch.qos.logback.classic.Logger) LoggerFactory.getLogger(\"org.apache.http\");\nlogger.setLevel(Level.TRACE);\nlogger.setAdditive(false);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7249459,"reputation":467,"user_id":5530309,"display_name":"mohamed stitane"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1588951609,"creation_date":1587989196,"answer_id":61458528,"question_id":4598702,"body_markdown":"For log4j 2 API , you can use \r\n\r\n```\r\nLogger logger = LogManager.getRootLogger();\r\nConfigurator.setAllLevels(logger.getName(), Level.getLevel(level));\r\n\r\n```","title":"Dynamically Changing log4j log level","body":"<p>For log4j 2 API , you can use </p>\n\n<pre><code>Logger logger = LogManager.getRootLogger();\nConfigurator.setAllLevels(logger.getName(), Level.getLevel(level));\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21837,"reputation":1262,"user_id":53387,"display_name":"jdwyah"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694189834,"creation_date":1694189834,"answer_id":77068467,"question_id":4598702,"body_markdown":"The question breaks down into 2 parts:\r\n 1. Where does the user input the logger and level? ie How do you capture the intent to change the log level?\r\n 2. How do you broadcast this intent information to all relevant services?\r\n \r\n\r\nCollecting the user intent comes in a few flavors:\r\n - An API request to change the levels eg `POST /log-levels?logger=com.example.FooClass&amp;level=DEBUG`\r\n - A JMX Request\r\n - A Shared File\r\n - A Centralized UI (eg DIY, SpringBoot, Prefab)\r\n\r\nPropagating the change can be done by:\r\n\r\n - Configuring scan / polling &amp; NFS or remote URI\r\n - Service discovery and pushing out the change\r\n - Pub/Sub (Redis / SSE)\r\n - A log filter that looks in dynamic configuration to get the log level (the dynamic config system then uses something like pub sub).\r\n\r\nA more detailed write-up in https://www.prefab.cloud/blog/dynamically-changing-java-log-level/ with an example of the filter approach and a look at centralized UIs.\r\n\r\n\r\nAs far as whether the changes will be permanent, that depends on which approach you take. If you PubSub or ServiceDiscovery, the change will only take effect until something restarts, because the new service won&#39;t get the message. You&#39;ll want something more like Kafka / Redis Streams if you want to be able to have new instance of your application get the current value of the log level. That&#39;s basically the dynamic configuration option.\r\n","title":"Dynamically Changing log4j log level","body":"<p>The question breaks down into 2 parts:</p>\n<ol>\n<li>Where does the user input the logger and level? ie How do you capture the intent to change the log level?</li>\n<li>How do you broadcast this intent information to all relevant services?</li>\n</ol>\n<p>Collecting the user intent comes in a few flavors:</p>\n<ul>\n<li>An API request to change the levels eg <code>POST /log-levels?logger=com.example.FooClass&amp;level=DEBUG</code></li>\n<li>A JMX Request</li>\n<li>A Shared File</li>\n<li>A Centralized UI (eg DIY, SpringBoot, Prefab)</li>\n</ul>\n<p>Propagating the change can be done by:</p>\n<ul>\n<li>Configuring scan / polling &amp; NFS or remote URI</li>\n<li>Service discovery and pushing out the change</li>\n<li>Pub/Sub (Redis / SSE)</li>\n<li>A log filter that looks in dynamic configuration to get the log level (the dynamic config system then uses something like pub sub).</li>\n</ul>\n<p>A more detailed write-up in <a href=\"https://www.prefab.cloud/blog/dynamically-changing-java-log-level/\" rel=\"nofollow noreferrer\">https://www.prefab.cloud/blog/dynamically-changing-java-log-level/</a> with an example of the filter approach and a look at centralized UIs.</p>\n<p>As far as whether the changes will be permanent, that depends on which approach you take. If you PubSub or ServiceDiscovery, the change will only take effect until something restarts, because the new service won't get the message. You'll want something more like Kafka / Redis Streams if you want to be able to have new instance of your application get the current value of the log level. That's basically the dynamic configuration option.</p>\n"}],"owner":{"account_id":59477,"reputation":7989,"user_id":177971,"accept_rate":44,"display_name":"Ravi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":196519,"favorite_count":0,"down_vote_count":1,"up_vote_count":145,"accepted_answer_id":4598829,"answer_count":10,"score":144,"last_activity_date":1694189834,"creation_date":1294177123,"question_id":4598702,"body_markdown":"What are the different approaches for changing the log4j log level dynamically, so that I will not have to redeploy the application. Will the changes be permanent in those cases? ","title":"Dynamically Changing log4j log level","body":"<p>What are the different approaches for changing the log4j log level dynamically, so that I will not have to redeploy the application. Will the changes be permanent in those cases? </p>\n"},{"tags":["java","circular-dependency"],"comments":[{"owner":{"account_id":36137,"reputation":178799,"user_id":102937,"accept_rate":90,"display_name":"Robert Harvey"},"score":4,"creation_date":1694099485,"post_id":77060809,"comment_id":135849622,"body_markdown":"`getInstance` doesn&#39;t call any other class&#39;s constructor.","body":"<code>getInstance</code> doesn&#39;t call any other class&#39;s constructor."},{"owner":{"account_id":1532505,"reputation":1954,"user_id":1429367,"accept_rate":71,"display_name":"leokom"},"score":0,"creation_date":1694157953,"post_id":77060809,"comment_id":135857152,"body_markdown":"`getInstance` indirectly reaches the field of `InstanceHolder`, which is `final` and was thus expected to call its initialization before returning. @RobertHarvey However see the accepted answer https://stackoverflow.com/a/77061115/1429367 which describes the theory behind this well","body":"<code>getInstance</code> indirectly reaches the field of <code>InstanceHolder</code>, which is <code>final</code> and was thus expected to call its initialization before returning. @RobertHarvey However see the accepted answer <a href=\"https://stackoverflow.com/a/77061115/1429367\">stackoverflow.com/a/77061115/1429367</a> which describes the theory behind this well"}],"answers":[{"comments":[{"owner":{"account_id":1532505,"reputation":1954,"user_id":1429367,"accept_rate":71,"display_name":"leokom"},"score":0,"creation_date":1694155333,"post_id":77061115,"comment_id":135856687,"body_markdown":"Thanks @rzwitserloot for the comprehensive explanation!","body":"Thanks @rzwitserloot for the comprehensive explanation!"}],"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1694189431,"creation_date":1694101859,"answer_id":77061115,"question_id":77060809,"body_markdown":"No. The JVM tracks &#39;class initialization has started&#39; and will never start it a second time. That&#39;s _why_ this whole `InstanceHolder` song and dance routine works in the first place: You&#39;re using the JVM&#39;s concurrency gating mechanism that it applies to classloading, otherwise _none_ of this would be useful at all.\r\n\r\nThus, you are __absolutely guaranteed__ that the `new A()` in the static initializer sequence of class `A.InstanceHolder` is run at most once, _ever_.\r\n\r\nWhich raises the obvious question: Allright, soooo, what happens when a context accesses the `A.InstanceHolder` class when the static initialization procedure for `A.InstanceHolder` has started, but hasn&#39;t finished yet? Given that the JVM guarantees no re-running of initializers, the answer thus cannot possibly be &#39;stackoverflow&#39;, but what _does_ happen then?\r\n\r\nThat breaks down into two separate scenarios:\r\n\r\n1. The code that needs `A.InstanceHolder` to be initialized is running in a different thread. That is, _another thread_ is in the middle of that initialization procedure (still going through the sequence of bytecode required to fulfill `new A()`, which is the static initialization code for `A.InstanceHolder`). In that case, this thread will simply block. It&#39;s like `synchronized` in just about every way.\r\n\r\n2. The code that needs `A.InstanceHolder` to be initialized is already running in this thread. In other words, we need `A.InstanceHolder` to be initialized _in the middle of_ the sequence of bytecode that.. is doing the very initialization we are now dependent on! In this case, the JVM spec is clear: Upon init, all fields are initialized to `null`/`0`/`false`, and initialization then proceeds. Any attempt to read from these fields before they are available simply returns the value they have (`null`/`0`/`false`), __even if they are final__. This does result in the somewhat bizarre situation that a `private static final String x = someMethodThatMakesX();` can nevertheless have `x` hold 2 different values (`null`, and the actual value), even though it is final. We can trivially witness this:\r\n\r\n```\r\n&gt; cat ExampleOfClassInitWeirdness.java\r\npublic class ExampleOfClassInitWeirdness {\r\n  private static final String y = hi();\r\n  private static final String x = test();\r\n  private static final String z = bye();\r\n\r\n  public static String hi() {\r\n    System.out.println(x); // compiles. Prints &#39;null&#39;\r\n    return null;\r\n  }\r\n\r\n  public static String test() {\r\n    System.out.println(x); // compiles. Prints &#39;null&#39;\r\n    return &quot;hello&quot;;\r\n  }\r\n\r\n  public static String bye() {\r\n    System.out.println(x); // compiles. Prints &#39;&quot;hello&quot;&#39;.\r\n    return null;\r\n  }\r\n\r\n  public static void main(String[] args) {}\r\n}\r\n&gt; java ExampleOfClassInitWeirdness.java\r\nnull\r\nnull\r\nhello\r\n```\r\n\r\nall 3 prints come from different places where the exact same java code exists: `System.out.println(x);`, and given that `x` is `final`, how can it print different values?\r\n\r\nWell, it can - the JVM spec is clear, even if the result is a bit odd.\r\n\r\nThe same principle explains why you don&#39;t get a stack overflow error. The sequence goes as follows. I assume somewhere in your java code you wrote: `A.getInstance()`. Then:\r\n\r\n * ClassLoader checks if `A` is loaded and what its init status is.\r\n * ClassLoader concludes it isn&#39;t loaded and thus init status is `NEEDED`.\r\n * ClassLoader finds the bytecode from the jar file or whatever and `defineClass`es the class into existence with it.\r\n * ClassLoader now starts the initialization procedure. It atomically performs this operation: Check if the status is still `NEEDED`. It is, so, update to `INITIALIZING`, and keep track of the fact that this thread is doing the initialization. The initialization is trivial to non-existent; no `static{}` blocks and no expressions initializing static fields either. I&#39;m going to skip explaining how `B` is initialized; it is similarly boring. `A`&#39;s status becomes `INITIALIZED`.\r\n * Remember, we were in the middle of running the opcode `INVOKESTATIC com.foo.pkg.A getInstance()Lcom/foo/pkg/A;`, and as part of that, we had to ensure A was loaded and initialized before proceeding. So, let&#39;s continue. The `A.getInstance()` can now run. This runs opcode `GETSTATIC com.foo.pkg.A$InstanceHolder a Lcom/foo/pkg/A;` and this, therefore, requires that `A$InstanceHolder` is loaded and initialized. It is not, so... off to the jar file we go to find the bytecode and load it, then time to initialize it; its status goes to `INITIALIZING` with this thread as initializer. All static fields are initialized to `null`/`0`/`false`.\r\n * There is stuff to do - run the code `new A()`.\r\n * This requires running code `B.getInstance()` (that&#39;s another `INVOKESTATIC` opcode).\r\n * This causes `B` to need to be loaded and initialized. As discussed, boring, this happens.\r\n * Run `B.getInstance()`. This causes `GETSTATIC` on `B$InstanceHolder` which means `B$InstanceHolder` needs to be loaded and initialized. It isn&#39;t.\r\n * Begin the init procedure. Run the static initializers, which, here, is `new B()`.\r\n * `new B()` does an `INVOKESTATIC` on `A.getInstance()`\r\n * This requires `A` to be loaded and initialized. It is.\r\n * We run `A.getInstance()`. This `GETSTATIC`s from `A$InstanceHolder`, which requires `A$InstanceHolder` to be loaded and initialized. It isn&#39;t; not quite - it is loaded, yes. but its status is `INITIALIZING`, not initialized. We&#39;re a few layers into the stack here, but this is all a chain of events caused by initializing `A$InstanceHolder`.\r\n * The thread that is registered as doing the initializing is this thread, so we don&#39;t block, we just continue without modifying anything. We act as if the thing is already initialized. So, we just.. execute the `GETSTATIC` opcode. Which dutifully returns the current value. Which is `null`.\r\n* `B.getInstance()` is now done. This instance&#39;s `a` field is now `null`.\r\n* `new B()` is now done. And with that, the static init sequence of `A$InstanceHolder` is now done. The instance of `A` it made has a field of type `B`; the instance of `B` that fields hold has a field that holds an instance of `A`. That field holds `null`.\r\n* `A.getInstance()` finishes and returns that instance for which `that.getB().getA()` is `null`.\r\n\r\nOne thing to understand is that `final` is __mostly__ a figment of `javac`. The JVM mostly doesn&#39;t care about final and considers it a comment. The reason this:\r\n\r\n```\r\npublic class Example {\r\n  private static final Instant NOW = Instant.now();\r\n\r\n  public static void breakThings() {\r\n    NOW = null;\r\n  }\r\n}\r\n```\r\n\r\nDoesn&#39;t compile is because javac refuses to compile it. There is an `if` statement somewhere in javac that says: Uh, no. `NOW` is final, and you are attempting to write to it potentially more than once, so, no.\r\n\r\nBut just delete that if from the java code and it would compile and it would sorta run.\r\n\r\nUnlike generics, which are truly _entirely_ a comment from the JVM&#39;s perspective (it does not affect what the JVM does, whatsoever, it is __entirely__ javac that cares about generics, which explains why you can&#39;t read them at runtime from instances), `final` is merely __mostly__ a comment. There are certain concurrency rules and guarantees, as well as certain hotspot optimizations, that work differently.","title":"Why doesn&#39;t cyclic reference with singleton instance holder throw StackOverflowError?","body":"<p>No. The JVM tracks 'class initialization has started' and will never start it a second time. That's <em>why</em> this whole <code>InstanceHolder</code> song and dance routine works in the first place: You're using the JVM's concurrency gating mechanism that it applies to classloading, otherwise <em>none</em> of this would be useful at all.</p>\n<p>Thus, you are <strong>absolutely guaranteed</strong> that the <code>new A()</code> in the static initializer sequence of class <code>A.InstanceHolder</code> is run at most once, <em>ever</em>.</p>\n<p>Which raises the obvious question: Allright, soooo, what happens when a context accesses the <code>A.InstanceHolder</code> class when the static initialization procedure for <code>A.InstanceHolder</code> has started, but hasn't finished yet? Given that the JVM guarantees no re-running of initializers, the answer thus cannot possibly be 'stackoverflow', but what <em>does</em> happen then?</p>\n<p>That breaks down into two separate scenarios:</p>\n<ol>\n<li><p>The code that needs <code>A.InstanceHolder</code> to be initialized is running in a different thread. That is, <em>another thread</em> is in the middle of that initialization procedure (still going through the sequence of bytecode required to fulfill <code>new A()</code>, which is the static initialization code for <code>A.InstanceHolder</code>). In that case, this thread will simply block. It's like <code>synchronized</code> in just about every way.</p>\n</li>\n<li><p>The code that needs <code>A.InstanceHolder</code> to be initialized is already running in this thread. In other words, we need <code>A.InstanceHolder</code> to be initialized <em>in the middle of</em> the sequence of bytecode that.. is doing the very initialization we are now dependent on! In this case, the JVM spec is clear: Upon init, all fields are initialized to <code>null</code>/<code>0</code>/<code>false</code>, and initialization then proceeds. Any attempt to read from these fields before they are available simply returns the value they have (<code>null</code>/<code>0</code>/<code>false</code>), <strong>even if they are final</strong>. This does result in the somewhat bizarre situation that a <code>private static final String x = someMethodThatMakesX();</code> can nevertheless have <code>x</code> hold 2 different values (<code>null</code>, and the actual value), even though it is final. We can trivially witness this:</p>\n</li>\n</ol>\n<pre><code>&gt; cat ExampleOfClassInitWeirdness.java\npublic class ExampleOfClassInitWeirdness {\n  private static final String y = hi();\n  private static final String x = test();\n  private static final String z = bye();\n\n  public static String hi() {\n    System.out.println(x); // compiles. Prints 'null'\n    return null;\n  }\n\n  public static String test() {\n    System.out.println(x); // compiles. Prints 'null'\n    return &quot;hello&quot;;\n  }\n\n  public static String bye() {\n    System.out.println(x); // compiles. Prints '&quot;hello&quot;'.\n    return null;\n  }\n\n  public static void main(String[] args) {}\n}\n&gt; java ExampleOfClassInitWeirdness.java\nnull\nnull\nhello\n</code></pre>\n<p>all 3 prints come from different places where the exact same java code exists: <code>System.out.println(x);</code>, and given that <code>x</code> is <code>final</code>, how can it print different values?</p>\n<p>Well, it can - the JVM spec is clear, even if the result is a bit odd.</p>\n<p>The same principle explains why you don't get a stack overflow error. The sequence goes as follows. I assume somewhere in your java code you wrote: <code>A.getInstance()</code>. Then:</p>\n<ul>\n<li>ClassLoader checks if <code>A</code> is loaded and what its init status is.</li>\n<li>ClassLoader concludes it isn't loaded and thus init status is <code>NEEDED</code>.</li>\n<li>ClassLoader finds the bytecode from the jar file or whatever and <code>defineClass</code>es the class into existence with it.</li>\n<li>ClassLoader now starts the initialization procedure. It atomically performs this operation: Check if the status is still <code>NEEDED</code>. It is, so, update to <code>INITIALIZING</code>, and keep track of the fact that this thread is doing the initialization. The initialization is trivial to non-existent; no <code>static{}</code> blocks and no expressions initializing static fields either. I'm going to skip explaining how <code>B</code> is initialized; it is similarly boring. <code>A</code>'s status becomes <code>INITIALIZED</code>.</li>\n<li>Remember, we were in the middle of running the opcode <code>INVOKESTATIC com.foo.pkg.A getInstance()Lcom/foo/pkg/A;</code>, and as part of that, we had to ensure A was loaded and initialized before proceeding. So, let's continue. The <code>A.getInstance()</code> can now run. This runs opcode <code>GETSTATIC com.foo.pkg.A$InstanceHolder a Lcom/foo/pkg/A;</code> and this, therefore, requires that <code>A$InstanceHolder</code> is loaded and initialized. It is not, so... off to the jar file we go to find the bytecode and load it, then time to initialize it; its status goes to <code>INITIALIZING</code> with this thread as initializer. All static fields are initialized to <code>null</code>/<code>0</code>/<code>false</code>.</li>\n<li>There is stuff to do - run the code <code>new A()</code>.</li>\n<li>This requires running code <code>B.getInstance()</code> (that's another <code>INVOKESTATIC</code> opcode).</li>\n<li>This causes <code>B</code> to need to be loaded and initialized. As discussed, boring, this happens.</li>\n<li>Run <code>B.getInstance()</code>. This causes <code>GETSTATIC</code> on <code>B$InstanceHolder</code> which means <code>B$InstanceHolder</code> needs to be loaded and initialized. It isn't.</li>\n<li>Begin the init procedure. Run the static initializers, which, here, is <code>new B()</code>.</li>\n<li><code>new B()</code> does an <code>INVOKESTATIC</code> on <code>A.getInstance()</code></li>\n<li>This requires <code>A</code> to be loaded and initialized. It is.</li>\n<li>We run <code>A.getInstance()</code>. This <code>GETSTATIC</code>s from <code>A$InstanceHolder</code>, which requires <code>A$InstanceHolder</code> to be loaded and initialized. It isn't; not quite - it is loaded, yes. but its status is <code>INITIALIZING</code>, not initialized. We're a few layers into the stack here, but this is all a chain of events caused by initializing <code>A$InstanceHolder</code>.</li>\n<li>The thread that is registered as doing the initializing is this thread, so we don't block, we just continue without modifying anything. We act as if the thing is already initialized. So, we just.. execute the <code>GETSTATIC</code> opcode. Which dutifully returns the current value. Which is <code>null</code>.</li>\n<li><code>B.getInstance()</code> is now done. This instance's <code>a</code> field is now <code>null</code>.</li>\n<li><code>new B()</code> is now done. And with that, the static init sequence of <code>A$InstanceHolder</code> is now done. The instance of <code>A</code> it made has a field of type <code>B</code>; the instance of <code>B</code> that fields hold has a field that holds an instance of <code>A</code>. That field holds <code>null</code>.</li>\n<li><code>A.getInstance()</code> finishes and returns that instance for which <code>that.getB().getA()</code> is <code>null</code>.</li>\n</ul>\n<p>One thing to understand is that <code>final</code> is <strong>mostly</strong> a figment of <code>javac</code>. The JVM mostly doesn't care about final and considers it a comment. The reason this:</p>\n<pre><code>public class Example {\n  private static final Instant NOW = Instant.now();\n\n  public static void breakThings() {\n    NOW = null;\n  }\n}\n</code></pre>\n<p>Doesn't compile is because javac refuses to compile it. There is an <code>if</code> statement somewhere in javac that says: Uh, no. <code>NOW</code> is final, and you are attempting to write to it potentially more than once, so, no.</p>\n<p>But just delete that if from the java code and it would compile and it would sorta run.</p>\n<p>Unlike generics, which are truly <em>entirely</em> a comment from the JVM's perspective (it does not affect what the JVM does, whatsoever, it is <strong>entirely</strong> javac that cares about generics, which explains why you can't read them at runtime from instances), <code>final</code> is merely <strong>mostly</strong> a comment. There are certain concurrency rules and guarantees, as well as certain hotspot optimizations, that work differently.</p>\n"}],"owner":{"account_id":1532505,"reputation":1954,"user_id":1429367,"accept_rate":71,"display_name":"leokom"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":77061115,"answer_count":1,"score":1,"last_activity_date":1694189431,"creation_date":1694099128,"question_id":77060809,"body_markdown":"```\r\nstatic class A {\r\n\tprivate static class InstanceHolder {\r\n\t\tprivate static final A a = new A();\r\n\t}\r\n\r\n\tprivate final B b;\r\n\r\n\tprivate A() {\r\n\t\tb = B.getInstance();\r\n\t}\r\n\r\n\tstatic A getInstance() {\r\n\t\treturn InstanceHolder.a;\r\n\t}\r\n}\r\n\r\nstatic class B {\r\n\tprivate static class InstanceHolder {\r\n\t\tprivate static final B b = new B();\r\n\t}\r\n\r\n\tprivate final A a;\r\n\r\n\tprivate B() {\r\n\t\ta = A.getInstance();\r\n\t}\r\n\r\n\tstatic B getInstance() {\r\n\t\treturn InstanceHolder.b;\r\n\t}\r\n}\r\n\r\npublic static void main(String[] args) {\r\n\tA a = A.getInstance();\r\n\tB b = B.getInstance();\r\n\tSystem.out.println(a.b);\r\n\tSystem.out.println(b.a);\r\n}\r\n```\r\n\r\nI&#39;d expect that even indirect calls of constructors `A -&gt; B -&gt; A` would cause `StackOverflowError`.\r\n\r\nInstead, the first object (`a`) has the reference to `b` initialized, while the second has the back-reference null.","title":"Why doesn&#39;t cyclic reference with singleton instance holder throw StackOverflowError?","body":"<pre><code>static class A {\n    private static class InstanceHolder {\n        private static final A a = new A();\n    }\n\n    private final B b;\n\n    private A() {\n        b = B.getInstance();\n    }\n\n    static A getInstance() {\n        return InstanceHolder.a;\n    }\n}\n\nstatic class B {\n    private static class InstanceHolder {\n        private static final B b = new B();\n    }\n\n    private final A a;\n\n    private B() {\n        a = A.getInstance();\n    }\n\n    static B getInstance() {\n        return InstanceHolder.b;\n    }\n}\n\npublic static void main(String[] args) {\n    A a = A.getInstance();\n    B b = B.getInstance();\n    System.out.println(a.b);\n    System.out.println(b.a);\n}\n</code></pre>\n<p>I'd expect that even indirect calls of constructors <code>A -&gt; B -&gt; A</code> would cause <code>StackOverflowError</code>.</p>\n<p>Instead, the first object (<code>a</code>) has the reference to <code>b</code> initialized, while the second has the back-reference null.</p>\n"},{"tags":["java","spring","junit5"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1694156763,"post_id":77062812,"comment_id":135856953,"body_markdown":"In short an `@Autowired` field cannot be `null` if it is properly managed by Spring. In fact it would not even allow the application (or test) to start and fail with an exception stating that it cannot resolve the dependencies. Given that fact the `ExchangeImpl` instances you are using in your test aren&#39;t managed by Spring but are created outside the scope of the spring container. Not to mention that I find it weird that you have a DAO returning Spring managed components, why is it a DAO then?","body":"In short an <code>@Autowired</code> field cannot be <code>null</code> if it is properly managed by Spring. In fact it would not even allow the application (or test) to start and fail with an exception stating that it cannot resolve the dependencies. Given that fact the <code>ExchangeImpl</code> instances you are using in your test aren&#39;t managed by Spring but are created outside the scope of the spring container. Not to mention that I find it weird that you have a DAO returning Spring managed components, why is it a DAO then?"},{"owner":{"account_id":3783770,"reputation":19,"user_id":3142422,"display_name":"rbrbrts"},"score":0,"creation_date":1694188871,"post_id":77062812,"comment_id":135863166,"body_markdown":"Sorry, I don&#39;t really understand what you&#39;re asking. I thought the point of adding `@ExtendWith(SpringExtension.class)` was to get a spring container to manage everything.","body":"Sorry, I don&#39;t really understand what you&#39;re asking. I thought the point of adding <code>@ExtendWith(SpringExtension.class)</code> was to get a spring container to manage everything."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1694273757,"post_id":77062812,"comment_id":135871217,"body_markdown":"No that is only letting the test class being managed by Spring. The instances you are creating for `ExchangeImpl` aren&#39;t managed by Spring.","body":"No that is only letting the test class being managed by Spring. The instances you are creating for <code>ExchangeImpl</code> aren&#39;t managed by Spring."}],"answers":[{"tags":[],"owner":{"account_id":3783770,"reputation":19,"user_id":3142422,"display_name":"rbrbrts"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694189424,"creation_date":1694189424,"answer_id":77068429,"question_id":77062812,"body_markdown":"It looks like this *is* the solution, along with calling this method instead of the constructor directly\r\n\r\n```\r\n@Bean\r\n@Scope(value = &quot;prototype&quot;)\r\npublic Exchange newExchangeImpl() {\r\n    return new ExchangeImpl();\r\n}\r\n```\r\n\r\nbut I was missing a `@Configuration` annotation on the class. Once I do that, the DAOs inside the Exchange object are initialized.","title":"Nested Autowired Dependencies NOT Injected in JUnit 5 even with SpringExtension.class","body":"<p>It looks like this <em>is</em> the solution, along with calling this method instead of the constructor directly</p>\n<pre><code>@Bean\n@Scope(value = &quot;prototype&quot;)\npublic Exchange newExchangeImpl() {\n    return new ExchangeImpl();\n}\n</code></pre>\n<p>but I was missing a <code>@Configuration</code> annotation on the class. Once I do that, the DAOs inside the Exchange object are initialized.</p>\n"}],"owner":{"account_id":3783770,"reputation":19,"user_id":3142422,"display_name":"rbrbrts"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694189424,"creation_date":1694120383,"question_id":77062812,"body_markdown":"This question [Nested Autowired Dependencies not injected in Junits](https://stackoverflow.com/questions/70542101/nested-autowired-dependencies-not-injected-in-junits) should have answered my question, but I&#39;m already doing what it recommended. In fact, in Spring 5 with Java 11 and Junit 5, it was working. I&#39;m not on Spring 6 and Java 17, but it&#39;s not.\r\n\r\nThis is effectively an integration test because it talks to the real database just to verify that I can get to the DB and that certain data items are as expected. The package it&#39;s a part of is excluded from normal test runs.\r\n\r\nMy test class looks something like this. Yes, I&#39;m omitting most of the class, but the lines below are enough to expose the issue.\r\n\r\n```\r\n@ContextConfiguration(locations = { &quot;classpath*:applicationContext.xml&quot; })\r\n@ExtendWith(SpringExtension.class)\r\npublic class ExchangeDBTest {\r\n\r\n    @Autowired public ExchangeCache exchangeCache;\r\n\r\n    @ParameterizedTest\r\n    @MethodSource(&quot;createStdCloseData&quot;)\r\n    void standardClose(LocalDate date, String exchangeCode, String stdTime, LocalTime time, TimeZone tz) {\r\n\r\n        Exchange exchange = exchangeCache.get(exchangeCode);\r\n        LocalDateTime stdClose = exchange.getStandardClose(date);\r\n        ...\r\n    }\r\n\t...\r\n}\r\n```\r\n\r\nThe ExchangeCache object is injected just fine. It&#39;s dependencies are injected just fine, which includes a DAO which does the retrieval and creation of the Exchange objects\r\n\r\n```\r\n@Service\r\npublic class ExchangeCacheImpl implements ExchangeCache, DataCache {\r\n\r\n    private static final Logger log = LogManager.getLogger(ExchangeCache.class);\r\n\r\n    @Autowired\r\n    @Qualifier(&quot;exchangeDAO&quot;)\r\n    private ExchangeDAO exchangeDAO;\r\n\t\r\n    ...\r\n\t\r\n    private void loadAll() {\r\n        /* Caller decides if this is a miss or not. */\r\n        log.info(&quot;retrieving exchange data and calendars to populate cache...&quot;);\r\n        Instant startTime = Instant.now();\r\n        Collection&lt;ExchangeData&gt; batch = exchangeDAO.findAll();\r\n        for (ExchangeData exData : batch) {\r\n            if (exData.getMicCode() == null)\r\n                continue;\r\n            Exchange e = new ExchangeImpl();\r\n            ...\r\n\t}\r\n\t...\r\n    }\r\n```\r\n\r\nThe problem is with the construction of the ExchangeImpl objects which do not not have their dependencies injected *when I am running the JUnit test*. It works fine when deployed.\r\n\r\n```\r\n@Component\r\n@Scope(&quot;prototype&quot;)\r\npublic class ExchangeImpl implements Exchange, ExchangeCalendar {\r\n\r\n    @Autowired\r\n    @Qualifier(&quot;irregularHoursDAO&quot;)\r\n    private ExchangeIrregularHoursDAO irregularHoursDAO;\r\n\r\n    @Autowired\r\n    @Qualifier(&quot;regularHoursDAO&quot;)\r\n    private ExchangeRegularHoursDAO regularHoursDAO;\r\n\r\n    ...\r\n}\r\n```\r\n\r\nThose two DAOs are null in the JUnit test, so that call to `exchange.getStandardClose(date)` throws an NullPointerException because the call triggers a DB query to get the missing data.\r\n\r\nI found https://medium.com/davebarda/creating-a-dynamically-initialized-bean-in-spring-18d6d41d24df which suggested (among other things) a factory method to create the ExchangeImpl objects, so I tried\r\n\r\n```\r\n    @Bean\r\n    @Scope(value = &quot;prototype&quot;)\r\n    public Exchange newExchangeImpl() {\r\n       return new ExchangeImpl();\r\n    }\r\n    private void loadAll() {\r\n        /* Caller decides if this is a miss or not. */\r\n        log.info(&quot;retrieving exchange data and calendars to populate cache...&quot;);\r\n        Instant startTime = Instant.now();\r\n        Collection&lt;ExchangeData&gt; batch = exchangeDAO.findAll();\r\n        for (ExchangeData exData : batch) {\r\n            if (exData.getMicCode() == null)\r\n                continue;\r\n            Exchange e = newExchangeImpl();\r\n            ...\r\n        }\r\n        ...\r\n    }\r\n```\r\n\r\nbut the objects returned still have null DAOs. \r\n\r\nAgain, it works when deployed, it&#39;s just the JUnit configuration I&#39;m having a problem with. I&#39;m reluctant to modify the actual ExchangeImpl too much and having it explicitly get the bean factory seems too much to me.","title":"Nested Autowired Dependencies NOT Injected in JUnit 5 even with SpringExtension.class","body":"<p>This question <a href=\"https://stackoverflow.com/questions/70542101/nested-autowired-dependencies-not-injected-in-junits\">Nested Autowired Dependencies not injected in Junits</a> should have answered my question, but I'm already doing what it recommended. In fact, in Spring 5 with Java 11 and Junit 5, it was working. I'm not on Spring 6 and Java 17, but it's not.</p>\n<p>This is effectively an integration test because it talks to the real database just to verify that I can get to the DB and that certain data items are as expected. The package it's a part of is excluded from normal test runs.</p>\n<p>My test class looks something like this. Yes, I'm omitting most of the class, but the lines below are enough to expose the issue.</p>\n<pre><code>@ContextConfiguration(locations = { &quot;classpath*:applicationContext.xml&quot; })\n@ExtendWith(SpringExtension.class)\npublic class ExchangeDBTest {\n\n    @Autowired public ExchangeCache exchangeCache;\n\n    @ParameterizedTest\n    @MethodSource(&quot;createStdCloseData&quot;)\n    void standardClose(LocalDate date, String exchangeCode, String stdTime, LocalTime time, TimeZone tz) {\n\n        Exchange exchange = exchangeCache.get(exchangeCode);\n        LocalDateTime stdClose = exchange.getStandardClose(date);\n        ...\n    }\n    ...\n}\n</code></pre>\n<p>The ExchangeCache object is injected just fine. It's dependencies are injected just fine, which includes a DAO which does the retrieval and creation of the Exchange objects</p>\n<pre><code>@Service\npublic class ExchangeCacheImpl implements ExchangeCache, DataCache {\n\n    private static final Logger log = LogManager.getLogger(ExchangeCache.class);\n\n    @Autowired\n    @Qualifier(&quot;exchangeDAO&quot;)\n    private ExchangeDAO exchangeDAO;\n    \n    ...\n    \n    private void loadAll() {\n        /* Caller decides if this is a miss or not. */\n        log.info(&quot;retrieving exchange data and calendars to populate cache...&quot;);\n        Instant startTime = Instant.now();\n        Collection&lt;ExchangeData&gt; batch = exchangeDAO.findAll();\n        for (ExchangeData exData : batch) {\n            if (exData.getMicCode() == null)\n                continue;\n            Exchange e = new ExchangeImpl();\n            ...\n    }\n    ...\n    }\n</code></pre>\n<p>The problem is with the construction of the ExchangeImpl objects which do not not have their dependencies injected <em>when I am running the JUnit test</em>. It works fine when deployed.</p>\n<pre><code>@Component\n@Scope(&quot;prototype&quot;)\npublic class ExchangeImpl implements Exchange, ExchangeCalendar {\n\n    @Autowired\n    @Qualifier(&quot;irregularHoursDAO&quot;)\n    private ExchangeIrregularHoursDAO irregularHoursDAO;\n\n    @Autowired\n    @Qualifier(&quot;regularHoursDAO&quot;)\n    private ExchangeRegularHoursDAO regularHoursDAO;\n\n    ...\n}\n</code></pre>\n<p>Those two DAOs are null in the JUnit test, so that call to <code>exchange.getStandardClose(date)</code> throws an NullPointerException because the call triggers a DB query to get the missing data.</p>\n<p>I found <a href=\"https://medium.com/davebarda/creating-a-dynamically-initialized-bean-in-spring-18d6d41d24df\" rel=\"nofollow noreferrer\">https://medium.com/davebarda/creating-a-dynamically-initialized-bean-in-spring-18d6d41d24df</a> which suggested (among other things) a factory method to create the ExchangeImpl objects, so I tried</p>\n<pre><code>    @Bean\n    @Scope(value = &quot;prototype&quot;)\n    public Exchange newExchangeImpl() {\n       return new ExchangeImpl();\n    }\n    private void loadAll() {\n        /* Caller decides if this is a miss or not. */\n        log.info(&quot;retrieving exchange data and calendars to populate cache...&quot;);\n        Instant startTime = Instant.now();\n        Collection&lt;ExchangeData&gt; batch = exchangeDAO.findAll();\n        for (ExchangeData exData : batch) {\n            if (exData.getMicCode() == null)\n                continue;\n            Exchange e = newExchangeImpl();\n            ...\n        }\n        ...\n    }\n</code></pre>\n<p>but the objects returned still have null DAOs.</p>\n<p>Again, it works when deployed, it's just the JUnit configuration I'm having a problem with. I'm reluctant to modify the actual ExchangeImpl too much and having it explicitly get the bean factory seems too much to me.</p>\n"},{"tags":["java","tomcat","serialization","session-cookies"],"comments":[{"owner":{"account_id":8056033,"reputation":2316,"user_id":6073148,"accept_rate":75,"display_name":"Zahid Khan"},"score":1,"creation_date":1649151766,"post_id":71749427,"comment_id":126797606,"body_markdown":"Serialization is used when you have to send and receive the object across the network. It is independent of the JVM implementation.","body":"Serialization is used when you have to send and receive the object across the network. It is independent of the JVM implementation."},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1649152406,"post_id":71749427,"comment_id":126797868,"body_markdown":"@ZahidKhan (Java) serialization is turning Java objects into bytes. Whether you send those bytes over the network is a separate thing. You might as well save them to a file or database (as is done to sessions), or do anything else you would do to bytes (including sending over the network).","body":"@ZahidKhan (Java) serialization is turning Java objects into bytes. Whether you send those bytes over the network is a separate thing. You might as well save them to a file or database (as is done to sessions), or do anything else you would do to bytes (including sending over the network)."},{"owner":{"account_id":8056033,"reputation":2316,"user_id":6073148,"accept_rate":75,"display_name":"Zahid Khan"},"score":0,"creation_date":1649176744,"post_id":71749427,"comment_id":126807791,"body_markdown":"Yes, @Kayaman that&#39;s the correct definition. What I tried to convey is - that it is independent of JVM.","body":"Yes, @Kayaman that&#39;s the correct definition. What I tried to convey is - that it is independent of JVM."}],"answers":[{"tags":[],"owner":{"account_id":2130230,"reputation":15498,"user_id":1891219,"display_name":"gaborsch"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649152643,"creation_date":1649152643,"answer_id":71749732,"question_id":71749427,"body_markdown":"Serialization is required because the session objects may be stored in a file, a database or may be transported to another service node via network. Even the included objects must implement `Serializable`. \r\n\r\nWhy these requirements were set? Because a session must last longer than a request. Nobody can guarantee that the same JVM will still exist when the next request comes with the same Session ID - so there should be a redundancy or failover solution that ensures that the session will survive. There are many solutions for this, but the actual solution doesn&#39;t even matter - but Serialization ensures that it will work.\r\n","title":"Serialization in same JVM","body":"<p>Serialization is required because the session objects may be stored in a file, a database or may be transported to another service node via network. Even the included objects must implement <code>Serializable</code>.</p>\n<p>Why these requirements were set? Because a session must last longer than a request. Nobody can guarantee that the same JVM will still exist when the next request comes with the same Session ID - so there should be a redundancy or failover solution that ensures that the session will survive. There are many solutions for this, but the actual solution doesn't even matter - but Serialization ensures that it will work.</p>\n"}],"owner":{"account_id":16094621,"reputation":95,"user_id":11617135,"display_name":"INDIAN DECODER"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694188336,"creation_date":1649151474,"question_id":71749427,"body_markdown":"Is serialization necessary while writing and reading an object in the same JVM?\r\n\r\n&gt; Session objects must implement serializable in order to maintain it after restart of server.\r\n\r\nAs same JVM is used why session objects must implement serializable?\r\n\r\n","title":"Serialization in same JVM","body":"<p>Is serialization necessary while writing and reading an object in the same JVM?</p>\n<blockquote>\n<p>Session objects must implement serializable in order to maintain it after restart of server.</p>\n</blockquote>\n<p>As same JVM is used why session objects must implement serializable?</p>\n"},{"tags":["java","annotations","annotation-processing"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1692702027,"post_id":76952596,"comment_id":135657053,"body_markdown":"`messager.printMessage(Diagnostic.Kind.ERROR` is making your processor generate compilation errors.","body":"<code>messager.printMessage(Diagnostic.Kind.ERROR</code> is making your processor generate compilation errors."},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1692702090,"post_id":76952596,"comment_id":135657068,"body_markdown":"Also, what you&#39;re doing is never going to work. You are trying to set the field value at *compile* time, you need to do it at *runtime*. That&#39;s not something an annotation processor can do.","body":"Also, what you&#39;re doing is never going to work. You are trying to set the field value at <i>compile</i> time, you need to do it at <i>runtime</i>. That&#39;s not something an annotation processor can do."},{"owner":{"account_id":26652423,"reputation":1,"user_id":22428604,"display_name":"med"},"score":0,"creation_date":1692702611,"post_id":76952596,"comment_id":135657166,"body_markdown":"@Jorn i use the messager just to know the content of  propertyValue ,and  when I want to execute I comment out the line","body":"@Jorn i use the messager just to know the content of  propertyValue ,and  when I want to execute I comment out the line"}],"answers":[{"tags":[],"owner":{"account_id":9059972,"reputation":3080,"user_id":6746785,"display_name":"gthanop"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694188315,"creation_date":1694188315,"answer_id":77068308,"question_id":76952596,"body_markdown":"### Background:\r\n\r\nAs far as I understand you mean Spring Boot&#39;s `@Value` annotation and as far as I read from Spring Boot documentation the elements annotated with `@Value` are initialized with the `@Value`&#39;s value at runtime. In this answer, I am also going to address this very limited subset of similar functionality of `@Value` for your custom annotation.\r\n\r\nIn the simple case that I am aware of, annotation processors in Java are not running along with the source code being processed, but instead run at compilation time. That is you cannot have access through the `Processor` to objects generated at the runtime of the code you annotate. This is the reason you can&#39;t access the annotated `Field` you want at processing time. Another issue is that you are attempting to get a `Field` of the implementing `Class` of a `TypeElement` at processing time, which (as far as I understand) is not what you intend to do. These are the reasons why you get that error. On the other hand, you have access to the source code (being processed) itself through the Java annotation processing API (via `javax.lang.model.element.Element`s, `javax.lang.model.type.TypeMirror`s and all related interfaces).\r\n\r\nAccording to [another post][1]:\r\n\r\n&gt; standard annotation processing API does *not* support direct modification of source code\r\n\r\nSo, in order to go by the standard API, you can generate *new* code which will make use of the values of a simple `CustomValue` annotation. This new code will need to be called somehow by your application in order to initialize the annotated fields with their values. For example in Spring Boot you need to call a method for the whole application to begin such as the code in the following snippet:\r\n\r\n```\r\n@SpringBootApplication\r\npublic class MyApplication {\r\n    public static void main(final String[] args) {\r\n        SpringApplication.run(MyApplication.class, args);\r\n    }\r\n}\r\n```\r\n\r\nThe control flow of this method takes care of creating and initializing data objects for you (at least as far as my abstract understanding of Spring Boot goes). In a (distantly) similar way and in order to keep things simple, let&#39;s create a `Processor` which will generate the required functionality, but it will be your application&#39;s responsibility to call this functionality.\r\n\r\n### Limited-solution outline:\r\n\r\nYou can separate your code in two projects: one for the annotation processor and the annotation itself, and another project with the client code of the annotation. The *client* project will depend on the *annotation processor*&#39;s project.\r\n\r\n### Annotation processor project code:\r\n\r\nThe annotation itself can be as you declared it:\r\n\r\n```\r\npackage annotations;\r\n\r\nimport java.lang.annotation.ElementType;\r\nimport java.lang.annotation.Retention;\r\nimport java.lang.annotation.RetentionPolicy;\r\nimport java.lang.annotation.Target;\r\n\r\n@Target(ElementType.FIELD)\r\n@Retention(RetentionPolicy.RUNTIME) //This has to be RUNTIME since we need the value of each CustomValue to exist at runtime.\r\npublic @interface CustomValue {\r\n    String value();\r\n}\r\n```\r\n\r\nwhile the annotation processor needs changes and for the purpose of this answer is implemented as:\r\n\r\n```\r\npackage annotations;\r\n\r\nimport java.io.IOException;\r\nimport java.io.Writer;\r\nimport java.util.Collections;\r\nimport java.util.LinkedHashMap;\r\nimport java.util.Map;\r\nimport java.util.Objects;\r\nimport java.util.Set;\r\nimport javax.annotation.processing.AbstractProcessor;\r\nimport javax.annotation.processing.Filer;\r\nimport javax.annotation.processing.Messager;\r\nimport javax.annotation.processing.RoundEnvironment;\r\nimport javax.annotation.processing.SupportedAnnotationTypes;\r\nimport javax.annotation.processing.SupportedSourceVersion;\r\nimport javax.lang.model.SourceVersion;\r\nimport javax.lang.model.element.Element;\r\nimport javax.lang.model.element.ElementKind;\r\nimport javax.lang.model.element.PackageElement;\r\nimport javax.lang.model.element.TypeElement;\r\nimport javax.lang.model.element.VariableElement;\r\nimport javax.lang.model.util.Elements;\r\nimport javax.lang.model.util.Types;\r\nimport javax.tools.Diagnostic;\r\n\r\n@SupportedSourceVersion(SourceVersion.RELEASE_8)\r\n@SupportedAnnotationTypes(&quot;annotations.CustomValue&quot;)\r\npublic class CustomValueProcessor extends AbstractProcessor {\r\n    \r\n    private final Map&lt;String, String&gt; propMap = Collections.singletonMap(&quot;person.id&quot;, &quot;undefined&quot;); //PropertyLoader.parsePropertiesFile();\r\n    private final Map&lt;TypeElement, Map&lt;VariableElement, String&gt;&gt; classToFieldToValueMap = new LinkedHashMap&lt;&gt;();\r\n\r\n    @Override\r\n    public boolean process(final Set&lt;? extends TypeElement&gt; annotations,\r\n                           final RoundEnvironment roundEnv) {\r\n        final Messager messager = processingEnv.getMessager();\r\n        final Elements elementUtils = processingEnv.getElementUtils();\r\n        final Types typeUtils = processingEnv.getTypeUtils();\r\n        final Filer filer = processingEnv.getFiler();\r\n        annotations.forEach(annotation -&gt; {\r\n            roundEnv.getElementsAnnotatedWith(annotation).forEach(element -&gt; {\r\n                /*Checking for &quot;element.getKind() == ElementKind.FIELD&quot; is not really neeeded here\r\n                as the code currently stands, since the CustomValue only supports FIELDs according\r\n                to its Target meta-annotation, but let&#39;s indeed make the check since in the future\r\n                we may support more Targets...*/\r\n                if (element.getKind() == ElementKind.FIELD) {\r\n                    final VariableElement fieldElement = (VariableElement) element;\r\n                    final CustomValue annotationElement = element.getAnnotation(CustomValue.class);\r\n                    final String annotationElementValue = annotationElement.value().trim();\r\n                    \r\n                    //Check for proper field declared type (String):\r\n                    if (!typeUtils.isSameType(element.asType(), elementUtils.getTypeElement(&quot;java.lang.String&quot;).asType()))\r\n                        messager.printMessage(Diagnostic.Kind.ERROR, &quot;CustomValue annotated fields must be of type String.&quot;, element);\r\n\r\n                    //Check for the specified value&#39;s sanity according to some simple parsing rules:\r\n                    else if (annotationElementValue.isEmpty() || annotationElementValue.startsWith(&quot;=&quot;))\r\n                        messager.printMessage(Diagnostic.Kind.ERROR, &quot;Empty parameter identifier for CustomValue.&quot;, element);\r\n\r\n                    else {\r\n                        //Parse with simple rules:\r\n                        final String[] param = annotationElementValue.split(&quot;=&quot;, 2);\r\n                        final String paramID = param[0].trim(),\r\n                                     paramDefaultValue = (param.length &gt; 1)? param[1].trim(): &quot;N/A&quot;;\r\n                        \r\n                        //Find value:\r\n                        final String paramValue = propMap.getOrDefault(paramID, paramDefaultValue);\r\n                        final Element enclosingElement = element.getEnclosingElement();\r\n\r\n                        //Reject enum constants (or anything else that is not a class, such as records):\r\n                        if (enclosingElement.getKind() != ElementKind.CLASS)\r\n                            messager.printMessage(Diagnostic.Kind.ERROR, &quot;Only class fields can be annotated with CustomValue.&quot;, element);\r\n                        else {\r\n                            final TypeElement enclosingClass = (TypeElement) enclosingElement;\r\n                            final PackageElement pkg = elementUtils.getPackageOf(enclosingClass);\r\n\r\n                            //Safety belt against inner classes (because, for simplicity, the rest of the code inside &#39;else&#39; does not support this):\r\n                            if (!Objects.equals(pkg, enclosingClass.getEnclosingElement()))\r\n                                messager.printMessage(Diagnostic.Kind.ERROR, &quot;Only fields declared in top level classes are supported for CustomValue.&quot;, element);\r\n                            else\r\n                                classToFieldToValueMap.computeIfAbsent(enclosingClass, key -&gt; new LinkedHashMap&lt;&gt;()).put(fieldElement, paramValue);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        });\r\n        \r\n        /*\r\n        Write to output files once at the end (or at least this is the intended behaviour).\r\n        Source: https://stackoverflow.com/a/4146080/6746785\r\n        */\r\n        if (roundEnv.processingOver()) { // &amp;&amp; !roundEnv.errorRaised()) {\r\n            classToFieldToValueMap.forEach((enclosingClass, fieldToValue) -&gt; {\r\n                final PackageElement pkg = elementUtils.getPackageOf(enclosingClass);\r\n                final String enclosingClassSimpleName = enclosingClass.getSimpleName().toString();\r\n                final String newClassQualifiedName = enclosingClass.getQualifiedName().toString() + &quot;Utils&quot;,\r\n                             newClassSimpleName =    enclosingClassSimpleName                     + &quot;Utils&quot;;\r\n                try {\r\n                    final VariableElement[] originatingElements = fieldToValue.keySet().toArray(new VariableElement[fieldToValue.size()]);\r\n                    try (final Writer src = filer.createSourceFile(newClassQualifiedName, originatingElements).openWriter()) { //Use inherited source code encoding.\r\n                        final String pkgQualifiedName = pkg.getQualifiedName().toString();\r\n                        if (!pkgQualifiedName.isEmpty())\r\n                            src.write(&quot;package &quot; + pkgQualifiedName + &quot;;\\n\\n&quot;);\r\n                        src.write(&quot;import annotations.CustomValue;\\n&quot; +\r\n                                  &quot;import java.lang.annotation.Annotation;\\n&quot; +\r\n                                  &quot;import java.lang.reflect.Field;\\n\\n&quot; +\r\n                                  &quot;public class &quot; + newClassSimpleName + &quot; {\\n\\n&quot; +\r\n                                  &quot;    private static Field findFirstAnnotatedDeclaredField(final Class&lt;?&gt; clazz,\\n&quot; +\r\n                                  &quot;                                                         final String name,\\n&quot; +\r\n                                  &quot;                                                         final Class&lt;? extends Annotation&gt; annotationClass) {\\n&quot; +\r\n                                  &quot;        for (Class&lt;?&gt; cur = clazz; cur != null; cur = cur.getSuperclass()) {\\n&quot; +\r\n                                  &quot;            try {\\n&quot; +\r\n                                  &quot;                final Field field = cur.getDeclaredField(name);\\n&quot; +\r\n                                  &quot;                if (field.getAnnotationsByType(annotationClass).length &gt; 0)\\n&quot; +\r\n                                  &quot;                    return field;\\n&quot; +\r\n                                  &quot;            }\\n&quot; +\r\n                                  &quot;            catch (final NoSuchFieldException | SecurityException e) {\\n&quot; +\r\n                                  &quot;            }\\n&quot; +\r\n                                  &quot;        }\\n&quot; +\r\n                                  &quot;        return null;\\n&quot; +\r\n                                  &quot;    }\\n\\n&quot; +\r\n                                  &quot;    private static void suppressedWriteField(final Object object,\\n&quot; +\r\n                                  &quot;                                             final Field field,\\n&quot; +\r\n                                  &quot;                                             final Object value) {\\n&quot; +\r\n                                  &quot;        if (field != null) {\\n&quot; +\r\n                                  &quot;            field.setAccessible(true);\\n&quot; +\r\n                                  &quot;            try {\\n&quot; +\r\n                                  &quot;                field.set(object, value);\\n&quot; +\r\n                                  &quot;            }\\n&quot; +\r\n                                  &quot;            catch (IllegalArgumentException | IllegalAccessException e) {\\n&quot; +\r\n                                  &quot;            }\\n&quot; +\r\n                                  &quot;        }\\n&quot; +\r\n                                  &quot;    }\\n\\n&quot; +\r\n                                  &quot;    private static void defaultSuppressedWriteField(final Object object,\\n&quot; +\r\n                                  &quot;                                                    final String name,\\n&quot; +\r\n                                  &quot;                                                    final String value) {\\n&quot; +\r\n                                  &quot;        suppressedWriteField(object, findFirstAnnotatedDeclaredField(&quot; + enclosingClassSimpleName + &quot;.class, name, CustomValue.class), value);\\n&quot; +\r\n                                  &quot;    }\\n\\n&quot; +\r\n                                  &quot;    public static void setToDefaults(final &quot; + enclosingClassSimpleName + &quot; refTo&quot; + enclosingClassSimpleName + &quot;) {\\n&quot;);\r\n                        \r\n                        //WARNING: f2v.getValue() MUST be escaped to be used as a String literal in the generated code, but for simplicity I assume here it is valid already!\r\n                        for (final Map.Entry&lt;VariableElement, String&gt; f2v: fieldToValue.entrySet())\r\n                            src.write(&quot;        defaultSuppressedWriteField(refTo&quot; + enclosingClassSimpleName + &quot;, \\&quot;&quot; + f2v.getKey().getSimpleName() + &quot;\\&quot;, \\&quot;&quot; + f2v.getValue() + &quot;\\&quot;);\\n&quot;);\r\n                        src.write(&quot;    }\\n&quot; +\r\n                                  &quot;}\\n&quot;);\r\n                    }\r\n                }\r\n                catch (final IOException ioe) {\r\n                    messager.printMessage(Diagnostic.Kind.ERROR, ioe.toString(), enclosingClass);\r\n                    ioe.printStackTrace();\r\n                }\r\n            });\r\n            classToFieldToValueMap.clear();\r\n        }\r\n        return true;\r\n    }\r\n}\r\n```\r\n\r\nAfter performing sanity checks on each round, the processor maintains all annotated fields and their values in map `classToFieldToValueMap`, in order to generate the source code in the last round.\r\n\r\nNote: I used Java SE version 8 (the code may not support modules if ported to 9+, as well as other stuff possibly). Do not forget to correct the `@SupportedSourceVersion` value *if needed*, in case you port the code to a newer version.\r\n\r\n### Client project code:\r\n\r\n```\r\nimport annotations.CustomValue;\r\n\r\npublic class Person {\r\n    \r\n    @CustomValue(&quot;person.id&quot;)\r\n    private String id;\r\n    \r\n    @CustomValue(&quot;person.name = Random Name&quot;)\r\n    private String name;\r\n    \r\n    @CustomValue(&quot;person.surname = The Surname&quot;)\r\n    private String surname;\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;Person{&quot; + &quot;id=&quot; + id + &quot;, name=&quot; + name + &quot;, surname=&quot; + surname + &#39;}&#39;;\r\n    }\r\n    \r\n    public static void main(final String[] args) {\r\n        final Person p = new Person();\r\n        System.out.println(p); //Prints null fields.\r\n        PersonUtils.setToDefaults(p); //PersonUtils was generated by the processor in the same package as Person.\r\n        System.out.println(p); //Prints fields with their values assigned by CustomValue.\r\n    }\r\n}\r\n```\r\n\r\n### Alternative limited-solution (without `Processor`):\r\n\r\nIt should be noted that, in this simple scenario, we don&#39;t even need to implement annotation processing. We can use reflection directly at runtime, on its own. We can modify a little the code generated by the above `Processor` with a more generic version which accepts any object and by using reflection detects and assigns `CustomValue` values to the fields of the object (where applicable). In this case one can use the following code (along with the annotation itself) in the *client* project directly:\r\n\r\n```\r\nimport annotations.CustomValue;\r\nimport java.lang.annotation.Annotation;\r\nimport java.lang.reflect.Field;\r\nimport java.util.ArrayList;\r\nimport java.util.Collections;\r\nimport java.util.List;\r\nimport java.util.Map;\r\n\r\npublic class CustomValueUtils {\r\n\r\n    private static List&lt;Field&gt; findAllAnnotatedDeclaredFields(final Class&lt;?&gt; clazz,\r\n                                                              final Class&lt;? extends Annotation&gt; annotationClass) {\r\n        final ArrayList&lt;Field&gt; annotatedFields = new ArrayList&lt;&gt;();\r\n        for (Class&lt;?&gt; cur = clazz; cur != null; cur = cur.getSuperclass()) {\r\n            try {\r\n                for (final Field field: cur.getDeclaredFields())\r\n                    if (field.getAnnotationsByType(annotationClass).length &gt; 0)\r\n                        annotatedFields.add(field);\r\n            }\r\n            catch (final SecurityException e) {\r\n            }\r\n        }\r\n        annotatedFields.trimToSize();\r\n        return Collections.unmodifiableList(annotatedFields);\r\n    }\r\n\r\n    private static void suppressedWriteField(final Object object,\r\n                                             final Field field,\r\n                                             final Object value) {\r\n        if (field != null) {\r\n            field.setAccessible(true);\r\n            try {\r\n                field.set(object, value);\r\n            }\r\n            catch (IllegalArgumentException | IllegalAccessException e) {\r\n            }\r\n        }\r\n    }\r\n\r\n    public static void setToDefaults(final Object object) {\r\n        final Map&lt;String, String&gt; propMap = Collections.singletonMap(&quot;person.id&quot;, &quot;undefined&quot;); //PropertyLoader.parsePropertiesFile();\r\n        findAllAnnotatedDeclaredFields(object.getClass(), CustomValue.class).forEach(field -&gt; {\r\n            final CustomValue customVal = field.getAnnotation(CustomValue.class);\r\n            final String annotationElementValue = customVal.value().trim();\r\n            \r\n            //Check for the specified value&#39;s sanity according to some simple parsing rules:\r\n            if (annotationElementValue.isEmpty() || annotationElementValue.startsWith(&quot;=&quot;))\r\n                throw new IllegalStateException(&quot;Empty parameter identifier for CustomValue2.&quot;);\r\n            \r\n            //Parse with simple rules:\r\n            final String[] param = annotationElementValue.split(&quot;=&quot;, 2);\r\n            final String paramID = param[0].trim(),\r\n                         paramDefaultValue = (param.length &gt; 1)? param[1].trim(): &quot;N/A&quot;;\r\n\r\n            //Find and set value:\r\n            final String paramValue = propMap.getOrDefault(paramID, paramDefaultValue);\r\n            suppressedWriteField(object, field, paramValue);\r\n        });\r\n    }\r\n}\r\n```\r\n\r\nand use it as:\r\n\r\n```\r\nimport annotations.CustomValue;\r\n\r\npublic class Person {\r\n    \r\n    @CustomValue(&quot;person.id&quot;)\r\n    private String id;\r\n    \r\n    @CustomValue(&quot;person.name = Random Name&quot;)\r\n    private String name;\r\n    \r\n    @CustomValue(&quot;person.surname = The Surname&quot;)\r\n    private String surname;\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;Person{&quot; + &quot;id=&quot; + id + &quot;, name=&quot; + name + &quot;, surname=&quot; + surname + &#39;}&#39;;\r\n    }\r\n    \r\n    public static void main(final String[] args) {\r\n        final Person p = new Person();\r\n        System.out.println(p);\r\n        CustomValueUtils.setToDefaults(p); //Can be any Object, but is intended for objects with fields annotated with CustomValue.\r\n        System.out.println(p);\r\n    }\r\n}\r\n```\r\n\r\nNote in each solution I faked `PropertyLoader.parsePropertiesFile();` with `Collections.singletonMap(&quot;person.id&quot;, &quot;undefined&quot;);` for simplicity.\r\n\r\n[1]: https://stackoverflow.com/a/14943661/6746785\r\n","title":"CustomValue Annotation Processing : How can i create a similar annotation of @Value","body":"<h3>Background:</h3>\n<p>As far as I understand you mean Spring Boot's <code>@Value</code> annotation and as far as I read from Spring Boot documentation the elements annotated with <code>@Value</code> are initialized with the <code>@Value</code>'s value at runtime. In this answer, I am also going to address this very limited subset of similar functionality of <code>@Value</code> for your custom annotation.</p>\n<p>In the simple case that I am aware of, annotation processors in Java are not running along with the source code being processed, but instead run at compilation time. That is you cannot have access through the <code>Processor</code> to objects generated at the runtime of the code you annotate. This is the reason you can't access the annotated <code>Field</code> you want at processing time. Another issue is that you are attempting to get a <code>Field</code> of the implementing <code>Class</code> of a <code>TypeElement</code> at processing time, which (as far as I understand) is not what you intend to do. These are the reasons why you get that error. On the other hand, you have access to the source code (being processed) itself through the Java annotation processing API (via <code>javax.lang.model.element.Element</code>s, <code>javax.lang.model.type.TypeMirror</code>s and all related interfaces).</p>\n<p>According to <a href=\"https://stackoverflow.com/a/14943661/6746785\">another post</a>:</p>\n<blockquote>\n<p>standard annotation processing API does <em>not</em> support direct modification of source code</p>\n</blockquote>\n<p>So, in order to go by the standard API, you can generate <em>new</em> code which will make use of the values of a simple <code>CustomValue</code> annotation. This new code will need to be called somehow by your application in order to initialize the annotated fields with their values. For example in Spring Boot you need to call a method for the whole application to begin such as the code in the following snippet:</p>\n<pre><code>@SpringBootApplication\npublic class MyApplication {\n    public static void main(final String[] args) {\n        SpringApplication.run(MyApplication.class, args);\n    }\n}\n</code></pre>\n<p>The control flow of this method takes care of creating and initializing data objects for you (at least as far as my abstract understanding of Spring Boot goes). In a (distantly) similar way and in order to keep things simple, let's create a <code>Processor</code> which will generate the required functionality, but it will be your application's responsibility to call this functionality.</p>\n<h3>Limited-solution outline:</h3>\n<p>You can separate your code in two projects: one for the annotation processor and the annotation itself, and another project with the client code of the annotation. The <em>client</em> project will depend on the <em>annotation processor</em>'s project.</p>\n<h3>Annotation processor project code:</h3>\n<p>The annotation itself can be as you declared it:</p>\n<pre><code>package annotations;\n\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\n@Target(ElementType.FIELD)\n@Retention(RetentionPolicy.RUNTIME) //This has to be RUNTIME since we need the value of each CustomValue to exist at runtime.\npublic @interface CustomValue {\n    String value();\n}\n</code></pre>\n<p>while the annotation processor needs changes and for the purpose of this answer is implemented as:</p>\n<pre><code>package annotations;\n\nimport java.io.IOException;\nimport java.io.Writer;\nimport java.util.Collections;\nimport java.util.LinkedHashMap;\nimport java.util.Map;\nimport java.util.Objects;\nimport java.util.Set;\nimport javax.annotation.processing.AbstractProcessor;\nimport javax.annotation.processing.Filer;\nimport javax.annotation.processing.Messager;\nimport javax.annotation.processing.RoundEnvironment;\nimport javax.annotation.processing.SupportedAnnotationTypes;\nimport javax.annotation.processing.SupportedSourceVersion;\nimport javax.lang.model.SourceVersion;\nimport javax.lang.model.element.Element;\nimport javax.lang.model.element.ElementKind;\nimport javax.lang.model.element.PackageElement;\nimport javax.lang.model.element.TypeElement;\nimport javax.lang.model.element.VariableElement;\nimport javax.lang.model.util.Elements;\nimport javax.lang.model.util.Types;\nimport javax.tools.Diagnostic;\n\n@SupportedSourceVersion(SourceVersion.RELEASE_8)\n@SupportedAnnotationTypes(&quot;annotations.CustomValue&quot;)\npublic class CustomValueProcessor extends AbstractProcessor {\n    \n    private final Map&lt;String, String&gt; propMap = Collections.singletonMap(&quot;person.id&quot;, &quot;undefined&quot;); //PropertyLoader.parsePropertiesFile();\n    private final Map&lt;TypeElement, Map&lt;VariableElement, String&gt;&gt; classToFieldToValueMap = new LinkedHashMap&lt;&gt;();\n\n    @Override\n    public boolean process(final Set&lt;? extends TypeElement&gt; annotations,\n                           final RoundEnvironment roundEnv) {\n        final Messager messager = processingEnv.getMessager();\n        final Elements elementUtils = processingEnv.getElementUtils();\n        final Types typeUtils = processingEnv.getTypeUtils();\n        final Filer filer = processingEnv.getFiler();\n        annotations.forEach(annotation -&gt; {\n            roundEnv.getElementsAnnotatedWith(annotation).forEach(element -&gt; {\n                /*Checking for &quot;element.getKind() == ElementKind.FIELD&quot; is not really neeeded here\n                as the code currently stands, since the CustomValue only supports FIELDs according\n                to its Target meta-annotation, but let's indeed make the check since in the future\n                we may support more Targets...*/\n                if (element.getKind() == ElementKind.FIELD) {\n                    final VariableElement fieldElement = (VariableElement) element;\n                    final CustomValue annotationElement = element.getAnnotation(CustomValue.class);\n                    final String annotationElementValue = annotationElement.value().trim();\n                    \n                    //Check for proper field declared type (String):\n                    if (!typeUtils.isSameType(element.asType(), elementUtils.getTypeElement(&quot;java.lang.String&quot;).asType()))\n                        messager.printMessage(Diagnostic.Kind.ERROR, &quot;CustomValue annotated fields must be of type String.&quot;, element);\n\n                    //Check for the specified value's sanity according to some simple parsing rules:\n                    else if (annotationElementValue.isEmpty() || annotationElementValue.startsWith(&quot;=&quot;))\n                        messager.printMessage(Diagnostic.Kind.ERROR, &quot;Empty parameter identifier for CustomValue.&quot;, element);\n\n                    else {\n                        //Parse with simple rules:\n                        final String[] param = annotationElementValue.split(&quot;=&quot;, 2);\n                        final String paramID = param[0].trim(),\n                                     paramDefaultValue = (param.length &gt; 1)? param[1].trim(): &quot;N/A&quot;;\n                        \n                        //Find value:\n                        final String paramValue = propMap.getOrDefault(paramID, paramDefaultValue);\n                        final Element enclosingElement = element.getEnclosingElement();\n\n                        //Reject enum constants (or anything else that is not a class, such as records):\n                        if (enclosingElement.getKind() != ElementKind.CLASS)\n                            messager.printMessage(Diagnostic.Kind.ERROR, &quot;Only class fields can be annotated with CustomValue.&quot;, element);\n                        else {\n                            final TypeElement enclosingClass = (TypeElement) enclosingElement;\n                            final PackageElement pkg = elementUtils.getPackageOf(enclosingClass);\n\n                            //Safety belt against inner classes (because, for simplicity, the rest of the code inside 'else' does not support this):\n                            if (!Objects.equals(pkg, enclosingClass.getEnclosingElement()))\n                                messager.printMessage(Diagnostic.Kind.ERROR, &quot;Only fields declared in top level classes are supported for CustomValue.&quot;, element);\n                            else\n                                classToFieldToValueMap.computeIfAbsent(enclosingClass, key -&gt; new LinkedHashMap&lt;&gt;()).put(fieldElement, paramValue);\n                        }\n                    }\n                }\n            });\n        });\n        \n        /*\n        Write to output files once at the end (or at least this is the intended behaviour).\n        Source: https://stackoverflow.com/a/4146080/6746785\n        */\n        if (roundEnv.processingOver()) { // &amp;&amp; !roundEnv.errorRaised()) {\n            classToFieldToValueMap.forEach((enclosingClass, fieldToValue) -&gt; {\n                final PackageElement pkg = elementUtils.getPackageOf(enclosingClass);\n                final String enclosingClassSimpleName = enclosingClass.getSimpleName().toString();\n                final String newClassQualifiedName = enclosingClass.getQualifiedName().toString() + &quot;Utils&quot;,\n                             newClassSimpleName =    enclosingClassSimpleName                     + &quot;Utils&quot;;\n                try {\n                    final VariableElement[] originatingElements = fieldToValue.keySet().toArray(new VariableElement[fieldToValue.size()]);\n                    try (final Writer src = filer.createSourceFile(newClassQualifiedName, originatingElements).openWriter()) { //Use inherited source code encoding.\n                        final String pkgQualifiedName = pkg.getQualifiedName().toString();\n                        if (!pkgQualifiedName.isEmpty())\n                            src.write(&quot;package &quot; + pkgQualifiedName + &quot;;\\n\\n&quot;);\n                        src.write(&quot;import annotations.CustomValue;\\n&quot; +\n                                  &quot;import java.lang.annotation.Annotation;\\n&quot; +\n                                  &quot;import java.lang.reflect.Field;\\n\\n&quot; +\n                                  &quot;public class &quot; + newClassSimpleName + &quot; {\\n\\n&quot; +\n                                  &quot;    private static Field findFirstAnnotatedDeclaredField(final Class&lt;?&gt; clazz,\\n&quot; +\n                                  &quot;                                                         final String name,\\n&quot; +\n                                  &quot;                                                         final Class&lt;? extends Annotation&gt; annotationClass) {\\n&quot; +\n                                  &quot;        for (Class&lt;?&gt; cur = clazz; cur != null; cur = cur.getSuperclass()) {\\n&quot; +\n                                  &quot;            try {\\n&quot; +\n                                  &quot;                final Field field = cur.getDeclaredField(name);\\n&quot; +\n                                  &quot;                if (field.getAnnotationsByType(annotationClass).length &gt; 0)\\n&quot; +\n                                  &quot;                    return field;\\n&quot; +\n                                  &quot;            }\\n&quot; +\n                                  &quot;            catch (final NoSuchFieldException | SecurityException e) {\\n&quot; +\n                                  &quot;            }\\n&quot; +\n                                  &quot;        }\\n&quot; +\n                                  &quot;        return null;\\n&quot; +\n                                  &quot;    }\\n\\n&quot; +\n                                  &quot;    private static void suppressedWriteField(final Object object,\\n&quot; +\n                                  &quot;                                             final Field field,\\n&quot; +\n                                  &quot;                                             final Object value) {\\n&quot; +\n                                  &quot;        if (field != null) {\\n&quot; +\n                                  &quot;            field.setAccessible(true);\\n&quot; +\n                                  &quot;            try {\\n&quot; +\n                                  &quot;                field.set(object, value);\\n&quot; +\n                                  &quot;            }\\n&quot; +\n                                  &quot;            catch (IllegalArgumentException | IllegalAccessException e) {\\n&quot; +\n                                  &quot;            }\\n&quot; +\n                                  &quot;        }\\n&quot; +\n                                  &quot;    }\\n\\n&quot; +\n                                  &quot;    private static void defaultSuppressedWriteField(final Object object,\\n&quot; +\n                                  &quot;                                                    final String name,\\n&quot; +\n                                  &quot;                                                    final String value) {\\n&quot; +\n                                  &quot;        suppressedWriteField(object, findFirstAnnotatedDeclaredField(&quot; + enclosingClassSimpleName + &quot;.class, name, CustomValue.class), value);\\n&quot; +\n                                  &quot;    }\\n\\n&quot; +\n                                  &quot;    public static void setToDefaults(final &quot; + enclosingClassSimpleName + &quot; refTo&quot; + enclosingClassSimpleName + &quot;) {\\n&quot;);\n                        \n                        //WARNING: f2v.getValue() MUST be escaped to be used as a String literal in the generated code, but for simplicity I assume here it is valid already!\n                        for (final Map.Entry&lt;VariableElement, String&gt; f2v: fieldToValue.entrySet())\n                            src.write(&quot;        defaultSuppressedWriteField(refTo&quot; + enclosingClassSimpleName + &quot;, \\&quot;&quot; + f2v.getKey().getSimpleName() + &quot;\\&quot;, \\&quot;&quot; + f2v.getValue() + &quot;\\&quot;);\\n&quot;);\n                        src.write(&quot;    }\\n&quot; +\n                                  &quot;}\\n&quot;);\n                    }\n                }\n                catch (final IOException ioe) {\n                    messager.printMessage(Diagnostic.Kind.ERROR, ioe.toString(), enclosingClass);\n                    ioe.printStackTrace();\n                }\n            });\n            classToFieldToValueMap.clear();\n        }\n        return true;\n    }\n}\n</code></pre>\n<p>After performing sanity checks on each round, the processor maintains all annotated fields and their values in map <code>classToFieldToValueMap</code>, in order to generate the source code in the last round.</p>\n<p>Note: I used Java SE version 8 (the code may not support modules if ported to 9+, as well as other stuff possibly). Do not forget to correct the <code>@SupportedSourceVersion</code> value <em>if needed</em>, in case you port the code to a newer version.</p>\n<h3>Client project code:</h3>\n<pre><code>import annotations.CustomValue;\n\npublic class Person {\n    \n    @CustomValue(&quot;person.id&quot;)\n    private String id;\n    \n    @CustomValue(&quot;person.name = Random Name&quot;)\n    private String name;\n    \n    @CustomValue(&quot;person.surname = The Surname&quot;)\n    private String surname;\n\n    @Override\n    public String toString() {\n        return &quot;Person{&quot; + &quot;id=&quot; + id + &quot;, name=&quot; + name + &quot;, surname=&quot; + surname + '}';\n    }\n    \n    public static void main(final String[] args) {\n        final Person p = new Person();\n        System.out.println(p); //Prints null fields.\n        PersonUtils.setToDefaults(p); //PersonUtils was generated by the processor in the same package as Person.\n        System.out.println(p); //Prints fields with their values assigned by CustomValue.\n    }\n}\n</code></pre>\n<h3>Alternative limited-solution (without <code>Processor</code>):</h3>\n<p>It should be noted that, in this simple scenario, we don't even need to implement annotation processing. We can use reflection directly at runtime, on its own. We can modify a little the code generated by the above <code>Processor</code> with a more generic version which accepts any object and by using reflection detects and assigns <code>CustomValue</code> values to the fields of the object (where applicable). In this case one can use the following code (along with the annotation itself) in the <em>client</em> project directly:</p>\n<pre><code>import annotations.CustomValue;\nimport java.lang.annotation.Annotation;\nimport java.lang.reflect.Field;\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.List;\nimport java.util.Map;\n\npublic class CustomValueUtils {\n\n    private static List&lt;Field&gt; findAllAnnotatedDeclaredFields(final Class&lt;?&gt; clazz,\n                                                              final Class&lt;? extends Annotation&gt; annotationClass) {\n        final ArrayList&lt;Field&gt; annotatedFields = new ArrayList&lt;&gt;();\n        for (Class&lt;?&gt; cur = clazz; cur != null; cur = cur.getSuperclass()) {\n            try {\n                for (final Field field: cur.getDeclaredFields())\n                    if (field.getAnnotationsByType(annotationClass).length &gt; 0)\n                        annotatedFields.add(field);\n            }\n            catch (final SecurityException e) {\n            }\n        }\n        annotatedFields.trimToSize();\n        return Collections.unmodifiableList(annotatedFields);\n    }\n\n    private static void suppressedWriteField(final Object object,\n                                             final Field field,\n                                             final Object value) {\n        if (field != null) {\n            field.setAccessible(true);\n            try {\n                field.set(object, value);\n            }\n            catch (IllegalArgumentException | IllegalAccessException e) {\n            }\n        }\n    }\n\n    public static void setToDefaults(final Object object) {\n        final Map&lt;String, String&gt; propMap = Collections.singletonMap(&quot;person.id&quot;, &quot;undefined&quot;); //PropertyLoader.parsePropertiesFile();\n        findAllAnnotatedDeclaredFields(object.getClass(), CustomValue.class).forEach(field -&gt; {\n            final CustomValue customVal = field.getAnnotation(CustomValue.class);\n            final String annotationElementValue = customVal.value().trim();\n            \n            //Check for the specified value's sanity according to some simple parsing rules:\n            if (annotationElementValue.isEmpty() || annotationElementValue.startsWith(&quot;=&quot;))\n                throw new IllegalStateException(&quot;Empty parameter identifier for CustomValue2.&quot;);\n            \n            //Parse with simple rules:\n            final String[] param = annotationElementValue.split(&quot;=&quot;, 2);\n            final String paramID = param[0].trim(),\n                         paramDefaultValue = (param.length &gt; 1)? param[1].trim(): &quot;N/A&quot;;\n\n            //Find and set value:\n            final String paramValue = propMap.getOrDefault(paramID, paramDefaultValue);\n            suppressedWriteField(object, field, paramValue);\n        });\n    }\n}\n</code></pre>\n<p>and use it as:</p>\n<pre><code>import annotations.CustomValue;\n\npublic class Person {\n    \n    @CustomValue(&quot;person.id&quot;)\n    private String id;\n    \n    @CustomValue(&quot;person.name = Random Name&quot;)\n    private String name;\n    \n    @CustomValue(&quot;person.surname = The Surname&quot;)\n    private String surname;\n\n    @Override\n    public String toString() {\n        return &quot;Person{&quot; + &quot;id=&quot; + id + &quot;, name=&quot; + name + &quot;, surname=&quot; + surname + '}';\n    }\n    \n    public static void main(final String[] args) {\n        final Person p = new Person();\n        System.out.println(p);\n        CustomValueUtils.setToDefaults(p); //Can be any Object, but is intended for objects with fields annotated with CustomValue.\n        System.out.println(p);\n    }\n}\n</code></pre>\n<p>Note in each solution I faked <code>PropertyLoader.parsePropertiesFile();</code> with <code>Collections.singletonMap(&quot;person.id&quot;, &quot;undefined&quot;);</code> for simplicity.</p>\n"}],"owner":{"account_id":26652423,"reputation":1,"user_id":22428604,"display_name":"med"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":121,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1694188315,"creation_date":1692701883,"question_id":76952596,"body_markdown":"I have just started using annotation processing and trying to inject the value on the field annotated with my annotation . Since yesterday I am facing this error message: Compilation failure\r\n\r\nI have tried to research and fix but unable to avoid this error here is my `CustomValueProcessor.java` class and  my annotation: \r\n\r\n```\r\n@Target(ElementType.FIELD)\r\n@Retention(RetentionPolicy.RUNTIME)\r\npublic @interface CustomValue {\r\n    String value(); // This attribute will hold the property value\r\n}\r\n```\r\n\r\n```\r\nimport com.google.auto.service.AutoService;\r\nimport report.configurations.PropertyLoader;\r\nimport javax.annotation.processing.*;\r\nimport javax.lang.model.SourceVersion;\r\nimport javax.lang.model.element.Element;\r\nimport javax.lang.model.element.ElementKind;\r\nimport javax.lang.model.element.TypeElement;\r\nimport javax.lang.model.element.VariableElement;\r\nimport javax.lang.model.type.TypeMirror;\r\nimport javax.tools.Diagnostic;\r\nimport java.lang.reflect.Field;\r\nimport java.util.Map;\r\nimport java.util.Set;\r\n\r\n@SupportedAnnotationTypes(&quot;report.annotations.CustomValue&quot;)\r\n@SupportedSourceVersion(SourceVersion.RELEASE_17)\r\n@AutoService(javax.annotation.processing.Processor.class)\r\npublic class CustomValueProcessor extends AbstractProcessor {\r\n    private Messager messager;\r\n    private final Map&lt;String, String&gt; PropMap = PropertyLoader.parsePropertiesFile();\r\n\r\n    @Override\r\n    public synchronized void init(ProcessingEnvironment processingEnv) {\r\n        super.init(processingEnv);\r\n        messager = processingEnv.getMessager();\r\n    }\r\n\r\n    @Override\r\n    public boolean process(Set&lt;? extends TypeElement&gt; annotations, RoundEnvironment roundEnv) {\r\n        for (TypeElement annotation : annotations) {\r\n            for (Element element : roundEnv.getElementsAnnotatedWith(annotation)) {\r\n                if (element.getKind() == ElementKind.FIELD) {\r\n                    CustomValue annotationValue = element.getAnnotation(CustomValue.class);\r\n                    String newParaName = annotationValue.value().substring(2, annotationValue.value().length() - 1);\r\n                    String propertyValue = PropMap.get(newParaName);\r\n                    //messager.printMessage(Diagnostic.Kind.ERROR, propertyValue);\r\n                    VariableElement fieldElement = (VariableElement) element;\r\n                    String fieldName = fieldElement.getSimpleName().toString();\r\n                    //messager.printMessage(Diagnostic.Kind.ERROR, fieldName);\r\n                    // Get the class type from the TypeElement\r\n                    TypeElement enclosingClass = (TypeElement) fieldElement.getEnclosingElement();\r\n                    TypeMirror classType = enclosingClass.asType();\r\n                    //messager.printMessage(Diagnostic.Kind.ERROR, classType.toString());\r\n                    // Assuming PdfService is in the same package as enclosingClass\r\n                    Class&lt;?&gt; clazz = enclosingClass.getClass();\r\n                    // Get the field\r\n                    try {\r\n                        Field field = clazz.getDeclaredField(fieldName);\r\n                        //messager.printMessage(Diagnostic.Kind.ERROR,field.toString());\r\n                        field.setAccessible(true);\r\n                        // Set the value of the field\r\n                        field.set(null, propertyValue);  // Pass an object instance instead of null if the field is non-static\r\n                    } catch (NoSuchFieldException | IllegalAccessException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n        return false;\r\n    }\r\n}\r\n```\r\n\r\nPlease suggest/advice what I am doing wrong.\r\n ","title":"CustomValue Annotation Processing : How can i create a similar annotation of @Value","body":"<p>I have just started using annotation processing and trying to inject the value on the field annotated with my annotation . Since yesterday I am facing this error message: Compilation failure</p>\n<p>I have tried to research and fix but unable to avoid this error here is my <code>CustomValueProcessor.java</code> class and  my annotation:</p>\n<pre><code>@Target(ElementType.FIELD)\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface CustomValue {\n    String value(); // This attribute will hold the property value\n}\n</code></pre>\n<pre><code>import com.google.auto.service.AutoService;\nimport report.configurations.PropertyLoader;\nimport javax.annotation.processing.*;\nimport javax.lang.model.SourceVersion;\nimport javax.lang.model.element.Element;\nimport javax.lang.model.element.ElementKind;\nimport javax.lang.model.element.TypeElement;\nimport javax.lang.model.element.VariableElement;\nimport javax.lang.model.type.TypeMirror;\nimport javax.tools.Diagnostic;\nimport java.lang.reflect.Field;\nimport java.util.Map;\nimport java.util.Set;\n\n@SupportedAnnotationTypes(&quot;report.annotations.CustomValue&quot;)\n@SupportedSourceVersion(SourceVersion.RELEASE_17)\n@AutoService(javax.annotation.processing.Processor.class)\npublic class CustomValueProcessor extends AbstractProcessor {\n    private Messager messager;\n    private final Map&lt;String, String&gt; PropMap = PropertyLoader.parsePropertiesFile();\n\n    @Override\n    public synchronized void init(ProcessingEnvironment processingEnv) {\n        super.init(processingEnv);\n        messager = processingEnv.getMessager();\n    }\n\n    @Override\n    public boolean process(Set&lt;? extends TypeElement&gt; annotations, RoundEnvironment roundEnv) {\n        for (TypeElement annotation : annotations) {\n            for (Element element : roundEnv.getElementsAnnotatedWith(annotation)) {\n                if (element.getKind() == ElementKind.FIELD) {\n                    CustomValue annotationValue = element.getAnnotation(CustomValue.class);\n                    String newParaName = annotationValue.value().substring(2, annotationValue.value().length() - 1);\n                    String propertyValue = PropMap.get(newParaName);\n                    //messager.printMessage(Diagnostic.Kind.ERROR, propertyValue);\n                    VariableElement fieldElement = (VariableElement) element;\n                    String fieldName = fieldElement.getSimpleName().toString();\n                    //messager.printMessage(Diagnostic.Kind.ERROR, fieldName);\n                    // Get the class type from the TypeElement\n                    TypeElement enclosingClass = (TypeElement) fieldElement.getEnclosingElement();\n                    TypeMirror classType = enclosingClass.asType();\n                    //messager.printMessage(Diagnostic.Kind.ERROR, classType.toString());\n                    // Assuming PdfService is in the same package as enclosingClass\n                    Class&lt;?&gt; clazz = enclosingClass.getClass();\n                    // Get the field\n                    try {\n                        Field field = clazz.getDeclaredField(fieldName);\n                        //messager.printMessage(Diagnostic.Kind.ERROR,field.toString());\n                        field.setAccessible(true);\n                        // Set the value of the field\n                        field.set(null, propertyValue);  // Pass an object instance instead of null if the field is non-static\n                    } catch (NoSuchFieldException | IllegalAccessException e) {\n                        e.printStackTrace();\n                    }\n                }\n            }\n            return false;\n        }\n        return false;\n    }\n}\n</code></pre>\n<p>Please suggest/advice what I am doing wrong.</p>\n"},{"tags":["java","json","eclipse"],"comments":[{"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"score":0,"creation_date":1439896062,"post_id":32070402,"comment_id":52038089,"body_markdown":"Where is your attempt at solving this issue? What library are you using?","body":"Where is your attempt at solving this issue? What library are you using?"},{"owner":{"account_id":4455557,"reputation":25,"user_id":3625987,"accept_rate":20,"display_name":"Jesper V"},"score":0,"creation_date":1439896255,"post_id":32070402,"comment_id":52038208,"body_markdown":"I don&#39;t know how to achieve this. I would like to get information on how to do this.\nI am using the spigot jar file","body":"I don&#39;t know how to achieve this. I would like to get information on how to do this. I am using the spigot jar file"},{"owner":{"account_id":5127914,"reputation":1434,"user_id":4109249,"display_name":"XMB5"},"score":0,"creation_date":1484003057,"post_id":32070402,"comment_id":70322172,"body_markdown":"Couldn&#39;t some random person just type in-game /manuadd MySelf Mod?","body":"Couldn&#39;t some random person just type in-game /manuadd MySelf Mod?"}],"answers":[{"tags":[],"owner":{"account_id":20307855,"reputation":21,"user_id":14895655,"display_name":"Willyema"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694187626,"creation_date":1694187626,"answer_id":77068235,"question_id":32070402,"body_markdown":"To read the JSON data I suggest using a library like google&#39;s [Gson][1] or [SimplixStorage][2] and if you use simplix you can do something like this\r\n\r\n```\r\npublic Json getJsonFromURL(URL url, String name, String path){\r\n        Json json;\r\n        try (InputStream input = url.openStream()) {\r\n            json = new Json(name, path, input);\r\n            return json;\r\n        } catch (Exception e){\r\n            //Exceprion handling\r\n        }\r\n        return null;\r\n    }\r\n```\r\n\r\n\r\n  [1]: https://github.com/google/gson\r\n  [2]: https://github.com/Simplix-Softworks/SimplixStorage","title":"Minecraft plugin read JSON data","body":"<p>To read the JSON data I suggest using a library like google's <a href=\"https://github.com/google/gson\" rel=\"nofollow noreferrer\">Gson</a> or <a href=\"https://github.com/Simplix-Softworks/SimplixStorage\" rel=\"nofollow noreferrer\">SimplixStorage</a> and if you use simplix you can do something like this</p>\n<pre><code>public Json getJsonFromURL(URL url, String name, String path){\n        Json json;\n        try (InputStream input = url.openStream()) {\n            json = new Json(name, path, input);\n            return json;\n        } catch (Exception e){\n            //Exceprion handling\n        }\n        return null;\n    }\n</code></pre>\n"}],"owner":{"account_id":4455557,"reputation":25,"user_id":3625987,"accept_rate":20,"display_name":"Jesper V"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":248,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1694187626,"creation_date":1439895186,"question_id":32070402,"body_markdown":"I would like to create my own Minecraft plugin.\r\n\r\n**Problem:** Moderators must type in this command:\r\n\r\n    /mod login {KEY-FROM-JSONFILE}\r\n\r\nAnd if the *playername* and the *key* that they gave are correct, the Console must execute the following command:\r\n\r\n    /manuadd {playername} Mod\r\n\r\nThe *key* and the *playername* are generated on the website stored in the JSON file.\r\n\r\nHow can I achieve this?","title":"Minecraft plugin read JSON data","body":"<p>I would like to create my own Minecraft plugin.</p>\n\n<p><strong>Problem:</strong> Moderators must type in this command:</p>\n\n<pre><code>/mod login {KEY-FROM-JSONFILE}\n</code></pre>\n\n<p>And if the <em>playername</em> and the <em>key</em> that they gave are correct, the Console must execute the following command:</p>\n\n<pre><code>/manuadd {playername} Mod\n</code></pre>\n\n<p>The <em>key</em> and the <em>playername</em> are generated on the website stored in the JSON file.</p>\n\n<p>How can I achieve this?</p>\n"},{"tags":["java","ide"],"comments":[{"owner":{"account_id":44195,"reputation":269053,"user_id":129570,"accept_rate":79,"display_name":"Oliver Charlesworth"},"score":3,"creation_date":1496750216,"post_id":44389329,"comment_id":75778289,"body_markdown":"How would you chain getters?","body":"How would you chain getters?"},{"owner":{"account_id":7121220,"reputation":2067,"user_id":5445792,"accept_rate":47,"display_name":"Will"},"score":0,"creation_date":1496750487,"post_id":44389329,"comment_id":75778456,"body_markdown":"My bad, edited.","body":"My bad, edited."},{"owner":{"account_id":7009242,"reputation":1636,"user_id":5372723,"accept_rate":100,"display_name":"Turtle"},"score":0,"creation_date":1496750509,"post_id":44389329,"comment_id":75778470,"body_markdown":"@OliverCharlesworth You just blew my mind. But getters should probably not be chained (as they would serve no purpose otherwise).","body":"@OliverCharlesworth You just blew my mind. But getters should probably not be chained (as they would serve no purpose otherwise)."},{"owner":{"account_id":44195,"reputation":269053,"user_id":129570,"accept_rate":79,"display_name":"Oliver Charlesworth"},"score":0,"creation_date":1496750697,"post_id":44389329,"comment_id":75778598,"body_markdown":"FWIW, you should look into [Immutables](https://immutables.github.io/).","body":"FWIW, you should look into <a href=\"https://immutables.github.io/\" rel=\"nofollow noreferrer\">Immutables</a>."},{"owner":{"account_id":9443335,"reputation":15252,"user_id":7023245,"accept_rate":25,"display_name":"Timothy Truckle"},"score":0,"creation_date":1496751079,"post_id":44389329,"comment_id":75778867,"body_markdown":"@OliverCharlesworth while immutable DTOs/ValueObject are a very good idea *fluent API* on Builders is not that bad... ;o)","body":"@OliverCharlesworth while immutable DTOs/ValueObject are a very good idea <i>fluent API</i> on Builders is not that bad... ;o)"},{"owner":{"account_id":44195,"reputation":269053,"user_id":129570,"accept_rate":79,"display_name":"Oliver Charlesworth"},"score":0,"creation_date":1496751274,"post_id":44389329,"comment_id":75779014,"body_markdown":"@TimothyTruckle - Yeah, in this case, the fact that Immutables are immutable is less interesting than the fact that they give give you an autogenerated fluent builder API.","body":"@TimothyTruckle - Yeah, in this case, the fact that Immutables are immutable is less interesting than the fact that they give give you an autogenerated fluent builder API."}],"answers":[{"tags":[],"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1496750508,"creation_date":1496750508,"answer_id":44389499,"question_id":44389329,"body_markdown":"It&#39;s generally called &quot;fluent&quot; setters. There is [a plugin for Netbeans][1] that does it automatically for you. I&#39;m pretty sure you can find something equivalent in eclipse or IntelliJ.\r\n\r\n [1]: http://plugins.netbeans.org/plugin/55184/constants-fluent-setters-and-builder-generator","title":"Generate chained setters","body":"<p>It's generally called \"fluent\" setters. There is <a href=\"http://plugins.netbeans.org/plugin/55184/constants-fluent-setters-and-builder-generator\" rel=\"nofollow noreferrer\">a plugin for Netbeans</a> that does it automatically for you. I'm pretty sure you can find something equivalent in eclipse or IntelliJ.</p>\n"},{"tags":[],"owner":{"account_id":5792819,"reputation":2513,"user_id":4569624,"display_name":"Vitaliy Moskalyuk"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1496751529,"creation_date":1496750641,"answer_id":44389541,"question_id":44389329,"body_markdown":"It&#39;s possible in `IntelliJ IDEA`: \r\n\r\n&gt; 1. call &quot;Generate &gt; Setter&quot; menu\r\n&gt; 2. select template &quot;Builder&quot;. \r\n&gt; 3. Select all fields you want to generate setter\r\n&gt; 4. click &#39;Ok&#39;.\r\n\r\nHere is generated result (for 1 field):\r\n\r\n    public MyClass setParam(String param) {\r\n            this.param = param;\r\n            return this;\r\n        }\r\n\r\nIt&#39;s also possible to create your own template there) \r\n","title":"Generate chained setters","body":"<p>It's possible in <code>IntelliJ IDEA</code>: </p>\n\n<blockquote>\n  <ol>\n  <li>call \"Generate > Setter\" menu</li>\n  <li>select template \"Builder\". </li>\n  <li>Select all fields you want to generate setter</li>\n  <li>click 'Ok'.</li>\n  </ol>\n</blockquote>\n\n<p>Here is generated result (for 1 field):</p>\n\n<pre><code>public MyClass setParam(String param) {\n        this.param = param;\n        return this;\n    }\n</code></pre>\n\n<p>It's also possible to create your own template there) </p>\n"},{"comments":[{"owner":{"account_id":9443335,"reputation":15252,"user_id":7023245,"accept_rate":25,"display_name":"Timothy Truckle"},"score":1,"creation_date":1496751194,"post_id":44389592,"comment_id":75778964,"body_markdown":"Use *lombok* with care! It changes the bytecode bypassing the JDKs compiler and you have to expect incompatibilities with future java versions.","body":"Use <i>lombok</i> with care! It changes the bytecode bypassing the JDKs compiler and you have to expect incompatibilities with future java versions."}],"tags":[],"owner":{"account_id":305166,"reputation":434,"user_id":2651871,"accept_rate":33,"display_name":"Amber Kulkarni"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1496752273,"creation_date":1496750797,"answer_id":44389592,"question_id":44389329,"body_markdown":"You can try lombok\r\n\r\nlombok.accessors.chain = [true | false] (default: false)\r\n\r\nIf set to true, generated setters will return this (instead of void). An explicitly configured chain parameter of an @Accessors annotation takes precedence over this setting.\r\n\r\nIs this what you want ?\r\nhttps://projectlombok.org/features/GetterSetter.html\r\n\r\n    @Accessors(chain = true)\r\n    @Getter\r\n    @Setter\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor(access=AccessLevel.PRIVATE)\r\n    \r\n    public class LombokTest {\r\n        private String test;\r\n\r\n        public static void main(String []args) {\r\n            LombokTest a = new LombokTest();\r\n            System.out.println(a.setTest(&quot;amber&quot;).getTest());\r\n        }\r\n    }\r\n\r\n\r\n","title":"Generate chained setters","body":"<p>You can try lombok</p>\n\n<p>lombok.accessors.chain = [true | false] (default: false)</p>\n\n<p>If set to true, generated setters will return this (instead of void). An explicitly configured chain parameter of an @Accessors annotation takes precedence over this setting.</p>\n\n<p>Is this what you want ?\n<a href=\"https://projectlombok.org/features/GetterSetter.html\" rel=\"noreferrer\">https://projectlombok.org/features/GetterSetter.html</a></p>\n\n<pre><code>@Accessors(chain = true)\n@Getter\n@Setter\n@AllArgsConstructor\n@NoArgsConstructor(access=AccessLevel.PRIVATE)\n\npublic class LombokTest {\n    private String test;\n\n    public static void main(String []args) {\n        LombokTest a = new LombokTest();\n        System.out.println(a.setTest(\"amber\").getTest());\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":7121220,"reputation":2067,"user_id":5445792,"accept_rate":47,"display_name":"Will"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3509,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"answer_count":3,"score":3,"last_activity_date":1694187596,"creation_date":1496749995,"question_id":44389329,"body_markdown":"I want to create a big Java object with 20 fields, most IDEs provide a generate function, which allows me to generate getters and setters for all the fields of my object.\r\n\r\nThe thing is, I am a big fan of [method chaining][1] and I am using it on all my objects, but I have to add `return this` at the end of each `setters`, which is not very handy.\r\n\r\nIs it possible to generate setters with a special plugin form an IDE?\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/21180269/how-to-achieve-method-chaining-in-java","title":"Generate chained setters","body":"<p>I want to create a big Java object with 20 fields, most IDEs provide a generate function, which allows me to generate getters and setters for all the fields of my object.</p>\n<p>The thing is, I am a big fan of <a href=\"https://stackoverflow.com/questions/21180269/how-to-achieve-method-chaining-in-java\">method chaining</a> and I am using it on all my objects, but I have to add <code>return this</code> at the end of each <code>setters</code>, which is not very handy.</p>\n<p>Is it possible to generate setters with a special plugin form an IDE?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":3,"creation_date":1694185958,"post_id":77067975,"comment_id":135862600,"body_markdown":"That&#39;s because you&#39;ve included the properties file *itself* in the classpath. There&#39;s no such thing as a file being part of a classpath, *unless* that file happens to be a jar. You need the *directory that contains the properties file* in the classpath, not the file itself. So: `-cp &quot;.:$directory/jar/myJar.jar:$directory/config&quot;`","body":"That&#39;s because you&#39;ve included the properties file <i>itself</i> in the classpath. There&#39;s no such thing as a file being part of a classpath, <i>unless</i> that file happens to be a jar. You need the <i>directory that contains the properties file</i> in the classpath, not the file itself. So: <code>-cp &quot;.:$directory&#47;jar&#47;myJar.jar:$directory&#47;config&quot;</code>"},{"owner":{"account_id":7527198,"reputation":1109,"user_id":5716914,"accept_rate":11,"display_name":"Johnyb"},"score":0,"creation_date":1694186300,"post_id":77067975,"comment_id":135862674,"body_markdown":"same error, and also you can directly include files using -cp.","body":"same error, and also you can directly include files using -cp."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1694186613,"post_id":77067975,"comment_id":135862745,"body_markdown":"Can you please show *literally* what you&#39;re running instead of using placeholders","body":"Can you please show <i>literally</i> what you&#39;re running instead of using placeholders"},{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1694186784,"post_id":77067975,"comment_id":135862777,"body_markdown":"The `.` means current folder. That&#39;s the only thing that&#39;s currently working. I would try putting an `echo` in front of the `java` command. Make sure it&#39;s expanding as you expect.","body":"The <code>.</code> means current folder. That&#39;s the only thing that&#39;s currently working. I would try putting an <code>echo</code> in front of the <code>java</code> command. Make sure it&#39;s expanding as you expect."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1694187053,"post_id":77067975,"comment_id":135862821,"body_markdown":"That&#39;s a good plan","body":"That&#39;s a good plan"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1694187116,"post_id":77067975,"comment_id":135862836,"body_markdown":"@g00se Technically it doesn&#39;t have to be a JAR file, any ZIP file should do.","body":"@g00se Technically it doesn&#39;t have to be a JAR file, any ZIP file should do."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1694187211,"post_id":77067975,"comment_id":135862851,"body_markdown":"As g00se says, you cannot just include non-JAR/ZIP files in the classpath. You can only specify directories or archives containing class and other files. The fact it works if you move it into the current directory is because with `.` you added the file on the classpath (and *before* the JAR, generally the classpath is evaluated in the specified order, though I don&#39;t believe that is actually guaranteed).","body":"As g00se says, you cannot just include non-JAR/ZIP files in the classpath. You can only specify directories or archives containing class and other files. The fact it works if you move it into the current directory is because with <code>.</code> you added the file on the classpath (and <i>before</i> the JAR, generally the classpath is evaluated in the specified order, though I don&#39;t believe that is actually guaranteed)."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1694187224,"post_id":77067975,"comment_id":135862855,"body_markdown":"*.. any ZIP file should do ..* that could be the case. Not sure if that&#39;s *always* been the case though `-D&quot;spring.messages.basename=$directory/config&quot;` might also work *if* it&#39;s expanding properly","body":"<i>.. any ZIP file should do ..</i> that could be the case. Not sure if that&#39;s <i>always</i> been the case though <code>-D&quot;spring.messages.basename=$directory&#47;config&quot;</code> might also work <i>if</i> it&#39;s expanding properly"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1694187498,"post_id":77067975,"comment_id":135862915,"body_markdown":"@g00se I think that worked from the start. In the past, I have seen some applications and libraries distributed with the JAR actually having a `.zip` suffix, and putting those on the classpath worked. In any case, assuming your suggestion is correct, I think it should be `&quot;-Dspring.messages.basename=$directory/config&quot;` (quotes around the entire option), to avoid issues with commandline parsers.","body":"@g00se I think that worked from the start. In the past, I have seen some applications and libraries distributed with the JAR actually having a <code>.zip</code> suffix, and putting those on the classpath worked. In any case, assuming your suggestion is correct, I think it should be <code>&quot;-Dspring.messages.basename=$directory&#47;config&quot;</code> (quotes around the entire option), to avoid issues with commandline parsers."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1694187625,"post_id":77067975,"comment_id":135862939,"body_markdown":"Yes, I think your version is better","body":"Yes, I think your version is better"}],"answers":[{"comments":[{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":0,"creation_date":1694187826,"post_id":77068220,"comment_id":135862978,"body_markdown":"actual [documentation](https://docs.oracle.com/en/java/javase/20/docs/specs/man/java.html#standard-options-for-java): &quot;... Specifies a list of directories, JAR files, and ZIP archives to search for class files. ...&quot;","body":"actual <a href=\"https://docs.oracle.com/en/java/javase/20/docs/specs/man/java.html#standard-options-for-java\" rel=\"nofollow noreferrer\">documentation</a>: &quot;... Specifies a list of directories, JAR files, and ZIP archives to search for class files. ...&quot;"},{"owner":{"account_id":7527198,"reputation":1109,"user_id":5716914,"accept_rate":11,"display_name":"Johnyb"},"score":0,"creation_date":1694208823,"post_id":77068220,"comment_id":135866192,"body_markdown":"when i include only `$directory/config` or `$directory/config/` the problem remains the same","body":"when i include only <code>$directory&#47;config</code> or <code>$directory&#47;config&#47;</code> the problem remains the same"},{"owner":{"account_id":2496,"reputation":266244,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"score":1,"creation_date":1694227453,"post_id":77068220,"comment_id":135867571,"body_markdown":"@Johnyb Are you putting it first in the classpath?","body":"@Johnyb Are you putting it first in the classpath?"},{"owner":{"account_id":7527198,"reputation":1109,"user_id":5716914,"accept_rate":11,"display_name":"Johnyb"},"score":0,"creation_date":1694417355,"post_id":77068220,"comment_id":135883160,"body_markdown":"@erickson yes and it does not work","body":"@erickson yes and it does not work"}],"tags":[],"owner":{"account_id":2496,"reputation":266244,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"comment_count":4,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1694187484,"creation_date":1694187484,"answer_id":77068220,"question_id":77067975,"body_markdown":"The classpath is a list Java archives or directories that contain &quot;exploded&quot; archives. You can&#39;t add arbitrary files.\r\n\r\nThe first example doesn&#39;t work because the directory that contains `myService.properties` is not on the classpath. (`$directory/config/myService.properties` doesn&#39;t count; it&#39;s not a directory.)\r\n\r\nThe second example works because the directory that contains the file is in the classpath before the other copy (`.`, the current working directory).","title":"java -cp option doesn&#39;t work if files are not in current directory","body":"<p>The classpath is a list Java archives or directories that contain &quot;exploded&quot; archives. You can't add arbitrary files.</p>\n<p>The first example doesn't work because the directory that contains <code>myService.properties</code> is not on the classpath. (<code>$directory/config/myService.properties</code> doesn't count; it's not a directory.)</p>\n<p>The second example works because the directory that contains the file is in the classpath before the other copy (<code>.</code>, the current working directory).</p>\n"}],"owner":{"account_id":7527198,"reputation":1109,"user_id":5716914,"accept_rate":11,"display_name":"Johnyb"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1694251041,"answer_count":1,"score":1,"last_activity_date":1694187484,"creation_date":1694185380,"question_id":77067975,"body_markdown":"I have a Spring Boot app which contains `myService.properties` file in resource folder (so it&#39;s copied into the classpath). This property files has all the properties empty. I have JAR file generated. I want to overwrite the properties, so I created my own `myService.properties` file. I run it from command line:\r\n\r\n     directory=$HOME/apps/myApp/files\r\n    \r\n     java &lt;VM ptions&gt;\r\n          -cp &quot;.:$directory/jar/myJar.jar:$directory/config/myService.properties&quot; \\\r\n          -Dloader.main=&lt;Path to main class&gt; org.springframework.boot.loader.PropertiesLauncher\r\n\r\nWhen I run this, the app complains that properties in `myService.properties` are empty (thus the original property file is considered).\r\n\r\nHowever, when I copy the properties file to current directory and call it using:\r\n\r\n     directory=$HOME/apps/myApp/files\r\n    \r\n     java &lt;VM ptions&gt;\r\n          -cp &quot;.:$directory/jar/myJar.jar:myService.properties&quot; \\\r\n          -Dloader.main=&lt;Path to main class&gt; org.springframework.boot.loader.PropertiesLauncher\r\n\r\nEverything works as it should. Why doesn&#39;t the `-cp` option load files that are not in current directory?\r\n\r\nDoes it mean that the classpath contains `myService.properties` contained in my JAR file but also `myService.properties` that I include in the classpath, however with whole path, e.g.\r\n\r\n`$HOME/apps/myApp/files/config/myService.properties` and when the app look for the config file it first finds the `myService.properties` included in JAR file and not the one I include in classpath? \r\n\r\nIf so is the only way to fix this to exclude `myService.properties` from JAR file or just have `myService.properties` in current directory?\r\n\r\n","title":"java -cp option doesn&#39;t work if files are not in current directory","body":"<p>I have a Spring Boot app which contains <code>myService.properties</code> file in resource folder (so it's copied into the classpath). This property files has all the properties empty. I have JAR file generated. I want to overwrite the properties, so I created my own <code>myService.properties</code> file. I run it from command line:</p>\n<pre><code> directory=$HOME/apps/myApp/files\n\n java &lt;VM ptions&gt;\n      -cp &quot;.:$directory/jar/myJar.jar:$directory/config/myService.properties&quot; \\\n      -Dloader.main=&lt;Path to main class&gt; org.springframework.boot.loader.PropertiesLauncher\n</code></pre>\n<p>When I run this, the app complains that properties in <code>myService.properties</code> are empty (thus the original property file is considered).</p>\n<p>However, when I copy the properties file to current directory and call it using:</p>\n<pre><code> directory=$HOME/apps/myApp/files\n\n java &lt;VM ptions&gt;\n      -cp &quot;.:$directory/jar/myJar.jar:myService.properties&quot; \\\n      -Dloader.main=&lt;Path to main class&gt; org.springframework.boot.loader.PropertiesLauncher\n</code></pre>\n<p>Everything works as it should. Why doesn't the <code>-cp</code> option load files that are not in current directory?</p>\n<p>Does it mean that the classpath contains <code>myService.properties</code> contained in my JAR file but also <code>myService.properties</code> that I include in the classpath, however with whole path, e.g.</p>\n<p><code>$HOME/apps/myApp/files/config/myService.properties</code> and when the app look for the config file it first finds the <code>myService.properties</code> included in JAR file and not the one I include in classpath?</p>\n<p>If so is the only way to fix this to exclude <code>myService.properties</code> from JAR file or just have <code>myService.properties</code> in current directory?</p>\n"},{"tags":["java","spring","project-reactor"],"comments":[{"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":3,"creation_date":1600121722,"post_id":63892414,"comment_id":112982795,"body_markdown":"Your question, at its core is &quot;how do I use Mono&lt;Void&gt; and zip the results?&quot;, so why didn&#39;t you ask that and show an example? I suspect you already know the answer to this question. The key is in the word &quot;dummy&quot;. If you have to use some dummy type, you probably went wrong somewhere.","body":"Your question, at its core is &quot;how do I use Mono&lt;Void&gt; and zip the results?&quot;, so why didn&#39;t you ask that and show an example? I suspect you already know the answer to this question. The key is in the word &quot;dummy&quot;. If you have to use some dummy type, you probably went wrong somewhere."},{"owner":{"account_id":303087,"reputation":8621,"user_id":611819,"accept_rate":100,"display_name":"dnault"},"score":1,"creation_date":1600122196,"post_id":63892414,"comment_id":112982908,"body_markdown":"If you only need to signal completion or error, `Mono&lt;Void&gt;` is the appropriate type. `Mono&lt;Boolean&gt;` would confuse anyone trying to read the code.","body":"If you only need to signal completion or error, <code>Mono&lt;Void&gt;</code> is the appropriate type. <code>Mono&lt;Boolean&gt;</code> would confuse anyone trying to read the code."}],"answers":[{"tags":[],"owner":{"account_id":4436369,"reputation":992,"user_id":3612124,"accept_rate":50,"display_name":"Istv&#225;n B&#233;k&#233;si"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694186433,"creation_date":1694186433,"answer_id":77068091,"question_id":63892414,"body_markdown":"&gt; when I went to use Mono.zip to combine the results that didn&#39;t work\r\n\r\nThat is because you cannot zip something to nothing, the resulting mono will be empty.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/KU757.png\r\n\r\nInstead, you can use (1) `Flux.merge` and call `next` to convert the Flux to a Mono or (2) or let mono void to complete then play the other.\r\n\r\n        Mono&lt;Void&gt; monoVoid = Mono.empty();\r\n        Mono&lt;Object&gt; monoSomething = Mono.just(&quot;something&quot;);\r\n\r\n        StepVerifier.create(Mono.zip(monoVoid, monoSomething))\r\n            .expectNextCount(0)     // Note: zip results in empty mono\r\n            .expectComplete()\r\n            .verify();\r\n\r\n        // Alternative #1\r\n        StepVerifier.create(Flux.merge(monoVoid, monoSomething).next())\r\n            .expectNext(&quot;something&quot;)\r\n            .expectComplete()\r\n            .verify();\r\n\r\n        // Alternative #2\r\n        StepVerifier.create(monoVoid.then(monoSomething))\r\n            .expectNext(&quot;something&quot;)\r\n            .expectComplete()\r\n            .verify();","title":"Reactor: Use Mono&lt;Void&gt; or a dummy type like Mono&lt;Boolean&gt;","body":"<blockquote>\n<p>when I went to use Mono.zip to combine the results that didn't work</p>\n</blockquote>\n<p>That is because you cannot zip something to nothing, the resulting mono will be empty.</p>\n<p><a href=\"https://i.stack.imgur.com/KU757.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KU757.png\" alt=\"enter image description here\" /></a></p>\n<p>Instead, you can use (1) <code>Flux.merge</code> and call <code>next</code> to convert the Flux to a Mono or (2) or let mono void to complete then play the other.</p>\n<pre><code>    Mono&lt;Void&gt; monoVoid = Mono.empty();\n    Mono&lt;Object&gt; monoSomething = Mono.just(&quot;something&quot;);\n\n    StepVerifier.create(Mono.zip(monoVoid, monoSomething))\n        .expectNextCount(0)     // Note: zip results in empty mono\n        .expectComplete()\n        .verify();\n\n    // Alternative #1\n    StepVerifier.create(Flux.merge(monoVoid, monoSomething).next())\n        .expectNext(&quot;something&quot;)\n        .expectComplete()\n        .verify();\n\n    // Alternative #2\n    StepVerifier.create(monoVoid.then(monoSomething))\n        .expectNext(&quot;something&quot;)\n        .expectComplete()\n        .verify();\n</code></pre>\n"}],"owner":{"account_id":6923065,"reputation":203,"user_id":12103979,"display_name":"Phyzz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":343,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1694186433,"creation_date":1600121386,"question_id":63892414,"body_markdown":"I&#39;ve got a REST service written in Java using Spring and associated libraries including Reactor, using Mono to wrap expensive operations.\r\n\r\nI am refactoring DB related code with the usual CRUD methods. I&#39;ve come across examples with a return type of `Mono&lt;Void&gt;`, which to me would make sense for methods where one only cares about success or failure. For my use case things like update or especially delete a database entry.\r\n\r\nIn actuality I&#39;ve been hitting all sorts of friction in trying to use `Mono&lt;Void&gt;` which came to a head for me when I had an area where I had two methods that could be done in parallel, one of which was returning `Mono&lt;Void&gt;`, and when I went to use `Mono.zip` to combine the results that didn&#39;t work. And I couldn&#39;t find any method to combine them, maintain the parallelism, and use `Mono&lt;Void&gt;`. What does work is mapping the `Mono&lt;Void&gt;` to something like `Mono&lt;Boolean&gt;` with a dummy `Boolean.TRUE`.\r\n\r\nSo at this point I am wondering what the best practice is when the method doesn&#39;t have a real return type, just indicate success or error. Should I be trying to use `Mono&lt;Void&gt;` with some techniques I am missing or just use a dummy type like `Mono&lt;Boolean&gt;`?","title":"Reactor: Use Mono&lt;Void&gt; or a dummy type like Mono&lt;Boolean&gt;","body":"<p>I've got a REST service written in Java using Spring and associated libraries including Reactor, using Mono to wrap expensive operations.</p>\n<p>I am refactoring DB related code with the usual CRUD methods. I've come across examples with a return type of <code>Mono&lt;Void&gt;</code>, which to me would make sense for methods where one only cares about success or failure. For my use case things like update or especially delete a database entry.</p>\n<p>In actuality I've been hitting all sorts of friction in trying to use <code>Mono&lt;Void&gt;</code> which came to a head for me when I had an area where I had two methods that could be done in parallel, one of which was returning <code>Mono&lt;Void&gt;</code>, and when I went to use <code>Mono.zip</code> to combine the results that didn't work. And I couldn't find any method to combine them, maintain the parallelism, and use <code>Mono&lt;Void&gt;</code>. What does work is mapping the <code>Mono&lt;Void&gt;</code> to something like <code>Mono&lt;Boolean&gt;</code> with a dummy <code>Boolean.TRUE</code>.</p>\n<p>So at this point I am wondering what the best practice is when the method doesn't have a real return type, just indicate success or error. Should I be trying to use <code>Mono&lt;Void&gt;</code> with some techniques I am missing or just use a dummy type like <code>Mono&lt;Boolean&gt;</code>?</p>\n"},{"tags":["java","unit-testing","reflection","mockito","hive-udf"],"answers":[{"tags":[],"owner":{"account_id":4692849,"reputation":127,"user_id":3798531,"accept_rate":75,"display_name":"nambastha"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1694186397,"creation_date":1694158424,"answer_id":77064969,"question_id":77057537,"body_markdown":"After some research, I found a working solution to the above question. \r\n\r\n\r\nBelow is the working solution:\r\n\r\n\r\n\r\n    public class ReverseStringTest {\r\n    \r\n        @Test\r\n        public void testSimpleString() throws Exception {\r\n    \r\n            ReverseString reverseString = org.mockito.Mockito.spy(ReverseString.class);\r\n    \r\n            ObjectInspector[] arg0 = new ObjectInspector[] {PrimitiveObjectInspectorFactory.javaStringObjectInspector,\r\n                    PrimitiveObjectInspectorFactory.javaStringObjectInspector} ;\r\n    \r\n            when(reverseString.init(arg0)).thenReturn(PrimitiveObjectInspectorFactory.javaStringObjectInspector);\r\n            reverseString.initialize(arg0);\r\n    \r\n            Text text = new Text(&quot;Ans&quot;);\r\n            GenericUDF.DeferredObject[] deferredObjects = { new GenericUDF.DeferredJavaObject(text) };\r\n            when(reverseString.reverse(&quot;Ans&quot;)).thenReturn(testcase());\r\n    \r\n            Object result = reverseString.evaluate(deferredObjects);\r\n            System.out.println(result);\r\n            Assertions.assertEquals(new Text(&quot;snA&quot;),result);\r\n    \r\n        }\r\n    \r\n        public Object testcase() {\r\n            return new Text(&quot;snA&quot;) ;\r\n    \r\n        }\r\n\r\nInstead of &#39;mock&#39;, we can use &#39;spy&#39; where part of the object will be mocked and part will use real method invocation (This helps to improve your code coverage as well if you want to consider that).\r\n\r\nYou can refer below link to understand more about Mockito &#39;mock&#39; and &#39;spy&#39;.\r\n\r\nhttps://stackoverflow.com/questions/28295625/mockito-spy-vs-mock\r\n\r\nSince we have extended `GenericUDF`, and Hive implementation calls `initialize` method first, it is important to mock the arguments passed correctly before making a call to `evaluate`.\r\n\r\n","title":"Unit Test Cases for Hive Custom UDFs by mocking Java Reflection calls","body":"<p>After some research, I found a working solution to the above question.</p>\n<p>Below is the working solution:</p>\n<pre><code>public class ReverseStringTest {\n\n    @Test\n    public void testSimpleString() throws Exception {\n\n        ReverseString reverseString = org.mockito.Mockito.spy(ReverseString.class);\n\n        ObjectInspector[] arg0 = new ObjectInspector[] {PrimitiveObjectInspectorFactory.javaStringObjectInspector,\n                PrimitiveObjectInspectorFactory.javaStringObjectInspector} ;\n\n        when(reverseString.init(arg0)).thenReturn(PrimitiveObjectInspectorFactory.javaStringObjectInspector);\n        reverseString.initialize(arg0);\n\n        Text text = new Text(&quot;Ans&quot;);\n        GenericUDF.DeferredObject[] deferredObjects = { new GenericUDF.DeferredJavaObject(text) };\n        when(reverseString.reverse(&quot;Ans&quot;)).thenReturn(testcase());\n\n        Object result = reverseString.evaluate(deferredObjects);\n        System.out.println(result);\n        Assertions.assertEquals(new Text(&quot;snA&quot;),result);\n\n    }\n\n    public Object testcase() {\n        return new Text(&quot;snA&quot;) ;\n\n    }\n</code></pre>\n<p>Instead of 'mock', we can use 'spy' where part of the object will be mocked and part will use real method invocation (This helps to improve your code coverage as well if you want to consider that).</p>\n<p>You can refer below link to understand more about Mockito 'mock' and 'spy'.</p>\n<p><a href=\"https://stackoverflow.com/questions/28295625/mockito-spy-vs-mock\">Mockito - @Spy vs @Mock</a></p>\n<p>Since we have extended <code>GenericUDF</code>, and Hive implementation calls <code>initialize</code> method first, it is important to mock the arguments passed correctly before making a call to <code>evaluate</code>.</p>\n"}],"owner":{"account_id":4692849,"reputation":127,"user_id":3798531,"accept_rate":75,"display_name":"nambastha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77064969,"answer_count":1,"score":0,"last_activity_date":1694186397,"creation_date":1694072515,"question_id":77057537,"body_markdown":"I have a requirement where I need to develop Hive Custom UDFs that uses Java reflection API to make calls to external classes. \r\n\r\nSince I&#39;m new to Java Reflection, I have dedicated some time learning it and was able to do a basic implementation.\r\n\r\nBut I&#39;m facing issues while writing unit test cases for this implementation as I&#39;m facing some challenges in mocking Reflection APIs. \r\n\r\n\r\n\r\nBelow is the example for Hive Custom UDF.\r\n\r\n&gt; ReverseString.java\r\n\r\n```\r\n\r\npublic class ReverseString extends GenericUDF {\r\n\r\n    private StringObjectInspector input;\r\n    Class&lt;?&gt; c = null;\r\n    Object ob = null;\r\n\r\n\r\n    @Override\r\n    public ObjectInspector initialize(ObjectInspector[] arg0) throws UDFArgumentException {\r\n\r\n        // create an ObjectInspector for the input\r\n        ObjectInspector input = arg0[0];\r\n\r\n        // check to make sure the input is a string\r\n        if (!(input instanceof StringObjectInspector)) {\r\n            throw new UDFArgumentException(&quot;input must be a string&quot;);\r\n        }\r\n\r\n\r\n        this.input = (StringObjectInspector) input;\r\n        System.out.println(&quot;Success. Input formatted correctly&quot;);\r\n\r\n        return init(arg0);\r\n    }\r\n\r\n    public ObjectInspector init(ObjectInspector[] arg0) throws UDFArgumentException {\r\n\r\n        try {\r\n            c = Class.forName(&quot;com.hive.inherit.DummyUdf&quot;);\r\n            ob = c.getConstructor().newInstance();\r\n            Method method = c.getMethod(&quot;print&quot;,String.class);\r\n            String res = (String) method.invoke(ob,&quot;TEst&quot;);\r\n            System.out.println(&quot;RES: &quot;+res);\r\n\r\n        } catch (NoSuchMethodException | ClassNotFoundException | IllegalAccessException | InvocationTargetException | InstantiationException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        return PrimitiveObjectInspectorFactory.javaStringObjectInspector;\r\n    }\r\n\r\n\r\n    @Override\r\n    public Object evaluate(DeferredObject[] arg0) throws HiveException {\r\n\r\n        if (input == null || arg0.length != 1 || arg0[0].get() == null) {\r\n            return null;\r\n        }\r\n        String forwards = input.getPrimitiveJavaObject(arg0[0].get());\r\n        System.out.println(&quot;forwards:&quot;+forwards);\r\n\r\n        return reverse(forwards);\r\n    }\r\n\r\n\r\n    public  Object reverse(String in) {\r\n        Object res = null ;\r\n        try {\r\n            if (this.c != null &amp;&amp; this.ob != null) {\r\n                Method method = this.c.getMethod(&quot;reverse&quot;, String.class);\r\n                res = (String) method.invoke(this.ob, in);\r\n            }else{\r\n                c = Class.forName(&quot;com.hive.inherit.DummyUdf&quot;);\r\n                ob = c.getConstructor().newInstance();\r\n                Method method = c.getMethod(&quot;reverse&quot;, String.class);\r\n                res = method.invoke(ob, in);\r\n            }\r\n        } catch (NoSuchMethodException | IllegalAccessException | InvocationTargetException | ClassNotFoundException | InstantiationException e) {\r\n            e.printStackTrace();\r\n        }\r\n        return res;\r\n    }\r\n\r\n    @Override\r\n    public String getDisplayString(String[] strings) {\r\n        return null;\r\n    }\r\n}\r\n\r\n```\r\n\r\nBelow is the class that is being called by Reflection.\r\n \r\n&gt; DummyUdf.java\r\n\r\n```\r\npackage com.hive.inherit;\r\n\r\npublic class DummyUdf {\r\n    \r\n\r\n    public DummyUdf(){\r\n        System.out.println(&quot;DummyUdf&quot;);\r\n    }\r\n\r\n    public String print(String str){\r\n        System.out.println(&quot;DummyUdf-str:&quot;+str);\r\n        return str;\r\n    }\r\n\r\n    public String reverse(String in) {\r\n\r\n        int l = in.length();\r\n        StringBuilder sb = new StringBuilder();\r\n\r\n        for (int i = 0; i &lt; l; i++) {\r\n            sb.append(in.charAt(l - i - 1));\r\n        }\r\n        return sb.toString();\r\n    }\r\n}\r\n\r\n```\r\n\r\nThe unit test cases that I&#39;m trying to implement, \r\n\r\n&gt; ReverseStringTest.class\r\n```\r\n\r\n\r\n@RunWith(MockitoJUnitRunner.class)\r\npublic class ReverseStringTest {\r\n\r\n    @Test\r\n    public void testSimpleString() throws HiveException {\r\n\r\n        //ReverseString r = Mockito.spy(new ReverseString());\r\n        ReverseString r = mock(ReverseString.class);\r\n        ObjectInspector input = PrimitiveObjectInspectorFactory.javaStringObjectInspector;\r\n        when(r.init(Mockito.any())).thenReturn(input);\r\n        JavaStringObjectInspector resultInspector = (JavaStringObjectInspector) r.initialize(\r\n                new ObjectInspector[] { input });\r\n        Text forwards = new Text(&quot;hello&quot;);\r\n        when(r.reverse(Mockito.any())).thenReturn(&quot;olleh&quot;);\r\n        Object result = r.evaluate(new GenericUDF.DeferredObject[] { new GenericUDF.DeferredJavaObject(forwards) });\r\n        System.out.println(result);\r\n        assertEquals(&quot;olleh&quot;, resultInspector.getPrimitiveJavaObject(result));\r\n    }\r\n}\r\n```\r\n\r\nThe test case is failing with NullPointerException. \r\n\r\n`java.lang.NullPointerException\r\n\tat com.hive.udf.ReverseStringTest.testSimpleString(ReverseStringTest.java:34)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)`\r\n\r\n\r\nCan someone please suggest on how to mock this appropriately?\r\n\r\nThanks in advance.","title":"Unit Test Cases for Hive Custom UDFs by mocking Java Reflection calls","body":"<p>I have a requirement where I need to develop Hive Custom UDFs that uses Java reflection API to make calls to external classes.</p>\n<p>Since I'm new to Java Reflection, I have dedicated some time learning it and was able to do a basic implementation.</p>\n<p>But I'm facing issues while writing unit test cases for this implementation as I'm facing some challenges in mocking Reflection APIs.</p>\n<p>Below is the example for Hive Custom UDF.</p>\n<blockquote>\n<p>ReverseString.java</p>\n</blockquote>\n<pre><code>\npublic class ReverseString extends GenericUDF {\n\n    private StringObjectInspector input;\n    Class&lt;?&gt; c = null;\n    Object ob = null;\n\n\n    @Override\n    public ObjectInspector initialize(ObjectInspector[] arg0) throws UDFArgumentException {\n\n        // create an ObjectInspector for the input\n        ObjectInspector input = arg0[0];\n\n        // check to make sure the input is a string\n        if (!(input instanceof StringObjectInspector)) {\n            throw new UDFArgumentException(&quot;input must be a string&quot;);\n        }\n\n\n        this.input = (StringObjectInspector) input;\n        System.out.println(&quot;Success. Input formatted correctly&quot;);\n\n        return init(arg0);\n    }\n\n    public ObjectInspector init(ObjectInspector[] arg0) throws UDFArgumentException {\n\n        try {\n            c = Class.forName(&quot;com.hive.inherit.DummyUdf&quot;);\n            ob = c.getConstructor().newInstance();\n            Method method = c.getMethod(&quot;print&quot;,String.class);\n            String res = (String) method.invoke(ob,&quot;TEst&quot;);\n            System.out.println(&quot;RES: &quot;+res);\n\n        } catch (NoSuchMethodException | ClassNotFoundException | IllegalAccessException | InvocationTargetException | InstantiationException e) {\n            e.printStackTrace();\n        }\n\n        return PrimitiveObjectInspectorFactory.javaStringObjectInspector;\n    }\n\n\n    @Override\n    public Object evaluate(DeferredObject[] arg0) throws HiveException {\n\n        if (input == null || arg0.length != 1 || arg0[0].get() == null) {\n            return null;\n        }\n        String forwards = input.getPrimitiveJavaObject(arg0[0].get());\n        System.out.println(&quot;forwards:&quot;+forwards);\n\n        return reverse(forwards);\n    }\n\n\n    public  Object reverse(String in) {\n        Object res = null ;\n        try {\n            if (this.c != null &amp;&amp; this.ob != null) {\n                Method method = this.c.getMethod(&quot;reverse&quot;, String.class);\n                res = (String) method.invoke(this.ob, in);\n            }else{\n                c = Class.forName(&quot;com.hive.inherit.DummyUdf&quot;);\n                ob = c.getConstructor().newInstance();\n                Method method = c.getMethod(&quot;reverse&quot;, String.class);\n                res = method.invoke(ob, in);\n            }\n        } catch (NoSuchMethodException | IllegalAccessException | InvocationTargetException | ClassNotFoundException | InstantiationException e) {\n            e.printStackTrace();\n        }\n        return res;\n    }\n\n    @Override\n    public String getDisplayString(String[] strings) {\n        return null;\n    }\n}\n\n</code></pre>\n<p>Below is the class that is being called by Reflection.</p>\n<blockquote>\n<p>DummyUdf.java</p>\n</blockquote>\n<pre><code>package com.hive.inherit;\n\npublic class DummyUdf {\n    \n\n    public DummyUdf(){\n        System.out.println(&quot;DummyUdf&quot;);\n    }\n\n    public String print(String str){\n        System.out.println(&quot;DummyUdf-str:&quot;+str);\n        return str;\n    }\n\n    public String reverse(String in) {\n\n        int l = in.length();\n        StringBuilder sb = new StringBuilder();\n\n        for (int i = 0; i &lt; l; i++) {\n            sb.append(in.charAt(l - i - 1));\n        }\n        return sb.toString();\n    }\n}\n\n</code></pre>\n<p>The unit test cases that I'm trying to implement,</p>\n<blockquote>\n<p>ReverseStringTest.class</p>\n</blockquote>\n<pre><code>\n\n@RunWith(MockitoJUnitRunner.class)\npublic class ReverseStringTest {\n\n    @Test\n    public void testSimpleString() throws HiveException {\n\n        //ReverseString r = Mockito.spy(new ReverseString());\n        ReverseString r = mock(ReverseString.class);\n        ObjectInspector input = PrimitiveObjectInspectorFactory.javaStringObjectInspector;\n        when(r.init(Mockito.any())).thenReturn(input);\n        JavaStringObjectInspector resultInspector = (JavaStringObjectInspector) r.initialize(\n                new ObjectInspector[] { input });\n        Text forwards = new Text(&quot;hello&quot;);\n        when(r.reverse(Mockito.any())).thenReturn(&quot;olleh&quot;);\n        Object result = r.evaluate(new GenericUDF.DeferredObject[] { new GenericUDF.DeferredJavaObject(forwards) });\n        System.out.println(result);\n        assertEquals(&quot;olleh&quot;, resultInspector.getPrimitiveJavaObject(result));\n    }\n}\n</code></pre>\n<p>The test case is failing with NullPointerException.</p>\n<p><code>java.lang.NullPointerException at com.hive.udf.ReverseStringTest.testSimpleString(ReverseStringTest.java:34) at java.base/java.lang.reflect.Method.invoke(Method.java:566) at java.base/java.util.ArrayList.forEach(ArrayList.java:1541) at java.base/java.util.ArrayList.forEach(ArrayList.java:1541)</code></p>\n<p>Can someone please suggest on how to mock this appropriately?</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","gwt","google-closure-stylesheet","gss"],"answers":[{"tags":[],"owner":{"account_id":1397403,"reputation":12323,"user_id":1326913,"accept_rate":89,"display_name":"ᴇʟᴇvᴀтᴇ"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1477666133,"creation_date":1477666133,"answer_id":40307654,"question_id":40307468,"body_markdown":"I just found the answer by looking at the GWT code. You can&#39;t *include* files, but you can combine several GSS files by specifying them all in the `@Source` annotation. E.g.\r\n\r\n    @Source({&quot;Shared.gss&quot;, &quot;BookEditor.gss&quot;})\r\n\r\nHope this helps someone else with the same question.\r\n\r\n","title":"Removing duplication across Google Stylesheets (GSS) in GWT","body":"<p>I just found the answer by looking at the GWT code. You can't <em>include</em> files, but you can combine several GSS files by specifying them all in the <code>@Source</code> annotation. E.g.</p>\n\n<pre><code>@Source({\"Shared.gss\", \"BookEditor.gss\"})\n</code></pre>\n\n<p>Hope this helps someone else with the same question.</p>\n"},{"tags":[],"owner":{"account_id":105828,"reputation":2460,"user_id":282176,"accept_rate":94,"display_name":"Boris Brudnoy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694185995,"creation_date":1694185995,"answer_id":77068044,"question_id":40307468,"body_markdown":"To add to the accepted answer, UiBinder templates will likewise allow you to combine GSS files via a comma-separated list, e.g.: \r\n\r\n      &lt;ui:style type=&quot;com.myapp.client.views.EditorView.Style&quot;\r\n            src=&quot;EditorView.gss, ViewCommon.gss&quot;/&gt;\r\n\r\nAs a result, you&#39;ll be able to use definitions from `ViewCommon.gss` inside `EditorView.gss`.","title":"Removing duplication across Google Stylesheets (GSS) in GWT","body":"<p>To add to the accepted answer, UiBinder templates will likewise allow you to combine GSS files via a comma-separated list, e.g.:</p>\n<pre><code>  &lt;ui:style type=&quot;com.myapp.client.views.EditorView.Style&quot;\n        src=&quot;EditorView.gss, ViewCommon.gss&quot;/&gt;\n</code></pre>\n<p>As a result, you'll be able to use definitions from <code>ViewCommon.gss</code> inside <code>EditorView.gss</code>.</p>\n"}],"owner":{"account_id":1397403,"reputation":12323,"user_id":1326913,"accept_rate":89,"display_name":"ᴇʟᴇvᴀтᴇ"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":40307654,"answer_count":2,"score":1,"last_activity_date":1694185995,"creation_date":1477665421,"question_id":40307468,"body_markdown":"Most of my stylesheets (GSS) have the same set of `@defmixin` statements. I would like to be able to remove the duplication.\r\n\r\nIs it possible to `@include` a common GSS stylesheet in some way?\r\nOr are there other ways to do this simply? (I mean without having any external scripting to munge the files.) I&#39;m using GSS from a GWT 2.8 app, by the way.\r\n\r\nI found a [related question](https://stackoverflow.com/questions/8209820/how-to-import-include-in-closure-stylesheet) but the answers aren&#39;t really appropriate for using GSS within GWT.","title":"Removing duplication across Google Stylesheets (GSS) in GWT","body":"<p>Most of my stylesheets (GSS) have the same set of <code>@defmixin</code> statements. I would like to be able to remove the duplication.</p>\n\n<p>Is it possible to <code>@include</code> a common GSS stylesheet in some way?\nOr are there other ways to do this simply? (I mean without having any external scripting to munge the files.) I'm using GSS from a GWT 2.8 app, by the way.</p>\n\n<p>I found a <a href=\"https://stackoverflow.com/questions/8209820/how-to-import-include-in-closure-stylesheet\">related question</a> but the answers aren't really appropriate for using GSS within GWT.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":5,"creation_date":1694182949,"post_id":77067683,"comment_id":135862027,"body_markdown":"You could use a test like `isRegularFile`, but it&#39;d be much more efficient to use a `WatchService`","body":"You could use a test like <code>isRegularFile</code>, but it&#39;d be much more efficient to use a <code>WatchService</code>"},{"owner":{"account_id":11430922,"reputation":325,"user_id":8379653,"accept_rate":100,"display_name":"gomathi subramanian"},"score":0,"creation_date":1694183165,"post_id":77067683,"comment_id":135862064,"body_markdown":"How to do that?","body":"How to do that?"},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":2,"creation_date":1694183242,"post_id":77067683,"comment_id":135862084,"body_markdown":"use a `WatchService`, see its [documentation](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/nio/file/WatchService.html): &quot;... For example a file manager may use a watch service to monitor a directory for changes so that it can update its display of the list of files when files are created or deleted. ...&quot;","body":"use a <code>WatchService</code>, see its <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/nio/file/WatchService.html\" rel=\"nofollow noreferrer\">documentation</a>: &quot;... For example a file manager may use a watch service to monitor a directory for changes so that it can update its display of the list of files when files are created or deleted. ...&quot;"},{"owner":{"account_id":11430922,"reputation":325,"user_id":8379653,"accept_rate":100,"display_name":"gomathi subramanian"},"score":0,"creation_date":1694183791,"post_id":77067683,"comment_id":135862181,"body_markdown":"Will watchservice helps me to execute the test cases even when the file is not changed.","body":"Will watchservice helps me to execute the test cases even when the file is not changed."},{"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1694186562,"post_id":77067683,"comment_id":135862733,"body_markdown":"The question isn&#39;t very clear as the answer you added (scan files in a dir) doesn&#39;t seem to match what you asked for (wait until files added to a dir). Anyway it looks like you have resolved your issue.","body":"The question isn&#39;t very clear as the answer you added (scan files in a dir) doesn&#39;t seem to match what you asked for (wait until files added to a dir). Anyway it looks like you have resolved your issue."}],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1694225940,"post_id":77067799,"comment_id":135867474,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/77067799/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":29395860,"reputation":26,"user_id":22523219,"display_name":"ᄆᄂᄋᄅᄆᄂᄋᆱᄂᄋᄅ"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694183822,"creation_date":1694183822,"answer_id":77067799,"question_id":77067683,"body_markdown":"InputJsonInputJson -&gt; InputJson/InputJson \r\n\r\n    import java.io.File;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    public class main {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tList&lt;String&gt; fileLst = new ArrayList&lt;String&gt; ();\r\n    \t\t\r\n    \t\tscanDir(&quot;c:/cleardir&quot;, fileLst);\r\n    \t\t\r\n    \t\tfor(String fullPath : fileLst) {\r\n    \t\t\tSystem.out.println(fullPath);\r\n    \t\t}\t\t\r\n    \t}\t\r\n    \t\r\n    \t\r\n    \tpublic static void scanDir(String folderPath, List&lt;String&gt; fileLst) {\r\n    \t\tFile[] files = new File(folderPath).listFiles();\r\n    \t\t\r\n    \t\tfor(File f : files) {\r\n    \t\t\tif(f.isDirectory()) {\r\n    \t\t\t\tscanDir(f.getAbsolutePath(), fileLst);\r\n    \t\t\t} else {\r\n    \t\t\t\tfileLst.add(f.getAbsolutePath());\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n ","title":"How to run java while loop until file exists in a particular directory?","body":"<p>InputJsonInputJson -&gt; InputJson/InputJson</p>\n<pre><code>import java.io.File;\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class main {\n    public static void main(String[] args) {\n        List&lt;String&gt; fileLst = new ArrayList&lt;String&gt; ();\n        \n        scanDir(&quot;c:/cleardir&quot;, fileLst);\n        \n        for(String fullPath : fileLst) {\n            System.out.println(fullPath);\n        }       \n    }   \n    \n    \n    public static void scanDir(String folderPath, List&lt;String&gt; fileLst) {\n        File[] files = new File(folderPath).listFiles();\n        \n        for(File f : files) {\n            if(f.isDirectory()) {\n                scanDir(f.getAbsolutePath(), fileLst);\n            } else {\n                fileLst.add(f.getAbsolutePath());\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11430922,"reputation":325,"user_id":8379653,"accept_rate":100,"display_name":"gomathi subramanian"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694185986,"creation_date":1694185986,"answer_id":77068042,"question_id":77067683,"body_markdown":"Based on the answer provided by @ ᄆᄂᄋᄅᄆᄂᄋᆱᄂᄋᄅ. \r\nI&#39;ve re-written as shown below:\r\n\r\n```\r\nPath filepath = Paths.get(&quot;/Resources/RawImages/&quot;\r\n                + &quot;mediaResponses/InputJson/&quot;);\r\n        File[] filePath = new File(&quot;/Resources/RawImages/&quot;\r\n                + &quot;mediaResponses/InputJson/&quot;).listFiles();\r\n        assert filePath != null;\r\n        for (File eachFile: filePath){\r\n            if(eachFile.isFile()){\r\n                String fileName = eachFile.getName();\r\n                imageEncoder(filepath +&quot;/&quot; +fileName);\r\n```","title":"How to run java while loop until file exists in a particular directory?","body":"<p>Based on the answer provided by @ ᄆᄂᄋᄅᄆᄂᄋᆱᄂᄋᄅ.\nI've re-written as shown below:</p>\n<pre><code>Path filepath = Paths.get(&quot;/Resources/RawImages/&quot;\n                + &quot;mediaResponses/InputJson/&quot;);\n        File[] filePath = new File(&quot;/Resources/RawImages/&quot;\n                + &quot;mediaResponses/InputJson/&quot;).listFiles();\n        assert filePath != null;\n        for (File eachFile: filePath){\n            if(eachFile.isFile()){\n                String fileName = eachFile.getName();\n                imageEncoder(filepath +&quot;/&quot; +fileName);\n</code></pre>\n"}],"owner":{"account_id":11430922,"reputation":325,"user_id":8379653,"accept_rate":100,"display_name":"gomathi subramanian"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":77067799,"answer_count":2,"score":-2,"last_activity_date":1694185986,"creation_date":1694182833,"question_id":77067683,"body_markdown":"I would like to run the while loop until the file is available in a particular directory.\r\n\r\n```\r\nPath path = Paths.get(&quot;/MediaIntegTests/src&quot;\r\n                + &quot;/mediaServiceTests&quot;\r\n                + &quot;/Resources/RawImages/&quot;\r\n                + &quot;mediaResponses/InputJson/&quot;);\r\n        while (path.iterator().hasNext()){\r\n            String fileName = String.valueOf(path.getFileName());\r\n            imageEncoder(path+ fileName);\r\n```\r\n\r\n**Error:**\r\n\r\n```\r\nException in thread &quot;main&quot; java.io.FileNotFoundException: /Users/gomathis/Documents/res/Media/mediaIntegTests/src/mediaServiceTests/Resources/RawImages/mediaPVResponses/InputJsonInputJson (No such file or directory)\r\n\tat java.base/java.io.FileInputStream.open0(Native Method)\r\n\tat java.base/java.io.FileInputStream.open(FileInputStream.java:216)\r\n\tat java.base/java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:157)\r\n\tat java.base/java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:111)\r\n\tat java.base/java.io.FileReader.&lt;init&gt;(FileReader.java:103)\r\n\tat com.example.mediaservice.TestUtils.CommonTestUtils.imageEncoder(CommonTestUtils.java:80)\r\n\tat com.example.mediaservice.TestUtils.CommonTestUtils.main(CommonTestUtils.java:46)\r\n```","title":"How to run java while loop until file exists in a particular directory?","body":"<p>I would like to run the while loop until the file is available in a particular directory.</p>\n<pre><code>Path path = Paths.get(&quot;/MediaIntegTests/src&quot;\n                + &quot;/mediaServiceTests&quot;\n                + &quot;/Resources/RawImages/&quot;\n                + &quot;mediaResponses/InputJson/&quot;);\n        while (path.iterator().hasNext()){\n            String fileName = String.valueOf(path.getFileName());\n            imageEncoder(path+ fileName);\n</code></pre>\n<p><strong>Error:</strong></p>\n<pre><code>Exception in thread &quot;main&quot; java.io.FileNotFoundException: /Users/gomathis/Documents/res/Media/mediaIntegTests/src/mediaServiceTests/Resources/RawImages/mediaPVResponses/InputJsonInputJson (No such file or directory)\n    at java.base/java.io.FileInputStream.open0(Native Method)\n    at java.base/java.io.FileInputStream.open(FileInputStream.java:216)\n    at java.base/java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:157)\n    at java.base/java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:111)\n    at java.base/java.io.FileReader.&lt;init&gt;(FileReader.java:103)\n    at com.example.mediaservice.TestUtils.CommonTestUtils.imageEncoder(CommonTestUtils.java:80)\n    at com.example.mediaservice.TestUtils.CommonTestUtils.main(CommonTestUtils.java:46)\n</code></pre>\n"},{"tags":["java","mysql","hibernate","spring-boot"],"comments":[{"owner":{"account_id":13798611,"reputation":37885,"user_id":9959152,"display_name":"Ryuzaki L"},"score":1,"creation_date":1549207743,"post_id":54504230,"comment_id":95812582,"body_markdown":"have you tried by deleting all tables?","body":"have you tried by deleting all tables?"},{"owner":{"account_id":9740564,"reputation":654,"user_id":7222312,"display_name":"FilipW"},"score":0,"creation_date":1549207952,"post_id":54504230,"comment_id":95812665,"body_markdown":"@Deadpool yes, and I steel have this problem","body":"@Deadpool yes, and I steel have this problem"},{"owner":{"account_id":3756387,"reputation":802,"user_id":3122668,"display_name":"capo11"},"score":0,"creation_date":1695638076,"post_id":54504230,"comment_id":136046482,"body_markdown":"Another possible solution could be this: https://stackoverflow.com/a/77171900/3122668","body":"Another possible solution could be this: <a href=\"https://stackoverflow.com/a/77171900/3122668\">stackoverflow.com/a/77171900/3122668</a>"}],"answers":[{"comments":[{"owner":{"account_id":5351528,"reputation":870,"user_id":4265546,"display_name":"raksheetbhat"},"score":6,"creation_date":1593437974,"post_id":54514003,"comment_id":110773341,"body_markdown":"Changed from create-drop to create and it worked for me.","body":"Changed from create-drop to create and it worked for me."},{"owner":{"account_id":5351528,"reputation":870,"user_id":4265546,"display_name":"raksheetbhat"},"score":0,"creation_date":1593438012,"post_id":54514003,"comment_id":110773362,"body_markdown":"for more info on ddl-auto, I found this answer helpful: https://stackoverflow.com/a/1689769/4265546","body":"for more info on ddl-auto, I found this answer helpful: <a href=\"https://stackoverflow.com/a/1689769/4265546\">stackoverflow.com/a/1689769/4265546</a>"},{"owner":{"account_id":10579735,"reputation":1203,"user_id":7794032,"accept_rate":50,"display_name":"Asma Rahim Ali Jafri"},"score":0,"creation_date":1604387641,"post_id":54514003,"comment_id":114324931,"body_markdown":"hey, can you please explain how this worked for such an exception?","body":"hey, can you please explain how this worked for such an exception?"},{"owner":{"account_id":1756296,"reputation":6329,"user_id":1604261,"accept_rate":56,"display_name":"Jos&#233; Cabo"},"score":0,"creation_date":1669489349,"post_id":54514003,"comment_id":131653852,"body_markdown":"Hibernate is playing. Solution: temporary set the field `spring.jpa.hibernate.ddl-auto=update`, reload the app so hibernates updates the DB, and then set it back to `create-drop`.","body":"Hibernate is playing. Solution: temporary set the field <code>spring.jpa.hibernate.ddl-auto=update</code>, reload the app so hibernates updates the DB, and then set it back to <code>create-drop</code>."}],"tags":[],"owner":{"account_id":6287334,"reputation":1009,"user_id":4886060,"display_name":"Vivek Patel"},"comment_count":4,"down_vote_count":1,"up_vote_count":91,"is_accepted":false,"score":90,"last_activity_date":1549275416,"creation_date":1549275416,"answer_id":54514003,"question_id":54504230,"body_markdown":"Change **spring.jpa.hibernate.ddl-auto = create-drop** to **update**. It is dropping the database at start so wont find the required events table to alter anything.","title":"How to fix &quot;Error executing DDL &quot;alter table events drop foreign key FKg0mkvgsqn8584qoql6a2rxheq&quot; via JDBC Statement&quot;","body":"<p>Change <strong>spring.jpa.hibernate.ddl-auto = create-drop</strong> to <strong>update</strong>. It is dropping the database at start so wont find the required events table to alter anything.</p>\n"},{"comments":[{"owner":{"account_id":9829281,"reputation":91,"user_id":7281487,"display_name":"Come.T"},"score":2,"creation_date":1603353759,"post_id":56206827,"comment_id":114011941,"body_markdown":"Had the same issue - that fixed it perfectly thanks!","body":"Had the same issue - that fixed it perfectly thanks!"},{"owner":{"account_id":11117369,"reputation":1482,"user_id":8161309,"display_name":"Amir"},"score":2,"creation_date":1617459312,"post_id":56206827,"comment_id":118311886,"body_markdown":"Thanks! that did solve my issue as well.  Oh the trouble of trying to interpret what the ORM wants to do.  Things always seem to be &quot;lost in translation&quot;","body":"Thanks! that did solve my issue as well.  Oh the trouble of trying to interpret what the ORM wants to do.  Things always seem to be &quot;lost in translation&quot;"},{"owner":{"account_id":9499339,"reputation":127,"user_id":7061105,"display_name":"Akito"},"score":0,"creation_date":1623603752,"post_id":56206827,"comment_id":120120601,"body_markdown":"Is this annotation coming from `Hibernate` or from `Javax.Persistence`? I assume `Javax.Persistence`, as all others come from there, as well.","body":"Is this annotation coming from <code>Hibernate</code> or from <code>Javax.Persistence</code>? I assume <code>Javax.Persistence</code>, as all others come from there, as well."},{"owner":{"account_id":7921521,"reputation":989,"user_id":5982359,"display_name":"Juan Diego Lozano"},"score":0,"creation_date":1668708361,"post_id":56206827,"comment_id":131477731,"body_markdown":"Had the same problem using MariaDB, fixed with this too","body":"Had the same problem using MariaDB, fixed with this too"}],"tags":[],"owner":{"account_id":9768602,"reputation":1048,"user_id":7241283,"display_name":"SupaMario"},"comment_count":4,"down_vote_count":0,"up_vote_count":70,"is_accepted":true,"score":70,"last_activity_date":1694182396,"creation_date":1558260995,"answer_id":56206827,"question_id":54504230,"body_markdown":"In my case the problem why I got this exception was that some tables had names which are reserved for PostgreSQL. For example, &quot;Like&quot; or &quot;User&quot;. Changed name with:\r\n\r\n    @Table(name=&quot;likes&quot;)\r\n\r\nand it worked fine.\r\n\r\n","title":"How to fix &quot;Error executing DDL &quot;alter table events drop foreign key FKg0mkvgsqn8584qoql6a2rxheq&quot; via JDBC Statement&quot;","body":"<p>In my case the problem why I got this exception was that some tables had names which are reserved for PostgreSQL. For example, &quot;Like&quot; or &quot;User&quot;. Changed name with:</p>\n<pre><code>@Table(name=&quot;likes&quot;)\n</code></pre>\n<p>and it worked fine.</p>\n"},{"tags":[],"owner":{"account_id":3619499,"reputation":5613,"user_id":3018627,"display_name":"Subarata Talukder"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1569036561,"creation_date":1569036561,"answer_id":58037047,"question_id":54504230,"body_markdown":"Hmm I also encountered this issue but either of those solutions could not solve my issue. I am using MySQL database packaging with XAMPP. What I tried out to solve but failed\r\n\r\n - I deleted my Database located in &quot;xampp\\mysql\\data&quot;\r\n - I renamed my conflicted tables\r\n - Although I kept this &quot;spring.jpa.hibernate.ddl-auto=update&quot; setting in at start.\r\n\r\nSo what I did to solve this issue. Might be yours\r\n\r\n - I completely uninstalled the XAMPP package and Installed it again.\r\n - I created new database name\r\n - RUN the application\r\n\r\nFriends it actually my circumstances, might be help your issue like me. If you have any question please post comment. Thanks","title":"How to fix &quot;Error executing DDL &quot;alter table events drop foreign key FKg0mkvgsqn8584qoql6a2rxheq&quot; via JDBC Statement&quot;","body":"<p>Hmm I also encountered this issue but either of those solutions could not solve my issue. I am using MySQL database packaging with XAMPP. What I tried out to solve but failed</p>\n\n<ul>\n<li>I deleted my Database located in \"xampp\\mysql\\data\"</li>\n<li>I renamed my conflicted tables</li>\n<li>Although I kept this \"spring.jpa.hibernate.ddl-auto=update\" setting in at start.</li>\n</ul>\n\n<p>So what I did to solve this issue. Might be yours</p>\n\n<ul>\n<li>I completely uninstalled the XAMPP package and Installed it again.</li>\n<li>I created new database name</li>\n<li>RUN the application</li>\n</ul>\n\n<p>Friends it actually my circumstances, might be help your issue like me. If you have any question please post comment. Thanks</p>\n"},{"tags":[],"owner":{"account_id":17531673,"reputation":11,"user_id":12715559,"display_name":"Akash Aggarwal"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1579068781,"creation_date":1579068781,"answer_id":59745964,"question_id":54504230,"body_markdown":"Change The dialect of hibernate.cfg.xml Dialect :- org.hibernate.dialect.MySQL5InnoDBDialect\r\nOR\r\norg.hibernate.dialect.MySQL55Dialect\r\nOR\r\norg.hibernate.dialect.MySQL55InnoDBDialect\r\nOR\r\norg.hibernate.dialect.MySQL57InnoDBDialect\r\n","title":"How to fix &quot;Error executing DDL &quot;alter table events drop foreign key FKg0mkvgsqn8584qoql6a2rxheq&quot; via JDBC Statement&quot;","body":"<p>Change The dialect of hibernate.cfg.xml Dialect :- org.hibernate.dialect.MySQL5InnoDBDialect\nOR\norg.hibernate.dialect.MySQL55Dialect\nOR\norg.hibernate.dialect.MySQL55InnoDBDialect\nOR\norg.hibernate.dialect.MySQL57InnoDBDialect</p>\n"},{"comments":[{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1694182513,"post_id":60508761,"comment_id":135861925,"body_markdown":"It seems to be poorly formatted.","body":"It seems to be poorly formatted."}],"tags":[],"owner":{"account_id":15749106,"reputation":483,"user_id":11364231,"display_name":"Simas Paškauskas"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1694182480,"creation_date":1583243585,"answer_id":60508761,"question_id":54504230,"body_markdown":"OK, I had the same issue. Adding prefixes fixed the problem for me:\r\n\r\nFrom:\r\n\r\n    `\r\n    @Entity\r\n    @Table(name = &quot;result_man&quot;)\r\n    @Proxy(lazy = false)\r\n    public class ResultManEntity {\r\n    @Id\r\n    @GeneratedValue\r\n    @Column(name = &quot;id&quot;, unique = true, length = 128)\r\n    private long id;\r\n    private String key;\r\n    private int score;\r\n    private int index;\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;result_id&quot;)\r\n    private ResultEntity result;\r\n    }`\r\n\r\nto:\r\n\r\n    `@Entity\r\n    @Table(name = &quot;result_man&quot;)\r\n    @Proxy(lazy = false)\r\n    public class ResultManEntity {\r\n    @Id\r\n    @GeneratedValue\r\n    @Column(name = &quot;id&quot;, unique = true, length = 128)\r\n    private long id;\r\n    private String _key;\r\n    private int _score;\r\n    private int _index;\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;result_id&quot;)\r\n    private ResultEntity result;`\r\n\r\n","title":"How to fix &quot;Error executing DDL &quot;alter table events drop foreign key FKg0mkvgsqn8584qoql6a2rxheq&quot; via JDBC Statement&quot;","body":"<p>OK, I had the same issue. Adding prefixes fixed the problem for me:</p>\n<p>From:</p>\n<pre><code>`\n@Entity\n@Table(name = &quot;result_man&quot;)\n@Proxy(lazy = false)\npublic class ResultManEntity {\n@Id\n@GeneratedValue\n@Column(name = &quot;id&quot;, unique = true, length = 128)\nprivate long id;\nprivate String key;\nprivate int score;\nprivate int index;\n@ManyToOne(fetch = FetchType.LAZY)\n@JoinColumn(name = &quot;result_id&quot;)\nprivate ResultEntity result;\n}`\n</code></pre>\n<p>to:</p>\n<pre><code>`@Entity\n@Table(name = &quot;result_man&quot;)\n@Proxy(lazy = false)\npublic class ResultManEntity {\n@Id\n@GeneratedValue\n@Column(name = &quot;id&quot;, unique = true, length = 128)\nprivate long id;\nprivate String _key;\nprivate int _score;\nprivate int _index;\n@ManyToOne(fetch = FetchType.LAZY)\n@JoinColumn(name = &quot;result_id&quot;)\nprivate ResultEntity result;`\n</code></pre>\n"},{"tags":[],"owner":{"account_id":543631,"reputation":10094,"user_id":912829,"accept_rate":53,"display_name":"ACV"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1587248450,"creation_date":1587248450,"answer_id":61297052,"question_id":54504230,"body_markdown":"Just specify the dialect in your `application.properties`. For example, for MySQL 8:\r\n\r\n```\r\nhibernate.dialect=org.hibernate.dialect.MySQL8Dialect\r\n```","title":"How to fix &quot;Error executing DDL &quot;alter table events drop foreign key FKg0mkvgsqn8584qoql6a2rxheq&quot; via JDBC Statement&quot;","body":"<p>Just specify the dialect in your <code>application.properties</code>. For example, for MySQL 8:</p>\n\n<pre><code>hibernate.dialect=org.hibernate.dialect.MySQL8Dialect\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18531203,"reputation":1,"user_id":13501941,"display_name":"Janakiram Sampalli"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694182647,"creation_date":1595130729,"answer_id":62976072,"question_id":54504230,"body_markdown":"I ran into a similar issue and found [SupaMario&#39;s answer][1] here.\r\n\r\nIn my case, I had a table named `orders`, but MySQL threw the error as it seems to be a reserve table / keyword.\r\n\r\nI changed it to `customer_order`, and it all worked fine.\r\n\r\n  [1]: https://stackoverflow.com/questions/54504230/how-to-fix-error-executing-ddl-alter-table-events-drop-foreign-key-fkg0mkvgsqn/56206827#56206827\r\n\r\n\r\n","title":"How to fix &quot;Error executing DDL &quot;alter table events drop foreign key FKg0mkvgsqn8584qoql6a2rxheq&quot; via JDBC Statement&quot;","body":"<p>I ran into a similar issue and found <a href=\"https://stackoverflow.com/questions/54504230/how-to-fix-error-executing-ddl-alter-table-events-drop-foreign-key-fkg0mkvgsqn/56206827#56206827\">SupaMario's answer</a> here.</p>\n<p>In my case, I had a table named <code>orders</code>, but MySQL threw the error as it seems to be a reserve table / keyword.</p>\n<p>I changed it to <code>customer_order</code>, and it all worked fine.</p>\n"},{"comments":[{"owner":{"account_id":12315202,"reputation":198,"user_id":8985718,"display_name":"Sayed Hussainullah Sadat"},"score":0,"creation_date":1681710950,"post_id":64690531,"comment_id":134094484,"body_markdown":"@JoinColumn(name = &quot;from&quot;)\n        private Employee from; \n\nI had the same problem, &quot;form&quot; was a reserved keyword, after modifying  to @JoinColumn(name = &quot;cr_from&quot;) it worked fine.","body":"@JoinColumn(name = &quot;from&quot;)         private Employee from;   I had the same problem, &quot;form&quot; was a reserved keyword, after modifying  to @JoinColumn(name = &quot;cr_from&quot;) it worked fine."}],"tags":[],"owner":{"account_id":19464444,"reputation":247,"user_id":14238010,"display_name":"kyle_aoki"},"comment_count":1,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1694182699,"creation_date":1604544647,"answer_id":64690531,"question_id":54504230,"body_markdown":"It seems that it is an error related to *reserved* PostgreSQL words. Similar to [SupaMario&#39;s answer][1], the error went away after changing one of my column names from \r\n\r\n    @Column(name = &quot;name&quot;, nullable = false)\r\n\r\nto\r\n\r\n    @Column(name = &quot;employee_name&quot;, nullable = false)\r\n\r\n  [1]: https://stackoverflow.com/questions/54504230/how-to-fix-error-executing-ddl-alter-table-events-drop-foreign-key-fkg0mkvgsqn/56206827#56206827\r\n","title":"How to fix &quot;Error executing DDL &quot;alter table events drop foreign key FKg0mkvgsqn8584qoql6a2rxheq&quot; via JDBC Statement&quot;","body":"<p>It seems that it is an error related to <em>reserved</em> PostgreSQL words. Similar to <a href=\"https://stackoverflow.com/questions/54504230/how-to-fix-error-executing-ddl-alter-table-events-drop-foreign-key-fkg0mkvgsqn/56206827#56206827\">SupaMario's answer</a>, the error went away after changing one of my column names from</p>\n<pre><code>@Column(name = &quot;name&quot;, nullable = false)\n</code></pre>\n<p>to</p>\n<pre><code>@Column(name = &quot;employee_name&quot;, nullable = false)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2542636,"reputation":976,"user_id":2208129,"display_name":"Setmax"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694182766,"creation_date":1605569991,"answer_id":64867293,"question_id":54504230,"body_markdown":"If you see this problem, please double check your class properties for reserved keywords like *key* (in my case).\r\n\r\nI changed the key to *mkey* and everything went fine.","title":"How to fix &quot;Error executing DDL &quot;alter table events drop foreign key FKg0mkvgsqn8584qoql6a2rxheq&quot; via JDBC Statement&quot;","body":"<p>If you see this problem, please double check your class properties for reserved keywords like <em>key</em> (in my case).</p>\n<p>I changed the key to <em>mkey</em> and everything went fine.</p>\n"},{"tags":[],"owner":{"account_id":18575278,"reputation":1,"user_id":13536133,"display_name":"Willy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694182817,"creation_date":1620043123,"answer_id":67368539,"question_id":54504230,"body_markdown":"For anyone working with PostgreSQL and has the same problem even though your table names are not keywords, place the line below in your *application.properties*. It worked for me.\r\n\r\n    spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true\r\n\r\n\r\n\r\n","title":"How to fix &quot;Error executing DDL &quot;alter table events drop foreign key FKg0mkvgsqn8584qoql6a2rxheq&quot; via JDBC Statement&quot;","body":"<p>For anyone working with PostgreSQL and has the same problem even though your table names are not keywords, place the line below in your <em>application.properties</em>. It worked for me.</p>\n<pre><code>spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13065157,"reputation":1,"user_id":9440801,"display_name":"Maurice Omosh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694182860,"creation_date":1624536528,"answer_id":68115504,"question_id":54504230,"body_markdown":"In my case I had the error when I did this in a specific entity property:\r\n\r\n    @Column(name =&quot;condition&quot;, nullable = false)\r\n\r\nI changed this to\r\n\r\n    @Column(name =&quot;condition_of_house&quot;, nullable = false)\r\n\r\nAnd it worked well.\r\n","title":"How to fix &quot;Error executing DDL &quot;alter table events drop foreign key FKg0mkvgsqn8584qoql6a2rxheq&quot; via JDBC Statement&quot;","body":"<p>In my case I had the error when I did this in a specific entity property:</p>\n<pre><code>@Column(name =&quot;condition&quot;, nullable = false)\n</code></pre>\n<p>I changed this to</p>\n<pre><code>@Column(name =&quot;condition_of_house&quot;, nullable = false)\n</code></pre>\n<p>And it worked well.</p>\n"},{"tags":[],"owner":{"account_id":3681018,"reputation":9,"user_id":3065981,"display_name":"Burak &#199;ağrı Aktaş"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694182963,"creation_date":1624563965,"answer_id":68121956,"question_id":54504230,"body_markdown":"In my case, the error occurred because the *mysql* user did not have the REFERENCES privilege.\r\n\r\nTo solve this;\r\n\r\n 1. Log into MySQL with the root user\r\n 2. Grant all privileges for &#39;your_user&#39;@&#39;localhost&#39;\r\n\r\nor you just need to grant REFERENCES privileges to &#39;your_user&#39;@&#39;localhost&#39;\r\n\r\nSee the documentation: *[13.7.1.6 GRANT Statement][1]* \r\n\r\n  [1]: https://dev.mysql.com/doc/refman/8.0/en/grant.html\r\n","title":"How to fix &quot;Error executing DDL &quot;alter table events drop foreign key FKg0mkvgsqn8584qoql6a2rxheq&quot; via JDBC Statement&quot;","body":"<p>In my case, the error occurred because the <em>mysql</em> user did not have the REFERENCES privilege.</p>\n<p>To solve this;</p>\n<ol>\n<li>Log into MySQL with the root user</li>\n<li>Grant all privileges for 'your_user'@'localhost'</li>\n</ol>\n<p>or you just need to grant REFERENCES privileges to 'your_user'@'localhost'</p>\n<p>See the documentation: <em><a href=\"https://dev.mysql.com/doc/refman/8.0/en/grant.html\" rel=\"nofollow noreferrer\">13.7.1.6 GRANT Statement</a></em></p>\n"},{"tags":[],"owner":{"account_id":20828270,"reputation":103,"user_id":15298206,"display_name":"Никита Мельников"},"comment_count":0,"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1694182997,"creation_date":1625477789,"answer_id":68253818,"question_id":54504230,"body_markdown":"In my case, deleting tables from the database helped.\r\nBut, attention, this was a ***training*** project :)*\r\n","title":"How to fix &quot;Error executing DDL &quot;alter table events drop foreign key FKg0mkvgsqn8584qoql6a2rxheq&quot; via JDBC Statement&quot;","body":"<p>In my case, deleting tables from the database helped.\nBut, attention, this was a <em><strong>training</strong></em> project :)*</p>\n"},{"comments":[{"owner":{"account_id":20564660,"reputation":123,"user_id":15100531,"display_name":"AkuLink1"},"score":0,"creation_date":1664454241,"post_id":69891397,"comment_id":130478556,"body_markdown":"Same for me in PostgreSQL with table name @Table(name = &quot;user&quot;)","body":"Same for me in PostgreSQL with table name @Table(name = &quot;user&quot;)"}],"tags":[],"owner":{"account_id":17980838,"reputation":91,"user_id":13067232,"display_name":"davidrichardo"},"comment_count":1,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1694183100,"creation_date":1636416853,"answer_id":69891397,"question_id":54504230,"body_markdown":"In my case, the problem why I got this exception was that some tables had names which were reserved for MySQL. For example, &quot;order&quot; *changed* name with:\r\n\r\n    @Column(name=&quot;orders&quot;)\r\n\r\nor\r\n\r\nFor example\r\n\r\n    @ManyToOne(cascade = {CascadeType.ALL})\r\n    @JoinColumn(name = &quot;fk_order&quot;,nullable = false)\r\n    private Order order;\r\n\r\nworked for me.\r\n\r\n\r\n\r\n","title":"How to fix &quot;Error executing DDL &quot;alter table events drop foreign key FKg0mkvgsqn8584qoql6a2rxheq&quot; via JDBC Statement&quot;","body":"<p>In my case, the problem why I got this exception was that some tables had names which were reserved for MySQL. For example, &quot;order&quot; <em>changed</em> name with:</p>\n<pre><code>@Column(name=&quot;orders&quot;)\n</code></pre>\n<p>or</p>\n<p>For example</p>\n<pre><code>@ManyToOne(cascade = {CascadeType.ALL})\n@JoinColumn(name = &quot;fk_order&quot;,nullable = false)\nprivate Order order;\n</code></pre>\n<p>worked for me.</p>\n"},{"comments":[{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1694183300,"post_id":69963726,"comment_id":135862091,"body_markdown":"This is close to incomprehensible. Can you [fix it](https://stackoverflow.com/posts/69963726/edit)? But *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***[without](https://meta.stackexchange.com/a/131011)*** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** &quot;Edit:&quot;, &quot;Update:&quot;, or similar - the answer should appear as if it was written today.","body":"This is close to incomprehensible. Can you <a href=\"https://stackoverflow.com/posts/69963726/edit\">fix it</a>? But *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** <b><i><a href=\"https://meta.stackexchange.com/a/131011\">without</a></i></b> *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** &quot;Edit:&quot;, &quot;Update:&quot;, or similar - the answer should appear as if it was written today."}],"tags":[],"owner":{"account_id":18284952,"reputation":21,"user_id":13313069,"display_name":"Maryam Maleki"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694183240,"creation_date":1636898131,"answer_id":69963726,"question_id":54504230,"body_markdown":"Change Line code in properties file:\r\n\r\nFrom:\r\n\r\n`spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL55Dialect`\r\n\r\nTo:\r\n\r\n`spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL5InnoDBDialect`\r\n\r\nBecause the `MySQL55Dialect` is not creating a [foreign key][1]. And the `MySQL5InnoDBDialect` is creating a foreign key.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Foreign_key\r\n\r\n\r\n","title":"How to fix &quot;Error executing DDL &quot;alter table events drop foreign key FKg0mkvgsqn8584qoql6a2rxheq&quot; via JDBC Statement&quot;","body":"<p>Change Line code in properties file:</p>\n<p>From:</p>\n<p><code>spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL55Dialect</code></p>\n<p>To:</p>\n<p><code>spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL5InnoDBDialect</code></p>\n<p>Because the <code>MySQL55Dialect</code> is not creating a <a href=\"https://en.wikipedia.org/wiki/Foreign_key\" rel=\"nofollow noreferrer\">foreign key</a>. And the <code>MySQL5InnoDBDialect</code> is creating a foreign key.</p>\n"},{"tags":[],"owner":{"account_id":23673321,"reputation":31,"user_id":17699818,"display_name":"TRO"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1639731308,"creation_date":1639731308,"answer_id":70390589,"question_id":54504230,"body_markdown":"Owner is a reserved word for MySQL. Either change it or use annotation to use some different name for forgeinkey instead of default\r\n\r\nReference:\r\nhttps://dev.mysql.com/doc/refman/8.0/en/keywords.html#keywords-8-0-detailed-O\r\n\r\nForcing  JPA to use custom name \r\n\r\n    @ManyToOne\r\n\t@MapsId(&quot;ownerId&quot;)\r\n\t@JoinColumn(\r\n\t\t\tname = &quot;owner_id&quot;,\r\n\t\t\tforeignKey = @ForeignKey(\r\n\t\t\t\t\tname = &quot;fkey_own_id&quot;\r\n\t\t\t\t\t)\r\n\t\t\t) \r\n\r\n  ","title":"How to fix &quot;Error executing DDL &quot;alter table events drop foreign key FKg0mkvgsqn8584qoql6a2rxheq&quot; via JDBC Statement&quot;","body":"<p>Owner is a reserved word for MySQL. Either change it or use annotation to use some different name for forgeinkey instead of default</p>\n<p>Reference:\n<a href=\"https://dev.mysql.com/doc/refman/8.0/en/keywords.html#keywords-8-0-detailed-O\" rel=\"nofollow noreferrer\">https://dev.mysql.com/doc/refman/8.0/en/keywords.html#keywords-8-0-detailed-O</a></p>\n<p>Forcing  JPA to use custom name</p>\n<pre><code>@ManyToOne\n@MapsId(&quot;ownerId&quot;)\n@JoinColumn(\n        name = &quot;owner_id&quot;,\n        foreignKey = @ForeignKey(\n                name = &quot;fkey_own_id&quot;\n                )\n        ) \n</code></pre>\n"},{"tags":[],"owner":{"account_id":6379287,"reputation":1756,"user_id":5404469,"display_name":"harun ugur"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694183849,"creation_date":1642866656,"answer_id":70814482,"question_id":54504230,"body_markdown":"Add this setting properties line code in file *application.yml* or the *properties.properties* file:\r\n\r\n```lang-none\r\nspring.jpa.hibernate.ddl-auto=update\r\n```\r\n","title":"How to fix &quot;Error executing DDL &quot;alter table events drop foreign key FKg0mkvgsqn8584qoql6a2rxheq&quot; via JDBC Statement&quot;","body":"<p>Add this setting properties line code in file <em>application.yml</em> or the <em>properties.properties</em> file:</p>\n<pre class=\"lang-none prettyprint-override\"><code>spring.jpa.hibernate.ddl-auto=update\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23381203,"reputation":1,"user_id":17447812,"display_name":"Romuald C."},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646676524,"creation_date":1646654428,"answer_id":71380755,"question_id":54504230,"body_markdown":"After checking my **hibernate.dialect** in **application.properties**, and changing my table&#39;s names (to make them less likely to interfere with reserved MSQL keywords), I was still having this error with **create-and-drop**, when Hibernate does its `ALTER TABLE` to add foreign keys.\r\n\r\nWanting to solve this I decided to look at MySQL logs in MySQL Workbench.\r\n\r\nBut then I was facing another issue: I couldn&#39;t access server logs (some errors regarding `PATH` variable, but `PATH` variable was ok). See [here](https://stackoverflow.com/questions/53236494/could-not-acquire-management-access-for-administration-runtime-error-unable-to) for how to solve that.\r\n\r\n**The real issue came from character encoding working on a European environment** (France).\r\n\r\nIssue was fixed by activating &quot;Beta: Use UTF-8 for worldwide language support&quot;, under Control Panel &gt; Region &gt; Administrative &gt; Change system locale.\r\n\r\nAfter reboot, I could access my MySQL logs and guess what? I was no longer having errors with Hibernate either.\r\n","title":"How to fix &quot;Error executing DDL &quot;alter table events drop foreign key FKg0mkvgsqn8584qoql6a2rxheq&quot; via JDBC Statement&quot;","body":"<p>After checking my <strong>hibernate.dialect</strong> in <strong>application.properties</strong>, and changing my table's names (to make them less likely to interfere with reserved MSQL keywords), I was still having this error with <strong>create-and-drop</strong>, when Hibernate does its <code>ALTER TABLE</code> to add foreign keys.</p>\n<p>Wanting to solve this I decided to look at MySQL logs in MySQL Workbench.</p>\n<p>But then I was facing another issue: I couldn't access server logs (some errors regarding <code>PATH</code> variable, but <code>PATH</code> variable was ok). See <a href=\"https://stackoverflow.com/questions/53236494/could-not-acquire-management-access-for-administration-runtime-error-unable-to\">here</a> for how to solve that.</p>\n<p><strong>The real issue came from character encoding working on a European environment</strong> (France).</p>\n<p>Issue was fixed by activating &quot;Beta: Use UTF-8 for worldwide language support&quot;, under Control Panel &gt; Region &gt; Administrative &gt; Change system locale.</p>\n<p>After reboot, I could access my MySQL logs and guess what? I was no longer having errors with Hibernate either.</p>\n"},{"comments":[{"owner":{"account_id":3756387,"reputation":802,"user_id":3122668,"display_name":"capo11"},"score":0,"creation_date":1695626797,"post_id":72897734,"comment_id":136044307,"body_markdown":"This solve the issue for me as well but I can&#39;t figure out why....","body":"This solve the issue for me as well but I can&#39;t figure out why...."}],"tags":[],"owner":{"account_id":20792942,"reputation":33,"user_id":15270673,"display_name":"YgLK"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1657196519,"creation_date":1657196519,"answer_id":72897734,"question_id":54504230,"body_markdown":"I encountered that problem too with the MySQL running on Docker and here&#39;s solution which worked for me. \r\n\r\n0. Delete .data directory if you have one in your project directory.\r\n1. Turn off running Docker container. \r\n2. Delete existing Docker container.\r\n3. Create new Docker container by simply typing in `docker-compose up -d` in the directory where `docker-compose.yml` file is located.\r\n4. Rerun Spring Boot app.\r\n\r\n\r\nAfter hours of trying to find solution this solved all my problems with the errors thrown by the Hibernate in the Spring Boot app.\r\n\r\n(PS. I have in the application.properties file this line: \r\n`spring.jpa.hibernate.ddl-auto=update` - it might play some factor too)","title":"How to fix &quot;Error executing DDL &quot;alter table events drop foreign key FKg0mkvgsqn8584qoql6a2rxheq&quot; via JDBC Statement&quot;","body":"<p>I encountered that problem too with the MySQL running on Docker and here's solution which worked for me.</p>\n<ol start=\"0\">\n<li>Delete .data directory if you have one in your project directory.</li>\n<li>Turn off running Docker container.</li>\n<li>Delete existing Docker container.</li>\n<li>Create new Docker container by simply typing in <code>docker-compose up -d</code> in the directory where <code>docker-compose.yml</code> file is located.</li>\n<li>Rerun Spring Boot app.</li>\n</ol>\n<p>After hours of trying to find solution this solved all my problems with the errors thrown by the Hibernate in the Spring Boot app.</p>\n<p>(PS. I have in the application.properties file this line:\n<code>spring.jpa.hibernate.ddl-auto=update</code> - it might play some factor too)</p>\n"},{"tags":[],"owner":{"account_id":16439005,"reputation":11,"user_id":11875882,"display_name":"RG Fick"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677853025,"creation_date":1677852971,"answer_id":75628207,"question_id":54504230,"body_markdown":"I was getting this error because I was using: private &quot;Long&quot; id; rather than: private &quot;int&quot; id; Hibernate was adding &quot;BIGINT&quot; in the DB and then didn&#39;t recognise it.\r\n\r\nI changed my entity id&#39;s to &quot;int&quot; and that solved my problem. Hope this helps.","title":"How to fix &quot;Error executing DDL &quot;alter table events drop foreign key FKg0mkvgsqn8584qoql6a2rxheq&quot; via JDBC Statement&quot;","body":"<p>I was getting this error because I was using: private &quot;Long&quot; id; rather than: private &quot;int&quot; id; Hibernate was adding &quot;BIGINT&quot; in the DB and then didn't recognise it.</p>\n<p>I changed my entity id's to &quot;int&quot; and that solved my problem. Hope this helps.</p>\n"},{"tags":[],"owner":{"account_id":28340457,"reputation":1,"user_id":21673547,"display_name":"Sharayu "},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683044918,"creation_date":1683044918,"answer_id":76156964,"question_id":54504230,"body_markdown":"Adding space between column name also leads to this error.\r\n\r\neg.\r\n\r\n     @Column(name = &quot;PRODUCT ID&quot;)\r\n\r\nchange this to:\r\n\r\n     @Column(name = &quot;PRODUCT_ID&quot;)","title":"How to fix &quot;Error executing DDL &quot;alter table events drop foreign key FKg0mkvgsqn8584qoql6a2rxheq&quot; via JDBC Statement&quot;","body":"<p>Adding space between column name also leads to this error.</p>\n<p>eg.</p>\n<pre><code> @Column(name = &quot;PRODUCT ID&quot;)\n</code></pre>\n<p>change this to:</p>\n<pre><code> @Column(name = &quot;PRODUCT_ID&quot;)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5962728,"reputation":2317,"user_id":4687402,"accept_rate":50,"display_name":"Benjamin Basmaci"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683634142,"creation_date":1683291369,"answer_id":76182451,"question_id":54504230,"body_markdown":"Odd solution that eventually worked for me: After trying some of the suggested options for `spring.jpa.hibernate.ddl-auto`, which did not work, I ran it once with `none` and then with `create` and it worked.\r\n\r\nI can&#39;t really explain it but it&#39;s quick to try, and it worked for me. I was using a h2 database.\r\n","title":"How to fix &quot;Error executing DDL &quot;alter table events drop foreign key FKg0mkvgsqn8584qoql6a2rxheq&quot; via JDBC Statement&quot;","body":"<p>Odd solution that eventually worked for me: After trying some of the suggested options for <code>spring.jpa.hibernate.ddl-auto</code>, which did not work, I ran it once with <code>none</code> and then with <code>create</code> and it worked.</p>\n<p>I can't really explain it but it's quick to try, and it worked for me. I was using a h2 database.</p>\n"}],"owner":{"account_id":9740564,"reputation":654,"user_id":7222312,"display_name":"FilipW"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":133503,"favorite_count":0,"down_vote_count":0,"up_vote_count":48,"accepted_answer_id":56206827,"answer_count":22,"score":48,"last_activity_date":1694185617,"creation_date":1549206598,"question_id":54504230,"body_markdown":"I&#39;m trying to start a Spring Boot project with a MySQL database, but I have some problem with the database. I try to start my application that, and server is running, but Hibernate doesn’t create Tables, etc.\r\n\r\nThis is my code:\r\n\r\nUser Entity\r\n\r\n     @Entity\r\n       public class User {\r\n          @Id\r\n          @GeneratedValue(strategy = IDENTITY)\r\n          private Long id;\r\n\r\n          private String firstName;\r\n          private String lastName;\r\n\r\n          private String email;\r\n\r\n          private String password;\r\n          private String description;\r\n          private String profile_photo;\r\n\r\n          private LocalDate create;\r\n          private LocalDate update;\r\n\r\n          @OneToMany(mappedBy = &quot;eventOwner&quot;)\r\n          private List&lt;Event&gt; ownedEvents;\r\n\r\n               public Long getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(Long id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getFirstName() {\r\n        return firstName;\r\n    }\r\n\r\n    public void setFirstName(String firstName) {\r\n        this.firstName = firstName;\r\n    }\r\n\r\n    public String getLastName() {\r\n        return lastName;\r\n    }\r\n\r\n    public void setLastName(String lastName) {\r\n        this.lastName = lastName;\r\n    }\r\n\r\n    public String getEmail() {\r\n        return email;\r\n    }\r\n\r\n    public void setEmail(String email) {\r\n        this.email = email;\r\n    }\r\n\r\n    public String getPassword() {\r\n        return password;\r\n    }\r\n\r\n    public void setPassword(String password) {\r\n        this.password = password;\r\n    }\r\n\r\n    public String getDescription() {\r\n        return description;\r\n    }\r\n\r\n    public void setDescription(String description) {\r\n        this.description = description;\r\n    }\r\n\r\n    public String getProfile_photo() {\r\n        return profile_photo;\r\n    }\r\n\r\n    public void setProfile_photo(String profile_photo) {\r\n        this.profile_photo = profile_photo;\r\n    }\r\n\r\n    public LocalDate getCreate() {\r\n        return create;\r\n    }\r\n\r\n    public void setCreate(LocalDate create) {\r\n        this.create = create;\r\n    }\r\n\r\n    public LocalDate getUpdate() {\r\n        return update;\r\n    }\r\n\r\n    public void setUpdate(LocalDate update) {\r\n        this.update = update;\r\n    }\r\n\r\n    public List&lt;Event&gt; getOwnedEvents() {\r\n        return ownedEvents;\r\n    }\r\n\r\n    public void setOwnedEvents(List&lt;Event&gt; ownedEvents) {\r\n        this.ownedEvents = ownedEvents;\r\n    }}\r\n\r\n\r\n\r\nEvent Entity\r\n\r\n       @Entity\r\n       @Table(name = &quot;events&quot;)\r\n       public class Event {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    private Double longitude;\r\n    private Double latitude;\r\n\r\n    private String description;\r\n    private String header;\r\n\r\n    private LocalDate startData;\r\n    private LocalDate endData;\r\n    private LocalDate creat;\r\n    private LocalDate update;\r\n    private Filters filters;\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;owner_id&quot;)\r\n    private User eventOwner;\r\n\r\n    public Long getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(Long id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public Double getLongitude() {\r\n        return longitude;\r\n    }\r\n\r\n    public void setLongitude(Double longitude) {\r\n        this.longitude = longitude;\r\n    }\r\n\r\n    public Double getLatitude() {\r\n        return latitude;\r\n    }\r\n\r\n    public void setLatitude(Double latitude) {\r\n        this.latitude = latitude;\r\n    }\r\n\r\n    public String getDescription() {\r\n        return description;\r\n    }\r\n\r\n    public void setDescription(String description) {\r\n        this.description = description;\r\n    }\r\n\r\n    public String getHeader() {\r\n        return header;\r\n    }\r\n\r\n    public void setHeader(String header) {\r\n        this.header = header;\r\n    }\r\n\r\n    public LocalDate getStartData() {\r\n        return startData;\r\n    }\r\n\r\n    public void setStartData(LocalDate startData) {\r\n        this.startData = startData;\r\n    }\r\n\r\n    public LocalDate getEndData() {\r\n        return endData;\r\n    }\r\n\r\n    public void setEndData(LocalDate endData) {\r\n        this.endData = endData;\r\n    }\r\n\r\n    public LocalDate getCreat() {\r\n        return creat;\r\n    }\r\n\r\n    public void setCreat(LocalDate creat) {\r\n        this.creat = creat;\r\n    }\r\n\r\n    public LocalDate getUpdate() {\r\n        return update;\r\n    }\r\n\r\n    public void setUpdate(LocalDate update) {\r\n        this.update = update;\r\n    }\r\n\r\n    public Filters getFilters() {\r\n        return filters;\r\n    }\r\n\r\n    public void setFilters(Filters filters) {\r\n        this.filters = filters;\r\n    }\r\n\r\n    public User getEventOwner() {\r\n        return eventOwner;\r\n    }\r\n\r\n    public void setEventOwner(User eventOwner) {\r\n        this.eventOwner = eventOwner;\r\n    }\r\n}\r\n\r\nAnd these are my properties:\r\n\r\n    spring.datasource.url= jdbc:mysql://localhost:3306/some_database?\r\n    requireSSL=false&amp;useSSL=false\r\n    spring.datasource.username= user\r\n    spring.datasource.password= passw\r\n    logging.level.org.hibernate.SQL= DEBUG\r\n    spring.jpa.hibernate.ddl-auto = create-drop\r\n    spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL55Dialect\r\n\r\nThis is the error I get:\r\n\r\n```lang-none\r\norg.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing\r\nDDL &quot;alter table events drop foreign key FKg0mkvgsqn8584qoql6a2rxheq&quot; via\r\nJDBC Statement\r\n```\r\n\r\nand\r\n\r\n```lang-none\r\norg.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing\r\nDDL &quot;create table events (id bigint not null auto_increment, creat date,\r\ndescription varchar(255), end_data date, event_type integer, max_age\r\ninteger not null, min_age integer not null, open_to_changes bit not null,\r\npets_allowed bit not null, price_range integer, smoking_allowed bit not\r\nnull, header varchar(255), latitude double precision, longitude double\r\nprecision, start_data date, update date, owner_id bigint, primary key (id))\r\nengine=InnoDB&quot; via JDBC Statement\r\nat org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67) ~[hibernate-core-5.3.7.Final.jar:5.3.7.Final]\r\nat org.hibernate.tool.schema.internal.SchemaCreatorImpl.applySqlString(SchemaCreatorImpl.java:440) [hibernate-core-5.3.7.Final.jar:5.3.7.Final]\r\nat org.hibernate.tool.schema.internal.SchemaCreatorImpl.applySqlStrings(SchemaCreatorImpl.java:424) [hibernate-core-5.3.7.Final.jar:5.3.7.Final]\r\nat org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:315) [hibernate-core-5.3.7.Final.jar:5.3.7.Final]\r\nat org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:166) [hibernate-core-5.3.7.Final.jar:5.3.7.Final]\r\nat org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:135) [hibernate-core-5.3.7.Final.jar:5.3.7.Final]\r\nat org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:121) [hibernate-core-5.3.7.Final.jar:5.3.7.Final]\r\nat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:155) [hibernate-core-5.3.7.Final.jar:5.3.7.Final]\r\nat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:72) [hibernate-core-5.3.7.Final.jar:5.3.7.Final]\r\nat org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:310) [hibernate-core-5.3.7.Final.jar:5.3.7.Final]\r\nat org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:467) [hibernate-core-5.3.7.Final.jar:5.3.7.Final]\r\nat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:939) [hibernate-core-5.3.7.Final.jar:5.3.7.Final]\r\nat org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:57) [spring-orm-5.1.4.RELEASE.jar:5.1.4.RELEASE]\r\nat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365) [spring-orm-5.1.4.RELEASE.jar:5.1.4.RELEASE]\r\nat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:390) [spring-orm-5.1.4.RELEASE.jar:5.1.4.RELEASE]\r\nat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:377) [spring-orm-5.1.4.RELEASE.jar:5.1.4.RELEASE]\r\nat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341) [spring-orm-5.1.4.RELEASE.jar:5.1.4.RELEASE]\r\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1804) [spring-beans-5.1.4.RELEASE.jar:5.1.4.RELEASE]\r\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1741) [spring-beans-5.1.4.RELEASE.jar:5.1.4.RELEASE]\r\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:576) [spring-beans-5.1.4.RELEASE.jar:5.1.4.RELEASE]\r\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498) [spring-beans-5.1.4.RELEASE.jar:5.1.4.RELEASE]\r\nat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320) [spring-beans-5.1.4.RELEASE.jar:5.1.4.RELEASE]\r\nat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) ~[spring-beans-5.1.4.RELEASE.jar:5.1.4.RELEASE]\r\nat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318) [spring-beans-5.1.4.RELEASE.jar:5.1.4.RELEASE]\r\nat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) [spring-beans-5.1.4.RELEASE.jar:5.1.4.RELEASE]\r\nat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1083) ~[spring-context-5.1.4.RELEASE.jar:5.1.4.RELEASE]\r\nat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:853) ~[spring-context-5.1.4.RELEASE.jar:5.1.4.RELEASE]\r\nat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:546) ~[spring-context-5.1.4.RELEASE.jar:5.1.4.RELEASE]\r\nat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:142) ~[spring-boot-2.1.2.RELEASE.jar:2.1.2.RELEASE]\r\nat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775) ~[spring-boot-2.1.2.RELEASE.jar:2.1.2.RELEASE]\r\nat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397) ~[spring-boot-2.1.2.RELEASE.jar:2.1.2.RELEASE]\r\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:316) ~[spring-boot-2.1.2.RELEASE.jar:2.1.2.RELEASE]\r\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:1260) ~[spring-boot-2.1.2.RELEASE.jar:2.1.2.RELEASE]\r\n```\r\n\r\nHow can I fix that?\r\n","title":"How to fix &quot;Error executing DDL &quot;alter table events drop foreign key FKg0mkvgsqn8584qoql6a2rxheq&quot; via JDBC Statement&quot;","body":"<p>I'm trying to start a Spring Boot project with a MySQL database, but I have some problem with the database. I try to start my application that, and server is running, but Hibernate doesn’t create Tables, etc.</p>\n<p>This is my code:</p>\n<p>User Entity</p>\n<pre><code> @Entity\n   public class User {\n      @Id\n      @GeneratedValue(strategy = IDENTITY)\n      private Long id;\n\n      private String firstName;\n      private String lastName;\n\n      private String email;\n\n      private String password;\n      private String description;\n      private String profile_photo;\n\n      private LocalDate create;\n      private LocalDate update;\n\n      @OneToMany(mappedBy = &quot;eventOwner&quot;)\n      private List&lt;Event&gt; ownedEvents;\n\n           public Long getId() {\n    return id;\n}\n\npublic void setId(Long id) {\n    this.id = id;\n}\n\npublic String getFirstName() {\n    return firstName;\n}\n\npublic void setFirstName(String firstName) {\n    this.firstName = firstName;\n}\n\npublic String getLastName() {\n    return lastName;\n}\n\npublic void setLastName(String lastName) {\n    this.lastName = lastName;\n}\n\npublic String getEmail() {\n    return email;\n}\n\npublic void setEmail(String email) {\n    this.email = email;\n}\n\npublic String getPassword() {\n    return password;\n}\n\npublic void setPassword(String password) {\n    this.password = password;\n}\n\npublic String getDescription() {\n    return description;\n}\n\npublic void setDescription(String description) {\n    this.description = description;\n}\n\npublic String getProfile_photo() {\n    return profile_photo;\n}\n\npublic void setProfile_photo(String profile_photo) {\n    this.profile_photo = profile_photo;\n}\n\npublic LocalDate getCreate() {\n    return create;\n}\n\npublic void setCreate(LocalDate create) {\n    this.create = create;\n}\n\npublic LocalDate getUpdate() {\n    return update;\n}\n\npublic void setUpdate(LocalDate update) {\n    this.update = update;\n}\n\npublic List&lt;Event&gt; getOwnedEvents() {\n    return ownedEvents;\n}\n\npublic void setOwnedEvents(List&lt;Event&gt; ownedEvents) {\n    this.ownedEvents = ownedEvents;\n}}\n</code></pre>\n<p>Event Entity</p>\n<pre><code>   @Entity\n   @Table(name = &quot;events&quot;)\n   public class Event {\n\n@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\nprivate Long id;\n\nprivate Double longitude;\nprivate Double latitude;\n\nprivate String description;\nprivate String header;\n\nprivate LocalDate startData;\nprivate LocalDate endData;\nprivate LocalDate creat;\nprivate LocalDate update;\nprivate Filters filters;\n\n@ManyToOne\n@JoinColumn(name = &quot;owner_id&quot;)\nprivate User eventOwner;\n\npublic Long getId() {\n    return id;\n}\n\npublic void setId(Long id) {\n    this.id = id;\n}\n\npublic Double getLongitude() {\n    return longitude;\n}\n\npublic void setLongitude(Double longitude) {\n    this.longitude = longitude;\n}\n\npublic Double getLatitude() {\n    return latitude;\n}\n\npublic void setLatitude(Double latitude) {\n    this.latitude = latitude;\n}\n\npublic String getDescription() {\n    return description;\n}\n\npublic void setDescription(String description) {\n    this.description = description;\n}\n\npublic String getHeader() {\n    return header;\n}\n\npublic void setHeader(String header) {\n    this.header = header;\n}\n\npublic LocalDate getStartData() {\n    return startData;\n}\n\npublic void setStartData(LocalDate startData) {\n    this.startData = startData;\n}\n\npublic LocalDate getEndData() {\n    return endData;\n}\n\npublic void setEndData(LocalDate endData) {\n    this.endData = endData;\n}\n\npublic LocalDate getCreat() {\n    return creat;\n}\n\npublic void setCreat(LocalDate creat) {\n    this.creat = creat;\n}\n\npublic LocalDate getUpdate() {\n    return update;\n}\n\npublic void setUpdate(LocalDate update) {\n    this.update = update;\n}\n\npublic Filters getFilters() {\n    return filters;\n}\n\npublic void setFilters(Filters filters) {\n    this.filters = filters;\n}\n\npublic User getEventOwner() {\n    return eventOwner;\n}\n\npublic void setEventOwner(User eventOwner) {\n    this.eventOwner = eventOwner;\n}\n</code></pre>\n<p>}</p>\n<p>And these are my properties:</p>\n<pre><code>spring.datasource.url= jdbc:mysql://localhost:3306/some_database?\nrequireSSL=false&amp;useSSL=false\nspring.datasource.username= user\nspring.datasource.password= passw\nlogging.level.org.hibernate.SQL= DEBUG\nspring.jpa.hibernate.ddl-auto = create-drop\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL55Dialect\n</code></pre>\n<p>This is the error I get:</p>\n<pre class=\"lang-none prettyprint-override\"><code>org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing\nDDL &quot;alter table events drop foreign key FKg0mkvgsqn8584qoql6a2rxheq&quot; via\nJDBC Statement\n</code></pre>\n<p>and</p>\n<pre class=\"lang-none prettyprint-override\"><code>org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing\nDDL &quot;create table events (id bigint not null auto_increment, creat date,\ndescription varchar(255), end_data date, event_type integer, max_age\ninteger not null, min_age integer not null, open_to_changes bit not null,\npets_allowed bit not null, price_range integer, smoking_allowed bit not\nnull, header varchar(255), latitude double precision, longitude double\nprecision, start_data date, update date, owner_id bigint, primary key (id))\nengine=InnoDB&quot; via JDBC Statement\nat org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67) ~[hibernate-core-5.3.7.Final.jar:5.3.7.Final]\nat org.hibernate.tool.schema.internal.SchemaCreatorImpl.applySqlString(SchemaCreatorImpl.java:440) [hibernate-core-5.3.7.Final.jar:5.3.7.Final]\nat org.hibernate.tool.schema.internal.SchemaCreatorImpl.applySqlStrings(SchemaCreatorImpl.java:424) [hibernate-core-5.3.7.Final.jar:5.3.7.Final]\nat org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:315) [hibernate-core-5.3.7.Final.jar:5.3.7.Final]\nat org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:166) [hibernate-core-5.3.7.Final.jar:5.3.7.Final]\nat org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:135) [hibernate-core-5.3.7.Final.jar:5.3.7.Final]\nat org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:121) [hibernate-core-5.3.7.Final.jar:5.3.7.Final]\nat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:155) [hibernate-core-5.3.7.Final.jar:5.3.7.Final]\nat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:72) [hibernate-core-5.3.7.Final.jar:5.3.7.Final]\nat org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:310) [hibernate-core-5.3.7.Final.jar:5.3.7.Final]\nat org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:467) [hibernate-core-5.3.7.Final.jar:5.3.7.Final]\nat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:939) [hibernate-core-5.3.7.Final.jar:5.3.7.Final]\nat org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:57) [spring-orm-5.1.4.RELEASE.jar:5.1.4.RELEASE]\nat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365) [spring-orm-5.1.4.RELEASE.jar:5.1.4.RELEASE]\nat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:390) [spring-orm-5.1.4.RELEASE.jar:5.1.4.RELEASE]\nat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:377) [spring-orm-5.1.4.RELEASE.jar:5.1.4.RELEASE]\nat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341) [spring-orm-5.1.4.RELEASE.jar:5.1.4.RELEASE]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1804) [spring-beans-5.1.4.RELEASE.jar:5.1.4.RELEASE]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1741) [spring-beans-5.1.4.RELEASE.jar:5.1.4.RELEASE]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:576) [spring-beans-5.1.4.RELEASE.jar:5.1.4.RELEASE]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498) [spring-beans-5.1.4.RELEASE.jar:5.1.4.RELEASE]\nat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320) [spring-beans-5.1.4.RELEASE.jar:5.1.4.RELEASE]\nat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) ~[spring-beans-5.1.4.RELEASE.jar:5.1.4.RELEASE]\nat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318) [spring-beans-5.1.4.RELEASE.jar:5.1.4.RELEASE]\nat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) [spring-beans-5.1.4.RELEASE.jar:5.1.4.RELEASE]\nat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1083) ~[spring-context-5.1.4.RELEASE.jar:5.1.4.RELEASE]\nat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:853) ~[spring-context-5.1.4.RELEASE.jar:5.1.4.RELEASE]\nat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:546) ~[spring-context-5.1.4.RELEASE.jar:5.1.4.RELEASE]\nat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:142) ~[spring-boot-2.1.2.RELEASE.jar:2.1.2.RELEASE]\nat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775) ~[spring-boot-2.1.2.RELEASE.jar:2.1.2.RELEASE]\nat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397) ~[spring-boot-2.1.2.RELEASE.jar:2.1.2.RELEASE]\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:316) ~[spring-boot-2.1.2.RELEASE.jar:2.1.2.RELEASE]\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:1260) ~[spring-boot-2.1.2.RELEASE.jar:2.1.2.RELEASE]\n</code></pre>\n<p>How can I fix that?</p>\n"},{"tags":["java","spring-boot","spring-data-jpa","java-17","criteriabuilder"],"comments":[{"owner":{"account_id":9341144,"reputation":173,"user_id":6933895,"display_name":"Riberto Junior"},"score":0,"creation_date":1684252678,"post_id":76261869,"comment_id":134489716,"body_markdown":"The reason it was not working is that my projection was not correctly designed, I had to rework the joins.","body":"The reason it was not working is that my projection was not correctly designed, I had to rework the joins."}],"owner":{"account_id":9341144,"reputation":173,"user_id":6933895,"display_name":"Riberto Junior"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":616,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694185532,"creation_date":1684232141,"question_id":76261869,"body_markdown":"So I&#39;m trying to use Specification with projection, this is a new feature on Spring Boot 3.\r\n\r\n```\r\nUserRepository repo;\r\nSpecification&lt;User&gt; spec;\r\nPage&lt;UserProjection&gt; result = repo.findBy(spec, q -&gt; q.as(UserProjection.class).page(pageable));\r\n```\r\nas viewed here https://github.com/spring-projects/spring-data-jpa/issues/2499\r\n\r\nBut this implementation generates the same SQL as the regular findAll\r\n\r\n```\r\nUserRepository repo;\r\nSpecification&lt;User&gt; spec;\r\nPage&lt;User&gt; result = repo.findAll(spec, pageable);\r\n```\r\nWith the same SQL the use of projections is meaningless.\r\nIs there anything missing on this implementation?","title":"Spring Boot 3 JpaSpecificationExecutor::FindBy(~) with Specification and Projection","body":"<p>So I'm trying to use Specification with projection, this is a new feature on Spring Boot 3.</p>\n<pre><code>UserRepository repo;\nSpecification&lt;User&gt; spec;\nPage&lt;UserProjection&gt; result = repo.findBy(spec, q -&gt; q.as(UserProjection.class).page(pageable));\n</code></pre>\n<p>as viewed here <a href=\"https://github.com/spring-projects/spring-data-jpa/issues/2499\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-data-jpa/issues/2499</a></p>\n<p>But this implementation generates the same SQL as the regular findAll</p>\n<pre><code>UserRepository repo;\nSpecification&lt;User&gt; spec;\nPage&lt;User&gt; result = repo.findAll(spec, pageable);\n</code></pre>\n<p>With the same SQL the use of projections is meaningless.\nIs there anything missing on this implementation?</p>\n"},{"tags":["java","android","kotlin"],"owner":{"account_id":29396189,"reputation":1,"user_id":22523482,"display_name":"luszyn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694185218,"creation_date":1694185218,"question_id":77067955,"body_markdown":"Is there any way or SDK that would allow my Android application to connect to the wristbands and download data from them, such as heart rate, number of steps or sleep? I&#39;m trying to make my own fit application that will be able to collect such data. I want to connect to, for example, Mi Band 5 in the simplest way, without the need to use shell commands\r\n\r\nI tried to download the sdk https://github.com/pangliang/miband-sdk-android however gradle had trouble downloading this sdk. I downloaded the SDK from Xiaomi, but due to the lack of documentation, it was difficult to do anything. I tried to detect the band via BluetoothGATT in the test Android application, but it crashed when launched","title":"Downloading data from smartbands (e.g. Xiaomi Mi Band 5)","body":"<p>Is there any way or SDK that would allow my Android application to connect to the wristbands and download data from them, such as heart rate, number of steps or sleep? I'm trying to make my own fit application that will be able to collect such data. I want to connect to, for example, Mi Band 5 in the simplest way, without the need to use shell commands</p>\n<p>I tried to download the sdk <a href=\"https://github.com/pangliang/miband-sdk-android\" rel=\"nofollow noreferrer\">https://github.com/pangliang/miband-sdk-android</a> however gradle had trouble downloading this sdk. I downloaded the SDK from Xiaomi, but due to the lack of documentation, it was difficult to do anything. I tried to detect the band via BluetoothGATT in the test Android application, but it crashed when launched</p>\n"},{"tags":["java","priority-queue","blockingqueue"],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694184972,"creation_date":1694183472,"answer_id":77067756,"question_id":77067190,"body_markdown":"&gt;  Is there any other scenario when it could block?\r\n\r\nBy my reading of the code (Java 11 version) `take()` *should* only block if the queue is empty when the call is made.  \r\n\r\nBut that doesn&#39;t imply that a `take()` call will immediately unblock when the queue becomes non-empty.  Indeed, if two or more threads are calling `take()` at the same time, it is conceivable that some threads will &quot;starve&quot; because the arriving elements are consistently being delivered to other waiting threads.   (The `PriorityBlockingQueue` uses `ReentrantLock` instances to coordinate the producers and consumers, but these are not created as *fair* locks.)\r\n\r\nAnother scenario involves faulty `Comparable` or `Comparator` implementations.  When the queue is or becomes non-empty, `take()` calls an internal `dequeue` method which in turn uses the `Comparable` or `Comparator` interface to *sift* the queue.  If your `Comparable` or `Comparator` code could itself block, that would block the current `take()` call and all future `take()` calls.  \r\n\r\n----------------------\r\n\r\nHaving said that, you also need to consider the most obvious explanation; i.e. that `take()` is blocking because the queue *really is empty*.\r\n","title":"Java PriorityBlockingQueue blocking behavior","body":"<blockquote>\n<p>Is there any other scenario when it could block?</p>\n</blockquote>\n<p>By my reading of the code (Java 11 version) <code>take()</code> <em>should</em> only block if the queue is empty when the call is made.</p>\n<p>But that doesn't imply that a <code>take()</code> call will immediately unblock when the queue becomes non-empty.  Indeed, if two or more threads are calling <code>take()</code> at the same time, it is conceivable that some threads will &quot;starve&quot; because the arriving elements are consistently being delivered to other waiting threads.   (The <code>PriorityBlockingQueue</code> uses <code>ReentrantLock</code> instances to coordinate the producers and consumers, but these are not created as <em>fair</em> locks.)</p>\n<p>Another scenario involves faulty <code>Comparable</code> or <code>Comparator</code> implementations.  When the queue is or becomes non-empty, <code>take()</code> calls an internal <code>dequeue</code> method which in turn uses the <code>Comparable</code> or <code>Comparator</code> interface to <em>sift</em> the queue.  If your <code>Comparable</code> or <code>Comparator</code> code could itself block, that would block the current <code>take()</code> call and all future <code>take()</code> calls.</p>\n<hr />\n<p>Having said that, you also need to consider the most obvious explanation; i.e. that <code>take()</code> is blocking because the queue <em>really is empty</em>.</p>\n"}],"owner":{"account_id":7378068,"reputation":31,"user_id":5615886,"display_name":"Krist&#243;f Marosv&#225;ri"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77067756,"answer_count":1,"score":0,"last_activity_date":1694184972,"creation_date":1694178615,"question_id":77067190,"body_markdown":"From the docs I see, that the `take()` method blocks until an element becomes available.  \r\nIs there any other scenario when it could block?\r\n\r\nWhat I mean is, is there a possible scenario, when the queue is **not** empty, but despite that, calling `take()` blocks for some reason.\r\n\r\nPlease tell me, if anyone has knowledge about some scenario like this.","title":"Java PriorityBlockingQueue blocking behavior","body":"<p>From the docs I see, that the <code>take()</code> method blocks until an element becomes available.<br />\nIs there any other scenario when it could block?</p>\n<p>What I mean is, is there a possible scenario, when the queue is <strong>not</strong> empty, but despite that, calling <code>take()</code> blocks for some reason.</p>\n<p>Please tell me, if anyone has knowledge about some scenario like this.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":4816916,"reputation":16538,"user_id":3888766,"accept_rate":100,"display_name":"Fullstack Guy"},"score":3,"creation_date":1551760069,"post_id":54995386,"comment_id":96747271,"body_markdown":"What were your inputs?","body":"What were your inputs?"},{"owner":{"account_id":15189241,"reputation":1478,"user_id":11032188,"display_name":"Mark Melgo"},"score":0,"creation_date":1551760160,"post_id":54995386,"comment_id":96747292,"body_markdown":"Your code is correct. I think the input during GPA (line 15, as what the error says) are not in double format, maybe you entered a non number input","body":"Your code is correct. I think the input during GPA (line 15, as what the error says) are not in double format, maybe you entered a non number input"},{"owner":{"account_id":15458538,"reputation":59,"user_id":11151793,"display_name":"gangLand"},"score":0,"creation_date":1551760243,"post_id":54995386,"comment_id":96747315,"body_markdown":"@Mark My Inputs were: Hotam for the name 19 for the age, and 3.9 for the GPA, when i put a single digit in the GPA it runs fine. and even adds a 0 at the end for example If i put 3, it will print 3.0","body":"@Mark My Inputs were: Hotam for the name 19 for the age, and 3.9 for the GPA, when i put a single digit in the GPA it runs fine. and even adds a 0 at the end for example If i put 3, it will print 3.0"},{"owner":{"account_id":15156663,"reputation":71,"user_id":10937221,"display_name":"ChipLimo"},"score":0,"creation_date":1551760304,"post_id":54995386,"comment_id":96747331,"body_markdown":"I think you need to add some more code to check input. try to use Scanner.hasNext...() method.","body":"I think you need to add some more code to check input. try to use Scanner.hasNext...() method."},{"owner":{"account_id":15189241,"reputation":1478,"user_id":11032188,"display_name":"Mark Melgo"},"score":1,"creation_date":1551760463,"post_id":54995386,"comment_id":96747374,"body_markdown":"I executed your code with your input. It works well, no error was thrown","body":"I executed your code with your input. It works well, no error was thrown"},{"owner":{"account_id":15458538,"reputation":59,"user_id":11151793,"display_name":"gangLand"},"score":0,"creation_date":1551760670,"post_id":54995386,"comment_id":96747417,"body_markdown":"@Mark Maybe it has to do with eclipse? Im curious in what you run the code in","body":"@Mark Maybe it has to do with eclipse? Im curious in what you run the code in"},{"owner":{"account_id":15189241,"reputation":1478,"user_id":11032188,"display_name":"Mark Melgo"},"score":0,"creation_date":1551760719,"post_id":54995386,"comment_id":96747423,"body_markdown":"@HotamYusupov it has nothing to do with the IDE, I am also running it with eclipse. Try your input again and you will realize that it is working correctly","body":"@HotamYusupov it has nothing to do with the IDE, I am also running it with eclipse. Try your input again and you will realize that it is working correctly"},{"owner":{"account_id":15458538,"reputation":59,"user_id":11151793,"display_name":"gangLand"},"score":0,"creation_date":1551760771,"post_id":54995386,"comment_id":96747439,"body_markdown":"@Mark These are my exact inputs Enter your name: \nhotam\nEnter students age: \n19\nEnter your GPA: \n3.9  &lt;&lt;&lt; this is exactly where i get the error","body":"@Mark These are my exact inputs Enter your name:  hotam Enter students age:  19 Enter your GPA:  3.9  &lt;&lt;&lt; this is exactly where i get the error"}],"answers":[{"tags":[],"owner":{"account_id":3076596,"reputation":1137,"user_id":2605758,"display_name":"Hoppeduppeanut"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1551760731,"creation_date":1551760731,"answer_id":54995508,"question_id":54995386,"body_markdown":"Your code looks OK.\r\n\r\nAn `InputMismatchException` occurs in a `Scanner` when a given input doesn&#39;t match the expected input format. Your exception occurs on line 15, where a scanner expects a decimal number such as `3.14` (which, depending on your system&#39;s locale, the decimal can be represented by a dot `.` or a comma `,`!)\r\n\r\nIf you&#39;re certain that the input you&#39;re providing is absolutely a decimal number, but you&#39;re not sure what locale you&#39;re using, you can force a particular locale by using the `useLocale` method.\r\n\r\n    Scanner Scan = new Scanner(System.in).useLocale(Locale.US);","title":"Exception in thread &quot;main&quot; java.util.InputMismatchException error","body":"<p>Your code looks OK.</p>\n\n<p>An <code>InputMismatchException</code> occurs in a <code>Scanner</code> when a given input doesn't match the expected input format. Your exception occurs on line 15, where a scanner expects a decimal number such as <code>3.14</code> (which, depending on your system's locale, the decimal can be represented by a dot <code>.</code> or a comma <code>,</code>!)</p>\n\n<p>If you're certain that the input you're providing is absolutely a decimal number, but you're not sure what locale you're using, you can force a particular locale by using the <code>useLocale</code> method.</p>\n\n<pre><code>Scanner Scan = new Scanner(System.in).useLocale(Locale.US);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":183966,"reputation":14640,"user_id":419705,"accept_rate":67,"display_name":"Roddy of the Frozen Peas"},"score":2,"creation_date":1635536559,"post_id":69773671,"comment_id":123334027,"body_markdown":"Why? What makes you think the user&#39;s default locale is one that uses comma decimals?","body":"Why? What makes you think the user&#39;s default locale is one that uses comma decimals?"}],"tags":[],"owner":{"account_id":23185557,"reputation":1,"user_id":17282726,"display_name":"Ayoub smit"},"comment_count":1,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1635534165,"creation_date":1635534165,"answer_id":69773671,"question_id":54995386,"body_markdown":"when you enter a double or a float, enter it like this 80,9 not like this 80.9","title":"Exception in thread &quot;main&quot; java.util.InputMismatchException error","body":"<p>when you enter a double or a float, enter it like this 80,9 not like this 80.9</p>\n"},{"tags":[],"owner":{"account_id":27912425,"reputation":1,"user_id":21314325,"display_name":"Kret"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1677700563,"creation_date":1677700563,"answer_id":75608357,"question_id":54995386,"body_markdown":"when you enter a double or a float, enter with a comma (,) not a period (.) when the console asks you to enter a value.\r\n\r\n","title":"Exception in thread &quot;main&quot; java.util.InputMismatchException error","body":"<p>when you enter a double or a float, enter with a comma (,) not a period (.) when the console asks you to enter a value.</p>\n"}],"owner":{"account_id":15458538,"reputation":59,"user_id":11151793,"display_name":"gangLand"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32134,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":54995508,"answer_count":3,"score":5,"last_activity_date":1694184945,"creation_date":1551759979,"question_id":54995386,"body_markdown":"I believe I wrote all my code correctly but Im getting this error, can someone help me understand:\r\n\r\n    Exception in thread &quot;main&quot; java.util.InputMismatchException\r\n\tat java.base/java.util.Scanner.throwFor(Scanner.java:939)\r\n\tat java.base/java.util.Scanner.next(Scanner.java:1594)\r\n\tat java.base/java.util.Scanner.nextDouble(Scanner.java:2564)\r\n\tat gangPackage.newClass.main(newClass.java:15)\r\n\r\nHere is my code:\r\n\r\n    package gangPackage;\r\n    import java.util.*;\r\n    public class newClass {\r\n    \tpublic static void main (String[] args) {\r\n    \t    Scanner Scan = new Scanner(System.in);\r\n    \t    String name;\r\n    \t    int age;\r\n    \t    double gpa;\r\n    \t\r\n    \t    System.out.println(&quot;Enter your name: &quot;);\r\n    \t    name = Scan.nextLine();\r\n    \t    System.out.println(&quot;Enter students age: &quot;);\r\n    \t    age = Scan.nextInt();\r\n    \t    System.out.println(&quot;Enter your GPA: &quot;);\r\n    \t    gpa = Scan.nextDouble();\r\n    \r\n    \r\n    \t    System.out.printf(name + &quot; is &quot; + age + &quot; years old. And has a GPA of &quot; + gpa);\r\n    \t}\r\n    }\r\n\r\n","title":"Exception in thread &quot;main&quot; java.util.InputMismatchException error","body":"<p>I believe I wrote all my code correctly but Im getting this error, can someone help me understand:</p>\n\n<pre><code>Exception in thread \"main\" java.util.InputMismatchException\nat java.base/java.util.Scanner.throwFor(Scanner.java:939)\nat java.base/java.util.Scanner.next(Scanner.java:1594)\nat java.base/java.util.Scanner.nextDouble(Scanner.java:2564)\nat gangPackage.newClass.main(newClass.java:15)\n</code></pre>\n\n<p>Here is my code:</p>\n\n<pre><code>package gangPackage;\nimport java.util.*;\npublic class newClass {\n    public static void main (String[] args) {\n        Scanner Scan = new Scanner(System.in);\n        String name;\n        int age;\n        double gpa;\n\n        System.out.println(\"Enter your name: \");\n        name = Scan.nextLine();\n        System.out.println(\"Enter students age: \");\n        age = Scan.nextInt();\n        System.out.println(\"Enter your GPA: \");\n        gpa = Scan.nextDouble();\n\n\n        System.out.printf(name + \" is \" + age + \" years old. And has a GPA of \" + gpa);\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","dependency-injection"],"comments":[{"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":0,"creation_date":1694184592,"post_id":77067884,"comment_id":135862325,"body_markdown":"I assume that&#39;s supposed to be `@Autowired` not `@Autowire`?  The `extern` import is also missing a semicolon.","body":"I assume that&#39;s supposed to be <code>@Autowired</code> not <code>@Autowire</code>?  The <code>extern</code> import is also missing a semicolon."}],"owner":{"account_id":3675763,"reputation":1288,"user_id":3061903,"accept_rate":55,"display_name":"Vishal Maral"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694184909,"creation_date":1694184483,"question_id":77067884,"body_markdown":"I have a project with 3 maven modules as follows:\r\n```\r\nmain\r\n|\r\n|--extern\r\n|\t|\r\n|\t|-Adapter.java\r\n|\t\r\n|--business\r\n\t|-- CustomerService.java\r\n```   \r\n- *business* is included as a dependency in *extern*\r\n- *business* and *extern* both are included as a dependency in *main*\r\n- *main* module has the @SpringBootApplication class\r\n\r\nHere are the signatures of these classes:\r\n\r\n**MainApplication**\r\n```\r\npackage com.company.main;\r\n\r\n@ComponentScan(basePackages = {&quot;com.company.business&quot;, &quot;com.company.extern&quot;})\r\npublic class MainApplication {\r\n\r\n    public static void main(String[] args) {\r\n        log.info(&quot;Running the service...&quot;);\r\n        var applicationContext = SpringApplication.run(MainApplication.class, args);\r\n        var customerService = applicationContext.getBean(&quot;customerService&quot;); //able to access the bean here\r\n    }\r\n}\r\n```\r\n**Adapter**\r\n```\r\npackage com.company.extern;\r\n\r\n@Component\r\npublic class Adapter.java implements ApplicationContextAware {\r\n\r\n\t@Autowire\r\n\tCustomerService customerService; //this is null\r\n\t\r\n\tpublic void expose(){\r\n\t\tcustomerService.serve();\r\n\t}\r\n\t\r\n\t@Override\r\n    public void setApplicationContext(ApplicationContext context) throws BeansException {\r\n        var service = context.getBean(&quot;customerService&quot;); //able to access bean here\r\n    }\r\n}\r\n```\r\n**CustomerService**\r\n```\r\npackage com.company.business;\r\n\r\n@Service\r\npublic class CustomerService {\r\n\r\n    public void serve() {\r\n        log.info(&quot;serve&quot;);\r\n    }\r\n}\r\n```\r\nI can&#39;t get Spring to wire `customerService` bean in `Adapter.java`. what am I missing here? How can I make it work?","title":"How to resolve transitive spring bean dependency","body":"<p>I have a project with 3 maven modules as follows:</p>\n<pre><code>main\n|\n|--extern\n|   |\n|   |-Adapter.java\n|   \n|--business\n    |-- CustomerService.java\n</code></pre>\n<ul>\n<li><em>business</em> is included as a dependency in <em>extern</em></li>\n<li><em>business</em> and <em>extern</em> both are included as a dependency in <em>main</em></li>\n<li><em>main</em> module has the @SpringBootApplication class</li>\n</ul>\n<p>Here are the signatures of these classes:</p>\n<p><strong>MainApplication</strong></p>\n<pre><code>package com.company.main;\n\n@ComponentScan(basePackages = {&quot;com.company.business&quot;, &quot;com.company.extern&quot;})\npublic class MainApplication {\n\n    public static void main(String[] args) {\n        log.info(&quot;Running the service...&quot;);\n        var applicationContext = SpringApplication.run(MainApplication.class, args);\n        var customerService = applicationContext.getBean(&quot;customerService&quot;); //able to access the bean here\n    }\n}\n</code></pre>\n<p><strong>Adapter</strong></p>\n<pre><code>package com.company.extern;\n\n@Component\npublic class Adapter.java implements ApplicationContextAware {\n\n    @Autowire\n    CustomerService customerService; //this is null\n    \n    public void expose(){\n        customerService.serve();\n    }\n    \n    @Override\n    public void setApplicationContext(ApplicationContext context) throws BeansException {\n        var service = context.getBean(&quot;customerService&quot;); //able to access bean here\n    }\n}\n</code></pre>\n<p><strong>CustomerService</strong></p>\n<pre><code>package com.company.business;\n\n@Service\npublic class CustomerService {\n\n    public void serve() {\n        log.info(&quot;serve&quot;);\n    }\n}\n</code></pre>\n<p>I can't get Spring to wire <code>customerService</code> bean in <code>Adapter.java</code>. what am I missing here? How can I make it work?</p>\n"},{"tags":["java","windows","swing","jfilechooser"],"comments":[{"owner":{"account_id":379763,"reputation":29886,"user_id":733345,"display_name":"Joe"},"score":0,"creation_date":1429696795,"post_id":29793656,"comment_id":47716286,"body_markdown":"possible duplicate of [How to set the dpi of java swing apps on Windows/Linux?](http://stackoverflow.com/questions/15659044/how-to-set-the-dpi-of-java-swing-apps-on-windows-linux)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/15659044/how-to-set-the-dpi-of-java-swing-apps-on-windows-linux\">How to set the dpi of java swing apps on Windows/Linux?</a>"},{"owner":{"account_id":908335,"reputation":5155,"user_id":942774,"accept_rate":100,"display_name":"Hendrik"},"score":0,"creation_date":1438265028,"post_id":29793656,"comment_id":51387969,"body_markdown":"AFAIK, it&#39;s not possible right now. Please submit a bug/RFE at http://bugreport.java.com","body":"AFAIK, it&#39;s not possible right now. Please submit a bug/RFE at <a href=\"http://bugreport.java.com\" rel=\"nofollow noreferrer\">bugreport.java.com</a>"}],"answers":[{"comments":[{"owner":{"display_name":"user502187"},"score":0,"creation_date":1444122925,"post_id":32958121,"comment_id":53756848,"body_markdown":"Ok, might give it a try soon. BTW: I noticed that a lot of apps have scaling issues, for example the Android SDK download manager looks awful on a 2K display and is nearly not usable. Strange that this is not addressed by Oracle, Google, etc..","body":"Ok, might give it a try soon. BTW: I noticed that a lot of apps have scaling issues, for example the Android SDK download manager looks awful on a 2K display and is nearly not usable. Strange that this is not addressed by Oracle, Google, etc.."}],"tags":[],"owner":{"account_id":3265203,"reputation":471,"user_id":2749837,"accept_rate":38,"display_name":"gantners"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1444080190,"creation_date":1444080190,"answer_id":32958121,"question_id":29793656,"body_markdown":"Just a quick idea while i came across this thread. You can try to deliver your own iconset:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    new JFileChooser().setFileView(new FileView() {\r\n\t\t\t@Override\r\n\t\t\tpublic Icon getIcon(File f) {\r\n\t\t\t\treturn fancy2kIconForExtension(StringUtils.substringAfterLast(&quot;.&quot;));\r\n\t\t\t}\r\n\t\t});\r\n\r\nbe careful to load your Icons from a Cache, as this method is called very often from inside `JFileChooser`, otherwise you end up reloading icon all the time.","title":"JFileChooser icons on 2K Displays","body":"<p>Just a quick idea while i came across this thread. You can try to deliver your own iconset:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>new JFileChooser().setFileView(new FileView() {\n        @Override\n        public Icon getIcon(File f) {\n            return fancy2kIconForExtension(StringUtils.substringAfterLast(\".\"));\n        }\n    });\n</code></pre>\n\n<p>be careful to load your Icons from a Cache, as this method is called very often from inside <code>JFileChooser</code>, otherwise you end up reloading icon all the time.</p>\n"},{"tags":[],"owner":{"account_id":20452579,"reputation":26,"user_id":15007011,"display_name":"Rjelinek"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663797824,"creation_date":1663797824,"answer_id":73807386,"question_id":29793656,"body_markdown":"I very recently ran into same problem. the only work around is not using java build in ImageIcon class but to write one yourself,\r\nThis one took the provided image, scale it to fit current component size and paint it. I tried to make is as simple as possible and as close to original class as able, but its not perfect and need improvement, especially in component-icon alignment\r\n\r\n        import java.awt.Component;\r\n        import java.awt.Graphics;\r\n        import java.awt.Graphics2D;\r\n        import java.awt.RenderingHints;\r\n        import java.awt.geom.AffineTransform;\r\n        import javax.swing.AbstractButton;\r\n        import javax.swing.ImageIcon;\r\n        \r\n        /**\r\n         *\r\n         * @author Rastislav\r\n         */\r\n        public class ScaleToFitAndAntialiasIcon extends ImageIcon{\r\n            private ImageIcon icon;\r\n            \r\n            \r\n            \r\n        \r\n            public ScaleToFitAndAntialiasIcon(ImageIcon icon)\r\n            {\r\n                this.icon = icon;\r\n            }\r\n        \r\n            public int getIconWidth()\r\n            {\r\n                return icon.getIconWidth();\r\n            }\r\n        \r\n            public int getIconHeight()\r\n            {\r\n                return icon.getIconHeight();\r\n            }\r\n        \r\n            @Override\r\n            public void paintIcon(Component c, Graphics g, int x, int y)\r\n            {\r\n                Graphics2D g2d = (Graphics2D)g.create();\r\n                AffineTransform at = g2d.getTransform();\r\n                \r\n                double scaleToFit = ((double)c.getHeight() / (double)icon.getIconHeight());\r\n                \r\n                \r\n                if((int)icon.getIconHeight()*scaleToFit == c.getHeight()){\r\n                    scaleToFit = ((double)c.getHeight() / (double)icon.getIconHeight()) - 0.1;\r\n                }\r\n        \r\n                AffineTransform scaled = AffineTransform.getScaleInstance(scaleToFit, scaleToFit);\r\n                at.concatenate( scaled );\r\n                g2d.setTransform( at );\r\n                \r\n    //need improvement\r\n               /* int lineupMinus = (int)((double)icon.getIconWidth() *((double)c.getHeight() / (double)icon.getIconHeight()));\r\n                int lineup = (int)((double)icon.getIconWidth() * scaleToFit);\r\n                \r\n                int ff = (int)(lineupMinus - lineup);\r\n                System.out.println(ff);\r\n                */\r\n                \r\n                g2d.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING, RenderingHints.VALUE_TEXT_ANTIALIAS_ON);\r\n                g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);\r\n                g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BICUBIC);\r\n    //improved code goes here\r\n                icon.paintIcon(c, g2d, x, 4);\r\n                \r\n                \r\n                \r\n                \r\n                if(c instanceof AbstractButton a){\r\n                    a.setIconTextGap((int)(-icon.getIconWidth()/2));\r\n                }\r\n                \r\n                \r\n                \r\n                g2d.dispose();\r\n            }\r\n        \r\n        \r\n        }","title":"JFileChooser icons on 2K Displays","body":"<p>I very recently ran into same problem. the only work around is not using java build in ImageIcon class but to write one yourself,\nThis one took the provided image, scale it to fit current component size and paint it. I tried to make is as simple as possible and as close to original class as able, but its not perfect and need improvement, especially in component-icon alignment</p>\n<pre><code>    import java.awt.Component;\n    import java.awt.Graphics;\n    import java.awt.Graphics2D;\n    import java.awt.RenderingHints;\n    import java.awt.geom.AffineTransform;\n    import javax.swing.AbstractButton;\n    import javax.swing.ImageIcon;\n    \n    /**\n     *\n     * @author Rastislav\n     */\n    public class ScaleToFitAndAntialiasIcon extends ImageIcon{\n        private ImageIcon icon;\n        \n        \n        \n    \n        public ScaleToFitAndAntialiasIcon(ImageIcon icon)\n        {\n            this.icon = icon;\n        }\n    \n        public int getIconWidth()\n        {\n            return icon.getIconWidth();\n        }\n    \n        public int getIconHeight()\n        {\n            return icon.getIconHeight();\n        }\n    \n        @Override\n        public void paintIcon(Component c, Graphics g, int x, int y)\n        {\n            Graphics2D g2d = (Graphics2D)g.create();\n            AffineTransform at = g2d.getTransform();\n            \n            double scaleToFit = ((double)c.getHeight() / (double)icon.getIconHeight());\n            \n            \n            if((int)icon.getIconHeight()*scaleToFit == c.getHeight()){\n                scaleToFit = ((double)c.getHeight() / (double)icon.getIconHeight()) - 0.1;\n            }\n    \n            AffineTransform scaled = AffineTransform.getScaleInstance(scaleToFit, scaleToFit);\n            at.concatenate( scaled );\n            g2d.setTransform( at );\n            \n//need improvement\n           /* int lineupMinus = (int)((double)icon.getIconWidth() *((double)c.getHeight() / (double)icon.getIconHeight()));\n            int lineup = (int)((double)icon.getIconWidth() * scaleToFit);\n            \n            int ff = (int)(lineupMinus - lineup);\n            System.out.println(ff);\n            */\n            \n            g2d.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING, RenderingHints.VALUE_TEXT_ANTIALIAS_ON);\n            g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);\n            g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BICUBIC);\n//improved code goes here\n            icon.paintIcon(c, g2d, x, 4);\n            \n            \n            \n            \n            if(c instanceof AbstractButton a){\n                a.setIconTextGap((int)(-icon.getIconWidth()/2));\n            }\n            \n            \n            \n            g2d.dispose();\n        }\n    \n    \n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":278315,"reputation":11589,"user_id":572834,"display_name":"Alexey Ivanov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694184304,"creation_date":1694184304,"answer_id":77067860,"question_id":29793656,"body_markdown":"Java 8 does not support High DPI, its UI is scaled up by Windows to the correct size. Yet it means the UI is blurry.\r\n\r\nJava 11 and later support High DPI, the icons in `JFileChooser` will be scaled up by Java if the icon is not a [`MultiResolutionImage`][1] that provides different icons for different display scales in High DPI environment. In Java 17, most icons used by the file chooser are multi-resolution icons.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/java/awt/image/MultiResolutionImage.html","title":"JFileChooser icons on 2K Displays","body":"<p>Java 8 does not support High DPI, its UI is scaled up by Windows to the correct size. Yet it means the UI is blurry.</p>\n<p>Java 11 and later support High DPI, the icons in <code>JFileChooser</code> will be scaled up by Java if the icon is not a <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/java/awt/image/MultiResolutionImage.html\" rel=\"nofollow noreferrer\"><code>MultiResolutionImage</code></a> that provides different icons for different display scales in High DPI environment. In Java 17, most icons used by the file chooser are multi-resolution icons.</p>\n"}],"owner":{"display_name":"user502187"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":498,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":3,"score":9,"last_activity_date":1694184304,"creation_date":1429695950,"question_id":29793656,"body_markdown":"Any idea how to make the Java Swing file chooser\r\nlook better on 2K displays where the windows\r\nfont scaling is &gt; 125%?\r\n\r\nI am using ordinary code such as:\r\n\r\n    JFileChooser fc = new JFileChooser();\r\n    if (settings.currentdir != null)\r\n       fc.setCurrentDirectory(new File(settings.currentdir));\r\n    int returnVal = fc.showOpenDialog((Window) holder);\r\n    if (returnVal == JFileChooser.APPROVE_OPTION) {\r\n\r\n\r\nBut the file chooser is only displaying tiny\r\nicons for the listed files and directories. I am using\r\nJDK 8. What is going wrong?\r\n\r\nP.S.: Scope of the question is only Windows, not \r\nUnixes. On Windows, the two default L&amp;F, they \r\nscale the font. But they don&#39;t scale icons. The \r\napplication has to do that, since it might use \r\na different bitmap resources for higher scales. \r\nIt seems that JFileChooser is not coded this way. \r\n\r\nBut it might be that the JFileChooser can be\r\ninstructed to do so. I don&#39;t see that the\r\nother question addresses icon size and the\r\nJFileChooser on Windows: https://stackoverflow.com/questions/15659044/how-to-set-the-dpi-of-java-swing-apps-on-windows-linux The\r\nother question deals with font size, which is\r\nnot an issue for the JFileChooser on Windows with\r\none of the two Windows L&amp;F.","title":"JFileChooser icons on 2K Displays","body":"<p>Any idea how to make the Java Swing file chooser\nlook better on 2K displays where the windows\nfont scaling is > 125%?</p>\n\n<p>I am using ordinary code such as:</p>\n\n<pre><code>JFileChooser fc = new JFileChooser();\nif (settings.currentdir != null)\n   fc.setCurrentDirectory(new File(settings.currentdir));\nint returnVal = fc.showOpenDialog((Window) holder);\nif (returnVal == JFileChooser.APPROVE_OPTION) {\n</code></pre>\n\n<p>But the file chooser is only displaying tiny\nicons for the listed files and directories. I am using\nJDK 8. What is going wrong?</p>\n\n<p>P.S.: Scope of the question is only Windows, not \nUnixes. On Windows, the two default L&amp;F, they \nscale the font. But they don't scale icons. The \napplication has to do that, since it might use \na different bitmap resources for higher scales. \nIt seems that JFileChooser is not coded this way. </p>\n\n<p>But it might be that the JFileChooser can be\ninstructed to do so. I don't see that the\nother question addresses icon size and the\nJFileChooser on Windows: <a href=\"https://stackoverflow.com/questions/15659044/how-to-set-the-dpi-of-java-swing-apps-on-windows-linux\">How to set the DPI of Java Swing apps on Windows/Linux?</a> The\nother question deals with font size, which is\nnot an issue for the JFileChooser on Windows with\none of the two Windows L&amp;F.</p>\n"},{"tags":["java","image","android-studio","imageview"],"answers":[{"comments":[{"owner":{"account_id":29257311,"reputation":21,"user_id":22415222,"display_name":"Arianna Garaglia"},"score":0,"creation_date":1694182866,"post_id":77067571,"comment_id":135862010,"body_markdown":"I&#39;ve tried with all the values of the attribute &quot;scaleType&quot; but nothing works","body":"I&#39;ve tried with all the values of the attribute &quot;scaleType&quot; but nothing works"}],"tags":[],"owner":{"account_id":17620595,"reputation":55,"user_id":12786651,"display_name":"Rafael Diaz"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694181669,"creation_date":1694181669,"answer_id":77067571,"question_id":77067514,"body_markdown":"Try changing android:scaleType=&quot;centerCrop&quot; to android:scaleType=&quot;fitCenter&quot;","title":"image is cropped inside the image view","body":"<p>Try changing android:scaleType=&quot;centerCrop&quot; to android:scaleType=&quot;fitCenter&quot;</p>\n"},{"tags":[],"owner":{"account_id":2714969,"reputation":5858,"user_id":2342558,"accept_rate":67,"display_name":"user2342558"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694184272,"creation_date":1694184272,"answer_id":77067851,"question_id":77067514,"body_markdown":"According to your screenshot, ImageView has rounded corners:\r\n[![enter image description here][1]][1]\r\n\r\nSo I assume there is another code affecting that view which causes cropping and rounded corners.\r\n\r\n  [1]: https://i.stack.imgur.com/4Yy6l.png","title":"image is cropped inside the image view","body":"<p>According to your screenshot, ImageView has rounded corners:\n<a href=\"https://i.stack.imgur.com/4Yy6l.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4Yy6l.png\" alt=\"enter image description here\" /></a></p>\n<p>So I assume there is another code affecting that view which causes cropping and rounded corners.</p>\n"}],"owner":{"account_id":29257311,"reputation":21,"user_id":22415222,"display_name":"Arianna Garaglia"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1694184272,"creation_date":1694181208,"question_id":77067514,"body_markdown":"I&#39;m trying to load an image into an image view: \r\n[![enter image description here](https://i.stack.imgur.com/nDTu7.jpg)](https://i.stack.imgur.com/nDTu7.jpg)\r\n\r\nbut the image is cropped inside the image view:\r\n\r\n[![enter image description here](https://i.stack.imgur.com/6S9kD.jpg)](https://i.stack.imgur.com/6S9kD.jpg)\r\n```\r\n &lt;ImageView\r\n    android:layout_width=&quot;wrap_content&quot;\r\n    android:layout_height=&quot;wrap_content&quot;\r\n    android:layout_marginTop=&quot;30dp&quot;\r\n    android:layout_marginBottom=&quot;10dp&quot;\r\n    android:gravity=&quot;center&quot;\r\n    android:scaleType=&quot;centerCrop&quot;\r\n    android:src=&quot;@mipmap/icona_animal_app&quot; /&gt;\r\n```\r\n\r\n\r\nwhy does this thing happen? how can i solve?","title":"image is cropped inside the image view","body":"<p>I'm trying to load an image into an image view:\n<a href=\"https://i.stack.imgur.com/nDTu7.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nDTu7.jpg\" alt=\"enter image description here\" /></a></p>\n<p>but the image is cropped inside the image view:</p>\n<p><a href=\"https://i.stack.imgur.com/6S9kD.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6S9kD.jpg\" alt=\"enter image description here\" /></a></p>\n<pre><code> &lt;ImageView\n    android:layout_width=&quot;wrap_content&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:layout_marginTop=&quot;30dp&quot;\n    android:layout_marginBottom=&quot;10dp&quot;\n    android:gravity=&quot;center&quot;\n    android:scaleType=&quot;centerCrop&quot;\n    android:src=&quot;@mipmap/icona_animal_app&quot; /&gt;\n</code></pre>\n<p>why does this thing happen? how can i solve?</p>\n"},{"tags":["java","spring","spring-batch"],"owner":{"account_id":29396098,"reputation":1,"user_id":22523414,"display_name":"sman_steel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694184255,"creation_date":1694184255,"question_id":77067848,"body_markdown":"I get this trace when i run the code below : \r\n```\r\n2023-09-08T16:32:38.217+02:00 ERROR 26472 --- [   scheduling-1] o.s.batch.core.step.AbstractStep         : Encountered an error executing step step in job job\r\n\r\njava.lang.IllegalStateException: Existing transaction detected in JobRepository. Please fix this and try again (e.g. remove @Transactional annotations from client).\r\n\tat org.springframework.batch.core.repository.support.AbstractJobRepositoryFactoryBean.lambda$getObject$0(AbstractJobRepositoryFactoryBean.java:201) ~[spring-batch-core-5.0.3.jar:5.0.3]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:244) ~[spring-aop-6.0.11.jar:6.0.11]\r\n\tat jdk.proxy2/jdk.proxy2.$Proxy73.createJobExecution(Unknown Source) ~[na:na]\r\n\tat org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:145) ~[spring-batch-core-5.0.3.jar:5.0.3]\r\n\tat org.springframework.batch.core.launch.support.TaskExecutorJobLauncher.run(TaskExecutorJobLauncher.java:59) ~[spring-batch-core-5.0.3.jar:5.0.3]\r\n\tat com.test.batch.jobConfig$1.execute(jobConfig.java:62) ~[classes/:na]\r\n```\r\n\r\n\r\n```\r\n\r\n    @Autowired\r\n    PlatformTransactionManager mgr;\r\n    @Autowired\r\n    JobRepository jr;\r\n    @Autowired\r\n    ApplicationContext applicationContext;\r\n    @Qualifier(&quot;simpleJobLauncher&quot;)\r\n    @Autowired\r\n    JobLauncher simpleJobLauncher;\r\n@Bean\r\n    public Job job() throws JobInstanceAlreadyCompleteException, JobExecutionAlreadyRunningException, JobParametersInvalidException, JobRestartException {\r\n        return new JobBuilder(&quot;job&quot;, jr)\r\n                .start(new StepBuilder(&quot;step&quot;, jr).tasklet(new Tasklet() {\r\n                    @Override\r\n                    public RepeatStatus execute(StepContribution contribution, ChunkContext chunkContext) throws Exception {\r\n                        System.out.println(&quot;helloJob&quot;);\r\n                        Map&lt;String, Object&gt; beans = applicationContext.getBeansWithAnnotation(Annotation.class);\r\n                        for (Object bean: beans.values()\r\n                        ) {\r\n                            Job jobbean = (Job) bean;\r\n                            JobParameters jp = new JobParametersBuilder()\r\n                                    .addString(&quot;time&quot;, new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss.S&quot;).format(Calendar.getInstance().getTime()))\r\n\r\n                                    .toJobParameters();\r\n                            simpleJobLauncher.run(jobbean, jp);\r\n                        }\r\n                        return null;\r\n                    }\r\n                }, mgr)\r\n                        .build())\r\n                .build();\r\n\r\n    }\r\n```\r\n\r\n```\r\n    @Bean\r\n    public TaskExecutor taskExecutor(){\r\n        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();\r\n        executor.setCorePoolSize(2);\r\n        executor.setMaxPoolSize(2);\r\n        executor.setQueueCapacity(500);\r\n        executor.setThreadNamePrefix(&quot;GithubLookup-&quot;);\r\n        executor.initialize();\r\n        return executor;\r\n    }\r\n\r\n```\r\n```\r\n\r\n    @Bean\r\n    public JobLauncher simpleJobLauncher(JobRepository jr , @Qualifier(&quot;taskExecutor&quot;) TaskExecutor taskExecutor) throws Exception {\r\n        TaskExecutorJobLauncher jobLauncher = new TaskExecutorJobLauncher();\r\n        jobLauncher.setJobRepository(jr);\r\n        jobLauncher.setTaskExecutor(taskExecutor);\r\n        jobLauncher.afterPropertiesSet();\r\n        return jobLauncher;\r\n    }\r\n```\r\n\r\n\r\n\r\nI have tried to lauch it with a separate JobLauncher, with a new TaskExecutor, and so on, maybe i missed something. And i don&#39;t use @Transactional at all.\r\n\r\nMaybe i don&#39;t have the right use of the jobs, if this is the case, please enlighten me\r\n\r\n\r\nVersions tried : \r\nJava 17 &amp; 20\r\nSpring : 3.1.3\r\nIn any case thank you for your time ","title":"Spring Batch : Existing transaction detected in JobRepository","body":"<p>I get this trace when i run the code below :</p>\n<pre><code>2023-09-08T16:32:38.217+02:00 ERROR 26472 --- [   scheduling-1] o.s.batch.core.step.AbstractStep         : Encountered an error executing step step in job job\n\njava.lang.IllegalStateException: Existing transaction detected in JobRepository. Please fix this and try again (e.g. remove @Transactional annotations from client).\n    at org.springframework.batch.core.repository.support.AbstractJobRepositoryFactoryBean.lambda$getObject$0(AbstractJobRepositoryFactoryBean.java:201) ~[spring-batch-core-5.0.3.jar:5.0.3]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:244) ~[spring-aop-6.0.11.jar:6.0.11]\n    at jdk.proxy2/jdk.proxy2.$Proxy73.createJobExecution(Unknown Source) ~[na:na]\n    at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:145) ~[spring-batch-core-5.0.3.jar:5.0.3]\n    at org.springframework.batch.core.launch.support.TaskExecutorJobLauncher.run(TaskExecutorJobLauncher.java:59) ~[spring-batch-core-5.0.3.jar:5.0.3]\n    at com.test.batch.jobConfig$1.execute(jobConfig.java:62) ~[classes/:na]\n</code></pre>\n<pre><code>\n    @Autowired\n    PlatformTransactionManager mgr;\n    @Autowired\n    JobRepository jr;\n    @Autowired\n    ApplicationContext applicationContext;\n    @Qualifier(&quot;simpleJobLauncher&quot;)\n    @Autowired\n    JobLauncher simpleJobLauncher;\n@Bean\n    public Job job() throws JobInstanceAlreadyCompleteException, JobExecutionAlreadyRunningException, JobParametersInvalidException, JobRestartException {\n        return new JobBuilder(&quot;job&quot;, jr)\n                .start(new StepBuilder(&quot;step&quot;, jr).tasklet(new Tasklet() {\n                    @Override\n                    public RepeatStatus execute(StepContribution contribution, ChunkContext chunkContext) throws Exception {\n                        System.out.println(&quot;helloJob&quot;);\n                        Map&lt;String, Object&gt; beans = applicationContext.getBeansWithAnnotation(Annotation.class);\n                        for (Object bean: beans.values()\n                        ) {\n                            Job jobbean = (Job) bean;\n                            JobParameters jp = new JobParametersBuilder()\n                                    .addString(&quot;time&quot;, new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss.S&quot;).format(Calendar.getInstance().getTime()))\n\n                                    .toJobParameters();\n                            simpleJobLauncher.run(jobbean, jp);\n                        }\n                        return null;\n                    }\n                }, mgr)\n                        .build())\n                .build();\n\n    }\n</code></pre>\n<pre><code>    @Bean\n    public TaskExecutor taskExecutor(){\n        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();\n        executor.setCorePoolSize(2);\n        executor.setMaxPoolSize(2);\n        executor.setQueueCapacity(500);\n        executor.setThreadNamePrefix(&quot;GithubLookup-&quot;);\n        executor.initialize();\n        return executor;\n    }\n\n</code></pre>\n<pre><code>\n    @Bean\n    public JobLauncher simpleJobLauncher(JobRepository jr , @Qualifier(&quot;taskExecutor&quot;) TaskExecutor taskExecutor) throws Exception {\n        TaskExecutorJobLauncher jobLauncher = new TaskExecutorJobLauncher();\n        jobLauncher.setJobRepository(jr);\n        jobLauncher.setTaskExecutor(taskExecutor);\n        jobLauncher.afterPropertiesSet();\n        return jobLauncher;\n    }\n</code></pre>\n<p>I have tried to lauch it with a separate JobLauncher, with a new TaskExecutor, and so on, maybe i missed something. And i don't use @Transactional at all.</p>\n<p>Maybe i don't have the right use of the jobs, if this is the case, please enlighten me</p>\n<p>Versions tried :\nJava 17 &amp; 20\nSpring : 3.1.3\nIn any case thank you for your time</p>\n"},{"tags":["java","spring-boot","docker-compose","docker-registry"],"answers":[{"comments":[{"owner":{"account_id":19411240,"reputation":1,"user_id":14195624,"display_name":"Badmus Sodiq"},"score":0,"creation_date":1694270258,"post_id":77067847,"comment_id":135870861,"body_markdown":"Yeah i did, For all the clients","body":"Yeah i did, For all the clients"},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1694286748,"post_id":77067847,"comment_id":135872481,"body_markdown":"how is it was ? Could you solve it ?","body":"how is it was ? Could you solve it ?"}],"tags":[],"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694184251,"creation_date":1694184251,"answer_id":77067847,"question_id":77067771,"body_markdown":"Have you tried to add `defaultZone`  to `eureka.client` config yet ? I mean something like this:\r\n\r\n    eureka:\r\n      client:\r\n        register-with-eureka: false\r\n        fetch-registry: false\r\n        service-url:\r\n          defaultZone: http://localhost:8761/eureka\r\n      instance:\r\n        hostname: localhost\r\n\r\n","title":"I am trying to register an instance of a service to a discovery server and getting this error below","body":"<p>Have you tried to add <code>defaultZone</code>  to <code>eureka.client</code> config yet ? I mean something like this:</p>\n<pre><code>eureka:\n  client:\n    register-with-eureka: false\n    fetch-registry: false\n    service-url:\n      defaultZone: http://localhost:8761/eureka\n  instance:\n    hostname: localhost\n</code></pre>\n"}],"owner":{"account_id":19411240,"reputation":1,"user_id":14195624,"display_name":"Badmus Sodiq"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1694184251,"creation_date":1694183592,"question_id":77067771,"body_markdown":"I tried to register an instance of my microservice with eureka discovery server running on docker. The application is running fine but when i try to register an instance, It will register it but will bring this runtime excetpion.... This is my error log... I am confused as it is trying to connect to localhost:8761 which i did not configure in the configuration file.\r\n\r\n\r\n```\r\n2023-09-08 14:31:01 2023-09-08T13:31:01.536Z  INFO 1 --- [nio-9001-exec-2] c.n.e.registry.AbstractInstanceRegistry  : Registered instance API-GATEWAY/479d5ae21d41:api-gateway:9000 with status UP (replication=false)\r\n2023-09-08 14:31:03 2023-09-08T13:31:03.618Z ERROR 1 --- [get_localhost-4] c.n.e.cluster.ReplicationTaskProcessor   : Network level connection to peer localhost; retrying after delay\r\n2023-09-08 14:31:03 \r\n2023-09-08 14:31:03 ***jakarta.ws.rs.ProcessingException: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8761 [localhost/127.0.0.1] failed: Connection refused***\r\n2023-09-08 14:31:03     at org.glassfish.jersey.client.JerseyInvocation$Builder.method(JerseyInvocation.java:439) ~[jersey-client-3.1.3.jar!/:na]\r\n2023-09-08 14:31:03     at org.glassfish.jersey.client.JerseyInvocation$Builder.post(JerseyInvocation.java:345) ~[jersey-client-3.1.3.jar!/:na]\r\n2023-09-08 14:31:03     at com.netflix.eureka.transport.Jersey3ReplicationClient.submitBatchUpdates(Jersey3ReplicationClient.java:116) ~[eureka-core-jersey3-2.0.1.jar!/:2.0.1]\r\n2023-09-08 14:31:03     at com.netflix.eureka.cluster.ReplicationTaskProcessor.process(ReplicationTaskProcessor.java:80) ~[eureka-core-2.0.1.jar!/:2.0.1]\r\n2023-09-08 14:31:03     at com.netflix.eureka.util.batcher.TaskExecutors$BatchWorkerRunnable.run(TaskExecutors.java:190) ~[eureka-core-2.0.1.jar!/:2.0.1]\r\n2023-09-08 14:31:03     at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n2023-09-08 14:31:03 Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8761 [localhost/127.0.0.1] failed: Connection refused\r\n2023-09-08 14:31:03     at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:159) ~[httpclient-4.5.3.jar!/:4.5.3]\r\n2023-09-08 14:31:03     at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:359) ~[httpclient-4.5.3.jar!/:4.5.3]\r\n2023-09-08 14:31:03     at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:381) ~[httpclient-4.5.3.jar!/:4.5.3]\r\n2023-09-08 14:31:03     at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:237) ~[httpclient-4.5.3.jar!/:4.5.3]\r\n2023-09-08 14:31:03     at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:185) ~[httpclient-4.5.3.jar!/:4.5.3]\r\n2023-09-08 14:31:03     at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89) ~[httpclient-4.5.3.jar!/:4.5.3]\r\n2023-09-08 14:31:03     at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:111) ~[httpclient-4.5.3.jar!/:4.5.3]\r\n2023-09-08 14:31:13     at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n2023-09-08 14:31:13 Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8761 [localhost/127.0.0.1] failed: Connection refused\r\n2023-09-08 14:31:13     at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:159) ~[httpclient-4.5.3.jar!/:4.5.3]\r\n2023-09-08 14:31:13     at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:359) ~[httpclient-4.5.3.jar!/:4.5.3]\r\n2023-09-08 14:31:13     at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:381) ~[httpclient-4.5.3.jar!/:4.5.3]\r\n2023-09-08 14:31:13     at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:237) ~[httpclient-4.5.3.jar!/:4.5.3]\r\n2023-09-08 14:31:13     at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:185) ~org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:381) ~[httpclient-4.5.3.jar!/:4.5.3]\r\n2023-09-08 14:31:23     at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:237) ~[httpclient-4.5.3.jar!/:4.5.3]\r\n2023-09-08 14:31:23     at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:185) ~[httpclient-4.5.3.jar!/:4.5.3]\r\n2023-09-08 14:31:23     at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89) ~[httpclient-4.5.3.jar!/:4.5.3]\r\n2023-09-08 14:31:23     at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:111) ~[httpclient-4.5.3.jar!/:4.5.3]\r\n2023-09-08 14:31:23     at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185) ~[httpclient-4.5.3.jar!/:4.5.3]\r\n2023-09-08 14:31:23     at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72) ~[httpclient-4.5.3.jar!/:4.5.3]\r\n2023-09-08 14:31:23     at org.glassfish.jersey.apache.connector.ApacheConnector.apply(ApacheConnector.java:483) ~[jersey-apache-connector-3.1.3.jar!/:na\r\n2023-09-08 14:31:23 \r\n2023-09-08 14:31:26 2023-09-08T13:31:26.682Z  INFO 1 --- [a-EvictionTimer] c.n.e.registry.AbstractInstanceRegistry  : Running the evict task with compensationTime 98ms\r\n2023-09-08 14:31:33 2023-09-08T13:31:33.757Z ERROR 1 --- [et_localhost-16] c.n.e.cluster.ReplicationTaskProcessor   : Network level connection to peer localhost; retrying after delay\r\n```\r\n```\r\n# Below is the application.yml file for the discovery server\r\nserver:\r\n  port: 9001\r\n\r\n\r\nspring:\r\n  application:\r\n    name: discovery-server\r\n\r\n\r\neureka:\r\n  client:\r\n    register-with-eureka: false\r\n    fetch-registry: false\r\n  instance:\r\n    hostname: localhost\r\n\r\n#spring:\r\n#  zipkin:\r\n#    base-url: http://localhost:9411\r\n#  sleuth:\r\n#    sampler:\r\n#      probability: 1.0\r\n\r\nmanagement:\r\n  tracing:\r\n    sampling:\r\n      probability: 1.0\r\n# Below is the docker compose configuration for discovery server\r\nversion: &#39;3.8&#39;\r\n\r\nservices:\r\n  discovery-service:\r\n    image:  discoveryservice\r\n    container_name: discovery-service\r\n    hostname: discovery-service\r\n    environment:\r\n      EUREKA_INSTANCE_HOSTNAME: discovery-service\r\n    ports:\r\n      - &quot;9001:9001&quot;\r\n    networks:\r\n      - grammercetamol\r\nnetworks:\r\n  grammercetamol:\r\n    name: grammercetamol\r\n    external: true\r\n\r\n# Below is also the application.yml file for api-gateway, the instance i am trying to register to the server\r\nserver:\r\n  port: 9000\r\n\r\neureka:\r\n  client:\r\n    serviceUrl:\r\n      defaultZone: http://localhost:9001/eureka\r\n  instance:\r\n    hostname: localhost\r\n\r\n\r\nspring:\r\n  application:\r\n    name: api-gateway\r\n    http:\r\n      multipart:\r\n        max-file-size: 50MB\r\n        max-request-size: 40\r\n  cloud:\r\n    discovery:\r\n      enabled: true\r\n    gateway:\r\n      routes:\r\n#        Identity service route\r\n        - id: identity-service\r\n          predicates:\r\n            - Path=/api/auth/**\r\n          uri: lb://identity-service\r\n\r\n#        Course service route\r\n        - id: course-service\r\n          predicates:\r\n            - Path=/api/courses/**\r\n          uri: lb://course-service\r\n\r\n#          Video service route\r\n        - id: video-service\r\n          predicates:\r\n            - Path=/api/videos/**\r\n          uri: lb://video-service\r\n\r\n#          cloudinary service route\r\n        - id: cloudinary-service\r\n          predicates:\r\n            - Path=/api/cloudinary/**\r\n          uri: lb://cloudinary-service\r\nlogging:\r\n  level:\r\n    root: INFO\r\n    org:\r\n      springframework:\r\n        cloud:\r\n          gateway: TRACE\r\n          gateway.route.RouteDefinitionLoader: INFO\r\n# The docker compose file for the instance API-GATEWAY\r\nversion: &#39;3.8&#39;\r\n\r\nservices:\r\n  api-gateway:\r\n    image: apigateway\r\n    container_name: api-gateway\r\n    ports:\r\n      - &quot;9000:9000&quot;\r\n    environment:\r\n      EUREKA_CLIENT_SERVICEURL_DEFAULTZONE: http://discovery-service:9001/eureka\r\n      EUREKA_INSTANCE_HOSTNAME: api-gateway\r\n#      - eureka_client_serviceUrl_defaultZone=http://discovery-server:9001/eureka\r\n    networks:\r\n      - grammercetamol\r\nnetworks:\r\n  grammercetamol:\r\n    name: grammercetamol\r\n    external: true\r\n```\r\n","title":"I am trying to register an instance of a service to a discovery server and getting this error below","body":"<p>I tried to register an instance of my microservice with eureka discovery server running on docker. The application is running fine but when i try to register an instance, It will register it but will bring this runtime excetpion.... This is my error log... I am confused as it is trying to connect to localhost:8761 which i did not configure in the configuration file.</p>\n<pre><code>2023-09-08 14:31:01 2023-09-08T13:31:01.536Z  INFO 1 --- [nio-9001-exec-2] c.n.e.registry.AbstractInstanceRegistry  : Registered instance API-GATEWAY/479d5ae21d41:api-gateway:9000 with status UP (replication=false)\n2023-09-08 14:31:03 2023-09-08T13:31:03.618Z ERROR 1 --- [get_localhost-4] c.n.e.cluster.ReplicationTaskProcessor   : Network level connection to peer localhost; retrying after delay\n2023-09-08 14:31:03 \n2023-09-08 14:31:03 ***jakarta.ws.rs.ProcessingException: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8761 [localhost/127.0.0.1] failed: Connection refused***\n2023-09-08 14:31:03     at org.glassfish.jersey.client.JerseyInvocation$Builder.method(JerseyInvocation.java:439) ~[jersey-client-3.1.3.jar!/:na]\n2023-09-08 14:31:03     at org.glassfish.jersey.client.JerseyInvocation$Builder.post(JerseyInvocation.java:345) ~[jersey-client-3.1.3.jar!/:na]\n2023-09-08 14:31:03     at com.netflix.eureka.transport.Jersey3ReplicationClient.submitBatchUpdates(Jersey3ReplicationClient.java:116) ~[eureka-core-jersey3-2.0.1.jar!/:2.0.1]\n2023-09-08 14:31:03     at com.netflix.eureka.cluster.ReplicationTaskProcessor.process(ReplicationTaskProcessor.java:80) ~[eureka-core-2.0.1.jar!/:2.0.1]\n2023-09-08 14:31:03     at com.netflix.eureka.util.batcher.TaskExecutors$BatchWorkerRunnable.run(TaskExecutors.java:190) ~[eureka-core-2.0.1.jar!/:2.0.1]\n2023-09-08 14:31:03     at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n2023-09-08 14:31:03 Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8761 [localhost/127.0.0.1] failed: Connection refused\n2023-09-08 14:31:03     at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:159) ~[httpclient-4.5.3.jar!/:4.5.3]\n2023-09-08 14:31:03     at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:359) ~[httpclient-4.5.3.jar!/:4.5.3]\n2023-09-08 14:31:03     at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:381) ~[httpclient-4.5.3.jar!/:4.5.3]\n2023-09-08 14:31:03     at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:237) ~[httpclient-4.5.3.jar!/:4.5.3]\n2023-09-08 14:31:03     at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:185) ~[httpclient-4.5.3.jar!/:4.5.3]\n2023-09-08 14:31:03     at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89) ~[httpclient-4.5.3.jar!/:4.5.3]\n2023-09-08 14:31:03     at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:111) ~[httpclient-4.5.3.jar!/:4.5.3]\n2023-09-08 14:31:13     at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n2023-09-08 14:31:13 Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8761 [localhost/127.0.0.1] failed: Connection refused\n2023-09-08 14:31:13     at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:159) ~[httpclient-4.5.3.jar!/:4.5.3]\n2023-09-08 14:31:13     at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:359) ~[httpclient-4.5.3.jar!/:4.5.3]\n2023-09-08 14:31:13     at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:381) ~[httpclient-4.5.3.jar!/:4.5.3]\n2023-09-08 14:31:13     at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:237) ~[httpclient-4.5.3.jar!/:4.5.3]\n2023-09-08 14:31:13     at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:185) ~org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:381) ~[httpclient-4.5.3.jar!/:4.5.3]\n2023-09-08 14:31:23     at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:237) ~[httpclient-4.5.3.jar!/:4.5.3]\n2023-09-08 14:31:23     at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:185) ~[httpclient-4.5.3.jar!/:4.5.3]\n2023-09-08 14:31:23     at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89) ~[httpclient-4.5.3.jar!/:4.5.3]\n2023-09-08 14:31:23     at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:111) ~[httpclient-4.5.3.jar!/:4.5.3]\n2023-09-08 14:31:23     at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185) ~[httpclient-4.5.3.jar!/:4.5.3]\n2023-09-08 14:31:23     at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72) ~[httpclient-4.5.3.jar!/:4.5.3]\n2023-09-08 14:31:23     at org.glassfish.jersey.apache.connector.ApacheConnector.apply(ApacheConnector.java:483) ~[jersey-apache-connector-3.1.3.jar!/:na\n2023-09-08 14:31:23 \n2023-09-08 14:31:26 2023-09-08T13:31:26.682Z  INFO 1 --- [a-EvictionTimer] c.n.e.registry.AbstractInstanceRegistry  : Running the evict task with compensationTime 98ms\n2023-09-08 14:31:33 2023-09-08T13:31:33.757Z ERROR 1 --- [et_localhost-16] c.n.e.cluster.ReplicationTaskProcessor   : Network level connection to peer localhost; retrying after delay\n</code></pre>\n<pre><code># Below is the application.yml file for the discovery server\nserver:\n  port: 9001\n\n\nspring:\n  application:\n    name: discovery-server\n\n\neureka:\n  client:\n    register-with-eureka: false\n    fetch-registry: false\n  instance:\n    hostname: localhost\n\n#spring:\n#  zipkin:\n#    base-url: http://localhost:9411\n#  sleuth:\n#    sampler:\n#      probability: 1.0\n\nmanagement:\n  tracing:\n    sampling:\n      probability: 1.0\n# Below is the docker compose configuration for discovery server\nversion: '3.8'\n\nservices:\n  discovery-service:\n    image:  discoveryservice\n    container_name: discovery-service\n    hostname: discovery-service\n    environment:\n      EUREKA_INSTANCE_HOSTNAME: discovery-service\n    ports:\n      - &quot;9001:9001&quot;\n    networks:\n      - grammercetamol\nnetworks:\n  grammercetamol:\n    name: grammercetamol\n    external: true\n\n# Below is also the application.yml file for api-gateway, the instance i am trying to register to the server\nserver:\n  port: 9000\n\neureka:\n  client:\n    serviceUrl:\n      defaultZone: http://localhost:9001/eureka\n  instance:\n    hostname: localhost\n\n\nspring:\n  application:\n    name: api-gateway\n    http:\n      multipart:\n        max-file-size: 50MB\n        max-request-size: 40\n  cloud:\n    discovery:\n      enabled: true\n    gateway:\n      routes:\n#        Identity service route\n        - id: identity-service\n          predicates:\n            - Path=/api/auth/**\n          uri: lb://identity-service\n\n#        Course service route\n        - id: course-service\n          predicates:\n            - Path=/api/courses/**\n          uri: lb://course-service\n\n#          Video service route\n        - id: video-service\n          predicates:\n            - Path=/api/videos/**\n          uri: lb://video-service\n\n#          cloudinary service route\n        - id: cloudinary-service\n          predicates:\n            - Path=/api/cloudinary/**\n          uri: lb://cloudinary-service\nlogging:\n  level:\n    root: INFO\n    org:\n      springframework:\n        cloud:\n          gateway: TRACE\n          gateway.route.RouteDefinitionLoader: INFO\n# The docker compose file for the instance API-GATEWAY\nversion: '3.8'\n\nservices:\n  api-gateway:\n    image: apigateway\n    container_name: api-gateway\n    ports:\n      - &quot;9000:9000&quot;\n    environment:\n      EUREKA_CLIENT_SERVICEURL_DEFAULTZONE: http://discovery-service:9001/eureka\n      EUREKA_INSTANCE_HOSTNAME: api-gateway\n#      - eureka_client_serviceUrl_defaultZone=http://discovery-server:9001/eureka\n    networks:\n      - grammercetamol\nnetworks:\n  grammercetamol:\n    name: grammercetamol\n    external: true\n</code></pre>\n"},{"tags":["java","spring","spring-3","content-disposition"],"answers":[{"comments":[{"owner":{"account_id":20956,"reputation":40587,"user_id":50543,"display_name":"Julian Reschke"},"score":5,"creation_date":1394177188,"post_id":22243867,"comment_id":33780954,"body_markdown":"But note that this will break if the filename contains non &quot;token&quot; characters, such as whitespace, non-ASCII, and certain delimiters.","body":"But note that this will break if the filename contains non &quot;token&quot; characters, such as whitespace, non-ASCII, and certain delimiters."},{"owner":{"account_id":1579401,"reputation":2072,"user_id":1465080,"display_name":"Matthew.Lothian"},"score":10,"creation_date":1421035717,"post_id":22243867,"comment_id":44191328,"body_markdown":"short answer `response.setHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=&quot; + YOUR_FILE_NAME);`","body":"short answer <code>response.setHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=&quot; + YOUR_FILE_NAME);</code>"},{"owner":{"account_id":1762718,"reputation":14037,"user_id":1609356,"accept_rate":90,"display_name":"Manu343726"},"score":5,"creation_date":1422370036,"post_id":22243867,"comment_id":44715481,"body_markdown":"Avoid code-only answers. Provide some explanations about the snippet!","body":"Avoid code-only answers. Provide some explanations about the snippet!"},{"owner":{"account_id":1781418,"reputation":1399,"user_id":1624052,"accept_rate":92,"display_name":"Dan Torrey"},"score":0,"creation_date":1463282291,"post_id":22243867,"comment_id":61997748,"body_markdown":"I like this simple approach. Worked for my project.","body":"I like this simple approach. Worked for my project."},{"owner":{"account_id":2650647,"reputation":1354,"user_id":3514976,"accept_rate":71,"display_name":"nonzaprej"},"score":2,"creation_date":1487064848,"post_id":22243867,"comment_id":71604874,"body_markdown":"put the file name between double quotes `&quot;`.","body":"put the file name between double quotes <code>&quot;</code>."},{"owner":{"account_id":443548,"reputation":7984,"user_id":834833,"display_name":"Philippe Plantier"},"score":5,"creation_date":1491980819,"post_id":22243867,"comment_id":73786960,"body_markdown":"Beware, if the filename is not properly sanitized, this solution can lead to an easy cross-site-scripting attack!","body":"Beware, if the filename is not properly sanitized, this solution can lead to an easy cross-site-scripting attack!"},{"owner":{"account_id":1815257,"reputation":181,"user_id":1650473,"display_name":"jazd"},"score":0,"creation_date":1609888843,"post_id":22243867,"comment_id":115962021,"body_markdown":"As mentioned by @PhilippePlantier you should escape the filename - https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/ContentDisposition.Builder.html","body":"As mentioned by @PhilippePlantier you should escape the filename - <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/ContentDisposition.Builder.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-framework/docs/current/javadoc-api/org&zwnj;&#8203;/&hellip;</a>"}],"tags":[],"owner":{"account_id":2572266,"reputation":1270,"user_id":2230661,"display_name":"Hassan Jamil"},"comment_count":7,"down_vote_count":3,"up_vote_count":60,"is_accepted":true,"score":57,"last_activity_date":1394176521,"creation_date":1394176521,"answer_id":22243867,"question_id":16601428,"body_markdown":"\t@RequestMapping(value = &quot;/action/{abcd}/{efgh}&quot;, method = RequestMethod.GET)\r\n\t@PreAuthorize(&quot;@authorizationService.authorizeMethod(#id)&quot;)\r\n\tpublic HttpEntity&lt;byte[]&gt; doAction(@PathVariable ObjectType obj, @PathVariable Date date, HttpServletResponse response) throws IOException {\r\n\t\tZipFileType zipFile = service.getFile(obj1.getId(), date);\r\n\r\n\t\tHttpHeaders headers = new HttpHeaders();\r\n\t\theaders.setContentType(MediaType.APPLICATION_OCTET_STREAM);\r\n\t\tresponse.setHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=&quot; + zipFile.getFileName());\r\n\r\n\t\treturn new HttpEntity&lt;byte[]&gt;(zipFile.getByteArray(), headers);\r\n\t}","title":"How to set &#39;Content-Disposition&#39; and &#39;Filename&#39; when using FileSystemResource to force a file download file?","body":"<pre><code>@RequestMapping(value = \"/action/{abcd}/{efgh}\", method = RequestMethod.GET)\n@PreAuthorize(\"@authorizationService.authorizeMethod(#id)\")\npublic HttpEntity&lt;byte[]&gt; doAction(@PathVariable ObjectType obj, @PathVariable Date date, HttpServletResponse response) throws IOException {\n    ZipFileType zipFile = service.getFile(obj1.getId(), date);\n\n    HttpHeaders headers = new HttpHeaders();\n    headers.setContentType(MediaType.APPLICATION_OCTET_STREAM);\n    response.setHeader(\"Content-Disposition\", \"attachment; filename=\" + zipFile.getFileName());\n\n    return new HttpEntity&lt;byte[]&gt;(zipFile.getByteArray(), headers);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4708698,"reputation":1254,"user_id":3809938,"accept_rate":44,"display_name":"user3809938"},"score":0,"creation_date":1482812867,"post_id":35093411,"comment_id":69880589,"body_markdown":"what exactly is this method returning? what is myService?","body":"what exactly is this method returning? what is myService?"},{"owner":{"account_id":1298380,"reputation":898,"user_id":1248817,"accept_rate":83,"display_name":"Mattiavelli"},"score":0,"creation_date":1504205289,"post_id":35093411,"comment_id":78936552,"body_markdown":"@user3809938 the constructor for FileSystemResource can take a `File` or `String` for the path","body":"@user3809938 the constructor for FileSystemResource can take a <code>File</code> or <code>String</code> for the path"}],"tags":[],"owner":{"account_id":4728579,"reputation":877,"user_id":3824815,"display_name":"Kumar"},"comment_count":2,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1504266521,"creation_date":1454099096,"answer_id":35093411,"question_id":16601428,"body_markdown":"  \r\n\r\n \r\n\r\n     @RequestMapping(value = &quot;/files/{file_name}&quot;, method = RequestMethod.GET)\r\n        @ResponseBody\r\n        public FileSystemResource getFile(@PathVariable(&quot;file_name&quot;) String fileName,HttpServletResponse response) {\r\n            response.setContentType(&quot;application/pdf&quot;);      \r\n            response.setHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=somefile.pdf&quot;); \r\n            return new FileSystemResource(new File(&quot;file full path&quot;)); \r\n        }","title":"How to set &#39;Content-Disposition&#39; and &#39;Filename&#39; when using FileSystemResource to force a file download file?","body":"<pre><code> @RequestMapping(value = \"/files/{file_name}\", method = RequestMethod.GET)\n    @ResponseBody\n    public FileSystemResource getFile(@PathVariable(\"file_name\") String fileName,HttpServletResponse response) {\n        response.setContentType(\"application/pdf\");      \n        response.setHeader(\"Content-Disposition\", \"attachment; filename=somefile.pdf\"); \n        return new FileSystemResource(new File(\"file full path\")); \n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":313626,"reputation":1356,"user_id":628371,"display_name":"Joachim Lous"},"score":0,"creation_date":1694158569,"post_id":46754991,"comment_id":135857249,"body_markdown":"This should be the preferred way nowadays. Less state is always better.","body":"This should be the preferred way nowadays. Less state is always better."},{"owner":{"account_id":313626,"reputation":1356,"user_id":628371,"display_name":"Joachim Lous"},"score":1,"creation_date":1694158859,"post_id":46754991,"comment_id":135857306,"body_markdown":"Niggle: BodyBuilder.contentType, at least per Spring 5, takes a full MediaType as argument (e.g. APPLICATION_OCTET_STREAM), not a String (e.g. APPLICATION_OCTET_STREAM_VALUE)","body":"Niggle: BodyBuilder.contentType, at least per Spring 5, takes a full MediaType as argument (e.g. APPLICATION_OCTET_STREAM), not a String (e.g. APPLICATION_OCTET_STREAM_VALUE)"},{"owner":{"account_id":2369743,"reputation":7285,"user_id":2074605,"accept_rate":100,"display_name":"Parker"},"score":0,"creation_date":1694183720,"post_id":46754991,"comment_id":135862166,"body_markdown":"@JoachimLous Thank you, I&#39;ve added this as a comment to the code.","body":"@JoachimLous Thank you, I&#39;ve added this as a comment to the code."}],"tags":[],"owner":{"account_id":2369743,"reputation":7285,"user_id":2074605,"accept_rate":100,"display_name":"Parker"},"comment_count":3,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1694183699,"creation_date":1508070159,"answer_id":46754991,"question_id":16601428,"body_markdown":"Here is an alternative approach for Spring 4. Note that this example clearly does not use good practices regarding filesystem access, this is just to demonstrate how some properties can be set declaratively.\r\n\r\n    @RequestMapping(value = &quot;/{resourceIdentifier}&quot;, method = RequestMethod.GET, produces = MediaType.APPLICATION_OCTET_STREAM_VALUE)\r\n    // @ResponseBody // Needed for @Controller but not for @RestController.\r\n    public ResponseEntity&lt;InputStreamResource&gt; download(@PathVariable(name = &quot;resourceIdentifier&quot;) final String filename) throws Exception\r\n    {\r\n        final String resourceName = filename + &quot;.dat&quot;;\r\n        final File iFile = new File(&quot;/some/folder&quot;, resourceName);\r\n        final long resourceLength = iFile.length();\r\n        final long lastModified = iFile.lastModified();\r\n        final InputStream resource = new FileInputStream(iFile);\r\n\r\n        return ResponseEntity.ok()\r\n                .header(&quot;Content-Disposition&quot;, &quot;attachment; filename=&quot; + resourceName)\r\n                .contentLength(resourceLength)\r\n                .lastModified(lastModified)\r\n                .contentType(MediaType.APPLICATION_OCTET_STREAM_VALUE) // For Spring 5: APPLICATION_OCTET_STREAM\r\n                .body(resource);\r\n    }","title":"How to set &#39;Content-Disposition&#39; and &#39;Filename&#39; when using FileSystemResource to force a file download file?","body":"<p>Here is an alternative approach for Spring 4. Note that this example clearly does not use good practices regarding filesystem access, this is just to demonstrate how some properties can be set declaratively.</p>\n<pre><code>@RequestMapping(value = &quot;/{resourceIdentifier}&quot;, method = RequestMethod.GET, produces = MediaType.APPLICATION_OCTET_STREAM_VALUE)\n// @ResponseBody // Needed for @Controller but not for @RestController.\npublic ResponseEntity&lt;InputStreamResource&gt; download(@PathVariable(name = &quot;resourceIdentifier&quot;) final String filename) throws Exception\n{\n    final String resourceName = filename + &quot;.dat&quot;;\n    final File iFile = new File(&quot;/some/folder&quot;, resourceName);\n    final long resourceLength = iFile.length();\n    final long lastModified = iFile.lastModified();\n    final InputStream resource = new FileInputStream(iFile);\n\n    return ResponseEntity.ok()\n            .header(&quot;Content-Disposition&quot;, &quot;attachment; filename=&quot; + resourceName)\n            .contentLength(resourceLength)\n            .lastModified(lastModified)\n            .contentType(MediaType.APPLICATION_OCTET_STREAM_VALUE) // For Spring 5: APPLICATION_OCTET_STREAM\n            .body(resource);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3761296,"reputation":131,"user_id":3126202,"display_name":"Fahad Alkamli"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1522536941,"creation_date":1522536941,"answer_id":49593207,"question_id":16601428,"body_markdown":"Made few changes to both given answers and I ended up with the best of both in my project where I needed to extract an image from the database as a blob and then serve it to the clients :\r\n\r\n    @GetMapping(&quot;/images/{imageId:.+}&quot;)\r\n    @ResponseBody\r\n    public ResponseEntity&lt;FileSystemResource&gt;  serveFile(@PathVariable @Valid String imageId,HttpServletResponse response)\r\n    {\t\t\r\n    \tImageEntity singleImageInfo=db.storage.StorageService.getImage(imageId);\r\n    \tif(singleImageInfo==null)\r\n    \t{\r\n    \t\treturn ResponseEntity.status(HttpStatus.NOT_FOUND).body(null);\r\n    \t}\r\n    \tBlob image=singleImageInfo.getImage();\r\n        try {        \t\r\n        \tString filename= UsersExtra.GenerateSession()+&quot;xxyy&quot;+singleImageInfo.getImage1Ext().trim();\r\n        \t\r\n        byte [] array = image.getBytes( 1, ( int ) image.length() );\r\n        File file = File.createTempFile(UsersExtra.GenerateSession()+&quot;xxyy&quot;, singleImageInfo.getImage1Ext().trim(), new File(&quot;.&quot;));\r\n        FileOutputStream out = new FileOutputStream( file );\r\n        out.write( array );\r\n        out.close();\r\n    \tFileSystemResource testing=new FileSystemResource(file);\r\n    \t\r\n    \tString mimeType = &quot;image/&quot;+singleImageInfo.getImage1Ext().trim().toLowerCase().replace(&quot;.&quot;, &quot;&quot;);\r\n\t\t  response.setContentType(mimeType);    \r\n\r\n\t        String headerKey = &quot;Content-Disposition&quot;;\r\n           String headerValue = String.format(&quot;attachment; filename=\\&quot;%s\\&quot;&quot;, filename);\r\n           response.setHeader(headerKey, headerValue);\r\n          // return new FileSystemResource(file); \r\n           return ResponseEntity.status(HttpStatus.OK).body( new FileSystemResource(file));\r\n        }catch(Exception e)\r\n        {\r\n        \tSystem.out.println(e.getMessage());\r\n        }\r\n\t\treturn null;\r\n    }\r\n\r\nUsing a ResponseEntity in Kumar&#39;s code will help you respond with  the correct Response code.\r\nNote: converting from a blob to a file is quoted from this link: \r\nhttps://stackoverflow.com/questions/1076972/snippet-to-create-a-file-from-the-contents-of-a-blob-in-java\r\n","title":"How to set &#39;Content-Disposition&#39; and &#39;Filename&#39; when using FileSystemResource to force a file download file?","body":"<p>Made few changes to both given answers and I ended up with the best of both in my project where I needed to extract an image from the database as a blob and then serve it to the clients :</p>\n\n<pre><code>@GetMapping(\"/images/{imageId:.+}\")\n@ResponseBody\npublic ResponseEntity&lt;FileSystemResource&gt;  serveFile(@PathVariable @Valid String imageId,HttpServletResponse response)\n{       \n    ImageEntity singleImageInfo=db.storage.StorageService.getImage(imageId);\n    if(singleImageInfo==null)\n    {\n        return ResponseEntity.status(HttpStatus.NOT_FOUND).body(null);\n    }\n    Blob image=singleImageInfo.getImage();\n    try {           \n        String filename= UsersExtra.GenerateSession()+\"xxyy\"+singleImageInfo.getImage1Ext().trim();\n\n    byte [] array = image.getBytes( 1, ( int ) image.length() );\n    File file = File.createTempFile(UsersExtra.GenerateSession()+\"xxyy\", singleImageInfo.getImage1Ext().trim(), new File(\".\"));\n    FileOutputStream out = new FileOutputStream( file );\n    out.write( array );\n    out.close();\n    FileSystemResource testing=new FileSystemResource(file);\n\n    String mimeType = \"image/\"+singleImageInfo.getImage1Ext().trim().toLowerCase().replace(\".\", \"\");\n      response.setContentType(mimeType);    \n\n        String headerKey = \"Content-Disposition\";\n       String headerValue = String.format(\"attachment; filename=\\\"%s\\\"\", filename);\n       response.setHeader(headerKey, headerValue);\n      // return new FileSystemResource(file); \n       return ResponseEntity.status(HttpStatus.OK).body( new FileSystemResource(file));\n    }catch(Exception e)\n    {\n        System.out.println(e.getMessage());\n    }\n    return null;\n}\n</code></pre>\n\n<p>Using a ResponseEntity in Kumar's code will help you respond with  the correct Response code.\nNote: converting from a blob to a file is quoted from this link: \n<a href=\"https://stackoverflow.com/questions/1076972/snippet-to-create-a-file-from-the-contents-of-a-blob-in-java\">Snippet to create a file from the contents of a blob in Java</a></p>\n"},{"comments":[{"owner":{"account_id":2637728,"reputation":503,"user_id":2282010,"display_name":"Gareth"},"score":0,"creation_date":1579019924,"post_id":53857047,"comment_id":105625018,"body_markdown":"Interestingly until very recently the ContentDisposition class only encoded the filename when the charset was specified as non-US-ASCII: https://github.com/spring-projects/spring-framework/issues/24220","body":"Interestingly until very recently the ContentDisposition class only encoded the filename when the charset was specified as non-US-ASCII: <a href=\"https://github.com/spring-projects/spring-framework/issues/24220\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-framework/issues/24220</a>"},{"owner":{"account_id":187950,"reputation":2035,"user_id":426371,"accept_rate":82,"display_name":"neXus"},"score":10,"creation_date":1587028343,"post_id":53857047,"comment_id":108349481,"body_markdown":"If you have to build a `HttpServletResponse` or a `ResponseEntity` using their builder, you can still use the `ContentDisposition` class to generate the header String for you: `response.setHeader(HttpHeaders.CONTENT_DISPOSITION, contentDisposition.toString());` It will take care of escaping the necessary characters.","body":"If you have to build a <code>HttpServletResponse</code> or a <code>ResponseEntity</code> using their builder, you can still use the <code>ContentDisposition</code> class to generate the header String for you: <code>response.setHeader(HttpHeaders.CONTENT_DISPOSITION, contentDisposition.toString());</code> It will take care of escaping the necessary characters."},{"owner":{"account_id":8571795,"reputation":342,"user_id":6422400,"display_name":"Milosz Tylenda"},"score":1,"creation_date":1666170921,"post_id":53857047,"comment_id":130870144,"body_markdown":"Starting from Spring 5.3, you can use `ContentDisposition.inline()` or `ContentDisposition.attachment()` instead of `ContentDisposition.builder(&quot;inline&quot;)`.","body":"Starting from Spring 5.3, you can use <code>ContentDisposition.inline()</code> or <code>ContentDisposition.attachment()</code> instead of <code>ContentDisposition.builder(&quot;inline&quot;)</code>."}],"tags":[],"owner":{"account_id":3269240,"reputation":5236,"user_id":2752969,"display_name":"Jefferson Lima"},"comment_count":3,"down_vote_count":0,"up_vote_count":73,"is_accepted":false,"score":73,"last_activity_date":1545243353,"creation_date":1545243353,"answer_id":53857047,"question_id":16601428,"body_markdown":"In addition to the accepted answer, Spring has the class [ContentDisposition](https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/http/ContentDisposition.html) specific for this purpose. I believe it deals with the file name sanitization.\r\n  \r\n          ContentDisposition contentDisposition = ContentDisposition.builder(&quot;inline&quot;)\r\n              .filename(&quot;Filename&quot;)\r\n              .build();\r\n    \r\n          HttpHeaders headers = new HttpHeaders();\r\n          headers.setContentDisposition(contentDisposition);\r\n  ","title":"How to set &#39;Content-Disposition&#39; and &#39;Filename&#39; when using FileSystemResource to force a file download file?","body":"<p>In addition to the accepted answer, Spring has the class <a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/http/ContentDisposition.html\" rel=\"noreferrer\">ContentDisposition</a> specific for this purpose. I believe it deals with the file name sanitization.</p>\n\n<pre><code>      ContentDisposition contentDisposition = ContentDisposition.builder(\"inline\")\n          .filename(\"Filename\")\n          .build();\n\n      HttpHeaders headers = new HttpHeaders();\n      headers.setContentDisposition(contentDisposition);\n</code></pre>\n"}],"owner":{"account_id":2572266,"reputation":1270,"user_id":2230661,"display_name":"Hassan Jamil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":136393,"favorite_count":0,"down_vote_count":0,"up_vote_count":59,"accepted_answer_id":22243867,"answer_count":5,"score":59,"last_activity_date":1694183699,"creation_date":1368764970,"question_id":16601428,"body_markdown":"What is the most appropriate, and standard, way to set the `Content-Disposition=attachment` and `filename=xyz.zip` using Spring 3 `FileSystemResource`?\r\n\r\nThe action looks like :\r\n\r\n\t@ResponseBody\r\n\t@RequestMapping(value = &quot;/action/{abcd}/{efgh}&quot;, method = RequestMethod.GET, produces = &quot;application/zip&quot;)\r\n\t@PreAuthorize(&quot;@authorizationService.authorizeMethod()&quot;)\r\n\tpublic FileSystemResource doAction(@PathVariable String abcd, @PathVariable String efgh) {\r\n\r\n\t\tFile zipFile = service.getFile(abcd, efgh);\r\n\r\n\t\treturn new FileSystemResource(zipFile);\r\n\t}\r\n\r\n\r\nAlthough the file is a zip file so the browser always downloads the file, but I would like to explicitly mention the file as attachment, and also provide a filename that has nothing to do with the files actual name.\r\n\r\nThere might be workarounds for this problem, but I would like to know the proper Spring and `FileSystemResource` way to achieve this goal.\r\n\r\nP.S. The file that is being used here is a temporary file, marked for deletion when the JVM exists.\r\n","title":"How to set &#39;Content-Disposition&#39; and &#39;Filename&#39; when using FileSystemResource to force a file download file?","body":"<p>What is the most appropriate, and standard, way to set the <code>Content-Disposition=attachment</code> and <code>filename=xyz.zip</code> using Spring 3 <code>FileSystemResource</code>?</p>\n\n<p>The action looks like :</p>\n\n<pre><code>@ResponseBody\n@RequestMapping(value = \"/action/{abcd}/{efgh}\", method = RequestMethod.GET, produces = \"application/zip\")\n@PreAuthorize(\"@authorizationService.authorizeMethod()\")\npublic FileSystemResource doAction(@PathVariable String abcd, @PathVariable String efgh) {\n\n    File zipFile = service.getFile(abcd, efgh);\n\n    return new FileSystemResource(zipFile);\n}\n</code></pre>\n\n<p>Although the file is a zip file so the browser always downloads the file, but I would like to explicitly mention the file as attachment, and also provide a filename that has nothing to do with the files actual name.</p>\n\n<p>There might be workarounds for this problem, but I would like to know the proper Spring and <code>FileSystemResource</code> way to achieve this goal.</p>\n\n<p>P.S. The file that is being used here is a temporary file, marked for deletion when the JVM exists.</p>\n"},{"tags":["java","hibernate","spring-boot","spring-data-jpa","hikaricp"],"comments":[{"owner":{"account_id":4118097,"reputation":5672,"user_id":3379182,"display_name":"Matteo Baldi"},"score":0,"creation_date":1551178988,"post_id":54883940,"comment_id":96536961,"body_markdown":"Well, at least you&#39;re not constantly leaking connections (or you&#39;ll be missing the Previously reported leaked connection com.mysql.jdbc.JDBC4Connection@ffd3737 on thread http-nio-80-exec-8 was returned to the pool (unleaked) log row). Which version of Hikari CP are you using?","body":"Well, at least you&#39;re not constantly leaking connections (or you&#39;ll be missing the Previously reported leaked connection com.mysql.jdbc.JDBC4Connection@ffd3737 on thread http-nio-80-exec-8 was returned to the pool (unleaked) log row). Which version of Hikari CP are you using?"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":5,"creation_date":1551179090,"post_id":54883940,"comment_id":96537028,"body_markdown":"How long does it take to execute the method? If it is longer then 2seconds Hikari will log this warning (as that is what you confiugred it to do.","body":"How long does it take to execute the method? If it is longer then 2seconds Hikari will log this warning (as that is what you confiugred it to do."},{"owner":{"account_id":7344529,"reputation":642,"user_id":5592727,"display_name":"mario"},"score":0,"creation_date":1551182479,"post_id":54883940,"comment_id":96539048,"body_markdown":"@MatteoBaldi HikariCP 2.7.9","body":"@MatteoBaldi HikariCP 2.7.9"}],"answers":[{"comments":[{"owner":{"account_id":3503406,"reputation":10887,"user_id":2929562,"accept_rate":88,"display_name":"Prateek"},"score":3,"creation_date":1593084605,"post_id":54886801,"comment_id":110658800,"body_markdown":"I am still getting the same error even if I set \n\n```hikariConfig.setMaxLifetime(300000);\n\t\thikariConfig.setLeakDetectionThreshold(60 * 5000);\n\t\thikariConfig.setConnectionTimeout(120 * 1000);```\n```","body":"I am still getting the same error even if I set   <code>hikariConfig.setMaxLifetime(300000); \t\thikariConfig.setLeakDetectionThreshold(60 * 5000); \t\thikariConfig.setConnectionTimeout(120 * 1000);</code> ```"},{"owner":{"account_id":4118097,"reputation":5672,"user_id":3379182,"display_name":"Matteo Baldi"},"score":4,"creation_date":1593110700,"post_id":54886801,"comment_id":110673300,"body_markdown":"It depends on the query time... have you tried running it directly on a SQL client to check the time?","body":"It depends on the query time... have you tried running it directly on a SQL client to check the time?"},{"owner":{"account_id":3503406,"reputation":10887,"user_id":2929562,"accept_rate":88,"display_name":"Prateek"},"score":0,"creation_date":1593110793,"post_id":54886801,"comment_id":110673346,"body_markdown":"If I used this query over SQLDeveloeper, it only takes 25 secs, almost 20 batch jobs are already running, is that causing because of that ? Its happening in few batch jobs.","body":"If I used this query over SQLDeveloeper, it only takes 25 secs, almost 20 batch jobs are already running, is that causing because of that ? Its happening in few batch jobs."},{"owner":{"account_id":4118097,"reputation":5672,"user_id":3379182,"display_name":"Matteo Baldi"},"score":0,"creation_date":1593112364,"post_id":54886801,"comment_id":110674068,"body_markdown":"Well, all those jobs share the same connection pool? Have you tried tuning its size?","body":"Well, all those jobs share the same connection pool? Have you tried tuning its size?"},{"owner":{"account_id":3503406,"reputation":10887,"user_id":2929562,"accept_rate":88,"display_name":"Prateek"},"score":0,"creation_date":1593112921,"post_id":54886801,"comment_id":110674313,"body_markdown":"Yes I played almost 2 days on the combination, I kept connectionPoolSize = 100 and adjusted other parameters as suggested, but not seem to be working for me","body":"Yes I played almost 2 days on the combination, I kept connectionPoolSize = 100 and adjusted other parameters as suggested, but not seem to be working for me"},{"owner":{"account_id":890726,"reputation":1799,"user_id":929059,"accept_rate":13,"display_name":"Mihir Shah"},"score":0,"creation_date":1594881475,"post_id":54886801,"comment_id":111282809,"body_markdown":"Hi @Pra_A.. Any solution? i am also getting same error.. I have connection pool size 100, and after few seconds.. getting error connection not available.. when multiple user uses app same time","body":"Hi @Pra_A.. Any solution? i am also getting same error.. I have connection pool size 100, and after few seconds.. getting error connection not available.. when multiple user uses app same time"},{"owner":{"account_id":3503406,"reputation":10887,"user_id":2929562,"accept_rate":88,"display_name":"Prateek"},"score":0,"creation_date":1594905959,"post_id":54886801,"comment_id":111295379,"body_markdown":"Nope, still struggling, its more of in the Hikari Core it seem to me.","body":"Nope, still struggling, its more of in the Hikari Core it seem to me."},{"owner":{"account_id":890726,"reputation":1799,"user_id":929059,"accept_rate":13,"display_name":"Mihir Shah"},"score":0,"creation_date":1595368801,"post_id":54886801,"comment_id":111449462,"body_markdown":"@Pra_A, have you tried replacing Hikari with JDBC connection pool?","body":"@Pra_A, have you tried replacing Hikari with JDBC connection pool?"},{"owner":{"account_id":3503406,"reputation":10887,"user_id":2929562,"accept_rate":88,"display_name":"Prateek"},"score":0,"creation_date":1595416642,"post_id":54886801,"comment_id":111465253,"body_markdown":"@MihirShah - Nope, I&#39;ve not. I must need to use Hikari, because common DB modules have used across other 10 modules of Spring Batch Job, I dont want to affect them, Any further suggestions ?","body":"@MihirShah - Nope, I&#39;ve not. I must need to use Hikari, because common DB modules have used across other 10 modules of Spring Batch Job, I dont want to affect them, Any further suggestions ?"},{"owner":{"account_id":890726,"reputation":1799,"user_id":929059,"accept_rate":13,"display_name":"Mihir Shah"},"score":2,"creation_date":1595420684,"post_id":54886801,"comment_id":111467296,"body_markdown":"@Pra_A, even I am facing same issue here. have app where spike is expacted frequently, and around 10K parallel Apis. but have checked my DB, not a single slow query.. even database CPU is just 30% utilised in peak time.. still hikari throws apparant slow connection detected issue.. and active connection immediately goes to 200 from 2 and server hangs.. and need to restart every time..","body":"@Pra_A, even I am facing same issue here. have app where spike is expacted frequently, and around 10K parallel Apis. but have checked my DB, not a single slow query.. even database CPU is just 30% utilised in peak time.. still hikari throws apparant slow connection detected issue.. and active connection immediately goes to 200 from 2 and server hangs.. and need to restart every time.."},{"owner":{"account_id":1668101,"reputation":108,"user_id":1535127,"display_name":"AlexMakarov"},"score":0,"creation_date":1608899032,"post_id":54886801,"comment_id":115709061,"body_markdown":"I guess it is related to https://github.com/brettwooldridge/HikariCP/issues/1209","body":"I guess it is related to <a href=\"https://github.com/brettwooldridge/HikariCP/issues/1209\" rel=\"nofollow noreferrer\">github.com/brettwooldridge/HikariCP/issues/1209</a>"},{"owner":{"account_id":1668101,"reputation":108,"user_id":1535127,"display_name":"AlexMakarov"},"score":2,"creation_date":1608986129,"post_id":54886801,"comment_id":115723762,"body_markdown":"Eventually fixed it for myself with removing JobRepositoryFactoryBean from Spring Batch initialization at all (make DAO-s manually). Because AbstractJobRepositoryFactoryBean.initializeProxy() makes a lot of black magic which contradicted with my use case.","body":"Eventually fixed it for myself with removing JobRepositoryFactoryBean from Spring Batch initialization at all (make DAO-s manually). Because AbstractJobRepositoryFactoryBean.initializeProxy() makes a lot of black magic which contradicted with my use case."},{"owner":{"account_id":9544154,"reputation":404,"user_id":7090937,"display_name":"Ish"},"score":0,"creation_date":1655380423,"post_id":54886801,"comment_id":128321672,"body_markdown":"Increasing the value of ` hikari.leakDetectionThreshold` property fixed my issue. Thanks","body":"Increasing the value of ` hikari.leakDetectionThreshold` property fixed my issue. Thanks"},{"owner":{"account_id":1611959,"reputation":3349,"user_id":1490636,"display_name":"Maksim Kostromin"},"score":0,"creation_date":1657798475,"post_id":54886801,"comment_id":128898711,"body_markdown":"@AlexMakarov can you please share little bit more details about yor fix? Looks like we have exact same issue... Thanks!","body":"@AlexMakarov can you please share little bit more details about yor fix? Looks like we have exact same issue... Thanks!"},{"owner":{"account_id":1668101,"reputation":108,"user_id":1535127,"display_name":"AlexMakarov"},"score":1,"creation_date":1658131254,"post_id":54886801,"comment_id":128965343,"body_markdown":"@MaksimKostromin - 2 years past. Only found comment in code (it is under NDA): Don&#39;t add @ EnableBatchProcessing to Spring components ... it would lead to inability to save data from other repositories. Like &quot;findAll&quot; works but any &quot;save&quot; will do nothing in RDS. It is because Spring Batch AbstractJobRepositoryFactoryBean (used by DefaultBatchConfigurer) wraps all work with repository into ProxyFactory and puts TransactionInterceptor which works strange. See https://stackoverflow.com/a/56327165/1535127 for details - note that solution won&#39;t work for our product with RDS-backed persistence.","body":"@MaksimKostromin - 2 years past. Only found comment in code (it is under NDA): Don&#39;t add @ EnableBatchProcessing to Spring components ... it would lead to inability to save data from other repositories. Like &quot;findAll&quot; works but any &quot;save&quot; will do nothing in RDS. It is because Spring Batch AbstractJobRepositoryFactoryBean (used by DefaultBatchConfigurer) wraps all work with repository into ProxyFactory and puts TransactionInterceptor which works strange. See <a href=\"https://stackoverflow.com/a/56327165/1535127\">stackoverflow.com/a/56327165/1535127</a> for details - note that solution won&#39;t work for our product with RDS-backed persistence."},{"owner":{"account_id":1611959,"reputation":3349,"user_id":1490636,"display_name":"Maksim Kostromin"},"score":0,"creation_date":1658388492,"post_id":54886801,"comment_id":129040135,"body_markdown":"@AlexMakarov found this part in documentation: https://docs.spring.io/spring-batch/docs/current/reference/html/transaction-appendix.html Looks like we should be very careful and use existing spring batch transactional context by maximum...","body":"@AlexMakarov found this part in documentation: <a href=\"https://docs.spring.io/spring-batch/docs/current/reference/html/transaction-appendix.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-batch/docs/current/reference/html/&hellip;</a> Looks like we should be very careful and use existing spring batch transactional context by maximum..."},{"owner":{"account_id":1668101,"reputation":108,"user_id":1535127,"display_name":"AlexMakarov"},"score":0,"creation_date":1658479220,"post_id":54886801,"comment_id":129066099,"body_markdown":"@MaksimKostromin In general I agree with your point. But in defense of code under this comment I may say that it is working without any known issues 2 years already. And sorry that I don&#39;t remember exact answer on your question.","body":"@MaksimKostromin In general I agree with your point. But in defense of code under this comment I may say that it is working without any known issues 2 years already. And sorry that I don&#39;t remember exact answer on your question."}],"tags":[],"owner":{"account_id":4118097,"reputation":5672,"user_id":3379182,"display_name":"Matteo Baldi"},"comment_count":17,"down_vote_count":2,"up_vote_count":27,"is_accepted":true,"score":25,"last_activity_date":1551188318,"creation_date":1551188318,"answer_id":54886801,"question_id":54883940,"body_markdown":"You&#39;re using a recent version of Hikari CP and the connection leak resolves by itself (as visible in your logs). As noted by *@M. Deinum* the issue can be caused in a low value of `hikari.leakDetectionThreshold` property (your &quot;in&quot; query can take much more than 2 seconds). Try to increase it to 60000, then do some tuning based on your response time. ","title":"Apparent connection leak detected with Hikari CP","body":"<p>You're using a recent version of Hikari CP and the connection leak resolves by itself (as visible in your logs). As noted by <em>@M. Deinum</em> the issue can be caused in a low value of <code>hikari.leakDetectionThreshold</code> property (your \"in\" query can take much more than 2 seconds). Try to increase it to 60000, then do some tuning based on your response time. </p>\n"},{"tags":[],"owner":{"account_id":14600060,"reputation":1104,"user_id":10544569,"display_name":"IndustryUser1942"},"comment_count":0,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1657222941,"creation_date":1657222941,"answer_id":72903406,"question_id":54883940,"body_markdown":"    # in spring boot\r\n    spring.datasource.hikari.leak-detection-threshold=60000\r\n","title":"Apparent connection leak detected with Hikari CP","body":"<pre><code># in spring boot\nspring.datasource.hikari.leak-detection-threshold=60000\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15974948,"reputation":127,"user_id":11528102,"display_name":"Mevl&#252;t Beder"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1694183540,"creation_date":1694182856,"answer_id":77067686,"question_id":54883940,"body_markdown":"This error occurs if the maxLifetime time exceeds the leak-detection-threshold time.\r\n\r\n***Failed Example***\r\n\r\n    spring.datasource.hikari.maxLifetime=40000\r\n    spring.datasource.hikari.leak-detection-threshold=30000\r\n\r\n***Works Fine Example***\r\n\r\n    spring.datasource.hikari.maxLifetime=30000\r\n    spring.datasource.hikari.leak-detection-threshold=40000\r\n\r\n","title":"Apparent connection leak detected with Hikari CP","body":"<p>This error occurs if the maxLifetime time exceeds the leak-detection-threshold time.</p>\n<p><em><strong>Failed Example</strong></em></p>\n<pre><code>spring.datasource.hikari.maxLifetime=40000\nspring.datasource.hikari.leak-detection-threshold=30000\n</code></pre>\n<p><em><strong>Works Fine Example</strong></em></p>\n<pre><code>spring.datasource.hikari.maxLifetime=30000\nspring.datasource.hikari.leak-detection-threshold=40000\n</code></pre>\n"}],"owner":{"account_id":7344529,"reputation":642,"user_id":5592727,"display_name":"mario"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":123787,"favorite_count":0,"down_vote_count":0,"up_vote_count":32,"accepted_answer_id":54886801,"answer_count":3,"score":32,"last_activity_date":1694183540,"creation_date":1551178712,"question_id":54883940,"body_markdown":"When using native sql operator **IN** i get exception. Although it throws an exception, it still works as it was intended, but the exception in the logs is a bit annoying. I think it has something to do with the **IN** operator.\r\n\r\n    @Query(&quot;select c from Contact c where c.id in :ids&quot;)\r\n    List&lt;Contact&gt; findByContactsIds(@Param(&quot;ids&quot;) List&lt;Integer&gt; contactsIds);\r\n\r\nconfig:\r\n\r\n    spring.datasource.hikari.max-lifetime=900000\r\n    spring.datasource.hikari.leakDetectionThreshold=2000\r\n    spring.datasource.hikari.idle-timeout=900000\r\n\r\nexception:\r\n\r\n    2019-02-26 11:25:16.252  WARN 924 --- [l-1 housekeeper] com.zaxxer.hikari.pool.ProxyLeakTask     : Connection leak detection triggered for com.mysql.jdbc.JDBC4Connection@ffd3737 on thread http-nio-80-exec-8, stack trace follows\r\n    \r\n    java.lang.Exception: Apparent connection leak detected\r\n    \tat com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128) ~[HikariCP-2.7.9.jar:na]\r\n    \tat org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\r\n    \tat org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:35) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\r\n    \tat org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:106) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\r\n    \tat org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:136) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\r\n    \tat org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:254) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\r\n    \tat org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:262) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\r\n    \tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:214) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\r\n    \tat org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:56) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\r\n    \tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:162) ~[spring-orm-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:400) ~[spring-orm-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:378) ~[spring-tx-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:474) ~[spring-tx-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:289) ~[spring-tx-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98) ~[spring-tx-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185) ~[spring-aop-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139) ~[spring-tx-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185) ~[spring-aop-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135) ~[spring-data-jpa-2.0.10.RELEASE.jar:2.0.10.RELEASE]\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185) ~[spring-aop-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:92) ~[spring-aop-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185) ~[spring-aop-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.data.repository.core.support.SurroundingTransactionDetectorMethodInterceptor.invoke(SurroundingTransactionDetectorMethodInterceptor.java:61) ~[spring-data-commons-2.0.10.RELEASE.jar:2.0.10.RELEASE]\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185) ~[spring-aop-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212) ~[spring-aop-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat com.sun.proxy.$Proxy134.findByContactsIds(Unknown Source) ~[na:na]\r\n    \tat enera.handbook.controller.PassesController.generatePassesPdf(PassesController.java:71) ~[classes/:na]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_144]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_144]\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_144]\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_144]\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:974) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:877) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:661) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:851) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:742) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52) ~[tomcat-embed-websocket-8.5.34.jar:8.5.34]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:200) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:66) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:357) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:270) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:109) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:800) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:806) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1498) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[na:1.8.0_144]\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[na:1.8.0_144]\r\n    \tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat java.lang.Thread.run(Thread.java:748) [na:1.8.0_144]\r\n    \r\n    2019-02-26 11:25:34.741 DEBUG 924 --- [l-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Pool stats (total=10, active=1, idle=9, waiting=0)\r\n    2019-02-26 11:25:35.024  INFO 924 --- [p-nio-80-exec-8] com.zaxxer.hikari.pool.ProxyLeakTask     : Previously reported leaked connection com.mysql.jdbc.JDBC4Connection@ffd3737 on thread http-nio-80-exec-8 was returned to the pool (unleaked)\r\n\r\nWhy do I have to think all the time what to write so that the validator misses me\r\n","title":"Apparent connection leak detected with Hikari CP","body":"<p>When using native sql operator <strong>IN</strong> i get exception. Although it throws an exception, it still works as it was intended, but the exception in the logs is a bit annoying. I think it has something to do with the <strong>IN</strong> operator.</p>\n\n<pre><code>@Query(\"select c from Contact c where c.id in :ids\")\nList&lt;Contact&gt; findByContactsIds(@Param(\"ids\") List&lt;Integer&gt; contactsIds);\n</code></pre>\n\n<p>config:</p>\n\n<pre><code>spring.datasource.hikari.max-lifetime=900000\nspring.datasource.hikari.leakDetectionThreshold=2000\nspring.datasource.hikari.idle-timeout=900000\n</code></pre>\n\n<p>exception:</p>\n\n<pre><code>2019-02-26 11:25:16.252  WARN 924 --- [l-1 housekeeper] com.zaxxer.hikari.pool.ProxyLeakTask     : Connection leak detection triggered for com.mysql.jdbc.JDBC4Connection@ffd3737 on thread http-nio-80-exec-8, stack trace follows\n\njava.lang.Exception: Apparent connection leak detected\n    at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128) ~[HikariCP-2.7.9.jar:na]\n    at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\n    at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:35) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\n    at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:106) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\n    at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:136) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\n    at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:254) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\n    at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:262) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\n    at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:214) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\n    at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:56) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\n    at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:162) ~[spring-orm-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:400) ~[spring-orm-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:378) ~[spring-tx-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:474) ~[spring-tx-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:289) ~[spring-tx-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98) ~[spring-tx-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185) ~[spring-aop-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139) ~[spring-tx-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185) ~[spring-aop-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135) ~[spring-data-jpa-2.0.10.RELEASE.jar:2.0.10.RELEASE]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185) ~[spring-aop-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:92) ~[spring-aop-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185) ~[spring-aop-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.data.repository.core.support.SurroundingTransactionDetectorMethodInterceptor.invoke(SurroundingTransactionDetectorMethodInterceptor.java:61) ~[spring-data-commons-2.0.10.RELEASE.jar:2.0.10.RELEASE]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185) ~[spring-aop-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212) ~[spring-aop-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at com.sun.proxy.$Proxy134.findByContactsIds(Unknown Source) ~[na:na]\n    at enera.handbook.controller.PassesController.generatePassesPdf(PassesController.java:71) ~[classes/:na]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_144]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_144]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_144]\n    at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_144]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:974) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:877) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:661) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:851) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:742) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52) ~[tomcat-embed-websocket-8.5.34.jar:8.5.34]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:200) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:66) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:357) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:270) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:109) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:800) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:806) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1498) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[na:1.8.0_144]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[na:1.8.0_144]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at java.lang.Thread.run(Thread.java:748) [na:1.8.0_144]\n\n2019-02-26 11:25:34.741 DEBUG 924 --- [l-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Pool stats (total=10, active=1, idle=9, waiting=0)\n2019-02-26 11:25:35.024  INFO 924 --- [p-nio-80-exec-8] com.zaxxer.hikari.pool.ProxyLeakTask     : Previously reported leaked connection com.mysql.jdbc.JDBC4Connection@ffd3737 on thread http-nio-80-exec-8 was returned to the pool (unleaked)\n</code></pre>\n\n<p>Why do I have to think all the time what to write so that the validator misses me</p>\n"},{"tags":["java","swing","jframe","embedding"],"comments":[{"owner":{"account_id":231518,"reputation":32297,"user_id":495796,"accept_rate":79,"display_name":"Robin Green"},"score":1,"creation_date":1389556026,"post_id":21076086,"comment_id":31703754,"body_markdown":"How does your question differ from the previous one you linked to? If it&#39;s the same question, you can put a bounty on it to get more attention to it. If you have enough reputation.","body":"How does your question differ from the previous one you linked to? If it&#39;s the same question, you can put a bounty on it to get more attention to it. If you have enough reputation."},{"owner":{"account_id":27028764,"reputation":561,"user_id":20585541,"display_name":"Ben the Coder"},"score":0,"creation_date":1681050865,"post_id":21076086,"comment_id":133993452,"body_markdown":"What do you mean by *&quot;a native window&quot;*?","body":"What do you mean by <i>&quot;a native window&quot;</i>?"}],"answers":[{"comments":[{"owner":{"account_id":793512,"reputation":788,"user_id":900699,"accept_rate":17,"display_name":"Graham Seed"},"score":0,"creation_date":1694272086,"post_id":77067720,"comment_id":135871064,"body_markdown":"I see my original post was Jan 2014. Thank, but I couldn&#39;t wait 9 years.","body":"I see my original post was Jan 2014. Thank, but I couldn&#39;t wait 9 years."},{"owner":{"account_id":278315,"reputation":11589,"user_id":572834,"display_name":"Alexey Ivanov"},"score":0,"creation_date":1694356733,"post_id":77067720,"comment_id":135877629,"body_markdown":"@GrahamSeed It was still unanswered. I understand my answer doesn&#39;t bring much value to you. Yet it may be helpful to someone else researching the subject.","body":"@GrahamSeed It was still unanswered. I understand my answer doesn&#39;t bring much value to you. Yet it may be helpful to someone else researching the subject."}],"tags":[],"owner":{"account_id":278315,"reputation":11589,"user_id":572834,"display_name":"Alexey Ivanov"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694183153,"creation_date":1694183153,"answer_id":77067720,"question_id":21076086,"body_markdown":"I can only repeat [the answer][1] given in another question: **This is not supported**.\r\n\r\nUsing Windows APIs, you can add a window into a `HWND` of `JFrame`, `Panel` (not `JPanel`!) or `Canvas`. Yet Java will never know you did it, it could break many assumptions inside AWT code.\r\n\r\nEven when you write a native Win32 app, you can&#39;t embed an arbitrary window into your top-level window. If the window you want to embed is a top-level window, it may not play well when it&#39;s made a child window of another window because, again, the assumptions are now wrong, some messages are handled differently.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/6525367/572834","title":"Embedding a native window inside a JFrame","body":"<p>I can only repeat <a href=\"https://stackoverflow.com/a/6525367/572834\">the answer</a> given in another question: <strong>This is not supported</strong>.</p>\n<p>Using Windows APIs, you can add a window into a <code>HWND</code> of <code>JFrame</code>, <code>Panel</code> (not <code>JPanel</code>!) or <code>Canvas</code>. Yet Java will never know you did it, it could break many assumptions inside AWT code.</p>\n<p>Even when you write a native Win32 app, you can't embed an arbitrary window into your top-level window. If the window you want to embed is a top-level window, it may not play well when it's made a child window of another window because, again, the assumptions are now wrong, some messages are handled differently.</p>\n"}],"owner":{"account_id":793512,"reputation":788,"user_id":900699,"accept_rate":17,"display_name":"Graham Seed"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2548,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"answer_count":1,"score":11,"last_activity_date":1694183153,"creation_date":1389538603,"question_id":21076086,"body_markdown":"Does anyone know of a method or API that supports embedding a native window inside either a Java JFrame or JPanel?\r\n\r\nI found this previous post:\r\n\r\nhttps://stackoverflow.com/questions/6524727/how-do-i-run-an-external-program-inside-a-java-frame-in-netbeans-in-a-platform-i\r\n\r\nI can get the window handle using:\r\n\r\nhttp://www.java-forums.org/advanced-java/44064-getting-window-id-window-frame.html\r\n\r\nand this works fine.\r\n\r\nThis article appears to suggest that it&#39;s possible, but does not illustrate how:\r\n\r\nhttps://stackoverflow.com/questions/4809713/embed-hwnd-window-handle-in-a-jpanel\r\n\r\n","title":"Embedding a native window inside a JFrame","body":"<p>Does anyone know of a method or API that supports embedding a native window inside either a Java JFrame or JPanel?</p>\n\n<p>I found this previous post:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/6524727/how-do-i-run-an-external-program-inside-a-java-frame-in-netbeans-in-a-platform-i\">How do I run an external program inside a Java frame in netbeans in a platform independent manner?</a></p>\n\n<p>I can get the window handle using:</p>\n\n<p><a href=\"http://www.java-forums.org/advanced-java/44064-getting-window-id-window-frame.html\" rel=\"noreferrer\">http://www.java-forums.org/advanced-java/44064-getting-window-id-window-frame.html</a></p>\n\n<p>and this works fine.</p>\n\n<p>This article appears to suggest that it's possible, but does not illustrate how:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/4809713/embed-hwnd-window-handle-in-a-jpanel\">Embed HWND (Window Handle) in a JPanel</a></p>\n"},{"tags":["java","spring-webflux","resilience4j"],"comments":[{"owner":{"account_id":10346755,"reputation":21971,"user_id":7631480,"display_name":"CryptoFool"},"score":0,"creation_date":1603595106,"post_id":64519894,"comment_id":114085386,"body_markdown":"Are you sure the client is having to retry?  How do you know?","body":"Are you sure the client is having to retry?  How do you know?"}],"answers":[{"comments":[{"owner":{"account_id":14482834,"reputation":3924,"user_id":10461625,"display_name":"PatPanda"},"score":1,"creation_date":1603596345,"post_id":64519971,"comment_id":114085540,"body_markdown":"How about annotation based please?","body":"How about annotation based please?"},{"owner":{"account_id":10346755,"reputation":21971,"user_id":7631480,"display_name":"CryptoFool"},"score":0,"creation_date":1603597314,"post_id":64519971,"comment_id":114085657,"body_markdown":"The @Retry annotation itself only takes a &#39;name&#39; parameter.  I Googled some more, and while I see lots of info on both setting up retry and adding logging, I never see them together.","body":"The @Retry annotation itself only takes a &#39;name&#39; parameter.  I Googled some more, and while I see lots of info on both setting up retry and adding logging, I never see them together."},{"owner":{"account_id":14482834,"reputation":3924,"user_id":10461625,"display_name":"PatPanda"},"score":0,"creation_date":1603597582,"post_id":64519971,"comment_id":114085679,"body_markdown":":&#39;( :&#39;( :&#39;( :&#39;(","body":":&#39;( :&#39;( :&#39;( :&#39;("},{"owner":{"account_id":135385,"reputation":1785,"user_id":457589,"display_name":"Julien"},"score":0,"creation_date":1617177670,"post_id":64519971,"comment_id":118228258,"body_markdown":"@PatPatPat use `RetryRegistry`, see my answer","body":"@PatPatPat use <code>RetryRegistry</code>, see my answer"}],"tags":[],"owner":{"account_id":10346755,"reputation":21971,"user_id":7631480,"display_name":"CryptoFool"},"comment_count":4,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1603595479,"creation_date":1603595479,"answer_id":64519971,"question_id":64519894,"body_markdown":"There seems to be a lot of information about this on the web if you Google for &quot;resilience4j retry example logging&quot;.  I found this as a potential solution:\r\n\r\n    RetryConfig config = RetryConfig.ofDefaults();\r\n    RetryRegistry registry = RetryRegistry.of(config);\r\n    Retry retry = registry.retry(&quot;flightSearchService&quot;, config);\r\n\r\n    ...\r\n\r\n    Retry.EventPublisher publisher = retry.getEventPublisher();\r\n    publisher.onRetry(event -&gt; System.out.println(event.toString()));\r\n\r\nwhere you can register a callback to get an event whenever a Retry occurs.  This. came from &quot;https://reflectoring.io/retry-with-resilience4j&quot;.\r\n\r\n","title":"Resilience4j Retry - logging retry attempts from client?","body":"<p>There seems to be a lot of information about this on the web if you Google for &quot;resilience4j retry example logging&quot;.  I found this as a potential solution:</p>\n<pre><code>RetryConfig config = RetryConfig.ofDefaults();\nRetryRegistry registry = RetryRegistry.of(config);\nRetry retry = registry.retry(&quot;flightSearchService&quot;, config);\n\n...\n\nRetry.EventPublisher publisher = retry.getEventPublisher();\npublisher.onRetry(event -&gt; System.out.println(event.toString()));\n</code></pre>\n<p>where you can register a callback to get an event whenever a Retry occurs.  This. came from &quot;https://reflectoring.io/retry-with-resilience4j&quot;.</p>\n"},{"tags":[],"owner":{"account_id":3622573,"reputation":1784,"user_id":5077433,"display_name":"Robert Winkler"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1603713809,"creation_date":1603713809,"answer_id":64536776,"question_id":64519894,"body_markdown":"Fortunately (or unfortunately) there is an undocumented feature :)\r\n\r\nYou can add a RegistryEventConsumer Bean in order to add event consumers to any Retry instance.\r\n\r\n```\r\n    @Bean\r\n    public RegistryEventConsumer&lt;Retry&gt; myRetryRegistryEventConsumer() {\r\n\r\n        return new RegistryEventConsumer&lt;Retry&gt;() {\r\n            @Override\r\n            public void onEntryAddedEvent(EntryAddedEvent&lt;Retry&gt; entryAddedEvent) {\r\n                entryAddedEvent.getAddedEntry().getEventPublisher()\r\n                   .onEvent(event -&gt; LOG.info(event.toString()));\r\n            }\r\n\r\n            @Override\r\n            public void onEntryRemovedEvent(EntryRemovedEvent&lt;Retry&gt; entryRemoveEvent) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onEntryReplacedEvent(EntryReplacedEvent&lt;Retry&gt; entryReplacedEvent) {\r\n\r\n            }\r\n        };\r\n    }\r\n```\r\n\r\nLog entry look as follows:\r\n\r\n```\r\n2020-10-26T13:00:19.807034700+01:00[Europe/Berlin]: Retry &#39;backendA&#39;, waiting PT0.1S until attempt &#39;1&#39;. Last attempt failed with exception &#39;org.springframework.web.client.HttpServerErrorException: 500 This is a remote exception&#39;.\r\n\r\n2020-10-26T13:00:19.912028800+01:00[Europe/Berlin]: Retry &#39;backendA&#39;, waiting PT0.1S until attempt &#39;2&#39;. Last attempt failed with exception &#39;org.springframework.web.client.HttpServerErrorException: 500 This is a remote exception&#39;.\r\n\r\n2020-10-26T13:00:20.023250+01:00[Europe/Berlin]: Retry &#39;backendA&#39; recorded a failed retry attempt. Number of retry attempts: &#39;3&#39;. Giving up. Last exception was: &#39;org.springframework.web.client.HttpServerErrorException: 500 This is a remote exception&#39;.\r\n```","title":"Resilience4j Retry - logging retry attempts from client?","body":"<p>Fortunately (or unfortunately) there is an undocumented feature :)</p>\n<p>You can add a RegistryEventConsumer Bean in order to add event consumers to any Retry instance.</p>\n<pre><code>    @Bean\n    public RegistryEventConsumer&lt;Retry&gt; myRetryRegistryEventConsumer() {\n\n        return new RegistryEventConsumer&lt;Retry&gt;() {\n            @Override\n            public void onEntryAddedEvent(EntryAddedEvent&lt;Retry&gt; entryAddedEvent) {\n                entryAddedEvent.getAddedEntry().getEventPublisher()\n                   .onEvent(event -&gt; LOG.info(event.toString()));\n            }\n\n            @Override\n            public void onEntryRemovedEvent(EntryRemovedEvent&lt;Retry&gt; entryRemoveEvent) {\n\n            }\n\n            @Override\n            public void onEntryReplacedEvent(EntryReplacedEvent&lt;Retry&gt; entryReplacedEvent) {\n\n            }\n        };\n    }\n</code></pre>\n<p>Log entry look as follows:</p>\n<pre><code>2020-10-26T13:00:19.807034700+01:00[Europe/Berlin]: Retry 'backendA', waiting PT0.1S until attempt '1'. Last attempt failed with exception 'org.springframework.web.client.HttpServerErrorException: 500 This is a remote exception'.\n\n2020-10-26T13:00:19.912028800+01:00[Europe/Berlin]: Retry 'backendA', waiting PT0.1S until attempt '2'. Last attempt failed with exception 'org.springframework.web.client.HttpServerErrorException: 500 This is a remote exception'.\n\n2020-10-26T13:00:20.023250+01:00[Europe/Berlin]: Retry 'backendA' recorded a failed retry attempt. Number of retry attempts: '3'. Giving up. Last exception was: 'org.springframework.web.client.HttpServerErrorException: 500 This is a remote exception'.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":135385,"reputation":1785,"user_id":457589,"display_name":"Julien"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1617177603,"creation_date":1617177603,"answer_id":66883879,"question_id":64519894,"body_markdown":"Configured with `application.properties`, and using the `@Retry` annotation, I managed to get some output with\r\n\r\n```\r\nresilience4j.retry.instances.myRetry.maxAttempts=3\r\nresilience4j.retry.instances.myRetry.waitDuration=1s\r\nresilience4j.retry.instances.myRetry.enableExponentialBackoff=true\r\nresilience4j.retry.instances.myRetry.exponentialBackoffMultiplier=2\r\nresilience4j.retry.instances.myRetry.retryExceptions[0]=java.lang.Exception\r\n```\r\n\r\n```java\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\nimport org.springframework.stereotype.Service;\r\nimport io.github.resilience4j.retry.RetryRegistry;\r\nimport io.github.resilience4j.retry.annotation.Retry;\r\n\r\n@Service\r\npublic class MyService {\r\n\tprivate static final Logger LOG = LoggerFactory.getLogger(MyService.class);\r\n\r\n\tpublic MyService(RetryRegistry retryRegistry) {\r\n        // all\r\n        retryRegistry.getAllRetries()\r\n          .forEach(retry -&gt; retry\r\n            .getEventPublisher()\r\n            .onRetry(event -&gt; LOG.info(&quot;{}&quot;, event))\r\n        );\r\n\r\n       // or single\r\n       retryRegistry\r\n\t\t\t.retry(&quot;myRetry&quot;)\r\n\t\t\t.getEventPublisher()\r\n\t\t\t.onRetry(event -&gt; LOG.info(&quot;{}&quot;, event));\r\n\t}\r\n\r\n    @Retry(name = &quot;myRetry&quot;)\r\n    public void doSomething() {\r\n\t\tthrow new RuntimeException(&quot;It failed&quot;);\r\n    }\r\n}\r\n```\r\n\r\neg.\r\n```\r\n2021-03-31T07:42:23 [http-nio-8083-exec-1] INFO  [myService] - 2021-03-31T07:42:23.228892500Z[UTC]: Retry &#39;myRetry&#39;, waiting PT1S until attempt &#39;1&#39;. Last attempt failed with exception &#39;java.lang.RuntimeException: It failed&#39;.\r\n2021-03-31T07:42:24 [http-nio-8083-exec-1] INFO  [myService] - 2021-03-31T07:42:24.231504600Z[UTC]: Retry &#39;myRetry&#39;, waiting PT2S until attempt &#39;2&#39;. Last attempt failed with exception &#39;java.lang.RuntimeException: It failed&#39;.\r\n```","title":"Resilience4j Retry - logging retry attempts from client?","body":"<p>Configured with <code>application.properties</code>, and using the <code>@Retry</code> annotation, I managed to get some output with</p>\n<pre><code>resilience4j.retry.instances.myRetry.maxAttempts=3\nresilience4j.retry.instances.myRetry.waitDuration=1s\nresilience4j.retry.instances.myRetry.enableExponentialBackoff=true\nresilience4j.retry.instances.myRetry.exponentialBackoffMultiplier=2\nresilience4j.retry.instances.myRetry.retryExceptions[0]=java.lang.Exception\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>import org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.stereotype.Service;\nimport io.github.resilience4j.retry.RetryRegistry;\nimport io.github.resilience4j.retry.annotation.Retry;\n\n@Service\npublic class MyService {\n    private static final Logger LOG = LoggerFactory.getLogger(MyService.class);\n\n    public MyService(RetryRegistry retryRegistry) {\n        // all\n        retryRegistry.getAllRetries()\n          .forEach(retry -&gt; retry\n            .getEventPublisher()\n            .onRetry(event -&gt; LOG.info(&quot;{}&quot;, event))\n        );\n\n       // or single\n       retryRegistry\n            .retry(&quot;myRetry&quot;)\n            .getEventPublisher()\n            .onRetry(event -&gt; LOG.info(&quot;{}&quot;, event));\n    }\n\n    @Retry(name = &quot;myRetry&quot;)\n    public void doSomething() {\n        throw new RuntimeException(&quot;It failed&quot;);\n    }\n}\n</code></pre>\n<p>eg.</p>\n<pre><code>2021-03-31T07:42:23 [http-nio-8083-exec-1] INFO  [myService] - 2021-03-31T07:42:23.228892500Z[UTC]: Retry 'myRetry', waiting PT1S until attempt '1'. Last attempt failed with exception 'java.lang.RuntimeException: It failed'.\n2021-03-31T07:42:24 [http-nio-8083-exec-1] INFO  [myService] - 2021-03-31T07:42:24.231504600Z[UTC]: Retry 'myRetry', waiting PT2S until attempt '2'. Last attempt failed with exception 'java.lang.RuntimeException: It failed'.\n</code></pre>\n"}],"owner":{"account_id":14482834,"reputation":3924,"user_id":10461625,"display_name":"PatPanda"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9485,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":64536776,"answer_count":3,"score":6,"last_activity_date":1694182898,"creation_date":1603594593,"question_id":64519894,"body_markdown":"Is it possible to log retries attempts on client side with resilience4j please?\r\n\r\nMaybe via some kind of configuration, or settings.\r\n\r\nCurrently, I am using resilience4j with Spring boot Webflux **annotation based**.\r\n\r\nIt is working great, the project is amazing.\r\n\r\nWhile we put server logs on server side, to see that a same http call has been made due to a retry (we log time, client IP, request ID, etc...) Would I be possible to have client side logs?\r\n\r\nI was expecting to see something like &quot;Resilience4j - client side: 1st attempt failed because of someException, retying with attend number 2. 2nd attempt failed because of someException, retying with attend number 3. 3rd attempt successful!&quot;\r\n\r\nSomething like that. Is there a property, some config, some setup, that can help to do this easily please? Without adding too much boiler code.\r\n\r\n```\r\n@RestController\r\npublic class TestController {\r\n\r\n    private final WebClient webClient;\r\n\r\n    public TestController(WebClient.Builder webClientBuilder) {\r\n        this.webClient = webClientBuilder.baseUrl(&quot;http://localhost:8443/serviceBgreeting&quot;).build();\r\n    }\r\n\r\n    @GetMapping(&quot;/greeting&quot;)\r\n    public Mono&lt;String&gt; greeting() {\r\n        System.out.println(&quot;Greeting method is invoked &quot;);\r\n        return someRestCall();\r\n    }\r\n\r\n    @Retry(name = &quot;greetingRetry&quot;)\r\n    public Mono&lt;String&gt; someRestCall() {\r\n        return this.webClient.get().retrieve().bodyToMono(String.class);\r\n    }\r\n\r\n}\r\n```\r\n\r\nThank you","title":"Resilience4j Retry - logging retry attempts from client?","body":"<p>Is it possible to log retries attempts on client side with resilience4j please?</p>\n<p>Maybe via some kind of configuration, or settings.</p>\n<p>Currently, I am using resilience4j with Spring boot Webflux <strong>annotation based</strong>.</p>\n<p>It is working great, the project is amazing.</p>\n<p>While we put server logs on server side, to see that a same http call has been made due to a retry (we log time, client IP, request ID, etc...) Would I be possible to have client side logs?</p>\n<p>I was expecting to see something like &quot;Resilience4j - client side: 1st attempt failed because of someException, retying with attend number 2. 2nd attempt failed because of someException, retying with attend number 3. 3rd attempt successful!&quot;</p>\n<p>Something like that. Is there a property, some config, some setup, that can help to do this easily please? Without adding too much boiler code.</p>\n<pre><code>@RestController\npublic class TestController {\n\n    private final WebClient webClient;\n\n    public TestController(WebClient.Builder webClientBuilder) {\n        this.webClient = webClientBuilder.baseUrl(&quot;http://localhost:8443/serviceBgreeting&quot;).build();\n    }\n\n    @GetMapping(&quot;/greeting&quot;)\n    public Mono&lt;String&gt; greeting() {\n        System.out.println(&quot;Greeting method is invoked &quot;);\n        return someRestCall();\n    }\n\n    @Retry(name = &quot;greetingRetry&quot;)\n    public Mono&lt;String&gt; someRestCall() {\n        return this.webClient.get().retrieve().bodyToMono(String.class);\n    }\n\n}\n</code></pre>\n<p>Thank you</p>\n"},{"tags":["java","json","methods","parameters","constructor"],"comments":[{"owner":{"account_id":45934,"reputation":203679,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":0,"creation_date":1694182351,"post_id":77067620,"comment_id":135861889,"body_markdown":"It&#39;s called an [annotation](https://docs.oracle.com/javase/tutorial/java/annotations/basics.html). It is information for some tool, like a JSON parser, to work with your code. In this case it indicates to the JSON parser which JSON values need to be bound to which parameters of the constructor of `Thing`.","body":"It&#39;s called an <a href=\"https://docs.oracle.com/javase/tutorial/java/annotations/basics.html\" rel=\"nofollow noreferrer\">annotation</a>. It is information for some tool, like a JSON parser, to work with your code. In this case it indicates to the JSON parser which JSON values need to be bound to which parameters of the constructor of <code>Thing</code>."},{"owner":{"account_id":1297417,"reputation":41873,"user_id":1248114,"accept_rate":66,"display_name":"arkascha"},"score":1,"creation_date":1694182484,"post_id":77067620,"comment_id":135861915,"body_markdown":"This is called an &quot;annotation&quot; in java. Many different types of such annotations exist, you can even implement your own. The idea is to influence the compilation process. This specific annotation _probably_ (depends on where that definition actually is imported from) means that this method can be used to create a value for a json object property. You should be able to pull up the annotations documentation by setting the cursor on it and jumping to its source (implementation) from there (how depends on the IDE you are using, for IntelliJ that would be CTRL-B).","body":"This is called an &quot;annotation&quot; in java. Many different types of such annotations exist, you can even implement your own. The idea is to influence the compilation process. This specific annotation <i>probably</i> (depends on where that definition actually is imported from) means that this method can be used to create a value for a json object property. You should be able to pull up the annotations documentation by setting the cursor on it and jumping to its source (implementation) from there (how depends on the IDE you are using, for IntelliJ that would be CTRL-B)."}],"owner":{"account_id":16955543,"reputation":165,"user_id":12264042,"display_name":"Rikudou"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694182265,"creation_date":1694182205,"question_id":77067620,"body_markdown":"I came across some code that I am trying to analyze. There is a class that has a constructor that looks something like this:\r\n\r\n```\r\npublic Thing(@Json(name = &quot;var1&quot;) String str, @Json(name = &quot;var2&quot;) String str2) {\r\n        this.instanceVar1 = str;\r\n        this.instanceVar2 = str2;\r\n}\r\n```\r\n\r\nI have tried looking it up, but I can&#39;t really find anything that answers the following question:\r\n\r\nWhat does it mean in Java when a function or constructor parameter is preceded by `@Json(name=&quot;something&quot;)`?\r\n\r\nThis reminds me of how form data gets a name property in HTML/JavaScript. Even so, what would a snippet like the code above imply? Would the above code imply that there is a server somewhere, and the `String str` is being sent to that server as JSON data, with the target of this data being some endpoint with the name &quot;var1&quot;?\r\n\r\nAlternatively, does this imply that some server endpoint with the name &quot;var1&quot; is actually the one sending the value of `str` to this constructor?\r\n\r\nPlease help me out with this. ","title":"What does it mean in Java when a method or constructor parameter is preceded by @Json(name=&quot;something&quot;)?","body":"<p>I came across some code that I am trying to analyze. There is a class that has a constructor that looks something like this:</p>\n<pre><code>public Thing(@Json(name = &quot;var1&quot;) String str, @Json(name = &quot;var2&quot;) String str2) {\n        this.instanceVar1 = str;\n        this.instanceVar2 = str2;\n}\n</code></pre>\n<p>I have tried looking it up, but I can't really find anything that answers the following question:</p>\n<p>What does it mean in Java when a function or constructor parameter is preceded by <code>@Json(name=&quot;something&quot;)</code>?</p>\n<p>This reminds me of how form data gets a name property in HTML/JavaScript. Even so, what would a snippet like the code above imply? Would the above code imply that there is a server somewhere, and the <code>String str</code> is being sent to that server as JSON data, with the target of this data being some endpoint with the name &quot;var1&quot;?</p>\n<p>Alternatively, does this imply that some server endpoint with the name &quot;var1&quot; is actually the one sending the value of <code>str</code> to this constructor?</p>\n<p>Please help me out with this.</p>\n"},{"tags":["c#","java","regex","capturing-group","nested-reference"],"comments":[{"owner":{"account_id":102991,"reputation":378292,"user_id":276101,"accept_rate":67,"display_name":"polygenelubricants"},"score":5,"creation_date":1283435083,"post_id":3627681,"comment_id":3810880,"body_markdown":"This series was started by permission of some in the community (http://meta.stackexchange.com/questions/62695/permission-to-start-a-series-of-advanced-regex-articles). If the reception is good, I plan to continue to cover other more advanced as well as more basic features of regex.","body":"This series was started by permission of some in the community (<a href=\"http://meta.stackexchange.com/questions/62695/permission-to-start-a-series-of-advanced-regex-articles\" title=\"permission to start a series of advanced regex articles\">meta.stackexchange.com/questions/62695/&hellip;</a>). If the reception is good, I plan to continue to cover other more advanced as well as more basic features of regex."},{"owner":{"account_id":59511,"reputation":35694,"user_id":178060,"accept_rate":92,"display_name":"wheaties"},"score":1,"creation_date":1283435244,"post_id":3627681,"comment_id":3810918,"body_markdown":"If this is supposed to be educational and for the community, why isn&#39;t it community wiki?","body":"If this is supposed to be educational and for the community, why isn&#39;t it community wiki?"},{"owner":{"account_id":1885,"reputation":137382,"user_id":2598,"accept_rate":93,"display_name":"jjnguy"},"score":15,"creation_date":1283435604,"post_id":3627681,"comment_id":3810989,"body_markdown":"I think the effort is worth some reputation.  Please don&#39;t force them into community wiki.  Who cares if poly goes from 44k to 50k, what&#39;s the difference?","body":"I think the effort is worth some reputation.  Please don&#39;t force them into community wiki.  Who cares if poly goes from 44k to 50k, what&#39;s the difference?"},{"owner":{"account_id":32093,"reputation":650743,"user_id":88656,"display_name":"Eric Lippert"},"score":3,"creation_date":1283435780,"post_id":3627681,"comment_id":3811022,"body_markdown":"I look forward to the series. Note that if you are interested in a brief exploration of the origins of regular expressions, I started writing a blog series on that. I never completed it unfortunately. http://blogs.msdn.com/b/ericlippert/archive/tags/regular+expressions/","body":"I look forward to the series. Note that if you are interested in a brief exploration of the origins of regular expressions, I started writing a blog series on that. I never completed it unfortunately. <a href=\"http://blogs.msdn.com/b/ericlippert/archive/tags/regular+expressions/\" rel=\"nofollow noreferrer\">blogs.msdn.com/b/ericlippert/archive/tags/regular+expression&zwnj;&#8203;s</a>"},{"owner":{"account_id":36858,"reputation":113744,"user_id":105224,"accept_rate":73,"display_name":"Andreas Dolk"},"score":2,"creation_date":1283436367,"post_id":3627681,"comment_id":3811114,"body_markdown":"If this is a series - how about inventing a tag, that would simplify finding all &#39;articles&#39; of this series !?","body":"If this is a series - how about inventing a tag, that would simplify finding all &#39;articles&#39; of this series !?"},{"owner":{"account_id":102991,"reputation":378292,"user_id":276101,"accept_rate":67,"display_name":"polygenelubricants"},"score":0,"creation_date":1283436549,"post_id":3627681,"comment_id":3811161,"body_markdown":"@Andreas: you can discuss the logistics of this series on meta. I wouldn&#39;t mind creating a new tag, but I&#39;d be careful about meta-tags (e.g. `[beginner]` was banished -- http://blog.stackoverflow.com/2010/08/the-death-of-meta-tags/). As of now, I plan to update the discussion on meta with links to each articles in the series.","body":"@Andreas: you can discuss the logistics of this series on meta. I wouldn&#39;t mind creating a new tag, but I&#39;d be careful about meta-tags (e.g. <code>[beginner]</code> was banished -- <a href=\"http://blog.stackoverflow.com/2010/08/the-death-of-meta-tags/\">blog.stackoverflow.com/2010/08/the-death-of-meta-tags</a>). As of now, I plan to update the discussion on meta with links to each articles in the series."},{"owner":{"account_id":102991,"reputation":378292,"user_id":276101,"accept_rate":67,"display_name":"polygenelubricants"},"score":0,"creation_date":1283640641,"post_id":3627681,"comment_id":3830934,"body_markdown":"The second part of the series is now up: http://stackoverflow.com/questions/3644266/how-can-we-match-an-bn-with-pcre-regex/","body":"The second part of the series is now up: <a href=\"http://stackoverflow.com/questions/3644266/how-can-we-match-an-bn-with-pcre-regex/\" title=\"how can we match an bn with pcre regex\">stackoverflow.com/questions/3644266/&hellip;</a>"},{"owner":{"account_id":102991,"reputation":378292,"user_id":276101,"accept_rate":67,"display_name":"polygenelubricants"},"score":0,"creation_date":1283924639,"post_id":3627681,"comment_id":3856530,"body_markdown":"Part 3: http://stackoverflow.com/questions/3664881/how-does-this-java-regex-detect-palindromes","body":"Part 3: <a href=\"http://stackoverflow.com/questions/3664881/how-does-this-java-regex-detect-palindromes\" title=\"how does this java regex detect palindromes\">stackoverflow.com/questions/3664881/&hellip;</a>"},{"owner":{"account_id":3244487,"reputation":19947,"user_id":2736496,"accept_rate":74,"display_name":"aliteralmind"},"score":0,"creation_date":1397093819,"post_id":3627681,"comment_id":35087058,"body_markdown":"This question has been added to the [Stack Overflow Regular Expression FAQ](http://stackoverflow.com/a/22944075/2736496), under &quot;Advanced Regex-Fu&quot;.","body":"This question has been added to the <a href=\"http://stackoverflow.com/a/22944075/2736496\">Stack Overflow Regular Expression FAQ</a>, under &quot;Advanced Regex-Fu&quot;."}],"answers":[{"comments":[{"owner":{"account_id":32093,"reputation":650743,"user_id":88656,"display_name":"Eric Lippert"},"score":12,"creation_date":1283435612,"post_id":3627686,"comment_id":3810991,"body_markdown":"Note also that the fact that there are regular expression libraries that can match this pattern is, ironically, evidence that so-called &quot;regular&quot; expressions are not regular! The formal definition of a &quot;regular language&quot; is, roughly speaking, &quot;a set of strings that are exactly those matched by some matching machine that has a bounded number of internal states&quot;, but knowing &quot;what I matched before&quot; requires in theory a potentially unbounded number of states.","body":"Note also that the fact that there are regular expression libraries that can match this pattern is, ironically, evidence that so-called &quot;regular&quot; expressions are not regular! The formal definition of a &quot;regular language&quot; is, roughly speaking, &quot;a set of strings that are exactly those matched by some matching machine that has a bounded number of internal states&quot;, but knowing &quot;what I matched before&quot; requires in theory a potentially unbounded number of states."},{"owner":{"account_id":52266,"reputation":77724,"user_id":156142,"accept_rate":100,"display_name":"ChaosPandion"},"score":0,"creation_date":1283437111,"post_id":3627686,"comment_id":3811280,"body_markdown":"@Eric - So I guess you would call them irregular expressions?","body":"@Eric - So I guess you would call them irregular expressions?"},{"owner":{"account_id":42267,"reputation":135909,"user_id":123109,"accept_rate":55,"display_name":"Greg Bacon"},"score":0,"creation_date":1283442378,"post_id":3627686,"comment_id":3812267,"body_markdown":"@Eric, @Chaos I asked a [question about this incongruity](http://cstheory.stackexchange.com/questions/448/regular-expressions-arent) on the theoretical computer-science StackExchange beta.","body":"@Eric, @Chaos I asked a <a href=\"http://cstheory.stackexchange.com/questions/448/regular-expressions-arent\">question about this incongruity</a> on the theoretical computer-science StackExchange beta."},{"owner":{"account_id":255643,"reputation":1952,"user_id":535827,"accept_rate":62,"display_name":"Brandon"},"score":0,"creation_date":1322132087,"post_id":3627686,"comment_id":10159352,"body_markdown":"Formal regular expressions have only","body":"Formal regular expressions have only"}],"tags":[],"owner":{"account_id":102991,"reputation":378292,"user_id":276101,"accept_rate":67,"display_name":"polygenelubricants"},"comment_count":4,"down_vote_count":0,"up_vote_count":37,"is_accepted":true,"score":37,"last_activity_date":1694180603,"creation_date":1283435037,"answer_id":3627686,"question_id":3627681,"body_markdown":"### Explanation\r\n\r\nHere&#39;s a schematic breakdown of the pattern:\r\n\r\n    from beginning…\r\n    |         …to end\r\n    |         |\r\n    ^(\\1.|^.)+$\r\n     \\______/|___match\r\n      group 1    one-or-more times\r\n\r\nThe `(…)` [brackets](http://www.regular-expressions.info/brackets.html) define capturing group 1, and this group is [matched repeatedly](http://www.regular-expressions.info/repeat.html) with `+`. This subpattern is [anchored](http://www.regular-expressions.info/anchors.html) with `^` and `$` to see if it can match the entire string.\r\n\r\nGroup 1 tries to match `this|that` [alternates](http://www.regular-expressions.info/alternation.html):\r\n\r\n* `\\1.`, that is, what group 1 matched (self reference!), plus one of [&quot;any&quot; character](http://www.regular-expressions.info/dot.html),\r\n* or `^.`, that is, just &quot;any&quot; one character at the beginning\r\n\r\nNote that in group 1, we have a reference to what group 1 matched! This is a _nested/self reference_, and is the main idea introduced in this example. Keep in mind that when a capturing group is repeated, generally [it only keeps the last capture](http://www.regular-expressions.info/captureall.html), so the self reference in this case essentially says:\r\n\r\n&gt; &quot;Try to match what I matched last time, plus one more. That&#39;s what I&#39;ll match this time.&quot;\r\n\r\nSimilar to a recursion, there has to be a &quot;base case&quot; with self references. At the first iteration of the `+`, group 1 had not captured anything yet (which is _NOT_ the same as saying that it starts off with an empty string). Hence the second alternation is introduced, as a way to &quot;initialize&quot; group 1, which is that it&#39;s allowed to capture one character when it&#39;s at the beginning of the string.\r\n\r\nSo as it is repeated with `+`, group 1 first tries to match 1 character, then 2, then 3, then 4, etc. The sum of these numbers is a triangular number.\r\n\r\n---\r\n\r\n### Further explorations\r\n\r\nNote that for simplification, we used strings that consists of the same repeating character as our input. Now that we know how this pattern works, we can see that this pattern can also match strings like `&quot;1121231234&quot;`, `&quot;aababc&quot;`, etc.\r\n\r\nNote also that if we find that _n_ is a triangular number, i.e. _n = 1 + 2 + … + k_, the length of the string captured by group 1 at the end will be _k_.\r\n\r\nBoth of these points are shown in the following C# snippet ([also seen on ideone.com](http://ideone.com/4SqME)):\r\n\r\n    Regex r = new Regex(@&quot;^(\\1.|^.)+$&quot;);\r\n    \r\n    Console.WriteLine(r.IsMatch(&quot;aababc&quot;));     // True\r\n    Console.WriteLine(r.IsMatch(&quot;1121231234&quot;)); // True\r\n    Console.WriteLine(r.IsMatch(&quot;iLoveRegEx&quot;)); // False\r\n    \r\n    for (int n = 0; n &lt;= 50; n++) {\r\n        Match m = r.Match(&quot;&quot;.PadLeft(n));\r\n        if (m.Success) {\r\n           Console.WriteLine(&quot;{0} = sum(1..{1})&quot;, n, m.Groups[1].Length);\r\n        }\r\n    }\r\n    // 1 = sum(1..1)\r\n    // 3 = sum(1..2)\r\n    // 6 = sum(1..3)\r\n    // 10 = sum(1..4)\r\n    // 15 = sum(1..5)\r\n    // 21 = sum(1..6)\r\n    // 28 = sum(1..7)\r\n    // 36 = sum(1..8)\r\n    // 45 = sum(1..9)\r\n\r\n---\r\n\r\n### Flavor notes\r\n\r\nNot all flavors support nested references. Always familiarize yourself with [the quirks of the flavor](http://www.regular-expressions.info/refflavors.html) that you&#39;re working with (and consequently, it almost always helps to provide this information whenever you&#39;re asking regex-related questions).\r\n\r\nIn most flavors, the standard regex matching mechanism tries to see if a pattern can match _any part_ of the input string (possibly, but not necessarily, the entire input). This means that you should remember to always anchor your pattern with `^` and `$` whenever necessary.\r\n\r\nJava is slightly different in that [`String.matches`](http://download.oracle.com/docs/cd/E17409_01/javase/6/docs/api/java/lang/String.html#matches%28java.lang.String%29), [`Pattern.matches`](http://download.oracle.com/docs/cd/E17409_01/javase/6/docs/api/java/util/regex/Pattern.html#matches%28java.lang.String,%20java.lang.CharSequence%29) and [`Matcher.matches`](http://download.oracle.com/docs/cd/E17409_01/javase/6/docs/api/java/util/regex/Matcher.html#matches%28%29) attempt to match a pattern against the _entire_ input string. This is why the anchors can be omitted in the above snippet.\r\n\r\nNote that in other contexts, you may need to use `\\A` and `\\Z` anchors instead. For example, in [multiline mode](http://www.regular-expressions.info/modifiers.html), `^` and `$` match the beginning and end of _each line_ in the input.\r\n\r\nOne last thing is that in .NET regex, you _CAN_ actually get all the intermediate captures made by a repeated capturing group. In most flavors, you can&#39;t: all intermediate captures are lost and you only get to keep the last.\r\n\r\n### Related questions\r\n\r\n* [(Java) method matches not work well](https://stackoverflow.com/questions/3202120/method-matches-not-work-well) - with examples on how to do prefix/suffix/infix matching\r\n* [Is there a regex flavor that allows me to count the number of repetitions matched by `*` and `+`](https://stackoverflow.com/questions/3029127/is-there-a-regex-flavor-that-allows-me-to-count-the-number-of-repetitions-matched/) (.NET!)\r\n\r\n---\r\n\r\n### Bonus material: Using regex to find power of twos!!!\r\n\r\nWith very slight modification, you can use the same techniques presented here to find power of twos.\r\n\r\nHere&#39;s the basic mathematical property that you want to take advantage of:\r\n\r\n* 1 = 1\r\n* 2 = (1) + 1\r\n* 4 = (1+2) + 1\r\n* 8 = (1+2+4) + 1\r\n* 16 = (1+2+4+8) + 1\r\n* 32 = (1+2+4+8+16) + 1\r\n\r\nThe solution is given below (but do try to solve it yourself first!!!!)\r\n\r\n&gt;! (see on ideone.com in [PHP](http://ideone.com/tBrKd), [Java](http://ideone.com/kFCN3), and [C#](http://ideone.com/YMGz4)):\r\n&gt;! \r\n&gt;! `^(\\1\\1|^.)*.$`\r\n","title":"How does this regex find triangular numbers?","body":"<h3>Explanation</h3>\n<p>Here's a schematic breakdown of the pattern:</p>\n<pre><code>from beginning…\n|         …to end\n|         |\n^(\\1.|^.)+$\n \\______/|___match\n  group 1    one-or-more times\n</code></pre>\n<p>The <code>(…)</code> <a href=\"http://www.regular-expressions.info/brackets.html\" rel=\"nofollow noreferrer\">brackets</a> define capturing group 1, and this group is <a href=\"http://www.regular-expressions.info/repeat.html\" rel=\"nofollow noreferrer\">matched repeatedly</a> with <code>+</code>. This subpattern is <a href=\"http://www.regular-expressions.info/anchors.html\" rel=\"nofollow noreferrer\">anchored</a> with <code>^</code> and <code>$</code> to see if it can match the entire string.</p>\n<p>Group 1 tries to match <code>this|that</code> <a href=\"http://www.regular-expressions.info/alternation.html\" rel=\"nofollow noreferrer\">alternates</a>:</p>\n<ul>\n<li><code>\\1.</code>, that is, what group 1 matched (self reference!), plus one of <a href=\"http://www.regular-expressions.info/dot.html\" rel=\"nofollow noreferrer\">&quot;any&quot; character</a>,</li>\n<li>or <code>^.</code>, that is, just &quot;any&quot; one character at the beginning</li>\n</ul>\n<p>Note that in group 1, we have a reference to what group 1 matched! This is a <em>nested/self reference</em>, and is the main idea introduced in this example. Keep in mind that when a capturing group is repeated, generally <a href=\"http://www.regular-expressions.info/captureall.html\" rel=\"nofollow noreferrer\">it only keeps the last capture</a>, so the self reference in this case essentially says:</p>\n<blockquote>\n<p>&quot;Try to match what I matched last time, plus one more. That's what I'll match this time.&quot;</p>\n</blockquote>\n<p>Similar to a recursion, there has to be a &quot;base case&quot; with self references. At the first iteration of the <code>+</code>, group 1 had not captured anything yet (which is <em>NOT</em> the same as saying that it starts off with an empty string). Hence the second alternation is introduced, as a way to &quot;initialize&quot; group 1, which is that it's allowed to capture one character when it's at the beginning of the string.</p>\n<p>So as it is repeated with <code>+</code>, group 1 first tries to match 1 character, then 2, then 3, then 4, etc. The sum of these numbers is a triangular number.</p>\n<hr />\n<h3>Further explorations</h3>\n<p>Note that for simplification, we used strings that consists of the same repeating character as our input. Now that we know how this pattern works, we can see that this pattern can also match strings like <code>&quot;1121231234&quot;</code>, <code>&quot;aababc&quot;</code>, etc.</p>\n<p>Note also that if we find that <em>n</em> is a triangular number, i.e. <em>n = 1 + 2 + … + k</em>, the length of the string captured by group 1 at the end will be <em>k</em>.</p>\n<p>Both of these points are shown in the following C# snippet (<a href=\"http://ideone.com/4SqME\" rel=\"nofollow noreferrer\">also seen on ideone.com</a>):</p>\n<pre><code>Regex r = new Regex(@&quot;^(\\1.|^.)+$&quot;);\n\nConsole.WriteLine(r.IsMatch(&quot;aababc&quot;));     // True\nConsole.WriteLine(r.IsMatch(&quot;1121231234&quot;)); // True\nConsole.WriteLine(r.IsMatch(&quot;iLoveRegEx&quot;)); // False\n\nfor (int n = 0; n &lt;= 50; n++) {\n    Match m = r.Match(&quot;&quot;.PadLeft(n));\n    if (m.Success) {\n       Console.WriteLine(&quot;{0} = sum(1..{1})&quot;, n, m.Groups[1].Length);\n    }\n}\n// 1 = sum(1..1)\n// 3 = sum(1..2)\n// 6 = sum(1..3)\n// 10 = sum(1..4)\n// 15 = sum(1..5)\n// 21 = sum(1..6)\n// 28 = sum(1..7)\n// 36 = sum(1..8)\n// 45 = sum(1..9)\n</code></pre>\n<hr />\n<h3>Flavor notes</h3>\n<p>Not all flavors support nested references. Always familiarize yourself with <a href=\"http://www.regular-expressions.info/refflavors.html\" rel=\"nofollow noreferrer\">the quirks of the flavor</a> that you're working with (and consequently, it almost always helps to provide this information whenever you're asking regex-related questions).</p>\n<p>In most flavors, the standard regex matching mechanism tries to see if a pattern can match <em>any part</em> of the input string (possibly, but not necessarily, the entire input). This means that you should remember to always anchor your pattern with <code>^</code> and <code>$</code> whenever necessary.</p>\n<p>Java is slightly different in that <a href=\"http://download.oracle.com/docs/cd/E17409_01/javase/6/docs/api/java/lang/String.html#matches%28java.lang.String%29\" rel=\"nofollow noreferrer\"><code>String.matches</code></a>, <a href=\"http://download.oracle.com/docs/cd/E17409_01/javase/6/docs/api/java/util/regex/Pattern.html#matches%28java.lang.String,%20java.lang.CharSequence%29\" rel=\"nofollow noreferrer\"><code>Pattern.matches</code></a> and <a href=\"http://download.oracle.com/docs/cd/E17409_01/javase/6/docs/api/java/util/regex/Matcher.html#matches%28%29\" rel=\"nofollow noreferrer\"><code>Matcher.matches</code></a> attempt to match a pattern against the <em>entire</em> input string. This is why the anchors can be omitted in the above snippet.</p>\n<p>Note that in other contexts, you may need to use <code>\\A</code> and <code>\\Z</code> anchors instead. For example, in <a href=\"http://www.regular-expressions.info/modifiers.html\" rel=\"nofollow noreferrer\">multiline mode</a>, <code>^</code> and <code>$</code> match the beginning and end of <em>each line</em> in the input.</p>\n<p>One last thing is that in .NET regex, you <em>CAN</em> actually get all the intermediate captures made by a repeated capturing group. In most flavors, you can't: all intermediate captures are lost and you only get to keep the last.</p>\n<h3>Related questions</h3>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/3202120/method-matches-not-work-well\">(Java) method matches not work well</a> - with examples on how to do prefix/suffix/infix matching</li>\n<li><a href=\"https://stackoverflow.com/questions/3029127/is-there-a-regex-flavor-that-allows-me-to-count-the-number-of-repetitions-matched/\">Is there a regex flavor that allows me to count the number of repetitions matched by <code>*</code> and <code>+</code></a> (.NET!)</li>\n</ul>\n<hr />\n<h3>Bonus material: Using regex to find power of twos!!!</h3>\n<p>With very slight modification, you can use the same techniques presented here to find power of twos.</p>\n<p>Here's the basic mathematical property that you want to take advantage of:</p>\n<ul>\n<li>1 = 1</li>\n<li>2 = (1) + 1</li>\n<li>4 = (1+2) + 1</li>\n<li>8 = (1+2+4) + 1</li>\n<li>16 = (1+2+4+8) + 1</li>\n<li>32 = (1+2+4+8+16) + 1</li>\n</ul>\n<p>The solution is given below (but do try to solve it yourself first!!!!)</p>\n<blockquote class=\"spoiler\">\n<p> (see on ideone.com in <a href=\"http://ideone.com/tBrKd\" rel=\"nofollow noreferrer\">PHP</a>, <a href=\"http://ideone.com/kFCN3\" rel=\"nofollow noreferrer\">Java</a>, and <a href=\"http://ideone.com/YMGz4\" rel=\"nofollow noreferrer\">C#</a>):\n\n <code>^(\\1\\1|^.)*.$</code></p>\n</blockquote>\n"}],"owner":{"account_id":102991,"reputation":378292,"user_id":276101,"accept_rate":67,"display_name":"polygenelubricants"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2733,"favorite_count":0,"down_vote_count":0,"up_vote_count":44,"accepted_answer_id":3627686,"answer_count":1,"score":44,"last_activity_date":1694180603,"creation_date":1283435013,"question_id":3627681,"body_markdown":"&gt; &lt;sub&gt;_Part of a series of educational regex articles, this is a gentle introduction to the concept of nested references._&lt;/sub&gt;\r\n\r\nThe first few [triangular numbers](http://en.wikipedia.org/wiki/Triangular_number) are:\r\n\r\n     1 = 1\r\n     3 = 1 + 2\r\n     6 = 1 + 2 + 3\r\n    10 = 1 + 2 + 3 + 4\r\n    15 = 1 + 2 + 3 + 4 + 5\r\n\r\nThere are many ways to check if a number is triangular. There&#39;s this interesting technique that uses regular expressions as follows:\r\n\r\n* Given _n_, we first create a string of length _n_ filled with the same character\r\n* We then match this string against the pattern `^(\\1.|^.)+$`\r\n   * _n_ is triangular if and only if this pattern matches the string\r\n\r\nHere are some snippets to show that this works in several languages:\r\n\r\n### [PHP (on ideone.com)](http://ideone.com/KoS1a)&lt;/sub&gt;\r\n\r\n    $r = &#39;/^(\\1.|^.)+$/&#39;;\r\n     \r\n    foreach (range(0,50) as $n) {\r\n      if (preg_match($r, str_repeat(&#39;o&#39;, $n))) {\r\n         print(&quot;$n &quot;);\r\n      }\r\n    }\r\n\r\n### [Java (on ideone.com)](http://ideone.com/8FxQW)\r\n\r\n    for (int n = 0; n &lt;= 50; n++) {\r\n        String s = new String(new char[n]);\r\n        if (s.matches(&quot;(\\\\1.|^.)+&quot;)) {\r\n            System.out.print(n + &quot; &quot;);\r\n        }\r\n    }\r\n\r\n### [C# (on ideone.com)](http://ideone.com/L61sT)\r\n\r\n    Regex r = new Regex(@&quot;^(\\1.|^.)+$&quot;);\r\n     \r\n    for (int n = 0; n &lt;= 50; n++) {\r\n        if (r.IsMatch(&quot;&quot;.PadLeft(n))) {\r\n           Console.Write(&quot;{0} &quot;, n);\r\n        }\r\n    }\r\n\r\nSo this regex seems to work, but can someone explain how?\r\n\r\n### Similar questions\r\n\r\n* [How to determine if a number is a prime with regex?](https://stackoverflow.com/questions/2795065/how-to-determine-if-a-number-is-a-prime-with-regex)","title":"How does this regex find triangular numbers?","body":"<blockquote>\n  <p><sub><em>Part of a series of educational regex articles, this is a gentle introduction to the concept of nested references.</em></sub></p>\n</blockquote>\n\n<p>The first few <a href=\"http://en.wikipedia.org/wiki/Triangular_number\" rel=\"nofollow noreferrer\">triangular numbers</a> are:</p>\n\n<pre><code> 1 = 1\n 3 = 1 + 2\n 6 = 1 + 2 + 3\n10 = 1 + 2 + 3 + 4\n15 = 1 + 2 + 3 + 4 + 5\n</code></pre>\n\n<p>There are many ways to check if a number is triangular. There's this interesting technique that uses regular expressions as follows:</p>\n\n<ul>\n<li>Given <em>n</em>, we first create a string of length <em>n</em> filled with the same character</li>\n<li>We then match this string against the pattern <code>^(\\1.|^.)+$</code>\n\n<ul>\n<li><em>n</em> is triangular if and only if this pattern matches the string</li>\n</ul></li>\n</ul>\n\n<p>Here are some snippets to show that this works in several languages:</p>\n\n<h3><a href=\"http://ideone.com/KoS1a\" rel=\"nofollow noreferrer\">PHP (on ideone.com)</a></h3>\n\n<pre><code>$r = '/^(\\1.|^.)+$/';\n\nforeach (range(0,50) as $n) {\n  if (preg_match($r, str_repeat('o', $n))) {\n     print(\"$n \");\n  }\n}\n</code></pre>\n\n<h3><a href=\"http://ideone.com/8FxQW\" rel=\"nofollow noreferrer\">Java (on ideone.com)</a></h3>\n\n<pre><code>for (int n = 0; n &lt;= 50; n++) {\n    String s = new String(new char[n]);\n    if (s.matches(\"(\\\\1.|^.)+\")) {\n        System.out.print(n + \" \");\n    }\n}\n</code></pre>\n\n<h3><a href=\"http://ideone.com/L61sT\" rel=\"nofollow noreferrer\">C# (on ideone.com)</a></h3>\n\n<pre><code>Regex r = new Regex(@\"^(\\1.|^.)+$\");\n\nfor (int n = 0; n &lt;= 50; n++) {\n    if (r.IsMatch(\"\".PadLeft(n))) {\n       Console.Write(\"{0} \", n);\n    }\n}\n</code></pre>\n\n<p>So this regex seems to work, but can someone explain how?</p>\n\n<h3>Similar questions</h3>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/2795065/how-to-determine-if-a-number-is-a-prime-with-regex\">How to determine if a number is a prime with regex?</a></li>\n</ul>\n"},{"tags":["java","openapi"],"owner":{"account_id":303781,"reputation":3824,"user_id":612925,"accept_rate":67,"display_name":"tomasz-mer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694180252,"creation_date":1694180252,"question_id":77067397,"body_markdown":"Problem:\r\nI would like to have schemas for implementations of interfaces without adding @Schema annotation on interface due to number of interfaces in existing system.\r\n\r\nExample:\r\n\r\n    @Schema( oneOf = { ResultOne.class, ResultTwo.class } )\r\n    public interface Result\r\n\r\nGives me:\r\n\r\n    components: class Components {\r\n            schemas: {Result=class ComposedSchema {\r\n                class Schema {\r\n                    ...\r\n                }\r\n                allOf: null\r\n                anyOf: null\r\n                oneOf: [class Schema {\r\n                    type: null\r\n                    format: null\r\n                    $ref: #/components/schemas/ResultOne\r\n                    ...\r\n                }, class Schema {\r\n                    type: null\r\n                    format: null\r\n                    $ref: #/components/schemas/ResultTwo\r\n                    ...\r\n                }]\r\n            }, ResultOne=class Schema {\r\n    \t\t\t...\r\n            }, ResultTwo=class Schema {\r\n    \t\t\t...\r\n            }}\r\n    }\r\n\r\nDoes anyone know how to tell to OpenAPI that should generate schemas for implementations in such way programmatically? Without adding annotation to intefaces?\r\n","title":"OpenAPI to generate schemas for implementations whitout adding @Schema annotation on interface","body":"<p>Problem:\nI would like to have schemas for implementations of interfaces without adding @Schema annotation on interface due to number of interfaces in existing system.</p>\n<p>Example:</p>\n<pre><code>@Schema( oneOf = { ResultOne.class, ResultTwo.class } )\npublic interface Result\n</code></pre>\n<p>Gives me:</p>\n<pre><code>components: class Components {\n        schemas: {Result=class ComposedSchema {\n            class Schema {\n                ...\n            }\n            allOf: null\n            anyOf: null\n            oneOf: [class Schema {\n                type: null\n                format: null\n                $ref: #/components/schemas/ResultOne\n                ...\n            }, class Schema {\n                type: null\n                format: null\n                $ref: #/components/schemas/ResultTwo\n                ...\n            }]\n        }, ResultOne=class Schema {\n            ...\n        }, ResultTwo=class Schema {\n            ...\n        }}\n}\n</code></pre>\n<p>Does anyone know how to tell to OpenAPI that should generate schemas for implementations in such way programmatically? Without adding annotation to intefaces?</p>\n"},{"tags":["java","android","android-studio","exception"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":3,"creation_date":1694178862,"post_id":77067206,"comment_id":135861100,"body_markdown":"As you can see, your `MainActivity` methods aren&#39;t even mentioned in the stack trace. So the exception is thrown in another thread.","body":"As you can see, your <code>MainActivity</code> methods aren&#39;t even mentioned in the stack trace. So the exception is thrown in another thread."}],"answers":[{"tags":[],"owner":{"display_name":"user22475952"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1694180155,"creation_date":1694180155,"answer_id":77067381,"question_id":77067206,"body_markdown":"Because the code you have inside the try blocks doesn&#39;t truly throw exceptions that can be caught, the try-catch blocks in your program are unlikely to capture any exceptions.\r\n\r\nThere is no checked exception that the Android startActivity function throws that you can catch using a try-catch block. It may instead throw runtime exceptions, such as ActivityNotFoundException or SecurityException, which are not have to be explicitly caught.\r\n\r\nYou can take the following actions to deal with exceptions that arise when initiating an activity:\r\n\r\n    try {\r\n        Intent intent = new Intent(this, SecondActivity.class);\r\n        startActivity(intent);\r\n    } catch (ActivityNotFoundException e) {\r\n        // Handle the case where the activity is not found\r\n        e.printStackTrace();\r\n    } catch (SecurityException e) {\r\n        // Handle the security exception\r\n        e.printStackTrace();\r\n    } catch (Exception e) {\r\n        // Handle any other exceptions\r\n        e.printStackTrace();\r\n    }\r\n\r\nHowever, it&#39;s usually preferable to design your code so that control flow is not dependent on catching exceptions. Instead, before invoking the method, you can use conditional statements to look for circumstances that could cause an exception. Your code becomes more resilient and comprehensible as a result.\r\n\r\nIn your particular situation, you can use an if statement to check the condition before calling startActivity if you wish to prevent initiating the SecondActivity when a specific condition is satisfied.","title":"Why catch statement doesn&#39;t catch the error?","body":"<p>Because the code you have inside the try blocks doesn't truly throw exceptions that can be caught, the try-catch blocks in your program are unlikely to capture any exceptions.</p>\n<p>There is no checked exception that the Android startActivity function throws that you can catch using a try-catch block. It may instead throw runtime exceptions, such as ActivityNotFoundException or SecurityException, which are not have to be explicitly caught.</p>\n<p>You can take the following actions to deal with exceptions that arise when initiating an activity:</p>\n<pre><code>try {\n    Intent intent = new Intent(this, SecondActivity.class);\n    startActivity(intent);\n} catch (ActivityNotFoundException e) {\n    // Handle the case where the activity is not found\n    e.printStackTrace();\n} catch (SecurityException e) {\n    // Handle the security exception\n    e.printStackTrace();\n} catch (Exception e) {\n    // Handle any other exceptions\n    e.printStackTrace();\n}\n</code></pre>\n<p>However, it's usually preferable to design your code so that control flow is not dependent on catching exceptions. Instead, before invoking the method, you can use conditional statements to look for circumstances that could cause an exception. Your code becomes more resilient and comprehensible as a result.</p>\n<p>In your particular situation, you can use an if statement to check the condition before calling startActivity if you wish to prevent initiating the SecondActivity when a specific condition is satisfied.</p>\n"}],"owner":{"account_id":27469504,"reputation":23,"user_id":20958695,"display_name":"user20958695"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77067381,"answer_count":1,"score":0,"last_activity_date":1694180155,"creation_date":1694178737,"question_id":77067206,"body_markdown":"For some reason the catch statement doesn&#39;t catch the error in my project.\r\n\r\nI have created a mini project to reproduce the error: It has two activities and it switches between them with `startActivity()` and `finish()` respectively.\r\n\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n        static int counter = 0;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n            try {\r\n                System.out.println(counter);\r\n                Intent intent = new Intent(this, SecondActivity.class);\r\n                startActivity(intent);\r\n            } catch (Throwable e) {\r\n                System.out.println(&quot;Error&quot;);\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        protected void onPostResume() {\r\n            super.onPostResume();\r\n            if (counter++ &lt; 100) {\r\n                try {\r\n                    System.out.println(counter);\r\n                    Intent intent = new Intent(this, SecondActivity.class);\r\n                    startActivity(intent);\r\n                } catch (Throwable e) {\r\n                    System.out.println(&quot;Error&quot;);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    public class SecondActivity extends AppCompatActivity {\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_second);\r\n            finish();\r\n        }\r\n    }\r\n\r\nAlthough everything is surrounded in try-catch statements and I&#39;m aiming to catch the highest type possible it doesn&#39;t catch it.\r\n\r\nThis is the stack trace:\r\n\r\n    E/AndroidRuntime: FATAL EXCEPTION: main\r\n        Process: com.example.myapplication, PID: 22538\r\n        java.lang.IllegalArgumentException: Activity client record must not be null to execute transaction item: TopResumedActivityChangeItem{onTop=true}\r\n            at android.app.servertransaction.ActivityTransactionItem.getActivityClientRecord(ActivityTransactionItem.java:66)\r\n            at android.app.servertransaction.ActivityTransactionItem.execute(ActivityTransactionItem.java:43)\r\n            at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\r\n            at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\r\n            at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2308)\r\n            at android.os.Handler.dispatchMessage(Handler.java:106)\r\n            at android.os.Looper.loopOnce(Looper.java:201)\r\n            at android.os.Looper.loop(Looper.java:288)\r\n            at android.app.ActivityThread.main(ActivityThread.java:7898)\r\n            at java.lang.reflect.Method.invoke(Native Method)\r\n            at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)\r\n            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:936)\r\n\r\n\r\nAny idea of why this can&#39;t be caught and how to avoid the crash? \r\n\r\nNot the original question but any general idea of how to fix this crash (so it won&#39;t need to be caught in the first place) will also be helpful, as I couldn&#39;t find any solution that worked. The error happens on a specific device I used for the Android Studio emulator: &#39;Nexus 6&#39; with API 33. I didn&#39;t encounter this issue in the few other devices I used in the emulator. The error eccurs usually around the 50&#39;th time `startActivity()` is called, but it seems completely random somewhere between 1 and 100 calls.","title":"Why catch statement doesn&#39;t catch the error?","body":"<p>For some reason the catch statement doesn't catch the error in my project.</p>\n<p>I have created a mini project to reproduce the error: It has two activities and it switches between them with <code>startActivity()</code> and <code>finish()</code> respectively.</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    static int counter = 0;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        try {\n            System.out.println(counter);\n            Intent intent = new Intent(this, SecondActivity.class);\n            startActivity(intent);\n        } catch (Throwable e) {\n            System.out.println(&quot;Error&quot;);\n        }\n    }\n\n    @Override\n    protected void onPostResume() {\n        super.onPostResume();\n        if (counter++ &lt; 100) {\n            try {\n                System.out.println(counter);\n                Intent intent = new Intent(this, SecondActivity.class);\n                startActivity(intent);\n            } catch (Throwable e) {\n                System.out.println(&quot;Error&quot;);\n            }\n        }\n    }\n}\n\npublic class SecondActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_second);\n        finish();\n    }\n}\n</code></pre>\n<p>Although everything is surrounded in try-catch statements and I'm aiming to catch the highest type possible it doesn't catch it.</p>\n<p>This is the stack trace:</p>\n<pre><code>E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: com.example.myapplication, PID: 22538\n    java.lang.IllegalArgumentException: Activity client record must not be null to execute transaction item: TopResumedActivityChangeItem{onTop=true}\n        at android.app.servertransaction.ActivityTransactionItem.getActivityClientRecord(ActivityTransactionItem.java:66)\n        at android.app.servertransaction.ActivityTransactionItem.execute(ActivityTransactionItem.java:43)\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2308)\n        at android.os.Handler.dispatchMessage(Handler.java:106)\n        at android.os.Looper.loopOnce(Looper.java:201)\n        at android.os.Looper.loop(Looper.java:288)\n        at android.app.ActivityThread.main(ActivityThread.java:7898)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:936)\n</code></pre>\n<p>Any idea of why this can't be caught and how to avoid the crash?</p>\n<p>Not the original question but any general idea of how to fix this crash (so it won't need to be caught in the first place) will also be helpful, as I couldn't find any solution that worked. The error happens on a specific device I used for the Android Studio emulator: 'Nexus 6' with API 33. I didn't encounter this issue in the few other devices I used in the emulator. The error eccurs usually around the 50'th time <code>startActivity()</code> is called, but it seems completely random somewhere between 1 and 100 calls.</p>\n"},{"tags":["java","android","flutter","gradle"],"answers":[{"tags":[],"owner":{"account_id":7130379,"reputation":1308,"user_id":5451849,"display_name":"Dharam Budh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694179931,"creation_date":1694179931,"answer_id":77067350,"question_id":77067168,"body_markdown":"Open android -&gt; app -&gt; src -&gt; main -&gt; `AndroidManifest.xml`.\r\n\r\nReplace\r\n\r\n    &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n\r\nWith\r\n\r\n    &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        package=&quot;mysite.com.myproject&quot;&gt;","title":"Android getting Namespace not specified error. when i try to upgrade Gralde version of project","body":"<p>Open android -&gt; app -&gt; src -&gt; main -&gt; <code>AndroidManifest.xml</code>.</p>\n<p>Replace</p>\n<pre><code>&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\n</code></pre>\n<p>With</p>\n<pre><code>&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    package=&quot;mysite.com.myproject&quot;&gt;\n</code></pre>\n"}],"owner":{"account_id":1158163,"reputation":16333,"user_id":1830228,"accept_rate":55,"display_name":"DolDurma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":159,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694179931,"creation_date":1694178436,"question_id":77067168,"body_markdown":"When I want to upgrade the Android project to a higher Gradle version, I receive this error during compilation:\r\n\r\n```\r\nNamespace not specified. Please specify a namespace in the module&#39;s build.gradle file like so:\r\n\r\nandroid {\r\n    namespace &#39;com.example.namespace&#39;\r\n}\r\n```\r\n\r\nMy confusion is that the namespace in the build.gradle file has already been defined, and it gives this error when upgrading to a higher version.\r\n\r\nThe content of the build.gradle file:\r\n\r\n```xml\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n\r\n    &lt;application\r\n        android:name=&quot;${applicationName}&quot;\r\n        android:icon=&quot;@mipmap/launcher_icon&quot;\r\n        android:label=&quot;xxxxxx&quot;&gt;\r\n        &lt;activity\r\n            ...\r\n            \r\n        &lt;/activity&gt;\r\n        \r\n        &lt;meta-data\r\n            android:name=&quot;flutterEmbedding&quot;\r\n            android:value=&quot;2&quot; /&gt;\r\n    &lt;/application&gt;\r\n&lt;/manifest&gt;\r\n```\r\n\r\n`build.gradle`\r\n```gradle\r\n...\r\nandroid {\r\n    namespace &quot;mysite.com.myproject&quot;\r\n    compileSdkVersion flutter.compileSdkVersion\r\n    ndkVersion flutter.ndkVersion\r\n\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_11\r\n        targetCompatibility JavaVersion.VERSION_11\r\n    }\r\n\r\n    ...\r\n    defaultConfig {\r\n        applicationId &quot;mysite.com.myproject&quot;\r\n        minSdkVersion 21\r\n        targetSdkVersion flutter.targetSdkVersion\r\n        versionCode flutterVersionCode.toInteger()\r\n        versionName flutterVersionName\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            signingConfig signingConfigs.debug\r\n        }\r\n    }\r\n}\r\n\r\nflutter {\r\n    source &#39;../..&#39;\r\n}\r\n\r\ndependencies {\r\n    implementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version&quot;\r\n}\r\n```\r\n\r\nSections defined for the buildscript:\r\n\r\n```gradle\r\nbuildscript {\r\n    ext.kotlin_version = &#39;1.9.0&#39;\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n    }\r\n\r\n    dependencies {\r\n        classpath &#39;com.android.tools.build:gradle:8.0.2&#39;\r\n        classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\r\n    }\r\n}\r\n```\r\n\r\nAnd finally, the distributionUrl section:\r\n\r\n```\r\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-8.0-all.zip\r\n```","title":"Android getting Namespace not specified error. when i try to upgrade Gralde version of project","body":"<p>When I want to upgrade the Android project to a higher Gradle version, I receive this error during compilation:</p>\n<pre><code>Namespace not specified. Please specify a namespace in the module's build.gradle file like so:\n\nandroid {\n    namespace 'com.example.namespace'\n}\n</code></pre>\n<p>My confusion is that the namespace in the build.gradle file has already been defined, and it gives this error when upgrading to a higher version.</p>\n<p>The content of the build.gradle file:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n\n    &lt;application\n        android:name=&quot;${applicationName}&quot;\n        android:icon=&quot;@mipmap/launcher_icon&quot;\n        android:label=&quot;xxxxxx&quot;&gt;\n        &lt;activity\n            ...\n            \n        &lt;/activity&gt;\n        \n        &lt;meta-data\n            android:name=&quot;flutterEmbedding&quot;\n            android:value=&quot;2&quot; /&gt;\n    &lt;/application&gt;\n&lt;/manifest&gt;\n</code></pre>\n<p><code>build.gradle</code></p>\n<pre><code>...\nandroid {\n    namespace &quot;mysite.com.myproject&quot;\n    compileSdkVersion flutter.compileSdkVersion\n    ndkVersion flutter.ndkVersion\n\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_11\n        targetCompatibility JavaVersion.VERSION_11\n    }\n\n    ...\n    defaultConfig {\n        applicationId &quot;mysite.com.myproject&quot;\n        minSdkVersion 21\n        targetSdkVersion flutter.targetSdkVersion\n        versionCode flutterVersionCode.toInteger()\n        versionName flutterVersionName\n    }\n\n    buildTypes {\n        release {\n            signingConfig signingConfigs.debug\n        }\n    }\n}\n\nflutter {\n    source '../..'\n}\n\ndependencies {\n    implementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version&quot;\n}\n</code></pre>\n<p>Sections defined for the buildscript:</p>\n<pre><code>buildscript {\n    ext.kotlin_version = '1.9.0'\n    repositories {\n        google()\n        mavenCentral()\n    }\n\n    dependencies {\n        classpath 'com.android.tools.build:gradle:8.0.2'\n        classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\n    }\n}\n</code></pre>\n<p>And finally, the distributionUrl section:</p>\n<pre><code>distributionUrl=https\\://services.gradle.org/distributions/gradle-8.0-all.zip\n</code></pre>\n"},{"tags":["java","azure","azure-functions","inversion-of-control"],"comments":[{"owner":{"account_id":1398831,"reputation":17713,"user_id":1384539,"accept_rate":62,"display_name":"Thiago Custodio"},"score":0,"creation_date":1583421524,"post_id":60548438,"comment_id":107118209,"body_markdown":"I am not 100%, but I believe that at this moment there&#39;s no support for DI when writing your Azure Functions with Java (https://github.com/Azure/azure-functions-java-worker/issues/324)","body":"I am not 100%, but I believe that at this moment there&#39;s no support for DI when writing your Azure Functions with Java (<a href=\"https://github.com/Azure/azure-functions-java-worker/issues/324\" rel=\"nofollow noreferrer\">github.com/Azure/azure-functions-java-worker/issues/324</a>)"}],"answers":[{"tags":[],"owner":{"account_id":13151600,"reputation":130,"user_id":9500065,"display_name":"Helay"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1604361299,"creation_date":1604361299,"answer_id":64654935,"question_id":60548438,"body_markdown":"For now, you can use Spring Framework to use Azure Function for HTTP requests only (not the bindings.\r\n\r\n[Here][1] is a sample on how to use it \r\n\r\n\r\nI know there is a work in progress now to support Dependency injection for Azure Function [enter link description here][2]\r\n\r\n\r\n  [1]: https://learn.microsoft.com/en-us/samples/azure-samples/hello-spring-function-azure/hello-spring-function-azure/\r\n  [2]: https://github.com/Azure/azure-functions-java-worker/issues/324#issuecomment-719662979","title":"Dependency Injection (IoC) in JAVA + Azure Functions","body":"<p>For now, you can use Spring Framework to use Azure Function for HTTP requests only (not the bindings.</p>\n<p><a href=\"https://learn.microsoft.com/en-us/samples/azure-samples/hello-spring-function-azure/hello-spring-function-azure/\" rel=\"nofollow noreferrer\">Here</a> is a sample on how to use it</p>\n<p>I know there is a work in progress now to support Dependency injection for Azure Function <a href=\"https://github.com/Azure/azure-functions-java-worker/issues/324#issuecomment-719662979\" rel=\"nofollow noreferrer\">enter link description here</a></p>\n"},{"tags":[],"owner":{"account_id":1180794,"reputation":791,"user_id":1155759,"display_name":"Osmund Francis"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694179836,"creation_date":1694179836,"answer_id":77067342,"question_id":60548438,"body_markdown":"The Java Developer reference for Azure Functions (\r\nhttps://learn.microsoft.com/en-us/azure/azure-functions/functions-reference-java) now includes information, and an example for Guice and Dagger.\r\n\r\nExample: https://github.com/Azure/azure-functions-java-worker/tree/dev/samples/dependency-injection-example","title":"Dependency Injection (IoC) in JAVA + Azure Functions","body":"<p>The Java Developer reference for Azure Functions (\n<a href=\"https://learn.microsoft.com/en-us/azure/azure-functions/functions-reference-java\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/azure/azure-functions/functions-reference-java</a>) now includes information, and an example for Guice and Dagger.</p>\n<p>Example: <a href=\"https://github.com/Azure/azure-functions-java-worker/tree/dev/samples/dependency-injection-example\" rel=\"nofollow noreferrer\">https://github.com/Azure/azure-functions-java-worker/tree/dev/samples/dependency-injection-example</a></p>\n"}],"owner":{"account_id":4150940,"reputation":241,"user_id":3403420,"display_name":"radoslaw.jarzynka"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1814,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1694179836,"creation_date":1583420990,"question_id":60548438,"body_markdown":"I am using an Azure Function written in Java to retrieve the data from REST API and insert it into the mongo database.\r\nI&#39;m trying to separate the app into different layers like I usually do for web applications - for now I&#39;ve only extracted the repository that stores the data in mongo into a separate class, so my function class looks like this (I&#39;ve omitted triggers, error handlings etc)\r\n\r\n    public class SensorFunctions {\r\n\r\n\t\t@FunctionName(&quot;saveSensors&quot;)\r\n\t\tpublic void saveSensors(\r\n\t\t\tfinal ExecutionContext context) {\r\n\t\t\tSensorRepository sensorRepository = new SensorRepository();\r\n\t\t\tnew SensorAPI().retrieveSensors()\r\n\t\t\t\t.forEach(sensorRepository::saveSensor);\r\n\t\t}\r\n\t}\r\n\r\nI&#39;d prefer to use some king of IoC mechanism, so I don&#39;t have to instantiate repostiory and other classes by myself but I can do something like \r\n\r\n    public class SensorFunctions {\r\n\t\t@Inject\r\n\t\tSensorRepository sensorRepository;\r\n\r\n\t\t@Inject\r\n\t\tSensorAPI sensorAPI;\r\n\r\n\t\t@FunctionName(&quot;saveSensors&quot;)\r\n\t\tpublic void saveSensors(\r\n\t\t\tfinal ExecutionContext context) {\r\n\t\t\tsensorAPI.retrieveSensors()\r\n\t\t\t\t.forEach(sensorRepository::saveSensor);\r\n\t\t}\r\n\t}\r\n\r\nIs it possible with Azure functions? Is so, is it possible to create an automatic configuration or do I need to trigger the configuration of the IoC container manually at the beginning of each function (I will have multiple functions in a single project).\r\nAs the cost is dependent on the function&#39;s computation time, I&#39;d prefer as lightweight solution as possible","title":"Dependency Injection (IoC) in JAVA + Azure Functions","body":"<p>I am using an Azure Function written in Java to retrieve the data from REST API and insert it into the mongo database.\nI'm trying to separate the app into different layers like I usually do for web applications - for now I've only extracted the repository that stores the data in mongo into a separate class, so my function class looks like this (I've omitted triggers, error handlings etc)</p>\n\n<pre><code>public class SensorFunctions {\n\n    @FunctionName(\"saveSensors\")\n    public void saveSensors(\n        final ExecutionContext context) {\n        SensorRepository sensorRepository = new SensorRepository();\n        new SensorAPI().retrieveSensors()\n            .forEach(sensorRepository::saveSensor);\n    }\n}\n</code></pre>\n\n<p>I'd prefer to use some king of IoC mechanism, so I don't have to instantiate repostiory and other classes by myself but I can do something like </p>\n\n<pre><code>public class SensorFunctions {\n    @Inject\n    SensorRepository sensorRepository;\n\n    @Inject\n    SensorAPI sensorAPI;\n\n    @FunctionName(\"saveSensors\")\n    public void saveSensors(\n        final ExecutionContext context) {\n        sensorAPI.retrieveSensors()\n            .forEach(sensorRepository::saveSensor);\n    }\n}\n</code></pre>\n\n<p>Is it possible with Azure functions? Is so, is it possible to create an automatic configuration or do I need to trigger the configuration of the IoC container manually at the beginning of each function (I will have multiple functions in a single project).\nAs the cost is dependent on the function's computation time, I'd prefer as lightweight solution as possible</p>\n"},{"tags":["java","swing","progress-bar","swingworker","jprogressbar"],"comments":[{"owner":{"account_id":450119,"reputation":2794,"user_id":845279,"accept_rate":88,"display_name":"user845279"},"score":0,"creation_date":1336104409,"post_id":10442406,"comment_id":13481272,"body_markdown":"You should take a look at http://docs.oracle.com/javase/tutorial/uiswing/components/progress.html even though it seems complicated. What you need to do is run the download in another thread (backgroundworker). Then the main (gui) thread does the progressBar animation. The way you are doing it is actually the other way around.","body":"You should take a look at <a href=\"http://docs.oracle.com/javase/tutorial/uiswing/components/progress.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/uiswing/components/&hellip;</a> even though it seems complicated. What you need to do is run the download in another thread (backgroundworker). Then the main (gui) thread does the progressBar animation. The way you are doing it is actually the other way around."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1336106362,"post_id":10442406,"comment_id":13481614,"body_markdown":"Please see **Edit 2** to my answer to crrect some problems.","body":"Please see <b>Edit 2</b> to my answer to crrect some problems."}],"answers":[{"comments":[{"owner":{"account_id":525345,"reputation":2339,"user_id":927604,"accept_rate":76,"display_name":"Bill"},"score":0,"creation_date":1336103814,"post_id":10442437,"comment_id":13481167,"body_markdown":"can I just create a new thread object within the buttonClicked() function? The thing is I have my API and library of all the functionality that I&#39;m developing the GUI to, and it seems like a longwinded workaround to wrap that function call in a thread.","body":"can I just create a new thread object within the buttonClicked() function? The thing is I have my API and library of all the functionality that I&#39;m developing the GUI to, and it seems like a longwinded workaround to wrap that function call in a thread."},{"owner":{"account_id":525345,"reputation":2339,"user_id":927604,"accept_rate":76,"display_name":"Bill"},"score":0,"creation_date":1336105075,"post_id":10442437,"comment_id":13481371,"body_markdown":"Thank you for your time so far. I&#39;m going along with that approach and I&#39;ll mark the answer accepted once I get this working. It&#39;s a wee frustrating that building a simple GUI for my otherwise well constructed protocol library is turning out to take so much more time and code than I thought it originally would be..","body":"Thank you for your time so far. I&#39;m going along with that approach and I&#39;ll mark the answer accepted once I get this working. It&#39;s a wee frustrating that building a simple GUI for my otherwise well constructed protocol library is turning out to take so much more time and code than I thought it originally would be.."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1336105244,"post_id":10442437,"comment_id":13481413,"body_markdown":"@B.VB: frustrating yes, but unavoidable, in any language. You can&#39;t step on the thread that is interacting with the user or drawing the GUI if you want your GUI to remain responsive, and so background threading for these situations is a must.","body":"@B.VB: frustrating yes, but unavoidable, in any language. You can&#39;t step on the thread that is interacting with the user or drawing the GUI if you want your GUI to remain responsive, and so background threading for these situations is a must."}],"tags":[],"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"comment_count":3,"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1336106347,"creation_date":1336103299,"answer_id":10442437,"question_id":10442406,"body_markdown":"Your current code shows no creation of a background thread, but rather it shows you trying to queue code on the Swing thread ***from within*** the Swing thread which doesn&#39;t make sense for this problem (although there are occasional times when you may want to do this, but again, not here). The only way for this to succeed is to use a background thread. The standard Oracle [JProgressBar tutorial](http://docs.oracle.com/javase/tutorial/uiswing/components/progress.html) and [Concurrency in Swing](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html) goes through all of this. \r\n\r\nThe basic thing is that you must update the JProgressBar from the Swing Thread will doing your long-running process in the background thread, such as that provided by a SwingWorker object. There are too many details for us to review all here, and so all I can do is provide a link, but we&#39;ll be happy to help you understand the details once you review the tutorials. Just check the tutorials and come on back with your specific questions if you&#39;re still stuck.\r\n\r\n**Edit 1**  \r\nYou state:  \r\n&gt; can I just create a new thread object within the buttonClicked() function? \r\n\r\nYes, you can create a SwingWorker object inside of the `buttonClicked()` *method* and execute it there. \r\n\r\n&gt; The thing is I have my API and library of all the functionality that I&#39;m developing the GUI to, and it seems like a longwinded workaround to wrap that function call in a thread.\r\n\r\nSorry, but I have no idea what you&#39;re saying here or what issues you think threading will cause. The `buttonClicked()` method likely *must* run on the EDT and not in a background thread. \r\n\r\nAlso note that in most of my more complex Swing GUI&#39;s, I often do my file downloading in a different (model) object and create my SwingWorker in a different object still (control) from the GUI object (the view). It may seem more complicated to do it this way, but it&#39;s a ***lot*** easier to debug, maintain and enhance my program when I do it this way, especially when I heavily use interfaces to allow me to test all program components in isolation.\r\n\r\n**Edit 2**  \r\nSome corrections to your solution post. You posted:\r\n\r\n    public void buttonClicked() {\r\n      class MyWorker extends SwingWorker(String, Object) {\r\n         protected String runInBackground() {\r\n           progressBar.setVisible(true);\r\n           progressBar.setIndeterminate(true);\r\n    \r\n           // ...\r\n\r\nwhich has problems \r\n\r\n* it&#39;s `doInBackground()`, not `runInBackground()`\r\n* but more importantly, you&#39;re making Swing calls from within a background thread, something that should never be done (unless the call is thread safe, and even then...).\r\n\r\nSo change it:\r\n\r\n    public void buttonClicked() {\r\n      progressBar.setVisible(true);\r\n      progressBar.setIndeterminate(true);\r\n      class MyWorker extends SwingWorker&lt;String, Void&gt; {\r\n         protected String doInBackground() {\r\n    \r\n           // ...","title":"Basic Indeterminate JProgress Bar Usage","body":"<p>Your current code shows no creation of a background thread, but rather it shows you trying to queue code on the Swing thread <strong><em>from within</em></strong> the Swing thread which doesn't make sense for this problem (although there are occasional times when you may want to do this, but again, not here). The only way for this to succeed is to use a background thread. The standard Oracle <a href=\"http://docs.oracle.com/javase/tutorial/uiswing/components/progress.html\">JProgressBar tutorial</a> and <a href=\"http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html\">Concurrency in Swing</a> goes through all of this. </p>\n\n<p>The basic thing is that you must update the JProgressBar from the Swing Thread will doing your long-running process in the background thread, such as that provided by a SwingWorker object. There are too many details for us to review all here, and so all I can do is provide a link, but we'll be happy to help you understand the details once you review the tutorials. Just check the tutorials and come on back with your specific questions if you're still stuck.</p>\n\n<p><strong>Edit 1</strong><br>\nYou state:  </p>\n\n<blockquote>\n  <p>can I just create a new thread object within the buttonClicked() function? </p>\n</blockquote>\n\n<p>Yes, you can create a SwingWorker object inside of the <code>buttonClicked()</code> <em>method</em> and execute it there. </p>\n\n<blockquote>\n  <p>The thing is I have my API and library of all the functionality that I'm developing the GUI to, and it seems like a longwinded workaround to wrap that function call in a thread.</p>\n</blockquote>\n\n<p>Sorry, but I have no idea what you're saying here or what issues you think threading will cause. The <code>buttonClicked()</code> method likely <em>must</em> run on the EDT and not in a background thread. </p>\n\n<p>Also note that in most of my more complex Swing GUI's, I often do my file downloading in a different (model) object and create my SwingWorker in a different object still (control) from the GUI object (the view). It may seem more complicated to do it this way, but it's a <strong><em>lot</em></strong> easier to debug, maintain and enhance my program when I do it this way, especially when I heavily use interfaces to allow me to test all program components in isolation.</p>\n\n<p><strong>Edit 2</strong><br>\nSome corrections to your solution post. You posted:</p>\n\n<pre><code>public void buttonClicked() {\n  class MyWorker extends SwingWorker(String, Object) {\n     protected String runInBackground() {\n       progressBar.setVisible(true);\n       progressBar.setIndeterminate(true);\n\n       // ...\n</code></pre>\n\n<p>which has problems </p>\n\n<ul>\n<li>it's <code>doInBackground()</code>, not <code>runInBackground()</code></li>\n<li>but more importantly, you're making Swing calls from within a background thread, something that should never be done (unless the call is thread safe, and even then...).</li>\n</ul>\n\n<p>So change it:</p>\n\n<pre><code>public void buttonClicked() {\n  progressBar.setVisible(true);\n  progressBar.setIndeterminate(true);\n  class MyWorker extends SwingWorker&lt;String, Void&gt; {\n     protected String doInBackground() {\n\n       // ...\n</code></pre>\n"}],"owner":{"account_id":525345,"reputation":2339,"user_id":927604,"accept_rate":76,"display_name":"Bill"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19785,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":10442437,"answer_count":1,"score":6,"last_activity_date":1694179799,"creation_date":1336102968,"question_id":10442406,"body_markdown":"I simply want to have an indeterminate JProgressBar animate in the bottom left corner of my frame when a long download is being done.\r\n\r\nI&#39;ve looked through many tutorials, none of which are clear to me. I simply want to have it animate while the file is being downloaded in the background. Each way I&#39;ve tried this, it doesn&#39;t animate the progress bar until *after* the download is done.\r\n\r\nI need help knowing where to place my download() call.\r\n\r\n    class MyFunClass extends JFrame {\r\n      JProgressBar progressBar = new JProgressBar();\r\n    \r\n      public void buttonClicked() {\r\n        progressBar.setVisible(true);      \r\n        progressBar.setIndeterminate(true);\r\n    \r\n        SwingUtilities.invokeLater(new Runnable() {\r\n          public void run() {\r\n            progressBar.setIndeterminate(true);\r\n            progressBar.setVisible(true);\r\n    \r\n            // Do I do my download() in here??\r\n    \r\n        }});\r\n    \r\n        // Do download() here???\r\n        progressBar.setVisible(false);\r\n      }\r\n    }\r\n\r\nThanks in advance!\r\n\r\n\r\n----------\r\n&lt;br /&gt;\r\nSolution\r\n========\r\n\r\n*Edit:* For those who have a similar issue to me in the future, this is the basic solution for a basic problem. This isn&#39;t my code verbatim, but a general sketch. Inside `buttonClicked()`:\r\n\r\n    public void buttonClicked() {\r\n      class MyWorker extends SwingWorker(String, Object) {\r\n         protected String doInBackground() {\r\n           progressBar.setVisible(true);      &lt;-- should be on the EDT\r\n           progressBar.setIndeterminate(true);&lt;-- should be on the EDT\r\n    \r\n           // Do my downloading code\r\n           return &quot;Done.&quot;\r\n         }\r\n    \r\n         protected void done() {\r\n            progressBar.setVisible(false)\r\n         }\r\n      }\r\n\r\n      new MyWorker().execute();\r\n    \r\n    }","title":"Basic Indeterminate JProgress Bar Usage","body":"<p>I simply want to have an indeterminate JProgressBar animate in the bottom left corner of my frame when a long download is being done.</p>\n<p>I've looked through many tutorials, none of which are clear to me. I simply want to have it animate while the file is being downloaded in the background. Each way I've tried this, it doesn't animate the progress bar until <em>after</em> the download is done.</p>\n<p>I need help knowing where to place my download() call.</p>\n<pre><code>class MyFunClass extends JFrame {\n  JProgressBar progressBar = new JProgressBar();\n\n  public void buttonClicked() {\n    progressBar.setVisible(true);      \n    progressBar.setIndeterminate(true);\n\n    SwingUtilities.invokeLater(new Runnable() {\n      public void run() {\n        progressBar.setIndeterminate(true);\n        progressBar.setVisible(true);\n\n        // Do I do my download() in here??\n\n    }});\n\n    // Do download() here???\n    progressBar.setVisible(false);\n  }\n}\n</code></pre>\n<p>Thanks in advance!</p>\n<hr />\n<br />\nSolution\n========\n<p><em>Edit:</em> For those who have a similar issue to me in the future, this is the basic solution for a basic problem. This isn't my code verbatim, but a general sketch. Inside <code>buttonClicked()</code>:</p>\n<pre><code>public void buttonClicked() {\n  class MyWorker extends SwingWorker(String, Object) {\n     protected String doInBackground() {\n       progressBar.setVisible(true);      &lt;-- should be on the EDT\n       progressBar.setIndeterminate(true);&lt;-- should be on the EDT\n\n       // Do my downloading code\n       return &quot;Done.&quot;\n     }\n\n     protected void done() {\n        progressBar.setVisible(false)\n     }\n  }\n\n  new MyWorker().execute();\n\n}\n</code></pre>\n"},{"tags":["java","caching","redis","redisson"],"answers":[{"tags":[],"owner":{"account_id":27911097,"reputation":1,"user_id":21313281,"display_name":"PLANESARECOOL"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694179431,"creation_date":1694179431,"answer_id":77067297,"question_id":76247304,"body_markdown":"I was also experiencing a problem involving a `RedisTimeoutException` and a solution I found was increasing the `RetryInterval` property of the config object. \r\n\r\nThe default value for this property is 1500 milliseconds, which you have set to 0 here. As per [Redisson Wiki](https://github.com/redisson/redisson/wiki/16.-FAQ), increasing this value may given Redisson a little more time before the operation fails. \r\n\r\nAs I was struggling with the problem in the past, I hope this answer provides you with a little information that will prevent such situations.","title":"Java Redisson Client Redis Exceptions : org.redisson.client.RedisTimeoutException","body":"<p>I was also experiencing a problem involving a <code>RedisTimeoutException</code> and a solution I found was increasing the <code>RetryInterval</code> property of the config object.</p>\n<p>The default value for this property is 1500 milliseconds, which you have set to 0 here. As per <a href=\"https://github.com/redisson/redisson/wiki/16.-FAQ\" rel=\"nofollow noreferrer\">Redisson Wiki</a>, increasing this value may given Redisson a little more time before the operation fails.</p>\n<p>As I was struggling with the problem in the past, I hope this answer provides you with a little information that will prevent such situations.</p>\n"}],"owner":{"account_id":2814933,"reputation":2695,"user_id":2420280,"accept_rate":54,"display_name":"Osama Jetawe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":464,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1694179431,"creation_date":1684064647,"question_id":76247304,"body_markdown":"I&#39;m setting up a Redis cache layer using **AWS Elasticache Redis** version **7.0.7**\r\n\r\nI&#39;m usign Java Redisson client version **3.16.0** and java version **1.8**\r\n\r\nHowever one of the requirement is to setup a fallback mechanism to fallback to the downstream service or database method whenever there is any exception on Redis operation\r\n\r\nBelow is my Redisson client configurations\r\n\r\n\r\n    redissonConfig.setNettyThreads(128);\r\n\tredissonConfig.useClusterServers()\r\n\t\t\t.setKeepAlive(true)\r\n\t\t\t.setConnectTimeout(5000)\r\n\t\t\t.setRetryAttempts(0)\r\n\t\t\t.setRetryInterval(0)\r\n\t\t\t.setPingConnectionInterval(10000)\r\n\t\t\t.setDnsMonitoringInterval(20000)\r\n\t\t\t.addNodeAddress(redisAddress);\r\n\tRedissonClient client = Redisson.create(redissonConfig);\r\n\treturn client;\r\n\r\nHowever I&#39;m getting below intermittent exceptions on read/write and on **evict Redis operations**\r\n\r\n1-Read write operation Exceptions:\r\n\r\n   \r\n\r\n    exception: org.redisson.client.RedisTimeoutException: Command still hasn&#39;t been written into connection! Try to increase nettyThreads setting. Payload size in bytes: 52. Node source: NodeSource [slot=8995, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@573846890 [redisClient=[addr=rediss://xxxxx:6379], channel=[id: 0x93e5c3e6, L:/:38098 - R:xxx], currentCommand=null], command: (EVAL), params: [local value = redis.call(&#39;hget&#39;, KEYS[1], ARGV[2]); if value == false then return nil; end; local t,..., 5, data, redisson__timeout__set:{data}, redisson__idle__set:{data}, redisson__map_cache__last_access__set:{data}, {data}:redisson_options, 1684331276823, PooledUnsafeDirectByteBuf(ridx: 0, widx: 52, cap: 256)] after 0 retry attempts\r\n\r\n2- Exceptions when **Redisson** job try to evict the cache, I’m resolving this by doing manual eviction through redis-cli\r\n\r\n    exception: org.redisson.client.RedisException: ERR user_script:1: bad argument #2 to &#39;unpack&#39; (data string too short) script: 401d7fca9b4e9022dffaa4fd236958c2babbc2f3, on @user_script:1.. channel: [id: 0x064bccc5\r\n\r\n\r\nAppreciate if you have any recommendation to prevent such issues.   \r\n\r\n\r\nNote: the fallback mechanism is working as expected.\r\n\r\nThanks\r\n\r\n\r\n\r\n\r\n","title":"Java Redisson Client Redis Exceptions : org.redisson.client.RedisTimeoutException","body":"<p>I'm setting up a Redis cache layer using <strong>AWS Elasticache Redis</strong> version <strong>7.0.7</strong></p>\n<p>I'm usign Java Redisson client version <strong>3.16.0</strong> and java version <strong>1.8</strong></p>\n<p>However one of the requirement is to setup a fallback mechanism to fallback to the downstream service or database method whenever there is any exception on Redis operation</p>\n<p>Below is my Redisson client configurations</p>\n<pre><code>redissonConfig.setNettyThreads(128);\nredissonConfig.useClusterServers()\n        .setKeepAlive(true)\n        .setConnectTimeout(5000)\n        .setRetryAttempts(0)\n        .setRetryInterval(0)\n        .setPingConnectionInterval(10000)\n        .setDnsMonitoringInterval(20000)\n        .addNodeAddress(redisAddress);\nRedissonClient client = Redisson.create(redissonConfig);\nreturn client;\n</code></pre>\n<p>However I'm getting below intermittent exceptions on read/write and on <strong>evict Redis operations</strong></p>\n<p>1-Read write operation Exceptions:</p>\n<pre><code>exception: org.redisson.client.RedisTimeoutException: Command still hasn't been written into connection! Try to increase nettyThreads setting. Payload size in bytes: 52. Node source: NodeSource [slot=8995, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@573846890 [redisClient=[addr=rediss://xxxxx:6379], channel=[id: 0x93e5c3e6, L:/:38098 - R:xxx], currentCommand=null], command: (EVAL), params: [local value = redis.call('hget', KEYS[1], ARGV[2]); if value == false then return nil; end; local t,..., 5, data, redisson__timeout__set:{data}, redisson__idle__set:{data}, redisson__map_cache__last_access__set:{data}, {data}:redisson_options, 1684331276823, PooledUnsafeDirectByteBuf(ridx: 0, widx: 52, cap: 256)] after 0 retry attempts\n</code></pre>\n<p>2- Exceptions when <strong>Redisson</strong> job try to evict the cache, I’m resolving this by doing manual eviction through redis-cli</p>\n<pre><code>exception: org.redisson.client.RedisException: ERR user_script:1: bad argument #2 to 'unpack' (data string too short) script: 401d7fca9b4e9022dffaa4fd236958c2babbc2f3, on @user_script:1.. channel: [id: 0x064bccc5\n</code></pre>\n<p>Appreciate if you have any recommendation to prevent such issues.</p>\n<p>Note: the fallback mechanism is working as expected.</p>\n<p>Thanks</p>\n"},{"tags":["java","spring","spring-boot","websocket","asyncapi"],"answers":[{"tags":[],"owner":{"account_id":9148581,"reputation":703,"user_id":6803886,"accept_rate":75,"display_name":"jonaslagoni"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694179189,"creation_date":1645517646,"answer_id":71217914,"question_id":71177019,"body_markdown":"That&#39;s because the template does not support anything other than [`Kafka`, `AMQP`, and `MQTT` protocols][1].\r\n\r\nAs of this writing, there does not exist any template for you to generate Java code for the WebSocket protocol.\r\n\r\nIf you want the template to support the protocol, please create a feature request for it.\r\n\r\nOr you could [author your own template][2] if you&#39;d like.\r\n\r\n\r\n  [1]: https://github.com/asyncapi/java-spring-template/blob/ae864fb1a1f1ad47b801caf843947e3caf91550e/package.json#L46\r\n  [2]: https://github.com/asyncapi/generator/blob/master/docs/authoring.md","title":"AsyncAPI Websockets Spring generated code and implementation","body":"<p>That's because the template does not support anything other than <a href=\"https://github.com/asyncapi/java-spring-template/blob/ae864fb1a1f1ad47b801caf843947e3caf91550e/package.json#L46\" rel=\"nofollow noreferrer\"><code>Kafka</code>, <code>AMQP</code>, and <code>MQTT</code> protocols</a>.</p>\n<p>As of this writing, there does not exist any template for you to generate Java code for the WebSocket protocol.</p>\n<p>If you want the template to support the protocol, please create a feature request for it.</p>\n<p>Or you could <a href=\"https://github.com/asyncapi/generator/blob/master/docs/authoring.md\" rel=\"nofollow noreferrer\">author your own template</a> if you'd like.</p>\n"}],"owner":{"account_id":10708241,"reputation":43,"user_id":7881247,"display_name":"nubi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":912,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":71217914,"answer_count":1,"score":3,"last_activity_date":1694179189,"creation_date":1645202600,"question_id":71177019,"body_markdown":"I want to generate code from AsyncAPI specification and try out how it works. My goal is to have only 1 socket open for each client and over that connection send/receive different types of messages. I couldnt find any example that would show me how to generate the code and run it.\r\n\r\nHere is the API yaml\r\n```\r\nasyncapi: &#39;2.3.0&#39;\r\ninfo:\r\n  title: demo\r\n  version: &#39;1.0.0&#39;\r\n  description: websocket demo\r\n\r\nservers:\r\n  test:\r\n    url: localhost\r\n    protocol: ws\r\n\r\nchannels:\r\n  data:\r\n    publish:\r\n      operationId: publishData\r\n      message:\r\n        $ref: &#39;#/components/messages/dataMessage&#39;\r\n    subscribe:\r\n      operationId: subscribeData\r\n      message:\r\n        $ref: &#39;#/components/messages/dataMessage&#39;\r\n\r\ncomponents:\r\n  messages:\r\n    dataMessage:\r\n      headers:\r\n        $ref: &quot;#/components/schemas/MessageHeader&quot;\r\n      payload:\r\n        oneOf:\r\n          - $ref: &quot;#/components/schemas/FirstPayloadType&quot;\r\n          - $ref: &quot;#/components/schemas/SecondPayloadType&quot;\r\n\r\n  schemas:\r\n    MessageHeader:\r\n      type: object\r\n      properties:\r\n        messageType:\r\n          enum:\r\n            - a\r\n            - b\r\n            - c\r\n\r\n    FirstPayloadType:\r\n      type: object\r\n      properties:\r\n        x:\r\n          type: string\r\n        y:\r\n          type: number\r\n\r\n    SecondPayloadType:\r\n      type: object\r\n      properties:\r\n        op:\r\n          type: string\r\n        tar:\r\n          type: string\r\n```\r\n\r\nThen i use https://github.com/asyncapi/generator to generate the java code from this yaml with\r\n```\r\nag asyncapi.yaml @asyncapi/java-spring-template\r\n```\r\n\r\nAnd thats where Im stuck, it uses springframework messaging and i dont know how to configure/implement it while using the generated message handler. Or maybe im missing something in the yaml so it doesnt generate properly.","title":"AsyncAPI Websockets Spring generated code and implementation","body":"<p>I want to generate code from AsyncAPI specification and try out how it works. My goal is to have only 1 socket open for each client and over that connection send/receive different types of messages. I couldnt find any example that would show me how to generate the code and run it.</p>\n<p>Here is the API yaml</p>\n<pre><code>asyncapi: '2.3.0'\ninfo:\n  title: demo\n  version: '1.0.0'\n  description: websocket demo\n\nservers:\n  test:\n    url: localhost\n    protocol: ws\n\nchannels:\n  data:\n    publish:\n      operationId: publishData\n      message:\n        $ref: '#/components/messages/dataMessage'\n    subscribe:\n      operationId: subscribeData\n      message:\n        $ref: '#/components/messages/dataMessage'\n\ncomponents:\n  messages:\n    dataMessage:\n      headers:\n        $ref: &quot;#/components/schemas/MessageHeader&quot;\n      payload:\n        oneOf:\n          - $ref: &quot;#/components/schemas/FirstPayloadType&quot;\n          - $ref: &quot;#/components/schemas/SecondPayloadType&quot;\n\n  schemas:\n    MessageHeader:\n      type: object\n      properties:\n        messageType:\n          enum:\n            - a\n            - b\n            - c\n\n    FirstPayloadType:\n      type: object\n      properties:\n        x:\n          type: string\n        y:\n          type: number\n\n    SecondPayloadType:\n      type: object\n      properties:\n        op:\n          type: string\n        tar:\n          type: string\n</code></pre>\n<p>Then i use <a href=\"https://github.com/asyncapi/generator\" rel=\"nofollow noreferrer\">https://github.com/asyncapi/generator</a> to generate the java code from this yaml with</p>\n<pre><code>ag asyncapi.yaml @asyncapi/java-spring-template\n</code></pre>\n<p>And thats where Im stuck, it uses springframework messaging and i dont know how to configure/implement it while using the generated message handler. Or maybe im missing something in the yaml so it doesnt generate properly.</p>\n"},{"tags":["java","maven","variables","command-line"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":2,"creation_date":1694179142,"post_id":77067244,"comment_id":135861175,"body_markdown":"I think you need to put `${build_version}` not `$build_version`","body":"I think you need to put <code>${build_version}</code> not <code>$build_version</code>"},{"owner":{"account_id":1010971,"reputation":11524,"user_id":1023553,"accept_rate":59,"display_name":"NoDataFound"},"score":0,"creation_date":1694179244,"post_id":77067244,"comment_id":135861201,"body_markdown":"The same apply for the other properties (eg: `${db_pwd}` not `$db_pwd`).","body":"The same apply for the other properties (eg: <code>${db_pwd}</code> not <code>$db_pwd</code>)."},{"owner":{"account_id":2090213,"reputation":1431,"user_id":1860222,"accept_rate":52,"display_name":"pbuchheit"},"score":0,"creation_date":1694179402,"post_id":77067244,"comment_id":135861243,"body_markdown":"@Jorn I think you are correct. Thanks.","body":"@Jorn I think you are correct. Thanks."}],"owner":{"account_id":2090213,"reputation":1431,"user_id":1860222,"accept_rate":52,"display_name":"pbuchheit"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694179067,"creation_date":1694179067,"question_id":77067244,"body_markdown":"I&#39;m working on a build script to compile a WAR using maven. I want to be able to pass in certain values like the version number from the command line when I run the maven command. After some research I found that you can pass in values using a -D flag. I thought I had it figured out, but something is not quite working. My pom.xml looks like this:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;packaging&gt;war&lt;/packaging&gt;\r\n    \t&lt;name&gt;myapp&lt;/name&gt;\r\n    \t&lt;description&gt;This is an app&lt;/description&gt;\r\n    \t&lt;properties&gt;\r\n    \t\t&lt;java.version&gt;11&lt;/java.version&gt;\r\n    \t\t&lt;db.password&gt;$db_pwd&lt;/db.password&gt;\r\n    \t\t&lt;email.key&gt;$email_key&lt;/email.key&gt;\r\n    \t\t&lt;modo.api.token&gt;$modo_api_token&lt;/modo.api.token&gt;\r\n    \t\t&lt;modo.auth.shared&gt;$modo_auth_shared&lt;/modo.auth.shared&gt;\r\n    \t\t&lt;build.version&gt;$build_version&lt;/build.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \t&lt;version&gt;${build.version}&lt;/version&gt;\r\n    ...\r\n\r\nI then execute the compile with the command \r\n\r\n&gt; mvn clean package -Dbuild_version=0.0.2-SNAPSHOT\r\n\r\nFor some reason, the variable replacement doesn&#39;t work. I end up with a WAR file named myapp-$build_version.war instead of myapp-0.0.2-SNAPSHOT.war . I&#39;m not quite sure what I&#39;m doing wrong here. Any suggestions?","title":"Passing in a user-defined variable value for maven from the command lne","body":"<p>I'm working on a build script to compile a WAR using maven. I want to be able to pass in certain values like the version number from the command line when I run the maven command. After some research I found that you can pass in values using a -D flag. I thought I had it figured out, but something is not quite working. My pom.xml looks like this:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;name&gt;myapp&lt;/name&gt;\n    &lt;description&gt;This is an app&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;11&lt;/java.version&gt;\n        &lt;db.password&gt;$db_pwd&lt;/db.password&gt;\n        &lt;email.key&gt;$email_key&lt;/email.key&gt;\n        &lt;modo.api.token&gt;$modo_api_token&lt;/modo.api.token&gt;\n        &lt;modo.auth.shared&gt;$modo_auth_shared&lt;/modo.auth.shared&gt;\n        &lt;build.version&gt;$build_version&lt;/build.version&gt;\n    &lt;/properties&gt;\n    &lt;version&gt;${build.version}&lt;/version&gt;\n...\n</code></pre>\n<p>I then execute the compile with the command</p>\n<blockquote>\n<p>mvn clean package -Dbuild_version=0.0.2-SNAPSHOT</p>\n</blockquote>\n<p>For some reason, the variable replacement doesn't work. I end up with a WAR file named myapp-$build_version.war instead of myapp-0.0.2-SNAPSHOT.war . I'm not quite sure what I'm doing wrong here. Any suggestions?</p>\n"},{"tags":["java","spring-boot","docker-compose","oauth-2.0","keycloak"],"owner":{"account_id":28684108,"reputation":35,"user_id":21964694,"display_name":"Sonnka"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1694178812,"creation_date":1694178812,"question_id":77067219,"body_markdown":"Oauth2 with Keylock does not work for me. I get this error page.\r\n[![enter image description here][1]][1]\r\nI have a microservice architecture, with auth-service and gateway. All my services and Keylock are run using docker-compose.  \r\nMy docker-compose :\r\n```\r\n  gateway-server:\r\n    image: &#39;gateway-server:1.0&#39;\r\n    container_name: gateway\r\n    ports:\r\n      - &quot;8080:8080&quot;\r\n    restart: on-failure\r\n    environment:\r\n      - SPRING_PROFILES_ACTIVE=prod\r\n      - EUREKA_CLIENT_SERVICEURL_DEFAULTZONE=http://eureka-server:8761/eureka\r\n    depends_on:\r\n      - eureka-server\r\n    networks:\r\n      - mynet\r\n\r\n  auth-server:\r\n    image: &#39;auth-service:1.0&#39;\r\n    container_name: auth-server\r\n    ports:\r\n      - &quot;8081:8081&quot;\r\n    restart: on-failure\r\n    environment:\r\n      - SPRING_PROFILES_ACTIVE=prod\r\n      - EUREKA_CLIENT_SERVICEURL_DEFAULTZONE=http://eureka-server:8761/eureka\r\n      - SPRING_DATASOURCE_URL=jdbc:postgresql://db:5432/mydb\r\n      - SPRING_DATASOURCE_USERNAME=username\r\n      - SPRING_DATASOURCE_PASSWORD=password\r\n    depends_on:\r\n      - eureka-server\r\n      - db\r\n      - keycloak-service\r\n    networks:\r\n      - mynet\r\n\r\nkeycloak-service:\r\n    image: &#39;keycloak/keycloak:latest&#39;\r\n    container_name: keycloak-service\r\n    environment:\r\n      - KEYCLOAK_ADMIN=admin\r\n      - KEYCLOAK_ADMIN_PASSWORD=password\r\n    ports:\r\n      - &quot;8085:8085&quot;\r\n    command:\r\n      - start-dev\r\n      - --http-port=8085\r\n    restart: always\r\n    networks:\r\n      mynet:\r\n        aliases:\r\n          - keycloak-service:8085\r\n\r\n\r\nnetworks:\r\n  mynet:\r\n\r\n```\r\nAlso, I made changes to the hosts file so that I could do redirect to Keycloak. \r\n\r\nhosts file : \r\n```\r\n127.0.0.1\tlocalhost\r\n127.0.0.1\tkeycloak-service\r\n```\r\n\r\nHere are my Keycloak config:\r\n``` \r\n@Configuration\r\n@Getter\r\n@Setter\r\n@RequiredArgsConstructor\r\n@ConfigurationProperties(&quot;keycloak&quot;)\r\npublic class KeycloakConfig {\r\n\r\n    private String serverUrl;\r\n\r\n    private String realm;\r\n\r\n    private String clientId;\r\n\r\n    private String username;\r\n\r\n    private String password;\r\n\r\n    private String roleBuyer;\r\n\r\n    private String roleAdmin;\r\n\r\n    private String secret;\r\n\r\n    @Bean\r\n    public Keycloak keycloak() {\r\n        ResteasyClientBuilder resteasyClientBuilder = new ResteasyClientBuilderImpl();\r\n\r\n        Keycloak keycloak = KeycloakBuilder.builder()\r\n                .serverUrl(serverUrl)\r\n                .grantType(OAuth2Constants.PASSWORD)\r\n                .realm(&quot;master&quot;)\r\n                .clientId(&quot;admin-cli&quot;)\r\n                .username(username)\r\n                .password(password)\r\n                .resteasyClient(resteasyClientBuilder.connectionPoolSize(10).build())\r\n                .build();\r\n\r\n        RealmRepresentation newRealm = new RealmRepresentation();\r\n        newRealm.setId(realm);\r\n        newRealm.setRealm(realm);\r\n        newRealm.setEnabled(true);\r\n\r\n        keycloak.realms().create(newRealm);\r\n\r\n        ClientRepresentation clientRepresentation = new ClientRepresentation();\r\n        clientRepresentation.setClientId(clientId);\r\n        clientRepresentation.setRedirectUris(List.of(&quot;http://127.0.0.1:8080/auth-service/*&quot;));\r\n        clientRepresentation.setWebOrigins(List.of(&quot;http://127.0.0.1:8080/auth-service&quot;));\r\n        clientRepresentation.setSecret(secret);\r\n\r\n        keycloak.realm(realm).clients().create(clientRepresentation);\r\n\r\n        RoleRepresentation role1 = new RoleRepresentation();\r\n        role1.setId(roleBuyer);\r\n        role1.setName(roleBuyer);\r\n        role1.setClientRole(true);\r\n\r\n        RoleRepresentation role2 = new RoleRepresentation();\r\n        role2.setId(roleAdmin);\r\n        role2.setName(roleAdmin);\r\n        role2.setClientRole(true);\r\n\r\n        keycloak.realm(realm).roles().create(role1);\r\n        keycloak.realm(realm).roles().create(role2);\r\n\r\n        return keycloak;\r\n    }\r\n}\r\n``` \r\n\r\nMy security config :\r\n``` \r\n@Configuration\r\n@EnableWebSecurity\r\n@Getter@Setter\r\npublic class MyConfig {\r\n\r\n    @Value(&quot;${keycloak.secret}&quot;)\r\n    private String secret;\r\n\r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity httpSecurity) throws Exception {\r\n        httpSecurity.csrf().disable();\r\n        httpSecurity.authorizeHttpRequests()\r\n                .anyRequest().authenticated()\r\n                .and()\r\n                .oauth2Login();\r\n        httpSecurity.oauth2Client();\r\n\r\n        return  httpSecurity.build();\r\n    }\r\n\r\n    @Bean\r\n    public ClientRegistrationRepository clientRepository() {\r\n        ClientRegistration keycloak = keycloakClientRegistration();\r\n        return new InMemoryClientRegistrationRepository(keycloak);\r\n    }\r\n\r\n    private ClientRegistration keycloakClientRegistration() {\r\n\r\n        return ClientRegistration.withRegistrationId(&quot;teamgeist&quot;)\r\n                .clientId(&quot;teamgeist-backend&quot;)\r\n                .clientSecret(secret)\r\n                .scope(&quot;openid&quot;)\r\n                .redirectUri(&quot;http://127.0.0.1:8080/auth-service/login/oauth2/code/teamgeist-backend&quot;)\r\n                .authorizationGrantType(AuthorizationGrantType.AUTHORIZATION_CODE)\r\n                .issuerUri(&quot;http://keycloak-service:8085/realms/teamgeist&quot;)\r\n                .authorizationUri(&quot;http://keycloak-service:8085/realms/teamgeist/protocol/openid-connect/auth&quot;)\r\n                .tokenUri(&quot;http://keycloak-service:8085/realms/teamgeist/protocol/openid-connect/token&quot;)\r\n                .userInfoUri(&quot;http://keycloak-service:8085/realms/teamgeist/protocol/openid-connect/userinfo&quot;)\r\n                .build();\r\n    }\r\n}\r\n``` \r\n\r\nMy application.properties :\r\n``` \r\nspring.security.oauth2.client.registration.keycloak.client-id=teamgeist-backend\r\nspring.security.oauth2.client.registration.keycloak.authorization-grant-type=authorization_code\r\nspring.security.oauth2.client.registration.keycloak.scope=openid\r\nspring.security.oauth2.client.provider.keycloak.issuer-uri=http://keycloak-service:8085/realms/teamgeist\r\nspring.security.oauth2.client.registration.keycloak.client-secret=${keycloak.secret}\r\nspring.security.oauth2.client.registration.keycloak.redirect-uri=http://127.0.0.1:8080/auth-service/login/oauth2/code/teamgeist-backend\r\n``` \r\n\r\n\r\nI hope for your help.\r\n\r\n  [1]: https://i.stack.imgur.com/175gs.png","title":"Keycloak oauth2 [authorization_request_not_found]","body":"<p>Oauth2 with Keylock does not work for me. I get this error page.\n<a href=\"https://i.stack.imgur.com/175gs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/175gs.png\" alt=\"enter image description here\" /></a>\nI have a microservice architecture, with auth-service and gateway. All my services and Keylock are run using docker-compose.<br />\nMy docker-compose :</p>\n<pre><code>  gateway-server:\n    image: 'gateway-server:1.0'\n    container_name: gateway\n    ports:\n      - &quot;8080:8080&quot;\n    restart: on-failure\n    environment:\n      - SPRING_PROFILES_ACTIVE=prod\n      - EUREKA_CLIENT_SERVICEURL_DEFAULTZONE=http://eureka-server:8761/eureka\n    depends_on:\n      - eureka-server\n    networks:\n      - mynet\n\n  auth-server:\n    image: 'auth-service:1.0'\n    container_name: auth-server\n    ports:\n      - &quot;8081:8081&quot;\n    restart: on-failure\n    environment:\n      - SPRING_PROFILES_ACTIVE=prod\n      - EUREKA_CLIENT_SERVICEURL_DEFAULTZONE=http://eureka-server:8761/eureka\n      - SPRING_DATASOURCE_URL=jdbc:postgresql://db:5432/mydb\n      - SPRING_DATASOURCE_USERNAME=username\n      - SPRING_DATASOURCE_PASSWORD=password\n    depends_on:\n      - eureka-server\n      - db\n      - keycloak-service\n    networks:\n      - mynet\n\nkeycloak-service:\n    image: 'keycloak/keycloak:latest'\n    container_name: keycloak-service\n    environment:\n      - KEYCLOAK_ADMIN=admin\n      - KEYCLOAK_ADMIN_PASSWORD=password\n    ports:\n      - &quot;8085:8085&quot;\n    command:\n      - start-dev\n      - --http-port=8085\n    restart: always\n    networks:\n      mynet:\n        aliases:\n          - keycloak-service:8085\n\n\nnetworks:\n  mynet:\n\n</code></pre>\n<p>Also, I made changes to the hosts file so that I could do redirect to Keycloak.</p>\n<p>hosts file :</p>\n<pre><code>127.0.0.1   localhost\n127.0.0.1   keycloak-service\n</code></pre>\n<p>Here are my Keycloak config:</p>\n<pre><code>@Configuration\n@Getter\n@Setter\n@RequiredArgsConstructor\n@ConfigurationProperties(&quot;keycloak&quot;)\npublic class KeycloakConfig {\n\n    private String serverUrl;\n\n    private String realm;\n\n    private String clientId;\n\n    private String username;\n\n    private String password;\n\n    private String roleBuyer;\n\n    private String roleAdmin;\n\n    private String secret;\n\n    @Bean\n    public Keycloak keycloak() {\n        ResteasyClientBuilder resteasyClientBuilder = new ResteasyClientBuilderImpl();\n\n        Keycloak keycloak = KeycloakBuilder.builder()\n                .serverUrl(serverUrl)\n                .grantType(OAuth2Constants.PASSWORD)\n                .realm(&quot;master&quot;)\n                .clientId(&quot;admin-cli&quot;)\n                .username(username)\n                .password(password)\n                .resteasyClient(resteasyClientBuilder.connectionPoolSize(10).build())\n                .build();\n\n        RealmRepresentation newRealm = new RealmRepresentation();\n        newRealm.setId(realm);\n        newRealm.setRealm(realm);\n        newRealm.setEnabled(true);\n\n        keycloak.realms().create(newRealm);\n\n        ClientRepresentation clientRepresentation = new ClientRepresentation();\n        clientRepresentation.setClientId(clientId);\n        clientRepresentation.setRedirectUris(List.of(&quot;http://127.0.0.1:8080/auth-service/*&quot;));\n        clientRepresentation.setWebOrigins(List.of(&quot;http://127.0.0.1:8080/auth-service&quot;));\n        clientRepresentation.setSecret(secret);\n\n        keycloak.realm(realm).clients().create(clientRepresentation);\n\n        RoleRepresentation role1 = new RoleRepresentation();\n        role1.setId(roleBuyer);\n        role1.setName(roleBuyer);\n        role1.setClientRole(true);\n\n        RoleRepresentation role2 = new RoleRepresentation();\n        role2.setId(roleAdmin);\n        role2.setName(roleAdmin);\n        role2.setClientRole(true);\n\n        keycloak.realm(realm).roles().create(role1);\n        keycloak.realm(realm).roles().create(role2);\n\n        return keycloak;\n    }\n}\n</code></pre>\n<p>My security config :</p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@Getter@Setter\npublic class MyConfig {\n\n    @Value(&quot;${keycloak.secret}&quot;)\n    private String secret;\n\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity httpSecurity) throws Exception {\n        httpSecurity.csrf().disable();\n        httpSecurity.authorizeHttpRequests()\n                .anyRequest().authenticated()\n                .and()\n                .oauth2Login();\n        httpSecurity.oauth2Client();\n\n        return  httpSecurity.build();\n    }\n\n    @Bean\n    public ClientRegistrationRepository clientRepository() {\n        ClientRegistration keycloak = keycloakClientRegistration();\n        return new InMemoryClientRegistrationRepository(keycloak);\n    }\n\n    private ClientRegistration keycloakClientRegistration() {\n\n        return ClientRegistration.withRegistrationId(&quot;teamgeist&quot;)\n                .clientId(&quot;teamgeist-backend&quot;)\n                .clientSecret(secret)\n                .scope(&quot;openid&quot;)\n                .redirectUri(&quot;http://127.0.0.1:8080/auth-service/login/oauth2/code/teamgeist-backend&quot;)\n                .authorizationGrantType(AuthorizationGrantType.AUTHORIZATION_CODE)\n                .issuerUri(&quot;http://keycloak-service:8085/realms/teamgeist&quot;)\n                .authorizationUri(&quot;http://keycloak-service:8085/realms/teamgeist/protocol/openid-connect/auth&quot;)\n                .tokenUri(&quot;http://keycloak-service:8085/realms/teamgeist/protocol/openid-connect/token&quot;)\n                .userInfoUri(&quot;http://keycloak-service:8085/realms/teamgeist/protocol/openid-connect/userinfo&quot;)\n                .build();\n    }\n}\n</code></pre>\n<p>My application.properties :</p>\n<pre><code>spring.security.oauth2.client.registration.keycloak.client-id=teamgeist-backend\nspring.security.oauth2.client.registration.keycloak.authorization-grant-type=authorization_code\nspring.security.oauth2.client.registration.keycloak.scope=openid\nspring.security.oauth2.client.provider.keycloak.issuer-uri=http://keycloak-service:8085/realms/teamgeist\nspring.security.oauth2.client.registration.keycloak.client-secret=${keycloak.secret}\nspring.security.oauth2.client.registration.keycloak.redirect-uri=http://127.0.0.1:8080/auth-service/login/oauth2/code/teamgeist-backend\n</code></pre>\n<p>I hope for your help.</p>\n"},{"tags":["java","spring-boot","maven","gradle","jcenter"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1694200255,"post_id":77066404,"comment_id":135864979,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":29386643,"reputation":1,"user_id":22515965,"display_name":"Sourabh Patil"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694178623,"creation_date":1694171688,"question_id":77066404,"body_markdown":"Although I am downloading apache-rat gradle jar from a maven third-party repository, the url.host is being set to jcenter which leads to downloading all the dependencies from jcenter.\r\n\r\nclasspath &#39;gradle.plugin.org.nosphere.apache:creadur-rat-gradle:0.2.2&#39;\r\n","title":"How to restrict apache-rat plugin from downloading jcenter dependencies","body":"<p>Although I am downloading apache-rat gradle jar from a maven third-party repository, the url.host is being set to jcenter which leads to downloading all the dependencies from jcenter.</p>\n<p>classpath 'gradle.plugin.org.nosphere.apache:creadur-rat-gradle:0.2.2'</p>\n"},{"tags":["java","eclipse","javafx"],"comments":[{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1617297908,"post_id":66909010,"comment_id":118272065,"body_markdown":"Please tell us more specifically what you did exactly in which order.","body":"Please tell us more specifically what you did exactly in which order."},{"owner":{"account_id":17822776,"reputation":29,"user_id":12944760,"display_name":"Brandon Muller"},"score":0,"creation_date":1617299062,"post_id":66909010,"comment_id":118272495,"body_markdown":"I imported this project. I made the application.view package. Then I moved the FXML files to the package. Then i change the path in the main file to the new one which is application/view/Main.FXML. When i try to run i get the errors","body":"I imported this project. I made the application.view package. Then I moved the FXML files to the package. Then i change the path in the main file to the new one which is application/view/Main.FXML. When i try to run i get the errors"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1617318473,"post_id":66909010,"comment_id":118278691,"body_markdown":"The package is shown differently because it does not contain Java classes (it just looks grayed-out in your installed theme). The errors says `Main.fxml` is found but loading fails in line 11 (`Main.fxml:11`). By the way, the theme you have installed might cause issues and slow down Eclipse.","body":"The package is shown differently because it does not contain Java classes (it just looks grayed-out in your installed theme). The errors says <code>Main.fxml</code> is found but loading fails in line 11 (<code>Main.fxml:11</code>). By the way, the theme you have installed might cause issues and slow down Eclipse."}],"owner":{"account_id":17822776,"reputation":29,"user_id":12944760,"display_name":"Brandon Muller"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":359,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694178262,"creation_date":1617297789,"question_id":66909010,"body_markdown":"I am trying to put my javaFX FXML files into their own package. Whenever I do the package becomes greyed out and even though it shows as it should in my file system when I try to run the program it cannot find the files and gives me a load exception error. \r\n\r\n[What it looks like][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xGcek.png","title":"Java Package in Eclipse greyed out and Program unable to find file","body":"<p>I am trying to put my javaFX FXML files into their own package. Whenever I do the package becomes greyed out and even though it shows as it should in my file system when I try to run the program it cannot find the files and gives me a load exception error.</p>\n<p><a href=\"https://i.stack.imgur.com/xGcek.png\" rel=\"nofollow noreferrer\">What it looks like</a></p>\n"},{"tags":["java","ignite","gridgain"],"answers":[{"comments":[{"owner":{"account_id":4153235,"reputation":511,"user_id":3405101,"display_name":"Ildar Zaripov"},"score":1,"creation_date":1613930125,"post_id":66305218,"comment_id":117221991,"body_markdown":"Thanks for answer, but what do people do in production? What is considered to be a best practice?","body":"Thanks for answer, but what do people do in production? What is considered to be a best practice?"}],"tags":[],"owner":{"account_id":16644,"reputation":18841,"user_id":36498,"accept_rate":86,"display_name":"alamar"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1613929404,"creation_date":1613929404,"answer_id":66305218,"question_id":66303436,"body_markdown":"You can use domain names as well as IP addresses. But you can&#39;t use node discovery with thin clients.","title":"How to connect Apache Ignite Thin Client to Apache Ignite Cluster?","body":"<p>You can use domain names as well as IP addresses. But you can't use node discovery with thin clients.</p>\n"},{"tags":[],"owner":{"account_id":7125787,"reputation":771,"user_id":5448746,"display_name":"Ondřej Stašek"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694177474,"creation_date":1694177474,"answer_id":77067049,"question_id":66303436,"body_markdown":"I you need node discovery, you must use thick client, that uses same configuration as server nodes (for discovery), just set client mode to true so this node does not serve caches.\r\n\r\nYou get more capability as local caching, better discovery options, notifications, but it seems it is counted as server node for licensing purposes.","title":"How to connect Apache Ignite Thin Client to Apache Ignite Cluster?","body":"<p>I you need node discovery, you must use thick client, that uses same configuration as server nodes (for discovery), just set client mode to true so this node does not serve caches.</p>\n<p>You get more capability as local caching, better discovery options, notifications, but it seems it is counted as server node for licensing purposes.</p>\n"}],"owner":{"account_id":4153235,"reputation":511,"user_id":3405101,"display_name":"Ildar Zaripov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":727,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1694177474,"creation_date":1613918438,"question_id":66303436,"body_markdown":"I have a running Ignite cluster and I use `AWS S3` for node discovery:\r\n```java\r\nTcpDiscoveryS3IpFinder ipFinder = new TcpDiscoveryS3IpFinder();\r\nBasicAWSCredentials awsCredentials =\r\n    new BasicAWSCredentials(igniteAccessKey, igniteSecretAccessKey);\r\nipFinder.setAwsCredentials(awsCredentials);\r\nipFinder.setBucketName(igniteBucketName);\r\nipFinder.setBucketEndpoint(&quot;s3.eu-central-1.amazonaws.com&quot;);\r\n\r\nTcpDiscoverySpi spi = new TcpDiscoverySpi();\r\nspi.setIpFinder(ipFinder);\r\n\r\nIgniteConfiguration cfg = new IgniteConfiguration();\r\ncfg.setClientMode(true);\r\n\r\ncfg.setDiscoverySpi(spi);\r\nIgnition.start(cfg);    \r\n```\r\n\r\nIt works very well and I can connect to this cluster using `Apache Ignite Client` nodes.\r\n\r\nBut what about `Apache Ignite Thin Client`? `Thin client` uses `ClientConfiguration` class (instead of `IgniteConfiguration`) that requires a list of IP addresses of cluster nodes. AFAIK one can only hardcode that list of IP addresses.&lt;br/&gt; From official documentation:\r\n```Java\r\nClientConfiguration cfg = new ClientConfiguration().setAddresses(&quot;127.0.0.1:10800&quot;);\r\ntry (IgniteClient client = Ignition.startClient(cfg)) {\r\n    ClientCache&lt;Integer, String&gt; cache = client.cache(&quot;myCache&quot;);\r\n    // Get data from the cache\r\n}\r\n```\r\n\r\n\r\nSo I have questions:\r\n1. How should I handle situations when a list of IP addresses change?\r\n2. Is there any way to use **node discovery** for `Thin clients`?","title":"How to connect Apache Ignite Thin Client to Apache Ignite Cluster?","body":"<p>I have a running Ignite cluster and I use <code>AWS S3</code> for node discovery:</p>\n<pre class=\"lang-java prettyprint-override\"><code>TcpDiscoveryS3IpFinder ipFinder = new TcpDiscoveryS3IpFinder();\nBasicAWSCredentials awsCredentials =\n    new BasicAWSCredentials(igniteAccessKey, igniteSecretAccessKey);\nipFinder.setAwsCredentials(awsCredentials);\nipFinder.setBucketName(igniteBucketName);\nipFinder.setBucketEndpoint(&quot;s3.eu-central-1.amazonaws.com&quot;);\n\nTcpDiscoverySpi spi = new TcpDiscoverySpi();\nspi.setIpFinder(ipFinder);\n\nIgniteConfiguration cfg = new IgniteConfiguration();\ncfg.setClientMode(true);\n\ncfg.setDiscoverySpi(spi);\nIgnition.start(cfg);    \n</code></pre>\n<p>It works very well and I can connect to this cluster using <code>Apache Ignite Client</code> nodes.</p>\n<p>But what about <code>Apache Ignite Thin Client</code>? <code>Thin client</code> uses <code>ClientConfiguration</code> class (instead of <code>IgniteConfiguration</code>) that requires a list of IP addresses of cluster nodes. AFAIK one can only hardcode that list of IP addresses.<br/> From official documentation:</p>\n<pre><code>ClientConfiguration cfg = new ClientConfiguration().setAddresses(&quot;127.0.0.1:10800&quot;);\ntry (IgniteClient client = Ignition.startClient(cfg)) {\n    ClientCache&lt;Integer, String&gt; cache = client.cache(&quot;myCache&quot;);\n    // Get data from the cache\n}\n</code></pre>\n<p>So I have questions:</p>\n<ol>\n<li>How should I handle situations when a list of IP addresses change?</li>\n<li>Is there any way to use <strong>node discovery</strong> for <code>Thin clients</code>?</li>\n</ol>\n"},{"tags":["java","spring","hl7-fhir"],"owner":{"account_id":13795396,"reputation":37,"user_id":9956737,"display_name":"nikolas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694177224,"creation_date":1694177224,"question_id":77067012,"body_markdown":"i receved the error but i have included the resource in java spring project\r\n\r\n```\r\n14:37:17.010 [main] INFO ca.uhn.fhir.util.VersionUtil -- HAPI FHIR version 6.4.3 - Rev cfc9af8148\r\n14:37:17.029 [main] INFO ca.uhn.fhir.context.FhirContext -- Creating new FHIR context for FHIR version [R4]\r\n14:37:17.034 [main] INFO ca.uhn.fhir.validation.FhirValidator -- Ph-schematron library not found on classpath, will not attempt to perform schematron validation\r\n14:37:17.285 [main] WARN ca.uhn.fhir.validation.SchemaBaseValidator -- Jaxp 1.5 Support not found.\r\n```\r\ndependencies add for the pom.xml\r\n\r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;ca.uhn.hapi.fhir&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hapi-fhir-validation-resourcesr4&lt;/artifactId&gt;\r\n            &lt;version&gt;6.8.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.helger.schematron&lt;/groupId&gt;\r\n            &lt;artifactId&gt;ph-schematron-validator&lt;/artifactId&gt;\r\n            &lt;version&gt;7.1.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n","title":"Ph-schematron library not found on classpath?","body":"<p>i receved the error but i have included the resource in java spring project</p>\n<pre><code>14:37:17.010 [main] INFO ca.uhn.fhir.util.VersionUtil -- HAPI FHIR version 6.4.3 - Rev cfc9af8148\n14:37:17.029 [main] INFO ca.uhn.fhir.context.FhirContext -- Creating new FHIR context for FHIR version [R4]\n14:37:17.034 [main] INFO ca.uhn.fhir.validation.FhirValidator -- Ph-schematron library not found on classpath, will not attempt to perform schematron validation\n14:37:17.285 [main] WARN ca.uhn.fhir.validation.SchemaBaseValidator -- Jaxp 1.5 Support not found.\n</code></pre>\n<p>dependencies add for the pom.xml</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;ca.uhn.hapi.fhir&lt;/groupId&gt;\n            &lt;artifactId&gt;hapi-fhir-validation-resourcesr4&lt;/artifactId&gt;\n            &lt;version&gt;6.8.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.helger.schematron&lt;/groupId&gt;\n            &lt;artifactId&gt;ph-schematron-validator&lt;/artifactId&gt;\n            &lt;version&gt;7.1.2&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","maven","intellij-idea"],"comments":[{"owner":{"account_id":11179248,"reputation":11910,"user_id":8203759,"display_name":"Konstantin Annikov"},"score":0,"creation_date":1648007578,"post_id":71579607,"comment_id":126512499,"body_markdown":"May you share a more detailed error from the idea.log file? Like https://youtrack.jetbrains.com/issue/IDEA-215152#focus=Comments-27-3507751.0-0","body":"May you share a more detailed error from the idea.log file? Like <a href=\"https://youtrack.jetbrains.com/issue/IDEA-215152#focus=Comments-27-3507751.0-0\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/&hellip;</a>"},{"owner":{"account_id":22624639,"reputation":55,"user_id":17109929,"display_name":"Самый Важный"},"score":0,"creation_date":1648040416,"post_id":71579607,"comment_id":126522613,"body_markdown":"sorry, i added to the question","body":"sorry, i added to the question"},{"owner":{"account_id":11179248,"reputation":11910,"user_id":8203759,"display_name":"Konstantin Annikov"},"score":0,"creation_date":1648096374,"post_id":71579607,"comment_id":126539190,"body_markdown":"According to the log, IDE cannot communicate with Maven daemon to apply Maven project template. Do you have a firewall which may prevent localhost connections for the IDE?","body":"According to the log, IDE cannot communicate with Maven daemon to apply Maven project template. Do you have a firewall which may prevent localhost connections for the IDE?"},{"owner":{"account_id":11179248,"reputation":11910,"user_id":8203759,"display_name":"Konstantin Annikov"},"score":0,"creation_date":1648096491,"post_id":71579607,"comment_id":126539205,"body_markdown":"Same case caused by the firewall: https://youtrack.jetbrains.com/issue/IDEA-239928","body":"Same case caused by the firewall: <a href=\"https://youtrack.jetbrains.com/issue/IDEA-239928\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/IDEA-239928</a>"}],"answers":[{"tags":[],"owner":{"account_id":22624639,"reputation":55,"user_id":17109929,"display_name":"Самый Важный"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1648083427,"creation_date":1648083427,"answer_id":71595833,"question_id":71579607,"body_markdown":"I reinstalled windows. (I needed it anyway) and installed intellij IDEA 2021.3 instead of 2020.3. Everything worked. Some of this has affected. Perhaps reinstalling the same version would also solve this problem.","title":"multi-pom in intellijIDEA. Error adding module to project: null","body":"<p>I reinstalled windows. (I needed it anyway) and installed intellij IDEA 2021.3 instead of 2020.3. Everything worked. Some of this has affected. Perhaps reinstalling the same version would also solve this problem.</p>\n"},{"tags":[],"owner":{"account_id":27732706,"reputation":11,"user_id":21170903,"display_name":"spatil"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675844081,"creation_date":1675844081,"answer_id":75382913,"question_id":71579607,"body_markdown":"In Intellij goto File -&gt; Project Structure -&gt; Project SDK -&gt; [Select Your Installed SDK Version] -&gt; Ok\r\n\r\nAnd try to add the new module, it worked for me.","title":"multi-pom in intellijIDEA. Error adding module to project: null","body":"<p>In Intellij goto File -&gt; Project Structure -&gt; Project SDK -&gt; [Select Your Installed SDK Version] -&gt; Ok</p>\n<p>And try to add the new module, it worked for me.</p>\n"},{"tags":[],"owner":{"account_id":29395363,"reputation":1,"user_id":22522833,"display_name":"Chous"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694176960,"creation_date":1694176896,"answer_id":77066974,"question_id":71579607,"body_markdown":"Try next things:\r\n\r\n1. Go to File-Project Structure-Project. Check SDK and Language level. Make it the same if it&#39;s not. For example 17.\r\n2. Then go to Modules. Sources-Language level and Dependencies-Module SDK must be as Project SDK (e.g. 17). All your next modules should also be 17.\r\n3. Then go to SDKs just to check that the required SDK (17) is present in the list.\r\n4. Then go to File-Settings-Build, Execution, Deployment-Compiler-Java Compiler. For all modules Taget bytecode version should be 17.\r\n5. In your pom.xml &lt;java.version&gt; should also be as SDK version (17).\r\n\r\nAfter you do all this steps restart IntelliJ IDEA and then check everything again step by step. All SDKs, Languages and versions should be like in your project (17).\r\n\r\nAnd finally, to create a general Maven module, go to the New Module (not to Maven archetype). In New Module menu check Build system, it&#39;s should be Maven. Also check JDK (17).\r\n\r\nI hope it will help. Good luck!","title":"multi-pom in intellijIDEA. Error adding module to project: null","body":"<p>Try next things:</p>\n<ol>\n<li>Go to File-Project Structure-Project. Check SDK and Language level. Make it the same if it's not. For example 17.</li>\n<li>Then go to Modules. Sources-Language level and Dependencies-Module SDK must be as Project SDK (e.g. 17). All your next modules should also be 17.</li>\n<li>Then go to SDKs just to check that the required SDK (17) is present in the list.</li>\n<li>Then go to File-Settings-Build, Execution, Deployment-Compiler-Java Compiler. For all modules Taget bytecode version should be 17.</li>\n<li>In your pom.xml &lt;java.version&gt; should also be as SDK version (17).</li>\n</ol>\n<p>After you do all this steps restart IntelliJ IDEA and then check everything again step by step. All SDKs, Languages and versions should be like in your project (17).</p>\n<p>And finally, to create a general Maven module, go to the New Module (not to Maven archetype). In New Module menu check Build system, it's should be Maven. Also check JDK (17).</p>\n<p>I hope it will help. Good luck!</p>\n"}],"owner":{"account_id":22624639,"reputation":55,"user_id":17109929,"display_name":"Самый Важный"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1836,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71595833,"answer_count":3,"score":0,"last_activity_date":1694176960,"creation_date":1647987574,"question_id":71579607,"body_markdown":"I wanted to make a multi-pom project in Intellij (2020.3.4). In one Maven project, I right-click -&gt;New -&gt; Module -&gt; Maven. select parent to &quot;my project&quot;. However, even if parent is not specified, I get the error: **Error adding module to project: null**. (at the same time, it adds a regular folder with the module name and an empty pom.xml inside) (This happens with any archetype). I didn&#39;t find any solutions on the Internet at all. Only downgrade to the old version of Intellij IDEA and that solution was published 10 years ago. Tell me what is the problem? Or what to do? Does not work only with &quot;Maven&quot;. With &quot;Java&quot; and &quot;Spring Inizializr&quot; it works.\r\n\r\n\r\n\r\n\r\n**idea.log**\r\n\r\n    2022-03-23 15:54:05,382 [81624884]   WARN - il.projectWizard.ModuleBuilder -  \r\n    java.lang.NullPointerException\r\n    \tat java.base/java.util.concurrent.ConcurrentHashMap.putVal(ConcurrentHashMap.java:1011)\r\n    \tat java.base/java.util.concurrent.ConcurrentHashMap.put(ConcurrentHashMap.java:1006)\r\n    \tat java.base/java.util.Properties.put(Properties.java:1340)\r\n    \tat java.base/java.util.Properties.setProperty(Properties.java:228)\r\n    \tat org.jetbrains.idea.maven.utils.MavenUtil.runOrApplyMavenProjectFileTemplate(MavenUtil.java:384)\r\n    \tat org.jetbrains.idea.maven.utils.MavenUtil.runOrApplyMavenProjectFileTemplate(MavenUtil.java:341)\r\n    \tat org.jetbrains.idea.maven.wizards.MavenModuleBuilderHelper.lambda$configure$0(MavenModuleBuilderHelper.java:85)\r\n    \tat com.intellij.openapi.command.WriteCommandAction$BuilderImpl$2.run(WriteCommandAction.java:122)\r\n    \tat com.intellij.openapi.application.RunResult.run(RunResult.java:35)\r\n    \tat com.intellij.openapi.command.WriteCommandAction.lambda$performWriteCommandAction$1(WriteCommandAction.java:253)\r\n    \tat com.intellij.openapi.application.impl.ApplicationImpl.runWriteAction(ApplicationImpl.java:1000)\r\n    \tat com.intellij.openapi.command.WriteCommandAction.lambda$performWriteCommandAction$2(WriteCommandAction.java:252)\r\n    \tat com.intellij.openapi.command.WriteCommandAction.lambda$doExecuteCommand$4(WriteCommandAction.java:310)\r\n    \tat com.intellij.openapi.command.impl.CoreCommandProcessor.executeCommand(CoreCommandProcessor.java:220)\r\n    \tat com.intellij.openapi.command.impl.CoreCommandProcessor.executeCommand(CoreCommandProcessor.java:187)\r\n    \tat com.intellij.openapi.command.WriteCommandAction.doExecuteCommand(WriteCommandAction.java:312)\r\n    \tat com.intellij.openapi.command.WriteCommandAction.performWriteCommandAction(WriteCommandAction.java:251)\r\n    \tat com.intellij.openapi.command.WriteCommandAction.execute(WriteCommandAction.java:232)\r\n    \tat com.intellij.openapi.command.WriteCommandAction$BuilderImpl.compute(WriteCommandAction.java:124)\r\n    \tat org.jetbrains.idea.maven.wizards.MavenModuleBuilderHelper.configure(MavenModuleBuilderHelper.java:79)\r\n    \tat org.jetbrains.idea.maven.wizards.AbstractMavenModuleBuilder.lambda$setupRootModel$0(AbstractMavenModuleBuilder.java:77)\r\n    \tat org.jetbrains.idea.maven.utils.MavenUtil.runDumbAware(MavenUtil.java:211)\r\n    \tat org.jetbrains.idea.maven.utils.MavenUtil.runWhenInitialized(MavenUtil.java:231)\r\n    \tat org.jetbrains.idea.maven.wizards.AbstractMavenModuleBuilder.setupRootModel(AbstractMavenModuleBuilder.java:70)\r\n    \tat com.intellij.ide.util.projectWizard.ModuleBuilder.setupModule(ModuleBuilder.java:260)\r\n    \tat com.intellij.ide.util.projectWizard.ModuleBuilder.createModule(ModuleBuilder.java:253)\r\n    \tat com.intellij.ide.util.projectWizard.ModuleBuilder.createAndCommitIfNeeded(ModuleBuilder.java:292)\r\n    \tat com.intellij.ide.util.projectWizard.ModuleBuilder.lambda$commitModule$4(ModuleBuilder.java:338)\r\n    \tat com.intellij.openapi.application.impl.ApplicationImpl.runWriteActionWithClass(ApplicationImpl.java:988)\r\n    \tat com.intellij.openapi.application.impl.ApplicationImpl.runWriteAction(ApplicationImpl.java:1014)\r\n    \tat com.intellij.ide.util.projectWizard.ModuleBuilder.commitModule(ModuleBuilder.java:337)\r\n    \tat com.intellij.openapi.roots.ui.configuration.actions.NewModuleAction.createModuleFromWizard(NewModuleAction.java:59)\r\n    \tat com.intellij.openapi.roots.ui.configuration.actions.NewModuleAction.actionPerformed(NewModuleAction.java:49)\r\n    \tat com.intellij.openapi.actionSystem.ex.ActionUtil.performActionDumbAware(ActionUtil.java:281)\r\n    \tat com.intellij.openapi.actionSystem.impl.ActionMenuItem$ActionTransmitter.lambda$actionPerformed$0(ActionMenuItem.java:310)\r\n    \tat com.intellij.openapi.wm.impl.FocusManagerImpl.runOnOwnContext(FocusManagerImpl.java:286)\r\n    \tat com.intellij.openapi.wm.impl.IdeFocusManagerImpl.runOnOwnContext(IdeFocusManagerImpl.java:77)\r\n    \tat com.intellij.openapi.actionSystem.impl.ActionMenuItem$ActionTransmitter.actionPerformed(ActionMenuItem.java:299)\r\n    \tat java.desktop/javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1967)\r\n    \tat com.intellij.openapi.actionSystem.impl.ActionMenuItem.lambda$fireActionPerformed$0(ActionMenuItem.java:110)\r\n    \tat com.intellij.openapi.application.TransactionGuardImpl.performUserActivity(TransactionGuardImpl.java:95)\r\n    \tat com.intellij.openapi.actionSystem.impl.ActionMenuItem.fireActionPerformed(ActionMenuItem.java:110)\r\n    \tat com.intellij.ui.plaf.beg.BegMenuItemUI.doClick(BegMenuItemUI.java:514)\r\n    \tat com.intellij.ui.plaf.beg.BegMenuItemUI$MyMouseInputHandler.mouseReleased(BegMenuItemUI.java:544)\r\n    \tat java.desktop/java.awt.Component.processMouseEvent(Component.java:6652)\r\n    \tat java.desktop/javax.swing.JComponent.processMouseEvent(JComponent.java:3345)\r\n    \tat java.desktop/java.awt.Component.processEvent(Component.java:6417)\r\n    \tat java.desktop/java.awt.Container.processEvent(Container.java:2263)\r\n    \tat java.desktop/java.awt.Component.dispatchEventImpl(Component.java:5027)\r\n    \tat java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2321)\r\n    \tat java.desktop/java.awt.Component.dispatchEvent(Component.java:4859)\r\n    \tat java.desktop/java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4918)\r\n    \tat java.desktop/java.awt.LightweightDispatcher.processMouseEvent(Container.java:4547)\r\n    \tat java.desktop/java.awt.LightweightDispatcher.dispatchEvent(Container.java:4488)\r\n    \tat java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2307)\r\n    \tat java.desktop/java.awt.Window.dispatchEventImpl(Window.java:2780)\r\n    \tat java.desktop/java.awt.Component.dispatchEvent(Component.java:4859)\r\n    \tat java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:778)\r\n    \tat java.desktop/java.awt.EventQueue$4.run(EventQueue.java:727)\r\n    \tat java.desktop/java.awt.EventQueue$4.run(EventQueue.java:721)\r\n    \tat java.base/java.security.AccessController.doPrivileged(Native Method)\r\n    \tat java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:85)\r\n    \tat java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:95)\r\n    \tat java.desktop/java.awt.EventQueue$5.run(EventQueue.java:751)\r\n    \tat java.desktop/java.awt.EventQueue$5.run(EventQueue.java:749)\r\n    \tat java.base/java.security.AccessController.doPrivileged(Native Method)\r\n    \tat java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:85)\r\n    \tat java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:748)\r\n    \tat com.intellij.ide.IdeEventQueue.defaultDispatchEvent(IdeEventQueue.java:976)\r\n    \tat com.intellij.ide.IdeEventQueue.dispatchMouseEvent(IdeEventQueue.java:911)\r\n    \tat com.intellij.ide.IdeEventQueue._dispatchEvent(IdeEventQueue.java:840)\r\n    \tat com.intellij.ide.IdeEventQueue.lambda$dispatchEvent$8(IdeEventQueue.java:454)\r\n    \tat com.intellij.openapi.progress.impl.CoreProgressManager.computePrioritized(CoreProgressManager.java:773)\r\n    \tat com.intellij.ide.IdeEventQueue.lambda$dispatchEvent$9(IdeEventQueue.java:453)\r\n    \tat com.intellij.openapi.application.impl.ApplicationImpl.runIntendedWriteActionOnCurrentThread(ApplicationImpl.java:822)\r\n    \tat com.intellij.ide.IdeEventQueue.dispatchEvent(IdeEventQueue.java:507)\r\n    \tat java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)\r\n    \tat java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)\r\n    \tat java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)\r\n    \tat java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)\r\n    \tat java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\r\n    \tat java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)\r\n    2022-03-23 15:54:05,981 [81625483]  ERROR - plication.impl.ApplicationImpl - Cannot reconnect. \r\n    java.lang.RuntimeException: Cannot reconnect.\r\n    \tat org.jetbrains.idea.maven.server.RemoteObjectWrapper.perform(RemoteObjectWrapper.java:82)\r\n    \tat org.jetbrains.idea.maven.server.MavenIndexerWrapper.getArchetypes(MavenIndexerWrapper.java:143)\r\n    \tat org.jetbrains.idea.maven.indices.MavenIndicesManager.getArchetypes(MavenIndicesManager.java:337)\r\n    \tat org.jetbrains.idea.maven.wizards.MavenArchetypesStep.lambda$updateArchetypesList$3(MavenArchetypesStep.java:223)\r\n    \tat com.intellij.util.RunnableCallable.call(RunnableCallable.java:20)\r\n    \tat com.intellij.util.RunnableCallable.call(RunnableCallable.java:11)\r\n    \tat com.intellij.openapi.application.impl.ApplicationImpl$1.call(ApplicationImpl.java:270)\r\n    \tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n    \tat java.base/java.util.concurrent.Executors$PrivilegedThreadFactory$1$1.run(Executors.java:668)\r\n    \tat java.base/java.util.concurrent.Executors$PrivilegedThreadFactory$1$1.run(Executors.java:665)\r\n    \tat java.base/java.security.AccessController.doPrivileged(Native Method)\r\n    \tat java.base/java.util.concurrent.Executors$PrivilegedThreadFactory$1.run(Executors.java:665)\r\n    \tat java.base/java.lang.Thread.run(Thread.java:834)\r\n    Caused by: java.rmi.ConnectException: Connection refused to host: 127.0.0.1; nested exception is: \r\n    \tjava.net.ConnectException: Connection refused: connect\r\n    \tat java.rmi/sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:623)\r\n    \tat java.rmi/sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:209)\r\n    \tat java.rmi/sun.rmi.transport.tcp.TCPChannel.newConnection(TCPChannel.java:196)\r\n    \tat java.rmi/sun.rmi.server.UnicastRef.invoke(UnicastRef.java:132)\r\n    \tat java.rmi/java.rmi.server.RemoteObjectInvocationHandler.invokeRemoteMethod(RemoteObjectInvocationHandler.java:217)\r\n    \tat java.rmi/java.rmi.server.RemoteObjectInvocationHandler.invoke(RemoteObjectInvocationHandler.java:162)\r\n    \tat com.sun.proxy.$Proxy146.createIndexer(Unknown Source)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n    \tat com.intellij.execution.rmi.RemoteUtil.invokeRemote(RemoteUtil.java:150)\r\n    \tat com.intellij.execution.rmi.RemoteUtil.access$400(RemoteUtil.java:21)\r\n    \tat com.intellij.execution.rmi.RemoteUtil$1.lambda$invoke$0(RemoteUtil.java:134)\r\n    \tat com.intellij.openapi.util.ClassLoaderUtil.computeWithClassLoader(ClassLoaderUtil.java:31)\r\n    \tat com.intellij.execution.rmi.RemoteUtil.executeWithClassLoader(RemoteUtil.java:202)\r\n    \tat com.intellij.execution.rmi.RemoteUtil$1.invoke(RemoteUtil.java:134)\r\n    \tat com.sun.proxy.$Proxy146.createIndexer(Unknown Source)\r\n    \tat org.jetbrains.idea.maven.server.MavenServerConnectorImpl.createIndexer(MavenServerConnectorImpl.java:197)\r\n    \tat org.jetbrains.idea.maven.server.MavenServerManager$4.create(MavenServerManager.java:381)\r\n    \tat org.jetbrains.idea.maven.server.MavenServerManager$4.create(MavenServerManager.java:377)\r\n    \tat org.jetbrains.idea.maven.server.RemoteObjectWrapper.getOrCreateWrappee(RemoteObjectWrapper.java:41)\r\n    \tat org.jetbrains.idea.maven.server.MavenIndexerWrapper.lambda$getArchetypes$6(MavenIndexerWrapper.java:143)\r\n    \tat org.jetbrains.idea.maven.server.RemoteObjectWrapper.perform(RemoteObjectWrapper.java:76)\r\n    \t... 14 more\r\n    Caused by: java.net.ConnectException: Connection refused: connect\r\n    \tat java.base/java.net.PlainSocketImpl.connect0(Native Method)\r\n    \tat java.base/java.net.PlainSocketImpl.socketConnect(PlainSocketImpl.java:101)\r\n    \tat java.base/java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:399)\r\n    \tat java.base/java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:242)\r\n    \tat java.base/java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:224)\r\n    \tat java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)\r\n    \tat java.base/java.net.Socket.connect(Socket.java:609)\r\n    \tat java.base/java.net.Socket.connect(Socket.java:558)\r\n    \tat java.base/java.net.Socket.&lt;init&gt;(Socket.java:454)\r\n    \tat java.base/java.net.Socket.&lt;init&gt;(Socket.java:231)\r\n    \tat com.intellij.execution.rmi.RemoteServer$1.createSocket(RemoteServer.java:122)\r\n    \tat java.rmi/sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:617)\r\n    \t... 37 more\r\n    2022-03-23 15:54:05,981 [81625483]  ERROR - plication.impl.ApplicationImpl - IntelliJ IDEA 2020.3.4  Build #IU-203.8084.24 \r\n    2022-03-23 15:54:05,981 [81625483]  ERROR - plication.impl.ApplicationImpl - JDK: 11.0.10; VM: OpenJDK 64-Bit Server VM; Vendor: JetBrains s.r.o. \r\n    2022-03-23 15:54:05,981 [81625483]  ERROR - plication.impl.ApplicationImpl - OS: Windows 10 \r\n    2022-03-23 15:54:05,981 [81625483]  ERROR - plication.impl.ApplicationImpl - Last Action: NewModuleInGroup \r\n    2022-03-23 15:54:06,580 [81626082]   INFO - .diagnostic.PerformanceWatcher - Indexable file iteration took 1922ms; general responsiveness: ok; EDT responsiveness: ok \r\n    2022-03-23 15:54:06,580 [81626082]   INFO - indexing.UnindexedFilesUpdater - Unindexed files update started: 0 files to index \r\n    2022-03-23 15:54:06,580 [81626082]   INFO - .diagnostic.PerformanceWatcher - Indexable file iteration took 1922ms; general responsiveness: ok; EDT responsiveness: ok \r\n    2022-03-23 15:54:06,595 [81626097]   INFO - indexing.UnindexedFilesUpdater - Unindexed files update started: 0 files to index \r\n    2022-03-23 15:54:08,524 [81628026]   INFO - rationStore.ComponentStoreImpl - Saving appFileTypeManager took 16 ms\r\n\r\n \r\n","title":"multi-pom in intellijIDEA. Error adding module to project: null","body":"<p>I wanted to make a multi-pom project in Intellij (2020.3.4). In one Maven project, I right-click -&gt;New -&gt; Module -&gt; Maven. select parent to &quot;my project&quot;. However, even if parent is not specified, I get the error: <strong>Error adding module to project: null</strong>. (at the same time, it adds a regular folder with the module name and an empty pom.xml inside) (This happens with any archetype). I didn't find any solutions on the Internet at all. Only downgrade to the old version of Intellij IDEA and that solution was published 10 years ago. Tell me what is the problem? Or what to do? Does not work only with &quot;Maven&quot;. With &quot;Java&quot; and &quot;Spring Inizializr&quot; it works.</p>\n<p><strong>idea.log</strong></p>\n<pre><code>2022-03-23 15:54:05,382 [81624884]   WARN - il.projectWizard.ModuleBuilder -  \njava.lang.NullPointerException\n    at java.base/java.util.concurrent.ConcurrentHashMap.putVal(ConcurrentHashMap.java:1011)\n    at java.base/java.util.concurrent.ConcurrentHashMap.put(ConcurrentHashMap.java:1006)\n    at java.base/java.util.Properties.put(Properties.java:1340)\n    at java.base/java.util.Properties.setProperty(Properties.java:228)\n    at org.jetbrains.idea.maven.utils.MavenUtil.runOrApplyMavenProjectFileTemplate(MavenUtil.java:384)\n    at org.jetbrains.idea.maven.utils.MavenUtil.runOrApplyMavenProjectFileTemplate(MavenUtil.java:341)\n    at org.jetbrains.idea.maven.wizards.MavenModuleBuilderHelper.lambda$configure$0(MavenModuleBuilderHelper.java:85)\n    at com.intellij.openapi.command.WriteCommandAction$BuilderImpl$2.run(WriteCommandAction.java:122)\n    at com.intellij.openapi.application.RunResult.run(RunResult.java:35)\n    at com.intellij.openapi.command.WriteCommandAction.lambda$performWriteCommandAction$1(WriteCommandAction.java:253)\n    at com.intellij.openapi.application.impl.ApplicationImpl.runWriteAction(ApplicationImpl.java:1000)\n    at com.intellij.openapi.command.WriteCommandAction.lambda$performWriteCommandAction$2(WriteCommandAction.java:252)\n    at com.intellij.openapi.command.WriteCommandAction.lambda$doExecuteCommand$4(WriteCommandAction.java:310)\n    at com.intellij.openapi.command.impl.CoreCommandProcessor.executeCommand(CoreCommandProcessor.java:220)\n    at com.intellij.openapi.command.impl.CoreCommandProcessor.executeCommand(CoreCommandProcessor.java:187)\n    at com.intellij.openapi.command.WriteCommandAction.doExecuteCommand(WriteCommandAction.java:312)\n    at com.intellij.openapi.command.WriteCommandAction.performWriteCommandAction(WriteCommandAction.java:251)\n    at com.intellij.openapi.command.WriteCommandAction.execute(WriteCommandAction.java:232)\n    at com.intellij.openapi.command.WriteCommandAction$BuilderImpl.compute(WriteCommandAction.java:124)\n    at org.jetbrains.idea.maven.wizards.MavenModuleBuilderHelper.configure(MavenModuleBuilderHelper.java:79)\n    at org.jetbrains.idea.maven.wizards.AbstractMavenModuleBuilder.lambda$setupRootModel$0(AbstractMavenModuleBuilder.java:77)\n    at org.jetbrains.idea.maven.utils.MavenUtil.runDumbAware(MavenUtil.java:211)\n    at org.jetbrains.idea.maven.utils.MavenUtil.runWhenInitialized(MavenUtil.java:231)\n    at org.jetbrains.idea.maven.wizards.AbstractMavenModuleBuilder.setupRootModel(AbstractMavenModuleBuilder.java:70)\n    at com.intellij.ide.util.projectWizard.ModuleBuilder.setupModule(ModuleBuilder.java:260)\n    at com.intellij.ide.util.projectWizard.ModuleBuilder.createModule(ModuleBuilder.java:253)\n    at com.intellij.ide.util.projectWizard.ModuleBuilder.createAndCommitIfNeeded(ModuleBuilder.java:292)\n    at com.intellij.ide.util.projectWizard.ModuleBuilder.lambda$commitModule$4(ModuleBuilder.java:338)\n    at com.intellij.openapi.application.impl.ApplicationImpl.runWriteActionWithClass(ApplicationImpl.java:988)\n    at com.intellij.openapi.application.impl.ApplicationImpl.runWriteAction(ApplicationImpl.java:1014)\n    at com.intellij.ide.util.projectWizard.ModuleBuilder.commitModule(ModuleBuilder.java:337)\n    at com.intellij.openapi.roots.ui.configuration.actions.NewModuleAction.createModuleFromWizard(NewModuleAction.java:59)\n    at com.intellij.openapi.roots.ui.configuration.actions.NewModuleAction.actionPerformed(NewModuleAction.java:49)\n    at com.intellij.openapi.actionSystem.ex.ActionUtil.performActionDumbAware(ActionUtil.java:281)\n    at com.intellij.openapi.actionSystem.impl.ActionMenuItem$ActionTransmitter.lambda$actionPerformed$0(ActionMenuItem.java:310)\n    at com.intellij.openapi.wm.impl.FocusManagerImpl.runOnOwnContext(FocusManagerImpl.java:286)\n    at com.intellij.openapi.wm.impl.IdeFocusManagerImpl.runOnOwnContext(IdeFocusManagerImpl.java:77)\n    at com.intellij.openapi.actionSystem.impl.ActionMenuItem$ActionTransmitter.actionPerformed(ActionMenuItem.java:299)\n    at java.desktop/javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1967)\n    at com.intellij.openapi.actionSystem.impl.ActionMenuItem.lambda$fireActionPerformed$0(ActionMenuItem.java:110)\n    at com.intellij.openapi.application.TransactionGuardImpl.performUserActivity(TransactionGuardImpl.java:95)\n    at com.intellij.openapi.actionSystem.impl.ActionMenuItem.fireActionPerformed(ActionMenuItem.java:110)\n    at com.intellij.ui.plaf.beg.BegMenuItemUI.doClick(BegMenuItemUI.java:514)\n    at com.intellij.ui.plaf.beg.BegMenuItemUI$MyMouseInputHandler.mouseReleased(BegMenuItemUI.java:544)\n    at java.desktop/java.awt.Component.processMouseEvent(Component.java:6652)\n    at java.desktop/javax.swing.JComponent.processMouseEvent(JComponent.java:3345)\n    at java.desktop/java.awt.Component.processEvent(Component.java:6417)\n    at java.desktop/java.awt.Container.processEvent(Container.java:2263)\n    at java.desktop/java.awt.Component.dispatchEventImpl(Component.java:5027)\n    at java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2321)\n    at java.desktop/java.awt.Component.dispatchEvent(Component.java:4859)\n    at java.desktop/java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4918)\n    at java.desktop/java.awt.LightweightDispatcher.processMouseEvent(Container.java:4547)\n    at java.desktop/java.awt.LightweightDispatcher.dispatchEvent(Container.java:4488)\n    at java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2307)\n    at java.desktop/java.awt.Window.dispatchEventImpl(Window.java:2780)\n    at java.desktop/java.awt.Component.dispatchEvent(Component.java:4859)\n    at java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:778)\n    at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:727)\n    at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:721)\n    at java.base/java.security.AccessController.doPrivileged(Native Method)\n    at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:85)\n    at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:95)\n    at java.desktop/java.awt.EventQueue$5.run(EventQueue.java:751)\n    at java.desktop/java.awt.EventQueue$5.run(EventQueue.java:749)\n    at java.base/java.security.AccessController.doPrivileged(Native Method)\n    at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:85)\n    at java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:748)\n    at com.intellij.ide.IdeEventQueue.defaultDispatchEvent(IdeEventQueue.java:976)\n    at com.intellij.ide.IdeEventQueue.dispatchMouseEvent(IdeEventQueue.java:911)\n    at com.intellij.ide.IdeEventQueue._dispatchEvent(IdeEventQueue.java:840)\n    at com.intellij.ide.IdeEventQueue.lambda$dispatchEvent$8(IdeEventQueue.java:454)\n    at com.intellij.openapi.progress.impl.CoreProgressManager.computePrioritized(CoreProgressManager.java:773)\n    at com.intellij.ide.IdeEventQueue.lambda$dispatchEvent$9(IdeEventQueue.java:453)\n    at com.intellij.openapi.application.impl.ApplicationImpl.runIntendedWriteActionOnCurrentThread(ApplicationImpl.java:822)\n    at com.intellij.ide.IdeEventQueue.dispatchEvent(IdeEventQueue.java:507)\n    at java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)\n    at java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)\n    at java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)\n    at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)\n    at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\n    at java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)\n2022-03-23 15:54:05,981 [81625483]  ERROR - plication.impl.ApplicationImpl - Cannot reconnect. \njava.lang.RuntimeException: Cannot reconnect.\n    at org.jetbrains.idea.maven.server.RemoteObjectWrapper.perform(RemoteObjectWrapper.java:82)\n    at org.jetbrains.idea.maven.server.MavenIndexerWrapper.getArchetypes(MavenIndexerWrapper.java:143)\n    at org.jetbrains.idea.maven.indices.MavenIndicesManager.getArchetypes(MavenIndicesManager.java:337)\n    at org.jetbrains.idea.maven.wizards.MavenArchetypesStep.lambda$updateArchetypesList$3(MavenArchetypesStep.java:223)\n    at com.intellij.util.RunnableCallable.call(RunnableCallable.java:20)\n    at com.intellij.util.RunnableCallable.call(RunnableCallable.java:11)\n    at com.intellij.openapi.application.impl.ApplicationImpl$1.call(ApplicationImpl.java:270)\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n    at java.base/java.util.concurrent.Executors$PrivilegedThreadFactory$1$1.run(Executors.java:668)\n    at java.base/java.util.concurrent.Executors$PrivilegedThreadFactory$1$1.run(Executors.java:665)\n    at java.base/java.security.AccessController.doPrivileged(Native Method)\n    at java.base/java.util.concurrent.Executors$PrivilegedThreadFactory$1.run(Executors.java:665)\n    at java.base/java.lang.Thread.run(Thread.java:834)\nCaused by: java.rmi.ConnectException: Connection refused to host: 127.0.0.1; nested exception is: \n    java.net.ConnectException: Connection refused: connect\n    at java.rmi/sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:623)\n    at java.rmi/sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:209)\n    at java.rmi/sun.rmi.transport.tcp.TCPChannel.newConnection(TCPChannel.java:196)\n    at java.rmi/sun.rmi.server.UnicastRef.invoke(UnicastRef.java:132)\n    at java.rmi/java.rmi.server.RemoteObjectInvocationHandler.invokeRemoteMethod(RemoteObjectInvocationHandler.java:217)\n    at java.rmi/java.rmi.server.RemoteObjectInvocationHandler.invoke(RemoteObjectInvocationHandler.java:162)\n    at com.sun.proxy.$Proxy146.createIndexer(Unknown Source)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at com.intellij.execution.rmi.RemoteUtil.invokeRemote(RemoteUtil.java:150)\n    at com.intellij.execution.rmi.RemoteUtil.access$400(RemoteUtil.java:21)\n    at com.intellij.execution.rmi.RemoteUtil$1.lambda$invoke$0(RemoteUtil.java:134)\n    at com.intellij.openapi.util.ClassLoaderUtil.computeWithClassLoader(ClassLoaderUtil.java:31)\n    at com.intellij.execution.rmi.RemoteUtil.executeWithClassLoader(RemoteUtil.java:202)\n    at com.intellij.execution.rmi.RemoteUtil$1.invoke(RemoteUtil.java:134)\n    at com.sun.proxy.$Proxy146.createIndexer(Unknown Source)\n    at org.jetbrains.idea.maven.server.MavenServerConnectorImpl.createIndexer(MavenServerConnectorImpl.java:197)\n    at org.jetbrains.idea.maven.server.MavenServerManager$4.create(MavenServerManager.java:381)\n    at org.jetbrains.idea.maven.server.MavenServerManager$4.create(MavenServerManager.java:377)\n    at org.jetbrains.idea.maven.server.RemoteObjectWrapper.getOrCreateWrappee(RemoteObjectWrapper.java:41)\n    at org.jetbrains.idea.maven.server.MavenIndexerWrapper.lambda$getArchetypes$6(MavenIndexerWrapper.java:143)\n    at org.jetbrains.idea.maven.server.RemoteObjectWrapper.perform(RemoteObjectWrapper.java:76)\n    ... 14 more\nCaused by: java.net.ConnectException: Connection refused: connect\n    at java.base/java.net.PlainSocketImpl.connect0(Native Method)\n    at java.base/java.net.PlainSocketImpl.socketConnect(PlainSocketImpl.java:101)\n    at java.base/java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:399)\n    at java.base/java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:242)\n    at java.base/java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:224)\n    at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)\n    at java.base/java.net.Socket.connect(Socket.java:609)\n    at java.base/java.net.Socket.connect(Socket.java:558)\n    at java.base/java.net.Socket.&lt;init&gt;(Socket.java:454)\n    at java.base/java.net.Socket.&lt;init&gt;(Socket.java:231)\n    at com.intellij.execution.rmi.RemoteServer$1.createSocket(RemoteServer.java:122)\n    at java.rmi/sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:617)\n    ... 37 more\n2022-03-23 15:54:05,981 [81625483]  ERROR - plication.impl.ApplicationImpl - IntelliJ IDEA 2020.3.4  Build #IU-203.8084.24 \n2022-03-23 15:54:05,981 [81625483]  ERROR - plication.impl.ApplicationImpl - JDK: 11.0.10; VM: OpenJDK 64-Bit Server VM; Vendor: JetBrains s.r.o. \n2022-03-23 15:54:05,981 [81625483]  ERROR - plication.impl.ApplicationImpl - OS: Windows 10 \n2022-03-23 15:54:05,981 [81625483]  ERROR - plication.impl.ApplicationImpl - Last Action: NewModuleInGroup \n2022-03-23 15:54:06,580 [81626082]   INFO - .diagnostic.PerformanceWatcher - Indexable file iteration took 1922ms; general responsiveness: ok; EDT responsiveness: ok \n2022-03-23 15:54:06,580 [81626082]   INFO - indexing.UnindexedFilesUpdater - Unindexed files update started: 0 files to index \n2022-03-23 15:54:06,580 [81626082]   INFO - .diagnostic.PerformanceWatcher - Indexable file iteration took 1922ms; general responsiveness: ok; EDT responsiveness: ok \n2022-03-23 15:54:06,595 [81626097]   INFO - indexing.UnindexedFilesUpdater - Unindexed files update started: 0 files to index \n2022-03-23 15:54:08,524 [81628026]   INFO - rationStore.ComponentStoreImpl - Saving appFileTypeManager took 16 ms\n</code></pre>\n"},{"tags":["java","spring","testing","proxy","resttemplate"],"owner":{"account_id":27717151,"reputation":1,"user_id":21158602,"display_name":"kwarter"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694176386,"creation_date":1694176386,"question_id":77066916,"body_markdown":"I have an integration test that correctly mocks an auth call, but it needs to support a proxy now. I&#39;m inexperienced with proxies and am having a great deal of trouble testing this. \r\n\r\nThe implementation is as follows:\r\n\r\n```\r\nproxySettings.setProxy(httpClientBuilder, null);\r\nRestTemplate restTemplate = new RestTemplate(\r\n    new HttpComponentsClientHttpRequestFactory(httpClientBuilder.build()));\r\n\r\n...\r\n\r\nrestTemplate.exchange(url, HttpMethod.POST, entity, type);\r\n```\r\n\r\nThe `setProxy()` method fetches some user configured proxy settings and applies them to the `HttpClientBuilder`:\r\n\r\n```\r\n//Fetch user-configured proxy settings and null check before returning object\r\nHttpHost proxyHttpHost = getHttpClientProxyHttpHost();\r\n\r\nhttpClientBuilder.setProxy(proxyHttpHost);\r\n\r\n//If user/pass is set (credentialsProvider is just a new instance of BasicCredentialsProvider)\r\ncredentialsProvider.setCredentials(\r\n    new AuthScope(getHttpProxyHost(), Integer.parseInt(getHttpProxyPort())),\r\n    proxyUsernamePasswordCredentials\r\n);\r\nhttpClientBuilder.setDefaultCredentialsProvider(credentialsProvider);\r\n```\r\n\r\nA non-proxy version of the test passes with this expectation:\r\n\r\n```\r\nexpect().when(\r\n    request()\r\n        .withMethod(&quot;POST&quot;)\r\n        .withPath(&quot;/auth&quot;)\r\n        .withBody(\r\n            params(\r\n                param(&quot;client_id&quot;, clientId),\r\n                param(&quot;client_secret&quot;, clientSecret),\r\n                param(&quot;grant_type&quot;, grantType),\r\n                param(&quot;scope&quot;, scope)\r\n            ))\r\n).respond(\r\n    response()\r\n        .withStatusCode(expectedResponseStatusCode)\r\n        .withContentType(MediaType.APPLICATION_JSON)\r\n        .withBody(json(&quot;{\\&quot;access_token\\&quot;:\\&quot;ImAHappyString\\&quot;}&quot;))\r\n);\r\n```\r\n\r\n\r\nWhen I run the test with the proxy configured (host: `proxy-host.com`, port: `1234`) I get the following error:\r\n\r\n```\r\nErrorMessage: I/O error on POST request for &quot;http://127.0.0.1:37351/auth&quot;: proxy-host.com: Name or service not known; nested exception is java.net.UnknownHostException: proxy-host.com: Name or service not known\r\n```\r\n\r\nI tried expecting a `CONNECT` request, but I just get the same failure. Any suggestions?","title":"How to mock a RestTemplate proxy call?","body":"<p>I have an integration test that correctly mocks an auth call, but it needs to support a proxy now. I'm inexperienced with proxies and am having a great deal of trouble testing this.</p>\n<p>The implementation is as follows:</p>\n<pre><code>proxySettings.setProxy(httpClientBuilder, null);\nRestTemplate restTemplate = new RestTemplate(\n    new HttpComponentsClientHttpRequestFactory(httpClientBuilder.build()));\n\n...\n\nrestTemplate.exchange(url, HttpMethod.POST, entity, type);\n</code></pre>\n<p>The <code>setProxy()</code> method fetches some user configured proxy settings and applies them to the <code>HttpClientBuilder</code>:</p>\n<pre><code>//Fetch user-configured proxy settings and null check before returning object\nHttpHost proxyHttpHost = getHttpClientProxyHttpHost();\n\nhttpClientBuilder.setProxy(proxyHttpHost);\n\n//If user/pass is set (credentialsProvider is just a new instance of BasicCredentialsProvider)\ncredentialsProvider.setCredentials(\n    new AuthScope(getHttpProxyHost(), Integer.parseInt(getHttpProxyPort())),\n    proxyUsernamePasswordCredentials\n);\nhttpClientBuilder.setDefaultCredentialsProvider(credentialsProvider);\n</code></pre>\n<p>A non-proxy version of the test passes with this expectation:</p>\n<pre><code>expect().when(\n    request()\n        .withMethod(&quot;POST&quot;)\n        .withPath(&quot;/auth&quot;)\n        .withBody(\n            params(\n                param(&quot;client_id&quot;, clientId),\n                param(&quot;client_secret&quot;, clientSecret),\n                param(&quot;grant_type&quot;, grantType),\n                param(&quot;scope&quot;, scope)\n            ))\n).respond(\n    response()\n        .withStatusCode(expectedResponseStatusCode)\n        .withContentType(MediaType.APPLICATION_JSON)\n        .withBody(json(&quot;{\\&quot;access_token\\&quot;:\\&quot;ImAHappyString\\&quot;}&quot;))\n);\n</code></pre>\n<p>When I run the test with the proxy configured (host: <code>proxy-host.com</code>, port: <code>1234</code>) I get the following error:</p>\n<pre><code>ErrorMessage: I/O error on POST request for &quot;http://127.0.0.1:37351/auth&quot;: proxy-host.com: Name or service not known; nested exception is java.net.UnknownHostException: proxy-host.com: Name or service not known\n</code></pre>\n<p>I tried expecting a <code>CONNECT</code> request, but I just get the same failure. Any suggestions?</p>\n"},{"tags":["java","apache-httpclient-4.x","profiler"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":2,"creation_date":1694175945,"post_id":77066841,"comment_id":135860518,"body_markdown":"So? Looks linear to me. What kind of performance did you expect to get?","body":"So? Looks linear to me. What kind of performance did you expect to get?"},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1694176156,"post_id":77066841,"comment_id":135860557,"body_markdown":"&quot;same speed&quot; as compared to what? are request concurrent or sequential? Please provide a [minimal reproducible example](http://stackoverflow.com/help/minimal-reproducible-example).","body":"&quot;same speed&quot; as compared to what? are request concurrent or sequential? Please provide a <a href=\"http://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":19522690,"reputation":113,"user_id":14284182,"display_name":"Haster"},"score":0,"creation_date":1694179542,"post_id":77066841,"comment_id":135861276,"body_markdown":"@Kayaman, I expected that my application would get answer with same time as my app don&#39;t exceed any resources (as CPU, memory or network)","body":"@Kayaman, I expected that my application would get answer with same time as my app don&#39;t exceed any resources (as CPU, memory or network)"},{"owner":{"account_id":19522690,"reputation":113,"user_id":14284182,"display_name":"Haster"},"score":0,"creation_date":1694179617,"post_id":77066841,"comment_id":135861291,"body_markdown":"@aled, same as when I load my app with 1000req/s.","body":"@aled, same as when I load my app with 1000req/s."},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1694180582,"post_id":77066841,"comment_id":135861516,"body_markdown":"You&#39;re profiling the _client_?","body":"You&#39;re profiling the <i>client</i>?"},{"owner":{"account_id":19522690,"reputation":113,"user_id":14284182,"display_name":"Haster"},"score":0,"creation_date":1694181178,"post_id":77066841,"comment_id":135861633,"body_markdown":"@Kayaman, I profile my spring app and in profiler I see that method execute of httpclient works longer","body":"@Kayaman, I profile my spring app and in profiler I see that method execute of httpclient works longer"}],"owner":{"account_id":19522690,"reputation":113,"user_id":14284182,"display_name":"Haster"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694175692,"creation_date":1694175692,"question_id":77066841,"body_markdown":"I have a problem with my spring boot application.\r\nI have a rest controller that sends some http request by apache httpclient.\r\n\r\nSo when I load 1000 req/s to my controller I get answer after 1ms (in average)\r\nBut when I load 3000 req/s - I get answer after 3 ms (in average).\r\ncpu load is about 70%\r\n\r\nI tried to profile my application with jprofiler and found that increased time in ClosableHttpClient.execute method.\r\n\r\nI decided that problem is that remote endpoint send data back slowly, but after some research I found that remote endpoint send data back with the same speed.\r\n\r\nAnd now I don&#39;t have any ideas how to profile this testcase.\r\n","title":"Profiling java application","body":"<p>I have a problem with my spring boot application.\nI have a rest controller that sends some http request by apache httpclient.</p>\n<p>So when I load 1000 req/s to my controller I get answer after 1ms (in average)\nBut when I load 3000 req/s - I get answer after 3 ms (in average).\ncpu load is about 70%</p>\n<p>I tried to profile my application with jprofiler and found that increased time in ClosableHttpClient.execute method.</p>\n<p>I decided that problem is that remote endpoint send data back slowly, but after some research I found that remote endpoint send data back with the same speed.</p>\n<p>And now I don't have any ideas how to profile this testcase.</p>\n"},{"tags":["java","pdf","pdf-generation","flying-saucer","xhtmlrenderer"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":3,"creation_date":1694184379,"post_id":77066828,"comment_id":135862286,"body_markdown":"*this should be displaying Han- and Korean Characters just fine.* Example codepoints please..?","body":"<i>this should be displaying Han- and Korean Characters just fine.</i> Example codepoints please..?"}],"owner":{"account_id":26509586,"reputation":21,"user_id":20145130,"display_name":"Erik Radisch"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1694175528,"creation_date":1694175528,"question_id":77066828,"body_markdown":"I am using Flying Saucer and xhtmlrenderer to produce PDFs from a String-HTML-Code.\r\n\r\nThe Html-String is:\r\n\r\n```\r\n&lt;html&gt;\r\n &lt;head&gt;\r\n  &lt;style type=&quot;text/css&quot;&gt;\r\n    @font-face {\r\n\r\n    font-family: &#39;Arial&#39;;\r\n\r\n    src: url(&quot;fonts/ARIALUNI.TTF&quot;);\r\n\r\n    -fs-pdf-font-embed: embed;\r\n\r\n    -fs-pdf-font-encoding: Identity-H;\r\n}\r\n\r\n    * { font-family: &#39;Arial&#39;!important; }&lt;/style&gt;\r\n &lt;/head&gt;\r\n &lt;body&gt;\r\n  &lt;p lang=&quot;de-DE&quot; class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Kim, Sohyeun [&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Kim, Sohyŏn] &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;김소현&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;b&gt;1993,&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt; Tang sidae ŭi hobok e kwanhan yŏn&#39;gu &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;당시대의 호복에 관한 연구 &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;/ The Study on the ‘Ho Bok (Chinese: Hu-Fu, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;胡服&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;)’ in the T’ang Dynasty. Ph. D. Dissertation, Ewha Woman’s University: Department of Clothing and Textiles. &lt;/span&gt;&lt;/font&gt;&lt;/p&gt;\r\n  &lt;p class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;br /&gt;&lt;/p&gt;\r\n  &lt;p lang=&quot;de-DE&quot; class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;b&gt;Keywords: &lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Kucha, hairstyle, Book of Wei, Weishu, Old Book of Tang, Jiutangshu, clothing, costume, Great Tang Records on the Western Regions, Da Tang Xiyu ji, History of Northern Dynasties, Beishi.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;\r\n  &lt;p lang=&quot;de-DE&quot; class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;b&gt;Notes: &lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Information in parenthesis are supplemented by Ji Ho Yi. &lt;/span&gt;&lt;/font&gt;&lt;/p&gt;\r\n  &lt;p lang=&quot;de-DE&quot; class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;b&gt;Summary: &lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Costume of Kucha is treated in pp. 68–73, (1) K&#39;uch&#39;a, K&#39;arasyarŭ ŭi poksik &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;쿠차&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;카라샤르의 복식 &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;(Costume of Kucha, Karashar) under Na. Sŏyŏkpukto- K&#39;uch&#39;a, K&#39;arasyarŭ, T&#39;urŭp&#39;an-ŭi poksik &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;나&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;. &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;서역북도&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;- &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;쿠차&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;카라샤르&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;투르판&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;-&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;의 복식 &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;(B. Costume of Northern Circuit of Western Regions (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Xiyu, &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;西域&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;)-Kucha, Karashar, Turfan). Kim refers to various visual materials and Chinese literary materials. Following are excerpts of relevant passages from Kim’s dissertation:&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;\r\n  &lt;p class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;br /&gt;&lt;/p&gt;\r\n  &lt;p lang=&quot;de-DE&quot; class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;u&gt;Hairstyle&lt;/u&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;:&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;\r\n  &lt;ul&gt;\r\n   &lt;li&gt;\r\n    &lt;p lang=&quot;de-DE&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Kim writes that Kucha’s custom of cutting one’s hair might have been influenced by the Persians. According to Chinese accounts of Persians in the &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Book of Wei&lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt; (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Weishu, &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;魏書&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;) and the &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Old &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Book of Tang&lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt; (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Jiutangshu,&lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt; &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;舊&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;唐書&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;), it was typical for Persians to cut their hair. &lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;/li&gt;\r\n  &lt;/ul&gt;\r\n  &lt;p lang=&quot;de-DE&quot; style=&quot;line-height: 100%; margin-left: 0.64cm; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;(In volume 102 (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;juan &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;102, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;卷&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;102) of the &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Book of Wei&lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, the relevant sentences are as follows: (According to) local custom, the men cut (their) hair, wear white leather hat. The shirt has a hole for the head (?), the sleeves open as they come closer to the bottom. There is also a headscarf, the borders are made of patterned garment. Women wear large coats and put on large skirts. Their hair is knotted at the front and draped in the back. They decorate (themselves) with golden and silver flowers, added with a string of beads in five colours, draped at the limbs. &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;其俗丈夫剪髮，戴白皮帽&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;貫頭衫，&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;兩廂近下開之，&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;亦有巾&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;帔&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;，&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;緣以織成&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;婦女服大衫，&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;披大&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;帔&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;，&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;其髮前&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;為&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;髻，&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;後披之，&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;飾以金銀花，&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;仍貫五色珠，&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;絡之於膊。&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt;”&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;The account about Persian clothing in volume 198 (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;juan &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;198, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;卷&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;198) of &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Old Book of Tang &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;is similar, only more detailed. It mentions that the male headscarves of used often sappanwood-dye-colour (red-orange, I translated &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;sufang &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;蘇方&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;as the name of tree, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Biancaea sappan&lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;), blue and white colours.&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt; “&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;多用蘇方&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;青&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;白色&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;為&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;之&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt;”&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;)&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;\r\n  &lt;ul&gt;\r\n   &lt;li&gt;\r\n    &lt;p lang=&quot;de-DE&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;“&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Both men and women (of Kucha) cut hair and let them down, along with neck garment (?), only the king does not cut his hair, …, the king covers the neck with silk brocade, wears a silk brocade robe and golden jewelled belt, sits on a golden lion throne&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;男女皆剪髮垂與項齊&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;唯王不剪髮&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;,…, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;其王以錦蒙項&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;着錦袍&lt;/font&gt;&lt;font face=&quot;Arial&quot;&gt;金&lt;/font&gt;&lt;font face=&quot;&quot;&gt;寶帶&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;坐&lt;/font&gt;&lt;font face=&quot;Arial&quot;&gt;金&lt;/font&gt;&lt;font face=&quot;&quot;&gt;獅子牀&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;.&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt; (Translation by Ji Ho Yi)&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;”&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Old Book of Tang&lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt; (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Jiutangshu&lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;舊唐書&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;), volume 198 (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;juan &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;198, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;卷&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;198)&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt; &lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;/li&gt;\r\n   &lt;li&gt;\r\n    &lt;p lang=&quot;de-DE&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;“&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;服飾錦褐&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;剪髮巾帽&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt;”&lt;/span&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;(“Wears silk brocade and fur, cuts hair and wears headscarf-hat.”) &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Xuanzang, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Great Tang Record of [Travels to] the Western Regions&lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt; &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;大唐西域記&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;(&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Da Tang Xiyu Ji. &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;According to Buswell, Robert E. Jr. and Lopez, Donald S., 2014, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;The Princeton Dictionary of Buddhism. &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Princeton, N.J. and Oxford, United Kingdom: Princeton University Press, p. 224, this is “a travelogue of a pilgrimage to India by the Chinese translator and exegete Xuanzang (600/602–664) written in 646 at the request of the Tang emperor Taizong and edited by the monk Bianji (d. 652)…The &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Da Tang Xiyu ji &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;provides a comprehensive overview of the different countries that Xuanzang visited during his travels in India and Central Asia, offering detailed descriptions of the geography, climate, customs, languages, and religious practices of these various countries.”&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;)&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, volume 1 (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;juan &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;1, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;卷&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;1&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;) &lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;/li&gt;\r\n   &lt;li&gt;\r\n    &lt;p lang=&quot;de-DE&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Kim supposes that the King of Kucha did not cut his hair because Kucha was subjugated to Turks and followed Turkic custom. She refers to &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;History of Northern Dynasties &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;(&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Beishi, &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;北史&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;), volume 97 (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;juan &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;97, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;卷&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;97), “the king’s head is bound with silk ribbon and it is let down to the back &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;其王頭繫綵帶&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;垂之于後&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;(Translation by Ji Ho Yi)&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;”&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;and &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Book of Wei &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;(&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Weishu, &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;魏書&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;), volume 102 (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;juan &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;102, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;卷&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;102), &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;which writes “The king’s head is bound with silk ribbon and it is let down to the back. &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;其王頭繫綵帶，垂之於後&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;. &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;(Translation by Ji Ho Yi)&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;”&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;/li&gt;\r\n  &lt;/ul&gt;\r\n  &lt;p class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;br /&gt;&lt;/p&gt;\r\n  &lt;p lang=&quot;de-DE&quot; class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;u&gt;Collar: &lt;/u&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;\r\n  &lt;ul&gt;\r\n   &lt;li&gt;\r\n    &lt;p lang=&quot;de-DE&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Everted collars (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;fanling, &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;翻領&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;) are found most often in Kizil wall paintings. &lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;/li&gt;\r\n   &lt;li&gt;\r\n    &lt;p lang=&quot;de-DE&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;A new form of collar, which has qualities of both everted collar (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;fanling, &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;翻領&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;) and straight collar (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;zhiling, &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;直領&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;) for the robe, is typical of Kucha. One can find such robes in the wall paintings in cave 8 of Kizil and cave 16 of Taitai’er which were supposedly painted during 7&lt;/span&gt;&lt;/font&gt;&lt;sup&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;th&lt;/span&gt;&lt;/font&gt;&lt;/sup&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt; century CE. &lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;/li&gt;\r\n   &lt;li&gt;\r\n    &lt;p lang=&quot;de-DE&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;There are many examples of figures who gather both sides of everted collar together and formed a round collar (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;banling&lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;盤領&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;). &lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;/li&gt;\r\n  &lt;/ul&gt;\r\n  &lt;p class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;br /&gt;&lt;/p&gt;\r\n  &lt;p lang=&quot;de-DE&quot; class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;u&gt;Women’s clothing: &lt;/u&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;\r\n  &lt;p lang=&quot;de-DE&quot; class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Their costume of pants with tunic, as in the wall painting in cave 76 in Kizil, is similar to the Tocharian female costume. Kim supposes that this was the Aryan people’s costume before it was changed into Turkic style. Some women wore skirts, too. Clothing with everted collar and short sleeves were worn over the tunic. They were worn often in Central Asia. (Ji Ho Yi)&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;\r\n  &lt;style type=&quot;text/css&quot;&gt;p { line-height: 115%; text-align: left; orphans: 2; widows: 2; margin-bottom: 0.25cm; direction: ltr; background: transparent }p.western { font-size: 12pt; so-language: de-DE }p.cjk { font-size: 12pt; so-language: zh-CN }p.ctl { font-family: &quot;Arial&quot;; font-size: 12pt; so-language: sa-IN }&lt;/style&gt;\r\n &lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\nThe Code, I am using for PDF-Generation is:\r\n\r\n\r\n```\r\nbyte[] bytes = html.getBytes(StandardCharsets.UTF_8); //String from above\r\nString utf8EncodedString = new String(bytes, StandardCharsets.UTF_8);\r\nDocument annotation = Jsoup.parse(utf8EncodedString, &quot;UTF-8&quot;);\r\nannotation.outputSettings().escapeMode(org.jsoup.nodes.Entities.EscapeMode.extended);\r\nannotation.outputSettings().syntax(Document.OutputSettings.Syntax.xml);\r\ntry (ServletOutputStream out = response.getOutputStream()){\r\n  ITextRenderer renderer = new ITextRenderer();;\r\n  renderer.getFontResolver().addFont(&quot;fonts/ARIALUNI.TTF&quot;, BaseFont.EMBEDDED);\r\n  SharedContext sharedContext = renderer.getSharedContext();\r\n  sharedContext.setPrint(true);\r\n  sharedContext.setInteractive(false);\r\n  sharedContext.flushFonts();\r\n  renderer.setDocumentFromString(annotation.html());\r\n  renderer.layout();\r\n  renderer.createPDF(out);\r\n  response.setContentType(&quot;application/pdf&quot;);\r\n  out.close();\r\n} catch (IOException e) {\r\n  e.printStackTrace();\r\n}\r\n```\r\nThe PDF is generated just fine. However, the Han- and Korean Characters in it are being lost.\r\n\r\n\r\nAs you can see, I included the UTF-8 Font Arial. The TTF is 23 MB. \r\nFrom my understanding, this should be displaying Han- and Korean Characters just fine.\r\nI even included the font via CSS and by code (addFont). Bothy ways seem to be without any impact.\r\n\r\nDo I miss something? Does someone understand, where my mistake is? \r\n\r\nPlease help,\r\n\r\nErik","title":"xhtmlrenderer/Flying Saucer - UTF-8 Encoding not working","body":"<p>I am using Flying Saucer and xhtmlrenderer to produce PDFs from a String-HTML-Code.</p>\n<p>The Html-String is:</p>\n<pre><code>&lt;html&gt;\n &lt;head&gt;\n  &lt;style type=&quot;text/css&quot;&gt;\n    @font-face {\n\n    font-family: 'Arial';\n\n    src: url(&quot;fonts/ARIALUNI.TTF&quot;);\n\n    -fs-pdf-font-embed: embed;\n\n    -fs-pdf-font-encoding: Identity-H;\n}\n\n    * { font-family: 'Arial'!important; }&lt;/style&gt;\n &lt;/head&gt;\n &lt;body&gt;\n  &lt;p lang=&quot;de-DE&quot; class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Kim, Sohyeun [&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Kim, Sohyŏn] &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;김소현&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;b&gt;1993,&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt; Tang sidae ŭi hobok e kwanhan yŏn'gu &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;당시대의 호복에 관한 연구 &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;/ The Study on the ‘Ho Bok (Chinese: Hu-Fu, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;胡服&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;)’ in the T’ang Dynasty. Ph. D. Dissertation, Ewha Woman’s University: Department of Clothing and Textiles. &lt;/span&gt;&lt;/font&gt;&lt;/p&gt;\n  &lt;p class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;br /&gt;&lt;/p&gt;\n  &lt;p lang=&quot;de-DE&quot; class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;b&gt;Keywords: &lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Kucha, hairstyle, Book of Wei, Weishu, Old Book of Tang, Jiutangshu, clothing, costume, Great Tang Records on the Western Regions, Da Tang Xiyu ji, History of Northern Dynasties, Beishi.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;\n  &lt;p lang=&quot;de-DE&quot; class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;b&gt;Notes: &lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Information in parenthesis are supplemented by Ji Ho Yi. &lt;/span&gt;&lt;/font&gt;&lt;/p&gt;\n  &lt;p lang=&quot;de-DE&quot; class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;b&gt;Summary: &lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Costume of Kucha is treated in pp. 68–73, (1) K'uch'a, K'arasyarŭ ŭi poksik &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;쿠차&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;카라샤르의 복식 &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;(Costume of Kucha, Karashar) under Na. Sŏyŏkpukto- K'uch'a, K'arasyarŭ, T'urŭp'an-ŭi poksik &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;나&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;. &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;서역북도&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;- &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;쿠차&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;카라샤르&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;투르판&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;-&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;의 복식 &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;(B. Costume of Northern Circuit of Western Regions (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Xiyu, &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;西域&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;)-Kucha, Karashar, Turfan). Kim refers to various visual materials and Chinese literary materials. Following are excerpts of relevant passages from Kim’s dissertation:&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;\n  &lt;p class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;br /&gt;&lt;/p&gt;\n  &lt;p lang=&quot;de-DE&quot; class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;u&gt;Hairstyle&lt;/u&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;:&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;\n  &lt;ul&gt;\n   &lt;li&gt;\n    &lt;p lang=&quot;de-DE&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Kim writes that Kucha’s custom of cutting one’s hair might have been influenced by the Persians. According to Chinese accounts of Persians in the &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Book of Wei&lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt; (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Weishu, &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;魏書&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;) and the &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Old &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Book of Tang&lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt; (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Jiutangshu,&lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt; &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;舊&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;唐書&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;), it was typical for Persians to cut their hair. &lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;/li&gt;\n  &lt;/ul&gt;\n  &lt;p lang=&quot;de-DE&quot; style=&quot;line-height: 100%; margin-left: 0.64cm; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;(In volume 102 (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;juan &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;102, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;卷&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;102) of the &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Book of Wei&lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, the relevant sentences are as follows: (According to) local custom, the men cut (their) hair, wear white leather hat. The shirt has a hole for the head (?), the sleeves open as they come closer to the bottom. There is also a headscarf, the borders are made of patterned garment. Women wear large coats and put on large skirts. Their hair is knotted at the front and draped in the back. They decorate (themselves) with golden and silver flowers, added with a string of beads in five colours, draped at the limbs. &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;其俗丈夫剪髮，戴白皮帽&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;貫頭衫，&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;兩廂近下開之，&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;亦有巾&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;帔&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;，&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;緣以織成&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;婦女服大衫，&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;披大&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;帔&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;，&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;其髮前&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;為&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;髻，&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;後披之，&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;飾以金銀花，&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;仍貫五色珠，&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;絡之於膊。&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt;”&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;The account about Persian clothing in volume 198 (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;juan &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;198, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;卷&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;198) of &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Old Book of Tang &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;is similar, only more detailed. It mentions that the male headscarves of used often sappanwood-dye-colour (red-orange, I translated &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;sufang &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;蘇方&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;as the name of tree, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Biancaea sappan&lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;), blue and white colours.&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt; “&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;多用蘇方&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;青&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;白色&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;為&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;之&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt;”&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;)&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;\n  &lt;ul&gt;\n   &lt;li&gt;\n    &lt;p lang=&quot;de-DE&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;“&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Both men and women (of Kucha) cut hair and let them down, along with neck garment (?), only the king does not cut his hair, …, the king covers the neck with silk brocade, wears a silk brocade robe and golden jewelled belt, sits on a golden lion throne&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;男女皆剪髮垂與項齊&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;唯王不剪髮&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;,…, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;其王以錦蒙項&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;着錦袍&lt;/font&gt;&lt;font face=&quot;Arial&quot;&gt;金&lt;/font&gt;&lt;font face=&quot;&quot;&gt;寶帶&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;坐&lt;/font&gt;&lt;font face=&quot;Arial&quot;&gt;金&lt;/font&gt;&lt;font face=&quot;&quot;&gt;獅子牀&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;.&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt; (Translation by Ji Ho Yi)&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;”&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Old Book of Tang&lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt; (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Jiutangshu&lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;舊唐書&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;), volume 198 (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;juan &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;198, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;卷&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;198)&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt; &lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;/li&gt;\n   &lt;li&gt;\n    &lt;p lang=&quot;de-DE&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;“&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;服飾錦褐&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;剪髮巾帽&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt;”&lt;/span&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;(“Wears silk brocade and fur, cuts hair and wears headscarf-hat.”) &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Xuanzang, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Great Tang Record of [Travels to] the Western Regions&lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt; &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;大唐西域記&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;(&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Da Tang Xiyu Ji. &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;According to Buswell, Robert E. Jr. and Lopez, Donald S., 2014, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;The Princeton Dictionary of Buddhism. &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Princeton, N.J. and Oxford, United Kingdom: Princeton University Press, p. 224, this is “a travelogue of a pilgrimage to India by the Chinese translator and exegete Xuanzang (600/602–664) written in 646 at the request of the Tang emperor Taizong and edited by the monk Bianji (d. 652)…The &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Da Tang Xiyu ji &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;provides a comprehensive overview of the different countries that Xuanzang visited during his travels in India and Central Asia, offering detailed descriptions of the geography, climate, customs, languages, and religious practices of these various countries.”&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;)&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, volume 1 (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;juan &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;1, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;卷&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;1&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;) &lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;/li&gt;\n   &lt;li&gt;\n    &lt;p lang=&quot;de-DE&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Kim supposes that the King of Kucha did not cut his hair because Kucha was subjugated to Turks and followed Turkic custom. She refers to &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;History of Northern Dynasties &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;(&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Beishi, &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;北史&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;), volume 97 (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;juan &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;97, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;卷&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;97), “the king’s head is bound with silk ribbon and it is let down to the back &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;其王頭繫綵帶&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;垂之于後&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;(Translation by Ji Ho Yi)&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;”&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;and &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Book of Wei &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;(&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Weishu, &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;魏書&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;), volume 102 (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;juan &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;102, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;卷&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;102), &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;which writes “The king’s head is bound with silk ribbon and it is let down to the back. &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;其王頭繫綵帶，垂之於後&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;. &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;(Translation by Ji Ho Yi)&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;”&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;/li&gt;\n  &lt;/ul&gt;\n  &lt;p class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;br /&gt;&lt;/p&gt;\n  &lt;p lang=&quot;de-DE&quot; class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;u&gt;Collar: &lt;/u&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;\n  &lt;ul&gt;\n   &lt;li&gt;\n    &lt;p lang=&quot;de-DE&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Everted collars (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;fanling, &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;翻領&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;) are found most often in Kizil wall paintings. &lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;/li&gt;\n   &lt;li&gt;\n    &lt;p lang=&quot;de-DE&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;A new form of collar, which has qualities of both everted collar (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;fanling, &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;翻領&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;) and straight collar (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;zhiling, &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;直領&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;) for the robe, is typical of Kucha. One can find such robes in the wall paintings in cave 8 of Kizil and cave 16 of Taitai’er which were supposedly painted during 7&lt;/span&gt;&lt;/font&gt;&lt;sup&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;th&lt;/span&gt;&lt;/font&gt;&lt;/sup&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt; century CE. &lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;/li&gt;\n   &lt;li&gt;\n    &lt;p lang=&quot;de-DE&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;There are many examples of figures who gather both sides of everted collar together and formed a round collar (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;banling&lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;盤領&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;). &lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;/li&gt;\n  &lt;/ul&gt;\n  &lt;p class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;br /&gt;&lt;/p&gt;\n  &lt;p lang=&quot;de-DE&quot; class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;u&gt;Women’s clothing: &lt;/u&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;\n  &lt;p lang=&quot;de-DE&quot; class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Their costume of pants with tunic, as in the wall painting in cave 76 in Kizil, is similar to the Tocharian female costume. Kim supposes that this was the Aryan people’s costume before it was changed into Turkic style. Some women wore skirts, too. Clothing with everted collar and short sleeves were worn over the tunic. They were worn often in Central Asia. (Ji Ho Yi)&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;\n  &lt;style type=&quot;text/css&quot;&gt;p { line-height: 115%; text-align: left; orphans: 2; widows: 2; margin-bottom: 0.25cm; direction: ltr; background: transparent }p.western { font-size: 12pt; so-language: de-DE }p.cjk { font-size: 12pt; so-language: zh-CN }p.ctl { font-family: &quot;Arial&quot;; font-size: 12pt; so-language: sa-IN }&lt;/style&gt;\n &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>The Code, I am using for PDF-Generation is:</p>\n<pre><code>byte[] bytes = html.getBytes(StandardCharsets.UTF_8); //String from above\nString utf8EncodedString = new String(bytes, StandardCharsets.UTF_8);\nDocument annotation = Jsoup.parse(utf8EncodedString, &quot;UTF-8&quot;);\nannotation.outputSettings().escapeMode(org.jsoup.nodes.Entities.EscapeMode.extended);\nannotation.outputSettings().syntax(Document.OutputSettings.Syntax.xml);\ntry (ServletOutputStream out = response.getOutputStream()){\n  ITextRenderer renderer = new ITextRenderer();;\n  renderer.getFontResolver().addFont(&quot;fonts/ARIALUNI.TTF&quot;, BaseFont.EMBEDDED);\n  SharedContext sharedContext = renderer.getSharedContext();\n  sharedContext.setPrint(true);\n  sharedContext.setInteractive(false);\n  sharedContext.flushFonts();\n  renderer.setDocumentFromString(annotation.html());\n  renderer.layout();\n  renderer.createPDF(out);\n  response.setContentType(&quot;application/pdf&quot;);\n  out.close();\n} catch (IOException e) {\n  e.printStackTrace();\n}\n</code></pre>\n<p>The PDF is generated just fine. However, the Han- and Korean Characters in it are being lost.</p>\n<p>As you can see, I included the UTF-8 Font Arial. The TTF is 23 MB.\nFrom my understanding, this should be displaying Han- and Korean Characters just fine.\nI even included the font via CSS and by code (addFont). Bothy ways seem to be without any impact.</p>\n<p>Do I miss something? Does someone understand, where my mistake is?</p>\n<p>Please help,</p>\n<p>Erik</p>\n"},{"tags":["java","spring-boot","spring-webflux","reactive-programming"],"comments":[{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1694174747,"post_id":77066692,"comment_id":135860277,"body_markdown":"I&#39;m not sure, but maybe this is a question for [Software Engineering Stack Exchange](https://softwareengineering.stackexchange.com/)","body":"I&#39;m not sure, but maybe this is a question for <a href=\"https://softwareengineering.stackexchange.com/\">Software Engineering Stack Exchange</a>"},{"owner":{"account_id":477949,"reputation":5606,"user_id":889742,"accept_rate":28,"display_name":"Gonen I"},"score":0,"creation_date":1694176630,"post_id":77066692,"comment_id":135860655,"body_markdown":"Spring Reactive API&#39;s are non-blocking if both sides are reactive. There is no automatic backpressure handling (perhaps except for server queuing unhandled items). The client sets the amount of data it requests. It can request 1 item and then request another each time it handles the previous one, or it can request unlimited ones, and WebFlux will queue the items that are unhanded.  Another option is to use apis such as limitRange on the server side, limiting the amount of data sent. Generally there is no magical backpressure control until you use an appropriate API to implement it.","body":"Spring Reactive API&#39;s are non-blocking if both sides are reactive. There is no automatic backpressure handling (perhaps except for server queuing unhandled items). The client sets the amount of data it requests. It can request 1 item and then request another each time it handles the previous one, or it can request unlimited ones, and WebFlux will queue the items that are unhanded.  Another option is to use apis such as limitRange on the server side, limiting the amount of data sent. Generally there is no magical backpressure control until you use an appropriate API to implement it."},{"owner":{"account_id":18624324,"reputation":186,"user_id":13573784,"display_name":"Vitor Nilson"},"score":0,"creation_date":1694177288,"post_id":77066692,"comment_id":135860753,"body_markdown":"@GonenI nice. What about the Json response to a non-reactive client? My server is supposed to block the Flux somewhere to map it to Json. So, if it&#39;s true, there&#39;s a blocking operation on server side. Furthermore, if it&#39;s true, it breaks the logic of programming a reactive server-side to &quot;consume less resources&quot; since I&#39;m blocking a Thread to produce a Json response... or don&#39;t?","body":"@GonenI nice. What about the Json response to a non-reactive client? My server is supposed to block the Flux somewhere to map it to Json. So, if it&#39;s true, there&#39;s a blocking operation on server side. Furthermore, if it&#39;s true, it breaks the logic of programming a reactive server-side to &quot;consume less resources&quot; since I&#39;m blocking a Thread to produce a Json response... or don&#39;t?"},{"owner":{"account_id":477949,"reputation":5606,"user_id":889742,"accept_rate":28,"display_name":"Gonen I"},"score":1,"creation_date":1694179057,"post_id":77066692,"comment_id":135861158,"body_markdown":"Non reactive clients block until the whole response is delivered. There will be one HTTP request and one response. The sending of the response on the server side will be a blocking operation for whatever server side thread is handling it. Any promises for more resource efficiency on reactive programming requires both sides to be reactive ( speak the same language )","body":"Non reactive clients block until the whole response is delivered. There will be one HTTP request and one response. The sending of the response on the server side will be a blocking operation for whatever server side thread is handling it. Any promises for more resource efficiency on reactive programming requires both sides to be reactive ( speak the same language )"},{"owner":{"account_id":3168631,"reputation":3561,"user_id":2678097,"display_name":"amanin"},"score":0,"creation_date":1694238726,"post_id":77066692,"comment_id":135868187,"body_markdown":"@GonenI Not entirely sure. Because Webflux uses Netty async I/O capabilities to  write http responses. Therefore, depending on how well webflux is coded, it could &quot;suspend&quot; the response flux when the response is not consumed fast enough, even if the client is not reactive. Sure, it won&#39;t be fine-grained back-pressure (but anyway, HTTP protocol cannot do that. You&#39;d need something like RSocket instead), but it at least stream data from database. But I am not sure, we should find a doc or the code that handles Async I/O in Webflux to be sure (or create an example that demonstrate it).","body":"@GonenI Not entirely sure. Because Webflux uses Netty async I/O capabilities to  write http responses. Therefore, depending on how well webflux is coded, it could &quot;suspend&quot; the response flux when the response is not consumed fast enough, even if the client is not reactive. Sure, it won&#39;t be fine-grained back-pressure (but anyway, HTTP protocol cannot do that. You&#39;d need something like RSocket instead), but it at least stream data from database. But I am not sure, we should find a doc or the code that handles Async I/O in Webflux to be sure (or create an example that demonstrate it)."}],"answers":[{"comments":[{"owner":{"account_id":18624324,"reputation":186,"user_id":13573784,"display_name":"Vitor Nilson"},"score":0,"creation_date":1694176301,"post_id":77066823,"comment_id":135860586,"body_markdown":"Consider that my end client is able to handle any amount of data. What about my application. If my application performs backpressure on the repository, and Reactive model is supposed to be non-blocking, how my end user is able to see 900 records in a Json (since my controller produces Json)? My application must be blocking the Flux somewhere waiting to the repository finishes querying data to produce the Json, or don&#39;t?","body":"Consider that my end client is able to handle any amount of data. What about my application. If my application performs backpressure on the repository, and Reactive model is supposed to be non-blocking, how my end user is able to see 900 records in a Json (since my controller produces Json)? My application must be blocking the Flux somewhere waiting to the repository finishes querying data to produce the Json, or don&#39;t?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1694225579,"post_id":77066823,"comment_id":135867445,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/77066823/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":11604033,"reputation":1,"user_id":8500330,"display_name":"Sanjeev Kumar"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694175486,"creation_date":1694175486,"answer_id":77066823,"question_id":77066692,"body_markdown":"That’s a good question. From what I understand, backpressure is a mechanism to control the flow of data between a producer and a consumer in a reactive system. It allows the consumer to signal the producer how many elements it can handle, and prevent it from being overwhelmed by too much data.\r\n\r\n**If your end client is using declarative programming, it may not be able to handle backpressure properly. It may block the thread until it receives all the data from the reactive API, or it may lose some data if the buffer is full.**\r\n\r\n**To avoid these problems, your end client should also use reactive programming, such as WebClient in Spring WebFlux. This way, it can communicate with the reactive API in a non-blocking and asynchronous way, and apply backpressure strategies such as buffering, dropping, or sampling.**","title":"Spring Reactive Restful APIs - Is it really a non-blocking model?","body":"<p>That’s a good question. From what I understand, backpressure is a mechanism to control the flow of data between a producer and a consumer in a reactive system. It allows the consumer to signal the producer how many elements it can handle, and prevent it from being overwhelmed by too much data.</p>\n<p><strong>If your end client is using declarative programming, it may not be able to handle backpressure properly. It may block the thread until it receives all the data from the reactive API, or it may lose some data if the buffer is full.</strong></p>\n<p><strong>To avoid these problems, your end client should also use reactive programming, such as WebClient in Spring WebFlux. This way, it can communicate with the reactive API in a non-blocking and asynchronous way, and apply backpressure strategies such as buffering, dropping, or sampling.</strong></p>\n"}],"owner":{"account_id":18624324,"reputation":186,"user_id":13573784,"display_name":"Vitor Nilson"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":298,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1694175486,"creation_date":1694174272,"question_id":77066692,"body_markdown":"I know that is possible to build my entire Spring boot application in reactive way.\r\n\r\nSo if my application uses R2DBC, I can do something like:\r\n\r\n```java\r\n@Repository\r\npublic interface PersonRepository extends ReactiveCrudRepository&lt;Person, UUID&gt; {\r\n\r\n Flux&lt;Person&gt; findAllByStatus(PersonStatusEnum status);\r\n}\r\n\r\n....\r\n\r\n@Service\r\n@RequiredArgsConstructor\r\npublic class PersonService {\r\n \r\n private final PersonRepository repo;\r\n\r\n Flux&lt;Person&gt; findAllByStatus(PersonStatusEnum status){\r\n   return repo.findAllByStatus(status);\r\n }\r\n}\r\n\r\n....\r\n\r\n@RestController\r\n@RequestMapping(&quot;person&quot;)\r\n@RequiredArgsContructor\r\npublic class PersonController {\r\n private final PersonService service;\r\n \r\n @GetMapping(produces = MediaType.APPLICATION_JSON_VALUE)\r\n public ResponseEntity&lt;Flux&lt;Person&gt;&gt; findAllByStatus(@PathVariable(&quot;status&quot;) PersonStatusEnum status){\r\n\r\n   return ResponseEntity.ok(service.findAllByStatus(status));\r\n }\r\n\r\n\r\n} \r\n```\r\nIn the example above, I have 1000 records in my Person table, 900 of which have status &#39;ACTIVE&#39;.\r\n\r\nMy end client wants to retrieve all people with &#39;ACTIVE&#39; status. In this example, I&#39;m not using best practices like pagination.\r\n\r\nMy end constumer uses declarative programming. (It can be a cURL, or a Java application that uses RestTemplate).\r\n\r\n\r\nSomehow 900 is a huge amount of records for my application and from what I understand the backpressure in R2DBC will be performed automagically telling the database to send less data.\r\n\r\nWhat is the guarantee that my end client will receive the 900 records if they are using declarative Programming?\r\n\r\nDoes my client also need to be Reactive? (Using Webclient, for example).\r\n\r\nIf not, is `RestController` blocked somehow, waiting until the Repository has finished querying the database so my client will ? How does the whole body comes to a non Reactive client?\r\n\r\nI mean, the Reactive is supposed to be non blocking. But if a non Reactive client can consume a Reactive API, it has to block on some point of the code to send back the response.\r\n","title":"Spring Reactive Restful APIs - Is it really a non-blocking model?","body":"<p>I know that is possible to build my entire Spring boot application in reactive way.</p>\n<p>So if my application uses R2DBC, I can do something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Repository\npublic interface PersonRepository extends ReactiveCrudRepository&lt;Person, UUID&gt; {\n\n Flux&lt;Person&gt; findAllByStatus(PersonStatusEnum status);\n}\n\n....\n\n@Service\n@RequiredArgsConstructor\npublic class PersonService {\n \n private final PersonRepository repo;\n\n Flux&lt;Person&gt; findAllByStatus(PersonStatusEnum status){\n   return repo.findAllByStatus(status);\n }\n}\n\n....\n\n@RestController\n@RequestMapping(&quot;person&quot;)\n@RequiredArgsContructor\npublic class PersonController {\n private final PersonService service;\n \n @GetMapping(produces = MediaType.APPLICATION_JSON_VALUE)\n public ResponseEntity&lt;Flux&lt;Person&gt;&gt; findAllByStatus(@PathVariable(&quot;status&quot;) PersonStatusEnum status){\n\n   return ResponseEntity.ok(service.findAllByStatus(status));\n }\n\n\n} \n</code></pre>\n<p>In the example above, I have 1000 records in my Person table, 900 of which have status 'ACTIVE'.</p>\n<p>My end client wants to retrieve all people with 'ACTIVE' status. In this example, I'm not using best practices like pagination.</p>\n<p>My end constumer uses declarative programming. (It can be a cURL, or a Java application that uses RestTemplate).</p>\n<p>Somehow 900 is a huge amount of records for my application and from what I understand the backpressure in R2DBC will be performed automagically telling the database to send less data.</p>\n<p>What is the guarantee that my end client will receive the 900 records if they are using declarative Programming?</p>\n<p>Does my client also need to be Reactive? (Using Webclient, for example).</p>\n<p>If not, is <code>RestController</code> blocked somehow, waiting until the Repository has finished querying the database so my client will ? How does the whole body comes to a non Reactive client?</p>\n<p>I mean, the Reactive is supposed to be non blocking. But if a non Reactive client can consume a Reactive API, it has to block on some point of the code to send back the response.</p>\n"},{"tags":["java","spring","mongodb","spring-security","spring-data-mongodb"],"owner":{"account_id":5296535,"reputation":169,"user_id":4227570,"display_name":"Sebastian Forza"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694175319,"creation_date":1694097911,"question_id":77060634,"body_markdown":"I&#39;m trying to create an index (@CompoundIndex to be precise) like described in &#39;Example 186&#39; in https://docs.spring.io/spring-data/mongodb/docs/3.4.11/reference/html/#mapping.index-creation.\r\n\r\nThis is exactly how I try it:\r\n```\r\n@RequiredArgsConstructor\r\n@Configuration\r\npublic class MongoConfiguration {\r\n\r\n    private final MongoTemplate mongoTemplate;\r\n\r\n    @EventListener(ContextRefreshedEvent.class)\r\n    public void initIndicesAfterStartup() {\r\n\r\n        MappingContext&lt;? extends MongoPersistentEntity&lt;?&gt;, MongoPersistentProperty&gt; mappingContext = mongoTemplate\r\n            .getConverter().getMappingContext();\r\n\r\n        IndexResolver resolver = new MongoPersistentEntityIndexResolver(mappingContext);\r\n\r\n        IndexOperations indexOps = mongoTemplate.indexOps(MyDomainObject.class);\r\n        resolver.resolveIndexFor(MyDomainObject.class).forEach(indexOps::ensureIndex);\r\n    }\r\n```\r\n\r\nUnfortunately I get the following error:\r\n```\r\nCaused by: java.lang.IllegalArgumentException: Authentication object cannot be null\r\n\tat org.springframework.security.access.expression.SecurityExpressionRoot.&lt;init&gt;(SecurityExpressionRoot.java:76)\r\n\tat org.springframework.security.data.repository.query.SecurityEvaluationContextExtension$1.&lt;init&gt;(SecurityEvaluationContextExtension.java:124)\r\n\tat org.springframework.security.data.repository.query.SecurityEvaluationContextExtension.getRootObject(SecurityEvaluationContextExtension.java:124)\r\n\tat org.springframework.security.data.repository.query.SecurityEvaluationContextExtension.getRootObject(SecurityEvaluationContextExtension.java:89)\r\n\tat org.springframework.data.spel.ExtensionAwareEvaluationContextProvider$EvaluationContextExtensionAdapter.&lt;init&gt;(ExtensionAwareEvaluationContextProvider.java:415)\r\n\tat org.springframework.data.spel.ExtensionAwareEvaluationContextProvider.lambda$toAdapters$3(ExtensionAwareEvaluationContextProvider.java:202)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)\r\n\tat java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:485)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\r\n\tat java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:913)\r\n\tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:578)\r\n\tat org.springframework.data.spel.ExtensionAwareEvaluationContextProvider.toAdapters(ExtensionAwareEvaluationContextProvider.java:203)\r\n\tat org.springframework.data.spel.ExtensionAwareEvaluationContextProvider.access$000(ExtensionAwareEvaluationContextProvider.java:67)\r\n\tat org.springframework.data.spel.ExtensionAwareEvaluationContextProvider$ExtensionAwarePropertyAccessor.&lt;init&gt;(ExtensionAwareEvaluationContextProvider.java:225)\r\n\tat org.springframework.data.spel.ExtensionAwareEvaluationContextProvider.doGetEvaluationContext(ExtensionAwareEvaluationContextProvider.java:131)\r\n\tat org.springframework.data.spel.ExtensionAwareEvaluationContextProvider.getEvaluationContext(ExtensionAwareEvaluationContextProvider.java:111)\r\n\tat org.springframework.data.spel.ExtensionAwareEvaluationContextProvider.getEvaluationContext(ExtensionAwareEvaluationContextProvider.java:67)\r\n\tat org.springframework.data.mapping.model.BasicPersistentEntity.getEvaluationContext(BasicPersistentEntity.java:557)\r\n\tat org.springframework.data.mongodb.core.mapping.BasicMongoPersistentEntity.getEvaluationContext(BasicMongoPersistentEntity.java:219)\r\n\tat org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexResolver.getEvaluationContextForProperty(MongoPersistentEntityIndexResolver.java:664)\r\n\tat org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexResolver.resolveCompoundIndexKeyFromStringDefinition(MongoPersistentEntityIndexResolver.java:499)\r\n\tat org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexResolver.createCompoundIndexDefinition(MongoPersistentEntityIndexResolver.java:437)\r\n\tat org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexResolver.createCompoundIndexDefinitions(MongoPersistentEntityIndexResolver.java:427)\r\n\tat org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexResolver.potentiallyCreateCompoundIndexDefinitions(MongoPersistentEntityIndexResolver.java:285)\r\n\tat org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexResolver.resolveIndexForEntity(MongoPersistentEntityIndexResolver.java:127)\r\n\tat org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexResolver.resolveIndexFor(MongoPersistentEntityIndexResolver.java:104)\r\n\tat org.springframework.data.mongodb.core.index.IndexResolver.resolveIndexFor(IndexResolver.java:79)\r\n\tat com.mytest.MongoConfiguration.initIndicesAfterStartup(MongoConfiguration.java:38)\r\n```\r\n\r\nObviously some code wants an Authentication object from the security context for some reason. \r\nI don&#39;t have a security context at that very time as I want to create the index automatically without user interference.\r\n\r\nI&#39;m using spring boot 2.7.11 and spring-data-mongodb 3.4.11.\r\n\r\nI can make that whole thing work by running these lines first before everything else in the `initIndicesAfterStartup()`:\r\n\r\n```\r\nUsernamePasswordAuthenticationToken authReq\r\n            = new UsernamePasswordAuthenticationToken(&quot;dummy_user&quot;, &quot;dummy_pwd&quot;);\r\n        SecurityContextHolder.getContext().setAuthentication(authReq);\r\n```\r\n\r\nIs there a way I can disable the SecurityEvaluationContextExtension which obviously tries to add the Authentication object to the evaluation context? I didn&#39;t find a way at least.\r\n\r\nI&#39;d appreciate any ideas on that.","title":"Spring: &quot;Authentication object cannot be null&quot; when creating MongoDB index programmatically","body":"<p>I'm trying to create an index (@CompoundIndex to be precise) like described in 'Example 186' in <a href=\"https://docs.spring.io/spring-data/mongodb/docs/3.4.11/reference/html/#mapping.index-creation\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-data/mongodb/docs/3.4.11/reference/html/#mapping.index-creation</a>.</p>\n<p>This is exactly how I try it:</p>\n<pre><code>@RequiredArgsConstructor\n@Configuration\npublic class MongoConfiguration {\n\n    private final MongoTemplate mongoTemplate;\n\n    @EventListener(ContextRefreshedEvent.class)\n    public void initIndicesAfterStartup() {\n\n        MappingContext&lt;? extends MongoPersistentEntity&lt;?&gt;, MongoPersistentProperty&gt; mappingContext = mongoTemplate\n            .getConverter().getMappingContext();\n\n        IndexResolver resolver = new MongoPersistentEntityIndexResolver(mappingContext);\n\n        IndexOperations indexOps = mongoTemplate.indexOps(MyDomainObject.class);\n        resolver.resolveIndexFor(MyDomainObject.class).forEach(indexOps::ensureIndex);\n    }\n</code></pre>\n<p>Unfortunately I get the following error:</p>\n<pre><code>Caused by: java.lang.IllegalArgumentException: Authentication object cannot be null\n    at org.springframework.security.access.expression.SecurityExpressionRoot.&lt;init&gt;(SecurityExpressionRoot.java:76)\n    at org.springframework.security.data.repository.query.SecurityEvaluationContextExtension$1.&lt;init&gt;(SecurityEvaluationContextExtension.java:124)\n    at org.springframework.security.data.repository.query.SecurityEvaluationContextExtension.getRootObject(SecurityEvaluationContextExtension.java:124)\n    at org.springframework.security.data.repository.query.SecurityEvaluationContextExtension.getRootObject(SecurityEvaluationContextExtension.java:89)\n    at org.springframework.data.spel.ExtensionAwareEvaluationContextProvider$EvaluationContextExtensionAdapter.&lt;init&gt;(ExtensionAwareEvaluationContextProvider.java:415)\n    at org.springframework.data.spel.ExtensionAwareEvaluationContextProvider.lambda$toAdapters$3(ExtensionAwareEvaluationContextProvider.java:202)\n    at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)\n    at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357)\n    at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:485)\n    at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\n    at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:913)\n    at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n    at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:578)\n    at org.springframework.data.spel.ExtensionAwareEvaluationContextProvider.toAdapters(ExtensionAwareEvaluationContextProvider.java:203)\n    at org.springframework.data.spel.ExtensionAwareEvaluationContextProvider.access$000(ExtensionAwareEvaluationContextProvider.java:67)\n    at org.springframework.data.spel.ExtensionAwareEvaluationContextProvider$ExtensionAwarePropertyAccessor.&lt;init&gt;(ExtensionAwareEvaluationContextProvider.java:225)\n    at org.springframework.data.spel.ExtensionAwareEvaluationContextProvider.doGetEvaluationContext(ExtensionAwareEvaluationContextProvider.java:131)\n    at org.springframework.data.spel.ExtensionAwareEvaluationContextProvider.getEvaluationContext(ExtensionAwareEvaluationContextProvider.java:111)\n    at org.springframework.data.spel.ExtensionAwareEvaluationContextProvider.getEvaluationContext(ExtensionAwareEvaluationContextProvider.java:67)\n    at org.springframework.data.mapping.model.BasicPersistentEntity.getEvaluationContext(BasicPersistentEntity.java:557)\n    at org.springframework.data.mongodb.core.mapping.BasicMongoPersistentEntity.getEvaluationContext(BasicMongoPersistentEntity.java:219)\n    at org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexResolver.getEvaluationContextForProperty(MongoPersistentEntityIndexResolver.java:664)\n    at org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexResolver.resolveCompoundIndexKeyFromStringDefinition(MongoPersistentEntityIndexResolver.java:499)\n    at org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexResolver.createCompoundIndexDefinition(MongoPersistentEntityIndexResolver.java:437)\n    at org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexResolver.createCompoundIndexDefinitions(MongoPersistentEntityIndexResolver.java:427)\n    at org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexResolver.potentiallyCreateCompoundIndexDefinitions(MongoPersistentEntityIndexResolver.java:285)\n    at org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexResolver.resolveIndexForEntity(MongoPersistentEntityIndexResolver.java:127)\n    at org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexResolver.resolveIndexFor(MongoPersistentEntityIndexResolver.java:104)\n    at org.springframework.data.mongodb.core.index.IndexResolver.resolveIndexFor(IndexResolver.java:79)\n    at com.mytest.MongoConfiguration.initIndicesAfterStartup(MongoConfiguration.java:38)\n</code></pre>\n<p>Obviously some code wants an Authentication object from the security context for some reason.\nI don't have a security context at that very time as I want to create the index automatically without user interference.</p>\n<p>I'm using spring boot 2.7.11 and spring-data-mongodb 3.4.11.</p>\n<p>I can make that whole thing work by running these lines first before everything else in the <code>initIndicesAfterStartup()</code>:</p>\n<pre><code>UsernamePasswordAuthenticationToken authReq\n            = new UsernamePasswordAuthenticationToken(&quot;dummy_user&quot;, &quot;dummy_pwd&quot;);\n        SecurityContextHolder.getContext().setAuthentication(authReq);\n</code></pre>\n<p>Is there a way I can disable the SecurityEvaluationContextExtension which obviously tries to add the Authentication object to the evaluation context? I didn't find a way at least.</p>\n<p>I'd appreciate any ideas on that.</p>\n"},{"tags":["java","c++","java-native-interface"],"comments":[{"owner":{"account_id":25589,"reputation":562161,"user_id":65863,"accept_rate":75,"display_name":"Remy Lebeau"},"score":2,"creation_date":1694149664,"post_id":77064243,"comment_id":135855970,"body_markdown":"You are not checking to make sure `env-&gt;GetMethodID()` is successful before calling `env-&gt;CallObjectMethod()`. You need to check the return value of `GetMethodID()` for NULL","body":"You are not checking to make sure <code>env-&gt;GetMethodID()</code> is successful before calling <code>env-&gt;CallObjectMethod()</code>. You need to check the return value of <code>GetMethodID()</code> for NULL"},{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":0,"creation_date":1694173702,"post_id":77064243,"comment_id":135860061,"body_markdown":"Unrelated: since all your array members are of type `java.lang.reflect.Field` you can just look up the class and its `getName` method once.","body":"Unrelated: since all your array members are of type <code>java.lang.reflect.Field</code> you can just look up the class and its <code>getName</code> method once."}],"answers":[{"tags":[],"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1694162016,"creation_date":1694162016,"answer_id":77065363,"question_id":77064243,"body_markdown":"You need to grab the `getFields` method from the metaclass, not the class.\r\n\r\nChange the line for `getFields` as follows:\r\n```\r\njmethodID getFields = env-&gt;GetMethodID(env-&gt;GetObjectClass(klass), &quot;getFields&quot;, &quot;()[Ljava/lang/reflect/Field;&quot;);\r\n```\r\nIt is an error in JNI to call `GetMethodID` on the same object as you do `CallXXXMethod`.","title":"Getting a list of all fields in a class using JNI","body":"<p>You need to grab the <code>getFields</code> method from the metaclass, not the class.</p>\n<p>Change the line for <code>getFields</code> as follows:</p>\n<pre><code>jmethodID getFields = env-&gt;GetMethodID(env-&gt;GetObjectClass(klass), &quot;getFields&quot;, &quot;()[Ljava/lang/reflect/Field;&quot;);\n</code></pre>\n<p>It is an error in JNI to call <code>GetMethodID</code> on the same object as you do <code>CallXXXMethod</code>.</p>\n"}],"owner":{"account_id":19121633,"reputation":125,"user_id":13965488,"display_name":"Derek Li"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77065363,"answer_count":1,"score":0,"last_activity_date":1694174933,"creation_date":1694149148,"question_id":77064243,"body_markdown":"I am writing JNI code for a game and I&#39;m trying to get all fields of a particular class. Here&#39;s my code. It crashes at line 5 where I call `CallObjectMethod`. `classes` is an unordered map mapping `std::string` to `jclass`.\r\n```cpp\r\nvoid getAllFields(std::string className) {\r\n    jclass klass = getClass(className);\r\n    if (klass == NULL) return;\r\n    jmethodID getFields = env-&gt;GetMethodID(klass, &quot;getFields&quot;, &quot;()[Ljava/lang/reflect/Field;&quot;);\r\n    jobjectArray fieldsList = (jobjectArray) env-&gt;CallObjectMethod(klass, getFields); // error on this line\r\n    jsize len = env-&gt;GetArrayLength(fieldsList);\r\n        \r\n    for (jsize i = 0; i &lt; len; i++) {\r\n        jobject field = env-&gt;GetObjectArrayElement(fieldsList, i);\r\n        jclass fieldClass = env-&gt;GetObjectClass(field);\r\n        jmethodID getName = env-&gt;GetMethodID(fieldClass, &quot;getName&quot;, &quot;()Ljava/lang/String;&quot;);\r\n        jstring fieldName = (jstring) env-&gt;CallObjectMethod(field, getName);\r\n        const char *cFieldName = env-&gt;GetStringUTFChars(fieldName, 0);\r\n            \r\n        std::cout &lt;&lt; cFieldName &lt;&lt; std::endl;\r\n        env-&gt;ReleaseStringUTFChars(fieldName, cFieldName);\r\n    }\r\n}\r\n    \r\njclass getClass(std::string className) {\r\n    if (classes.contains(className))\r\n        return classes.at(className);\r\n    return NULL;\r\n}\r\n```","title":"Getting a list of all fields in a class using JNI","body":"<p>I am writing JNI code for a game and I'm trying to get all fields of a particular class. Here's my code. It crashes at line 5 where I call <code>CallObjectMethod</code>. <code>classes</code> is an unordered map mapping <code>std::string</code> to <code>jclass</code>.</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>void getAllFields(std::string className) {\n    jclass klass = getClass(className);\n    if (klass == NULL) return;\n    jmethodID getFields = env-&gt;GetMethodID(klass, &quot;getFields&quot;, &quot;()[Ljava/lang/reflect/Field;&quot;);\n    jobjectArray fieldsList = (jobjectArray) env-&gt;CallObjectMethod(klass, getFields); // error on this line\n    jsize len = env-&gt;GetArrayLength(fieldsList);\n        \n    for (jsize i = 0; i &lt; len; i++) {\n        jobject field = env-&gt;GetObjectArrayElement(fieldsList, i);\n        jclass fieldClass = env-&gt;GetObjectClass(field);\n        jmethodID getName = env-&gt;GetMethodID(fieldClass, &quot;getName&quot;, &quot;()Ljava/lang/String;&quot;);\n        jstring fieldName = (jstring) env-&gt;CallObjectMethod(field, getName);\n        const char *cFieldName = env-&gt;GetStringUTFChars(fieldName, 0);\n            \n        std::cout &lt;&lt; cFieldName &lt;&lt; std::endl;\n        env-&gt;ReleaseStringUTFChars(fieldName, cFieldName);\n    }\n}\n    \njclass getClass(std::string className) {\n    if (classes.contains(className))\n        return classes.at(className);\n    return NULL;\n}\n</code></pre>\n"},{"tags":["java","netbeans","newtons-method"],"comments":[{"owner":{"account_id":1441481,"reputation":10825,"user_id":1361506,"display_name":"azurefrog"},"score":0,"creation_date":1425668944,"post_id":28905824,"comment_id":46071019,"body_markdown":"I don&#39;t see any place in your code where you calculate, or display x2","body":"I don&#39;t see any place in your code where you calculate, or display x2"},{"owner":{"display_name":"user4227114"},"score":0,"creation_date":1425669114,"post_id":28905824,"comment_id":46071126,"body_markdown":"@azurefrog I already made a while loop, so it should calculate it automatically","body":"@azurefrog I already made a while loop, so it should calculate it automatically"},{"owner":{"account_id":1441481,"reputation":10825,"user_id":1361506,"display_name":"azurefrog"},"score":0,"creation_date":1425669123,"post_id":28905824,"comment_id":46071130,"body_markdown":"You said in your question you are looking for &quot;(Ex: X2 = 1.89012709)&quot;.  There&#39;s nothing in your code called x2.  You neither calculate nor attempt to display anything after &quot;The Error is: &lt;math&gt;&quot;, which is the output you are getting.  What is your *expected* output?","body":"You said in your question you are looking for &quot;(Ex: X2 = 1.89012709)&quot;.  There&#39;s nothing in your code called x2.  You neither calculate nor attempt to display anything after &quot;The Error is: &lt;math&gt;&quot;, which is the output you are getting.  What is your <i>expected</i> output?"},{"owner":{"display_name":"user4227114"},"score":0,"creation_date":1425669226,"post_id":28905824,"comment_id":46071191,"body_markdown":"I want the while loop to end when the error reaches less than 0.5%","body":"I want the while loop to end when the error reaches less than 0.5%"},{"owner":{"account_id":1441481,"reputation":10825,"user_id":1361506,"display_name":"azurefrog"},"score":0,"creation_date":1425669322,"post_id":28905824,"comment_id":46071243,"body_markdown":"Then you should make your while-loop dependent on the error being less then 0.5%.  Currently you terminate when `f(x1) &lt;= 0.05`, not when your error is less than 0.05.","body":"Then you should make your while-loop dependent on the error being less then 0.5%.  Currently you terminate when <code>f(x1) &lt;= 0.05</code>, not when your error is less than 0.05."},{"owner":{"display_name":"user4227114"},"score":0,"creation_date":1425669511,"post_id":28905824,"comment_id":46071360,"body_markdown":"When i tried to make the if condition if (Error &lt;= 0.5), I get nothing at all, because there is a problem in the while loop which I can&#39;t find.","body":"When i tried to make the if condition if (Error &lt;= 0.5), I get nothing at all, because there is a problem in the while loop which I can&#39;t find."}],"answers":[{"tags":[],"owner":{"account_id":3410182,"reputation":12151,"user_id":2860319,"accept_rate":75,"display_name":"The Gilbert Arenas Dagger"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1425673552,"creation_date":1425673552,"answer_id":28907059,"question_id":28905824,"body_markdown":"The reason that your code is never &quot;hitting the last line&quot;, presumably you are referring to the return statement in your NewtonRhapson() method, is that it is in an infinite loop.  Each iteration of the loop is identical to the last.  You set x0 outside of the loop, then never set it again.  Given that the rest of the values / calculations in your loop are derived from x0 you are getting the same results over and over again.\r\n\r\n\r\n\r\n\r\n","title":"Newton-Raphson Method in Java","body":"<p>The reason that your code is never \"hitting the last line\", presumably you are referring to the return statement in your NewtonRhapson() method, is that it is in an infinite loop.  Each iteration of the loop is identical to the last.  You set x0 outside of the loop, then never set it again.  Given that the rest of the values / calculations in your loop are derived from x0 you are getting the same results over and over again.</p>\n"},{"comments":[{"owner":{"account_id":5849629,"reputation":9616,"user_id":5377805,"accept_rate":93,"display_name":"HDJEMAI"},"score":2,"creation_date":1478883119,"post_id":40552316,"comment_id":68343488,"body_markdown":"add some comments to your answer. it will be helpful for other people.","body":"add some comments to your answer. it will be helpful for other people."},{"owner":{"account_id":9628052,"reputation":1,"user_id":7147019,"display_name":"X-Dark"},"score":0,"creation_date":1478888084,"post_id":40552316,"comment_id":68345918,"body_markdown":"The Program did it in 101 Step(s)\nThe root is: 1.8900297292519856\nThe Error is: 0.0%","body":"The Program did it in 101 Step(s) The root is: 1.8900297292519856 The Error is: 0.0%"},{"owner":{"account_id":9628052,"reputation":1,"user_id":7147019,"display_name":"X-Dark"},"score":0,"creation_date":1478888172,"post_id":40552316,"comment_id":68345966,"body_markdown":"for f(x) = 3x - e^x + sin(x)","body":"for f(x) = 3x - e^x + sin(x)"}],"tags":[],"owner":{"account_id":9628052,"reputation":1,"user_id":7147019,"display_name":"X-Dark"},"comment_count":3,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1478910832,"creation_date":1478882004,"answer_id":40552316,"question_id":28905824,"body_markdown":" \r\n\r\n    public class NewtonRaphsonMethod {\r\n    \r\n    \r\n              // let f be a function defined as f(x) = 3x - e^x + sin(x)\r\n    \r\n            public static double f (double x){\r\n    \r\n               // return (3*x-(Math.pow(Math.E, x))+Math.sin(x));\r\n                return((Math.pow(x, 2))+5*x+6);\r\n            }\r\n    \r\n            // let g be a function defined as g(x) = f&#39;(x) = 3- e^x + cos (x)\r\n    \r\n    \r\n         public static double g (double x){\r\n    \r\n               // return (3-(Math.pow(Math.E, x))+Math.cos(x));\r\n        \t return(2*x+5);\r\n            }\r\n    \r\n    \r\n              public static double NewtonRaphson (){\r\n            \t  int iterations_number=0;\r\n                  boolean cont = true;\r\n                double x0 , x1, Error=0;\r\n                x0 =-1.8;\r\n                x1=0;\r\n    \r\n                while (cont){\r\n                \t\r\n                x1 = x0 - (f(x0)/g(x0));\r\n                Error = Math.abs(x1-x0);\r\n                iterations_number++;\r\n               // if (Error&lt;=0.0000000005){\r\n                if(iterations_number&gt;100){\r\n                cont = false;\r\n                System.out.println(&quot;The Program did it in &quot;+iterations_number+&quot; Step(s)&quot;);\r\n                System.out.println(&quot;The root is: &quot;+ x1);\r\n                 System.out.println(&quot;The Error is: &quot;+(Math.abs(x1-x0)/x1)*100+&quot;%&quot;);\r\n                }else{\r\n                \tx0=x1;\r\n                }\r\n                }\r\n    \r\n                return x1;\r\n            }\r\n     \r\n        public static void main(String[] args) {\r\n             NewtonRaphson();\r\n    \r\n        }\r\n    }","title":"Newton-Raphson Method in Java","body":"<pre><code>public class NewtonRaphsonMethod {\n\n\n          // let f be a function defined as f(x) = 3x - e^x + sin(x)\n\n        public static double f (double x){\n\n           // return (3*x-(Math.pow(Math.E, x))+Math.sin(x));\n            return((Math.pow(x, 2))+5*x+6);\n        }\n\n        // let g be a function defined as g(x) = f'(x) = 3- e^x + cos (x)\n\n\n     public static double g (double x){\n\n           // return (3-(Math.pow(Math.E, x))+Math.cos(x));\n         return(2*x+5);\n        }\n\n\n          public static double NewtonRaphson (){\n              int iterations_number=0;\n              boolean cont = true;\n            double x0 , x1, Error=0;\n            x0 =-1.8;\n            x1=0;\n\n            while (cont){\n\n            x1 = x0 - (f(x0)/g(x0));\n            Error = Math.abs(x1-x0);\n            iterations_number++;\n           // if (Error&lt;=0.0000000005){\n            if(iterations_number&gt;100){\n            cont = false;\n            System.out.println(\"The Program did it in \"+iterations_number+\" Step(s)\");\n            System.out.println(\"The root is: \"+ x1);\n             System.out.println(\"The Error is: \"+(Math.abs(x1-x0)/x1)*100+\"%\");\n            }else{\n                x0=x1;\n            }\n            }\n\n            return x1;\n        }\n\n    public static void main(String[] args) {\n         NewtonRaphson();\n\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26012737,"reputation":1,"user_id":19721541,"display_name":"Shelvean Kapita"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660109434,"creation_date":1659993498,"answer_id":73284115,"question_id":28905824,"body_markdown":"It takes about 5 iterations to converge to a root with an error of 1e-12.\r\n\r\n    public class Newton {\r\n\tpublic static double f(double x){\r\n\t\treturn(3*x-Math.exp(x)+Math.sin(x)); /* function */\r\n\t}\r\n\tpublic static double fp(double x){\r\n\t\treturn(3-Math.exp(x)+Math.cos(x)); /* derivative */\r\n\t}\r\n\r\n\tpublic static double NewtonMethod() {\r\n\t\tint it_count=0; /* iteration counter */\r\n\t\tint count_max=10; /* maximum allowed number of iterations*/\r\n\t\tdouble x0=2.0, x=1.0, error=1.0, tol=1E-12; /* initialize */\r\n\r\n\t\twhile((it_count&lt;=count_max) &amp;&amp; (error&gt;=tol))\r\n\t\t{\r\n\t\t\t/* loop while count&lt;=10 and Error &gt;= 1E-12 */\r\n\t\t\tx = x0 - f(x0)/fp(x0); /* Newton-Raphson method*/\r\n\t\t\terror = Math.abs(x-x0); /* error  */\r\n\t\t\tit_count++; /*update count*/\r\n\t\t\tx0=x; /* update root*/\r\n\t\t}\r\n\t\tSystem.out.println(&quot;The root is: &quot;+ x); /* print root*/\r\n\t\tSystem.out.println(&quot;The number of iterations is: &quot;+ it_count);/* print count*/\r\n\t\treturn x;\r\n\t}\r\n\tpublic static void main(String[] args){\r\n\t\tNewtonMethod();\r\n\t}\r\n}\r\n\r\n\r\n","title":"Newton-Raphson Method in Java","body":"<p>It takes about 5 iterations to converge to a root with an error of 1e-12.</p>\n<pre><code>public class Newton {\npublic static double f(double x){\n    return(3*x-Math.exp(x)+Math.sin(x)); /* function */\n}\npublic static double fp(double x){\n    return(3-Math.exp(x)+Math.cos(x)); /* derivative */\n}\n\npublic static double NewtonMethod() {\n    int it_count=0; /* iteration counter */\n    int count_max=10; /* maximum allowed number of iterations*/\n    double x0=2.0, x=1.0, error=1.0, tol=1E-12; /* initialize */\n\n    while((it_count&lt;=count_max) &amp;&amp; (error&gt;=tol))\n    {\n        /* loop while count&lt;=10 and Error &gt;= 1E-12 */\n        x = x0 - f(x0)/fp(x0); /* Newton-Raphson method*/\n        error = Math.abs(x-x0); /* error  */\n        it_count++; /*update count*/\n        x0=x; /* update root*/\n    }\n    System.out.println(&quot;The root is: &quot;+ x); /* print root*/\n    System.out.println(&quot;The number of iterations is: &quot;+ it_count);/* print count*/\n    return x;\n}\npublic static void main(String[] args){\n    NewtonMethod();\n}\n</code></pre>\n<p>}</p>\n"}],"owner":{"display_name":"user4227114"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10705,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1694174495,"creation_date":1425668579,"question_id":28905824,"body_markdown":"I am making a program to apply Newton-Raphson method in Java with an equation:\r\n&lt;br&gt;&lt;br&gt;\r\nf(x) = 3x - e^x + sin(x)\r\n&lt;br&gt;&lt;br&gt;\r\nAnd\r\n&lt;br&gt;&lt;br&gt;\r\ng(x) = f&#39;(x) = 3- e^x + cos (x)\r\n\r\nThe problem is when I tried to solve the equation in a paper to reach an error less than (0.5%) &lt;br&gt;\r\nI got: &lt;br&gt;&lt;br&gt;\r\n\r\n&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; Xn  &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Error \r\n&lt;br&gt;\r\n&lt;br&gt;\r\n&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; Xo = 2 &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|   &amp;nbsp;&amp;nbsp;&amp;nbsp;------------------------\r\n&lt;br&gt;\r\n&lt;br&gt;\r\n &amp;nbsp; X1 = 1.900158400 &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;5.254%\r\n&lt;br&gt;\r\n&lt;br&gt;\r\n&amp;nbsp; X2 = 1.89012709 &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;0.5307%\r\n&lt;br&gt;\r\n&lt;br&gt;\r\n\r\nBut when I made the program in Java it does not reach the last line which is the required error &lt;br&gt; (Ex: X2 = 1.89012709)\r\n&lt;br&gt; It only displays the first line which is the first step which is &lt;br&gt;(X1 = 1.900158400)\r\n\r\nMy Java code is:\r\n\r\n    package newton.raphson.method;\r\n    \r\n    public class NewtonRaphsonMethod {\r\n        \r\n        \r\n              // let f be a function defined as f(x) = 3x - e^x + sin(x)\r\n            \r\n            public static double f (double x){\r\n            \r\n                return (3*x-(Math.pow(Math.E, x))+Math.sin(x));\r\n            }\r\n            \r\n            // let g be a function defined as g(x) = f&#39;(x) = 3- e^x + cos (x)\r\n            \r\n            \r\n         public static double g (double x){\r\n            \r\n                return (3-(Math.pow(Math.E, x))+Math.cos(x));\r\n            }\r\n         \r\n         \r\n              public static double NewtonRaphson (){\r\n                  int iterations_number=0;\r\n                  boolean cont = true;\r\n                double x0 , x1, Error=5000;\r\n                x0 =2;\r\n                x1=0;\r\n                \r\n                while (cont){\r\n                x1 = x0 - (f(x0)/g(x0));\r\n                Error = (Math.abs(x1-x0)/x1)*100;\r\n                iterations_number++;\r\n                if (f(x1)&lt;=0.05){\r\n                cont = false;\r\n                System.out.println(&quot;The Program did it in &quot;+iterations_number+&quot; Step(s)&quot;);\r\n                System.out.println(&quot;The root is: &quot;+ x1);\r\n                 System.out.println(&quot;The Error is: &quot;+(Math.abs(x1-x0)/x1)*100+&quot;%&quot;);\r\n                }\r\n                }\r\n                \r\n                return x1;\r\n            }\r\n         \r\n        public static void main(String[] args) {\r\n             NewtonRaphson();\r\n            \r\n        }\r\n    }\r\n\r\n\r\n\r\n&lt;br&gt;\r\n\r\nAnd the output is:\r\n\r\n    The Program did it in 1 Step(s)\r\n    The root is: 1.9001584993293807\r\n    The Error is: 5.254377500921955%","title":"Newton-Raphson Method in Java","body":"<p>I am making a program to apply Newton-Raphson method in Java with an equation:\n<br><br>\nf(x) = 3x - e^x + sin(x)\n<br><br>\nAnd\n<br><br>\ng(x) = f'(x) = 3- e^x + cos (x)</p>\n\n<p>The problem is when I tried to solve the equation in a paper to reach an error less than (0.5%) <br>\nI got: <br><br></p>\n\n<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Xn  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;Error \n<br>\n<br>\n&nbsp; &nbsp; &nbsp; &nbsp; Xo = 2 &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|   &nbsp;&nbsp;&nbsp;------------------------\n<br>\n<br>\n &nbsp; X1 = 1.900158400 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5.254%\n<br>\n<br>\n&nbsp; X2 = 1.89012709 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.5307%\n<br>\n<br></p>\n\n<p>But when I made the program in Java it does not reach the last line which is the required error <br> (Ex: X2 = 1.89012709)\n<br> It only displays the first line which is the first step which is <br>(X1 = 1.900158400)</p>\n\n<p>My Java code is:</p>\n\n<pre><code>package newton.raphson.method;\n\npublic class NewtonRaphsonMethod {\n\n\n          // let f be a function defined as f(x) = 3x - e^x + sin(x)\n\n        public static double f (double x){\n\n            return (3*x-(Math.pow(Math.E, x))+Math.sin(x));\n        }\n\n        // let g be a function defined as g(x) = f'(x) = 3- e^x + cos (x)\n\n\n     public static double g (double x){\n\n            return (3-(Math.pow(Math.E, x))+Math.cos(x));\n        }\n\n\n          public static double NewtonRaphson (){\n              int iterations_number=0;\n              boolean cont = true;\n            double x0 , x1, Error=5000;\n            x0 =2;\n            x1=0;\n\n            while (cont){\n            x1 = x0 - (f(x0)/g(x0));\n            Error = (Math.abs(x1-x0)/x1)*100;\n            iterations_number++;\n            if (f(x1)&lt;=0.05){\n            cont = false;\n            System.out.println(\"The Program did it in \"+iterations_number+\" Step(s)\");\n            System.out.println(\"The root is: \"+ x1);\n             System.out.println(\"The Error is: \"+(Math.abs(x1-x0)/x1)*100+\"%\");\n            }\n            }\n\n            return x1;\n        }\n\n    public static void main(String[] args) {\n         NewtonRaphson();\n\n    }\n}\n</code></pre>\n\n<p><br></p>\n\n<p>And the output is:</p>\n\n<pre><code>The Program did it in 1 Step(s)\nThe root is: 1.9001584993293807\nThe Error is: 5.254377500921955%\n</code></pre>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":123871,"reputation":4275,"user_id":318599,"accept_rate":62,"display_name":"Anto"},"score":0,"creation_date":1276610565,"post_id":3045800,"comment_id":3116840,"body_markdown":"I just run the StartApplication class in my project","body":"I just run the StartApplication class in my project"},{"owner":{"account_id":103589,"reputation":10607,"user_id":277368,"accept_rate":79,"display_name":"Xi 张熹"},"score":0,"creation_date":1338824435,"post_id":3045800,"comment_id":14185263,"body_markdown":"Have you found a fix? I am experiencing the same problem.","body":"Have you found a fix? I am experiencing the same problem."},{"owner":{"account_id":2163436,"reputation":1923,"user_id":1933494,"display_name":"J. Katzwinkel"},"score":0,"creation_date":1362010207,"post_id":3045800,"comment_id":21287623,"body_markdown":"Sometimes, cleaning everything up helps: `Project &gt; Clean &gt; Clean All`. Solved a similar issue for me.","body":"Sometimes, cleaning everything up helps: <code>Project &gt; Clean &gt; Clean All</code>. Solved a similar issue for me."}],"answers":[{"comments":[{"owner":{"account_id":123871,"reputation":4275,"user_id":318599,"accept_rate":62,"display_name":"Anto"},"score":0,"creation_date":1276613343,"post_id":3046221,"comment_id":3117329,"body_markdown":"By adding *main* it will throw the error:\n\nThe import main.ee.asus.kernel.House cannot be resolved","body":"By adding <i>main</i> it will throw the error:  The import main.ee.asus.kernel.House cannot be resolved"},{"owner":{"account_id":142256,"reputation":3008,"user_id":349842,"accept_rate":62,"display_name":"Ross"},"score":0,"creation_date":1276613652,"post_id":3046221,"comment_id":3117393,"body_markdown":"Strange, if the engine project is added in your projects build path and the package name is the same as it is defined your House class it should work. Only reason I can think of is if your engine project has compile errors as well","body":"Strange, if the engine project is added in your projects build path and the package name is the same as it is defined your House class it should work. Only reason I can think of is if your engine project has compile errors as well"}],"tags":[],"owner":{"account_id":142256,"reputation":3008,"user_id":349842,"accept_rate":62,"display_name":"Ross"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1276612864,"creation_date":1276612864,"answer_id":3046221,"question_id":3045800,"body_markdown":"The error can&#39;t resolve the first part of the package name: ee. Are you sure the package starts with ee? I see your Window class package starts with main.ee, does your engine project start with the same package structure?","title":"compile error: The import xxxx cannot be resolved","body":"<p>The error can't resolve the first part of the package name: ee. Are you sure the package starts with ee? I see your Window class package starts with main.ee, does your engine project start with the same package structure?</p>\n"},{"tags":[],"owner":{"account_id":4243,"reputation":1301938,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1396422914,"creation_date":1276613742,"answer_id":3046353,"question_id":3045800,"body_markdown":"Look for the House class in your second project, opens it and see what package it is in.  \r\n(line &quot;`package xxx.yyy.zzz;`&quot; at the beginning of the `House.java` file)\r\n\r\nThen make sure your `Window.java` file (class `main.ee.asus.GUI.FrameWindow.Window`) does have the line &quot;`import xxx.yyy.zzz.House;`&quot; in it.","title":"compile error: The import xxxx cannot be resolved","body":"<p>Look for the House class in your second project, opens it and see what package it is in.<br>\n(line \"<code>package xxx.yyy.zzz;</code>\" at the beginning of the <code>House.java</code> file)</p>\n\n<p>Then make sure your <code>Window.java</code> file (class <code>main.ee.asus.GUI.FrameWindow.Window</code>) does have the line \"<code>import xxx.yyy.zzz.House;</code>\" in it.</p>\n"},{"tags":[],"owner":{"account_id":1376,"reputation":61117,"user_id":1836,"accept_rate":90,"display_name":"Matthew Farwell"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1276615124,"creation_date":1276615124,"answer_id":3046539,"question_id":3045800,"body_markdown":"I sometimes get weird behaviour with missing class files etc. when Eclipse is out of sync with the filesystem.\r\n\r\nYou could try refreshing all of your projects and doing a full rebuild.","title":"compile error: The import xxxx cannot be resolved","body":"<p>I sometimes get weird behaviour with missing class files etc. when Eclipse is out of sync with the filesystem.</p>\n\n<p>You could try refreshing all of your projects and doing a full rebuild.</p>\n"},{"tags":[],"owner":{"account_id":103589,"reputation":10607,"user_id":277368,"accept_rate":79,"display_name":"Xi 张熹"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1338826569,"creation_date":1338826569,"answer_id":10884537,"question_id":3045800,"body_markdown":"I have been experiencing the same problem. I have an app A1(tablet version app) calling another app A2(phone version app). Upon calling, I see the same error message:\r\n\r\n    java.lang.Error: Unresolved compilation problems: \r\n    The import xxxxx cannot be resolved\r\n    xxxx cannot be resolved to a type\r\n    xxxx cannot be resolved to a type\r\n    xxxx cannot be resolved to a type\r\n\r\nAfter poking around for a while, I realized the problem was the A2 doesn&#39;t run on tablet at all. It&#39;s weird because the immediate previous version of A2 runs perfectly on the same tablet(I have been on board only for 1 month). So I decided there was something wrong in the build config.\r\n\r\nFinally, I fixed the problem by changing the order of Java Build Path. Although I have no idea why it worked, hopefully this will shed some light on your problem.\r\n\r\n","title":"compile error: The import xxxx cannot be resolved","body":"<p>I have been experiencing the same problem. I have an app A1(tablet version app) calling another app A2(phone version app). Upon calling, I see the same error message:</p>\n\n<pre><code>java.lang.Error: Unresolved compilation problems: \nThe import xxxxx cannot be resolved\nxxxx cannot be resolved to a type\nxxxx cannot be resolved to a type\nxxxx cannot be resolved to a type\n</code></pre>\n\n<p>After poking around for a while, I realized the problem was the A2 doesn't run on tablet at all. It's weird because the immediate previous version of A2 runs perfectly on the same tablet(I have been on board only for 1 month). So I decided there was something wrong in the build config.</p>\n\n<p>Finally, I fixed the problem by changing the order of Java Build Path. Although I have no idea why it worked, hopefully this will shed some light on your problem.</p>\n"},{"tags":[],"owner":{"account_id":1507058,"reputation":2933,"user_id":1410212,"accept_rate":88,"display_name":"lilalinux"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1396429728,"creation_date":1396426162,"answer_id":22805218,"question_id":3045800,"body_markdown":"In my case it was a version conflict.\r\n\r\nI&#39;m using maven and updated many packages and bumped versions of many projects. Maybe the reactor built mixed something up, or the transitive dependencies weren&#39;t up-to-date, or it was a change in a project without a version increment. However, rebuilding that project explicitly via maven fixed the problem.\r\n\r\nEdit: When I think about it, it might also have been a conflict between eclipse&#39;s auto-build and building via maven on the command line.","title":"compile error: The import xxxx cannot be resolved","body":"<p>In my case it was a version conflict.</p>\n\n<p>I'm using maven and updated many packages and bumped versions of many projects. Maybe the reactor built mixed something up, or the transitive dependencies weren't up-to-date, or it was a change in a project without a version increment. However, rebuilding that project explicitly via maven fixed the problem.</p>\n\n<p>Edit: When I think about it, it might also have been a conflict between eclipse's auto-build and building via maven on the command line.</p>\n"}],"owner":{"account_id":123871,"reputation":4275,"user_id":318599,"accept_rate":62,"display_name":"Anto"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8902,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":5,"score":2,"last_activity_date":1694174495,"creation_date":1276610134,"question_id":3045800,"body_markdown":"I am developing a Java project using Eclipse. The project uses another project called *engine*, which I have added in my project build-path. As I need to call a *dabo* class, called *House*, in one of my project class, named *Window*, I have used the following code as usual:\r\n     \r\n    import ee.asus.kernel.House;\r\n\r\nI got however the following error in compiling time:   \r\n\r\n    Exception in thread &quot;main&quot; java.lang.Error: Unresolved compilation problems: \r\n\tThe import ee cannot be resolved\r\n\tHouse cannot be resolved to a type\r\n\tHouse cannot be resolved to a type\r\n\tHouse cannot be resolved to a type\r\n\r\n    at main.ee.asus.GUI.FrameWindow.Window.&lt;init&gt;(Window.java:10)\r\n    at main.ee.asus.GUI.StartApplication.main(StartApplication.java:13)\r\n\r\nIt&#39;s worth to point out that my prject and the *dabo* project use the same directory/packages names. Does anyone have a clue where the error may be?","title":"compile error: The import xxxx cannot be resolved","body":"<p>I am developing a Java project using Eclipse. The project uses another project called <em>engine</em>, which I have added in my project build-path. As I need to call a <em>dabo</em> class, called <em>House</em>, in one of my project class, named <em>Window</em>, I have used the following code as usual:</p>\n\n<pre><code>import ee.asus.kernel.House;\n</code></pre>\n\n<p>I got however the following error in compiling time:   </p>\n\n<pre><code>Exception in thread \"main\" java.lang.Error: Unresolved compilation problems: \nThe import ee cannot be resolved\nHouse cannot be resolved to a type\nHouse cannot be resolved to a type\nHouse cannot be resolved to a type\n\nat main.ee.asus.GUI.FrameWindow.Window.&lt;init&gt;(Window.java:10)\nat main.ee.asus.GUI.StartApplication.main(StartApplication.java:13)\n</code></pre>\n\n<p>It's worth to point out that my prject and the <em>dabo</em> project use the same directory/packages names. Does anyone have a clue where the error may be?</p>\n"},{"tags":["java","indexing","janusgraph"],"owner":{"account_id":11120734,"reputation":23,"user_id":8163649,"display_name":"Hopper"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694174366,"creation_date":1694174366,"question_id":77066704,"body_markdown":"Janusgraph version =&gt; 0.6.1\r\nTinkerpop version =&gt;3.5.1\r\nUsign Janusgraph in the embedded library mode and not in server mode.\r\n\r\nI am trying to create vertex centric index(es) on existing edge properties.\r\nTo start with I followed the steps in the documentation. With that I was getting the infamous issue of index getting stuck in INSTALLED state while waiting for it to get available (REGISTERED). On debugging it seemed like it was happening because of already open transactions at the time of waiting for the index to become available. As mentioned in several answers to similar problems online, I followed the steps to close open transactions before calling the ManagementSystem,awaitRelationIndexStatus method. This solved for the issue of index getting stuck in INSTALLED and now i am able to build edge index and REINDEX it. But the probelm is that since its closing all open transactions whatever operations are going on at the time of this indexing, will be aborted and might result in data loss. Please find below the code that i am using currently:\r\n\r\n```\r\npublic void registerVertexCentricIndexOnEdgeProperty(String edgeLabel, String propertyName, String userId) throws MinervaException {\r\n    String indexName = autoCreatedRelationIndexName(edgeLabel, propertyName);\r\n    StandardJanusGraph standardJanusGraph = (StandardJanusGraph) getGraphObjectByName();\r\n    JanusGraphManagement management = getManagementForGraph();\r\n    val propertyKey = management.getPropertyKey(propertyName);\r\n    val label = management.getEdgeLabel(edgeLabel);\r\n    val index = management.buildEdgeIndex(label, indexName, Direction.BOTH, propertyKey);\r\n    log.info(&quot;Created Edge Index: {}. Now Going to wait for it to become REGISTERED&quot;, index.name());\r\n    management.commit();\r\n\r\n    //Close all open transactions\r\n    standardJanusGraph.getOpenTransactions().forEach(JanusGraphTransaction::rollback);\r\n    ManagementSystem\r\n            .awaitRelationIndexStatus(\r\n                    standardJanusGraph,\r\n                    indexName,\r\n                    edgeLabel\r\n            ).call();\r\n    management = getManagementForGraph();\r\n    management.updateIndex(management.getRelationIndex(label, indexName), SchemaAction.REINDEX).get();\r\n    management.commit();\r\n}\r\n```\r\n\r\nIs there a cleaner and more graceful way to do this? I tried searching for similar issue but everywhere the solutions mention the closing of transactions as a mandatory step but if that is the case then this seems like a bug as the official documentation does not mention it explicitly anywhere. Moreover, it essentially means that you have to stop reads and writes on graph while doing reindexing which itself can take sometime to finish. Any help is appreciated.\r\n\r\n[ADDITIONAL NOTE] :\r\nI am trying to debug this locally using test cases in Java. In my case there are no ghost management instances (checked using mgmt.getOpenInstances()). There is only 1 open management instance which has the (current) suffix. Although, i see 4 open transactions using standardJanusGraph.getOpenTransaction(), and on closing them (as in the code above), i am able to move the index from INSTALLED to REGISTERED. I am unable to figure out whether these transactions are management transactions or normal graph transactions. Ideally I would want to not stop reads and writes on graph while this happens (at least for other labels, properties etc). \r\n","title":"Issue while creating Vertex Centric Index (Relation Index) on edge property","body":"<p>Janusgraph version =&gt; 0.6.1\nTinkerpop version =&gt;3.5.1\nUsign Janusgraph in the embedded library mode and not in server mode.</p>\n<p>I am trying to create vertex centric index(es) on existing edge properties.\nTo start with I followed the steps in the documentation. With that I was getting the infamous issue of index getting stuck in INSTALLED state while waiting for it to get available (REGISTERED). On debugging it seemed like it was happening because of already open transactions at the time of waiting for the index to become available. As mentioned in several answers to similar problems online, I followed the steps to close open transactions before calling the ManagementSystem,awaitRelationIndexStatus method. This solved for the issue of index getting stuck in INSTALLED and now i am able to build edge index and REINDEX it. But the probelm is that since its closing all open transactions whatever operations are going on at the time of this indexing, will be aborted and might result in data loss. Please find below the code that i am using currently:</p>\n<pre><code>public void registerVertexCentricIndexOnEdgeProperty(String edgeLabel, String propertyName, String userId) throws MinervaException {\n    String indexName = autoCreatedRelationIndexName(edgeLabel, propertyName);\n    StandardJanusGraph standardJanusGraph = (StandardJanusGraph) getGraphObjectByName();\n    JanusGraphManagement management = getManagementForGraph();\n    val propertyKey = management.getPropertyKey(propertyName);\n    val label = management.getEdgeLabel(edgeLabel);\n    val index = management.buildEdgeIndex(label, indexName, Direction.BOTH, propertyKey);\n    log.info(&quot;Created Edge Index: {}. Now Going to wait for it to become REGISTERED&quot;, index.name());\n    management.commit();\n\n    //Close all open transactions\n    standardJanusGraph.getOpenTransactions().forEach(JanusGraphTransaction::rollback);\n    ManagementSystem\n            .awaitRelationIndexStatus(\n                    standardJanusGraph,\n                    indexName,\n                    edgeLabel\n            ).call();\n    management = getManagementForGraph();\n    management.updateIndex(management.getRelationIndex(label, indexName), SchemaAction.REINDEX).get();\n    management.commit();\n}\n</code></pre>\n<p>Is there a cleaner and more graceful way to do this? I tried searching for similar issue but everywhere the solutions mention the closing of transactions as a mandatory step but if that is the case then this seems like a bug as the official documentation does not mention it explicitly anywhere. Moreover, it essentially means that you have to stop reads and writes on graph while doing reindexing which itself can take sometime to finish. Any help is appreciated.</p>\n<p>[ADDITIONAL NOTE] :\nI am trying to debug this locally using test cases in Java. In my case there are no ghost management instances (checked using mgmt.getOpenInstances()). There is only 1 open management instance which has the (current) suffix. Although, i see 4 open transactions using standardJanusGraph.getOpenTransaction(), and on closing them (as in the code above), i am able to move the index from INSTALLED to REGISTERED. I am unable to figure out whether these transactions are management transactions or normal graph transactions. Ideally I would want to not stop reads and writes on graph while this happens (at least for other labels, properties etc).</p>\n"},{"tags":["java","bouncycastle","pgp","openpgp"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1694096556,"post_id":77059713,"comment_id":135848874,"body_markdown":"*What&#39;s the difference between detached and embedded signatures ?* Not much really. The latter is more convenient as you have only one entity to deal with, but the file format of the file into which you embed has to support embedding. Obviously, something like a text file doesn&#39;t, whereas office file formats usually do","body":"<i>What&#39;s the difference between detached and embedded signatures ?</i> Not much really. The latter is more convenient as you have only one entity to deal with, but the file format of the file into which you embed has to support embedding. Obviously, something like a text file doesn&#39;t, whereas office file formats usually do"}],"answers":[{"tags":[],"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1694174152,"creation_date":1694174152,"answer_id":77066674,"question_id":77059713,"body_markdown":"Not a full answer as I don&#39;t have time to rewrite your code, but:\r\n\r\nUnlike PKCS7/CMS/SMIME where an embedded (also called encapsulated) signature contains the data within the SignedData structure, in PGP a (non-detached) signed message is just a series of packets:\r\n\r\n1. a &quot;One-Pass Signature&quot; packet, which announces the algorithms to be used\r\n\r\n2. the data, normally as a &quot;Literal Data&quot; packet, but optionally can be a &quot;Compressed Data&quot; packet _containing_ the &quot;Literal Data&quot;\r\n\r\n3. a &quot;Signature&quot; packet, containing (to no one&#39;s great surprise) the signature _of_ the data\r\n\r\nSee [rfc4880 11.3](https://www.rfc-editor.org/rfc/rfc4880.html#section-11.3). Technically there is also defined an older format which doesn&#39;t use the &quot;One-Pass&quot; packet and has the Signature packet _before_ the data, but in practice that is obsolete.\r\n\r\nIn contrast a Signature packet by itself, which is what your code generates, is a detached signature, per 11.4 (one page down from the above link).\r\n\r\nTo generate the &#39;embedded&#39; signed-message in BCPG, you must therefore\r\n\r\n1. generate the One-Pass packet\r\n\r\n2. write the data into a Literal packet (or Compressed/Literal packets) AND update the signature with that data; it&#39;s most convenient to do these together, although it would be sufficient to do them separately as long as both are in fact done and consistent\r\n\r\n3. generate the Signature packet \r\n\r\nSee https://stackoverflow.com/questions/57574714/how-to-sign-and-verify-the-file-in-java for a working example (after the correction in my answer) or https://github.com/bcgit/bc-java/blob/main/pg/src/main/java/org/bouncycastle/openpgp/examples/SignedFileProcessor.java .\r\n\r\nWhen you (only) encrypt data in PGP you must first embed it in a Literal packet, or more commonly (and usually the default) Compressed/Literal packets, but when you sign-then-encrypt the signed-message is _already_ a PGP message and is fed _directly_ into Encrypted, or (again) more commonly into Compressed into Encrypted. I don&#39;t have to hand a good reference for that part.\r\n","title":"How do I write embedded pgp signatures in Java using bouncyCastle?","body":"<p>Not a full answer as I don't have time to rewrite your code, but:</p>\n<p>Unlike PKCS7/CMS/SMIME where an embedded (also called encapsulated) signature contains the data within the SignedData structure, in PGP a (non-detached) signed message is just a series of packets:</p>\n<ol>\n<li><p>a &quot;One-Pass Signature&quot; packet, which announces the algorithms to be used</p>\n</li>\n<li><p>the data, normally as a &quot;Literal Data&quot; packet, but optionally can be a &quot;Compressed Data&quot; packet <em>containing</em> the &quot;Literal Data&quot;</p>\n</li>\n<li><p>a &quot;Signature&quot; packet, containing (to no one's great surprise) the signature <em>of</em> the data</p>\n</li>\n</ol>\n<p>See <a href=\"https://www.rfc-editor.org/rfc/rfc4880.html#section-11.3\" rel=\"nofollow noreferrer\">rfc4880 11.3</a>. Technically there is also defined an older format which doesn't use the &quot;One-Pass&quot; packet and has the Signature packet <em>before</em> the data, but in practice that is obsolete.</p>\n<p>In contrast a Signature packet by itself, which is what your code generates, is a detached signature, per 11.4 (one page down from the above link).</p>\n<p>To generate the 'embedded' signed-message in BCPG, you must therefore</p>\n<ol>\n<li><p>generate the One-Pass packet</p>\n</li>\n<li><p>write the data into a Literal packet (or Compressed/Literal packets) AND update the signature with that data; it's most convenient to do these together, although it would be sufficient to do them separately as long as both are in fact done and consistent</p>\n</li>\n<li><p>generate the Signature packet</p>\n</li>\n</ol>\n<p>See <a href=\"https://stackoverflow.com/questions/57574714/how-to-sign-and-verify-the-file-in-java\">How to sign and verify the file in JAVA</a> for a working example (after the correction in my answer) or <a href=\"https://github.com/bcgit/bc-java/blob/main/pg/src/main/java/org/bouncycastle/openpgp/examples/SignedFileProcessor.java\" rel=\"nofollow noreferrer\">https://github.com/bcgit/bc-java/blob/main/pg/src/main/java/org/bouncycastle/openpgp/examples/SignedFileProcessor.java</a> .</p>\n<p>When you (only) encrypt data in PGP you must first embed it in a Literal packet, or more commonly (and usually the default) Compressed/Literal packets, but when you sign-then-encrypt the signed-message is <em>already</em> a PGP message and is fed <em>directly</em> into Encrypted, or (again) more commonly into Compressed into Encrypted. I don't have to hand a good reference for that part.</p>\n"}],"owner":{"account_id":25830230,"reputation":3,"user_id":19567568,"display_name":"Robin Reuteler"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77066674,"answer_count":1,"score":0,"last_activity_date":1694174152,"creation_date":1694090463,"question_id":77059713,"body_markdown":"I am trying to sign an encrypt a message in pgp, with an **embedded** signature. \r\n\r\nI am able to create a detached signature with the code below, using bouncyCastle&#39;s pgp libraries to sign and encrypt :\r\n```\r\npublic static byte[] pgpSign(PGPPrivateKey signingKey, byte[] data) throws PGPException, IOException {\r\n        PGPSignatureGenerator sGen = new PGPSignatureGenerator(\r\n                new BcPGPContentSignerBuilder(signingKey.getPublicKeyPacket().getAlgorithm(), SHA256));\r\n        sGen.init(PGPSignature.BINARY_DOCUMENT, signingKey);\r\n        sGen.update(data);\r\n        PGPSignature signature = sGen.generate();\r\n        ByteArrayOutputStream output = new ByteArrayOutputStream();\r\n        signature.encode(output);\r\n        output.close();\r\n        return output.toByteArray();\r\n}\r\n\r\npublic static byte[] pgpSignAndEncrypt_Detached(PGPPublicKey encryptionKey, PGPPrivateKey signingKey, byte[] data) throws IOException, PGPException, ClassCastException{\r\n        PGPEncryptedDataGenerator encryptionGenerator = new PGPEncryptedDataGenerator(\r\n                new BcPGPDataEncryptorBuilder(SymmetricKeyAlgorithmTags.AES_256)\r\n                        .setSecureRandom(new SecureRandom())\r\n                        .setWithIntegrityPacket(true)\r\n        );\r\n        encryptionGenerator.addMethod(new BcPublicKeyKeyEncryptionMethodGenerator(encryptionKey));\r\n        ByteArrayOutputStream encryptedStream = new ByteArrayOutputStream();\r\n\r\n\r\n        OutputStream literalDataStream = encryptionGenerator.open(encryptedStream, new byte[1048576]);\r\n        OutputStream rawStream = new PGPLiteralDataGenerator().open(literalDataStream, PGPLiteralData.BINARY, &quot;&quot;, new Date(), new byte[1048576]);\r\n        rawStream.write(data);\r\n        rawStream.close();\r\n        literalDataStream.close();\r\n        encryptedStream.write(pgpSign(signingKey, data));\r\n        encryptedStream.close();\r\n        return encryptedStream.toByteArray();\r\n}\r\n```\r\n\r\nI was expecting to get an embedded signature, however, when trying to decrypt with gpg I get the following output :\r\n\r\n&gt; gpg2 --decrypt testEmbedded.pgp\r\n\r\n&gt; gpg: encrypted with 3072-bit RSA key, ID 9505FCA2AEF76A5B, created 2023-06-19\r\n&gt; \r\n&gt; &quot;userId (testKeypair) &lt;mailto:user@email.com&gt;&quot;\r\n&gt; \r\n&gt; Hello World\r\n&gt; \r\n&gt; Detached signature.\r\n&gt;\r\n&gt; Please enter name of data file:\r\n\r\nWhat&#39;s the difference between detached and embedded signatures ? After all this &quot;detached&quot; signature is in the same .pgp file as the encrypted message. \r\nHow do I create an embedded signature, such that I don&#39;t get prompted for the original data file to verify the signature when decrypting with gpg ?","title":"How do I write embedded pgp signatures in Java using bouncyCastle?","body":"<p>I am trying to sign an encrypt a message in pgp, with an <strong>embedded</strong> signature.</p>\n<p>I am able to create a detached signature with the code below, using bouncyCastle's pgp libraries to sign and encrypt :</p>\n<pre><code>public static byte[] pgpSign(PGPPrivateKey signingKey, byte[] data) throws PGPException, IOException {\n        PGPSignatureGenerator sGen = new PGPSignatureGenerator(\n                new BcPGPContentSignerBuilder(signingKey.getPublicKeyPacket().getAlgorithm(), SHA256));\n        sGen.init(PGPSignature.BINARY_DOCUMENT, signingKey);\n        sGen.update(data);\n        PGPSignature signature = sGen.generate();\n        ByteArrayOutputStream output = new ByteArrayOutputStream();\n        signature.encode(output);\n        output.close();\n        return output.toByteArray();\n}\n\npublic static byte[] pgpSignAndEncrypt_Detached(PGPPublicKey encryptionKey, PGPPrivateKey signingKey, byte[] data) throws IOException, PGPException, ClassCastException{\n        PGPEncryptedDataGenerator encryptionGenerator = new PGPEncryptedDataGenerator(\n                new BcPGPDataEncryptorBuilder(SymmetricKeyAlgorithmTags.AES_256)\n                        .setSecureRandom(new SecureRandom())\n                        .setWithIntegrityPacket(true)\n        );\n        encryptionGenerator.addMethod(new BcPublicKeyKeyEncryptionMethodGenerator(encryptionKey));\n        ByteArrayOutputStream encryptedStream = new ByteArrayOutputStream();\n\n\n        OutputStream literalDataStream = encryptionGenerator.open(encryptedStream, new byte[1048576]);\n        OutputStream rawStream = new PGPLiteralDataGenerator().open(literalDataStream, PGPLiteralData.BINARY, &quot;&quot;, new Date(), new byte[1048576]);\n        rawStream.write(data);\n        rawStream.close();\n        literalDataStream.close();\n        encryptedStream.write(pgpSign(signingKey, data));\n        encryptedStream.close();\n        return encryptedStream.toByteArray();\n}\n</code></pre>\n<p>I was expecting to get an embedded signature, however, when trying to decrypt with gpg I get the following output :</p>\n<blockquote>\n<p>gpg2 --decrypt testEmbedded.pgp</p>\n</blockquote>\n<blockquote>\n<p>gpg: encrypted with 3072-bit RSA key, ID 9505FCA2AEF76A5B, created 2023-06-19</p>\n<p>&quot;userId (testKeypair) mailto:user@email.com&quot;</p>\n<p>Hello World</p>\n<p>Detached signature.</p>\n<p>Please enter name of data file:</p>\n</blockquote>\n<p>What's the difference between detached and embedded signatures ? After all this &quot;detached&quot; signature is in the same .pgp file as the encrypted message.\nHow do I create an embedded signature, such that I don't get prompted for the original data file to verify the signature when decrypting with gpg ?</p>\n"},{"tags":["java","html","spring","jsp","model-view-controller"],"answers":[{"comments":[{"owner":{"account_id":28471584,"reputation":1,"user_id":21786826,"display_name":"Shriram"},"score":0,"creation_date":1683287458,"post_id":76181230,"comment_id":134347315,"body_markdown":"addAttribute showing error. I think the method should be ModelAndVIew. Could you just me detailed explaination maybe I haven&#39;t understood properly","body":"addAttribute showing error. I think the method should be ModelAndVIew. Could you just me detailed explaination maybe I haven&#39;t understood properly"},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1683303928,"post_id":76181230,"comment_id":134351519,"body_markdown":"If it doesn&#39;t print anything in the controller then nothing to display in the JSP. The method you use is not important in this case.","body":"If it doesn&#39;t print anything in the controller then nothing to display in the JSP. The method you use is not important in this case."},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1693937272,"post_id":76181230,"comment_id":135824597,"body_markdown":"If this answer helped you then you should mark it as accepted. The checkbox I&#39;d on the left of the answer. Also it&#39;s worth to vote up the answer that helped you the same to help others to choose the correct answer.","body":"If this answer helped you then you should mark it as accepted. The checkbox I&#39;d on the left of the answer. Also it&#39;s worth to vote up the answer that helped you the same to help others to choose the correct answer."}],"tags":[],"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683282477,"creation_date":1683282477,"answer_id":76181230,"question_id":76180817,"body_markdown":"The property for your list is not available in any scope. Trying to print it doesn&#39;t do anything, so nothing is displayed. The model is what Spring MVC expected on the view layer, but you didn&#39;t add this property to the model. Wrong API usage makes it even  worse. You should start learning scopes of the JSP and how EL expressions search for properties. To add properties to the model you should use something like this\r\n\r\n```java\r\nmodel.addAttribute(&quot;listGamer&quot;, listGamer);\r\n```\r\n  ","title":"Table content is not displaying in JSP page","body":"<p>The property for your list is not available in any scope. Trying to print it doesn't do anything, so nothing is displayed. The model is what Spring MVC expected on the view layer, but you didn't add this property to the model. Wrong API usage makes it even  worse. You should start learning scopes of the JSP and how EL expressions search for properties. To add properties to the model you should use something like this</p>\n<pre class=\"lang-java prettyprint-override\"><code>model.addAttribute(&quot;listGamer&quot;, listGamer);\n</code></pre>\n"}],"owner":{"account_id":28471584,"reputation":1,"user_id":21786826,"display_name":"Shriram"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694173789,"creation_date":1683279432,"question_id":76180817,"body_markdown":"My project is Spring MVC. In my JSP file the table heading is displaying but displaying any content inside the table that the lists from controller. I have tested the `List`s is accessing from database or not by using jUnit in my Dao file itself. I think something problem with Controller &amp; JSP file.\r\n\r\n````\r\npackage com.shriram.gaming.controller;\r\n\r\nimport java.util.List;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.servlet.ModelAndView;\r\n\r\nimport com.shriram.gaming.dao.GamerDAO;\r\nimport com.shriram.gaming.model.Gamer;\r\n\r\n@Controller\r\npublic class MainController {\r\n  \r\n  @Autowired\r\n  private GamerDAO gamerDAO;\r\n\r\n  @RequestMapping(value = &quot;/&quot;)\r\n  public ModelAndView listGamer(ModelAndView model) {\r\n    List&lt;Gamer&gt; listGamer = gamerDAO.list();\r\n//    System.out.println(&quot;List of Gamers:&quot;+ listGamer);\r\n    model.addObject(&quot;listGamer&quot;, listGamer);\r\n    model.setViewName(&quot;index&quot;);\r\n    \r\n    return model ;\r\n  }\r\n}\r\n\r\n````\r\n\r\n````\r\n&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=ISO-8859-1&quot;\r\n    pageEncoding=&quot;ISO-8859-1&quot;%&gt;\r\n&lt;%@ taglib uri=&quot;http://java.sun.com/jsp/jstl/core&quot; prefix=&quot;c&quot; %&gt;\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html&gt;\r\n&lt;head&gt;\r\n&lt;meta charset=&quot;ISO-8859-1&quot;&gt;\r\n&lt;title&gt;Game Manager Home&lt;/title&gt;\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n\t&lt;div align=&quot;center&quot;&gt;\r\n\t\t&lt;h1&gt;Gamer List&lt;/h1&gt;\r\n\t\t${listGamer}\r\n\t\t&lt;table border=&quot;1&quot; cellpadding=&quot;5&quot;&gt;\r\n\t\t\t&lt;tr&gt;\r\n\t\t\t\t&lt;th&gt;ID&lt;/th&gt;\r\n\t\t\t\t&lt;th&gt;Name&lt;/th&gt;\r\n\t\t\t\t&lt;th&gt;Email&lt;/th&gt;\r\n\t\t\t\t&lt;th&gt;GamerTag&lt;/th&gt;\r\n\t\t\t\t&lt;th&gt;Phone&lt;/th&gt;\r\n\t\t\t\t&lt;th&gt;Action&lt;/th&gt;\r\n\t\t\t&lt;/tr&gt;\r\n\t\t\t&lt;c:forEach items=&quot;${listGamer}&quot; var=&quot;gamer&quot; varStatus=&quot;status&quot;&gt;\r\n\t\t\t&lt;tr&gt;\r\n\t\t\t\t&lt;td&gt;${status.index + 1}&lt;/td&gt;\r\n\t\t\t\t&lt;td&gt;${gamer.name}&lt;/td&gt;\r\n\t\t\t\t&lt;td&gt;${gamer.email}&lt;/td&gt;\r\n\t\t\t\t&lt;td&gt;${gamer.gamertag}&lt;/td&gt;\r\n\t\t\t\t&lt;td&gt;${gamer.phone}&lt;/td&gt;\r\n\t\t\t&lt;/tr&gt;\r\n\t\t\t&lt;/c:forEach&gt;\r\n\t\t\t\r\n\t\t&lt;/table&gt;\r\n\t\t\r\n\t&lt;/div&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n````\r\n\r\n\r\n\r\nI tried to display the values of the `Lists&lt;Gamer&gt;` if it holds in the controller. But it doesn&#39;t printing anything in the controller. ","title":"Table content is not displaying in JSP page","body":"<p>My project is Spring MVC. In my JSP file the table heading is displaying but displaying any content inside the table that the lists from controller. I have tested the <code>List</code>s is accessing from database or not by using jUnit in my Dao file itself. I think something problem with Controller &amp; JSP file.</p>\n<pre><code>package com.shriram.gaming.controller;\n\nimport java.util.List;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.servlet.ModelAndView;\n\nimport com.shriram.gaming.dao.GamerDAO;\nimport com.shriram.gaming.model.Gamer;\n\n@Controller\npublic class MainController {\n  \n  @Autowired\n  private GamerDAO gamerDAO;\n\n  @RequestMapping(value = &quot;/&quot;)\n  public ModelAndView listGamer(ModelAndView model) {\n    List&lt;Gamer&gt; listGamer = gamerDAO.list();\n//    System.out.println(&quot;List of Gamers:&quot;+ listGamer);\n    model.addObject(&quot;listGamer&quot;, listGamer);\n    model.setViewName(&quot;index&quot;);\n    \n    return model ;\n  }\n}\n\n</code></pre>\n<pre><code>&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=ISO-8859-1&quot;\n    pageEncoding=&quot;ISO-8859-1&quot;%&gt;\n&lt;%@ taglib uri=&quot;http://java.sun.com/jsp/jstl/core&quot; prefix=&quot;c&quot; %&gt;\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;meta charset=&quot;ISO-8859-1&quot;&gt;\n&lt;title&gt;Game Manager Home&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;div align=&quot;center&quot;&gt;\n        &lt;h1&gt;Gamer List&lt;/h1&gt;\n        ${listGamer}\n        &lt;table border=&quot;1&quot; cellpadding=&quot;5&quot;&gt;\n            &lt;tr&gt;\n                &lt;th&gt;ID&lt;/th&gt;\n                &lt;th&gt;Name&lt;/th&gt;\n                &lt;th&gt;Email&lt;/th&gt;\n                &lt;th&gt;GamerTag&lt;/th&gt;\n                &lt;th&gt;Phone&lt;/th&gt;\n                &lt;th&gt;Action&lt;/th&gt;\n            &lt;/tr&gt;\n            &lt;c:forEach items=&quot;${listGamer}&quot; var=&quot;gamer&quot; varStatus=&quot;status&quot;&gt;\n            &lt;tr&gt;\n                &lt;td&gt;${status.index + 1}&lt;/td&gt;\n                &lt;td&gt;${gamer.name}&lt;/td&gt;\n                &lt;td&gt;${gamer.email}&lt;/td&gt;\n                &lt;td&gt;${gamer.gamertag}&lt;/td&gt;\n                &lt;td&gt;${gamer.phone}&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;/c:forEach&gt;\n            \n        &lt;/table&gt;\n        \n    &lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>I tried to display the values of the <code>Lists&lt;Gamer&gt;</code> if it holds in the controller. But it doesn't printing anything in the controller.</p>\n"},{"tags":["java","mongodb"],"comments":[{"owner":{"account_id":8447748,"reputation":38031,"user_id":6337748,"accept_rate":38,"display_name":"notionquest"},"score":2,"creation_date":1536059930,"post_id":52164964,"comment_id":91279578,"body_markdown":"It should be stored as Double BSON type. The equivalent java class is java.lang.Double.","body":"It should be stored as Double BSON type. The equivalent java class is java.lang.Double."}],"answers":[{"tags":[],"owner":{"account_id":8447748,"reputation":38031,"user_id":6337748,"accept_rate":38,"display_name":"notionquest"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1536060929,"creation_date":1536060523,"answer_id":52165291,"question_id":52164964,"body_markdown":"You can store the `Double` BSON type to store the price value. If the price value is 100, it can be stored as `100.00`.\r\n\r\nThe equivalent Java type is `java.lang.Double`.\r\n\r\n[BSON to Java data type mapping][1]\r\n\r\nThe integer value can be converted to double in Java. Some sample code:-\r\n\r\n    new Double(100);\r\n    int i = 100;\r\n    new Double(i);\r\n    Integer i1 = 100;\r\n    new Double(i1);\r\n    double d1 = (double) i;\r\n\r\nThere is a new [Decimal128 BSON data type][2] available since 3.4 version. \r\n\r\nThe Java API can take `BigDecimal` or `long` value to construct the Decimal128 object. Please refer the above API documentation.\r\n\r\nRefer this [blog][3] to understand why Decimal128 is needed?\r\n\r\n[Floating point arithmetic accuracy problems][4]\r\n\r\n\r\n  [1]: http://mongodb.github.io/mongo-java-driver/3.6/bson/documents/\r\n  [2]: http://mongodb.github.io/mongo-java-driver/3.6/javadoc/?org/bson/types/Decimal128.html\r\n  [3]: http://thecodebarbarian.com/a-nodejs-perspective-on-mongodb-34-decimal.html\r\n  [4]: https://en.wikipedia.org/wiki/Floating-point_arithmetic#Accuracy_problems","title":"How to store price in Mongodb","body":"<p>You can store the <code>Double</code> BSON type to store the price value. If the price value is 100, it can be stored as <code>100.00</code>.</p>\n\n<p>The equivalent Java type is <code>java.lang.Double</code>.</p>\n\n<p><a href=\"http://mongodb.github.io/mongo-java-driver/3.6/bson/documents/\" rel=\"nofollow noreferrer\">BSON to Java data type mapping</a></p>\n\n<p>The integer value can be converted to double in Java. Some sample code:-</p>\n\n<pre><code>new Double(100);\nint i = 100;\nnew Double(i);\nInteger i1 = 100;\nnew Double(i1);\ndouble d1 = (double) i;\n</code></pre>\n\n<p>There is a new <a href=\"http://mongodb.github.io/mongo-java-driver/3.6/javadoc/?org/bson/types/Decimal128.html\" rel=\"nofollow noreferrer\">Decimal128 BSON data type</a> available since 3.4 version. </p>\n\n<p>The Java API can take <code>BigDecimal</code> or <code>long</code> value to construct the Decimal128 object. Please refer the above API documentation.</p>\n\n<p>Refer this <a href=\"http://thecodebarbarian.com/a-nodejs-perspective-on-mongodb-34-decimal.html\" rel=\"nofollow noreferrer\">blog</a> to understand why Decimal128 is needed?</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Floating-point_arithmetic#Accuracy_problems\" rel=\"nofollow noreferrer\">Floating point arithmetic accuracy problems</a></p>\n"},{"comments":[{"owner":{"account_id":8049065,"reputation":804,"user_id":6068297,"display_name":"Level_Up"},"score":0,"creation_date":1536060939,"post_id":52165302,"comment_id":91280226,"body_markdown":"I never did this but for example you can read about conversion to and from org.bson.types.Decimal128","body":"I never did this but for example you can read about conversion to and from org.bson.types.Decimal128"}],"tags":[],"owner":{"account_id":8049065,"reputation":804,"user_id":6068297,"display_name":"Level_Up"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1536061220,"creation_date":1536060568,"answer_id":52165302,"question_id":52164964,"body_markdown":"I think you can try to go for BigDecimal.\r\n\r\nYou can read here:\r\nhttps://stackoverflow.com/questions/12496555/java-best-type-to-hold-price\r\n\r\nJava&#39;s native floating point types (float and  double) suffer from the same precision issues as other programming languages. I think you can make BigDecimal  from String, long and double. But as I said you must not go to double. Please can you search a way to preserve without loosing precision inside of the Mongodb and after that convert it to BigDecimal directly. If you can not convert back easy to BigDecimal please use String to store inside Mongodb and after that construct BigDecimal from this String. \r\n\r\nHere I found one post and one article about this:\r\nhttps://stackoverflow.com/questions/37950296/spring-data-mongodb-bigdecimal-support\r\nhttps://www.moschetti.org/rants/mongomoney.html\r\n","title":"How to store price in Mongodb","body":"<p>I think you can try to go for BigDecimal.</p>\n\n<p>You can read here:\n<a href=\"https://stackoverflow.com/questions/12496555/java-best-type-to-hold-price\">Java best type to hold price</a></p>\n\n<p>Java's native floating point types (float and  double) suffer from the same precision issues as other programming languages. I think you can make BigDecimal  from String, long and double. But as I said you must not go to double. Please can you search a way to preserve without loosing precision inside of the Mongodb and after that convert it to BigDecimal directly. If you can not convert back easy to BigDecimal please use String to store inside Mongodb and after that construct BigDecimal from this String. </p>\n\n<p>Here I found one post and one article about this:\n<a href=\"https://stackoverflow.com/questions/37950296/spring-data-mongodb-bigdecimal-support\">Spring Data MongoDB BigDecimal support</a>\n<a href=\"https://www.moschetti.org/rants/mongomoney.html\" rel=\"nofollow noreferrer\">https://www.moschetti.org/rants/mongomoney.html</a></p>\n"},{"tags":[],"owner":{"account_id":3225847,"reputation":707,"user_id":2727257,"display_name":"leopinzon"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1585855572,"creation_date":1585855572,"answer_id":60999533,"question_id":52164964,"body_markdown":"**TL;DR**\r\n\r\n - `STRING` if you want to make the arithmetic operations on the client. \r\n - `BSON` if you want the arithmetic to happen within the db server and receive it in the response. \r\n\r\n**In depth (not that much)**\r\n\r\nIt depends on where do you wish to place your numeric operations. You can always save the pricing as a **`String`** type on MongoDB, always that you don&#39;t need to make **server-side** arithmetic (Non-Numeric Model) AND the precision on the decimals you need. \r\n\r\nIf you wish to make arithmetic operations from the query itself, you should use `Bson`. Leaving you the official mongo related doc below: \r\n\r\n&gt; **Numeric Model**\r\n\r\n&gt; The numeric model may be appropriate if you need to query the database for exact, mathematically valid matches or need to perform server-side arithmetic, e.g., $inc, $mul, and aggregation framework arithmetic.\r\n\r\n&gt; The following approaches follow the numeric model:\r\n\r\n&gt; Using the Decimal BSON Type which is a decimal-based floating-point format capable of providing exact precision. Available in MongoDB version 3.4 and later.\r\nUsing a Scale Factor to convert the monetary value to a 64-bit integer (long BSON type) by multiplying by a power of 10 scale factor.\r\n\r\n\r\n&gt; **Non-Numeric Model**\r\n\r\n&gt; If there is no need to perform server-side arithmetic on monetary data or if server-side approximations are sufficient, modeling monetary data using the non-numeric model may be suitable.\r\n\r\n&gt; The following approach follows the non-numeric model:\r\n\r\n&gt; Using two fields for the monetary value: One field stores the exact monetary value as a non-numeric string and another field stores a binary-based floating-point (double BSON type) approximation of the value.\r\n\r\nEDIT: Source: https://docs.mongodb.com/manual/tutorial/model-monetary-data/\r\n","title":"How to store price in Mongodb","body":"<p><strong>TL;DR</strong></p>\n\n<ul>\n<li><code>STRING</code> if you want to make the arithmetic operations on the client. </li>\n<li><code>BSON</code> if you want the arithmetic to happen within the db server and receive it in the response. </li>\n</ul>\n\n<p><strong>In depth (not that much)</strong></p>\n\n<p>It depends on where do you wish to place your numeric operations. You can always save the pricing as a <strong><code>String</code></strong> type on MongoDB, always that you don't need to make <strong>server-side</strong> arithmetic (Non-Numeric Model) AND the precision on the decimals you need. </p>\n\n<p>If you wish to make arithmetic operations from the query itself, you should use <code>Bson</code>. Leaving you the official mongo related doc below: </p>\n\n<blockquote>\n  <p><strong>Numeric Model</strong></p>\n  \n  <p>The numeric model may be appropriate if you need to query the database for exact, mathematically valid matches or need to perform server-side arithmetic, e.g., $inc, $mul, and aggregation framework arithmetic.</p>\n  \n  <p>The following approaches follow the numeric model:</p>\n  \n  <p>Using the Decimal BSON Type which is a decimal-based floating-point format capable of providing exact precision. Available in MongoDB version 3.4 and later.\n  Using a Scale Factor to convert the monetary value to a 64-bit integer (long BSON type) by multiplying by a power of 10 scale factor.</p>\n  \n  <p><strong>Non-Numeric Model</strong></p>\n  \n  <p>If there is no need to perform server-side arithmetic on monetary data or if server-side approximations are sufficient, modeling monetary data using the non-numeric model may be suitable.</p>\n  \n  <p>The following approach follows the non-numeric model:</p>\n  \n  <p>Using two fields for the monetary value: One field stores the exact monetary value as a non-numeric string and another field stores a binary-based floating-point (double BSON type) approximation of the value.</p>\n</blockquote>\n\n<p>EDIT: Source: <a href=\"https://docs.mongodb.com/manual/tutorial/model-monetary-data/\" rel=\"nofollow noreferrer\">https://docs.mongodb.com/manual/tutorial/model-monetary-data/</a></p>\n"},{"tags":[],"owner":{"account_id":3724990,"reputation":165,"user_id":3099108,"display_name":"Ken Kopelson"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1625385977,"creation_date":1625385977,"answer_id":68242796,"question_id":52164964,"body_markdown":"Monetary values should not be stored using floating point numbers like Double.  Rounding errors can certainly happen, since these formats are not exact in their representation.  The proper type to use for MongoDB is the Decimal128 type, since it stores exact representations of the values, and it has enough precision to support all forms of monetary calculation.","title":"How to store price in Mongodb","body":"<p>Monetary values should not be stored using floating point numbers like Double.  Rounding errors can certainly happen, since these formats are not exact in their representation.  The proper type to use for MongoDB is the Decimal128 type, since it stores exact representations of the values, and it has enough precision to support all forms of monetary calculation.</p>\n"},{"tags":[],"owner":{"account_id":15305578,"reputation":2692,"user_id":11042460,"display_name":"Java wanna bee"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694173202,"creation_date":1694173202,"answer_id":77066579,"question_id":52164964,"body_markdown":"For type `Number`, the MongoDB server will automatically set `Int32` as data type","title":"How to store price in Mongodb","body":"<p>For type <code>Number</code>, the MongoDB server will automatically set <code>Int32</code> as data type</p>\n"}],"owner":{"account_id":10169069,"reputation":89,"user_id":7509944,"accept_rate":25,"display_name":"Rishabh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6311,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":5,"score":1,"last_activity_date":1694173202,"creation_date":1536059397,"question_id":52164964,"body_markdown":"I have a price in String format, price can contain decimal and integer both.\r\nlike \r\n\r\n    String price =&quot;100.00&quot;;\r\n    String price =&quot;100&quot;;\r\n    String price =&quot;100.123&quot;;\r\nI want to store this in mongodb, as number(100) or just 100.23(not string).\r\nHow to handle this in java as parsers are different for Integer and other format.\r\n","title":"How to store price in Mongodb","body":"<p>I have a price in String format, price can contain decimal and integer both.\nlike </p>\n\n<pre><code>String price =\"100.00\";\nString price =\"100\";\nString price =\"100.123\";\n</code></pre>\n\n<p>I want to store this in mongodb, as number(100) or just 100.23(not string).\nHow to handle this in java as parsers are different for Integer and other format.</p>\n"},{"tags":["java","jar","graalvm","graalvm-native-image"],"answers":[{"comments":[{"owner":{"account_id":2306032,"reputation":179,"user_id":2025301,"display_name":"Frank AFRIAT"},"score":5,"creation_date":1609338581,"post_id":63833581,"comment_id":115816443,"body_markdown":"Error: Non-boolean option &#39;TraceClassInitialization&#39; can not use +/- prefix. Use &#39;TraceClassInitialization=&lt;value&gt;&#39; format\nError: Use -H:+ReportExceptionStackTraces to print stacktrace of underlying exception","body":"Error: Non-boolean option &#39;TraceClassInitialization&#39; can not use +/- prefix. Use &#39;TraceClassInitialization=&lt;value&gt;&#39; format Error: Use -H:+ReportExceptionStackTraces to print stacktrace of underlying exception"},{"owner":{"account_id":6619224,"reputation":333,"user_id":5111513,"accept_rate":50,"display_name":"Thamidu de Harshitha"},"score":2,"creation_date":1654678280,"post_id":63833581,"comment_id":128145626,"body_markdown":"Use -H:TraceClassInitialization=true instead","body":"Use -H:TraceClassInitialization=true instead"},{"owner":{"account_id":439568,"reputation":16842,"user_id":828584,"accept_rate":86,"display_name":"mowwwalker"},"score":0,"creation_date":1685728042,"post_id":63833581,"comment_id":134706882,"body_markdown":"The error is saying that the class requested to be initialized at runtime but got initialized at build time. Why is the fix to set the class to initialize at build time? Isn&#39;t that what caused the exception in the first place?","body":"The error is saying that the class requested to be initialized at runtime but got initialized at build time. Why is the fix to set the class to initialize at build time? Isn&#39;t that what caused the exception in the first place?"}],"tags":[],"owner":{"account_id":999177,"reputation":8970,"user_id":1014413,"accept_rate":60,"display_name":"inmyth"},"comment_count":3,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1599753881,"creation_date":1599753881,"answer_id":63833581,"question_id":60654455,"body_markdown":"These steps work for me. I&#39;ve tried using slf4j and logback, log4j2 but the one that finally works is [slf4j-simple][1].\r\nBasically I try to include specific classes that trigger the initialization in `--initialize-at-build-time`. \r\nHere&#39;s what I do. \r\n- Add parameter `-H:+TraceClassInitialization` on the build command, like this:\r\n```\r\nnative-image -jar my-app.jar \r\n-H:IncludeResources=&quot;.*.xml|.*.conf&quot; \r\n-H:+ReportUnsupportedElementsAtRuntime \r\n-H:+TraceClassInitialization \r\n-H:Name=my-app\r\n--verbose\r\n```\r\n- Run it, you will see some error like this:\r\n```\r\nError: Classes that should be initialized at run time got initialized during image building:\r\n org.slf4j.simple.SimpleLogger was unintentionally initialized at build time. io.netty.channel.AbstractChannel caused initialization of this class with the following trace:\r\n        at org.slf4j.simple.SimpleLogger.&lt;clinit&gt;(SimpleLogger.java) // THIS IS THE OFFENDING CLASS\r\n        at org.slf4j.simple.SimpleLoggerFactory.&lt;init&gt;(SimpleLoggerFactory.java:45)\r\n        at org.slf4j.simple.SimpleServiceProvider.initialize(SimpleServiceProvider.java:43)\r\n```\r\n- You see the one line I marked. That is the class to be included.\r\n- Next run the same command with extra parameter `--initialize-at-build-time=org.slf4j.simple.SimpleLogger`\r\n- Run it. You may need to repeat all the above steps as there could be more errors showing up. If so add the classes, separate them with commas.  \r\n\r\nIn my case the final command looks like this\r\n```\r\nnative-image -jar my-app.jar \r\n-H:IncludeResources=&quot;.*.xml|.*.conf&quot; \r\n-H:+ReportUnsupportedElementsAtRuntime \r\n-H:+TraceClassInitialization \r\n--initialize-at-build-time=org.slf4j.simple.SimpleLogger,org.slf4j.LoggerFactory\r\n-H:Name=my-app\r\n--verbose\r\n```\r\n\r\n\r\n  [1]: https://mvnrepository.com/artifact/org.slf4j/slf4j-simple/2.0.0-alpha1","title":"How to fix &quot;Try avoiding to initialize the class that caused initialization&quot; with GraalVM native-image","body":"<p>These steps work for me. I've tried using slf4j and logback, log4j2 but the one that finally works is <a href=\"https://mvnrepository.com/artifact/org.slf4j/slf4j-simple/2.0.0-alpha1\" rel=\"noreferrer\">slf4j-simple</a>.\nBasically I try to include specific classes that trigger the initialization in <code>--initialize-at-build-time</code>.\nHere's what I do.</p>\n<ul>\n<li>Add parameter <code>-H:+TraceClassInitialization</code> on the build command, like this:</li>\n</ul>\n<pre><code>native-image -jar my-app.jar \n-H:IncludeResources=&quot;.*.xml|.*.conf&quot; \n-H:+ReportUnsupportedElementsAtRuntime \n-H:+TraceClassInitialization \n-H:Name=my-app\n--verbose\n</code></pre>\n<ul>\n<li>Run it, you will see some error like this:</li>\n</ul>\n<pre><code>Error: Classes that should be initialized at run time got initialized during image building:\n org.slf4j.simple.SimpleLogger was unintentionally initialized at build time. io.netty.channel.AbstractChannel caused initialization of this class with the following trace:\n        at org.slf4j.simple.SimpleLogger.&lt;clinit&gt;(SimpleLogger.java) // THIS IS THE OFFENDING CLASS\n        at org.slf4j.simple.SimpleLoggerFactory.&lt;init&gt;(SimpleLoggerFactory.java:45)\n        at org.slf4j.simple.SimpleServiceProvider.initialize(SimpleServiceProvider.java:43)\n</code></pre>\n<ul>\n<li>You see the one line I marked. That is the class to be included.</li>\n<li>Next run the same command with extra parameter <code>--initialize-at-build-time=org.slf4j.simple.SimpleLogger</code></li>\n<li>Run it. You may need to repeat all the above steps as there could be more errors showing up. If so add the classes, separate them with commas.</li>\n</ul>\n<p>In my case the final command looks like this</p>\n<pre><code>native-image -jar my-app.jar \n-H:IncludeResources=&quot;.*.xml|.*.conf&quot; \n-H:+ReportUnsupportedElementsAtRuntime \n-H:+TraceClassInitialization \n--initialize-at-build-time=org.slf4j.simple.SimpleLogger,org.slf4j.LoggerFactory\n-H:Name=my-app\n--verbose\n</code></pre>\n"},{"comments":[{"owner":{"account_id":9060448,"reputation":1048,"user_id":6747137,"display_name":"Sammers"},"score":0,"creation_date":1614873527,"post_id":66461706,"comment_id":117524075,"body_markdown":"It is not helpful. I&#39;m asking about approaches to resolving that kind of issues","body":"It is not helpful. I&#39;m asking about approaches to resolving that kind of issues"},{"owner":{"account_id":242832,"reputation":363,"user_id":514623,"display_name":"Alex Zuzin"},"score":0,"creation_date":1614963438,"post_id":66461706,"comment_id":117554671,"body_markdown":"This _is_ the approach. You don&#39;t get to control static class initialization that&#39;s used in older-school Java libraries (logging, JDBC, etc.) You can ask the GraalVM team for more details: https://github.com/oracle/graal/issues.","body":"This <i>is</i> the approach. You don&#39;t get to control static class initialization that&#39;s used in older-school Java libraries (logging, JDBC, etc.) You can ask the GraalVM team for more details: <a href=\"https://github.com/oracle/graal/issues\" rel=\"nofollow noreferrer\">github.com/oracle/graal/issues</a>."},{"owner":{"account_id":1175385,"reputation":22626,"user_id":1151521,"accept_rate":77,"display_name":"Aleksandr Dubinsky"},"score":1,"creation_date":1635758537,"post_id":66461706,"comment_id":123370421,"body_markdown":"This resulted in a lot of `Classes that should be initialized at run time got initialized during image building` related to `com.sun.org.apache.xerces`. Seems that only `slf4j-simple` works for now.","body":"This resulted in a lot of <code>Classes that should be initialized at run time got initialized during image building</code> related to <code>com.sun.org.apache.xerces</code>. Seems that only <code>slf4j-simple</code> works for now."}],"tags":[],"owner":{"account_id":242832,"reputation":363,"user_id":514623,"display_name":"Alex Zuzin"},"comment_count":3,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1614791289,"creation_date":1614791289,"answer_id":66461706,"question_id":60654455,"body_markdown":"Here&#39;s the full list of classes to exclude if you&#39;re using Slf4J and Logback:\r\n\r\n    --initialize-at-build-time=\\\r\n    org.slf4j.impl.StaticLoggerBinder\\\r\n    ,org.slf4j.LoggerFactory\\\r\n    ,ch.qos.logback.classic.Logger\\\r\n    ,ch.qos.logback.core.spi.AppenderAttachableImpl\\\r\n    ,ch.qos.logback.core.status.StatusBase\\\r\n    ,ch.qos.logback.classic.Level\\\r\n    ,ch.qos.logback.core.status.InfoStatus\\\r\n    ,ch.qos.logback.classic.PatternLayout\\\r\n    ,ch.qos.logback.core.CoreConstants","title":"How to fix &quot;Try avoiding to initialize the class that caused initialization&quot; with GraalVM native-image","body":"<p>Here's the full list of classes to exclude if you're using Slf4J and Logback:</p>\n<pre><code>--initialize-at-build-time=\\\norg.slf4j.impl.StaticLoggerBinder\\\n,org.slf4j.LoggerFactory\\\n,ch.qos.logback.classic.Logger\\\n,ch.qos.logback.core.spi.AppenderAttachableImpl\\\n,ch.qos.logback.core.status.StatusBase\\\n,ch.qos.logback.classic.Level\\\n,ch.qos.logback.core.status.InfoStatus\\\n,ch.qos.logback.classic.PatternLayout\\\n,ch.qos.logback.core.CoreConstants\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29394669,"reputation":11,"user_id":22522285,"display_name":"Luigi Graci"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694173101,"creation_date":1694173101,"answer_id":77066567,"question_id":60654455,"body_markdown":"First of all you have to trace what is the class that cause the &quot;build time initialization&quot; of the classes *org.apache.log4j.Level* and *org.slf4j.log4j12.Log4jLoggerAdapter*.\r\nTo do this add the following option to the native-image command:\r\n\r\n    --trace-class-initialization=org.apache.log4j.Level,org.slf4j.log4j12.Log4jLoggerAdapter\r\n\r\nrunning the build again you should see somehing like this:\r\n\r\n   \r\n\r\n     Error: Classes that should be initialized at run time got initialized during image building:\r\n     org.slf4j.simple.SimpleLogger was unintentionally initialized at build time. **io.netty.channel.AbstractChannel** caused initialization of this class with the following trace:\r\n            at org.slf4j.simple.SimpleLogger.&lt;clinit&gt;(SimpleLogger.java) \r\n            at org.slf4j.simple.SimpleLoggerFactory.&lt;init&gt;(SimpleLoggerFactory.java:45)\r\n            at org.slf4j.simple.SimpleServiceProvider.initialize(SimpleServiceProvider.java:43)\r\n    [...]\r\n\r\nThe important info is just: &quot;org.slf4j.simple.SimpleLogger was unintentionally initialized at build time. **io.netty.channel.AbstractChannel** caused initialization of this class&quot;\r\n\r\nSo the solution is to prevent the build-time initialization of the *io.netty.channel.AbstractChannel* class (in the example above, but you have to run the command for your own project to see what is the class that cause the problem). To do this add the following option to the native-image command:\r\n\r\n    --initialize-at-run-time=io.netty.channel.AbstractChannel\r\n\r\nYou may need to repeat these steps more times if more errors will be presented.","title":"How to fix &quot;Try avoiding to initialize the class that caused initialization&quot; with GraalVM native-image","body":"<p>First of all you have to trace what is the class that cause the &quot;build time initialization&quot; of the classes <em>org.apache.log4j.Level</em> and <em>org.slf4j.log4j12.Log4jLoggerAdapter</em>.\nTo do this add the following option to the native-image command:</p>\n<pre><code>--trace-class-initialization=org.apache.log4j.Level,org.slf4j.log4j12.Log4jLoggerAdapter\n</code></pre>\n<p>running the build again you should see somehing like this:</p>\n<pre><code> Error: Classes that should be initialized at run time got initialized during image building:\n org.slf4j.simple.SimpleLogger was unintentionally initialized at build time. **io.netty.channel.AbstractChannel** caused initialization of this class with the following trace:\n        at org.slf4j.simple.SimpleLogger.&lt;clinit&gt;(SimpleLogger.java) \n        at org.slf4j.simple.SimpleLoggerFactory.&lt;init&gt;(SimpleLoggerFactory.java:45)\n        at org.slf4j.simple.SimpleServiceProvider.initialize(SimpleServiceProvider.java:43)\n[...]\n</code></pre>\n<p>The important info is just: &quot;org.slf4j.simple.SimpleLogger was unintentionally initialized at build time. <strong>io.netty.channel.AbstractChannel</strong> caused initialization of this class&quot;</p>\n<p>So the solution is to prevent the build-time initialization of the <em>io.netty.channel.AbstractChannel</em> class (in the example above, but you have to run the command for your own project to see what is the class that cause the problem). To do this add the following option to the native-image command:</p>\n<pre><code>--initialize-at-run-time=io.netty.channel.AbstractChannel\n</code></pre>\n<p>You may need to repeat these steps more times if more errors will be presented.</p>\n"}],"owner":{"account_id":9060448,"reputation":1048,"user_id":6747137,"display_name":"Sammers"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14581,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"answer_count":3,"score":20,"last_activity_date":1694173101,"creation_date":1584017264,"question_id":60654455,"body_markdown":"I&#39;m trying to create a native-image from a fat jar file with \r\n\r\n    $ native-image -H:+TraceClassInitialization --initialize-at-run-time=org.slf4j,org.apache.log4j \\\r\n                   -jar ./my-jar-with-dependencies.jar\r\n\r\nAnd I&#39;m getting those error messages like:\r\n\r\n&gt; Error: Classes that should be initialized at run time got initialized\r\n&gt; during image building:  org.apache.log4j.Level the class was requested\r\n&gt; to be initialized at build time (from the command line).\r\n&gt; org.apache.log4j.Level has been initialized without the native-image\r\n&gt; initialization instrumentation and the stack trace can&#39;t be tracked.\r\n&gt; Try avoiding to initialize the class that caused initialization of\r\n&gt; org.apache.log4j.Level org.slf4j.log4j12.Log4jLoggerAdapter the class\r\n&gt; was requested to be initialized at build time (from the command line).\r\n&gt; org.slf4j.log4j12.Log4jLoggerAdapter has been initialized without the\r\n&gt; native-image initialization instrumentation and the stack trace can&#39;t\r\n&gt; be tracked. Try avoiding to initialize the class that caused\r\n&gt; initialization of org.slf4j.log4j12.Log4jLoggerAdapter\r\n&gt; org.apache.log4j.Logger the class was requested to be initialized at\r\n&gt; build time (from the command line). org.apache.log4j.Logger has been\r\n&gt; initialized without the native-image initialization instrumentation\r\n&gt; and the stack trace can&#39;t be tracked. Try avoiding to initialize the\r\n&gt; class that caused initialization of org.apache.log4j.Logger\r\n\r\nWhat are the ways and approaches to `avoiding to initialize the class` issues? How can I deal with those messages?\r\n\r\nMy graavlVM version is 2.0.0-java11\r\n\r\n","title":"How to fix &quot;Try avoiding to initialize the class that caused initialization&quot; with GraalVM native-image","body":"<p>I'm trying to create a native-image from a fat jar file with </p>\n\n<pre><code>$ native-image -H:+TraceClassInitialization --initialize-at-run-time=org.slf4j,org.apache.log4j \\\n               -jar ./my-jar-with-dependencies.jar\n</code></pre>\n\n<p>And I'm getting those error messages like:</p>\n\n<blockquote>\n  <p>Error: Classes that should be initialized at run time got initialized\n  during image building:  org.apache.log4j.Level the class was requested\n  to be initialized at build time (from the command line).\n  org.apache.log4j.Level has been initialized without the native-image\n  initialization instrumentation and the stack trace can't be tracked.\n  Try avoiding to initialize the class that caused initialization of\n  org.apache.log4j.Level org.slf4j.log4j12.Log4jLoggerAdapter the class\n  was requested to be initialized at build time (from the command line).\n  org.slf4j.log4j12.Log4jLoggerAdapter has been initialized without the\n  native-image initialization instrumentation and the stack trace can't\n  be tracked. Try avoiding to initialize the class that caused\n  initialization of org.slf4j.log4j12.Log4jLoggerAdapter\n  org.apache.log4j.Logger the class was requested to be initialized at\n  build time (from the command line). org.apache.log4j.Logger has been\n  initialized without the native-image initialization instrumentation\n  and the stack trace can't be tracked. Try avoiding to initialize the\n  class that caused initialization of org.apache.log4j.Logger</p>\n</blockquote>\n\n<p>What are the ways and approaches to <code>avoiding to initialize the class</code> issues? How can I deal with those messages?</p>\n\n<p>My graavlVM version is 2.0.0-java11</p>\n"},{"tags":["java","jvm","rmi","jmx","jconsole"],"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1694329572,"post_id":77066566,"comment_id":135875087,"body_markdown":"@Community I disagree completely. The question is perfectly clear. What could anyone possibly not understand about &#39;disable the JMX / RMI interface&#39;?","body":"@Community I disagree completely. The question is perfectly clear. What could anyone possibly not understand about &#39;disable the JMX / RMI interface&#39;?"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1694330198,"post_id":77066566,"comment_id":135875125,"body_markdown":"I don&#39;t know where you got the idea that it is discouraged to use that system property (it isn&#39;t), but setting it to zero will disable RMI completely, not just JMX, which is probably not your intention. According to [this JMX page](https://docs.oracle.com/javase/8/docs/technotes/guides/management/agent.html), remote JMX is not enabled by default: you have to set `com.sun.management.jmxremote.port`. So if you don&#39;t, the only host that can talk JMX to your JVM is the localhost. Or you could use one of the various authentication options to make it impossible for anybody to connect to JMX.","body":"I don&#39;t know where you got the idea that it is discouraged to use that system property (it isn&#39;t), but setting it to zero will disable RMI completely, not just JMX, which is probably not your intention. According to <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/management/agent.html\" rel=\"nofollow noreferrer\">this JMX page</a>, remote JMX is not enabled by default: you have to set <code>com.sun.management.jmxremote.port</code>. So if you don&#39;t, the only host that can talk JMX to your JVM is the localhost. Or you could use one of the various authentication options to make it impossible for anybody to connect to JMX."},{"owner":{"account_id":11007060,"reputation":1,"user_id":8085673,"display_name":"stopal"},"score":0,"creation_date":1695022137,"post_id":77066566,"comment_id":135963225,"body_markdown":"Thank you for the comment. Thats interesting. So it seems that it is always active for local connections. We were considering possible misuse and exploitation of the those informations that are provided via JMX. \n\nI guess that is nothing to worry about?\n\nThank you for the hint about local / remote connections","body":"Thank you for the comment. Thats interesting. So it seems that it is always active for local connections. We were considering possible misuse and exploitation of the those informations that are provided via JMX.   I guess that is nothing to worry about?  Thank you for the hint about local / remote connections"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1695112610,"post_id":77066566,"comment_id":135977185,"body_markdown":"Starting the JMX Agent when the application is already running is done via the Attach API, which can be disabled via `-XX:+DisableAttachMechanism`. This does not prevent JMX if you start it via command line options explicitly (in other words, before the application) and still allows your application to use JMX itself.","body":"Starting the JMX Agent when the application is already running is done via the Attach API, which can be disabled via <code>-XX:+DisableAttachMechanism</code>. This does not prevent JMX if you start it via command line options explicitly (in other words, before the application) and still allows your application to use JMX itself."}],"owner":{"account_id":11007060,"reputation":1,"user_id":8085673,"display_name":"stopal"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":131,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694173063,"creation_date":1694173063,"question_id":77066566,"body_markdown":"Is there a (JVM-vendor agnostic) way to disable the JMX / RMI interface so no one can access it via jConsole or other tools?\r\n\r\nIf not, is there a way to restrict the access (also JVM-vendor agnostic).\r\n\r\nI can limit the tcp connections to zero with `-Dsun.rmi.transport.tcp.maxConnectionThreads=0`. But this is probably not a good idea since it is discouraged to use.","title":"How to completely disable the JMX interface for java applications","body":"<p>Is there a (JVM-vendor agnostic) way to disable the JMX / RMI interface so no one can access it via jConsole or other tools?</p>\n<p>If not, is there a way to restrict the access (also JVM-vendor agnostic).</p>\n<p>I can limit the tcp connections to zero with <code>-Dsun.rmi.transport.tcp.maxConnectionThreads=0</code>. But this is probably not a good idea since it is discouraged to use.</p>\n"},{"tags":["java","garbage-collection"],"comments":[{"owner":{"account_id":5153148,"reputation":7842,"user_id":4127155,"accept_rate":45,"display_name":"David"},"score":0,"creation_date":1542100365,"post_id":53276185,"comment_id":93436941,"body_markdown":"Is it possible that this was happening before and you are now just seeing that it&#39;s happening due to some increased logging that might have been introduced in jre8? Do you know what kind of allocations you routinely make (e.g. are they very large in size)?","body":"Is it possible that this was happening before and you are now just seeing that it&#39;s happening due to some increased logging that might have been introduced in jre8? Do you know what kind of allocations you routinely make (e.g. are they very large in size)?"},{"owner":{"account_id":5153148,"reputation":7842,"user_id":4127155,"accept_rate":45,"display_name":"David"},"score":0,"creation_date":1542100615,"post_id":53276185,"comment_id":93437083,"body_markdown":"I think it is the case that the NewSize you might be setting is controlling the size of the entire new generation (which is composed of eden and survivor spaces) so perhaps your eden is still not sufficiently sized to allocate directly into for new large objects (perhaps large byte[]&#39;s for example)","body":"I think it is the case that the NewSize you might be setting is controlling the size of the entire new generation (which is composed of eden and survivor spaces) so perhaps your eden is still not sufficiently sized to allocate directly into for new large objects (perhaps large byte[]&#39;s for example)"},{"owner":{"account_id":243231,"reputation":169,"user_id":515265,"display_name":"Bhaskar"},"score":0,"creation_date":1542100661,"post_id":53276185,"comment_id":93437104,"body_markdown":"Major GC consumption is in young generation only and not in old. We have 10 GB allocated in totalfor heap and out of which 5GB for young.","body":"Major GC consumption is in young generation only and not in old. We have 10 GB allocated in totalfor heap and out of which 5GB for young."},{"owner":{"account_id":243231,"reputation":169,"user_id":515265,"display_name":"Bhaskar"},"score":0,"creation_date":1542100727,"post_id":53276185,"comment_id":93437150,"body_markdown":"But prior moving to java8, there was no such Allocation Failure in gc logs.","body":"But prior moving to java8, there was no such Allocation Failure in gc logs."},{"owner":{"account_id":5153148,"reputation":7842,"user_id":4127155,"accept_rate":45,"display_name":"David"},"score":0,"creation_date":1542100971,"post_id":53276185,"comment_id":93437299,"body_markdown":"What I am questioning is that even if you set the new to 5Gb, I think (https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/sizing.html) with `SurvivorRatio` default being `8` I think would mean approx 1.25Gb of survivor space, leaving 3.75 Gb eden. Is it possible you allocate objects close to this size?","body":"What I am questioning is that even if you set the new to 5Gb, I think (<a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/sizing.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/&zwnj;&#8203;&hellip;</a>) with <code>SurvivorRatio</code> default being <code>8</code> I think would mean approx 1.25Gb of survivor space, leaving 3.75 Gb eden. Is it possible you allocate objects close to this size?"},{"owner":{"account_id":5153148,"reputation":7842,"user_id":4127155,"accept_rate":45,"display_name":"David"},"score":1,"creation_date":1542101036,"post_id":53276185,"comment_id":93437340,"body_markdown":"With regards to the no such logs, in the answer you link to in your OP the accepted answer makes the comment &quot;Older JVM were not printing GC cause for minor GC cycles.&quot;. So perhaps this was always happening and you just didn&#39;t know until now.","body":"With regards to the no such logs, in the answer you link to in your OP the accepted answer makes the comment &quot;Older JVM were not printing GC cause for minor GC cycles.&quot;. So perhaps this was always happening and you just didn&#39;t know until now."},{"owner":{"account_id":243231,"reputation":169,"user_id":515265,"display_name":"Bhaskar"},"score":0,"creation_date":1542102917,"post_id":53276185,"comment_id":93438523,"body_markdown":"Thanks David, I think these logs will be there as part of new jvm. For allocation of objects I will check. Thanks for your comments.","body":"Thanks David, I think these logs will be there as part of new jvm. For allocation of objects I will check. Thanks for your comments."},{"owner":{"account_id":5153148,"reputation":7842,"user_id":4127155,"accept_rate":45,"display_name":"David"},"score":0,"creation_date":1542103276,"post_id":53276185,"comment_id":93438776,"body_markdown":"No problem I&#39;ll move to answers, would appreciate (if it&#39;s helped) for you to mark as accepted.","body":"No problem I&#39;ll move to answers, would appreciate (if it&#39;s helped) for you to mark as accepted."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":0,"creation_date":1542104384,"post_id":53276185,"comment_id":93439427,"body_markdown":"You want “to overcome” a normal behavior? That doesn’t make any sense.","body":"You want “to overcome” a normal behavior? That doesn’t make any sense."},{"owner":{"account_id":54150,"reputation":2013,"user_id":161995,"accept_rate":100,"display_name":"Erik"},"score":0,"creation_date":1542213372,"post_id":53276185,"comment_id":93490574,"body_markdown":"I have to say the a scavenge every 10 mins shouldn&#39;t be regarded as a lot or a problem in any way, depending on application. I don&#39;t know what your app does but if it allocates any memory at all that is not bad. The scavenges are quite long, if that is problem or not depends on what your app is doing.","body":"I have to say the a scavenge every 10 mins shouldn&#39;t be regarded as a lot or a problem in any way, depending on application. I don&#39;t know what your app does but if it allocates any memory at all that is not bad. The scavenges are quite long, if that is problem or not depends on what your app is doing."}],"answers":[{"tags":[],"owner":{"account_id":5153148,"reputation":7842,"user_id":4127155,"accept_rate":45,"display_name":"David"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1542103384,"creation_date":1542103384,"answer_id":53278434,"question_id":53276185,"body_markdown":"I think it is the case that the `NewSize` you might be setting is controlling the size of the entire new generation (which is composed of eden **and** survivor spaces) so perhaps your eden is still not sufficiently sized to allocate directly into for new large objects (perhaps large byte[]&#39;s for example).\r\n\r\nWhat I am questioning is that even if you set the new to `5Gb`, I think [Oracle&#39;s docs][1] suggest with `SurvivorRatio` default being `8` would mean approx `1.25Gb` of survivor space, leaving `3.75 Gb` eden. Is it possible you allocate objects above or close to this size?\r\n\r\n\r\nWith regards to the no such logs, in the answer you link to in your OP the accepted answer makes the comment \r\n\r\n&gt; &quot;Older JVM were not printing GC cause for minor GC cycles.\r\n\r\nSo perhaps this was always happening and you just didn&#39;t know until now.\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/sizing.html","title":"GC (Allocation Failure) [PSYoungGen]","body":"<p>I think it is the case that the <code>NewSize</code> you might be setting is controlling the size of the entire new generation (which is composed of eden <strong>and</strong> survivor spaces) so perhaps your eden is still not sufficiently sized to allocate directly into for new large objects (perhaps large byte[]'s for example).</p>\n\n<p>What I am questioning is that even if you set the new to <code>5Gb</code>, I think <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/sizing.html\" rel=\"nofollow noreferrer\">Oracle's docs</a> suggest with <code>SurvivorRatio</code> default being <code>8</code> would mean approx <code>1.25Gb</code> of survivor space, leaving <code>3.75 Gb</code> eden. Is it possible you allocate objects above or close to this size?</p>\n\n<p>With regards to the no such logs, in the answer you link to in your OP the accepted answer makes the comment </p>\n\n<blockquote>\n  <p>\"Older JVM were not printing GC cause for minor GC cycles.</p>\n</blockquote>\n\n<p>So perhaps this was always happening and you just didn't know until now.</p>\n"},{"tags":[],"owner":{"account_id":29392326,"reputation":1,"user_id":22520373,"display_name":"Salman khan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694172885,"creation_date":1694146792,"answer_id":77064110,"question_id":53276185,"body_markdown":"Use\r\n```none\r\n-XX:+UseG1GC -XX:+ExplicitGCInvokesConcurrent\r\n```\r\nThis will resolve your issue.\r\n\r\nIf you use the Garbage-First (G1) garbage collector, we recommend adding the `ExplicitGCInvokesConcurrent` property to the list of startup parameters. This reduces the chance of your application becoming temporarily unavailable while garbage collection is in progress.","title":"GC (Allocation Failure) [PSYoungGen]","body":"<p>Use</p>\n<pre class=\"lang-none prettyprint-override\"><code>-XX:+UseG1GC -XX:+ExplicitGCInvokesConcurrent\n</code></pre>\n<p>This will resolve your issue.</p>\n<p>If you use the Garbage-First (G1) garbage collector, we recommend adding the <code>ExplicitGCInvokesConcurrent</code> property to the list of startup parameters. This reduces the chance of your application becoming temporarily unavailable while garbage collection is in progress.</p>\n"}],"owner":{"account_id":243231,"reputation":169,"user_id":515265,"display_name":"Bhaskar"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19205,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":53278434,"answer_count":2,"score":3,"last_activity_date":1694172885,"creation_date":1542095391,"question_id":53276185,"body_markdown":"Recently we switched our code to java8 from java7. We are getting GC allocation failure in every 10 minuts for PSYoungGen. We even tried having switch -XX:NewSize and -XX:NewMaxSize in place to around 5GB(total heap size is 10GB). But even after gc allocation failure is getting printed and PSYoungGen is triggering to the almost the size(5GB). Added some logs :\r\n\r\n    [GC (Allocation Failure) [PSYoungGen: 3145728K-&gt;114922K(3670016K)] 3145728K-&gt;115026K(5767168K), 0.2511084 secs] [Times: user=0.26 sys=0.14, real=0.25 secs]\r\n    [GC (Allocation Failure) [PSYoungGen: 4443141K-&gt;125893K(4718592K)] 4443261K-&gt;126229K(6815744K), 0.2318927 secs] [Times: user=0.42 sys=0.22, real=0.24 secs]\r\n\r\n\r\nIn one of answers: https://stackoverflow.com/questions/28342736/java-gc-allocation-failure?noredirect=1&amp;lq=1 related to this I have seen this is normal behavior, just curious to know is there any way to overcome this ? Thanks.","title":"GC (Allocation Failure) [PSYoungGen]","body":"<p>Recently we switched our code to java8 from java7. We are getting GC allocation failure in every 10 minuts for PSYoungGen. We even tried having switch -XX:NewSize and -XX:NewMaxSize in place to around 5GB(total heap size is 10GB). But even after gc allocation failure is getting printed and PSYoungGen is triggering to the almost the size(5GB). Added some logs :</p>\n\n<pre><code>[GC (Allocation Failure) [PSYoungGen: 3145728K-&gt;114922K(3670016K)] 3145728K-&gt;115026K(5767168K), 0.2511084 secs] [Times: user=0.26 sys=0.14, real=0.25 secs]\n[GC (Allocation Failure) [PSYoungGen: 4443141K-&gt;125893K(4718592K)] 4443261K-&gt;126229K(6815744K), 0.2318927 secs] [Times: user=0.42 sys=0.22, real=0.24 secs]\n</code></pre>\n\n<p>In one of answers: <a href=\"https://stackoverflow.com/questions/28342736/java-gc-allocation-failure?noredirect=1&amp;lq=1\">Java GC (Allocation Failure)</a> related to this I have seen this is normal behavior, just curious to know is there any way to overcome this ? Thanks.</p>\n"},{"tags":["java","postgresql","jpa","spring-data-jpa","jsonb"],"comments":[{"owner":{"account_id":1339752,"reputation":249,"user_id":1281686,"display_name":"newbie"},"score":1,"creation_date":1694153087,"post_id":77064226,"comment_id":135856352,"body_markdown":"Why don&#39;t you just update the column have null values with jsonb_strip_nulls() function? Maybe you can create an SP and after all inserts, you can call this SP to strip null values from data.","body":"Why don&#39;t you just update the column have null values with jsonb_strip_nulls() function? Maybe you can create an SP and after all inserts, you can call this SP to strip null values from data."},{"owner":{"account_id":143734,"reputation":791,"user_id":352290,"accept_rate":100,"display_name":"user352290"},"score":0,"creation_date":1694154995,"post_id":77064226,"comment_id":135856630,"body_markdown":"How to avoid this while storing the data inside database on the above converter","body":"How to avoid this while storing the data inside database on the above converter"},{"owner":{"account_id":1062483,"reputation":20163,"user_id":1104979,"display_name":"Nick Barnes"},"score":2,"creation_date":1694161692,"post_id":77064226,"comment_id":135857802,"body_markdown":"I assume this is a Jackson `ObjectMapper`? It should omit null fields if you set `objectMapper.setSerializationInclusion(Include.NON_NULL)`.","body":"I assume this is a Jackson <code>ObjectMapper</code>? It should omit null fields if you set <code>objectMapper.setSerializationInclusion(Include.NON_NULL)</code>."}],"answers":[{"comments":[{"owner":{"account_id":143734,"reputation":791,"user_id":352290,"accept_rate":100,"display_name":"user352290"},"score":0,"creation_date":1694174518,"post_id":77066522,"comment_id":135860223,"body_markdown":"will give it a try and update","body":"will give it a try and update"}],"tags":[],"owner":{"account_id":28999910,"reputation":1011,"user_id":22213656,"display_name":"Maimoona Abid"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694172729,"creation_date":1694172729,"answer_id":77066522,"question_id":77064226,"body_markdown":"You may change your JsonbConverter to filter out null values from the MapString, Object&gt; before converting it to JSON in order to prevent storing fields with null values in a JSONB data type in PostgreSQL. Here is an updated converter that performs what you want. \r\nin this code the convertToDatabaseColumn method only includes non-null values in the output JSON and filters out null values from the input details map.\r\nThe JSON is changed back into a MapString, Object&gt; using the convertToEntityAttribute function.\r\n\r\nHere is the revised code:\r\n\r\n    import com.fasterxml.jackson.databind.ObjectMapper;\r\n    import com.fasterxml.jackson.databind.SerializationFeature;\r\n    import com.fasterxml.jackson.databind.JsonNode;\r\n    import com.fasterxml.jackson.databind.node.ObjectNode;\r\n    import javax.persistence.AttributeConverter;\r\n    import javax.persistence.Converter;\r\n    import java.io.IOException;\r\n    import java.util.Map;\r\n    \r\n    @Converter\r\n    public class JsonbConverter implements AttributeConverter&lt;Map&lt;String, Object&gt;, String&gt; {\r\n    \r\n        private final ObjectMapper objectMapper = new ObjectMapper();\r\n    \r\n        @Override\r\n        public String convertToDatabaseColumn(Map&lt;String, Object&gt; details) {\r\n            try {\r\n                if (details == null || details.isEmpty()) {\r\n                    return null;\r\n                }\r\n    \r\n                // Create an ObjectNode to hold non-null values\r\n                ObjectNode node = objectMapper.createObjectNode();\r\n                for (Map.Entry&lt;String, Object&gt; entry : details.entrySet()) {\r\n                    if (entry.getValue() != null) {\r\n                        JsonNode valueNode = objectMapper.valueToTree(entry.getValue());\r\n                        node.set(entry.getKey(), valueNode);\r\n                    }\r\n                }\r\n    \r\n                return objectMapper.writeValueAsString(node);\r\n            } catch (IOException jpe) {\r\n                log.error(&quot;unable to convert details to db {}&quot;, details, jpe);\r\n                return null;\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public Map&lt;String, Object&gt; convertToEntityAttribute(String dbData) {\r\n            try {\r\n                if (dbData == null) {\r\n                    return null;\r\n                }\r\n    \r\n                JsonNode node = objectMapper.readTree(dbData);\r\n    \r\n                // Convert the JSON to a Map&lt;String, Object&gt;\r\n                Map&lt;String, Object&gt; value = objectMapper.convertValue(node, Map.class);\r\n    \r\n                return value;\r\n            } catch (IOException ioe) {\r\n                log.error(&quot;unable to convert details to entity {}&quot;, dbData, ioe);\r\n                return null;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nHope it works :)\r\n","title":"How to avoid storing fields with null in JSONB data type","body":"<p>You may change your JsonbConverter to filter out null values from the MapString, Object&gt; before converting it to JSON in order to prevent storing fields with null values in a JSONB data type in PostgreSQL. Here is an updated converter that performs what you want.\nin this code the convertToDatabaseColumn method only includes non-null values in the output JSON and filters out null values from the input details map.\nThe JSON is changed back into a MapString, Object&gt; using the convertToEntityAttribute function.</p>\n<p>Here is the revised code:</p>\n<pre><code>import com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.databind.SerializationFeature;\nimport com.fasterxml.jackson.databind.JsonNode;\nimport com.fasterxml.jackson.databind.node.ObjectNode;\nimport javax.persistence.AttributeConverter;\nimport javax.persistence.Converter;\nimport java.io.IOException;\nimport java.util.Map;\n\n@Converter\npublic class JsonbConverter implements AttributeConverter&lt;Map&lt;String, Object&gt;, String&gt; {\n\n    private final ObjectMapper objectMapper = new ObjectMapper();\n\n    @Override\n    public String convertToDatabaseColumn(Map&lt;String, Object&gt; details) {\n        try {\n            if (details == null || details.isEmpty()) {\n                return null;\n            }\n\n            // Create an ObjectNode to hold non-null values\n            ObjectNode node = objectMapper.createObjectNode();\n            for (Map.Entry&lt;String, Object&gt; entry : details.entrySet()) {\n                if (entry.getValue() != null) {\n                    JsonNode valueNode = objectMapper.valueToTree(entry.getValue());\n                    node.set(entry.getKey(), valueNode);\n                }\n            }\n\n            return objectMapper.writeValueAsString(node);\n        } catch (IOException jpe) {\n            log.error(&quot;unable to convert details to db {}&quot;, details, jpe);\n            return null;\n        }\n    }\n\n    @Override\n    public Map&lt;String, Object&gt; convertToEntityAttribute(String dbData) {\n        try {\n            if (dbData == null) {\n                return null;\n            }\n\n            JsonNode node = objectMapper.readTree(dbData);\n\n            // Convert the JSON to a Map&lt;String, Object&gt;\n            Map&lt;String, Object&gt; value = objectMapper.convertValue(node, Map.class);\n\n            return value;\n        } catch (IOException ioe) {\n            log.error(&quot;unable to convert details to entity {}&quot;, dbData, ioe);\n            return null;\n        }\n    }\n}\n</code></pre>\n<p>Hope it works :)</p>\n"}],"owner":{"account_id":143734,"reputation":791,"user_id":352290,"accept_rate":100,"display_name":"user352290"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":2,"up_vote_count":3,"answer_count":1,"score":1,"last_activity_date":1694172729,"creation_date":1694148928,"question_id":77064226,"body_markdown":"How to avoid storing fields with null value while storing into postgres JSONB data type\r\n\r\nThis is the existing code for conversion, how to make it extensible but retain the structure as well\r\n\r\n    public class JsonbConverter implements AttributeConverter&lt;Map&lt;String, Object&gt;, String&gt; {\r\n    \r\n        private final ObjectMapper objectMapper = new ObjectMapper();\r\n    \r\n        @Override\r\n        public String convertToDatabaseColumn(Map&lt;String, Object&gt; details) {\r\n            String value = null;\r\n    \r\n            try {\r\n                if (details == null || details.isEmpty()) {\r\n                    return value;\r\n                }\r\n    \r\n                value = objectMapper.writeValueAsString(details);\r\n            }\r\n            catch (JsonProcessingException jpe) {\r\n                log.error(&quot;unable to convert details to db {}&quot;, details, jpe);\r\n            }\r\n    \r\n            return value;\r\n        }\r\n    \r\n        @Override\r\n        public Map&lt;String, Object&gt; convertToEntityAttribute(String dbData) {\r\n            Map&lt;String, Object&gt; value = null;\r\n    \r\n            try {\r\n                if (dbData == null) {\r\n                    return value;\r\n                }\r\n    \r\n                value = objectMapper.readValue(dbData, new TypeReference&lt;Map&lt;String, Object&gt;&gt;() {\r\n                });\r\n            }\r\n            catch (IOException ioe) {\r\n                log.error(&quot;unable to convert details to entity {}&quot;, dbData, ioe);\r\n            }\r\n    \r\n            return value;\r\n        }\r\n    \r\n    }\r\n\r\nThe stored value is:\r\n\r\n    {&quot;categories&quot;: [{&quot;name&quot;: &quot;News&quot;, &quot;label&quot;: null, &quot;taxonomyUri&quot;: null}, {&quot;name&quot;: &quot;UK News&quot;, &quot;label&quot;: null, &quot;taxonomyUri&quot;: null}, {&quot;name&quot;: &quot;Crime&quot;, &quot;label&quot;: null, &quot;taxonomyUri&quot;: null}, {&quot;name&quot;: &quot;Dogs&quot;, &quot;label&quot;: null, &quot;taxonomyUri&quot;: null}, {&quot;name&quot;: &quot;Parenting advice&quot;, &quot;label&quot;: null, &quot;taxonomyUri&quot;: null}, {&quot;name&quot;: &quot;Pets&quot;, &quot;label&quot;: null, &quot;taxonomyUri&quot;: null}, {&quot;name&quot;: &quot;Police&quot;, &quot;label&quot;: null, &quot;taxonomyUri&quot;: null}]}\r\n","title":"How to avoid storing fields with null in JSONB data type","body":"<p>How to avoid storing fields with null value while storing into postgres JSONB data type</p>\n<p>This is the existing code for conversion, how to make it extensible but retain the structure as well</p>\n<pre><code>public class JsonbConverter implements AttributeConverter&lt;Map&lt;String, Object&gt;, String&gt; {\n\n    private final ObjectMapper objectMapper = new ObjectMapper();\n\n    @Override\n    public String convertToDatabaseColumn(Map&lt;String, Object&gt; details) {\n        String value = null;\n\n        try {\n            if (details == null || details.isEmpty()) {\n                return value;\n            }\n\n            value = objectMapper.writeValueAsString(details);\n        }\n        catch (JsonProcessingException jpe) {\n            log.error(&quot;unable to convert details to db {}&quot;, details, jpe);\n        }\n\n        return value;\n    }\n\n    @Override\n    public Map&lt;String, Object&gt; convertToEntityAttribute(String dbData) {\n        Map&lt;String, Object&gt; value = null;\n\n        try {\n            if (dbData == null) {\n                return value;\n            }\n\n            value = objectMapper.readValue(dbData, new TypeReference&lt;Map&lt;String, Object&gt;&gt;() {\n            });\n        }\n        catch (IOException ioe) {\n            log.error(&quot;unable to convert details to entity {}&quot;, dbData, ioe);\n        }\n\n        return value;\n    }\n\n}\n</code></pre>\n<p>The stored value is:</p>\n<pre><code>{&quot;categories&quot;: [{&quot;name&quot;: &quot;News&quot;, &quot;label&quot;: null, &quot;taxonomyUri&quot;: null}, {&quot;name&quot;: &quot;UK News&quot;, &quot;label&quot;: null, &quot;taxonomyUri&quot;: null}, {&quot;name&quot;: &quot;Crime&quot;, &quot;label&quot;: null, &quot;taxonomyUri&quot;: null}, {&quot;name&quot;: &quot;Dogs&quot;, &quot;label&quot;: null, &quot;taxonomyUri&quot;: null}, {&quot;name&quot;: &quot;Parenting advice&quot;, &quot;label&quot;: null, &quot;taxonomyUri&quot;: null}, {&quot;name&quot;: &quot;Pets&quot;, &quot;label&quot;: null, &quot;taxonomyUri&quot;: null}, {&quot;name&quot;: &quot;Police&quot;, &quot;label&quot;: null, &quot;taxonomyUri&quot;: null}]}\n</code></pre>\n"},{"tags":["java","jvm","garbage-collection"],"answers":[{"tags":[],"owner":{"account_id":10465568,"reputation":840,"user_id":7715095,"display_name":"xyz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694074469,"creation_date":1694073267,"answer_id":77057638,"question_id":77021695,"body_markdown":"Probably you need to add this flag as well:\r\n\r\n    -XX:+UseContainerSupport\r\n\r\nFrom docs you will see that this will work only with Linux x64 platforms:\r\n\r\n&gt; -XX:-UseContainerSupport\r\nThe VM now provides automatic container detection support, which allows the VM to determine the amount of memory and number of processors that are available to a Java process running in docker containers. It uses this information to allocate system resources. This support is only available on Linux x64 platforms. If supported, the default for this flag is true, and container support is enabled by default. It can be disabled with -XX:-UseContainerSupport.\r\n \r\n\r\nThis flag can help also:\r\n\r\n    -XX:+AlwaysPreTouch\r\n\r\n&gt; -XX:+AlwaysPreTouch\r\nRequests the VM to touch every page on the Java heap after requesting it from the operating system and before handing memory out to the application. By default, this option is disabled and all pages are committed as the application uses the heap space.","title":"InitialRAMPercentage doesn&#39;t set initial heap size","body":"<p>Probably you need to add this flag as well:</p>\n<pre><code>-XX:+UseContainerSupport\n</code></pre>\n<p>From docs you will see that this will work only with Linux x64 platforms:</p>\n<blockquote>\n<p>-XX:-UseContainerSupport\nThe VM now provides automatic container detection support, which allows the VM to determine the amount of memory and number of processors that are available to a Java process running in docker containers. It uses this information to allocate system resources. This support is only available on Linux x64 platforms. If supported, the default for this flag is true, and container support is enabled by default. It can be disabled with -XX:-UseContainerSupport.</p>\n</blockquote>\n<p>This flag can help also:</p>\n<pre><code>-XX:+AlwaysPreTouch\n</code></pre>\n<blockquote>\n<p>-XX:+AlwaysPreTouch\nRequests the VM to touch every page on the Java heap after requesting it from the operating system and before handing memory out to the application. By default, this option is disabled and all pages are committed as the application uses the heap space.</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":224290,"reputation":620,"user_id":484009,"display_name":"Popandopolos"},"score":0,"creation_date":1694164861,"post_id":77063467,"comment_id":135858417,"body_markdown":"Thanks for your answer, `MaxHeapFreeRatio=100` works pretty well in my case.\n`Xms` shortcut&#39;s explanation is also very useful.","body":"Thanks for your answer, <code>MaxHeapFreeRatio=100</code> works pretty well in my case. <code>Xms</code> shortcut&#39;s explanation is also very useful."}],"tags":[],"owner":{"account_id":4210603,"reputation":94386,"user_id":3448419,"display_name":"apangin"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1694132524,"creation_date":1694131970,"answer_id":77063467,"question_id":77021695,"body_markdown":"A common misconception is that the initial heap size is the minimum heap size. They are actually different and can be configured separately: `-XX:InitialHeapSize` vs. `-XX:MinHeapSize`.\r\n\r\nIn JDK 17, `-Xms` is a shortcut to set both `InitialHeapSize` and `MinHeapSize` to the same value. In contrast, `-XX:InitialRAMPercentage` affects `InitialHeapSize` only, and therefore heap may shrink below the initial size.\r\n\r\nIf you want to prevent heap from resizing at runtime, disable heap shrinking with `-XX:MaxHeapFreeRatio=100`, or disable adaptive size policy altogether: `-XX:-UseAdaptiveSizePolicy`.\r\n\r\nNote: `-XX:MinRAMPercentage` does not help. Its name is confusing: the argument configures `MaxHeapSize`, not `MinHeapSize` - see [JDK-8278492](https://bugs.openjdk.org/browse/JDK-8278492)","title":"InitialRAMPercentage doesn&#39;t set initial heap size","body":"<p>A common misconception is that the initial heap size is the minimum heap size. They are actually different and can be configured separately: <code>-XX:InitialHeapSize</code> vs. <code>-XX:MinHeapSize</code>.</p>\n<p>In JDK 17, <code>-Xms</code> is a shortcut to set both <code>InitialHeapSize</code> and <code>MinHeapSize</code> to the same value. In contrast, <code>-XX:InitialRAMPercentage</code> affects <code>InitialHeapSize</code> only, and therefore heap may shrink below the initial size.</p>\n<p>If you want to prevent heap from resizing at runtime, disable heap shrinking with <code>-XX:MaxHeapFreeRatio=100</code>, or disable adaptive size policy altogether: <code>-XX:-UseAdaptiveSizePolicy</code>.</p>\n<p>Note: <code>-XX:MinRAMPercentage</code> does not help. Its name is confusing: the argument configures <code>MaxHeapSize</code>, not <code>MinHeapSize</code> - see <a href=\"https://bugs.openjdk.org/browse/JDK-8278492\" rel=\"noreferrer\">JDK-8278492</a></p>\n"},{"comments":[{"owner":{"account_id":224290,"reputation":620,"user_id":484009,"display_name":"Popandopolos"},"score":0,"creation_date":1694183462,"post_id":77066519,"comment_id":135862117,"body_markdown":"I can suggest to check @apangin answer.  `-XX:MaxHeapFreeRatio=100` works for me","body":"I can suggest to check @apangin answer.  <code>-XX:MaxHeapFreeRatio=100</code> works for me"},{"owner":{"account_id":22153048,"reputation":1,"user_id":22522004,"display_name":"Cyrille MAUCCI"},"score":0,"creation_date":1694377101,"post_id":77066519,"comment_id":135879681,"body_markdown":"Works for us too!","body":"Works for us too!"}],"tags":[],"owner":{"account_id":22153048,"reputation":1,"user_id":22522004,"display_name":"Cyrille MAUCCI"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1694172699,"creation_date":1694172699,"answer_id":77066519,"question_id":77021695,"body_markdown":"we are seeing the same issue as Popandopolos here.\r\nMore precisely we are seeing a behavior change between Java11 and Java17.\r\n\r\nIndeed, we&#39;ve recently migrated our containers apps from Java11 to Java17 (our runtime container env is RedHat OpenShift 4.12).\r\n\r\nWe&#39;ve always been using the following options:\r\n&quot;-XX:InitialRAMPercentage=60 -XX:MaxRAMPercentage=60 -XX:+AlwaysPreTouch&quot;\r\nin order to guarantee the Heap would never be resized and therefore would never impact the runtime performance of our latency critical application.\r\n\r\nWith those settings, using Java11, we have always witnessed committed heap being set to 60% of the container memory limit for the whole lifetime of the container.\r\n\r\nAfter moving to Java17, it is like if InitialRAMPercentage was no more honored.\r\nCommitted heap starts very low and moves during the lifetime of the container.\r\nIf we -Xms/-Xmx instead of -XX:InitialRAMPercentage/-XX:MaxRAMPercentage, Java17 behaves exactly as Java11 would with -XX:InitialRAMPercentage/-XX:MaxRAMPercentage.\r\n\r\nSo, the behavior definitely changed between Java11 and Java17...\r\nand currently getting back to -Xms/-Xmx seems the only way to unblock our testing.\r\n\r\nHTH\r\n++Cyrille","title":"InitialRAMPercentage doesn&#39;t set initial heap size","body":"<p>we are seeing the same issue as Popandopolos here.\nMore precisely we are seeing a behavior change between Java11 and Java17.</p>\n<p>Indeed, we've recently migrated our containers apps from Java11 to Java17 (our runtime container env is RedHat OpenShift 4.12).</p>\n<p>We've always been using the following options:\n&quot;-XX:InitialRAMPercentage=60 -XX:MaxRAMPercentage=60 -XX:+AlwaysPreTouch&quot;\nin order to guarantee the Heap would never be resized and therefore would never impact the runtime performance of our latency critical application.</p>\n<p>With those settings, using Java11, we have always witnessed committed heap being set to 60% of the container memory limit for the whole lifetime of the container.</p>\n<p>After moving to Java17, it is like if InitialRAMPercentage was no more honored.\nCommitted heap starts very low and moves during the lifetime of the container.\nIf we -Xms/-Xmx instead of -XX:InitialRAMPercentage/-XX:MaxRAMPercentage, Java17 behaves exactly as Java11 would with -XX:InitialRAMPercentage/-XX:MaxRAMPercentage.</p>\n<p>So, the behavior definitely changed between Java11 and Java17...\nand currently getting back to -Xms/-Xmx seems the only way to unblock our testing.</p>\n<p>HTH\n++Cyrille</p>\n"}],"owner":{"account_id":224290,"reputation":620,"user_id":484009,"display_name":"Popandopolos"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":365,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":77063467,"answer_count":3,"score":4,"last_activity_date":1694172699,"creation_date":1693557900,"question_id":77021695,"body_markdown":"We are running our Java application with OpenJDK 17.0.7 in a Docker container with these arguments (these are only relevant to my question):&lt;br&gt;\r\n`-XX:InitialRAMPercentage=75.0 -XX:MaxRAMPercentage=75.0 -XX:MaxMetaspaceSize=1G -XX:+UseG1GC`\r\n\r\nHere is a picture from JDK Mission Control showing how the application starts:\r\n\r\n[![Run an application with InitialRAMPercentage][1]][1]\r\n\r\n\r\nYou can see that Committed size was not the same all the time. It started at 3GiB and then it grew up to ~6GiB.\r\n\r\nThen I changed VM Arguments to use Xms/Xmx instead of RAMPercentage:&lt;br&gt;\r\n`-Xms6G -Xmx6G -XX:MaxMetaspaceSize=1G -XX:+UseG1GC`\r\n\r\nAnd now I see the picture I expected to see - Committed size is equals to 6GiB from the startup:\r\n[![Run an application with Xms/XMx][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/i0TBX.png\r\n  [2]: https://i.stack.imgur.com/iLiNx.png\r\n\r\nIs it an expected behavior of InitialRAMPercentage? Shouldn&#39;t it work the same way as Xms? Am I missing something?","title":"InitialRAMPercentage doesn&#39;t set initial heap size","body":"<p>We are running our Java application with OpenJDK 17.0.7 in a Docker container with these arguments (these are only relevant to my question):<br>\n<code>-XX:InitialRAMPercentage=75.0 -XX:MaxRAMPercentage=75.0 -XX:MaxMetaspaceSize=1G -XX:+UseG1GC</code></p>\n<p>Here is a picture from JDK Mission Control showing how the application starts:</p>\n<p><a href=\"https://i.stack.imgur.com/i0TBX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/i0TBX.png\" alt=\"Run an application with InitialRAMPercentage\" /></a></p>\n<p>You can see that Committed size was not the same all the time. It started at 3GiB and then it grew up to ~6GiB.</p>\n<p>Then I changed VM Arguments to use Xms/Xmx instead of RAMPercentage:<br>\n<code>-Xms6G -Xmx6G -XX:MaxMetaspaceSize=1G -XX:+UseG1GC</code></p>\n<p>And now I see the picture I expected to see - Committed size is equals to 6GiB from the startup:\n<a href=\"https://i.stack.imgur.com/iLiNx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iLiNx.png\" alt=\"Run an application with Xms/XMx\" /></a></p>\n<p>Is it an expected behavior of InitialRAMPercentage? Shouldn't it work the same way as Xms? Am I missing something?</p>\n"},{"tags":["java","spring","spring-boot","hibernate"],"owner":{"account_id":20374233,"reputation":33,"user_id":14945795,"display_name":"Peter"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694172622,"creation_date":1694172100,"question_id":77066457,"body_markdown":"In my application, I have an HQL query that uses the `IN` operator - this query is called very often, with different number of parameters which means that Hibernate&#39;s `QueryPlanCache` caches every single variation of it separately - with 1,2,3...10...1200 elements, etc.\r\n\r\nMy questions are:\r\n \r\n\r\n - Is there a way to exclude only the HQL query that contains the `IN`\r\n   operator from being cached in the query plan cache - perhaps an annotation?\r\n - Is there a way to programatically reset this cache? I saw that the `QueryPlanCache` class has a `clear()` method which is `public` but I couldn&#39;t figure out how you would go about calling it in a Spring Boot application.\r\n- Is there some kind of filtering mechanism or class that I could implement and use? An interceptor that fires before the methods for the `QueryPlanCache` so I can filter out the problematic query in it? \r\n\r\nThank you in advance!\r\n\r\n","title":"Spring Boot 2 + Hibernate 5 - how can I reset QueryPlanCache?","body":"<p>In my application, I have an HQL query that uses the <code>IN</code> operator - this query is called very often, with different number of parameters which means that Hibernate's <code>QueryPlanCache</code> caches every single variation of it separately - with 1,2,3...10...1200 elements, etc.</p>\n<p>My questions are:</p>\n<ul>\n<li>Is there a way to exclude only the HQL query that contains the <code>IN</code>\noperator from being cached in the query plan cache - perhaps an annotation?</li>\n<li>Is there a way to programatically reset this cache? I saw that the <code>QueryPlanCache</code> class has a <code>clear()</code> method which is <code>public</code> but I couldn't figure out how you would go about calling it in a Spring Boot application.</li>\n<li>Is there some kind of filtering mechanism or class that I could implement and use? An interceptor that fires before the methods for the <code>QueryPlanCache</code> so I can filter out the problematic query in it?</li>\n</ul>\n<p>Thank you in advance!</p>\n"},{"tags":["java","maven","pom.xml","sts"],"comments":[{"owner":{"account_id":1328773,"reputation":37883,"user_id":1273080,"accept_rate":100,"display_name":"Petr Janeček"},"score":0,"creation_date":1642167591,"post_id":70711392,"comment_id":125005327,"body_markdown":"Looks like https://stackoverflow.com/questions/60911620/spring-boot-maven-project-import-error-in-sts. Martin Lippert, the developer of STS, says _&quot;Please file an issue at github.com/spring-projects/sts4/issues and attach the screenshot. Please also take a look at the Error Log View and add the details from there to the report, since the exact stack trace of the error would be quite useful.&quot;_","body":"Looks like <a href=\"https://stackoverflow.com/questions/60911620/spring-boot-maven-project-import-error-in-sts\" title=\"spring boot maven project import error in sts\">stackoverflow.com/questions/60911620/&hellip;</a>. Martin Lippert, the developer of STS, says <i>&quot;Please file an issue at github.com/spring-projects/sts4/issues and attach the screenshot. Please also take a look at the Error Log View and add the details from there to the report, since the exact stack trace of the error would be quite useful.&quot;</i>"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1642968899,"post_id":70711392,"comment_id":125209422,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."},{"owner":{"account_id":17296120,"reputation":1,"user_id":12526754,"display_name":"rahul jawale"},"score":0,"creation_date":1643726996,"post_id":70711392,"comment_id":125412868,"body_markdown":"i switched to STS version 4.7.0 and the maven issue got resolved. Not sure what&#39;s wrong with version 4.8.0","body":"i switched to STS version 4.7.0 and the maven issue got resolved. Not sure what&#39;s wrong with version 4.8.0"}],"answers":[{"tags":[],"owner":{"account_id":29393073,"reputation":1,"user_id":22520984,"display_name":"Nani"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694172613,"creation_date":1694154910,"answer_id":77064647,"question_id":70711392,"body_markdown":"I resolved this issue by this way:-\r\n\r\n1. close your IDE.\r\n2. start your IDE through by Run as Administrator.\r\n3. update your project-&gt;maven update","title":"An internal error occurred during &quot;updating maven project&quot; in STS(4.8.0)","body":"<p>I resolved this issue by this way:-</p>\n<ol>\n<li>close your IDE.</li>\n<li>start your IDE through by Run as Administrator.</li>\n<li>update your project-&gt;maven update</li>\n</ol>\n"}],"owner":{"account_id":17296120,"reputation":1,"user_id":12526754,"display_name":"rahul jawale"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":853,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694172613,"creation_date":1642167351,"question_id":70711392,"body_markdown":"I have cloned a repo from bitbucket to my local machine and when it tries to build i am getting the above error. Rather i am getting errors on every maven related stuff (build , update ,clean) and I am not sure what&#39;s wrong . I am not even able to open pom.xml file in STS. \r\nDetailed error -&gt;\r\nAn internal error occurred during &quot;updating maven project&quot; \r\norg/springframework/tooling/boot/ls/xml/xmlrootelementcontentdescriber2$qualifiedelement ","title":"An internal error occurred during &quot;updating maven project&quot; in STS(4.8.0)","body":"<p>I have cloned a repo from bitbucket to my local machine and when it tries to build i am getting the above error. Rather i am getting errors on every maven related stuff (build , update ,clean) and I am not sure what's wrong . I am not even able to open pom.xml file in STS.\nDetailed error -&gt;\nAn internal error occurred during &quot;updating maven project&quot;\norg/springframework/tooling/boot/ls/xml/xmlrootelementcontentdescriber2$qualifiedelement</p>\n"},{"tags":["java","mysql","testing","jdbc","containers"],"comments":[{"owner":{"account_id":18999437,"reputation":2461,"user_id":13867124,"display_name":"AztecCodes"},"score":0,"creation_date":1694209611,"post_id":77066498,"comment_id":135866289,"body_markdown":"Welcome to StackOverflow! Thank you for your question. However it seems like you are not familiar with the guide of Stackoverflow to [How To: Ask a good question](https://stackoverflow.com/help/how-to-ask). Please read it and adjust your question accordingly by using the Edit option.","body":"Welcome to StackOverflow! Thank you for your question. However it seems like you are not familiar with the guide of Stackoverflow to <a href=\"https://stackoverflow.com/help/how-to-ask\">How To: Ask a good question</a>. Please read it and adjust your question accordingly by using the Edit option."}],"owner":{"account_id":29394840,"reputation":1,"user_id":22522424,"display_name":"HomeLighter"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694172554,"creation_date":1694172554,"question_id":77066498,"body_markdown":"I am currently testing my application using the JDBC test containers. I am having issues with timezones and setting certain query parameters with my test containers that I can with my normal mysql container.\r\n\r\nHere is an example of my spring.datasource.url that I am using for my test container - jdbc:tc:mysql:5.7://database/myDb?useLegacyDatetimeCode=false&amp;serverTimezone=Australia/Melbourne \r\n\r\nHowevervdebugging through the code, it semes like the query parameters does get parsed but it doesn&#39;t get used at all by the test container. Is there anyway I can set these variables with my test containers?\r\n\r\nI tried passing in a container parameter in the form of a my_sql.conf file which sets trys to set the useLegacyDatetimeCode but that didn&#39;t work as I believe it doesn&#39;t recognize the value","title":"Is there a way to pass in query parameters to mysql test containers","body":"<p>I am currently testing my application using the JDBC test containers. I am having issues with timezones and setting certain query parameters with my test containers that I can with my normal mysql container.</p>\n<p>Here is an example of my spring.datasource.url that I am using for my test container - jdbc:tc:mysql:5.7://database/myDb?useLegacyDatetimeCode=false&amp;serverTimezone=Australia/Melbourne</p>\n<p>Howevervdebugging through the code, it semes like the query parameters does get parsed but it doesn't get used at all by the test container. Is there anyway I can set these variables with my test containers?</p>\n<p>I tried passing in a container parameter in the form of a my_sql.conf file which sets trys to set the useLegacyDatetimeCode but that didn't work as I believe it doesn't recognize the value</p>\n"},{"tags":["java","spring-webflux","project-reactor"],"comments":[{"owner":{"account_id":1515381,"reputation":958,"user_id":1416490,"accept_rate":72,"display_name":"zt9788"},"score":0,"creation_date":1694164539,"post_id":77065330,"comment_id":135858341,"body_markdown":"Flux result =  remoteClient.getInfo(a.getSomeProperty()).block().getBoolean(); changeto Mono.fromFuture(..remoteClient.getInfo(a.getSomeProperty()) in a thread....).flatMapMany(Flux::just)","body":"Flux result =  remoteClient.getInfo(a.getSomeProperty()).block().getBoolean&zwnj;&#8203;(); changeto Mono.fromFuture(..remoteClient.getInfo(a.getSomeProperty()) in a thread....).flatMapMany(Flux::just)"},{"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"score":0,"creation_date":1694171770,"post_id":77065330,"comment_id":135859704,"body_markdown":"@zt9788 That requires extra threads while `remoteClient.getInfo` is already reactive as I see","body":"@zt9788 That requires extra threads while <code>remoteClient.getInfo</code> is already reactive as I see"},{"owner":{"account_id":1515381,"reputation":958,"user_id":1416490,"accept_rate":72,"display_name":"zt9788"},"score":0,"creation_date":1694189080,"post_id":77065330,"comment_id":135863199,"body_markdown":"Sorry What I said is wrong, please see others&#39; answers","body":"Sorry What I said is wrong, please see others&#39; answers"}],"answers":[{"tags":[],"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1694172097,"creation_date":1694172097,"answer_id":77066454,"question_id":77065330,"body_markdown":"You have `filterWhen` for that purpose:\r\n\r\n        repository.findByString(String string) // Flux&lt;SomeObject&gt;\r\n                .filterWhen(a -&gt; remoteClient.getInfo(a.getSomeProperty()).map(s -&gt; s.getBoolean()))\r\n                .map(a -&gt; {\r\n                    //Some logic\r\n                })","title":"Implement filter using project reactor","body":"<p>You have <code>filterWhen</code> for that purpose:</p>\n<pre><code>    repository.findByString(String string) // Flux&lt;SomeObject&gt;\n            .filterWhen(a -&gt; remoteClient.getInfo(a.getSomeProperty()).map(s -&gt; s.getBoolean()))\n            .map(a -&gt; {\n                //Some logic\n            })\n</code></pre>\n"}],"owner":{"account_id":12119561,"reputation":511,"user_id":8851717,"accept_rate":40,"display_name":"Fairy"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77066454,"answer_count":1,"score":0,"last_activity_date":1694172097,"creation_date":1694161778,"question_id":77065330,"body_markdown":"I have a list of items from Mongo and I need to filter them by remote call result, something like this:\r\n```java\r\nrepository.findByString(String string) // Flux&lt;SomeObject&gt;\r\n    .filter(a -&gt; {\r\n        Boolean result =  remoteClient.getInfo(a.getSomeProperty()).block().getBoolean();\r\n        return result;\r\n    }).map(a -&gt; {\r\n        //Some logic\r\n    })\r\n```\r\nI don&#39;t know how to do it in a non-blocking way.\r\nPlease help","title":"Implement filter using project reactor","body":"<p>I have a list of items from Mongo and I need to filter them by remote call result, something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>repository.findByString(String string) // Flux&lt;SomeObject&gt;\n    .filter(a -&gt; {\n        Boolean result =  remoteClient.getInfo(a.getSomeProperty()).block().getBoolean();\n        return result;\n    }).map(a -&gt; {\n        //Some logic\n    })\n</code></pre>\n<p>I don't know how to do it in a non-blocking way.\nPlease help</p>\n"},{"tags":["java","amazon-web-services","spring-security","thymeleaf","amazon-ecs"],"answers":[{"comments":[{"owner":{"account_id":10472614,"reputation":241,"user_id":7720057,"display_name":"Nitin Bisht"},"score":0,"creation_date":1694175712,"post_id":77065004,"comment_id":135860467,"body_markdown":"Perfect. It worked and that documentation described it perfectly. Thanks a lot.","body":"Perfect. It worked and that documentation described it perfectly. Thanks a lot."}],"tags":[],"owner":{"account_id":1897626,"reputation":570,"user_id":1714215,"display_name":"Jens M&#248;ller"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1694158825,"creation_date":1694158825,"answer_id":77065004,"question_id":77064932,"body_markdown":"Sounds like you are running with https offloading (meaning, that your spring boot application does not receive the https request but rather an http request, the load balancer terminates the tls connection).\r\n\r\nI think your problem is described in the [spring boot documentation][1]. \r\nIn most cases the solution is to set `server.forward-headers-strategy=NATIVE` in your application.yaml.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#howto.webserver.use-behind-a-proxy-server","title":"The &quot;redirect&quot; routing of thymeleaf is redirecting the application to http and not to https when deployed in AWS ECS","body":"<p>Sounds like you are running with https offloading (meaning, that your spring boot application does not receive the https request but rather an http request, the load balancer terminates the tls connection).</p>\n<p>I think your problem is described in the <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#howto.webserver.use-behind-a-proxy-server\" rel=\"nofollow noreferrer\">spring boot documentation</a>.\nIn most cases the solution is to set <code>server.forward-headers-strategy=NATIVE</code> in your application.yaml.</p>\n"}],"owner":{"account_id":10472614,"reputation":241,"user_id":7720057,"display_name":"Nitin Bisht"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77065004,"answer_count":1,"score":0,"last_activity_date":1694172075,"creation_date":1694158132,"question_id":77064932,"body_markdown":"I am building a Spring Boot application which consists of Spring Security and Thymeleaf. I have deployed this application in Elastic Container Service (ECS) cluster of AWS.\r\n\r\nI have my simple controller code for the homepage which looks like `return &quot;redirect:/login&quot;`. But as soon as I am hitting the homepage it is converting the URL to the **`http`** and not **`https`**.\r\n\r\nThe whole application is accessible through `https://abcd.com/login` but the **&quot;redirect&quot; routing** of  Thymeleaf is always redirecting it to the `http://abcd.com/login` which is not accessible.\r\n\r\nCan anyone help with the resolution for this.?\r\n\r\nAlso the ECS has one service, one load balancer and one Route53 for translating the names to IP address.","title":"The &quot;redirect&quot; routing of thymeleaf is redirecting the application to http and not to https when deployed in AWS ECS","body":"<p>I am building a Spring Boot application which consists of Spring Security and Thymeleaf. I have deployed this application in Elastic Container Service (ECS) cluster of AWS.</p>\n<p>I have my simple controller code for the homepage which looks like <code>return &quot;redirect:/login&quot;</code>. But as soon as I am hitting the homepage it is converting the URL to the <strong><code>http</code></strong> and not <strong><code>https</code></strong>.</p>\n<p>The whole application is accessible through <code>https://abcd.com/login</code> but the <strong>&quot;redirect&quot; routing</strong> of  Thymeleaf is always redirecting it to the <code>http://abcd.com/login</code> which is not accessible.</p>\n<p>Can anyone help with the resolution for this.?</p>\n<p>Also the ECS has one service, one load balancer and one Route53 for translating the names to IP address.</p>\n"},{"tags":["java","android","firebase","android-studio","firebase-cloud-messaging"],"comments":[{"owner":{"account_id":10866797,"reputation":1800,"user_id":8663492,"display_name":"Muntasir Aonik"},"score":0,"creation_date":1566871798,"post_id":57580464,"comment_id":101782187,"body_markdown":"Possible duplicate of [How to handle notification when app in background in Firebase](https://stackoverflow.com/questions/37711082/how-to-handle-notification-when-app-in-background-in-firebase)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/37711082/how-to-handle-notification-when-app-in-background-in-firebase\">How to handle notification when app in background in Firebase</a>"}],"answers":[{"comments":[{"owner":{"account_id":26164197,"reputation":251,"user_id":19850238,"display_name":"vmvyas1989"},"score":0,"creation_date":1675398397,"post_id":72171234,"comment_id":132924961,"body_markdown":"What if want data from data payload ? when application is in kill mode retrieve notification but not getting data payload data","body":"What if want data from data payload ? when application is in kill mode retrieve notification but not getting data payload data"}],"tags":[],"owner":{"account_id":12982239,"reputation":59,"user_id":9384240,"display_name":"Shubham Vyas"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694171532,"creation_date":1652095660,"answer_id":72171234,"question_id":57580464,"body_markdown":"Try removing &quot;notification&quot; key object from the payload and provide only &quot;data&quot; key object.\r\nThis should work\r\n\r\n**Body/Payload/JSON Request:**\r\n\r\n    {\r\n        &quot;collapse_key&quot;: &quot;type_a&quot;,\r\n        &quot;notification&quot;: {\r\n            &quot;badge&quot;: &quot;2&quot;,\r\n            &quot;module&quot;: &quot;announcements&quot;,\r\n        &quot;action&quot;: &quot;announcementAddedByWarden&quot;,\r\n        &quot;id&quot;: &quot;2455&quot;,\r\n        &quot;title&quot;: &quot;Test Notification&quot;,\r\n        &quot;body&quot;: &quot;Check Notification&quot;\r\n    },\r\n    &quot;data&quot;: {\r\n        &quot;badge&quot;: &quot;2&quot;,\r\n        &quot;module&quot;: &quot;Announcement&quot;,\r\n        &quot;id&quot;: &quot;2455&quot;,\r\n        &quot;title&quot;: &quot;Test Notification&quot;,\r\n        &quot;body&quot;: &quot;Check Notification&quot;\r\n    },\r\n    &quot;registration_ids&quot;: [\r\n        &quot;dJokCoAJRfyHpL3y9rQWxL:APA91bGNszapf1bnQapVHW1CMLT14SXMmjYBmXooRUiiMEWpvawkZ9Kv5SzRz4cnqHhnwFGWT3uXfzgGn3ygysJE1bkfG0nNomCtL_ikDzE0TiP0TZjhQBDSj_1ydFUyrnQKNSnszqgW&quot;\r\n     ]\r\n    }\r\n\r\n\r\n**You can remove data object from the payload as shown in below code snippet:**\r\n\r\n     &quot;notification&quot;: {\r\n        &quot;badge&quot;: &quot;2&quot;,\r\n        &quot;module&quot;: &quot;announcements&quot;,\r\n    &quot;action&quot;: &quot;announcementAddedByWarden&quot;,\r\n    &quot;id&quot;: &quot;2455&quot;,\r\n    &quot;title&quot;: &quot;Test Notification&quot;,\r\n    &quot;body&quot;: &quot;Check Notification&quot;\r\n    }\r\n\r\n**Correct format will be:**\r\n\r\n    {\r\n    &quot;collapse_key&quot;: &quot;type_a&quot;,\r\n    &quot;data&quot;: {\r\n        &quot;badge&quot;: &quot;2&quot;,\r\n        &quot;module&quot;: &quot;Announcement&quot;,\r\n        &quot;id&quot;: &quot;2455&quot;,\r\n        &quot;title&quot;: &quot;Test Notification&quot;,\r\n        &quot;body&quot;: &quot;Check Notification&quot;\r\n    },\r\n    &quot;registration_ids&quot;: [\r\n        &quot;eIMfC_Tf1bo:APA91bEJEXAsdeb33LEK1go4tMvjW-8dvO9jBYKfRaiyUwzsNICij_lUPqKBQEXtwZURxkrjg0RbUPUnr9gOxit2Sd-nu4hhloZhmtsyldqDA3SZK1ld4W2PI7hqZx6yTpZ480AIdeIs&quot;\r\n    ]\r\n    }\r\n\r\n","title":"FCM notification not retrieve when app is closed","body":"<p>Try removing &quot;notification&quot; key object from the payload and provide only &quot;data&quot; key object.\nThis should work</p>\n<p><strong>Body/Payload/JSON Request:</strong></p>\n<pre><code>{\n    &quot;collapse_key&quot;: &quot;type_a&quot;,\n    &quot;notification&quot;: {\n        &quot;badge&quot;: &quot;2&quot;,\n        &quot;module&quot;: &quot;announcements&quot;,\n    &quot;action&quot;: &quot;announcementAddedByWarden&quot;,\n    &quot;id&quot;: &quot;2455&quot;,\n    &quot;title&quot;: &quot;Test Notification&quot;,\n    &quot;body&quot;: &quot;Check Notification&quot;\n},\n&quot;data&quot;: {\n    &quot;badge&quot;: &quot;2&quot;,\n    &quot;module&quot;: &quot;Announcement&quot;,\n    &quot;id&quot;: &quot;2455&quot;,\n    &quot;title&quot;: &quot;Test Notification&quot;,\n    &quot;body&quot;: &quot;Check Notification&quot;\n},\n&quot;registration_ids&quot;: [\n    &quot;dJokCoAJRfyHpL3y9rQWxL:APA91bGNszapf1bnQapVHW1CMLT14SXMmjYBmXooRUiiMEWpvawkZ9Kv5SzRz4cnqHhnwFGWT3uXfzgGn3ygysJE1bkfG0nNomCtL_ikDzE0TiP0TZjhQBDSj_1ydFUyrnQKNSnszqgW&quot;\n ]\n}\n</code></pre>\n<p><strong>You can remove data object from the payload as shown in below code snippet:</strong></p>\n<pre><code> &quot;notification&quot;: {\n    &quot;badge&quot;: &quot;2&quot;,\n    &quot;module&quot;: &quot;announcements&quot;,\n&quot;action&quot;: &quot;announcementAddedByWarden&quot;,\n&quot;id&quot;: &quot;2455&quot;,\n&quot;title&quot;: &quot;Test Notification&quot;,\n&quot;body&quot;: &quot;Check Notification&quot;\n}\n</code></pre>\n<p><strong>Correct format will be:</strong></p>\n<pre><code>{\n&quot;collapse_key&quot;: &quot;type_a&quot;,\n&quot;data&quot;: {\n    &quot;badge&quot;: &quot;2&quot;,\n    &quot;module&quot;: &quot;Announcement&quot;,\n    &quot;id&quot;: &quot;2455&quot;,\n    &quot;title&quot;: &quot;Test Notification&quot;,\n    &quot;body&quot;: &quot;Check Notification&quot;\n},\n&quot;registration_ids&quot;: [\n    &quot;eIMfC_Tf1bo:APA91bEJEXAsdeb33LEK1go4tMvjW-8dvO9jBYKfRaiyUwzsNICij_lUPqKBQEXtwZURxkrjg0RbUPUnr9gOxit2Sd-nu4hhloZhmtsyldqDA3SZK1ld4W2PI7hqZx6yTpZ480AIdeIs&quot;\n]\n}\n</code></pre>\n"}],"owner":{"account_id":11805072,"reputation":241,"user_id":11106787,"display_name":"Saransh Agarwal"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8720,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1694171532,"creation_date":1566329706,"question_id":57580464,"body_markdown":"I am retrieving the notification from firebase cloud messaging into my android app. but the problem is when my app is opened or in running state in that case only my app is retrieving the notification. if I am not using my app or my app is not opened and I send any push notification that notification is not retrieving inside my app.\r\n\r\n        @Override\r\n        public void onMessageReceived(RemoteMessage remoteMessage) {\r\n            super.onMessageReceived(remoteMessage);\r\n    \r\n            mFirestore = FirebaseFirestore.getInstance();\r\n    \r\n            if (remoteMessage.getData() != null) {\r\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O)\r\n                    sendNotificationAPI26(remoteMessage);\r\n    \r\n                else\r\n                    sendNotification(remoteMessage);\r\n            }\r\n        }\r\n    \r\n        private void sendNotification(RemoteMessage remoteMessage) {\r\n    \r\n            isNotificationMatching = false;\r\n            Intent intent = new Intent(this, Dashboard.class);\r\n            intent.putExtra(&quot;notificationFragment&quot;, &quot;showNotifications&quot;);\r\n            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\r\n    \r\n            PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, intent, PendingIntent.FLAG_ONE_SHOT);\r\n    \r\n    \r\n            final Map&lt;String, String&gt; data = remoteMessage.getData();\r\n    \r\n            String title = data.get(&quot;title&quot;);\r\n            String description = data.get(&quot;description&quot;);\r\n            String url = data.get(&quot;url&quot;);\r\n            String code = data.get(&quot;code&quot;);\r\n            String actual_price = data.get(&quot;actual_price&quot;);\r\n            String deal_price = data.get(&quot;deal_price&quot;);\r\n            String key = data.get(&quot;key&quot;);\r\n            final String id = data.get(&quot;id&quot;);\r\n    \r\n            mFirestore.collection(&quot;notifications&quot;).get().addOnCompleteListener(new OnCompleteListener&lt;QuerySnapshot&gt;() {\r\n                public void onComplete(@NonNull Task&lt;QuerySnapshot&gt; task) {\r\n                    if (task.isSuccessful()) {\r\n                        for (QueryDocumentSnapshot document : task.getResult()) {\r\n                            if (document.getData().get(&quot;id&quot;).equals(id)) {\r\n                                isNotificationMatching = true;\r\n                                break;\r\n                            }\r\n                        }\r\n    \r\n                        if (!isNotificationMatching) {\r\n                            postDataToFirebaseServer(data);\r\n                        }\r\n    \r\n                    } else {\r\n                        Log.d(TAG, &quot;Error getting documents: &quot;, task.getException());\r\n                    }\r\n                }\r\n            });\r\n    \r\n    \r\n            Uri defaultSoundUri = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);\r\n            NotificationCompat.Builder builder = new NotificationCompat.Builder(this)\r\n                    .setSmallIcon(R.drawable.app_logo)\r\n                    .setContentText(title)\r\n                    .setAutoCancel(true)\r\n                    .setSound(defaultSoundUri);\r\n            builder.setContentIntent(pendingIntent);\r\n    \r\n            NotificationManager noti = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);\r\n            noti.notify(new Random().nextInt(), builder.build());\r\n        }\r\n    \r\n        private void postDataToFirebaseServer(Map&lt;String, String&gt; data) {\r\n    \r\n            Map&lt;String,Object&gt; postDataMap = new HashMap&lt;&gt;();\r\n            postDataMap.put(&quot;title&quot;, data.get(&quot;title&quot;));\r\n            postDataMap.put(&quot;description&quot;, data.get(&quot;description&quot;));\r\n            postDataMap.put(&quot;url&quot;, data.get(&quot;url&quot;));\r\n            postDataMap.put(&quot;id&quot;, data.get(&quot;id&quot;));\r\n            postDataMap.put(&quot;code&quot;, data.get(&quot;code&quot;));\r\n            postDataMap.put(&quot;actual_price&quot;, data.get(&quot;actual_price&quot;));\r\n            postDataMap.put(&quot;deal_price&quot;, data.get(&quot;deal_price&quot;));\r\n            postDataMap.put(&quot;key&quot;, data.get(&quot;key&quot;));\r\n    \r\n            postDataMap.put(&quot;timestamp&quot;, FieldValue.serverTimestamp());\r\n    \r\n    \r\n            mFirestore.collection(&quot;notifications&quot;).add(postDataMap).addOnSuccessListener(new OnSuccessListener&lt;DocumentReference&gt;() {\r\n                @Override\r\n                public void onSuccess(DocumentReference documentReference) {\r\n    //                Toast.makeText(getA.this, &quot;Success&quot;, Toast.LENGTH_SHORT);\r\n                }\r\n            }).addOnFailureListener(new OnFailureListener() {\r\n                @Override\r\n                public void onFailure(@NonNull Exception e) {\r\n                    String error = e.getMessage();\r\n    //                Toast.makeText(Testing.this, &quot;Failed&quot;, Toast.LENGTH_SHORT);\r\n                }\r\n            });\r\n    \r\n        }\r\n    \r\n        private void sendNotificationAPI26(RemoteMessage remoteMessage) {\r\n            Intent intent = new Intent(this, Dashboard.class);\r\n            intent.putExtra(&quot;notificationFragment&quot;, &quot;showNotifications&quot;);\r\n            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\r\n    \r\n            PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, intent, PendingIntent.FLAG_ONE_SHOT);\r\n    \r\n            final Map&lt;String, String&gt; data = remoteMessage.getData();\r\n    \r\n            String title = data.get(&quot;title&quot;);\r\n            String description = data.get(&quot;description&quot;);\r\n            String url = data.get(&quot;url&quot;);\r\n            String code = data.get(&quot;code&quot;);\r\n            String actual_price = data.get(&quot;actual_price&quot;);\r\n            String deal_price = data.get(&quot;deal_price&quot;);\r\n            String key = data.get(&quot;key&quot;);\r\n            final String id = data.get(&quot;id&quot;);\r\n    \r\n            mFirestore.collection(&quot;notifications&quot;).get().addOnCompleteListener(new OnCompleteListener&lt;QuerySnapshot&gt;() {\r\n                public void onComplete(@NonNull Task&lt;QuerySnapshot&gt; task) {\r\n                    if (task.isSuccessful()) {\r\n                        for (QueryDocumentSnapshot document : task.getResult()) {\r\n                            if (document.getData().get(&quot;id&quot;).equals(id)) {\r\n                                isNotificationMatching = true;\r\n                                break;\r\n                            }\r\n                        }\r\n    \r\n                        if (!isNotificationMatching) {\r\n                            postDataToFirebaseServer(data);\r\n                        }\r\n    \r\n                    } else {\r\n                        Log.d(TAG, &quot;Error getting documents: &quot;, task.getException());\r\n                    }\r\n                }\r\n            });\r\n    \r\n            NotificationHelper helper;\r\n            Notification.Builder builder;\r\n    \r\n            Uri defaultSoundUri = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);\r\n            helper = new NotificationHelper(this);\r\n            builder = helper.getLootBoxNotification(title, description, url, id, code, actual_price, deal_price, key, defaultSoundUri);\r\n            helper.getManager().notify(new Random().nextInt(), builder.build());\r\n            builder.setContentIntent(pendingIntent);\r\n    \r\n        }\r\n    }\r\n\r\nI want when my app is closed or not in running state at that time any push notification is sent that will also retrieve inside the application.","title":"FCM notification not retrieve when app is closed","body":"<p>I am retrieving the notification from firebase cloud messaging into my android app. but the problem is when my app is opened or in running state in that case only my app is retrieving the notification. if I am not using my app or my app is not opened and I send any push notification that notification is not retrieving inside my app.</p>\n\n<pre><code>    @Override\n    public void onMessageReceived(RemoteMessage remoteMessage) {\n        super.onMessageReceived(remoteMessage);\n\n        mFirestore = FirebaseFirestore.getInstance();\n\n        if (remoteMessage.getData() != null) {\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O)\n                sendNotificationAPI26(remoteMessage);\n\n            else\n                sendNotification(remoteMessage);\n        }\n    }\n\n    private void sendNotification(RemoteMessage remoteMessage) {\n\n        isNotificationMatching = false;\n        Intent intent = new Intent(this, Dashboard.class);\n        intent.putExtra(\"notificationFragment\", \"showNotifications\");\n        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\n\n        PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, intent, PendingIntent.FLAG_ONE_SHOT);\n\n\n        final Map&lt;String, String&gt; data = remoteMessage.getData();\n\n        String title = data.get(\"title\");\n        String description = data.get(\"description\");\n        String url = data.get(\"url\");\n        String code = data.get(\"code\");\n        String actual_price = data.get(\"actual_price\");\n        String deal_price = data.get(\"deal_price\");\n        String key = data.get(\"key\");\n        final String id = data.get(\"id\");\n\n        mFirestore.collection(\"notifications\").get().addOnCompleteListener(new OnCompleteListener&lt;QuerySnapshot&gt;() {\n            public void onComplete(@NonNull Task&lt;QuerySnapshot&gt; task) {\n                if (task.isSuccessful()) {\n                    for (QueryDocumentSnapshot document : task.getResult()) {\n                        if (document.getData().get(\"id\").equals(id)) {\n                            isNotificationMatching = true;\n                            break;\n                        }\n                    }\n\n                    if (!isNotificationMatching) {\n                        postDataToFirebaseServer(data);\n                    }\n\n                } else {\n                    Log.d(TAG, \"Error getting documents: \", task.getException());\n                }\n            }\n        });\n\n\n        Uri defaultSoundUri = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);\n        NotificationCompat.Builder builder = new NotificationCompat.Builder(this)\n                .setSmallIcon(R.drawable.app_logo)\n                .setContentText(title)\n                .setAutoCancel(true)\n                .setSound(defaultSoundUri);\n        builder.setContentIntent(pendingIntent);\n\n        NotificationManager noti = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);\n        noti.notify(new Random().nextInt(), builder.build());\n    }\n\n    private void postDataToFirebaseServer(Map&lt;String, String&gt; data) {\n\n        Map&lt;String,Object&gt; postDataMap = new HashMap&lt;&gt;();\n        postDataMap.put(\"title\", data.get(\"title\"));\n        postDataMap.put(\"description\", data.get(\"description\"));\n        postDataMap.put(\"url\", data.get(\"url\"));\n        postDataMap.put(\"id\", data.get(\"id\"));\n        postDataMap.put(\"code\", data.get(\"code\"));\n        postDataMap.put(\"actual_price\", data.get(\"actual_price\"));\n        postDataMap.put(\"deal_price\", data.get(\"deal_price\"));\n        postDataMap.put(\"key\", data.get(\"key\"));\n\n        postDataMap.put(\"timestamp\", FieldValue.serverTimestamp());\n\n\n        mFirestore.collection(\"notifications\").add(postDataMap).addOnSuccessListener(new OnSuccessListener&lt;DocumentReference&gt;() {\n            @Override\n            public void onSuccess(DocumentReference documentReference) {\n//                Toast.makeText(getA.this, \"Success\", Toast.LENGTH_SHORT);\n            }\n        }).addOnFailureListener(new OnFailureListener() {\n            @Override\n            public void onFailure(@NonNull Exception e) {\n                String error = e.getMessage();\n//                Toast.makeText(Testing.this, \"Failed\", Toast.LENGTH_SHORT);\n            }\n        });\n\n    }\n\n    private void sendNotificationAPI26(RemoteMessage remoteMessage) {\n        Intent intent = new Intent(this, Dashboard.class);\n        intent.putExtra(\"notificationFragment\", \"showNotifications\");\n        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\n\n        PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, intent, PendingIntent.FLAG_ONE_SHOT);\n\n        final Map&lt;String, String&gt; data = remoteMessage.getData();\n\n        String title = data.get(\"title\");\n        String description = data.get(\"description\");\n        String url = data.get(\"url\");\n        String code = data.get(\"code\");\n        String actual_price = data.get(\"actual_price\");\n        String deal_price = data.get(\"deal_price\");\n        String key = data.get(\"key\");\n        final String id = data.get(\"id\");\n\n        mFirestore.collection(\"notifications\").get().addOnCompleteListener(new OnCompleteListener&lt;QuerySnapshot&gt;() {\n            public void onComplete(@NonNull Task&lt;QuerySnapshot&gt; task) {\n                if (task.isSuccessful()) {\n                    for (QueryDocumentSnapshot document : task.getResult()) {\n                        if (document.getData().get(\"id\").equals(id)) {\n                            isNotificationMatching = true;\n                            break;\n                        }\n                    }\n\n                    if (!isNotificationMatching) {\n                        postDataToFirebaseServer(data);\n                    }\n\n                } else {\n                    Log.d(TAG, \"Error getting documents: \", task.getException());\n                }\n            }\n        });\n\n        NotificationHelper helper;\n        Notification.Builder builder;\n\n        Uri defaultSoundUri = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);\n        helper = new NotificationHelper(this);\n        builder = helper.getLootBoxNotification(title, description, url, id, code, actual_price, deal_price, key, defaultSoundUri);\n        helper.getManager().notify(new Random().nextInt(), builder.build());\n        builder.setContentIntent(pendingIntent);\n\n    }\n}\n</code></pre>\n\n<p>I want when my app is closed or not in running state at that time any push notification is sent that will also retrieve inside the application.</p>\n"},{"tags":["java","generics","interface","casting"],"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1694170515,"post_id":77066231,"comment_id":135859454,"body_markdown":"A generic method is a method which declares at least one type parameter. The *caller* decides which actual type argument(s) to use for the type parameter(s). Your phrase “that this can only be made into a class of type Predicate” is incomprehensible. You should mark code fragments with back-ticks, so that type arguments are not confused for HTML tags. As said, the *caller* decides what `T` is, hence, returning a `Predicate&lt;T&gt;` allows the caller to decide what actual parameterization the predicate will have. Which works, because every object has an `equals` method.","body":"A generic method is a method which declares at least one type parameter. The <i>caller</i> decides which actual type argument(s) to use for the type parameter(s). Your phrase “that this can only be made into a class of type Predicate” is incomprehensible. You should mark code fragments with back-ticks, so that type arguments are not confused for HTML tags. As said, the <i>caller</i> decides what <code>T</code> is, hence, returning a <code>Predicate&lt;T&gt;</code> allows the caller to decide what actual parameterization the predicate will have. Which works, because every object has an <code>equals</code> method."}],"answers":[{"comments":[{"owner":{"account_id":17883750,"reputation":13,"user_id":22382599,"display_name":"SoullessWarrior"},"score":0,"creation_date":1694170580,"post_id":77066263,"comment_id":135859469,"body_markdown":"Right, but since it&#39;s a static method, it would be invoked like Predicate.isEqual(myobject), where for the sake of argument, myobject is an Integer. In that case, what is T?","body":"Right, but since it&#39;s a static method, it would be invoked like Predicate.isEqual(myobject), where for the sake of argument, myobject is an Integer. In that case, what is T?"},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":1,"creation_date":1694170709,"post_id":77066263,"comment_id":135859487,"body_markdown":"@SoullessWarrior that depends on the calling context. `Predicate&lt;String&gt; p = Predicate.isEqual(myInteger);`","body":"@SoullessWarrior that depends on the calling context. <code>Predicate&lt;String&gt; p = Predicate.isEqual(myInteger);</code>"},{"owner":{"account_id":17883750,"reputation":13,"user_id":22382599,"display_name":"SoullessWarrior"},"score":0,"creation_date":1694171533,"post_id":77066263,"comment_id":135859643,"body_markdown":"Ah, thanks! That clarifies everything. The only question that remains is: Why does the second method take a superclass and then cast the negation down into T?","body":"Ah, thanks! That clarifies everything. The only question that remains is: Why does the second method take a superclass and then cast the negation down into T?"},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1694171547,"post_id":77066263,"comment_id":135859645,"body_markdown":"@SoullessWarrior the result of invoking a generic method is a _polyexpression_: the same code can have different types, depending on how it is used (e.g. the type of variable it is assigned to).","body":"@SoullessWarrior the result of invoking a generic method is a <i>polyexpression</i>: the same code can have different types, depending on how it is used (e.g. the type of variable it is assigned to)."},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":1,"creation_date":1694171652,"post_id":77066263,"comment_id":135859671,"body_markdown":"@SoullessWarrior the cast is narrowing the permissible argument types from &quot;something, we don&#39;t know exactly what, but `T` is acceptable&quot; to &quot;only `T` is acceptable&quot;. Provided the API you&#39;re using has used generics appropriately, it should be able to accept predicates which are more general than needed; but sometimes, they don&#39;t accept general parameters, and you need e.g. an actual `Predicate&lt;String&gt;` instead of a `Predicate&lt;Object&gt;` to which you will only pass `String`s.","body":"@SoullessWarrior the cast is narrowing the permissible argument types from &quot;something, we don&#39;t know exactly what, but <code>T</code> is acceptable&quot; to &quot;only <code>T</code> is acceptable&quot;. Provided the API you&#39;re using has used generics appropriately, it should be able to accept predicates which are more general than needed; but sometimes, they don&#39;t accept general parameters, and you need e.g. an actual <code>Predicate&lt;String&gt;</code> instead of a <code>Predicate&lt;Object&gt;</code> to which you will only pass <code>String</code>s."}],"tags":[],"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"comment_count":5,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1694170808,"creation_date":1694170414,"answer_id":77066263,"question_id":77066231,"body_markdown":"We can always specify the types explicitly:\r\n\r\n```\r\nstatic &lt;T&gt; Predicate&lt;T&gt; isEqual(Object targetRef) {\r\n    return (null == targetRef)\r\n            ? Objects::isNull\r\n            : (T object) -&gt; targetRef.equals(object);\r\n}\r\n```\r\n\r\nSo while `targetRef` is of type `Object`, `object` is of type `T`.\r\n\r\n`T` depends on the calling context, e.g.:\r\n\r\n```\r\nPredicate.isEqual(something); // T == Object\r\nPredicate.&lt;String&gt;isEqual(something); // T == String\r\nPredicate&lt;Double&gt; p = Predicate.isEqual(something); // T == Double\r\nStream.of(1,2,3).filter(Predicate.isEqual(2)); // T == Integer\r\n```","title":"static functions using generic types in Java","body":"<p>We can always specify the types explicitly:</p>\n<pre><code>static &lt;T&gt; Predicate&lt;T&gt; isEqual(Object targetRef) {\n    return (null == targetRef)\n            ? Objects::isNull\n            : (T object) -&gt; targetRef.equals(object);\n}\n</code></pre>\n<p>So while <code>targetRef</code> is of type <code>Object</code>, <code>object</code> is of type <code>T</code>.</p>\n<p><code>T</code> depends on the calling context, e.g.:</p>\n<pre><code>Predicate.isEqual(something); // T == Object\nPredicate.&lt;String&gt;isEqual(something); // T == String\nPredicate&lt;Double&gt; p = Predicate.isEqual(something); // T == Double\nStream.of(1,2,3).filter(Predicate.isEqual(2)); // T == Integer\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694170421,"creation_date":1694170421,"answer_id":77066265,"question_id":77066231,"body_markdown":"For the first function, the `equals` method always takes an `Object`. You might expect `Object::equals` to take only a parameter of its own type, but that&#39;s not what it does. That leaves the `&lt;T&gt;` parameter to be inferred purely by what the caller needs: You can easily pass `isEqual(&quot;&quot;)` to something that expects a `Predicate&lt;Integer&gt;`, and that&#39;ll work fine (and always returns `false`).\r\n\r\nThe `&lt;T&gt;` for the second function is inferred from the caller in much the same way. The `super` just means &quot;any `Predicate` that can *consume* a `T`&quot;. The cast is needed because the compiler can&#39;t know that the `Predicate` returned by `negate` is always safe as a `Predicate&lt;T&gt;`.\r\n\r\n\r\n","title":"static functions using generic types in Java","body":"<p>For the first function, the <code>equals</code> method always takes an <code>Object</code>. You might expect <code>Object::equals</code> to take only a parameter of its own type, but that's not what it does. That leaves the <code>&lt;T&gt;</code> parameter to be inferred purely by what the caller needs: You can easily pass <code>isEqual(&quot;&quot;)</code> to something that expects a <code>Predicate&lt;Integer&gt;</code>, and that'll work fine (and always returns <code>false</code>).</p>\n<p>The <code>&lt;T&gt;</code> for the second function is inferred from the caller in much the same way. The <code>super</code> just means &quot;any <code>Predicate</code> that can <em>consume</em> a <code>T</code>&quot;. The cast is needed because the compiler can't know that the <code>Predicate</code> returned by <code>negate</code> is always safe as a <code>Predicate&lt;T&gt;</code>.</p>\n"}],"owner":{"account_id":17883750,"reputation":13,"user_id":22382599,"display_name":"SoullessWarrior"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77066263,"answer_count":2,"score":0,"last_activity_date":1694170928,"creation_date":1694170137,"question_id":77066231,"body_markdown":"I was looking at the source code of Predicate&lt;T&gt; in java.util.function, (which for context, is a functional interface that returns a boolean value having taken some generic input of type T) when I came across the following functions:\r\n\r\n```\r\n    static &lt;T&gt; Predicate&lt;T&gt; isEqual(Object targetRef) {\r\n        return (null == targetRef)\r\n                ? Objects::isNull\r\n                : object -&gt; targetRef.equals(object);\r\n    }\r\n\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    static &lt;T&gt; Predicate&lt;T&gt; not(Predicate&lt;? super T&gt; target) {\r\n        Objects.requireNonNull(target);\r\n        return (Predicate&lt;T&gt;)target.negate();\r\n    }\r\n\r\n```\r\nand I am puzzled by how static functions can be used with all these generic types lying around. What&#39;s going on?\r\n\r\nI was expecting some type inference makes this happen. In the first method, the return function is a function that can be fed into `Predicate&lt;T&gt;` implicitly, but since the `targetRef` argument is of type `Object`, I would expect that this can only be made into a class of type `Predicate&lt;Object&gt;`, which seems to me, defeats the point of using `T` at all in the function.\r\n\r\nThe second function, I cannot even think of a reasonable inference pattern, it seems absurd. The return type is cast into `Predicate&lt;T&gt;`, but `target.negate` will return `Predicate&lt;? super T&gt;`, which makes taking a super argument itself strange, and further, because of the typecast in the return statement, and the obscurity in the argument as well, it is not possible to know a sensible `T` from either. How do either of these methods work, and why were they defined that way?","title":"static functions using generic types in Java","body":"<p>I was looking at the source code of Predicate in java.util.function, (which for context, is a functional interface that returns a boolean value having taken some generic input of type T) when I came across the following functions:</p>\n<pre><code>    static &lt;T&gt; Predicate&lt;T&gt; isEqual(Object targetRef) {\n        return (null == targetRef)\n                ? Objects::isNull\n                : object -&gt; targetRef.equals(object);\n    }\n\n    @SuppressWarnings(&quot;unchecked&quot;)\n    static &lt;T&gt; Predicate&lt;T&gt; not(Predicate&lt;? super T&gt; target) {\n        Objects.requireNonNull(target);\n        return (Predicate&lt;T&gt;)target.negate();\n    }\n\n</code></pre>\n<p>and I am puzzled by how static functions can be used with all these generic types lying around. What's going on?</p>\n<p>I was expecting some type inference makes this happen. In the first method, the return function is a function that can be fed into <code>Predicate&lt;T&gt;</code> implicitly, but since the <code>targetRef</code> argument is of type <code>Object</code>, I would expect that this can only be made into a class of type <code>Predicate&lt;Object&gt;</code>, which seems to me, defeats the point of using <code>T</code> at all in the function.</p>\n<p>The second function, I cannot even think of a reasonable inference pattern, it seems absurd. The return type is cast into <code>Predicate&lt;T&gt;</code>, but <code>target.negate</code> will return <code>Predicate&lt;? super T&gt;</code>, which makes taking a super argument itself strange, and further, because of the typecast in the return statement, and the obscurity in the argument as well, it is not possible to know a sensible <code>T</code> from either. How do either of these methods work, and why were they defined that way?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9938,"page":196,"page_size":100}
