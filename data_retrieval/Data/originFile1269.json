{"items":[{"tags":["java","algorithm","break","backtracking"],"answers":[{"tags":[],"owner":{"account_id":16370655,"reputation":1878,"user_id":11983046,"display_name":"Ryan Zhang"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1655090063,"creation_date":1655090063,"answer_id":72597441,"question_id":72597401,"body_markdown":"`subsetSum[]` contains &quot;buckets&quot; for which elements are placed during your depth-first search.\r\n\r\nConsider what happens when there are multiple empty &quot;buckets&quot;. It does not matter which of these empty &quot;buckets&quot; you place the current element into, as they are all theoretically identical.\r\n\r\nConsider this example. Let&#39;s say `subsetSum[]` contains `{1, 2, 0, 0, 0}`. You want to place an element of value `5` into one of the &quot;buckets&quot;.\r\n\r\nIf you place it such that the new `subsetSum[]` contains `{1, 2, 0, 5, 0}` as opposed to `{1, 2, 5, 0, 0}`, the two are effectively the same as the ordering of `subsetSum[]` is unimportant.  However, if you do decide to calculate both, you are doubling your runtime at this branch. Combined, this can lead to an exponentially slower runtime.\r\n\r\nThe `break` statement is executed after the first &quot;bucket&quot; such that `subsetSum[subsetIdx]==0`. This means that in `{1, 2, 0, 0, 0}`, for example, we will never reach the state `{1, 2, 0, 5, 0}` as the loop has broken after trying `{1, 2, 5, 0, 0}`, preventing duplicate calculations and greatly speeding up runtime.","title":"How does &#39;break&#39;ing when array element is zero speed up backtracking?","body":"<p><code>subsetSum[]</code> contains &quot;buckets&quot; for which elements are placed during your depth-first search.</p>\n<p>Consider what happens when there are multiple empty &quot;buckets&quot;. It does not matter which of these empty &quot;buckets&quot; you place the current element into, as they are all theoretically identical.</p>\n<p>Consider this example. Let's say <code>subsetSum[]</code> contains <code>{1, 2, 0, 0, 0}</code>. You want to place an element of value <code>5</code> into one of the &quot;buckets&quot;.</p>\n<p>If you place it such that the new <code>subsetSum[]</code> contains <code>{1, 2, 0, 5, 0}</code> as opposed to <code>{1, 2, 5, 0, 0}</code>, the two are effectively the same as the ordering of <code>subsetSum[]</code> is unimportant.  However, if you do decide to calculate both, you are doubling your runtime at this branch. Combined, this can lead to an exponentially slower runtime.</p>\n<p>The <code>break</code> statement is executed after the first &quot;bucket&quot; such that <code>subsetSum[subsetIdx]==0</code>. This means that in <code>{1, 2, 0, 0, 0}</code>, for example, we will never reach the state <code>{1, 2, 0, 5, 0}</code> as the loop has broken after trying <code>{1, 2, 5, 0, 0}</code>, preventing duplicate calculations and greatly speeding up runtime.</p>\n"}],"owner":{"account_id":11326276,"reputation":611,"user_id":16042459,"display_name":"Someone"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72597441,"answer_count":1,"score":0,"last_activity_date":1655090063,"creation_date":1655089415,"question_id":72597401,"body_markdown":"I am solving a problem [Partition to K Equal Sum Subsets](https://leetcode.com/problems/partition-to-k-equal-sum-subsets/) on LeetCode:\r\n\r\n&gt;Given an integer array nums and an integer k, return true if it is possible to divide this array into k non-empty subsets whose sums are all equal.  So, if Input: nums = [4,3,2,3,5,2,1], k = 4; Output: true.\r\n\r\nThe code I am [referring](https://leetcode.com/problems/partition-to-k-equal-sum-subsets/discuss/1494944/Easy-java-backtracking-%2B-pruning-code) is as below:\r\n```java\r\nclass Solution {\r\n    public boolean canPartitionKSubsets(int[] nums, int k) {\r\n        int sum = 0;\r\n        for(int num : nums){\r\n            sum+=num;\r\n        }\r\n        \r\n        if((sum%k)!=0) return false;\r\n        \r\n        int subsetSum[] = new int[k];\r\n        return canPartitionKSubsets(nums,0,subsetSum,k,sum);\r\n    }\r\n    \r\n    private boolean canPartitionKSubsets(int nums[] , int idx , int subsetSum[] , int k , int sum){\r\n        if(idx==nums.length){\r\n            int sumObtained = subsetSum[0];\r\n            for(int subsetIdx = 1;subsetIdx&lt;k;subsetIdx++){\r\n                if(subsetSum[subsetIdx]!=sumObtained) return false;\r\n            }\r\n            return true;\r\n        }\r\n        \r\n        for(int subsetIdx=0;subsetIdx&lt;k;subsetIdx++){\r\n            if(subsetSum[subsetIdx]&gt;(sum/k)) return false;\r\n        }\r\n        \r\n        for(int subsetIdx=0;subsetIdx&lt;k;subsetIdx++){\r\n            if(subsetSum[subsetIdx]==0){\r\n                subsetSum[subsetIdx] = nums[idx];\r\n                boolean canPartition = canPartitionKSubsets(nums,idx+1,subsetSum,k,sum);\r\n                if(canPartition) return true;\r\n                subsetSum[subsetIdx] = 0;\r\n                break;     //-------&gt; why??\r\n            }else{\r\n                subsetSum[subsetIdx]+= nums[idx];\r\n                boolean canPartition = canPartitionKSubsets(nums,idx+1,subsetSum,k,sum);\r\n                if(canPartition) return true;\r\n                subsetSum[subsetIdx]-= nums[idx];\r\n            }\r\n        }\r\n        \r\n        return false;\r\n    }\r\n}\r\n```\r\n\r\nI don&#39;t quite follow the reason for `break` statement in the code above.  My solution was very similar but without `break` (and the `if` and `else` clauses combined into one), but mine TLEs (times out), while this one (with a `break`) gets accepted with a good runtime.\r\n\r\nWhat is the significance of the `break` statement here?  Specifically, how does it speed things up?\r\n\r\nThanks!","title":"How does &#39;break&#39;ing when array element is zero speed up backtracking?","body":"<p>I am solving a problem <a href=\"https://leetcode.com/problems/partition-to-k-equal-sum-subsets/\" rel=\"nofollow noreferrer\">Partition to K Equal Sum Subsets</a> on LeetCode:</p>\n<blockquote>\n<p>Given an integer array nums and an integer k, return true if it is possible to divide this array into k non-empty subsets whose sums are all equal.  So, if Input: nums = [4,3,2,3,5,2,1], k = 4; Output: true.</p>\n</blockquote>\n<p>The code I am <a href=\"https://leetcode.com/problems/partition-to-k-equal-sum-subsets/discuss/1494944/Easy-java-backtracking-%2B-pruning-code\" rel=\"nofollow noreferrer\">referring</a> is as below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Solution {\n    public boolean canPartitionKSubsets(int[] nums, int k) {\n        int sum = 0;\n        for(int num : nums){\n            sum+=num;\n        }\n        \n        if((sum%k)!=0) return false;\n        \n        int subsetSum[] = new int[k];\n        return canPartitionKSubsets(nums,0,subsetSum,k,sum);\n    }\n    \n    private boolean canPartitionKSubsets(int nums[] , int idx , int subsetSum[] , int k , int sum){\n        if(idx==nums.length){\n            int sumObtained = subsetSum[0];\n            for(int subsetIdx = 1;subsetIdx&lt;k;subsetIdx++){\n                if(subsetSum[subsetIdx]!=sumObtained) return false;\n            }\n            return true;\n        }\n        \n        for(int subsetIdx=0;subsetIdx&lt;k;subsetIdx++){\n            if(subsetSum[subsetIdx]&gt;(sum/k)) return false;\n        }\n        \n        for(int subsetIdx=0;subsetIdx&lt;k;subsetIdx++){\n            if(subsetSum[subsetIdx]==0){\n                subsetSum[subsetIdx] = nums[idx];\n                boolean canPartition = canPartitionKSubsets(nums,idx+1,subsetSum,k,sum);\n                if(canPartition) return true;\n                subsetSum[subsetIdx] = 0;\n                break;     //-------&gt; why??\n            }else{\n                subsetSum[subsetIdx]+= nums[idx];\n                boolean canPartition = canPartitionKSubsets(nums,idx+1,subsetSum,k,sum);\n                if(canPartition) return true;\n                subsetSum[subsetIdx]-= nums[idx];\n            }\n        }\n        \n        return false;\n    }\n}\n</code></pre>\n<p>I don't quite follow the reason for <code>break</code> statement in the code above.  My solution was very similar but without <code>break</code> (and the <code>if</code> and <code>else</code> clauses combined into one), but mine TLEs (times out), while this one (with a <code>break</code>) gets accepted with a good runtime.</p>\n<p>What is the significance of the <code>break</code> statement here?  Specifically, how does it speed things up?</p>\n<p>Thanks!</p>\n"},{"tags":["java","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1576129751,"post_id":59298402,"comment_id":104800456,"body_markdown":"*Entities which previously referenced the detached entity will continue to reference it.*  as per javadocs, so maybe `detach` earlier or also `detach` `newProfile`?","body":"<i>Entities which previously referenced the detached entity will continue to reference it.</i>  as per javadocs, so maybe <code>detach</code> earlier or also <code>detach</code> <code>newProfile</code>?"},{"owner":{"account_id":14248845,"reputation":444,"user_id":11435260,"display_name":"AbrA"},"score":0,"creation_date":1576130318,"post_id":59298402,"comment_id":104800615,"body_markdown":"ok. How to create a copy of an entity object and save it as a new record in the database?","body":"ok. How to create a copy of an entity object and save it as a new record in the database?"},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1576130393,"post_id":59298402,"comment_id":104800642,"body_markdown":"Maybe what you are doing is fine, just detach earlier","body":"Maybe what you are doing is fine, just detach earlier"},{"owner":{"account_id":14248845,"reputation":444,"user_id":11435260,"display_name":"AbrA"},"score":0,"creation_date":1576130785,"post_id":59298402,"comment_id":104800776,"body_markdown":"it&#39;s doesn&#39;t work. Caused by: org.hibernate.PersistentObjectException: detached entity passed to persist:","body":"it&#39;s doesn&#39;t work. Caused by: org.hibernate.PersistentObjectException: detached entity passed to persist:"},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1576131090,"post_id":59298402,"comment_id":104800864,"body_markdown":"Does `newProfile.setId(null);` actually work?","body":"Does <code>newProfile.setId(null);</code> actually work?"},{"owner":{"account_id":14248845,"reputation":444,"user_id":11435260,"display_name":"AbrA"},"score":0,"creation_date":1576132259,"post_id":59298402,"comment_id":104801227,"body_markdown":"it doesn’t affect in any way","body":"it doesn’t affect in any way"}],"answers":[{"tags":[],"owner":{"account_id":104440,"reputation":5525,"user_id":279236,"display_name":"jwenting"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1576133909,"creation_date":1576133909,"answer_id":59299250,"question_id":59298402,"body_markdown":"Most likely what you&#39;re doing with SerializationUtils causes your copy to have the same Hibernate/JPA proxy as the original object, and thus causes Hibernate to treat it AS the original (iow, no different from had you just done &quot;Profile newProfile = profile;&quot;\r\n\r\nAs I don&#39;t know what your SerializationUtils actually does and how it&#39;s implemented it&#39;s hard to tell but were I to write it I&#39;d take the Hibernate proxy into account in its implementation.\r\n\r\nBest way is to just create a new Entity from scratch and feed it the data fields from the original Entity minus the @Id field.\r\n\r\nYou could do this using a copy constructor for example (I know, it&#39;s a dirty word in Java).\r\n\r\nThat way you are guaranteed to have a completely fresh Entity that&#39;s not linked to anything in the persistence store, and thus a new record should always be created.\r\n\r\n\r\nFor one of our projects we wrote what we called the &quot;DeHibernator&quot; for cases like this (and more specifically to strip the Hibernate proxies from objects that needed to be transfered to memory restricted devices where we couldn&#39;t load Hibernate just to be able to transmit the proxies and have them work on those devices).\r\n","title":"how to save a copy entity JPA?","body":"<p>Most likely what you're doing with SerializationUtils causes your copy to have the same Hibernate/JPA proxy as the original object, and thus causes Hibernate to treat it AS the original (iow, no different from had you just done \"Profile newProfile = profile;\"</p>\n\n<p>As I don't know what your SerializationUtils actually does and how it's implemented it's hard to tell but were I to write it I'd take the Hibernate proxy into account in its implementation.</p>\n\n<p>Best way is to just create a new Entity from scratch and feed it the data fields from the original Entity minus the @Id field.</p>\n\n<p>You could do this using a copy constructor for example (I know, it's a dirty word in Java).</p>\n\n<p>That way you are guaranteed to have a completely fresh Entity that's not linked to anything in the persistence store, and thus a new record should always be created.</p>\n\n<p>For one of our projects we wrote what we called the \"DeHibernator\" for cases like this (and more specifically to strip the Hibernate proxies from objects that needed to be transfered to memory restricted devices where we couldn't load Hibernate just to be able to transmit the proxies and have them work on those devices).</p>\n"},{"tags":[],"owner":{"account_id":3561836,"reputation":1206,"user_id":3408806,"display_name":"nobjta_9x_tq"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655087329,"creation_date":1655087329,"answer_id":72597258,"question_id":59298402,"body_markdown":"Thanks @jwenting, I tested with step before and I success:\r\n 1. Select entity from DB\r\n 2. Convert it to Json (using JsonMapper.toJson)\r\n 3. Create new entity from json: JsonMapper.fromJson\r\n 4. save new entity\r\nLib convert is: https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind","title":"how to save a copy entity JPA?","body":"<p>Thanks @jwenting, I tested with step before and I success:</p>\n<ol>\n<li>Select entity from DB</li>\n<li>Convert it to Json (using JsonMapper.toJson)</li>\n<li>Create new entity from json: JsonMapper.fromJson</li>\n<li>save new entity\nLib convert is: <a href=\"https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind</a></li>\n</ol>\n"}],"owner":{"account_id":14248845,"reputation":444,"user_id":11435260,"display_name":"AbrA"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3754,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1655087329,"creation_date":1576129555,"question_id":59298402,"body_markdown":"I have an entity of profiles, I make a copy of this entity using SerializationUtils, put down some values ​​and want to save as new record to the database, but for some reason I’m updating the original record from which I made a copy, what I’m doing wrong?\r\n\r\n    Profile profile = profileRepository.findByProfileId(profileId).orElseThrow(() -&gt; {\r\n                                throw new NullPointerException(String.format(&quot;profile with  id=%s not found&quot;, profileId.toString()));\r\n                            });\r\n    Profile newProfile = SerializationUtils.clone(profile);\r\n    entityManager.detach(profile);\r\n    newProfile.setId(null);\r\n    newProfile.setProfileId(UUID.randomUUID());\r\n    newProfile.setSnils(profileWithValidationSuccessBySnils.getSnils());                            \r\n    entityManager.persist(newProfile);\r\n","title":"how to save a copy entity JPA?","body":"<p>I have an entity of profiles, I make a copy of this entity using SerializationUtils, put down some values ​​and want to save as new record to the database, but for some reason I’m updating the original record from which I made a copy, what I’m doing wrong?</p>\n\n<pre><code>Profile profile = profileRepository.findByProfileId(profileId).orElseThrow(() -&gt; {\n                            throw new NullPointerException(String.format(\"profile with  id=%s not found\", profileId.toString()));\n                        });\nProfile newProfile = SerializationUtils.clone(profile);\nentityManager.detach(profile);\nnewProfile.setId(null);\nnewProfile.setProfileId(UUID.randomUUID());\nnewProfile.setSnils(profileWithValidationSuccessBySnils.getSnils());                            \nentityManager.persist(newProfile);\n</code></pre>\n"},{"tags":["java","jar","java-me"],"comments":[{"owner":{"account_id":1324952,"reputation":5977,"user_id":1270000,"accept_rate":100,"display_name":"sorifiend"},"score":1,"creation_date":1655088061,"post_id":72597249,"comment_id":128239258,"body_markdown":"The base Java language is cross-platform, but apps were still coded for certain keypad inputs and often use a device-specific library or device-specific features, so the simple answer is no, you will most likely need an emulator for most old phone games. Note also that old phone apps would have been built in Java 6 or earlier and are no longer supported by the latest versions of Java, so you&#39;ll need to make sure you use an older JRE to run them.","body":"The base Java language is cross-platform, but apps were still coded for certain keypad inputs and often use a device-specific library or device-specific features, so the simple answer is no, you will most likely need an emulator for most old phone games. Note also that old phone apps would have been built in Java 6 or earlier and are no longer supported by the latest versions of Java, so you&#39;ll need to make sure you use an older JRE to run them."},{"owner":{"account_id":3415144,"reputation":23576,"user_id":2864275,"display_name":"Iłya Bursov"},"score":2,"creation_date":1655088111,"post_id":72597249,"comment_id":128239265,"body_markdown":"I&#39;d start with https://www.electricmonk.nl/log/2008/02/14/run-mobile-midlets-on-your-pc/","body":"I&#39;d start with <a href=\"https://www.electricmonk.nl/log/2008/02/14/run-mobile-midlets-on-your-pc/\" rel=\"nofollow noreferrer\">electricmonk.nl/log/2008/02/14/run-mobile-midlets-on-your-pc</a>"}],"owner":{"account_id":15709749,"reputation":197,"user_id":11335534,"display_name":"Shriram"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":174,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1655087184,"creation_date":1655087184,"question_id":72597249,"body_markdown":"Is it possible to run old JAR games, the ones that used to run on nokia feature phones, natively on desktop without an emulator?\r\n\r\nI figured it should be able to run on any device that has JRE but I&#39;m not sure.","title":"Running JAR games natively on desktop","body":"<p>Is it possible to run old JAR games, the ones that used to run on nokia feature phones, natively on desktop without an emulator?</p>\n<p>I figured it should be able to run on any device that has JRE but I'm not sure.</p>\n"},{"tags":["java","spring","caching","guava"],"comments":[{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1487702362,"post_id":42364103,"comment_id":71899909,"body_markdown":"Measuring memory consumption of any kind is really difficult (and likely to be slow) in Java.  Cache doesn&#39;t make the effort.","body":"Measuring memory consumption of any kind is really difficult (and likely to be slow) in Java.  Cache doesn&#39;t make the effort."}],"answers":[{"tags":[],"owner":{"account_id":2357514,"reputation":1444,"user_id":3890673,"accept_rate":55,"display_name":"crusy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1487678568,"creation_date":1487678568,"answer_id":42366818,"question_id":42364103,"body_markdown":"Docs say [maximumSize(long)][1]\r\n\r\n&gt; Specifies the maximum number of entries the cache may contain.\r\n\r\nSpecifying 500MB should be possible with [maximumWeight(long)][2] and a custom [Weigher][3], as\r\n\r\n&gt; There is no unit for entry weights; rather they are simply relative to each other.\r\n\r\n\r\n  [1]: http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/cache/CacheBuilder.html#maximumSize-long-\r\n  [2]: http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/cache/CacheBuilder.html#maximumWeight-long-\r\n  [3]: http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/cache/Weigher.html","title":"Guava maximumSize or maximumWeight for limiting cache memory size","body":"<p>Docs say <a href=\"http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/cache/CacheBuilder.html#maximumSize-long-\" rel=\"nofollow noreferrer\">maximumSize(long)</a></p>\n\n<blockquote>\n  <p>Specifies the maximum number of entries the cache may contain.</p>\n</blockquote>\n\n<p>Specifying 500MB should be possible with <a href=\"http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/cache/CacheBuilder.html#maximumWeight-long-\" rel=\"nofollow noreferrer\">maximumWeight(long)</a> and a custom <a href=\"http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/cache/Weigher.html\" rel=\"nofollow noreferrer\">Weigher</a>, as</p>\n\n<blockquote>\n  <p>There is no unit for entry weights; rather they are simply relative to each other.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":16704525,"reputation":576,"user_id":12073333,"display_name":"wongoo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655087131,"creation_date":1655087131,"answer_id":72597237,"question_id":42364103,"body_markdown":"- the `count` of entries can&#39;t exceed `maximumSize`, otherwise evict by LRU.\r\n- The `sum` of weight(return by `weigher`) of all entries can&#39;t exceed `maximumWeight`, otherwise evict by LRU.\r\n- Can&#39;t use `maximumSize` and `maximumWeight` at one time.","title":"Guava maximumSize or maximumWeight for limiting cache memory size","body":"<ul>\n<li>the <code>count</code> of entries can't exceed <code>maximumSize</code>, otherwise evict by LRU.</li>\n<li>The <code>sum</code> of weight(return by <code>weigher</code>) of all entries can't exceed <code>maximumWeight</code>, otherwise evict by LRU.</li>\n<li>Can't use <code>maximumSize</code> and <code>maximumWeight</code> at one time.</li>\n</ul>\n"}],"owner":{"account_id":9171353,"reputation":296,"user_id":6818740,"accept_rate":25,"display_name":"sreedhar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2783,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1655087131,"creation_date":1487671088,"question_id":42364103,"body_markdown":"I&#39;m trying to figure out what the number that you specify in Guava CacheBuilder maximumSize() and maximumweight(),weigher represent.\r\n\r\nSay I&#39;ve got something like this in my code,\r\n\r\n    Cache&lt;String, Object&gt; programCache = CacheBuilder.newBuilder()\r\n    .maximumSize(1000)\r\n    .build();\r\nDoes the 1000 that I specified as the max size mean that I can have a thousand different entries in the cache before it starts kicking out the LRU (no matter what size the object might be)? If this is the case, is there a limit to the size of the object?\r\n\r\nOr does that 1000 mean, that I have a 1000mb(is MB correct?) to work with and I can have as many of the Objects in the cache as I want up to 1000mb before it starts kicking out the LRU?\r\n\r\nThen what exactly maximumweight is?\r\n\r\nAppreciated if some good configuration is provided for limiting Guava cache memory of 500MB.","title":"Guava maximumSize or maximumWeight for limiting cache memory size","body":"<p>I'm trying to figure out what the number that you specify in Guava CacheBuilder maximumSize() and maximumweight(),weigher represent.</p>\n\n<p>Say I've got something like this in my code,</p>\n\n<pre><code>Cache&lt;String, Object&gt; programCache = CacheBuilder.newBuilder()\n.maximumSize(1000)\n.build();\n</code></pre>\n\n<p>Does the 1000 that I specified as the max size mean that I can have a thousand different entries in the cache before it starts kicking out the LRU (no matter what size the object might be)? If this is the case, is there a limit to the size of the object?</p>\n\n<p>Or does that 1000 mean, that I have a 1000mb(is MB correct?) to work with and I can have as many of the Objects in the cache as I want up to 1000mb before it starts kicking out the LRU?</p>\n\n<p>Then what exactly maximumweight is?</p>\n\n<p>Appreciated if some good configuration is provided for limiting Guava cache memory of 500MB.</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":3407414,"reputation":124,"user_id":2858162,"accept_rate":53,"display_name":"matttm"},"score":0,"creation_date":1655055812,"post_id":72594490,"comment_id":128234538,"body_markdown":"What endpoint are you calling? a 404 makes it sound like what you are calliing is different than whats mapped","body":"What endpoint are you calling? a 404 makes it sound like what you are calliing is different than whats mapped"},{"owner":{"account_id":23544429,"reputation":129,"user_id":17588101,"display_name":"Usama Hameed"},"score":0,"creation_date":1655055850,"post_id":72594490,"comment_id":128234549,"body_markdown":"localhost:800/home","body":"localhost:800/home"},{"owner":{"account_id":19766574,"reputation":265,"user_id":14474468,"display_name":"Amine Safi"},"score":0,"creation_date":1655056122,"post_id":72594490,"comment_id":128234586,"body_markdown":"Have you checked the default port?\nOtherwise could you please provide us the package hierarchy of your project?","body":"Have you checked the default port? Otherwise could you please provide us the package hierarchy of your project?"},{"owner":{"account_id":23544429,"reputation":129,"user_id":17588101,"display_name":"Usama Hameed"},"score":0,"creation_date":1655056277,"post_id":72594490,"comment_id":128234614,"body_markdown":"I have added it in the question","body":"I have added it in the question"},{"owner":{"account_id":25121309,"reputation":1105,"user_id":18969611,"display_name":"void void"},"score":0,"creation_date":1655056588,"post_id":72594490,"comment_id":128234678,"body_markdown":"Your controller is not being picked up by component scan probably because of where you placed it, You will need to explicitly provide it with the @ComponentScan annotation.","body":"Your controller is not being picked up by component scan probably because of where you placed it, You will need to explicitly provide it with the @ComponentScan annotation."},{"owner":{"account_id":23544429,"reputation":129,"user_id":17588101,"display_name":"Usama Hameed"},"score":0,"creation_date":1655056628,"post_id":72594490,"comment_id":128234688,"body_markdown":"How can I do that?","body":"How can I do that?"},{"owner":{"account_id":19766574,"reputation":265,"user_id":14474468,"display_name":"Amine Safi"},"score":2,"creation_date":1655056757,"post_id":72594490,"comment_id":128234722,"body_markdown":"Your controller should be under this package, com.example.demo\nYou can simply create a new package named controllers and place your controller there, the hierarchy will be =&gt; com.example.demo.controllers\nThis way, your controller will be picked up by spring IoC Container after scanning","body":"Your controller should be under this package, com.example.demo You can simply create a new package named controllers and place your controller there, the hierarchy will be =&gt; com.example.demo.controllers This way, your controller will be picked up by spring IoC Container after scanning"}],"answers":[{"tags":[],"owner":{"account_id":10284555,"reputation":56,"user_id":11850188,"display_name":"Damee"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655086478,"creation_date":1655079576,"answer_id":72596762,"question_id":72594490,"body_markdown":"If you add @ComponentScan({&quot;student&quot;}) annotation on DemoApplication class it should work. You can also create your packages such as controller, service, repository ... under com.example.demo, then you don&#39;t have to add additional annotations for component scanning.\r\n\r\nFollow this project structuring advice: https://docs.spring.io/spring-boot/docs/2.0.x/reference/html/using-boot-structuring-your-code.html","title":"Keep getting 404 in spring boot endpoint","body":"<p>If you add @ComponentScan({&quot;student&quot;}) annotation on DemoApplication class it should work. You can also create your packages such as controller, service, repository ... under com.example.demo, then you don't have to add additional annotations for component scanning.</p>\n<p>Follow this project structuring advice: <a href=\"https://docs.spring.io/spring-boot/docs/2.0.x/reference/html/using-boot-structuring-your-code.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/2.0.x/reference/html/using-boot-structuring-your-code.html</a></p>\n"}],"owner":{"account_id":23544429,"reputation":129,"user_id":17588101,"display_name":"Usama Hameed"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1655086478,"creation_date":1655055299,"question_id":72594490,"body_markdown":"I am learning spring boot, I made a simple GET endpoint but whenever I request on that endpoint I keep getting 404.\r\n\r\nBelow is my code:\r\nStudent.Controller.java\r\n```\r\npackage student;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\nimport java.time.LocalDate;\r\nimport java.time.Month;\r\nimport java.util.List;\r\n\r\n@RestController\r\npublic class StudentController {\r\n\r\n    @GetMapping(&quot;/home&quot;)\r\n    public String home(){\r\n        return &quot;This is String&quot;;\r\n    }\r\n}\r\n\r\n```\r\n\r\nProject Structure:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/L4cMw.png","title":"Keep getting 404 in spring boot endpoint","body":"<p>I am learning spring boot, I made a simple GET endpoint but whenever I request on that endpoint I keep getting 404.</p>\n<p>Below is my code:\nStudent.Controller.java</p>\n<pre><code>package student;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport java.time.LocalDate;\nimport java.time.Month;\nimport java.util.List;\n\n@RestController\npublic class StudentController {\n\n    @GetMapping(&quot;/home&quot;)\n    public String home(){\n        return &quot;This is String&quot;;\n    }\n}\n\n</code></pre>\n<p>Project Structure:\n<a href=\"https://i.stack.imgur.com/L4cMw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/L4cMw.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","junit","mockito"],"comments":[{"owner":{"account_id":11580831,"reputation":2836,"user_id":8484783,"display_name":"Marc"},"score":0,"creation_date":1595993957,"post_id":63145460,"comment_id":111662948,"body_markdown":"Your test class looks fine. You can even remove the annotation as long as you have `MockitoAnnotations.initMocks(this)`. Can you share the stack trace?","body":"Your test class looks fine. You can even remove the annotation as long as you have <code>MockitoAnnotations.initMocks(this)</code>. Can you share the stack trace?"},{"owner":{"account_id":6349534,"reputation":2813,"user_id":4929038,"display_name":"kidney"},"score":0,"creation_date":1596007416,"post_id":63145460,"comment_id":111667101,"body_markdown":"Could you show all imports and the exception stacktrace?","body":"Could you show all imports and the exception stacktrace?"},{"owner":{"account_id":268691,"reputation":832,"user_id":557576,"accept_rate":67,"display_name":"Shishir Pandey"},"score":0,"creation_date":1596027714,"post_id":63145460,"comment_id":111677244,"body_markdown":"@kidney, added imports and stacktrace.","body":"@kidney, added imports and stacktrace."},{"owner":{"account_id":6349534,"reputation":2813,"user_id":4929038,"display_name":"kidney"},"score":1,"creation_date":1596109424,"post_id":63145460,"comment_id":111709137,"body_markdown":"Have you tried without the `RunWith` annotation? You shouldn&#39;t really need it, since you are using the `MockitoAnnotations.init` method to init mocks. Also, Mockito version could play a role... Your code works fine on my machine with Mockito 2.28.2, JDK 8 and 12 and Junit 4.12...","body":"Have you tried without the <code>RunWith</code> annotation? You shouldn&#39;t really need it, since you are using the <code>MockitoAnnotations.init</code> method to init mocks. Also, Mockito version could play a role... Your code works fine on my machine with Mockito 2.28.2, JDK 8 and 12 and Junit 4.12..."}],"answers":[{"tags":[],"owner":{"account_id":25475437,"reputation":21,"user_id":19272802,"display_name":"eyoatam erkihun"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1655085773,"creation_date":1655085773,"answer_id":72597123,"question_id":63145460,"body_markdown":"I Was experiencing the same issue. Fixed it by changing the dependency in the po.xml as follows. At first, it was mokito-all. changed it to mokito-core.\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n      &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\r\n      &lt;version&gt;4.0.0&lt;/version&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;","title":"ExceptionInInitializerError with Mockito","body":"<p>I Was experiencing the same issue. Fixed it by changing the dependency in the po.xml as follows. At first, it was mokito-all. changed it to mokito-core.</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n  &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\n  &lt;version&gt;4.0.0&lt;/version&gt;\n  &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":268691,"reputation":832,"user_id":557576,"accept_rate":67,"display_name":"Shishir Pandey"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5877,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1655085773,"creation_date":1595989692,"question_id":63145460,"body_markdown":"I have seen a number of similar questions, but none of them seem to answer this. I keep getting `ExceptionInInitializerError` no matter what I try do:\r\n\r\n```java\r\nimport static org.junit.Assert.fail;\r\n\r\nimport org.junit.Before;\r\nimport org.junit.Test;\r\nimport org.junit.runner.RunWith;\r\nimport org.mockito.Mock;\r\n\r\nimport org.mockito.MockitoAnnotations;\r\nimport org.mockito.runners.MockitoJUnitRunner;\r\nimport org.springframework.web.client.RestTemplate;    \r\n```\r\n    import org.springframework.web.client.RestTemplate;\r\n\r\n\r\n    @RunWith(MockitoJUnitRunner.class)\r\n    public class ClassTest {\r\n\t\r\n\t    @Mock\r\n\t    private RestTemplate mockedRestTemplate;\r\n\t\r\n\t\r\n\t    @Before\r\n\t    public void setup() {\r\n\t\t    MockitoAnnotations.initMocks(this);\r\n\t    }\r\n\t\r\n\t    @Test\r\n\t    public void test() {\t\r\n\t\t    fail(&quot;Not IMMM&quot;);\r\n\t    }\r\n\r\n    }\r\n\r\n\r\nI have also tried `@RunWith(SpringRunner.class)` but still the same error.\r\n\r\nThe stacktrace is as shown:\r\n```\r\njava.lang.ExceptionInInitializerError\r\n\tat org.mockito.internal.exceptions.stacktrace.ConditionalStackTraceFilter.&lt;init&gt;(ConditionalStackTraceFilter.java:17)\r\n\tat org.mockito.exceptions.base.MockitoException.filterStackTrace(MockitoException.java:41)\r\n\tat org.mockito.exceptions.base.MockitoException.&lt;init&gt;(MockitoException.java:30)\r\n\tat org.mockito.exceptions.misusing.MockitoConfigurationException.&lt;init&gt;(MockitoConfigurationException.java:18)\r\n\tat org.mockito.internal.configuration.plugins.PluginLoader.loadImpl(PluginLoader.java:66)\r\n\tat org.mockito.internal.configuration.plugins.PluginLoader.loadPlugin(PluginLoader.java:24)\r\n\tat org.mockito.internal.configuration.plugins.PluginRegistry.&lt;init&gt;(PluginRegistry.java:12)\r\n\tat org.mockito.internal.configuration.plugins.Plugins.&lt;clinit&gt;(Plugins.java:11)\r\n\tat org.mockito.internal.util.MockUtil.&lt;clinit&gt;(MockUtil.java:24)\r\n\tat org.mockito.internal.stubbing.defaultanswers.ReturnsEmptyValues.&lt;init&gt;(ReturnsEmptyValues.java:58)\r\n\tat org.mockito.internal.stubbing.defaultanswers.ReturnsMoreEmptyValues.&lt;init&gt;(ReturnsMoreEmptyValues.java:51)\r\n\tat org.mockito.internal.stubbing.defaultanswers.ReturnsSmartNulls.&lt;init&gt;(ReturnsSmartNulls.java:40)\r\n\tat org.mockito.Answers.&lt;clinit&gt;(Answers.java:43)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat java.lang.Class.getEnumConstantsShared(Class.java:3320)\r\n\tat java.lang.Class.enumConstantDirectory(Class.java:3341)\r\n\tat java.lang.Enum.valueOf(Enum.java:232)\r\n\tat sun.reflect.annotation.AnnotationParser.parseEnumValue(AnnotationParser.java:483)\r\n\tat sun.reflect.annotation.AnnotationParser.parseMemberValue(AnnotationParser.java:347)\r\n\tat java.lang.reflect.Method.getDefaultValue(Method.java:606)\r\n\tat sun.reflect.annotation.AnnotationType.&lt;init&gt;(AnnotationType.java:132)\r\n\tat sun.reflect.annotation.AnnotationType.getInstance(AnnotationType.java:85)\r\n\tat sun.reflect.annotation.AnnotationParser.parseAnnotation2(AnnotationParser.java:266)\r\n\tat sun.reflect.annotation.AnnotationParser.parseAnnotations2(AnnotationParser.java:120)\r\n\tat sun.reflect.annotation.AnnotationParser.parseAnnotations(AnnotationParser.java:72)\r\n\tat java.lang.reflect.Field.declaredAnnotations(Field.java:1150)\r\n\tat java.lang.reflect.Field.declaredAnnotations(Field.java:1148)\r\n\tat java.lang.reflect.Field.getDeclaredAnnotations(Field.java:1139)\r\n\tat java.lang.reflect.AccessibleObject.getAnnotations(AccessibleObject.java:207)\r\n\tat org.junit.runners.model.FrameworkField.getAnnotations(FrameworkField.java:31)\r\n\tat org.junit.runners.model.TestClass.addToAnnotationLists(TestClass.java:84)\r\n\tat org.junit.runners.model.TestClass.scanAnnotatedMembers(TestClass.java:71)\r\n\tat org.junit.runners.model.TestClass.&lt;init&gt;(TestClass.java:57)\r\n\tat org.junit.runners.ParentRunner.createTestClass(ParentRunner.java:88)\r\n\tat org.junit.runners.ParentRunner.&lt;init&gt;(ParentRunner.java:83)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.&lt;init&gt;(BlockJUnit4ClassRunner.java:65)\r\n\tat org.mockito.internal.runners.JUnit45AndHigherRunnerImpl$1.&lt;init&gt;(JUnit45AndHigherRunnerImpl.java:23)\r\n\tat org.mockito.internal.runners.JUnit45AndHigherRunnerImpl.&lt;init&gt;(JUnit45AndHigherRunnerImpl.java:23)\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n\tat java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n\tat org.mockito.internal.runners.util.RunnerProvider.newInstance(RunnerProvider.java:39)\r\n\tat org.mockito.internal.runners.RunnerFactory.create(RunnerFactory.java:28)\r\n\tat org.mockito.runners.MockitoJUnitRunner.&lt;init&gt;(MockitoJUnitRunner.java:57)\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n\tat java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n\tat org.junit.internal.builders.AnnotatedBuilder.buildRunner(AnnotatedBuilder.java:104)\r\n\tat org.junit.internal.builders.AnnotatedBuilder.runnerForClass(AnnotatedBuilder.java:86)\r\n\tat org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:59)\r\n\tat org.junit.internal.builders.AllDefaultPossibilitiesBuilder.runnerForClass(AllDefaultPossibilitiesBuilder.java:26)\r\n\tat org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:59)\r\n\tat org.junit.internal.requests.ClassRequest.getRunner(ClassRequest.java:33)\r\n\tat org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.createUnfilteredTest(JUnit4TestLoader.java:90)\r\n\tat org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.createTest(JUnit4TestLoader.java:76)\r\n\tat org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.loadTests(JUnit4TestLoader.java:49)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:526)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:770)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:464)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:210)\r\nCaused by: java.lang.NullPointerException\r\n\tat org.mockito.internal.configuration.plugins.Plugins.getStackTraceCleanerProvider(Plugins.java:17)\r\n\tat org.mockito.internal.exceptions.stacktrace.StackTraceFilter.&lt;clinit&gt;(StackTraceFilter.java:21)\r\n\t... 65 more\r\n```\r\n","title":"ExceptionInInitializerError with Mockito","body":"<p>I have seen a number of similar questions, but none of them seem to answer this. I keep getting <code>ExceptionInInitializerError</code> no matter what I try do:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import static org.junit.Assert.fail;\n\nimport org.junit.Before;\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.mockito.Mock;\n\nimport org.mockito.MockitoAnnotations;\nimport org.mockito.runners.MockitoJUnitRunner;\nimport org.springframework.web.client.RestTemplate;    \n</code></pre>\n<pre><code>import org.springframework.web.client.RestTemplate;\n\n\n@RunWith(MockitoJUnitRunner.class)\npublic class ClassTest {\n\n    @Mock\n    private RestTemplate mockedRestTemplate;\n\n\n    @Before\n    public void setup() {\n        MockitoAnnotations.initMocks(this);\n    }\n\n    @Test\n    public void test() {    \n        fail(&quot;Not IMMM&quot;);\n    }\n\n}\n</code></pre>\n<p>I have also tried <code>@RunWith(SpringRunner.class)</code> but still the same error.</p>\n<p>The stacktrace is as shown:</p>\n<pre><code>java.lang.ExceptionInInitializerError\n    at org.mockito.internal.exceptions.stacktrace.ConditionalStackTraceFilter.&lt;init&gt;(ConditionalStackTraceFilter.java:17)\n    at org.mockito.exceptions.base.MockitoException.filterStackTrace(MockitoException.java:41)\n    at org.mockito.exceptions.base.MockitoException.&lt;init&gt;(MockitoException.java:30)\n    at org.mockito.exceptions.misusing.MockitoConfigurationException.&lt;init&gt;(MockitoConfigurationException.java:18)\n    at org.mockito.internal.configuration.plugins.PluginLoader.loadImpl(PluginLoader.java:66)\n    at org.mockito.internal.configuration.plugins.PluginLoader.loadPlugin(PluginLoader.java:24)\n    at org.mockito.internal.configuration.plugins.PluginRegistry.&lt;init&gt;(PluginRegistry.java:12)\n    at org.mockito.internal.configuration.plugins.Plugins.&lt;clinit&gt;(Plugins.java:11)\n    at org.mockito.internal.util.MockUtil.&lt;clinit&gt;(MockUtil.java:24)\n    at org.mockito.internal.stubbing.defaultanswers.ReturnsEmptyValues.&lt;init&gt;(ReturnsEmptyValues.java:58)\n    at org.mockito.internal.stubbing.defaultanswers.ReturnsMoreEmptyValues.&lt;init&gt;(ReturnsMoreEmptyValues.java:51)\n    at org.mockito.internal.stubbing.defaultanswers.ReturnsSmartNulls.&lt;init&gt;(ReturnsSmartNulls.java:40)\n    at org.mockito.Answers.&lt;clinit&gt;(Answers.java:43)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at java.lang.Class.getEnumConstantsShared(Class.java:3320)\n    at java.lang.Class.enumConstantDirectory(Class.java:3341)\n    at java.lang.Enum.valueOf(Enum.java:232)\n    at sun.reflect.annotation.AnnotationParser.parseEnumValue(AnnotationParser.java:483)\n    at sun.reflect.annotation.AnnotationParser.parseMemberValue(AnnotationParser.java:347)\n    at java.lang.reflect.Method.getDefaultValue(Method.java:606)\n    at sun.reflect.annotation.AnnotationType.&lt;init&gt;(AnnotationType.java:132)\n    at sun.reflect.annotation.AnnotationType.getInstance(AnnotationType.java:85)\n    at sun.reflect.annotation.AnnotationParser.parseAnnotation2(AnnotationParser.java:266)\n    at sun.reflect.annotation.AnnotationParser.parseAnnotations2(AnnotationParser.java:120)\n    at sun.reflect.annotation.AnnotationParser.parseAnnotations(AnnotationParser.java:72)\n    at java.lang.reflect.Field.declaredAnnotations(Field.java:1150)\n    at java.lang.reflect.Field.declaredAnnotations(Field.java:1148)\n    at java.lang.reflect.Field.getDeclaredAnnotations(Field.java:1139)\n    at java.lang.reflect.AccessibleObject.getAnnotations(AccessibleObject.java:207)\n    at org.junit.runners.model.FrameworkField.getAnnotations(FrameworkField.java:31)\n    at org.junit.runners.model.TestClass.addToAnnotationLists(TestClass.java:84)\n    at org.junit.runners.model.TestClass.scanAnnotatedMembers(TestClass.java:71)\n    at org.junit.runners.model.TestClass.&lt;init&gt;(TestClass.java:57)\n    at org.junit.runners.ParentRunner.createTestClass(ParentRunner.java:88)\n    at org.junit.runners.ParentRunner.&lt;init&gt;(ParentRunner.java:83)\n    at org.junit.runners.BlockJUnit4ClassRunner.&lt;init&gt;(BlockJUnit4ClassRunner.java:65)\n    at org.mockito.internal.runners.JUnit45AndHigherRunnerImpl$1.&lt;init&gt;(JUnit45AndHigherRunnerImpl.java:23)\n    at org.mockito.internal.runners.JUnit45AndHigherRunnerImpl.&lt;init&gt;(JUnit45AndHigherRunnerImpl.java:23)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\n    at org.mockito.internal.runners.util.RunnerProvider.newInstance(RunnerProvider.java:39)\n    at org.mockito.internal.runners.RunnerFactory.create(RunnerFactory.java:28)\n    at org.mockito.runners.MockitoJUnitRunner.&lt;init&gt;(MockitoJUnitRunner.java:57)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\n    at org.junit.internal.builders.AnnotatedBuilder.buildRunner(AnnotatedBuilder.java:104)\n    at org.junit.internal.builders.AnnotatedBuilder.runnerForClass(AnnotatedBuilder.java:86)\n    at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:59)\n    at org.junit.internal.builders.AllDefaultPossibilitiesBuilder.runnerForClass(AllDefaultPossibilitiesBuilder.java:26)\n    at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:59)\n    at org.junit.internal.requests.ClassRequest.getRunner(ClassRequest.java:33)\n    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.createUnfilteredTest(JUnit4TestLoader.java:90)\n    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.createTest(JUnit4TestLoader.java:76)\n    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.loadTests(JUnit4TestLoader.java:49)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:526)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:770)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:464)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:210)\nCaused by: java.lang.NullPointerException\n    at org.mockito.internal.configuration.plugins.Plugins.getStackTraceCleanerProvider(Plugins.java:17)\n    at org.mockito.internal.exceptions.stacktrace.StackTraceFilter.&lt;clinit&gt;(StackTraceFilter.java:21)\n    ... 65 more\n</code></pre>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":21009405,"reputation":654,"user_id":15438360,"display_name":"Muhammad Khuzaima Umair"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655081920,"creation_date":1655081920,"answer_id":72596876,"question_id":72596599,"body_markdown":"You are concatenating the directory path and the filename without the `&quot;/&quot;`. Change `FileReader fr = new FileReader(filePath+inputFile);` to:\r\n```java\r\nFileReader fr = new FileReader(filePath + &quot;/&quot; + inputFile);\r\n```\r\nAlternatively, you can do:\r\n```java\r\nFileReader fr = new FileReader(new File(filePath, inputFile));\r\n```\r\n","title":"Having trouble with file path in BlueJ","body":"<p>You are concatenating the directory path and the filename without the <code>&quot;/&quot;</code>. Change <code>FileReader fr = new FileReader(filePath+inputFile);</code> to:</p>\n<pre class=\"lang-java prettyprint-override\"><code>FileReader fr = new FileReader(filePath + &quot;/&quot; + inputFile);\n</code></pre>\n<p>Alternatively, you can do:</p>\n<pre class=\"lang-java prettyprint-override\"><code>FileReader fr = new FileReader(new File(filePath, inputFile));\n</code></pre>\n"}],"owner":{"account_id":23923850,"reputation":1,"user_id":17919229,"display_name":"Pouria"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":279,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1655081920,"creation_date":1655077062,"question_id":72596599,"body_markdown":"Im trying to create an application that reads names from an input file and writes the number of duplicate names on an output file. Heres my code: \r\n\r\n    import java.io.BufferedReader;\r\n    import java.io.FileNotFoundException;\r\n    import java.io.FileReader;\r\n    import java.io.FileWriter;\r\n    import java.io.IOException;\r\n    import java.util.ArrayList;\r\n    import java.util.HashSet;\r\n\r\n    public class GenerateDuplicateBookTitle {\r\n    \r\n    public static void main(String[] args) {\r\n        \r\n        // declare and intialize path where the input file is stored\r\n        String filePath = &quot;C:/Users/User/OneDrive/Desktop/JavaProgram&quot;;\r\n        \r\n        // intialize input file name and output file name\r\n        String inputFile = &quot;bookTitles.inp&quot;;\r\n        String ouputFile = &quot;duplicateTitles.inp&quot;;\r\n        \r\n        // create HashSet which does not store duplicate values\r\n        HashSet&lt;String&gt; bookTitles = new HashSet&lt;&gt;();\r\n        \r\n        \r\n        // create arrayList which stores only duplicate bok titles\r\n        ArrayList&lt;String&gt; duplicateBookTitles = new ArrayList&lt;&gt;();\r\n        \r\n        \r\n        // now read the book titles from the bookTitles.inp\r\n        try{\r\n            \r\n            // create an object Of fileReader class with the specified filename with the path\r\n            FileReader fr = new FileReader(filePath+inputFile);\r\n            \r\n            // create an object of BufferedReader class for reading line from inp file\r\n            BufferedReader br = new BufferedReader(fr);\r\n            \r\n            String getLine = &quot;&quot;;\r\n            \r\n            System.out.println(&quot;-------------- Fetch data from the file ---------------\\n&quot;);\r\n            while((getLine = br.readLine()) != null){\r\n                \r\n                // add book title to the bookTitles arrayList\r\n                if(!bookTitles.contains(getLine)){\r\n                    \r\n                    // diplay to the console\r\n                    System.out.println(getLine+&quot; read successfully from &quot;+filePath+inputFile);\r\n                \r\n                    // add to the hash set\r\n                    bookTitles.add(getLine);\r\n                    \r\n                }else{\r\n                    \r\n                    \r\n                    duplicateBookTitles.add(getLine);\r\n                }\r\n                    \r\n            }\r\n            \r\n            // display duplicate book title into the console\r\n            System.out.print(&quot;Duplicate book titles fetched from &quot;+filePath+inputFile+&quot; : &quot;);\r\n            System.out.println(duplicateBookTitles.toString());\r\n            \r\n            // now store it into the &quot;duplicateTitles.txt&quot; file\r\n            \r\n            // create an object of FIleWriter class for writing data into the txt file\r\n            FileWriter write = new FileWriter(filePath+ouputFile);\r\n            \r\n            System.out.println(&quot;\\n------------ Write Duplicate BookTitles ----------------\\n&quot;);\r\n            \r\n            // now get each element from the duplicateBookTitles arrayList\r\n            for(String duplicateBookTitle : duplicateBookTitles){\r\n                \r\n                // write into the &quot;duplicateTitles.txt&quot; file\r\n                write.write(duplicateBookTitle+&quot;\\n&quot;);\r\n                \r\n                // print on console\r\n                System.out.println(duplicateBookTitle+&quot; write succssfully into the \r\n                &quot;+filePath+ouputFile);\r\n            }\r\n            \r\n            // close the writer\r\n            write.close();\r\n            fr.close();\r\n            br.close();\r\n            \r\n            \r\n        }catch(FileNotFoundException e){\r\n            \r\n            System.out.println(&quot;FILE &#39;&quot;+inputFile+&quot;&#39; IS NOT FOUND in &quot;+filePath);\r\n            \r\n        } catch (IOException ex) {\r\n            System.out.println(ex);\r\n        }\r\n        \r\n        \r\n    }\r\n    \r\nI keep getting an error message that the input file can&#39;t be found even though I am typing in the exact address of the file. The file name and format are correct and its in the same folder as the BlueJ program. What am I doing wrong here? ","title":"Having trouble with file path in BlueJ","body":"<p>Im trying to create an application that reads names from an input file and writes the number of duplicate names on an output file. Heres my code:</p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.FileNotFoundException;\nimport java.io.FileReader;\nimport java.io.FileWriter;\nimport java.io.IOException;\nimport java.util.ArrayList;\nimport java.util.HashSet;\n\npublic class GenerateDuplicateBookTitle {\n\npublic static void main(String[] args) {\n    \n    // declare and intialize path where the input file is stored\n    String filePath = &quot;C:/Users/User/OneDrive/Desktop/JavaProgram&quot;;\n    \n    // intialize input file name and output file name\n    String inputFile = &quot;bookTitles.inp&quot;;\n    String ouputFile = &quot;duplicateTitles.inp&quot;;\n    \n    // create HashSet which does not store duplicate values\n    HashSet&lt;String&gt; bookTitles = new HashSet&lt;&gt;();\n    \n    \n    // create arrayList which stores only duplicate bok titles\n    ArrayList&lt;String&gt; duplicateBookTitles = new ArrayList&lt;&gt;();\n    \n    \n    // now read the book titles from the bookTitles.inp\n    try{\n        \n        // create an object Of fileReader class with the specified filename with the path\n        FileReader fr = new FileReader(filePath+inputFile);\n        \n        // create an object of BufferedReader class for reading line from inp file\n        BufferedReader br = new BufferedReader(fr);\n        \n        String getLine = &quot;&quot;;\n        \n        System.out.println(&quot;-------------- Fetch data from the file ---------------\\n&quot;);\n        while((getLine = br.readLine()) != null){\n            \n            // add book title to the bookTitles arrayList\n            if(!bookTitles.contains(getLine)){\n                \n                // diplay to the console\n                System.out.println(getLine+&quot; read successfully from &quot;+filePath+inputFile);\n            \n                // add to the hash set\n                bookTitles.add(getLine);\n                \n            }else{\n                \n                \n                duplicateBookTitles.add(getLine);\n            }\n                \n        }\n        \n        // display duplicate book title into the console\n        System.out.print(&quot;Duplicate book titles fetched from &quot;+filePath+inputFile+&quot; : &quot;);\n        System.out.println(duplicateBookTitles.toString());\n        \n        // now store it into the &quot;duplicateTitles.txt&quot; file\n        \n        // create an object of FIleWriter class for writing data into the txt file\n        FileWriter write = new FileWriter(filePath+ouputFile);\n        \n        System.out.println(&quot;\\n------------ Write Duplicate BookTitles ----------------\\n&quot;);\n        \n        // now get each element from the duplicateBookTitles arrayList\n        for(String duplicateBookTitle : duplicateBookTitles){\n            \n            // write into the &quot;duplicateTitles.txt&quot; file\n            write.write(duplicateBookTitle+&quot;\\n&quot;);\n            \n            // print on console\n            System.out.println(duplicateBookTitle+&quot; write succssfully into the \n            &quot;+filePath+ouputFile);\n        }\n        \n        // close the writer\n        write.close();\n        fr.close();\n        br.close();\n        \n        \n    }catch(FileNotFoundException e){\n        \n        System.out.println(&quot;FILE '&quot;+inputFile+&quot;' IS NOT FOUND in &quot;+filePath);\n        \n    } catch (IOException ex) {\n        System.out.println(ex);\n    }\n    \n    \n}\n</code></pre>\n<p>I keep getting an error message that the input file can't be found even though I am typing in the exact address of the file. The file name and format are correct and its in the same folder as the BlueJ program. What am I doing wrong here?</p>\n"},{"tags":["java","png","jpeg","bmp","ppm"],"comments":[{"owner":{"account_id":1324952,"reputation":5977,"user_id":1270000,"accept_rate":100,"display_name":"sorifiend"},"score":0,"creation_date":1655082240,"post_id":72596842,"comment_id":128238554,"body_markdown":"How did you obtain the pixel values from the ppm file, and how was it converted? The software used to open/view the ppm file may simply have a filter on it that is not representative of real-world values. There was also an issue in the past (not sure if it still exists) where photoshop would incorrectly save PPM files with brighter colours compared to other comment formats that appeared darker.","body":"How did you obtain the pixel values from the ppm file, and how was it converted? The software used to open/view the ppm file may simply have a filter on it that is not representative of real-world values. There was also an issue in the past (not sure if it still exists) where photoshop would incorrectly save PPM files with brighter colours compared to other comment formats that appeared darker."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":1,"creation_date":1655082702,"post_id":72596842,"comment_id":128238598,"body_markdown":"Could it be related to https://stackoverflow.com/q/62046921 ?","body":"Could it be related to <a href=\"https://stackoverflow.com/q/62046921\">stackoverflow.com/q/62046921</a> ?"},{"owner":{"account_id":19586972,"reputation":39,"user_id":14334886,"display_name":"d0nut"},"score":0,"creation_date":1655083807,"post_id":72596842,"comment_id":128238728,"body_markdown":"@sorifiend the way I obtain pixels from the ppm file is by using scanner to read the ppm file line by line. Then, the way I convert it to a png file is by setting those rgb values to the corresponding pixels in a bufferedImage. I write a file using that bufferedImage","body":"@sorifiend the way I obtain pixels from the ppm file is by using scanner to read the ppm file line by line. Then, the way I convert it to a png file is by setting those rgb values to the corresponding pixels in a bufferedImage. I write a file using that bufferedImage"},{"owner":{"account_id":19586972,"reputation":39,"user_id":14334886,"display_name":"d0nut"},"score":0,"creation_date":1655083861,"post_id":72596842,"comment_id":128238737,"body_markdown":"@DawoodibnKareem my ppm is P3","body":"@DawoodibnKareem my ppm is P3"},{"owner":{"account_id":1531514,"reputation":26639,"user_id":1428606,"accept_rate":71,"display_name":"Harald K"},"score":0,"creation_date":1655479010,"post_id":72596842,"comment_id":128349410,"body_markdown":"Different color spaces, probably, How did you convert your PPM to PNG?","body":"Different color spaces, probably, How did you convert your PPM to PNG?"}],"owner":{"account_id":19586972,"reputation":39,"user_id":14334886,"display_name":"d0nut"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":158,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1655081210,"creation_date":1655081210,"question_id":72596842,"body_markdown":"I encountered a weird problem: I converted a ppm file into png, jpg, and bmp. Visually, png, jpg, and bmp files look darker. I thought it was something wrong with the pixels so I use the following code to print out the pixels of the png file, \r\n\r\n    public class testMethods {\r\n      public static void main(String[] args) throws IOException {\r\n        File file = new File(&quot;res/35blur.png&quot;);\r\n        BufferedImage image = ImageIO.read(file);\r\n    \r\n        for (int i = 0; i &lt; image.getHeight(); i++) {\r\n          for (int j = 0; j &lt; image.getWidth(); j++) {\r\n            int firstPixel = image.getRGB(j, i);\r\n            int red = (firstPixel &gt;&gt; 16) &amp; 0xFF;\r\n            int green = (firstPixel &gt;&gt; 8) &amp; 0xFF;\r\n            int blue = firstPixel &amp; 0xFF;\r\n            System.out.println(red);\r\n            System.out.println(green);\r\n            System.out.println(blue);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\nBut the output are the same as the rgb values in the ppm file. Anyone know what could possibly be the reason for this?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/bQ7CE.png","title":"Why does my jpg/png/bmp look darker than my ppm file even though they have the same pixels?","body":"<p>I encountered a weird problem: I converted a ppm file into png, jpg, and bmp. Visually, png, jpg, and bmp files look darker. I thought it was something wrong with the pixels so I use the following code to print out the pixels of the png file,</p>\n<pre><code>public class testMethods {\n  public static void main(String[] args) throws IOException {\n    File file = new File(&quot;res/35blur.png&quot;);\n    BufferedImage image = ImageIO.read(file);\n\n    for (int i = 0; i &lt; image.getHeight(); i++) {\n      for (int j = 0; j &lt; image.getWidth(); j++) {\n        int firstPixel = image.getRGB(j, i);\n        int red = (firstPixel &gt;&gt; 16) &amp; 0xFF;\n        int green = (firstPixel &gt;&gt; 8) &amp; 0xFF;\n        int blue = firstPixel &amp; 0xFF;\n        System.out.println(red);\n        System.out.println(green);\n        System.out.println(blue);\n      }\n    }\n  }\n}\n</code></pre>\n<p>But the output are the same as the rgb values in the ppm file. Anyone know what could possibly be the reason for this?</p>\n<p><a href=\"https://i.stack.imgur.com/bQ7CE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bQ7CE.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","arrays","formatting","brackets"],"comments":[{"owner":{"account_id":5699719,"reputation":337,"user_id":4505132,"accept_rate":100,"display_name":"AvenNova"},"score":0,"creation_date":1465566276,"post_id":37749826,"comment_id":62969258,"body_markdown":"First downvote, hooray!","body":"First downvote, hooray!"},{"owner":{"account_id":2491978,"reputation":3420,"user_id":2169261,"accept_rate":79,"display_name":"techspider"},"score":0,"creation_date":1465568644,"post_id":37749826,"comment_id":62970888,"body_markdown":"what are you getting now? You need to put more information on the issue","body":"what are you getting now? You need to put more information on the issue"}],"answers":[{"tags":[],"owner":{"account_id":2269593,"reputation":43907,"user_id":1997376,"accept_rate":100,"display_name":"Nicolas Filotto"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1641207489,"creation_date":1465566277,"answer_id":37749871,"question_id":37749826,"body_markdown":"You should simply use the method `Arrays.toString`, it will do it for you, more details in the Javadoc [Arrays.html#toString(int[])][1].\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#toString(int[])","title":"Displaying an array output with brackets and commas in Java?","body":"<p>You should simply use the method <code>Arrays.toString</code>, it will do it for you, more details in the Javadoc <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#toString(int%5B%5D)\" rel=\"nofollow noreferrer\">Arrays.html#toString(int[])</a>.</p>\n"},{"tags":[],"owner":{"account_id":7018296,"reputation":7298,"user_id":5378766,"accept_rate":84,"display_name":"hotzst"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1465566417,"creation_date":1465566417,"answer_id":37749920,"question_id":37749826,"body_markdown":"You might try something like this, if you want to implement it yourself:\r\n\r\n    int[] array = new int[]{1, 2, 3, 4, 5, 6};\r\n    StringBuilder sb = new StringBuilder();\r\n    sb.append(&quot;[&quot;);\r\n    for (int i = 0; i &lt; array.length; i++) {\r\n        sb.append(array[i]);\r\n        if (i &lt; array.length - 1) {\r\n          sb.append(&quot;, &quot;);\r\n        }\r\n    }\r\n    sb.append(&quot;]&quot;);","title":"Displaying an array output with brackets and commas in Java?","body":"<p>You might try something like this, if you want to implement it yourself:</p>\n\n<pre><code>int[] array = new int[]{1, 2, 3, 4, 5, 6};\nStringBuilder sb = new StringBuilder();\nsb.append(\"[\");\nfor (int i = 0; i &lt; array.length; i++) {\n    sb.append(array[i]);\n    if (i &lt; array.length - 1) {\n      sb.append(\", \");\n    }\n}\nsb.append(\"]\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2522926,"reputation":30310,"user_id":2192903,"accept_rate":73,"display_name":"Arnaud Denoyelle"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1465566565,"creation_date":1465566565,"answer_id":37749962,"question_id":37749826,"body_markdown":"Arrays.toString can do it for you.\r\n\r\nMore generally, joiners are intended for that : \r\n\r\n    System.out.println(\r\n        Arrays.stream(array)\r\n            .mapToObj(Integer::toString)\r\n            .collect(Collectors.joining(&quot;, &quot;, &quot;[&quot;, &quot;]&quot;)));\r\n\r\nBonus : compute the sum  with `Arrays.stream(array).sum();`","title":"Displaying an array output with brackets and commas in Java?","body":"<p>Arrays.toString can do it for you.</p>\n\n<p>More generally, joiners are intended for that : </p>\n\n<pre><code>System.out.println(\n    Arrays.stream(array)\n        .mapToObj(Integer::toString)\n        .collect(Collectors.joining(\", \", \"[\", \"]\")));\n</code></pre>\n\n<p>Bonus : compute the sum  with <code>Arrays.stream(array).sum();</code></p>\n"},{"tags":[],"owner":{"account_id":8578753,"reputation":76,"user_id":6427267,"display_name":"user6427267"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1465568407,"creation_date":1465568407,"answer_id":37750613,"question_id":37749826,"body_markdown":"Just see Data Structures Concept on java.!It Will more helpful to you.!\nThe java **API** provides special class to store and manipulate group of objects. One Such Class is **Arraylist**\n\nNote that **Arraylist** class is in java.util.ArrayList\n\nCreate an ArrayList as you would any objects.\n\n    import java.util.ArrayList;\n    //..\n    ArrayList ajay = new ArrayList(); \n\nHere\n\nArrayList -&gt; Class\n\najay -&gt; object\n\nYou can optionally specify a capacity and type of objects the Arraylist will hold:\n\n    ArrayList ajay&lt;String&gt; = new ArrayList&lt;String&gt;(10);\n\nThe Arraylist class provides a number of useful methods for manipulating objects..\n\nThe **add()** method adds new objects to the ArrayList.And **remove()** method remove objects from the List..\n\nSample Code:\n\n    import java.util.ArrayList;\n    import java.util.Scanner;\n    public class MyClass {\n        public static void main(String[ ] args) {\n            \n            Scanner sc = new Scanner(System.in);\n            ArrayList&lt;Integer&gt; ajay = new ArrayList&lt;Integer&gt;();\n            int num;\n            int i;\n            for(i=0;i&lt;5;i++){\n                num=sc.nextInt();\n                ajay.add(num);\n            }\n            System.out.println(ajay);\n        }\n    }\n\n\nInput: 1 2 3 4 5\nOutput:\n\n    [1,2,3,4,5]\n\nIf you have doubt,please take tutorials on ArrayList on java..\nThank you.!","title":"Displaying an array output with brackets and commas in Java?","body":"<p>Just see Data Structures Concept on java.!It Will more helpful to you.!\nThe java <strong>API</strong> provides special class to store and manipulate group of objects. One Such Class is <strong>Arraylist</strong></p>\n\n<p>Note that <strong>Arraylist</strong> class is in java.util.ArrayList</p>\n\n<p>Create an ArrayList as you would any objects.</p>\n\n<pre><code>import java.util.ArrayList;\n//..\nArrayList ajay = new ArrayList(); \n</code></pre>\n\n<p>Here</p>\n\n<p>ArrayList -> Class</p>\n\n<p>ajay -> object</p>\n\n<p>You can optionally specify a capacity and type of objects the Arraylist will hold:</p>\n\n<pre><code>ArrayList ajay&lt;String&gt; = new ArrayList&lt;String&gt;(10);\n</code></pre>\n\n<p>The Arraylist class provides a number of useful methods for manipulating objects..</p>\n\n<p>The <strong>add()</strong> method adds new objects to the ArrayList.And <strong>remove()</strong> method remove objects from the List..</p>\n\n<p>Sample Code:</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.Scanner;\npublic class MyClass {\n    public static void main(String[ ] args) {\n\n        Scanner sc = new Scanner(System.in);\n        ArrayList&lt;Integer&gt; ajay = new ArrayList&lt;Integer&gt;();\n        int num;\n        int i;\n        for(i=0;i&lt;5;i++){\n            num=sc.nextInt();\n            ajay.add(num);\n        }\n        System.out.println(ajay);\n    }\n}\n</code></pre>\n\n<p>Input: 1 2 3 4 5\nOutput:</p>\n\n<pre><code>[1,2,3,4,5]\n</code></pre>\n\n<p>If you have doubt,please take tutorials on ArrayList on java..\nThank you.!</p>\n"}],"owner":{"account_id":5699719,"reputation":337,"user_id":4505132,"accept_rate":100,"display_name":"AvenNova"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8460,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"accepted_answer_id":37749962,"answer_count":4,"score":3,"last_activity_date":1655081097,"creation_date":1465566128,"question_id":37749826,"body_markdown":"I am trying to print the array in my program with brackets and commas. Here is my code: \r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t\r\n\t\tint[] arrayIntList = new int[10]; // Starting the array with the specified length\r\n\r\n\t\tint sum = 0; // Defining the sum as 0 for now\r\n\r\n\t\t// Using the for loop to generate the 10 random numbers from 100 to 200, inclusive.\r\n\t\tfor(int nums1 = 0; nums1 &lt; arrayIntList.length; nums1++) {\r\n\t\t\tarrayIntList[nums1] = (int)(100 + Math.random()*101);\r\n\t\t}\t\t\t\r\n\r\n\t\tArrays.sort(arrayIntList); // Sorting the array list\r\n\t\t\r\n\t\tSystem.out.print(&quot;[&quot;);\r\n\t\tfor(int i = 0; i &lt; arrayIntList.length; i++) { // Printing the array\r\n\t\t\tSystem.out.print(arrayIntList[i] + &quot; &quot;); \r\n\t\t\t}\r\n\t\tSystem.out.print(&quot;]&quot;);\r\n\t\t\r\n\t\tint[] arrayC = CalcArray(arrayIntList); // Sending the array to the method\r\n\t\t\r\n\t\tSystem.out.println(&quot;&quot;);\r\n\t\t\r\n\t\tfor(int doubles : arrayC) { \r\n\t\t\tSystem.out.print(doubles + &quot; &quot;); // Printing the output from the second method and calculating the sum\r\n\t\t\tsum = sum + doubles;\r\n\t\t}\r\n\t\t\r\n\t\tSystem.out.printf(&quot;%nThe total is %,d&quot;, sum); // Printing the sum\r\n\t}\r\n\r\n\tprivate static int[] CalcArray(int[] nums) {\r\n\r\n\t\tfor(int nums2 = 0; nums2 &lt; nums.length; nums2++) { // Doubling the original array\r\n\t\t\tnums[nums2] *= 2; \r\n\t\t}\r\n\t\treturn nums; // Returning the doubles numbers\r\n\r\n\t}\r\n\r\nThe format I am looking for is something like [1, 2, 3, 4, 5, 6].  \r\nIf anyone one could give me some pointers then that would be great. \r\n","title":"Displaying an array output with brackets and commas in Java?","body":"<p>I am trying to print the array in my program with brackets and commas. Here is my code:</p>\n<pre><code>public static void main(String[] args) {\n    \n    int[] arrayIntList = new int[10]; // Starting the array with the specified length\n\n    int sum = 0; // Defining the sum as 0 for now\n\n    // Using the for loop to generate the 10 random numbers from 100 to 200, inclusive.\n    for(int nums1 = 0; nums1 &lt; arrayIntList.length; nums1++) {\n        arrayIntList[nums1] = (int)(100 + Math.random()*101);\n    }           \n\n    Arrays.sort(arrayIntList); // Sorting the array list\n    \n    System.out.print(&quot;[&quot;);\n    for(int i = 0; i &lt; arrayIntList.length; i++) { // Printing the array\n        System.out.print(arrayIntList[i] + &quot; &quot;); \n        }\n    System.out.print(&quot;]&quot;);\n    \n    int[] arrayC = CalcArray(arrayIntList); // Sending the array to the method\n    \n    System.out.println(&quot;&quot;);\n    \n    for(int doubles : arrayC) { \n        System.out.print(doubles + &quot; &quot;); // Printing the output from the second method and calculating the sum\n        sum = sum + doubles;\n    }\n    \n    System.out.printf(&quot;%nThe total is %,d&quot;, sum); // Printing the sum\n}\n\nprivate static int[] CalcArray(int[] nums) {\n\n    for(int nums2 = 0; nums2 &lt; nums.length; nums2++) { // Doubling the original array\n        nums[nums2] *= 2; \n    }\n    return nums; // Returning the doubles numbers\n\n}\n</code></pre>\n<p>The format I am looking for is something like [1, 2, 3, 4, 5, 6].<br />\nIf anyone one could give me some pointers then that would be great.</p>\n"},{"tags":["java","osgi","websphere-liberty","osgi-bundle"],"answers":[{"tags":[],"owner":{"account_id":4714434,"reputation":41866,"user_id":3814029,"accept_rate":67,"display_name":"Andy Guibert"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1655080873,"creation_date":1515209702,"answer_id":48124013,"question_id":48123865,"body_markdown":"The syntax for including the `adminCenter-1.0` and `webBundle-1.0` features are correct, since you have listed them as `type=&quot;osgi.subsystem.feature&quot;`.\r\n\r\nYou can inspect other Liberty features for some examples by looking in wlp/lib/features/*.mf.  For example, this is what the webBundle-1.0 feature has currently for `Subsystem-Content`:\r\n\r\n\r\n    Subsystem-Content: com.ibm.websphere.appserver.spi.wab.configure_1.0-javadoc.zip; type=file; location:=&quot;dev/spi/ibm/javadoc/com.ibm.websphere.appserver.spi.wab.configure_1.0-javadoc.zip&quot;,\r\n     com.ibm.websphere.appserver.servlet-3.0; ibm.tolerates:=&quot;3.1&quot;; type=&quot;osgi.subsystem.feature&quot;,\r\n     com.ibm.websphere.appserver.spi.wab.configure; location:=&quot;dev/spi/ibm/,lib/&quot;; type=jar; version=&quot;[1.0.0,1.0.200)&quot;,\r\n     com.ibm.ws.app.manager.wab; start-phase:=CONTAINER_LATE; version=&quot;[1.0.0,1.0.200)&quot;,\r\n     com.ibm.ws.eba.wab.integrator; version=&quot;[1.0.0,1.0.200)&quot;\r\n\r\n\r\nTo break this down line by line:\r\n\r\n- includes a javadoc zip from wlp/dev/spi/ibm/javadoc\r\n- includes the serlet-3.0 feature, but also tolerates servlet-3.1\r\n- includes an wab configuration SPI jar at either wlp/dev/spi/ibm/ or wlp/lib/\r\n- includes two other bundles in a similar fashion\r\n\r\nYou can find official documentation on developing Liberty features here:&lt;br&gt;\r\n[Developing a Liberty feature manually][1] \r\n\r\n  [1]: https://www.ibm.com/support/knowledgecenter/en/SSAW57_liberty/com.ibm.websphere.wlp.nd.multiplatform.doc/ae/twlp_feat_example.html","title":"How to specify dependent features of custom liberty feature","body":"<p>The syntax for including the <code>adminCenter-1.0</code> and <code>webBundle-1.0</code> features are correct, since you have listed them as <code>type=&quot;osgi.subsystem.feature&quot;</code>.</p>\n<p>You can inspect other Liberty features for some examples by looking in wlp/lib/features/*.mf.  For example, this is what the webBundle-1.0 feature has currently for <code>Subsystem-Content</code>:</p>\n<pre><code>Subsystem-Content: com.ibm.websphere.appserver.spi.wab.configure_1.0-javadoc.zip; type=file; location:=&quot;dev/spi/ibm/javadoc/com.ibm.websphere.appserver.spi.wab.configure_1.0-javadoc.zip&quot;,\n com.ibm.websphere.appserver.servlet-3.0; ibm.tolerates:=&quot;3.1&quot;; type=&quot;osgi.subsystem.feature&quot;,\n com.ibm.websphere.appserver.spi.wab.configure; location:=&quot;dev/spi/ibm/,lib/&quot;; type=jar; version=&quot;[1.0.0,1.0.200)&quot;,\n com.ibm.ws.app.manager.wab; start-phase:=CONTAINER_LATE; version=&quot;[1.0.0,1.0.200)&quot;,\n com.ibm.ws.eba.wab.integrator; version=&quot;[1.0.0,1.0.200)&quot;\n</code></pre>\n<p>To break this down line by line:</p>\n<ul>\n<li>includes a javadoc zip from wlp/dev/spi/ibm/javadoc</li>\n<li>includes the serlet-3.0 feature, but also tolerates servlet-3.1</li>\n<li>includes an wab configuration SPI jar at either wlp/dev/spi/ibm/ or wlp/lib/</li>\n<li>includes two other bundles in a similar fashion</li>\n</ul>\n<p>You can find official documentation on developing Liberty features here:<br>\n<a href=\"https://www.ibm.com/support/knowledgecenter/en/SSAW57_liberty/com.ibm.websphere.wlp.nd.multiplatform.doc/ae/twlp_feat_example.html\" rel=\"nofollow noreferrer\">Developing a Liberty feature manually</a></p>\n"}],"owner":{"account_id":359895,"reputation":1241,"user_id":701571,"accept_rate":38,"display_name":"Dyapa Srikanth"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":380,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1655080873,"creation_date":1515207511,"question_id":48123865,"body_markdown":"I am developing a custom feature with WAB and ServiceBundles. I want to specify the dependent features as well in my feature manifest file.\r\n\r\n    Subsystem-Content: ServiceProvider;version=1.0.0,\r\n     ServiceProviderWeb;version=1.0.0,\r\n     com.ibm.websphere.appserver.adminCenter-1.0; type=&quot;osgi.subsystem.feature&quot;,\r\n     com.ibm.wsspi.appserver.webBundle-1.0; type=&quot;osgi.subsystem.feature&quot;\r\n\r\nIs it correct way to do it ? Eclipse Dev tools not giving option to select dependent features (built-in).","title":"How to specify dependent features of custom liberty feature","body":"<p>I am developing a custom feature with WAB and ServiceBundles. I want to specify the dependent features as well in my feature manifest file.</p>\n\n<pre><code>Subsystem-Content: ServiceProvider;version=1.0.0,\n ServiceProviderWeb;version=1.0.0,\n com.ibm.websphere.appserver.adminCenter-1.0; type=\"osgi.subsystem.feature\",\n com.ibm.wsspi.appserver.webBundle-1.0; type=\"osgi.subsystem.feature\"\n</code></pre>\n\n<p>Is it correct way to do it ? Eclipse Dev tools not giving option to select dependent features (built-in).</p>\n"},{"tags":["java","jpa","testing","junit","dml"],"comments":[{"owner":{"account_id":9293440,"reputation":1727,"user_id":6901184,"display_name":"Mart&#237;n Zaragoza"},"score":0,"creation_date":1655057044,"post_id":72594656,"comment_id":128234778,"body_markdown":"Does this answer your question? [JpaRepository Not supported for DML operations \\[delete query\\]](https://stackoverflow.com/questions/44022076/jparepository-not-supported-for-dml-operations-delete-query)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/44022076/jparepository-not-supported-for-dml-operations-delete-query\">JpaRepository Not supported for DML operations &#91;delete query&#93;</a>"},{"owner":{"account_id":22958770,"reputation":13,"user_id":17088984,"display_name":"Soufghalb"},"score":0,"creation_date":1655058352,"post_id":72594656,"comment_id":128235052,"body_markdown":"Sadly no, that is a whole different approach than mine","body":"Sadly no, that is a whole different approach than mine"}],"answers":[{"tags":[],"owner":{"account_id":9293440,"reputation":1727,"user_id":6901184,"display_name":"Mart&#237;n Zaragoza"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655063882,"creation_date":1655063882,"answer_id":72595452,"question_id":72594656,"body_markdown":"I think the exception is triggering due to the `query.getSingleResult();` line which is trying to fetch a result from a DELETE query (which is an UPDATE type of query).\r\n\r\nTry changing the code like this:\r\n```\r\n@Override\r\npublic void deleteById(long id) {\r\n\tQuery query = entityManager.createQuery(\r\n\t\t\t&quot;delete from UserModel as u where u.id=:id&quot;\r\n\t).setParameter(&quot;id&quot;, id);\r\n\tquery.executeUpdate();\r\n}\r\n```\r\n\r\n","title":"JpaRepository Not supported for DML operations (Delete)","body":"<p>I think the exception is triggering due to the <code>query.getSingleResult();</code> line which is trying to fetch a result from a DELETE query (which is an UPDATE type of query).</p>\n<p>Try changing the code like this:</p>\n<pre><code>@Override\npublic void deleteById(long id) {\n    Query query = entityManager.createQuery(\n            &quot;delete from UserModel as u where u.id=:id&quot;\n    ).setParameter(&quot;id&quot;, id);\n    query.executeUpdate();\n}\n</code></pre>\n"}],"owner":{"account_id":22958770,"reputation":13,"user_id":17088984,"display_name":"Soufghalb"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":260,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1655080536,"creation_date":1655056788,"question_id":72594656,"body_markdown":"I keep trying to create a user and delete it afterwards as a part of my tests, but I keep getting the same error *org.hibernate.hql.internal.QueryExecutionRequestException: Not supported for DML operation*s even after continuously changing the code in both my Repository and Controller. \r\n\r\n**This is the code in my Repository:**\r\n```\r\n@Transactional\r\n    @Override\r\n    public void deleteById(long id) {\r\n        Query query = entityManager.createQuery(\r\n                &quot;delete from UserModel as u where u.id=:id&quot;\r\n        ).setParameter(&quot;id&quot;, id);\r\n        query.getSingleResult();\r\n        query.executeUpdate();\r\n    }\r\n```\r\n**This is the code in my Controller:**\r\n```\r\n    @DeleteMapping(&quot;/deleteUser&quot;)\r\n    public @ResponseBody\r\n    void deleteUser(@RequestParam long id) {\r\n        userRepository.deleteById(id);\r\n        ResponseEntity.ok(null);\r\n    }\r\n```","title":"JpaRepository Not supported for DML operations (Delete)","body":"<p>I keep trying to create a user and delete it afterwards as a part of my tests, but I keep getting the same error <em>org.hibernate.hql.internal.QueryExecutionRequestException: Not supported for DML operation</em>s even after continuously changing the code in both my Repository and Controller.</p>\n<p><strong>This is the code in my Repository:</strong></p>\n<pre><code>@Transactional\n    @Override\n    public void deleteById(long id) {\n        Query query = entityManager.createQuery(\n                &quot;delete from UserModel as u where u.id=:id&quot;\n        ).setParameter(&quot;id&quot;, id);\n        query.getSingleResult();\n        query.executeUpdate();\n    }\n</code></pre>\n<p><strong>This is the code in my Controller:</strong></p>\n<pre><code>    @DeleteMapping(&quot;/deleteUser&quot;)\n    public @ResponseBody\n    void deleteUser(@RequestParam long id) {\n        userRepository.deleteById(id);\n        ResponseEntity.ok(null);\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","spring-data-jpa","specifications"],"comments":[{"owner":{"account_id":10643203,"reputation":541,"user_id":7837530,"display_name":"Geeth"},"score":0,"creation_date":1655037956,"post_id":72591325,"comment_id":128230585,"body_markdown":"Do not create instance variable in this class. Create a DTO and put into these parameters. After that you can send this DTO as a method parameter.","body":"Do not create instance variable in this class. Create a DTO and put into these parameters. After that you can send this DTO as a method parameter."}],"answers":[{"tags":[],"owner":{"account_id":4741976,"reputation":5385,"user_id":3834413,"display_name":"Eugene"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1655079349,"creation_date":1655079349,"answer_id":72596744,"question_id":72591325,"body_markdown":"Specification is a small, single‐purpose class, a predicate that determines if an object does or does not satisfy some criteria. It is flexible to implement one specification per one simple criterion. In cases where the rules are complex, simple specifications can be combined, just as predicates are combined with logical operators.\r\n&lt;br&gt;**The main idea** is to divide large specification into small reusable pieces and combine them via a composite pattern.\r\n&lt;br&gt;**Specification for `userId`:**\r\n```java\r\n    public static Specification&lt;Report&gt; byUserId(Long userId) {\r\n        return (root, query, criteriaBuilder) -&gt; {\r\n            Predicate predicate = null;\r\n            if (ObjectUtils.isNotEmpty(userId)) {\r\n                predicate = criteriaBuilder.equal(root.get(&quot;user&quot;).get(&quot;id&quot;), userId);\r\n            }\r\n            return predicate;\r\n        };\r\n    }\r\n``` \r\n**Specification for `reportName`:**\r\n```java\r\n    public static Specification&lt;Report&gt; byReportName(String reportName) {\r\n        return (root, query, criteriaBuilder) -&gt; {\r\n            Predicate predicate = null;\r\n            if (Strings.isNotBlank(reportName)) {\r\n                predicate = criteriaBuilder.equal(root.get(&quot;name&quot;), reportName);\r\n            }\r\n            return predicate;\r\n        };\r\n    }\r\n```\r\n**Combine specifications:**\r\n```java\r\n    public static Specification&lt;Report&gt; reportCompositeSpecification(ReportCriteria reportCriteria) {\r\n        return combine(getSpecifications(reportCriteria));\r\n    }\r\n    \r\n    private static &lt;T&gt; Specification&lt;T&gt; combine(Collection&lt;Specification&lt;T&gt;&gt; specifications) {\r\n        Specification&lt;T&gt; combinedSpecification = null;\r\n        for (Specification&lt;T&gt; specification : specifications) {\r\n            if (combinedSpecification == null) {\r\n                combinedSpecification = Specification.where(specification);\r\n            } else {\r\n                combinedSpecification = combinedSpecification.and(specification);\r\n            }\r\n        }\r\n        return combinedSpecification;        \r\n    }\r\n\r\n    public static List&lt;Specification&lt;Report&gt;&gt; getSpecifications(ReportCriteria reportCriteria) {\r\n        return Stream.of(byUserId(reportCriteria.getUserId()),\r\n                         byReportName(reportCriteria.getName()))\r\n                     .collect(Collectors.toList());\r\n    }\r\n```\r\n**Full implementation:**\r\n```java\r\npublic class ReportSpecification implements Specification&lt;Report&gt; {\r\n\r\n    private final ReportCriteria reportCriteria;\r\n\r\n    public ReportSpecification(ReportCriteria reportCriteria) {\r\n        this.reportCriteria = reportCriteria;\r\n    }\r\n\r\n    @Override\r\n    public Predicate toPredicate(Root&lt;Report&gt; root, CriteriaQuery&lt;?&gt; query, CriteriaBuilder criteriaBuilder) {\r\n        return reportCompositeSpecification(reportCriteria).toPredicate(root, query, criteriaBuilder);\r\n    }\r\n\r\n    public static Specification&lt;Report&gt; reportCompositeSpecification(ReportCriteria reportCriteria) {\r\n        return combine(getSpecifications(reportCriteria));\r\n    }\r\n\r\n    private static &lt;T&gt; Specification&lt;T&gt; combine(Collection&lt;Specification&lt;T&gt;&gt; specifications) {\r\n        Specification&lt;T&gt; combinedSpecification = null;\r\n        for (Specification&lt;T&gt; specification : specifications) {\r\n            if (combinedSpecification == null) {\r\n                combinedSpecification = Specification.where(specification);\r\n            } else {\r\n                combinedSpecification = combinedSpecification.and(specification);\r\n            }\r\n        }\r\n        return combinedSpecification;\r\n    }\r\n\r\n    public static List&lt;Specification&lt;Report&gt;&gt; getSpecifications(ReportCriteria reportCriteria) {\r\n        return Stream.of(byUserId(reportCriteria.getUserId()),\r\n                         byReportName(reportCriteria.getName()))\r\n                     .collect(Collectors.toList());\r\n    }\r\n\r\n    public static Specification&lt;Report&gt; byUserId(Long userId) {\r\n        return (root, query, criteriaBuilder) -&gt; {\r\n            Predicate predicate = null;\r\n            if (ObjectUtils.isNotEmpty(userId)) {\r\n                predicate = criteriaBuilder.equal(root.get(&quot;user&quot;).get(&quot;id&quot;), userId);\r\n            }\r\n            return predicate;\r\n        };\r\n    }\r\n\r\n    public static Specification&lt;Report&gt; byReportName(String reportName) {\r\n        return (root, query, criteriaBuilder) -&gt; {\r\n            Predicate predicate = null;\r\n            if (Strings.isNotBlank(reportName)) {\r\n                predicate = criteriaBuilder.equal(root.get(&quot;name&quot;), reportName);\r\n            }\r\n            return predicate;\r\n        };\r\n    }\r\n}\r\n\r\npublic class ReportCriteria {\r\n    private Long userId;\r\n    private String name;\r\n\r\n    public Long getUserId() {\r\n        return userId;\r\n    }\r\n\r\n    public void setUserId(Long userId) {\r\n        this.userId = userId;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n}\r\n```\r\n**Example of usage:**\r\n```java\r\nimport static com.test.repository.specification.ReportSpecification.*;\r\n\r\n        ReportCriteria reportCriteria = new ReportCriteria();\r\n        reportCriteria.setName(&quot;name&quot;);\r\n        reportCriteria.setUserId(1L);\r\n        reportRepository.findAll(reportCompositeSpecification(reportCriteria));\r\n```\r\nOR\r\n```java\r\n        ReportCriteria reportCriteria = new ReportCriteria();\r\n        reportCriteria.setName(null);\r\n        reportCriteria.setUserId(1L);\r\n        return reportRepository.findAll(new ReportSpecification(reportCriteria));\r\n```\r\nOR\r\n```java\r\nimport static com.test.repository.specification.ReportSpecification.*;\r\n\r\n        ReportCriteria criteria = new ReportCriteria();\r\n        criteria.setName(&quot;name&quot;);\r\n        criteria.setUserId(1L);\r\n        return reportRepository.findAll(byUserId(criteria.getUserId()).and(byReportName(criteria.getName())));\r\n```\r\n**Advantages:**\r\n- you have flexible simple specifications which can be combined or reused in other context\r\n- solution is extensible. You need just implement the new specification and register it in the common collection `getSpecifications(ReportCriteria reportCriteria)`\r\n\r\n&lt;br&gt;**References**\r\n&lt;br&gt;[Specifications - Martin Fowler][1]\r\n&lt;br&gt;[Domain-Driven Design: Tackling Complexity in the Heart of Software][2]\r\n\r\n&lt;br&gt;**Also more simple implementation without common combine method:**\r\n```java\r\npublic class ReportSpecification implements Specification&lt;Report&gt; {\r\n    private final ReportCriteria reportCriteria;\r\n\r\n    public ReportSpecification(ReportCriteria reportCriteria) {\r\n        this.reportCriteria = reportCriteria;\r\n    }\r\n\r\n    @Override\r\n    public Predicate toPredicate(Root&lt;Report&gt; root, CriteriaQuery&lt;?&gt; query, CriteriaBuilder criteriaBuilder) {\r\n        return byUserId(reportCriteria.getUserId()).and(byReportName(reportCriteria.getName()))\r\n                .toPredicate(root, query, criteriaBuilder);\r\n    }\r\n\r\n    public static Specification&lt;Report&gt; byUserId(Long userId) {\r\n        return (root, query, criteriaBuilder) -&gt; {\r\n            Predicate predicate = null;\r\n            if (ObjectUtils.isNotEmpty(userId)) {\r\n                predicate = criteriaBuilder.equal(root.get(&quot;user&quot;).get(&quot;id&quot;), userId);\r\n            }\r\n            return predicate;\r\n        };\r\n    }\r\n\r\n    public static Specification&lt;Report&gt; byReportName(String reportName) {\r\n        return (root, query, criteriaBuilder) -&gt; {\r\n            Predicate predicate = null;\r\n            if (Strings.isNotBlank(reportName)) {\r\n                predicate = criteriaBuilder.equal(root.get(&quot;name&quot;), reportName);\r\n            }\r\n            return predicate;\r\n        };\r\n    }\r\n}\r\n```\r\n\r\n  [1]: https://www.martinfowler.com/apsupp/spec.pdf\r\n  [2]: https://www.amazon.com/Domain-Driven-Design-Tackling-Complexity-Software/dp/0321125215","title":"spring boot JPA specification dynamic generate SQL and how can I improve it?","body":"<p>Specification is a small, single‐purpose class, a predicate that determines if an object does or does not satisfy some criteria. It is flexible to implement one specification per one simple criterion. In cases where the rules are complex, simple specifications can be combined, just as predicates are combined with logical operators.\n<br><strong>The main idea</strong> is to divide large specification into small reusable pieces and combine them via a composite pattern.\n<br><strong>Specification for <code>userId</code>:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static Specification&lt;Report&gt; byUserId(Long userId) {\n        return (root, query, criteriaBuilder) -&gt; {\n            Predicate predicate = null;\n            if (ObjectUtils.isNotEmpty(userId)) {\n                predicate = criteriaBuilder.equal(root.get(&quot;user&quot;).get(&quot;id&quot;), userId);\n            }\n            return predicate;\n        };\n    }\n</code></pre>\n<p><strong>Specification for <code>reportName</code>:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static Specification&lt;Report&gt; byReportName(String reportName) {\n        return (root, query, criteriaBuilder) -&gt; {\n            Predicate predicate = null;\n            if (Strings.isNotBlank(reportName)) {\n                predicate = criteriaBuilder.equal(root.get(&quot;name&quot;), reportName);\n            }\n            return predicate;\n        };\n    }\n</code></pre>\n<p><strong>Combine specifications:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static Specification&lt;Report&gt; reportCompositeSpecification(ReportCriteria reportCriteria) {\n        return combine(getSpecifications(reportCriteria));\n    }\n    \n    private static &lt;T&gt; Specification&lt;T&gt; combine(Collection&lt;Specification&lt;T&gt;&gt; specifications) {\n        Specification&lt;T&gt; combinedSpecification = null;\n        for (Specification&lt;T&gt; specification : specifications) {\n            if (combinedSpecification == null) {\n                combinedSpecification = Specification.where(specification);\n            } else {\n                combinedSpecification = combinedSpecification.and(specification);\n            }\n        }\n        return combinedSpecification;        \n    }\n\n    public static List&lt;Specification&lt;Report&gt;&gt; getSpecifications(ReportCriteria reportCriteria) {\n        return Stream.of(byUserId(reportCriteria.getUserId()),\n                         byReportName(reportCriteria.getName()))\n                     .collect(Collectors.toList());\n    }\n</code></pre>\n<p><strong>Full implementation:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ReportSpecification implements Specification&lt;Report&gt; {\n\n    private final ReportCriteria reportCriteria;\n\n    public ReportSpecification(ReportCriteria reportCriteria) {\n        this.reportCriteria = reportCriteria;\n    }\n\n    @Override\n    public Predicate toPredicate(Root&lt;Report&gt; root, CriteriaQuery&lt;?&gt; query, CriteriaBuilder criteriaBuilder) {\n        return reportCompositeSpecification(reportCriteria).toPredicate(root, query, criteriaBuilder);\n    }\n\n    public static Specification&lt;Report&gt; reportCompositeSpecification(ReportCriteria reportCriteria) {\n        return combine(getSpecifications(reportCriteria));\n    }\n\n    private static &lt;T&gt; Specification&lt;T&gt; combine(Collection&lt;Specification&lt;T&gt;&gt; specifications) {\n        Specification&lt;T&gt; combinedSpecification = null;\n        for (Specification&lt;T&gt; specification : specifications) {\n            if (combinedSpecification == null) {\n                combinedSpecification = Specification.where(specification);\n            } else {\n                combinedSpecification = combinedSpecification.and(specification);\n            }\n        }\n        return combinedSpecification;\n    }\n\n    public static List&lt;Specification&lt;Report&gt;&gt; getSpecifications(ReportCriteria reportCriteria) {\n        return Stream.of(byUserId(reportCriteria.getUserId()),\n                         byReportName(reportCriteria.getName()))\n                     .collect(Collectors.toList());\n    }\n\n    public static Specification&lt;Report&gt; byUserId(Long userId) {\n        return (root, query, criteriaBuilder) -&gt; {\n            Predicate predicate = null;\n            if (ObjectUtils.isNotEmpty(userId)) {\n                predicate = criteriaBuilder.equal(root.get(&quot;user&quot;).get(&quot;id&quot;), userId);\n            }\n            return predicate;\n        };\n    }\n\n    public static Specification&lt;Report&gt; byReportName(String reportName) {\n        return (root, query, criteriaBuilder) -&gt; {\n            Predicate predicate = null;\n            if (Strings.isNotBlank(reportName)) {\n                predicate = criteriaBuilder.equal(root.get(&quot;name&quot;), reportName);\n            }\n            return predicate;\n        };\n    }\n}\n\npublic class ReportCriteria {\n    private Long userId;\n    private String name;\n\n    public Long getUserId() {\n        return userId;\n    }\n\n    public void setUserId(Long userId) {\n        this.userId = userId;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n}\n</code></pre>\n<p><strong>Example of usage:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>import static com.test.repository.specification.ReportSpecification.*;\n\n        ReportCriteria reportCriteria = new ReportCriteria();\n        reportCriteria.setName(&quot;name&quot;);\n        reportCriteria.setUserId(1L);\n        reportRepository.findAll(reportCompositeSpecification(reportCriteria));\n</code></pre>\n<p>OR</p>\n<pre class=\"lang-java prettyprint-override\"><code>        ReportCriteria reportCriteria = new ReportCriteria();\n        reportCriteria.setName(null);\n        reportCriteria.setUserId(1L);\n        return reportRepository.findAll(new ReportSpecification(reportCriteria));\n</code></pre>\n<p>OR</p>\n<pre class=\"lang-java prettyprint-override\"><code>import static com.test.repository.specification.ReportSpecification.*;\n\n        ReportCriteria criteria = new ReportCriteria();\n        criteria.setName(&quot;name&quot;);\n        criteria.setUserId(1L);\n        return reportRepository.findAll(byUserId(criteria.getUserId()).and(byReportName(criteria.getName())));\n</code></pre>\n<p><strong>Advantages:</strong></p>\n<ul>\n<li>you have flexible simple specifications which can be combined or reused in other context</li>\n<li>solution is extensible. You need just implement the new specification and register it in the common collection <code>getSpecifications(ReportCriteria reportCriteria)</code></li>\n</ul>\n<p><br><strong>References</strong>\n<br><a href=\"https://www.martinfowler.com/apsupp/spec.pdf\" rel=\"nofollow noreferrer\">Specifications - Martin Fowler</a>\n<br><a href=\"https://rads.stackoverflow.com/amzn/click/com/0321125215\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">Domain-Driven Design: Tackling Complexity in the Heart of Software</a></p>\n<p><br><strong>Also more simple implementation without common combine method:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ReportSpecification implements Specification&lt;Report&gt; {\n    private final ReportCriteria reportCriteria;\n\n    public ReportSpecification(ReportCriteria reportCriteria) {\n        this.reportCriteria = reportCriteria;\n    }\n\n    @Override\n    public Predicate toPredicate(Root&lt;Report&gt; root, CriteriaQuery&lt;?&gt; query, CriteriaBuilder criteriaBuilder) {\n        return byUserId(reportCriteria.getUserId()).and(byReportName(reportCriteria.getName()))\n                .toPredicate(root, query, criteriaBuilder);\n    }\n\n    public static Specification&lt;Report&gt; byUserId(Long userId) {\n        return (root, query, criteriaBuilder) -&gt; {\n            Predicate predicate = null;\n            if (ObjectUtils.isNotEmpty(userId)) {\n                predicate = criteriaBuilder.equal(root.get(&quot;user&quot;).get(&quot;id&quot;), userId);\n            }\n            return predicate;\n        };\n    }\n\n    public static Specification&lt;Report&gt; byReportName(String reportName) {\n        return (root, query, criteriaBuilder) -&gt; {\n            Predicate predicate = null;\n            if (Strings.isNotBlank(reportName)) {\n                predicate = criteriaBuilder.equal(root.get(&quot;name&quot;), reportName);\n            }\n            return predicate;\n        };\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":19560342,"reputation":75,"user_id":14313697,"display_name":"PoYu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1920,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":72596744,"answer_count":1,"score":1,"last_activity_date":1655079349,"creation_date":1655029354,"question_id":72591325,"body_markdown":"Now I&#39;m used to the spring-boot version 2.4.3, and we primarily use the spring-boot JPA.\r\n\r\n```\r\npublic class ReportSpecification implements Specification&lt;Report&gt; {\r\n    private Long userId;\r\n    private String name;\r\n\r\n    @Override\r\n    public Predicate toPredicate(Root&lt;Report&gt; root, CriteriaQuery&lt;?&gt; query, CriteriaBuilder criteriaBuilder) {\r\n        List&lt;Predicate&gt; predicates = Lists.newArrayList();\r\n\r\n        if (ObjectUtils.isNotEmpty(userId))\r\n            predicates.add(criteriaBuilder.equal(root.get(Report_.user).get(User_.id), userId));\r\n\r\n        if (Strings.isNotBlank(name))\r\n            predicates.add(criteriaBuilder.equal(root.get(Report_.name), name));\r\n\r\n        return criteriaBuilder.and(Iterables.toArray(predicates, Predicate.class));\r\n    }\r\n}\r\n```\r\n\r\nThis is just sample code, but it&#39;s actually more complicated, and the Specification class wants it to be generic, that will be more than 10 if sentences in this method because its purpose is one Table to one Specification class, it can generate SQL dynamically.\r\n\r\nMy question is, there will be so many if statements in this method, so I hope the code can be more readable, can someone give me some advice or how can I refactor this method using which design pattern, or is there any way to improve it?","title":"spring boot JPA specification dynamic generate SQL and how can I improve it?","body":"<p>Now I'm used to the spring-boot version 2.4.3, and we primarily use the spring-boot JPA.</p>\n<pre><code>public class ReportSpecification implements Specification&lt;Report&gt; {\n    private Long userId;\n    private String name;\n\n    @Override\n    public Predicate toPredicate(Root&lt;Report&gt; root, CriteriaQuery&lt;?&gt; query, CriteriaBuilder criteriaBuilder) {\n        List&lt;Predicate&gt; predicates = Lists.newArrayList();\n\n        if (ObjectUtils.isNotEmpty(userId))\n            predicates.add(criteriaBuilder.equal(root.get(Report_.user).get(User_.id), userId));\n\n        if (Strings.isNotBlank(name))\n            predicates.add(criteriaBuilder.equal(root.get(Report_.name), name));\n\n        return criteriaBuilder.and(Iterables.toArray(predicates, Predicate.class));\n    }\n}\n</code></pre>\n<p>This is just sample code, but it's actually more complicated, and the Specification class wants it to be generic, that will be more than 10 if sentences in this method because its purpose is one Table to one Specification class, it can generate SQL dynamically.</p>\n<p>My question is, there will be so many if statements in this method, so I hope the code can be more readable, can someone give me some advice or how can I refactor this method using which design pattern, or is there any way to improve it?</p>\n"},{"tags":["java","singly-linked-list"],"comments":[{"owner":{"account_id":2141010,"reputation":118229,"user_id":1899640,"display_name":"that other guy"},"score":0,"creation_date":1655074961,"post_id":72596422,"comment_id":128237837,"body_markdown":"Your `SinglyLinkedList.toString()` implicitly invokes `SinglyLinkedListNode.toString()`, but such a method is not defined. Either implement it in `SinglyLinkedListNode`, or use e.g. `answer += current.getData() + &quot; &quot;;` in  `SinglyLinkedList.toString()` to show the data directly instead of implicitly invoking `current.toString()`","body":"Your <code>SinglyLinkedList.toString()</code> implicitly invokes <code>SinglyLinkedListNode.toString()</code>, but such a method is not defined. Either implement it in <code>SinglyLinkedListNode</code>, or use e.g. <code>answer += current.getData() + &quot; &quot;;</code> in  <code>SinglyLinkedList.toString()</code> to show the data directly instead of implicitly invoking <code>current.toString()</code>"},{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1655077025,"post_id":72596422,"comment_id":128238051,"body_markdown":"Welcome! Please note that this site is not a debugging service. Copy-pasting large slabs of code into the question and asking us to debug it is off-topic. However, we can help you with *specific* questions about small *parts* of your code (a few lines), ideally accompanied by an [MCVE](https://stackoverflow.com/help/mcve). Please read [How to ask](https://stackoverflow.com/help/how-to-ask) then edit your question to narrow its focus and remove all code not directly relevant and absolutely required to describe your problem.","body":"Welcome! Please note that this site is not a debugging service. Copy-pasting large slabs of code into the question and asking us to debug it is off-topic. However, we can help you with <i>specific</i> questions about small <i>parts</i> of your code (a few lines), ideally accompanied by an <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>. Please read <a href=\"https://stackoverflow.com/help/how-to-ask\">How to ask</a> then edit your question to narrow its focus and remove all code not directly relevant and absolutely required to describe your problem."},{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1655077057,"post_id":72596422,"comment_id":128238054,"body_markdown":"Also, as per the [*How to ask* guide](https://stackoverflow.com/help/how-to-ask), please [**do not** post images of code, data, error message, etc](https://meta.stackoverflow.com/questions/285551). Instead, copy or type the text into your question, [formatted as code](https://meta.stackoverflow.com/questions/251361/how-do-i-format-my-code-blocks/251362#251362). Reserve the use of images for diagrams or demonstrating rendering bugs; things that are impossible to describe accurately via text.","body":"Also, as per the <a href=\"https://stackoverflow.com/help/how-to-ask\"><i>How to ask</i> guide</a>, please <a href=\"https://meta.stackoverflow.com/questions/285551\"><b>do not</b> post images of code, data, error message, etc</a>. Instead, copy or type the text into your question, <a href=\"https://meta.stackoverflow.com/questions/251361/how-do-i-format-my-code-blocks/251362#251362\">formatted as code</a>. Reserve the use of images for diagrams or demonstrating rendering bugs; things that are impossible to describe accurately via text."},{"owner":{"account_id":59435,"reputation":1210,"user_id":177832,"display_name":"David Larochette"},"score":0,"creation_date":1655116846,"post_id":72596422,"comment_id":128246194,"body_markdown":"Adding a `@Overrides` to your `toString()` may help you understand what&#39;s going on","body":"Adding a <code>@Overrides</code> to your <code>toString()</code> may help you understand what&#39;s going on"}],"answers":[{"tags":[],"owner":{"account_id":10284555,"reputation":56,"user_id":11850188,"display_name":"Damee"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1655078414,"creation_date":1655078414,"answer_id":72596685,"question_id":72596422,"body_markdown":"The problem is you have an object &#39;current&#39; of type SinglyLinkedList&lt;T&gt; whose toString method is not overridden.\r\n    \r\n    public String toString() {\r\n        String answer = &quot;&quot;;\r\n        SinglyLinkedListNode&lt;T&gt; current = head;\r\n        while (current != null){\r\n            answer += current + &quot; &quot;;\r\n            current = current.getNext();\r\n        }\r\n        return answer;\r\n    }\r\nIf you cannot override toString method in SinglyLinkedListNode class then you can modify the while loop to:\r\n\r\n    while(current != null){\r\n        answer += current.getData() + &quot; &quot;;\r\n        current = current.getNext();\r\n    }\r\n\r\nAssuming your T has appropriate toString() method overridden. \r\n\r\nTo make the code more efficient you can use StringBuilder rather than concatenating strings.  \r\n\r\n    public String toString() {\r\n        //String answer = &quot; &quot;;\r\n        StringBuilder answer = new StringBuilder();\r\n        SinglyLinkedListNode&lt;T&gt; current = head;\r\n        while (current != null){\r\n            //answer += current + &quot; &quot;;\r\n            answer.append(current.getData());\r\n            answer.append(&quot; &quot;);\r\n            current = current.getNext();\r\n        }\r\n        return answer.toString();\r\n   }","title":"Why does my toString() method not return my Singly Linked List in a string format?","body":"<p>The problem is you have an object 'current' of type SinglyLinkedList whose toString method is not overridden.</p>\n<pre><code>public String toString() {\n    String answer = &quot;&quot;;\n    SinglyLinkedListNode&lt;T&gt; current = head;\n    while (current != null){\n        answer += current + &quot; &quot;;\n        current = current.getNext();\n    }\n    return answer;\n}\n</code></pre>\n<p>If you cannot override toString method in SinglyLinkedListNode class then you can modify the while loop to:</p>\n<pre><code>while(current != null){\n    answer += current.getData() + &quot; &quot;;\n    current = current.getNext();\n}\n</code></pre>\n<p>Assuming your T has appropriate toString() method overridden.</p>\n<p>To make the code more efficient you can use StringBuilder rather than concatenating strings.</p>\n<pre><code>public String toString() {\n    //String answer = &quot; &quot;;\n    StringBuilder answer = new StringBuilder();\n    SinglyLinkedListNode&lt;T&gt; current = head;\n    while (current != null){\n        //answer += current + &quot; &quot;;\n        answer.append(current.getData());\n        answer.append(&quot; &quot;);\n        current = current.getNext();\n    }\n    return answer.toString();\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":24867349,"reputation":31,"user_id":18742237,"display_name":"Jdonza"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":134,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1655078414,"creation_date":1655074279,"question_id":72596422,"body_markdown":"I am trying to implement a toString() method that returns the values in my singly-linked list in a string format by iterating through the list. See below for the SinglyLinkedList.java file which contains the toString() method. \r\n\r\n    import java.util.NoSuchElementException;\r\n    import java.util.*;\r\n    \r\n    /**\r\n     * Your implementation of a Singly-Linked List.\r\n     */\r\n    public class SinglyLinkedList&lt;T&gt; {\r\n    \t\r\n        /*\r\n         * Do not add new instance variables or modify existing ones.\r\n         */\r\n    \tprivate SinglyLinkedListNode&lt;T&gt; head;\r\n        \tprivate SinglyLinkedListNode&lt;T&gt; tail;\r\n        \tprivate int size;\r\n    \t\r\n        /*\r\n         * Do not add a constructor.\r\n         */\r\n    \r\n        /**\r\n         * Adds the element to the front of the list.\r\n         *\r\n         * Method should run in O(1) time.\r\n         *\r\n         * @param data the data to add to the front of the list\r\n         * @throws java.lang.IllegalArgumentException if data is null\r\n         */\r\n        \tpublic void addToFront(T data) {\r\n    \t\tif (data == null){\r\n    \t\t\tthrow new IllegalArgumentException(&quot;Data cannot be null&quot;);\r\n    \t\t}\r\n            \tSinglyLinkedListNode&lt;T&gt; newNode = new SinglyLinkedListNode&lt;T&gt;(data);\r\n    \t\tif (head == null){\r\n    \t\t\thead = newNode;\r\n    \t\t\ttail = newNode;\r\n    \t\t}\r\n    \t\telse{\r\n    \t\t\tnewNode.setNext(head);\r\n    \t\t\thead = newNode;\r\n    \t\t}\r\n    \t\tsize++;\r\n        \t}\r\n    \r\n        /**\r\n         * Adds the element to the back of the list.\r\n         *\r\n         * Method should run in O(1) time.\r\n         *\r\n         * @param data the data to add to the back of the list\r\n         * @throws java.lang.IllegalArgumentException if data is null\r\n         */\r\n    \tpublic void addToBack(T data) {\r\n    \t\tif (data == null){\r\n    \t\t\tthrow new IllegalArgumentException(&quot;Data cannot be null&quot;);\r\n    \t\t}\r\n            \tif (head == null){\r\n    \t\t\thead = new SinglyLinkedListNode&lt;T&gt;(data);\r\n    \t\t}\r\n    \t\telse {\r\n    \t\t\tSinglyLinkedListNode&lt;T&gt; current = head;\r\n    \t\t\twhile (current.getNext() != null){\r\n    \t\t\t\tcurrent = current.getNext();\r\n    \t\t\t}\r\n    \t\t\tcurrent.setNext(new SinglyLinkedListNode&lt;T&gt;(data));\r\n    \t\t}\r\n    \t\tsize++;\r\n        \t}\r\n    \r\n        /**\r\n         * Removes and returns the first data of the list.\r\n         *\r\n         * Method should run in O(1) time.\r\n         *\r\n         * @return the data formerly located at the front of the list\r\n         * @throws java.util.NoSuchElementException if the list is empty\r\n         */\r\n        \tpublic T removeFromFront() {\r\n    \t\tif (head == null){\r\n    \t\t\tthrow new NoSuchElementException(&quot;You cannot remove elements from the front of an empty list&quot;);\r\n    \t\t}\r\n    \t\tSinglyLinkedListNode&lt;T&gt; var = head;\r\n            \thead = head.getNext();\r\n    \t\tsize--; \r\n    \t\treturn var.getData();\r\n        \t}\r\n    \r\n        /**\r\n         * Removes and returns the last data of the list.\r\n         *\r\n         * Method should run in O(n) time.\r\n         *\r\n         * @return the data formerly located at the back of the list\r\n         * @throws java.util.NoSuchElementException if the list is empty\r\n         */\r\n        \tpublic T removeFromBack() {\r\n            \tif (head == null){\r\n    \t\t\tthrow new NoSuchElementException(&quot;You cannot remove an element from the back of an empty list&quot;);\r\n    \t\t}\r\n    \t\telse if (head.getNext() == null){\r\n    \t\t\tSinglyLinkedListNode&lt;T&gt; var = head;\r\n    \t\t\thead = null;\r\n    \t\t}\r\n    \t\tSinglyLinkedListNode&lt;T&gt; current = head;\r\n    \t\twhile (current.getNext().getNext() != null){\r\n    \t\t\tcurrent = current.getNext();\r\n    \t\t}\r\n    \t\tSinglyLinkedListNode&lt;T&gt; var = current.getNext();\r\n    \t\tcurrent.setNext(null);\r\n    \t\tsize--;\r\n    \t\treturn var.getData();\r\n       \t}\r\n    \r\n        /**\r\n         * Returns the head node of the list.\r\n         *\r\n         * For grading purposes only. You shouldn&#39;t need to use this method since\r\n         * you have direct access to the variable.\r\n         *\r\n         * @return the node at the head of the list\r\n         */\r\n        \tpublic SinglyLinkedListNode&lt;T&gt; getHead() {\r\n            // DO NOT MODIFY THIS METHOD!\r\n            \treturn head;\r\n        \t}\r\n    \r\n        /**\r\n         * Returns the tail node of the list.\r\n         *\r\n         * For grading purposes only. You shouldn&#39;t need to use this method since\r\n         * you have direct access to the variable.\r\n         *\r\n         * @return the node at the tail of the list\r\n         */\r\n        \tpublic SinglyLinkedListNode&lt;T&gt; getTail() {\r\n            // DO NOT MODIFY THIS METHOD!\r\n            \treturn tail;\r\n        \t}\r\n    \r\n        /**\r\n         * Returns the size of the list.\r\n         *\r\n         * For grading purposes only. You shouldn&#39;t need to use this method since\r\n         * you have direct access to the variable.\r\n         *\r\n         * @return the size of the list\r\n         */\r\n        \tpublic int size() {\r\n            // DO NOT MODIFY THIS METHOD!\r\n            \treturn size;\r\n        \t}\r\n    \t\r\n    \tpublic String toString() {\r\n    \t\tString answer = &quot;&quot;;\r\n    \t\tSinglyLinkedListNode&lt;T&gt; current = head;\r\n    \t\twhile (current != null){\r\n    \t\t\tanswer += current + &quot; &quot;;\r\n    \t\t\tcurrent = current.getNext();\r\n    \t\t}\r\n    \t\treturn answer;\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args){\r\n    \t\tSinglyLinkedList&lt;Integer&gt; list = new SinglyLinkedList&lt;&gt;();\r\n    \t\tlist.addToFront(1);\r\n    \t\tSystem.out.println(list.toString());\r\n    \t}\r\n    }\r\n\r\nAnd for my SinglyLinkedListNode.java file...\r\n\r\n    /**\r\n     * Node class used for implementing the SinglyLinkedList.\r\n     *\r\n     * DO NOT MODIFY THIS FILE!!\r\n     *\r\n     * @author CS 1332 TAs\r\n     * @version 1.0\r\n     */\r\n    public class SinglyLinkedListNode&lt;T&gt; {\r\n    \r\n        \tprivate T data;\r\n        \tprivate SinglyLinkedListNode&lt;T&gt; next;\r\n    \r\n        /**\r\n         * Constructs a new SinglyLinkedListNode with the given data and next node\r\n         * reference.\r\n         *\r\n         * @param data the data stored in the new node\r\n         * @param next the next node in the list\r\n         */\r\n        \tSinglyLinkedListNode(T data, SinglyLinkedListNode&lt;T&gt; next) {\r\n            \tthis.data = data;\r\n            \tthis.next = next;\r\n        \t}\r\n    \r\n        /**\r\n         * Creates a new SinglyLinkedListNode with only the given data.\r\n         *\r\n         * @param data the data stored in the new node\r\n         */\r\n        \tSinglyLinkedListNode(T data) {\r\n            \tthis(data, null);\r\n        \t}\r\n    \r\n        /**\r\n         * Gets the data.\r\n         *\r\n         * @return the data\r\n         */\r\n        \tT getData() {\r\n            \treturn data;\r\n        \t}\r\n    \r\n        /**\r\n         * Gets the next node.\r\n         *\r\n         * @return the next node\r\n         */\r\n        \tSinglyLinkedListNode&lt;T&gt; getNext() {\r\n            \treturn next;\r\n        \t}\r\n    \r\n        /**\r\n         * Sets the next node.\r\n         *\r\n         * @param next the new next node\r\n         */\r\n        \tvoid setNext(SinglyLinkedListNode&lt;T&gt; next) {\r\n            \tthis.next = next;\r\n    \t}\r\n    \r\n    }\r\n\r\nWhenever I call the toString() method from my SinglyLinkedList class, I get the following printed in my command prompt. \r\n\r\n [Command Prompt][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/P9Rby.png\r\n\r\nDoes anyone know why I do not see the value &quot;1&quot; which I am adding to the front of the linkedlist prior to calling the toString() method? And if so, what can I do to fix it? Instead, it keeps printing the node object. ","title":"Why does my toString() method not return my Singly Linked List in a string format?","body":"<p>I am trying to implement a toString() method that returns the values in my singly-linked list in a string format by iterating through the list. See below for the SinglyLinkedList.java file which contains the toString() method.</p>\n<pre><code>import java.util.NoSuchElementException;\nimport java.util.*;\n\n/**\n * Your implementation of a Singly-Linked List.\n */\npublic class SinglyLinkedList&lt;T&gt; {\n    \n    /*\n     * Do not add new instance variables or modify existing ones.\n     */\n    private SinglyLinkedListNode&lt;T&gt; head;\n        private SinglyLinkedListNode&lt;T&gt; tail;\n        private int size;\n    \n    /*\n     * Do not add a constructor.\n     */\n\n    /**\n     * Adds the element to the front of the list.\n     *\n     * Method should run in O(1) time.\n     *\n     * @param data the data to add to the front of the list\n     * @throws java.lang.IllegalArgumentException if data is null\n     */\n        public void addToFront(T data) {\n        if (data == null){\n            throw new IllegalArgumentException(&quot;Data cannot be null&quot;);\n        }\n            SinglyLinkedListNode&lt;T&gt; newNode = new SinglyLinkedListNode&lt;T&gt;(data);\n        if (head == null){\n            head = newNode;\n            tail = newNode;\n        }\n        else{\n            newNode.setNext(head);\n            head = newNode;\n        }\n        size++;\n        }\n\n    /**\n     * Adds the element to the back of the list.\n     *\n     * Method should run in O(1) time.\n     *\n     * @param data the data to add to the back of the list\n     * @throws java.lang.IllegalArgumentException if data is null\n     */\n    public void addToBack(T data) {\n        if (data == null){\n            throw new IllegalArgumentException(&quot;Data cannot be null&quot;);\n        }\n            if (head == null){\n            head = new SinglyLinkedListNode&lt;T&gt;(data);\n        }\n        else {\n            SinglyLinkedListNode&lt;T&gt; current = head;\n            while (current.getNext() != null){\n                current = current.getNext();\n            }\n            current.setNext(new SinglyLinkedListNode&lt;T&gt;(data));\n        }\n        size++;\n        }\n\n    /**\n     * Removes and returns the first data of the list.\n     *\n     * Method should run in O(1) time.\n     *\n     * @return the data formerly located at the front of the list\n     * @throws java.util.NoSuchElementException if the list is empty\n     */\n        public T removeFromFront() {\n        if (head == null){\n            throw new NoSuchElementException(&quot;You cannot remove elements from the front of an empty list&quot;);\n        }\n        SinglyLinkedListNode&lt;T&gt; var = head;\n            head = head.getNext();\n        size--; \n        return var.getData();\n        }\n\n    /**\n     * Removes and returns the last data of the list.\n     *\n     * Method should run in O(n) time.\n     *\n     * @return the data formerly located at the back of the list\n     * @throws java.util.NoSuchElementException if the list is empty\n     */\n        public T removeFromBack() {\n            if (head == null){\n            throw new NoSuchElementException(&quot;You cannot remove an element from the back of an empty list&quot;);\n        }\n        else if (head.getNext() == null){\n            SinglyLinkedListNode&lt;T&gt; var = head;\n            head = null;\n        }\n        SinglyLinkedListNode&lt;T&gt; current = head;\n        while (current.getNext().getNext() != null){\n            current = current.getNext();\n        }\n        SinglyLinkedListNode&lt;T&gt; var = current.getNext();\n        current.setNext(null);\n        size--;\n        return var.getData();\n    }\n\n    /**\n     * Returns the head node of the list.\n     *\n     * For grading purposes only. You shouldn't need to use this method since\n     * you have direct access to the variable.\n     *\n     * @return the node at the head of the list\n     */\n        public SinglyLinkedListNode&lt;T&gt; getHead() {\n        // DO NOT MODIFY THIS METHOD!\n            return head;\n        }\n\n    /**\n     * Returns the tail node of the list.\n     *\n     * For grading purposes only. You shouldn't need to use this method since\n     * you have direct access to the variable.\n     *\n     * @return the node at the tail of the list\n     */\n        public SinglyLinkedListNode&lt;T&gt; getTail() {\n        // DO NOT MODIFY THIS METHOD!\n            return tail;\n        }\n\n    /**\n     * Returns the size of the list.\n     *\n     * For grading purposes only. You shouldn't need to use this method since\n     * you have direct access to the variable.\n     *\n     * @return the size of the list\n     */\n        public int size() {\n        // DO NOT MODIFY THIS METHOD!\n            return size;\n        }\n    \n    public String toString() {\n        String answer = &quot;&quot;;\n        SinglyLinkedListNode&lt;T&gt; current = head;\n        while (current != null){\n            answer += current + &quot; &quot;;\n            current = current.getNext();\n        }\n        return answer;\n    }\n\n    public static void main(String[] args){\n        SinglyLinkedList&lt;Integer&gt; list = new SinglyLinkedList&lt;&gt;();\n        list.addToFront(1);\n        System.out.println(list.toString());\n    }\n}\n</code></pre>\n<p>And for my SinglyLinkedListNode.java file...</p>\n<pre><code>/**\n * Node class used for implementing the SinglyLinkedList.\n *\n * DO NOT MODIFY THIS FILE!!\n *\n * @author CS 1332 TAs\n * @version 1.0\n */\npublic class SinglyLinkedListNode&lt;T&gt; {\n\n        private T data;\n        private SinglyLinkedListNode&lt;T&gt; next;\n\n    /**\n     * Constructs a new SinglyLinkedListNode with the given data and next node\n     * reference.\n     *\n     * @param data the data stored in the new node\n     * @param next the next node in the list\n     */\n        SinglyLinkedListNode(T data, SinglyLinkedListNode&lt;T&gt; next) {\n            this.data = data;\n            this.next = next;\n        }\n\n    /**\n     * Creates a new SinglyLinkedListNode with only the given data.\n     *\n     * @param data the data stored in the new node\n     */\n        SinglyLinkedListNode(T data) {\n            this(data, null);\n        }\n\n    /**\n     * Gets the data.\n     *\n     * @return the data\n     */\n        T getData() {\n            return data;\n        }\n\n    /**\n     * Gets the next node.\n     *\n     * @return the next node\n     */\n        SinglyLinkedListNode&lt;T&gt; getNext() {\n            return next;\n        }\n\n    /**\n     * Sets the next node.\n     *\n     * @param next the new next node\n     */\n        void setNext(SinglyLinkedListNode&lt;T&gt; next) {\n            this.next = next;\n    }\n\n}\n</code></pre>\n<p>Whenever I call the toString() method from my SinglyLinkedList class, I get the following printed in my command prompt.</p>\n<p><a href=\"https://i.stack.imgur.com/P9Rby.png\" rel=\"nofollow noreferrer\">Command Prompt</a></p>\n<p>Does anyone know why I do not see the value &quot;1&quot; which I am adding to the front of the linkedlist prior to calling the toString() method? And if so, what can I do to fix it? Instead, it keeps printing the node object.</p>\n"},{"tags":["java","arrays","recursion","mergesort","concept"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1654587582,"post_id":72527490,"comment_id":128119707,"body_markdown":"You don&#39;t need two variables, that&#39;s just how that implementation has chosen to do it. Look at your single variable implementation. Do you see how it doesn&#39;t do the same thing as the original?","body":"You don&#39;t need two variables, that&#39;s just how that implementation has chosen to do it. Look at your single variable implementation. Do you see how it doesn&#39;t do the same thing as the original?"},{"owner":{"account_id":8306545,"reputation":47696,"user_id":6243352,"display_name":"ggorlen"},"score":0,"creation_date":1654703052,"post_id":72527490,"comment_id":128156094,"body_markdown":"You&#39;re merging two lists, so there&#39;s one var to keep track of the separate indexes per list. The loops don&#39;t run simultaneously, exactly, they run one after the other.","body":"You&#39;re merging two lists, so there&#39;s one var to keep track of the separate indexes per list. The loops don&#39;t run simultaneously, exactly, they run one after the other."}],"answers":[{"tags":[],"owner":{"account_id":5823909,"reputation":136954,"user_id":4593267,"accept_rate":62,"display_name":"chqrlie"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655078333,"creation_date":1655078333,"answer_id":72596680,"question_id":72527490,"body_markdown":"You could use a single variable in this final loop, but you must add the offset of the start of the slice in the destination array:\r\n\r\n```\r\nfor (int i = 0; i &lt; arr.length; i++) {\r\n    arr[si + i] = merged[i];\r\n}\r\n```","title":"Why do we use two different loop variables while sorting an array using merge sort?","body":"<p>You could use a single variable in this final loop, but you must add the offset of the start of the slice in the destination array:</p>\n<pre><code>for (int i = 0; i &lt; arr.length; i++) {\n    arr[si + i] = merged[i];\n}\n</code></pre>\n"}],"owner":{"account_id":25417304,"reputation":11,"user_id":19223978,"display_name":"Udbhas Dutta"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":128,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1655078333,"creation_date":1654587219,"question_id":72527490,"body_markdown":"I was learning to merge sort an integer array, when I noticed that while copying the sorted array elements to the original array, we need two separate loop variables to run simultaneously, while the values at those indices are copied to the original array. Here is the code for reference:\r\n\r\n    class MergeSort {\r\n    public static void sort(int arr[], int si, int ei, int mid) {\r\n\r\n        int merged[] = new int[ei - si + 1];\r\n        int index1 = si; // tracks the first array\r\n        int index2 = mid + 1; // tracks the second array\r\n        int i = 0;\r\n        while (index1 &lt;= mid &amp;&amp; index2 &lt;= ei) {\r\n            if (arr[index1] &lt;= arr[index2]) {\r\n                merged[i++] = arr[index1++];\r\n            } else {\r\n                merged[i++] = arr[index2++];\r\n            }\r\n        } // end of while\r\n\r\n        while (index1 &lt;= mid) {\r\n            merged[i++] = arr[index1++];\r\n        }\r\n\r\n        while (index2 &lt;= ei) {\r\n            merged[i++] = arr[index2++];\r\n        }\r\n        // to copy merged[] to arr[] \r\n            \r\n        int j = si;\r\n        for (i = 0; i &lt; merged.length; i++, j++) {\r\n            arr[j] = merged[i];\r\n        }\r\n    } // end sort()\r\n\r\n    public static void divide(int arr[], int si, int ei) {\r\n        //  base case\r\n        if (si &gt;= ei) {\r\n            return;\r\n        } // end of base case\r\n\r\n        int mid = si + (ei - si) / 2; // same as (ei-si)/2 but with less space complexity\r\n        divide(arr, si, mid);\r\n        divide(arr, mid + 1, ei);\r\n        sort(arr, si, ei, mid);\r\n    } // end of divide\r\n\r\n    public static void main(String args[]) {\r\n        int arr[] = { 1, 8, 0, 7, -4 };\r\n        int n = arr.length;\r\n        divide(arr, 0, n - 1);\r\n\r\n        for (int i = 0; i &lt; n; i++) {\r\n            System.out.print(arr[i] + &quot; &quot;);\r\n        } // end of for\r\n    } // end of main\r\n    } // end of class\r\n\r\nNotice that while copying the values of the array `merged[]` to the array `arr[]`, we are using two separate variables `i` and `j`. I did try using only one loop variable, which went like:\r\n\r\n    for (int i = 0; i &lt; arr.length; i++) {\r\n        arr[i] = merged[i];\r\n    }\r\n\r\n but received an incorrect output. If anyone knows why we need two separate variables for the operation, please let me know. Thank you :)\r\n ","title":"Why do we use two different loop variables while sorting an array using merge sort?","body":"<p>I was learning to merge sort an integer array, when I noticed that while copying the sorted array elements to the original array, we need two separate loop variables to run simultaneously, while the values at those indices are copied to the original array. Here is the code for reference:</p>\n<pre><code>class MergeSort {\npublic static void sort(int arr[], int si, int ei, int mid) {\n\n    int merged[] = new int[ei - si + 1];\n    int index1 = si; // tracks the first array\n    int index2 = mid + 1; // tracks the second array\n    int i = 0;\n    while (index1 &lt;= mid &amp;&amp; index2 &lt;= ei) {\n        if (arr[index1] &lt;= arr[index2]) {\n            merged[i++] = arr[index1++];\n        } else {\n            merged[i++] = arr[index2++];\n        }\n    } // end of while\n\n    while (index1 &lt;= mid) {\n        merged[i++] = arr[index1++];\n    }\n\n    while (index2 &lt;= ei) {\n        merged[i++] = arr[index2++];\n    }\n    // to copy merged[] to arr[] \n        \n    int j = si;\n    for (i = 0; i &lt; merged.length; i++, j++) {\n        arr[j] = merged[i];\n    }\n} // end sort()\n\npublic static void divide(int arr[], int si, int ei) {\n    //  base case\n    if (si &gt;= ei) {\n        return;\n    } // end of base case\n\n    int mid = si + (ei - si) / 2; // same as (ei-si)/2 but with less space complexity\n    divide(arr, si, mid);\n    divide(arr, mid + 1, ei);\n    sort(arr, si, ei, mid);\n} // end of divide\n\npublic static void main(String args[]) {\n    int arr[] = { 1, 8, 0, 7, -4 };\n    int n = arr.length;\n    divide(arr, 0, n - 1);\n\n    for (int i = 0; i &lt; n; i++) {\n        System.out.print(arr[i] + &quot; &quot;);\n    } // end of for\n} // end of main\n} // end of class\n</code></pre>\n<p>Notice that while copying the values of the array <code>merged[]</code> to the array <code>arr[]</code>, we are using two separate variables <code>i</code> and <code>j</code>. I did try using only one loop variable, which went like:</p>\n<pre><code>for (int i = 0; i &lt; arr.length; i++) {\n    arr[i] = merged[i];\n}\n</code></pre>\n<p>but received an incorrect output. If anyone knows why we need two separate variables for the operation, please let me know. Thank you :)</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1655039682,"post_id":72592417,"comment_id":128230976,"body_markdown":"It&#39;s a method in the same controller, right? So just call it as a method. Just keep in mind that the return value of the `sendOtp` is a String. For controllers (annotated with `@Controller` and not `@RestController`), this means it&#39;s the name of the view to render. That rendering won&#39;t be done unless the `loginUser` method returns the same String, or something else that causes a view to be rendered such as `View` or `ModelAndView`.","body":"It&#39;s a method in the same controller, right? So just call it as a method. Just keep in mind that the return value of the <code>sendOtp</code> is a String. For controllers (annotated with <code>@Controller</code> and not <code>@RestController</code>), this means it&#39;s the name of the view to render. That rendering won&#39;t be done unless the <code>loginUser</code> method returns the same String, or something else that causes a view to be rendered such as <code>View</code> or <code>ModelAndView</code>."},{"owner":{"account_id":24170680,"reputation":25,"user_id":18132793,"display_name":"Harshit Toxia"},"score":0,"creation_date":1655039952,"post_id":72592417,"comment_id":128231037,"body_markdown":"@RobSpoor No both methods are in different controller.","body":"@RobSpoor No both methods are in different controller."},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1655042368,"post_id":72592417,"comment_id":128231544,"body_markdown":"You can try injecting the second controller in the first one. Not something I&#39;ve done before. Alternatively, move the `sendOtp` code to a separate service. The new service method can return `void`, as the view to render should be defined by the controller, not the service.","body":"You can try injecting the second controller in the first one. Not something I&#39;ve done before. Alternatively, move the <code>sendOtp</code> code to a separate service. The new service method can return <code>void</code>, as the view to render should be defined by the controller, not the service."},{"owner":{"account_id":8056656,"reputation":587,"user_id":6073577,"accept_rate":100,"display_name":"Johnczek"},"score":1,"creation_date":1655042721,"post_id":72592417,"comment_id":128231635,"body_markdown":"@RobSpoor injecting controller in another controller is antipattern. The best solution is, as you suggested, move code into separate service and use it in both endpoints.","body":"@RobSpoor injecting controller in another controller is antipattern. The best solution is, as you suggested, move code into separate service and use it in both endpoints."},{"owner":{"account_id":24170680,"reputation":25,"user_id":18132793,"display_name":"Harshit Toxia"},"score":0,"creation_date":1655043709,"post_id":72592417,"comment_id":128231861,"body_markdown":"@Johnczek I have already made another service for /send-otp. I am new to springboot so can you explain me what do you mean by use it in both endpoint?","body":"@Johnczek I have already made another service for /send-otp. I am new to springboot so can you explain me what do you mean by use it in both endpoint?"},{"owner":{"account_id":8056656,"reputation":587,"user_id":6073577,"accept_rate":100,"display_name":"Johnczek"},"score":1,"creation_date":1655051319,"post_id":72592417,"comment_id":128233550,"body_markdown":"@HarshitToxia If you have, for example, 2 endpoints which first one (endpoint 1) consists of calling methods A and B and second endpoint consists of calling method B, you should have these methods A and B in dedicated service (or 2 services if these methods has nothing in common). And then you just inject that service in both controllers and call these methods from there. Controller SHOULD NOT hold any further logic, thats what services do.","body":"@HarshitToxia If you have, for example, 2 endpoints which first one (endpoint 1) consists of calling methods A and B and second endpoint consists of calling method B, you should have these methods A and B in dedicated service (or 2 services if these methods has nothing in common). And then you just inject that service in both controllers and call these methods from there. Controller SHOULD NOT hold any further logic, thats what services do."}],"answers":[{"tags":[],"owner":{"account_id":25481526,"reputation":336,"user_id":19277782,"display_name":"CaptainPyscho"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655077803,"creation_date":1655077803,"answer_id":72596642,"question_id":72592417,"body_markdown":"You could create a ServiceOTP class like this:\r\n   \r\n   \r\n\r\n    public class ServiceOTP {\r\n           public void sendOTP(String email) {\r\n               int otp = random.nextInt(999999);\r\n                \r\n                String subject = &quot;OTP from session-handling-proj By Harshit&quot;;\r\n                String toEmail = email;\r\n                String body = &quot;&lt;h1&gt; OTP = &quot; + otp + &quot;&lt;/h1&gt;&quot;;\r\n                \r\n                  this.emailService.sendMail(toEmail, subject, body);\r\n           }\r\n        }\r\n\r\nEmailcontroller class -\r\n\r\n    @PostMapping(&quot;/send-otp&quot;)\r\n    public String sendOtp(@RequestParam(&quot;email&quot;) String email) {\r\n          myServiceOTPInstance.sendOTP(email);\r\n          return (&quot;succes&quot;)\r\n    }\r\n\r\nController classs ---\r\n\r\n    @PostMapping(&quot;/login&quot;)\r\n        public SessionHandling loginUser(@RequestBody SessionHandling login) throws Exception {\r\n       //your code\r\n        myServiceOTPInstance.sendOTP(email)\r\n       //your code\r\n    }\r\n\r\n","title":"How to call another post mapping api in another api in springboot","body":"<p>You could create a ServiceOTP class like this:</p>\n<pre><code>public class ServiceOTP {\n       public void sendOTP(String email) {\n           int otp = random.nextInt(999999);\n            \n            String subject = &quot;OTP from session-handling-proj By Harshit&quot;;\n            String toEmail = email;\n            String body = &quot;&lt;h1&gt; OTP = &quot; + otp + &quot;&lt;/h1&gt;&quot;;\n            \n              this.emailService.sendMail(toEmail, subject, body);\n       }\n    }\n</code></pre>\n<p>Emailcontroller class -</p>\n<pre><code>@PostMapping(&quot;/send-otp&quot;)\npublic String sendOtp(@RequestParam(&quot;email&quot;) String email) {\n      myServiceOTPInstance.sendOTP(email);\n      return (&quot;succes&quot;)\n}\n</code></pre>\n<p>Controller classs ---</p>\n<pre><code>@PostMapping(&quot;/login&quot;)\n    public SessionHandling loginUser(@RequestBody SessionHandling login) throws Exception {\n   //your code\n    myServiceOTPInstance.sendOTP(email)\n   //your code\n}\n</code></pre>\n"}],"owner":{"account_id":24170680,"reputation":25,"user_id":18132793,"display_name":"Harshit Toxia"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":682,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1655077803,"creation_date":1655038962,"question_id":72592417,"body_markdown":"I made a postmapping call - (/login) I just want to call (/sendotp) api in it. I am making a project where if a person successfully login he will get a otp.\r\nThis is my code in controller class in springboot -\r\n\r\n\r\nController classs --- \r\n\r\n```\r\n\r\n\t@PostMapping(&quot;/login&quot;)\r\n\tpublic SessionHandling loginUser(@RequestBody SessionHandling login) throws Exception {\r\n\t\tString tempEmailId = login.getEmail();\r\n\t\tString takePassword = login.getPassword();\r\n\t\tSessionHandling UserObj = null;\r\n\t\tif(tempEmailId != null &amp;&amp; takePassword != null) {\r\n\t\tUserObj = service.fetchUserByEmailIdAndPassword(tempEmailId, takePassword);\t\r\n\t\t}\r\n\t\tif(UserObj == null) {\r\n\t\t\tthrow new Exception(&quot;invalid / user does not exist&quot;);\r\n\t\t}\r\n\t\treturn UserObj;\r\n\t}\r\n\t\r\n\t\r\n```\r\n\r\n\r\nEmailcontroller class -\r\n\r\n```\r\n@PostMapping(&quot;/send-otp&quot;)\r\n\tpublic String sendOtp(@RequestParam(&quot;email&quot;) String email) {\r\n\t\t\r\n\t\tint otp = random.nextInt(999999);\r\n\t\t\r\n\t\tString subject = &quot;OTP from session-handling-proj By Harshit&quot;;\r\n\t\tString toEmail = email;\r\n\t\tString body = &quot;&lt;h1&gt; OTP = &quot; + otp + &quot;&lt;/h1&gt;&quot;;\r\n\t\t\r\n\t\t  this.emailService.sendMail(toEmail, subject, body);\r\n\t\t  return (&quot;succes&quot;);\r\n\t}\r\n```\r\n\r\n\r\n\r\nI just want to call /send-otp in /login if the the login details are correct.","title":"How to call another post mapping api in another api in springboot","body":"<p>I made a postmapping call - (/login) I just want to call (/sendotp) api in it. I am making a project where if a person successfully login he will get a otp.\nThis is my code in controller class in springboot -</p>\n<p>Controller classs ---</p>\n<pre><code>\n    @PostMapping(&quot;/login&quot;)\n    public SessionHandling loginUser(@RequestBody SessionHandling login) throws Exception {\n        String tempEmailId = login.getEmail();\n        String takePassword = login.getPassword();\n        SessionHandling UserObj = null;\n        if(tempEmailId != null &amp;&amp; takePassword != null) {\n        UserObj = service.fetchUserByEmailIdAndPassword(tempEmailId, takePassword); \n        }\n        if(UserObj == null) {\n            throw new Exception(&quot;invalid / user does not exist&quot;);\n        }\n        return UserObj;\n    }\n    \n    \n</code></pre>\n<p>Emailcontroller class -</p>\n<pre><code>@PostMapping(&quot;/send-otp&quot;)\n    public String sendOtp(@RequestParam(&quot;email&quot;) String email) {\n        \n        int otp = random.nextInt(999999);\n        \n        String subject = &quot;OTP from session-handling-proj By Harshit&quot;;\n        String toEmail = email;\n        String body = &quot;&lt;h1&gt; OTP = &quot; + otp + &quot;&lt;/h1&gt;&quot;;\n        \n          this.emailService.sendMail(toEmail, subject, body);\n          return (&quot;succes&quot;);\n    }\n</code></pre>\n<p>I just want to call /send-otp in /login if the the login details are correct.</p>\n"},{"tags":["java","selenium","katalon"],"owner":{"account_id":25466270,"reputation":11,"user_id":19265283,"display_name":"Michael Brogan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":187,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1655077749,"creation_date":1654270476,"question_id":72491955,"body_markdown":"I&#39;ve had a problem with the Selenium web driver trying to find a button on the page and click it. The page buffers every time so I implemented a wait time and it&#39;s still not working. Is there another command I should use or is this an easy fix? \r\n\r\n**Error:**\r\n\r\n    //java.lang.NullPointerException: Cannot invoke &quot;org.openqa.selenium.WebElement.click()&quot; because &quot;this.facilitySelect&quot; is null\r\n     at com.katalon.kata.sample.testcase.simple.MakeAppointmentTest.shouldMakeAppointment(MakeAppointmentTest.java:40)].\r\n\r\n**Code:**\r\n\r\n    package com.katalon.kata.sample.testcase.simple;\r\n    import com.katalon.kata.sample.Constants;\r\n    import com.katalon.kata.sample.page.CuraAppoinmentPage;\r\n    import com.katalon.kata.sample.page.CuraAppointmentConfirmPage;\r\n    import com.katalon.kata.sample.page.CuraHomePage;\r\n    import com.katalon.kata.sample.page.CuraLoginPage;\r\n    import com.katalon.kata.testng.TestTemplate;\r\n    import org.testng.annotations.Test;\r\n    import java.io.IOException;\r\n    import org.openqa.selenium.WebElement;\r\n    import org.openqa.selenium.support.FindBy;\r\n    import java.util.concurrent.TimeUnit;\r\n    \r\n    public class MakeAppointmentTest extends TestTemplate {\r\n    \r\n      private CuraHomePage curaHomePage = new CuraHomePage(Constants.baseUrl);\r\n    \r\n      private CuraLoginPage loginPage;\r\n    \r\n      //private CuraAppoinmentPage curaAppoinmentPage;\r\n    \r\n      //private CuraAppointmentConfirmPage curaAppointmentConfirmPage;\r\n      @FindBy(id = &quot;btnClose&quot;)\r\n      private WebElement facilitySelect;\r\n      \r\n      @FindBy(id = &quot;btnbillingModeOK&quot;)\r\n      private WebElement bookAppointmentBtn;\r\n      \r\n    \r\n      @Test\r\n      public void shouldMakeAppointment() throws IOException {\r\n        \r\n       //curaHomePage.makeAppointment();\r\n       curaHomePage.open();\r\n        loginPage.login(Constants.username, Constants.password);\r\n        curaHomePage.makerarr();\r\n        for(int s=0;s&lt; curaHomePage.array.length;s++){\r\n          curaHomePage.openNext(curaHomePage.array[s]);\r\n          driver.manage().timeouts().implicitlyWait(5, TimeUnit.SECONDS);\r\n          facilitySelect.click();\r\n    \r\n          driver.manage().timeouts().implicitlyWait(5, TimeUnit.SECONDS);\r\n            bookAppointmentBtn.click();\r\n        }\r\n        driver.quit();\r\n      }\r\n    }\r\n\r\n","title":"Selenium web element findby click is null","body":"<p>I've had a problem with the Selenium web driver trying to find a button on the page and click it. The page buffers every time so I implemented a wait time and it's still not working. Is there another command I should use or is this an easy fix?</p>\n<p><strong>Error:</strong></p>\n<pre><code>//java.lang.NullPointerException: Cannot invoke &quot;org.openqa.selenium.WebElement.click()&quot; because &quot;this.facilitySelect&quot; is null\n at com.katalon.kata.sample.testcase.simple.MakeAppointmentTest.shouldMakeAppointment(MakeAppointmentTest.java:40)].\n</code></pre>\n<p><strong>Code:</strong></p>\n<pre><code>package com.katalon.kata.sample.testcase.simple;\nimport com.katalon.kata.sample.Constants;\nimport com.katalon.kata.sample.page.CuraAppoinmentPage;\nimport com.katalon.kata.sample.page.CuraAppointmentConfirmPage;\nimport com.katalon.kata.sample.page.CuraHomePage;\nimport com.katalon.kata.sample.page.CuraLoginPage;\nimport com.katalon.kata.testng.TestTemplate;\nimport org.testng.annotations.Test;\nimport java.io.IOException;\nimport org.openqa.selenium.WebElement;\nimport org.openqa.selenium.support.FindBy;\nimport java.util.concurrent.TimeUnit;\n\npublic class MakeAppointmentTest extends TestTemplate {\n\n  private CuraHomePage curaHomePage = new CuraHomePage(Constants.baseUrl);\n\n  private CuraLoginPage loginPage;\n\n  //private CuraAppoinmentPage curaAppoinmentPage;\n\n  //private CuraAppointmentConfirmPage curaAppointmentConfirmPage;\n  @FindBy(id = &quot;btnClose&quot;)\n  private WebElement facilitySelect;\n  \n  @FindBy(id = &quot;btnbillingModeOK&quot;)\n  private WebElement bookAppointmentBtn;\n  \n\n  @Test\n  public void shouldMakeAppointment() throws IOException {\n    \n   //curaHomePage.makeAppointment();\n   curaHomePage.open();\n    loginPage.login(Constants.username, Constants.password);\n    curaHomePage.makerarr();\n    for(int s=0;s&lt; curaHomePage.array.length;s++){\n      curaHomePage.openNext(curaHomePage.array[s]);\n      driver.manage().timeouts().implicitlyWait(5, TimeUnit.SECONDS);\n      facilitySelect.click();\n\n      driver.manage().timeouts().implicitlyWait(5, TimeUnit.SECONDS);\n        bookAppointmentBtn.click();\n    }\n    driver.quit();\n  }\n}\n</code></pre>\n"},{"tags":["java","nested"],"comments":[{"owner":{"account_id":297410,"reputation":10125,"user_id":602928,"accept_rate":86,"display_name":"Michael Laffargue"},"score":0,"creation_date":1415174097,"post_id":26752103,"comment_id":42087627,"body_markdown":"http://howtoprogramwithjava.com/nested-if-statements/","body":"<a href=\"http://howtoprogramwithjava.com/nested-if-statements/\" rel=\"nofollow noreferrer\">howtoprogramwithjava.com/nested-if-statements</a>"},{"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"score":0,"creation_date":1415174155,"post_id":26752103,"comment_id":42087644,"body_markdown":"What&#39;s the problem? You already got the nested if statements. You just have to display the requested output.","body":"What&#39;s the problem? You already got the nested if statements. You just have to display the requested output."},{"owner":{"account_id":1602798,"reputation":7657,"user_id":1483533,"accept_rate":60,"display_name":"Alvin Bunk"},"score":1,"creation_date":1415174261,"post_id":26752103,"comment_id":42087679,"body_markdown":"You need to &quot;AND&quot; those together!","body":"You need to &quot;AND&quot; those together!"},{"owner":{"account_id":3054548,"reputation":139,"user_id":2588486,"display_name":"bwa-"},"score":1,"creation_date":1415174326,"post_id":26752103,"comment_id":42087709,"body_markdown":"...and put another if into that &quot;AND&quot;ed if that checks which number is larger.","body":"...and put another if into that &quot;AND&quot;ed if that checks which number is larger."},{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":0,"creation_date":1415180110,"post_id":26752103,"comment_id":42090435,"body_markdown":"`showInputDialog` does not return an `int`.","body":"<code>showInputDialog</code> does not return an <code>int</code>."},{"owner":{"account_id":5282141,"reputation":17,"user_id":4217132,"display_name":"Granit Lahu"},"score":0,"creation_date":1415182335,"post_id":26752103,"comment_id":42091738,"body_markdown":"@khelwood meaning i have to use scanner class?","body":"@khelwood meaning i have to use scanner class?"},{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":0,"creation_date":1415183645,"post_id":26752103,"comment_id":42092474,"body_markdown":"@GranitLahu No, meaning you have to get a String and then [parse it as an int](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29)","body":"@GranitLahu No, meaning you have to get a String and then <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29\" rel=\"nofollow noreferrer\">parse it as an int</a>"}],"answers":[{"tags":[],"owner":{"account_id":3618474,"reputation":1861,"user_id":3017818,"accept_rate":100,"display_name":"Daniel"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1415174917,"creation_date":1415174401,"answer_id":26752211,"question_id":26752103,"body_markdown":"&gt; if amountl is greater than 10 and amount 2 is less than 100, display the greater of the two. \r\n\r\n\r\nYou have to &#39;translate&#39; this statement from plain english to plain Java( or any other programming *language*)\r\n\r\nTranslation:\r\n\r\n    if(amount1 &gt; 10 &amp;&amp; amount2 &lt; 100){\r\n        System.out.println(amount1 &gt; amount2 ? amount1 : amount2);\r\n    }\r\n\r\nor you can use the predefined Java tools which come bundled with the JRE, so you don&#39;t have to rewrite the same piece of code over and over again. This version is using the predefined [Math.max(int,int)](http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html#max(int,%20int))\r\n\r\n    if(amount1 &gt; 10 &amp;&amp; amount2 &lt; 100){\r\n        System.out.println(Math.max(amount1,amount2));\r\n    }\r\n\r\n\r\nOr if you insist, just rewrite the max function by yourself:\r\n\r\n    public int greaterOfTwo(int first, int second){ // or simply call it max\r\n        return first &gt; second ? first : second;\r\n    }\r\n    \r\n    if(amount1 &gt; 10 &amp;&amp; amount2 &lt; 100){\r\n        System.out.println(greaterOfTwo(amoun1,amount2));\r\n    }\r\n\r\n","title":"Nested IF statements, trouble completing","body":"<blockquote>\n  <p>if amountl is greater than 10 and amount 2 is less than 100, display the greater of the two. </p>\n</blockquote>\n\n<p>You have to 'translate' this statement from plain english to plain Java( or any other programming <em>language</em>)</p>\n\n<p>Translation:</p>\n\n<pre><code>if(amount1 &gt; 10 &amp;&amp; amount2 &lt; 100){\n    System.out.println(amount1 &gt; amount2 ? amount1 : amount2);\n}\n</code></pre>\n\n<p>or you can use the predefined Java tools which come bundled with the JRE, so you don't have to rewrite the same piece of code over and over again. This version is using the predefined <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html#max(int,%20int)\" rel=\"nofollow\">Math.max(int,int)</a></p>\n\n<pre><code>if(amount1 &gt; 10 &amp;&amp; amount2 &lt; 100){\n    System.out.println(Math.max(amount1,amount2));\n}\n</code></pre>\n\n<p>Or if you insist, just rewrite the max function by yourself:</p>\n\n<pre><code>public int greaterOfTwo(int first, int second){ // or simply call it max\n    return first &gt; second ? first : second;\n}\n\nif(amount1 &gt; 10 &amp;&amp; amount2 &lt; 100){\n    System.out.println(greaterOfTwo(amoun1,amount2));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5118024,"reputation":821,"user_id":4102523,"accept_rate":17,"display_name":"tww0003"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1415176003,"creation_date":1415176003,"answer_id":26752581,"question_id":26752103,"body_markdown":"The answers here all work, but everyone seems to have glanced over the instructions. It says write a nested if statement, which is just an if statement inside of another if statement.\r\n  \r\nYou&#39;re going to want to do something along the lines of this:\r\n\r\n    if(amount1 &gt; 10 &amp;&amp; amount2 &lt; 100){\r\n        if(amount1 &gt; amount2){\r\n            System.out.println(amount1);\r\n        }\r\n        else{\r\n            System.out.println(amount2);\r\n        }\r\n    }\r\n","title":"Nested IF statements, trouble completing","body":"<p>The answers here all work, but everyone seems to have glanced over the instructions. It says write a nested if statement, which is just an if statement inside of another if statement.</p>\n\n<p>You're going to want to do something along the lines of this:</p>\n\n<pre><code>if(amount1 &gt; 10 &amp;&amp; amount2 &lt; 100){\n    if(amount1 &gt; amount2){\n        System.out.println(amount1);\n    }\n    else{\n        System.out.println(amount2);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25540243,"reputation":1,"user_id":19326444,"display_name":"Anam Waleed"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655077437,"creation_date":1655077437,"answer_id":72596626,"question_id":26752103,"body_markdown":"int amount1, amount2;\r\n    String input1, input2;\r\n    \r\n    \r\n    input1 = JOptionPane.showInputDialog(&quot;Enter the amount:&quot;);\r\n    amount1 = Integer.parseInt(input1);\r\n    \r\n    input2 = JOptionPane.showInputDialog(&quot;Enter the second amount:&quot;);\r\n    amount2 = Integer.parseInt(input2);\r\n    \r\n    if(amount1 &gt; 10 &amp;&amp; amount2 &lt; 100)\r\n    {\r\n    if(amount1 &gt; amount2)\r\n    {\r\n        JOptionPane.showMessageDialog(null, &quot;Amount 1 is the greater amount of &quot; + amount1);\r\n    }\r\n    else\r\n    {\r\n        JOptionPane.showMessageDialog(null,&quot;Amount 2 is the greater amount of &quot; + amount2);\r\n    }\r\n    }\r\n    else\r\n    {\r\n    JOptionPane.showMessageDialog(null, &quot;Type the number greater than 10 or less than 100.&quot;);\r\n    }\r\n  \r\n    System.exit(0);\r\n    \r\n    }\r\n    \r\n    \r\n    \r\n}","title":"Nested IF statements, trouble completing","body":"<p>int amount1, amount2;\nString input1, input2;</p>\n<pre><code>input1 = JOptionPane.showInputDialog(&quot;Enter the amount:&quot;);\namount1 = Integer.parseInt(input1);\n\ninput2 = JOptionPane.showInputDialog(&quot;Enter the second amount:&quot;);\namount2 = Integer.parseInt(input2);\n\nif(amount1 &gt; 10 &amp;&amp; amount2 &lt; 100)\n{\nif(amount1 &gt; amount2)\n{\n    JOptionPane.showMessageDialog(null, &quot;Amount 1 is the greater amount of &quot; + amount1);\n}\nelse\n{\n    JOptionPane.showMessageDialog(null,&quot;Amount 2 is the greater amount of &quot; + amount2);\n}\n}\nelse\n{\nJOptionPane.showMessageDialog(null, &quot;Type the number greater than 10 or less than 100.&quot;);\n}\n\nSystem.exit(0);\n\n}\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":5282141,"reputation":17,"user_id":4217132,"display_name":"Granit Lahu"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2498,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":26752581,"answer_count":3,"score":-1,"last_activity_date":1655077437,"creation_date":1415174001,"question_id":26752103,"body_markdown":"The question on my homework is:\r\n\r\n&gt; Write nested if statements that perform the following test: If `amountl` is greater than `10` and `amount2` is less than `100`, display the greater of the two. \r\n\r\nThis is what I have so far:\r\n\r\n    import javax.swing.JOptionPane;\r\n\r\n    public class nestedif {\r\n        public static void main(String[] args) {\r\n        \tint amount1, amount2;\r\n\r\n            amount1 = JOptionPane.showInputDialog(&quot;Enter amount 1: &quot;);\r\n            amount1 = Integer.parseInt(amount1);\r\n\r\n            amount2 = JOptionPane.showInputDialog(&quot;Enter amount 2: &quot;);\r\n            amount2 = Integer.parseInt(amount2);\r\n\r\n        \tif (amount1&gt;10)\r\n        \t\t\r\n            if (amount2&lt;100)\r\n        \t\t\t\t\r\n        }\r\n    }\r\n","title":"Nested IF statements, trouble completing","body":"<p>The question on my homework is:</p>\n\n<blockquote>\n  <p>Write nested if statements that perform the following test: If <code>amountl</code> is greater than <code>10</code> and <code>amount2</code> is less than <code>100</code>, display the greater of the two. </p>\n</blockquote>\n\n<p>This is what I have so far:</p>\n\n<pre><code>import javax.swing.JOptionPane;\n\npublic class nestedif {\n    public static void main(String[] args) {\n        int amount1, amount2;\n\n        amount1 = JOptionPane.showInputDialog(\"Enter amount 1: \");\n        amount1 = Integer.parseInt(amount1);\n\n        amount2 = JOptionPane.showInputDialog(\"Enter amount 2: \");\n        amount2 = Integer.parseInt(amount2);\n\n        if (amount1&gt;10)\n\n        if (amount2&lt;100)\n\n    }\n}\n</code></pre>\n"},{"tags":["java","visual-studio-code","compilation"],"comments":[{"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"score":0,"creation_date":1655088545,"post_id":72596386,"comment_id":128239310,"body_markdown":"You can use Git for version control, more can be found [here](https://code.visualstudio.com/docs/editor/versioncontrol).","body":"You can use Git for version control, more can be found <a href=\"https://code.visualstudio.com/docs/editor/versioncontrol\" rel=\"nofollow noreferrer\">here</a>."}],"answers":[{"tags":[],"owner":{"account_id":22241467,"reputation":1,"user_id":16475898,"display_name":"Scott Czerneda"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655076611,"creation_date":1655076574,"answer_id":72596564,"question_id":72596386,"body_markdown":"I&#39;d suggest looking into GitHub. \\\r\nYou can upload your code from VSCode to a repository on GitHub that you and your friend can both access. \r\nIt&#39;s a version control system, so you can both work separately without worrying about overwriting each other&#39;s work.\\GitHub and VSC both have lots of good tutorials to get you started.","title":"VSCode how do two developers compile code on their own PC?","body":"<p>I'd suggest looking into GitHub. <br />\nYou can upload your code from VSCode to a repository on GitHub that you and your friend can both access.\nIt's a version control system, so you can both work separately without worrying about overwriting each other's work.\\GitHub and VSC both have lots of good tutorials to get you started.</p>\n"}],"owner":{"account_id":21564886,"reputation":1,"user_id":15898873,"display_name":"not dakota"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1655076611,"creation_date":1655073868,"question_id":72596386,"body_markdown":"I&#39;m using VSCode to make a Java game with my friend. We are using the java.awt libraries. We are using live share so we can both work on the code, but when we compile the game window only shows up for me (the host) and not him. How do we go about working on this game together?\r\n\r\nIf it&#39;s not clear what I&#39;m asking, please ask.","title":"VSCode how do two developers compile code on their own PC?","body":"<p>I'm using VSCode to make a Java game with my friend. We are using the java.awt libraries. We are using live share so we can both work on the code, but when we compile the game window only shows up for me (the host) and not him. How do we go about working on this game together?</p>\n<p>If it's not clear what I'm asking, please ask.</p>\n"},{"tags":["java","spring-boot","datetime","request","javax.validation"],"comments":[{"owner":{"account_id":1939636,"reputation":28457,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":0,"creation_date":1547828639,"post_id":54257741,"comment_id":95339801,"body_markdown":"You can look more into *how to define custom validations and use annotations for them*.","body":"You can look more into <i>how to define custom validations and use annotations for them</i>."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1547832531,"post_id":54257741,"comment_id":95341674,"body_markdown":"FYI, the terrible `Date` class was supplanted years ago by the modern *java.time* classes with the adoption of JSR 310. Specifically, `Instant`. The modern classes use sane counting for the year and the month, unlike the legacy classes. For a date-only value without time-of-day and without time zone, use `LocalDate`.","body":"FYI, the terrible <code>Date</code> class was supplanted years ago by the modern <i>java.time</i> classes with the adoption of JSR 310. Specifically, <code>Instant</code>. The modern classes use sane counting for the year and the month, unlike the legacy classes. For a date-only value without time-of-day and without time zone, use <code>LocalDate</code>."}],"answers":[{"tags":[],"owner":{"account_id":4514444,"reputation":17059,"user_id":3669698,"accept_rate":55,"display_name":"Hadi J"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1547829546,"creation_date":1547829546,"answer_id":54258098,"question_id":54257741,"body_markdown":"You should define custom annotation for this propose. something like bellow:  \r\n\r\n \r\n\r\n    @Target(ElementType.FIELD)\r\n    @Retention(RUNTIME)\r\n    @Constraint(validatedBy = DateValidator.class)\r\n    @Documented\r\n    public @interface IsAfter{\r\n       String message() default &quot;{message.key}&quot;;\r\n       String current();\r\n    }\r\n\r\nand also define a custom validator like this: \r\n\r\n\r\n\r\n    public class DateValidator implements ConstraintValidator&lt;IsAfter, LocalDate&gt; {\r\n\r\n    String validDate;\r\n\r\n    @Override\r\n    public void initialize(IsAfter constraintAnnotation) {\r\n        validDate = constraintAnnotation.current();\r\n    }\r\n\r\n    @Override\r\n    public boolean isValid(LocalDate date, ConstraintValidatorContext constraintValidatorContext) {\r\n        String[] splitDate = validDate.split(&quot;-&quot;);\r\n        return date.isAfter(LocalDate.of(Integer.valueOf(splitDate[0]), Integer.valueOf(splitDate[1]), Integer.valueOf(splitDate[2])));\r\n      }\r\n    }\r\n\r\nand use this annotation: \r\n\r\n\r\n\r\n\r\n    @Past(message=&quot;date of birth must be less than today&quot;)  \r\n    @IsAfter(current = &quot;1900-01-01&quot;)\r\n    @DateTimeFormate( pattern=&quot;yyyy-MM-dd&quot;)\r\n    private Date dateOfBirth;\r\n\r\n***note: I haven&#39;t tested this annotation!***","title":"Using javax.validation validate the date must not be less than 1900-01-01","body":"<p>You should define custom annotation for this propose. something like bellow:  </p>\n\n<pre><code>@Target(ElementType.FIELD)\n@Retention(RUNTIME)\n@Constraint(validatedBy = DateValidator.class)\n@Documented\npublic @interface IsAfter{\n   String message() default \"{message.key}\";\n   String current();\n}\n</code></pre>\n\n<p>and also define a custom validator like this: </p>\n\n<pre><code>public class DateValidator implements ConstraintValidator&lt;IsAfter, LocalDate&gt; {\n\nString validDate;\n\n@Override\npublic void initialize(IsAfter constraintAnnotation) {\n    validDate = constraintAnnotation.current();\n}\n\n@Override\npublic boolean isValid(LocalDate date, ConstraintValidatorContext constraintValidatorContext) {\n    String[] splitDate = validDate.split(\"-\");\n    return date.isAfter(LocalDate.of(Integer.valueOf(splitDate[0]), Integer.valueOf(splitDate[1]), Integer.valueOf(splitDate[2])));\n  }\n}\n</code></pre>\n\n<p>and use this annotation: </p>\n\n<pre><code>@Past(message=\"date of birth must be less than today\")  \n@IsAfter(current = \"1900-01-01\")\n@DateTimeFormate( pattern=\"yyyy-MM-dd\")\nprivate Date dateOfBirth;\n</code></pre>\n\n<p><strong><em>note: I haven't tested this annotation!</em></strong></p>\n"},{"tags":[],"owner":{"account_id":21138914,"reputation":56,"user_id":15541786,"display_name":"KosztDojscia"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655076230,"creation_date":1655076230,"answer_id":72596547,"question_id":54257741,"body_markdown":"The post from https://stackoverflow.com/a/54258098/15541786 is great. I did it in my project and it&#39;s working. Just to avoid errors in console, add also to interface \r\n```java\r\n    Class&lt;?&gt;[] groups() default {};\r\n    Class&lt;? extends Payload&gt;[] payload() default {};\r\n```\r\nSo, working example:\r\n```java\r\n@Target(ElementType.FIELD)\r\n@Retention(RUNTIME)\r\n@Constraint(validatedBy = DateValidator.class)\r\n@Documented\r\npublic @interface IsAfter{\r\n   String message() default &quot;{message.key}&quot;;\r\n   String current();\r\n   Class&lt;?&gt;[] groups() default {};\r\n   Class&lt;? extends Payload&gt;[] payload() default {};\r\n}\r\n```","title":"Using javax.validation validate the date must not be less than 1900-01-01","body":"<p>The post from <a href=\"https://stackoverflow.com/a/54258098/15541786\">https://stackoverflow.com/a/54258098/15541786</a> is great. I did it in my project and it's working. Just to avoid errors in console, add also to interface</p>\n<pre class=\"lang-java prettyprint-override\"><code>    Class&lt;?&gt;[] groups() default {};\n    Class&lt;? extends Payload&gt;[] payload() default {};\n</code></pre>\n<p>So, working example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Target(ElementType.FIELD)\n@Retention(RUNTIME)\n@Constraint(validatedBy = DateValidator.class)\n@Documented\npublic @interface IsAfter{\n   String message() default &quot;{message.key}&quot;;\n   String current();\n   Class&lt;?&gt;[] groups() default {};\n   Class&lt;? extends Payload&gt;[] payload() default {};\n}\n</code></pre>\n"}],"owner":{"account_id":2835239,"reputation":1221,"user_id":2435969,"accept_rate":7,"display_name":"Prabhat Yadav"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13999,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1655076230,"creation_date":1547828219,"question_id":54257741,"body_markdown":"i have a class which is working as the request payload for my  api . I need to validate the one of my field &quot;dateOfBirth&quot;. Using the javax.validation.past  i am checkking the date is not  future date but i also want to validate that the date must not be less than 1900-01-01 . \r\n\r\nIs there any way using javax.validation api we can do it?\r\n\r\n    Class Employee{\r\n\r\n     ----\r\n     ---\r\n      @Past(message=&quot;date of birth must be less than today&quot;)  \r\n      @DateTimeFormate( pattern=&quot;yyyy-MM-dd&quot;)\r\n      private Date dateOfBirth;\r\n \r\n      //constuctor\r\n\r\n      //getter &amp; setter\r\n \r\n    }\r\n ","title":"Using javax.validation validate the date must not be less than 1900-01-01","body":"<p>i have a class which is working as the request payload for my  api . I need to validate the one of my field \"dateOfBirth\". Using the javax.validation.past  i am checkking the date is not  future date but i also want to validate that the date must not be less than 1900-01-01 . </p>\n\n<p>Is there any way using javax.validation api we can do it?</p>\n\n<pre><code>Class Employee{\n\n ----\n ---\n  @Past(message=\"date of birth must be less than today\")  \n  @DateTimeFormate( pattern=\"yyyy-MM-dd\")\n  private Date dateOfBirth;\n\n  //constuctor\n\n  //getter &amp; setter\n\n}\n</code></pre>\n"},{"tags":["java","swing","actionlistener","wait","notify"],"comments":[{"owner":{"account_id":9722462,"reputation":4365,"user_id":7210739,"display_name":"DontKnowMuchBut Getting Better"},"score":3,"creation_date":1655072219,"post_id":72596196,"comment_id":128237490,"body_markdown":"Your code defies Swing threading rules. Google &quot;concurrency in Swing&quot; to see why.","body":"Your code defies Swing threading rules. Google &quot;concurrency in Swing&quot; to see why."},{"owner":{"account_id":9722462,"reputation":4365,"user_id":7210739,"display_name":"DontKnowMuchBut Getting Better"},"score":2,"creation_date":1655072380,"post_id":72596196,"comment_id":128237505,"body_markdown":"Also, the way to have the GUI take turns is not to use a while true game loop or to use notify and wait but rather change key state fields as the program runs, such as the whoseTurn state and then to write your listeners to vary their response depending on state","body":"Also, the way to have the GUI take turns is not to use a while true game loop or to use notify and wait but rather change key state fields as the program runs, such as the whoseTurn state and then to write your listeners to vary their response depending on state"},{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":3,"creation_date":1655073805,"post_id":72596196,"comment_id":128237687,"body_markdown":"[Concurrency in Swing](https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html) - Swing is single threaded, you can&#39;t use things like &quot;wait&quot;/&quot;notify&quot; because you&#39;d be blocking the thread, so you could never wake it. As stated, maintain some kind of &quot;state&quot; which determines which player is active","body":"<a href=\"https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html\" rel=\"nofollow noreferrer\">Concurrency in Swing</a> - Swing is single threaded, you can&#39;t use things like &quot;wait&quot;/&quot;notify&quot; because you&#39;d be blocking the thread, so you could never wake it. As stated, maintain some kind of &quot;state&quot; which determines which player is active"},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":1,"creation_date":1655079638,"post_id":72596196,"comment_id":128238328,"body_markdown":"Right, calling `wait()` from the GUI will block it completely.  Basically if you&#39;re new you should stay away from `wait()` and `notify()` they are very low level and easy to get wrong.  Look at classes from `java.util.concurrent` like `Semaphore` and `ConcurrentLinkedQueue`","body":"Right, calling <code>wait()</code> from the GUI will block it completely.  Basically if you&#39;re new you should stay away from <code>wait()</code> and <code>notify()</code> they are very low level and easy to get wrong.  Look at classes from <code>java.util.concurrent</code> like <code>Semaphore</code> and <code>ConcurrentLinkedQueue</code>"}],"answers":[{"tags":[],"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1655075799,"creation_date":1655075799,"answer_id":72596524,"question_id":72596196,"body_markdown":"Swing is single threaded.  This means you can&#39;t perform long running or blocking operations on the Event Dispatching Thread.\r\n\r\nIf you try and use `wait` within the context of the EDT, not only will it block the EDT and prevent any further updates or events from been processed, you will never be able to use `notify` (from within the EDT) to wake it.\r\n\r\n`wait` and `notify` are meant to be used from different thread contexts (not from within the same thread context)\r\n\r\nSee [Concurrency in Swing](https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html) for some more details.\r\n\r\nWhat you need to do, is monitor some kind of &quot;token&quot;.  Only the player with who holds the &quot;token&quot; can do anything.\r\n\r\nYou can distill this down to a simple flag is maintained by some kind &quot;controller&quot;.  Each time a player does something, the controller checks to see if the player is currently active or not, processes the action and the switches the active player to a different player, for example...\r\n\r\n\r\n    import java.awt.EventQueue;\r\n    import java.awt.GridBagConstraints;\r\n    import java.awt.GridBagLayout;\r\n    import java.awt.Insets;\r\n    import java.awt.event.ActionEvent;\r\n    import java.awt.event.ActionListener;\r\n    import javax.swing.JButton;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JLabel;\r\n    import javax.swing.JPanel;\r\n    import javax.swing.JScrollPane;\r\n    import javax.swing.JTextArea;\r\n\r\n    public final class Main {\r\n        public static void main(String[] args) {\r\n            new Main();\r\n        }\r\n\r\n        public Main() {\r\n            EventQueue.invokeLater(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    JFrame frame = new JFrame();\r\n                    frame.add(new MainPane());\r\n                    frame.pack();\r\n                    frame.setLocationRelativeTo(null);\r\n                    frame.setVisible(true);\r\n                }\r\n            });\r\n        }\r\n\r\n        enum Player {\r\n            LEFT, RIGHT;\r\n        }\r\n\r\n        public class MainPane extends JPanel {\r\n\r\n            private Player activePlayer = Player.LEFT;\r\n            private ControlPane leftControlPane;\r\n            private ControlPane rightControlPane;\r\n\r\n            private JTextArea logTextArea;\r\n\r\n            public MainPane() {\r\n                ControlPane.Observer observer = new ControlPane.Observer() {\r\n                    @Override\r\n                    public void playerDidPerformAction(ControlPane source, Player player) {\r\n                        if (player != getActivePlayer()) {\r\n                            logTextArea.append((player == Player.LEFT ? &quot;Player 1&quot; : &quot;Player 2&quot;) + &quot; tried to perform an illegal action\\n&quot;);\r\n                        } else {\r\n\r\n                            logTextArea.append((player == Player.LEFT ? &quot;Player 1&quot; : &quot;Player 2&quot;) + &quot; did perform action\\n&quot;);\r\n                            switch (player) {\r\n                                case LEFT:\r\n                                    activePlayer = Player.RIGHT;\r\n                                    break;\r\n                                case RIGHT:\r\n                                    activePlayer = Player.LEFT;\r\n                                    break;\r\n                            }\r\n                            activePlayerDidChange();\r\n                        }\r\n                    }\r\n                };\r\n                leftControlPane = new ControlPane(Player.LEFT, observer);\r\n                rightControlPane = new ControlPane(Player.RIGHT, observer);\r\n\r\n                logTextArea = new JTextArea(20, 20);\r\n\r\n                setLayout(new GridBagLayout());\r\n                GridBagConstraints gbc = new GridBagConstraints();\r\n\r\n                gbc.gridheight = GridBagConstraints.REMAINDER;\r\n                gbc.weightx = 1;\r\n                gbc.weighty = 1;\r\n                gbc.fill = gbc.BOTH;\r\n                add(leftControlPane, gbc);\r\n\r\n                gbc.weightx = 0;\r\n                gbc.weighty = 0;\r\n                add(new JScrollPane(logTextArea), gbc);\r\n\r\n                gbc.weightx = 1;\r\n                gbc.weighty = 1;\r\n                add(rightControlPane, gbc);\r\n\r\n                activePlayerDidChange();\r\n            }\r\n\r\n            public Player getActivePlayer() {\r\n                return activePlayer;\r\n            }\r\n\r\n            protected void activePlayerDidChange() {\r\n                switch (getActivePlayer()) {\r\n                    case LEFT:\r\n                        rightControlPane.setActive(false);\r\n                        leftControlPane.setActive(true);\r\n                        break;\r\n                    case RIGHT:\r\n                        rightControlPane.setActive(true);\r\n                        leftControlPane.setActive(false);\r\n                        break;\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        public class ControlPane extends JPanel {\r\n            public interface Observer {\r\n                public void playerDidPerformAction(ControlPane source, Player player);\r\n            }\r\n\r\n            private Player player;\r\n            private JButton actionButton;\r\n            private Observer observer;\r\n\r\n            public ControlPane(Player player, Observer observer) {\r\n                this.player = player;\r\n                this.observer = observer;\r\n                actionButton = new JButton(&quot;Do stuff!&quot;);\r\n\r\n                setLayout(new GridBagLayout());\r\n                GridBagConstraints gbc = new GridBagConstraints();\r\n                gbc.gridwidth = GridBagConstraints.REMAINDER;\r\n                gbc.insets = new Insets(8, 8, 8, 8);\r\n\r\n                add(new JLabel(player == Player.LEFT ? &quot;Player 1&quot; : &quot;Player 2&quot;), gbc);\r\n\r\n                gbc.weightx = 1;\r\n                gbc.weighty = 1;\r\n                add(actionButton, gbc);\r\n\r\n                actionButton.addActionListener(new ActionListener() {\r\n                    @Override\r\n                    public void actionPerformed(ActionEvent e) {\r\n                        observer.playerDidPerformAction(ControlPane.this, player);\r\n                    }\r\n                });\r\n            }\r\n\r\n            public void setActive(boolean active) {\r\n                actionButton.setEnabled(active);\r\n            }\r\n\r\n        }\r\n    }\r\n","title":"Problem with Java, Swing, wait(), notify()","body":"<p>Swing is single threaded.  This means you can't perform long running or blocking operations on the Event Dispatching Thread.</p>\n<p>If you try and use <code>wait</code> within the context of the EDT, not only will it block the EDT and prevent any further updates or events from been processed, you will never be able to use <code>notify</code> (from within the EDT) to wake it.</p>\n<p><code>wait</code> and <code>notify</code> are meant to be used from different thread contexts (not from within the same thread context)</p>\n<p>See <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html\" rel=\"nofollow noreferrer\">Concurrency in Swing</a> for some more details.</p>\n<p>What you need to do, is monitor some kind of &quot;token&quot;.  Only the player with who holds the &quot;token&quot; can do anything.</p>\n<p>You can distill this down to a simple flag is maintained by some kind &quot;controller&quot;.  Each time a player does something, the controller checks to see if the player is currently active or not, processes the action and the switches the active player to a different player, for example...</p>\n<pre><code>import java.awt.EventQueue;\nimport java.awt.GridBagConstraints;\nimport java.awt.GridBagLayout;\nimport java.awt.Insets;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport javax.swing.JButton;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.JScrollPane;\nimport javax.swing.JTextArea;\n\npublic final class Main {\n    public static void main(String[] args) {\n        new Main();\n    }\n\n    public Main() {\n        EventQueue.invokeLater(new Runnable() {\n            @Override\n            public void run() {\n                JFrame frame = new JFrame();\n                frame.add(new MainPane());\n                frame.pack();\n                frame.setLocationRelativeTo(null);\n                frame.setVisible(true);\n            }\n        });\n    }\n\n    enum Player {\n        LEFT, RIGHT;\n    }\n\n    public class MainPane extends JPanel {\n\n        private Player activePlayer = Player.LEFT;\n        private ControlPane leftControlPane;\n        private ControlPane rightControlPane;\n\n        private JTextArea logTextArea;\n\n        public MainPane() {\n            ControlPane.Observer observer = new ControlPane.Observer() {\n                @Override\n                public void playerDidPerformAction(ControlPane source, Player player) {\n                    if (player != getActivePlayer()) {\n                        logTextArea.append((player == Player.LEFT ? &quot;Player 1&quot; : &quot;Player 2&quot;) + &quot; tried to perform an illegal action\\n&quot;);\n                    } else {\n\n                        logTextArea.append((player == Player.LEFT ? &quot;Player 1&quot; : &quot;Player 2&quot;) + &quot; did perform action\\n&quot;);\n                        switch (player) {\n                            case LEFT:\n                                activePlayer = Player.RIGHT;\n                                break;\n                            case RIGHT:\n                                activePlayer = Player.LEFT;\n                                break;\n                        }\n                        activePlayerDidChange();\n                    }\n                }\n            };\n            leftControlPane = new ControlPane(Player.LEFT, observer);\n            rightControlPane = new ControlPane(Player.RIGHT, observer);\n\n            logTextArea = new JTextArea(20, 20);\n\n            setLayout(new GridBagLayout());\n            GridBagConstraints gbc = new GridBagConstraints();\n\n            gbc.gridheight = GridBagConstraints.REMAINDER;\n            gbc.weightx = 1;\n            gbc.weighty = 1;\n            gbc.fill = gbc.BOTH;\n            add(leftControlPane, gbc);\n\n            gbc.weightx = 0;\n            gbc.weighty = 0;\n            add(new JScrollPane(logTextArea), gbc);\n\n            gbc.weightx = 1;\n            gbc.weighty = 1;\n            add(rightControlPane, gbc);\n\n            activePlayerDidChange();\n        }\n\n        public Player getActivePlayer() {\n            return activePlayer;\n        }\n\n        protected void activePlayerDidChange() {\n            switch (getActivePlayer()) {\n                case LEFT:\n                    rightControlPane.setActive(false);\n                    leftControlPane.setActive(true);\n                    break;\n                case RIGHT:\n                    rightControlPane.setActive(true);\n                    leftControlPane.setActive(false);\n                    break;\n            }\n        }\n\n    }\n\n    public class ControlPane extends JPanel {\n        public interface Observer {\n            public void playerDidPerformAction(ControlPane source, Player player);\n        }\n\n        private Player player;\n        private JButton actionButton;\n        private Observer observer;\n\n        public ControlPane(Player player, Observer observer) {\n            this.player = player;\n            this.observer = observer;\n            actionButton = new JButton(&quot;Do stuff!&quot;);\n\n            setLayout(new GridBagLayout());\n            GridBagConstraints gbc = new GridBagConstraints();\n            gbc.gridwidth = GridBagConstraints.REMAINDER;\n            gbc.insets = new Insets(8, 8, 8, 8);\n\n            add(new JLabel(player == Player.LEFT ? &quot;Player 1&quot; : &quot;Player 2&quot;), gbc);\n\n            gbc.weightx = 1;\n            gbc.weighty = 1;\n            add(actionButton, gbc);\n\n            actionButton.addActionListener(new ActionListener() {\n                @Override\n                public void actionPerformed(ActionEvent e) {\n                    observer.playerDidPerformAction(ControlPane.this, player);\n                }\n            });\n        }\n\n        public void setActive(boolean active) {\n            actionButton.setEnabled(active);\n        }\n\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":4449770,"reputation":9,"user_id":19325384,"display_name":"Marcin K"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":140,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1655075799,"creation_date":1655071254,"question_id":72596196,"body_markdown":"I am quiet new to Java and I try to make a simple turn-based game just to gain some experience. I have encounter a problem which I cannot solve on my own, despite I did quiet a lot of google research... Probably I cannot solve it because I don&#39;t understand it well enough.\r\n\r\nThe problem is I don&#39;t know how to make a program making turns for player. I mean I would like to make a few Jbuttons active till one of them is pressed and then do the same for another player. Since program is quiet complicated, I deleted 80% of code which is unrelated to problem and I post the rest of it below.\r\n\r\nThe code is divided into classes and I would like to keep it this way due to complicity of a problem (remaining 80% of code). In order to see better what programs do, I made buttons to change colours each time when activated. Unfortunatelly program stops working as soon as it hits notify() method.\r\n\r\nCan anyone help? Thank you in advance.\r\n\r\n**Tester:**\r\n\r\n    package grafika;\r\n    \r\n    import javax.swing.SwingUtilities;\r\n    \r\n    \r\n    public class OknoTester {\r\n        public static void main(String[] args) {\r\n            SwingUtilities.invokeLater(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    Okno main = new Okno();\r\n                }\r\n                \r\n                // ctr + spacja - podpowiedzi w Eclipsie\r\n            });\r\n    \r\n        }\r\n    \r\n    }\r\n\r\n**Main class**\r\n\r\n     package grafika;\r\n    \r\n    import java.awt.Dimension;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JSplitPane;\r\n    \r\n    \r\n    public class Okno {\r\n        private JFrame frame;\r\n                \r\n        public Okno()\r\n        {\r\n            initialize();\r\n        }\r\n    \r\n        \r\n        private void initialize()\r\n        {\r\n            // NEW WINDOW\r\n            frame = new JFrame();\r\n            frame.setTitle(&quot;Gra w statki&quot;);\r\n            frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);\r\n            frame.setSize(new Dimension(600,100));\r\n            frame.setLocationRelativeTo(null);\r\n            frame.setResizable(false);\r\n            frame.setVisible(true);\r\n    \r\n            \r\n            // DIVIDE WINDOW\r\n            JSplitPane splitPaneH = new JSplitPane( JSplitPane.HORIZONTAL_SPLIT );\r\n            frame.getContentPane().add(splitPaneH);\r\n            splitPaneH.setDividerSize(0);\r\n            \r\n            \r\n            // INITIALIZATION OF SITES\r\n            Komputer left = new Komputer();\r\n            Komputer right = new Komputer();\r\n            \r\n    \r\n            // SHOWPANELS\r\n            splitPaneH.setLeftComponent(left.Pokaz());\r\n            splitPaneH.setRightComponent(right.Pokaz());\r\n            splitPaneH.setResizeWeight(0.5);\r\n            splitPaneH.setEnabled(false);\r\n            \r\n            // ALLOW TO USE ONE OF LEFT OR RIGHT SET OF BUTTONS\r\n            while(true)\r\n            {\r\n            left.CzytajRuch();\r\n            right.CzytajRuch();\r\n            }\r\n            \r\n            \r\n        }\r\n    \r\n    }\r\n**Class with buttons**\r\n\r\n    package grafika;\r\n    \r\n    import java.awt.Color;\r\n    import java.awt.GridLayout;\r\n    import java.awt.event.ActionEvent;\r\n    import java.awt.event.ActionListener;\r\n    import javax.swing.JButton;\r\n    import javax.swing.JPanel;\r\n    \r\n    public class Komputer implements ActionListener{\r\n    \r\n        private JButton b1 = new JButton(&quot;1&quot;);\r\n        private JButton b2 = new JButton(&quot;2&quot;);\r\n        private JPanel panel = new JPanel();\r\n        private Boolean aktywny = false;\r\n        \r\n        \r\n        public void CzytajRuch()\r\n        {\r\n            aktywny = true;\r\n            try {\r\n                    wait();\r\n                } catch (InterruptedException e) {\r\n                    e.printStackTrace();\r\n                }\r\n        }\r\n    \r\n        public JPanel Pokaz()\r\n        {\r\n            return panel;\r\n        }\r\n        \r\n    \r\n        public Komputer() {\r\n            \r\n            GridLayout gl = new GridLayout(1,2);\r\n            panel.setLayout(gl);\r\n            panel.add(b1);\r\n            b1.addActionListener(this);\r\n            b2.addActionListener(this);\r\n            panel.add(b2);\r\n    \r\n        }\r\n    \r\n    \r\n        public void actionPerformed(ActionEvent ae) {\r\n            if(aktywny == true)\r\n            {\r\n            JButton pb = (JButton) ae.getSource();\r\n            if (pb == b1)\r\n                b1.setBackground(new Color((int)(Math.random() * 0x1000000)));\r\n            if (pb == b2)\r\n                b2.setBackground(new Color((int)(Math.random() * 0x1000000)));\r\n            aktywny = false;\r\n            notify();\r\n            }\r\n        }\r\n        \r\n    \r\n    }\r\n     \r\nThank you for your time reading this. I would apprieciate any help.","title":"Problem with Java, Swing, wait(), notify()","body":"<p>I am quiet new to Java and I try to make a simple turn-based game just to gain some experience. I have encounter a problem which I cannot solve on my own, despite I did quiet a lot of google research... Probably I cannot solve it because I don't understand it well enough.</p>\n<p>The problem is I don't know how to make a program making turns for player. I mean I would like to make a few Jbuttons active till one of them is pressed and then do the same for another player. Since program is quiet complicated, I deleted 80% of code which is unrelated to problem and I post the rest of it below.</p>\n<p>The code is divided into classes and I would like to keep it this way due to complicity of a problem (remaining 80% of code). In order to see better what programs do, I made buttons to change colours each time when activated. Unfortunatelly program stops working as soon as it hits notify() method.</p>\n<p>Can anyone help? Thank you in advance.</p>\n<p><strong>Tester:</strong></p>\n<pre><code>package grafika;\n\nimport javax.swing.SwingUtilities;\n\n\npublic class OknoTester {\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(new Runnable() {\n            @Override\n            public void run() {\n                Okno main = new Okno();\n            }\n            \n            // ctr + spacja - podpowiedzi w Eclipsie\n        });\n\n    }\n\n}\n</code></pre>\n<p><strong>Main class</strong></p>\n<pre><code> package grafika;\n\nimport java.awt.Dimension;\nimport javax.swing.JFrame;\nimport javax.swing.JSplitPane;\n\n\npublic class Okno {\n    private JFrame frame;\n            \n    public Okno()\n    {\n        initialize();\n    }\n\n    \n    private void initialize()\n    {\n        // NEW WINDOW\n        frame = new JFrame();\n        frame.setTitle(&quot;Gra w statki&quot;);\n        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);\n        frame.setSize(new Dimension(600,100));\n        frame.setLocationRelativeTo(null);\n        frame.setResizable(false);\n        frame.setVisible(true);\n\n        \n        // DIVIDE WINDOW\n        JSplitPane splitPaneH = new JSplitPane( JSplitPane.HORIZONTAL_SPLIT );\n        frame.getContentPane().add(splitPaneH);\n        splitPaneH.setDividerSize(0);\n        \n        \n        // INITIALIZATION OF SITES\n        Komputer left = new Komputer();\n        Komputer right = new Komputer();\n        \n\n        // SHOWPANELS\n        splitPaneH.setLeftComponent(left.Pokaz());\n        splitPaneH.setRightComponent(right.Pokaz());\n        splitPaneH.setResizeWeight(0.5);\n        splitPaneH.setEnabled(false);\n        \n        // ALLOW TO USE ONE OF LEFT OR RIGHT SET OF BUTTONS\n        while(true)\n        {\n        left.CzytajRuch();\n        right.CzytajRuch();\n        }\n        \n        \n    }\n\n}\n</code></pre>\n<p><strong>Class with buttons</strong></p>\n<pre><code>package grafika;\n\nimport java.awt.Color;\nimport java.awt.GridLayout;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport javax.swing.JButton;\nimport javax.swing.JPanel;\n\npublic class Komputer implements ActionListener{\n\n    private JButton b1 = new JButton(&quot;1&quot;);\n    private JButton b2 = new JButton(&quot;2&quot;);\n    private JPanel panel = new JPanel();\n    private Boolean aktywny = false;\n    \n    \n    public void CzytajRuch()\n    {\n        aktywny = true;\n        try {\n                wait();\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n    }\n\n    public JPanel Pokaz()\n    {\n        return panel;\n    }\n    \n\n    public Komputer() {\n        \n        GridLayout gl = new GridLayout(1,2);\n        panel.setLayout(gl);\n        panel.add(b1);\n        b1.addActionListener(this);\n        b2.addActionListener(this);\n        panel.add(b2);\n\n    }\n\n\n    public void actionPerformed(ActionEvent ae) {\n        if(aktywny == true)\n        {\n        JButton pb = (JButton) ae.getSource();\n        if (pb == b1)\n            b1.setBackground(new Color((int)(Math.random() * 0x1000000)));\n        if (pb == b2)\n            b2.setBackground(new Color((int)(Math.random() * 0x1000000)));\n        aktywny = false;\n        notify();\n        }\n    }\n    \n\n}\n \n</code></pre>\n<p>Thank you for your time reading this. I would apprieciate any help.</p>\n"},{"tags":["java","loops","while-loop","joptionpane"],"answers":[{"tags":[],"owner":{"account_id":7413926,"reputation":5474,"user_id":11374957,"display_name":"Kaan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655075195,"creation_date":1655075195,"answer_id":72596479,"question_id":72595988,"body_markdown":"Your code is pretty close to what you describe as your goal – the primary thing missing is that you need to keep track of the various values along the way, and print them at the end.\r\n\r\nThe code you posted will loop again and again asking for a single value (which you are storing into `String names` - a little confusing choice for variable name, since it contains only one name input). As you found, when the user hits the cancel button (to end the loop), it sets `names` to `null`. The final step shows a dialog box with the last value for `names` (which is always `null`).\r\n\r\nHere&#39;s a program that:\r\n* loops until the user hits the &quot;cancel&quot; button (which would set `input` to be `null`), or if they enter a blank value –&#160;this allows the user to exit by simply hitting return without typing anything\r\n* adds all non-empty input values to a [`java.util.Set`][1] – this is an arbitrary choice, use whatever data structure is appropriate for your program\r\n* shows a final dialog with the contents of the set\r\n\r\n```\r\nimport javax.swing.*;\r\nimport java.util.HashSet;\r\nimport java.util.Set;\r\n\r\npublic class t {\r\n    public static void main(String[] args) {\r\n        Set&lt;String&gt; values = new HashSet&lt;&gt;();\r\n        while (true) {\r\n            String input = JOptionPane.showInputDialog(null, &quot;enter something&quot;);\r\n            if (input != null &amp;&amp; !input.isEmpty()) {\r\n                values.add(input);\r\n            } else {\r\n                break;\r\n            }\r\n        }\r\n        JOptionPane.showMessageDialog(null, &quot;all values: &quot; + values);\r\n    }\r\n}\r\n```\r\nIf I run with the following input:\r\n```\r\none\r\ntwo two\r\nthree three three\r\n&lt;blank&gt;\r\n```\r\nThen the final dialog message is:\r\n```\r\nall values: [one, two two, three three three]\r\n```\r\nNote that a [`java.util.Set`][1] doesn&#39;t necessarily return items in any specific order, it just happens to have worked out that way in this example.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/9/docs/api/java/util/Set.html","title":"Want to output my entered names by JOptionPane outside the loop, JAVA","body":"<p>Your code is pretty close to what you describe as your goal – the primary thing missing is that you need to keep track of the various values along the way, and print them at the end.</p>\n<p>The code you posted will loop again and again asking for a single value (which you are storing into <code>String names</code> - a little confusing choice for variable name, since it contains only one name input). As you found, when the user hits the cancel button (to end the loop), it sets <code>names</code> to <code>null</code>. The final step shows a dialog box with the last value for <code>names</code> (which is always <code>null</code>).</p>\n<p>Here's a program that:</p>\n<ul>\n<li>loops until the user hits the &quot;cancel&quot; button (which would set <code>input</code> to be <code>null</code>), or if they enter a blank value – this allows the user to exit by simply hitting return without typing anything</li>\n<li>adds all non-empty input values to a <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/Set.html\" rel=\"nofollow noreferrer\"><code>java.util.Set</code></a> – this is an arbitrary choice, use whatever data structure is appropriate for your program</li>\n<li>shows a final dialog with the contents of the set</li>\n</ul>\n<pre><code>import javax.swing.*;\nimport java.util.HashSet;\nimport java.util.Set;\n\npublic class t {\n    public static void main(String[] args) {\n        Set&lt;String&gt; values = new HashSet&lt;&gt;();\n        while (true) {\n            String input = JOptionPane.showInputDialog(null, &quot;enter something&quot;);\n            if (input != null &amp;&amp; !input.isEmpty()) {\n                values.add(input);\n            } else {\n                break;\n            }\n        }\n        JOptionPane.showMessageDialog(null, &quot;all values: &quot; + values);\n    }\n}\n</code></pre>\n<p>If I run with the following input:</p>\n<pre><code>one\ntwo two\nthree three three\n&lt;blank&gt;\n</code></pre>\n<p>Then the final dialog message is:</p>\n<pre><code>all values: [one, two two, three three three]\n</code></pre>\n<p>Note that a <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/Set.html\" rel=\"nofollow noreferrer\"><code>java.util.Set</code></a> doesn't necessarily return items in any specific order, it just happens to have worked out that way in this example.</p>\n"}],"owner":{"account_id":25481583,"reputation":33,"user_id":19277826,"display_name":"FlyingRacoon51"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1655075195,"creation_date":1655069107,"question_id":72595988,"body_markdown":"Basically i want to enter the names as long as i don&#39;t cancel the InputMessageDialog, then i  want to asign my names to variable created before and print them out at the end in the MessageDialog. I was trying some stuff outside the loop but got the notificacion that &quot;value &#39;names&#39; is always &#39;null&#39;&quot;\r\n  \r\n        String names;\r\n        while (true) {\r\n            names = JOptionPane.showInputDialog(null, &quot;ENTER THE NAMES&quot;);\r\n            if (names == null) {\r\n                JOptionPane.showMessageDialog(null, &quot;ENTRY CANCELED!&quot;);\r\n                break;\r\n            } else {\r\n            }\r\n        }\r\n        JOptionPane.showMessageDialog(null, &quot;YOUR NAMES: &quot; + names); ","title":"Want to output my entered names by JOptionPane outside the loop, JAVA","body":"<p>Basically i want to enter the names as long as i don't cancel the InputMessageDialog, then i  want to asign my names to variable created before and print them out at the end in the MessageDialog. I was trying some stuff outside the loop but got the notificacion that &quot;value 'names' is always 'null'&quot;</p>\n<pre><code>    String names;\n    while (true) {\n        names = JOptionPane.showInputDialog(null, &quot;ENTER THE NAMES&quot;);\n        if (names == null) {\n            JOptionPane.showMessageDialog(null, &quot;ENTRY CANCELED!&quot;);\n            break;\n        } else {\n        }\n    }\n    JOptionPane.showMessageDialog(null, &quot;YOUR NAMES: &quot; + names); \n</code></pre>\n"},{"tags":["java","spring","spring-boot","bcrypt","spring-bean"],"comments":[{"owner":{"account_id":2139538,"reputation":42511,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":3,"creation_date":1612871500,"post_id":66118353,"comment_id":116896199,"body_markdown":"Don&#39;t use field injection. Use constructor injection. Your application will fail to start rather than NPE when it tries to access the field. It won&#39;t (or at least *shouldn&#39;t*) fix your issue, but constructor injection is much safer. It is that the method the Spring team recommend that you use.","body":"Don&#39;t use field injection. Use constructor injection. Your application will fail to start rather than NPE when it tries to access the field. It won&#39;t (or at least <i>shouldn&#39;t</i>) fix your issue, but constructor injection is much safer. It is that the method the Spring team recommend that you use."},{"owner":{"account_id":2139538,"reputation":42511,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1612871760,"post_id":66118353,"comment_id":116896285,"body_markdown":"Put a breakpoint in the `encoder()` method and make sure it&#39;s actually being invoked (or less optimally, put a log statement or do a println in there). It&#39;s possible that the config class exists in a package that isn&#39;t being picked up by Spring&#39;s package scan. Just guessing","body":"Put a breakpoint in the <code>encoder()</code> method and make sure it&#39;s actually being invoked (or less optimally, put a log statement or do a println in there). It&#39;s possible that the config class exists in a package that isn&#39;t being picked up by Spring&#39;s package scan. Just guessing"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1612872050,"post_id":66118353,"comment_id":116896402,"body_markdown":"I doubt that `User` should be managed by Spring and you are probably creating new instances yourself. Also looking at your code and the code in the tutorial you aren&#39;t following the tutorial but loosly base your code on that tutorial.","body":"I doubt that <code>User</code> should be managed by Spring and you are probably creating new instances yourself. Also looking at your code and the code in the tutorial you aren&#39;t following the tutorial but loosly base your code on that tutorial."},{"owner":{"account_id":19151616,"reputation":446,"user_id":13989403,"display_name":"DPWork"},"score":0,"creation_date":1612875793,"post_id":66118353,"comment_id":116898034,"body_markdown":"Are you able to post the file and package structure of your project? @Michael&#39;s suggestion that the config isn&#39;t being picked up seems most likely to me. Also, how are you instantiating the `User` class? If it&#39;s injected into something else (which works), then this should work, if you&#39;re doing `new User()`, then it won&#39;t.","body":"Are you able to post the file and package structure of your project? @Michael&#39;s suggestion that the config isn&#39;t being picked up seems most likely to me. Also, how are you instantiating the <code>User</code> class? If it&#39;s injected into something else (which works), then this should work, if you&#39;re doing <code>new User()</code>, then it won&#39;t."},{"owner":{"account_id":19881403,"reputation":11,"user_id":14565347,"display_name":"Meg"},"score":0,"creation_date":1612883180,"post_id":66118353,"comment_id":116901323,"body_markdown":"Hi, I had a test to make sure it went into the encoder() method and it actually is, so I know it&#39;s being picked up in at least that way. I&#39;ll add a bit more of the code into the original question about how the user is being instantiated to see if that gives a bit more help?","body":"Hi, I had a test to make sure it went into the encoder() method and it actually is, so I know it&#39;s being picked up in at least that way. I&#39;ll add a bit more of the code into the original question about how the user is being instantiated to see if that gives a bit more help?"}],"answers":[{"tags":[],"owner":{"account_id":4890986,"reputation":1123,"user_id":3942132,"display_name":"Roie Beck"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1612873302,"creation_date":1612872536,"answer_id":66118709,"question_id":66118353,"body_markdown":"You are trying to inject interface, spring does not know which implementation to choose from.\r\n\r\nTo fix this add the following: \r\n\r\n```\r\n@Bean(&quot;bCryptPasswordEncoder&quot;)\r\npublic PasswordEncoder encoder() { \r\n    return new BCryptPasswordEncoder();\r\n}\r\n```\r\n\r\nand\r\n```\r\n@Autowired\r\n@Qualifier(&quot;bCryptPasswordEncoder&quot;)\r\nprivate PasswordEncoder encoder;\r\n```\r\n\r\nsee:\r\n\r\n[baeldung qualifier][1]\r\n\r\n\r\nif you are using constructor Injection(highly recommended) you can add the \r\n@Qualifier(&quot;bCryptPasswordEncoder&quot;) in the constuctor before the variable, like so:\r\n\r\n```\r\npublic User(@Qualifier(&quot;bCryptPasswordEncoder&quot;) PasswordEncoder encoder) {\r\n    this.encoder = encoder;\r\n}\r\n```\r\n\r\nP.S. \r\n\r\nI would highly recommend using the Spring 5 delegating password encoder for future compatibility  \r\n\r\n\r\n[baeldung delegating password encoder examples][2]\r\n\r\n\r\nP.P.S\r\nUser is a data member and should not hold password encoder, it is a good design pattern to create separation between data Members and business logic(search ***spring layer architecture***),\r\n\r\nIf this is a new project I would go a step further and look at the Onion architecture:\r\n[Onion architecture][3]\r\n\r\nP.P.P.s also I would recommend you look at lombok project :)\r\n\r\n\r\n  [1]: https://www.baeldung.com/spring-qualifier-annotation\r\n  [2]: https://www.baeldung.com/spring-security-5-password-storage\r\n  [3]: http://www.plainionist.net/Implementing-Clean-Architecture-UseCases/","title":"@Autowired field is null after trying suggestions","body":"<p>You are trying to inject interface, spring does not know which implementation to choose from.</p>\n<p>To fix this add the following:</p>\n<pre><code>@Bean(&quot;bCryptPasswordEncoder&quot;)\npublic PasswordEncoder encoder() { \n    return new BCryptPasswordEncoder();\n}\n</code></pre>\n<p>and</p>\n<pre><code>@Autowired\n@Qualifier(&quot;bCryptPasswordEncoder&quot;)\nprivate PasswordEncoder encoder;\n</code></pre>\n<p>see:</p>\n<p><a href=\"https://www.baeldung.com/spring-qualifier-annotation\" rel=\"nofollow noreferrer\">baeldung qualifier</a></p>\n<p>if you are using constructor Injection(highly recommended) you can add the\n@Qualifier(&quot;bCryptPasswordEncoder&quot;) in the constuctor before the variable, like so:</p>\n<pre><code>public User(@Qualifier(&quot;bCryptPasswordEncoder&quot;) PasswordEncoder encoder) {\n    this.encoder = encoder;\n}\n</code></pre>\n<p>P.S.</p>\n<p>I would highly recommend using the Spring 5 delegating password encoder for future compatibility</p>\n<p><a href=\"https://www.baeldung.com/spring-security-5-password-storage\" rel=\"nofollow noreferrer\">baeldung delegating password encoder examples</a></p>\n<p>P.P.S\nUser is a data member and should not hold password encoder, it is a good design pattern to create separation between data Members and business logic(search <em><strong>spring layer architecture</strong></em>),</p>\n<p>If this is a new project I would go a step further and look at the Onion architecture:\n<a href=\"http://www.plainionist.net/Implementing-Clean-Architecture-UseCases/\" rel=\"nofollow noreferrer\">Onion architecture</a></p>\n<p>P.P.P.s also I would recommend you look at lombok project :)</p>\n"},{"tags":[],"owner":{"account_id":4546280,"reputation":1606,"user_id":3692788,"accept_rate":67,"display_name":"JCarlosR"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655075014,"creation_date":1655075014,"answer_id":72596472,"question_id":66118353,"body_markdown":"I created a `@Bean` in a `@Configuration` class as you did:\r\n\r\n    @Bean\r\n    public PasswordEncoder encoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n\r\nAnd tried to use `@Autowired` to a private attribute as you did:\r\n\r\n    @Autowired\r\n    private PasswordEncoder encoder;\r\n\r\nI was getting an error saying that `encoder` is `null` when trying to encode my passwords as well. \r\n\r\nBut got it fixed following [Michael][1]&#39;s suggestion (in the comments):\r\n\r\n&gt; Don&#39;t use field injection. Use constructor injection.\r\n\r\n**Example:**\r\n\r\nI have a `UserConfig` class responsible for populating my database with initial data:\r\n\r\n    public UserConfig(UserRepository repository, PasswordEncoder passwordEncoder) {\r\n        User user1 = new User(\r\n                &quot;firstUser&quot;,\r\n                passwordEncoder.encode(&quot;123123&quot;),\r\n                &quot;user1@gmail.com&quot;\r\n                /* . . .*/\r\n        );\r\n    \r\n        User user2 = new User(\r\n                &quot;anotherUser&quot;,\r\n                passwordEncoder.encode(&quot;111222&quot;),\r\n                &quot;user2@gmail.com&quot;\r\n                /* . . .*/ \r\n        );\r\n    \r\n        repository.saveAll(\r\n                List.of(user1, user2)\r\n        );\r\n    }\r\n\r\nAnd now it works as expected.\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/1898563/michael","title":"@Autowired field is null after trying suggestions","body":"<p>I created a <code>@Bean</code> in a <code>@Configuration</code> class as you did:</p>\n<pre><code>@Bean\npublic PasswordEncoder encoder() {\n    return new BCryptPasswordEncoder();\n}\n</code></pre>\n<p>And tried to use <code>@Autowired</code> to a private attribute as you did:</p>\n<pre><code>@Autowired\nprivate PasswordEncoder encoder;\n</code></pre>\n<p>I was getting an error saying that <code>encoder</code> is <code>null</code> when trying to encode my passwords as well.</p>\n<p>But got it fixed following <a href=\"https://stackoverflow.com/users/1898563/michael\">Michael</a>'s suggestion (in the comments):</p>\n<blockquote>\n<p>Don't use field injection. Use constructor injection.</p>\n</blockquote>\n<p><strong>Example:</strong></p>\n<p>I have a <code>UserConfig</code> class responsible for populating my database with initial data:</p>\n<pre><code>public UserConfig(UserRepository repository, PasswordEncoder passwordEncoder) {\n    User user1 = new User(\n            &quot;firstUser&quot;,\n            passwordEncoder.encode(&quot;123123&quot;),\n            &quot;user1@gmail.com&quot;\n            /* . . .*/\n    );\n\n    User user2 = new User(\n            &quot;anotherUser&quot;,\n            passwordEncoder.encode(&quot;111222&quot;),\n            &quot;user2@gmail.com&quot;\n            /* . . .*/ \n    );\n\n    repository.saveAll(\n            List.of(user1, user2)\n    );\n}\n</code></pre>\n<p>And now it works as expected.</p>\n"}],"owner":{"account_id":19881403,"reputation":11,"user_id":14565347,"display_name":"Meg"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":386,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1655075014,"creation_date":1612871061,"question_id":66118353,"body_markdown":"I&#39;ve been trying to encrypt passwords following the tutorial found here &lt;https://www.baeldung.com/spring-security-registration-password-encoding-bcrypt&gt;. I created my bean, but had the quite common problem that my autowired fields never got injected. I have tried to sort this problem now for quite a while, following various advice on here such as the following resource &lt;https://stackoverflow.com/questions/19896870/why-is-my-spring-autowired-field-null&gt; but none of the help seems to be working, and I&#39;m really not too sure where I am going wrong. I even tried putting the beans in the xml, although I couldn&#39;t get this to work either.\r\n\r\nHere is my code so far: \r\n\r\nUser class, where the autowired field is null\r\n``` \r\n@Service\r\n@Configurable\r\npublic class User {\r\n\r\n    @Id\r\n    private UUID id;\r\n    private long alias;\r\n    private String username;\r\n    private String password;\r\n\r\n    @Autowired\r\n    private PasswordEncoder passwordEncoder;\r\n```\r\n\r\nConfig class where the bean is getting set up: \r\n```\r\n@Configuration\r\npublic class Config {\r\n    @Bean\r\n    public PasswordEncoder encoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n}\r\n```\r\n\r\nI&#39;m quite new to spring so I&#39;m sorry if it&#39;s a really glaring fix, I just don&#39;t know how else to try make it work. Thank you for any help.\r\n\r\nUpdated code with qualifiers:\r\n\r\nconfig class: \r\n```\r\n@Configuration\r\npublic class Config {\r\n    @Bean(&quot;bCryptPasswordEncoder&quot;)\r\n    public PasswordEncoder encoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n```\r\n\r\nuser class:\r\n```\r\n    @Autowired\r\n    @Qualifier(&quot;bCryptPasswordEncoder&quot;)\r\n    private PasswordEncoder passwordEncoder;\r\n\r\n```\r\n\r\nHow the user is being instantiated: \r\n```\r\n@PostMapping(&quot;/users&quot;)\r\n    public String newUser(@RequestBody User newUser) {\r\n        if (repository.existsByUsername(newUser.getUsername())){\r\n            return new UserAlreadyExistsException(newUser.getUsername()).getMessage(newUser.getUsername(), repository);\r\n        }\r\n        User u = new User(getAlias(repository), newUser.getUsername(), newUser.getPassword());\r\n        repository.save(u);\r\n        return &quot;{\\&quot;message\\&quot; : \\&quot;user\\&quot;, \\&quot;user\\&quot; : &quot; + u.toString() + &quot;}&quot;;\r\n    }\r\n\r\n```\r\n","title":"@Autowired field is null after trying suggestions","body":"<p>I've been trying to encrypt passwords following the tutorial found here <a href=\"https://www.baeldung.com/spring-security-registration-password-encoding-bcrypt\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-security-registration-password-encoding-bcrypt</a>. I created my bean, but had the quite common problem that my autowired fields never got injected. I have tried to sort this problem now for quite a while, following various advice on here such as the following resource <a href=\"https://stackoverflow.com/questions/19896870/why-is-my-spring-autowired-field-null\">Why is my Spring @Autowired field null?</a> but none of the help seems to be working, and I'm really not too sure where I am going wrong. I even tried putting the beans in the xml, although I couldn't get this to work either.</p>\n<p>Here is my code so far:</p>\n<p>User class, where the autowired field is null</p>\n<pre><code>@Service\n@Configurable\npublic class User {\n\n    @Id\n    private UUID id;\n    private long alias;\n    private String username;\n    private String password;\n\n    @Autowired\n    private PasswordEncoder passwordEncoder;\n</code></pre>\n<p>Config class where the bean is getting set up:</p>\n<pre><code>@Configuration\npublic class Config {\n    @Bean\n    public PasswordEncoder encoder() {\n        return new BCryptPasswordEncoder();\n    }\n}\n</code></pre>\n<p>I'm quite new to spring so I'm sorry if it's a really glaring fix, I just don't know how else to try make it work. Thank you for any help.</p>\n<p>Updated code with qualifiers:</p>\n<p>config class:</p>\n<pre><code>@Configuration\npublic class Config {\n    @Bean(&quot;bCryptPasswordEncoder&quot;)\n    public PasswordEncoder encoder() {\n        return new BCryptPasswordEncoder();\n    }\n</code></pre>\n<p>user class:</p>\n<pre><code>    @Autowired\n    @Qualifier(&quot;bCryptPasswordEncoder&quot;)\n    private PasswordEncoder passwordEncoder;\n\n</code></pre>\n<p>How the user is being instantiated:</p>\n<pre><code>@PostMapping(&quot;/users&quot;)\n    public String newUser(@RequestBody User newUser) {\n        if (repository.existsByUsername(newUser.getUsername())){\n            return new UserAlreadyExistsException(newUser.getUsername()).getMessage(newUser.getUsername(), repository);\n        }\n        User u = new User(getAlias(repository), newUser.getUsername(), newUser.getPassword());\n        repository.save(u);\n        return &quot;{\\&quot;message\\&quot; : \\&quot;user\\&quot;, \\&quot;user\\&quot; : &quot; + u.toString() + &quot;}&quot;;\n    }\n\n</code></pre>\n"},{"tags":["java","css","javafx","color-picker"],"answers":[{"tags":[],"owner":{"account_id":21056351,"reputation":61,"user_id":15475534,"display_name":"Shenavyre"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1654943201,"creation_date":1654943201,"answer_id":72583552,"question_id":72583321,"body_markdown":"I have found this code worked for me if anyone needs it in the future:\r\n```\r\nColor newColour = backgroundColourPicker.getValue();\r\nDouble red = newColour.getRed()*100;\r\nint rInt = red.intValue();\r\nDouble green = newColour.getGreen()*100;\r\nint gInt = green.intValue();\r\nDouble blue = newColour.getBlue()*100;\r\nint bInt = blue.intValue();\r\nString hex = String.format(&quot;#%02X%02X%02X&quot;, rInt, gInt, bInt);\r\ncanvas.setStyle(&quot;-fx-background-color: &quot; + hex + &quot;;&quot;);\r\n```","title":"How to set pane colour from colour picker","body":"<p>I have found this code worked for me if anyone needs it in the future:</p>\n<pre><code>Color newColour = backgroundColourPicker.getValue();\nDouble red = newColour.getRed()*100;\nint rInt = red.intValue();\nDouble green = newColour.getGreen()*100;\nint gInt = green.intValue();\nDouble blue = newColour.getBlue()*100;\nint bInt = blue.intValue();\nString hex = String.format(&quot;#%02X%02X%02X&quot;, rInt, gInt, bInt);\ncanvas.setStyle(&quot;-fx-background-color: &quot; + hex + &quot;;&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1655074910,"creation_date":1654986310,"answer_id":72588241,"question_id":72583321,"body_markdown":"**If you _don&#39;t_ require** all the features of the region&#39;s [`background`][1]—image, fills, etc.— and a solid color will suffice, also consider binding the color picker&#39;s value property to the fill color of a suitable `Shape` that fills the region. Based on the examples seen [here][2], the variation below illustrates a `ColorPane` that renders a `Rectangle` whose size is bound to the enclosing `Pane` and whose color is bound to an `ObjectProperty&lt;Color&gt;` holding the rectangle&#39;s color. A similar arrangement is made for the foreground `Circle`. One  benefit is that a custom color updates _live_ as the the controls are adjusted. Several related examples are collected [here][3].\r\n\r\n[![two-tone][4]][4]\r\n\r\n```\r\nimport javafx.application.Application;\r\nimport static javafx.application.Application.launch;\r\nimport javafx.beans.InvalidationListener;\r\nimport javafx.beans.binding.Bindings;\r\nimport javafx.beans.binding.NumberBinding;\r\nimport javafx.beans.property.ObjectProperty;\r\nimport javafx.beans.property.SimpleObjectProperty;\r\nimport javafx.scene.Scene;\r\nimport javafx.scene.control.ColorPicker;\r\nimport javafx.scene.control.Tooltip;\r\nimport javafx.scene.layout.BorderPane;\r\nimport javafx.scene.layout.Pane;\r\nimport javafx.scene.layout.VBox;\r\nimport javafx.scene.paint.Color;\r\nimport javafx.scene.shape.Circle;\r\nimport javafx.scene.shape.Rectangle;\r\nimport javafx.stage.Stage;\r\n\r\n/**\r\n * @see https://stackoverflow.com/q/72583321/230513\r\n * @see https://stackoverflow.com/a/70312046/230513\r\n */\r\npublic class ColorTest extends Application {\r\n    \r\n    private final class ColorPane extends Pane {\r\n        \r\n        public static final Color bgColor = Color.BLUE;\r\n        public static final Color fgColor = Color.CYAN;\r\n        private final Rectangle r = new Rectangle();\r\n        private final Circle c = new Circle(8, fgColor);\r\n        private final ObjectProperty&lt;Color&gt; bg = new SimpleObjectProperty&lt;&gt;(bgColor);\r\n        private final ObjectProperty&lt;Color&gt; fg = new SimpleObjectProperty&lt;&gt;(fgColor);\r\n        private final InvalidationListener listener = (o) -&gt; update();\r\n        \r\n        public ColorPane() {\r\n            this.setPrefSize(256, 256);\r\n            r.widthProperty().bind(this.widthProperty());\r\n            r.heightProperty().bind(this.heightProperty());\r\n            r.setFill(bgColor);\r\n            this.getChildren().add(r);\r\n            c.centerXProperty().bind(widthProperty().divide(2));\r\n            c.centerYProperty().bind(heightProperty().divide(2));\r\n            NumberBinding diameter = Bindings.min(widthProperty(), heightProperty());\r\n            c.radiusProperty().bind(diameter.divide(2).subtract(diameter.divide(10)));\r\n            this.getChildren().add(c);\r\n            bg.addListener(listener);\r\n            fg.addListener(listener);\r\n        }\r\n        \r\n        private void update() {\r\n            r.setFill(bg.get());\r\n            c.setFill(fg.get());\r\n        }\r\n        \r\n        public ObjectProperty&lt;Color&gt; bgProperty() {\r\n            return bg;\r\n        }\r\n        \r\n        public ObjectProperty&lt;Color&gt; fgProperty() {\r\n            return fg;\r\n        }\r\n    }\r\n    \r\n    private Pane createControlPane(ColorPane view) {\r\n        ColorPicker bgPicker = new ColorPicker(view.bgProperty().get());\r\n        bgPicker.setTooltip(new Tooltip(&quot;Background color.&quot;));\r\n        view.bgProperty().bindBidirectional(bgPicker.valueProperty());\r\n        ColorPicker fgPicker = new ColorPicker(view.fgProperty().get());\r\n        fgPicker.setTooltip(new Tooltip(&quot;Foreground color.&quot;));\r\n        view.fgProperty().bindBidirectional(fgPicker.valueProperty());\r\n        return new VBox(16, bgPicker, fgPicker);\r\n    }\r\n    \r\n    @Override\r\n    public void start(Stage stage) {\r\n        var root = new BorderPane();\r\n        ColorPane colorPane = new ColorPane();\r\n        root.setCenter(colorPane);\r\n        root.setLeft(createControlPane(colorPane));\r\n        stage.setScene(new Scene(root));\r\n        stage.show();\r\n    }\r\n    \r\n    public static void main(String[] args) {\r\n        launch(args);\r\n    }\r\n}\r\n```\r\n\r\n**If you _do_ require** features of the region&#39;s [`background`][1], the following example illustrates dynamically replacing the background of a `GradientPane` with one that contains a `LinearGradient` based on the chosen color properties. The approach has the same benefit of _live_ custom color updates as the the controls are adjusted, illustrated above.\r\n\r\n[![gradients][5]][5]\r\n\r\n```\r\nimport javafx.application.Application;\r\nimport javafx.beans.InvalidationListener;\r\nimport javafx.beans.binding.Bindings;\r\nimport javafx.beans.binding.NumberBinding;\r\nimport javafx.beans.property.ObjectProperty;\r\nimport javafx.beans.property.SimpleObjectProperty;\r\nimport javafx.geometry.Insets;\r\nimport javafx.scene.Scene;\r\nimport javafx.scene.control.ColorPicker;\r\nimport javafx.scene.control.Tooltip;\r\nimport javafx.scene.layout.Background;\r\nimport javafx.scene.layout.BackgroundFill;\r\nimport javafx.scene.layout.BorderPane;\r\nimport javafx.scene.layout.CornerRadii;\r\nimport javafx.scene.layout.Pane;\r\nimport javafx.scene.layout.VBox;\r\nimport javafx.scene.paint.Color;\r\nimport javafx.scene.paint.CycleMethod;\r\nimport javafx.scene.paint.LinearGradient;\r\nimport javafx.scene.paint.Stop;\r\nimport javafx.scene.shape.Circle;\r\nimport javafx.stage.Stage;\r\n\r\n/**\r\n * @see https://stackoverflow.com/q/72583321/230513\r\n * @see https://stackoverflow.com/a/70312046/230513\r\n */\r\npublic class ColorTest extends Application {\r\n\r\n    private final class GradientPane extends Pane {\r\n\r\n        public static final Color c1Color = Color.BLUE;\r\n        public static final Color c2Color = Color.CYAN;\r\n        private final Circle c = new Circle(8, c2Color);\r\n        private final ObjectProperty&lt;Color&gt; c1 = new SimpleObjectProperty&lt;&gt;(c1Color);\r\n        private final ObjectProperty&lt;Color&gt; c2 = new SimpleObjectProperty&lt;&gt;(c2Color);\r\n        private final InvalidationListener listener = (o) -&gt; update();\r\n\r\n        public GradientPane() {\r\n            this.setPrefSize(256, 256);\r\n            c.centerXProperty().bind(widthProperty().divide(2));\r\n            c.centerYProperty().bind(heightProperty().divide(2));\r\n            NumberBinding diameter = Bindings.min(widthProperty(), heightProperty());\r\n            c.radiusProperty().bind(diameter.divide(2).subtract(diameter.divide(10)));\r\n            this.getChildren().add(c);\r\n            c1.addListener(listener);\r\n            c2.addListener(listener);\r\n            update();\r\n        }\r\n\r\n        private void update() {\r\n            Stop[] stops = new Stop[]{new Stop(0, c1.get()), new Stop(1, c2.get())};\r\n            LinearGradient lg = new LinearGradient(0.5, 0, 0.5, 1, true, CycleMethod.NO_CYCLE, stops);\r\n            this.setBackground(new Background(new BackgroundFill(lg, CornerRadii.EMPTY, Insets.EMPTY)));\r\n            stops = new Stop[]{new Stop(0, c2.get()), new Stop(1, c1.get())};\r\n            lg = new LinearGradient(0.5, 0, 0.5, 1, true, CycleMethod.NO_CYCLE, stops);\r\n            c.setFill(lg);\r\n        }\r\n\r\n        public ObjectProperty&lt;Color&gt; c1Property() {\r\n            return c1;\r\n        }\r\n\r\n        public ObjectProperty&lt;Color&gt; c2Property() {\r\n            return c2;\r\n        }\r\n    }\r\n\r\n    private Pane createControlPane(GradientPane view) {\r\n        ColorPicker bgPicker = new ColorPicker(view.c1Property().get());\r\n        bgPicker.setTooltip(new Tooltip(&quot;Color stop one.&quot;));\r\n        view.c1Property().bindBidirectional(bgPicker.valueProperty());\r\n        ColorPicker fgPicker = new ColorPicker(view.c2Property().get());\r\n        fgPicker.setTooltip(new Tooltip(&quot;Color stop two.&quot;));\r\n        view.c2Property().bindBidirectional(fgPicker.valueProperty());\r\n        VBox vBox = new VBox(10, bgPicker, fgPicker);\r\n        vBox.setPadding(new Insets(10));\r\n        return vBox;\r\n    }\r\n\r\n    @Override\r\n    public void start(Stage stage) {\r\n        var root = new BorderPane();\r\n        GradientPane colorPane = new GradientPane();\r\n        root.setCenter(colorPane);\r\n        root.setLeft(createControlPane(colorPane));\r\n        stage.setScene(new Scene(root));\r\n        stage.show();\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        launch(args);\r\n    }\r\n}\r\n```\r\n\r\n\r\n  [1]: https://openjfx.io/javadoc/17/javafx.graphics/javafx/scene/layout/Region.html#backgroundProperty\r\n  [2]: https://stackoverflow.com/q/70311488/230513\r\n  [3]: https://github.com/trashgod/modular\r\n  [4]: https://i.stack.imgur.com/5L6bg.png\r\n  [5]: https://i.stack.imgur.com/uT3Lj.png","title":"How to set pane colour from colour picker","body":"<p><strong>If you <em>don't</em> require</strong> all the features of the region's <a href=\"https://openjfx.io/javadoc/17/javafx.graphics/javafx/scene/layout/Region.html#backgroundProperty\" rel=\"nofollow noreferrer\"><code>background</code></a>—image, fills, etc.— and a solid color will suffice, also consider binding the color picker's value property to the fill color of a suitable <code>Shape</code> that fills the region. Based on the examples seen <a href=\"https://stackoverflow.com/q/70311488/230513\">here</a>, the variation below illustrates a <code>ColorPane</code> that renders a <code>Rectangle</code> whose size is bound to the enclosing <code>Pane</code> and whose color is bound to an <code>ObjectProperty&lt;Color&gt;</code> holding the rectangle's color. A similar arrangement is made for the foreground <code>Circle</code>. One  benefit is that a custom color updates <em>live</em> as the the controls are adjusted. Several related examples are collected <a href=\"https://github.com/trashgod/modular\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p><a href=\"https://i.stack.imgur.com/5L6bg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5L6bg.png\" alt=\"two-tone\" /></a></p>\n<pre><code>import javafx.application.Application;\nimport static javafx.application.Application.launch;\nimport javafx.beans.InvalidationListener;\nimport javafx.beans.binding.Bindings;\nimport javafx.beans.binding.NumberBinding;\nimport javafx.beans.property.ObjectProperty;\nimport javafx.beans.property.SimpleObjectProperty;\nimport javafx.scene.Scene;\nimport javafx.scene.control.ColorPicker;\nimport javafx.scene.control.Tooltip;\nimport javafx.scene.layout.BorderPane;\nimport javafx.scene.layout.Pane;\nimport javafx.scene.layout.VBox;\nimport javafx.scene.paint.Color;\nimport javafx.scene.shape.Circle;\nimport javafx.scene.shape.Rectangle;\nimport javafx.stage.Stage;\n\n/**\n * @see https://stackoverflow.com/q/72583321/230513\n * @see https://stackoverflow.com/a/70312046/230513\n */\npublic class ColorTest extends Application {\n    \n    private final class ColorPane extends Pane {\n        \n        public static final Color bgColor = Color.BLUE;\n        public static final Color fgColor = Color.CYAN;\n        private final Rectangle r = new Rectangle();\n        private final Circle c = new Circle(8, fgColor);\n        private final ObjectProperty&lt;Color&gt; bg = new SimpleObjectProperty&lt;&gt;(bgColor);\n        private final ObjectProperty&lt;Color&gt; fg = new SimpleObjectProperty&lt;&gt;(fgColor);\n        private final InvalidationListener listener = (o) -&gt; update();\n        \n        public ColorPane() {\n            this.setPrefSize(256, 256);\n            r.widthProperty().bind(this.widthProperty());\n            r.heightProperty().bind(this.heightProperty());\n            r.setFill(bgColor);\n            this.getChildren().add(r);\n            c.centerXProperty().bind(widthProperty().divide(2));\n            c.centerYProperty().bind(heightProperty().divide(2));\n            NumberBinding diameter = Bindings.min(widthProperty(), heightProperty());\n            c.radiusProperty().bind(diameter.divide(2).subtract(diameter.divide(10)));\n            this.getChildren().add(c);\n            bg.addListener(listener);\n            fg.addListener(listener);\n        }\n        \n        private void update() {\n            r.setFill(bg.get());\n            c.setFill(fg.get());\n        }\n        \n        public ObjectProperty&lt;Color&gt; bgProperty() {\n            return bg;\n        }\n        \n        public ObjectProperty&lt;Color&gt; fgProperty() {\n            return fg;\n        }\n    }\n    \n    private Pane createControlPane(ColorPane view) {\n        ColorPicker bgPicker = new ColorPicker(view.bgProperty().get());\n        bgPicker.setTooltip(new Tooltip(&quot;Background color.&quot;));\n        view.bgProperty().bindBidirectional(bgPicker.valueProperty());\n        ColorPicker fgPicker = new ColorPicker(view.fgProperty().get());\n        fgPicker.setTooltip(new Tooltip(&quot;Foreground color.&quot;));\n        view.fgProperty().bindBidirectional(fgPicker.valueProperty());\n        return new VBox(16, bgPicker, fgPicker);\n    }\n    \n    @Override\n    public void start(Stage stage) {\n        var root = new BorderPane();\n        ColorPane colorPane = new ColorPane();\n        root.setCenter(colorPane);\n        root.setLeft(createControlPane(colorPane));\n        stage.setScene(new Scene(root));\n        stage.show();\n    }\n    \n    public static void main(String[] args) {\n        launch(args);\n    }\n}\n</code></pre>\n<p><strong>If you <em>do</em> require</strong> features of the region's <a href=\"https://openjfx.io/javadoc/17/javafx.graphics/javafx/scene/layout/Region.html#backgroundProperty\" rel=\"nofollow noreferrer\"><code>background</code></a>, the following example illustrates dynamically replacing the background of a <code>GradientPane</code> with one that contains a <code>LinearGradient</code> based on the chosen color properties. The approach has the same benefit of <em>live</em> custom color updates as the the controls are adjusted, illustrated above.</p>\n<p><a href=\"https://i.stack.imgur.com/uT3Lj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uT3Lj.png\" alt=\"gradients\" /></a></p>\n<pre><code>import javafx.application.Application;\nimport javafx.beans.InvalidationListener;\nimport javafx.beans.binding.Bindings;\nimport javafx.beans.binding.NumberBinding;\nimport javafx.beans.property.ObjectProperty;\nimport javafx.beans.property.SimpleObjectProperty;\nimport javafx.geometry.Insets;\nimport javafx.scene.Scene;\nimport javafx.scene.control.ColorPicker;\nimport javafx.scene.control.Tooltip;\nimport javafx.scene.layout.Background;\nimport javafx.scene.layout.BackgroundFill;\nimport javafx.scene.layout.BorderPane;\nimport javafx.scene.layout.CornerRadii;\nimport javafx.scene.layout.Pane;\nimport javafx.scene.layout.VBox;\nimport javafx.scene.paint.Color;\nimport javafx.scene.paint.CycleMethod;\nimport javafx.scene.paint.LinearGradient;\nimport javafx.scene.paint.Stop;\nimport javafx.scene.shape.Circle;\nimport javafx.stage.Stage;\n\n/**\n * @see https://stackoverflow.com/q/72583321/230513\n * @see https://stackoverflow.com/a/70312046/230513\n */\npublic class ColorTest extends Application {\n\n    private final class GradientPane extends Pane {\n\n        public static final Color c1Color = Color.BLUE;\n        public static final Color c2Color = Color.CYAN;\n        private final Circle c = new Circle(8, c2Color);\n        private final ObjectProperty&lt;Color&gt; c1 = new SimpleObjectProperty&lt;&gt;(c1Color);\n        private final ObjectProperty&lt;Color&gt; c2 = new SimpleObjectProperty&lt;&gt;(c2Color);\n        private final InvalidationListener listener = (o) -&gt; update();\n\n        public GradientPane() {\n            this.setPrefSize(256, 256);\n            c.centerXProperty().bind(widthProperty().divide(2));\n            c.centerYProperty().bind(heightProperty().divide(2));\n            NumberBinding diameter = Bindings.min(widthProperty(), heightProperty());\n            c.radiusProperty().bind(diameter.divide(2).subtract(diameter.divide(10)));\n            this.getChildren().add(c);\n            c1.addListener(listener);\n            c2.addListener(listener);\n            update();\n        }\n\n        private void update() {\n            Stop[] stops = new Stop[]{new Stop(0, c1.get()), new Stop(1, c2.get())};\n            LinearGradient lg = new LinearGradient(0.5, 0, 0.5, 1, true, CycleMethod.NO_CYCLE, stops);\n            this.setBackground(new Background(new BackgroundFill(lg, CornerRadii.EMPTY, Insets.EMPTY)));\n            stops = new Stop[]{new Stop(0, c2.get()), new Stop(1, c1.get())};\n            lg = new LinearGradient(0.5, 0, 0.5, 1, true, CycleMethod.NO_CYCLE, stops);\n            c.setFill(lg);\n        }\n\n        public ObjectProperty&lt;Color&gt; c1Property() {\n            return c1;\n        }\n\n        public ObjectProperty&lt;Color&gt; c2Property() {\n            return c2;\n        }\n    }\n\n    private Pane createControlPane(GradientPane view) {\n        ColorPicker bgPicker = new ColorPicker(view.c1Property().get());\n        bgPicker.setTooltip(new Tooltip(&quot;Color stop one.&quot;));\n        view.c1Property().bindBidirectional(bgPicker.valueProperty());\n        ColorPicker fgPicker = new ColorPicker(view.c2Property().get());\n        fgPicker.setTooltip(new Tooltip(&quot;Color stop two.&quot;));\n        view.c2Property().bindBidirectional(fgPicker.valueProperty());\n        VBox vBox = new VBox(10, bgPicker, fgPicker);\n        vBox.setPadding(new Insets(10));\n        return vBox;\n    }\n\n    @Override\n    public void start(Stage stage) {\n        var root = new BorderPane();\n        GradientPane colorPane = new GradientPane();\n        root.setCenter(colorPane);\n        root.setLeft(createControlPane(colorPane));\n        stage.setScene(new Scene(root));\n        stage.show();\n    }\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":21056351,"reputation":61,"user_id":15475534,"display_name":"Shenavyre"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":429,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":72583552,"answer_count":2,"score":2,"last_activity_date":1655074910,"creation_date":1654941087,"question_id":72583321,"body_markdown":"I have some code, in javafx, that has a pane that works like a paint canvas. I need to be able to fill the background color of the pane from a color picker.\r\n\r\nCurrently I have a Color variable that gets the color chosen from the color picker and I try to set it to my Pane (named canvas) as below:\r\n\r\n```\r\nColor newColour = backgroundColourPicker.getValue();\r\ncanvas.setStyle(&quot;-fx-background-color: &quot; + newColour + &quot;;&quot;);\r\n```\r\n\r\nHowever I get this output:\r\n```\r\nJune 11, 2022 7:47:57 PM javafx.css.CssParser term\r\nWARNING: CSS Error parsing &#39;*{-fx-background-color: 0x00ffffff;}: Unexpected token &#39;0x&#39; at [1,24]\r\n```\r\n\r\nHow do I either swap my Color value to a String to be able to remove the leading 0x and make it work or how do I get my Pane to accept the color value as a Color?\r\n","title":"How to set pane colour from colour picker","body":"<p>I have some code, in javafx, that has a pane that works like a paint canvas. I need to be able to fill the background color of the pane from a color picker.</p>\n<p>Currently I have a Color variable that gets the color chosen from the color picker and I try to set it to my Pane (named canvas) as below:</p>\n<pre><code>Color newColour = backgroundColourPicker.getValue();\ncanvas.setStyle(&quot;-fx-background-color: &quot; + newColour + &quot;;&quot;);\n</code></pre>\n<p>However I get this output:</p>\n<pre><code>June 11, 2022 7:47:57 PM javafx.css.CssParser term\nWARNING: CSS Error parsing '*{-fx-background-color: 0x00ffffff;}: Unexpected token '0x' at [1,24]\n</code></pre>\n<p>How do I either swap my Color value to a String to be able to remove the leading 0x and make it work or how do I get my Pane to accept the color value as a Color?</p>\n"},{"tags":["java","android","sqlite","android-sqlite","custom-adapter"],"answers":[{"tags":[],"owner":{"account_id":1964117,"reputation":1853,"user_id":1764803,"accept_rate":67,"display_name":"Ihor Bykov"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1654988264,"creation_date":1654988264,"answer_id":72588409,"question_id":72588299,"body_markdown":"Using SQLite directly can be challenging, also ListView is outdated not recommended to use anymore. The best practise is to use RecycleView\r\n\r\nHere is a good tutorial how [to use it all][1]:\r\n\r\n[Room][2] - wrapper library for SQLite from Google\r\n\r\n[LiveData][3] - for subscribing for live update\r\n\r\n[RecyclerView][4] - UI widget for building efficient lists\r\n\r\n\r\n  [1]: https://www.youtube.com/watch?v=CTBiwKlO5IU\r\n  [2]: https://developer.android.com/jetpack/androidx/releases/room?gclid=Cj0KCQjw-pCVBhCFARIsAGMxhAeufHedhsawv2PT0ZhZPZPTYgSKR-glgEJzlNlwg3ln8OftziY6baIaAmtIEALw_wcB&amp;gclsrc=aw.ds\r\n  [3]: https://developer.android.com/topic/libraries/architecture/livedata\r\n  [4]: https://developer.android.com/guide/topics/ui/layout/recyclerview?gclid=Cj0KCQjw-pCVBhCFARIsAGMxhAecKzLSA4G5a_hqcD9ZqkSCKhqLIzykl6Gu0GIBtC0UJGJrRMp25eQaArBoEALw_wcB&amp;gclsrc=aw.ds","title":"How to automatically update ListView with custom adapter when item is deleted from database","body":"<p>Using SQLite directly can be challenging, also ListView is outdated not recommended to use anymore. The best practise is to use RecycleView</p>\n<p>Here is a good tutorial how <a href=\"https://www.youtube.com/watch?v=CTBiwKlO5IU\" rel=\"nofollow noreferrer\">to use it all</a>:</p>\n<p><a href=\"https://developer.android.com/jetpack/androidx/releases/room?gclid=Cj0KCQjw-pCVBhCFARIsAGMxhAeufHedhsawv2PT0ZhZPZPTYgSKR-glgEJzlNlwg3ln8OftziY6baIaAmtIEALw_wcB&amp;gclsrc=aw.ds\" rel=\"nofollow noreferrer\">Room</a> - wrapper library for SQLite from Google</p>\n<p><a href=\"https://developer.android.com/topic/libraries/architecture/livedata\" rel=\"nofollow noreferrer\">LiveData</a> - for subscribing for live update</p>\n<p><a href=\"https://developer.android.com/guide/topics/ui/layout/recyclerview?gclid=Cj0KCQjw-pCVBhCFARIsAGMxhAecKzLSA4G5a_hqcD9ZqkSCKhqLIzykl6Gu0GIBtC0UJGJrRMp25eQaArBoEALw_wcB&amp;gclsrc=aw.ds\" rel=\"nofollow noreferrer\">RecyclerView</a> - UI widget for building efficient lists</p>\n"},{"tags":[],"owner":{"account_id":6077735,"reputation":52951,"user_id":4744514,"accept_rate":96,"display_name":"MikeT"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1655073926,"creation_date":1655073926,"answer_id":72596394,"question_id":72588299,"body_markdown":"&gt; In the version below, I added an onItemClickListener for the ListView in the MainActivity - but it doesn&#39;t function for when the user clicks the ImageView (even though the ImageView is part of the ListView).\r\n\r\n\r\nConsider the following based upon your code:-\r\n\r\n\r\n \r\n\r\n\r\n**Working Example**\r\n\r\nThe following code is based upon yours BUT with various changes that does delete and refresh the list when the image (purple box is clicked).\r\n\r\n\r\nThe **list_item.xml** layout (altered to highlight the items as no image):-\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:orientation=&quot;horizontal&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;50dp&quot;\r\n        android:background=&quot;@color/teal_200&quot;&gt;\r\n        &lt;TextView\r\n            android:id=&quot;@+id/task&quot;\r\n            android:layout_width=&quot;400dp&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            &gt;\r\n        &lt;/TextView&gt;\r\n        &lt;ImageView\r\n            android:id=&quot;@+id/delView&quot;\r\n            android:layout_width=&quot;100dp&quot;\r\n            android:layout_height=&quot;20dp&quot;\r\n            android:layout_gravity=&quot;center&quot;\r\n            android:background=&quot;@color/purple_200&quot;\r\n            &gt;\r\n        &lt;/ImageView&gt;\r\n    &lt;/LinearLayout&gt;\r\n\r\nThe **DataModel** class is unchanged.\r\n\r\nThe **DatabaseHelper** class has been changed to a) not close the database (this is inefficient as it will apply the WAL changes and then have to subseuqently open the databaset which is relatively resource costly) and b) to close all cursors when done with the and c) utilise the convenience methods :-\r\n\r\n    public class DataBaseHelper extends SQLiteOpenHelper {\r\n    \r\n        public static final String TODO_TABLE = &quot;TODO_TABLE&quot;;\r\n        public static final String COLUMN_ID = &quot;ID&quot;;\r\n        public static final String COLUMN_TODO_TITLE = &quot;TODO_TITLE&quot;;\r\n        private Context mContext;\r\n    \r\n        public DataBaseHelper(@Nullable Context context) {\r\n            super(context, &quot;todo.db&quot;, null, 1);\r\n            mContext = context;\r\n        }\r\n        \r\n        @Override\r\n        public void onCreate(SQLiteDatabase db) {\r\n            String createTableStatement = &quot;CREATE TABLE &quot; + TODO_TABLE\r\n                    + &quot; (&quot; + COLUMN_ID + &quot; INTEGER PRIMARY KEY AUTOINCREMENT,&quot;\r\n                    + COLUMN_TODO_TITLE + &quot; TEXT)&quot;;\r\n    \r\n            db.execSQL(createTableStatement);\r\n        }\r\n        \r\n        @Override\r\n        public void onUpgrade(SQLiteDatabase sqLiteDatabase, int i, int i1) {\r\n    \r\n        }\r\n        \r\n        public boolean addOne(DataModel dModel) {\r\n            SQLiteDatabase db = this.getWritableDatabase(); //for insert actions\r\n            ContentValues cv = new ContentValues(); //Content values stores data in pairs\r\n            cv.put(COLUMN_TODO_TITLE, dModel.getTitle());\r\n            return db.insert(TODO_TABLE, null, cv) &gt; -1;\r\n        }\r\n    \r\n        public boolean deleteOne(DataModel dModel) {\r\n            SQLiteDatabase db = this.getWritableDatabase();\r\n            return db.delete(TODO_TABLE,COLUMN_TODO_TITLE +&quot;=?&quot;,new String[]{dModel.getTitle()}) &gt; 0;\r\n        }\r\n    \r\n        @SuppressLint(&quot;Range&quot;)\r\n        public ArrayList&lt;DataModel&gt; getAllAsList() {\r\n            //create empty list\r\n            ArrayList&lt;DataModel&gt; returnList = new ArrayList&lt;&gt;();\r\n            SQLiteDatabase db = this.getReadableDatabase();\r\n            Cursor cursor = db.query(TODO_TABLE,null,null,null,null,null,null);\r\n            while (cursor.moveToNext()) {\r\n                returnList.add(new DataModel(cursor.getString(cursor.getColumnIndex(COLUMN_TODO_TITLE))));\r\n            }\r\n            cursor.close();\r\n            return returnList;\r\n        }\r\n    \r\n        public boolean existsInDB(DataModel dModel) {\r\n            boolean rv = false;\r\n            SQLiteDatabase db = this.getWritableDatabase(); //for insert actions\r\n            Cursor cursor = db.query(TODO_TABLE,null,COLUMN_TODO_TITLE+&quot;=?&quot;,new String[]{dModel.getTitle()},null,null,null);\r\n            if(cursor.moveToFirst()) {\r\n                rv = true;\r\n            }\r\n            cursor.close();\r\n            return rv;\r\n        }\r\n    }\r\n\r\n**DataAdapter**\r\n\r\n    public class DataAdapter extends ArrayAdapter&lt;DataModel&gt; {\r\n    \r\n       /**\r\n        * Attributes\r\n        */\r\n       private Context mContext;\r\n       private int mResource;\r\n       private ArrayList&lt;DataModel&gt; mList;\r\n       private DataBaseHelper mDbHelper;\r\n    \r\n    \r\n       public DataAdapter(Context context, int resource, ArrayList&lt;DataModel&gt; list, DataBaseHelper dbHelper) {\r\n          super(context, resource, list);\r\n          mContext = context;\r\n          mResource = resource;\r\n          mList = list;\r\n          mDbHelper = dbHelper;\r\n       }\r\n    \r\n       public View getView(int position, @Nullable View convertView, @NonNull ViewGroup parent) {\r\n          //get the objects information\r\n          String title = getItem(position).getTitle();\r\n    \r\n          //create object with the information\r\n          DataModel model = new DataModel(title);\r\n    \r\n          LayoutInflater inflater = LayoutInflater.from(mContext);\r\n          convertView = inflater.inflate(mResource, parent, false);\r\n    \r\n          //get TextViews\r\n          TextView tvTitle = (TextView) convertView.findViewById(R.id.task);\r\n    \r\n          //set information to TextViews\r\n          tvTitle.setText(title);\r\n    \r\n          //delete function\r\n          ImageView delView = (ImageView) convertView.findViewById(R.id.delView);\r\n          delView.setTag(position); //&lt;&lt;&lt;&lt;&lt; ADDDED Sets the tag with the position in the list\r\n          delView.setOnClickListener(new View.OnClickListener() {\r\n             @Override\r\n             public void onClick(View view) {\r\n                Integer position = new Integer(view.getTag().toString()); // gets the position from the tag\r\n                DataModel model = mList.get(position); // gets the respective DataModel from the ArrayList\r\n                Toast.makeText(view.getContext(),&quot;You clicked the Image for Title = &quot; + model.getTitle() + &quot; position &quot; + view.getTag(),Toast.LENGTH_SHORT).show();\r\n                Log.d(&quot;CLICKACTION&quot;,&quot;Image clicked for title = &quot; + model.getTitle() + &quot; position &quot; + view.getTag());\r\n                /* probably faster but the potential for issues if for some reason deletes other than expected\r\n                if (mDbHelper.deleteOne(model)) {\r\n                   mList.remove(model);\r\n                   notifyDataSetChanged();\r\n                }\r\n                 */\r\n                /* Alternative approach - more intensive but the resultant list IS accurate */\r\n                mDbHelper.deleteOne(model);\r\n                ArrayList&lt;DataModel&gt; newlist = mDbHelper.getAllAsList();\r\n                mList.clear();\r\n                for (DataModel dm: newlist) {\r\n                   mList.add(dm);\r\n                   notifyDataSetChanged();\r\n                }\r\n             }\r\n          });\r\n          return convertView;\r\n       }\r\n    }\r\n - **NOTE** an important aspect is utilising the tag to tie the clicked view to the Todo/DataModel.\r\n- **NOTE** another important factor is the manipulation of the DataAdapter&#39;s instance of the ArrayList and the subsequent `notifyDatasetChanged` that tells the adapter to rebuild.\r\n\r\nand **MainActivity** :-\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n        //References to buttons and other controls on the layout\r\n        private Button btn_add;\r\n        private EditText et_todo;\r\n        private Switch sw;\r\n        private static ListView lv;\r\n        private static DataAdapter todoAdapter;\r\n        private DataBaseHelper dbHelper;\r\n    \r\n        /**\r\n         * Initialization Method\r\n         *\r\n         * @param savedInstanceState\r\n         */\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n            dbHelper = new DataBaseHelper(MainActivity.this);\r\n    \r\n            assignVariables();\r\n            registerClick();\r\n            showAllToDos(dbHelper); // creates a new instance of the adapter each time it is called\r\n        }\r\n    \r\n    \r\n        private void assignVariables() {\r\n            //assign values to variables\r\n            btn_add = (Button) findViewById(R.id.btn_add);\r\n            et_todo = (EditText) findViewById(R.id.et_todo);\r\n            lv = (ListView) findViewById(R.id.lv);\r\n        }\r\n    \r\n        public void showAllToDos(DataBaseHelper dbHelper) {\r\n            todoAdapter = new DataAdapter(MainActivity.this, R.layout.list_item, dbHelper.getAllAsList(), dbHelper);\r\n            lv.setAdapter(todoAdapter);\r\n        }\r\n        \r\n        private void registerClick() {\r\n            btn_add.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    String toDoTitle = et_todo.getText().toString();\r\n    \r\n                    if(Pattern.matches(&quot;s*&quot;, toDoTitle)) {\r\n                        Toast.makeText(MainActivity.this, &quot;Title is missing&quot;, Toast.LENGTH_SHORT).show();\r\n                    } else if(dbHelper.existsInDB(new DataModel(toDoTitle))) {\r\n                        Toast.makeText(MainActivity.this, &quot;Already added as ToDo&quot;, Toast.LENGTH_SHORT).show();\r\n                    } else {\r\n                        DataModel dModel = new DataModel(toDoTitle);\r\n                        dbHelper.addOne(dModel);\r\n    \r\n                        showAllToDos(dbHelper);\r\n                    }\r\n                    //empty input field\r\n                    et_todo.setText(&quot;&quot;);\r\n                }\r\n            });\r\n    \r\n    \r\n            lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n                @Override\r\n                public void onItemClick(AdapterView&lt;?&gt; adapterView, View view, int position, long l) {\r\n                    Toast.makeText(view.getContext(),&quot;Item was clicked for Title = &quot; + ((DataModel) adapterView.getItemAtPosition(position)).getTitle(),Toast.LENGTH_SHORT).show();\r\n                    Log.d(&quot;CLICKACTION&quot;,&quot;Item was clicked for Title&quot; + ((DataModel) adapterView.getItemAtPosition(position)).getTitle());\r\n                    //DataModel clickedItem = (DataModel) adapterView.getItemAtPosition(position);\r\n                    //dbHelper.deleteOne(clickedItem);\r\n                    //showAllToDos(dbHelper);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n**Results*\r\n\r\nFrom a new install (empty Database) then the following actions were taken:-\r\n\r\n1. Add Test001 - Test006 so :-\r\n\r\n    1. [![enter image description here][2]][2]\r\n\r\n2. Click on Item Test003 (NOT the purple box (image))\r\n    1. Toast displays as expected.\r\n    2. Log includes `D/CLICKACTION: Item was clicked for TitleTest003`\r\n3. Click on the Delete image (purple box) for Test003\r\n    1. Toast displays as expected Test003 position 2\r\n    2. Log includes `D/CLICKACTION: Image clicked for title = Test003 position 2`\r\n    3. [![enter image description here][3]][3]\r\n        1. i.e. Test003 removed from the display\r\n    4. Database via App Inspection shows:-\r\n    - [![enter image description here][4]][4]\r\n        - i.e. no Test003 row in the database\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/HSbDn.png\r\n  [2]: https://i.stack.imgur.com/UVfLM.png\r\n  [3]: https://i.stack.imgur.com/Gmtqg.png\r\n  [4]: https://i.stack.imgur.com/AOysE.png","title":"How to automatically update ListView with custom adapter when item is deleted from database","body":"<blockquote>\n<p>In the version below, I added an onItemClickListener for the ListView in the MainActivity - but it doesn't function for when the user clicks the ImageView (even though the ImageView is part of the ListView).</p>\n</blockquote>\n<p>Consider the following based upon your code:-</p>\n<p><strong>Working Example</strong></p>\n<p>The following code is based upon yours BUT with various changes that does delete and refresh the list when the image (purple box is clicked).</p>\n<p>The <strong>list_item.xml</strong> layout (altered to highlight the items as no image):-</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:orientation=&quot;horizontal&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;50dp&quot;\n    android:background=&quot;@color/teal_200&quot;&gt;\n    &lt;TextView\n        android:id=&quot;@+id/task&quot;\n        android:layout_width=&quot;400dp&quot;\n        android:layout_height=&quot;match_parent&quot;\n        &gt;\n    &lt;/TextView&gt;\n    &lt;ImageView\n        android:id=&quot;@+id/delView&quot;\n        android:layout_width=&quot;100dp&quot;\n        android:layout_height=&quot;20dp&quot;\n        android:layout_gravity=&quot;center&quot;\n        android:background=&quot;@color/purple_200&quot;\n        &gt;\n    &lt;/ImageView&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n<p>The <strong>DataModel</strong> class is unchanged.</p>\n<p>The <strong>DatabaseHelper</strong> class has been changed to a) not close the database (this is inefficient as it will apply the WAL changes and then have to subseuqently open the databaset which is relatively resource costly) and b) to close all cursors when done with the and c) utilise the convenience methods :-</p>\n<pre><code>public class DataBaseHelper extends SQLiteOpenHelper {\n\n    public static final String TODO_TABLE = &quot;TODO_TABLE&quot;;\n    public static final String COLUMN_ID = &quot;ID&quot;;\n    public static final String COLUMN_TODO_TITLE = &quot;TODO_TITLE&quot;;\n    private Context mContext;\n\n    public DataBaseHelper(@Nullable Context context) {\n        super(context, &quot;todo.db&quot;, null, 1);\n        mContext = context;\n    }\n    \n    @Override\n    public void onCreate(SQLiteDatabase db) {\n        String createTableStatement = &quot;CREATE TABLE &quot; + TODO_TABLE\n                + &quot; (&quot; + COLUMN_ID + &quot; INTEGER PRIMARY KEY AUTOINCREMENT,&quot;\n                + COLUMN_TODO_TITLE + &quot; TEXT)&quot;;\n\n        db.execSQL(createTableStatement);\n    }\n    \n    @Override\n    public void onUpgrade(SQLiteDatabase sqLiteDatabase, int i, int i1) {\n\n    }\n    \n    public boolean addOne(DataModel dModel) {\n        SQLiteDatabase db = this.getWritableDatabase(); //for insert actions\n        ContentValues cv = new ContentValues(); //Content values stores data in pairs\n        cv.put(COLUMN_TODO_TITLE, dModel.getTitle());\n        return db.insert(TODO_TABLE, null, cv) &gt; -1;\n    }\n\n    public boolean deleteOne(DataModel dModel) {\n        SQLiteDatabase db = this.getWritableDatabase();\n        return db.delete(TODO_TABLE,COLUMN_TODO_TITLE +&quot;=?&quot;,new String[]{dModel.getTitle()}) &gt; 0;\n    }\n\n    @SuppressLint(&quot;Range&quot;)\n    public ArrayList&lt;DataModel&gt; getAllAsList() {\n        //create empty list\n        ArrayList&lt;DataModel&gt; returnList = new ArrayList&lt;&gt;();\n        SQLiteDatabase db = this.getReadableDatabase();\n        Cursor cursor = db.query(TODO_TABLE,null,null,null,null,null,null);\n        while (cursor.moveToNext()) {\n            returnList.add(new DataModel(cursor.getString(cursor.getColumnIndex(COLUMN_TODO_TITLE))));\n        }\n        cursor.close();\n        return returnList;\n    }\n\n    public boolean existsInDB(DataModel dModel) {\n        boolean rv = false;\n        SQLiteDatabase db = this.getWritableDatabase(); //for insert actions\n        Cursor cursor = db.query(TODO_TABLE,null,COLUMN_TODO_TITLE+&quot;=?&quot;,new String[]{dModel.getTitle()},null,null,null);\n        if(cursor.moveToFirst()) {\n            rv = true;\n        }\n        cursor.close();\n        return rv;\n    }\n}\n</code></pre>\n<p><strong>DataAdapter</strong></p>\n<pre><code>public class DataAdapter extends ArrayAdapter&lt;DataModel&gt; {\n\n   /**\n    * Attributes\n    */\n   private Context mContext;\n   private int mResource;\n   private ArrayList&lt;DataModel&gt; mList;\n   private DataBaseHelper mDbHelper;\n\n\n   public DataAdapter(Context context, int resource, ArrayList&lt;DataModel&gt; list, DataBaseHelper dbHelper) {\n      super(context, resource, list);\n      mContext = context;\n      mResource = resource;\n      mList = list;\n      mDbHelper = dbHelper;\n   }\n\n   public View getView(int position, @Nullable View convertView, @NonNull ViewGroup parent) {\n      //get the objects information\n      String title = getItem(position).getTitle();\n\n      //create object with the information\n      DataModel model = new DataModel(title);\n\n      LayoutInflater inflater = LayoutInflater.from(mContext);\n      convertView = inflater.inflate(mResource, parent, false);\n\n      //get TextViews\n      TextView tvTitle = (TextView) convertView.findViewById(R.id.task);\n\n      //set information to TextViews\n      tvTitle.setText(title);\n\n      //delete function\n      ImageView delView = (ImageView) convertView.findViewById(R.id.delView);\n      delView.setTag(position); //&lt;&lt;&lt;&lt;&lt; ADDDED Sets the tag with the position in the list\n      delView.setOnClickListener(new View.OnClickListener() {\n         @Override\n         public void onClick(View view) {\n            Integer position = new Integer(view.getTag().toString()); // gets the position from the tag\n            DataModel model = mList.get(position); // gets the respective DataModel from the ArrayList\n            Toast.makeText(view.getContext(),&quot;You clicked the Image for Title = &quot; + model.getTitle() + &quot; position &quot; + view.getTag(),Toast.LENGTH_SHORT).show();\n            Log.d(&quot;CLICKACTION&quot;,&quot;Image clicked for title = &quot; + model.getTitle() + &quot; position &quot; + view.getTag());\n            /* probably faster but the potential for issues if for some reason deletes other than expected\n            if (mDbHelper.deleteOne(model)) {\n               mList.remove(model);\n               notifyDataSetChanged();\n            }\n             */\n            /* Alternative approach - more intensive but the resultant list IS accurate */\n            mDbHelper.deleteOne(model);\n            ArrayList&lt;DataModel&gt; newlist = mDbHelper.getAllAsList();\n            mList.clear();\n            for (DataModel dm: newlist) {\n               mList.add(dm);\n               notifyDataSetChanged();\n            }\n         }\n      });\n      return convertView;\n   }\n}\n</code></pre>\n<ul>\n<li><strong>NOTE</strong> an important aspect is utilising the tag to tie the clicked view to the Todo/DataModel.</li>\n<li><strong>NOTE</strong> another important factor is the manipulation of the DataAdapter's instance of the ArrayList and the subsequent <code>notifyDatasetChanged</code> that tells the adapter to rebuild.</li>\n</ul>\n<p>and <strong>MainActivity</strong> :-</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n    //References to buttons and other controls on the layout\n    private Button btn_add;\n    private EditText et_todo;\n    private Switch sw;\n    private static ListView lv;\n    private static DataAdapter todoAdapter;\n    private DataBaseHelper dbHelper;\n\n    /**\n     * Initialization Method\n     *\n     * @param savedInstanceState\n     */\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        dbHelper = new DataBaseHelper(MainActivity.this);\n\n        assignVariables();\n        registerClick();\n        showAllToDos(dbHelper); // creates a new instance of the adapter each time it is called\n    }\n\n\n    private void assignVariables() {\n        //assign values to variables\n        btn_add = (Button) findViewById(R.id.btn_add);\n        et_todo = (EditText) findViewById(R.id.et_todo);\n        lv = (ListView) findViewById(R.id.lv);\n    }\n\n    public void showAllToDos(DataBaseHelper dbHelper) {\n        todoAdapter = new DataAdapter(MainActivity.this, R.layout.list_item, dbHelper.getAllAsList(), dbHelper);\n        lv.setAdapter(todoAdapter);\n    }\n    \n    private void registerClick() {\n        btn_add.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                String toDoTitle = et_todo.getText().toString();\n\n                if(Pattern.matches(&quot;s*&quot;, toDoTitle)) {\n                    Toast.makeText(MainActivity.this, &quot;Title is missing&quot;, Toast.LENGTH_SHORT).show();\n                } else if(dbHelper.existsInDB(new DataModel(toDoTitle))) {\n                    Toast.makeText(MainActivity.this, &quot;Already added as ToDo&quot;, Toast.LENGTH_SHORT).show();\n                } else {\n                    DataModel dModel = new DataModel(toDoTitle);\n                    dbHelper.addOne(dModel);\n\n                    showAllToDos(dbHelper);\n                }\n                //empty input field\n                et_todo.setText(&quot;&quot;);\n            }\n        });\n\n\n        lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {\n            @Override\n            public void onItemClick(AdapterView&lt;?&gt; adapterView, View view, int position, long l) {\n                Toast.makeText(view.getContext(),&quot;Item was clicked for Title = &quot; + ((DataModel) adapterView.getItemAtPosition(position)).getTitle(),Toast.LENGTH_SHORT).show();\n                Log.d(&quot;CLICKACTION&quot;,&quot;Item was clicked for Title&quot; + ((DataModel) adapterView.getItemAtPosition(position)).getTitle());\n                //DataModel clickedItem = (DataModel) adapterView.getItemAtPosition(position);\n                //dbHelper.deleteOne(clickedItem);\n                //showAllToDos(dbHelper);\n            }\n        });\n    }\n}\n</code></pre>\n<p>*<em>Results</em></p>\n<p>From a new install (empty Database) then the following actions were taken:-</p>\n<ol>\n<li><p>Add Test001 - Test006 so :-</p>\n<ol>\n<li><a href=\"https://i.stack.imgur.com/UVfLM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UVfLM.png\" alt=\"enter image description here\" /></a></li>\n</ol>\n</li>\n<li><p>Click on Item Test003 (NOT the purple box (image))</p>\n<ol>\n<li>Toast displays as expected.</li>\n<li>Log includes <code>D/CLICKACTION: Item was clicked for TitleTest003</code></li>\n</ol>\n</li>\n<li><p>Click on the Delete image (purple box) for Test003</p>\n<ol>\n<li>Toast displays as expected Test003 position 2</li>\n<li>Log includes <code>D/CLICKACTION: Image clicked for title = Test003 position 2</code></li>\n<li><a href=\"https://i.stack.imgur.com/Gmtqg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Gmtqg.png\" alt=\"enter image description here\" /></a>\n<ol>\n<li>i.e. Test003 removed from the display</li>\n</ol>\n</li>\n<li>Database via App Inspection shows:-</li>\n</ol>\n<ul>\n<li><a href=\"https://i.stack.imgur.com/AOysE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AOysE.png\" alt=\"enter image description here\" /></a>\n<ul>\n<li>i.e. no Test003 row in the database</li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n"}],"owner":{"account_id":25534176,"reputation":13,"user_id":19321594,"display_name":"Nicole"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":451,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":72596394,"answer_count":2,"score":1,"last_activity_date":1655073926,"creation_date":1654986962,"question_id":72588299,"body_markdown":"I created a ListView for which I implemented a custom adapter. Additionally I connected it to a SQLite database, which contains the content for the ListView.\r\n\r\nI have one ListView with several items. Every item consists of a TextView and an ImageView which functions as a button. When the user clicks the ImageView, I want to delete the item from the database and automatically update the ListView.\r\n\r\nUnluckily, I just know how to delete the item from the database. I can&#39;t think of a way to automatically update the ListView in my program, after the item got deleted from the database.\r\n\r\nIn the version below, I added an onItemClickListener for the ListView in the MainActivity - but it doesn&#39;t function for when the user clicks the ImageView (even though the ImageView is part of the ListView).\r\n\r\nMainActivity\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n    //References to buttons and other controls on the layout\r\n    private Button btn_add;\r\n    private EditText et_todo;\r\n    private Switch sw;\r\n    private static ListView lv;\r\n    private static DataAdapter todoAdapter;\r\n    private DataBaseHelper dbHelper;\r\n\r\n    /**\r\n     * Initialization Method\r\n     *\r\n     * @param savedInstanceState\r\n     */\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        dbHelper = new DataBaseHelper(MainActivity.this);\r\n\r\n        assignVariables();\r\n        registerClick();\r\n        showAllToDos(dbHelper);\r\n    }\r\n\r\n    private void assignVariables() {\r\n        //assign values to variables\r\n        btn_add = (Button) findViewById(R.id.btn_add);\r\n        et_todo = (EditText) findViewById(R.id.et_todo);\r\n        lv = (ListView) findViewById(R.id.lv);\r\n    }\r\n\r\n    public void showAllToDos(DataBaseHelper dbHelper) {\r\n        todoAdapter = new DataAdapter(MainActivity.this, R.layout.list_item, dbHelper.getAllAsList(), dbHelper);\r\n        lv.setAdapter(todoAdapter);\r\n    }\r\n\r\n    private void registerClick() {\r\n        btn_add.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                String toDoTitle = et_todo.getText().toString();\r\n\r\n                if(Pattern.matches(&quot;s*&quot;, toDoTitle)) {\r\n                    Toast.makeText(MainActivity.this, &quot;Title is missing&quot;, Toast.LENGTH_SHORT).show();\r\n                } else if(dbHelper.existsInDB(new DataModel(toDoTitle))) {\r\n                    Toast.makeText(MainActivity.this, &quot;Already added as ToDo&quot;, Toast.LENGTH_SHORT).show();\r\n                } else {\r\n                    DataModel dModel = new DataModel(toDoTitle);\r\n                    dbHelper.addOne(dModel);\r\n\r\n                    showAllToDos(dbHelper);\r\n                }\r\n                //empty input field\r\n                et_todo.setText(&quot;&quot;);\r\n            }\r\n        });\r\n\r\n        lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(AdapterView&lt;?&gt; adapterView, View view, int position, long l) {\r\n                DataModel clickedItem = (DataModel) adapterView.getItemAtPosition(position);\r\n                dbHelper.deleteOne(clickedItem);\r\n\r\n                showAllToDos(dbHelper);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nDataModel\r\n\r\n    public class DataModel {\r\n\r\n    //Attributes\r\n    private int id;\r\n    private String title;\r\n\r\n    //Constructors\r\n    public DataModel(String title) {\r\n        this.title = title;\r\n    }\r\n\r\n    public DataModel() {\r\n\r\n    }\r\n\r\n    //toString\r\n    @Override\r\n    public String toString() {\r\n        return &quot;DataModel{&quot; +\r\n                &quot;id=&quot; + id +\r\n                &quot;, title=&#39;&quot; + title + &#39;\\&#39;&#39; +\r\n                &#39;}&#39;;\r\n    }\r\n\r\n    //Getters and Setters\r\n    public int getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(int id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getTitle() {\r\n        return title;\r\n    }\r\n\r\n    public void setTitle(String title) {\r\n        this.title = title;\r\n    }\r\n}\r\n\r\nDataAdapter\r\n\r\n    public class DataAdapter extends ArrayAdapter&lt;DataModel&gt; {\r\n\r\n    /**\r\n     * Attributes\r\n     */\r\n    private Context mContext;\r\n    private int mResource;\r\n    private ArrayList&lt;DataModel&gt; mList;\r\n    private DataBaseHelper mDbHelper;\r\n\r\n\r\n    public DataAdapter(Context context, int resource, ArrayList&lt;DataModel&gt; list, DataBaseHelper dbHelper) {\r\n        super(context, resource, list);\r\n        mContext = context;\r\n        mResource = resource;\r\n        mList = list;\r\n        mDbHelper = dbHelper;\r\n    }\r\n\r\n    public View getView(int position, @Nullable View convertView, @NonNull ViewGroup parent) {\r\n        //get the objects information\r\n        String title = getItem(position).getTitle();\r\n\r\n        //create object with the information\r\n        DataModel model = new DataModel(title);\r\n\r\n        LayoutInflater inflater = LayoutInflater.from(mContext);\r\n        convertView = inflater.inflate(mResource, parent, false);\r\n\r\n        //get TextViews\r\n        TextView tvTitle = (TextView) convertView.findViewById(R.id.task);\r\n\r\n        //set information to TextViews\r\n        tvTitle.setText(title);\r\n\r\n        //delete function\r\n        ImageView delView = (ImageView) convertView.findViewById(R.id.delView);\r\n        delView.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                mDbHelper.deleteOne(model);\r\n            }\r\n        });\r\n        return convertView;\r\n    }\r\n}\r\n\r\nDataBaseHelper\r\n\r\n    public class DataBaseHelper extends SQLiteOpenHelper {\r\n\r\n    public static final String TODO_TABLE = &quot;TODO_TABLE&quot;;\r\n    public static final String COLUMN_ID = &quot;ID&quot;;\r\n    public static final String COLUMN_TODO_TITLE = &quot;TODO_TITLE&quot;;\r\n    private Context mContext;\r\n\r\n    public DataBaseHelper(@Nullable Context context) {\r\n        super(context, &quot;todo.db&quot;, null, 1);\r\n        mContext = context;\r\n    }\r\n\r\n    /**\r\n     * Is called when the app requests or inputs new data.\r\n     *\r\n     * @param db\r\n     */\r\n    @Override\r\n    public void onCreate(SQLiteDatabase db) {\r\n\r\n        String createTableStatement = &quot;CREATE TABLE &quot; + TODO_TABLE\r\n                + &quot; (&quot; + COLUMN_ID + &quot; INTEGER PRIMARY KEY AUTOINCREMENT,&quot;\r\n                + COLUMN_TODO_TITLE + &quot; TEXT)&quot;;\r\n\r\n        db.execSQL(createTableStatement);\r\n        //create new Table\r\n    }\r\n\r\n    /**\r\n     * Called whenever the database version number changes.\r\n     * Prevents the previous apps from crashing.\r\n     *\r\n     * @param sqLiteDatabase\r\n     * @param i\r\n     * @param i1\r\n     */\r\n    @Override\r\n    public void onUpgrade(SQLiteDatabase sqLiteDatabase, int i, int i1) {\r\n\r\n    }\r\n\r\n    /**\r\n     * method to add new database entry\r\n     *\r\n     * @param dModel\r\n     * @return\r\n     */\r\n    public boolean addOne(DataModel dModel) {\r\n        SQLiteDatabase db = this.getWritableDatabase(); //for insert actions\r\n        ContentValues cv = new ContentValues(); //Content values stores data in pairs\r\n\r\n        cv.put(COLUMN_TODO_TITLE, dModel.getTitle());\r\n\r\n        long insert = db.insert(TODO_TABLE, null, cv);\r\n\r\n        //clean up, close connection to database and cursor\r\n        db.close();\r\n        if(insert == -1) { //if insert is negative number than insert went wrong\r\n            return false;\r\n        } else { //if insert is positive number than insert succeeded\r\n            return true;\r\n        }\r\n    }\r\n\r\n    public boolean deleteOne(DataModel dModel) {\r\n        //if DataModel is found in the database, delete it and return true\r\n        //if it is not found, return false\r\n        SQLiteDatabase db = this.getWritableDatabase();\r\n\r\n        String queryString = &quot;DELETE FROM &quot; + TODO_TABLE\r\n                + &quot; WHERE &quot; + COLUMN_TODO_TITLE + &quot; = &quot; + &quot;\\&quot;&quot; + dModel.getTitle() + &quot;\\&quot;&quot;;;\r\n\r\n        Cursor cursor = db.rawQuery(queryString, null);\r\n\r\n        if(cursor.moveToFirst()) {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    public ArrayList&lt;DataModel&gt; getAllAsList() {\r\n        //create empty list\r\n        ArrayList&lt;DataModel&gt; returnList = new ArrayList&lt;&gt;();\r\n        //get data from the database\r\n        String queryString = &quot;SELECT * FROM &quot; + TODO_TABLE;\r\n        SQLiteDatabase db = this.getReadableDatabase(); //get data from database\r\n        Cursor cursor = db.rawQuery(queryString, null);\r\n\r\n        if(cursor.moveToFirst()) { //returns a true if there were items selected\r\n            //loop through results, create new todo objects, put them into return list\r\n            do {\r\n                String todoTitle = cursor.getString(1);\r\n\r\n                DataModel newTodo = new DataModel(todoTitle);\r\n                returnList.add(newTodo);\r\n\r\n            } while(cursor.moveToNext());\r\n        } else { //returns a false if no items were selected\r\n            //failure, to not add anything to the list\r\n        }\r\n\r\n        //clean up, close connection to database and cursor\r\n        cursor.close();\r\n        db.close();\r\n\r\n        return returnList;\r\n    }\r\n\r\n    public boolean existsInDB(DataModel dModel) {\r\n        SQLiteDatabase db = this.getWritableDatabase(); //for insert actions\r\n        String queryString = &quot;SELECT * FROM &quot; + TODO_TABLE\r\n                + &quot; WHERE &quot; + COLUMN_TODO_TITLE + &quot; = &quot; + &quot;\\&quot;&quot; + dModel.getTitle() + &quot;\\&quot;&quot;;\r\n\r\n        Cursor cursor = db.rawQuery(queryString, null);\r\n\r\n        if(cursor.moveToFirst()) {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n}\r\n\r\nI appreciate any kind of help or suggestion.\r\nLet me know, if you need further explanation.\r\n\r\nNicole\r\n\r\n","title":"How to automatically update ListView with custom adapter when item is deleted from database","body":"<p>I created a ListView for which I implemented a custom adapter. Additionally I connected it to a SQLite database, which contains the content for the ListView.</p>\n<p>I have one ListView with several items. Every item consists of a TextView and an ImageView which functions as a button. When the user clicks the ImageView, I want to delete the item from the database and automatically update the ListView.</p>\n<p>Unluckily, I just know how to delete the item from the database. I can't think of a way to automatically update the ListView in my program, after the item got deleted from the database.</p>\n<p>In the version below, I added an onItemClickListener for the ListView in the MainActivity - but it doesn't function for when the user clicks the ImageView (even though the ImageView is part of the ListView).</p>\n<p>MainActivity</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n//References to buttons and other controls on the layout\nprivate Button btn_add;\nprivate EditText et_todo;\nprivate Switch sw;\nprivate static ListView lv;\nprivate static DataAdapter todoAdapter;\nprivate DataBaseHelper dbHelper;\n\n/**\n * Initialization Method\n *\n * @param savedInstanceState\n */\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    dbHelper = new DataBaseHelper(MainActivity.this);\n\n    assignVariables();\n    registerClick();\n    showAllToDos(dbHelper);\n}\n\nprivate void assignVariables() {\n    //assign values to variables\n    btn_add = (Button) findViewById(R.id.btn_add);\n    et_todo = (EditText) findViewById(R.id.et_todo);\n    lv = (ListView) findViewById(R.id.lv);\n}\n\npublic void showAllToDos(DataBaseHelper dbHelper) {\n    todoAdapter = new DataAdapter(MainActivity.this, R.layout.list_item, dbHelper.getAllAsList(), dbHelper);\n    lv.setAdapter(todoAdapter);\n}\n\nprivate void registerClick() {\n    btn_add.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n            String toDoTitle = et_todo.getText().toString();\n\n            if(Pattern.matches(&quot;s*&quot;, toDoTitle)) {\n                Toast.makeText(MainActivity.this, &quot;Title is missing&quot;, Toast.LENGTH_SHORT).show();\n            } else if(dbHelper.existsInDB(new DataModel(toDoTitle))) {\n                Toast.makeText(MainActivity.this, &quot;Already added as ToDo&quot;, Toast.LENGTH_SHORT).show();\n            } else {\n                DataModel dModel = new DataModel(toDoTitle);\n                dbHelper.addOne(dModel);\n\n                showAllToDos(dbHelper);\n            }\n            //empty input field\n            et_todo.setText(&quot;&quot;);\n        }\n    });\n\n    lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {\n        @Override\n        public void onItemClick(AdapterView&lt;?&gt; adapterView, View view, int position, long l) {\n            DataModel clickedItem = (DataModel) adapterView.getItemAtPosition(position);\n            dbHelper.deleteOne(clickedItem);\n\n            showAllToDos(dbHelper);\n        }\n    });\n}\n</code></pre>\n<p>}</p>\n<p>DataModel</p>\n<pre><code>public class DataModel {\n\n//Attributes\nprivate int id;\nprivate String title;\n\n//Constructors\npublic DataModel(String title) {\n    this.title = title;\n}\n\npublic DataModel() {\n\n}\n\n//toString\n@Override\npublic String toString() {\n    return &quot;DataModel{&quot; +\n            &quot;id=&quot; + id +\n            &quot;, title='&quot; + title + '\\'' +\n            '}';\n}\n\n//Getters and Setters\npublic int getId() {\n    return id;\n}\n\npublic void setId(int id) {\n    this.id = id;\n}\n\npublic String getTitle() {\n    return title;\n}\n\npublic void setTitle(String title) {\n    this.title = title;\n}\n</code></pre>\n<p>}</p>\n<p>DataAdapter</p>\n<pre><code>public class DataAdapter extends ArrayAdapter&lt;DataModel&gt; {\n\n/**\n * Attributes\n */\nprivate Context mContext;\nprivate int mResource;\nprivate ArrayList&lt;DataModel&gt; mList;\nprivate DataBaseHelper mDbHelper;\n\n\npublic DataAdapter(Context context, int resource, ArrayList&lt;DataModel&gt; list, DataBaseHelper dbHelper) {\n    super(context, resource, list);\n    mContext = context;\n    mResource = resource;\n    mList = list;\n    mDbHelper = dbHelper;\n}\n\npublic View getView(int position, @Nullable View convertView, @NonNull ViewGroup parent) {\n    //get the objects information\n    String title = getItem(position).getTitle();\n\n    //create object with the information\n    DataModel model = new DataModel(title);\n\n    LayoutInflater inflater = LayoutInflater.from(mContext);\n    convertView = inflater.inflate(mResource, parent, false);\n\n    //get TextViews\n    TextView tvTitle = (TextView) convertView.findViewById(R.id.task);\n\n    //set information to TextViews\n    tvTitle.setText(title);\n\n    //delete function\n    ImageView delView = (ImageView) convertView.findViewById(R.id.delView);\n    delView.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n            mDbHelper.deleteOne(model);\n        }\n    });\n    return convertView;\n}\n</code></pre>\n<p>}</p>\n<p>DataBaseHelper</p>\n<pre><code>public class DataBaseHelper extends SQLiteOpenHelper {\n\npublic static final String TODO_TABLE = &quot;TODO_TABLE&quot;;\npublic static final String COLUMN_ID = &quot;ID&quot;;\npublic static final String COLUMN_TODO_TITLE = &quot;TODO_TITLE&quot;;\nprivate Context mContext;\n\npublic DataBaseHelper(@Nullable Context context) {\n    super(context, &quot;todo.db&quot;, null, 1);\n    mContext = context;\n}\n\n/**\n * Is called when the app requests or inputs new data.\n *\n * @param db\n */\n@Override\npublic void onCreate(SQLiteDatabase db) {\n\n    String createTableStatement = &quot;CREATE TABLE &quot; + TODO_TABLE\n            + &quot; (&quot; + COLUMN_ID + &quot; INTEGER PRIMARY KEY AUTOINCREMENT,&quot;\n            + COLUMN_TODO_TITLE + &quot; TEXT)&quot;;\n\n    db.execSQL(createTableStatement);\n    //create new Table\n}\n\n/**\n * Called whenever the database version number changes.\n * Prevents the previous apps from crashing.\n *\n * @param sqLiteDatabase\n * @param i\n * @param i1\n */\n@Override\npublic void onUpgrade(SQLiteDatabase sqLiteDatabase, int i, int i1) {\n\n}\n\n/**\n * method to add new database entry\n *\n * @param dModel\n * @return\n */\npublic boolean addOne(DataModel dModel) {\n    SQLiteDatabase db = this.getWritableDatabase(); //for insert actions\n    ContentValues cv = new ContentValues(); //Content values stores data in pairs\n\n    cv.put(COLUMN_TODO_TITLE, dModel.getTitle());\n\n    long insert = db.insert(TODO_TABLE, null, cv);\n\n    //clean up, close connection to database and cursor\n    db.close();\n    if(insert == -1) { //if insert is negative number than insert went wrong\n        return false;\n    } else { //if insert is positive number than insert succeeded\n        return true;\n    }\n}\n\npublic boolean deleteOne(DataModel dModel) {\n    //if DataModel is found in the database, delete it and return true\n    //if it is not found, return false\n    SQLiteDatabase db = this.getWritableDatabase();\n\n    String queryString = &quot;DELETE FROM &quot; + TODO_TABLE\n            + &quot; WHERE &quot; + COLUMN_TODO_TITLE + &quot; = &quot; + &quot;\\&quot;&quot; + dModel.getTitle() + &quot;\\&quot;&quot;;;\n\n    Cursor cursor = db.rawQuery(queryString, null);\n\n    if(cursor.moveToFirst()) {\n        return true;\n    } else {\n        return false;\n    }\n}\n\npublic ArrayList&lt;DataModel&gt; getAllAsList() {\n    //create empty list\n    ArrayList&lt;DataModel&gt; returnList = new ArrayList&lt;&gt;();\n    //get data from the database\n    String queryString = &quot;SELECT * FROM &quot; + TODO_TABLE;\n    SQLiteDatabase db = this.getReadableDatabase(); //get data from database\n    Cursor cursor = db.rawQuery(queryString, null);\n\n    if(cursor.moveToFirst()) { //returns a true if there were items selected\n        //loop through results, create new todo objects, put them into return list\n        do {\n            String todoTitle = cursor.getString(1);\n\n            DataModel newTodo = new DataModel(todoTitle);\n            returnList.add(newTodo);\n\n        } while(cursor.moveToNext());\n    } else { //returns a false if no items were selected\n        //failure, to not add anything to the list\n    }\n\n    //clean up, close connection to database and cursor\n    cursor.close();\n    db.close();\n\n    return returnList;\n}\n\npublic boolean existsInDB(DataModel dModel) {\n    SQLiteDatabase db = this.getWritableDatabase(); //for insert actions\n    String queryString = &quot;SELECT * FROM &quot; + TODO_TABLE\n            + &quot; WHERE &quot; + COLUMN_TODO_TITLE + &quot; = &quot; + &quot;\\&quot;&quot; + dModel.getTitle() + &quot;\\&quot;&quot;;\n\n    Cursor cursor = db.rawQuery(queryString, null);\n\n    if(cursor.moveToFirst()) {\n        return true;\n    } else {\n        return false;\n    }\n}\n</code></pre>\n<p>}</p>\n<p>I appreciate any kind of help or suggestion.\nLet me know, if you need further explanation.</p>\n<p>Nicole</p>\n"},{"tags":["java","android","mediarecorder","capacitor","android-video-record"],"comments":[{"owner":{"account_id":1423945,"reputation":11930,"user_id":1347953,"accept_rate":64,"display_name":"S&#233;bastien"},"score":1,"creation_date":1590765382,"post_id":62084767,"comment_id":109813898,"body_markdown":"I ran your project on a OnePlus 6 Android phone and did not get the &quot;prepare failed&quot; error. I see video and i can click record and then stop. The app did not crash.","body":"I ran your project on a OnePlus 6 Android phone and did not get the &quot;prepare failed&quot; error. I see video and i can click record and then stop. The app did not crash."},{"owner":{"account_id":448899,"reputation":496,"user_id":843373,"accept_rate":60,"display_name":"Mikel"},"score":0,"creation_date":1590809492,"post_id":62084767,"comment_id":109828436,"body_markdown":"Interesting! @S&#233;bastien Do you know what version of Android you&#39;re running? I&#39;ve tried on various devices and Android versions with the same crash.","body":"Interesting! @S&#233;bastien Do you know what version of Android you&#39;re running? I&#39;ve tried on various devices and Android versions with the same crash."},{"owner":{"account_id":1423945,"reputation":11930,"user_id":1347953,"accept_rate":64,"display_name":"S&#233;bastien"},"score":1,"creation_date":1590833958,"post_id":62084767,"comment_id":109834360,"body_markdown":"The OnePlus 6 phone is running Android 10. However I just tried running your app on a cheap BlackView A60 running Android Go and I did get the &quot;prepare failed&quot; error.","body":"The OnePlus 6 phone is running Android 10. However I just tried running your app on a cheap BlackView A60 running Android Go and I did get the &quot;prepare failed&quot; error."},{"owner":{"account_id":448899,"reputation":496,"user_id":843373,"accept_rate":60,"display_name":"Mikel"},"score":0,"creation_date":1590914287,"post_id":62084767,"comment_id":109856213,"body_markdown":"I appreciate you taking the time to try it on multiple devices. I don&#39;t suppose you have any idea what the root cause could be @S&#233;bastien?","body":"I appreciate you taking the time to try it on multiple devices. I don&#39;t suppose you have any idea what the root cause could be @S&#233;bastien?"},{"owner":{"account_id":1423945,"reputation":11930,"user_id":1347953,"accept_rate":64,"display_name":"S&#233;bastien"},"score":0,"creation_date":1590916379,"post_id":62084767,"comment_id":109856782,"body_markdown":"Sadly, no idea. Have you looked at this answer : https://stackoverflow.com/questions/14640734/mediarecorder-ioexception-prepare-failed ?","body":"Sadly, no idea. Have you looked at this answer : <a href=\"https://stackoverflow.com/questions/14640734/mediarecorder-ioexception-prepare-failed\" title=\"mediarecorder ioexception prepare failed\">stackoverflow.com/questions/14640734/&hellip;</a> ?"},{"owner":{"account_id":448899,"reputation":496,"user_id":843373,"accept_rate":60,"display_name":"Mikel"},"score":0,"creation_date":1590987363,"post_id":62084767,"comment_id":109877177,"body_markdown":"Yes, I tried all of the proposed solutions to that question without any luck.","body":"Yes, I tried all of the proposed solutions to that question without any luck."}],"answers":[{"tags":[],"owner":{"account_id":1003933,"reputation":3792,"user_id":1018154,"display_name":"CodeToLife"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1655073011,"creation_date":1655073011,"answer_id":72596325,"question_id":62084767,"body_markdown":"\r\n**June, 2022**\r\n\r\nThe mistake in my case was very simple. Some phones have Camera resolution as screen size by default but others dont. That is why on many devices it throws `prepare failed: -2147483648`\r\nThat MediaRecorder in depth is that camera itself. Thus you need to pass allowed size . Obviously at best the maximum (to `mMediaRecorder.setVideoSize()` )\r\n\r\n    CameraPropeties props_ = new CameraPropeties(this);\r\n    int width_= = props_.getWidth();\r\n    int height_ = props_.getHeight();\r\n    ...\r\n    mMediaRecorder.setVideoSize(width_,height_)\r\n    ...\r\n\r\nand CameraPropeties class:\r\n\r\n    package &lt;my.package&gt;;\r\n    import android.content.Context;\r\n    import android.content.res.Configuration;\r\n    import android.media.CamcorderProfile;\r\n    import android.os.Build;\r\n    import android.util.DisplayMetrics;\r\n    import android.util.Log;\r\n    import android.view.WindowManager;\r\n    import androidx.annotation.RequiresApi;\r\n    import static android.content.Context.WINDOW_SERVICE;\r\n    import static android.content.res.Configuration.ORIENTATION_LANDSCAPE;\r\n\r\n    public class CameraPropeties {\r\n      private int _width;\r\n      private int _hight;\r\n      @RequiresApi(api = Build.VERSION_CODES.LOLLIPOP)\r\n      private void _getSupportedSizes() {\r\n        CameraInfo recordingInfo = _getRecordingInfo();\r\n        _width = recordingInfo.width;\r\n        _hight = recordingInfo.height;\r\n        Log.e(&quot;MaxSupportedSizes --&quot;, &quot;WIDTH = &quot; + recordingInfo.width + &quot; HEIGHT = &quot; + recordingInfo.height);\r\n    }\r\n\r\n    private CameraInfo _getRecordingInfo() {\r\n        DisplayMetrics displayMetrics = new DisplayMetrics();\r\n        WindowManager wm = (WindowManager) _context.getSystemService(WINDOW_SERVICE);\r\n        wm.getDefaultDisplay().getRealMetrics(displayMetrics);\r\n        int displayWidth = displayMetrics.widthPixels;\r\n        int displayHeight = displayMetrics.heightPixels;\r\n        int displayDensity = displayMetrics.densityDpi;\r\n\r\n        Configuration configuration = _context.getResources().getConfiguration();\r\n        boolean isLandscape = configuration.orientation == ORIENTATION_LANDSCAPE;\r\n\r\n        CamcorderProfile camcorderProfile = CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH);\r\n        int cameraWidth = camcorderProfile != null ? camcorderProfile.videoFrameWidth : -1;\r\n        int cameraHeight = camcorderProfile != null ? camcorderProfile.videoFrameHeight : -1;\r\n        int cameraFrameRate = camcorderProfile != null ? camcorderProfile.videoFrameRate : 30;\r\n        return calculateCameraInfo(displayWidth, displayHeight, displayDensity, isLandscape,\r\n                cameraWidth, cameraHeight, cameraFrameRate, 100);\r\n    }\r\n    private Context _context;\r\n    public CameraPropeties(Context c) {\r\n        _context = c;\r\n        _getSupportedSizes();\r\n    }\r\n    public int getWidth() {\r\n        return _width;\r\n    }\r\n    public int getHeight() {\r\n        return _hight;\r\n    }\r\n    static final class CameraInfo {\r\n        final int width;\r\n        final int height;\r\n        final int frameRate;\r\n        final int density;\r\n        CameraInfo(int width$, int height$, int frameRate$, int density$) {\r\n            this.width = width$;\r\n            this.height = height$;\r\n            this.frameRate = frameRate$;\r\n            this.density = density$;\r\n        }\r\n    }\r\n\r\n    static CameraInfo calculateCameraInfo(int displayWidth$, int displayHeight$, int displayDensity$, \r\n        boolean isLandscapeDevice$, int cameraWidth$, int cameraHeight$, int cameraFrameRate$,\r\n                                          int sizePercentage$) {\r\n        // Scale the display size before any maximum size calculations.\r\n        displayWidth$ = displayWidth$ * sizePercentage$ / 100;\r\n        displayHeight$ = displayHeight$ * sizePercentage$ / 100;\r\n\r\n        if (cameraWidth$ == -1 &amp;&amp; cameraHeight$ == -1) {\r\n            // No cameras. Fall back to the display size.\r\n            return new CameraInfo(displayWidth$, displayHeight$, cameraFrameRate$, displayDensity$);\r\n        }\r\n\r\n        int frameWidth_ = isLandscapeDevice$ ? cameraWidth$ : cameraHeight$;\r\n        int frameHeight_ = isLandscapeDevice$ ? cameraHeight$ : cameraWidth$;\r\n        if (frameWidth_ &gt;= displayWidth$ &amp;&amp; frameHeight_ &gt;= displayHeight$) {\r\n            // Frame can hold the entire display. Use exact values.\r\n            return new CameraInfo(displayWidth$, displayHeight$, cameraFrameRate$, displayDensity$);\r\n        }\r\n\r\n        // Calculate new width or height to preserve aspect ratio.\r\n        if (isLandscapeDevice$) {\r\n            frameWidth_ = displayWidth$ * frameHeight_ / displayHeight$;\r\n        } else {\r\n            frameHeight_ = displayHeight$ * frameWidth_ / displayWidth$;\r\n        }\r\n        return new CameraInfo(frameWidth_, frameHeight_, cameraFrameRate$, displayDensity$);\r\n    }\r\n}\r\n\r\n","title":"MediaRecorder IOException prepare failed","body":"<p><strong>June, 2022</strong></p>\n<p>The mistake in my case was very simple. Some phones have Camera resolution as screen size by default but others dont. That is why on many devices it throws <code>prepare failed: -2147483648</code>\nThat MediaRecorder in depth is that camera itself. Thus you need to pass allowed size . Obviously at best the maximum (to <code>mMediaRecorder.setVideoSize()</code> )</p>\n<pre><code>CameraPropeties props_ = new CameraPropeties(this);\nint width_= = props_.getWidth();\nint height_ = props_.getHeight();\n...\nmMediaRecorder.setVideoSize(width_,height_)\n...\n</code></pre>\n<p>and CameraPropeties class:</p>\n<pre><code>package &lt;my.package&gt;;\nimport android.content.Context;\nimport android.content.res.Configuration;\nimport android.media.CamcorderProfile;\nimport android.os.Build;\nimport android.util.DisplayMetrics;\nimport android.util.Log;\nimport android.view.WindowManager;\nimport androidx.annotation.RequiresApi;\nimport static android.content.Context.WINDOW_SERVICE;\nimport static android.content.res.Configuration.ORIENTATION_LANDSCAPE;\n\npublic class CameraPropeties {\n  private int _width;\n  private int _hight;\n  @RequiresApi(api = Build.VERSION_CODES.LOLLIPOP)\n  private void _getSupportedSizes() {\n    CameraInfo recordingInfo = _getRecordingInfo();\n    _width = recordingInfo.width;\n    _hight = recordingInfo.height;\n    Log.e(&quot;MaxSupportedSizes --&quot;, &quot;WIDTH = &quot; + recordingInfo.width + &quot; HEIGHT = &quot; + recordingInfo.height);\n}\n\nprivate CameraInfo _getRecordingInfo() {\n    DisplayMetrics displayMetrics = new DisplayMetrics();\n    WindowManager wm = (WindowManager) _context.getSystemService(WINDOW_SERVICE);\n    wm.getDefaultDisplay().getRealMetrics(displayMetrics);\n    int displayWidth = displayMetrics.widthPixels;\n    int displayHeight = displayMetrics.heightPixels;\n    int displayDensity = displayMetrics.densityDpi;\n\n    Configuration configuration = _context.getResources().getConfiguration();\n    boolean isLandscape = configuration.orientation == ORIENTATION_LANDSCAPE;\n\n    CamcorderProfile camcorderProfile = CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH);\n    int cameraWidth = camcorderProfile != null ? camcorderProfile.videoFrameWidth : -1;\n    int cameraHeight = camcorderProfile != null ? camcorderProfile.videoFrameHeight : -1;\n    int cameraFrameRate = camcorderProfile != null ? camcorderProfile.videoFrameRate : 30;\n    return calculateCameraInfo(displayWidth, displayHeight, displayDensity, isLandscape,\n            cameraWidth, cameraHeight, cameraFrameRate, 100);\n}\nprivate Context _context;\npublic CameraPropeties(Context c) {\n    _context = c;\n    _getSupportedSizes();\n}\npublic int getWidth() {\n    return _width;\n}\npublic int getHeight() {\n    return _hight;\n}\nstatic final class CameraInfo {\n    final int width;\n    final int height;\n    final int frameRate;\n    final int density;\n    CameraInfo(int width$, int height$, int frameRate$, int density$) {\n        this.width = width$;\n        this.height = height$;\n        this.frameRate = frameRate$;\n        this.density = density$;\n    }\n}\n\nstatic CameraInfo calculateCameraInfo(int displayWidth$, int displayHeight$, int displayDensity$, \n    boolean isLandscapeDevice$, int cameraWidth$, int cameraHeight$, int cameraFrameRate$,\n                                      int sizePercentage$) {\n    // Scale the display size before any maximum size calculations.\n    displayWidth$ = displayWidth$ * sizePercentage$ / 100;\n    displayHeight$ = displayHeight$ * sizePercentage$ / 100;\n\n    if (cameraWidth$ == -1 &amp;&amp; cameraHeight$ == -1) {\n        // No cameras. Fall back to the display size.\n        return new CameraInfo(displayWidth$, displayHeight$, cameraFrameRate$, displayDensity$);\n    }\n\n    int frameWidth_ = isLandscapeDevice$ ? cameraWidth$ : cameraHeight$;\n    int frameHeight_ = isLandscapeDevice$ ? cameraHeight$ : cameraWidth$;\n    if (frameWidth_ &gt;= displayWidth$ &amp;&amp; frameHeight_ &gt;= displayHeight$) {\n        // Frame can hold the entire display. Use exact values.\n        return new CameraInfo(displayWidth$, displayHeight$, cameraFrameRate$, displayDensity$);\n    }\n\n    // Calculate new width or height to preserve aspect ratio.\n    if (isLandscapeDevice$) {\n        frameWidth_ = displayWidth$ * frameHeight_ / displayHeight$;\n    } else {\n        frameHeight_ = displayHeight$ * frameWidth_ / displayWidth$;\n    }\n    return new CameraInfo(frameWidth_, frameHeight_, cameraFrameRate$, displayDensity$);\n}\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":448899,"reputation":496,"user_id":843373,"accept_rate":60,"display_name":"Mikel"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":944,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1655073011,"creation_date":1590751269,"question_id":62084767,"body_markdown":"This IOException started happening in my Android app after upgrading to AndroidX and increasing the target SDK to version 28.\r\n\r\nPrevious to this, the same code was working fine.\r\n\r\nIt is a [Capacitor][1] app, and uses the [capacitor-video-recorder][2] plugin. Under the hood, this plugin uses the [fancycamera][3] java library which interacts with `android.media.MediaRecorder`.\r\n\r\nHere is the stack trace, which is thrown when calling `VideoRecorder.startRecording`, eventually leading to the call to MediaRecorder.prepare:\r\n\r\n```\r\nI/IMediaRecorder: prepare (BpMediaRecorder client) in file frameworks/av/media/libmedia/IMediaRecorder.cpp, function prepare, line 253\r\nE/MediaRecorder: prepare failed: -2147483648\r\nW/System.err: java.io.IOException: prepare failed.\r\nW/System.err:     at android.media.MediaRecorder._prepare(Native Method)\r\nW/System.err:     at android.media.MediaRecorder.prepare(MediaRecorder.java:1038)\r\nW/System.err:     at co.fitcom.fancycamera.Camera2.setUpMediaRecorder(Camera2.java:607)\r\nW/System.err:     at co.fitcom.fancycamera.Camera2.startRecording(Camera2.java:837)\r\nW/System.err:     at co.fitcom.fancycamera.FancyCamera.startRecording(FancyCamera.java:323)\r\nW/System.err:     at com.github.sbannigan.capacitor.VideoRecorder.startRecording(VideoRecorder.java:267)\r\nW/System.err:     at java.lang.reflect.Method.invoke(Native Method)\r\nW/System.err:     at com.getcapacitor.PluginHandle.invoke(PluginHandle.java:99)\r\nW/System.err:     at com.getcapacitor.Bridge$1.run(Bridge.java:515)\r\nW/System.err:     at android.os.Handler.handleCallback(Handler.java:907)\r\nW/System.err:     at android.os.Handler.dispatchMessage(Handler.java:105)\r\nW/System.err:     at android.os.Looper.loop(Looper.java:216)\r\nW/System.err:     at android.os.HandlerThread.run(HandlerThread.java:65)\r\n```\r\n\r\nThe Android app is requesting CAMERA and RECORD_AUDIO permissions, and I can confirm that the user is prompted for these first.\r\n\r\n**AndroidManifest.xml**\r\n```xml\r\n    &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot;/&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.CAMERA&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.RECORD_AUDIO&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.MODIFY_AUDIO_SETTINGS&quot;/&gt;\r\n```\r\n\r\nI can also see that an output file is created in the app&#39;s data directory. However the file remains empty. I&#39;ve also manually tried writing to the same file and it is possible, so file IO does not appear to be the problem.\r\n\r\nThe crash is coming from a Native Method, so the debugger isn&#39;t very helpful. However I can at least confirm that MediaRecorder&#39;s `mPath` variable appears to be set correctly just before the call to `_prepare`.\r\n\r\nI have created an example app with an identical stack, where it&#39;s possible to recreate the error: https://github.com/disbelief/video-recorder-test\r\n\r\nI&#39;d also be interested to hear what other possible reasons there might be for `MediaRecorder.prepare` to throw this exception.\r\n\r\n\r\n  [1]: https://capacitor.ionicframework.com/docs/\r\n  [2]: https://github.com/TeamHive/capacitor-video-recorder\r\n  [3]: https://github.com/triniwiz/fancycamera","title":"MediaRecorder IOException prepare failed","body":"<p>This IOException started happening in my Android app after upgrading to AndroidX and increasing the target SDK to version 28.</p>\n\n<p>Previous to this, the same code was working fine.</p>\n\n<p>It is a <a href=\"https://capacitor.ionicframework.com/docs/\" rel=\"nofollow noreferrer\">Capacitor</a> app, and uses the <a href=\"https://github.com/TeamHive/capacitor-video-recorder\" rel=\"nofollow noreferrer\">capacitor-video-recorder</a> plugin. Under the hood, this plugin uses the <a href=\"https://github.com/triniwiz/fancycamera\" rel=\"nofollow noreferrer\">fancycamera</a> java library which interacts with <code>android.media.MediaRecorder</code>.</p>\n\n<p>Here is the stack trace, which is thrown when calling <code>VideoRecorder.startRecording</code>, eventually leading to the call to MediaRecorder.prepare:</p>\n\n<pre><code>I/IMediaRecorder: prepare (BpMediaRecorder client) in file frameworks/av/media/libmedia/IMediaRecorder.cpp, function prepare, line 253\nE/MediaRecorder: prepare failed: -2147483648\nW/System.err: java.io.IOException: prepare failed.\nW/System.err:     at android.media.MediaRecorder._prepare(Native Method)\nW/System.err:     at android.media.MediaRecorder.prepare(MediaRecorder.java:1038)\nW/System.err:     at co.fitcom.fancycamera.Camera2.setUpMediaRecorder(Camera2.java:607)\nW/System.err:     at co.fitcom.fancycamera.Camera2.startRecording(Camera2.java:837)\nW/System.err:     at co.fitcom.fancycamera.FancyCamera.startRecording(FancyCamera.java:323)\nW/System.err:     at com.github.sbannigan.capacitor.VideoRecorder.startRecording(VideoRecorder.java:267)\nW/System.err:     at java.lang.reflect.Method.invoke(Native Method)\nW/System.err:     at com.getcapacitor.PluginHandle.invoke(PluginHandle.java:99)\nW/System.err:     at com.getcapacitor.Bridge$1.run(Bridge.java:515)\nW/System.err:     at android.os.Handler.handleCallback(Handler.java:907)\nW/System.err:     at android.os.Handler.dispatchMessage(Handler.java:105)\nW/System.err:     at android.os.Looper.loop(Looper.java:216)\nW/System.err:     at android.os.HandlerThread.run(HandlerThread.java:65)\n</code></pre>\n\n<p>The Android app is requesting CAMERA and RECORD_AUDIO permissions, and I can confirm that the user is prompted for these first.</p>\n\n<p><strong>AndroidManifest.xml</strong></p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\"/&gt;\n    &lt;uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" /&gt;\n    &lt;uses-permission android:name=\"android.permission.CAMERA\" /&gt;\n    &lt;uses-permission android:name=\"android.permission.RECORD_AUDIO\" /&gt;\n    &lt;uses-permission android:name=\"android.permission.MODIFY_AUDIO_SETTINGS\"/&gt;\n</code></pre>\n\n<p>I can also see that an output file is created in the app's data directory. However the file remains empty. I've also manually tried writing to the same file and it is possible, so file IO does not appear to be the problem.</p>\n\n<p>The crash is coming from a Native Method, so the debugger isn't very helpful. However I can at least confirm that MediaRecorder's <code>mPath</code> variable appears to be set correctly just before the call to <code>_prepare</code>.</p>\n\n<p>I have created an example app with an identical stack, where it's possible to recreate the error: <a href=\"https://github.com/disbelief/video-recorder-test\" rel=\"nofollow noreferrer\">https://github.com/disbelief/video-recorder-test</a></p>\n\n<p>I'd also be interested to hear what other possible reasons there might be for <code>MediaRecorder.prepare</code> to throw this exception.</p>\n"},{"tags":["java","android","uri","query-string"],"comments":[{"owner":{"account_id":39846,"reputation":991143,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1655068642,"post_id":72595811,"comment_id":128236992,"body_markdown":"Are you sure that is a valid URL? https://stackoverflow.com/q/11490326/115145 https://stackoverflow.com/a/20422756/115145","body":"Are you sure that is a valid URL? <a href=\"https://stackoverflow.com/q/11490326/115145\">stackoverflow.com/q/11490326/115145</a> <a href=\"https://stackoverflow.com/a/20422756/115145\">stackoverflow.com/a/20422756/115145</a>"},{"owner":{"account_id":6386614,"reputation":1161,"user_id":4954322,"accept_rate":90,"display_name":"Harry"},"score":0,"creation_date":1655072543,"post_id":72595811,"comment_id":128237524,"body_markdown":"@CommonsWare As per the links that you provided, it seems like it is not. That query parameter should be encoded in the URL. If you can convert your comment to an answer, I&#39;ll mark it as an accepted answer and close this question. Thank you for finding and providing the supporting information.","body":"@CommonsWare As per the links that you provided, it seems like it is not. That query parameter should be encoded in the URL. If you can convert your comment to an answer, I&#39;ll mark it as an accepted answer and close this question. Thank you for finding and providing the supporting information."}],"answers":[{"tags":[],"owner":{"account_id":39846,"reputation":991143,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1655072853,"creation_date":1655072853,"answer_id":72596313,"question_id":72595811,"body_markdown":"I think that Android&#39;s `Uri` implementation is getting confused over those square brackets, as [those appear to be invalid URL syntax](https://stackoverflow.com/questions/11490326/is-array-syntax-using-square-brackets-in-url-query-strings-valid).\r\n\r\nIf you control the Web service, you might reconsider the use of square brackets, as they may cause problems with other clients. Otherwise, you may need to play some icky regex games to replace those square brackets with escaped equivalents or otherwise find ways to sanitize the URL before fully parsing it with `Uri`.","title":"Not able to get query paramter value using android.net.Uri#getQueryParameter","body":"<p>I think that Android's <code>Uri</code> implementation is getting confused over those square brackets, as <a href=\"https://stackoverflow.com/questions/11490326/is-array-syntax-using-square-brackets-in-url-query-strings-valid\">those appear to be invalid URL syntax</a>.</p>\n<p>If you control the Web service, you might reconsider the use of square brackets, as they may cause problems with other clients. Otherwise, you may need to play some icky regex games to replace those square brackets with escaped equivalents or otherwise find ways to sanitize the URL before fully parsing it with <code>Uri</code>.</p>\n"}],"owner":{"account_id":6386614,"reputation":1161,"user_id":4954322,"accept_rate":90,"display_name":"Harry"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":602,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":72596313,"answer_count":1,"score":1,"last_activity_date":1655072853,"creation_date":1655067279,"question_id":72595811,"body_markdown":"I&#39;m trying to parse query parameters from a URL string using [Uri.getQueryParameter(String key)][1] but that method returns `null` for the passed-in key. That URL that I&#39;m using is `/endpoint/path?query1=foo&amp;page[size]=1`. I&#39;m able to successfully get the value for `query1` parameter but not for `page[size]`(the method returns `null` for this key). My code looks like:\r\n\r\n```Kotlin\r\nimport android.net.Uri\r\n\r\nval uri = Uri.parse(&quot;/endpoint/path?query1=foo&amp;page[size]=1&quot;)\r\nval queryParameterNames = uri.getQueryParameterNames()\r\n\r\nprintln(queryParameterNames) // prints [&quot;query1&quot;, &quot;page[size]&quot;]\r\n\r\nval map = mutableMapOf&lt;String, String&gt;()\r\nqueryParameterNames.forEach { name -&gt;\r\n    map[name] = uri.getQueryParameter(name) ?: &quot;&quot;\r\n}\r\n\r\nprintln(map) // prints {query1=foo, page[size]=}\r\n```\r\n\r\nAs seen in the output of the last line, the value of `page[size]` is empty. I suspect it has something to do with `[`, `]` characters in the query parameter name for `page[size]`, with them being url encoded while looking for the value but I&#39;m not sure why this is actually failing. So, I have a couple of questions here:\r\n1. Why is it successful in finding the names for the query parameters but fails when finding their corresponding values?\r\n2. How can I get the value of `page[size]` parameter from the url string in Android?\r\n\r\n  [1]: https://developer.android.com/reference/android/net/Uri#getQueryParameter(java.lang.String)","title":"Not able to get query paramter value using android.net.Uri#getQueryParameter","body":"<p>I'm trying to parse query parameters from a URL string using <a href=\"https://developer.android.com/reference/android/net/Uri#getQueryParameter(java.lang.String)\" rel=\"nofollow noreferrer\">Uri.getQueryParameter(String key)</a> but that method returns <code>null</code> for the passed-in key. That URL that I'm using is <code>/endpoint/path?query1=foo&amp;page[size]=1</code>. I'm able to successfully get the value for <code>query1</code> parameter but not for <code>page[size]</code>(the method returns <code>null</code> for this key). My code looks like:</p>\n<pre><code>import android.net.Uri\n\nval uri = Uri.parse(&quot;/endpoint/path?query1=foo&amp;page[size]=1&quot;)\nval queryParameterNames = uri.getQueryParameterNames()\n\nprintln(queryParameterNames) // prints [&quot;query1&quot;, &quot;page[size]&quot;]\n\nval map = mutableMapOf&lt;String, String&gt;()\nqueryParameterNames.forEach { name -&gt;\n    map[name] = uri.getQueryParameter(name) ?: &quot;&quot;\n}\n\nprintln(map) // prints {query1=foo, page[size]=}\n</code></pre>\n<p>As seen in the output of the last line, the value of <code>page[size]</code> is empty. I suspect it has something to do with <code>[</code>, <code>]</code> characters in the query parameter name for <code>page[size]</code>, with them being url encoded while looking for the value but I'm not sure why this is actually failing. So, I have a couple of questions here:</p>\n<ol>\n<li>Why is it successful in finding the names for the query parameters but fails when finding their corresponding values?</li>\n<li>How can I get the value of <code>page[size]</code> parameter from the url string in Android?</li>\n</ol>\n"},{"tags":["java","android","xml","android-studio"],"comments":[{"owner":{"account_id":3212023,"reputation":1016,"user_id":17856705,"display_name":"Computable"},"score":0,"creation_date":1655080120,"post_id":72596256,"comment_id":128238359,"body_markdown":"General sequence should be a) send Intent to `Sheetpage` activity with parameters b) in `Sheetpage` activity do the usual `setContentView` which creates the instance of `MyCanvas` c) `findViewById` to get instance of `MyCanvas` d) set parameters per your custom `MyCanvas` methods _which must invalidate the view_ to cause an `onDraw` presumably with the modified parameters.  Include relevant portion (`onCreate`) of `Sheetpage` and how you are modifying parameters in instance of `MyCanvas`.","body":"General sequence should be a) send Intent to <code>Sheetpage</code> activity with parameters b) in <code>Sheetpage</code> activity do the usual <code>setContentView</code> which creates the instance of <code>MyCanvas</code> c) <code>findViewById</code> to get instance of <code>MyCanvas</code> d) set parameters per your custom <code>MyCanvas</code> methods <i>which must invalidate the view</i> to cause an <code>onDraw</code> presumably with the modified parameters.  Include relevant portion (<code>onCreate</code>) of <code>Sheetpage</code> and how you are modifying parameters in instance of <code>MyCanvas</code>."}],"answers":[{"tags":[],"owner":{"account_id":24598629,"reputation":163,"user_id":18501762,"display_name":"LexFerrinson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655072825,"creation_date":1655072825,"answer_id":72596306,"question_id":72596256,"body_markdown":"I think that you are looking for the concept of intent.\r\n\r\nIntent is an object to pass info between views.\r\n\r\nOn the first view you create an intent object just before creating the second view. There are lot of options for intent, you can pass many types of info. Here is an example from [https://www.javatpoint.com/android-intent-tutorial][1]\r\n\r\n    Intent intent=new Intent(Intent.ACTION_VIEW, Uri.parse(url));  \r\n    startActivity(intent);\r\n\r\nAnd on the other side, where the new activity is created you receive this intent and read it. Here is an example from [https://stackoverflow.com/questions/4233873/how-do-i-get-extra-data-from-intent-on-android][2]\r\n\r\n    String subName = getIntent().getStringExtra(&quot;subjectName&quot;);\r\n    int insId = getIntent().getIntExtra(&quot;instituteId&quot;, 0);\r\n\r\nHope you find it useful.\r\n\r\n  \r\n\r\n\r\n  [1]: https://www.javatpoint.com/android-intent-tutorial\r\n  [2]: https://stackoverflow.com/questions/4233873/how-do-i-get-extra-data-from-intent-on-android","title":"How do I pass non-static variables between unrelated classes in java?","body":"<p>I think that you are looking for the concept of intent.</p>\n<p>Intent is an object to pass info between views.</p>\n<p>On the first view you create an intent object just before creating the second view. There are lot of options for intent, you can pass many types of info. Here is an example from <a href=\"https://www.javatpoint.com/android-intent-tutorial\" rel=\"nofollow noreferrer\">https://www.javatpoint.com/android-intent-tutorial</a></p>\n<pre><code>Intent intent=new Intent(Intent.ACTION_VIEW, Uri.parse(url));  \nstartActivity(intent);\n</code></pre>\n<p>And on the other side, where the new activity is created you receive this intent and read it. Here is an example from <a href=\"https://stackoverflow.com/questions/4233873/how-do-i-get-extra-data-from-intent-on-android\">How do I get extra data from intent on Android?</a></p>\n<pre><code>String subName = getIntent().getStringExtra(&quot;subjectName&quot;);\nint insId = getIntent().getIntExtra(&quot;instituteId&quot;, 0);\n</code></pre>\n<p>Hope you find it useful.</p>\n"}],"owner":{"account_id":25501300,"reputation":1,"user_id":19294489,"display_name":"theMysticMuffin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1655072825,"creation_date":1655072233,"question_id":72596256,"body_markdown":"I am currently working on an android app that has 2 pages, the first page has a slider whose input/value I am unsuccessfully trying to transfer to a canvas on page 2. the general framework of the code in question is as follows:\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n        int sliderVariable = 1;\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            //... SliderVariable updated using slider&#39;s ontouchListener//\r\n        }\r\n    }\r\nThis code works fine, the slidervariables are set properly, my main struggle is finding a way to transfer these variables to the MyCanvas class on the second page. This is how the canvas is set up:\r\n\r\n    public class MyCanvas extends View{\r\n    //how do i get the sliderVariable in here?\r\n        public MyCanvas(Context context, AttributeSet attributeSet){\r\n            super(context,attributeSet);\r\n       }\r\n    }\r\nIt seems like something that should be really simple, but I dont know how to transfer these variables between eachother.\r\n\r\nI have tried to use get and set methods, these havent worked.\r\n\r\nI thought maybe I could use sharedpreference session storage, but since these two classes are unrelated, I am unable to get them to &#39;sync&#39; up (i am relatively new to java so ignore the weird lingo). I feel that this option had a good possibility of working but it just isnt. I believe one class needs to extend the other? i am not sure.\r\n\r\nThe last thing I tried was using Intent to send variables to MyCanvas, but this doesnt work. The second page is actually called Sheetpage, and MyCanvas is a view which I use in the layout of the Sheetpage, so the intent is directed towards SheetPage. I have also tried having MyCanvas being the &#39;receiver&#39; of the intent but I get an error saying `MyCanvas must extend android.app.Activity`. Considering MyCanvas already extends view, I cannot have it also extend activity. \r\n\r\nAre there any other ways to transfer these variables that I am missing? In the full app I have 3 sliders which only end up needing to transfer 3 two digit numbers, so if there are other ways that are usually frowned upon for being slow or resource intensive, that is not a problem here. thanks for reading and hopefully you can offer me some insight to this problem.\r\n\r\n\r\n ","title":"How do I pass non-static variables between unrelated classes in java?","body":"<p>I am currently working on an android app that has 2 pages, the first page has a slider whose input/value I am unsuccessfully trying to transfer to a canvas on page 2. the general framework of the code in question is as follows:</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n    int sliderVariable = 1;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        //... SliderVariable updated using slider's ontouchListener//\n    }\n}\n</code></pre>\n<p>This code works fine, the slidervariables are set properly, my main struggle is finding a way to transfer these variables to the MyCanvas class on the second page. This is how the canvas is set up:</p>\n<pre><code>public class MyCanvas extends View{\n//how do i get the sliderVariable in here?\n    public MyCanvas(Context context, AttributeSet attributeSet){\n        super(context,attributeSet);\n   }\n}\n</code></pre>\n<p>It seems like something that should be really simple, but I dont know how to transfer these variables between eachother.</p>\n<p>I have tried to use get and set methods, these havent worked.</p>\n<p>I thought maybe I could use sharedpreference session storage, but since these two classes are unrelated, I am unable to get them to 'sync' up (i am relatively new to java so ignore the weird lingo). I feel that this option had a good possibility of working but it just isnt. I believe one class needs to extend the other? i am not sure.</p>\n<p>The last thing I tried was using Intent to send variables to MyCanvas, but this doesnt work. The second page is actually called Sheetpage, and MyCanvas is a view which I use in the layout of the Sheetpage, so the intent is directed towards SheetPage. I have also tried having MyCanvas being the 'receiver' of the intent but I get an error saying <code>MyCanvas must extend android.app.Activity</code>. Considering MyCanvas already extends view, I cannot have it also extend activity.</p>\n<p>Are there any other ways to transfer these variables that I am missing? In the full app I have 3 sliders which only end up needing to transfer 3 two digit numbers, so if there are other ways that are usually frowned upon for being slow or resource intensive, that is not a problem here. thanks for reading and hopefully you can offer me some insight to this problem.</p>\n"},{"tags":["java","dictionary","generics","bounded-wildcard"],"comments":[{"owner":{"account_id":10777133,"reputation":7282,"user_id":7928721,"display_name":"samabcde"},"score":2,"creation_date":1655046718,"post_id":72593183,"comment_id":128232498,"body_markdown":"Any reason you use `Map&lt;Integer, ? extends Collection&lt;Integer&gt;&gt;` but not `Map&lt;Integer, Collection&lt;Integer&gt;&gt;`?","body":"Any reason you use <code>Map&lt;Integer, ? extends Collection&lt;Integer&gt;&gt;</code> but not <code>Map&lt;Integer, Collection&lt;Integer&gt;&gt;</code>?"},{"owner":{"account_id":18849596,"reputation":63,"user_id":13749065,"display_name":"Viktor Klyestov"},"score":0,"creation_date":1655054100,"post_id":72593183,"comment_id":128234164,"body_markdown":"@samabcde you can not assign Map&lt;Integer, Set&lt;Integer&gt;&gt; or Map&lt;Integer, List&lt;Integer&gt;&gt; to a Map&lt;Integer, Collection&lt;Integer&gt;&gt; variable or return it from method","body":"@samabcde you can not assign Map&lt;Integer, Set&lt;Integer&gt;&gt; or Map&lt;Integer, List&lt;Integer&gt;&gt; to a Map&lt;Integer, Collection&lt;Integer&gt;&gt; variable or return it from method"}],"answers":[{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1655071895,"creation_date":1655047729,"answer_id":72593579,"question_id":72593183,"body_markdown":"It&#39;s a very vied case - in short, you can&#39;t make `getOrDefalt()` working with an upper bounded *Value*.\r\n\r\n```\r\ndefault V getOrDefault(Object key, V defaultValue)\r\n```\r\n\r\nAs the second argument, `getOrDefalt()` expects an instance of type `V`. That means that the argument should match exactly the type of the *Value* how it was declared, and in this case it&#39;s `? extends Collection&lt;Integer&gt;`.\r\n\r\nWe can not perform type casting using wild cards. This code will be syntactically **invalid**:\r\n```\r\nCollection&lt;Integer&gt; value = \r\n    m.getOrDefault(1, (? extends Collection&lt;Integer&gt;) Collections.emptyList()); // will not compile\r\n```\r\n\r\nThere&#39;s no way to provide the default value of the type that&#39;s required.\r\n","title":"Upper bounded wildcard as a Map Value - how to provide a default Value with getOrDefault()","body":"<p>It's a very vied case - in short, you can't make <code>getOrDefalt()</code> working with an upper bounded <em>Value</em>.</p>\n<pre><code>default V getOrDefault(Object key, V defaultValue)\n</code></pre>\n<p>As the second argument, <code>getOrDefalt()</code> expects an instance of type <code>V</code>. That means that the argument should match exactly the type of the <em>Value</em> how it was declared, and in this case it's <code>? extends Collection&lt;Integer&gt;</code>.</p>\n<p>We can not perform type casting using wild cards. This code will be syntactically <strong>invalid</strong>:</p>\n<pre><code>Collection&lt;Integer&gt; value = \n    m.getOrDefault(1, (? extends Collection&lt;Integer&gt;) Collections.emptyList()); // will not compile\n</code></pre>\n<p>There's no way to provide the default value of the type that's required.</p>\n"},{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1655048827,"creation_date":1655048827,"answer_id":72593697,"question_id":72593183,"body_markdown":"The short of it: You __cannot__ use `getOrDefault`, _at all_, with any map whose &#39;V&#39; is declared to be `?` or `? extends Anything`. There is no fixing this short of cloning the JDK sources or making a utility method with your own take on `getOrDefault`.\r\n\r\nA `getOrDefault` implementation is imaginable that would not have this problem. Unfortunately, the OpenJDK sources simply didn&#39;t write it properly, or there is some tradeoff I&#39;m not seeing. Unfortunately, &#39;fixing it&#39; is backwards incompatible, so it&#39;s probably never going to happen; we&#39;re stuck with the broken getOrDefault. Thank you for this question - by thinking about it, it made me realize it is broken. I now feel bad for not having given feedback on amber-dev when feedback was asked :)\r\n\r\nThe explanation for why is a bit detailed and requires good intuition and knowledge about how generics work. Put on your thinking cap and read on if you are intrigued!\r\n\r\n## So, why?\r\n\r\n&gt; ```\r\n&gt; Map&lt;Integer, ? extends Collection&lt;Integer&gt;&gt; map\r\n&gt; ```\r\n\r\nOkay: This means that this `map` variable could point at, for example, a `new HashMap&lt;Integer, List&lt;Integer&gt;&gt;()`. Or, it could point at a `new HashMap&lt;Integer, Set&lt;Integer&gt;&gt;()` or even a `new HashMap&lt;Integer, Collection&lt;Integer&gt;&gt;()`.\r\n\r\n&gt; `map.getOrDefault(....)`\r\n\r\nUhoh. This is not possible. You need to provide a default value, and this default value must &#39;work&#39; __regardless of what the map is actually pointing at__ - it needs to be the same type as the values in this map are. Imagine you have a `Map&lt;Integer, Set&lt;Integer&gt;&gt;` - what would work? Well, `new HashSet&lt;Integer&gt;()` would work. But what would work for __all 3__ (`Set&lt;Integer&gt;`, `List&lt;Integer&gt;`, and `Collection&lt;Integer&gt;`, and of course any other collection type - there are an infinite amount of them)?\r\n\r\nThe answer is __nothing__.\r\n\r\nYou can&#39;t do this. You can&#39;t use `getOrDefault`, at all, here. Well, except if you trivially pass `null`, literally, which is the only value that is &#39;all types&#39;, but then you should just write `.get(k)` instead of `.getOrDefault(k, null)` of course.\r\n\r\n## The fixed version\r\n\r\nThis is the implementation of `getOrDefault`, pasted straight from the OpenJDK sources:\r\n\r\n```java\r\n  default V getOrDefault(Object key, V defaultValue) {\r\n     V v;\r\n     return (((v = get(key)) != null) || containsKey(key))\r\n       ? v\r\n       : defaultValue;\r\n  }\r\n```\r\n\r\nThis fundamentally is never going to work for you - you can have no V if V is `? anything` - that ? means: We _do not know_ what the type is, and there is no typevar that represents it either, so no expression could ever fit. This take on getOrDefault would work fine here:\r\n\r\n```\r\ndefault &lt;Z super V&gt; getOrDefault(Object key, Z defaultValue) {\r\n  Z z;\r\n  return (((z = get(key) != null) || containsKey(key))\r\n    ? z\r\n    : defaultValue;\r\n}\r\n```\r\n\r\nWhat&#39;s happening here is that in this case, whilst the map is perhaps a Set&lt;Integer&gt;, or List&lt;Integer&gt;, etc - you just want it as `Collection&lt;Integer&gt;`, you don&#39;t actually &#39;care&#39;, and you&#39;re fine if the default value is not, in fact, a &#39;V&#39; (If your map is actually a `Map&lt;Integer, List&lt;Integer&gt;&gt;`, you don&#39;t mind if calling getOrDefault ends up giving you an object that is not a `List&lt;Integer&gt;` - `Collections.empty()` would not be).\r\n\r\nThus, we need to establish that there is some new type Z which is a supertype of V (thus guaranteeing that if the key _is_ in the map, you get a V, which is definitely a kind of Z, given that Z is a supertype of V as per declaration), and there is a default value that is also definitely of type Z, thus guaranteeing that in either &#39;branch&#39; (key is found, and key is not found), the returned value is at least Z.\r\n\r\nBut, map does not work that way, and thus you can&#39;t use `.getOrDefault`, at all.\r\n\r\nI don&#39;t think modifying `getOrDefault` at this point would be backwards compatible, so I don&#39;t think there is any point filing a feature request with the openjdk core team: They&#39;ll just reject it, we&#39;re stuck with getOrDefault as written. But, you can make a static utility method if you must have it that does the above. Note that you may want to write it differently - cast to raw, do the work in raw mode, ignore the warnings, and clean up afterwards. In theory some Map implementations could have a different impl of getOrDefault, though I&#39;m having a hard time to imagine what that would look like (unlike, say, `computeIfAbsent` which absolutely has crucial custom implementations, e.g. in ConcurrentHashMap).\r\n","title":"Upper bounded wildcard as a Map Value - how to provide a default Value with getOrDefault()","body":"<p>The short of it: You <strong>cannot</strong> use <code>getOrDefault</code>, <em>at all</em>, with any map whose 'V' is declared to be <code>?</code> or <code>? extends Anything</code>. There is no fixing this short of cloning the JDK sources or making a utility method with your own take on <code>getOrDefault</code>.</p>\n<p>A <code>getOrDefault</code> implementation is imaginable that would not have this problem. Unfortunately, the OpenJDK sources simply didn't write it properly, or there is some tradeoff I'm not seeing. Unfortunately, 'fixing it' is backwards incompatible, so it's probably never going to happen; we're stuck with the broken getOrDefault. Thank you for this question - by thinking about it, it made me realize it is broken. I now feel bad for not having given feedback on amber-dev when feedback was asked :)</p>\n<p>The explanation for why is a bit detailed and requires good intuition and knowledge about how generics work. Put on your thinking cap and read on if you are intrigued!</p>\n<h2>So, why?</h2>\n<blockquote>\n<pre><code>Map&lt;Integer, ? extends Collection&lt;Integer&gt;&gt; map\n</code></pre>\n</blockquote>\n<p>Okay: This means that this <code>map</code> variable could point at, for example, a <code>new HashMap&lt;Integer, List&lt;Integer&gt;&gt;()</code>. Or, it could point at a <code>new HashMap&lt;Integer, Set&lt;Integer&gt;&gt;()</code> or even a <code>new HashMap&lt;Integer, Collection&lt;Integer&gt;&gt;()</code>.</p>\n<blockquote>\n<p><code>map.getOrDefault(....)</code></p>\n</blockquote>\n<p>Uhoh. This is not possible. You need to provide a default value, and this default value must 'work' <strong>regardless of what the map is actually pointing at</strong> - it needs to be the same type as the values in this map are. Imagine you have a <code>Map&lt;Integer, Set&lt;Integer&gt;&gt;</code> - what would work? Well, <code>new HashSet&lt;Integer&gt;()</code> would work. But what would work for <strong>all 3</strong> (<code>Set&lt;Integer&gt;</code>, <code>List&lt;Integer&gt;</code>, and <code>Collection&lt;Integer&gt;</code>, and of course any other collection type - there are an infinite amount of them)?</p>\n<p>The answer is <strong>nothing</strong>.</p>\n<p>You can't do this. You can't use <code>getOrDefault</code>, at all, here. Well, except if you trivially pass <code>null</code>, literally, which is the only value that is 'all types', but then you should just write <code>.get(k)</code> instead of <code>.getOrDefault(k, null)</code> of course.</p>\n<h2>The fixed version</h2>\n<p>This is the implementation of <code>getOrDefault</code>, pasted straight from the OpenJDK sources:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  default V getOrDefault(Object key, V defaultValue) {\n     V v;\n     return (((v = get(key)) != null) || containsKey(key))\n       ? v\n       : defaultValue;\n  }\n</code></pre>\n<p>This fundamentally is never going to work for you - you can have no V if V is <code>? anything</code> - that ? means: We <em>do not know</em> what the type is, and there is no typevar that represents it either, so no expression could ever fit. This take on getOrDefault would work fine here:</p>\n<pre><code>default &lt;Z super V&gt; getOrDefault(Object key, Z defaultValue) {\n  Z z;\n  return (((z = get(key) != null) || containsKey(key))\n    ? z\n    : defaultValue;\n}\n</code></pre>\n<p>What's happening here is that in this case, whilst the map is perhaps a Set, or List, etc - you just want it as <code>Collection&lt;Integer&gt;</code>, you don't actually 'care', and you're fine if the default value is not, in fact, a 'V' (If your map is actually a <code>Map&lt;Integer, List&lt;Integer&gt;&gt;</code>, you don't mind if calling getOrDefault ends up giving you an object that is not a <code>List&lt;Integer&gt;</code> - <code>Collections.empty()</code> would not be).</p>\n<p>Thus, we need to establish that there is some new type Z which is a supertype of V (thus guaranteeing that if the key <em>is</em> in the map, you get a V, which is definitely a kind of Z, given that Z is a supertype of V as per declaration), and there is a default value that is also definitely of type Z, thus guaranteeing that in either 'branch' (key is found, and key is not found), the returned value is at least Z.</p>\n<p>But, map does not work that way, and thus you can't use <code>.getOrDefault</code>, at all.</p>\n<p>I don't think modifying <code>getOrDefault</code> at this point would be backwards compatible, so I don't think there is any point filing a feature request with the openjdk core team: They'll just reject it, we're stuck with getOrDefault as written. But, you can make a static utility method if you must have it that does the above. Note that you may want to write it differently - cast to raw, do the work in raw mode, ignore the warnings, and clean up afterwards. In theory some Map implementations could have a different impl of getOrDefault, though I'm having a hard time to imagine what that would look like (unlike, say, <code>computeIfAbsent</code> which absolutely has crucial custom implementations, e.g. in ConcurrentHashMap).</p>\n"}],"owner":{"account_id":18849596,"reputation":63,"user_id":13749065,"display_name":"Viktor Klyestov"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":115,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":72593697,"answer_count":2,"score":2,"last_activity_date":1655072603,"creation_date":1655044757,"question_id":72593183,"body_markdown":"I have the following map\r\n```\r\nMap&lt;Integer, ? extends Collection&lt;Integer&gt;&gt; map\r\n```\r\nSometimes there is a `List` and sometimes there is a `Set` as a value. Now I&#39;d like to get value, but there is a problem, it does not compile.\r\n```\r\nCollection&lt;Integer&gt; value = map.getOrDefault(1, Collections.emptyList())\r\n```\r\nI know I can do something like this:\r\n```\r\nCollection&lt;Integer&gt; value = map.get(1);\r\nif (value == null) {\r\n     value = Collections.emptyList();\r\n}\r\n```\r\nBut I want to understand how `getOrDefault()` method is supposed to work with wild-card generics.","title":"Upper bounded wildcard as a Map Value - how to provide a default Value with getOrDefault()","body":"<p>I have the following map</p>\n<pre><code>Map&lt;Integer, ? extends Collection&lt;Integer&gt;&gt; map\n</code></pre>\n<p>Sometimes there is a <code>List</code> and sometimes there is a <code>Set</code> as a value. Now I'd like to get value, but there is a problem, it does not compile.</p>\n<pre><code>Collection&lt;Integer&gt; value = map.getOrDefault(1, Collections.emptyList())\n</code></pre>\n<p>I know I can do something like this:</p>\n<pre><code>Collection&lt;Integer&gt; value = map.get(1);\nif (value == null) {\n     value = Collections.emptyList();\n}\n</code></pre>\n<p>But I want to understand how <code>getOrDefault()</code> method is supposed to work with wild-card generics.</p>\n"},{"tags":["javascript","java","multithreading","apache-httpclient-4.x"],"owner":{"account_id":13580905,"reputation":1768,"user_id":9796935,"display_name":"ennth"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3668,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":0,"score":5,"last_activity_date":1655071168,"creation_date":1593936880,"question_id":62738364,"body_markdown":"I am currently learning about Threads in Java. I wanted to know what the standard protocol would be when making Http Requests in Java that would be similar to the code I have below, which uses Javascript Fetch API and asynchronous programming. For example, if I was using the Fetch API in Javascript to _first_ make a **GET** request to grab some data from a REST endpoint that I would later use to make a **POST** request (as seen in the code below), I would need to use a _Callback function_ or _Promise_ (like below) to **wait** until that _first_ request has retrieved its data for the second request to then proceed. Obviously, if I did not use Promises or nest the second Http **POST** in the first Fetch method (**GET**) below, and wrote two separate Fetch API calls (one for **GET**, one for **POST**, sequentially one after other aka top-to-bottom), both calls would &quot;fire-off&quot; simultaneously and the second **POST** request wouldn&#39;t have the data it needs to make a successful **POST**.\r\n\r\n```javascript\r\nconst myHttpGETandPOSTmethod = () =&gt; {\r\n\r\n    // First Http request goes here\r\n\r\n    fetch(&#39;http://example.com/movies.json&#39;, {\r\n            method: &#39;GET&#39;,\r\n            headers: // Some headers here,\r\n        })\r\n        .then(response =&gt; response.json())\r\n        .then(data =&gt; {\r\n                console.log(data))\r\n\r\n            // Nest the second Http request inside here. It only runs after 1st request completes\r\n\r\n            return fetch(&#39;http://example.com/movies.json&#39;, {\r\n                    method: &#39;POST&#39;,\r\n                    headers: // Some headers here,\r\n                        body: JSON.stringify(body);\r\n                })\r\n                .then((response) =&gt; response.json())\r\n                .then((data) =&gt; {\r\n                    console.log(&#39;Success:&#39;, data);\r\n                })\r\n                .catch((error) =&gt; {\r\n                    console.error(&#39;Error:&#39;, error);\r\n                });\r\n        })\r\n}\r\n```\r\n\r\nSo then, if I were using something like the **Apache HttpClient** https://hc.apache.org/httpcomponents-client-4.5.x/quickstart.html library in Java, would the standard procedure be to &quot;spin-up&quot; another Thread (besides the main thread) to execute the **GET** request and then do a **thread.join()** such that after the first thread completes, then the second request can fire-off its own Thread?\r\n\r\nWould I need to use a **Callable** instead of **Runnable** so that I can save the HttpEntity data response of the first **GET** request?\r\n\r\nI guess I&#39;m just trying to understand the best way to implement the scenario I posed above regarding an HTTP GET request that is needed to make a subsequent POST request, while both fires asynchronously such that they do **not** block the main thread.\r\n\r\nYou can make a basic **GET** request using the apache Http Library as such (**POST** is also very similar):\r\n```javascript\r\nCloseableHttpClient httpclient = HttpClients.createDefault();\r\nHttpGet httpGet = new HttpGet(&quot;http://targethost/homepage&quot;);\r\nCloseableHttpResponse response1 = httpclient.execute(httpGet);\r\n\r\ntry {\r\n    System.out.println(response1.getStatusLine());\r\n    HttpEntity entity1 = response1.getEntity();\r\n\r\n    // Save the response body to a string\r\n    String body = EntityUtils.toString(entity1, StandardCharsets.UTF_8);\r\n    System.out.println(body);\r\n\r\n    EntityUtils.consume(entity1);\r\n} finally {\r\n    response1.close();\r\n}\r\n```\r\n\r\nOr am I on the wrong approach here and looking at this incorrectly? I believe the Http library in Apache offers both synchronous and asynchronous Http calls? or should I be using a newer library for Http in Java?","title":"Javascript Fetch API equivalent in Java for Http requests?","body":"<p>I am currently learning about Threads in Java. I wanted to know what the standard protocol would be when making Http Requests in Java that would be similar to the code I have below, which uses Javascript Fetch API and asynchronous programming. For example, if I was using the Fetch API in Javascript to <em>first</em> make a <strong>GET</strong> request to grab some data from a REST endpoint that I would later use to make a <strong>POST</strong> request (as seen in the code below), I would need to use a <em>Callback function</em> or <em>Promise</em> (like below) to <strong>wait</strong> until that <em>first</em> request has retrieved its data for the second request to then proceed. Obviously, if I did not use Promises or nest the second Http <strong>POST</strong> in the first Fetch method (<strong>GET</strong>) below, and wrote two separate Fetch API calls (one for <strong>GET</strong>, one for <strong>POST</strong>, sequentially one after other aka top-to-bottom), both calls would &quot;fire-off&quot; simultaneously and the second <strong>POST</strong> request wouldn't have the data it needs to make a successful <strong>POST</strong>.</p>\n<pre class=\"lang-js prettyprint-override\"><code>const myHttpGETandPOSTmethod = () =&gt; {\n\n    // First Http request goes here\n\n    fetch('http://example.com/movies.json', {\n            method: 'GET',\n            headers: // Some headers here,\n        })\n        .then(response =&gt; response.json())\n        .then(data =&gt; {\n                console.log(data))\n\n            // Nest the second Http request inside here. It only runs after 1st request completes\n\n            return fetch('http://example.com/movies.json', {\n                    method: 'POST',\n                    headers: // Some headers here,\n                        body: JSON.stringify(body);\n                })\n                .then((response) =&gt; response.json())\n                .then((data) =&gt; {\n                    console.log('Success:', data);\n                })\n                .catch((error) =&gt; {\n                    console.error('Error:', error);\n                });\n        })\n}\n</code></pre>\n<p>So then, if I were using something like the <strong>Apache HttpClient</strong> <a href=\"https://hc.apache.org/httpcomponents-client-4.5.x/quickstart.html\" rel=\"noreferrer\">https://hc.apache.org/httpcomponents-client-4.5.x/quickstart.html</a> library in Java, would the standard procedure be to &quot;spin-up&quot; another Thread (besides the main thread) to execute the <strong>GET</strong> request and then do a <strong>thread.join()</strong> such that after the first thread completes, then the second request can fire-off its own Thread?</p>\n<p>Would I need to use a <strong>Callable</strong> instead of <strong>Runnable</strong> so that I can save the HttpEntity data response of the first <strong>GET</strong> request?</p>\n<p>I guess I'm just trying to understand the best way to implement the scenario I posed above regarding an HTTP GET request that is needed to make a subsequent POST request, while both fires asynchronously such that they do <strong>not</strong> block the main thread.</p>\n<p>You can make a basic <strong>GET</strong> request using the apache Http Library as such (<strong>POST</strong> is also very similar):</p>\n<pre class=\"lang-js prettyprint-override\"><code>CloseableHttpClient httpclient = HttpClients.createDefault();\nHttpGet httpGet = new HttpGet(&quot;http://targethost/homepage&quot;);\nCloseableHttpResponse response1 = httpclient.execute(httpGet);\n\ntry {\n    System.out.println(response1.getStatusLine());\n    HttpEntity entity1 = response1.getEntity();\n\n    // Save the response body to a string\n    String body = EntityUtils.toString(entity1, StandardCharsets.UTF_8);\n    System.out.println(body);\n\n    EntityUtils.consume(entity1);\n} finally {\n    response1.close();\n}\n</code></pre>\n<p>Or am I on the wrong approach here and looking at this incorrectly? I believe the Http library in Apache offers both synchronous and asynchronous Http calls? or should I be using a newer library for Http in Java?</p>\n"},{"tags":["java","json","jackson","gson","streaming"],"comments":[{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1655002107,"post_id":72589071,"comment_id":128225537,"body_markdown":"Is there a reason not to just read and discard everything until then?","body":"Is there a reason not to just read and discard everything until then?"},{"owner":{"account_id":13874157,"reputation":584,"user_id":10016327,"display_name":"satyesht"},"score":0,"creation_date":1655003534,"post_id":72589071,"comment_id":128225655,"body_markdown":"https://stackoverflow.com/questions/54817985/how-to-parse-a-huge-json-file-without-loading-it-in-memory\nhave you tried this ?","body":"<a href=\"https://stackoverflow.com/questions/54817985/how-to-parse-a-huge-json-file-without-loading-it-in-memory\" title=\"how to parse a huge json file without loading it in memory\">stackoverflow.com/questions/54817985/&hellip;</a> have you tried this ?"},{"owner":{"account_id":4034876,"reputation":1557,"user_id":3319725,"display_name":"AnatolyG"},"score":0,"creation_date":1655023976,"post_id":72589071,"comment_id":128227928,"body_markdown":"I would prefer to don&#39;t mix streaming and &quot;dom&quot;-like approaches. Streaming means a sequence of events. This means a Finite State Machine; a simplified custom one in our case. You might find these useful https://stackoverflow.com/questions/64422516/how-to-update-json-value-using-java/64424791#64424791 https://stackoverflow.com/questions/61868825/split-a-large-json-file-into-smaller-json-files-using-java/61918904#61918904","body":"I would prefer to don&#39;t mix streaming and &quot;dom&quot;-like approaches. Streaming means a sequence of events. This means a Finite State Machine; a simplified custom one in our case. You might find these useful <a href=\"https://stackoverflow.com/questions/64422516/how-to-update-json-value-using-java/64424791#64424791\" title=\"how to update json value using java\">stackoverflow.com/questions/64422516/&hellip;</a> <a href=\"https://stackoverflow.com/questions/61868825/split-a-large-json-file-into-smaller-json-files-using-java/61918904#61918904\" title=\"split a large json file into smaller json files using java\">stackoverflow.com/questions/61868825/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":5384013,"reputation":6035,"user_id":4288506,"accept_rate":77,"display_name":"Marcono1234"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655070821,"creation_date":1655070821,"answer_id":72596158,"question_id":72589071,"body_markdown":"(The following is for Gson)\r\n\r\nYou would probably have to start with a [`JsonReader`](https://javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/stream/JsonReader.html) to parse the JSON document in a streaming way. You would then first use its `beginObject()` method to enter the top level JSON object. Afterwards in a loop guarded by a `hasNext()` check you would obtain the next member name with `nextName()` and compare it with the desired name. If the name is not the one you are interested in, you can call `skipValue()` to skip its value:\r\n```java\r\nJsonReader jsonReader = new JsonReader(reader);\r\njsonReader.beginObject();\r\n\r\nwhile (jsonReader.hasNext()) {\r\n    String name = jsonReader.nextName();\r\n\r\n    if (name.equals(desiredName)) {\r\n\r\n        ... // extract the data; see next section of this answer\r\n        \r\n        // Alternatively you could also return here already, ignoring the remainder\r\n        // of the JSON data\r\n        \r\n    } else {\r\n        jsonReader.skipValue();\r\n    }\r\n}\r\n\r\njsonReader.endObject();\r\n\r\nif (jsonReader.peek() != JsonToken.END_DOCUMENT) {\r\n    throw new IllegalArgumentException(&quot;Trailing data after JSON value&quot;);\r\n}\r\n```\r\nYou might also want to add checks to verify that the desired member actually exists in the JSON document, and to verify that it only exists exactly once and not multiple times.\r\n\r\nIf you only want to write back a subset of the JSON document without performing any content modifications to it, then you don&#39;t need to parse it into DOM objects. Instead you could directly read from the `JsonReader` and write to a [`JsonWriter`](https://javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/stream/JsonWriter.html):\r\n```java\r\nstatic void transferTo(JsonReader reader, JsonWriter writer) throws IOException {\r\n    NumberHolder numberHolder = new NumberHolder();\r\n    int nestingDepth = 0;\r\n\r\n    while (true) {\r\n        JsonToken token = reader.peek();\r\n        switch (token) {\r\n            case BEGIN_ARRAY:\r\n                reader.beginArray();\r\n                writer.beginArray();\r\n                nestingDepth++;\r\n                break;\r\n            case END_ARRAY:\r\n                reader.endArray();\r\n                writer.endArray();\r\n\r\n                nestingDepth--;\r\n                if (nestingDepth &lt;= 0) {\r\n                    return;\r\n                }\r\n\r\n                break;\r\n            case BEGIN_OBJECT:\r\n                reader.beginObject();\r\n                writer.beginObject();\r\n                nestingDepth++;\r\n                break;\r\n            case NAME:\r\n                writer.name(reader.nextName());\r\n                break;\r\n            case END_OBJECT:\r\n                reader.endObject();\r\n                writer.endObject();\r\n\r\n                nestingDepth--;\r\n                if (nestingDepth &lt;= 0) {\r\n                    return;\r\n                }\r\n\r\n                break;\r\n            case BOOLEAN:\r\n                writer.value(reader.nextBoolean());\r\n                break;\r\n            case NULL:\r\n                reader.nextNull();\r\n                writer.nullValue();\r\n                break;\r\n            case NUMBER:\r\n                // Read the number as string\r\n                String numberAsString = reader.nextString();\r\n\r\n                // Slightly hacky workaround to preserve the original number value\r\n                // without having to parse it (which could lead to precision loss)\r\n                numberHolder.value = numberAsString;\r\n                writer.value(numberHolder);\r\n\r\n                break;\r\n            case STRING:\r\n                writer.value(reader.nextString());\r\n                break;\r\n            case END_DOCUMENT:\r\n                throw new IllegalStateException(&quot;Unexpected end of document&quot;);\r\n            default:\r\n                throw new AssertionError(&quot;Unknown JSON token: &quot; + token);\r\n        }\r\n    }\r\n}\r\n```\r\nYou would call this method at the location marked with &quot;extract the data&quot; in the first code snippet.\r\n\r\nIf instead you do need the relevant JSON document section as DOM, then you can first use [`Gson.getAdapter`](https://javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/Gson.html#getAdapter(java.lang.Class)) to obtain the adapter, for example for your `List&lt;...&gt;` or for [`JsonArray`](https://javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/JsonArray.html) (the generic DOM class; here it is less likely that you risk any precision loss during conversion). And then you can use [`read(JsonReader)`](https://javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/TypeAdapter.html#read(com.google.gson.stream.JsonReader)) of that adapter at the location marked with &quot;extract the data&quot; in the first code snippet.  \r\nIt would not recommend directly using `Gson.fromJson(JsonReader, ...)` because it changes the configuration of the given `JsonReader`; unfortunately this pitfall is not properly documented at the moment ([Gson issue](https://github.com/google/gson/issues/372)).\r\n\r\nNote that both approaches do not preserve the original JSON formatting, but content-wise that should not make a difference.","title":"Parsing JSON with both streaming and DOM access?","body":"<p>(The following is for Gson)</p>\n<p>You would probably have to start with a <a href=\"https://javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/stream/JsonReader.html\" rel=\"nofollow noreferrer\"><code>JsonReader</code></a> to parse the JSON document in a streaming way. You would then first use its <code>beginObject()</code> method to enter the top level JSON object. Afterwards in a loop guarded by a <code>hasNext()</code> check you would obtain the next member name with <code>nextName()</code> and compare it with the desired name. If the name is not the one you are interested in, you can call <code>skipValue()</code> to skip its value:</p>\n<pre class=\"lang-java prettyprint-override\"><code>JsonReader jsonReader = new JsonReader(reader);\njsonReader.beginObject();\n\nwhile (jsonReader.hasNext()) {\n    String name = jsonReader.nextName();\n\n    if (name.equals(desiredName)) {\n\n        ... // extract the data; see next section of this answer\n        \n        // Alternatively you could also return here already, ignoring the remainder\n        // of the JSON data\n        \n    } else {\n        jsonReader.skipValue();\n    }\n}\n\njsonReader.endObject();\n\nif (jsonReader.peek() != JsonToken.END_DOCUMENT) {\n    throw new IllegalArgumentException(&quot;Trailing data after JSON value&quot;);\n}\n</code></pre>\n<p>You might also want to add checks to verify that the desired member actually exists in the JSON document, and to verify that it only exists exactly once and not multiple times.</p>\n<p>If you only want to write back a subset of the JSON document without performing any content modifications to it, then you don't need to parse it into DOM objects. Instead you could directly read from the <code>JsonReader</code> and write to a <a href=\"https://javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/stream/JsonWriter.html\" rel=\"nofollow noreferrer\"><code>JsonWriter</code></a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>static void transferTo(JsonReader reader, JsonWriter writer) throws IOException {\n    NumberHolder numberHolder = new NumberHolder();\n    int nestingDepth = 0;\n\n    while (true) {\n        JsonToken token = reader.peek();\n        switch (token) {\n            case BEGIN_ARRAY:\n                reader.beginArray();\n                writer.beginArray();\n                nestingDepth++;\n                break;\n            case END_ARRAY:\n                reader.endArray();\n                writer.endArray();\n\n                nestingDepth--;\n                if (nestingDepth &lt;= 0) {\n                    return;\n                }\n\n                break;\n            case BEGIN_OBJECT:\n                reader.beginObject();\n                writer.beginObject();\n                nestingDepth++;\n                break;\n            case NAME:\n                writer.name(reader.nextName());\n                break;\n            case END_OBJECT:\n                reader.endObject();\n                writer.endObject();\n\n                nestingDepth--;\n                if (nestingDepth &lt;= 0) {\n                    return;\n                }\n\n                break;\n            case BOOLEAN:\n                writer.value(reader.nextBoolean());\n                break;\n            case NULL:\n                reader.nextNull();\n                writer.nullValue();\n                break;\n            case NUMBER:\n                // Read the number as string\n                String numberAsString = reader.nextString();\n\n                // Slightly hacky workaround to preserve the original number value\n                // without having to parse it (which could lead to precision loss)\n                numberHolder.value = numberAsString;\n                writer.value(numberHolder);\n\n                break;\n            case STRING:\n                writer.value(reader.nextString());\n                break;\n            case END_DOCUMENT:\n                throw new IllegalStateException(&quot;Unexpected end of document&quot;);\n            default:\n                throw new AssertionError(&quot;Unknown JSON token: &quot; + token);\n        }\n    }\n}\n</code></pre>\n<p>You would call this method at the location marked with &quot;extract the data&quot; in the first code snippet.</p>\n<p>If instead you do need the relevant JSON document section as DOM, then you can first use <a href=\"https://javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/Gson.html#getAdapter(java.lang.Class)\" rel=\"nofollow noreferrer\"><code>Gson.getAdapter</code></a> to obtain the adapter, for example for your <code>List&lt;...&gt;</code> or for <a href=\"https://javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/JsonArray.html\" rel=\"nofollow noreferrer\"><code>JsonArray</code></a> (the generic DOM class; here it is less likely that you risk any precision loss during conversion). And then you can use <a href=\"https://javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/TypeAdapter.html#read(com.google.gson.stream.JsonReader)\" rel=\"nofollow noreferrer\"><code>read(JsonReader)</code></a> of that adapter at the location marked with &quot;extract the data&quot; in the first code snippet.<br />\nIt would not recommend directly using <code>Gson.fromJson(JsonReader, ...)</code> because it changes the configuration of the given <code>JsonReader</code>; unfortunately this pitfall is not properly documented at the moment (<a href=\"https://github.com/google/gson/issues/372\" rel=\"nofollow noreferrer\">Gson issue</a>).</p>\n<p>Note that both approaches do not preserve the original JSON formatting, but content-wise that should not make a difference.</p>\n"}],"owner":{"account_id":12406178,"reputation":59,"user_id":9041008,"display_name":"PaulHoran"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":156,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1655070821,"creation_date":1654999847,"question_id":72589071,"body_markdown":"I have a JSON document that looks like this:\r\n[![JSON][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/lkYit.png\r\n\r\nIt&#39;s a collection of arrays - findings, assets, assetGroups, etc. I wrote a function that takes the filename and the requested array name, and returns an ArrayList&lt;&gt; of the array entries as strings (which I re-parse to JSON on the client side).\r\nThis works great when the files are smaller, but this one file is over 1.6GB in size so I blow out memory if I try and instantiate it all as a JSONObject. I want to try Jackson or GSon streaming APIs, but I&#39;m getting wrapped around the axle trying to mix streaming APIs with direct DOM access.  Like, I want to stream the JSON until I reach the &quot;assetGroups&quot; node, then iterate over that array and return the List&lt;&gt; of its contents.\r\nDoes that make sense?  Any help?   ","title":"Parsing JSON with both streaming and DOM access?","body":"<p>I have a JSON document that looks like this:\n<a href=\"https://i.stack.imgur.com/lkYit.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lkYit.png\" alt=\"JSON\" /></a></p>\n<p>It's a collection of arrays - findings, assets, assetGroups, etc. I wrote a function that takes the filename and the requested array name, and returns an ArrayList&lt;&gt; of the array entries as strings (which I re-parse to JSON on the client side).\nThis works great when the files are smaller, but this one file is over 1.6GB in size so I blow out memory if I try and instantiate it all as a JSONObject. I want to try Jackson or GSon streaming APIs, but I'm getting wrapped around the axle trying to mix streaming APIs with direct DOM access.  Like, I want to stream the JSON until I reach the &quot;assetGroups&quot; node, then iterate over that array and return the List&lt;&gt; of its contents.\nDoes that make sense?  Any help?</p>\n"},{"tags":["java","arraylist","tostring"],"comments":[{"owner":{"account_id":6790343,"reputation":1483,"user_id":5227721,"display_name":"Berk Kurkcuoglu"},"score":1,"creation_date":1655070083,"post_id":72596049,"comment_id":128237192,"body_markdown":"You can easily do this by adding an if check for the last element but I would recommend using a stringjoiner instead to avoid the extra condition.https://docs.oracle.com/javase/8/docs/api/java/util/StringJoiner.html","body":"You can easily do this by adding an if check for the last element but I would recommend using a stringjoiner instead to avoid the extra condition.<a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/StringJoiner.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/api/java/util/String&zwnj;&#8203;Joiner.html</a>"},{"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"score":1,"creation_date":1655090434,"post_id":72596049,"comment_id":128239516,"body_markdown":"`for (int i = 0; i &lt; size; i++) { if (!sb.toString().isEmpty()) { sb.append(&quot;, &quot;); } sb.append(store[i].toString()); }`","body":"<code>for (int i = 0; i &lt; size; i++) { if (!sb.toString().isEmpty()) { sb.append(&quot;, &quot;); } sb.append(store[i].toString()); }</code>"}],"answers":[{"tags":[],"owner":{"account_id":24019133,"reputation":556,"user_id":18001693,"display_name":"Arjis Chakraborty"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1655070020,"creation_date":1655070020,"answer_id":72596078,"question_id":72596049,"body_markdown":"Just add an if condition to only add the comma if the index `i` is not equals to the last index accepted by the `for` loop\r\n\r\n```java\r\n@Override\r\n    public String toString() {  \r\n    StringBuilder sb = new StringBuilder();\r\n    if(store == null) {\r\n        return &quot;[]&quot;;\r\n    } else {\r\n\r\n    for (int i = 0; i &lt; size; i++) {\r\n        sb.append(store[i].toString());\r\n        if(i != size - 1) sb.append(&quot;,&quot;);\r\n    }\r\n\r\n    return &quot;[&quot; + sb.toString() + &quot;]&quot;;\r\n    }\r\n}\r\n```","title":"Creating toString method in custom ArrayList Java","body":"<p>Just add an if condition to only add the comma if the index <code>i</code> is not equals to the last index accepted by the <code>for</code> loop</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\n    public String toString() {  \n    StringBuilder sb = new StringBuilder();\n    if(store == null) {\n        return &quot;[]&quot;;\n    } else {\n\n    for (int i = 0; i &lt; size; i++) {\n        sb.append(store[i].toString());\n        if(i != size - 1) sb.append(&quot;,&quot;);\n    }\n\n    return &quot;[&quot; + sb.toString() + &quot;]&quot;;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25481526,"reputation":336,"user_id":19277782,"display_name":"CaptainPyscho"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1655070351,"creation_date":1655070351,"answer_id":72596112,"question_id":72596049,"body_markdown":"Concat the comma at the start of the String and start the loop at index 1\r\n\r\n    if(store.length &gt; 0) {\r\n       sb.append(store[0].toString());\r\n    }\r\n    \r\n    for (int i = 1; i &lt; store.length; i++) {\r\n       sb.append(&quot;, &quot; + store[i].toString());\r\n    }","title":"Creating toString method in custom ArrayList Java","body":"<p>Concat the comma at the start of the String and start the loop at index 1</p>\n<pre><code>if(store.length &gt; 0) {\n   sb.append(store[0].toString());\n}\n\nfor (int i = 1; i &lt; store.length; i++) {\n   sb.append(&quot;, &quot; + store[i].toString());\n}\n</code></pre>\n"}],"owner":{"account_id":25014379,"reputation":51,"user_id":18873592,"display_name":"Orest Dymarchuk"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":150,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":72596078,"answer_count":2,"score":0,"last_activity_date":1655070351,"creation_date":1655069778,"question_id":72596049,"body_markdown":"I&#39;m creating my own `ArrayList` and stuck in the `toString()` method, can you help me get rid of the comma after printing the last item?\r\n\r\n`toString()` method:\r\n\r\n    \t@Override\r\n\t    public String toString() {\t\r\n\t\tStringBuilder sb = new StringBuilder();\r\n\t\tif(store == null) {\r\n\t\t\treturn &quot;[]&quot;;\r\n\t\t} else {\r\n\r\n\t\tfor (int i = 0; i &lt; size; i++) {\r\n\t\t\tsb.append(store[i].toString() + &quot;, &quot;);\r\n\t\t}\r\n\r\n\t\treturn &quot;[&quot; + sb.toString() + &quot;]&quot;;\r\n\t\t}\r\n\t}\r\n\r\n`Main` method:\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tMyArrayList&lt;String&gt; fruits = new MyArrayList&lt;&gt;();\r\n\r\n\t\tSystem.out.println(&quot;My array list with fruits :)&quot;);\r\n\r\n\t\tfruits.add(&quot;Bananas&quot;);\r\n\t\tfruits.add(&quot;Apples&quot;);\r\n\t\tfruits.add(&quot;Pineapple&quot;);\r\n\t\tfruits.add(&quot;Peaches&quot;);\r\n\t\tfruits.add(&quot;Pears&quot;);\r\n\t\tfruits.add(&quot;Plum&quot;);\r\n\r\n\t\tSystem.out.println(&quot;The list of fruits : &quot; + fruits);\r\n\r\n\t\tfruits.clear();\r\n\r\n\t\tSystem.out.println(&quot;All fruits have been eaten =) &quot; + fruits);\r\n\r\nOutput:\r\n\r\n    [Bananas, Apples, Pineapple, Peaches, Pears, Plum, ]","title":"Creating toString method in custom ArrayList Java","body":"<p>I'm creating my own <code>ArrayList</code> and stuck in the <code>toString()</code> method, can you help me get rid of the comma after printing the last item?</p>\n<p><code>toString()</code> method:</p>\n<pre><code>    @Override\n    public String toString() {  \n    StringBuilder sb = new StringBuilder();\n    if(store == null) {\n        return &quot;[]&quot;;\n    } else {\n\n    for (int i = 0; i &lt; size; i++) {\n        sb.append(store[i].toString() + &quot;, &quot;);\n    }\n\n    return &quot;[&quot; + sb.toString() + &quot;]&quot;;\n    }\n}\n</code></pre>\n<p><code>Main</code> method:</p>\n<pre><code>public static void main(String[] args) {\n    MyArrayList&lt;String&gt; fruits = new MyArrayList&lt;&gt;();\n\n    System.out.println(&quot;My array list with fruits :)&quot;);\n\n    fruits.add(&quot;Bananas&quot;);\n    fruits.add(&quot;Apples&quot;);\n    fruits.add(&quot;Pineapple&quot;);\n    fruits.add(&quot;Peaches&quot;);\n    fruits.add(&quot;Pears&quot;);\n    fruits.add(&quot;Plum&quot;);\n\n    System.out.println(&quot;The list of fruits : &quot; + fruits);\n\n    fruits.clear();\n\n    System.out.println(&quot;All fruits have been eaten =) &quot; + fruits);\n</code></pre>\n<p>Output:</p>\n<pre><code>[Bananas, Apples, Pineapple, Peaches, Pears, Plum, ]\n</code></pre>\n"},{"tags":["java","algorithm","data-structures","sliding-window"],"answers":[{"tags":[],"owner":{"account_id":7142980,"reputation":323253,"user_id":5459839,"display_name":"trincot"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1655068758,"creation_date":1655067900,"answer_id":72595865,"question_id":72595168,"body_markdown":"&gt; Why is the worst case, the length of the input array? \r\n\r\nFirst note that a swap is only useful when it swaps a 0 with 1. Secondly, it makes no sense to swap the same digit a second time, as the result of such double swap could have been achieved with a single swap. So we can say that an upper limit for the number of swaps is the number of 0-digits or number of 1-digits (which ever is the least). In fact, this is an overestimation, because at least one 1-digit should be able to stay unmoved.  But let&#39;s ignore that for now. To reach that worst case, there should be as many 1 as 0 digits, so then we have *half* of the length as worst case. Of course, by initialising with a value that is greater than that (like the length) we do no harm.\r\n\r\nThe example of alternating digits would be resolved by keeping half of those 1-digits unmoved, and moving the remaining 1-digits in the holes between them. So that means we have a number of swaps that is equal to about one fourth of the length of the array.\r\n\r\n&gt; below line stumps me as well.\r\n&gt; ```\r\n&gt; rslt = Math.min(rslt, holes);\r\n&gt; ```\r\n\r\nAs you said, there is a window moving over the circular array, which represents the *final* situation where all 1-digits should end up. So it sets the target to work towards. Obviously, the 1-digits that are already within that window don&#39;t need to be swapped. Each 0-digit inside that window has to be swapped with a 1-digit that is currently outside that window. Doing that will reach the target, and so the number of swaps for reaching that particular target window is equal to the number of holes (0-digits) inside that window.\r\n\r\nAs that exercise is done for each possible window, we are interested to find the best position of the window, i.e. the one where the number of holes (swaps) is *minimised*. That is what this line of code is doing. `rslt` is the minimum &quot;so far&quot; and `holes` is the fresh value we have for the current window. If that is less, then `rslt` should be updated to it. That&#39;s what happens in this statement.\r\n\r\n&gt; About the modulo below, I don&#39;t think `cntones` can ever be bigger than `nums.length`, in turn which will result in 0 all the time? I&#39;m thinking for the case with one element, you&#39;d have to check whether that one element is 0 or 1. How does below line cover that edge case?\r\n&gt; ```\r\n&gt; int rgt=cntones % nums.length; \r\n&gt; ```\r\n\r\nThat modulo only serves for the case that `cntones` is *equal* to `nums.length`. You are right that it will never *exceed* it. But the case where it is equal is possible (when the input only has 1-digits). And as `rgt` is going to be used as an index, it should *not* be equal to `nums.length` as that is an undefined slot in the array.\r\n\r\n&gt; Due to #1~#3 the last for loop makes no sense to me...\r\n\r\nIt should be clear from the above details. That loop moves the window with one step at a time, and keeps the variable `holes` updated incrementally. Of course, we could have decided to count the number of holes from scratch in each window, but that would be a waste of time. As we go from one window to the next, we only lose one digit on the left and gain one on the right, so we can just update `holes` with that information and know how many holes there are in the *current* window -- the one that starts at `lft` and runs (circular) to `rgt`. In case the digit that we lose at the left is the same as the one we gain at the right, we obviously didn&#39;t change the number of holes. Where they are different, we either win or lose one hole in comparison with the previous window.","title":"Understanding a particular solution to &#39;Minimum Swaps to Group All 1&#39;s Together 2nd&#39; problem","body":"<blockquote>\n<p>Why is the worst case, the length of the input array?</p>\n</blockquote>\n<p>First note that a swap is only useful when it swaps a 0 with 1. Secondly, it makes no sense to swap the same digit a second time, as the result of such double swap could have been achieved with a single swap. So we can say that an upper limit for the number of swaps is the number of 0-digits or number of 1-digits (which ever is the least). In fact, this is an overestimation, because at least one 1-digit should be able to stay unmoved.  But let's ignore that for now. To reach that worst case, there should be as many 1 as 0 digits, so then we have <em>half</em> of the length as worst case. Of course, by initialising with a value that is greater than that (like the length) we do no harm.</p>\n<p>The example of alternating digits would be resolved by keeping half of those 1-digits unmoved, and moving the remaining 1-digits in the holes between them. So that means we have a number of swaps that is equal to about one fourth of the length of the array.</p>\n<blockquote>\n<p>below line stumps me as well.</p>\n<pre><code>rslt = Math.min(rslt, holes);\n</code></pre>\n</blockquote>\n<p>As you said, there is a window moving over the circular array, which represents the <em>final</em> situation where all 1-digits should end up. So it sets the target to work towards. Obviously, the 1-digits that are already within that window don't need to be swapped. Each 0-digit inside that window has to be swapped with a 1-digit that is currently outside that window. Doing that will reach the target, and so the number of swaps for reaching that particular target window is equal to the number of holes (0-digits) inside that window.</p>\n<p>As that exercise is done for each possible window, we are interested to find the best position of the window, i.e. the one where the number of holes (swaps) is <em>minimised</em>. That is what this line of code is doing. <code>rslt</code> is the minimum &quot;so far&quot; and <code>holes</code> is the fresh value we have for the current window. If that is less, then <code>rslt</code> should be updated to it. That's what happens in this statement.</p>\n<blockquote>\n<p>About the modulo below, I don't think <code>cntones</code> can ever be bigger than <code>nums.length</code>, in turn which will result in 0 all the time? I'm thinking for the case with one element, you'd have to check whether that one element is 0 or 1. How does below line cover that edge case?</p>\n<pre><code>int rgt=cntones % nums.length; \n</code></pre>\n</blockquote>\n<p>That modulo only serves for the case that <code>cntones</code> is <em>equal</em> to <code>nums.length</code>. You are right that it will never <em>exceed</em> it. But the case where it is equal is possible (when the input only has 1-digits). And as <code>rgt</code> is going to be used as an index, it should <em>not</em> be equal to <code>nums.length</code> as that is an undefined slot in the array.</p>\n<blockquote>\n<p>Due to #1~#3 the last for loop makes no sense to me...</p>\n</blockquote>\n<p>It should be clear from the above details. That loop moves the window with one step at a time, and keeps the variable <code>holes</code> updated incrementally. Of course, we could have decided to count the number of holes from scratch in each window, but that would be a waste of time. As we go from one window to the next, we only lose one digit on the left and gain one on the right, so we can just update <code>holes</code> with that information and know how many holes there are in the <em>current</em> window -- the one that starts at <code>lft</code> and runs (circular) to <code>rgt</code>. In case the digit that we lose at the left is the same as the one we gain at the right, we obviously didn't change the number of holes. Where they are different, we either win or lose one hole in comparison with the previous window.</p>\n"}],"owner":{"account_id":24993046,"reputation":25,"user_id":18854026,"display_name":"Kang_the_Conqueror"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":192,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":72595865,"answer_count":1,"score":0,"last_activity_date":1655069060,"creation_date":1655061164,"question_id":72595168,"body_markdown":"I am looking at the LeetCode problem [2134. Minimum Swaps to Group All 1&#39;s Together II](https://leetcode.com/problems/minimum-swaps-to-group-all-1s-together-ii/):\r\n\r\n&gt; A **swap** is defined as taking two **distinct** positions in an array and swapping the values in them.\r\n&gt;\r\n&gt; A **circular** array is defined as an array where we consider the **first** element and the **last** element to be **adjacent**.\r\n&gt; \r\n&gt; Given a **binary circular** array `nums`, return *the minimum number of swaps required to group all `1`&#39;s present in the array together at **any location**.*\r\n\r\nI am trying to study how other people came up with solutions of their own. I came across this particular one, but I don&#39;t understand the logic:\r\n\r\n```\r\nclass Solution {\r\n    public int minSwaps(int[] nums) {\r\n        // number of ones    \r\n        int cntones=Arrays.stream(nums).sum();\r\n        // worst case answer\r\n        int rslt=nums.length;\r\n        // position lft and figure better value for min/rslt\r\n        int holes = 0;\r\n        for(int i=0;i&lt;cntones;i++) {\r\n            if(nums[i]==0)\r\n                holes++;\r\n        }\r\n        // better value for rslt from lft to rgt\r\n        // up to index of cntones.\r\n        rslt = Math.min(rslt, holes);\r\n        \r\n        // they have a test case with one element \r\n        // and that trips up if you dont do modulo\r\n        int rgt=cntones % nums.length;\r\n        for(int lft=0;lft&lt;nums.length;lft++) {\r\n            rslt=Math.min(rslt,holes);\r\n            if(nums[lft]!=nums[rgt]) \r\n                if(nums[rgt]==1)\r\n                    holes--;\r\n                else \r\n                    holes++;\r\n            rgt=(rgt+1)%nums.length;\r\n        }\r\n        return rslt;\r\n    }\r\n}\r\n```\r\n\r\n1. Why is the worst case, the length of the input array?\r\nI&#39;m thinking wait, wouldn&#39;t the worst case be something like [0,1,0,1,0,1...] where 0&#39;s and 1&#39;s are alternating? Can you give me an example?\r\n\r\n2. I suppose #of holes can potentially be a possible solution in some cases, from counting 0&#39;s in a fixed length (the number of total 1&#39;s) of a window but because I do not understand the worst case, `rslt` from question #1, below line stumps me as well.\r\n\r\n    ```\r\n    // better value for rslt from lft to rgt\r\n    // up to index of cntones.\r\n    rslt = Math.min(rslt, holes);\r\n    ```\r\n\r\n3. About the modulo below, I don&#39;t think `cntones` can ever be bigger than `nums.length`, in turn which will result in 0 all the time? I&#39;m thinking for the case with one element, you&#39;d have to check whether that one element is 0 or 1. How does below line cover that edge case? \r\n\r\n    ```\r\n    // they have a test case with one element \r\n    // and that trips up if you dont do modulo\r\n    int rgt=cntones % nums.length; \r\n    ```\r\n\r\n4. Due to #1~#3 the last for loop makes no sense to me...\r\n","title":"Understanding a particular solution to &#39;Minimum Swaps to Group All 1&#39;s Together 2nd&#39; problem","body":"<p>I am looking at the LeetCode problem <a href=\"https://leetcode.com/problems/minimum-swaps-to-group-all-1s-together-ii/\" rel=\"nofollow noreferrer\">2134. Minimum Swaps to Group All 1's Together II</a>:</p>\n<blockquote>\n<p>A <strong>swap</strong> is defined as taking two <strong>distinct</strong> positions in an array and swapping the values in them.</p>\n<p>A <strong>circular</strong> array is defined as an array where we consider the <strong>first</strong> element and the <strong>last</strong> element to be <strong>adjacent</strong>.</p>\n<p>Given a <strong>binary circular</strong> array <code>nums</code>, return <em>the minimum number of swaps required to group all <code>1</code>'s present in the array together at <strong>any location</strong>.</em></p>\n</blockquote>\n<p>I am trying to study how other people came up with solutions of their own. I came across this particular one, but I don't understand the logic:</p>\n<pre><code>class Solution {\n    public int minSwaps(int[] nums) {\n        // number of ones    \n        int cntones=Arrays.stream(nums).sum();\n        // worst case answer\n        int rslt=nums.length;\n        // position lft and figure better value for min/rslt\n        int holes = 0;\n        for(int i=0;i&lt;cntones;i++) {\n            if(nums[i]==0)\n                holes++;\n        }\n        // better value for rslt from lft to rgt\n        // up to index of cntones.\n        rslt = Math.min(rslt, holes);\n        \n        // they have a test case with one element \n        // and that trips up if you dont do modulo\n        int rgt=cntones % nums.length;\n        for(int lft=0;lft&lt;nums.length;lft++) {\n            rslt=Math.min(rslt,holes);\n            if(nums[lft]!=nums[rgt]) \n                if(nums[rgt]==1)\n                    holes--;\n                else \n                    holes++;\n            rgt=(rgt+1)%nums.length;\n        }\n        return rslt;\n    }\n}\n</code></pre>\n<ol>\n<li><p>Why is the worst case, the length of the input array?\nI'm thinking wait, wouldn't the worst case be something like [0,1,0,1,0,1...] where 0's and 1's are alternating? Can you give me an example?</p>\n</li>\n<li><p>I suppose #of holes can potentially be a possible solution in some cases, from counting 0's in a fixed length (the number of total 1's) of a window but because I do not understand the worst case, <code>rslt</code> from question #1, below line stumps me as well.</p>\n<pre><code>// better value for rslt from lft to rgt\n// up to index of cntones.\nrslt = Math.min(rslt, holes);\n</code></pre>\n</li>\n<li><p>About the modulo below, I don't think <code>cntones</code> can ever be bigger than <code>nums.length</code>, in turn which will result in 0 all the time? I'm thinking for the case with one element, you'd have to check whether that one element is 0 or 1. How does below line cover that edge case?</p>\n<pre><code>// they have a test case with one element \n// and that trips up if you dont do modulo\nint rgt=cntones % nums.length; \n</code></pre>\n</li>\n<li><p>Due to #1~#3 the last for loop makes no sense to me...</p>\n</li>\n</ol>\n"},{"tags":["java","json"],"answers":[{"tags":[],"owner":{"account_id":25296580,"reputation":2100,"user_id":19121623,"display_name":"Eskandar Abedini"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655064548,"creation_date":1655063690,"answer_id":72595434,"question_id":72595257,"body_markdown":"For reading file content from resources folder please refer to:\r\n\r\n[How do I load a file from resource folder?][1]\r\n\r\n[What’s the best way to load a JSONObject from a json text file?][2]\r\n\r\nAssign file content to corresponding String variables.\r\n\r\nConvert JSON string to JSON array then select a random item through names and last names array:\r\n\r\n    public static void main(String[] args) {\r\n        String namesJsonString = &quot;{\\n&quot; +\r\n                &quot;   \\&quot;first_names\\&quot;: [\\n&quot; +\r\n                &quot;      \\&quot;Aaron\\&quot;,\\n&quot; +\r\n                &quot;      \\&quot;Abby\\&quot;,\\n&quot; +\r\n                &quot;      \\&quot;Abigail\\&quot;,\\n&quot; +\r\n                &quot;   ]\\n&quot; +\r\n                &quot;}&quot;;\r\n\r\n        String lastNamesJsonString = &quot;{\\n&quot; +\r\n                &quot;   \\&quot;last_names\\&quot;: [\\n&quot; +\r\n                &quot;      \\&quot;last name 1\\&quot;,\\n&quot; +\r\n                &quot;      \\&quot;last name 2\\&quot;,\\n&quot; +\r\n                &quot;      \\&quot;last name 3\\&quot;,\\n&quot; +\r\n                &quot;   ]\\n&quot; +\r\n                &quot;}&quot;;\r\n        JSONObject namesJson = null;\r\n        JSONObject lastNamesJson = null;\r\n        try {\r\n            namesJson = new JSONObject(namesJsonString);\r\n            JSONArray namesJsonArray = namesJson.getJSONArray(&quot;first_names&quot;);\r\n\r\n            lastNamesJson = new JSONObject(lastNamesJsonString);\r\n            JSONArray lastNamesJsonArray = lastNamesJson.getJSONArray(&quot;last_names&quot;);\r\n\r\n            int namesArrayLength = namesJsonArray.length();\r\n            int lastNamesArrayLength = lastNamesJsonArray.length();\r\n            for (int i = 0; i &lt; 5; i++) {\r\n                int randomNameIndex = (int) (Math.random() * namesArrayLength);\r\n                String randomName = namesJsonArray.getString(randomNameIndex);\r\n\r\n                int randomLastNameIndex = (int) (Math.random() * lastNamesArrayLength);\r\n                String randomLastName = lastNamesJsonArray.getString(randomLastNameIndex);\r\n                System.out.println(randomName + &quot; &quot; + randomLastName);\r\n            }\r\n        } catch (JSONException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/15749192/how-do-i-load-a-file-from-resource-folder\r\n  [2]: https://stackoverflow.com/questions/7463414/what-s-the-best-way-to-load-a-jsonobject-from-a-json-text-file","title":"How to retrieve a random element from a JSON array file in Java?","body":"<p>For reading file content from resources folder please refer to:</p>\n<p><a href=\"https://stackoverflow.com/questions/15749192/how-do-i-load-a-file-from-resource-folder\">How do I load a file from resource folder?</a></p>\n<p><a href=\"https://stackoverflow.com/questions/7463414/what-s-the-best-way-to-load-a-jsonobject-from-a-json-text-file\">What’s the best way to load a JSONObject from a json text file?</a></p>\n<p>Assign file content to corresponding String variables.</p>\n<p>Convert JSON string to JSON array then select a random item through names and last names array:</p>\n<pre><code>public static void main(String[] args) {\n    String namesJsonString = &quot;{\\n&quot; +\n            &quot;   \\&quot;first_names\\&quot;: [\\n&quot; +\n            &quot;      \\&quot;Aaron\\&quot;,\\n&quot; +\n            &quot;      \\&quot;Abby\\&quot;,\\n&quot; +\n            &quot;      \\&quot;Abigail\\&quot;,\\n&quot; +\n            &quot;   ]\\n&quot; +\n            &quot;}&quot;;\n\n    String lastNamesJsonString = &quot;{\\n&quot; +\n            &quot;   \\&quot;last_names\\&quot;: [\\n&quot; +\n            &quot;      \\&quot;last name 1\\&quot;,\\n&quot; +\n            &quot;      \\&quot;last name 2\\&quot;,\\n&quot; +\n            &quot;      \\&quot;last name 3\\&quot;,\\n&quot; +\n            &quot;   ]\\n&quot; +\n            &quot;}&quot;;\n    JSONObject namesJson = null;\n    JSONObject lastNamesJson = null;\n    try {\n        namesJson = new JSONObject(namesJsonString);\n        JSONArray namesJsonArray = namesJson.getJSONArray(&quot;first_names&quot;);\n\n        lastNamesJson = new JSONObject(lastNamesJsonString);\n        JSONArray lastNamesJsonArray = lastNamesJson.getJSONArray(&quot;last_names&quot;);\n\n        int namesArrayLength = namesJsonArray.length();\n        int lastNamesArrayLength = lastNamesJsonArray.length();\n        for (int i = 0; i &lt; 5; i++) {\n            int randomNameIndex = (int) (Math.random() * namesArrayLength);\n            String randomName = namesJsonArray.getString(randomNameIndex);\n\n            int randomLastNameIndex = (int) (Math.random() * lastNamesArrayLength);\n            String randomLastName = lastNamesJsonArray.getString(randomLastNameIndex);\n            System.out.println(randomName + &quot; &quot; + randomLastName);\n        }\n    } catch (JSONException e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655068839,"creation_date":1655068839,"answer_id":72595959,"question_id":72595257,"body_markdown":"You can use this technique. Pass the file name as the argument to the app:\r\n\r\n    import javax.json.*;\r\n    import java.util.*;\r\n    import java.io.*;\r\n    \r\n    public class JsonTest {\r\n        public static void main(String[] args) {\r\n            try (JsonReader in = Json.createReader(new FileReader(args[0]))) {\r\n                JsonArray array = in.readObject().getJsonArray(&quot;first_names&quot;);\r\n                int arrayLength = array.size();\r\n                Random r = new Random();\r\n                System.out.printf(&quot;Your random array element is %s%n&quot;, array.getString(r.nextInt(arrayLength)));\r\n            } catch (Throwable t) {\r\n                t.printStackTrace();\r\n            }\r\n        }\r\n    }","title":"How to retrieve a random element from a JSON array file in Java?","body":"<p>You can use this technique. Pass the file name as the argument to the app:</p>\n<pre><code>import javax.json.*;\nimport java.util.*;\nimport java.io.*;\n\npublic class JsonTest {\n    public static void main(String[] args) {\n        try (JsonReader in = Json.createReader(new FileReader(args[0]))) {\n            JsonArray array = in.readObject().getJsonArray(&quot;first_names&quot;);\n            int arrayLength = array.size();\n            Random r = new Random();\n            System.out.printf(&quot;Your random array element is %s%n&quot;, array.getString(r.nextInt(arrayLength)));\n        } catch (Throwable t) {\n            t.printStackTrace();\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":18618643,"reputation":131,"user_id":13569389,"display_name":"cantcode4mylife"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":391,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1655068839,"creation_date":1655061915,"question_id":72595257,"body_markdown":"I have a two JSON files located in the resources package of my maven project. They are files called first-names.json and last-names.json. They both look something like this:\r\n```\r\n{\r\n   &quot;first_names&quot;: [\r\n      &quot;Aaron&quot;,\r\n      &quot;Abby&quot;,\r\n      &quot;Abigail&quot;,\r\n      etc..\r\n   ]\r\n}\r\n```\r\nMy goal with this is I&#39;m making an API that can retrieve a person with random attributes like first name and last name. Each one of these arrays has 10,000+ names. How would I go about retrieving a random element these files so I can assign it into my Person object?\r\n\r\nProject Structure:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/g93D9.png","title":"How to retrieve a random element from a JSON array file in Java?","body":"<p>I have a two JSON files located in the resources package of my maven project. They are files called first-names.json and last-names.json. They both look something like this:</p>\n<pre><code>{\n   &quot;first_names&quot;: [\n      &quot;Aaron&quot;,\n      &quot;Abby&quot;,\n      &quot;Abigail&quot;,\n      etc..\n   ]\n}\n</code></pre>\n<p>My goal with this is I'm making an API that can retrieve a person with random attributes like first name and last name. Each one of these arrays has 10,000+ names. How would I go about retrieving a random element these files so I can assign it into my Person object?</p>\n<p>Project Structure:</p>\n<p><a href=\"https://i.stack.imgur.com/g93D9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/g93D9.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","xml","xsd","jaxb","upnp"],"comments":[{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1654602451,"post_id":72449003,"comment_id":128124974,"body_markdown":"It&#39;s a limitation. The unbounded group is translated to a `List&lt;Object&gt;` or `List&lt;JAXBElement&lt;?&gt;&gt;`. You have two such things, for which the code generation probably tries to create the same field and methods. In this case, removing the second occurrence doesn&#39;t change much; the only difference is that the `upnp:class.group` now must come at the end, where before it was allowed between members of the groups.","body":"It&#39;s a limitation. The unbounded group is translated to a <code>List&lt;Object&gt;</code> or <code>List&lt;JAXBElement&lt;?&gt;&gt;</code>. You have two such things, for which the code generation probably tries to create the same field and methods. In this case, removing the second occurrence doesn&#39;t change much; the only difference is that the <code>upnp:class.group</code> now must come at the end, where before it was allowed between members of the groups."},{"owner":{"account_id":111681,"reputation":13319,"user_id":1480018,"accept_rate":87,"display_name":"Paul Taylor"},"score":0,"creation_date":1654604655,"post_id":72449003,"comment_id":128125886,"body_markdown":"Thx, well it does change quite alot if the xml I receive does have group between the two lists as now my jaxb classes wont be valid to marshall in the data, but I havent seen an example of this so far so i was wondering if it was actually an error i the specification.","body":"Thx, well it does change quite alot if the xml I receive does have group between the two lists as now my jaxb classes wont be valid to marshall in the data, but I havent seen an example of this so far so i was wondering if it was actually an error i the specification."},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1654616708,"post_id":72449003,"comment_id":128130825,"body_markdown":"Nope, the specification is valid.","body":"Nope, the specification is valid."},{"owner":{"account_id":1901420,"reputation":3763,"user_id":1717210,"display_name":"TacheDeChoco"},"score":0,"creation_date":1654691887,"post_id":72449003,"comment_id":128150918,"body_markdown":"Possible workaround: apply first a XSL transformation which will rename some xml elements (avoiding thereby name clash), and then unmarshall the obtained XML to java classes using JAXB. Be aware you will also need two versions of the schema, the first one (the original) to validate received xml, and a second one (the modified) for xml-&gt;java generation...","body":"Possible workaround: apply first a XSL transformation which will rename some xml elements (avoiding thereby name clash), and then unmarshall the obtained XML to java classes using JAXB. Be aware you will also need two versions of the schema, the first one (the original) to validate received xml, and a second one (the modified) for xml-&gt;java generation..."}],"answers":[{"tags":[],"owner":{"account_id":19092422,"reputation":51311,"user_id":13942448,"display_name":"jccampanero"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1655068680,"creation_date":1655052486,"answer_id":72594152,"question_id":72449003,"body_markdown":"I think both semantically and formally the schema provided is valid.\r\n\r\nYou can, for instance, verify the schema well-formedness with Java or online, for example, in [this site](https://www.utilities-online.info/xsdvalidation).\r\n\r\nThe issue you are facing could be considered a kind of limitation of JAXB.\r\n\r\nThe limitation consists in that the generator encounters a value that has been already taken into consideration in the process of generating your classes, and it has a problem, because it will be unable to generate a property and the corresponding related methods and stuff for this second value because the names are already taken.\r\n\r\nI will use the `xjc` tool for code generation but the solution should be portable to the [Maven](https://github.com/highsource/maven-jaxb2-plugin/wiki/Specifying-What-To-Compile#specifying-bindings) or Gradle plugins too.\r\n\r\nIf you run the `xjc` tool like this:\r\n\r\n```\r\nxjc -d out didl-lite-v2.xsd\r\n```\r\n\r\nthe error description will give you a possible solution:\r\n\r\n```\r\n[ERROR] Property &quot;AllowedUnderItem&quot; is already defined. Use &lt;jaxb:property&gt; to resolve this conflict\r\n```\r\n\r\nThe mentioned term `&lt;jaxb:property&gt;` has to do with [JAXB XML bindings](https://docs.oracle.com/javase/tutorial/jaxb/intro/custom.html).\r\n\r\nJAXB XML bindings allows you to customize the JAXB Java classes generation process in different ways.\r\n\r\nThe necessary configuration is provided in a XML file with a certain information.\r\n\r\nIn this specific use case, you can define the following bindings XML file, let&#39;s name it `binding.xml`:\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;jaxb:bindings \r\n    xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot;\r\n    xmlns:jaxb=&quot;http://java.sun.com/xml/ns/jaxb&quot;\r\n    version=&quot;2.1&quot;&gt;\r\n\r\n    &lt;jaxb:bindings schemaLocation=&quot;didl-lite-v2.xsd&quot;&gt;\r\n        &lt;jaxb:bindings\r\n            node=&quot;//xsd:complexType[@name=&#39;container.type&#39;]/xsd:sequence/xsd:group[@ref=&#39;didl-lite:allowed-under-container&#39;][2]&quot;&gt;\r\n            &lt;jaxb:property name=&quot;allowedUnderContainerAfterUpnpClassGroup&quot;/&gt;\r\n        &lt;/jaxb:bindings&gt;\r\n        &lt;jaxb:bindings\r\n            node=&quot;//xsd:complexType[@name=&#39;item.type&#39;]/xsd:sequence/xsd:group[@ref=&#39;didl-lite:allowed-under-item&#39;][2]&quot;&gt;\r\n            &lt;jaxb:property name=&quot;allowedUnderItemAfterUpnpClassGroup&quot;/&gt;\r\n        &lt;/jaxb:bindings&gt;\r\n    &lt;/jaxb:bindings&gt;\r\n&lt;/jaxb:bindings&gt;\r\n```\r\n\r\nAs you can see, we are indicating that the second occurrence of the `allowed-under-item` `group`, represented by the XPath expression `//xsd:complexType[@name=&#39;item.type&#39;]/xsd:sequence/xsd:group[@ref=&#39;didl-lite:allowed-under-item&#39;][2]`, should be treated as `allowedUnderItemAfterUpnpClassGroup`. We need to do something similar with `allowed-under-container`.\r\n\r\nThen, if you run again the `xjc` tool passing in this XML bindings file, your classes will be generated successfully:\r\n\r\n```\r\nxjc -d out -b binding.xml didl-lite-v2.xsd\r\n```\r\n\r\n[This](https://stackoverflow.com/questions/4394134/jaxb-property-value-is-already-defined-use-jaxbproperty-to-resolve-this) or [this other](https://stackoverflow.com/questions/48441532/jaxb-property-value-is-already-defined-use-ltjaxbproperty-to-resolve-this-c) SO questions could be of help as well.","title":"Is this offical Xml schema invalid or is error limitation of Jaxb","body":"<p>I think both semantically and formally the schema provided is valid.</p>\n<p>You can, for instance, verify the schema well-formedness with Java or online, for example, in <a href=\"https://www.utilities-online.info/xsdvalidation\" rel=\"nofollow noreferrer\">this site</a>.</p>\n<p>The issue you are facing could be considered a kind of limitation of JAXB.</p>\n<p>The limitation consists in that the generator encounters a value that has been already taken into consideration in the process of generating your classes, and it has a problem, because it will be unable to generate a property and the corresponding related methods and stuff for this second value because the names are already taken.</p>\n<p>I will use the <code>xjc</code> tool for code generation but the solution should be portable to the <a href=\"https://github.com/highsource/maven-jaxb2-plugin/wiki/Specifying-What-To-Compile#specifying-bindings\" rel=\"nofollow noreferrer\">Maven</a> or Gradle plugins too.</p>\n<p>If you run the <code>xjc</code> tool like this:</p>\n<pre><code>xjc -d out didl-lite-v2.xsd\n</code></pre>\n<p>the error description will give you a possible solution:</p>\n<pre><code>[ERROR] Property &quot;AllowedUnderItem&quot; is already defined. Use &lt;jaxb:property&gt; to resolve this conflict\n</code></pre>\n<p>The mentioned term <code>&lt;jaxb:property&gt;</code> has to do with <a href=\"https://docs.oracle.com/javase/tutorial/jaxb/intro/custom.html\" rel=\"nofollow noreferrer\">JAXB XML bindings</a>.</p>\n<p>JAXB XML bindings allows you to customize the JAXB Java classes generation process in different ways.</p>\n<p>The necessary configuration is provided in a XML file with a certain information.</p>\n<p>In this specific use case, you can define the following bindings XML file, let's name it <code>binding.xml</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;jaxb:bindings \n    xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot;\n    xmlns:jaxb=&quot;http://java.sun.com/xml/ns/jaxb&quot;\n    version=&quot;2.1&quot;&gt;\n\n    &lt;jaxb:bindings schemaLocation=&quot;didl-lite-v2.xsd&quot;&gt;\n        &lt;jaxb:bindings\n            node=&quot;//xsd:complexType[@name='container.type']/xsd:sequence/xsd:group[@ref='didl-lite:allowed-under-container'][2]&quot;&gt;\n            &lt;jaxb:property name=&quot;allowedUnderContainerAfterUpnpClassGroup&quot;/&gt;\n        &lt;/jaxb:bindings&gt;\n        &lt;jaxb:bindings\n            node=&quot;//xsd:complexType[@name='item.type']/xsd:sequence/xsd:group[@ref='didl-lite:allowed-under-item'][2]&quot;&gt;\n            &lt;jaxb:property name=&quot;allowedUnderItemAfterUpnpClassGroup&quot;/&gt;\n        &lt;/jaxb:bindings&gt;\n    &lt;/jaxb:bindings&gt;\n&lt;/jaxb:bindings&gt;\n</code></pre>\n<p>As you can see, we are indicating that the second occurrence of the <code>allowed-under-item</code> <code>group</code>, represented by the XPath expression <code>//xsd:complexType[@name='item.type']/xsd:sequence/xsd:group[@ref='didl-lite:allowed-under-item'][2]</code>, should be treated as <code>allowedUnderItemAfterUpnpClassGroup</code>. We need to do something similar with <code>allowed-under-container</code>.</p>\n<p>Then, if you run again the <code>xjc</code> tool passing in this XML bindings file, your classes will be generated successfully:</p>\n<pre><code>xjc -d out -b binding.xml didl-lite-v2.xsd\n</code></pre>\n<p><a href=\"https://stackoverflow.com/questions/4394134/jaxb-property-value-is-already-defined-use-jaxbproperty-to-resolve-this\">This</a> or <a href=\"https://stackoverflow.com/questions/48441532/jaxb-property-value-is-already-defined-use-ltjaxbproperty-to-resolve-this-c\">this other</a> SO questions could be of help as well.</p>\n"}],"owner":{"account_id":111681,"reputation":13319,"user_id":1480018,"accept_rate":87,"display_name":"Paul Taylor"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":186,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":72594152,"answer_count":1,"score":3,"last_activity_date":1655068793,"creation_date":1654004879,"question_id":72449003,"body_markdown":"uPnP defines a number of Xml schemas including [didl-lite.xsd][1], including this section:\r\n\r\n```xml \r\n&lt;xsd:sequence&gt;\r\n  &lt;xsd:element ref=&quot;dc:title&quot;/&gt;\r\n  &lt;xsd:group ref=&quot;didl-lite:allowed-under-container&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot;/&gt;\r\n  &lt;xsd:group ref=&quot;upnp:class.group&quot;/&gt;\r\n  &lt;xsd:group ref=&quot;didl-lite:allowed-under-container&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot;/&gt;\r\n&lt;/xsd:sequence&gt;\r\n```\r\n\r\nWhen I tried to build Java classes from this using jaxb it complained\r\n\r\nRemoving the second **xsd:group ref=&quot;didl-lite:allowed-under-container&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot;** line so we have\r\n\r\n```xml\r\n&lt;xsd:sequence&gt;\r\n  &lt;xsd:element ref=&quot;dc:title&quot;/&gt;\r\n  &lt;xsd:group ref=&quot;didl-lite:allowed-under-container&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot;/&gt;\r\n  &lt;xsd:group ref=&quot;upnp:class.group&quot;/&gt;\r\n&lt;/xsd:sequence&gt;\r\n```\r\n\r\nfixed the issue, and seems to make more sense.\r\n\r\nBut I am not clear **is the Xsd actually invalid or is this just a limitation of generating Jaxb classes from Xsd?**\r\n\r\n  [1]: https://gitlab.gnome.org/GNOME/gupnp-av/-/blob/master/data/didl-lite-v2.xsd","title":"Is this offical Xml schema invalid or is error limitation of Jaxb","body":"<p>uPnP defines a number of Xml schemas including <a href=\"https://gitlab.gnome.org/GNOME/gupnp-av/-/blob/master/data/didl-lite-v2.xsd\" rel=\"nofollow noreferrer\">didl-lite.xsd</a>, including this section:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;xsd:sequence&gt;\n  &lt;xsd:element ref=&quot;dc:title&quot;/&gt;\n  &lt;xsd:group ref=&quot;didl-lite:allowed-under-container&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot;/&gt;\n  &lt;xsd:group ref=&quot;upnp:class.group&quot;/&gt;\n  &lt;xsd:group ref=&quot;didl-lite:allowed-under-container&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot;/&gt;\n&lt;/xsd:sequence&gt;\n</code></pre>\n<p>When I tried to build Java classes from this using jaxb it complained</p>\n<p>Removing the second <strong>xsd:group ref=&quot;didl-lite:allowed-under-container&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot;</strong> line so we have</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;xsd:sequence&gt;\n  &lt;xsd:element ref=&quot;dc:title&quot;/&gt;\n  &lt;xsd:group ref=&quot;didl-lite:allowed-under-container&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot;/&gt;\n  &lt;xsd:group ref=&quot;upnp:class.group&quot;/&gt;\n&lt;/xsd:sequence&gt;\n</code></pre>\n<p>fixed the issue, and seems to make more sense.</p>\n<p>But I am not clear <strong>is the Xsd actually invalid or is this just a limitation of generating Jaxb classes from Xsd?</strong></p>\n"},{"tags":["java","spring-boot","gradle","google-cloud-platform","google-secret-manager"],"answers":[{"tags":[],"owner":{"account_id":20035299,"reputation":37,"user_id":14687169,"display_name":"Kathelan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1655068046,"creation_date":1655068046,"answer_id":72595877,"question_id":72491749,"body_markdown":"finally i found example and in my case in gcp build i had a problem with google credentials defaults so in tests that i didn&#39;t need secret manager i used this flag :\r\n```\r\n@SpringBootTest(properties = {&quot;spring.cloud.gcp.secretmanager.enabled=false&quot;})\r\n```\r\nso it worked for me builds goes greeny!\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Y3A32.png","title":"how to authenticate project that is deployed on gcp with secret manager in spring boot","body":"<p>finally i found example and in my case in gcp build i had a problem with google credentials defaults so in tests that i didn't need secret manager i used this flag :</p>\n<pre><code>@SpringBootTest(properties = {&quot;spring.cloud.gcp.secretmanager.enabled=false&quot;})\n</code></pre>\n<p>so it worked for me builds goes greeny!\n<a href=\"https://i.stack.imgur.com/Y3A32.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Y3A32.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":20035299,"reputation":37,"user_id":14687169,"display_name":"Kathelan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":371,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72595877,"answer_count":1,"score":0,"last_activity_date":1655068046,"creation_date":1654269419,"question_id":72491749,"body_markdown":"i decided to use secret manager in gcp for credentials from some external API&#39;s so what i did locally to test stuff was gcloud auth application-default login, before that i downloaded gcp cli locally. While deploying app my application context aren&#39;t loading. this is a part from build : \r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/sh3EW.png\r\n\r\nhere is test some basic context load:\r\n```\r\n@SpringBootTest\r\nclass FlightApiApplicationTests {\r\n\r\n    @Test\r\n    void contextLoads() {\r\n    }\r\n\r\n}\r\n```\r\nand here is my docker file : \r\n```\r\nFROM gradle:7.4.1-jdk17-alpine AS TEMP_BUILD_IMAGE\r\nENV APP_HOME=/usr/app/\r\nWORKDIR $APP_HOME\r\nCOPY build.gradle settings.gradle $APP_HOME\r\n\r\nCOPY gradle $APP_HOME/gradle\r\nCOPY --chown=gradle:gradle . /home/gradle/src\r\nUSER root\r\nRUN chown -R gradle /home/gradle/src\r\n\r\nRUN gradle build || return 0\r\nCOPY . .\r\nRUN gradle clean build\r\nFROM openjdk:17\r\nENV ARTIFACT_NAME=FlightApi-0.0.1-SNAPSHOT.jar\r\nENV APP_HOME=/usr/app/\r\n\r\nWORKDIR $APP_HOME\r\nCOPY --from=TEMP_BUILD_IMAGE $APP_HOME/build/libs/$ARTIFACT_NAME .\r\n\r\nEXPOSE 8080\r\nENTRYPOINT exec java -jar ${ARTIFACT_NAME}\r\n\r\n```\r\ni ll put some dependency as well in gradle :\r\n```\r\ndependencies {\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n    implementation &quot;org.springframework.boot:spring-boot-starter-actuator&quot;\r\n\r\n    //amadeus implementation\r\n    implementation &#39;com.google.code.gson:gson:2.9.0&#39;\r\n    implementation &quot;com.amadeus:amadeus-java:5.9.0&quot;\r\n\r\n    implementation &#39;com.google.cloud:spring-cloud-gcp-starter-secretmanager:3.3.0&#39;\r\n\r\n    implementation platform(&#39;com.google.cloud:libraries-bom:25.3.0&#39;)\r\n\r\n    implementation &#39;com.google.cloud:google-cloud-storage&#39;\r\n\r\n\r\n    compileOnly &#39;org.projectlombok:lombok&#39;\r\n    developmentOnly &#39;org.springframework.boot:spring-boot-devtools&#39;\r\n    annotationProcessor &#39;org.projectlombok:lombok&#39;\r\n    testImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n    //Junit\r\n    testImplementation &#39;org.junit.jupiter:junit-jupiter-api:5.8.2&#39;\r\n    testRuntimeOnly &#39;org.junit.jupiter:junit-jupiter-engine:5.8.2&#39;\r\n}\r\n```\r\n\r\nQuestion is should i export in gradle somehow this google default credentials in dockerfile ? Or maybe shall i make some service for authenticating oauth with gcp ? Shouldn&#39;t it find automaticaly since im building it in gcp build service. I am open on any ideas, those gcp documentation are quite not understandable for me or just there is too many information about anything. I am using jdk17 this project. ","title":"how to authenticate project that is deployed on gcp with secret manager in spring boot","body":"<p>i decided to use secret manager in gcp for credentials from some external API's so what i did locally to test stuff was gcloud auth application-default login, before that i downloaded gcp cli locally. While deploying app my application context aren't loading. this is a part from build :\n<a href=\"https://i.stack.imgur.com/sh3EW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sh3EW.png\" alt=\"enter image description here\" /></a></p>\n<p>here is test some basic context load:</p>\n<pre><code>@SpringBootTest\nclass FlightApiApplicationTests {\n\n    @Test\n    void contextLoads() {\n    }\n\n}\n</code></pre>\n<p>and here is my docker file :</p>\n<pre><code>FROM gradle:7.4.1-jdk17-alpine AS TEMP_BUILD_IMAGE\nENV APP_HOME=/usr/app/\nWORKDIR $APP_HOME\nCOPY build.gradle settings.gradle $APP_HOME\n\nCOPY gradle $APP_HOME/gradle\nCOPY --chown=gradle:gradle . /home/gradle/src\nUSER root\nRUN chown -R gradle /home/gradle/src\n\nRUN gradle build || return 0\nCOPY . .\nRUN gradle clean build\nFROM openjdk:17\nENV ARTIFACT_NAME=FlightApi-0.0.1-SNAPSHOT.jar\nENV APP_HOME=/usr/app/\n\nWORKDIR $APP_HOME\nCOPY --from=TEMP_BUILD_IMAGE $APP_HOME/build/libs/$ARTIFACT_NAME .\n\nEXPOSE 8080\nENTRYPOINT exec java -jar ${ARTIFACT_NAME}\n\n</code></pre>\n<p>i ll put some dependency as well in gradle :</p>\n<pre><code>dependencies {\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    implementation &quot;org.springframework.boot:spring-boot-starter-actuator&quot;\n\n    //amadeus implementation\n    implementation 'com.google.code.gson:gson:2.9.0'\n    implementation &quot;com.amadeus:amadeus-java:5.9.0&quot;\n\n    implementation 'com.google.cloud:spring-cloud-gcp-starter-secretmanager:3.3.0'\n\n    implementation platform('com.google.cloud:libraries-bom:25.3.0')\n\n    implementation 'com.google.cloud:google-cloud-storage'\n\n\n    compileOnly 'org.projectlombok:lombok'\n    developmentOnly 'org.springframework.boot:spring-boot-devtools'\n    annotationProcessor 'org.projectlombok:lombok'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n    //Junit\n    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.8.2'\n    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.8.2'\n}\n</code></pre>\n<p>Question is should i export in gradle somehow this google default credentials in dockerfile ? Or maybe shall i make some service for authenticating oauth with gcp ? Shouldn't it find automaticaly since im building it in gcp build service. I am open on any ideas, those gcp documentation are quite not understandable for me or just there is too many information about anything. I am using jdk17 this project.</p>\n"},{"tags":["java","algorithm","data-structures","hashmap"],"comments":[{"owner":{"account_id":1707439,"reputation":236096,"user_id":1566221,"accept_rate":86,"display_name":"rici"},"score":0,"creation_date":1655084656,"post_id":72591504,"comment_id":128238819,"body_markdown":"You need to read through all the answers to the duplicate question and decide which one comes the closest. None of them is superb but there are lots of good ideas, enough to come up with a good solution. Anyway, they&#39;re better than the answers here.","body":"You need to read through all the answers to the duplicate question and decide which one comes the closest. None of them is superb but there are lots of good ideas, enough to come up with a good solution. Anyway, they&#39;re better than the answers here."}],"answers":[{"tags":[],"owner":{"account_id":321745,"reputation":5539,"user_id":640746,"accept_rate":95,"display_name":"Kaushik Shankar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655032159,"creation_date":1655032159,"answer_id":72591643,"question_id":72591504,"body_markdown":"If I&#39;m understanding the problem here correctly, every time `setAll` is called, we effectively *forget* about all the values of the **HashMap** and track only its keys basically as if it were a **HashSet**, where `get` uses the value passed into `setAll`. Additionally, any new `set` calls should still track both the key and the value until `setAll` is called some time later.\r\n\r\nIn other words, you need to track the set of keys before `setAll`, and the set of key-and-values after `setAll` separately in order to be able to distinguish them.\r\n\r\nSee if you can find a way to amortize or through constant time operations, keep track of which keys are and are not associated with the latest `setAll` operation.\r\n\r\nGiven that this looks like a homework problem, I am hesitating to help further (as per [these SO guidelines](https://meta.stackoverflow.com/questions/334822/how-do-i-ask-and-answer-homework-questions)), but if this is not homework, let me know and I can delve further into this topic.","title":"Data Structure that performs set(), get(), setAll() in O(1)","body":"<p>If I'm understanding the problem here correctly, every time <code>setAll</code> is called, we effectively <em>forget</em> about all the values of the <strong>HashMap</strong> and track only its keys basically as if it were a <strong>HashSet</strong>, where <code>get</code> uses the value passed into <code>setAll</code>. Additionally, any new <code>set</code> calls should still track both the key and the value until <code>setAll</code> is called some time later.</p>\n<p>In other words, you need to track the set of keys before <code>setAll</code>, and the set of key-and-values after <code>setAll</code> separately in order to be able to distinguish them.</p>\n<p>See if you can find a way to amortize or through constant time operations, keep track of which keys are and are not associated with the latest <code>setAll</code> operation.</p>\n<p>Given that this looks like a homework problem, I am hesitating to help further (as per <a href=\"https://meta.stackoverflow.com/questions/334822/how-do-i-ask-and-answer-homework-questions\">these SO guidelines</a>), but if this is not homework, let me know and I can delve further into this topic.</p>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1655067973,"creation_date":1655042735,"answer_id":72592945,"question_id":72591504,"body_markdown":"If you want to enhance your knowledge of *Data Structures*, I suggest you to implement your own version of [*Hash table*](https://en.wikipedia.org/wiki/Hash_table) data structure from the ground up (*define an array of buckets, learn how to store elements in a bucket, how to resolve collisions and so on...*) instead of decorating the `HashMap`.\r\n\r\nYour current code is very contrived:\r\n* By its nature, `get()` should not do anything apart from retrieving a value associated with a key because that&#39;s the only responsibility of this method (have a look at the implementation of `get()` in the `HashMap` class). Get familiar with the [*Single responsibility principle*](https://en.wikipedia.org/wiki/Single-responsibility_principle).\r\n* The idea of throwing an exception when the given *key* isn&#39;t present in the map is strange. And `NullPointerException` is not the right type of exception to describe this case, `NoSuchElementException` would be more intuitive.\r\n* You might also be interested in learning https://stackoverflow.com/questions/383947/what-does-it-mean-to-program-to-an-interface\r\n\r\nAnd the main point is that is because you&#39;ve picked the wrong starting point (*see the advice at the very beginning*), learn more about data structures starting from the simplest like [*Dynamic array*](https://en.wikipedia.org/wiki/Dynamic_array), try to implement them from scratch, and gradually learn more about the class design and language features.\r\n\r\n&lt;h3&gt;Time complexity&lt;/h3&gt;\r\n\r\nRegarding the time complexity, since your class decorates a `HashMap` methods `set()` and `get()` would perform in a constant time **O(1)**. \r\n\r\nIf you need to change **all** the **values** in a `HashMap`, that could be done only a linear time **O(n)**. Assuming that all existing *values* are represented by objects that are **distinct** from one another, it&#39;s inherently impossible to perform this operation in a constant time because we need to do this change for every *node* in each *bucket*.\r\n\r\nThe only situation when all values can be set to a *new value* in a constant time is the following very contrived example where each and every *key* would be associated with the **same object**, and we need to maintain a reference to this object (*i.e. it would always retrieve the same value for every key that is present, which doesn&#39;t seem to be particularly useful*):\r\n```\r\npublic class SingleValueMap&lt;K, V&gt; {\r\n    private Map&lt;K, V&gt; map = new HashMap&lt;&gt;();\r\n    private V commonValue;\r\n    \r\n    public void setAll(V newValue) {\r\n        this.commonValue = newValue;\r\n    }\r\n    \r\n    public void add(K key) {\r\n        map.put(key, commonValue);\r\n    }\r\n    \r\n    public void add(K key, V newValue) {\r\n        setAll(newValue);\r\n        map.put(key, commonValue);\r\n    }\r\n    \r\n    public V get(K key) {\r\n        if (!map.containsKey(key)) throw new NoSuchElementException();\r\n        \r\n        return commonValue;\r\n    }\r\n}\r\n```\r\nAnd since we are no longer using the actual `HashMap`&#39;s functionality for storing the values, `HashMap` can be replaced with `HashSet`:\r\n```\r\npublic class SingleValueMap&lt;K, V&gt; {\r\n    private Set&lt;K&gt; set = new HashSet&lt;&gt;();\r\n    private V commonValue;\r\n    \r\n    public void setAll(V newValue) {\r\n        this.commonValue = newValue;\r\n    }\r\n    \r\n    public void add(K key) {\r\n        set.add(key);\r\n    }\r\n    \r\n    public void add(K key, V newValue) {\r\n        setAll(newValue);\r\n        set.add(key);\r\n    }\r\n    \r\n    public V get(K key) {\r\n        if (!set.contains(key)) throw new NoSuchElementException();\r\n        \r\n        return commonValue;\r\n    }\r\n}\r\n```","title":"Data Structure that performs set(), get(), setAll() in O(1)","body":"<p>If you want to enhance your knowledge of <em>Data Structures</em>, I suggest you to implement your own version of <a href=\"https://en.wikipedia.org/wiki/Hash_table\" rel=\"nofollow noreferrer\"><em>Hash table</em></a> data structure from the ground up (<em>define an array of buckets, learn how to store elements in a bucket, how to resolve collisions and so on...</em>) instead of decorating the <code>HashMap</code>.</p>\n<p>Your current code is very contrived:</p>\n<ul>\n<li>By its nature, <code>get()</code> should not do anything apart from retrieving a value associated with a key because that's the only responsibility of this method (have a look at the implementation of <code>get()</code> in the <code>HashMap</code> class). Get familiar with the <a href=\"https://en.wikipedia.org/wiki/Single-responsibility_principle\" rel=\"nofollow noreferrer\"><em>Single responsibility principle</em></a>.</li>\n<li>The idea of throwing an exception when the given <em>key</em> isn't present in the map is strange. And <code>NullPointerException</code> is not the right type of exception to describe this case, <code>NoSuchElementException</code> would be more intuitive.</li>\n<li>You might also be interested in learning <a href=\"https://stackoverflow.com/questions/383947/what-does-it-mean-to-program-to-an-interface\">What does it mean to &quot;program to an interface&quot;?</a></li>\n</ul>\n<p>And the main point is that is because you've picked the wrong starting point (<em>see the advice at the very beginning</em>), learn more about data structures starting from the simplest like <a href=\"https://en.wikipedia.org/wiki/Dynamic_array\" rel=\"nofollow noreferrer\"><em>Dynamic array</em></a>, try to implement them from scratch, and gradually learn more about the class design and language features.</p>\n<h3>Time complexity</h3>\n<p>Regarding the time complexity, since your class decorates a <code>HashMap</code> methods <code>set()</code> and <code>get()</code> would perform in a constant time <strong>O(1)</strong>.</p>\n<p>If you need to change <strong>all</strong> the <strong>values</strong> in a <code>HashMap</code>, that could be done only a linear time <strong>O(n)</strong>. Assuming that all existing <em>values</em> are represented by objects that are <strong>distinct</strong> from one another, it's inherently impossible to perform this operation in a constant time because we need to do this change for every <em>node</em> in each <em>bucket</em>.</p>\n<p>The only situation when all values can be set to a <em>new value</em> in a constant time is the following very contrived example where each and every <em>key</em> would be associated with the <strong>same object</strong>, and we need to maintain a reference to this object (<em>i.e. it would always retrieve the same value for every key that is present, which doesn't seem to be particularly useful</em>):</p>\n<pre><code>public class SingleValueMap&lt;K, V&gt; {\n    private Map&lt;K, V&gt; map = new HashMap&lt;&gt;();\n    private V commonValue;\n    \n    public void setAll(V newValue) {\n        this.commonValue = newValue;\n    }\n    \n    public void add(K key) {\n        map.put(key, commonValue);\n    }\n    \n    public void add(K key, V newValue) {\n        setAll(newValue);\n        map.put(key, commonValue);\n    }\n    \n    public V get(K key) {\n        if (!map.containsKey(key)) throw new NoSuchElementException();\n        \n        return commonValue;\n    }\n}\n</code></pre>\n<p>And since we are no longer using the actual <code>HashMap</code>'s functionality for storing the values, <code>HashMap</code> can be replaced with <code>HashSet</code>:</p>\n<pre><code>public class SingleValueMap&lt;K, V&gt; {\n    private Set&lt;K&gt; set = new HashSet&lt;&gt;();\n    private V commonValue;\n    \n    public void setAll(V newValue) {\n        this.commonValue = newValue;\n    }\n    \n    public void add(K key) {\n        set.add(key);\n    }\n    \n    public void add(K key, V newValue) {\n        setAll(newValue);\n        set.add(key);\n    }\n    \n    public V get(K key) {\n        if (!set.contains(key)) throw new NoSuchElementException();\n        \n        return commonValue;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":20364729,"reputation":125,"user_id":17355412,"display_name":"Xavi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":701,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1655084517,"accepted_answer_id":72592945,"answer_count":2,"score":0,"last_activity_date":1655067973,"creation_date":1655031029,"question_id":72591504,"body_markdown":"I&#39;m trying to write a data structure that is capable to set all the *Values* in **O(1)**.\r\n  \r\n*My code*:  \r\n\r\n    public class myData {\r\n        boolean setAllStatus = false;\r\n        HashMap&lt;Integer, Integer&gt; hasMap = new HashMap&lt;&gt;();\r\n        int setAllValue = 0;\r\n        int count = 0;\r\n        public void set(int key, int value) {\r\n            hasMap.put(key, value);\r\n        }\r\n        public int get(int key) {\r\n            if (setAllStatus) {\r\n                if (hasMap.get(key) != null) {\r\n                    if (count == hasMap.size()) {\r\n                        return setAllValue;\r\n                    } else {\r\n                        // do something\r\n                    }\r\n                } else {\r\n                    throw new NullPointerException();\r\n                }\r\n            } else {\r\n                if (hasMap.get(key) == null) {\r\n                    throw new NullPointerException();\r\n                } else {\r\n                    return hasMap.get(key);\r\n                }\r\n            }\r\n        }\r\n        public void setAll(int value) {\r\n            setAllStatus = true;\r\n            setAllValue = value;\r\n            count = hasMap.size();\r\n        }\r\n        public static void main(String[] args) {\r\n            myData m = new myData();\r\n            m.set(1, 4);\r\n            m.set(4, 5);\r\n            System.out.println(m.get(4)); // 5\r\n            m.setAll(6);\r\n            System.out.println(m.get(4)); // 6\r\n            m.set(8, 7);\r\n            System.out.println(m.get(8)); // 7\r\n        }\r\n    }\r\nWhen I set variables for the first time and then set all the values to a specific variable it works, but when I try to put a new variable after setting all the variables I&#39;m a bit confused. \r\n\r\nWhat kind of solution can I use to make it work?","title":"Data Structure that performs set(), get(), setAll() in O(1)","body":"<p>I'm trying to write a data structure that is capable to set all the <em>Values</em> in <strong>O(1)</strong>.</p>\n<p><em>My code</em>:</p>\n<pre><code>public class myData {\n    boolean setAllStatus = false;\n    HashMap&lt;Integer, Integer&gt; hasMap = new HashMap&lt;&gt;();\n    int setAllValue = 0;\n    int count = 0;\n    public void set(int key, int value) {\n        hasMap.put(key, value);\n    }\n    public int get(int key) {\n        if (setAllStatus) {\n            if (hasMap.get(key) != null) {\n                if (count == hasMap.size()) {\n                    return setAllValue;\n                } else {\n                    // do something\n                }\n            } else {\n                throw new NullPointerException();\n            }\n        } else {\n            if (hasMap.get(key) == null) {\n                throw new NullPointerException();\n            } else {\n                return hasMap.get(key);\n            }\n        }\n    }\n    public void setAll(int value) {\n        setAllStatus = true;\n        setAllValue = value;\n        count = hasMap.size();\n    }\n    public static void main(String[] args) {\n        myData m = new myData();\n        m.set(1, 4);\n        m.set(4, 5);\n        System.out.println(m.get(4)); // 5\n        m.setAll(6);\n        System.out.println(m.get(4)); // 6\n        m.set(8, 7);\n        System.out.println(m.get(8)); // 7\n    }\n}\n</code></pre>\n<p>When I set variables for the first time and then set all the values to a specific variable it works, but when I try to put a new variable after setting all the variables I'm a bit confused.</p>\n<p>What kind of solution can I use to make it work?</p>\n"},{"tags":["java","jmh"],"answers":[{"tags":[],"owner":{"account_id":17228781,"reputation":3548,"user_id":12473843,"display_name":"Sergey Tsypanov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1655067823,"creation_date":1655067823,"answer_id":72595860,"question_id":72589730,"body_markdown":"You can run the benchmark programatically and access its result:\r\n```java\r\npublic class BenchmarkRunner {\r\n\r\n  public static void main(String[] args) throws Exception {\r\n    Options opt = new OptionsBuilder()\r\n            .include(YourBenchmark.class.getSimpleName())\r\n            .warmupIterations(10)\r\n            .warmupTime(TimeValue.seconds(1))\r\n            .measurementIterations(10)\r\n            .measurementTime(TimeValue.seconds(2))\r\n            .forks(5)\r\n            .shouldFailOnError(true)\r\n            .build();\r\n\r\n    Collection&lt;RunResult&gt; runResults = new Runner(opt).run();\r\n    runResults.forEach(runResult -&gt; {\r\n      Result primaryResult = runResult.getPrimaryResult();\r\n      double score = primaryResult.getScore(); // &lt;-- here&#39;s the score of your benchmark\r\n    });\r\n  }\r\n}\r\n```","title":"Java Microbenchmark Harness - how to get the duration of a Benchmark?","body":"<p>You can run the benchmark programatically and access its result:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class BenchmarkRunner {\n\n  public static void main(String[] args) throws Exception {\n    Options opt = new OptionsBuilder()\n            .include(YourBenchmark.class.getSimpleName())\n            .warmupIterations(10)\n            .warmupTime(TimeValue.seconds(1))\n            .measurementIterations(10)\n            .measurementTime(TimeValue.seconds(2))\n            .forks(5)\n            .shouldFailOnError(true)\n            .build();\n\n    Collection&lt;RunResult&gt; runResults = new Runner(opt).run();\n    runResults.forEach(runResult -&gt; {\n      Result primaryResult = runResult.getPrimaryResult();\n      double score = primaryResult.getScore(); // &lt;-- here's the score of your benchmark\n    });\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":1044029,"reputation":1363,"user_id":1049393,"accept_rate":67,"display_name":"coderodde"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":181,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":72595860,"answer_count":1,"score":1,"last_activity_date":1655067823,"creation_date":1655012116,"question_id":72589730,"body_markdown":"Suppose I have\r\n\r\n    @Benchmark\r\n    @OutputTimeUnit(TimeUnit.MICROSECONDS)\r\n    public void foo() {\r\n        for (int i = 0; i &lt; 1000; i++) {\r\n            System.out.println(i);\r\n        }\r\n    }\r\n\r\nand it runs, say, in 300 microseconds.\r\n\r\nQuestion: is there any way of obtaining an `int/long` with the value of 300?","title":"Java Microbenchmark Harness - how to get the duration of a Benchmark?","body":"<p>Suppose I have</p>\n<pre><code>@Benchmark\n@OutputTimeUnit(TimeUnit.MICROSECONDS)\npublic void foo() {\n    for (int i = 0; i &lt; 1000; i++) {\n        System.out.println(i);\n    }\n}\n</code></pre>\n<p>and it runs, say, in 300 microseconds.</p>\n<p>Question: is there any way of obtaining an <code>int/long</code> with the value of 300?</p>\n"},{"tags":["java","json","serialization","gson"],"answers":[{"tags":[],"owner":{"account_id":298886,"reputation":40480,"user_id":605153,"accept_rate":67,"display_name":"Mark Bramnik"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1571465553,"creation_date":1571465553,"answer_id":58461012,"question_id":58460861,"body_markdown":"CharSequence is an interface.\n\nWhen Gson tries to deserialize a json string into an object it “introspects” the object (by using reflection) and tries to resolve the types of fields.\nThen it tries to create a field of that time.\n\nOut of the box Gson can deal with many “widespread” types like String, Integer, Boolean and so forth, however when its something GSon is not aware of (Like CharSequence in this case), GSon stops with Error.\n\nNow its clear that you should “teach” Gson to understand this custom type. \nFor this purpose there are type adapters in Gson. \n\n[Here][1] you can find a short tutorial on using the adapters.\nI won’t re-write here an example from there, but in general you should create an adapter, register it on Gson object and call your code. When Gson reaches the CharSequence field it will find this custom adapter and invoke it\n\n\n  [1]: https://www.tutorialspoint.com/gson/gson_custom_adapters.htm","title":"Deserialize a class containing java.lang.CharSequence member variable","body":"<p>CharSequence is an interface.</p>\n\n<p>When Gson tries to deserialize a json string into an object it “introspects” the object (by using reflection) and tries to resolve the types of fields.\nThen it tries to create a field of that time.</p>\n\n<p>Out of the box Gson can deal with many “widespread” types like String, Integer, Boolean and so forth, however when its something GSon is not aware of (Like CharSequence in this case), GSon stops with Error.</p>\n\n<p>Now its clear that you should “teach” Gson to understand this custom type. \nFor this purpose there are type adapters in Gson. </p>\n\n<p><a href=\"https://www.tutorialspoint.com/gson/gson_custom_adapters.htm\" rel=\"nofollow noreferrer\">Here</a> you can find a short tutorial on using the adapters.\nI won’t re-write here an example from there, but in general you should create an adapter, register it on Gson object and call your code. When Gson reaches the CharSequence field it will find this custom adapter and invoke it</p>\n"},{"tags":[],"owner":{"account_id":19338558,"reputation":1,"user_id":14138638,"display_name":"Denys_Horbachenko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1607461132,"creation_date":1607457462,"answer_id":65206020,"question_id":58460861,"body_markdown":"You don&#39;t need the `in.beginObject();` line. Without that line, the code  works fine.","title":"Deserialize a class containing java.lang.CharSequence member variable","body":"<p>You don't need the <code>in.beginObject();</code> line. Without that line, the code  works fine.</p>\n"},{"tags":[],"owner":{"account_id":5384013,"reputation":6035,"user_id":4288506,"accept_rate":77,"display_name":"Marcono1234"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1655066349,"creation_date":1655066349,"answer_id":72595727,"question_id":58460861,"body_markdown":"As mentioned in the other answers, Gson has no built-in adapter for `CharSequence` (see [related pull request](https://github.com/google/gson/pull/2012)) and is therefore unable to deserialize it.\r\n\r\nHowever, you can solve this by writing a custom [`TypeAdapter`](https://javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/TypeAdapter.html), such as the following:\r\n\r\n```java\r\nclass CharSequenceTypeAdapter extends TypeAdapter&lt;CharSequence&gt; {\r\n    @Override\r\n    public void write(JsonWriter out, CharSequence value) throws IOException {\r\n        if (value == null) {\r\n            out.nullValue();\r\n        } else {\r\n            // Assumes that value complies with CharSequence.toString() contract\r\n            out.value(value.toString());\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public CharSequence read(JsonReader in) throws IOException {\r\n        if (in.peek() == JsonToken.NULL) {\r\n            // Skip the JSON null\r\n            in.skipValue();\r\n            return null;\r\n        } else {\r\n            return in.nextString();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThis assumes that your `CharSequence` value is encoded as JSON string value (e.g. `&quot;value&quot;`) and not as JSON object (`{ ... }`). For serialization it also assumes that the value you are using complies with the [`CharSequence.toString()`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/CharSequence.html#toString()) contract.\r\n\r\nYou have to register the adapter then with a [`GsonBuilder`](https://javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/GsonBuilder.html) which you use to create the `Gson` instance:\r\n```java\r\nGson gson = new GsonBuilder()\r\n    .registerTypeAdapter(CharSequence.class, new CharSequenceTypeAdapter())\r\n    .create();\r\n```\r\n\r\n---\r\n\r\nAlternatively, if you actually always use `String` as `CharSequence` value then you could also change the field types to `String`, in case that does not have any negative effect on the API of your code.\r\n\r\n","title":"Deserialize a class containing java.lang.CharSequence member variable","body":"<p>As mentioned in the other answers, Gson has no built-in adapter for <code>CharSequence</code> (see <a href=\"https://github.com/google/gson/pull/2012\" rel=\"nofollow noreferrer\">related pull request</a>) and is therefore unable to deserialize it.</p>\n<p>However, you can solve this by writing a custom <a href=\"https://javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/TypeAdapter.html\" rel=\"nofollow noreferrer\"><code>TypeAdapter</code></a>, such as the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class CharSequenceTypeAdapter extends TypeAdapter&lt;CharSequence&gt; {\n    @Override\n    public void write(JsonWriter out, CharSequence value) throws IOException {\n        if (value == null) {\n            out.nullValue();\n        } else {\n            // Assumes that value complies with CharSequence.toString() contract\n            out.value(value.toString());\n        }\n    }\n\n    @Override\n    public CharSequence read(JsonReader in) throws IOException {\n        if (in.peek() == JsonToken.NULL) {\n            // Skip the JSON null\n            in.skipValue();\n            return null;\n        } else {\n            return in.nextString();\n        }\n    }\n}\n</code></pre>\n<p>This assumes that your <code>CharSequence</code> value is encoded as JSON string value (e.g. <code>&quot;value&quot;</code>) and not as JSON object (<code>{ ... }</code>). For serialization it also assumes that the value you are using complies with the <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/CharSequence.html#toString()\" rel=\"nofollow noreferrer\"><code>CharSequence.toString()</code></a> contract.</p>\n<p>You have to register the adapter then with a <a href=\"https://javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/GsonBuilder.html\" rel=\"nofollow noreferrer\"><code>GsonBuilder</code></a> which you use to create the <code>Gson</code> instance:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Gson gson = new GsonBuilder()\n    .registerTypeAdapter(CharSequence.class, new CharSequenceTypeAdapter())\n    .create();\n</code></pre>\n<hr />\n<p>Alternatively, if you actually always use <code>String</code> as <code>CharSequence</code> value then you could also change the field types to <code>String</code>, in case that does not have any negative effect on the API of your code.</p>\n"}],"owner":{"account_id":6635027,"reputation":193,"user_id":5122405,"display_name":"Dinesh Raj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2857,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":3,"score":4,"last_activity_date":1655066349,"creation_date":1571463823,"question_id":58460861,"body_markdown":"I have a simple class containing `name` variable of type `java.lang.CharSequence`\r\n\r\n        class Person {\r\n    \tpublic java.lang.CharSequence name;\r\n    }\r\n\r\nWhen I try to deserialize a JSON String using GSON library\r\n\r\n            Person p;\r\n    \t\tGson gson = new Gson();\r\n    \t\tString json = &quot;{\\&quot;name\\&quot;:\\&quot;dinesh\\&quot;}&quot;;\r\n    \t\tp = gson.fromJson(json, Person.class);\r\n    \t\tSystem.out.println(p);\r\n\r\nIt gives me the following error:\r\n&gt; java.lang.RuntimeException: Unable to invoke no-args constructor for interface java.lang.CharSequence. Registering an InstanceCreator with Gson for this type may fix this problem.\r\n\r\nHow do I fix this? I cannot change the  `Person.name` type to `String`.\r\n\r\nAs suggested in comments,\r\n\r\nI created a custom adapter for `CharSequence`\r\n\r\n    class CharSequenceAdapter extends TypeAdapter&lt;CharSequence&gt; {\r\n    \r\n    \t@Override\r\n    \tpublic void write(JsonWriter out, CharSequence value) throws IOException {\r\n    \t\t\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic CharSequence read(JsonReader in) throws IOException {\r\n    \t\tString s = new String();\r\n    \t\tin.beginObject();\r\n    \t\twhile(in.hasNext()) {\r\n    \t\t\ts = in.nextString();\r\n    \t\t}\r\n    \t\treturn s;\r\n    \t}\r\n    \t\r\n    }\r\n\r\nAnd my GSON builder looks like this:\r\n\r\n\tPerson p;\r\n\tGsonBuilder builder = new GsonBuilder().registerTypeAdapter(java.lang.CharSequence.class, new CharSequenceAdapter());\r\n\tGson gson = builder.create();\r\n\tString json = &quot;{\\&quot;name\\&quot;:\\&quot;dinesh\\&quot;}&quot;;\r\n\tp = gson.fromJson(json, Person.class);\r\n\tSystem.out.println(p);\r\n\r\nNow it gives me another error:\r\n&gt; Expected BEGIN_OBJECT but was STRING at line 1 column 10 path $.name\r\n\r\nWhat did I miss? \r\n\r\nI don&#39;t think it&#39;s a duplicate. All the other questions talk about deserializing one class or interface as a whole. I am having a problem with a class that has interface references as member variables. I couldn&#39;t solve the problem from similar answers.","title":"Deserialize a class containing java.lang.CharSequence member variable","body":"<p>I have a simple class containing <code>name</code> variable of type <code>java.lang.CharSequence</code></p>\n<pre><code>    class Person {\n    public java.lang.CharSequence name;\n}\n</code></pre>\n<p>When I try to deserialize a JSON String using GSON library</p>\n<pre><code>        Person p;\n        Gson gson = new Gson();\n        String json = &quot;{\\&quot;name\\&quot;:\\&quot;dinesh\\&quot;}&quot;;\n        p = gson.fromJson(json, Person.class);\n        System.out.println(p);\n</code></pre>\n<p>It gives me the following error:</p>\n<blockquote>\n<p>java.lang.RuntimeException: Unable to invoke no-args constructor for interface java.lang.CharSequence. Registering an InstanceCreator with Gson for this type may fix this problem.</p>\n</blockquote>\n<p>How do I fix this? I cannot change the  <code>Person.name</code> type to <code>String</code>.</p>\n<p>As suggested in comments,</p>\n<p>I created a custom adapter for <code>CharSequence</code></p>\n<pre><code>class CharSequenceAdapter extends TypeAdapter&lt;CharSequence&gt; {\n\n    @Override\n    public void write(JsonWriter out, CharSequence value) throws IOException {\n        \n    }\n\n    @Override\n    public CharSequence read(JsonReader in) throws IOException {\n        String s = new String();\n        in.beginObject();\n        while(in.hasNext()) {\n            s = in.nextString();\n        }\n        return s;\n    }\n    \n}\n</code></pre>\n<p>And my GSON builder looks like this:</p>\n<pre><code>Person p;\nGsonBuilder builder = new GsonBuilder().registerTypeAdapter(java.lang.CharSequence.class, new CharSequenceAdapter());\nGson gson = builder.create();\nString json = &quot;{\\&quot;name\\&quot;:\\&quot;dinesh\\&quot;}&quot;;\np = gson.fromJson(json, Person.class);\nSystem.out.println(p);\n</code></pre>\n<p>Now it gives me another error:</p>\n<blockquote>\n<p>Expected BEGIN_OBJECT but was STRING at line 1 column 10 path $.name</p>\n</blockquote>\n<p>What did I miss?</p>\n<p>I don't think it's a duplicate. All the other questions talk about deserializing one class or interface as a whole. I am having a problem with a class that has interface references as member variables. I couldn't solve the problem from similar answers.</p>\n"},{"tags":["java","object","priority-queue","max-heap"],"comments":[{"owner":{"account_id":16370655,"reputation":1878,"user_id":11983046,"display_name":"Ryan Zhang"},"score":1,"creation_date":1655054089,"post_id":72594312,"comment_id":128234161,"body_markdown":"No, looking through the heap means traversing it and defeating the purpose of its structure, worsening your time complexity. Use a balanced binary search tree or order statistics tree instead.","body":"No, looking through the heap means traversing it and defeating the purpose of its structure, worsening your time complexity. Use a balanced binary search tree or order statistics tree instead."},{"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"score":1,"creation_date":1655054473,"post_id":72594312,"comment_id":128234250,"body_markdown":"Are there any restrictions regarding runtime and space complexity?","body":"Are there any restrictions regarding runtime and space complexity?"},{"owner":{"account_id":5030334,"reputation":1521,"user_id":4040743,"accept_rate":77,"display_name":"Pete"},"score":0,"creation_date":1655055153,"post_id":72594312,"comment_id":128234399,"body_markdown":"@Eritrean No particular restrictions, but I&#39;d like a reasonable solution - no O(n^2) solution, if possible.  I&#39;m imagining that this is a coding interview question.","body":"@Eritrean No particular restrictions, but I&#39;d like a reasonable solution - no O(n^2) solution, if possible.  I&#39;m imagining that this is a coding interview question."},{"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"score":1,"creation_date":1655055400,"post_id":72594312,"comment_id":128234444,"body_markdown":"I don&#39;t see what the problem has to do with a priority queue. You can just group by the elements, then sort by size of resulting collection.","body":"I don&#39;t see what the problem has to do with a priority queue. You can just group by the elements, then sort by size of resulting collection."},{"owner":{"account_id":5030334,"reputation":1521,"user_id":4040743,"accept_rate":77,"display_name":"Pete"},"score":0,"creation_date":1655056233,"post_id":72594312,"comment_id":128234605,"body_markdown":"@daniu Yeah, you&#39;re prob right.  The &quot;K most frequent&quot; phrasing in the problem statement made me think that this was a MaxHeap problem.","body":"@daniu Yeah, you&#39;re prob right.  The &quot;K most frequent&quot; phrasing in the problem statement made me think that this was a MaxHeap problem."},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":1,"creation_date":1655066307,"post_id":72594312,"comment_id":128236548,"body_markdown":"@daniu When `k` is mach less than array length, there would be a significant difference in performance between sorting and utilizing `PriorityQueue` &amp; `Map`. And since it&#39;s an algorithmic question - performance matters.","body":"@daniu When <code>k</code> is mach less than array length, there would be a significant difference in performance between sorting and utilizing <code>PriorityQueue</code> &amp; <code>Map</code>. And since it&#39;s an algorithmic question - performance matters."},{"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"score":1,"creation_date":1655105465,"post_id":72594312,"comment_id":128242398,"body_markdown":"@AlexanderIvanchenko I&#39;d argue readability &gt; performance until an actual problem comes up, but long discussions have been led about that elsewhere. Either way, even if I were to optimize performance, I&#39;d rather write my own `Collector` rather than using a `PriorityQueue` since I&#39;d find that misleading.","body":"@AlexanderIvanchenko I&#39;d argue readability &gt; performance until an actual problem comes up, but long discussions have been led about that elsewhere. Either way, even if I were to optimize performance, I&#39;d rather write my own <code>Collector</code> rather than using a <code>PriorityQueue</code> since I&#39;d find that misleading."},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":1,"creation_date":1655130975,"post_id":72594312,"comment_id":128251910,"body_markdown":"@daniu *Collector rather than using a PriorityQueue* Judging by your comment that interposes `PriorityQueue` and `Collector` you have a very poor understanding on how Collectors work. Collector is **not** a Data structure implementation! Streams and Collectors are not a substitution for algorithms - google the difference between the algorithm and implementation. Every collector is based on a mutable object like a Collection, StrringBuilder, array, etc.  And *accumulator* function defines how this mutable container has to be populated.","body":"@daniu <i>Collector rather than using a PriorityQueue</i> Judging by your comment that interposes <code>PriorityQueue</code> and <code>Collector</code> you have a very poor understanding on how Collectors work. Collector is <b>not</b> a Data structure implementation! Streams and Collectors are not a substitution for algorithms - google the difference between the algorithm and implementation. Every collector is based on a mutable object like a Collection, StrringBuilder, array, etc.  And <i>accumulator</i> function defines how this mutable container has to be populated."},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":1,"creation_date":1655130993,"post_id":72594312,"comment_id":128251918,"body_markdown":"@daniu If you think that if you cram a complex algorithm into a collector it would become more readable, you misunderstand the purpose of collectors, which is to facilitate mutable reduction which is **frequently** performed with **streams**. And you probably never tried to write a custom collector (if did, you would never claim that). I kindly advise you to get familiar with documentation and standard collectors built-in in the JDK.","body":"@daniu If you think that if you cram a complex algorithm into a collector it would become more readable, you misunderstand the purpose of collectors, which is to facilitate mutable reduction which is <b>frequently</b> performed with <b>streams</b>. And you probably never tried to write a custom collector (if did, you would never claim that). I kindly advise you to get familiar with documentation and standard collectors built-in in the JDK."},{"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"score":1,"creation_date":1655192308,"post_id":72594312,"comment_id":128267164,"body_markdown":"@AlexanderIvanchenko I&#39;ve written enough Collectors to know that in the end, they are exactly that, data structures optimized towards the specific use case, offering access/aggregation methods compatible with the `Collector.of` signature. And as I&#39;ve stated above, one should only do this with a good reason which would render readability less important. Which is very rarely the case, since your original point about performance is only relevant in very extreme cases with millions of array entries - and even then, it would require measurements to evaluate runtime behavior.","body":"@AlexanderIvanchenko I&#39;ve written enough Collectors to know that in the end, they are exactly that, data structures optimized towards the specific use case, offering access/aggregation methods compatible with the <code>Collector.of</code> signature. And as I&#39;ve stated above, one should only do this with a good reason which would render readability less important. Which is very rarely the case, since your original point about performance is only relevant in very extreme cases with millions of array entries - and even then, it would require measurements to evaluate runtime behavior."},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":1,"creation_date":1655198931,"post_id":72594312,"comment_id":128269570,"body_markdown":"@daniu Collectors are not Data structure implementations. Take a time a get familiar with the basic definition of the [`Data structure`](https://en.wikipedia.org/wiki/Data_structure). Data structures are meant to provide extensive support for managing the data:  add a new element, remove existing, set existing element, perform contains check, etc. You **can&#39;t** do any of these operations on a Collector, because Collector is a **one-time-use mean of reduction** which is intended to be used only internally by a stream pipeline, and not a Data structure implementation by any means.","body":"@daniu Collectors are not Data structure implementations. Take a time a get familiar with the basic definition of the <a href=\"https://en.wikipedia.org/wiki/Data_structure\" rel=\"nofollow noreferrer\"><code>Data structure</code></a>. Data structures are meant to provide extensive support for managing the data:  add a new element, remove existing, set existing element, perform contains check, etc. You <b>can&#39;t</b> do any of these operations on a Collector, because Collector is a <b>one-time-use mean of reduction</b> which is intended to be used only internally by a stream pipeline, and not a Data structure implementation by any means."}],"answers":[{"tags":[],"owner":{"account_id":25534979,"reputation":1204,"user_id":19322223,"display_name":"Haoliang"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1655054649,"creation_date":1655054649,"answer_id":72594409,"question_id":72594312,"body_markdown":"You can first use a HashMap to count the frequencies of all the numbers in the given array.\r\n\r\nThen iterate through the hashmap to create the `CountedInts` objects and insert those objects into the priority queue.","title":"Java Priority Queue of Objects :: A way to check an object&#39;s member?","body":"<p>You can first use a HashMap to count the frequencies of all the numbers in the given array.</p>\n<p>Then iterate through the hashmap to create the <code>CountedInts</code> objects and insert those objects into the priority queue.</p>\n"},{"tags":[],"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1655056436,"creation_date":1655056436,"answer_id":72594621,"question_id":72594312,"body_markdown":"An approach using streams, which I think is somehow self documenting:\r\n\r\nStream over your array, group by identity and map to frequency using `Collectors.counting`, stream over the resulting map, sort entries by value in reverse order, limit the stream to `k` elements, and map to key\r\n\r\n    public int[] topKFrequent(int[] nums, int k) {\r\n        return Arrays.stream(nums)\r\n                     .boxed()\r\n                     .collect(Collectors.groupingBy(Function.identity(), Collectors.counting()))\r\n                     .entrySet().stream()\r\n                     .sorted(Map.Entry.&lt;Integer, Long&gt;comparingByValue().reversed())\r\n                     .limit(k)\r\n                     .map(Map.Entry::getKey)\r\n                     .mapToInt(Integer::intValue)\r\n                     .toArray();\r\n    }","title":"Java Priority Queue of Objects :: A way to check an object&#39;s member?","body":"<p>An approach using streams, which I think is somehow self documenting:</p>\n<p>Stream over your array, group by identity and map to frequency using <code>Collectors.counting</code>, stream over the resulting map, sort entries by value in reverse order, limit the stream to <code>k</code> elements, and map to key</p>\n<pre><code>public int[] topKFrequent(int[] nums, int k) {\n    return Arrays.stream(nums)\n                 .boxed()\n                 .collect(Collectors.groupingBy(Function.identity(), Collectors.counting()))\n                 .entrySet().stream()\n                 .sorted(Map.Entry.&lt;Integer, Long&gt;comparingByValue().reversed())\n                 .limit(k)\n                 .map(Map.Entry::getKey)\n                 .mapToInt(Integer::intValue)\n                 .toArray();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1655065989,"creation_date":1655065989,"answer_id":72595677,"question_id":72594312,"body_markdown":"As described in the answer by *@Haoliang*, you can generate a `Map` containing a frequency of each number in the source array. And then populate a `PriorityQueue` with entries of this map.\r\n\r\nThis approach would more performant than sorting all the entries, especially when `k` is much lower than the number element in the array.\r\n\r\nThat is how the code might look like:\r\n\r\n    public static int[] topKFrequent(int[] nums, int k) {\r\n        int[] result = new int[k];\r\n        \r\n        Map&lt;Integer, Integer&gt; freq = getFrequencies(nums);\r\n        \r\n        Queue&lt;Map.Entry&lt;Integer, Integer&gt;&gt; entries = populateQueue(freq);\r\n        \r\n        for (int i = 0; i &lt; result.length; i++) {\r\n            result[i] = entries.remove().getKey();\r\n        }\r\n        return result;\r\n    }\r\n\r\nJava 8 method [`merge()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html#merge(K,V,java.util.function.BiFunction)) is used to make the code for generating the map frequencies more concise:\r\n\r\n    public static Map&lt;Integer, Integer&gt; getFrequencies(int[] arr) {\r\n        Map&lt;Integer, Integer&gt; hist = new HashMap&lt;&gt;();\r\n        for (int next: arr) {\r\n            hist.merge(next, 1, Integer::sum);\r\n        }\r\n        return hist;\r\n    }\r\n\r\nThe method provided below creates a *Max Heap* using `PriorityQueue` and populates it with entries of the *map*:\r\n\r\n    public static Queue&lt;Map.Entry&lt;Integer, Integer&gt;&gt; populateQueue(Map&lt;Integer, Integer&gt; hist) {\r\n        Queue&lt;Map.Entry&lt;Integer, Integer&gt;&gt; entries =\r\n            new PriorityQueue&lt;&gt;(Map.Entry.&lt;Integer, Integer&gt;comparingByValue().reversed());\r\n    \r\n        entries.addAll(hist.entrySet());\r\n        return entries;\r\n    }\r\n\r\n`main()`\r\n\r\n    public static void main(String[] args) {\r\n        int[] nums = {1, 1, 1, 2, 2, 3};\r\n        System.out.println(Arrays.toString(topKFrequent(nums, 2)));\r\n        \r\n        nums = new int[]{1};\r\n        System.out.println(Arrays.toString(topKFrequent(nums, 1)));\r\n    }\r\n\r\n*Output:*\r\n```\r\n[1, 2]\r\n[1]\r\n```","title":"Java Priority Queue of Objects :: A way to check an object&#39;s member?","body":"<p>As described in the answer by <em>@Haoliang</em>, you can generate a <code>Map</code> containing a frequency of each number in the source array. And then populate a <code>PriorityQueue</code> with entries of this map.</p>\n<p>This approach would more performant than sorting all the entries, especially when <code>k</code> is much lower than the number element in the array.</p>\n<p>That is how the code might look like:</p>\n<pre><code>public static int[] topKFrequent(int[] nums, int k) {\n    int[] result = new int[k];\n    \n    Map&lt;Integer, Integer&gt; freq = getFrequencies(nums);\n    \n    Queue&lt;Map.Entry&lt;Integer, Integer&gt;&gt; entries = populateQueue(freq);\n    \n    for (int i = 0; i &lt; result.length; i++) {\n        result[i] = entries.remove().getKey();\n    }\n    return result;\n}\n</code></pre>\n<p>Java 8 method <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html#merge(K,V,java.util.function.BiFunction)\" rel=\"nofollow noreferrer\"><code>merge()</code></a> is used to make the code for generating the map frequencies more concise:</p>\n<pre><code>public static Map&lt;Integer, Integer&gt; getFrequencies(int[] arr) {\n    Map&lt;Integer, Integer&gt; hist = new HashMap&lt;&gt;();\n    for (int next: arr) {\n        hist.merge(next, 1, Integer::sum);\n    }\n    return hist;\n}\n</code></pre>\n<p>The method provided below creates a <em>Max Heap</em> using <code>PriorityQueue</code> and populates it with entries of the <em>map</em>:</p>\n<pre><code>public static Queue&lt;Map.Entry&lt;Integer, Integer&gt;&gt; populateQueue(Map&lt;Integer, Integer&gt; hist) {\n    Queue&lt;Map.Entry&lt;Integer, Integer&gt;&gt; entries =\n        new PriorityQueue&lt;&gt;(Map.Entry.&lt;Integer, Integer&gt;comparingByValue().reversed());\n\n    entries.addAll(hist.entrySet());\n    return entries;\n}\n</code></pre>\n<p><code>main()</code></p>\n<pre><code>public static void main(String[] args) {\n    int[] nums = {1, 1, 1, 2, 2, 3};\n    System.out.println(Arrays.toString(topKFrequent(nums, 2)));\n    \n    nums = new int[]{1};\n    System.out.println(Arrays.toString(topKFrequent(nums, 1)));\n}\n</code></pre>\n<p><em>Output:</em></p>\n<pre><code>[1, 2]\n[1]\n</code></pre>\n"}],"owner":{"account_id":5030334,"reputation":1521,"user_id":4040743,"accept_rate":77,"display_name":"Pete"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":612,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":72594409,"answer_count":3,"score":2,"last_activity_date":1655065989,"creation_date":1655053741,"question_id":72594312,"body_markdown":"Suppose I have an array of integers:\r\n\r\n    [ 1,2,3,4,5,6,1,2,3,1,2... ]\r\n\r\nI want to know the K most frequent elements.  The phrase &quot;*K most frequent*&quot; immediately makes me think of a Max Heap data structure, so I&#39;ve decided to create a custom object to both count and prioritize elements:\r\n\r\n    public class countedInts implements Comparable&lt;countedInts&gt;{\r\n    \tpublic int theInt, count;\r\n    \tpublic countedInts(int a, int b) {\r\n    \t\tthis.theInt = a;\r\n    \t\tthis.count = b;\r\n    \t}\r\n    \t@Override\r\n    \tpublic int compareTo(countedInts o) {\r\n    \t\treturn this.count - o.count;\r\n    \t}\r\n    }\r\n\r\nThis object is essentially two ints, paired together.  Simple.\r\n\r\nOkay: now for the main code:\r\n\r\n\tpublic int[] topKFreq(int[] arr, int k) {\r\n\r\n\t\tPriorityQueue&lt;countedInts&gt; maxHeap = new PriorityQueue&lt;&gt;(Collections.reverseOrder());\r\n\r\n\t\tfor( int i=0; i&lt;arr.length; i++ ) {\r\n\t\t\t// If arr[i] is not tracked with a countedInts object:\r\n                maxHeap.offer( new countedInts(arr[i], 1) );\r\n            // But if arr[i] is already stored within a countedInts object...\r\n                countedInts tmp = maxHeap.get( ??? );\r\n                tmp.count++;\r\n                maxHeap.offer( tmp );\r\n\t\t}\r\n    }\r\n\r\nYou see the problem.  As I consider the elements in `arr`, I need a way to check `maxHeap` to see if I have an `countedInts` object already checking the element.  I need to look at ***the member of the object*** within the PriorityQueue.  Is there a way to do this?  Or is there a better strategy to this problem.\r\n\r\nFULL DISCLOSURE:  Yes, this is [a LeetCode problem][1].  I always like to research a solution before I give up and look at the solution.  That&#39;s a better way to learn.\r\n\r\n\r\n  [1]: https://leetcode.com/problems/top-k-frequent-elements/\r\n\r\n\r\n=======================================================================\r\n\r\n[EDIT]  ::  A user suggested the below strategy, which worked.  Posted in case it can help others...\r\n\r\n    public class countedInts implements Comparable&lt;countedInts&gt;{\r\n\t\tpublic int theInt, count;\r\n\t\tpublic countedInts(int a, int b) {\r\n\t\t\tthis.theInt = a;\r\n\t\t\tthis.count = b;\r\n\t\t}\r\n\t\t@Override\r\n\t\tpublic int compareTo(countedInts o) {\r\n\t\t\treturn this.count - o.count;\r\n\t\t}\r\n\t}\r\n\r\n    \r\n    public int[] topKFrequent(int[] arr, int k) {\r\n\r\n\t\t// Edge cases\r\n\t\tif( arr == null ) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\telse if( arr.length == 0 ) {\r\n\t\t\treturn arr;\r\n\t\t}\r\n\t\t\r\n\t\tint[] ret = new int[k];\r\n\t\tHashMap&lt;Integer,Integer&gt; myMap = new HashMap&lt;&gt;();\r\n\t\tPriorityQueue&lt;countedInts&gt; maxHeap = new PriorityQueue&lt;&gt;(Collections.reverseOrder());\r\n\r\n\t\t// Populate HashMap\r\n\t\tfor( int i=0; i&lt;arr.length; i++ ) {\r\n\t\t\tif( !myMap.containsKey(arr[i]) ) {\r\n\t\t\t\tmyMap.put(arr[i], 1);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tmyMap.put(arr[i], myMap.get(arr[i])+1);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Transfer data into MaxHeap\r\n\t\tfor( Map.Entry&lt;Integer, Integer&gt; glork : myMap.entrySet() ) {\r\n\t\t\tmaxHeap.offer( new countedInts(glork.getKey(), glork.getValue()) );\r\n\t\t}\r\n\r\n\t\t// Pick out K-most values\r\n\t\tfor( int i=0; i&lt;k; i++ ) {\r\n\t\t\tcountedInts tmp = maxHeap.poll();\r\n\t\t\tret[i] = tmp.theInt;\r\n\t\t}\r\n\r\n\t\treturn ret;\r\n\t}","title":"Java Priority Queue of Objects :: A way to check an object&#39;s member?","body":"<p>Suppose I have an array of integers:</p>\n<pre><code>[ 1,2,3,4,5,6,1,2,3,1,2... ]\n</code></pre>\n<p>I want to know the K most frequent elements.  The phrase &quot;<em>K most frequent</em>&quot; immediately makes me think of a Max Heap data structure, so I've decided to create a custom object to both count and prioritize elements:</p>\n<pre><code>public class countedInts implements Comparable&lt;countedInts&gt;{\n    public int theInt, count;\n    public countedInts(int a, int b) {\n        this.theInt = a;\n        this.count = b;\n    }\n    @Override\n    public int compareTo(countedInts o) {\n        return this.count - o.count;\n    }\n}\n</code></pre>\n<p>This object is essentially two ints, paired together.  Simple.</p>\n<p>Okay: now for the main code:</p>\n<pre><code>public int[] topKFreq(int[] arr, int k) {\n\n    PriorityQueue&lt;countedInts&gt; maxHeap = new PriorityQueue&lt;&gt;(Collections.reverseOrder());\n\n    for( int i=0; i&lt;arr.length; i++ ) {\n        // If arr[i] is not tracked with a countedInts object:\n            maxHeap.offer( new countedInts(arr[i], 1) );\n        // But if arr[i] is already stored within a countedInts object...\n            countedInts tmp = maxHeap.get( ??? );\n            tmp.count++;\n            maxHeap.offer( tmp );\n    }\n}\n</code></pre>\n<p>You see the problem.  As I consider the elements in <code>arr</code>, I need a way to check <code>maxHeap</code> to see if I have an <code>countedInts</code> object already checking the element.  I need to look at <em><strong>the member of the object</strong></em> within the PriorityQueue.  Is there a way to do this?  Or is there a better strategy to this problem.</p>\n<p>FULL DISCLOSURE:  Yes, this is <a href=\"https://leetcode.com/problems/top-k-frequent-elements/\" rel=\"nofollow noreferrer\">a LeetCode problem</a>.  I always like to research a solution before I give up and look at the solution.  That's a better way to learn.</p>\n<p>=======================================================================</p>\n<p>[EDIT]  ::  A user suggested the below strategy, which worked.  Posted in case it can help others...</p>\n<pre><code>public class countedInts implements Comparable&lt;countedInts&gt;{\n    public int theInt, count;\n    public countedInts(int a, int b) {\n        this.theInt = a;\n        this.count = b;\n    }\n    @Override\n    public int compareTo(countedInts o) {\n        return this.count - o.count;\n    }\n}\n\n\npublic int[] topKFrequent(int[] arr, int k) {\n\n    // Edge cases\n    if( arr == null ) {\n        return null;\n    }\n    else if( arr.length == 0 ) {\n        return arr;\n    }\n    \n    int[] ret = new int[k];\n    HashMap&lt;Integer,Integer&gt; myMap = new HashMap&lt;&gt;();\n    PriorityQueue&lt;countedInts&gt; maxHeap = new PriorityQueue&lt;&gt;(Collections.reverseOrder());\n\n    // Populate HashMap\n    for( int i=0; i&lt;arr.length; i++ ) {\n        if( !myMap.containsKey(arr[i]) ) {\n            myMap.put(arr[i], 1);\n        }\n        else {\n            myMap.put(arr[i], myMap.get(arr[i])+1);\n        }\n    }\n\n    // Transfer data into MaxHeap\n    for( Map.Entry&lt;Integer, Integer&gt; glork : myMap.entrySet() ) {\n        maxHeap.offer( new countedInts(glork.getKey(), glork.getValue()) );\n    }\n\n    // Pick out K-most values\n    for( int i=0; i&lt;k; i++ ) {\n        countedInts tmp = maxHeap.poll();\n        ret[i] = tmp.theInt;\n    }\n\n    return ret;\n}\n</code></pre>\n"},{"tags":["java","trigonometry"],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1655064178,"creation_date":1655064178,"answer_id":72595486,"question_id":72595470,"body_markdown":"You&#39;re not converting A to a value in degrees.  It&#39;s still in radians.","title":"Difficulty calculating Law of Sines in Java","body":"<p>You're not converting A to a value in degrees.  It's still in radians.</p>\n"},{"tags":[],"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1655065316,"creation_date":1655065316,"answer_id":72595610,"question_id":72595470,"body_markdown":"call `toDegrees` on your result\r\n\r\n    public static void main(String[] args) {\r\n        double a = 90;\r\n        double A = 0;\r\n        double c = 132.3459;\r\n        double C = 111;\r\n\r\n        A = asin( sin(toRadians(C)) / c * a);\r\n        System.out.println(&quot;Angle &quot; + toDegrees(A));\r\n    }","title":"Difficulty calculating Law of Sines in Java","body":"<p>call <code>toDegrees</code> on your result</p>\n<pre><code>public static void main(String[] args) {\n    double a = 90;\n    double A = 0;\n    double c = 132.3459;\n    double C = 111;\n\n    A = asin( sin(toRadians(C)) / c * a);\n    System.out.println(&quot;Angle &quot; + toDegrees(A));\n}\n</code></pre>\n"}],"owner":{"account_id":20091737,"reputation":11,"user_id":14732075,"display_name":"Depressed Putin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":72595610,"answer_count":2,"score":0,"last_activity_date":1655065316,"creation_date":1655064030,"question_id":72595470,"body_markdown":"In this, I&#39;m trying to follow law of sines in order to find angle A. The correct answer for this is 39.41 but for some reason, I&#39;m not getting the correct inverse sine value. How can I fix this?\r\n\r\n[Visualization of the problem][1]\r\n```\r\nimport static java.lang.Math.*;\r\npublic class test\r\n{\r\n    public static void calculateAzimuth()\r\n    {\r\n        double a = 90;\r\n        double A = 0;\r\n        double c = 132.3459;\r\n        double C = 111;\r\n        \r\n        //         a          C     c\r\n        //sine^-1( 90* ( (sine111) /132.3459)) = A\r\n        C = sin(toRadians(C));\r\n        A = C/c; \r\n        A = (A*a);\r\n        A = asin(A);\r\n        System.out.println(&quot;Angle &quot; + A);\r\n    }\r\n}\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/CS6nC.jpg","title":"Difficulty calculating Law of Sines in Java","body":"<p>In this, I'm trying to follow law of sines in order to find angle A. The correct answer for this is 39.41 but for some reason, I'm not getting the correct inverse sine value. How can I fix this?</p>\n<p><a href=\"https://i.stack.imgur.com/CS6nC.jpg\" rel=\"nofollow noreferrer\">Visualization of the problem</a></p>\n<pre><code>import static java.lang.Math.*;\npublic class test\n{\n    public static void calculateAzimuth()\n    {\n        double a = 90;\n        double A = 0;\n        double c = 132.3459;\n        double C = 111;\n        \n        //         a          C     c\n        //sine^-1( 90* ( (sine111) /132.3459)) = A\n        C = sin(toRadians(C));\n        A = C/c; \n        A = (A*a);\n        A = asin(A);\n        System.out.println(&quot;Angle &quot; + A);\n    }\n}\n</code></pre>\n"},{"tags":["java","html","forms","servlets"],"answers":[{"tags":[],"owner":{"account_id":25481526,"reputation":336,"user_id":19277782,"display_name":"CaptainPyscho"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655064916,"creation_date":1654994898,"answer_id":72588809,"question_id":72580764,"body_markdown":"This is a common issue on Tomcat 10 because the change from Java EE to Jakarta EE, so you can change your project, using Jakarta EE 9\r\n\r\n    &lt;dependency&gt;\r\n            &lt;groupId&gt;jakarta.platform&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jakarta.jakartaee-api&lt;/artifactId&gt;\r\n            &lt;version&gt;9.0.0&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\nand importing this packages\r\n\r\n    import jakarta.servlet.ServletException;\r\n    import jakarta.servlet.annotation.WebServlet;\r\n    import jakarta.servlet.http.HttpServlet;\r\n    import jakarta.servlet.http.HttpServletRequest;\r\n    import jakarta.servlet.http.HttpServletResponse;\r\n\r\nIf you don&#180;t want do that, you can downgrade to Tomcat 9. Don&#180;t forget uncomment \r\n\r\n    //@WebServlet(description = &quot;Loggy Logs&quot;, urlPatterns = { &quot;/LogsServlet&quot; })\r\n\r\nFor related documentation follow this link\r\n\r\n[https://stackoverflow.com/questions/66806582/tomcat-10-0-4-doesnt-load-servlets-webservlet-classes-with-404-error/66808062#66808062][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/66806582/tomcat-10-0-4-doesnt-load-servlets-webservlet-classes-with-404-error/66808062#66808062","title":"Dynamic Web Project, create object with variables submitted by for with GET method","body":"<p>This is a common issue on Tomcat 10 because the change from Java EE to Jakarta EE, so you can change your project, using Jakarta EE 9</p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;jakarta.platform&lt;/groupId&gt;\n        &lt;artifactId&gt;jakarta.jakartaee-api&lt;/artifactId&gt;\n        &lt;version&gt;9.0.0&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>and importing this packages</p>\n<pre><code>import jakarta.servlet.ServletException;\nimport jakarta.servlet.annotation.WebServlet;\nimport jakarta.servlet.http.HttpServlet;\nimport jakarta.servlet.http.HttpServletRequest;\nimport jakarta.servlet.http.HttpServletResponse;\n</code></pre>\n<p>If you don´t want do that, you can downgrade to Tomcat 9. Don´t forget uncomment</p>\n<pre><code>//@WebServlet(description = &quot;Loggy Logs&quot;, urlPatterns = { &quot;/LogsServlet&quot; })\n</code></pre>\n<p>For related documentation follow this link</p>\n<p><a href=\"https://stackoverflow.com/questions/66806582/tomcat-10-0-4-doesnt-load-servlets-webservlet-classes-with-404-error/66808062#66808062\">Tomcat 10.0.4 doesn&#39;t load servlets (@WebServlet classes) with 404 error</a></p>\n"}],"owner":{"account_id":23383632,"reputation":13,"user_id":17449392,"display_name":"Caitlyn Gibbons"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":208,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1655064916,"creation_date":1654905508,"question_id":72580764,"body_markdown":"I am trying to get the values from a form in order to create an object with those values. How would I do this? Also currently when I hit submit I get the http 404 error. I know I&#39;m doing this wrong, I just don&#39;t know how to fix it!\r\n\r\n\r\nI have created the form with the following code:\r\n\r\n    &lt;html lang=&quot;en&quot;&gt;\r\n        &lt;head&gt;\r\n            &lt;title&gt;Example&lt;/title&gt;\r\n        &lt;/head&gt;\r\n        &lt;body&gt;\r\n            &lt;h1&gt;Welcome to Loggy!&lt;/h1&gt;\r\n            \r\n            &lt;form id=&quot;logForm&quot; action=&quot;LogsServlet&quot; method=&quot;GET&quot;&gt;\r\n            &lt;h3&gt;What have you been up to today?&lt;/h3&gt;\r\n            &lt;br&gt;\r\n            &lt;label id=&quot;logTitleLabel&quot; for=&quot;logTitle&quot;&gt;Title :&lt;/label&gt;\r\n            &lt;br&gt;\r\n            &lt;input type=&quot;text&quot; id=&quot;logTitle&quot; name=&quot;logTitle&quot;&gt;\r\n            &lt;br&gt;\r\n            &lt;label id=&quot;logDescriptionLabel&quot; for=&quot;LogDescription&quot;&gt;Description&lt;/label&gt;\r\n            &lt;br&gt;\r\n            &lt;input type=&quot;text&quot; id=&quot;logDescription&quot; name=&quot;logDescription&quot;&gt;\r\n            &lt;label id=&quot;logContentLabel&quot; for=&quot;logContent&quot;&gt;Content :&lt;/label&gt;\r\n            &lt;br&gt;\r\n            &lt;input type=&quot;text&quot; id=&quot;logContent&quot; name=&quot;logContent&quot;&gt;\r\n            &lt;button type=&quot;submit&quot; id=&quot;submitLog&quot;&gt;Submit Log&lt;/button&gt;\r\n            \r\n            &lt;/form&gt;\r\n        &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\nHere are the abstract Log Class and TextLog Class:\r\n\r\n    import java.sql.Timestamp;\r\n    import java.util.Date;\r\n    import java.util.UUID;\r\n    \r\n    public abstract class Log {\r\n        private UUID id;\r\n        private String title;\r\n        private String description;\r\n        private String content;\r\n        private Timestamp createTimestamp;\r\n        \r\n        \r\n        //Constructor \r\n        Log(String title,String description, String content){\r\n        \tthis.setTitle(title);\r\n        \tthis.description=description;\r\n        \tthis.content=content;\r\n        };\r\n        \r\n    \r\n    \tpublic void create() {\r\n        \t//call UUID method\r\n        \tid();\r\n        \t//create new timeStamp\r\n        \tDate date= new Date();\r\n        \tTimestamp createTimestamp = new Timestamp(date.getTime());\r\n        \tthis.createTimestamp=createTimestamp;\r\n        }\r\n        \r\n        public UUID id() {\r\n    \t\tUUID uuid = UUID.randomUUID();\r\n    \t\tid = uuid;\t\r\n    \t\treturn id;\r\n    \t}\r\n    \r\n        \r\n        //GETTERS AND SETTERS\r\n    \tpublic String getTitle() {\r\n    \t\treturn title;\r\n    \t}\r\n    \r\n    \tpublic void setTitle(String title) {\r\n    \t\tthis.title = title;\r\n    \t}\r\n    \t   public UUID getId() {\r\n    \t\t\treturn id;\r\n    \t\t}\r\n    \r\n    \t\tpublic void setId(UUID id) {\r\n    \t\t\tthis.id = id;\r\n    \t\t}\r\n    \r\n    \t\tpublic String getDescription() {\r\n    \t\t\treturn description;\r\n    \t\t}\r\n    \r\n    \t\tpublic void setDescription(String description) {\r\n    \t\t\tthis.description = description;\r\n    \t\t}\r\n    \r\n    \t\tpublic String getContent() {\r\n    \t\t\treturn content;\r\n    \t\t}\r\n    \r\n    \t\tpublic void setContent(String content) {\r\n    \t\t\tthis.content = content;\r\n    \t\t}\r\n    \r\n    \t\tpublic Timestamp getCreateTimestamp() {\r\n    \t\t\treturn createTimestamp;\r\n    \t\t}\r\n    \r\n    \t\tpublic void setCreateTimestamp(Timestamp createTimestamp) {\r\n    \t\t\tthis.createTimestamp = createTimestamp;\r\n    \t\t}\r\n    \r\n      \r\n    }\r\n    \r\n    public class TextLog extends Log {\r\n    \r\n    \tpublic TextLog(String title,String description, String content) {\r\n    \t\tsuper(title,description, content);\r\n    \t\t\r\n    \t}\r\n    \r\n    }\r\n\r\nI am trying to get the values from the form and then create a Log object of type TextLog with the variables submitted in the form. Here is my Servlet:\r\n\r\n    import java.io.IOException;\r\n    import java.io.PrintWriter;\r\n    \r\n    import javax.servlet.ServletException;\r\n    import javax.servlet.http.HttpServlet;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletResponse;\r\n    \r\n    \r\n    \r\n    /**\r\n     * Servlet implementation class LogsServlet\r\n     */\r\n    //@WebServlet(description = &quot;Loggy Logs&quot;, urlPatterns = { &quot;/LogsServlet&quot; })\r\n    public class LogsServlet extends HttpServlet {\r\n        private static final long serialVersionUID = 1L;\r\n    \r\n        /**\r\n         * @see HttpServlet#HttpServlet()\r\n         */\r\n        public LogsServlet() {\r\n            super();\r\n        }\r\n    \r\n        /**\r\n         * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse\r\n         *      response)\r\n         */\r\n        protected void doGet(HttpServletRequest request, HttpServletResponse response)\r\n                throws ServletException, IOException {\r\n        \t//set content type\r\n           response.setContentType(&quot;text/html&quot;);\r\n           //get print writer\r\n           PrintWriter writer = response.getWriter();\r\n           //generate content\r\n           \r\n           request.getParameter(&quot;logTitle&quot;);\r\n           request.getParameter(&quot;logDescription&quot;);\r\n           request.getParameter(&quot;logContent&quot;);\r\n           \r\n          \r\n        }\r\n    }\r\n\r\nThis is the first time I have worked with this, and I am quite lost of how to set it! I will also have to display the object in a list after and add it to a database if that makes a difference.\r\n\r\nAny advice would be appreciated!\r\n","title":"Dynamic Web Project, create object with variables submitted by for with GET method","body":"<p>I am trying to get the values from a form in order to create an object with those values. How would I do this? Also currently when I hit submit I get the http 404 error. I know I'm doing this wrong, I just don't know how to fix it!</p>\n<p>I have created the form with the following code:</p>\n<pre><code>&lt;html lang=&quot;en&quot;&gt;\n    &lt;head&gt;\n        &lt;title&gt;Example&lt;/title&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;h1&gt;Welcome to Loggy!&lt;/h1&gt;\n        \n        &lt;form id=&quot;logForm&quot; action=&quot;LogsServlet&quot; method=&quot;GET&quot;&gt;\n        &lt;h3&gt;What have you been up to today?&lt;/h3&gt;\n        &lt;br&gt;\n        &lt;label id=&quot;logTitleLabel&quot; for=&quot;logTitle&quot;&gt;Title :&lt;/label&gt;\n        &lt;br&gt;\n        &lt;input type=&quot;text&quot; id=&quot;logTitle&quot; name=&quot;logTitle&quot;&gt;\n        &lt;br&gt;\n        &lt;label id=&quot;logDescriptionLabel&quot; for=&quot;LogDescription&quot;&gt;Description&lt;/label&gt;\n        &lt;br&gt;\n        &lt;input type=&quot;text&quot; id=&quot;logDescription&quot; name=&quot;logDescription&quot;&gt;\n        &lt;label id=&quot;logContentLabel&quot; for=&quot;logContent&quot;&gt;Content :&lt;/label&gt;\n        &lt;br&gt;\n        &lt;input type=&quot;text&quot; id=&quot;logContent&quot; name=&quot;logContent&quot;&gt;\n        &lt;button type=&quot;submit&quot; id=&quot;submitLog&quot;&gt;Submit Log&lt;/button&gt;\n        \n        &lt;/form&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>Here are the abstract Log Class and TextLog Class:</p>\n<pre><code>import java.sql.Timestamp;\nimport java.util.Date;\nimport java.util.UUID;\n\npublic abstract class Log {\n    private UUID id;\n    private String title;\n    private String description;\n    private String content;\n    private Timestamp createTimestamp;\n    \n    \n    //Constructor \n    Log(String title,String description, String content){\n        this.setTitle(title);\n        this.description=description;\n        this.content=content;\n    };\n    \n\n    public void create() {\n        //call UUID method\n        id();\n        //create new timeStamp\n        Date date= new Date();\n        Timestamp createTimestamp = new Timestamp(date.getTime());\n        this.createTimestamp=createTimestamp;\n    }\n    \n    public UUID id() {\n        UUID uuid = UUID.randomUUID();\n        id = uuid;  \n        return id;\n    }\n\n    \n    //GETTERS AND SETTERS\n    public String getTitle() {\n        return title;\n    }\n\n    public void setTitle(String title) {\n        this.title = title;\n    }\n       public UUID getId() {\n            return id;\n        }\n\n        public void setId(UUID id) {\n            this.id = id;\n        }\n\n        public String getDescription() {\n            return description;\n        }\n\n        public void setDescription(String description) {\n            this.description = description;\n        }\n\n        public String getContent() {\n            return content;\n        }\n\n        public void setContent(String content) {\n            this.content = content;\n        }\n\n        public Timestamp getCreateTimestamp() {\n            return createTimestamp;\n        }\n\n        public void setCreateTimestamp(Timestamp createTimestamp) {\n            this.createTimestamp = createTimestamp;\n        }\n\n  \n}\n\npublic class TextLog extends Log {\n\n    public TextLog(String title,String description, String content) {\n        super(title,description, content);\n        \n    }\n\n}\n</code></pre>\n<p>I am trying to get the values from the form and then create a Log object of type TextLog with the variables submitted in the form. Here is my Servlet:</p>\n<pre><code>import java.io.IOException;\nimport java.io.PrintWriter;\n\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\n\n\n/**\n * Servlet implementation class LogsServlet\n */\n//@WebServlet(description = &quot;Loggy Logs&quot;, urlPatterns = { &quot;/LogsServlet&quot; })\npublic class LogsServlet extends HttpServlet {\n    private static final long serialVersionUID = 1L;\n\n    /**\n     * @see HttpServlet#HttpServlet()\n     */\n    public LogsServlet() {\n        super();\n    }\n\n    /**\n     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse\n     *      response)\n     */\n    protected void doGet(HttpServletRequest request, HttpServletResponse response)\n            throws ServletException, IOException {\n        //set content type\n       response.setContentType(&quot;text/html&quot;);\n       //get print writer\n       PrintWriter writer = response.getWriter();\n       //generate content\n       \n       request.getParameter(&quot;logTitle&quot;);\n       request.getParameter(&quot;logDescription&quot;);\n       request.getParameter(&quot;logContent&quot;);\n       \n      \n    }\n}\n</code></pre>\n<p>This is the first time I have worked with this, and I am quite lost of how to set it! I will also have to display the object in a list after and add it to a database if that makes a difference.</p>\n<p>Any advice would be appreciated!</p>\n"},{"tags":["java","spring","spring-boot","mapstruct"],"comments":[{"owner":{"account_id":14194880,"reputation":1483,"user_id":10254476,"display_name":"GJohannes"},"score":0,"creation_date":1657723949,"post_id":72594783,"comment_id":128879344,"body_markdown":"You can try and replace `@Mapper` with `@Mapper(componentModel = &quot;spring&quot;)`,","body":"You can try and replace <code>@Mapper</code> with <code>@Mapper(componentModel = &quot;spring&quot;)</code>,"}],"answers":[{"tags":[],"owner":{"account_id":18849596,"reputation":63,"user_id":13749065,"display_name":"Viktor Klyestov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655064684,"creation_date":1655064684,"answer_id":72595544,"question_id":72594783,"body_markdown":"I have never used mapstruct, but spring injects values only into beans (like @Service, @Repository, @RestController or @Component). Your student class is not a bean, moreover it is an abstract class. Probably you need to pass appName from some service and use @Value there","title":"@Value not working as expected in mapper abstract class","body":"<p>I have never used mapstruct, but spring injects values only into beans (like @Service, @Repository, @RestController or @Component). Your student class is not a bean, moreover it is an abstract class. Probably you need to pass appName from some service and use @Value there</p>\n"}],"owner":{"account_id":1410257,"reputation":2118,"user_id":1337007,"accept_rate":72,"display_name":"ghostrider"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":365,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1655064684,"creation_date":1655057863,"question_id":72594783,"body_markdown":"So I have a `mapstruct` mapper in my app, which has source to destination pojo mappings. I perform some logic inside the `@AfterMapping` class using the value from the `@Value` like below. But it seems like the value is not being fetched and hence its `set as null` What am I missing here?\r\n\r\n    @Mapper\r\n    abstract class Student{\r\n    \r\n    @Value(&quot;${spring.application.name}&quot;)\r\n    String appName;\r\n    \r\n    abstract StudentModel convert(StudentDTO Studentdto);\r\n    \r\n    @AfterMapping\r\n    void postConvert(@MappingTarget StudentModel studentmodel,StudentDTO studentDTO) {\r\n    studentmodel.setName(appName)\r\n    \r\n    }\r\n\r\n\r\n**application.yml**\r\n\r\n    spring:\r\n       application:\r\n           name: ABC","title":"@Value not working as expected in mapper abstract class","body":"<p>So I have a <code>mapstruct</code> mapper in my app, which has source to destination pojo mappings. I perform some logic inside the <code>@AfterMapping</code> class using the value from the <code>@Value</code> like below. But it seems like the value is not being fetched and hence its <code>set as null</code> What am I missing here?</p>\n<pre><code>@Mapper\nabstract class Student{\n\n@Value(&quot;${spring.application.name}&quot;)\nString appName;\n\nabstract StudentModel convert(StudentDTO Studentdto);\n\n@AfterMapping\nvoid postConvert(@MappingTarget StudentModel studentmodel,StudentDTO studentDTO) {\nstudentmodel.setName(appName)\n\n}\n</code></pre>\n<p><strong>application.yml</strong></p>\n<pre><code>spring:\n   application:\n       name: ABC\n</code></pre>\n"},{"tags":["java","gradle"],"answers":[{"tags":[],"owner":{"account_id":23681450,"reputation":372,"user_id":17706960,"display_name":"Mohsen Dehghankar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1655064403,"creation_date":1655064403,"answer_id":72595509,"question_id":72595177,"body_markdown":"According to [this][1], using `--console` should solve your problem. \r\n\r\nLike this: `gradle --console=plain clean distZip`\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/45889966/17706960","title":"Not print sequence of executed tasks","body":"<p>According to <a href=\"https://stackoverflow.com/a/45889966/17706960\">this</a>, using <code>--console</code> should solve your problem.</p>\n<p>Like this: <code>gradle --console=plain clean distZip</code></p>\n"}],"owner":{"account_id":9162277,"reputation":14688,"user_id":6813231,"accept_rate":56,"display_name":"Alexei"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72595509,"answer_count":1,"score":0,"last_activity_date":1655064403,"creation_date":1655061221,"question_id":72595177,"body_markdown":"To create distributive of my java app I use this Gradle task:\r\n\r\n    gradle clean distZip\r\n\r\n\r\nAnd here output:\r\n\r\n    BUILD SUCCESSFUL in 2s\r\n    5 actionable tasks: 3 executed, 2 up-to-date\r\n\r\nOk, but I need to print sequences of all executed tasks. Smt like this:\r\n\r\n    app:clean\r\n    app:JavaCompile\r\n    app:jar\r\n    distZip","title":"Not print sequence of executed tasks","body":"<p>To create distributive of my java app I use this Gradle task:</p>\n<pre><code>gradle clean distZip\n</code></pre>\n<p>And here output:</p>\n<pre><code>BUILD SUCCESSFUL in 2s\n5 actionable tasks: 3 executed, 2 up-to-date\n</code></pre>\n<p>Ok, but I need to print sequences of all executed tasks. Smt like this:</p>\n<pre><code>app:clean\napp:JavaCompile\napp:jar\ndistZip\n</code></pre>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":29208,"reputation":4716,"user_id":78716,"accept_rate":63,"display_name":"MStodd"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1286478479,"creation_date":1286476166,"answer_id":3884683,"question_id":3884644,"body_markdown":"Loop through all dates with the following:  \r\n1.  Have a variable that keeps track of the current closest date  \r\n2.  Have a variable that is the difference between the current closest date and the current date  \r\n  \r\nWhen you find a date with a difference less than that of the what you&#39;re keeping track of in (2), update the difference and the current closest date  \r\n  \r\nAt the end, the current closest date is the closest date in the collection\r\n\r\nhere&#39;s code in python:\r\n\r\n    dates = [date(2010,1,2), date(2010,5,6), date(2010,3,4), date(2011, 1, 2), date(2010,10,20), date(2009,2,3)]\r\n    current_date = dates[0]\r\n    current_min = abs(current_date - date.today())\r\n    for d in dates:\r\n        if abs(d - date.today()) &lt; current_min:\r\n            current_min = abs(d - date.today())\r\n            current_date = d\r\n\r\n","title":"Find nearest date among several dates to a given date","body":"<p>Loop through all dates with the following:<br>\n1.  Have a variable that keeps track of the current closest date<br>\n2.  Have a variable that is the difference between the current closest date and the current date  </p>\n\n<p>When you find a date with a difference less than that of the what you're keeping track of in (2), update the difference and the current closest date  </p>\n\n<p>At the end, the current closest date is the closest date in the collection</p>\n\n<p>here's code in python:</p>\n\n<pre><code>dates = [date(2010,1,2), date(2010,5,6), date(2010,3,4), date(2011, 1, 2), date(2010,10,20), date(2009,2,3)]\ncurrent_date = dates[0]\ncurrent_min = abs(current_date - date.today())\nfor d in dates:\n    if abs(d - date.today()) &lt; current_min:\n        current_min = abs(d - date.today())\n        current_date = d\n</code></pre>\n"},{"tags":[],"owner":{"account_id":102965,"reputation":415230,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1430081387,"creation_date":1286476468,"answer_id":3884728,"question_id":3884644,"body_markdown":"I&#39;d use [`Collection.min`](http://download.oracle.com/javase/6/docs/api/java/util/Collections.html#min%28java.util.Collection,%20java.util.Comparator%29) with a custom comparator that &quot;orders&quot; the dates according to distance from current time.\r\n\r\n    final long now = System.currentTimeMillis();\r\n        \r\n    // Create a sample list of dates\r\n    List&lt;Date&gt; dates = new ArrayList&lt;Date&gt;();\r\n    Random r = new Random();\r\n    for (int i = 0; i &lt; 10; i++)\r\n        dates.add(new Date(now + r.nextInt(10000)-5000));\r\n        \r\n    // Get date closest to &quot;now&quot;\r\n    Date closest = Collections.min(dates, new Comparator&lt;Date&gt;() {\r\n        public int compare(Date d1, Date d2) {\r\n            long diff1 = Math.abs(d1.getTime() - now);\r\n            long diff2 = Math.abs(d2.getTime() - now);\r\n            return Long.compare(diff1, diff2);\r\n        }\r\n    });\r\n    ","title":"Find nearest date among several dates to a given date","body":"<p>I'd use <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/Collections.html#min%28java.util.Collection,%20java.util.Comparator%29\" rel=\"noreferrer\"><code>Collection.min</code></a> with a custom comparator that \"orders\" the dates according to distance from current time.</p>\n\n<pre><code>final long now = System.currentTimeMillis();\n\n// Create a sample list of dates\nList&lt;Date&gt; dates = new ArrayList&lt;Date&gt;();\nRandom r = new Random();\nfor (int i = 0; i &lt; 10; i++)\n    dates.add(new Date(now + r.nextInt(10000)-5000));\n\n// Get date closest to \"now\"\nDate closest = Collections.min(dates, new Comparator&lt;Date&gt;() {\n    public int compare(Date d1, Date d2) {\n        long diff1 = Math.abs(d1.getTime() - now);\n        long diff2 = Math.abs(d2.getTime() - now);\n        return Long.compare(diff1, diff2);\n    }\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":185700,"reputation":91879,"user_id":422597,"display_name":"Colin Hebert"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1286478086,"creation_date":1286477266,"answer_id":3884820,"question_id":3884644,"body_markdown":"You can try this code :\r\n\r\n    public static Date closerDate(Date originalDate, Collection&lt;Date&gt; unsortedDates) {\r\n        List&lt;Date&gt; dateList = new LinkedList&lt;Date&gt;(unsortedDates);\r\n        Collections.sort(dateList);\r\n        Iterator&lt;Date&gt; iterator = dateList.iterator();\r\n        Date previousDate = null;\r\n        while (iterator.hasNext()) {\r\n            Date nextDate = iterator.next();\r\n            if (nextDate.before(originalDate)) {\r\n                previousDate = nextDate;\r\n                continue;\r\n            } else if (nextDate.after(originalDate)) {\r\n                if (previousDate == null || isCloserToNextDate(originalDate, previousDate, nextDate)) {\r\n                    return nextDate;\r\n                }\r\n            } else {\r\n                return nextDate;\r\n            }\r\n        }\r\n        return previousDate;\r\n    }\r\n\r\n    private static boolean isCloserToNextDate(Date originalDate, Date previousDate, Date nextDate) {\r\n        if(previousDate.after(nextDate))\r\n            throw new IllegalArgumentException(&quot;previousDate &gt; nextDate&quot;);\r\n        return ((nextDate.getTime() - previousDate.getTime()) / 2 + previousDate.getTime() &lt;= originalDate.getTime());\r\n    }","title":"Find nearest date among several dates to a given date","body":"<p>You can try this code :</p>\n\n<pre><code>public static Date closerDate(Date originalDate, Collection&lt;Date&gt; unsortedDates) {\n    List&lt;Date&gt; dateList = new LinkedList&lt;Date&gt;(unsortedDates);\n    Collections.sort(dateList);\n    Iterator&lt;Date&gt; iterator = dateList.iterator();\n    Date previousDate = null;\n    while (iterator.hasNext()) {\n        Date nextDate = iterator.next();\n        if (nextDate.before(originalDate)) {\n            previousDate = nextDate;\n            continue;\n        } else if (nextDate.after(originalDate)) {\n            if (previousDate == null || isCloserToNextDate(originalDate, previousDate, nextDate)) {\n                return nextDate;\n            }\n        } else {\n            return nextDate;\n        }\n    }\n    return previousDate;\n}\n\nprivate static boolean isCloserToNextDate(Date originalDate, Date previousDate, Date nextDate) {\n    if(previousDate.after(nextDate))\n        throw new IllegalArgumentException(\"previousDate &gt; nextDate\");\n    return ((nextDate.getTime() - previousDate.getTime()) / 2 + previousDate.getTime() &lt;= originalDate.getTime());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9193,"reputation":343113,"user_id":16883,"accept_rate":83,"display_name":"Michael Borgwardt"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1286478899,"creation_date":1286478899,"answer_id":3885067,"question_id":3884644,"body_markdown":"If the list is sorted, then you can use [`Collections.binarySearch()`][1] to find the place where the given date would be sorted into the list - the closest one is either right after or right before that index.\r\n\r\nFor very large lists, this is much faster than the other solutions, but of course it does require the list to be sorted. If you&#39;re going to do such a query multiple times, it would be worth it (performance-wise) to sort the list first.\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/util/Collections.html#binarySearch(java.util.List,%20T)","title":"Find nearest date among several dates to a given date","body":"<p>If the list is sorted, then you can use <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/Collections.html#binarySearch%28java.util.List,%20T%29\" rel=\"noreferrer\"><code>Collections.binarySearch()</code></a> to find the place where the given date would be sorted into the list - the closest one is either right after or right before that index.</p>\n\n<p>For very large lists, this is much faster than the other solutions, but of course it does require the list to be sorted. If you're going to do such a query multiple times, it would be worth it (performance-wise) to sort the list first.</p>\n"},{"tags":[],"owner":{"account_id":12404,"reputation":62016,"user_id":24396,"accept_rate":74,"display_name":"Steve Kuo"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1286479064,"creation_date":1286479064,"answer_id":3885091,"question_id":3884644,"body_markdown":"If you can use a `Set` instead of a `List`, put the dates in a `NavigableSet` such as `TreeSet` and use the methods `lower` and `higher`.\r\n\r\n    NavigableSet&lt;Date&gt; dates = new TreeSet&lt;Date&gt;();\r\n    // add some dates to dates\r\n    Date now = new Date();\r\n    Date highestDateUpUntilNow = dates.lower(now);","title":"Find nearest date among several dates to a given date","body":"<p>If you can use a <code>Set</code> instead of a <code>List</code>, put the dates in a <code>NavigableSet</code> such as <code>TreeSet</code> and use the methods <code>lower</code> and <code>higher</code>.</p>\n\n<pre><code>NavigableSet&lt;Date&gt; dates = new TreeSet&lt;Date&gt;();\n// add some dates to dates\nDate now = new Date();\nDate highestDateUpUntilNow = dates.lower(now);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18644553,"reputation":13,"user_id":13589522,"display_name":"Vlad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655064000,"creation_date":1655064000,"answer_id":72595467,"question_id":3884644,"body_markdown":"Or more readable view\r\n\r\n     public static LocalDateTime main(String[] args) {\r\n    \r\n            LocalDateTime now = LocalDate.now().atStartOfDay();\r\n            LocalDateTime localDate = LocalDate.now().minusDays(1).atStartOfDay();\r\n            LocalDateTime localDate2 = LocalDate.now().minusDays(20).atStartOfDay();\r\n            LocalDateTime localDate1 = LocalDate.now().plusDays(2).atStartOfDay();\r\n            LocalDateTime localDate3 = LocalDate.now().plusDays(20).atStartOfDay();\r\n            LocalDateTime localDate4 = LocalDate.MIN.atStartOfDay();\r\n            LocalDateTime localDate5 = LocalDate.MAX.atStartOfDay();\r\n    \r\n    \r\n           return Stream.of(localDate, localDate1, localDate2, localDate3, localDate4, localDate5)\r\n                    .min(getClosestDateComparator(now))\r\n                    .orElse(LocalDateTime.MAX);\r\n        }\r\n    \r\n        @NotNull\r\n        private static Comparator&lt;LocalDateTime&gt; getClosestDateComparator(LocalDateTime now) {\r\n            return (o1, o2) -&gt; {\r\n                long modul1 = Math.abs(Duration.between(now, o1).toDays());\r\n                long modul2 = Math.abs(Duration.between(now, o2).toDays());\r\n                return Long.compare(modul1, modul2);\r\n            };\r\n        }","title":"Find nearest date among several dates to a given date","body":"<p>Or more readable view</p>\n<pre><code> public static LocalDateTime main(String[] args) {\n\n        LocalDateTime now = LocalDate.now().atStartOfDay();\n        LocalDateTime localDate = LocalDate.now().minusDays(1).atStartOfDay();\n        LocalDateTime localDate2 = LocalDate.now().minusDays(20).atStartOfDay();\n        LocalDateTime localDate1 = LocalDate.now().plusDays(2).atStartOfDay();\n        LocalDateTime localDate3 = LocalDate.now().plusDays(20).atStartOfDay();\n        LocalDateTime localDate4 = LocalDate.MIN.atStartOfDay();\n        LocalDateTime localDate5 = LocalDate.MAX.atStartOfDay();\n\n\n       return Stream.of(localDate, localDate1, localDate2, localDate3, localDate4, localDate5)\n                .min(getClosestDateComparator(now))\n                .orElse(LocalDateTime.MAX);\n    }\n\n    @NotNull\n    private static Comparator&lt;LocalDateTime&gt; getClosestDateComparator(LocalDateTime now) {\n        return (o1, o2) -&gt; {\n            long modul1 = Math.abs(Duration.between(now, o1).toDays());\n            long modul2 = Math.abs(Duration.between(now, o2).toDays());\n            return Long.compare(modul1, modul2);\n        };\n    }\n</code></pre>\n"}],"owner":{"account_id":656701,"reputation":141,"user_id":469455,"display_name":"salman raza"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24108,"favorite_count":0,"down_vote_count":5,"up_vote_count":15,"answer_count":6,"score":10,"last_activity_date":1655064000,"creation_date":1286475794,"question_id":3884644,"body_markdown":"I have a list of dates and a current date. How can I find the date which is nearest to the current date?\r\n","title":"Find nearest date among several dates to a given date","body":"<p>I have a list of dates and a current date. How can I find the date which is nearest to the current date?</p>\n"},{"tags":["java","spring-boot","authentication","jwt","token"],"owner":{"account_id":19981008,"reputation":913,"user_id":14644191,"display_name":"Enchantres"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1291,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1655063929,"creation_date":1655063929,"question_id":72595460,"body_markdown":"I have endpoints that will be called only from authenticated users. I have valid JWT token that I am passing as a Bearer Token in Authorization. When I do get request to http://localhost:8080/api/students/all, I am getting 401:\r\n[![enter image description here][1]][1] The logger logs in the console Authenticated user test@gmail.com[ROLE_STUDENT], setting security context, which means that the token is successfully validated. Why am I still gettin 401? How can I solve this issue?\r\n\r\nHere is my StudentController.java:\r\n\r\n    @RestController\r\n    @CrossOrigin(origins = &quot;http://localhost:3000&quot;)\r\n    @Slf4j\r\n    @RequestMapping(&quot;/api/students&quot;)\r\n    public class StudentController {\r\n\r\n\t@Autowired\r\n\tprivate StudentService studentService;\r\n\t\r\n\t@GetMapping(&quot;/all&quot;)\r\n\tpublic ResponseEntity&lt;List&lt;Student&gt;&gt; getAllStudents(){\r\n\t\tlog.info(&quot;test&quot;);\r\n\t\treturn new ResponseEntity&lt;List&lt;Student&gt;&gt;(studentService.getAll(), HttpStatus.OK);\r\n\t}\r\n}\r\n\r\nJwtTokenUtil class is:\r\n\r\n    @Component\r\n    public class JwtTokenUtil implements Serializable{ \r\n    \t\r\n    \t@Value(&quot;${jwt.public.key}&quot;)\r\n        private String publicKey;\r\n    \r\n        public String getUsernameFromToken(String token) {\r\n            return getClaimFromToken(token, Claims::getSubject);\r\n        }\r\n    \r\n        public Date getExpirationDateFromToken(String token) {\r\n            return getClaimFromToken(token, Claims::getExpiration);\r\n        }\r\n    \r\n        public &lt;T&gt; T getClaimFromToken(String token, Function&lt;Claims, T&gt; claimsResolver) {\r\n            final Claims claims = getAllClaimsFromToken(token);\r\n            return claimsResolver.apply(claims);\r\n        }\r\n        \r\n       \r\n    \r\n        private Claims getAllClaimsFromToken(String token) {\r\n            return Jwts.parser()\r\n                    .setSigningKey(publicKey)\r\n                    .parseClaimsJws(token)\r\n                    .getBody();\r\n        }\r\n    \r\n        private Boolean isTokenExpired(String token) {\r\n            final Date expiration = getExpirationDateFromToken(token);\r\n            return expiration.before(new Date());\r\n        }\r\n    \r\n        public String generateToken(User user, String scope) {\r\n            return doGenerateToken(user.getEmail(), scope);\r\n        }\r\n    \r\n        private String doGenerateToken(String subject, String scope) {\r\n    \r\n            Claims claims = Jwts.claims().setSubject(subject);\r\n            claims.put(&quot;roles&quot;,scope);\r\n    \r\n            return Jwts.builder()\r\n                    .setClaims(claims)\r\n                    .setIssuer(&quot;http://uni.pu.com&quot;)\r\n                    .setIssuedAt(new Date(System.currentTimeMillis()))\r\n                    .setExpiration(new Date(System.currentTimeMillis() + 5*60*60*1000))\r\n                    .signWith(SignatureAlgorithm.HS256, publicKey)\r\n                    .compact();\r\n        }\r\n    \r\n        public Boolean validateToken(String token, UserDetails userDetails) {\r\n            final String username = getUsernameFromToken(token);\r\n            return (\r\n                  username.equals(userDetails.getUsername())\r\n                        &amp;&amp; !isTokenExpired(token));\r\n        }\r\n    }\r\n\r\nJWTAuthenticationFilter class:\r\n\r\n    public class JWTAuthenticationFilter extends OncePerRequestFilter {\r\n    \t@Autowired\r\n    \tprivate MyUserDetailsService userDetailsService;\r\n    \r\n    \t@Autowired\r\n    \tprivate JwtTokenUtil jwtTokenUtil;\r\n    \r\n    \tpublic static final String TOKEN_PREFIX = &quot;Bearer &quot;;\r\n    \tpublic static final String HEADER_STRING = &quot;Authorization&quot;;\r\n    \r\n    \t@Override\r\n    \tprotected void doFilterInternal(HttpServletRequest req, HttpServletResponse res, FilterChain chain)\r\n    \t\t\tthrows IOException, ServletException {\r\n    \t\tString header = req.getHeader(HEADER_STRING);\r\n    \t\tString username = null;\r\n    \t\tString authToken = null;\r\n    \t\tif (header != null &amp;&amp; header.startsWith(TOKEN_PREFIX)) {\r\n    \t\t\tauthToken = header.replace(TOKEN_PREFIX, &quot;&quot;);\r\n    \t\t\ttry {\r\n    \t\t\t\tusername = jwtTokenUtil.getUsernameFromToken(authToken);\r\n    \t\t\t} catch (IllegalArgumentException e) {\r\n    \t\t\t\tlogger.error(&quot;an error occured during getting username from token&quot;, e);\r\n    \t\t\t} catch (ExpiredJwtException e) {\r\n    \t\t\t\tlogger.warn(&quot;the token is expired and not valid anymore&quot;, e);\r\n    \t\t\t} catch (SignatureException e) {\r\n    \t\t\t\tlogger.error(&quot;Authentication Failed. Username or Password not valid.&quot;);\r\n    \t\t\t}\r\n    \t\t} else {\r\n    \t\t\tlogger.warn(&quot;couldn&#39;t find bearer string, will ignore the header&quot;);\r\n    \t\t}\r\n    \t\tif (username != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\r\n    \r\n    \t\t\tUserDetails userDetails = userDetailsService.loadUserByUsername(username);\r\n    \r\n    \t\t\tif (jwtTokenUtil.validateToken(authToken, userDetails)) {\r\n    \t\t\t\tUsernamePasswordAuthenticationToken authentication = new UsernamePasswordAuthenticationToken(\r\n    \t\t\t\t\t\tuserDetails, null, userDetails.getAuthorities());\r\n    \t\t\t\tauthentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(req));\r\n    \t\t\t\tlogger.info(&quot;authenticated user &quot; + username + userDetails.getAuthorities()+ &quot;, setting security context&quot;);\r\n    \t\t\t\tSecurityContextHolder.getContext().setAuthentication(authentication);\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t\tchain.doFilter(req, res);\r\n    \t}\r\n    \r\n    }\r\n\r\nWebSecurityConfig:\r\n\r\n    @EnableWebSecurity\r\n    @EnableGlobalMethodSecurity(securedEnabled = true, jsr250Enabled = true, prePostEnabled = true)\r\n    public class WebSecurityConfig {\r\n    \tprivate static final String[] WHITE_LIST_URLS = { &quot;/&quot;, &quot;/api/students/register&quot;, &quot;/api/students/register/*&quot;,\r\n    \t\t\t&quot;/api/user/reset-password&quot;, &quot;/api/user/save-password&quot;, &quot;/api/user/login&quot;, &quot;/api/user/logout&quot;,\r\n    \t\t\t// -- Swagger UI v2\r\n    \t\t\t&quot;/v2/api-docs&quot;, &quot;/swagger-resources&quot;, &quot;/swagger-resources/**&quot;, &quot;/configuration/ui&quot;, &quot;/configuration/**&quot;,\r\n    \t\t\t&quot;/configuration/security&quot;, &quot;/swagger-ui.html&quot;, &quot;/webjars/**&quot;,\r\n    \t\t\t// -- Swagger UI v3 (OpenAPI)\r\n    \t\t\t&quot;/v3/api-docs/**&quot;, &quot;/swagger-ui/**&quot;, &quot;/swagger-ui/&quot;, &quot;/swagger-ui&quot; };\r\n    \r\n    \t@Autowired\r\n    \tprivate JwtAuthenticationEntryPoint authenticationEntryPoint;\r\n    \r\n    \t@Value(&quot;${jwt.public.key}&quot;)\r\n    \tprivate RSAPublicKey rsaPublicKey;\r\n    \t@Value(&quot;${jwt.private.key}&quot;)\r\n    \tprivate RSAPrivateKey rsaPrivateKey;\r\n    \r\n    \t@Bean\r\n    \tpublic PasswordEncoder encoder() {\r\n    \t\treturn new BCryptPasswordEncoder(10);\r\n    \t}\r\n    \t\r\n    \t@Bean\r\n        public JWTAuthenticationFilter authenticationTokenFilterBean() throws Exception {\r\n            return new JWTAuthenticationFilter();\r\n        }\r\n\r\n    \t@Bean\r\n    \tSecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n    \t\t// Enable CORS and disable CSRF\r\n    \t\thttp = http.cors().and().csrf().disable();\r\n    \r\n    \t\t// Set session management to stateless\r\n    \t\thttp = http.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and();\r\n    \t\t// Set unauthorized requests exception handler\r\n    \t\thttp = http.exceptionHandling(\r\n    \t\t\t\t(exceptions) -&gt; exceptions.authenticationEntryPoint(authenticationEntryPoint)\r\n    \t\t\t\t\t\t.accessDeniedHandler(new BearerTokenAccessDeniedHandler()));\r\n    \r\n    \t\thttp = http.addFilterBefore(authenticationTokenFilterBean(), UsernamePasswordAuthenticationFilter.class);\r\n    \t\thttp = http.formLogin().disable();\r\n    \t\t\r\n    \t\t// Set permissions on endpoints\r\n    \t\thttp.authorizeHttpRequests().antMatchers(WHITE_LIST_URLS).permitAll()\r\n    \t\t\t\t// private endpoints\r\n    \t\t\t\t.anyRequest().authenticated()\r\n    \t\t\t\t// Set up oauth2 resource server\r\n    \t\t\t\t.and().httpBasic(Customizer.withDefaults()).oauth2ResourceServer().jwt();\r\n    \t\t\r\n    \t\treturn http.build();\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \tpublic JwtEncoder jwtEncoder() {\r\n    \t\tJWK jwk = new RSAKey.Builder(this.rsaPublicKey).privateKey(this.rsaPrivateKey).build();\r\n    \t\tJWKSource&lt;SecurityContext&gt; jwks = new ImmutableJWKSet&lt;&gt;(new JWKSet(jwk));\r\n    \t\treturn new NimbusJwtEncoder(jwks);\r\n    \t}\r\n    \r\n    \t// Used by JwtAuthenticationProvider to decode and validate JWT tokens\r\n    \t@Bean\r\n    \tpublic JwtDecoder jwtDecoder() {\r\n    \t\treturn NimbusJwtDecoder.withPublicKey(this.rsaPublicKey).build();\r\n    \t}\r\n    \r\n    \t// Extract authorities from the roles claim\r\n    \t@Bean\r\n    \tpublic JwtAuthenticationConverter jwtAuthenticationConverter() {\r\n    \t\tJwtGrantedAuthoritiesConverter jwtGrantedAuthoritiesConverter = new JwtGrantedAuthoritiesConverter();\r\n    \t\tjwtGrantedAuthoritiesConverter.setAuthoritiesClaimName(&quot;roles&quot;);\r\n    \t\tjwtGrantedAuthoritiesConverter.setAuthorityPrefix(&quot;ROLE_&quot;);\r\n    \r\n    \t\tJwtAuthenticationConverter jwtAuthenticationConverter = new JwtAuthenticationConverter();\r\n    \t\tjwtAuthenticationConverter.setJwtGrantedAuthoritiesConverter(jwtGrantedAuthoritiesConverter);\r\n    \t\treturn jwtAuthenticationConverter;\r\n    \t}\r\n    \t@Bean\r\n    \tpublic CorsFilter corsFilter() {\r\n    \t\tUrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n    \t\tCorsConfiguration config = new CorsConfiguration();\r\n    \t\tconfig.setAllowCredentials(true);\r\n    \t\tconfig.addAllowedOrigin(&quot;*&quot;);\r\n    \t\tconfig.addAllowedHeader(&quot;*&quot;);\r\n    \t\tconfig.addAllowedMethod(&quot;*&quot;);\r\n    \t\tsource.registerCorsConfiguration(&quot;/**&quot;, config);\r\n    \t\treturn new CorsFilter(source);\r\n    \t}\r\n    \t\r\n    \t@Bean\r\n        public AuthenticationManager authenticationManager(AuthenticationConfiguration authenticationConfiguration)\r\n                throws Exception {\r\n            return authenticationConfiguration.getAuthenticationManager();\r\n        }\r\n    \r\n    \t@Bean\r\n    \tpublic RoleHierarchy roleHierarchy() {\r\n    \t\tRoleHierarchyImpl roleHierarchy = new RoleHierarchyImpl();\r\n    \t\tString hierarchy = &quot;ROLE_ADMIN &gt; ROLE_INSPECTOR \\n ROLE_INSPECTOR &gt; ROLE_STUDENT&quot;;\r\n    \t\troleHierarchy.setHierarchy(hierarchy);\r\n    \t\treturn roleHierarchy;\r\n    \t}\r\n    \r\n    }\r\n\r\nMyUserDetailsService:\r\n\r\n    @Service\r\n    @Transactional\r\n    public class MyUserDetailsService implements UserDetailsService {\r\n    \r\n    \t@Autowired\r\n    \tprivate UserRepository userRepository;\r\n    \r\n    \tpublic UserDetails loadUserByUsername(String email) throws UserNotFoundException {\r\n    \t\tOptional&lt;User&gt; optionalUser = userRepository.findByEmail(email);\r\n    \t\tif(!optionalUser.isPresent()) {\r\n    \t\t\tthrow new UserNotFoundException(&quot;No user found with email: &quot; + email);\r\n    \t\t}\r\n    \t\tUser user = optionalUser.get();\r\n    \t\tboolean enabled = user.isEnabled();\r\n    \t\tboolean accountNonExpired = true;\r\n    \t\tboolean credentialsNonExpired = true;\r\n    \t\tboolean accountNonLocked = true;\r\n    \r\n    \t\treturn new org.springframework.security.core.userdetails.User(user.getEmail(), user.getPassword(),\r\n    \t\t\t\tenabled, accountNonExpired, credentialsNonExpired, accountNonLocked, getAuthorities(user.getRoles()));\r\n    \t}\r\n    \r\n    \tpublic Collection&lt;? extends GrantedAuthority&gt; getAuthorities(Collection&lt;Role&gt; roles) {\r\n    \t\tList&lt;SimpleGrantedAuthority&gt; authorities = new ArrayList&lt;&gt;();\r\n    \r\n    \t\tfor (Role role : roles) {\r\n    \t\t\tauthorities.add(new SimpleGrantedAuthority(role.getName()));\r\n    \t\t}\r\n    \r\n    \t\treturn authorities;\r\n    \t}\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Td7KB.png","title":"JWT authentication returns 401 unauthorized [Spring Boot]","body":"<p>I have endpoints that will be called only from authenticated users. I have valid JWT token that I am passing as a Bearer Token in Authorization. When I do get request to http://localhost:8080/api/students/all, I am getting 401:\n<a href=\"https://i.stack.imgur.com/Td7KB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Td7KB.png\" alt=\"enter image description here\" /></a> The logger logs in the console Authenticated user test@gmail.com[ROLE_STUDENT], setting security context, which means that the token is successfully validated. Why am I still gettin 401? How can I solve this issue?</p>\n<p>Here is my StudentController.java:</p>\n<pre><code>@RestController\n@CrossOrigin(origins = &quot;http://localhost:3000&quot;)\n@Slf4j\n@RequestMapping(&quot;/api/students&quot;)\npublic class StudentController {\n\n@Autowired\nprivate StudentService studentService;\n\n@GetMapping(&quot;/all&quot;)\npublic ResponseEntity&lt;List&lt;Student&gt;&gt; getAllStudents(){\n    log.info(&quot;test&quot;);\n    return new ResponseEntity&lt;List&lt;Student&gt;&gt;(studentService.getAll(), HttpStatus.OK);\n}\n</code></pre>\n<p>}</p>\n<p>JwtTokenUtil class is:</p>\n<pre><code>@Component\npublic class JwtTokenUtil implements Serializable{ \n    \n    @Value(&quot;${jwt.public.key}&quot;)\n    private String publicKey;\n\n    public String getUsernameFromToken(String token) {\n        return getClaimFromToken(token, Claims::getSubject);\n    }\n\n    public Date getExpirationDateFromToken(String token) {\n        return getClaimFromToken(token, Claims::getExpiration);\n    }\n\n    public &lt;T&gt; T getClaimFromToken(String token, Function&lt;Claims, T&gt; claimsResolver) {\n        final Claims claims = getAllClaimsFromToken(token);\n        return claimsResolver.apply(claims);\n    }\n    \n   \n\n    private Claims getAllClaimsFromToken(String token) {\n        return Jwts.parser()\n                .setSigningKey(publicKey)\n                .parseClaimsJws(token)\n                .getBody();\n    }\n\n    private Boolean isTokenExpired(String token) {\n        final Date expiration = getExpirationDateFromToken(token);\n        return expiration.before(new Date());\n    }\n\n    public String generateToken(User user, String scope) {\n        return doGenerateToken(user.getEmail(), scope);\n    }\n\n    private String doGenerateToken(String subject, String scope) {\n\n        Claims claims = Jwts.claims().setSubject(subject);\n        claims.put(&quot;roles&quot;,scope);\n\n        return Jwts.builder()\n                .setClaims(claims)\n                .setIssuer(&quot;http://uni.pu.com&quot;)\n                .setIssuedAt(new Date(System.currentTimeMillis()))\n                .setExpiration(new Date(System.currentTimeMillis() + 5*60*60*1000))\n                .signWith(SignatureAlgorithm.HS256, publicKey)\n                .compact();\n    }\n\n    public Boolean validateToken(String token, UserDetails userDetails) {\n        final String username = getUsernameFromToken(token);\n        return (\n              username.equals(userDetails.getUsername())\n                    &amp;&amp; !isTokenExpired(token));\n    }\n}\n</code></pre>\n<p>JWTAuthenticationFilter class:</p>\n<pre><code>public class JWTAuthenticationFilter extends OncePerRequestFilter {\n    @Autowired\n    private MyUserDetailsService userDetailsService;\n\n    @Autowired\n    private JwtTokenUtil jwtTokenUtil;\n\n    public static final String TOKEN_PREFIX = &quot;Bearer &quot;;\n    public static final String HEADER_STRING = &quot;Authorization&quot;;\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest req, HttpServletResponse res, FilterChain chain)\n            throws IOException, ServletException {\n        String header = req.getHeader(HEADER_STRING);\n        String username = null;\n        String authToken = null;\n        if (header != null &amp;&amp; header.startsWith(TOKEN_PREFIX)) {\n            authToken = header.replace(TOKEN_PREFIX, &quot;&quot;);\n            try {\n                username = jwtTokenUtil.getUsernameFromToken(authToken);\n            } catch (IllegalArgumentException e) {\n                logger.error(&quot;an error occured during getting username from token&quot;, e);\n            } catch (ExpiredJwtException e) {\n                logger.warn(&quot;the token is expired and not valid anymore&quot;, e);\n            } catch (SignatureException e) {\n                logger.error(&quot;Authentication Failed. Username or Password not valid.&quot;);\n            }\n        } else {\n            logger.warn(&quot;couldn't find bearer string, will ignore the header&quot;);\n        }\n        if (username != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\n\n            UserDetails userDetails = userDetailsService.loadUserByUsername(username);\n\n            if (jwtTokenUtil.validateToken(authToken, userDetails)) {\n                UsernamePasswordAuthenticationToken authentication = new UsernamePasswordAuthenticationToken(\n                        userDetails, null, userDetails.getAuthorities());\n                authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(req));\n                logger.info(&quot;authenticated user &quot; + username + userDetails.getAuthorities()+ &quot;, setting security context&quot;);\n                SecurityContextHolder.getContext().setAuthentication(authentication);\n            }\n        }\n\n        chain.doFilter(req, res);\n    }\n\n}\n</code></pre>\n<p>WebSecurityConfig:</p>\n<pre><code>@EnableWebSecurity\n@EnableGlobalMethodSecurity(securedEnabled = true, jsr250Enabled = true, prePostEnabled = true)\npublic class WebSecurityConfig {\n    private static final String[] WHITE_LIST_URLS = { &quot;/&quot;, &quot;/api/students/register&quot;, &quot;/api/students/register/*&quot;,\n            &quot;/api/user/reset-password&quot;, &quot;/api/user/save-password&quot;, &quot;/api/user/login&quot;, &quot;/api/user/logout&quot;,\n            // -- Swagger UI v2\n            &quot;/v2/api-docs&quot;, &quot;/swagger-resources&quot;, &quot;/swagger-resources/**&quot;, &quot;/configuration/ui&quot;, &quot;/configuration/**&quot;,\n            &quot;/configuration/security&quot;, &quot;/swagger-ui.html&quot;, &quot;/webjars/**&quot;,\n            // -- Swagger UI v3 (OpenAPI)\n            &quot;/v3/api-docs/**&quot;, &quot;/swagger-ui/**&quot;, &quot;/swagger-ui/&quot;, &quot;/swagger-ui&quot; };\n\n    @Autowired\n    private JwtAuthenticationEntryPoint authenticationEntryPoint;\n\n    @Value(&quot;${jwt.public.key}&quot;)\n    private RSAPublicKey rsaPublicKey;\n    @Value(&quot;${jwt.private.key}&quot;)\n    private RSAPrivateKey rsaPrivateKey;\n\n    @Bean\n    public PasswordEncoder encoder() {\n        return new BCryptPasswordEncoder(10);\n    }\n    \n    @Bean\n    public JWTAuthenticationFilter authenticationTokenFilterBean() throws Exception {\n        return new JWTAuthenticationFilter();\n    }\n\n    @Bean\n    SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        // Enable CORS and disable CSRF\n        http = http.cors().and().csrf().disable();\n\n        // Set session management to stateless\n        http = http.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and();\n        // Set unauthorized requests exception handler\n        http = http.exceptionHandling(\n                (exceptions) -&gt; exceptions.authenticationEntryPoint(authenticationEntryPoint)\n                        .accessDeniedHandler(new BearerTokenAccessDeniedHandler()));\n\n        http = http.addFilterBefore(authenticationTokenFilterBean(), UsernamePasswordAuthenticationFilter.class);\n        http = http.formLogin().disable();\n        \n        // Set permissions on endpoints\n        http.authorizeHttpRequests().antMatchers(WHITE_LIST_URLS).permitAll()\n                // private endpoints\n                .anyRequest().authenticated()\n                // Set up oauth2 resource server\n                .and().httpBasic(Customizer.withDefaults()).oauth2ResourceServer().jwt();\n        \n        return http.build();\n    }\n\n    @Bean\n    public JwtEncoder jwtEncoder() {\n        JWK jwk = new RSAKey.Builder(this.rsaPublicKey).privateKey(this.rsaPrivateKey).build();\n        JWKSource&lt;SecurityContext&gt; jwks = new ImmutableJWKSet&lt;&gt;(new JWKSet(jwk));\n        return new NimbusJwtEncoder(jwks);\n    }\n\n    // Used by JwtAuthenticationProvider to decode and validate JWT tokens\n    @Bean\n    public JwtDecoder jwtDecoder() {\n        return NimbusJwtDecoder.withPublicKey(this.rsaPublicKey).build();\n    }\n\n    // Extract authorities from the roles claim\n    @Bean\n    public JwtAuthenticationConverter jwtAuthenticationConverter() {\n        JwtGrantedAuthoritiesConverter jwtGrantedAuthoritiesConverter = new JwtGrantedAuthoritiesConverter();\n        jwtGrantedAuthoritiesConverter.setAuthoritiesClaimName(&quot;roles&quot;);\n        jwtGrantedAuthoritiesConverter.setAuthorityPrefix(&quot;ROLE_&quot;);\n\n        JwtAuthenticationConverter jwtAuthenticationConverter = new JwtAuthenticationConverter();\n        jwtAuthenticationConverter.setJwtGrantedAuthoritiesConverter(jwtGrantedAuthoritiesConverter);\n        return jwtAuthenticationConverter;\n    }\n    @Bean\n    public CorsFilter corsFilter() {\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        CorsConfiguration config = new CorsConfiguration();\n        config.setAllowCredentials(true);\n        config.addAllowedOrigin(&quot;*&quot;);\n        config.addAllowedHeader(&quot;*&quot;);\n        config.addAllowedMethod(&quot;*&quot;);\n        source.registerCorsConfiguration(&quot;/**&quot;, config);\n        return new CorsFilter(source);\n    }\n    \n    @Bean\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration authenticationConfiguration)\n            throws Exception {\n        return authenticationConfiguration.getAuthenticationManager();\n    }\n\n    @Bean\n    public RoleHierarchy roleHierarchy() {\n        RoleHierarchyImpl roleHierarchy = new RoleHierarchyImpl();\n        String hierarchy = &quot;ROLE_ADMIN &gt; ROLE_INSPECTOR \\n ROLE_INSPECTOR &gt; ROLE_STUDENT&quot;;\n        roleHierarchy.setHierarchy(hierarchy);\n        return roleHierarchy;\n    }\n\n}\n</code></pre>\n<p>MyUserDetailsService:</p>\n<pre><code>@Service\n@Transactional\npublic class MyUserDetailsService implements UserDetailsService {\n\n    @Autowired\n    private UserRepository userRepository;\n\n    public UserDetails loadUserByUsername(String email) throws UserNotFoundException {\n        Optional&lt;User&gt; optionalUser = userRepository.findByEmail(email);\n        if(!optionalUser.isPresent()) {\n            throw new UserNotFoundException(&quot;No user found with email: &quot; + email);\n        }\n        User user = optionalUser.get();\n        boolean enabled = user.isEnabled();\n        boolean accountNonExpired = true;\n        boolean credentialsNonExpired = true;\n        boolean accountNonLocked = true;\n\n        return new org.springframework.security.core.userdetails.User(user.getEmail(), user.getPassword(),\n                enabled, accountNonExpired, credentialsNonExpired, accountNonLocked, getAuthorities(user.getRoles()));\n    }\n\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities(Collection&lt;Role&gt; roles) {\n        List&lt;SimpleGrantedAuthority&gt; authorities = new ArrayList&lt;&gt;();\n\n        for (Role role : roles) {\n            authorities.add(new SimpleGrantedAuthority(role.getName()));\n        }\n\n        return authorities;\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","hibernate","maven","tomcat"],"comments":[{"owner":{"account_id":8049065,"reputation":804,"user_id":6068297,"display_name":"Level_Up"},"score":0,"creation_date":1654774499,"post_id":72559435,"comment_id":128174924,"body_markdown":"Check if you have other dependencies in the pom.xml that you must configure. For example there are &lt;artifactId&gt;spring-orm&lt;/artifactId&gt; and &lt;artifactId&gt;persistence-api&lt;/artifactId&gt; related to hibernate.The error can be related to jakarta migration. Before it was javax. Maybe you use somewhere old version of dependency which is providing the javax but now you need jakarta","body":"Check if you have other dependencies in the pom.xml that you must configure. For example there are &lt;artifactId&gt;spring-orm&lt;/artifactId&gt; and &lt;artifactId&gt;persistence-api&lt;/artifactId&gt; related to hibernate.The error can be related to jakarta migration. Before it was javax. Maybe you use somewhere old version of dependency which is providing the javax but now you need jakarta"}],"answers":[{"tags":[],"owner":{"account_id":10463559,"reputation":2118,"user_id":7713562,"display_name":"zawarudo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654777924,"creation_date":1654776554,"answer_id":72560000,"question_id":72559435,"body_markdown":"Tomcat 10 changed package names from javax to jakarta, the first Spring that will provide support for jakarta packages will be future Spring 6.\r\n\r\nAt the moment, and until further notice, Spring 5, or any version before will not be working with Tomcat 10.\r\nSo until Spring 6 is out, you should wait with the usage of Tomcat 10.\r\n\r\nTomcat 9 will work just fine for your needs.","title":"An error is displayed saying &quot;NoClassDefFoundError: javax/persistence/Entity&quot; when using tomcat 10 with hibernate 5.6","body":"<p>Tomcat 10 changed package names from javax to jakarta, the first Spring that will provide support for jakarta packages will be future Spring 6.</p>\n<p>At the moment, and until further notice, Spring 5, or any version before will not be working with Tomcat 10.\nSo until Spring 6 is out, you should wait with the usage of Tomcat 10.</p>\n<p>Tomcat 9 will work just fine for your needs.</p>\n"},{"tags":[],"owner":{"account_id":10189955,"reputation":451,"user_id":7523723,"display_name":"Tal Levi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1655063855,"creation_date":1655063855,"answer_id":72595449,"question_id":72559435,"body_markdown":"in the end I upgraded the spring to 5.3.20 and spring web to 5.7.1 and I changed all the references of javax.persistence to jakarta.persistence and it worked. I kept the hibernate version 5.6.9.Final and tomcat 10","title":"An error is displayed saying &quot;NoClassDefFoundError: javax/persistence/Entity&quot; when using tomcat 10 with hibernate 5.6","body":"<p>in the end I upgraded the spring to 5.3.20 and spring web to 5.7.1 and I changed all the references of javax.persistence to jakarta.persistence and it worked. I kept the hibernate version 5.6.9.Final and tomcat 10</p>\n"}],"owner":{"account_id":10189955,"reputation":451,"user_id":7523723,"display_name":"Tal Levi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":959,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72595449,"answer_count":2,"score":0,"last_activity_date":1655063855,"creation_date":1654773772,"question_id":72559435,"body_markdown":"I have java project (version 8)\r\n\r\nI upgraded my hibernate version from 5.0.3.Final to 5.6.9.Final\r\n\r\n       &lt;dependency&gt;\r\n                    &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n                    &lt;version&gt;5.6.9.Final&lt;/version&gt;\r\n                &lt;/dependency&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\r\n                    &lt;version&gt;5.6.9.Final&lt;/version&gt;\r\n                &lt;/dependency&gt;\r\n\r\nI tried to run my tomcat (version 10.0.20) after upgrading the hibernate version and I received the next error:\r\n\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;sessionFactory&#39; defined in class path resource [spring/db-config.xml]: Invocation of init method failed; nested exception is java.lang.NoClassDefFoundError: javax/persistence/Entity (wrong name: jakarta/persistence/Entity)\r\n\r\nThe sessionFactory bean looks like that:\r\n \r\n\r\n      &lt;bean id=&quot;sessionFactory&quot; class=&quot;org.springframework.orm.hibernate5.LocalSessionFactoryBean&quot;\r\n              depends-on=&quot;flyway&quot;&gt;\r\n            &lt;property name=&quot;dataSource&quot; ref=&quot;itpDataSource&quot;/&gt;\r\n            &lt;property name=&quot;packagesToScan&quot; value=&quot;com.imperva.itp.domain,com.imperva.itp.commons.domain&quot;/&gt;\r\n            &lt;property name=&quot;hibernateProperties&quot;&gt;\r\n                &lt;props&gt;\r\n                    &lt;prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.PostgresPlusDialect&lt;/prop&gt;\r\n    \t\t\t\t&lt;prop key=&quot;configurationClass&quot;&gt;org.hibernate.cfg.Configuration&lt;/prop&gt;\r\n                    &lt;prop key=&quot;hibernate.show_sql&quot;&gt;false&lt;/prop&gt;\r\n                    &lt;prop key=&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;/prop&gt;\r\n                    &lt;prop key=&quot;hibernate.id.new_generator_mappings&quot;&gt;true&lt;/prop&gt;\r\n                    &lt;prop key=&quot;hibernate.default_schema&quot;&gt;${itp.db.username}&lt;/prop&gt;\r\n                &lt;/props&gt;\r\n            &lt;/property&gt;\r\n        &lt;/bean&gt;\r\n\r\nI don&#39;t know if it is relevant but my Spring version is 4.3.30.RELEASE\r\n\r\nafter running different combinations:\r\n\r\n    hibernate 5.0.3.Final with tomcat 8: works properly\r\n    hibernate 5.0.3.Final with tomcat 10: works properly\r\n    hibernate 5.6.9.Final with tomcat 8: works properly\r\n    hibernate 5.6.9.Final with tomcat 10: doesn&#39;t work and the exception is thrown \r\n\r\nany ideas? \r\n\r\n\r\n","title":"An error is displayed saying &quot;NoClassDefFoundError: javax/persistence/Entity&quot; when using tomcat 10 with hibernate 5.6","body":"<p>I have java project (version 8)</p>\n<p>I upgraded my hibernate version from 5.0.3.Final to 5.6.9.Final</p>\n<pre><code>   &lt;dependency&gt;\n                &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n                &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n                &lt;version&gt;5.6.9.Final&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n                &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n                &lt;version&gt;5.6.9.Final&lt;/version&gt;\n            &lt;/dependency&gt;\n</code></pre>\n<p>I tried to run my tomcat (version 10.0.20) after upgrading the hibernate version and I received the next error:</p>\n<pre><code>Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [spring/db-config.xml]: Invocation of init method failed; nested exception is java.lang.NoClassDefFoundError: javax/persistence/Entity (wrong name: jakarta/persistence/Entity)\n</code></pre>\n<p>The sessionFactory bean looks like that:</p>\n<pre><code>  &lt;bean id=&quot;sessionFactory&quot; class=&quot;org.springframework.orm.hibernate5.LocalSessionFactoryBean&quot;\n          depends-on=&quot;flyway&quot;&gt;\n        &lt;property name=&quot;dataSource&quot; ref=&quot;itpDataSource&quot;/&gt;\n        &lt;property name=&quot;packagesToScan&quot; value=&quot;com.imperva.itp.domain,com.imperva.itp.commons.domain&quot;/&gt;\n        &lt;property name=&quot;hibernateProperties&quot;&gt;\n            &lt;props&gt;\n                &lt;prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.PostgresPlusDialect&lt;/prop&gt;\n                &lt;prop key=&quot;configurationClass&quot;&gt;org.hibernate.cfg.Configuration&lt;/prop&gt;\n                &lt;prop key=&quot;hibernate.show_sql&quot;&gt;false&lt;/prop&gt;\n                &lt;prop key=&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;/prop&gt;\n                &lt;prop key=&quot;hibernate.id.new_generator_mappings&quot;&gt;true&lt;/prop&gt;\n                &lt;prop key=&quot;hibernate.default_schema&quot;&gt;${itp.db.username}&lt;/prop&gt;\n            &lt;/props&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n</code></pre>\n<p>I don't know if it is relevant but my Spring version is 4.3.30.RELEASE</p>\n<p>after running different combinations:</p>\n<pre><code>hibernate 5.0.3.Final with tomcat 8: works properly\nhibernate 5.0.3.Final with tomcat 10: works properly\nhibernate 5.6.9.Final with tomcat 8: works properly\nhibernate 5.6.9.Final with tomcat 10: doesn't work and the exception is thrown \n</code></pre>\n<p>any ideas?</p>\n"},{"tags":["java","android","sqlite","cursor"],"answers":[{"tags":[],"owner":{"account_id":10055888,"reputation":3162,"user_id":7434090,"display_name":"Gavin Wright"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655063408,"creation_date":1655063054,"answer_id":72595364,"question_id":72595243,"body_markdown":"You&#39;ve defined your schema with these constants:\r\n\r\n    public final static String TABLE_NAME = &quot;TO_DO_ITEMS&quot;;\r\n    public final static String COL_ITEM_NAME = &quot;ITEM&quot;;\r\n    public final static String COL_URGENT = &quot;URGENT&quot;;\r\n    public final static String COL_ID = &quot;_id&quot;;\r\n\r\nBut you&#39;re using the names of the constants here rather than their values:\r\n\r\n        int nameColIndex = cursor.getColumnIndex(&quot;COL_ITEM_NAME&quot;);\r\n        int urgentColIndex = cursor.getColumnIndex(&quot;COL_URGENT&quot;);\r\n        int idColIndex = cursor.getColumnIndex(&quot;COL_ID&quot;);\r\n\r\nIn other words, in `MainActivity`, do this:\r\n\r\n        int nameColIndex = cursor.getColumnIndex(dbOpener.COL_ITEM_NAME);\r\n        int urgentColIndex = cursor.getColumnIndex(dbOpener.COL_URGENT);\r\n        int idColIndex = cursor.getColumnIndex(dbOpener.COL_ID);\r\n\r\nAlso, classes start with capital letters. You should rename `dbOpener` to `DbOpener`. ","title":"SQLite Cursor initializing as -1 and causing error","body":"<p>You've defined your schema with these constants:</p>\n<pre><code>public final static String TABLE_NAME = &quot;TO_DO_ITEMS&quot;;\npublic final static String COL_ITEM_NAME = &quot;ITEM&quot;;\npublic final static String COL_URGENT = &quot;URGENT&quot;;\npublic final static String COL_ID = &quot;_id&quot;;\n</code></pre>\n<p>But you're using the names of the constants here rather than their values:</p>\n<pre><code>    int nameColIndex = cursor.getColumnIndex(&quot;COL_ITEM_NAME&quot;);\n    int urgentColIndex = cursor.getColumnIndex(&quot;COL_URGENT&quot;);\n    int idColIndex = cursor.getColumnIndex(&quot;COL_ID&quot;);\n</code></pre>\n<p>In other words, in <code>MainActivity</code>, do this:</p>\n<pre><code>    int nameColIndex = cursor.getColumnIndex(dbOpener.COL_ITEM_NAME);\n    int urgentColIndex = cursor.getColumnIndex(dbOpener.COL_URGENT);\n    int idColIndex = cursor.getColumnIndex(dbOpener.COL_ID);\n</code></pre>\n<p>Also, classes start with capital letters. You should rename <code>dbOpener</code> to <code>DbOpener</code>.</p>\n"},{"tags":[],"owner":{"account_id":35743,"reputation":150884,"user_id":101361,"accept_rate":71,"display_name":"laalto"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655063428,"creation_date":1655063428,"answer_id":72595398,"question_id":72595243,"body_markdown":"In your cursor-reading `for` loop, you need to move the cursor in order to iterate over the result set. An easy fix there would be to change\r\n\r\n    for(int i = 0; i &lt; cursor.getCount(); i++) {\r\n\r\nto\r\n\r\n    while(cursor.moveToNext()) {\r\n\r\nThere are other issues in your code such as the one pointed out by Gavin Wright in his answer. Missing `moveTo...()` is the reason for the crash you&#39;ve reported.","title":"SQLite Cursor initializing as -1 and causing error","body":"<p>In your cursor-reading <code>for</code> loop, you need to move the cursor in order to iterate over the result set. An easy fix there would be to change</p>\n<pre><code>for(int i = 0; i &lt; cursor.getCount(); i++) {\n</code></pre>\n<p>to</p>\n<pre><code>while(cursor.moveToNext()) {\n</code></pre>\n<p>There are other issues in your code such as the one pointed out by Gavin Wright in his answer. Missing <code>moveTo...()</code> is the reason for the crash you've reported.</p>\n"}],"owner":{"account_id":19242301,"reputation":49,"user_id":14062055,"display_name":"ReginaldRey"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1655063428,"creation_date":1655061844,"question_id":72595243,"body_markdown":"hoping someone can help me figure this issue out. I&#39;m trying to build an app in Android Studio for school and am running into an issue when trying to get it to load results from a database using a cursor. I keep getting the error message that the cursor is initialized at -1 and it can&#39;t access column 0. Any ideas what might be causing it? Code is below along with error message:\r\n\r\nMain Activity:\r\n\r\n    package com.example.lab2;\r\n    \r\n    import androidx.appcompat.app.AlertDialog;\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    \r\n    import android.content.Context;\r\n    import android.database.Cursor;\r\n    import android.graphics.Color;\r\n    import android.os.Bundle;\r\n    import android.view.LayoutInflater;\r\n    import android.view.View;\r\n    import android.view.ViewGroup;\r\n    import android.widget.Adapter;\r\n    import android.widget.AdapterView;\r\n    import android.widget.ArrayAdapter;\r\n    import android.widget.BaseAdapter;\r\n    import android.widget.Button;\r\n    import android.widget.EditText;\r\n    import android.widget.ListView;\r\n    import android.widget.Switch;\r\n    import android.widget.TextView;\r\n    import android.widget.Toast;\r\n    \r\n    import java.util.ArrayList;\r\n    \r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n            Button btn = findViewById(R.id.the_button);\r\n            EditText input = findViewById(R.id.edittext);\r\n            Switch urgent = findViewById(R.id.the_switch);\r\n            dbOpener dbOpener = new dbOpener(MainActivity.this);\r\n            Cursor cursor;\r\n    \r\n            ListView thisList = (ListView) findViewById(R.id.listview);\r\n            AlertDialog.Builder alertDIalogBuilder = new AlertDialog.Builder(this);\r\n    \r\n            ArrayList&lt;toDoItem&gt; arrayList = new ArrayList&lt;toDoItem&gt;();\r\n    \r\n    \r\n            class MyAdapter extends BaseAdapter {\r\n    \r\n                private Context context;\r\n                private ArrayList&lt;toDoItem&gt; items;\r\n    \r\n                public MyAdapter(Context context, ArrayList&lt;toDoItem&gt; items) {\r\n                    this.context = context;\r\n                    this.items = items;\r\n                }\r\n    \r\n                @Override\r\n                public int getCount() {\r\n                    return arrayList.size();\r\n                }\r\n    \r\n                @Override\r\n                public Object getItem(int position) {\r\n                    return arrayList.get(position);\r\n                }\r\n    \r\n                @Override\r\n                public long getItemId(int position) {\r\n                    return position;\r\n                }\r\n    \r\n                @Override\r\n                public View getView(int position, View convertView, ViewGroup parent) {\r\n    \r\n                    View mainView = LayoutInflater.from(context).inflate(R.layout.activity_main_todolayout, parent, false);\r\n                    LayoutInflater inflater = getLayoutInflater();\r\n                    if(mainView == null) {\r\n                        mainView = inflater.inflate(R.layout.activity_main_todolayout, parent, false);\r\n                    }\r\n                    TextView itemView = mainView.findViewById(R.id.to_do_items);\r\n                    itemView.setText((arrayList.get(position).getToDoName().toString()));\r\n    \r\n                    if(arrayList.get(position).geturgent() == true) {\r\n                        mainView.setBackgroundColor(Color.RED);\r\n                        itemView.setTextColor(Color.WHITE);\r\n                    }\r\n                    return mainView;}\r\n            };\r\n    \r\n            MyAdapter adapter = new MyAdapter(this, arrayList);\r\n    \r\n            thisList.setAdapter(adapter);\r\n    \r\n            urgent.setChecked(false);\r\n    \r\n            urgent.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View V) {\r\n                    urgent.setChecked(true);\r\n                }\r\n            });\r\n    \r\n            btn.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n    \r\n                    String holder = input.getText().toString();\r\n                    arrayList.add (new toDoItem(holder, urgent.isChecked()));\r\n                    input.getText().clear();\r\n                    adapter.notifyDataSetChanged();\r\n                    int urgentStatus = 0;\r\n    \r\n                    if(urgent.isChecked() == true) {\r\n                        urgentStatus = 1;\r\n                    } else {\r\n                        urgentStatus = 0;\r\n                    }\r\n                    dbOpener.addItem(holder, urgentStatus);\r\n                    urgent.setChecked(false);\r\n    \r\n                }\r\n            });\r\n    \r\n            thisList.setOnItemLongClickListener(new AdapterView.OnItemLongClickListener() {\r\n                @Override\r\n                public boolean onItemLongClick(AdapterView&lt;?&gt; parent, View view, int position, long id) {\r\n                    String title = getString(R.string.alert_dialogue_title);\r\n                    String message = getString(R.string.alert_dialogue_message);\r\n                    String pos_button = getString(R.string.pos_button);\r\n                    String neg_button = getString(R.string.neg_button);\r\n                    alertDIalogBuilder.setTitle(title);\r\n                    alertDIalogBuilder.setMessage(message + &quot; &quot; + position);\r\n                    alertDIalogBuilder.setPositiveButton(pos_button, (click, arg) -&gt; {\r\n                        arrayList.remove(position);\r\n                        adapter.notifyDataSetChanged();\r\n                    });\r\n                    alertDIalogBuilder.setNegativeButton(neg_button, (click, arg) -&gt; {\r\n    \r\n                    });\r\n                   alertDIalogBuilder.create();\r\n                   alertDIalogBuilder.show();\r\n    \r\n                    return false;\r\n                }\r\n            });\r\n    \r\n            cursor = dbOpener.readData();\r\n            int nameColIndex = cursor.getColumnIndex(&quot;COL_ITEM_NAME&quot;);\r\n            int urgentColIndex = cursor.getColumnIndex(&quot;COL_URGENT&quot;);\r\n            int idColIndex = cursor.getColumnIndex(&quot;COL_ID&quot;);\r\n    \r\n            for(int i = 0; i &lt; cursor.getCount(); i++) {\r\n                String name = cursor.getString(nameColIndex);\r\n                int urgentHolder = cursor.getInt(urgentColIndex);\r\n                long id = cursor.getLong(idColIndex);\r\n                boolean converter = false;\r\n                if(urgentHolder == 1) {\r\n                    converter = true;\r\n                } else {\r\n                    converter = false;\r\n                }\r\n                arrayList.add(new toDoItem(name, converter));\r\n            }\r\n        }\r\n    }\r\n\r\nDatabase Opener:\r\n\r\n    package com.example.lab2;\r\n    \r\n    import android.content.ContentValues;\r\n    import android.content.Context;\r\n    import android.database.Cursor;\r\n    import android.database.sqlite.SQLiteDatabase;\r\n    import android.database.sqlite.SQLiteOpenHelper;\r\n    import android.widget.Toast;\r\n    \r\n    public class dbOpener extends SQLiteOpenHelper {\r\n    \r\n        protected final static String DATABASE_NAME = &quot;toDoListDB&quot;;\r\n        protected final static int VERSION_NUM = 1;\r\n        public final static String TABLE_NAME = &quot;TO_DO_ITEMS&quot;;\r\n        public final static String COL_ITEM_NAME = &quot;ITEM&quot;;\r\n        public final static String COL_URGENT = &quot;URGENT&quot;;\r\n        public final static String COL_ID = &quot;_id&quot;;\r\n        private Context ctx;\r\n        String [] columns = {dbOpener.COL_ITEM_NAME, dbOpener.COL_ITEM_NAME, dbOpener.COL_URGENT};\r\n    \r\n        public dbOpener(Context ctx) {super(ctx, DATABASE_NAME, null, VERSION_NUM);\r\n            \r\n            this.ctx = ctx;\r\n        }\r\n    \r\n        @Override\r\n        public void onCreate(SQLiteDatabase db) {\r\n    \r\n            db.execSQL(&quot;CREATE TABLE &quot; + TABLE_NAME + &quot; (_id INTEGER PRIMARY KEY AUTOINCREMENT, &quot; + COL_ITEM_NAME\r\n                    + &quot; TEXT,&quot; + COL_URGENT + &quot; INTEGER)&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\r\n    \r\n            db.execSQL(&quot;DROP TABLE IF EXISTS &quot; + TABLE_NAME);\r\n            onCreate(db);\r\n            }\r\n    \r\n        void addItem(String itemName, int urgent) {\r\n            SQLiteDatabase db = this.getWritableDatabase();\r\n            ContentValues cnt = new ContentValues();\r\n            cnt.put(COL_ITEM_NAME, itemName);\r\n            cnt.put(COL_URGENT, urgent);\r\n            long result = db.insert(TABLE_NAME, null, cnt);\r\n            if(result == -1) {\r\n                Toast.makeText(ctx, &quot;Failure&quot;, Toast.LENGTH_SHORT).show();\r\n            } else {\r\n                Toast.makeText(ctx, &quot;Success&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n    \r\n        Cursor readData() {\r\n            SQLiteDatabase db = this.getReadableDatabase();\r\n            Cursor results = db.rawQuery(&quot;SELECT * from &quot; + TABLE_NAME, null);\r\n            return results;\r\n        }\r\n    \r\n        }\r\n\r\nError message:\r\n\r\n    E/AndroidRuntime: FATAL EXCEPTION: main\r\n        Process: com.example.lab2, PID: 15645\r\n        java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.lab2/com.example.lab2.MainActivity}: android.database.CursorIndexOutOfBoundsException: Index -1 requested, with a size of 3\r\n            at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2913)\r\n            at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3048)\r\n            at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:78)\r\n            at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:108)\r\n            at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:68)\r\n            at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1808)\r\n            at android.os.Handler.dispatchMessage(Handler.java:106)\r\n            at android.os.Looper.loop(Looper.java:193)\r\n            at android.app.ActivityThread.main(ActivityThread.java:6669)\r\n            at java.lang.reflect.Method.invoke(Native Method)\r\n            at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)\r\n            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:858)\r\n         Caused by: android.database.CursorIndexOutOfBoundsException: Index -1 requested, with a size of 3\r\n            at android.database.AbstractCursor.checkPosition(AbstractCursor.java:468)\r\n            at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:136)\r\n            at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:50)\r\n            at com.example.lab2.MainActivity.onCreate(MainActivity.java:152)\r\n            at android.app.Activity.performCreate(Activity.java:7136)\r\n            at android.app.Activity.performCreate(Activity.java:7127)\r\n            at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1271)\r\n            at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2893)\r\n            at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3048) \r\n            at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:78) \r\n            at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:108) \r\n            at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:68) \r\n            at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1808) \r\n            at android.os.Handler.dispatchMessage(Handler.java:106) \r\n            at android.os.Looper.loop(Looper.java:193) \r\n            at android.app.ActivityThread.main(ActivityThread.java:6669) \r\n            at java.lang.reflect.Method.invoke(Native Method) \r\n            at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493) \r\n            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:858) \r\n    I/Process: Sending signal. PID: 15645 SIG: 9\r\n    Disconnected from the target VM, address: &#39;localhost:49568&#39;, transport: &#39;socket&#39;\r\n\r\n","title":"SQLite Cursor initializing as -1 and causing error","body":"<p>hoping someone can help me figure this issue out. I'm trying to build an app in Android Studio for school and am running into an issue when trying to get it to load results from a database using a cursor. I keep getting the error message that the cursor is initialized at -1 and it can't access column 0. Any ideas what might be causing it? Code is below along with error message:</p>\n<p>Main Activity:</p>\n<pre><code>package com.example.lab2;\n\nimport androidx.appcompat.app.AlertDialog;\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.content.Context;\nimport android.database.Cursor;\nimport android.graphics.Color;\nimport android.os.Bundle;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.Adapter;\nimport android.widget.AdapterView;\nimport android.widget.ArrayAdapter;\nimport android.widget.BaseAdapter;\nimport android.widget.Button;\nimport android.widget.EditText;\nimport android.widget.ListView;\nimport android.widget.Switch;\nimport android.widget.TextView;\nimport android.widget.Toast;\n\nimport java.util.ArrayList;\n\npublic class MainActivity extends AppCompatActivity {\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        Button btn = findViewById(R.id.the_button);\n        EditText input = findViewById(R.id.edittext);\n        Switch urgent = findViewById(R.id.the_switch);\n        dbOpener dbOpener = new dbOpener(MainActivity.this);\n        Cursor cursor;\n\n        ListView thisList = (ListView) findViewById(R.id.listview);\n        AlertDialog.Builder alertDIalogBuilder = new AlertDialog.Builder(this);\n\n        ArrayList&lt;toDoItem&gt; arrayList = new ArrayList&lt;toDoItem&gt;();\n\n\n        class MyAdapter extends BaseAdapter {\n\n            private Context context;\n            private ArrayList&lt;toDoItem&gt; items;\n\n            public MyAdapter(Context context, ArrayList&lt;toDoItem&gt; items) {\n                this.context = context;\n                this.items = items;\n            }\n\n            @Override\n            public int getCount() {\n                return arrayList.size();\n            }\n\n            @Override\n            public Object getItem(int position) {\n                return arrayList.get(position);\n            }\n\n            @Override\n            public long getItemId(int position) {\n                return position;\n            }\n\n            @Override\n            public View getView(int position, View convertView, ViewGroup parent) {\n\n                View mainView = LayoutInflater.from(context).inflate(R.layout.activity_main_todolayout, parent, false);\n                LayoutInflater inflater = getLayoutInflater();\n                if(mainView == null) {\n                    mainView = inflater.inflate(R.layout.activity_main_todolayout, parent, false);\n                }\n                TextView itemView = mainView.findViewById(R.id.to_do_items);\n                itemView.setText((arrayList.get(position).getToDoName().toString()));\n\n                if(arrayList.get(position).geturgent() == true) {\n                    mainView.setBackgroundColor(Color.RED);\n                    itemView.setTextColor(Color.WHITE);\n                }\n                return mainView;}\n        };\n\n        MyAdapter adapter = new MyAdapter(this, arrayList);\n\n        thisList.setAdapter(adapter);\n\n        urgent.setChecked(false);\n\n        urgent.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View V) {\n                urgent.setChecked(true);\n            }\n        });\n\n        btn.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n\n                String holder = input.getText().toString();\n                arrayList.add (new toDoItem(holder, urgent.isChecked()));\n                input.getText().clear();\n                adapter.notifyDataSetChanged();\n                int urgentStatus = 0;\n\n                if(urgent.isChecked() == true) {\n                    urgentStatus = 1;\n                } else {\n                    urgentStatus = 0;\n                }\n                dbOpener.addItem(holder, urgentStatus);\n                urgent.setChecked(false);\n\n            }\n        });\n\n        thisList.setOnItemLongClickListener(new AdapterView.OnItemLongClickListener() {\n            @Override\n            public boolean onItemLongClick(AdapterView&lt;?&gt; parent, View view, int position, long id) {\n                String title = getString(R.string.alert_dialogue_title);\n                String message = getString(R.string.alert_dialogue_message);\n                String pos_button = getString(R.string.pos_button);\n                String neg_button = getString(R.string.neg_button);\n                alertDIalogBuilder.setTitle(title);\n                alertDIalogBuilder.setMessage(message + &quot; &quot; + position);\n                alertDIalogBuilder.setPositiveButton(pos_button, (click, arg) -&gt; {\n                    arrayList.remove(position);\n                    adapter.notifyDataSetChanged();\n                });\n                alertDIalogBuilder.setNegativeButton(neg_button, (click, arg) -&gt; {\n\n                });\n               alertDIalogBuilder.create();\n               alertDIalogBuilder.show();\n\n                return false;\n            }\n        });\n\n        cursor = dbOpener.readData();\n        int nameColIndex = cursor.getColumnIndex(&quot;COL_ITEM_NAME&quot;);\n        int urgentColIndex = cursor.getColumnIndex(&quot;COL_URGENT&quot;);\n        int idColIndex = cursor.getColumnIndex(&quot;COL_ID&quot;);\n\n        for(int i = 0; i &lt; cursor.getCount(); i++) {\n            String name = cursor.getString(nameColIndex);\n            int urgentHolder = cursor.getInt(urgentColIndex);\n            long id = cursor.getLong(idColIndex);\n            boolean converter = false;\n            if(urgentHolder == 1) {\n                converter = true;\n            } else {\n                converter = false;\n            }\n            arrayList.add(new toDoItem(name, converter));\n        }\n    }\n}\n</code></pre>\n<p>Database Opener:</p>\n<pre><code>package com.example.lab2;\n\nimport android.content.ContentValues;\nimport android.content.Context;\nimport android.database.Cursor;\nimport android.database.sqlite.SQLiteDatabase;\nimport android.database.sqlite.SQLiteOpenHelper;\nimport android.widget.Toast;\n\npublic class dbOpener extends SQLiteOpenHelper {\n\n    protected final static String DATABASE_NAME = &quot;toDoListDB&quot;;\n    protected final static int VERSION_NUM = 1;\n    public final static String TABLE_NAME = &quot;TO_DO_ITEMS&quot;;\n    public final static String COL_ITEM_NAME = &quot;ITEM&quot;;\n    public final static String COL_URGENT = &quot;URGENT&quot;;\n    public final static String COL_ID = &quot;_id&quot;;\n    private Context ctx;\n    String [] columns = {dbOpener.COL_ITEM_NAME, dbOpener.COL_ITEM_NAME, dbOpener.COL_URGENT};\n\n    public dbOpener(Context ctx) {super(ctx, DATABASE_NAME, null, VERSION_NUM);\n        \n        this.ctx = ctx;\n    }\n\n    @Override\n    public void onCreate(SQLiteDatabase db) {\n\n        db.execSQL(&quot;CREATE TABLE &quot; + TABLE_NAME + &quot; (_id INTEGER PRIMARY KEY AUTOINCREMENT, &quot; + COL_ITEM_NAME\n                + &quot; TEXT,&quot; + COL_URGENT + &quot; INTEGER)&quot;);\n    }\n\n    @Override\n    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\n\n        db.execSQL(&quot;DROP TABLE IF EXISTS &quot; + TABLE_NAME);\n        onCreate(db);\n        }\n\n    void addItem(String itemName, int urgent) {\n        SQLiteDatabase db = this.getWritableDatabase();\n        ContentValues cnt = new ContentValues();\n        cnt.put(COL_ITEM_NAME, itemName);\n        cnt.put(COL_URGENT, urgent);\n        long result = db.insert(TABLE_NAME, null, cnt);\n        if(result == -1) {\n            Toast.makeText(ctx, &quot;Failure&quot;, Toast.LENGTH_SHORT).show();\n        } else {\n            Toast.makeText(ctx, &quot;Success&quot;, Toast.LENGTH_SHORT).show();\n        }\n    }\n\n    Cursor readData() {\n        SQLiteDatabase db = this.getReadableDatabase();\n        Cursor results = db.rawQuery(&quot;SELECT * from &quot; + TABLE_NAME, null);\n        return results;\n    }\n\n    }\n</code></pre>\n<p>Error message:</p>\n<pre><code>E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: com.example.lab2, PID: 15645\n    java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.lab2/com.example.lab2.MainActivity}: android.database.CursorIndexOutOfBoundsException: Index -1 requested, with a size of 3\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2913)\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3048)\n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:78)\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:108)\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:68)\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1808)\n        at android.os.Handler.dispatchMessage(Handler.java:106)\n        at android.os.Looper.loop(Looper.java:193)\n        at android.app.ActivityThread.main(ActivityThread.java:6669)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:858)\n     Caused by: android.database.CursorIndexOutOfBoundsException: Index -1 requested, with a size of 3\n        at android.database.AbstractCursor.checkPosition(AbstractCursor.java:468)\n        at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:136)\n        at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:50)\n        at com.example.lab2.MainActivity.onCreate(MainActivity.java:152)\n        at android.app.Activity.performCreate(Activity.java:7136)\n        at android.app.Activity.performCreate(Activity.java:7127)\n        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1271)\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2893)\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3048) \n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:78) \n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:108) \n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:68) \n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1808) \n        at android.os.Handler.dispatchMessage(Handler.java:106) \n        at android.os.Looper.loop(Looper.java:193) \n        at android.app.ActivityThread.main(ActivityThread.java:6669) \n        at java.lang.reflect.Method.invoke(Native Method) \n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493) \n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:858) \nI/Process: Sending signal. PID: 15645 SIG: 9\nDisconnected from the target VM, address: 'localhost:49568', transport: 'socket'\n</code></pre>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1459481975,"post_id":36347467,"comment_id":60316451,"body_markdown":"Did you move some files around or do some cleaning up? Could you have inadvertently deleted the files outside of Eclipse?","body":"Did you move some files around or do some cleaning up? Could you have inadvertently deleted the files outside of Eclipse?"},{"owner":{"account_id":6308366,"reputation":157,"user_id":4900762,"accept_rate":53,"display_name":"Tom&#225;s Dornas Perone"},"score":0,"creation_date":1459482029,"post_id":36347467,"comment_id":60316468,"body_markdown":"No, it&#39;s not possible. I never go to the workspace folder.","body":"No, it&#39;s not possible. I never go to the workspace folder."},{"owner":{"account_id":6308366,"reputation":157,"user_id":4900762,"accept_rate":53,"display_name":"Tom&#225;s Dornas Perone"},"score":0,"creation_date":1459482060,"post_id":36347467,"comment_id":60316484,"body_markdown":"I just use Eclipse. But I&#39;ve been having to import the workspace everytime I launch Eclipse, I dont know why..","body":"I just use Eclipse. But I&#39;ve been having to import the workspace everytime I launch Eclipse, I dont know why.."},{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":1,"creation_date":1459482139,"post_id":36347467,"comment_id":60316509,"body_markdown":"That&#39;s not normal, so something is seriously wrong with your installation.  However, without access to your computer it is going to be really hard for anyone here to help you.  Do you have any colleagues that can help?  StackOverflow is probably not the right place to be asking for help on this.","body":"That&#39;s not normal, so something is seriously wrong with your installation.  However, without access to your computer it is going to be really hard for anyone here to help you.  Do you have any colleagues that can help?  StackOverflow is probably not the right place to be asking for help on this."},{"owner":{"account_id":6308366,"reputation":157,"user_id":4900762,"accept_rate":53,"display_name":"Tom&#225;s Dornas Perone"},"score":0,"creation_date":1459482318,"post_id":36347467,"comment_id":60316570,"body_markdown":"I will try reinstalling Eclipse. I just found a solution. I had to go to .metadata/.history and search for some backup and I found it. It seems Eclipse saves the src files automatically.","body":"I will try reinstalling Eclipse. I just found a solution. I had to go to .metadata/.history and search for some backup and I found it. It seems Eclipse saves the src files automatically."},{"owner":{"account_id":6308366,"reputation":157,"user_id":4900762,"accept_rate":53,"display_name":"Tom&#225;s Dornas Perone"},"score":0,"creation_date":1459482372,"post_id":36347467,"comment_id":60316584,"body_markdown":"Thank you anyway Jim! And I will ask my colleagues if they can help me on this. Eclipse is really pissing me off.","body":"Thank you anyway Jim! And I will ask my colleagues if they can help me on this. Eclipse is really pissing me off."}],"answers":[{"tags":[],"owner":{"account_id":4236471,"reputation":1687,"user_id":3467488,"display_name":"kiwiron"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1459493273,"creation_date":1459493273,"answer_id":36349745,"question_id":36347467,"body_markdown":"The first step in debugging this problem is to find out if the code is still exists without using Eclipse. Several possibilities come to mind:\r\n\r\n 1. The code is still where you expect, the files exist and the content is OK.\r\n 2. The code is still where you expect, the files exist, but the files are empty.\r\n 3. The workspace directory does not exist any more.\r\n\r\nYou need to use a file explorer program to find the files and check they are not empty. Try opening them with Notepad++ or similar. If you are lucky, option 1 will be the answer, and Eclipse has got confused. Just use File/Switch Workspace to set the workspace to the directory and all should come right.\r\n\r\nOptions 2 &amp; 3 indicate you have lost data. There is probably little chance of recovery. Revert to your backups (you do have them?). Otherwise learn a lesson and set up a GIT or SVN server (or subscribe to a cloud service). I just use a very old laptop running Ubuntu with SVN server installed. \r\n\r\nAs a side issue, Eclipse does not randomly delete or empty files. There are millions of developers world-wide using Eclipse, and if it existed,  such behavior would be all over the internet. ","title":"Eclipse Mars: code is gone","body":"<p>The first step in debugging this problem is to find out if the code is still exists without using Eclipse. Several possibilities come to mind:</p>\n\n<ol>\n<li>The code is still where you expect, the files exist and the content is OK.</li>\n<li>The code is still where you expect, the files exist, but the files are empty.</li>\n<li>The workspace directory does not exist any more.</li>\n</ol>\n\n<p>You need to use a file explorer program to find the files and check they are not empty. Try opening them with Notepad++ or similar. If you are lucky, option 1 will be the answer, and Eclipse has got confused. Just use File/Switch Workspace to set the workspace to the directory and all should come right.</p>\n\n<p>Options 2 &amp; 3 indicate you have lost data. There is probably little chance of recovery. Revert to your backups (you do have them?). Otherwise learn a lesson and set up a GIT or SVN server (or subscribe to a cloud service). I just use a very old laptop running Ubuntu with SVN server installed. </p>\n\n<p>As a side issue, Eclipse does not randomly delete or empty files. There are millions of developers world-wide using Eclipse, and if it existed,  such behavior would be all over the internet. </p>\n"},{"tags":[],"owner":{"account_id":25539388,"reputation":1,"user_id":19325774,"display_name":"Faezeh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655063393,"creation_date":1655063393,"answer_id":72595394,"question_id":36347467,"body_markdown":"I had the same problem and found my file with a strange name in local history with this path:\r\n\r\n&quot;.metadata/.plugins/org.eclipse.core.resources/.history/&quot;\r\n\r\n It was not the last version but better than nothing :)","title":"Eclipse Mars: code is gone","body":"<p>I had the same problem and found my file with a strange name in local history with this path:</p>\n<p>&quot;.metadata/.plugins/org.eclipse.core.resources/.history/&quot;</p>\n<p>It was not the last version but better than nothing :)</p>\n"}],"owner":{"account_id":6308366,"reputation":157,"user_id":4900762,"accept_rate":53,"display_name":"Tom&#225;s Dornas Perone"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":209,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1655063393,"creation_date":1459480999,"question_id":36347467,"body_markdown":"Please, help! I opened Eclipse Mars to continue coding and my code is gone! I don&#39;t know what could have caused this but it&#39;s all gone. Does anyone have any idea what can I do?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/63nfm.png\r\n\r\nNote: I tried to right-click the java file-&gt;Replace With-&gt;Previous from local history. But a message says &quot;No local history available for selected resource&quot;. Is there any other way?\r\n\r\nThank you in advance!","title":"Eclipse Mars: code is gone","body":"<p>Please, help! I opened Eclipse Mars to continue coding and my code is gone! I don't know what could have caused this but it's all gone. Does anyone have any idea what can I do?</p>\n\n<p><a href=\"https://i.stack.imgur.com/63nfm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/63nfm.png\" alt=\"enter image description here\"></a></p>\n\n<p>Note: I tried to right-click the java file->Replace With->Previous from local history. But a message says \"No local history available for selected resource\". Is there any other way?</p>\n\n<p>Thank you in advance!</p>\n"},{"tags":["java","batch-file","jvm"],"comments":[{"owner":{"account_id":7745,"reputation":189755,"user_id":13531,"accept_rate":75,"display_name":"Michael Myers"},"score":0,"creation_date":1359662160,"post_id":14633998,"comment_id":20442199,"body_markdown":"Have you tried simply passing the options instead of setting the environment variable?","body":"Have you tried simply passing the options instead of setting the environment variable?"},{"owner":{"account_id":1600235,"reputation":998,"user_id":1481401,"accept_rate":41,"display_name":"IS_EV"},"score":0,"creation_date":1359662607,"post_id":14633998,"comment_id":20442417,"body_markdown":"@Michael Myers I didnt quite understand what you meant.. sorry..","body":"@Michael Myers I didnt quite understand what you meant.. sorry.."},{"owner":{"account_id":7745,"reputation":189755,"user_id":13531,"accept_rate":75,"display_name":"Michael Myers"},"score":2,"creation_date":1359662667,"post_id":14633998,"comment_id":20442441,"body_markdown":"I mean `java -Xmx1024m -Xms256m -XX:+HeapDumpOnOutOfMemoryError -cp TA.jar com.myClass` instead of messing with JAVA_OPTS","body":"I mean <code>java -Xmx1024m -Xms256m -XX:+HeapDumpOnOutOfMemoryError -cp TA.jar com.myClass</code> instead of messing with JAVA_OPTS"},{"owner":{"account_id":96904,"reputation":6821,"user_id":263149,"accept_rate":81,"display_name":"sharakan"},"score":1,"creation_date":1359662783,"post_id":14633998,"comment_id":20442495,"body_markdown":"possible dupe?  http://stackoverflow.com/questions/2011311/running-java-with-java-opts-env-variable","body":"possible dupe?  <a href=\"http://stackoverflow.com/questions/2011311/running-java-with-java-opts-env-variable\" title=\"running java with java opts env variable\">stackoverflow.com/questions/2011311/&hellip;</a>"},{"owner":{"account_id":1600235,"reputation":998,"user_id":1481401,"accept_rate":41,"display_name":"IS_EV"},"score":0,"creation_date":1359663124,"post_id":14633998,"comment_id":20442665,"body_markdown":"@MichaelMyers: When I tried that it is showing the error - Could not find or load main class Xmx1024m","body":"@MichaelMyers: When I tried that it is showing the error - Could not find or load main class Xmx1024m"},{"owner":{"account_id":347037,"reputation":79658,"user_id":680925,"display_name":"Perception"},"score":0,"creation_date":1359663165,"post_id":14633998,"comment_id":20442681,"body_markdown":"@Bohemian - you shouldn&#39;t have deleted your answer. JAVA_OPTS is by no means used automatically by the JVM.","body":"@Bohemian - you shouldn&#39;t have deleted your answer. JAVA_OPTS is by no means used automatically by the JVM."},{"owner":{"account_id":7745,"reputation":189755,"user_id":13531,"accept_rate":75,"display_name":"Michael Myers"},"score":0,"creation_date":1359663510,"post_id":14633998,"comment_id":20442828,"body_markdown":"@paulb: `java -cp TA.jar com.myClass -Xmx1024m -Xms256m -XX:+HeapDumpOnOutOfMemoryError` then?","body":"@paulb: <code>java -cp TA.jar com.myClass -Xmx1024m -Xms256m -XX:+HeapDumpOnOutOfMemoryError</code> then?"}],"answers":[{"tags":[],"owner":{"account_id":1658378,"reputation":2210,"user_id":1527244,"accept_rate":82,"display_name":"Danyel"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1359662980,"creation_date":1359662980,"answer_id":14634250,"question_id":14633998,"body_markdown":"It should be _JAVA_OPTIONS instead of JAVA_OPTS.","title":"Unable to set JVM parameters/arguments (Xmx and Xms) through .bat file","body":"<p>It should be _JAVA_OPTIONS instead of JAVA_OPTS.</p>\n"},{"tags":[],"owner":{"account_id":296472,"reputation":2223,"user_id":601452,"accept_rate":100,"display_name":"Caesar Ralf"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1359663876,"creation_date":1359663255,"answer_id":14634325,"question_id":14633998,"body_markdown":"Use the arguments directly\r\n\r\n    java -Xmx1024m -Xms256m -XX:+HeapDumpOnOutOfMemoryError -cp TA.jar com.myClass\r\n\r\nYou don&#39;t need to set them at `JAVA_OPTIONS`. To be sure that your application is using the parameters that you want:\r\n\r\n - open `jvisualvm` that comes with java. Just type &quot;jvisualvm&quot; at command line if you have set java correctly at your path.\r\n - open the vm started to your application.\r\n - check under &quot;JVM Arguments&quot; in the &quot;[Overview][1]&quot; tab.\r\n\r\nThere should be set your jvm options.\r\n\r\n\r\n  [1]: http://visualvm.java.net/overview_tab.html","title":"Unable to set JVM parameters/arguments (Xmx and Xms) through .bat file","body":"<p>Use the arguments directly</p>\n\n<pre><code>java -Xmx1024m -Xms256m -XX:+HeapDumpOnOutOfMemoryError -cp TA.jar com.myClass\n</code></pre>\n\n<p>You don't need to set them at <code>JAVA_OPTIONS</code>. To be sure that your application is using the parameters that you want:</p>\n\n<ul>\n<li>open <code>jvisualvm</code> that comes with java. Just type \"jvisualvm\" at command line if you have set java correctly at your path.</li>\n<li>open the vm started to your application.</li>\n<li>check under \"JVM Arguments\" in the \"<a href=\"http://visualvm.java.net/overview_tab.html\" rel=\"nofollow\">Overview</a>\" tab.</li>\n</ul>\n\n<p>There should be set your jvm options.</p>\n"}],"owner":{"account_id":1600235,"reputation":998,"user_id":1481401,"accept_rate":41,"display_name":"IS_EV"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16752,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":14634325,"answer_count":2,"score":6,"last_activity_date":1655063311,"creation_date":1359661962,"question_id":14633998,"body_markdown":"I am able to run a Java program through Eclipse by setting the VM arguments as -Xmx1024m\r\n-Xms256M. Now I want to run the same Java program (jar) through a .bat file in Windows. I am setting the JVM values in the file as follows\r\n\r\n    @echo off\r\n    set JAVA_OPTS=&quot;-Xmx1024m -Xms256m -XX:+HeapDumpOnOutOfMemoryError&quot;\r\n    java -cp TA.jar com.myClass\r\n\r\nBut when I run the same program through batch (.bat in Windows XP) it throws Out of Memory error and I suspect that the JVM setting through the .bat file is not working.\r\n\r\n","title":"Unable to set JVM parameters/arguments (Xmx and Xms) through .bat file","body":"<p>I am able to run a Java program through Eclipse by setting the VM arguments as -Xmx1024m\n-Xms256M. Now I want to run the same Java program (jar) through a .bat file in Windows. I am setting the JVM values in the file as follows</p>\n<pre><code>@echo off\nset JAVA_OPTS=&quot;-Xmx1024m -Xms256m -XX:+HeapDumpOnOutOfMemoryError&quot;\njava -cp TA.jar com.myClass\n</code></pre>\n<p>But when I run the same program through batch (.bat in Windows XP) it throws Out of Memory error and I suspect that the JVM setting through the .bat file is not working.</p>\n"},{"tags":["java","regex","brackets"],"comments":[{"owner":{"account_id":1944253,"reputation":37590,"user_id":1749753,"display_name":"jlordo"},"score":0,"creation_date":1360454643,"post_id":14792931,"comment_id":20715378,"body_markdown":"possible duplicate of [Java splitting a string while ignoring any delimiters between brackets](http://stackoverflow.com/questions/9656212/java-splitting-a-string-while-ignoring-any-delimiters-between-brackets)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/9656212/java-splitting-a-string-while-ignoring-any-delimiters-between-brackets\">Java splitting a string while ignoring any delimiters between brackets</a>"},{"owner":{"account_id":73496,"reputation":25351,"user_id":211627,"accept_rate":77,"display_name":"JDB"},"score":4,"creation_date":1360464088,"post_id":14792931,"comment_id":20717137,"body_markdown":"@jlordo - The linked question is **not a duplicate**. The user is not attempting to balance brackets - there&#39;s only one layer, which is totally possible using regex.","body":"@jlordo - The linked question is <b>not a duplicate</b>. The user is not attempting to balance brackets - there&#39;s only one layer, which is totally possible using regex."},{"owner":{"account_id":1944253,"reputation":37590,"user_id":1749753,"display_name":"jlordo"},"score":0,"creation_date":1360493462,"post_id":14792931,"comment_id":20721813,"body_markdown":"@Cyborgx37: If you&#39;re sure, please post a regex solution. The answer by Stephen C does not work.","body":"@Cyborgx37: If you&#39;re sure, please post a regex solution. The answer by Stephen C does not work."},{"owner":{"account_id":73496,"reputation":25351,"user_id":211627,"accept_rate":77,"display_name":"JDB"},"score":1,"creation_date":1360505560,"post_id":14792931,"comment_id":20724752,"body_markdown":"@jlordo - Pshemo already has. `,(?![^(]*\\))` works great on http://myregexp.com. Here&#39;s a link to it on: http://regexr.com?33njn","body":"@jlordo - Pshemo already has. <code>,(?![^(]*\\))</code> works great on <a href=\"http://myregexp.com\" rel=\"nofollow noreferrer\">myregexp.com</a>. Here&#39;s a link to it on: <a href=\"http://regexr.com?33njn\" rel=\"nofollow noreferrer\">regexr.com?33njn</a>"},{"owner":{"account_id":1944253,"reputation":37590,"user_id":1749753,"display_name":"jlordo"},"score":0,"creation_date":1360506622,"post_id":14792931,"comment_id":20724971,"body_markdown":"@Cyborgx37: Overread the regex part of his answer. And yes, it works just fine.","body":"@Cyborgx37: Overread the regex part of his answer. And yes, it works just fine."}],"answers":[{"tags":[],"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1360508741,"creation_date":1360455179,"answer_id":14793147,"question_id":14792931,"body_markdown":"If you have to use regex you can split on `,(?![^(]*\\\\))`\r\n\r\nIf not then **one simple iteration** over characters can do the trick\r\n\r\n\tString data=&quot;300x250,468x60,300x400v(480x320,768x1024,100x100),400x300v,640x480v(200x200,728x90)&quot;;\r\n\r\n\tList&lt;String&gt; tokens=new ArrayList&lt;&gt;();\r\n\tStringBuilder buffer=new StringBuilder();\r\n\r\n\tint parenthesesCounter=0;\r\n\r\n\tfor (char c : data.toCharArray()){\r\n\t    if (c==&#39;(&#39;) parenthesesCounter++;\r\n\t    if (c==&#39;)&#39;) parenthesesCounter--;\r\n\t    if (c==&#39;,&#39; &amp;&amp; parenthesesCounter==0){\r\n\t        //lets add token inside buffer to our tokens\r\n\t        tokens.add(buffer.toString());\r\n\t        //now we need to clear buffer  \r\n\t        buffer.delete(0, buffer.length());\r\n\t    }\r\n\t    else \r\n\t        buffer.append(c);\r\n\t}\r\n\t//lets not forget about part after last comma\r\n    tokens.add(buffer.toString());\r\n\r\n    String[] splitedArray=tokens.toArray(new String[tokens.size()]);\r\n\r\n    //lets test what is inside our array\r\n    for (String s : splitedArray)\r\n        System.out.println(s);\r\n\r\nOutput\r\n\r\n    300x250\r\n    468x60\r\n    300x400v(480x320,768x1024,100x100)\r\n    400x300v\r\n    640x480v(200x200,728x90)\r\n\r\n","title":"Java Regex - split comma separated list, but exclude commas within parentheses","body":"<p>If you have to use regex you can split on <code>,(?![^(]*\\\\))</code></p>\n\n<p>If not then <strong>one simple iteration</strong> over characters can do the trick</p>\n\n<pre><code>String data=\"300x250,468x60,300x400v(480x320,768x1024,100x100),400x300v,640x480v(200x200,728x90)\";\n\nList&lt;String&gt; tokens=new ArrayList&lt;&gt;();\nStringBuilder buffer=new StringBuilder();\n\nint parenthesesCounter=0;\n\nfor (char c : data.toCharArray()){\n    if (c=='(') parenthesesCounter++;\n    if (c==')') parenthesesCounter--;\n    if (c==',' &amp;&amp; parenthesesCounter==0){\n        //lets add token inside buffer to our tokens\n        tokens.add(buffer.toString());\n        //now we need to clear buffer  \n        buffer.delete(0, buffer.length());\n    }\n    else \n        buffer.append(c);\n}\n//lets not forget about part after last comma\ntokens.add(buffer.toString());\n\nString[] splitedArray=tokens.toArray(new String[tokens.size()]);\n\n//lets test what is inside our array\nfor (String s : splitedArray)\n    System.out.println(s);\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>300x250\n468x60\n300x400v(480x320,768x1024,100x100)\n400x300v\n640x480v(200x200,728x90)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1081611,"reputation":41298,"user_id":1078583,"accept_rate":69,"display_name":"zx81"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1401760077,"creation_date":1401760077,"answer_id":24005909,"question_id":14792931,"body_markdown":"akburg, resurrecting this question for completion because it had another simple solution that wasn&#39;t mentioned. This situation is similar to [Match (or replace) a pattern except in situations s1, s2, s3 etc][1]. \r\n\r\nHere&#39;s our simple regex:\r\n\r\n    \\([^)]*\\)|(,)\r\n\r\nThe left side of the alternation matches complete `(parentheses)` tags. We will ignore these matches. The right side matches and captures commas to Group 1, and we know they are the right commas because they were not matched by the expression on the left.\r\n\r\nThis program shows how to use the regex (see the results at the bottom of the [online demo][2]):\r\n\r\n    import java.util.*;\r\n    import java.io.*;\r\n    import java.util.regex.*;\r\n    import java.util.List;\r\n     \r\n    class Program {\r\n    public static void main (String[] args) throws java.lang.Exception\t{\r\n     \r\n    String subject = &quot;300x250,468x60,300x400v(480x320,768x1024,100x100),400x300v,640x480v(200x200,728x90)&quot;;\r\n    Pattern regex = Pattern.compile(&quot;\\\\([^)]*\\\\)|(,)&quot;);\r\n    Matcher m = regex.matcher(subject);\r\n    StringBuffer b= new StringBuffer();\r\n    while (m.find()) {\r\n    if(m.group(1) != null) m.appendReplacement(b, &quot;SplitHere&quot;);\r\n    else m.appendReplacement(b, m.group(0));\r\n    }\r\n    m.appendTail(b);\r\n    String replaced = b.toString();\r\n    String[] splits = replaced.split(&quot;SplitHere&quot;);\r\n    for (String split : splits) System.out.println(split);\r\n    } // end main\r\n    } // end Program\r\n\r\n**Reference** \r\n\r\n [How to match (or replace) a pattern except in situations s1, s2, s3...][3]\r\n\r\n\r\n  [1]: https://stackoverflow.com/q/23589174\r\n  [2]: http://ideone.com/4oDZfj\r\n  [3]: https://stackoverflow.com/q/23589174","title":"Java Regex - split comma separated list, but exclude commas within parentheses","body":"<p>akburg, resurrecting this question for completion because it had another simple solution that wasn't mentioned. This situation is similar to <a href=\"https://stackoverflow.com/q/23589174\">Match (or replace) a pattern except in situations s1, s2, s3 etc</a>. </p>\n\n<p>Here's our simple regex:</p>\n\n<pre><code>\\([^)]*\\)|(,)\n</code></pre>\n\n<p>The left side of the alternation matches complete <code>(parentheses)</code> tags. We will ignore these matches. The right side matches and captures commas to Group 1, and we know they are the right commas because they were not matched by the expression on the left.</p>\n\n<p>This program shows how to use the regex (see the results at the bottom of the <a href=\"http://ideone.com/4oDZfj\" rel=\"nofollow noreferrer\">online demo</a>):</p>\n\n<pre><code>import java.util.*;\nimport java.io.*;\nimport java.util.regex.*;\nimport java.util.List;\n\nclass Program {\npublic static void main (String[] args) throws java.lang.Exception  {\n\nString subject = \"300x250,468x60,300x400v(480x320,768x1024,100x100),400x300v,640x480v(200x200,728x90)\";\nPattern regex = Pattern.compile(\"\\\\([^)]*\\\\)|(,)\");\nMatcher m = regex.matcher(subject);\nStringBuffer b= new StringBuffer();\nwhile (m.find()) {\nif(m.group(1) != null) m.appendReplacement(b, \"SplitHere\");\nelse m.appendReplacement(b, m.group(0));\n}\nm.appendTail(b);\nString replaced = b.toString();\nString[] splits = replaced.split(\"SplitHere\");\nfor (String split : splits) System.out.println(split);\n} // end main\n} // end Program\n</code></pre>\n\n<p><strong>Reference</strong> </p>\n\n<p><a href=\"https://stackoverflow.com/q/23589174\">How to match (or replace) a pattern except in situations s1, s2, s3...</a></p>\n"}],"owner":{"account_id":2348270,"reputation":43,"user_id":2057861,"display_name":"akburg"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5239,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":14793147,"answer_count":2,"score":4,"last_activity_date":1655063241,"creation_date":1360453428,"question_id":14792931,"body_markdown":"I&#39;m trying to write regex that will split a Java string like this:\r\n\r\n    300x250,468x60,300x400v(480x320,768x1024,100x100),400x300v,640x480v(200x200,728x90)\r\n\r\nin to something like this:\r\n\r\n    300x250 \r\n    468x60\r\n    300x400v(480x320,768x1024,100x100)\r\n    400x300v\r\n    640x480v(200x200,728x90)\r\n\r\nI&#39;ve been trying `\\,(\\()?` but this ends up selecting the commas in the parentheses as well.  \r\n\r\n","title":"Java Regex - split comma separated list, but exclude commas within parentheses","body":"<p>I'm trying to write regex that will split a Java string like this:</p>\n<pre><code>300x250,468x60,300x400v(480x320,768x1024,100x100),400x300v,640x480v(200x200,728x90)\n</code></pre>\n<p>in to something like this:</p>\n<pre><code>300x250 \n468x60\n300x400v(480x320,768x1024,100x100)\n400x300v\n640x480v(200x200,728x90)\n</code></pre>\n<p>I've been trying <code>\\,(\\()?</code> but this ends up selecting the commas in the parentheses as well.</p>\n"},{"tags":["java","exception","visitor-pattern"],"answers":[{"tags":[],"owner":{"account_id":23968828,"reputation":104,"user_id":17957852,"display_name":"Debanjan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1655061875,"creation_date":1655061875,"answer_id":72595248,"question_id":72595022,"body_markdown":"You can make `UndefinedSubroutineException` a RuntimeException. In that case since it is an unchecked exception, and you will not have to change your method signature.\r\n\r\nInside your test case you can now add a try catch block to handle the scenario.","title":"throw own defined exception in visitor pattern java","body":"<p>You can make <code>UndefinedSubroutineException</code> a RuntimeException. In that case since it is an unchecked exception, and you will not have to change your method signature.</p>\n<p>Inside your test case you can now add a try catch block to handle the scenario.</p>\n"}],"owner":{"account_id":1442354,"reputation":1913,"user_id":1362082,"accept_rate":53,"display_name":"Franz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1655063114,"creation_date":1655060037,"question_id":72595022,"body_markdown":"We  have to  write an app using the visitor design pattern  like ( https://www.baeldung.com/java-visitor-pattern ) , one example  element looks like, implementing interface Stmt : \r\n\r\n    public class Call implements Stmt {\r\n        int hash_id;\r\n        private String id;\r\n        public Call(String id )   { this.id = id;}\r\n    \r\n    \r\n        public void accept(Visitor v) {\r\n            System.out.println(&quot;call.accept&quot;);\r\n            v.visit( this);\r\n        }\r\n    \r\n        public String getId () {  return id;}\r\n        ....}\r\n\r\nThe vistor Interface  looks like this  code below , I may not change the  interface  code. \r\n\r\n    public interface Visitor {\r\n        ... \r\n        ...\r\n    \r\n        void visit(Subroutine subroutine);\r\n    \r\n        void visit(Call call);\r\n    }\r\n\r\n\r\n\r\nInside the  Implementation  of an  Visitor (AbstractVisitor class) I have to throw a &quot;UndefinedSubroutineException if the id (type string)  of a call class is not yet  existing  in the hashtable SubBefehle.\r\nThe existing  code with try catch statemenets never send as an exception  to my testcase ....\r\n\r\n\r\n\r\n    public abstract class AbstractVisitor implements Visitor {\r\n    .....\r\n     private Hashtable&lt;String, Integer&gt; SubBefehle = new Hashtable&lt; String, Integer&gt;();\r\n    \r\n    @Override\r\n    public void visit(Call call)  {\r\n        ///  implementation work :\r\n    \r\n           try {\r\n    \r\n               IsFunctionNameExisting(call.getId());\r\n           }\r\n           catch (UndefinedSubroutineException e){\r\n              // throw new UndefinedSubroutineException(&quot;&quot;);\r\n           }\r\n    }\r\n    \r\n    public void IsFunctionNameExisting(String fctname) throws UndefinedSubroutineException {\r\n        boolean IsFound = false;\r\n    \r\n        if (SubBefehle.containsKey(fctname)) {\r\n            System.out.println(&quot;Abstract visitor :  function name found -&gt; PASS  &quot;);\r\n            IsFound = true;\r\n        }\r\n        else {\r\n            System.out.println(&quot;Abstract visitor : function name not yet found -&gt; EXCEPTION &quot;);\r\n             throw new UndefinedSubroutineException(&quot; function name not found in function name list !&quot;);\r\n        }\r\n    \r\n\r\n\r\nif the call IsFunctionNameExisting(call.getId()) is false if the name is not found inside the hash table. My optional solution is also not working .\r\n\r\n    ///  optional solution \r\n    @Override\r\n    public void visit(Call call) throws UndefinedSubroutineException  {\r\n        ///  implementation work :\r\n               IsFunctionNameExisting(call.getId());\r\n           }\r\n\r\n\r\nthe corresponding testcase looks like this :\r\n\r\n\r\n \r\n\r\n    @Test \r\n    public void testUndefinedSubroutine() {\r\n        try {\r\n            PROG_TEST.accept(testVisitor);\r\n            fail(&quot;Exception expected&quot;);\r\n        } catch (UndefinedSubroutineException e) {\r\n           ........\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\npackage turtle.logo;\r\n\r\n\r\nthe defintion  of UndefinedSubroutineException goes like  this : \r\n\r\n    public class UndefinedSubroutineException  extends Throwable {\r\n    \r\n        public  UndefinedSubroutineException (String message) {\r\n    \r\n            super(message);\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\nPS:  I can&#39;t  change the test cases and the interface  definition  &amp;  \r\nI hope someone can help us with this problem.\r\n","title":"throw own defined exception in visitor pattern java","body":"<p>We  have to  write an app using the visitor design pattern  like ( <a href=\"https://www.baeldung.com/java-visitor-pattern\" rel=\"nofollow noreferrer\">https://www.baeldung.com/java-visitor-pattern</a> ) , one example  element looks like, implementing interface Stmt :</p>\n<pre><code>public class Call implements Stmt {\n    int hash_id;\n    private String id;\n    public Call(String id )   { this.id = id;}\n\n\n    public void accept(Visitor v) {\n        System.out.println(&quot;call.accept&quot;);\n        v.visit( this);\n    }\n\n    public String getId () {  return id;}\n    ....}\n</code></pre>\n<p>The vistor Interface  looks like this  code below , I may not change the  interface  code.</p>\n<pre><code>public interface Visitor {\n    ... \n    ...\n\n    void visit(Subroutine subroutine);\n\n    void visit(Call call);\n}\n</code></pre>\n<p>Inside the  Implementation  of an  Visitor (AbstractVisitor class) I have to throw a &quot;UndefinedSubroutineException if the id (type string)  of a call class is not yet  existing  in the hashtable SubBefehle.\nThe existing  code with try catch statemenets never send as an exception  to my testcase ....</p>\n<pre><code>public abstract class AbstractVisitor implements Visitor {\n.....\n private Hashtable&lt;String, Integer&gt; SubBefehle = new Hashtable&lt; String, Integer&gt;();\n\n@Override\npublic void visit(Call call)  {\n    ///  implementation work :\n\n       try {\n\n           IsFunctionNameExisting(call.getId());\n       }\n       catch (UndefinedSubroutineException e){\n          // throw new UndefinedSubroutineException(&quot;&quot;);\n       }\n}\n\npublic void IsFunctionNameExisting(String fctname) throws UndefinedSubroutineException {\n    boolean IsFound = false;\n\n    if (SubBefehle.containsKey(fctname)) {\n        System.out.println(&quot;Abstract visitor :  function name found -&gt; PASS  &quot;);\n        IsFound = true;\n    }\n    else {\n        System.out.println(&quot;Abstract visitor : function name not yet found -&gt; EXCEPTION &quot;);\n         throw new UndefinedSubroutineException(&quot; function name not found in function name list !&quot;);\n    }\n</code></pre>\n<p>if the call IsFunctionNameExisting(call.getId()) is false if the name is not found inside the hash table. My optional solution is also not working .</p>\n<pre><code>///  optional solution \n@Override\npublic void visit(Call call) throws UndefinedSubroutineException  {\n    ///  implementation work :\n           IsFunctionNameExisting(call.getId());\n       }\n</code></pre>\n<p>the corresponding testcase looks like this :</p>\n<pre><code>@Test \npublic void testUndefinedSubroutine() {\n    try {\n        PROG_TEST.accept(testVisitor);\n        fail(&quot;Exception expected&quot;);\n    } catch (UndefinedSubroutineException e) {\n       ........\n    }\n}\n</code></pre>\n<p>package turtle.logo;</p>\n<p>the defintion  of UndefinedSubroutineException goes like  this :</p>\n<pre><code>public class UndefinedSubroutineException  extends Throwable {\n\n    public  UndefinedSubroutineException (String message) {\n\n        super(message);\n    }\n}\n</code></pre>\n<p>PS:  I can't  change the test cases and the interface  definition  &amp;<br />\nI hope someone can help us with this problem.</p>\n"},{"tags":["java","intellij-idea","javafx","java-11","javafx-11"],"comments":[{"owner":{"account_id":14242449,"reputation":2057,"user_id":10288420,"display_name":"drowny"},"score":0,"creation_date":1537716955,"post_id":52467561,"comment_id":91877034,"body_markdown":"can you try from terminal to compile and run?","body":"can you try from terminal to compile and run?"},{"owner":{"account_id":9847667,"reputation":29054,"user_id":7294647,"accept_rate":67,"display_name":"Jacob G."},"score":1,"creation_date":1537716985,"post_id":52467561,"comment_id":91877047,"body_markdown":"You&#39;ll need to require its module(s) in your `module-info.java`","body":"You&#39;ll need to require its module(s) in your <code>module-info.java</code>"},{"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"score":0,"creation_date":1537717000,"post_id":52467561,"comment_id":91877052,"body_markdown":"I think you need this artifact: https://mvnrepository.com/artifact/org.openjfx/javafx/11 the base one doesn&#39;t contain everything I guess.","body":"I think you need this artifact: <a href=\"https://mvnrepository.com/artifact/org.openjfx/javafx/11\" rel=\"nofollow noreferrer\">mvnrepository.com/artifact/org.openjfx/javafx/11</a> the base one doesn&#39;t contain everything I guess."},{"owner":{"account_id":4031788,"reputation":1863,"user_id":3317592,"accept_rate":64,"display_name":"AlwaysNeedingHelp"},"score":0,"creation_date":1537717260,"post_id":52467561,"comment_id":91877112,"body_markdown":"@JornVernee when I try that I get an error. I edited the OP with it.","body":"@JornVernee when I try that I get an error. I edited the OP with it."},{"owner":{"account_id":4031788,"reputation":1863,"user_id":3317592,"accept_rate":64,"display_name":"AlwaysNeedingHelp"},"score":0,"creation_date":1537717310,"post_id":52467561,"comment_id":91877134,"body_markdown":"@JacobG. how do I go about this? I have not used the module system before. I was told that you don&#39;t require a modulized application to use javaFX11. Is this wrong?","body":"@JacobG. how do I go about this? I have not used the module system before. I was told that you don&#39;t require a modulized application to use javaFX11. Is this wrong?"},{"owner":{"display_name":"user7807659"},"score":0,"creation_date":1537717580,"post_id":52467561,"comment_id":92314593,"body_markdown":"Check the local .m2 whether the jar got downloaded or not in the location","body":"Check the local .m2 whether the jar got downloaded or not in the location"},{"owner":{"account_id":9847667,"reputation":29054,"user_id":7294647,"accept_rate":67,"display_name":"Jacob G."},"score":2,"creation_date":1537717867,"post_id":52467561,"comment_id":91877277,"body_markdown":"Whoever told you that was likely mistaken.  You need to create a `module-info.java` file in your source folder and explicitly require whichever JavaFX modules that you&#39;re using: `requires javafx.controls;`, `requires javafx.graphics;`, etc.","body":"Whoever told you that was likely mistaken.  You need to create a <code>module-info.java</code> file in your source folder and explicitly require whichever JavaFX modules that you&#39;re using: <code>requires javafx.controls;</code>, <code>requires javafx.graphics;</code>, etc."},{"owner":{"account_id":4031788,"reputation":1863,"user_id":3317592,"accept_rate":64,"display_name":"AlwaysNeedingHelp"},"score":0,"creation_date":1537719441,"post_id":52467561,"comment_id":91877733,"body_markdown":"Hmm still nothing is working. This is a little frustrating. I also tried a gradle build and set the javafx artifact as a dependency and that still wouldn&#39;t work. It might be something small I&#39;m missing, does anyone have a simple hello world javafx application that they can host and I can look at?","body":"Hmm still nothing is working. This is a little frustrating. I also tried a gradle build and set the javafx artifact as a dependency and that still wouldn&#39;t work. It might be something small I&#39;m missing, does anyone have a simple hello world javafx application that they can host and I can look at?"},{"owner":{"account_id":3762699,"reputation":1446,"user_id":3127144,"accept_rate":56,"display_name":"iCoder"},"score":0,"creation_date":1538280828,"post_id":52467561,"comment_id":92085026,"body_markdown":"@AlwaysNeedingHelp can you let me know how to get the Project Level Language drop down list (below Project SDK) to show &#39;11-Local Variable Syntax for lambda parameters&#39; in Intellij as per the screenshot you have posted?","body":"@AlwaysNeedingHelp can you let me know how to get the Project Level Language drop down list (below Project SDK) to show &#39;11-Local Variable Syntax for lambda parameters&#39; in Intellij as per the screenshot you have posted?"},{"owner":{"account_id":3762699,"reputation":1446,"user_id":3127144,"accept_rate":56,"display_name":"iCoder"},"score":0,"creation_date":1538303182,"post_id":52467561,"comment_id":92089251,"body_markdown":"@Slaw thanks after I upgraded Intellij was able to find it in the drop-down list.","body":"@Slaw thanks after I upgraded Intellij was able to find it in the drop-down list."},{"owner":{"account_id":67096,"reputation":24787,"user_id":196507,"accept_rate":90,"display_name":"lepe"},"score":0,"creation_date":1563414651,"post_id":52467561,"comment_id":100694964,"body_markdown":"We were having this error: `java.lang.IllegalAccessError: class com.sun.javafx.fxml.FXMLLoaderHelper (in unnamed module ...)  cannot access class com.sun.javafx.util.Utils (in module javafx.graphics) because module javafx.graphics does not export com.sun.javafx.util` . The reason was that we were running the Application class directly without `Application.launch`. Shared here as it is might be useful.","body":"We were having this error: <code>java.lang.IllegalAccessError: class com.sun.javafx.fxml.FXMLLoaderHelper (in unnamed module ...)  cannot access class com.sun.javafx.util.Utils (in module javafx.graphics) because module javafx.graphics does not export com.sun.javafx.util</code> . The reason was that we were running the Application class directly without <code>Application.launch</code>. Shared here as it is might be useful."},{"owner":{"account_id":14312124,"reputation":1083,"user_id":10338096,"display_name":"Chris Claude"},"score":0,"creation_date":1569432850,"post_id":52467561,"comment_id":102598725,"body_markdown":"I got the same issue when I moved to java11 but when I got back to java 8 everything worked fine","body":"I got the same issue when I moved to java11 but when I got back to java 8 everything worked fine"},{"owner":{"account_id":4371789,"reputation":169,"user_id":3565960,"accept_rate":80,"display_name":"Mark"},"score":0,"creation_date":1592699069,"post_id":52467561,"comment_id":110518800,"body_markdown":"I managed to make mine worked by unchecked the read only of the windows folder containing javafx.  It worked for me, might give it a try","body":"I managed to make mine worked by unchecked the read only of the windows folder containing javafx.  It worked for me, might give it a try"}],"answers":[{"tags":[],"owner":{"account_id":4910667,"reputation":44671,"user_id":3956070,"display_name":"Jos&#233; Pereda"},"down_vote_count":0,"up_vote_count":168,"is_accepted":true,"score":168,"last_activity_date":1568240764,"creation_date":1537735772,"answer_id":52470141,"question_id":52467561,"body_markdown":"As mentioned in the comments, the [Starting Guide](https://openjfx.io/openjfx-docs/#introduction) is the place to start with Java 11 and JavaFX 11.\r\n\r\nThe key to work as you did before Java 11 is to understand that:\r\n\r\n - JavaFX 11 is not part of the JDK anymore\r\n - You can get it in different flavors, either as an SDK or as\r\n   regular dependencies (maven/gradle).\r\n - You will need to include it to the module path of your project, even if your project is not modular.\r\n\r\n**JavaFX project**\r\n\r\nIf you create a regular JavaFX default project in IntelliJ (without Maven or Gradle) I&#39;d suggest you download the SDK from [here](https://gluonhq.com/products/javafx/). Note that there are jmods as well, but for a non modular project the SDK is preferred.\r\n\r\nThese are the easy steps to run the default project:\r\n\r\n 1. Create a JavaFX project\r\n 2. Set JDK 11 (point to your local Java 11 version)\r\n 3. Add the JavaFX 11 SDK as a library. The URL could be something like `/Users/&lt;user&gt;/Downloads/javafx-sdk-11/lib/`. Once you do this you will notice that the JavaFX classes are now recognized in the editor.\r\n\r\n[![JavaFX 11 Project][1]][1]\r\n\r\n 4. Before you run the default project, you just need to add these to the VM options: \r\n\r\n    `--module-path /Users/&lt;user&gt;/Downloads/javafx-sdk-11/lib --add-modules=javafx.controls,javafx.fxml`\r\n\r\n 5. Run\r\n\r\n\r\n**Maven**\r\n\r\nIf you use Maven to build your project, follow these steps:\r\n\r\n 1. Create a Maven project with JavaFX archetype\r\n 2. Set JDK 11 (point to your local Java 11 version)\r\n 3. Add the JavaFX 11 dependencies. \r\n\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\r\n                &lt;version&gt;11&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;\r\n                &lt;version&gt;11&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n\r\nOnce you do this you will notice that the JavaFX classes are now recognized in the editor.\r\n\r\n[![JavaFX 11 Maven project][2]][2]\r\n\r\nYou will notice that Maven manages the required dependencies for you: it will add javafx.base and javafx.graphics for javafx.controls, but most important, it will add the required _classifier_ based on your platform. In my case, Mac.\r\n\r\nThis is why your jars `org.openjfx:javafx-controls:11` are _empty_, because there are three possible classifiers (windows, linux and mac platforms), that contain all the classes and the native implementation.\r\n\r\nIn case you still want to go to your .m2 repo and take the dependencies from there manually, make sure you pick the right one (for instance `.m2/repository/org/openjfx/javafx-controls/11/javafx-controls-11-mac.jar`)\r\n\r\n4. Replace default maven plugins with those from [here](https://github.com/openjfx/samples/blob/master/IDE/IntelliJ/Non-Modular/Maven/hellofx/pom.xml).\r\n\r\n5. Run `mvn compile javafx:run`, and it should work.\r\n\r\nSimilar works as well for Gradle projects, as explained in detail [here](https://openjfx.io/openjfx-docs/#gradle).\r\n\r\n**EDIT**\r\n\r\nThe mentioned Getting Started guide contains updated [documentation](https://openjfx.io/openjfx-docs/#IDE-Intellij) and sample projects for IntelliJ:\r\n\r\n- JavaFX 11 without Maven/Gradle, see [non-modular sample](https://github.com/openjfx/samples/tree/master/IDE/IntelliJ/Non-Modular/Java) or [modular sample](https://github.com/openjfx/samples/tree/master/IDE/IntelliJ/Modular/Java) projects.\r\n\r\n- JavaFX 11 with Maven, see [non-modular sample](https://github.com/openjfx/samples/tree/master/IDE/IntelliJ/Non-Modular/Maven) or [modular sample](https://github.com/openjfx/samples/tree/master/IDE/IntelliJ/Modular/Maven) projects.\r\n\r\n- JavaFX 11 with Gradle, see [non-modular sample](https://github.com/openjfx/samples/tree/master/IDE/IntelliJ/Non-Modular/Gradle) or [modular sample](https://github.com/openjfx/samples/tree/master/IDE/IntelliJ/Modular/Gradle) projects.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/TF5zy.png\r\n  [2]: https://i.stack.imgur.com/pHXzF.png","title":"IntelliJ can&#39;t recognize JavaFX 11 with OpenJDK 11","body":"<p>As mentioned in the comments, the <a href=\"https://openjfx.io/openjfx-docs/#introduction\" rel=\"noreferrer\">Starting Guide</a> is the place to start with Java 11 and JavaFX 11.</p>\n\n<p>The key to work as you did before Java 11 is to understand that:</p>\n\n<ul>\n<li>JavaFX 11 is not part of the JDK anymore</li>\n<li>You can get it in different flavors, either as an SDK or as\nregular dependencies (maven/gradle).</li>\n<li>You will need to include it to the module path of your project, even if your project is not modular.</li>\n</ul>\n\n<p><strong>JavaFX project</strong></p>\n\n<p>If you create a regular JavaFX default project in IntelliJ (without Maven or Gradle) I'd suggest you download the SDK from <a href=\"https://gluonhq.com/products/javafx/\" rel=\"noreferrer\">here</a>. Note that there are jmods as well, but for a non modular project the SDK is preferred.</p>\n\n<p>These are the easy steps to run the default project:</p>\n\n<ol>\n<li>Create a JavaFX project</li>\n<li>Set JDK 11 (point to your local Java 11 version)</li>\n<li>Add the JavaFX 11 SDK as a library. The URL could be something like <code>/Users/&lt;user&gt;/Downloads/javafx-sdk-11/lib/</code>. Once you do this you will notice that the JavaFX classes are now recognized in the editor.</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/TF5zy.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/TF5zy.png\" alt=\"JavaFX 11 Project\"></a></p>\n\n<ol start=\"4\">\n<li><p>Before you run the default project, you just need to add these to the VM options: </p>\n\n<p><code>--module-path /Users/&lt;user&gt;/Downloads/javafx-sdk-11/lib --add-modules=javafx.controls,javafx.fxml</code></p></li>\n<li><p>Run</p></li>\n</ol>\n\n<p><strong>Maven</strong></p>\n\n<p>If you use Maven to build your project, follow these steps:</p>\n\n<ol>\n<li>Create a Maven project with JavaFX archetype</li>\n<li>Set JDK 11 (point to your local Java 11 version)</li>\n<li><p>Add the JavaFX 11 dependencies. </p>\n\n<pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n        &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\n        &lt;version&gt;11&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n        &lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;\n        &lt;version&gt;11&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre></li>\n</ol>\n\n<p>Once you do this you will notice that the JavaFX classes are now recognized in the editor.</p>\n\n<p><a href=\"https://i.stack.imgur.com/pHXzF.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/pHXzF.png\" alt=\"JavaFX 11 Maven project\"></a></p>\n\n<p>You will notice that Maven manages the required dependencies for you: it will add javafx.base and javafx.graphics for javafx.controls, but most important, it will add the required <em>classifier</em> based on your platform. In my case, Mac.</p>\n\n<p>This is why your jars <code>org.openjfx:javafx-controls:11</code> are <em>empty</em>, because there are three possible classifiers (windows, linux and mac platforms), that contain all the classes and the native implementation.</p>\n\n<p>In case you still want to go to your .m2 repo and take the dependencies from there manually, make sure you pick the right one (for instance <code>.m2/repository/org/openjfx/javafx-controls/11/javafx-controls-11-mac.jar</code>)</p>\n\n<ol start=\"4\">\n<li><p>Replace default maven plugins with those from <a href=\"https://github.com/openjfx/samples/blob/master/IDE/IntelliJ/Non-Modular/Maven/hellofx/pom.xml\" rel=\"noreferrer\">here</a>.</p></li>\n<li><p>Run <code>mvn compile javafx:run</code>, and it should work.</p></li>\n</ol>\n\n<p>Similar works as well for Gradle projects, as explained in detail <a href=\"https://openjfx.io/openjfx-docs/#gradle\" rel=\"noreferrer\">here</a>.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>The mentioned Getting Started guide contains updated <a href=\"https://openjfx.io/openjfx-docs/#IDE-Intellij\" rel=\"noreferrer\">documentation</a> and sample projects for IntelliJ:</p>\n\n<ul>\n<li><p>JavaFX 11 without Maven/Gradle, see <a href=\"https://github.com/openjfx/samples/tree/master/IDE/IntelliJ/Non-Modular/Java\" rel=\"noreferrer\">non-modular sample</a> or <a href=\"https://github.com/openjfx/samples/tree/master/IDE/IntelliJ/Modular/Java\" rel=\"noreferrer\">modular sample</a> projects.</p></li>\n<li><p>JavaFX 11 with Maven, see <a href=\"https://github.com/openjfx/samples/tree/master/IDE/IntelliJ/Non-Modular/Maven\" rel=\"noreferrer\">non-modular sample</a> or <a href=\"https://github.com/openjfx/samples/tree/master/IDE/IntelliJ/Modular/Maven\" rel=\"noreferrer\">modular sample</a> projects.</p></li>\n<li><p>JavaFX 11 with Gradle, see <a href=\"https://github.com/openjfx/samples/tree/master/IDE/IntelliJ/Non-Modular/Gradle\" rel=\"noreferrer\">non-modular sample</a> or <a href=\"https://github.com/openjfx/samples/tree/master/IDE/IntelliJ/Modular/Gradle\" rel=\"noreferrer\">modular sample</a> projects.</p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":10890610,"reputation":248,"user_id":8006527,"display_name":"Coder992"},"down_vote_count":1,"up_vote_count":19,"is_accepted":false,"score":18,"last_activity_date":1576237122,"creation_date":1556194842,"answer_id":55849191,"question_id":52467561,"body_markdown":"The issue that JavaFX is no longer part of JDK 11. \r\nThe following solution works using IntelliJ (haven&#39;t tried it with NetBeans):\r\n\r\n 1. Add JavaFX Global Library as a dependency:\r\n    \r\n    Settings -&gt; Project Structure -&gt; Module. In module go to the\r\n    Dependencies tab, and click the add &quot;+&quot; sign -&gt; Library -&gt; Java-&gt;\r\n    choose JavaFX from the list and click Add Selected, then Apply settings.            \r\n\r\n 2. Right click source file (src) in your JavaFX project, and create a new\r\n    **module-info.java file**. Inside the file write the following code :\r\n\r\n    ```\r\n    module YourProjectName { \r\n        requires javafx.fxml;\r\n        requires javafx.controls;\r\n        requires javafx.graphics;\r\n        opens sample;\r\n    }\r\n    ```\r\nThese 2 steps will solve all your issues with JavaFX, I assure you.\r\n\r\nReference : There&#39;s a You Tube tutorial made by The Learn Programming channel, will explain all the details above in just 5 minutes. I also recommend watching it to solve your problem: \r\n[https://www.youtube.com/watch?v=WtOgoomDewo][1]\r\n \r\n\r\n\r\n  [1]: https://www.youtube.com/watch?v=WtOgoomDewo","title":"IntelliJ can&#39;t recognize JavaFX 11 with OpenJDK 11","body":"<p>The issue that JavaFX is no longer part of JDK 11. \nThe following solution works using IntelliJ (haven't tried it with NetBeans):</p>\n\n<ol>\n<li><p>Add JavaFX Global Library as a dependency:</p>\n\n<p>Settings -> Project Structure -> Module. In module go to the\nDependencies tab, and click the add \"+\" sign -> Library -> Java->\nchoose JavaFX from the list and click Add Selected, then Apply settings.            </p></li>\n<li><p>Right click source file (src) in your JavaFX project, and create a new\n<strong>module-info.java file</strong>. Inside the file write the following code :</p>\n\n<pre><code>module YourProjectName { \n    requires javafx.fxml;\n    requires javafx.controls;\n    requires javafx.graphics;\n    opens sample;\n}\n</code></pre>\n\n<p>These 2 steps will solve all your issues with JavaFX, I assure you.</p></li>\n</ol>\n\n<p>Reference : There's a You Tube tutorial made by The Learn Programming channel, will explain all the details above in just 5 minutes. I also recommend watching it to solve your problem: \n<a href=\"https://www.youtube.com/watch?v=WtOgoomDewo\" rel=\"noreferrer\">https://www.youtube.com/watch?v=WtOgoomDewo</a></p>\n"},{"tags":[],"owner":{"account_id":10648383,"reputation":526,"user_id":7845354,"display_name":"Yo Apps"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1556269427,"creation_date":1556265417,"answer_id":55863200,"question_id":52467561,"body_markdown":"None of the above worked for me. I spent too much time clearing other errors that came up. I found this to be the easiest and the best way. \r\n\r\n[This works for getting JavaFx on Jdk 11, 12 &amp; on OpenJdk12 too!][1]\r\n\r\n\r\n  [1]: https://youtu.be/qn2tbftFjno\r\n\r\n - The Video shows you the JavaFx Sdk download\r\n - How to set it as a Global Library\r\n - Set the **module-info.java** (i prefer the bottom one)\r\n\r\n***\r\n\r\n    module thisIsTheNameOfYourProject {\r\n        requires javafx.fxml;\r\n        requires javafx.controls;\r\n        requires javafx.graphics;\r\n        opens sample;\r\n    }\r\n***\r\n\r\nThe entire thing took me only 5mins !!!","title":"IntelliJ can&#39;t recognize JavaFX 11 with OpenJDK 11","body":"<p>None of the above worked for me. I spent too much time clearing other errors that came up. I found this to be the easiest and the best way. </p>\n\n<p><a href=\"https://youtu.be/qn2tbftFjno\" rel=\"noreferrer\">This works for getting JavaFx on Jdk 11, 12 &amp; on OpenJdk12 too!</a></p>\n\n<ul>\n<li>The Video shows you the JavaFx Sdk download</li>\n<li>How to set it as a Global Library</li>\n<li>Set the <strong>module-info.java</strong> (i prefer the bottom one)</li>\n</ul>\n\n<hr>\n\n<pre><code>module thisIsTheNameOfYourProject {\n    requires javafx.fxml;\n    requires javafx.controls;\n    requires javafx.graphics;\n    opens sample;\n}\n</code></pre>\n\n<hr>\n\n<p>The entire thing took me only 5mins !!!</p>\n"},{"tags":[],"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1639522666,"creation_date":1568244553,"answer_id":57897944,"question_id":52467561,"body_markdown":"\r\n**Update Dec 14, 2020**\r\n\r\nIntellij has created a [new JavaFX project wizard][1] for Idea.\r\n\r\nI ***highly recommend*** that, if you have an issue getting a JavaFX project to work, then ***use the new JavaFX project wizard*** to:\r\n\r\n 1. Create a new project using the wizard.\r\n 2. Test that the new project works.\r\n 3. Copy relevant code from your old project into the new project.\r\n\r\nThe new project wizard is pretty fool-proof and very easy to use to get a working JavaFX project up and running in less than a minute.  \r\n\r\nThe wizard generated project has the following features:\r\n\r\n 1. Simple working sample code for a small application.\r\n 2. Makes use of JavaFX graphics, controls, fxml. \r\n 3. Configures a maven or gradle project to use JavaFX, with appropriate maven artifact dependencies for basic development.\r\n 4. Uses recent, reasonably up-to-date JavaFX modules, with consistent versions (which is something many beginners often don&#39;t do).\r\n 5. Adds a module-info.java file that works for an FXML based JavaFX application (will also work if you don&#39;t use FXML).\r\n 6. Demonstrates placing an FXML file in a resource directory, and looking it up as a resource at runtime (which is something many, many beginners get wrong).\r\n 7. Properly separates a Controller class from the Application class (which is also something many beginners get wrong).\r\n 8. Demonstrates the proper use of @FXML injection based on ids in an FXML file (which is also something many beginners get wrong).\r\n 9. Does not require the openjfx JavaFX SDK download (because JavaFX module dependencies are sourced through maven).\r\n 10. Does not require manually setting VM arguments to run the application (because the appropriate module statements are in the module-info.java file rather than a VM command line).\r\n 11. Allows execution and debugging of the JavaFX application directly from the IDE.\r\n 12. Includes the openjfx maven plugin.\r\n     * You can probably ignore this or delete it from the generated project file if you want.\r\n\r\n--- \r\n\r\nA couple of thoughts on the openjfx-maven plugin:\r\n\r\n  * For most development, I don&#39;t think you need to use it.\r\n    * If you don&#39;t need it you can remove it from your project.\r\n  * The openjfx maven plugin is *not* required for the execution of the application\r\n    * Although you could use it for that if you really wanted to, it doesn&#39;t provide any advantage over direct execution in the IDE as far as I can tell.\r\n  * The openjfx maven plugin can be useful for building jlink based distribution if that is something you wish to do.\r\n  * The openjfx maven plugin cannot package your application using `jpackage`, at least at the moment:\r\n    * if that is something you wish to do, investigate [JPackageScriptFX][2], the [ackman maven jpackage plugin](https://akman.github.io/jpackage-maven-plugin/) or the [badass jlink or runtime plugins](https://badass-jlink-plugin.beryx.org/releases/latest/), or some alternative tool like invoking jpackage directly.\r\n\r\n**Prior Answer**\r\n\r\nSome of the info in this prior answer is still useful for understanding background information on Java platform modularity and JavaFX.\r\n\r\nQuick summary, you can do either:\r\n\r\n1. Include the JavaFX modules via `--module-path` and `--add-modules` like in Jos&#233;&#39;s answer.\r\n\r\n OR\r\n \r\n\r\n2. Once you have JavaFX libraries added to your project (either manually or via maven/gradle import), add the `module-info.java` file similar to the one specified in this answer.  (Note that this solution makes your app modular, so if you use other libraries, you will also need to add statements to require their modules inside the `module-info.java` file).\r\n\r\n----\r\n\r\nThis answer is a supplement to Jose&#39;s answer.\r\n\r\nThe situation is this:\r\n\r\n 1. You are using a recent Java version, e.g. 13.\r\n 2. You have a JavaFX application as a Maven project.\r\n 3. In your Maven project you have the JavaFX plugin configured and JavaFX dependencies setup as per Jose&#39;s answer.\r\n 4. You go to the source code of your main class which extends Application, you right-click on it and try to run it.\r\n 5. You get an `IllegalAccessError` involving an &quot;unnamed module&quot; when trying to launch the app.\r\n\r\nExcerpt for a stack trace generating an `IllegalAccessError` when trying to run a JavaFX app from Intellij Idea:\r\n\r\n    Exception in Application start method\r\n    java.lang.reflect.InvocationTargetException\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:567)\r\n    \tat javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplicationWithArgs(LauncherImpl.java:464)\r\n    \tat javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplication(LauncherImpl.java:363)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:567)\r\n    \tat java.base/sun.launcher.LauncherHelper$FXHelper.main(LauncherHelper.java:1051)\r\n    Caused by: java.lang.RuntimeException: Exception in Application start method\r\n    \tat javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:900)\r\n    \tat javafx.graphics/com.sun.javafx.application.LauncherImpl.lambda$launchApplication$2(LauncherImpl.java:195)\r\n    \tat java.base/java.lang.Thread.run(Thread.java:830)\r\n    Caused by: java.lang.IllegalAccessError: class com.sun.javafx.fxml.FXMLLoaderHelper (in unnamed module @0x45069d0e) cannot access class com.sun.javafx.util.Utils (in module javafx.graphics) because module javafx.graphics does not export com.sun.javafx.util to unnamed module @0x45069d0e\r\n    \tat com.sun.javafx.fxml.FXMLLoaderHelper.&lt;clinit&gt;(FXMLLoaderHelper.java:38)\r\n    \tat javafx.fxml.FXMLLoader.&lt;clinit&gt;(FXMLLoader.java:2056)\r\n    \tat org.jewelsea.demo.javafx.springboot.Main.start(Main.java:13)\r\n    \tat javafx.graphics/com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$9(LauncherImpl.java:846)\r\n    \tat javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runAndWait$12(PlatformImpl.java:455)\r\n    \tat javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runLater$10(PlatformImpl.java:428)\r\n    \tat java.base/java.security.AccessController.doPrivileged(AccessController.java:391)\r\n    \tat javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runLater$11(PlatformImpl.java:427)\r\n    \tat javafx.graphics/com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:96)\r\n    Exception running application org.jewelsea.demo.javafx.springboot.Main\r\n\r\nOK, now you are kind of stuck and have no clue what is going on.\r\n\r\nWhat has actually happened is this:\r\n\r\n 1. Maven has successfully downloaded the JavaFX dependencies for your application, so you don&#39;t need to separately download the dependencies or install a JavaFX SDK or module distribution or anything like that.\r\n 2. Idea has successfully imported the modules as dependencies to your project, so everything compiles OK and all of the code completion and everything works fine.\r\n\r\nSo it seems everything should be OK. BUT, when you run your application, the code in the JavaFX modules is failing when trying to use reflection to instantiate instances of your application class (when you invoke launch) and your FXML controller classes (when you load FXML).  Without some help, this use of reflection can fail in some cases, generating the obscure `IllegalAccessError`.  This is due to a Java module system security feature that does not allow code from other modules to use reflection on your classes unless you explicitly allow it (and the JavaFX application launcher and FXMLLoader both require reflection in their current implementation in order for them to function correctly).\r\n\r\nThis is where some of the other answers to this question, which reference `module-info.java`, come into the picture.\r\n\r\nSo let&#39;s take a crash course in Java modules:\r\n\r\n * https://www.baeldung.com/java-9-modularity\r\n\r\nThe key part is this:\r\n\r\n&gt; 4.9. Opens\r\n&gt;\r\n&gt; If we need to allow reflection of private types, but we don&#39;t want all\r\n&gt; of our code exposed, we can use the opens directive to expose specific\r\n&gt; packages.\r\n&gt; \r\n&gt; But remember, this will open the package up to the entire world, so\r\n&gt; make sure that is what you want:\r\n&gt; \r\n&gt;     module my.module { opens com.my.package; }\r\n\r\nSo, perhaps you don&#39;t want to open your package to the entire world, then you can do:\r\n\r\n&gt; 4.10. Opens … To\r\n&gt;\r\n&gt; Okay, so reflection is great sometimes, but we still want as much security as we can get from encapsulation. We can selectively open our packages to a pre-approved list of modules, in this case, using the opens…to the directive:\r\n&gt;\r\n&gt;    module my.module {\r\n&gt;       opens com.my.package to moduleOne, moduleTwo, etc.;\r\n&gt;    }\r\n\r\nSo, you end up creating a src/main/java/module-info.java class which looks like this:\r\n\r\n    module org.jewelsea.demo.javafx.springboot {\r\n        requires javafx.fxml;\r\n        requires javafx.controls;\r\n        requires javafx.graphics;\r\n        opens org.jewelsea.demo.javafx.springboot to javafx.graphics,javafx.fxml;\r\n    }\r\n\r\nWhere `org.jewelsea.demo.javafx.springboot` is the name of the package which contains the JavaFX Application class and JavaFX Controller classes (replace this with the appropriate package name for your application).  This tells the Java runtime that it is OK for classes in the `javafx.graphics` and `javafx.fxml` to invoke reflection on the classes in your `org.jewelsea.demo.javafx.springboot` package. Once this is done, and the application is compiled and re-run things will work fine and the `IllegalAccessError` generated by JavaFX&#39;s use of reflection will no longer occur.\r\n\r\n*But what if you don&#39;t want to create a module-info.java file*\r\n\r\nIf instead of using the Run button in the top toolbar of IDE to run your application class directly, you instead:\r\n\r\n 1. Went to the Maven window on the side of the IDE.\r\n 2. Chose the JavaFX maven plugin target `javafx.run`.\r\n 3. Right-clicked on that and chose either `Run Maven Build` or `Debug...`.\r\n\r\nThen the app will run without the `module-info.java` file.  I guess this is because the maven plugin is smart enough to dynamically include some kind of settings that allows the app to be reflected on by the JavaFX classes even without a `module-info.java` file, though I don&#39;t know how this is accomplished.\r\n\r\nTo get that setting transferred to the Run button in the top toolbar, right-click on the `javafx.run` Maven target and choose the option to `Create Run/Debug Configuration` for the target.  Then you can just choose Run from the top toolbar to execute the Maven target.\r\n\r\n\r\n\r\n\r\n \r\n\r\n\r\n  [1]: https://www.jetbrains.com/help/idea/javafx.html\r\n  [2]: https://github.com/dlemmermann/JPackageScriptFX","title":"IntelliJ can&#39;t recognize JavaFX 11 with OpenJDK 11","body":"<p><strong>Update Dec 14, 2020</strong></p>\n<p>Intellij has created a <a href=\"https://www.jetbrains.com/help/idea/javafx.html\" rel=\"nofollow noreferrer\">new JavaFX project wizard</a> for Idea.</p>\n<p>I <em><strong>highly recommend</strong></em> that, if you have an issue getting a JavaFX project to work, then <em><strong>use the new JavaFX project wizard</strong></em> to:</p>\n<ol>\n<li>Create a new project using the wizard.</li>\n<li>Test that the new project works.</li>\n<li>Copy relevant code from your old project into the new project.</li>\n</ol>\n<p>The new project wizard is pretty fool-proof and very easy to use to get a working JavaFX project up and running in less than a minute.</p>\n<p>The wizard generated project has the following features:</p>\n<ol>\n<li>Simple working sample code for a small application.</li>\n<li>Makes use of JavaFX graphics, controls, fxml.</li>\n<li>Configures a maven or gradle project to use JavaFX, with appropriate maven artifact dependencies for basic development.</li>\n<li>Uses recent, reasonably up-to-date JavaFX modules, with consistent versions (which is something many beginners often don't do).</li>\n<li>Adds a module-info.java file that works for an FXML based JavaFX application (will also work if you don't use FXML).</li>\n<li>Demonstrates placing an FXML file in a resource directory, and looking it up as a resource at runtime (which is something many, many beginners get wrong).</li>\n<li>Properly separates a Controller class from the Application class (which is also something many beginners get wrong).</li>\n<li>Demonstrates the proper use of @FXML injection based on ids in an FXML file (which is also something many beginners get wrong).</li>\n<li>Does not require the openjfx JavaFX SDK download (because JavaFX module dependencies are sourced through maven).</li>\n<li>Does not require manually setting VM arguments to run the application (because the appropriate module statements are in the module-info.java file rather than a VM command line).</li>\n<li>Allows execution and debugging of the JavaFX application directly from the IDE.</li>\n<li>Includes the openjfx maven plugin.\n<ul>\n<li>You can probably ignore this or delete it from the generated project file if you want.</li>\n</ul>\n</li>\n</ol>\n<hr />\n<p>A couple of thoughts on the openjfx-maven plugin:</p>\n<ul>\n<li>For most development, I don't think you need to use it.\n<ul>\n<li>If you don't need it you can remove it from your project.</li>\n</ul>\n</li>\n<li>The openjfx maven plugin is <em>not</em> required for the execution of the application\n<ul>\n<li>Although you could use it for that if you really wanted to, it doesn't provide any advantage over direct execution in the IDE as far as I can tell.</li>\n</ul>\n</li>\n<li>The openjfx maven plugin can be useful for building jlink based distribution if that is something you wish to do.</li>\n<li>The openjfx maven plugin cannot package your application using <code>jpackage</code>, at least at the moment:\n<ul>\n<li>if that is something you wish to do, investigate <a href=\"https://github.com/dlemmermann/JPackageScriptFX\" rel=\"nofollow noreferrer\">JPackageScriptFX</a>, the <a href=\"https://akman.github.io/jpackage-maven-plugin/\" rel=\"nofollow noreferrer\">ackman maven jpackage plugin</a> or the <a href=\"https://badass-jlink-plugin.beryx.org/releases/latest/\" rel=\"nofollow noreferrer\">badass jlink or runtime plugins</a>, or some alternative tool like invoking jpackage directly.</li>\n</ul>\n</li>\n</ul>\n<p><strong>Prior Answer</strong></p>\n<p>Some of the info in this prior answer is still useful for understanding background information on Java platform modularity and JavaFX.</p>\n<p>Quick summary, you can do either:</p>\n<ol>\n<li>Include the JavaFX modules via <code>--module-path</code> and <code>--add-modules</code> like in José's answer.</li>\n</ol>\n<p>OR</p>\n<ol start=\"2\">\n<li>Once you have JavaFX libraries added to your project (either manually or via maven/gradle import), add the <code>module-info.java</code> file similar to the one specified in this answer.  (Note that this solution makes your app modular, so if you use other libraries, you will also need to add statements to require their modules inside the <code>module-info.java</code> file).</li>\n</ol>\n<hr />\n<p>This answer is a supplement to Jose's answer.</p>\n<p>The situation is this:</p>\n<ol>\n<li>You are using a recent Java version, e.g. 13.</li>\n<li>You have a JavaFX application as a Maven project.</li>\n<li>In your Maven project you have the JavaFX plugin configured and JavaFX dependencies setup as per Jose's answer.</li>\n<li>You go to the source code of your main class which extends Application, you right-click on it and try to run it.</li>\n<li>You get an <code>IllegalAccessError</code> involving an &quot;unnamed module&quot; when trying to launch the app.</li>\n</ol>\n<p>Excerpt for a stack trace generating an <code>IllegalAccessError</code> when trying to run a JavaFX app from Intellij Idea:</p>\n<pre><code>Exception in Application start method\njava.lang.reflect.InvocationTargetException\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:567)\n    at javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplicationWithArgs(LauncherImpl.java:464)\n    at javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplication(LauncherImpl.java:363)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:567)\n    at java.base/sun.launcher.LauncherHelper$FXHelper.main(LauncherHelper.java:1051)\nCaused by: java.lang.RuntimeException: Exception in Application start method\n    at javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:900)\n    at javafx.graphics/com.sun.javafx.application.LauncherImpl.lambda$launchApplication$2(LauncherImpl.java:195)\n    at java.base/java.lang.Thread.run(Thread.java:830)\nCaused by: java.lang.IllegalAccessError: class com.sun.javafx.fxml.FXMLLoaderHelper (in unnamed module @0x45069d0e) cannot access class com.sun.javafx.util.Utils (in module javafx.graphics) because module javafx.graphics does not export com.sun.javafx.util to unnamed module @0x45069d0e\n    at com.sun.javafx.fxml.FXMLLoaderHelper.&lt;clinit&gt;(FXMLLoaderHelper.java:38)\n    at javafx.fxml.FXMLLoader.&lt;clinit&gt;(FXMLLoader.java:2056)\n    at org.jewelsea.demo.javafx.springboot.Main.start(Main.java:13)\n    at javafx.graphics/com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$9(LauncherImpl.java:846)\n    at javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runAndWait$12(PlatformImpl.java:455)\n    at javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runLater$10(PlatformImpl.java:428)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:391)\n    at javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runLater$11(PlatformImpl.java:427)\n    at javafx.graphics/com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:96)\nException running application org.jewelsea.demo.javafx.springboot.Main\n</code></pre>\n<p>OK, now you are kind of stuck and have no clue what is going on.</p>\n<p>What has actually happened is this:</p>\n<ol>\n<li>Maven has successfully downloaded the JavaFX dependencies for your application, so you don't need to separately download the dependencies or install a JavaFX SDK or module distribution or anything like that.</li>\n<li>Idea has successfully imported the modules as dependencies to your project, so everything compiles OK and all of the code completion and everything works fine.</li>\n</ol>\n<p>So it seems everything should be OK. BUT, when you run your application, the code in the JavaFX modules is failing when trying to use reflection to instantiate instances of your application class (when you invoke launch) and your FXML controller classes (when you load FXML).  Without some help, this use of reflection can fail in some cases, generating the obscure <code>IllegalAccessError</code>.  This is due to a Java module system security feature that does not allow code from other modules to use reflection on your classes unless you explicitly allow it (and the JavaFX application launcher and FXMLLoader both require reflection in their current implementation in order for them to function correctly).</p>\n<p>This is where some of the other answers to this question, which reference <code>module-info.java</code>, come into the picture.</p>\n<p>So let's take a crash course in Java modules:</p>\n<ul>\n<li><a href=\"https://www.baeldung.com/java-9-modularity\" rel=\"nofollow noreferrer\">https://www.baeldung.com/java-9-modularity</a></li>\n</ul>\n<p>The key part is this:</p>\n<blockquote>\n<p>4.9. Opens</p>\n<p>If we need to allow reflection of private types, but we don't want all\nof our code exposed, we can use the opens directive to expose specific\npackages.</p>\n<p>But remember, this will open the package up to the entire world, so\nmake sure that is what you want:</p>\n<pre><code>module my.module { opens com.my.package; }\n</code></pre>\n</blockquote>\n<p>So, perhaps you don't want to open your package to the entire world, then you can do:</p>\n<blockquote>\n<p>4.10. Opens … To</p>\n<p>Okay, so reflection is great sometimes, but we still want as much security as we can get from encapsulation. We can selectively open our packages to a pre-approved list of modules, in this case, using the opens…to the directive:</p>\n<p>module my.module {\nopens com.my.package to moduleOne, moduleTwo, etc.;\n}</p>\n</blockquote>\n<p>So, you end up creating a src/main/java/module-info.java class which looks like this:</p>\n<pre><code>module org.jewelsea.demo.javafx.springboot {\n    requires javafx.fxml;\n    requires javafx.controls;\n    requires javafx.graphics;\n    opens org.jewelsea.demo.javafx.springboot to javafx.graphics,javafx.fxml;\n}\n</code></pre>\n<p>Where <code>org.jewelsea.demo.javafx.springboot</code> is the name of the package which contains the JavaFX Application class and JavaFX Controller classes (replace this with the appropriate package name for your application).  This tells the Java runtime that it is OK for classes in the <code>javafx.graphics</code> and <code>javafx.fxml</code> to invoke reflection on the classes in your <code>org.jewelsea.demo.javafx.springboot</code> package. Once this is done, and the application is compiled and re-run things will work fine and the <code>IllegalAccessError</code> generated by JavaFX's use of reflection will no longer occur.</p>\n<p><em>But what if you don't want to create a module-info.java file</em></p>\n<p>If instead of using the Run button in the top toolbar of IDE to run your application class directly, you instead:</p>\n<ol>\n<li>Went to the Maven window on the side of the IDE.</li>\n<li>Chose the JavaFX maven plugin target <code>javafx.run</code>.</li>\n<li>Right-clicked on that and chose either <code>Run Maven Build</code> or <code>Debug...</code>.</li>\n</ol>\n<p>Then the app will run without the <code>module-info.java</code> file.  I guess this is because the maven plugin is smart enough to dynamically include some kind of settings that allows the app to be reflected on by the JavaFX classes even without a <code>module-info.java</code> file, though I don't know how this is accomplished.</p>\n<p>To get that setting transferred to the Run button in the top toolbar, right-click on the <code>javafx.run</code> Maven target and choose the option to <code>Create Run/Debug Configuration</code> for the target.  Then you can just choose Run from the top toolbar to execute the Maven target.</p>\n"},{"tags":[],"owner":{"account_id":428306,"reputation":1151,"user_id":810546,"accept_rate":0,"display_name":"WebComer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1617538851,"creation_date":1617538851,"answer_id":66941215,"question_id":52467561,"body_markdown":"A very good explanation can be found at \r\n\r\nhttps://edencoding.com/runtime-components-error/ \r\n\r\nincluding\r\n\r\n 1. Giving reflective access to your module\r\n\r\n 2. Giving other access to your module\r\n\r\nand total, we need, adding to the above answers, add ***exports*** to your module definition\r\n\r\n    module my.project {\r\n        requires javafx.fxml;\r\n        requires javafx.controls;\r\n        opens my.project to javafx.graphics;\r\n        exports my.project;\r\n    }\r\n\r\n","title":"IntelliJ can&#39;t recognize JavaFX 11 with OpenJDK 11","body":"<p>A very good explanation can be found at</p>\n<p><a href=\"https://edencoding.com/runtime-components-error/\" rel=\"nofollow noreferrer\">https://edencoding.com/runtime-components-error/</a></p>\n<p>including</p>\n<ol>\n<li><p>Giving reflective access to your module</p>\n</li>\n<li><p>Giving other access to your module</p>\n</li>\n</ol>\n<p>and total, we need, adding to the above answers, add <em><strong>exports</strong></em> to your module definition</p>\n<pre><code>module my.project {\n    requires javafx.fxml;\n    requires javafx.controls;\n    opens my.project to javafx.graphics;\n    exports my.project;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":453662,"reputation":663,"user_id":850782,"display_name":"EpicVoyage"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1637562902,"creation_date":1637562902,"answer_id":70061753,"question_id":52467561,"body_markdown":"It is 2021 and JetBrains updated their IDE. The other questions about this error message are closed and point here.\r\n\r\n    Error: JavaFX runtime components are missing, and are required to run this application\r\n\r\nIf you have followed all of the other steps in these answers (eg. Libraries, `--module-path`, `--add-modules`, version matching JDK and JavaFX), and you still see this compile error, make sure your run/compile configuration has `--module-path` and `--add-modules` as `VM Options` and not `Program Arguments` in IntelliJ.\r\n\r\n1. Open `Run/Debug Configurations`\r\n2. Open `Modify Options` dropdown\r\n3. Click `Add VM Options`","title":"IntelliJ can&#39;t recognize JavaFX 11 with OpenJDK 11","body":"<p>It is 2021 and JetBrains updated their IDE. The other questions about this error message are closed and point here.</p>\n<pre><code>Error: JavaFX runtime components are missing, and are required to run this application\n</code></pre>\n<p>If you have followed all of the other steps in these answers (eg. Libraries, <code>--module-path</code>, <code>--add-modules</code>, version matching JDK and JavaFX), and you still see this compile error, make sure your run/compile configuration has <code>--module-path</code> and <code>--add-modules</code> as <code>VM Options</code> and not <code>Program Arguments</code> in IntelliJ.</p>\n<ol>\n<li>Open <code>Run/Debug Configurations</code></li>\n<li>Open <code>Modify Options</code> dropdown</li>\n<li>Click <code>Add VM Options</code></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":16304588,"reputation":572,"user_id":11889111,"display_name":"Matteo Toma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638471139,"creation_date":1638470304,"answer_id":70204829,"question_id":52467561,"body_markdown":"add in VM options, (In run configuration), this line:\r\n\r\n    --module-path yourpathwheresdkislocated/lib --add-modules=javafx.controls,javafx.fxml \r\n\r\nand if you want to run your jar application from terminal, put this\r\n\r\n    java --module-path yourpathwheresdkislocated/lib --add-modules=javafx.controls,javafx.fxml -jar YourJar.jar \r\n","title":"IntelliJ can&#39;t recognize JavaFX 11 with OpenJDK 11","body":"<p>add in VM options, (In run configuration), this line:</p>\n<pre><code>--module-path yourpathwheresdkislocated/lib --add-modules=javafx.controls,javafx.fxml \n</code></pre>\n<p>and if you want to run your jar application from terminal, put this</p>\n<pre><code>java --module-path yourpathwheresdkislocated/lib --add-modules=javafx.controls,javafx.fxml -jar YourJar.jar \n</code></pre>\n"}],"owner":{"account_id":4031788,"reputation":1863,"user_id":3317592,"accept_rate":64,"display_name":"AlwaysNeedingHelp"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":160905,"favorite_count":0,"down_vote_count":1,"up_vote_count":102,"accepted_answer_id":52470141,"answer_count":7,"score":101,"last_activity_date":1655062583,"creation_date":1537716355,"question_id":52467561,"body_markdown":"I&#39;m having trouble getting IntellJ to recognize JavaFX packages. With a new JavaFX project, with OpenJDK 11, when trying to build the project, IntelliJ can&#39;t recognize the JavaFX packages.\r\n\r\nI&#39;ve imported `openjfx:javafx-base-11` from the Maven repo.\r\n\r\nI&#39;ve looked at other questions and the solutions seem to range from checking that the bytecode is at the right level (mine is), and that the project language is correct (mine is).\r\n\r\nAnyone have any ideas?\r\n\r\n[![pic 1][1]][1]\r\n\r\n[![pic 2][2]][2]\r\n\r\n[![pic 3][3]][3]\r\n\r\n**Edit:**\r\n\r\nError:\r\n\r\n[![enter image description here][4]][4]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/C0VJq.png\r\n  [2]: https://i.stack.imgur.com/3XJNw.png\r\n  [3]: https://i.stack.imgur.com/j2B8G.png\r\n  [4]: https://i.stack.imgur.com/C2PE5.png","title":"IntelliJ can&#39;t recognize JavaFX 11 with OpenJDK 11","body":"<p>I'm having trouble getting IntellJ to recognize JavaFX packages. With a new JavaFX project, with OpenJDK 11, when trying to build the project, IntelliJ can't recognize the JavaFX packages.</p>\n\n<p>I've imported <code>openjfx:javafx-base-11</code> from the Maven repo.</p>\n\n<p>I've looked at other questions and the solutions seem to range from checking that the bytecode is at the right level (mine is), and that the project language is correct (mine is).</p>\n\n<p>Anyone have any ideas?</p>\n\n<p><a href=\"https://i.stack.imgur.com/C0VJq.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/C0VJq.png\" alt=\"pic 1\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/3XJNw.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/3XJNw.png\" alt=\"pic 2\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/j2B8G.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/j2B8G.png\" alt=\"pic 3\"></a></p>\n\n<p><strong>Edit:</strong></p>\n\n<p>Error:</p>\n\n<p><a href=\"https://i.stack.imgur.com/C2PE5.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/C2PE5.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":["java","unit-testing","mockito","aws-xray"],"answers":[{"tags":[],"owner":{"account_id":11152648,"reputation":267,"user_id":8185365,"display_name":"William Armiros"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1655061971,"creation_date":1655061971,"answer_id":72595263,"question_id":72569318,"body_markdown":"To avoid this error, you can simply begin a segment with `AWSXRay.beginSegment(&quot;test&quot;)` in your JUnit `BeforeEach` statement, and then clear your trace context in the JUnit `AfterEach` statement with `AWSXRay.clearTraceContext()`.\r\n\r\nAlternatively, you can start a segment in each unit test and set configure your X-Ray recorder to have no-op behavior in your `Before` statement as we do: https://github.com/aws/aws-xray-sdk-java/blob/9b724620c126b05313f4c97d18853bbb469e9ba5/aws-xray-recorder-sdk-apache-http/src/test/java/com/amazonaws/xray/proxies/apache/http/TracedResponseHandlerTest.java#L37\r\n\r\nBut that&#39;s probably a more complex option.","title":"How to mock AWSXRay in order to test Java code in Junit","body":"<p>To avoid this error, you can simply begin a segment with <code>AWSXRay.beginSegment(&quot;test&quot;)</code> in your JUnit <code>BeforeEach</code> statement, and then clear your trace context in the JUnit <code>AfterEach</code> statement with <code>AWSXRay.clearTraceContext()</code>.</p>\n<p>Alternatively, you can start a segment in each unit test and set configure your X-Ray recorder to have no-op behavior in your <code>Before</code> statement as we do: <a href=\"https://github.com/aws/aws-xray-sdk-java/blob/9b724620c126b05313f4c97d18853bbb469e9ba5/aws-xray-recorder-sdk-apache-http/src/test/java/com/amazonaws/xray/proxies/apache/http/TracedResponseHandlerTest.java#L37\" rel=\"nofollow noreferrer\">https://github.com/aws/aws-xray-sdk-java/blob/9b724620c126b05313f4c97d18853bbb469e9ba5/aws-xray-recorder-sdk-apache-http/src/test/java/com/amazonaws/xray/proxies/apache/http/TracedResponseHandlerTest.java#L37</a></p>\n<p>But that's probably a more complex option.</p>\n"}],"owner":{"account_id":284924,"reputation":431,"user_id":583309,"accept_rate":24,"display_name":"Hussain Ashruf"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":801,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1655061971,"creation_date":1654837637,"question_id":72569318,"body_markdown":"I have a code that begins the subsegment. \r\nSubsegment subsegment = AWSXRay.beginSubsegment(&quot;makeHTTPCall function&quot;);\r\n\r\nSo I tried mocking it out as Mockito.mock(AWSXRay): I see an exception below: what is wrong here?\r\ncom.amazonaws.xray.exceptions.SegmentNotFoundException: Failed to begin subsegment named &#39;makeHTTPCall function&#39;: segment cannot be found.\r\n at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490)\r\n at com.amazonaws.xray.strategy.RuntimeErrorContextMissingStrategy.contextMissing(RuntimeErrorContextMissingStrategy.java:32)\r\n at com.amazonaws.xray.contexts.ThreadLocalSegmentContext.beginSubsegment(ThreadLocalSegmentContext.java:40)\r\n at com.amazonaws.xray.AWSXRayRecorder.beginSubsegment(AWSXRayRecorder.java:616)\r\n at com.amazonaws.xray.AWSXRay.beginSubsegment(AWSXRay.java:121)\r\n at com.it.TestAwsXrayHandlerRefactored.makeHTTPCall(TestAwsXrayHandlerRefactored.java:87)\r\n at com.it.TestAwsXrayHandlerRefactored.handleRequest(TestAwsXrayHandlerRefactored.java:51)\r\n at com.learnit.TestAwsXrayHandlerRefactoredTest.testHandleRequest(TestAwsXrayHandlerRefactoredTest.java:58)\r\n at java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\r\n at java.base/java.util.ArrayList.forEach(ArrayList.java:1541)","title":"How to mock AWSXRay in order to test Java code in Junit","body":"<p>I have a code that begins the subsegment.\nSubsegment subsegment = AWSXRay.beginSubsegment(&quot;makeHTTPCall function&quot;);</p>\n<p>So I tried mocking it out as Mockito.mock(AWSXRay): I see an exception below: what is wrong here?\ncom.amazonaws.xray.exceptions.SegmentNotFoundException: Failed to begin subsegment named 'makeHTTPCall function': segment cannot be found.\nat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490)\nat com.amazonaws.xray.strategy.RuntimeErrorContextMissingStrategy.contextMissing(RuntimeErrorContextMissingStrategy.java:32)\nat com.amazonaws.xray.contexts.ThreadLocalSegmentContext.beginSubsegment(ThreadLocalSegmentContext.java:40)\nat com.amazonaws.xray.AWSXRayRecorder.beginSubsegment(AWSXRayRecorder.java:616)\nat com.amazonaws.xray.AWSXRay.beginSubsegment(AWSXRay.java:121)\nat com.it.TestAwsXrayHandlerRefactored.makeHTTPCall(TestAwsXrayHandlerRefactored.java:87)\nat com.it.TestAwsXrayHandlerRefactored.handleRequest(TestAwsXrayHandlerRefactored.java:51)\nat com.learnit.TestAwsXrayHandlerRefactoredTest.testHandleRequest(TestAwsXrayHandlerRefactoredTest.java:58)\nat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\nat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)</p>\n"},{"tags":["java","izpack","jpackage"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1593614071,"post_id":62676816,"comment_id":110843535,"body_markdown":"Are the old izpack files interfering with the jpackage installation or the program’s ability to run?  If not, I’d probably opt to leave them there.  I’ve seen far worse offenses when it comes to programs leaving artifacts behind.","body":"Are the old izpack files interfering with the jpackage installation or the program’s ability to run?  If not, I’d probably opt to leave them there.  I’ve seen far worse offenses when it comes to programs leaving artifacts behind."},{"owner":{"account_id":111681,"reputation":13319,"user_id":1480018,"accept_rate":87,"display_name":"Paul Taylor"},"score":1,"creation_date":1593614271,"post_id":62676816,"comment_id":110843648,"body_markdown":"No they dont interfre with abilityy of program to run but 1&gt;it looks messy , 2&gt;if wastes disk space and 3&gt; (and most importantly) if users lookis inside they may accidently run the wrong old app (Jaikoz64.exe, Jaikoz.bat) rather than the new app (Jaikoz.exe)","body":"No they dont interfre with abilityy of program to run but 1&gt;it looks messy , 2&gt;if wastes disk space and 3&gt; (and most importantly) if users lookis inside they may accidently run the wrong old app (Jaikoz64.exe, Jaikoz.bat) rather than the new app (Jaikoz.exe)"},{"owner":{"account_id":111681,"reputation":13319,"user_id":1480018,"accept_rate":87,"display_name":"Paul Taylor"},"score":0,"creation_date":1593864407,"post_id":62676816,"comment_id":110928989,"body_markdown":"If the user runs uninstall, there is no problem, but users dont usually do that.","body":"If the user runs uninstall, there is no problem, but users dont usually do that."}],"answers":[{"tags":[],"owner":{"account_id":5024112,"reputation":1315,"user_id":4036688,"accept_rate":55,"display_name":"Marc Fearby"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1620430507,"creation_date":1620430507,"answer_id":67442754,"question_id":62676816,"body_markdown":"It seems that you have to pass the following argument to jpackage to identify installers for the same application: --win-upgrade-uuid &quot;your_uuid_string&quot;. As ever with Java/Oracle documentation, they could not have been more mysterious about this if they tried.\r\n\r\nI&#39;ve also found that I have to increment the version number, too, or else the installer will flash quickly and just hang in the background and do nothing (until you reboot or end the task): --app-version 1.0.1\r\n\r\nYou can generate a UUID here: https://www.uuidgenerator.net/","title":"With JPackage or Java how can I remove files created with pre JPackage installer","body":"<p>It seems that you have to pass the following argument to jpackage to identify installers for the same application: --win-upgrade-uuid &quot;your_uuid_string&quot;. As ever with Java/Oracle documentation, they could not have been more mysterious about this if they tried.</p>\n<p>I've also found that I have to increment the version number, too, or else the installer will flash quickly and just hang in the background and do nothing (until you reboot or end the task): --app-version 1.0.1</p>\n<p>You can generate a UUID here: <a href=\"https://www.uuidgenerator.net/\" rel=\"noreferrer\">https://www.uuidgenerator.net/</a></p>\n"},{"tags":[],"owner":{"account_id":3341544,"reputation":445,"user_id":2807735,"display_name":"judos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655061898,"creation_date":1655061898,"answer_id":72595256,"question_id":62676816,"body_markdown":"If you pass the argument &quot;--win-per-user-install&quot; to your jpackage command the msi will install the application under &quot;C:/User/x/AppData/Local&quot; and will have permission to write inside its own folder.\r\n\r\nThat only helps to cleanup files in the future, but old ones under C:/Programme I&#39;m afraid I also don&#39;t know. If you can read the folder with your application. You certainly can give instructions from your application how users can cleanup old stuff themselves if you detect old files.","title":"With JPackage or Java how can I remove files created with pre JPackage installer","body":"<p>If you pass the argument &quot;--win-per-user-install&quot; to your jpackage command the msi will install the application under &quot;C:/User/x/AppData/Local&quot; and will have permission to write inside its own folder.</p>\n<p>That only helps to cleanup files in the future, but old ones under C:/Programme I'm afraid I also don't know. If you can read the folder with your application. You certainly can give instructions from your application how users can cleanup old stuff themselves if you detect old files.</p>\n"}],"owner":{"account_id":111681,"reputation":13319,"user_id":1480018,"accept_rate":87,"display_name":"Paul Taylor"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":800,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1655061898,"creation_date":1593606343,"question_id":62676816,"body_markdown":"Previously I used *Izpack* to install my Java application, and when users want to install a new version they just reinstalled into the same location (C&quot;/Program Files/Jthink/Jaikoz&quot;), this would replace older files with newer files, and there was no need for user to uninstall old version first.\r\n\r\nI have now built a installer using *JPackage* (now part of Java, JDK 14) for the latest version of the application, this continues to install to same location. The trouble is because JPackage enforces a new file structure (app and runtime subdirs) my files are no longer overwriting my existing files, so now I have the two installations all muddled up.\r\n\r\nSo I added some code in the latest version to delete the old no longer needed files when I started my application. But the trouble is this fails because I do not have permission to delete these files, I think this is because they were installed by installer (I am not sure)\r\n\r\ne.g here we show groups of old files, only System and Administrators have permissions to modify/delete the files.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QpdD3.png\r\n\r\n\r\nIf I *Run as Administrator* then the code deletes the files without problem, but it is not usual for customer to run as administrator so this is no great help.\r\n\r\nWhat are my options ?","title":"With JPackage or Java how can I remove files created with pre JPackage installer","body":"<p>Previously I used <em>Izpack</em> to install my Java application, and when users want to install a new version they just reinstalled into the same location (C&quot;/Program Files/Jthink/Jaikoz&quot;), this would replace older files with newer files, and there was no need for user to uninstall old version first.</p>\n<p>I have now built a installer using <em>JPackage</em> (now part of Java, JDK 14) for the latest version of the application, this continues to install to same location. The trouble is because JPackage enforces a new file structure (app and runtime subdirs) my files are no longer overwriting my existing files, so now I have the two installations all muddled up.</p>\n<p>So I added some code in the latest version to delete the old no longer needed files when I started my application. But the trouble is this fails because I do not have permission to delete these files, I think this is because they were installed by installer (I am not sure)</p>\n<p>e.g here we show groups of old files, only System and Administrators have permissions to modify/delete the files.</p>\n<p><a href=\"https://i.stack.imgur.com/QpdD3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QpdD3.png\" alt=\"enter image description here\" /></a></p>\n<p>If I <em>Run as Administrator</em> then the code deletes the files without problem, but it is not usual for customer to run as administrator so this is no great help.</p>\n<p>What are my options ?</p>\n"},{"tags":["java","android","sharedpreferences"],"answers":[{"tags":[],"owner":{"account_id":985989,"reputation":369,"user_id":1004461,"display_name":"Bhavesh Vadalia"},"down_vote_count":0,"up_vote_count":22,"is_accepted":true,"score":22,"last_activity_date":1361727561,"creation_date":1330516915,"answer_id":9498786,"question_id":9498713,"body_markdown":"    SharedPreferences settings;\r\n    settings = getSharedPreferences(&quot;PREF_NAME&quot;, Context.MODE_PRIVATE);\r\n    \r\n    //get the sharepref\r\n    int id = settings.getInt(&quot;ID&quot;, 0);\r\n        \r\n    //set the sharedpref\r\n    Editor editor = settings.edit();\r\n    editor.putInt(&quot;ID&quot;, &quot;1&quot;);\r\n    editor.commit();","title":"android read/write user preferences","body":"<pre><code>SharedPreferences settings;\nsettings = getSharedPreferences(\"PREF_NAME\", Context.MODE_PRIVATE);\n\n//get the sharepref\nint id = settings.getInt(\"ID\", 0);\n\n//set the sharedpref\nEditor editor = settings.edit();\neditor.putInt(\"ID\", \"1\");\neditor.commit();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6912215,"reputation":467,"user_id":5307634,"display_name":"MbPCM"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655061572,"creation_date":1655061572,"answer_id":72595214,"question_id":9498713,"body_markdown":"Read Settings\r\n\r\n    public static String readSetting(Context context, String key, String defaul){\r\n            SharedPreferences preferences = context.getSharedPreferences(&quot;mySettings&quot;,MODE_PRIVATE);\r\n            return preferences.getString(key,defaul);\r\n        }\r\n\r\nsave settings-\r\n\r\n    @SuppressLint(&quot;ApplySharedPref&quot;)\r\n    public static void saveSetting(Context context, String key, String valu){\r\n        SharedPreferences preferences = context.getSharedPreferences(&quot;mySettings&quot;,MODE_PRIVATE);\r\n        SharedPreferences.Editor edit= preferences.edit();\r\n        edit.putString(key,valu);\r\n        edit.commit();\r\n\r\n    }","title":"android read/write user preferences","body":"<p>Read Settings</p>\n<pre><code>public static String readSetting(Context context, String key, String defaul){\n        SharedPreferences preferences = context.getSharedPreferences(&quot;mySettings&quot;,MODE_PRIVATE);\n        return preferences.getString(key,defaul);\n    }\n</code></pre>\n<p>save settings-</p>\n<pre><code>@SuppressLint(&quot;ApplySharedPref&quot;)\npublic static void saveSetting(Context context, String key, String valu){\n    SharedPreferences preferences = context.getSharedPreferences(&quot;mySettings&quot;,MODE_PRIVATE);\n    SharedPreferences.Editor edit= preferences.edit();\n    edit.putString(key,valu);\n    edit.commit();\n\n}\n</code></pre>\n"}],"owner":{"account_id":1285846,"reputation":3718,"user_id":1238934,"accept_rate":92,"display_name":"Jaume"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11007,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":9498786,"answer_count":2,"score":2,"last_activity_date":1655061572,"creation_date":1330516660,"question_id":9498713,"body_markdown":"I am migrating iOS app to android and, thinking about iOS, I set a default plist file with strings and keys that are then modified using NSuserDefaults. I read some posts and docs and not really clear about how to do it properly in Android. \r\nI need a preferences file with keys and strings that I could read and write. Thank you.\r\n","title":"android read/write user preferences","body":"<p>I am migrating iOS app to android and, thinking about iOS, I set a default plist file with strings and keys that are then modified using NSuserDefaults. I read some posts and docs and not really clear about how to do it properly in Android. \nI need a preferences file with keys and strings that I could read and write. Thank you.</p>\n"},{"tags":["java","methods","program-entry-point"],"comments":[{"owner":{"account_id":1692034,"reputation":3196,"user_id":1554195,"display_name":"tquadrat"},"score":0,"creation_date":1654805985,"post_id":72566088,"comment_id":128186502,"body_markdown":"The curly brace after `main()` is not close; add a `}` just before the line marked in your question, and it should compile. Afterwards, you can try to reformat accordingly …","body":"The curly brace after <code>main()</code> is not close; add a <code>}</code> just before the line marked in your question, and it should compile. Afterwards, you can try to reformat accordingly …"}],"answers":[{"tags":[],"owner":{"account_id":20066916,"reputation":53,"user_id":14712457,"display_name":"Raimundo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1655061041,"creation_date":1654806153,"answer_id":72566237,"question_id":72566088,"body_markdown":"There are a few issues with your code. The first one I noticed is you didn&#39;t declare the &quot;selection&quot; variable where you try to assign a value to in the default case.\r\n\r\nThe error you are facing is due to not closing the main method, you simply missed an &quot;}&quot; after closing the while loop.\r\n\r\n\r\nHere it is properly closed:\r\n\r\n\r\n        public static void main(String[] args) {\r\n        Scanner kb = new Scanner(System.in);\r\n        double num1, num2;\r\n        boolean keepGoing = true;\r\n        int choice;\r\n        double answer = 0.0;\r\n        double calcTax;\r\n\r\n        System.out.print(&quot;Please give me a number: &quot;);\r\n        num1 = kb.nextDouble();\r\n        System.out.print(&quot;Please give me another number: &quot;);\r\n        num2 = kb.nextDouble();\r\n\r\n        while (keepGoing) {\r\n            System.out.print(&quot;Which would you like to do? &quot;);\r\n            choice = kb.nextInt();\r\n            double average = findAverage(num1, num2);\r\n\r\n            switch (choice) {\r\n                case 1:\r\n                    System.out.println(+num1 + &quot; + &quot; + num2 + &quot; = &quot;);\r\n                    break;\r\n                case 2:\r\n                    System.out.println(&quot;The average of &quot; + num1 + &quot;and&quot; + num2 + &quot;is&quot; + average);\r\n                    break;\r\n                case 3:\r\n                    System.out.println(&quot;The amount in tax to be collected from a purchace of &quot; + num1 + &quot;and &quot; + num2 + &quot;is &quot; + calcTax);\r\n                    break;\r\n                case 4:\r\n                    System.out.println(&quot;You&#39;ve chosen to quit.&quot;);\r\n                    System.exit(0);\r\n                    return;\r\n                default:\r\n                    System.out.println(&quot;Invalid entry. Please try again.&quot;);\r\n                    selection = scanner.nextInt();\r\n            }\r\n            kb.close();\r\n        }\r\n    }\r\n\r\n\r\nThere are still a few issues with your program, namely logic which you should analyze yourself to develop your programming ability.","title":"How do I correctly format my code to run this menu program in Java?","body":"<p>There are a few issues with your code. The first one I noticed is you didn't declare the &quot;selection&quot; variable where you try to assign a value to in the default case.</p>\n<p>The error you are facing is due to not closing the main method, you simply missed an &quot;}&quot; after closing the while loop.</p>\n<p>Here it is properly closed:</p>\n<pre><code>    public static void main(String[] args) {\n    Scanner kb = new Scanner(System.in);\n    double num1, num2;\n    boolean keepGoing = true;\n    int choice;\n    double answer = 0.0;\n    double calcTax;\n\n    System.out.print(&quot;Please give me a number: &quot;);\n    num1 = kb.nextDouble();\n    System.out.print(&quot;Please give me another number: &quot;);\n    num2 = kb.nextDouble();\n\n    while (keepGoing) {\n        System.out.print(&quot;Which would you like to do? &quot;);\n        choice = kb.nextInt();\n        double average = findAverage(num1, num2);\n\n        switch (choice) {\n            case 1:\n                System.out.println(+num1 + &quot; + &quot; + num2 + &quot; = &quot;);\n                break;\n            case 2:\n                System.out.println(&quot;The average of &quot; + num1 + &quot;and&quot; + num2 + &quot;is&quot; + average);\n                break;\n            case 3:\n                System.out.println(&quot;The amount in tax to be collected from a purchace of &quot; + num1 + &quot;and &quot; + num2 + &quot;is &quot; + calcTax);\n                break;\n            case 4:\n                System.out.println(&quot;You've chosen to quit.&quot;);\n                System.exit(0);\n                return;\n            default:\n                System.out.println(&quot;Invalid entry. Please try again.&quot;);\n                selection = scanner.nextInt();\n        }\n        kb.close();\n    }\n}\n</code></pre>\n<p>There are still a few issues with your program, namely logic which you should analyze yourself to develop your programming ability.</p>\n"}],"owner":{"account_id":25513422,"reputation":11,"user_id":19304660,"display_name":"NaplesAnonymous"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1654853027,"answer_count":1,"score":0,"last_activity_date":1655061041,"creation_date":1654805339,"question_id":72566088,"body_markdown":"This is a beginner question. I&#39;m about to start an online bootcamp and am stuck on my last pre-work project (which is a cumulation of everything we&#39;ve been instructed to self-teach ourselves). I&#39;m really lost and can&#39;t wrap my head around this.\r\n\r\nHere is what I&#39;ve come up with so far:\r\n```\r\nimport java.util.Scanner;\r\n\r\npublic class Objective9Lab5 {\r\n\r\n  public static void main(String[] args) {\r\n    Scanner kb = new Scanner (System.in);\r\n\t\tdouble num1, num2;\r\n\t\tboolean keepGoing = true;\r\n\t\tint choice;\r\n\t\tdouble answer = 0.0;\r\n    double calcTax;\r\n\r\n    System.out.print(&quot;Please give me a number: &quot;);\r\n    num1 = kb.nextDouble();\r\n    System.out.print(&quot;Please give me another number: &quot;);\r\n    num2 = kb.nextDouble();\r\n\r\n\t\twhile (keepGoing) {\r\n\t\t\tSystem.out.print(&quot;Which would you like to do? &quot;);\r\n\t\t\tchoice = kb.nextInt();\r\n      double average = findAverage(num1, num2);\r\n\r\n\t\t\tswitch (choice) {\r\n        case 1:\r\n          System.out.println(+ num1 + &quot; + &quot; + num2 + &quot; = &quot;);\r\n          break;\r\n        case 2:\r\n          System.out.println(&quot;The average of &quot; + num1 + &quot;and&quot; + num2 + &quot;is&quot; + average);\r\n          break;\r\n        case 3:\r\n          System.out.println(&quot;The amount in tax to be collected from a purchace of &quot; + num1 + &quot;and &quot; + num2 + &quot;is &quot; + calcTax);\r\n          break;\r\n        case 4: System.out.println(&quot;You&#39;ve chosen to quit.&quot;);\r\n          System.exit(0);\r\n          return;\r\n        default:\r\n          System.out.println(&quot;Invalid entry. Please try again.&quot;);\r\n          selection = scanner.nextInt();\r\n\t\t}\r\n\t\tkb.close();\r\n\t}\r\n\tpublic static void printMenu() {\r\n\t\tSystem.out.println();\r\n\t\tSystem.out.println(&quot;========= MENU =========&quot;);\r\n\t\tSystem.out.println(&quot;|                      |&quot;);\r\n\t\tSystem.out.println(&quot;|   1. Add Numbers     |&quot;);\r\n\t\tSystem.out.println(&quot;|   2. Find Average    |&quot;);\r\n\t\tSystem.out.println(&quot;|   3. Calculate Tax   |&quot;);\r\n\t\tSystem.out.println(&quot;|   4. Exit            |&quot;);\r\n\t\tSystem.out.println(&quot;|                      |&quot;);\r\n\t\tSystem.out.println(&quot;========================&quot;);\r\n\t\tSystem.out.println();\r\n\t}\r\n\r\n\tpublic static double findSum(double x, double y) {\r\n\t\tdouble sum = x + y;\r\n\t\treturn sum;\r\n  }\r\n  public static double findAverage(double x, double y){\r\n    double average = (x + y) / 2;\r\n    return average;\r\n  }\r\n  public static double findCalcTax(double x, double y){\r\n    double sum * .831\r\n\t}\r\n```\r\n\r\nMy output is supposed to look something like this:\r\n```\r\nPlease give me a number: 2\r\nPlease give me another number: 8\r\n\r\n========= MENU =========\r\n|                      |\r\n|   1. Add Numbers     |\r\n|   2. Find Average    |\r\n|   3. Calculate Tax   |\r\n|   4. Exit            |\r\n|                      |\r\n========================\r\n\r\nWhich would you like to do? 1\r\n2.0 + 8.0 = 10.0\r\n\r\n========= MENU =========\r\n|                      |\r\n|   1. Add Numbers     |\r\n|   2. Find Average    |\r\n|   3. Calculate Tax   |\r\n|   4. Exit            |\r\n|                      |\r\n========================\r\n\r\nWhich would you like to do? 2\r\nThe average of 2.0 and 8.0 is: 5.0\r\n\r\n========= MENU =========\r\n|                      |\r\n|   1. Add Numbers     |\r\n|   2. Find Average    |\r\n|   3. Calculate Tax   |\r\n|   4. Exit            |\r\n|                      |\r\n========================\r\n\r\nWhich would you like to do? 3\r\nThe amount in tax to be collected from a purchase of 2.0 and 8.0 is: 0.831\r\n\r\n========= MENU =========\r\n|                      |\r\n|   1. Add Numbers     |\r\n|   2. Find Average    |\r\n|   3. Calculate Tax   |\r\n|   4. Exit            |\r\n|                      |\r\n========================\r\n\r\nWhich would you like to do? 5\r\nInvalid entry.  Please try again\r\n\r\n========= MENU =========\r\n|                      |\r\n|   1. Add Numbers     |\r\n|   2. Find Average    |\r\n|   3. Calculate Tax   |\r\n|   4. Exit            |\r\n|                      |\r\n========================\r\n\r\nWhich would you like to do? 4\r\nYou&#39;ve chosen to quit.\r\n```\r\nI keep getting this error, but for all of the main methods:\r\n```\r\nObjective9Lab5.java:59: error: illegal start of expression\r\n\tpublic static double findSum(double x, double y) {\r\n\t^\r\n```\r\n","title":"How do I correctly format my code to run this menu program in Java?","body":"<p>This is a beginner question. I'm about to start an online bootcamp and am stuck on my last pre-work project (which is a cumulation of everything we've been instructed to self-teach ourselves). I'm really lost and can't wrap my head around this.</p>\n<p>Here is what I've come up with so far:</p>\n<pre><code>import java.util.Scanner;\n\npublic class Objective9Lab5 {\n\n  public static void main(String[] args) {\n    Scanner kb = new Scanner (System.in);\n        double num1, num2;\n        boolean keepGoing = true;\n        int choice;\n        double answer = 0.0;\n    double calcTax;\n\n    System.out.print(&quot;Please give me a number: &quot;);\n    num1 = kb.nextDouble();\n    System.out.print(&quot;Please give me another number: &quot;);\n    num2 = kb.nextDouble();\n\n        while (keepGoing) {\n            System.out.print(&quot;Which would you like to do? &quot;);\n            choice = kb.nextInt();\n      double average = findAverage(num1, num2);\n\n            switch (choice) {\n        case 1:\n          System.out.println(+ num1 + &quot; + &quot; + num2 + &quot; = &quot;);\n          break;\n        case 2:\n          System.out.println(&quot;The average of &quot; + num1 + &quot;and&quot; + num2 + &quot;is&quot; + average);\n          break;\n        case 3:\n          System.out.println(&quot;The amount in tax to be collected from a purchace of &quot; + num1 + &quot;and &quot; + num2 + &quot;is &quot; + calcTax);\n          break;\n        case 4: System.out.println(&quot;You've chosen to quit.&quot;);\n          System.exit(0);\n          return;\n        default:\n          System.out.println(&quot;Invalid entry. Please try again.&quot;);\n          selection = scanner.nextInt();\n        }\n        kb.close();\n    }\n    public static void printMenu() {\n        System.out.println();\n        System.out.println(&quot;========= MENU =========&quot;);\n        System.out.println(&quot;|                      |&quot;);\n        System.out.println(&quot;|   1. Add Numbers     |&quot;);\n        System.out.println(&quot;|   2. Find Average    |&quot;);\n        System.out.println(&quot;|   3. Calculate Tax   |&quot;);\n        System.out.println(&quot;|   4. Exit            |&quot;);\n        System.out.println(&quot;|                      |&quot;);\n        System.out.println(&quot;========================&quot;);\n        System.out.println();\n    }\n\n    public static double findSum(double x, double y) {\n        double sum = x + y;\n        return sum;\n  }\n  public static double findAverage(double x, double y){\n    double average = (x + y) / 2;\n    return average;\n  }\n  public static double findCalcTax(double x, double y){\n    double sum * .831\n    }\n</code></pre>\n<p>My output is supposed to look something like this:</p>\n<pre><code>Please give me a number: 2\nPlease give me another number: 8\n\n========= MENU =========\n|                      |\n|   1. Add Numbers     |\n|   2. Find Average    |\n|   3. Calculate Tax   |\n|   4. Exit            |\n|                      |\n========================\n\nWhich would you like to do? 1\n2.0 + 8.0 = 10.0\n\n========= MENU =========\n|                      |\n|   1. Add Numbers     |\n|   2. Find Average    |\n|   3. Calculate Tax   |\n|   4. Exit            |\n|                      |\n========================\n\nWhich would you like to do? 2\nThe average of 2.0 and 8.0 is: 5.0\n\n========= MENU =========\n|                      |\n|   1. Add Numbers     |\n|   2. Find Average    |\n|   3. Calculate Tax   |\n|   4. Exit            |\n|                      |\n========================\n\nWhich would you like to do? 3\nThe amount in tax to be collected from a purchase of 2.0 and 8.0 is: 0.831\n\n========= MENU =========\n|                      |\n|   1. Add Numbers     |\n|   2. Find Average    |\n|   3. Calculate Tax   |\n|   4. Exit            |\n|                      |\n========================\n\nWhich would you like to do? 5\nInvalid entry.  Please try again\n\n========= MENU =========\n|                      |\n|   1. Add Numbers     |\n|   2. Find Average    |\n|   3. Calculate Tax   |\n|   4. Exit            |\n|                      |\n========================\n\nWhich would you like to do? 4\nYou've chosen to quit.\n</code></pre>\n<p>I keep getting this error, but for all of the main methods:</p>\n<pre><code>Objective9Lab5.java:59: error: illegal start of expression\n    public static double findSum(double x, double y) {\n    ^\n</code></pre>\n"},{"tags":["java","gradle","continuous-integration","circleci","circleci-2.0"],"comments":[{"owner":{"account_id":466186,"reputation":1171,"user_id":870783,"display_name":"Marcin Szulc"},"score":0,"creation_date":1655108033,"post_id":72595096,"comment_id":128243232,"body_markdown":"How are the projects separated? In theory if each project is a separate module with separate gradle file, you would have dependencies section where it&#39;s defined project A and C depend on D. It wouldn&#39;t be a strict checking if specific D class has changed then re-run build of A and C, but I think it&#39;s better and cleaner that way","body":"How are the projects separated? In theory if each project is a separate module with separate gradle file, you would have dependencies section where it&#39;s defined project A and C depend on D. It wouldn&#39;t be a strict checking if specific D class has changed then re-run build of A and C, but I think it&#39;s better and cleaner that way"},{"owner":{"account_id":14483969,"reputation":1,"user_id":10462451,"display_name":"Fellita Candini"},"score":0,"creation_date":1655205295,"post_id":72595096,"comment_id":128271799,"body_markdown":"Yes they are separate projects with separate gradle file. There is already checking on whether any updates on project D. \n\nMaybe I have restate the problem. This project D is actually some kind of a library, so although class A and C have a dependency on the project it might be from different class/module. When the class which project A have dependency on have an update, I want my CI to only build project A and D despite project C also have a dependency on project D. I hope my explanation clear enough.","body":"Yes they are separate projects with separate gradle file. There is already checking on whether any updates on project D.   Maybe I have restate the problem. This project D is actually some kind of a library, so although class A and C have a dependency on the project it might be from different class/module. When the class which project A have dependency on have an update, I want my CI to only build project A and D despite project C also have a dependency on project D. I hope my explanation clear enough."},{"owner":{"account_id":466186,"reputation":1171,"user_id":870783,"display_name":"Marcin Szulc"},"score":0,"creation_date":1655215465,"post_id":72595096,"comment_id":128276075,"body_markdown":"I might be missing something, when you&#39;re building gradle project with modules, it detects automatically and rebuilds only what it needs, otherwise uses cache, unless you&#39;ve disabled cache. In other words, should be working that way already","body":"I might be missing something, when you&#39;re building gradle project with modules, it detects automatically and rebuilds only what it needs, otherwise uses cache, unless you&#39;ve disabled cache. In other words, should be working that way already"}],"owner":{"account_id":14483969,"reputation":1,"user_id":10462451,"display_name":"Fellita Candini"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1655060984,"creation_date":1655060639,"question_id":72595096,"body_markdown":"For example if I have class A1 in project A, B1 in project B, C1 in project C, and D1 in project D. Both class A1 and C1 have dependency on class D1. When I updated class D1 I want to track which projects contains A1 and C1. The objective is that I want to only build project A, C, and D on my CI.\r\n\r\nPS: I use monorepo","title":"How to detect which gradle project that contains classes that have dependency on an updated class?","body":"<p>For example if I have class A1 in project A, B1 in project B, C1 in project C, and D1 in project D. Both class A1 and C1 have dependency on class D1. When I updated class D1 I want to track which projects contains A1 and C1. The objective is that I want to only build project A, C, and D on my CI.</p>\n<p>PS: I use monorepo</p>\n"},{"tags":["java","android","android-notifications"],"comments":[{"owner":{"account_id":39846,"reputation":991143,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1643635488,"post_id":70926398,"comment_id":125384899,"body_markdown":"Get rid of the `ACTION_CLOSE_SYSTEM_DIALOGS` and just use `cancel()` or `cancelAll()` on `NotificationManager` or `NotificationManagerCompat`.","body":"Get rid of the <code>ACTION_CLOSE_SYSTEM_DIALOGS</code> and just use <code>cancel()</code> or <code>cancelAll()</code> on <code>NotificationManager</code> or <code>NotificationManagerCompat</code>."},{"owner":{"account_id":12651033,"reputation":167,"user_id":9195175,"display_name":"Leandro 86"},"score":0,"creation_date":1643639437,"post_id":70926398,"comment_id":125386649,"body_markdown":"@CommonsWare that did it! I only needed cancelAll after all. Thanks!","body":"@CommonsWare that did it! I only needed cancelAll after all. Thanks!"},{"owner":{"account_id":940056,"reputation":305,"user_id":968281,"display_name":"Talu"},"score":0,"creation_date":1646705615,"post_id":70926398,"comment_id":126185064,"body_markdown":"The problem is when your notification needs to be sticky","body":"The problem is when your notification needs to be sticky"},{"owner":{"account_id":1706707,"reputation":5002,"user_id":1565635,"accept_rate":74,"display_name":"Tobias Reich"},"score":0,"creation_date":1660128717,"post_id":70926398,"comment_id":129458185,"body_markdown":"One trace might be the new permission\n&lt;uses-permission android:name=&quot;android.permission.BROADCAST_CLOSE_SYSTEM_DIALOGS&quot; /&gt;\nfor the manifest. But that alone doesn&#39;t solve it.","body":"One trace might be the new permission &lt;uses-permission android:name=&quot;android.permission.BROADCAST_CLOSE_SYSTEM_DIAL&zwnj;&#8203;OGS&quot; /&gt; for the manifest. But that alone doesn&#39;t solve it."},{"owner":{"account_id":19044113,"reputation":704,"user_id":13903584,"display_name":"Muhammad Asad"},"score":0,"creation_date":1660216767,"post_id":70926398,"comment_id":129483125,"body_markdown":"do you known the answer at this time?","body":"do you known the answer at this time?"}],"answers":[{"tags":[],"owner":{"account_id":6047252,"reputation":51,"user_id":17983249,"display_name":"windruf"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1655060920,"creation_date":1654863370,"answer_id":72574159,"question_id":70926398,"body_markdown":"`ACTION_CLOSE_SYSTEM_DIALOGS` is for system and preinstalled apps. Needs signature permission.\r\n\r\nAccessibilityService.GLOBAL_ACTION_DISMISS_NOTIFICATION_SHADE is an overkill. is like, &quot;give me keys to your home so I can clean up junk next to your school.&quot;\r\n\r\nStatusBarManager `collapsePanels()` is hidden API. you have to use double reflection to use it (AndroidStudio is smart enough to see through simple reflection). Didn&#39;t work for me. It throws an exception, but it is hidden by reflection.\r\n\r\nSorry I couldn&#39;t give you a solution, but at least I gave you places where I searched and failed.","title":"How to dismiss notification since Android 12?","body":"<p><code>ACTION_CLOSE_SYSTEM_DIALOGS</code> is for system and preinstalled apps. Needs signature permission.</p>\n<p>AccessibilityService.GLOBAL_ACTION_DISMISS_NOTIFICATION_SHADE is an overkill. is like, &quot;give me keys to your home so I can clean up junk next to your school.&quot;</p>\n<p>StatusBarManager <code>collapsePanels()</code> is hidden API. you have to use double reflection to use it (AndroidStudio is smart enough to see through simple reflection). Didn't work for me. It throws an exception, but it is hidden by reflection.</p>\n<p>Sorry I couldn't give you a solution, but at least I gave you places where I searched and failed.</p>\n"}],"owner":{"account_id":12651033,"reputation":167,"user_id":9195175,"display_name":"Leandro 86"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8130,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"answer_count":1,"score":12,"last_activity_date":1655060920,"creation_date":1643634097,"question_id":70926398,"body_markdown":"My app creates a notification with two actions the user can choose.\r\nAfter choosing either of the actions, I want the notification to be automatically dismissed. Until now I achieved that by having this at the end of *onReceive* from my *BroadcastReceiver*:\r\n\r\n    Intent it = new Intent(Intent.ACTION_CLOSE_SYSTEM_DIALOGS);\r\n    context.sendBroadcast(it);\r\n    NotificationManagerCompat.from(context.getApplicationContext()).cancelAll();\r\nAfter updating to Android 12, the notifications are not getting closed anymore. Instead, I&#39;m having this error:\r\n\r\n&gt; java.lang.SecurityException: Permission Denial: android.intent.action.CLOSE_SYSTEM_DIALOGS broadcast from (...) requires android.permission.BROADCAST_CLOSE_SYSTEM_DIALOGS.. Cause: android.os.RemoteException\r\n\r\nAdding that permission had no effect though. Googling about it I found that **ACTION_CLOSE_SYSTEM_DIALOGS** is being deprecated, and the only official alternative seems to be an AccessibilityService, although I didn&#39;t find any example of that. So my question is: what is the best way to close a notification now? If it is indeed through AccessibilityService, how can it be done?\r\n\r\nEDIT: Now I realized that I was doing 2 different things in my original code: Closing the notification panel, and dismissing the notifications. The last part (cancelAll) was enough for my needs, and it also closes the panel when there is no other notification left (from other apps). However, it&#39;s important to note for future reference that it&#39;s still impossible to close the panel when there is another notification left in the tray in the same way that ACTION_CLOSE_SYSTEM_DIALOGS did.","title":"How to dismiss notification since Android 12?","body":"<p>My app creates a notification with two actions the user can choose.\nAfter choosing either of the actions, I want the notification to be automatically dismissed. Until now I achieved that by having this at the end of <em>onReceive</em> from my <em>BroadcastReceiver</em>:</p>\n<pre><code>Intent it = new Intent(Intent.ACTION_CLOSE_SYSTEM_DIALOGS);\ncontext.sendBroadcast(it);\nNotificationManagerCompat.from(context.getApplicationContext()).cancelAll();\n</code></pre>\n<p>After updating to Android 12, the notifications are not getting closed anymore. Instead, I'm having this error:</p>\n<blockquote>\n<p>java.lang.SecurityException: Permission Denial: android.intent.action.CLOSE_SYSTEM_DIALOGS broadcast from (...) requires android.permission.BROADCAST_CLOSE_SYSTEM_DIALOGS.. Cause: android.os.RemoteException</p>\n</blockquote>\n<p>Adding that permission had no effect though. Googling about it I found that <strong>ACTION_CLOSE_SYSTEM_DIALOGS</strong> is being deprecated, and the only official alternative seems to be an AccessibilityService, although I didn't find any example of that. So my question is: what is the best way to close a notification now? If it is indeed through AccessibilityService, how can it be done?</p>\n<p>EDIT: Now I realized that I was doing 2 different things in my original code: Closing the notification panel, and dismissing the notifications. The last part (cancelAll) was enough for my needs, and it also closes the panel when there is no other notification left (from other apps). However, it's important to note for future reference that it's still impossible to close the panel when there is another notification left in the tray in the same way that ACTION_CLOSE_SYSTEM_DIALOGS did.</p>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":3,"creation_date":1654867228,"post_id":72574993,"comment_id":128201272,"body_markdown":"Can you please share your attempt (either with streams or loops) ?","body":"Can you please share your attempt (either with streams or loops) ?"},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1654869025,"post_id":72574993,"comment_id":128201985,"body_markdown":"You could use another `Data` object as an identity object for `Stream#reduce`, though to be honest with different sets of operations on different fields, it would probably be easier to either have separate streams, or a helper method  which accepts a reference to the field and the reducing operation you want (e.g. `IntStream#sum`)","body":"You could use another <code>Data</code> object as an identity object for <code>Stream#reduce</code>, though to be honest with different sets of operations on different fields, it would probably be easier to either have separate streams, or a helper method  which accepts a reference to the field and the reducing operation you want (e.g. <code>IntStream#sum</code>)"},{"owner":{"account_id":11854454,"reputation":433,"user_id":14999427,"display_name":"Suic"},"score":0,"creation_date":1655030914,"post_id":72574993,"comment_id":128229222,"body_markdown":"You say in another comment that you would want to apply this for 10+ properties and u want this to be done in a single stream, i don&#39;t think there&#39;s a nice way to do it so perhaps you should just use a simple loop and have methods that would calculate the min/max/sum etc)","body":"You say in another comment that you would want to apply this for 10+ properties and u want this to be done in a single stream, i don&#39;t think there&#39;s a nice way to do it so perhaps you should just use a simple loop and have methods that would calculate the min/max/sum etc)"}],"answers":[{"tags":[],"owner":{"account_id":5569841,"reputation":3750,"user_id":4415625,"display_name":"dani-vta"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1655043464,"creation_date":1654869817,"answer_id":72575602,"question_id":72574993,"body_markdown":"&lt;h3&gt;EDIT&lt;/h3&gt;\r\n\r\nAfter reading your comments I better understood what you meant and need. If your final goal is to create a `Data` which holds the result of multiple computations, then the stream operation `teeing` is still a viable solution.\r\n\r\nHowever, since the operation `teeing` accepts only 2 downstreams and a merger `BiFunction` to merge their results, you need to nest your `teeing` calls to include in the first downstream one of the operations you need to perform; while in the second downstream another `teeing` call. Basically, every second downstream of each nested call uses a `teeing` operation until you&#39;re left with only two computations. Then, the merger function of every outer call takes the first downstream&#39;s result and the nested call&#39;s result, merges them together, and creates a new `Data` object with them.\r\n\r\nHere is an example with a hypothetical `Data` class whose properties represent: min value, max value, average and sum:\r\n\r\n```\r\n@lombok.Data\r\nclass Data {\r\n    private @NonNull int prop1Min;\r\n    private @NonNull int prop2Max;\r\n    private @NonNull int prop3Avg;\r\n    private @NonNull int prop4Sum;\r\n}\r\n\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        List&lt;Data&gt; data = List.of(\r\n                new Data(1, 10, 100, 1000),\r\n                new Data(2, 20, 200, 2000),\r\n                new Data(3, 30, 300, 3000),\r\n                new Data(4, 40, 400, 4000)\r\n        );\r\n\r\n        Data result = data.stream().collect(Collectors.teeing(\r\n                Collectors.minBy(Comparator.comparing(Data::getProp1Min)),\r\n                Collectors.teeing(\r\n                        Collectors.maxBy(Comparator.comparing(Data::getProp2Max)),\r\n                        Collectors.teeing(\r\n                                Collectors.averagingInt(Data::getProp3Avg),\r\n                                Collectors.summingInt(Data::getProp4Sum),\r\n                                (avg, count) -&gt; new Data(0, 0, avg.intValue(), count.intValue())),\r\n                        (max, d) -&gt; new Data(0, max.get().getProp2Max(), d.getProp3Avg(), d.getProp4Sum())\r\n                ),\r\n                (min, d) -&gt; new Data(min.get().getProp1Min(), d.getProp2Max(), d.getProp3Avg(), d.getProp4Sum())\r\n        ));\r\n\r\n        System.out.println(result);\r\n    }\r\n}\r\n```\r\n\r\n&lt;h4&gt;Output&lt;/h4&gt;\r\n\r\n```\r\nData(prop1Min=1, prop2Max=40, prop3Avg=250, prop4Sum=10000)\r\n```\r\n\r\n_______________________________________________________________\r\n&lt;h3&gt;Previous Answer&lt;/h3&gt;\r\n\r\nIt sounds like you&#39;re trying to retrieve some statistics from a stream of elements. \r\n\r\n&gt; I am trying [...] to stream the list, such that the end result will be a generic object or a data object where each prop get its own sum/max/min etc.\r\n\r\nFor this purpose, there is already the `IntSummaryStatistics` class which includes a set of statistics gathered from a set of int elements. To obtain this information, you just need to stream your elements and invoke the `collect` operation by supplying `Collectors.summarizingInt()`; this will return the statistics of your elements. Moreover, Java also provides `LongSummaryStatistics` and `DoubleSummaryStatistics` to retrieve statistics of long and double types.\r\n\r\n```\r\nList&lt;Integer&gt; list = new ArrayList&lt;&gt;(List.of(0, 1, 2, 3, 4, 5, 6, 7, 8, 9));\r\nIntSummaryStatistics stats = list.stream()\r\n        .collect(Collectors.summarizingInt(Integer::intValue));\r\n\r\nSystem.out.println(&quot;Count: &quot; + stats.getCount());\r\nSystem.out.println(&quot;Sum: &quot; + stats.getSum());\r\nSystem.out.println(&quot;Min Value: &quot; + stats.getMin());\r\nSystem.out.println(&quot;Max Value: &quot; + stats.getMax());\r\nSystem.out.println(&quot;Average: &quot; + stats.getAverage());\r\n\r\n//In case Data had not been designed in place of IntSummaryStatistics and it&#39;s an actual needed class, \r\n//then you could set up the properties you need from the IntSummaryStatistics\r\nData d = new Data();\r\nd.setMinProp(stats.getMin());\r\nd.setMaxProp(stats.getMax());\r\nd.setSumProp(stats.getSum());\r\n\r\n\r\n//--------- Data class --------- \r\n\r\nclass Data {\r\n    private int minProp, maxProp, sumProp;\r\n\r\n    //... rest of the implementation ...\r\n\r\n    public void setMinProp(int minProp) {\r\n        this.minProp = minProp;\r\n    }\r\n\r\n    public void setMaxProp(int maxProp) {\r\n        this.maxProp = maxProp;\r\n    }\r\n\r\n    public void setSumProp(int sumProp) {\r\n        this.sumProp = sumProp;\r\n    }\r\n}\r\n```\r\n\r\n&lt;h4&gt;Output&lt;/h4&gt;\r\n\r\n```\r\nCount: 10\r\nSum: 45\r\nMin Value: 0\r\nMax Value: 9\r\nAverage: 4.5\r\n```","title":"stream of objects containing multiple properties question","body":"<h3>EDIT</h3>\n<p>After reading your comments I better understood what you meant and need. If your final goal is to create a <code>Data</code> which holds the result of multiple computations, then the stream operation <code>teeing</code> is still a viable solution.</p>\n<p>However, since the operation <code>teeing</code> accepts only 2 downstreams and a merger <code>BiFunction</code> to merge their results, you need to nest your <code>teeing</code> calls to include in the first downstream one of the operations you need to perform; while in the second downstream another <code>teeing</code> call. Basically, every second downstream of each nested call uses a <code>teeing</code> operation until you're left with only two computations. Then, the merger function of every outer call takes the first downstream's result and the nested call's result, merges them together, and creates a new <code>Data</code> object with them.</p>\n<p>Here is an example with a hypothetical <code>Data</code> class whose properties represent: min value, max value, average and sum:</p>\n<pre><code>@lombok.Data\nclass Data {\n    private @NonNull int prop1Min;\n    private @NonNull int prop2Max;\n    private @NonNull int prop3Avg;\n    private @NonNull int prop4Sum;\n}\n\npublic class Main {\n    public static void main(String[] args) {\n        List&lt;Data&gt; data = List.of(\n                new Data(1, 10, 100, 1000),\n                new Data(2, 20, 200, 2000),\n                new Data(3, 30, 300, 3000),\n                new Data(4, 40, 400, 4000)\n        );\n\n        Data result = data.stream().collect(Collectors.teeing(\n                Collectors.minBy(Comparator.comparing(Data::getProp1Min)),\n                Collectors.teeing(\n                        Collectors.maxBy(Comparator.comparing(Data::getProp2Max)),\n                        Collectors.teeing(\n                                Collectors.averagingInt(Data::getProp3Avg),\n                                Collectors.summingInt(Data::getProp4Sum),\n                                (avg, count) -&gt; new Data(0, 0, avg.intValue(), count.intValue())),\n                        (max, d) -&gt; new Data(0, max.get().getProp2Max(), d.getProp3Avg(), d.getProp4Sum())\n                ),\n                (min, d) -&gt; new Data(min.get().getProp1Min(), d.getProp2Max(), d.getProp3Avg(), d.getProp4Sum())\n        ));\n\n        System.out.println(result);\n    }\n}\n</code></pre>\n<h4>Output</h4>\n<pre><code>Data(prop1Min=1, prop2Max=40, prop3Avg=250, prop4Sum=10000)\n</code></pre>\n<hr />\n<h3>Previous Answer</h3>\n<p>It sounds like you're trying to retrieve some statistics from a stream of elements.</p>\n<blockquote>\n<p>I am trying [...] to stream the list, such that the end result will be a generic object or a data object where each prop get its own sum/max/min etc.</p>\n</blockquote>\n<p>For this purpose, there is already the <code>IntSummaryStatistics</code> class which includes a set of statistics gathered from a set of int elements. To obtain this information, you just need to stream your elements and invoke the <code>collect</code> operation by supplying <code>Collectors.summarizingInt()</code>; this will return the statistics of your elements. Moreover, Java also provides <code>LongSummaryStatistics</code> and <code>DoubleSummaryStatistics</code> to retrieve statistics of long and double types.</p>\n<pre><code>List&lt;Integer&gt; list = new ArrayList&lt;&gt;(List.of(0, 1, 2, 3, 4, 5, 6, 7, 8, 9));\nIntSummaryStatistics stats = list.stream()\n        .collect(Collectors.summarizingInt(Integer::intValue));\n\nSystem.out.println(&quot;Count: &quot; + stats.getCount());\nSystem.out.println(&quot;Sum: &quot; + stats.getSum());\nSystem.out.println(&quot;Min Value: &quot; + stats.getMin());\nSystem.out.println(&quot;Max Value: &quot; + stats.getMax());\nSystem.out.println(&quot;Average: &quot; + stats.getAverage());\n\n//In case Data had not been designed in place of IntSummaryStatistics and it's an actual needed class, \n//then you could set up the properties you need from the IntSummaryStatistics\nData d = new Data();\nd.setMinProp(stats.getMin());\nd.setMaxProp(stats.getMax());\nd.setSumProp(stats.getSum());\n\n\n//--------- Data class --------- \n\nclass Data {\n    private int minProp, maxProp, sumProp;\n\n    //... rest of the implementation ...\n\n    public void setMinProp(int minProp) {\n        this.minProp = minProp;\n    }\n\n    public void setMaxProp(int maxProp) {\n        this.maxProp = maxProp;\n    }\n\n    public void setSumProp(int sumProp) {\n        this.sumProp = sumProp;\n    }\n}\n</code></pre>\n<h4>Output</h4>\n<pre><code>Count: 10\nSum: 45\nMin Value: 0\nMax Value: 9\nAverage: 4.5\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1654874957,"creation_date":1654871643,"answer_id":72576006,"question_id":72574993,"body_markdown":"&gt; I am trying, in a &#39;one shot&#39; like operation\r\n\r\nYou are looking for the [Teeing Collector][1] introduced in Java 12. Given a list of Data, where a Data class is something like:\r\n\r\n```java\r\n@AllArgsConstructor\r\n@Getter\r\n@ToString\r\npublic class Data {\r\n    int prop1;\r\n    int prop2;\r\n}\r\n```\r\n\r\nand a list:\r\n\r\n```java\r\nList&lt;Data&gt; data = List.of(\r\n    new Data(1,10),\r\n    new Data(2,20),\r\n    new Data(3,30),\r\n    new Data(4,40)\r\n);\r\n```\r\n\r\n&gt; the end result will be an generic object or a data object\r\n&gt; \r\n&gt; if I apply max to the first prop and sum to the second\r\n\r\nYou can use `Collectors.teeing` to get a new Data object with the result of your operations\r\n\r\n    Data result =\r\n    data.stream().collect(Collectors.teeing(\r\n            Collectors.reducing(BinaryOperator.maxBy(Comparator.comparing(Data::getProp1))),\r\n            Collectors.summingInt(Data::getProp2),\r\n            (optionalMax, sum) -&gt; new Data(optionalMax.get().getProp1(), sum)\r\n    ));\r\n\r\nOr something else, for example a `Map&lt;String,Integer&gt;`\r\n\r\n    Map&lt;String,Integer&gt; myMap = \r\n    data.stream().collect(Collectors.teeing(\r\n            Collectors.reducing(BinaryOperator.maxBy(Comparator.comparing(Data::getProp1))),\r\n            Collectors.summingInt(Data::getProp2),\r\n            (optionalMax, sum) -&gt; {\r\n                HashMap&lt;String, Integer&gt; map = new HashMap();\r\n                map.put(&quot;max_prop1&quot;, optionalMax.get().getProp1());\r\n                map.put(&quot;sum_prop2&quot;, sum);\r\n                return map;\r\n            }\r\n    ));\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/util/stream/Collectors.html#teeing(java.util.stream.Collector,java.util.stream.Collector,java.util.function.BiFunction)","title":"stream of objects containing multiple properties question","body":"<blockquote>\n<p>I am trying, in a 'one shot' like operation</p>\n</blockquote>\n<p>You are looking for the <a href=\"https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/util/stream/Collectors.html#teeing(java.util.stream.Collector,java.util.stream.Collector,java.util.function.BiFunction)\" rel=\"nofollow noreferrer\">Teeing Collector</a> introduced in Java 12. Given a list of Data, where a Data class is something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@AllArgsConstructor\n@Getter\n@ToString\npublic class Data {\n    int prop1;\n    int prop2;\n}\n</code></pre>\n<p>and a list:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Data&gt; data = List.of(\n    new Data(1,10),\n    new Data(2,20),\n    new Data(3,30),\n    new Data(4,40)\n);\n</code></pre>\n<blockquote>\n<p>the end result will be an generic object or a data object</p>\n<p>if I apply max to the first prop and sum to the second</p>\n</blockquote>\n<p>You can use <code>Collectors.teeing</code> to get a new Data object with the result of your operations</p>\n<pre><code>Data result =\ndata.stream().collect(Collectors.teeing(\n        Collectors.reducing(BinaryOperator.maxBy(Comparator.comparing(Data::getProp1))),\n        Collectors.summingInt(Data::getProp2),\n        (optionalMax, sum) -&gt; new Data(optionalMax.get().getProp1(), sum)\n));\n</code></pre>\n<p>Or something else, for example a <code>Map&lt;String,Integer&gt;</code></p>\n<pre><code>Map&lt;String,Integer&gt; myMap = \ndata.stream().collect(Collectors.teeing(\n        Collectors.reducing(BinaryOperator.maxBy(Comparator.comparing(Data::getProp1))),\n        Collectors.summingInt(Data::getProp2),\n        (optionalMax, sum) -&gt; {\n            HashMap&lt;String, Integer&gt; map = new HashMap();\n            map.put(&quot;max_prop1&quot;, optionalMax.get().getProp1());\n            map.put(&quot;sum_prop2&quot;, sum);\n            return map;\n        }\n));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1655060810,"creation_date":1655060810,"answer_id":72595114,"question_id":72574993,"body_markdown":"Well, if they&#39;re only *reducing* functions, then you could utilize `reduce` as well:\r\n\r\n```java\r\nData someNewData = someData.stream()\r\n    .reduce((Data l, Data r) -&gt; {\r\n        int a = l.prop1() + r.prop1();          // Find sum of prop1\r\n        int b = Math.max(l.prop2(), r.prop2()); // Find max value of prop2\r\n        int c = Math.min(l.prop3(), r.prop3()); // Find min value of prop3\r\n        return new Data(a, b, c);\r\n    })\r\n    .orElseThrow();\r\n```","title":"stream of objects containing multiple properties question","body":"<p>Well, if they're only <em>reducing</em> functions, then you could utilize <code>reduce</code> as well:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Data someNewData = someData.stream()\n    .reduce((Data l, Data r) -&gt; {\n        int a = l.prop1() + r.prop1();          // Find sum of prop1\n        int b = Math.max(l.prop2(), r.prop2()); // Find max value of prop2\n        int c = Math.min(l.prop3(), r.prop3()); // Find min value of prop3\n        return new Data(a, b, c);\n    })\n    .orElseThrow();\n</code></pre>\n"}],"owner":{"account_id":1060002,"reputation":89,"user_id":1061835,"display_name":"gkatz"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":664,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":72575602,"answer_count":3,"score":1,"last_activity_date":1655060810,"creation_date":1654867120,"question_id":72574993,"body_markdown":"I am trying to solve the following:  \r\nGiven a list of Data objects try, in a &#39;one shot&#39; like operation, stream the list, such that the end result will be a generic object or a data object where each prop get its own sum/max/min:\r\n\r\n```java\r\nclass Data {\r\n    int prop1;\r\n\tint prop2;\r\n    ...\r\n\r\n    // constructor\r\n    // getters and setters\r\n}\r\n```\r\n\r\nFor example, given a list of 2 Data objects as follows:\r\n```java\r\nList&lt;Data&gt; list = Arrays.asList(new Data(1,2), new Data(3,4));\r\n```\r\nIf I apply max to the first property and sum to the second one the result is an object with prop1=3 and prop2=6 or `Data(3,6)`\r\n\r\nThanks for helping!","title":"stream of objects containing multiple properties question","body":"<p>I am trying to solve the following:<br />\nGiven a list of Data objects try, in a 'one shot' like operation, stream the list, such that the end result will be a generic object or a data object where each prop get its own sum/max/min:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Data {\n    int prop1;\n    int prop2;\n    ...\n\n    // constructor\n    // getters and setters\n}\n</code></pre>\n<p>For example, given a list of 2 Data objects as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Data&gt; list = Arrays.asList(new Data(1,2), new Data(3,4));\n</code></pre>\n<p>If I apply max to the first property and sum to the second one the result is an object with prop1=3 and prop2=6 or <code>Data(3,6)</code></p>\n<p>Thanks for helping!</p>\n"},{"tags":["java","android-studio","bluetooth-lowenergy","arduino-uno","bluetooth-gatt"],"comments":[{"owner":{"account_id":10114718,"reputation":2216,"user_id":7473793,"display_name":"Michael Kotzjan"},"score":0,"creation_date":1653283270,"post_id":72341258,"comment_id":127804174,"body_markdown":"I would assume that you sent the second message before the first send operation was finished. BLE is synchronous, so you can only send one message at a time.","body":"I would assume that you sent the second message before the first send operation was finished. BLE is synchronous, so you can only send one message at a time."},{"owner":{"account_id":17575058,"reputation":2200,"user_id":12749998,"display_name":"Kozmotronik"},"score":0,"creation_date":1653285398,"post_id":72341258,"comment_id":127804578,"body_markdown":"Android detects various gestures. I mean motion events. Sometimes when a finger moved away from the pressed view, a **CANCEL** action is sent to `onTouch`. You should check what actions your `onTouch` implementation receives more.","body":"Android detects various gestures. I mean motion events. Sometimes when a finger moved away from the pressed view, a <b>CANCEL</b> action is sent to <code>onTouch</code>. You should check what actions your <code>onTouch</code> implementation receives more."},{"owner":{"account_id":17512816,"reputation":11,"user_id":12700458,"display_name":"fireguy187"},"score":0,"creation_date":1653288486,"post_id":72341258,"comment_id":127805377,"body_markdown":"@MichaelKotzjan is there a way I can detect easily if the initial &quot;go&quot; signal was received or would I have to make the Arduino send a signal back saying it was received?","body":"@MichaelKotzjan is there a way I can detect easily if the initial &quot;go&quot; signal was received or would I have to make the Arduino send a signal back saying it was received?"},{"owner":{"account_id":10114718,"reputation":2216,"user_id":7473793,"display_name":"Michael Kotzjan"},"score":0,"creation_date":1653288746,"post_id":72341258,"comment_id":127805435,"body_markdown":"@fireguy187 Try implementing the [onCharacteristicWrite](https://developer.android.com/reference/android/bluetooth/BluetoothGattCallback#onCharacteristicWrite(android.bluetooth.BluetoothGatt,%20android.bluetooth.BluetoothGattCharacteristic,%20int)) callback","body":"@fireguy187 Try implementing the <a href=\"https://developer.android.com/reference/android/bluetooth/BluetoothGattCallback#onCharacteristicWrite(android.bluetooth.BluetoothGatt,%20android.bluetooth.BluetoothGattCharacteristic,%20int)\" rel=\"nofollow noreferrer\">onCharacteristicWrite</a> callback"}],"owner":{"account_id":17512816,"reputation":11,"user_id":12700458,"display_name":"fireguy187"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1655060582,"creation_date":1653253066,"question_id":72341258,"body_markdown":"On my android studio app, I have a button that when pressed, sends a &quot;go&quot; signal and on release sends a &quot;stop&quot; signal. \r\n\r\nWhen you hold the button down and then release it works fine with the Arduino receiving both signals. However, when it is a quick tap, the Arduino does not receive the stop signal.\r\n\r\nI have checked that the signal is in fact being sent as I put a log message whenever this happens so it must be a problem with the Arduino not the app not detecting button presses.\r\n\r\nHere is the code:\r\n```\r\nImageButton fwdBtn = (ImageButton) findViewById(R.id.fwd);\r\nfwdBtn.setOnTouchListener(new View.OnTouchListener() {\r\n    @Override\r\n    public boolean onTouch(View view, MotionEvent event) {\r\n        switch(event.getAction()) {\r\n            case MotionEvent.ACTION_DOWN:\r\n                view.performClick();\r\n                sendSignal(&quot;fwd&quot;);\r\n                return true;\r\n            case MotionEvent.ACTION_UP:\r\n                sendSignal(&quot;stop&quot;);\r\n                return true;\r\n        }\r\n        return false;\r\n    }\r\n});\r\n\r\nprivate void sendSignal(String signal) {\r\n    if (checkPermission(Manifest.permission.BLUETOOTH, 101)) {\r\n        // Commands is a dictionary for converting string commands to integers \r\n        msg.setValue(commands.get(signal));\r\n        gatt.beginReliableWrite();\r\n        gatt.writeCharacteristic(msg);\r\n    }\r\n}\r\n```\r\n\r\n**EDIT:**\r\n\r\nI have since realised that the gatt.writeCharacteristic(msg) is returning false. I tried to fix it by doing a while loop constantly running writeCharacteristic  until it returned true and it only partially fixed it. Tapping it quickly once is no longer problematic. However when you spam it 5 or 6 times the problem comes back. Any help would be greatly appreciated!","title":"Arduino not receiving Bluetooth GATT signal","body":"<p>On my android studio app, I have a button that when pressed, sends a &quot;go&quot; signal and on release sends a &quot;stop&quot; signal.</p>\n<p>When you hold the button down and then release it works fine with the Arduino receiving both signals. However, when it is a quick tap, the Arduino does not receive the stop signal.</p>\n<p>I have checked that the signal is in fact being sent as I put a log message whenever this happens so it must be a problem with the Arduino not the app not detecting button presses.</p>\n<p>Here is the code:</p>\n<pre><code>ImageButton fwdBtn = (ImageButton) findViewById(R.id.fwd);\nfwdBtn.setOnTouchListener(new View.OnTouchListener() {\n    @Override\n    public boolean onTouch(View view, MotionEvent event) {\n        switch(event.getAction()) {\n            case MotionEvent.ACTION_DOWN:\n                view.performClick();\n                sendSignal(&quot;fwd&quot;);\n                return true;\n            case MotionEvent.ACTION_UP:\n                sendSignal(&quot;stop&quot;);\n                return true;\n        }\n        return false;\n    }\n});\n\nprivate void sendSignal(String signal) {\n    if (checkPermission(Manifest.permission.BLUETOOTH, 101)) {\n        // Commands is a dictionary for converting string commands to integers \n        msg.setValue(commands.get(signal));\n        gatt.beginReliableWrite();\n        gatt.writeCharacteristic(msg);\n    }\n}\n</code></pre>\n<p><strong>EDIT:</strong></p>\n<p>I have since realised that the gatt.writeCharacteristic(msg) is returning false. I tried to fix it by doing a while loop constantly running writeCharacteristic  until it returned true and it only partially fixed it. Tapping it quickly once is no longer problematic. However when you spam it 5 or 6 times the problem comes back. Any help would be greatly appreciated!</p>\n"},{"tags":["java","json","recursion","logic"],"answers":[{"tags":[],"owner":{"account_id":25534785,"reputation":532,"user_id":19322069,"display_name":"access violation"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1655060533,"creation_date":1655060241,"answer_id":72595049,"question_id":72594994,"body_markdown":"With respect to iterating in &#39;the given order&#39;:\r\n\r\nJSON objects are inherently unordered, so you&#39;re attempting something that cannot be done.  Only JSON arrays are ordered.\r\n\r\nAn object in &quot;{ ... }&quot; is represented in Java as a map from keys to values, with no relationship between the original order, and iterating map keys.\r\n\r\nThe upshot is that a program that expects to maintain key-order across a round-trip through JSON is ill-founded.\r\n\r\nWith respect to recursion:\r\n\r\nSince an object can contain arrays, and an array can contain objects, a recursive approach is the easiest and clearest way to write this.\r\n","title":"How to read the JSON object in the given order in JAVA?","body":"<p>With respect to iterating in 'the given order':</p>\n<p>JSON objects are inherently unordered, so you're attempting something that cannot be done.  Only JSON arrays are ordered.</p>\n<p>An object in &quot;{ ... }&quot; is represented in Java as a map from keys to values, with no relationship between the original order, and iterating map keys.</p>\n<p>The upshot is that a program that expects to maintain key-order across a round-trip through JSON is ill-founded.</p>\n<p>With respect to recursion:</p>\n<p>Since an object can contain arrays, and an array can contain objects, a recursive approach is the easiest and clearest way to write this.</p>\n"}],"owner":{"account_id":23925143,"reputation":13,"user_id":17920335,"display_name":"Praveen Samuel J"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":72595049,"answer_count":1,"score":0,"last_activity_date":1655060533,"creation_date":1655059756,"question_id":72594994,"body_markdown":"\r\n```\r\n\r\nstatic String a = &quot;{\\n&quot; + \r\n\t \t\t&quot;    \\&quot;name\\&quot;: \\&quot;Praveen\\&quot;,\\n&quot; + \r\n\t \t\t&quot;    \\&quot;address\\&quot;: \\&quot;Avadi\\&quot;,\\n&quot; + \r\n\t \t\t&quot;    \\&quot;Place\\&quot;: \\&quot;Chennai\\&quot;,\\n&quot; + \r\n\t \t\t&quot;    \\&quot;Friends\\&quot;: [{\\n&quot; + \r\n\t \t\t&quot;        \\&quot;name\\&quot;: \\&quot;kumaresh\\&quot;,\\n&quot; + \r\n\t \t\t&quot;        \\&quot;address\\&quot;: \\&quot;paruthipetu\\&quot;,\\n&quot; + \r\n\t \t\t&quot;        \\&quot;Place\\&quot;: [\\&quot;Chennai\\&quot;, \\&quot;Mumbai\\&quot;],\\n&quot; + \r\n\t \t\t&quot;        \\&quot;Friends\\&quot;: {\\n&quot; + \r\n\t \t\t&quot;            \\&quot;name1\\&quot;: \\&quot;Midhun\\&quot;,\\n&quot; + \r\n\t \t\t&quot;            \\&quot;name2\\&quot;: \\&quot;vicky\\&quot;\\n&quot; + \r\n\t \t\t&quot;        }\\n&quot; + \r\n\t \t\t&quot;    },{\\n&quot; + \r\n\t \t\t&quot;        \\&quot;hair\\&quot;: \\&quot;black\\&quot;\\n&quot; + \r\n\t \t\t&quot;    }],\\n&quot; + \r\n\t \t\t&quot;    \\&quot;number\\&quot;: {\\n&quot; + \r\n\t \t\t&quot;        \\&quot;homeNo\\&quot;: false,\\n&quot; + \r\n\t \t\t&quot;        \\&quot;phoneNo\\&quot;: 8926363636\\n&quot; + \r\n\t \t\t&quot;    },\\n&quot; + \r\n\t \t\t&quot;    \\&quot;age\\&quot;: 24,\\n&quot; + \r\n\t \t\t&quot;    \\&quot;age1\\&quot;: 26\\n&quot; + \r\n\t \t\t&quot;}&quot;;\r\n\r\npublic static ArrayList&lt;Object&gt; extractKeysValues(String test, String parentKey) throws Exception {\r\n\t\t ArrayList&lt;Object&gt; arraylist = new ArrayList&lt;Object&gt;();\r\n\t\t if(test.charAt(0)==&#39;{&#39;) {\r\n\t\t\t //object\r\n\t\t\t JSONObject json_object = new JSONObject(test);\r\n\t\t\t Iterator&lt;String&gt; keys = json_object.keys();\r\n\t\t\t while(keys.hasNext()) {\r\n\t\t\t\tString key = keys.next();\r\n\t\t\t\tarraylist.add(key);\r\n\t\t\t\tarraylist.add(json_object.get(key));\r\n\t\t\t\tarraylist.add(parentKey);\r\n\t\t\t\tif(json_object.get(key) instanceof JSONObject || json_object.get(key) instanceof JSONArray) {\r\n\t\t\t\t\tarraylist.addAll(extractKeysValues(json_object.get(key).toString(),key));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t } else if(test.charAt(0)==&#39;[&#39;) {\r\n\t\t\t //array\r\n\t\t\t JSONArray json_array = new JSONArray(test);\r\n\t\t\t\tint json_array_length = json_array.length();\r\n\t\t\t\tfor(int i=0;i&lt;json_array_length;i++) {\r\n\t\t\t\t\tString key = json_array.get(i).toString();\r\n\t\t\t\t\tarraylist.add(String.valueOf(i));\r\n\t\t\t\t\tarraylist.add(key);\r\n\t\t\t\t\tarraylist.add(parentKey);\r\n\t\t\t\t\tif(json_array.get(i) instanceof JSONObject || json_array.get(i) instanceof JSONArray) {\r\n\t\t\t\t\t\tarraylist.addAll(extractKeysValues(json_array.get(i).toString(),String.valueOf(i)));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t }\r\n\t\t return arraylist;\r\n\t }\r\n\r\nSystem.out.println(extractKeysValues(a,&quot;root&quot;));\r\n\r\n```\r\n    \r\n    OUTPUT:\r\n    \r\n    [number, {&quot;homeNo&quot;:false,&quot;phoneNo&quot;:8926363636}, root, homeNo, false, number, phoneNo, 8926363636, number, address, Avadi, root, Friends, [{&quot;address&quot;:&quot;paruthipetu&quot;,&quot;Friends&quot;:{&quot;name2&quot;:&quot;vicky&quot;,&quot;name1&quot;:&quot;Midhun&quot;},&quot;name&quot;:&quot;kumaresh&quot;,&quot;Place&quot;:[&quot;Chennai&quot;,&quot;Mumbai&quot;]},{&quot;hair&quot;:&quot;black&quot;}], root, 0, {&quot;address&quot;:&quot;paruthipetu&quot;,&quot;Friends&quot;:{&quot;name2&quot;:&quot;vicky&quot;,&quot;name1&quot;:&quot;Midhun&quot;},&quot;name&quot;:&quot;kumaresh&quot;,&quot;Place&quot;:[&quot;Chennai&quot;,&quot;Mumbai&quot;]}, Friends, address, paruthipetu, 0, Friends, {&quot;name2&quot;:&quot;vicky&quot;,&quot;name1&quot;:&quot;Midhun&quot;}, 0, name2, vicky, Friends, name1, Midhun, Friends, name, kumaresh, 0, Place, [&quot;Chennai&quot;,&quot;Mumbai&quot;], 0, 0, Chennai, Place, 1, Mumbai, Place, 1, {&quot;hair&quot;:&quot;black&quot;}, Friends, hair, black, 1, name, Praveen, root, Place, Chennai, root, age, 24, root, age1, 26, root]\r\n    \r\n    EXPECTED OUTPUT:\r\n    \r\n    [name, Praveen, root, address, Avadi, root, Place, Chennai, root, Friends,[{name:&#39;kumaresh&#39;,address: &#39;paruthipetu&#39;,Place: [&quot;Chennai&quot;,&quot;Mumbai&quot;], Friends: {&quot;name1&quot;:&quot;Midhun&quot;,&quot;name2&quot;:&quot;vicky&quot;}},{ hair: &#39;black&#39; }], root, 0,{name: &#39;kumaresh&#39;, address: &#39;paruthipetu&#39;, Place: [ &#39;Chennai&#39;, &#39;Mumbai&#39; ], Friends: { name1: &#39;Midhun&#39;, name2: &#39;vicky&#39; }}, Friends, name, kumaresh, 0, address, paruthipetu, 0, Place,[ &#39;Chennai&#39;, &#39;Mumbai&#39; ], 0, 0, Chennai, Place, 1, Mumbai, Place, Friends, { name1: &#39;Midhun&#39;, name2: &#39;vicky&#39; }, 0, name1, Midhun, Friends, name2, vicky, Friends, 1, { hair: &#39;black&#39; }, Friends, hair, black, 1, number, { homeNo: false, phoneNo: 8926363636 }, root, homeNo, false, number, phoneNo, 8926363636, number, age, 24, root, age1, 26, root]\r\n\r\n**Can someone help me to achieve the expected output?**\r\n\r\nWhat I am trying to achieve in this code is, need to iterate over any array or object in order using java. The values stored in format key, value, parent key.\r\n\r\nI have used recursion to solve this problem. Solution without recursion is also highly welcomed.","title":"How to read the JSON object in the given order in JAVA?","body":"<pre><code>\nstatic String a = &quot;{\\n&quot; + \n            &quot;    \\&quot;name\\&quot;: \\&quot;Praveen\\&quot;,\\n&quot; + \n            &quot;    \\&quot;address\\&quot;: \\&quot;Avadi\\&quot;,\\n&quot; + \n            &quot;    \\&quot;Place\\&quot;: \\&quot;Chennai\\&quot;,\\n&quot; + \n            &quot;    \\&quot;Friends\\&quot;: [{\\n&quot; + \n            &quot;        \\&quot;name\\&quot;: \\&quot;kumaresh\\&quot;,\\n&quot; + \n            &quot;        \\&quot;address\\&quot;: \\&quot;paruthipetu\\&quot;,\\n&quot; + \n            &quot;        \\&quot;Place\\&quot;: [\\&quot;Chennai\\&quot;, \\&quot;Mumbai\\&quot;],\\n&quot; + \n            &quot;        \\&quot;Friends\\&quot;: {\\n&quot; + \n            &quot;            \\&quot;name1\\&quot;: \\&quot;Midhun\\&quot;,\\n&quot; + \n            &quot;            \\&quot;name2\\&quot;: \\&quot;vicky\\&quot;\\n&quot; + \n            &quot;        }\\n&quot; + \n            &quot;    },{\\n&quot; + \n            &quot;        \\&quot;hair\\&quot;: \\&quot;black\\&quot;\\n&quot; + \n            &quot;    }],\\n&quot; + \n            &quot;    \\&quot;number\\&quot;: {\\n&quot; + \n            &quot;        \\&quot;homeNo\\&quot;: false,\\n&quot; + \n            &quot;        \\&quot;phoneNo\\&quot;: 8926363636\\n&quot; + \n            &quot;    },\\n&quot; + \n            &quot;    \\&quot;age\\&quot;: 24,\\n&quot; + \n            &quot;    \\&quot;age1\\&quot;: 26\\n&quot; + \n            &quot;}&quot;;\n\npublic static ArrayList&lt;Object&gt; extractKeysValues(String test, String parentKey) throws Exception {\n         ArrayList&lt;Object&gt; arraylist = new ArrayList&lt;Object&gt;();\n         if(test.charAt(0)=='{') {\n             //object\n             JSONObject json_object = new JSONObject(test);\n             Iterator&lt;String&gt; keys = json_object.keys();\n             while(keys.hasNext()) {\n                String key = keys.next();\n                arraylist.add(key);\n                arraylist.add(json_object.get(key));\n                arraylist.add(parentKey);\n                if(json_object.get(key) instanceof JSONObject || json_object.get(key) instanceof JSONArray) {\n                    arraylist.addAll(extractKeysValues(json_object.get(key).toString(),key));\n                }\n            }\n         } else if(test.charAt(0)=='[') {\n             //array\n             JSONArray json_array = new JSONArray(test);\n                int json_array_length = json_array.length();\n                for(int i=0;i&lt;json_array_length;i++) {\n                    String key = json_array.get(i).toString();\n                    arraylist.add(String.valueOf(i));\n                    arraylist.add(key);\n                    arraylist.add(parentKey);\n                    if(json_array.get(i) instanceof JSONObject || json_array.get(i) instanceof JSONArray) {\n                        arraylist.addAll(extractKeysValues(json_array.get(i).toString(),String.valueOf(i)));\n                    }\n                }\n         }\n         return arraylist;\n     }\n\nSystem.out.println(extractKeysValues(a,&quot;root&quot;));\n\n</code></pre>\n<pre><code>OUTPUT:\n\n[number, {&quot;homeNo&quot;:false,&quot;phoneNo&quot;:8926363636}, root, homeNo, false, number, phoneNo, 8926363636, number, address, Avadi, root, Friends, [{&quot;address&quot;:&quot;paruthipetu&quot;,&quot;Friends&quot;:{&quot;name2&quot;:&quot;vicky&quot;,&quot;name1&quot;:&quot;Midhun&quot;},&quot;name&quot;:&quot;kumaresh&quot;,&quot;Place&quot;:[&quot;Chennai&quot;,&quot;Mumbai&quot;]},{&quot;hair&quot;:&quot;black&quot;}], root, 0, {&quot;address&quot;:&quot;paruthipetu&quot;,&quot;Friends&quot;:{&quot;name2&quot;:&quot;vicky&quot;,&quot;name1&quot;:&quot;Midhun&quot;},&quot;name&quot;:&quot;kumaresh&quot;,&quot;Place&quot;:[&quot;Chennai&quot;,&quot;Mumbai&quot;]}, Friends, address, paruthipetu, 0, Friends, {&quot;name2&quot;:&quot;vicky&quot;,&quot;name1&quot;:&quot;Midhun&quot;}, 0, name2, vicky, Friends, name1, Midhun, Friends, name, kumaresh, 0, Place, [&quot;Chennai&quot;,&quot;Mumbai&quot;], 0, 0, Chennai, Place, 1, Mumbai, Place, 1, {&quot;hair&quot;:&quot;black&quot;}, Friends, hair, black, 1, name, Praveen, root, Place, Chennai, root, age, 24, root, age1, 26, root]\n\nEXPECTED OUTPUT:\n\n[name, Praveen, root, address, Avadi, root, Place, Chennai, root, Friends,[{name:'kumaresh',address: 'paruthipetu',Place: [&quot;Chennai&quot;,&quot;Mumbai&quot;], Friends: {&quot;name1&quot;:&quot;Midhun&quot;,&quot;name2&quot;:&quot;vicky&quot;}},{ hair: 'black' }], root, 0,{name: 'kumaresh', address: 'paruthipetu', Place: [ 'Chennai', 'Mumbai' ], Friends: { name1: 'Midhun', name2: 'vicky' }}, Friends, name, kumaresh, 0, address, paruthipetu, 0, Place,[ 'Chennai', 'Mumbai' ], 0, 0, Chennai, Place, 1, Mumbai, Place, Friends, { name1: 'Midhun', name2: 'vicky' }, 0, name1, Midhun, Friends, name2, vicky, Friends, 1, { hair: 'black' }, Friends, hair, black, 1, number, { homeNo: false, phoneNo: 8926363636 }, root, homeNo, false, number, phoneNo, 8926363636, number, age, 24, root, age1, 26, root]\n</code></pre>\n<p><strong>Can someone help me to achieve the expected output?</strong></p>\n<p>What I am trying to achieve in this code is, need to iterate over any array or object in order using java. The values stored in format key, value, parent key.</p>\n<p>I have used recursion to solve this problem. Solution without recursion is also highly welcomed.</p>\n"},{"tags":["java","syntax-error","static-variables"],"comments":[{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1655060305,"post_id":72594952,"comment_id":128235445,"body_markdown":"You really should put the text of your error messages in your question, instead of just an image.","body":"You really should put the text of your error messages in your question, instead of just an image."}],"answers":[{"tags":[],"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655060251,"creation_date":1655059930,"answer_id":72595013,"question_id":72594952,"body_markdown":"When you compile your code javac needs to know where to look for all of your source/class files. You could go to &quot;java_tutorial&quot; folder and run.\r\n\r\n    javac com/shubham/packages/a/Greeting.java com/shubham/packages/b/Message.java\r\n\r\nThat should compile both of your java files into class files at the same location. Then you should be able to run.\r\n\r\n    java com.shubham.packages.a.Greeting\r\n\r\n**I might be using the wrong slashes for windows**\r\n\r\nYou can explicitly name all of the necessary java files, so this should cause both Greeting.java and Message.java to be compiled in place.\r\n\r\nWhen you run java, the CWD is on the classpath by default so that means the package com.shubham.packages.a and ...b should be on the classpath in their correct location.\r\n\r\nA slightly better way to do this is to create a folder called &quot;build&quot; or whatever you like.\r\n\r\n    javac -d build com/shubham/packages/a/Greeting.java com/shubham/packages/b/Message.java\r\n\r\nThat will output the class files to the build folder. Then when you run it.\r\n\r\n    java -cp build com.shubham.packages.a.Greeting\r\n\r\n","title":"Error: Package doesn&#39;t exists when importing a user defined package from a class","body":"<p>When you compile your code javac needs to know where to look for all of your source/class files. You could go to &quot;java_tutorial&quot; folder and run.</p>\n<pre><code>javac com/shubham/packages/a/Greeting.java com/shubham/packages/b/Message.java\n</code></pre>\n<p>That should compile both of your java files into class files at the same location. Then you should be able to run.</p>\n<pre><code>java com.shubham.packages.a.Greeting\n</code></pre>\n<p><strong>I might be using the wrong slashes for windows</strong></p>\n<p>You can explicitly name all of the necessary java files, so this should cause both Greeting.java and Message.java to be compiled in place.</p>\n<p>When you run java, the CWD is on the classpath by default so that means the package com.shubham.packages.a and ...b should be on the classpath in their correct location.</p>\n<p>A slightly better way to do this is to create a folder called &quot;build&quot; or whatever you like.</p>\n<pre><code>javac -d build com/shubham/packages/a/Greeting.java com/shubham/packages/b/Message.java\n</code></pre>\n<p>That will output the class files to the build folder. Then when you run it.</p>\n<pre><code>java -cp build com.shubham.packages.a.Greeting\n</code></pre>\n"}],"owner":{"account_id":25538903,"reputation":1,"user_id":19325406,"display_name":"shubham verma"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":467,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1655060276,"creation_date":1655059285,"question_id":72594952,"body_markdown":"Here My first file code\r\n\r\n    package com.shubham.packages.a;\r\n\r\n    import static com.shubham.packages.b.Message.Hello;\r\n\r\n    public class Greeting {\r\n       public static void main(String[] args) {\r\n         System.out.println(&quot;Hello World&quot;);\r\n         Hello();\r\n       }\r\n    }\r\n\r\nHere my second file code\r\n\r\n    package com.shubham.packages.b;\r\n\r\n    public class Message {\r\n        public static void main(String[] args) {\r\n          \r\n        }\r\n        public static void Hello() {\r\n            System.out.println(&quot;This is Awesome.&quot;);\r\n        }\r\n    }\r\n\r\nHere the error I got when I run the program.\r\n![Terminal Image][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/eGNNd.png","title":"Error: Package doesn&#39;t exists when importing a user defined package from a class","body":"<p>Here My first file code</p>\n<pre><code>package com.shubham.packages.a;\n\nimport static com.shubham.packages.b.Message.Hello;\n\npublic class Greeting {\n   public static void main(String[] args) {\n     System.out.println(&quot;Hello World&quot;);\n     Hello();\n   }\n}\n</code></pre>\n<p>Here my second file code</p>\n<pre><code>package com.shubham.packages.b;\n\npublic class Message {\n    public static void main(String[] args) {\n      \n    }\n    public static void Hello() {\n        System.out.println(&quot;This is Awesome.&quot;);\n    }\n}\n</code></pre>\n<p>Here the error I got when I run the program.\n<img src=\"https://i.stack.imgur.com/eGNNd.png\" alt=\"Terminal Image\" /></p>\n"},{"tags":["java","swing","intellij-idea","jar","spire.doc"],"comments":[{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1644839075,"post_id":71111170,"comment_id":125703692,"body_markdown":"*&quot;same folder that my jar file is at&quot;* To clarify: 1) a folder is a windowed OS form of a directory. 2) The best way to get a documentation file (MS Word or otherwise) to the user is to include it **in** the Jar. 3) A resource in a Jar is accessible via `URL` but not `File`. 4) If it is necessary for the document to be updated, it needs to be copied from the Jar (where it is read-only) to the local file system (as a `File`). 5) A better location than *&quot;same folder&quot;* is a (sub) directory of `user.home`. - So with those points in mind, could you clarify the question above? As-is, very confusing.","body":"<i>&quot;same folder that my jar file is at&quot;</i> To clarify: 1) a folder is a windowed OS form of a directory. 2) The best way to get a documentation file (MS Word or otherwise) to the user is to include it <b>in</b> the Jar. 3) A resource in a Jar is accessible via <code>URL</code> but not <code>File</code>. 4) If it is necessary for the document to be updated, it needs to be copied from the Jar (where it is read-only) to the local file system (as a <code>File</code>). 5) A better location than <i>&quot;same folder&quot;</i> is a (sub) directory of <code>user.home</code>. - So with those points in mind, could you clarify the question above? As-is, very confusing."}],"answers":[{"tags":[],"owner":{"account_id":25051229,"reputation":1,"user_id":18907116,"display_name":"Atomos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655059177,"creation_date":1655059177,"answer_id":72594933,"question_id":71111170,"body_markdown":"I think it would be better to add it in a package and access it as a stream.\r\n\r\nSuppose this organization\r\n MyApp- (package)\r\n    -MainClass\r\n MyApp.Sources \r\n    -Source.docx\r\n\r\nThen in your code \r\n\r\n   \r\n    Document doc = new Document();\r\n    InputStream str=MainClass.class.getRessourceAsStream(&quot;Sources/Source.docx&quot;);\r\n    doc.loadFromStream(str, FileFormat.Docx_2013);\r\n    doc.saveToFile(&quot;name.docx&quot;);`","title":"Include doc (word) file that my program uses","body":"<p>I think it would be better to add it in a package and access it as a stream.</p>\n<p>Suppose this organization\nMyApp- (package)\n-MainClass\nMyApp.Sources\n-Source.docx</p>\n<p>Then in your code</p>\n<pre><code>Document doc = new Document();\nInputStream str=MainClass.class.getRessourceAsStream(&quot;Sources/Source.docx&quot;);\ndoc.loadFromStream(str, FileFormat.Docx_2013);\ndoc.saveToFile(&quot;name.docx&quot;);`\n</code></pre>\n"}],"owner":{"account_id":18628043,"reputation":1,"user_id":13576692,"display_name":"michael Diaz"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":245,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1655059177,"creation_date":1644838374,"question_id":71111170,"body_markdown":"I wrote a program with Java and `doc.spire.jar` that uses a doc file and then generate a new one, after compiling it into the jar file my program needs that doc file in the same directory where the jar file is located. \r\n\r\nHow do I insert that doc file so it will be inside the jar file created by IntelliJ?\r\n","title":"Include doc (word) file that my program uses","body":"<p>I wrote a program with Java and <code>doc.spire.jar</code> that uses a doc file and then generate a new one, after compiling it into the jar file my program needs that doc file in the same directory where the jar file is located.</p>\n<p>How do I insert that doc file so it will be inside the jar file created by IntelliJ?</p>\n"},{"tags":["java","android","oauth-2.0"],"answers":[{"tags":[],"owner":{"account_id":25408773,"reputation":11,"user_id":19217006,"display_name":"Ondřej Lenikus"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1655059016,"creation_date":1655059016,"answer_id":72594911,"question_id":72411038,"body_markdown":"Realized i was doing it completly wrong and i should have used a WebView","title":"Oauth2 doesnt open an browser and a token in an android app","body":"<p>Realized i was doing it completly wrong and i should have used a WebView</p>\n"}],"owner":{"account_id":25408773,"reputation":11,"user_id":19217006,"display_name":"Ondřej Lenikus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":107,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":72594911,"answer_count":1,"score":1,"last_activity_date":1655059016,"creation_date":1653685306,"question_id":72411038,"body_markdown":"Trying to use the Oauth authorization flow in an andoid app using java. No browser opened needed for authorizing. I don&#39;t know if i should ask here or on the api&#39;s website \r\n\r\npermission for internet is granted in manifest.xml\r\n\r\nMainActivity.java:\r\n```package com.example.osurankcounter;\r\n\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        Button RankConfirm = findViewById(R.id.UsernameConfirm);\r\n        RankConfirm.setOnClickListener(v -&gt; {\r\n               final EditText username_box = findViewById(R.id.OsuUsername);\r\n               final  String Username = username_box.getText().toString();\r\n               final TextView RankView = findViewById(R.id.RankView);\r\n               API_Response.UpdateRank(Username,RankView);\r\n        });}\r\n\r\n    }\r\n```\r\n\r\nAPI.java\r\n```package com.example.osurankcounter;\r\n\r\nimport android.util.Log;\r\nimport android.widget.TextView;\r\n\r\nimport java.io.IOException;\r\n\r\nimport okhttp3.OkHttpClient;\r\nimport okhttp3.Request;\r\nimport okhttp3.Response;\r\n\r\npublic class API {\r\n    public static void UpdateRank(String Username, TextView RankView) {\r\n        Thread NetworkThread = new Thread (&quot;NetworkThread&quot;){\r\n            private volatile String Rank = &quot;nic&quot;;\r\n            public void run() {\r\n                OkHttpClient client1 = new OkHttpClient();\r\n                Request request1 = new Request.Builder()\r\n                        .url(&quot;https://osu.ppy.sh/oauth/authorize/?client_id=14403&amp;redirect_uri=https://google.com&amp;response_type=code&amp;scope=public&quot;)\r\n                        .build();\r\n                try {\r\n                    Response response1 = client1.newCall(request1).execute();\r\n                    String Code = response1.body().string();\r\n                    Log.e(&quot;Debug&quot;, Code);\r\n\r\n                } catch (IOException e) {\r\n                    Log.e(&quot;Debug&quot;, &quot;IO exception1&quot;);\r\n                }```\r\n\r\n","title":"Oauth2 doesnt open an browser and a token in an android app","body":"<p>Trying to use the Oauth authorization flow in an andoid app using java. No browser opened needed for authorizing. I don't know if i should ask here or on the api's website</p>\n<p>permission for internet is granted in manifest.xml</p>\n<p>MainActivity.java:</p>\n<pre><code>\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.widget.Button;\nimport android.widget.EditText;\nimport android.widget.TextView;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\npublic class MainActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        Button RankConfirm = findViewById(R.id.UsernameConfirm);\n        RankConfirm.setOnClickListener(v -&gt; {\n               final EditText username_box = findViewById(R.id.OsuUsername);\n               final  String Username = username_box.getText().toString();\n               final TextView RankView = findViewById(R.id.RankView);\n               API_Response.UpdateRank(Username,RankView);\n        });}\n\n    }\n</code></pre>\n<p>API.java</p>\n<pre><code>\nimport android.util.Log;\nimport android.widget.TextView;\n\nimport java.io.IOException;\n\nimport okhttp3.OkHttpClient;\nimport okhttp3.Request;\nimport okhttp3.Response;\n\npublic class API {\n    public static void UpdateRank(String Username, TextView RankView) {\n        Thread NetworkThread = new Thread (&quot;NetworkThread&quot;){\n            private volatile String Rank = &quot;nic&quot;;\n            public void run() {\n                OkHttpClient client1 = new OkHttpClient();\n                Request request1 = new Request.Builder()\n                        .url(&quot;https://osu.ppy.sh/oauth/authorize/?client_id=14403&amp;redirect_uri=https://google.com&amp;response_type=code&amp;scope=public&quot;)\n                        .build();\n                try {\n                    Response response1 = client1.newCall(request1).execute();\n                    String Code = response1.body().string();\n                    Log.e(&quot;Debug&quot;, Code);\n\n                } catch (IOException e) {\n                    Log.e(&quot;Debug&quot;, &quot;IO exception1&quot;);\n                }```\n\n</code></pre>\n"},{"tags":["java","c++","java-native-interface"],"comments":[{"owner":{"account_id":5809836,"reputation":33185,"user_id":4581301,"display_name":"user4581301"},"score":0,"creation_date":1654728600,"post_id":72552890,"comment_id":128164100,"body_markdown":"A jagged 3D array is the same as a jagged 2D array with an extra array of pointers stuffed in the middle. `float **localArray = new float **[sizex];`, then a loop that places `new float *[sizey];` into `localarray` and then another loop that places `new float[sizez]`s into each of the `float*` arrays. Ugly as &lt;expletive deleted&gt;, no? Instead consider one mammoth 1D array and use indexing math to pretend that it&#39;s 3D.","body":"A jagged 3D array is the same as a jagged 2D array with an extra array of pointers stuffed in the middle. <code>float **localArray = new float **[sizex];</code>, then a loop that places <code>new float *[sizey];</code> into <code>localarray</code> and then another loop that places <code>new float[sizez]</code>s into each of the <code>float*</code> arrays. Ugly as &lt;expletive deleted&gt;, no? Instead consider one mammoth 1D array and use indexing math to pretend that it&#39;s 3D."},{"owner":{"account_id":25510731,"reputation":3,"user_id":19302439,"display_name":"Nic Bolton"},"score":0,"creation_date":1654730709,"post_id":72552890,"comment_id":128164499,"body_markdown":"@user4581301 Wouldn&#39;t I intialize the array like `float ***localArray = new float**[sizex];`?","body":"@user4581301 Wouldn&#39;t I intialize the array like <code>float ***localArray = new float**[sizex];</code>?"},{"owner":{"account_id":5809836,"reputation":33185,"user_id":4581301,"display_name":"user4581301"},"score":0,"creation_date":1654733870,"post_id":72552890,"comment_id":128164981,"body_markdown":"Yes. Sorry about that. Missed a start when I cut and pasted and updated..","body":"Yes. Sorry about that. Missed a start when I cut and pasted and updated.."}],"answers":[{"tags":[],"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1654763982,"creation_date":1654763982,"answer_id":72557227,"question_id":72552890,"body_markdown":"Just structure your program like your data:\r\n```\r\nfloat* thirdLevel(JNIEnv *env, jfloatArray arr) {\r\n  jsize len = env-&gt;GetArrayLength(arr);\r\n  float* ret = new float[len];\r\n  env-&gt;GetFloatArrayRegion(arr, 0, len, ret);\r\n  return ret;\r\n}\r\n\r\nfloat** secondLevel(JNIEnv *env, jobjectArray arr) {\r\n  jsize len = env-&gt;GetArrayLength(arr);\r\n  float** ret = new float*[len];\r\n  for (int i = 0; i &lt; len; i++) {\r\n    jobject item = env-&gt;GetObjectArrayElement(arr, i);\r\n    ret[i] = thirdLevel(env, (jfloatArray)item);\r\n    env-&gt;DeleteLocalRef(item);\r\n  }\r\n  return ret;\r\n}\r\n\r\nfloat*** firstLevel(JNIEnv *env, jobjectArray arr) {\r\n  jsize len = env-&gt;GetArrayLength(arr);\r\n  float*** ret = new float**[len];\r\n  for (int i = 0; i &lt; len; i++) {\r\n    jobject item = env-&gt;GetObjectArrayElement(arr, i);\r\n    ret[i] = secondLevel(env, (jobjectArray)item);\r\n    env-&gt;DeleteLocalRef(item);\r\n  }\r\n  return ret;\r\n}\r\n```","title":"How to pass a 3D element into JNI?","body":"<p>Just structure your program like your data:</p>\n<pre><code>float* thirdLevel(JNIEnv *env, jfloatArray arr) {\n  jsize len = env-&gt;GetArrayLength(arr);\n  float* ret = new float[len];\n  env-&gt;GetFloatArrayRegion(arr, 0, len, ret);\n  return ret;\n}\n\nfloat** secondLevel(JNIEnv *env, jobjectArray arr) {\n  jsize len = env-&gt;GetArrayLength(arr);\n  float** ret = new float*[len];\n  for (int i = 0; i &lt; len; i++) {\n    jobject item = env-&gt;GetObjectArrayElement(arr, i);\n    ret[i] = thirdLevel(env, (jfloatArray)item);\n    env-&gt;DeleteLocalRef(item);\n  }\n  return ret;\n}\n\nfloat*** firstLevel(JNIEnv *env, jobjectArray arr) {\n  jsize len = env-&gt;GetArrayLength(arr);\n  float*** ret = new float**[len];\n  for (int i = 0; i &lt; len; i++) {\n    jobject item = env-&gt;GetObjectArrayElement(arr, i);\n    ret[i] = secondLevel(env, (jobjectArray)item);\n    env-&gt;DeleteLocalRef(item);\n  }\n  return ret;\n}\n</code></pre>\n"}],"owner":{"account_id":25510731,"reputation":3,"user_id":19302439,"display_name":"Nic Bolton"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":104,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72557227,"answer_count":1,"score":0,"last_activity_date":1655058709,"creation_date":1654727551,"question_id":72552890,"body_markdown":"I am working on a project and need to do some calculations with a 3D array in C++. I need to pass this 3D array from Java to C++, do some calculations, then return it. I am using JNI and am very new to it so I don&#39;t know very much. I am trying to make a sample program to test this and to use it as reference. I have gotten passing a 2D array to C++ but cannot figure out the 3D part. I built the 2D part using [this solution][1].\r\n\r\nThis is my C++ code right now (this works for 2D arrays):\r\n\r\n```\r\nfloat** testFunction(float **a)\r\n{\r\n\r\nprintf(&quot;Hello from JNI!\\n&quot;);\r\n    printf(&quot;Point at %d,%d is: %f\\n&quot;, 1, 2, a[1][2]);\r\n\r\n    return a[1][2];\r\n}\r\njfloat JNICALL Java_JNIArray_integrateWithTrapezoid(JNIEnv *env, jobject thisObj, jobjectArray jarr)\r\n{\r\n    int sizex = env-&gt;GetArrayLength(jarr);\r\n    jfloatArray dim = (jfloatArray)env-&gt;GetObjectArrayElement(jarr, 0);\r\n    int sizey = env-&gt;GetArrayLength(dim);\r\n    float **localArray;\r\n\r\n    localArray = new float *[sizex];\r\n\r\n    for (int i = 0; i &lt; sizex; i++)\r\n    {\r\n        jfloatArray oneDim = (jfloatArray)env-&gt;GetObjectArrayElement(jarr, i);\r\n        jfloat *element = env-&gt;GetFloatArrayElements(oneDim, 0);\r\n        localArray[i] = new float[sizey];\r\n\r\n        for (int j = 0; j &lt; sizey; j++)\r\n        {\r\n            localArray[i][j] = element[j];\r\n        }\r\n    }\r\n\r\n    return testFunction(localArray);\r\n}\r\n```\r\n\r\nAny help would be great. I am very in the dark on this. If I forgot to provide any needed information please let me know.\r\n\r\nThanks.\r\n\r\n**EDIT:**\r\n\r\nThanks to @Botje, this worked:\r\n\r\n```\r\nvoid trapezoidalintegral(float ***a)\r\n{\r\n\r\n    printf(&quot;Hello from JNI!\\n&quot;);\r\n    printf(&quot;Point at %d, %d, %d is: %f\\n&quot;, 1, 2, 2, a[1][2][2]);\r\n\r\n    return;\r\n}\r\n\r\nfloat *thirdLevel(JNIEnv *env, jfloatArray arr)\r\n{\r\n    jsize len = env-&gt;GetArrayLength(arr);\r\n    float *ret = new float[len];\r\n    env-&gt;GetFloatArrayRegion(arr, 0, len, ret);\r\n    return ret;\r\n}\r\n\r\nfloat **secondLevel(JNIEnv *env, jobjectArray arr)\r\n{\r\n    jsize len = env-&gt;GetArrayLength(arr);\r\n    float **ret = new float *[len];\r\n    for (int i = 0; i &lt; len; i++)\r\n    {\r\n        jobject item = env-&gt;GetObjectArrayElement(arr, i);\r\n        ret[i] = thirdLevel(env, (jfloatArray)item);\r\n        env-&gt;DeleteLocalRef(item);\r\n    }\r\n    return ret;\r\n}\r\n\r\nfloat ***firstLevel(JNIEnv *env, jobjectArray arr)\r\n{\r\n    jsize len = env-&gt;GetArrayLength(arr);\r\n    float ***ret = new float **[len];\r\n    for (int i = 0; i &lt; len; i++)\r\n    {\r\n        jobject item = env-&gt;GetObjectArrayElement(arr, i);\r\n        ret[i] = secondLevel(env, (jobjectArray)item);\r\n        env-&gt;DeleteLocalRef(item);\r\n    }\r\n    return ret;\r\n}\r\n\r\nJNIEXPORT jobjectArray JNICALL Java_JNIArray_integrateWithTrapezoid(JNIEnv *env, jobject thisObj, jobjectArray jarr)\r\n{\r\n    float ***returningArray;\r\n\r\n    returningArray = firstLevel(env, jarr);\r\n\r\n    trapezoidalintegral(returningArray);\r\n\r\n    jclass *pClass;\r\n    jclass cls1;\r\n    jclass jcls1;\r\n    jclass jcls2;\r\n    jobject obj2;\r\n\r\n    cls1 = env-&gt;GetObjectClass(thisObj);\r\n    // jfieldID fid1 = env-&gt;GetFieldID(cls1, &quot;ptr&quot;, &quot;J&quot;);\r\n    // pClass = (jclass *)env-&gt;GetLongField(thisObj, fid1);\r\n\r\n    jcls1 = env-&gt;FindClass(&quot;[[F&quot;);\r\n    jcls2 = env-&gt;FindClass(&quot;[F&quot;);\r\n\r\n    jobjectArray array1 = env-&gt;NewObjectArray(3, jcls1, NULL);\r\n\r\n    for (int i = 0; i &lt; 3; i++)\r\n    {\r\n        jobjectArray array2 = env-&gt;NewObjectArray(3, jcls2, NULL);\r\n\r\n        for (int j = 0; j &lt; 3; j++)\r\n        {\r\n            jfloatArray array3 = env-&gt;NewFloatArray(3);\r\n            env-&gt;SetFloatArrayRegion(array3, 0, 3, returningArray[i][j]);\r\n            env-&gt;SetObjectArrayElement(array2, j, array3);\r\n        }\r\n\r\n        env-&gt;SetObjectArrayElement(array1, i, array2);\r\n    }\r\n\r\n    env-&gt;DeleteLocalRef(cls1);\r\n    env-&gt;DeleteLocalRef(jcls1);\r\n    env-&gt;DeleteLocalRef(jcls2);\r\n\r\n    return array1;\r\n}\r\n```\r\n\r\n  [1]: https://stackoverflow.com/questions/6751825/simplest-way-to-pass-float-to-c-via-jni","title":"How to pass a 3D element into JNI?","body":"<p>I am working on a project and need to do some calculations with a 3D array in C++. I need to pass this 3D array from Java to C++, do some calculations, then return it. I am using JNI and am very new to it so I don't know very much. I am trying to make a sample program to test this and to use it as reference. I have gotten passing a 2D array to C++ but cannot figure out the 3D part. I built the 2D part using <a href=\"https://stackoverflow.com/questions/6751825/simplest-way-to-pass-float-to-c-via-jni\">this solution</a>.</p>\n<p>This is my C++ code right now (this works for 2D arrays):</p>\n<pre><code>float** testFunction(float **a)\n{\n\nprintf(&quot;Hello from JNI!\\n&quot;);\n    printf(&quot;Point at %d,%d is: %f\\n&quot;, 1, 2, a[1][2]);\n\n    return a[1][2];\n}\njfloat JNICALL Java_JNIArray_integrateWithTrapezoid(JNIEnv *env, jobject thisObj, jobjectArray jarr)\n{\n    int sizex = env-&gt;GetArrayLength(jarr);\n    jfloatArray dim = (jfloatArray)env-&gt;GetObjectArrayElement(jarr, 0);\n    int sizey = env-&gt;GetArrayLength(dim);\n    float **localArray;\n\n    localArray = new float *[sizex];\n\n    for (int i = 0; i &lt; sizex; i++)\n    {\n        jfloatArray oneDim = (jfloatArray)env-&gt;GetObjectArrayElement(jarr, i);\n        jfloat *element = env-&gt;GetFloatArrayElements(oneDim, 0);\n        localArray[i] = new float[sizey];\n\n        for (int j = 0; j &lt; sizey; j++)\n        {\n            localArray[i][j] = element[j];\n        }\n    }\n\n    return testFunction(localArray);\n}\n</code></pre>\n<p>Any help would be great. I am very in the dark on this. If I forgot to provide any needed information please let me know.</p>\n<p>Thanks.</p>\n<p><strong>EDIT:</strong></p>\n<p>Thanks to @Botje, this worked:</p>\n<pre><code>void trapezoidalintegral(float ***a)\n{\n\n    printf(&quot;Hello from JNI!\\n&quot;);\n    printf(&quot;Point at %d, %d, %d is: %f\\n&quot;, 1, 2, 2, a[1][2][2]);\n\n    return;\n}\n\nfloat *thirdLevel(JNIEnv *env, jfloatArray arr)\n{\n    jsize len = env-&gt;GetArrayLength(arr);\n    float *ret = new float[len];\n    env-&gt;GetFloatArrayRegion(arr, 0, len, ret);\n    return ret;\n}\n\nfloat **secondLevel(JNIEnv *env, jobjectArray arr)\n{\n    jsize len = env-&gt;GetArrayLength(arr);\n    float **ret = new float *[len];\n    for (int i = 0; i &lt; len; i++)\n    {\n        jobject item = env-&gt;GetObjectArrayElement(arr, i);\n        ret[i] = thirdLevel(env, (jfloatArray)item);\n        env-&gt;DeleteLocalRef(item);\n    }\n    return ret;\n}\n\nfloat ***firstLevel(JNIEnv *env, jobjectArray arr)\n{\n    jsize len = env-&gt;GetArrayLength(arr);\n    float ***ret = new float **[len];\n    for (int i = 0; i &lt; len; i++)\n    {\n        jobject item = env-&gt;GetObjectArrayElement(arr, i);\n        ret[i] = secondLevel(env, (jobjectArray)item);\n        env-&gt;DeleteLocalRef(item);\n    }\n    return ret;\n}\n\nJNIEXPORT jobjectArray JNICALL Java_JNIArray_integrateWithTrapezoid(JNIEnv *env, jobject thisObj, jobjectArray jarr)\n{\n    float ***returningArray;\n\n    returningArray = firstLevel(env, jarr);\n\n    trapezoidalintegral(returningArray);\n\n    jclass *pClass;\n    jclass cls1;\n    jclass jcls1;\n    jclass jcls2;\n    jobject obj2;\n\n    cls1 = env-&gt;GetObjectClass(thisObj);\n    // jfieldID fid1 = env-&gt;GetFieldID(cls1, &quot;ptr&quot;, &quot;J&quot;);\n    // pClass = (jclass *)env-&gt;GetLongField(thisObj, fid1);\n\n    jcls1 = env-&gt;FindClass(&quot;[[F&quot;);\n    jcls2 = env-&gt;FindClass(&quot;[F&quot;);\n\n    jobjectArray array1 = env-&gt;NewObjectArray(3, jcls1, NULL);\n\n    for (int i = 0; i &lt; 3; i++)\n    {\n        jobjectArray array2 = env-&gt;NewObjectArray(3, jcls2, NULL);\n\n        for (int j = 0; j &lt; 3; j++)\n        {\n            jfloatArray array3 = env-&gt;NewFloatArray(3);\n            env-&gt;SetFloatArrayRegion(array3, 0, 3, returningArray[i][j]);\n            env-&gt;SetObjectArrayElement(array2, j, array3);\n        }\n\n        env-&gt;SetObjectArrayElement(array1, i, array2);\n    }\n\n    env-&gt;DeleteLocalRef(cls1);\n    env-&gt;DeleteLocalRef(jcls1);\n    env-&gt;DeleteLocalRef(jcls2);\n\n    return array1;\n}\n</code></pre>\n"},{"tags":["java","web-services","rest","jersey","jax-rs"],"comments":[{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1487781710,"post_id":42397105,"comment_id":71941760,"body_markdown":"Why not just US/Boston? Why do you need `field_name/Country/field_value`?","body":"Why not just US/Boston? Why do you need <code>field_name&#47;Country&#47;field_value</code>?"},{"owner":{"account_id":68546,"reputation":6960,"user_id":1289525,"accept_rate":58,"display_name":"Roman Goyenko"},"score":0,"creation_date":1487782858,"post_id":42397105,"comment_id":71942570,"body_markdown":"the names are dynamic, I don&#39;t know the order, I want client to tell me what they want to filter on","body":"the names are dynamic, I don&#39;t know the order, I want client to tell me what they want to filter on"}],"answers":[{"tags":[],"owner":{"account_id":27720,"reputation":13164,"user_id":73446,"accept_rate":80,"display_name":"gregwhitaker"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1487786294,"creation_date":1487786294,"answer_id":42398966,"question_id":42397105,"body_markdown":"This would seem to be better suited for query parameters and not url parameters as you have above.\r\n\r\nYour url would then look something like:\r\n\r\n    /query?Country=US&amp;City=Boston&amp;City=Chicago\r\n\r\nJAX-RS supports multiple query parameters of the same name by mapping them to a Collection in your endpoint as follows:\r\n\r\n    @GET\r\n    @Path(&quot;/query&quot;)\r\n    public String queryValues(@QueryParam(&quot;Country&quot;) List&lt;String&gt; countries,\r\n                              @QueryParam(&quot;City&quot;) List&lt;String&gt; cities) {\r\n       // Do work here\r\n    }\r\n\r\nIf the query parameters are completely dynamic and you don&#39;t know what they are until runtime then you can inject the `UriInfo` object and interrogate the query string yourself.\r\n\r\n\r\n    @GET\r\n    @Path(&quot;/query&quot;)\r\n    public String queryValues(@Context UriInfo uriInfo) {\r\n       // Do work here\r\n    }\r\n","title":"JAX-RS query with multiple parameters of the same name","body":"<p>This would seem to be better suited for query parameters and not url parameters as you have above.</p>\n\n<p>Your url would then look something like:</p>\n\n<pre><code>/query?Country=US&amp;City=Boston&amp;City=Chicago\n</code></pre>\n\n<p>JAX-RS supports multiple query parameters of the same name by mapping them to a Collection in your endpoint as follows:</p>\n\n<pre><code>@GET\n@Path(\"/query\")\npublic String queryValues(@QueryParam(\"Country\") List&lt;String&gt; countries,\n                          @QueryParam(\"City\") List&lt;String&gt; cities) {\n   // Do work here\n}\n</code></pre>\n\n<p>If the query parameters are completely dynamic and you don't know what they are until runtime then you can inject the <code>UriInfo</code> object and interrogate the query string yourself.</p>\n\n<pre><code>@GET\n@Path(\"/query\")\npublic String queryValues(@Context UriInfo uriInfo) {\n   // Do work here\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9964251,"reputation":2674,"user_id":7372432,"display_name":"amoljdv06"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1604318297,"creation_date":1604318297,"answer_id":64645174,"question_id":42397105,"body_markdown":"About your query,you can use below comma separated format as well: \r\n\r\n    /query?Country=US&amp;City=Boston,Chicago","title":"JAX-RS query with multiple parameters of the same name","body":"<p>About your query,you can use below comma separated format as well:</p>\n<pre><code>/query?Country=US&amp;City=Boston,Chicago\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4809624,"reputation":3467,"user_id":3883475,"accept_rate":85,"display_name":"Ironluca"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1655058393,"creation_date":1655058393,"answer_id":72594842,"question_id":42397105,"body_markdown":"**Adding an observation**: For Jersey 2.35 *FormParam*, it needs to be City=Boston&amp;City=Chicago style, which then can become elements of a list or set. \r\n\r\nThe comma separated parameter values (e.g City=Boston,Chicago) doesn&#39;t seem to work. It takes it as a single value (Tested with Postman)","title":"JAX-RS query with multiple parameters of the same name","body":"<p><strong>Adding an observation</strong>: For Jersey 2.35 <em>FormParam</em>, it needs to be City=Boston&amp;City=Chicago style, which then can become elements of a list or set.</p>\n<p>The comma separated parameter values (e.g City=Boston,Chicago) doesn't seem to work. It takes it as a single value (Tested with Postman)</p>\n"}],"owner":{"account_id":68546,"reputation":6960,"user_id":1289525,"accept_rate":58,"display_name":"Roman Goyenko"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9181,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":42398966,"answer_count":3,"score":4,"last_activity_date":1655058393,"creation_date":1487780991,"question_id":42397105,"body_markdown":"I want to make a web-service where you can query for generic data. So, my URL would be something like this: \r\n\r\n.../field_name/Country/field_value/US/field_name/City/field_value/Boston\r\n\r\nwhat would be the way to read it with Jersey - I want to get an array of field names and a corresponding array of field values.","title":"JAX-RS query with multiple parameters of the same name","body":"<p>I want to make a web-service where you can query for generic data. So, my URL would be something like this: </p>\n\n<p>.../field_name/Country/field_value/US/field_name/City/field_value/Boston</p>\n\n<p>what would be the way to read it with Jersey - I want to get an array of field names and a corresponding array of field values.</p>\n"},{"tags":["java","arrays"],"answers":[{"tags":[],"owner":{"account_id":6475519,"reputation":4496,"user_id":5014221,"accept_rate":71,"display_name":"Ashish Patil"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1654873402,"creation_date":1654873402,"answer_id":72576392,"question_id":72576273,"body_markdown":"Declare arrays for zero &amp; counter similar to even and odd :\r\n\r\n    int zero[] = new int[NUM_COUNT];\r\n    int zIdx=0;\r\n\r\nAnd modify your if / else something like: \r\n\r\n    if (arr[i] == 0)\r\n      zero[zIdx++] = arr[i];\r\n    else if (arr[i] % 2 == 0)\r\n          even[eIdx++] = arr[i];\r\n     else\r\n        odd[oIdx++] = arr[i];","title":"Counting odd even and zeros in array java","body":"<p>Declare arrays for zero &amp; counter similar to even and odd :</p>\n<pre><code>int zero[] = new int[NUM_COUNT];\nint zIdx=0;\n</code></pre>\n<p>And modify your if / else something like:</p>\n<pre><code>if (arr[i] == 0)\n  zero[zIdx++] = arr[i];\nelse if (arr[i] % 2 == 0)\n      even[eIdx++] = arr[i];\n else\n    odd[oIdx++] = arr[i];\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1615458,"reputation":7096,"user_id":1493294,"accept_rate":60,"display_name":"candied_orange"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1655054110,"creation_date":1654873929,"answer_id":72576500,"question_id":72576273,"body_markdown":"No need to create extra arrays. Counting can be done with just one integer. \r\n\r\n    var out = System.out;\r\n   \r\n    int zeroCount = 0;\r\n    for (i = 0; i &lt; NUM_COUNT; i++) {\r\n        if (arr[i] == 0) {\r\n            zeroCount++;\r\n        }\r\n    }\r\n    out.println(&quot;Zeros: &quot; + zeroCount);\r\n\r\nI&#39;ve changed the output style to clearly label what is being output here and to avoid hard coding System.out everywhere.  Something to consider for the rest of the code.","title":"Counting odd even and zeros in array java","body":"<p>No need to create extra arrays. Counting can be done with just one integer.</p>\n<pre><code>var out = System.out;\n\nint zeroCount = 0;\nfor (i = 0; i &lt; NUM_COUNT; i++) {\n    if (arr[i] == 0) {\n        zeroCount++;\n    }\n}\nout.println(&quot;Zeros: &quot; + zeroCount);\n</code></pre>\n<p>I've changed the output style to clearly label what is being output here and to avoid hard coding System.out everywhere.  Something to consider for the rest of the code.</p>\n"},{"tags":[],"owner":{"account_id":5569841,"reputation":3750,"user_id":4415625,"display_name":"dani-vta"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1654874147,"creation_date":1654874147,"answer_id":72576553,"question_id":72576273,"body_markdown":"In addition to the iterative solution of @candied_orange answer, I&#39;d like to contribute offering a stream implementation. Just stream the elements, filter for the ones that are equal to zero and finally count the number of elements in the stream.\r\n\r\n```\r\nlong numZeros = Arrays.stream(arr).filter(i -&gt; i == 0).count();\r\nSystem.out.println(&quot;Num of zeros: &quot; + numZeros);\r\n```","title":"Counting odd even and zeros in array java","body":"<p>In addition to the iterative solution of @candied_orange answer, I'd like to contribute offering a stream implementation. Just stream the elements, filter for the ones that are equal to zero and finally count the number of elements in the stream.</p>\n<pre><code>long numZeros = Arrays.stream(arr).filter(i -&gt; i == 0).count();\nSystem.out.println(&quot;Num of zeros: &quot; + numZeros);\n</code></pre>\n"}],"owner":{"account_id":23185697,"reputation":17,"user_id":17282840,"display_name":"Joshua De Guzman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":84,"favorite_count":0,"down_vote_count":3,"up_vote_count":2,"closed_date":1654947589,"accepted_answer_id":72576500,"answer_count":3,"score":-1,"last_activity_date":1655058094,"creation_date":1654872886,"question_id":72576273,"body_markdown":"How can I add the code to find the zeros in the array of this program? This code can count even and odd. Should I do a different statement, or can I just add another if else statement?\r\n         \r\n ```\r\nimport java.util.Scanner;\r\n\r\npublic class num\r\n{\r\n    public static void main(String args[]) {\r\n        \r\n        final int NUM_COUNT = 20;\r\n        Scanner in = new Scanner(System.in);\r\n        int i = 0;\r\n        \r\n        int arr[] = new int[NUM_COUNT];\r\n        int even[] = new int[NUM_COUNT];\r\n        int odd[] = new int[NUM_COUNT];\r\n        \r\n        System.out.println(&quot;Enter 20 numbers:&quot;);\r\n        for (i = 0; i &lt; NUM_COUNT; i++) {\r\n            arr[i] = in.nextInt();\r\n        }\r\n        \r\n        int eIdx = 0, oIdx = 0;\r\n        for (i = 0; i &lt; NUM_COUNT; i++) {\r\n            if (arr[i] % 2 == 0)\r\n                even[eIdx++] = arr[i];\r\n            else\r\n                odd[oIdx++] = arr[i];\r\n        }\r\n        \r\n        System.out.println(&quot;Even Numbers:&quot;);\r\n        for (i = 0; i &lt; eIdx; i++) {\r\n            System.out.print(even[i] + &quot; &quot;);\r\n        }\r\n        \r\n        System.out.println(&quot;\\nOdd Numbers:&quot;);\r\n        for (i = 0; i &lt; oIdx; i++) {\r\n            System.out.print(odd[i] + &quot; &quot;);\r\n        }\r\n    }\r\n}\r\n```","title":"Counting odd even and zeros in array java","body":"<p>How can I add the code to find the zeros in the array of this program? This code can count even and odd. Should I do a different statement, or can I just add another if else statement?</p>\n<pre><code>import java.util.Scanner;\n\npublic class num\n{\n   public static void main(String args[]) {\n       \n       final int NUM_COUNT = 20;\n       Scanner in = new Scanner(System.in);\n       int i = 0;\n       \n       int arr[] = new int[NUM_COUNT];\n       int even[] = new int[NUM_COUNT];\n       int odd[] = new int[NUM_COUNT];\n       \n       System.out.println(&quot;Enter 20 numbers:&quot;);\n       for (i = 0; i &lt; NUM_COUNT; i++) {\n           arr[i] = in.nextInt();\n       }\n       \n       int eIdx = 0, oIdx = 0;\n       for (i = 0; i &lt; NUM_COUNT; i++) {\n           if (arr[i] % 2 == 0)\n               even[eIdx++] = arr[i];\n           else\n               odd[oIdx++] = arr[i];\n       }\n       \n       System.out.println(&quot;Even Numbers:&quot;);\n       for (i = 0; i &lt; eIdx; i++) {\n           System.out.print(even[i] + &quot; &quot;);\n       }\n       \n       System.out.println(&quot;\\nOdd Numbers:&quot;);\n       for (i = 0; i &lt; oIdx; i++) {\n           System.out.print(odd[i] + &quot; &quot;);\n       }\n   }\n}\n</code></pre>\n"},{"tags":["java","spring","api","spring-boot","spring-security"],"comments":[{"owner":{"account_id":15190407,"reputation":13087,"user_id":10961238,"display_name":"Romil Patel"},"score":0,"creation_date":1551157202,"post_id":54873825,"comment_id":96526763,"body_markdown":"[Possible duplicate of this](https://stackoverflow.com/questions/54758872/spring-boot-security-postman-gives-401-unauthorized) Let me know how its work for you","body":"<a href=\"https://stackoverflow.com/questions/54758872/spring-boot-security-postman-gives-401-unauthorized\">Possible duplicate of this</a> Let me know how its work for you"}],"answers":[{"tags":[],"owner":{"account_id":11596870,"reputation":403,"user_id":8495354,"display_name":"Romas Augustinavičius"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1551126138,"creation_date":1551126138,"answer_id":54874060,"question_id":54873825,"body_markdown":"Simply select &quot;Authorization&quot; tab and then the authorization method. Pretty clear in here https://learning.getpostman.com/docs/postman/sending_api_requests/authorization/\r\n\r\nFaor your case choose &quot;Basic&quot; authorization","title":"How to add spring security parameters in Postman?","body":"<p>Simply select \"Authorization\" tab and then the authorization method. Pretty clear in here <a href=\"https://learning.getpostman.com/docs/postman/sending_api_requests/authorization/\" rel=\"nofollow noreferrer\">https://learning.getpostman.com/docs/postman/sending_api_requests/authorization/</a></p>\n\n<p>Faor your case choose \"Basic\" authorization</p>\n"},{"tags":[],"owner":{"account_id":18643364,"reputation":191,"user_id":13588640,"display_name":"Salah dine Maham"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655057151,"creation_date":1655057151,"answer_id":72594702,"question_id":54873825,"body_markdown":"- first create application security confige class like this : \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n\r\n\r\n\r\n- Second go to you postMan and change the authentification type to basic like this :[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ECMzZ.png\r\n  [2]: https://i.stack.imgur.com/xufLL.png","title":"How to add spring security parameters in Postman?","body":"<ul>\n<li>first create application security confige class like this :</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/ECMzZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ECMzZ.png\" alt=\"enter image description here\" /></a></p>\n<ul>\n<li>Second go to you postMan and change the authentification type to basic like this :<a href=\"https://i.stack.imgur.com/xufLL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xufLL.png\" alt=\"enter image description here\" /></a></li>\n</ul>\n"}],"owner":{"account_id":15408265,"reputation":11,"user_id":11115782,"display_name":"kohlton.jazeel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4373,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1655057151,"creation_date":1551125096,"question_id":54873825,"body_markdown":"I have added Spring Security in my project. It&#39;s working fine when I am requesting from browser, it simply ask my username and password and gives access to API. But now I tried from Postman. I tried passing username and password fields in headers but it is not allowing me to access API.\r\n\r\nI am continuously getting 401 unauthorized in Postman.\r\n","title":"How to add spring security parameters in Postman?","body":"<p>I have added Spring Security in my project. It's working fine when I am requesting from browser, it simply ask my username and password and gives access to API. But now I tried from Postman. I tried passing username and password fields in headers but it is not allowing me to access API.</p>\n\n<p>I am continuously getting 401 unauthorized in Postman.</p>\n"},{"tags":["java","arraylist"],"answers":[{"tags":[],"owner":{"account_id":23968828,"reputation":104,"user_id":17957852,"display_name":"Debanjan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655056940,"creation_date":1655056940,"answer_id":72594671,"question_id":72594630,"body_markdown":"You can create a custom wrapper class for `ActionListener`. This custom class, let&#39;s call it `EshopDataBasedActionListener` will contain a field for `EshopData` object. When you create this Listener, you will pass in the actual Object of `EshopData` that has already been created and that contains the user list. Now you are able to access this object inside your listener. \r\n\r\nThe next part of your problem of binding the Listener to your Login button will now be easier to achieve. You can now provide the implementation of the `actionPerformed` method that will contain your logic. You can pass in the username and password in the same fashion.","title":"Iterating through an array list from another class problem","body":"<p>You can create a custom wrapper class for <code>ActionListener</code>. This custom class, let's call it <code>EshopDataBasedActionListener</code> will contain a field for <code>EshopData</code> object. When you create this Listener, you will pass in the actual Object of <code>EshopData</code> that has already been created and that contains the user list. Now you are able to access this object inside your listener.</p>\n<p>The next part of your problem of binding the Listener to your Login button will now be easier to achieve. You can now provide the implementation of the <code>actionPerformed</code> method that will contain your logic. You can pass in the username and password in the same fashion.</p>\n"}],"owner":{"account_id":25538787,"reputation":1,"user_id":19325310,"display_name":"Magas Trelas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1655056940,"creation_date":1655056517,"question_id":72594630,"body_markdown":"This is the class where I store the data:\r\n```\r\npackage entities;\r\n\r\nimport java.util.ArrayList;\r\n\r\npublic class EshopData {\r\n    \r\n    private static ArrayList&lt;User&gt; users = new ArrayList&lt;User&gt;();\r\n    \r\n    public ArrayList&lt;User&gt; getUsers() {\r\n        return users;\r\n    }\r\n\r\n    public static void setUsers( ArrayList&lt;User&gt; users) {\r\n        EshopData.users = users;\r\n    }\r\n}\r\n```\r\nThis is my main Frame:\r\n\r\n``` \r\npackage ui;\r\nimport java.awt.event.*;\r\nimport java.util.ArrayList;\r\n\r\nimport javax.swing.*;\r\n\r\nimport entities.User;\r\n\r\npublic class Frame extends JFrame{\r\n    \r\n    public static void main(String[] args) {\r\n\r\n\r\n        //FRAME\r\n        JFrame frame = new JFrame(&quot;My first Eshop&quot;);\r\n\r\n        frame.setSize(300, 300);\r\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        frame.setResizable(false);\r\n        //frame.setVisible(true);\r\n        frame.setLayout(null);\r\n        \r\n\r\n        //LABELS\r\n        JLabel l1 = new JLabel(&quot;Username:&quot;);\r\n        JLabel l2 = new JLabel(&quot;Password:&quot;);\r\n\r\n        l1.setBounds(35, 60, 80, 20);\r\n        l2.setBounds(35, 110, 80, 20);\r\n\r\n\r\n        //TEXTFIELDS\r\n        JTextField tf1 = new JTextField();\r\n        JTextField tf2 = new JTextField();\r\n\r\n        tf1.setBounds(150, 60, 90, 20);\r\n        tf2.setBounds(150, 110, 90, 20);\r\n\r\n\r\n        //BUTTONS\r\n        JButton b1 = new JButton(&quot;Register&quot;);\r\n        JButton b2 = new JButton(&quot;Login&quot;);\r\n\r\n        b1.addActionListener(new ActionListener() {\r\n            \r\n            public void actionPerformed(ActionEvent e){\r\n\r\n                RegisterFrame rframe = new RegisterFrame();\r\n                rframe.setVisible(true);\r\n                rframe.setSize(600, 600);\r\n            }\r\n        });\r\n\r\n\r\n        b2.addActionListener(new ActionListener() {\r\n            \r\n            public void actionPerformed(ActionEvent e){\r\n                \r\n            }\r\n        });\r\n\r\n        b1.setBounds(35, 150, 100, 20);\r\n        b2.setBounds(160, 150, 80, 20);\r\n\r\n        //ADDING TO FRAME\r\n        frame.add(l1);\r\n        frame.add(l2);\r\n        frame.add(tf1);\r\n        frame.add(tf2);\r\n        frame.add(b1);\r\n        frame.add(b2);\r\n\r\n        frame.setVisible(true);\r\n    }\r\n    \r\n}\r\n```\r\n\r\nIn my main Frame I have a button &quot;Login&quot; (its the &#39;b2&#39; button) and I want to create an actionListener that will iterate through the array list from above and search for the User.username, if the username exists it will search for the User.password afterwards. \r\nI am not sure whether I am explaining it correctly or not but any kind of help will be appreciated.\r\n\r\n\r\nIf you need any other part of the code I am here to provide it for you. Thnak&#39;s in advance!","title":"Iterating through an array list from another class problem","body":"<p>This is the class where I store the data:</p>\n<pre><code>package entities;\n\nimport java.util.ArrayList;\n\npublic class EshopData {\n    \n    private static ArrayList&lt;User&gt; users = new ArrayList&lt;User&gt;();\n    \n    public ArrayList&lt;User&gt; getUsers() {\n        return users;\n    }\n\n    public static void setUsers( ArrayList&lt;User&gt; users) {\n        EshopData.users = users;\n    }\n}\n</code></pre>\n<p>This is my main Frame:</p>\n<pre><code>package ui;\nimport java.awt.event.*;\nimport java.util.ArrayList;\n\nimport javax.swing.*;\n\nimport entities.User;\n\npublic class Frame extends JFrame{\n    \n    public static void main(String[] args) {\n\n\n        //FRAME\n        JFrame frame = new JFrame(&quot;My first Eshop&quot;);\n\n        frame.setSize(300, 300);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.setResizable(false);\n        //frame.setVisible(true);\n        frame.setLayout(null);\n        \n\n        //LABELS\n        JLabel l1 = new JLabel(&quot;Username:&quot;);\n        JLabel l2 = new JLabel(&quot;Password:&quot;);\n\n        l1.setBounds(35, 60, 80, 20);\n        l2.setBounds(35, 110, 80, 20);\n\n\n        //TEXTFIELDS\n        JTextField tf1 = new JTextField();\n        JTextField tf2 = new JTextField();\n\n        tf1.setBounds(150, 60, 90, 20);\n        tf2.setBounds(150, 110, 90, 20);\n\n\n        //BUTTONS\n        JButton b1 = new JButton(&quot;Register&quot;);\n        JButton b2 = new JButton(&quot;Login&quot;);\n\n        b1.addActionListener(new ActionListener() {\n            \n            public void actionPerformed(ActionEvent e){\n\n                RegisterFrame rframe = new RegisterFrame();\n                rframe.setVisible(true);\n                rframe.setSize(600, 600);\n            }\n        });\n\n\n        b2.addActionListener(new ActionListener() {\n            \n            public void actionPerformed(ActionEvent e){\n                \n            }\n        });\n\n        b1.setBounds(35, 150, 100, 20);\n        b2.setBounds(160, 150, 80, 20);\n\n        //ADDING TO FRAME\n        frame.add(l1);\n        frame.add(l2);\n        frame.add(tf1);\n        frame.add(tf2);\n        frame.add(b1);\n        frame.add(b2);\n\n        frame.setVisible(true);\n    }\n    \n}\n</code></pre>\n<p>In my main Frame I have a button &quot;Login&quot; (its the 'b2' button) and I want to create an actionListener that will iterate through the array list from above and search for the User.username, if the username exists it will search for the User.password afterwards.\nI am not sure whether I am explaining it correctly or not but any kind of help will be appreciated.</p>\n<p>If you need any other part of the code I am here to provide it for you. Thnak's in advance!</p>\n"},{"tags":["java","android","database","android-room","observer-pattern"],"comments":[{"owner":{"account_id":9172301,"reputation":4168,"user_id":6819340,"accept_rate":39,"display_name":"darshan"},"score":1,"creation_date":1655060305,"post_id":72594650,"comment_id":128235444,"body_markdown":"I think it should be `Observer&lt;List&lt;Expense&gt;&gt;`, as you are probably observing a `LiveData` &amp; not a `List` of `LiveData`s.","body":"I think it should be <code>Observer&lt;List&lt;Expense&gt;&gt;</code>, as you are probably observing a <code>LiveData</code> &amp; not a <code>List</code> of <code>LiveData</code>s."},{"owner":{"account_id":19919616,"reputation":63,"user_id":14595783,"display_name":"Calas"},"score":0,"creation_date":1655067176,"post_id":72594650,"comment_id":128236734,"body_markdown":"Thank you that was exactly it. Now I just need to figure out why my expensesList is empty.","body":"Thank you that was exactly it. Now I just need to figure out why my expensesList is empty."}],"owner":{"account_id":19919616,"reputation":63,"user_id":14595783,"display_name":"Calas"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1655056704,"creation_date":1655056704,"question_id":72594650,"body_markdown":"I am trying to build an observer to access data from my Room Database. When I call \r\n```\r\nexpenseViewModel.getAllExpenses().observe(this, expenseObserver);\r\n```\r\nmy observer expenseObserver won&#39;t compile and shows me this error:\r\n\r\n```\r\nRequired type:\r\nObserver\r\n&lt;? super List&lt;Expense&gt;&gt;\r\nProvided:\r\nObserver\r\n&lt;LiveData&lt;List&lt;Expense&gt;&gt;&gt;\r\n```\r\n\r\nFor reference this is my entire code for my observer:\r\n\r\n```\r\nObserver&lt;LiveData&lt;List&lt;Expense&gt;&gt;&gt; expenseObserver = expenseList -&gt; {\r\n             List&lt;Expense&gt; list = expenseList.getValue();\r\n             expenses.setText(list.get(list.size() - 1).getExpense());\r\n         };\r\n\r\n        expenseViewModel.getAllExpenses().observe(this, expenseObserver);\r\n```","title":"What is a &lt;? super List&lt;Object&gt;&gt;? and how can I fix my Observer?","body":"<p>I am trying to build an observer to access data from my Room Database. When I call</p>\n<pre><code>expenseViewModel.getAllExpenses().observe(this, expenseObserver);\n</code></pre>\n<p>my observer expenseObserver won't compile and shows me this error:</p>\n<pre><code>Required type:\nObserver\n&lt;? super List&lt;Expense&gt;&gt;\nProvided:\nObserver\n&lt;LiveData&lt;List&lt;Expense&gt;&gt;&gt;\n</code></pre>\n<p>For reference this is my entire code for my observer:</p>\n<pre><code>Observer&lt;LiveData&lt;List&lt;Expense&gt;&gt;&gt; expenseObserver = expenseList -&gt; {\n             List&lt;Expense&gt; list = expenseList.getValue();\n             expenses.setText(list.get(list.size() - 1).getExpense());\n         };\n\n        expenseViewModel.getAllExpenses().observe(this, expenseObserver);\n</code></pre>\n"},{"tags":["java","algorithm","data-structures","linked-list","structure"],"answers":[{"tags":[],"owner":{"account_id":12409782,"reputation":477,"user_id":9042600,"display_name":"Netanel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655056676,"creation_date":1655056676,"answer_id":72594647,"question_id":72594213,"body_markdown":"Didn&#39;t look at the whole code but the constructor of Node recieves elment, next and before. When you construct the new node in addBetween you send pred as next and succ as before, and I assume you meant to do it the opposite way.","title":"Error adding new member to linked positional list","body":"<p>Didn't look at the whole code but the constructor of Node recieves elment, next and before. When you construct the new node in addBetween you send pred as next and succ as before, and I assume you meant to do it the opposite way.</p>\n"}],"owner":{"account_id":19376028,"reputation":1,"user_id":14168278,"display_name":"matin_mhz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":146,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1655056676,"creation_date":1655053037,"question_id":72594213,"body_markdown":"I&#39;m new to programming with Java and implementing algorithms.\r\nI am trying to implement positional linked list in Java and I wrote the following methods and have trouble adding a new method to this list.\r\nThe add between method is for this purpose and does not work properly.\r\nCan you tell me what is wrong with the addBetween method and how can I complete it?\r\n\r\n\r\n    import Position;\r\n    import EmptyListException;\r\n    import IllegalValueException;\r\n    import InvalidPositionException;\r\n\r\n    import java.util.Comparator;\r\n    import java.util.Iterator;\r\n    import java.util.Spliterator;\r\n    import java.util.function.Consumer;\r\n\r\n\r\n    public final class LinkedPositionalList&lt;E&gt; implements PositionalList&lt;E&gt; {\r\n\r\n\r\n    private class Node implements Position {\r\n        private E element;\r\n        private Node next;\r\n        private Node before;\r\n\r\n\r\n        protected Node(E element, Node next, Node before) {\r\n            this.element = element;\r\n            this.next = next;\r\n            this.before = before;\r\n        }\r\n\r\n        public void setElement(E element) {\r\n            this.element = element;\r\n        }\r\n\r\n        public E getElement() throws IllegalStateException {\r\n            if (next == null)\r\n                throw new IllegalArgumentException(&quot;Position no longer valid&quot;);\r\n            return element;\r\n        }\r\n\r\n        public Node getBefore() {\r\n            return before;\r\n        }\r\n\r\n        public void setBefore(Node before) {\r\n            this.before = before;\r\n        }\r\n\r\n        public void setNext(Node next) {\r\n            this.next = next;\r\n        }\r\n\r\n        public Node getNext() {\r\n            return next;\r\n        }\r\n\r\n        @Override\r\n        public Object element() throws InvalidPositionException {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    private int size = 0;\r\n    private Node header;\r\n    private Node trailer;\r\n\r\n    public LinkedPositionalList() {\r\n        header = new Node(null, null, null);\r\n        trailer = new Node(null, null, header);\r\n        header.setNext(trailer);\r\n    }\r\n\r\n    private Node validate(Position&lt;E&gt; p) throws IllegalArgumentException {\r\n        Node node = (Node) p;\r\n        if (node.getNext() == null)\r\n            throw new IllegalArgumentException(&quot;p is no longer in the list&quot;);\r\n        return node;\r\n    }\r\n\r\n    private Node position(Node node) {\r\n        if (node == header || node == trailer)\r\n            return null;\r\n        return node;\r\n    }\r\n\r\n    @Override\r\n    public int size() {\r\n        return size;\r\n    }\r\n\r\n    @Override\r\n    public boolean isEmpty() {\r\n        if (size == 0) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    @Override\r\n    public void clear() {\r\n        size = 0;\r\n        header = null;\r\n        trailer = null;\r\n    }\r\n\r\n    @Override\r\n    public boolean contains(E e) {\r\n        Node temp = header;\r\n        for (int i = 0; i &lt; size; i++) {\r\n            if (temp.element == e) {\r\n                return true;\r\n            }\r\n            temp = temp.next;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    @Override\r\n    public Position&lt;E&gt; first() throws EmptyListException {\r\n        if (isEmpty()) {\r\n            throw new EmptyListException(&quot;List is Empty&quot;);\r\n        }\r\n        System.out.println(header.element);\r\n        return (Position&lt;E&gt;) header.element;\r\n    }\r\n\r\n    @Override\r\n    public Position&lt;E&gt; last() throws EmptyListException {\r\n        if (isEmpty()) {\r\n            throw new EmptyListException(&quot;List is Empty&quot;);\r\n        }\r\n        return (Position&lt;E&gt;) header.getBefore();\r\n    }\r\n\r\n    @Override\r\n    public boolean isFirst(Position&lt;E&gt; p) throws InvalidPositionException {\r\n\r\n        if (header.getBefore() != null) {\r\n\r\n            return false;\r\n        } else {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public boolean isLast(Position&lt;E&gt; p) throws InvalidPositionException {\r\n        if (trailer.getNext() != null) {\r\n            return false;\r\n        } else {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public Position&lt;E&gt; before(Position&lt;E&gt; p) throws InvalidPositionException {\r\n        Node node = validate(p);\r\n        return (Position&lt;E&gt;) node.getBefore();\r\n    }\r\n\r\n    @Override\r\n    public Position&lt;E&gt; after(Position&lt;E&gt; p) throws InvalidPositionException {\r\n        Node node = validate(p);\r\n        return (Position&lt;E&gt;) node.getNext();\r\n    }\r\n\r\n    private Position&lt;E&gt; addBetween(E e, Node pred, Node succ) {\r\n        Node newest = new Node(e, pred, succ);\r\n        pred.setNext(newest);\r\n        succ.setBefore(newest);\r\n        size++;\r\n        return (Position&lt;E&gt;) (newest);\r\n    }\r\n\r\n    @Override\r\n    public Position&lt;E&gt; insertFirst(E e) throws IllegalValueException {\r\n        if (size &gt; 0){\r\n              insertBefore(header,e);\r\n        }else {\r\n            Node temp = new Node(e, header, null);\r\n            header = temp;\r\n            size++;\r\n        }\r\n        return (Position&lt;E&gt;) header;\r\n        //        return addBetween(e, header, header.getNext());\r\n    }\r\n\r\n    @Override\r\n    public Position&lt;E&gt; insertLast(E e) throws IllegalValueException {\r\n\r\n        Node temp = new Node(e, null, trailer);\r\n        trailer = temp;\r\n        size++;\r\n        return (Position&lt;E&gt;) trailer;\r\n        //        return addBetween(e, trailer.getBefore(), trailer);\r\n    }\r\n\r\n    @Override\r\n    public Position&lt;E&gt; insertBefore(Position&lt;E&gt; p, E e) throws InvalidPositionException, IllegalValueException {\r\n        Node node = validate(p);\r\n        return addBetween(e, node.getBefore(), node);\r\n    }\r\n\r\n    @Override\r\n    public Position&lt;E&gt; insertAfter(Position&lt;E&gt; p, E e) throws InvalidPositionException, IllegalValueException {\r\n        Node node = validate(p);\r\n        return addBetween(e, node, node.getNext());\r\n\r\n    }\r\n\r\n    @Override\r\n    public E remove(Position&lt;E&gt; p) throws InvalidPositionException {\r\n        Node node = validate(p);\r\n        Node predecessor = node.getBefore();\r\n        Node successor = node.getNext();\r\n        predecessor.setNext(successor);\r\n        successor.setBefore(predecessor);\r\n        size--;\r\n        E answer = node.getElement();\r\n        node.setElement(null);\r\n        node.setBefore(null);\r\n        node.setNext(null);\r\n        return answer;\r\n    }\r\n\r\n    @Override\r\n    public E replaceElement(Position&lt;E&gt; p, E e) throws InvalidPositionException, IllegalValueException {\r\n        Node node = validate(p);\r\n        node.setElement(e);\r\n        return node.getElement();\r\n    }\r\n\r\n    @Override\r\n    public void swapElements(Position&lt;E&gt; p, Position&lt;E&gt; q) throws InvalidPositionException {\r\n\r\n    }\r\n\r\n    @Override\r\n    public Iterator&lt;Position&lt;E&gt;&gt; positionalIterator() {\r\n        return null;\r\n    }\r\n\r\n    @Override\r\n    public void sort(Comparator&lt;E&gt; comparator) {\r\n\r\n    }\r\n\r\n    @Override\r\n    public Position&lt;E&gt; find(E e) {\r\n        int counter = 0;\r\n        for (Node i = header; counter &lt; size; i = i.next) {\r\n            if (e.equals(i)) {\r\n                return (Position&lt;E&gt;) e;\r\n            }\r\n            counter++;\r\n\r\n            return null;\r\n        }return null;\r\n    }\r\n\r\n    @Override\r\n    public Iterator&lt;Position&lt;E&gt;&gt; findAll(E e) {\r\n        return null;\r\n    }\r\n\r\n    @Override\r\n    public Iterator&lt;E&gt; iterator() {\r\n        return null;\r\n    }\r\n\r\n    @Override\r\n    public void forEach(Consumer&lt;? super E&gt; action) {\r\n        PositionalList.super.forEach(action);\r\n    }\r\n\r\n    @Override\r\n    public Spliterator&lt;E&gt; spliterator() {\r\n        return PositionalList.super.spliterator();\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n\r\n","title":"Error adding new member to linked positional list","body":"<p>I'm new to programming with Java and implementing algorithms.\nI am trying to implement positional linked list in Java and I wrote the following methods and have trouble adding a new method to this list.\nThe add between method is for this purpose and does not work properly.\nCan you tell me what is wrong with the addBetween method and how can I complete it?</p>\n<pre><code>import Position;\nimport EmptyListException;\nimport IllegalValueException;\nimport InvalidPositionException;\n\nimport java.util.Comparator;\nimport java.util.Iterator;\nimport java.util.Spliterator;\nimport java.util.function.Consumer;\n\n\npublic final class LinkedPositionalList&lt;E&gt; implements PositionalList&lt;E&gt; {\n\n\nprivate class Node implements Position {\n    private E element;\n    private Node next;\n    private Node before;\n\n\n    protected Node(E element, Node next, Node before) {\n        this.element = element;\n        this.next = next;\n        this.before = before;\n    }\n\n    public void setElement(E element) {\n        this.element = element;\n    }\n\n    public E getElement() throws IllegalStateException {\n        if (next == null)\n            throw new IllegalArgumentException(&quot;Position no longer valid&quot;);\n        return element;\n    }\n\n    public Node getBefore() {\n        return before;\n    }\n\n    public void setBefore(Node before) {\n        this.before = before;\n    }\n\n    public void setNext(Node next) {\n        this.next = next;\n    }\n\n    public Node getNext() {\n        return next;\n    }\n\n    @Override\n    public Object element() throws InvalidPositionException {\n        return null;\n    }\n}\n\nprivate int size = 0;\nprivate Node header;\nprivate Node trailer;\n\npublic LinkedPositionalList() {\n    header = new Node(null, null, null);\n    trailer = new Node(null, null, header);\n    header.setNext(trailer);\n}\n\nprivate Node validate(Position&lt;E&gt; p) throws IllegalArgumentException {\n    Node node = (Node) p;\n    if (node.getNext() == null)\n        throw new IllegalArgumentException(&quot;p is no longer in the list&quot;);\n    return node;\n}\n\nprivate Node position(Node node) {\n    if (node == header || node == trailer)\n        return null;\n    return node;\n}\n\n@Override\npublic int size() {\n    return size;\n}\n\n@Override\npublic boolean isEmpty() {\n    if (size == 0) {\n        return true;\n    }\n    return false;\n}\n\n@Override\npublic void clear() {\n    size = 0;\n    header = null;\n    trailer = null;\n}\n\n@Override\npublic boolean contains(E e) {\n    Node temp = header;\n    for (int i = 0; i &lt; size; i++) {\n        if (temp.element == e) {\n            return true;\n        }\n        temp = temp.next;\n    }\n    return false;\n}\n\n@Override\npublic Position&lt;E&gt; first() throws EmptyListException {\n    if (isEmpty()) {\n        throw new EmptyListException(&quot;List is Empty&quot;);\n    }\n    System.out.println(header.element);\n    return (Position&lt;E&gt;) header.element;\n}\n\n@Override\npublic Position&lt;E&gt; last() throws EmptyListException {\n    if (isEmpty()) {\n        throw new EmptyListException(&quot;List is Empty&quot;);\n    }\n    return (Position&lt;E&gt;) header.getBefore();\n}\n\n@Override\npublic boolean isFirst(Position&lt;E&gt; p) throws InvalidPositionException {\n\n    if (header.getBefore() != null) {\n\n        return false;\n    } else {\n        return true;\n    }\n}\n\n@Override\npublic boolean isLast(Position&lt;E&gt; p) throws InvalidPositionException {\n    if (trailer.getNext() != null) {\n        return false;\n    } else {\n        return true;\n    }\n}\n\n@Override\npublic Position&lt;E&gt; before(Position&lt;E&gt; p) throws InvalidPositionException {\n    Node node = validate(p);\n    return (Position&lt;E&gt;) node.getBefore();\n}\n\n@Override\npublic Position&lt;E&gt; after(Position&lt;E&gt; p) throws InvalidPositionException {\n    Node node = validate(p);\n    return (Position&lt;E&gt;) node.getNext();\n}\n\nprivate Position&lt;E&gt; addBetween(E e, Node pred, Node succ) {\n    Node newest = new Node(e, pred, succ);\n    pred.setNext(newest);\n    succ.setBefore(newest);\n    size++;\n    return (Position&lt;E&gt;) (newest);\n}\n\n@Override\npublic Position&lt;E&gt; insertFirst(E e) throws IllegalValueException {\n    if (size &gt; 0){\n          insertBefore(header,e);\n    }else {\n        Node temp = new Node(e, header, null);\n        header = temp;\n        size++;\n    }\n    return (Position&lt;E&gt;) header;\n    //        return addBetween(e, header, header.getNext());\n}\n\n@Override\npublic Position&lt;E&gt; insertLast(E e) throws IllegalValueException {\n\n    Node temp = new Node(e, null, trailer);\n    trailer = temp;\n    size++;\n    return (Position&lt;E&gt;) trailer;\n    //        return addBetween(e, trailer.getBefore(), trailer);\n}\n\n@Override\npublic Position&lt;E&gt; insertBefore(Position&lt;E&gt; p, E e) throws InvalidPositionException, IllegalValueException {\n    Node node = validate(p);\n    return addBetween(e, node.getBefore(), node);\n}\n\n@Override\npublic Position&lt;E&gt; insertAfter(Position&lt;E&gt; p, E e) throws InvalidPositionException, IllegalValueException {\n    Node node = validate(p);\n    return addBetween(e, node, node.getNext());\n\n}\n\n@Override\npublic E remove(Position&lt;E&gt; p) throws InvalidPositionException {\n    Node node = validate(p);\n    Node predecessor = node.getBefore();\n    Node successor = node.getNext();\n    predecessor.setNext(successor);\n    successor.setBefore(predecessor);\n    size--;\n    E answer = node.getElement();\n    node.setElement(null);\n    node.setBefore(null);\n    node.setNext(null);\n    return answer;\n}\n\n@Override\npublic E replaceElement(Position&lt;E&gt; p, E e) throws InvalidPositionException, IllegalValueException {\n    Node node = validate(p);\n    node.setElement(e);\n    return node.getElement();\n}\n\n@Override\npublic void swapElements(Position&lt;E&gt; p, Position&lt;E&gt; q) throws InvalidPositionException {\n\n}\n\n@Override\npublic Iterator&lt;Position&lt;E&gt;&gt; positionalIterator() {\n    return null;\n}\n\n@Override\npublic void sort(Comparator&lt;E&gt; comparator) {\n\n}\n\n@Override\npublic Position&lt;E&gt; find(E e) {\n    int counter = 0;\n    for (Node i = header; counter &lt; size; i = i.next) {\n        if (e.equals(i)) {\n            return (Position&lt;E&gt;) e;\n        }\n        counter++;\n\n        return null;\n    }return null;\n}\n\n@Override\npublic Iterator&lt;Position&lt;E&gt;&gt; findAll(E e) {\n    return null;\n}\n\n@Override\npublic Iterator&lt;E&gt; iterator() {\n    return null;\n}\n\n@Override\npublic void forEach(Consumer&lt;? super E&gt; action) {\n    PositionalList.super.forEach(action);\n}\n\n@Override\npublic Spliterator&lt;E&gt; spliterator() {\n    return PositionalList.super.spliterator();\n}\n</code></pre>\n<p>}</p>\n"},{"tags":["java","spring","spring-boot","cucumber"],"answers":[{"tags":[],"owner":{"account_id":18542437,"reputation":106,"user_id":13510602,"display_name":"hartenfels"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1655056604,"creation_date":1655056604,"answer_id":72594639,"question_id":72594512,"body_markdown":"Neither your `SpringBootCucumberApplication` nor your `CucumberSpringConfiguration` scan your `LoginPage` component because it&#39;s in a totally different package. The default component scan only looks in the current and any descending packages, but `pcz.Page` isn&#39;t anywhere beneath the `pcz.StepDefs` or `config` packages.\r\n\r\nYou can try any of the following:\r\n\r\n* Rename the `config` package to `pcz`. That will make the default component scan of your `SpringBootCucumberApplication` notice your `pcz.Page` package.\r\n\r\n* Move your `pcz.Page` package to `pcz.StepDefs.Page` so that the default component scan of your `CucumberSpringConfiguration` will notice it.\r\n\r\n* Use a [ComponentScan](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/ComponentScan.html) annotation on your `CucumberSpringApplication`, telling it which packages to scan: `@ComponentScan(basePackages = {&quot;Page&quot;})`.\r\n\r\nSide note, your package names [should probably be lower-cased](https://stackoverflow.com/questions/12534302/why-should-java-package-name-be-lowercase).","title":"No qualifying bean, but I added @Component annotation","body":"<p>Neither your <code>SpringBootCucumberApplication</code> nor your <code>CucumberSpringConfiguration</code> scan your <code>LoginPage</code> component because it's in a totally different package. The default component scan only looks in the current and any descending packages, but <code>pcz.Page</code> isn't anywhere beneath the <code>pcz.StepDefs</code> or <code>config</code> packages.</p>\n<p>You can try any of the following:</p>\n<ul>\n<li><p>Rename the <code>config</code> package to <code>pcz</code>. That will make the default component scan of your <code>SpringBootCucumberApplication</code> notice your <code>pcz.Page</code> package.</p>\n</li>\n<li><p>Move your <code>pcz.Page</code> package to <code>pcz.StepDefs.Page</code> so that the default component scan of your <code>CucumberSpringConfiguration</code> will notice it.</p>\n</li>\n<li><p>Use a <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/ComponentScan.html\" rel=\"nofollow noreferrer\">ComponentScan</a> annotation on your <code>CucumberSpringApplication</code>, telling it which packages to scan: <code>@ComponentScan(basePackages = {&quot;Page&quot;})</code>.</p>\n</li>\n</ul>\n<p>Side note, your package names <a href=\"https://stackoverflow.com/questions/12534302/why-should-java-package-name-be-lowercase\">should probably be lower-cased</a>.</p>\n"}],"owner":{"display_name":"user18542516"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":722,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1655056604,"creation_date":1655055445,"question_id":72594512,"body_markdown":"&gt; Could not invoke step [User clicks Register on main page] defined at\r\n&gt; &#39;pcz.StepDefs.LoginPageStepDefs.userClicksRegisterOnMainPage()&#39;. It\r\n&gt; appears there was a problem with the step definition. The converted\r\n&gt; arguments types were ()\r\n&gt; \r\n&gt; Caused by: io.cucumber.core.backend.CucumberBackendException: Error\r\n&gt; creating bean with name &#39;pcz.StepDefs.LoginPageStepDefs&#39;: Unsatisfied\r\n&gt; dependency expressed through field &#39;loginPage&#39;; nested exception is\r\n&gt; org.springframework.beans.factory.NoSuchBeanDefinitionException: No\r\n&gt; qualifying bean of type &#39;pcz.Page.LoginPage&#39; available: expected at\r\n&gt; least 1 bean which qualifies as autowire candidate. Dependency\r\n&gt; annotations: {@org.springframework.beans.factory\r\n&gt; .annotation.Autowired(required=true)}\r\n\r\nProject Structure:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/AhJ47.png\r\n\r\n\r\n    public class LoginPageStepDefs {\r\n    \r\n    @Autowired\r\n    LoginPage loginPage;\r\n    \r\n    \r\n        @When(&quot;User clicks Register on main page&quot;)\r\n        public void userClicksRegisterOnMainPage() {\r\n            loginPage.test();\r\n    \r\n        }\r\n    }\r\n\r\n    \r\n\r\n    import org.springframework.stereotype.Component;\r\n    @Component\r\n    public class LoginPage {\r\n        public void test(){\r\n        }\r\n    }\r\n\r\nAnd Spring config: \r\n\r\n    @CucumberContextConfiguration\r\n    @ContextConfiguration(classes = SpringBootCucumberApplication.class, loader = AnnotationConfigContextLoader.class)\r\n    @SpringBootTest()\r\n    public class CucumberSpringConfiguration {\r\n    }\r\n\r\n\r\n    @SpringBootApplication()\r\n    public class SpringBootCucumberApplication {\r\n    \r\n        public static void main(String[] args) {\r\n    \r\n    \r\n        }\r\n    }\r\n\r\n","title":"No qualifying bean, but I added @Component annotation","body":"<blockquote>\n<p>Could not invoke step [User clicks Register on main page] defined at\n'pcz.StepDefs.LoginPageStepDefs.userClicksRegisterOnMainPage()'. It\nappears there was a problem with the step definition. The converted\narguments types were ()</p>\n<p>Caused by: io.cucumber.core.backend.CucumberBackendException: Error\ncreating bean with name 'pcz.StepDefs.LoginPageStepDefs': Unsatisfied\ndependency expressed through field 'loginPage'; nested exception is\norg.springframework.beans.factory.NoSuchBeanDefinitionException: No\nqualifying bean of type 'pcz.Page.LoginPage' available: expected at\nleast 1 bean which qualifies as autowire candidate. Dependency\nannotations: {@org.springframework.beans.factory\n.annotation.Autowired(required=true)}</p>\n</blockquote>\n<p>Project Structure:</p>\n<p><a href=\"https://i.stack.imgur.com/AhJ47.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AhJ47.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>public class LoginPageStepDefs {\n\n@Autowired\nLoginPage loginPage;\n\n\n    @When(&quot;User clicks Register on main page&quot;)\n    public void userClicksRegisterOnMainPage() {\n        loginPage.test();\n\n    }\n}\n\n\n\nimport org.springframework.stereotype.Component;\n@Component\npublic class LoginPage {\n    public void test(){\n    }\n}\n</code></pre>\n<p>And Spring config:</p>\n<pre><code>@CucumberContextConfiguration\n@ContextConfiguration(classes = SpringBootCucumberApplication.class, loader = AnnotationConfigContextLoader.class)\n@SpringBootTest()\npublic class CucumberSpringConfiguration {\n}\n\n\n@SpringBootApplication()\npublic class SpringBootCucumberApplication {\n\n    public static void main(String[] args) {\n\n\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","security","authentication","jwt"],"comments":[{"owner":{"account_id":7739148,"reputation":3345,"user_id":5859654,"display_name":"Nemanja"},"score":0,"creation_date":1655047405,"post_id":72593180,"comment_id":128232650,"body_markdown":"Can you post error stacktrace?","body":"Can you post error stacktrace?"},{"owner":{"account_id":19981008,"reputation":913,"user_id":14644191,"display_name":"Enchantres"},"score":0,"creation_date":1655050953,"post_id":72593180,"comment_id":128233451,"body_markdown":"There is no stack trace. After I send post request to login with the credentials, it outputs the user. After that, when I hit  /user/current endpoint, it gives unathorized without any description. This happens because   Authentication auth = SecurityContextHolder.getContext().getAuthentication();  gives anonymous user.","body":"There is no stack trace. After I send post request to login with the credentials, it outputs the user. After that, when I hit  /user/current endpoint, it gives unathorized without any description. This happens because   Authentication auth = SecurityContextHolder.getContext().getAuthentication();  gives anonymous user."}],"answers":[{"tags":[],"owner":{"account_id":7739148,"reputation":3345,"user_id":5859654,"display_name":"Nemanja"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1655056234,"creation_date":1655055076,"answer_id":72594456,"question_id":72593180,"body_markdown":"In [Spring documentation][1], section **Storing the SecurityContext between requests** says :\r\n\r\n&gt; Depending on the type of application, there may need to be a strategy\r\n&gt; in place to store the security context between user operations. In a\r\n&gt; typical web application, a user logs in once and is subsequently\r\n&gt; identified by their session Id. The server caches the principal\r\n&gt; information for the duration session. In Spring Security, the\r\n&gt; responsibility for storing the SecurityContext between requests falls\r\n&gt; to the SecurityContextPersistenceFilter, which by default stores the\r\n&gt; context as an HttpSession attribute between HTTP requests. It restores\r\n&gt; the context to the SecurityContextHolder for each request and,\r\n&gt; crucially, clears the SecurityContextHolder when the request completes\r\n\r\n\r\nSo basically, when you create the security context manually no session object is created. Only when the request finishes processing does the Spring Security mechanism realize that the session object is null (when it tries to store the security context to the session after the request has been processed).\r\n\r\nAt the end of the request Spring Security creates a new session object and session ID. However this new session ID never makes it to the browser because it occurs at the end of the request, after the response to the browser has been made. This causes the new session ID (and hence the Security context containing my manually logged on user) to be lost when the next request contains the previous session ID.\r\n\r\n\r\nI found two solutions to hande this situation:  \r\n\r\n1.First solution : Save `SecurityContext` object in  session and then extract it from session when needed :\r\n\r\n\r\n    HttpSession session = request.getSession(true);\r\n    session.setAttribute(&quot;SPRING_SECURITY_CONTEXT&quot;, securityContext);\r\n\r\nand then, extract it from session.\r\n\r\n\r\n2. Second solution according to [this answer][2] would be to refactor your login function like this:\r\n\r\n \r\n\r\n       private void doAutoLogin(String username, String password, HttpServletRequest request) {\r\n    \r\n        try {\r\n            // Must be called from request filtered by Spring Security, otherwise SecurityContextHolder is not updated\r\n            UsernamePasswordAuthenticationToken token = new UsernamePasswordAuthenticationToken(username, password);\r\n            token.setDetails(new WebAuthenticationDetails(request));\r\n            Authentication authentication = this.authenticationProvider.authenticate(token);\r\n            logger.debug(&quot;Logging in with [{}]&quot;, authentication.getPrincipal());\r\n            SecurityContextHolder.getContext().setAuthentication(authentication);\r\n        } catch (Exception e) {\r\n            SecurityContextHolder.getContext().setAuthentication(null);\r\n            logger.error(&quot;Failure in autoLogin&quot;, e);\r\n        }\r\n    \r\n    };\r\n\r\nThis is how you shoud get authenticationProvider :\r\n\r\n    @Configuration public class WebConfig extends WebSecurityConfigurerAdapter {  \r\n     \r\n    @Bean          \r\n    public AuthenticationManager authenticationProvider() throws Exception{  \r\n       return super.authenticationManagerBean();     \r\n      } \r\n    }\r\n\r\n  [1]: https://docs.spring.io/spring-security/site/docs/3.0.x/reference/technical-overview.html\r\n  [2]: https://stackoverflow.com/questions/4664893/how-to-manually-set-an-authenticated-user-in-spring-security-springmvc\r\n","title":"Unable to set logged user from SecurityContextHolder in Spring Boot","body":"<p>In <a href=\"https://docs.spring.io/spring-security/site/docs/3.0.x/reference/technical-overview.html\" rel=\"nofollow noreferrer\">Spring documentation</a>, section <strong>Storing the SecurityContext between requests</strong> says :</p>\n<blockquote>\n<p>Depending on the type of application, there may need to be a strategy\nin place to store the security context between user operations. In a\ntypical web application, a user logs in once and is subsequently\nidentified by their session Id. The server caches the principal\ninformation for the duration session. In Spring Security, the\nresponsibility for storing the SecurityContext between requests falls\nto the SecurityContextPersistenceFilter, which by default stores the\ncontext as an HttpSession attribute between HTTP requests. It restores\nthe context to the SecurityContextHolder for each request and,\ncrucially, clears the SecurityContextHolder when the request completes</p>\n</blockquote>\n<p>So basically, when you create the security context manually no session object is created. Only when the request finishes processing does the Spring Security mechanism realize that the session object is null (when it tries to store the security context to the session after the request has been processed).</p>\n<p>At the end of the request Spring Security creates a new session object and session ID. However this new session ID never makes it to the browser because it occurs at the end of the request, after the response to the browser has been made. This causes the new session ID (and hence the Security context containing my manually logged on user) to be lost when the next request contains the previous session ID.</p>\n<p>I found two solutions to hande this situation:</p>\n<p>1.First solution : Save <code>SecurityContext</code> object in  session and then extract it from session when needed :</p>\n<pre><code>HttpSession session = request.getSession(true);\nsession.setAttribute(&quot;SPRING_SECURITY_CONTEXT&quot;, securityContext);\n</code></pre>\n<p>and then, extract it from session.</p>\n<ol start=\"2\">\n<li><p>Second solution according to <a href=\"https://stackoverflow.com/questions/4664893/how-to-manually-set-an-authenticated-user-in-spring-security-springmvc\">this answer</a> would be to refactor your login function like this:</p>\n<pre><code>private void doAutoLogin(String username, String password, HttpServletRequest request) {\n\n try {\n     // Must be called from request filtered by Spring Security, otherwise SecurityContextHolder is not updated\n     UsernamePasswordAuthenticationToken token = new UsernamePasswordAuthenticationToken(username, password);\n     token.setDetails(new WebAuthenticationDetails(request));\n     Authentication authentication = this.authenticationProvider.authenticate(token);\n     logger.debug(&quot;Logging in with [{}]&quot;, authentication.getPrincipal());\n     SecurityContextHolder.getContext().setAuthentication(authentication);\n } catch (Exception e) {\n     SecurityContextHolder.getContext().setAuthentication(null);\n     logger.error(&quot;Failure in autoLogin&quot;, e);\n }\n</code></pre>\n<p>};</p>\n</li>\n</ol>\n<p>This is how you shoud get authenticationProvider :</p>\n<pre><code>@Configuration public class WebConfig extends WebSecurityConfigurerAdapter {  \n \n@Bean          \npublic AuthenticationManager authenticationProvider() throws Exception{  \n   return super.authenticationManagerBean();     \n  } \n}\n</code></pre>\n"}],"owner":{"account_id":19981008,"reputation":913,"user_id":14644191,"display_name":"Enchantres"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6029,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":72594456,"answer_count":1,"score":1,"last_activity_date":1655056234,"creation_date":1655044739,"question_id":72593180,"body_markdown":"I am trying to implement authentication using JWT in Spring Boot. In the login function I am setting the authentication in the SecurityContextHolder in order to be able to get it when requested. The login functionality works, but when I try to get the current logged user, I am getting unathorized. I debugged and the SecurityContextHolder gives anonymous user. Why is this happening?\r\n\r\nUserController class:\r\n\r\n    @RestController\r\n    @CrossOrigin(origins = &quot;http://localhost:3000&quot;)\r\n    @RequestMapping(&quot;/api&quot;)\r\n    public class UserController {\r\n    \r\n    \t@Autowired\r\n    \tprivate UserService userService;\r\n    \t\r\n    \t@Autowired\r\n    \tprivate CustomAuthenticationManager authenticationManager;\r\n    \t\r\n    \t@Autowired\r\n    \tprivate JwtEncoder jwtEncoder;\r\n    \t\r\n    \t@PostMapping(&quot;/user/login&quot;)\r\n    \t  public ResponseEntity&lt;User&gt; login(@RequestBody @Valid AuthDto request) {\r\n    \t    try {\r\n    \t      Authentication authentication = authenticationManager\r\n    \t        .authenticate(new UsernamePasswordAuthenticationToken(request.getEmail(), request.getPassword()));\r\n    \r\n    \t      String userEmail = (String) authentication.getPrincipal();\r\n    \t      User user = userService.findUserByEmail(userEmail);\r\n    \t      Instant now = Instant.now();\r\n    \t      long expiry = 36000L;\r\n    \r\n    \t      String scope = authentication.getAuthorities().stream()\r\n    \t        .map(GrantedAuthority::getAuthority)\r\n    \t        .collect(joining(&quot; &quot;));\r\n    \r\n    \t      JwtClaimsSet claims = JwtClaimsSet.builder()\r\n    \t        .issuer(&quot;uni.pu&quot;)\r\n    \t        .issuedAt(now)\r\n    \t        .expiresAt(now.plusSeconds(expiry))\r\n    \t        .subject(format(&quot;%s,%s&quot;, user.getId(), user.getEmail()))\r\n    \t        .claim(&quot;roles&quot;, scope)\r\n    \t        .build();\r\n    \r\n    \t      String token = this.jwtEncoder.encode(JwtEncoderParameters.from(claims)).getTokenValue();\r\n    \t      \r\n    \r\n    \t      SecurityContextHolder.getContext().setAuthentication(authentication);\r\n    \r\n    \t      return ResponseEntity.ok()\r\n    \t        .header(HttpHeaders.AUTHORIZATION, token)\r\n    \t        .body(user);\r\n    \t    } catch (BadCredentialsException ex) {\r\n    \t      return ResponseEntity.status(HttpStatus.UNAUTHORIZED).build();\r\n    \t    }\r\n    \t  }\r\n    \t\r\n    \t@GetMapping(&quot;/user/current&quot;)\r\n    \tpublic ResponseEntity&lt;User&gt; getLoggedUser(){\r\n    \t\ttry{\r\n    \t\t\tAuthentication auth = SecurityContextHolder.getContext().getAuthentication();\r\n    \t\t\treturn ResponseEntity.ok()\r\n    \t\t\t        .body((User)auth.getPrincipal());\r\n    \t\t}\r\n    \t\tcatch(Exception e) {\r\n    \t\t    return ResponseEntity.status(HttpStatus.UNAUTHORIZED).build();\r\n    \t\t}\r\n    \t\t \r\n    \t}\r\n    }\r\n\r\nWebSecurityConfig:\r\n\r\n    @EnableWebSecurity\r\n    @EnableGlobalMethodSecurity(securedEnabled = true, jsr250Enabled = true, prePostEnabled = true)\r\n\r\n    public class WebSecurityConfig {\r\n\tprivate static final String[] WHITE_LIST_URLS = {&quot;/api/user/login&quot;, &quot;/api/user/current&quot;};\r\n\r\n\t@Autowired\r\n\tprivate MyUserDetailsService userDetailsService;\r\n\r\n\t@Value(&quot;${jwt.public.key}&quot;)\r\n\tprivate RSAPublicKey rsaPublicKey;\r\n\t@Value(&quot;${jwt.private.key}&quot;)\r\n\tprivate RSAPrivateKey rsaPrivateKey;\r\n\r\n\t@Bean\r\n\tpublic PasswordEncoder encoder() {\r\n\t\treturn new BCryptPasswordEncoder(10);\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic DaoAuthenticationProvider authenticationProvider() {\r\n\t\tDaoAuthenticationProvider authProvider = new DaoAuthenticationProvider();\r\n\t\tauthProvider.setUserDetailsService(userDetailsService);\r\n\t\tauthProvider.setPasswordEncoder(encoder());\r\n\r\n\t\treturn authProvider;\r\n\t}\r\n\r\n\t@Bean\r\n\tSecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n\t\t// Enable CORS and disable CSRF\r\n\t\thttp = http.cors().and().csrf().disable();\r\n\r\n\t\t// Set session management to stateless\r\n\t\thttp = http.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and();\r\n\t\t// Set unauthorized requests exception handler\r\n\t\thttp = http.exceptionHandling(\r\n\t\t\t\t(exceptions) -&gt; exceptions.authenticationEntryPoint(new BearerTokenAuthenticationEntryPoint())\r\n\t\t\t\t\t\t.accessDeniedHandler(new BearerTokenAccessDeniedHandler()));\r\n\r\n\t\thttp = http.authenticationProvider(authenticationProvider());\r\n\t\t\r\n\t\t// Set permissions on endpoints\r\n\t\thttp.authorizeHttpRequests().antMatchers(WHITE_LIST_URLS).permitAll().antMatchers(&quot;/api/**&quot;).authenticated()\r\n\t\t\t\t// Our private endpoints\r\n\t\t\t\t.anyRequest().authenticated()\r\n\t\t\t\t// Set up oauth2 resource server\r\n\t\t\t\t.and().httpBasic(Customizer.withDefaults()).oauth2ResourceServer().jwt();\r\n\t\t\r\n\t\treturn http.build();\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic JwtEncoder jwtEncoder() {\r\n\t\tJWK jwk = new RSAKey.Builder(this.rsaPublicKey).privateKey(this.rsaPrivateKey).build();\r\n\t\tJWKSource&lt;SecurityContext&gt; jwks = new ImmutableJWKSet&lt;&gt;(new JWKSet(jwk));\r\n\t\treturn new NimbusJwtEncoder(jwks);\r\n\t}\r\n\r\n\t// Used by JwtAuthenticationProvider to decode and validate JWT tokens\r\n\t@Bean\r\n\tpublic JwtDecoder jwtDecoder() {\r\n\t\treturn NimbusJwtDecoder.withPublicKey(this.rsaPublicKey).build();\r\n\t}\r\n\r\n\t// Extract authorities from the roles claim\r\n\t@Bean\r\n\tpublic JwtAuthenticationConverter jwtAuthenticationConverter() {\r\n\t\tJwtGrantedAuthoritiesConverter jwtGrantedAuthoritiesConverter = new JwtGrantedAuthoritiesConverter();\r\n\t\tjwtGrantedAuthoritiesConverter.setAuthoritiesClaimName(&quot;roles&quot;);\r\n\t\tjwtGrantedAuthoritiesConverter.setAuthorityPrefix(&quot;ROLE_&quot;);\r\n\r\n\t\tJwtAuthenticationConverter jwtAuthenticationConverter = new JwtAuthenticationConverter();\r\n\t\tjwtAuthenticationConverter.setJwtGrantedAuthoritiesConverter(jwtGrantedAuthoritiesConverter);\r\n\t\treturn jwtAuthenticationConverter;\r\n\t}\r\n\t@Bean\r\n\tpublic CorsFilter corsFilter() {\r\n\t\tUrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n\t\tCorsConfiguration config = new CorsConfiguration();\r\n\t\tconfig.setAllowCredentials(true);\r\n\t\tconfig.addAllowedOrigin(&quot;*&quot;);\r\n\t\tconfig.addAllowedHeader(&quot;*&quot;);\r\n\t\tconfig.addAllowedMethod(&quot;*&quot;);\r\n\t\tsource.registerCorsConfiguration(&quot;/**&quot;, config);\r\n\t\treturn new CorsFilter(source);\r\n\t}\r\n\t\r\n\t@Bean\r\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration authenticationConfiguration)\r\n            throws Exception {\r\n        return authenticationConfiguration.getAuthenticationManager();\r\n    }\r\n\r\n\t@Bean\r\n\tpublic RoleHierarchy roleHierarchy() {\r\n\t\tRoleHierarchyImpl roleHierarchy = new RoleHierarchyImpl();\r\n\t\tString hierarchy = &quot;ROLE_ADMIN &gt; ROLE_INSPECTOR \\n ROLE_INSPECTOR &gt; ROLE_STUDENT&quot;;\r\n\t\troleHierarchy.setHierarchy(hierarchy);\r\n\t\treturn roleHierarchy;\r\n\t}\r\n\r\n}\r\n\r\n","title":"Unable to set logged user from SecurityContextHolder in Spring Boot","body":"<p>I am trying to implement authentication using JWT in Spring Boot. In the login function I am setting the authentication in the SecurityContextHolder in order to be able to get it when requested. The login functionality works, but when I try to get the current logged user, I am getting unathorized. I debugged and the SecurityContextHolder gives anonymous user. Why is this happening?</p>\n<p>UserController class:</p>\n<pre><code>@RestController\n@CrossOrigin(origins = &quot;http://localhost:3000&quot;)\n@RequestMapping(&quot;/api&quot;)\npublic class UserController {\n\n    @Autowired\n    private UserService userService;\n    \n    @Autowired\n    private CustomAuthenticationManager authenticationManager;\n    \n    @Autowired\n    private JwtEncoder jwtEncoder;\n    \n    @PostMapping(&quot;/user/login&quot;)\n      public ResponseEntity&lt;User&gt; login(@RequestBody @Valid AuthDto request) {\n        try {\n          Authentication authentication = authenticationManager\n            .authenticate(new UsernamePasswordAuthenticationToken(request.getEmail(), request.getPassword()));\n\n          String userEmail = (String) authentication.getPrincipal();\n          User user = userService.findUserByEmail(userEmail);\n          Instant now = Instant.now();\n          long expiry = 36000L;\n\n          String scope = authentication.getAuthorities().stream()\n            .map(GrantedAuthority::getAuthority)\n            .collect(joining(&quot; &quot;));\n\n          JwtClaimsSet claims = JwtClaimsSet.builder()\n            .issuer(&quot;uni.pu&quot;)\n            .issuedAt(now)\n            .expiresAt(now.plusSeconds(expiry))\n            .subject(format(&quot;%s,%s&quot;, user.getId(), user.getEmail()))\n            .claim(&quot;roles&quot;, scope)\n            .build();\n\n          String token = this.jwtEncoder.encode(JwtEncoderParameters.from(claims)).getTokenValue();\n          \n\n          SecurityContextHolder.getContext().setAuthentication(authentication);\n\n          return ResponseEntity.ok()\n            .header(HttpHeaders.AUTHORIZATION, token)\n            .body(user);\n        } catch (BadCredentialsException ex) {\n          return ResponseEntity.status(HttpStatus.UNAUTHORIZED).build();\n        }\n      }\n    \n    @GetMapping(&quot;/user/current&quot;)\n    public ResponseEntity&lt;User&gt; getLoggedUser(){\n        try{\n            Authentication auth = SecurityContextHolder.getContext().getAuthentication();\n            return ResponseEntity.ok()\n                    .body((User)auth.getPrincipal());\n        }\n        catch(Exception e) {\n            return ResponseEntity.status(HttpStatus.UNAUTHORIZED).build();\n        }\n         \n    }\n}\n</code></pre>\n<p>WebSecurityConfig:</p>\n<pre><code>@EnableWebSecurity\n@EnableGlobalMethodSecurity(securedEnabled = true, jsr250Enabled = true, prePostEnabled = true)\n\npublic class WebSecurityConfig {\nprivate static final String[] WHITE_LIST_URLS = {&quot;/api/user/login&quot;, &quot;/api/user/current&quot;};\n\n@Autowired\nprivate MyUserDetailsService userDetailsService;\n\n@Value(&quot;${jwt.public.key}&quot;)\nprivate RSAPublicKey rsaPublicKey;\n@Value(&quot;${jwt.private.key}&quot;)\nprivate RSAPrivateKey rsaPrivateKey;\n\n@Bean\npublic PasswordEncoder encoder() {\n    return new BCryptPasswordEncoder(10);\n}\n\n@Bean\npublic DaoAuthenticationProvider authenticationProvider() {\n    DaoAuthenticationProvider authProvider = new DaoAuthenticationProvider();\n    authProvider.setUserDetailsService(userDetailsService);\n    authProvider.setPasswordEncoder(encoder());\n\n    return authProvider;\n}\n\n@Bean\nSecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n    // Enable CORS and disable CSRF\n    http = http.cors().and().csrf().disable();\n\n    // Set session management to stateless\n    http = http.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and();\n    // Set unauthorized requests exception handler\n    http = http.exceptionHandling(\n            (exceptions) -&gt; exceptions.authenticationEntryPoint(new BearerTokenAuthenticationEntryPoint())\n                    .accessDeniedHandler(new BearerTokenAccessDeniedHandler()));\n\n    http = http.authenticationProvider(authenticationProvider());\n    \n    // Set permissions on endpoints\n    http.authorizeHttpRequests().antMatchers(WHITE_LIST_URLS).permitAll().antMatchers(&quot;/api/**&quot;).authenticated()\n            // Our private endpoints\n            .anyRequest().authenticated()\n            // Set up oauth2 resource server\n            .and().httpBasic(Customizer.withDefaults()).oauth2ResourceServer().jwt();\n    \n    return http.build();\n}\n\n@Bean\npublic JwtEncoder jwtEncoder() {\n    JWK jwk = new RSAKey.Builder(this.rsaPublicKey).privateKey(this.rsaPrivateKey).build();\n    JWKSource&lt;SecurityContext&gt; jwks = new ImmutableJWKSet&lt;&gt;(new JWKSet(jwk));\n    return new NimbusJwtEncoder(jwks);\n}\n\n// Used by JwtAuthenticationProvider to decode and validate JWT tokens\n@Bean\npublic JwtDecoder jwtDecoder() {\n    return NimbusJwtDecoder.withPublicKey(this.rsaPublicKey).build();\n}\n\n// Extract authorities from the roles claim\n@Bean\npublic JwtAuthenticationConverter jwtAuthenticationConverter() {\n    JwtGrantedAuthoritiesConverter jwtGrantedAuthoritiesConverter = new JwtGrantedAuthoritiesConverter();\n    jwtGrantedAuthoritiesConverter.setAuthoritiesClaimName(&quot;roles&quot;);\n    jwtGrantedAuthoritiesConverter.setAuthorityPrefix(&quot;ROLE_&quot;);\n\n    JwtAuthenticationConverter jwtAuthenticationConverter = new JwtAuthenticationConverter();\n    jwtAuthenticationConverter.setJwtGrantedAuthoritiesConverter(jwtGrantedAuthoritiesConverter);\n    return jwtAuthenticationConverter;\n}\n@Bean\npublic CorsFilter corsFilter() {\n    UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n    CorsConfiguration config = new CorsConfiguration();\n    config.setAllowCredentials(true);\n    config.addAllowedOrigin(&quot;*&quot;);\n    config.addAllowedHeader(&quot;*&quot;);\n    config.addAllowedMethod(&quot;*&quot;);\n    source.registerCorsConfiguration(&quot;/**&quot;, config);\n    return new CorsFilter(source);\n}\n\n@Bean\npublic AuthenticationManager authenticationManager(AuthenticationConfiguration authenticationConfiguration)\n        throws Exception {\n    return authenticationConfiguration.getAuthenticationManager();\n}\n\n@Bean\npublic RoleHierarchy roleHierarchy() {\n    RoleHierarchyImpl roleHierarchy = new RoleHierarchyImpl();\n    String hierarchy = &quot;ROLE_ADMIN &gt; ROLE_INSPECTOR \\n ROLE_INSPECTOR &gt; ROLE_STUDENT&quot;;\n    roleHierarchy.setHierarchy(hierarchy);\n    return roleHierarchy;\n}\n</code></pre>\n<p>}</p>\n"},{"tags":["java","search","distributed-system","bloom-filter"],"comments":[{"owner":{"account_id":1144419,"reputation":191,"user_id":1232451,"display_name":"Nawras"},"score":0,"creation_date":1563873403,"post_id":50422549,"comment_id":100835505,"body_markdown":"Hey, did you find any workarounds?","body":"Hey, did you find any workarounds?"}],"answers":[{"tags":[],"owner":{"account_id":3433285,"reputation":4199,"user_id":2877029,"accept_rate":62,"display_name":"Viacheslav Shalamov"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1633644730,"creation_date":1526713117,"answer_id":50422675,"question_id":50422549,"body_markdown":"&gt; kept for a couple of days and then discarded\r\n \r\nBloom filter does not support deleting objects, only inserting.  \r\nIf you have multiple bloom filters, you have to query them all to check if one of them contains the object you need.\r\n\r\nBloom filters can be effectively **merged**, if they have the same structure (the same size, the same hash function, etc).\r\n\r\nYou can use this Bloom filter:\r\nhttps://github.com/odnoklassniki/apache-cassandra/blob/master/src/java/org/apache/cassandra/utils/BloomFilter.java\r\n\r\nAnd merge two filters like this:\r\n\r\n    BloomFilter merge(BloomFilter dstFilter, BloomFilter srcFilter) {\r\n        OpenBitSet dst = dstFilter.bitset;\r\n        OpenBitSet src = srcFilter.bitset;\r\n\r\n        for (int i = 0; i &lt; src.getPageCount(); ++i) {\r\n            long[] dstBits = dst.getPage(i);\r\n            long[] srcBits = src.getPage(i);\r\n\r\n            for (int j = 0; j &lt; srcBits.length; ++j) {\r\n                dstBits[j] |= srcBits[j];\r\n            }\r\n            dst.setPage(i, dstBits);\r\n        }\r\n        return dstFilter;\r\n    }\r\n\r\n","title":"Bloom filters in a distributed environment","body":"<blockquote>\n<p>kept for a couple of days and then discarded</p>\n</blockquote>\n<p>Bloom filter does not support deleting objects, only inserting.<br />\nIf you have multiple bloom filters, you have to query them all to check if one of them contains the object you need.</p>\n<p>Bloom filters can be effectively <strong>merged</strong>, if they have the same structure (the same size, the same hash function, etc).</p>\n<p>You can use this Bloom filter:\n<a href=\"https://github.com/odnoklassniki/apache-cassandra/blob/master/src/java/org/apache/cassandra/utils/BloomFilter.java\" rel=\"nofollow noreferrer\">https://github.com/odnoklassniki/apache-cassandra/blob/master/src/java/org/apache/cassandra/utils/BloomFilter.java</a></p>\n<p>And merge two filters like this:</p>\n<pre><code>BloomFilter merge(BloomFilter dstFilter, BloomFilter srcFilter) {\n    OpenBitSet dst = dstFilter.bitset;\n    OpenBitSet src = srcFilter.bitset;\n\n    for (int i = 0; i &lt; src.getPageCount(); ++i) {\n        long[] dstBits = dst.getPage(i);\n        long[] srcBits = src.getPage(i);\n\n        for (int j = 0; j &lt; srcBits.length; ++j) {\n            dstBits[j] |= srcBits[j];\n        }\n        dst.setPage(i, dstBits);\n    }\n    return dstFilter;\n}\n</code></pre>\n"}],"owner":{"account_id":6157062,"reputation":226,"user_id":4859162,"display_name":"zgguy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1965,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":1,"score":7,"last_activity_date":1655055601,"creation_date":1526711957,"question_id":50422549,"body_markdown":"I have a system consisting of a few application instances, written in Java. Requests to them are load balanced for high availability. Every second, hundreds of small chunks of data (each consisting of a few simple strings) are received by this &quot;cluster&quot;, stored in the database, kept for a couple of days and then discarded. Apart from storing this data, the main requirement is to quickly determine if a given value is stored in the database or not. An appropriately indexed and partitioned database table seems suited to the problem and does it&#39;s job well, at least for now. \r\n\r\nThe problem is, about 80% of the searched values are not found because they are not in the database. Therefore I would like to speed things up a bit and make the search faster and less resource-intensive. A bloom filter would be the obvious choice, were it not for the fact that different application instances receive different parts of data and if each application instance has only a part of the data in it&#39;s bloom filter then those bloom filters are useless. \r\n\r\nDo you have any suggestions/ideas on how to solve this problem?\r\n ","title":"Bloom filters in a distributed environment","body":"<p>I have a system consisting of a few application instances, written in Java. Requests to them are load balanced for high availability. Every second, hundreds of small chunks of data (each consisting of a few simple strings) are received by this \"cluster\", stored in the database, kept for a couple of days and then discarded. Apart from storing this data, the main requirement is to quickly determine if a given value is stored in the database or not. An appropriately indexed and partitioned database table seems suited to the problem and does it's job well, at least for now. </p>\n\n<p>The problem is, about 80% of the searched values are not found because they are not in the database. Therefore I would like to speed things up a bit and make the search faster and less resource-intensive. A bloom filter would be the obvious choice, were it not for the fact that different application instances receive different parts of data and if each application instance has only a part of the data in it's bloom filter then those bloom filters are useless. </p>\n\n<p>Do you have any suggestions/ideas on how to solve this problem?</p>\n"},{"tags":["java","apache-spark","apache-spark-sql"],"comments":[{"owner":{"account_id":8490813,"reputation":3810,"user_id":6367213,"display_name":"Janez Kuhar"},"score":0,"creation_date":1655054901,"post_id":72512739,"comment_id":128234342,"body_markdown":"A syntax error has crept into your code when you were copy/pasting. This line is in error: `dr.write().parquet(JSONSAMPLEFILE.parquet &quot;);`.","body":"A syntax error has crept into your code when you were copy/pasting. This line is in error: <code>dr.write().parquet(JSONSAMPLEFILE.parquet &quot;);</code>."},{"owner":{"account_id":8490813,"reputation":3810,"user_id":6367213,"display_name":"Janez Kuhar"},"score":0,"creation_date":1655055013,"post_id":72512739,"comment_id":128234363,"body_markdown":"Have you tried doing what the error message instructs you to do?","body":"Have you tried doing what the error message instructs you to do?"}],"owner":{"account_id":19958886,"reputation":3,"user_id":14626964,"display_name":"speci5"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1655054829,"creation_date":1654485891,"question_id":72512739,"body_markdown":"I am trying to convert JSON files to Parquet files using apache.spark.sql and am running into issues with what I believe is reading JSON files. I have attached my code and pom.xml and the error message below. Any help would be greatly appreciated, thank you.\r\n\r\n```java\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        try {\r\n            File file = new File(&quot;src/main/resources/HadoopResources&quot;);\r\n            System.setProperty(&quot;hadoop.home.dir&quot;, file.getAbsolutePath());\r\n            SparkSession spark = SparkSession\r\n                .builder()\r\n                .appName(&quot;Java Spark SQL basic example&quot;)\r\n                .config(&quot;spark.master&quot;, &quot;local&quot;)\r\n                .getOrCreate();\r\n\r\n            String path = &quot;path\\\\JSONSAMPLEFILE.json&quot;;\r\n            Dataset&lt;Row&gt; dr = spark.read().option(&quot;multiline&quot;, &quot;true&quot;).json(path).cache();\r\n            System.out.println(dr);\r\n            System.out.println(&quot;AFter DR&quot;);\r\n\r\n            dr.show();\r\n            System.out.println(&quot;After Show&quot;);\r\n            dr.write().parquet(JSONSAMPLEFILE.parquet &quot;);\r\n        } catch (Exception exception) {\r\n            System.err.println(exception);\r\n        }\r\n        System.out.println(&quot;End&quot;);\r\n    }\r\n}\r\n```\r\n\r\npom.xml file:\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n  &lt;groupId&gt;org.example&lt;/groupId&gt;\r\n  &lt;artifactId&gt;jPFunc&lt;/artifactId&gt;\r\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\r\n  &lt;properties&gt;\r\n    &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\r\n    &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\r\n  &lt;/properties&gt;\r\n\r\n  &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.fasterxml.jackson.module&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jackson-module-scala_2.11&lt;/artifactId&gt;\r\n      &lt;version&gt;2.8.8&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind --&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt;\r\n      &lt;artifactId&gt;hadoop-common&lt;/artifactId&gt;\r\n      &lt;version&gt;3.3.3&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/com.datastax.spark/spark-cassandra-connector --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.datastax.spark&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spark-cassandra-connector_2.12&lt;/artifactId&gt;\r\n      &lt;version&gt;2.4.3&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spark-sql_2.11&lt;/artifactId&gt; &lt;!-- matching Scala version --&gt;\r\n      &lt;version&gt;2.4.3&lt;/version&gt; &lt;!-- matching Spark Core version --&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spark-core_2.11&lt;/artifactId&gt;\r\n      &lt;version&gt;2.4.3&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\r\n      &lt;artifactId&gt;guava&lt;/artifactId&gt;\r\n      &lt;version&gt;15.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;io.netty&lt;/groupId&gt;\r\n      &lt;artifactId&gt;netty-all&lt;/artifactId&gt;\r\n      &lt;version&gt;4.1.77.Final&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n  &lt;/dependencies&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\n\r\nError Message: \r\n\r\n```none\r\n[_corrupt_record: string]\r\nAFter DR\r\norg.apache.spark.sql.AnalysisException: Since Spark 2.3, the queries from raw JSON/CSV files are disallowed when the\r\nreferenced columns only include the internal corrupt record column\r\n(named _corrupt_record by default). For example:\r\nspark.read.schema(schema).json(file).filter($&quot;_corrupt_record&quot;.isNotNull).count()\r\nand spark.read.schema(schema).json(file).select(&quot;_corrupt_record&quot;).show().\r\nInstead, you can cache or save the parsed results and then send the same query.\r\nFor example, val df = spark.read.schema(schema).json(file).cache() and then\r\ndf.filter($&quot;_corrupt_record&quot;.isNotNull).count().;\r\nEnd\r\n\r\nProcess finished with exit code 0\r\n```\r\n\r\n\r\n","title":"Running Into An Error With Apache.Spark.SQL Trying to Convert JSON to Parquet","body":"<p>I am trying to convert JSON files to Parquet files using apache.spark.sql and am running into issues with what I believe is reading JSON files. I have attached my code and pom.xml and the error message below. Any help would be greatly appreciated, thank you.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Main {\n    public static void main(String[] args) {\n        try {\n            File file = new File(&quot;src/main/resources/HadoopResources&quot;);\n            System.setProperty(&quot;hadoop.home.dir&quot;, file.getAbsolutePath());\n            SparkSession spark = SparkSession\n                .builder()\n                .appName(&quot;Java Spark SQL basic example&quot;)\n                .config(&quot;spark.master&quot;, &quot;local&quot;)\n                .getOrCreate();\n\n            String path = &quot;path\\\\JSONSAMPLEFILE.json&quot;;\n            Dataset&lt;Row&gt; dr = spark.read().option(&quot;multiline&quot;, &quot;true&quot;).json(path).cache();\n            System.out.println(dr);\n            System.out.println(&quot;AFter DR&quot;);\n\n            dr.show();\n            System.out.println(&quot;After Show&quot;);\n            dr.write().parquet(JSONSAMPLEFILE.parquet &quot;);\n        } catch (Exception exception) {\n            System.err.println(exception);\n        }\n        System.out.println(&quot;End&quot;);\n    }\n}\n</code></pre>\n<p>pom.xml file:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;org.example&lt;/groupId&gt;\n  &lt;artifactId&gt;jPFunc&lt;/artifactId&gt;\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n  &lt;properties&gt;\n    &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\n  &lt;/properties&gt;\n\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.fasterxml.jackson.module&lt;/groupId&gt;\n      &lt;artifactId&gt;jackson-module-scala_2.11&lt;/artifactId&gt;\n      &lt;version&gt;2.8.8&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind --&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt;\n      &lt;artifactId&gt;hadoop-common&lt;/artifactId&gt;\n      &lt;version&gt;3.3.3&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/com.datastax.spark/spark-cassandra-connector --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.datastax.spark&lt;/groupId&gt;\n      &lt;artifactId&gt;spark-cassandra-connector_2.12&lt;/artifactId&gt;\n      &lt;version&gt;2.4.3&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\n      &lt;artifactId&gt;spark-sql_2.11&lt;/artifactId&gt; &lt;!-- matching Scala version --&gt;\n      &lt;version&gt;2.4.3&lt;/version&gt; &lt;!-- matching Spark Core version --&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\n      &lt;artifactId&gt;spark-core_2.11&lt;/artifactId&gt;\n      &lt;version&gt;2.4.3&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n      &lt;artifactId&gt;guava&lt;/artifactId&gt;\n      &lt;version&gt;15.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.netty&lt;/groupId&gt;\n      &lt;artifactId&gt;netty-all&lt;/artifactId&gt;\n      &lt;version&gt;4.1.77.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n<p>Error Message:</p>\n<pre class=\"lang-none prettyprint-override\"><code>[_corrupt_record: string]\nAFter DR\norg.apache.spark.sql.AnalysisException: Since Spark 2.3, the queries from raw JSON/CSV files are disallowed when the\nreferenced columns only include the internal corrupt record column\n(named _corrupt_record by default). For example:\nspark.read.schema(schema).json(file).filter($&quot;_corrupt_record&quot;.isNotNull).count()\nand spark.read.schema(schema).json(file).select(&quot;_corrupt_record&quot;).show().\nInstead, you can cache or save the parsed results and then send the same query.\nFor example, val df = spark.read.schema(schema).json(file).cache() and then\ndf.filter($&quot;_corrupt_record&quot;.isNotNull).count().;\nEnd\n\nProcess finished with exit code 0\n</code></pre>\n"},{"tags":["java","javafx","colors","background-color"],"comments":[{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1655059544,"post_id":72594382,"comment_id":128235299,"body_markdown":"https://stackoverflow.com/questions/49149502/button-color-change-in-javafx","body":"<a href=\"https://stackoverflow.com/questions/49149502/button-color-change-in-javafx\" title=\"button color change in javafx\">stackoverflow.com/questions/49149502/&hellip;</a>"},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":3,"creation_date":1655060045,"post_id":72594382,"comment_id":128235389,"body_markdown":"&quot;_but none of them worked_&quot; – Then you should provide a [mre] demonstrating what didn&#39;t work (by [edit]ing your question). Clearly there are ways to change the background color of a button, otherwise those approaches you found while researching would not have worked for everyone else. This means there must be a mistake in your code that we could possibly help you with—if we could see it.","body":"&quot;<i>but none of them worked</i>&quot; – Then you should provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> demonstrating what didn&#39;t work (by <a href=\"https://stackoverflow.com/posts/72594382/edit\">edit</a>ing your question). Clearly there are ways to change the background color of a button, otherwise those approaches you found while researching would not have worked for everyone else. This means there must be a mistake in your code that we could possibly help you with—if we could see it."}],"answers":[{"tags":[],"owner":{"account_id":12439965,"reputation":136,"user_id":9058664,"display_name":"Edd"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1655054679,"creation_date":1655054679,"answer_id":72594415,"question_id":72594382,"body_markdown":"The following code will set a buttons color to red:\r\n\r\n    Button button = new Button(&quot;My Button&quot;);\r\n    button.setStyle(&quot;-fx-background-color: #ff0000; &quot;);\r\n\r\nIf you need any more help with buttons you can refer to the documentation here:\r\nhttps://docs.oracle.com/javase/8/javafx/api/javafx/scene/Node.html#setStyle-java.lang.String-\r\n","title":"Javafx - Changing the color of a buttom","body":"<p>The following code will set a buttons color to red:</p>\n<pre><code>Button button = new Button(&quot;My Button&quot;);\nbutton.setStyle(&quot;-fx-background-color: #ff0000; &quot;);\n</code></pre>\n<p>If you need any more help with buttons you can refer to the documentation here:\n<a href=\"https://docs.oracle.com/javase/8/javafx/api/javafx/scene/Node.html#setStyle-java.lang.String-\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/javafx/api/javafx/scene/Node.html#setStyle-java.lang.String-</a></p>\n"}],"owner":{"account_id":25538570,"reputation":1,"user_id":19325131,"display_name":"asdas"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1655097444,"answer_count":1,"score":-2,"last_activity_date":1655054679,"creation_date":1655054336,"question_id":72594382,"body_markdown":"I am a java beginner and i tried to lock it up and tried diffrent command but none of them worked.\r\n\r\nI want to change the Background Color of Button for example from red to green.","title":"Javafx - Changing the color of a buttom","body":"<p>I am a java beginner and i tried to lock it up and tried diffrent command but none of them worked.</p>\n<p>I want to change the Background Color of Button for example from red to green.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":1,"creation_date":1481535077,"post_id":41097688,"comment_id":69399740,"body_markdown":"Does this here https://perlgeek.de/en/article/set-up-a-clean-utf8-environment help in any way? Meaning: you sure that the bash side of things works as you expect it to?","body":"Does this here <a href=\"https://perlgeek.de/en/article/set-up-a-clean-utf8-environment\" rel=\"nofollow noreferrer\">perlgeek.de/en/article/set-up-a-clean-utf8-environment</a> help in any way? Meaning: you sure that the bash side of things works as you expect it to?"},{"owner":{"account_id":9448541,"reputation":561,"user_id":7026316,"accept_rate":60,"display_name":"Baby.zhou"},"score":0,"creation_date":1481535665,"post_id":41097688,"comment_id":69400056,"body_markdown":"@GhostCat,I run the app in `docker`,the command runs well by shell directly,but code garbled.","body":"@GhostCat,I run the app in <code>docker</code>,the command runs well by shell directly,but code garbled."},{"owner":{"account_id":4787547,"reputation":5568,"user_id":3867574,"accept_rate":43,"display_name":"Serg M Ten"},"score":1,"creation_date":1481535960,"post_id":41097688,"comment_id":69400236,"body_markdown":"Possible duplicate of [Setting the default Java character encoding?](http://stackoverflow.com/questions/361975/setting-the-default-java-character-encoding)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/361975/setting-the-default-java-character-encoding\">Setting the default Java character encoding?</a>"},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1481535986,"post_id":41097688,"comment_id":69400256,"body_markdown":"Just in case you don&#39;t get a good answer here; there would be a simple workaround: you could write the SQL statement into some file (which should definitely work with UTF-8) and have your application read that file; instead of passing stuff directly. But of course, that is more like a dirty little hack.","body":"Just in case you don&#39;t get a good answer here; there would be a simple workaround: you could write the SQL statement into some file (which should definitely work with UTF-8) and have your application read that file; instead of passing stuff directly. But of course, that is more like a dirty little hack."},{"owner":{"account_id":1032460,"reputation":456,"user_id":1040506,"accept_rate":54,"display_name":"vahid"},"score":0,"creation_date":1481536247,"post_id":41097688,"comment_id":69400420,"body_markdown":"@Baby.zhou set locale variable in shell environment correctly.","body":"@Baby.zhou set locale variable in shell environment correctly."},{"owner":{"account_id":9448541,"reputation":561,"user_id":7026316,"accept_rate":60,"display_name":"Baby.zhou"},"score":0,"creation_date":1481537976,"post_id":41097688,"comment_id":69401397,"body_markdown":"@SergioMontoro,I set `-Dfile.encoding=UTF-8`,but it is no use.","body":"@SergioMontoro,I set <code>-Dfile.encoding=UTF-8</code>,but it is no use."},{"owner":{"account_id":4787547,"reputation":5568,"user_id":3867574,"accept_rate":43,"display_name":"Serg M Ten"},"score":0,"creation_date":1481551820,"post_id":41097688,"comment_id":69409526,"body_markdown":"You may try to call [locale](https://www.cyberciti.biz/faq/how-to-set-locales-i18n-on-a-linux-unix/) from exec() but since the problem is within the string of your SQL query I think you&#39;d better encode the string with escaped character codes like &quot;\\\\uXXXX&quot; discussion [here](http://stackoverflow.com/questions/13287145/mysql-querying-for-unicode-entities) Also more info about encoding SQL at [OWASP](https://www.owasp.org/index.php/SQL_Injection_Prevention_Cheat_Sheet)","body":"You may try to call <a href=\"https://www.cyberciti.biz/faq/how-to-set-locales-i18n-on-a-linux-unix/\" rel=\"nofollow noreferrer\">locale</a> from exec() but since the problem is within the string of your SQL query I think you&#39;d better encode the string with escaped character codes like &quot;\\\\uXXXX&quot; discussion <a href=\"http://stackoverflow.com/questions/13287145/mysql-querying-for-unicode-entities\">here</a> Also more info about encoding SQL at <a href=\"https://www.owasp.org/index.php/SQL_Injection_Prevention_Cheat_Sheet\" rel=\"nofollow noreferrer\">OWASP</a>"}],"answers":[{"tags":[],"owner":{"account_id":7413926,"reputation":5474,"user_id":11374957,"display_name":"Kaan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655054471,"creation_date":1655054471,"answer_id":72594395,"question_id":41097688,"body_markdown":"&gt; _I found out that there is no use of new String(command.getBytes(),&quot;utf-8&quot;)._\r\n\r\nThis isn&#39;t accurate. Below is an example showing different character sets (ASCII and UTF-8) to run the same command using [`exec()`][1], and the output is pretty clearly affected by the character set.\r\n\r\nThis program:\r\n* takes a single input parameter,\r\n* runs `touch` to create two files at `/tmp/charset-test/` using that input value in the filename\r\n* further, if the input is a UTF-8 value, it should create a file with the UTF-8 value in the filename\r\n```\r\nimport java.io.IOException;\r\nimport java.nio.charset.Charset;\r\nimport java.nio.charset.StandardCharsets;\r\n\r\npublic class CharsetTest {\r\n\r\n    public static void main(String[] args) throws IOException {\r\n        String input = args[0];\r\n        System.out.println(&quot;input: &quot; + input);\r\n\r\n        Charset[] charsets = {StandardCharsets.US_ASCII, StandardCharsets.UTF_8};\r\n        for (Charset charset : charsets) {\r\n            String command = &quot;touch /tmp/charset-test/&quot; + input + &quot;-&quot; + charset.toString() + &quot;.txt&quot;;\r\n            System.out.println(&quot;command: &quot; + command);\r\n\r\n            // this is identical to your code, but:\r\n            //  - use Charsets instead of &quot;utf-8&quot; so I can interate; &quot;utf-8&quot; also works\r\n            //  - skip assigning to &quot;Process p&quot;\r\n            Runtime.getRuntime().exec(new String[]{\r\n                    &quot;bash&quot;, &quot;-c&quot;, new String(command.getBytes(), charset)\r\n            });\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nIf I run with ASCII input `&quot;simple&quot;`, it creates two files, one for each charset: `&quot;simple-US-ASCII.txt&quot;` and `&quot;simple-UTF-8.txt&quot;`. This isn&#39;t all that interesting, but shows both charsets work normally with basic (ASCII) input.\r\n```\r\n% rm /tmp/charset-test/*.txt &amp;&amp; java CharsetTest.java simple\r\ninput: simple\r\ncommand: touch /tmp/charset-test/simple-US-ASCII.txt\r\ncommand: touch /tmp/charset-test/simple-UTF-8.txt\r\n\r\n% ls /tmp/charset-test\r\nsimple-US-ASCII.txt\tsimple-UTF-8.txt\r\n```\r\n\r\nIf input changes to `&quot;我&quot;`, then the ASCII charset handling results in the same &quot;garbled&quot; output you describe (`&quot;���-US-ASCII.txt&quot;`), whereas the UTF-8 version looks good (`&quot;我-UTF-8.txt&quot;`):\r\n```\r\n% rm /tmp/charset-test/*.txt &amp;&amp; java CharsetTest.java 我    \r\ninput: 我\r\ncommand: touch /tmp/charset-test/我-US-ASCII.txt\r\ncommand: touch /tmp/charset-test/我-UTF-8.txt\r\n\r\n% ls /tmp/charset-test\r\n我-UTF-8.txt\t\t���-US-ASCII.txt\r\n```\r\n\r\nAll of this to say: your code looks fine, it&#39;s doing the right thing to pass the charset to the `Runtime.exec()` call. I can&#39;t say what the proper solution would be, but it&#39;s likely something with the environment (not your code).\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/lang/Runtime.html#exec-java.lang.String:A-","title":"How to set charset of Runtime.getRuntime().exec?","body":"<blockquote>\n<p><em>I found out that there is no use of new String(command.getBytes(),&quot;utf-8&quot;).</em></p>\n</blockquote>\n<p>This isn't accurate. Below is an example showing different character sets (ASCII and UTF-8) to run the same command using <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Runtime.html#exec-java.lang.String:A-\" rel=\"nofollow noreferrer\"><code>exec()</code></a>, and the output is pretty clearly affected by the character set.</p>\n<p>This program:</p>\n<ul>\n<li>takes a single input parameter,</li>\n<li>runs <code>touch</code> to create two files at <code>/tmp/charset-test/</code> using that input value in the filename</li>\n<li>further, if the input is a UTF-8 value, it should create a file with the UTF-8 value in the filename</li>\n</ul>\n<pre><code>import java.io.IOException;\nimport java.nio.charset.Charset;\nimport java.nio.charset.StandardCharsets;\n\npublic class CharsetTest {\n\n    public static void main(String[] args) throws IOException {\n        String input = args[0];\n        System.out.println(&quot;input: &quot; + input);\n\n        Charset[] charsets = {StandardCharsets.US_ASCII, StandardCharsets.UTF_8};\n        for (Charset charset : charsets) {\n            String command = &quot;touch /tmp/charset-test/&quot; + input + &quot;-&quot; + charset.toString() + &quot;.txt&quot;;\n            System.out.println(&quot;command: &quot; + command);\n\n            // this is identical to your code, but:\n            //  - use Charsets instead of &quot;utf-8&quot; so I can interate; &quot;utf-8&quot; also works\n            //  - skip assigning to &quot;Process p&quot;\n            Runtime.getRuntime().exec(new String[]{\n                    &quot;bash&quot;, &quot;-c&quot;, new String(command.getBytes(), charset)\n            });\n        }\n    }\n}\n</code></pre>\n<p>If I run with ASCII input <code>&quot;simple&quot;</code>, it creates two files, one for each charset: <code>&quot;simple-US-ASCII.txt&quot;</code> and <code>&quot;simple-UTF-8.txt&quot;</code>. This isn't all that interesting, but shows both charsets work normally with basic (ASCII) input.</p>\n<pre><code>% rm /tmp/charset-test/*.txt &amp;&amp; java CharsetTest.java simple\ninput: simple\ncommand: touch /tmp/charset-test/simple-US-ASCII.txt\ncommand: touch /tmp/charset-test/simple-UTF-8.txt\n\n% ls /tmp/charset-test\nsimple-US-ASCII.txt simple-UTF-8.txt\n</code></pre>\n<p>If input changes to <code>&quot;我&quot;</code>, then the ASCII charset handling results in the same &quot;garbled&quot; output you describe (<code>&quot;���-US-ASCII.txt&quot;</code>), whereas the UTF-8 version looks good (<code>&quot;我-UTF-8.txt&quot;</code>):</p>\n<pre><code>% rm /tmp/charset-test/*.txt &amp;&amp; java CharsetTest.java 我    \ninput: 我\ncommand: touch /tmp/charset-test/我-US-ASCII.txt\ncommand: touch /tmp/charset-test/我-UTF-8.txt\n\n% ls /tmp/charset-test\n我-UTF-8.txt     ���-US-ASCII.txt\n</code></pre>\n<p>All of this to say: your code looks fine, it's doing the right thing to pass the charset to the <code>Runtime.exec()</code> call. I can't say what the proper solution would be, but it's likely something with the environment (not your code).</p>\n"}],"owner":{"account_id":9448541,"reputation":561,"user_id":7026316,"accept_rate":60,"display_name":"Baby.zhou"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1502,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1655054471,"creation_date":1481534933,"question_id":41097688,"body_markdown":"Here is my code:\r\n\r\n    Process p = Runtime.getRuntime().exec(new String[]{&quot;bash&quot;,&quot;-c&quot;,new String(command.getBytes(),&quot;utf-8&quot;)});\r\n\r\nI found out that there is no use of `new String(command.getBytes(),&quot;utf-8&quot;)`.\r\n\r\nHow can I to set charset?\r\n\r\nMy app is a `spring boot` application. \r\n\r\nThe detail command is \r\n\r\n    ./xxx.jar --execute &quot;select * from xxx where a = `我`&quot; \r\n\r\nWhen I execute the command directly in the shell, it runs well, but the java code gets garbled.\r\n\r\nI set `-Dfile.encoding=UTF-8`,but it is no use for me. Why?","title":"How to set charset of Runtime.getRuntime().exec?","body":"<p>Here is my code:</p>\n\n<pre><code>Process p = Runtime.getRuntime().exec(new String[]{\"bash\",\"-c\",new String(command.getBytes(),\"utf-8\")});\n</code></pre>\n\n<p>I found out that there is no use of <code>new String(command.getBytes(),\"utf-8\")</code>.</p>\n\n<p>How can I to set charset?</p>\n\n<p>My app is a <code>spring boot</code> application. </p>\n\n<p>The detail command is </p>\n\n<pre><code>./xxx.jar --execute \"select * from xxx where a = `我`\" \n</code></pre>\n\n<p>When I execute the command directly in the shell, it runs well, but the java code gets garbled.</p>\n\n<p>I set <code>-Dfile.encoding=UTF-8</code>,but it is no use for me. Why?</p>\n"},{"tags":["java","spring","rest","maven","jax-rs"],"comments":[{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1655133522,"post_id":72585719,"comment_id":128253050,"body_markdown":"`javax.xml.bind.annotation.XmlRootElement;` You&#39;re using `javax`. Should be `jakarta`","body":"<code>javax.xml.bind.annotation.XmlRootElement;</code> You&#39;re using <code>javax</code>. Should be <code>jakarta</code>"},{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1655133600,"post_id":72585719,"comment_id":128253097,"body_markdown":"If you are using a Jakarta container, you should remove anything (dependencies) that has `javax` in the name. It will save you a lot of headache","body":"If you are using a Jakarta container, you should remove anything (dependencies) that has <code>javax</code> in the name. It will save you a lot of headache"}],"owner":{"account_id":13909837,"reputation":1,"user_id":10043312,"display_name":"Surender"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":127,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1655054209,"creation_date":1654962060,"question_id":72585719,"body_markdown":"I am trying to execute a very simple REST API using JAXrs. I have been following JetBrains tutorial and I&#39;m stuck at the point where the API needs to return Reponse/XML. The java version used here is 1.8 and the Tomcat is 10.0.\r\n\r\nI Guess there is some dependencies missing. Can someone help?\r\n\r\nHere are my code snippets:\r\n`pom.xml`\r\n\r\n```xml\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;org.surender&lt;/groupId&gt;\r\n    &lt;artifactId&gt;messenger&lt;/artifactId&gt;\r\n    &lt;packaging&gt;war&lt;/packaging&gt;\r\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    &lt;name&gt;messenger&lt;/name&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;finalName&gt;messenger&lt;/finalName&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.2.2&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.8.1&lt;/version&gt;\r\n                &lt;inherited&gt;true&lt;/inherited&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;1.8&lt;/source&gt;\r\n                    &lt;target&gt;1.8&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n    &lt;dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.glassfish.jersey&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jersey-bom&lt;/artifactId&gt;\r\n                &lt;version&gt;${jersey.version}&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n                &lt;scope&gt;import&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;jakarta.servlet&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jakarta.servlet-api&lt;/artifactId&gt;\r\n                &lt;version&gt;5.0.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;!-- https://mvnrepository.com/artifact/javax.activation/activation --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax.activation&lt;/groupId&gt;\r\n                &lt;artifactId&gt;activation&lt;/artifactId&gt;\r\n                &lt;version&gt;1.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n\r\n            &lt;!-- https://mvnrepository.com/artifact/org.glassfish.jaxb/jaxb-runtime --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\r\n                &lt;version&gt;2.3.0-b170127.1453&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    &lt;/dependencyManagement&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.glassfish.jersey.containers&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jersey-container-servlet-core&lt;/artifactId&gt;\r\n            &lt;!-- use the following artifactId if you don&#39;t need servlet 2.x compatibility --&gt;\r\n            &lt;!-- artifactId&gt;jersey-container-servlet&lt;/artifactId --&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.glassfish.jersey.inject&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jersey-hk2&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.glassfish.jersey.media&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jersey-media-jaxb&lt;/artifactId&gt;\r\n            &lt;version&gt;3.0.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\r\n            &lt;version&gt;4.0.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\r\n            &lt;version&gt;4.0.0&lt;/version&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        \r\n\r\n        &lt;!-- uncomment this to get JSON support &lt;dependency&gt; &lt;groupId&gt;org.glassfish.jersey.media&lt;/groupId&gt; \r\n            &lt;artifactId&gt;jersey-media-json-binding&lt;/artifactId&gt; &lt;/dependency&gt; --&gt;\r\n    &lt;/dependencies&gt;\r\n    &lt;properties&gt;\r\n        &lt;jersey.version&gt;3.1.0-M2&lt;/jersey.version&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;/properties&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nModel Class\r\n```java\r\npackage org.surender.model;\r\n\r\nimport javax.xml.bind.annotation.XmlRootElement;\r\n\r\nimport jakarta.xml.bind.annotation.XmlElement;\r\n\r\n@XmlRootElement(name = &quot;Surender&quot;)\r\npublic class MessagesModel {\r\n\r\n    @XmlElement(name = &quot;Message ID&quot;)\r\n    public int messageId;\r\n    public String messageTxt;\r\n    public String messageLike;\r\n    public String messageComment;\r\n    \r\n    \r\n    public MessagesModel(int messageId, String messageTxt, String messageLike, String messageComment) {\r\n        super();\r\n        System.out.println(&quot;Objects getting created&quot;);\r\n        this.messageId = messageId;\r\n        this.messageTxt = messageTxt;\r\n        this.messageLike = messageLike;\r\n        this.messageComment = messageComment;\r\n    }\r\n    \r\n    public MessagesModel() {\r\n        \r\n    }\r\n\r\n    public int getMessageId() {\r\n        return messageId;\r\n    }\r\n\r\n\r\n    public void setMessageId(int messageId) {\r\n        this.messageId = messageId;\r\n    }\r\n\r\n\r\n    public String getMessageTxt() {\r\n        return messageTxt;\r\n    }\r\n\r\n\r\n    public void setMessageTxt(String messageTxt) {\r\n        this.messageTxt = messageTxt;\r\n    }\r\n\r\n\r\n    public String getMessageLike() {\r\n        return messageLike;\r\n    }\r\n\r\n\r\n    public void setMessageLike(String messageLike) {\r\n        this.messageLike = messageLike;\r\n    }\r\n\r\n\r\n    public String getMessageComment() {\r\n        return messageComment;\r\n    }\r\n\r\n\r\n    public void setMessageComment(String messageComment) {\r\n        this.messageComment = messageComment;\r\n    }\r\n    \r\n}\r\n```\r\nMessage Service\r\n```java\r\npackage org.surender.service;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport org.surender.model.MessagesModel;\r\n\r\npublic class MessagesService {\r\n    public List&lt;MessagesModel&gt; getMessages() {\r\n        List&lt;MessagesModel&gt; messagesList = new ArrayList&lt;MessagesModel&gt;();\r\n        messagesList.add(new MessagesModel(1,&quot;Hey There !&quot;,&quot;2&quot;,&quot;Hello&quot;));\r\n        messagesList.add(new MessagesModel(1,&quot;Hola Amigo!&quot;,&quot;2&quot;,&quot;Hello&quot;));\r\n        return messagesList;\r\n    }\r\n    \r\n    public MessagesService() {\r\n    }\r\n}\r\n```\r\n`MessageResource`\r\n```java\r\npackage org.surender.messenger;\r\n    \r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport org.surender.model.MessagesModel;\r\nimport org.surender.service.MessagesService;\r\n\r\nimport jakarta.ws.rs.GET;\r\nimport jakarta.ws.rs.Path;\r\nimport jakarta.ws.rs.Produces;\r\nimport jakarta.ws.rs.core.GenericEntity;\r\nimport jakarta.ws.rs.core.MediaType;\r\nimport jakarta.ws.rs.core.Response;\r\n\r\n@Path(&quot;messages&quot;)\r\npublic class Messages {\r\n    MessagesService msgService = new MessagesService();\r\n   \r\n    @GET\r\n    @Produces(MediaType.APPLICATION_XML)\r\n    public Response getMessages() {\r\n        System.out.println(&quot;Hi... I&#39;m here one&quot;);\r\n        GenericEntity&lt;List&lt;MessagesModel&gt;&gt; entity = new GenericEntity&lt;List&lt;MessagesModel&gt;&gt;(msgService.getMessages()) {};\r\n        return Response.ok(entity).build();\r\n    }\r\n}\r\n```","title":"MessageMessageBodyWriter not found for media type=application/xml, type=class java.util.ArrayList","body":"<p>I am trying to execute a very simple REST API using JAXrs. I have been following JetBrains tutorial and I'm stuck at the point where the API needs to return Reponse/XML. The java version used here is 1.8 and the Tomcat is 10.0.</p>\n<p>I Guess there is some dependencies missing. Can someone help?</p>\n<p>Here are my code snippets:\n<code>pom.xml</code></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;org.surender&lt;/groupId&gt;\n    &lt;artifactId&gt;messenger&lt;/artifactId&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;messenger&lt;/name&gt;\n\n    &lt;build&gt;\n        &lt;finalName&gt;messenger&lt;/finalName&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.2.2&lt;/version&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.8.1&lt;/version&gt;\n                &lt;inherited&gt;true&lt;/inherited&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;1.8&lt;/source&gt;\n                    &lt;target&gt;1.8&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.glassfish.jersey&lt;/groupId&gt;\n                &lt;artifactId&gt;jersey-bom&lt;/artifactId&gt;\n                &lt;version&gt;${jersey.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;jakarta.servlet&lt;/groupId&gt;\n                &lt;artifactId&gt;jakarta.servlet-api&lt;/artifactId&gt;\n                &lt;version&gt;5.0.0&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;!-- https://mvnrepository.com/artifact/javax.activation/activation --&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;javax.activation&lt;/groupId&gt;\n                &lt;artifactId&gt;activation&lt;/artifactId&gt;\n                &lt;version&gt;1.1&lt;/version&gt;\n            &lt;/dependency&gt;\n\n            &lt;!-- https://mvnrepository.com/artifact/org.glassfish.jaxb/jaxb-runtime --&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\n                &lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\n                &lt;version&gt;2.3.0-b170127.1453&lt;/version&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.glassfish.jersey.containers&lt;/groupId&gt;\n            &lt;artifactId&gt;jersey-container-servlet-core&lt;/artifactId&gt;\n            &lt;!-- use the following artifactId if you don't need servlet 2.x compatibility --&gt;\n            &lt;!-- artifactId&gt;jersey-container-servlet&lt;/artifactId --&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.glassfish.jersey.inject&lt;/groupId&gt;\n            &lt;artifactId&gt;jersey-hk2&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.glassfish.jersey.media&lt;/groupId&gt;\n            &lt;artifactId&gt;jersey-media-jaxb&lt;/artifactId&gt;\n            &lt;version&gt;3.0.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\n            &lt;version&gt;4.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\n            &lt;version&gt;4.0.0&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        \n\n        &lt;!-- uncomment this to get JSON support &lt;dependency&gt; &lt;groupId&gt;org.glassfish.jersey.media&lt;/groupId&gt; \n            &lt;artifactId&gt;jersey-media-json-binding&lt;/artifactId&gt; &lt;/dependency&gt; --&gt;\n    &lt;/dependencies&gt;\n    &lt;properties&gt;\n        &lt;jersey.version&gt;3.1.0-M2&lt;/jersey.version&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n&lt;/project&gt;\n</code></pre>\n<p>Model Class</p>\n<pre class=\"lang-java prettyprint-override\"><code>package org.surender.model;\n\nimport javax.xml.bind.annotation.XmlRootElement;\n\nimport jakarta.xml.bind.annotation.XmlElement;\n\n@XmlRootElement(name = &quot;Surender&quot;)\npublic class MessagesModel {\n\n    @XmlElement(name = &quot;Message ID&quot;)\n    public int messageId;\n    public String messageTxt;\n    public String messageLike;\n    public String messageComment;\n    \n    \n    public MessagesModel(int messageId, String messageTxt, String messageLike, String messageComment) {\n        super();\n        System.out.println(&quot;Objects getting created&quot;);\n        this.messageId = messageId;\n        this.messageTxt = messageTxt;\n        this.messageLike = messageLike;\n        this.messageComment = messageComment;\n    }\n    \n    public MessagesModel() {\n        \n    }\n\n    public int getMessageId() {\n        return messageId;\n    }\n\n\n    public void setMessageId(int messageId) {\n        this.messageId = messageId;\n    }\n\n\n    public String getMessageTxt() {\n        return messageTxt;\n    }\n\n\n    public void setMessageTxt(String messageTxt) {\n        this.messageTxt = messageTxt;\n    }\n\n\n    public String getMessageLike() {\n        return messageLike;\n    }\n\n\n    public void setMessageLike(String messageLike) {\n        this.messageLike = messageLike;\n    }\n\n\n    public String getMessageComment() {\n        return messageComment;\n    }\n\n\n    public void setMessageComment(String messageComment) {\n        this.messageComment = messageComment;\n    }\n    \n}\n</code></pre>\n<p>Message Service</p>\n<pre class=\"lang-java prettyprint-override\"><code>package org.surender.service;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport org.surender.model.MessagesModel;\n\npublic class MessagesService {\n    public List&lt;MessagesModel&gt; getMessages() {\n        List&lt;MessagesModel&gt; messagesList = new ArrayList&lt;MessagesModel&gt;();\n        messagesList.add(new MessagesModel(1,&quot;Hey There !&quot;,&quot;2&quot;,&quot;Hello&quot;));\n        messagesList.add(new MessagesModel(1,&quot;Hola Amigo!&quot;,&quot;2&quot;,&quot;Hello&quot;));\n        return messagesList;\n    }\n    \n    public MessagesService() {\n    }\n}\n</code></pre>\n<p><code>MessageResource</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>package org.surender.messenger;\n    \nimport java.util.ArrayList;\nimport java.util.List;\n\nimport org.surender.model.MessagesModel;\nimport org.surender.service.MessagesService;\n\nimport jakarta.ws.rs.GET;\nimport jakarta.ws.rs.Path;\nimport jakarta.ws.rs.Produces;\nimport jakarta.ws.rs.core.GenericEntity;\nimport jakarta.ws.rs.core.MediaType;\nimport jakarta.ws.rs.core.Response;\n\n@Path(&quot;messages&quot;)\npublic class Messages {\n    MessagesService msgService = new MessagesService();\n   \n    @GET\n    @Produces(MediaType.APPLICATION_XML)\n    public Response getMessages() {\n        System.out.println(&quot;Hi... I'm here one&quot;);\n        GenericEntity&lt;List&lt;MessagesModel&gt;&gt; entity = new GenericEntity&lt;List&lt;MessagesModel&gt;&gt;(msgService.getMessages()) {};\n        return Response.ok(entity).build();\n    }\n}\n</code></pre>\n"},{"tags":["java","jetty"],"comments":[{"owner":{"account_id":4024282,"reputation":231,"user_id":4592648,"display_name":"Monday Fatigue"},"score":0,"creation_date":1638531525,"post_id":56811706,"comment_id":124119253,"body_markdown":"Refer to this article: https://www.baeldung.com/spring-reading-httpservletrequest-multiple-times\nJust wrap all requests with filter and all classes which read request body in any way will use cached body data.","body":"Refer to this article: <a href=\"https://www.baeldung.com/spring-reading-httpservletrequest-multiple-times\" rel=\"nofollow noreferrer\">baeldung.com/spring-reading-httpservletrequest-multiple-time&zwnj;&#8203;s</a> Just wrap all requests with filter and all classes which read request body in any way will use cached body data."},{"owner":{"account_id":4024282,"reputation":231,"user_id":4592648,"display_name":"Monday Fatigue"},"score":0,"creation_date":1638964737,"post_id":56811706,"comment_id":124226045,"body_markdown":"I could not read request parameters after the body is read, so I had to cache parameter map when instantiating.","body":"I could not read request parameters after the body is read, so I had to cache parameter map when instantiating."}],"answers":[{"tags":[],"owner":{"account_id":6302434,"reputation":5409,"user_id":4896651,"accept_rate":75,"display_name":"Shadov"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1655053712,"creation_date":1561747867,"answer_id":56811917,"question_id":56811706,"body_markdown":"&gt; I know it is not a good idea to do it but I have encountered a scenario in which if I don&#39;t clone it then I need to do more refactors on the code and revising many unit tests.\r\n\r\nPlease, be advised, that rigid tests are a sign of improper testing and are a problem in and of themselves. They will cause many troubles, including troubles with refactoring, which you experience now, when you can&#39;t achieve your goal. The tests hold you back, because they were improperly written, to such a degree that you no longer see refactor as a viable solution. The best thing you should do, is update your tests so that refactors like that are possible.\r\n\r\nAs to the cloning, instances of this class were not meant to be cloned or copied, you will run into more problems trying to do this than you have now, and at least now you know what your problems are (unit tests and refactoring). The things that could happen with semi-cloned HttpRequest accessed from multiple threads would make you say `should have just fixed those tests back then`.\r\n\r\n","title":"How to deep copy (clone) HttpServletRequest?","body":"<blockquote>\n<p>I know it is not a good idea to do it but I have encountered a scenario in which if I don't clone it then I need to do more refactors on the code and revising many unit tests.</p>\n</blockquote>\n<p>Please, be advised, that rigid tests are a sign of improper testing and are a problem in and of themselves. They will cause many troubles, including troubles with refactoring, which you experience now, when you can't achieve your goal. The tests hold you back, because they were improperly written, to such a degree that you no longer see refactor as a viable solution. The best thing you should do, is update your tests so that refactors like that are possible.</p>\n<p>As to the cloning, instances of this class were not meant to be cloned or copied, you will run into more problems trying to do this than you have now, and at least now you know what your problems are (unit tests and refactoring). The things that could happen with semi-cloned HttpRequest accessed from multiple threads would make you say <code>should have just fixed those tests back then</code>.</p>\n"}],"owner":{"account_id":10588778,"reputation":117,"user_id":7800148,"display_name":"Jason Foster"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2602,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1655053712,"creation_date":1561746517,"question_id":56811706,"body_markdown":"How I can deep copy (Clone) HttpServletRequest in java. As I know it is neither Serializable nor Cloneable. I found some code in internet suggested using of HttpServletRequestWrapper but actually when I used it I realized it is doing shallow copy not deep copy. I appreciate any solution for simply duplicating/ Cloning or deep copying of HttpServletRequest. I know it is not a good idea to do it but I have encountered a scenario in which if I don&#39;t clone it then I need to do more refactors on the code and revising many unit tests.","title":"How to deep copy (clone) HttpServletRequest?","body":"<p>How I can deep copy (Clone) HttpServletRequest in java. As I know it is neither Serializable nor Cloneable. I found some code in internet suggested using of HttpServletRequestWrapper but actually when I used it I realized it is doing shallow copy not deep copy. I appreciate any solution for simply duplicating/ Cloning or deep copying of HttpServletRequest. I know it is not a good idea to do it but I have encountered a scenario in which if I don't clone it then I need to do more refactors on the code and revising many unit tests.</p>\n"},{"tags":["java","generics"],"answers":[{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1655053245,"creation_date":1655045042,"answer_id":72593227,"question_id":72593132,"body_markdown":"&lt;h3&gt;Update&lt;/h3&gt;\r\n\r\n&lt;h3&gt;What means T&lt;/h3&gt;\r\n\r\nGeneric type parameters like `T`, `U`, `R` - are simply placeholders for types, but not the actual types. By convention type parameters are denoted with a single letter but multi-character type parameter will also compile:\r\n```\r\npublic &lt;Something&gt; void doIt(Something s) {}\r\n```\r\n`Something` will not be treated by the compiler as a class or interface name, it&#39;s just a placeholder.\r\n```\r\nprotected &lt;DynamicMessage&gt; void addMessageToResult(Message message, Descriptor descriptor, ImmutableList.Builder&lt;DynamicMessage&gt; messageListBuilder) {}\r\n```\r\nAs well as `DynamicMessage` is a placeholder like `T`. That means that you&#39;ve changed the generic type parameter declared by in the super class as `T extends Message` to an arbitrary `T`. Which is incorrect.\r\n\r\nAt the beginning I didn&#39;t spotted your intention to override a generic method with a non-generic one, that would not work.\r\n\r\nThe reason for that is that `T extends Message` compiles to `Object` due to generic type erasure. I.e. you might think of it, as there&#39;s a non-generic method with an argument of `Object` type declared in the parent class, and therefore it&#39;s not possible to override it by providing `DynamicMessage` as type instead of `Object`.\r\n\r\nA generic method can be overridden only by another generic method, which generic type parameters are precisely the same.\r\n\r\n____________________________________________\r\n\r\nThe problem is fully described in the error message: you can&#39;t have two method with the same name and arguments that differ only by a generic type parameter, due to generic type erasure.\r\n\r\nFor instance, these two methods will clash (i.e. their signatures will be treated as they are the same):\r\n```\r\npublic void doIt(List&lt;Integer&gt; list) {}\r\npublic void doIt(List&lt;String&gt; list) {}\r\n```\r\nBecause at runtime, there would be only a `List&lt;Object&gt;` and safe *checkcasts* added by the compiler.\r\n\r\n***The remedy when we need two distinct methods:*** \r\n* the method signatures should differ either by method-name, or by the set of parameters (*generic type parameters would not be taken into account*).","title":"Unable to specialize method templatization using the subclassing approach","body":"<h3>Update</h3>\n<h3>What means T</h3>\n<p>Generic type parameters like <code>T</code>, <code>U</code>, <code>R</code> - are simply placeholders for types, but not the actual types. By convention type parameters are denoted with a single letter but multi-character type parameter will also compile:</p>\n<pre><code>public &lt;Something&gt; void doIt(Something s) {}\n</code></pre>\n<p><code>Something</code> will not be treated by the compiler as a class or interface name, it's just a placeholder.</p>\n<pre><code>protected &lt;DynamicMessage&gt; void addMessageToResult(Message message, Descriptor descriptor, ImmutableList.Builder&lt;DynamicMessage&gt; messageListBuilder) {}\n</code></pre>\n<p>As well as <code>DynamicMessage</code> is a placeholder like <code>T</code>. That means that you've changed the generic type parameter declared by in the super class as <code>T extends Message</code> to an arbitrary <code>T</code>. Which is incorrect.</p>\n<p>At the beginning I didn't spotted your intention to override a generic method with a non-generic one, that would not work.</p>\n<p>The reason for that is that <code>T extends Message</code> compiles to <code>Object</code> due to generic type erasure. I.e. you might think of it, as there's a non-generic method with an argument of <code>Object</code> type declared in the parent class, and therefore it's not possible to override it by providing <code>DynamicMessage</code> as type instead of <code>Object</code>.</p>\n<p>A generic method can be overridden only by another generic method, which generic type parameters are precisely the same.</p>\n<hr />\n<p>The problem is fully described in the error message: you can't have two method with the same name and arguments that differ only by a generic type parameter, due to generic type erasure.</p>\n<p>For instance, these two methods will clash (i.e. their signatures will be treated as they are the same):</p>\n<pre><code>public void doIt(List&lt;Integer&gt; list) {}\npublic void doIt(List&lt;String&gt; list) {}\n</code></pre>\n<p>Because at runtime, there would be only a <code>List&lt;Object&gt;</code> and safe <em>checkcasts</em> added by the compiler.</p>\n<p><em><strong>The remedy when we need two distinct methods:</strong></em></p>\n<ul>\n<li>the method signatures should differ either by method-name, or by the set of parameters (<em>generic type parameters would not be taken into account</em>).</li>\n</ul>\n"}],"owner":{"account_id":218143,"reputation":119,"user_id":474323,"accept_rate":39,"display_name":"Walking Corpse"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":72593227,"answer_count":1,"score":-1,"last_activity_date":1655053245,"creation_date":1655044410,"question_id":72593132,"body_markdown":"    public class CSVParser {  \r\n      protected &lt;T extends Message&gt; void addMessageToResult(Message message, Descriptor descriptor, ImmutableList.Builder&lt;T&gt; messageListBuilder) {\r\n        . . . \r\n      }\r\n\r\nFor DynamicMessage I wanted to have a different handling so I tried\r\n\r\n    public class CSVParserDynamicMessage extends CSVParser {\r\n      protected&lt;DynamicMessage&gt; void addMessageToResult(Message message, Descriptor descriptor, ImmutableList.Builder&lt;DynamicMessage&gt; messageListBuilder) {\r\n        messageListBuilder.add(DynamicMessage.parseFrom(descriptor, message.toByteString()));\r\n    }\r\n\r\nBut it gives the compilation error\r\n\r\n&gt; &#39;addMessageToResult(Message, Descriptor, Builder&lt;DynamicMessage&gt;)&#39; in &#39;com.google.cloud.verticals.telco.taap.dataflow.dataingestion.common.parsers.CSVParserDynamicMessage&#39; clashes with &#39;addMessageToResult(Message, Descriptor, Builder&lt;T&gt;)&#39; in &#39;com.google.cloud.verticals.telco.taap.dataflow.dataingestion.common.parsers.CSVParser&#39;; both methods have same erasure, yet neither overrides the other\r\n\r\nI&#39;m having to do the ugly method below (haven&#39;t yet attempted to run and see if it actually works):\r\n\r\n    @Override\r\n      protected&lt;T extends Message&gt; void addMessageToResult(Message message, Descriptor descriptor, ImmutableList.Builder&lt;T&gt; messageListBuilder)\r\n        throws InvalidProtocolBufferException {\r\n        messageListBuilder.add((T) DynamicMessage.parseFrom(descriptor, message.toByteString()));\r\n    }\r\n\r\nNote that my attempt of subclassing was inspired from https://stackoverflow.com/questions/3988180/java-generics-template-specialization-possible-overriding-template-types-with but the difference seems to be that in my case the template paramter T doesn&#39;t exist at class level but only at method level. I&#39;m not able to understand why it doesn&#39;t work for my usecase.\r\n\r\nAny ideas are much appreciated.","title":"Unable to specialize method templatization using the subclassing approach","body":"<pre><code>public class CSVParser {  \n  protected &lt;T extends Message&gt; void addMessageToResult(Message message, Descriptor descriptor, ImmutableList.Builder&lt;T&gt; messageListBuilder) {\n    . . . \n  }\n</code></pre>\n<p>For DynamicMessage I wanted to have a different handling so I tried</p>\n<pre><code>public class CSVParserDynamicMessage extends CSVParser {\n  protected&lt;DynamicMessage&gt; void addMessageToResult(Message message, Descriptor descriptor, ImmutableList.Builder&lt;DynamicMessage&gt; messageListBuilder) {\n    messageListBuilder.add(DynamicMessage.parseFrom(descriptor, message.toByteString()));\n}\n</code></pre>\n<p>But it gives the compilation error</p>\n<blockquote>\n<p>'addMessageToResult(Message, Descriptor, Builder)' in 'com.google.cloud.verticals.telco.taap.dataflow.dataingestion.common.parsers.CSVParserDynamicMessage' clashes with 'addMessageToResult(Message, Descriptor, Builder)' in 'com.google.cloud.verticals.telco.taap.dataflow.dataingestion.common.parsers.CSVParser'; both methods have same erasure, yet neither overrides the other</p>\n</blockquote>\n<p>I'm having to do the ugly method below (haven't yet attempted to run and see if it actually works):</p>\n<pre><code>@Override\n  protected&lt;T extends Message&gt; void addMessageToResult(Message message, Descriptor descriptor, ImmutableList.Builder&lt;T&gt; messageListBuilder)\n    throws InvalidProtocolBufferException {\n    messageListBuilder.add((T) DynamicMessage.parseFrom(descriptor, message.toByteString()));\n}\n</code></pre>\n<p>Note that my attempt of subclassing was inspired from <a href=\"https://stackoverflow.com/questions/3988180/java-generics-template-specialization-possible-overriding-template-types-with\">Java generics (template) specialization possible (overriding template types with specific types)</a> but the difference seems to be that in my case the template paramter T doesn't exist at class level but only at method level. I'm not able to understand why it doesn't work for my usecase.</p>\n<p>Any ideas are much appreciated.</p>\n"},{"tags":["java","loops","validation"],"comments":[{"owner":{"account_id":3212023,"reputation":1016,"user_id":17856705,"display_name":"Computable"},"score":1,"creation_date":1655049113,"post_id":72593666,"comment_id":128233000,"body_markdown":"Because you are comparing a loop control of `int` against a `long` - the warning is likely saying &quot;since the long could be greater than `Integer.MAX_VALUE` it is possible the loop control will never meet the terminating condition and be an infinite loop&quot;.  Either change the loop control to a `long` or (realistically) change `monthBt` to `int`.","body":"Because you are comparing a loop control of <code>int</code> against a <code>long</code> - the warning is likely saying &quot;since the long could be greater than <code>Integer.MAX_VALUE</code> it is possible the loop control will never meet the terminating condition and be an infinite loop&quot;.  Either change the loop control to a <code>long</code> or (realistically) change <code>monthBt</code> to <code>int</code>."},{"owner":{"account_id":5678465,"reputation":115,"user_id":4490644,"display_name":"RJ_Singh"},"score":0,"creation_date":1655145516,"post_id":72593666,"comment_id":128257424,"body_markdown":"Thanks @Gardener. How have tried both ways i.e. 1)change the loop control to a long 2) change monthBt to int but still the getting the medium level security warning.","body":"Thanks @Gardener. How have tried both ways i.e. 1)change the loop control to a long 2) change monthBt to int but still the getting the medium level security warning."}],"answers":[{"tags":[],"owner":{"account_id":23837295,"reputation":308,"user_id":17842877,"display_name":"xthe_white_lionx"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655051688,"creation_date":1655051688,"answer_id":72594051,"question_id":72593666,"body_markdown":"Gardner is absolutly rigth so do this: \r\n\r\n    int monthBt = (int) MONTHS.between(YearMonth.from(startAndEndDate));\r\n            for (int i = 0; i &lt;= monthBt; i++) {\r\n                //do something\r\n            }","title":"Unchecked Input for Loop Condition (Excessive looping validation for long)","body":"<p>Gardner is absolutly rigth so do this:</p>\n<pre><code>int monthBt = (int) MONTHS.between(YearMonth.from(startAndEndDate));\n        for (int i = 0; i &lt;= monthBt; i++) {\n            //do something\n        }\n</code></pre>\n"}],"owner":{"account_id":5678465,"reputation":115,"user_id":4490644,"display_name":"RJ_Singh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":351,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1655051688,"creation_date":1655048579,"question_id":72593666,"body_markdown":"I&#39;ve a class in which we are storing &quot;amount of time between two temporal objects&quot; into a long variable monthBt  and using it as Test Expression in &quot;for loop&quot;. However I am getting medium level security warning &quot;Unchecked Input for Loop Condition&quot; in azure sechub.\r\n\r\n    long monthBt = MONTHS.between(YearMonth.from(startAndEndDate);\r\n    for (int i = 0;i&lt;= monthBt;i++) {\r\n    //do something\r\n    }\r\n\r\nwhat is the best way to validate and remove the warning?\r\nThanks!","title":"Unchecked Input for Loop Condition (Excessive looping validation for long)","body":"<p>I've a class in which we are storing &quot;amount of time between two temporal objects&quot; into a long variable monthBt  and using it as Test Expression in &quot;for loop&quot;. However I am getting medium level security warning &quot;Unchecked Input for Loop Condition&quot; in azure sechub.</p>\n<pre><code>long monthBt = MONTHS.between(YearMonth.from(startAndEndDate);\nfor (int i = 0;i&lt;= monthBt;i++) {\n//do something\n}\n</code></pre>\n<p>what is the best way to validate and remove the warning?\nThanks!</p>\n"},{"tags":["java","class","oop","linked-list","concept"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":1,"creation_date":1654972503,"post_id":72586977,"comment_id":128221564,"body_markdown":"`next` is another `Node`. It&#39;s a recursive definition. A `Node` contains a reference to another `Node`.","body":"<code>next</code> is another <code>Node</code>. It&#39;s a recursive definition. A <code>Node</code> contains a reference to another <code>Node</code>."},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":1,"creation_date":1654972650,"post_id":72586977,"comment_id":128221583,"body_markdown":"Does this answer your question? [Understanding Linked List in Java](https://stackoverflow.com/questions/21571503/understanding-linked-list-in-java)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/21571503/understanding-linked-list-in-java\">Understanding Linked List in Java</a>"}],"answers":[{"tags":[],"owner":{"account_id":13535221,"reputation":53,"user_id":9764598,"display_name":"Biltu - Technology"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654973365,"creation_date":1654973365,"answer_id":72587070,"question_id":72586977,"body_markdown":"next is just a reference variable which is a type of Node. \r\nCurrently this reference  variable is null as it is not assigned with any value.","title":"What type of a value (or data) is stored in a variable having a datatype of the same name as its parent class name?","body":"<p>next is just a reference variable which is a type of Node.\nCurrently this reference  variable is null as it is not assigned with any value.</p>\n"}],"owner":{"account_id":25417304,"reputation":11,"user_id":19223978,"display_name":"Udbhas Dutta"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1655051212,"creation_date":1654972420,"question_id":72586977,"body_markdown":"In the following code snippet:\r\n\r\n\r\n    class Node{\r\n        Node next;\r\n        String data;\r\n\r\n        Node(String data){\r\n            this.data = data;\r\n            this.next = null;\r\n        }\r\n    }\r\n\r\nWhat kind of data is being stored in the variable `next` which is assigned a datatype `Node` which is the same name as its class name? Also, please tell me the significance of such types of variables which are assigned a datatype with the same name as its parent class name.\r\n","title":"What type of a value (or data) is stored in a variable having a datatype of the same name as its parent class name?","body":"<p>In the following code snippet:</p>\n<pre><code>class Node{\n    Node next;\n    String data;\n\n    Node(String data){\n        this.data = data;\n        this.next = null;\n    }\n}\n</code></pre>\n<p>What kind of data is being stored in the variable <code>next</code> which is assigned a datatype <code>Node</code> which is the same name as its class name? Also, please tell me the significance of such types of variables which are assigned a datatype with the same name as its parent class name.</p>\n"},{"tags":["java","android","firebase","android-studio","firebase-realtime-database"],"comments":[{"owner":{"account_id":13113788,"reputation":10080,"user_id":9473786,"display_name":"Tyler V"},"score":0,"creation_date":1655052700,"post_id":72593849,"comment_id":128233811,"body_markdown":"Does this answer your question? [Why does my function that calls an API return an empty or null value?](https://stackoverflow.com/a/70178210/9473786) - the database call is asynchronous and putting a timed delay to wait for it is a terrible solution that blocks the UI thread. If the network is slow it won&#39;t be long enough and if the network is fast it makes the user wait unnecessarily","body":"Does this answer your question? <a href=\"https://stackoverflow.com/a/70178210/9473786\">Why does my function that calls an API return an empty or null value?</a> - the database call is asynchronous and putting a timed delay to wait for it is a terrible solution that blocks the UI thread. If the network is slow it won&#39;t be long enough and if the network is fast it makes the user wait unnecessarily"},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1655110730,"post_id":72593849,"comment_id":128244211,"body_markdown":"There is no way you can do that. Firebase API is asynchronous. So please check the duplicate to see how can you solve this using a callback. You might also be interested in reading this [resource](https://medium.com/firebase-tips-tricks/how-to-read-data-from-firebase-realtime-database-using-get-269ef3e179c5).","body":"There is no way you can do that. Firebase API is asynchronous. So please check the duplicate to see how can you solve this using a callback. You might also be interested in reading this <a href=\"https://medium.com/firebase-tips-tricks/how-to-read-data-from-firebase-realtime-database-using-get-269ef3e179c5\" rel=\"nofollow noreferrer\">resource</a>."}],"owner":{"account_id":22711909,"reputation":77,"user_id":16877756,"display_name":"Guy zvi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1655110705,"answer_count":0,"score":0,"last_activity_date":1655050041,"creation_date":1655050041,"question_id":72593849,"body_markdown":"I have an Activity that needs to pull data from FireBase and put it in a listView.\r\nWhen I debug within the function and print the length of the list whilst filling it, everything is fine and it fills up properly. But when I call the function at the start of the activity in order to fill the list and then refresh the adapter the list shows up as empty for some reason. I even tried sleeping the main thread but that doesn&#39;t help.\r\nThe activity:\r\n```java\r\npublic class OrdersActivity extends AppCompatActivity {\r\n\r\n    FirebaseDatabase database = FirebaseDatabase.getInstance(&quot;https://computerstorefb-default-rtdb.firebaseio.com/&quot;);\r\n    DatabaseReference myRef = database.getReference(&quot;&quot;);\r\n\r\n    OnSuccessListener&lt;Void&gt; listener;\r\n\r\n    static ArrayList&lt;Order&gt; ordersList = new ArrayList&lt;Order&gt;();\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_orders);\r\n\r\n\r\n\r\n        Button back = (Button)findViewById(R.id.btnOrdersBack);\r\n        ListView lvOrders = findViewById(R.id.lvOrders);\r\n        TextView proLabel = findViewById(R.id.proLabel);\r\n\r\n        ordersList.clear();\r\n        getOrdersFromDB(listener);\r\n\r\n\r\n        SmsManager mySmsManager = SmsManager.getDefault();\r\n\r\n\r\n        try {\r\n            TimeUnit.SECONDS.sleep(1);\r\n        } catch (InterruptedException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n\r\n        Log.d(&quot;size&quot;,ordersList.size()+&quot;&quot;);     // 0 \r\n\r\n        ArrayAdapter&lt;Order&gt; ordersAdapter = new ArrayAdapter&lt;Order&gt;(OrdersActivity.this, android.R.layout.simple_list_item_1,ordersList);\r\n        lvOrders.setAdapter(ordersAdapter);\r\n\r\n        Log.d(&quot;size&quot;,ordersList.size()+&quot;&quot;);     //0\r\n\r\n\r\n\r\n        listener = new OnSuccessListener&lt;Void&gt;() {\r\n            @Override\r\n            public void onSuccess(Void unused) {\r\n                ArrayAdapter&lt;Order&gt; ordersAdapter = new ArrayAdapter&lt;Order&gt;(OrdersActivity.this, android.R.layout.simple_list_item_1,ordersList);\r\n                lvOrders.setAdapter(ordersAdapter);\r\n                Toast.makeText(OrdersActivity.this, &quot;Done!&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n        };\r\n\r\n        lvOrders.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(AdapterView&lt;?&gt; adapterView, View view, int i, long l) {\r\n\r\n                Order o = OrdersActivity.ordersList.get(i);\r\n\r\n                myRef.child(&quot;Orders&quot;).child(o.name+&quot;&quot;).child(&quot;status&quot;).setValue(&quot;SHIPPED!&quot;);\r\n\r\n                OrdersActivity.ordersList.clear();\r\n                getOrdersFromDB(listener);\r\n\r\n\r\n                try {\r\n                    TimeUnit.SECONDS.sleep(3);\r\n                } catch (InterruptedException e) {\r\n                    e.printStackTrace();\r\n                }\r\n\r\n                ArrayAdapter&lt;Order&gt; ordersAdapter = new ArrayAdapter&lt;Order&gt;(OrdersActivity.this, android.R.layout.simple_list_item_1,ordersList);\r\n                lvOrders.setAdapter(ordersAdapter);\r\n\r\n                String message = &quot;Hey &quot; + o.name + &quot;! your package from Igor&#39;s Computers had been shipped!&quot;;\r\n\r\n\r\n                try {\r\n                    mySmsManager.sendTextMessage(generatePhone(o.tel),null,message,null,null);\r\n                }\r\n                catch(Exception e){\r\n                    Toast.makeText(OrdersActivity.this, &quot;Can&#39;t send message!&quot;, Toast.LENGTH_SHORT).show();\r\n                }\r\n\r\n            }\r\n        });\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n        back.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                finish();\r\n            }\r\n        });\r\n    }\r\n\r\n```\r\n\r\nThe function that loads the data:\r\n```java\r\nprivate void getOrdersFromDB(OnSuccessListener&lt;Void&gt; onSuccess){\r\n\r\n\r\n        Query q = myRef.child(&quot;Orders&quot;);\r\n        q.addListenerForSingleValueEvent(new ValueEventListener()\r\n        {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot)\r\n            {\r\n                for (DataSnapshot dst : snapshot.getChildren())\r\n                {\r\n\r\n                    Order o = dst.getValue(Order.class);\r\n                    if(!o.status.contains(&quot;SHIPPED&quot;)) {\r\n                        OrdersActivity.ordersList.add(o);\r\n                        Log.d(&quot;p&quot;,&quot;size: &quot;+ordersList.size()+&quot;&quot;);    //counts properly\r\n\r\n                    }\r\n                }\r\n                if(onSuccess != null)\r\n                {\r\n                    onSuccess.onSuccess(null);\r\n                }\r\n            }\r\n            @Override\r\n            public void onCancelled(@NonNull @NotNull DatabaseError error)\r\n            {\r\n\r\n            }\r\n\r\n\r\n\r\n        });\r\n\r\n\r\n    }\r\n```\r\n","title":"ListView doesn&#39;t update when getting data from Firebase","body":"<p>I have an Activity that needs to pull data from FireBase and put it in a listView.\nWhen I debug within the function and print the length of the list whilst filling it, everything is fine and it fills up properly. But when I call the function at the start of the activity in order to fill the list and then refresh the adapter the list shows up as empty for some reason. I even tried sleeping the main thread but that doesn't help.\nThe activity:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class OrdersActivity extends AppCompatActivity {\n\n    FirebaseDatabase database = FirebaseDatabase.getInstance(&quot;https://computerstorefb-default-rtdb.firebaseio.com/&quot;);\n    DatabaseReference myRef = database.getReference(&quot;&quot;);\n\n    OnSuccessListener&lt;Void&gt; listener;\n\n    static ArrayList&lt;Order&gt; ordersList = new ArrayList&lt;Order&gt;();\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_orders);\n\n\n\n        Button back = (Button)findViewById(R.id.btnOrdersBack);\n        ListView lvOrders = findViewById(R.id.lvOrders);\n        TextView proLabel = findViewById(R.id.proLabel);\n\n        ordersList.clear();\n        getOrdersFromDB(listener);\n\n\n        SmsManager mySmsManager = SmsManager.getDefault();\n\n\n        try {\n            TimeUnit.SECONDS.sleep(1);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n\n\n        Log.d(&quot;size&quot;,ordersList.size()+&quot;&quot;);     // 0 \n\n        ArrayAdapter&lt;Order&gt; ordersAdapter = new ArrayAdapter&lt;Order&gt;(OrdersActivity.this, android.R.layout.simple_list_item_1,ordersList);\n        lvOrders.setAdapter(ordersAdapter);\n\n        Log.d(&quot;size&quot;,ordersList.size()+&quot;&quot;);     //0\n\n\n\n        listener = new OnSuccessListener&lt;Void&gt;() {\n            @Override\n            public void onSuccess(Void unused) {\n                ArrayAdapter&lt;Order&gt; ordersAdapter = new ArrayAdapter&lt;Order&gt;(OrdersActivity.this, android.R.layout.simple_list_item_1,ordersList);\n                lvOrders.setAdapter(ordersAdapter);\n                Toast.makeText(OrdersActivity.this, &quot;Done!&quot;, Toast.LENGTH_SHORT).show();\n            }\n        };\n\n        lvOrders.setOnItemClickListener(new AdapterView.OnItemClickListener() {\n            @Override\n            public void onItemClick(AdapterView&lt;?&gt; adapterView, View view, int i, long l) {\n\n                Order o = OrdersActivity.ordersList.get(i);\n\n                myRef.child(&quot;Orders&quot;).child(o.name+&quot;&quot;).child(&quot;status&quot;).setValue(&quot;SHIPPED!&quot;);\n\n                OrdersActivity.ordersList.clear();\n                getOrdersFromDB(listener);\n\n\n                try {\n                    TimeUnit.SECONDS.sleep(3);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n\n                ArrayAdapter&lt;Order&gt; ordersAdapter = new ArrayAdapter&lt;Order&gt;(OrdersActivity.this, android.R.layout.simple_list_item_1,ordersList);\n                lvOrders.setAdapter(ordersAdapter);\n\n                String message = &quot;Hey &quot; + o.name + &quot;! your package from Igor's Computers had been shipped!&quot;;\n\n\n                try {\n                    mySmsManager.sendTextMessage(generatePhone(o.tel),null,message,null,null);\n                }\n                catch(Exception e){\n                    Toast.makeText(OrdersActivity.this, &quot;Can't send message!&quot;, Toast.LENGTH_SHORT).show();\n                }\n\n            }\n        });\n\n\n\n\n\n\n\n        back.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                finish();\n            }\n        });\n    }\n\n</code></pre>\n<p>The function that loads the data:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private void getOrdersFromDB(OnSuccessListener&lt;Void&gt; onSuccess){\n\n\n        Query q = myRef.child(&quot;Orders&quot;);\n        q.addListenerForSingleValueEvent(new ValueEventListener()\n        {\n            @Override\n            public void onDataChange(@NonNull DataSnapshot snapshot)\n            {\n                for (DataSnapshot dst : snapshot.getChildren())\n                {\n\n                    Order o = dst.getValue(Order.class);\n                    if(!o.status.contains(&quot;SHIPPED&quot;)) {\n                        OrdersActivity.ordersList.add(o);\n                        Log.d(&quot;p&quot;,&quot;size: &quot;+ordersList.size()+&quot;&quot;);    //counts properly\n\n                    }\n                }\n                if(onSuccess != null)\n                {\n                    onSuccess.onSuccess(null);\n                }\n            }\n            @Override\n            public void onCancelled(@NonNull @NotNull DatabaseError error)\n            {\n\n            }\n\n\n\n        });\n\n\n    }\n</code></pre>\n"},{"tags":["java","regex","string"],"comments":[{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":1,"creation_date":1655046534,"post_id":72592587,"comment_id":128232456,"body_markdown":"How many digits long can each individual number be?","body":"How many digits long can each individual number be?"}],"answers":[{"tags":[],"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655042210,"creation_date":1655042210,"answer_id":72592858,"question_id":72592587,"body_markdown":"You can split each line using `String.lines` to get a stream of the lines and then flatmap those lines after spliting at each space using `Pattern.splitAsStream` and skip the first column and join back together using comma as a delimeter:\r\n\r\n    String input =&quot;4 \\n&quot;\r\n                + &quot;1 1\\n&quot;\r\n                + &quot;1 2 1\\n&quot;\r\n                + &quot;0\\n&quot;\r\n                + &quot;1 1\\n&quot;;\r\n\r\n    Pattern pattern = Pattern.compile(&quot; &quot;);\r\n    String result   = input.lines()\r\n                           .flatMap(line -&gt; pattern.splitAsStream(line).skip(1))\r\n                           .collect(Collectors.joining(&quot;, &quot;));\r\n\r\n    System.out.println(result);\r\n\r\n    //1, 2, 1, 1","title":"Splitting String by column with regex","body":"<p>You can split each line using <code>String.lines</code> to get a stream of the lines and then flatmap those lines after spliting at each space using <code>Pattern.splitAsStream</code> and skip the first column and join back together using comma as a delimeter:</p>\n<pre><code>String input =&quot;4 \\n&quot;\n            + &quot;1 1\\n&quot;\n            + &quot;1 2 1\\n&quot;\n            + &quot;0\\n&quot;\n            + &quot;1 1\\n&quot;;\n\nPattern pattern = Pattern.compile(&quot; &quot;);\nString result   = input.lines()\n                       .flatMap(line -&gt; pattern.splitAsStream(line).skip(1))\n                       .collect(Collectors.joining(&quot;, &quot;));\n\nSystem.out.println(result);\n\n//1, 2, 1, 1\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9874198,"reputation":489,"user_id":8632023,"display_name":"Daniel Zin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655044042,"creation_date":1655044042,"answer_id":72593094,"question_id":72592587,"body_markdown":"    String s = &quot;4 \\n&quot;\r\n            + &quot;1 1\\n&quot;\r\n            + &quot;1 2 1\\n&quot;\r\n            + &quot;0\\n&quot;\r\n            + &quot;1 1\\n&quot;;\r\n    String result = s.replaceAll(&quot;((^|\\\\n)\\\\d|[ ])&quot;, &quot;&quot;).replaceAll(&quot;(\\\\d)(?=\\\\d)&quot;, &quot;$1, &quot;);\r\n    System.out.println(result); \r\n    //1, 2, 1, 1","title":"Splitting String by column with regex","body":"<pre><code>String s = &quot;4 \\n&quot;\n        + &quot;1 1\\n&quot;\n        + &quot;1 2 1\\n&quot;\n        + &quot;0\\n&quot;\n        + &quot;1 1\\n&quot;;\nString result = s.replaceAll(&quot;((^|\\\\n)\\\\d|[ ])&quot;, &quot;&quot;).replaceAll(&quot;(\\\\d)(?=\\\\d)&quot;, &quot;$1, &quot;);\nSystem.out.println(result); \n//1, 2, 1, 1\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17253187,"reputation":15250,"user_id":12492890,"display_name":"lemon"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1655045227,"creation_date":1655045227,"answer_id":72593241,"question_id":72592587,"body_markdown":"You can use the following regex:\r\n\r\n    (?&lt;=\\d )\\d+\r\n\r\nIt matches any combination of digits, followed by &quot;digit + space&quot;.\r\n\r\nInstead of splitting on this, you should use the matcher with this regex.\r\n\r\nCheck the demo [here][1].\r\n\r\n\r\n  [1]: https://regex101.com/r/bRiKNm/1","title":"Splitting String by column with regex","body":"<p>You can use the following regex:</p>\n<pre><code>(?&lt;=\\d )\\d+\n</code></pre>\n<p>It matches any combination of digits, followed by &quot;digit + space&quot;.</p>\n<p>Instead of splitting on this, you should use the matcher with this regex.</p>\n<p>Check the demo <a href=\"https://regex101.com/r/bRiKNm/1\" rel=\"nofollow noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1655049744,"creation_date":1655048051,"answer_id":72593609,"question_id":72592587,"body_markdown":"First trim leading column, then split on white space:\r\n\r\n    String[] split = str.replaceAll(&quot;(?m)^\\\\d+\\\\s*&quot;, &quot;&quot;).split(&quot;\\\\s&quot;);\r\n\r\nSee [live demo][1].\r\n\r\nThe replace uses the *multiline flag* `(?m)`, which makes `^` match the start of *every line*, and `\\s` matches spaces, so the first column is effectively deleted from every line, but `\\s` *also* matches newlines, so lines with only one column are deleted entirely. Although the new lines are retained in lines with more than 1 column.\r\n\r\nBecause `\\s` matches space *and* newline, the split splits between columns and between (first column removed) lines, yielding the desired result.\r\n\r\nI believe this is the least code required for a solution.\r\n\r\n  [1]: https://ideone.com/rAz4cu","title":"Splitting String by column with regex","body":"<p>First trim leading column, then split on white space:</p>\n<pre><code>String[] split = str.replaceAll(&quot;(?m)^\\\\d+\\\\s*&quot;, &quot;&quot;).split(&quot;\\\\s&quot;);\n</code></pre>\n<p>See <a href=\"https://ideone.com/rAz4cu\" rel=\"nofollow noreferrer\">live demo</a>.</p>\n<p>The replace uses the <em>multiline flag</em> <code>(?m)</code>, which makes <code>^</code> match the start of <em>every line</em>, and <code>\\s</code> matches spaces, so the first column is effectively deleted from every line, but <code>\\s</code> <em>also</em> matches newlines, so lines with only one column are deleted entirely. Although the new lines are retained in lines with more than 1 column.</p>\n<p>Because <code>\\s</code> matches space <em>and</em> newline, the split splits between columns and between (first column removed) lines, yielding the desired result.</p>\n<p>I believe this is the least code required for a solution.</p>\n"}],"owner":{"account_id":10389436,"reputation":71,"user_id":7661279,"display_name":"Loewe8"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":100,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":72593609,"answer_count":4,"score":-1,"last_activity_date":1655049744,"creation_date":1655040302,"question_id":72592587,"body_markdown":"    4 \r\n    1 1\r\n    1 2 1\r\n    0\r\n    1 1\r\n\r\nThis is a String I get as input, but I just need every column, starting with the second column, aka: \r\n- 1 (second row) \r\n- 2 and 1 (third row)\r\n- 1 (fifth row)\r\n\r\nThis `String` has no fixed size in how many lines there could be or how many columns (columns being split by one space).\r\n\r\nI think this is fairly easy by using:\r\n\r\n    string.split(&quot;enter regex here&quot;);\r\nI need every column after the first.\r\nI&#39;m still learning with regex but I just can&#39;t seem to find a good solution.\r\nI know about `&quot;\\\\r?\\\\n&quot; and &quot; &quot;` for splitting but don&#39;t know how to connect both to get every column. \r\nAny help is very appreciated :)\r\n\r\nAnother String could look like this:\r\n\r\n    2\r\n    1\r\n    1 2\r\n    9 3 5\r\n    1 3\r\n    0 9 2 4\r\n    0\r\nIn that case, I would need `2, 3, 5, 3, 9, 2, 4`.","title":"Splitting String by column with regex","body":"<pre><code>4 \n1 1\n1 2 1\n0\n1 1\n</code></pre>\n<p>This is a String I get as input, but I just need every column, starting with the second column, aka:</p>\n<ul>\n<li>1 (second row)</li>\n<li>2 and 1 (third row)</li>\n<li>1 (fifth row)</li>\n</ul>\n<p>This <code>String</code> has no fixed size in how many lines there could be or how many columns (columns being split by one space).</p>\n<p>I think this is fairly easy by using:</p>\n<pre><code>string.split(&quot;enter regex here&quot;);\n</code></pre>\n<p>I need every column after the first.\nI'm still learning with regex but I just can't seem to find a good solution.\nI know about <code>&quot;\\\\r?\\\\n&quot; and &quot; &quot;</code> for splitting but don't know how to connect both to get every column.\nAny help is very appreciated :)</p>\n<p>Another String could look like this:</p>\n<pre><code>2\n1\n1 2\n9 3 5\n1 3\n0 9 2 4\n0\n</code></pre>\n<p>In that case, I would need <code>2, 3, 5, 3, 9, 2, 4</code>.</p>\n"},{"tags":["java","spring","spring-boot","rest","spring-mvc"],"answers":[{"tags":[],"owner":{"account_id":25481526,"reputation":336,"user_id":19277782,"display_name":"CaptainPyscho"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1655049603,"creation_date":1655011967,"answer_id":72589718,"question_id":72589309,"body_markdown":"I edited my previous answer because you can actually get parameters from a response body in a POST with `@RequestParam` annotation.\r\n\r\nI would use JSON as content type. This is my solution:\r\n\r\n    public String sendToB(MultipartFile file) throws ResponseStatusException {\r\n           HttpHeaders headers = new HttpHeaders();\r\n           headers.setContentType(MediaType.APPLICATION_JSON);\r\n           byte[] bytesFile = file.getBytes();\r\n           String base64String = Base64.getEncoder().encodeToString(bytesFile);\r\n           Map&lt;String, Object&gt; body = new HashMap&lt;&gt;();\r\n           body.put(&quot;file&quot;, base64String);\r\n           body.put(&quot;directoryName&quot;, file.getOriginalFilename());\r\n           body.put(&quot;videoName&quot;, file.getName())\r\n           HttpEntity&lt;Map&lt;String, Object&gt;&gt; requestEntity = new HttpEntity&lt;&gt;(body, headers);\r\n           String serverUrl = &quot;http://127.0.0.1:8090/makeFrames&quot;;\r\n           RestTemplate restTemplate = new RestTemplate();\r\n           ResponseEntity&lt;String&gt; response = restTemplate.exchange(\r\n                   serverUrl,\r\n                   HttpMethod.POST,\r\n                   requestEntity,\r\n                   String.class\r\n           );\r\n           if (response.getStatusCode() != HttpStatus.OK) {\r\n               throw new ResponseStatusException(response.getStatusCode(), response.getBody());\r\n           }\r\n           return response.getBody();\r\n       }\r\n\r\nFor App B, the code would be:\r\n\r\n    @PostMapping(&quot;/makeFrames&quot;)\r\n    public ResponseEntity&lt;String&gt; framesExtractorController(@RequestBody Map&lt;String, Object&gt; requestBody) {\r\n       try {\r\n           String base64String = requestBody.get(&quot;file&quot;).toString();\r\n           byte[] bytesFile = Base64.getDecoder().decode(base64String);\r\n           InputStream inputStream = new ByteArrayInputStream(bytesFile);\r\n           String directoryName = requestBody.get(&quot;directoryName&quot;).toString();\r\n           String videoName = requestBody.get(&quot;videoName&quot;).toString();\r\n           File result = FramesExtractor.grabFrames(inputStream, directoryName, videoName);\r\n           return new ResponseEntity&lt;&gt;(result.getAbsolutePath(), HttpStatus.OK);\r\n       } catch (IOException e) {\r\n          return new ResponseEntity&lt;&gt;(e.getMessage(), HttpStatus.NOT_FOUND);\r\n       }\r\n     }\r\n    }\r\n    \r\n    public static File grabFrames(InputStream inputStream, String directoryName, String videoName) throws IOException {\r\n       //Your code\r\n    }\r\n\r\n","title":"Error while sending Video File from Java Spring Microservice to other Microservice on other port using Spring Rest Template","body":"<p>I edited my previous answer because you can actually get parameters from a response body in a POST with <code>@RequestParam</code> annotation.</p>\n<p>I would use JSON as content type. This is my solution:</p>\n<pre><code>public String sendToB(MultipartFile file) throws ResponseStatusException {\n       HttpHeaders headers = new HttpHeaders();\n       headers.setContentType(MediaType.APPLICATION_JSON);\n       byte[] bytesFile = file.getBytes();\n       String base64String = Base64.getEncoder().encodeToString(bytesFile);\n       Map&lt;String, Object&gt; body = new HashMap&lt;&gt;();\n       body.put(&quot;file&quot;, base64String);\n       body.put(&quot;directoryName&quot;, file.getOriginalFilename());\n       body.put(&quot;videoName&quot;, file.getName())\n       HttpEntity&lt;Map&lt;String, Object&gt;&gt; requestEntity = new HttpEntity&lt;&gt;(body, headers);\n       String serverUrl = &quot;http://127.0.0.1:8090/makeFrames&quot;;\n       RestTemplate restTemplate = new RestTemplate();\n       ResponseEntity&lt;String&gt; response = restTemplate.exchange(\n               serverUrl,\n               HttpMethod.POST,\n               requestEntity,\n               String.class\n       );\n       if (response.getStatusCode() != HttpStatus.OK) {\n           throw new ResponseStatusException(response.getStatusCode(), response.getBody());\n       }\n       return response.getBody();\n   }\n</code></pre>\n<p>For App B, the code would be:</p>\n<pre><code>@PostMapping(&quot;/makeFrames&quot;)\npublic ResponseEntity&lt;String&gt; framesExtractorController(@RequestBody Map&lt;String, Object&gt; requestBody) {\n   try {\n       String base64String = requestBody.get(&quot;file&quot;).toString();\n       byte[] bytesFile = Base64.getDecoder().decode(base64String);\n       InputStream inputStream = new ByteArrayInputStream(bytesFile);\n       String directoryName = requestBody.get(&quot;directoryName&quot;).toString();\n       String videoName = requestBody.get(&quot;videoName&quot;).toString();\n       File result = FramesExtractor.grabFrames(inputStream, directoryName, videoName);\n       return new ResponseEntity&lt;&gt;(result.getAbsolutePath(), HttpStatus.OK);\n   } catch (IOException e) {\n      return new ResponseEntity&lt;&gt;(e.getMessage(), HttpStatus.NOT_FOUND);\n   }\n }\n}\n\npublic static File grabFrames(InputStream inputStream, String directoryName, String videoName) throws IOException {\n   //Your code\n}\n</code></pre>\n"}],"owner":{"account_id":18718450,"reputation":175,"user_id":13646924,"display_name":"TaeXtreme"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":379,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1655049603,"creation_date":1655004870,"question_id":72589309,"body_markdown":"Right now I have 2 Spring App.\r\n\r\nApp A will have a controller that will receive a video file ad Multipart file and sending the file to App B via rest template.\r\n\r\nSome Code from App A that handle sending request to App B.\r\n ```\r\n@RestController\r\npublic class AppAController {\r\n\r\n@Autowired\r\nprivate final AppBService service;\r\n\r\n@PostMapping(&quot;/sendToB&quot;)\r\n    public ResponseEntity&lt;String&gt; contoller(@RequestParam(&quot;file&quot;) MultipartFile file) {\r\n        String result = service.sendToB(file);\r\n        return new ResponseEntity&lt;&gt;(result, HttpStatus.OK);\r\n\r\n    }\r\n}\r\n\r\n@Service\r\npublic class AppBService {\r\n\r\npublic String sendToB(MultipartFile file) throws ResponseStatusException {\r\n        HttpHeaders headers = new HttpHeaders();\r\n        headers.setContentType(MediaType.MULTIPART_FORM_DATA);\r\n        MultiValueMap&lt;String, Object&gt; body = new LinkedMultiValueMap&lt;&gt;();\r\n        body.add(&quot;file&quot;, file);\r\n        HttpEntity&lt;MultiValueMap&lt;String, Object&gt;&gt; requestEntity = new HttpEntity&lt;&gt;(body, headers);\r\n        String serverUrl = &quot;http://127.0.0.1:8090/makeFrames&quot;;\r\n        RestTemplate restTemplate = new RestTemplate();\r\n        ResponseEntity&lt;String&gt; response = restTemplate.exchange(\r\n                serverUrl,\r\n                HttpMethod.POST,\r\n                requestEntity,\r\n                String.class\r\n        );\r\n        if (response.getStatusCode() != HttpStatus.OK) {\r\n            throw new ResponseStatusException(response.getStatusCode(), response.getBody());\r\n        }\r\n        return response.getBody();\r\n    }\r\n}\r\n\r\n ```\r\n\r\nAnd for App B, it will receive a video and extracting key frames from a video using JavaCV.\r\n ```\r\n@RestController\r\npublic class ProcessorController {\r\n\r\n@PostMapping(&quot;/makeFrames&quot;)\r\n    public ResponseEntity&lt;String&gt; framesExtractorController(@RequestParam(&quot;file&quot;) MultipartFile file) {\r\n        try {\r\n            File result = FramesExtractor.grabFrames(file);\r\n            return new ResponseEntity&lt;&gt;(result.getAbsolutePath(), HttpStatus.OK);\r\n        } catch (IOException e) {\r\n            return new ResponseEntity&lt;&gt;(e.getMessage(), HttpStatus.NOT_FOUND);\r\n        }\r\n    }\r\n}\r\n\r\npublic class FramesExtractor {\r\n\r\n    private static final Logger LOG = LoggerFactory.getLogger(FramesExtractor.class);\r\n\r\n    private FramesExtractor() {\r\n    }\r\n\r\n    public static File grabFrames(MultipartFile video) throws IOException {\r\n        LOG.info(&quot;Extracting Frames from the video &quot; + video.getName());\r\n        String directoryName = video.getOriginalFilename() + &quot;-frames-result&quot;;\r\n        directoryAssurance(directoryName);\r\n        try (FFmpegFrameGrabber frameGrabber = new FFmpegFrameGrabber(video.getInputStream());\r\n             Java2DFrameConverter converter = new Java2DFrameConverter()) {\r\n            frameGrabber.setImageWidth(480);\r\n            frameGrabber.setImageHeight(360);\r\n            frameGrabber.start();\r\n            Frame frame;\r\n            int i = 0;\r\n            while ((frame = frameGrabber.grabKeyFrame()) != null) {\r\n                BufferedImage bi = converter.getBufferedImage(frame);\r\n                ImageIO.write(bi, &quot;png&quot;, new File(directoryName + &quot;/&quot; + String.format(&quot;%03d&quot;, i) + &quot;.png&quot;));\r\n                i++;\r\n            }\r\n            frameGrabber.stop();\r\n            LOG.info(&quot;Finish Extracting Frames&quot;);\r\n            return new File(directoryName);\r\n        } catch (Exception e) {\r\n            LOG.error(e.getMessage());\r\n            throw e;\r\n        }\r\n    }\r\n}\r\n ```\r\n\r\nBoth app A and B have these properties set to their application.properties files.\r\n```\r\nserver.port={There respective port}\r\nspring.servlet.multipart.enabled=true\r\nspring.servlet.multipart.max-file-size=100MB\r\nspring.servlet.multipart.max-request-size=100MB\r\n```\r\n\r\nAnd when i testing the application by using PostMan to send post request with video file in form-data body to App A /sendToB api i receive this error message.\r\n ```\r\n&quot;Type definition error: [simple type, class java.io.FileDescriptor]; nested exception is com.fasterxml.jackson.databind.exc.InvalidDefinitionException: No serializer found for class java.io.FileDescriptor and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationFeature.FAIL_ON_EMPTY_BEANS) (through reference chain: org.springframework.web.multipart.support.StandardMultipartHttpServletRequest$StandardMultipartFile[\\&quot;inputStream\\&quot;]-&gt;java.io.FileInputStream[\\&quot;fd\\&quot;])&quot;\r\n ```\r\n\r\nSo I want to ask what cause this problems and how I can fix it or sending video file to other Spring App running on other port properly.\r\n","title":"Error while sending Video File from Java Spring Microservice to other Microservice on other port using Spring Rest Template","body":"<p>Right now I have 2 Spring App.</p>\n<p>App A will have a controller that will receive a video file ad Multipart file and sending the file to App B via rest template.</p>\n<p>Some Code from App A that handle sending request to App B.</p>\n<pre><code>@RestController\npublic class AppAController {\n\n@Autowired\nprivate final AppBService service;\n\n@PostMapping(&quot;/sendToB&quot;)\n   public ResponseEntity&lt;String&gt; contoller(@RequestParam(&quot;file&quot;) MultipartFile file) {\n       String result = service.sendToB(file);\n       return new ResponseEntity&lt;&gt;(result, HttpStatus.OK);\n\n   }\n}\n\n@Service\npublic class AppBService {\n\npublic String sendToB(MultipartFile file) throws ResponseStatusException {\n       HttpHeaders headers = new HttpHeaders();\n       headers.setContentType(MediaType.MULTIPART_FORM_DATA);\n       MultiValueMap&lt;String, Object&gt; body = new LinkedMultiValueMap&lt;&gt;();\n       body.add(&quot;file&quot;, file);\n       HttpEntity&lt;MultiValueMap&lt;String, Object&gt;&gt; requestEntity = new HttpEntity&lt;&gt;(body, headers);\n       String serverUrl = &quot;http://127.0.0.1:8090/makeFrames&quot;;\n       RestTemplate restTemplate = new RestTemplate();\n       ResponseEntity&lt;String&gt; response = restTemplate.exchange(\n               serverUrl,\n               HttpMethod.POST,\n               requestEntity,\n               String.class\n       );\n       if (response.getStatusCode() != HttpStatus.OK) {\n           throw new ResponseStatusException(response.getStatusCode(), response.getBody());\n       }\n       return response.getBody();\n   }\n}\n\n</code></pre>\n<p>And for App B, it will receive a video and extracting key frames from a video using JavaCV.</p>\n<pre><code>@RestController\npublic class ProcessorController {\n\n@PostMapping(&quot;/makeFrames&quot;)\n   public ResponseEntity&lt;String&gt; framesExtractorController(@RequestParam(&quot;file&quot;) MultipartFile file) {\n       try {\n           File result = FramesExtractor.grabFrames(file);\n           return new ResponseEntity&lt;&gt;(result.getAbsolutePath(), HttpStatus.OK);\n       } catch (IOException e) {\n           return new ResponseEntity&lt;&gt;(e.getMessage(), HttpStatus.NOT_FOUND);\n       }\n   }\n}\n\npublic class FramesExtractor {\n\n   private static final Logger LOG = LoggerFactory.getLogger(FramesExtractor.class);\n\n   private FramesExtractor() {\n   }\n\n   public static File grabFrames(MultipartFile video) throws IOException {\n       LOG.info(&quot;Extracting Frames from the video &quot; + video.getName());\n       String directoryName = video.getOriginalFilename() + &quot;-frames-result&quot;;\n       directoryAssurance(directoryName);\n       try (FFmpegFrameGrabber frameGrabber = new FFmpegFrameGrabber(video.getInputStream());\n            Java2DFrameConverter converter = new Java2DFrameConverter()) {\n           frameGrabber.setImageWidth(480);\n           frameGrabber.setImageHeight(360);\n           frameGrabber.start();\n           Frame frame;\n           int i = 0;\n           while ((frame = frameGrabber.grabKeyFrame()) != null) {\n               BufferedImage bi = converter.getBufferedImage(frame);\n               ImageIO.write(bi, &quot;png&quot;, new File(directoryName + &quot;/&quot; + String.format(&quot;%03d&quot;, i) + &quot;.png&quot;));\n               i++;\n           }\n           frameGrabber.stop();\n           LOG.info(&quot;Finish Extracting Frames&quot;);\n           return new File(directoryName);\n       } catch (Exception e) {\n           LOG.error(e.getMessage());\n           throw e;\n       }\n   }\n}\n</code></pre>\n<p>Both app A and B have these properties set to their application.properties files.</p>\n<pre><code>server.port={There respective port}\nspring.servlet.multipart.enabled=true\nspring.servlet.multipart.max-file-size=100MB\nspring.servlet.multipart.max-request-size=100MB\n</code></pre>\n<p>And when i testing the application by using PostMan to send post request with video file in form-data body to App A /sendToB api i receive this error message.</p>\n<pre><code>&quot;Type definition error: [simple type, class java.io.FileDescriptor]; nested exception is com.fasterxml.jackson.databind.exc.InvalidDefinitionException: No serializer found for class java.io.FileDescriptor and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationFeature.FAIL_ON_EMPTY_BEANS) (through reference chain: org.springframework.web.multipart.support.StandardMultipartHttpServletRequest$StandardMultipartFile[\\&quot;inputStream\\&quot;]-&gt;java.io.FileInputStream[\\&quot;fd\\&quot;])&quot;\n</code></pre>\n<p>So I want to ask what cause this problems and how I can fix it or sending video file to other Spring App running on other port properly.</p>\n"},{"tags":["java","spring-boot","apache-flink","flink-stateful-functions","apache-stateful-functions"],"answers":[{"tags":[],"owner":{"account_id":82425,"reputation":8270,"user_id":231762,"display_name":"kkrugler"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655049298,"creation_date":1655049298,"answer_id":72593757,"question_id":72569705,"body_markdown":"From the stack trace, it looks like you&#39;ve got a value in the StateFun configuration that&#39;s an array instead of a string. If you have a configuration that&#39;s multi-valued, sometimes it just needs to be a comma-separated string, not an array.","title":"Apache Flink + StateFul functions + Sprint boot -ProgramInvocationException:","body":"<p>From the stack trace, it looks like you've got a value in the StateFun configuration that's an array instead of a string. If you have a configuration that's multi-valued, sometimes it just needs to be a comma-separated string, not an array.</p>\n"}],"owner":{"account_id":307668,"reputation":2161,"user_id":619097,"accept_rate":57,"display_name":"Rams"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":232,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1655049298,"creation_date":1654840925,"question_id":72569705,"body_markdown":"I&#39;m pretty new to Apache flink and stateful functions just trying some code.\r\n\r\nI created a simple stateful greeting application using spring boot and included all necessary dependencies, created a fat jar.\r\n\r\nI&#39;m trying to run this jar on flink standalone cluster using the below command\r\n\r\n    ./flink run -c org.apache.flink.statefun.flink.core.StatefulFunctionsJob ./statefun-example-1.0-SNAPSHOT-jar-with-dependencies.jar\r\n\r\nI&#39;m getting below exceptions\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zcvaK.png\r\n\r\nCan anyone let me know what is this issue?\r\n\r\nThanks","title":"Apache Flink + StateFul functions + Sprint boot -ProgramInvocationException:","body":"<p>I'm pretty new to Apache flink and stateful functions just trying some code.</p>\n<p>I created a simple stateful greeting application using spring boot and included all necessary dependencies, created a fat jar.</p>\n<p>I'm trying to run this jar on flink standalone cluster using the below command</p>\n<pre><code>./flink run -c org.apache.flink.statefun.flink.core.StatefulFunctionsJob ./statefun-example-1.0-SNAPSHOT-jar-with-dependencies.jar\n</code></pre>\n<p>I'm getting below exceptions\n<a href=\"https://i.stack.imgur.com/zcvaK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zcvaK.png\" alt=\"enter image description here\" /></a></p>\n<p>Can anyone let me know what is this issue?</p>\n<p>Thanks</p>\n"},{"tags":["java","akka-typed"],"comments":[{"owner":{"account_id":5955901,"reputation":10524,"user_id":4682610,"accept_rate":29,"display_name":"Florian Schaetz"},"score":1,"creation_date":1655017253,"post_id":72463923,"comment_id":128226954,"body_markdown":"`system.tell( new StopMessage() ); ` ?","body":"<code>system.tell( new StopMessage() ); </code> ?"}],"answers":[{"tags":[],"owner":{"account_id":5955901,"reputation":10524,"user_id":4682610,"accept_rate":29,"display_name":"Florian Schaetz"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1655048728,"creation_date":1655047143,"answer_id":72593496,"question_id":72463923,"body_markdown":"Ok, let&#39;s try to sort this mess a bit... First of all, your question is highly unclear:\r\n\r\nIn the title, you ask for something based on two JVMs, but in the text you ask for a &quot;*second (short lived) system, or actor, or whatever*&quot;. No clue if multiple JVMs are a requirement or just an idea to solve this. Additionally, your example code is something that - disregarding clustering - works in one JVM and you also only mention a second &quot;*actor*&quot; there. \r\n\r\nSo, if the requirement is using two JVMs, then I would suggest making it more clear in what way, why, etc. Then people can also actually provide help for that part.\r\n\r\nFor now, let me assume you want to simply have...\r\n\r\n 1. A (typed) actor system\r\n 2. ...that can somehow process `StopMessage`/`SnapshotMessage`...\r\n 3. ...both of which can be triggered from the outside\r\n\r\nThe way you can do this very simply is the usual typed way:\r\n\r\n 1. Define a RootGuardian actor that accepts those two messages (that actor is basically what the implicit /user actor was in classic) - you have to do that for your Typed actor system anyway (because to setup a typed actor system, you supply the behavior of the RootGuardian).\r\n 2. Let it create the needed child actors to process those messages (either at start or when needed). Of course, in your simple example, the root guardian can also process these messages itself, but an actorsystem with only one actor is not a very typical use-case.\r\n 3. Let it delegate the messages to the appropriate child actor(s)\r\n 4. Add a simple api endpoint to call `system.tell ( ... )` to send the message into the system, where your RootGuardian actor will delegate it correctly.  \r\n 5. Use curl to call your api endpoint (or use any other way to communicate with your application, there are dozens, but most of them are outside the scope of akka itself)\r\n\r\nAs a general idea, Akka Typed tends to be much more strict about who can send what messages where. In Akka classic, it was easy to basically send everything everywhere and find and access any actor from everywhere, including outside the system. Unfortunately, this &quot;freedom&quot; leads to a huge amount of problems and was thus severely limited in Typed, which makes for clearer contracts and better defined message flows.\r\n\r\nOf course, in a highly complex system, you might, for example, want to use a `Receptionist` instead to find the target actor for your specific message, but since the question was for a simple application, I would skip that for now. \r\n\r\nYou can, of course, also add ways to get your ActorRefs outside the system, for example by using the Ask Pattern to implement something like an actor discovery in the RootGuardian, but there is simply no need to try to circumvent the concepts of Akka Typed by re-implementing ActorSelection. \r\n\r\nObviously you also could use clustering, start up a 2nd JVM, connect it to the cluster, send the message and shut it down again, but we can assume that this would be overkill and very, very slow (waiting for long seconds while starting up the app, connecting to the cluster, etc. just to then use a few milliseconds to send the message). \r\n\r\nIf you absolutely want a 2nd JVM there, you can, of course, for example, create simply REST client that sends the message and start that, but... **curl exists**, so... what for? \r\n\r\nSo, tl;dr: The &quot;analogous and hopefully equally easy solution&quot; is `\r\nsystem.tell( new StopMessage() );`, which is basically the same in akka typed as the code for akka classic you provided. Obviously, implementing the actor system in a way that this code works, is the (slightly) more tricky part.","title":"simplest application possible that needs multiple (two) JVMs","body":"<p>Ok, let's try to sort this mess a bit... First of all, your question is highly unclear:</p>\n<p>In the title, you ask for something based on two JVMs, but in the text you ask for a &quot;<em>second (short lived) system, or actor, or whatever</em>&quot;. No clue if multiple JVMs are a requirement or just an idea to solve this. Additionally, your example code is something that - disregarding clustering - works in one JVM and you also only mention a second &quot;<em>actor</em>&quot; there.</p>\n<p>So, if the requirement is using two JVMs, then I would suggest making it more clear in what way, why, etc. Then people can also actually provide help for that part.</p>\n<p>For now, let me assume you want to simply have...</p>\n<ol>\n<li>A (typed) actor system</li>\n<li>...that can somehow process <code>StopMessage</code>/<code>SnapshotMessage</code>...</li>\n<li>...both of which can be triggered from the outside</li>\n</ol>\n<p>The way you can do this very simply is the usual typed way:</p>\n<ol>\n<li>Define a RootGuardian actor that accepts those two messages (that actor is basically what the implicit /user actor was in classic) - you have to do that for your Typed actor system anyway (because to setup a typed actor system, you supply the behavior of the RootGuardian).</li>\n<li>Let it create the needed child actors to process those messages (either at start or when needed). Of course, in your simple example, the root guardian can also process these messages itself, but an actorsystem with only one actor is not a very typical use-case.</li>\n<li>Let it delegate the messages to the appropriate child actor(s)</li>\n<li>Add a simple api endpoint to call <code>system.tell ( ... )</code> to send the message into the system, where your RootGuardian actor will delegate it correctly.</li>\n<li>Use curl to call your api endpoint (or use any other way to communicate with your application, there are dozens, but most of them are outside the scope of akka itself)</li>\n</ol>\n<p>As a general idea, Akka Typed tends to be much more strict about who can send what messages where. In Akka classic, it was easy to basically send everything everywhere and find and access any actor from everywhere, including outside the system. Unfortunately, this &quot;freedom&quot; leads to a huge amount of problems and was thus severely limited in Typed, which makes for clearer contracts and better defined message flows.</p>\n<p>Of course, in a highly complex system, you might, for example, want to use a <code>Receptionist</code> instead to find the target actor for your specific message, but since the question was for a simple application, I would skip that for now.</p>\n<p>You can, of course, also add ways to get your ActorRefs outside the system, for example by using the Ask Pattern to implement something like an actor discovery in the RootGuardian, but there is simply no need to try to circumvent the concepts of Akka Typed by re-implementing ActorSelection.</p>\n<p>Obviously you also could use clustering, start up a 2nd JVM, connect it to the cluster, send the message and shut it down again, but we can assume that this would be overkill and very, very slow (waiting for long seconds while starting up the app, connecting to the cluster, etc. just to then use a few milliseconds to send the message).</p>\n<p>If you absolutely want a 2nd JVM there, you can, of course, for example, create simply REST client that sends the message and start that, but... <strong>curl exists</strong>, so... what for?</p>\n<p>So, tl;dr: The &quot;analogous and hopefully equally easy solution&quot; is <code> system.tell( new StopMessage() );</code>, which is basically the same in akka typed as the code for akka classic you provided. Obviously, implementing the actor system in a way that this code works, is the (slightly) more tricky part.</p>\n"}],"owner":{"account_id":2260958,"reputation":103,"user_id":12693834,"display_name":"fritz"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72593496,"answer_count":1,"score":0,"last_activity_date":1655048728,"creation_date":1654095148,"question_id":72463923,"body_markdown":"I have an actor system &quot;Main&quot; running potentially forever. This main actor understands &quot;Snapshot&quot; or &quot;Stop&quot; messages (defined by me). \r\n\r\nI would like to create a bash script that, while Main actor is running, launches a second (short lived) system, or actor, or whatever and sends a snapshot or stop message to the Main actor. \r\n\r\nWith akka classic that was very easy with actorSelection from a secondary actor\r\n\r\n    ActorRef mainActorRef = Await.result(system.actorSelection(&quot;akka.main.actor.path&quot;).resolveOne(timeout));\r\n    \r\n    mainActorRef.send(new StopMessage() or new SnapsthotMessage());\r\n\r\nWhat is the analogous and hopefully equally easy solution in akka typed?\r\n","title":"simplest application possible that needs multiple (two) JVMs","body":"<p>I have an actor system &quot;Main&quot; running potentially forever. This main actor understands &quot;Snapshot&quot; or &quot;Stop&quot; messages (defined by me).</p>\n<p>I would like to create a bash script that, while Main actor is running, launches a second (short lived) system, or actor, or whatever and sends a snapshot or stop message to the Main actor.</p>\n<p>With akka classic that was very easy with actorSelection from a secondary actor</p>\n<pre><code>ActorRef mainActorRef = Await.result(system.actorSelection(&quot;akka.main.actor.path&quot;).resolveOne(timeout));\n\nmainActorRef.send(new StopMessage() or new SnapsthotMessage());\n</code></pre>\n<p>What is the analogous and hopefully equally easy solution in akka typed?</p>\n"},{"tags":["java","angular","frontend","backend","http-delete"],"answers":[{"tags":[],"owner":{"account_id":15498234,"reputation":783,"user_id":11370312,"display_name":"SvenTUM"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1655041299,"creation_date":1655034478,"answer_id":72591904,"question_id":72591842,"body_markdown":"This combination of Access-Control headers is invalid.\r\n```java\r\n        resp.getHeaders().add(&quot;Content-Type&quot;, &quot;application/json&quot;);\r\n        resp.getHeaders().add(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;);\r\n        resp.getHeaders().add(&quot;Access-Control-Allow-Headers&quot;, &quot;*&quot;);\r\n        resp.getHeaders().add(&quot;Access-Control-Allow-Credentials&quot;, &quot;true&quot;);\r\n```\r\nYou cannot set [`Access-Control-Allow-Origin`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Allow-Origin) to `*` and also allow [`Access-Control-Allow-Credentials`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Allow-Credentials). \r\n\r\n&gt; For requests **without credentials**, the literal value &quot;*&quot; can be specified as a wildcard; the value tells browsers to allow requesting code from any origin to access the resource. Attempting to use the wildcard with credentials results in an error.\r\n\r\nThis might be a large scale issue of the system architecture.\r\nFor now you could test setting the _Allow-Origin_ header like this:\r\n\r\n```java\r\n        resp.getHeaders().add(&quot;Access-Control-Allow-Origin&quot;, &quot;http://localhost:8100&quot;);\r\n```\r\n\r\nHowever if it&#39;s supposed to work from an arbitrary number of clients another architecture might be necessary. \r\n\r\nCORS is a security feature. Do not &quot;trial and error&quot; around with security features!","title":"Cors blocking HTTP delete Method","body":"<p>This combination of Access-Control headers is invalid.</p>\n<pre class=\"lang-java prettyprint-override\"><code>        resp.getHeaders().add(&quot;Content-Type&quot;, &quot;application/json&quot;);\n        resp.getHeaders().add(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;);\n        resp.getHeaders().add(&quot;Access-Control-Allow-Headers&quot;, &quot;*&quot;);\n        resp.getHeaders().add(&quot;Access-Control-Allow-Credentials&quot;, &quot;true&quot;);\n</code></pre>\n<p>You cannot set <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Allow-Origin\" rel=\"nofollow noreferrer\"><code>Access-Control-Allow-Origin</code></a> to <code>*</code> and also allow <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Allow-Credentials\" rel=\"nofollow noreferrer\"><code>Access-Control-Allow-Credentials</code></a>.</p>\n<blockquote>\n<p>For requests <strong>without credentials</strong>, the literal value &quot;*&quot; can be specified as a wildcard; the value tells browsers to allow requesting code from any origin to access the resource. Attempting to use the wildcard with credentials results in an error.</p>\n</blockquote>\n<p>This might be a large scale issue of the system architecture.\nFor now you could test setting the <em>Allow-Origin</em> header like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>        resp.getHeaders().add(&quot;Access-Control-Allow-Origin&quot;, &quot;http://localhost:8100&quot;);\n</code></pre>\n<p>However if it's supposed to work from an arbitrary number of clients another architecture might be necessary.</p>\n<p>CORS is a security feature. Do not &quot;trial and error&quot; around with security features!</p>\n"}],"owner":{"account_id":25531514,"reputation":55,"user_id":19319450,"display_name":"Lytrix"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":667,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72591904,"answer_count":1,"score":0,"last_activity_date":1655047802,"creation_date":1655033967,"question_id":72591842,"body_markdown":"I am getting a CORS error when I try to use my HTTP Delete method.\r\nMy Frontend is Angular-ionic and my Server is a Java server. Both are self-made.\r\n\r\nI tried to disable CORS in the Browser, by doing so I managed the Request to work and the Error to disappear. Although that&#39;s fine, my goal is to make it work every time for EVERY user.\r\n\r\nHere is my Code with a bit of Background:\r\n\r\n```    deleteUser(): Observable&lt;any&gt;{\r\n      console.log(&#39;User Management Service Delete User()&#39;);\r\n      const myParams = new HttpParams().set(&#39;id&#39;, this.cookieService.get(&#39;AccessToken&#39;));\r\n      console.log(myParams);\r\n      return this.http.delete(this.endpoint + &#39;users/delete&#39;, { params: myParams});\r\n    }\r\n```\r\nThe code above is my FRONTEND (clientside) code. I am simply trying to delete a user.\r\n\r\n```    @HTTPServer.Context(value = &quot;umyServerUrl/users/delete, methods = &quot;DELETE&quot;)\r\n    public int serveUserDelete(HTTPServer.Request req, HTTPServer.Response resp) throws IOException {\r\n        Map&lt;String, String&gt; params = req.getParams();\r\n        String response;\r\n        String paramvalue;\r\n        String  accessToken;    \r\n        \r\n        resp.getHeaders().add(&quot;Content-Type&quot;, &quot;application/json&quot;);\r\n        resp.getHeaders().add(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;);\r\n        resp.getHeaders().add(&quot;Access-Control-Allow-Headers&quot;, &quot;*&quot;);\r\n        resp.getHeaders().add(&quot;Access-Control-Allow-Credentials&quot;, &quot;true&quot;);\r\n        resp.getHeaders().add(&quot;id&quot;, &quot;*&quot;);\r\n        resp.getHeaders().add(&quot;Access-Control-Allow-Methods&quot;, &quot;OPTIONS, DELETE, POST, GET, PATCH, PUT&quot;);\r\n        \r\n        response = &quot;&quot;;\r\n        //Id aus dem Parameter auslesen\r\n        if (params.containsKey(&quot;id&quot;)) {\r\n            //es gibt einen Parameter id. Suche den Wertd dazu\r\n            accessToken = params.get(&quot;id&quot;);\r\n            System.out.println(accessToken);\r\n            \r\n        } else {\r\n            accessToken = null;\r\n        }\r\n        response = um.userDelete(accessToken);\r\n        resp.send(200, response);\r\n        return 0;\r\n    }\r\n```\r\nThe Code above now, is my Java server.\r\nThe headers were added cause of trial and error.\r\n\r\nHere the error I am getting:\r\n```\r\nAccess to XMLHttpRequest at &#39;http://localhost:8080/umyServerUrl/users/delete?id=u@Yy0NZPLx%266HxYNF%23tv&#39; \r\nfrom origin &#39;http://localhost:8100&#39; has been blocked by CORS policy: Response to preflight request doesn&#39;t pass access control check: \r\nNo &#39;Access-Control-Allow-Origin&#39; header is present on the requested resource.\r\n```\r\n\r\nthrew testing (with disabled browser cors etc.) I found out that the methods on my server work just fine.\r\n\r\nHere you can see my &quot;PARAMS&quot; and the Observable of my delete Request printed in the Console:\r\n```\r\nHttpParams&#160;\r\n{updates: Array(1), \r\ncloneFrom: HttpParams, \r\nencoder: HttpUrlEncodingCodec, \r\nmap: null}\r\ncloneFrom: \r\nnullencoder: \r\nHttpUrlEncodingCodec&#160;{}[[Prototype]]:\r\nObjectconstructor: class\r\nHttpUrlEncodingCodecdecodeKey: ƒ \r\ndecodeKey(key)decodeValue: ƒ \r\ndecodeValue(value)encodeKey: ƒ \r\nencodeKey(key)encodeValue: ƒ \r\nencodeValue(value)[[Prototype]]: \r\nObjectmap: \r\nMap(1)[[Entries]]0: {&quot;id&quot; =&gt; Array(1)}\r\nkey: &quot;id&quot; value: [&#39;hTxYusBwuB7pbUUCkW9E&#39;]size: 1[[Prototype]]:\r\nMapupdates: null[[Prototype]]: \r\nObject\r\nuser-management.service.ts:35 \r\n\r\n**Oberservabel:**\r\n\r\nObservable {_isScalar: false, source: Observable, \r\noperator: MapOperator}\r\noperator: MapOperator\r\nproject: res =&gt; res.body\r\nlength: 1\r\nname: &quot;&quot;\r\narguments: (...)\r\ncaller: (...)\r\n[[FunctionLocation]]: http.mjs:1300\r\n[[Prototype]]: ƒ ()\r\n[[Scopes]]: Scopes[2]\r\nthisArg: undefined\r\n[[Prototype]]: Object\r\ncall: ƒ call(subscriber, source)\r\nconstructor: class MapOperator\r\n[[Prototype]]: Object\r\nsource: Observable\r\noperator: FilterOperator {thisArg: undefined, predicate: ƒ}\r\nsource: Observable {_isScalar: false, source: Observable, operator: MergeMapOperator}\r\n_isScalar: false\r\n[[Prototype]]: Object\r\n_isScalar: false\r\n[[Prototype]]: Object\r\n````\r\n\r\nPLEASE HELP","title":"Cors blocking HTTP delete Method","body":"<p>I am getting a CORS error when I try to use my HTTP Delete method.\nMy Frontend is Angular-ionic and my Server is a Java server. Both are self-made.</p>\n<p>I tried to disable CORS in the Browser, by doing so I managed the Request to work and the Error to disappear. Although that's fine, my goal is to make it work every time for EVERY user.</p>\n<p>Here is my Code with a bit of Background:</p>\n<pre><code>      console.log('User Management Service Delete User()');\n      const myParams = new HttpParams().set('id', this.cookieService.get('AccessToken'));\n      console.log(myParams);\n      return this.http.delete(this.endpoint + 'users/delete', { params: myParams});\n    }\n</code></pre>\n<p>The code above is my FRONTEND (clientside) code. I am simply trying to delete a user.</p>\n<pre><code>    public int serveUserDelete(HTTPServer.Request req, HTTPServer.Response resp) throws IOException {\n        Map&lt;String, String&gt; params = req.getParams();\n        String response;\n        String paramvalue;\n        String  accessToken;    \n        \n        resp.getHeaders().add(&quot;Content-Type&quot;, &quot;application/json&quot;);\n        resp.getHeaders().add(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;);\n        resp.getHeaders().add(&quot;Access-Control-Allow-Headers&quot;, &quot;*&quot;);\n        resp.getHeaders().add(&quot;Access-Control-Allow-Credentials&quot;, &quot;true&quot;);\n        resp.getHeaders().add(&quot;id&quot;, &quot;*&quot;);\n        resp.getHeaders().add(&quot;Access-Control-Allow-Methods&quot;, &quot;OPTIONS, DELETE, POST, GET, PATCH, PUT&quot;);\n        \n        response = &quot;&quot;;\n        //Id aus dem Parameter auslesen\n        if (params.containsKey(&quot;id&quot;)) {\n            //es gibt einen Parameter id. Suche den Wertd dazu\n            accessToken = params.get(&quot;id&quot;);\n            System.out.println(accessToken);\n            \n        } else {\n            accessToken = null;\n        }\n        response = um.userDelete(accessToken);\n        resp.send(200, response);\n        return 0;\n    }\n</code></pre>\n<p>The Code above now, is my Java server.\nThe headers were added cause of trial and error.</p>\n<p>Here the error I am getting:</p>\n<pre><code>Access to XMLHttpRequest at 'http://localhost:8080/umyServerUrl/users/delete?id=u@Yy0NZPLx%266HxYNF%23tv' \nfrom origin 'http://localhost:8100' has been blocked by CORS policy: Response to preflight request doesn't pass access control check: \nNo 'Access-Control-Allow-Origin' header is present on the requested resource.\n</code></pre>\n<p>threw testing (with disabled browser cors etc.) I found out that the methods on my server work just fine.</p>\n<p>Here you can see my &quot;PARAMS&quot; and the Observable of my delete Request printed in the Console:</p>\n<pre><code>HttpParams \n{updates: Array(1), \ncloneFrom: HttpParams, \nencoder: HttpUrlEncodingCodec, \nmap: null}\ncloneFrom: \nnullencoder: \nHttpUrlEncodingCodec {}[[Prototype]]:\nObjectconstructor: class\nHttpUrlEncodingCodecdecodeKey: ƒ \ndecodeKey(key)decodeValue: ƒ \ndecodeValue(value)encodeKey: ƒ \nencodeKey(key)encodeValue: ƒ \nencodeValue(value)[[Prototype]]: \nObjectmap: \nMap(1)[[Entries]]0: {&quot;id&quot; =&gt; Array(1)}\nkey: &quot;id&quot; value: ['hTxYusBwuB7pbUUCkW9E']size: 1[[Prototype]]:\nMapupdates: null[[Prototype]]: \nObject\nuser-management.service.ts:35 \n\n**Oberservabel:**\n\nObservable {_isScalar: false, source: Observable, \noperator: MapOperator}\noperator: MapOperator\nproject: res =&gt; res.body\nlength: 1\nname: &quot;&quot;\narguments: (...)\ncaller: (...)\n[[FunctionLocation]]: http.mjs:1300\n[[Prototype]]: ƒ ()\n[[Scopes]]: Scopes[2]\nthisArg: undefined\n[[Prototype]]: Object\ncall: ƒ call(subscriber, source)\nconstructor: class MapOperator\n[[Prototype]]: Object\nsource: Observable\noperator: FilterOperator {thisArg: undefined, predicate: ƒ}\nsource: Observable {_isScalar: false, source: Observable, operator: MergeMapOperator}\n_isScalar: false\n[[Prototype]]: Object\n_isScalar: false\n[[Prototype]]: Object\n</code></pre>\n<p>PLEASE HELP</p>\n"},{"tags":["java","apache-spark"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1626342351,"post_id":68390868,"comment_id":120869559,"body_markdown":"Is this a Maven build?","body":"Is this a Maven build?"},{"owner":{"account_id":12119561,"reputation":511,"user_id":8851717,"accept_rate":40,"display_name":"Fairy"},"score":0,"creation_date":1626348790,"post_id":68390868,"comment_id":120872023,"body_markdown":"Yes, this is maven build with standalone spark","body":"Yes, this is maven build with standalone spark"}],"answers":[{"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1626352002,"creation_date":1626352002,"answer_id":68393821,"question_id":68390868,"body_markdown":"I would use the key `/fairscheduler.xml` in that case, and put it directly in the build `resources` folder to keep things as simple as possible","title":"FileNotFoundException on spark.scheduler.allocation.file","body":"<p>I would use the key <code>/fairscheduler.xml</code> in that case, and put it directly in the build <code>resources</code> folder to keep things as simple as possible</p>\n"},{"tags":[],"owner":{"account_id":15658129,"reputation":1,"user_id":19322705,"display_name":"DambOO"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655047720,"creation_date":1655013740,"answer_id":72589833,"question_id":68390868,"body_markdown":"I&#39;m faced same issue and resolved this config \r\n ```\r\nconfig(&quot;spark.scheduler.allocation.file&quot;,&quot;file:///opt/spark/conf/fairscheduler.xml.template&quot;)\r\n\r\n// scheduler file at local\r\n\r\nconf.set(&quot;spark.scheduler.allocation.file&quot;, &quot;file:///path/to/file&quot;)\r\n\r\n// scheduler file at hdfs\r\n\r\nconf.set(&quot;spark.scheduler.allocation.file&quot;, &quot;hdfs:///path/to/file&quot;)\r\n\r\n```\r\n\r\nSee [the documentation](https://spark.apache.org/docs/latest/job-scheduling.html#fair-scheduler-pools).","title":"FileNotFoundException on spark.scheduler.allocation.file","body":"<p>I'm faced same issue and resolved this config</p>\n<pre><code>config(&quot;spark.scheduler.allocation.file&quot;,&quot;file:///opt/spark/conf/fairscheduler.xml.template&quot;)\n\n// scheduler file at local\n\nconf.set(&quot;spark.scheduler.allocation.file&quot;, &quot;file:///path/to/file&quot;)\n\n// scheduler file at hdfs\n\nconf.set(&quot;spark.scheduler.allocation.file&quot;, &quot;hdfs:///path/to/file&quot;)\n\n</code></pre>\n<p>See <a href=\"https://spark.apache.org/docs/latest/job-scheduling.html#fair-scheduler-pools\" rel=\"nofollow noreferrer\">the documentation</a>.</p>\n"}],"owner":{"account_id":12119561,"reputation":511,"user_id":8851717,"accept_rate":40,"display_name":"Fairy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":781,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1655047720,"creation_date":1626339692,"question_id":68390868,"body_markdown":"I&#39;m trying to implement fair scheduling in spark via pools. As said in [docs][1], I just need to put fairscheduler.xml file in classpath and spark will automatically create described pools, but it didn&#39;t work for me. I tried to put allocation file property in different ways:\r\n\r\n`(&quot;spark.scheduler.allocation.file&quot;, &quot;conf/fairscheduler.xml&quot;)` \r\n\r\n`(&quot;spark.scheduler.allocation.file&quot;, &quot;/conf/fairscheduler.xml&quot;)`\r\n\r\n`(&quot;spark.scheduler.allocation.file&quot;, &quot;src/main/resources/conf/fairscheduler.xml&quot;)`\r\n\r\n`(&quot;spark.scheduler.allocation.file&quot;, &quot;/src/main/resources/conf/fairscheduler.xml&quot;)`\r\n\r\nBut it only works if I specify the absolute path, like `C:/project_name/src/main/resources/conf/fairscheduler.xml`. Of course that is not acceptable. Do someone know how to put correct path to allocation file here?\r\n\r\n  [1]: https://spark.apache.org/docs/latest/job-scheduling.html","title":"FileNotFoundException on spark.scheduler.allocation.file","body":"<p>I'm trying to implement fair scheduling in spark via pools. As said in <a href=\"https://spark.apache.org/docs/latest/job-scheduling.html\" rel=\"nofollow noreferrer\">docs</a>, I just need to put fairscheduler.xml file in classpath and spark will automatically create described pools, but it didn't work for me. I tried to put allocation file property in different ways:</p>\n<p><code>(&quot;spark.scheduler.allocation.file&quot;, &quot;conf/fairscheduler.xml&quot;)</code></p>\n<p><code>(&quot;spark.scheduler.allocation.file&quot;, &quot;/conf/fairscheduler.xml&quot;)</code></p>\n<p><code>(&quot;spark.scheduler.allocation.file&quot;, &quot;src/main/resources/conf/fairscheduler.xml&quot;)</code></p>\n<p><code>(&quot;spark.scheduler.allocation.file&quot;, &quot;/src/main/resources/conf/fairscheduler.xml&quot;)</code></p>\n<p>But it only works if I specify the absolute path, like <code>C:/project_name/src/main/resources/conf/fairscheduler.xml</code>. Of course that is not acceptable. Do someone know how to put correct path to allocation file here?</p>\n"},{"tags":["java","groovy","spock"],"comments":[{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1654338171,"post_id":72489461,"comment_id":128070501,"body_markdown":"If you want to stub a static method in a non-Groovy class, you need additional tools. With Spock&#39;s on-board means you cannot do it. You need Sarek, Mockito (inline mock maker), PowerMock or some other tool with similar capabilities.","body":"If you want to stub a static method in a non-Groovy class, you need additional tools. With Spock&#39;s on-board means you cannot do it. You need Sarek, Mockito (inline mock maker), PowerMock or some other tool with similar capabilities."}],"answers":[{"tags":[],"owner":{"account_id":23427709,"reputation":21,"user_id":17486977,"display_name":"Julia"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655047674,"creation_date":1654259975,"answer_id":72489717,"question_id":72489461,"body_markdown":"The potential &quot;Unsupported Encoding&quot; refers to the second parameter in the function. &quot;UTF-8&quot; is a valid encoding so your code will not throw an error.\r\nIf you want to throw the exception you can change it to `URLEncoder.encode(&quot;!@#&quot;, &quot;UTF-9&quot;);` since `UTF-9` is not a real encoding.\r\n\r\nIf you want to know what to do with the exception object [you can learn more here.][1]\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/essential/exceptions/","title":"Need to Cover UnsupportedEncodingException for URLEncoder.encode","body":"<p>The potential &quot;Unsupported Encoding&quot; refers to the second parameter in the function. &quot;UTF-8&quot; is a valid encoding so your code will not throw an error.\nIf you want to throw the exception you can change it to <code>URLEncoder.encode(&quot;!@#&quot;, &quot;UTF-9&quot;);</code> since <code>UTF-9</code> is not a real encoding.</p>\n<p>If you want to know what to do with the exception object <a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/\" rel=\"nofollow noreferrer\">you can learn more here.</a></p>\n"}],"owner":{"account_id":13208523,"reputation":47,"user_id":9539502,"display_name":"sajeeth"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":400,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1655047674,"creation_date":1654258718,"question_id":72489461,"body_markdown":"I need to cover the `UnsupportedEncodingException` for `URLEncoder.encode` but didn&#39;t get an exception.\r\nMy code is;\r\n```java\r\ntry {\r\n    return URLEncoder.encode(&quot;!@#&quot;, &quot;UTF-8&quot;);\r\n} catch (UnsupportedEncodingException e) {\r\n    System.out.println(&quot;exeption:&quot;+e.toString());\r\n}\r\n```\r\n\r\nAbove code i tried with all kind of inputs but didn&#39;t get the `UnsupportedEncodingException`.","title":"Need to Cover UnsupportedEncodingException for URLEncoder.encode","body":"<p>I need to cover the <code>UnsupportedEncodingException</code> for <code>URLEncoder.encode</code> but didn't get an exception.\nMy code is;</p>\n<pre class=\"lang-java prettyprint-override\"><code>try {\n    return URLEncoder.encode(&quot;!@#&quot;, &quot;UTF-8&quot;);\n} catch (UnsupportedEncodingException e) {\n    System.out.println(&quot;exeption:&quot;+e.toString());\n}\n</code></pre>\n<p>Above code i tried with all kind of inputs but didn't get the <code>UnsupportedEncodingException</code>.</p>\n"},{"tags":["java","settimeout","timeoutexception","time-limiting"],"comments":[{"owner":{"account_id":183966,"reputation":14606,"user_id":419705,"accept_rate":67,"display_name":"Roddy of the Frozen Peas"},"score":0,"creation_date":1654897568,"post_id":72580103,"comment_id":128210418,"body_markdown":"`methodB(&quot;abc)` ... You&#39;re missing a `&quot;` there.","body":"<code>methodB(&quot;abc)</code> ... You&#39;re missing a <code>&quot;</code> there."},{"owner":{"account_id":6982004,"reputation":1,"user_id":5354536,"display_name":"jyothi reddy"},"score":1,"creation_date":1654897687,"post_id":72580103,"comment_id":128210439,"body_markdown":"i just edited.. it was a typo mistake","body":"i just edited.. it was a typo mistake"}],"owner":{"account_id":6982004,"reputation":1,"user_id":5354536,"display_name":"jyothi reddy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1655047336,"creation_date":1654897433,"question_id":72580103,"body_markdown":"Currently, we are facing an issue with a read timeout for a DB call. I am trying to add a time limit on the method to wait for only 3 seconds. If the method doesn&#39;t return data in 3 seconds my execution goes to the next line. I tried to achieve this with the below code but the control is not moving to the next step even after 3 seconds. In the below code I am adding a timeout for method b execution, When method b takes more than 3 seconds to return the control should go to catch block and go to the next line of code i.e. callingMethodC. But the control is not coming out even after 3 seconds am I missing anything? Can anyone suggest?\r\n\r\n    private String methodA(){\r\n    TimeLimiter timeLimiter = new SimpleTimeLimiter();\r\n    \t\t\t\t\ttry {\r\n    \t\t\t\t\tString\tdata = timeLimiter.callWithTimeout(\r\n    \t\t\t\t\t\t\t\t() -&gt; methodB(&quot;abc&quot;), 3, TimeUnit.SECONDS, true);\r\n    \t\t\t\t\t} catch (Exception e) {\r\n    \t\t\t\t\t\tlog.error(&quot;Exception while read data from db after 3 seconds&quot;);\r\n    \t\t\t\t\t}\r\n    callmethodc();\r\n    }\r\n\r\n    private String methodB(String abc){\r\n    String result = dbrepository.get(abc);\r\n    return result;\r\n    }\r\n\r\n","title":"TimeLimiter is not stopping the method execution and going to next step","body":"<p>Currently, we are facing an issue with a read timeout for a DB call. I am trying to add a time limit on the method to wait for only 3 seconds. If the method doesn't return data in 3 seconds my execution goes to the next line. I tried to achieve this with the below code but the control is not moving to the next step even after 3 seconds. In the below code I am adding a timeout for method b execution, When method b takes more than 3 seconds to return the control should go to catch block and go to the next line of code i.e. callingMethodC. But the control is not coming out even after 3 seconds am I missing anything? Can anyone suggest?</p>\n<pre><code>private String methodA(){\nTimeLimiter timeLimiter = new SimpleTimeLimiter();\n                    try {\n                    String  data = timeLimiter.callWithTimeout(\n                                () -&gt; methodB(&quot;abc&quot;), 3, TimeUnit.SECONDS, true);\n                    } catch (Exception e) {\n                        log.error(&quot;Exception while read data from db after 3 seconds&quot;);\n                    }\ncallmethodc();\n}\n\nprivate String methodB(String abc){\nString result = dbrepository.get(abc);\nreturn result;\n}\n</code></pre>\n"},{"tags":["java","microsoft-graph-api","memberof"],"answers":[{"tags":[],"owner":{"account_id":2596604,"reputation":15928,"user_id":2250152,"accept_rate":72,"display_name":"user2250152"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1655046276,"creation_date":1655046276,"answer_id":72593379,"question_id":72591056,"body_markdown":"You are casting the results to `directoryObject` but [directoryObject][1] has no property `displayName`. \r\n\r\n    for (DirectoryObject group : memberof.getCurrentPage()) {\r\n        System.out.println(group.id);\r\n    }\r\n\r\nTry to cast the results to `group` and you should be able to read `displayName`.\r\n\r\n    for (DirectoryObject directoryObject : memberof.getCurrentPage()) {\r\n        if ( directoryObject instanceof Group) {\r\n            Group group = (Group)directoryObject;\r\n            System.out.println(group.id);\r\n            System.out.println(group.displayName);\r\n        }            \r\n    }\r\n\r\n  [1]: https://learn.microsoft.com/en-us/graph/api/resources/directoryobject?view=graph-rest-1.0#properties","title":"Cannot see displayName of Group returned by Graph API users/{id}/memberOf call (Java)","body":"<p>You are casting the results to <code>directoryObject</code> but <a href=\"https://learn.microsoft.com/en-us/graph/api/resources/directoryobject?view=graph-rest-1.0#properties\" rel=\"nofollow noreferrer\">directoryObject</a> has no property <code>displayName</code>.</p>\n<pre><code>for (DirectoryObject group : memberof.getCurrentPage()) {\n    System.out.println(group.id);\n}\n</code></pre>\n<p>Try to cast the results to <code>group</code> and you should be able to read <code>displayName</code>.</p>\n<pre><code>for (DirectoryObject directoryObject : memberof.getCurrentPage()) {\n    if ( directoryObject instanceof Group) {\n        Group group = (Group)directoryObject;\n        System.out.println(group.id);\n        System.out.println(group.displayName);\n    }            \n}\n</code></pre>\n"}],"owner":{"account_id":21058761,"reputation":13,"user_id":15477575,"display_name":"Alex Williams"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1231,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":72593379,"answer_count":1,"score":1,"last_activity_date":1655046276,"creation_date":1655027173,"question_id":72591056,"body_markdown":"I have successfully followed this MS Graph Java tutorial all the way through: &lt;https://learn.microsoft.com/en-gb/graph/tutorials/java?tabs=aad&gt;\r\n\r\nI have added my own Graph API call that returns the Groups that a given User is a member of using this code:\r\n\r\n**In App.java file**\r\n```\r\nprivate static void makeGraphCall() {\r\n        try {\r\n            final DirectoryObjectCollectionWithReferencesPage memberof = Graph.makeGraphCall();\r\n            for (DirectoryObject group : memberof.getCurrentPage()) {\r\n                System.out.println(group.id);\r\n            }\r\n        } catch (Exception e) {\r\n            System.out.println(&quot;Error making Graph call&quot;);\r\n            System.out.println(e.getMessage());\r\n        }\r\n    }\r\n```\r\n**In Graph.java file**\r\n```\r\npublic static DirectoryObjectCollectionWithReferencesPage makeGraphCall() throws Exception {\r\n    \r\n        ensureGraphForAppOnlyAuth();\r\n        return _appClient.users(&quot;{here I enter the User ID}&quot;).memberOf()\r\n                .buildRequest()\r\n                .get();\r\n    }\r\n```\r\nI used this reference to help writing the above code: &lt;https://learn.microsoft.com/en-us/graph/api/user-list-memberof?view=graph-rest-1.0&amp;tabs=http&gt; in particular this part:\r\n\r\n```\r\nGraphServiceClient graphClient = GraphServiceClient.builder().authenticationProvider( authProvider ).buildClient();\r\n\r\nDirectoryObjectCollectionWithReferencesPage memberOf = graphClient.users(&quot;{id}&quot;).memberOf()\r\n\t.buildRequest()\r\n\t.get();\r\n```\r\n\r\nWhen I run my code I get the id&#39;s of the Groups the given User is a member of which is great. However, I want to get the displayName of each Group. If I add:\r\n```\r\nSystem.out.println(group.displayName);\r\n```\r\nto my code in App.java, I get an error stating:\r\n```\r\nerror: cannot find symbol\r\n                System.out.println(group.displayName);\r\n                                        ^\r\n  symbol:   variable displayName\r\n  location: variable group of type DirectoryObject\r\n```\r\nI understand that my call to the Graph API is made using the _appClient (as opposed to the _userClient) and I have therefore made sure that my application registered in Azure has Directory.Read.All and Directory.ReadWrite.All application permissions. \r\n\r\nI have also tested my call to the Graph API in the Graph Explorer using the same User id i.e.\r\n```\r\nGET https://graph.microsoft.com/v1.0/users/{here i enter the User&#39;s id}/memberOf \r\n```\r\nand it returns full details of that User&#39;s Group memberships including the displayName of each Group.\r\n\r\nI have been searching for an answer for several days now and cannot understand where I am going wrong. Please could anyone help with my understanding and tell me how (and ideally explain why) I am not able to show the displayName of each Group the User is a member of?\r\n\r\nThanks for your help\r\n\r\n\r\n\r\n","title":"Cannot see displayName of Group returned by Graph API users/{id}/memberOf call (Java)","body":"<p>I have successfully followed this MS Graph Java tutorial all the way through: <a href=\"https://learn.microsoft.com/en-gb/graph/tutorials/java?tabs=aad\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-gb/graph/tutorials/java?tabs=aad</a></p>\n<p>I have added my own Graph API call that returns the Groups that a given User is a member of using this code:</p>\n<p><strong>In App.java file</strong></p>\n<pre><code>private static void makeGraphCall() {\n        try {\n            final DirectoryObjectCollectionWithReferencesPage memberof = Graph.makeGraphCall();\n            for (DirectoryObject group : memberof.getCurrentPage()) {\n                System.out.println(group.id);\n            }\n        } catch (Exception e) {\n            System.out.println(&quot;Error making Graph call&quot;);\n            System.out.println(e.getMessage());\n        }\n    }\n</code></pre>\n<p><strong>In Graph.java file</strong></p>\n<pre><code>public static DirectoryObjectCollectionWithReferencesPage makeGraphCall() throws Exception {\n    \n        ensureGraphForAppOnlyAuth();\n        return _appClient.users(&quot;{here I enter the User ID}&quot;).memberOf()\n                .buildRequest()\n                .get();\n    }\n</code></pre>\n<p>I used this reference to help writing the above code: <a href=\"https://learn.microsoft.com/en-us/graph/api/user-list-memberof?view=graph-rest-1.0&amp;tabs=http\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/graph/api/user-list-memberof?view=graph-rest-1.0&amp;tabs=http</a> in particular this part:</p>\n<pre><code>GraphServiceClient graphClient = GraphServiceClient.builder().authenticationProvider( authProvider ).buildClient();\n\nDirectoryObjectCollectionWithReferencesPage memberOf = graphClient.users(&quot;{id}&quot;).memberOf()\n    .buildRequest()\n    .get();\n</code></pre>\n<p>When I run my code I get the id's of the Groups the given User is a member of which is great. However, I want to get the displayName of each Group. If I add:</p>\n<pre><code>System.out.println(group.displayName);\n</code></pre>\n<p>to my code in App.java, I get an error stating:</p>\n<pre><code>error: cannot find symbol\n                System.out.println(group.displayName);\n                                        ^\n  symbol:   variable displayName\n  location: variable group of type DirectoryObject\n</code></pre>\n<p>I understand that my call to the Graph API is made using the _appClient (as opposed to the _userClient) and I have therefore made sure that my application registered in Azure has Directory.Read.All and Directory.ReadWrite.All application permissions.</p>\n<p>I have also tested my call to the Graph API in the Graph Explorer using the same User id i.e.</p>\n<pre><code>GET https://graph.microsoft.com/v1.0/users/{here i enter the User's id}/memberOf \n</code></pre>\n<p>and it returns full details of that User's Group memberships including the displayName of each Group.</p>\n<p>I have been searching for an answer for several days now and cannot understand where I am going wrong. Please could anyone help with my understanding and tell me how (and ideally explain why) I am not able to show the displayName of each Group the User is a member of?</p>\n<p>Thanks for your help</p>\n"},{"tags":["java","android","firebase","android-studio"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1655110397,"post_id":72593352,"comment_id":128244078,"body_markdown":"Since you&#39;re using Java, I think that this [resource](https://medium.com/firebase-tips-tricks/how-to-create-a-clean-firebase-authentication-using-mvvm-37f9b8eb7336) will help.","body":"Since you&#39;re using Java, I think that this <a href=\"https://medium.com/firebase-tips-tricks/how-to-create-a-clean-firebase-authentication-using-mvvm-37f9b8eb7336\" rel=\"nofollow noreferrer\">resource</a> will help."}],"owner":{"account_id":25537833,"reputation":11,"user_id":19324567,"display_name":"Priyansh Jr."},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1655046026,"creation_date":1655046026,"question_id":72593352,"body_markdown":"I don&#39;t know why I am getting error on login and sign up activity with firebase.\r\n\r\nProblem what I am facing is - whenever i click on signup button or in login button its start crashing sometimes and sometimes its redirect me to Mainactivity.class.\r\n\r\nmy Signupactivity.class\r\n\r\n```\r\npublic class SignUpActivity extends AppCompatActivity {\r\n\r\n    ActivitySignUpBinding binding;\r\n    private FirebaseAuth auth;\r\n    FirebaseDatabase database;\r\n    ProgressDialog progress;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        binding = ActivitySignUpBinding.inflate(getLayoutInflater());\r\n        setContentView(binding.getRoot());\r\n\r\n        getSupportActionBar().hide();\r\n\r\n        auth = FirebaseAuth.getInstance();\r\n        database = FirebaseDatabase.getInstance();\r\n\r\n        progress = new ProgressDialog(this);\r\n        progress.setTitle(&quot;Creating Account&quot;);\r\n        progress.setMessage(&quot;We&#39;re Creating your Account&quot;);\r\n\r\n\r\n        binding.btnSignup.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n\r\n                progress.show();\r\n                auth.createUserWithEmailAndPassword\r\n                        (binding.edEmail.getText().toString() , binding.edPassword.getText().toString()).addOnCompleteListener(new OnCompleteListener&lt;AuthResult&gt;() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task&lt;AuthResult&gt; task) {\r\n\r\n                        userModels user = new userModels\r\n                                (binding.edUsername.getText().toString() , binding.edEmail.getText().toString() , binding.edPassword.getText().toString());\r\n\r\n                        String id = task.getResult().getUser().getUid();\r\n                        database.getReference().child(&quot;Users&quot;).child(id).setValue(user);\r\n\r\n                        progress.dismiss();\r\n                        if (task.isSuccessful()){\r\n                            Intent intent = new Intent(SignUpActivity.this , LoginActivty.class);\r\n                            startActivity(intent);\r\n                        }\r\n                        else  {\r\n                            Toast.makeText(SignUpActivity.this, &quot;Authentication faild&quot;, Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        });\r\n\r\n        binding.tvRegister.setOnClickListener(view -&gt; {\r\n            Intent intent = new Intent(SignUpActivity.this , LoginActivty.class);\r\n            startActivity(intent);\r\n        });\r\n    }\r\n}\r\n```","title":"Facing Crash error or Redirecting to Mainactivity when clicking on Signup button and login both","body":"<p>I don't know why I am getting error on login and sign up activity with firebase.</p>\n<p>Problem what I am facing is - whenever i click on signup button or in login button its start crashing sometimes and sometimes its redirect me to Mainactivity.class.</p>\n<p>my Signupactivity.class</p>\n<pre><code>public class SignUpActivity extends AppCompatActivity {\n\n    ActivitySignUpBinding binding;\n    private FirebaseAuth auth;\n    FirebaseDatabase database;\n    ProgressDialog progress;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        binding = ActivitySignUpBinding.inflate(getLayoutInflater());\n        setContentView(binding.getRoot());\n\n        getSupportActionBar().hide();\n\n        auth = FirebaseAuth.getInstance();\n        database = FirebaseDatabase.getInstance();\n\n        progress = new ProgressDialog(this);\n        progress.setTitle(&quot;Creating Account&quot;);\n        progress.setMessage(&quot;We're Creating your Account&quot;);\n\n\n        binding.btnSignup.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n\n                progress.show();\n                auth.createUserWithEmailAndPassword\n                        (binding.edEmail.getText().toString() , binding.edPassword.getText().toString()).addOnCompleteListener(new OnCompleteListener&lt;AuthResult&gt;() {\n                    @Override\n                    public void onComplete(@NonNull Task&lt;AuthResult&gt; task) {\n\n                        userModels user = new userModels\n                                (binding.edUsername.getText().toString() , binding.edEmail.getText().toString() , binding.edPassword.getText().toString());\n\n                        String id = task.getResult().getUser().getUid();\n                        database.getReference().child(&quot;Users&quot;).child(id).setValue(user);\n\n                        progress.dismiss();\n                        if (task.isSuccessful()){\n                            Intent intent = new Intent(SignUpActivity.this , LoginActivty.class);\n                            startActivity(intent);\n                        }\n                        else  {\n                            Toast.makeText(SignUpActivity.this, &quot;Authentication faild&quot;, Toast.LENGTH_SHORT).show();\n                        }\n                    }\n                });\n            }\n        });\n\n        binding.tvRegister.setOnClickListener(view -&gt; {\n            Intent intent = new Intent(SignUpActivity.this , LoginActivty.class);\n            startActivity(intent);\n        });\n    }\n}\n</code></pre>\n"},{"tags":["java","apache-spark","hbase","amazon-emr"],"answers":[{"tags":[],"owner":{"account_id":9812299,"reputation":1,"user_id":7270024,"display_name":"bocacorazon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655044993,"creation_date":1655044993,"answer_id":72593218,"question_id":72567864,"body_markdown":"Solved the issue by removing the &quot;provided&quot; scope -and thus including the dependency on the uber-jar, plus adding the Hbase pom dependency (not 100% sure whether this is strictly necessary)\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.hbase&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hbase-client&lt;/artifactId&gt;\r\n            &lt;version&gt;${hbase.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.hbase&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hbase&lt;/artifactId&gt;\r\n            &lt;version&gt;${hbase.version}&lt;/version&gt;\r\n            &lt;type&gt;pom&lt;/type&gt;\r\n        &lt;/dependency&gt;\r\n","title":"Connecting to EMR HBase using Java","body":"<p>Solved the issue by removing the &quot;provided&quot; scope -and thus including the dependency on the uber-jar, plus adding the Hbase pom dependency (not 100% sure whether this is strictly necessary)</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.hbase&lt;/groupId&gt;\n        &lt;artifactId&gt;hbase-client&lt;/artifactId&gt;\n        &lt;version&gt;${hbase.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.hbase&lt;/groupId&gt;\n        &lt;artifactId&gt;hbase&lt;/artifactId&gt;\n        &lt;version&gt;${hbase.version}&lt;/version&gt;\n        &lt;type&gt;pom&lt;/type&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":9812299,"reputation":1,"user_id":7270024,"display_name":"bocacorazon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":267,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1655044993,"creation_date":1654820101,"question_id":72567864,"body_markdown":"I am trying to connect to HBase from inside a Spark program running on EMR 5.35 (Hadoop 2.10, Spark 2.4.8, HBase 1.4.13)\r\nWhen not trying to connect to HBase, my Spark programs run perfectly.\r\n\r\nHowever, as I add my HBase code, the Spark program dies when creating the configuration:\r\n\r\n     conf = HBaseConfiguration.create();\r\n\r\n     for (Iterator&lt;Map.Entry&lt;String, String&gt;&gt; it = conf.iterator(); it.hasNext(); ) {\r\n         Map.Entry&lt;String, String&gt; e = it.next();\r\n         System.out.println(e);\r\n     }\r\n\r\n     connection = ConnectionFactory.createConnection(conf);\r\n     admin = connection.getAdmin();\r\n\r\nI tried adding resources:\r\n\r\n    \r\n        conf = HBaseConfiguration.create();\r\n        conf.addResource(new Path(&quot;/etc/hadoop/conf/core-site.xml&quot;));\r\n        conf.addResource(new Path(&quot;/etc/hbase/conf/hbase-site.xml&quot;));\r\n\r\nwithout success.\r\n\r\nI have commented out all lines after HBaseconfiguration.create() but the program dies anyway. I believe the problem lies there. I get no useful stack trace. The driver dies immediately upon hitting the line.\r\n\r\nThe POM: \r\n\r\n    \r\n    &lt;properties&gt;\r\n        &lt;spark.version&gt;2.4.8&lt;/spark.version&gt;\r\n        &lt;hbase.version&gt;1.4.13&lt;/hbase.version&gt;\r\n        &lt;hadoop.version&gt;2.10.1&lt;/hadoop.version&gt;\r\n        &lt;jackson.version&gt;2.13.2&lt;/jackson.version&gt;\r\n        &lt;!-- Maven stuff --&gt;\r\n        &lt;java.build.version&gt;1.8&lt;/java.build.version&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\r\n                &lt;artifactId&gt;bom&lt;/artifactId&gt;\r\n                &lt;version&gt;2.17.103&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n                &lt;scope&gt;import&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;io.netty&lt;/groupId&gt;\r\n                &lt;artifactId&gt;netty-all&lt;/artifactId&gt;\r\n                &lt;version&gt;4.1.77.Final&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;io.netty&lt;/groupId&gt;\r\n                &lt;artifactId&gt;netty&lt;/artifactId&gt;\r\n                &lt;version&gt;3.9.9.Final&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    &lt;/dependencyManagement&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spark-core_2.12&lt;/artifactId&gt;\r\n            &lt;version&gt;${spark.version}&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spark-sql_2.12&lt;/artifactId&gt;\r\n            &lt;version&gt;${spark.version}&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hadoop-aws&lt;/artifactId&gt;\r\n            &lt;version&gt;${hadoop.version}&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hadoop-common&lt;/artifactId&gt;\r\n            &lt;version&gt;${hadoop.version}&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.hbase&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hbase-client&lt;/artifactId&gt;\r\n            &lt;version&gt;${hbase.version}&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;!--  AWS --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\r\n            &lt;artifactId&gt;s3&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\r\n            &lt;artifactId&gt;athena&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\r\n            &lt;artifactId&gt;auth&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\r\n            &lt;artifactId&gt;opensearch&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\r\n            &lt;artifactId&gt;apache-client&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\r\n            &lt;artifactId&gt;httpcore&lt;/artifactId&gt;\r\n            &lt;version&gt;4.4.15&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.elasticsearch.client&lt;/groupId&gt;\r\n            &lt;artifactId&gt;elasticsearch-rest-client&lt;/artifactId&gt;\r\n            &lt;version&gt;5.6.16&lt;/version&gt;\r\n        &lt;/dependency&gt;","title":"Connecting to EMR HBase using Java","body":"<p>I am trying to connect to HBase from inside a Spark program running on EMR 5.35 (Hadoop 2.10, Spark 2.4.8, HBase 1.4.13)\nWhen not trying to connect to HBase, my Spark programs run perfectly.</p>\n<p>However, as I add my HBase code, the Spark program dies when creating the configuration:</p>\n<pre><code> conf = HBaseConfiguration.create();\n\n for (Iterator&lt;Map.Entry&lt;String, String&gt;&gt; it = conf.iterator(); it.hasNext(); ) {\n     Map.Entry&lt;String, String&gt; e = it.next();\n     System.out.println(e);\n }\n\n connection = ConnectionFactory.createConnection(conf);\n admin = connection.getAdmin();\n</code></pre>\n<p>I tried adding resources:</p>\n<pre><code>    conf = HBaseConfiguration.create();\n    conf.addResource(new Path(&quot;/etc/hadoop/conf/core-site.xml&quot;));\n    conf.addResource(new Path(&quot;/etc/hbase/conf/hbase-site.xml&quot;));\n</code></pre>\n<p>without success.</p>\n<p>I have commented out all lines after HBaseconfiguration.create() but the program dies anyway. I believe the problem lies there. I get no useful stack trace. The driver dies immediately upon hitting the line.</p>\n<p>The POM:</p>\n<pre><code>&lt;properties&gt;\n    &lt;spark.version&gt;2.4.8&lt;/spark.version&gt;\n    &lt;hbase.version&gt;1.4.13&lt;/hbase.version&gt;\n    &lt;hadoop.version&gt;2.10.1&lt;/hadoop.version&gt;\n    &lt;jackson.version&gt;2.13.2&lt;/jackson.version&gt;\n    &lt;!-- Maven stuff --&gt;\n    &lt;java.build.version&gt;1.8&lt;/java.build.version&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n&lt;/properties&gt;\n\n&lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\n            &lt;artifactId&gt;bom&lt;/artifactId&gt;\n            &lt;version&gt;2.17.103&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n            &lt;scope&gt;import&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.netty&lt;/groupId&gt;\n            &lt;artifactId&gt;netty-all&lt;/artifactId&gt;\n            &lt;version&gt;4.1.77.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.netty&lt;/groupId&gt;\n            &lt;artifactId&gt;netty&lt;/artifactId&gt;\n            &lt;version&gt;3.9.9.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/dependencyManagement&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\n        &lt;artifactId&gt;spark-core_2.12&lt;/artifactId&gt;\n        &lt;version&gt;${spark.version}&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\n        &lt;artifactId&gt;spark-sql_2.12&lt;/artifactId&gt;\n        &lt;version&gt;${spark.version}&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt;\n        &lt;artifactId&gt;hadoop-aws&lt;/artifactId&gt;\n        &lt;version&gt;${hadoop.version}&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt;\n        &lt;artifactId&gt;hadoop-common&lt;/artifactId&gt;\n        &lt;version&gt;${hadoop.version}&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.hbase&lt;/groupId&gt;\n        &lt;artifactId&gt;hbase-client&lt;/artifactId&gt;\n        &lt;version&gt;${hbase.version}&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;!--  AWS --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\n        &lt;artifactId&gt;s3&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\n        &lt;artifactId&gt;athena&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\n        &lt;artifactId&gt;auth&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\n        &lt;artifactId&gt;opensearch&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\n        &lt;artifactId&gt;apache-client&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n        &lt;artifactId&gt;httpcore&lt;/artifactId&gt;\n        &lt;version&gt;4.4.15&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.elasticsearch.client&lt;/groupId&gt;\n        &lt;artifactId&gt;elasticsearch-rest-client&lt;/artifactId&gt;\n        &lt;version&gt;5.6.16&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1550043698,"post_id":54664797,"comment_id":96120158,"body_markdown":"I’d probably use an `int` array with some 2020 entries to keep the difference in population compared to the previous year. So each time a person is born in year *y* I would add 1 to entry *y* of my array. And each time a person dies in year *y* subtract one from entry *y* + 1. At the end print the indices where the array holds a negative number.","body":"I’d probably use an <code>int</code> array with some 2020 entries to keep the difference in population compared to the previous year. So each time a person is born in year <i>y</i> I would add 1 to entry <i>y</i> of my array. And each time a person dies in year <i>y</i> subtract one from entry <i>y</i> + 1. At the end print the indices where the array holds a negative number."},{"owner":{"account_id":3557648,"reputation":8235,"user_id":2970960,"accept_rate":43,"display_name":"Jai"},"score":0,"creation_date":1550043765,"post_id":54664797,"comment_id":96120190,"body_markdown":"If a person dies in 2010 (2010 is the most recent year with birth/death) and it means 2010&#39;s population is reduced by 1, then how would your correct answer has 2011 instead? If 2009 has `x` people, then 2010 would have `x-1`, and 2011 would still be `x-1`.","body":"If a person dies in 2010 (2010 is the most recent year with birth/death) and it means 2010&#39;s population is reduced by 1, then how would your correct answer has 2011 instead? If 2009 has <code>x</code> people, then 2010 would have <code>x-1</code>, and 2011 would still be <code>x-1</code>."},{"owner":{"account_id":3557648,"reputation":8235,"user_id":2970960,"accept_rate":43,"display_name":"Jai"},"score":1,"creation_date":1550044038,"post_id":54664797,"comment_id":96120343,"body_markdown":"Personally, I would use a `Map&lt;String, Integer&gt;` representing year to population change. For every year in born column, increment the population of that year by 1, and for every year in die column, decrement the population of that year by 1. Lastly filter out all years with negative values.","body":"Personally, I would use a <code>Map&lt;String, Integer&gt;</code> representing year to population change. For every year in born column, increment the population of that year by 1, and for every year in die column, decrement the population of that year by 1. Lastly filter out all years with negative values."},{"owner":{"account_id":12695174,"reputation":45172,"user_id":9223839,"display_name":"Joakim Danielson"},"score":0,"creation_date":1550044345,"post_id":54664797,"comment_id":96120480,"body_markdown":"You haven&#39;t stated what the issue with your code is so it&#39;s difficult to understand what you want help with. Unless all you want is for us to do your homework for you.","body":"You haven&#39;t stated what the issue with your code is so it&#39;s difficult to understand what you want help with. Unless all you want is for us to do your homework for you."}],"answers":[{"tags":[],"owner":{"account_id":2780300,"reputation":4603,"user_id":2392960,"display_name":"Januson"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1550045666,"creation_date":1550045666,"answer_id":54665366,"question_id":54664797,"body_markdown":"Every row is basically a person. You could create a class so that you could ask this person whether it is alive.\r\n\r\n    var person = new Person(1990, 2000);\r\n    person.wasAliveIn(1998);\r\n\r\nThen it is simply a question of iterating over the years and counting how many people were alive at any given year.","title":"Java program to short and count","body":"<p>Every row is basically a person. You could create a class so that you could ask this person whether it is alive.</p>\n\n<pre><code>var person = new Person(1990, 2000);\nperson.wasAliveIn(1998);\n</code></pre>\n\n<p>Then it is simply a question of iterating over the years and counting how many people were alive at any given year.</p>\n"},{"tags":[],"owner":{"account_id":7649396,"reputation":404,"user_id":6213808,"display_name":"Jonaswg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1550051340,"creation_date":1550051340,"answer_id":54667102,"question_id":54664797,"body_markdown":"I think you have some issues in your correct implementation output.\r\nSince someone died in 1978, 1991, 2002, 2003, 2005, 2008 and 2010 those years will have a lower population count than the year before them. \r\n\r\nI have written a quick function that iterates every year from 1900 to 2019 and checks every person each iteration in a simple linear fashion. There are obvious optimizations that can be implemented (such as a Map or more clever searches) but this is a beginner question so I provided a basic straight-forward answer. \r\n\r\nThe output will be:\r\n1978 1991 2002 2003 2005 2008 2010 \r\n\r\n\r\n\r\n\r\n    private class Cont {\r\n    \t\tInteger born;\r\n    \t\tInteger died;\r\n    \r\n    \t\tpublic Cont(String input) throws Exception {\r\n    \t\t\tString[] values = input.split(&quot;:&quot;);\r\n    \t\t\tif (values.length == 2) {\r\n    \t\t\t\tborn = Integer.parseInt(values[0]);\r\n    \t\t\t\tdied = Integer.parseInt(values[1]);\r\n    \t\t\t} else if (values.length == 1) {\r\n    \t\t\t\tborn = Integer.parseInt(values[0]);\r\n    \t\t\t} else {\r\n    \t\t\t\tthrow new Exception(&quot;bad input&quot;);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \r\n    public void doWork() {\r\n    \tList&lt;String&gt; in = new ArrayList&lt;&gt;();\r\n    \tin.add(&quot;1902:1991&quot;);\r\n    \tin.add(&quot;1941:1978&quot;);\r\n    \tin.add(&quot;2004:&quot;);\r\n    \tin.add(&quot;1957:&quot;);\r\n    \tin.add(&quot;1989:2008&quot;);\r\n    \tin.add(&quot;1909:2005&quot;);\r\n    \tin.add(&quot;1918:&quot;);\r\n    \tin.add(&quot;1913:2010&quot;);\r\n    \tin.add(&quot;1979:&quot;);\r\n    \tin.add(&quot;1961:2002&quot;);\r\n    \tin.add(&quot;1977:2003&quot;);\r\n    \tin.add(&quot;1909:1991&quot;);\r\n        List&lt;Cont&gt; entries = new ArrayList&lt;&gt;();\r\n    \tfor (String inp : in) {\r\n    \t\ttry {\r\n    \t\t\tentries.add(new Cont(inp));\r\n    \t\t} catch (Exception e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tint bornCount = 0;\r\n    \tint deathCount = 0;\r\n    \tint aliveCount = bornCount - deathCount;\r\n    \tfor (int i = 1900; i &lt; 2019; i++) {\r\n    \t\tint prevAlive = aliveCount;\r\n    \t\tfor (Cont c : entries) {\r\n    \t\t\tif (i == c.born) {\r\n    \t\t\t\tbornCount++;\r\n    \t\t\t} else if (c.died != null &amp;&amp; i == c.died) {\r\n    \t\t\t\tdeathCount++;\r\n    \t\t\t}\r\n        \t}\r\n    \t\taliveCount = bornCount - deathCount;\r\n    \t\tif (prevAlive &gt; aliveCount) {\r\n    \t\t\tSystem.out.println(i);\r\n    \t\t}\r\n    \t}\r\n    \r\n    }","title":"Java program to short and count","body":"<p>I think you have some issues in your correct implementation output.\nSince someone died in 1978, 1991, 2002, 2003, 2005, 2008 and 2010 those years will have a lower population count than the year before them. </p>\n\n<p>I have written a quick function that iterates every year from 1900 to 2019 and checks every person each iteration in a simple linear fashion. There are obvious optimizations that can be implemented (such as a Map or more clever searches) but this is a beginner question so I provided a basic straight-forward answer. </p>\n\n<p>The output will be:\n1978 1991 2002 2003 2005 2008 2010 </p>\n\n<pre><code>private class Cont {\n        Integer born;\n        Integer died;\n\n        public Cont(String input) throws Exception {\n            String[] values = input.split(\":\");\n            if (values.length == 2) {\n                born = Integer.parseInt(values[0]);\n                died = Integer.parseInt(values[1]);\n            } else if (values.length == 1) {\n                born = Integer.parseInt(values[0]);\n            } else {\n                throw new Exception(\"bad input\");\n            }\n        }\n    }\n\npublic void doWork() {\n    List&lt;String&gt; in = new ArrayList&lt;&gt;();\n    in.add(\"1902:1991\");\n    in.add(\"1941:1978\");\n    in.add(\"2004:\");\n    in.add(\"1957:\");\n    in.add(\"1989:2008\");\n    in.add(\"1909:2005\");\n    in.add(\"1918:\");\n    in.add(\"1913:2010\");\n    in.add(\"1979:\");\n    in.add(\"1961:2002\");\n    in.add(\"1977:2003\");\n    in.add(\"1909:1991\");\n    List&lt;Cont&gt; entries = new ArrayList&lt;&gt;();\n    for (String inp : in) {\n        try {\n            entries.add(new Cont(inp));\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    int bornCount = 0;\n    int deathCount = 0;\n    int aliveCount = bornCount - deathCount;\n    for (int i = 1900; i &lt; 2019; i++) {\n        int prevAlive = aliveCount;\n        for (Cont c : entries) {\n            if (i == c.born) {\n                bornCount++;\n            } else if (c.died != null &amp;&amp; i == c.died) {\n                deathCount++;\n            }\n        }\n        aliveCount = bornCount - deathCount;\n        if (prevAlive &gt; aliveCount) {\n            System.out.println(i);\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3557648,"reputation":8235,"user_id":2970960,"accept_rate":43,"display_name":"Jai"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1550109670,"creation_date":1550109670,"answer_id":54682180,"question_id":54664797,"body_markdown":"Another approach is to track the overall change in the population. This method is more efficient (time-complexity of `O(n)`).\r\n\r\n    public List&lt;String&gt; computeYearsWithReducedPopulation() {\r\n        List&lt;String&gt; input = new ArrayList&lt;String&gt;();\r\n        Map&lt;String, Integer&gt; populationDelta = new HashMap&lt;&gt;();\r\n\r\n        input.add(&quot;1902:1991&quot;);\r\n        input.add(&quot;1941:1978&quot;);\r\n        input.add(&quot;2004:&quot;);\r\n        input.add(&quot;1957:&quot;);\r\n        input.add(&quot;1989:2008&quot;);\r\n        input.add(&quot;1909:2005&quot;);\r\n        input.add(&quot;1918:&quot;);\r\n        input.add(&quot;1913:2010&quot;);\r\n        input.add(&quot;1979:&quot;);\r\n        input.add(&quot;1961:2002&quot;);\r\n        input.add(&quot;1977:2003&quot;);\r\n        input.add(&quot;1909:1991&quot;);\r\n\r\n        for(String record:input) {\r\n            String split[] = record.split(&quot;:&quot;);\r\n            if (split.length == 0 || split.length &gt; 2) continue;\r\n\r\n            String born = split[0];\r\n\r\n            // Born\r\n            if(populationDelta.get(born) != null) {\r\n                populationDelta.put(born, 0);\r\n            }\r\n            else {\r\n                populationDelta.put(born, populationDelta.get(born).intValue() + 1);\r\n            }\r\n\r\n            if (split.length != 2) continue;\r\n            String died = split[1];\r\n\r\n            // Died\r\n            if(populationDelta.get(died) != null) {\r\n                populationDelta.put(died, 0);\r\n            }\r\n            else {\r\n                populationDelta.put(died, populationDelta.get(died).intValue() - 1);\r\n            }\r\n        }\r\n\r\n        return populationDelta.entrySet()\r\n                              .stream()\r\n                              .filter(entry -&gt; entry.getValue().intValue() &lt; 0)\r\n                              .map(Entry::getKey)\r\n                              .collect(Collectors.toList());\r\n    }","title":"Java program to short and count","body":"<p>Another approach is to track the overall change in the population. This method is more efficient (time-complexity of <code>O(n)</code>).</p>\n\n<pre><code>public List&lt;String&gt; computeYearsWithReducedPopulation() {\n    List&lt;String&gt; input = new ArrayList&lt;String&gt;();\n    Map&lt;String, Integer&gt; populationDelta = new HashMap&lt;&gt;();\n\n    input.add(\"1902:1991\");\n    input.add(\"1941:1978\");\n    input.add(\"2004:\");\n    input.add(\"1957:\");\n    input.add(\"1989:2008\");\n    input.add(\"1909:2005\");\n    input.add(\"1918:\");\n    input.add(\"1913:2010\");\n    input.add(\"1979:\");\n    input.add(\"1961:2002\");\n    input.add(\"1977:2003\");\n    input.add(\"1909:1991\");\n\n    for(String record:input) {\n        String split[] = record.split(\":\");\n        if (split.length == 0 || split.length &gt; 2) continue;\n\n        String born = split[0];\n\n        // Born\n        if(populationDelta.get(born) != null) {\n            populationDelta.put(born, 0);\n        }\n        else {\n            populationDelta.put(born, populationDelta.get(born).intValue() + 1);\n        }\n\n        if (split.length != 2) continue;\n        String died = split[1];\n\n        // Died\n        if(populationDelta.get(died) != null) {\n            populationDelta.put(died, 0);\n        }\n        else {\n            populationDelta.put(died, populationDelta.get(died).intValue() - 1);\n        }\n    }\n\n    return populationDelta.entrySet()\n                          .stream()\n                          .filter(entry -&gt; entry.getValue().intValue() &lt; 0)\n                          .map(Entry::getKey)\n                          .collect(Collectors.toList());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16383090,"reputation":21,"user_id":11833632,"display_name":"TronYang"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1564394888,"creation_date":1564394888,"answer_id":57251542,"question_id":54664797,"body_markdown":"Because of the requirements said the &quot;Likewise, if a member of the population died in a given year, they count towards the population for that year.&quot; which means if someone died the population of that year remain unchanged, and the death will count towards the next year( population - 1 for next year). I wrote a nodejs function, which output the exact sample answer, you can use it as a reference and write your own java function. \r\n\r\n    function checkPopulation() {\r\n    let data = [\r\n        &quot;1902,1991&quot;, &quot;1941,1978&quot;, &quot;2004,&quot;, &quot;1957,&quot;, &quot;1989,2008&quot;, &quot;1909,2005&quot;, &quot;1918,&quot;, &quot;1913,2010&quot;, &quot;1979,&quot;, &quot;1961,2002&quot;, &quot;1977,2003&quot;, &quot;1909,1991&quot;\r\n    ]\r\n    let age = [];\r\n    for (let range of data) {\r\n        let temp = range.split(&quot;,&quot;)\r\n        if (temp.length == 2) {\r\n            let person = {\r\n                born: parseInt(temp[0]),\r\n                died: parseInt(temp[1])\r\n            }\r\n            age.push(person)\r\n        } else if (temp.length == 1) {\r\n            let person = {\r\n                born: parseInt(temp[0]),\r\n                died: parentInt(&quot;0&quot;)\r\n            }\r\n            age.push(person)\r\n        }\r\n    }\r\n    let aliveCount = 0\r\n    let preDied = 0\r\n    if (age.length &gt; 0) {\r\n        for (let i = 1900; i &lt;= 2019, i++;) {\r\n            let bornCount = 0\r\n            let preceAlive = aliveCount\r\n            if (preDied != 0) {\r\n                aliveCount -= preDied;\r\n                preDied = 0;\r\n            }\r\n            for (let count of age) {\r\n                if (i == count.born) {\r\n                    bornCount++\r\n                }\r\n                else if (count.died != 0 &amp;&amp; i == count.died) {\r\n                    preDied++\r\n                }\r\n            }\r\n\r\n            aliveCount += bornCount;\r\n            if (preceAlive &gt; aliveCount) {\r\n                console.log(i)\r\n            }\r\n        }\r\n    }\r\n    }","title":"Java program to short and count","body":"<p>Because of the requirements said the \"Likewise, if a member of the population died in a given year, they count towards the population for that year.\" which means if someone died the population of that year remain unchanged, and the death will count towards the next year( population - 1 for next year). I wrote a nodejs function, which output the exact sample answer, you can use it as a reference and write your own java function. </p>\n\n<pre><code>function checkPopulation() {\nlet data = [\n    \"1902,1991\", \"1941,1978\", \"2004,\", \"1957,\", \"1989,2008\", \"1909,2005\", \"1918,\", \"1913,2010\", \"1979,\", \"1961,2002\", \"1977,2003\", \"1909,1991\"\n]\nlet age = [];\nfor (let range of data) {\n    let temp = range.split(\",\")\n    if (temp.length == 2) {\n        let person = {\n            born: parseInt(temp[0]),\n            died: parseInt(temp[1])\n        }\n        age.push(person)\n    } else if (temp.length == 1) {\n        let person = {\n            born: parseInt(temp[0]),\n            died: parentInt(\"0\")\n        }\n        age.push(person)\n    }\n}\nlet aliveCount = 0\nlet preDied = 0\nif (age.length &gt; 0) {\n    for (let i = 1900; i &lt;= 2019, i++;) {\n        let bornCount = 0\n        let preceAlive = aliveCount\n        if (preDied != 0) {\n            aliveCount -= preDied;\n            preDied = 0;\n        }\n        for (let count of age) {\n            if (i == count.born) {\n                bornCount++\n            }\n            else if (count.died != 0 &amp;&amp; i == count.died) {\n                preDied++\n            }\n        }\n\n        aliveCount += bornCount;\n        if (preceAlive &gt; aliveCount) {\n            console.log(i)\n        }\n    }\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1853146,"reputation":1785,"user_id":2256551,"accept_rate":76,"display_name":"SAR"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655044156,"creation_date":1655044156,"answer_id":72593103,"question_id":54664797,"body_markdown":"the question is answered but an easy and simple way for juniors.\r\n \r\n\r\n&gt; The output will be: 1978 1991 2002 2003 2005 2008 2010\r\n\r\n  \r\n    public void lifespans(){\r\n            int[] born = {1902,1941,2004,1957,1989,1909,1918,1913,1979,1961,1977,1909};\r\n            int[] died = {1991,1978,0,0,2008,2005,0,2010,0,2002,2003,1991};\r\n            int min = Arrays.stream(born).min().getAsInt();\r\n            int max = Arrays.stream(died).max().getAsInt();\r\n            for(int i=min;i&lt;=max;i++){\r\n                int year = i;\r\n                int birthYear = IntStream.of(born).filter(val-&gt;val&lt;=year).toArray().length;\r\n                int deathYear = IntStream.of(died).filter(val-&gt;val!=0&amp;&amp;val&lt;=year).toArray().length;\r\n                int birthYearLast = IntStream.of(born).filter(val-&gt;val&lt;year).toArray().length;\r\n                int deathYearLast = IntStream.of(died).filter(val-&gt;val!=0&amp;&amp;val&lt;year).toArray().length;\r\n                int populationYear = birthYear-deathYear;\r\n                int populationYearLast = birthYearLast-deathYearLast;\r\n                if(populationYear&lt;populationYearLast){\r\n                    System.out.println(year+&quot;|&quot;+populationYear+&quot;|&quot;+populationYearLast);\r\n                }\r\n            }\r\n\r\n","title":"Java program to short and count","body":"<p>the question is answered but an easy and simple way for juniors.</p>\n<blockquote>\n<p>The output will be: 1978 1991 2002 2003 2005 2008 2010</p>\n</blockquote>\n<pre><code>public void lifespans(){\n        int[] born = {1902,1941,2004,1957,1989,1909,1918,1913,1979,1961,1977,1909};\n        int[] died = {1991,1978,0,0,2008,2005,0,2010,0,2002,2003,1991};\n        int min = Arrays.stream(born).min().getAsInt();\n        int max = Arrays.stream(died).max().getAsInt();\n        for(int i=min;i&lt;=max;i++){\n            int year = i;\n            int birthYear = IntStream.of(born).filter(val-&gt;val&lt;=year).toArray().length;\n            int deathYear = IntStream.of(died).filter(val-&gt;val!=0&amp;&amp;val&lt;=year).toArray().length;\n            int birthYearLast = IntStream.of(born).filter(val-&gt;val&lt;year).toArray().length;\n            int deathYearLast = IntStream.of(died).filter(val-&gt;val!=0&amp;&amp;val&lt;year).toArray().length;\n            int populationYear = birthYear-deathYear;\n            int populationYearLast = birthYearLast-deathYearLast;\n            if(populationYear&lt;populationYearLast){\n                System.out.println(year+&quot;|&quot;+populationYear+&quot;|&quot;+populationYearLast);\n            }\n        }\n</code></pre>\n"}],"owner":{"account_id":13610084,"reputation":55,"user_id":9817885,"display_name":"Manu"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1679,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":54667102,"answer_count":5,"score":0,"last_activity_date":1655044156,"creation_date":1550043187,"question_id":54664797,"body_markdown":"    born | died\r\n    1902   1991\r\n    1941   1978\r\n    2004       \r\n    1957       \r\n    1989   2008\r\n    1909   2005\r\n    1918       \r\n    1913   2010\r\n    1979       \r\n    1961   2002\r\n    1977   2003\r\n    1909   1991\r\n\r\nI need to write a method that takes the above information and returns every year in which the population was lower than the preceding year.\r\n\r\nI&#39;m beginner for java. Could someone help me how to achieve this please?\r\n\r\n    public class Lifespan {\r\n    \r\n        public static void main(String[] args) {\r\n            Lifespan lifespan = new Lifespan();\r\n            lifespan.computeLifeSpan();\r\n        }\r\n        \r\n        public void computeLifeSpan() {\r\n            \r\n            List&lt;String&gt; input = new ArrayList&lt;String&gt;();\r\n            Map&lt;String,String&gt; map = new HashMap&lt;String,String&gt;();\r\n            \r\n          input.add(&quot;1902:1991&quot;);\r\n          input.add(&quot;1941:1978&quot;);\r\n          input.add(&quot;2004:&quot;);\r\n            \r\n          List&lt;LifeSpanModel&gt; filteredInput = new ArrayList&lt;LifeSpanModel&gt;();\r\n            LifeSpanModel lifeSpanModel;\r\n            int population = 0;\r\n            for(String record:input) {\r\n                lifeSpanModel= new LifeSpanModel();\r\n                String earchRecord[] = record.split(&quot;:&quot;);\r\n                lifeSpanModel.setBornYear(earchRecord[0]);\r\n                lifeSpanModel.setDiedYear( earchRecord.length == 1 ? &quot;Alive&quot; : earchRecord[1]);\r\n                filteredInput.add(lifeSpanModel);\r\n                String k=map.get(lifeSpanModel.getBornYear());\r\n                if(map.get(lifeSpanModel.getBornYear())!= null) { // add alive person here\r\n                    population = population + 1;\r\n                    map.put(lifeSpanModel.getBornYear(), lifeSpanModel.getDiedYear());\r\n                }else {\r\n                    map.put(lifeSpanModel.getBornYear(), lifeSpanModel.getDiedYear());\r\n                }\r\n                \r\n            }\r\n           \r\n        }\r\n    \r\n    }\r\n\r\n\r\n- If a member of the population was born in a given year, they count towards the\r\npopulation for that year.\r\n- Likewise, if a member of the population died in a given year, they count towards the\r\npopulation for that year.\r\n- Empty in died column means people still alive\r\n\r\nFor the example, a correct implementation will return the following years: 1992, 2003,\r\n2006, 2009, 2011.\r\n\r\n\r\n","title":"Java program to short and count","body":"<pre><code>born | died\n1902   1991\n1941   1978\n2004       \n1957       \n1989   2008\n1909   2005\n1918       \n1913   2010\n1979       \n1961   2002\n1977   2003\n1909   1991\n</code></pre>\n\n<p>I need to write a method that takes the above information and returns every year in which the population was lower than the preceding year.</p>\n\n<p>I'm beginner for java. Could someone help me how to achieve this please?</p>\n\n<pre><code>public class Lifespan {\n\n    public static void main(String[] args) {\n        Lifespan lifespan = new Lifespan();\n        lifespan.computeLifeSpan();\n    }\n\n    public void computeLifeSpan() {\n\n        List&lt;String&gt; input = new ArrayList&lt;String&gt;();\n        Map&lt;String,String&gt; map = new HashMap&lt;String,String&gt;();\n\n      input.add(\"1902:1991\");\n      input.add(\"1941:1978\");\n      input.add(\"2004:\");\n\n      List&lt;LifeSpanModel&gt; filteredInput = new ArrayList&lt;LifeSpanModel&gt;();\n        LifeSpanModel lifeSpanModel;\n        int population = 0;\n        for(String record:input) {\n            lifeSpanModel= new LifeSpanModel();\n            String earchRecord[] = record.split(\":\");\n            lifeSpanModel.setBornYear(earchRecord[0]);\n            lifeSpanModel.setDiedYear( earchRecord.length == 1 ? \"Alive\" : earchRecord[1]);\n            filteredInput.add(lifeSpanModel);\n            String k=map.get(lifeSpanModel.getBornYear());\n            if(map.get(lifeSpanModel.getBornYear())!= null) { // add alive person here\n                population = population + 1;\n                map.put(lifeSpanModel.getBornYear(), lifeSpanModel.getDiedYear());\n            }else {\n                map.put(lifeSpanModel.getBornYear(), lifeSpanModel.getDiedYear());\n            }\n\n        }\n\n    }\n\n}\n</code></pre>\n\n<ul>\n<li>If a member of the population was born in a given year, they count towards the\npopulation for that year.</li>\n<li>Likewise, if a member of the population died in a given year, they count towards the\npopulation for that year.</li>\n<li>Empty in died column means people still alive</li>\n</ul>\n\n<p>For the example, a correct implementation will return the following years: 1992, 2003,\n2006, 2009, 2011.</p>\n"},{"tags":["javascript","java","reactjs","graphql","apollo"],"answers":[{"tags":[],"owner":{"account_id":4722710,"reputation":2268,"user_id":3820189,"display_name":"Nikhil G"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655043094,"creation_date":1655043094,"answer_id":72592984,"question_id":72592249,"body_markdown":"Well, `useQuery` return three things loading, error &amp; data. So you need to make changes in `useUserLocation` function.\r\n\r\n     const {loading, error, data} = useQuery(QUERY_GET_LOCATIONS);\r\n\r\nNow you can `console.log(data)` and check what you are getting in response. ","title":"Getting getUserLocation is not a function","body":"<p>Well, <code>useQuery</code> return three things loading, error &amp; data. So you need to make changes in <code>useUserLocation</code> function.</p>\n<pre><code> const {loading, error, data} = useQuery(QUERY_GET_LOCATIONS);\n</code></pre>\n<p>Now you can <code>console.log(data)</code> and check what you are getting in response.</p>\n"}],"owner":{"account_id":24613665,"reputation":1,"user_id":18514914,"display_name":"FaustoLopez"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1655043094,"creation_date":1655037300,"question_id":72592249,"body_markdown":"Making a project that is using a searchbar to get all users in a certain location from a search result.\r\nUsing graphql and react for my project.\r\nGetting error saying getUserlocation is not a function along with \r\n          POST http://localhost:3000/graphql 400 (Bad Request)\r\n\r\nI&#39;m sure I&#39;m writing the function wrong but can&#39;t find examples on it.\r\n\r\n\r\n`SearchMenu.js`\r\n\r\n```\r\nimport { useQuery } from &quot;@apollo/client&quot;;\r\nimport { QUERY_GET_LOCATIONS } from &quot;../util/queries&quot;;\r\n\r\nexport function useUserLocation() {\r\n  const getUserLocation = useQuery(QUERY_GET_LOCATIONS);\r\n  const getLocation = async (location) =&gt; {\r\n    try {\r\n      if (!location) {\r\n        throw new Error(&quot;No users with that location&quot;);\r\n      }\r\n      return await getUserLocation({ variables: { location } });\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n  return getLocation;\r\n}\r\n```\r\n\r\n`queries.js`\r\n\r\n```\r\nimport { gql } from &quot;@apollo/client&quot;;\r\n\r\n\r\nexport const QUERY_GET_LOCATIONS = gql`\r\n  query getUserLocation {\r\n    getUserLocation {\r\n      _id\r\n      username\r\n    }\r\n  }\r\n`;\r\n\r\n\r\n```\r\n``SearchMenu.js``\r\n\r\n```\r\nimport React, { useState } from &quot;react&quot;;\r\nimport {\r\n  Jumbotron,\r\n  Container,\r\n  Col,\r\n  Form,\r\n  Button,\r\n  Card,\r\n  CardColumns,\r\n} from &quot;react-bootstrap&quot;;\r\n\r\n// import Auth from &quot;../utils/auth&quot;;\r\nimport { QUERY_GET_LOCATIONS } from &quot;../util/queries&quot;;\r\nimport { useQuery } from &quot;@apollo/client&quot;;\r\n\r\nconst SearchedUsers = () =&gt; {\r\n  // create state for holding returned google api data\r\n  const [searchedUsers, setSearchedUsers] = useState([]);\r\n  // create state for holding our search field data\r\n  const [searchInput, setSearchInput] = useState(&quot;&quot;);\r\n  const { getLocation } = useQuery(QUERY_GET_LOCATIONS);\r\n\r\n  // create method to search for books and set state on form submit\r\n  const handleFormSubmit = async (event) =&gt; {\r\n    event.preventDefault();\r\n\r\n    if (!searchInput) {\r\n      return false;\r\n    }\r\n\r\n    try {\r\n      const response = await getLocation(searchInput);\r\n\r\n      if (!response.ok) {\r\n        throw new Error(&quot;something went wrong!&quot;);\r\n      }\r\n\r\n      const { items } = await response.json();\r\n\r\n      const userData = items.map((user) =&gt; ({\r\n        userId: user.id,\r\n        userName: user.userName || [&quot;No user to display&quot;],\r\n      }));\r\n\r\n      setSearchedUsers(userData);\r\n      setSearchInput(&quot;&quot;);\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    &lt;&gt;\r\n      &lt;Jumbotron fluid className=&quot;text-light bg-dark&quot;&gt;\r\n        &lt;Container&gt;\r\n          &lt;h1&gt;Search for Location!&lt;/h1&gt;\r\n          &lt;Form onSubmit={handleFormSubmit}&gt;\r\n            &lt;Form.Row&gt;\r\n              &lt;Col xs={12} md={8}&gt;\r\n                &lt;Form.Control\r\n                  name=&quot;searchInput&quot;\r\n                  value={searchInput}\r\n                  onChange={(e) =&gt; setSearchInput(e.target.value)}\r\n                  type=&quot;text&quot;\r\n                  size=&quot;lg&quot;\r\n                  placeholder=&quot;Search for a location&quot;\r\n                /&gt;\r\n              &lt;/Col&gt;\r\n              &lt;Col xs={12} md={4}&gt;\r\n                &lt;Button type=&quot;submit&quot; variant=&quot;success&quot; size=&quot;lg&quot;&gt;\r\n                  Submit Search\r\n                &lt;/Button&gt;\r\n              &lt;/Col&gt;\r\n            &lt;/Form.Row&gt;\r\n          &lt;/Form&gt;\r\n        &lt;/Container&gt;\r\n      &lt;/Jumbotron&gt;\r\n\r\n      &lt;Container&gt;\r\n        &lt;h2&gt;\r\n          {searchedUsers.length\r\n            ? `Viewing ${searchedUsers.length} results:`\r\n            : &quot;Search for a location to begin&quot;}\r\n        &lt;/h2&gt;\r\n        &lt;CardColumns&gt;\r\n          {searchedUsers.map((user) =&gt; {\r\n            return (\r\n              &lt;Card key={user.userId} border=&quot;dark&quot;&gt;\r\n                &lt;Card.Body&gt;\r\n                  &lt;Card.Title&gt;{user.userName}&lt;/Card.Title&gt;\r\n                  &lt;p className=&quot;small&quot;&gt;Bio: {user.bio}&lt;/p&gt;\r\n                &lt;/Card.Body&gt;\r\n              &lt;/Card&gt;\r\n            );\r\n          })}\r\n        &lt;/CardColumns&gt;\r\n      &lt;/Container&gt;\r\n    &lt;/&gt;\r\n  );\r\n};\r\n\r\nexport default SearchedUsers;\r\n\r\n```","title":"Getting getUserLocation is not a function","body":"<p>Making a project that is using a searchbar to get all users in a certain location from a search result.\nUsing graphql and react for my project.\nGetting error saying getUserlocation is not a function along with\nPOST http://localhost:3000/graphql 400 (Bad Request)</p>\n<p>I'm sure I'm writing the function wrong but can't find examples on it.</p>\n<p><code>SearchMenu.js</code></p>\n<pre><code>import { useQuery } from &quot;@apollo/client&quot;;\nimport { QUERY_GET_LOCATIONS } from &quot;../util/queries&quot;;\n\nexport function useUserLocation() {\n  const getUserLocation = useQuery(QUERY_GET_LOCATIONS);\n  const getLocation = async (location) =&gt; {\n    try {\n      if (!location) {\n        throw new Error(&quot;No users with that location&quot;);\n      }\n      return await getUserLocation({ variables: { location } });\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  return getLocation;\n}\n</code></pre>\n<p><code>queries.js</code></p>\n<pre><code>import { gql } from &quot;@apollo/client&quot;;\n\n\nexport const QUERY_GET_LOCATIONS = gql`\n  query getUserLocation {\n    getUserLocation {\n      _id\n      username\n    }\n  }\n`;\n\n\n</code></pre>\n<p><code>SearchMenu.js</code></p>\n<pre><code>import React, { useState } from &quot;react&quot;;\nimport {\n  Jumbotron,\n  Container,\n  Col,\n  Form,\n  Button,\n  Card,\n  CardColumns,\n} from &quot;react-bootstrap&quot;;\n\n// import Auth from &quot;../utils/auth&quot;;\nimport { QUERY_GET_LOCATIONS } from &quot;../util/queries&quot;;\nimport { useQuery } from &quot;@apollo/client&quot;;\n\nconst SearchedUsers = () =&gt; {\n  // create state for holding returned google api data\n  const [searchedUsers, setSearchedUsers] = useState([]);\n  // create state for holding our search field data\n  const [searchInput, setSearchInput] = useState(&quot;&quot;);\n  const { getLocation } = useQuery(QUERY_GET_LOCATIONS);\n\n  // create method to search for books and set state on form submit\n  const handleFormSubmit = async (event) =&gt; {\n    event.preventDefault();\n\n    if (!searchInput) {\n      return false;\n    }\n\n    try {\n      const response = await getLocation(searchInput);\n\n      if (!response.ok) {\n        throw new Error(&quot;something went wrong!&quot;);\n      }\n\n      const { items } = await response.json();\n\n      const userData = items.map((user) =&gt; ({\n        userId: user.id,\n        userName: user.userName || [&quot;No user to display&quot;],\n      }));\n\n      setSearchedUsers(userData);\n      setSearchInput(&quot;&quot;);\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  return (\n    &lt;&gt;\n      &lt;Jumbotron fluid className=&quot;text-light bg-dark&quot;&gt;\n        &lt;Container&gt;\n          &lt;h1&gt;Search for Location!&lt;/h1&gt;\n          &lt;Form onSubmit={handleFormSubmit}&gt;\n            &lt;Form.Row&gt;\n              &lt;Col xs={12} md={8}&gt;\n                &lt;Form.Control\n                  name=&quot;searchInput&quot;\n                  value={searchInput}\n                  onChange={(e) =&gt; setSearchInput(e.target.value)}\n                  type=&quot;text&quot;\n                  size=&quot;lg&quot;\n                  placeholder=&quot;Search for a location&quot;\n                /&gt;\n              &lt;/Col&gt;\n              &lt;Col xs={12} md={4}&gt;\n                &lt;Button type=&quot;submit&quot; variant=&quot;success&quot; size=&quot;lg&quot;&gt;\n                  Submit Search\n                &lt;/Button&gt;\n              &lt;/Col&gt;\n            &lt;/Form.Row&gt;\n          &lt;/Form&gt;\n        &lt;/Container&gt;\n      &lt;/Jumbotron&gt;\n\n      &lt;Container&gt;\n        &lt;h2&gt;\n          {searchedUsers.length\n            ? `Viewing ${searchedUsers.length} results:`\n            : &quot;Search for a location to begin&quot;}\n        &lt;/h2&gt;\n        &lt;CardColumns&gt;\n          {searchedUsers.map((user) =&gt; {\n            return (\n              &lt;Card key={user.userId} border=&quot;dark&quot;&gt;\n                &lt;Card.Body&gt;\n                  &lt;Card.Title&gt;{user.userName}&lt;/Card.Title&gt;\n                  &lt;p className=&quot;small&quot;&gt;Bio: {user.bio}&lt;/p&gt;\n                &lt;/Card.Body&gt;\n              &lt;/Card&gt;\n            );\n          })}\n        &lt;/CardColumns&gt;\n      &lt;/Container&gt;\n    &lt;/&gt;\n  );\n};\n\nexport default SearchedUsers;\n\n</code></pre>\n"},{"tags":["java","json","hadoop","mapreduce"],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1572029949,"creation_date":1572029949,"answer_id":58564273,"question_id":58556492,"body_markdown":"1. `FileReader` cannot read from HDFS, only local Filesystem. \r\n\r\n2. The filepath comes from the Job parameters - `FileInputFormat.addInputPath(job, new Path(args[0]));`\r\n\r\nYou wouldn&#39;t read the file in the Mapper class, anyway. \r\n\r\nMapReduce defaults to read line-delimited files, so your JSON objects would have to be one per-line such as \r\n\r\n    {&quot;votes&quot;:[]}\r\n    {&quot;votes&quot;:[]}\r\n\r\nFrom the mapper, you would parse the Text objects into JSONObject like so \r\n\r\n \r\n     protected void map(LongWritable key, Text value, Context context)\r\n            throws IOException, InterruptedException {\r\n\r\n        JSONParser jsonParser = new JSONParser();\r\n        try {\r\n            JSONObject jsonobject = (JSONObject) jsonParser.parse(value.toString());\r\n            JSONArray jsonArray = (JSONArray) jsonobject.get(&quot;votes&quot;);\r\n\r\nIf you only have one JSON object in the file, then you probably shouldn&#39;t be using MapReduce. \r\n\r\n---\r\n\r\nOtherwise, you would have to implement a `WholeFileInputFormat` and set that in the Job\r\n\r\n    job.setInputFormatClass(WholeFileInputFormat.class);","title":"Hadoop read JSON from HDFS","body":"<ol>\n<li><p><code>FileReader</code> cannot read from HDFS, only local Filesystem. </p></li>\n<li><p>The filepath comes from the Job parameters - <code>FileInputFormat.addInputPath(job, new Path(args[0]));</code></p></li>\n</ol>\n\n<p>You wouldn't read the file in the Mapper class, anyway. </p>\n\n<p>MapReduce defaults to read line-delimited files, so your JSON objects would have to be one per-line such as </p>\n\n<pre><code>{\"votes\":[]}\n{\"votes\":[]}\n</code></pre>\n\n<p>From the mapper, you would parse the Text objects into JSONObject like so </p>\n\n<pre><code> protected void map(LongWritable key, Text value, Context context)\n        throws IOException, InterruptedException {\n\n    JSONParser jsonParser = new JSONParser();\n    try {\n        JSONObject jsonobject = (JSONObject) jsonParser.parse(value.toString());\n        JSONArray jsonArray = (JSONArray) jsonobject.get(\"votes\");\n</code></pre>\n\n<p>If you only have one JSON object in the file, then you probably shouldn't be using MapReduce. </p>\n\n<hr>\n\n<p>Otherwise, you would have to implement a <code>WholeFileInputFormat</code> and set that in the Job</p>\n\n<pre><code>job.setInputFormatClass(WholeFileInputFormat.class);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9207658,"reputation":123,"user_id":6842254,"display_name":"Sumeet Kumar"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1578055338,"creation_date":1578055338,"answer_id":59578852,"question_id":58556492,"body_markdown":"Tried reading the JSON from HDFS path using the following function using pydoop library and it is working as expected.Hope it helps.\r\n\r\n    import pydoop.hdfs as hdfs\r\n    \r\n    def lreadline(inputJsonIterator):\r\n        with hdfs.open(inputJsonIterator,mode=&#39;rt&#39;) as f:\r\n            lines = f.read().split(&#39;\\n&#39;)\r\n        return lines","title":"Hadoop read JSON from HDFS","body":"<p>Tried reading the JSON from HDFS path using the following function using pydoop library and it is working as expected.Hope it helps.</p>\n\n<pre><code>import pydoop.hdfs as hdfs\n\ndef lreadline(inputJsonIterator):\n    with hdfs.open(inputJsonIterator,mode='rt') as f:\n        lines = f.read().split('\\n')\n    return lines\n</code></pre>\n"}],"owner":{"account_id":11019441,"reputation":55,"user_id":8094224,"display_name":"TNelen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3062,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":58564273,"answer_count":2,"score":0,"last_activity_date":1655042955,"creation_date":1571998270,"question_id":58556492,"body_markdown":"I&#39;m trying to read an JSON file into my hadoop mapreduce algorithm.\r\nHow can i do this? I&#39;ve put a file &#39;testinput.json&#39; into /input in my HDFS memory.\r\n\r\nWhen calling the mapreduce i execute `hadoop jar popularityMR2.jar populariy input output`, with input stating the input directory in the dhfs memory.\r\n\r\n    public static class PopularityMapper extends Mapper&lt;Object, Text, Text, Text&gt;{\r\n\r\n\r\n        protected void map(Object key, Text value,\r\n                           Context context)\r\n                throws IOException, InterruptedException {\r\n\r\n            JSONParser jsonParser = new JSONParser();\r\n            try {\r\n                JSONObject jsonobject = (JSONObject) jsonParser.parse(new FileReader(&quot;hdfs://input/testinput.json&quot;));\r\n                JSONArray jsonArray = (JSONArray) jsonobject.get(&quot;votes&quot;);\r\n\r\n                Iterator&lt;JSONObject&gt; iterator = jsonArray.iterator();\r\n                while(iterator.hasNext()) {\r\n                    JSONObject obj = iterator.next();\r\n                    String song_id_rave_id = (String) obj.get(&quot;song_ID&quot;) + &quot;,&quot; + (String) obj.get(&quot;rave_ID&quot;)+ &quot;,&quot;;\r\n                    String preference = (String) obj.get(&quot;preference&quot;);\r\n                    System.out.println(song_id_rave_id + &quot;||&quot; + preference);\r\n                    context.write(new Text(song_id_rave_id), new Text(preference));\r\n                }\r\n            }catch(ParseException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n\r\n    }\r\n\r\nMy mapper function now looks like this.  I read the file from the dhfs memory. But it always returns an error, file not found. \r\n\r\nDoes someone know how i can read this json into a jsonobject? \r\n\r\nThanks","title":"Hadoop read JSON from HDFS","body":"<p>I'm trying to read an JSON file into my hadoop mapreduce algorithm.\nHow can i do this? I've put a file 'testinput.json' into /input in my HDFS memory.</p>\n\n<p>When calling the mapreduce i execute <code>hadoop jar popularityMR2.jar populariy input output</code>, with input stating the input directory in the dhfs memory.</p>\n\n<pre><code>public static class PopularityMapper extends Mapper&lt;Object, Text, Text, Text&gt;{\n\n\n    protected void map(Object key, Text value,\n                       Context context)\n            throws IOException, InterruptedException {\n\n        JSONParser jsonParser = new JSONParser();\n        try {\n            JSONObject jsonobject = (JSONObject) jsonParser.parse(new FileReader(\"hdfs://input/testinput.json\"));\n            JSONArray jsonArray = (JSONArray) jsonobject.get(\"votes\");\n\n            Iterator&lt;JSONObject&gt; iterator = jsonArray.iterator();\n            while(iterator.hasNext()) {\n                JSONObject obj = iterator.next();\n                String song_id_rave_id = (String) obj.get(\"song_ID\") + \",\" + (String) obj.get(\"rave_ID\")+ \",\";\n                String preference = (String) obj.get(\"preference\");\n                System.out.println(song_id_rave_id + \"||\" + preference);\n                context.write(new Text(song_id_rave_id), new Text(preference));\n            }\n        }catch(ParseException e) {\n            e.printStackTrace();\n        }\n    }\n\n}\n</code></pre>\n\n<p>My mapper function now looks like this.  I read the file from the dhfs memory. But it always returns an error, file not found. </p>\n\n<p>Does someone know how i can read this json into a jsonobject? </p>\n\n<p>Thanks</p>\n"},{"tags":["java","c#","flutter","dart"],"comments":[{"owner":{"account_id":14933151,"reputation":1151,"user_id":10782024,"display_name":"Arbiter Chil"},"score":0,"creation_date":1655043198,"post_id":72592863,"comment_id":128231751,"body_markdown":"have you tried create model from quicktype .io","body":"have you tried create model from quicktype .io"},{"owner":{"account_id":10287148,"reputation":4085,"user_id":7590031,"display_name":"Ayoub Boumzebra"},"score":0,"creation_date":1655043278,"post_id":72592863,"comment_id":128231771,"body_markdown":"@ArbiterChil yes i did, but it is not working in the cases i mentioned above","body":"@ArbiterChil yes i did, but it is not working in the cases i mentioned above"},{"owner":{"account_id":14933151,"reputation":1151,"user_id":10782024,"display_name":"Arbiter Chil"},"score":0,"creation_date":1655043523,"post_id":72592863,"comment_id":128231809,"body_markdown":"i think you can work around it on the UI side if the list[index].persone.age == null or list[index].group == null then show ui SizedBox.shrink() also can you show us the code where you gonna show this data","body":"i think you can work around it on the UI side if the list[index].persone.age == null or list[index].group == null then show ui SizedBox.shrink() also can you show us the code where you gonna show this data"},{"owner":{"account_id":10287148,"reputation":4085,"user_id":7590031,"display_name":"Ayoub Boumzebra"},"score":0,"creation_date":1655043726,"post_id":72592863,"comment_id":128231867,"body_markdown":"i thought about that, but i am trying to avoid adding logic in the UI part (smart UI)","body":"i thought about that, but i am trying to avoid adding logic in the UI part (smart UI)"}],"owner":{"account_id":10287148,"reputation":4085,"user_id":7590031,"display_name":"Ayoub Boumzebra"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1655042242,"creation_date":1655042242,"question_id":72592863,"body_markdown":"i am trying to generate a class model from an APIs JSON response (List), i use some service for auto-generation, and everything seems to work fine until the response JSON start returning attributes with a **null value** and the other thing is that some attributes are **missing** when i call the APIs. EX: \r\n\r\nresponse JSON: \r\n\r\n    [\r\n        {\r\n            &quot;persone&quot;: {\r\n                &quot;name&quot;: &quot;To John&quot;,\r\n                &quot;age&quot;: 15\r\n            },\r\n            &quot;group&quot;: &quot;ipsum&quot;\r\n        },\r\n        {\r\n            &quot;persone&quot;: {\r\n                &quot;name&quot;: &quot;To John&quot;,\r\n                &quot;age&quot;: null\r\n            },\r\n            &quot;group&quot;: &quot;ipsum&quot;\r\n        },\r\n        {\r\n            &quot;persone&quot;: {\r\n                &quot;name&quot;: &quot;To John&quot;\r\n            }\r\n        }\r\n    ]\r\n\r\nin the above example, the age attribute is null, and the group attribute is missing in the last object of the list.\r\n\r\nMy question is how do you create an appropriate class model in that case handling the **null** and the **missing attribute**?","title":"Generate models and serializers from JSON with null value and missing attributes?","body":"<p>i am trying to generate a class model from an APIs JSON response (List), i use some service for auto-generation, and everything seems to work fine until the response JSON start returning attributes with a <strong>null value</strong> and the other thing is that some attributes are <strong>missing</strong> when i call the APIs. EX:</p>\n<p>response JSON:</p>\n<pre><code>[\n    {\n        &quot;persone&quot;: {\n            &quot;name&quot;: &quot;To John&quot;,\n            &quot;age&quot;: 15\n        },\n        &quot;group&quot;: &quot;ipsum&quot;\n    },\n    {\n        &quot;persone&quot;: {\n            &quot;name&quot;: &quot;To John&quot;,\n            &quot;age&quot;: null\n        },\n        &quot;group&quot;: &quot;ipsum&quot;\n    },\n    {\n        &quot;persone&quot;: {\n            &quot;name&quot;: &quot;To John&quot;\n        }\n    }\n]\n</code></pre>\n<p>in the above example, the age attribute is null, and the group attribute is missing in the last object of the list.</p>\n<p>My question is how do you create an appropriate class model in that case handling the <strong>null</strong> and the <strong>missing attribute</strong>?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":2,"creation_date":1655008075,"post_id":72589441,"comment_id":128225993,"body_markdown":"Is &quot;input&quot; a Scanner? Then &quot;input.next()&quot; will probably not return a string with spaces in it.","body":"Is &quot;input&quot; a Scanner? Then &quot;input.next()&quot; will probably not return a string with spaces in it."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1655014536,"post_id":72589441,"comment_id":128226590,"body_markdown":"What exactly was wrong with `indexOf()` that you felt you needed something else?","body":"What exactly was wrong with <code>indexOf()</code> that you felt you needed something else?"}],"answers":[{"tags":[],"owner":{"account_id":25481526,"reputation":336,"user_id":19277782,"display_name":"CaptainPyscho"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1655008008,"creation_date":1655008008,"answer_id":72589484,"question_id":72589441,"body_markdown":"\r\n    String text = &quot;Mark Stevenson is a footbal player.&quot;;\r\n    if(text.contains(&quot; &quot;)) {\r\n      System.out.println(&quot;Text contains at least one space.&quot;);\r\n    }","title":"How can I detect a space?","body":"<pre><code>String text = &quot;Mark Stevenson is a footbal player.&quot;;\nif(text.contains(&quot; &quot;)) {\n  System.out.println(&quot;Text contains at least one space.&quot;);\n}\n</code></pre>\n"}],"owner":{"account_id":25535096,"reputation":1,"user_id":19322318,"display_name":"DJ Arkaiid"},"comment_count":2,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":125,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1655013569,"answer_count":1,"score":-3,"last_activity_date":1655041238,"creation_date":1655007182,"question_id":72589441,"body_markdown":"I&#39;m going to start this off with an explanation of what I&#39;m trying to do. I am trying to detect if there is a space in a string, and give an error if there is one. I have tried indexOf, try/catches, and a few other possible solutions I can&#39;t remember the name of. is there any fairly simple way to do this? Sorry, I&#39;m just learning so there might be other errors or things that can be done better. below is an example of what I have.\r\n\r\n\r\n```\r\nSystem.out.println(&quot;Please enter your guess of numbers. Please do not include spaces in your submission.&quot;);\r\n        String guess = input.next();\r\n        int attempt = guess.indexOf(&quot; &quot;);\r\n        System.out.println(attempt);\r\n        if (guess.matches(&quot;.*\\\\s+.*&quot;)){\r\n            System.out.println(attempt);\r\n        JOptionPane.showMessageDialog(null, &quot;Try again, and Please do not enter spaces in between the characters.&quot;);\r\n        System.exit(0);}","title":"How can I detect a space?","body":"<p>I'm going to start this off with an explanation of what I'm trying to do. I am trying to detect if there is a space in a string, and give an error if there is one. I have tried indexOf, try/catches, and a few other possible solutions I can't remember the name of. is there any fairly simple way to do this? Sorry, I'm just learning so there might be other errors or things that can be done better. below is an example of what I have.</p>\n<pre><code>System.out.println(&quot;Please enter your guess of numbers. Please do not include spaces in your submission.&quot;);\n        String guess = input.next();\n        int attempt = guess.indexOf(&quot; &quot;);\n        System.out.println(attempt);\n        if (guess.matches(&quot;.*\\\\s+.*&quot;)){\n            System.out.println(attempt);\n        JOptionPane.showMessageDialog(null, &quot;Try again, and Please do not enter spaces in between the characters.&quot;);\n        System.exit(0);}\n</code></pre>\n"},{"tags":["java","soap","mocking","wiremock","mtom"],"answers":[{"tags":[],"owner":{"account_id":10408148,"reputation":1398,"user_id":7674438,"accept_rate":100,"display_name":"Lore"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1655041186,"creation_date":1655041186,"answer_id":72592712,"question_id":72586271,"body_markdown":"I have solved adding this header\r\n\r\n    Map&lt;String, List&lt;String&gt;&gt; headers = new HashMap&lt;&gt;();\r\n\r\n    headers.put(&quot;Content-type&quot;, Collections.singletonList(&quot;undefined;&quot;));\r\n\r\n\r\n    bindingProvider.getRequestContext().put(MessageContext\r\n                .HTTP_REQUEST_HEADERS, headers);\r\n\r\n","title":"MTOM with WireMock","body":"<p>I have solved adding this header</p>\n<pre><code>Map&lt;String, List&lt;String&gt;&gt; headers = new HashMap&lt;&gt;();\n\nheaders.put(&quot;Content-type&quot;, Collections.singletonList(&quot;undefined;&quot;));\n\n\nbindingProvider.getRequestContext().put(MessageContext\n            .HTTP_REQUEST_HEADERS, headers);\n</code></pre>\n"}],"owner":{"account_id":10408148,"reputation":1398,"user_id":7674438,"accept_rate":100,"display_name":"Lore"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":245,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72592712,"answer_count":1,"score":0,"last_activity_date":1655041186,"creation_date":1654966609,"question_id":72586271,"body_markdown":"I am trying to use soap MTOM protocol with WireMock, attaching one file to SOAP request directed to mocked service, but it gives me some problems...\r\n```Java\r\n    @Test\r\n    public void AfpToPdf() throws Exception {\r\n        stubWireMock(FOLDER_PATH, &quot;convertAfpToPdf&quot;, 200, RECUPERA_DOCUMENTO_FOLDER_RESPONSE_OK);\r\n        ConvertAfpToPdfType request = createDocumentoAFPRequest();\r\n\r\n        Testata testata = new Testata();\r\n\r\n        ConvertAfpToPdfResponseType response = getPortNew().convertAfpToPdf(request, testata, new Holder&lt;&gt;());\r\n\r\n        assertNotNull(response);\r\n    }\r\n\r\n\r\n    private ConvertAfpToPdfType createDocumentoAFPRequest() {\r\n        ConvertAfpToPdfType request = new ConvertAfpToPdfType();\r\n        ListaFileAfpType listaFileAfpType = new ListaFileAfpType();\r\n        DataHandler dataHandlerAFP = new DataHandler(new FileDataSource(&quot;FOLD14.R00407A.NT01.D130606.AFP&quot;));\r\n        listaFileAfpType.setDocumentFileAfp(dataHandlerAFP);\r\n        request.setListaFileAfp(listaFileAfpType);\r\n\r\n        return request;\r\n\r\n    }\r\n\r\nprotected void stubWireMock(String urlPath, String requestContained, int httpStatus, String bodyFileName) {\r\n        wireMockRule.stubFor(post(urlPathEqualTo((BASE_URL_CONVERSIONE)))\r\n                .withRequestBody(containing(&quot;conversioneAfp&quot;))\r\n                .willReturn(\r\n                        aResponse()\r\n                                .withStatus(200)\r\n                                .withHeader(&quot;Content-Type&quot;, &quot;multipart/form-data&quot;)\r\n                                .withBody(&quot;prova&quot;)));\r\n    }\r\n```\r\n\r\nThe error\r\n\r\n    java.io.IOException: Buffer size exceeded: no line terminator\r\n    \tat org.eclipse.jetty.util.ReadLineInputStream.readLine(ReadLineInputStream.java:68)\r\n    \tat org.eclipse.jetty.util.MultiPartInputStreamParser.parse(MultiPartInputStreamParser.java:619)\r\n    \tat org.eclipse.jetty.util.MultiPartInputStreamParser.getParts(MultiPartInputStreamParser.java:491)\r\n    \tat org.eclipse.jetty.server.Request.getParts(Request.java:2374)\r\n    \tat org.eclipse.jetty.server.Request.getParts(Request.java:2326)\r\n    \tat com.github.tomakehurst.wiremock.servlet.WireMockHttpServletRequestAdapter.safelyGetRequestParts(WireMockHttpServletRequestAdapter.java:295)\r\n    \tat com.github.tomakehurst.wiremock.servlet.WireMockHttpServletRequestAdapter.getParts(WireMockHttpServletRequestAdapter.java:279)\r\n    \tat com.github.tomakehurst.wiremock.verification.LoggedRequest.createFrom(LoggedRequest.java:70)\r\n    \tat com.github.tomakehurst.wiremock.stubbing.InMemoryStubMappings.serveFor(InMemoryStubMappings.java:76)\r\n    \tat com.github.tomakehurst.wiremock.core.WireMockApp.serveStubFor(WireMockApp.java:164)\r\n    \tat com.github.tomakehurst.wiremock.http.StubRequestHandler.handleRequest(StubRequestHandler.java:50)\r\n    \tat com.github.tomakehurst.wiremock.http.AbstractRequestHandler.handle(AbstractRequestHandler.java:44)\r\n    \tat com.github.tomakehurst.wiremock.servlet.WireMockHandlerDispatchingServlet.service(WireMockHandlerDispatchingServlet.java:108)\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:741)\r\n    \tat org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:841)\r\n    \tat org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:543)\r\n    \tat org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:255)\r\n    \tat org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1253)\r\n    \tat org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:203)\r\n    \tat org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:481)\r\n    \tat org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:201)\r\n    \tat org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1155)\r\n    \tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:144)\r\n    \tat org.eclipse.jetty.server.handler.gzip.GzipHandler.handle(GzipHandler.java:666)\r\n    \tat org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:126)\r\n    \tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132)\r\n    \tat org.eclipse.jetty.server.Server.handle(Server.java:531)\r\n    \tat org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:352)\r\n    \tat org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:260)\r\n    \tat org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:305)\r\n    \tat org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:103)\r\n    \tat org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:117)\r\n    \tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:765)\r\n    \tat org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:683)\r\n    \tat java.lang.Thread.run(Thread.java:750)\r\n\r\nAt first glance it can be something jetty-related, but I haven&#39;t found anything online about it. It also seems strange to me, becauese I am only *mocking* a service. Can you find some useful solution/workaround?","title":"MTOM with WireMock","body":"<p>I am trying to use soap MTOM protocol with WireMock, attaching one file to SOAP request directed to mocked service, but it gives me some problems...</p>\n<pre><code>    @Test\n    public void AfpToPdf() throws Exception {\n        stubWireMock(FOLDER_PATH, &quot;convertAfpToPdf&quot;, 200, RECUPERA_DOCUMENTO_FOLDER_RESPONSE_OK);\n        ConvertAfpToPdfType request = createDocumentoAFPRequest();\n\n        Testata testata = new Testata();\n\n        ConvertAfpToPdfResponseType response = getPortNew().convertAfpToPdf(request, testata, new Holder&lt;&gt;());\n\n        assertNotNull(response);\n    }\n\n\n    private ConvertAfpToPdfType createDocumentoAFPRequest() {\n        ConvertAfpToPdfType request = new ConvertAfpToPdfType();\n        ListaFileAfpType listaFileAfpType = new ListaFileAfpType();\n        DataHandler dataHandlerAFP = new DataHandler(new FileDataSource(&quot;FOLD14.R00407A.NT01.D130606.AFP&quot;));\n        listaFileAfpType.setDocumentFileAfp(dataHandlerAFP);\n        request.setListaFileAfp(listaFileAfpType);\n\n        return request;\n\n    }\n\nprotected void stubWireMock(String urlPath, String requestContained, int httpStatus, String bodyFileName) {\n        wireMockRule.stubFor(post(urlPathEqualTo((BASE_URL_CONVERSIONE)))\n                .withRequestBody(containing(&quot;conversioneAfp&quot;))\n                .willReturn(\n                        aResponse()\n                                .withStatus(200)\n                                .withHeader(&quot;Content-Type&quot;, &quot;multipart/form-data&quot;)\n                                .withBody(&quot;prova&quot;)));\n    }\n</code></pre>\n<p>The error</p>\n<pre><code>java.io.IOException: Buffer size exceeded: no line terminator\n    at org.eclipse.jetty.util.ReadLineInputStream.readLine(ReadLineInputStream.java:68)\n    at org.eclipse.jetty.util.MultiPartInputStreamParser.parse(MultiPartInputStreamParser.java:619)\n    at org.eclipse.jetty.util.MultiPartInputStreamParser.getParts(MultiPartInputStreamParser.java:491)\n    at org.eclipse.jetty.server.Request.getParts(Request.java:2374)\n    at org.eclipse.jetty.server.Request.getParts(Request.java:2326)\n    at com.github.tomakehurst.wiremock.servlet.WireMockHttpServletRequestAdapter.safelyGetRequestParts(WireMockHttpServletRequestAdapter.java:295)\n    at com.github.tomakehurst.wiremock.servlet.WireMockHttpServletRequestAdapter.getParts(WireMockHttpServletRequestAdapter.java:279)\n    at com.github.tomakehurst.wiremock.verification.LoggedRequest.createFrom(LoggedRequest.java:70)\n    at com.github.tomakehurst.wiremock.stubbing.InMemoryStubMappings.serveFor(InMemoryStubMappings.java:76)\n    at com.github.tomakehurst.wiremock.core.WireMockApp.serveStubFor(WireMockApp.java:164)\n    at com.github.tomakehurst.wiremock.http.StubRequestHandler.handleRequest(StubRequestHandler.java:50)\n    at com.github.tomakehurst.wiremock.http.AbstractRequestHandler.handle(AbstractRequestHandler.java:44)\n    at com.github.tomakehurst.wiremock.servlet.WireMockHandlerDispatchingServlet.service(WireMockHandlerDispatchingServlet.java:108)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)\n    at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:841)\n    at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:543)\n    at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:255)\n    at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1253)\n    at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:203)\n    at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:481)\n    at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:201)\n    at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1155)\n    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:144)\n    at org.eclipse.jetty.server.handler.gzip.GzipHandler.handle(GzipHandler.java:666)\n    at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:126)\n    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132)\n    at org.eclipse.jetty.server.Server.handle(Server.java:531)\n    at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:352)\n    at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:260)\n    at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:305)\n    at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:103)\n    at org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:117)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:765)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:683)\n    at java.lang.Thread.run(Thread.java:750)\n</code></pre>\n<p>At first glance it can be something jetty-related, but I haven't found anything online about it. It also seems strange to me, becauese I am only <em>mocking</em> a service. Can you find some useful solution/workaround?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8723,"page":1269,"page_size":100}
