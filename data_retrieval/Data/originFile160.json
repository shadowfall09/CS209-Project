{"items":[{"tags":["java","spring","spring-boot","google-maps","geolocation"],"answers":[{"tags":[],"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695816705,"creation_date":1695816705,"answer_id":77187388,"question_id":77186694,"body_markdown":"For a real application in production, you should solve the problem with the API key. But if you are just testing and playing around, there are some free services where you don&#39;t need an API key. Try for example [Free Geocoding API][1]. \r\n\r\nYou can use the following example code as a starting point:\r\n\r\n    import java.io.IOException;\r\n    import java.net.URI;\r\n    import java.net.http.HttpClient;\r\n    import java.net.http.HttpRequest;\r\n    import java.net.http.HttpResponse;\r\n    import java.net.http.HttpResponse.BodyHandlers;\r\n    import java.time.Duration;\r\n    \r\n    import com.fasterxml.jackson.databind.JsonNode;\r\n    import com.fasterxml.jackson.databind.ObjectMapper;\r\n    \r\n    public class Example {\r\n    \r\n        private static final String GEOCODING_RESOURCE = &quot;https://geocode.maps.co/reverse&quot;;\r\n    \r\n        public static void main(String[] args) throws IOException, InterruptedException {\r\n    \r\n            ObjectMapper mapper = new ObjectMapper();\r\n    \r\n            String response = reverseGeocode(&quot;40.7558017&quot;, &quot;-73.9787414&quot;);\r\n            JsonNode responseJsonNode = mapper.readTree(response);\r\n    \r\n            JsonNode address = responseJsonNode.get(&quot;address&quot;);\r\n            String city = address.get(&quot;city&quot;).asText();\r\n            String country = address.get(&quot;country&quot;).asText();\r\n            System.out.println(&quot;Reverse geocoding returned: &quot; + city + &quot;, &quot; + country);\r\n        }\r\n    \r\n        public static String reverseGeocode(String lat, String lon) throws IOException, InterruptedException {\r\n    \r\n            HttpClient httpClient = HttpClient.newHttpClient();\r\n            String requestUri = GEOCODING_RESOURCE + &quot;?lat=&quot; + lat + &quot;&amp;lon=&quot; + lon;\r\n            HttpRequest geocodingRequest = HttpRequest.newBuilder()\r\n                                                      .GET()\r\n                                                      .uri(URI.create(requestUri))\r\n                                                      .timeout(Duration.ofMillis(2000)).build();\r\n    \r\n            HttpResponse geocodingResponse = httpClient.send(geocodingRequest, BodyHandlers.ofString());\r\n    \r\n            return geocodingResponse.body().toString();\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://geocode.maps.co/","title":"Is exist simply way to get city and country name from coordinates(Latitude, Longitude)? Is it possible to do it without Google Maps API?","body":"<p>For a real application in production, you should solve the problem with the API key. But if you are just testing and playing around, there are some free services where you don't need an API key. Try for example <a href=\"https://geocode.maps.co/\" rel=\"nofollow noreferrer\">Free Geocoding API</a>.</p>\n<p>You can use the following example code as a starting point:</p>\n<pre><code>import java.io.IOException;\nimport java.net.URI;\nimport java.net.http.HttpClient;\nimport java.net.http.HttpRequest;\nimport java.net.http.HttpResponse;\nimport java.net.http.HttpResponse.BodyHandlers;\nimport java.time.Duration;\n\nimport com.fasterxml.jackson.databind.JsonNode;\nimport com.fasterxml.jackson.databind.ObjectMapper;\n\npublic class Example {\n\n    private static final String GEOCODING_RESOURCE = &quot;https://geocode.maps.co/reverse&quot;;\n\n    public static void main(String[] args) throws IOException, InterruptedException {\n\n        ObjectMapper mapper = new ObjectMapper();\n\n        String response = reverseGeocode(&quot;40.7558017&quot;, &quot;-73.9787414&quot;);\n        JsonNode responseJsonNode = mapper.readTree(response);\n\n        JsonNode address = responseJsonNode.get(&quot;address&quot;);\n        String city = address.get(&quot;city&quot;).asText();\n        String country = address.get(&quot;country&quot;).asText();\n        System.out.println(&quot;Reverse geocoding returned: &quot; + city + &quot;, &quot; + country);\n    }\n\n    public static String reverseGeocode(String lat, String lon) throws IOException, InterruptedException {\n\n        HttpClient httpClient = HttpClient.newHttpClient();\n        String requestUri = GEOCODING_RESOURCE + &quot;?lat=&quot; + lat + &quot;&amp;lon=&quot; + lon;\n        HttpRequest geocodingRequest = HttpRequest.newBuilder()\n                                                  .GET()\n                                                  .uri(URI.create(requestUri))\n                                                  .timeout(Duration.ofMillis(2000)).build();\n\n        HttpResponse geocodingResponse = httpClient.send(geocodingRequest, BodyHandlers.ofString());\n\n        return geocodingResponse.body().toString();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":29546291,"reputation":1,"user_id":22643938,"display_name":"Yuliia Liapkalo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":106,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":77187388,"answer_count":1,"score":-1,"last_activity_date":1695819673,"creation_date":1695810986,"question_id":77186694,"body_markdown":"I write spring boot telegram bot. Now i have longitude and latitude of user, and want to get city and county name by its. \r\n\r\nTrying get it by Google Maps API, and from examples from here, but I also haven&#39;t clientId and my key is not valid for some reason.","title":"Is exist simply way to get city and country name from coordinates(Latitude, Longitude)? Is it possible to do it without Google Maps API?","body":"<p>I write spring boot telegram bot. Now i have longitude and latitude of user, and want to get city and county name by its.</p>\n<p>Trying get it by Google Maps API, and from examples from here, but I also haven't clientId and my key is not valid for some reason.</p>\n"},{"tags":["java","eclipse","deadlock","reentrantreadwritelock"],"comments":[{"owner":{"account_id":2498626,"reputation":2734,"user_id":2174382,"display_name":"guleryuz"},"score":0,"creation_date":1454762070,"post_id":35240480,"comment_id":58196009,"body_markdown":"firstly, release pause in eclipse, then with jvisualvm attach to process and generate a thread dump. in thread dump you can see locks and analyze lock owners (I think)","body":"firstly, release pause in eclipse, then with jvisualvm attach to process and generate a thread dump. in thread dump you can see locks and analyze lock owners (I think)"},{"owner":{"account_id":1567087,"reputation":7993,"user_id":1455622,"accept_rate":65,"display_name":"Scheintod"},"score":0,"creation_date":1454767048,"post_id":35240480,"comment_id":58197553,"body_markdown":"I&#39;ve already tried jstack to make me a threaddump. But I can only find threads waiting for the lock but none holding it.","body":"I&#39;ve already tried jstack to make me a threaddump. But I can only find threads waiting for the lock but none holding it."}],"answers":[{"comments":[{"owner":{"account_id":1567087,"reputation":7993,"user_id":1455622,"accept_rate":65,"display_name":"Scheintod"},"score":0,"creation_date":1695910540,"post_id":77187765,"comment_id":136089264,"body_markdown":"Thank you very much for the answer. I finally gave up and tried something else 7 years ago ;)","body":"Thank you very much for the answer. I finally gave up and tried something else 7 years ago ;)"}],"tags":[],"owner":{"account_id":8397613,"reputation":36,"user_id":18175140,"display_name":"Taylor Smock"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695819662,"creation_date":1695819662,"answer_id":77187765,"question_id":35240480,"body_markdown":"The problem here is that we need to get the application to hit a &quot;normal&quot; breakpoint.\r\n\r\nThere are a few different ways to do this. In all cases, the new breakpoint should pause the entire program (IntelliJ can do this, and I would assume Eclipse can as well).\r\n\r\n* `Object#wait` (method entry breakpoint on `public final native void wait (long timeout)`)\r\n* `Unsafe#;park` (method entry breakpoint on `public native void park(boolean isAbsolute, long time)`)\r\n* If you have a thread that is constantly performing work (e.g. getting remote data), add a breakpoint in that code\r\n\r\nOnce that has occurred, you can (in IntelliJ IDEA, and presumably Eclipse) switch threads to the threads of interest and debug from there.\r\n\r\nIn IntelliJ IDEA, I was able to do the following:\r\n```java\r\nfinal Thread ownerThread = ((ReentrantReadWriteLock.WriteLock) lock.writeLock()).sync.getExclusiveOwnerThread();\r\n```","title":"Debugging ReentrantReadWriteLock Deadlock in Eclipse","body":"<p>The problem here is that we need to get the application to hit a &quot;normal&quot; breakpoint.</p>\n<p>There are a few different ways to do this. In all cases, the new breakpoint should pause the entire program (IntelliJ can do this, and I would assume Eclipse can as well).</p>\n<ul>\n<li><code>Object#wait</code> (method entry breakpoint on <code>public final native void wait (long timeout)</code>)</li>\n<li><code>Unsafe#;park</code> (method entry breakpoint on <code>public native void park(boolean isAbsolute, long time)</code>)</li>\n<li>If you have a thread that is constantly performing work (e.g. getting remote data), add a breakpoint in that code</li>\n</ul>\n<p>Once that has occurred, you can (in IntelliJ IDEA, and presumably Eclipse) switch threads to the threads of interest and debug from there.</p>\n<p>In IntelliJ IDEA, I was able to do the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>final Thread ownerThread = ((ReentrantReadWriteLock.WriteLock) lock.writeLock()).sync.getExclusiveOwnerThread();\n</code></pre>\n"}],"owner":{"account_id":1567087,"reputation":7993,"user_id":1455622,"accept_rate":65,"display_name":"Scheintod"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":352,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695819662,"creation_date":1454758173,"question_id":35240480,"body_markdown":"I&#39;ve got an Application which occasionally deadlocks (say once a month).\r\n\r\nRight now I managed for the first time to reproduce this condition while running in eclipse debugger.\r\n\r\nIt seems as if all threads are waiting for the WriteLock to get released.\r\n\r\nWhat I need is a way to find out which one (of the 200) Threads is holding the lock.\r\n\r\nBut pausing the threads in eclipse and inspecting has yielded no results because eclipse tells me it can&#39;t access the variables I want to view because the thread was manually suspended.\r\n\r\nI don&#39;t want to restart the application because I don&#39;t know if I can manage to get into this deadlock a second time.\r\n\r\nSo what to do to find the lock holder?\r\n\r\nEDIT: I&#39;ve already tried jstack to make me a thread dump. But I can only find threads waiting for the lock but none holding it.","title":"Debugging ReentrantReadWriteLock Deadlock in Eclipse","body":"<p>I've got an Application which occasionally deadlocks (say once a month).</p>\n\n<p>Right now I managed for the first time to reproduce this condition while running in eclipse debugger.</p>\n\n<p>It seems as if all threads are waiting for the WriteLock to get released.</p>\n\n<p>What I need is a way to find out which one (of the 200) Threads is holding the lock.</p>\n\n<p>But pausing the threads in eclipse and inspecting has yielded no results because eclipse tells me it can't access the variables I want to view because the thread was manually suspended.</p>\n\n<p>I don't want to restart the application because I don't know if I can manage to get into this deadlock a second time.</p>\n\n<p>So what to do to find the lock holder?</p>\n\n<p>EDIT: I've already tried jstack to make me a thread dump. But I can only find threads waiting for the lock but none holding it.</p>\n"},{"tags":["java","dns","quarkus","inetaddress"],"comments":[{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":0,"creation_date":1695658151,"post_id":77174102,"comment_id":136050829,"body_markdown":"What is meant by &#39;My java app is running native&#39;?","body":"What is meant by &#39;My java app is running native&#39;?"}],"answers":[{"tags":[],"owner":{"account_id":3580881,"reputation":5060,"user_id":2989136,"accept_rate":79,"display_name":"Herr Derb"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695819110,"creation_date":1695819110,"answer_id":77187695,"question_id":77174102,"body_markdown":"After wasting some time I discovered that quarkus has disabled name resolving by default due to security reasons.\r\nSetting `quarkus.naming.enable-jndi=true` resolves the problem and the lookup works as expected using `InetAddress`.\r\n\r\nSee -&gt; Disabling JNDI by default https://groups.google.com/g/quarkus-dev/c/bp1wVF1yLXE","title":"DNS lookup of external address in Quarkus application returns loopback address","body":"<p>After wasting some time I discovered that quarkus has disabled name resolving by default due to security reasons.\nSetting <code>quarkus.naming.enable-jndi=true</code> resolves the problem and the lookup works as expected using <code>InetAddress</code>.</p>\n<p>See -&gt; Disabling JNDI by default <a href=\"https://groups.google.com/g/quarkus-dev/c/bp1wVF1yLXE\" rel=\"nofollow noreferrer\">https://groups.google.com/g/quarkus-dev/c/bp1wVF1yLXE</a></p>\n"}],"owner":{"account_id":3580881,"reputation":5060,"user_id":2989136,"accept_rate":79,"display_name":"Herr Derb"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77187695,"answer_count":1,"score":0,"last_activity_date":1695819110,"creation_date":1695656947,"question_id":77174102,"body_markdown":"I want to loopup the ip addresses of a headless kubernetes service to access each pod.\r\nWhen testing it on the very pod with `getent hosts my-headless-service` it returns the 2 expected ips.\r\nWhen I call `InetAddress.getAllByName(&quot;my-headless-service&quot;)` in my Quarkus application that runs on the same pod, I get the loopback address`[localhost/127.0.0.1]`\r\n\r\nAre there any pit falls which I am not aware of when resolving a host name with Java?\r\n\r\n","title":"DNS lookup of external address in Quarkus application returns loopback address","body":"<p>I want to loopup the ip addresses of a headless kubernetes service to access each pod.\nWhen testing it on the very pod with <code>getent hosts my-headless-service</code> it returns the 2 expected ips.\nWhen I call <code>InetAddress.getAllByName(&quot;my-headless-service&quot;)</code> in my Quarkus application that runs on the same pod, I get the loopback address<code>[localhost/127.0.0.1]</code></p>\n<p>Are there any pit falls which I am not aware of when resolving a host name with Java?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":4,"creation_date":1695605734,"post_id":77169492,"comment_id":136042268,"body_markdown":"What is the value of `(int)Math.pow(2,31)`? Find out the answer, and you will see why your code is not correct.","body":"What is the value of <code>(int)Math.pow(2,31)</code>? Find out the answer, and you will see why your code is not correct."},{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1695612391,"post_id":77169492,"comment_id":136042824,"body_markdown":"You could just read the input as a string and attempt `Integer.parseInt(input);` and if it doesn&#39;t explode, print `int`. Same for `Long`, `Short` and `Byte`. Also, what about `Double` and `Float` which are capable of accurately holding integer values up to a certain size (you can do your own research - see [IEEE 754](https://en.wikipedia.org/wiki/IEEE_754).","body":"You could just read the input as a string and attempt <code>Integer.parseInt(input);</code> and if it doesn&#39;t explode, print <code>int</code>. Same for <code>Long</code>, <code>Short</code> and <code>Byte</code>. Also, what about <code>Double</code> and <code>Float</code> which are capable of accurately holding integer values up to a certain size (you can do your own research - see <a href=\"https://en.wikipedia.org/wiki/IEEE_754\" rel=\"nofollow noreferrer\">IEEE 754</a>."}],"answers":[{"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1695819259,"post_id":77169545,"comment_id":136074780,"body_markdown":"It’s funny that even experienced developers miss the point that the `Scanner` used to read the number already provides methods for the necessary checks, i.e. `hasNextLong()` to `hasNextByte()`…","body":"It’s funny that even experienced developers miss the point that the <code>Scanner</code> used to read the number already provides methods for the necessary checks, i.e. <code>hasNextLong()</code> to <code>hasNextByte()</code>…"},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1695820845,"post_id":77169545,"comment_id":136075158,"body_markdown":"The intent of this answer isn&#39;t to say: Here is the full answer, so I didn&#39;t want to go that far and spoonfeed.","body":"The intent of this answer isn&#39;t to say: Here is the full answer, so I didn&#39;t want to go that far and spoonfeed."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1695821078,"post_id":77169545,"comment_id":136075207,"body_markdown":"I’m not objecting the idea to provide only hints, but the suggestion to call `next()` and parse manually, is pointing into the wrong direction.","body":"I’m not objecting the idea to provide only hints, but the suggestion to call <code>next()</code> and parse manually, is pointing into the wrong direction."}],"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1695606857,"creation_date":1695606857,"answer_id":77169545,"question_id":77169492,"body_markdown":"You have multiple problems here.\r\n\r\n1. If you read a `long`, how can your &#39;it does not fit in anything&#39; _ever_ trigger? The input is `213333333333333333333333333333333333`, you read it as a long, which instantly fails and throws an exception. Fixing this isn&#39;t easy - basically requires a total rewrite. You can&#39;t _have_ your input as a number (as there&#39;s nothing larger than a long). It must be a string, and thus, to check if &#39;it fits&#39;, you can&#39;t do `&gt;=-128`, you have to try to parse whatever string you have _into_ a byte and see if it works.\r\n\r\n2. `Math.pow` is for `double` (i.e., inaccurate) math and doesn&#39;t do the job correctly. If you want &#39;the smallest int&#39;, that&#39;d be `Integer.MIN_VALUE`, and `Integer.MAX_VALUE`, not `Math.pow(2,31)`, which isn&#39;t actually what you want. Because complicated - doubles are inaccurate is the oversimplified reason, and `Math.pow` does double math.\r\n\r\nMostly point 2 is irrelevant, because point 1 says this entire approach cannot possibly work in the first place.\r\n\r\nThis question is somewhat more difficult than a first glance might indicate. Hint: You want `.next()` (not `.nextLong()`), and you want to know how to catch exceptions, and you want to _try_ to parse that string using e.g. `Byte.parseByte`, `Long.parseLong`, and so on. If it works, print that data type. If it fails (an exception occurs, which you&#39;d have to catch), don&#39;t print it. It&#39;ll look nothing like what you wrote so far. Not your fault - this approach is fine until you get to the icky problem that you&#39;re supposed to be capable of reading numbers that are so large they don&#39;t even fit in a long.\r\n","title":"We&#39;ll work with the primitives used to hold integer values (byte, short, int, and long):","body":"<p>You have multiple problems here.</p>\n<ol>\n<li><p>If you read a <code>long</code>, how can your 'it does not fit in anything' <em>ever</em> trigger? The input is <code>213333333333333333333333333333333333</code>, you read it as a long, which instantly fails and throws an exception. Fixing this isn't easy - basically requires a total rewrite. You can't <em>have</em> your input as a number (as there's nothing larger than a long). It must be a string, and thus, to check if 'it fits', you can't do <code>&gt;=-128</code>, you have to try to parse whatever string you have <em>into</em> a byte and see if it works.</p>\n</li>\n<li><p><code>Math.pow</code> is for <code>double</code> (i.e., inaccurate) math and doesn't do the job correctly. If you want 'the smallest int', that'd be <code>Integer.MIN_VALUE</code>, and <code>Integer.MAX_VALUE</code>, not <code>Math.pow(2,31)</code>, which isn't actually what you want. Because complicated - doubles are inaccurate is the oversimplified reason, and <code>Math.pow</code> does double math.</p>\n</li>\n</ol>\n<p>Mostly point 2 is irrelevant, because point 1 says this entire approach cannot possibly work in the first place.</p>\n<p>This question is somewhat more difficult than a first glance might indicate. Hint: You want <code>.next()</code> (not <code>.nextLong()</code>), and you want to know how to catch exceptions, and you want to <em>try</em> to parse that string using e.g. <code>Byte.parseByte</code>, <code>Long.parseLong</code>, and so on. If it works, print that data type. If it fails (an exception occurs, which you'd have to catch), don't print it. It'll look nothing like what you wrote so far. Not your fault - this approach is fine until you get to the icky problem that you're supposed to be capable of reading numbers that are so large they don't even fit in a long.</p>\n"},{"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1695819768,"post_id":77169608,"comment_id":136074907,"body_markdown":"[Don’t use Double Brace Initialization](https://stackoverflow.com/a/27521360/2711488)","body":"<a href=\"https://stackoverflow.com/a/27521360/2711488\">Don’t use Double Brace Initialization</a>"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1695821612,"post_id":77169608,"comment_id":136075337,"body_markdown":"@Holger, that is an _anonymous class_.","body":"@Holger, that is an <i>anonymous class</i>."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1695821727,"post_id":77169608,"comment_id":136075357,"body_markdown":"Exactly. And you shouldn’t create an anonymous class solely for initializing a `Map`.","body":"Exactly. And you shouldn’t create an anonymous class solely for initializing a <code>Map</code>."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1695822159,"post_id":77169608,"comment_id":136075464,"body_markdown":"@Holger, here is the _Java_ tutorial for _[anonymous classes](https://docs.oracle.com/javase/tutorial/java/javaOO/anonymousclasses.html)_ and for _[instance initializers](https://docs.oracle.com/javase/tutorial/java/javaOO/initial.html)_.  The _anonymous class_ tutorial even states the following, _&quot;... you can declare the following in anonymous classes: ... Instance initializers ...&quot;_.  I am not too concerned with it&#39;s use, considering.","body":"@Holger, here is the <i>Java</i> tutorial for <i><a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/anonymousclasses.html\" rel=\"nofollow noreferrer\">anonymous classes</a></i> and for <i><a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/initial.html\" rel=\"nofollow noreferrer\">instance initializers</a></i>.  The <i>anonymous class</i> tutorial even states the following, <i>&quot;... you can declare the following in anonymous classes: ... Instance initializers ...&quot;</i>.  I am not too concerned with it&#39;s use, considering."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1695822307,"post_id":77169608,"comment_id":136075500,"body_markdown":"@Holger, the process you&#39;re referring to is called _encapsulation_, and is essentially the abstract for _object-oriented design_.  The _Java_ framework is built using _encapsulation_.","body":"@Holger, the process you&#39;re referring to is called <i>encapsulation</i>, and is essentially the abstract for <i>object-oriented design</i>.  The <i>Java</i> framework is built using <i>encapsulation</i>."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1695835048,"post_id":77169608,"comment_id":136078211,"body_markdown":"Your links do nowhere suggest that you should use these features for initializing a collection. The technical reasons why you shouldn’t do this have been given in the link in my first comment. Further, you may search about the design principle to *prefer delegation (or composition) over inheritance*. Your code is a violation of this principle by creating an entirely obsolete inheritance relationship. Can you name an actual reason to create a subclass here, i.e. *not* “because it is possible”?","body":"Your links do nowhere suggest that you should use these features for initializing a collection. The technical reasons why you shouldn’t do this have been given in the link in my first comment. Further, you may search about the design principle to <i>prefer delegation (or composition) over inheritance</i>. Your code is a violation of this principle by creating an entirely obsolete inheritance relationship. Can you name an actual reason to create a subclass here, i.e. <i>not</i> “because it is possible”?"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1695839444,"post_id":77169608,"comment_id":136078989,"body_markdown":"@Holger, I&#39;m not too concerned with the using _anonymous classes_.  Try a different question.","body":"@Holger, I&#39;m not too concerned with the using <i>anonymous classes</i>.  Try a different question."}],"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":7,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1695762520,"creation_date":1695608340,"answer_id":77169608,"question_id":77169492,"body_markdown":"Use the _[BigInteger](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/math/BigInteger.html)_ class to evaluate the numbers.\r\n\r\nAdditionally, utilize a _static data-structure_ to provide range values for each _primitive data-type_.\r\n\r\n```java\r\nimport static java.lang.String.valueOf;\r\n\r\nimport java.math.BigInteger;\r\nimport java.util.ArrayList;\r\nimport java.util.LinkedHashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\n\r\npublic class Util {\r\n    static List&lt;Class&lt;?&gt;&gt; fit(BigInteger i) {\r\n        List&lt;Class&lt;?&gt;&gt; l = new ArrayList&lt;&gt;();\r\n        for (Map.Entry&lt;Class&lt;?&gt;, Range&gt; e : Range.map.entrySet())\r\n            if (e.getValue().withinBounds(i)) l.add(e.getKey());\r\n        return l;\r\n    }\r\n\r\n    static class Range {\r\n        static Map&lt;Class&lt;?&gt;, Range&gt; map = new LinkedHashMap&lt;&gt;() {{\r\n            put(byte.class, Range.of(byte.class));\r\n            put(short.class, Range.of(short.class));\r\n            put(char.class, Range.of(char.class));\r\n            put(int.class, Range.of(int.class));\r\n            put(long.class, Range.of(long.class));\r\n        }};\r\n        BigInteger minimum, maximum;\r\n\r\n        private Range(BigInteger minimum, BigInteger maximum) {\r\n            this.minimum = minimum;\r\n            this.maximum = maximum;\r\n        }\r\n\r\n        boolean withinBounds(BigInteger x) {\r\n            return x.compareTo(minimum) &gt;= 0 &amp;&amp; x.compareTo(maximum) &lt;= 0;\r\n        }\r\n\r\n        static Range of(Class&lt;?&gt; c) {\r\n            return new Range(min(c), max(c));\r\n        }\r\n\r\n        private static BigInteger min(Class&lt;?&gt; c) {\r\n            String s = null;\r\n            if (c == byte.class) s = valueOf(Byte.MIN_VALUE);\r\n            else if (c == short.class) s = valueOf(Short.MIN_VALUE);\r\n            else if (c == char.class) s = valueOf((int) Character.MIN_VALUE);\r\n            else if (c == int.class) s = valueOf(Integer.MIN_VALUE);\r\n            else if (c == long.class) s = valueOf(Long.MIN_VALUE);\r\n            return s != null ? new BigInteger(s) : null;\r\n        }\r\n\r\n        private static BigInteger max(Class&lt;?&gt; c) {\r\n            String s = null;\r\n            if (c == byte.class) s = valueOf(Byte.MAX_VALUE);\r\n            else if (c == short.class) s = valueOf(Short.MAX_VALUE);\r\n            else if (c == char.class) s = valueOf((int) Character.MAX_VALUE);\r\n            else if (c == int.class) s = valueOf(Integer.MAX_VALUE);\r\n            else if (c == long.class) s = valueOf(Long.MAX_VALUE);\r\n            return s != null ? new BigInteger(s) : null;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nHere is an example usage.\r\n\r\n```java\r\nString s = &quot;5 -150 150000 1500000000 213333333333333333333333333333333333 -100000000000000&quot;;\r\nScanner sc = new Scanner(s);\r\nBigInteger x;\r\nwhile (sc.hasNextBigInteger())\r\n    System.out.printf(&quot;%s%n%s%n%n&quot;, x = sc.nextBigInteger(), Util.fit(x));\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n5\r\n[byte, short, char, int, long]\r\n\r\n-150\r\n[short, int, long]\r\n\r\n150000\r\n[int, long]\r\n\r\n1500000000\r\n[int, long]\r\n\r\n213333333333333333333333333333333333\r\n[]\r\n\r\n-100000000000000\r\n[long]\r\n```","title":"We&#39;ll work with the primitives used to hold integer values (byte, short, int, and long):","body":"<p>Use the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/math/BigInteger.html\" rel=\"nofollow noreferrer\">BigInteger</a></em> class to evaluate the numbers.</p>\n<p>Additionally, utilize a <em>static data-structure</em> to provide range values for each <em>primitive data-type</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import static java.lang.String.valueOf;\n\nimport java.math.BigInteger;\nimport java.util.ArrayList;\nimport java.util.LinkedHashMap;\nimport java.util.List;\nimport java.util.Map;\n\npublic class Util {\n    static List&lt;Class&lt;?&gt;&gt; fit(BigInteger i) {\n        List&lt;Class&lt;?&gt;&gt; l = new ArrayList&lt;&gt;();\n        for (Map.Entry&lt;Class&lt;?&gt;, Range&gt; e : Range.map.entrySet())\n            if (e.getValue().withinBounds(i)) l.add(e.getKey());\n        return l;\n    }\n\n    static class Range {\n        static Map&lt;Class&lt;?&gt;, Range&gt; map = new LinkedHashMap&lt;&gt;() {{\n            put(byte.class, Range.of(byte.class));\n            put(short.class, Range.of(short.class));\n            put(char.class, Range.of(char.class));\n            put(int.class, Range.of(int.class));\n            put(long.class, Range.of(long.class));\n        }};\n        BigInteger minimum, maximum;\n\n        private Range(BigInteger minimum, BigInteger maximum) {\n            this.minimum = minimum;\n            this.maximum = maximum;\n        }\n\n        boolean withinBounds(BigInteger x) {\n            return x.compareTo(minimum) &gt;= 0 &amp;&amp; x.compareTo(maximum) &lt;= 0;\n        }\n\n        static Range of(Class&lt;?&gt; c) {\n            return new Range(min(c), max(c));\n        }\n\n        private static BigInteger min(Class&lt;?&gt; c) {\n            String s = null;\n            if (c == byte.class) s = valueOf(Byte.MIN_VALUE);\n            else if (c == short.class) s = valueOf(Short.MIN_VALUE);\n            else if (c == char.class) s = valueOf((int) Character.MIN_VALUE);\n            else if (c == int.class) s = valueOf(Integer.MIN_VALUE);\n            else if (c == long.class) s = valueOf(Long.MIN_VALUE);\n            return s != null ? new BigInteger(s) : null;\n        }\n\n        private static BigInteger max(Class&lt;?&gt; c) {\n            String s = null;\n            if (c == byte.class) s = valueOf(Byte.MAX_VALUE);\n            else if (c == short.class) s = valueOf(Short.MAX_VALUE);\n            else if (c == char.class) s = valueOf((int) Character.MAX_VALUE);\n            else if (c == int.class) s = valueOf(Integer.MAX_VALUE);\n            else if (c == long.class) s = valueOf(Long.MAX_VALUE);\n            return s != null ? new BigInteger(s) : null;\n        }\n    }\n}\n</code></pre>\n<p>Here is an example usage.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String s = &quot;5 -150 150000 1500000000 213333333333333333333333333333333333 -100000000000000&quot;;\nScanner sc = new Scanner(s);\nBigInteger x;\nwhile (sc.hasNextBigInteger())\n    System.out.printf(&quot;%s%n%s%n%n&quot;, x = sc.nextBigInteger(), Util.fit(x));\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>5\n[byte, short, char, int, long]\n\n-150\n[short, int, long]\n\n150000\n[int, long]\n\n1500000000\n[int, long]\n\n213333333333333333333333333333333333\n[]\n\n-100000000000000\n[long]\n</code></pre>\n"},{"comments":[{"owner":{"account_id":29523975,"reputation":7,"user_id":22626089,"display_name":"Kavish singh"},"score":0,"creation_date":1695657932,"post_id":77169789,"comment_id":136050785,"body_markdown":"bro , can you please explain can fit ,i didnt listen about can fit ever before , i also search on internet but i didnt find any useful ,so can you please explain it to me.","body":"bro , can you please explain can fit ,i didnt listen about can fit ever before , i also search on internet but i didnt find any useful ,so can you please explain it to me."},{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1695677189,"post_id":77169789,"comment_id":136053853,"body_markdown":"@Kavishsingh it&#39;s a method I added to handle the part of the answer that&#39;s common to all primitive types in your problem (see [refactoring](https://en.m.wikipedia.org/wiki/Code_refactoring) and [DRY](https://en.m.wikipedia.org/wiki/Don%27t_repeat_yourself)). Just copy paste `static boolean canFit ... }` into your Java class (not inside your `main` method, but beside it inside your Solution class).","body":"@Kavishsingh it&#39;s a method I added to handle the part of the answer that&#39;s common to all primitive types in your problem (see <a href=\"https://en.m.wikipedia.org/wiki/Code_refactoring\" rel=\"nofollow noreferrer\">refactoring</a> and <a href=\"https://en.m.wikipedia.org/wiki/Don%27t_repeat_yourself\" rel=\"nofollow noreferrer\">DRY</a>). Just copy paste <code>static boolean canFit ... }</code> into your Java class (not inside your <code>main</code> method, but beside it inside your Solution class)."},{"owner":{"account_id":29523975,"reputation":7,"user_id":22626089,"display_name":"Kavish singh"},"score":0,"creation_date":1695722971,"post_id":77169789,"comment_id":136059447,"body_markdown":"Really thanks to you bro.","body":"Really thanks to you bro."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1695819412,"post_id":77169789,"comment_id":136074818,"body_markdown":"Attempting an operation likely to fail, to catch the exception, should only be the last resort, when no pre-check method is available. But here, [it’s rather easy](https://stackoverflow.com/a/77187687/2711488)","body":"Attempting an operation likely to fail, to catch the exception, should only be the last resort, when no pre-check method is available. But here, <a href=\"https://stackoverflow.com/a/77187687/2711488\">it’s rather easy</a>"}],"tags":[],"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"comment_count":4,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1695612844,"creation_date":1695612844,"answer_id":77169789,"question_id":77169492,"body_markdown":"Let the JDK do the heavy lifting by having Java&#39;s `Number` classes attempt to parse the input:\r\n\r\n```\r\nString x = sc.nextLine();\r\nSystem.out.println(x + &quot; can be fitted in:&quot;);\r\nif (canFit(x, Byte::parseByte)) System.out.println(&quot;* byte&quot;);\r\nif (canFit(x, Short::parseShort)) System.out.println(&quot;* short&quot;);\r\nif (canFit(x, Integer::parseInt)) System.out.println(&quot;* int&quot;);\r\nif (canFit(x, Long::parseLong)) System.out.println(&quot;* long&quot;);\r\nif (!canFit(x, Byte::parseByte) &amp;&amp;\r\n    !canFit(x, Short::parseShort) &amp;&amp;\r\n    !canFit(x, Integer::parseInt) &amp;&amp;\r\n    !canFit(x, Long::parseLong)) System.out.println(&quot;can&#39;t be fitted anywhere.&quot;);\r\n```\r\n\r\nand define this method:\r\n\r\n```\r\nstatic boolean canFit(String input, Consumer&lt;String&gt; parser) {\r\n    try {\r\n        parser.accept(input);\r\n        return true;\r\n    } catch (NumberFormatException e) {\r\n        return false;\r\n    }\r\n}\r\n```\r\n","title":"We&#39;ll work with the primitives used to hold integer values (byte, short, int, and long):","body":"<p>Let the JDK do the heavy lifting by having Java's <code>Number</code> classes attempt to parse the input:</p>\n<pre><code>String x = sc.nextLine();\nSystem.out.println(x + &quot; can be fitted in:&quot;);\nif (canFit(x, Byte::parseByte)) System.out.println(&quot;* byte&quot;);\nif (canFit(x, Short::parseShort)) System.out.println(&quot;* short&quot;);\nif (canFit(x, Integer::parseInt)) System.out.println(&quot;* int&quot;);\nif (canFit(x, Long::parseLong)) System.out.println(&quot;* long&quot;);\nif (!canFit(x, Byte::parseByte) &amp;&amp;\n    !canFit(x, Short::parseShort) &amp;&amp;\n    !canFit(x, Integer::parseInt) &amp;&amp;\n    !canFit(x, Long::parseLong)) System.out.println(&quot;can't be fitted anywhere.&quot;);\n</code></pre>\n<p>and define this method:</p>\n<pre><code>static boolean canFit(String input, Consumer&lt;String&gt; parser) {\n    try {\n        parser.accept(input);\n        return true;\n    } catch (NumberFormatException e) {\n        return false;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29523975,"reputation":7,"user_id":22626089,"display_name":"Kavish singh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695660651,"creation_date":1695656953,"answer_id":77174103,"question_id":77169492,"body_markdown":"    import java.util.*;\r\n    import java.io.*;\r\n     \r\n    class Solution{\r\n        public static void main(String []argh){\r\n            \r\n            Scanner sc = new Scanner(System.in);\r\n            int t=sc.nextInt();\r\n    \r\n            for(int i=0;i&lt;t;i++)\r\n            { \r\n               try{\r\n                  long x= sc.nextLong();\r\n                    System.out.println(x+&quot; can be fitted in:&quot;);\r\n    \r\n                    if(x&gt;=-128 &amp;&amp; x&lt;=127)System.out.println(&quot;* byte&quot;);\r\n    \r\n                    if(x&gt;=-32768 &amp;&amp; x&lt;=32767)System.out.println(&quot;* short&quot;);\r\n    \r\n                    if(x&gt;=-Integer.MIN_VALUE&amp;&amp; x&lt;= \r\n                           Integer.MAX_VALUE)System.out.println(&quot;* int&quot;);\r\n    \r\n                    if(x&gt;=-Long.MIN_VALUE&amp;&amp; x&lt;= \r\n                           Long.MAX_VALUE)System.out.println(&quot;* long&quot;);\r\n    \r\n                }\r\n                catch(Exception e){\r\n                    System.out.println(sc.next()+&quot; can&#39;t be fitted anywhere.&quot;);\r\n                }    \r\n            }           \r\n        }\r\n    }\r\n\r\nThanku all of you for helping me , your answers teaches me a lot of new things.Thanku for all of your favour to me ,now i got the code that satisfies my conditions ,all of you have also given me a code for same output that code is also right but i want to show you my answer,\r\n","title":"We&#39;ll work with the primitives used to hold integer values (byte, short, int, and long):","body":"<pre><code>import java.util.*;\nimport java.io.*;\n \nclass Solution{\n    public static void main(String []argh){\n        \n        Scanner sc = new Scanner(System.in);\n        int t=sc.nextInt();\n\n        for(int i=0;i&lt;t;i++)\n        { \n           try{\n              long x= sc.nextLong();\n                System.out.println(x+&quot; can be fitted in:&quot;);\n\n                if(x&gt;=-128 &amp;&amp; x&lt;=127)System.out.println(&quot;* byte&quot;);\n\n                if(x&gt;=-32768 &amp;&amp; x&lt;=32767)System.out.println(&quot;* short&quot;);\n\n                if(x&gt;=-Integer.MIN_VALUE&amp;&amp; x&lt;= \n                       Integer.MAX_VALUE)System.out.println(&quot;* int&quot;);\n\n                if(x&gt;=-Long.MIN_VALUE&amp;&amp; x&lt;= \n                       Long.MAX_VALUE)System.out.println(&quot;* long&quot;);\n\n            }\n            catch(Exception e){\n                System.out.println(sc.next()+&quot; can't be fitted anywhere.&quot;);\n            }    \n        }           \n    }\n}\n</code></pre>\n<p>Thanku all of you for helping me , your answers teaches me a lot of new things.Thanku for all of your favour to me ,now i got the code that satisfies my conditions ,all of you have also given me a code for same output that code is also right but i want to show you my answer,</p>\n"},{"tags":[],"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695819065,"creation_date":1695819065,"answer_id":77187687,"question_id":77169492,"body_markdown":"You are making your life unnecessarily hard. You are already using a `Scanner` which can perform all the necessary checks for you. You just have to ask:\r\n\r\n```java\r\nint t = sc.nextInt();\r\nfor(int i = 0; i &lt; t; i++) {\r\n\r\n    boolean fitsByte = sc.hasNextByte(), fitsShort = sc.hasNextShort(),\r\n        fitsInt = sc.hasNextInt(), fitsLong = sc.hasNextLong();\r\n\r\n    System.out.print(sc.next());\r\n\r\n    if(!fitsLong) System.out.println(&quot; can&#39;t be fitted anywhere.&quot;);\r\n    else {\r\n        System.out.println(&quot; can be fitted in:&quot;);\r\n        if(fitsByte) System.out.println(&quot;* byte&quot;);\r\n        if(fitsShort) System.out.println(&quot;* short&quot;);\r\n        if(fitsInt) System.out.println(&quot;* int&quot;);\r\n        System.out.println(&quot;* long&quot;);\r\n    }\r\n}\r\n```\r\n\r\nJust keep in mind that you have to call `hasNext…()` before `next()`, to query the properties of the next element.\r\n\r\nNote, how easy it is to expand to other types:\r\n\r\n```java\r\nint t = sc.nextInt();\r\nfor(int i = 0; i &lt; t; i++) {\r\n\r\n    boolean fitsByte = sc.hasNextByte(), fitsShort = sc.hasNextShort(),\r\n        fitsInt = sc.hasNextInt(), fitsLong = sc.hasNextLong(),\r\n        fitsBig = sc.hasNextBigInteger();\r\n\r\n    System.out.print(sc.next());\r\n\r\n    if(!fitsBig) System.out.println(&quot; can&#39;t be fitted anywhere.&quot;);\r\n    else {\r\n        System.out.println(&quot; can be fitted in:&quot;);\r\n        if(fitsByte) System.out.println(&quot;* byte&quot;);\r\n        if(fitsShort) System.out.println(&quot;* short&quot;);\r\n        if(fitsInt) System.out.println(&quot;* int&quot;);\r\n        if(fitsLong) System.out.println(&quot;* long&quot;);\r\n        System.out.println(&quot;* BigInteger&quot;);\r\n    }\r\n}\r\n```\r\n(An input would not fit into a `BigInteger` if it has a fraction or isn’t a number at all)\r\n","title":"We&#39;ll work with the primitives used to hold integer values (byte, short, int, and long):","body":"<p>You are making your life unnecessarily hard. You are already using a <code>Scanner</code> which can perform all the necessary checks for you. You just have to ask:</p>\n<pre class=\"lang-java prettyprint-override\"><code>int t = sc.nextInt();\nfor(int i = 0; i &lt; t; i++) {\n\n    boolean fitsByte = sc.hasNextByte(), fitsShort = sc.hasNextShort(),\n        fitsInt = sc.hasNextInt(), fitsLong = sc.hasNextLong();\n\n    System.out.print(sc.next());\n\n    if(!fitsLong) System.out.println(&quot; can't be fitted anywhere.&quot;);\n    else {\n        System.out.println(&quot; can be fitted in:&quot;);\n        if(fitsByte) System.out.println(&quot;* byte&quot;);\n        if(fitsShort) System.out.println(&quot;* short&quot;);\n        if(fitsInt) System.out.println(&quot;* int&quot;);\n        System.out.println(&quot;* long&quot;);\n    }\n}\n</code></pre>\n<p>Just keep in mind that you have to call <code>hasNext…()</code> before <code>next()</code>, to query the properties of the next element.</p>\n<p>Note, how easy it is to expand to other types:</p>\n<pre class=\"lang-java prettyprint-override\"><code>int t = sc.nextInt();\nfor(int i = 0; i &lt; t; i++) {\n\n    boolean fitsByte = sc.hasNextByte(), fitsShort = sc.hasNextShort(),\n        fitsInt = sc.hasNextInt(), fitsLong = sc.hasNextLong(),\n        fitsBig = sc.hasNextBigInteger();\n\n    System.out.print(sc.next());\n\n    if(!fitsBig) System.out.println(&quot; can't be fitted anywhere.&quot;);\n    else {\n        System.out.println(&quot; can be fitted in:&quot;);\n        if(fitsByte) System.out.println(&quot;* byte&quot;);\n        if(fitsShort) System.out.println(&quot;* short&quot;);\n        if(fitsInt) System.out.println(&quot;* int&quot;);\n        if(fitsLong) System.out.println(&quot;* long&quot;);\n        System.out.println(&quot;* BigInteger&quot;);\n    }\n}\n</code></pre>\n<p>(An input would not fit into a <code>BigInteger</code> if it has a fraction or isn’t a number at all)</p>\n"}],"owner":{"account_id":29523975,"reputation":7,"user_id":22626089,"display_name":"Kavish singh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":141,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":5,"score":-1,"last_activity_date":1695819065,"creation_date":1695605106,"question_id":77169492,"body_markdown":"&gt; Given an input integer, you must determine which primitive data types are capable of properly storing that input.\r\n&gt; \r\n&gt; Input Format\r\n&gt; \r\n&gt; The first line contains an integer, , denoting the number of test cases.\r\n&gt; Each test case, , is comprised of a single line with an integer, , which can be arbitrarily large or small.\r\n&gt; \r\n&gt; Output Format\r\n&gt; \r\n&gt; For each input variable  and appropriate primitive , you must determine if the given primitives are capable of storing it. If yes, then print:\r\n&gt; ```none\r\n&gt;! n can be fitted in:\r\n&gt;! dataType\r\n&gt; ```\r\n&gt; If there is more than one appropriate data type, print each one on its own line and order them by size (i.e.:byte&lt;short&lt;int&lt;long).\r\n&gt; If the number cannot be stored in one of the four aforementioned primitives, print the line:\r\n&gt; ```none\r\n&gt;! n can&#39;t be fitted anywhere.\r\n&gt; ```\r\n&gt; Sample Input\r\n&gt; ```none\r\n&gt; 5\r\n&gt; -150\r\n&gt; 150000\r\n&gt; 1500000000\r\n&gt; 213333333333333333333333333333333333\r\n&gt; -100000000000000\r\n&gt; ```\r\n&gt; Sample Output\r\n&gt; ```none\r\n&gt; -150 can be fitted in:\r\n&gt; * short\r\n&gt; * int\r\n&gt; * long\r\n&gt; 150000 can be fitted in:\r\n&gt; * int\r\n&gt; * long\r\n&gt; 1500000000 can be fitted in:\r\n&gt; * int\r\n&gt; * long\r\n&gt; 213333333333333333333333333333333333 can&#39;t be fitted anywhere.\r\n&gt; -100000000000000 can be fitted in:\r\n&gt; * long   \r\n&gt; ```\r\n\r\nThis is the code I wrote.\r\n i also tried Long.MIN_VALUE and MAX_VALUE , in all these some cases are passed but this codes didnt pass all the cases ,i also tried big integer,But didnt work.\r\n\r\n```\r\nimport java.util.*;\r\nimport java.io.*;\r\n \r\n\r\nclass Solution{\r\n    public static void main(String []argh){\r\n        \r\n        Scanner sc = new Scanner(System.in);\r\n        int t=sc.nextInt();\r\n\r\n        for(int i=0;i&lt;t;i++)\r\n        { \r\n         try{\r\n                long x = sc.nextLong();\r\n                System.out.println(x+&quot; can be fitted in:&quot;);\r\n                if(x&gt;=-128 &amp;&amp; x&lt;=127)System.out.println(&quot;* byte&quot;);\r\n                if(x&gt;=-32768 &amp;&amp; x&lt;=32767)System.out.println(&quot;* short&quot;);\r\n                if(x&gt;=-(int)Math.pow(2,31)&amp;&amp; x&lt;=(int)Math.pow(2,31))System.out.println(&quot;* int&quot;);\r\n                if(x&gt;=-(long)Math.pow(2,63)&amp;&amp; x&lt;=(long)Math.pow(2,63))System.out.println(&quot;* long&quot;);\r\n            }\r\n            else\r\n            {\r\n                System.out.println(sc.next()+&quot; can&#39;t be fitted anywhere.&quot;);\r\n            }\r\n\r\n        }\r\n    }\r\n}\r\n```","title":"We&#39;ll work with the primitives used to hold integer values (byte, short, int, and long):","body":"<blockquote>\n<p>Given an input integer, you must determine which primitive data types are capable of properly storing that input.</p>\n<p>Input Format</p>\n<p>The first line contains an integer, , denoting the number of test cases.\nEach test case, , is comprised of a single line with an integer, , which can be arbitrarily large or small.</p>\n<p>Output Format</p>\n<p>For each input variable  and appropriate primitive , you must determine if the given primitives are capable of storing it. If yes, then print:</p>\n<pre class=\"lang-none prettyprint-override\"><code>! n can be fitted in:\n! dataType\n</code></pre>\n<p>If there is more than one appropriate data type, print each one on its own line and order them by size (i.e.:byte&lt;short&lt;int&lt;long).\nIf the number cannot be stored in one of the four aforementioned primitives, print the line:</p>\n<pre class=\"lang-none prettyprint-override\"><code>! n can't be fitted anywhere.\n</code></pre>\n<p>Sample Input</p>\n<pre class=\"lang-none prettyprint-override\"><code>5\n-150\n150000\n1500000000\n213333333333333333333333333333333333\n-100000000000000\n</code></pre>\n<p>Sample Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>-150 can be fitted in:\n* short\n* int\n* long\n150000 can be fitted in:\n* int\n* long\n1500000000 can be fitted in:\n* int\n* long\n213333333333333333333333333333333333 can't be fitted anywhere.\n-100000000000000 can be fitted in:\n* long   \n</code></pre>\n</blockquote>\n<p>This is the code I wrote.\ni also tried Long.MIN_VALUE and MAX_VALUE , in all these some cases are passed but this codes didnt pass all the cases ,i also tried big integer,But didnt work.</p>\n<pre><code>import java.util.*;\nimport java.io.*;\n \n\nclass Solution{\n    public static void main(String []argh){\n        \n        Scanner sc = new Scanner(System.in);\n        int t=sc.nextInt();\n\n        for(int i=0;i&lt;t;i++)\n        { \n         try{\n                long x = sc.nextLong();\n                System.out.println(x+&quot; can be fitted in:&quot;);\n                if(x&gt;=-128 &amp;&amp; x&lt;=127)System.out.println(&quot;* byte&quot;);\n                if(x&gt;=-32768 &amp;&amp; x&lt;=32767)System.out.println(&quot;* short&quot;);\n                if(x&gt;=-(int)Math.pow(2,31)&amp;&amp; x&lt;=(int)Math.pow(2,31))System.out.println(&quot;* int&quot;);\n                if(x&gt;=-(long)Math.pow(2,63)&amp;&amp; x&lt;=(long)Math.pow(2,63))System.out.println(&quot;* long&quot;);\n            }\n            else\n            {\n                System.out.println(sc.next()+&quot; can't be fitted anywhere.&quot;);\n            }\n\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","eclipse","user-input"],"comments":[{"owner":{"account_id":221272,"reputation":6281,"user_id":479156,"accept_rate":92,"display_name":"Ivar"},"score":0,"creation_date":1695819477,"post_id":77187680,"comment_id":136074836,"body_markdown":"Also, simply replacing `next()` with `nextLine()` will cause different issues. See [Scanner is skipping nextLine() after using next() or nextFoo()?](https://stackoverflow.com/questions/13102045/scanner-is-skipping-nextline-after-using-next-or-nextfoo)","body":"Also, simply replacing <code>next()</code> with <code>nextLine()</code> will cause different issues. See <a href=\"https://stackoverflow.com/questions/13102045/scanner-is-skipping-nextline-after-using-next-or-nextfoo\">Scanner is skipping nextLine() after using next() or nextFoo()?</a>"},{"owner":{"account_id":28773110,"reputation":1,"user_id":22036422,"display_name":"ollie"},"score":0,"creation_date":1695819704,"post_id":77187680,"comment_id":136074896,"body_markdown":"It does! Thanks a lot.","body":"It does! Thanks a lot."}],"owner":{"account_id":28773110,"reputation":1,"user_id":22036422,"display_name":"ollie"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1695819770,"answer_count":0,"score":0,"last_activity_date":1695819008,"creation_date":1695819008,"question_id":77187680,"body_markdown":"I&#39;m currently developing a project where, at several points, the user will receive question prompts that must be answered through a keyboard input, each answer being atributed to a variable in order to call for the appropriate next step. The first part has three questions, and the variables associated with them are String - Int - String types. Afterwards, the program displays the informations via a print function. However, upon testing the first round of prompts to be asked, I noted three things:\r\n\r\n1. Upon inputing a two worded name as the answer for the first input prompt, the console stops running the code altogether, with the next prompt displaying the following error message:\r\nException in thread &quot;main&quot; java.util.InputMismatchException at java.base/java.util.Scanner.throwFor(Scanner.java:943) at java.base/java.util.Scanner.next(Scanner.java:1598) at java.base/java.util.Scanner.nextInt(Scanner.java:2263) at java.base/java.util.Scanner.nextInt(Scanner.java:2217) at geradorfichasrpg/geradorfichasrpg.FichaPC.ID_PC(FichaPC.java:23) at geradorfichasrpg/geradorfichasrpg.FichaPC.main(FichaPC.java:11)\r\n\r\n2. A single word works just fine and the console continues running the code as expected;\r\n\r\n3. The last input does accept a two worded answer, but only the first word is displayed and the console stops running the code (but with no error message this time).\r\n\r\nWhat&#39;s wrong? The code is right bellow.\r\n\r\n\r\n```\r\nimport java.util.Scanner;\r\n\r\npublic class FichaPC {\r\n\tpublic static final Scanner keyboard = new Scanner(System.in);\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSystem.out.println(&quot;= Character Sheet Generator (D&amp;D 5th Edition) =&quot;);\r\n\t\tSystem.out.println(&quot;&quot;);\r\n\t\t\r\n\t\tID_PC();\r\n\t\t}\r\n\r\n\t\r\n\tpublic static void ID_PC() {\r\n\t\tString name = &quot;&quot;;\r\n\t\tint age = 0;\r\n\t\tString align = &quot;&quot;;\r\n\t\t\r\n\t\tSystem.out.print(&quot;Name: &quot;);\r\n\t\tname = keyboard.next();\r\n\t\tSystem.out.print(&quot;Age: &quot;);\r\n\t\tage = keyboard.nextInt();\r\n\t\tSystem.out.print(&quot;Alignment: &quot;);\r\n\t\talign = keyboard.next();\r\n\t\t\r\n\t\tSystem.out.print(&quot;Name: &quot;);\r\n\t\tSystem.out.println(name);\r\n\t\tSystem.out.print(&quot;Age: &quot;);\r\n\t\tSystem.out.println(age);\r\n\t\tSystem.out.print(&quot;Align: &quot;);\r\n\t\tSystem.out.println(align);\r\n\t}\r\n\r\n}\r\n```\r\n\r\n\r\nThanks in advance!","title":"Java Input Issue","body":"<p>I'm currently developing a project where, at several points, the user will receive question prompts that must be answered through a keyboard input, each answer being atributed to a variable in order to call for the appropriate next step. The first part has three questions, and the variables associated with them are String - Int - String types. Afterwards, the program displays the informations via a print function. However, upon testing the first round of prompts to be asked, I noted three things:</p>\n<ol>\n<li><p>Upon inputing a two worded name as the answer for the first input prompt, the console stops running the code altogether, with the next prompt displaying the following error message:\nException in thread &quot;main&quot; java.util.InputMismatchException at java.base/java.util.Scanner.throwFor(Scanner.java:943) at java.base/java.util.Scanner.next(Scanner.java:1598) at java.base/java.util.Scanner.nextInt(Scanner.java:2263) at java.base/java.util.Scanner.nextInt(Scanner.java:2217) at geradorfichasrpg/geradorfichasrpg.FichaPC.ID_PC(FichaPC.java:23) at geradorfichasrpg/geradorfichasrpg.FichaPC.main(FichaPC.java:11)</p>\n</li>\n<li><p>A single word works just fine and the console continues running the code as expected;</p>\n</li>\n<li><p>The last input does accept a two worded answer, but only the first word is displayed and the console stops running the code (but with no error message this time).</p>\n</li>\n</ol>\n<p>What's wrong? The code is right bellow.</p>\n<pre><code>import java.util.Scanner;\n\npublic class FichaPC {\n    public static final Scanner keyboard = new Scanner(System.in);\n\n    public static void main(String[] args) {\n        System.out.println(&quot;= Character Sheet Generator (D&amp;D 5th Edition) =&quot;);\n        System.out.println(&quot;&quot;);\n        \n        ID_PC();\n        }\n\n    \n    public static void ID_PC() {\n        String name = &quot;&quot;;\n        int age = 0;\n        String align = &quot;&quot;;\n        \n        System.out.print(&quot;Name: &quot;);\n        name = keyboard.next();\n        System.out.print(&quot;Age: &quot;);\n        age = keyboard.nextInt();\n        System.out.print(&quot;Alignment: &quot;);\n        align = keyboard.next();\n        \n        System.out.print(&quot;Name: &quot;);\n        System.out.println(name);\n        System.out.print(&quot;Age: &quot;);\n        System.out.println(age);\n        System.out.print(&quot;Align: &quot;);\n        System.out.println(align);\n    }\n\n}\n</code></pre>\n<p>Thanks in advance!</p>\n"},{"tags":["java","html","pdf","pdfbox","apache-tika"],"comments":[{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":1,"creation_date":1590502542,"post_id":62023993,"comment_id":109699492,"body_markdown":"What happens if you use the PDFBox ExtractText command line tool with the &quot;-html&quot; option? This should bring more, although not all you asked for.","body":"What happens if you use the PDFBox ExtractText command line tool with the &quot;-html&quot; option? This should bring more, although not all you asked for."},{"owner":{"account_id":16960720,"reputation":65,"user_id":12267939,"display_name":"punithan antony"},"score":0,"creation_date":1590502846,"post_id":62023993,"comment_id":109699696,"body_markdown":"@TilmanHausherr yes i already tried that but am getting same html divs without styles","body":"@TilmanHausherr yes i already tried that but am getting same html divs without styles"}],"answers":[{"tags":[],"owner":{"account_id":1432392,"reputation":1050,"user_id":1354517,"accept_rate":85,"display_name":"Gautam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695818519,"creation_date":1695818519,"answer_id":77187622,"question_id":62023993,"body_markdown":"You can use Pdf2Dom library. Unfortunately the repo is not maintained / updated any further but the latest release available works very well. It works with pdfbox. \r\n\r\nYou can convert Pdf to Dom using code snippet like \r\n\r\n```\r\n\r\n    public static Document parseWithPdfDomTree(InputStream is, int start, int end) throws Exception\r\n    {\r\n        PDDocument pdf = PDDocument.load(is);\r\n        PDFDomTree parser = new PDFDomTree();\r\n        parser.setStartPage(start);\r\n        parser.setEndPage(end);\r\n\r\n        Writer output = new StringWriter();\r\n        parser.writeText(pdf, output);\r\n        pdf.close();\r\n        String htmlOutput = output.toString();\r\n\r\n        return Jsoup.parse(htmlOutput);\r\n    }\r\n```\r\n\r\n[Pdf2Dom][1]\r\n\r\n\r\n  [1]: https://github.com/radkovo/Pdf2Dom","title":"How to convert PDF files into HTML with styles using APACHE TIKA","body":"<p>You can use Pdf2Dom library. Unfortunately the repo is not maintained / updated any further but the latest release available works very well. It works with pdfbox.</p>\n<p>You can convert Pdf to Dom using code snippet like</p>\n<pre><code>\n    public static Document parseWithPdfDomTree(InputStream is, int start, int end) throws Exception\n    {\n        PDDocument pdf = PDDocument.load(is);\n        PDFDomTree parser = new PDFDomTree();\n        parser.setStartPage(start);\n        parser.setEndPage(end);\n\n        Writer output = new StringWriter();\n        parser.writeText(pdf, output);\n        pdf.close();\n        String htmlOutput = output.toString();\n\n        return Jsoup.parse(htmlOutput);\n    }\n</code></pre>\n<p><a href=\"https://github.com/radkovo/Pdf2Dom\" rel=\"nofollow noreferrer\">Pdf2Dom</a></p>\n"}],"owner":{"account_id":16960720,"reputation":65,"user_id":12267939,"display_name":"punithan antony"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2177,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695818519,"creation_date":1590501983,"question_id":62023993,"body_markdown":"am using apache tika to convert PDF files to HTML, i need to extract html with styles like bold, italics, top, left, height, width and font family of the element, But i used to get only raw html tags which contains tags without styles,\r\n```\r\nimport java.io.ByteArrayInputStream;\r\nimport java.io.ByteArrayOutputStream;\r\nimport java.io.File;\r\nimport java.io.IOException;\r\nimport javax.xml.transform.OutputKeys;\r\nimport javax.xml.transform.TransformerConfigurationException;\r\nimport javax.xml.transform.sax.SAXTransformerFactory;\r\nimport javax.xml.transform.sax.TransformerHandler;\r\nimport javax.xml.transform.stream.StreamResult;\r\nimport org.apache.tika.exception.TikaException;\r\nimport org.apache.tika.metadata.Metadata;\r\nimport org.apache.tika.parser.AutoDetectParser;\r\nimport org.apache.tika.sax.ExpandedTitleContentHandler;\r\nimport org.xml.sax.SAXException;\r\nimport com.google.common.io.Files;\r\n\r\npublic class Test4 {\r\n\r\n    public static void main(String[] args) throws IOException, TransformerConfigurationException, SAXException, TikaException {\r\n        byte[] file = Files.toByteArray(new File(&quot;src/main/java/test/test.pdf&quot;));\r\n        AutoDetectParser tikaParser = new AutoDetectParser();\r\n        ByteArrayOutputStream out = new ByteArrayOutputStream();\r\n        SAXTransformerFactory factory = (SAXTransformerFactory) SAXTransformerFactory.newInstance();\r\n        TransformerHandler handler = factory.newTransformerHandler();\r\n        handler.getTransformer().setOutputProperty(OutputKeys.METHOD, &quot;html&quot;);\r\n        handler.getTransformer().setOutputProperty(OutputKeys.INDENT, &quot;yes&quot;);\r\n        handler.getTransformer().setOutputProperty(OutputKeys.ENCODING, &quot;UTF-8&quot;);\r\n        handler.setResult(new StreamResult(out));\r\n        ExpandedTitleContentHandler handler1 = new ExpandedTitleContentHandler(handler);\r\n        tikaParser.parse(new ByteArrayInputStream(file), handler1, new Metadata());\r\n        System.out.println(new String(out.toByteArray(), &quot;UTF-8&quot;));\r\n\r\n    }\r\n\r\n}\r\n```\r\nIn output am getting only HTML like as follows,\r\n```\r\n&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;\r\n&lt;head&gt;\r\n&lt;meta name=&quot;date&quot; content=&quot;2017-01-10T12:56:54Z&quot;/&gt;\r\n&lt;meta name=&quot;pdf:PDFVersion&quot; content=&quot;1.5&quot;/&gt;\r\n&lt;meta name=&quot;pdf:docinfo:title&quot; content=&quot;GROUP HEALTH INSURANCE&quot;/&gt;\r\n&lt;meta name=&quot;pdf:docinfo:created&quot; content=&quot;2016-09-01T05:45:44Z&quot;/&gt;\r\n\r\n&lt;!-- some meta&#39;s here  --&gt;\r\n&lt;title&gt;GROUP HEALTH INSURANCE&lt;/title&gt;\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n&lt;div class=&quot;page&quot;&gt;\r\n&lt;p/&gt;\r\n&lt;p&gt; Group Personal Accident Policy for Optional Travel Insurance for E-ticket &lt;/p&gt;\r\n&lt;p&gt;Sample Registration Number:102 \r\n\r\n&lt;/p&gt;\r\n&lt;p&gt;Annexure 1 \r\n\r\n&lt;/p&gt;\r\n&lt;/div&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\nHow can i extract content as HTML from PDF with its own styles, please command your answer, thanks in advance.","title":"How to convert PDF files into HTML with styles using APACHE TIKA","body":"<p>am using apache tika to convert PDF files to HTML, i need to extract html with styles like bold, italics, top, left, height, width and font family of the element, But i used to get only raw html tags which contains tags without styles,</p>\n\n<pre><code>import java.io.ByteArrayInputStream;\nimport java.io.ByteArrayOutputStream;\nimport java.io.File;\nimport java.io.IOException;\nimport javax.xml.transform.OutputKeys;\nimport javax.xml.transform.TransformerConfigurationException;\nimport javax.xml.transform.sax.SAXTransformerFactory;\nimport javax.xml.transform.sax.TransformerHandler;\nimport javax.xml.transform.stream.StreamResult;\nimport org.apache.tika.exception.TikaException;\nimport org.apache.tika.metadata.Metadata;\nimport org.apache.tika.parser.AutoDetectParser;\nimport org.apache.tika.sax.ExpandedTitleContentHandler;\nimport org.xml.sax.SAXException;\nimport com.google.common.io.Files;\n\npublic class Test4 {\n\n    public static void main(String[] args) throws IOException, TransformerConfigurationException, SAXException, TikaException {\n        byte[] file = Files.toByteArray(new File(\"src/main/java/test/test.pdf\"));\n        AutoDetectParser tikaParser = new AutoDetectParser();\n        ByteArrayOutputStream out = new ByteArrayOutputStream();\n        SAXTransformerFactory factory = (SAXTransformerFactory) SAXTransformerFactory.newInstance();\n        TransformerHandler handler = factory.newTransformerHandler();\n        handler.getTransformer().setOutputProperty(OutputKeys.METHOD, \"html\");\n        handler.getTransformer().setOutputProperty(OutputKeys.INDENT, \"yes\");\n        handler.getTransformer().setOutputProperty(OutputKeys.ENCODING, \"UTF-8\");\n        handler.setResult(new StreamResult(out));\n        ExpandedTitleContentHandler handler1 = new ExpandedTitleContentHandler(handler);\n        tikaParser.parse(new ByteArrayInputStream(file), handler1, new Metadata());\n        System.out.println(new String(out.toByteArray(), \"UTF-8\"));\n\n    }\n\n}\n</code></pre>\n\n<p>In output am getting only HTML like as follows,</p>\n\n<pre><code>&lt;html xmlns=\"http://www.w3.org/1999/xhtml\"&gt;\n&lt;head&gt;\n&lt;meta name=\"date\" content=\"2017-01-10T12:56:54Z\"/&gt;\n&lt;meta name=\"pdf:PDFVersion\" content=\"1.5\"/&gt;\n&lt;meta name=\"pdf:docinfo:title\" content=\"GROUP HEALTH INSURANCE\"/&gt;\n&lt;meta name=\"pdf:docinfo:created\" content=\"2016-09-01T05:45:44Z\"/&gt;\n\n&lt;!-- some meta's here  --&gt;\n&lt;title&gt;GROUP HEALTH INSURANCE&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;div class=\"page\"&gt;\n&lt;p/&gt;\n&lt;p&gt; Group Personal Accident Policy for Optional Travel Insurance for E-ticket &lt;/p&gt;\n&lt;p&gt;Sample Registration Number:102 \n\n&lt;/p&gt;\n&lt;p&gt;Annexure 1 \n\n&lt;/p&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>How can i extract content as HTML from PDF with its own styles, please command your answer, thanks in advance.</p>\n"},{"tags":["java"],"answers":[{"comments":[{"owner":{"account_id":4286944,"reputation":300,"user_id":3504373,"display_name":"krzychek"},"score":0,"creation_date":1592841161,"post_id":38376683,"comment_id":110562710,"body_markdown":"One of reason to not use StringBuffer is to avoid thread synchronization. And since StringBuffer is synchronized, your code actually synchronizes on more objects.\nAnd anyway it just doesn&#39;t work, since StringBuffer does not work anymore on StringBuilder passed to its constructor and appendReplacement appends to... nothing.","body":"One of reason to not use StringBuffer is to avoid thread synchronization. And since StringBuffer is synchronized, your code actually synchronizes on more objects. And anyway it just doesn&#39;t work, since StringBuffer does not work anymore on StringBuilder passed to its constructor and appendReplacement appends to... nothing."},{"owner":{"account_id":740820,"reputation":47963,"user_id":2353911,"accept_rate":100,"display_name":"Mena"},"score":0,"creation_date":1592912620,"post_id":38376683,"comment_id":110588820,"body_markdown":"@krzychek my answer is old (2016) and predates Java 9, where indeed there is an overload taking `StringBuilder` - see [here](https://docs.oracle.com/javase/9/docs/api/java/util/regex/Matcher.html#appendReplacement-java.lang.StringBuilder-java.lang.String-). Regardless, the risk of blocking while using the older method signature is minimal, as you would have to invoke `appendReplacement` on the same `StringBuffer` across multiple threads, which implies bad design in the first place.","body":"@krzychek my answer is old (2016) and predates Java 9, where indeed there is an overload taking <code>StringBuilder</code> - see <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/regex/Matcher.html#appendReplacement-java.lang.StringBuilder-java.lang.String-\" rel=\"nofollow noreferrer\">here</a>. Regardless, the risk of blocking while using the older method signature is minimal, as you would have to invoke <code>appendReplacement</code> on the same <code>StringBuffer</code> across multiple threads, which implies bad design in the first place."},{"owner":{"account_id":4286944,"reputation":300,"user_id":3504373,"display_name":"krzychek"},"score":0,"creation_date":1593444547,"post_id":38376683,"comment_id":110777182,"body_markdown":"&quot;the risk of blocking while using the older method signature is minimal&quot;. Synchronization is the main thing that differs Buffer from Builder and it exist apart from being invoked on a single thread. And if concurrent access is needed synchronization should be introduced apart from blocking threat (or solution redesigned).","body":"&quot;the risk of blocking while using the older method signature is minimal&quot;. Synchronization is the main thing that differs Buffer from Builder and it exist apart from being invoked on a single thread. And if concurrent access is needed synchronization should be introduced apart from blocking threat (or solution redesigned)."},{"owner":{"account_id":4286944,"reputation":300,"user_id":3504373,"display_name":"krzychek"},"score":0,"creation_date":1593444763,"post_id":38376683,"comment_id":110777294,"body_markdown":"Anyway, JIT compiler makes synchronization impact in most cases negligible and the main problem I&#39;ve seen is that after new StringBuffer(builder) call, matcher is not mutating builder instance anymore, which could be misleading for Java newcomers. (and I&#39;ve edited example)","body":"Anyway, JIT compiler makes synchronization impact in most cases negligible and the main problem I&#39;ve seen is that after new StringBuffer(builder) call, matcher is not mutating builder instance anymore, which could be misleading for Java newcomers. (and I&#39;ve edited example)"}],"tags":[],"owner":{"account_id":740820,"reputation":47963,"user_id":2353911,"accept_rate":100,"display_name":"Mena"},"comment_count":4,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1592912661,"creation_date":1468505913,"answer_id":38376683,"question_id":38376584,"body_markdown":"Short answer, no. \r\n\r\nThis is as per [API][1] in latest Java 8 at the time of writing. \r\n\r\nHowever, one of the overloaded `StringBuffer` constructors takes a `CharSequence` as parameter, and `StringBuilder` (just like `StringBuffer`) IS-A `CharSequence`. \r\n\r\nFor instance:\r\n\r\n    matcher.appendReplacement(\r\n        new StringBuffer(yourOriginalStringBuilder), &quot;yourReplacement&quot;\r\n    );\r\n\r\n**Edit**\r\n\r\nSince Java 9, an overload is available, which takes a `StringBuilder` instead - see API [here][2]. \r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/regex/Matcher.html#appendReplacement-java.lang.StringBuffer-java.lang.String-\r\n  [2]: https://docs.oracle.com/javase/9/docs/api/java/util/regex/Matcher.html#appendReplacement-java.lang.StringBuilder-java.lang.String-","title":"Java Matcher.appendReplacement() and Matcher.appendTail() for StringBuilder?","body":"<p>Short answer, no.</p>\n<p>This is as per <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/regex/Matcher.html#appendReplacement-java.lang.StringBuffer-java.lang.String-\" rel=\"nofollow noreferrer\">API</a> in latest Java 8 at the time of writing.</p>\n<p>However, one of the overloaded <code>StringBuffer</code> constructors takes a <code>CharSequence</code> as parameter, and <code>StringBuilder</code> (just like <code>StringBuffer</code>) IS-A <code>CharSequence</code>.</p>\n<p>For instance:</p>\n<pre><code>matcher.appendReplacement(\n    new StringBuffer(yourOriginalStringBuilder), &quot;yourReplacement&quot;\n);\n</code></pre>\n<p><strong>Edit</strong></p>\n<p>Since Java 9, an overload is available, which takes a <code>StringBuilder</code> instead - see API <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/regex/Matcher.html#appendReplacement-java.lang.StringBuilder-java.lang.String-\" rel=\"nofollow noreferrer\">here</a>.</p>\n"},{"comments":[{"owner":{"account_id":94193,"reputation":20589,"user_id":257299,"accept_rate":64,"display_name":"kevinarpe"},"score":1,"creation_date":1511963115,"post_id":41858380,"comment_id":82065233,"body_markdown":"Cripes: Have you seen the code for `Matcher.appendReplacement()`!?  Incredible it is so complex.","body":"Cripes: Have you seen the code for <code>Matcher.appendReplacement()</code>!?  Incredible it is so complex."},{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1530354539,"post_id":41858380,"comment_id":89214341,"body_markdown":"For short strings you might as well take the memory hit and use `String`.","body":"For short strings you might as well take the memory hit and use <code>String</code>."}],"tags":[],"owner":{"account_id":92774,"reputation":153,"user_id":254094,"display_name":"mmm444"},"comment_count":2,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1485366932,"creation_date":1485366932,"answer_id":41858380,"question_id":38376584,"body_markdown":"Short answer, not yet. Not until Java 9. In Java 9 there are `Matcher.appendReplacement(StringBuilder,String)` and `Matcher.appendTail(StringBuilder)` methods added to the [API][1].\r\n\r\nUntil then if you don&#39;t need group substitutions in replacement string then I still find this solution &#39;easy&#39;:\r\n\r\n    Matcher m = PATTERN.matcher(s);\r\n    StringBuilder sb = new StringBuilder();\r\n    int pos = 0;\r\n    while(m.find()) {\r\n    \tsb.append(s, pos, m.start());\r\n    \tpos = m.end();\r\n    \tsb.append(&quot;replacement&quot;)\r\n    }\r\n    sb.append(s, pos, s.length());\r\n\r\nAnd even if you need group subtitutions then it gets just &#39;moderately&#39; difficult:\r\n\r\n    Matcher m = PATTERN.matcher(s);\r\n    StringBuilder sb = new StringBuilder();\r\n    int pos = 0;\r\n    while(m.find()) {\r\n    \tsb.append(s, pos, m.start());\r\n    \tpos = m.end();\r\n    \tif (m.start(1) &gt;= 0) {                  // check if group 1 matched\r\n    \t\tsb.append(s, m.start(1), m.end(1)); // replace with group 1\r\n    \t}\r\n    }\r\n    sb.append(s, pos, s.length());\r\n\r\n\r\n  [1]: http://download.java.net/java/jdk9/docs/api/java/util/regex/Matcher.html#appendReplacement-java.lang.StringBuilder-java.lang.String- &quot;API&quot;","title":"Java Matcher.appendReplacement() and Matcher.appendTail() for StringBuilder?","body":"<p>Short answer, not yet. Not until Java 9. In Java 9 there are <code>Matcher.appendReplacement(StringBuilder,String)</code> and <code>Matcher.appendTail(StringBuilder)</code> methods added to the <a href=\"http://download.java.net/java/jdk9/docs/api/java/util/regex/Matcher.html#appendReplacement-java.lang.StringBuilder-java.lang.String-\" rel=\"noreferrer\" title=\"API\">API</a>.</p>\n\n<p>Until then if you don't need group substitutions in replacement string then I still find this solution 'easy':</p>\n\n<pre><code>Matcher m = PATTERN.matcher(s);\nStringBuilder sb = new StringBuilder();\nint pos = 0;\nwhile(m.find()) {\n    sb.append(s, pos, m.start());\n    pos = m.end();\n    sb.append(\"replacement\")\n}\nsb.append(s, pos, s.length());\n</code></pre>\n\n<p>And even if you need group subtitutions then it gets just 'moderately' difficult:</p>\n\n<pre><code>Matcher m = PATTERN.matcher(s);\nStringBuilder sb = new StringBuilder();\nint pos = 0;\nwhile(m.find()) {\n    sb.append(s, pos, m.start());\n    pos = m.end();\n    if (m.start(1) &gt;= 0) {                  // check if group 1 matched\n        sb.append(s, m.start(1), m.end(1)); // replace with group 1\n    }\n}\nsb.append(s, pos, s.length());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":263115,"reputation":16960,"user_id":548473,"display_name":"Grigory Kislin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695818131,"creation_date":1695818131,"answer_id":77187572,"question_id":38376584,"body_markdown":"So, for readers: full code for JDK 9 and multiple replacement (e.g.\r\n&quot;Hello ${name}, check ${email}&quot;):\r\n\r\n    private static final Pattern PLACEHOLDER_PATTERN = Pattern.compile(&quot;\\\\$\\\\{(\\\\w+)}&quot;);\r\n\r\n    Matcher matcher = PLACEHOLDER_PATTERN.matcher(value)\r\n    if(matcher.find()){\r\n        StringBuilder sb = new StringBuilder();\r\n        while (p.matcher.find()) {\r\n           String key = p.matcher.group(1);\r\n           Object obj = getObject(key, map);\r\n           p.matcher.appendReplacement(sb, obj.toString());\r\n        }\r\n        p.matcher.appendTail(sb);\r\n        return sb.toString;\r\n    }","title":"Java Matcher.appendReplacement() and Matcher.appendTail() for StringBuilder?","body":"<p>So, for readers: full code for JDK 9 and multiple replacement (e.g.\n&quot;Hello ${name}, check ${email}&quot;):</p>\n<pre><code>private static final Pattern PLACEHOLDER_PATTERN = Pattern.compile(&quot;\\\\$\\\\{(\\\\w+)}&quot;);\n\nMatcher matcher = PLACEHOLDER_PATTERN.matcher(value)\nif(matcher.find()){\n    StringBuilder sb = new StringBuilder();\n    while (p.matcher.find()) {\n       String key = p.matcher.group(1);\n       Object obj = getObject(key, map);\n       p.matcher.appendReplacement(sb, obj.toString());\n    }\n    p.matcher.appendTail(sb);\n    return sb.toString;\n}\n</code></pre>\n"}],"owner":{"account_id":2643288,"reputation":551,"user_id":2286515,"accept_rate":29,"display_name":"James"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4228,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":3,"score":6,"last_activity_date":1695818131,"creation_date":1468505602,"question_id":38376584,"body_markdown":"Is there an alternative to Matcher.appendReplacement() and Matcher.appendTail() which takes StringBuilder instead of StringBuffer ?\r\n\r\nIs there an &#39;easy&#39; way to &#39;convert&#39; Java code which calls Matcher with a StringBuffer to use StringBuilder instead?\r\n\r\nThanks,\r\nJames","title":"Java Matcher.appendReplacement() and Matcher.appendTail() for StringBuilder?","body":"<p>Is there an alternative to Matcher.appendReplacement() and Matcher.appendTail() which takes StringBuilder instead of StringBuffer ?</p>\n\n<p>Is there an 'easy' way to 'convert' Java code which calls Matcher with a StringBuffer to use StringBuilder instead?</p>\n\n<p>Thanks,\nJames</p>\n"},{"tags":["java","selenium-webdriver"],"comments":[{"owner":{"account_id":12360572,"reputation":1730,"user_id":9014957,"accept_rate":17,"display_name":"pburgr"},"score":0,"creation_date":1695791393,"post_id":77180315,"comment_id":136069811,"body_markdown":"Can you share URL? Or page source code at least. If you get any exception, post your output as well.","body":"Can you share URL? Or page source code at least. If you get any exception, post your output as well."},{"owner":{"account_id":29197708,"reputation":47,"user_id":22368447,"display_name":"Rajeesha R"},"score":0,"creation_date":1695806459,"post_id":77180315,"comment_id":136072222,"body_markdown":"the page is long I can&#39;t post it here.URL require login and hence I can&#39;t share it","body":"the page is long I can&#39;t post it here.URL require login and hence I can&#39;t share it"},{"owner":{"account_id":29197708,"reputation":47,"user_id":22368447,"display_name":"Rajeesha R"},"score":0,"creation_date":1695814550,"post_id":77180315,"comment_id":136073821,"body_markdown":"@pbburgr there is no exception","body":"@pbburgr there is no exception"}],"answers":[{"comments":[{"owner":{"account_id":12360572,"reputation":1730,"user_id":9014957,"accept_rate":17,"display_name":"pburgr"},"score":0,"creation_date":1695828632,"post_id":77187515,"comment_id":136076971,"body_markdown":"Lost focus may be a bug in browser. Check for updates of your browser and it&#39;s driver. Let me guess, you are using Firefox.","body":"Lost focus may be a bug in browser. Check for updates of your browser and it&#39;s driver. Let me guess, you are using Firefox."},{"owner":{"account_id":29197708,"reputation":47,"user_id":22368447,"display_name":"Rajeesha R"},"score":0,"creation_date":1695883157,"post_id":77187515,"comment_id":136083743,"body_markdown":"No. chrome &amp; Mac OS","body":"No. chrome &amp; Mac OS"}],"tags":[],"owner":{"account_id":29197708,"reputation":47,"user_id":22368447,"display_name":"Rajeesha R"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695817702,"creation_date":1695817702,"answer_id":77187515,"question_id":77180315,"body_markdown":"After lot of trial and error now I could solve this issue.Eventhough I didn&#39;t understand the logic behind this, posting the answer here might be useful for somebody else.\r\n\r\nJavascriptExecutor js = (JavascriptExecutor) driver;\r\n            driver.findElement(By.tagName(&quot;body&quot;)).sendKeys(Keys.END);\r\n\r\nthis code didn&#39;t work for me ,but I was trying with a while loop based on page height and above code ,manually clicked on the screen and I could. see that the screen scrolling down.So I just added a code to click on one of the element in the page prior to executing the above code and it works.Felt strange but it is working now.","title":"Scrolling at the end of a page in selenium java automated testing on Mac OS","body":"<p>After lot of trial and error now I could solve this issue.Eventhough I didn't understand the logic behind this, posting the answer here might be useful for somebody else.</p>\n<p>JavascriptExecutor js = (JavascriptExecutor) driver;\ndriver.findElement(By.tagName(&quot;body&quot;)).sendKeys(Keys.END);</p>\n<p>this code didn't work for me ,but I was trying with a while loop based on page height and above code ,manually clicked on the screen and I could. see that the screen scrolling down.So I just added a code to click on one of the element in the page prior to executing the above code and it works.Felt strange but it is working now.</p>\n"}],"owner":{"account_id":29197708,"reputation":47,"user_id":22368447,"display_name":"Rajeesha R"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1695821432,"answer_count":1,"score":0,"last_activity_date":1695817702,"creation_date":1695733695,"question_id":77180315,"body_markdown":"I tried both the code below to go at the end of a page but it is not scrolling down.Is it anything to do with chrome browser on Mac?\r\n\r\n```\r\nJavascriptExecutor js = (JavascriptExecutor) driver; js.executeScript(&quot;window.scrollBy(0,713)&quot;, &quot;&quot;); Thread.sleep(1000); Long height=(Long) js.executeScript(&quot;return document.body.scrollHeight&quot;);\r\n\r\n      driver.findElement(By.tagName(&quot;body&quot;)).sendKeys(Keys.END);\r\n```","title":"Scrolling at the end of a page in selenium java automated testing on Mac OS","body":"<p>I tried both the code below to go at the end of a page but it is not scrolling down.Is it anything to do with chrome browser on Mac?</p>\n<pre><code>JavascriptExecutor js = (JavascriptExecutor) driver; js.executeScript(&quot;window.scrollBy(0,713)&quot;, &quot;&quot;); Thread.sleep(1000); Long height=(Long) js.executeScript(&quot;return document.body.scrollHeight&quot;);\n\n      driver.findElement(By.tagName(&quot;body&quot;)).sendKeys(Keys.END);\n</code></pre>\n"},{"tags":["javascript","java","android","kotlin"],"owner":{"account_id":13547561,"reputation":3338,"user_id":9773423,"display_name":"Taki"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695817536,"creation_date":1695817536,"question_id":77187494,"body_markdown":"I have webview app where i load a website , this website has a registration form where i need to set values into those fields of form , i have written code which does that and data is being populated into fields , but the issue is that on website when i click submit button , it says enter your values ( firstName , lastName and so on ) , i could not really find why , i would appreciate some help on this topic , Thank you \r\n\r\n * Code \r\n\r\n```\r\n        /// setting up webview \r\n  \r\n        webView.getSettings().setJavaScriptEnabled(true);\r\n        webView.getSettings().setDomStorageEnabled(true);\r\n        webView.setWebViewClient(new MyWebViewClient());\r\n        webView.setWebChromeClient(new MyWebChromeClient());\r\n        webView.loadUrl(&quot;https://xxxx/services/card- \r\n         reader/xxxxxxx&quot;);\r\n\r\n\r\n  // INJECTING DATA\r\n private void fillFormFields() {\r\n\r\n       String firstNameScript = &quot;document.getElementsByName(&#39;firstname&#39;)[0].value = &#39;&quot; + stringArray[2] + &quot;&#39;;&quot;;\r\n\r\n       String lastNameScript = &quot;document.getElementsByName(&#39;lastname&#39;)[0].value = &#39;&quot; + stringArray[4] + &quot;&#39;;&quot;;\r\n\r\n        String personalIdScript = &quot;document.getElementsByName(&#39;personalId&#39;)[0].value = &#39;&quot; + stringArray[0] + &quot;&#39;;&quot;;\r\n\r\n        String birthDateScript = &quot;document.getElementsByName(&#39;birthDate&#39;)[0].value = &#39;&quot; + getGregorianDate(stringArray[18]) + &quot;&#39;;&quot;;\r\n\r\n        String addressScript = &quot;document.getElementsByName(&#39;address&#39;)[0].value = &#39;&quot; + stringArray[9] + &quot; &quot; + stringArray[10] + &quot;&#39;;&quot;;\r\n\r\n\r\n        webView.evaluateJavascript(&quot;javascript:(function(){&quot; +\r\n                firstNameScript +\r\n                lastNameScript +\r\n                personalIdScript +\r\n                birthDateScript +\r\n                addressScript +\r\n                &quot;})()&quot;,null);\r\n\r\n    }\r\n\r\n```\r\n ","title":"Injecting values into form of website in android webview","body":"<p>I have webview app where i load a website , this website has a registration form where i need to set values into those fields of form , i have written code which does that and data is being populated into fields , but the issue is that on website when i click submit button , it says enter your values ( firstName , lastName and so on ) , i could not really find why , i would appreciate some help on this topic , Thank you</p>\n<ul>\n<li>Code</li>\n</ul>\n<pre><code>        /// setting up webview \n  \n        webView.getSettings().setJavaScriptEnabled(true);\n        webView.getSettings().setDomStorageEnabled(true);\n        webView.setWebViewClient(new MyWebViewClient());\n        webView.setWebChromeClient(new MyWebChromeClient());\n        webView.loadUrl(&quot;https://xxxx/services/card- \n         reader/xxxxxxx&quot;);\n\n\n  // INJECTING DATA\n private void fillFormFields() {\n\n       String firstNameScript = &quot;document.getElementsByName('firstname')[0].value = '&quot; + stringArray[2] + &quot;';&quot;;\n\n       String lastNameScript = &quot;document.getElementsByName('lastname')[0].value = '&quot; + stringArray[4] + &quot;';&quot;;\n\n        String personalIdScript = &quot;document.getElementsByName('personalId')[0].value = '&quot; + stringArray[0] + &quot;';&quot;;\n\n        String birthDateScript = &quot;document.getElementsByName('birthDate')[0].value = '&quot; + getGregorianDate(stringArray[18]) + &quot;';&quot;;\n\n        String addressScript = &quot;document.getElementsByName('address')[0].value = '&quot; + stringArray[9] + &quot; &quot; + stringArray[10] + &quot;';&quot;;\n\n\n        webView.evaluateJavascript(&quot;javascript:(function(){&quot; +\n                firstNameScript +\n                lastNameScript +\n                personalIdScript +\n                birthDateScript +\n                addressScript +\n                &quot;})()&quot;,null);\n\n    }\n\n</code></pre>\n"},{"tags":["java","typescript","kotlin","encryption","cryptography"],"comments":[{"owner":{"account_id":12359353,"reputation":42442,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1695723050,"post_id":77178948,"comment_id":136059462,"body_markdown":"Where is the salt applied in the Kotlin code? The use of a fast digest without salt might be an invitation for many hackers.","body":"Where is the salt applied in the Kotlin code? The use of a fast digest without salt might be an invitation for many hackers."},{"owner":{"account_id":19707288,"reputation":75,"user_id":14428656,"display_name":"Aj James"},"score":0,"creation_date":1695723831,"post_id":77178948,"comment_id":136059613,"body_markdown":"That&#39;s also my question but my friend said that it is hard coded. Is there a way to decrypt that?","body":"That&#39;s also my question but my friend said that it is hard coded. Is there a way to decrypt that?"},{"owner":{"account_id":12359353,"reputation":42442,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1695724762,"post_id":77178948,"comment_id":136059773,"body_markdown":"Post complete test data: non-productive key, plaintext and ciphertext. Currently the plaintext is missing.","body":"Post complete test data: non-productive key, plaintext and ciphertext. Currently the plaintext is missing."},{"owner":{"account_id":19707288,"reputation":75,"user_id":14428656,"display_name":"Aj James"},"score":0,"creation_date":1695725880,"post_id":77178948,"comment_id":136060015,"body_markdown":"The plaintext is `8d818916-2cd3-4d72-aa7a-5c73783ba16a` which is the expected output of the decryption.","body":"The plaintext is <code>8d818916-2cd3-4d72-aa7a-5c73783ba16a</code> which is the expected output of the decryption."},{"owner":{"account_id":12359353,"reputation":42442,"user_id":9014097,"display_name":"Topaco"},"score":1,"creation_date":1695727704,"post_id":77178948,"comment_id":136060385,"body_markdown":"This data is not consistent. The first 12 bytes of the encrypted data are the nonce. If you use this nonce to encrypt the posted plaintext with the posted key, you get a different ciphertext than the one you posted. Post consistent (non-productive) test data, i.e. plaintext, key and ciphertext, which results from encrypting this plaintext with this key!","body":"This data is not consistent. The first 12 bytes of the encrypted data are the nonce. If you use this nonce to encrypt the posted plaintext with the posted key, you get a different ciphertext than the one you posted. Post consistent (non-productive) test data, i.e. plaintext, key and ciphertext, which results from encrypting this plaintext with this key!"},{"owner":{"account_id":19707288,"reputation":75,"user_id":14428656,"display_name":"Aj James"},"score":0,"creation_date":1695729204,"post_id":77178948,"comment_id":136060669,"body_markdown":"What does the first 12 bytes used as the Initialization Vector (IV)? Can&#39;t it be extracted and use as IV for decryption and the remaining bytes are the encrypted plaintext?","body":"What does the first 12 bytes used as the Initialization Vector (IV)? Can&#39;t it be extracted and use as IV for decryption and the remaining bytes are the encrypted plaintext?"},{"owner":{"account_id":12359353,"reputation":42442,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1695735504,"post_id":77178948,"comment_id":136062093,"body_markdown":"Still waiting for test data that can be reproduced with the Kotlin code.","body":"Still waiting for test data that can be reproduced with the Kotlin code."},{"owner":{"account_id":1809323,"reputation":11348,"user_id":1645712,"accept_rate":73,"display_name":"gusto2"},"score":0,"creation_date":1695757072,"post_id":77178948,"comment_id":136066420,"body_markdown":"based on following post\nhttps://stackoverflow.com/questions/54505465/sha256-digest-signature-with-node-forge.md.sha256 is creating a string, it needs to be a Buffer","body":"based on following post <a href=\"https://stackoverflow.com/questions/54505465/sha256-digest-signature-with-node-forge.md.sha256\" title=\"sha256 digest signature with node forge.md.sha256\">stackoverflow.com/questions/54505465/&hellip;</a> is creating a string, it needs to be a Buffer"},{"owner":{"account_id":12359353,"reputation":42442,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1695763121,"post_id":77178948,"comment_id":136067381,"body_markdown":"Regarding the JS code: Apply only one library and not different ones, this shortens the code and avoids unnecessary conversions (and a number of conversion bugs). Also, the key size is wrong.","body":"Regarding the JS code: Apply only one library and not different ones, this shortens the code and avoids unnecessary conversions (and a number of conversion bugs). Also, the key size is wrong."}],"answers":[{"tags":[],"owner":{"account_id":27650244,"reputation":207,"user_id":21105343,"display_name":"NotARobot"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695817373,"creation_date":1695817373,"answer_id":77187477,"question_id":77178948,"body_markdown":"Well, it&#39;s not that hard to post consistent test data that can be used to test the JavaScript code. With the following passphrase and plaintext:\r\n\r\n```kotlin\r\nval secretKey = &quot;MYAPP11948-Sep022023145358&quot;\r\nval plaintext = &quot;8d818916-2cd3-4d72-aa7a-5c73783ba16a&quot;;\r\n```\r\n\r\nand the nonce from the ciphertext you posted:\r\n\r\n```kotlin\r\nval IV = Base64.decode(&quot;a4b67Rufd5nODsjg&quot;, Base64.NO_WRAP) // 0x6b86faed1b9f7799ce0ec8e0, 12 bytes\r\n```\r\n\r\nthe shared Kotlin code produces the following Base64 encoded ciphertext:\r\n\r\n```none\r\na4b67Rufd5nODsjgDxCP59gxvmy1RfXoLs+A9hLe/6IsAA1OcvtPil0YGFqo2zvYWtZX+xq3B9vNDbVotLZuqw==\r\n```\r\n\r\nAs already described in the comments, the hashing can be done with WebCrypto, so that the *forge* library is not needed. Also, as in the Kotlin code, a 32 bytes key must be applied (i.e. AES-256). This changes your code to:\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    (async () =&gt; {\r\n    async function decryptPass() {\r\n        \r\n        let secretKey = &quot;MYAPP11948-Sep022023145358&quot;\r\n        const encryted = &#39;a4b67Rufd5nODsjgDxCP59gxvmy1RfXoLs+A9hLe/6IsAA1OcvtPil0YGFqo2zvYWtZX+xq3B9vNDbVotLZuqw==&#39;\r\n        const secretKeyBytes = await generateKey(secretKey);\r\n\r\n        const keyBuffer = await window.crypto.subtle.importKey(\r\n            &#39;raw&#39;,\r\n            secretKeyBytes, {\r\n                name: &#39;AES-GCM&#39;,\r\n                length: 256\t// Fix key size\r\n            },\r\n            false,\r\n            [&#39;decrypt&#39;]\r\n        )\r\n\r\n        const encryptedString = atob(encryted)\r\n\r\n        const byteArray = new Uint8Array(encryptedString.length);\r\n\r\n        for (let i = 0; i &lt; encryptedString.length; i++) {\r\n            byteArray[i] = encryptedString.charCodeAt(i);\r\n        }\r\n\r\n        const ivBytes = byteArray.slice(0, 12);\r\n        const encryptedBytes = byteArray.slice(12);\r\n\r\n        const cleartext = await crypto.subtle.decrypt({\r\n            name: &#39;AES-GCM&#39;,\r\n            &quot;iv&quot;: ivBytes,\r\n        }, keyBuffer, encryptedBytes);\r\n\r\n        console.log(new TextDecoder().decode(cleartext)) // Expected output: 8d818916-2cd3-4d72-aa7a-5c73783ba16a\r\n    }\r\n\r\n    async function generateKey(key) {\r\n        return await window.crypto.subtle.digest(&quot;SHA-256&quot;, new TextEncoder().encode(key)); // apply digest() from WebCrypto\r\n    }\r\n      \r\n    await decryptPass();\r\n    })();\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nthat, with these changes, successfully decrypts the ciphertext generated by the Kotlin code.","title":"Encrypt in Kotlin, How do I decrypt this using crypto in Angular app?","body":"<p>Well, it's not that hard to post consistent test data that can be used to test the JavaScript code. With the following passphrase and plaintext:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val secretKey = &quot;MYAPP11948-Sep022023145358&quot;\nval plaintext = &quot;8d818916-2cd3-4d72-aa7a-5c73783ba16a&quot;;\n</code></pre>\n<p>and the nonce from the ciphertext you posted:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val IV = Base64.decode(&quot;a4b67Rufd5nODsjg&quot;, Base64.NO_WRAP) // 0x6b86faed1b9f7799ce0ec8e0, 12 bytes\n</code></pre>\n<p>the shared Kotlin code produces the following Base64 encoded ciphertext:</p>\n<pre class=\"lang-none prettyprint-override\"><code>a4b67Rufd5nODsjgDxCP59gxvmy1RfXoLs+A9hLe/6IsAA1OcvtPil0YGFqo2zvYWtZX+xq3B9vNDbVotLZuqw==\n</code></pre>\n<p>As already described in the comments, the hashing can be done with WebCrypto, so that the <em>forge</em> library is not needed. Also, as in the Kotlin code, a 32 bytes key must be applied (i.e. AES-256). This changes your code to:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>(async () =&gt; {\nasync function decryptPass() {\n    \n    let secretKey = \"MYAPP11948-Sep022023145358\"\n    const encryted = 'a4b67Rufd5nODsjgDxCP59gxvmy1RfXoLs+A9hLe/6IsAA1OcvtPil0YGFqo2zvYWtZX+xq3B9vNDbVotLZuqw=='\n    const secretKeyBytes = await generateKey(secretKey);\n\n    const keyBuffer = await window.crypto.subtle.importKey(\n        'raw',\n        secretKeyBytes, {\n            name: 'AES-GCM',\n            length: 256 // Fix key size\n        },\n        false,\n        ['decrypt']\n    )\n\n    const encryptedString = atob(encryted)\n\n    const byteArray = new Uint8Array(encryptedString.length);\n\n    for (let i = 0; i &lt; encryptedString.length; i++) {\n        byteArray[i] = encryptedString.charCodeAt(i);\n    }\n\n    const ivBytes = byteArray.slice(0, 12);\n    const encryptedBytes = byteArray.slice(12);\n\n    const cleartext = await crypto.subtle.decrypt({\n        name: 'AES-GCM',\n        \"iv\": ivBytes,\n    }, keyBuffer, encryptedBytes);\n\n    console.log(new TextDecoder().decode(cleartext)) // Expected output: 8d818916-2cd3-4d72-aa7a-5c73783ba16a\n}\n\nasync function generateKey(key) {\n    return await window.crypto.subtle.digest(\"SHA-256\", new TextEncoder().encode(key)); // apply digest() from WebCrypto\n}\n  \nawait decryptPass();\n})();</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>that, with these changes, successfully decrypts the ciphertext generated by the Kotlin code.</p>\n"}],"owner":{"account_id":19707288,"reputation":75,"user_id":14428656,"display_name":"Aj James"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":134,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"answer_count":1,"score":-2,"last_activity_date":1695817373,"creation_date":1695722495,"question_id":77178948,"body_markdown":"I am new at encrypting &amp; decrpyting aspect of coding. I am trying to decrypt the string outputted from Kotlin using crypto (AES-GCM) on my Angular app (Typescript). But the outputted string is wrong. Can anyone help me fix this?\r\n\r\nHere&#39;s how the string encrypted.\r\n\r\n**Kotlin:**\r\n```\r\nimport android.util.Base64\r\nimport java.io.IOException\r\nimport java.security.*\r\nimport java.security.spec.AlgorithmParameterSpec\r\nimport javax.crypto.BadPaddingException\r\nimport javax.crypto.Cipher\r\nimport javax.crypto.IllegalBlockSizeException\r\nimport javax.crypto.NoSuchPaddingException\r\nimport javax.crypto.spec.GCMParameterSpec\r\nimport javax.crypto.spec.IvParameterSpec\r\nimport javax.crypto.spec.SecretKeySpec\r\n\r\nclass EncryptionUtils {\r\n    companion object {\r\n        private const val CHARACTER_ENCODING = &quot;UTF-8&quot;\r\n        private const val CIPHER_TRANSFORMATION = &quot;AES/GCM/NoPadding&quot;\r\n        private const val AES_ENCRYPTION_ALGORITHM = &quot;AES&quot;\r\n        private const val GCM_NONCE_LENGTH = 12\r\n        private const val GCM_TAG_LENGTH = 128\r\n\r\n        fun encrypt(plain: String, key: String): String {\r\n            val encryptedBytes = encrypt(plain.toByteArray(Charsets.UTF_8), key)\r\n            return Base64.encodeToString(encryptedBytes, Base64.DEFAULT)\r\n        }\r\n\r\n        fun encrypt(message: ByteArray, key: String): ByteArray {\r\n            val keyBytes = generateKey(key)\r\n            val ivBytes = generateRandomIV(GCM_NONCE_LENGTH)\r\n\r\n            val cipher = Cipher.getInstance(CIPHER_TRANSFORMATION)\r\n            val secretKey = SecretKeySpec(keyBytes, AES_ENCRYPTION_ALGORITHM)\r\n            val gcmParameterSpec = GCMParameterSpec(GCM_TAG_LENGTH, ivBytes)\r\n\r\n            cipher.init(Cipher.ENCRYPT_MODE, secretKey, gcmParameterSpec)\r\n            val encrypted = cipher.doFinal(message)\r\n\r\n            val result = ByteArray(ivBytes.size + encrypted.size)\r\n            System.arraycopy(ivBytes, 0, result, 0, ivBytes.size)\r\n            System.arraycopy(encrypted, 0, result, ivBytes.size, encrypted.size)\r\n\r\n            return result\r\n        }\r\n\r\n        private fun generateKey(key: String): ByteArray {\r\n            val keyBytes = key.toByteArray(Charsets.UTF_8)\r\n            val md = MessageDigest.getInstance(&quot;SHA-256&quot;)\r\n            md.update(keyBytes)\r\n            return md.digest()\r\n        }\r\n\r\n        private fun generateRandomIV(length: Int): ByteArray {\r\n            val ivBytes = ByteArray(length)\r\n            val random = SecureRandom()\r\n            random.nextBytes(ivBytes)\r\n            return ivBytes\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n```\r\nprivate suspend fun sendErrorReportPostRequest(token: String, errorReport: ErrorReport): Boolean = withContext(Dispatchers.IO) {\r\n        return@withContext try {\r\n            val encryption = EncryptionUtils.Companion\r\n            val key = &quot;MYAPP${errorReport.file.nameWithoutExtension}&quot;\r\n            val api = ApiUploadDatabasePostRequest(\r\n                s3Link = errorReport.file.name,\r\n                password = encryption.encrypt(&quot;some-password&quot;  ?: &quot;&quot;, key),\r\n            )\r\n            result.isSuccess\r\n        } catch (e: IOException) {\r\n            Timber.e(e)\r\n            false\r\n        }\r\n    }\r\n```\r\nSample output data from Kotlin:\r\n```\r\nsalt = &quot;MYAPP&quot;\r\nsecretKey = &quot;MYAPP11948-Sep022023145358&quot;\r\nencryted = &#39;a4b67Rufd5nODsjgdWllLlgxVJQewy+nLNZxlDM57JxA7NJvwv5Sfb26qYtkYY0JZF3iNaMuN6RBFANEXHE44w==&#39;\r\n```\r\nHere&#39;s how I try to decrypt:\r\n\r\n**Angular App (Typescript):**\r\n```\r\nasync decryptPass() {\r\n    \r\n    let secretKey = &quot;MYAPP11948-Sep022023145358&quot;\r\n    const encryted = &#39;a4b67Rufd5nODsjgdWllLlgxVJQewy+nLNZxlDM57JxA7NJvwv5Sfb26qYtkYY0JZF3iNaMuN6RBFANEXHE44w==&#39;\r\n    const secretKeyBytes = this.generateKey(secretKey);\r\n\r\n    const keyBuffer = await window.crypto.subtle.importKey(\r\n      &#39;raw&#39;,\r\n      secretKeyBytes, {\r\n        name: &#39;AES-GCM&#39;,\r\n        length: 128\r\n      },\r\n      false,\r\n      [&#39;decrypt&#39;]\r\n    )\r\n\r\n    const encryptedString = atob(encryted)\r\n\r\n    const byteArray = new Uint8Array(encryptedString.length);\r\n\r\n    for (let i = 0; i &lt; encryptedString.length; i++) {\r\n      byteArray[i] = encryptedString.charCodeAt(i);\r\n    }\r\n\r\n    const ivBytes = byteArray.slice(0, 12);\r\n    const encryptedBytes = byteArray.slice(12);\r\n\r\n    const cleartext = await crypto.subtle.decrypt({\r\n        name: &#39;AES-GCM&#39;,\r\n        &quot;iv&quot;: ivBytes,\r\n    }, keyBuffer, encryptedBytes);\r\n\r\n    console.log(new TextDecoder().decode(cleartext))\r\n    // Expected output: 8d818916-2cd3-4d72-aa7a-5c73783ba16a\r\n  }\r\n\r\ngenerateKey(key: string) {\r\n    const textEncoder = new TextEncoder();\r\n    const byteArray = textEncoder.encode(key);\r\n    \r\n    let md = forge.md.sha256.create();\r\n    md.update(byteArray);\r\n    \r\n    return md.digest()\r\n  }\r\n```\r\nThis shows an error ```TypeError: Key data must be a BufferSource for non-JWK formats```. Can somebody help and enlighten me about this decrypting? Thank you in advance!","title":"Encrypt in Kotlin, How do I decrypt this using crypto in Angular app?","body":"<p>I am new at encrypting &amp; decrpyting aspect of coding. I am trying to decrypt the string outputted from Kotlin using crypto (AES-GCM) on my Angular app (Typescript). But the outputted string is wrong. Can anyone help me fix this?</p>\n<p>Here's how the string encrypted.</p>\n<p><strong>Kotlin:</strong></p>\n<pre><code>import android.util.Base64\nimport java.io.IOException\nimport java.security.*\nimport java.security.spec.AlgorithmParameterSpec\nimport javax.crypto.BadPaddingException\nimport javax.crypto.Cipher\nimport javax.crypto.IllegalBlockSizeException\nimport javax.crypto.NoSuchPaddingException\nimport javax.crypto.spec.GCMParameterSpec\nimport javax.crypto.spec.IvParameterSpec\nimport javax.crypto.spec.SecretKeySpec\n\nclass EncryptionUtils {\n    companion object {\n        private const val CHARACTER_ENCODING = &quot;UTF-8&quot;\n        private const val CIPHER_TRANSFORMATION = &quot;AES/GCM/NoPadding&quot;\n        private const val AES_ENCRYPTION_ALGORITHM = &quot;AES&quot;\n        private const val GCM_NONCE_LENGTH = 12\n        private const val GCM_TAG_LENGTH = 128\n\n        fun encrypt(plain: String, key: String): String {\n            val encryptedBytes = encrypt(plain.toByteArray(Charsets.UTF_8), key)\n            return Base64.encodeToString(encryptedBytes, Base64.DEFAULT)\n        }\n\n        fun encrypt(message: ByteArray, key: String): ByteArray {\n            val keyBytes = generateKey(key)\n            val ivBytes = generateRandomIV(GCM_NONCE_LENGTH)\n\n            val cipher = Cipher.getInstance(CIPHER_TRANSFORMATION)\n            val secretKey = SecretKeySpec(keyBytes, AES_ENCRYPTION_ALGORITHM)\n            val gcmParameterSpec = GCMParameterSpec(GCM_TAG_LENGTH, ivBytes)\n\n            cipher.init(Cipher.ENCRYPT_MODE, secretKey, gcmParameterSpec)\n            val encrypted = cipher.doFinal(message)\n\n            val result = ByteArray(ivBytes.size + encrypted.size)\n            System.arraycopy(ivBytes, 0, result, 0, ivBytes.size)\n            System.arraycopy(encrypted, 0, result, ivBytes.size, encrypted.size)\n\n            return result\n        }\n\n        private fun generateKey(key: String): ByteArray {\n            val keyBytes = key.toByteArray(Charsets.UTF_8)\n            val md = MessageDigest.getInstance(&quot;SHA-256&quot;)\n            md.update(keyBytes)\n            return md.digest()\n        }\n\n        private fun generateRandomIV(length: Int): ByteArray {\n            val ivBytes = ByteArray(length)\n            val random = SecureRandom()\n            random.nextBytes(ivBytes)\n            return ivBytes\n        }\n    }\n}\n</code></pre>\n<pre><code>private suspend fun sendErrorReportPostRequest(token: String, errorReport: ErrorReport): Boolean = withContext(Dispatchers.IO) {\n        return@withContext try {\n            val encryption = EncryptionUtils.Companion\n            val key = &quot;MYAPP${errorReport.file.nameWithoutExtension}&quot;\n            val api = ApiUploadDatabasePostRequest(\n                s3Link = errorReport.file.name,\n                password = encryption.encrypt(&quot;some-password&quot;  ?: &quot;&quot;, key),\n            )\n            result.isSuccess\n        } catch (e: IOException) {\n            Timber.e(e)\n            false\n        }\n    }\n</code></pre>\n<p>Sample output data from Kotlin:</p>\n<pre><code>salt = &quot;MYAPP&quot;\nsecretKey = &quot;MYAPP11948-Sep022023145358&quot;\nencryted = 'a4b67Rufd5nODsjgdWllLlgxVJQewy+nLNZxlDM57JxA7NJvwv5Sfb26qYtkYY0JZF3iNaMuN6RBFANEXHE44w=='\n</code></pre>\n<p>Here's how I try to decrypt:</p>\n<p><strong>Angular App (Typescript):</strong></p>\n<pre><code>async decryptPass() {\n    \n    let secretKey = &quot;MYAPP11948-Sep022023145358&quot;\n    const encryted = 'a4b67Rufd5nODsjgdWllLlgxVJQewy+nLNZxlDM57JxA7NJvwv5Sfb26qYtkYY0JZF3iNaMuN6RBFANEXHE44w=='\n    const secretKeyBytes = this.generateKey(secretKey);\n\n    const keyBuffer = await window.crypto.subtle.importKey(\n      'raw',\n      secretKeyBytes, {\n        name: 'AES-GCM',\n        length: 128\n      },\n      false,\n      ['decrypt']\n    )\n\n    const encryptedString = atob(encryted)\n\n    const byteArray = new Uint8Array(encryptedString.length);\n\n    for (let i = 0; i &lt; encryptedString.length; i++) {\n      byteArray[i] = encryptedString.charCodeAt(i);\n    }\n\n    const ivBytes = byteArray.slice(0, 12);\n    const encryptedBytes = byteArray.slice(12);\n\n    const cleartext = await crypto.subtle.decrypt({\n        name: 'AES-GCM',\n        &quot;iv&quot;: ivBytes,\n    }, keyBuffer, encryptedBytes);\n\n    console.log(new TextDecoder().decode(cleartext))\n    // Expected output: 8d818916-2cd3-4d72-aa7a-5c73783ba16a\n  }\n\ngenerateKey(key: string) {\n    const textEncoder = new TextEncoder();\n    const byteArray = textEncoder.encode(key);\n    \n    let md = forge.md.sha256.create();\n    md.update(byteArray);\n    \n    return md.digest()\n  }\n</code></pre>\n<p>This shows an error <code>TypeError: Key data must be a BufferSource for non-JWK formats</code>. Can somebody help and enlighten me about this decrypting? Thank you in advance!</p>\n"},{"tags":["java","runtime","classpath","compile-time"],"answers":[{"comments":[{"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":1,"creation_date":1290629190,"post_id":4270985,"comment_id":4630412,"body_markdown":"Shouldn&#39;t the compiletime dependency in example 1 be L1?","body":"Shouldn&#39;t the compiletime dependency in example 1 be L1?"},{"owner":{"account_id":213837,"reputation":2939,"user_id":467444,"accept_rate":27,"display_name":"Kunal"},"score":0,"creation_date":1290631859,"post_id":4270985,"comment_id":4630931,"body_markdown":"Thanks, but how does the class loading work at run time? At compile time it is easy to understand. But at runtime, how does it act, in a case when I have two Jars of different versions? Which one will it pick?","body":"Thanks, but how does the class loading work at run time? At compile time it is easy to understand. But at runtime, how does it act, in a case when I have two Jars of different versions? Which one will it pick?"},{"owner":{"account_id":19061,"reputation":185746,"user_id":44330,"accept_rate":70,"display_name":"Jason S"},"score":1,"creation_date":1290633742,"post_id":4270985,"comment_id":4631255,"body_markdown":"I&#39;m pretty sure the default classloader takes the classpath and steps through it in order, so if you have two jars in the classpath that both contain the same class (e.g. com.example.fooutils.Foo), it will use the one that is first in the classpath. Either that or you&#39;ll get an error stating the ambiguity. But if you want more info specific to classloaders you should ask a separate question.","body":"I&#39;m pretty sure the default classloader takes the classpath and steps through it in order, so if you have two jars in the classpath that both contain the same class (e.g. com.example.fooutils.Foo), it will use the one that is first in the classpath. Either that or you&#39;ll get an error stating the ambiguity. But if you want more info specific to classloaders you should ask a separate question."},{"owner":{"account_id":4333893,"reputation":3295,"user_id":3538581,"display_name":"Rajesh Goel"},"score":0,"creation_date":1455050290,"post_id":4270985,"comment_id":58313574,"body_markdown":"I think in the first case, the compile time dependencies should also be there on L2 i.e. the sentence should be: 1) if your class C1 calls library class L1, and L1 calls library class L2, then C1 has a runtime dependency on L1 and L2, but only a compile time dependency on L1 &amp; L2. This is so, as at the compile time also when java compiler verifies L1, then it also verifies all the other classes referenced by L1 (excluding the dynamic dependencies like Class.forName(&quot;myclassname)) ... otherwise how does it verifies that the compilation is working fine. Please explain if you think otherwise","body":"I think in the first case, the compile time dependencies should also be there on L2 i.e. the sentence should be: 1) if your class C1 calls library class L1, and L1 calls library class L2, then C1 has a runtime dependency on L1 and L2, but only a compile time dependency on L1 &amp; L2. This is so, as at the compile time also when java compiler verifies L1, then it also verifies all the other classes referenced by L1 (excluding the dynamic dependencies like Class.forName(&quot;myclassname)) ... otherwise how does it verifies that the compilation is working fine. Please explain if you think otherwise"},{"owner":{"account_id":19061,"reputation":185746,"user_id":44330,"accept_rate":70,"display_name":"Jason S"},"score":2,"creation_date":1455057673,"post_id":4270985,"comment_id":58317631,"body_markdown":"No. You need to read up on how compilation and linkage works in Java. All the compiler cares about, when it refers to an external class, is how to *use* that class, e.g. what its methods and fields are. It doesn&#39;t care what actually happens in that external class&#39;s methods. If L1 calls L2, that&#39;s an implementation detail of L1, and L1 has already been compiled elsewhere.","body":"No. You need to read up on how compilation and linkage works in Java. All the compiler cares about, when it refers to an external class, is how to <i>use</i> that class, e.g. what its methods and fields are. It doesn&#39;t care what actually happens in that external class&#39;s methods. If L1 calls L2, that&#39;s an implementation detail of L1, and L1 has already been compiled elsewhere."},{"owner":{"account_id":4032106,"reputation":16084,"user_id":3317808,"accept_rate":54,"display_name":"overexchange"},"score":0,"creation_date":1551627985,"post_id":4270985,"comment_id":96700604,"body_markdown":"In second para of this answer, it is load time dependency, but not runtime dependency. Runtime dependency is purely thru reflection","body":"In second para of this answer, it is load time dependency, but not runtime dependency. Runtime dependency is purely thru reflection"}],"tags":[],"owner":{"account_id":19061,"reputation":185746,"user_id":44330,"accept_rate":70,"display_name":"Jason S"},"comment_count":6,"down_vote_count":0,"up_vote_count":39,"is_accepted":false,"score":39,"last_activity_date":1290640358,"creation_date":1290628882,"answer_id":4270985,"question_id":4270950,"body_markdown":"The compiler needs the right classpath in order to compile calls to a library (compile time dependencies)\r\n\r\nThe JVM needs the right classpath in order to load the classes in the library you are calling (runtime dependencies).\r\n\r\nThey may be different in a couple of ways:\r\n\r\n1) if your class C1 calls library class L1, and L1 calls library class L2, then C1 has a runtime dependency on L1 and L2, but only a compile time dependency on L1.\r\n\r\n2) if your class C1 dynamically instantiates an interface I1 using Class.forName() or some other mechanism, and the implementing class for interface I1 is class L1, then C1 has a runtime dependency on I1 and L1, but only a compile time dependency on I1.\r\n\r\nOther &quot;indirect&quot; dependencies which are the same for compile-time and run-time:\r\n\r\n3) your class C1 extends library class L1, and L1 implements interface I1 and extends library class L2: C1 has a compile-time dependency on L1, L2, and I1.\r\n\r\n4) your class C1 has a method `foo(I1 i1)` and a method `bar(L1 l1)` where I1 is an interface and L1 is a class that takes a parameter which is interface I1: C1 has a compile-time dependency on I1 and L1.\r\n\r\n**Basically, to do anything interesting, your class needs to interface with other classes and interfaces in the classpath. The class/interface graph formed by that set of library *interfaces* yields the compile-time dependency chain. The library *implementations* yield the run-time dependency chain.** Note that the run-time dependency chain is run-time dependent or fail-slow: if the implementation of L1 sometimes depends on instantiating an object of class L2, and that class only gets instantiated in one particular scenario, then there&#39;s no dependency except in that scenario.\r\n","title":"Compile time vs Run time Dependency - Java","body":"<p>The compiler needs the right classpath in order to compile calls to a library (compile time dependencies)</p>\n\n<p>The JVM needs the right classpath in order to load the classes in the library you are calling (runtime dependencies).</p>\n\n<p>They may be different in a couple of ways:</p>\n\n<p>1) if your class C1 calls library class L1, and L1 calls library class L2, then C1 has a runtime dependency on L1 and L2, but only a compile time dependency on L1.</p>\n\n<p>2) if your class C1 dynamically instantiates an interface I1 using Class.forName() or some other mechanism, and the implementing class for interface I1 is class L1, then C1 has a runtime dependency on I1 and L1, but only a compile time dependency on I1.</p>\n\n<p>Other \"indirect\" dependencies which are the same for compile-time and run-time:</p>\n\n<p>3) your class C1 extends library class L1, and L1 implements interface I1 and extends library class L2: C1 has a compile-time dependency on L1, L2, and I1.</p>\n\n<p>4) your class C1 has a method <code>foo(I1 i1)</code> and a method <code>bar(L1 l1)</code> where I1 is an interface and L1 is a class that takes a parameter which is interface I1: C1 has a compile-time dependency on I1 and L1.</p>\n\n<p><strong>Basically, to do anything interesting, your class needs to interface with other classes and interfaces in the classpath. The class/interface graph formed by that set of library <em>interfaces</em> yields the compile-time dependency chain. The library <em>implementations</em> yield the run-time dependency chain.</strong> Note that the run-time dependency chain is run-time dependent or fail-slow: if the implementation of L1 sometimes depends on instantiating an object of class L2, and that class only gets instantiated in one particular scenario, then there's no dependency except in that scenario.</p>\n"},{"comments":[{"owner":{"account_id":4032106,"reputation":16084,"user_id":3317808,"accept_rate":54,"display_name":"overexchange"},"score":0,"creation_date":1551628268,"post_id":4270989,"comment_id":96700671,"body_markdown":"Its not until loadtime... runtime is different from loadtime.","body":"Its not until loadtime... runtime is different from loadtime."}],"tags":[],"owner":{"account_id":208094,"reputation":6180,"user_id":458368,"accept_rate":64,"display_name":"JOTN"},"comment_count":1,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1290628926,"creation_date":1290628926,"answer_id":4270989,"question_id":4270950,"body_markdown":"Java doesn&#39;t actually link anything at compile time.  It only verifies the syntax using the matching classes it finds in the CLASSPATH.  It&#39;s not until runtime that everything gets put together and executed based on the CLASSPATH at that time.","title":"Compile time vs Run time Dependency - Java","body":"<p>Java doesn't actually link anything at compile time.  It only verifies the syntax using the matching classes it finds in the CLASSPATH.  It's not until runtime that everything gets put together and executed based on the CLASSPATH at that time.</p>\n"},{"comments":[{"owner":{"account_id":213837,"reputation":2939,"user_id":467444,"accept_rate":27,"display_name":"Kunal"},"score":0,"creation_date":1290631955,"post_id":4270997,"comment_id":4630953,"body_markdown":"Thanks, but how does the class loading work at run time? At compile time it is easy to understand. But at runtime, how does it act, in a case when I have two Jars of different versions? Which class would Class.forName() pickup in case of multiple classes of different classes in a class path?","body":"Thanks, but how does the class loading work at run time? At compile time it is easy to understand. But at runtime, how does it act, in a case when I have two Jars of different versions? Which class would Class.forName() pickup in case of multiple classes of different classes in a class path?"},{"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":0,"creation_date":1290632097,"post_id":4270997,"comment_id":4630975,"body_markdown":"The one matching the name of course. If you *actually* mean &quot;multiple versions of same class&quot;, then it depends on the classloader. The &quot;closest&quot; one will be loaded.","body":"The one matching the name of course. If you <i>actually</i> mean &quot;multiple versions of same class&quot;, then it depends on the classloader. The &quot;closest&quot; one will be loaded."},{"owner":{"account_id":43980,"reputation":22154,"user_id":128812,"display_name":"gpeche"},"score":0,"creation_date":1290638351,"post_id":4270997,"comment_id":4632034,"body_markdown":"Well I think if you have A.jar with  `A`, B.jar with `B extends A` and C.jar with `C extends B` then C.jar depends on compile time on A.jar even though C dependency on A is indirect.","body":"Well I think if you have A.jar with  <code>A</code>, B.jar with <code>B extends A</code> and C.jar with <code>C extends B</code> then C.jar depends on compile time on A.jar even though C dependency on A is indirect."},{"owner":{"account_id":19061,"reputation":185746,"user_id":44330,"accept_rate":70,"display_name":"Jason S"},"score":1,"creation_date":1290639850,"post_id":4270997,"comment_id":4632300,"body_markdown":"The issue in all compile-time dependencies is *interface* dependency (whether the interface is through a class&#39;s methods, or through an interface&#39;s methods, or through a method which contains an argument that is a class or interface)","body":"The issue in all compile-time dependencies is <i>interface</i> dependency (whether the interface is through a class&#39;s methods, or through an interface&#39;s methods, or through a method which contains an argument that is a class or interface)"}],"tags":[],"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"comment_count":4,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1290629004,"creation_date":1290629004,"answer_id":4270997,"question_id":4270950,"body_markdown":"Compiletime dependencies are only the dependencies (other classes) which you use *directly* in the class you&#39;re compiling. Runtime dependencies covers both the direct and indirect dependencies of the class you&#39;re running. Thus, runtime dependencies includes dependencies of dependencies and any reflection dependencies like classnames which you have in a `String`, but are used in `Class#forName()`.","title":"Compile time vs Run time Dependency - Java","body":"<p>Compiletime dependencies are only the dependencies (other classes) which you use <em>directly</em> in the class you're compiling. Runtime dependencies covers both the direct and indirect dependencies of the class you're running. Thus, runtime dependencies includes dependencies of dependencies and any reflection dependencies like classnames which you have in a <code>String</code>, but are used in <code>Class#forName()</code>.</p>\n"},{"comments":[{"owner":{"account_id":146428,"reputation":9156,"user_id":356887,"accept_rate":78,"display_name":"xdhmoore"},"score":1,"creation_date":1473889786,"post_id":4271013,"comment_id":66317867,"body_markdown":"For clarification (this confused me), if you are using maven and building a war, &quot;servlet-api&quot; is usually a &quot;provided&quot; dependency instead of a &quot;runtime&quot; dependency, which would cause it to be included in the war, if I am correct.","body":"For clarification (this confused me), if you are using maven and building a war, &quot;servlet-api&quot; is usually a &quot;provided&quot; dependency instead of a &quot;runtime&quot; dependency, which would cause it to be included in the war, if I am correct."},{"owner":{"account_id":5996,"reputation":1508,"user_id":9910,"accept_rate":43,"display_name":"KC Baltz"},"score":3,"creation_date":1501865497,"post_id":4271013,"comment_id":77984891,"body_markdown":"&#39;provided&#39; means, include at compile time, but don&#39;t bundle it in the WAR or other collection of dependencies.  &#39;runtime&#39; does the opposite (not available at compile, but packaged with the WAR).","body":"&#39;provided&#39; means, include at compile time, but don&#39;t bundle it in the WAR or other collection of dependencies.  &#39;runtime&#39; does the opposite (not available at compile, but packaged with the WAR)."}],"tags":[],"owner":{"account_id":195025,"reputation":13170,"user_id":437679,"accept_rate":63,"display_name":"Martin Algesten"},"comment_count":2,"down_vote_count":1,"up_vote_count":39,"is_accepted":false,"score":38,"last_activity_date":1434398878,"creation_date":1290629088,"answer_id":4271013,"question_id":4270950,"body_markdown":"An easy example is to look at an api like the servlet api. To make your servlets compile, you need the servlet-api.jar, but at runtime the servlet container provides a servlet api implementation so you do not need to add servlet-api.jar to your runtime class path.\r\n","title":"Compile time vs Run time Dependency - Java","body":"<p>An easy example is to look at an api like the servlet api. To make your servlets compile, you need the servlet-api.jar, but at runtime the servlet container provides a servlet api implementation so you do not need to add servlet-api.jar to your runtime class path.</p>\n"},{"comments":[{"owner":{"account_id":6337367,"reputation":396,"user_id":4920382,"display_name":"wearebob"},"score":2,"creation_date":1559923428,"post_id":4272424,"comment_id":99584523,"body_markdown":"I know this is now a very old answer, but how can the JVM not have C as a runtime dependency from the start? If it&#39;s able to recognize &quot;here&#39;s a reference to C, time to add it as a dependency&quot;, then isn&#39;t C already essentially a dependency since the JVM recognizes it and knows where it is?","body":"I know this is now a very old answer, but how can the JVM not have C as a runtime dependency from the start? If it&#39;s able to recognize &quot;here&#39;s a reference to C, time to add it as a dependency&quot;, then isn&#39;t C already essentially a dependency since the JVM recognizes it and knows where it is?"},{"owner":{"account_id":43980,"reputation":22154,"user_id":128812,"display_name":"gpeche"},"score":0,"creation_date":1559926605,"post_id":4272424,"comment_id":99585936,"body_markdown":"@wearebob It could have been specified that way I guess, but they decided that lazy linking was better, and personally I agree for the reason stated above: it allows you to use some code if necessary, but does not force you to include it in your deployment if you do not need it. That is quite handy when dealing with third party code.","body":"@wearebob It could have been specified that way I guess, but they decided that lazy linking was better, and personally I agree for the reason stated above: it allows you to use some code if necessary, but does not force you to include it in your deployment if you do not need it. That is quite handy when dealing with third party code."},{"owner":{"account_id":6337367,"reputation":396,"user_id":4920382,"display_name":"wearebob"},"score":0,"creation_date":1559936850,"post_id":4272424,"comment_id":99590032,"body_markdown":"If I have a jar deployed somewhere though, it&#39;s already going to have to contain all of it&#39;s dependencies. It doesn&#39;t know if it will be run with arguments or not (so it doesn&#39;t know whether or not C will be used), so it would have to have C available either way. I just don&#39;t see how any memory/time is saved by not having C on the classpath from the start.","body":"If I have a jar deployed somewhere though, it&#39;s already going to have to contain all of it&#39;s dependencies. It doesn&#39;t know if it will be run with arguments or not (so it doesn&#39;t know whether or not C will be used), so it would have to have C available either way. I just don&#39;t see how any memory/time is saved by not having C on the classpath from the start."},{"owner":{"account_id":43980,"reputation":22154,"user_id":128812,"display_name":"gpeche"},"score":1,"creation_date":1559937132,"post_id":4272424,"comment_id":99590143,"body_markdown":"@wearebob a JAR does not need to include all its dependencies. That &#39;s why almost every non-trivial application has a /lib directory or similar containing multiple JARs.","body":"@wearebob a JAR does not need to include all its dependencies. That &#39;s why almost every non-trivial application has a /lib directory or similar containing multiple JARs."},{"owner":{"account_id":3017633,"reputation":789,"user_id":2559317,"accept_rate":50,"display_name":"Vortex"},"score":1,"creation_date":1618111833,"post_id":4272424,"comment_id":118501464,"body_markdown":"@wearebob. this question touches on software architecture and application life cycle. Consider public APIs and service implementations. The concept of compile/runtime is reflected in build tools like Gradle too. Think of &#39;implementation&#39; as some swappable service code. In simple applications compile and runtime codebase are often identical coming from the an uber Jar. In case of enterprise apps which may go through many releases, the story is more complicated as you have to upgrade dependencies. Compile/runtime helps maintaining backward compatibility. hope this helps","body":"@wearebob. this question touches on software architecture and application life cycle. Consider public APIs and service implementations. The concept of compile/runtime is reflected in build tools like Gradle too. Think of &#39;implementation&#39; as some swappable service code. In simple applications compile and runtime codebase are often identical coming from the an uber Jar. In case of enterprise apps which may go through many releases, the story is more complicated as you have to upgrade dependencies. Compile/runtime helps maintaining backward compatibility. hope this helps"}],"tags":[],"owner":{"account_id":43980,"reputation":22154,"user_id":128812,"display_name":"gpeche"},"comment_count":5,"down_vote_count":0,"up_vote_count":108,"is_accepted":false,"score":108,"last_activity_date":1368729363,"creation_date":1290640540,"answer_id":4272424,"question_id":4270950,"body_markdown":"* **Compile-time dependency**: You need the dependency in your `CLASSPATH` to compile your artifact. They are produced because you have some kind of &quot;reference&quot; to the dependency hardcoded in your code, such as calling `new` for some class, extending or implementing something (either directly or indirectly), or a method call using the direct `reference.method()` notation.\r\n\r\n* **Run-time dependency**: You need the dependency in your `CLASSPATH` to run your artifact. They are produced because you execute code that accesses the dependency (either in a hardcoded way or via reflection or whatever).\r\n\r\nAlthough compile-time dependency usually implies run-time dependency, you can have a compile-time only dependency. This is based on the fact that Java only links class dependencies on first access to that class, so if you never access a particular class at run-time because a code path is never traversed, Java will ignore both the class and its dependencies.\r\n\r\nExample of this\r\n\r\nIn C.java (generates C.class):\r\n\r\n    package dependencies;\r\n    public class C { }\r\n\r\nIn A.java (generates A.class):\r\n\r\n    package dependencies;\r\n    public class A {\r\n        public static class B {\r\n            public String toString() {\r\n                C c = new C();\r\n                return c.toString();\r\n            }\r\n        }\r\n        public static void main(String[] args) {\r\n            if (args.length &gt; 0) {\r\n                B b = new B();\r\n                System.out.println(b.toString());\r\n            }\r\n        }\r\n    }\r\n\r\nIn this case, `A` has a compile-time dependency on `C` through `B`, but it will only have a run-time dependency on C if you pass some parameters when executing `java dependencies.A`, as the JVM will only try to solve `B`&#39;s dependency on `C` when it gets to execute `B b = new B()`. This feature allows you to provide at runtime only the dependencies of the classes that you use in your code paths, and ignore the dependencies of the rest of the classes in the artifact.","title":"Compile time vs Run time Dependency - Java","body":"<ul>\n<li><p><strong>Compile-time dependency</strong>: You need the dependency in your <code>CLASSPATH</code> to compile your artifact. They are produced because you have some kind of \"reference\" to the dependency hardcoded in your code, such as calling <code>new</code> for some class, extending or implementing something (either directly or indirectly), or a method call using the direct <code>reference.method()</code> notation.</p></li>\n<li><p><strong>Run-time dependency</strong>: You need the dependency in your <code>CLASSPATH</code> to run your artifact. They are produced because you execute code that accesses the dependency (either in a hardcoded way or via reflection or whatever).</p></li>\n</ul>\n\n<p>Although compile-time dependency usually implies run-time dependency, you can have a compile-time only dependency. This is based on the fact that Java only links class dependencies on first access to that class, so if you never access a particular class at run-time because a code path is never traversed, Java will ignore both the class and its dependencies.</p>\n\n<p>Example of this</p>\n\n<p>In C.java (generates C.class):</p>\n\n<pre><code>package dependencies;\npublic class C { }\n</code></pre>\n\n<p>In A.java (generates A.class):</p>\n\n<pre><code>package dependencies;\npublic class A {\n    public static class B {\n        public String toString() {\n            C c = new C();\n            return c.toString();\n        }\n    }\n    public static void main(String[] args) {\n        if (args.length &gt; 0) {\n            B b = new B();\n            System.out.println(b.toString());\n        }\n    }\n}\n</code></pre>\n\n<p>In this case, <code>A</code> has a compile-time dependency on <code>C</code> through <code>B</code>, but it will only have a run-time dependency on C if you pass some parameters when executing <code>java dependencies.A</code>, as the JVM will only try to solve <code>B</code>'s dependency on <code>C</code> when it gets to execute <code>B b = new B()</code>. This feature allows you to provide at runtime only the dependencies of the classes that you use in your code paths, and ignore the dependencies of the rest of the classes in the artifact.</p>\n"},{"tags":[],"owner":{"account_id":1479215,"reputation":2511,"user_id":1388943,"accept_rate":48,"display_name":"stdout"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1454400491,"creation_date":1454329028,"answer_id":35130324,"question_id":4270950,"body_markdown":"For Java, compile time dependency is your source code&#39;s dependency. For instance, if class A calls a method from class B, then A is dependent to B at the compile time since A has to know about B (type of B) to be compiled. The trick here should be this: Compiled code is not a complete and executable code yet. It includes replaceable addresses (symbols, metadata) for the sources which are not yet compiled or existing in external jars. During linking, those addresses must be replaced by actual adresses in the memory. To do it properly, correct symbols/adresses should be created. And this can be done with the type of the class (B). I believe that&#39;s the main dependency at the compile time.\r\n\r\nRuntime dependency is more related with the actual flow-of-control. It involes actual memory addresses. It&#39;s a dependency that you have when your program is running. You need class B details here like implementations, not only the type info. If the class not exists, then you will get RuntimeException and JVM will exit.\r\n\r\n\r\nBoth dependencies, generally and shouldn&#39;t, flow the same direction. This is a matter of OO design though.\r\n\r\n\r\nIn C++, compilation is a bit different (not just-in-time) but it has a linker too. So the process might be thought similar to Java I guess.","title":"Compile time vs Run time Dependency - Java","body":"<p>For Java, compile time dependency is your source code's dependency. For instance, if class A calls a method from class B, then A is dependent to B at the compile time since A has to know about B (type of B) to be compiled. The trick here should be this: Compiled code is not a complete and executable code yet. It includes replaceable addresses (symbols, metadata) for the sources which are not yet compiled or existing in external jars. During linking, those addresses must be replaced by actual adresses in the memory. To do it properly, correct symbols/adresses should be created. And this can be done with the type of the class (B). I believe that's the main dependency at the compile time.</p>\n\n<p>Runtime dependency is more related with the actual flow-of-control. It involes actual memory addresses. It's a dependency that you have when your program is running. You need class B details here like implementations, not only the type info. If the class not exists, then you will get RuntimeException and JVM will exit.</p>\n\n<p>Both dependencies, generally and shouldn't, flow the same direction. This is a matter of OO design though.</p>\n\n<p>In C++, compilation is a bit different (not just-in-time) but it has a linker too. So the process might be thought similar to Java I guess.</p>\n"},{"tags":[],"owner":{"account_id":4682052,"reputation":1016,"user_id":3790512,"accept_rate":64,"display_name":"ThCollignon"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633358156,"creation_date":1633358156,"answer_id":69437830,"question_id":4270950,"body_markdown":"From @Jason S answer I derive mine with other words, in case it helps:\r\n\r\nA **runtime dependency** of an app is actually a dependency (let&#39;s call it L2) of a compile-time dependency (L1) of this app. It may not be declared as a dependency if it won&#39;t be used by the app. \r\n\r\n - If L2 happens to be used by the app (through L1) while not declared as a dependency, there will be a NoClassDefFoundError. \r\n\r\n - If L2 is declared as a compile-time dependency of the app, and not used at runtime, it uselessly makes the jar larger and compile-time longer than needed.\r\n\r\nDeclaring L2 as a runtime dependency allows the JVM to lazy-load it, only when needed.","title":"Compile time vs Run time Dependency - Java","body":"<p>From @Jason S answer I derive mine with other words, in case it helps:</p>\n<p>A <strong>runtime dependency</strong> of an app is actually a dependency (let's call it L2) of a compile-time dependency (L1) of this app. It may not be declared as a dependency if it won't be used by the app.</p>\n<ul>\n<li><p>If L2 happens to be used by the app (through L1) while not declared as a dependency, there will be a NoClassDefFoundError.</p>\n</li>\n<li><p>If L2 is declared as a compile-time dependency of the app, and not used at runtime, it uselessly makes the jar larger and compile-time longer than needed.</p>\n</li>\n</ul>\n<p>Declaring L2 as a runtime dependency allows the JVM to lazy-load it, only when needed.</p>\n"},{"tags":[],"owner":{"account_id":23195966,"reputation":1,"user_id":17291602,"display_name":"ibrahim Bayburtlu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695816872,"creation_date":1695816872,"answer_id":77187412,"question_id":4270950,"body_markdown":"**Compile Time**\r\n\r\nCompile time is the stage where the Java source code is compiled. In this phase, Java source code is written and then compiled by a Java compiler (javac). During compilation, your code is checked and the presence of errors is detected. If your code has compilation errors, the compiler will notify you of the errors and you will need to fix these errors before running your code.\r\n\r\nErrors during compilation can help you better understand your code. Because these errors indicate misused variables, missing or extra parentheses, incorrect type conversions, and other potential coding errors. This makes your code better documented and easier to edit.\r\n\r\nCompile time is also the stage where your code is translated into byte code. Bytecode is assembled into a format that can be executed by the Java Virtual Machine (JVM). Once the compilation process is complete, your code is ready to run.\r\n\r\nThis stage, in a way, is an indication that Java is a compiled language, because what is done at this stage is the process of converting the code into byte code.\r\n\r\n**Run Time**\r\n\r\nRun time refers to the moment when your Java program runs. When you run your Java programs, your code is executed by the JVM. At this stage, your code is implemented and results are produced.\r\n\r\nIt is also possible for errors to occur during run time. However, these types of errors are different from errors in compile time. Compile time errors are detected during the compilation of your code, while run time errors occur only when your program is executed. Run time errors may occur due to incorrect user input or exceeding memory limits.\r\n\r\nDuring the run time phase, our byte codes are run. Our run codes are an indication that Java is an interpreted language. In interpreted languages, the code is read line by line or according to special expressions, and there is no need to compile it beforehand.\r\n\r\nJava is a programming language that is both compiled and interpreted.","title":"Compile time vs Run time Dependency - Java","body":"<p><strong>Compile Time</strong></p>\n<p>Compile time is the stage where the Java source code is compiled. In this phase, Java source code is written and then compiled by a Java compiler (javac). During compilation, your code is checked and the presence of errors is detected. If your code has compilation errors, the compiler will notify you of the errors and you will need to fix these errors before running your code.</p>\n<p>Errors during compilation can help you better understand your code. Because these errors indicate misused variables, missing or extra parentheses, incorrect type conversions, and other potential coding errors. This makes your code better documented and easier to edit.</p>\n<p>Compile time is also the stage where your code is translated into byte code. Bytecode is assembled into a format that can be executed by the Java Virtual Machine (JVM). Once the compilation process is complete, your code is ready to run.</p>\n<p>This stage, in a way, is an indication that Java is a compiled language, because what is done at this stage is the process of converting the code into byte code.</p>\n<p><strong>Run Time</strong></p>\n<p>Run time refers to the moment when your Java program runs. When you run your Java programs, your code is executed by the JVM. At this stage, your code is implemented and results are produced.</p>\n<p>It is also possible for errors to occur during run time. However, these types of errors are different from errors in compile time. Compile time errors are detected during the compilation of your code, while run time errors occur only when your program is executed. Run time errors may occur due to incorrect user input or exceeding memory limits.</p>\n<p>During the run time phase, our byte codes are run. Our run codes are an indication that Java is an interpreted language. In interpreted languages, the code is read line by line or according to special expressions, and there is no need to compile it beforehand.</p>\n<p>Java is a programming language that is both compiled and interpreted.</p>\n"}],"owner":{"account_id":213837,"reputation":2939,"user_id":467444,"accept_rate":27,"display_name":"Kunal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77856,"favorite_count":0,"down_vote_count":0,"up_vote_count":126,"answer_count":8,"score":126,"last_activity_date":1695816872,"creation_date":1290628634,"question_id":4270950,"body_markdown":"What is the difference between compile time and run time dependencies in Java?\r\nIt is related to class path, but how do they differ?","title":"Compile time vs Run time Dependency - Java","body":"<p>What is the difference between compile time and run time dependencies in Java?\nIt is related to class path, but how do they differ?</p>\n"},{"tags":["java","android","viewmodel","viewmodelproviders"],"comments":[{"owner":{"account_id":3366602,"reputation":611,"user_id":2827025,"display_name":"anemomylos"},"score":1,"creation_date":1695213781,"post_id":77142336,"comment_id":135993906,"body_markdown":"Usually such problems can be attributed to obfuscation of the code by `proguard`. From the code you shared, it&#39;s not clear why proguard can&#39;t handle the class name change correctly. Are you sure you are not using somewhere in the code the class name as a string instead of `MyClass.class`? In any case, just edit the `proguard-rules.pro` file to add the class you want to keep, for example, `-keep class my.package.MyClass`.","body":"Usually such problems can be attributed to obfuscation of the code by <code>proguard</code>. From the code you shared, it&#39;s not clear why proguard can&#39;t handle the class name change correctly. Are you sure you are not using somewhere in the code the class name as a string instead of <code>MyClass.class</code>? In any case, just edit the <code>proguard-rules.pro</code> file to add the class you want to keep, for example, <code>-keep class my.package.MyClass</code>."},{"owner":{"account_id":8927381,"reputation":173,"user_id":6661228,"display_name":"Thiago Souza"},"score":0,"creation_date":1695225820,"post_id":77142336,"comment_id":135997029,"body_markdown":"@anemomylos I&#39;ve added all my viewmodel classes to proguard with the &quot;-keep class&quot; but the error continues, and I dont use my class name as a string, i&#39;ve checked everywhere.\nFor now I can have the proguard disabled at least","body":"@anemomylos I&#39;ve added all my viewmodel classes to proguard with the &quot;-keep class&quot; but the error continues, and I dont use my class name as a string, i&#39;ve checked everywhere. For now I can have the proguard disabled at least"},{"owner":{"account_id":3366602,"reputation":611,"user_id":2827025,"display_name":"anemomylos"},"score":0,"creation_date":1695226484,"post_id":77142336,"comment_id":135997168,"body_markdown":"You could get a better answer by adding the code of the activity and the factory.","body":"You could get a better answer by adding the code of the activity and the factory."},{"owner":{"account_id":8927381,"reputation":173,"user_id":6661228,"display_name":"Thiago Souza"},"score":0,"creation_date":1695229888,"post_id":77142336,"comment_id":135997831,"body_markdown":"Files added to the answer","body":"Files added to the answer"}],"answers":[{"tags":[],"owner":{"account_id":26529686,"reputation":26,"user_id":20162083,"display_name":"Adel El-Hawary"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695816814,"creation_date":1695816794,"answer_id":77187398,"question_id":77142336,"body_markdown":"if you recently upgraded your AGP to 8.+\r\n\r\njust add this line to your gradle.properties file\r\n\r\n    android.enableR8.fullMode=false\r\n\r\n","title":"ViewModelProvider java.lang.ClassCastException when changing from debug to release variant","body":"<p>if you recently upgraded your AGP to 8.+</p>\n<p>just add this line to your gradle.properties file</p>\n<pre><code>android.enableR8.fullMode=false\n</code></pre>\n"}],"owner":{"account_id":8927381,"reputation":173,"user_id":6661228,"display_name":"Thiago Souza"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":178,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77187398,"answer_count":1,"score":0,"last_activity_date":1695816814,"creation_date":1695212195,"question_id":77142336,"body_markdown":"I&#39;m trying to build a application from my company but when I change the build variant to release (the variant only changes the project configuration files, like endpoints and credentials), I get this error:\r\n\r\n```\r\nFATAL EXCEPTION: main\r\nProcess: com.timo.ecocloud.paciente, PID: 15435\r\njava.lang.RuntimeException: Unable to start activity ComponentInfo{com.timo.ecocloud.paciente/com.timo.ecocloudpaciente.ui.login.LoginActivity}: java.lang.ClassCastException\r\n\tat android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3635)\r\n\tat android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3792)\r\n\tat android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:103)\r\n\tat android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\r\n\tat android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\r\n\tat android.app.ActivityThread$H.handleMessage(ActivityThread.java:2210)\r\n\tat android.os.Handler.dispatchMessage(Handler.java:106)\r\n\tat android.os.Looper.loopOnce(Looper.java:201)\r\n\tat android.os.Looper.loop(Looper.java:288)\r\n\tat android.app.ActivityThread.main(ActivityThread.java:7839)\r\n\tat java.lang.reflect.Method.invoke(Native Method)\r\n\tat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)\r\n\tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1003)\r\nCaused by: java.lang.ClassCastException\r\n\tat android.support.v4.media.session.b.a(SourceFile:1)\r\n\tat j1.a.&lt;init&gt;(SourceFile:1)\r\n\tat com.timo.ecocloudpaciente.ui.login.f.a(SourceFile:1)\r\n\tat androidx.lifecycle.s.b(SourceFile:1)\r\n\tat androidx.lifecycle.s.a(SourceFile:1)\r\n\tat com.timo.ecocloudpaciente.ui.login.LoginActivity.onCreate(Unknown Source:68)\r\n\tat android.app.Activity.performCreate(Activity.java:8051)\r\n\tat android.app.Activity.performCreate(Activity.java:8031)\r\n\tat android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1329)\r\n\tat android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3608)\r\n\tat android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3792)&#160;\r\n\tat android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:103)&#160;\r\n\tat android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)&#160;\r\n\tat android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)&#160;\r\n\tat android.app.ActivityThread$H.handleMessage(ActivityThread.java:2210)&#160;\r\n\tat android.os.Handler.dispatchMessage(Handler.java:106)&#160;\r\n\tat android.os.Looper.loopOnce(Looper.java:201)&#160;\r\n\tat android.os.Looper.loop(Looper.java:288)&#160;\r\n\tat android.app.ActivityThread.main(ActivityThread.java:7839)&#160;\r\n\tat java.lang.reflect.Method.invoke(Native Method)&#160;\r\n\tat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)&#160;   \r\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1003)\r\n```\r\n\r\nThe piece of code which generates the error is this:\r\n```\r\nloginViewModel = ViewModelProviders.of(this, new LoginViewModelFactory())\r\n                .get(LoginViewModel.class);\r\n```\r\n\r\nI&#39;ve tried updating everything, even using the more updated version:\r\n```\r\nnew ViewModelProvider(this, new LoginViewModelFactory()).get(LoginViewModel.class);\r\n```\r\nBut nothing has worked so far, did anyone know how to solve this?\r\n\r\nEdit: viewmodel, viewmodelfactory codes below:\r\nIn the activity (the code that generates the error)\r\n```\r\nloginViewModel = ViewModelProviders.of(this, new LoginViewModelFactory())\r\n                .get(LoginViewModel.class);\r\n```\r\n\r\nLoginViewModel.java:\r\n```\r\npackage com.timo.ecocloudpaciente.ui.login;\r\n\r\nimport android.app.Activity;\r\nimport android.util.Log;\r\nimport android.util.Patterns;\r\n\r\nimport androidx.lifecycle.LiveData;\r\nimport androidx.lifecycle.MutableLiveData;\r\nimport androidx.lifecycle.ViewModel;\r\n\r\nimport com.timo.ecocloudpaciente.data.LoginRepository;\r\nimport com.timo.ecocloudpaciente.R;\r\nimport com.timo.ecocloudpaciente.model.DefaultResponse;\r\nimport com.timo.ecocloudpaciente.model.DefaultResponseResult;\r\nimport com.timo.ecocloudpaciente.model.User;\r\n\r\npublic class LoginViewModel extends ViewModel {\r\n\r\n    private MutableLiveData&lt;LoginFormState&gt; loginFormState = new MutableLiveData&lt;&gt;();\r\n    private MutableLiveData&lt;RecoverFormState&gt; recoverFormState = new MutableLiveData&lt;&gt;();\r\n\r\n    private MutableLiveData&lt;LoginResult&gt; loginResult = new MutableLiveData&lt;&gt;();\r\n    private MutableLiveData&lt;DefaultResponseResult&gt; defaultResult = new MutableLiveData&lt;&gt;();\r\n    private LoginRepository loginRepository;\r\n\r\n    LoginViewModel(LoginRepository loginRepository) {\r\n        this.loginRepository = loginRepository;\r\n    }\r\n\r\n\r\n    /**\r\n     * Login\r\n     */\r\n\r\n    LiveData&lt;LoginFormState&gt; getLoginFormState() {\r\n        return loginFormState;\r\n    }\r\n\r\n    LiveData&lt;LoginResult&gt; getLoginResult() {\r\n        return loginResult;\r\n    }\r\n\r\n    public void login(String username, String password) {\r\n        // can be launched in a separate asynchronous job\r\n        loginRepository.login(username, password, this);\r\n    }\r\n\r\n    public void loginDataChanged(String username, String password) {\r\n        if (!isUserNameValid(username)) {\r\n            loginFormState.setValue(new LoginFormState(R.string.login_invalid_username, null));\r\n        } else if (!isPasswordValid(password)) {\r\n            loginFormState.setValue(new LoginFormState(null, R.string.login_invalid_password));\r\n        } else {\r\n            loginFormState.setValue(new LoginFormState(true));\r\n        }\r\n    }\r\n\r\n    // A placeholder username validation check\r\n    private boolean isUserNameValid(String username) {\r\n        return username != null &amp;&amp; !username.equals(&quot;&quot;);\r\n    }\r\n\r\n    // A placeholder password validation check\r\n    private boolean isPasswordValid(String password) {\r\n        return password != null &amp;&amp; password.trim().length() == 6;\r\n    }\r\n\r\n    /**\r\n     * Used for callback\r\n     */\r\n    public void onSuccess(User user) {\r\n        loginResult.setValue(new LoginResult(user));\r\n    }\r\n\r\n    public void onError(String message) {\r\n        loginResult.setValue(new LoginResult(message));\r\n    }\r\n\r\n    /**\r\n     * Recover password\r\n     */\r\n    LiveData&lt;RecoverFormState&gt; getRecoverFormState() {\r\n        return recoverFormState;\r\n    }\r\n\r\n    public void recoverDataChanged(String useremail) {\r\n\r\n        if (!isEmailValid(useremail)) {\r\n            recoverFormState.setValue(new RecoverFormState(R.string.recover_invalid_email));\r\n        }else {\r\n            recoverFormState.setValue(new RecoverFormState(true));\r\n        }\r\n    }\r\n\r\n    LiveData&lt;DefaultResponseResult&gt; getDefaultResult() {\r\n        return defaultResult;\r\n    }\r\n\r\n    public void recoverPwd(Activity activity, LoginViewModel loginViewModel, String email){\r\n        loginRepository.recoverPwd(activity, loginViewModel,  email);\r\n    }\r\n\r\n    private boolean isEmailValid(String email){\r\n        if (email == null || email.trim().isEmpty())\r\n           return false;\r\n\r\n        if (email.contains(&quot;@&quot;))\r\n            return Patterns.EMAIL_ADDRESS.matcher(email).matches();\r\n        else\r\n            return false;\r\n    }\r\n\r\n\r\n    /**\r\n     * Used for callback\r\n     */\r\n    public void defaultReturnOnSuccess(DefaultResponse defaultResponse) {\r\n        defaultResult.setValue(new DefaultResponseResult(defaultResponse, &quot;&quot;));\r\n    }\r\n\r\n    public void defaultReturnOnError(String message) {\r\n        defaultResult.setValue(new DefaultResponseResult(message));\r\n    }\r\n}\r\n```\r\n\r\nLoginViewModelFactory.java\r\n```\r\npackage com.timo.ecocloudpaciente.ui.login;\r\nimport androidx.lifecycle.ViewModel;\r\nimport androidx.lifecycle.ViewModelProvider;\r\nimport androidx.annotation.NonNull;\r\n\r\nimport com.timo.ecocloudpaciente.data.LoginDataSource;\r\nimport com.timo.ecocloudpaciente.data.LoginRepository;\r\npublic class LoginViewModelFactory implements ViewModelProvider.Factory {\r\n    @NonNull\r\n    @Override\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    public &lt;T extends ViewModel&gt; T create(@NonNull Class&lt;T&gt; modelClass) {\r\n        if (modelClass.isAssignableFrom(LoginViewModel.class)) {\r\n            return (T) new LoginViewModel(LoginRepository.getInstance(new LoginDataSource()));\r\n        } else {\r\n            throw new IllegalArgumentException(&quot;Unknown ViewModel class&quot;);\r\n        }\r\n    }\r\n}\r\n```","title":"ViewModelProvider java.lang.ClassCastException when changing from debug to release variant","body":"<p>I'm trying to build a application from my company but when I change the build variant to release (the variant only changes the project configuration files, like endpoints and credentials), I get this error:</p>\n<pre><code>FATAL EXCEPTION: main\nProcess: com.timo.ecocloud.paciente, PID: 15435\njava.lang.RuntimeException: Unable to start activity ComponentInfo{com.timo.ecocloud.paciente/com.timo.ecocloudpaciente.ui.login.LoginActivity}: java.lang.ClassCastException\n    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3635)\n    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3792)\n    at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:103)\n    at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\n    at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2210)\n    at android.os.Handler.dispatchMessage(Handler.java:106)\n    at android.os.Looper.loopOnce(Looper.java:201)\n    at android.os.Looper.loop(Looper.java:288)\n    at android.app.ActivityThread.main(ActivityThread.java:7839)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1003)\nCaused by: java.lang.ClassCastException\n    at android.support.v4.media.session.b.a(SourceFile:1)\n    at j1.a.&lt;init&gt;(SourceFile:1)\n    at com.timo.ecocloudpaciente.ui.login.f.a(SourceFile:1)\n    at androidx.lifecycle.s.b(SourceFile:1)\n    at androidx.lifecycle.s.a(SourceFile:1)\n    at com.timo.ecocloudpaciente.ui.login.LoginActivity.onCreate(Unknown Source:68)\n    at android.app.Activity.performCreate(Activity.java:8051)\n    at android.app.Activity.performCreate(Activity.java:8031)\n    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1329)\n    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3608)\n    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3792) \n    at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:103) \n    at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135) \n    at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95) \n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2210) \n    at android.os.Handler.dispatchMessage(Handler.java:106) \n    at android.os.Looper.loopOnce(Looper.java:201) \n    at android.os.Looper.loop(Looper.java:288) \n    at android.app.ActivityThread.main(ActivityThread.java:7839) \n    at java.lang.reflect.Method.invoke(Native Method) \n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)    \nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1003)\n</code></pre>\n<p>The piece of code which generates the error is this:</p>\n<pre><code>loginViewModel = ViewModelProviders.of(this, new LoginViewModelFactory())\n                .get(LoginViewModel.class);\n</code></pre>\n<p>I've tried updating everything, even using the more updated version:</p>\n<pre><code>new ViewModelProvider(this, new LoginViewModelFactory()).get(LoginViewModel.class);\n</code></pre>\n<p>But nothing has worked so far, did anyone know how to solve this?</p>\n<p>Edit: viewmodel, viewmodelfactory codes below:\nIn the activity (the code that generates the error)</p>\n<pre><code>loginViewModel = ViewModelProviders.of(this, new LoginViewModelFactory())\n                .get(LoginViewModel.class);\n</code></pre>\n<p>LoginViewModel.java:</p>\n<pre><code>package com.timo.ecocloudpaciente.ui.login;\n\nimport android.app.Activity;\nimport android.util.Log;\nimport android.util.Patterns;\n\nimport androidx.lifecycle.LiveData;\nimport androidx.lifecycle.MutableLiveData;\nimport androidx.lifecycle.ViewModel;\n\nimport com.timo.ecocloudpaciente.data.LoginRepository;\nimport com.timo.ecocloudpaciente.R;\nimport com.timo.ecocloudpaciente.model.DefaultResponse;\nimport com.timo.ecocloudpaciente.model.DefaultResponseResult;\nimport com.timo.ecocloudpaciente.model.User;\n\npublic class LoginViewModel extends ViewModel {\n\n    private MutableLiveData&lt;LoginFormState&gt; loginFormState = new MutableLiveData&lt;&gt;();\n    private MutableLiveData&lt;RecoverFormState&gt; recoverFormState = new MutableLiveData&lt;&gt;();\n\n    private MutableLiveData&lt;LoginResult&gt; loginResult = new MutableLiveData&lt;&gt;();\n    private MutableLiveData&lt;DefaultResponseResult&gt; defaultResult = new MutableLiveData&lt;&gt;();\n    private LoginRepository loginRepository;\n\n    LoginViewModel(LoginRepository loginRepository) {\n        this.loginRepository = loginRepository;\n    }\n\n\n    /**\n     * Login\n     */\n\n    LiveData&lt;LoginFormState&gt; getLoginFormState() {\n        return loginFormState;\n    }\n\n    LiveData&lt;LoginResult&gt; getLoginResult() {\n        return loginResult;\n    }\n\n    public void login(String username, String password) {\n        // can be launched in a separate asynchronous job\n        loginRepository.login(username, password, this);\n    }\n\n    public void loginDataChanged(String username, String password) {\n        if (!isUserNameValid(username)) {\n            loginFormState.setValue(new LoginFormState(R.string.login_invalid_username, null));\n        } else if (!isPasswordValid(password)) {\n            loginFormState.setValue(new LoginFormState(null, R.string.login_invalid_password));\n        } else {\n            loginFormState.setValue(new LoginFormState(true));\n        }\n    }\n\n    // A placeholder username validation check\n    private boolean isUserNameValid(String username) {\n        return username != null &amp;&amp; !username.equals(&quot;&quot;);\n    }\n\n    // A placeholder password validation check\n    private boolean isPasswordValid(String password) {\n        return password != null &amp;&amp; password.trim().length() == 6;\n    }\n\n    /**\n     * Used for callback\n     */\n    public void onSuccess(User user) {\n        loginResult.setValue(new LoginResult(user));\n    }\n\n    public void onError(String message) {\n        loginResult.setValue(new LoginResult(message));\n    }\n\n    /**\n     * Recover password\n     */\n    LiveData&lt;RecoverFormState&gt; getRecoverFormState() {\n        return recoverFormState;\n    }\n\n    public void recoverDataChanged(String useremail) {\n\n        if (!isEmailValid(useremail)) {\n            recoverFormState.setValue(new RecoverFormState(R.string.recover_invalid_email));\n        }else {\n            recoverFormState.setValue(new RecoverFormState(true));\n        }\n    }\n\n    LiveData&lt;DefaultResponseResult&gt; getDefaultResult() {\n        return defaultResult;\n    }\n\n    public void recoverPwd(Activity activity, LoginViewModel loginViewModel, String email){\n        loginRepository.recoverPwd(activity, loginViewModel,  email);\n    }\n\n    private boolean isEmailValid(String email){\n        if (email == null || email.trim().isEmpty())\n           return false;\n\n        if (email.contains(&quot;@&quot;))\n            return Patterns.EMAIL_ADDRESS.matcher(email).matches();\n        else\n            return false;\n    }\n\n\n    /**\n     * Used for callback\n     */\n    public void defaultReturnOnSuccess(DefaultResponse defaultResponse) {\n        defaultResult.setValue(new DefaultResponseResult(defaultResponse, &quot;&quot;));\n    }\n\n    public void defaultReturnOnError(String message) {\n        defaultResult.setValue(new DefaultResponseResult(message));\n    }\n}\n</code></pre>\n<p>LoginViewModelFactory.java</p>\n<pre><code>package com.timo.ecocloudpaciente.ui.login;\nimport androidx.lifecycle.ViewModel;\nimport androidx.lifecycle.ViewModelProvider;\nimport androidx.annotation.NonNull;\n\nimport com.timo.ecocloudpaciente.data.LoginDataSource;\nimport com.timo.ecocloudpaciente.data.LoginRepository;\npublic class LoginViewModelFactory implements ViewModelProvider.Factory {\n    @NonNull\n    @Override\n    @SuppressWarnings(&quot;unchecked&quot;)\n    public &lt;T extends ViewModel&gt; T create(@NonNull Class&lt;T&gt; modelClass) {\n        if (modelClass.isAssignableFrom(LoginViewModel.class)) {\n            return (T) new LoginViewModel(LoginRepository.getInstance(new LoginDataSource()));\n        } else {\n            throw new IllegalArgumentException(&quot;Unknown ViewModel class&quot;);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3146547,"reputation":508,"user_id":2660928,"accept_rate":82,"display_name":"Marco"},"score":2,"creation_date":1405412487,"post_id":24753177,"comment_id":38404411,"body_markdown":"You could use String.split(&quot;.&quot;)","body":"You could use String.split(&quot;.&quot;)"},{"owner":{"account_id":1640947,"reputation":28880,"user_id":1513384,"accept_rate":96,"display_name":"ntalbs"},"score":0,"creation_date":1405412572,"post_id":24753177,"comment_id":38404452,"body_markdown":"What do you expect when the given number is `1.1`, `1.01`, `1.001`, etc?","body":"What do you expect when the given number is <code>1.1</code>, <code>1.01</code>, <code>1.001</code>, etc?"},{"owner":{"account_id":1417953,"reputation":45793,"user_id":1343161,"accept_rate":100,"display_name":"Keppil"},"score":3,"creation_date":1405412651,"post_id":24753177,"comment_id":38404502,"body_markdown":"@Marco: You mean `String.split(&quot;\\\\.&quot;)`","body":"@Marco: You mean <code>String.split(&quot;\\\\.&quot;)</code>"},{"owner":{"account_id":2179398,"reputation":2049,"user_id":1929230,"accept_rate":91,"display_name":"Johnny Chen"},"score":0,"creation_date":1405412706,"post_id":24753177,"comment_id":38404538,"body_markdown":"@ntalbs there&#39;s no such numbers in my case .Just 0.x or 1.x or 0.xx or 1.xx and  xx &gt; 10","body":"@ntalbs there&#39;s no such numbers in my case .Just 0.x or 1.x or 0.xx or 1.xx and  xx &gt; 10"},{"owner":{"account_id":3146547,"reputation":508,"user_id":2660928,"accept_rate":82,"display_name":"Marco"},"score":0,"creation_date":1405413048,"post_id":24753177,"comment_id":38404753,"body_markdown":"@Keppil: You&#39;re right!","body":"@Keppil: You&#39;re right!"}],"answers":[{"tags":[],"owner":{"account_id":1417953,"reputation":45793,"user_id":1343161,"accept_rate":100,"display_name":"Keppil"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1405412538,"creation_date":1405412538,"answer_id":24753258,"question_id":24753177,"body_markdown":"To get the decimal part as an `int` is not really following any standards, so you are stuck with your special solution for that. Getting the value before the decimal point can be simplified to a simple cast though:  \r\n\r\n    double d = 1.9;\r\n    int a, b;\r\n    String dString = Double.toString(d);\r\n    String bString = dString.substring(2);\r\n    a = (int) d;\r\n    b = Integer.parseInt(bString);\r\n\r\nNote that the `substring()` and `parseInt()` fails if the number is 10 or bigger though. You might want to change the `substring()` call to something like:  \r\n\r\n    String bString = dString.split(&quot;\\\\.&quot;)[1];\r\n","title":"How to split a double number by dot into two decimal numbers in Java?","body":"<p>To get the decimal part as an <code>int</code> is not really following any standards, so you are stuck with your special solution for that. Getting the value before the decimal point can be simplified to a simple cast though:  </p>\n\n<pre><code>double d = 1.9;\nint a, b;\nString dString = Double.toString(d);\nString bString = dString.substring(2);\na = (int) d;\nb = Integer.parseInt(bString);\n</code></pre>\n\n<p>Note that the <code>substring()</code> and <code>parseInt()</code> fails if the number is 10 or bigger though. You might want to change the <code>substring()</code> call to something like:  </p>\n\n<pre><code>String bString = dString.split(\"\\\\.\")[1];\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1405412781,"post_id":24753306,"comment_id":38404587,"body_markdown":"you gotta make `a` first","body":"you gotta make <code>a</code> first"},{"owner":{"account_id":2242865,"reputation":709,"user_id":1976942,"accept_rate":39,"display_name":"tudoricc"},"score":0,"creation_date":1405412821,"post_id":24753306,"comment_id":38404614,"body_markdown":"I did make the &quot;a&quot; first","body":"I did make the &quot;a&quot; first"},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1405412853,"post_id":24753306,"comment_id":38404636,"body_markdown":"where is it initialized?","body":"where is it initialized?"},{"owner":{"account_id":2242865,"reputation":709,"user_id":1976942,"accept_rate":39,"display_name":"tudoricc"},"score":0,"creation_date":1405412926,"post_id":24753306,"comment_id":38404683,"body_markdown":"Thank you for that,as I was writing the code in I deleted more than I should have.Sorry again","body":"Thank you for that,as I was writing the code in I deleted more than I should have.Sorry again"},{"owner":{"account_id":3146547,"reputation":508,"user_id":2660928,"accept_rate":82,"display_name":"Marco"},"score":0,"creation_date":1405413310,"post_id":24753306,"comment_id":38404887,"body_markdown":"This is a not very elegant way of putting a double in a String variable","body":"This is a not very elegant way of putting a double in a String variable"},{"owner":{"account_id":2242865,"reputation":709,"user_id":1976942,"accept_rate":39,"display_name":"tudoricc"},"score":0,"creation_date":1405413439,"post_id":24753306,"comment_id":38404962,"body_markdown":"I do realise this but as I said it was the first thing that came to mind","body":"I do realise this but as I said it was the first thing that came to mind"},{"owner":{"account_id":971196,"reputation":24175,"user_id":993742,"display_name":"isnot2bad"},"score":0,"creation_date":1405414890,"post_id":24753306,"comment_id":38405748,"body_markdown":"Try `String a = Double.toString(x)`!","body":"Try <code>String a = Double.toString(x)</code>!"}],"tags":[],"owner":{"account_id":2242865,"reputation":709,"user_id":1976942,"accept_rate":39,"display_name":"tudoricc"},"comment_count":7,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1405412699,"creation_date":1405412699,"answer_id":24753306,"question_id":24753177,"body_markdown":"I tried a split on &quot;.&quot; and then just parse the string for integers. \r\n  \r\n            String a=&quot;&quot;;\r\n            double x = 2.4;\r\n            a=x+&quot;&quot;;\r\n           \tString [] v =a.split(&quot;\\\\.&quot;);\r\n        \tint before = Integer.parseInt(v[0]);\r\n        \tint after = Integer.parseInt(v[1]);","title":"How to split a double number by dot into two decimal numbers in Java?","body":"<p>I tried a split on \".\" and then just parse the string for integers. </p>\n\n<pre><code>        String a=\"\";\n        double x = 2.4;\n        a=x+\"\";\n        String [] v =a.split(\"\\\\.\");\n        int before = Integer.parseInt(v[0]);\n        int after = Integer.parseInt(v[1]);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2242865,"reputation":709,"user_id":1976942,"accept_rate":39,"display_name":"tudoricc"},"score":0,"creation_date":1405412783,"post_id":24753320,"comment_id":38404591,"body_markdown":"Make sure that you split on &quot;.&quot; WITH &quot;\\\\.&quot;","body":"Make sure that you split on &quot;.&quot; WITH &quot;\\\\.&quot;"}],"tags":[],"owner":{"account_id":347665,"reputation":4574,"user_id":681929,"accept_rate":58,"display_name":"nobalG"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1405413184,"creation_date":1405412749,"answer_id":24753320,"question_id":24753177,"body_markdown":"    double num=12.5;\r\n    String str=Double.toString(num);\r\n    String strarray[]=str.split(&quot;\\\\.&quot;);\r\nNow `strarray[0]` will be holding 12, and `strarray[1]` will be having 5.You can convert them into  integers by writing following code:\r\n\r\n    int num1=Integer.parseInt(strarray[0]);\r\n    int num2=Integer.parseInt(strarray[1]);\r\n\r\n","title":"How to split a double number by dot into two decimal numbers in Java?","body":"<pre><code>double num=12.5;\nString str=Double.toString(num);\nString strarray[]=str.split(\"\\\\.\");\n</code></pre>\n\n<p>Now <code>strarray[0]</code> will be holding 12, and <code>strarray[1]</code> will be having 5.You can convert them into  integers by writing following code:</p>\n\n<pre><code>int num1=Integer.parseInt(strarray[0]);\nint num2=Integer.parseInt(strarray[1]);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7980045,"reputation":651,"user_id":6021740,"display_name":"Kidus Tekeste"},"score":0,"creation_date":1581080689,"post_id":24753336,"comment_id":106320410,"body_markdown":"@Rucbira.. I am not clear with the `split(&quot;\\\\.&quot;)` part.. isn&#39;t the `split(&quot;.&quot;)` part enough?","body":"@Rucbira.. I am not clear with the <code>split(&quot;\\\\.&quot;)</code> part.. isn&#39;t the <code>split(&quot;.&quot;)</code> part enough?"},{"owner":{"account_id":11961012,"reputation":7343,"user_id":8752062,"display_name":"frianH"},"score":1,"creation_date":1602741130,"post_id":24753336,"comment_id":113816928,"body_markdown":"@KidusTekeste see : https://stackoverflow.com/questions/14833008/java-string-split-with-dot. *You need to escape the dot if you want to split on a literal dot*","body":"@KidusTekeste see : <a href=\"https://stackoverflow.com/questions/14833008/java-string-split-with-dot\" title=\"java string split with dot\">stackoverflow.com/questions/14833008/java-string-split-with-&zwnj;&#8203;dot</a>. <i>You need to escape the dot if you want to split on a literal dot</i>"},{"owner":{"account_id":7980045,"reputation":651,"user_id":6021740,"display_name":"Kidus Tekeste"},"score":1,"creation_date":1602743488,"post_id":24753336,"comment_id":113817660,"body_markdown":"Yes.. I have checked it.. got it now. Thanks @frianH","body":"Yes.. I have checked it.. got it now. Thanks @frianH"}],"tags":[],"owner":{"account_id":2102673,"reputation":35121,"user_id":1869846,"accept_rate":56,"display_name":"Ruchira Gayan Ranaweera"},"comment_count":3,"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1405415233,"creation_date":1405412792,"answer_id":24753336,"question_id":24753177,"body_markdown":"You can try this way too\r\n\r\n        double val=1.9;\r\n        String[] arr=String.valueOf(val).split(&quot;\\\\.&quot;);\r\n        int[] intArr=new int[2];\r\n        intArr[0]=Integer.parseInt(arr[0]); // 1\r\n        intArr[1]=Integer.parseInt(arr[1]); // 9\r\n\r\n","title":"How to split a double number by dot into two decimal numbers in Java?","body":"<p>You can try this way too</p>\n\n<pre><code>    double val=1.9;\n    String[] arr=String.valueOf(val).split(\"\\\\.\");\n    int[] intArr=new int[2];\n    intArr[0]=Integer.parseInt(arr[0]); // 1\n    intArr[1]=Integer.parseInt(arr[1]); // 9\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2806546,"reputation":375,"user_id":2413676,"accept_rate":100,"display_name":"JamesA"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1405412896,"creation_date":1405412896,"answer_id":24753370,"question_id":24753177,"body_markdown":"You could treat the double like a string, and split it on the decimal place.\r\n\r\n\t\t double d = 13454.92345;\r\n\t\t String bob = Double.toString(d);\r\n\t\t String[] convert = bob.split(&quot;\\\\.&quot;);\r\n\r\n\t\t int a = Integer.parseInt(convert[0]);\r\n\t\t int b = Integer.parseInt(convert[1]);\r\n\t\t \r\n\t\t System.out.println(a); // 13454\r\n\t\t System.out.println(b); // 92345","title":"How to split a double number by dot into two decimal numbers in Java?","body":"<p>You could treat the double like a string, and split it on the decimal place.</p>\n\n<pre><code>     double d = 13454.92345;\n     String bob = Double.toString(d);\n     String[] convert = bob.split(\"\\\\.\");\n\n     int a = Integer.parseInt(convert[0]);\n     int b = Integer.parseInt(convert[1]);\n\n     System.out.println(a); // 13454\n     System.out.println(b); // 92345\n</code></pre>\n"},{"tags":[],"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1405413609,"creation_date":1405413063,"answer_id":24753412,"question_id":24753177,"body_markdown":"Here&#39;s a two line version:\r\n\r\n    int a = (int)d;\r\n    int b = Integer.parseInt((d + &quot;&quot;).split(&quot;\\\\.&quot;, 2)[1]).replaceAll(&quot;^$&quot;, &quot;0&quot;));\r\n\r\nThe first part is easy - just cast to `int`, which automatically chops off any decimal part of the number.\r\n\r\nThe second part is easiest with a Strimg approach - split the string version on a dot and use the second part. Note the addition of `&quot;&quot;` which generates a string, and the handling of the edge case of there being no decimal part, where `3` as a double prints as `3.` - if the result is a blank (guaranteed by the second parameter to split) which is then converted to a zero.","title":"How to split a double number by dot into two decimal numbers in Java?","body":"<p>Here's a two line version:</p>\n\n<pre><code>int a = (int)d;\nint b = Integer.parseInt((d + \"\").split(\"\\\\.\", 2)[1]).replaceAll(\"^$\", \"0\"));\n</code></pre>\n\n<p>The first part is easy - just cast to <code>int</code>, which automatically chops off any decimal part of the number.</p>\n\n<p>The second part is easiest with a Strimg approach - split the string version on a dot and use the second part. Note the addition of <code>\"\"</code> which generates a string, and the handling of the edge case of there being no decimal part, where <code>3</code> as a double prints as <code>3.</code> - if the result is a blank (guaranteed by the second parameter to split) which is then converted to a zero.</p>\n"},{"tags":[],"owner":{"account_id":4618313,"reputation":2530,"user_id":3744059,"accept_rate":35,"display_name":"bumbumpaw"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1405416597,"creation_date":1405413235,"answer_id":24753449,"question_id":24753177,"body_markdown":"      double d = 1.9;\r\n      String str = Double.toString(d);\r\n      String strArray[] = str.split(&quot;\\\\.&quot;);\r\n        \r\n      int a = Integer.parseInt(strArray[0]);\r\n      int b = Integer.parseInt(strArray[1]);\r\n      System.out.print(a + &quot; - &quot; + b);\r\n\r\n\r\nTry this. This will work.\r\n","title":"How to split a double number by dot into two decimal numbers in Java?","body":"<pre><code>  double d = 1.9;\n  String str = Double.toString(d);\n  String strArray[] = str.split(\"\\\\.\");\n\n  int a = Integer.parseInt(strArray[0]);\n  int b = Integer.parseInt(strArray[1]);\n  System.out.print(a + \" - \" + b);\n</code></pre>\n\n<p>Try this. This will work.</p>\n"},{"comments":[{"owner":{"account_id":2788370,"reputation":1540,"user_id":2399168,"display_name":"Patrik Oldsberg"},"score":0,"creation_date":1405494126,"post_id":24753865,"comment_id":38443910,"body_markdown":"@JrChen Well, it used to not work, now it&#39;s using `String` instead","body":"@JrChen Well, it used to not work, now it&#39;s using <code>String</code> instead"}],"tags":[],"owner":{"account_id":2788370,"reputation":1540,"user_id":2399168,"display_name":"Patrik Oldsberg"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1405414875,"creation_date":1405414537,"answer_id":24753865,"question_id":24753177,"body_markdown":"This solution should work for almost any length of the fractional part and doesn&#39;t use strings.\r\nFor example the accepted answer doesn&#39;t work for 0.16\r\n\r\n    double d = 123.456\r\n\r\n    long a = (long) d;\r\n    double f = d - a;\r\n\r\n    while (Math.abs((long) f - f) &gt; 0.000001) f *= 10;\r\n\r\n    long b = (long) f;\r\n\r\n    // a = 123\r\n    // b = 345","title":"How to split a double number by dot into two decimal numbers in Java?","body":"<p>This solution should work for almost any length of the fractional part and doesn't use strings.\nFor example the accepted answer doesn't work for 0.16</p>\n\n<pre><code>double d = 123.456\n\nlong a = (long) d;\ndouble f = d - a;\n\nwhile (Math.abs((long) f - f) &gt; 0.000001) f *= 10;\n\nlong b = (long) f;\n\n// a = 123\n// b = 345\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11934289,"reputation":197,"user_id":8733338,"display_name":"Richard Mu&#241;oz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1509037450,"creation_date":1509037450,"answer_id":46959989,"question_id":24753177,"body_markdown":"Here is another approach:\r\n\r\n    double d=1.9;\r\n    int a;\r\n    int b;\r\n\r\n    a = (int) d/10;\r\n    b = (int) d%10;\r\n\r\n    System.out.print(&quot;a&quot;);\r\n    System.out.print(&quot;b&quot;);","title":"How to split a double number by dot into two decimal numbers in Java?","body":"<p>Here is another approach:</p>\n\n<pre><code>double d=1.9;\nint a;\nint b;\n\na = (int) d/10;\nb = (int) d%10;\n\nSystem.out.print(\"a\");\nSystem.out.print(\"b\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15743573,"reputation":1,"user_id":11360225,"display_name":"Loyola"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1555270799,"creation_date":1555270447,"answer_id":55679266,"question_id":24753177,"body_markdown":"        double dub=1234.5678987;//Variable to be manipulated\r\n\t\tlong lon=0; //To store before decimal point.\t\r\n\t\tshort sh=0;//To store after decimal point.\t\r\n\t\tint deci=10000; //to 4 decimal places\t\r\n\t\tlon=(int)dub;// get the integer part of the number stored in long\t\r\n        sh=(short)((dub-(double)lon)*deci);//deci to required decimal places.\r\n        System.out.println(&quot;&quot;+lon+&quot;.&quot;+sh);\r\n","title":"How to split a double number by dot into two decimal numbers in Java?","body":"<pre><code>    double dub=1234.5678987;//Variable to be manipulated\n    long lon=0; //To store before decimal point.    \n    short sh=0;//To store after decimal point.  \n    int deci=10000; //to 4 decimal places   \n    lon=(int)dub;// get the integer part of the number stored in long   \n    sh=(short)((dub-(double)lon)*deci);//deci to required decimal places.\n    System.out.println(\"\"+lon+\".\"+sh);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29517307,"reputation":1,"user_id":22620980,"display_name":"bobo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695816805,"creation_date":1695816805,"answer_id":77187401,"question_id":24753177,"body_markdown":"I have restructured the [answer code provided by @Ruchira Gayan Ranaweera][1] into a Java method that you can easily incorporate into your development:\r\n\r\n    public class Post24753336 {\r\n        public static int[] splitDoubleByDot(double val) {\r\n            String[] arr=String.valueOf(val).split(&quot;\\\\.&quot;);\r\n            int[] intArr=new int[2];\r\n            intArr[0]=Integer.parseInt(arr[0]);\r\n            intArr[1]=Integer.parseInt(arr[1]);\r\n            return intArr;\r\n        }\r\n    }\r\n\r\n[1]: https://stackoverflow.com/a/24753336\r\n\r\n","title":"How to split a double number by dot into two decimal numbers in Java?","body":"<p>I have restructured the <a href=\"https://stackoverflow.com/a/24753336\">answer code provided by @Ruchira Gayan Ranaweera</a> into a Java method that you can easily incorporate into your development:</p>\n<pre><code>public class Post24753336 {\n    public static int[] splitDoubleByDot(double val) {\n        String[] arr=String.valueOf(val).split(&quot;\\\\.&quot;);\n        int[] intArr=new int[2];\n        intArr[0]=Integer.parseInt(arr[0]);\n        intArr[1]=Integer.parseInt(arr[1]);\n        return intArr;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":2179398,"reputation":2049,"user_id":1929230,"accept_rate":91,"display_name":"Johnny Chen"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41914,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":24753336,"answer_count":11,"score":4,"last_activity_date":1695816805,"creation_date":1405412293,"question_id":24753177,"body_markdown":"Trying to split a double number into two decimal parts by dot. Like  this: 1.9 into 1 and 9; 0.16 into  0 and 16;\r\n\r\nHere&#39;s what I do, but seems a little redundant, what&#39;s the best way to do this?\r\n\r\nThe origin number will always be like Just 0.x or 1.x or 0.xx or 1.xx and xx &gt; 10 \r\n\r\n        double d = 1.9;\r\n        int a, b;\r\n        String dString = Double.toString(d);\r\n        String aString = dString.substring(0, 1);\r\n\r\n        String bString = dString.substring(2);\r\n        a = Integer.parseInt(aString);\r\n        b = Integer.parseInt(bString);\r\n\r\n\r\nMy way of doing this seems using to much String conversion,which I don&#39;t think is very efficient. ","title":"How to split a double number by dot into two decimal numbers in Java?","body":"<p>Trying to split a double number into two decimal parts by dot. Like  this: 1.9 into 1 and 9; 0.16 into  0 and 16;</p>\n\n<p>Here's what I do, but seems a little redundant, what's the best way to do this?</p>\n\n<p>The origin number will always be like Just 0.x or 1.x or 0.xx or 1.xx and xx > 10 </p>\n\n<pre><code>    double d = 1.9;\n    int a, b;\n    String dString = Double.toString(d);\n    String aString = dString.substring(0, 1);\n\n    String bString = dString.substring(2);\n    a = Integer.parseInt(aString);\n    b = Integer.parseInt(bString);\n</code></pre>\n\n<p>My way of doing this seems using to much String conversion,which I don't think is very efficient. </p>\n"},{"tags":["java","android","database","rx-java","android-room"],"answers":[{"tags":[],"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695816614,"creation_date":1695816614,"answer_id":77187381,"question_id":77187221,"body_markdown":"The problem is in your `InspectionAndItemsDB` class, in the `@Relation` annotation, you should change it to:\r\n\r\n```java\r\npublic class InspectionAndItemsDB {\r\n    @Embedded\r\n    public VehicleInspectionDB inspection;\r\n    \r\n    @Relation(\r\n        parentColumn = &quot;inspectionDBId&quot;,  // Primary key (parent entity)\r\n        entityColumn = &quot;inspectionDBId&quot;   // Foreign key (child entity)\r\n    )\r\n    public List&lt;VehicleInspectionItemDB&gt; items;\r\n}\r\n```\r\n\r\nThe value of `entityColumn` will be matched against the value defined in `parentColumn()`, so you should consider this. See: [*Relation Docs*][1]\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/arch/persistence/room/Relation#entitycolumn","title":"Room request, one to many relathionship","body":"<p>The problem is in your <code>InspectionAndItemsDB</code> class, in the <code>@Relation</code> annotation, you should change it to:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class InspectionAndItemsDB {\n    @Embedded\n    public VehicleInspectionDB inspection;\n    \n    @Relation(\n        parentColumn = &quot;inspectionDBId&quot;,  // Primary key (parent entity)\n        entityColumn = &quot;inspectionDBId&quot;   // Foreign key (child entity)\n    )\n    public List&lt;VehicleInspectionItemDB&gt; items;\n}\n</code></pre>\n<p>The value of <code>entityColumn</code> will be matched against the value defined in <code>parentColumn()</code>, so you should consider this. See: <a href=\"https://developer.android.com/reference/android/arch/persistence/room/Relation#entitycolumn\" rel=\"nofollow noreferrer\"><em>Relation Docs</em></a></p>\n"}],"owner":{"account_id":11159969,"reputation":393,"user_id":8914395,"display_name":"Olegario L&#243;pez"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77187381,"answer_count":1,"score":0,"last_activity_date":1695816614,"creation_date":1695815308,"question_id":77187221,"body_markdown":"\r\n \r\n\r\nGiven\r\n=====\r\n\r\nI have two classes, &#39;**inspection**&#39; and &#39;**items**,&#39; which have a one-to-many relationship, meaning one inspection can have many items, and each item is associated with a single inspection.&quot;\r\n\r\nand I&#39;m storing them as tables in a ROOM local database, they look like this:\r\n\r\n\r\n \r\n\r\nInspection\r\n----------\r\n\r\n \r\n\r\n    @Entity(tableName = &quot;vehicle_inspection&quot;)\r\n    public class VehicleInspectionDB {\r\n    \r\n    @PrimaryKey(autoGenerate = true)\r\n    private long inspectionDBId;\r\n    ...\r\n    ....\r\n\r\n## Item ##\r\n\r\n    @Entity(tableName = &quot;inspection_item&quot;)\r\n    public class VehicleInspectionItemDB {\r\n\r\n\r\n    @PrimaryKey(autoGenerate = true)\r\n    private long itemDBId;\r\n    private long inspectionDBId;\r\n    ...\r\n    ....\r\n\r\n\r\nI created this class in order to retrieve the inspections and the items associated:\r\n## Inspection with items class ##\r\n\r\n    public class InspectionAndItemsDB {\r\n    @Embedded\r\n    public VehicleInspectionDB inspection;\r\n    @Relation(\r\n    parentColumn = &quot;inspectionDBId&quot;,\r\n    entityColumn = &quot;itemDBId&quot;\r\n    )\r\n    public List&lt;VehicleInspectionItemDB&gt; items;\r\n    }\r\n\r\n\r\nand this Dao method:\r\n   \r\n\r\n## DAO method ##\r\n\r\n\r\n    @Transaction\r\n    @Query(&quot;SELECT * FROM vehicle_inspection&quot;)\r\n    Flowable&lt;List&lt;InspectionAndItemsDB&gt;&gt; getInspectionAndItems();\r\n\r\n \r\n\r\nThe problem\r\n===========\r\n\r\n \r\nwhen I use that method above get inspection and items\r\nI&#39;m receiving only one child per parent it is only one item in the list per inspection instead of a list containing all the items associated with that inspection.\r\n\r\nWhat&#39;s the issue? I&#39;ve followed this tutorial by a google member:\r\nhttps://medium.com/androiddevelopers/database-relations-with-room-544ab95e4542\r\n\r\nThanks!\r\n\r\n\r\n\r\n","title":"Room request, one to many relathionship","body":"<h1>Given</h1>\n<p>I have two classes, '<strong>inspection</strong>' and '<strong>items</strong>,' which have a one-to-many relationship, meaning one inspection can have many items, and each item is associated with a single inspection.&quot;</p>\n<p>and I'm storing them as tables in a ROOM local database, they look like this:</p>\n<h2>Inspection</h2>\n<pre><code>@Entity(tableName = &quot;vehicle_inspection&quot;)\npublic class VehicleInspectionDB {\n\n@PrimaryKey(autoGenerate = true)\nprivate long inspectionDBId;\n...\n....\n</code></pre>\n<h2>Item</h2>\n<pre><code>@Entity(tableName = &quot;inspection_item&quot;)\npublic class VehicleInspectionItemDB {\n\n\n@PrimaryKey(autoGenerate = true)\nprivate long itemDBId;\nprivate long inspectionDBId;\n...\n....\n</code></pre>\n<p>I created this class in order to retrieve the inspections and the items associated:</p>\n<h2>Inspection with items class</h2>\n<pre><code>public class InspectionAndItemsDB {\n@Embedded\npublic VehicleInspectionDB inspection;\n@Relation(\nparentColumn = &quot;inspectionDBId&quot;,\nentityColumn = &quot;itemDBId&quot;\n)\npublic List&lt;VehicleInspectionItemDB&gt; items;\n}\n</code></pre>\n<p>and this Dao method:</p>\n<h2>DAO method</h2>\n<pre><code>@Transaction\n@Query(&quot;SELECT * FROM vehicle_inspection&quot;)\nFlowable&lt;List&lt;InspectionAndItemsDB&gt;&gt; getInspectionAndItems();\n</code></pre>\n<h1>The problem</h1>\n<p>when I use that method above get inspection and items\nI'm receiving only one child per parent it is only one item in the list per inspection instead of a list containing all the items associated with that inspection.</p>\n<p>What's the issue? I've followed this tutorial by a google member:\n<a href=\"https://medium.com/androiddevelopers/database-relations-with-room-544ab95e4542\" rel=\"nofollow noreferrer\">https://medium.com/androiddevelopers/database-relations-with-room-544ab95e4542</a></p>\n<p>Thanks!</p>\n"},{"tags":["java","groovy"],"answers":[{"tags":[],"owner":{"account_id":4358,"reputation":168420,"user_id":6509,"display_name":"tim_yates"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695816535,"creation_date":1695816535,"answer_id":77187373,"question_id":77187181,"body_markdown":"You shouldn&#39;t be using `GStringImpl` to get the strings and then join them together yourself...\r\n\r\nJust convert the result to a string:\r\n\r\n```\r\nfinal String scriptStr = &quot;return \\&quot;Hello, $name!\\&quot;;&quot;;\r\nfinal GroovyShell gs = new GroovyShell();\r\nfinal Script script = gs.parse(new StringReader(scriptStr));\r\n\r\nfinal Binding binding = new Binding();\r\nbinding.setProperty(&quot;name&quot;, &quot;world&quot;);\r\nscript.setBinding(binding);\r\n\r\nString result = script.run().toString();\r\n\r\nif (!&quot;Hello, world!&quot;.equals(result)) {\r\n    throw new IllegalStateException(&quot;Unexpected result: &quot; + result);\r\n}\r\nSystem.out.println(&quot;Okay.&quot;);\r\n```","title":"Using variables in an embedded Groovy Script","body":"<p>You shouldn't be using <code>GStringImpl</code> to get the strings and then join them together yourself...</p>\n<p>Just convert the result to a string:</p>\n<pre><code>final String scriptStr = &quot;return \\&quot;Hello, $name!\\&quot;;&quot;;\nfinal GroovyShell gs = new GroovyShell();\nfinal Script script = gs.parse(new StringReader(scriptStr));\n\nfinal Binding binding = new Binding();\nbinding.setProperty(&quot;name&quot;, &quot;world&quot;);\nscript.setBinding(binding);\n\nString result = script.run().toString();\n\nif (!&quot;Hello, world!&quot;.equals(result)) {\n    throw new IllegalStateException(&quot;Unexpected result: &quot; + result);\n}\nSystem.out.println(&quot;Okay.&quot;);\n</code></pre>\n"}],"owner":{"account_id":1976336,"reputation":883,"user_id":1774051,"accept_rate":40,"display_name":"user1774051"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695816535,"creation_date":1695814883,"question_id":77187181,"body_markdown":"What is wrong with the following code? I&#39;d\r\nexpect it to write out the word &quot;Okay&quot;. Instead, it throws the\r\nexception &quot;Unexpected result: Hello, !&quot;\r\n\r\n```\r\nfinal String scriptStr = &quot;return \\&quot;Hello, $name!\\&quot;;&quot;;\r\nfinal GroovyShell gs = new GroovyShell();\r\nfinal Script script = gs.parse(new StringReader(scriptStr));\r\n\r\nfinal Binding binding = new Binding();\r\nbinding.setProperty(&quot;name&quot;, &quot;world&quot;);\r\nscript.setBinding(binding);\r\n\r\nfinal GStringImpl gsi = (GStringImpl) script.run();\r\nfinal String[] gsArray = gsi.getStrings();\r\nfinal String result;\r\n\r\nif (gsArray == null || gsArray.length == 0) {\r\n    result = null;\r\n} else {\r\n    result = String.join(&quot;&quot;, gsArray);\r\n}\r\n\r\nif (!&quot;Hello, world!&quot;.equals(result)) {\r\n    throw new IllegalStateException(&quot;Unexpected result: &quot; + result);\r\n}\r\nSystem.out.println(&quot;Okay.&quot;);\r\n```\r\n","title":"Using variables in an embedded Groovy Script","body":"<p>What is wrong with the following code? I'd\nexpect it to write out the word &quot;Okay&quot;. Instead, it throws the\nexception &quot;Unexpected result: Hello, !&quot;</p>\n<pre><code>final String scriptStr = &quot;return \\&quot;Hello, $name!\\&quot;;&quot;;\nfinal GroovyShell gs = new GroovyShell();\nfinal Script script = gs.parse(new StringReader(scriptStr));\n\nfinal Binding binding = new Binding();\nbinding.setProperty(&quot;name&quot;, &quot;world&quot;);\nscript.setBinding(binding);\n\nfinal GStringImpl gsi = (GStringImpl) script.run();\nfinal String[] gsArray = gsi.getStrings();\nfinal String result;\n\nif (gsArray == null || gsArray.length == 0) {\n    result = null;\n} else {\n    result = String.join(&quot;&quot;, gsArray);\n}\n\nif (!&quot;Hello, world!&quot;.equals(result)) {\n    throw new IllegalStateException(&quot;Unexpected result: &quot; + result);\n}\nSystem.out.println(&quot;Okay.&quot;);\n</code></pre>\n"},{"tags":["java","javafx","fxml"],"comments":[{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":4,"creation_date":1695768517,"post_id":77183796,"comment_id":136067956,"body_markdown":"It is not the event that is null, it is the field you have named `ResponseField` (which occurs because you defined the field as static - see the duplicate).  Additionally, please follow [naming conventions](https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html), lest you confuse readers and yourself.  Also, always provide [full stack traces](https://stackoverflow.com/questions/3988788/what-is-a-stack-trace-and-how-can-i-use-it-to-debug-my-application-errors).","body":"It is not the event that is null, it is the field you have named <code>ResponseField</code> (which occurs because you defined the field as static - see the duplicate).  Additionally, please follow <a href=\"https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html\" rel=\"nofollow noreferrer\">naming conventions</a>, lest you confuse readers and yourself.  Also, always provide <a href=\"https://stackoverflow.com/questions/3988788/what-is-a-stack-trace-and-how-can-i-use-it-to-debug-my-application-errors\">full stack traces</a>."}],"owner":{"account_id":29524698,"reputation":1,"user_id":22626651,"display_name":"FL_Programmer"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1695768352,"answer_count":0,"score":0,"last_activity_date":1695816441,"creation_date":1695767938,"question_id":77183796,"body_markdown":"```\r\n@FXML private static TextField ResponseField;\r\n```\r\nThis is the function the &quot;ResponseField&quot; element is calling\r\n\r\n```\r\npublic void GoToResultScreen() throws Exception {\r\n        if (Character.toUpperCase(ResponseField.getText().charAt(0)) == &#39;N&#39;) {\r\n            Parent root = FXMLLoader.load(getClass().getResource(&quot;WinOrLoseScreen.fxml&quot;));\r\n            Scene scene = new Scene(root);\r\n            Stage stage = (Stage) GuideLabel.getScene().getWindow();\r\n\r\n            stage.setTitle(&quot;Hacking Terminal&quot;);\r\n            stage.setScene(scene);\r\n            stage.show();\r\n        } else if (Character.toUpperCase(ResponseField.getText().charAt(0)) == &#39;Y&#39;) {\r\n            NewCard();\r\n            TotalLabel.setText(&quot;Your total is now &quot;+UserTotal);\r\n        } else {\r\n            GuideLabel.setText(&quot;Type Y or N&quot;);\r\n        }\r\n    }\r\n```\r\n\r\n```\r\n\r\n&lt;?import javafx.scene.control.*?&gt;\r\n&lt;?import javafx.scene.layout.*?&gt;\r\n&lt;?import javafx.scene.text.*?&gt;\r\n\r\n&lt;AnchorPane prefHeight=&quot;400.0&quot; prefWidth=&quot;600.0&quot; stylesheets=&quot;@style.css&quot; xmlns=&quot;http://javafx.com/javafx/17.0.2-ea&quot;\r\n            xmlns:fx=&quot;http://javafx.com/fxml/1&quot; fx:controller=&quot;game.blackjack.GameController&quot;&gt;\r\n   &lt;children&gt;\r\n      &lt;TextField fx:id=&quot;ResponseField&quot; layoutX=&quot;60.0&quot; layoutY=&quot;95.0&quot; prefHeight=&quot;178.0&quot; prefWidth=&quot;211.0&quot; textAlignment=&quot;CENTER&quot;&gt;\r\n         &lt;font&gt;\r\n            &lt;Font name=&quot;Fira Code Light&quot; size=&quot;64.0&quot; /&gt;\r\n         &lt;/font&gt;\r\n      &lt;/Label&gt;\r\n      &lt;Label fx:id=&quot;TotalLabel1&quot; layoutX=&quot;330.0&quot; layoutY=&quot;140.0&quot; prefHeight=&quot;81.0&quot; prefWidth=&quot;211.0&quot; textAlignment=&quot;CENTER&quot;&gt;\r\n         &lt;font&gt;\r\n            &lt;Font name=&quot;Fira Code Light&quot; size=&quot;64.0&quot; /&gt;\r\n         &lt;/font&gt;\r\n      &lt;/Label&gt;\r\n   &lt;/children&gt;\r\n&lt;/AnchorPane&gt;\r\n```\r\nNote: TextField elemnt with `fx:id=&quot;ResponseField&quot;`\r\nWhen I run it, I get an error because ResponseField is null\r\nMy Application class is \r\n\r\n```\r\npackage game.blackjack;\r\n\r\nimport javafx.application.Application;\r\nimport javafx.fxml.FXMLLoader;\r\nimport javafx.scene.Parent;\r\nimport javafx.scene.Scene;\r\nimport javafx.stage.Stage;\r\n\r\nimport java.io.IOException;\r\npublic class App extends Application {\r\n    @Override\r\n    public void start(Stage stage) throws IOException {\r\n        Parent root = FXMLLoader.load(getClass().getResource(&quot;Screen.fxml&quot;));\r\n        Scene scene = new Scene(root);\r\n        stage.setTitle(&quot;Hacking Terminal&quot;);\r\n        stage.setScene(scene);\r\n        stage.show();\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        launch();\r\n    }\r\n}\r\n```\r\n\r\n\r\nI ran it, and I got \r\n\r\n```\r\nCaused by: java.lang.NullPointerException: Cannot invoke &quot;javafx.scene.control.TextField.getText()&quot; because &quot;game.blackjack.GameController.ResponseField&quot; is null\r\n```\r\n\r\nI have tried checking I spelled everything right and if It is the right fxml file and controller, but it is still null.","title":"Why is the FXML event I&#39;m using in my controller null?","body":"<pre><code>@FXML private static TextField ResponseField;\n</code></pre>\n<p>This is the function the &quot;ResponseField&quot; element is calling</p>\n<pre><code>public void GoToResultScreen() throws Exception {\n        if (Character.toUpperCase(ResponseField.getText().charAt(0)) == 'N') {\n            Parent root = FXMLLoader.load(getClass().getResource(&quot;WinOrLoseScreen.fxml&quot;));\n            Scene scene = new Scene(root);\n            Stage stage = (Stage) GuideLabel.getScene().getWindow();\n\n            stage.setTitle(&quot;Hacking Terminal&quot;);\n            stage.setScene(scene);\n            stage.show();\n        } else if (Character.toUpperCase(ResponseField.getText().charAt(0)) == 'Y') {\n            NewCard();\n            TotalLabel.setText(&quot;Your total is now &quot;+UserTotal);\n        } else {\n            GuideLabel.setText(&quot;Type Y or N&quot;);\n        }\n    }\n</code></pre>\n<pre><code>\n&lt;?import javafx.scene.control.*?&gt;\n&lt;?import javafx.scene.layout.*?&gt;\n&lt;?import javafx.scene.text.*?&gt;\n\n&lt;AnchorPane prefHeight=&quot;400.0&quot; prefWidth=&quot;600.0&quot; stylesheets=&quot;@style.css&quot; xmlns=&quot;http://javafx.com/javafx/17.0.2-ea&quot;\n            xmlns:fx=&quot;http://javafx.com/fxml/1&quot; fx:controller=&quot;game.blackjack.GameController&quot;&gt;\n   &lt;children&gt;\n      &lt;TextField fx:id=&quot;ResponseField&quot; layoutX=&quot;60.0&quot; layoutY=&quot;95.0&quot; prefHeight=&quot;178.0&quot; prefWidth=&quot;211.0&quot; textAlignment=&quot;CENTER&quot;&gt;\n         &lt;font&gt;\n            &lt;Font name=&quot;Fira Code Light&quot; size=&quot;64.0&quot; /&gt;\n         &lt;/font&gt;\n      &lt;/Label&gt;\n      &lt;Label fx:id=&quot;TotalLabel1&quot; layoutX=&quot;330.0&quot; layoutY=&quot;140.0&quot; prefHeight=&quot;81.0&quot; prefWidth=&quot;211.0&quot; textAlignment=&quot;CENTER&quot;&gt;\n         &lt;font&gt;\n            &lt;Font name=&quot;Fira Code Light&quot; size=&quot;64.0&quot; /&gt;\n         &lt;/font&gt;\n      &lt;/Label&gt;\n   &lt;/children&gt;\n&lt;/AnchorPane&gt;\n</code></pre>\n<p>Note: TextField elemnt with <code>fx:id=&quot;ResponseField&quot;</code>\nWhen I run it, I get an error because ResponseField is null\nMy Application class is</p>\n<pre><code>package game.blackjack;\n\nimport javafx.application.Application;\nimport javafx.fxml.FXMLLoader;\nimport javafx.scene.Parent;\nimport javafx.scene.Scene;\nimport javafx.stage.Stage;\n\nimport java.io.IOException;\npublic class App extends Application {\n    @Override\n    public void start(Stage stage) throws IOException {\n        Parent root = FXMLLoader.load(getClass().getResource(&quot;Screen.fxml&quot;));\n        Scene scene = new Scene(root);\n        stage.setTitle(&quot;Hacking Terminal&quot;);\n        stage.setScene(scene);\n        stage.show();\n    }\n\n    public static void main(String[] args) {\n        launch();\n    }\n}\n</code></pre>\n<p>I ran it, and I got</p>\n<pre><code>Caused by: java.lang.NullPointerException: Cannot invoke &quot;javafx.scene.control.TextField.getText()&quot; because &quot;game.blackjack.GameController.ResponseField&quot; is null\n</code></pre>\n<p>I have tried checking I spelled everything right and if It is the right fxml file and controller, but it is still null.</p>\n"},{"tags":["java","reflection","static","private","final"],"comments":[{"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"score":4,"creation_date":1279732076,"post_id":3301635,"comment_id":3420423,"body_markdown":"Such a bad idea.  I&#39;d try to get the source and recompile (or even decompile/recompile) instead.","body":"Such a bad idea.  I&#39;d try to get the source and recompile (or even decompile/recompile) instead."},{"owner":{"account_id":76511,"reputation":44893,"user_id":218978,"accept_rate":100,"display_name":"irreputable"},"score":0,"creation_date":1279740559,"post_id":3301635,"comment_id":3421890,"body_markdown":"System.out is a public static final field, but it can be changed too.","body":"System.out is a public static final field, but it can be changed too."},{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":21,"creation_date":1279740752,"post_id":3301635,"comment_id":3421922,"body_markdown":"@irreputable `System.out/in/err` are so &quot;special&quot; that the Java Memory Model has to make special mention of them. They are not examples which should be followed.","body":"@irreputable <code>System.out&#47;in&#47;err</code> are so &quot;special&quot; that the Java Memory Model has to make special mention of them. They are not examples which should be followed."},{"owner":{"account_id":171067,"reputation":6573,"user_id":398237,"accept_rate":82,"display_name":"fixitagain"},"score":8,"creation_date":1279873896,"post_id":3301635,"comment_id":3437598,"body_markdown":"well my point ws to find a hack in the between to have my app working until the lib responsible make the change at the next release so i don&#39;t need to hack anymore...","body":"well my point ws to find a hack in the between to have my app working until the lib responsible make the change at the next release so i don&#39;t need to hack anymore..."},{"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"score":6,"creation_date":1581029941,"post_id":3301635,"comment_id":106303647,"body_markdown":"@Bill K from ten years ago:  It would be GREAT to recompile it but it&#39;s on a deployed system and I just need to patch it until we can update the deployed app!","body":"@Bill K from ten years ago:  It would be GREAT to recompile it but it&#39;s on a deployed system and I just need to patch it until we can update the deployed app!"},{"owner":{"account_id":192003,"reputation":30422,"user_id":432903,"accept_rate":64,"display_name":"prayagupa"},"score":0,"creation_date":1665167993,"post_id":3301635,"comment_id":130644694,"body_markdown":"For Java 17 [Get declared fields of java.lang.reflect.Fields in jdk12](https://stackoverflow.com/a/71465198/432903)","body":"For Java 17 <a href=\"https://stackoverflow.com/a/71465198/432903\">Get declared fields of java.lang.reflect.Fields in jdk12</a>"}],"answers":[{"comments":[{"owner":{"account_id":97818,"reputation":114824,"user_id":265143,"accept_rate":72,"display_name":"P&#233;ter T&#246;r&#246;k"},"score":6,"creation_date":1279730830,"post_id":3301664,"comment_id":3420182,"body_markdown":"Moreover, `final` has a special role in multithreaded execution - changing `final` values would break the Java memory model too.","body":"Moreover, <code>final</code> has a special role in multithreaded execution - changing <code>final</code> values would break the Java memory model too."},{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":2,"creation_date":1279740896,"post_id":3301664,"comment_id":3421942,"body_markdown":"And a field not declared `final` should not be declared `static`.","body":"And a field not declared <code>final</code> should not be declared <code>static</code>."},{"owner":{"account_id":50980,"reputation":8853,"user_id":152208,"display_name":"bcat"},"score":2,"creation_date":1279802247,"post_id":3301664,"comment_id":3428596,"body_markdown":"@Tom: In general that&#39;s probably true, but I wouldn&#39;t outlaw *all* static mutable variables.","body":"@Tom: In general that&#39;s probably true, but I wouldn&#39;t outlaw <i>all</i> static mutable variables."},{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":0,"creation_date":1279808214,"post_id":3301664,"comment_id":3429753,"body_markdown":"@bcat It&#39;s almost always wrong. You might get away with it for a cache (or you might not).","body":"@bcat It&#39;s almost always wrong. You might get away with it for a cache (or you might not)."},{"owner":{"account_id":29404,"reputation":45520,"user_id":79439,"accept_rate":62,"display_name":"thecoop"},"score":0,"creation_date":1279817398,"post_id":3301664,"comment_id":3431405,"body_markdown":"@Tom what about a Singleton using a `getInstance()` method that assigns the instance to a static field? You&#39;ll also need to reassign a mutable static field when it&#39;s a `WeakReference&lt;T&gt;` and the original reference target has disappeared.","body":"@Tom what about a Singleton using a <code>getInstance()</code> method that assigns the instance to a static field? You&#39;ll also need to reassign a mutable static field when it&#39;s a <code>WeakReference&lt;T&gt;</code> and the original reference target has disappeared."},{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":1,"creation_date":1279820346,"post_id":3301664,"comment_id":3431925,"body_markdown":"@thecoop It is well known that singletons (a.k.a. globaltons) are evil.","body":"@thecoop It is well known that singletons (a.k.a. globaltons) are evil."},{"owner":{"account_id":137113,"reputation":11637,"user_id":341091,"accept_rate":75,"display_name":"Martin"},"score":7,"creation_date":1307708193,"post_id":3301664,"comment_id":7368134,"body_markdown":"@Tom: Did you ever read up why singletons are evil? I did! Now I know that they evil only in Java. And only because of the availabilty of a user defined class loader. And ever since I know all this and I don&#180;t use user defined class loader I use singletons without regret. And so does Scala where singleton are a first class language feature\n—\nThat singletons are evil is is a well known **false myth**.","body":"@Tom: Did you ever read up why singletons are evil? I did! Now I know that they evil only in Java. And only because of the availabilty of a user defined class loader. And ever since I know all this and I don&#180;t use user defined class loader I use singletons without regret. And so does Scala where singleton are a first class language feature — That singletons are evil is is a well known <b>false myth</b>."},{"owner":{"account_id":137113,"reputation":11637,"user_id":341091,"accept_rate":75,"display_name":"Martin"},"score":0,"creation_date":1307804064,"post_id":3301664,"comment_id":7383144,"body_markdown":"@Tom: I have 20 years of experience in Software development. I learned a dozen and more programming languages. **I researched the details about Singletons in Java**. So what make you think your are right?","body":"@Tom: I have 20 years of experience in Software development. I learned a dozen and more programming languages. <b>I researched the details about Singletons in Java</b>. So what make you think your are right?"},{"owner":{"account_id":184204,"reputation":2362,"user_id":420097,"accept_rate":74,"display_name":"Vincent"},"score":1,"creation_date":1355266981,"post_id":3301664,"comment_id":19033496,"body_markdown":"The final modifier is not intended to protect a field from change. It just indicates, that the programmer of the class doesn&#39;t recommend changing this field. Same with accessors. They are only intended to show a user of a class what methods/fields are safe to use.","body":"The final modifier is not intended to protect a field from change. It just indicates, that the programmer of the class doesn&#39;t recommend changing this field. Same with accessors. They are only intended to show a user of a class what methods/fields are safe to use."},{"owner":{"account_id":1532531,"reputation":36089,"user_id":1429387,"accept_rate":63,"display_name":"naXa stands with Ukraine"},"score":0,"creation_date":1421159292,"post_id":3301664,"comment_id":44245629,"body_markdown":"@Vincent, isn&#39;t it contradict to the [@P&#233;ter T&#246;r&#246;k&#39;s comment](http://stackoverflow.com/questions/3301635/change-private-static-final-field-using-java-reflection#comment3420182_3301664)?","body":"@Vincent, isn&#39;t it contradict to the <a href=\"http://stackoverflow.com/questions/3301635/change-private-static-final-field-using-java-reflection#comment3420182_3301664\">@P&#233;ter T&#246;r&#246;k&#39;s comment</a>?"},{"owner":{"account_id":1230575,"reputation":16783,"user_id":1195273,"accept_rate":81,"display_name":"crush"},"score":4,"creation_date":1463673610,"post_id":3301664,"comment_id":62176013,"body_markdown":"@Martin I know that your comment is old, and perhaps your views have changed by now, but I thought I&#39;d just add this: Singletons are evil for reasons that have nothing to do with Java. They add ***hidden complexity*** to your code. Additionally, they can make it impossible to unit test without also knowing that *n* singletons must also be configured first. They are the antithesis of dependency injection. Your team might make the decision that the pitfalls of having *hidden complexity* don&#39;t outweigh the convenience of Singletons, but many teams take the opposite stance for good reason.","body":"@Martin I know that your comment is old, and perhaps your views have changed by now, but I thought I&#39;d just add this: Singletons are evil for reasons that have nothing to do with Java. They add <b><i>hidden complexity</i></b> to your code. Additionally, they can make it impossible to unit test without also knowing that <i>n</i> singletons must also be configured first. They are the antithesis of dependency injection. Your team might make the decision that the pitfalls of having <i>hidden complexity</i> don&#39;t outweigh the convenience of Singletons, but many teams take the opposite stance for good reason."},{"owner":{"account_id":12321033,"reputation":8782,"user_id":8990329,"accept_rate":70,"display_name":"Some Name"},"score":0,"creation_date":1566162589,"post_id":3301664,"comment_id":101559852,"body_markdown":"No, it does not break the JVM. JVM allows `static final` fields to be modified by methods of the same class.","body":"No, it does not break the JVM. JVM allows <code>static final</code> fields to be modified by methods of the same class."}],"tags":[],"owner":{"account_id":29404,"reputation":45520,"user_id":79439,"accept_rate":62,"display_name":"thecoop"},"comment_count":12,"down_vote_count":15,"up_vote_count":9,"is_accepted":false,"score":-6,"last_activity_date":1279730335,"creation_date":1279730335,"answer_id":3301664,"question_id":3301635,"body_markdown":"The whole point of a `final` field is that it cannot be reassigned once set. The JVM uses this guarentee to maintain consistency in various places (eg inner classes referencing outer variables). So no. Being able to do so would break the JVM!\r\n\r\nThe solution is not to declare it `final` in the first place.","title":"Change private static final field using Java reflection","body":"<p>The whole point of a <code>final</code> field is that it cannot be reassigned once set. The JVM uses this guarentee to maintain consistency in various places (eg inner classes referencing outer variables). So no. Being able to do so would break the JVM!</p>\n\n<p>The solution is not to declare it <code>final</code> in the first place.</p>\n"},{"comments":[{"owner":{"account_id":19878,"reputation":877,"user_id":46975,"accept_rate":100,"display_name":"HalfBrian"},"score":6,"creation_date":1279732890,"post_id":3301720,"comment_id":3420583,"body_markdown":"When I saw this: `System.out.format(&quot;Everything is %s&quot;, false); // &quot;Everything is true&quot;` I thought you were screwing with us, then I read the rest of your code, but it brings up a readability question, some things your just accept as true (or in this case, false).","body":"When I saw this: <code>System.out.format(&quot;Everything is %s&quot;, false); &#47;&#47; &quot;Everything is true&quot;</code> I thought you were screwing with us, then I read the rest of your code, but it brings up a readability question, some things your just accept as true (or in this case, false)."},{"owner":{"account_id":102991,"reputation":378292,"user_id":276101,"accept_rate":67,"display_name":"polygenelubricants"},"score":53,"creation_date":1279733075,"post_id":3301720,"comment_id":3420611,"body_markdown":"@thecoop, @HalfBrian: there is no doubt that this is _EXTREMELY EVIL_, but this example was chosen by design. My answer only shows how, in some circumstances, this is possible. The most disgusting example that I can think of is deliberate chosen with the hope that perhaps people would be instantly disgusted by instead of falling in love with the technique.","body":"@thecoop, @HalfBrian: there is no doubt that this is <i>EXTREMELY EVIL</i>, but this example was chosen by design. My answer only shows how, in some circumstances, this is possible. The most disgusting example that I can think of is deliberate chosen with the hope that perhaps people would be instantly disgusted by instead of falling in love with the technique."},{"owner":{"account_id":20130,"reputation":279855,"user_id":47773,"accept_rate":52,"display_name":"Matthew Flaschen"},"score":74,"creation_date":1300826154,"post_id":3301720,"comment_id":6104483,"body_markdown":"Yo, dawg.  I heard you like reflection, so I reflected on field so you can reflect while you reflect.","body":"Yo, dawg.  I heard you like reflection, so I reflected on field so you can reflect while you reflect."},{"owner":{"account_id":297431,"reputation":2248,"user_id":602956,"accept_rate":96,"display_name":"Yashima"},"score":0,"creation_date":1350397592,"post_id":3301720,"comment_id":17500421,"body_markdown":"I want to use this for testing by replacing a singleton with a mock object without compromising the singleton in production code.","body":"I want to use this for testing by replacing a singleton with a mock object without compromising the singleton in production code."},{"owner":{"account_id":1028915,"reputation":2348,"user_id":1037626,"accept_rate":20,"display_name":"mgaert"},"score":12,"creation_date":1360933883,"post_id":3301720,"comment_id":20889956,"body_markdown":"Note that Boolean.FALSE is **not** private.Does this really work with &quot;private final static&quot; members?","body":"Note that Boolean.FALSE is <b>not</b> private.Does this really work with &quot;private final static&quot; members?"},{"owner":{"account_id":151394,"reputation":52351,"user_id":365237,"accept_rate":96,"display_name":"eis"},"score":20,"creation_date":1376465339,"post_id":3301720,"comment_id":26717742,"body_markdown":"@mgaert it does, but you have to use `getDeclaredField()` instead of `getField()` for target class","body":"@mgaert it does, but you have to use <code>getDeclaredField()</code> instead of <code>getField()</code> for target class"},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":15,"creation_date":1386008139,"post_id":3301720,"comment_id":30350617,"body_markdown":"+1. For those who will try to change something like `final String myConstant = &quot;x&quot;;` and will fail: remember that compile time constants will be inlined by compiler so when you will write code like `System.out.println(myConstant);` it will be compiled as `System.out.println(&quot;x&quot;);` because compiler knows value of constant at compile time. To get rid of this problem you need to initialize your constants at runtime like `final String myConstant = new String(&quot;x&quot;);`. Also in case of primitives like `final int myField = 11` use `final int myField = new Integer(11);` or `final Integer myField = 11;`","body":"+1. For those who will try to change something like <code>final String myConstant = &quot;x&quot;;</code> and will fail: remember that compile time constants will be inlined by compiler so when you will write code like <code>System.out.println(myConstant);</code> it will be compiled as <code>System.out.println(&quot;x&quot;);</code> because compiler knows value of constant at compile time. To get rid of this problem you need to initialize your constants at runtime like <code>final String myConstant = new String(&quot;x&quot;);</code>. Also in case of primitives like <code>final int myField = 11</code> use <code>final int myField = new Integer(11);</code> or <code>final Integer myField = 11;</code>"},{"owner":{"account_id":51323,"reputation":637,"user_id":153339,"display_name":"Matt"},"score":4,"creation_date":1398030002,"post_id":3301720,"comment_id":35465424,"body_markdown":"Note that you can check the `SecurityManager` beforehand to see if you&#39;re allowed to do this: `final SecurityManager sm = System.getSecurityManager(); if (sm != null) { sm.checkPermission(new java.lang.reflect.ReflectPermission(&quot;suppressAccessChecks&quot;)); }`","body":"Note that you can check the <code>SecurityManager</code> beforehand to see if you&#39;re allowed to do this: <code>final SecurityManager sm = System.getSecurityManager(); if (sm != null) { sm.checkPermission(new java.lang.reflect.ReflectPermission(&quot;suppressAccessChecks&quot;))&zwnj;&#8203;; }</code>"},{"owner":{"account_id":69303,"reputation":74254,"user_id":201725,"accept_rate":72,"display_name":"Jan Hudec"},"score":0,"creation_date":1403634497,"post_id":3301720,"comment_id":37730639,"body_markdown":"Appears it does not work with `static final` fields of primitive types even if they are initialized with something that is _not_ compile time constant (property access in my case).","body":"Appears it does not work with <code>static final</code> fields of primitive types even if they are initialized with something that is <i>not</i> compile time constant (property access in my case)."},{"owner":{"account_id":2852470,"reputation":1189,"user_id":2475176,"display_name":"Maxr1998"},"score":0,"creation_date":1435332252,"post_id":3301720,"comment_id":50172186,"body_markdown":"I tried to use your code one Android, but modifiers said NoSuchField..\nAndroid uses Java 1.7 I believe.","body":"I tried to use your code one Android, but modifiers said NoSuchField.. Android uses Java 1.7 I believe."},{"owner":{"account_id":2852470,"reputation":1189,"user_id":2475176,"display_name":"Maxr1998"},"score":7,"creation_date":1435333743,"post_id":3301720,"comment_id":50173183,"body_markdown":"Never mind, looking at the Android source, I found out, that the &quot;modifiers&quot; field is &quot;accessFlags&quot; on Android.","body":"Never mind, looking at the Android source, I found out, that the &quot;modifiers&quot; field is &quot;accessFlags&quot; on Android."},{"owner":{"account_id":3357849,"reputation":5771,"user_id":2820379,"accept_rate":81,"display_name":"ben"},"score":0,"creation_date":1464957830,"post_id":3301720,"comment_id":62712012,"body_markdown":"Why this business with modifying bitmasks?.setAccessible(true) turns of all language checks anyways right?","body":"Why this business with modifying bitmasks?.setAccessible(true) turns of all language checks anyways right?"},{"owner":{"account_id":1503831,"reputation":1088,"user_id":1407698,"accept_rate":57,"display_name":"ieXcept"},"score":0,"creation_date":1466527285,"post_id":3301720,"comment_id":63348864,"body_markdown":"What is `&quot;modifiers&quot;`? Does it some kind of system field that is generated automatically by compiler? How this one is  related to `field` method parameter (value of which we are trying to change)?","body":"What is <code>&quot;modifiers&quot;</code>? Does it some kind of system field that is generated automatically by compiler? How this one is  related to <code>field</code> method parameter (value of which we are trying to change)?"},{"owner":{"account_id":238697,"reputation":1454,"user_id":507761,"accept_rate":100,"display_name":"Matthew Read"},"score":1,"creation_date":1481928052,"post_id":3301720,"comment_id":69586578,"body_markdown":"@ieXcept `modifiers` is a private member of the `Field` class.  It is set to the appropriate bit pattern for the modifiers of the field represented by that particular `field` instance.","body":"@ieXcept <code>modifiers</code> is a private member of the <code>Field</code> class.  It is set to the appropriate bit pattern for the modifiers of the field represented by that particular <code>field</code> instance."},{"owner":{"account_id":388668,"reputation":2288,"user_id":747739,"accept_rate":67,"display_name":"Phil"},"score":1,"creation_date":1504522593,"post_id":3301720,"comment_id":79031086,"body_markdown":"Great for having a program changing its own environment (or, at least, the return value of System.getenv()).  Why the environment is immutable is a question I am not wise enough to know the answer to.","body":"Great for having a program changing its own environment (or, at least, the return value of System.getenv()).  Why the environment is immutable is a question I am not wise enough to know the answer to."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1518174207,"post_id":3301720,"comment_id":84407113,"body_markdown":"Note that JLS &#167;17.5.3 is referring to non-`static` `final` fields. Subsequent modification of `static` `final` fields is not foreseen at all and hence, entirely off specification. Anything can happen, including no effect at all or a complete crash of the JVM…","body":"Note that JLS &#167;17.5.3 is referring to non-<code>static</code> <code>final</code> fields. Subsequent modification of <code>static</code> <code>final</code> fields is not foreseen at all and hence, entirely off specification. Anything can happen, including no effect at all or a complete crash of the JVM…"},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":3,"creation_date":1520230088,"post_id":3301720,"comment_id":85213834,"body_markdown":"Another caveat is that you can&#39;t read the Field before removing the modifier or it gets cached: https://stackoverflow.com/q/49102935/1553851","body":"Another caveat is that you can&#39;t read the Field before removing the modifier or it gets cached: <a href=\"https://stackoverflow.com/q/49102935/1553851\">stackoverflow.com/q/49102935/1553851</a>"},{"owner":{"account_id":1374097,"reputation":564,"user_id":1308453,"accept_rate":100,"display_name":"Philip Rego"},"score":0,"creation_date":1548260451,"post_id":3301720,"comment_id":95480941,"body_markdown":"Doesnt make sense why u got 2 fields","body":"Doesnt make sense why u got 2 fields"},{"owner":{"account_id":1193459,"reputation":3989,"user_id":1165724,"display_name":"swpalmer"},"score":10,"creation_date":1556223830,"post_id":3301720,"comment_id":98375521,"body_markdown":"In Java 12 this is no longer allowed. See bug 8210496\nhttps://bugs.java.com/bugdatabase/view_bug.do?bug_id=8210496\nhttps://hg.openjdk.java.net/jdk-updates/jdk12u/rev/f55a4bc91ef4","body":"In Java 12 this is no longer allowed. See bug 8210496 <a href=\"https://bugs.java.com/bugdatabase/view_bug.do?bug_id=8210496\" rel=\"nofollow noreferrer\">bugs.java.com/bugdatabase/view_bug.do?bug_id=8210496</a> <a href=\"https://hg.openjdk.java.net/jdk-updates/jdk12u/rev/f55a4bc91ef4\" rel=\"nofollow noreferrer\">hg.openjdk.java.net/jdk-updates/jdk12u/rev/f55a4bc91ef4</a>"},{"owner":{"account_id":7223563,"reputation":507,"user_id":6000593,"accept_rate":17,"display_name":"bubu0321"},"score":0,"creation_date":1568836676,"post_id":3301720,"comment_id":102405742,"body_markdown":"Does this works for the final static field of a static class ? I try but looks like the field of the static class was not changed as expected.","body":"Does this works for the final static field of a static class ? I try but looks like the field of the static class was not changed as expected."},{"owner":{"account_id":158578,"reputation":3109,"user_id":377320,"accept_rate":25,"display_name":"Martin Vysny"},"score":1,"creation_date":1571301133,"post_id":3301720,"comment_id":103197452,"body_markdown":"Evil and working, thank you &gt;:-D Unfortunately does not work on Java 13.","body":"Evil and working, thank you &gt;:-D Unfortunately does not work on Java 13."},{"owner":{"account_id":2270024,"reputation":1657,"user_id":1997707,"accept_rate":80,"display_name":"John Mercier"},"score":0,"creation_date":1585934655,"post_id":3301720,"comment_id":107949137,"body_markdown":"This worked for setting a `static final` logger to a mocked logger in a test. Thank you!","body":"This worked for setting a <code>static final</code> logger to a mocked logger in a test. Thank you!"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1586940387,"post_id":3301720,"comment_id":108310471,"body_markdown":"Mind (again) that “JLS 17.5.3 Subsequent Modification of Final Fields” applies to *instance fields* only. It describes the problems which may happen when you “change the final fields of an object after construction” whereas changing a `static final` field after the class initialization is not even foreseen by the specification. That’s why for a non-static `final` field a simple `setAccessible(true)` is enough to change it whereas changing a `static final` field requires deeper hacks which the JDK developers try to disable. Even if you find another work-around, it’ll break the next version.","body":"Mind (again) that “JLS 17.5.3 Subsequent Modification of Final Fields” applies to <i>instance fields</i> only. It describes the problems which may happen when you “change the final fields of an object after construction” whereas changing a <code>static final</code> field after the class initialization is not even foreseen by the specification. That’s why for a non-static <code>final</code> field a simple <code>setAccessible(true)</code> is enough to change it whereas changing a <code>static final</code> field requires deeper hacks which the JDK developers try to disable. Even if you find another work-around, it’ll break the next version."},{"owner":{"account_id":2917069,"reputation":1304,"user_id":2500027,"accept_rate":62,"display_name":"Suchith"},"score":0,"creation_date":1609931681,"post_id":3301720,"comment_id":115973116,"body_markdown":"As mentioned in Ans&quot;Final field is initialized to a compile-time constant in the field declaration, changes to the final field may not be observed&quot; -any way to work on this when the fields is inbuilt @Holger","body":"As mentioned in Ans&quot;Final field is initialized to a compile-time constant in the field declaration, changes to the final field may not be observed&quot; -any way to work on this when the fields is inbuilt @Holger"},{"owner":{"account_id":3568486,"reputation":4276,"user_id":2979435,"accept_rate":42,"display_name":"deFreitas"},"score":7,"creation_date":1610915643,"post_id":3301720,"comment_id":116277440,"body_markdown":"@swpalmer Yep, not working in Java 12 anymore, check [this answer for the new](https://stackoverflow.com/a/56043252/2979435) trick","body":"@swpalmer Yep, not working in Java 12 anymore, check <a href=\"https://stackoverflow.com/a/56043252/2979435\">this answer for the new</a> trick"},{"owner":{"account_id":21731,"reputation":9045,"user_id":53069,"accept_rate":77,"display_name":"sproketboy"},"score":1,"creation_date":1617569155,"post_id":3301720,"comment_id":118335428,"body_markdown":"java.lang.NoSuchFieldException: modifiers","body":"java.lang.NoSuchFieldException: modifiers"},{"owner":{"account_id":7380647,"reputation":876,"user_id":5617478,"display_name":"Subhajit"},"score":0,"creation_date":1627353865,"post_id":3301720,"comment_id":121127366,"body_markdown":"I am using this solution in my testing and I want to tear down the changes done to the variable. How can I revert (put back final modifier back) setFinalStatic method changes once the testing is done ?","body":"I am using this solution in my testing and I want to tear down the changes done to the variable. How can I revert (put back final modifier back) setFinalStatic method changes once the testing is done ?"},{"owner":{"account_id":7421543,"reputation":2874,"user_id":5645656,"accept_rate":100,"display_name":"Cardinal System"},"score":0,"creation_date":1631551799,"post_id":3301720,"comment_id":122247247,"body_markdown":"So if I wanted to make the field final again, would I just omit the tilde `~`?","body":"So if I wanted to make the field final again, would I just omit the tilde <code>~</code>?"},{"owner":{"account_id":1413237,"reputation":17260,"user_id":1339429,"accept_rate":89,"display_name":"JeanValjean"},"score":3,"creation_date":1642675007,"post_id":3301720,"comment_id":125136278,"body_markdown":"I wonder how this could work on JDK 17. I think `modifiers` is not accessible anymore.","body":"I wonder how this could work on JDK 17. I think <code>modifiers</code> is not accessible anymore."},{"owner":{"account_id":5215471,"reputation":4961,"user_id":4170582,"accept_rate":91,"display_name":"Tarik"},"score":1,"creation_date":1678218545,"post_id":3301720,"comment_id":133489866,"body_markdown":"not working on 17","body":"not working on 17"}],"tags":[],"owner":{"account_id":102991,"reputation":378292,"user_id":276101,"accept_rate":67,"display_name":"polygenelubricants"},"comment_count":30,"down_vote_count":4,"up_vote_count":1017,"is_accepted":true,"score":1013,"last_activity_date":1530858477,"creation_date":1279730771,"answer_id":3301720,"question_id":3301635,"body_markdown":"Assuming no `SecurityManager` is preventing you from doing this, you can use `setAccessible` to get around `private` and resetting the modifier to get rid of `final`, and actually modify a `private static final` field.\n\nHere&#39;s an example:\n\n    import java.lang.reflect.*;\n    \n    public class EverythingIsTrue {\n       static void setFinalStatic(Field field, Object newValue) throws Exception {\n          field.setAccessible(true);\n    \n          Field modifiersField = Field.class.getDeclaredField(&quot;modifiers&quot;);\n          modifiersField.setAccessible(true);\n          modifiersField.setInt(field, field.getModifiers() &amp; ~Modifier.FINAL);\n    \n          field.set(null, newValue);\n       }\n       public static void main(String args[]) throws Exception {      \n          setFinalStatic(Boolean.class.getField(&quot;FALSE&quot;), true);\n    \n          System.out.format(&quot;Everything is %s&quot;, false); // &quot;Everything is true&quot;\n       }\n    }\n\nAssuming no `SecurityException` is thrown, the above code prints `&quot;Everything is true&quot;`.\n\nWhat&#39;s actually done here is as follows:\n\n* The primitive `boolean` values `true` and `false` in `main` are autoboxed to reference type `Boolean` &quot;constants&quot; `Boolean.TRUE` and `Boolean.FALSE`\n* Reflection is used to change the [`public static final Boolean.FALSE`](http://download.oracle.com/docs/cd/E17409_01/javase/6/docs/api/java/lang/Boolean.html#FALSE) to refer to the `Boolean` referred to by `Boolean.TRUE`\n* As a result, subsequently whenever a `false` is autoboxed to `Boolean.FALSE`, it refers to the same `Boolean` as the one refered to by `Boolean.TRUE`\n* Everything that was `&quot;false&quot;` now is `&quot;true&quot;`\n\n### Related questions\n\n* [Using reflection to change `static final File.separatorChar` for unit testing](https://stackoverflow.com/questions/2474017/using-reflection-to-change-static-final-file-separatorchar-for-unit-testing/2474242#2474242)\n* [How to limit setAccessible to only “legitimate” uses?](https://stackoverflow.com/questions/2481862/how-to-limit-setaccessible-to-only-legitimate-uses)\n  * Has examples of messing with `Integer`&#39;s cache, mutating a `String`, etc\n\n---\n\n### Caveats\n\nExtreme care should be taken whenever you do something like this. It may not work because a `SecurityManager` may be present, but even if it doesn&#39;t, depending on usage pattern, it may or may not work.\n\n&gt; [JLS 17.5.3 Subsequent Modification of Final Fields](http://java.sun.com/docs/books/jls/third_edition/html/memory.html#17.5.3)\n&gt;\n&gt; In some cases, such as deserialization, the system will need to change the `final` fields of an object after construction. `final` fields can be changed via reflection and other implementation dependent means. The only pattern in which this has reasonable semantics is one in which an object is constructed and then the `final` fields of the object are updated. The object should not be made visible to other threads, nor should the `final` fields be read, until all updates to the `final` fields of the object are complete. Freezes of a `final` field occur both at the end of the constructor in which the `final` field is set, and immediately after each modification of a `final` field via reflection or other special mechanism.\n&gt;\n&gt; Even then, there are a number of complications. If a `final` field is initialized to a compile-time constant in the field declaration, changes to the `final` field may not be observed, since uses of that `final` field are replaced at compile time with the compile-time constant.\n&gt;\n&gt; Another problem is that the specification allows aggressive optimization of `final` fields. Within a thread, it is permissible to reorder reads of a `final` field with those modifications of a final field that do not take place in the constructor.\n\n### See also\n\n* [JLS 15.28 Constant Expression](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.28)\n   * It&#39;s unlikely that this technique works with a primitive `private static final boolean`, because it&#39;s inlineable as a compile-time constant and thus the &quot;new&quot; value may not be observable\n\n---\n\n### Appendix: On the bitwise manipulation\n\nEssentially,\n\n    field.getModifiers() &amp; ~Modifier.FINAL\n\nturns off the bit corresponding to `Modifier.FINAL` from `field.getModifiers()`. `&amp;` is the bitwise-and, and `~` is the bitwise-complement.\n\n### See also\n\n* [Wikipedia/Bitwise operation](http://en.wikipedia.org/wiki/Bitwise_operations)\n\n---\n\n### Remember Constant Expressions\n\nStill not being able to solve this?, have fallen onto depression like I did for it? Does your code looks like this?\n\n    public class A {\n        private final String myVar = &quot;Some Value&quot;;\n    }\n\nReading the comments on this answer, specially the one by @Pshemo, it reminded me that [Constant Expressions](https://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.28) are handled different so it will be **impossible** to modify it. Hence you will need to change your code to look like this:\n\n    public class A {\n        private final String myVar;\n\n        private A() {\n            myVar = &quot;Some Value&quot;;\n        }\n    }\n\n*if you are not the owner of the class... I feel you!*\n\nFor more details about why this behavior [read this](https://stackoverflow.com/questions/17506329/java-final-field-compile-time-constant-expression)?","title":"Change private static final field using Java reflection","body":"<p>Assuming no <code>SecurityManager</code> is preventing you from doing this, you can use <code>setAccessible</code> to get around <code>private</code> and resetting the modifier to get rid of <code>final</code>, and actually modify a <code>private static final</code> field.</p>\n<p>Here's an example:</p>\n<pre><code>import java.lang.reflect.*;\n\npublic class EverythingIsTrue {\n   static void setFinalStatic(Field field, Object newValue) throws Exception {\n      field.setAccessible(true);\n\n      Field modifiersField = Field.class.getDeclaredField(&quot;modifiers&quot;);\n      modifiersField.setAccessible(true);\n      modifiersField.setInt(field, field.getModifiers() &amp; ~Modifier.FINAL);\n\n      field.set(null, newValue);\n   }\n   public static void main(String args[]) throws Exception {      \n      setFinalStatic(Boolean.class.getField(&quot;FALSE&quot;), true);\n\n      System.out.format(&quot;Everything is %s&quot;, false); // &quot;Everything is true&quot;\n   }\n}\n</code></pre>\n<p>Assuming no <code>SecurityException</code> is thrown, the above code prints <code>&quot;Everything is true&quot;</code>.</p>\n<p>What's actually done here is as follows:</p>\n<ul>\n<li>The primitive <code>boolean</code> values <code>true</code> and <code>false</code> in <code>main</code> are autoboxed to reference type <code>Boolean</code> &quot;constants&quot; <code>Boolean.TRUE</code> and <code>Boolean.FALSE</code></li>\n<li>Reflection is used to change the <a href=\"http://download.oracle.com/docs/cd/E17409_01/javase/6/docs/api/java/lang/Boolean.html#FALSE\" rel=\"noreferrer\"><code>public static final Boolean.FALSE</code></a> to refer to the <code>Boolean</code> referred to by <code>Boolean.TRUE</code></li>\n<li>As a result, subsequently whenever a <code>false</code> is autoboxed to <code>Boolean.FALSE</code>, it refers to the same <code>Boolean</code> as the one refered to by <code>Boolean.TRUE</code></li>\n<li>Everything that was <code>&quot;false&quot;</code> now is <code>&quot;true&quot;</code></li>\n</ul>\n<h3>Related questions</h3>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/2474017/using-reflection-to-change-static-final-file-separatorchar-for-unit-testing/2474242#2474242\">Using reflection to change <code>static final File.separatorChar</code> for unit testing</a></li>\n<li><a href=\"https://stackoverflow.com/questions/2481862/how-to-limit-setaccessible-to-only-legitimate-uses\">How to limit setAccessible to only “legitimate” uses?</a>\n<ul>\n<li>Has examples of messing with <code>Integer</code>'s cache, mutating a <code>String</code>, etc</li>\n</ul>\n</li>\n</ul>\n<hr />\n<h3>Caveats</h3>\n<p>Extreme care should be taken whenever you do something like this. It may not work because a <code>SecurityManager</code> may be present, but even if it doesn't, depending on usage pattern, it may or may not work.</p>\n<blockquote>\n<p><a href=\"http://java.sun.com/docs/books/jls/third_edition/html/memory.html#17.5.3\" rel=\"noreferrer\">JLS 17.5.3 Subsequent Modification of Final Fields</a></p>\n<p>In some cases, such as deserialization, the system will need to change the <code>final</code> fields of an object after construction. <code>final</code> fields can be changed via reflection and other implementation dependent means. The only pattern in which this has reasonable semantics is one in which an object is constructed and then the <code>final</code> fields of the object are updated. The object should not be made visible to other threads, nor should the <code>final</code> fields be read, until all updates to the <code>final</code> fields of the object are complete. Freezes of a <code>final</code> field occur both at the end of the constructor in which the <code>final</code> field is set, and immediately after each modification of a <code>final</code> field via reflection or other special mechanism.</p>\n<p>Even then, there are a number of complications. If a <code>final</code> field is initialized to a compile-time constant in the field declaration, changes to the <code>final</code> field may not be observed, since uses of that <code>final</code> field are replaced at compile time with the compile-time constant.</p>\n<p>Another problem is that the specification allows aggressive optimization of <code>final</code> fields. Within a thread, it is permissible to reorder reads of a <code>final</code> field with those modifications of a final field that do not take place in the constructor.</p>\n</blockquote>\n<h3>See also</h3>\n<ul>\n<li><a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.28\" rel=\"noreferrer\">JLS 15.28 Constant Expression</a>\n<ul>\n<li>It's unlikely that this technique works with a primitive <code>private static final boolean</code>, because it's inlineable as a compile-time constant and thus the &quot;new&quot; value may not be observable</li>\n</ul>\n</li>\n</ul>\n<hr />\n<h3>Appendix: On the bitwise manipulation</h3>\n<p>Essentially,</p>\n<pre><code>field.getModifiers() &amp; ~Modifier.FINAL\n</code></pre>\n<p>turns off the bit corresponding to <code>Modifier.FINAL</code> from <code>field.getModifiers()</code>. <code>&amp;</code> is the bitwise-and, and <code>~</code> is the bitwise-complement.</p>\n<h3>See also</h3>\n<ul>\n<li><a href=\"http://en.wikipedia.org/wiki/Bitwise_operations\" rel=\"noreferrer\">Wikipedia/Bitwise operation</a></li>\n</ul>\n<hr />\n<h3>Remember Constant Expressions</h3>\n<p>Still not being able to solve this?, have fallen onto depression like I did for it? Does your code looks like this?</p>\n<pre><code>public class A {\n    private final String myVar = &quot;Some Value&quot;;\n}\n</code></pre>\n<p>Reading the comments on this answer, specially the one by @Pshemo, it reminded me that <a href=\"https://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.28\" rel=\"noreferrer\">Constant Expressions</a> are handled different so it will be <strong>impossible</strong> to modify it. Hence you will need to change your code to look like this:</p>\n<pre><code>public class A {\n    private final String myVar;\n\n    private A() {\n        myVar = &quot;Some Value&quot;;\n    }\n}\n</code></pre>\n<p><em>if you are not the owner of the class... I feel you!</em></p>\n<p>For more details about why this behavior <a href=\"https://stackoverflow.com/questions/17506329/java-final-field-compile-time-constant-expression\">read this</a>?</p>\n"},{"comments":[{"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"score":0,"creation_date":1279731947,"post_id":3301818,"comment_id":3420398,"body_markdown":"That was my first thought, but then I remembered Java compiled at runtime, if you were to reset the bit it would simply recompile with it as a variable instead of a constant.","body":"That was my first thought, but then I remembered Java compiled at runtime, if you were to reset the bit it would simply recompile with it as a variable instead of a constant."},{"owner":{"account_id":2496,"reputation":266244,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"score":4,"creation_date":1279732815,"post_id":3301818,"comment_id":3420573,"body_markdown":"@Bill K - No, this doesn&#39;t refer to JIT compilation. The dependent class files will actually contain the inlined values, and no reference to the independent class. It&#39;s a pretty simple experiment to test; I will add an example.","body":"@Bill K - No, this doesn&#39;t refer to JIT compilation. The dependent class files will actually contain the inlined values, and no reference to the independent class. It&#39;s a pretty simple experiment to test; I will add an example."},{"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"score":1,"creation_date":1279733498,"post_id":3301818,"comment_id":3420695,"body_markdown":"How does this jive with @polygenelubricants &#39;s answer where he redefines Boolean.false?--but you are correct, I&#39;ve seen this behavior when things didn&#39;t recompile correctly.","body":"How does this jive with @polygenelubricants &#39;s answer where he redefines Boolean.false?--but you are correct, I&#39;ve seen this behavior when things didn&#39;t recompile correctly."},{"owner":{"account_id":2496,"reputation":266244,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"score":28,"creation_date":1279735654,"post_id":3301818,"comment_id":3421079,"body_markdown":"@Bill K - in polygenlubricants&#39; answer, the field is not a compile time constant. It&#39;s `public static final Boolean FALSE = new Boolean(false)` not `public static final boolean FALSE = false`","body":"@Bill K - in polygenlubricants&#39; answer, the field is not a compile time constant. It&#39;s <code>public static final Boolean FALSE = new Boolean(false)</code> not <code>public static final boolean FALSE = false</code>"}],"tags":[],"owner":{"account_id":2496,"reputation":266244,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"comment_count":4,"down_vote_count":2,"up_vote_count":69,"is_accepted":false,"score":67,"last_activity_date":1528219928,"creation_date":1279731470,"answer_id":3301818,"question_id":3301635,"body_markdown":"If the value assigned to a `static final boolean` field is known at compile-time, it is a *constant.* Fields of primitive or \r\n`String` type can be compile-time constants. A constant will be inlined in any code that references the field. Since the field is not actually read at runtime, changing it then will have no effect.\r\n\r\nThe [Java language specification][1] says this:\r\n\r\n&gt; If a field is a constant variable\r\n&gt; (&#167;4.12.4), then deleting the keyword\r\n&gt; final or changing its value will not\r\n&gt; break compatibility with pre-existing\r\n&gt; binaries by causing them not to run,\r\n&gt; but **they will not see any new value\r\n&gt; for the usage of the field unless they\r\n&gt; are recompiled.** This is true even if\r\n&gt; the usage itself is not a compile-time\r\n&gt; constant expression (&#167;15.28)\r\n\r\nHere&#39;s an example:\r\n\r\n    class Flag {\r\n      static final boolean FLAG = true;\r\n    }\r\n    \r\n    class Checker {\r\n      public static void main(String... argv) {\r\n        System.out.println(Flag.FLAG);\r\n      }\r\n    }\r\n\r\nIf you decompile `Checker`, you&#39;ll see that instead of referencing `Flag.FLAG`, the code simply pushes a value of 1 (`true`) onto the stack (instruction #3).\r\n\r\n    0:   getstatic       #2; //Field java/lang/System.out:Ljava/io/PrintStream;\r\n    3:   iconst_1\r\n    4:   invokevirtual   #3; //Method java/io/PrintStream.println:(Z)V\r\n    7:   return\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/jls/se10/html/jls-13.html#jls-13.4.9\r\n","title":"Change private static final field using Java reflection","body":"<p>If the value assigned to a <code>static final boolean</code> field is known at compile-time, it is a <em>constant.</em> Fields of primitive or \n<code>String</code> type can be compile-time constants. A constant will be inlined in any code that references the field. Since the field is not actually read at runtime, changing it then will have no effect.</p>\n\n<p>The <a href=\"https://docs.oracle.com/javase/specs/jls/se10/html/jls-13.html#jls-13.4.9\" rel=\"noreferrer\">Java language specification</a> says this:</p>\n\n<blockquote>\n  <p>If a field is a constant variable\n  (§4.12.4), then deleting the keyword\n  final or changing its value will not\n  break compatibility with pre-existing\n  binaries by causing them not to run,\n  but <strong>they will not see any new value\n  for the usage of the field unless they\n  are recompiled.</strong> This is true even if\n  the usage itself is not a compile-time\n  constant expression (§15.28)</p>\n</blockquote>\n\n<p>Here's an example:</p>\n\n<pre><code>class Flag {\n  static final boolean FLAG = true;\n}\n\nclass Checker {\n  public static void main(String... argv) {\n    System.out.println(Flag.FLAG);\n  }\n}\n</code></pre>\n\n<p>If you decompile <code>Checker</code>, you'll see that instead of referencing <code>Flag.FLAG</code>, the code simply pushes a value of 1 (<code>true</code>) onto the stack (instruction #3).</p>\n\n<pre><code>0:   getstatic       #2; //Field java/lang/System.out:Ljava/io/PrintStream;\n3:   iconst_1\n4:   invokevirtual   #3; //Method java/io/PrintStream.println:(Z)V\n7:   return\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2067941,"reputation":201,"user_id":1843087,"display_name":"Stephan Markwalder"},"comment_count":0,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1353525678,"creation_date":1353525678,"answer_id":13500539,"question_id":3301635,"body_markdown":"A little curiosity from the Java Language Specification, chapter 17, section 17.5.4 &quot;Write-protected Fields&quot;:\r\n\r\n&gt; Normally, a field that is final and static may not be modified.\r\n&gt; However, System.in, System.out, and System.err are static final fields\r\n&gt; that, for legacy reasons, must be allowed to be changed by the methods\r\n&gt; System.setIn, System.setOut, and System.setErr. We refer to these\r\n&gt; fields as being write-protected to distinguish them from ordinary\r\n&gt; final fields.\r\n\r\nSource: http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.5.4","title":"Change private static final field using Java reflection","body":"<p>A little curiosity from the Java Language Specification, chapter 17, section 17.5.4 \"Write-protected Fields\":</p>\n\n<blockquote>\n  <p>Normally, a field that is final and static may not be modified.\n  However, System.in, System.out, and System.err are static final fields\n  that, for legacy reasons, must be allowed to be changed by the methods\n  System.setIn, System.setOut, and System.setErr. We refer to these\n  fields as being write-protected to distinguish them from ordinary\n  final fields.</p>\n</blockquote>\n\n<p>Source: <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.5.4\">http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.5.4</a></p>\n"},{"comments":[{"owner":{"account_id":544130,"reputation":625,"user_id":913474,"accept_rate":50,"display_name":"Aaron Iba"},"score":2,"creation_date":1558796273,"post_id":31268945,"comment_id":99222496,"body_markdown":"When I try this (JDK12), I get an exception: &quot;Can not set final ___ field&quot;.","body":"When I try this (JDK12), I get an exception: &quot;Can not set final ___ field&quot;."},{"owner":{"account_id":63479,"reputation":5810,"user_id":187883,"accept_rate":100,"display_name":"NateS"},"score":3,"creation_date":1582047865,"post_id":31268945,"comment_id":106639318,"body_markdown":"@AaronIba It&#39;s no longer allowed in Java 12+.","body":"@AaronIba It&#39;s no longer allowed in Java 12+."}],"tags":[],"owner":{"account_id":214894,"reputation":9047,"user_id":469153,"accept_rate":71,"display_name":"iirekm"},"comment_count":2,"down_vote_count":4,"up_vote_count":14,"is_accepted":false,"score":10,"last_activity_date":1540144076,"creation_date":1436273245,"answer_id":31268945,"question_id":3301635,"body_markdown":"I also integrated it with [joor library][1]\r\n\r\nJust use \r\n\r\n          Reflect.on(yourObject).set(&quot;finalFieldName&quot;, finalFieldValue);\r\n\r\nAlso I fixed an issue with `override` which the previous solutions seem to miss.\r\nHowever use this very carefully, only when there&#39;s no other good solution.\r\n\r\n\r\n  [1]: https://github.com/jOOQ/jOOR","title":"Change private static final field using Java reflection","body":"<p>I also integrated it with <a href=\"https://github.com/jOOQ/jOOR\" rel=\"noreferrer\">joor library</a></p>\n\n<p>Just use </p>\n\n<pre><code>      Reflect.on(yourObject).set(\"finalFieldName\", finalFieldValue);\n</code></pre>\n\n<p>Also I fixed an issue with <code>override</code> which the previous solutions seem to miss.\nHowever use this very carefully, only when there's no other good solution.</p>\n"},{"comments":[{"owner":{"account_id":3412746,"reputation":2578,"user_id":2862341,"display_name":"Ravindra HV"},"score":0,"creation_date":1457170063,"post_id":35792194,"comment_id":59292956,"body_markdown":"Have you seen [this](http://stackoverflow.com/questions/20945049/is-a-java-string-really-immutable) post?","body":"Have you seen <a href=\"http://stackoverflow.com/questions/20945049/is-a-java-string-really-immutable\">this</a> post?"},{"owner":{"account_id":3452279,"reputation":37360,"user_id":2891664,"accept_rate":100,"display_name":"Radiodef"},"score":0,"creation_date":1533252808,"post_id":35792194,"comment_id":90290294,"body_markdown":"This question asks about a `static` final field, so this code doesn&#39;t work. `setAccessible(true)` only works for setting final instance fields.","body":"This question asks about a <code>static</code> final field, so this code doesn&#39;t work. <code>setAccessible(true)</code> only works for setting final instance fields."}],"tags":[],"owner":{"account_id":6293679,"reputation":441,"user_id":5971147,"display_name":"hasskell"},"comment_count":2,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1457083287,"creation_date":1457083287,"answer_id":35792194,"question_id":3301635,"body_markdown":"Just saw that question on one of the interview question, if possible to change final variable with reflection or in runtime. \r\nGot really interested, so that what I became with:\r\n\r\n     /**\r\n     * @author Dmitrijs Lobanovskis\r\n     * @since 03/03/2016.\r\n     */\r\n    public class SomeClass {\r\n    \r\n        private final String str;\r\n    \r\n        SomeClass(){\r\n            this.str = &quot;This is the string that never changes!&quot;;\r\n        }\r\n    \r\n        public String getStr() {\r\n            return str;\r\n        }\r\n    \r\n        @Override\r\n        public String toString() {\r\n            return &quot;Class name: &quot; + getClass() + &quot; Value: &quot; + getStr();\r\n        }\r\n    }\r\n\r\nSome simple class with final String variable. So in the main class \r\nimport java.lang.reflect.Field;\r\n\r\n\r\n    /**\r\n     * @author Dmitrijs Lobanovskis\r\n     * @since 03/03/2016.\r\n     */\r\n    public class Main {\r\n    \r\n    \r\n        public static void main(String[] args) throws Exception{\r\n    \r\n            SomeClass someClass = new SomeClass();\r\n            System.out.println(someClass);\r\n    \r\n            Field field = someClass.getClass().getDeclaredField(&quot;str&quot;);\r\n            field.setAccessible(true);\r\n   \r\n            field.set(someClass, &quot;There you are&quot;);\r\n    \r\n            System.out.println(someClass);\r\n        }\r\n    }\r\nThe output will be as follows:\r\n\r\n    Class name: class SomeClass Value: This is the string that never changes!\r\n    Class name: class SomeClass Value: There you are\r\n    \r\n    Process finished with exit code 0\r\n\r\nAccording to documentation \r\nhttps://docs.oracle.com/javase/tutorial/reflect/member/fieldValues.html","title":"Change private static final field using Java reflection","body":"<p>Just saw that question on one of the interview question, if possible to change final variable with reflection or in runtime. \nGot really interested, so that what I became with:</p>\n\n<pre><code> /**\n * @author Dmitrijs Lobanovskis\n * @since 03/03/2016.\n */\npublic class SomeClass {\n\n    private final String str;\n\n    SomeClass(){\n        this.str = \"This is the string that never changes!\";\n    }\n\n    public String getStr() {\n        return str;\n    }\n\n    @Override\n    public String toString() {\n        return \"Class name: \" + getClass() + \" Value: \" + getStr();\n    }\n}\n</code></pre>\n\n<p>Some simple class with final String variable. So in the main class \nimport java.lang.reflect.Field;</p>\n\n<pre><code>/**\n * @author Dmitrijs Lobanovskis\n * @since 03/03/2016.\n */\npublic class Main {\n\n\n    public static void main(String[] args) throws Exception{\n\n        SomeClass someClass = new SomeClass();\n        System.out.println(someClass);\n\n        Field field = someClass.getClass().getDeclaredField(\"str\");\n        field.setAccessible(true);\n\n        field.set(someClass, \"There you are\");\n\n        System.out.println(someClass);\n    }\n}\n</code></pre>\n\n<p>The output will be as follows:</p>\n\n<pre><code>Class name: class SomeClass Value: This is the string that never changes!\nClass name: class SomeClass Value: There you are\n\nProcess finished with exit code 0\n</code></pre>\n\n<p>According to documentation \n<a href=\"https://docs.oracle.com/javase/tutorial/reflect/member/fieldValues.html\" rel=\"nofollow\">https://docs.oracle.com/javase/tutorial/reflect/member/fieldValues.html</a></p>\n"},{"comments":[{"owner":{"account_id":3000840,"reputation":3290,"user_id":2546381,"accept_rate":75,"display_name":"VanagaS"},"score":0,"creation_date":1586627252,"post_id":43013144,"comment_id":108198888,"body_markdown":"yes @dan1st, you are right! Please check this for a solution:\nhttps://stackoverflow.com/a/56043252/2546381","body":"yes @dan1st, you are right! Please check this for a solution: <a href=\"https://stackoverflow.com/a/56043252/2546381\">stackoverflow.com/a/56043252/2546381</a>"}],"tags":[],"owner":{"account_id":3000840,"reputation":3290,"user_id":2546381,"accept_rate":75,"display_name":"VanagaS"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1490422003,"creation_date":1490422003,"answer_id":43013144,"question_id":3301635,"body_markdown":"In case of presence of a Security Manager, one can make use of `AccessController.doPrivileged` \r\n\r\nTaking the same example from accepted answer above:\r\n\r\n    import java.lang.reflect.*;\r\n\r\n    public class EverythingIsTrue {\r\n        static void setFinalStatic(Field field, Object newValue) throws Exception {\r\n            field.setAccessible(true);\r\n            Field modifiersField = Field.class.getDeclaredField(&quot;modifiers&quot;);\r\n\r\n            // wrapping setAccessible \r\n            AccessController.doPrivileged(new PrivilegedAction() {\r\n                @Override\r\n                public Object run() {\r\n                    modifiersField.setAccessible(true);\r\n                    return null;\r\n                }\r\n            });\r\n\r\n            modifiersField.setInt(field, field.getModifiers() &amp; ~Modifier.FINAL);\r\n            field.set(null, newValue);\r\n        }\r\n\r\n        public static void main(String args[]) throws Exception {      \r\n          setFinalStatic(Boolean.class.getField(&quot;FALSE&quot;), true);\r\n          System.out.format(&quot;Everything is %s&quot;, false); // &quot;Everything is true&quot;\r\n        }\r\n    }\r\n\r\nIn lambda expression, `AccessController.doPrivileged`, can be simplified to:\r\n\r\n    AccessController.doPrivileged((PrivilegedAction) () -&gt; {\r\n        modifiersField.setAccessible(true);\r\n        return null;\r\n    });","title":"Change private static final field using Java reflection","body":"<p>In case of presence of a Security Manager, one can make use of <code>AccessController.doPrivileged</code> </p>\n\n<p>Taking the same example from accepted answer above:</p>\n\n<pre><code>import java.lang.reflect.*;\n\npublic class EverythingIsTrue {\n    static void setFinalStatic(Field field, Object newValue) throws Exception {\n        field.setAccessible(true);\n        Field modifiersField = Field.class.getDeclaredField(\"modifiers\");\n\n        // wrapping setAccessible \n        AccessController.doPrivileged(new PrivilegedAction() {\n            @Override\n            public Object run() {\n                modifiersField.setAccessible(true);\n                return null;\n            }\n        });\n\n        modifiersField.setInt(field, field.getModifiers() &amp; ~Modifier.FINAL);\n        field.set(null, newValue);\n    }\n\n    public static void main(String args[]) throws Exception {      \n      setFinalStatic(Boolean.class.getField(\"FALSE\"), true);\n      System.out.format(\"Everything is %s\", false); // \"Everything is true\"\n    }\n}\n</code></pre>\n\n<p>In lambda expression, <code>AccessController.doPrivileged</code>, can be simplified to:</p>\n\n<pre><code>AccessController.doPrivileged((PrivilegedAction) () -&gt; {\n    modifiersField.setAccessible(true);\n    return null;\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":329814,"reputation":11000,"user_id":653539,"accept_rate":50,"display_name":"Tom&#225;š Z&#225;lusk&#253;"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1494420319,"creation_date":1494420319,"answer_id":43892915,"question_id":3301635,"body_markdown":"The accepted answer worked for me until deployed on JDK 1.8u91.\r\nThen I realized it failed at `field.set(null, newValue);` line when I had read the value via reflection before calling of `setFinalStatic` method.\r\n\r\nProbably the read caused somehow different setup of Java reflection internals (namely `sun.reflect.UnsafeQualifiedStaticObjectFieldAccessorImpl` in failing case instead of `sun.reflect.UnsafeStaticObjectFieldAccessorImpl` in success case) but I didn&#39;t elaborate it further.\r\n\r\nSince I needed to temporarily set new value based on old value and later set old value back, I changed signature little bit to provide computation function externally and also return old value:\r\n\r\n    public static &lt;T&gt; T assignFinalField(Object object, Class&lt;?&gt; clazz, String fieldName, UnaryOperator&lt;T&gt; newValueFunction) {\r\n        Field f = null, ff = null;\r\n        try {\r\n            f = clazz.getDeclaredField(fieldName);\r\n            final int oldM = f.getModifiers();\r\n            final int newM = oldM &amp; ~Modifier.FINAL;\r\n            ff = Field.class.getDeclaredField(&quot;modifiers&quot;);\r\n            ff.setAccessible(true);\r\n            ff.setInt(f,newM);\r\n            f.setAccessible(true);\r\n\r\n            T result = (T)f.get(object);\r\n            T newValue = newValueFunction.apply(result);\r\n\r\n            f.set(object,newValue);\r\n            ff.setInt(f,oldM);\r\n\r\n            return result;\r\n        } ...\r\n\r\nHowever for general case this would not be sufficient.","title":"Change private static final field using Java reflection","body":"<p>The accepted answer worked for me until deployed on JDK 1.8u91.\nThen I realized it failed at <code>field.set(null, newValue);</code> line when I had read the value via reflection before calling of <code>setFinalStatic</code> method.</p>\n\n<p>Probably the read caused somehow different setup of Java reflection internals (namely <code>sun.reflect.UnsafeQualifiedStaticObjectFieldAccessorImpl</code> in failing case instead of <code>sun.reflect.UnsafeStaticObjectFieldAccessorImpl</code> in success case) but I didn't elaborate it further.</p>\n\n<p>Since I needed to temporarily set new value based on old value and later set old value back, I changed signature little bit to provide computation function externally and also return old value:</p>\n\n<pre><code>public static &lt;T&gt; T assignFinalField(Object object, Class&lt;?&gt; clazz, String fieldName, UnaryOperator&lt;T&gt; newValueFunction) {\n    Field f = null, ff = null;\n    try {\n        f = clazz.getDeclaredField(fieldName);\n        final int oldM = f.getModifiers();\n        final int newM = oldM &amp; ~Modifier.FINAL;\n        ff = Field.class.getDeclaredField(\"modifiers\");\n        ff.setAccessible(true);\n        ff.setInt(f,newM);\n        f.setAccessible(true);\n\n        T result = (T)f.get(object);\n        T newValue = newValueFunction.apply(result);\n\n        f.set(object,newValue);\n        ff.setInt(f,oldM);\n\n        return result;\n    } ...\n</code></pre>\n\n<p>However for general case this would not be sufficient.</p>\n"},{"comments":[{"owner":{"account_id":519535,"reputation":2273,"user_id":1303158,"display_name":"Bernie"},"score":0,"creation_date":1509080493,"post_id":44410184,"comment_id":80882874,"body_markdown":"This is a much simpler solution than the currently accepted answer","body":"This is a much simpler solution than the currently accepted answer"},{"owner":{"account_id":2052475,"reputation":7927,"user_id":1831151,"display_name":"eski"},"score":5,"creation_date":1528209254,"post_id":44410184,"comment_id":88414768,"body_markdown":"Is it? Copying one method sounds like a simpler solution than importing an entire library (which is doing the same thing as the method you&#39;d be copying).","body":"Is it? Copying one method sounds like a simpler solution than importing an entire library (which is doing the same thing as the method you&#39;d be copying)."},{"owner":{"account_id":9815032,"reputation":534,"user_id":7271796,"display_name":"MrPowerGamerBR"},"score":3,"creation_date":1580433880,"post_id":44410184,"comment_id":106105550,"body_markdown":"Does not work in Java 12+: `java.lang.UnsupportedOperationException: In java 12+ final cannot be removed.`","body":"Does not work in Java 12+: <code>java.lang.UnsupportedOperationException: In java 12+ final cannot be removed.</code>"}],"tags":[],"owner":{"account_id":3549643,"reputation":2077,"user_id":2964811,"display_name":"nndru"},"comment_count":3,"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1496831559,"creation_date":1496831559,"answer_id":44410184,"question_id":3301635,"body_markdown":"Along with top ranked answer you may use a bit simpliest approach. Apache commons `FieldUtils` class already has particular method that can do the stuff. Please, take a look at `FieldUtils.removeFinalModifier` method. You should specify target field instance and accessibility forcing flag (if you play with non-public fields). More info you can find [here][1].\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/reflect/FieldUtils.html","title":"Change private static final field using Java reflection","body":"<p>Along with top ranked answer you may use a bit simpliest approach. Apache commons <code>FieldUtils</code> class already has particular method that can do the stuff. Please, take a look at <code>FieldUtils.removeFinalModifier</code> method. You should specify target field instance and accessibility forcing flag (if you play with non-public fields). More info you can find <a href=\"https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/reflect/FieldUtils.html\" rel=\"noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":1374097,"reputation":564,"user_id":1308453,"accept_rate":100,"display_name":"Philip Rego"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1548261281,"creation_date":1548261281,"answer_id":54331765,"question_id":3301635,"body_markdown":"If your field is simply private you can do this:\r\n\r\n    MyClass myClass= new MyClass();\r\n    Field aField= myClass.getClass().getDeclaredField(&quot;someField&quot;);\r\n    aField.setAccessible(true);\r\n    aField.set(myClass, &quot;newValueForAString&quot;);\r\n\r\nand throw/handle NoSuchFieldException","title":"Change private static final field using Java reflection","body":"<p>If your field is simply private you can do this:</p>\n\n<pre><code>MyClass myClass= new MyClass();\nField aField= myClass.getClass().getDeclaredField(\"someField\");\naField.setAccessible(true);\naField.set(myClass, \"newValueForAString\");\n</code></pre>\n\n<p>and throw/handle NoSuchFieldException</p>\n"},{"comments":[{"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":4,"creation_date":1602269644,"post_id":57548348,"comment_id":113677844,"body_markdown":"this is just pure `EVIL` and beautiful.","body":"this is just pure <code>EVIL</code> and beautiful."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":4,"creation_date":1609934492,"post_id":57548348,"comment_id":115974358,"body_markdown":"I don’t agree with the “perfectly valid classfile”. The [JVMS&#160;&#167;6.5](https://docs.oracle.com/javase/specs/jvms/se15/html/jvms-6.html#jvms-6.5.putstatic) clearly says: “Otherwise, if the resolved field is final, it must be declared in the current class or interface, **and the instruction must occur in the class or interface initialization method** of the current class or interface. Otherwise, an IllegalAccessError is thrown”. So this is just another case where the implementation blatantly violates the specification and has code spread over multiple places to handle what should have been rejected","body":"I don’t agree with the “perfectly valid classfile”. The <a href=\"https://docs.oracle.com/javase/specs/jvms/se15/html/jvms-6.html#jvms-6.5.putstatic\" rel=\"nofollow noreferrer\">JVMS &#167;6.5</a> clearly says: “Otherwise, if the resolved field is final, it must be declared in the current class or interface, <b>and the instruction must occur in the class or interface initialization method</b> of the current class or interface. Otherwise, an IllegalAccessError is thrown”. So this is just another case where the implementation blatantly violates the specification and has code spread over multiple places to handle what should have been rejected"},{"owner":{"account_id":12321033,"reputation":8782,"user_id":8990329,"accept_rate":70,"display_name":"Some Name"},"score":0,"creation_date":1610532113,"post_id":57548348,"comment_id":116161173,"body_markdown":"@Holger Thanks for the note. I made a correction according to your note to not confuse further readers.","body":"@Holger Thanks for the note. I made a correction according to your note to not confuse further readers."}],"tags":[],"owner":{"account_id":12321033,"reputation":8782,"user_id":8990329,"accept_rate":70,"display_name":"Some Name"},"comment_count":3,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1610532069,"creation_date":1566162179,"answer_id":57548348,"question_id":3301635,"body_markdown":"Even in spite of being `final` a field can be modified outside of static initializer and (at least JVM HotSpot) will execute the bytecode perfectly fine. \r\n\r\nThe problem is that Java compiler does not allow this, but this can be easily bypassed using `objectweb.asm`. Here is p̶e̶r̶f̶e̶c̶t̶l̶y̶ ̶v̶a̶l̶i̶d̶ ̶c̶l̶a̶s̶s̶f̶i̶l̶e̶ *an invalid classfile from the JVMS specification standpoint*, but it passes bytecode verification and then is successfully loaded and initialized under JVM HotSpot OpenJDK12:\r\n\r\n    ClassWriter cw = new ClassWriter(0);\r\n    cw.visit(Opcodes.V1_8, Opcodes.ACC_PUBLIC, &quot;Cl&quot;, null, &quot;java/lang/Object&quot;, null);\r\n    {\r\n        FieldVisitor fv = cw.visitField(Opcodes.ACC_PRIVATE | Opcodes.ACC_STATIC | Opcodes.ACC_FINAL, &quot;fld&quot;, &quot;I&quot;, null, null);\r\n        fv.visitEnd();\r\n    }\r\n    {\r\n        // public void setFinalField1() { //... }\r\n        MethodVisitor mv = cw.visitMethod(Opcodes.ACC_PUBLIC | Opcodes.ACC_STATIC, &quot;setFinalField1&quot;, &quot;()V&quot;, null, null);\r\n        mv.visitMaxs(2, 1);\r\n        mv.visitInsn(Opcodes.ICONST_5);\r\n        mv.visitFieldInsn(Opcodes.PUTSTATIC, &quot;Cl&quot;, &quot;fld&quot;, &quot;I&quot;);\r\n        mv.visitInsn(Opcodes.RETURN);\r\n        mv.visitEnd();\r\n    }\r\n    {\r\n        // public void setFinalField2() { //... }\r\n        MethodVisitor mv = cw.visitMethod(Opcodes.ACC_PUBLIC | Opcodes.ACC_STATIC, &quot;setFinalField2&quot;, &quot;()V&quot;, null, null);\r\n        mv.visitMaxs(2, 1);\r\n        mv.visitInsn(Opcodes.ICONST_2);\r\n        mv.visitFieldInsn(Opcodes.PUTSTATIC, &quot;Cl&quot;, &quot;fld&quot;, &quot;I&quot;);\r\n        mv.visitInsn(Opcodes.RETURN);\r\n        mv.visitEnd();\r\n    }\r\n    cw.visitEnd();\r\n\r\nIn Java, the class looks roughly speaking as follows:\r\n\r\n    public class Cl{\r\n        private static final int fld;\r\n    \r\n        public static void setFinalField1(){\r\n            fld = 5;\r\n        }\r\n    \r\n        public static void setFinalField2(){\r\n            fld = 2;\r\n        }\r\n    }\r\n\r\nwhich cannot be compiled with `javac`, but can be loaded and executed by JVM.\r\n\r\nJVM HotSpot has special treatment of such classes in the sense that it prevents such &quot;constants&quot; from participating in constant folding. This check is done on the [bytecode rewriting phase of class initialization][1]:\r\n\r\n    // Check if any final field of the class given as parameter is modified\r\n    // outside of initializer methods of the class. Fields that are modified\r\n    // are marked with a flag. For marked fields, the compilers do not perform\r\n    // constant folding (as the field can be changed after initialization).\r\n    //\r\n    // The check is performed after verification and only if verification has\r\n    // succeeded. Therefore, the class is guaranteed to be well-formed.\r\n    InstanceKlass* klass = method-&gt;method_holder();\r\n    u2 bc_index = Bytes::get_Java_u2(bcp + prefix_length + 1);\r\n    constantPoolHandle cp(method-&gt;constants());\r\n    Symbol* ref_class_name = cp-&gt;klass_name_at(cp-&gt;klass_ref_index_at(bc_index));\r\n    if (klass-&gt;name() == ref_class_name) {\r\n       Symbol* field_name = cp-&gt;name_ref_at(bc_index);\r\n       Symbol* field_sig = cp-&gt;signature_ref_at(bc_index);\r\n\r\n       fieldDescriptor fd;\r\n       if (klass-&gt;find_field(field_name, field_sig, &amp;fd) != NULL) {\r\n          if (fd.access_flags().is_final()) {\r\n             if (fd.access_flags().is_static()) {\r\n                if (!method-&gt;is_static_initializer()) {\r\n                   fd.set_has_initialized_final_update(true);\r\n                }\r\n              } else {\r\n                if (!method-&gt;is_object_initializer()) {\r\n                  fd.set_has_initialized_final_update(true);\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n    }\r\n\r\nThe only restriction that JVM HotSpot checks is that the `final` field should not be modified outside of the class that the `final` field is declared at. \r\n\r\n\r\n  [1]: https://hg.openjdk.java.net/jdk/jdk12/file/06222165c35f/src/hotspot/share/interpreter/rewriter.cpp#l435","title":"Change private static final field using Java reflection","body":"<p>Even in spite of being <code>final</code> a field can be modified outside of static initializer and (at least JVM HotSpot) will execute the bytecode perfectly fine.</p>\n<p>The problem is that Java compiler does not allow this, but this can be easily bypassed using <code>objectweb.asm</code>. Here is p̶e̶r̶f̶e̶c̶t̶l̶y̶ ̶v̶a̶l̶i̶d̶ ̶c̶l̶a̶s̶s̶f̶i̶l̶e̶ <em>an invalid classfile from the JVMS specification standpoint</em>, but it passes bytecode verification and then is successfully loaded and initialized under JVM HotSpot OpenJDK12:</p>\n<pre><code>ClassWriter cw = new ClassWriter(0);\ncw.visit(Opcodes.V1_8, Opcodes.ACC_PUBLIC, &quot;Cl&quot;, null, &quot;java/lang/Object&quot;, null);\n{\n    FieldVisitor fv = cw.visitField(Opcodes.ACC_PRIVATE | Opcodes.ACC_STATIC | Opcodes.ACC_FINAL, &quot;fld&quot;, &quot;I&quot;, null, null);\n    fv.visitEnd();\n}\n{\n    // public void setFinalField1() { //... }\n    MethodVisitor mv = cw.visitMethod(Opcodes.ACC_PUBLIC | Opcodes.ACC_STATIC, &quot;setFinalField1&quot;, &quot;()V&quot;, null, null);\n    mv.visitMaxs(2, 1);\n    mv.visitInsn(Opcodes.ICONST_5);\n    mv.visitFieldInsn(Opcodes.PUTSTATIC, &quot;Cl&quot;, &quot;fld&quot;, &quot;I&quot;);\n    mv.visitInsn(Opcodes.RETURN);\n    mv.visitEnd();\n}\n{\n    // public void setFinalField2() { //... }\n    MethodVisitor mv = cw.visitMethod(Opcodes.ACC_PUBLIC | Opcodes.ACC_STATIC, &quot;setFinalField2&quot;, &quot;()V&quot;, null, null);\n    mv.visitMaxs(2, 1);\n    mv.visitInsn(Opcodes.ICONST_2);\n    mv.visitFieldInsn(Opcodes.PUTSTATIC, &quot;Cl&quot;, &quot;fld&quot;, &quot;I&quot;);\n    mv.visitInsn(Opcodes.RETURN);\n    mv.visitEnd();\n}\ncw.visitEnd();\n</code></pre>\n<p>In Java, the class looks roughly speaking as follows:</p>\n<pre><code>public class Cl{\n    private static final int fld;\n\n    public static void setFinalField1(){\n        fld = 5;\n    }\n\n    public static void setFinalField2(){\n        fld = 2;\n    }\n}\n</code></pre>\n<p>which cannot be compiled with <code>javac</code>, but can be loaded and executed by JVM.</p>\n<p>JVM HotSpot has special treatment of such classes in the sense that it prevents such &quot;constants&quot; from participating in constant folding. This check is done on the <a href=\"https://hg.openjdk.java.net/jdk/jdk12/file/06222165c35f/src/hotspot/share/interpreter/rewriter.cpp#l435\" rel=\"nofollow noreferrer\">bytecode rewriting phase of class initialization</a>:</p>\n<pre><code>// Check if any final field of the class given as parameter is modified\n// outside of initializer methods of the class. Fields that are modified\n// are marked with a flag. For marked fields, the compilers do not perform\n// constant folding (as the field can be changed after initialization).\n//\n// The check is performed after verification and only if verification has\n// succeeded. Therefore, the class is guaranteed to be well-formed.\nInstanceKlass* klass = method-&gt;method_holder();\nu2 bc_index = Bytes::get_Java_u2(bcp + prefix_length + 1);\nconstantPoolHandle cp(method-&gt;constants());\nSymbol* ref_class_name = cp-&gt;klass_name_at(cp-&gt;klass_ref_index_at(bc_index));\nif (klass-&gt;name() == ref_class_name) {\n   Symbol* field_name = cp-&gt;name_ref_at(bc_index);\n   Symbol* field_sig = cp-&gt;signature_ref_at(bc_index);\n\n   fieldDescriptor fd;\n   if (klass-&gt;find_field(field_name, field_sig, &amp;fd) != NULL) {\n      if (fd.access_flags().is_final()) {\n         if (fd.access_flags().is_static()) {\n            if (!method-&gt;is_static_initializer()) {\n               fd.set_has_initialized_final_update(true);\n            }\n          } else {\n            if (!method-&gt;is_object_initializer()) {\n              fd.set_has_initialized_final_update(true);\n            }\n          }\n        }\n      }\n    }\n}\n</code></pre>\n<p>The only restriction that JVM HotSpot checks is that the <code>final</code> field should not be modified outside of the class that the <code>final</code> field is declared at.</p>\n"},{"comments":[{"owner":{"account_id":310214,"reputation":300,"user_id":623079,"accept_rate":71,"display_name":"Dauntless"},"score":1,"creation_date":1632397531,"post_id":64378131,"comment_id":122484063,"body_markdown":"When running the original code in Android, you will get the following error: `java.lang.NoSuchFieldException: No field modifiers in class Ljava/lang/reflect/Field; (declaration of &#39;java.lang.reflect.Field&#39; appears in /apex/com.android.runtime/javalib/core-oj.jar)`. The suggested solution works in my case.  (This error currently has only one google result, so hopefully people will now find this page)","body":"When running the original code in Android, you will get the following error: <code>java.lang.NoSuchFieldException: No field modifiers in class Ljava&#47;lang&#47;reflect&#47;Field; (declaration of &#39;java.lang.reflect.Field&#39; appears in &#47;apex&#47;com.android.runtime&#47;javalib&#47;core-oj.jar)</code>. The suggested solution works in my case.  (This error currently has only one google result, so hopefully people will now find this page)"}],"tags":[],"owner":{"account_id":651332,"reputation":2477,"user_id":453052,"display_name":"d4vidi"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1602788512,"creation_date":1602788512,"answer_id":64378131,"question_id":3301635,"body_markdown":"Many of the answers here are useful, but I&#39;ve found none of them to work on `Android`, in particular. I&#39;m even a pretty hefty user of `Reflect` by _joor_, and neither it nor _apache_&#39;s `FieldUtils` - both mentioned here in some of the answers, do the trick.\r\n\r\n## Problem with Android\r\n\r\nThe fundamental reason why this is so is because on Android there&#39;s no `modifiers` field in the `Field` class, which renders any suggestion involving this code (as in the marked answer), useless:\r\n\r\n```java\r\nField modifiersField = Field.class.getDeclaredField(&quot;modifiers&quot;);\r\nmodifiersField.setAccessible(true);\r\nmodifiersField.setInt(field, field.getModifiers() &amp; ~Modifier.FINAL);\r\n```\r\n\r\nIn fact, to quote from `FieldUtils.removeFinalModifier()`:\r\n\r\n```java\r\n// Do all JREs implement Field with a private ivar called &quot;modifiers&quot;?\r\nfinal Field modifiersField = Field.class.getDeclaredField(&quot;modifiers&quot;);\r\n```\r\n\r\nSo, the answer is no...\r\n\r\n## Solution\r\n\r\nPretty easy - instead of `modifiers`, the field name is `accessFlags`. This does the trick:\r\n\r\n```java\r\nField accessFlagsField = Field.class.getDeclaredField(&quot;accessFlags&quot;);\r\naccessFlagsField.setAccessible(true);\r\naccessFlagsField.setInt(field, field.getModifiers() &amp; ~Modifier.FINAL);\r\n```\r\n\r\n&gt;Side-note #1: this can work regardless of whether the field is static in the class, or not.\r\n\r\n&gt;Side-note #2: Seeing that the field itself could be private, it&#39;s recommended to also enable access over the field itself, using `field.setAccessible(true)` (in addition to `accessFlagsField.setAccessible(true)`.","title":"Change private static final field using Java reflection","body":"<p>Many of the answers here are useful, but I've found none of them to work on <code>Android</code>, in particular. I'm even a pretty hefty user of <code>Reflect</code> by <em>joor</em>, and neither it nor <em>apache</em>'s <code>FieldUtils</code> - both mentioned here in some of the answers, do the trick.</p>\n<h2>Problem with Android</h2>\n<p>The fundamental reason why this is so is because on Android there's no <code>modifiers</code> field in the <code>Field</code> class, which renders any suggestion involving this code (as in the marked answer), useless:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Field modifiersField = Field.class.getDeclaredField(&quot;modifiers&quot;);\nmodifiersField.setAccessible(true);\nmodifiersField.setInt(field, field.getModifiers() &amp; ~Modifier.FINAL);\n</code></pre>\n<p>In fact, to quote from <code>FieldUtils.removeFinalModifier()</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Do all JREs implement Field with a private ivar called &quot;modifiers&quot;?\nfinal Field modifiersField = Field.class.getDeclaredField(&quot;modifiers&quot;);\n</code></pre>\n<p>So, the answer is no...</p>\n<h2>Solution</h2>\n<p>Pretty easy - instead of <code>modifiers</code>, the field name is <code>accessFlags</code>. This does the trick:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Field accessFlagsField = Field.class.getDeclaredField(&quot;accessFlags&quot;);\naccessFlagsField.setAccessible(true);\naccessFlagsField.setInt(field, field.getModifiers() &amp; ~Modifier.FINAL);\n</code></pre>\n<blockquote>\n<p>Side-note #1: this can work regardless of whether the field is static in the class, or not.</p>\n</blockquote>\n<blockquote>\n<p>Side-note #2: Seeing that the field itself could be private, it's recommended to also enable access over the field itself, using <code>field.setAccessible(true)</code> (in addition to <code>accessFlagsField.setAccessible(true)</code>.</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":1,"creation_date":1632865390,"post_id":69362143,"comment_id":122608651,"body_markdown":"This does not work with Java 16+.","body":"This does not work with Java 16+."},{"owner":{"account_id":1989676,"reputation":950,"user_id":1784003,"accept_rate":100,"display_name":"barwnikk"},"score":0,"creation_date":1635637144,"post_id":69362143,"comment_id":123349648,"body_markdown":"@JohannesKuhn works if you add `--illegal-access=permit`","body":"@JohannesKuhn works if you add <code>--illegal-access=permit</code>"},{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":1,"creation_date":1635639006,"post_id":69362143,"comment_id":123349867,"body_markdown":"`--illegal-access=permit` was removed in Java 17.","body":"<code>--illegal-access=permit</code> was removed in Java 17."},{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":1,"creation_date":1638286854,"post_id":69362143,"comment_id":124045291,"body_markdown":"There is no way to make this work with Java 18 due to [JEP 416](https://openjdk.java.net/jeps/416)","body":"There is no way to make this work with Java 18 due to <a href=\"https://openjdk.java.net/jeps/416\" rel=\"nofollow noreferrer\">JEP 416</a>"},{"owner":{"account_id":1817574,"reputation":256,"user_id":1652377,"display_name":"Chris Rankin"},"score":0,"creation_date":1649618968,"post_id":69362143,"comment_id":126915862,"body_markdown":"Even in Java 18, [JLS 17.5.3](https://docs.oracle.com/javase/specs/jls/se18/html/jls-17.html#jls-17.5.3) still says &quot;final fields can be changed via reflection and other implementation-dependent means&quot;. So what is the reflection mechanism to satisfy the JLS?","body":"Even in Java 18, <a href=\"https://docs.oracle.com/javase/specs/jls/se18/html/jls-17.html#jls-17.5.3\" rel=\"nofollow noreferrer\">JLS 17.5.3</a> still says &quot;final fields can be changed via reflection and other implementation-dependent means&quot;. So what is the reflection mechanism to satisfy the JLS?"},{"owner":{"account_id":1817574,"reputation":256,"user_id":1652377,"display_name":"Chris Rankin"},"score":0,"creation_date":1649619131,"post_id":69362143,"comment_id":126915912,"body_markdown":"I managed to use `lookup.findSetter(Field.class, &quot;modifiers&quot;, int.class)` successfully on both Java 16 and Java 17. However, it still fails on Java 18 because `Field.modifiers` has suddenly become a `final` field.","body":"I managed to use <code>lookup.findSetter(Field.class, &quot;modifiers&quot;, int.class)</code> successfully on both Java 16 and Java 17. However, it still fails on Java 18 because <code>Field.modifiers</code> has suddenly become a <code>final</code> field."},{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":0,"creation_date":1649627946,"post_id":69362143,"comment_id":126917688,"body_markdown":"@ChrisRankin The mechanism for non-static `final` fields is reflection with `setAccessible`.","body":"@ChrisRankin The mechanism for non-static <code>final</code> fields is reflection with <code>setAccessible</code>."},{"owner":{"account_id":1817574,"reputation":256,"user_id":1652377,"display_name":"Chris Rankin"},"score":0,"creation_date":1649718838,"post_id":69362143,"comment_id":126942805,"body_markdown":"OK, and what is the mechanism for `static final` fields? Because that&#39;s the case I&#39;m actually interested in. Specifically - non-primitive `static final` fields, i.e. object references.","body":"OK, and what is the mechanism for <code>static final</code> fields? Because that&#39;s the case I&#39;m actually interested in. Specifically - non-primitive <code>static final</code> fields, i.e. object references."},{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":1,"creation_date":1649768808,"post_id":69362143,"comment_id":126955697,"body_markdown":"You can&#39;t change `static final` fields. [That never really worked](https://gist.github.com/DasBrain/ca16053f8e073c8a883bee66302c2fee). It may appear to work, but in the end - relying on that effect makes your code just non-portable.","body":"You can&#39;t change <code>static final</code> fields. <a href=\"https://gist.github.com/DasBrain/ca16053f8e073c8a883bee66302c2fee\" rel=\"nofollow noreferrer\">That never really worked</a>. It may appear to work, but in the end - relying on that effect makes your code just non-portable."}],"tags":[],"owner":{"account_id":231683,"reputation":4218,"user_id":496038,"display_name":"pringi"},"comment_count":9,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1632833656,"creation_date":1632833656,"answer_id":69362143,"question_id":3301635,"body_markdown":"Since Java 12 onwards, the answers given will not work.\r\n\r\nHere is an example on how to modify a `private static final` field since *Java 12* (based on [this answer][1]).\r\n\r\n      private Object modifyField(Object newFieldValue, String fieldName, Object classInstance) throws NoSuchFieldException, IllegalAccessException {\r\n        Field field = classInstance.getClass().getDeclaredField(fieldName);\r\n        VarHandle MODIFIERS;\r\n    \r\n        field.setAccessible(true);\r\n    \r\n        var lookup = MethodHandles.privateLookupIn(Field.class, MethodHandles.lookup());\r\n        MODIFIERS = lookup.findVarHandle(Field.class, &quot;modifiers&quot;, int.class);\r\n        int mods = field.getModifiers();\r\n    \r\n        if (Modifier.isFinal(mods)) {\r\n          MODIFIERS.set(field, mods &amp; ~Modifier.FINAL);\r\n        }\r\n    \r\n        Object previousValue = field.get(classInstance);\r\n        field.set(null, newFieldValue);\r\n    \r\n        return previousValue;\r\n      }\r\n\r\nSee [this thread][1] for more details.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/56039341/get-declared-fields-of-java-lang-reflect-fields-in-jdk12/56043252#56043252","title":"Change private static final field using Java reflection","body":"<p>Since Java 12 onwards, the answers given will not work.</p>\n<p>Here is an example on how to modify a <code>private static final</code> field since <em>Java 12</em> (based on <a href=\"https://stackoverflow.com/questions/56039341/get-declared-fields-of-java-lang-reflect-fields-in-jdk12/56043252#56043252\">this answer</a>).</p>\n<pre><code>  private Object modifyField(Object newFieldValue, String fieldName, Object classInstance) throws NoSuchFieldException, IllegalAccessException {\n    Field field = classInstance.getClass().getDeclaredField(fieldName);\n    VarHandle MODIFIERS;\n\n    field.setAccessible(true);\n\n    var lookup = MethodHandles.privateLookupIn(Field.class, MethodHandles.lookup());\n    MODIFIERS = lookup.findVarHandle(Field.class, &quot;modifiers&quot;, int.class);\n    int mods = field.getModifiers();\n\n    if (Modifier.isFinal(mods)) {\n      MODIFIERS.set(field, mods &amp; ~Modifier.FINAL);\n    }\n\n    Object previousValue = field.get(classInstance);\n    field.set(null, newFieldValue);\n\n    return previousValue;\n  }\n</code></pre>\n<p>See <a href=\"https://stackoverflow.com/questions/56039341/get-declared-fields-of-java-lang-reflect-fields-in-jdk12/56043252#56043252\">this thread</a> for more details.</p>\n"},{"tags":[],"owner":{"account_id":20228,"reputation":40720,"user_id":48136,"display_name":"bric3"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1638266197,"creation_date":1638266197,"answer_id":70167376,"question_id":3301635,"body_markdown":"With JDK 18 this won&#39;t be possible anymore due to the reimplementation of the core reflection over `invokedynamic` and `MethodHandle`s as part of [JEP-416][1] ([PR][2]).\r\n\r\nQuote of [Mandy Chung][3] – who is the main author of this incredible work – in the [following comment][4]. Emphasis are mine.\r\n\r\n&gt; If the underlying field is final, a `Field` object has write access **if and only if**\r\n&gt;\r\n&gt; * `setAccessible(true)` has succeeded for this `Field` object;\r\n&gt; * the field is non-static; and\r\n&gt; * the field&#39;s declaring class is not a hidden class; and\r\n&gt; * the field&#39;s declaring class is not a record class.\r\n\r\n\r\n  [1]: https://openjdk.java.net/jeps/416\r\n  [2]: https://github.com/openjdk/jdk/pull/5027\r\n  [3]: https://github.com/mlchung\r\n  [4]: https://github.com/openjdk/jdk/pull/5027#issuecomment-969672078","title":"Change private static final field using Java reflection","body":"<p>With JDK 18 this won't be possible anymore due to the reimplementation of the core reflection over <code>invokedynamic</code> and <code>MethodHandle</code>s as part of <a href=\"https://openjdk.java.net/jeps/416\" rel=\"nofollow noreferrer\">JEP-416</a> (<a href=\"https://github.com/openjdk/jdk/pull/5027\" rel=\"nofollow noreferrer\">PR</a>).</p>\n<p>Quote of <a href=\"https://github.com/mlchung\" rel=\"nofollow noreferrer\">Mandy Chung</a> – who is the main author of this incredible work – in the <a href=\"https://github.com/openjdk/jdk/pull/5027#issuecomment-969672078\" rel=\"nofollow noreferrer\">following comment</a>. Emphasis are mine.</p>\n<blockquote>\n<p>If the underlying field is final, a <code>Field</code> object has write access <strong>if and only if</strong></p>\n<ul>\n<li><code>setAccessible(true)</code> has succeeded for this <code>Field</code> object;</li>\n<li>the field is non-static; and</li>\n<li>the field's declaring class is not a hidden class; and</li>\n<li>the field's declaring class is not a record class.</li>\n</ul>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":1392029,"reputation":124,"user_id":1322622,"display_name":"George Stanchev"},"score":0,"creation_date":1698958616,"post_id":77186891,"comment_id":136474116,"body_markdown":"Enjoy while we can on Java 21 because https://bugs.openjdk.org/browse/JDK-8309635 removes it for Java 22","body":"Enjoy while we can on Java 21 because <a href=\"https://bugs.openjdk.org/browse/JDK-8309635\" rel=\"nofollow noreferrer\">bugs.openjdk.org/browse/JDK-8309635</a> removes it for Java 22"}],"tags":[],"owner":{"account_id":9148036,"reputation":11,"user_id":6803479,"display_name":"Andrei Marchanka"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695816336,"creation_date":1695812586,"answer_id":77186891,"question_id":3301635,"body_markdown":"To make this worked with JDK 21 you can use option `-Djdk.reflect.useDirectMethodHandle=false`\r\n\r\nMake accessable for JDK 11 - 17\r\n\r\n        public static void setFieldAccessible(Field field) throws Exception {\r\n        field.setAccessible(true);\r\n        Method getDeclaredFields0 = Class.class.getDeclaredMethod(&quot;getDeclaredFields0&quot;, boolean.class);\r\n        getDeclaredFields0.setAccessible(true);\r\n        Field[] fields = (Field[]) getDeclaredFields0.invoke(Field.class, false);\r\n        for (Field each : fields) {\r\n            if (&quot;modifiers&quot;.equals(each.getName())) {\r\n                each.setAccessible(true);\r\n                each.setInt(field, field.getModifiers() &amp; ~Modifier.FINAL);\r\n                break;\r\n            }\r\n        }\r\n    }","title":"Change private static final field using Java reflection","body":"<p>To make this worked with JDK 21 you can use option <code>-Djdk.reflect.useDirectMethodHandle=false</code></p>\n<p>Make accessable for JDK 11 - 17</p>\n<pre><code>    public static void setFieldAccessible(Field field) throws Exception {\n    field.setAccessible(true);\n    Method getDeclaredFields0 = Class.class.getDeclaredMethod(&quot;getDeclaredFields0&quot;, boolean.class);\n    getDeclaredFields0.setAccessible(true);\n    Field[] fields = (Field[]) getDeclaredFields0.invoke(Field.class, false);\n    for (Field each : fields) {\n        if (&quot;modifiers&quot;.equals(each.getName())) {\n            each.setAccessible(true);\n            each.setInt(field, field.getModifiers() &amp; ~Modifier.FINAL);\n            break;\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":171067,"reputation":6573,"user_id":398237,"accept_rate":82,"display_name":"fixitagain"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":361290,"favorite_count":0,"down_vote_count":1,"up_vote_count":568,"accepted_answer_id":3301720,"answer_count":15,"score":567,"last_activity_date":1695816336,"creation_date":1279730148,"question_id":3301635,"body_markdown":"I have a class with a `private static final` field that, unfortunately, I need to change it at run-time.\r\n\r\nUsing reflection I get this error: `java.lang.IllegalAccessException: Can not set static final boolean field`\r\n\r\nIs there any way to change the value?\r\n\r\n    Field hack = WarpTransform2D.class.getDeclaredField(&quot;USE_HACK&quot;);\r\n    hack.setAccessible(true);\r\n    hack.set(null, true);","title":"Change private static final field using Java reflection","body":"<p>I have a class with a <code>private static final</code> field that, unfortunately, I need to change it at run-time.</p>\n\n<p>Using reflection I get this error: <code>java.lang.IllegalAccessException: Can not set static final boolean field</code></p>\n\n<p>Is there any way to change the value?</p>\n\n<pre><code>Field hack = WarpTransform2D.class.getDeclaredField(\"USE_HACK\");\nhack.setAccessible(true);\nhack.set(null, true);\n</code></pre>\n"},{"tags":["java","encoding","intellij-idea","javac"],"comments":[{"owner":{"account_id":295869,"reputation":73614,"user_id":600500,"accept_rate":54,"display_name":"Paŭlo Ebermann"},"score":0,"creation_date":1315591539,"post_id":7365612,"comment_id":8888965,"body_markdown":"I have no idea about IDEA, but why do you need a mixed-encoding source tree? Wouldn&#39;t converting all the files to UTF-8 make the life easier?","body":"I have no idea about IDEA, but why do you need a mixed-encoding source tree? Wouldn&#39;t converting all the files to UTF-8 make the life easier?"},{"owner":{"account_id":13566,"reputation":48845,"user_id":27358,"accept_rate":76,"display_name":"David Moles"},"score":0,"creation_date":1315862741,"post_id":7365612,"comment_id":8930897,"body_markdown":"The files in question have to do with regex matching in foreign-language data with known encodings. It&#39;s easier and less error-prone to write the regex in the encoding you&#39;re matching against... or so I assume. (I&#39;m new to this code base.)","body":"The files in question have to do with regex matching in foreign-language data with known encodings. It&#39;s easier and less error-prone to write the regex in the encoding you&#39;re matching against... or so I assume. (I&#39;m new to this code base.)"},{"owner":{"account_id":295869,"reputation":73614,"user_id":600500,"accept_rate":54,"display_name":"Paŭlo Ebermann"},"score":1,"creation_date":1315863077,"post_id":7365612,"comment_id":8930976,"body_markdown":"When the strings are in memory, they are UTF-16 anyway, independent of the encoding the files were in (assuming you compiled them right). So while I can see why these files were created in these encodings, there is nothing speaking against converting them now. (Of course, you can also try to get the IDEA bug fixed.)","body":"When the strings are in memory, they are UTF-16 anyway, independent of the encoding the files were in (assuming you compiled them right). So while I can see why these files were created in these encodings, there is nothing speaking against converting them now. (Of course, you can also try to get the IDEA bug fixed.)"}],"answers":[{"comments":[{"owner":{"account_id":13566,"reputation":48845,"user_id":27358,"accept_rate":76,"display_name":"David Moles"},"score":0,"creation_date":1315862782,"post_id":7366063,"comment_id":8930906,"body_markdown":"I&#39;ve got a single-module project, so if that bug is accurately reported, I think I&#39;m looking at something different.","body":"I&#39;ve got a single-module project, so if that bug is accurately reported, I think I&#39;m looking at something different."},{"owner":{"account_id":36734,"reputation":392137,"user_id":104891,"display_name":"CrazyCoder"},"score":0,"creation_date":1315862945,"post_id":7366063,"comment_id":8930943,"body_markdown":"You can file a separate issue and attach a sample project so that we can investigate it.","body":"You can file a separate issue and attach a sample project so that we can investigate it."},{"owner":{"account_id":1520694,"reputation":5745,"user_id":1420441,"accept_rate":100,"display_name":"Henrique de Sousa"},"score":0,"creation_date":1678790682,"post_id":7366063,"comment_id":133597874,"body_markdown":"It seems like a bug. Our project is UTF-8, the file in question is on UTF-8 (checked with Notepad++) but Intellij complains about Cp1252. Totally a bug","body":"It seems like a bug. Our project is UTF-8, the file in question is on UTF-8 (checked with Notepad++) but Intellij complains about Cp1252. Totally a bug"},{"owner":{"account_id":36734,"reputation":392137,"user_id":104891,"display_name":"CrazyCoder"},"score":1,"creation_date":1678803687,"post_id":7366063,"comment_id":133601664,"body_markdown":"@HenriquedeSousa Please report at https://youtrack.jetbrains.com/newIssue?project=IDEA with a sample project to reproduce.","body":"@HenriquedeSousa Please report at <a href=\"https://youtrack.jetbrains.com/newIssue?project=IDEA\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/newIssue?project=IDEA</a> with a sample project to reproduce."},{"owner":{"account_id":1520694,"reputation":5745,"user_id":1420441,"accept_rate":100,"display_name":"Henrique de Sousa"},"score":0,"creation_date":1678870744,"post_id":7366063,"comment_id":133615234,"body_markdown":"As soon as I invalidate caches and build the entire project, the bug went away. Oh well, sorry :)","body":"As soon as I invalidate caches and build the entire project, the bug went away. Oh well, sorry :)"}],"tags":[],"owner":{"account_id":36734,"reputation":392137,"user_id":104891,"display_name":"CrazyCoder"},"comment_count":5,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1315593710,"creation_date":1315593710,"answer_id":7366063,"question_id":7365612,"body_markdown":"Looks like a [known bug][1].\r\n\r\n\r\n  [1]: http://youtrack.jetbrains.net/issue/IDEA-72193","title":"Intellij IDEA: &quot;unmappable character for encoding UTF-8&quot; compiling ISO-8859-1 files","body":"<p>Looks like a <a href=\"http://youtrack.jetbrains.net/issue/IDEA-72193\" rel=\"nofollow\">known bug</a>.</p>\n"},{"tags":[],"owner":{"account_id":1361548,"reputation":1773,"user_id":1298815,"display_name":"obe6"},"comment_count":0,"down_vote_count":0,"up_vote_count":38,"is_accepted":false,"score":38,"last_activity_date":1349595674,"creation_date":1349595674,"answer_id":12767015,"question_id":7365612,"body_markdown":"I solved this issue adding this property in IntelliJ option panel *Compiler/Java Compiler* : \r\n\r\n*Additional command line parameters* : `-encoding ISO-8859-1`\r\n\r\n","title":"Intellij IDEA: &quot;unmappable character for encoding UTF-8&quot; compiling ISO-8859-1 files","body":"<p>I solved this issue adding this property in IntelliJ option panel <em>Compiler/Java Compiler</em> : </p>\n\n<p><em>Additional command line parameters</em> : <code>-encoding ISO-8859-1</code></p>\n"},{"tags":[],"owner":{"account_id":397001,"reputation":8330,"user_id":760893,"accept_rate":90,"display_name":"Sonhja"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1628667518,"creation_date":1390300584,"answer_id":21255621,"question_id":7365612,"body_markdown":"If you are using Intellij, the fastest way for me was:\r\n\r\n`File -&gt; File Properties-&gt; File encoding`\r\n\r\nand choose the one you want, in this case `ISO-8859-1`.","title":"Intellij IDEA: &quot;unmappable character for encoding UTF-8&quot; compiling ISO-8859-1 files","body":"<p>If you are using Intellij, the fastest way for me was:</p>\n<p><code>File -&gt; File Properties-&gt; File encoding</code></p>\n<p>and choose the one you want, in this case <code>ISO-8859-1</code>.</p>\n"},{"tags":[],"owner":{"account_id":11871812,"reputation":41,"user_id":8687799,"display_name":"chc"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1571809646,"creation_date":1506583252,"answer_id":46463214,"question_id":7365612,"body_markdown":"I have UTF-8 encoding in encoding.xml as follows, but still not working. keeps getting error &quot;Error: java: error: unmappable character (0xFE) for encoding UTF-8&quot;\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project version=&quot;4&quot;&gt;\r\n  &lt;component name=&quot;Encoding&quot; defaultCharsetForPropertiesFiles=&quot;UTF-8&quot;&gt;\r\n    &lt;file url=&quot;file://$PROJECT_DIR$&quot; charset=&quot;UTF-8&quot; /&gt;\r\n    &lt;file url=&quot;PROJECT&quot; charset=&quot;UTF-8&quot; /&gt;\r\n  &lt;/component&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\n","title":"Intellij IDEA: &quot;unmappable character for encoding UTF-8&quot; compiling ISO-8859-1 files","body":"<p>I have UTF-8 encoding in encoding.xml as follows, but still not working. keeps getting error \"Error: java: error: unmappable character (0xFE) for encoding UTF-8\"</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project version=\"4\"&gt;\n  &lt;component name=\"Encoding\" defaultCharsetForPropertiesFiles=\"UTF-8\"&gt;\n    &lt;file url=\"file://$PROJECT_DIR$\" charset=\"UTF-8\" /&gt;\n    &lt;file url=\"PROJECT\" charset=\"UTF-8\" /&gt;\n  &lt;/component&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12726107,"reputation":36,"user_id":9244597,"display_name":"Stabak"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1615204149,"creation_date":1615204149,"answer_id":66529331,"question_id":7365612,"body_markdown":"Solution tested in IntelliJ 2019.3\r\n\r\nOpen the troublesome file. Go to File -&gt; File Encoding. (*You also have a quick option at the bottom right*) Select the encoding you want. In my case it was UTF-8. Click on Convert when it prompts you if you want to convert the file in new encoding and overwrite the contents.\r\n\r\nTry to compile. You should be able to compile fine.","title":"Intellij IDEA: &quot;unmappable character for encoding UTF-8&quot; compiling ISO-8859-1 files","body":"<p>Solution tested in IntelliJ 2019.3</p>\n<p>Open the troublesome file. Go to File -&gt; File Encoding. (<em>You also have a quick option at the bottom right</em>) Select the encoding you want. In my case it was UTF-8. Click on Convert when it prompts you if you want to convert the file in new encoding and overwrite the contents.</p>\n<p>Try to compile. You should be able to compile fine.</p>\n"},{"tags":[],"owner":{"account_id":5529969,"reputation":301,"user_id":4390278,"display_name":"iDevSpread"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695816327,"creation_date":1695816327,"answer_id":77187356,"question_id":7365612,"body_markdown":"Change &quot;Javac&quot; to &quot;Eclipse&quot; in Java Compiler\r\n\r\nI met the same error message, and tried the methods above that did not work well for me. \r\n\r\nBut I change the setting in Compiler. In the panel &quot;Use compiler&quot;, click and choose Eclipse. \r\n\r\nDone.","title":"Intellij IDEA: &quot;unmappable character for encoding UTF-8&quot; compiling ISO-8859-1 files","body":"<p>Change &quot;Javac&quot; to &quot;Eclipse&quot; in Java Compiler</p>\n<p>I met the same error message, and tried the methods above that did not work well for me.</p>\n<p>But I change the setting in Compiler. In the panel &quot;Use compiler&quot;, click and choose Eclipse.</p>\n<p>Done.</p>\n"}],"owner":{"account_id":13566,"reputation":48845,"user_id":27358,"accept_rate":76,"display_name":"David Moles"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43035,"favorite_count":0,"down_vote_count":0,"up_vote_count":21,"answer_count":6,"score":21,"last_activity_date":1695816327,"creation_date":1315591277,"question_id":7365612,"body_markdown":"I have a mixed-encoding source tree and I&#39;m getting the warning above for some of my source files. I managed to sucessfully set the encoding for those files to ISO 8859-1 and, after invalidating IDEA&#39;s caches, they now display correctly in the editor. However, when I compile, I still get the error message.\r\n\r\nProduction builds use ant and it&#39;s not an issue there, but it means I can&#39;t &quot;make&quot; in the IDE. Is there a way to get IDEA to compile these correctly, or failing that, drop the error down to a warning?","title":"Intellij IDEA: &quot;unmappable character for encoding UTF-8&quot; compiling ISO-8859-1 files","body":"<p>I have a mixed-encoding source tree and I'm getting the warning above for some of my source files. I managed to sucessfully set the encoding for those files to ISO 8859-1 and, after invalidating IDEA's caches, they now display correctly in the editor. However, when I compile, I still get the error message.</p>\n\n<p>Production builds use ant and it's not an issue there, but it means I can't \"make\" in the IDE. Is there a way to get IDEA to compile these correctly, or failing that, drop the error down to a warning?</p>\n"},{"tags":["java","mybatis"],"answers":[{"comments":[{"owner":{"account_id":7385237,"reputation":2762,"user_id":5620472,"accept_rate":23,"display_name":"user5620472"},"score":0,"creation_date":1476156694,"post_id":39958167,"comment_id":67219520,"body_markdown":"where placed @ResultType annotation? in myBatis lib it not exist","body":"where placed @ResultType annotation? in myBatis lib it not exist"},{"owner":{"account_id":6087813,"reputation":15135,"user_id":4751165,"accept_rate":96,"display_name":"Pau"},"score":0,"creation_date":1476158800,"post_id":39958167,"comment_id":67220002,"body_markdown":"org.apache.ibatis.annotations, the same as `@Result`. http://www.mybatis.org/mybatis-3/apidocs/reference/org/apache/ibatis/annotations/ResultType.html","body":"org.apache.ibatis.annotations, the same as <code>@Result</code>. <a href=\"http://www.mybatis.org/mybatis-3/apidocs/reference/org/apache/ibatis/annotations/ResultType.html\" rel=\"nofollow noreferrer\">mybatis.org/mybatis-3/apidocs/reference/org/apache/ibatis/&hellip;</a>"}],"tags":[],"owner":{"account_id":6087813,"reputation":15135,"user_id":4751165,"accept_rate":96,"display_name":"Pau"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1476102008,"creation_date":1476102008,"answer_id":39958167,"question_id":39957637,"body_markdown":"You need to specify the `ResultType` adding the annotation `@ResultType` and the value type you expect (`java.lang.String`).\r\n\r\n    @Select(getAll)\r\n    @ResultType(&quot;java.lang.String&quot;)\r\n    List&lt;String&gt; getAll();\r\n\r\n","title":"MyBatis mapping result to List&lt;String&gt; in MyBatisRepository and annotations","body":"<p>You need to specify the <code>ResultType</code> adding the annotation <code>@ResultType</code> and the value type you expect (<code>java.lang.String</code>).</p>\n\n<pre><code>@Select(getAll)\n@ResultType(\"java.lang.String\")\nList&lt;String&gt; getAll();\n</code></pre>\n"}],"owner":{"account_id":7385237,"reputation":2762,"user_id":5620472,"accept_rate":23,"display_name":"user5620472"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695816265,"creation_date":1476100310,"question_id":39957637,"body_markdown":"I have a select &quot;Select * FROM HZ....&quot; and it returns just one column (String)\r\n\r\n    NAME\r\n    name1\r\n    name2\r\n    name3\r\n    ....\r\n\r\nI need to map this result to a List&lt;String&gt;\r\n\r\nI&#39;ve tried using a `Model` class with a String properties like next:\r\n\r\n    public interface ModelReport {\r\n       String getAll = &quot;Selct * FROM HZ....&quot;;\r\n\r\n       @Select(getAll)\r\n       @Results(value = {\r\n            @Result(property = &quot;NAME&quot;, column = &quot;NAME&quot;),\r\n       })\r\n       List&lt;Model&gt;getAll();\r\n    }\r\n\r\n\r\n    class Model{\r\n      String NAME;\r\n    }\r\n\r\nBut I do not want create model without a class just with a List of Strings. How can I do it?\r\n\r\nI&#39;ve tried the next, but it doesn&#39;t work.\r\n\r\n    @Select(getAll)\r\n    List&lt;String&gt; getAll();\r\n","title":"MyBatis mapping result to List&lt;String&gt; in MyBatisRepository and annotations","body":"<p>I have a select \"Select * FROM HZ....\" and it returns just one column (String)</p>\n\n<pre><code>NAME\nname1\nname2\nname3\n....\n</code></pre>\n\n<p>I need to map this result to a List</p>\n\n<p>I've tried using a <code>Model</code> class with a String properties like next:</p>\n\n<pre><code>public interface ModelReport {\n   String getAll = \"Selct * FROM HZ....\";\n\n   @Select(getAll)\n   @Results(value = {\n        @Result(property = \"NAME\", column = \"NAME\"),\n   })\n   List&lt;Model&gt;getAll();\n}\n\n\nclass Model{\n  String NAME;\n}\n</code></pre>\n\n<p>But I do not want create model without a class just with a List of Strings. How can I do it?</p>\n\n<p>I've tried the next, but it doesn't work.</p>\n\n<pre><code>@Select(getAll)\nList&lt;String&gt; getAll();\n</code></pre>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":2774008,"reputation":18025,"user_id":2387977,"accept_rate":69,"display_name":"Dherik"},"score":1,"creation_date":1517308548,"post_id":48518841,"comment_id":84033155,"body_markdown":"Possible duplicate of [Determine size of HTTP Response?](https://stackoverflow.com/questions/5435351/determine-size-of-http-response)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/5435351/determine-size-of-http-response\">Determine size of HTTP Response?</a>"}],"answers":[{"comments":[{"owner":{"account_id":28511,"reputation":7390,"user_id":76237,"display_name":"diginoise"},"score":6,"creation_date":1517310273,"post_id":48519164,"comment_id":84034326,"body_markdown":"Please mind that server will not always attach `Content-Length` header in the response. See also `Transfer-Encoding: chunked`","body":"Please mind that server will not always attach <code>Content-Length</code> header in the response. See also <code>Transfer-Encoding: chunked</code>"},{"owner":{"account_id":5915010,"reputation":127,"user_id":4654109,"display_name":"Jonathan"},"score":0,"creation_date":1517313660,"post_id":48519164,"comment_id":84036432,"body_markdown":"@diginoise Hello, the return comes the field: `Transfer-Encoding: chunked`. How to change?","body":"@diginoise Hello, the return comes the field: <code>Transfer-Encoding: chunked</code>. How to change?"},{"owner":{"account_id":28511,"reputation":7390,"user_id":76237,"display_name":"diginoise"},"score":1,"creation_date":1517314481,"post_id":48519164,"comment_id":84036927,"body_markdown":"@Jonathan this is attached by the server... if you control the server and you can build the entire body of the response up, then you can measure its size. It will cost you time (the response arrives later to the client). \nIf however you can&#39;t modify the server OR you are genuinely streaming the response (imagine it&#39;s a video stream of a webcam or a temperature readings from an on-line thermometer) then this is it I am afraid.","body":"@Jonathan this is attached by the server... if you control the server and you can build the entire body of the response up, then you can measure its size. It will cost you time (the response arrives later to the client).  If however you can&#39;t modify the server OR you are genuinely streaming the response (imagine it&#39;s a video stream of a webcam or a temperature readings from an on-line thermometer) then this is it I am afraid."}],"tags":[],"owner":{"account_id":11024424,"reputation":81,"user_id":8097748,"display_name":"Maksim Petrusevich"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1517308071,"creation_date":1517308071,"answer_id":48519164,"question_id":48518841,"body_markdown":"I think you can get content size from response headers. It&#39;s will seems something like that:\r\n\r\n    response.getHeader(&quot;Content-Length&quot;);\r\nFor reference:\r\n\r\nhttps://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponse.html#getHeader(java.lang.String)\r\n\r\nhttps://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html (Section - 14.13 Content-Length)","title":"get the size of the response content","body":"<p>I think you can get content size from response headers. It's will seems something like that:</p>\n\n<pre><code>response.getHeader(\"Content-Length\");\n</code></pre>\n\n<p>For reference:</p>\n\n<p><a href=\"https://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponse.html#getHeader(java.lang.String)\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponse.html#getHeader(java.lang.String)</a></p>\n\n<p><a href=\"https://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html\" rel=\"nofollow noreferrer\">https://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html</a> (Section - 14.13 Content-Length)</p>\n"}],"owner":{"account_id":5915010,"reputation":127,"user_id":4654109,"display_name":"Jonathan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3754,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695814980,"creation_date":1517307158,"question_id":48518841,"body_markdown":"I&#39;m using an interceptor that will intercept before and after the request. The purpose of this is to get the size of the content sent and returned, however, I do not know of a way to get the answer, it seems that the **response** does not have a method to get it.\r\n\r\n    @Component\r\n    public class DataUsageInterceptor extends HandlerInterceptorAdapter {\r\n\r\n        private static final Logger LOG = LoggerFactory.getLogger(CheckController.class);\r\n\r\n        @Override\r\n        public boolean preHandle(\r\n                HttpServletRequest request,\r\n                HttpServletResponse response,\r\n                Object handler\r\n        ) throws Exception {\r\n\r\n            System.out.println(&quot;---- &quot; + request.getContentLength() + &quot;----------&quot;);\r\n\r\n            return super.preHandle(request, response, handler);\r\n        }\r\n\r\n        @Override\r\n        public void afterCompletion(\r\n                HttpServletRequest request,\r\n                HttpServletResponse response,\r\n                Object handler, Exception ex\r\n        ) throws Exception {\r\n\r\n            System.out.println(&quot;---------- get length here ----------------&quot;);\r\n\r\n        }\r\n    }","title":"get the size of the response content","body":"<p>I'm using an interceptor that will intercept before and after the request. The purpose of this is to get the size of the content sent and returned, however, I do not know of a way to get the answer, it seems that the <strong>response</strong> does not have a method to get it.</p>\n\n<pre><code>@Component\npublic class DataUsageInterceptor extends HandlerInterceptorAdapter {\n\n    private static final Logger LOG = LoggerFactory.getLogger(CheckController.class);\n\n    @Override\n    public boolean preHandle(\n            HttpServletRequest request,\n            HttpServletResponse response,\n            Object handler\n    ) throws Exception {\n\n        System.out.println(\"---- \" + request.getContentLength() + \"----------\");\n\n        return super.preHandle(request, response, handler);\n    }\n\n    @Override\n    public void afterCompletion(\n            HttpServletRequest request,\n            HttpServletResponse response,\n            Object handler, Exception ex\n    ) throws Exception {\n\n        System.out.println(\"---------- get length here ----------------\");\n\n    }\n}\n</code></pre>\n"},{"tags":["java","io","httpresponse"],"answers":[{"comments":[{"owner":{"account_id":183607,"reputation":33842,"user_id":419075,"accept_rate":96,"display_name":"Amir Raminfar"},"score":0,"creation_date":1301072387,"post_id":5435455,"comment_id":6154821,"body_markdown":"I think this is your best option because I assume you want to know the size of the outputstream being sent not being received.","body":"I think this is your best option because I assume you want to know the size of the outputstream being sent not being received."},{"owner":{"account_id":193947,"reputation":1538,"user_id":435978,"accept_rate":88,"display_name":"BigMac66"},"score":1,"creation_date":1301075508,"post_id":5435455,"comment_id":6155647,"body_markdown":"But there is no writeObject() method on the DataOutputStream - I would have to make very significant modifications to the application to reduce everything to primitives.","body":"But there is no writeObject() method on the DataOutputStream - I would have to make very significant modifications to the application to reduce everything to primitives."},{"owner":{"account_id":3886707,"reputation":1216,"user_id":3217883,"accept_rate":76,"display_name":"user3217883"},"score":0,"creation_date":1560311017,"post_id":5435455,"comment_id":99689809,"body_markdown":"I get &quot;java.lang.IllegalStateException: getWriter() has already been called for this response&quot;","body":"I get &quot;java.lang.IllegalStateException: getWriter() has already been called for this response&quot;"}],"tags":[],"owner":{"account_id":47744,"reputation":5200,"user_id":141522,"accept_rate":94,"display_name":"David Weiser"},"comment_count":3,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1301071468,"creation_date":1301071468,"answer_id":5435455,"question_id":5435351,"body_markdown":"[This](http://www.coderanch.com/t/364514/Servlets/java/calculate-size-output-HttpServletResponse) seems to be what you&#39;re looking for:\r\n\r\n    DataOutputStream dos = new DataOutputStream(response.getOutputStream());\r\n    ...\r\n    int len = dos.size();","title":"Determine size of HTTP Response?","body":"<p><a href=\"http://www.coderanch.com/t/364514/Servlets/java/calculate-size-output-HttpServletResponse\" rel=\"nofollow\">This</a> seems to be what you're looking for:</p>\n\n<pre><code>DataOutputStream dos = new DataOutputStream(response.getOutputStream());\n...\nint len = dos.size();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":193947,"reputation":1538,"user_id":435978,"accept_rate":88,"display_name":"BigMac66"},"score":1,"creation_date":1301076976,"post_id":5435555,"comment_id":6155982,"body_markdown":"It appears the content length of the response does not have to be set.  In my client code I tried URLConnection.getContentLength() and I keep getting -1.  So what must I do on the server side to ensure the content length of the response is calculated?  But if I could do that on the server side my problem would be solved :)","body":"It appears the content length of the response does not have to be set.  In my client code I tried URLConnection.getContentLength() and I keep getting -1.  So what must I do on the server side to ensure the content length of the response is calculated?  But if I could do that on the server side my problem would be solved :)"},{"owner":{"account_id":251084,"reputation":6048,"user_id":528211,"accept_rate":91,"display_name":"Rafael Colucci"},"score":0,"creation_date":1301084938,"post_id":5435555,"comment_id":6157809,"body_markdown":"You can include it in the response header in your server just before send the response to the client.","body":"You can include it in the response header in your server just before send the response to the client."},{"owner":{"account_id":515061,"reputation":363781,"user_id":1240268,"accept_rate":90,"display_name":"Andy Hayden"},"score":9,"creation_date":1494830309,"post_id":5435555,"comment_id":74975559,"body_markdown":"Note: This is not present if `Transfer-Encoding: chunked`.","body":"Note: This is not present if <code>Transfer-Encoding: chunked</code>."}],"tags":[],"owner":{"account_id":251084,"reputation":6048,"user_id":528211,"accept_rate":91,"display_name":"Rafael Colucci"},"comment_count":3,"down_vote_count":1,"up_vote_count":16,"is_accepted":false,"score":15,"last_activity_date":1301071898,"creation_date":1301071898,"answer_id":5435555,"question_id":5435351,"body_markdown":"If you have access to the response header, you can read the `Content-Length`. \r\n\r\nHere is a example of a response header:\r\n\r\n    (Status-Line):HTTP/1.1 200 OK\r\n    Connection:Keep-Alive\r\n    Date:Fri, 25 Mar 2011 16:26:56 GMT\r\n    Content-Length:728\r\n\r\nCheck this out: [Header Field Definitions][1]\r\n\r\n\r\n  [1]: http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html","title":"Determine size of HTTP Response?","body":"<p>If you have access to the response header, you can read the <code>Content-Length</code>. </p>\n\n<p>Here is a example of a response header:</p>\n\n<pre><code>(Status-Line):HTTP/1.1 200 OK\nConnection:Keep-Alive\nDate:Fri, 25 Mar 2011 16:26:56 GMT\nContent-Length:728\n</code></pre>\n\n<p>Check this out: <a href=\"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html\" rel=\"noreferrer\">Header Field Definitions</a></p>\n"},{"comments":[{"owner":{"account_id":193947,"reputation":1538,"user_id":435978,"accept_rate":88,"display_name":"BigMac66"},"score":0,"creation_date":1566305722,"post_id":5463984,"comment_id":101608587,"body_markdown":"Odd that I get down voted to my own response to my own question for an answer that does exactly what I want...","body":"Odd that I get down voted to my own response to my own question for an answer that does exactly what I want..."}],"tags":[],"owner":{"account_id":193947,"reputation":1538,"user_id":435978,"accept_rate":88,"display_name":"BigMac66"},"comment_count":1,"down_vote_count":3,"up_vote_count":3,"is_accepted":true,"score":0,"last_activity_date":1301340360,"creation_date":1301340360,"answer_id":5463984,"question_id":5435351,"body_markdown":"I eventually found a way to get what I wanted:\r\n\r\n    URLConnection con = servletURL.openConnection();\r\n    BufferedInputStream bif = new BufferedInputStream(con.getInputStream());\r\n    ObjectInputStream input = new ObjectInputStream(bif);\r\n    int avail = bif.available();\r\n    \r\n    System.out.println(&quot;Response content size = &quot; + avail);\r\n\r\nThis allowed me to see the response size on the client.  I still would like to know what it is on the server side before it is sent but this was the next best thing.","title":"Determine size of HTTP Response?","body":"<p>I eventually found a way to get what I wanted:</p>\n\n<pre><code>URLConnection con = servletURL.openConnection();\nBufferedInputStream bif = new BufferedInputStream(con.getInputStream());\nObjectInputStream input = new ObjectInputStream(bif);\nint avail = bif.available();\n\nSystem.out.println(\"Response content size = \" + avail);\n</code></pre>\n\n<p>This allowed me to see the response size on the client.  I still would like to know what it is on the server side before it is sent but this was the next best thing.</p>\n"},{"tags":[],"owner":{"account_id":211872,"reputation":7501,"user_id":464306,"accept_rate":92,"display_name":"gdejohn"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1360729294,"creation_date":1360729294,"answer_id":14846343,"question_id":5435351,"body_markdown":"Assuming the use of `ObjectOutputStream`, build it around a `java.io.ByteArrayOutputStream`:\r\n\r\n    ByteArrayOutputStream contentBytes = new ByteArrayOutputStream();\r\n    \r\n    ObjectOutputStream objectOut = new ObjectOutputStream(contentBytes);\r\n    \r\n    objectOut.writeObject(content);\r\n    \r\n    int contentLength = contentBytes.size();\r\n\r\nAnd then you can send the content with\r\n\r\n    contentBytes.writeTo(connection.getOutputStream());\r\n\r\nwhere `connection` is whatever you&#39;re getting your `OutputStream` from.\r\n\r\nBetter late than never, right?","title":"Determine size of HTTP Response?","body":"<p>Assuming the use of <code>ObjectOutputStream</code>, build it around a <code>java.io.ByteArrayOutputStream</code>:</p>\n\n<pre><code>ByteArrayOutputStream contentBytes = new ByteArrayOutputStream();\n\nObjectOutputStream objectOut = new ObjectOutputStream(contentBytes);\n\nobjectOut.writeObject(content);\n\nint contentLength = contentBytes.size();\n</code></pre>\n\n<p>And then you can send the content with</p>\n\n<pre><code>contentBytes.writeTo(connection.getOutputStream());\n</code></pre>\n\n<p>where <code>connection</code> is whatever you're getting your <code>OutputStream</code> from.</p>\n\n<p>Better late than never, right?</p>\n"},{"tags":[],"owner":{"account_id":295514,"reputation":2157,"user_id":599971,"accept_rate":55,"display_name":"ejaenv"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695814819,"creation_date":1695814819,"answer_id":77187176,"question_id":5435351,"body_markdown":"if you use Catalina, this worked for me:\r\n\r\n    import org.apache.catalina.connector.ResponseFacade\r\n    ...\r\n    long len=((ResponseFacade) response).getContentWritten();\r\n\r\n","title":"Determine size of HTTP Response?","body":"<p>if you use Catalina, this worked for me:</p>\n<pre><code>import org.apache.catalina.connector.ResponseFacade\n...\nlong len=((ResponseFacade) response).getContentWritten();\n</code></pre>\n"}],"owner":{"account_id":193947,"reputation":1538,"user_id":435978,"accept_rate":88,"display_name":"BigMac66"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52876,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":5463984,"answer_count":5,"score":9,"last_activity_date":1695814819,"creation_date":1301070922,"question_id":5435351,"body_markdown":"Is there a way to determine the size of the `HTTPServletResponse` content?  I read this [get-size-of-http-response-in-java][1] question but sadly where I work I do not have access to CommonsIO :(\r\n\r\nThe response content consists of a single complex object so I have considered writing it out to a temp file and then checking that file.  This is not something I want to be doing as a diagnostic while the application is running in production though so want to avoid it if at all possible.\r\n\r\nPS I read erickson&#39;s answer but it mentioned input streams I want to know the size of the object being written out...  Would be really nice if the `writeObject()` method returned a number representing bytes written instead of `void`...\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/1674129/get-size-of-http-response-in-java","title":"Determine size of HTTP Response?","body":"<p>Is there a way to determine the size of the <code>HTTPServletResponse</code> content?  I read this <a href=\"https://stackoverflow.com/questions/1674129/get-size-of-http-response-in-java\">get-size-of-http-response-in-java</a> question but sadly where I work I do not have access to CommonsIO :(</p>\n\n<p>The response content consists of a single complex object so I have considered writing it out to a temp file and then checking that file.  This is not something I want to be doing as a diagnostic while the application is running in production though so want to avoid it if at all possible.</p>\n\n<p>PS I read erickson's answer but it mentioned input streams I want to know the size of the object being written out...  Would be really nice if the <code>writeObject()</code> method returned a number representing bytes written instead of <code>void</code>...</p>\n"},{"tags":["java","cassandra","cql"],"comments":[{"owner":{"account_id":10364565,"reputation":4778,"user_id":7644018,"display_name":"Paul T."},"score":0,"creation_date":1695817435,"post_id":77187172,"comment_id":136074377,"body_markdown":"Possibly run a query of a few (or several, if necessary) comma separated tables in the from clause withOUT any join conditions or a where clause. The idea is that if the tables have enough rows, the cross product of the running query will exceed the timeout. I&#39;m not familiar with Cassandra, but some other DBs have a sleep() that can be used in a similar way as the thread sleep.","body":"Possibly run a query of a few (or several, if necessary) comma separated tables in the from clause withOUT any join conditions or a where clause. The idea is that if the tables have enough rows, the cross product of the running query will exceed the timeout. I&#39;m not familiar with Cassandra, but some other DBs have a sleep() that can be used in a similar way as the thread sleep."},{"owner":{"account_id":21922749,"reputation":21,"user_id":16205781,"display_name":"dtekunov"},"score":0,"creation_date":1695896027,"post_id":77187172,"comment_id":136086185,"body_markdown":"@PaulT. as far as I understand, there is no sleep() function alternative in Cassandra","body":"@PaulT. as far as I understand, there is no sleep() function alternative in Cassandra"},{"owner":{"account_id":38661,"reputation":26799,"user_id":111124,"accept_rate":83,"display_name":"Andrew"},"score":0,"creation_date":1695921199,"post_id":77187172,"comment_id":136091578,"body_markdown":"Select count(*) on a large enough table.","body":"Select count(*) on a large enough table."}],"owner":{"account_id":21922749,"reputation":21,"user_id":16205781,"display_name":"dtekunov"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695814752,"creation_date":1695814752,"question_id":77187172,"body_markdown":"I am writing an integration test for a part of my application and I want to test that my custom `readTimeoutMillis` property is set and works as expected.\r\n\r\n\r\nIn order to do so, I want to simulate a heavy query, which takes more time than `readTimeoutMillis`, but I don&#39;t want to use external tools like scassandra or cassandra-stress.\r\n\r\nIn Java, I would use something like `Thread.sleep(N)` to simulate such behaviour, but I cannot find a way to do this with just CQL.","title":"How to simulate a &#39;heavy&#39; query in Cassandra?","body":"<p>I am writing an integration test for a part of my application and I want to test that my custom <code>readTimeoutMillis</code> property is set and works as expected.</p>\n<p>In order to do so, I want to simulate a heavy query, which takes more time than <code>readTimeoutMillis</code>, but I don't want to use external tools like scassandra or cassandra-stress.</p>\n<p>In Java, I would use something like <code>Thread.sleep(N)</code> to simulate such behaviour, but I cannot find a way to do this with just CQL.</p>\n"},{"tags":["java","intellij-idea","intellij-plugin"],"answers":[{"comments":[{"owner":{"account_id":21268771,"reputation":75,"user_id":15648623,"display_name":"elpideus"},"score":0,"creation_date":1695845946,"post_id":77177430,"comment_id":136080007,"body_markdown":"Thank you very much for the answer. I am still having a problem however. I am getting this now: ```&#39;getCustomOptionsStep(WizardContext, Disposable)&#39; in &#39;org.intellij.sdk.project.wizard.DemoModuleBuilder&#39; clashes with &#39;getCustomOptionsStep(WizardContext, Disposable)&#39; in &#39;com.intellij.ide.util.projectWizard.AbstractModuleBuilder&#39;; attempting to use incompatible return type```","body":"Thank you very much for the answer. I am still having a problem however. I am getting this now: <code>&#39;getCustomOptionsStep(WizardContext, Disposable)&#39; in &#39;org.intellij.sdk.project.wizard.DemoModuleBuilder&#39; clashes with &#39;getCustomOptionsStep(WizardContext, Disposable)&#39; in &#39;com.intellij.ide.util.projectWizard.AbstractModuleBuilder&#39;; attempting to use incompatible return type</code>"},{"owner":{"account_id":7051471,"reputation":703,"user_id":5400374,"display_name":"Samir"},"score":0,"creation_date":1695846965,"post_id":77177430,"comment_id":136080208,"body_markdown":"I am happy to help ,it is maybe related to method signature you have in your subclass (DemoModuleBuilder) does not match the method signature in its superclass or interface (AbstractModuleBuilder), specifically in terms of return type","body":"I am happy to help ,it is maybe related to method signature you have in your subclass (DemoModuleBuilder) does not match the method signature in its superclass or interface (AbstractModuleBuilder), specifically in terms of return type"}],"tags":[],"owner":{"account_id":7051471,"reputation":703,"user_id":5400374,"display_name":"Samir"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695814597,"creation_date":1695709251,"answer_id":77177430,"question_id":77122295,"body_markdown":"From the information you provided and the pastebin links, let&#39;s try to diagnose the issues.\r\n\r\n1. **&quot;Nothing to Show&quot; Issue**:\r\n   The &quot;Nothing to Show&quot; issue typically arises when your custom `ModuleWizardStep` is not being initialized properly or returned correctly in your `ModuleBuilder`.\r\n\r\n2. **Duplicate Wizard Step**:\r\n   When you say &quot;a duplicate shows up&quot; after clicking &quot;Next&quot;, it typically means that your `ModuleBuilder` is returning multiple instances of your custom `ModuleWizardStep`.\r\n\r\nLet&#39;s tackle the problems:\r\n\r\n#### 1. Address the &quot;Nothing to Show&quot; Issue:\r\nEnsure that your `DemoModuleBuilder`&#39;s `getModuleType()` method is returning the correct `ModuleType`. The instance you return from `getModuleType()` should match the instance that is registered in your `plugin.xml`.\r\n\r\nIn `DemoModuleBuilder.java`:\r\n\r\n```java\r\n@Override\r\npublic ModuleType&lt;?&gt; getModuleType() {\r\n    return DemoModuleType.getInstance();\r\n}\r\n```\r\n\r\nAnd in `DemoModuleType.java`, ensure your `DemoModuleType` singleton is properly initialized:\r\n\r\n```java\r\npublic static DemoModuleType getInstance() {\r\n    return (DemoModuleType) ModuleTypeManager.getInstance().findByID(ID);\r\n}\r\n```\r\n\r\n#### 2. Address the Duplicate Wizard Step Issue:\r\n\r\nEnsure that you&#39;re only returning one instance of your `ModuleWizardStep` in the `getCustomOptionsStep()` of your `DemoModuleBuilder`. Any other methods that can return a `ModuleWizardStep` should also be checked to ensure they&#39;re not inadvertently adding additional steps.\r\n\r\nIn `DemoModuleBuilder.java`:\r\n\r\n```java\r\n@Override\r\npublic ModuleWizardStep[] getCustomOptionsStep(WizardContext context, Disposable parentDisposable) {\r\n    return new ModuleWizardStep[]{\r\n        new DemoModuleWizardStep()\r\n    };\r\n}\r\n```\r\n\r\nMake sure that if you override other methods like `createWizardSteps()`, they are not inadvertently adding extra steps.","title":"IntelliJ plugin not showing data on the main Project creation Wizard, instead I need to click next. What can cause this?","body":"<p>From the information you provided and the pastebin links, let's try to diagnose the issues.</p>\n<ol>\n<li><p><strong>&quot;Nothing to Show&quot; Issue</strong>:\nThe &quot;Nothing to Show&quot; issue typically arises when your custom <code>ModuleWizardStep</code> is not being initialized properly or returned correctly in your <code>ModuleBuilder</code>.</p>\n</li>\n<li><p><strong>Duplicate Wizard Step</strong>:\nWhen you say &quot;a duplicate shows up&quot; after clicking &quot;Next&quot;, it typically means that your <code>ModuleBuilder</code> is returning multiple instances of your custom <code>ModuleWizardStep</code>.</p>\n</li>\n</ol>\n<p>Let's tackle the problems:</p>\n<h4>1. Address the &quot;Nothing to Show&quot; Issue:</h4>\n<p>Ensure that your <code>DemoModuleBuilder</code>'s <code>getModuleType()</code> method is returning the correct <code>ModuleType</code>. The instance you return from <code>getModuleType()</code> should match the instance that is registered in your <code>plugin.xml</code>.</p>\n<p>In <code>DemoModuleBuilder.java</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic ModuleType&lt;?&gt; getModuleType() {\n    return DemoModuleType.getInstance();\n}\n</code></pre>\n<p>And in <code>DemoModuleType.java</code>, ensure your <code>DemoModuleType</code> singleton is properly initialized:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static DemoModuleType getInstance() {\n    return (DemoModuleType) ModuleTypeManager.getInstance().findByID(ID);\n}\n</code></pre>\n<h4>2. Address the Duplicate Wizard Step Issue:</h4>\n<p>Ensure that you're only returning one instance of your <code>ModuleWizardStep</code> in the <code>getCustomOptionsStep()</code> of your <code>DemoModuleBuilder</code>. Any other methods that can return a <code>ModuleWizardStep</code> should also be checked to ensure they're not inadvertently adding additional steps.</p>\n<p>In <code>DemoModuleBuilder.java</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic ModuleWizardStep[] getCustomOptionsStep(WizardContext context, Disposable parentDisposable) {\n    return new ModuleWizardStep[]{\n        new DemoModuleWizardStep()\n    };\n}\n</code></pre>\n<p>Make sure that if you override other methods like <code>createWizardSteps()</code>, they are not inadvertently adding extra steps.</p>\n"}],"owner":{"account_id":21268771,"reputation":75,"user_id":15648623,"display_name":"elpideus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":104,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695814597,"creation_date":1694961628,"question_id":77122295,"body_markdown":"I am making a plugin for Intellij Idea and I am encountering a problem in the project creation phase.\r\n\r\nWhen I click on my plugin in the Project Creation Wizard &quot;Additional Libraries and Frameworks:&quot; with a big square with &quot;Nothing to show&quot; in the center shows up.\r\nI have to click on the &quot;Next&quot; button in order for my settings to show up. \r\nI do not understand what is causing this. Below my plugin.xml if you need it.\r\n\r\n```xml\r\n&lt;!-- Copyright 2000-2023 JetBrains s.r.o. and other contributors. Use of this source code is governed by the Apache 2.0 license that can be found in the LICENSE file. --&gt;\r\n&lt;!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html --&gt;\r\n\r\n&lt;idea-plugin&gt;\r\n\r\n  &lt;!-- Unique id for this plugin. Must stay constant for the life of the plugin. --&gt;\r\n  &lt;id&gt;org.intellij.sdk.project.wizard&lt;/id&gt;\r\n\r\n  &lt;!-- Text to display as name on Settings | Plugin page --&gt;\r\n  &lt;name&gt;SDK: Project Wizard Demo&lt;/name&gt;\r\n\r\n  &lt;!-- Product and plugin compatibility requirements --&gt;\r\n  &lt;depends&gt;com.intellij.modules.platform&lt;/depends&gt;\r\n\r\n  &lt;!-- Text to display as description on Settings | Plugin page --&gt;\r\n  &lt;description&gt;\r\n    &lt;![CDATA[\r\n      Demonstrates working with the Project Wizard.\r\n    ]]&gt;\r\n  &lt;/description&gt;\r\n  &lt;change-notes&gt;\r\n    &lt;![CDATA[\r\n      &lt;ul&gt;\r\n        &lt;li&gt;&lt;b&gt;2.0.0&lt;/b&gt; Convert to Gradle-based plugin&lt;/li&gt;\r\n        &lt;li&gt;&lt;b&gt;1.0.0&lt;/b&gt; Release 2018.3 and earlier.&lt;/li&gt;\r\n      &lt;/ul&gt;\r\n    ]]&gt;\r\n  &lt;/change-notes&gt;\r\n\r\n  &lt;!-- Text to display as company information on Settings | Plugin page --&gt;\r\n  &lt;vendor url=&quot;https://plugins.jetbrains.com&quot;&gt;IntelliJ Platform SDK&lt;/vendor&gt;\r\n\r\n  &lt;extensions defaultExtensionNs=&quot;com.intellij&quot;&gt;\r\n    &lt;moduleType\r\n            id=&quot;DEMO_MODULE_TYPE&quot;\r\n            implementationClass=&quot;org.intellij.sdk.project.wizard.DemoModuleType&quot;/&gt;\r\n  &lt;/extensions&gt;\r\n\r\n&lt;/idea-plugin&gt;\r\n```\r\n\r\nUPDATE:\r\n\r\nI managed to make the &quot;Additional Libraries and Frameworks:&quot; section be replaced my my plugin&#39;s Wizard Step. However now, when I press &quot;Next&quot;, a duplicate shows up.\r\n\r\nUPDATE 2:\r\nHere are the Pastebin links to my code:\r\n\r\n    DemoModuleWizardStep.java: https://pastebin.com/tHSw0bbS\r\n    DemoModuleType.java: https://pastebin.com/QBh5LkDg\r\n    DemoModuleBuilder.java: https://pastebin.com/BBhCMPNd\r\n\r\nAlso, I am editing the IntelliJ IDEA&#39;s code found here: \r\nhttps://github.com/JetBrains/intellij-sdk-code-samples/tree/main/project_wizard\r\n\r\n\r\n  [1]: https://github.com/JetBrains/intellij-sdk-code-samples/tree/main/project_wizard","title":"IntelliJ plugin not showing data on the main Project creation Wizard, instead I need to click next. What can cause this?","body":"<p>I am making a plugin for Intellij Idea and I am encountering a problem in the project creation phase.</p>\n<p>When I click on my plugin in the Project Creation Wizard &quot;Additional Libraries and Frameworks:&quot; with a big square with &quot;Nothing to show&quot; in the center shows up.\nI have to click on the &quot;Next&quot; button in order for my settings to show up.\nI do not understand what is causing this. Below my plugin.xml if you need it.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;!-- Copyright 2000-2023 JetBrains s.r.o. and other contributors. Use of this source code is governed by the Apache 2.0 license that can be found in the LICENSE file. --&gt;\n&lt;!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html --&gt;\n\n&lt;idea-plugin&gt;\n\n  &lt;!-- Unique id for this plugin. Must stay constant for the life of the plugin. --&gt;\n  &lt;id&gt;org.intellij.sdk.project.wizard&lt;/id&gt;\n\n  &lt;!-- Text to display as name on Settings | Plugin page --&gt;\n  &lt;name&gt;SDK: Project Wizard Demo&lt;/name&gt;\n\n  &lt;!-- Product and plugin compatibility requirements --&gt;\n  &lt;depends&gt;com.intellij.modules.platform&lt;/depends&gt;\n\n  &lt;!-- Text to display as description on Settings | Plugin page --&gt;\n  &lt;description&gt;\n    &lt;![CDATA[\n      Demonstrates working with the Project Wizard.\n    ]]&gt;\n  &lt;/description&gt;\n  &lt;change-notes&gt;\n    &lt;![CDATA[\n      &lt;ul&gt;\n        &lt;li&gt;&lt;b&gt;2.0.0&lt;/b&gt; Convert to Gradle-based plugin&lt;/li&gt;\n        &lt;li&gt;&lt;b&gt;1.0.0&lt;/b&gt; Release 2018.3 and earlier.&lt;/li&gt;\n      &lt;/ul&gt;\n    ]]&gt;\n  &lt;/change-notes&gt;\n\n  &lt;!-- Text to display as company information on Settings | Plugin page --&gt;\n  &lt;vendor url=&quot;https://plugins.jetbrains.com&quot;&gt;IntelliJ Platform SDK&lt;/vendor&gt;\n\n  &lt;extensions defaultExtensionNs=&quot;com.intellij&quot;&gt;\n    &lt;moduleType\n            id=&quot;DEMO_MODULE_TYPE&quot;\n            implementationClass=&quot;org.intellij.sdk.project.wizard.DemoModuleType&quot;/&gt;\n  &lt;/extensions&gt;\n\n&lt;/idea-plugin&gt;\n</code></pre>\n<p>UPDATE:</p>\n<p>I managed to make the &quot;Additional Libraries and Frameworks:&quot; section be replaced my my plugin's Wizard Step. However now, when I press &quot;Next&quot;, a duplicate shows up.</p>\n<p>UPDATE 2:\nHere are the Pastebin links to my code:</p>\n<pre><code>DemoModuleWizardStep.java: https://pastebin.com/tHSw0bbS\nDemoModuleType.java: https://pastebin.com/QBh5LkDg\nDemoModuleBuilder.java: https://pastebin.com/BBhCMPNd\n</code></pre>\n<p>Also, I am editing the IntelliJ IDEA's code found here:\n<a href=\"https://github.com/JetBrains/intellij-sdk-code-samples/tree/main/project_wizard\" rel=\"nofollow noreferrer\">https://github.com/JetBrains/intellij-sdk-code-samples/tree/main/project_wizard</a></p>\n"},{"tags":["java","quarkus"],"answers":[{"tags":[],"owner":{"account_id":11222708,"reputation":587,"user_id":8233361,"display_name":"Claudio Weiler"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1670343352,"creation_date":1670343352,"answer_id":74705764,"question_id":74705495,"body_markdown":"There is no such type of `Scheduled` tasks.\r\n\r\n---\r\n\r\nThis design is awkward. Imagine you have 1.000 users, you will have 1.000 tasks, more users, more tasks and threads. Threads are a limited resource, so you will have problems.\r\n\r\nWhat to do? Just create one common tasks, started with application (startup), and do what you need on your active users.","title":"How to make scheduled periodic task started by event in java (quarkus)?","body":"<p>There is no such type of <code>Scheduled</code> tasks.</p>\n<hr />\n<p>This design is awkward. Imagine you have 1.000 users, you will have 1.000 tasks, more users, more tasks and threads. Threads are a limited resource, so you will have problems.</p>\n<p>What to do? Just create one common tasks, started with application (startup), and do what you need on your active users.</p>\n"},{"tags":[],"owner":{"account_id":29491235,"reputation":13,"user_id":22600216,"display_name":"Martin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695813869,"creation_date":1695813869,"answer_id":77187056,"question_id":74705495,"body_markdown":"You can create a Scheduled Task with a start / stop parameter.\r\n\r\n    @Scheduled(every = maxLifetimeBearerToken + &quot;s&quot;, skipExecutionIf = TestPredicate.class)\r\n\r\nHere I created one for Bearer Token Check. If a bearer Toke is already generated, the @Scheduled skipExecutionIf will be false and the scheduler will be run. If the condition is true, it will skip. \r\n\r\nSo you have to set in your Methods to true and false. If user is deleted set          `myPredicate.setSkip(true);`\r\n\r\nOn create user set\r\n\r\n    myPredicate.setSkip(false);\r\n\r\n    @Singleton\r\n    public class TestPredicate implements Scheduled.SkipPredicate {\r\n        private boolean skip = true;\r\n        public boolean isSkip() {\r\n            return skip;\r\n        }\r\n        public void setSkip(boolean skip) {\r\n            this.skip = skip;\r\n        }\r\n        @Override\r\n        public boolean test(ScheduledExecution execution) {\r\n            return skip;\r\n        }\r\n    }\r\n\r\nAnd \r\n\r\n    @Scheduled(cron =&quot;yourCronTrigger&quot;, skipExecutionIf = TestPredicate.class)\r\n    Yourmethod(){......}\r\n\r\n\r\nSorry for my bad english.","title":"How to make scheduled periodic task started by event in java (quarkus)?","body":"<p>You can create a Scheduled Task with a start / stop parameter.</p>\n<pre><code>@Scheduled(every = maxLifetimeBearerToken + &quot;s&quot;, skipExecutionIf = TestPredicate.class)\n</code></pre>\n<p>Here I created one for Bearer Token Check. If a bearer Toke is already generated, the @Scheduled skipExecutionIf will be false and the scheduler will be run. If the condition is true, it will skip.</p>\n<p>So you have to set in your Methods to true and false. If user is deleted set          <code>myPredicate.setSkip(true);</code></p>\n<p>On create user set</p>\n<pre><code>myPredicate.setSkip(false);\n\n@Singleton\npublic class TestPredicate implements Scheduled.SkipPredicate {\n    private boolean skip = true;\n    public boolean isSkip() {\n        return skip;\n    }\n    public void setSkip(boolean skip) {\n        this.skip = skip;\n    }\n    @Override\n    public boolean test(ScheduledExecution execution) {\n        return skip;\n    }\n}\n</code></pre>\n<p>And</p>\n<pre><code>@Scheduled(cron =&quot;yourCronTrigger&quot;, skipExecutionIf = TestPredicate.class)\nYourmethod(){......}\n</code></pre>\n<p>Sorry for my bad english.</p>\n"}],"owner":{"account_id":27166750,"reputation":11,"user_id":20704160,"display_name":"seeusoon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":282,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1695813869,"creation_date":1670342311,"question_id":74705495,"body_markdown":"I have the method A creating for example a new user in DB and returning user&#39;s id\r\nAnd after new user creation periodic task tracking his status must be started, after user&#39;s deletion this task must be stopped\r\nWhat java and quarkus tools can schedule periodic tasks by event and take user&#39;s id as a parameter?\r\n\r\nI have tried using ScheduledExecutorService and @Scheduled quarkus annotation \r\nCould not find the way to make @Scheduled take parameters","title":"How to make scheduled periodic task started by event in java (quarkus)?","body":"<p>I have the method A creating for example a new user in DB and returning user's id\nAnd after new user creation periodic task tracking his status must be started, after user's deletion this task must be stopped\nWhat java and quarkus tools can schedule periodic tasks by event and take user's id as a parameter?</p>\n<p>I have tried using ScheduledExecutorService and @Scheduled quarkus annotation\nCould not find the way to make @Scheduled take parameters</p>\n"},{"tags":["java","hibernate"],"comments":[{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":1,"creation_date":1695972690,"post_id":77187046,"comment_id":136097084,"body_markdown":"witch version of hibernate are you using ? try to replace all imports from `javax.` to `jakarta.` Also add `@Table(name = &quot;user_entity&quot;)` on `class User`.","body":"witch version of hibernate are you using ? try to replace all imports from <code>javax.</code> to <code>jakarta.</code> Also add <code>@Table(name = &quot;user_entity&quot;)</code> on <code>class User</code>."}],"owner":{"account_id":6514072,"reputation":469,"user_id":5040460,"accept_rate":50,"display_name":"Sunny Kasera"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695813776,"creation_date":1695813776,"question_id":77187046,"body_markdown":"I am trying to build a small application using Hibernate in Java. \r\nI have prepared this code with one of the tutorials available on the internet. But it seems that is the old one.\r\nBut somehow I got stuck at this point. And not moving anywhere unless the issue is fixed. Small help will be precious.\r\n\r\nhibernate.cfg.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;\r\n    &lt;!DOCTYPE hibernate-configuration PUBLIC\r\n            &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;\r\n            &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\r\n    \r\n    &lt;hibernate-configuration&gt;\r\n        &lt;session-factory&gt;\r\n            &lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.MySQLDialect&lt;/property&gt;\r\n            &lt;property name=&quot;connection.driver_class&quot;&gt;com.mysql.cj.jdbc.Driver&lt;/property&gt;\r\n            &lt;property name=&quot;connection.url&quot;&gt;jdbc:mysql://localhost:3306/test&lt;/property&gt;\r\n            &lt;property name=&quot;connection.username&quot;&gt;root&lt;/property&gt;\r\n            &lt;property name=&quot;connection.password&quot;&gt;&lt;/property&gt;\r\n            &lt;property name=&quot;hbm2ddl.auto&quot;&gt;update&lt;/property&gt;\r\n            &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\r\n            &lt;property name=&quot;current_session_context_class&quot;&gt;thread&lt;/property&gt;\r\n            &lt;property name=&quot;hibernate.archive.autodetection&quot;&gt;class, hbm&lt;/property&gt;\r\n    \r\n            &lt;mapping class=&quot;com.test.User&quot; /&gt;\r\n        &lt;/session-factory&gt;\r\n    &lt;/hibernate-configuration&gt;\r\n\r\nUser.java\r\n\r\n    package com.test;\r\n    \r\n    import javax.persistence.Entity;\r\n    import javax.persistence.Id;\r\n    \r\n    \r\n    @Entity\r\n    public class User {\r\n      @Id\r\n      private int id;\r\n      private String name;\r\n    \r\n      public User(int id, String name){\r\n        super();\r\n        this.id = id;\r\n        this.name = name;\r\n      }\r\n    \r\n      public int getId() {\r\n        return id;\r\n      }\r\n    \r\n      public void setId(int id) {\r\n        this.id = id;\r\n      }\r\n    \r\n      public String getName() {\r\n        return name;\r\n      }\r\n    \r\n      public void setName(String name) {\r\n        this.name = name;\r\n      }\r\n    \r\n    }\r\n\r\nApp.java\r\n\r\n    package com.test;\r\n    \r\n    import org.hibernate.Session;\r\n    import org.hibernate.SessionFactory;\r\n    import org.hibernate.Transaction;\r\n    import org.hibernate.cfg.Configuration;\r\n    \r\n    \r\n    public class App {\r\n      public static void main(String[] args) {\r\n    \r\n        System.out.println(&quot;Project Started...&quot;);\r\n    \r\n        try\r\n        {\r\n          Configuration con = new Configuration();\r\n    \r\n          con.configure().addAnnotatedClass(User.class);\r\n    \r\n          SessionFactory sf = con.buildSessionFactory();\r\n    \r\n          Session session = sf.openSession();\r\n    \r\n          Transaction tx = session.beginTransaction();\r\n    \r\n          User u1 = new User(1, &quot;Sunny&quot;);\r\n    \r\n          session.persist(u1);\r\n    \r\n          tx.commit();\r\n    \r\n          session.close();\r\n    \r\n    \r\n    \r\n        }\r\n        catch (Exception e)\r\n        {\r\n          System.out.println(e.getMessage());\r\n          e.printStackTrace();\r\n        }\r\n      }\r\n    }\r\n\r\n\r\nError is here\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/mPFhX.png","title":"Unable to locate persister (UnknownEntityException)","body":"<p>I am trying to build a small application using Hibernate in Java.\nI have prepared this code with one of the tutorials available on the internet. But it seems that is the old one.\nBut somehow I got stuck at this point. And not moving anywhere unless the issue is fixed. Small help will be precious.</p>\n<p>hibernate.cfg.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;\n&lt;!DOCTYPE hibernate-configuration PUBLIC\n        &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;\n        &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\n\n&lt;hibernate-configuration&gt;\n    &lt;session-factory&gt;\n        &lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.MySQLDialect&lt;/property&gt;\n        &lt;property name=&quot;connection.driver_class&quot;&gt;com.mysql.cj.jdbc.Driver&lt;/property&gt;\n        &lt;property name=&quot;connection.url&quot;&gt;jdbc:mysql://localhost:3306/test&lt;/property&gt;\n        &lt;property name=&quot;connection.username&quot;&gt;root&lt;/property&gt;\n        &lt;property name=&quot;connection.password&quot;&gt;&lt;/property&gt;\n        &lt;property name=&quot;hbm2ddl.auto&quot;&gt;update&lt;/property&gt;\n        &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\n        &lt;property name=&quot;current_session_context_class&quot;&gt;thread&lt;/property&gt;\n        &lt;property name=&quot;hibernate.archive.autodetection&quot;&gt;class, hbm&lt;/property&gt;\n\n        &lt;mapping class=&quot;com.test.User&quot; /&gt;\n    &lt;/session-factory&gt;\n&lt;/hibernate-configuration&gt;\n</code></pre>\n<p>User.java</p>\n<pre><code>package com.test;\n\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\n\n\n@Entity\npublic class User {\n  @Id\n  private int id;\n  private String name;\n\n  public User(int id, String name){\n    super();\n    this.id = id;\n    this.name = name;\n  }\n\n  public int getId() {\n    return id;\n  }\n\n  public void setId(int id) {\n    this.id = id;\n  }\n\n  public String getName() {\n    return name;\n  }\n\n  public void setName(String name) {\n    this.name = name;\n  }\n\n}\n</code></pre>\n<p>App.java</p>\n<pre><code>package com.test;\n\nimport org.hibernate.Session;\nimport org.hibernate.SessionFactory;\nimport org.hibernate.Transaction;\nimport org.hibernate.cfg.Configuration;\n\n\npublic class App {\n  public static void main(String[] args) {\n\n    System.out.println(&quot;Project Started...&quot;);\n\n    try\n    {\n      Configuration con = new Configuration();\n\n      con.configure().addAnnotatedClass(User.class);\n\n      SessionFactory sf = con.buildSessionFactory();\n\n      Session session = sf.openSession();\n\n      Transaction tx = session.beginTransaction();\n\n      User u1 = new User(1, &quot;Sunny&quot;);\n\n      session.persist(u1);\n\n      tx.commit();\n\n      session.close();\n\n\n\n    }\n    catch (Exception e)\n    {\n      System.out.println(e.getMessage());\n      e.printStackTrace();\n    }\n  }\n}\n</code></pre>\n<p>Error is here</p>\n<p><a href=\"https://i.stack.imgur.com/mPFhX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mPFhX.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","jpa","spring-data-jpa","named-query"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1695844206,"post_id":77186841,"comment_id":136079763,"body_markdown":"I might be wrong, but I thought the Query annotation would only support issuing a single statement - this file you are showing is multiple statements. IMO You are better off writing a method implementation that reads your file and issues each as a separate query/statement, or putting something like that in the DB as a stored procedure","body":"I might be wrong, but I thought the Query annotation would only support issuing a single statement - this file you are showing is multiple statements. IMO You are better off writing a method implementation that reads your file and issues each as a separate query/statement, or putting something like that in the DB as a stored procedure"},{"owner":{"account_id":3097035,"reputation":1105,"user_id":2622026,"accept_rate":71,"display_name":"hermit"},"score":0,"creation_date":1695882423,"post_id":77186841,"comment_id":136083626,"body_markdown":"@Chris You are correct. I ended up implementing it via stored procedures.","body":"@Chris You are correct. I ended up implementing it via stored procedures."}],"owner":{"account_id":3097035,"reputation":1105,"user_id":2622026,"accept_rate":71,"display_name":"hermit"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695813585,"creation_date":1695812222,"question_id":77186841,"body_markdown":"I have a requirement to delete an entity, let&#39;s say, `main_entity` and this entity has many dependent entities. So, I need to perform deletion in this manner:\r\n\r\n    delete from dependent_entity_1 where main_entity_id IN :entity_ids;\r\n    delete from dependent_entity_2 where main_entity_id IN :entity_ids;\r\n    delete from dependent_entity_3 where main_entity_id IN :entity_ids;\r\n    delete from dependent_entity_4 where main_entity_id IN :entity_ids;\r\n    delete from main_entity where id IN ::entity_ids;\r\n\r\nSince, there are a lot of dependent entities, I want to put the deletion query in a separate file instead of hard-coding inside the repository class.\r\n\r\nI tried using named query as mentioned here: https://stackoverflow.com/questions/44937306/how-to-refer-long-query-written-in-external-file-in-spring-data-jpa-query\r\n\r\nThe properties file look like this:\r\n\r\n    MainEntity.deleteEntities=delete from dependent_entity_1 where main_entity_id IN :entity_id;\\\r\n    delete from dependent_entity_2 where main_entity_id IN :entity_id;\\\r\n    delete from dependent_entity_3 where main_entity_id IN :entity_id;\\\r\n    delete from dependent_entity_4 where main_entity_id IN :entity_id;\\\r\n    delete from main_entity where id IN ::entity_id;\\\r\n\r\nIt is working for a single query but for multiple queries it is giving an exception: `Named parameter not bound :entity_ids;`\r\n\r\nSo, it might not support executing multiple queries.\r\n\r\nIs there any way to do this or am I doing anything incorrectly here?\r\n\r\n","title":"In Spring data jpa, how to use external sql file having multiple queries in @Query annotation","body":"<p>I have a requirement to delete an entity, let's say, <code>main_entity</code> and this entity has many dependent entities. So, I need to perform deletion in this manner:</p>\n<pre><code>delete from dependent_entity_1 where main_entity_id IN :entity_ids;\ndelete from dependent_entity_2 where main_entity_id IN :entity_ids;\ndelete from dependent_entity_3 where main_entity_id IN :entity_ids;\ndelete from dependent_entity_4 where main_entity_id IN :entity_ids;\ndelete from main_entity where id IN ::entity_ids;\n</code></pre>\n<p>Since, there are a lot of dependent entities, I want to put the deletion query in a separate file instead of hard-coding inside the repository class.</p>\n<p>I tried using named query as mentioned here: <a href=\"https://stackoverflow.com/questions/44937306/how-to-refer-long-query-written-in-external-file-in-spring-data-jpa-query\">How to refer long query, written in external file, in Spring data jpa @Query</a></p>\n<p>The properties file look like this:</p>\n<pre><code>MainEntity.deleteEntities=delete from dependent_entity_1 where main_entity_id IN :entity_id;\\\ndelete from dependent_entity_2 where main_entity_id IN :entity_id;\\\ndelete from dependent_entity_3 where main_entity_id IN :entity_id;\\\ndelete from dependent_entity_4 where main_entity_id IN :entity_id;\\\ndelete from main_entity where id IN ::entity_id;\\\n</code></pre>\n<p>It is working for a single query but for multiple queries it is giving an exception: <code>Named parameter not bound :entity_ids;</code></p>\n<p>So, it might not support executing multiple queries.</p>\n<p>Is there any way to do this or am I doing anything incorrectly here?</p>\n"},{"tags":["java","jparsec"],"comments":[{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":0,"creation_date":1695763687,"post_id":77183473,"comment_id":136067475,"body_markdown":"I never used jparsec, but in ANTLR the tokenizer delivers the source location of the token so the parser can make use of that information to understand. The problem would not be to use a custom lexer here. Have you tried using https://github.com/jparsec/jparsec/blob/master/jparsec/src/main/java/org/jparsec/Token.java#L48?","body":"I never used jparsec, but in ANTLR the tokenizer delivers the source location of the token so the parser can make use of that information to understand. The problem would not be to use a custom lexer here. Have you tried using <a href=\"https://github.com/jparsec/jparsec/blob/master/jparsec/src/main/java/org/jparsec/Token.java#L48\" rel=\"nofollow noreferrer\">github.com/jparsec/jparsec/blob/master/jparsec/src/main/java&zwnj;&#8203;/&hellip;</a>?"}],"owner":{"account_id":17032226,"reputation":1,"user_id":12322137,"display_name":"niosega"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695813340,"creation_date":1695763069,"question_id":77183473,"body_markdown":"I am writing a parser for a language that has very complex lexer rules. For example, the lexer decision depends on the column at which a token appears. I wanted to use `jparsec`, but I can&#39;t use its internal tokenizer mechanism. Thus, I need to use my own tokenizer, that generates `jparsec` token.\r\n\r\nUnfortunately, I can&#39;t find how to write code to &#39;give&#39; these tokens to `jparsec` to do only the parsing phase.\r\n\r\nThere is already a Stack Overflow question related to this subject, but the provided solution was to use `jparsec` tokenizer mechanism and I really can&#39;t.\r\n\r\nI tried different approach, like using the `from` method of the Parser class. But without success. Does anybody know how to use `jparsec` only for the parsing phase and not the lexing one?","title":"Use custom lexer with jparsec","body":"<p>I am writing a parser for a language that has very complex lexer rules. For example, the lexer decision depends on the column at which a token appears. I wanted to use <code>jparsec</code>, but I can't use its internal tokenizer mechanism. Thus, I need to use my own tokenizer, that generates <code>jparsec</code> token.</p>\n<p>Unfortunately, I can't find how to write code to 'give' these tokens to <code>jparsec</code> to do only the parsing phase.</p>\n<p>There is already a Stack Overflow question related to this subject, but the provided solution was to use <code>jparsec</code> tokenizer mechanism and I really can't.</p>\n<p>I tried different approach, like using the <code>from</code> method of the Parser class. But without success. Does anybody know how to use <code>jparsec</code> only for the parsing phase and not the lexing one?</p>\n"},{"tags":["java","linux","ubuntu","intellij-idea","sudo"],"comments":[{"owner":{"account_id":3739854,"reputation":1191,"user_id":3109834,"accept_rate":60,"display_name":"lhoworko"},"score":7,"creation_date":1431111559,"post_id":30130934,"comment_id":48372007,"body_markdown":"Intellij is on the Ubuntu Software Center. Would be a lot easier to install for a beginner.","body":"Intellij is on the Ubuntu Software Center. Would be a lot easier to install for a beginner."},{"owner":{"account_id":1911219,"reputation":5572,"user_id":1940850,"display_name":"karel"},"score":0,"creation_date":1439734639,"post_id":30130934,"comment_id":51972956,"body_markdown":"It would be easier to install from the Ubuntu Software Center and IntelliJ installed that way works very well in Ubuntu. It should be noted that IntelliJ IDEA is only available in the default repositories of currently supported versions of Ubuntu for Ubuntu 12.04 and Ubuntu 14.04.","body":"It would be easier to install from the Ubuntu Software Center and IntelliJ installed that way works very well in Ubuntu. It should be noted that IntelliJ IDEA is only available in the default repositories of currently supported versions of Ubuntu for Ubuntu 12.04 and Ubuntu 14.04."},{"owner":{"account_id":4718545,"reputation":3600,"user_id":3817111,"accept_rate":15,"display_name":"Menasheh"},"score":0,"creation_date":1519051332,"post_id":30130934,"comment_id":84740471,"body_markdown":"Since it&#39;s only available on the software center through third parties and not Jetbrains itself (and therefore not necessarily updated for new versions of jetbrains software or of ubuntu), it&#39;s better to do it the official way, using the toolbox app. See [my answer](https://stackoverflow.com/a/41863492/3817111), which has much fewer steps than the accepted one, and is more user friendly.","body":"Since it&#39;s only available on the software center through third parties and not Jetbrains itself (and therefore not necessarily updated for new versions of jetbrains software or of ubuntu), it&#39;s better to do it the official way, using the toolbox app. See <a href=\"https://stackoverflow.com/a/41863492/3817111\">my answer</a>, which has much fewer steps than the accepted one, and is more user friendly."},{"owner":{"account_id":9413340,"reputation":101,"user_id":7001739,"display_name":"Anita W"},"score":0,"creation_date":1606389874,"post_id":30130934,"comment_id":114952380,"body_markdown":"&gt; &quot;it&#39;s only available on the software center through third parties&quot; - when I look in the software center it says the developer is &#39;jetbrains&#39; with a green tick, which implies it&#39;s from Jetbrains, no?","body":"&gt; &quot;it&#39;s only available on the software center through third parties&quot; - when I look in the software center it says the developer is &#39;jetbrains&#39; with a green tick, which implies it&#39;s from Jetbrains, no?"},{"owner":{"account_id":5846606,"reputation":313,"user_id":7009806,"display_name":"Olivier"},"score":0,"creation_date":1668337534,"post_id":30130934,"comment_id":131376223,"body_markdown":"I know the question was posted before distribution 16.04 (with snapd) was released, but this answer may be worthwhile for anybody reading it from now on:\nJust have a look at [the official website](https://www.jetbrains.com/idea/download/#section=linux) with the explicit command lines to type in a terminal.","body":"I know the question was posted before distribution 16.04 (with snapd) was released, but this answer may be worthwhile for anybody reading it from now on: Just have a look at <a href=\"https://www.jetbrains.com/idea/download/#section=linux\" rel=\"nofollow noreferrer\">the official website</a> with the explicit command lines to type in a terminal."}],"answers":[{"comments":[{"owner":{"account_id":3518834,"reputation":17752,"user_id":3828228,"accept_rate":98,"display_name":"benscabbia"},"score":3,"creation_date":1455964635,"post_id":30131216,"comment_id":58734028,"body_markdown":"if anyone is getting a `tools.jar is not in idea classpath` then you can run this `sudo apt-get install openjdk-7-jdk`","body":"if anyone is getting a <code>tools.jar is not in idea classpath</code> then you can run this <code>sudo apt-get install openjdk-7-jdk</code>"},{"owner":{"account_id":503296,"reputation":1985,"user_id":1772342,"accept_rate":56,"display_name":"breandan"},"score":1,"creation_date":1469133255,"post_id":30131216,"comment_id":64424761,"body_markdown":"I updated the bash script to use a more reliable source for the download URL. You can find a working version here: http://breandan.net/2014/08/18/shell-script/","body":"I updated the bash script to use a more reliable source for the download URL. You can find a working version here: <a href=\"http://breandan.net/2014/08/18/shell-script/\" rel=\"nofollow noreferrer\">breandan.net/2014/08/18/shell-script</a>"},{"owner":{"account_id":2009443,"reputation":3774,"user_id":1798304,"accept_rate":92,"display_name":"MalaKa"},"score":1,"creation_date":1469199303,"post_id":30131216,"comment_id":64453018,"body_markdown":"@breandan Thanks for the hint, I&#39;ve updated my answer.","body":"@breandan Thanks for the hint, I&#39;ve updated my answer."},{"owner":{"account_id":8123508,"reputation":427,"user_id":6119326,"display_name":"Karl"},"score":2,"creation_date":1506191812,"post_id":30131216,"comment_id":79724229,"body_markdown":"The shortcut command fails for me because of permissions, but Intellij offers to create a desktop entry when I open it anyway.","body":"The shortcut command fails for me because of permissions, but Intellij offers to create a desktop entry when I open it anyway."},{"owner":{"account_id":476761,"reputation":24593,"user_id":887836,"accept_rate":96,"display_name":"Alexander Oh"},"score":2,"creation_date":1512070788,"post_id":30131216,"comment_id":82120090,"body_markdown":"if you run this stuff, make a link from idea-version to idea, so when getting a new version you just update the link. instead of all files you spill around on your laptop","body":"if you run this stuff, make a link from idea-version to idea, so when getting a new version you just update the link. instead of all files you spill around on your laptop"},{"owner":{"account_id":503296,"reputation":1985,"user_id":1772342,"accept_rate":56,"display_name":"breandan"},"score":0,"creation_date":1516343941,"post_id":30131216,"comment_id":83655888,"body_markdown":"Updated the script again. It now supports several more IDEs and is less prone to failure. http://breandan.net/2014/08/18/shell-script/","body":"Updated the script again. It now supports several more IDEs and is less prone to failure. <a href=\"http://breandan.net/2014/08/18/shell-script/\" rel=\"nofollow noreferrer\">breandan.net/2014/08/18/shell-script</a>"},{"owner":{"account_id":1284195,"reputation":3111,"user_id":1237617,"accept_rate":77,"display_name":"Jakub Bochenski"},"score":1,"creation_date":1526904539,"post_id":30131216,"comment_id":87910377,"body_markdown":"I had to use `echo -e` to expand all the `\\n` in the desktop shortcut","body":"I had to use <code>echo -e</code> to expand all the <code>\\n</code> in the desktop shortcut"},{"owner":{"account_id":1284195,"reputation":3111,"user_id":1237617,"accept_rate":77,"display_name":"Jakub Bochenski"},"score":0,"creation_date":1526904637,"post_id":30131216,"comment_id":87910432,"body_markdown":"Just noticed that IDEA 2018 will create a desktop shortcut for you","body":"Just noticed that IDEA 2018 will create a desktop shortcut for you"},{"owner":{"account_id":503296,"reputation":1985,"user_id":1772342,"accept_rate":56,"display_name":"breandan"},"score":0,"creation_date":1576621945,"post_id":30131216,"comment_id":104957998,"body_markdown":"I have updated the script again to make it more interactive, fixed the download URL, and added an option to remove older versions.","body":"I have updated the script again to make it more interactive, fixed the download URL, and added an option to remove older versions."}],"tags":[],"owner":{"account_id":2009443,"reputation":3774,"user_id":1798304,"accept_rate":92,"display_name":"MalaKa"},"comment_count":9,"down_vote_count":1,"up_vote_count":118,"is_accepted":true,"score":117,"last_activity_date":1526975880,"creation_date":1431112310,"answer_id":30131216,"question_id":30130934,"body_markdown":"**Note:** This answer covers the installation of IntelliJ IDEA. For an extended script, that covers more JetBrains IDEs, as well as help for font rendering issues, please see [this link][1] provided by brendan.  \r\nFurthermore, a manual Desktop Entry creation is optional, as newer versions of IntelliJ offer to create it on first startup.\r\n\r\n---\r\n\r\nI have my intellij int /opt folder. So what I do is: \r\n\r\n * Download Intellij\r\n * Extract intellij to /opt-folder: `sudo tar -xvf &lt;intellij.tar&gt; -C /opt/` (the -C option extracts the tar to the folder /opt/)\r\n * Create a Desktop Entry File called idea.desktop (see example file below) and store it anywhere you want (let&#39;s assume in your home directory)\r\n * Move the idea.desktop from your home directory to /usr/share/applications: `sudo mv ~/idea.desktop /usr/share/applications/`\r\n\r\nNow (in a lot) Ubuntu versions you can start the application after the GUI is restarted. If you don&#39;t know how to do that, you can restart your PC.. \r\n\r\nidea.desktop (this is for community edition version 14.1.2, you have to change the paths in Exec= and Icon= lines if the path is different for you):\r\n\r\n    [Desktop Entry]                                                                 \r\n    Encoding=UTF-8\r\n    Name=IntelliJ IDEA\r\n    Comment=IntelliJ IDEA\r\n    Exec=/opt/ideaIC-14.1.2/bin/idea.sh\r\n    Icon=/opt/ideaIC-14.1.2/bin/idea.png\r\n    Terminal=false\r\n    StartupNotify=true\r\n    Type=Application\r\n\r\n\r\n----------------\r\n**Edit**  \r\nI also found a shell script that does this for you, [here][1]. The given script in the link installs Oracle Java 7 for you and gives you the choice between Community and Ultimate Edition. It then automatically downloads the newest version for you, extracts it and creates a desktop entry.  \r\nI have modified the scripts to fulfill my needs. It does not install java 8 and it does not ask you for the version you want to install (but the version is kept in a variable to easily change that). You can also update Intellij with it. But then you have to (so far) manually remove the old folder! This is what i got: \r\n\r\n**Edit2**  \r\nHere is the new version of the script. As mentioned in the comments, breandan has updated the script to be more stable (the jetbrains website changed its behavior). Thanks for the update, breandan. \r\n\r\n    #!/bin/sh\r\n\r\n    echo &quot;Installing IntelliJ IDEA...&quot;\r\n    \r\n    # We need root to install\r\n    [ $(id -u) != &quot;0&quot; ] &amp;&amp; exec sudo &quot;$0&quot; &quot;$@&quot;\r\n    \r\n    # Attempt to install a JDK\r\n    # apt-get install openjdk-8-jdk\r\n    # add-apt-repository ppa:webupd8team/java &amp;&amp; apt-get update &amp;&amp; apt-get install oracle-java8-installer\r\n    \r\n    # Prompt for edition\r\n    #while true; do\r\n    #    read -p &quot;Enter &#39;U&#39; for Ultimate or &#39;C&#39; for Community: &quot; ed \r\n    #    case $ed in\r\n    #        [Uu]* ) ed=U; break;;\r\n    #        [Cc]* ) ed=C; break;;\r\n    #    esac\r\n    #done\r\n    ed=C\r\n    \r\n    # Fetch the most recent version\r\n    VERSION=$(wget &quot;https://www.jetbrains.com/intellij-repository/releases&quot; -qO- | grep -P -o -m 1 &quot;(?&lt;=https://www.jetbrains.com/intellij-repository/releases/com/jetbrains/intellij/idea/BUILD/)[^/]+(?=/)&quot;)\r\n    \r\n    # Prepend base URL for download\r\n    URL=&quot;https://download.jetbrains.com/idea/ideaI$ed-$VERSION.tar.gz&quot;\r\n    \r\n    echo $URL\r\n    \r\n    # Truncate filename\r\n    FILE=$(basename ${URL})\r\n    \r\n    # Set download directory\r\n    DEST=~/Downloads/$FILE\r\n    \r\n    echo &quot;Downloading idea-I$ed-$VERSION to $DEST...&quot;\r\n    \r\n    # Download binary\r\n    wget -cO ${DEST} ${URL} --read-timeout=5 --tries=0\r\n    \r\n    echo &quot;Download complete!&quot;\r\n    \r\n    # Set directory name\r\n    DIR=&quot;/opt/idea-I$ed-$VERSION&quot;\r\n    \r\n    echo &quot;Installing to $DIR&quot;\r\n    \r\n    # Untar file\r\n    if mkdir ${DIR}; then\r\n        tar -xzf ${DEST} -C ${DIR} --strip-components=1\r\n    fi\r\n    \r\n    # Grab executable folder\r\n    BIN=&quot;$DIR/bin&quot;\r\n    \r\n    # Add permissions to install directory\r\n    chmod -R +rwx ${DIR}\r\n    \r\n    # Set desktop shortcut path\r\n    DESK=/usr/share/applications/IDEA.desktop\r\n    \r\n    # Add desktop shortcut\r\n    echo -e &quot;[Desktop Entry]\\nEncoding=UTF-8\\nName=IntelliJ IDEA\\nComment=IntelliJ IDEA\\nExec=${BIN}/idea.sh\\nIcon=${BIN}/idea.png\\nTerminal=false\\nStartupNotify=true\\nType=Application&quot; -e &gt; ${DESK}\r\n    \r\n    # Create symlink entry\r\n    ln -s ${BIN}/idea.sh /usr/local/bin/idea\r\n    \r\n    echo &quot;Done.&quot;  \r\n\r\n------------------\r\n**Old Version** \r\n    \r\n    #!/bin/sh                                                                                                                                   \r\n    \r\n    echo &quot;Installing IntelliJ IDEA...&quot;\r\n    \r\n    # We need root to install\r\n    [ $(id -u) != &quot;0&quot; ] &amp;&amp; exec sudo &quot;$0&quot; &quot;$@&quot;\r\n    \r\n    # define version (ultimate. change to &#39;C&#39; for Community)\r\n    ed=&#39;U&#39;\r\n    \r\n    # Fetch the most recent community edition URL\r\n    URL=$(wget &quot;https://www.jetbrains.com/idea/download/download_thanks.jsp?edition=I${ed}&amp;os=linux&quot; -qO- | grep -o -m 1 &quot;https://download.jetbrains.com/idea/.*gz&quot;)\r\n    \r\n    echo &quot;URL: ${URL}&quot;\r\n    echo &quot;basename(url): $(basename ${URL})&quot;\r\n    \r\n    # Truncate filename\r\n    FILE=$(basename ${URL})\r\n    \r\n    echo &quot;File: ${FILE}&quot;\r\n    \r\n    # Download binary\r\n    wget -cO /tmp/${FILE} ${URL} --read-timeout=5 --tries=0\r\n    \r\n    # Set directory name\r\n    DIR=&quot;${FILE%\\.tar\\.gz}&quot;\r\n    \r\n    # Untar file\r\n    if mkdir /opt/${DIR}; then\r\n        tar -xvzf /tmp/${FILE} -C /opt/${DIR} --strip-components=1\r\n    fi\r\n    \r\n    # Grab executable folder\r\n    BIN=&quot;/opt/$DIR/bin&quot;\r\n    \r\n    # Add permissions to install directory\r\n    chmod 755 ${BIN}/idea.sh\r\n    \r\n    # Set desktop shortcut path\r\n    DESK=/usr/share/applications/IDEA.desktop\r\n    \r\n    # Add desktop shortcut                     \r\n    echo -e &quot;[Desktop Entry]\\nEncoding=UTF-8\\nName=IntelliJ IDEA\\nComment=IntelliJ IDEA\\nExec=${BIN}/idea.sh\\nIcon=${BIN}/idea.png\\nTerminal=false\\nStartupNotify=true\\nType=Application&quot; &gt; ${DESK}\r\n    \r\n    echo &quot;Done.&quot;    \r\n\r\n\r\n  [1]: http://breandan.net/2014/08/18/shell-script/","title":"How to install Intellij IDEA on Ubuntu?","body":"<p><strong>Note:</strong> This answer covers the installation of IntelliJ IDEA. For an extended script, that covers more JetBrains IDEs, as well as help for font rendering issues, please see <a href=\"http://breandan.net/2014/08/18/shell-script/\" rel=\"noreferrer\">this link</a> provided by brendan.<br>\nFurthermore, a manual Desktop Entry creation is optional, as newer versions of IntelliJ offer to create it on first startup.</p>\n\n<hr>\n\n<p>I have my intellij int /opt folder. So what I do is: </p>\n\n<ul>\n<li>Download Intellij</li>\n<li>Extract intellij to /opt-folder: <code>sudo tar -xvf &lt;intellij.tar&gt; -C /opt/</code> (the -C option extracts the tar to the folder /opt/)</li>\n<li>Create a Desktop Entry File called idea.desktop (see example file below) and store it anywhere you want (let's assume in your home directory)</li>\n<li>Move the idea.desktop from your home directory to /usr/share/applications: <code>sudo mv ~/idea.desktop /usr/share/applications/</code></li>\n</ul>\n\n<p>Now (in a lot) Ubuntu versions you can start the application after the GUI is restarted. If you don't know how to do that, you can restart your PC.. </p>\n\n<p>idea.desktop (this is for community edition version 14.1.2, you have to change the paths in Exec= and Icon= lines if the path is different for you):</p>\n\n<pre><code>[Desktop Entry]                                                                 \nEncoding=UTF-8\nName=IntelliJ IDEA\nComment=IntelliJ IDEA\nExec=/opt/ideaIC-14.1.2/bin/idea.sh\nIcon=/opt/ideaIC-14.1.2/bin/idea.png\nTerminal=false\nStartupNotify=true\nType=Application\n</code></pre>\n\n<hr>\n\n<p><strong>Edit</strong><br>\nI also found a shell script that does this for you, <a href=\"http://breandan.net/2014/08/18/shell-script/\" rel=\"noreferrer\">here</a>. The given script in the link installs Oracle Java 7 for you and gives you the choice between Community and Ultimate Edition. It then automatically downloads the newest version for you, extracts it and creates a desktop entry.<br>\nI have modified the scripts to fulfill my needs. It does not install java 8 and it does not ask you for the version you want to install (but the version is kept in a variable to easily change that). You can also update Intellij with it. But then you have to (so far) manually remove the old folder! This is what i got: </p>\n\n<p><strong>Edit2</strong><br>\nHere is the new version of the script. As mentioned in the comments, breandan has updated the script to be more stable (the jetbrains website changed its behavior). Thanks for the update, breandan. </p>\n\n<pre><code>#!/bin/sh\n\necho \"Installing IntelliJ IDEA...\"\n\n# We need root to install\n[ $(id -u) != \"0\" ] &amp;&amp; exec sudo \"$0\" \"$@\"\n\n# Attempt to install a JDK\n# apt-get install openjdk-8-jdk\n# add-apt-repository ppa:webupd8team/java &amp;&amp; apt-get update &amp;&amp; apt-get install oracle-java8-installer\n\n# Prompt for edition\n#while true; do\n#    read -p \"Enter 'U' for Ultimate or 'C' for Community: \" ed \n#    case $ed in\n#        [Uu]* ) ed=U; break;;\n#        [Cc]* ) ed=C; break;;\n#    esac\n#done\ned=C\n\n# Fetch the most recent version\nVERSION=$(wget \"https://www.jetbrains.com/intellij-repository/releases\" -qO- | grep -P -o -m 1 \"(?&lt;=https://www.jetbrains.com/intellij-repository/releases/com/jetbrains/intellij/idea/BUILD/)[^/]+(?=/)\")\n\n# Prepend base URL for download\nURL=\"https://download.jetbrains.com/idea/ideaI$ed-$VERSION.tar.gz\"\n\necho $URL\n\n# Truncate filename\nFILE=$(basename ${URL})\n\n# Set download directory\nDEST=~/Downloads/$FILE\n\necho \"Downloading idea-I$ed-$VERSION to $DEST...\"\n\n# Download binary\nwget -cO ${DEST} ${URL} --read-timeout=5 --tries=0\n\necho \"Download complete!\"\n\n# Set directory name\nDIR=\"/opt/idea-I$ed-$VERSION\"\n\necho \"Installing to $DIR\"\n\n# Untar file\nif mkdir ${DIR}; then\n    tar -xzf ${DEST} -C ${DIR} --strip-components=1\nfi\n\n# Grab executable folder\nBIN=\"$DIR/bin\"\n\n# Add permissions to install directory\nchmod -R +rwx ${DIR}\n\n# Set desktop shortcut path\nDESK=/usr/share/applications/IDEA.desktop\n\n# Add desktop shortcut\necho -e \"[Desktop Entry]\\nEncoding=UTF-8\\nName=IntelliJ IDEA\\nComment=IntelliJ IDEA\\nExec=${BIN}/idea.sh\\nIcon=${BIN}/idea.png\\nTerminal=false\\nStartupNotify=true\\nType=Application\" -e &gt; ${DESK}\n\n# Create symlink entry\nln -s ${BIN}/idea.sh /usr/local/bin/idea\n\necho \"Done.\"  \n</code></pre>\n\n<hr>\n\n<p><strong>Old Version</strong> </p>\n\n<pre><code>#!/bin/sh                                                                                                                                   \n\necho \"Installing IntelliJ IDEA...\"\n\n# We need root to install\n[ $(id -u) != \"0\" ] &amp;&amp; exec sudo \"$0\" \"$@\"\n\n# define version (ultimate. change to 'C' for Community)\ned='U'\n\n# Fetch the most recent community edition URL\nURL=$(wget \"https://www.jetbrains.com/idea/download/download_thanks.jsp?edition=I${ed}&amp;os=linux\" -qO- | grep -o -m 1 \"https://download.jetbrains.com/idea/.*gz\")\n\necho \"URL: ${URL}\"\necho \"basename(url): $(basename ${URL})\"\n\n# Truncate filename\nFILE=$(basename ${URL})\n\necho \"File: ${FILE}\"\n\n# Download binary\nwget -cO /tmp/${FILE} ${URL} --read-timeout=5 --tries=0\n\n# Set directory name\nDIR=\"${FILE%\\.tar\\.gz}\"\n\n# Untar file\nif mkdir /opt/${DIR}; then\n    tar -xvzf /tmp/${FILE} -C /opt/${DIR} --strip-components=1\nfi\n\n# Grab executable folder\nBIN=\"/opt/$DIR/bin\"\n\n# Add permissions to install directory\nchmod 755 ${BIN}/idea.sh\n\n# Set desktop shortcut path\nDESK=/usr/share/applications/IDEA.desktop\n\n# Add desktop shortcut                     \necho -e \"[Desktop Entry]\\nEncoding=UTF-8\\nName=IntelliJ IDEA\\nComment=IntelliJ IDEA\\nExec=${BIN}/idea.sh\\nIcon=${BIN}/idea.png\\nTerminal=false\\nStartupNotify=true\\nType=Application\" &gt; ${DESK}\n\necho \"Done.\"    \n</code></pre>\n"},{"comments":[{"owner":{"account_id":450074,"reputation":3029,"user_id":845210,"accept_rate":75,"display_name":"bjmc"},"score":0,"creation_date":1506034544,"post_id":36483055,"comment_id":79668629,"body_markdown":"Sadly the PPA install seems to be failing with a 403 error from Jetbrains: https://paste.fedoraproject.org/paste/paucm3IvADhdXeZpzgQyjg","body":"Sadly the PPA install seems to be failing with a 403 error from Jetbrains: <a href=\"https://paste.fedoraproject.org/paste/paucm3IvADhdXeZpzgQyjg\" rel=\"nofollow noreferrer\">paste.fedoraproject.org/paste/paucm3IvADhdXeZpzgQyjg</a>"},{"owner":{"account_id":3186080,"reputation":573,"user_id":4085683,"display_name":"Marcel Kapfer"},"score":1,"creation_date":1506150943,"post_id":36483055,"comment_id":79712845,"body_markdown":"I guess the problem is the one described in https://phab.mmk2410.org/T249. @bjmc do you (still) use `mmk2410/intellij-idea-community` instead of `mmk2410/intellij-idea`?","body":"I guess the problem is the one described in <a href=\"https://phab.mmk2410.org/T249\" rel=\"nofollow noreferrer\">phab.mmk2410.org/T249</a>. @bjmc do you (still) use <code>mmk2410&#47;intellij-idea-community</code> instead of <code>mmk2410&#47;intellij-idea</code>?"},{"owner":{"account_id":3186080,"reputation":573,"user_id":4085683,"display_name":"Marcel Kapfer"},"score":2,"creation_date":1506689814,"post_id":36483055,"comment_id":79933028,"body_markdown":"I added a package update to the old repository `ppa:mmk2410/intellij-idea-community` which now only transitions to the new repository. The latest version of IntelliJ IDEA will then get installed with the next system update (`sudo apt-get update &amp;&amp; sudo apt-get upgrade`).","body":"I added a package update to the old repository <code>ppa:mmk2410&#47;intellij-idea-community</code> which now only transitions to the new repository. The latest version of IntelliJ IDEA will then get installed with the next system update (<code>sudo apt-get update &amp;&amp; sudo apt-get upgrade</code>)."},{"owner":{"account_id":9022797,"reputation":2681,"user_id":6723250,"accept_rate":62,"display_name":"xeruf"},"score":0,"creation_date":1522178309,"post_id":36483055,"comment_id":86047412,"body_markdown":"your PPA is surely convenient, but somehow the installation downloaded directly from the JetBrains website has better font rendering than the one obtained from you PPA - any ideas?","body":"your PPA is surely convenient, but somehow the installation downloaded directly from the JetBrains website has better font rendering than the one obtained from you PPA - any ideas?"},{"owner":{"account_id":3186080,"reputation":573,"user_id":4085683,"display_name":"Marcel Kapfer"},"score":0,"creation_date":1522612930,"post_id":36483055,"comment_id":86211454,"body_markdown":"@Xerus Technically the version you download manually from JetBrains is exactly the same as the package uses. But I have an idea what the problem could be: based on your comment date I guess that you downloaded version 2018.1, the version of the package however is 2017.3.5. It is possible that the font rendering improved in the latest release, which I will package soon. Could you write another comment if the problem persists with the updated package?","body":"@Xerus Technically the version you download manually from JetBrains is exactly the same as the package uses. But I have an idea what the problem could be: based on your comment date I guess that you downloaded version 2018.1, the version of the package however is 2017.3.5. It is possible that the font rendering improved in the latest release, which I will package soon. Could you write another comment if the problem persists with the updated package?"},{"owner":{"account_id":270020,"reputation":364,"user_id":559720,"accept_rate":100,"display_name":"Nayef"},"score":0,"creation_date":1522763212,"post_id":36483055,"comment_id":86270421,"body_markdown":"This is a better approach, as the app will be managed by Ubuntu Package Manager","body":"This is a better approach, as the app will be managed by Ubuntu Package Manager"},{"owner":{"account_id":9022797,"reputation":2681,"user_id":6723250,"accept_rate":62,"display_name":"xeruf"},"score":0,"creation_date":1522836368,"post_id":36483055,"comment_id":86304416,"body_markdown":"no it was already this way in the previous release, nothing about the version. I know that it should technically be the same, but something apparently differs. I&#39;m not yet sure, but it seemed to have issues with the bundled Java runtime.","body":"no it was already this way in the previous release, nothing about the version. I know that it should technically be the same, but something apparently differs. I&#39;m not yet sure, but it seemed to have issues with the bundled Java runtime."},{"owner":{"account_id":3186080,"reputation":573,"user_id":4085683,"display_name":"Marcel Kapfer"},"score":0,"creation_date":1522931382,"post_id":36483055,"comment_id":86355187,"body_markdown":"@Xerus „it seemed to have issues with the bundled Java runtime.“ So you downloaded the version without the JDK? If that&#39;s so, it would be an upstream error.","body":"@Xerus „it seemed to have issues with the bundled Java runtime.“ So you downloaded the version without the JDK? If that&#39;s so, it would be an upstream error."},{"owner":{"account_id":9022797,"reputation":2681,"user_id":6723250,"accept_rate":62,"display_name":"xeruf"},"score":0,"creation_date":1522934482,"post_id":36483055,"comment_id":86357452,"body_markdown":"its really weird actually. There is a bundled JDK and it works, but selecting it as boot JDK in IDEA doesn&#39;t work, it just always silently switches back","body":"its really weird actually. There is a bundled JDK and it works, but selecting it as boot JDK in IDEA doesn&#39;t work, it just always silently switches back"},{"owner":{"account_id":9022797,"reputation":2681,"user_id":6723250,"accept_rate":62,"display_name":"xeruf"},"score":0,"creation_date":1523007928,"post_id":36483055,"comment_id":86391312,"body_markdown":"Even though the bundled JDK was explicitly selected in config/idea.jdk it kept using the one at JAVA_HOME. The only solution was to unset JAVA_HOME or point it to an invalid path.","body":"Even though the bundled JDK was explicitly selected in config/idea.jdk it kept using the one at JAVA_HOME. The only solution was to unset JAVA_HOME or point it to an invalid path."},{"owner":{"account_id":9022797,"reputation":2681,"user_id":6723250,"accept_rate":62,"display_name":"xeruf"},"score":0,"creation_date":1523205459,"post_id":36483055,"comment_id":86453361,"body_markdown":"Installation now suddenly failed with `mv: the given target at &#39;/opt/intellij-idea-community&#39; is not a directory`. Apparently it installed into `/opt/idea-IC-181.4203.550` but the post-installation-script doesn&#39;t know that. Also, now that whole installation directory is owned by root and I have to manually un-root it...","body":"Installation now suddenly failed with <code>mv: the given target at &#39;&#47;opt&#47;intellij-idea-community&#39; is not a directory</code>. Apparently it installed into <code>&#47;opt&#47;idea-IC-181.4203.550</code> but the post-installation-script doesn&#39;t know that. Also, now that whole installation directory is owned by root and I have to manually un-root it..."}],"tags":[],"owner":{"account_id":3186080,"reputation":573,"user_id":4085683,"display_name":"Marcel Kapfer"},"comment_count":11,"down_vote_count":0,"up_vote_count":47,"is_accepted":false,"score":47,"last_activity_date":1506690056,"creation_date":1460049446,"answer_id":36483055,"question_id":30130934,"body_markdown":"You can also try my ubuntu repository: https://launchpad.net/~mmk2410/+archive/ubuntu/intellij-idea\r\n\r\nTo use it just run the following commands:\r\n\r\n    sudo apt-add-repository ppa:mmk2410/intellij-idea\r\n    sudo apt-get update\r\n\r\nThe community edition can then installed with\r\n\r\n    sudo apt-get install intellij-idea-community\r\n\r\nand the ultimate edition with\r\n\r\n    sudo apt-get install intellij-idea-ultimate","title":"How to install Intellij IDEA on Ubuntu?","body":"<p>You can also try my ubuntu repository: <a href=\"https://launchpad.net/~mmk2410/+archive/ubuntu/intellij-idea\" rel=\"noreferrer\">https://launchpad.net/~mmk2410/+archive/ubuntu/intellij-idea</a></p>\n\n<p>To use it just run the following commands:</p>\n\n<pre><code>sudo apt-add-repository ppa:mmk2410/intellij-idea\nsudo apt-get update\n</code></pre>\n\n<p>The community edition can then installed with</p>\n\n<pre><code>sudo apt-get install intellij-idea-community\n</code></pre>\n\n<p>and the ultimate edition with</p>\n\n<pre><code>sudo apt-get install intellij-idea-ultimate\n</code></pre>\n"},{"comments":[{"owner":{"account_id":12372515,"reputation":488,"user_id":9022194,"display_name":"George Smith"},"score":0,"creation_date":1693213196,"post_id":39227670,"comment_id":135725593,"body_markdown":"I just wonder how would you be running the IDE in graphical mode from within the container?","body":"I just wonder how would you be running the IDE in graphical mode from within the container?"}],"tags":[],"owner":{"account_id":5298128,"reputation":188,"user_id":5010725,"display_name":"S&#233;bastien Allamand"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1472560487,"creation_date":1472560487,"answer_id":39227670,"question_id":30130934,"body_markdown":"In a simple manner you can also try to just run a pre-packaged docker with intellij, I found the good job of @dlsniper : https://hub.docker.com/r/dlsniper/docker-intellij/\r\n\r\nyou just need to have docker installed and to run :\r\n\r\n    docker run -tdi \\\r\n           --net=&quot;host&quot; \\\r\n           --privileged=true \\\r\n           -e DISPLAY=${DISPLAY} \\\r\n           -v /tmp/.X11-unix:/tmp/.X11-unix \\\r\n           -v ${HOME}/.IdeaIC2016.1_docker:/home/developer/.IdeaIC2016.1 \\\r\n           -v ${GOPATH}:/home/developer/go \\\r\n           dlsniper/docker-intellij","title":"How to install Intellij IDEA on Ubuntu?","body":"<p>In a simple manner you can also try to just run a pre-packaged docker with intellij, I found the good job of @dlsniper : <a href=\"https://hub.docker.com/r/dlsniper/docker-intellij/\" rel=\"nofollow\">https://hub.docker.com/r/dlsniper/docker-intellij/</a></p>\n\n<p>you just need to have docker installed and to run :</p>\n\n<pre><code>docker run -tdi \\\n       --net=\"host\" \\\n       --privileged=true \\\n       -e DISPLAY=${DISPLAY} \\\n       -v /tmp/.X11-unix:/tmp/.X11-unix \\\n       -v ${HOME}/.IdeaIC2016.1_docker:/home/developer/.IdeaIC2016.1 \\\n       -v ${GOPATH}:/home/developer/go \\\n       dlsniper/docker-intellij\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7010328,"reputation":397,"user_id":5373457,"display_name":"Дмитрий Кулешов"},"score":2,"creation_date":1495131031,"post_id":39721221,"comment_id":75134998,"body_markdown":"also look at Toolbox App in [next answer](http://stackoverflow.com/a/41863492/5373457)","body":"also look at Toolbox App in <a href=\"http://stackoverflow.com/a/41863492/5373457\">next answer</a>"},{"owner":{"account_id":7010328,"reputation":397,"user_id":5373457,"display_name":"Дмитрий Кулешов"},"score":1,"creation_date":1512070714,"post_id":39721221,"comment_id":82120046,"body_markdown":"Give us a link, please, if anybody knows what to do with &quot;not root-owned&quot; error using snap package","body":"Give us a link, please, if anybody knows what to do with &quot;not root-owned&quot; error using snap package"},{"owner":{"account_id":7010328,"reputation":397,"user_id":5373457,"display_name":"Дмитрий Кулешов"},"score":0,"creation_date":1515083660,"post_id":39721221,"comment_id":83174254,"body_markdown":"Hmm... I just made `# chown root:root /` and all works fine. I was afraid that system may crash but it didn&#39;t :)","body":"Hmm... I just made <code># chown root:root &#47;</code> and all works fine. I was afraid that system may crash but it didn&#39;t :)"},{"owner":{"account_id":12372515,"reputation":488,"user_id":9022194,"display_name":"George Smith"},"score":0,"creation_date":1693213029,"post_id":39721221,"comment_id":135725558,"body_markdown":"Just keep in mind that snap installs everything as read-only. Thus, if you need to make any manual modifications to IntelliJ config files, it will be painful :)","body":"Just keep in mind that snap installs everything as read-only. Thus, if you need to make any manual modifications to IntelliJ config files, it will be painful :)"}],"tags":[],"owner":{"account_id":7010328,"reputation":397,"user_id":5373457,"display_name":"Дмитрий Кулешов"},"comment_count":4,"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1541848862,"creation_date":1474969082,"answer_id":39721221,"question_id":30130934,"body_markdown":"Since Ubuntu 18.04 installing Intellij IDEA is easy! You just need to search &quot;IDEA&quot; in Software Center. Also you&#39;re able to choose a branch to install (I use EAP).\r\n[![enter image description here][1]][1]\r\n\r\nFor earlier versions:\r\n\r\nAccording to [this (*snap*)][2] and [this (*umake*)][3] articles the most comfortable ways are: \r\n\r\n - to use snap-packages (since versions IDEA&#160;2017.3 &amp; Ubuntu&#160;14.04):\r\n 1. [install snapd system][4]. Since Ubuntu&#160;16.04 you already have it.\r\n\r\n 2. [install IDEA snap-package][3] or [even EAP build][5]\r\n\r\n - to use ubuntu-make\r\n(for Ubuntu versions earlier than 16.04 use `apt-get` command instead `apt`): \r\n 1. Add PPA ubuntu-desktop/ubuntu-make (if you install ubuntu-make from standard repo you&#39;ll see only a few IDE&#39;s):\r\n\r\n            $ sudo add-apt-repository ppa:ubuntu-desktop/ubuntu-make\r\n\r\n 2. Install ubuntu-make:\r\n\r\n            $ sudo apt update\r\n            $ sudo apt install ubuntu-make\r\n\r\n 2. install preffered ide (IDEA, for this question):\r\n\r\n            $ umake ide idea\r\nor even ultimate version if you need:\r\n\r\n            $ umake ide idea-ultimate\r\n\r\n 3. I upgrade Intellij IDEA via reinstalling it:\r\n\r\n       &lt;strike&gt;$ umake -r ide idea-ultimate&lt;/strike&gt;\r\n \r\n            $ umake ide idea-ultimate\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/x9UxI.png\r\n  [2]: https://itsfoss.com/install-intellij-ubuntu-linux/\r\n  [3]: https://snapcraft.io/intellij-idea-ultimate/\r\n  [4]: https://docs.snapcraft.io/core/install-ubuntu\r\n  [5]: https://blog.jetbrains.com/idea/2017/11/install-intellij-idea-with-snaps/","title":"How to install Intellij IDEA on Ubuntu?","body":"<p>Since Ubuntu 18.04 installing Intellij IDEA is easy! You just need to search \"IDEA\" in Software Center. Also you're able to choose a branch to install (I use EAP).\n<a href=\"https://i.stack.imgur.com/x9UxI.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/x9UxI.png\" alt=\"enter image description here\"></a></p>\n\n<p>For earlier versions:</p>\n\n<p>According to <a href=\"https://itsfoss.com/install-intellij-ubuntu-linux/\" rel=\"noreferrer\">this (<em>snap</em>)</a> and <a href=\"https://snapcraft.io/intellij-idea-ultimate/\" rel=\"noreferrer\">this (<em>umake</em>)</a> articles the most comfortable ways are: </p>\n\n<ul>\n<li><p>to use snap-packages (since versions IDEA 2017.3 &amp; Ubuntu 14.04):</p>\n\n<ol>\n<li><p><a href=\"https://docs.snapcraft.io/core/install-ubuntu\" rel=\"noreferrer\">install snapd system</a>. Since Ubuntu 16.04 you already have it.</p></li>\n<li><p><a href=\"https://snapcraft.io/intellij-idea-ultimate/\" rel=\"noreferrer\">install IDEA snap-package</a> or <a href=\"https://blog.jetbrains.com/idea/2017/11/install-intellij-idea-with-snaps/\" rel=\"noreferrer\">even EAP build</a></p></li>\n</ol></li>\n<li><p>to use ubuntu-make\n(for Ubuntu versions earlier than 16.04 use <code>apt-get</code> command instead <code>apt</code>): </p>\n\n<ol>\n<li><p>Add PPA ubuntu-desktop/ubuntu-make (if you install ubuntu-make from standard repo you'll see only a few IDE's):</p>\n\n<pre><code>$ sudo add-apt-repository ppa:ubuntu-desktop/ubuntu-make\n</code></pre></li>\n<li><p>Install ubuntu-make:</p>\n\n<pre><code>$ sudo apt update\n$ sudo apt install ubuntu-make\n</code></pre></li>\n<li><p>install preffered ide (IDEA, for this question):</p>\n\n<pre><code>$ umake ide idea\n</code></pre>\n\n<p>or even ultimate version if you need:</p>\n\n<pre><code>$ umake ide idea-ultimate\n</code></pre></li>\n<li><p>I upgrade Intellij IDEA via reinstalling it:</p>\n\n<p><strike>$ umake -r ide idea-ultimate</strike></p>\n\n<pre><code>$ umake ide idea-ultimate\n</code></pre></li>\n</ol></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":2761230,"reputation":484,"user_id":2378095,"accept_rate":50,"display_name":"Nicola Beghin"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1475142150,"creation_date":1475142150,"answer_id":39766839,"question_id":30130934,"body_markdown":"Recent IntelliJ versions allows automatic creation of desktop entry. See [this gist][1]\r\n\r\n 1. Launch from commandline. If launching for the first time, setup will ask about creating a desktop launcher icon; say yes. Or else after launching (ie. from the commandline) any time, use the IDEA menu Configure &gt; Create Desktop Entry . That should create /usr/share/applications/intellij-idea-community.desktop\r\n 2. Trigger the Ubuntu desktop search (ie. Windows key), find the Intellij IDEA you used to create the desktop entry.\r\n 3. Drag the icon it&#39;s showing into the Ubuntu Launcher.\r\n\r\n  [1]: https://gist.github.com/rob-murray/6828864#gistcomment-1876315","title":"How to install Intellij IDEA on Ubuntu?","body":"<p>Recent IntelliJ versions allows automatic creation of desktop entry. See <a href=\"https://gist.github.com/rob-murray/6828864#gistcomment-1876315\" rel=\"nofollow\">this gist</a></p>\n\n<ol>\n<li>Launch from commandline. If launching for the first time, setup will ask about creating a desktop launcher icon; say yes. Or else after launching (ie. from the commandline) any time, use the IDEA menu Configure > Create Desktop Entry . That should create /usr/share/applications/intellij-idea-community.desktop</li>\n<li>Trigger the Ubuntu desktop search (ie. Windows key), find the Intellij IDEA you used to create the desktop entry.</li>\n<li>Drag the icon it's showing into the Ubuntu Launcher.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":4710133,"reputation":21,"user_id":3958623,"display_name":"Sunny Mok"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1481595802,"creation_date":1481595802,"answer_id":41112814,"question_id":30130934,"body_markdown":"I find and follow this youtube:\r\n\r\nhttps://www.youtube.com/watch?v=PbW-doAiAvI\r\n\r\nBasically, download the tar.gz package, extract into /opt/, and then run the &quot;idea.sh&quot; under bin folder (i.e. /opt/idea-IC-163.7743.44/bin/idea.sh)\r\n\r\nEnjoy","title":"How to install Intellij IDEA on Ubuntu?","body":"<p>I find and follow this youtube:</p>\n\n<p><a href=\"https://www.youtube.com/watch?v=PbW-doAiAvI\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=PbW-doAiAvI</a></p>\n\n<p>Basically, download the tar.gz package, extract into /opt/, and then run the \"idea.sh\" under bin folder (i.e. /opt/idea-IC-163.7743.44/bin/idea.sh)</p>\n\n<p>Enjoy</p>\n"},{"comments":[{"owner":{"account_id":1252373,"reputation":81,"user_id":1212525,"display_name":"farmbytes"},"score":4,"creation_date":1520706159,"post_id":41863492,"comment_id":85429415,"body_markdown":"As of now it&#39;s much easier to install/update any Jetbrains software using their Toolbox app. The other really cool part about the Toolbox is if you want to upgrade any Jetbrains software to the latest version. You just need to launch Toolbox app and it will automatically show if any updates are available.","body":"As of now it&#39;s much easier to install/update any Jetbrains software using their Toolbox app. The other really cool part about the Toolbox is if you want to upgrade any Jetbrains software to the latest version. You just need to launch Toolbox app and it will automatically show if any updates are available."}],"tags":[],"owner":{"account_id":4718545,"reputation":3600,"user_id":3817111,"accept_rate":15,"display_name":"Menasheh"},"comment_count":1,"down_vote_count":0,"up_vote_count":39,"is_accepted":false,"score":39,"last_activity_date":1485386413,"creation_date":1485386413,"answer_id":41863492,"question_id":30130934,"body_markdown":"JetBrains has a new application called the Toolbox App which quickly and easily installs any JetBrains software you want, assuming you have the license.  It also manages your login once to apply across all JetBrains software, a very useful feature.\r\n\r\nTo use it, download the tar.gz file [here][1], then extract it and run the included executable `jetbrains-toolbox.`  Then sign in, and press install next to IntelliJ IDEA:\r\n\r\n[![enter image description here][2]][2]\r\n\r\n If you want to move the executable to `/usr/bin/` feel free, however it works fine out of the box wherever you extract it to.\r\n\r\nThis will also make the appropriate desktop entries upon install.\r\n\r\n  [1]: https://www.jetbrains.com/toolbox/download/download-thanks.html?platform=linux\r\n  [2]: https://i.stack.imgur.com/V9BDI.png","title":"How to install Intellij IDEA on Ubuntu?","body":"<p>JetBrains has a new application called the Toolbox App which quickly and easily installs any JetBrains software you want, assuming you have the license.  It also manages your login once to apply across all JetBrains software, a very useful feature.</p>\n\n<p>To use it, download the tar.gz file <a href=\"https://www.jetbrains.com/toolbox/download/download-thanks.html?platform=linux\" rel=\"noreferrer\">here</a>, then extract it and run the included executable <code>jetbrains-toolbox.</code>  Then sign in, and press install next to IntelliJ IDEA:</p>\n\n<p><a href=\"https://i.stack.imgur.com/V9BDI.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/V9BDI.png\" alt=\"enter image description here\"></a></p>\n\n<p>If you want to move the executable to <code>/usr/bin/</code> feel free, however it works fine out of the box wherever you extract it to.</p>\n\n<p>This will also make the appropriate desktop entries upon install.</p>\n"},{"tags":[],"owner":{"account_id":1569152,"reputation":4371,"user_id":1457258,"accept_rate":86,"display_name":"Marcin Zukowski"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1503087159,"creation_date":1503087159,"answer_id":45764409,"question_id":30130934,"body_markdown":"I needed to install various JetBrains tools on a number of machines from CLI, so I wrote a tiny tool to help with that. It also uses cleaner APIs from JB making it hopefully more stable, and works for various JB tools.\r\n\r\nFeel free to try it: https://github.com/MarcinZukowski/jetbrains-installer\r\n","title":"How to install Intellij IDEA on Ubuntu?","body":"<p>I needed to install various JetBrains tools on a number of machines from CLI, so I wrote a tiny tool to help with that. It also uses cleaner APIs from JB making it hopefully more stable, and works for various JB tools.</p>\n\n<p>Feel free to try it: <a href=\"https://github.com/MarcinZukowski/jetbrains-installer\" rel=\"nofollow noreferrer\">https://github.com/MarcinZukowski/jetbrains-installer</a></p>\n"},{"tags":[],"owner":{"account_id":7377849,"reputation":7531,"user_id":5695374,"display_name":"Tshilidzi Mudau"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1508021802,"creation_date":1508020058,"answer_id":46749932,"question_id":30130934,"body_markdown":"TL;DR: \r\n\r\n 1. Download IntelliJ IDEA from [here][1].\r\n 2. `cd Downloads`\r\n 3. extract the downloaded file: `sudo tar xf ideaIC-2017.2.5.tar.gz -C /opt/`\r\n 4. Switch to the bin directory: `cd /opt/idea-IC-172.4343.14/bin` \r\n 5. Run `idea.sh` from the bin subdirectory. \r\n\r\n  [1]: https://www.jetbrains.com/help/idea/installing-and-launching.html","title":"How to install Intellij IDEA on Ubuntu?","body":"<p>TL;DR: </p>\n\n<ol>\n<li>Download IntelliJ IDEA from <a href=\"https://www.jetbrains.com/help/idea/installing-and-launching.html\" rel=\"noreferrer\">here</a>.</li>\n<li><code>cd Downloads</code></li>\n<li>extract the downloaded file: <code>sudo tar xf ideaIC-2017.2.5.tar.gz -C /opt/</code></li>\n<li>Switch to the bin directory: <code>cd /opt/idea-IC-172.4343.14/bin</code> </li>\n<li>Run <code>idea.sh</code> from the bin subdirectory. </li>\n</ol>\n"},{"tags":[],"owner":{"account_id":3024120,"reputation":3293,"user_id":2564509,"display_name":"djm.im"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1541385928,"creation_date":1523648608,"answer_id":49824095,"question_id":30130934,"body_markdown":"Since Ubuntu 16.04 includes `snapd` by default.  \r\nSo, the easiest way to install the stable version is\r\n\r\n* IntelliJ IDEA Community:  \r\n `$ sudo snap install intellij-idea-community --classic`\r\n* IntelliJ IDEA Ultimate:  \r\n `$ sudo snap install intellij-idea-ultimate --classic`\r\n\r\nFor the latest version use channel `--edge`  \r\n`$ sudo snap install intellij-idea-community --classic --edge`\r\n\r\nHere is the list of all channels https://snapcraft.io/intellij-idea-ultimate (drop down &#39;All versions&#39;).\r\n\r\n### options\r\n\r\n`--classic`\r\n&gt; The --classic option is required because the IntelliJ IDEA snap requires full access to the system, like a traditionally packaged application.  \r\n[https://www.jetbrains.com/help/idea/install-and-set-up-product.html#install-on-linux-with-snaps]\r\n\r\n`--edge`\r\n&gt;--edge Install from the edge channel\r\n[http://manpages.ubuntu.com/manpages/bionic/man1/snap.1.html]\r\n\r\nNote: Snap, also work a few major distributions: Arch, Debian, Fedora, openSUSE, Linux Mint,... ","title":"How to install Intellij IDEA on Ubuntu?","body":"<p>Since Ubuntu 16.04 includes <code>snapd</code> by default.<br>\nSo, the easiest way to install the stable version is</p>\n\n<ul>\n<li>IntelliJ IDEA Community:<br>\n<code>$ sudo snap install intellij-idea-community --classic</code></li>\n<li>IntelliJ IDEA Ultimate:<br>\n<code>$ sudo snap install intellij-idea-ultimate --classic</code></li>\n</ul>\n\n<p>For the latest version use channel <code>--edge</code><br>\n<code>$ sudo snap install intellij-idea-community --classic --edge</code></p>\n\n<p>Here is the list of all channels <a href=\"https://snapcraft.io/intellij-idea-ultimate\" rel=\"noreferrer\">https://snapcraft.io/intellij-idea-ultimate</a> (drop down 'All versions').</p>\n\n<h3>options</h3>\n\n<p><code>--classic</code></p>\n\n<blockquote>\n  <p>The --classic option is required because the IntelliJ IDEA snap requires full access to the system, like a traditionally packaged application.<br>\n  [<a href=\"https://www.jetbrains.com/help/idea/install-and-set-up-product.html#install-on-linux-with-snaps]\" rel=\"noreferrer\">https://www.jetbrains.com/help/idea/install-and-set-up-product.html#install-on-linux-with-snaps]</a></p>\n</blockquote>\n\n<p><code>--edge</code></p>\n\n<blockquote>\n  <p>--edge Install from the edge channel\n  [<a href=\"http://manpages.ubuntu.com/manpages/bionic/man1/snap.1.html]\" rel=\"noreferrer\">http://manpages.ubuntu.com/manpages/bionic/man1/snap.1.html]</a></p>\n</blockquote>\n\n<p>Note: Snap, also work a few major distributions: Arch, Debian, Fedora, openSUSE, Linux Mint,... </p>\n"},{"tags":[],"owner":{"account_id":13094136,"reputation":744,"user_id":9460546,"display_name":"Pawan Kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695813149,"creation_date":1559195782,"answer_id":56372422,"question_id":30130934,"body_markdown":"try simple way to install intellij idea \r\n\r\nInstall IntelliJ on Ubuntu using Ubuntu Make \r\n\r\nYou need to install Ubuntu Make first. If you are using Ubuntu 16.04, 18.04 or a higher version, you can install Ubuntu Make using the command below:\r\n\r\n    sudo apt install ubuntu-make\r\n\r\nOnce you have Ubuntu Make installed, you can use the command below to install IntelliJ IDEA Community edition:\r\n\r\n    umake ide idea\r\n\r\nTo install the IntelliJ IDEA Ultimate edition, use the command below:\r\n\r\n    umake ide idea-ultimate\r\n\r\n\r\nTo remove IntelliJ IDEA installed via Ubuntu Make, use the command below for your respective versions:\r\n\r\n    umake -r ide idea\r\n\r\n    umake -r ide idea-ultimate\r\n\r\nyou may visit for more option.\r\n\r\nhttps://itsfoss.com/install-intellij-ubuntu-linux/","title":"How to install Intellij IDEA on Ubuntu?","body":"<p>try simple way to install intellij idea</p>\n<p>Install IntelliJ on Ubuntu using Ubuntu Make</p>\n<p>You need to install Ubuntu Make first. If you are using Ubuntu 16.04, 18.04 or a higher version, you can install Ubuntu Make using the command below:</p>\n<pre><code>sudo apt install ubuntu-make\n</code></pre>\n<p>Once you have Ubuntu Make installed, you can use the command below to install IntelliJ IDEA Community edition:</p>\n<pre><code>umake ide idea\n</code></pre>\n<p>To install the IntelliJ IDEA Ultimate edition, use the command below:</p>\n<pre><code>umake ide idea-ultimate\n</code></pre>\n<p>To remove IntelliJ IDEA installed via Ubuntu Make, use the command below for your respective versions:</p>\n<pre><code>umake -r ide idea\n\numake -r ide idea-ultimate\n</code></pre>\n<p>you may visit for more option.</p>\n<p><a href=\"https://itsfoss.com/install-intellij-ubuntu-linux/\" rel=\"nofollow noreferrer\">https://itsfoss.com/install-intellij-ubuntu-linux/</a></p>\n"},{"tags":[],"owner":{"account_id":2093262,"reputation":9491,"user_id":1862590,"display_name":"Sathiamoorthy"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1608573559,"creation_date":1608573198,"answer_id":65397655,"question_id":30130934,"body_markdown":"**Standalone installation**\r\n\r\n1. Download the [tarball.tar.gz][1].\r\n\r\n2. Extract the tarball to a directory that supports file execution.\r\n\r\n*For example*, to extract it to the recommended `/opt` directory, run the following command:\r\n\r\n    sudo tar -xzf ideaIC-2020.3.tar.gz -C /opt\r\n\r\n3. Go to /opt folder and open intellij folder\r\n\r\n4. Go to /bin folder and execute the command `sh idea.sh`\r\n\r\n\r\nNow the application opened and create the desktop shortcut if you need\r\n\r\n\r\n  [1]: https://www.jetbrains.com/idea/download/\r\n","title":"How to install Intellij IDEA on Ubuntu?","body":"<p><strong>Standalone installation</strong></p>\n<ol>\n<li><p>Download the <a href=\"https://www.jetbrains.com/idea/download/\" rel=\"nofollow noreferrer\">tarball.tar.gz</a>.</p>\n</li>\n<li><p>Extract the tarball to a directory that supports file execution.</p>\n</li>\n</ol>\n<p><em>For example</em>, to extract it to the recommended <code>/opt</code> directory, run the following command:</p>\n<pre><code>sudo tar -xzf ideaIC-2020.3.tar.gz -C /opt\n</code></pre>\n<ol start=\"3\">\n<li><p>Go to /opt folder and open intellij folder</p>\n</li>\n<li><p>Go to /bin folder and execute the command <code>sh idea.sh</code></p>\n</li>\n</ol>\n<p>Now the application opened and create the desktop shortcut if you need</p>\n"}],"owner":{"account_id":5184382,"reputation":1009,"user_id":4149162,"accept_rate":78,"display_name":"Emil &#216;g&#229;rd"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":194333,"favorite_count":0,"down_vote_count":0,"up_vote_count":78,"accepted_answer_id":30131216,"answer_count":12,"score":78,"last_activity_date":1695813149,"creation_date":1431111295,"question_id":30130934,"body_markdown":"I&#39;m new to Ubuntu and Linux in general. I want to code in Java on my computer, but I&#39;m having problems installing [IntelliJ IDEA][1] on Ubuntu. I have downloaded and extracted the file and for some reason renamed the folder to idea. I tried moving the folder to `/usr/share/applications` or something but I didn&#39;t have permission. I used `sudo -i` in terminal to gain permission but didn&#39;t manage to get out of root folder. Can anyone help me with a step by step way to move the folder, create a shortcut in the search bar or whatever it&#39;s called and install it properly?\r\n\r\n  [1]: https://www.jetbrains.com/idea/download/#section=windows","title":"How to install Intellij IDEA on Ubuntu?","body":"<p>I'm new to Ubuntu and Linux in general. I want to code in Java on my computer, but I'm having problems installing <a href=\"https://www.jetbrains.com/idea/download/#section=windows\" rel=\"noreferrer\">IntelliJ IDEA</a> on Ubuntu. I have downloaded and extracted the file and for some reason renamed the folder to idea. I tried moving the folder to <code>/usr/share/applications</code> or something but I didn't have permission. I used <code>sudo -i</code> in terminal to gain permission but didn't manage to get out of root folder. Can anyone help me with a step by step way to move the folder, create a shortcut in the search bar or whatever it's called and install it properly?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":5,"creation_date":1695772664,"post_id":77183999,"comment_id":136068302,"body_markdown":"A Jar is just a zip file - you could make use of the available zip functionality in the JDK to pull out the elements you want.  Alternatively, as part of your build process you could built a manifest of the files contained with those directories and then at runtime use `Class#getResource` or `Class#getResourceAsStream` to get a direct reference ... but this begins to raise questions over why?","body":"A Jar is just a zip file - you could make use of the available zip functionality in the JDK to pull out the elements you want.  Alternatively, as part of your build process you could built a manifest of the files contained with those directories and then at runtime use <code>Class#getResource</code> or <code>Class#getResourceAsStream</code> to get a direct reference ... but this begins to raise questions over why?"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":3,"creation_date":1695774436,"post_id":77183999,"comment_id":136068432,"body_markdown":"Why? If what&#39;s in there is read-only, just access it as resources.","body":"Why? If what&#39;s in there is read-only, just access it as resources."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1695774692,"post_id":77183999,"comment_id":136068453,"body_markdown":"As others have said: Why do you want to do this?","body":"As others have said: Why do you want to do this?"},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1695779745,"post_id":77183999,"comment_id":136068885,"body_markdown":"If you can _guarantee_ your app is definitely delivered as a jar this is possible. If you can&#39;t guarantee that - the classloader mechanism __has no &#39;list&#39; primitive__, so you&#39;d have to, during build, run `ls build &gt;build/file-list.txt` so that you can ask for that file list so you have a listing.","body":"If you can <i>guarantee</i> your app is definitely delivered as a jar this is possible. If you can&#39;t guarantee that - the classloader mechanism <b>has no &#39;list&#39; primitive</b>, so you&#39;d have to, during build, run <code>ls build &gt;build&#47;file-list.txt</code> so that you can ask for that file list so you have a listing."},{"owner":{"account_id":1620076,"reputation":135,"user_id":1496859,"display_name":"wolfman"},"score":0,"creation_date":1695822659,"post_id":77183999,"comment_id":136075596,"body_markdown":"Thanks everyone - I gave the reason &#39;why&#39; I want to do this as comments to @rzwitserloot&#39;s suggested answer.  I was hoping the answer suggested a way to somehow recursively descend the package structure starting with Myclass.class.getResourceAsStream(&quot;/com/comopany/help&quot;)","body":"Thanks everyone - I gave the reason &#39;why&#39; I want to do this as comments to @rzwitserloot&#39;s suggested answer.  I was hoping the answer suggested a way to somehow recursively descend the package structure starting with Myclass.class.getResourceAsStream(&quot;/com/comopany/help&quot;)"},{"owner":{"account_id":1620076,"reputation":135,"user_id":1496859,"display_name":"wolfman"},"score":0,"creation_date":1695925192,"post_id":77183999,"comment_id":136092214,"body_markdown":"I think I will take @rzwitserloot&#39;s suggestion of creating the list of files during the build process and then simply iterating over those files using Class.class.getResourceAsStream() to write those files the fs.  I actually also came across an even better solution - the ClassGraph library (see GitHub) - it actually has exactly what i need using just a few lines of code, but I&#39;m doing this to reduce my jar&#39;s size - once I add in ClassGraph and all its dependencies, my savings of eliminating that duplicate help.zip in my jar is almost negated by including those jars :-(","body":"I think I will take @rzwitserloot&#39;s suggestion of creating the list of files during the build process and then simply iterating over those files using Class.class.getResourceAsStream() to write those files the fs.  I actually also came across an even better solution - the ClassGraph library (see GitHub) - it actually has exactly what i need using just a few lines of code, but I&#39;m doing this to reduce my jar&#39;s size - once I add in ClassGraph and all its dependencies, my savings of eliminating that duplicate help.zip in my jar is almost negated by including those jars :-("}],"answers":[{"comments":[{"owner":{"account_id":1620076,"reputation":135,"user_id":1496859,"display_name":"wolfman"},"score":0,"creation_date":1695821561,"post_id":77184308,"comment_id":136075330,"body_markdown":"I actually currently do what you suggest in the closing notes - during build, I create a help.zip file and just stick that into the jar and open/write it at startup.  But this zip file is really just a duplicate of what&#39;s already in the package structure and the help content is very large, so the zip file substantially increases the size of the overall jar and I was trying to eliminate it.","body":"I actually currently do what you suggest in the closing notes - during build, I create a help.zip file and just stick that into the jar and open/write it at startup.  But this zip file is really just a duplicate of what&#39;s already in the package structure and the help content is very large, so the zip file substantially increases the size of the overall jar and I was trying to eliminate it."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1695821912,"post_id":77184308,"comment_id":136075404,"body_markdown":"Ah, you need it both directly _and_ copy it. That makes sense :)","body":"Ah, you need it both directly <i>and</i> copy it. That makes sense :)"},{"owner":{"account_id":1620076,"reputation":135,"user_id":1496859,"display_name":"wolfman"},"score":0,"creation_date":1695822082,"post_id":77184308,"comment_id":136075444,"body_markdown":"Yes, the help is html based and the app&#39;s  built-in Swing components can&#39;t fully render it, so when help is clicked, I open the desktop browser.  To do that, the help needs to be in the fs.  My app actually also includes a Web server that normally serves the help directly from the package structure, but that is disabled in &#39;secure&#39; locations, so the help needs to be available locally.\n\nWhat I was hoping for is a solution that simply recursively descends the package structure via ClassThisIsIn.class.getResourceAsStream().","body":"Yes, the help is html based and the app&#39;s  built-in Swing components can&#39;t fully render it, so when help is clicked, I open the desktop browser.  To do that, the help needs to be in the fs.  My app actually also includes a Web server that normally serves the help directly from the package structure, but that is disabled in &#39;secure&#39; locations, so the help needs to be available locally.  What I was hoping for is a solution that simply recursively descends the package structure via ClassThisIsIn.class.getResourceAsStream()."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1695827017,"post_id":77184308,"comment_id":136076619,"body_markdown":"Yeah, &#39;list contents&#39; would be a nice primitive. But, you can&#39;t get that, unless you enforce &#39;this part of the app does not work unless it is in jar form&#39;.","body":"Yeah, &#39;list contents&#39; would be a nice primitive. But, you can&#39;t get that, unless you enforce &#39;this part of the app does not work unless it is in jar form&#39;."}],"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695780318,"creation_date":1695780318,"answer_id":77184308,"question_id":77183999,"body_markdown":"Given a file name (such as `com/company/pkg1/foo.class`), you can just stick a slash in front and call `AnyClassInThere.class.getResourceAsStream()` to read it. This means, __if__ you have a list of files you want to copy, you can write something like:\r\n\r\n```\r\nPath target = Path.of(&quot;/Users/wolfman/test-copy&quot;);\r\nfor (String fileName : list) {\r\n  // fileName is something like &quot;com/company/pkg1/Foo.class\r\n  try (var in = ClassThisIsIn.class.getResourceAsStream(&quot;/&quot; + fileName)) {\r\n  Path tgt = target.resolve(fileName);\r\n  Files.createDirectories(tgt.getParent());\r\n  try (var out = Files.newOutputStream(tgt)) {\r\n    in.transferTo(out);\r\n  }\r\n}\r\n```\r\n\r\nThat works regardless of how you ship your app (it doesn&#39;t _have to be_ in a jar file). That just leaves figuring out how to get that list of files.\r\n\r\nThe classloader system we use here (`.getResourceAsStream`) simply _does not support_ the concept of &#39;list files&#39;. Hence, what you want using just this, isn&#39;t directly possible. There are 2 ways to solve the problem:\r\n\r\n## fix it in the build\r\n\r\nDuring build time, &#39;list files&#39; __is__ available. Generally build systems such as maven, gradle, or ant, make a dir such as `build`, pile every file that is about to be put in your jar in there, and then turns that into a jar. If, in between, you can manage to run something like `ls build |grep com/company &gt;build/list-of-files.txt`, then to _get_ that file list, you simply read `ClassThisIsIn.class.getResource(&quot;/list-of-files.txt&quot;)` line by line and voila, there&#39;s your list of files.\r\n\r\nEvery build system can do this, but exactly how depends rather a lot on what you have.\r\n\r\n## Assume it&#39;s a jar\r\n\r\nIf you __know__ your app is distributed as a jar, you can do this:\r\n\r\n```\r\nString url = ClassThisIsIn.class.getResource(&quot;ClassThisIsIn.class&quot;).toString();\r\n```\r\n\r\nNow url will be something like `jar:file:///Users/wolfman/workspace/coolproject/dist/myapp.jar!com/company/base/ClassThisIsIn.class`.\r\n\r\nTake a hatchet to that string - use `substring` and the like to extract `/Users/wolfman/workspace/coolproject/dist/myapp.jar`. It&#39;s everything after `file:`, before the first `!`, and strip any excess slashes up front.\r\n\r\nThen just open that as a `JarFile` or `ZipFile` (jars are zips), and __that__ has a &#39;list&#39; primitive. You can read from there (use `transferTo` as above directly from your JarFile object, bypassing `getResourceAsStream` as in the snippet at the top of this answer), or only use it to create a list of files.\r\n\r\nI wouldn&#39;t recommend this course of action. Your app now breaks if its distributed in any way other than &#39;as a jar file&#39;. It&#39;ll hamper testing and reduce your productivity when working on it (as it MUST be built into a jar to properly function, you can&#39;t debug it inline anymore, or at least, not this bit).\r\n\r\n## Closing notes\r\n\r\nIt&#39;s slightly odd to &#39;want&#39; this. If it&#39;s files that are otherwise unrelated to the running of your app, just stick a zip in a zip and open that (so that you don&#39;t have to find a way to &#39;list&#39;). If you want to copy your classes and such - why? If it&#39;s some sort of &#39;install on local disk&#39;, maybe just copy the entire jar, or at the very least, make one and stream your files straight into it, save the user some disk space.\r\n","title":"How do I copy part of the Java application package structure to a directory on the file system?","body":"<p>Given a file name (such as <code>com/company/pkg1/foo.class</code>), you can just stick a slash in front and call <code>AnyClassInThere.class.getResourceAsStream()</code> to read it. This means, <strong>if</strong> you have a list of files you want to copy, you can write something like:</p>\n<pre><code>Path target = Path.of(&quot;/Users/wolfman/test-copy&quot;);\nfor (String fileName : list) {\n  // fileName is something like &quot;com/company/pkg1/Foo.class\n  try (var in = ClassThisIsIn.class.getResourceAsStream(&quot;/&quot; + fileName)) {\n  Path tgt = target.resolve(fileName);\n  Files.createDirectories(tgt.getParent());\n  try (var out = Files.newOutputStream(tgt)) {\n    in.transferTo(out);\n  }\n}\n</code></pre>\n<p>That works regardless of how you ship your app (it doesn't <em>have to be</em> in a jar file). That just leaves figuring out how to get that list of files.</p>\n<p>The classloader system we use here (<code>.getResourceAsStream</code>) simply <em>does not support</em> the concept of 'list files'. Hence, what you want using just this, isn't directly possible. There are 2 ways to solve the problem:</p>\n<h2>fix it in the build</h2>\n<p>During build time, 'list files' <strong>is</strong> available. Generally build systems such as maven, gradle, or ant, make a dir such as <code>build</code>, pile every file that is about to be put in your jar in there, and then turns that into a jar. If, in between, you can manage to run something like <code>ls build |grep com/company &gt;build/list-of-files.txt</code>, then to <em>get</em> that file list, you simply read <code>ClassThisIsIn.class.getResource(&quot;/list-of-files.txt&quot;)</code> line by line and voila, there's your list of files.</p>\n<p>Every build system can do this, but exactly how depends rather a lot on what you have.</p>\n<h2>Assume it's a jar</h2>\n<p>If you <strong>know</strong> your app is distributed as a jar, you can do this:</p>\n<pre><code>String url = ClassThisIsIn.class.getResource(&quot;ClassThisIsIn.class&quot;).toString();\n</code></pre>\n<p>Now url will be something like <code>jar:file:///Users/wolfman/workspace/coolproject/dist/myapp.jar!com/company/base/ClassThisIsIn.class</code>.</p>\n<p>Take a hatchet to that string - use <code>substring</code> and the like to extract <code>/Users/wolfman/workspace/coolproject/dist/myapp.jar</code>. It's everything after <code>file:</code>, before the first <code>!</code>, and strip any excess slashes up front.</p>\n<p>Then just open that as a <code>JarFile</code> or <code>ZipFile</code> (jars are zips), and <strong>that</strong> has a 'list' primitive. You can read from there (use <code>transferTo</code> as above directly from your JarFile object, bypassing <code>getResourceAsStream</code> as in the snippet at the top of this answer), or only use it to create a list of files.</p>\n<p>I wouldn't recommend this course of action. Your app now breaks if its distributed in any way other than 'as a jar file'. It'll hamper testing and reduce your productivity when working on it (as it MUST be built into a jar to properly function, you can't debug it inline anymore, or at least, not this bit).</p>\n<h2>Closing notes</h2>\n<p>It's slightly odd to 'want' this. If it's files that are otherwise unrelated to the running of your app, just stick a zip in a zip and open that (so that you don't have to find a way to 'list'). If you want to copy your classes and such - why? If it's some sort of 'install on local disk', maybe just copy the entire jar, or at the very least, make one and stream your files straight into it, save the user some disk space.</p>\n"}],"owner":{"account_id":1620076,"reputation":135,"user_id":1496859,"display_name":"wolfman"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77184308,"answer_count":1,"score":1,"last_activity_date":1695813116,"creation_date":1695772508,"question_id":77183999,"body_markdown":"My Java app, packaged as a JAR file - app.jar - has the following package structure:\r\n\r\n    com\r\n       company\r\n          pkg1\r\n          pkg2\r\n          help\r\n             dir1\r\n                file1\r\n                ...\r\n             dir2\r\n                subdir1\r\n                   files\r\n                   ...\r\n    \r\n          pkg3\r\n          ...\r\n\r\nFrom within my application, I&#39;d like to copy everything under com/company/help/ to a directory on the local file system.  What is the best way to do this in java, preferably without resorting to third-party Java libraries?\r\n","title":"How do I copy part of the Java application package structure to a directory on the file system?","body":"<p>My Java app, packaged as a JAR file - app.jar - has the following package structure:</p>\n<pre><code>com\n   company\n      pkg1\n      pkg2\n      help\n         dir1\n            file1\n            ...\n         dir2\n            subdir1\n               files\n               ...\n\n      pkg3\n      ...\n</code></pre>\n<p>From within my application, I'd like to copy everything under com/company/help/ to a directory on the local file system.  What is the best way to do this in java, preferably without resorting to third-party Java libraries?</p>\n"},{"tags":["java","eclipse","war"],"comments":[{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":0,"creation_date":1695781601,"post_id":77184322,"comment_id":136069047,"body_markdown":"May be you ar missing the [web tools platform](https://help.eclipse.org/latest/index.jsp?topic=%2Forg.eclipse.wst.webtools.doc.user%2Ftopics%2Ftwcrewar.html) plugin","body":"May be you ar missing the <a href=\"https://help.eclipse.org/latest/index.jsp?topic=%2Forg.eclipse.wst.webtools.doc.user%2Ftopics%2Ftwcrewar.html\" rel=\"nofollow noreferrer\">web tools platform</a> plugin"},{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1695906728,"post_id":77184322,"comment_id":136088344,"body_markdown":"Do you have any web tools installed? Is this even a web app project?","body":"Do you have any web tools installed? Is this even a web app project?"}],"answers":[{"tags":[],"owner":{"account_id":6841915,"reputation":31,"user_id":5262018,"display_name":"julianhs"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1695782068,"creation_date":1695782068,"answer_id":77184380,"question_id":77184322,"body_markdown":"Please make sure your Java application contains the correct file structure so the JDK can generate a WAR file.  It should contains the WEB-INF folder\r\n\r\n[![Structure of a Web App in Java][1]][1] \r\n(Screenshot obtained from https://courses.ischool.berkeley.edu/i290-8/s04/lectures/10/tomcat-cocoon/slide12.html\r\n\r\nAlso, please check if you setup accordingly the Java Development Kit (JDK) in Eclipse instead of the JRE.\r\n\r\nJust to make sure this issue it is not occurring because some misconfiguration with Eclipse, you can also try to generate the war file:\r\n\r\n1. Open cmd or any console you are using.\r\n2. Go inside the project directory of your project (outside the WEB-INF)\r\n3. Run the below command: \r\n\r\n  \r\n&gt;  jar -cvf appname.war *\r\n\r\nwhere -c is used to create file, -v to generate the verbose output and -f to specify the file name.\r\n\r\n  [1]: https://i.stack.imgur.com/1A3zP.png","title":"Why there is no WAR file under my Java project upon export?","body":"<p>Please make sure your Java application contains the correct file structure so the JDK can generate a WAR file.  It should contains the WEB-INF folder</p>\n<p><a href=\"https://i.stack.imgur.com/1A3zP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1A3zP.png\" alt=\"Structure of a Web App in Java\" /></a>\n(Screenshot obtained from <a href=\"https://courses.ischool.berkeley.edu/i290-8/s04/lectures/10/tomcat-cocoon/slide12.html\" rel=\"nofollow noreferrer\">https://courses.ischool.berkeley.edu/i290-8/s04/lectures/10/tomcat-cocoon/slide12.html</a></p>\n<p>Also, please check if you setup accordingly the Java Development Kit (JDK) in Eclipse instead of the JRE.</p>\n<p>Just to make sure this issue it is not occurring because some misconfiguration with Eclipse, you can also try to generate the war file:</p>\n<ol>\n<li>Open cmd or any console you are using.</li>\n<li>Go inside the project directory of your project (outside the WEB-INF)</li>\n<li>Run the below command:</li>\n</ol>\n<blockquote>\n<p>jar -cvf appname.war *</p>\n</blockquote>\n<p>where -c is used to create file, -v to generate the verbose output and -f to specify the file name.</p>\n"}],"owner":{"account_id":20769469,"reputation":3,"user_id":15252530,"display_name":"Euphoria"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695812563,"creation_date":1695780866,"question_id":77184322,"body_markdown":"I am trying to build my project using the WAR in Java, but it is not visible upon exporting, I can&#39;t find the same problem as mine. Does anyone encountered this issue and how did you resolved?\r\n\r\nPlease see image below\r\n[][1]\r\n\r\n\r\n[enter image description here][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/pMsMe.png\r\n  [2]: https://i.stack.imgur.com/piNux.png","title":"Why there is no WAR file under my Java project upon export?","body":"<p>I am trying to build my project using the WAR in Java, but it is not visible upon exporting, I can't find the same problem as mine. Does anyone encountered this issue and how did you resolved?</p>\n<p>Please see image below\n<a href=\"https://i.stack.imgur.com/pMsMe.png\" rel=\"nofollow noreferrer\"></a></p>\n<p><a href=\"https://i.stack.imgur.com/piNux.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":["java","spring-boot","rest","testing"],"comments":[{"owner":{"account_id":7547772,"reputation":8593,"user_id":5730279,"display_name":"hc_dev"},"score":0,"creation_date":1695671162,"post_id":77174068,"comment_id":136053009,"body_markdown":"Can you show the definition of the method `requestTo` or where you pass the request body. A complete [example] would help us to help you.","body":"Can you show the definition of the method <code>requestTo</code> or where you pass the request body. A complete <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> would help us to help you."},{"owner":{"account_id":29531006,"reputation":3,"user_id":22631626,"display_name":"Sophie Brown"},"score":0,"creation_date":1695811118,"post_id":77174068,"comment_id":136073144,"body_markdown":"@hc_dev I&#39;ve updated my code to show the full class - but it&#39;s all spring stuff, ```requestTo``` is a static method in ```MockRestRequestMatchers```, and my request body is the string being passed into ```HttpEntity```.","body":"@hc_dev I&#39;ve updated my code to show the full class - but it&#39;s all spring stuff, <code>requestTo</code> is a static method in <code>MockRestRequestMatchers</code>, and my request body is the string being passed into <code>HttpEntity</code>."}],"answers":[{"tags":[],"owner":{"account_id":3581540,"reputation":987,"user_id":2989643,"display_name":"Shayan Ahmad"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695812562,"creation_date":1695812562,"answer_id":77186884,"question_id":77174068,"body_markdown":"Generally, it&#39;s not a good idea to use `@RequestBody` with `GET` call. A better API design should make the API `POST` instead of `GET`. \r\n\r\nWith RestTemplate I am quite sure it does not support `GET` with `RequestBody` out of the box. For such scenarios you may be able to achieve it but by doing [this painful method](https://thegeekyasian.com/http-get-request-with-a-request-body-using-resttemplate/).\r\n","title":"&quot;Required request body is missing&quot; error in integration tests when body is present","body":"<p>Generally, it's not a good idea to use <code>@RequestBody</code> with <code>GET</code> call. A better API design should make the API <code>POST</code> instead of <code>GET</code>.</p>\n<p>With RestTemplate I am quite sure it does not support <code>GET</code> with <code>RequestBody</code> out of the box. For such scenarios you may be able to achieve it but by doing <a href=\"https://thegeekyasian.com/http-get-request-with-a-request-body-using-resttemplate/\" rel=\"nofollow noreferrer\">this painful method</a>.</p>\n"}],"owner":{"account_id":29531006,"reputation":3,"user_id":22631626,"display_name":"Sophie Brown"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77186884,"answer_count":1,"score":0,"last_activity_date":1695812562,"creation_date":1695656600,"question_id":77174068,"body_markdown":"I&#39;m writing a Spring Boot application that hits two third-party APIs and returns a CSV file based on the results. My application takes a `@RequestBody` parameter which is a `List&lt;String&gt;` which is used in the third party calls.\r\n\r\nI&#39;m trying to integration test this application using a `TestRestTemplate`, and I&#39;m getting a `HttpMessageNotReadableException: Required request body is missing` error, when I&#39;m definitely passing a body into the `HttpEntity` that is my request object.\r\n\r\nPassing in an identical body into postman, or into a controller test using MockMvc, works just fine, but I want to automatically test the whole application end-to-end.\r\n\r\nIf there is something wrong with what I&#39;m passing down, I&#39;d expect it to be giving me a JSON parsing error, not a missing body error. I&#39;ve tried changing the type of what I&#39;m passing down, and setting content-type to be text/plain - neither of these have caused the error to change or disappear.\r\n\r\nMy test code: \r\n\r\n```\r\npackage uk.co.heywood.sonarconverter.integration;\r\n\r\nimport static org.assertj.core.api.Assertions.assertThat;\r\nimport static org.springframework.test.web.client.match.MockRestRequestMatchers.header;\r\nimport static org.springframework.test.web.client.match.MockRestRequestMatchers.method;\r\nimport static org.springframework.test.web.client.match.MockRestRequestMatchers.requestTo;\r\nimport static org.springframework.test.web.client.response.MockRestResponseCreators.withStatus;\r\n\r\nimport org.junit.jupiter.api.BeforeEach;\r\nimport org.junit.jupiter.api.Test;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.boot.test.context.SpringBootTest;\r\nimport org.springframework.boot.test.web.client.TestRestTemplate;\r\nimport org.springframework.http.HttpEntity;\r\nimport org.springframework.http.HttpHeaders;\r\nimport org.springframework.http.HttpMethod;\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.http.MediaType;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.test.context.TestPropertySource;\r\nimport org.springframework.test.web.client.ExpectedCount;\r\nimport org.springframework.test.web.client.MockRestServiceServer;\r\nimport org.springframework.web.client.RestTemplate;\r\n\r\nimport uk.co.heywood.sonarconverter.Application;\r\nimport uk.co.heywood.sonarconverter.utils.TestUtils;\r\n\r\n@SpringBootTest(classes = Application.class, webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\r\n@TestPropertySource(properties = {&quot;sonar.qubeToken=aFakeQubeToken&quot;, &quot;sonar.cloudToken=aFakeCloudToken&quot;})\r\nclass SonarConverterIntegrationTest\r\n{\r\n    \r\n    private static final String URL = &quot;/api/sonar/diff&quot;;\r\n    private static final String SONARQUBE_URL = &quot;https://sonarqube.services.mywork.co.uk/api/issues/search?projects=myproject&amp;componentKeys=myComponentKeys&amp;statuses=OPEN&amp;ps=500&amp;p=1&quot;;\r\n    private static final String SONARCLOUD_URL = &quot;https://sonarcloud.io/api/issues/search?projects=myCloudProject&amp;statuses=OPEN&amp;ps=500&amp;p=1&quot;;\r\n    \r\n    private static final String SONARQUBE_RESPONSE = TestUtils.fromFile( &quot;integration/sonarqube-response.json&quot; );\r\n    private static final String SONARCLOUD_RESPONSE = TestUtils.fromFile( &quot;integration/sonarcloud-response.json&quot; );\r\n    private static final String EXPECTED_RESULT = TestUtils.fromFile( &quot;integration/result.csv&quot; );\r\n    \r\n    @Autowired\r\n    private TestRestTemplate testRestTemplate;\r\n    \r\n    @Autowired\r\n    private RestTemplate restTemplate;\r\n    private MockRestServiceServer mockRestServiceServer;\r\n    \r\n    @BeforeEach\r\n    void setUp() {\r\n        mockRestServiceServer = MockRestServiceServer.createServer( restTemplate );\r\n    }\r\n    \r\n    @Test\r\n    void canCreateCsv() {\r\n        \r\n        mockRestServiceServer.expect( ExpectedCount.once(),\r\n                        requestTo(SONARQUBE_URL))\r\n                .andExpect( method(HttpMethod.GET) )\r\n                .andExpect( header( HttpHeaders.AUTHORIZATION, &quot;Bearer aFakeQubeToken&quot; ) )\r\n                .andRespond( withStatus( HttpStatus.OK )\r\n                        .contentType( MediaType.APPLICATION_JSON )\r\n                        .body( SONARQUBE_RESPONSE ));\r\n        mockRestServiceServer.expect( ExpectedCount.once(),\r\n                        requestTo(SONARCLOUD_URL))\r\n                .andExpect( method(HttpMethod.GET) )\r\n                .andExpect( header( HttpHeaders.AUTHORIZATION, &quot;Bearer aFakeCloudToken&quot; ) )\r\n                .andRespond( withStatus( HttpStatus.OK )\r\n                        .contentType( MediaType.APPLICATION_JSON )\r\n                        .body( SONARCLOUD_RESPONSE ));\r\n        \r\n        HttpHeaders headers = new HttpHeaders();\r\n        headers.add( HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE );\r\n        HttpEntity&lt;String&gt; request = new HttpEntity&lt;&gt;( &quot;&quot;&quot;\r\n                [\r\n                    &quot;aParameter&quot;, &quot;anotherParameter&quot;\r\n                ]&quot;&quot;&quot;, headers );\r\n        ResponseEntity&lt;String&gt; response = testRestTemplate.exchange(\r\n                URL,\r\n                HttpMethod.GET,\r\n                request,\r\n                String.class\r\n        );\r\n        assertThat(response.getStatusCode()).isEqualTo( HttpStatus.OK );\r\n        assertThat(response.getBody()).isEqualTo( EXPECTED_RESULT );\r\n    }\r\n}\r\n\r\n```","title":"&quot;Required request body is missing&quot; error in integration tests when body is present","body":"<p>I'm writing a Spring Boot application that hits two third-party APIs and returns a CSV file based on the results. My application takes a <code>@RequestBody</code> parameter which is a <code>List&lt;String&gt;</code> which is used in the third party calls.</p>\n<p>I'm trying to integration test this application using a <code>TestRestTemplate</code>, and I'm getting a <code>HttpMessageNotReadableException: Required request body is missing</code> error, when I'm definitely passing a body into the <code>HttpEntity</code> that is my request object.</p>\n<p>Passing in an identical body into postman, or into a controller test using MockMvc, works just fine, but I want to automatically test the whole application end-to-end.</p>\n<p>If there is something wrong with what I'm passing down, I'd expect it to be giving me a JSON parsing error, not a missing body error. I've tried changing the type of what I'm passing down, and setting content-type to be text/plain - neither of these have caused the error to change or disappear.</p>\n<p>My test code:</p>\n<pre><code>package uk.co.heywood.sonarconverter.integration;\n\nimport static org.assertj.core.api.Assertions.assertThat;\nimport static org.springframework.test.web.client.match.MockRestRequestMatchers.header;\nimport static org.springframework.test.web.client.match.MockRestRequestMatchers.method;\nimport static org.springframework.test.web.client.match.MockRestRequestMatchers.requestTo;\nimport static org.springframework.test.web.client.response.MockRestResponseCreators.withStatus;\n\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.boot.test.web.client.TestRestTemplate;\nimport org.springframework.http.HttpEntity;\nimport org.springframework.http.HttpHeaders;\nimport org.springframework.http.HttpMethod;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.test.context.TestPropertySource;\nimport org.springframework.test.web.client.ExpectedCount;\nimport org.springframework.test.web.client.MockRestServiceServer;\nimport org.springframework.web.client.RestTemplate;\n\nimport uk.co.heywood.sonarconverter.Application;\nimport uk.co.heywood.sonarconverter.utils.TestUtils;\n\n@SpringBootTest(classes = Application.class, webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n@TestPropertySource(properties = {&quot;sonar.qubeToken=aFakeQubeToken&quot;, &quot;sonar.cloudToken=aFakeCloudToken&quot;})\nclass SonarConverterIntegrationTest\n{\n    \n    private static final String URL = &quot;/api/sonar/diff&quot;;\n    private static final String SONARQUBE_URL = &quot;https://sonarqube.services.mywork.co.uk/api/issues/search?projects=myproject&amp;componentKeys=myComponentKeys&amp;statuses=OPEN&amp;ps=500&amp;p=1&quot;;\n    private static final String SONARCLOUD_URL = &quot;https://sonarcloud.io/api/issues/search?projects=myCloudProject&amp;statuses=OPEN&amp;ps=500&amp;p=1&quot;;\n    \n    private static final String SONARQUBE_RESPONSE = TestUtils.fromFile( &quot;integration/sonarqube-response.json&quot; );\n    private static final String SONARCLOUD_RESPONSE = TestUtils.fromFile( &quot;integration/sonarcloud-response.json&quot; );\n    private static final String EXPECTED_RESULT = TestUtils.fromFile( &quot;integration/result.csv&quot; );\n    \n    @Autowired\n    private TestRestTemplate testRestTemplate;\n    \n    @Autowired\n    private RestTemplate restTemplate;\n    private MockRestServiceServer mockRestServiceServer;\n    \n    @BeforeEach\n    void setUp() {\n        mockRestServiceServer = MockRestServiceServer.createServer( restTemplate );\n    }\n    \n    @Test\n    void canCreateCsv() {\n        \n        mockRestServiceServer.expect( ExpectedCount.once(),\n                        requestTo(SONARQUBE_URL))\n                .andExpect( method(HttpMethod.GET) )\n                .andExpect( header( HttpHeaders.AUTHORIZATION, &quot;Bearer aFakeQubeToken&quot; ) )\n                .andRespond( withStatus( HttpStatus.OK )\n                        .contentType( MediaType.APPLICATION_JSON )\n                        .body( SONARQUBE_RESPONSE ));\n        mockRestServiceServer.expect( ExpectedCount.once(),\n                        requestTo(SONARCLOUD_URL))\n                .andExpect( method(HttpMethod.GET) )\n                .andExpect( header( HttpHeaders.AUTHORIZATION, &quot;Bearer aFakeCloudToken&quot; ) )\n                .andRespond( withStatus( HttpStatus.OK )\n                        .contentType( MediaType.APPLICATION_JSON )\n                        .body( SONARCLOUD_RESPONSE ));\n        \n        HttpHeaders headers = new HttpHeaders();\n        headers.add( HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE );\n        HttpEntity&lt;String&gt; request = new HttpEntity&lt;&gt;( &quot;&quot;&quot;\n                [\n                    &quot;aParameter&quot;, &quot;anotherParameter&quot;\n                ]&quot;&quot;&quot;, headers );\n        ResponseEntity&lt;String&gt; response = testRestTemplate.exchange(\n                URL,\n                HttpMethod.GET,\n                request,\n                String.class\n        );\n        assertThat(response.getStatusCode()).isEqualTo( HttpStatus.OK );\n        assertThat(response.getBody()).isEqualTo( EXPECTED_RESULT );\n    }\n}\n\n</code></pre>\n"},{"tags":["java","apache-poi","xssfworkbook"],"comments":[{"owner":{"account_id":7259207,"reputation":92,"user_id":5536648,"display_name":"A R K"},"score":2,"creation_date":1695810995,"post_id":77186361,"comment_id":136073124,"body_markdown":"Have you tried disabling the logging as per the FAQ on POI https://poi.apache.org/help/faq.html#faq-N10109","body":"Have you tried disabling the logging as per the FAQ on POI <a href=\"https://poi.apache.org/help/faq.html#faq-N10109\" rel=\"nofollow noreferrer\">poi.apache.org/help/faq.html#faq-N10109</a>"},{"owner":{"account_id":29545976,"reputation":1,"user_id":22643683,"display_name":"Anas Mansuri"},"score":0,"creation_date":1695818714,"post_id":77186361,"comment_id":136074656,"body_markdown":"Hi @ARK, even after disabling the logging option the result is same.","body":"Hi @ARK, even after disabling the logging option the result is same."},{"owner":{"account_id":7259207,"reputation":92,"user_id":5536648,"display_name":"A R K"},"score":1,"creation_date":1695820853,"post_id":77186361,"comment_id":136075160,"body_markdown":"Is it possible to try the constructor that takes the file instead of the input stream? as per this post https://poi.apache.org/components/spreadsheet/quick-guide.html#FileInputStream","body":"Is it possible to try the constructor that takes the file instead of the input stream? as per this post <a href=\"https://poi.apache.org/components/spreadsheet/quick-guide.html#FileInputStream\" rel=\"nofollow noreferrer\">poi.apache.org/components/spreadsheet/&hellip;</a>"},{"owner":{"account_id":8362430,"reputation":856,"user_id":6280255,"display_name":"Just another Java programmer"},"score":0,"creation_date":1695828664,"post_id":77186361,"comment_id":136076981,"body_markdown":"Are you loading the excel data from a database blob?","body":"Are you loading the excel data from a database blob?"},{"owner":{"account_id":29545976,"reputation":1,"user_id":22643683,"display_name":"Anas Mansuri"},"score":0,"creation_date":1695880587,"post_id":77186361,"comment_id":136083368,"body_markdown":"Yes I&#39;m loading blob data from the DB, I print the blob length as well just above this statement, it&#39;s able to print very quickly.","body":"Yes I&#39;m loading blob data from the DB, I print the blob length as well just above this statement, it&#39;s able to print very quickly."}],"owner":{"account_id":29545976,"reputation":1,"user_id":22643683,"display_name":"Anas Mansuri"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695812167,"creation_date":1695808147,"question_id":77186361,"body_markdown":"When I&#39;m trying to read Excel file using Apache PO XSSFWorkbook, below line is taking more than 20 minutes for loading a 4 MB Excel file.\r\n\r\n```\r\nXSSFWorkbook workbook = new XSSFWorkbook(blob.getBinaryStream()); \r\n```\r\n\r\nI tried with workbook.create() streaming method as well, but result is the same. Kindly suggest and advise on below issue  \r\n\r\nI tried all the possible approaches of Excel file read like SXSSFWorkbook, Workbook, XSSFReader), but not getting fruitful results. My expectation is program should read file as fast as possible.","title":"XSSFWorkbook is taking too much time to load excel file using InputStream","body":"<p>When I'm trying to read Excel file using Apache PO XSSFWorkbook, below line is taking more than 20 minutes for loading a 4 MB Excel file.</p>\n<pre><code>XSSFWorkbook workbook = new XSSFWorkbook(blob.getBinaryStream()); \n</code></pre>\n<p>I tried with workbook.create() streaming method as well, but result is the same. Kindly suggest and advise on below issue</p>\n<p>I tried all the possible approaches of Excel file read like SXSSFWorkbook, Workbook, XSSFReader), but not getting fruitful results. My expectation is program should read file as fast as possible.</p>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":18585758,"reputation":21,"user_id":13544185,"display_name":"Alexander Feinstein"},"score":1,"creation_date":1589544453,"post_id":61806301,"comment_id":109343153,"body_markdown":"To anyone who is curious, I ended up not using JavaFX&#39;s ImageCursor class and instead implemented this functionality using an ImageView that follows the cursor.","body":"To anyone who is curious, I ended up not using JavaFX&#39;s ImageCursor class and instead implemented this functionality using an ImageView that follows the cursor."}],"owner":{"account_id":18585758,"reputation":21,"user_id":13544185,"display_name":"Alexander Feinstein"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":179,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"closed_date":1682855199,"answer_count":0,"score":2,"last_activity_date":1695812018,"creation_date":1589486178,"question_id":61806301,"body_markdown":"I am creating a JavaFX application that is using an ImageCursor. After some time, the cursor stops displaying the image and instead displays this:\r\n\r\n\r\n![Sample][1]  \r\n(The &quot;corrupted&quot; cursor (notice the green lines, the yellow is the background of the app))\r\n\r\n  [1]: https://i.stack.imgur.com/C9OoL.png\r\n\r\nWhy does this happen with the JavaFX ImageCursor class, and how do you prevent this?\r\n\r\nNOTE: this only seems to happen when I click off the app and click back in.","title":"JavaFX ImageCursor becoming corrupted and not displaying correctly","body":"<p>I am creating a JavaFX application that is using an ImageCursor. After some time, the cursor stops displaying the image and instead displays this:</p>\n\n<p><img src=\"https://i.stack.imgur.com/C9OoL.png\" alt=\"Sample\"><br>\n(The \"corrupted\" cursor (notice the green lines, the yellow is the background of the app))</p>\n\n<p>Why does this happen with the JavaFX ImageCursor class, and how do you prevent this?</p>\n\n<p>NOTE: this only seems to happen when I click off the app and click back in.</p>\n"},{"tags":["java","android","xml","android-studio","android-databinding"],"answers":[{"tags":[],"owner":{"account_id":16923232,"reputation":1,"user_id":12239518,"display_name":"iLikeDarknetDiaries"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695811846,"creation_date":1695811846,"answer_id":77186794,"question_id":62491198,"body_markdown":"I just had the same problem. Adding this below buildTypes solved the issue for me:\r\n\r\n    buildFeatures {\r\n        viewBinding true\r\n    }","title":"error: package android.databinding does not exist","body":"<p>I just had the same problem. Adding this below buildTypes solved the issue for me:</p>\n<pre><code>buildFeatures {\n    viewBinding true\n}\n</code></pre>\n"}],"owner":{"account_id":18893241,"reputation":11,"user_id":13783023,"display_name":"Gianna"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":474,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695811846,"creation_date":1592684318,"question_id":62491198,"body_markdown":"I am building my first Android app. I am following this tutorial for making a calculator application by Android Authority here: https://www.androidauthority.com/build-a-calculator-app-721910\r\n\r\nI have the latest version of Android Studio installed and Gradle is up to date as well. I have been searching for a solution to this problem since days now. I have referred to many StackOverflow answers and have looked into my own code as well. I don&#39;t get any error using Sync Project with Gradle files. The error pops up only when I build the APK. Here is the error I am getting:\r\n\r\n    error: package android.databinding does not exist\r\n    error: package android.support.v7.app does not exist\r\n    error: package com.sample.foo.samplecalculator.databinding does not exist\r\n    error: cannot find symbol AppCompactActivity\r\n    cannot find symbol ActivityMainBinding\r\n\r\n\r\nThis is my MainActivity.java file:\r\n\r\n    package com.example.calculator;\r\n    \r\n    import android.databinding.DataBindingUtil;\r\n    import android.support.v7.app.AppCompatActivity;\r\n    import android.os.Bundle;\r\n    import android.view.View;\r\n    \r\n    import com.sample.foo.samplecalculator.databinding.ActivityMainBinding;\r\n    \r\n    import java.text.DecimalFormat;\r\n    \r\n    public class MainActivity extends AppCompactActivity {\r\n    \r\n        private ActivityMainBinding binding;\r\n    \r\n        private static final char ADDITION = &#39;+&#39;;\r\n        private static final char SUBTRACTION = &#39;-&#39;;\r\n        private static final char MULTIPLICATION = &#39;*&#39;;\r\n        private static final char DIVISION = &#39;/&#39;;\r\n    \r\n        private char CURRENT_ACTION;\r\n    \r\n        private double valueOne = Double.NaN;\r\n        private double valueTwo;\r\n    \r\n        private DecimalFormat decimalFormat;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n    \r\n            decimalFormat = new DecimalFormat(&quot;#.##########&quot;);\r\n    \r\n            binding = DataBindingUtil.setContentView(this, R.layout.activity_main);\r\n    \r\n            binding.buttonDot.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    binding.editText.setText(binding.editText.getText() + &quot;.&quot;);\r\n                }\r\n            });\r\n    \r\n            binding.buttonZero.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    binding.editText.setText(binding.editText.getText() + &quot;0&quot;);\r\n                }\r\n            });\r\n    \r\n            binding.buttonOne.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    binding.editText.setText(binding.editText.getText() + &quot;1&quot;);\r\n                }\r\n            });\r\n    \r\n            binding.buttonTwo.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    binding.editText.setText(binding.editText.getText() + &quot;2&quot;);\r\n                }\r\n            });\r\n    \r\n            binding.buttonThree.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    binding.editText.setText(binding.editText.getText() + &quot;3&quot;);\r\n                }\r\n            });\r\n    \r\n            binding.buttonFour.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    binding.editText.setText(binding.editText.getText() + &quot;4&quot;);\r\n                }\r\n            });\r\n    \r\n            binding.buttonFive.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    binding.editText.setText(binding.editText.getText() + &quot;5&quot;);\r\n                }\r\n            });\r\n    \r\n            binding.buttonSix.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    binding.editText.setText(binding.editText.getText() + &quot;6&quot;);\r\n                }\r\n            });\r\n    \r\n            binding.buttonSeven.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    binding.editText.setText(binding.editText.getText() + &quot;7&quot;);\r\n                }\r\n            });\r\n    \r\n            binding.buttonEight.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    binding.editText.setText(binding.editText.getText() + &quot;8&quot;);\r\n                }\r\n            });\r\n    \r\n            binding.buttonNine.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    binding.editText.setText(binding.editText.getText() + &quot;9&quot;);\r\n                }\r\n            });\r\n    \r\n            binding.buttonAdd.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    computeCalculation();\r\n                    CURRENT_ACTION = ADDITION;\r\n                    binding.infoTextView.setText(decimalFormat.format(valueOne) + &quot;+&quot;);\r\n                    binding.editText.setText(null);\r\n                }\r\n            });\r\n    \r\n            binding.buttonSubtract.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    computeCalculation();\r\n                    CURRENT_ACTION = SUBTRACTION;\r\n                    binding.infoTextView.setText(decimalFormat.format(valueOne) + &quot;-&quot;);\r\n                    binding.editText.setText(null);\r\n                }\r\n            });\r\n    \r\n            binding.buttonMultiply.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    computeCalculation();\r\n                    CURRENT_ACTION = MULTIPLICATION;\r\n                    binding.infoTextView.setText(decimalFormat.format(valueOne) + &quot;*&quot;);\r\n                    binding.editText.setText(null);\r\n                }\r\n            });\r\n    \r\n            binding.buttonDivide.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    computeCalculation();\r\n                    CURRENT_ACTION = DIVISION;\r\n                    binding.infoTextView.setText(decimalFormat.format(valueOne) + &quot;/&quot;);\r\n                    binding.editText.setText(null);\r\n                }\r\n            });\r\n    \r\n            binding.buttonEqual.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    computeCalculation();\r\n                    binding.infoTextView.setText(binding.infoTextView.getText().toString() +\r\n                            decimalFormat.format(valueTwo) + &quot; = &quot; + decimalFormat.format(valueOne));\r\n                    valueOne = Double.NaN;\r\n                    CURRENT_ACTION = &#39;0&#39;;\r\n                }\r\n            });\r\n    \r\n            binding.buttonClear.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    if(binding.editText.getText().length() &gt; 0) {\r\n                        CharSequence currentText = binding.editText.getText();\r\n                        binding.editText.setText(currentText.subSequence(0, currentText.length()-1));\r\n                    }\r\n                    else {\r\n                        valueOne = Double.NaN;\r\n                        valueTwo = Double.NaN;\r\n                        binding.editText.setText(&quot;&quot;);\r\n                        binding.infoTextView.setText(&quot;&quot;);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    \r\n        private void computeCalculation() {\r\n            if(!Double.isNaN(valueOne)) {\r\n                valueTwo = Double.parseDouble(binding.editText.getText().toString());\r\n                binding.editText.setText(null);\r\n    \r\n                if(CURRENT_ACTION == ADDITION)\r\n                    valueOne = this.valueOne + valueTwo;\r\n                else if(CURRENT_ACTION == SUBTRACTION)\r\n                    valueOne = this.valueOne - valueTwo;\r\n                else if(CURRENT_ACTION == MULTIPLICATION)\r\n                    valueOne = this.valueOne * valueTwo;\r\n                else if(CURRENT_ACTION == DIVISION)\r\n                    valueOne = this.valueOne / valueTwo;\r\n            }\r\n            else {\r\n                try {\r\n                    valueOne = Double.parseDouble(binding.editText.getText().toString());\r\n                }\r\n                catch (Exception e){}\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\nHere is the code to my activity_main.xml file:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;layout&gt;\r\n    \r\n        &lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n            xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n            android:id=&quot;@+id/activity_main&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:paddingBottom=&quot;@dimen/activity_vertical_margin&quot;\r\n            android:paddingLeft=&quot;@dimen/activity_horizontal_margin&quot;\r\n            android:paddingRight=&quot;@dimen/activity_horizontal_margin&quot;\r\n            android:paddingTop=&quot;@dimen/activity_vertical_margin&quot;\r\n            tools:context=&quot;.MainActivity&quot;&gt;\r\n    \r\n            &lt;TextView\r\n                android:id=&quot;@+id/infoTextView&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_marginBottom=&quot;30dp&quot;\r\n                android:textSize=&quot;30sp&quot; /&gt;\r\n    \r\n            &lt;EditText\r\n                android:id=&quot;@+id/editText&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_below=&quot;@id/infoTextView&quot;\r\n                android:enabled=&quot;false&quot;\r\n                android:gravity=&quot;bottom&quot;\r\n                android:lines=&quot;2&quot;\r\n                android:maxLines=&quot;2&quot;\r\n                android:textSize=&quot;20sp&quot; /&gt;\r\n    \r\n            &lt;Button\r\n                android:id=&quot;@+id/buttonSeven&quot;\r\n                style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_below=&quot;@id/editText&quot;\r\n                android:text=&quot;7&quot;\r\n                android:textSize=&quot;20sp&quot; /&gt;\r\n    \r\n            &lt;Button\r\n                android:id=&quot;@+id/buttonEight&quot;\r\n                style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_below=&quot;@id/editText&quot;\r\n                android:layout_toRightOf=&quot;@id/buttonSeven&quot;\r\n                android:text=&quot;8&quot;\r\n                android:textSize=&quot;20sp&quot; /&gt;\r\n    \r\n            &lt;Button\r\n                android:id=&quot;@+id/buttonNine&quot;\r\n                style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_below=&quot;@id/editText&quot;\r\n                android:layout_toRightOf=&quot;@id/buttonEight&quot;\r\n                android:text=&quot;9&quot;\r\n                android:textSize=&quot;20sp&quot; /&gt;\r\n    \r\n            &lt;Button\r\n                android:id=&quot;@+id/buttonFour&quot;\r\n                style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_below=&quot;@id/buttonSeven&quot;\r\n                android:text=&quot;4&quot;\r\n                android:textSize=&quot;20sp&quot; /&gt;\r\n    \r\n            &lt;Button\r\n                android:id=&quot;@+id/buttonFive&quot;\r\n                style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_alignRight=&quot;@id/buttonEight&quot;\r\n                android:layout_below=&quot;@id/buttonEight&quot;\r\n                android:text=&quot;5&quot;\r\n                android:textSize=&quot;20sp&quot; /&gt;\r\n    \r\n            &lt;Button\r\n                android:id=&quot;@+id/buttonSix&quot;\r\n                style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_alignRight=&quot;@id/buttonNine&quot;\r\n                android:layout_below=&quot;@id/buttonNine&quot;\r\n                android:text=&quot;6&quot;\r\n                android:textSize=&quot;20sp&quot; /&gt;\r\n    \r\n            &lt;Button\r\n                android:id=&quot;@+id/buttonOne&quot;\r\n                style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_below=&quot;@id/buttonFour&quot;\r\n                android:text=&quot;1&quot;\r\n                android:textSize=&quot;20sp&quot; /&gt;\r\n    \r\n            &lt;Button\r\n                android:id=&quot;@+id/buttonTwo&quot;\r\n                style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_alignRight=&quot;@id/buttonEight&quot;\r\n                android:layout_below=&quot;@id/buttonFive&quot;\r\n                android:text=&quot;2&quot;\r\n                android:textSize=&quot;20sp&quot; /&gt;\r\n    \r\n            &lt;Button\r\n                android:id=&quot;@+id/buttonThree&quot;\r\n                style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_alignRight=&quot;@id/buttonNine&quot;\r\n                android:layout_below=&quot;@id/buttonSix&quot;\r\n                android:text=&quot;3&quot;\r\n                android:textSize=&quot;20sp&quot; /&gt;\r\n    \r\n            &lt;Button\r\n                android:id=&quot;@+id/buttonDot&quot;\r\n                style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_below=&quot;@id/buttonOne&quot;\r\n                android:text=&quot;.&quot;\r\n                android:textSize=&quot;20sp&quot; /&gt;\r\n    \r\n            &lt;Button\r\n                android:id=&quot;@+id/buttonZero&quot;\r\n                style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_alignRight=&quot;@id/buttonEight&quot;\r\n                android:layout_below=&quot;@id/buttonTwo&quot;\r\n                android:text=&quot;0&quot;\r\n                android:textSize=&quot;20sp&quot; /&gt;\r\n    \r\n            &lt;Button\r\n                android:id=&quot;@+id/buttonEqual&quot;\r\n                style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_alignRight=&quot;@id/buttonNine&quot;\r\n                android:layout_below=&quot;@id/buttonThree&quot;\r\n                android:text=&quot;=&quot;\r\n                android:textSize=&quot;20sp&quot; /&gt;\r\n    \r\n            &lt;Button\r\n                android:id=&quot;@+id/buttonDivide&quot;\r\n                style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_alignTop=&quot;@id/buttonNine&quot;\r\n                android:layout_toRightOf=&quot;@id/buttonNine&quot;\r\n                android:text=&quot;/&quot;\r\n                android:textSize=&quot;20sp&quot; /&gt;\r\n    \r\n            &lt;Button\r\n                android:id=&quot;@+id/buttonMultiply&quot;\r\n                style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_alignTop=&quot;@id/buttonSix&quot;\r\n                android:layout_toRightOf=&quot;@id/buttonSix&quot;\r\n                android:text=&quot;*&quot;\r\n                android:textSize=&quot;20sp&quot; /&gt;\r\n    \r\n            &lt;Button\r\n                android:id=&quot;@+id/buttonSubtract&quot;\r\n                style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_alignTop=&quot;@id/buttonThree&quot;\r\n                android:layout_toRightOf=&quot;@id/buttonThree&quot;\r\n                android:text=&quot;-&quot;\r\n                android:textSize=&quot;20sp&quot; /&gt;\r\n    \r\n            &lt;Button\r\n                android:id=&quot;@+id/buttonAdd&quot;\r\n                style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_alignTop=&quot;@id/buttonEqual&quot;\r\n                android:layout_toRightOf=&quot;@id/buttonEqual&quot;\r\n                android:text=&quot;+&quot;\r\n                android:textSize=&quot;20sp&quot; /&gt;\r\n    \r\n            &lt;Button\r\n                android:id=&quot;@+id/buttonClear&quot;\r\n                style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_alignRight=&quot;@id/buttonAdd&quot;\r\n                android:layout_below=&quot;@id/buttonAdd&quot;\r\n                android:layout_marginTop=&quot;@dimen/activity_vertical_margin&quot;\r\n                android:text=&quot;C&quot;\r\n                android:textSize=&quot;20sp&quot; /&gt;\r\n        &lt;/RelativeLayout&gt;\r\n    &lt;/layout&gt;\r\n\r\nThe build.gradle(app) is as follows:\r\n\r\n        apply plugin: &#39;com.android.application&#39;\r\n    \r\n    android {\r\n        compileSdkVersion 29\r\n        buildToolsVersion &quot;29.0.3&quot;\r\n        dataBinding.enabled = true\r\n    \r\n        defaultConfig {\r\n            applicationId &quot;com.example.calculator&quot;\r\n            minSdkVersion 16\r\n            targetSdkVersion 29\r\n            versionCode 1\r\n            versionName &quot;1.0&quot;\r\n    \r\n            testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n        }\r\n    \r\n        buildTypes {\r\n            release {\r\n                minifyEnabled false\r\n                proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n            }\r\n        }\r\n    \r\n    }\r\n    \r\n    dependencies {\r\n        implementation fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])\r\n    \r\n        implementation &#39;androidx.appcompat:appcompat:1.1.0&#39;\r\n        implementation &#39;androidx.constraintlayout:constraintlayout:1.1.3&#39;\r\n        testImplementation &#39;junit:junit:4.12&#39;\r\n        androidTestImplementation &#39;androidx.test.ext:junit:1.1.1&#39;\r\n        androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.2.0&#39;\r\n    }","title":"error: package android.databinding does not exist","body":"<p>I am building my first Android app. I am following this tutorial for making a calculator application by Android Authority here: <a href=\"https://www.androidauthority.com/build-a-calculator-app-721910\" rel=\"nofollow noreferrer\">https://www.androidauthority.com/build-a-calculator-app-721910</a></p>\n<p>I have the latest version of Android Studio installed and Gradle is up to date as well. I have been searching for a solution to this problem since days now. I have referred to many StackOverflow answers and have looked into my own code as well. I don't get any error using Sync Project with Gradle files. The error pops up only when I build the APK. Here is the error I am getting:</p>\n<pre><code>error: package android.databinding does not exist\nerror: package android.support.v7.app does not exist\nerror: package com.sample.foo.samplecalculator.databinding does not exist\nerror: cannot find symbol AppCompactActivity\ncannot find symbol ActivityMainBinding\n</code></pre>\n<p>This is my MainActivity.java file:</p>\n<pre><code>package com.example.calculator;\n\nimport android.databinding.DataBindingUtil;\nimport android.support.v7.app.AppCompatActivity;\nimport android.os.Bundle;\nimport android.view.View;\n\nimport com.sample.foo.samplecalculator.databinding.ActivityMainBinding;\n\nimport java.text.DecimalFormat;\n\npublic class MainActivity extends AppCompactActivity {\n\n    private ActivityMainBinding binding;\n\n    private static final char ADDITION = '+';\n    private static final char SUBTRACTION = '-';\n    private static final char MULTIPLICATION = '*';\n    private static final char DIVISION = '/';\n\n    private char CURRENT_ACTION;\n\n    private double valueOne = Double.NaN;\n    private double valueTwo;\n\n    private DecimalFormat decimalFormat;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n        decimalFormat = new DecimalFormat(&quot;#.##########&quot;);\n\n        binding = DataBindingUtil.setContentView(this, R.layout.activity_main);\n\n        binding.buttonDot.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                binding.editText.setText(binding.editText.getText() + &quot;.&quot;);\n            }\n        });\n\n        binding.buttonZero.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                binding.editText.setText(binding.editText.getText() + &quot;0&quot;);\n            }\n        });\n\n        binding.buttonOne.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                binding.editText.setText(binding.editText.getText() + &quot;1&quot;);\n            }\n        });\n\n        binding.buttonTwo.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                binding.editText.setText(binding.editText.getText() + &quot;2&quot;);\n            }\n        });\n\n        binding.buttonThree.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                binding.editText.setText(binding.editText.getText() + &quot;3&quot;);\n            }\n        });\n\n        binding.buttonFour.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                binding.editText.setText(binding.editText.getText() + &quot;4&quot;);\n            }\n        });\n\n        binding.buttonFive.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                binding.editText.setText(binding.editText.getText() + &quot;5&quot;);\n            }\n        });\n\n        binding.buttonSix.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                binding.editText.setText(binding.editText.getText() + &quot;6&quot;);\n            }\n        });\n\n        binding.buttonSeven.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                binding.editText.setText(binding.editText.getText() + &quot;7&quot;);\n            }\n        });\n\n        binding.buttonEight.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                binding.editText.setText(binding.editText.getText() + &quot;8&quot;);\n            }\n        });\n\n        binding.buttonNine.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                binding.editText.setText(binding.editText.getText() + &quot;9&quot;);\n            }\n        });\n\n        binding.buttonAdd.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                computeCalculation();\n                CURRENT_ACTION = ADDITION;\n                binding.infoTextView.setText(decimalFormat.format(valueOne) + &quot;+&quot;);\n                binding.editText.setText(null);\n            }\n        });\n\n        binding.buttonSubtract.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                computeCalculation();\n                CURRENT_ACTION = SUBTRACTION;\n                binding.infoTextView.setText(decimalFormat.format(valueOne) + &quot;-&quot;);\n                binding.editText.setText(null);\n            }\n        });\n\n        binding.buttonMultiply.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                computeCalculation();\n                CURRENT_ACTION = MULTIPLICATION;\n                binding.infoTextView.setText(decimalFormat.format(valueOne) + &quot;*&quot;);\n                binding.editText.setText(null);\n            }\n        });\n\n        binding.buttonDivide.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                computeCalculation();\n                CURRENT_ACTION = DIVISION;\n                binding.infoTextView.setText(decimalFormat.format(valueOne) + &quot;/&quot;);\n                binding.editText.setText(null);\n            }\n        });\n\n        binding.buttonEqual.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                computeCalculation();\n                binding.infoTextView.setText(binding.infoTextView.getText().toString() +\n                        decimalFormat.format(valueTwo) + &quot; = &quot; + decimalFormat.format(valueOne));\n                valueOne = Double.NaN;\n                CURRENT_ACTION = '0';\n            }\n        });\n\n        binding.buttonClear.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                if(binding.editText.getText().length() &gt; 0) {\n                    CharSequence currentText = binding.editText.getText();\n                    binding.editText.setText(currentText.subSequence(0, currentText.length()-1));\n                }\n                else {\n                    valueOne = Double.NaN;\n                    valueTwo = Double.NaN;\n                    binding.editText.setText(&quot;&quot;);\n                    binding.infoTextView.setText(&quot;&quot;);\n                }\n            }\n        });\n    }\n\n    private void computeCalculation() {\n        if(!Double.isNaN(valueOne)) {\n            valueTwo = Double.parseDouble(binding.editText.getText().toString());\n            binding.editText.setText(null);\n\n            if(CURRENT_ACTION == ADDITION)\n                valueOne = this.valueOne + valueTwo;\n            else if(CURRENT_ACTION == SUBTRACTION)\n                valueOne = this.valueOne - valueTwo;\n            else if(CURRENT_ACTION == MULTIPLICATION)\n                valueOne = this.valueOne * valueTwo;\n            else if(CURRENT_ACTION == DIVISION)\n                valueOne = this.valueOne / valueTwo;\n        }\n        else {\n            try {\n                valueOne = Double.parseDouble(binding.editText.getText().toString());\n            }\n            catch (Exception e){}\n        }\n    }\n}\n</code></pre>\n<p>Here is the code to my activity_main.xml file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;layout&gt;\n\n    &lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n        android:id=&quot;@+id/activity_main&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:paddingBottom=&quot;@dimen/activity_vertical_margin&quot;\n        android:paddingLeft=&quot;@dimen/activity_horizontal_margin&quot;\n        android:paddingRight=&quot;@dimen/activity_horizontal_margin&quot;\n        android:paddingTop=&quot;@dimen/activity_vertical_margin&quot;\n        tools:context=&quot;.MainActivity&quot;&gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/infoTextView&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_marginBottom=&quot;30dp&quot;\n            android:textSize=&quot;30sp&quot; /&gt;\n\n        &lt;EditText\n            android:id=&quot;@+id/editText&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_below=&quot;@id/infoTextView&quot;\n            android:enabled=&quot;false&quot;\n            android:gravity=&quot;bottom&quot;\n            android:lines=&quot;2&quot;\n            android:maxLines=&quot;2&quot;\n            android:textSize=&quot;20sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/buttonSeven&quot;\n            style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_below=&quot;@id/editText&quot;\n            android:text=&quot;7&quot;\n            android:textSize=&quot;20sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/buttonEight&quot;\n            style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_below=&quot;@id/editText&quot;\n            android:layout_toRightOf=&quot;@id/buttonSeven&quot;\n            android:text=&quot;8&quot;\n            android:textSize=&quot;20sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/buttonNine&quot;\n            style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_below=&quot;@id/editText&quot;\n            android:layout_toRightOf=&quot;@id/buttonEight&quot;\n            android:text=&quot;9&quot;\n            android:textSize=&quot;20sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/buttonFour&quot;\n            style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_below=&quot;@id/buttonSeven&quot;\n            android:text=&quot;4&quot;\n            android:textSize=&quot;20sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/buttonFive&quot;\n            style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_alignRight=&quot;@id/buttonEight&quot;\n            android:layout_below=&quot;@id/buttonEight&quot;\n            android:text=&quot;5&quot;\n            android:textSize=&quot;20sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/buttonSix&quot;\n            style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_alignRight=&quot;@id/buttonNine&quot;\n            android:layout_below=&quot;@id/buttonNine&quot;\n            android:text=&quot;6&quot;\n            android:textSize=&quot;20sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/buttonOne&quot;\n            style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_below=&quot;@id/buttonFour&quot;\n            android:text=&quot;1&quot;\n            android:textSize=&quot;20sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/buttonTwo&quot;\n            style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_alignRight=&quot;@id/buttonEight&quot;\n            android:layout_below=&quot;@id/buttonFive&quot;\n            android:text=&quot;2&quot;\n            android:textSize=&quot;20sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/buttonThree&quot;\n            style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_alignRight=&quot;@id/buttonNine&quot;\n            android:layout_below=&quot;@id/buttonSix&quot;\n            android:text=&quot;3&quot;\n            android:textSize=&quot;20sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/buttonDot&quot;\n            style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_below=&quot;@id/buttonOne&quot;\n            android:text=&quot;.&quot;\n            android:textSize=&quot;20sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/buttonZero&quot;\n            style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_alignRight=&quot;@id/buttonEight&quot;\n            android:layout_below=&quot;@id/buttonTwo&quot;\n            android:text=&quot;0&quot;\n            android:textSize=&quot;20sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/buttonEqual&quot;\n            style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_alignRight=&quot;@id/buttonNine&quot;\n            android:layout_below=&quot;@id/buttonThree&quot;\n            android:text=&quot;=&quot;\n            android:textSize=&quot;20sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/buttonDivide&quot;\n            style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_alignTop=&quot;@id/buttonNine&quot;\n            android:layout_toRightOf=&quot;@id/buttonNine&quot;\n            android:text=&quot;/&quot;\n            android:textSize=&quot;20sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/buttonMultiply&quot;\n            style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_alignTop=&quot;@id/buttonSix&quot;\n            android:layout_toRightOf=&quot;@id/buttonSix&quot;\n            android:text=&quot;*&quot;\n            android:textSize=&quot;20sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/buttonSubtract&quot;\n            style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_alignTop=&quot;@id/buttonThree&quot;\n            android:layout_toRightOf=&quot;@id/buttonThree&quot;\n            android:text=&quot;-&quot;\n            android:textSize=&quot;20sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/buttonAdd&quot;\n            style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_alignTop=&quot;@id/buttonEqual&quot;\n            android:layout_toRightOf=&quot;@id/buttonEqual&quot;\n            android:text=&quot;+&quot;\n            android:textSize=&quot;20sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/buttonClear&quot;\n            style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_alignRight=&quot;@id/buttonAdd&quot;\n            android:layout_below=&quot;@id/buttonAdd&quot;\n            android:layout_marginTop=&quot;@dimen/activity_vertical_margin&quot;\n            android:text=&quot;C&quot;\n            android:textSize=&quot;20sp&quot; /&gt;\n    &lt;/RelativeLayout&gt;\n&lt;/layout&gt;\n</code></pre>\n<p>The build.gradle(app) is as follows:</p>\n<pre><code>    apply plugin: 'com.android.application'\n\nandroid {\n    compileSdkVersion 29\n    buildToolsVersion &quot;29.0.3&quot;\n    dataBinding.enabled = true\n\n    defaultConfig {\n        applicationId &quot;com.example.calculator&quot;\n        minSdkVersion 16\n        targetSdkVersion 29\n        versionCode 1\n        versionName &quot;1.0&quot;\n\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n\n}\n\ndependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n\n    implementation 'androidx.appcompat:appcompat:1.1.0'\n    implementation 'androidx.constraintlayout:constraintlayout:1.1.3'\n    testImplementation 'junit:junit:4.12'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.1'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.2.0'\n}\n</code></pre>\n"},{"tags":["java","spring-boot","http","cors"],"comments":[{"owner":{"account_id":20196841,"reputation":2309,"user_id":14813577,"display_name":"kennarddh"},"score":0,"creation_date":1695799625,"post_id":77185207,"comment_id":136070905,"body_markdown":"what is this has to do with [tag:cors]?","body":"what is this has to do with <a href=\"https://stackoverflow.com/questions/tagged/cors\">cors</a>?"},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1695803138,"post_id":77185207,"comment_id":136071539,"body_markdown":"Can you please share a [mcve] so we can test it ourselves?","body":"Can you please share a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so we can test it ourselves?"},{"owner":{"account_id":29369550,"reputation":79,"user_id":22502444,"display_name":"KripDo"},"score":0,"creation_date":1695807963,"post_id":77185207,"comment_id":136072542,"body_markdown":"@dan1st I think not because the application is running on a server that can only be accessed via vpn","body":"@dan1st I think not because the application is running on a server that can only be accessed via vpn"},{"owner":{"account_id":29369550,"reputation":79,"user_id":22502444,"display_name":"KripDo"},"score":0,"creation_date":1695808102,"post_id":77185207,"comment_id":136072568,"body_markdown":"The strangest thing is making a request over https everything works, but if you try to make a request over http, you will get a 405 error","body":"The strangest thing is making a request over https everything works, but if you try to make a request over http, you will get a 405 error"},{"owner":{"account_id":10770525,"reputation":526,"user_id":7924110,"display_name":"Kenany"},"score":0,"creation_date":1695809868,"post_id":77185207,"comment_id":136072920,"body_markdown":"Did you define a context path? If not, you should do It. Then your uri will become &quot;http://[server-domain]/[context-path]/api/quizz&quot;\nFollow this tutorial to define the context path:  https://www.baeldung.com/spring-boot-context-path","body":"Did you define a context path? If not, you should do It. Then your uri will become &quot;http://[server-domain]/[context-path]/api/quizz&quot; Follow this tutorial to define the context path:  <a href=\"https://www.baeldung.com/spring-boot-context-path\" rel=\"nofollow noreferrer\">baeldung.com/spring-boot-context-path</a>"}],"answers":[{"comments":[{"owner":{"account_id":29369550,"reputation":79,"user_id":22502444,"display_name":"KripDo"},"score":0,"creation_date":1695811658,"post_id":77186632,"comment_id":136073246,"body_markdown":"Check my answer","body":"Check my answer"}],"tags":[],"owner":{"account_id":16318929,"reputation":57,"user_id":11785247,"display_name":"vahid asghari"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695810449,"creation_date":1695810449,"answer_id":77186632,"question_id":77185207,"body_markdown":"You can Use Bean, I Hope Working That For You\r\n\r\n    @Bean\r\n\tpublic WebMvcConfigurer corsConfigurer() {\r\n\t\treturn new WebMvcConfigurer() {\r\n\t\t\t@Override\r\n\t\t\tpublic void addCorsMappings(CorsRegistry registry) {\r\n\t\t\t\tregistry.addMapping(&quot;/greeting-javaconfig&quot;).allowedOrigins(&quot;http://localhost:8080&quot;);\r\n\t\t\t}\r\n\t\t};\r\n\t}","title":"Can&#39;t make a POST request to the Spring Boot server","body":"<p>You can Use Bean, I Hope Working That For You</p>\n<pre><code>@Bean\npublic WebMvcConfigurer corsConfigurer() {\n    return new WebMvcConfigurer() {\n        @Override\n        public void addCorsMappings(CorsRegistry registry) {\n            registry.addMapping(&quot;/greeting-javaconfig&quot;).allowedOrigins(&quot;http://localhost:8080&quot;);\n        }\n    };\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29369550,"reputation":79,"user_id":22502444,"display_name":"KripDo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695811632,"creation_date":1695811549,"answer_id":77186756,"question_id":77185207,"body_markdown":"I added such a configuration class, it didn&#39;t help \r\n\r\n    @Configuration\r\n    public class CorsConfig implements WebMvcConfigurer {\r\n    \r\n        @Override\r\n        public void addCorsMappings(CorsRegistry registry) {\r\n            registry.addMapping(&quot;/**&quot;)\r\n                    .allowedOrigins(&quot;*&quot;)\r\n                    .allowedMethods(&quot;*&quot;)\r\n                    .allowedHeaders(&quot;*&quot;);\r\n        }\r\n    }","title":"Can&#39;t make a POST request to the Spring Boot server","body":"<p>I added such a configuration class, it didn't help</p>\n<pre><code>@Configuration\npublic class CorsConfig implements WebMvcConfigurer {\n\n    @Override\n    public void addCorsMappings(CorsRegistry registry) {\n        registry.addMapping(&quot;/**&quot;)\n                .allowedOrigins(&quot;*&quot;)\n                .allowedMethods(&quot;*&quot;)\n                .allowedHeaders(&quot;*&quot;);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":29369550,"reputation":79,"user_id":22502444,"display_name":"KripDo"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1695811632,"creation_date":1695797522,"question_id":77185207,"body_markdown":"I&#39;m making a Spring Boot application that has a controller. The application is running on a domain, when I try to make a POST request via a link via http, I get a 405 error, but when making a request via https everything works, the strangest thing is that it doesn&#39;t matter for the GET method http or https, it works in both cases. Below is the code of the controller and an example of requests.\r\n\r\n```\r\n@Slf4j\r\n@RestController\r\n@CrossOrigin(&quot;*&quot;)\r\n@Tag(name = &quot;Quiz&quot;)\r\n@RequiredArgsConstructor\r\n@RequestMapping(&quot;/api/quiz&quot;)\r\npublic class QuizController {\r\n\r\n    private final QuizService quizService;\r\n\r\n    @Operation(\r\n            description = &quot;Creating quiz&quot;,\r\n            summary = &quot;Creating new quiz by dto and sending message to users&quot;,\r\n            responses = {\r\n                    @ApiResponse(description = &quot;Success&quot;, responseCode = &quot;201&quot;),\r\n                    @ApiResponse(description = &quot;Quiz with this name already exists&quot;, responseCode = &quot;400&quot;)})\r\n    @PostMapping\r\n    @ResponseStatus(HttpStatus.CREATED)\r\n    public void createQuiz(@RequestBody QuizDataDTO quizDataDTO) {\r\n        quizService.createQuiz(quizDataDTO);\r\n        quizService.spreadQuiz(quizDataDTO.getTelegramUsersIds());\r\n        log.info(&quot;Create quiz with name {}&quot;, quizDataDTO.getQuizDTO().getQuizName());\r\n    }\r\n\r\n    @Operation(description = &quot;Get links&quot;,\r\n            summary = &quot;Getting all links from google sheets lists&quot;,\r\n            responses = @ApiResponse(description = &quot;Success&quot;, responseCode = &quot;200&quot;))\r\n    @GetMapping(&quot;/links&quot;)\r\n    @ResponseStatus(HttpStatus.OK)\r\n    public List&lt;QuizDetailsDTO&gt; getAllQuizs() {\r\n        log.info(&quot;Return all quiz&quot;);\r\n        return quizService.getAllQuizs();\r\n    }\r\n}\r\n```\r\n[Use POST to http](https://i.stack.imgur.com/0iCbH.png)\r\n\r\nI tried to configure CORS in configuration file. It doen&#39;t works","title":"Can&#39;t make a POST request to the Spring Boot server","body":"<p>I'm making a Spring Boot application that has a controller. The application is running on a domain, when I try to make a POST request via a link via http, I get a 405 error, but when making a request via https everything works, the strangest thing is that it doesn't matter for the GET method http or https, it works in both cases. Below is the code of the controller and an example of requests.</p>\n<pre><code>@Slf4j\n@RestController\n@CrossOrigin(&quot;*&quot;)\n@Tag(name = &quot;Quiz&quot;)\n@RequiredArgsConstructor\n@RequestMapping(&quot;/api/quiz&quot;)\npublic class QuizController {\n\n    private final QuizService quizService;\n\n    @Operation(\n            description = &quot;Creating quiz&quot;,\n            summary = &quot;Creating new quiz by dto and sending message to users&quot;,\n            responses = {\n                    @ApiResponse(description = &quot;Success&quot;, responseCode = &quot;201&quot;),\n                    @ApiResponse(description = &quot;Quiz with this name already exists&quot;, responseCode = &quot;400&quot;)})\n    @PostMapping\n    @ResponseStatus(HttpStatus.CREATED)\n    public void createQuiz(@RequestBody QuizDataDTO quizDataDTO) {\n        quizService.createQuiz(quizDataDTO);\n        quizService.spreadQuiz(quizDataDTO.getTelegramUsersIds());\n        log.info(&quot;Create quiz with name {}&quot;, quizDataDTO.getQuizDTO().getQuizName());\n    }\n\n    @Operation(description = &quot;Get links&quot;,\n            summary = &quot;Getting all links from google sheets lists&quot;,\n            responses = @ApiResponse(description = &quot;Success&quot;, responseCode = &quot;200&quot;))\n    @GetMapping(&quot;/links&quot;)\n    @ResponseStatus(HttpStatus.OK)\n    public List&lt;QuizDetailsDTO&gt; getAllQuizs() {\n        log.info(&quot;Return all quiz&quot;);\n        return quizService.getAllQuizs();\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/0iCbH.png\" rel=\"nofollow noreferrer\">Use POST to http</a></p>\n<p>I tried to configure CORS in configuration file. It doen't works</p>\n"},{"tags":["java","sql","spring","hibernate","jpa"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1695843984,"post_id":77183779,"comment_id":136079717,"body_markdown":"This type of requirement is not fit for a statically defined query string - you need to define the query on the fly based on the given parameters. JPA has criteria api for this purpose, so you can then determine if jobTypes was defined and needs to be added to the query or just ignored and skipped without burdening your database with null checks. Spring has JPA Specifications built around it - see https://www.baeldung.com/spring-data-criteria-queries","body":"This type of requirement is not fit for a statically defined query string - you need to define the query on the fly based on the given parameters. JPA has criteria api for this purpose, so you can then determine if jobTypes was defined and needs to be added to the query or just ignored and skipped without burdening your database with null checks. Spring has JPA Specifications built around it - see <a href=\"https://www.baeldung.com/spring-data-criteria-queries\" rel=\"nofollow noreferrer\">baeldung.com/spring-data-criteria-queries</a>"}],"answers":[{"comments":[{"owner":{"account_id":7367586,"reputation":147,"user_id":5608881,"accept_rate":80,"display_name":"Apatus"},"score":0,"creation_date":1695819662,"post_id":77185958,"comment_id":136074881,"body_markdown":"If I do that it works like a charm when the list is null, but if I ad 1 element I get:\nUnknown wrap conversion requested: java.util.ArrayList to java.lang.String : `org.hibernate.type.descriptor.java.StringJavaType` (java.lang.String)","body":"If I do that it works like a charm when the list is null, but if I ad 1 element I get: Unknown wrap conversion requested: java.util.ArrayList to java.lang.String : <code>org.hibernate.type.descriptor.java.StringJavaType</code> (java.lang.String)"},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1695826494,"post_id":77185958,"comment_id":136076510,"body_markdown":"I am sure you are using a version of `spring-boot-starter-data-jpa` &gt; 3.x, in this case under starter is hibernate version &gt;6.x that  hibernate team made some redesign on query model. I think this is an topic for another question. By the way i suggest you to check approved answer of this [question](https://stackoverflow.com/questions/75556114/hibernate-randomly-throws-error-cannot-coerce-value-java-util-arraylist)(as a workaround) also from there you will find a reference to [Vlad Mihalcea blogs](https://vladmihalcea.com/hibernate-sqm-semantic-query-model/) where he explains it.","body":"I am sure you are using a version of <code>spring-boot-starter-data-jpa</code> &gt; 3.x, in this case under starter is hibernate version &gt;6.x that  hibernate team made some redesign on query model. I think this is an topic for another question. By the way i suggest you to check approved answer of this <a href=\"https://stackoverflow.com/questions/75556114/hibernate-randomly-throws-error-cannot-coerce-value-java-util-arraylist\">question</a>(as a workaround) also from there you will find a reference to <a href=\"https://vladmihalcea.com/hibernate-sqm-semantic-query-model/\" rel=\"nofollow noreferrer\">Vlad Mihalcea blogs</a> where he explains it."},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1695826745,"post_id":77185958,"comment_id":136076567,"body_markdown":"And also if you will downgrade the version of framework you will see that the query provided into answer, work well.","body":"And also if you will downgrade the version of framework you will see that the query provided into answer, work well."},{"owner":{"account_id":7367586,"reputation":147,"user_id":5608881,"accept_rate":80,"display_name":"Apatus"},"score":0,"creation_date":1696452808,"post_id":77185958,"comment_id":136156666,"body_markdown":"The workaround worked perfectly. Thank you!","body":"The workaround worked perfectly. Thank you!"}],"tags":[],"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695811327,"creation_date":1695804854,"answer_id":77185958,"question_id":77183779,"body_markdown":"Usually when we know that the parameter or list of parameters can be optional aka null the `@Query` should know it:\r\n\r\nCan you try next one query and tell me if it is going to fix the problem:\r\n\r\n      @Query(&quot;&quot;&quot;\r\n            select c from Company c\r\n            where ((:jobTypes) is null or (EXISTS (select 1 from CompanyJobType cjt JOIN JobType jt on cjt.jobType = jt where jt.name in :jobTypes and cjt.company = c)))\r\n            AND ((:industries) is null or (EXISTS (select 1 from CompanyIndustry ci JOIN Industry i on ci.industry = i where i.name in :industries and ci.company = c)))\r\n            AND ((:search) is null or (c.name like %:search% or c.shortDescription like %:search%))\r\n            AND ((:isStartup) is null or (c.isStartup = :isStartup OR :isStartup = false))\r\n            AND c.talentpoolOpen = true\r\n            &quot;&quot;&quot;)\r\n      Page&lt;Company&gt; find(List&lt;String&gt; jobTypes, List&lt;String&gt; industries, String search, boolean isStartup, Pageable pageable);","title":"Null condition in Jpa @Query","body":"<p>Usually when we know that the parameter or list of parameters can be optional aka null the <code>@Query</code> should know it:</p>\n<p>Can you try next one query and tell me if it is going to fix the problem:</p>\n<pre><code>  @Query(&quot;&quot;&quot;\n        select c from Company c\n        where ((:jobTypes) is null or (EXISTS (select 1 from CompanyJobType cjt JOIN JobType jt on cjt.jobType = jt where jt.name in :jobTypes and cjt.company = c)))\n        AND ((:industries) is null or (EXISTS (select 1 from CompanyIndustry ci JOIN Industry i on ci.industry = i where i.name in :industries and ci.company = c)))\n        AND ((:search) is null or (c.name like %:search% or c.shortDescription like %:search%))\n        AND ((:isStartup) is null or (c.isStartup = :isStartup OR :isStartup = false))\n        AND c.talentpoolOpen = true\n        &quot;&quot;&quot;)\n  Page&lt;Company&gt; find(List&lt;String&gt; jobTypes, List&lt;String&gt; industries, String search, boolean isStartup, Pageable pageable);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1901420,"reputation":3763,"user_id":1717210,"display_name":"TacheDeChoco"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695805726,"creation_date":1695805726,"answer_id":77186067,"question_id":77183779,"body_markdown":"For this kind of problem, I usually opt for `COALESCE` jpa function (which maps any null value to a constant string), allowing to avoid the tricky &quot;OR&quot; part.\r\n\r\nFor instance:\r\n\r\n`WHERE CompanyJobType like COALESCE(:JobType, &#39;%&#39;) `\r\n\r\nWhen the JobType param is null, the where clause will be always true (ie CompanyJobType like &#39;%&#39;\r\n\r\nSimple but effective :-)","title":"Null condition in Jpa @Query","body":"<p>For this kind of problem, I usually opt for <code>COALESCE</code> jpa function (which maps any null value to a constant string), allowing to avoid the tricky &quot;OR&quot; part.</p>\n<p>For instance:</p>\n<p><code>WHERE CompanyJobType like COALESCE(:JobType, '%') </code></p>\n<p>When the JobType param is null, the where clause will be always true (ie CompanyJobType like '%'</p>\n<p>Simple but effective :-)</p>\n"}],"owner":{"account_id":7367586,"reputation":147,"user_id":5608881,"accept_rate":80,"display_name":"Apatus"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77185958,"answer_count":2,"score":0,"last_activity_date":1695811327,"creation_date":1695767755,"question_id":77183779,"body_markdown":"I have a query in JPA, but all parameters should be optional. I tried many different ways, but none were successful because they threw some error.\r\n\r\nIf for example the given list of job Types is empty it should evaluate this condition as true. Currently no companies would be queried. \r\n\r\n    @Query(&quot;&quot;&quot;\r\n            select c from Company c\r\n            where ((EXISTS (select 1 from CompanyJobType cjt JOIN JobType jt on cjt.jobType = jt where jt.name in :jobTypes and cjt.company = c)))\r\n            AND ((EXISTS (select 1 from CompanyIndustry ci JOIN Industry i on ci.industry = i where i.name in :industries and ci.company = c)))\r\n            AND (c.name like %:search% or c.shortDescription like %:search%)\r\n            AND (c.isStartup = :isStartup OR :isStartup = false)\r\n            AND c.talentpoolOpen = true\r\n            &quot;&quot;&quot;)\r\n    Page&lt;Company&gt; find(List&lt;String&gt; jobTypes, List&lt;String&gt; industries, String search, boolean isStartup, Pageable pageable);\r\n\r\nIf you have any other approach how to get this to work, I&#39;m happy to adapt every part.\r\n","title":"Null condition in Jpa @Query","body":"<p>I have a query in JPA, but all parameters should be optional. I tried many different ways, but none were successful because they threw some error.</p>\n<p>If for example the given list of job Types is empty it should evaluate this condition as true. Currently no companies would be queried.</p>\n<pre><code>@Query(&quot;&quot;&quot;\n        select c from Company c\n        where ((EXISTS (select 1 from CompanyJobType cjt JOIN JobType jt on cjt.jobType = jt where jt.name in :jobTypes and cjt.company = c)))\n        AND ((EXISTS (select 1 from CompanyIndustry ci JOIN Industry i on ci.industry = i where i.name in :industries and ci.company = c)))\n        AND (c.name like %:search% or c.shortDescription like %:search%)\n        AND (c.isStartup = :isStartup OR :isStartup = false)\n        AND c.talentpoolOpen = true\n        &quot;&quot;&quot;)\nPage&lt;Company&gt; find(List&lt;String&gt; jobTypes, List&lt;String&gt; industries, String search, boolean isStartup, Pageable pageable);\n</code></pre>\n<p>If you have any other approach how to get this to work, I'm happy to adapt every part.</p>\n"},{"tags":["java","calendar","dayofweek"],"answers":[{"comments":[{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":4,"creation_date":1264078704,"post_id":2109186,"comment_id":2044273,"body_markdown":"Note that week numbers are locale dependent.  Be _absolutely certain_ that your locale is correct!","body":"Note that week numbers are locale dependent.  Be <i>absolutely certain</i> that your locale is correct!"},{"owner":{"account_id":8492,"reputation":22874,"user_id":15352,"accept_rate":68,"display_name":"Craig Angus"},"score":1,"creation_date":1264079390,"post_id":2109186,"comment_id":2044369,"body_markdown":"currently using Joda time, so much easier to work with, I would recommend switching to it","body":"currently using Joda time, so much easier to work with, I would recommend switching to it"},{"owner":{"account_id":92433,"reputation":2863,"user_id":253329,"accept_rate":83,"display_name":"framara"},"score":0,"creation_date":1264084396,"post_id":2109186,"comment_id":2044993,"body_markdown":"Thank you, that&#39;s exactly what I needed. Anyway I&#39;m going to take a look to Joda Time as you suggested. I&#39;m still in the beginner level, still have to learn a lot.","body":"Thank you, that&#39;s exactly what I needed. Anyway I&#39;m going to take a look to Joda Time as you suggested. I&#39;m still in the beginner level, still have to learn a lot."},{"owner":{"account_id":244572,"reputation":2040,"user_id":2266682,"accept_rate":75,"display_name":"Aqeel Ashiq"},"score":1,"creation_date":1376977882,"post_id":2109186,"comment_id":26899564,"body_markdown":"@BalusC The &#39;epic failures&#39; link you gave in the answer is not accessible now. Please give another link, I really want to know why this Date and Calendar were epic failures.","body":"@BalusC The &#39;epic failures&#39; link you gave in the answer is not accessible now. Please give another link, I really want to know why this Date and Calendar were epic failures."},{"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":0,"creation_date":1376990933,"post_id":2109186,"comment_id":26905514,"body_markdown":"@dj: their API is simply terrible. Look at JodaTime, that is how the date/time API should have looked like.","body":"@dj: their API is simply terrible. Look at JodaTime, that is how the date/time API should have looked like."}],"tags":[],"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"comment_count":5,"down_vote_count":0,"up_vote_count":40,"is_accepted":true,"score":40,"last_activity_date":1264077646,"creation_date":1264077646,"answer_id":2109186,"question_id":2109145,"body_markdown":"Those fields does not return the values. Those are **constants** which identifies the fields in the `Calendar` object which you can get/set/add. To achieve what you want, you first need to get a `Calendar`, clear it and set the known values. It will automatically set the date to first day of that week.\r\n\r\n    // We know week number and year.\r\n    int week = 3;\r\n    int year = 2010;\r\n    \r\n    // Get calendar, clear it and set week number and year.\r\n    Calendar calendar = Calendar.getInstance();\r\n    calendar.clear();\r\n    calendar.set(Calendar.WEEK_OF_YEAR, week);\r\n    calendar.set(Calendar.YEAR, year);\r\n    \r\n    // Now get the first day of week.\r\n    Date date = calendar.getTime();\r\n\r\nPlease learn to *read* the [javadocs][1] to learn how to use classes/methods/fields and do not try to poke random in your IDE ;)\r\n\r\nThat said, the `java.util.Date` and `java.util.Calendar` are [epic failures][2]. If you can, consider switching to [Joda Time][3].\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/util/Calendar.html\r\n  [2]: https://stackoverflow.com/questions/1697215/what-is-your-favourite-java-api-annoyance\r\n  [3]: http://joda-time.sourceforge.net/","title":"How to get first day of a given week number in Java","body":"<p>Those fields does not return the values. Those are <strong>constants</strong> which identifies the fields in the <code>Calendar</code> object which you can get/set/add. To achieve what you want, you first need to get a <code>Calendar</code>, clear it and set the known values. It will automatically set the date to first day of that week.</p>\n\n<pre><code>// We know week number and year.\nint week = 3;\nint year = 2010;\n\n// Get calendar, clear it and set week number and year.\nCalendar calendar = Calendar.getInstance();\ncalendar.clear();\ncalendar.set(Calendar.WEEK_OF_YEAR, week);\ncalendar.set(Calendar.YEAR, year);\n\n// Now get the first day of week.\nDate date = calendar.getTime();\n</code></pre>\n\n<p>Please learn to <em>read</em> the <a href=\"http://java.sun.com/javase/6/docs/api/java/util/Calendar.html\" rel=\"nofollow noreferrer\">javadocs</a> to learn how to use classes/methods/fields and do not try to poke random in your IDE ;)</p>\n\n<p>That said, the <code>java.util.Date</code> and <code>java.util.Calendar</code> are <a href=\"https://stackoverflow.com/questions/1697215/what-is-your-favourite-java-api-annoyance\">epic failures</a>. If you can, consider switching to <a href=\"http://joda-time.sourceforge.net/\" rel=\"nofollow noreferrer\">Joda Time</a>.</p>\n"},{"tags":[],"owner":{"display_name":"user253984"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1264077710,"creation_date":1264077710,"answer_id":2109196,"question_id":2109145,"body_markdown":"I haven&#39;t done much Date stuff in java but a solution might be:\r\n\r\n    cal.set(Calendar.DAY_OF_YEAR, cal.get(Calendar.DAY_OF_YEAR) - cal.get(Calendar.DAY_OF_WEEK));\r\n\r\nLogic:\r\n\r\nGet the day of the week and substract it from the current date (might need -1, depending on wether you need monday to be first day of the week or sunday)","title":"How to get first day of a given week number in Java","body":"<p>I haven't done much Date stuff in java but a solution might be:</p>\n\n<pre><code>cal.set(Calendar.DAY_OF_YEAR, cal.get(Calendar.DAY_OF_YEAR) - cal.get(Calendar.DAY_OF_WEEK));\n</code></pre>\n\n<p>Logic:</p>\n\n<p>Get the day of the week and substract it from the current date (might need -1, depending on wether you need monday to be first day of the week or sunday)</p>\n"},{"tags":[],"owner":{"account_id":91406,"reputation":943,"user_id":250978,"display_name":"SOA Nerd"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1454932937,"creation_date":1264079219,"answer_id":2109358,"question_id":2109145,"body_markdown":"Here&#39;s some quick and dirty code to do this.  This code creates a calendar object with the date of the current day, calculates the current day of the week, and subtracts the day of the week so you&#39;re on the first one (Sunday).  Although I&#39;m using DAY_OF_YEAR it goes across years fine (on 1/2/10 it&#39;ll return 12/27/09 which is right).\r\n\r\n    import java.text.Format;\r\n    import java.text.SimpleDateFormat;\r\n    import java.util.Calendar;\r\n    import java.util.Date;\r\n    \r\n    \r\n    public class DOW {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tDOW dow = new DOW();\r\n    \t\tdow.doIt();\r\n    \t\tSystem.exit(0);\r\n    \t}\r\n    \r\n    \tprivate void doIt() {\r\n    \t\tDate curr = new Date(); \r\n    \t\tCalendar cal = Calendar.getInstance(); \r\n    \t\tcal.setTime(curr); \r\n    \t\tint currentDOW = cal.get(Calendar.DAY_OF_WEEK);\r\n    \t\tcal.add(Calendar.DAY_OF_YEAR, (currentDOW * -1)+1);\r\n    \t\t\r\n    \t\tFormat formatter = new SimpleDateFormat(&quot;MM/dd/yy&quot;);\r\n    \t\tSystem.out.println(&quot;First day of week=&quot;+formatter.format(cal.getTime()));\r\n    \t}\r\n    }","title":"How to get first day of a given week number in Java","body":"<p>Here's some quick and dirty code to do this.  This code creates a calendar object with the date of the current day, calculates the current day of the week, and subtracts the day of the week so you're on the first one (Sunday).  Although I'm using DAY_OF_YEAR it goes across years fine (on 1/2/10 it'll return 12/27/09 which is right).</p>\n\n<pre><code>import java.text.Format;\nimport java.text.SimpleDateFormat;\nimport java.util.Calendar;\nimport java.util.Date;\n\n\npublic class DOW {\n\n    public static void main(String[] args) {\n        DOW dow = new DOW();\n        dow.doIt();\n        System.exit(0);\n    }\n\n    private void doIt() {\n        Date curr = new Date(); \n        Calendar cal = Calendar.getInstance(); \n        cal.setTime(curr); \n        int currentDOW = cal.get(Calendar.DAY_OF_WEEK);\n        cal.add(Calendar.DAY_OF_YEAR, (currentDOW * -1)+1);\n\n        Format formatter = new SimpleDateFormat(\"MM/dd/yy\");\n        System.out.println(\"First day of week=\"+formatter.format(cal.getTime()));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":301920,"reputation":2739,"user_id":609973,"display_name":"MarianP"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1293623598,"creation_date":1293623598,"answer_id":4553851,"question_id":2109145,"body_markdown":"Be cautious with those, `calendar.get(Calendar.WEEK_OF_YEAR)` returns 1 if it is end of December and already a week that ends in the next year.\r\n\r\nUsing\r\n\r\n    //            cal2.set(Calendar.WEEK_OF_YEAR, cal.get(Calendar.WEEK_OF_YEAR));\r\n    //            cal2.set(Calendar.DAY_OF_WEEK, Calendar.MONDAY);\r\n\r\nsets the cal2 date to e.g. end of 2009 on 29/12/2010 !!\r\n\r\nI used this:\r\n\r\n    cal2.set(Calendar.DAY_OF_YEAR, cal.get(Calendar.DAY_OF_YEAR)); //to round at the start of day\r\n    cal2.set(Calendar.YEAR, cal.get(Calendar.YEAR));\r\n    cal2.set(Calendar.DAY_OF_WEEK, Calendar.MONDAY); //to round at the start of week\r\n\r\nI also make sure that weeks in my calendars, no matter what locale they are in, are starting on Mondays:\r\n\r\n    cal.setFirstDayOfWeek(Calendar.MONDAY);\r\n    cal2.setFirstDayOfWeek(Calendar.MONDAY);","title":"How to get first day of a given week number in Java","body":"<p>Be cautious with those, <code>calendar.get(Calendar.WEEK_OF_YEAR)</code> returns 1 if it is end of December and already a week that ends in the next year.</p>\n\n<p>Using</p>\n\n<pre><code>//            cal2.set(Calendar.WEEK_OF_YEAR, cal.get(Calendar.WEEK_OF_YEAR));\n//            cal2.set(Calendar.DAY_OF_WEEK, Calendar.MONDAY);\n</code></pre>\n\n<p>sets the cal2 date to e.g. end of 2009 on 29/12/2010 !!</p>\n\n<p>I used this:</p>\n\n<pre><code>cal2.set(Calendar.DAY_OF_YEAR, cal.get(Calendar.DAY_OF_YEAR)); //to round at the start of day\ncal2.set(Calendar.YEAR, cal.get(Calendar.YEAR));\ncal2.set(Calendar.DAY_OF_WEEK, Calendar.MONDAY); //to round at the start of week\n</code></pre>\n\n<p>I also make sure that weeks in my calendars, no matter what locale they are in, are starting on Mondays:</p>\n\n<pre><code>cal.setFirstDayOfWeek(Calendar.MONDAY);\ncal2.setFirstDayOfWeek(Calendar.MONDAY);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1448884,"reputation":16995,"user_id":1366471,"accept_rate":89,"display_name":"Yaroslav Mytkalyk"},"score":0,"creation_date":1382020343,"post_id":9486121,"comment_id":28804856,"body_markdown":"Calendar.MONDAY needs to be changed to calendar.getFirstDayOfWeek()","body":"Calendar.MONDAY needs to be changed to calendar.getFirstDayOfWeek()"}],"tags":[],"owner":{"account_id":1285125,"reputation":41,"user_id":1238369,"display_name":"Vojta"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1343058617,"creation_date":1330447679,"answer_id":9486121,"question_id":2109145,"body_markdown":"Try this:\r\n\r\n    public static Calendar setWeekStart(Calendar calendar) {\r\n      while (calendar.get(Calendar.DAY_OF_WEEK) != Calendar.MONDAY) {\r\n        calendar.add(Calendar.DATE, -1);\r\n      }\r\n      setDayStart(calendar); // method which sets H:M:S:ms to 0\r\n      return calendar;\r\n    }","title":"How to get first day of a given week number in Java","body":"<p>Try this:</p>\n\n<pre><code>public static Calendar setWeekStart(Calendar calendar) {\n  while (calendar.get(Calendar.DAY_OF_WEEK) != Calendar.MONDAY) {\n    calendar.add(Calendar.DATE, -1);\n  }\n  setDayStart(calendar); // method which sets H:M:S:ms to 0\n  return calendar;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":342232,"reputation":8477,"user_id":673282,"accept_rate":79,"display_name":"chim"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1347460524,"creation_date":1347460524,"answer_id":12390609,"question_id":2109145,"body_markdown":"Yet another way...\r\n\r\n        GregorianCalendar cal = new GregorianCalendar();\r\n        cal.clearTime();\r\n        Integer correction = 1-cal.get(GregorianCalendar.DAY_OF_WEEK)\r\n        cal.add(Calendar.DATE, correction);\r\n\r\ncal is now the first day of the week\r\n\r\n`1-cal.get(GregorianCalendar.DAY_OF_WEEK)`\r\n\r\nevaluates to 1-1 for Sunday (first day of week in my Locale) and 1-2 for Monday, so this will give you the correction needed to rewind the clock back to Sunday\r\n","title":"How to get first day of a given week number in Java","body":"<p>Yet another way...</p>\n\n<pre><code>    GregorianCalendar cal = new GregorianCalendar();\n    cal.clearTime();\n    Integer correction = 1-cal.get(GregorianCalendar.DAY_OF_WEEK)\n    cal.add(Calendar.DATE, correction);\n</code></pre>\n\n<p>cal is now the first day of the week</p>\n\n<p><code>1-cal.get(GregorianCalendar.DAY_OF_WEEK)</code></p>\n\n<p>evaluates to 1-1 for Sunday (first day of week in my Locale) and 1-2 for Monday, so this will give you the correction needed to rewind the clock back to Sunday</p>\n"},{"tags":[],"owner":{"account_id":1097516,"reputation":103,"user_id":1090794,"accept_rate":40,"display_name":"NovoBook"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1375201916,"creation_date":1375201916,"answer_id":17952551,"question_id":2109145,"body_markdown":"Try the Gregorian Calendar algorithm:\r\n\r\n    public int getFirstDay(int m, int year)\r\n        {\r\n            int k=1;\r\n            int c, y, w, M=0;\r\n            if(m&gt;2 &amp;&amp; m&lt;=12) M=m-2;\r\n            else if(m&gt;0 &amp;&amp; M&lt;=2)\r\n            {\r\n                M=m+10;\r\n                year-=1;\r\n            }\r\n            c=year/100;\r\n            y=year%100;\r\n            w=(int)((k+(Math.floor(2.6*M - 0.2))-2*c+y+(Math.floor(y/4))+(Math.floor(c/4)))%7);//a fantastic formula           \r\n            if(w&lt;0) w+=7;\r\n            return w;//thus the day of the week is obtained!\r\n        }","title":"How to get first day of a given week number in Java","body":"<p>Try the Gregorian Calendar algorithm:</p>\n\n<pre><code>public int getFirstDay(int m, int year)\n    {\n        int k=1;\n        int c, y, w, M=0;\n        if(m&gt;2 &amp;&amp; m&lt;=12) M=m-2;\n        else if(m&gt;0 &amp;&amp; M&lt;=2)\n        {\n            M=m+10;\n            year-=1;\n        }\n        c=year/100;\n        y=year%100;\n        w=(int)((k+(Math.floor(2.6*M - 0.2))-2*c+y+(Math.floor(y/4))+(Math.floor(c/4)))%7);//a fantastic formula           \n        if(w&lt;0) w+=7;\n        return w;//thus the day of the week is obtained!\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2179728,"reputation":73077,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1630183531,"creation_date":1630148058,"answer_id":68963656,"question_id":2109145,"body_markdown":"# *java.time* \r\n\r\nThe `java.util` Date-Time API and their formatting API, `SimpleDateFormat` are outdated and error-prone. It is recommended to stop using them completely and switch to the [modern Date-Time API](https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html)&lt;sup&gt;*&lt;/sup&gt;.\r\n\r\nAlso, quoted below is a notice from the [home page of **Joda-Time**](https://www.joda.org/joda-time/):\r\n\r\n&gt; Note that from Java SE 8 onwards, users are asked to migrate to java.time (JSR-310) - a core part of the JDK which replaces this project.\r\n\r\n**Solution using `java.time`, the modern Date-Time API:**\r\n\r\n    import java.time.LocalDate;\r\n    import java.time.temporal.WeekFields;\r\n    import java.util.Locale;\r\n    \r\n    public class Main {\r\n    \tpublic static void main(String[] args) {\r\n    \t\t// Test\r\n        \tint weekNumber = 34;\r\n        \tint year = 2021;\r\n        \t\r\n        \tSystem.out.println(getFirstDayOfWeek(year, weekNumber, Locale.UK));\r\n            System.out.println(getFirstDayOfWeek(year, weekNumber, Locale.US));\r\n    \t}\r\n    \r\n    \tstatic LocalDate getFirstDayOfWeek(int year, int weekNumber, Locale locale) {\r\n    \t\treturn LocalDate\r\n    \t\t\t\t.of(year, 2, 1)\r\n                    .with(WeekFields.of(locale).getFirstDayOfWeek())\r\n                    .with(WeekFields.of(locale).weekOfWeekBasedYear(), weekNumber);\r\n    \t}\r\n    }\r\n    \r\n**Output:**\r\n\r\n    2021-08-23\r\n    2021-08-15\r\n\r\n[&lt;kbd&gt;ONLINE DEMO&lt;/kbd&gt;][1]\r\n\r\nNote that the ***first day of the week*** is `Locale`-dependent e.g. it is Monday in the UK while Sunday in the US. As per the [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601) standards, it is Monday. For comparison, check the [US calendar](https://www.timeanddate.com/calendar/?year=2021&amp;country=1&amp;wno=1) and the [UK calendar](https://www.timeanddate.com/calendar/?year=2021&amp;country=9&amp;wno=1).\r\n\r\nLearn more about the [modern Date-Time API](https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html)&lt;sup&gt;*&lt;/sup&gt; from **[Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**.\r\n\r\n***\r\n&lt;sup&gt;* For any reason, if you have to stick to Java 6 or Java 7, you can use [***ThreeTen-Backport***](http://www.threeten.org/threetenbp/) which backports most of the *java.time* functionality to Java 6 &amp; 7. If you are working for an Android project and your Android API level is still not compliant with Java-8, check [Java 8+ APIs available through desugaring](https://developer.android.com/studio/write/java8-support-table) and [How to use ThreeTenABP in Android Project](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project).\r\n&lt;/sup&gt;\r\n\r\n\r\n  [1]: https://ideone.com/DiOKQ5\r\n\r\n\r\n","title":"How to get first day of a given week number in Java","body":"<h1><em>java.time</em></h1>\n<p>The <code>java.util</code> Date-Time API and their formatting API, <code>SimpleDateFormat</code> are outdated and error-prone. It is recommended to stop using them completely and switch to the <a href=\"https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html\" rel=\"nofollow noreferrer\">modern Date-Time API</a><sup>*</sup>.</p>\n<p>Also, quoted below is a notice from the <a href=\"https://www.joda.org/joda-time/\" rel=\"nofollow noreferrer\">home page of <strong>Joda-Time</strong></a>:</p>\n<blockquote>\n<p>Note that from Java SE 8 onwards, users are asked to migrate to java.time (JSR-310) - a core part of the JDK which replaces this project.</p>\n</blockquote>\n<p><strong>Solution using <code>java.time</code>, the modern Date-Time API:</strong></p>\n<pre><code>import java.time.LocalDate;\nimport java.time.temporal.WeekFields;\nimport java.util.Locale;\n\npublic class Main {\n    public static void main(String[] args) {\n        // Test\n        int weekNumber = 34;\n        int year = 2021;\n        \n        System.out.println(getFirstDayOfWeek(year, weekNumber, Locale.UK));\n        System.out.println(getFirstDayOfWeek(year, weekNumber, Locale.US));\n    }\n\n    static LocalDate getFirstDayOfWeek(int year, int weekNumber, Locale locale) {\n        return LocalDate\n                .of(year, 2, 1)\n                .with(WeekFields.of(locale).getFirstDayOfWeek())\n                .with(WeekFields.of(locale).weekOfWeekBasedYear(), weekNumber);\n    }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>2021-08-23\n2021-08-15\n</code></pre>\n<p><a href=\"https://ideone.com/DiOKQ5\" rel=\"nofollow noreferrer\"><kbd>ONLINE DEMO</kbd></a></p>\n<p>Note that the <em><strong>first day of the week</strong></em> is <code>Locale</code>-dependent e.g. it is Monday in the UK while Sunday in the US. As per the <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601</a> standards, it is Monday. For comparison, check the <a href=\"https://www.timeanddate.com/calendar/?year=2021&amp;country=1&amp;wno=1\" rel=\"nofollow noreferrer\">US calendar</a> and the <a href=\"https://www.timeanddate.com/calendar/?year=2021&amp;country=9&amp;wno=1\" rel=\"nofollow noreferrer\">UK calendar</a>.</p>\n<p>Learn more about the <a href=\"https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html\" rel=\"nofollow noreferrer\">modern Date-Time API</a><sup>*</sup> from <strong><a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">Trail: Date Time</a></strong>.</p>\n<hr />\n<p><sup>* For any reason, if you have to stick to Java 6 or Java 7, you can use <a href=\"http://www.threeten.org/threetenbp/\" rel=\"nofollow noreferrer\"><em><strong>ThreeTen-Backport</strong></em></a> which backports most of the <em>java.time</em> functionality to Java 6 &amp; 7. If you are working for an Android project and your Android API level is still not compliant with Java-8, check <a href=\"https://developer.android.com/studio/write/java8-support-table\" rel=\"nofollow noreferrer\">Java 8+ APIs available through desugaring</a> and <a href=\"https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project\">How to use ThreeTenABP in Android Project</a>.\n</sup></p>\n"},{"tags":[],"owner":{"account_id":6812138,"reputation":1,"user_id":5241932,"display_name":"zpgao"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695569049,"creation_date":1695569049,"answer_id":77167720,"question_id":2109145,"body_markdown":"I revised the answer code by wrapping it within a method, you can easily incorporate this code in your development:\r\n```\r\n    public class 210945SOPost {\r\n        public static Date getFirstDayOfWeek(int week, int year) {\r\n            Calendar calendar = Calendar.getInstance();\r\n            calendar.clear();\r\n            calendar.set(Calendar.WEEK_OF_YEAR, week);\r\n            calendar.set(Calendar.YEAR, year);\r\n            return calendar.getTime();\r\n        }\r\n    }\r\n```","title":"How to get first day of a given week number in Java","body":"<p>I revised the answer code by wrapping it within a method, you can easily incorporate this code in your development:</p>\n<pre><code>    public class 210945SOPost {\n        public static Date getFirstDayOfWeek(int week, int year) {\n            Calendar calendar = Calendar.getInstance();\n            calendar.clear();\n            calendar.set(Calendar.WEEK_OF_YEAR, week);\n            calendar.set(Calendar.YEAR, year);\n            return calendar.getTime();\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29517307,"reputation":1,"user_id":22620980,"display_name":"bobo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695810830,"creation_date":1695810830,"answer_id":77186677,"question_id":2109145,"body_markdown":"I have restructured the [answer code provided by @BalusC][1] into a Java method that you can easily incorporate into your development:\r\n\r\n    import java.util.Calendar;\r\n    import java.util.Date;\r\n\r\n    public class Post2109186 {\r\n        public static Date getFirstDayOfWeek(int week, int year) {\r\n            Calendar calendar = Calendar.getInstance();\r\n            calendar.clear();\r\n            calendar.set(Calendar.WEEK_OF_YEAR, week);\r\n            calendar.set(Calendar.YEAR, year);\r\n            return calendar.getTime();\r\n        }\r\n    }\r\n\r\n[1]: https://stackoverflow.com/a/2109186\r\n\r\n","title":"How to get first day of a given week number in Java","body":"<p>I have restructured the <a href=\"https://stackoverflow.com/a/2109186\">answer code provided by @BalusC</a> into a Java method that you can easily incorporate into your development:</p>\n<pre><code>import java.util.Calendar;\nimport java.util.Date;\n\npublic class Post2109186 {\n    public static Date getFirstDayOfWeek(int week, int year) {\n        Calendar calendar = Calendar.getInstance();\n        calendar.clear();\n        calendar.set(Calendar.WEEK_OF_YEAR, week);\n        calendar.set(Calendar.YEAR, year);\n        return calendar.getTime();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":92433,"reputation":2863,"user_id":253329,"accept_rate":83,"display_name":"framara"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50860,"favorite_count":0,"down_vote_count":0,"up_vote_count":21,"accepted_answer_id":2109186,"answer_count":10,"score":21,"last_activity_date":1695810830,"creation_date":1264077241,"question_id":2109145,"body_markdown":"Let me explain myself. By knowing the week number and the year of a date:\r\n\r\n    Date curr = new Date();\r\n    Calendar cal = Calendar.getInstance();\r\n    cal.setTime(curr);\r\n    int nweek = cal.WEEK_OF_YEAR;\r\n    int year = cal.YEAR;\r\n\r\nBut now I don&#39;t know how to get the date of the first day of that week. I&#39;ve been looking in Calendar, Date, DateFormat but nothing that may be useful... \r\n\r\nAny suggestion? (working in Java)\r\n\r\n\r\n\r\n","title":"How to get first day of a given week number in Java","body":"<p>Let me explain myself. By knowing the week number and the year of a date:</p>\n\n<pre><code>Date curr = new Date();\nCalendar cal = Calendar.getInstance();\ncal.setTime(curr);\nint nweek = cal.WEEK_OF_YEAR;\nint year = cal.YEAR;\n</code></pre>\n\n<p>But now I don't know how to get the date of the first day of that week. I've been looking in Calendar, Date, DateFormat but nothing that may be useful... </p>\n\n<p>Any suggestion? (working in Java)</p>\n"},{"tags":["java","clone"],"comments":[{"owner":{"account_id":2554254,"reputation":6916,"user_id":2216621,"accept_rate":61,"display_name":"Rob Watts"},"score":1,"creation_date":1366138701,"post_id":16044887,"comment_id":22893773,"body_markdown":"You can&#39;t override a protected method to be public. In your `Octagon` class define it as `protected Object clone()`","body":"You can&#39;t override a protected method to be public. In your <code>Octagon</code> class define it as <code>protected Object clone()</code>"}],"answers":[{"comments":[{"owner":{"account_id":1949367,"reputation":485,"user_id":1753819,"accept_rate":86,"display_name":"Dirgon"},"score":0,"creation_date":1366139381,"post_id":16044940,"comment_id":22894114,"body_markdown":"Exactly what was needed. Thanks much. I needed to use something similar to call the custom `compareTo(Octagon o)` function as well `((Octagon)test).compareTo(copy);`  Seems ridiculous this isn&#39;t mentioned anywhere in my textbook.","body":"Exactly what was needed. Thanks much. I needed to use something similar to call the custom <code>compareTo(Octagon o)</code> function as well <code>((Octagon)test).compareTo(copy);</code>  Seems ridiculous this isn&#39;t mentioned anywhere in my textbook."},{"owner":{"account_id":97082,"reputation":375036,"user_id":263525,"accept_rate":85,"display_name":"Denys S&#233;guret"},"score":0,"creation_date":1366139460,"post_id":16044940,"comment_id":22894153,"body_markdown":"clone is widely seen as badly designed, that&#39;s why you probably don&#39;t see it too much in textbooks.","body":"clone is widely seen as badly designed, that&#39;s why you probably don&#39;t see it too much in textbooks."},{"owner":{"account_id":1949367,"reputation":485,"user_id":1753819,"accept_rate":86,"display_name":"Dirgon"},"score":0,"creation_date":1366140113,"post_id":16044940,"comment_id":22894465,"body_markdown":"Unfortunately the assignment from the text specifically required the use of clone. =\\ Interesting read though, thanks.","body":"Unfortunately the assignment from the text specifically required the use of clone. =\\ Interesting read though, thanks."},{"owner":{"account_id":6115694,"reputation":3228,"user_id":4770813,"accept_rate":53,"display_name":"Scaramouche"},"score":1,"creation_date":1544310632,"post_id":16044940,"comment_id":94232290,"body_markdown":"hello, could you please explain why the need for a double cast?? I&#39;m confused about it, thanx!","body":"hello, could you please explain why the need for a double cast?? I&#39;m confused about it, thanx!"},{"owner":{"account_id":97082,"reputation":375036,"user_id":263525,"accept_rate":85,"display_name":"Denys S&#233;guret"},"score":5,"creation_date":1544340560,"post_id":16044940,"comment_id":94236643,"body_markdown":"@Scaramouche The type of the `test` variable is `Object`. So it has to be casted in order to find the `clone` method. Then the returned type of `clone` is also `Object`, which means it has to be casted again to be assigned to the ̀copy` variable which is of type `Object`.","body":"@Scaramouche The type of the <code>test</code> variable is <code>Object</code>. So it has to be casted in order to find the <code>clone</code> method. Then the returned type of <code>clone</code> is also <code>Object</code>, which means it has to be casted again to be assigned to the ̀copy` variable which is of type <code>Object</code>."}],"tags":[],"owner":{"account_id":97082,"reputation":375036,"user_id":263525,"accept_rate":85,"display_name":"Denys S&#233;guret"},"comment_count":5,"down_vote_count":1,"up_vote_count":21,"is_accepted":true,"score":20,"last_activity_date":1366138682,"creation_date":1366138682,"answer_id":16044940,"question_id":16044887,"body_markdown":"Replace\r\n\r\n    Octagon copy = (Octagon)test.clone();\r\n\r\nwith\r\n\r\n    Octagon copy = (Octagon)((Octagon)test).clone();\r\n\r\nso that the called clone method is the one of your class.","title":"clone() has protected access - made public Object clone()","body":"<p>Replace</p>\n\n<pre><code>Octagon copy = (Octagon)test.clone();\n</code></pre>\n\n<p>with</p>\n\n<pre><code>Octagon copy = (Octagon)((Octagon)test).clone();\n</code></pre>\n\n<p>so that the called clone method is the one of your class.</p>\n"},{"tags":[],"owner":{"account_id":1781872,"reputation":14665,"user_id":1624376,"accept_rate":76,"display_name":"Aubin"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1366138689,"creation_date":1366138689,"answer_id":16044942,"question_id":16044887,"body_markdown":"You may write a copy-constructor:\r\n\r\n\r\n    public Octagon( Octagon right ){\r\n        this.side = right.side;\r\n    }\r\n\r\nAnd use it from the clone method:\r\n\r\n    public Object clone() throws CloneNotSupportedException {\r\n        return new Octagon( this );\r\n    }\r\n","title":"clone() has protected access - made public Object clone()","body":"<p>You may write a copy-constructor:</p>\n\n<pre><code>public Octagon( Octagon right ){\n    this.side = right.side;\n}\n</code></pre>\n\n<p>And use it from the clone method:</p>\n\n<pre><code>public Object clone() throws CloneNotSupportedException {\n    return new Octagon( this );\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3178065,"reputation":1032,"user_id":2685454,"display_name":"Sumit"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695810783,"creation_date":1695805389,"answer_id":77186021,"question_id":16044887,"body_markdown":"I also faced the same error and solved it by creating one public function inside class\r\n\r\n    public class Octagon { ....\r\n    \r\n        public Octagon copy() {\r\n            try {\r\n              return (Octagon) clone();\r\n            } catch(Exception e) {\r\n              return new Octagon();\r\n            } \r\n        }\r\n        \r\n        @Override\r\n        protected Object clone() throws CloneNotSupportedException {\r\n            return super.clone();\r\n        }\r\n    \r\n    }\r\n\r\n   ","title":"clone() has protected access - made public Object clone()","body":"<p>I also faced the same error and solved it by creating one public function inside class</p>\n<pre><code>public class Octagon { ....\n\n    public Octagon copy() {\n        try {\n          return (Octagon) clone();\n        } catch(Exception e) {\n          return new Octagon();\n        } \n    }\n    \n    @Override\n    protected Object clone() throws CloneNotSupportedException {\n        return super.clone();\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":1949367,"reputation":485,"user_id":1753819,"accept_rate":86,"display_name":"Dirgon"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52000,"favorite_count":0,"down_vote_count":1,"up_vote_count":28,"accepted_answer_id":16044940,"answer_count":3,"score":27,"last_activity_date":1695810783,"creation_date":1366138519,"question_id":16044887,"body_markdown":"I&#39;m writing code to create an object, clone the object, then compare the two.\r\n\r\nThe object in question, Octagon, is an extension of an object GeometricObject\r\n\r\n    public class Octagon extends GeometricObject implements Comparable&lt;Octagon&gt;, Cloneable {\r\n    private double side;\r\n    \r\n    public Octagon (double side){\r\n        this.side = side;\r\n    }\r\n\r\n    public Object clone() throws CloneNotSupportedException {\r\n        Octagon octClone = (Octagon)super.clone();\r\n        return octClone;\r\n    }\r\n\r\nIn a file named Octagon.java\r\n\r\nIn another, TestOctagon.java, is my main method:\r\n\r\n    public class TestOctagon {\r\n        public static void main(String[] args) {\r\n            GeometricObject test = new Octagon(5); //create an Octagon with a side of 5\r\n            System.out.println(&quot;Area is: &quot;+test.getArea());\r\n            System.out.println(&quot;Perimeter is: &quot;+test.getPerimeter());\r\n            \r\n            Octagon copy = (Octagon)test.clone();\r\n            \r\n        \r\n        }\r\n    }\r\n\r\nThe errors come in on the last line of the main method.\r\n\r\n    clone() has protected access in Object\r\n\r\nI&#39;ve tried renaming the clone method in Octagaon, say to cloneme, but then I get the error:\r\n\r\n    cannot find symbol\r\n    symbol: method cloneme()\r\n    location: variable test of type GeometricObject\r\n\r\n\r\nI get the feeling the problem is because Octagon extends another object, maybe?\r\n\r\nI really can&#39;t find any solution, and I&#39;ve spent a good hour reading all the other clone() posts here.\r\n\r\nEdit: It&#39;s required I use clone. I&#39;m aware the general consensus is clone is borked.","title":"clone() has protected access - made public Object clone()","body":"<p>I'm writing code to create an object, clone the object, then compare the two.</p>\n\n<p>The object in question, Octagon, is an extension of an object GeometricObject</p>\n\n<pre><code>public class Octagon extends GeometricObject implements Comparable&lt;Octagon&gt;, Cloneable {\nprivate double side;\n\npublic Octagon (double side){\n    this.side = side;\n}\n\npublic Object clone() throws CloneNotSupportedException {\n    Octagon octClone = (Octagon)super.clone();\n    return octClone;\n}\n</code></pre>\n\n<p>In a file named Octagon.java</p>\n\n<p>In another, TestOctagon.java, is my main method:</p>\n\n<pre><code>public class TestOctagon {\n    public static void main(String[] args) {\n        GeometricObject test = new Octagon(5); //create an Octagon with a side of 5\n        System.out.println(\"Area is: \"+test.getArea());\n        System.out.println(\"Perimeter is: \"+test.getPerimeter());\n\n        Octagon copy = (Octagon)test.clone();\n\n\n    }\n}\n</code></pre>\n\n<p>The errors come in on the last line of the main method.</p>\n\n<pre><code>clone() has protected access in Object\n</code></pre>\n\n<p>I've tried renaming the clone method in Octagaon, say to cloneme, but then I get the error:</p>\n\n<pre><code>cannot find symbol\nsymbol: method cloneme()\nlocation: variable test of type GeometricObject\n</code></pre>\n\n<p>I get the feeling the problem is because Octagon extends another object, maybe?</p>\n\n<p>I really can't find any solution, and I've spent a good hour reading all the other clone() posts here.</p>\n\n<p>Edit: It's required I use clone. I'm aware the general consensus is clone is borked.</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":1,"creation_date":1695760120,"post_id":77183150,"comment_id":136066913,"body_markdown":"You are implementing the same worst practices as the author of [this other recent question](https://stackoverflow.com/q/77176116/619830). Switch to [formLogin](https://docs.spring.io/spring-security/reference/servlet/authentication/passwords/form.html) and sessions or see [my answer](https://stackoverflow.com/a/77176424/619830) for proper OAuth2 implementation.","body":"You are implementing the same worst practices as the author of <a href=\"https://stackoverflow.com/q/77176116/619830\">this other recent question</a>. Switch to <a href=\"https://docs.spring.io/spring-security/reference/servlet/authentication/passwords/form.html\" rel=\"nofollow noreferrer\">formLogin</a> and sessions or see <a href=\"https://stackoverflow.com/a/77176424/619830\">my answer</a> for proper OAuth2 implementation."}],"owner":{"account_id":11597040,"reputation":1,"user_id":8495470,"display_name":"Ayush Kumar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695810430,"creation_date":1695759310,"question_id":77183150,"body_markdown":"I am making an authentication feature for my Spring Boot API using **Spring Security** and **OAuth2ResourceServerConfigurer**. I am storing the user details in a MySQL database. For an authentication request, I want to check if the user exists in the database or not.\r\n\r\nI kept breakpoints at the overridden *loadUserByUsername()* function and I am getting userName parameter as ***NONE_PROVIDED***. The username that I am trying to fetch exists in the database table. I even tried to test the *findByUserName()* repository method by passing the username that I want to authenticate and it returned me the user result but I could not understand that why that particular username is not being passed in the UserDetails method.\r\n\r\nAttaching my code snippets below.\r\n\r\nThis is my User class.\r\n\r\n```\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.GeneratedValue;\r\nimport jakarta.persistence.Id;\r\nimport jakarta.persistence.Table;\r\nimport org.springframework.security.core.GrantedAuthority;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\n\r\nimport java.util.Collection;\r\n\r\n@Entity\r\n@Table(name = &quot;newUser&quot;)\r\npublic class User implements UserDetails {\r\n    @Id\r\n    @GeneratedValue\r\n    private Integer userId;\r\n    private String userName;\r\n    private String password;\r\n\r\n    public User() {\r\n    }\r\n\r\n    public User(String userName, String password) {\r\n        this.userName = userName;\r\n        this.password = password;\r\n    }\r\n\r\n    public User(int userId, String userName, String password) {\r\n        this.userId = userId;\r\n        this.userName = userName;\r\n        this.password = password;\r\n    }\r\n\r\n    public int getUserId() {\r\n        return userId;\r\n    }\r\n\r\n    public void setUserId(int userId) {\r\n        this.userId = userId;\r\n    }\r\n\r\n    public String getUserName() {\r\n        return userName;\r\n    }\r\n\r\n    public void setUserName(String userName) {\r\n        this.userName = userName;\r\n    }\r\n\r\n    @Override\r\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\r\n        return null;\r\n    }\r\n\r\n    public String getPassword() {\r\n        return password;\r\n    }\r\n\r\n    @Override\r\n    public String getUsername() {\r\n        return userName;\r\n    }\r\n\r\n    @Override\r\n    public boolean isAccountNonExpired() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isAccountNonLocked() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isCredentialsNonExpired() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isEnabled() {\r\n        return true;\r\n    }\r\n\r\n    public void setPassword(String password) {\r\n        this.password = password;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;User{&quot; +\r\n                &quot;userId=&quot; + userId +\r\n                &quot;, userName=&#39;&quot; + userName + &#39;\\&#39;&#39; +\r\n                &quot;, password=&#39;&quot; + password + &#39;\\&#39;&#39; +\r\n                &#39;}&#39;;\r\n    }\r\n}\r\n\r\n```\r\n\r\nUser Repository Class\r\n\r\n```\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\nimport org.springframework.stereotype.Repository;\r\n\r\n@Repository\r\npublic interface UserRepository extends JpaRepository&lt;User, Integer&gt; {\r\n    User findByUserName(String userName);\r\n}\r\n```\r\n\r\nConfiguration Class\r\n\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\n@EnableMethodSecurity\r\npublic class JwtSecurityConfig {\r\n\r\n    @Autowired\r\n    private UserRepository userRepository;\r\n\r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity httpSecurity) throws Exception {\r\n        return httpSecurity\r\n                .authorizeHttpRequests(auth -&gt; auth\r\n                \t.requestMatchers(&quot;/authenticate&quot;).permitAll()\r\n                \t.requestMatchers(&quot;/register&quot;).permitAll()\r\n                    .permitAll()\r\n                    .anyRequest()\r\n                    .authenticated())\r\n                .csrf(AbstractHttpConfigurer::disable)\r\n                .sessionManagement(session -&gt; session.\r\n                \tsessionCreationPolicy(SessionCreationPolicy.STATELESS))\r\n                .oauth2ResourceServer(\r\n                        OAuth2ResourceServerConfigurer::jwt)\r\n                .build();\r\n    }\r\n\r\n    @Bean\r\n    public UserDetailsService userDetailsService(){\r\n        return new UserDetailsService() {\r\n            @Override\r\n            public UserDetails loadUserByUsername(String userName) throws UsernameNotFoundException {\r\n                return userRepository.findByUserName(userName);\r\n            }\r\n        };\r\n    }\r\n\r\n    @Bean\r\n    @DependsOn(&quot;userDetailsService&quot;)\r\n    public AuthenticationManager authenticationManager(UserDetailsService userDetailsService) {\r\n        var authenticationProvider = new DaoAuthenticationProvider();\r\n        authenticationProvider.setUserDetailsService(userDetailsService);\r\n        return new ProviderManager(authenticationProvider);\r\n    }\r\n\r\n    //Other beans for JWT encoding and decoding\r\n\r\n}\r\n\r\n```\r\n\r\nThe Controller class\r\n\r\n```\r\n@RestController\r\npublic class JwtAuthenticationController {\r\n\r\n    @Autowired\r\n    private UserRepository userRepository;\r\n    \r\n    private final JwtTokenService tokenService;\r\n    \r\n    private final AuthenticationManager authenticationManager;\r\n\r\n    public JwtAuthenticationController(JwtTokenService tokenService, \r\n            AuthenticationManager authenticationManager) {\r\n        this.tokenService = tokenService;\r\n        this.authenticationManager = authenticationManager;\r\n    }\r\n\r\n    @PostMapping(&quot;/authenticate&quot;)\r\n    public ResponseEntity&lt;JwtTokenResponse&gt; generateToken(\r\n            @RequestBody JwtTokenRequest jwtTokenRequest) {\r\n        \r\n        var authenticationToken = \r\n                new UsernamePasswordAuthenticationToken(\r\n                        jwtTokenRequest.username(), \r\n                        jwtTokenRequest.password());\r\n        \r\n        var authentication = \r\n                authenticationManager.authenticate(authenticationToken);\r\n        \r\n        var token = tokenService.generateToken(authentication);\r\n\r\n        SecurityContextHolder.getContext().setAuthentication(authentication);\r\n        \r\n        return ResponseEntity.ok(new JwtTokenResponse(token));\r\n    }\r\n}\r\n```\r\n\r\nThe pom.xml file\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.1.1&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;react.api.helloworldv3&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;helloworldv3&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;helloworldv3&lt;/name&gt;\r\n\t&lt;description&gt;Hello World&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;8.0.33&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\n","title":"Receiving NONE_PROVIDED in username parameter in the loadUserByUsername() function in Spring Boot 3.1.2","body":"<p>I am making an authentication feature for my Spring Boot API using <strong>Spring Security</strong> and <strong>OAuth2ResourceServerConfigurer</strong>. I am storing the user details in a MySQL database. For an authentication request, I want to check if the user exists in the database or not.</p>\n<p>I kept breakpoints at the overridden <em>loadUserByUsername()</em> function and I am getting userName parameter as <em><strong>NONE_PROVIDED</strong></em>. The username that I am trying to fetch exists in the database table. I even tried to test the <em>findByUserName()</em> repository method by passing the username that I want to authenticate and it returned me the user result but I could not understand that why that particular username is not being passed in the UserDetails method.</p>\n<p>Attaching my code snippets below.</p>\n<p>This is my User class.</p>\n<pre><code>import jakarta.persistence.Entity;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.Table;\nimport org.springframework.security.core.GrantedAuthority;\nimport org.springframework.security.core.userdetails.UserDetails;\n\nimport java.util.Collection;\n\n@Entity\n@Table(name = &quot;newUser&quot;)\npublic class User implements UserDetails {\n    @Id\n    @GeneratedValue\n    private Integer userId;\n    private String userName;\n    private String password;\n\n    public User() {\n    }\n\n    public User(String userName, String password) {\n        this.userName = userName;\n        this.password = password;\n    }\n\n    public User(int userId, String userName, String password) {\n        this.userId = userId;\n        this.userName = userName;\n        this.password = password;\n    }\n\n    public int getUserId() {\n        return userId;\n    }\n\n    public void setUserId(int userId) {\n        this.userId = userId;\n    }\n\n    public String getUserName() {\n        return userName;\n    }\n\n    public void setUserName(String userName) {\n        this.userName = userName;\n    }\n\n    @Override\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\n        return null;\n    }\n\n    public String getPassword() {\n        return password;\n    }\n\n    @Override\n    public String getUsername() {\n        return userName;\n    }\n\n    @Override\n    public boolean isAccountNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isAccountNonLocked() {\n        return true;\n    }\n\n    @Override\n    public boolean isCredentialsNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isEnabled() {\n        return true;\n    }\n\n    public void setPassword(String password) {\n        this.password = password;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;User{&quot; +\n                &quot;userId=&quot; + userId +\n                &quot;, userName='&quot; + userName + '\\'' +\n                &quot;, password='&quot; + password + '\\'' +\n                '}';\n    }\n}\n\n</code></pre>\n<p>User Repository Class</p>\n<pre><code>import org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\n\n@Repository\npublic interface UserRepository extends JpaRepository&lt;User, Integer&gt; {\n    User findByUserName(String userName);\n}\n</code></pre>\n<p>Configuration Class</p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@EnableMethodSecurity\npublic class JwtSecurityConfig {\n\n    @Autowired\n    private UserRepository userRepository;\n\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity httpSecurity) throws Exception {\n        return httpSecurity\n                .authorizeHttpRequests(auth -&gt; auth\n                    .requestMatchers(&quot;/authenticate&quot;).permitAll()\n                    .requestMatchers(&quot;/register&quot;).permitAll()\n                    .permitAll()\n                    .anyRequest()\n                    .authenticated())\n                .csrf(AbstractHttpConfigurer::disable)\n                .sessionManagement(session -&gt; session.\n                    sessionCreationPolicy(SessionCreationPolicy.STATELESS))\n                .oauth2ResourceServer(\n                        OAuth2ResourceServerConfigurer::jwt)\n                .build();\n    }\n\n    @Bean\n    public UserDetailsService userDetailsService(){\n        return new UserDetailsService() {\n            @Override\n            public UserDetails loadUserByUsername(String userName) throws UsernameNotFoundException {\n                return userRepository.findByUserName(userName);\n            }\n        };\n    }\n\n    @Bean\n    @DependsOn(&quot;userDetailsService&quot;)\n    public AuthenticationManager authenticationManager(UserDetailsService userDetailsService) {\n        var authenticationProvider = new DaoAuthenticationProvider();\n        authenticationProvider.setUserDetailsService(userDetailsService);\n        return new ProviderManager(authenticationProvider);\n    }\n\n    //Other beans for JWT encoding and decoding\n\n}\n\n</code></pre>\n<p>The Controller class</p>\n<pre><code>@RestController\npublic class JwtAuthenticationController {\n\n    @Autowired\n    private UserRepository userRepository;\n    \n    private final JwtTokenService tokenService;\n    \n    private final AuthenticationManager authenticationManager;\n\n    public JwtAuthenticationController(JwtTokenService tokenService, \n            AuthenticationManager authenticationManager) {\n        this.tokenService = tokenService;\n        this.authenticationManager = authenticationManager;\n    }\n\n    @PostMapping(&quot;/authenticate&quot;)\n    public ResponseEntity&lt;JwtTokenResponse&gt; generateToken(\n            @RequestBody JwtTokenRequest jwtTokenRequest) {\n        \n        var authenticationToken = \n                new UsernamePasswordAuthenticationToken(\n                        jwtTokenRequest.username(), \n                        jwtTokenRequest.password());\n        \n        var authentication = \n                authenticationManager.authenticate(authenticationToken);\n        \n        var token = tokenService.generateToken(authentication);\n\n        SecurityContextHolder.getContext().setAuthentication(authentication);\n        \n        return ResponseEntity.ok(new JwtTokenResponse(token));\n    }\n}\n</code></pre>\n<p>The pom.xml file</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.1&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;react.api.helloworldv3&lt;/groupId&gt;\n    &lt;artifactId&gt;helloworldv3&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;helloworldv3&lt;/name&gt;\n    &lt;description&gt;Hello World&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;version&gt;8.0.33&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n"},{"tags":["java","sqlite","hibernate","kotlin","jpa"],"answers":[{"comments":[{"owner":{"account_id":2169838,"reputation":141,"user_id":5412249,"display_name":"Jobin Jacob Kavalam"},"score":1,"creation_date":1663394433,"post_id":71058174,"comment_id":130233934,"body_markdown":"@jlegrand I was faced with exactly the same issue today. And i adopted your approach of manually fixing the migration script. Thank you !","body":"@jlegrand I was faced with exactly the same issue today. And i adopted your approach of manually fixing the migration script. Thank you !"}],"tags":[],"owner":{"account_id":106045,"reputation":12258,"user_id":282677,"accept_rate":88,"display_name":"jlengrand"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1644450069,"creation_date":1644450069,"answer_id":71058174,"question_id":70933212,"body_markdown":"Gonna answer my own question given that it&#39;s not getting much traction :).\r\n\r\nSQLite indeed does not support ALTER with constraints, and Hibernate does not (to my knowledge) offer a clean way to use custom SQL. \r\nOn top of this, [it is not recommended to use Hibernate: hbm2ddl.auto=update in production](https://stackoverflow.com/questions/221379/hibernate-hbm2ddl-auto-update-in-production).\r\n\r\nFor those reasons, I decided to turn myself to [Flyway](https://flywaydb.org/) and write my own SQL. The good news is that adding Flyway provides my database migrations. The bad news is that it&#39;s one more dependency to maintain.\r\n\r\nWhat I&#39;ve done: \r\n\r\nAdded the flyway dependency in my build.gradle.kts\r\n\r\n```\r\n    implementation(&quot;org.flywaydb:flyway-core:8.4.3&quot;)\r\n```\r\n\r\nInstantiated flyway before hibernate in my code, pointing to the same database: \r\n\r\n```\r\n    val flyway = Flyway\r\n        .configure()\r\n        .dataSource(&quot;jdbc:sqlite:test.db&quot;, null, null).load()\r\n    flyway.migrate()\r\n```\r\n\r\nAdded a handwritten SQL migration file in `resources/V1__Create_person_and_entries_table.sql`\r\n\r\n```SQL\r\ncreate table Person\r\n(\r\n    id   integer primary key,\r\n    name varchar(255) not null UNIQUE\r\n);\r\n```\r\n\r\nEt voil&#224;!\r\n\r\nI wrote a blog post over [here](https://lengrand.fr/tips-and-tricks-using-hibernate-and-sqlite-with-kotlin/) with more details and some more reasons to use something like Flyway.","title":"Hibernate and SQLite : Set unique constraint on creation","body":"<p>Gonna answer my own question given that it's not getting much traction :).</p>\n<p>SQLite indeed does not support ALTER with constraints, and Hibernate does not (to my knowledge) offer a clean way to use custom SQL.\nOn top of this, <a href=\"https://stackoverflow.com/questions/221379/hibernate-hbm2ddl-auto-update-in-production\">it is not recommended to use Hibernate: hbm2ddl.auto=update in production</a>.</p>\n<p>For those reasons, I decided to turn myself to <a href=\"https://flywaydb.org/\" rel=\"nofollow noreferrer\">Flyway</a> and write my own SQL. The good news is that adding Flyway provides my database migrations. The bad news is that it's one more dependency to maintain.</p>\n<p>What I've done:</p>\n<p>Added the flyway dependency in my build.gradle.kts</p>\n<pre><code>    implementation(&quot;org.flywaydb:flyway-core:8.4.3&quot;)\n</code></pre>\n<p>Instantiated flyway before hibernate in my code, pointing to the same database:</p>\n<pre><code>    val flyway = Flyway\n        .configure()\n        .dataSource(&quot;jdbc:sqlite:test.db&quot;, null, null).load()\n    flyway.migrate()\n</code></pre>\n<p>Added a handwritten SQL migration file in <code>resources/V1__Create_person_and_entries_table.sql</code></p>\n<pre><code>create table Person\n(\n    id   integer primary key,\n    name varchar(255) not null UNIQUE\n);\n</code></pre>\n<p>Et voilà!</p>\n<p>I wrote a blog post over <a href=\"https://lengrand.fr/tips-and-tricks-using-hibernate-and-sqlite-with-kotlin/\" rel=\"nofollow noreferrer\">here</a> with more details and some more reasons to use something like Flyway.</p>\n"},{"tags":[],"owner":{"account_id":908335,"reputation":5155,"user_id":942774,"accept_rate":100,"display_name":"Hendrik"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695810382,"creation_date":1695810382,"answer_id":77186623,"question_id":70933212,"body_markdown":"The Hibernate SQLiteDialect [bug](https://hibernate.atlassian.net/browse/HHH-17245) you point to will be fixed in version 6.3.2. Hibernate will then stop emitting things like\r\n\r\n```sql\r\nALTER TABLE some_table ADD CONSTRAINT constraint_name UNIQUE (some_column);\r\n```\r\n\r\nfor SQLite.\r\n\r\nThe `unique` constraint should still be part of the table creation statement, though.","title":"Hibernate and SQLite : Set unique constraint on creation","body":"<p>The Hibernate SQLiteDialect <a href=\"https://hibernate.atlassian.net/browse/HHH-17245\" rel=\"nofollow noreferrer\">bug</a> you point to will be fixed in version 6.3.2. Hibernate will then stop emitting things like</p>\n<pre class=\"lang-sql prettyprint-override\"><code>ALTER TABLE some_table ADD CONSTRAINT constraint_name UNIQUE (some_column);\n</code></pre>\n<p>for SQLite.</p>\n<p>The <code>unique</code> constraint should still be part of the table creation statement, though.</p>\n"}],"owner":{"account_id":106045,"reputation":12258,"user_id":282677,"accept_rate":88,"display_name":"jlengrand"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":681,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":71058174,"answer_count":2,"score":2,"last_activity_date":1695810382,"creation_date":1643665750,"question_id":70933212,"body_markdown":"I&#39;m using Hibernate to create SQLite tables.\r\n\r\nI have a table as such \r\n\r\n```kotlin\r\n@Entity \r\nclass Person(\r\n\r\n    @Column(unique = true, nullable = false)\r\n    val name: String,\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    val id: Int? = null,\r\n)\r\n```\r\n\r\nI see that when the database is created, the `unique` constraint is added later on via an ALTER request\r\n\r\n```\r\nHibernate: create table Person (id  integer, name varchar(255) not null, primary key (id))\r\nHibernate: alter table Person add constraint UK_is4vd0f6kw9sw4dxyie5cy9fa unique (name)\r\n```\r\n\r\nExcept that SQLite [does not seem to support ALTER requests modifying constraints on tables](https://www.sqlite.org/omitted.html).\r\n\r\nSo my question is : Is there a way to literally indicate Hibernate to set that uniqueness constraint on table creation? What would be the best way to do it?\r\n\r\nI can ensure uniqueness easily later on via code, but I&#39;d rather use the power of the database if I can.\r\n\r\nI should add that this is for a personal small application so so far I&#39;m using the `update` setting for `hibernate.hbm2ddl.auto` so Hibernate generates the SQL itself. I&#39;m open to other methods but I&#39;d rather avoid them if I can to reduce maintenance.\r\n","title":"Hibernate and SQLite : Set unique constraint on creation","body":"<p>I'm using Hibernate to create SQLite tables.</p>\n<p>I have a table as such</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@Entity \nclass Person(\n\n    @Column(unique = true, nullable = false)\n    val name: String,\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    val id: Int? = null,\n)\n</code></pre>\n<p>I see that when the database is created, the <code>unique</code> constraint is added later on via an ALTER request</p>\n<pre><code>Hibernate: create table Person (id  integer, name varchar(255) not null, primary key (id))\nHibernate: alter table Person add constraint UK_is4vd0f6kw9sw4dxyie5cy9fa unique (name)\n</code></pre>\n<p>Except that SQLite <a href=\"https://www.sqlite.org/omitted.html\" rel=\"nofollow noreferrer\">does not seem to support ALTER requests modifying constraints on tables</a>.</p>\n<p>So my question is : Is there a way to literally indicate Hibernate to set that uniqueness constraint on table creation? What would be the best way to do it?</p>\n<p>I can ensure uniqueness easily later on via code, but I'd rather use the power of the database if I can.</p>\n<p>I should add that this is for a personal small application so so far I'm using the <code>update</code> setting for <code>hibernate.hbm2ddl.auto</code> so Hibernate generates the SQL itself. I'm open to other methods but I'd rather avoid them if I can to reduce maintenance.</p>\n"},{"tags":["java","spring","spring-boot","spring-boot-actuator"],"comments":[{"owner":{"account_id":3175510,"reputation":2055,"user_id":2683501,"accept_rate":82,"display_name":"pL4Gu33"},"score":0,"creation_date":1574452832,"post_id":59000565,"comment_id":104252291,"body_markdown":"i tried it and the health endpoint is used. Could you make a system.out. there and try it again... if there is something in the console.","body":"i tried it and the health endpoint is used. Could you make a system.out. there and try it again... if there is something in the console."},{"owner":{"account_id":3540948,"reputation":5877,"user_id":2958086,"display_name":"Compass"},"score":1,"creation_date":1574452882,"post_id":59000565,"comment_id":104252303,"body_markdown":"Verify the component is actually configured as a spring bean. Just annotating as @Component does not guarantee it becomes a bean if there&#39;s no component scan for it.","body":"Verify the component is actually configured as a spring bean. Just annotating as @Component does not guarantee it becomes a bean if there&#39;s no component scan for it."},{"owner":{"account_id":243216,"reputation":1162,"user_id":515241,"display_name":"Tomek Cejner"},"score":0,"creation_date":1574809723,"post_id":59000565,"comment_id":104360718,"body_markdown":"@Compass, I&#39;ve updated the question. The main class is annotated with `@SpringBootApplication`, which enables component scan.","body":"@Compass, I&#39;ve updated the question. The main class is annotated with <code>@SpringBootApplication</code>, which enables component scan."},{"owner":{"account_id":1119443,"reputation":6044,"user_id":1108098,"accept_rate":73,"display_name":"jordiburgos"},"score":0,"creation_date":1574860951,"post_id":59000565,"comment_id":104380254,"body_markdown":"Your HealthIndicator class doesn&#39;t add any extra information.","body":"Your HealthIndicator class doesn&#39;t add any extra information."},{"owner":{"account_id":2133396,"reputation":57,"user_id":1893680,"display_name":"Java Crazy"},"score":0,"creation_date":1662996114,"post_id":59000565,"comment_id":130129693,"body_markdown":"add a name to your component like @Component(&quot;healtCheck&quot;).","body":"add a name to your component like @Component(&quot;healtCheck&quot;)."}],"answers":[{"comments":[{"owner":{"account_id":3540948,"reputation":5877,"user_id":2958086,"display_name":"Compass"},"score":0,"creation_date":1575307598,"post_id":59076813,"comment_id":104513956,"body_markdown":"The default ComponentScan will scan based on the Spring Boot Application&#39;s package path, and its subdirectories, but not anything above it hierarchically. Depending on your package arrangement this is a very likely cause, i.e. if you have a sub-application.","body":"The default ComponentScan will scan based on the Spring Boot Application&#39;s package path, and its subdirectories, but not anything above it hierarchically. Depending on your package arrangement this is a very likely cause, i.e. if you have a sub-application."}],"tags":[],"owner":{"account_id":243216,"reputation":1162,"user_id":515241,"display_name":"Tomek Cejner"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1574880794,"creation_date":1574880794,"answer_id":59076813,"question_id":59000565,"body_markdown":"I found the solution, but am not sure about the cause. The class was indeed not registered as bean, and surprisingly, adding explicitly base packages attribute helped:\r\n\r\n```java\r\n@SpringBootApplication(scanBasePackages=&quot;com.example.*&quot;)\r\n```\r\n\r\nInteresting that there was no need to do the above in a different project.","title":"Spring Boot custom health indicator not showing up","body":"<p>I found the solution, but am not sure about the cause. The class was indeed not registered as bean, and surprisingly, adding explicitly base packages attribute helped:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication(scanBasePackages=\"com.example.*\")\n</code></pre>\n\n<p>Interesting that there was no need to do the above in a different project.</p>\n"},{"tags":[],"owner":{"account_id":19449009,"reputation":1,"user_id":14225879,"display_name":"Gaurav Swain"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1600196411,"creation_date":1600195275,"answer_id":63908019,"question_id":59000565,"body_markdown":"Interestingly the base package for the HealthIndicator is not recognized by the application container instead of declaring the class as @component Stereotype.\r\n\r\nFix for the issue- declare base package of HealthIndicator in Main Spring boot application class:\r\n@SpringBootApplication (scanBasePackages = &quot;basepackage for your class HealthCheck&quot;)\r\npublic class PaymentServiceApplication {\r\n\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(PaymentServiceApplication.class, args);\r\n    }\r\n\r\n}\r\n\r\nEDIT : NOTE- The above declaration of base package=&quot;&quot; is not main spring boot class is not necessary.\r\n\r\nYou must stop the SERVER and then clean build the maven application and RESTART the server and re-run the application \r\n\r\nYou can now run find your custom health endpoint.","title":"Spring Boot custom health indicator not showing up","body":"<p>Interestingly the base package for the HealthIndicator is not recognized by the application container instead of declaring the class as @component Stereotype.</p>\n<p>Fix for the issue- declare base package of HealthIndicator in Main Spring boot application class:\n@SpringBootApplication (scanBasePackages = &quot;basepackage for your class HealthCheck&quot;)\npublic class PaymentServiceApplication {</p>\n<pre><code>public static void main(String[] args) {\n    SpringApplication.run(PaymentServiceApplication.class, args);\n}\n</code></pre>\n<p>}</p>\n<p>EDIT : NOTE- The above declaration of base package=&quot;&quot; is not main spring boot class is not necessary.</p>\n<p>You must stop the SERVER and then clean build the maven application and RESTART the server and re-run the application</p>\n<p>You can now run find your custom health endpoint.</p>\n"},{"tags":[],"owner":{"account_id":446893,"reputation":121,"user_id":840222,"display_name":"lich0079"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646018971,"creation_date":1646018971,"answer_id":71290320,"question_id":59000565,"body_markdown":"I encounter issue too, what I miss is \r\n\r\n    management:\r\n      endpoint:\r\n        health:\r\n          show-details: always","title":"Spring Boot custom health indicator not showing up","body":"<p>I encounter issue too, what I miss is</p>\n<pre><code>management:\n  endpoint:\n    health:\n      show-details: always\n</code></pre>\n"},{"comments":[{"owner":{"account_id":16344337,"reputation":185,"user_id":11880235,"display_name":"user613"},"score":0,"creation_date":1702282865,"post_id":75461537,"comment_id":136872761,"body_markdown":"you can expose only specific endpoints by adding property `management.endpoints.web.exposure.include=endpoint1,endpoint2` where `endpoint1` and `endpoint2` contains a list of endpoints to expose with a commas between them. see [here](https://www.baeldung.com/spring-boot-actuator-enable-endpoints#2-exposing-specific-endpoints)","body":"you can expose only specific endpoints by adding property <code>management.endpoints.web.exposure.include=endpoint1,endpoint&zwnj;&#8203;2</code> where <code>endpoint1</code> and <code>endpoint2</code> contains a list of endpoints to expose with a commas between them. see <a href=\"https://www.baeldung.com/spring-boot-actuator-enable-endpoints#2-exposing-specific-endpoints\" rel=\"nofollow noreferrer\">here</a>"}],"tags":[],"owner":{"account_id":6652893,"reputation":21,"user_id":5134334,"display_name":"Łukasz Bocheński"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1676472604,"creation_date":1676472604,"answer_id":75461537,"question_id":59000565,"body_markdown":"This is solved by adding this code:\r\n\r\n    management:\r\n      endpoint:\r\n        health:\r\n          show-details: always\r\nHowever, it creates another problem. When calling /actuator/health endpoint, you see all the details which is problematic for me. What I want to achieve is to see only statuses for both endpoints.","title":"Spring Boot custom health indicator not showing up","body":"<p>This is solved by adding this code:</p>\n<pre><code>management:\n  endpoint:\n    health:\n      show-details: always\n</code></pre>\n<p>However, it creates another problem. When calling /actuator/health endpoint, you see all the details which is problematic for me. What I want to achieve is to see only statuses for both endpoints.</p>\n"},{"tags":[],"owner":{"account_id":1610121,"reputation":31,"user_id":1489404,"display_name":"Joseph.Chambers"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692131104,"creation_date":1692131104,"answer_id":76908929,"question_id":59000565,"body_markdown":"Instead of using\r\n```\r\n@SpringBootApplication(scanBasePackages=&quot;com.example.*&quot;)\r\n```\r\nYou can instead define your packages to scan\r\n```\r\n@ComponentScan(basePackages = {&quot;com.example&quot;, &quot;com.other&quot;}\r\n```\r\n\r\nI will note I tested using scanBasepackages as described in the top answer and that doesn&#39;t seem to work if you also have the @ComponentScan defined.","title":"Spring Boot custom health indicator not showing up","body":"<p>Instead of using</p>\n<pre><code>@SpringBootApplication(scanBasePackages=&quot;com.example.*&quot;)\n</code></pre>\n<p>You can instead define your packages to scan</p>\n<pre><code>@ComponentScan(basePackages = {&quot;com.example&quot;, &quot;com.other&quot;}\n</code></pre>\n<p>I will note I tested using scanBasepackages as described in the top answer and that doesn't seem to work if you also have the @ComponentScan defined.</p>\n"},{"tags":[],"owner":{"account_id":16582017,"reputation":11,"user_id":11982368,"display_name":"Igor Dobrovolskyi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695809985,"creation_date":1695809985,"answer_id":77186571,"question_id":59000565,"body_markdown":"If you have packages structure like:\r\n```\r\ncom.example.health.MyHealthIndicator\r\ncom.example.myapp.MyApp (SpringApplication.run() is here)\r\n```\r\nthen MyHealthIndicator will not be treated as component. In this case in MyApp you should add scanBasePackages\r\n```\r\n@SpringBootApplication(scanBasePackages=&quot;com.example.*&quot;)\r\npublic class MyApp { ... }\r\n\r\n```\r\n\r\nBUT if you put your component inside package where application is, then scanBasePackages is not needed:\r\n```\r\ncom.example.myapp.health.MyHealthIndicator\r\ncom.example.myapp.MyApp\r\n```\r\nSpring will automatically find all components inside com.example.myapp.* packages. And it will not search outside of this package, unless you ask him to do so via scanBasePackages parameter.","title":"Spring Boot custom health indicator not showing up","body":"<p>If you have packages structure like:</p>\n<pre><code>com.example.health.MyHealthIndicator\ncom.example.myapp.MyApp (SpringApplication.run() is here)\n</code></pre>\n<p>then MyHealthIndicator will not be treated as component. In this case in MyApp you should add scanBasePackages</p>\n<pre><code>@SpringBootApplication(scanBasePackages=&quot;com.example.*&quot;)\npublic class MyApp { ... }\n\n</code></pre>\n<p>BUT if you put your component inside package where application is, then scanBasePackages is not needed:</p>\n<pre><code>com.example.myapp.health.MyHealthIndicator\ncom.example.myapp.MyApp\n</code></pre>\n<p>Spring will automatically find all components inside com.example.myapp.* packages. And it will not search outside of this package, unless you ask him to do so via scanBasePackages parameter.</p>\n"}],"owner":{"account_id":243216,"reputation":1162,"user_id":515241,"display_name":"Tomek Cejner"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5708,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":6,"score":7,"last_activity_date":1695809985,"creation_date":1574450704,"question_id":59000565,"body_markdown":"I believe followed almost all tutorials on the Internet and read many SO answers and still I&#39;m stuck.\r\n\r\n### 1. A simple health check\r\n```java\r\n@Component\r\npublic class HealthCheck implements HealthIndicator {\r\n\r\n    @Override\r\n    public Health health() {\r\n        return Health.up().build();\r\n    }\r\n\r\n}\r\n```\r\n\r\n### 2. Application.yaml is configured to show all details:\r\n```yml\r\nmanagement.endpoints.web.exposure.include: &quot;*&quot;\r\nmanagement.endpoint.health.show-details: ALWAYS\r\n```\r\n\r\n### 3. Spring-boot-actuator included as dependency:\r\n```groovy\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-actuator&#39;\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n```\r\n\r\n### 4. Spring boot of recent release:\r\n```\r\nid &#39;org.springframework.boot&#39; version &#39;2.2.0.RELEASE&#39;\r\n```\r\n\r\n### 5. Main application class is annotated with `@SpringBootApplication` (which implicitly brings `@ComponentScan`).\r\n```java\r\n@SpringBootApplication\r\npublic class PaymentServiceApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(PaymentServiceApplication.class, args);\r\n\t}\r\n\r\n}\r\n```\r\n\r\nMy custom health check has to test for Apache Kafka, but I skipped the details for brevity. \r\nStill, invoking `/actuator/health` endpoint I get the same default result:\r\n\r\n```json\r\n{\r\n    &quot;status&quot;: &quot;UP&quot;,\r\n    &quot;components&quot;: {\r\n        &quot;diskSpace&quot;: {\r\n            &quot;status&quot;: &quot;UP&quot;,\r\n            &quot;details&quot;: {\r\n                &quot;total&quot;: 250685575168,\r\n                &quot;free&quot;: 99168997376,\r\n                &quot;threshold&quot;: 10485760\r\n            }\r\n        },\r\n        &quot;ping&quot;: {\r\n            &quot;status&quot;: &quot;UP&quot;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nIs there anything I may have missed?\r\n","title":"Spring Boot custom health indicator not showing up","body":"<p>I believe followed almost all tutorials on the Internet and read many SO answers and still I'm stuck.</p>\n\n<h3>1. A simple health check</h3>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class HealthCheck implements HealthIndicator {\n\n    @Override\n    public Health health() {\n        return Health.up().build();\n    }\n\n}\n</code></pre>\n\n<h3>2. Application.yaml is configured to show all details:</h3>\n\n<pre><code>management.endpoints.web.exposure.include: \"*\"\nmanagement.endpoint.health.show-details: ALWAYS\n</code></pre>\n\n<h3>3. Spring-boot-actuator included as dependency:</h3>\n\n<pre><code>    implementation 'org.springframework.boot:spring-boot-starter-actuator'\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n</code></pre>\n\n<h3>4. Spring boot of recent release:</h3>\n\n<pre><code>id 'org.springframework.boot' version '2.2.0.RELEASE'\n</code></pre>\n\n<h3>5. Main application class is annotated with <code>@SpringBootApplication</code> (which implicitly brings <code>@ComponentScan</code>).</h3>\n\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication\npublic class PaymentServiceApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(PaymentServiceApplication.class, args);\n    }\n\n}\n</code></pre>\n\n<p>My custom health check has to test for Apache Kafka, but I skipped the details for brevity. \nStill, invoking <code>/actuator/health</code> endpoint I get the same default result:</p>\n\n<pre><code>{\n    \"status\": \"UP\",\n    \"components\": {\n        \"diskSpace\": {\n            \"status\": \"UP\",\n            \"details\": {\n                \"total\": 250685575168,\n                \"free\": 99168997376,\n                \"threshold\": 10485760\n            }\n        },\n        \"ping\": {\n            \"status\": \"UP\"\n        }\n    }\n}\n</code></pre>\n\n<p>Is there anything I may have missed?</p>\n"},{"tags":["java","hibernate","jpa"],"answers":[{"comments":[{"owner":{"account_id":9942498,"reputation":33,"user_id":7358578,"display_name":"Soft"},"score":0,"creation_date":1695802753,"post_id":77185674,"comment_id":136071466,"body_markdown":"Table I had created id in table like you recommended. \n\nBut If I understand correctly I have to save OrderHeader firstly and next save other entities?","body":"Table I had created id in table like you recommended.   But If I understand correctly I have to save OrderHeader firstly and next save other entities?"},{"owner":{"account_id":17228781,"reputation":3548,"user_id":12473843,"display_name":"Sergey Tsypanov"},"score":0,"creation_date":1695802852,"post_id":77185674,"comment_id":136071488,"body_markdown":"I think you are missing `ALWAYS` keyword. Also make sure that you add attached entitties to `OrderHeaderSnapshot.indexHeaderSnapshot`","body":"I think you are missing <code>ALWAYS</code> keyword. Also make sure that you add attached entitties to <code>OrderHeaderSnapshot.indexHeaderSnapshot</code>"},{"owner":{"account_id":9942498,"reputation":33,"user_id":7358578,"display_name":"Soft"},"score":0,"creation_date":1695803709,"post_id":77185674,"comment_id":136071653,"body_markdown":"I guess it&#39;s not true that these entities are detached. In another part of system we have implemented solution like above. We save whole entity with children without problem using one repository","body":"I guess it&#39;s not true that these entities are detached. In another part of system we have implemented solution like above. We save whole entity with children without problem using one repository"},{"owner":{"account_id":17228781,"reputation":3548,"user_id":12473843,"display_name":"Sergey Tsypanov"},"score":0,"creation_date":1695804071,"post_id":77185674,"comment_id":136071741,"body_markdown":"Well, you can just try calling `IndexHeaderRepository.save(listOfIndexHeaderSnapshots)` before adding them into the list. I&#39;m sure this will solve your issue, but make sure your are doing it within the same transaction with `OrderHeaderSnapshotRepository.save()`","body":"Well, you can just try calling <code>IndexHeaderRepository.save(listOfIndexHeaderSnapshots)</code> before adding them into the list. I&#39;m sure this will solve your issue, but make sure your are doing it within the same transaction with <code>OrderHeaderSnapshotRepository.save()</code>"},{"owner":{"account_id":17228781,"reputation":3548,"user_id":12473843,"display_name":"Sergey Tsypanov"},"score":0,"creation_date":1695805125,"post_id":77185674,"comment_id":136071962,"body_markdown":"@Soft the only reason why you see nulls in id field is that the entities are detached for an attached one cannot have null as id","body":"@Soft the only reason why you see nulls in id field is that the entities are detached for an attached one cannot have null as id"},{"owner":{"account_id":9942498,"reputation":33,"user_id":7358578,"display_name":"Soft"},"score":0,"creation_date":1695809196,"post_id":77185674,"comment_id":136072804,"body_markdown":"Although I can&#39;t save index_header without order_header id because field marked as foreign key will be null while saving. Field is nullable false","body":"Although I can&#39;t save index_header without order_header id because field marked as foreign key will be null while saving. Field is nullable false"},{"owner":{"account_id":17228781,"reputation":3548,"user_id":12473843,"display_name":"Sergey Tsypanov"},"score":0,"creation_date":1695811814,"post_id":77185674,"comment_id":136073274,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/255438/discussion-between-sergey-tsypanov-and-soft).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/255438/discussion-between-sergey-tsypanov-and-soft\">continue this discussion in chat</a>."}],"tags":[],"owner":{"account_id":17228781,"reputation":3548,"user_id":12473843,"display_name":"Sergey Tsypanov"},"comment_count":7,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695804119,"creation_date":1695802444,"answer_id":77185674,"question_id":77185598,"body_markdown":"As soon as in your `IndexHeaderSnapshot` you have id column annotated with `@GeneratedValue(strategy = GenerationType.IDENTITY)` it looks like you are adding detached instances of `IndexHeaderSnapshot` into `OrderHeaderSnapshot.indexHeaderSnapshot`. The entities must be attached to Hibernate session, i.e. call `IndexHeaderRepository.save(listOfIndexHeaderSnapshots)` before adding them into `OrderHeaderSnapshot.indexHeaderSnapshot`. Hibernate will request ids for them from the database and attach them to current session.\r\n\r\nAlso make sure that your table in PostgreSQL described as\r\n```sql\r\nCREATE TABLE index_header_snapshot (\r\n    id INT GENERATED ALWAYS AS IDENTITY,\r\n    ...\r\n);\r\n```\r\nSee https://stackoverflow.com/a/66421047/12473843","title":"Null in foreign key hibernate @OneToMany while saving","body":"<p>As soon as in your <code>IndexHeaderSnapshot</code> you have id column annotated with <code>@GeneratedValue(strategy = GenerationType.IDENTITY)</code> it looks like you are adding detached instances of <code>IndexHeaderSnapshot</code> into <code>OrderHeaderSnapshot.indexHeaderSnapshot</code>. The entities must be attached to Hibernate session, i.e. call <code>IndexHeaderRepository.save(listOfIndexHeaderSnapshots)</code> before adding them into <code>OrderHeaderSnapshot.indexHeaderSnapshot</code>. Hibernate will request ids for them from the database and attach them to current session.</p>\n<p>Also make sure that your table in PostgreSQL described as</p>\n<pre class=\"lang-sql prettyprint-override\"><code>CREATE TABLE index_header_snapshot (\n    id INT GENERATED ALWAYS AS IDENTITY,\n    ...\n);\n</code></pre>\n<p>See <a href=\"https://stackoverflow.com/a/66421047/12473843\">https://stackoverflow.com/a/66421047/12473843</a></p>\n"},{"tags":[],"owner":{"account_id":9942498,"reputation":33,"user_id":7358578,"display_name":"Soft"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695809599,"creation_date":1695809599,"answer_id":77186532,"question_id":77185598,"body_markdown":"Ok, i have answer\r\n\r\nI&#39;ve replaced \r\n```\r\n@JoinColumn(name = &quot;order_header_snapshot_id&quot;)\r\n```\r\nwith \r\n```\r\n@JoinColumn(name = &quot;order_header_snapshot_id&quot;, nullable = false)\r\n```\r\n\r\nand it works :)","title":"Null in foreign key hibernate @OneToMany while saving","body":"<p>Ok, i have answer</p>\n<p>I've replaced</p>\n<pre><code>@JoinColumn(name = &quot;order_header_snapshot_id&quot;)\n</code></pre>\n<p>with</p>\n<pre><code>@JoinColumn(name = &quot;order_header_snapshot_id&quot;, nullable = false)\n</code></pre>\n<p>and it works :)</p>\n"}],"owner":{"account_id":9942498,"reputation":33,"user_id":7358578,"display_name":"Soft"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1695809599,"creation_date":1695801598,"question_id":77185598,"body_markdown":"I have two tables in database like `order_header_snapshot` and `index_header_snapshot`. `OrderHeaderSnapshot` can have a list of `IndexHeader`. `IndexHeader` has column `order_header_snapshot_id` as a foreign key. I don&#39;t describe others fields because it is not important.\r\n\r\n```java\r\n@Entity\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\nclass OrderHeaderSnapshot {\r\n\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\tprivate Long id;\r\n\r\n\t@OneToMany(cascade = CascadeType.ALL, orphanRemoval = true)\r\n\t@JoinColumn(name = &quot;order_header_snapshot_id&quot;)\r\n\tprivate List&lt;IndexHeaderSnapshot&gt; indexHeaderSnapshot = new ArrayList&lt;&gt;();\r\n```\r\n\r\n```java\r\n@Entity\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\nclass IndexHeaderSnapshot {\r\n\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\tprivate Long id;\r\n}\r\n```\r\n\r\nAt the end while saving in repository I catch an exception \r\n```\r\nCaused by: org.postgresql.util.PSQLException: ERROR: null value in column &quot;order_header_snapshot_id&quot; of relation &quot;index_header_snapshot&quot; violates not-null constraint\r\n```\r\nI don&#39;t have an idea what I do wrong. Please help :)","title":"Null in foreign key hibernate @OneToMany while saving","body":"<p>I have two tables in database like <code>order_header_snapshot</code> and <code>index_header_snapshot</code>. <code>OrderHeaderSnapshot</code> can have a list of <code>IndexHeader</code>. <code>IndexHeader</code> has column <code>order_header_snapshot_id</code> as a foreign key. I don't describe others fields because it is not important.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\nclass OrderHeaderSnapshot {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @OneToMany(cascade = CascadeType.ALL, orphanRemoval = true)\n    @JoinColumn(name = &quot;order_header_snapshot_id&quot;)\n    private List&lt;IndexHeaderSnapshot&gt; indexHeaderSnapshot = new ArrayList&lt;&gt;();\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\nclass IndexHeaderSnapshot {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n}\n</code></pre>\n<p>At the end while saving in repository I catch an exception</p>\n<pre><code>Caused by: org.postgresql.util.PSQLException: ERROR: null value in column &quot;order_header_snapshot_id&quot; of relation &quot;index_header_snapshot&quot; violates not-null constraint\n</code></pre>\n<p>I don't have an idea what I do wrong. Please help :)</p>\n"},{"tags":["java","swagger","swagger-ui"],"owner":{"account_id":20211488,"reputation":9,"user_id":14823942,"display_name":"Ever Last"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695809422,"creation_date":1695809422,"question_id":77186512,"body_markdown":"When sending a request to localhost/swagger-ui/index.html I get all the documentation of my application. Is it possible to make sure that only certain APIs are visible to certain users or users with certain roles? \r\nIn my application, I use SecurityContextHolder for access control, from which I can get data about the user: his role, privileges, etc.\r\n\r\nI tried using the @PreAuthorize annotation on the counter-controllers, but I still see the API in the documentation.\r\n\r\nMy swagger configuration:\r\n\r\n    @PropertySource(value = &quot;classpath:OpenAPIConfig.yaml&quot;, factory = YamlPropertySourceFactory.class)\r\n    @Configuration\r\n    public class OpenAPIConfig {\r\n\r\n       @Bean\r\n       @Primary\r\n       public SpringDocConfiguration springDocConfiguration() {\r\n           return new SpringDocConfiguration();\r\n       }\r\n\r\n       @Bean\r\n       public SpringDocConfigProperties springDocConfigProperties() {\r\n           return new SpringDocConfigProperties();\r\n       }\r\n\r\n       @Bean\r\n       public ObjectMapperProvider objectMapperProvider(SpringDocConfigProperties    springDocConfigProperties) {\r\n           return new ObjectMapperProvider(springDocConfigProperties);\r\n       }\r\n\r\n       @Bean\r\n       public SpringDocUIConfiguration springDocUIConfiguration(Optional&lt;SwaggerUiConfigProperties&gt; optionalSwaggerUiConfigProperties) {\r\n           return new SpringDocUIConfiguration(optionalSwaggerUiConfigProperties);\r\n       }\r\n    }\r\n\r\n\r\nOpenAPIConfig.yaml:\r\n\r\n    springdoc:\r\n     api-docs:\r\n      enabled: false\r\n     swagger-ui:\r\n      urls:\r\n      - url: &quot;/ApiDocumentation1.yaml&quot;\r\n        name: &quot;Doc1&quot;\r\n      - url: &quot;/ApiDocumentation2.yaml&quot;\r\n        name: &quot;Doc2&quot;","title":"How to differentiate viewing access to certain apis in swagger ui view java?","body":"<p>When sending a request to localhost/swagger-ui/index.html I get all the documentation of my application. Is it possible to make sure that only certain APIs are visible to certain users or users with certain roles?\nIn my application, I use SecurityContextHolder for access control, from which I can get data about the user: his role, privileges, etc.</p>\n<p>I tried using the @PreAuthorize annotation on the counter-controllers, but I still see the API in the documentation.</p>\n<p>My swagger configuration:</p>\n<pre><code>@PropertySource(value = &quot;classpath:OpenAPIConfig.yaml&quot;, factory = YamlPropertySourceFactory.class)\n@Configuration\npublic class OpenAPIConfig {\n\n   @Bean\n   @Primary\n   public SpringDocConfiguration springDocConfiguration() {\n       return new SpringDocConfiguration();\n   }\n\n   @Bean\n   public SpringDocConfigProperties springDocConfigProperties() {\n       return new SpringDocConfigProperties();\n   }\n\n   @Bean\n   public ObjectMapperProvider objectMapperProvider(SpringDocConfigProperties    springDocConfigProperties) {\n       return new ObjectMapperProvider(springDocConfigProperties);\n   }\n\n   @Bean\n   public SpringDocUIConfiguration springDocUIConfiguration(Optional&lt;SwaggerUiConfigProperties&gt; optionalSwaggerUiConfigProperties) {\n       return new SpringDocUIConfiguration(optionalSwaggerUiConfigProperties);\n   }\n}\n</code></pre>\n<p>OpenAPIConfig.yaml:</p>\n<pre><code>springdoc:\n api-docs:\n  enabled: false\n swagger-ui:\n  urls:\n  - url: &quot;/ApiDocumentation1.yaml&quot;\n    name: &quot;Doc1&quot;\n  - url: &quot;/ApiDocumentation2.yaml&quot;\n    name: &quot;Doc2&quot;\n</code></pre>\n"},{"tags":["java","redis","reactive-programming","vert.x"],"answers":[{"comments":[{"owner":{"account_id":385127,"reputation":6294,"user_id":742081,"display_name":"Ladicek"},"score":0,"creation_date":1695809457,"post_id":77186482,"comment_id":136072844,"body_markdown":"One other comment: you don&#39;t need to `UNWATCH` after `EXEC`, that happens automatically: https://redis.io/docs/interact/transactions/#watch-explained","body":"One other comment: you don&#39;t need to <code>UNWATCH</code> after <code>EXEC</code>, that happens automatically: <a href=\"https://redis.io/docs/interact/transactions/#watch-explained\" rel=\"nofollow noreferrer\">redis.io/docs/interact/transactions/#watch-explained</a>"},{"owner":{"account_id":1048512,"reputation":1671,"user_id":1052979,"accept_rate":43,"display_name":"StFS"},"score":0,"creation_date":1695812476,"post_id":77186482,"comment_id":136073417,"body_markdown":"Thank you! What an excellent explanation, I really appreciate it!","body":"Thank you! What an excellent explanation, I really appreciate it!"},{"owner":{"account_id":1048512,"reputation":1671,"user_id":1052979,"accept_rate":43,"display_name":"StFS"},"score":0,"creation_date":1695853285,"post_id":77186482,"comment_id":136081125,"body_markdown":"I hope you forgive me for abusing your helpfulness @Ladicek but when I need to call an operation repeatedly (for example to implement a putAll operation that sets a lifetime on the values), does this code look like it would work?\nhttps://gist.github.com/StFS/2eb83f74012d821f8a94e14a1807cdb1","body":"I hope you forgive me for abusing your helpfulness @Ladicek but when I need to call an operation repeatedly (for example to implement a putAll operation that sets a lifetime on the values), does this code look like it would work? <a href=\"https://gist.github.com/StFS/2eb83f74012d821f8a94e14a1807cdb1\" rel=\"nofollow noreferrer\">gist.github.com/StFS/2eb83f74012d821f8a94e14a1807cdb1</a>"},{"owner":{"account_id":385127,"reputation":6294,"user_id":742081,"display_name":"Ladicek"},"score":1,"creation_date":1695896269,"post_id":77186482,"comment_id":136086223,"body_markdown":"Yes, that seems correct on the first sight.","body":"Yes, that seems correct on the first sight."}],"tags":[],"owner":{"account_id":385127,"reputation":6294,"user_id":742081,"display_name":"Ladicek"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695809170,"creation_date":1695809170,"answer_id":77186482,"question_id":77180316,"body_markdown":"Using `onSuccess()` and `onFailure()` is a very tedious approach of working with futures. I suggest you familiarize yourself with the combinator methods, most notably `map()` and `flatMap()`. These are what I would call _operators of sequential composition_ -- that is, they allow expressing &quot;first do A, then do B&quot;. `map()` is synchronous, while `flatMap()` is asynchronous. (Also note that `compose()` is the same as `flatMap()`, so it&#39;s a matter of style. I prefer using `flatMap()`, so that&#39;s what you see below.) There are other operators for error handling etc., but these 2 are the most important in my opinion.\r\n\r\nThat said, here&#39;s my implementation:\r\n\r\n```java\r\nprivate Future&lt;Boolean&gt; compareAndDelete(Redis client, String key, String value) {\r\n    return client.connect().flatMap(connection -&gt; {\r\n        RedisAPI redis = RedisAPI.api(connection);\r\n        return redis.watch(List.of(key))\r\n                .flatMap(ignored -&gt; redis.get(key))\r\n                .flatMap(response -&gt; {\r\n                    if (response == null) {\r\n                        // key does not exist\r\n                        return Future.succeededFuture(false);\r\n                    }\r\n                    if (value.equals(response.toString())) {\r\n                        return redis.multi()\r\n                                .flatMap(ignored -&gt; redis.del(List.of(key)))\r\n                                .flatMap(ignored -&gt; redis.exec())\r\n                                // null reply means transaction aborted\r\n                                .map(execResult -&gt; execResult != null);\r\n                    } else {\r\n                        return Future.succeededFuture(false);\r\n                    }\r\n                })\r\n                .eventually(connection::close);\r\n    });\r\n}\r\n```\r\n\r\nYou&#39;ll note that I don&#39;t do any error handling here. Instead, I structure the code so that whenever an error happens (that is, a `Future` completes with an error), it gets propagated through the chain. The method returns a future which completes with `true` when the &quot;compare and delete&quot; operation succeeded or with `false` when the operation failed (the key does not exist, or someone changed the value in the middle of the transaction). The future may complete with a failure in case of some error.\r\n\r\nFor testing, I also wrote this simple function:\r\n\r\n```java\r\nprivate Future&lt;Void&gt; delay(long timeout) {\r\n    Promise&lt;Void&gt; promise = ((ContextInternal) vertx.getOrCreateContext()).promise();\r\n    vertx.setTimer(timeout, ignored -&gt; {\r\n        promise.complete();\r\n    });\r\n    return promise.future();\r\n}\r\n```\r\n\r\nWith this, I can insert an arbitrary delay into the chain to be able to easily trigger the situation when someone else changes the value in the middle of the transaction. For example, I can insert this line\r\n\r\n```java\r\n                                .flatMap(ignored -&gt; delay(10_000))\r\n```\r\n\r\nin between the calls to `redis.del()` and `redis.exec()`.\r\n\r\nIn addition to using future combinators instead of success/failure callbacks, there&#39;s one other important difference. The first thing my implementation does is obtaining a _connection_ from the Redis client. The Vert.x Redis client manages a connection pool and if you use the `Redis` object for sending commands, each command may be executed on a different connection. On the other hand, when using a `RedisConnection` object, a single connection will be used to send all the commands, which is necessary for Redis transactions to work correctly. The last thing my method does, as you see, is &quot;closing&quot; the connection (which in fact means just returning the connection to the pool).","title":"Unclear about how to structure a vertx-redis-client code","body":"<p>Using <code>onSuccess()</code> and <code>onFailure()</code> is a very tedious approach of working with futures. I suggest you familiarize yourself with the combinator methods, most notably <code>map()</code> and <code>flatMap()</code>. These are what I would call <em>operators of sequential composition</em> -- that is, they allow expressing &quot;first do A, then do B&quot;. <code>map()</code> is synchronous, while <code>flatMap()</code> is asynchronous. (Also note that <code>compose()</code> is the same as <code>flatMap()</code>, so it's a matter of style. I prefer using <code>flatMap()</code>, so that's what you see below.) There are other operators for error handling etc., but these 2 are the most important in my opinion.</p>\n<p>That said, here's my implementation:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private Future&lt;Boolean&gt; compareAndDelete(Redis client, String key, String value) {\n    return client.connect().flatMap(connection -&gt; {\n        RedisAPI redis = RedisAPI.api(connection);\n        return redis.watch(List.of(key))\n                .flatMap(ignored -&gt; redis.get(key))\n                .flatMap(response -&gt; {\n                    if (response == null) {\n                        // key does not exist\n                        return Future.succeededFuture(false);\n                    }\n                    if (value.equals(response.toString())) {\n                        return redis.multi()\n                                .flatMap(ignored -&gt; redis.del(List.of(key)))\n                                .flatMap(ignored -&gt; redis.exec())\n                                // null reply means transaction aborted\n                                .map(execResult -&gt; execResult != null);\n                    } else {\n                        return Future.succeededFuture(false);\n                    }\n                })\n                .eventually(connection::close);\n    });\n}\n</code></pre>\n<p>You'll note that I don't do any error handling here. Instead, I structure the code so that whenever an error happens (that is, a <code>Future</code> completes with an error), it gets propagated through the chain. The method returns a future which completes with <code>true</code> when the &quot;compare and delete&quot; operation succeeded or with <code>false</code> when the operation failed (the key does not exist, or someone changed the value in the middle of the transaction). The future may complete with a failure in case of some error.</p>\n<p>For testing, I also wrote this simple function:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private Future&lt;Void&gt; delay(long timeout) {\n    Promise&lt;Void&gt; promise = ((ContextInternal) vertx.getOrCreateContext()).promise();\n    vertx.setTimer(timeout, ignored -&gt; {\n        promise.complete();\n    });\n    return promise.future();\n}\n</code></pre>\n<p>With this, I can insert an arbitrary delay into the chain to be able to easily trigger the situation when someone else changes the value in the middle of the transaction. For example, I can insert this line</p>\n<pre class=\"lang-java prettyprint-override\"><code>                                .flatMap(ignored -&gt; delay(10_000))\n</code></pre>\n<p>in between the calls to <code>redis.del()</code> and <code>redis.exec()</code>.</p>\n<p>In addition to using future combinators instead of success/failure callbacks, there's one other important difference. The first thing my implementation does is obtaining a <em>connection</em> from the Redis client. The Vert.x Redis client manages a connection pool and if you use the <code>Redis</code> object for sending commands, each command may be executed on a different connection. On the other hand, when using a <code>RedisConnection</code> object, a single connection will be used to send all the commands, which is necessary for Redis transactions to work correctly. The last thing my method does, as you see, is &quot;closing&quot; the connection (which in fact means just returning the connection to the pool).</p>\n"}],"owner":{"account_id":1048512,"reputation":1671,"user_id":1052979,"accept_rate":43,"display_name":"StFS"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77186482,"answer_count":1,"score":0,"last_activity_date":1695809170,"creation_date":1695733710,"question_id":77180316,"body_markdown":"I&#39;m trying to implement a compare-and-delete (CAD) function using the [vertx-redis-client](https://vertx.io/docs/vertx-redis-client/java/) library.\r\n\r\nI&#39;m following [this answer](https://stackoverflow.com/a/68232171/1052979) on how to do this. I&#39;ve already implemented the Lua script method and that works fine. However, as redis installations may possibly prohibit running the `eval` command with arbitrary Lua scripts, I think I must also implement this functionality using the WATCH/GET/MULTI/compare/DELETE/UNWATCH sequence of commands.\r\n\r\nHowever, I&#39;m really having a hard time wrapping my head around the correct way to do this with the vert.x reactive way of programming.\r\n\r\n\r\n\r\nHere&#39;s my code that implements both of the methods to do a CAD operation:\r\n\r\n```java\r\n    private Future&lt;Boolean&gt; deleteLua(final String key, final String value) {\r\n        final RedisAPI redis = RedisAPI.api(client);\r\n\r\n        final Promise&lt;Boolean&gt; promise = Promise.promise();\r\n        redis.eval(List.of(&quot;if redis.call(&#39;get&#39;, KEYS[1]) == ARGV[1] then redis.call(&#39;del&#39;, KEYS[1]); return 1; else return 0; end&quot;, &quot;1&quot;, key, value))\r\n                .onSuccess(res -&gt; {\r\n                    System.out.println(&quot;Success: &quot; + res);\r\n                    promise.complete(res.toInteger() == 1);\r\n                })\r\n                .onFailure(err -&gt; {\r\n                    System.out.println(&quot;Error: &quot; + err);\r\n                    promise.fail(err);\r\n                });\r\n\r\n        return promise.future();\r\n    }\r\n```\r\n\r\n```java\r\n    private Future&lt;Boolean&gt; deleteMulti(final String key, final String value) {\r\n        final RedisAPI redis = RedisAPI.api(client);\r\n\r\n        final Promise&lt;Boolean&gt; promise = Promise.promise();\r\n        redis.watch(List.of(key))\r\n                .onSuccess(watchResult -&gt; {\r\n                    redis.get(key)\r\n                            .onSuccess(getResult -&gt; {\r\n                                redis.multi()\r\n                                        .onSuccess(multiResult -&gt; {\r\n                                            if (value.equals(String.valueOf(getResult))) {\r\n                                                redis.del(List.of(key))\r\n                                                        .onSuccess(delResult -&gt; {\r\n                                                            System.out.println(&quot;key deleted&quot;);\r\n                                                        });\r\n                                            } else {\r\n                                                System.out.println(&quot;value did not match, key not deleted&quot;);\r\n                                                promise.complete(false);\r\n                                            }\r\n                                            redis.exec().onSuccess(execResult -&gt; {\r\n                                                System.out.println(&quot;execResult: &quot; + execResult);\r\n                                                redis.unwatch().onSuccess(unwatchResult -&gt; {\r\n                                                    System.out.println(&quot;unwatched key&quot;);\r\n                                                    promise.complete(true);\r\n                                                });\r\n                                            });\r\n                                        })\r\n                                        .onFailure(multiErr -&gt; {\r\n                                            System.out.println(&quot;The multi failed: &quot; + multiErr);\r\n                                            promise.fail(multiErr);\r\n                                        });\r\n                            });\r\n                });\r\n        return Future.succeededFuture(true);\r\n    }\r\n```\r\n\r\nBoth seem to work but I&#39;m really uncertain about the `deleteMulti` method. First of all, it just looks ugly... it&#39;s so endlessly nested! I believe I can probably use a `compose` somehow to get around that to some extent, but I&#39;ve tried doing that but keep running into walls on how exactly to do that. For example, I need the `getResult` inside the `onSuccess` block of the `multi` but when I try to use the `compose` structure, everything gets a bit messed up and I&#39;m unclear on what result exactly I have in each compose block. Another thing I&#39;m very unclear about is how the redis transactions work here. is my `redis` object keeping track of the session so that my call to `watch` will be &quot;active&quot; for any subsequent redis calls I make using that same object? Also, how do I need to treat `unwatch`? I&#39;m currently only calling it within `onSuccess` for the watch-&gt;get-&gt;multi-&gt;exec block, but what if the get or multi fail? Do I need to unwatch on failures as well or will that just be handled by the session getting invalidated somehow? That actually seems unlikely since this is all reactive and the method (where the `RedisAPI redis` object is actually created will return probably before all the operations have finished.\r\n\r\nSo yeah... quite confused.\r\n\r\nAny help in getting this code block into shape would be very much appreciated.\r\n","title":"Unclear about how to structure a vertx-redis-client code","body":"<p>I'm trying to implement a compare-and-delete (CAD) function using the <a href=\"https://vertx.io/docs/vertx-redis-client/java/\" rel=\"nofollow noreferrer\">vertx-redis-client</a> library.</p>\n<p>I'm following <a href=\"https://stackoverflow.com/a/68232171/1052979\">this answer</a> on how to do this. I've already implemented the Lua script method and that works fine. However, as redis installations may possibly prohibit running the <code>eval</code> command with arbitrary Lua scripts, I think I must also implement this functionality using the WATCH/GET/MULTI/compare/DELETE/UNWATCH sequence of commands.</p>\n<p>However, I'm really having a hard time wrapping my head around the correct way to do this with the vert.x reactive way of programming.</p>\n<p>Here's my code that implements both of the methods to do a CAD operation:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private Future&lt;Boolean&gt; deleteLua(final String key, final String value) {\n        final RedisAPI redis = RedisAPI.api(client);\n\n        final Promise&lt;Boolean&gt; promise = Promise.promise();\n        redis.eval(List.of(&quot;if redis.call('get', KEYS[1]) == ARGV[1] then redis.call('del', KEYS[1]); return 1; else return 0; end&quot;, &quot;1&quot;, key, value))\n                .onSuccess(res -&gt; {\n                    System.out.println(&quot;Success: &quot; + res);\n                    promise.complete(res.toInteger() == 1);\n                })\n                .onFailure(err -&gt; {\n                    System.out.println(&quot;Error: &quot; + err);\n                    promise.fail(err);\n                });\n\n        return promise.future();\n    }\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>    private Future&lt;Boolean&gt; deleteMulti(final String key, final String value) {\n        final RedisAPI redis = RedisAPI.api(client);\n\n        final Promise&lt;Boolean&gt; promise = Promise.promise();\n        redis.watch(List.of(key))\n                .onSuccess(watchResult -&gt; {\n                    redis.get(key)\n                            .onSuccess(getResult -&gt; {\n                                redis.multi()\n                                        .onSuccess(multiResult -&gt; {\n                                            if (value.equals(String.valueOf(getResult))) {\n                                                redis.del(List.of(key))\n                                                        .onSuccess(delResult -&gt; {\n                                                            System.out.println(&quot;key deleted&quot;);\n                                                        });\n                                            } else {\n                                                System.out.println(&quot;value did not match, key not deleted&quot;);\n                                                promise.complete(false);\n                                            }\n                                            redis.exec().onSuccess(execResult -&gt; {\n                                                System.out.println(&quot;execResult: &quot; + execResult);\n                                                redis.unwatch().onSuccess(unwatchResult -&gt; {\n                                                    System.out.println(&quot;unwatched key&quot;);\n                                                    promise.complete(true);\n                                                });\n                                            });\n                                        })\n                                        .onFailure(multiErr -&gt; {\n                                            System.out.println(&quot;The multi failed: &quot; + multiErr);\n                                            promise.fail(multiErr);\n                                        });\n                            });\n                });\n        return Future.succeededFuture(true);\n    }\n</code></pre>\n<p>Both seem to work but I'm really uncertain about the <code>deleteMulti</code> method. First of all, it just looks ugly... it's so endlessly nested! I believe I can probably use a <code>compose</code> somehow to get around that to some extent, but I've tried doing that but keep running into walls on how exactly to do that. For example, I need the <code>getResult</code> inside the <code>onSuccess</code> block of the <code>multi</code> but when I try to use the <code>compose</code> structure, everything gets a bit messed up and I'm unclear on what result exactly I have in each compose block. Another thing I'm very unclear about is how the redis transactions work here. is my <code>redis</code> object keeping track of the session so that my call to <code>watch</code> will be &quot;active&quot; for any subsequent redis calls I make using that same object? Also, how do I need to treat <code>unwatch</code>? I'm currently only calling it within <code>onSuccess</code> for the watch-&gt;get-&gt;multi-&gt;exec block, but what if the get or multi fail? Do I need to unwatch on failures as well or will that just be handled by the session getting invalidated somehow? That actually seems unlikely since this is all reactive and the method (where the <code>RedisAPI redis</code> object is actually created will return probably before all the operations have finished.</p>\n<p>So yeah... quite confused.</p>\n<p>Any help in getting this code block into shape would be very much appreciated.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":95417,"reputation":4933,"user_id":259889,"accept_rate":76,"display_name":"Sid"},"score":1,"creation_date":1646221455,"post_id":71322093,"comment_id":126068186,"body_markdown":"Not sure of an API for this, but one way would be to split by `/` and then reverse the array.","body":"Not sure of an API for this, but one way would be to split by <code>&#47;</code> and then reverse the array."},{"owner":{"account_id":7595573,"reputation":101,"user_id":5761837,"accept_rate":17,"display_name":"A.Goel"},"score":0,"creation_date":1646221642,"post_id":71322093,"comment_id":126068250,"body_markdown":"yes that is the only way I know.","body":"yes that is the only way I know."},{"owner":{"account_id":22506547,"reputation":980,"user_id":16702058,"display_name":"Hi computer"},"score":0,"creation_date":1695805734,"post_id":71322093,"comment_id":136072076,"body_markdown":"SO is not a code writing or translation service. You can show your attempt and ask about a specific problem.","body":"SO is not a code writing or translation service. You can show your attempt and ask about a specific problem."}],"answers":[{"comments":[{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":2,"creation_date":1646223007,"post_id":71322314,"comment_id":126068712,"body_markdown":"That whole stream into list thing is a bit of an ugly wart in this. Just... go with the result of split, there&#39;s zero benefit to a list here. If you really wanted one, `List.copyOf(...)`.","body":"That whole stream into list thing is a bit of an ugly wart in this. Just... go with the result of split, there&#39;s zero benefit to a list here. If you really wanted one, <code>List.copyOf(...)</code>."}],"tags":[],"owner":{"account_id":18728352,"reputation":76,"user_id":13654416,"display_name":"AlexAlbu"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1646222312,"creation_date":1646222312,"answer_id":71322314,"question_id":71322093,"body_markdown":"I believe you could do that by splitting the path by &quot;/&quot; and afterwards concatenating the tokens in reverse order.\r\n\r\nHere is a code snippet:\r\n\r\n        Path path = Path.of(&quot;this/that/folder&quot;);\r\n        List&lt;String&gt; tokens = Arrays.stream(path.toString().split(&quot;/&quot;)).toList();\r\n        StringBuilder newPath = new StringBuilder();\r\n        for(int i = tokens.size() - 1; i &gt;= 0; i--){\r\n           newPath.append(tokens.get(i));\r\n           newPath.append(&quot;/&quot;);\r\n        }\r\n        System.out.println(newPath.toString());","title":"How to print a file path in reverse order in Java?","body":"<p>I believe you could do that by splitting the path by &quot;/&quot; and afterwards concatenating the tokens in reverse order.</p>\n<p>Here is a code snippet:</p>\n<pre><code>    Path path = Path.of(&quot;this/that/folder&quot;);\n    List&lt;String&gt; tokens = Arrays.stream(path.toString().split(&quot;/&quot;)).toList();\n    StringBuilder newPath = new StringBuilder();\n    for(int i = tokens.size() - 1; i &gt;= 0; i--){\n       newPath.append(tokens.get(i));\n       newPath.append(&quot;/&quot;);\n    }\n    System.out.println(newPath.toString());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695805217,"creation_date":1646516378,"answer_id":71366131,"question_id":71322093,"body_markdown":"A `Stream` of the `Path` components could be used to reverse the components of a relative path, and also handles any platform using the appropriate file separator:\r\n\r\n    Stream.iterate(Path.of(&quot;src/abc/foldername&quot;), Objects::nonNull, Path::getParent)\r\n          .map(Path::getFileName).map(Path::toString)\r\n       .collect(Collectors.joining(File.separator));\r\n    ==&gt; &quot;foldername/abc/src&quot;  (or foldername\\abc\\src on Windows)","title":"How to print a file path in reverse order in Java?","body":"<p>A <code>Stream</code> of the <code>Path</code> components could be used to reverse the components of a relative path, and also handles any platform using the appropriate file separator:</p>\n<pre><code>Stream.iterate(Path.of(&quot;src/abc/foldername&quot;), Objects::nonNull, Path::getParent)\n      .map(Path::getFileName).map(Path::toString)\n   .collect(Collectors.joining(File.separator));\n==&gt; &quot;foldername/abc/src&quot;  (or foldername\\abc\\src on Windows)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695809132,"creation_date":1695809132,"answer_id":77186477,"question_id":71322093,"body_markdown":"I&#39;ll assume you are using interface `IPath` from Eclipse Platform (not stated in your question, but seems reasonably likely).\r\n\r\nFrom the [IPath documentation][1] we can see that we can get individual segments in reverse order like this:\r\n\r\n    for (int i = projectRelativePath.segmentCount() - 1; i &gt;= 0; i--) {\r\n        System.out.println(projectRelativePath.segment(i)); // or append to string etc.\r\n    }\r\n\r\n  [1]: https://help.eclipse.org/latest/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fcore%2Fruntime%2FIPath.html","title":"How to print a file path in reverse order in Java?","body":"<p>I'll assume you are using interface <code>IPath</code> from Eclipse Platform (not stated in your question, but seems reasonably likely).</p>\n<p>From the <a href=\"https://help.eclipse.org/latest/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fcore%2Fruntime%2FIPath.html\" rel=\"nofollow noreferrer\">IPath documentation</a> we can see that we can get individual segments in reverse order like this:</p>\n<pre><code>for (int i = projectRelativePath.segmentCount() - 1; i &gt;= 0; i--) {\n    System.out.println(projectRelativePath.segment(i)); // or append to string etc.\n}\n</code></pre>\n"}],"owner":{"account_id":7595573,"reputation":101,"user_id":5761837,"accept_rate":17,"display_name":"A.Goel"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":173,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":71322314,"answer_count":3,"score":-1,"last_activity_date":1695809132,"creation_date":1646221306,"question_id":71322093,"body_markdown":"I want to print the relative path of file/folder in reverse order.\r\n\r\n    IPath projectRelativePath = element.getProjectRelativePath();\r\n\r\n\r\nthe result is &quot;src/abc/foldername&quot;.\r\n\r\nBut I want the result in reverse manner ie. foldername/abc/src.\r\n\r\nCan someone help me here? Is there any JAVA API available for this?","title":"How to print a file path in reverse order in Java?","body":"<p>I want to print the relative path of file/folder in reverse order.</p>\n<pre><code>IPath projectRelativePath = element.getProjectRelativePath();\n</code></pre>\n<p>the result is &quot;src/abc/foldername&quot;.</p>\n<p>But I want the result in reverse manner ie. foldername/abc/src.</p>\n<p>Can someone help me here? Is there any JAVA API available for this?</p>\n"},{"tags":["java","android","delete-file"],"comments":[{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":1,"creation_date":1673005628,"post_id":75030498,"comment_id":132405626,"body_markdown":"You do not have write access to arbitrary files on Android 11+. That will include the ability to delete arbitrary files.","body":"You do not have write access to arbitrary files on Android 11+. That will include the ability to delete arbitrary files."},{"owner":{"account_id":6746145,"reputation":4837,"user_id":5197712,"display_name":"Anand"},"score":0,"creation_date":1673005665,"post_id":75030498,"comment_id":132405634,"body_markdown":"Do I remove the permission  from manifest ?","body":"Do I remove the permission  from manifest ?"},{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1673005721,"post_id":75030498,"comment_id":132405649,"body_markdown":"If you want to be able to delete that file on Android 10 and below, you would need `WRITE_EXTERNAL_STORAGE` (including requesting it at runtime).","body":"If you want to be able to delete that file on Android 10 and below, you would need <code>WRITE_EXTERNAL_STORAGE</code> (including requesting it at runtime)."},{"owner":{"account_id":6746145,"reputation":4837,"user_id":5197712,"display_name":"Anand"},"score":0,"creation_date":1673005788,"post_id":75030498,"comment_id":132405670,"body_markdown":"So, Do I delete the permission for android 10+ devices ?","body":"So, Do I delete the permission for android 10+ devices ?"},{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":1,"creation_date":1673005831,"post_id":75030498,"comment_id":132405687,"body_markdown":"You could if you wanted. That is your decision.","body":"You could if you wanted. That is your decision."},{"owner":{"account_id":6746145,"reputation":4837,"user_id":5197712,"display_name":"Anand"},"score":0,"creation_date":1673005909,"post_id":75030498,"comment_id":132405712,"body_markdown":"Even now file is not deleting","body":"Even now file is not deleting"},{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1673005985,"post_id":75030498,"comment_id":132405740,"body_markdown":"Well, sure. As I wrote earlier, you do not have write access to arbitrary files on Android 11+. That will include the ability to delete arbitrary files.","body":"Well, sure. As I wrote earlier, you do not have write access to arbitrary files on Android 11+. That will include the ability to delete arbitrary files."},{"owner":{"account_id":6746145,"reputation":4837,"user_id":5197712,"display_name":"Anand"},"score":0,"creation_date":1673006081,"post_id":75030498,"comment_id":132405763,"body_markdown":"Ok Thanks @CommonsWare, But Whats the solution for my current issue","body":"Ok Thanks @CommonsWare, But Whats the solution for my current issue"},{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1673006273,"post_id":75030498,"comment_id":132405817,"body_markdown":"AFAIK, there is none. You cannot just randomly delete whatever you want anymore. If you are willing to involve the user, it might be possible to delete something that the user chooses via `ACTION_OPEN_DOCUMENT` / `ActivityResultContracts.OpenDocument`, though I have not tried this. You could ask that the user grant you `MANAGE_EXTERNAL_STORAGE` permission, but then you may not be allowed to distribute your app on the Play Store or elsewhere. Personally, I would simply not delete files in arbitrary locations.","body":"AFAIK, there is none. You cannot just randomly delete whatever you want anymore. If you are willing to involve the user, it might be possible to delete something that the user chooses via <code>ACTION_OPEN_DOCUMENT</code> / <code>ActivityResultContracts.OpenDocument</code>, though I have not tried this. You could ask that the user grant you <code>MANAGE_EXTERNAL_STORAGE</code> permission, but then you may not be allowed to distribute your app on the Play Store or elsewhere. Personally, I would simply not delete files in arbitrary locations."},{"owner":{"account_id":6746145,"reputation":4837,"user_id":5197712,"display_name":"Anand"},"score":0,"creation_date":1673007317,"post_id":75030498,"comment_id":132406089,"body_markdown":"I used the above permissions and  I already published app in the playstore","body":"I used the above permissions and  I already published app in the playstore"},{"owner":{"account_id":6746145,"reputation":4837,"user_id":5197712,"display_name":"Anand"},"score":0,"creation_date":1673007346,"post_id":75030498,"comment_id":132406097,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/250891/discussion-between-anandh-krishnan-and-commonsware).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/250891/discussion-between-anandh-krishnan-and-commonsware\">continue this discussion in chat</a>."},{"owner":{"account_id":16115791,"reputation":367,"user_id":11632959,"display_name":"dect"},"score":0,"creation_date":1695216432,"post_id":75030498,"comment_id":135994653,"body_markdown":"Did you find a solution?","body":"Did you find a solution?"}],"answers":[{"comments":[{"owner":{"account_id":6746145,"reputation":4837,"user_id":5197712,"display_name":"Anand"},"score":1,"creation_date":1673065669,"post_id":75033288,"comment_id":132419712,"body_markdown":"Hi @Sohaib, I used your solution 2. But its not working,","body":"Hi @Sohaib, I used your solution 2. But its not working,"},{"owner":{"account_id":6746145,"reputation":4837,"user_id":5197712,"display_name":"Anand"},"score":0,"creation_date":1673066985,"post_id":75033288,"comment_id":132419800,"body_markdown":"even now File deleted toast is showing but the file is not getting deleted bro","body":"even now File deleted toast is showing but the file is not getting deleted bro"},{"owner":{"account_id":26855967,"reputation":2351,"user_id":20440272,"display_name":"Sohaib Ahmed"},"score":0,"creation_date":1673088447,"post_id":75033288,"comment_id":132422082,"body_markdown":"Can you give a try for 1st solution?","body":"Can you give a try for 1st solution?"},{"owner":{"account_id":26855967,"reputation":2351,"user_id":20440272,"display_name":"Sohaib Ahmed"},"score":0,"creation_date":1673088503,"post_id":75033288,"comment_id":132422095,"body_markdown":"I have updated my answer, plz update this line `File file2 = new File(file.toString());`","body":"I have updated my answer, plz update this line <code>File file2 = new File(file.toString());</code>"},{"owner":{"account_id":6746145,"reputation":4837,"user_id":5197712,"display_name":"Anand"},"score":0,"creation_date":1673088567,"post_id":75033288,"comment_id":132422102,"body_markdown":"Ok bro I will check","body":"Ok bro I will check"},{"owner":{"account_id":6746145,"reputation":4837,"user_id":5197712,"display_name":"Anand"},"score":0,"creation_date":1673088591,"post_id":75033288,"comment_id":132422105,"body_markdown":"actually its not issue bro","body":"actually its not issue bro"},{"owner":{"account_id":6746145,"reputation":4837,"user_id":5197712,"display_name":"Anand"},"score":0,"creation_date":1673088613,"post_id":75033288,"comment_id":132422109,"body_markdown":"the issue is its not working on android 11+ devices","body":"the issue is its not working on android 11+ devices"},{"owner":{"account_id":6746145,"reputation":4837,"user_id":5197712,"display_name":"Anand"},"score":0,"creation_date":1673088806,"post_id":75033288,"comment_id":132422138,"body_markdown":"I cant use this registerForActivityResult bro. Because Im working on broadcastReceiver","body":"I cant use this registerForActivityResult bro. Because Im working on broadcastReceiver"},{"owner":{"account_id":26855967,"reputation":2351,"user_id":20440272,"display_name":"Sohaib Ahmed"},"score":0,"creation_date":1673088819,"post_id":75033288,"comment_id":132422141,"body_markdown":"Yes, I get that, I&#39;m actually using this code and it worked for me","body":"Yes, I get that, I&#39;m actually using this code and it worked for me"},{"owner":{"account_id":6746145,"reputation":4837,"user_id":5197712,"display_name":"Anand"},"score":0,"creation_date":1673089456,"post_id":75033288,"comment_id":132422238,"body_markdown":"are you using in broadcast receiver ?","body":"are you using in broadcast receiver ?"},{"owner":{"account_id":26855967,"reputation":2351,"user_id":20440272,"display_name":"Sohaib Ahmed"},"score":0,"creation_date":1673090112,"post_id":75033288,"comment_id":132422341,"body_markdown":"No, in fragments","body":"No, in fragments"},{"owner":{"account_id":6746145,"reputation":4837,"user_id":5197712,"display_name":"Anand"},"score":0,"creation_date":1673237831,"post_id":75033288,"comment_id":132445434,"body_markdown":"@Sohaid Ahmad , Thanks for your help. I can not use this in fragment or actiivty, Because I need this function on my Broadcast reciever class(ex. I need to call this while incoming call receiving)","body":"@Sohaid Ahmad , Thanks for your help. I can not use this in fragment or actiivty, Because I need this function on my Broadcast reciever class(ex. I need to call this while incoming call receiving)"}],"tags":[],"owner":{"account_id":26855967,"reputation":2351,"user_id":20440272,"display_name":"Sohaib Ahmed"},"comment_count":12,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1673088476,"creation_date":1673021005,"answer_id":75033288,"question_id":75030498,"body_markdown":"### Solution # 1 \r\nFor Android 11 or higher, you can delete file using [MediaStore Api][1] (without `MANAGE_EXTERNAL_Storage`)\r\n\r\nIn `onCreate()`\r\n\r\n    String path = &quot;/storage/emulated/0/Recordings/Call/Two.mp3&quot;;\r\n\r\n    private ActivityResultLauncher&lt;Intent&gt; deleteResultLauncher = registerForActivityResult(new ActivityResultContracts.StartActivityForResult(), result -&gt; {\r\n    \t\tif (result.getResultCode() == Activity.RESULT_OK) {\r\n    \t\t\tMediaScannerConnection.scanFile(getApplicationContext(), new String[]{path}, null, (path, uri) -&gt; {\r\n    \t\t\t\tLog.d(&quot;onScanCompleted&quot;, uri.getPath());\r\n    \t\t\t});\r\n    \t\t}\r\n    \t});\r\n\r\nyou delete function,\r\n\r\n\r\n\t\tif (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {\r\n\t\t\tUri fileUri = Uri.fromFile(new File(path));\r\n\r\n\t\t\tArrayList&lt;Uri&gt; arrayList = new ArrayList&lt;&gt;();\r\n\t\t\tarrayList.add(fileUri);\r\n\r\n\t\t\tPendingIntent pendingIntent = MediaStore.createDeleteRequest(getContentResolver(), arrayList);\r\n\t\t\tdeleteResultLauncher.launch(new IntentSenderRequest.Builder(pendingIntent).build().getFillInIntent());\r\n\t\t}\r\n\r\n### Solution 2\r\nWith `MANAGE_EXTERNAL_Storage`, just add `MediaScannerConnection`\r\n\r\n\r\n\tString path = &quot;/storage/emulated/0/Recordings/Call/Two.mp3&quot;;\r\n\tFile file = new File(path);\r\n\r\n\tif (file.exists()) {\r\n\t\tFile file2 = new File(file.toString());\r\n\t\tfile2.delete();\r\n        MediaScannerConnection.scanFile(getApplicationContext(), new String[]{path}, null, (path, uri) -&gt; {\r\n                Log.d(&quot;onScanCompleted&quot;, uri.getPath());\r\n            });\r\n\t\tToast.makeText(this, &quot;File deleted.&quot;, Toast.LENGTH_SHORT).show();\r\n\t\tfinish();\r\n\t} else {\r\n\t\tToast.makeText(this, &quot;File not exists&quot;, Toast.LENGTH_SHORT).show();\r\n\t}\r\n\r\n  [1]: https://developer.android.com/reference/android/provider/MediaStore#createDeleteRequest(android.content.ContentResolver,%20java.util.Collection%3Candroid.net.Uri%3E)\r\n","title":"File is not getting deleted in Android 13?","body":"<h3>Solution # 1</h3>\n<p>For Android 11 or higher, you can delete file using <a href=\"https://developer.android.com/reference/android/provider/MediaStore#createDeleteRequest(android.content.ContentResolver,%20java.util.Collection%3Candroid.net.Uri%3E)\" rel=\"nofollow noreferrer\">MediaStore Api</a> (without <code>MANAGE_EXTERNAL_Storage</code>)</p>\n<p>In <code>onCreate()</code></p>\n<pre><code>String path = &quot;/storage/emulated/0/Recordings/Call/Two.mp3&quot;;\n\nprivate ActivityResultLauncher&lt;Intent&gt; deleteResultLauncher = registerForActivityResult(new ActivityResultContracts.StartActivityForResult(), result -&gt; {\n        if (result.getResultCode() == Activity.RESULT_OK) {\n            MediaScannerConnection.scanFile(getApplicationContext(), new String[]{path}, null, (path, uri) -&gt; {\n                Log.d(&quot;onScanCompleted&quot;, uri.getPath());\n            });\n        }\n    });\n</code></pre>\n<p>you delete function,</p>\n<pre><code>    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {\n        Uri fileUri = Uri.fromFile(new File(path));\n\n        ArrayList&lt;Uri&gt; arrayList = new ArrayList&lt;&gt;();\n        arrayList.add(fileUri);\n\n        PendingIntent pendingIntent = MediaStore.createDeleteRequest(getContentResolver(), arrayList);\n        deleteResultLauncher.launch(new IntentSenderRequest.Builder(pendingIntent).build().getFillInIntent());\n    }\n</code></pre>\n<h3>Solution 2</h3>\n<p>With <code>MANAGE_EXTERNAL_Storage</code>, just add <code>MediaScannerConnection</code></p>\n<pre><code>String path = &quot;/storage/emulated/0/Recordings/Call/Two.mp3&quot;;\nFile file = new File(path);\n\nif (file.exists()) {\n    File file2 = new File(file.toString());\n    file2.delete();\n    MediaScannerConnection.scanFile(getApplicationContext(), new String[]{path}, null, (path, uri) -&gt; {\n            Log.d(&quot;onScanCompleted&quot;, uri.getPath());\n        });\n    Toast.makeText(this, &quot;File deleted.&quot;, Toast.LENGTH_SHORT).show();\n    finish();\n} else {\n    Toast.makeText(this, &quot;File not exists&quot;, Toast.LENGTH_SHORT).show();\n}\n</code></pre>\n"}],"owner":{"account_id":6746145,"reputation":4837,"user_id":5197712,"display_name":"Anand"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1404,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695808382,"creation_date":1673005453,"question_id":75030498,"body_markdown":"    String path = &quot;/storage/emulated/0/Recordings/Call/Two.mp3&quot;;\r\n    File file = new File(path);\r\n    \r\n    if(file.exists()) {\r\n    File file2 = new File(file.getAbsolutePath());\r\n        file2.delete();\r\n        Toast.makeText(this, &quot;File deleted.&quot;, Toast.LENGTH_SHORT).show();\r\n        finish();   \r\n    }else \r\n    {\r\n        Toast.makeText(this, &quot;File not exists&quot;, Toast.LENGTH_SHORT).show();        \r\n    }\r\n\r\nFile is not getting deleted. But the toast is showing as File Deleted.I trapped on this issue almost 2 days, any help will be highly appreciated. Thanks in advance.\r\n\r\nI used the below permission in the manifest.\r\n\r\n      &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot;/&gt;\r\n      &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;/&gt;\r\n      &lt;uses-permission android:name=&quot;android.permission.MANAGE_EXTERNAL_STORAGE&quot; /&gt;\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/I23nP.png","title":"File is not getting deleted in Android 13?","body":"<pre><code>String path = &quot;/storage/emulated/0/Recordings/Call/Two.mp3&quot;;\nFile file = new File(path);\n\nif(file.exists()) {\nFile file2 = new File(file.getAbsolutePath());\n    file2.delete();\n    Toast.makeText(this, &quot;File deleted.&quot;, Toast.LENGTH_SHORT).show();\n    finish();   \n}else \n{\n    Toast.makeText(this, &quot;File not exists&quot;, Toast.LENGTH_SHORT).show();        \n}\n</code></pre>\n<p>File is not getting deleted. But the toast is showing as File Deleted.I trapped on this issue almost 2 days, any help will be highly appreciated. Thanks in advance.</p>\n<p>I used the below permission in the manifest.</p>\n<pre><code>  &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot;/&gt;\n  &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;/&gt;\n  &lt;uses-permission android:name=&quot;android.permission.MANAGE_EXTERNAL_STORAGE&quot; /&gt;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/I23nP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/I23nP.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring","maven","maven-shade-plugin"],"comments":[{"owner":{"account_id":3085559,"reputation":699,"user_id":2612773,"accept_rate":100,"display_name":"dev_feed"},"score":0,"creation_date":1395921497,"post_id":11551083,"comment_id":34563005,"body_markdown":"I&#39;ve got the same problem, would like to see more attention to this question.  Did you solve this error?","body":"I&#39;ve got the same problem, would like to see more attention to this question.  Did you solve this error?"},{"owner":{"account_id":7864671,"reputation":452,"user_id":5943840,"display_name":"Raphael"},"score":0,"creation_date":1665702099,"post_id":11551083,"comment_id":130766781,"body_markdown":"In my case, I was actually missing the property in question. Problem was solved after adding it (as a dummy property, since I&#39;m running locally).","body":"In my case, I was actually missing the property in question. Problem was solved after adding it (as a dummy property, since I&#39;m running locally)."}],"answers":[{"tags":[],"owner":{"account_id":70704,"reputation":49440,"user_id":204788,"display_name":"Biju Kunjummen"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1342651042,"creation_date":1342651042,"answer_id":11551388,"question_id":11551083,"body_markdown":"It is probably not able to find the resource - `postprocess.properties`. Can you please remove this line - \r\n\r\n    &lt;property name=&quot;ignoreResourceNotFound&quot; value=&quot;true&quot; /&gt;\r\n\r\nThen if the resource is not found appropriate message should be displayed.","title":"Spring Circular placeholder reference while running an executable jar","body":"<p>It is probably not able to find the resource - <code>postprocess.properties</code>. Can you please remove this line - </p>\n\n<pre><code>&lt;property name=\"ignoreResourceNotFound\" value=\"true\" /&gt;\n</code></pre>\n\n<p>Then if the resource is not found appropriate message should be displayed.</p>\n"},{"comments":[{"owner":{"account_id":340456,"reputation":1022,"user_id":670488,"accept_rate":87,"display_name":"thathashd"},"score":0,"creation_date":1568624352,"post_id":31718018,"comment_id":102319038,"body_markdown":"Thanks, I was facing the same issue. Do you know why this limitation exists?","body":"Thanks, I was facing the same issue. Do you know why this limitation exists?"}],"tags":[],"owner":{"account_id":3600772,"reputation":495,"user_id":3004124,"display_name":"Pragmatic"},"comment_count":1,"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1438242513,"creation_date":1438242513,"answer_id":31718018,"question_id":11551083,"body_markdown":"Its probably late to answer this, but adding it for benefit of someone facing similar issue. \r\n\r\nI was able to fix it by changing the key names. e.g.\r\n\r\n     &lt;prop key=&quot;processor.core.poolsize&quot;&gt;${processor.core.poolsize}&lt;/prop&gt;\r\n     &lt;prop key=&quot;processor.max.poolsize&quot;&gt;${processor.max.poolsize}&lt;/prop&gt;\r\nWas changed to something like\r\n \r\n    &lt;prop key=&quot;processor.core.poolsize&quot;&gt;${core.poolsize}&lt;/prop&gt;\r\n    &lt;prop key=&quot;processor.max.poolsize&quot;&gt;${max.poolsize}&lt;/prop&gt;\r\n\r\nproperty-placeholder key and the key of property value to be filtered cannot be same.","title":"Spring Circular placeholder reference while running an executable jar","body":"<p>Its probably late to answer this, but adding it for benefit of someone facing similar issue. </p>\n\n<p>I was able to fix it by changing the key names. e.g.</p>\n\n<pre><code> &lt;prop key=\"processor.core.poolsize\"&gt;${processor.core.poolsize}&lt;/prop&gt;\n &lt;prop key=\"processor.max.poolsize\"&gt;${processor.max.poolsize}&lt;/prop&gt;\n</code></pre>\n\n<p>Was changed to something like</p>\n\n<pre><code>&lt;prop key=\"processor.core.poolsize\"&gt;${core.poolsize}&lt;/prop&gt;\n&lt;prop key=\"processor.max.poolsize\"&gt;${max.poolsize}&lt;/prop&gt;\n</code></pre>\n\n<p>property-placeholder key and the key of property value to be filtered cannot be same.</p>\n"},{"tags":[],"owner":{"account_id":1050608,"reputation":96,"user_id":1054658,"display_name":"Becky reamy"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1476992647,"creation_date":1476992647,"answer_id":40163191,"question_id":11551083,"body_markdown":"I was having the same issue when trying to run a spring integration test using SpringJUnit4ClassRunner.  I was unsure of how to get my properties file loaded and after a few mis-steps, I found the @TestPropertySource annotation that allowed me to define the properties file(s) needed.\r\n\r\nI had tried @PropertySource before that, and it does not work when you are running a spring integration test like this. \r\n\r\nHopefully this helps someone else.","title":"Spring Circular placeholder reference while running an executable jar","body":"<p>I was having the same issue when trying to run a spring integration test using SpringJUnit4ClassRunner.  I was unsure of how to get my properties file loaded and after a few mis-steps, I found the @TestPropertySource annotation that allowed me to define the properties file(s) needed.</p>\n\n<p>I had tried @PropertySource before that, and it does not work when you are running a spring integration test like this. </p>\n\n<p>Hopefully this helps someone else.</p>\n"},{"comments":[{"owner":{"account_id":1863598,"reputation":1206,"user_id":1687636,"accept_rate":64,"display_name":"Sheldon Wei"},"score":0,"creation_date":1688031111,"post_id":61232758,"comment_id":135020293,"body_markdown":"What? Really this is a good answer with so many upvote?","body":"What? Really this is a good answer with so many upvote?"}],"tags":[],"owner":{"account_id":3223776,"reputation":171,"user_id":2720559,"display_name":"Abhishek"},"comment_count":1,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1586965140,"creation_date":1586965140,"answer_id":61232758,"question_id":11551083,"body_markdown":"    Circular placeholder reference XXXX in property definitions\r\n\r\nAbove kind of exception will be thrown by the `spring-framework` when your property key name and value variable name are exactly the same. \r\n\r\nMake sure your property should not look like \r\n `key={$key}`. Keeping **different** name for key and value will fix this issue.","title":"Spring Circular placeholder reference while running an executable jar","body":"<pre><code>Circular placeholder reference XXXX in property definitions\n</code></pre>\n\n<p>Above kind of exception will be thrown by the <code>spring-framework</code> when your property key name and value variable name are exactly the same. </p>\n\n<p>Make sure your property should not look like \n <code>key={$key}</code>. Keeping <strong>different</strong> name for key and value will fix this issue.</p>\n"},{"tags":[],"owner":{"account_id":2409845,"reputation":866,"user_id":2105218,"display_name":"YellowStrawHatter"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1618831411,"creation_date":1618831411,"answer_id":67161055,"question_id":11551083,"body_markdown":"In your java code, if you are using keys declared in some **.properties** or **yaml** file other than `application.properties` or `application.yaml`, you will get this exception when you try to run your Spring application without specifying the profile to use.\r\n\r\nSolution:\r\nIn my case, I&#39;m using ***Spring Boot 2.4***, here is one way to tell your app which profile(s) will be used:\r\n\r\n**Command Line:** \r\n\r\n    java -jar -Dspring.profiles.active=DEV myapp.jar\r\n\r\nIf you&#39;re running your apps via an IDE such as IntelliJ:\r\n\r\n***Run -&gt; Edit configurations***\r\n\r\nIn your Spring Config, specify the profiles(s) that you want to be active (separated by commas):\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/aoa1w.png","title":"Spring Circular placeholder reference while running an executable jar","body":"<p>In your java code, if you are using keys declared in some <strong>.properties</strong> or <strong>yaml</strong> file other than <code>application.properties</code> or <code>application.yaml</code>, you will get this exception when you try to run your Spring application without specifying the profile to use.</p>\n<p>Solution:\nIn my case, I'm using <em><strong>Spring Boot 2.4</strong></em>, here is one way to tell your app which profile(s) will be used:</p>\n<p><strong>Command Line:</strong></p>\n<pre><code>java -jar -Dspring.profiles.active=DEV myapp.jar\n</code></pre>\n<p>If you're running your apps via an IDE such as IntelliJ:</p>\n<p><em><strong>Run -&gt; Edit configurations</strong></em></p>\n<p>In your Spring Config, specify the profiles(s) that you want to be active (separated by commas):</p>\n<p><a href=\"https://i.stack.imgur.com/aoa1w.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aoa1w.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":26147565,"reputation":81,"user_id":19835993,"display_name":"Michael Sparrow"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695808053,"creation_date":1695807040,"answer_id":77186241,"question_id":11551083,"body_markdown":"**Quick fix:** Had the same problem. Renaming the property, starting the application and the renaming the property back and restarting the application again solved the problem. Maybe this can help someone.","title":"Spring Circular placeholder reference while running an executable jar","body":"<p><strong>Quick fix:</strong> Had the same problem. Renaming the property, starting the application and the renaming the property back and restarting the application again solved the problem. Maybe this can help someone.</p>\n"}],"owner":{"account_id":207732,"reputation":1691,"user_id":457776,"accept_rate":60,"display_name":"Shamik"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71736,"favorite_count":0,"down_vote_count":0,"up_vote_count":25,"answer_count":6,"score":25,"last_activity_date":1695808053,"creation_date":1342649286,"question_id":11551083,"body_markdown":"I&#39;m facing &quot;Circular Placeholder reference&quot; exception while trying to run an executable jar file. Here&#39;s the detailed exception.\r\n\r\n&lt;pre&gt;&lt;code&gt;\r\norg.springframework.beans.factory.BeanDefinitionStoreException: Invalid bean definition with name &#39;postProcessProperties&#39; defined in class path resource [applicationContext.xml]: Circular placeholder reference &#39;processor.core.poolsize&#39; in property definitions\r\n     [echo]     at org.springframework.beans.factory.config.PropertyPlaceholderConfigurer.processProperties(PropertyPlaceholderConfigurer.java:287)\r\n     [echo]     at org.springframework.beans.factory.config.PropertyResourceConfigurer.postProcessBeanFactory(PropertyResourceConfigurer.java:75)\r\n     [echo]     at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:663)\r\n     [echo]     at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:638)\r\n     [echo]     at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:407)\r\n     [echo]     at org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:139)\r\n     [echo]     at org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:83)\r\n     [echo]     at com.autodesk.postprocess.engine.PostProcessEngine.start(PostProcessEngine.java:39)\r\n     [echo]     at com.autodesk.postprocess.engine.PostProcessEngine.main(PostProcessEngine.java:29)\r\n&lt;/code&gt;&lt;/pre&gt;\r\n\r\nThis is a spring application which uses an external property file to read values at startup. Here&#39;s the spring definition. This has worked pretty well till now.\r\n&lt;pre&gt;&lt;code&gt;\r\n&amp;lt;bean id=&quot;propertyConfig&quot;\r\n\t\tclass=&quot;org.springframework.beans.factory.config.PropertyPlaceholderConfigurer&quot;&amp;gt;\r\n\t\t&amp;lt;property name=&quot;systemPropertiesModeName&quot; value=&quot;SYSTEM_PROPERTIES_MODE_NEVER&quot; /&amp;gt;\r\n\t\t&amp;lt;property name=&quot;ignoreResourceNotFound&quot; value=&quot;true&quot; /&amp;gt;\r\n\t    &amp;lt;property name=&quot;locations&quot;&amp;gt;\r\n\t\t\t&amp;lt;list&amp;gt;\r\n\t\t\t\t&amp;lt;value&amp;gt;classpath:/postprocess.properties&amp;lt;/value&amp;gt;\r\n\t\t\t&amp;lt;/list&amp;gt;\r\n\t\t&amp;lt;/property&amp;gt;\r\n\t\t&amp;lt;property name=&quot;properties&quot;&amp;gt;\r\n\t\t\t&amp;lt;props&amp;gt;\r\n\t\t\t\t&amp;lt;prop key=&quot;processor.core.poolsize&quot;&amp;gt;${processor.core.poolsize}&amp;lt;/prop&amp;gt;\r\n\t\t\t\t&amp;lt;prop key=&quot;processor.max.poolsize&quot;&amp;gt;${processor.max.poolsize}&amp;lt;/prop&amp;gt;\r\n\t\t\t&amp;lt;/props&amp;gt;\r\n\t\t&amp;lt;/property&amp;gt;\r\n\t&amp;lt;/bean&amp;gt;\r\n\r\n\t&amp;lt;bean id=&quot;postProcessProperties&quot;\r\n\t\tclass=&quot;org.springframework.beans.factory.config.PropertiesFactoryBean&quot;&amp;gt;\r\n\t\t&amp;lt;property name=&quot;properties&quot;&amp;gt;\r\n\t\t\t&amp;lt;props&amp;gt;\r\n\t\t\t\t&amp;lt;prop key=&quot;processor.core.poolsize&quot;&amp;gt;${processor.core.poolsize}&amp;lt;/prop&amp;gt;\r\n\t\t\t\t&amp;lt;prop key=&quot;processor.max.poolsize&quot;&amp;gt;${processor.max.poolsize}&amp;lt;/prop&amp;gt;\r\n\t\t\t\t&amp;lt;prop key=&quot;processor.polling.delay&quot;&amp;gt;${processor.polling.delay}&amp;lt;/prop&amp;gt;\r\n\t\t\t\t&amp;lt;prop key=&quot;processor.polling.period&quot;&amp;gt;${processor.polling.period}&amp;lt;/prop&amp;gt;\r\n\t\t&amp;lt;/property&amp;gt;\r\n\t&amp;lt;/bean&amp;gt;\r\n&lt;/code&gt;&lt;/pre&gt;\r\n\r\nI&#39;m using shade plugin to generate the jar file. Here&#39;s a snippet\r\n&lt;pre&gt;&lt;code&gt;\r\n&amp;lt;plugin&amp;gt;\r\n\t\t\t\t&amp;lt;groupId&amp;gt;org.apache.maven.plugins&amp;lt;/groupId&amp;gt;\r\n\t\t\t\t&amp;lt;artifactId&amp;gt;maven-shade-plugin&amp;lt;/artifactId&amp;gt;\r\n\t\t\t\t&amp;lt;version&amp;gt;1.7.1&amp;lt;/version&amp;gt;\r\n\t\t\t\t&amp;lt;executions&amp;gt;\r\n\t\t\t\t\t&amp;lt;execution&amp;gt;\r\n\t\t\t\t\t\t&amp;lt;phase&amp;gt;package&amp;lt;/phase&amp;gt;\r\n\t\t\t\t\t\t&amp;lt;goals&amp;gt;\r\n\t\t\t\t\t\t\t&amp;lt;goal&amp;gt;shade&amp;lt;/goal&amp;gt;\r\n\t\t\t\t\t\t&amp;lt;/goals&amp;gt;\r\n\t\t\t\t\t\t&amp;lt;configuration&amp;gt;\r\n\t\t\t\t\t\t\t&amp;lt;transformers&amp;gt;\r\n\t\t\t\t\t\t\t\t&amp;lt;transformer\r\n\t\t\t\t\t\t\t\t\timplementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&amp;gt;\r\n\t\t\t\t\t\t\t\t\t&amp;lt;mainClass&amp;gt;com.test.postprocess.engine.PostProcessEngine&amp;lt;/mainClass&amp;gt;\r\n\t\t\t\t\t\t\t\t&amp;lt;/transformer&amp;gt;\r\n\t\t\t\t\t\t\t\t&amp;lt;transformer\r\n\t\t\t\t\t\t\t\t\timplementation=&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;&amp;gt;\r\n\t\t\t\t\t\t\t\t\t&amp;lt;resource&amp;gt;META-INF/spring.handlers&amp;lt;/resource&amp;gt;\r\n\t\t\t\t\t\t\t\t&amp;lt;/transformer&amp;gt;\r\n\t\t\t\t\t\t\t\t&amp;lt;transformer\r\n\t\t\t\t\t\t\t\t\timplementation=&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;&amp;gt;\r\n\t\t\t\t\t\t\t\t\t&amp;lt;resource&amp;gt;META-INF/spring.schemas&amp;lt;/resource&amp;gt;\r\n\t\t\t\t\t\t\t\t&amp;lt;/transformer&amp;gt;\r\n\t\t\t\t\t\t\t&amp;lt;/transformers&amp;gt;\r\n\t\t\t\t\t\t\t&amp;lt;filters&amp;gt;\r\n\t\t\t\t\t\t\t\t&amp;lt;filter&amp;gt;\r\n\t\t\t\t\t\t\t\t\t&amp;lt;artifact&amp;gt;*:*&amp;lt;/artifact&amp;gt;\r\n\t\t\t\t\t\t\t\t\t&amp;lt;excludes&amp;gt;\r\n\t\t\t\t\t\t\t\t\t\t&amp;lt;exclude&amp;gt;META-INF/*.SF&amp;lt;/exclude&amp;gt;\r\n\t\t\t\t\t\t\t\t\t\t&amp;lt;exclude&amp;gt;META-INF/*.DSA&amp;lt;/exclude&amp;gt;\r\n\t\t\t\t\t\t\t\t\t\t&amp;lt;exclude&amp;gt;META-INF/*.RSA&amp;lt;/exclude&amp;gt;\r\n\t\t\t\t\t\t\t\t\t&amp;lt;/excludes&amp;gt;\r\n\t\t\t\t\t\t\t\t&amp;lt;/filter&amp;gt;\r\n\t\t\t\t\t\t\t&amp;lt;/filters&amp;gt;\r\n\t\t\t\t\t\t&amp;lt;/configuration&amp;gt;\r\n\t\t\t\t\t&amp;lt;/execution&amp;gt;\r\n\t\t\t\t&amp;lt;/executions&amp;gt;\r\n\t\t\t&amp;lt;/plugin&amp;gt;\r\n&lt;/pre&gt;&lt;/code&gt;\r\n\r\nI&#39;m not sure what&#39;s causing this issue, as I&#39;ve used similar pattern before in other executable jar files.\r\n\r\nAny pointer will be appreciated.\r\n\r\nThanks","title":"Spring Circular placeholder reference while running an executable jar","body":"<p>I'm facing \"Circular Placeholder reference\" exception while trying to run an executable jar file. Here's the detailed exception.</p>\n\n<pre><code>\norg.springframework.beans.factory.BeanDefinitionStoreException: Invalid bean definition with name 'postProcessProperties' defined in class path resource [applicationContext.xml]: Circular placeholder reference 'processor.core.poolsize' in property definitions\n     [echo]     at org.springframework.beans.factory.config.PropertyPlaceholderConfigurer.processProperties(PropertyPlaceholderConfigurer.java:287)\n     [echo]     at org.springframework.beans.factory.config.PropertyResourceConfigurer.postProcessBeanFactory(PropertyResourceConfigurer.java:75)\n     [echo]     at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:663)\n     [echo]     at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:638)\n     [echo]     at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:407)\n     [echo]     at org.springframework.context.support.ClassPathXmlApplicationContext.(ClassPathXmlApplicationContext.java:139)\n     [echo]     at org.springframework.context.support.ClassPathXmlApplicationContext.(ClassPathXmlApplicationContext.java:83)\n     [echo]     at com.autodesk.postprocess.engine.PostProcessEngine.start(PostProcessEngine.java:39)\n     [echo]     at com.autodesk.postprocess.engine.PostProcessEngine.main(PostProcessEngine.java:29)\n</code></pre>\n\n<p>This is a spring application which uses an external property file to read values at startup. Here's the spring definition. This has worked pretty well till now.</p>\n\n<pre><code>\n&lt;bean id=\"propertyConfig\"\n        class=\"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer\"&gt;\n        &lt;property name=\"systemPropertiesModeName\" value=\"SYSTEM_PROPERTIES_MODE_NEVER\" /&gt;\n        &lt;property name=\"ignoreResourceNotFound\" value=\"true\" /&gt;\n        &lt;property name=\"locations\"&gt;\n            &lt;list&gt;\n                &lt;value&gt;classpath:/postprocess.properties&lt;/value&gt;\n            &lt;/list&gt;\n        &lt;/property&gt;\n        &lt;property name=\"properties\"&gt;\n            &lt;props&gt;\n                &lt;prop key=\"processor.core.poolsize\"&gt;${processor.core.poolsize}&lt;/prop&gt;\n                &lt;prop key=\"processor.max.poolsize\"&gt;${processor.max.poolsize}&lt;/prop&gt;\n            &lt;/props&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"postProcessProperties\"\n        class=\"org.springframework.beans.factory.config.PropertiesFactoryBean\"&gt;\n        &lt;property name=\"properties\"&gt;\n            &lt;props&gt;\n                &lt;prop key=\"processor.core.poolsize\"&gt;${processor.core.poolsize}&lt;/prop&gt;\n                &lt;prop key=\"processor.max.poolsize\"&gt;${processor.max.poolsize}&lt;/prop&gt;\n                &lt;prop key=\"processor.polling.delay\"&gt;${processor.polling.delay}&lt;/prop&gt;\n                &lt;prop key=\"processor.polling.period\"&gt;${processor.polling.period}&lt;/prop&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n</code></pre>\n\n<p>I'm using shade plugin to generate the jar file. Here's a snippet\n<pre><code>\n&lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n                &lt;version&gt;1.7.1&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;shade&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;transformers&gt;\n                                &lt;transformer\n                                    implementation=\"org.apache.maven.plugins.shade.resource.ManifestResourceTransformer\"&gt;\n                                    &lt;mainClass&gt;com.test.postprocess.engine.PostProcessEngine&lt;/mainClass&gt;\n                                &lt;/transformer&gt;\n                                &lt;transformer\n                                    implementation=\"org.apache.maven.plugins.shade.resource.AppendingTransformer\"&gt;\n                                    &lt;resource&gt;META-INF/spring.handlers&lt;/resource&gt;\n                                &lt;/transformer&gt;\n                                &lt;transformer\n                                    implementation=\"org.apache.maven.plugins.shade.resource.AppendingTransformer\"&gt;\n                                    &lt;resource&gt;META-INF/spring.schemas&lt;/resource&gt;\n                                &lt;/transformer&gt;\n                            &lt;/transformers&gt;\n                            &lt;filters&gt;\n                                &lt;filter&gt;\n                                    &lt;artifact&gt;<em>:</em>&lt;/artifact&gt;\n                                    &lt;excludes&gt;\n                                        &lt;exclude&gt;META-INF/<em>.SF&lt;/exclude&gt;\n                                        &lt;exclude&gt;META-INF/</em>.DSA&lt;/exclude&gt;\n                                        &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\n                                    &lt;/excludes&gt;\n                                &lt;/filter&gt;\n                            &lt;/filters&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n</pre></code></p>\n\n<p>I'm not sure what's causing this issue, as I've used similar pattern before in other executable jar files.</p>\n\n<p>Any pointer will be appreciated.</p>\n\n<p>Thanks</p>\n"},{"tags":["java","spring","websocket","graphql","spring-graphql"],"owner":{"account_id":2590005,"reputation":1317,"user_id":2244915,"accept_rate":75,"display_name":"loonis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695807823,"creation_date":1695807823,"question_id":77186332,"body_markdown":"Using Spring Boot 3.2.4 with Spring WebFlux/GraphQL subscription via Websocket.\r\n\r\nServer A exposes a graphqlSubscription, and Server B consumes the subscription.  \r\nThey both use the same components (reactor/netty).\r\n\r\nSteps to Reproduce:\r\n\r\n``` lang-java\r\n// Client side, Initialize the webSocketGraphQlClient\r\nReactorNettyWebSocketClient reactorNettyWebSocketClient = new ReactorNettyWebSocketClient(HttpClient.create(), build);\r\nWebSocketGraphQlClient.builder(serverUrl, reactorNettyWebSocketClient).build();\r\n    \r\n// Call sample\r\nwebSocketGraphQlClient\r\n .document(query)\r\n .retrieveSubscription(path)\r\n .toEntity(XXXX.class)\r\n .retryWhen(Retry.fixedDelay(5, Duration.ofMinutes(1))).blockLast()\r\n```\r\n\r\n**Not Working Cases**\r\n\r\nCase 1:\r\n* Run the client, do not start the server\r\n* Wait for the 1st RETRY.\r\n* `GraphQlTransportException =&gt; connection refused.`\r\n* Run the server.\r\n* Nexts retries will fail with the same reason.\r\n\r\nCase 2:\r\n\r\n* Run the server.\r\n* Run the client.\r\n* Communication between both is working fine\r\n* Kill the server.\r\n* Wait for the FIRST RETRY\r\n* `WebSocketDisconnectedException -&gt; connection is closed or lost.`\r\n* Wait for the SECOND RETRY.\r\n* `GraphQlTransportException =&gt; connection refused.`\r\n* Rerun the server.\r\n* Nexts retries will fail with the same reason.\r\n\r\n\r\n**Working Case**\r\n\r\n* Run the server.\r\n* Run the client.\r\n* Communication between both is working fine\r\n* Kill the server.\r\n* Wait for the FIRST RETRY\r\n* `WebSocketDisconnectedException -&gt; connection is closed or lost.`\r\n* Rerun the server.\r\n* OK, the retry is working.\r\n\r\nIs there a way to resume a WebSocket connection when the client failed to connect to the remote server?\r\n\r\nLink to the github question : https://github.com/spring-projects/spring-graphql/issues/826","title":"How to retry a Spring WebSocketGraphQlClient query","body":"<p>Using Spring Boot 3.2.4 with Spring WebFlux/GraphQL subscription via Websocket.</p>\n<p>Server A exposes a graphqlSubscription, and Server B consumes the subscription.<br />\nThey both use the same components (reactor/netty).</p>\n<p>Steps to Reproduce:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Client side, Initialize the webSocketGraphQlClient\nReactorNettyWebSocketClient reactorNettyWebSocketClient = new ReactorNettyWebSocketClient(HttpClient.create(), build);\nWebSocketGraphQlClient.builder(serverUrl, reactorNettyWebSocketClient).build();\n    \n// Call sample\nwebSocketGraphQlClient\n .document(query)\n .retrieveSubscription(path)\n .toEntity(XXXX.class)\n .retryWhen(Retry.fixedDelay(5, Duration.ofMinutes(1))).blockLast()\n</code></pre>\n<p><strong>Not Working Cases</strong></p>\n<p>Case 1:</p>\n<ul>\n<li>Run the client, do not start the server</li>\n<li>Wait for the 1st RETRY.</li>\n<li><code>GraphQlTransportException =&gt; connection refused.</code></li>\n<li>Run the server.</li>\n<li>Nexts retries will fail with the same reason.</li>\n</ul>\n<p>Case 2:</p>\n<ul>\n<li>Run the server.</li>\n<li>Run the client.</li>\n<li>Communication between both is working fine</li>\n<li>Kill the server.</li>\n<li>Wait for the FIRST RETRY</li>\n<li><code>WebSocketDisconnectedException -&gt; connection is closed or lost.</code></li>\n<li>Wait for the SECOND RETRY.</li>\n<li><code>GraphQlTransportException =&gt; connection refused.</code></li>\n<li>Rerun the server.</li>\n<li>Nexts retries will fail with the same reason.</li>\n</ul>\n<p><strong>Working Case</strong></p>\n<ul>\n<li>Run the server.</li>\n<li>Run the client.</li>\n<li>Communication between both is working fine</li>\n<li>Kill the server.</li>\n<li>Wait for the FIRST RETRY</li>\n<li><code>WebSocketDisconnectedException -&gt; connection is closed or lost.</code></li>\n<li>Rerun the server.</li>\n<li>OK, the retry is working.</li>\n</ul>\n<p>Is there a way to resume a WebSocket connection when the client failed to connect to the remote server?</p>\n<p>Link to the github question : <a href=\"https://github.com/spring-projects/spring-graphql/issues/826\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-graphql/issues/826</a></p>\n"},{"tags":["java","multithreading","performance","libgdx","game-development"],"comments":[{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":0,"creation_date":1695999891,"post_id":77184059,"comment_id":136102076,"body_markdown":"You definitely do not want a second thread. By &quot;tick the game&quot;, do you mean you want to simulate it with a fixed time step instead of just updating it at whatever the framerate of the rendering is? Even games with a fixed time step for the simulation still render as fast as possible, and often have to do some kind of interpolation or extrapolation of the simulation to render animation smoothly without stuttering. It is a complicated subject. [Here](https://gafferongames.com/post/fix_your_timestep/) is a famous article on the subject. The `while(!quit)` loop&#39;s interior in the example there","body":"You definitely do not want a second thread. By &quot;tick the game&quot;, do you mean you want to simulate it with a fixed time step instead of just updating it at whatever the framerate of the rendering is? Even games with a fixed time step for the simulation still render as fast as possible, and often have to do some kind of interpolation or extrapolation of the simulation to render animation smoothly without stuttering. It is a complicated subject. <a href=\"https://gafferongames.com/post/fix_your_timestep/\" rel=\"nofollow noreferrer\">Here</a> is a famous article on the subject. The <code>while(!quit)</code> loop&#39;s interior in the example there"},{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":0,"creation_date":1695999934,"post_id":77184059,"comment_id":136102084,"body_markdown":"is analogous to libGDX&#39;s `render` method. And the `render()` in the example there is analogous to whatever drawing methods you have in your own game.","body":"is analogous to libGDX&#39;s <code>render</code> method. And the <code>render()</code> in the example there is analogous to whatever drawing methods you have in your own game."}],"answers":[{"tags":[],"owner":{"account_id":233979,"reputation":851,"user_id":499837,"accept_rate":60,"display_name":"bornander"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695807426,"creation_date":1695807426,"answer_id":77186282,"question_id":77184059,"body_markdown":"You don&#39;t need another thread for this and it is a bad idea to have one (as you pointed out yourself).\r\n\r\nIf you can make your game-logic delta-time dependent, so that it doesn&#39;t matter how often `render` gets called:\r\n\r\n\t@Override\r\n\tpublic void render() {\r\n\t\tfloat delta = Gdx.graphics.getDeltaTime();\r\n        // Use delta to update you game an appropriate amount\r\n\t}\r\n\r\nIf your particular scenario won&#39;t work with that approach, you can instead just configure **libGDX** to call the `render` method as often as you like.\r\n\r\nIn you launcher class you can configure the foreground FPS, so in the case of a  desktop application that might look like this;\r\n\r\n\tpublic static void main (String[] arg) {\r\n\t\tLwjgl3ApplicationConfiguration config = new Lwjgl3ApplicationConfiguration();\r\n\t\tconfig.setForegroundFPS(20); // Or what ever FPS you want.\r\n\t\tnew Lwjgl3Application(new TanksII(), config);\r\n\t}\r\n\r\n\r\n ","title":"How to create a proper tick method in a lib gdx game","body":"<p>You don't need another thread for this and it is a bad idea to have one (as you pointed out yourself).</p>\n<p>If you can make your game-logic delta-time dependent, so that it doesn't matter how often <code>render</code> gets called:</p>\n<pre><code>@Override\npublic void render() {\n    float delta = Gdx.graphics.getDeltaTime();\n    // Use delta to update you game an appropriate amount\n}\n</code></pre>\n<p>If your particular scenario won't work with that approach, you can instead just configure <strong>libGDX</strong> to call the <code>render</code> method as often as you like.</p>\n<p>In you launcher class you can configure the foreground FPS, so in the case of a  desktop application that might look like this;</p>\n<pre><code>public static void main (String[] arg) {\n    Lwjgl3ApplicationConfiguration config = new Lwjgl3ApplicationConfiguration();\n    config.setForegroundFPS(20); // Or what ever FPS you want.\n    new Lwjgl3Application(new TanksII(), config);\n}\n</code></pre>\n"}],"owner":{"account_id":29390454,"reputation":15,"user_id":22518954,"display_name":"JewishBanana"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77186282,"answer_count":1,"score":1,"last_activity_date":1695807426,"creation_date":1695774291,"question_id":77184059,"body_markdown":"I just started with lib gdx and essentially gave up on using lwgjl for making a game as it is ridicoulosy overcomplicated. The problem is that lib gdx has a built in create() method run once at creation and a render() method run as many times as possible. So there is no built in tick method that I can use to update the game at a set time per second. I want to add one.\r\n\r\nIn my main class I create a new thread with the tick rate method and it works, but the problem is that I can&#39;t utitlize the render() method myself since that is handled already by lib gdx to be called as many times as possible. So I have the thread I create to tick the game and the render method is being run by lib gdx which is I believe run from a second thread. I don&#39;t think its a good idea to tick the game and render from different threads as I believe that the rendering could have issues with updating properly since the read write from the same variables in the object classes would be both read in the tick and render and modified in the tick only. Is this maybe a very good idea to do actually if I handle all the variables visible to the object render methods as volatile since they are only read by the thread? Or is this a terrible idea for performance? I am no sure about the set backs and difference of using a lot of volatile variables rather than regular variables. Here is my main class so far:\r\n\r\n```\r\npublic class TanksII extends ApplicationAdapter implements Runnable {\r\n\t\r\n\tSpriteBatch batch;\r\n\tTexture img;\r\n\t\r\n\tprivate Thread thread;\r\n\tboolean isRunning;\r\n\tvolatile int frames;\r\n\t\r\n\t@Override\r\n\tpublic void create() {\r\n\t\tbatch = new SpriteBatch();\r\n\t\timg = new Texture(&quot;badlogic.jpg&quot;);\r\n\t\t\r\n\t\tstart();\r\n\t}\r\n\tprivate void tick() {\r\n\t\t\r\n\t}\r\n\t@Override\r\n\tpublic void render() {\r\n\t\tScreenUtils.clear(1, 0, 0, 1);\r\n\t\tbatch.begin();\r\n\t\tbatch.draw(img, 0, 0);\r\n\t\tbatch.end();\r\n\t\tframes++;\r\n\t}\r\n\t@Override\r\n\tpublic void dispose() {\r\n\t\tisRunning = false;\r\n\t\tbatch.dispose();\r\n\t\timg.dispose();\r\n\t}\r\n\tprivate synchronized void start() {\r\n\t\tif (isRunning)\r\n\t\t\treturn;\r\n\t\tthread = new Thread(this);\r\n\t\tthread.start();\r\n\t\tisRunning = true;\r\n\t}\r\n\tprivate synchronized void stop() {\r\n\t\tif (!(isRunning))\r\n\t\t\treturn;\r\n\t\ttry {\r\n\t\t\tthread.join();\r\n\t\t} catch (InterruptedException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\tisRunning = false;\r\n\t}\r\n\tpublic void run() {\r\n\t\tlong lastTime = System.nanoTime();\r\n\t\tdouble amountOfTicks = 60.0;\r\n\t\tdouble ns = 1000000000 / amountOfTicks;\r\n\t\tdouble delta = 0;\r\n\t\tlong timer = System.currentTimeMillis();\r\n\t\tint updates = 0;\r\n\t\twhile(isRunning) {\r\n\t\t\tlong now = System.nanoTime();\r\n\t\t\tdelta += (now - lastTime) / ns;\r\n\t\t\tlastTime = now;\r\n\t\t\twhile(delta &gt;= 1) {\r\n\t\t\t\ttick();\r\n\t\t\t\tupdates++;\r\n\t\t\t\tdelta--;\r\n\t\t\t}\r\n\t\t\tif(System.currentTimeMillis() - timer &gt; 1000) {\r\n\t\t\t\ttimer += 1000;\r\n\t\t\t\tSystem.out.println(&quot;FPS: &quot; + frames + &quot; TICKS: &quot; + updates);\r\n\t\t\t\tframes = 0;\r\n\t\t\t\tupdates = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\tstop();\r\n\t}\r\n}\r\n```\r\n","title":"How to create a proper tick method in a lib gdx game","body":"<p>I just started with lib gdx and essentially gave up on using lwgjl for making a game as it is ridicoulosy overcomplicated. The problem is that lib gdx has a built in create() method run once at creation and a render() method run as many times as possible. So there is no built in tick method that I can use to update the game at a set time per second. I want to add one.</p>\n<p>In my main class I create a new thread with the tick rate method and it works, but the problem is that I can't utitlize the render() method myself since that is handled already by lib gdx to be called as many times as possible. So I have the thread I create to tick the game and the render method is being run by lib gdx which is I believe run from a second thread. I don't think its a good idea to tick the game and render from different threads as I believe that the rendering could have issues with updating properly since the read write from the same variables in the object classes would be both read in the tick and render and modified in the tick only. Is this maybe a very good idea to do actually if I handle all the variables visible to the object render methods as volatile since they are only read by the thread? Or is this a terrible idea for performance? I am no sure about the set backs and difference of using a lot of volatile variables rather than regular variables. Here is my main class so far:</p>\n<pre><code>public class TanksII extends ApplicationAdapter implements Runnable {\n    \n    SpriteBatch batch;\n    Texture img;\n    \n    private Thread thread;\n    boolean isRunning;\n    volatile int frames;\n    \n    @Override\n    public void create() {\n        batch = new SpriteBatch();\n        img = new Texture(&quot;badlogic.jpg&quot;);\n        \n        start();\n    }\n    private void tick() {\n        \n    }\n    @Override\n    public void render() {\n        ScreenUtils.clear(1, 0, 0, 1);\n        batch.begin();\n        batch.draw(img, 0, 0);\n        batch.end();\n        frames++;\n    }\n    @Override\n    public void dispose() {\n        isRunning = false;\n        batch.dispose();\n        img.dispose();\n    }\n    private synchronized void start() {\n        if (isRunning)\n            return;\n        thread = new Thread(this);\n        thread.start();\n        isRunning = true;\n    }\n    private synchronized void stop() {\n        if (!(isRunning))\n            return;\n        try {\n            thread.join();\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        isRunning = false;\n    }\n    public void run() {\n        long lastTime = System.nanoTime();\n        double amountOfTicks = 60.0;\n        double ns = 1000000000 / amountOfTicks;\n        double delta = 0;\n        long timer = System.currentTimeMillis();\n        int updates = 0;\n        while(isRunning) {\n            long now = System.nanoTime();\n            delta += (now - lastTime) / ns;\n            lastTime = now;\n            while(delta &gt;= 1) {\n                tick();\n                updates++;\n                delta--;\n            }\n            if(System.currentTimeMillis() - timer &gt; 1000) {\n                timer += 1000;\n                System.out.println(&quot;FPS: &quot; + frames + &quot; TICKS: &quot; + updates);\n                frames = 0;\n                updates = 0;\n            }\n        }\n        stop();\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-mvc","spring-restcontroller","mockmvc"],"comments":[{"owner":{"account_id":7226774,"reputation":19717,"user_id":5515060,"accept_rate":100,"display_name":"Lino"},"score":0,"creation_date":1666361315,"post_id":74154746,"comment_id":130925628,"body_markdown":"How exactly are you calling that endpoint in mock mvc? I don&#39;t think this has anything to do with your controller and mapping, but rather with your test code","body":"How exactly are you calling that endpoint in mock mvc? I don&#39;t think this has anything to do with your controller and mapping, but rather with your test code"},{"owner":{"account_id":1223835,"reputation":75878,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1666361602,"post_id":74154746,"comment_id":130925754,"body_markdown":"Why do you have a `charset` on an `octet-stream`?","body":"Why do you have a <code>charset</code> on an <code>octet-stream</code>?"},{"owner":{"account_id":1022944,"reputation":55,"user_id":1032836,"display_name":"user1032836"},"score":0,"creation_date":1666397054,"post_id":74154746,"comment_id":130935100,"body_markdown":"Forgot to mention the test call to original message. Added now. Dont know why mockmvc adds charset there. I didnt ask for that ;)","body":"Forgot to mention the test call to original message. Added now. Dont know why mockmvc adds charset there. I didnt ask for that ;)"}],"answers":[{"comments":[{"owner":{"account_id":1022944,"reputation":55,"user_id":1032836,"display_name":"user1032836"},"score":0,"creation_date":1666396877,"post_id":74157859,"comment_id":130935080,"body_markdown":"I set content type to `application/octet-stream` when calling mockmvc. And log shows that in the post call the `Content-Type` header is set to  `application/octet-stream`.","body":"I set content type to <code>application&#47;octet-stream</code> when calling mockmvc. And log shows that in the post call the <code>Content-Type</code> header is set to  <code>application&#47;octet-stream</code>."},{"owner":{"account_id":10693447,"reputation":878,"user_id":7871511,"display_name":"Rohit Agarwal"},"score":0,"creation_date":1666424373,"post_id":74157859,"comment_id":130937741,"body_markdown":"I got the issue and updated my answer. I hope it helps","body":"I got the issue and updated my answer. I hope it helps"},{"owner":{"account_id":1022944,"reputation":55,"user_id":1032836,"display_name":"user1032836"},"score":1,"creation_date":1666469768,"post_id":74157859,"comment_id":130946304,"body_markdown":"Using HttpServletRequest instead of RequestEntity&lt;InputStream&gt; fixes the issue. Thanks!!","body":"Using HttpServletRequest instead of RequestEntity&lt;InputStream&gt; fixes the issue. Thanks!!"}],"tags":[],"owner":{"account_id":10693447,"reputation":878,"user_id":7871511,"display_name":"Rohit Agarwal"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1685725565,"creation_date":1666377049,"answer_id":74157859,"question_id":74154746,"body_markdown":"I have analysed this issue and got to know that issue is in this method.\r\n\r\n```java\r\n  @PostMapping(path=&quot;/parse&quot;, consumes = {MediaType.APPLICATION_OCTET_STREAM_VALUE})\r\n    public String parse(RequestEntity&lt;InputStream&gt; entity) {\r\n        return service.parse(entity.getBody());\r\n    }\r\n```\r\n\r\nHere method parameter is of type ```RequestEntity&lt;InputStream&gt;``` it should be ```HttpServletRequest```\r\n\r\nSo here is the fix.\r\n\r\n```java\r\n    @PostMapping(value = &quot;/upload&quot;,\r\n            consumes = MediaType.APPLICATION_OCTET_STREAM_VALUE)\r\n    public String demo(HttpServletRequest httpServletRequest) {\r\n\r\n        try (ServletInputStream inputStream = httpServletRequest.getInputStream()) {\r\n            new BufferedReader(new InputStreamReader(inputStream, UTF_8))\r\n                    .lines().forEach(System.out::println);\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n\r\n        return &quot;Hello World&quot;;\r\n    }\r\n```\r\n\r\n**Test Case**\r\n\r\n```java\r\n    @Autowired\r\n    private MockMvc mockMvc;\r\n\r\n    @Test\r\n    public void shouldTestBinaryFileUpload() throws Exception {\r\n        mockMvc\r\n                .perform(MockMvcRequestBuilders\r\n                        .post(&quot;/upload&quot;)\r\n                        .content(&quot;Hello&quot;.getBytes())\r\n                        .contentType(MediaType.APPLICATION_OCTET_STREAM))\r\n                .andExpect(MockMvcResultMatchers\r\n                        .status()\r\n                        .isOk())\r\n                .andExpect(MockMvcResultMatchers\r\n                        .content()\r\n                        .bytes(&quot;Hello World&quot;.getBytes()));\r\n    }\r\n\r\n```\r\n","title":"Cant have RestController to accept application/octet-stream","body":"<p>I have analysed this issue and got to know that issue is in this method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>  @PostMapping(path=&quot;/parse&quot;, consumes = {MediaType.APPLICATION_OCTET_STREAM_VALUE})\n    public String parse(RequestEntity&lt;InputStream&gt; entity) {\n        return service.parse(entity.getBody());\n    }\n</code></pre>\n<p>Here method parameter is of type <code>RequestEntity&lt;InputStream&gt;</code> it should be <code>HttpServletRequest</code></p>\n<p>So here is the fix.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @PostMapping(value = &quot;/upload&quot;,\n            consumes = MediaType.APPLICATION_OCTET_STREAM_VALUE)\n    public String demo(HttpServletRequest httpServletRequest) {\n\n        try (ServletInputStream inputStream = httpServletRequest.getInputStream()) {\n            new BufferedReader(new InputStreamReader(inputStream, UTF_8))\n                    .lines().forEach(System.out::println);\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n\n        return &quot;Hello World&quot;;\n    }\n</code></pre>\n<p><strong>Test Case</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Autowired\n    private MockMvc mockMvc;\n\n    @Test\n    public void shouldTestBinaryFileUpload() throws Exception {\n        mockMvc\n                .perform(MockMvcRequestBuilders\n                        .post(&quot;/upload&quot;)\n                        .content(&quot;Hello&quot;.getBytes())\n                        .contentType(MediaType.APPLICATION_OCTET_STREAM))\n                .andExpect(MockMvcResultMatchers\n                        .status()\n                        .isOk())\n                .andExpect(MockMvcResultMatchers\n                        .content()\n                        .bytes(&quot;Hello World&quot;.getBytes()));\n    }\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":74193,"reputation":4313,"user_id":213292,"accept_rate":40,"display_name":"JJ Roman"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695807078,"creation_date":1695807078,"answer_id":77186245,"question_id":74154746,"body_markdown":"I was getting same error and fixed it by adding ocet stream converter that was missing from mvc config.\r\n\r\n```java\r\n@Configuration\r\npublic class WebMvcConfig implements WebMvcConfigurer { \r\n  @Override \r\n  public void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters){\r\n    convertes.add(new ByteArrayHttpMessageConverter());\r\n  }\r\n}\r\n``` ","title":"Cant have RestController to accept application/octet-stream","body":"<p>I was getting same error and fixed it by adding ocet stream converter that was missing from mvc config.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class WebMvcConfig implements WebMvcConfigurer { \n  @Override \n  public void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters){\n    convertes.add(new ByteArrayHttpMessageConverter());\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":1022944,"reputation":55,"user_id":1032836,"display_name":"user1032836"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4852,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74157859,"answer_count":2,"score":0,"last_activity_date":1695807078,"creation_date":1666360591,"question_id":74154746,"body_markdown":"I have a spring boot application with rest controller that has to accept binary stream at post endpoint and do the things with it.\r\n\r\nSo i have:\r\n```\r\n    @PostMapping(path=&quot;/parse&quot;, consumes = {MediaType.APPLICATION_OCTET_STREAM_VALUE})\r\n    public String parse(RequestEntity&lt;InputStream&gt; entity) {\r\n        return service.parse(entity.getBody());\r\n    }\r\n\r\n```\r\nWhen i try to test it with MockMvc i get org.springframework.web.HttpMediaTypeNotSupportedException.\r\nI see in log:\r\nRequest:\r\n```\r\nMockHttpServletRequest:\r\n      HTTP Method = POST\r\n      Request URI = /parse\r\n       Parameters = {}\r\n          Headers = [Content-Type:&quot;application/octet-stream;charset=UTF-8&quot;, Content-Length:&quot;2449&quot;]\r\n             Body = ...skipped unreadable binary data...\r\n    Session Attrs = {}\r\n\r\n```\r\nResponse:\r\n```\r\nMockHttpServletResponse:\r\n           Status = 415\r\n    Error message = null\r\n          Headers = [Vary:&quot;Origin&quot;, &quot;Access-Control-Request-Method&quot;, &quot;Access-Control-Request-Headers&quot;, Accept:&quot;application/json, application/*+json&quot;, X-Content-Type-Options:&quot;nosniff&quot;, X-XSS-Protection:&quot;1; mode=block&quot;, Cache-Control:&quot;no-cache, no-store, max-age=0, must-revalidate&quot;, Pragma:&quot;no-cache&quot;, Expires:&quot;0&quot;, X-Frame-Options:&quot;DENY&quot;]\r\n     Content type = null\r\n             Body = \r\n    Forwarded URL = null\r\n   Redirected URL = null\r\n          Cookies = []\r\n```\r\nI tried to add explicit header: \r\n```\r\n    @PostMapping(path=&quot;/parse&quot;, consumes = {MediaType.APPLICATION_OCTET_STREAM_VALUE},\r\n            headers = &quot;Accept=application/octet-stream&quot;)\r\n```\r\nDoes not help.\r\nThe testing call is:\r\n```\r\n        mvc.perform(post(&quot;/parse&quot;)                       \r\n                        .contentType(MediaType.APPLICATION_OCTET_STREAM)\r\n                        .content(bytes)\r\n                ).andDo(print())\r\n                .andExpect(status().isOk());\r\n```\r\nHow can i make it work without going to multipart-form?\r\n","title":"Cant have RestController to accept application/octet-stream","body":"<p>I have a spring boot application with rest controller that has to accept binary stream at post endpoint and do the things with it.</p>\n<p>So i have:</p>\n<pre><code>    @PostMapping(path=&quot;/parse&quot;, consumes = {MediaType.APPLICATION_OCTET_STREAM_VALUE})\n    public String parse(RequestEntity&lt;InputStream&gt; entity) {\n        return service.parse(entity.getBody());\n    }\n\n</code></pre>\n<p>When i try to test it with MockMvc i get org.springframework.web.HttpMediaTypeNotSupportedException.\nI see in log:\nRequest:</p>\n<pre><code>MockHttpServletRequest:\n      HTTP Method = POST\n      Request URI = /parse\n       Parameters = {}\n          Headers = [Content-Type:&quot;application/octet-stream;charset=UTF-8&quot;, Content-Length:&quot;2449&quot;]\n             Body = ...skipped unreadable binary data...\n    Session Attrs = {}\n\n</code></pre>\n<p>Response:</p>\n<pre><code>MockHttpServletResponse:\n           Status = 415\n    Error message = null\n          Headers = [Vary:&quot;Origin&quot;, &quot;Access-Control-Request-Method&quot;, &quot;Access-Control-Request-Headers&quot;, Accept:&quot;application/json, application/*+json&quot;, X-Content-Type-Options:&quot;nosniff&quot;, X-XSS-Protection:&quot;1; mode=block&quot;, Cache-Control:&quot;no-cache, no-store, max-age=0, must-revalidate&quot;, Pragma:&quot;no-cache&quot;, Expires:&quot;0&quot;, X-Frame-Options:&quot;DENY&quot;]\n     Content type = null\n             Body = \n    Forwarded URL = null\n   Redirected URL = null\n          Cookies = []\n</code></pre>\n<p>I tried to add explicit header:</p>\n<pre><code>    @PostMapping(path=&quot;/parse&quot;, consumes = {MediaType.APPLICATION_OCTET_STREAM_VALUE},\n            headers = &quot;Accept=application/octet-stream&quot;)\n</code></pre>\n<p>Does not help.\nThe testing call is:</p>\n<pre><code>        mvc.perform(post(&quot;/parse&quot;)                       \n                        .contentType(MediaType.APPLICATION_OCTET_STREAM)\n                        .content(bytes)\n                ).andDo(print())\n                .andExpect(status().isOk());\n</code></pre>\n<p>How can i make it work without going to multipart-form?</p>\n"},{"tags":["java","maven","intellij-idea","build"],"answers":[{"comments":[{"owner":{"account_id":3366819,"reputation":2646,"user_id":2827181,"display_name":"Marc Le Bihan"},"score":0,"creation_date":1695710023,"post_id":77177411,"comment_id":136056833,"body_markdown":"Does it mean that the `jar` to debug must have a main class? Not sure that any of this project carries one. Will I need to find the `jars` that must be in the classpath of the `jar` I&#39;m willing to run? For example: `spark-sql.jar` could need `spark-core.jar`, etc.? And how to run a test?","body":"Does it mean that the <code>jar</code> to debug must have a main class? Not sure that any of this project carries one. Will I need to find the <code>jars</code> that must be in the classpath of the <code>jar</code> I&#39;m willing to run? For example: <code>spark-sql.jar</code> could need <code>spark-core.jar</code>, etc.? And how to run a test?"}],"tags":[],"owner":{"account_id":25686844,"reputation":189,"user_id":19448783,"display_name":"HHHHNNNNNNIIIII"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695708972,"creation_date":1695708972,"answer_id":77177411,"question_id":77177292,"body_markdown":"Idea just resolves maven dependencies and compile in its [own way][1]. So if some executions of maven goal is a must for compiling the project, it may cause idea build fail. Maybe you can [run a package jar directly][2] for debug as a workaround. Or figure out what maven goal should be executed.\r\n\r\n\r\n  [1]: https://www.jetbrains.com/help/idea/compiling-applications.html\r\n  [2]: https://www.jetbrains.com/help/idea/compiling-applications.html#run_packaged_jar","title":"Ask IntelliJ to follow a Maven POM to build the project internally (Build Project, for testing, debugging) and not its own procedure, when it fails?","body":"<p>Idea just resolves maven dependencies and compile in its <a href=\"https://www.jetbrains.com/help/idea/compiling-applications.html\" rel=\"nofollow noreferrer\">own way</a>. So if some executions of maven goal is a must for compiling the project, it may cause idea build fail. Maybe you can <a href=\"https://www.jetbrains.com/help/idea/compiling-applications.html#run_packaged_jar\" rel=\"nofollow noreferrer\">run a package jar directly</a> for debug as a workaround. Or figure out what maven goal should be executed.</p>\n"},{"comments":[{"owner":{"account_id":3366819,"reputation":2646,"user_id":2827181,"display_name":"Marc Le Bihan"},"score":0,"creation_date":1695810090,"post_id":77186227,"comment_id":136072963,"body_markdown":"Thanks! It&#39;s exactly what I was looking for.","body":"Thanks! It&#39;s exactly what I was looking for."}],"tags":[],"owner":{"account_id":28411028,"reputation":416,"user_id":21734429,"display_name":"romanv-jb"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695806979,"creation_date":1695806979,"answer_id":77186227,"question_id":77177292,"body_markdown":"Options that you have listed are processed by IDEA&#39;s native Build System.\r\nThe native Build System is intended to be as close as possible to Maven, but there might be discrepancies for the Projects with more advanced build logic and/or structure.\r\n\r\n\r\nFor Maven-based Projects it is best to use options available from the [Maven Tool Window][1] and Maven&#39;s [Run/Debug Configurations][2].\r\n\r\nIf you are still experiencing issues, enable &quot;[Delegate IDE build/run actions to Maven][3]&quot; option from `Settings / Preferences -&gt; Build, Execution, Deployment -&gt; Build Tools -&gt; Maven -&gt; Runner`.\r\n\r\n\r\n  [1]: https://www.jetbrains.com/help/idea/maven-projects-tool-window.html\r\n  [2]: https://www.jetbrains.com/help/idea/run-debug-configuration-maven.html\r\n  [3]: https://www.jetbrains.com/help/idea/maven-runner.html","title":"Ask IntelliJ to follow a Maven POM to build the project internally (Build Project, for testing, debugging) and not its own procedure, when it fails?","body":"<p>Options that you have listed are processed by IDEA's native Build System.\nThe native Build System is intended to be as close as possible to Maven, but there might be discrepancies for the Projects with more advanced build logic and/or structure.</p>\n<p>For Maven-based Projects it is best to use options available from the <a href=\"https://www.jetbrains.com/help/idea/maven-projects-tool-window.html\" rel=\"nofollow noreferrer\">Maven Tool Window</a> and Maven's <a href=\"https://www.jetbrains.com/help/idea/run-debug-configuration-maven.html\" rel=\"nofollow noreferrer\">Run/Debug Configurations</a>.</p>\n<p>If you are still experiencing issues, enable &quot;<a href=\"https://www.jetbrains.com/help/idea/maven-runner.html\" rel=\"nofollow noreferrer\">Delegate IDE build/run actions to Maven</a>&quot; option from <code>Settings / Preferences -&gt; Build, Execution, Deployment -&gt; Build Tools -&gt; Maven -&gt; Runner</code>.</p>\n"}],"owner":{"account_id":3366819,"reputation":2646,"user_id":2827181,"display_name":"Marc Le Bihan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":77186227,"answer_count":2,"score":-1,"last_activity_date":1695806979,"creation_date":1695707317,"question_id":77177292,"body_markdown":"At work, at home, on open source projects, I often face the same trouble:\r\n\r\n1. I download a project. I compile it from a command line with _Maven_ and succeed.\r\n\r\n2. I open _IntelliJ_: it detects a _Maven_ project, solve it, and show me its sources without errors.\r\n\r\n3. Then I ask it to _Build Project_. And it fails with a message depicting a trouble that doesn&#39;t exist.  \r\n\r\nThen, I can&#39;t :\r\n\r\n   - Start a debug session\r\n   - Run a single test or test class from the IDE\r\n\r\nBecause _IntelliJ_ wants to build the project its own way first, but is failing to do so.\r\n\r\nHow to set _IntelliJ_ to use only _Maven_ and a specified pom to build/refresh the project, when it needs so? And not to attempt another way, that doesn&#39;t succeed?\r\n\r\n---\r\n\r\n(*) The project I&#39;m attempting to build with the _Build Project_ of _IntelliJ_ is https://github.com/apache/spark/tree/branch-3.5 that compiles with _Maven_ in a command line, is shown without errors when opened with _IntelliJ_, and fail to build with _Build Project_:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nBecause it attempts to do anything that isn&#39;t asked in any pom.  \r\nThe mentioned `import` does exist, of course.\r\n\r\n---\r\n\r\nTo reproduce: \r\n\r\n1. Download https://github.com/apache/spark/tree/branch-3.5\r\n2. Compile it with _Maven_: it compiles (skip tests, if you wish to go faster)\r\n3. Then, with _IntelliJ_, attempt a _Build Project_ or to run a test, or to start a debug. It will fail.\r\n\r\n  [1]: https://i.stack.imgur.com/kza4R.png","title":"Ask IntelliJ to follow a Maven POM to build the project internally (Build Project, for testing, debugging) and not its own procedure, when it fails?","body":"<p>At work, at home, on open source projects, I often face the same trouble:</p>\n<ol>\n<li><p>I download a project. I compile it from a command line with <em>Maven</em> and succeed.</p>\n</li>\n<li><p>I open <em>IntelliJ</em>: it detects a <em>Maven</em> project, solve it, and show me its sources without errors.</p>\n</li>\n<li><p>Then I ask it to <em>Build Project</em>. And it fails with a message depicting a trouble that doesn't exist.</p>\n</li>\n</ol>\n<p>Then, I can't :</p>\n<ul>\n<li>Start a debug session</li>\n<li>Run a single test or test class from the IDE</li>\n</ul>\n<p>Because <em>IntelliJ</em> wants to build the project its own way first, but is failing to do so.</p>\n<p>How to set <em>IntelliJ</em> to use only <em>Maven</em> and a specified pom to build/refresh the project, when it needs so? And not to attempt another way, that doesn't succeed?</p>\n<hr />\n<p>(*) The project I'm attempting to build with the <em>Build Project</em> of <em>IntelliJ</em> is <a href=\"https://github.com/apache/spark/tree/branch-3.5\" rel=\"nofollow noreferrer\">https://github.com/apache/spark/tree/branch-3.5</a> that compiles with <em>Maven</em> in a command line, is shown without errors when opened with <em>IntelliJ</em>, and fail to build with <em>Build Project</em>:</p>\n<p><a href=\"https://i.stack.imgur.com/kza4R.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kza4R.png\" alt=\"enter image description here\" /></a></p>\n<p>Because it attempts to do anything that isn't asked in any pom.<br />\nThe mentioned <code>import</code> does exist, of course.</p>\n<hr />\n<p>To reproduce:</p>\n<ol>\n<li>Download <a href=\"https://github.com/apache/spark/tree/branch-3.5\" rel=\"nofollow noreferrer\">https://github.com/apache/spark/tree/branch-3.5</a></li>\n<li>Compile it with <em>Maven</em>: it compiles (skip tests, if you wish to go faster)</li>\n<li>Then, with <em>IntelliJ</em>, attempt a <em>Build Project</em> or to run a test, or to start a debug. It will fail.</li>\n</ol>\n"},{"tags":["java","spring-boot","kotlin","karate"],"owner":{"account_id":9744856,"reputation":985,"user_id":7225171,"accept_rate":67,"display_name":"Serob_b"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1695704231,"answer_count":0,"score":1,"last_activity_date":1695806154,"creation_date":1695659382,"question_id":77174339,"body_markdown":"I&#39;m running 2 separate tests each of which with its feature files (suppose I have another `run2()` method with the same settings except `&quot;features-dir&quot;`):\r\n  \r\n    @Test\r\n    fun run1() {\r\n        val reportDir = &quot;build/report-dir&quot;\r\n        val results: Results = Runner\r\n            .path(&quot;features-dir&quot;)\r\n            .debugMode(true)\r\n            .outputCucumberJson(true)\r\n            .reportDir(reportDir)\r\n             ....\r\n            .parallel(1)\r\n    }\r\n\r\nWhen I run all the test (`run1()` and `run2()`) I get the report of the last run only, the first one is lost due to overwrite. What I need is to have one report with the information (features) of two runs. Is that possible?","title":"One karate report for all tests","body":"<p>I'm running 2 separate tests each of which with its feature files (suppose I have another <code>run2()</code> method with the same settings except <code>&quot;features-dir&quot;</code>):</p>\n<pre><code>@Test\nfun run1() {\n    val reportDir = &quot;build/report-dir&quot;\n    val results: Results = Runner\n        .path(&quot;features-dir&quot;)\n        .debugMode(true)\n        .outputCucumberJson(true)\n        .reportDir(reportDir)\n         ....\n        .parallel(1)\n}\n</code></pre>\n<p>When I run all the test (<code>run1()</code> and <code>run2()</code>) I get the report of the last run only, the first one is lost due to overwrite. What I need is to have one report with the information (features) of two runs. Is that possible?</p>\n"},{"tags":["java","spring","spring-boot","ehcache","ehcache-3"],"answers":[{"tags":[],"owner":{"account_id":13022992,"reputation":204,"user_id":9411757,"display_name":"tehmas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695388041,"creation_date":1695388041,"answer_id":77157886,"question_id":77157770,"body_markdown":"The problem was ConfigManager needs to be a @Component and should be injected into ServiceFacadeImpl.\r\n\r\nConfigManager:\r\n\r\n    package com.demo.example.ehcache;\r\n    \r\n    import org.springframework.cache.annotation.Cacheable;\r\n    \r\n    @Component\r\n    public class ConfigManager {\r\n        public ConfigManager() {\r\n        }\r\n    \r\n        @Cacheable(value = &quot;configCache&quot;, key=&quot;#number&quot;)\r\n        public int getNumber(int number) {\r\n            return number;\r\n        }\r\n    }\r\n\r\nServiceFacadeImpl:\r\n\r\n    @Component\r\n    public class ServiceFacadeImpl { \r\n      private final ConfigManager ConfigManager;\r\n    \r\n      ServiceFacadeImpl(ConfigManager configManager)\r\n      {\r\n        this.ConfigManager = configManager;\r\n      }\r\n     \r\n      @Override\r\n      public Integer getNumber() throws UpfrontException {\r\n        configManager.getNumber(1); //hard coded 1 here\r\n      }\r\n    }\r\n\r\n","title":"ehcache 3 not working with Sprint Boot 1.5.22","body":"<p>The problem was ConfigManager needs to be a @Component and should be injected into ServiceFacadeImpl.</p>\n<p>ConfigManager:</p>\n<pre><code>package com.demo.example.ehcache;\n\nimport org.springframework.cache.annotation.Cacheable;\n\n@Component\npublic class ConfigManager {\n    public ConfigManager() {\n    }\n\n    @Cacheable(value = &quot;configCache&quot;, key=&quot;#number&quot;)\n    public int getNumber(int number) {\n        return number;\n    }\n}\n</code></pre>\n<p>ServiceFacadeImpl:</p>\n<pre><code>@Component\npublic class ServiceFacadeImpl { \n  private final ConfigManager ConfigManager;\n\n  ServiceFacadeImpl(ConfigManager configManager)\n  {\n    this.ConfigManager = configManager;\n  }\n \n  @Override\n  public Integer getNumber() throws UpfrontException {\n    configManager.getNumber(1); //hard coded 1 here\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":13022992,"reputation":204,"user_id":9411757,"display_name":"tehmas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695805899,"creation_date":1695387047,"question_id":77157770,"body_markdown":"I&#39;m new to Java and SpringBoot.\r\n\r\nehcache.xml file in `resources`:\r\n\r\n    &lt;config xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n            xmlns=&quot;http://www.ehcache.org/v3&quot;\r\n            xmlns:jsr107=&quot;http://www.ehcache.org/v3/jsr107&quot;\r\n            xsi:schemaLocation=&quot;\r\n                http://www.ehcache.org/v3 http://www.ehcache.org/schema/ehcache-core-3.0.xsd\r\n                http://www.ehcache.org/v3/jsr107 http://www.ehcache.org/schema/ehcache-107-ext-3.0.xsd&quot;&gt;\r\n    \r\n        &lt;cache alias=&quot;configCache&quot;&gt;\r\n            &lt;key-type&gt;java.lang.Integer&lt;/key-type&gt;\r\n            &lt;value-type&gt;java.lang.Integer&lt;/value-type&gt;\r\n            &lt;expiry&gt;\r\n                &lt;ttl unit=&quot;minutes&quot;&gt;60&lt;/ttl&gt;\r\n            &lt;/expiry&gt;\r\n    \r\n            &lt;listeners&gt;\r\n                &lt;listener&gt;\r\n                    &lt;class&gt;com.demo.example.ehcache.CacheEventLogger&lt;/class&gt;\r\n                    &lt;event-firing-mode&gt;ASYNCHRONOUS&lt;/event-firing-mode&gt;\r\n                    &lt;event-ordering-mode&gt;UNORDERED&lt;/event-ordering-mode&gt;\r\n                    &lt;events-to-fire-on&gt;CREATED&lt;/events-to-fire-on&gt;\r\n                    &lt;events-to-fire-on&gt;EXPIRED&lt;/events-to-fire-on&gt;\r\n                &lt;/listener&gt;\r\n            &lt;/listeners&gt;\r\n    \r\n            &lt;resources&gt;\r\n                &lt;heap unit=&quot;entries&quot;&gt;2&lt;/heap&gt;\r\n                &lt;offheap unit=&quot;MB&quot;&gt;10&lt;/offheap&gt;\r\n            &lt;/resources&gt;\r\n        &lt;/cache&gt;\r\n    \r\n    &lt;/config&gt;\r\n\r\nThe following line in `application.properties`:\r\n\r\n    spring.cache.jcache.config=classpath:ehcache.xml\r\n\r\nCacheEventLogger:\r\n\r\n    package com.demo.example.ehcache;\r\n    \r\n    import com.github.structlog4j.ILogger;\r\n    import com.github.structlog4j.SLoggerFactory;\r\n    import org.ehcache.event.CacheEvent;\r\n    import org.ehcache.event.CacheEventListener;\r\n    \r\n    public class CacheEventLogger implements CacheEventListener&lt;Object, Object&gt; {\r\n        private final ILogger log = SLoggerFactory.getLogger(CacheEventLogger.class);\r\n    \r\n        @Override\r\n        public void onEvent(CacheEvent&lt;? extends Object, ? extends Object&gt; cacheEvent) {\r\n            log.info(&quot;Cache event {} for item with key {}. Old value = {}, New value = {}&quot;,\r\n                    cacheEvent.getType(),\r\n                    cacheEvent.getKey(),\r\n                    cacheEvent.getOldValue(),\r\n                    cacheEvent.getNewValue());\r\n        }\r\n    }\r\n\r\nConfigManager.Java:\r\n\r\n    package com.demo.example.ehcache;\r\n    \r\n    import org.springframework.cache.annotation.Cacheable;\r\n    \r\n    public class ConfigManager {\r\n        public ConfigManager() {\r\n        }\r\n    \r\n        @Cacheable(value = &quot;configCache&quot;, key=&quot;#number&quot;)\r\n        public int getNumber(int number) {\r\n            return number;\r\n        }\r\n    }\r\n\r\nCachingConfig.java:\r\n\r\n    package com.demo.example.configuration;\r\n    \r\n    import org.springframework.cache.annotation.EnableCaching;\r\n    import org.springframework.context.annotation.Configuration;\r\n    \r\n    \r\n    @Configuration\r\n    @EnableCaching\r\n    public class CachingConfig {\r\n    \r\n    }\r\n\r\nfollowing dependencies in pom.xml:\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.ehcache&lt;/groupId&gt;\r\n            &lt;artifactId&gt;ehcache&lt;/artifactId&gt;\r\n            &lt;version&gt;3.8.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;javax.cache&lt;/groupId&gt;\r\n            &lt;artifactId&gt;cache-api&lt;/artifactId&gt;\r\n            &lt;version&gt;1.1.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-cache&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\nServiceFacadeImpl.java:\r\n\r\n    @Component\r\n    public class ServiceFacadeImpl { \r\n      private final ConfigManager ConfigManager;\r\n    \r\n      ServiceFacadeImpl()\r\n      {\r\n        this.ConfigManager = new ConfigManager();\r\n      }\r\n     \r\n      @Override\r\n      public Integer getNumber() throws UpfrontException {\r\n        configManager.getNumber(1); //hard coded 1 here\r\n      }\r\n    }\r\n\r\nI&#39;m always passing a fixed Integer value of 1 in getNumber but it is always executing the function. Why isn&#39;t the cache working?","title":"ehcache 3 not working with Sprint Boot 1.5.22","body":"<p>I'm new to Java and SpringBoot.</p>\n<p>ehcache.xml file in <code>resources</code>:</p>\n<pre><code>&lt;config xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n        xmlns=&quot;http://www.ehcache.org/v3&quot;\n        xmlns:jsr107=&quot;http://www.ehcache.org/v3/jsr107&quot;\n        xsi:schemaLocation=&quot;\n            http://www.ehcache.org/v3 http://www.ehcache.org/schema/ehcache-core-3.0.xsd\n            http://www.ehcache.org/v3/jsr107 http://www.ehcache.org/schema/ehcache-107-ext-3.0.xsd&quot;&gt;\n\n    &lt;cache alias=&quot;configCache&quot;&gt;\n        &lt;key-type&gt;java.lang.Integer&lt;/key-type&gt;\n        &lt;value-type&gt;java.lang.Integer&lt;/value-type&gt;\n        &lt;expiry&gt;\n            &lt;ttl unit=&quot;minutes&quot;&gt;60&lt;/ttl&gt;\n        &lt;/expiry&gt;\n\n        &lt;listeners&gt;\n            &lt;listener&gt;\n                &lt;class&gt;com.demo.example.ehcache.CacheEventLogger&lt;/class&gt;\n                &lt;event-firing-mode&gt;ASYNCHRONOUS&lt;/event-firing-mode&gt;\n                &lt;event-ordering-mode&gt;UNORDERED&lt;/event-ordering-mode&gt;\n                &lt;events-to-fire-on&gt;CREATED&lt;/events-to-fire-on&gt;\n                &lt;events-to-fire-on&gt;EXPIRED&lt;/events-to-fire-on&gt;\n            &lt;/listener&gt;\n        &lt;/listeners&gt;\n\n        &lt;resources&gt;\n            &lt;heap unit=&quot;entries&quot;&gt;2&lt;/heap&gt;\n            &lt;offheap unit=&quot;MB&quot;&gt;10&lt;/offheap&gt;\n        &lt;/resources&gt;\n    &lt;/cache&gt;\n\n&lt;/config&gt;\n</code></pre>\n<p>The following line in <code>application.properties</code>:</p>\n<pre><code>spring.cache.jcache.config=classpath:ehcache.xml\n</code></pre>\n<p>CacheEventLogger:</p>\n<pre><code>package com.demo.example.ehcache;\n\nimport com.github.structlog4j.ILogger;\nimport com.github.structlog4j.SLoggerFactory;\nimport org.ehcache.event.CacheEvent;\nimport org.ehcache.event.CacheEventListener;\n\npublic class CacheEventLogger implements CacheEventListener&lt;Object, Object&gt; {\n    private final ILogger log = SLoggerFactory.getLogger(CacheEventLogger.class);\n\n    @Override\n    public void onEvent(CacheEvent&lt;? extends Object, ? extends Object&gt; cacheEvent) {\n        log.info(&quot;Cache event {} for item with key {}. Old value = {}, New value = {}&quot;,\n                cacheEvent.getType(),\n                cacheEvent.getKey(),\n                cacheEvent.getOldValue(),\n                cacheEvent.getNewValue());\n    }\n}\n</code></pre>\n<p>ConfigManager.Java:</p>\n<pre><code>package com.demo.example.ehcache;\n\nimport org.springframework.cache.annotation.Cacheable;\n\npublic class ConfigManager {\n    public ConfigManager() {\n    }\n\n    @Cacheable(value = &quot;configCache&quot;, key=&quot;#number&quot;)\n    public int getNumber(int number) {\n        return number;\n    }\n}\n</code></pre>\n<p>CachingConfig.java:</p>\n<pre><code>package com.demo.example.configuration;\n\nimport org.springframework.cache.annotation.EnableCaching;\nimport org.springframework.context.annotation.Configuration;\n\n\n@Configuration\n@EnableCaching\npublic class CachingConfig {\n\n}\n</code></pre>\n<p>following dependencies in pom.xml:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.ehcache&lt;/groupId&gt;\n        &lt;artifactId&gt;ehcache&lt;/artifactId&gt;\n        &lt;version&gt;3.8.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.cache&lt;/groupId&gt;\n        &lt;artifactId&gt;cache-api&lt;/artifactId&gt;\n        &lt;version&gt;1.1.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-cache&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>ServiceFacadeImpl.java:</p>\n<pre><code>@Component\npublic class ServiceFacadeImpl { \n  private final ConfigManager ConfigManager;\n\n  ServiceFacadeImpl()\n  {\n    this.ConfigManager = new ConfigManager();\n  }\n \n  @Override\n  public Integer getNumber() throws UpfrontException {\n    configManager.getNumber(1); //hard coded 1 here\n  }\n}\n</code></pre>\n<p>I'm always passing a fixed Integer value of 1 in getNumber but it is always executing the function. Why isn't the cache working?</p>\n"},{"tags":["java","json","jmeter","assertion"],"answers":[{"tags":[],"owner":{"account_id":3460456,"reputation":162758,"user_id":2897748,"display_name":"Dmitri T"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1669144532,"creation_date":1669144532,"answer_id":74537909,"question_id":74536638,"body_markdown":"It&#39;s a side-effect of the bug fix for the JMeter Issue [5543][1], you might want to [report it][2] \r\n\r\nLooking into [this line][3]:\r\n\r\n    Object expected = JSONValue.parse(getExpectedValue());\r\n\r\nthere is no possibility to revert to the previous behaviour via property. You might want to tick &quot;Match as regular expression&quot; box:\r\n\r\n[![enter image description here][4]][4]\r\n\r\nhowever it might break more complex assertions especially if they contain [meta characters][5] \r\n\r\nSo you either need to downgrade and wait for the decision or scan assertion failure messages using [JSR223 Assertion and Groovy language][6] and set the assertion result as passed if &quot;expected&quot; and &quot;found&quot; values are equal \r\n\r\n\r\n  [1]: https://github.com/apache/jmeter/issues/5534\r\n  [2]: https://jmeter.apache.org/issues.html\r\n  [3]: https://github.com/apache/jmeter/blob/rel/v5.5/src/components/src/main/java/org/apache/jmeter/assertions/JSONPathAssertion.java#L177\r\n  [4]: https://i.stack.imgur.com/cr2ND.png\r\n  [5]: https://jmeter.apache.org/usermanual/regular_expressions.html#meta_chars\r\n  [6]: https://www.blazemeter.com/blog/apache-groovy","title":"Jmeter 5.5 error with assertion value type, string not equal to int","body":"<p>It's a side-effect of the bug fix for the JMeter Issue <a href=\"https://github.com/apache/jmeter/issues/5534\" rel=\"nofollow noreferrer\">5543</a>, you might want to <a href=\"https://jmeter.apache.org/issues.html\" rel=\"nofollow noreferrer\">report it</a></p>\n<p>Looking into <a href=\"https://github.com/apache/jmeter/blob/rel/v5.5/src/components/src/main/java/org/apache/jmeter/assertions/JSONPathAssertion.java#L177\" rel=\"nofollow noreferrer\">this line</a>:</p>\n<pre><code>Object expected = JSONValue.parse(getExpectedValue());\n</code></pre>\n<p>there is no possibility to revert to the previous behaviour via property. You might want to tick &quot;Match as regular expression&quot; box:</p>\n<p><a href=\"https://i.stack.imgur.com/cr2ND.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cr2ND.png\" alt=\"enter image description here\" /></a></p>\n<p>however it might break more complex assertions especially if they contain <a href=\"https://jmeter.apache.org/usermanual/regular_expressions.html#meta_chars\" rel=\"nofollow noreferrer\">meta characters</a></p>\n<p>So you either need to downgrade and wait for the decision or scan assertion failure messages using <a href=\"https://www.blazemeter.com/blog/apache-groovy\" rel=\"nofollow noreferrer\">JSR223 Assertion and Groovy language</a> and set the assertion result as passed if &quot;expected&quot; and &quot;found&quot; values are equal</p>\n"},{"tags":[],"owner":{"account_id":3572712,"reputation":13,"user_id":2982672,"display_name":"aakraj"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695805875,"creation_date":1695805875,"answer_id":77186092,"question_id":74536638,"body_markdown":"I was facing the same issue with jmeter version &gt; 5.5. Setting the expected value as &quot;8&quot; fixed it. \r\nBasically, if expected value is of type string, it must be enclosed in double-quotes, specially numeric values.","title":"Jmeter 5.5 error with assertion value type, string not equal to int","body":"<p>I was facing the same issue with jmeter version &gt; 5.5. Setting the expected value as &quot;8&quot; fixed it.\nBasically, if expected value is of type string, it must be enclosed in double-quotes, specially numeric values.</p>\n"}],"owner":{"account_id":8757810,"reputation":3,"user_id":6548801,"display_name":"Ivan Chacon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":357,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74537909,"answer_count":2,"score":0,"last_activity_date":1695805875,"creation_date":1669137382,"question_id":74536638,"body_markdown":"I have a test that used to work perfect in jmeter 5.4.1. Then I upgraded to jmeter 5.5 recently and all JSON assertions stopped working.\r\n\r\nthis is the message I get from all JSON assertions :\r\n\r\nAssertion failure message:Value expected to be &#39;8&#39;, but found &#39;8&#39;\r\n\r\nthe value is the same, but I realized that now it checks the type (string != number), but in previous versions, it used to work.\r\n\r\nthis is my Json assert :&lt;br/&gt;\r\n[![enter image description here][1]][1]\r\n\r\n\r\nAnd this is an example of the JSON response :\r\n\r\n    {\r\n      &quot;person&quot;: {\r\n        &quot;age&quot;: &quot;8&quot;\r\n      }\r\n    }\r\n\r\nAnyone knows how to disable the type check or how to make it works like previous versions?\r\n\r\n\r\n\r\nIf I change the JSON assertion value like this, it works :\r\n\r\n\r\n[![\\[enter image description here\\](https://i.stack.imgur.com/98GKg.png)][2]][2]\r\n\r\nThe problem is that I have a lot of tests, and it&#39;s better for me to find a different solution, like enable/disable a parameter, or something like that.\r\n\r\nThanks !\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zY2iF.png\r\n  [2]: https://i.stack.imgur.com/RGkID.png","title":"Jmeter 5.5 error with assertion value type, string not equal to int","body":"<p>I have a test that used to work perfect in jmeter 5.4.1. Then I upgraded to jmeter 5.5 recently and all JSON assertions stopped working.</p>\n<p>this is the message I get from all JSON assertions :</p>\n<p>Assertion failure message:Value expected to be '8', but found '8'</p>\n<p>the value is the same, but I realized that now it checks the type (string != number), but in previous versions, it used to work.</p>\n<p>this is my Json assert :<br/>\n<a href=\"https://i.stack.imgur.com/zY2iF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zY2iF.png\" alt=\"enter image description here\" /></a></p>\n<p>And this is an example of the JSON response :</p>\n<pre><code>{\n  &quot;person&quot;: {\n    &quot;age&quot;: &quot;8&quot;\n  }\n}\n</code></pre>\n<p>Anyone knows how to disable the type check or how to make it works like previous versions?</p>\n<p>If I change the JSON assertion value like this, it works :</p>\n<p><a href=\"https://i.stack.imgur.com/RGkID.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RGkID.png\" alt=\"[enter image description here](https://i.stack.imgur.com/98GKg.png)\" /></a></p>\n<p>The problem is that I have a lot of tests, and it's better for me to find a different solution, like enable/disable a parameter, or something like that.</p>\n<p>Thanks !</p>\n"},{"tags":["java","intellij-idea"],"comments":[{"owner":{"account_id":2094057,"reputation":506144,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"score":0,"creation_date":1517307077,"post_id":48518762,"comment_id":84032184,"body_markdown":"Are you running a Maven project?  You need to make sure those resource files make it to your classpath.","body":"Are you running a Maven project?  You need to make sure those resource files make it to your classpath."},{"owner":{"account_id":3794041,"reputation":15633,"user_id":3154233,"accept_rate":88,"display_name":"NoobEditor"},"score":0,"creation_date":1517307313,"post_id":48518762,"comment_id":84032335,"body_markdown":"is moving `/tmp/resources` into your project `resources` not an option?","body":"is moving <code>&#47;tmp&#47;resources</code> into your project <code>resources</code> not an option?"},{"owner":{"account_id":4294753,"reputation":965,"user_id":3510108,"accept_rate":75,"display_name":"kensuke1984"},"score":0,"creation_date":1517307631,"post_id":48518762,"comment_id":84032511,"body_markdown":"The project is governed by Gradle. and I realized that even if I  rebuild, files in the added resource folder will not move or be copied to a bin path which is loaded when I run Java.\n@NoobEditor yes I temporarily do it thank you. but if there is another way... I would follow...","body":"The project is governed by Gradle. and I realized that even if I  rebuild, files in the added resource folder will not move or be copied to a bin path which is loaded when I run Java. @NoobEditor yes I temporarily do it thank you. but if there is another way... I would follow..."},{"owner":{"account_id":190568,"reputation":601,"user_id":1873036,"display_name":"olikaf"},"score":0,"creation_date":1517307632,"post_id":48518762,"comment_id":84032514,"body_markdown":"As far as I know, such folders must be under the main folder.\nMaybe you can use symbolic link.","body":"As far as I know, such folders must be under the main folder. Maybe you can use symbolic link."}],"answers":[{"comments":[{"owner":{"account_id":4294753,"reputation":965,"user_id":3510108,"accept_rate":75,"display_name":"kensuke1984"},"score":0,"creation_date":1517371876,"post_id":48519394,"comment_id":84064066,"body_markdown":"Thank you. I tried it. When you set /tmp/resoures in Gradle like you, did your IntelliJ try to make all file lists under /tmp, didn&#39;t it?","body":"Thank you. I tried it. When you set /tmp/resoures in Gradle like you, did your IntelliJ try to make all file lists under /tmp, didn&#39;t it?"},{"owner":{"account_id":190568,"reputation":601,"user_id":1873036,"display_name":"olikaf"},"score":0,"creation_date":1517390898,"post_id":48519394,"comment_id":84072330,"body_markdown":"It depends of the project view. I edited my answer and add some pics.","body":"It depends of the project view. I edited my answer and add some pics."}],"tags":[],"owner":{"account_id":190568,"reputation":601,"user_id":1873036,"display_name":"olikaf"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1517390866,"creation_date":1517308825,"answer_id":48519394,"question_id":48518762,"body_markdown":"I tried and it works.\r\n\r\nIn build.gradle :\r\n\r\n    sourceSets {\r\n        main {\r\n            resources {\r\n                srcDir &#39;/tmp/resources&#39;\r\n            }\r\n        }\r\n    }\r\n\r\nIt is recognized by Intellij \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nI added an image in this folder, and it is included in the final jar .\r\n\r\nEDIT : Add some pics to answer a comment\r\n\r\nAbout seeing files under /tmp : \r\n\r\nWell it depends of the view used to display the project.\r\nThe **production** is fine.\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\nOther views are differents, like the **project** one : It displays everything.\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/mwwi3.png\r\n  [2]: https://i.stack.imgur.com/aN5hV.png\r\n  [3]: https://i.stack.imgur.com/1Xxd2.png","title":"Adding a resource folder in intellij","body":"<p>I tried and it works.</p>\n\n<p>In build.gradle :</p>\n\n<pre><code>sourceSets {\n    main {\n        resources {\n            srcDir '/tmp/resources'\n        }\n    }\n}\n</code></pre>\n\n<p>It is recognized by Intellij </p>\n\n<p><a href=\"https://i.stack.imgur.com/mwwi3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mwwi3.png\" alt=\"enter image description here\"></a></p>\n\n<p>I added an image in this folder, and it is included in the final jar .</p>\n\n<p>EDIT : Add some pics to answer a comment</p>\n\n<p>About seeing files under /tmp : </p>\n\n<p>Well it depends of the view used to display the project.\nThe <strong>production</strong> is fine.</p>\n\n<p><a href=\"https://i.stack.imgur.com/aN5hV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aN5hV.png\" alt=\"enter image description here\"></a></p>\n\n<p>Other views are differents, like the <strong>project</strong> one : It displays everything.</p>\n\n<p><a href=\"https://i.stack.imgur.com/1Xxd2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1Xxd2.png\" alt=\"enter image description here\"></a></p>\n"}],"owner":{"account_id":4294753,"reputation":965,"user_id":3510108,"accept_rate":75,"display_name":"kensuke1984"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8173,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695805485,"creation_date":1517306946,"question_id":48518762,"body_markdown":"I want to add a folder as a resource folder in an IntelliJ IDEA project  (Java).\r\n\r\nIn project settings - Modules - ProjectName_main, I put a folder as a resource folder. However I can&#39;t reach a file in the folder.\r\n\r\nGeneral paths are like below.\r\n\r\n\r\n    LocalProject\r\n        | - src\r\n             | - main\r\n                   | - java\r\n                   | - resources\r\n\r\n\r\n\r\nand adding a folder, say, ```/tmp/resources```\r\n\r\nSuppose I put a tmp.txt and main.txt in the folders in ```/tmp/resources``` and ```LocalProject/src/main/resources```, respectively, and have a class ```Hoge```, ```Hoge.class.getClass().getResourceAsStream(&quot;main.txt&quot;)``` works but doesn&#39;t work on the other file.....\r\n\r\nHow can I fix it?","title":"Adding a resource folder in intellij","body":"<p>I want to add a folder as a resource folder in an IntelliJ IDEA project  (Java).</p>\n\n<p>In project settings - Modules - ProjectName_main, I put a folder as a resource folder. However I can't reach a file in the folder.</p>\n\n<p>General paths are like below.</p>\n\n<pre><code>LocalProject\n    | - src\n         | - main\n               | - java\n               | - resources\n</code></pre>\n\n<p>and adding a folder, say, <code>/tmp/resources</code></p>\n\n<p>Suppose I put a tmp.txt and main.txt in the folders in <code>/tmp/resources</code> and <code>LocalProject/src/main/resources</code>, respectively, and have a class <code>Hoge</code>, <code>Hoge.class.getClass().getResourceAsStream(\"main.txt\")</code> works but doesn't work on the other file.....</p>\n\n<p>How can I fix it?</p>\n"},{"tags":["java","dns","inetaddress","nslookup"],"answers":[{"comments":[{"owner":{"account_id":95521,"reputation":2731,"user_id":260108,"accept_rate":76,"display_name":"Vasilis"},"score":0,"creation_date":1346696199,"post_id":12252445,"comment_id":16425129,"body_markdown":"when I ping using the IP address it doen&#39;t resolve the address to hostname but when I ping with the hostname it resolves it to IP address. Isn&#39;t this the expected behaviour?","body":"when I ping using the IP address it doen&#39;t resolve the address to hostname but when I ping with the hostname it resolves it to IP address. Isn&#39;t this the expected behaviour?"},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1346697070,"post_id":12252445,"comment_id":16425344,"body_markdown":"The DNS needs to provide two mappings, one maps hostname to IP addresses, but you also need a reverse mapping from IP address to hostname if you want a reverse lookup.","body":"The DNS needs to provide two mappings, one maps hostname to IP addresses, but you also need a reverse mapping from IP address to hostname if you want a reverse lookup."},{"owner":{"account_id":95521,"reputation":2731,"user_id":260108,"accept_rate":76,"display_name":"Vasilis"},"score":0,"creation_date":1346700767,"post_id":12252445,"comment_id":16426243,"body_markdown":"Is it possible to configure the use of reverse DNS by default?","body":"Is it possible to configure the use of reverse DNS by default?"},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1346701551,"post_id":12252445,"comment_id":16426430,"body_markdown":"Old DNS servers couldn&#39;t do this, but its been tens years since I configured such a server. ;)","body":"Old DNS servers couldn&#39;t do this, but its been tens years since I configured such a server. ;)"}],"tags":[],"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"comment_count":4,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1346696074,"creation_date":1346696074,"answer_id":12252445,"question_id":12252387,"body_markdown":"Your computer may not be configured to use DNS by default, even if it is available on demand.\r\n\r\nI would try\r\n\r\n    ping 82.117.193.169\r\n\r\nand see whether it resolves the IP address into a hostname.","title":"Different results between nslookup and Java&#39;s InetAddress getHostName","body":"<p>Your computer may not be configured to use DNS by default, even if it is available on demand.</p>\n\n<p>I would try</p>\n\n<pre><code>ping 82.117.193.169\n</code></pre>\n\n<p>and see whether it resolves the IP address into a hostname.</p>\n"},{"comments":[{"owner":{"account_id":3580881,"reputation":5060,"user_id":2989136,"accept_rate":79,"display_name":"Herr Derb"},"score":0,"creation_date":1695804771,"post_id":43197927,"comment_id":136071885,"body_markdown":"And how can I workaround this?","body":"And how can I workaround this?"},{"owner":{"account_id":1741891,"reputation":887,"user_id":1593058,"accept_rate":61,"display_name":"BUKTOP"},"score":0,"creation_date":1696252382,"post_id":43197927,"comment_id":136125428,"body_markdown":"1) check modern java - maybe it works now\n\n2) implement your own method by copypasting this and removing this XXX spoofing check","body":"1) check modern java - maybe it works now  2) implement your own method by copypasting this and removing this XXX spoofing check"}],"tags":[],"owner":{"account_id":1741891,"reputation":887,"user_id":1593058,"accept_rate":61,"display_name":"BUKTOP"},"comment_count":2,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1491278255,"creation_date":1491278255,"answer_id":43197927,"question_id":12252387,"body_markdown":"It is due to the &quot;A&quot; record check - Java wants that IP number you&#39;re looking up, was listed there. They call it &quot;XXX&quot; and I understand why:\r\n\r\n    private static String getHostFromNameService(InetAddress addr, boolean check) {\r\n    String host = null;\r\n    for (NameService nameService : nameServices) {\r\n        try {\r\n            // first lookup the hostname\r\n            host = nameService.getHostByAddr(addr.getAddress());\r\n    \r\n            /* check to see if calling code is allowed to know\r\n             * the hostname for this IP address, ie, connect to the host\r\n             */\r\n            if (check) {\r\n                SecurityManager sec = System.getSecurityManager();\r\n                if (sec != null) {\r\n                    sec.checkConnect(host, -1);\r\n                }\r\n            }\r\n    \r\n            /* now get all the IP addresses for this hostname,\r\n             * and make sure one of them matches the original IP\r\n             * address. We do this to try and prevent spoofing.\r\n             */\r\n    \r\n            InetAddress[] arr = InetAddress.getAllByName0(host, check);\r\n            boolean ok = false;\r\n    \r\n            if(arr != null) {\r\n                for(int i = 0; !ok &amp;&amp; i &lt; arr.length; i++) {\r\n                    ok = addr.equals(arr[i]);\r\n                }\r\n            }\r\n    \r\n            //XXX: if it looks a spoof just return the address?\r\n            if (!ok) {\r\n                host = addr.getHostAddress();\r\n                return host;\r\n            }\r\n    \r\n            break;\r\n\r\n","title":"Different results between nslookup and Java&#39;s InetAddress getHostName","body":"<p>It is due to the \"A\" record check - Java wants that IP number you're looking up, was listed there. They call it \"XXX\" and I understand why:</p>\n\n<pre><code>private static String getHostFromNameService(InetAddress addr, boolean check) {\nString host = null;\nfor (NameService nameService : nameServices) {\n    try {\n        // first lookup the hostname\n        host = nameService.getHostByAddr(addr.getAddress());\n\n        /* check to see if calling code is allowed to know\n         * the hostname for this IP address, ie, connect to the host\n         */\n        if (check) {\n            SecurityManager sec = System.getSecurityManager();\n            if (sec != null) {\n                sec.checkConnect(host, -1);\n            }\n        }\n\n        /* now get all the IP addresses for this hostname,\n         * and make sure one of them matches the original IP\n         * address. We do this to try and prevent spoofing.\n         */\n\n        InetAddress[] arr = InetAddress.getAllByName0(host, check);\n        boolean ok = false;\n\n        if(arr != null) {\n            for(int i = 0; !ok &amp;&amp; i &lt; arr.length; i++) {\n                ok = addr.equals(arr[i]);\n            }\n        }\n\n        //XXX: if it looks a spoof just return the address?\n        if (!ok) {\n            host = addr.getHostAddress();\n            return host;\n        }\n\n        break;\n</code></pre>\n"}],"owner":{"account_id":95521,"reputation":2731,"user_id":260108,"accept_rate":76,"display_name":"Vasilis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10761,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1695805485,"creation_date":1346695725,"question_id":12252387,"body_markdown":"I&#39;m trying to write a simple java program that will return the dns names of ip addresses which I do using the following code:\r\n\r\n\r\n    InetAddress host = InetAddress.getByName(ip);\r\n    String dnsName = host.getHostName();\r\n\r\nWhen a dns name is registered getHostName() returns this name and when there is no existent dns name the ip address is returned.\r\n\r\nFor many addresses the above code doesn&#39;t return any while the nslookup command returns.\r\n\r\nFor example, for the address 82.117.193.169 nslookup returns **peer-AS31042.sbb.rs** while getHostName() returns only the address. This doesn&#39;t happen for all the addresses but for a large number of cases.\r\n\r\n","title":"Different results between nslookup and Java&#39;s InetAddress getHostName","body":"<p>I'm trying to write a simple java program that will return the dns names of ip addresses which I do using the following code:</p>\n\n<pre><code>InetAddress host = InetAddress.getByName(ip);\nString dnsName = host.getHostName();\n</code></pre>\n\n<p>When a dns name is registered getHostName() returns this name and when there is no existent dns name the ip address is returned.</p>\n\n<p>For many addresses the above code doesn't return any while the nslookup command returns.</p>\n\n<p>For example, for the address 82.117.193.169 nslookup returns <strong>peer-AS31042.sbb.rs</strong> while getHostName() returns only the address. This doesn't happen for all the addresses but for a large number of cases.</p>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":29176687,"reputation":332,"user_id":22351796,"display_name":"Karsten"},"score":0,"creation_date":1695810539,"post_id":77185998,"comment_id":136073048,"body_markdown":"Please check whether your JAR is correctly bound to your Maven project. In Eclipse you would go to `Package View &gt; Maven Dependencies`. There you can check whether the JAR contains the expected class, too.","body":"Please check whether your JAR is correctly bound to your Maven project. In Eclipse you would go to <code>Package View &gt; Maven Dependencies</code>. There you can check whether the JAR contains the expected class, too."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1695811784,"post_id":77185998,"comment_id":136073269,"body_markdown":"@PaulSchimmer just as a sanity check, `jar tvf ~/.m2/repository/com/org/services/spkservice/SPKClient-1.0.jar` (fix the path so that it is pointing at the jar itself) - does like `com/org/services/spkservice/SomeClassInThere.class` right? Let&#39;s eliminate &#39;the SPKService jar is broken&#39; as a cause.","body":"@PaulSchimmer just as a sanity check, <code>jar tvf ~&#47;.m2&#47;repository&#47;com&#47;org&#47;services&#47;spkservice&#47;SPKClient-1.0.j&zwnj;&#8203;ar</code> (fix the path so that it is pointing at the jar itself) - does like <code>com&#47;org&#47;services&#47;spkservice&#47;SomeClassInThere.class</code> right? Let&#39;s eliminate &#39;the SPKService jar is broken&#39; as a cause."}],"owner":{"account_id":9563856,"reputation":173,"user_id":7103753,"accept_rate":61,"display_name":"Paul Schimmer"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695805223,"creation_date":1695805223,"question_id":77185998,"body_markdown":"I want to import a local jar SPK-1.0.jar built on Java 1.8 into the maven project using java 17.\r\nI am using maven-install-plugin. I changed the parent pom and module pom as below:\r\n\r\n\r\nParent pom\r\n\r\n```\r\n&lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\r\n                    &lt;executions&gt;\r\n                      &lt;execution&gt;\r\n                            &lt;id&gt;local-spk-sdk&lt;/id&gt;\r\n                            &lt;phase&gt;clean&lt;/phase&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;install-file&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                            &lt;configuration&gt;\r\n                                &lt;file&gt;${project.main.basedir}/lib/SPK-1.0.jar&lt;/file&gt;\r\n                          &lt;groupId&gt;com.org.services.spkservice&lt;/groupId&gt;\r\n                          &lt;artifactId&gt;SPKClient&lt;/artifactId&gt;\r\n                                &lt;version&gt;1.0&lt;/version&gt;\r\n                                &lt;packaging&gt;jar&lt;/packaging&gt;\r\n                            &lt;/configuration&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n```\r\n\r\nModule pom dependency\r\n\r\n```\r\n&lt;dependency&gt;\r\n      &lt;groupId&gt;com.org.services.spkservice&lt;/groupId&gt;\r\n      &lt;artifactId&gt;SPKClient&lt;/artifactId&gt;\r\n      &lt;version&gt;1.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nI verified the path in local m2 and can confirm that the jar is present in `~/.m2/repository/com/org/services/spkservice` location\r\n\r\nWhen I try to import the class with logic into my java file I get this error:\r\n \r\n\r\n     package com.org.services.spkservice does not exist \r\n\r\nDoes anyone know what might be missing here?","title":"Importing local jar of different java version in a maven project","body":"<p>I want to import a local jar SPK-1.0.jar built on Java 1.8 into the maven project using java 17.\nI am using maven-install-plugin. I changed the parent pom and module pom as below:</p>\n<p>Parent pom</p>\n<pre><code>&lt;plugin&gt;\n                    &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\n                    &lt;executions&gt;\n                      &lt;execution&gt;\n                            &lt;id&gt;local-spk-sdk&lt;/id&gt;\n                            &lt;phase&gt;clean&lt;/phase&gt;\n                            &lt;goals&gt;\n                                &lt;goal&gt;install-file&lt;/goal&gt;\n                            &lt;/goals&gt;\n                            &lt;configuration&gt;\n                                &lt;file&gt;${project.main.basedir}/lib/SPK-1.0.jar&lt;/file&gt;\n                          &lt;groupId&gt;com.org.services.spkservice&lt;/groupId&gt;\n                          &lt;artifactId&gt;SPKClient&lt;/artifactId&gt;\n                                &lt;version&gt;1.0&lt;/version&gt;\n                                &lt;packaging&gt;jar&lt;/packaging&gt;\n                            &lt;/configuration&gt;\n                        &lt;/execution&gt;\n                    &lt;/executions&gt;\n                &lt;/plugin&gt;\n</code></pre>\n<p>Module pom dependency</p>\n<pre><code>&lt;dependency&gt;\n      &lt;groupId&gt;com.org.services.spkservice&lt;/groupId&gt;\n      &lt;artifactId&gt;SPKClient&lt;/artifactId&gt;\n      &lt;version&gt;1.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>I verified the path in local m2 and can confirm that the jar is present in <code>~/.m2/repository/com/org/services/spkservice</code> location</p>\n<p>When I try to import the class with logic into my java file I get this error:</p>\n<pre><code> package com.org.services.spkservice does not exist \n</code></pre>\n<p>Does anyone know what might be missing here?</p>\n"},{"tags":["java","swing","jcombobox"],"comments":[{"owner":{"account_id":13203350,"reputation":868,"user_id":9535950,"display_name":"Thomas Behr"},"score":2,"creation_date":1695799149,"post_id":77184774,"comment_id":136070820,"body_markdown":"Well, do not use a JComboBox then. Use a JButton with an arrow icon that opens a JPopupMenu when clicked.","body":"Well, do not use a JComboBox then. Use a JButton with an arrow icon that opens a JPopupMenu when clicked."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1695822742,"post_id":77184774,"comment_id":136075611,"body_markdown":"(1-) Why? How will the user every know what has been selected? Don&#39;t try to reinvent the UI.","body":"(1-) Why? How will the user every know what has been selected? Don&#39;t try to reinvent the UI."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1695995232,"post_id":77184774,"comment_id":136101033,"body_markdown":"You can simply create a `JButton` with an arrow image, set a popup menu, and show the menu beneath the button when the button has been clicked. As apparently, that is what you actually want.","body":"You can simply create a <code>JButton</code> with an arrow image, set a popup menu, and show the menu beneath the button when the button has been clicked. As apparently, that is what you actually want."}],"answers":[{"tags":[],"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695805170,"creation_date":1695805170,"answer_id":77185993,"question_id":77184774,"body_markdown":"You could do something like this (read comments in code):\r\n\r\n    private void showOnlyComboBoxButton(javax.swing.JComboBox combo) {\r\n        // Make sure ComboBox is Editable\r\n        combo.setEditable(true);  \r\n        \r\n        // Get a list of ComboBox Components:\r\n        java.awt.Component[] comp = combo.getComponents();\r\n        \r\n        /* Declare a javax.swing.JComponent object. The ComboBox\r\n           TextField will be held there.        */\r\n        javax.swing.JComponent jc;\r\n        \r\n        // Iterate through the ComboBox components and find the TextField\r\n        for (java.awt.Component c : comp) {\r\n            if (c instanceof javax.swing.JComponent) {\r\n                jc = ((javax.swing.JComponent) c);\r\n                // Is this the TextField?\r\n                if (jc.getName().equals(&quot;ComboBox.textField&quot;)) {\r\n                    // Yes...set it&#39;s visible property to boolean false:\r\n                    jc.setVisible(false);\r\n                    // Break out of loop;\r\n                    break;  \r\n                }\r\n            }\r\n        }\r\n        /* Optional - Set the ComboBox drop-down list to \r\n           the right side of the Arrow Button:        */\r\n        combo.setComponentOrientation(java.awt.ComponentOrientation.RIGHT_TO_LEFT);\r\n        \r\n        // Repaint:\r\n        combo.repaint();\r\n    }","title":"I want to show only the arrow in JComboBox","body":"<p>You could do something like this (read comments in code):</p>\n<pre><code>private void showOnlyComboBoxButton(javax.swing.JComboBox combo) {\n    // Make sure ComboBox is Editable\n    combo.setEditable(true);  \n    \n    // Get a list of ComboBox Components:\n    java.awt.Component[] comp = combo.getComponents();\n    \n    /* Declare a javax.swing.JComponent object. The ComboBox\n       TextField will be held there.        */\n    javax.swing.JComponent jc;\n    \n    // Iterate through the ComboBox components and find the TextField\n    for (java.awt.Component c : comp) {\n        if (c instanceof javax.swing.JComponent) {\n            jc = ((javax.swing.JComponent) c);\n            // Is this the TextField?\n            if (jc.getName().equals(&quot;ComboBox.textField&quot;)) {\n                // Yes...set it's visible property to boolean false:\n                jc.setVisible(false);\n                // Break out of loop;\n                break;  \n            }\n        }\n    }\n    /* Optional - Set the ComboBox drop-down list to \n       the right side of the Arrow Button:        */\n    combo.setComponentOrientation(java.awt.ComponentOrientation.RIGHT_TO_LEFT);\n    \n    // Repaint:\n    combo.repaint();\n}\n</code></pre>\n"}],"owner":{"account_id":29501565,"reputation":7,"user_id":22608457,"display_name":"MouseTheMilkLover"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":1,"score":-3,"last_activity_date":1695805170,"creation_date":1695790898,"question_id":77184774,"body_markdown":"I have a JComboBox, but I want it to show only dropdown arrow, that is, without any space on left for the JComboBox element. But when I click the arrow, I want the list to go naturally, without it being empty or something.\r\n\r\nThis is what I&#39;m dealing with:\r\n\r\n[![enter image description here](https://i.stack.imgur.com/Z0IOa.png)](https://i.stack.imgur.com/Z0IOa.png)\r\n\r\nI want it to look something like this (also list elements in the center, if that&#39;s possible):\r\n\r\n[![enter image description here](https://i.stack.imgur.com/1v4qz.png)](https://i.stack.imgur.com/1v4qz.png)\r\n\r\nThanks :).","title":"I want to show only the arrow in JComboBox","body":"<p>I have a JComboBox, but I want it to show only dropdown arrow, that is, without any space on left for the JComboBox element. But when I click the arrow, I want the list to go naturally, without it being empty or something.</p>\n<p>This is what I'm dealing with:</p>\n<p><a href=\"https://i.stack.imgur.com/Z0IOa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Z0IOa.png\" alt=\"enter image description here\" /></a></p>\n<p>I want it to look something like this (also list elements in the center, if that's possible):</p>\n<p><a href=\"https://i.stack.imgur.com/1v4qz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1v4qz.png\" alt=\"enter image description here\" /></a></p>\n<p>Thanks :).</p>\n"},{"tags":["java","spring","maven","intellij-idea"],"answers":[{"comments":[{"owner":{"account_id":219684,"reputation":37267,"user_id":476716,"accept_rate":77,"display_name":"OrangeDog"},"score":0,"creation_date":1450265918,"post_id":33599838,"comment_id":56363500,"body_markdown":"So there&#39;s no way to get rid of the message?","body":"So there&#39;s no way to get rid of the message?"},{"owner":{"account_id":326040,"reputation":3140,"user_id":647581,"display_name":"Patrick Herrera"},"score":1,"creation_date":1450397282,"post_id":33599838,"comment_id":56434745,"body_markdown":"@OrangeDog Not that I can find. I&#39;ve learnt to ignore it but you could always lodge a feature request with JetBrains.  You would imagine that they could be a bit smarter about this and only display it if they know the class file or the configuration file has actually changed","body":"@OrangeDog Not that I can find. I&#39;ve learnt to ignore it but you could always lodge a feature request with JetBrains.  You would imagine that they could be a bit smarter about this and only display it if they know the class file or the configuration file has actually changed"},{"owner":{"account_id":2382522,"reputation":1144,"user_id":2084253,"accept_rate":80,"display_name":"Kent Bull"},"score":1,"creation_date":1483636256,"post_id":33599838,"comment_id":70187214,"body_markdown":"The error message still stays there after rebuilding the project.","body":"The error message still stays there after rebuilding the project."},{"owner":{"account_id":395827,"reputation":5063,"user_id":758991,"accept_rate":55,"display_name":"Ruslan Stelmachenko"},"score":9,"creation_date":1508602348,"post_id":33599838,"comment_id":80677939,"body_markdown":"&quot;The key seems to be rebuilding the project&quot; helped me. The message is still here, but at least auto-completion of my custom properties in `application.properties` file started to work.","body":"&quot;The key seems to be rebuilding the project&quot; helped me. The message is still here, but at least auto-completion of my custom properties in <code>application.properties</code> file started to work."},{"owner":{"account_id":1075224,"reputation":990,"user_id":1073529,"display_name":"Marcus K."},"score":1,"creation_date":1551443065,"post_id":33599838,"comment_id":96651847,"body_markdown":"I use IDEA 2018.3 and have a link &quot;Hide notification&quot; after the text message. Looks as if JetBrains made the info closeable :-)","body":"I use IDEA 2018.3 and have a link &quot;Hide notification&quot; after the text message. Looks as if JetBrains made the info closeable :-)"},{"owner":{"account_id":218186,"reputation":783,"user_id":474377,"display_name":"Vijay Vepakomma"},"score":0,"creation_date":1695072782,"post_id":33599838,"comment_id":135972837,"body_markdown":"For me, autocompletion did not work until I ran my application once.","body":"For me, autocompletion did not work until I ran my application once."}],"tags":[],"owner":{"account_id":326040,"reputation":3140,"user_id":647581,"display_name":"Patrick Herrera"},"comment_count":6,"down_vote_count":0,"up_vote_count":96,"is_accepted":true,"score":96,"last_activity_date":1447025929,"creation_date":1447022149,"answer_id":33599838,"question_id":33483697,"body_markdown":"Following these instructions worked for me: http://www.mdoninger.de/2015/05/16/completion-for-custom-properties-in-spring-boot.html\r\n\r\nThat message about having to Re-run the Annotation Processor is a bit confusing as it appears it stays there all the time even if nothing has changed.\r\n\r\nThe key seems to be rebuilding the project after adding the required dependency, or after making any property changes.  After doing that and going back to the YAML file, all my properties were now linked to the configuration classes.\r\n\r\nYou may need to click the &#39;Reimport All Maven Projects&#39; button in the Maven pane as well to get the .yaml file view to recognise the links back to the corresponding Java class.","title":"Re-run Spring Boot Configuration Annotation Processor to update generated metadata","body":"<p>Following these instructions worked for me: <a href=\"http://www.mdoninger.de/2015/05/16/completion-for-custom-properties-in-spring-boot.html\">http://www.mdoninger.de/2015/05/16/completion-for-custom-properties-in-spring-boot.html</a></p>\n\n<p>That message about having to Re-run the Annotation Processor is a bit confusing as it appears it stays there all the time even if nothing has changed.</p>\n\n<p>The key seems to be rebuilding the project after adding the required dependency, or after making any property changes.  After doing that and going back to the YAML file, all my properties were now linked to the configuration classes.</p>\n\n<p>You may need to click the 'Reimport All Maven Projects' button in the Maven pane as well to get the .yaml file view to recognise the links back to the corresponding Java class.</p>\n"},{"comments":[{"owner":{"account_id":449002,"reputation":23329,"user_id":843542,"accept_rate":69,"display_name":"Eric Francis"},"score":4,"creation_date":1450735895,"post_id":34404745,"comment_id":56552173,"body_markdown":"I don&#39;t see `target` in my ignored files. It is in my `.gitignore` though.","body":"I don&#39;t see <code>target</code> in my ignored files. It is in my <code>.gitignore</code> though."},{"owner":{"account_id":18840,"reputation":23337,"user_id":43597,"display_name":"Amr Mostafa"},"score":0,"creation_date":1458823034,"post_id":34404745,"comment_id":60033988,"body_markdown":"`target/` is excluded in my case and things are working fine.","body":"<code>target&#47;</code> is excluded in my case and things are working fine."},{"owner":{"account_id":373981,"reputation":2077,"user_id":723934,"display_name":"Yann C&#233;bron"},"score":3,"creation_date":1475224388,"post_id":34404745,"comment_id":66867603,"body_markdown":"It will be used whether or not target is excluded or not (I&#39;m the developer responsible for this feature). Please file a bug report if you can reproduce this wrong behavior.","body":"It will be used whether or not target is excluded or not (I&#39;m the developer responsible for this feature). Please file a bug report if you can reproduce this wrong behavior."},{"owner":{"account_id":353475,"reputation":824,"user_id":691183,"display_name":"Marx"},"score":1,"creation_date":1476789896,"post_id":34404745,"comment_id":67485062,"body_markdown":"so which version of IntelliJ behaves properly?","body":"so which version of IntelliJ behaves properly?"},{"owner":{"account_id":2228996,"reputation":15997,"user_id":1967100,"accept_rate":78,"display_name":"cahen"},"score":0,"creation_date":1485259514,"post_id":34404745,"comment_id":70842349,"body_markdown":"IntelliJ 14.1.7 here, not working either, tried all the answers here already","body":"IntelliJ 14.1.7 here, not working either, tried all the answers here already"},{"owner":{"account_id":1292867,"reputation":2075,"user_id":1244605,"accept_rate":89,"display_name":"Costi Muraru"},"score":2,"creation_date":1527685455,"post_id":34404745,"comment_id":88220259,"body_markdown":"@YannC&#233;bron same here, with gradle. The file gets created in ./build/classes/java/main/META-INF/spring-configuration-metadata.json, but IntelliJ doesn&#39;t take it into account. If I manually move the json file to src/main/resources/META-INF it works (the configs are no longer yellowed)","body":"@YannC&#233;bron same here, with gradle. The file gets created in ./build/classes/java/main/META-INF/spring-configuration-meta&zwnj;&#8203;data.json, but IntelliJ doesn&#39;t take it into account. If I manually move the json file to src/main/resources/META-INF it works (the configs are no longer yellowed)"}],"tags":[],"owner":{"account_id":996717,"reputation":728,"user_id":1012470,"display_name":"Deathtiny"},"comment_count":6,"down_vote_count":2,"up_vote_count":15,"is_accepted":false,"score":13,"last_activity_date":1450733852,"creation_date":1450733852,"answer_id":34404745,"question_id":33483697,"body_markdown":"I had the same issue. The problem is that the Spring Boot annotation processor generates the `spring-configuration-metadata.json` file inside your `/target/classes/META-INF` folder.\r\n\r\nIf you happen to have ignored this folder in IntelliJ like me (because what the heck, who cares about classes files?), the file won&#39;t be indexed by your IDE. Therefore, no completion, and the annoying message.\r\n\r\nJust remove `target` from the ignore files/folders list, located in `Settings &gt; Editor &gt; File Types &gt; Ignore files and folders`.","title":"Re-run Spring Boot Configuration Annotation Processor to update generated metadata","body":"<p>I had the same issue. The problem is that the Spring Boot annotation processor generates the <code>spring-configuration-metadata.json</code> file inside your <code>/target/classes/META-INF</code> folder.</p>\n\n<p>If you happen to have ignored this folder in IntelliJ like me (because what the heck, who cares about classes files?), the file won't be indexed by your IDE. Therefore, no completion, and the annoying message.</p>\n\n<p>Just remove <code>target</code> from the ignore files/folders list, located in <code>Settings &gt; Editor &gt; File Types &gt; Ignore files and folders</code>.</p>\n"},{"comments":[{"owner":{"account_id":306887,"reputation":830,"user_id":617889,"accept_rate":75,"display_name":"oleh"},"score":8,"creation_date":1499004110,"post_id":34793756,"comment_id":76721669,"body_markdown":"The check box is with IDEA 2017.2 under Preferences -&gt; Languages &amp; Frameworks -&gt; Spring -&gt; Spring Boot","body":"The check box is with IDEA 2017.2 under Preferences -&gt; Languages &amp; Frameworks -&gt; Spring -&gt; Spring Boot"}],"tags":[],"owner":{"account_id":475255,"reputation":10372,"user_id":885464,"accept_rate":71,"display_name":"Lorenzo Polidori"},"comment_count":1,"down_vote_count":4,"up_vote_count":20,"is_accepted":false,"score":16,"last_activity_date":1475525781,"creation_date":1452786407,"answer_id":34793756,"question_id":33483697,"body_markdown":"None of the answers worked for me. If you just want to disable the message, go to Intellij Preferences -&gt; Editor -&gt; General -&gt; Appearance, uncheck &quot;Show Spring Boot metadata panel&quot;.\r\n\r\nHowever, you can also live with that message, if it does not bother you too much, so to make sure you don&#39;t miss any other Spring Boot metadata messages you may be interested in.","title":"Re-run Spring Boot Configuration Annotation Processor to update generated metadata","body":"<p>None of the answers worked for me. If you just want to disable the message, go to Intellij Preferences -> Editor -> General -> Appearance, uncheck \"Show Spring Boot metadata panel\".</p>\n\n<p>However, you can also live with that message, if it does not bother you too much, so to make sure you don't miss any other Spring Boot metadata messages you may be interested in.</p>\n"},{"comments":[{"owner":{"account_id":53471,"reputation":5683,"user_id":159837,"accept_rate":75,"display_name":"Fırat K&#252;&#231;&#252;k"},"score":8,"creation_date":1563436574,"post_id":48028193,"comment_id":100701388,"body_markdown":"This one worked for me. I used `annotationProccessorPaths` instead of defining individual classes. `&lt;annotationProcessorPaths&gt;&lt;path&gt;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;&lt;version&gt;${parent.version}&lt;/version&gt;&lt;/path&gt;...`","body":"This one worked for me. I used <code>annotationProccessorPaths</code> instead of defining individual classes. <code>&lt;annotationProcessorPaths&gt;&lt;path&gt;&lt;groupId&gt;org.springframework&zwnj;&#8203;.boot&lt;&#47;groupId&gt;&lt;arti&zwnj;&#8203;factId&gt;spring-boot-c&zwnj;&#8203;onfiguration-process&zwnj;&#8203;or&lt;&#47;artifactId&gt;&lt;vers&zwnj;&#8203;ion&gt;${parent.version&zwnj;&#8203;}&lt;&#47;version&gt;&lt;&#47;path&gt;..&zwnj;&#8203;.</code>"},{"owner":{"account_id":1931877,"reputation":1731,"user_id":1741107,"accept_rate":60,"display_name":"Jasper Citi"},"score":0,"creation_date":1633405830,"post_id":48028193,"comment_id":122744308,"body_markdown":"For me it worked without the maven-compiler-plugin, I only needed the spring-boot-maven-plugin (version 2.5.5).","body":"For me it worked without the maven-compiler-plugin, I only needed the spring-boot-maven-plugin (version 2.5.5)."}],"tags":[],"owner":{"account_id":273892,"reputation":1312,"user_id":565792,"accept_rate":67,"display_name":"Jason Turan"},"comment_count":2,"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1514580035,"creation_date":1514580035,"answer_id":48028193,"question_id":33483697,"body_markdown":"None of these options worked for me. I&#39;ve found that the auto detection of annotation processors to be pretty flaky. I ended up creating a plugin section in the pom.xml file that explicitly sets the annotation processors that are used for the project. The advantage of this is that you don&#39;t need to rely on any IDE settings.\r\n\r\n    &lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.7.0&lt;/version&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;compilerVersion&gt;1.8&lt;/compilerVersion&gt;\r\n\t\t\t\t\t&lt;source&gt;1.8&lt;/source&gt;\r\n\t\t\t\t\t&lt;target&gt;1.8&lt;/target&gt;\r\n\t\t\t\t\t&lt;annotationProcessors&gt;\r\n                        &lt;annotationProcessor&gt;org.springframework.boot.configurationprocessor.ConfigurationMetadataAnnotationProcessor&lt;/annotationProcessor&gt;\r\n\t\t\t\t\t\t&lt;annotationProcessor&gt;lombok.launch.AnnotationProcessorHider$AnnotationProcessor&lt;/annotationProcessor&gt;\r\n\t\t\t\t\t\t&lt;annotationProcessor&gt;org.hibernate.jpamodelgen.JPAMetaModelEntityProcessor&lt;/annotationProcessor&gt;\r\n\t\t\t\t\t&lt;/annotationProcessors&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;","title":"Re-run Spring Boot Configuration Annotation Processor to update generated metadata","body":"<p>None of these options worked for me. I've found that the auto detection of annotation processors to be pretty flaky. I ended up creating a plugin section in the pom.xml file that explicitly sets the annotation processors that are used for the project. The advantage of this is that you don't need to rely on any IDE settings.</p>\n\n<pre><code>&lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.7.0&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;compilerVersion&gt;1.8&lt;/compilerVersion&gt;\n                &lt;source&gt;1.8&lt;/source&gt;\n                &lt;target&gt;1.8&lt;/target&gt;\n                &lt;annotationProcessors&gt;\n                    &lt;annotationProcessor&gt;org.springframework.boot.configurationprocessor.ConfigurationMetadataAnnotationProcessor&lt;/annotationProcessor&gt;\n                    &lt;annotationProcessor&gt;lombok.launch.AnnotationProcessorHider$AnnotationProcessor&lt;/annotationProcessor&gt;\n                    &lt;annotationProcessor&gt;org.hibernate.jpamodelgen.JPAMetaModelEntityProcessor&lt;/annotationProcessor&gt;\n                &lt;/annotationProcessors&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":142582,"reputation":1553,"user_id":350372,"display_name":"Brandon S"},"comment_count":0,"down_vote_count":1,"up_vote_count":21,"is_accepted":false,"score":20,"last_activity_date":1528317933,"creation_date":1528317933,"answer_id":50729313,"question_id":33483697,"body_markdown":"You can enable annotation processors in IntelliJ via the following:\r\n\r\n1. Click on File\r\n2. Click on Settings\r\n3. In the little search box in the upper-left hand corner, search for &quot;Annotation Processors&quot;\r\n4. Check &quot;Enable annotation processing&quot;\r\n5. Click OK\r\n\r\n","title":"Re-run Spring Boot Configuration Annotation Processor to update generated metadata","body":"<p>You can enable annotation processors in IntelliJ via the following:</p>\n\n<ol>\n<li>Click on File</li>\n<li>Click on Settings</li>\n<li>In the little search box in the upper-left hand corner, search for \"Annotation Processors\"</li>\n<li>Check \"Enable annotation processing\"</li>\n<li>Click OK</li>\n</ol>\n"},{"comments":[{"owner":{"account_id":5606741,"reputation":67,"user_id":4441045,"display_name":"Suresh T"},"score":0,"creation_date":1607975362,"post_id":53519910,"comment_id":115435563,"body_markdown":"None other than this suggestion worked for me.","body":"None other than this suggestion worked for me."}],"tags":[],"owner":{"account_id":106263,"reputation":3151,"user_id":283136,"accept_rate":38,"display_name":"timomeinen"},"comment_count":1,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1543409464,"creation_date":1543409464,"answer_id":53519910,"question_id":33483697,"body_markdown":" 1. Include a dependency on spring-boot-configuration-processor\r\n 2. Click &quot;Reimport All Maven Projects&quot; in the Maven pane of IDEA\r\n 3. Rebuild project","title":"Re-run Spring Boot Configuration Annotation Processor to update generated metadata","body":"<ol>\n<li>Include a dependency on spring-boot-configuration-processor</li>\n<li>Click \"Reimport All Maven Projects\" in the Maven pane of IDEA</li>\n<li>Rebuild project</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":6746060,"reputation":1317,"user_id":5197662,"accept_rate":69,"display_name":"Sepehr GH"},"comment_count":0,"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1593758472,"creation_date":1593758472,"answer_id":62709804,"question_id":33483697,"body_markdown":"For me, other answers didn&#39;t work. I had to go to open `Files` and do `Invalidate caches and restart` on Intellij. After that, everything worked fine again.","title":"Re-run Spring Boot Configuration Annotation Processor to update generated metadata","body":"<p>For me, other answers didn't work. I had to go to open <code>Files</code> and do <code>Invalidate caches and restart</code> on Intellij. After that, everything worked fine again.</p>\n"},{"tags":[],"owner":{"account_id":1463205,"reputation":501,"user_id":1376906,"accept_rate":71,"display_name":"fachexot"},"comment_count":0,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1610118928,"creation_date":1610118928,"answer_id":65631656,"question_id":33483697,"body_markdown":"Having included a dependency on `spring-boot-configuration-processor` in `build.gradle`:\r\n\r\n    annotationProcessor &quot;org.springframework.boot:spring-boot-configuration-processor:2.4.1&quot;\r\n\r\nthe only thing that worked for me, besides invalidating caches of IntelliJ and restarting, is \r\n\r\n 1. Refresh button in side panel `Reload All Gradle Projects`\r\n 2. Gradle task `Clean`\r\n 3. Gradle task `Build`\r\n","title":"Re-run Spring Boot Configuration Annotation Processor to update generated metadata","body":"<p>Having included a dependency on <code>spring-boot-configuration-processor</code> in <code>build.gradle</code>:</p>\n<pre><code>annotationProcessor &quot;org.springframework.boot:spring-boot-configuration-processor:2.4.1&quot;\n</code></pre>\n<p>the only thing that worked for me, besides invalidating caches of IntelliJ and restarting, is</p>\n<ol>\n<li>Refresh button in side panel <code>Reload All Gradle Projects</code></li>\n<li>Gradle task <code>Clean</code></li>\n<li>Gradle task <code>Build</code></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1931877,"reputation":1731,"user_id":1741107,"accept_rate":60,"display_name":"Jasper Citi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633406137,"creation_date":1633406137,"answer_id":69444748,"question_id":33483697,"body_markdown":"I had the same problem. In my case I was missing the spring-boot-maven-plugin.\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\nas well as the @Data Lombok annotation\r\n\r\n    @Configuration\r\n    @ConfigurationProperties(&quot;logging.web&quot;)\r\n    @Data\r\n    public class LoggingWebConfiguration {\r\n    // ...\r\n    }\r\n\r\nObviously you can also just create the getter/setters yourself.\r\n\r\nThen you must also remember to re-import and re-compile your project.","title":"Re-run Spring Boot Configuration Annotation Processor to update generated metadata","body":"<p>I had the same problem. In my case I was missing the spring-boot-maven-plugin.</p>\n<pre><code>&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n<p>as well as the @Data Lombok annotation</p>\n<pre><code>@Configuration\n@ConfigurationProperties(&quot;logging.web&quot;)\n@Data\npublic class LoggingWebConfiguration {\n// ...\n}\n</code></pre>\n<p>Obviously you can also just create the getter/setters yourself.</p>\n<p>Then you must also remember to re-import and re-compile your project.</p>\n"},{"tags":[],"owner":{"account_id":12296087,"reputation":437,"user_id":8971683,"display_name":"the one"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1634219795,"creation_date":1634219795,"answer_id":69572015,"question_id":33483697,"body_markdown":"I just needed\r\n\r\n```\r\n@EnableConfigurationProperties({MY_PROPS_CLASS.class})\r\n```\r\n in Main Application class and it helped me to resolve this issue","title":"Re-run Spring Boot Configuration Annotation Processor to update generated metadata","body":"<p>I just needed</p>\n<pre><code>@EnableConfigurationProperties({MY_PROPS_CLASS.class})\n</code></pre>\n<p>in Main Application class and it helped me to resolve this issue</p>\n"},{"tags":[],"owner":{"account_id":7644404,"reputation":61,"user_id":5795553,"display_name":"Jo&#227;o Verissimo Ribeiro"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1634628634,"creation_date":1634583909,"answer_id":69621273,"question_id":33483697,"body_markdown":"I had a similar issue using Gradle and Kotlin.\r\nYou should modify the `build.gradle.kts` file to include the following:\r\n\r\n```kt\r\n//build.gradle.kts\r\nplugins {\r\n  // ...\r\n  kotlin(&quot;kapt&quot;) version &quot;1.5.31&quot;\r\n}\r\n\r\n\r\ndependencies {\r\n  // ...\r\n\r\n  kapt(&quot;org.springframework.boot:spring-boot-configuration-processor&quot;)\r\n}\r\n```\r\n\r\nThen, to generate the annotations: \r\n```shell\r\n./gradlew kaptKotlin\r\n```\r\n\r\nReferences: https://spring.io/guides/tutorials/spring-boot-kotlin/#_configuration_properties","title":"Re-run Spring Boot Configuration Annotation Processor to update generated metadata","body":"<p>I had a similar issue using Gradle and Kotlin.\nYou should modify the <code>build.gradle.kts</code> file to include the following:</p>\n<pre><code>//build.gradle.kts\nplugins {\n  // ...\n  kotlin(&quot;kapt&quot;) version &quot;1.5.31&quot;\n}\n\n\ndependencies {\n  // ...\n\n  kapt(&quot;org.springframework.boot:spring-boot-configuration-processor&quot;)\n}\n</code></pre>\n<p>Then, to generate the annotations:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>./gradlew kaptKotlin\n</code></pre>\n<p>References: <a href=\"https://spring.io/guides/tutorials/spring-boot-kotlin/#_configuration_properties\" rel=\"nofollow noreferrer\">https://spring.io/guides/tutorials/spring-boot-kotlin/#_configuration_properties</a></p>\n"},{"comments":[{"owner":{"account_id":427243,"reputation":1519,"user_id":808901,"display_name":"Rod Lima"},"score":0,"creation_date":1688570286,"post_id":72110413,"comment_id":135091838,"body_markdown":"The documentation says: &quot;If you are using Lombok in your project, you need to make sure that its annotation processor runs before spring-boot-configuration-processor&quot;. https://docs.spring.io/spring-boot/docs/current/reference/html/configuration-metadata.html#appendix.configuration-metadata.annotation-processor.configuring","body":"The documentation says: &quot;If you are using Lombok in your project, you need to make sure that its annotation processor runs before spring-boot-configuration-processor&quot;. <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/configuration-metadata.html#appendix.configuration-metadata.annotation-processor.configuring\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/current/reference/html/&hellip;</a>"},{"owner":{"account_id":1192298,"reputation":2149,"user_id":1512168,"accept_rate":96,"display_name":"Mario B"},"score":0,"creation_date":1688629299,"post_id":72110413,"comment_id":135099916,"body_markdown":"@RodLima: It does seem to work just fine for me, even with the wrong order. Still, I updated my answer to reflect this, certainly better to stick with what the official documentation says Thank you!","body":"@RodLima: It does seem to work just fine for me, even with the wrong order. Still, I updated my answer to reflect this, certainly better to stick with what the official documentation says Thank you!"}],"tags":[],"owner":{"account_id":1192298,"reputation":2149,"user_id":1512168,"accept_rate":96,"display_name":"Mario B"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1688629227,"creation_date":1651655086,"answer_id":72110413,"question_id":33483697,"body_markdown":"None of the above worked in my case, but brought me close. In the end explicitly defining all required annotationProcessors in the maven-compiler-plugin solved it for me. In my case this was: Spring-Boot + Lombok + MapStruct\r\n\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.8.1&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n          &lt;annotationProcessorPaths&gt;\r\n            &lt;annotationProcessorPath&gt;\r\n              &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n              &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n              &lt;version&gt;${lombok.version}&lt;/version&gt;\r\n            &lt;/annotationProcessorPath&gt;\r\n            &lt;annotationProcessorPath&gt;\r\n              &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n              &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\r\n              &lt;version&gt;${mapstruct.version}&lt;/version&gt;\r\n            &lt;/annotationProcessorPath&gt;\r\n            &lt;annotationProcessorPath&gt;\r\n              &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n              &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\r\n              &lt;version&gt;${spring-boot-configuration-processor.version}&lt;/version&gt;\r\n            &lt;/annotationProcessorPath&gt;\r\n          &lt;/annotationProcessorPaths&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n\r\nBefore that I always got some warnings in the Class + in the application.properties some properties were marked as &quot;unusued&quot;, even when they were defined in a class with @ConfigurationProperties","title":"Re-run Spring Boot Configuration Annotation Processor to update generated metadata","body":"<p>None of the above worked in my case, but brought me close. In the end explicitly defining all required annotationProcessors in the maven-compiler-plugin solved it for me. In my case this was: Spring-Boot + Lombok + MapStruct</p>\n<pre><code>  &lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.8.1&lt;/version&gt;\n    &lt;configuration&gt;\n      &lt;annotationProcessorPaths&gt;\n        &lt;annotationProcessorPath&gt;\n          &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n          &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n          &lt;version&gt;${lombok.version}&lt;/version&gt;\n        &lt;/annotationProcessorPath&gt;\n        &lt;annotationProcessorPath&gt;\n          &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n          &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\n          &lt;version&gt;${mapstruct.version}&lt;/version&gt;\n        &lt;/annotationProcessorPath&gt;\n        &lt;annotationProcessorPath&gt;\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n          &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\n          &lt;version&gt;${spring-boot-configuration-processor.version}&lt;/version&gt;\n        &lt;/annotationProcessorPath&gt;\n      &lt;/annotationProcessorPaths&gt;\n    &lt;/configuration&gt;\n  &lt;/plugin&gt;\n</code></pre>\n<p>Before that I always got some warnings in the Class + in the application.properties some properties were marked as &quot;unusued&quot;, even when they were defined in a class with @ConfigurationProperties</p>\n"},{"tags":[],"owner":{"account_id":10465700,"reputation":1,"user_id":7715186,"display_name":"lihang cai"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657691387,"creation_date":1657691387,"answer_id":72961491,"question_id":33483697,"body_markdown":"In the maven panel of Idea, clean and compile in the maven lifecycle worked for me.","title":"Re-run Spring Boot Configuration Annotation Processor to update generated metadata","body":"<p>In the maven panel of Idea, clean and compile in the maven lifecycle worked for me.</p>\n"},{"tags":[],"owner":{"account_id":6265351,"reputation":284,"user_id":4871273,"display_name":"RedPelle"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695805152,"creation_date":1695805152,"answer_id":77185991,"question_id":33483697,"body_markdown":"Simply do:\r\n\r\n`mvn clean verify`\r\n\r\nor click &quot;verify&quot; in you **maven panel** in IntelliJ.\r\n\r\nOn &quot;clean&quot; he will not recognize annotations and on &quot;verify&quot; he will generate them again and they will be immediately recognized, no need for restart or anything.","title":"Re-run Spring Boot Configuration Annotation Processor to update generated metadata","body":"<p>Simply do:</p>\n<p><code>mvn clean verify</code></p>\n<p>or click &quot;verify&quot; in you <strong>maven panel</strong> in IntelliJ.</p>\n<p>On &quot;clean&quot; he will not recognize annotations and on &quot;verify&quot; he will generate them again and they will be immediately recognized, no need for restart or anything.</p>\n"}],"owner":{"account_id":449002,"reputation":23329,"user_id":843542,"accept_rate":69,"display_name":"Eric Francis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":161958,"favorite_count":0,"down_vote_count":0,"up_vote_count":179,"accepted_answer_id":33599838,"answer_count":14,"score":179,"last_activity_date":1695805152,"creation_date":1446486331,"question_id":33483697,"body_markdown":"I&#39;ve added:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\r\n        &lt;optional&gt;true&lt;/optional&gt;\r\n    &lt;/dependency&gt;\r\n\r\nto my `pom.xml` per `intellij`&#39;s request/warning.\r\n\r\nNow I&#39;m seeing &quot;Re-run Spring Boot Configuration Annotation Processor to update generated metadata&quot;.\r\n\r\nHow do I do what `intellij` is asking me to do? \r\n\r\nThis link, [B.2 Generating your own meta-data using the annotation processor][1], does not have instructions. \r\n\r\n\r\n  [1]: http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/html/configuration-metadata.html#configuration-metadata-annotation-processor","title":"Re-run Spring Boot Configuration Annotation Processor to update generated metadata","body":"<p>I've added:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\n    &lt;optional&gt;true&lt;/optional&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>to my <code>pom.xml</code> per <code>intellij</code>'s request/warning.</p>\n\n<p>Now I'm seeing \"Re-run Spring Boot Configuration Annotation Processor to update generated metadata\".</p>\n\n<p>How do I do what <code>intellij</code> is asking me to do? </p>\n\n<p>This link, <a href=\"http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/html/configuration-metadata.html#configuration-metadata-annotation-processor\" rel=\"noreferrer\">B.2 Generating your own meta-data using the annotation processor</a>, does not have instructions. </p>\n"},{"tags":["java","docker","centos"],"answers":[{"tags":[],"owner":{"account_id":1298254,"reputation":2903,"user_id":1248724,"accept_rate":67,"display_name":"Zarathustra"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1549989614,"creation_date":1549989614,"answer_id":54654814,"question_id":53674342,"body_markdown":"Just edit the `java.security` file located in `&lt;jvm_home&gt;/conf/security` in your Dockerfile","title":"Alter java security in docker container","body":"<p>Just edit the <code>java.security</code> file located in <code>&lt;jvm_home&gt;/conf/security</code> in your Dockerfile</p>\n"},{"tags":[],"owner":{"account_id":6058354,"reputation":81,"user_id":5333683,"display_name":"D.Oleg"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695805027,"creation_date":1695805027,"answer_id":77185975,"question_id":53674342,"body_markdown":"In Dockerfile for 17 Java\r\n#copy from source \r\nCOPY javaconf/java.security /app/javaconf/java.security\r\n\r\n#next\r\nCOPY --from=build /app/javaconf/java.security /opt/openjdk-17/conf/security/java.security","title":"Alter java security in docker container","body":"<p>In Dockerfile for 17 Java\n#copy from source\nCOPY javaconf/java.security /app/javaconf/java.security</p>\n<p>#next\nCOPY --from=build /app/javaconf/java.security /opt/openjdk-17/conf/security/java.security</p>\n"}],"owner":{"account_id":8364490,"reputation":2453,"user_id":7253775,"accept_rate":65,"display_name":"Jose Cabrera Zuniga"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1626,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1695805027,"creation_date":1544203893,"question_id":53674342,"body_markdown":"I have oracle java sdk 8 running in my docker container (running centos 7) but I want to configure the security of running java apps. This can be done using jcontrol but it requires a graphical environment that my docker container does not provide. How can I solve this problem? thx","title":"Alter java security in docker container","body":"<p>I have oracle java sdk 8 running in my docker container (running centos 7) but I want to configure the security of running java apps. This can be done using jcontrol but it requires a graphical environment that my docker container does not provide. How can I solve this problem? thx</p>\n"},{"tags":["java","algorithm","graph","graph-theory","depth-first-search"],"answers":[{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1649572375,"creation_date":1649553681,"answer_id":71813109,"question_id":71777572,"body_markdown":"You were close to the answer.\r\n\r\nIn order to *detect a cycle* in a graph, you need to use the **Depth first search** algorithm. That&#39;s correct.\r\n\r\nBut there are a couple of things in your solution that has to improved:\r\n* For this task, you don&#39;t need *edges*. Because you can model a *directed graph* by using *vertices* only. *Edges* are useful when you deal with a weighted graph (i.e. every edge is associated with a value) and need to address, for instance, the problem of the shortest path using Dijkstra&#39;s or Bellman–Ford algorithms. Then you really need edges to model the connections between vertices. But for in this task, edges are redundant, each *vertex can point to other vertexes*.\r\n* *Adjacency list* mustn&#39;t be a separate data structure. Instead, every *vertex* has to be aware of its *neighbors*. I.e. each *vertex* must hold a reference to a collection of *adjacent vertices*.\r\n* Since *graph* can contain *multiple cycles*, the result need to be represented by the nested collection. Like list of lists `List&lt;List&lt;Vertex&gt;&gt;`.\r\n* `contains()` checks done on a `List` are very costful (**O(n)** *in the worse case*), and isn&#39;t list capable to associate elements. `Map` is a better choice because map allow to retrieve values in a constant time and associate multiple keys with the same value (i.e. model cases when a group of vertices points is being connected with a single vertex).\r\n\r\nNote that cycle `[1,2,3,2,1]` isn&#39;t valid because there&#39;s *more than one vertex* that was *visited twice*. It&#39;s a combination of two cycles `1-2` and `2-3`. If you need to spot all the cycles in a graph they must be detected only one at a time, otherwise attempt to restore the path of a cycle might fail because of references pointing one at each other. Only because in your solution is capable to track only a single path, you didn&#39;t run in to trouble with the second cycle `2-&gt;3-&gt;2`. I.e. all vertexes (*except one*) in a cycle must be unique, that will allow to maintain multiple paths.\r\n\r\nIn the implementation below, I deliberately provided a method that is able to detect cycles that contain a particular vertex, as well a method that fetches all the cycles *comprised of only unique vertices*. So that you can play around by changing them and make sure that *map* should never contain the last segment of cycle. I.e. only entry `2-&gt;3` will be added by into map, but entry `3-&gt;2` will not, otherwise you can create an infinite loop.\r\n\r\nImplementation of the graph below utilizes only *vertexes*. Depth first search algorithm is implemented *iteratively* (although recursive implementation is easier, recursion has limitation in Java especially when dealing with a large dataset and iterative approach is more performant).\r\n```\r\npublic class CyclicGraph {\r\n    private Map&lt;Integer, Vertex&gt; vertexById = new HashMap&lt;&gt;();\r\n    \r\n    public void addVertex(int vertexId, int... neighbours) {\r\n//        vertexById.putIfAbsent(vertexId, new Vertex(vertexId));\r\n//        Vertex current = vertexById.get(vertexId); // does the same as the line below with one important distinction - new Vertex will be instantiated by `computeIfAbsent` only entry is not present\r\n        Vertex current = vertexById.computeIfAbsent(vertexId, Vertex::new); // adding a vertex\r\n        \r\n        for (int next : neighbours) {\r\n            Vertex neighbour = vertexById.computeIfAbsent(next, Vertex::new); // retrieving neighbour\r\n            current.addNeighbour(neighbour);                                  // adding neighbour\r\n        }\r\n    }\r\n    \r\n    public List&lt;List&lt;Vertex&gt;&gt; getCyclesContainingVertex(int targetId) {\r\n        Vertex target = vertexById.get(targetId);\r\n        \r\n        if (vertexById.get(targetId) == null) {\r\n            return Collections.emptyList();\r\n        }\r\n        List&lt;List&lt;Vertex&gt;&gt; cycles = new ArrayList&lt;&gt;();\r\n        \r\n        Deque&lt;Vertex&gt; stack = new ArrayDeque&lt;&gt;();\r\n        Set&lt;Vertex&gt; seen = new HashSet&lt;&gt;();\r\n        Map&lt;Vertex, Vertex&gt; paths = new HashMap&lt;&gt;();\r\n        \r\n        stack.add(target);\r\n        while (!stack.isEmpty()) {\r\n            Vertex current = stack.pop();\r\n            seen.add(current);\r\n            for (Vertex neighbour : current.getNeighbours()) {\r\n                if (seen.contains(neighbour) &amp;&amp; neighbour.equals(target)) { // the cycle was found\r\n                    // build cycle, don&#39;t add vertex to the stack and don&#39;t add new entry to the paths (it can prevent other cycles containing neighbour vertex from being detected)\r\n                    cycles.add(buildCycle(paths, neighbour, current));\r\n                } else if (!seen.contains(neighbour)) {\r\n                    stack.add(neighbour);\r\n                    paths.put(neighbour, current);\r\n                    seen.add(neighbour);\r\n                }\r\n            }\r\n        }\r\n        return cycles;\r\n    }\r\n    \r\n    public List&lt;List&lt;Vertex&gt;&gt; getAllCycles() {\r\n        List&lt;List&lt;Vertex&gt;&gt; cycles = new ArrayList&lt;&gt;();\r\n        Deque&lt;Vertex&gt; stack = new ArrayDeque&lt;&gt;();\r\n        Set&lt;Vertex&gt; seen = new HashSet&lt;&gt;();\r\n        \r\n        for (Vertex next : vertexById.values()) {\r\n            if (seen.contains(next)) continue;\r\n            \r\n            Map&lt;Vertex, Vertex&gt; paths = new HashMap&lt;&gt;();\r\n            stack.add(next);\r\n            while (!stack.isEmpty()) {\r\n                Vertex current = stack.pop();\r\n                seen.add(current);\r\n                for (Vertex neighbour : current.getNeighbours()) {\r\n                    if (seen.contains(neighbour)) { // the cycle was found\r\n                        // build cycle, don&#39;t add vertex to the stack and don&#39;t add new entry to the paths (it can prevent other cycles containing neighbour vertex from being detected)\r\n                        cycles.add(buildCycle(paths, neighbour, current));\r\n                    } else {\r\n                        stack.add(neighbour);\r\n                        paths.put(neighbour, current);\r\n                        seen.add(neighbour);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return cycles;\r\n    }\r\n    \r\n    private List&lt;Vertex&gt; buildCycle(Map&lt;Vertex, Vertex&gt; paths, Vertex start, Vertex end) {\r\n        Deque&lt;Vertex&gt; cycle = new ArrayDeque&lt;&gt;();\r\n        Vertex current = end;\r\n        while (current != null &amp;&amp; !current.equals(start)) {\r\n            cycle.addFirst(current);\r\n            current = paths.get(current);\r\n        }\r\n        cycle.addFirst(start);\r\n        return new ArrayList&lt;&gt;(cycle);\r\n    }\r\n    \r\n    public void clear() {\r\n        this.vertexById.clear();\r\n    }\r\n    \r\n    private class Vertex {\r\n        private int id;\r\n        private Set&lt;Vertex&gt; neighbours = new HashSet&lt;&gt;();\r\n        \r\n        public Vertex(int id) {\r\n            this.id = id;\r\n        }\r\n        \r\n        public boolean addNeighbour(Vertex vert) {\r\n            return neighbours.add(vert);\r\n        }\r\n        \r\n        // getters, hashCode/equeals, toString()\r\n    }\r\n}\r\n```\r\nExample of a bit more elaborate graph used in demo together with the graph provided in the question.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n`main()` - demo\r\n\r\n    public static void main(String[] args) {\r\n        CyclicGraph graph = new CyclicGraph();\r\n        \r\n        System.out.println(&quot;Graph described in the question (only cycles that include vertex 1):&quot;);\r\n        graph.addVertex(1, 2);\r\n        graph.addVertex(2, 1, 3);\r\n        graph.addVertex(3, 1, 2);\r\n    \r\n        for (List&lt;Vertex&gt; cycle : graph.getCyclesContainingVertex(1)) {\r\n            System.out.println(cycle);\r\n        }\r\n        \r\n        graph.clear();\r\n        System.out.println(&quot;\\nMore elaborate Graph (all cycles):&quot;);\r\n        \r\n        graph.addVertex(1, 2);\r\n        graph.addVertex(2, 1, 5);\r\n        graph.addVertex(3, 1, 2);\r\n        graph.addVertex(4, 1, 3);\r\n        graph.addVertex(5, 3, 4);\r\n        \r\n        for (List&lt;Vertex&gt; cycle : graph.getAllCycles()) {\r\n            System.out.println(cycle);\r\n        }\r\n    }\r\n\r\n**Output**\r\n```\r\nGraph described in the question (cycles that lead to 1):\r\n[Vertex{ 1 }, Vertex{ 2 }] // 1 is reachable from 2\r\n[Vertex{ 1 }, Vertex{ 2 }, Vertex{ 3 }] // 1 is reachable from 3\r\n\r\nMore elaborate Graph (all cycles):\r\n[Vertex{ 1 }, Vertex{ 2 }] // 1 is reachable from 2\r\n[Vertex{ 2 }, Vertex{ 5 }, Vertex{ 3 }] // 2 is reachable from 3\r\n[Vertex{ 1 }, Vertex{ 2 }, Vertex{ 5 }, Vertex{ 3 }] // 1 is reachable from 3\r\n[Vertex{ 3 }, Vertex{ 1 }, Vertex{ 2 }, Vertex{ 5 }, Vertex{ 4 }] // 3 is reachable from 4\r\n[Vertex{ 1 }, Vertex{ 2 }, Vertex{ 5 }, Vertex{ 4 }] // 1 is reachable from 4\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/VXP3km.jpg","title":"Find all Cycles in the Directed Graph including back edges","body":"<p>You were close to the answer.</p>\n<p>In order to <em>detect a cycle</em> in a graph, you need to use the <strong>Depth first search</strong> algorithm. That's correct.</p>\n<p>But there are a couple of things in your solution that has to improved:</p>\n<ul>\n<li>For this task, you don't need <em>edges</em>. Because you can model a <em>directed graph</em> by using <em>vertices</em> only. <em>Edges</em> are useful when you deal with a weighted graph (i.e. every edge is associated with a value) and need to address, for instance, the problem of the shortest path using Dijkstra's or Bellman–Ford algorithms. Then you really need edges to model the connections between vertices. But for in this task, edges are redundant, each <em>vertex can point to other vertexes</em>.</li>\n<li><em>Adjacency list</em> mustn't be a separate data structure. Instead, every <em>vertex</em> has to be aware of its <em>neighbors</em>. I.e. each <em>vertex</em> must hold a reference to a collection of <em>adjacent vertices</em>.</li>\n<li>Since <em>graph</em> can contain <em>multiple cycles</em>, the result need to be represented by the nested collection. Like list of lists <code>List&lt;List&lt;Vertex&gt;&gt;</code>.</li>\n<li><code>contains()</code> checks done on a <code>List</code> are very costful (<strong>O(n)</strong> <em>in the worse case</em>), and isn't list capable to associate elements. <code>Map</code> is a better choice because map allow to retrieve values in a constant time and associate multiple keys with the same value (i.e. model cases when a group of vertices points is being connected with a single vertex).</li>\n</ul>\n<p>Note that cycle <code>[1,2,3,2,1]</code> isn't valid because there's <em>more than one vertex</em> that was <em>visited twice</em>. It's a combination of two cycles <code>1-2</code> and <code>2-3</code>. If you need to spot all the cycles in a graph they must be detected only one at a time, otherwise attempt to restore the path of a cycle might fail because of references pointing one at each other. Only because in your solution is capable to track only a single path, you didn't run in to trouble with the second cycle <code>2-&gt;3-&gt;2</code>. I.e. all vertexes (<em>except one</em>) in a cycle must be unique, that will allow to maintain multiple paths.</p>\n<p>In the implementation below, I deliberately provided a method that is able to detect cycles that contain a particular vertex, as well a method that fetches all the cycles <em>comprised of only unique vertices</em>. So that you can play around by changing them and make sure that <em>map</em> should never contain the last segment of cycle. I.e. only entry <code>2-&gt;3</code> will be added by into map, but entry <code>3-&gt;2</code> will not, otherwise you can create an infinite loop.</p>\n<p>Implementation of the graph below utilizes only <em>vertexes</em>. Depth first search algorithm is implemented <em>iteratively</em> (although recursive implementation is easier, recursion has limitation in Java especially when dealing with a large dataset and iterative approach is more performant).</p>\n<pre><code>public class CyclicGraph {\n    private Map&lt;Integer, Vertex&gt; vertexById = new HashMap&lt;&gt;();\n    \n    public void addVertex(int vertexId, int... neighbours) {\n//        vertexById.putIfAbsent(vertexId, new Vertex(vertexId));\n//        Vertex current = vertexById.get(vertexId); // does the same as the line below with one important distinction - new Vertex will be instantiated by `computeIfAbsent` only entry is not present\n        Vertex current = vertexById.computeIfAbsent(vertexId, Vertex::new); // adding a vertex\n        \n        for (int next : neighbours) {\n            Vertex neighbour = vertexById.computeIfAbsent(next, Vertex::new); // retrieving neighbour\n            current.addNeighbour(neighbour);                                  // adding neighbour\n        }\n    }\n    \n    public List&lt;List&lt;Vertex&gt;&gt; getCyclesContainingVertex(int targetId) {\n        Vertex target = vertexById.get(targetId);\n        \n        if (vertexById.get(targetId) == null) {\n            return Collections.emptyList();\n        }\n        List&lt;List&lt;Vertex&gt;&gt; cycles = new ArrayList&lt;&gt;();\n        \n        Deque&lt;Vertex&gt; stack = new ArrayDeque&lt;&gt;();\n        Set&lt;Vertex&gt; seen = new HashSet&lt;&gt;();\n        Map&lt;Vertex, Vertex&gt; paths = new HashMap&lt;&gt;();\n        \n        stack.add(target);\n        while (!stack.isEmpty()) {\n            Vertex current = stack.pop();\n            seen.add(current);\n            for (Vertex neighbour : current.getNeighbours()) {\n                if (seen.contains(neighbour) &amp;&amp; neighbour.equals(target)) { // the cycle was found\n                    // build cycle, don't add vertex to the stack and don't add new entry to the paths (it can prevent other cycles containing neighbour vertex from being detected)\n                    cycles.add(buildCycle(paths, neighbour, current));\n                } else if (!seen.contains(neighbour)) {\n                    stack.add(neighbour);\n                    paths.put(neighbour, current);\n                    seen.add(neighbour);\n                }\n            }\n        }\n        return cycles;\n    }\n    \n    public List&lt;List&lt;Vertex&gt;&gt; getAllCycles() {\n        List&lt;List&lt;Vertex&gt;&gt; cycles = new ArrayList&lt;&gt;();\n        Deque&lt;Vertex&gt; stack = new ArrayDeque&lt;&gt;();\n        Set&lt;Vertex&gt; seen = new HashSet&lt;&gt;();\n        \n        for (Vertex next : vertexById.values()) {\n            if (seen.contains(next)) continue;\n            \n            Map&lt;Vertex, Vertex&gt; paths = new HashMap&lt;&gt;();\n            stack.add(next);\n            while (!stack.isEmpty()) {\n                Vertex current = stack.pop();\n                seen.add(current);\n                for (Vertex neighbour : current.getNeighbours()) {\n                    if (seen.contains(neighbour)) { // the cycle was found\n                        // build cycle, don't add vertex to the stack and don't add new entry to the paths (it can prevent other cycles containing neighbour vertex from being detected)\n                        cycles.add(buildCycle(paths, neighbour, current));\n                    } else {\n                        stack.add(neighbour);\n                        paths.put(neighbour, current);\n                        seen.add(neighbour);\n                    }\n                }\n            }\n        }\n        return cycles;\n    }\n    \n    private List&lt;Vertex&gt; buildCycle(Map&lt;Vertex, Vertex&gt; paths, Vertex start, Vertex end) {\n        Deque&lt;Vertex&gt; cycle = new ArrayDeque&lt;&gt;();\n        Vertex current = end;\n        while (current != null &amp;&amp; !current.equals(start)) {\n            cycle.addFirst(current);\n            current = paths.get(current);\n        }\n        cycle.addFirst(start);\n        return new ArrayList&lt;&gt;(cycle);\n    }\n    \n    public void clear() {\n        this.vertexById.clear();\n    }\n    \n    private class Vertex {\n        private int id;\n        private Set&lt;Vertex&gt; neighbours = new HashSet&lt;&gt;();\n        \n        public Vertex(int id) {\n            this.id = id;\n        }\n        \n        public boolean addNeighbour(Vertex vert) {\n            return neighbours.add(vert);\n        }\n        \n        // getters, hashCode/equeals, toString()\n    }\n}\n</code></pre>\n<p>Example of a bit more elaborate graph used in demo together with the graph provided in the question.</p>\n<p><a href=\"https://i.stack.imgur.com/VXP3km.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VXP3km.jpg\" alt=\"enter image description here\" /></a></p>\n<p><code>main()</code> - demo</p>\n<pre><code>public static void main(String[] args) {\n    CyclicGraph graph = new CyclicGraph();\n    \n    System.out.println(&quot;Graph described in the question (only cycles that include vertex 1):&quot;);\n    graph.addVertex(1, 2);\n    graph.addVertex(2, 1, 3);\n    graph.addVertex(3, 1, 2);\n\n    for (List&lt;Vertex&gt; cycle : graph.getCyclesContainingVertex(1)) {\n        System.out.println(cycle);\n    }\n    \n    graph.clear();\n    System.out.println(&quot;\\nMore elaborate Graph (all cycles):&quot;);\n    \n    graph.addVertex(1, 2);\n    graph.addVertex(2, 1, 5);\n    graph.addVertex(3, 1, 2);\n    graph.addVertex(4, 1, 3);\n    graph.addVertex(5, 3, 4);\n    \n    for (List&lt;Vertex&gt; cycle : graph.getAllCycles()) {\n        System.out.println(cycle);\n    }\n}\n</code></pre>\n<p><strong>Output</strong></p>\n<pre><code>Graph described in the question (cycles that lead to 1):\n[Vertex{ 1 }, Vertex{ 2 }] // 1 is reachable from 2\n[Vertex{ 1 }, Vertex{ 2 }, Vertex{ 3 }] // 1 is reachable from 3\n\nMore elaborate Graph (all cycles):\n[Vertex{ 1 }, Vertex{ 2 }] // 1 is reachable from 2\n[Vertex{ 2 }, Vertex{ 5 }, Vertex{ 3 }] // 2 is reachable from 3\n[Vertex{ 1 }, Vertex{ 2 }, Vertex{ 5 }, Vertex{ 3 }] // 1 is reachable from 3\n[Vertex{ 3 }, Vertex{ 1 }, Vertex{ 2 }, Vertex{ 5 }, Vertex{ 4 }] // 3 is reachable from 4\n[Vertex{ 1 }, Vertex{ 2 }, Vertex{ 5 }, Vertex{ 4 }] // 1 is reachable from 4\n</code></pre>\n"}],"owner":{"account_id":10091227,"reputation":304,"user_id":7458152,"accept_rate":67,"display_name":"Arundhathi D"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1349,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":71813109,"answer_count":1,"score":2,"last_activity_date":1695804713,"creation_date":1649314452,"question_id":71777572,"body_markdown":"Given a *graph* below, find all the possible path from vertex `1` to come back to `1` including back edges.\r\n\r\n**Result:**\r\n\r\n            [1,2,3,2,1]\r\n            [1,2,1]\r\n            [1,2,3,1]\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nGjgt.png\r\n\r\nI tried using DFS able to get only one cycle `[1,2,3,2,1]`. I&#39;m not getting how to get track of back edges. \r\n\r\n**Code**:\r\n\r\n    private static void dfsNow(Node vertex, HashMap&lt;String, List&lt;Node&gt;&gt; adjList,\r\n                               HashSet&lt;String&gt; visited, HashSet&lt;String&gt; candidates,\r\n                               ArrayList&lt;String&gt; res) {\r\n\r\n        candidates.add(vertex.v);\r\n        res.add(vertex.v);\r\n\r\n        for(Node adj :  adjList.get(vertex.v)) {\r\n\r\n            if(candidates.contains(adj.v)) {\r\n               \r\n                res.add(adj.v);\r\n                System.out.println(vertex.v+&quot;:&quot;+adj.v);\r\n            } else {\r\n                //adj.setParent(vertex); // build the trace back\r\n                dfsNow( adj, adjList,visited,candidates,res);\r\n            }\r\n        }\r\n        candidates.remove(vertex.v);\r\n        visited.add(vertex.v);\r\n    }\r\n\r\n","title":"Find all Cycles in the Directed Graph including back edges","body":"<p>Given a <em>graph</em> below, find all the possible path from vertex <code>1</code> to come back to <code>1</code> including back edges.</p>\n<p><strong>Result:</strong></p>\n<pre><code>        [1,2,3,2,1]\n        [1,2,1]\n        [1,2,3,1]\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/nGjgt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nGjgt.png\" alt=\"enter image description here\" /></a></p>\n<p>I tried using DFS able to get only one cycle <code>[1,2,3,2,1]</code>. I'm not getting how to get track of back edges.</p>\n<p><strong>Code</strong>:</p>\n<pre><code>private static void dfsNow(Node vertex, HashMap&lt;String, List&lt;Node&gt;&gt; adjList,\n                           HashSet&lt;String&gt; visited, HashSet&lt;String&gt; candidates,\n                           ArrayList&lt;String&gt; res) {\n\n    candidates.add(vertex.v);\n    res.add(vertex.v);\n\n    for(Node adj :  adjList.get(vertex.v)) {\n\n        if(candidates.contains(adj.v)) {\n           \n            res.add(adj.v);\n            System.out.println(vertex.v+&quot;:&quot;+adj.v);\n        } else {\n            //adj.setParent(vertex); // build the trace back\n            dfsNow( adj, adjList,visited,candidates,res);\n        }\n    }\n    candidates.remove(vertex.v);\n    visited.add(vertex.v);\n}\n</code></pre>\n"},{"tags":["java","mongodb"],"answers":[{"tags":[],"owner":{"account_id":8353193,"reputation":76,"user_id":6274514,"display_name":"ashwani bakshi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695804362,"creation_date":1695804362,"answer_id":77185894,"question_id":77185138,"body_markdown":"The below code worked and got the required result:-\r\n\r\n    query.put(&quot;nodes._id&quot;,&quot;core&quot;);\r\n    query.put(&quot;nodes.attvalues&quot;,new BasicDBObject(&quot;$elemMatch&quot;,new \r\n    BasicDBObject(&quot;attr&quot;,&quot;last_mod_date&quot;)));\r\n    query.put(&quot;nodes.attvalues.&quot;,new BasicDBObject(&quot;$elemMatch&quot;,new \r\n    BasicDBObject(&quot;value&quot;,new \r\n    BasicDBObject(&quot;$gt&quot;,then.format(format)).append(&quot;$lt&quot;,now.format(format)))));\r\n\r\n","title":"How to add $elemMatch of mongodb in java code?","body":"<p>The below code worked and got the required result:-</p>\n<pre><code>query.put(&quot;nodes._id&quot;,&quot;core&quot;);\nquery.put(&quot;nodes.attvalues&quot;,new BasicDBObject(&quot;$elemMatch&quot;,new \nBasicDBObject(&quot;attr&quot;,&quot;last_mod_date&quot;)));\nquery.put(&quot;nodes.attvalues.&quot;,new BasicDBObject(&quot;$elemMatch&quot;,new \nBasicDBObject(&quot;value&quot;,new \nBasicDBObject(&quot;$gt&quot;,then.format(format)).append(&quot;$lt&quot;,now.format(format)))));\n</code></pre>\n"}],"owner":{"account_id":8353193,"reputation":76,"user_id":6274514,"display_name":"ashwani bakshi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77185894,"answer_count":1,"score":0,"last_activity_date":1695804362,"creation_date":1695796693,"question_id":77185138,"body_markdown":"this is my query \r\ndb.collectionname.find( {&quot;nodes._id&quot;:&quot;core&quot;,&quot;nodes.attvalues&quot;:{&quot;$elemMatch&quot;:{attr:&quot;last_mod_date&quot;,value:{$gte:&quot;2023-09-17T00:00:00Z&quot;,$lt:&quot;2023-09-24T00:00:00Z&quot;}}}}).count();\r\n\r\nI want to use it in my java code.\r\n\r\nThe below code is giving me the data.\r\n\r\n```\r\nDateTimeFormatter format = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&#39;T&#39;00:00:00&#39;Z&#39;&quot;);\r\n\r\n        LocalDateTime now = LocalDateTime.now();\r\n        LocalDateTime then = now.minusDays(8);\r\n\r\nBasicDBObject query = new BasicDBObject();\r\nquery.put(&quot;nodes._id&quot;,&quot;core&quot;);\r\nquery.put(&quot;nodes.attvalues.attr&quot;,&quot;last_mod_date&quot;);\r\nquery.put(&quot;nodes.attvalues.value&quot;,new BasicDBObject(&quot;$gt&quot;,then.format(format)));\r\nquery.put(&quot;nodes.attvalues.value&quot;,new BasicDBObject(&quot;$lt&quot;,now.format(format)));\r\n\r\n```\r\nBut I want to that how can i update the current code with the above mongo query and fetch the required data from the db.\r\n\r\nThe collection looks like this.\r\n\r\n```\r\n[\r\n  {\r\n    _id: &#39;55f6d14b5ddb3ae7d5d08a7b&#39;,\r\n    _class: &#39;com.somfy.pcpwebapp.domain.SWOGraph&#39;,\r\n    label: &#39;5100188/C - Make - Gray &#39;,\r\n    mode: &#39;directed&#39;,\r\n    type: &#39;workflow&#39;,\r\n    nodes: [\r\n      {\r\n        _id: &#39;core&#39;,\r\n        label: &#39;core&#39;,\r\n        type: &#39;core&#39;,\r\n        attvalues: [\r\n          { attr: &#39;creation_date&#39;, value: &#39;2015-09-14T13:53:06.000Z&#39; },\r\n          { attr: &#39;designation&#39;, value: &#39;LEAFLET UTIL. DEXXO PRO RTS&#39; },\r\n          { attr: &#39;distribution_sites&#39;, value: [] },\r\n          { attr: &#39;distribution_workflow_ids&#39;, value: {} },\r\n          { attr: &#39;flow&#39;, value: &#39;1&#39; },\r\n          { attr: &#39;flow_to_task_definition_ids&#39;, value: [ [Array] ] },\r\n          { attr: &#39;last_mod_date&#39;, value: &#39;2023-09-20T07:23:30.093Z&#39; },\r\n          {\r\n            attr: &#39;last_mod_user_id&#39;,\r\n            value: &#39;55b66bb127772e0efc3669e2&#39;\r\n          },\r\n          { attr: &#39;last_mod_user_login&#39;, value: &#39;marith01&#39; },\r\n          { attr: &#39;manuf_exists_offserie&#39;, value: &#39;&#39; }\r\n        ]\r\n      },\r\n      {\r\n        _id: &#39;MethodsSite&#39;,\r\n        label: &#39;MethodsSite&#39;,\r\n        type: &#39;task&#39;,\r\n        attvalues: [\r\n          {\r\n            attr: &#39;assignable_user_ids&#39;,\r\n            value: [\r\n              &#39;55b66bb127772e0efc3669cf&#39;,\r\n              &#39;55b66bb127772e0efc3669e2&#39;,\r\n              &#39;55b66bb127772e0efc3669da&#39;,\r\n              &#39;55b66bb127772e0efc3669d9&#39;,\r\n              &#39;55f29e07618fe271f2c57227&#39;\r\n            ]\r\n          },\r\n          {\r\n            attr: &#39;assigned_user_displaynames&#39;,\r\n            value: [ &#39;MARINO Thierry&#39;, &#39;RAZNIK Pascal&#39; ]\r\n          },\r\n          {\r\n            attr: &#39;assigned_user_emails&#39;,\r\n            value: [ &#39;Thierry.MARINO@simu.com&#39;, &#39;Pascal.RAZNIK@simu.com&#39; ]\r\n          },\r\n          {\r\n            attr: &#39;assigned_user_ids&#39;,\r\n            value: [ &#39;55b66bb127772e0efc3669e2&#39;, &#39;55b66bb127772e0efc3669d9&#39; ]\r\n          },\r\n          { attr: &#39;comment&#39;, value: &#39;&#39; },\r\n          { attr: &#39;completed_date&#39;, value: &#39;2015-09-15T06:30:05Z&#39; },\r\n          { attr: &#39;completed_user_id&#39;, value: &#39;MARINO Thierry&#39; },\r\n          {\r\n            attr: &#39;completing_date&#39;,\r\n            value: &#39;2015-09-15T06:29:29.843Z&#39;\r\n          },\r\n          {\r\n            attr: &#39;completing_user_displayname&#39;,\r\n            value: &#39;MARINO Thierry&#39;\r\n          },\r\n          {\r\n            attr: &#39;completing_user_email&#39;,\r\n            value: &#39;Thierry.MARINO@simu.com&#39;\r\n          },\r\n          {\r\n            attr: &#39;completing_user_id&#39;,\r\n            value: &#39;55b66bb127772e0efc3669e2&#39;\r\n          },\r\n          { attr: &#39;last_mod_date&#39;, value: &#39;2015-09-03T06:30:05Z&#39; },\r\n          { attr: &#39;last_mod_user_login&#39;, value: &#39;MARINO Thierry&#39; }\r\n        ]\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    _id: &#39;55f6d14b5ddb3ae7d5d09a8b&#39;,\r\n    _class: &#39;com.somfy.pcpwebapp.domain.SWOGraph&#39;,\r\n    label: &#39;5100188/C - Make - Demo &#39;,\r\n    mode: &#39;directed&#39;,\r\n    type: &#39;workflow&#39;,\r\n    nodes: [\r\n      {\r\n        _id: &#39;core&#39;,\r\n        label: &#39;core&#39;,\r\n        type: &#39;coree&#39;,\r\n        attvalues: [\r\n          { attr: &#39;creation_date&#39;, value: &#39;2015-09-14T13:53:06.000Z&#39; },\r\n          { attr: &#39;designation&#39;, value: &#39;LEAFLET UTIL. DEXXO PRO RTS&#39; },\r\n          { attr: &#39;distribution_sites&#39;, value: [] },\r\n          { attr: &#39;distribution_workflow_ids&#39;, value: {} },\r\n          { attr: &#39;flow&#39;, value: &#39;1&#39; },\r\n          { attr: &#39;flow_to_task_definition_ids&#39;, value: [ [Array] ] },\r\n          { attr: &#39;last_mod_date&#39;, value: &#39;2015-09-30T07:23:30.093Z&#39; },\r\n          {\r\n            attr: &#39;last_mod_user_id&#39;,\r\n            value: &#39;55b66bb127772e0efc3669e2&#39;\r\n          },\r\n          { attr: &#39;last_mod_user_login&#39;, value: &#39;marith01&#39; },\r\n          { attr: &#39;manuf_exists_offserie&#39;, value: &#39;&#39; }\r\n        ]\r\n      },\r\n      {\r\n        _id: &#39;MethodsSite&#39;,\r\n        label: &#39;MethodsSite&#39;,\r\n        type: &#39;task&#39;,\r\n        attvalues: [\r\n          {\r\n            attr: &#39;assignable_user_ids&#39;,\r\n            value: [\r\n              &#39;55b66bb127772e0efc3669cf&#39;,\r\n              &#39;55b66bb127772e0efc3669e2&#39;,\r\n              &#39;55b66bb127772e0efc3669da&#39;,\r\n              &#39;55b66bb127772e0efc3669d9&#39;,\r\n              &#39;55f29e07618fe271f2c57227&#39;\r\n            ]\r\n          },\r\n          {\r\n            attr: &#39;assigned_user_displaynames&#39;,\r\n            value: [ &#39;MARINO Thierry&#39;, &#39;RAZNIK Pascal&#39; ]\r\n          },\r\n          {\r\n            attr: &#39;assigned_user_emails&#39;,\r\n            value: [ &#39;Thierry.MARINO@simu.com&#39;, &#39;Pascal.RAZNIK@simu.com&#39; ]\r\n          },\r\n          {\r\n            attr: &#39;assigned_user_ids&#39;,\r\n            value: [ &#39;55b66bb127772e0efc3669e2&#39;, &#39;55b66bb127772e0efc3669d9&#39; ]\r\n          },\r\n          { attr: &#39;comment&#39;, value: &#39;&#39; },\r\n          { attr: &#39;completed_date&#39;, value: &#39;2015-09-15T06:30:05Z&#39; },\r\n          { attr: &#39;completed_user_id&#39;, value: &#39;MARINO Thierry&#39; },\r\n          {\r\n            attr: &#39;completing_date&#39;,\r\n            value: &#39;2015-09-15T06:29:29.843Z&#39;\r\n          },\r\n          {\r\n            attr: &#39;completing_user_displayname&#39;,\r\n            value: &#39;MARINO Thierry&#39;\r\n          },\r\n          {\r\n            attr: &#39;completing_user_email&#39;,\r\n            value: &#39;Thierry.MARINO@simu.com&#39;\r\n          },\r\n          {\r\n            attr: &#39;completing_user_id&#39;,\r\n            value: &#39;55b66bb127772e0efc3669e2&#39;\r\n          },\r\n          { attr: &#39;last_mod_date&#39;, value: &#39;2015-09-15T06:30:05Z&#39; },\r\n          { attr: &#39;last_mod_user_login&#39;, value: &#39;MARINO Thierry&#39; }\r\n        ]\r\n      }\r\n    ]\r\n  }\r\n]\r\n```\r\n\r\n\r\n\r\nquery.put(&quot;nodes._id&quot;,&quot;core&quot;);\r\nquery.put(&quot;nodes.attvalues&quot;,new BasicDBObject(&quot;$elemMatch&quot;,new BasicDBObject(&quot;attr&quot;,&quot;last_mod_date&quot;)));\r\nquery.put(&quot;nodes.attvalues.&quot;,new BasicDBObject(&quot;$elemMatch&quot;,new BasicDBObject(&quot;value&quot;,new BasicDBObject(&quot;$gt&quot;,then.format(format)))));\r\nquery.put(&quot;nodes.attvalues.&quot;,new BasicDBObject(&quot;$elemMatch&quot;,new BasicDBObject(&quot;value&quot;,new BasicDBObject(&quot;$lt&quot;,now.format(format)))));","title":"How to add $elemMatch of mongodb in java code?","body":"<p>this is my query\ndb.collectionname.find( {&quot;nodes._id&quot;:&quot;core&quot;,&quot;nodes.attvalues&quot;:{&quot;$elemMatch&quot;:{attr:&quot;last_mod_date&quot;,value:{$gte:&quot;2023-09-17T00:00:00Z&quot;,$lt:&quot;2023-09-24T00:00:00Z&quot;}}}}).count();</p>\n<p>I want to use it in my java code.</p>\n<p>The below code is giving me the data.</p>\n<pre><code>DateTimeFormatter format = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd'T'00:00:00'Z'&quot;);\n\n        LocalDateTime now = LocalDateTime.now();\n        LocalDateTime then = now.minusDays(8);\n\nBasicDBObject query = new BasicDBObject();\nquery.put(&quot;nodes._id&quot;,&quot;core&quot;);\nquery.put(&quot;nodes.attvalues.attr&quot;,&quot;last_mod_date&quot;);\nquery.put(&quot;nodes.attvalues.value&quot;,new BasicDBObject(&quot;$gt&quot;,then.format(format)));\nquery.put(&quot;nodes.attvalues.value&quot;,new BasicDBObject(&quot;$lt&quot;,now.format(format)));\n\n</code></pre>\n<p>But I want to that how can i update the current code with the above mongo query and fetch the required data from the db.</p>\n<p>The collection looks like this.</p>\n<pre><code>[\n  {\n    _id: '55f6d14b5ddb3ae7d5d08a7b',\n    _class: 'com.somfy.pcpwebapp.domain.SWOGraph',\n    label: '5100188/C - Make - Gray ',\n    mode: 'directed',\n    type: 'workflow',\n    nodes: [\n      {\n        _id: 'core',\n        label: 'core',\n        type: 'core',\n        attvalues: [\n          { attr: 'creation_date', value: '2015-09-14T13:53:06.000Z' },\n          { attr: 'designation', value: 'LEAFLET UTIL. DEXXO PRO RTS' },\n          { attr: 'distribution_sites', value: [] },\n          { attr: 'distribution_workflow_ids', value: {} },\n          { attr: 'flow', value: '1' },\n          { attr: 'flow_to_task_definition_ids', value: [ [Array] ] },\n          { attr: 'last_mod_date', value: '2023-09-20T07:23:30.093Z' },\n          {\n            attr: 'last_mod_user_id',\n            value: '55b66bb127772e0efc3669e2'\n          },\n          { attr: 'last_mod_user_login', value: 'marith01' },\n          { attr: 'manuf_exists_offserie', value: '' }\n        ]\n      },\n      {\n        _id: 'MethodsSite',\n        label: 'MethodsSite',\n        type: 'task',\n        attvalues: [\n          {\n            attr: 'assignable_user_ids',\n            value: [\n              '55b66bb127772e0efc3669cf',\n              '55b66bb127772e0efc3669e2',\n              '55b66bb127772e0efc3669da',\n              '55b66bb127772e0efc3669d9',\n              '55f29e07618fe271f2c57227'\n            ]\n          },\n          {\n            attr: 'assigned_user_displaynames',\n            value: [ 'MARINO Thierry', 'RAZNIK Pascal' ]\n          },\n          {\n            attr: 'assigned_user_emails',\n            value: [ 'Thierry.MARINO@simu.com', 'Pascal.RAZNIK@simu.com' ]\n          },\n          {\n            attr: 'assigned_user_ids',\n            value: [ '55b66bb127772e0efc3669e2', '55b66bb127772e0efc3669d9' ]\n          },\n          { attr: 'comment', value: '' },\n          { attr: 'completed_date', value: '2015-09-15T06:30:05Z' },\n          { attr: 'completed_user_id', value: 'MARINO Thierry' },\n          {\n            attr: 'completing_date',\n            value: '2015-09-15T06:29:29.843Z'\n          },\n          {\n            attr: 'completing_user_displayname',\n            value: 'MARINO Thierry'\n          },\n          {\n            attr: 'completing_user_email',\n            value: 'Thierry.MARINO@simu.com'\n          },\n          {\n            attr: 'completing_user_id',\n            value: '55b66bb127772e0efc3669e2'\n          },\n          { attr: 'last_mod_date', value: '2015-09-03T06:30:05Z' },\n          { attr: 'last_mod_user_login', value: 'MARINO Thierry' }\n        ]\n      }\n    ]\n  },\n  {\n    _id: '55f6d14b5ddb3ae7d5d09a8b',\n    _class: 'com.somfy.pcpwebapp.domain.SWOGraph',\n    label: '5100188/C - Make - Demo ',\n    mode: 'directed',\n    type: 'workflow',\n    nodes: [\n      {\n        _id: 'core',\n        label: 'core',\n        type: 'coree',\n        attvalues: [\n          { attr: 'creation_date', value: '2015-09-14T13:53:06.000Z' },\n          { attr: 'designation', value: 'LEAFLET UTIL. DEXXO PRO RTS' },\n          { attr: 'distribution_sites', value: [] },\n          { attr: 'distribution_workflow_ids', value: {} },\n          { attr: 'flow', value: '1' },\n          { attr: 'flow_to_task_definition_ids', value: [ [Array] ] },\n          { attr: 'last_mod_date', value: '2015-09-30T07:23:30.093Z' },\n          {\n            attr: 'last_mod_user_id',\n            value: '55b66bb127772e0efc3669e2'\n          },\n          { attr: 'last_mod_user_login', value: 'marith01' },\n          { attr: 'manuf_exists_offserie', value: '' }\n        ]\n      },\n      {\n        _id: 'MethodsSite',\n        label: 'MethodsSite',\n        type: 'task',\n        attvalues: [\n          {\n            attr: 'assignable_user_ids',\n            value: [\n              '55b66bb127772e0efc3669cf',\n              '55b66bb127772e0efc3669e2',\n              '55b66bb127772e0efc3669da',\n              '55b66bb127772e0efc3669d9',\n              '55f29e07618fe271f2c57227'\n            ]\n          },\n          {\n            attr: 'assigned_user_displaynames',\n            value: [ 'MARINO Thierry', 'RAZNIK Pascal' ]\n          },\n          {\n            attr: 'assigned_user_emails',\n            value: [ 'Thierry.MARINO@simu.com', 'Pascal.RAZNIK@simu.com' ]\n          },\n          {\n            attr: 'assigned_user_ids',\n            value: [ '55b66bb127772e0efc3669e2', '55b66bb127772e0efc3669d9' ]\n          },\n          { attr: 'comment', value: '' },\n          { attr: 'completed_date', value: '2015-09-15T06:30:05Z' },\n          { attr: 'completed_user_id', value: 'MARINO Thierry' },\n          {\n            attr: 'completing_date',\n            value: '2015-09-15T06:29:29.843Z'\n          },\n          {\n            attr: 'completing_user_displayname',\n            value: 'MARINO Thierry'\n          },\n          {\n            attr: 'completing_user_email',\n            value: 'Thierry.MARINO@simu.com'\n          },\n          {\n            attr: 'completing_user_id',\n            value: '55b66bb127772e0efc3669e2'\n          },\n          { attr: 'last_mod_date', value: '2015-09-15T06:30:05Z' },\n          { attr: 'last_mod_user_login', value: 'MARINO Thierry' }\n        ]\n      }\n    ]\n  }\n]\n</code></pre>\n<p>query.put(&quot;nodes._id&quot;,&quot;core&quot;);\nquery.put(&quot;nodes.attvalues&quot;,new BasicDBObject(&quot;$elemMatch&quot;,new BasicDBObject(&quot;attr&quot;,&quot;last_mod_date&quot;)));\nquery.put(&quot;nodes.attvalues.&quot;,new BasicDBObject(&quot;$elemMatch&quot;,new BasicDBObject(&quot;value&quot;,new BasicDBObject(&quot;$gt&quot;,then.format(format)))));\nquery.put(&quot;nodes.attvalues.&quot;,new BasicDBObject(&quot;$elemMatch&quot;,new BasicDBObject(&quot;value&quot;,new BasicDBObject(&quot;$lt&quot;,now.format(format)))));</p>\n"},{"tags":["java","spring-boot","kubernetes","jvm","java-11"],"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1695799384,"post_id":77185098,"comment_id":136070858,"body_markdown":"I suggest that you start by finding out why the pods were restarting.","body":"I suggest that you start by finding out why the pods were restarting."},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1695803610,"post_id":77185098,"comment_id":136071630,"body_markdown":"Which kind of threads were reduced? Is it a specific thread pool?","body":"Which kind of threads were reduced? Is it a specific thread pool?"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1695803622,"post_id":77185098,"comment_id":136071636,"body_markdown":"Recent Java version obtain more information about their run environment when running in a container. It is possible that it uses/reports a lower CPU count because of the requests/limits you configured for your pod, this in turn may lead to libraries using a lower number of threads for thread pools and such. You may need to manually override this by instructing Java to assume a higher CPU count with `-XX:ActiveProcessorCount`, e.g, `-XX:ActiveProcessorCount=4` to assume four CPUs.","body":"Recent Java version obtain more information about their run environment when running in a container. It is possible that it uses/reports a lower CPU count because of the requests/limits you configured for your pod, this in turn may lead to libraries using a lower number of threads for thread pools and such. You may need to manually override this by instructing Java to assume a higher CPU count with <code>-XX:ActiveProcessorCount</code>, e.g, <code>-XX:ActiveProcessorCount=4</code> to assume four CPUs."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1695803770,"post_id":77185098,"comment_id":136071667,"body_markdown":"Alternatively, find out if you can configure Undertow manually to use a higher thread count instead of deriving it from the CPU count.","body":"Alternatively, find out if you can configure Undertow manually to use a higher thread count instead of deriving it from the CPU count."},{"owner":{"account_id":20667761,"reputation":53,"user_id":15174185,"display_name":"Chaithra Shenoy"},"score":0,"creation_date":1695812426,"post_id":77185098,"comment_id":136073412,"body_markdown":"If I manually increase the undertow thread count will it not affect the performance of the application?","body":"If I manually increase the undertow thread count will it not affect the performance of the application?"},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1695812506,"post_id":77185098,"comment_id":136073425,"body_markdown":"Changing the amount of threads will likely affect the performance of your application. But isn&#39;t that what you want?","body":"Changing the amount of threads will likely affect the performance of your application. But isn&#39;t that what you want?"},{"owner":{"account_id":20667761,"reputation":53,"user_id":15174185,"display_name":"Chaithra Shenoy"},"score":0,"creation_date":1695812707,"post_id":77185098,"comment_id":136073448,"body_markdown":"The configuration for requests/limits hasn&#39;t changed. It is the same as before migration.","body":"The configuration for requests/limits hasn&#39;t changed. It is the same as before migration."},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1695812804,"post_id":77185098,"comment_id":136073473,"body_markdown":"The ideal configuration may be different with different Spring/Java versions.","body":"The ideal configuration may be different with different Spring/Java versions."},{"owner":{"account_id":20667761,"reputation":53,"user_id":15174185,"display_name":"Chaithra Shenoy"},"score":0,"creation_date":1695812854,"post_id":77185098,"comment_id":136073480,"body_markdown":"Is there any formula to see how many threads I can increase to? for now, the undertow threads are 16 which is a default value.","body":"Is there any formula to see how many threads I can increase to? for now, the undertow threads are 16 which is a default value."},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":1,"creation_date":1695812905,"post_id":77185098,"comment_id":136073493,"body_markdown":"I guess you need to try out different values and see what works best. There are formulas like `number of threads = number of cores * estimated IO time / estimated CPU time` but there are also some issues with that (i.e. at some point, you&#39;ll reach OS or memory limitations when creating too many threads)","body":"I guess you need to try out different values and see what works best. There are formulas like <code>number of threads = number of cores * estimated IO time &#47; estimated CPU time</code> but there are also some issues with that (i.e. at some point, you&#39;ll reach OS or memory limitations when creating too many threads)"},{"owner":{"account_id":20667761,"reputation":53,"user_id":15174185,"display_name":"Chaithra Shenoy"},"score":0,"creation_date":1695813008,"post_id":77185098,"comment_id":136073517,"body_markdown":"Is there a way to find the configuration for the Java version?\nWill the docker image also impact the CPU count?","body":"Is there a way to find the configuration for the Java version? Will the docker image also impact the CPU count?"},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":1,"creation_date":1695813090,"post_id":77185098,"comment_id":136073534,"body_markdown":"Try it and see what works best.","body":"Try it and see what works best."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1695887024,"post_id":77185098,"comment_id":136084388,"body_markdown":"_&quot;The configuration for requests/limits hasn&#39;t changed.&quot;_. You upgraded from Java 8, and since - I believe - Java 10, Java will get more information about the container it&#39;s running in, and use that to calculate an estimate of the equivalent processor count, where previously it would likely use the actual processor count of the underlying machine. If a threadpool is configured using that processor count, you will now get a smaller thread pool.","body":"<i>&quot;The configuration for requests/limits hasn&#39;t changed.&quot;</i>. You upgraded from Java 8, and since - I believe - Java 10, Java will get more information about the container it&#39;s running in, and use that to calculate an estimate of the equivalent processor count, where previously it would likely use the actual processor count of the underlying machine. If a threadpool is configured using that processor count, you will now get a smaller thread pool."}],"owner":{"account_id":20667761,"reputation":53,"user_id":15174185,"display_name":"Chaithra Shenoy"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695803470,"creation_date":1695796129,"question_id":77185098,"body_markdown":"I migrated the Application that was running in Java 8 and Spring Boot version 2.0.8.RELEASE to Java 11 and Spring Boot version 2.7.11.\r\n\r\nMigration was successful and the application is working fine but I could see the JVM threads were reduced a lot and also able to see the undertow server queue was high after migration and due to this, there was an increase in latency. Kubernetes pods were restarting during the high latency time the CPU usage was also high.","title":"JVM threads count decreased after Java 11 migration causing high latency","body":"<p>I migrated the Application that was running in Java 8 and Spring Boot version 2.0.8.RELEASE to Java 11 and Spring Boot version 2.7.11.</p>\n<p>Migration was successful and the application is working fine but I could see the JVM threads were reduced a lot and also able to see the undertow server queue was high after migration and due to this, there was an increase in latency. Kubernetes pods were restarting during the high latency time the CPU usage was also high.</p>\n"},{"tags":["java","constructor","initialization","base-class"],"comments":[{"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1695206749,"post_id":77141529,"comment_id":135992343,"body_markdown":"Try it where `id` is not constant - where it&#39;s passed in to `Foo`&#39;s constructor.","body":"Try it where <code>id</code> is not constant - where it&#39;s passed in to <code>Foo</code>&#39;s constructor."},{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":4,"creation_date":1695207600,"post_id":77141529,"comment_id":135992516,"body_markdown":"Final fields are initialized very early and overridable methods at that point means you&#39;re basically calling a method on a not-fully-initialized object, so there&#39;s a good amount of risk there.","body":"Final fields are initialized very early and overridable methods at that point means you&#39;re basically calling a method on a not-fully-initialized object, so there&#39;s a good amount of risk there."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1695231103,"post_id":77141529,"comment_id":135998069,"body_markdown":"A better idea is to remove `protected final String name` entirely.  Any code in Base that needs the name can just… call `calName()` as needed.  Much simpler and cleaner.","body":"A better idea is to remove <code>protected final String name</code> entirely.  Any code in Base that needs the name can just… call <code>calName()</code> as needed.  Much simpler and cleaner."}],"answers":[{"tags":[],"owner":{"account_id":9376049,"reputation":3355,"user_id":7643517,"display_name":"Nolequen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695218862,"creation_date":1695212170,"answer_id":77142330,"question_id":77141529,"body_markdown":"No, it is not ok.\r\n\r\nCall to abstract method (as well as any kind of overridable method) during object construction is a bad idea.\r\n\r\nSuch calls may result in subtle bugs, as object initialization may happen before the method call.","title":"Is it ok to initialize final member in abstract base class using abtract method?","body":"<p>No, it is not ok.</p>\n<p>Call to abstract method (as well as any kind of overridable method) during object construction is a bad idea.</p>\n<p>Such calls may result in subtle bugs, as object initialization may happen before the method call.</p>\n"},{"tags":[],"owner":{"account_id":6996158,"reputation":63,"user_id":7006701,"display_name":"Y.F."},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695802922,"creation_date":1695802922,"answer_id":77185718,"question_id":77141529,"body_markdown":"Thanks for all your opinions. Now I&#39;ve got some idea about how to handle such situations.\r\n\r\n1. If the field can be constructed directly using default ctor and configured later, I can construct it in the base class as a final field and configure it during the derived constructing phase:\r\n\r\n        abstract class Base {\r\n            protected final Widget core = new Widget();\r\n            public void methodThatUsesCore() { core.display(); }\r\n        }\r\n        public final class Foo42 extends Base {\r\n            {\r\n                core.configure(42, &quot;jklmn&quot;);\r\n            }\r\n        }\r\n\r\n2. If the field has to be constructed with info provided by the derived class, I should put it into the derived class and add an abstract getter in the base class:\r\n\r\n        abstract class Base {\r\n            protected abstract Widget getCore();\r\n            public void methodThatUsesCore() { getCore().display(); }\r\n        }\r\n        public final class Foo42 extends Base {\r\n            private final Widget core = new Widget(42, &quot;jklmn&quot;);\r\n            @Override\r\n            protected Widget getCore() { return core; }\r\n        }\r\n\r\nIs it a reasonable design?","title":"Is it ok to initialize final member in abstract base class using abtract method?","body":"<p>Thanks for all your opinions. Now I've got some idea about how to handle such situations.</p>\n<ol>\n<li><p>If the field can be constructed directly using default ctor and configured later, I can construct it in the base class as a final field and configure it during the derived constructing phase:</p>\n<pre><code> abstract class Base {\n     protected final Widget core = new Widget();\n     public void methodThatUsesCore() { core.display(); }\n }\n public final class Foo42 extends Base {\n     {\n         core.configure(42, &quot;jklmn&quot;);\n     }\n }\n</code></pre>\n</li>\n<li><p>If the field has to be constructed with info provided by the derived class, I should put it into the derived class and add an abstract getter in the base class:</p>\n<pre><code> abstract class Base {\n     protected abstract Widget getCore();\n     public void methodThatUsesCore() { getCore().display(); }\n }\n public final class Foo42 extends Base {\n     private final Widget core = new Widget(42, &quot;jklmn&quot;);\n     @Override\n     protected Widget getCore() { return core; }\n }\n</code></pre>\n</li>\n</ol>\n<p>Is it a reasonable design?</p>\n"}],"owner":{"account_id":6996158,"reputation":63,"user_id":7006701,"display_name":"Y.F."},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1695802922,"creation_date":1695205759,"question_id":77141529,"body_markdown":"I wonder whether I could initialze a final field in an abstract base class with the result of an abtract method, which would be implemented by the derived class.\r\nI understand that derived ctor would call base ctor first, so I guarantee that the abtract method implementation would also depend only on defined-on-declaration final fields of the derived class.\r\nI try the following code and it seems working.\r\n\r\n```\r\nabstract class Base {\r\n    protected final String name = calName();\r\n    protected abstract String calName();\r\n}\r\n\r\npublic final class Foo extends Base {\r\n    private final String id = &quot;42&quot;;\r\n    @Override\r\n    protected String calName() {\r\n        return String.format(&quot;WithId%s&quot;, id);\r\n    }\r\n    public void display() {\r\n        System.out.printf(&quot;name: %s\\n&quot;, name);\r\n        System.out.printf(&quot;id:   %s\\n&quot;, id);\r\n    }\r\n    public static void main(String[] args) {\r\n        var foo = new Foo();\r\n        foo.display();\r\n    }\r\n}\r\n```\r\n\r\n\r\nSo is this a legit action in java, or is it a very bad idea?","title":"Is it ok to initialize final member in abstract base class using abtract method?","body":"<p>I wonder whether I could initialze a final field in an abstract base class with the result of an abtract method, which would be implemented by the derived class.\nI understand that derived ctor would call base ctor first, so I guarantee that the abtract method implementation would also depend only on defined-on-declaration final fields of the derived class.\nI try the following code and it seems working.</p>\n<pre><code>abstract class Base {\n    protected final String name = calName();\n    protected abstract String calName();\n}\n\npublic final class Foo extends Base {\n    private final String id = &quot;42&quot;;\n    @Override\n    protected String calName() {\n        return String.format(&quot;WithId%s&quot;, id);\n    }\n    public void display() {\n        System.out.printf(&quot;name: %s\\n&quot;, name);\n        System.out.printf(&quot;id:   %s\\n&quot;, id);\n    }\n    public static void main(String[] args) {\n        var foo = new Foo();\n        foo.display();\n    }\n}\n</code></pre>\n<p>So is this a legit action in java, or is it a very bad idea?</p>\n"},{"tags":["python","java","jmeter","traffic"],"answers":[{"comments":[{"owner":{"account_id":29540499,"reputation":11,"user_id":22639286,"display_name":"ing-95"},"score":0,"creation_date":1695803443,"post_id":77185698,"comment_id":136071592,"body_markdown":"Thank you for your response. I already added response log and checked it contains my error. Jmeter.log does not help to understand the problem. So you think code syntax is ok, right? I can&#39;t get where the problem is.. any other hint by chance ?","body":"Thank you for your response. I already added response log and checked it contains my error. Jmeter.log does not help to understand the problem. So you think code syntax is ok, right? I can&#39;t get where the problem is.. any other hint by chance ?"},{"owner":{"account_id":29540499,"reputation":11,"user_id":22639286,"display_name":"ing-95"},"score":0,"creation_date":1695803690,"post_id":77185698,"comment_id":136071648,"body_markdown":"I know for sure that IF loop is executed correctly because I added some logs to catch where it enters the condition.. only when there is the error, IF is executed.. the problem is around its content maybe","body":"I know for sure that IF loop is executed correctly because I added some logs to catch where it enters the condition.. only when there is the error, IF is executed.. the problem is around its content maybe"},{"owner":{"account_id":29540499,"reputation":11,"user_id":22639286,"display_name":"ing-95"},"score":0,"creation_date":1695826583,"post_id":77185698,"comment_id":136076532,"body_markdown":"UPDATE: it works using JSR223, I did no change to the code... Thank you for your support","body":"UPDATE: it works using JSR223, I did no change to the code... Thank you for your support"}],"tags":[],"owner":{"account_id":3460456,"reputation":162758,"user_id":2897748,"display_name":"Dmitri T"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695802768,"creation_date":1695802768,"answer_id":77185698,"question_id":77181967,"body_markdown":" 1. Check [jmeter.log file][1] for any suspicious entries \r\n 2. Check if your `response` variable contains the line you&#39;re looking for, you can print it to i.e. the aforementioned `jmeter.log` file with the following line of code:\r\n\r\n        log.info(response.toString());\r\n\r\n    and see what is being returned\r\n 3. [Since JMeter 3.1 it&#39;s recommended to use JSR223 Sampler and Groovy language for scripting][2] mainly for performance reasons. Moreover Groovy has some &quot;syntax sugar&quot; so your code can be shortened to something like:\r\n\r\n\t\tString response = &quot;python myscript.py&quot;.execute().text\r\n\t\t\r\n\t\tif (response.contains(&quot;ERROR-TRAFFIC&quot;)){\r\n\t\t    SampleResult.setResponseCode(&quot;500&quot;);\r\n\t\t    SampleResult.setSuccessful(false);\r\n\t\t}\r\n\r\n   More information on Groovy scripting in JMeter: [Apache Groovy: What Is Groovy Used For?][3]\r\n\r\n\r\n  [1]: https://jmeter.apache.org/usermanual/get-started.html#logging\r\n  [2]: https://jmeter.apache.org/usermanual/best-practices.html#bsh_scripting\r\n  [3]: https://www.blazemeter.com/blog/apache-groovy","title":"jmeter SampleResult.setSuccessful(false) not working","body":"<ol>\n<li><p>Check <a href=\"https://jmeter.apache.org/usermanual/get-started.html#logging\" rel=\"nofollow noreferrer\">jmeter.log file</a> for any suspicious entries</p>\n</li>\n<li><p>Check if your <code>response</code> variable contains the line you're looking for, you can print it to i.e. the aforementioned <code>jmeter.log</code> file with the following line of code:</p>\n<pre><code>log.info(response.toString());\n</code></pre>\n<p>and see what is being returned</p>\n</li>\n<li><p><a href=\"https://jmeter.apache.org/usermanual/best-practices.html#bsh_scripting\" rel=\"nofollow noreferrer\">Since JMeter 3.1 it's recommended to use JSR223 Sampler and Groovy language for scripting</a> mainly for performance reasons. Moreover Groovy has some &quot;syntax sugar&quot; so your code can be shortened to something like:</p>\n<pre><code>String response = &quot;python myscript.py&quot;.execute().text\n\nif (response.contains(&quot;ERROR-TRAFFIC&quot;)){\n    SampleResult.setResponseCode(&quot;500&quot;);\n    SampleResult.setSuccessful(false);\n}\n</code></pre>\n</li>\n</ol>\n<p>More information on Groovy scripting in JMeter: <a href=\"https://www.blazemeter.com/blog/apache-groovy\" rel=\"nofollow noreferrer\">Apache Groovy: What Is Groovy Used For?</a></p>\n"}],"owner":{"account_id":29540499,"reputation":11,"user_id":22639286,"display_name":"ing-95"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695802768,"creation_date":1695746656,"question_id":77181967,"body_markdown":"I&#39;m using a loop of beanShell samplers starting threads and, for each thread, a python script is executed, that returns a particular string. I want the thread to fail if the returning string contains a specific error. \r\n\r\nHere my code:\r\n\r\n\r\n```\r\nimport java.io.BufferedReader;\r\nimport java.io.InputStreamReader;\r\n\r\nRuntime r = Runtime.getRuntime();\r\nProcess p = r.exec(&quot;python myscript.py&quot;);\r\np.waitFor();\r\nBufferedReader b = new BufferedReader(new InputStreamReader(p.getInputStream()));\r\nString line = &quot;&quot;;\r\nStringBuilder response = new StringBuilder();\r\nwhile ((line = b.readLine()) != null) {\r\n    response.append(line);\r\n    response.append(&quot;\\n&quot;);\r\n}\r\nb.close();\r\n\r\nif (response.toString().contains(&quot;ERROR-TRAFFIC&quot;)){\r\n    SampleResult.setResponseCode(&quot;500&quot;); \r\n    SampleResult.setSuccessful(false);\r\n}\r\n```\r\n\r\n\r\nUsing this code, if condition is correctly executed when the error is present, but in the traffic results I don&#39;t see any thread failure. Any hints ??\r\n","title":"jmeter SampleResult.setSuccessful(false) not working","body":"<p>I'm using a loop of beanShell samplers starting threads and, for each thread, a python script is executed, that returns a particular string. I want the thread to fail if the returning string contains a specific error.</p>\n<p>Here my code:</p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.InputStreamReader;\n\nRuntime r = Runtime.getRuntime();\nProcess p = r.exec(&quot;python myscript.py&quot;);\np.waitFor();\nBufferedReader b = new BufferedReader(new InputStreamReader(p.getInputStream()));\nString line = &quot;&quot;;\nStringBuilder response = new StringBuilder();\nwhile ((line = b.readLine()) != null) {\n    response.append(line);\n    response.append(&quot;\\n&quot;);\n}\nb.close();\n\nif (response.toString().contains(&quot;ERROR-TRAFFIC&quot;)){\n    SampleResult.setResponseCode(&quot;500&quot;); \n    SampleResult.setSuccessful(false);\n}\n</code></pre>\n<p>Using this code, if condition is correctly executed when the error is present, but in the traffic results I don't see any thread failure. Any hints ??</p>\n"},{"tags":["java","maven","groovy","compiler-errors","lombok"],"answers":[{"comments":[{"owner":{"account_id":2363981,"reputation":333,"user_id":2070081,"display_name":"Christoph Henrici"},"score":0,"creation_date":1606928819,"post_id":46258158,"comment_id":115113852,"body_markdown":"Is this an accepted answer? I am astonished. Groovy hails to  - from their documentation - &quot;seamlessly integrate with all existing Java classes and libraries&quot; I want to use Java and Groovy interchangeably.... Using Groovy basically als glue code for existing Java Libraries .... so this is for me not an acceptable answer","body":"Is this an accepted answer? I am astonished. Groovy hails to  - from their documentation - &quot;seamlessly integrate with all existing Java classes and libraries&quot; I want to use Java and Groovy interchangeably.... Using Groovy basically als glue code for existing Java Libraries .... so this is for me not an acceptable answer"},{"owner":{"account_id":1367113,"reputation":22105,"user_id":1303324,"accept_rate":83,"display_name":"Krzysztof Atłasik"},"score":0,"creation_date":1606929672,"post_id":46258158,"comment_id":115114261,"body_markdown":"Lombok is &quot;hack&quot; which uses the annotation processor to create missing methods in Java classes. It&#39;s not Java language standard feature. Groovy provides a similar feature using `@Canonical`, which also generate code on the compilation. Both mechanisms don&#39;t work together. I don&#39;t understand why you&#39;re angry on me :)","body":"Lombok is &quot;hack&quot; which uses the annotation processor to create missing methods in Java classes. It&#39;s not Java language standard feature. Groovy provides a similar feature using <code>@Canonical</code>, which also generate code on the compilation. Both mechanisms don&#39;t work together. I don&#39;t understand why you&#39;re angry on me :)"},{"owner":{"account_id":2363981,"reputation":333,"user_id":2070081,"display_name":"Christoph Henrici"},"score":0,"creation_date":1606930626,"post_id":46258158,"comment_id":115114713,"body_markdown":"I just know a ) that Lombok is widely used in the Java landscape b) i don&#39;t have the choice to write everything in Groovy and  i don&#39;t really think that was the intention of Groovy  - to substitute Java - but to augment Java. c ) Annotation Preprocessors are part the Java Language d) If it&#39;s a hack i don&#39;t dare to judge,  i simply know that in other Java Libraries Annotation Processors are also used. For me it is also not clear if your are speaking officially for Groovy or if this just reflects your personal experience.  If first it would be helpful if you point to documentation.","body":"I just know a ) that Lombok is widely used in the Java landscape b) i don&#39;t have the choice to write everything in Groovy and  i don&#39;t really think that was the intention of Groovy  - to substitute Java - but to augment Java. c ) Annotation Preprocessors are part the Java Language d) If it&#39;s a hack i don&#39;t dare to judge,  i simply know that in other Java Libraries Annotation Processors are also used. For me it is also not clear if your are speaking officially for Groovy or if this just reflects your personal experience.  If first it would be helpful if you point to documentation."},{"owner":{"account_id":1367113,"reputation":22105,"user_id":1303324,"accept_rate":83,"display_name":"Krzysztof Atłasik"},"score":3,"creation_date":1606931740,"post_id":46258158,"comment_id":115115225,"body_markdown":"Lombok requires special plugins/java agents to make IDEs to recognize code it generates, it&#39;s definitely a hack. Everyone on SO writes from its own experience. Remember, you can always provide your own answer in case you think this one is wrong/misleading/no longer relevant etc.","body":"Lombok requires special plugins/java agents to make IDEs to recognize code it generates, it&#39;s definitely a hack. Everyone on SO writes from its own experience. Remember, you can always provide your own answer in case you think this one is wrong/misleading/no longer relevant etc."},{"owner":{"account_id":2363981,"reputation":333,"user_id":2070081,"display_name":"Christoph Henrici"},"score":0,"creation_date":1606932527,"post_id":46258158,"comment_id":115115610,"body_markdown":"An opinion, your opinion and with out any argumentation and facts. So definitely not helpful. For the above mentioned reasons. In same way i could say Groovy is a “hack” ... emphasizis could, You can be sure that i don’t relay on this answer and am investigating what the problems are  effectively.... there are with all jvm based languages interoperability issues , Kotlin, Scala , Groovy Jruby etc etc .... so there nothing new there","body":"An opinion, your opinion and with out any argumentation and facts. So definitely not helpful. For the above mentioned reasons. In same way i could say Groovy is a “hack” ... emphasizis could, You can be sure that i don’t relay on this answer and am investigating what the problems are  effectively.... there are with all jvm based languages interoperability issues , Kotlin, Scala , Groovy Jruby etc etc .... so there nothing new there"},{"owner":{"account_id":2363981,"reputation":333,"user_id":2070081,"display_name":"Christoph Henrici"},"score":0,"creation_date":1606940858,"post_id":46258158,"comment_id":115119184,"body_markdown":"And above all the answer doesn&#39;t even answer the question at hand, because ibasically the problem is simply that groovy doesn&#39;t support Lombok annotations. Consuming a Java Lombok annotated Class works fine , except if using the @Builder Annotations of Lombok.  I still have to narrow that down.","body":"And above all the answer doesn&#39;t even answer the question at hand, because ibasically the problem is simply that groovy doesn&#39;t support Lombok annotations. Consuming a Java Lombok annotated Class works fine , except if using the @Builder Annotations of Lombok.  I still have to narrow that down."},{"owner":{"account_id":2363981,"reputation":333,"user_id":2070081,"display_name":"Christoph Henrici"},"score":0,"creation_date":1606989541,"post_id":46258158,"comment_id":115133008,"body_markdown":"See also my Answer here: https://stackoverflow.com/questions/55304021/groovy-lombok-noargsconstructor-not-creating-default-constructor","body":"See also my Answer here: <a href=\"https://stackoverflow.com/questions/55304021/groovy-lombok-noargsconstructor-not-creating-default-constructor\" title=\"groovy lombok noargsconstructor not creating default constructor\">stackoverflow.com/questions/55304021/&hellip;</a>"},{"owner":{"account_id":3978849,"reputation":9293,"user_id":3281336,"accept_rate":60,"display_name":"PatS"},"score":1,"creation_date":1645463965,"post_id":46258158,"comment_id":125873077,"body_markdown":"@chenrici, I find this answer helpful.  I&#39;m just starting to use Groovy and wanted to know if I should include Lombok, the answer is no.  Thanks for asking the question, for your and other&#39;s comments and the answer.","body":"@chenrici, I find this answer helpful.  I&#39;m just starting to use Groovy and wanted to know if I should include Lombok, the answer is no.  Thanks for asking the question, for your and other&#39;s comments and the answer."},{"owner":{"account_id":3978849,"reputation":9293,"user_id":3281336,"accept_rate":60,"display_name":"PatS"},"score":1,"creation_date":1645464019,"post_id":46258158,"comment_id":125873096,"body_markdown":"@chenrici, if you did get this working let us know how you did it.","body":"@chenrici, if you did get this working let us know how you did it."},{"owner":{"account_id":2363981,"reputation":333,"user_id":2070081,"display_name":"Christoph Henrici"},"score":0,"creation_date":1645635824,"post_id":46258158,"comment_id":125926858,"body_markdown":"@PatS thanks. Unfortunately no , i didn&#39;t.  See : https://github.com/chhex/groovylombok In away a little sad, specially since Annotation Pre Processor&#39;s are more and more used in a productive way (Lombok, Mapstruct etc). If you find a way, i d also love to hear about it","body":"@PatS thanks. Unfortunately no , i didn&#39;t.  See : <a href=\"https://github.com/chhex/groovylombok\" rel=\"nofollow noreferrer\">github.com/chhex/groovylombok</a> In away a little sad, specially since Annotation Pre Processor&#39;s are more and more used in a productive way (Lombok, Mapstruct etc). If you find a way, i d also love to hear about it"},{"owner":{"account_id":3978849,"reputation":9293,"user_id":3281336,"accept_rate":60,"display_name":"PatS"},"score":1,"creation_date":1645811178,"post_id":46258158,"comment_id":125977390,"body_markdown":"@chenrici, I do use Lombok in my Java code (who doesn&#39;t, :-)), but haven&#39;t (yet) tried to import/use existing code with Groovy to see if the problem happens.  I&#39;ll keep you posted if I do","body":"@chenrici, I do use Lombok in my Java code (who doesn&#39;t, :-)), but haven&#39;t (yet) tried to import/use existing code with Groovy to see if the problem happens.  I&#39;ll keep you posted if I do"}],"tags":[],"owner":{"account_id":1367113,"reputation":22105,"user_id":1303324,"accept_rate":83,"display_name":"Krzysztof Atłasik"},"comment_count":11,"down_vote_count":1,"up_vote_count":17,"is_accepted":true,"score":16,"last_activity_date":1505650317,"creation_date":1505593605,"answer_id":46258158,"question_id":46257162,"body_markdown":"You shouldn&#39;t use Lombok for Groovy, it is intended to be used only with Java. \r\n\r\nGroovy has built-in annotation `@Canonical` which does what you want:\r\n\r\n * it creates useful equals, hashCode and toString methods\r\n * it creates no-arg and tuple constructor\r\n\r\nSo in your case use:\r\n\r\n    @Canonical\r\n    public class Rocket {}\r\n\r\nAdditionally you don&#39;t need to create getters and setters for fields in Groovy. If you add any field to your class, Groovy would [create getters and setters](http://groovy-lang.org/objectorientation.html#_fields_and_properties).","title":"Compilation error - Groovy and Lombok","body":"<p>You shouldn't use Lombok for Groovy, it is intended to be used only with Java. </p>\n\n<p>Groovy has built-in annotation <code>@Canonical</code> which does what you want:</p>\n\n<ul>\n<li>it creates useful equals, hashCode and toString methods</li>\n<li>it creates no-arg and tuple constructor</li>\n</ul>\n\n<p>So in your case use:</p>\n\n<pre><code>@Canonical\npublic class Rocket {}\n</code></pre>\n\n<p>Additionally you don't need to create getters and setters for fields in Groovy. If you add any field to your class, Groovy would <a href=\"http://groovy-lang.org/objectorientation.html#_fields_and_properties\" rel=\"noreferrer\">create getters and setters</a>.</p>\n"},{"tags":[],"owner":{"account_id":15326359,"reputation":761,"user_id":11057391,"display_name":"Saravanan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695801758,"creation_date":1695801758,"answer_id":77185617,"question_id":46257162,"body_markdown":"I was also having issue on using Lombok with groovy. (It wasn&#39;t generating any code) So I just changed my model class to `.java` and did the lombok stuff on the java class. Since we can intermix java and groovy code without any issue, I&#39;m now able to use it without any issue.","title":"Compilation error - Groovy and Lombok","body":"<p>I was also having issue on using Lombok with groovy. (It wasn't generating any code) So I just changed my model class to <code>.java</code> and did the lombok stuff on the java class. Since we can intermix java and groovy code without any issue, I'm now able to use it without any issue.</p>\n"}],"owner":{"account_id":2634858,"reputation":540,"user_id":2279856,"accept_rate":71,"display_name":"Arthur Kharkivskiy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5891,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":46258158,"answer_count":2,"score":7,"last_activity_date":1695801758,"creation_date":1505586635,"question_id":46257162,"body_markdown":"Here is my Maven command\r\n\r\n    mvn clean compile test-compile test\r\nfor\r\n[this project][1]\r\n\r\nbut I am facing with\r\n \r\n[ERROR] no more tokens - could not parse error message: Groovy:unable to resolve class Delegate ,  unable to find class for annotation\r\n[ERROR] 12. ERROR in D:\\Projects\\lombok-groovy-example-master\\src\\main\\groovy\\prystasj\\lombok\\example\\groovy\\Rocket.groovy (at line 5)\r\n[ERROR] @Data\r\n\r\nmvn --version\r\n\r\n    Apache Maven 3.5.0 (ff8f5e7444045639af65f6095c62210b5713f426; 2017-04-03T22:39:06+03:00)\r\n\r\njava -version\r\n\r\n    java version &quot;1.8.0_144&quot;\r\n    Java(TM) SE Runtime Environment (build 1.8.0_144-b01)\r\n    Java HotSpot(TM) 64-Bit Server VM (build 25.144-b01, mixed mode)\r\n\r\n\r\n  [1]: https://github.com/prystasj/lombok-groovy-example\r\n\r\nCode from repository\r\n\r\n    &lt;properties&gt;\r\n        &lt;groovy.version&gt;2.0.5&lt;/groovy.version&gt;\r\n        &lt;java.version&gt;1.6&lt;/java.version&gt;\r\n        &lt;lombok.version&gt;0.11.4&lt;/lombok.version&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;/properties&gt;\r\n\r\n        &lt;build&gt;\r\n        &lt;plugins&gt;\r\n        &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;2.3.2&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n        &lt;compilerId&gt;groovy-eclipse-compiler&lt;/compilerId&gt;\r\n        &lt;fork&gt;true&lt;/fork&gt;\r\n        &lt;verbose&gt;false&lt;/verbose&gt;\r\n        &lt;source&gt;${java.version}&lt;/source&gt;\r\n        &lt;target&gt;${java.version}&lt;/target&gt;\r\n        &lt;encoding&gt;${project.build.sourceEncoding}&lt;/encoding&gt;\r\n        &lt;compilerArguments&gt;\r\n        &lt;javaAgentClass&gt;lombok.core.Agent&lt;/javaAgentClass&gt;\r\n        &lt;/compilerArguments&gt;\r\n        &lt;/configuration&gt;\r\n        &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n        &lt;groupId&gt;org.codehaus.groovy&lt;/groupId&gt;\r\n        &lt;artifactId&gt;groovy-eclipse-compiler&lt;/artifactId&gt;\r\n        &lt;version&gt;2.7.0-01&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n        &lt;version&gt;${lombok.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;//...\r\n    \r\nClass (file on git differs!)\r\n\r\n    @Data\r\n    public class Rocket {\r\n    }","title":"Compilation error - Groovy and Lombok","body":"<p>Here is my Maven command</p>\n\n<pre><code>mvn clean compile test-compile test\n</code></pre>\n\n<p>for\n<a href=\"https://github.com/prystasj/lombok-groovy-example\" rel=\"noreferrer\">this project</a></p>\n\n<p>but I am facing with</p>\n\n<p>[ERROR] no more tokens - could not parse error message: Groovy:unable to resolve class Delegate ,  unable to find class for annotation\n[ERROR] 12. ERROR in D:\\Projects\\lombok-groovy-example-master\\src\\main\\groovy\\prystasj\\lombok\\example\\groovy\\Rocket.groovy (at line 5)\n[ERROR] @Data</p>\n\n<p>mvn --version</p>\n\n<pre><code>Apache Maven 3.5.0 (ff8f5e7444045639af65f6095c62210b5713f426; 2017-04-03T22:39:06+03:00)\n</code></pre>\n\n<p>java -version</p>\n\n<pre><code>java version \"1.8.0_144\"\nJava(TM) SE Runtime Environment (build 1.8.0_144-b01)\nJava HotSpot(TM) 64-Bit Server VM (build 25.144-b01, mixed mode)\n</code></pre>\n\n<p>Code from repository</p>\n\n<pre><code>&lt;properties&gt;\n    &lt;groovy.version&gt;2.0.5&lt;/groovy.version&gt;\n    &lt;java.version&gt;1.6&lt;/java.version&gt;\n    &lt;lombok.version&gt;0.11.4&lt;/lombok.version&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n\n    &lt;build&gt;\n    &lt;plugins&gt;\n    &lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n    &lt;version&gt;2.3.2&lt;/version&gt;\n    &lt;configuration&gt;\n    &lt;compilerId&gt;groovy-eclipse-compiler&lt;/compilerId&gt;\n    &lt;fork&gt;true&lt;/fork&gt;\n    &lt;verbose&gt;false&lt;/verbose&gt;\n    &lt;source&gt;${java.version}&lt;/source&gt;\n    &lt;target&gt;${java.version}&lt;/target&gt;\n    &lt;encoding&gt;${project.build.sourceEncoding}&lt;/encoding&gt;\n    &lt;compilerArguments&gt;\n    &lt;javaAgentClass&gt;lombok.core.Agent&lt;/javaAgentClass&gt;\n    &lt;/compilerArguments&gt;\n    &lt;/configuration&gt;\n    &lt;dependencies&gt;\n    &lt;dependency&gt;\n    &lt;groupId&gt;org.codehaus.groovy&lt;/groupId&gt;\n    &lt;artifactId&gt;groovy-eclipse-compiler&lt;/artifactId&gt;\n    &lt;version&gt;2.7.0-01&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n    &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n    &lt;version&gt;${lombok.version}&lt;/version&gt;\n    &lt;/dependency&gt;//...\n</code></pre>\n\n<p>Class (file on git differs!)</p>\n\n<pre><code>@Data\npublic class Rocket {\n}\n</code></pre>\n"},{"tags":["java","android","string","split"],"answers":[{"comments":[{"owner":{"account_id":1701242,"reputation":40799,"user_id":1561247,"accept_rate":74,"display_name":"Emil Adz"},"score":1,"creation_date":1367752483,"post_id":16383909,"comment_id":23481704,"body_markdown":"could you provide a sample code of how to use it. I have never used regex before.","body":"could you provide a sample code of how to use it. I have never used regex before."},{"owner":{"display_name":"user330315"},"score":4,"creation_date":1367752585,"post_id":16383909,"comment_id":23481724,"body_markdown":"@EmilAdz: is it really that hard to search for &quot;java regex tutorial&quot; on the internet?","body":"@EmilAdz: is it really that hard to search for &quot;java regex tutorial&quot; on the internet?"},{"owner":{"account_id":1924671,"reputation":94541,"user_id":1735406,"accept_rate":95,"display_name":"Maroun"},"score":1,"creation_date":1367752720,"post_id":16383909,"comment_id":23481753,"body_markdown":"@NoobUnChained you might want to add a small explanation about the regex.","body":"@NoobUnChained you might want to add a small explanation about the regex."},{"owner":{"account_id":1701242,"reputation":40799,"user_id":1561247,"accept_rate":74,"display_name":"Emil Adz"},"score":0,"creation_date":1367753684,"post_id":16383909,"comment_id":23481946,"body_markdown":"The result of this includes the &quot;[&quot; and &quot;]&quot; as part of the string is there a way to avoid it?","body":"The result of this includes the &quot;[&quot; and &quot;]&quot; as part of the string is there a way to avoid it?"},{"owner":{"account_id":981804,"reputation":786,"user_id":1001341,"accept_rate":71,"display_name":"Kevin McCarpenter"},"score":0,"creation_date":1367848731,"post_id":16383909,"comment_id":23510132,"body_markdown":"The first group will include the [ ], but the second and third groups will not. The first group is the whole match, while each subsequent group is just the parts in parentheses.","body":"The first group will include the [ ], but the second and third groups will not. The first group is the whole match, while each subsequent group is just the parts in parentheses."}],"tags":[],"owner":{"account_id":1190755,"reputation":48912,"user_id":1163607,"accept_rate":97,"display_name":"AllTooSir"},"comment_count":5,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1367753135,"creation_date":1367752401,"answer_id":16383909,"question_id":16383898,"body_markdown":"Try with regex `\\[(.*?)\\]` to match the words. \r\n\r\n`\\[`: escaped `[` for literal match as it is a meta char.\r\n\r\n`(.*?)` : match everything in a non-greedy way.\r\n\r\n\r\nSample code:\r\n\r\n    Pattern p = Pattern.compile(&quot;\\\\[(.*?)\\\\]&quot;);\r\n    Matcher m = p.matcher(&quot;Where Are You [Employee Name]? your have a [Shift] shift.&quot;);\r\n    while(m.find()) {\r\n        System.out.println(m.group());\r\n    }","title":"Find words in string surrounded by &quot;[&quot; and &quot;]&quot;:","body":"<p>Try with regex <code>\\[(.*?)\\]</code> to match the words. </p>\n\n<p><code>\\[</code>: escaped <code>[</code> for literal match as it is a meta char.</p>\n\n<p><code>(.*?)</code> : match everything in a non-greedy way.</p>\n\n<p>Sample code:</p>\n\n<pre><code>Pattern p = Pattern.compile(\"\\\\[(.*?)\\\\]\");\nMatcher m = p.matcher(\"Where Are You [Employee Name]? your have a [Shift] shift.\");\nwhile(m.find()) {\n    System.out.println(m.group());\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":348076,"reputation":5557,"user_id":682559,"accept_rate":100,"display_name":"Nicktar"},"score":0,"creation_date":1367754135,"post_id":16383942,"comment_id":23482036,"body_markdown":"That&#39;s a very complicated way to write [\\\\w ]*","body":"That&#39;s a very complicated way to write [\\\\w ]*"}],"tags":[],"owner":{"account_id":227022,"reputation":8243,"user_id":488434,"accept_rate":100,"display_name":"Ahmad Kayyali"},"comment_count":1,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1367753008,"creation_date":1367752652,"answer_id":16383942,"question_id":16383898,"body_markdown":"Here you go Java regular expression that extract text between two brackets ***including white spaces***:\r\n\r\n\r\n    import java.util.regex.*;\r\n    \r\n    class Main\r\n    {\r\n      public static void main(String[] args)\r\n      {\r\n        String txt=&quot;[ Employee Name ]&quot;;\r\n    \r\n        String re1=&quot;.*?&quot;;\t\r\n        String re2=&quot;( )&quot;;\t\r\n        String re3=&quot;((?:[a-z][a-z]+))&quot;;\t// Word 1\r\n        String re4=&quot;( )&quot;;\t\r\n        String re5=&quot;((?:[a-z][a-z]+))&quot;;\t// Word 2\r\n        String re6=&quot;( )&quot;;\t\r\n    \r\n        Pattern p = Pattern.compile(re1+re2+re3+re4+re5+re6,Pattern.CASE_INSENSITIVE | Pattern.DOTALL);\r\n        Matcher m = p.matcher(txt);\r\n        if (m.find())\r\n        {\r\n            String ws1=m.group(1);\r\n            String word1=m.group(2);\r\n            String ws2=m.group(3);\r\n            String word2=m.group(4);\r\n            String ws3=m.group(5);\r\n            System.out.print(&quot;(&quot;+ws1.toString()+&quot;)&quot;+&quot;(&quot;+word1.toString()+&quot;)&quot;+&quot;(&quot;+ws2.toString()+&quot;)&quot;+&quot;(&quot;+word2.toString()+&quot;)&quot;+&quot;(&quot;+ws3.toString()+&quot;)&quot;+&quot;\\n&quot;);\r\n        }\r\n      }\r\n    }\r\n\r\nif you want to ignore white space remove `&quot;( )&quot;;`","title":"Find words in string surrounded by &quot;[&quot; and &quot;]&quot;:","body":"<p>Here you go Java regular expression that extract text between two brackets <strong><em>including white spaces</em></strong>:</p>\n\n<pre><code>import java.util.regex.*;\n\nclass Main\n{\n  public static void main(String[] args)\n  {\n    String txt=\"[ Employee Name ]\";\n\n    String re1=\".*?\";   \n    String re2=\"( )\";   \n    String re3=\"((?:[a-z][a-z]+))\"; // Word 1\n    String re4=\"( )\";   \n    String re5=\"((?:[a-z][a-z]+))\"; // Word 2\n    String re6=\"( )\";   \n\n    Pattern p = Pattern.compile(re1+re2+re3+re4+re5+re6,Pattern.CASE_INSENSITIVE | Pattern.DOTALL);\n    Matcher m = p.matcher(txt);\n    if (m.find())\n    {\n        String ws1=m.group(1);\n        String word1=m.group(2);\n        String ws2=m.group(3);\n        String word2=m.group(4);\n        String ws3=m.group(5);\n        System.out.print(\"(\"+ws1.toString()+\")\"+\"(\"+word1.toString()+\")\"+\"(\"+ws2.toString()+\")\"+\"(\"+word2.toString()+\")\"+\"(\"+ws3.toString()+\")\"+\"\\n\");\n    }\n  }\n}\n</code></pre>\n\n<p>if you want to ignore white space remove <code>\"( )\";</code></p>\n"},{"tags":[],"owner":{"account_id":2667845,"reputation":10491,"user_id":2305826,"accept_rate":89,"display_name":"MarsAtomic"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1367752890,"creation_date":1367752705,"answer_id":16383950,"question_id":16383898,"body_markdown":"Use a [StringBuilder](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html) (I assume you don&#39;t need synchronization).\r\n\r\nAs you suggested, `indexOf()` using your square bracket delimiters will give you a starting index and an ending index.  use substring(startIndex + 1, endIndex - 1) to get exactly the string you want.\r\n\r\nI&#39;m not sure what you meant by the end of the String, but `indexOf(&quot;[&quot;)` is the start and `indexOf(&quot;]&quot;)` is the end.","title":"Find words in string surrounded by &quot;[&quot; and &quot;]&quot;:","body":"<p>Use a <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html\" rel=\"nofollow\">StringBuilder</a> (I assume you don't need synchronization).</p>\n\n<p>As you suggested, <code>indexOf()</code> using your square bracket delimiters will give you a starting index and an ending index.  use substring(startIndex + 1, endIndex - 1) to get exactly the string you want.</p>\n\n<p>I'm not sure what you meant by the end of the String, but <code>indexOf(\"[\")</code> is the start and <code>indexOf(\"]\")</code> is the end.</p>\n"},{"tags":[],"owner":{"account_id":348076,"reputation":5557,"user_id":682559,"accept_rate":100,"display_name":"Nicktar"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1367753132,"creation_date":1367752710,"answer_id":16383951,"question_id":16383898,"body_markdown":"That&#39;s pretty much the use case for a regular expression. \r\nTry `&quot;(\\\\[[\\\\w ]*\\\\])&quot;` as your expression.\r\n\r\n    Pattern p = Pattern.compile(&quot;(\\\\[[\\\\w ]*\\\\])&quot;);\r\n    Matcher m = p.matcher(&quot;Where Are You [Employee Name]? your have a [Shift] shift..&quot;);\r\n    \r\n    if (m.find()) {\r\n    \r\n        String found = m.group();\r\n    }\r\n\r\nWhat does this expression do?\r\n\r\n - First it defines a group (...) \r\n - Then it defines the starting point for that group. \\\\[ matches [ since [ itself is a &#39;keyword&#39; for regular expressions it has to be masked by \\ which is reserved in Java Strings and has to be masked by another \\\r\n - Then it defines the body of the group [\\\\w ]*... here the regexpression [] are used along with \\\\w (meaning \\w, meaning any letter, number or undescore) and a blank, meaning blank. The * means zero or more of the previous group.\r\n - Then it defines the endpoint of the group \\\\]\r\n - and closes the group )","title":"Find words in string surrounded by &quot;[&quot; and &quot;]&quot;:","body":"<p>That's pretty much the use case for a regular expression. \nTry <code>\"(\\\\[[\\\\w ]*\\\\])\"</code> as your expression.</p>\n\n<pre><code>Pattern p = Pattern.compile(\"(\\\\[[\\\\w ]*\\\\])\");\nMatcher m = p.matcher(\"Where Are You [Employee Name]? your have a [Shift] shift..\");\n\nif (m.find()) {\n\n    String found = m.group();\n}\n</code></pre>\n\n<p>What does this expression do?</p>\n\n<ul>\n<li>First it defines a group (...) </li>\n<li>Then it defines the starting point for that group. \\[ matches [ since [ itself is a 'keyword' for regular expressions it has to be masked by \\ which is reserved in Java Strings and has to be masked by another \\</li>\n<li>Then it defines the body of the group [\\w ]*... here the regexpression [] are used along with \\w (meaning \\w, meaning any letter, number or undescore) and a blank, meaning blank. The * means zero or more of the previous group.</li>\n<li>Then it defines the endpoint of the group \\]</li>\n<li>and closes the group )</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":1701242,"reputation":40799,"user_id":1561247,"accept_rate":74,"display_name":"Emil Adz"},"score":0,"creation_date":1367753611,"post_id":16384064,"comment_id":23481926,"body_markdown":"this uses regex as well? what would be a better solution? what is the difference between Scanner and Pattern/Matcher solutions?","body":"this uses regex as well? what would be a better solution? what is the difference between Scanner and Pattern/Matcher solutions?"},{"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"score":0,"creation_date":1367753738,"post_id":16384064,"comment_id":23481959,"body_markdown":"Yes. But as you noticed all answers are about Patter / Matcher. I just wanted to show an alternative way. BTW it&#39;s looks shorter","body":"Yes. But as you noticed all answers are about Patter / Matcher. I just wanted to show an alternative way. BTW it&#39;s looks shorter"},{"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"score":0,"creation_date":1367754276,"post_id":16384064,"comment_id":23482064,"body_markdown":"I dont think so. Scanner is Pattern / Matcher based. No difference. Maybe Scanner version is more flexible, eg instead of String input you can put there File or InputStream from a Socket...","body":"I dont think so. Scanner is Pattern / Matcher based. No difference. Maybe Scanner version is more flexible, eg instead of String input you can put there File or InputStream from a Socket..."},{"owner":{"account_id":1701242,"reputation":40799,"user_id":1561247,"accept_rate":74,"display_name":"Emil Adz"},"score":0,"creation_date":1367754382,"post_id":16384064,"comment_id":23482082,"body_markdown":"Actually your answer gave me the best result. all the other options included the &quot;[&quot; and &quot;]&quot; in the result. Yours didn&#39;t. So I&#39;m accepting your answer. Thanks.","body":"Actually your answer gave me the best result. all the other options included the &quot;[&quot; and &quot;]&quot; in the result. Yours didn&#39;t. So I&#39;m accepting your answer. Thanks."},{"owner":{"account_id":1701242,"reputation":40799,"user_id":1561247,"accept_rate":74,"display_name":"Emil Adz"},"score":0,"creation_date":1367754450,"post_id":16384064,"comment_id":23482107,"body_markdown":"could you please only explain this phrase: &quot;(?&lt;=\\\\[).*?(?=\\\\])&quot;? how it should be read?","body":"could you please only explain this phrase: &quot;(?&lt;=\\&#91;).*?(?=\\&#93;)&quot;? how it should be read?"},{"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"score":0,"creation_date":1367755173,"post_id":16384064,"comment_id":23482237,"body_markdown":"it&#39;s regex with look-ahead and look-behind constructs. means find a substring with &quot;[&quot; prefix and &quot;]&quot; postfix expr. regex are difficult but useful. find some tutorial and train, train...","body":"it&#39;s regex with look-ahead and look-behind constructs. means find a substring with &quot;[&quot; prefix and &quot;]&quot; postfix expr. regex are difficult but useful. find some tutorial and train, train..."},{"owner":{"account_id":483434,"reputation":25487,"user_id":898478,"accept_rate":86,"display_name":"m0skit0"},"score":0,"creation_date":1367940732,"post_id":16384064,"comment_id":23549628,"body_markdown":"@EvgeniyDorofeev +1 for Scanner. I don&#39;t think you need such advanced regex constructs as look-aheads and look-behinds for this.","body":"@EvgeniyDorofeev +1 for Scanner. I don&#39;t think you need such advanced regex constructs as look-aheads and look-behinds for this."}],"tags":[],"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"comment_count":7,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1367753464,"creation_date":1367753464,"answer_id":16384064,"question_id":16383898,"body_markdown":"This is a Scanner base solution  \r\n\r\n\t\tScanner sc = new Scanner(&quot;Where Are You [Employee Name]? your have a [Shift] shift..&quot;);\r\n\t\tfor (String s; (s = sc.findWithinHorizon(&quot;(?&lt;=\\\\[).*?(?=\\\\])&quot;, 0)) != null;) {\r\n\t\t\tSystem.out.println(s);\r\n\t\t}\r\n\r\noutput\r\n\r\n    Employee Name\r\n    Shift\r\n\r\n","title":"Find words in string surrounded by &quot;[&quot; and &quot;]&quot;:","body":"<p>This is a Scanner base solution  </p>\n\n<pre><code>    Scanner sc = new Scanner(\"Where Are You [Employee Name]? your have a [Shift] shift..\");\n    for (String s; (s = sc.findWithinHorizon(\"(?&lt;=\\\\[).*?(?=\\\\])\", 0)) != null;) {\n        System.out.println(s);\n    }\n</code></pre>\n\n<p>output</p>\n\n<pre><code>Employee Name\nShift\n</code></pre>\n"}],"owner":{"account_id":1701242,"reputation":40799,"user_id":1561247,"accept_rate":74,"display_name":"Emil Adz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3517,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":16384064,"answer_count":5,"score":3,"last_activity_date":1695801751,"creation_date":1367752312,"question_id":16383898,"body_markdown":"I need help with a simple task in java. I have the following sentence:\r\n\r\n&gt; Where Are You [Employee Name]?\r\nyour have a [Shift] shift..\r\n\r\nI need to extract the strings that are surrounded by `[` and `]` signs.\r\n\r\nI was thinking of using the `split` method with `&quot; &quot;` parameter and then find the single words, but I have a problem using that if the phrase I&#39;m looking for contains: `&quot; &quot;`. using `indexOf` might be an option as well, only I don&#39;t know what is the indication that I have reached the end of the `String`.\r\n\r\nWhat is the best way to perform this task?\r\nAny help would be appreciated.\r\n ","title":"Find words in string surrounded by &quot;[&quot; and &quot;]&quot;:","body":"<p>I need help with a simple task in java. I have the following sentence:</p>\n\n<blockquote>\n  <p>Where Are You [Employee Name]?\n  your have a [Shift] shift..</p>\n</blockquote>\n\n<p>I need to extract the strings that are surrounded by <code>[</code> and <code>]</code> signs.</p>\n\n<p>I was thinking of using the <code>split</code> method with <code>\" \"</code> parameter and then find the single words, but I have a problem using that if the phrase I'm looking for contains: <code>\" \"</code>. using <code>indexOf</code> might be an option as well, only I don't know what is the indication that I have reached the end of the <code>String</code>.</p>\n\n<p>What is the best way to perform this task?\nAny help would be appreciated.</p>\n"},{"tags":["java","ssl","certificate","keystore","truststore"],"comments":[{"owner":{"account_id":155770,"reputation":120153,"user_id":372643,"accept_rate":88,"display_name":"Bruno"},"score":1,"creation_date":1347879450,"post_id":12456079,"comment_id":16754185,"body_markdown":"Why don&#39;t you let the trust manager via the JSSE do all this for you?","body":"Why don&#39;t you let the trust manager via the JSSE do all this for you?"},{"owner":{"account_id":467686,"reputation":3232,"user_id":873229,"accept_rate":50,"display_name":"Ghetolay"},"score":0,"creation_date":1347880119,"post_id":12456079,"comment_id":16754397,"body_markdown":"Because my server is also accepting non cert-auth connection. I have to let it accept all connections first and then in some case validate the client&#39;s certificate if any.","body":"Because my server is also accepting non cert-auth connection. I have to let it accept all connections first and then in some case validate the client&#39;s certificate if any."},{"owner":{"account_id":155770,"reputation":120153,"user_id":372643,"accept_rate":88,"display_name":"Bruno"},"score":4,"creation_date":1347880944,"post_id":12456079,"comment_id":16754718,"body_markdown":"No, you just need to make the client certificate optional using the wantClientAuth option (instead of need).","body":"No, you just need to make the client certificate optional using the wantClientAuth option (instead of need)."},{"owner":{"account_id":467686,"reputation":3232,"user_id":873229,"accept_rate":50,"display_name":"Ghetolay"},"score":0,"creation_date":1347886178,"post_id":12456079,"comment_id":16756877,"body_markdown":"Actually it&#39;s how it work, but I thought it wasnt doing any validation on the client&#39;s certificate. I&#39;ve done some test after reading your comment and this is how its seems to work: If a valid client certificate is sent by the client, the connection is accepted and the request attribute X509Certificate is set with the valid certificate. If a invalid or no certificate are sent then the connection is still accepted but the request attribute is not set. Is this is right it means I just need to test the request attribute in order to know if the certificate is valid. Can you confirm this behavior?","body":"Actually it&#39;s how it work, but I thought it wasnt doing any validation on the client&#39;s certificate. I&#39;ve done some test after reading your comment and this is how its seems to work: If a valid client certificate is sent by the client, the connection is accepted and the request attribute X509Certificate is set with the valid certificate. If a invalid or no certificate are sent then the connection is still accepted but the request attribute is not set. Is this is right it means I just need to test the request attribute in order to know if the certificate is valid. Can you confirm this behavior?"},{"owner":{"account_id":155770,"reputation":120153,"user_id":372643,"accept_rate":88,"display_name":"Bruno"},"score":1,"creation_date":1347886329,"post_id":12456079,"comment_id":16756947,"body_markdown":"Yes, that&#39;s how it&#39;s meant to work when you configure the client-cert authentication to be optional. I think the connection would be rejected if the certificate isn&#39;t trusted (i.e. the client shouldn&#39;t send a cert at all if its cert isn&#39;t trusted).","body":"Yes, that&#39;s how it&#39;s meant to work when you configure the client-cert authentication to be optional. I think the connection would be rejected if the certificate isn&#39;t trusted (i.e. the client shouldn&#39;t send a cert at all if its cert isn&#39;t trusted)."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1347964822,"post_id":12456079,"comment_id":16782204,"body_markdown":"@Bruno That is correct. &#39;needClientAuth&#39; isn&#39;t actually part of RFC 2246 at all, it is a Java-ism and possibly an OpenSSL-ism as well. The idea is that if no valid certificate is supplied the server closes the connection, but it isn&#39;t properly specified anywhere that I am aware of, and I&#39;ve been looking for about 9 years. If it was part of RFC 2246 you would expect an alert of some kind to be generated.","body":"@Bruno That is correct. &#39;needClientAuth&#39; isn&#39;t actually part of RFC 2246 at all, it is a Java-ism and possibly an OpenSSL-ism as well. The idea is that if no valid certificate is supplied the server closes the connection, but it isn&#39;t properly specified anywhere that I am aware of, and I&#39;ve been looking for about 9 years. If it was part of RFC 2246 you would expect an alert of some kind to be generated."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1588717345,"post_id":12456079,"comment_id":109005919,"body_markdown":"How did you get the server certificate to sign the client certificate? CAs won&#39;t give you a signing certificate. Also *why*?","body":"How did you get the server certificate to sign the client certificate? CAs won&#39;t give you a signing certificate. Also <i>why</i>?"}],"answers":[{"comments":[{"owner":{"account_id":467686,"reputation":3232,"user_id":873229,"accept_rate":50,"display_name":"Ghetolay"},"score":0,"creation_date":1347876825,"post_id":12456401,"comment_id":16753222,"body_markdown":"I don&#39;t use any CRL, OSCP or CRLDP. There is no such line on my certificate. Also the code shown is not complete there are some &quot;if&quot; for CRL/OSCP/CRLDP but these &quot;if&quot; are never reached because I did not set these options. Should I ? is it absolutely necessary ?","body":"I don&#39;t use any CRL, OSCP or CRLDP. There is no such line on my certificate. Also the code shown is not complete there are some &quot;if&quot; for CRL/OSCP/CRLDP but these &quot;if&quot; are never reached because I did not set these options. Should I ? is it absolutely necessary ?"}],"tags":[],"owner":{"account_id":362387,"reputation":2296,"user_id":705553,"display_name":"Ted Shaw"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1347873888,"creation_date":1347873888,"answer_id":12456401,"question_id":12456079,"body_markdown":"Please check your certificate CRL or OCSP is accessible, you can find such information in certificate, such as \r\n\r\n    [1]CRL Distribution Point\r\n         Distribution Point Name:\r\n              Full Name:\r\n                   URL=http://crl.verisign.com/pca2-g2.crl\r\n\r\n","title":"Java/Keystore Verify Signed certificate","body":"<p>Please check your certificate CRL or OCSP is accessible, you can find such information in certificate, such as </p>\n\n<pre><code>[1]CRL Distribution Point\n     Distribution Point Name:\n          Full Name:\n               URL=http://crl.verisign.com/pca2-g2.crl\n</code></pre>\n"},{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1347923145,"post_id":12460205,"comment_id":16771583,"body_markdown":"getPeerCertificateChain() doesn&#39;t return null, it throws an exception.","body":"getPeerCertificateChain() doesn&#39;t return null, it throws an exception."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1620013658,"post_id":12460205,"comment_id":119067340,"body_markdown":"If an invalid certificate is sent the handshake throws an exception, long before you can call `getPeerCertificateChain()`.","body":"If an invalid certificate is sent the handshake throws an exception, long before you can call <code>getPeerCertificateChain()</code>."}],"tags":[],"owner":{"account_id":467686,"reputation":3232,"user_id":873229,"accept_rate":50,"display_name":"Ghetolay"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1620013628,"creation_date":1347888332,"answer_id":12460205,"question_id":12456079,"body_markdown":"Actually I don&#39;t need to do the validation myself. \r\n\r\nThe `SSLEngine` is already doing it. If a valid certificate is sent by the client you can get it using `getPeerCertificateChain()`: if no certificate or an invalid certificate is sent by the client `getPeerCertificateChain()` throws a exception. \r\n\r\nUsing Jetty (or any Java ServletContainer I guess) you just need to check the HttpServletRequest&#39;s attribute[&quot;javax.servlet.request.X509Certificate&quot;] to know if a valid certificate was sent by the client. \r\n\r\nI still don&#39;t know how to validate a certificate in Java but this solution is enough for me :) I don&#39;t need to do it myself anymore. Thanks to Bruno !","title":"Java/Keystore Verify Signed certificate","body":"<p>Actually I don't need to do the validation myself.</p>\n<p>The <code>SSLEngine</code> is already doing it. If a valid certificate is sent by the client you can get it using <code>getPeerCertificateChain()</code>: if no certificate or an invalid certificate is sent by the client <code>getPeerCertificateChain()</code> throws a exception.</p>\n<p>Using Jetty (or any Java ServletContainer I guess) you just need to check the HttpServletRequest's attribute[&quot;javax.servlet.request.X509Certificate&quot;] to know if a valid certificate was sent by the client.</p>\n<p>I still don't know how to validate a certificate in Java but this solution is enough for me :) I don't need to do it myself anymore. Thanks to Bruno !</p>\n"}],"owner":{"account_id":467686,"reputation":3232,"user_id":873229,"accept_rate":50,"display_name":"Ghetolay"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10038,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"answer_count":2,"score":4,"last_activity_date":1695801695,"creation_date":1347872611,"question_id":12456079,"body_markdown":"I&#39;m working on a client-cert authentication between a embedded jetty server and a client. They both use keystore. The client certificate is signed by the server&#39;s certificate which is signed by a CA. Jetty use 2 method to authenticate a client certificate, javax.net.ssl.SSLEngine which seems to work and they also use the code above.\r\n\r\n    \r\n    List&lt;X509Certificate&gt; certList = Certificate chain sent by the client\r\n    KeyStore truststore = server&#39;s truststore\r\n    \r\n    //No use of CRL/OSCP/CRLDP\r\n    _crls = null;\r\n    _enableOCSP = false;\r\n    _enableCRLDP = false;\r\n\r\n    try{\r\n     X509CertSelector certSelect = new X509CertSelector();\r\n     certSelect.setCertificate((X509Certificate) certList.get(0));\r\n    \t\t\t\r\n     // Configure certification path builder parameters\r\n     PKIXBuilderParameters pbParams = new PKIXBuilderParameters(truststore, certSelect);\r\n     pbParams.addCertStore(CertStore.getInstance(&quot;Collection&quot;, new CollectionCertStoreParameters(certList)));\r\n    \r\n     // Set maximum certification path length\r\n     pbParams.setMaxPathLength(-1);\r\n    \r\n     // Enable revocation checking\r\n     pbParams.setRevocationEnabled(true);\r\n    \t\t\t\r\n     // Set static Certificate Revocation List\r\n     if (_crls != null &amp;&amp; !_crls.isEmpty())\r\n         pbParams.addCertStore(CertStore.getInstance(&quot;Collection&quot;, new CollectionCertStoreParameters(_crls)));\r\n    \r\n      // Enable On-Line Certificate Status Protocol (OCSP) support\r\n      if (_enableOCSP)\r\n          Security.setProperty(&quot;ocsp.enable&quot;,&quot;true&quot;);\r\n         \r\n      // Enable Certificate Revocation List Distribution Points (CRLDP) support\r\n      if (_enableCRLDP)\r\n          System.setProperty(&quot;com.sun.security.enableCRLDP&quot;,&quot;true&quot;);\r\n          \r\n     // Build certification path\r\n     CertPathBuilderResult buildResult = CertPathBuilder.getInstance(&quot;PKIX&quot;).build(pbParams);               \r\n    \r\n     // Validate certification path\r\n     CertPathValidator.getInstance(&quot;PKIX&quot;).validate(buildResult.getCertPath(),pbParams);\r\n    }catch(GeneralSecurityException gse){\r\n     ...\r\n    }\r\n\r\nOf course I must use this second way...\r\nSo let&#39;s concentrate on this code, is this a good way to verify a signed certificate ?\r\nHere is a dump of my keystores : \r\n\r\nClient Keystore :\r\n\r\n    Entry type: PrivateKeyEntry \r\n    Certificate chain length: 2\r\n    Certificate[1]: \r\n    Owner: EMAILADDRESS=truc@ok.com, CN=Servlet, OU=dev, O=Imbasoft, ST=Ile-de-France, C=FR \r\n    Issuer: EMAILADDRESS=contact@greenpacs.com, CN=Greenpacs, OU=dev, O=Imbasoft, L=Bondy, ST=Ile-de-France, C=FR \r\n    ...\r\n    \r\n    Certificate[2]: \r\n    Owner: EMAILADDRESS=contact@greenpacs.com, CN=Greenpacs, OU=dev, O=Imbasoft, L=Bondy, ST=Ile-de-France, C=FR\r\n    Issuer: EMAILADDRESS=ghetolay@imbasoft.com, CN=Greenpacs Certificate Authority, OU=dev, O=Imbasoft, ST=Ile-de-France, C=FR \r\n    ...\r\n\r\nServer truststore : \r\n\r\n    Entry type: trustedCertEntry\r\n\r\n    Owner: EMAILADDRESS=contact@greenpacs.com, CN=Greenpacs, OU=dev, O=Imbasoft, L=Bondy, ST=Ile-de-France, C=FR\r\n    Issuer: EMAILADDRESS=ghetolay@imbasoft.com, CN=Greenpacs Certificate Authority, OU=dev, O=Imbasoft, ST=Ile-de-France, C=FR\r\n\r\nI&#39;m not sure about these keystores but I tried with different one (adding the CA certificate to the client&#39;s certificate chain, adding certificate to the truststore) and the validation still fail. And with these keystores the first way of validation (SSLEngine) seems to work.\r\n\r\nThe debug output is too big to put it here but here is the stacktrace : \r\n\r\n    java.security.cert.CertPathValidatorException: Could not determine revocation status\r\n    \tat sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:153)\r\n    \tat sun.security.provider.certpath.PKIXCertPathValidator.doValidate(PKIXCertPathValidator.java:325)\r\n    \tat sun.security.provider.certpath.PKIXCertPathValidator.engineValidate(PKIXCertPathValidator.java:187)\r\n    \tat java.security.cert.CertPathValidator.validate(CertPathValidator.java:267)\r\n    \tat MainClass.main(MainClass.java:75)\r\n    Caused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n    \tat sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:197)\r\n    \tat java.security.cert.CertPathBuilder.build(CertPathBuilder.java:255)\r\n    \tat sun.security.provider.certpath.CrlRevocationChecker.buildToNewKey(CrlRevocationChecker.java:583)\r\n    \tat sun.security.provider.certpath.CrlRevocationChecker.verifyWithSeparateSigningKey(CrlRevocationChecker.java:459)\r\n    \tat sun.security.provider.certpath.CrlRevocationChecker.verifyRevocationStatus(CrlRevocationChecker.java:339)\r\n    \tat sun.security.provider.certpath.CrlRevocationChecker.verifyRevocationStatus(CrlRevocationChecker.java:248)\r\n    \tat sun.security.provider.certpath.CrlRevocationChecker.check(CrlRevocationChecker.java:189)\r\n    \tat sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:131)\r\n    \t... 4 more\r\n\r\nIf I disable the revocation or if I set the last certificate (instead of the first) as X509CertSelector the code work but I&#39;m not sure of what I&#39;m doing.\r\n\r\nI&#39;m starting to doubt about the jetty code but I&#39;m not an expert in certificate and SSL handshaking so it could also come from bad keystore/truststore. That&#39;s why I did not create a issue on jetty&#39;s board and asked here before, to be sure the code needs to be changed.\r\n\r\nAlso It could be useful to know how to validate a signed certificate in Java.","title":"Java/Keystore Verify Signed certificate","body":"<p>I'm working on a client-cert authentication between a embedded jetty server and a client. They both use keystore. The client certificate is signed by the server's certificate which is signed by a CA. Jetty use 2 method to authenticate a client certificate, javax.net.ssl.SSLEngine which seems to work and they also use the code above.</p>\n\n<pre><code>List&lt;X509Certificate&gt; certList = Certificate chain sent by the client\nKeyStore truststore = server's truststore\n\n//No use of CRL/OSCP/CRLDP\n_crls = null;\n_enableOCSP = false;\n_enableCRLDP = false;\n\ntry{\n X509CertSelector certSelect = new X509CertSelector();\n certSelect.setCertificate((X509Certificate) certList.get(0));\n\n // Configure certification path builder parameters\n PKIXBuilderParameters pbParams = new PKIXBuilderParameters(truststore, certSelect);\n pbParams.addCertStore(CertStore.getInstance(\"Collection\", new CollectionCertStoreParameters(certList)));\n\n // Set maximum certification path length\n pbParams.setMaxPathLength(-1);\n\n // Enable revocation checking\n pbParams.setRevocationEnabled(true);\n\n // Set static Certificate Revocation List\n if (_crls != null &amp;&amp; !_crls.isEmpty())\n     pbParams.addCertStore(CertStore.getInstance(\"Collection\", new CollectionCertStoreParameters(_crls)));\n\n  // Enable On-Line Certificate Status Protocol (OCSP) support\n  if (_enableOCSP)\n      Security.setProperty(\"ocsp.enable\",\"true\");\n\n  // Enable Certificate Revocation List Distribution Points (CRLDP) support\n  if (_enableCRLDP)\n      System.setProperty(\"com.sun.security.enableCRLDP\",\"true\");\n\n // Build certification path\n CertPathBuilderResult buildResult = CertPathBuilder.getInstance(\"PKIX\").build(pbParams);               \n\n // Validate certification path\n CertPathValidator.getInstance(\"PKIX\").validate(buildResult.getCertPath(),pbParams);\n}catch(GeneralSecurityException gse){\n ...\n}\n</code></pre>\n\n<p>Of course I must use this second way...\nSo let's concentrate on this code, is this a good way to verify a signed certificate ?\nHere is a dump of my keystores : </p>\n\n<p>Client Keystore :</p>\n\n<pre><code>Entry type: PrivateKeyEntry \nCertificate chain length: 2\nCertificate[1]: \nOwner: EMAILADDRESS=truc@ok.com, CN=Servlet, OU=dev, O=Imbasoft, ST=Ile-de-France, C=FR \nIssuer: EMAILADDRESS=contact@greenpacs.com, CN=Greenpacs, OU=dev, O=Imbasoft, L=Bondy, ST=Ile-de-France, C=FR \n...\n\nCertificate[2]: \nOwner: EMAILADDRESS=contact@greenpacs.com, CN=Greenpacs, OU=dev, O=Imbasoft, L=Bondy, ST=Ile-de-France, C=FR\nIssuer: EMAILADDRESS=ghetolay@imbasoft.com, CN=Greenpacs Certificate Authority, OU=dev, O=Imbasoft, ST=Ile-de-France, C=FR \n...\n</code></pre>\n\n<p>Server truststore : </p>\n\n<pre><code>Entry type: trustedCertEntry\n\nOwner: EMAILADDRESS=contact@greenpacs.com, CN=Greenpacs, OU=dev, O=Imbasoft, L=Bondy, ST=Ile-de-France, C=FR\nIssuer: EMAILADDRESS=ghetolay@imbasoft.com, CN=Greenpacs Certificate Authority, OU=dev, O=Imbasoft, ST=Ile-de-France, C=FR\n</code></pre>\n\n<p>I'm not sure about these keystores but I tried with different one (adding the CA certificate to the client's certificate chain, adding certificate to the truststore) and the validation still fail. And with these keystores the first way of validation (SSLEngine) seems to work.</p>\n\n<p>The debug output is too big to put it here but here is the stacktrace : </p>\n\n<pre><code>java.security.cert.CertPathValidatorException: Could not determine revocation status\n    at sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:153)\n    at sun.security.provider.certpath.PKIXCertPathValidator.doValidate(PKIXCertPathValidator.java:325)\n    at sun.security.provider.certpath.PKIXCertPathValidator.engineValidate(PKIXCertPathValidator.java:187)\n    at java.security.cert.CertPathValidator.validate(CertPathValidator.java:267)\n    at MainClass.main(MainClass.java:75)\nCaused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n    at sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:197)\n    at java.security.cert.CertPathBuilder.build(CertPathBuilder.java:255)\n    at sun.security.provider.certpath.CrlRevocationChecker.buildToNewKey(CrlRevocationChecker.java:583)\n    at sun.security.provider.certpath.CrlRevocationChecker.verifyWithSeparateSigningKey(CrlRevocationChecker.java:459)\n    at sun.security.provider.certpath.CrlRevocationChecker.verifyRevocationStatus(CrlRevocationChecker.java:339)\n    at sun.security.provider.certpath.CrlRevocationChecker.verifyRevocationStatus(CrlRevocationChecker.java:248)\n    at sun.security.provider.certpath.CrlRevocationChecker.check(CrlRevocationChecker.java:189)\n    at sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:131)\n    ... 4 more\n</code></pre>\n\n<p>If I disable the revocation or if I set the last certificate (instead of the first) as X509CertSelector the code work but I'm not sure of what I'm doing.</p>\n\n<p>I'm starting to doubt about the jetty code but I'm not an expert in certificate and SSL handshaking so it could also come from bad keystore/truststore. That's why I did not create a issue on jetty's board and asked here before, to be sure the code needs to be changed.</p>\n\n<p>Also It could be useful to know how to validate a signed certificate in Java.</p>\n"},{"tags":["java","spring","junit5"],"answers":[{"comments":[{"owner":{"account_id":12939173,"reputation":990,"user_id":9355534,"display_name":"Shark Deng"},"score":0,"creation_date":1695733412,"post_id":67388897,"comment_id":136061619,"body_markdown":"I used MockMvc and it gets Unsatisfied dependency expressed through field &#39;mockMvc&#39;:","body":"I used MockMvc and it gets Unsatisfied dependency expressed through field &#39;mockMvc&#39;:"},{"owner":{"account_id":8821600,"reputation":568,"user_id":15059968,"display_name":"Andrei Kulik"},"score":0,"creation_date":1695909788,"post_id":67388897,"comment_id":136089103,"body_markdown":"@SharkDeng If you wanna know more about dao level testing you can read this good article: https://rieckpil.de/test-your-spring-boot-jpa-persistence-layer-with-datajpatest/","body":"@SharkDeng If you wanna know more about dao level testing you can read this good article: <a href=\"https://rieckpil.de/test-your-spring-boot-jpa-persistence-layer-with-datajpatest/\" rel=\"nofollow noreferrer\">rieckpil.de/&hellip;</a>"}],"tags":[],"owner":{"account_id":8821600,"reputation":568,"user_id":15059968,"display_name":"Andrei Kulik"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695801220,"creation_date":1620146994,"answer_id":67388897,"question_id":67386221,"body_markdown":"I think you try to test a class that extends from the `CrudRepository` or `JpaRepository` interface. If it is true then unit tests don&#39;t have any sense, as you&#39;re not writing any implementation code yourself. You need to think about the integration test in this way.\r\nOr you can do it something like this:\r\n```java\r\n@DataJpaTest\r\npublic class ApplicationTests {\r\n\r\n    @Autowired\r\n    UserRepository usRepo;\r\n\r\n    @Test\r\n    public void name() {\r\n        usRepo.save(new MyEntity());\r\n    }\r\n}\r\n\r\n```","title":"Spring JUnit5 testing Repositories, Repo is null?","body":"<p>I think you try to test a class that extends from the <code>CrudRepository</code> or <code>JpaRepository</code> interface. If it is true then unit tests don't have any sense, as you're not writing any implementation code yourself. You need to think about the integration test in this way.\nOr you can do it something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@DataJpaTest\npublic class ApplicationTests {\n\n    @Autowired\n    UserRepository usRepo;\n\n    @Test\n    public void name() {\n        usRepo.save(new MyEntity());\n    }\n}\n\n</code></pre>\n"}],"owner":{"account_id":20067767,"reputation":189,"user_id":14713134,"display_name":"Jefferey John Smith"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":619,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695801220,"creation_date":1620136469,"question_id":67386221,"body_markdown":"I am trying to test my 3rd year project using JUnit5, I am trying to test the repositories. Alas, when I am trying to test I keep getting the same error. The error is as follows:\r\n\r\n    java.lang.NullPointerException: Cannot invoke &quot;CO3102.hw2.repositories.UserRepository.save(Object)&quot; because &quot;this.usRepo&quot; is null\r\n\tat CO3202.tests.ApplicationTests.name(ApplicationTests.java:19)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:564)\r\n\tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:688)\r\n\tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:210)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:206)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:131)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:65)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\r\n\tat \r\n \r\n \r\n     org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:84)\r\n\tat org.eclipse.jdt.internal.junit5.runner.JUnit5TestReference.run(JUnit5TestReference.java:98)\r\n\tat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:542)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:770)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:464)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:210)\r\n\r\nI can&#39;t quite understand why this isn&#39;t working. But here is my ApplicationTest.class\r\n\r\n    import static org.junit.jupiter.api.Assertions.*;\r\n     import org.springframework.boot.test.context.SpringBootTest;\r\n     import org.junit.jupiter.api.Test;\r\n     import org.springframework.beans.factory.annotation.Autowired;\r\n\r\n     import CO3102.hw2.domain.User;\r\n      import CO3102.hw2.repositories.UserRepository;\r\n     @SpringBootTest\r\n     class ApplicationTests {\r\n\t @Autowired\r\n\t UserRepository usRepo;\r\n\r\n\t    @Test\r\n\t    public void name() {\r\n\t    \tUser u = new User();\r\n\t    \tu.setEmail(&quot;fdssfs&quot;);\r\n\t    \tusRepo.save(u);\r\n\t    }\r\n\t@Test\r\n\tvoid test() {\r\n\t\tfail(&quot;Not yet implemented&quot;);\r\n\t}\r\n\r\n    }\r\n\r\nHere is my build.gradle\r\n\r\n    dependencies {\r\n    compile(&quot;org.springframework.boot:spring-boot-starter-data-jpa&quot;)\r\n    compile(&quot;javax.servlet:jstl:1.2&quot;)\r\n    compile group: &#39;javax.servlet&#39;, name: &#39;jstl&#39;, version: &#39;1.2&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-security&#39;\r\n    implementation &#39;org.springframework.security:spring-security-test&#39;\r\n    compile group: &#39;org.springframework.security&#39;, name: &#39;spring-security-crypto&#39;, version: &#39;5.4.2&#39;\r\n    compile(&quot;org.springframework.boot:spring-boot-starter-mail&quot;)\r\n    compile group: &#39;mysql&#39;, name: &#39;mysql-connector-java&#39;, version: &#39;8.0.11&#39;\r\n    compile group: &#39;javax.servlet&#39;, name: &#39;jstl&#39;, version: &#39;1.2&#39;\r\n    runtime(&quot;mysql:mysql-connector-java&quot;)\r\n    compile(&quot;org.springframework.boot:spring-boot-starter-jdbc&quot;)\r\n    compile (&quot;org.springframework.boot:spring-boot-starter-web&quot;) \r\n    compile group: &#39;com.qasymphony.qtest&#39;, name: &#39;qtest-sdk-java&#39;, version: &#39;1.4.7&#39;    \r\n    compile(&quot;org.apache.tomcat.embed:tomcat-embed-jasper&quot;)\r\n    compile group: &#39;org.glassfish.jaxb&#39;, name: &#39;jaxb-runtime&#39;, version: &#39;2.3.3&#39;\r\n    providedRuntime(&quot;org.springframework.boot:spring-boot-starter-tomcat&quot;)\r\n    providedRuntime &#39;org.apache.tomcat.embed:tomcat-embed-jasper&#39;\r\n    compile group: &#39;tangrammer&#39;, name: &#39;java-net-http-client&#39;, version: &#39;0.1.2&#39;\r\n    implementation &#39;com.squareup.okhttp3:okhttp:3.14.6&#39;\r\n    compile group: &#39;com.google.code.gson&#39;, name: &#39;gson&#39;, version: &#39;2.8.5&#39;\r\n    testImplementation(&#39;org.springframework.boot:spring-boot-starter-test&#39;)\r\n    }\r\n\r\nI have tried the following:\r\n\r\n 1. AutoConfigureMockMvc\r\n 2. @DataJpaTest - this cannot be resolved to a type I have tried adding dependency and jar file.\r\n\r\nIf you could help or point me in the right direction I would be very grateful.\r\nThank you\r\n\r\n ","title":"Spring JUnit5 testing Repositories, Repo is null?","body":"<p>I am trying to test my 3rd year project using JUnit5, I am trying to test the repositories. Alas, when I am trying to test I keep getting the same error. The error is as follows:</p>\n<pre><code>java.lang.NullPointerException: Cannot invoke &quot;CO3102.hw2.repositories.UserRepository.save(Object)&quot; because &quot;this.usRepo&quot; is null\nat CO3202.tests.ApplicationTests.name(ApplicationTests.java:19)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.base/java.lang.reflect.Method.invoke(Method.java:564)\nat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:688)\nat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\nat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\nat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\nat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\nat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\nat org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\nat org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\nat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\nat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\nat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\nat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\nat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\nat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\nat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:210)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:206)\nat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:131)\nat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:65)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\nat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\nat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\nat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\nat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\nat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\nat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\nat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\nat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\nat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108)\nat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\nat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\nat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\nat \n\n\n org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\nat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96)\nat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:84)\nat org.eclipse.jdt.internal.junit5.runner.JUnit5TestReference.run(JUnit5TestReference.java:98)\nat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:542)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:770)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:464)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:210)\n</code></pre>\n<p>I can't quite understand why this isn't working. But here is my ApplicationTest.class</p>\n<pre><code>import static org.junit.jupiter.api.Assertions.*;\n import org.springframework.boot.test.context.SpringBootTest;\n import org.junit.jupiter.api.Test;\n import org.springframework.beans.factory.annotation.Autowired;\n\n import CO3102.hw2.domain.User;\n  import CO3102.hw2.repositories.UserRepository;\n @SpringBootTest\n class ApplicationTests {\n @Autowired\n UserRepository usRepo;\n\n    @Test\n    public void name() {\n        User u = new User();\n        u.setEmail(&quot;fdssfs&quot;);\n        usRepo.save(u);\n    }\n@Test\nvoid test() {\n    fail(&quot;Not yet implemented&quot;);\n}\n\n}\n</code></pre>\n<p>Here is my build.gradle</p>\n<pre><code>dependencies {\ncompile(&quot;org.springframework.boot:spring-boot-starter-data-jpa&quot;)\ncompile(&quot;javax.servlet:jstl:1.2&quot;)\ncompile group: 'javax.servlet', name: 'jstl', version: '1.2'\nimplementation 'org.springframework.boot:spring-boot-starter-security'\nimplementation 'org.springframework.security:spring-security-test'\ncompile group: 'org.springframework.security', name: 'spring-security-crypto', version: '5.4.2'\ncompile(&quot;org.springframework.boot:spring-boot-starter-mail&quot;)\ncompile group: 'mysql', name: 'mysql-connector-java', version: '8.0.11'\ncompile group: 'javax.servlet', name: 'jstl', version: '1.2'\nruntime(&quot;mysql:mysql-connector-java&quot;)\ncompile(&quot;org.springframework.boot:spring-boot-starter-jdbc&quot;)\ncompile (&quot;org.springframework.boot:spring-boot-starter-web&quot;) \ncompile group: 'com.qasymphony.qtest', name: 'qtest-sdk-java', version: '1.4.7'    \ncompile(&quot;org.apache.tomcat.embed:tomcat-embed-jasper&quot;)\ncompile group: 'org.glassfish.jaxb', name: 'jaxb-runtime', version: '2.3.3'\nprovidedRuntime(&quot;org.springframework.boot:spring-boot-starter-tomcat&quot;)\nprovidedRuntime 'org.apache.tomcat.embed:tomcat-embed-jasper'\ncompile group: 'tangrammer', name: 'java-net-http-client', version: '0.1.2'\nimplementation 'com.squareup.okhttp3:okhttp:3.14.6'\ncompile group: 'com.google.code.gson', name: 'gson', version: '2.8.5'\ntestImplementation('org.springframework.boot:spring-boot-starter-test')\n}\n</code></pre>\n<p>I have tried the following:</p>\n<ol>\n<li>AutoConfigureMockMvc</li>\n<li>@DataJpaTest - this cannot be resolved to a type I have tried adding dependency and jar file.</li>\n</ol>\n<p>If you could help or point me in the right direction I would be very grateful.\nThank you</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":6232328,"reputation":1338,"user_id":4848659,"display_name":"Gimhani"},"score":0,"creation_date":1536312024,"post_id":52219311,"comment_id":91387091,"body_markdown":"spring framework comes with the idea of autowiring objects in place of creating objects in every occasion. As done in your code, it prevents extra code required.What do you mean by &#39;wrong&#39;?","body":"spring framework comes with the idea of autowiring objects in place of creating objects in every occasion. As done in your code, it prevents extra code required.What do you mean by &#39;wrong&#39;?"},{"owner":{"account_id":7757823,"reputation":1409,"user_id":5871514,"accept_rate":80,"display_name":"Tilak Raj"},"score":0,"creation_date":1536312089,"post_id":52219311,"comment_id":91387135,"body_markdown":"i mean , why would i go with the former one , why not the latter one? What&#39;s the benefit of doing th former one?","body":"i mean , why would i go with the former one , why not the latter one? What&#39;s the benefit of doing th former one?"},{"owner":{"account_id":7757823,"reputation":1409,"user_id":5871514,"accept_rate":80,"display_name":"Tilak Raj"},"score":0,"creation_date":1536312303,"post_id":52219311,"comment_id":91387288,"body_markdown":"@Gimhani see the update","body":"@Gimhani see the update"},{"owner":{"account_id":6232328,"reputation":1338,"user_id":4848659,"display_name":"Gimhani"},"score":1,"creation_date":1536312386,"post_id":52219311,"comment_id":91387342,"body_markdown":"you do not need to explicitly initialize the object using constructor when you use spring @Autowired. This comes specially handy when you are working on a big java application.","body":"you do not need to explicitly initialize the object using constructor when you use spring @Autowired. This comes specially handy when you are working on a big java application."},{"owner":{"account_id":212417,"reputation":43624,"user_id":465223,"accept_rate":75,"display_name":"dunni"},"score":0,"creation_date":1536322873,"post_id":52219311,"comment_id":91393571,"body_markdown":"You can read about the principle of the design pattern dependency injection at https://en.wikipedia.org/wiki/Dependency_injection.","body":"You can read about the principle of the design pattern dependency injection at <a href=\"https://en.wikipedia.org/wiki/Dependency_injection\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Dependency_injection</a>."}],"answers":[{"tags":[],"owner":{"account_id":1198039,"reputation":10944,"user_id":1169349,"display_name":"Reg"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1695800022,"creation_date":1536312393,"answer_id":52219490,"question_id":52219311,"body_markdown":"**I believe you are confusing Spring and the Java language.**\r\n\r\n`Autowire` has to do with &quot;Code injections&quot;. (Just like you described.) And is part of the Spring framework.\r\n\r\nHowever, the `import` (with a lowercase i) is part of the Java language. As you stated, it makes other code available to be used in the class where you added it. `import` will be used regardless if you are using the Spring framework. \r\n\r\n**Both of these statements have completely different purposes and are used with others.** \r\n\r\nFor example:\r\nThe class you are autowiring will also be imported (*if it is in a different Java package*). And you do not have to create an instance of it. In other words, you do not have to use the &#39;new&#39; keyword - the Spring framework will do that for you. (*nice right?*)\r\n\r\nBut that being said, there is also a `@Import` annotation in the Spring framework, which is used for importing Spring Configuration classes. I am guessing this is where the confusion originated. \r\n","title":"Autowired vs import","body":"<p><strong>I believe you are confusing Spring and the Java language.</strong></p>\n<p><code>Autowire</code> has to do with &quot;Code injections&quot;. (Just like you described.) And is part of the Spring framework.</p>\n<p>However, the <code>import</code> (with a lowercase i) is part of the Java language. As you stated, it makes other code available to be used in the class where you added it. <code>import</code> will be used regardless if you are using the Spring framework.</p>\n<p><strong>Both of these statements have completely different purposes and are used with others.</strong></p>\n<p>For example:\nThe class you are autowiring will also be imported (<em>if it is in a different Java package</em>). And you do not have to create an instance of it. In other words, you do not have to use the 'new' keyword - the Spring framework will do that for you. (<em>nice right?</em>)</p>\n<p>But that being said, there is also a <code>@Import</code> annotation in the Spring framework, which is used for importing Spring Configuration classes. I am guessing this is where the confusion originated.</p>\n"},{"tags":[],"owner":{"account_id":5896196,"reputation":740,"user_id":4641280,"display_name":"Damith"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1536312665,"creation_date":1536312665,"answer_id":52219580,"question_id":52219311,"body_markdown":"Its basically about object creation.\r\nWhen you Autowire something, that particular bean is managed by the spring context and only one instance of particular class will be constructed by spring context and that particular instance will be provided when you use Autowire for that class type Objects. \r\nBut when you import something into your class, that does not mean that you have an instance of that particular class; you have to initialize it on your own. And if you want to treat it as a singleton object, basically you will be writing whole code for it. \r\n\r\nAnd more over there are basic differences between them like if you want to access static variables in a class, you will not need an instance of that class. (you can access them by class reference) In that case you dont need to Autowire but you need Import statement.\r\n\r\nBut on the other hand if you are interested in experiencing power of spring, like Autowire Configurations and may be validate them and all those cool functionalities that spring provides, you need to make your class a component and Autowire as you want. \r\n","title":"Autowired vs import","body":"<p>Its basically about object creation.\nWhen you Autowire something, that particular bean is managed by the spring context and only one instance of particular class will be constructed by spring context and that particular instance will be provided when you use Autowire for that class type Objects. \nBut when you import something into your class, that does not mean that you have an instance of that particular class; you have to initialize it on your own. And if you want to treat it as a singleton object, basically you will be writing whole code for it. </p>\n\n<p>And more over there are basic differences between them like if you want to access static variables in a class, you will not need an instance of that class. (you can access them by class reference) In that case you dont need to Autowire but you need Import statement.</p>\n\n<p>But on the other hand if you are interested in experiencing power of spring, like Autowire Configurations and may be validate them and all those cool functionalities that spring provides, you need to make your class a component and Autowire as you want. </p>\n"}],"owner":{"account_id":7757823,"reputation":1409,"user_id":5871514,"accept_rate":80,"display_name":"Tilak Raj"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5009,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"accepted_answer_id":52219580,"answer_count":2,"score":4,"last_activity_date":1695800022,"creation_date":1536311781,"question_id":52219311,"body_markdown":"I am very new to spring boot and I am trying to grasp the concept of it. Now I came across @Autowired in it. I understood pretty much about it.\r\n\r\nLike, when you write @Autowired, things happen in two passes and in the second pass spring injects beans.\r\n\r\nNow, I have this example; \r\n\r\n    Class Abc {\r\n        \r\n        @Autowired\r\n        private Xyz xyz;\r\n        \r\n        PSVM(String...z) {\r\n            xyz.hello();\r\n        } \r\n    }\r\n\r\nImport basically imports the code into the file.\r\n\r\nSo,\r\n\r\n    Import com.tilak.Xyz;\r\n    \r\n    Class Abc {\r\n        private Xyz xyz;\r\n        \r\n        PSVM(String...z) {\r\n            xyz = new Xyz();\r\n            xyz.hello();\r\n        }\r\n    }\r\n\r\nWhy should/ shouldn&#39;t I go with the latter one? \r\n\r\nIs there any advantage in doing the first one? Where should I use the first one and where should I use the second one?","title":"Autowired vs import","body":"<p>I am very new to spring boot and I am trying to grasp the concept of it. Now I came across @Autowired in it. I understood pretty much about it.</p>\n\n<p>Like, when you write @Autowired, things happen in two passes and in the second pass spring injects beans.</p>\n\n<p>Now, I have this example; </p>\n\n<pre><code>Class Abc {\n\n    @Autowired\n    private Xyz xyz;\n\n    PSVM(String...z) {\n        xyz.hello();\n    } \n}\n</code></pre>\n\n<p>Import basically imports the code into the file.</p>\n\n<p>So,</p>\n\n<pre><code>Import com.tilak.Xyz;\n\nClass Abc {\n    private Xyz xyz;\n\n    PSVM(String...z) {\n        xyz = new Xyz();\n        xyz.hello();\n    }\n}\n</code></pre>\n\n<p>Why should/ shouldn't I go with the latter one? </p>\n\n<p>Is there any advantage in doing the first one? Where should I use the first one and where should I use the second one?</p>\n"},{"tags":["java","android","kotlin"],"answers":[{"tags":[],"owner":{"account_id":216120,"reputation":49213,"user_id":471160,"accept_rate":90,"display_name":"marcinj"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695799822,"creation_date":1695799822,"answer_id":77185420,"question_id":77184629,"body_markdown":"\r\nMost probably your app is starting a foreground service from the bacground and you are not calling startForeground() in your service onCreate() or onStartCommand on time. Your app has 5s period to call startForeground in your Service after you call Context.startForegroundService(). You can check if your service logic might have a bug causing startForeground to not be called in some scenarios. You can also add firebase logging to log the time of startForegroundService call and startForeground call, this will show in your crash report whether this is the actual problem.\r\n\r\nThis crash is quiet common and appears on various devices. It might be either a design problem in the android.\r\n\r\nsome references:\r\n\r\nhttps://developer.android.com/about/versions/oreo/android-8.0-changes.html#back-all\r\n\r\nhttps://issuetracker.google.com/issues/76112072","title":"AndroidRuntime: FATAL EXCEPTION:: startForegroundService() not allowed due to mAllowStartForeground","body":"<p>Most probably your app is starting a foreground service from the bacground and you are not calling startForeground() in your service onCreate() or onStartCommand on time. Your app has 5s period to call startForeground in your Service after you call Context.startForegroundService(). You can check if your service logic might have a bug causing startForeground to not be called in some scenarios. You can also add firebase logging to log the time of startForegroundService call and startForeground call, this will show in your crash report whether this is the actual problem.</p>\n<p>This crash is quiet common and appears on various devices. It might be either a design problem in the android.</p>\n<p>some references:</p>\n<p><a href=\"https://developer.android.com/about/versions/oreo/android-8.0-changes.html#back-all\" rel=\"nofollow noreferrer\">https://developer.android.com/about/versions/oreo/android-8.0-changes.html#back-all</a></p>\n<p><a href=\"https://issuetracker.google.com/issues/76112072\" rel=\"nofollow noreferrer\">https://issuetracker.google.com/issues/76112072</a></p>\n"}],"owner":{"account_id":26805586,"reputation":31,"user_id":20396942,"display_name":"Vijay Rathod"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695799822,"creation_date":1695787574,"question_id":77184629,"body_markdown":"Can&#39;t reproduce manually, got those stats from Crashlytics. Not sure how we can deal with this crash, do you have any idea why this crash may happen?\r\n\r\n\r\nActual result\r\nThere are several types of exception grouped by the Android OS, but the reason looks exactly the same\r\n\r\n    Fatal Exception: android.app.RemoteServiceException: Context.startForegroundService() did not then call Service.startForeground(): ServiceRecord{bc3065 u0 com.bandlab.bandlab/com.bandlab.media.player.notification.MediaPlaybackService}\r\n           at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2269)\r\n           at android.os.Handler.dispatchMessage(Handler.java:106)\r\n           at android.os.Looper.loop(Looper.java:246)\r\n           at android.app.ActivityThread.main(ActivityThread.java:8653)\r\n           at java.lang.reflect.Method.invoke(Method.java)\r\n           at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:602)\r\n           at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1130)","title":"AndroidRuntime: FATAL EXCEPTION:: startForegroundService() not allowed due to mAllowStartForeground","body":"<p>Can't reproduce manually, got those stats from Crashlytics. Not sure how we can deal with this crash, do you have any idea why this crash may happen?</p>\n<p>Actual result\nThere are several types of exception grouped by the Android OS, but the reason looks exactly the same</p>\n<pre><code>Fatal Exception: android.app.RemoteServiceException: Context.startForegroundService() did not then call Service.startForeground(): ServiceRecord{bc3065 u0 com.bandlab.bandlab/com.bandlab.media.player.notification.MediaPlaybackService}\n       at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2269)\n       at android.os.Handler.dispatchMessage(Handler.java:106)\n       at android.os.Looper.loop(Looper.java:246)\n       at android.app.ActivityThread.main(ActivityThread.java:8653)\n       at java.lang.reflect.Method.invoke(Method.java)\n       at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:602)\n       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1130)\n</code></pre>\n"},{"tags":["java","multithreading","synchronization","synchronized"],"comments":[{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":4,"creation_date":1231930964,"post_id":442564,"comment_id":264387,"body_markdown":"I&#39;d also like to point out that context is important - the &quot;Typically it is the lock on the instance itself&quot; bit is within a section about documenting a conditionally thread-safe class, when you&#39;re making the lock public. In other words, that sentence applies when you&#39;ve already made this decision.","body":"I&#39;d also like to point out that context is important - the &quot;Typically it is the lock on the instance itself&quot; bit is within a section about documenting a conditionally thread-safe class, when you&#39;re making the lock public. In other words, that sentence applies when you&#39;ve already made this decision."},{"owner":{"account_id":14630,"reputation":16827,"user_id":30316,"accept_rate":82,"display_name":"eljenso"},"score":0,"creation_date":1231934371,"post_id":442564,"comment_id":264477,"body_markdown":"In the absence of internal synch, and when external synch is needed, the lock is often the instance itself, Bloch basically says. So why wouldn&#39;t this be the case for internal synch with lock on &#39;this&#39; as well? (The importance of documentation is another issue.)","body":"In the absence of internal synch, and when external synch is needed, the lock is often the instance itself, Bloch basically says. So why wouldn&#39;t this be the case for internal synch with lock on &#39;this&#39; as well? (The importance of documentation is another issue.)"},{"owner":{"account_id":94310,"reputation":11924,"user_id":257568,"accept_rate":50,"display_name":"ArtemGr"},"score":0,"creation_date":1277454062,"post_id":442564,"comment_id":3198471,"body_markdown":"There is a tradeoff between extended granularity and extra CPU cache and bus requests overhead, because locking on an external Object will most probably require a separate cache line to be modified and exchanged between CPU caches (cf. MESIF and MOESI).","body":"There is a tradeoff between extended granularity and extra CPU cache and bus requests overhead, because locking on an external Object will most probably require a separate cache line to be modified and exchanged between CPU caches (cf. MESIF and MOESI)."},{"owner":{"account_id":8732367,"reputation":156,"user_id":6531984,"display_name":"Sgene9"},"score":2,"creation_date":1544048104,"post_id":442564,"comment_id":94142605,"body_markdown":"I think, in the world of defensive programming, you prevent bugs not by idiom but by code. When someone asks me a question, &quot;How optimized is your synchronization?&quot;, I want to say &quot;Very&quot; instead of &quot;Very, unless someone else doesn&#39;t follow the idiom&quot;.","body":"I think, in the world of defensive programming, you prevent bugs not by idiom but by code. When someone asks me a question, &quot;How optimized is your synchronization?&quot;, I want to say &quot;Very&quot; instead of &quot;Very, unless someone else doesn&#39;t follow the idiom&quot;."}],"answers":[{"comments":[{"owner":{"account_id":14630,"reputation":16827,"user_id":30316,"accept_rate":82,"display_name":"eljenso"},"score":0,"creation_date":1231934968,"post_id":442570,"comment_id":264497,"body_markdown":"If granularity is an issue, synchronized(this) might not be applicable, true. But: the required granularity is very often exactly granularity provided by synchronized instance methods, and we do see that synchronized methods in Java are rather common.","body":"If granularity is an issue, synchronized(this) might not be applicable, true. But: the required granularity is very often exactly granularity provided by synchronized instance methods, and we do see that synchronized methods in Java are rather common."},{"owner":{"account_id":14630,"reputation":16827,"user_id":30316,"accept_rate":82,"display_name":"eljenso"},"score":4,"creation_date":1231935232,"post_id":442570,"comment_id":264510,"body_markdown":"&quot;synchronized(this) just really doesn&#39;t give you anything.&quot; Ok, I replace it with a synchronize(myPrivateFinalLock). What does that give me? You talk about it being a defensive mechanism. What am I protected against?","body":"&quot;synchronized(this) just really doesn&#39;t give you anything.&quot; Ok, I replace it with a synchronize(myPrivateFinalLock). What does that give me? You talk about it being a defensive mechanism. What am I protected against?"},{"owner":{"account_id":9867,"reputation":618201,"user_id":18393,"accept_rate":82,"display_name":"cletus"},"score":16,"creation_date":1231936749,"post_id":442570,"comment_id":264575,"body_markdown":"You&#39;re protected against accidental (or malicious) locking of &#39;this&#39; by external objects.","body":"You&#39;re protected against accidental (or malicious) locking of &#39;this&#39; by external objects."},{"owner":{"account_id":21831,"reputation":1232,"user_id":53369,"display_name":"Olivier"},"score":16,"creation_date":1231953769,"post_id":442570,"comment_id":265450,"body_markdown":"I don&#39;t agree at all with this answer: a lock should always be held for the shortest amount of time possible, and that&#39;s precisely the reason why you&#39;d want to &quot;do stuff&quot; around a synchronized block instead of synchronizing the whole method.","body":"I don&#39;t agree at all with this answer: a lock should always be held for the shortest amount of time possible, and that&#39;s precisely the reason why you&#39;d want to &quot;do stuff&quot; around a synchronized block instead of synchronizing the whole method."},{"owner":{"account_id":21831,"reputation":1232,"user_id":53369,"display_name":"Olivier"},"score":0,"creation_date":1231954038,"post_id":442570,"comment_id":265462,"body_markdown":"Given that the stuff you do outside of the synchronized block doesn&#39;t accessed shared data, of course.","body":"Given that the stuff you do outside of the synchronized block doesn&#39;t accessed shared data, of course."},{"owner":{"account_id":9867,"reputation":618201,"user_id":18393,"accept_rate":82,"display_name":"cletus"},"score":5,"creation_date":1231964526,"post_id":442570,"comment_id":266058,"body_markdown":"Doing stuff outside the synchronized block is always well-intentioned.  The point is that people get this wrong a lot of the time and don&#39;t even realize it, just like in the double-checked locking problem.  The road to hell is paved with good intentions.","body":"Doing stuff outside the synchronized block is always well-intentioned.  The point is that people get this wrong a lot of the time and don&#39;t even realize it, just like in the double-checked locking problem.  The road to hell is paved with good intentions."},{"owner":{"account_id":7052,"reputation":48090,"user_id":12048,"accept_rate":94,"display_name":"finnw"},"score":17,"creation_date":1279025460,"post_id":442570,"comment_id":3342604,"body_markdown":"I disagree in general with &quot;X is a defensive mechanism, which is never a bad idea.&quot;  There is a lot of unnecessarily bloated code out there because of this attitude.","body":"I disagree in general with &quot;X is a defensive mechanism, which is never a bad idea.&quot;  There is a lot of unnecessarily bloated code out there because of this attitude."},{"owner":{"account_id":7423,"reputation":20360,"user_id":12892,"display_name":"Cristian Ciupitu"},"score":3,"creation_date":1286288331,"post_id":442570,"comment_id":4109770,"body_markdown":"@finnw: I agree with the bloated code thing, but when you&#39;re not sure, it&#39;s better to be safe (bloated) than sorry.","body":"@finnw: I agree with the bloated code thing, but when you&#39;re not sure, it&#39;s better to be safe (bloated) than sorry."},{"owner":{"account_id":7423,"reputation":20360,"user_id":12892,"display_name":"Cristian Ciupitu"},"score":0,"creation_date":1286289183,"post_id":442570,"comment_id":4109973,"body_markdown":"[The explanation for synchronized methods from the official Java documentation](http://java.sun.com/docs/books/jls/second_edition/html/classes.doc.html#260369)","body":"<a href=\"http://java.sun.com/docs/books/jls/second_edition/html/classes.doc.html#260369\" rel=\"nofollow noreferrer\">The explanation for synchronized methods from the official Java documentation</a>"},{"owner":{"account_id":1781636,"reputation":7670,"user_id":1624202,"accept_rate":61,"display_name":"Cruncher"},"score":0,"creation_date":1395075229,"post_id":442570,"comment_id":34162609,"body_markdown":"@Olivier I would rather make a separate synchronized method for the one part that needs synchro, than to put a synchronized(this) block around it","body":"@Olivier I would rather make a separate synchronized method for the one part that needs synchro, than to put a synchronized(this) block around it"},{"owner":{"account_id":916980,"reputation":8820,"user_id":2580516,"display_name":"Warren Dew"},"score":0,"creation_date":1396772516,"post_id":442570,"comment_id":34932878,"body_markdown":"It&#39;s also to be noted that the first form is legal for a constructor, while the second form is not (even though it should be).","body":"It&#39;s also to be noted that the first form is legal for a constructor, while the second form is not (even though it should be)."},{"owner":{"account_id":262115,"reputation":712,"user_id":546757,"accept_rate":40,"display_name":"Alan Cabrera"},"score":1,"creation_date":1565706382,"post_id":442570,"comment_id":101431382,"body_markdown":"@finnw, defensive programming is always a good thing when practicing software engineering. Vague references to bloat without specifics is not helpful to novice readers; the use of a `final Object`, which makes the locking mechanism explicit and encapsulated, is not even remotely bloat.","body":"@finnw, defensive programming is always a good thing when practicing software engineering. Vague references to bloat without specifics is not helpful to novice readers; the use of a <code>final Object</code>, which makes the locking mechanism explicit and encapsulated, is not even remotely bloat."}],"tags":[],"owner":{"account_id":9867,"reputation":618201,"user_id":18393,"accept_rate":82,"display_name":"cletus"},"comment_count":12,"down_vote_count":6,"up_vote_count":97,"is_accepted":false,"score":91,"last_activity_date":1231937475,"creation_date":1231929777,"answer_id":442570,"question_id":442564,"body_markdown":"Well, firstly it should be pointed out that:\r\n\r\n    public void blah() {\r\n      synchronized (this) {\r\n        // do stuff\r\n      }\r\n    }\r\n\r\nis semantically equivalent to:\r\n\r\n    public synchronized void blah() {\r\n      // do stuff\r\n    }\r\n\r\nwhich is one reason not to use `synchronized(this)`.  You might argue that you can do stuff around the `synchronized(this)` block.  The usual reason is to try and avoid having to do the synchronized check at all, which leads to all sorts of concurrency problems, specifically the [double checked-locking problem][1], which just goes to show how difficult it can be to make a relatively simple check threadsafe.\r\n\r\nA private lock is a defensive mechanism, which is never a bad idea.\r\n\r\nAlso, as you alluded to, private locks can control granularity.  One set of operations on an object might be totally unrelated to another but `synchronized(this)` will mutually exclude access to all of them.\r\n\r\n`synchronized(this)` just really doesn&#39;t give you anything.\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Double-checked_locking","title":"Avoid synchronized(this) in Java?","body":"<p>Well, firstly it should be pointed out that:</p>\n\n<pre><code>public void blah() {\n  synchronized (this) {\n    // do stuff\n  }\n}\n</code></pre>\n\n<p>is semantically equivalent to:</p>\n\n<pre><code>public synchronized void blah() {\n  // do stuff\n}\n</code></pre>\n\n<p>which is one reason not to use <code>synchronized(this)</code>.  You might argue that you can do stuff around the <code>synchronized(this)</code> block.  The usual reason is to try and avoid having to do the synchronized check at all, which leads to all sorts of concurrency problems, specifically the <a href=\"http://en.wikipedia.org/wiki/Double-checked_locking\" rel=\"noreferrer\">double checked-locking problem</a>, which just goes to show how difficult it can be to make a relatively simple check threadsafe.</p>\n\n<p>A private lock is a defensive mechanism, which is never a bad idea.</p>\n\n<p>Also, as you alluded to, private locks can control granularity.  One set of operations on an object might be totally unrelated to another but <code>synchronized(this)</code> will mutually exclude access to all of them.</p>\n\n<p><code>synchronized(this)</code> just really doesn't give you anything.</p>\n"},{"tags":[],"owner":{"account_id":15923,"reputation":28380,"user_id":34161,"accept_rate":83,"display_name":"Yoni Roit"},"comment_count":0,"down_vote_count":5,"up_vote_count":2,"is_accepted":false,"score":-3,"last_activity_date":1231929792,"creation_date":1231929792,"answer_id":442571,"question_id":442564,"body_markdown":"I think points one (somebody else using your lock) and two (all methods using the same lock needlessly) can happen in any fairly large application. Especially when there&#39;s no good communication between developers.\r\n\r\nIt&#39;s not cast in stone, it&#39;s mostly an issue of good practice and preventing errors.\r\n\r\n","title":"Avoid synchronized(this) in Java?","body":"<p>I think points one (somebody else using your lock) and two (all methods using the same lock needlessly) can happen in any fairly large application. Especially when there's no good communication between developers.</p>\n\n<p>It's not cast in stone, it's mostly an issue of good practice and preventing errors.</p>\n"},{"tags":[],"owner":{"account_id":19462,"reputation":102762,"user_id":45664,"accept_rate":91,"display_name":"Andrzej Doyle"},"comment_count":0,"down_vote_count":2,"up_vote_count":5,"is_accepted":false,"score":3,"last_activity_date":1231930244,"creation_date":1231930244,"answer_id":442580,"question_id":442564,"body_markdown":"No, you shouldn&#39;t *always*.  However, I tend to avoid it when there are multiple concerns on a particular object that only need to be threadsafe in respect to themselves.  For example, you might have a mutable data object that has &quot;label&quot; and &quot;parent&quot; fields; these need to be threadsafe, but changing one need not block the other from being written/read.  (In practice I would avoid this by declaring the fields volatile and/or using java.util.concurrent&#39;s AtomicFoo wrappers).\r\n\r\nSynchronization in general is a bit clumsy, as it slaps a big lock down rather than thinking exactly how threads might be allowed to work around each other.  Using &lt;code&gt;synchronized(this)&lt;/code&gt; is even clumsier and anti-social, as it&#39;s saying &quot;no-one may change *anything* on this class while I hold the lock&quot;.  How often do you actually need to do that?\r\n\r\nI would much rather have more granular locks; even if you do want to stop everything from changing (perhaps you&#39;re serialising the object), you can just acquire all of the locks to achieve the same thing, plus it&#39;s more explicit that way.  When you use &lt;code&gt;synchronized(this)&lt;/code&gt;, it&#39;s not clear exactly why you&#39;re synchronizing, or what the side effects might be.  If you use &lt;code&gt;synchronized(labelMonitor)&lt;/code&gt;, or even better &lt;code&gt;labelLock.getWriteLock().lock()&lt;/code&gt;, it&#39;s clear what you are doing and what the effects of your critical section are limited to.","title":"Avoid synchronized(this) in Java?","body":"<p>No, you shouldn't <em>always</em>.  However, I tend to avoid it when there are multiple concerns on a particular object that only need to be threadsafe in respect to themselves.  For example, you might have a mutable data object that has \"label\" and \"parent\" fields; these need to be threadsafe, but changing one need not block the other from being written/read.  (In practice I would avoid this by declaring the fields volatile and/or using java.util.concurrent's AtomicFoo wrappers).</p>\n\n<p>Synchronization in general is a bit clumsy, as it slaps a big lock down rather than thinking exactly how threads might be allowed to work around each other.  Using <code>synchronized(this)</code> is even clumsier and anti-social, as it's saying \"no-one may change <em>anything</em> on this class while I hold the lock\".  How often do you actually need to do that?</p>\n\n<p>I would much rather have more granular locks; even if you do want to stop everything from changing (perhaps you're serialising the object), you can just acquire all of the locks to achieve the same thing, plus it's more explicit that way.  When you use <code>synchronized(this)</code>, it's not clear exactly why you're synchronizing, or what the side effects might be.  If you use <code>synchronized(labelMonitor)</code>, or even better <code>labelLock.getWriteLock().lock()</code>, it's clear what you are doing and what the effects of your critical section are limited to.</p>\n"},{"comments":[{"owner":{"account_id":14630,"reputation":16827,"user_id":30316,"accept_rate":82,"display_name":"eljenso"},"score":0,"creation_date":1231937174,"post_id":442597,"comment_id":264590,"body_markdown":"Do I understand you correctly when you say it depends on your experience?","body":"Do I understand you correctly when you say it depends on your experience?"},{"owner":{"account_id":15611,"reputation":14858,"user_id":33165,"accept_rate":80,"display_name":"tcurdt"},"score":0,"creation_date":1232013668,"post_id":442597,"comment_id":267583,"body_markdown":"In the first place it depends on the code that you want to write. Just saying that you might need a little more experience when you divert to not use synchronize(this).","body":"In the first place it depends on the code that you want to write. Just saying that you might need a little more experience when you divert to not use synchronize(this)."}],"tags":[],"owner":{"account_id":15611,"reputation":14858,"user_id":33165,"accept_rate":80,"display_name":"tcurdt"},"comment_count":2,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1231931093,"creation_date":1231931093,"answer_id":442597,"question_id":442564,"body_markdown":"**Short answer**: You have to understand the difference and make choice depending on the code.\r\n\r\n**Long answer**: In general I would rather try to avoid *synchronize(this)* to reduce contention but private locks add complexity you have to be aware of. So use the right synchronization for the right job. If you are not so experienced with multi-threaded programming I would rather stick to instance locking and read up on this topic. (That said: just using *synchronize(this)* does not automatically make your class fully thread-safe.) This is a not an easy topic but once you get used to it, the answer whether to use *synchronize(this)* or not comes naturally.","title":"Avoid synchronized(this) in Java?","body":"<p><strong>Short answer</strong>: You have to understand the difference and make choice depending on the code.</p>\n\n<p><strong>Long answer</strong>: In general I would rather try to avoid <em>synchronize(this)</em> to reduce contention but private locks add complexity you have to be aware of. So use the right synchronization for the right job. If you are not so experienced with multi-threaded programming I would rather stick to instance locking and read up on this topic. (That said: just using <em>synchronize(this)</em> does not automatically make your class fully thread-safe.) This is a not an easy topic but once you get used to it, the answer whether to use <em>synchronize(this)</em> or not comes naturally.</p>\n"},{"comments":[{"owner":{"account_id":14630,"reputation":16827,"user_id":30316,"accept_rate":82,"display_name":"eljenso"},"score":0,"creation_date":1231935345,"post_id":442601,"comment_id":264515,"body_markdown":"1. &quot;synchronized&quot; is not part of your class&#39; exposed interface.\n2. agree\n3. see 1.","body":"1. &quot;synchronized&quot; is not part of your class&#39; exposed interface. 2. agree 3. see 1."},{"owner":{"account_id":11708,"reputation":21399,"user_id":22704,"display_name":"Darron"},"score":72,"creation_date":1231940756,"post_id":442601,"comment_id":264729,"body_markdown":"Essentially synchronized(this) *is* exposed because it means that external code can affect the operation of your class.  So I assert that you must document it as interface, even if the language does not.","body":"Essentially synchronized(this) <i>is</i> exposed because it means that external code can affect the operation of your class.  So I assert that you must document it as interface, even if the language does not."},{"owner":{"account_id":14630,"reputation":16827,"user_id":30316,"accept_rate":82,"display_name":"eljenso"},"score":0,"creation_date":1231947697,"post_id":442601,"comment_id":265118,"body_markdown":"+1 You get rid of point 2 and pull 1 and 3 together (others did that as well, seems obvious afterwards), and very interesting remark. This one is making me think. Are you saying it&#39;s on the same level as documenting a NullPointerEx, since passing in a null ref can affect the operation of a method?","body":"+1 You get rid of point 2 and pull 1 and 3 together (others did that as well, seems obvious afterwards), and very interesting remark. This one is making me think. Are you saying it&#39;s on the same level as documenting a NullPointerEx, since passing in a null ref can affect the operation of a method?"},{"owner":{"account_id":11708,"reputation":21399,"user_id":22704,"display_name":"Darron"},"score":15,"creation_date":1231952112,"post_id":442601,"comment_id":265346,"body_markdown":"Similar.  See the Javadoc for  Collections.synchronizedMap() -- the returned object uses synchronized(this) internally and they expect the consumer to take advantage of that to use the same lock for large-scale atomic operations like iteration.","body":"Similar.  See the Javadoc for  Collections.synchronizedMap() -- the returned object uses synchronized(this) internally and they expect the consumer to take advantage of that to use the same lock for large-scale atomic operations like iteration."},{"owner":{"account_id":3169,"reputation":24414,"user_id":4510,"display_name":"Bas Leijdekkers"},"score":3,"creation_date":1458637016,"post_id":442601,"comment_id":59937020,"body_markdown":"In fact Collections.synchronizedMap() does NOT use synchronized(this) internally, it uses a private final lock object.","body":"In fact Collections.synchronizedMap() does NOT use synchronized(this) internally, it uses a private final lock object."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1465240622,"post_id":442601,"comment_id":62808804,"body_markdown":"@Bas Leijdekkers: [the documentation](https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#synchronizedMap-java.util.Map-) clearly specifies that the synchronization happens on the returned map instance. What’s interesting, is, that the views returned by `keySet()` and `values()` don’t lock on (their) `this`, but the map instance, which is important to get consistent behavior for all map operations. The reason, the lock object is factored out into a variable, is, that the subclass `SynchronizedSortedMap` needs it for implementing sub-maps that lock on the original map instance.","body":"@Bas Leijdekkers: <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#synchronizedMap-java.util.Map-\" rel=\"nofollow noreferrer\">the documentation</a> clearly specifies that the synchronization happens on the returned map instance. What’s interesting, is, that the views returned by <code>keySet()</code> and <code>values()</code> don’t lock on (their) <code>this</code>, but the map instance, which is important to get consistent behavior for all map operations. The reason, the lock object is factored out into a variable, is, that the subclass <code>SynchronizedSortedMap</code> needs it for implementing sub-maps that lock on the original map instance."}],"tags":[],"owner":{"account_id":11708,"reputation":21399,"user_id":22704,"display_name":"Darron"},"comment_count":6,"down_vote_count":1,"up_vote_count":140,"is_accepted":true,"score":139,"last_activity_date":1461091208,"creation_date":1231931141,"answer_id":442601,"question_id":442564,"body_markdown":"I&#39;ll cover each point separately.\r\n\r\n1. \r\n\r\n&gt; Some evil code may steal your lock (very popular this one, also has an\r\n&gt; &quot;accidentally&quot; variant)\r\n\r\n  I&#39;m more worried about *accidentally*.  What it amounts to is that this use of `this` is part of your class&#39; exposed interface, and should be documented.  Sometimes the ability of other code to use your lock is desired.  This is true of things like `Collections.synchronizedMap` (see the javadoc).\r\n\r\n2. \r\n\r\n &gt; All synchronized methods within the same class use the exact same\r\n &gt; lock, which reduces throughput\r\n\r\n  This is overly simplistic thinking; just getting rid of `synchronized(this)` won&#39;t solve the problem.  Proper synchronization for throughput will take more thought.\r\n\r\n3. \r\n\r\n &gt; You are (unnecessarily) exposing too much information\r\n\r\n  This is a variant of #1.  Use of `synchronized(this)` is part of your interface.  If you don&#39;t want/need this exposed, don&#39;t do it.\r\n\r\n","title":"Avoid synchronized(this) in Java?","body":"<p>I'll cover each point separately.</p>\n\n<ol>\n<li><blockquote>\n  <p>Some evil code may steal your lock (very popular this one, also has an\n  \"accidentally\" variant)</p>\n</blockquote>\n\n<p>I'm more worried about <em>accidentally</em>.  What it amounts to is that this use of <code>this</code> is part of your class' exposed interface, and should be documented.  Sometimes the ability of other code to use your lock is desired.  This is true of things like <code>Collections.synchronizedMap</code> (see the javadoc).</p></li>\n<li><blockquote>\n  <p>All synchronized methods within the same class use the exact same\n  lock, which reduces throughput</p>\n</blockquote>\n\n<p>This is overly simplistic thinking; just getting rid of <code>synchronized(this)</code> won't solve the problem.  Proper synchronization for throughput will take more thought.</p></li>\n<li><blockquote>\n  <p>You are (unnecessarily) exposing too much information</p>\n</blockquote>\n\n<p>This is a variant of #1.  Use of <code>synchronized(this)</code> is part of your interface.  If you don't want/need this exposed, don't do it.</p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":22098,"reputation":1108,"user_id":54236,"display_name":"Harald Schilly"},"comment_count":0,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1468775313,"creation_date":1231931780,"answer_id":442622,"question_id":442564,"body_markdown":"It depends on the task you want to do, but I wouldn&#39;t use it. Also, check if the thread-save-ness you want to accompish couldn&#39;t be done by synchronize(this) in the first place? There are also some nice [locks in the API][1] that might help you :)\r\n\r\n\r\n  [1]:http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/package-summary.html","title":"Avoid synchronized(this) in Java?","body":"<p>It depends on the task you want to do, but I wouldn't use it. Also, check if the thread-save-ness you want to accompish couldn't be done by synchronize(this) in the first place? There are also some nice <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/package-summary.html\" rel=\"nofollow noreferrer\">locks in the API</a> that might help you :)</p>\n"},{"comments":[{"owner":{"account_id":6957,"reputation":74531,"user_id":11858,"accept_rate":93,"display_name":"daveb"},"score":0,"creation_date":1231932681,"post_id":442638,"comment_id":264429,"body_markdown":"This is very dangerous.  You&#39;ve now introduced a client-side (user&#39;s of this class) lock ordering requirement.  If two threads are calling method1() and method2() in a different order, they are likely to deadlock, but the user of this class has no idea that this is the case.","body":"This is very dangerous.  You&#39;ve now introduced a client-side (user&#39;s of this class) lock ordering requirement.  If two threads are calling method1() and method2() in a different order, they are likely to deadlock, but the user of this class has no idea that this is the case."},{"owner":{"account_id":14630,"reputation":16827,"user_id":30316,"accept_rate":82,"display_name":"eljenso"},"score":8,"creation_date":1231935788,"post_id":442638,"comment_id":264536,"body_markdown":"Granularity not provided by &quot;synchronized(this)&quot; is out of the scope of my question. And shouldn&#39;t your lock fields be final?","body":"Granularity not provided by &quot;synchronized(this)&quot; is out of the scope of my question. And shouldn&#39;t your lock fields be final?"},{"owner":{"account_id":4797,"reputation":1533,"user_id":7400,"display_name":"Andreas Bakurov"},"score":13,"creation_date":1231936435,"post_id":442638,"comment_id":264560,"body_markdown":"in order to have a deadlock we should perform a call from  block synchronized by A to the block synchronized by  B. daveb, you are wrong ...","body":"in order to have a deadlock we should perform a call from  block synchronized by A to the block synchronized by  B. daveb, you are wrong ..."},{"owner":{"account_id":11013,"reputation":12295,"user_id":21063,"accept_rate":47,"display_name":"Shawn Vader"},"score":4,"creation_date":1231942421,"post_id":442638,"comment_id":264826,"body_markdown":"There is no deadlock in this example as far as I can see. I accept it is just pseudocode  but I would use one of the implementations of java.util.concurrent.locks.Lock like java.util.concurrent.locks.ReentrantLock","body":"There is no deadlock in this example as far as I can see. I accept it is just pseudocode  but I would use one of the implementations of java.util.concurrent.locks.Lock like java.util.concurrent.locks.ReentrantLock"}],"tags":[],"owner":{"account_id":4797,"reputation":1533,"user_id":7400,"display_name":"Andreas Bakurov"},"comment_count":4,"down_vote_count":4,"up_vote_count":66,"is_accepted":false,"score":62,"last_activity_date":1562581283,"creation_date":1231932207,"answer_id":442638,"question_id":442564,"body_markdown":"While you are using synchronized(this) you are using the class instance as a lock itself. This means that while lock is acquired by *thread 1*, the *thread 2* should wait.\r\n\r\nSuppose the following code:\r\n\r\n  \r\n    public void method1() {\r\n        // do something ...\r\n        synchronized(this) {\r\n            a ++;      \r\n        }\r\n        // ................\r\n    }\r\n\r\n\r\n    public void method2() {\r\n        // do something ...\r\n        synchronized(this) {\r\n            b ++;      \r\n        }\r\n        // ................\r\n    }\r\n\r\nMethod 1 modifying the variable *a* and method 2 modifying the variable *b*, the concurrent modification of the same variable by two threads should be avoided and it is. BUT while *thread1* modifying *a* and *thread2* modifying *b* it can be performed without any race condition.\r\n\r\nUnfortunately, the above code will not allow this since we are using the same reference for a lock; This means that threads even if they are not in a race condition should wait and obviously the code sacrifices concurrency of the program.\r\n\r\nThe solution is to use *2* different locks for *two* different variables:\r\n\r\n\r\n    public class Test {\r\n    \t\r\n        private Object lockA = new Object();\r\n        private Object lockB = new Object();\r\n    \r\n        public void method1() {\r\n            // do something ...\r\n            synchronized(lockA) {\r\n                a ++;      \r\n            }\r\n            // ................\r\n        }\r\n    \r\n    \r\n        public void method2() {\r\n            // do something ...\r\n            synchronized(lockB) {\r\n                b ++;      \r\n            }\r\n            // ................\r\n        }\r\n    \t\r\n    }\r\n     \r\n\r\nThe above example uses more fine grained locks (2 locks instead one (*lockA*  and *lockB* for variables *a* and *b* respectively) and as a result allows better concurrency, on the other hand it became more complex than the first example ...","title":"Avoid synchronized(this) in Java?","body":"<p>While you are using synchronized(this) you are using the class instance as a lock itself. This means that while lock is acquired by <em>thread 1</em>, the <em>thread 2</em> should wait.</p>\n\n<p>Suppose the following code:</p>\n\n<pre><code>public void method1() {\n    // do something ...\n    synchronized(this) {\n        a ++;      \n    }\n    // ................\n}\n\n\npublic void method2() {\n    // do something ...\n    synchronized(this) {\n        b ++;      \n    }\n    // ................\n}\n</code></pre>\n\n<p>Method 1 modifying the variable <em>a</em> and method 2 modifying the variable <em>b</em>, the concurrent modification of the same variable by two threads should be avoided and it is. BUT while <em>thread1</em> modifying <em>a</em> and <em>thread2</em> modifying <em>b</em> it can be performed without any race condition.</p>\n\n<p>Unfortunately, the above code will not allow this since we are using the same reference for a lock; This means that threads even if they are not in a race condition should wait and obviously the code sacrifices concurrency of the program.</p>\n\n<p>The solution is to use <em>2</em> different locks for <em>two</em> different variables:</p>\n\n<pre><code>public class Test {\n\n    private Object lockA = new Object();\n    private Object lockB = new Object();\n\n    public void method1() {\n        // do something ...\n        synchronized(lockA) {\n            a ++;      \n        }\n        // ................\n    }\n\n\n    public void method2() {\n        // do something ...\n        synchronized(lockB) {\n            b ++;      \n        }\n        // ................\n    }\n\n}\n</code></pre>\n\n<p>The above example uses more fine grained locks (2 locks instead one (<em>lockA</em>  and <em>lockB</em> for variables <em>a</em> and <em>b</em> respectively) and as a result allows better concurrency, on the other hand it became more complex than the first example ...</p>\n"},{"comments":[{"owner":{"account_id":14630,"reputation":16827,"user_id":30316,"accept_rate":82,"display_name":"eljenso"},"score":0,"creation_date":1231937541,"post_id":442771,"comment_id":264602,"body_markdown":"it-depends-on-what-the-class-does: if it is an &#39;important&#39; object, then lock on private reference? Else instance locking will suffice?","body":"it-depends-on-what-the-class-does: if it is an &#39;important&#39; object, then lock on private reference? Else instance locking will suffice?"},{"owner":{"account_id":14630,"reputation":16827,"user_id":30316,"accept_rate":82,"display_name":"eljenso"},"score":7,"creation_date":1231938100,"post_id":442771,"comment_id":264624,"body_markdown":"Yes, the lock stealing scenario seems far fetched to me. Everyone mentions it, but who has actually done it or experienced it? If you &quot;accidentally&quot; lock an object you shouldn&#39;t, then there is a name for this type of situation: it&#39;s a bug. Fix it.","body":"Yes, the lock stealing scenario seems far fetched to me. Everyone mentions it, but who has actually done it or experienced it? If you &quot;accidentally&quot; lock an object you shouldn&#39;t, then there is a name for this type of situation: it&#39;s a bug. Fix it."},{"owner":{"account_id":14630,"reputation":16827,"user_id":30316,"accept_rate":82,"display_name":"eljenso"},"score":4,"creation_date":1231938252,"post_id":442771,"comment_id":264630,"body_markdown":"Also, locking on internal references is not free from the &quot;external synch attack&quot;: if you know that a certain synched part of the code waits for an external event to happen (e.g. file write, value in DB, timer event) you can probably arrange for it to block as well.","body":"Also, locking on internal references is not free from the &quot;external synch attack&quot;: if you know that a certain synched part of the code waits for an external event to happen (e.g. file write, value in DB, timer event) you can probably arrange for it to block as well."},{"owner":{"account_id":262115,"reputation":712,"user_id":546757,"accept_rate":40,"display_name":"Alan Cabrera"},"score":0,"creation_date":1565706642,"post_id":442771,"comment_id":101431523,"body_markdown":"Let me confess that I am one of those idiots, al beit I did it when I was young.  I thought the code was cleaner by not creating an explicit lock object and, instead, used another private final object that needed to participate in the monitor.  I did not know that the object itself did a synchronize on itself.  You can imagine the ensuing hijinx...","body":"Let me confess that I am one of those idiots, al beit I did it when I was young.  I thought the code was cleaner by not creating an explicit lock object and, instead, used another private final object that needed to participate in the monitor.  I did not know that the object itself did a synchronize on itself.  You can imagine the ensuing hijinx..."}],"tags":[],"owner":{"account_id":21831,"reputation":1232,"user_id":53369,"display_name":"Olivier"},"comment_count":4,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1231944150,"creation_date":1231936055,"answer_id":442771,"question_id":442564,"body_markdown":"While I agree about not adhering blindly to dogmatic rules, does the &quot;lock stealing&quot; scenario seem so eccentric to you? A thread could indeed acquire the lock on your object &quot;externally&quot;(`synchronized(theObject) {...}`), blocking other threads waiting on synchronized instance methods.\r\n\r\nIf you don&#39;t believe in malicious code, consider that this code could come from third parties (for instance if you develop some sort of application server).\r\n\r\nThe &quot;accidental&quot; version seems less likely, but as they say, &quot;make something idiot-proof and someone will invent a better idiot&quot;.\r\n\r\nSo I agree with the it-depends-on-what-the-class-does school of thought.\r\n\r\n----------\r\n**Edit following eljenso&#39;s first 3 comments:**\r\n\r\nI&#39;ve never experienced the lock stealing problem but here is an imaginary scenario:\r\n\r\nLet&#39;s say your system is a servlet container, and the object we&#39;re considering is the `ServletContext` implementation. Its `getAttribute` method must be thread-safe, as context attributes are shared data; so you declare it as `synchronized`. Let&#39;s also imagine that you provide a public hosting service based on your container implementation.\r\n\r\nI&#39;m your customer and deploy my &quot;good&quot; servlet on your site. It happens that my code contains a call to `getAttribute`.\r\n\r\nA hacker, disguised as another customer, deploys his malicious servlet on your site. It contains the following code in the `init` method:\r\n\r\n&lt;pre&gt;\r\nsynchronized (this.getServletConfig().getServletContext()) {\r\n   while (true) {}\r\n}\r\n&lt;/pre&gt;\r\n\r\nAssuming we share the same servlet context (allowed by the spec as long as the two servlets are on the same virtual host), my call on `getAttribute` is locked forever. The hacker has achieved a DoS on my servlet.\r\n\r\nThis attack is not possible if `getAttribute` is synchronized on a private lock, because 3rd-party code cannot acquire this lock.\r\n\r\nI admit that the example is contrived and an oversimplistic view of how a servlet container works, but IMHO it proves the point.\r\n\r\nSo I would make my design choice based on security consideration: will I have complete control over the code that has access to the instances? What would be the consequence of a thread&#39;s holding a lock on an instance indefinitely?","title":"Avoid synchronized(this) in Java?","body":"<p>While I agree about not adhering blindly to dogmatic rules, does the \"lock stealing\" scenario seem so eccentric to you? A thread could indeed acquire the lock on your object \"externally\"(<code>synchronized(theObject) {...}</code>), blocking other threads waiting on synchronized instance methods.</p>\n\n<p>If you don't believe in malicious code, consider that this code could come from third parties (for instance if you develop some sort of application server).</p>\n\n<p>The \"accidental\" version seems less likely, but as they say, \"make something idiot-proof and someone will invent a better idiot\".</p>\n\n<p>So I agree with the it-depends-on-what-the-class-does school of thought.</p>\n\n<hr>\n\n<p><strong>Edit following eljenso's first 3 comments:</strong></p>\n\n<p>I've never experienced the lock stealing problem but here is an imaginary scenario:</p>\n\n<p>Let's say your system is a servlet container, and the object we're considering is the <code>ServletContext</code> implementation. Its <code>getAttribute</code> method must be thread-safe, as context attributes are shared data; so you declare it as <code>synchronized</code>. Let's also imagine that you provide a public hosting service based on your container implementation.</p>\n\n<p>I'm your customer and deploy my \"good\" servlet on your site. It happens that my code contains a call to <code>getAttribute</code>.</p>\n\n<p>A hacker, disguised as another customer, deploys his malicious servlet on your site. It contains the following code in the <code>init</code> method:</p>\n\n<pre>\nsynchronized (this.getServletConfig().getServletContext()) {\n   while (true) {}\n}\n</pre>\n\n<p>Assuming we share the same servlet context (allowed by the spec as long as the two servlets are on the same virtual host), my call on <code>getAttribute</code> is locked forever. The hacker has achieved a DoS on my servlet.</p>\n\n<p>This attack is not possible if <code>getAttribute</code> is synchronized on a private lock, because 3rd-party code cannot acquire this lock.</p>\n\n<p>I admit that the example is contrived and an oversimplistic view of how a servlet container works, but IMHO it proves the point.</p>\n\n<p>So I would make my design choice based on security consideration: will I have complete control over the code that has access to the instances? What would be the consequence of a thread's holding a lock on an instance indefinitely?</p>\n"},{"comments":[{"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"score":3,"creation_date":1231958843,"post_id":442783,"comment_id":265692,"body_markdown":"Perhaps since C# is a younger language, they learned from bad patterns that were figured out in the Java camp and code stuff like this better?  Are there also less singletons?  :)","body":"Perhaps since C# is a younger language, they learned from bad patterns that were figured out in the Java camp and code stuff like this better?  Are there also less singletons?  :)"},{"owner":{"account_id":1387,"reputation":32183,"user_id":1853,"accept_rate":94,"display_name":"serg10"},"score":5,"creation_date":1232009183,"post_id":442783,"comment_id":267426,"body_markdown":"He he.  Quite possibly true, but I&#39;m not going to rise to the bait!  One think I can say for certain is that there are more capital letters in C# code ;)","body":"He he.  Quite possibly true, but I&#39;m not going to rise to the bait!  One think I can say for certain is that there are more capital letters in C# code ;)"},{"owner":{"account_id":15611,"reputation":14858,"user_id":33165,"accept_rate":80,"display_name":"tcurdt"},"score":1,"creation_date":1232013730,"post_id":442783,"comment_id":267584,"body_markdown":"Just not true (to put it nicely)","body":"Just not true (to put it nicely)"}],"tags":[],"owner":{"account_id":1387,"reputation":32183,"user_id":1853,"accept_rate":94,"display_name":"serg10"},"comment_count":3,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1231936980,"creation_date":1231936302,"answer_id":442783,"question_id":442564,"body_markdown":"**There seems a different consensus in the C# and Java camps on this.**  The majority of Java code I have seen uses:\r\n\r\n    // apply mutex to this instance\r\n    synchronized(this) {\r\n        // do work here\r\n    }\r\n\r\nwhereas the majority of C# code opts for the arguably safer:\r\n\r\n    // instance level lock object\r\n    private readonly object _syncObj = new object();\r\n\r\n    ...\r\n\r\n    // apply mutex to private instance level field (a System.Object usually)\r\n    lock(_syncObj)\r\n    {\r\n        // do work here\r\n    }\r\n\r\nThe C# idiom is certainly safer.  As mentioned previously, no malicious / accidental access to the lock can be made from outside the instance.  Java code has this risk too, **but it seems that the Java community has gravitated over time to the slightly less safe, but slightly more terse version.**  \r\n\r\nThat&#39;s not meant as a dig against Java, just a reflection of my experience working on both languages.","title":"Avoid synchronized(this) in Java?","body":"<p><strong>There seems a different consensus in the C# and Java camps on this.</strong>  The majority of Java code I have seen uses:</p>\n\n<pre><code>// apply mutex to this instance\nsynchronized(this) {\n    // do work here\n}\n</code></pre>\n\n<p>whereas the majority of C# code opts for the arguably safer:</p>\n\n<pre><code>// instance level lock object\nprivate readonly object _syncObj = new object();\n\n...\n\n// apply mutex to private instance level field (a System.Object usually)\nlock(_syncObj)\n{\n    // do work here\n}\n</code></pre>\n\n<p>The C# idiom is certainly safer.  As mentioned previously, no malicious / accidental access to the lock can be made from outside the instance.  Java code has this risk too, <strong>but it seems that the Java community has gravitated over time to the slightly less safe, but slightly more terse version.</strong>  </p>\n\n<p>That's not meant as a dig against Java, just a reflection of my experience working on both languages.</p>\n"},{"tags":[],"owner":{"account_id":3290,"reputation":19931,"user_id":4737,"accept_rate":52,"display_name":"jamesh"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1231943687,"creation_date":1231943687,"answer_id":443160,"question_id":442564,"body_markdown":"The `java.util.concurrent` package has vastly reduced the complexity of my thread safe code. I only have anecdotal evidence to go on, but most work I have seen with `synchronized(x)` appears to be re-implementing a Lock, Semaphore, or Latch, but using the lower-level monitors.\r\n\r\nWith this in mind, synchronizing using any of these mechanisms is analogous to synchronizing on an internal object, rather than leaking a lock. This is beneficial in that you have absolute certainty that you control the entry into the monitor by two or more threads.","title":"Avoid synchronized(this) in Java?","body":"<p>The <code>java.util.concurrent</code> package has vastly reduced the complexity of my thread safe code. I only have anecdotal evidence to go on, but most work I have seen with <code>synchronized(x)</code> appears to be re-implementing a Lock, Semaphore, or Latch, but using the lower-level monitors.</p>\n\n<p>With this in mind, synchronizing using any of these mechanisms is analogous to synchronizing on an internal object, rather than leaking a lock. This is beneficial in that you have absolute certainty that you control the entry into the monitor by two or more threads.</p>\n"},{"comments":[{"owner":{"account_id":14630,"reputation":16827,"user_id":30316,"accept_rate":82,"display_name":"eljenso"},"score":1,"creation_date":1231946288,"post_id":443260,"comment_id":265045,"body_markdown":"&quot;if this would be expected by the logic...&quot; is a point I am trying to get across as well. I don&#39;t see the point of *always* using private locks, although the general consensus seems to be that it is better, since it doesn&#39;t hurt and is more defensive.","body":"&quot;if this would be expected by the logic...&quot; is a point I am trying to get across as well. I don&#39;t see the point of <i>always</i> using private locks, although the general consensus seems to be that it is better, since it doesn&#39;t hurt and is more defensive."}],"tags":[],"owner":{"account_id":20470,"reputation":21695,"user_id":48933,"accept_rate":90,"display_name":"Neil Coffey"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1231945188,"creation_date":1231945188,"answer_id":443260,"question_id":442564,"body_markdown":"If you&#39;ve decided that:\r\n\r\n - the thing you need to do is lock on\r\n   the current object; and\r\n - you want to\r\n   lock it with granularity smaller than\r\n   a whole method;\r\n\r\nthen I don&#39;t see the a taboo over synchronizezd(this).\r\n\r\nSome people deliberately use synchronized(this) (instead of marking the method synchronized) inside the whole contents of a method because they think it&#39;s &quot;clearer to the reader&quot; which object is actually being synchronized on. So long as people are making an informed choice (e.g. understand that by doing so they&#39;re actually inserting extra bytecodes into the method and this could have a knock-on effect on potential optimisations), I don&#39;t particularly see a problem with this. You should always document the concurrent behaviour of your program, so I don&#39;t see the &quot;&#39;synchronized&#39; publishes the behaviour&quot; argument as being so compelling.\r\n\r\nAs to the question of which object&#39;s lock you should use, I think there&#39;s nothing wrong with synchronizing on the current object **if this would be expected by the logic of what you&#39;re doing and how your class would typically be used**. For example, with a collection, the object that you would logically expect to lock is generally the collection itself.","title":"Avoid synchronized(this) in Java?","body":"<p>If you've decided that:</p>\n\n<ul>\n<li>the thing you need to do is lock on\nthe current object; and</li>\n<li>you want to\nlock it with granularity smaller than\na whole method;</li>\n</ul>\n\n<p>then I don't see the a taboo over synchronizezd(this).</p>\n\n<p>Some people deliberately use synchronized(this) (instead of marking the method synchronized) inside the whole contents of a method because they think it's \"clearer to the reader\" which object is actually being synchronized on. So long as people are making an informed choice (e.g. understand that by doing so they're actually inserting extra bytecodes into the method and this could have a knock-on effect on potential optimisations), I don't particularly see a problem with this. You should always document the concurrent behaviour of your program, so I don't see the \"'synchronized' publishes the behaviour\" argument as being so compelling.</p>\n\n<p>As to the question of which object's lock you should use, I think there's nothing wrong with synchronizing on the current object <strong>if this would be expected by the logic of what you're doing and how your class would typically be used</strong>. For example, with a collection, the object that you would logically expect to lock is generally the collection itself.</p>\n"},{"comments":[{"owner":{"account_id":7052,"reputation":48090,"user_id":12048,"accept_rate":94,"display_name":"finnw"},"score":0,"creation_date":1279025143,"post_id":3237204,"comment_id":3342547,"body_markdown":"Any object could be used as the lock here.  It does not need to be `this`.  It could be a private field.","body":"Any object could be used as the lock here.  It does not need to be <code>this</code>.  It could be a private field."},{"owner":{"account_id":166371,"reputation":422,"user_id":390442,"display_name":"Bart Prokop"},"score":0,"creation_date":1279025666,"post_id":3237204,"comment_id":3342635,"body_markdown":"Correct, but the purpose of this example was to show how do proper synchronizing, if we decided to use method synchronization.","body":"Correct, but the purpose of this example was to show how do proper synchronizing, if we decided to use method synchronization."}],"tags":[],"owner":{"account_id":166371,"reputation":422,"user_id":390442,"display_name":"Bart Prokop"},"comment_count":2,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1279027167,"creation_date":1279024734,"answer_id":3237204,"question_id":442564,"body_markdown":"A good example for use synchronized(this).\r\n\r\n    // add listener\r\n    public final synchronized void addListener(IListener l) {listeners.add(l);}\r\n    // remove listener\r\n    public final synchronized void removeListener(IListener l) {listeners.remove(l);}\r\n    // routine that raise events\r\n    public void run() {\r\n       // some code here...\r\n       Set ls;\r\n       synchronized(this) {\r\n          ls = listeners.clone();\r\n       }\r\n       for (IListener l : ls) { l.processEvent(event); }\r\n       // some code here...\r\n    }\r\n\r\nAs you can see here, we use synchronize on this to easy cooperate of lengthly (possibly infinite loop of run method) with some synchronized methods there.\r\n\r\nOf course it can be very easily rewritten with using synchronized on private field. But sometimes, when we already have some design with synchronized methods (i.e. legacy class, we derive from, synchronized(this) can be the only solution).","title":"Avoid synchronized(this) in Java?","body":"<p>A good example for use synchronized(this).</p>\n\n<pre><code>// add listener\npublic final synchronized void addListener(IListener l) {listeners.add(l);}\n// remove listener\npublic final synchronized void removeListener(IListener l) {listeners.remove(l);}\n// routine that raise events\npublic void run() {\n   // some code here...\n   Set ls;\n   synchronized(this) {\n      ls = listeners.clone();\n   }\n   for (IListener l : ls) { l.processEvent(event); }\n   // some code here...\n}\n</code></pre>\n\n<p>As you can see here, we use synchronize on this to easy cooperate of lengthly (possibly infinite loop of run method) with some synchronized methods there.</p>\n\n<p>Of course it can be very easily rewritten with using synchronized on private field. But sometimes, when we already have some design with synchronized methods (i.e. legacy class, we derive from, synchronized(this) can be the only solution).</p>\n"},{"comments":[{"owner":{"account_id":14630,"reputation":16827,"user_id":30316,"accept_rate":82,"display_name":"eljenso"},"score":2,"creation_date":1376048988,"post_id":14973568,"comment_id":26576559,"body_markdown":"The only way in to get a deadlock in this example is when `BadObject` A invokes `longOperation` on B, passing A&#39;s `myListener`, and vice versa. Not impossible, but quite convoluted, supporting my earlier points.","body":"The only way in to get a deadlock in this example is when <code>BadObject</code> A invokes <code>longOperation</code> on B, passing A&#39;s <code>myListener</code>, and vice versa. Not impossible, but quite convoluted, supporting my earlier points."}],"tags":[],"owner":{"account_id":558770,"reputation":16438,"user_id":755804,"accept_rate":20,"display_name":"18446744073709551615"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1361341612,"creation_date":1361341612,"answer_id":14973568,"question_id":442564,"body_markdown":"The reason not to synchronize on _this_ is that sometimes you need more than one lock (the second lock often gets removed after some additional thinking, but you still need it in the intermediate state). If you lock on _this_, you always have to remember which one of the two locks is _this_; if you lock on a private Object, the variable name tells you that.\r\n\r\nFrom the reader&#39;s viewpoint, if you see locking on _this_, you always have to answer the two questions: \r\n\r\n 1. what kind of access is protected by _this_?\r\n 2. is one lock really enough, didn&#39;t someone introduce a bug?\r\n\r\nAn example:\r\n\r\n    class BadObject {\r\n        private Something mStuff;\r\n        synchronized setStuff(Something stuff) {\r\n            mStuff = stuff;\r\n        }\r\n        synchronized getStuff(Something stuff) {\r\n            return mStuff;\r\n        }\r\n        private MyListener myListener = new MyListener() {\r\n            public void onMyEvent(...) {\r\n                setStuff(...);\r\n            }\r\n        }\r\n        synchronized void longOperation(MyListener l) {\r\n            ...\r\n            l.onMyEvent(...);\r\n            ...\r\n        }\r\n    }\r\n\r\nIf two threads begin `longOperation()` on two different instances of `BadObject`, they acquire \r\ntheir locks; when it&#39;s time to invoke `l.onMyEvent(...)`, we have a deadlock because neither of the threads may acquire the other object&#39;s lock.\r\n\r\nIn this example we may eliminate the deadlock by using two locks, one for short operations and one for long ones.","title":"Avoid synchronized(this) in Java?","body":"<p>The reason not to synchronize on <em>this</em> is that sometimes you need more than one lock (the second lock often gets removed after some additional thinking, but you still need it in the intermediate state). If you lock on <em>this</em>, you always have to remember which one of the two locks is <em>this</em>; if you lock on a private Object, the variable name tells you that.</p>\n\n<p>From the reader's viewpoint, if you see locking on <em>this</em>, you always have to answer the two questions: </p>\n\n<ol>\n<li>what kind of access is protected by <em>this</em>?</li>\n<li>is one lock really enough, didn't someone introduce a bug?</li>\n</ol>\n\n<p>An example:</p>\n\n<pre><code>class BadObject {\n    private Something mStuff;\n    synchronized setStuff(Something stuff) {\n        mStuff = stuff;\n    }\n    synchronized getStuff(Something stuff) {\n        return mStuff;\n    }\n    private MyListener myListener = new MyListener() {\n        public void onMyEvent(...) {\n            setStuff(...);\n        }\n    }\n    synchronized void longOperation(MyListener l) {\n        ...\n        l.onMyEvent(...);\n        ...\n    }\n}\n</code></pre>\n\n<p>If two threads begin <code>longOperation()</code> on two different instances of <code>BadObject</code>, they acquire \ntheir locks; when it's time to invoke <code>l.onMyEvent(...)</code>, we have a deadlock because neither of the threads may acquire the other object's lock.</p>\n\n<p>In this example we may eliminate the deadlock by using two locks, one for short operations and one for long ones.</p>\n"},{"tags":[],"owner":{"account_id":2461264,"reputation":350,"user_id":2145397,"display_name":"Roman"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1394728540,"creation_date":1373964632,"answer_id":17672039,"question_id":442564,"body_markdown":"As already said here synchronized block can use user-defined variable as lock object, when synchronized function uses only &quot;this&quot;. And of course you can manipulate with areas of your function which should be synchronized and so on.\r\n\r\nBut everyone says that no difference between synchronized function and block which covers whole function using &quot;this&quot; as lock object. That is not true, difference is in byte code which will be generated in both situations. In case of synchronized block usage should be allocated local variable which holds reference to &quot;this&quot;. And as result we will have a little bit larger size of function (not relevant if you have only few number of functions).\r\n\r\nMore detailed explanation of the difference you can find here:\r\nhttp://www.artima.com/insidejvm/ed2/threadsynchP.html\r\n\r\nAlso usage of synchronized block is not good due to following point of view:\r\n\r\n&gt; The synchronized keyword is very limited in one area: when exiting a synchronized block, all threads that are waiting for that lock must be unblocked, but only one of those threads gets to take the lock; all the others see that the lock is taken and go back to the blocked state. That&#39;s not just a lot of wasted processing cycles: often the context switch to unblock a thread also involves paging memory off the disk, and that&#39;s very, very, expensive.\r\n\r\nFor more details in this area I would recommend you read this article:\r\nhttp://java.dzone.com/articles/synchronized-considered","title":"Avoid synchronized(this) in Java?","body":"<p>As already said here synchronized block can use user-defined variable as lock object, when synchronized function uses only \"this\". And of course you can manipulate with areas of your function which should be synchronized and so on.</p>\n\n<p>But everyone says that no difference between synchronized function and block which covers whole function using \"this\" as lock object. That is not true, difference is in byte code which will be generated in both situations. In case of synchronized block usage should be allocated local variable which holds reference to \"this\". And as result we will have a little bit larger size of function (not relevant if you have only few number of functions).</p>\n\n<p>More detailed explanation of the difference you can find here:\n<a href=\"http://www.artima.com/insidejvm/ed2/threadsynchP.html\" rel=\"nofollow\">http://www.artima.com/insidejvm/ed2/threadsynchP.html</a></p>\n\n<p>Also usage of synchronized block is not good due to following point of view:</p>\n\n<blockquote>\n  <p>The synchronized keyword is very limited in one area: when exiting a synchronized block, all threads that are waiting for that lock must be unblocked, but only one of those threads gets to take the lock; all the others see that the lock is taken and go back to the blocked state. That's not just a lot of wasted processing cycles: often the context switch to unblock a thread also involves paging memory off the disk, and that's very, very, expensive.</p>\n</blockquote>\n\n<p>For more details in this area I would recommend you read this article:\n<a href=\"http://java.dzone.com/articles/synchronized-considered\" rel=\"nofollow\">http://java.dzone.com/articles/synchronized-considered</a></p>\n"},{"tags":[],"owner":{"account_id":1903805,"reputation":41397,"user_id":1719067,"accept_rate":73,"display_name":"Narendra Pathai"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1384933422,"creation_date":1384933422,"answer_id":20090123,"question_id":442564,"body_markdown":"A lock is used for either *visibility* or for protecting some data from *concurrent modification* which may lead to race.\r\n\r\nWhen you need to just make primitive type operations to be atomic there are available options like `AtomicInteger` and the likes.\r\n\r\nBut suppose you have two integers which are related to each other like `x` and `y` co-ordinates, which are related to each other and should be changed in an atomic manner. Then you would protect them using a same lock.\r\n\r\nA lock should only protect the state that is related to each other. No less and no more. If you use `synchronized(this)` in each method then even if the state of the class is unrelated all the threads will face contention even if updating unrelated state.\r\n\r\n    class Point{\r\n       private int x;\r\n       private int y;\r\n    \r\n       public Point(int x, int y){\r\n           this.x = x;\r\n           this.y = y;\r\n       }\r\n    \r\n       //mutating methods should be guarded by same lock\r\n       public synchronized void changeCoordinates(int x, int y){\r\n           this.x = x;\r\n           this.y = y;\r\n       }\r\n    }\r\n\r\nIn the above example I have only one method which mutates both `x` and `y` and not two different methods as `x` and `y` are related and if I had given two different methods for mutating `x` and `y` separately then it would not have been thread safe. \r\n\r\nThis example is just to demonstrate and not necessarily the way it should be implemented. The best way to do it would be to make it ***IMMUTABLE***.\r\n\r\nNow in opposition to `Point` example, there is an example of `TwoCounters` already provided by @Andreas where the state which is being protected by two different locks as the state is unrelated to each other.\r\n\r\nThe process of using different locks to protect unrelated states is called *Lock Striping or Lock Splitting*\r\n \r\n\r\n\r\n\r\n ","title":"Avoid synchronized(this) in Java?","body":"<p>A lock is used for either <em>visibility</em> or for protecting some data from <em>concurrent modification</em> which may lead to race.</p>\n\n<p>When you need to just make primitive type operations to be atomic there are available options like <code>AtomicInteger</code> and the likes.</p>\n\n<p>But suppose you have two integers which are related to each other like <code>x</code> and <code>y</code> co-ordinates, which are related to each other and should be changed in an atomic manner. Then you would protect them using a same lock.</p>\n\n<p>A lock should only protect the state that is related to each other. No less and no more. If you use <code>synchronized(this)</code> in each method then even if the state of the class is unrelated all the threads will face contention even if updating unrelated state.</p>\n\n<pre><code>class Point{\n   private int x;\n   private int y;\n\n   public Point(int x, int y){\n       this.x = x;\n       this.y = y;\n   }\n\n   //mutating methods should be guarded by same lock\n   public synchronized void changeCoordinates(int x, int y){\n       this.x = x;\n       this.y = y;\n   }\n}\n</code></pre>\n\n<p>In the above example I have only one method which mutates both <code>x</code> and <code>y</code> and not two different methods as <code>x</code> and <code>y</code> are related and if I had given two different methods for mutating <code>x</code> and <code>y</code> separately then it would not have been thread safe. </p>\n\n<p>This example is just to demonstrate and not necessarily the way it should be implemented. The best way to do it would be to make it <strong><em>IMMUTABLE</em></strong>.</p>\n\n<p>Now in opposition to <code>Point</code> example, there is an example of <code>TwoCounters</code> already provided by @Andreas where the state which is being protected by two different locks as the state is unrelated to each other.</p>\n\n<p>The process of using different locks to protect unrelated states is called <em>Lock Striping or Lock Splitting</em></p>\n"},{"tags":[],"owner":{"account_id":5277096,"reputation":41,"user_id":4213548,"display_name":"Sandesh Sadhale"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1415093076,"creation_date":1415092267,"answer_id":26731309,"question_id":442564,"body_markdown":"I think there is a good explanation on why each of these are vital techniques under your belt in a book called Java Concurrency In Practice by Brian Goetz. He makes one point very clear - you must use the same lock &quot;EVERYWHERE&quot; to protect the state of your object. Synchronised method and synchronising on an object often go hand in hand. E.g. Vector synchronises all its methods. If you have a handle to a vector object and are going to do &quot;put if absent&quot; then merely Vector synchronising its own individual methods isn&#39;t going to protect you from corruption of state. You need to synchronise using synchronised (vectorHandle). This will result in the SAME lock being acquired by every thread which has a handle to the vector and will protect overall state of the vector. This is called client side locking. We do know as a matter of fact vector does synchronised (this) / synchronises all its methods and hence synchronising on the object vectorHandle will result in proper synchronisation of vector objects state. Its foolish to believe that you are thread safe just because you are using a thread safe collection. This is precisely the reason ConcurrentHashMap explicitly introduced putIfAbsent method - to make such operations atomic.\r\n\r\nIn summary\r\n\r\n1. Synchronising at method level allows client side locking.\r\n2. If you have a private lock object - it makes client side locking impossible. This is fine if you know that your class doesn&#39;t have &quot;put if absent&quot; type of functionality.\r\n3. If you are designing a library - then synchronising on this or synchronising the method is often wiser. Because you are rarely in a position to decide how your class is going to be used.\r\n4. Had Vector used a private lock object - it would have been impossible to get &quot;put if absent&quot; right. The client code will never gain a handle to the private lock thus breaking the fundamental rule of using the EXACT SAME LOCK to protect its state.\r\n5. Synchronising on this or synchronised methods do have a problem as others have pointed out - someone could get a lock and never release it. All other threads would keep waiting for the lock to be released.\r\n6. So know what you are doing and adopt the one that&#39;s correct.\r\n7. Someone argued that having a private lock object gives you better granularity - e.g. if two operations are unrelated - they could be guarded by different locks resulting in better throughput. But this i think is design smell and not code smell - if two operations are completely unrelated why are they part of the SAME class? Why should a class club unrelated functionalities at all? May be a utility class? Hmmmm - some util providing string manipulation and calendar date formatting through the same instance?? ... doesn&#39;t make any sense to me at least!!","title":"Avoid synchronized(this) in Java?","body":"<p>I think there is a good explanation on why each of these are vital techniques under your belt in a book called Java Concurrency In Practice by Brian Goetz. He makes one point very clear - you must use the same lock \"EVERYWHERE\" to protect the state of your object. Synchronised method and synchronising on an object often go hand in hand. E.g. Vector synchronises all its methods. If you have a handle to a vector object and are going to do \"put if absent\" then merely Vector synchronising its own individual methods isn't going to protect you from corruption of state. You need to synchronise using synchronised (vectorHandle). This will result in the SAME lock being acquired by every thread which has a handle to the vector and will protect overall state of the vector. This is called client side locking. We do know as a matter of fact vector does synchronised (this) / synchronises all its methods and hence synchronising on the object vectorHandle will result in proper synchronisation of vector objects state. Its foolish to believe that you are thread safe just because you are using a thread safe collection. This is precisely the reason ConcurrentHashMap explicitly introduced putIfAbsent method - to make such operations atomic.</p>\n\n<p>In summary</p>\n\n<ol>\n<li>Synchronising at method level allows client side locking.</li>\n<li>If you have a private lock object - it makes client side locking impossible. This is fine if you know that your class doesn't have \"put if absent\" type of functionality.</li>\n<li>If you are designing a library - then synchronising on this or synchronising the method is often wiser. Because you are rarely in a position to decide how your class is going to be used.</li>\n<li>Had Vector used a private lock object - it would have been impossible to get \"put if absent\" right. The client code will never gain a handle to the private lock thus breaking the fundamental rule of using the EXACT SAME LOCK to protect its state.</li>\n<li>Synchronising on this or synchronised methods do have a problem as others have pointed out - someone could get a lock and never release it. All other threads would keep waiting for the lock to be released.</li>\n<li>So know what you are doing and adopt the one that's correct.</li>\n<li>Someone argued that having a private lock object gives you better granularity - e.g. if two operations are unrelated - they could be guarded by different locks resulting in better throughput. But this i think is design smell and not code smell - if two operations are completely unrelated why are they part of the SAME class? Why should a class club unrelated functionalities at all? May be a utility class? Hmmmm - some util providing string manipulation and calendar date formatting through the same instance?? ... doesn't make any sense to me at least!!</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":5981137,"reputation":17327,"user_id":4700156,"accept_rate":64,"display_name":"Rohit Singh"},"comment_count":0,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1538674417,"creation_date":1473614809,"answer_id":39438754,"question_id":442564,"body_markdown":"It depends on the situation.   \r\nIf There is only one sharing entity or more than one.   \r\n\r\n**See full working example** [here][1]            \r\n\r\n\r\nA small introduction.  \r\n \r\n**Threads and shareable entities**        \r\nIt is possible for multiple threads to access same entity, for eg multiple connectionThreads sharing a single messageQueue. Since the threads run concurrently there may be a chance of overriding one&#39;s data by another which may be a messed up situation.   \r\nSo we need some way to ensure that shareable entity is accessed only by one thread at a time. (CONCURRENCY).  \r\n\r\n**Synchronized block**       \r\nsynchronized() block is a way to ensure concurrent access of shareable entity.  \r\nFirst, a small analogy      \r\nSuppose There are two-person P1, P2 (threads) a Washbasin (shareable entity) inside a washroom and there is a door (lock).      \r\nNow we want one person to use washbasin at a time.      \r\nAn approach is to lock the door by P1 when the door is locked P2 waits until p1 completes his work     \r\nP1 unlocks the door      \r\nthen only p1 can use washbasin.   \r\n\r\nsyntax.    \r\n\r\n    synchronized(this)\r\n    {\r\n      SHARED_ENTITY.....\r\n    }\r\n&quot;this&quot; provided the intrinsic lock associated with the class (Java developer designed Object class in such a way that each object can work as monitor).\r\nAbove approach works fine when there are only one shared entity and multiple threads (1: N).  \r\n  [![enter image description here][2]][2]\r\n**N shareable entities-M threads**      \r\nNow think of a situation when there is two washbasin inside a washroom and only one door. If we are using the previous approach, only p1 can use one washbasin at a time while p2 will wait outside. It is wastage of resource as no one is using B2 (washbasin).         \r\nA wiser approach would be to create a smaller room inside washroom and provide them one door per washbasin. In this way, P1 can access B1 and P2 can access B2 and vice-versa.  \r\n\r\n    washbasin1;  \r\n    washbasin2;\r\n    \r\n    Object lock1=new Object();\r\n    Object lock2=new Object();\r\n     \r\n      synchronized(lock1)\r\n      {\r\n        washbasin1;\r\n      }\r\n\r\n      synchronized(lock2)\r\n      {\r\n        washbasin2;\r\n      }\r\n\r\n[![enter image description here][3]][3]             \r\n[![enter image description here][4]][4]\r\n\r\n**See more on Threads**----&gt; [here][5]\r\n\r\n\r\n  [1]: https://github.com/rohitksingh/Multi-Threading\r\n  [2]: http://i.stack.imgur.com/jrbvI.png\r\n  [3]: http://i.stack.imgur.com/jqavZ.png\r\n  [4]: http://i.stack.imgur.com/Xeydw.png\r\n  [5]: https://github.com/rohitksingh/Multi-Threading/wiki","title":"Avoid synchronized(this) in Java?","body":"<p>It depends on the situation.<br>\nIf There is only one sharing entity or more than one.   </p>\n\n<p><strong>See full working example</strong> <a href=\"https://github.com/rohitksingh/Multi-Threading\" rel=\"noreferrer\">here</a>            </p>\n\n<p>A small introduction.  </p>\n\n<p><strong>Threads and shareable entities</strong><br>\nIt is possible for multiple threads to access same entity, for eg multiple connectionThreads sharing a single messageQueue. Since the threads run concurrently there may be a chance of overriding one's data by another which may be a messed up situation.<br>\nSo we need some way to ensure that shareable entity is accessed only by one thread at a time. (CONCURRENCY).  </p>\n\n<p><strong>Synchronized block</strong><br>\nsynchronized() block is a way to ensure concurrent access of shareable entity.<br>\nFirst, a small analogy<br>\nSuppose There are two-person P1, P2 (threads) a Washbasin (shareable entity) inside a washroom and there is a door (lock).<br>\nNow we want one person to use washbasin at a time.<br>\nAn approach is to lock the door by P1 when the door is locked P2 waits until p1 completes his work<br>\nP1 unlocks the door<br>\nthen only p1 can use washbasin.   </p>\n\n<p>syntax.    </p>\n\n<pre><code>synchronized(this)\n{\n  SHARED_ENTITY.....\n}\n</code></pre>\n\n<p>\"this\" provided the intrinsic lock associated with the class (Java developer designed Object class in such a way that each object can work as monitor).\nAbove approach works fine when there are only one shared entity and multiple threads (1: N).<br>\n  <a href=\"https://i.stack.imgur.com/jrbvI.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/jrbvI.png\" alt=\"enter image description here\"></a>\n<strong>N shareable entities-M threads</strong><br>\nNow think of a situation when there is two washbasin inside a washroom and only one door. If we are using the previous approach, only p1 can use one washbasin at a time while p2 will wait outside. It is wastage of resource as no one is using B2 (washbasin).<br>\nA wiser approach would be to create a smaller room inside washroom and provide them one door per washbasin. In this way, P1 can access B1 and P2 can access B2 and vice-versa.  </p>\n\n<pre><code>washbasin1;  \nwashbasin2;\n\nObject lock1=new Object();\nObject lock2=new Object();\n\n  synchronized(lock1)\n  {\n    washbasin1;\n  }\n\n  synchronized(lock2)\n  {\n    washbasin2;\n  }\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/jqavZ.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/jqavZ.png\" alt=\"enter image description here\"></a><br>\n<a href=\"https://i.stack.imgur.com/Xeydw.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Xeydw.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>See more on Threads</strong>----> <a href=\"https://github.com/rohitksingh/Multi-Threading/wiki\" rel=\"noreferrer\">here</a></p>\n"},{"tags":[],"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1540802281,"creation_date":1540802281,"answer_id":53041597,"question_id":442564,"body_markdown":"This is really just supplementary to the other answers, but if your main objection to using private objects for locking is that it clutters your class with fields that are not related to the business logic then Project Lombok has [`@Synchronized`](https://projectlombok.org/features/Synchronized) to generate the boilerplate at compile-time:\r\n\r\n    @Synchronized\r\n    public int foo() {\r\n        return 0;\r\n    }\r\n\r\ncompiles to\r\n\r\n    private final Object $lock = new Object[0];\r\n\r\n    public int foo() {\r\n        synchronized($lock) {\r\n            return 0;\r\n        }\r\n    }\r\n ","title":"Avoid synchronized(this) in Java?","body":"<p>This is really just supplementary to the other answers, but if your main objection to using private objects for locking is that it clutters your class with fields that are not related to the business logic then Project Lombok has <a href=\"https://projectlombok.org/features/Synchronized\" rel=\"nofollow noreferrer\"><code>@Synchronized</code></a> to generate the boilerplate at compile-time:</p>\n\n<pre><code>@Synchronized\npublic int foo() {\n    return 0;\n}\n</code></pre>\n\n<p>compiles to</p>\n\n<pre><code>private final Object $lock = new Object[0];\n\npublic int foo() {\n    synchronized($lock) {\n        return 0;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11554857,"reputation":21,"user_id":8466347,"display_name":"Kolarč&#237;k V&#225;clav"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694420956,"creation_date":1542532626,"answer_id":53359380,"question_id":442564,"body_markdown":"I want to mention possible solution for atomic parts of source code. You can use a Hashmap with locks that use class names and line numbers.\r\n\r\n\t// Synchronization objects (locks)\r\n\tprivate static HashMap&lt;String, Object&gt; locks = new HashMap&lt;String, Object&gt;();\r\n    // Simple method\r\n\tprivate static Object atomic() {\r\n\t\tStackTraceElement [] stack = Thread.currentThread().getStackTrace(); // get execution point \r\n\t\tStackTraceElement exepoint = stack[2];\r\n        // creates unique key from class name and line number using execution point\r\n\t\tString key = String.format(&quot;%s#%d&quot;, exepoint.getClassName(), exepoint.getLineNumber()); \r\n\t\tObject lock = locks.get(key); // use old or create new lock\r\n\t\tif (lock == null) {\r\n\t\t\tlock = new Object();\r\n\t\t\tlocks.put(key, lock);\r\n\t\t}\r\n\t\treturn lock; // return reference to lock\r\n\t}\r\n    // Synchronized code\r\n    void dosomething1() {\r\n        // start commands\r\n\t\tsynchronized (atomic()) {\r\n            // atomic commands 1\r\n            ...\r\n        }\r\n        // other command\r\n    }\r\n    // Synchronized code\r\n    void dosomething2() {\r\n        // start commands\r\n\t\tsynchronized (atomic()) {\r\n            // atomic commands 2\r\n            ...\r\n        }\r\n        // other command\r\n    }","title":"Avoid synchronized(this) in Java?","body":"<p>I want to mention possible solution for atomic parts of source code. You can use a Hashmap with locks that use class names and line numbers.</p>\n<pre><code>// Synchronization objects (locks)\nprivate static HashMap&lt;String, Object&gt; locks = new HashMap&lt;String, Object&gt;();\n// Simple method\nprivate static Object atomic() {\n    StackTraceElement [] stack = Thread.currentThread().getStackTrace(); // get execution point \n    StackTraceElement exepoint = stack[2];\n    // creates unique key from class name and line number using execution point\n    String key = String.format(&quot;%s#%d&quot;, exepoint.getClassName(), exepoint.getLineNumber()); \n    Object lock = locks.get(key); // use old or create new lock\n    if (lock == null) {\n        lock = new Object();\n        locks.put(key, lock);\n    }\n    return lock; // return reference to lock\n}\n// Synchronized code\nvoid dosomething1() {\n    // start commands\n    synchronized (atomic()) {\n        // atomic commands 1\n        ...\n    }\n    // other command\n}\n// Synchronized code\nvoid dosomething2() {\n    // start commands\n    synchronized (atomic()) {\n        // atomic commands 2\n        ...\n    }\n    // other command\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9421037,"reputation":530,"user_id":9851598,"display_name":"surendrapanday"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1551140403,"creation_date":1551140403,"answer_id":54876721,"question_id":442564,"body_markdown":"Avoid using `synchronized(this)` as a locking mechanism: This locks the whole class instance and can cause deadlocks. In such cases, refactor the code to lock only a specific method or variable, that way whole class doesn&#39;t get locked. `Synchronised` can be used inside method level.   \r\nInstead of using `synchronized(this)`, below code shows how you could just lock a method.  \r\n     \r\n\r\n       public void foo() {\r\n    if(operation = null) {\r\n        synchronized(foo) { \r\n    if (operation == null) {\r\n     // enter your code that this method has to handle...\r\n              }\r\n            }\r\n          }\r\n        }","title":"Avoid synchronized(this) in Java?","body":"<p>Avoid using <code>synchronized(this)</code> as a locking mechanism: This locks the whole class instance and can cause deadlocks. In such cases, refactor the code to lock only a specific method or variable, that way whole class doesn't get locked. <code>Synchronised</code> can be used inside method level.<br>\nInstead of using <code>synchronized(this)</code>, below code shows how you could just lock a method.  </p>\n\n<pre><code>   public void foo() {\nif(operation = null) {\n    synchronized(foo) { \nif (operation == null) {\n // enter your code that this method has to handle...\n          }\n        }\n      }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1597307,"reputation":2656,"user_id":1479080,"display_name":"Amit Mittal"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1563345152,"creation_date":1563344491,"answer_id":57069640,"question_id":442564,"body_markdown":"My two cents in 2019 even though this question could have been settled already.\r\n\r\nLocking on &#39;this&#39; is not bad if you know what you are doing but behind the scene locking on &#39;this&#39; is (which unfortunately what synchronized keyword in method definition allows).\r\n\r\nIf you actually want users of your class to be able to &#39;steal&#39; your lock (i.e. prevent other threads from dealing with it), you actually want all the synchronized methods to wait while another sync method is running and so on. \r\nIt should be intentional and well thought off (and hence documented to help your users understand it).\r\n\r\nTo further elaborate, in the reverse you must know what you are &#39;gaining&#39; (or &#39;losing&#39; out on) if you lock on a non accessible lock (nobody can &#39;steal&#39; your lock, you are in total control and so on...). \r\n\r\nThe problem for me is that synchronized keyword in the method definition signature makes it just too easy for programmers **not to think** about what to lock on which is a mighty important thing to think about if you don&#39;t want to run into problems in a multi-threaded program.\r\n\r\nOne can&#39;t argue that &#39;typically&#39; you don&#39;t want users of your class to be able to do these stuff or that &#39;typically&#39; you want...It depends on what functionality you are coding. You can&#39;t make a thumb rule as you can&#39;t predict all the use cases.\r\n\r\nConsider for e.g. the printwriter which uses an internal lock but then people struggle to use it from multiple threads if they don&#39;t want their output to interleave.\r\n\r\nShould your lock be accessible outside of the class or not is your decision as a programmer on the basis of what functionality the class has. It is part of the api. You can&#39;t move away for instance from synchronized(this) to synchronized(provateObjet) without risking breaking changes in the code using it.\r\n\r\nNote 1: I know you can achieve whatever synchronized(this) &#39;achieves&#39; by using a explicit lock object and exposing it but I think it is unnecessary if your behaviour is well documented and you actually know what locking on &#39;this&#39; means.\r\n\r\nNote 2: I don&#39;t concur with the argument that if some code is accidentally stealing your lock its a bug and you have to solve it. This in a way is same argument as saying I can make all my methods public even if they are not meant to be public. If someone is &#39;accidentally&#39; calling my intended to be private method its a bug. Why enable this accident in the first place!!! If ability to steal your lock is a problem for your class don&#39;t allow it. As simple as that.","title":"Avoid synchronized(this) in Java?","body":"<p>My two cents in 2019 even though this question could have been settled already.</p>\n\n<p>Locking on 'this' is not bad if you know what you are doing but behind the scene locking on 'this' is (which unfortunately what synchronized keyword in method definition allows).</p>\n\n<p>If you actually want users of your class to be able to 'steal' your lock (i.e. prevent other threads from dealing with it), you actually want all the synchronized methods to wait while another sync method is running and so on. \nIt should be intentional and well thought off (and hence documented to help your users understand it).</p>\n\n<p>To further elaborate, in the reverse you must know what you are 'gaining' (or 'losing' out on) if you lock on a non accessible lock (nobody can 'steal' your lock, you are in total control and so on...). </p>\n\n<p>The problem for me is that synchronized keyword in the method definition signature makes it just too easy for programmers <strong>not to think</strong> about what to lock on which is a mighty important thing to think about if you don't want to run into problems in a multi-threaded program.</p>\n\n<p>One can't argue that 'typically' you don't want users of your class to be able to do these stuff or that 'typically' you want...It depends on what functionality you are coding. You can't make a thumb rule as you can't predict all the use cases.</p>\n\n<p>Consider for e.g. the printwriter which uses an internal lock but then people struggle to use it from multiple threads if they don't want their output to interleave.</p>\n\n<p>Should your lock be accessible outside of the class or not is your decision as a programmer on the basis of what functionality the class has. It is part of the api. You can't move away for instance from synchronized(this) to synchronized(provateObjet) without risking breaking changes in the code using it.</p>\n\n<p>Note 1: I know you can achieve whatever synchronized(this) 'achieves' by using a explicit lock object and exposing it but I think it is unnecessary if your behaviour is well documented and you actually know what locking on 'this' means.</p>\n\n<p>Note 2: I don't concur with the argument that if some code is accidentally stealing your lock its a bug and you have to solve it. This in a way is same argument as saying I can make all my methods public even if they are not meant to be public. If someone is 'accidentally' calling my intended to be private method its a bug. Why enable this accident in the first place!!! If ability to steal your lock is a problem for your class don't allow it. As simple as that.</p>\n"},{"tags":[],"owner":{"account_id":218063,"reputation":3190,"user_id":474197,"accept_rate":46,"display_name":"HKTonyLee"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1652769633,"creation_date":1623094806,"answer_id":67877778,"question_id":442564,"body_markdown":"Let me put the conclusion first - locking on private fields does not work for slightly more complicated multi-threaded program. This is because multi-threading is a global problem. It is impossible to localize synchronization unless you write in a very defensive way (e.g. copy everything on passing to other threads).\r\n\r\n---\r\n\r\nHere is the long explanation:\r\n\r\nSynchronization includes 3 parts: Atomicity, Visibility and Ordering\r\n\r\nSynchronized block is very coarse level of synchronization. It enforces visibility and ordering just as what you expected. But for atomicity, it does not provide much protection. Atomicity requires global knowledge of the program rather than local knowledge. (And that makes multi-threading programming very hard)\r\n\r\nLet&#39;s say we have a class `Account` having method `deposit` and `withdraw`. They are both synchronized based on a private lock like this:\r\n\r\n```\r\nclass Account {\r\n    private Object lock = new Object();\r\n\r\n    void withdraw(int amount) {\r\n        synchronized(lock) {\r\n            // ...\r\n        }\r\n    }\r\n\r\n    void deposit(int amount) {\r\n        synchronized(lock) {\r\n            // ...\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nConsidering we need to implement a higher-level class which handles transfer, like this:\r\n\r\n```\r\nclass AccountManager {\r\n    void transfer(Account fromAcc, Account toAcc, int amount) {\r\n        if (fromAcc.getBalance() &gt; amount) {\r\n            fromAcc.setBalance(fromAcc.getBalance() - amount);\r\n            toAcc.setBalance(toAcc.getBalance + amount);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAssuming we have 2 accounts now,\r\n\r\n```\r\nAccount john;\r\nAccount marry;\r\n```\r\n\r\nIf the `Account.deposit()` and `Account.withdraw()` are locked with internal lock only. That will cause problem when we have 2 threads working:\r\n\r\n```\r\n// Some thread\r\nvoid threadA() {\r\n    john.withdraw(500);\r\n}\r\n\r\n// Another thread\r\nvoid threadB() {\r\n    accountManager.transfer(john, marry, 100);\r\n}\r\n```\r\n\r\nBecause it is possible for both `threadA` and `threadB` run at the same time. And thread B finishes the conditional check, thread A withdraws, and thread B withdraws again. This means we can withdraw $100 from John even if his account has no enough money. This will break atomicity.\r\n\r\nYou may propose that: why not adding `withdraw()` and `deposit()` to `AccountManager` then? But under this proposal, we need to create a multi-thread safe `Map` which maps from different accounts to their locks. We need to delete the lock after execution (otherwise will leak memory). And we also need to ensure no other one accesses the `Account.withdraw()` directly. This will introduce a lots of subtle bugs.\r\n\r\nThe correct and most idiomatic way is to expose the lock in the `Account`. And let the `AccountManager` to use the lock. But in this case, why not just use the object itself then?\r\n\r\n```\r\nclass Account {\r\n    synchronized void withdraw(int amount) {\r\n        // ...\r\n    }\r\n\r\n    synchronized void deposit(int amount) {\r\n        // ...\r\n    }\r\n}\r\n\r\nclass AccountManager {\r\n    void transfer(Account fromAcc, Account toAcc, int amount) {\r\n        // Ensure locking order to prevent deadlock\r\n        Account firstLock = fromAcc.hashCode() &lt; toAcc.hashCode() ? fromAcc : toAcc;\r\n        Account secondLock = fromAcc.hashCode() &lt; toAcc.hashCode() ? toAcc : fromAcc;\r\n\r\n        synchronized(firstLock) {\r\n            synchronized(secondLock) {\r\n                if (fromAcc.getBalance() &gt; amount) {\r\n                    fromAcc.setBalance(fromAcc.getBalance() - amount);\r\n                    toAcc.setBalance(toAcc.getBalance + amount);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nTo conclude in simple English, private lock does not work for slightly more complicated multi-threaded program.\r\n\r\n\r\n(Reposted from https://stackoverflow.com/a/67877650/474197)\r\n","title":"Avoid synchronized(this) in Java?","body":"<p>Let me put the conclusion first - locking on private fields does not work for slightly more complicated multi-threaded program. This is because multi-threading is a global problem. It is impossible to localize synchronization unless you write in a very defensive way (e.g. copy everything on passing to other threads).</p>\n<hr />\n<p>Here is the long explanation:</p>\n<p>Synchronization includes 3 parts: Atomicity, Visibility and Ordering</p>\n<p>Synchronized block is very coarse level of synchronization. It enforces visibility and ordering just as what you expected. But for atomicity, it does not provide much protection. Atomicity requires global knowledge of the program rather than local knowledge. (And that makes multi-threading programming very hard)</p>\n<p>Let's say we have a class <code>Account</code> having method <code>deposit</code> and <code>withdraw</code>. They are both synchronized based on a private lock like this:</p>\n<pre><code>class Account {\n    private Object lock = new Object();\n\n    void withdraw(int amount) {\n        synchronized(lock) {\n            // ...\n        }\n    }\n\n    void deposit(int amount) {\n        synchronized(lock) {\n            // ...\n        }\n    }\n}\n</code></pre>\n<p>Considering we need to implement a higher-level class which handles transfer, like this:</p>\n<pre><code>class AccountManager {\n    void transfer(Account fromAcc, Account toAcc, int amount) {\n        if (fromAcc.getBalance() &gt; amount) {\n            fromAcc.setBalance(fromAcc.getBalance() - amount);\n            toAcc.setBalance(toAcc.getBalance + amount);\n        }\n    }\n}\n</code></pre>\n<p>Assuming we have 2 accounts now,</p>\n<pre><code>Account john;\nAccount marry;\n</code></pre>\n<p>If the <code>Account.deposit()</code> and <code>Account.withdraw()</code> are locked with internal lock only. That will cause problem when we have 2 threads working:</p>\n<pre><code>// Some thread\nvoid threadA() {\n    john.withdraw(500);\n}\n\n// Another thread\nvoid threadB() {\n    accountManager.transfer(john, marry, 100);\n}\n</code></pre>\n<p>Because it is possible for both <code>threadA</code> and <code>threadB</code> run at the same time. And thread B finishes the conditional check, thread A withdraws, and thread B withdraws again. This means we can withdraw $100 from John even if his account has no enough money. This will break atomicity.</p>\n<p>You may propose that: why not adding <code>withdraw()</code> and <code>deposit()</code> to <code>AccountManager</code> then? But under this proposal, we need to create a multi-thread safe <code>Map</code> which maps from different accounts to their locks. We need to delete the lock after execution (otherwise will leak memory). And we also need to ensure no other one accesses the <code>Account.withdraw()</code> directly. This will introduce a lots of subtle bugs.</p>\n<p>The correct and most idiomatic way is to expose the lock in the <code>Account</code>. And let the <code>AccountManager</code> to use the lock. But in this case, why not just use the object itself then?</p>\n<pre><code>class Account {\n    synchronized void withdraw(int amount) {\n        // ...\n    }\n\n    synchronized void deposit(int amount) {\n        // ...\n    }\n}\n\nclass AccountManager {\n    void transfer(Account fromAcc, Account toAcc, int amount) {\n        // Ensure locking order to prevent deadlock\n        Account firstLock = fromAcc.hashCode() &lt; toAcc.hashCode() ? fromAcc : toAcc;\n        Account secondLock = fromAcc.hashCode() &lt; toAcc.hashCode() ? toAcc : fromAcc;\n\n        synchronized(firstLock) {\n            synchronized(secondLock) {\n                if (fromAcc.getBalance() &gt; amount) {\n                    fromAcc.setBalance(fromAcc.getBalance() - amount);\n                    toAcc.setBalance(toAcc.getBalance + amount);\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<p>To conclude in simple English, private lock does not work for slightly more complicated multi-threaded program.</p>\n<p>(Reposted from <a href=\"https://stackoverflow.com/a/67877650/474197\">https://stackoverflow.com/a/67877650/474197</a>)</p>\n"},{"tags":[],"owner":{"account_id":9376049,"reputation":3355,"user_id":7643517,"display_name":"Nolequen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695799735,"creation_date":1695799735,"answer_id":77185409,"question_id":442564,"body_markdown":"To add to what has been mentioned earlier, with the release of Java 21, which introduced Project Loom and Virtual Threads, it&#39;s advisable to avoid `synchronized` blocks.\r\n\r\nThis is because [JEP 444][1] and [JEP 425][2] tell us the following:\r\n\r\n    There are two scenarios in which a virtual thread cannot be unmounted during blocking operations because it is pinned to its carrier:\r\n      When it executes code inside a synchronized block or method, or\r\n      When it executes a native method or a foreign function.\r\n\r\nThus, a virtual thread does not release the operating system thread while working with a `synchronized` method or block.\r\n\r\n\r\n  [1]: https://openjdk.org/jeps/444\r\n  [2]: https://openjdk.org/jeps/425","title":"Avoid synchronized(this) in Java?","body":"<p>To add to what has been mentioned earlier, with the release of Java 21, which introduced Project Loom and Virtual Threads, it's advisable to avoid <code>synchronized</code> blocks.</p>\n<p>This is because <a href=\"https://openjdk.org/jeps/444\" rel=\"nofollow noreferrer\">JEP 444</a> and <a href=\"https://openjdk.org/jeps/425\" rel=\"nofollow noreferrer\">JEP 425</a> tell us the following:</p>\n<pre><code>There are two scenarios in which a virtual thread cannot be unmounted during blocking operations because it is pinned to its carrier:\n  When it executes code inside a synchronized block or method, or\n  When it executes a native method or a foreign function.\n</code></pre>\n<p>Thus, a virtual thread does not release the operating system thread while working with a <code>synchronized</code> method or block.</p>\n"}],"owner":{"account_id":14630,"reputation":16827,"user_id":30316,"accept_rate":82,"display_name":"eljenso"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":157383,"favorite_count":0,"down_vote_count":0,"up_vote_count":408,"accepted_answer_id":442601,"answer_count":23,"score":408,"last_activity_date":1695799735,"creation_date":1231929474,"question_id":442564,"body_markdown":"Whenever a question pops up on SO about Java synchronization, some people are very eager to point out that `synchronized(this)` should be avoided. Instead, they claim, a lock on a private reference is to be preferred.\r\n\r\nSome of the given reasons are:\r\n\r\n - [some *evil code* may steal your lock][1] (very popular this one, also has an &quot;accidentally&quot; variant)\r\n - [all synchronized methods within the same class use the exact same lock, which reduces throughput][2]\r\n - [you are (unnecessarily) exposing too much information][3]\r\n\r\nOther people, including me, argue that `synchronized(this)` is an idiom that is used a lot (also in Java libraries), is safe and well understood. It should not be avoided because you have a bug and you don&#39;t have a clue of what is going on in your multithreaded program. In other words: if it is applicable, then use it.\r\n\r\nI am interested in seeing some real-world examples (no foobar stuff) where avoiding a lock on `this` is preferable when `synchronized(this)` would also do the job.\r\n\r\nTherefore: **should you always avoid `synchronized(this)` and replace it with a lock on a private reference?**  \r\n\r\n---\r\n\r\nSome further info (updated as answers are given):\r\n\r\n - we are talking about instance synchronization\r\n - both implicit (`synchronized` methods) and explicit form of `synchronized(this)` are considered\r\n - if you quote Bloch or other authorities on the subject, don&#39;t leave out the parts you don&#39;t like (e.g. Effective Java, item on Thread Safety: *Typically it is the lock on the instance itself, but there are exceptions.)*\r\n - if you need granularity in your locking other than `synchronized(this)` provides, then `synchronized(this)` is not applicable so that&#39;s not the issue\r\n\r\n  [1]: https://stackoverflow.com/questions/416183/in-java-critical-sections-what-should-i-synchronize-on#416198\r\n  [2]: https://stackoverflow.com/questions/309631/what-cases-require-synchronized-method-access-in-java#309677\r\n  [3]: https://stackoverflow.com/questions/439302/allowing-a-method-to-lock-its-parent-object-in-java#439317","title":"Avoid synchronized(this) in Java?","body":"<p>Whenever a question pops up on SO about Java synchronization, some people are very eager to point out that <code>synchronized(this)</code> should be avoided. Instead, they claim, a lock on a private reference is to be preferred.</p>\n\n<p>Some of the given reasons are:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/416183/in-java-critical-sections-what-should-i-synchronize-on#416198\">some <em>evil code</em> may steal your lock</a> (very popular this one, also has an \"accidentally\" variant)</li>\n<li><a href=\"https://stackoverflow.com/questions/309631/what-cases-require-synchronized-method-access-in-java#309677\">all synchronized methods within the same class use the exact same lock, which reduces throughput</a></li>\n<li><a href=\"https://stackoverflow.com/questions/439302/allowing-a-method-to-lock-its-parent-object-in-java#439317\">you are (unnecessarily) exposing too much information</a></li>\n</ul>\n\n<p>Other people, including me, argue that <code>synchronized(this)</code> is an idiom that is used a lot (also in Java libraries), is safe and well understood. It should not be avoided because you have a bug and you don't have a clue of what is going on in your multithreaded program. In other words: if it is applicable, then use it.</p>\n\n<p>I am interested in seeing some real-world examples (no foobar stuff) where avoiding a lock on <code>this</code> is preferable when <code>synchronized(this)</code> would also do the job.</p>\n\n<p>Therefore: <strong>should you always avoid <code>synchronized(this)</code> and replace it with a lock on a private reference?</strong>  </p>\n\n<hr>\n\n<p>Some further info (updated as answers are given):</p>\n\n<ul>\n<li>we are talking about instance synchronization</li>\n<li>both implicit (<code>synchronized</code> methods) and explicit form of <code>synchronized(this)</code> are considered</li>\n<li>if you quote Bloch or other authorities on the subject, don't leave out the parts you don't like (e.g. Effective Java, item on Thread Safety: <em>Typically it is the lock on the instance itself, but there are exceptions.)</em></li>\n<li>if you need granularity in your locking other than <code>synchronized(this)</code> provides, then <code>synchronized(this)</code> is not applicable so that's not the issue</li>\n</ul>\n"},{"tags":["java","jms","activemq","spring-jms"],"comments":[{"owner":{"account_id":11434008,"reputation":30715,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1695751564,"post_id":77179751,"comment_id":136065475,"body_markdown":"Based on the stack-trace it looks like you&#39;re using the HTTP transport. Is that correct? If so, is there a particular reason you&#39;re using it? Could you use the normal TCP transport instead? It looks like your use of the HTTP transport is tied directly to the problem(s) you&#39;re experiencing.","body":"Based on the stack-trace it looks like you&#39;re using the HTTP transport. Is that correct? If so, is there a particular reason you&#39;re using it? Could you use the normal TCP transport instead? It looks like your use of the HTTP transport is tied directly to the problem(s) you&#39;re experiencing."},{"owner":{"account_id":157630,"reputation":17688,"user_id":375722,"display_name":"Tim Bish"},"score":0,"creation_date":1695759412,"post_id":77179751,"comment_id":136066805,"body_markdown":"Posting the connection URI you are using is usually a helpful addition.","body":"Posting the connection URI you are using is usually a helpful addition."},{"owner":{"account_id":10883371,"reputation":57,"user_id":8001604,"accept_rate":0,"display_name":"Prabhjot Sokhi"},"score":0,"creation_date":1695790766,"post_id":77179751,"comment_id":136069755,"body_markdown":"@JustinBertram we have 2 separate applications and there is a firewall in between, due to security reasons, we have to use HTTPS.","body":"@JustinBertram we have 2 separate applications and there is a firewall in between, due to security reasons, we have to use HTTPS."},{"owner":{"account_id":10883371,"reputation":57,"user_id":8001604,"accept_rate":0,"display_name":"Prabhjot Sokhi"},"score":0,"creation_date":1695790933,"post_id":77179751,"comment_id":136069772,"body_markdown":"@TimBish connection URI is as below activeMQ.brokerurl=https://dummy.dns.name.com:443/destination-name?useInactivityMonitor=false","body":"@TimBish connection URI is as below activeMQ.brokerurl=<a href=\"https://dummy.dns.name.com:443/destination-name?useInactivityMonitor=false\" rel=\"nofollow noreferrer\">dummy.dns.name.com:443/&hellip;</a>"},{"owner":{"account_id":11434008,"reputation":30715,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1695827961,"post_id":77179751,"comment_id":136076827,"body_markdown":"This looks like a bug in the HTTP transport so if you have no choice but to use it then I would recommend trying to upgrade since ActiveMQ 5.15.12 is over 3 years old now. That said, the HTTP transport isn&#39;t commonly used so an upgrade may not resolve the issue. You might also consider migrating to [ActiveMQ Artemis](https://activemq.apache.org/components/artemis/) (i.e. the next-generation broker from ActiveMQ) which also [supports HTTP](https://activemq.apache.org/components/artemis/documentation/latest/configuring-transports.html#configuring-netty-http).","body":"This looks like a bug in the HTTP transport so if you have no choice but to use it then I would recommend trying to upgrade since ActiveMQ 5.15.12 is over 3 years old now. That said, the HTTP transport isn&#39;t commonly used so an upgrade may not resolve the issue. You might also consider migrating to <a href=\"https://activemq.apache.org/components/artemis/\" rel=\"nofollow noreferrer\">ActiveMQ Artemis</a> (i.e. the next-generation broker from ActiveMQ) which also <a href=\"https://activemq.apache.org/components/artemis/documentation/latest/configuring-transports.html#configuring-netty-http\" rel=\"nofollow noreferrer\">supports HTTP</a>."},{"owner":{"account_id":10883371,"reputation":57,"user_id":8001604,"accept_rate":0,"display_name":"Prabhjot Sokhi"},"score":0,"creation_date":1695996320,"post_id":77179751,"comment_id":136101271,"body_markdown":"@JustinBertram is there any other option or workaround, as ActiveMQ is common between many services so an upgrade is not feasible as of now. Can you give more details or reason of this issue.","body":"@JustinBertram is there any other option or workaround, as ActiveMQ is common between many services so an upgrade is not feasible as of now. Can you give more details or reason of this issue."}],"owner":{"account_id":10883371,"reputation":57,"user_id":8001604,"accept_rate":0,"display_name":"Prabhjot Sokhi"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695799732,"creation_date":1695728991,"question_id":77179751,"body_markdown":"The application uses pooled JMS connection. On startup the application is working fine, but after a couple of days it is not able to send messages to ActiveMQ &quot;Classic.&quot; As soon as the application is restarted it connects again and works fine for the next couple of days.\r\n\r\nBelow is the error message:\r\nThe initial error is:\r\n```\r\n2023-09-18 00:03:15,051 ERROR c.n.v.r.i.l.BulkMessageStorageQueueListener [pool-7-thread-1] Exception in sending messages, rollbacking messages with size: 78\r\norg.springframework.jms.IllegalStateException: com.thoughtworks.xstream.InitializationException: Could not instantiate mapper : com.thoughtworks.xstream.mapper.EnumMapper; nested exception is javax.jms.IllegalStateException: com.thoughtworks.xstream.InitializationException: Could not instantiate mapper : com.thoughtworks.xstream.mapper.EnumMapper\r\n\tat org.springframework.jms.support.JmsUtils.convertJmsAccessException(JmsUtils.java:274) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.jms.support.JmsAccessor.convertJmsAccessException(JmsAccessor.java:185) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:507) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.jms.core.JmsTemplate.send(JmsTemplate.java:584) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.jms.core.JmsTemplate.convertAndSend(JmsTemplate.java:691) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat com.project.xxx.BulkMessageSender.sendStatusMessage(BulkMessageSender.java:71) ~[classes/:04.17.02.35]\r\n\tat com.project.xxx.BulkMessageStorageQueueListener.lambda$setupConsumer$0(BulkMessageStorageQueueListener.java:113) ~[classes/:04.17.02.35]\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[?:?]\r\n\tat java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) ~[?:1.8.0_222]\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) ~[?:?]\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) ~[?:?]\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_222]\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:?]\r\n\tat java.lang.Thread.run(Thread.java:748) ~[?:1.8.0_222]\r\nCaused by: javax.jms.IllegalStateException: com.thoughtworks.xstream.InitializationException: Could not instantiate mapper : com.thoughtworks.xstream.mapper.EnumMapper\r\n\tat org.apache.activemq.jms.pool.ConnectionPool.createSession(ConnectionPool.java:162) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.PooledConnection.createSession(PooledConnection.java:167) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.springframework.jms.support.JmsAccessor.createSession(JmsAccessor.java:208) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:495) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\t... 11 more\r\nCaused by: com.thoughtworks.xstream.InitializationException: Could not instantiate mapper : com.thoughtworks.xstream.mapper.EnumMapper\r\n\tat com.thoughtworks.xstream.XStream.buildMapperDynamically(XStream.java:646) ~[xstream-1.4.11.1.jar:1.4.11.1]\r\n\tat com.thoughtworks.xstream.XStream.buildMapper(XStream.java:616) ~[xstream-1.4.11.1.jar:1.4.11.1]\r\n\tat com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:587) ~[xstream-1.4.11.1.jar:1.4.11.1]\r\n\tat com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:515) ~[xstream-1.4.11.1.jar:1.4.11.1]\r\n\tat com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:484) ~[xstream-1.4.11.1.jar:1.4.11.1]\r\n\tat com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:430) ~[xstream-1.4.11.1.jar:1.4.11.1]\r\n\tat com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:369) ~[xstream-1.4.11.1.jar:1.4.11.1]\r\n\tat org.apache.activemq.transport.stomp.XStreamSupport.createXStream(XStreamSupport.java:31) ~[activemq-stomp-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.xstream.XStreamWireFormat.createXStream(XStreamWireFormat.java:127) ~[activemq-http-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.xstream.XStreamWireFormat.getXStream(XStreamWireFormat.java:113) ~[activemq-http-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.xstream.XStreamWireFormat.marshalText(XStreamWireFormat.java:89) ~[activemq-http-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.http.HttpClientTransport.oneway(HttpClientTransport.java:106) ~[activemq-http-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:68) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.ResponseCorrelator.asyncRequest(ResponseCorrelator.java:81) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.ResponseCorrelator.request(ResponseCorrelator.java:86) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1392) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.ActiveMQConnection.ensureConnectionInfoSent(ActiveMQConnection.java:1486) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.ActiveMQConnection.createSession(ActiveMQConnection.java:329) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.ConnectionPool.makeSession(ConnectionPool.java:112) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.ConnectionPool$1.makeObject(ConnectionPool.java:82) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.ConnectionPool$1.makeObject(ConnectionPool.java:78) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.commons.pool2.impl.GenericKeyedObjectPool.create(GenericKeyedObjectPool.java:1041) ~[commons-pool2-2.7.0.jar:2.7.0]\r\n\tat org.apache.commons.pool2.impl.GenericKeyedObjectPool.borrowObject(GenericKeyedObjectPool.java:342) ~[commons-pool2-2.7.0.jar:2.7.0]\r\n\tat org.apache.commons.pool2.impl.GenericKeyedObjectPool.borrowObject(GenericKeyedObjectPool.java:265) ~[commons-pool2-2.7.0.jar:2.7.0]\r\n\tat org.apache.activemq.jms.pool.ConnectionPool.createSession(ConnectionPool.java:144) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.PooledConnection.createSession(PooledConnection.java:167) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.springframework.jms.support.JmsAccessor.createSession(JmsAccessor.java:208) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:495) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\t... 11 more\r\nCaused by: java.lang.ClassNotFoundException: com.thoughtworks.xstream.mapper.EnumMapper\r\n\tat com.thoughtworks.xstream.core.util.CompositeClassLoader.loadClass(CompositeClassLoader.java:148) ~[xstream-1.4.11.1.jar:1.4.11.1]\r\n\tat java.lang.Class.forName0(Native Method) ~[?:1.8.0_222]\r\n\tat java.lang.Class.forName(Class.java:348) ~[?:1.8.0_222]\r\n\tat com.thoughtworks.xstream.XStream.buildMapperDynamically(XStream.java:642) ~[xstream-1.4.11.1.jar:1.4.11.1]\r\n\tat com.thoughtworks.xstream.XStream.buildMapper(XStream.java:616) ~[xstream-1.4.11.1.jar:1.4.11.1]\r\n\tat com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:587) ~[xstream-1.4.11.1.jar:1.4.11.1]\r\n\tat com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:515) ~[xstream-1.4.11.1.jar:1.4.11.1]\r\n\tat com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:484) ~[xstream-1.4.11.1.jar:1.4.11.1]\r\n\tat com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:430) ~[xstream-1.4.11.1.jar:1.4.11.1]\r\n\tat com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:369) ~[xstream-1.4.11.1.jar:1.4.11.1]\r\n\tat org.apache.activemq.transport.stomp.XStreamSupport.createXStream(XStreamSupport.java:31) ~[activemq-stomp-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.xstream.XStreamWireFormat.createXStream(XStreamWireFormat.java:127) ~[activemq-http-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.xstream.XStreamWireFormat.getXStream(XStreamWireFormat.java:113) ~[activemq-http-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.xstream.XStreamWireFormat.marshalText(XStreamWireFormat.java:89) ~[activemq-http-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.http.HttpClientTransport.oneway(HttpClientTransport.java:106) ~[activemq-http-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:68) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.ResponseCorrelator.asyncRequest(ResponseCorrelator.java:81) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.ResponseCorrelator.request(ResponseCorrelator.java:86) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1392) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.ActiveMQConnection.ensureConnectionInfoSent(ActiveMQConnection.java:1486) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.ActiveMQConnection.createSession(ActiveMQConnection.java:329) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.ConnectionPool.makeSession(ConnectionPool.java:112) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.ConnectionPool$1.makeObject(ConnectionPool.java:82) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.ConnectionPool$1.makeObject(ConnectionPool.java:78) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.commons.pool2.impl.GenericKeyedObjectPool.create(GenericKeyedObjectPool.java:1041) ~[commons-pool2-2.7.0.jar:2.7.0]\r\n\tat org.apache.commons.pool2.impl.GenericKeyedObjectPool.borrowObject(GenericKeyedObjectPool.java:342) ~[commons-pool2-2.7.0.jar:2.7.0]\r\n\tat org.apache.commons.pool2.impl.GenericKeyedObjectPool.borrowObject(GenericKeyedObjectPool.java:265) ~[commons-pool2-2.7.0.jar:2.7.0]\r\n\tat org.apache.activemq.jms.pool.ConnectionPool.createSession(ConnectionPool.java:144) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.PooledConnection.createSession(PooledConnection.java:167) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.springframework.jms.support.JmsAccessor.createSession(JmsAccessor.java:208) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:495) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\t... 11 more\r\n```\r\n\r\nAfter the below error is coming continuously until the application has not restarted.\r\n\r\n```\r\n2023-09-18 00:03:16,363 ERROR c.n.v.r.i.l.BulkMessageStorageQueueListener [pool-7-thread-1] Exception in sending messages, rollbacking messages with size: 94\r\norg.springframework.jms.UncategorizedJmsException: Uncategorized exception occurred during JMS processing; nested exception is javax.jms.JMSException: Error while attempting to add new Connection to the pool; nested exception is javax.jms.JMSException: Could not connect to broker URL: https://hostName:443/destination-name?useInactivityMonitor=false. Reason: java.lang.IllegalStateException: Illegal access: this web application instance has been stopped already. Could not load [org/apache/http/client/version.properties]. The following stack trace is thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access.\r\n\tat org.springframework.jms.support.JmsUtils.convertJmsAccessException(JmsUtils.java:311) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.jms.support.JmsAccessor.convertJmsAccessException(JmsAccessor.java:185) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:507) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.jms.core.JmsTemplate.send(JmsTemplate.java:584) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.jms.core.JmsTemplate.convertAndSend(JmsTemplate.java:691) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat com.project.xxx.BulkMessageSender.sendStatusMessage(BulkMessageSender.java:71) ~[classes/:04.17.02.35]\r\n\tat com.project.xxx.BulkMessageStorageQueueListener.lambda$setupConsumer$0(BulkMessageStorageQueueListener.java:113) ~[classes/:04.17.02.35]\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[?:?]\r\n\tat java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) ~[?:1.8.0_222]\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) ~[?:?]\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) ~[?:?]\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_222]\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:?]\r\n\tat java.lang.Thread.run(Thread.java:748) ~[?:1.8.0_222]\r\nCaused by: javax.jms.JMSException: Error while attempting to add new Connection to the pool\r\n\tat org.apache.activemq.jms.pool.PooledConnectionFactory.createJmsException(PooledConnectionFactory.java:279) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:230) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:209) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.springframework.jms.support.JmsAccessor.createConnection(JmsAccessor.java:196) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:494) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\t... 11 more\r\nCaused by: javax.jms.JMSException: Could not connect to broker URL: https://hostName:443/destination-name?useInactivityMonitor=false. Reason: java.lang.IllegalStateException: Illegal access: this web application instance has been stopped already. Could not load [org/apache/http/client/version.properties]. The following stack trace is thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access.\r\n\tat org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:36) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:374) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:304) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.ActiveMQConnectionFactory.createConnection(ActiveMQConnectionFactory.java:244) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:288) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.PooledConnectionFactory$1.makeObject(PooledConnectionFactory.java:97) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.PooledConnectionFactory$1.makeObject(PooledConnectionFactory.java:94) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.commons.pool2.impl.GenericKeyedObjectPool.create(GenericKeyedObjectPool.java:1041) ~[commons-pool2-2.7.0.jar:2.7.0]\r\n\tat org.apache.commons.pool2.impl.GenericKeyedObjectPool.addObject(GenericKeyedObjectPool.java:1238) ~[commons-pool2-2.7.0.jar:2.7.0]\r\n\tat org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:226) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:209) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.springframework.jms.support.JmsAccessor.createConnection(JmsAccessor.java:196) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:494) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\t... 11 more\r\nCaused by: java.lang.IllegalStateException: Illegal access: this web application instance has been stopped already. Could not load [org/apache/http/client/version.properties]. The following stack trace is thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access.\r\n\tat org.apache.catalina.loader.WebappClassLoaderBase.checkStateForResourceLoading(WebappClassLoaderBase.java:1427) ~[?:?]\r\n\tat org.apache.catalina.loader.WebappClassLoaderBase.getResourceAsStream(WebappClassLoaderBase.java:1135) ~[?:?]\r\n\tat org.apache.http.util.VersionInfo.loadVersionInfo(VersionInfo.java:233) ~[httpcore-4.4.13.jar:4.4.13]\r\n\tat org.apache.http.util.VersionInfo.getUserAgent(VersionInfo.java:319) ~[httpcore-4.4.13.jar:4.4.13]\r\n\tat org.apache.http.impl.client.HttpClientBuilder.build(HttpClientBuilder.java:1057) ~[httpclient-4.5.12.jar:4.5.12]\r\n\tat org.apache.activemq.transport.http.HttpClientTransport.createHttpClient(HttpClientTransport.java:347) ~[activemq-http-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.http.HttpClientTransport.getReceiveHttpClient(HttpClientTransport.java:233) ~[activemq-http-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.http.HttpClientTransport.doStart(HttpClientTransport.java:250) ~[activemq-http-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.util.ServiceSupport.start(ServiceSupport.java:55) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.TransportFilter.start(TransportFilter.java:64) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.TransportFilter.start(TransportFilter.java:64) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:354) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:304) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.ActiveMQConnectionFactory.createConnection(ActiveMQConnectionFactory.java:244) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:288) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.PooledConnectionFactory$1.makeObject(PooledConnectionFactory.java:97) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.PooledConnectionFactory$1.makeObject(PooledConnectionFactory.java:94) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.commons.pool2.impl.GenericKeyedObjectPool.create(GenericKeyedObjectPool.java:1041) ~[commons-pool2-2.7.0.jar:2.7.0]\r\n\tat org.apache.commons.pool2.impl.GenericKeyedObjectPool.addObject(GenericKeyedObjectPool.java:1238) ~[commons-pool2-2.7.0.jar:2.7.0]\r\n\tat org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:226) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:209) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.springframework.jms.support.JmsAccessor.createConnection(JmsAccessor.java:196) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:494) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\t... 11 more\r\n```\r\n\r\nBelow is code for configuring the client application:\r\n```java\r\npublic class ActiveMQConfig {\r\n\r\n\tprivate static final Logger logger = LoggerFactory.getLogger(ActiveMQConfig.class);\r\n\r\n\t// Active Mq properties\r\n\r\n\t@Value(&quot;${activeMQ.broker.url}&quot;)\r\n\tprivate String brokerUrl;\r\n\r\n\t@Value(&quot;${jms.listener.concurrency}&quot;)\r\n\tprivate String concurrency;\r\n\t\r\n\t// The duration between attempts to redliver a message\r\n\t@Value(&quot;${jms.rollback.redelivery.delay:10000}&quot;)\r\n\tprivate int redeliveryDelay;\r\n\r\n\t// Maximum number of times a redlivery of a message will be attempted -1 is infinite\r\n\t@Value(&quot;${jms.rollback.maximum.redeliveries:-1}&quot;)\r\n\tprivate String maximumRedelivery;\r\n\r\n\t@Value(&quot;${message.activeMQ.pool.max.connections:10}&quot;)\r\n\tprivate int activeMqPoolMaxConnections;\r\n\r\n\t@Bean\r\n\tpublic JmsListenerContainerFactory jmsListenerContainerFactory(\r\n\t\t\t@Qualifier(&quot;jmsConnectionFactoryActiveMQ&quot;) ConnectionFactory connectionFactory,\r\n\t\t\tDefaultJmsListenerContainerFactoryConfigurer configurer) {\r\n\t\tDefaultJmsListenerContainerFactory factory = new DefaultJmsListenerContainerFactory();\r\n\t\tfactory.setConcurrency(concurrency);\r\n\t\tfactory.setSessionTransacted(true);\r\n\t\tfactory.setAutoStartup(false);\r\n\t\tfactory.setErrorHandler(errorHandler -&gt; logger.error(&quot;An error has occurred in the transaction: {}&quot;,\r\n\t\t\t\terrorHandler.getMessage()));\r\n\t\tconfigurer.configure(factory, connectionFactory);\r\n\t\treturn factory;\r\n\t}\r\n\r\n\t@Bean\r\n\t@Primary\r\n\tpublic ActiveMQConnectionFactory jmsConnectionFactoryActiveMQ() {\r\n\t\tActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory();\r\n\t\tconnectionFactory.setTrustAllPackages(true);\r\n\t\t\r\n\t\t// create re-delivery policy to configure re-attempt count and delay\r\n\t\t// when message is rolled back on queue in case of any exception\r\n\t\tRedeliveryPolicy redeliveryPolicy = new RedeliveryPolicy();\r\n\t\tredeliveryPolicy.setMaximumRedeliveries(Integer.parseInt(maximumRedelivery));\r\n\t\tredeliveryPolicy.setRedeliveryDelay(redeliveryDelay);\r\n\t\t\r\n\t\tconnectionFactory.setRedeliveryPolicy(redeliveryPolicy);\r\n\t\tconnectionFactory.setBrokerURL(brokerUrl);\r\n\r\n\t\treturn connectionFactory;\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic JmsTemplate jmsTemplateActiveMQ(PooledConnectionFactory pooledConnectionFactory) {\r\n\t\tJmsTemplate jmsTemplate = new JmsTemplate();\r\n\t\tjmsTemplate.setPubSubDomain(false);\r\n\t\tjmsTemplate.setConnectionFactory(pooledConnectionFactory);\r\n\t\treturn jmsTemplate;\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic PooledConnectionFactory pooledConnectionFactory(ActiveMQConnectionFactory connectionFactory) {\r\n\t\tPooledConnectionFactory pooledConnectionFactory = new PooledConnectionFactory();\r\n\t\tpooledConnectionFactory.setConnectionFactory(connectionFactory);\r\n\t\tpooledConnectionFactory.setMaxConnections(activeMqPoolMaxConnections);\r\n\t\treturn pooledConnectionFactory;\r\n\r\n\t}\r\n\r\n}\r\n```\r\nNote: \r\n\r\n - activeMqPoolMaxConnections is 10.   \r\n - Message inflow is not too high. It&#39;s like 400-500 messages.\r\n - We are also using `JMSXGroupID` to group messages (`message.setStringProperty(&quot;JMSXGroupID&quot;, groupId);`)\r\n - ActiveMQ connection url is `activeMQ.broker.url=https://dummy.dns.name.com/destination-name?useInactivityMonitor=false`","title":"Intermittently application is not able to send message on ActiceMQ &quot;Classic&quot; due to javax.jms.JMSException: Could not connect to broker URL","body":"<p>The application uses pooled JMS connection. On startup the application is working fine, but after a couple of days it is not able to send messages to ActiveMQ &quot;Classic.&quot; As soon as the application is restarted it connects again and works fine for the next couple of days.</p>\n<p>Below is the error message:\nThe initial error is:</p>\n<pre><code>2023-09-18 00:03:15,051 ERROR c.n.v.r.i.l.BulkMessageStorageQueueListener [pool-7-thread-1] Exception in sending messages, rollbacking messages with size: 78\norg.springframework.jms.IllegalStateException: com.thoughtworks.xstream.InitializationException: Could not instantiate mapper : com.thoughtworks.xstream.mapper.EnumMapper; nested exception is javax.jms.IllegalStateException: com.thoughtworks.xstream.InitializationException: Could not instantiate mapper : com.thoughtworks.xstream.mapper.EnumMapper\n    at org.springframework.jms.support.JmsUtils.convertJmsAccessException(JmsUtils.java:274) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.jms.support.JmsAccessor.convertJmsAccessException(JmsAccessor.java:185) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:507) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.jms.core.JmsTemplate.send(JmsTemplate.java:584) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.jms.core.JmsTemplate.convertAndSend(JmsTemplate.java:691) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at com.project.xxx.BulkMessageSender.sendStatusMessage(BulkMessageSender.java:71) ~[classes/:04.17.02.35]\n    at com.project.xxx.BulkMessageStorageQueueListener.lambda$setupConsumer$0(BulkMessageStorageQueueListener.java:113) ~[classes/:04.17.02.35]\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[?:?]\n    at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) ~[?:1.8.0_222]\n    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) ~[?:?]\n    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) ~[?:?]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_222]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:?]\n    at java.lang.Thread.run(Thread.java:748) ~[?:1.8.0_222]\nCaused by: javax.jms.IllegalStateException: com.thoughtworks.xstream.InitializationException: Could not instantiate mapper : com.thoughtworks.xstream.mapper.EnumMapper\n    at org.apache.activemq.jms.pool.ConnectionPool.createSession(ConnectionPool.java:162) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.PooledConnection.createSession(PooledConnection.java:167) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.springframework.jms.support.JmsAccessor.createSession(JmsAccessor.java:208) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:495) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    ... 11 more\nCaused by: com.thoughtworks.xstream.InitializationException: Could not instantiate mapper : com.thoughtworks.xstream.mapper.EnumMapper\n    at com.thoughtworks.xstream.XStream.buildMapperDynamically(XStream.java:646) ~[xstream-1.4.11.1.jar:1.4.11.1]\n    at com.thoughtworks.xstream.XStream.buildMapper(XStream.java:616) ~[xstream-1.4.11.1.jar:1.4.11.1]\n    at com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:587) ~[xstream-1.4.11.1.jar:1.4.11.1]\n    at com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:515) ~[xstream-1.4.11.1.jar:1.4.11.1]\n    at com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:484) ~[xstream-1.4.11.1.jar:1.4.11.1]\n    at com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:430) ~[xstream-1.4.11.1.jar:1.4.11.1]\n    at com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:369) ~[xstream-1.4.11.1.jar:1.4.11.1]\n    at org.apache.activemq.transport.stomp.XStreamSupport.createXStream(XStreamSupport.java:31) ~[activemq-stomp-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.xstream.XStreamWireFormat.createXStream(XStreamWireFormat.java:127) ~[activemq-http-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.xstream.XStreamWireFormat.getXStream(XStreamWireFormat.java:113) ~[activemq-http-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.xstream.XStreamWireFormat.marshalText(XStreamWireFormat.java:89) ~[activemq-http-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.http.HttpClientTransport.oneway(HttpClientTransport.java:106) ~[activemq-http-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:68) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.ResponseCorrelator.asyncRequest(ResponseCorrelator.java:81) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.ResponseCorrelator.request(ResponseCorrelator.java:86) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1392) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.ActiveMQConnection.ensureConnectionInfoSent(ActiveMQConnection.java:1486) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.ActiveMQConnection.createSession(ActiveMQConnection.java:329) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.ConnectionPool.makeSession(ConnectionPool.java:112) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.ConnectionPool$1.makeObject(ConnectionPool.java:82) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.ConnectionPool$1.makeObject(ConnectionPool.java:78) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.commons.pool2.impl.GenericKeyedObjectPool.create(GenericKeyedObjectPool.java:1041) ~[commons-pool2-2.7.0.jar:2.7.0]\n    at org.apache.commons.pool2.impl.GenericKeyedObjectPool.borrowObject(GenericKeyedObjectPool.java:342) ~[commons-pool2-2.7.0.jar:2.7.0]\n    at org.apache.commons.pool2.impl.GenericKeyedObjectPool.borrowObject(GenericKeyedObjectPool.java:265) ~[commons-pool2-2.7.0.jar:2.7.0]\n    at org.apache.activemq.jms.pool.ConnectionPool.createSession(ConnectionPool.java:144) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.PooledConnection.createSession(PooledConnection.java:167) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.springframework.jms.support.JmsAccessor.createSession(JmsAccessor.java:208) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:495) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    ... 11 more\nCaused by: java.lang.ClassNotFoundException: com.thoughtworks.xstream.mapper.EnumMapper\n    at com.thoughtworks.xstream.core.util.CompositeClassLoader.loadClass(CompositeClassLoader.java:148) ~[xstream-1.4.11.1.jar:1.4.11.1]\n    at java.lang.Class.forName0(Native Method) ~[?:1.8.0_222]\n    at java.lang.Class.forName(Class.java:348) ~[?:1.8.0_222]\n    at com.thoughtworks.xstream.XStream.buildMapperDynamically(XStream.java:642) ~[xstream-1.4.11.1.jar:1.4.11.1]\n    at com.thoughtworks.xstream.XStream.buildMapper(XStream.java:616) ~[xstream-1.4.11.1.jar:1.4.11.1]\n    at com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:587) ~[xstream-1.4.11.1.jar:1.4.11.1]\n    at com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:515) ~[xstream-1.4.11.1.jar:1.4.11.1]\n    at com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:484) ~[xstream-1.4.11.1.jar:1.4.11.1]\n    at com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:430) ~[xstream-1.4.11.1.jar:1.4.11.1]\n    at com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:369) ~[xstream-1.4.11.1.jar:1.4.11.1]\n    at org.apache.activemq.transport.stomp.XStreamSupport.createXStream(XStreamSupport.java:31) ~[activemq-stomp-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.xstream.XStreamWireFormat.createXStream(XStreamWireFormat.java:127) ~[activemq-http-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.xstream.XStreamWireFormat.getXStream(XStreamWireFormat.java:113) ~[activemq-http-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.xstream.XStreamWireFormat.marshalText(XStreamWireFormat.java:89) ~[activemq-http-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.http.HttpClientTransport.oneway(HttpClientTransport.java:106) ~[activemq-http-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:68) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.ResponseCorrelator.asyncRequest(ResponseCorrelator.java:81) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.ResponseCorrelator.request(ResponseCorrelator.java:86) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1392) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.ActiveMQConnection.ensureConnectionInfoSent(ActiveMQConnection.java:1486) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.ActiveMQConnection.createSession(ActiveMQConnection.java:329) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.ConnectionPool.makeSession(ConnectionPool.java:112) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.ConnectionPool$1.makeObject(ConnectionPool.java:82) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.ConnectionPool$1.makeObject(ConnectionPool.java:78) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.commons.pool2.impl.GenericKeyedObjectPool.create(GenericKeyedObjectPool.java:1041) ~[commons-pool2-2.7.0.jar:2.7.0]\n    at org.apache.commons.pool2.impl.GenericKeyedObjectPool.borrowObject(GenericKeyedObjectPool.java:342) ~[commons-pool2-2.7.0.jar:2.7.0]\n    at org.apache.commons.pool2.impl.GenericKeyedObjectPool.borrowObject(GenericKeyedObjectPool.java:265) ~[commons-pool2-2.7.0.jar:2.7.0]\n    at org.apache.activemq.jms.pool.ConnectionPool.createSession(ConnectionPool.java:144) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.PooledConnection.createSession(PooledConnection.java:167) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.springframework.jms.support.JmsAccessor.createSession(JmsAccessor.java:208) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:495) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    ... 11 more\n</code></pre>\n<p>After the below error is coming continuously until the application has not restarted.</p>\n<pre><code>2023-09-18 00:03:16,363 ERROR c.n.v.r.i.l.BulkMessageStorageQueueListener [pool-7-thread-1] Exception in sending messages, rollbacking messages with size: 94\norg.springframework.jms.UncategorizedJmsException: Uncategorized exception occurred during JMS processing; nested exception is javax.jms.JMSException: Error while attempting to add new Connection to the pool; nested exception is javax.jms.JMSException: Could not connect to broker URL: https://hostName:443/destination-name?useInactivityMonitor=false. Reason: java.lang.IllegalStateException: Illegal access: this web application instance has been stopped already. Could not load [org/apache/http/client/version.properties]. The following stack trace is thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access.\n    at org.springframework.jms.support.JmsUtils.convertJmsAccessException(JmsUtils.java:311) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.jms.support.JmsAccessor.convertJmsAccessException(JmsAccessor.java:185) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:507) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.jms.core.JmsTemplate.send(JmsTemplate.java:584) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.jms.core.JmsTemplate.convertAndSend(JmsTemplate.java:691) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at com.project.xxx.BulkMessageSender.sendStatusMessage(BulkMessageSender.java:71) ~[classes/:04.17.02.35]\n    at com.project.xxx.BulkMessageStorageQueueListener.lambda$setupConsumer$0(BulkMessageStorageQueueListener.java:113) ~[classes/:04.17.02.35]\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[?:?]\n    at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) ~[?:1.8.0_222]\n    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) ~[?:?]\n    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) ~[?:?]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_222]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:?]\n    at java.lang.Thread.run(Thread.java:748) ~[?:1.8.0_222]\nCaused by: javax.jms.JMSException: Error while attempting to add new Connection to the pool\n    at org.apache.activemq.jms.pool.PooledConnectionFactory.createJmsException(PooledConnectionFactory.java:279) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:230) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:209) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.springframework.jms.support.JmsAccessor.createConnection(JmsAccessor.java:196) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:494) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    ... 11 more\nCaused by: javax.jms.JMSException: Could not connect to broker URL: https://hostName:443/destination-name?useInactivityMonitor=false. Reason: java.lang.IllegalStateException: Illegal access: this web application instance has been stopped already. Could not load [org/apache/http/client/version.properties]. The following stack trace is thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access.\n    at org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:36) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:374) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:304) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.ActiveMQConnectionFactory.createConnection(ActiveMQConnectionFactory.java:244) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:288) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.PooledConnectionFactory$1.makeObject(PooledConnectionFactory.java:97) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.PooledConnectionFactory$1.makeObject(PooledConnectionFactory.java:94) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.commons.pool2.impl.GenericKeyedObjectPool.create(GenericKeyedObjectPool.java:1041) ~[commons-pool2-2.7.0.jar:2.7.0]\n    at org.apache.commons.pool2.impl.GenericKeyedObjectPool.addObject(GenericKeyedObjectPool.java:1238) ~[commons-pool2-2.7.0.jar:2.7.0]\n    at org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:226) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:209) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.springframework.jms.support.JmsAccessor.createConnection(JmsAccessor.java:196) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:494) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    ... 11 more\nCaused by: java.lang.IllegalStateException: Illegal access: this web application instance has been stopped already. Could not load [org/apache/http/client/version.properties]. The following stack trace is thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access.\n    at org.apache.catalina.loader.WebappClassLoaderBase.checkStateForResourceLoading(WebappClassLoaderBase.java:1427) ~[?:?]\n    at org.apache.catalina.loader.WebappClassLoaderBase.getResourceAsStream(WebappClassLoaderBase.java:1135) ~[?:?]\n    at org.apache.http.util.VersionInfo.loadVersionInfo(VersionInfo.java:233) ~[httpcore-4.4.13.jar:4.4.13]\n    at org.apache.http.util.VersionInfo.getUserAgent(VersionInfo.java:319) ~[httpcore-4.4.13.jar:4.4.13]\n    at org.apache.http.impl.client.HttpClientBuilder.build(HttpClientBuilder.java:1057) ~[httpclient-4.5.12.jar:4.5.12]\n    at org.apache.activemq.transport.http.HttpClientTransport.createHttpClient(HttpClientTransport.java:347) ~[activemq-http-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.http.HttpClientTransport.getReceiveHttpClient(HttpClientTransport.java:233) ~[activemq-http-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.http.HttpClientTransport.doStart(HttpClientTransport.java:250) ~[activemq-http-5.15.12.jar:5.15.12]\n    at org.apache.activemq.util.ServiceSupport.start(ServiceSupport.java:55) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.TransportFilter.start(TransportFilter.java:64) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.TransportFilter.start(TransportFilter.java:64) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:354) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:304) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.ActiveMQConnectionFactory.createConnection(ActiveMQConnectionFactory.java:244) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:288) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.PooledConnectionFactory$1.makeObject(PooledConnectionFactory.java:97) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.PooledConnectionFactory$1.makeObject(PooledConnectionFactory.java:94) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.commons.pool2.impl.GenericKeyedObjectPool.create(GenericKeyedObjectPool.java:1041) ~[commons-pool2-2.7.0.jar:2.7.0]\n    at org.apache.commons.pool2.impl.GenericKeyedObjectPool.addObject(GenericKeyedObjectPool.java:1238) ~[commons-pool2-2.7.0.jar:2.7.0]\n    at org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:226) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:209) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.springframework.jms.support.JmsAccessor.createConnection(JmsAccessor.java:196) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:494) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    ... 11 more\n</code></pre>\n<p>Below is code for configuring the client application:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ActiveMQConfig {\n\n    private static final Logger logger = LoggerFactory.getLogger(ActiveMQConfig.class);\n\n    // Active Mq properties\n\n    @Value(&quot;${activeMQ.broker.url}&quot;)\n    private String brokerUrl;\n\n    @Value(&quot;${jms.listener.concurrency}&quot;)\n    private String concurrency;\n    \n    // The duration between attempts to redliver a message\n    @Value(&quot;${jms.rollback.redelivery.delay:10000}&quot;)\n    private int redeliveryDelay;\n\n    // Maximum number of times a redlivery of a message will be attempted -1 is infinite\n    @Value(&quot;${jms.rollback.maximum.redeliveries:-1}&quot;)\n    private String maximumRedelivery;\n\n    @Value(&quot;${message.activeMQ.pool.max.connections:10}&quot;)\n    private int activeMqPoolMaxConnections;\n\n    @Bean\n    public JmsListenerContainerFactory jmsListenerContainerFactory(\n            @Qualifier(&quot;jmsConnectionFactoryActiveMQ&quot;) ConnectionFactory connectionFactory,\n            DefaultJmsListenerContainerFactoryConfigurer configurer) {\n        DefaultJmsListenerContainerFactory factory = new DefaultJmsListenerContainerFactory();\n        factory.setConcurrency(concurrency);\n        factory.setSessionTransacted(true);\n        factory.setAutoStartup(false);\n        factory.setErrorHandler(errorHandler -&gt; logger.error(&quot;An error has occurred in the transaction: {}&quot;,\n                errorHandler.getMessage()));\n        configurer.configure(factory, connectionFactory);\n        return factory;\n    }\n\n    @Bean\n    @Primary\n    public ActiveMQConnectionFactory jmsConnectionFactoryActiveMQ() {\n        ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory();\n        connectionFactory.setTrustAllPackages(true);\n        \n        // create re-delivery policy to configure re-attempt count and delay\n        // when message is rolled back on queue in case of any exception\n        RedeliveryPolicy redeliveryPolicy = new RedeliveryPolicy();\n        redeliveryPolicy.setMaximumRedeliveries(Integer.parseInt(maximumRedelivery));\n        redeliveryPolicy.setRedeliveryDelay(redeliveryDelay);\n        \n        connectionFactory.setRedeliveryPolicy(redeliveryPolicy);\n        connectionFactory.setBrokerURL(brokerUrl);\n\n        return connectionFactory;\n    }\n\n    @Bean\n    public JmsTemplate jmsTemplateActiveMQ(PooledConnectionFactory pooledConnectionFactory) {\n        JmsTemplate jmsTemplate = new JmsTemplate();\n        jmsTemplate.setPubSubDomain(false);\n        jmsTemplate.setConnectionFactory(pooledConnectionFactory);\n        return jmsTemplate;\n    }\n\n    @Bean\n    public PooledConnectionFactory pooledConnectionFactory(ActiveMQConnectionFactory connectionFactory) {\n        PooledConnectionFactory pooledConnectionFactory = new PooledConnectionFactory();\n        pooledConnectionFactory.setConnectionFactory(connectionFactory);\n        pooledConnectionFactory.setMaxConnections(activeMqPoolMaxConnections);\n        return pooledConnectionFactory;\n\n    }\n\n}\n</code></pre>\n<p>Note:</p>\n<ul>\n<li>activeMqPoolMaxConnections is 10.</li>\n<li>Message inflow is not too high. It's like 400-500 messages.</li>\n<li>We are also using <code>JMSXGroupID</code> to group messages (<code>message.setStringProperty(&quot;JMSXGroupID&quot;, groupId);</code>)</li>\n<li>ActiveMQ connection url is <code>activeMQ.broker.url=https://dummy.dns.name.com/destination-name?useInactivityMonitor=false</code></li>\n</ul>\n"},{"tags":["java","compiler-errors","uncaught-exception","checked-exceptions"],"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":2,"creation_date":1656140083,"post_id":72751842,"comment_id":128502964,"body_markdown":"Please note.  This intended to be a canonical Q&amp;A for this kind of question.  There are *many* (hundreds) of existing questions, but they either have &quot;too much code&quot; or the answers are too specific to the code.","body":"Please note.  This intended to be a canonical Q&amp;A for this kind of question.  There are <i>many</i> (hundreds) of existing questions, but they either have &quot;too much code&quot; or the answers are too specific to the code."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1695798890,"creation_date":1656139913,"answer_id":72751843,"question_id":72751842,"body_markdown":"First things first.  This a compilation error not a exception.  You should see it at compile time.  \r\n\r\n&lt;sup&gt;If you see it in a runtime exception message, that&#39;s probably because you are running some code with compilation errors in it.  Go back and fix the compilation errors.  Then find and set the setting in your IDE that prevents it generating &quot;.class&quot; files for source code with compilation errors.  (Save yourself future pain.)&lt;/sup&gt;\r\n\r\n-------------------\r\n\r\nThe short answer to the question is:\r\n\r\n - The error message is saying that the statement with this error is throwing (or propagating) a *checked exception*, and the exception (the `XXX`) is not being dealt with properly.\r\n\r\n - The solution is to deal with the exception by either:\r\n\r\n   - catching and handling it with a `try ... catch` statement, or\r\n   - declaring that the enclosing method or constructor `throws` it&lt;sup&gt;1&lt;/sup&gt;.\r\n\r\n&lt;sup&gt;1 - There are some edge-cases where you can&#39;t do that.  Read the rest of the answer!&lt;/sup&gt;\r\n\r\n-----------------------\r\n\r\nChecked versus unchecked exceptions\r\n-----------------------------------\r\n\r\nIn Java, exceptions are represented by classes that descend from the `java.lang.Throwable` class.  Exceptions are divided into two categories:\r\n\r\n  - *Checked exceptions* are `Throwable`, and `Exception` and its subclasses, apart from `RuntimeException` and its subclasses.\r\n  - *Unchecked exceptions* are all other exceptions; i.e. `Error` and its subclasses, and `RuntimeException` and its subclasses.\r\n\r\n(In the above, &quot;subclasses&quot; includes by direct and indirect subclasses.)\r\n\r\nThe distinction between checked and unchecked exceptions is that checked exceptions *must* be &quot;dealt with&quot; within the enclosing method or constructor that they occur, but unchecked exceptions need not be dealt with.\r\n\r\n(Q: How do you know if an exception is checked or not?  A: Find the javadoc for the exception&#39;s class, and look at its parent classes.)\r\n\r\nHow do you deal with a (checked) exception\r\n---------------------------------\r\n\r\nFrom the Java language perspective, there are two ways to deal with an exception that will &quot;satisfy&quot; the compiler:\r\n\r\n1.  You can catch the exception in a `try ... catch` statement.  For example:\r\n\r\n        public void doThings() {\r\n            try {\r\n                // do some things\r\n                if (someFlag) {\r\n                    throw new IOException(&quot;cannot read something&quot;);\r\n                }\r\n                // do more things\r\n            } catch (IOException ex) {\r\n                // deal with it    &lt;&lt;&lt;=== HERE\r\n            }\r\n        }\r\n\r\n    In the above, we put the statement that throws the (checked) `IOException` in the body of the `try`.  Then we wrote a `catch` clause to catch the exception.   (We could catch a superclass of `IOException` ... but in this case that would be `Exception` and catching `Exception` is a bad idea.)\r\n\r\n2.  You can declare that the enclosing method or constructor `throws` the exception\r\n\r\n        public void doThings() throws IOException {\r\n            // do some things\r\n            if (someFlag) {\r\n                throw new IOException(&quot;cannot read something&quot;);\r\n            }\r\n            // do more things\r\n        }  \r\n\r\n    In the above we have declared that `doThings()` throws `IOException`.  That means that any code that calls the `doThings()` method has to deal with the exception.  In short, we are passing the problem of dealing with the exception to the caller.\r\n\r\nWhich of these things is the correct thing to do?\r\n\r\nIt depends on the context.  However, a general principle is that you should deal with exceptions at a level in the code where you are able to deal with them appropriately.   And that in turn depends on what the exception handling code is going to do (at `HERE`).  Can it recover?  Can it abandon the current request?  Should it halt the application?\r\n\r\nSolving the problem\r\n-------------------\r\n\r\nTo recap.  The compilation error means that:\r\n\r\n  - your code has thrown a checked exception, or called some method or constructor that throws the checked exception, and\r\n  - it has not *dealt with* the exception by catching it or by declaring it as required by the Java language.\r\n\r\nYour solution process should be:\r\n\r\n  1.  Understand what the exception means, and why it *could* be thrown.  Read the javadoc for the exception and the method that throws the exception.\r\n  2.  Based on 1, read *your* code and decide on the correct way to deal with the possible exception.\r\n  3.  Based on 2, make the relevant changes to your code.\r\n\r\nExample: throwing and catching in the same method\r\n-----------------------------------\r\n\r\nConsider the following example from [this Q&amp;A](https://stackoverflow.com/questions/67867013)\r\n\r\n    public class Main {\r\n        static void t() throws IllegalAccessException {\r\n            try {\r\n               throw new IllegalAccessException(&quot;demo&quot;);\r\n            } catch (IllegalAccessException e){\r\n                System.out.println(e);\r\n            }\r\n        }\r\n    \r\n        public static void main(String[] args){\r\n            t();\r\n            System.out.println(&quot;hello&quot;);\r\n        }\r\n    }\r\n\r\nIf you have been following what we have said so far, you will realise that the `t()` will give the &quot;unreported exception&quot; compilation error.  In this case, the mistake is that `t` has been declared as `throws IllegalAccessException`.  In fact the exception does not propagate, because it has been caught within the method that threw it.  \r\n\r\nThe fix in this example will be to *remove* the `throws IllegalAccessException`.\r\n\r\nThe mini-lesson here is that `throws IllegalAccessException` is the method saying that the caller should *expect* the exception to propagate.  It doesn&#39;t actually mean that it will propagate.  And the flip-side is that if you *don&#39;t* expect the exception to propagate (e.g. because it wasn&#39;t thrown, or because it was caught and not rethrown) then the method&#39;s signature shouldn&#39;t say it is thrown! \r\n\r\n\r\nBad practice with exceptions\r\n----------------------------\r\n\r\nThere are a couple of things that you should avoid doing:\r\n\r\n  - Don&#39;t catch `Exception` (or `Throwable`) as a short cut for catching a list of exceptions.  If you do that, you are liable catch things that you don&#39;t expect (like an *unchecked* `NullPointerException`) and then attempt to recover when you shouldn&#39;t.\r\n  - Don&#39;t declare a method as `throws Exception`.  That forces the called to deal with (potentially) any checked exception ... which is a nightmare.\r\n  - Don&#39;t squash exceptions.  For example\r\n\r\n        try { \r\n            ...\r\n        } catch (NullPointerException ex) {\r\n            // It never happens ... ignoring this\r\n        }\r\n    \r\n    If you squash exceptions, you are liable to make the runtime errors that triggered them much harder to diagnose.  You are destroying the evidence.  \r\n\r\n    Note: just *believing* that the exception never happens (per the comment) doesn&#39;t necessarily make it a fact.\r\n\r\nEdge case: static initializers\r\n-----------------------------------\r\n\r\nThere some situations where dealing with checked exceptions is a problem.  One particular case is checked exceptions in `static` initializers.  For example:\r\n\r\n    private static final FileInputStream input = new FileInputStream(&quot;foo.txt&quot;);\r\n\r\nThe `FileInputStream` is declared as `throws FileNotFoundException` ... which is a checked exception.  But since the above is a field declaration, the syntax of the Java language, won&#39;t let us put the declaration inside a `try` ... `catch`.  And there is no appropriate (enclosing) method or constructor ... because this code is run when the *class* is initialized.\r\n\r\nOne solution is to use a `static` block; for example:\r\n\r\n    private static final FileInputStream input;\r\n\r\n    static {\r\n       FileInputStream temp = null;\r\n       try {\r\n           temp = new FileInputStream(&quot;foo.txt&quot;);\r\n       } catch (FileNotFoundException ex) {\r\n           // log the error rather than squashing it\r\n       }\r\n       input = temp;   // Note that we need a single point of assignment to &#39;input&#39;\r\n    }\r\n\r\n&lt;sup&gt;(There are better ways to handle the above scenario in practical code, but that&#39;s not the point of this example.)&lt;/sup&gt;\r\n\r\nEdge case: static blocks\r\n-----------------------------\r\n\r\nAs noted above, you can catch exceptions in static blocks.  But what we didn&#39;t mention is that you *must* catch checked exceptions *within* the block.  There is no enclosing context for a static block where checked exceptions could be caught.\r\n\r\nEdge case: lambdas\r\n------------------\r\n\r\nA lambda expression (typically) should not throw an unchecked exception.  This is not a restriction on lambdas *per se*.  Rather it is a consequence of the function interface that is used for the argument where you are supplying the argument.  Unless the function declares a checked exception, the lambda cannot throw one.   For example:\r\n\r\n    List&lt;Path&gt; paths = ...\r\n    try {\r\n        paths.forEach(p -&gt; Files.delete(p));\r\n    } catch (IOException ex) {\r\n        // log it ...\r\n    }\r\n\r\nEven though we appear to have caught `IOException`, the compiler will complain that:\r\n\r\n  - there is an uncaught exception in the lambda, AND\r\n  - the `catch` is catching an exception that is never thrown!\r\n\r\nIn fact, the exception needs to be caught in the lambda itself:\r\n\r\n    List&lt;Path&gt; paths = ...\r\n    paths.forEach(p -&gt; {\r\n                          try {\r\n                              Files.delete(p);\r\n                          } catch (IOException ex) {\r\n                              // log it ...\r\n                          }\r\n                       }\r\n                 );\r\n\r\n&lt;sup&gt;(The astute reader will notice that the two versions behave differently in the case that a `delete` throws an exception ...)&lt;/sup&gt;\r\n\r\nEdge case: two exceptions called Xyzzy\r\n--------------------------------------\r\n\r\nI have seen cases where a method has a `throws Xyzzy` clause, and the compiler *still complains* that `Xyzzy` must be &quot;caught or declared to be thrown&quot;.  For example: https://stackoverflow.com/questions/27100099.  \r\n\r\nIf you find yourself in this situation, look carefully at the fully qualified names of the exceptions. If the fully qualified names are different, then the exceptions are different.  (Believe what the compiler is saying and try to understand it.)\r\n\r\nMore Information\r\n----------------\r\n\r\nThe Oracle Java Tutorial:\r\n - [The catch or specify requirement](https://docs.oracle.com/javase/tutorial/essential/exceptions/catchOrDeclare.html)\r\n   ... also covers checked vs unchecked exceptions.\r\n - [Catching and handling exceptions](https://docs.oracle.com/javase/tutorial/essential/exceptions/handling.html)\r\n - [Specifying the exceptions thrown by a method](https://docs.oracle.com/javase/tutorial/essential/exceptions/declaring.html)\r\n\r\n","title":"What does &quot;error: unreported exception &lt;XXX&gt;; must be caught or declared to be thrown&quot; mean and how do I fix it?","body":"<p>First things first.  This a compilation error not a exception.  You should see it at compile time.</p>\n<p><sup>If you see it in a runtime exception message, that's probably because you are running some code with compilation errors in it.  Go back and fix the compilation errors.  Then find and set the setting in your IDE that prevents it generating &quot;.class&quot; files for source code with compilation errors.  (Save yourself future pain.)</sup></p>\n<hr />\n<p>The short answer to the question is:</p>\n<ul>\n<li><p>The error message is saying that the statement with this error is throwing (or propagating) a <em>checked exception</em>, and the exception (the <code>XXX</code>) is not being dealt with properly.</p>\n</li>\n<li><p>The solution is to deal with the exception by either:</p>\n<ul>\n<li>catching and handling it with a <code>try ... catch</code> statement, or</li>\n<li>declaring that the enclosing method or constructor <code>throws</code> it<sup>1</sup>.</li>\n</ul>\n</li>\n</ul>\n<p><sup>1 - There are some edge-cases where you can't do that.  Read the rest of the answer!</sup></p>\n<hr />\n<h2>Checked versus unchecked exceptions</h2>\n<p>In Java, exceptions are represented by classes that descend from the <code>java.lang.Throwable</code> class.  Exceptions are divided into two categories:</p>\n<ul>\n<li><em>Checked exceptions</em> are <code>Throwable</code>, and <code>Exception</code> and its subclasses, apart from <code>RuntimeException</code> and its subclasses.</li>\n<li><em>Unchecked exceptions</em> are all other exceptions; i.e. <code>Error</code> and its subclasses, and <code>RuntimeException</code> and its subclasses.</li>\n</ul>\n<p>(In the above, &quot;subclasses&quot; includes by direct and indirect subclasses.)</p>\n<p>The distinction between checked and unchecked exceptions is that checked exceptions <em>must</em> be &quot;dealt with&quot; within the enclosing method or constructor that they occur, but unchecked exceptions need not be dealt with.</p>\n<p>(Q: How do you know if an exception is checked or not?  A: Find the javadoc for the exception's class, and look at its parent classes.)</p>\n<h2>How do you deal with a (checked) exception</h2>\n<p>From the Java language perspective, there are two ways to deal with an exception that will &quot;satisfy&quot; the compiler:</p>\n<ol>\n<li><p>You can catch the exception in a <code>try ... catch</code> statement.  For example:</p>\n<pre><code>public void doThings() {\n    try {\n        // do some things\n        if (someFlag) {\n            throw new IOException(&quot;cannot read something&quot;);\n        }\n        // do more things\n    } catch (IOException ex) {\n        // deal with it    &lt;&lt;&lt;=== HERE\n    }\n}\n</code></pre>\n<p>In the above, we put the statement that throws the (checked) <code>IOException</code> in the body of the <code>try</code>.  Then we wrote a <code>catch</code> clause to catch the exception.   (We could catch a superclass of <code>IOException</code> ... but in this case that would be <code>Exception</code> and catching <code>Exception</code> is a bad idea.)</p>\n</li>\n<li><p>You can declare that the enclosing method or constructor <code>throws</code> the exception</p>\n<pre><code>public void doThings() throws IOException {\n    // do some things\n    if (someFlag) {\n        throw new IOException(&quot;cannot read something&quot;);\n    }\n    // do more things\n}  \n</code></pre>\n<p>In the above we have declared that <code>doThings()</code> throws <code>IOException</code>.  That means that any code that calls the <code>doThings()</code> method has to deal with the exception.  In short, we are passing the problem of dealing with the exception to the caller.</p>\n</li>\n</ol>\n<p>Which of these things is the correct thing to do?</p>\n<p>It depends on the context.  However, a general principle is that you should deal with exceptions at a level in the code where you are able to deal with them appropriately.   And that in turn depends on what the exception handling code is going to do (at <code>HERE</code>).  Can it recover?  Can it abandon the current request?  Should it halt the application?</p>\n<h2>Solving the problem</h2>\n<p>To recap.  The compilation error means that:</p>\n<ul>\n<li>your code has thrown a checked exception, or called some method or constructor that throws the checked exception, and</li>\n<li>it has not <em>dealt with</em> the exception by catching it or by declaring it as required by the Java language.</li>\n</ul>\n<p>Your solution process should be:</p>\n<ol>\n<li>Understand what the exception means, and why it <em>could</em> be thrown.  Read the javadoc for the exception and the method that throws the exception.</li>\n<li>Based on 1, read <em>your</em> code and decide on the correct way to deal with the possible exception.</li>\n<li>Based on 2, make the relevant changes to your code.</li>\n</ol>\n<h2>Example: throwing and catching in the same method</h2>\n<p>Consider the following example from <a href=\"https://stackoverflow.com/questions/67867013\">this Q&amp;A</a></p>\n<pre><code>public class Main {\n    static void t() throws IllegalAccessException {\n        try {\n           throw new IllegalAccessException(&quot;demo&quot;);\n        } catch (IllegalAccessException e){\n            System.out.println(e);\n        }\n    }\n\n    public static void main(String[] args){\n        t();\n        System.out.println(&quot;hello&quot;);\n    }\n}\n</code></pre>\n<p>If you have been following what we have said so far, you will realise that the <code>t()</code> will give the &quot;unreported exception&quot; compilation error.  In this case, the mistake is that <code>t</code> has been declared as <code>throws IllegalAccessException</code>.  In fact the exception does not propagate, because it has been caught within the method that threw it.</p>\n<p>The fix in this example will be to <em>remove</em> the <code>throws IllegalAccessException</code>.</p>\n<p>The mini-lesson here is that <code>throws IllegalAccessException</code> is the method saying that the caller should <em>expect</em> the exception to propagate.  It doesn't actually mean that it will propagate.  And the flip-side is that if you <em>don't</em> expect the exception to propagate (e.g. because it wasn't thrown, or because it was caught and not rethrown) then the method's signature shouldn't say it is thrown!</p>\n<h2>Bad practice with exceptions</h2>\n<p>There are a couple of things that you should avoid doing:</p>\n<ul>\n<li><p>Don't catch <code>Exception</code> (or <code>Throwable</code>) as a short cut for catching a list of exceptions.  If you do that, you are liable catch things that you don't expect (like an <em>unchecked</em> <code>NullPointerException</code>) and then attempt to recover when you shouldn't.</p>\n</li>\n<li><p>Don't declare a method as <code>throws Exception</code>.  That forces the called to deal with (potentially) any checked exception ... which is a nightmare.</p>\n</li>\n<li><p>Don't squash exceptions.  For example</p>\n<pre><code>try { \n    ...\n} catch (NullPointerException ex) {\n    // It never happens ... ignoring this\n}\n</code></pre>\n<p>If you squash exceptions, you are liable to make the runtime errors that triggered them much harder to diagnose.  You are destroying the evidence.</p>\n<p>Note: just <em>believing</em> that the exception never happens (per the comment) doesn't necessarily make it a fact.</p>\n</li>\n</ul>\n<h2>Edge case: static initializers</h2>\n<p>There some situations where dealing with checked exceptions is a problem.  One particular case is checked exceptions in <code>static</code> initializers.  For example:</p>\n<pre><code>private static final FileInputStream input = new FileInputStream(&quot;foo.txt&quot;);\n</code></pre>\n<p>The <code>FileInputStream</code> is declared as <code>throws FileNotFoundException</code> ... which is a checked exception.  But since the above is a field declaration, the syntax of the Java language, won't let us put the declaration inside a <code>try</code> ... <code>catch</code>.  And there is no appropriate (enclosing) method or constructor ... because this code is run when the <em>class</em> is initialized.</p>\n<p>One solution is to use a <code>static</code> block; for example:</p>\n<pre><code>private static final FileInputStream input;\n\nstatic {\n   FileInputStream temp = null;\n   try {\n       temp = new FileInputStream(&quot;foo.txt&quot;);\n   } catch (FileNotFoundException ex) {\n       // log the error rather than squashing it\n   }\n   input = temp;   // Note that we need a single point of assignment to 'input'\n}\n</code></pre>\n<p><sup>(There are better ways to handle the above scenario in practical code, but that's not the point of this example.)</sup></p>\n<h2>Edge case: static blocks</h2>\n<p>As noted above, you can catch exceptions in static blocks.  But what we didn't mention is that you <em>must</em> catch checked exceptions <em>within</em> the block.  There is no enclosing context for a static block where checked exceptions could be caught.</p>\n<h2>Edge case: lambdas</h2>\n<p>A lambda expression (typically) should not throw an unchecked exception.  This is not a restriction on lambdas <em>per se</em>.  Rather it is a consequence of the function interface that is used for the argument where you are supplying the argument.  Unless the function declares a checked exception, the lambda cannot throw one.   For example:</p>\n<pre><code>List&lt;Path&gt; paths = ...\ntry {\n    paths.forEach(p -&gt; Files.delete(p));\n} catch (IOException ex) {\n    // log it ...\n}\n</code></pre>\n<p>Even though we appear to have caught <code>IOException</code>, the compiler will complain that:</p>\n<ul>\n<li>there is an uncaught exception in the lambda, AND</li>\n<li>the <code>catch</code> is catching an exception that is never thrown!</li>\n</ul>\n<p>In fact, the exception needs to be caught in the lambda itself:</p>\n<pre><code>List&lt;Path&gt; paths = ...\npaths.forEach(p -&gt; {\n                      try {\n                          Files.delete(p);\n                      } catch (IOException ex) {\n                          // log it ...\n                      }\n                   }\n             );\n</code></pre>\n<p><sup>(The astute reader will notice that the two versions behave differently in the case that a <code>delete</code> throws an exception ...)</sup></p>\n<h2>Edge case: two exceptions called Xyzzy</h2>\n<p>I have seen cases where a method has a <code>throws Xyzzy</code> clause, and the compiler <em>still complains</em> that <code>Xyzzy</code> must be &quot;caught or declared to be thrown&quot;.  For example: <a href=\"https://stackoverflow.com/questions/27100099\">Unreported exception ...... must be caught or declared to be thrown; despite *thrown* keyword</a>.</p>\n<p>If you find yourself in this situation, look carefully at the fully qualified names of the exceptions. If the fully qualified names are different, then the exceptions are different.  (Believe what the compiler is saying and try to understand it.)</p>\n<h2>More Information</h2>\n<p>The Oracle Java Tutorial:</p>\n<ul>\n<li><a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/catchOrDeclare.html\" rel=\"nofollow noreferrer\">The catch or specify requirement</a>\n... also covers checked vs unchecked exceptions.</li>\n<li><a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/handling.html\" rel=\"nofollow noreferrer\">Catching and handling exceptions</a></li>\n<li><a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/declaring.html\" rel=\"nofollow noreferrer\">Specifying the exceptions thrown by a method</a></li>\n</ul>\n"}],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2937,"favorite_count":0,"down_vote_count":1,"up_vote_count":6,"answer_count":1,"score":5,"last_activity_date":1695798890,"creation_date":1656139913,"question_id":72751842,"body_markdown":"New Java programmers frequently encounter errors phrased like this:\r\n\r\n    &quot;error: unreported exception &lt;XXX&gt;; must be caught or declared to be thrown&quot; \r\n\r\nwhere XXX is the name of some exception class.\r\n\r\nPlease explain:\r\n\r\n  - What the compilation error message is saying,\r\n  - the Java concepts behind this error, and \r\n  - how to fix it.","title":"What does &quot;error: unreported exception &lt;XXX&gt;; must be caught or declared to be thrown&quot; mean and how do I fix it?","body":"<p>New Java programmers frequently encounter errors phrased like this:</p>\n<pre><code>&quot;error: unreported exception &lt;XXX&gt;; must be caught or declared to be thrown&quot; \n</code></pre>\n<p>where XXX is the name of some exception class.</p>\n<p>Please explain:</p>\n<ul>\n<li>What the compilation error message is saying,</li>\n<li>the Java concepts behind this error, and</li>\n<li>how to fix it.</li>\n</ul>\n"},{"tags":["java","selenium-webdriver","slf4j"],"comments":[{"owner":{"account_id":27938804,"reputation":102,"user_id":21335232,"display_name":"Bhairu"},"score":0,"creation_date":1695802925,"post_id":77185310,"comment_id":136071499,"body_markdown":"There is no solution for this, coz many of the inbuilt selenium defined methods are only support to the 3.14 only, So I advocate you that again you have to switch back the 4.12 to 3.14. else if you want to continue with 4.12, build your code from scratch.","body":"There is no solution for this, coz many of the inbuilt selenium defined methods are only support to the 3.14 only, So I advocate you that again you have to switch back the 4.12 to 3.14. else if you want to continue with 4.12, build your code from scratch."}],"owner":{"account_id":29376912,"reputation":1,"user_id":22508250,"display_name":"Revathi Kamaraj"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695798667,"creation_date":1695798667,"question_id":77185310,"body_markdown":"I changed my scripts for the issue of HasInputDevice interface methods\r\nBecause of chromedriver 117, my scripts are not running.\r\nI changed my selenium version 3.141.59 to 4.12.0 to solve this issue\r\nBut now, HasInputDevice interface method issues are coming.\r\nI don&#39;t know, how to solve this\r\nplease help\r\nAnd some places showing compatibility error\r\nI used the pom.xml:\r\n```\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;groupId&gt;AIM&lt;/groupId&gt;\r\n    &lt;artifactId&gt;Aim&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    &lt;name&gt;Aim&lt;/name&gt;\r\n    &lt;!-- FIXME change it to the project&#39;s website --&gt;\r\n    &lt;url&gt;http://www.example.com&lt;/url&gt;\r\n    &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;java.version&gt;12&lt;/java.version&gt;\r\n\t&lt;junit.version&gt;4.13.2&lt;/junit.version&gt;\r\n\t&lt;cucumber.version&gt;6.9.0&lt;/cucumber.version&gt;\r\n\t&lt;serenity.version&gt;2.4.48&lt;/serenity.version&gt;\r\n\t&lt;serenity.cucumber.version&gt;2.4.48&lt;/serenity.cucumber.version&gt;\r\n\t&lt;maven.compiler.version&gt;3.8.1&lt;/maven.compiler.version&gt;\r\n\t&lt;maven.surefire.version&gt;2.22.2&lt;/maven.surefire.version&gt;\r\n    &lt;/properties&gt;\r\n    &lt;!-- Dependencies and other sections here --&gt;\r\n    &lt;dependencies&gt;\r\n       &lt;dependency&gt;\r\n\t&lt;groupId&gt;io.cucumber&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;cucumber-java&lt;/artifactId&gt;\r\n\t&lt;version&gt;${cucumber.version}&lt;/version&gt;\r\n\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t&lt;groupId&gt;io.cucumber&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;cucumber-junit&lt;/artifactId&gt;\r\n\t&lt;version&gt;${cucumber.version}&lt;/version&gt;\r\n\tscope&gt;test&lt;/scope&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t&lt;groupId&gt;junit&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n\t&lt;version&gt;${junit.version}&lt;/version&gt;\r\n\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n\t&lt;version&gt;4.12.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t&lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\r\n\t&lt;version&gt;5.5.2&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t&lt;groupId&gt;tech.grasshopper&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;extentreports-cucumber6-adapter&lt;/artifactId&gt;\r\n\t&lt;version&gt;2.8.1&lt;/version&gt;\r\n\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;poi&lt;/artifactId&gt;\r\n\t&lt;version&gt;4.1.2&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\r\n\t&lt;version&gt;4.1.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n&lt;/project&gt;\t\r\n```\r\nI tried to use selenium 4.12.0. After that my scripts are launching the chrome itself.\r\nConsole error:\r\n```\r\n[INFO] -------------------------------------------------------\r\n12:03:55.789 [main] INFO  i.c.core.plugin.SerenityReporter - Running feature from file:///D:/Git/AIMe2e/src/test/resources/DealerAndIndirectFeatures/DRE_DealerAndIndirect.feature\r\n12:03:55.794 [main] WARN  i.c.core.plugin.SerenityReporter - Feature from file:///D:/Git/AIMe2e/src/test/resources/DealerAndIndirectFeatures/DRE_DealerAndIndirect.feature is not under the &#39;features&#39; directory. Requirements report will not be correctly generated!\r\ntestrunner.MyTestRunnerDirect_DealerAndIndirectcom.google.inject.ProvisionException: \r\nUnable to provision, see the following errors:\r\n1) [Guice/ErrorInjectingConstructor]: NoClassDefFoundError: \r\norg/openqa/selenium/interactions/HasInputDevices\r\n  at WebdriverCloseBrowser.&lt;init&gt;(WebdriverCloseBrowser.java:22)\r\n  while locating WebdriverCloseBrowser\r\n  at WebDriverModule.configure(WebDriverModule.java:20)\r\n  while locating CloseBrowser\r\nLearn more:\r\n  https://github.com/google/guice/wiki/ERROR_INJECTING_CONSTRUCTOR\r\n1 error\r\n======================\r\nFull classname legend:\r\n======================\r\nCloseBrowser:          &quot;net.thucydides.core.webdriver.CloseBrowser&quot;\r\nWebDriverModule:       &quot;net.thucydides.core.guice.webdriver.WebDriverModule&quot;\r\nWebdriverCloseBrowser: &quot;net.thucydides.core.webdriver.WebdriverCloseBrowser&quot;\r\n========================\r\nEnd of classname legend:\r\n========================\r\n[INFO] Running Direct-Ordering and delivery\r\n[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in Direct-Ordering and delivery\r\n[INFO] Running Direct-Stock Booking and Report Generation\r\n[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in Direct-Stock Booking and Report Generation\r\n[INFO] Running dealer indirect Scenario verification #3\r\n[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in dealer indirect Scenario verification #3\r\n[INFO] Running Direct-Configuration and Assortment&amp;Inventory page validation\r\n[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in Direct-Configuration and Assortment&amp;Inventory page validation\r\n[INFO] Running Drivus brand selection and validation\r\n[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in Drivus brand selection and validation\r\n[INFO] \r\n[INFO] Results:\r\n[INFO] \r\n[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0\r\n[INFO] \r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n```","title":"Script not running in selenium 4.12.0 showing HasInputDevice error","body":"<p>I changed my scripts for the issue of HasInputDevice interface methods\nBecause of chromedriver 117, my scripts are not running.\nI changed my selenium version 3.141.59 to 4.12.0 to solve this issue\nBut now, HasInputDevice interface method issues are coming.\nI don't know, how to solve this\nplease help\nAnd some places showing compatibility error\nI used the pom.xml:</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;AIM&lt;/groupId&gt;\n    &lt;artifactId&gt;Aim&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;Aim&lt;/name&gt;\n    &lt;!-- FIXME change it to the project's website --&gt;\n    &lt;url&gt;http://www.example.com&lt;/url&gt;\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;java.version&gt;12&lt;/java.version&gt;\n    &lt;junit.version&gt;4.13.2&lt;/junit.version&gt;\n    &lt;cucumber.version&gt;6.9.0&lt;/cucumber.version&gt;\n    &lt;serenity.version&gt;2.4.48&lt;/serenity.version&gt;\n    &lt;serenity.cucumber.version&gt;2.4.48&lt;/serenity.cucumber.version&gt;\n    &lt;maven.compiler.version&gt;3.8.1&lt;/maven.compiler.version&gt;\n    &lt;maven.surefire.version&gt;2.22.2&lt;/maven.surefire.version&gt;\n    &lt;/properties&gt;\n    &lt;!-- Dependencies and other sections here --&gt;\n    &lt;dependencies&gt;\n       &lt;dependency&gt;\n    &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\n    &lt;artifactId&gt;cucumber-java&lt;/artifactId&gt;\n    &lt;version&gt;${cucumber.version}&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n    &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\n    &lt;artifactId&gt;cucumber-junit&lt;/artifactId&gt;\n    &lt;version&gt;${cucumber.version}&lt;/version&gt;\n    scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n    &lt;groupId&gt;junit&lt;/groupId&gt;\n    &lt;artifactId&gt;junit&lt;/artifactId&gt;\n    &lt;version&gt;${junit.version}&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n    &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n    &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n    &lt;version&gt;4.12.0&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;dependency&gt;\n    &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\n    &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\n    &lt;version&gt;5.5.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n    &lt;groupId&gt;tech.grasshopper&lt;/groupId&gt;\n    &lt;artifactId&gt;extentreports-cucumber6-adapter&lt;/artifactId&gt;\n    &lt;version&gt;2.8.1&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n    &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n    &lt;artifactId&gt;poi&lt;/artifactId&gt;\n    &lt;version&gt;4.1.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n    &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n    &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\n    &lt;version&gt;4.1.2&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/project&gt;  \n</code></pre>\n<p>I tried to use selenium 4.12.0. After that my scripts are launching the chrome itself.\nConsole error:</p>\n<pre><code>[INFO] -------------------------------------------------------\n12:03:55.789 [main] INFO  i.c.core.plugin.SerenityReporter - Running feature from file:///D:/Git/AIMe2e/src/test/resources/DealerAndIndirectFeatures/DRE_DealerAndIndirect.feature\n12:03:55.794 [main] WARN  i.c.core.plugin.SerenityReporter - Feature from file:///D:/Git/AIMe2e/src/test/resources/DealerAndIndirectFeatures/DRE_DealerAndIndirect.feature is not under the 'features' directory. Requirements report will not be correctly generated!\ntestrunner.MyTestRunnerDirect_DealerAndIndirectcom.google.inject.ProvisionException: \nUnable to provision, see the following errors:\n1) [Guice/ErrorInjectingConstructor]: NoClassDefFoundError: \norg/openqa/selenium/interactions/HasInputDevices\n  at WebdriverCloseBrowser.&lt;init&gt;(WebdriverCloseBrowser.java:22)\n  while locating WebdriverCloseBrowser\n  at WebDriverModule.configure(WebDriverModule.java:20)\n  while locating CloseBrowser\nLearn more:\n  https://github.com/google/guice/wiki/ERROR_INJECTING_CONSTRUCTOR\n1 error\n======================\nFull classname legend:\n======================\nCloseBrowser:          &quot;net.thucydides.core.webdriver.CloseBrowser&quot;\nWebDriverModule:       &quot;net.thucydides.core.guice.webdriver.WebDriverModule&quot;\nWebdriverCloseBrowser: &quot;net.thucydides.core.webdriver.WebdriverCloseBrowser&quot;\n========================\nEnd of classname legend:\n========================\n[INFO] Running Direct-Ordering and delivery\n[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in Direct-Ordering and delivery\n[INFO] Running Direct-Stock Booking and Report Generation\n[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in Direct-Stock Booking and Report Generation\n[INFO] Running dealer indirect Scenario verification #3\n[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in dealer indirect Scenario verification #3\n[INFO] Running Direct-Configuration and Assortment&amp;Inventory page validation\n[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in Direct-Configuration and Assortment&amp;Inventory page validation\n[INFO] Running Drivus brand selection and validation\n[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in Drivus brand selection and validation\n[INFO] \n[INFO] Results:\n[INFO] \n[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0\n[INFO] \n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n</code></pre>\n"},{"tags":["java","oracle","spring-boot","jdbctemplate","clob"],"comments":[{"owner":{"account_id":9007040,"reputation":303,"user_id":11934617,"display_name":"Pete Ythong"},"score":0,"creation_date":1695758839,"post_id":77182125,"comment_id":136066700,"body_markdown":"If you have any suggestions to improve my question, please let me know","body":"If you have any suggestions to improve my question, please let me know"},{"owner":{"account_id":17782616,"reputation":6789,"user_id":12913491,"display_name":"pmdba"},"score":1,"creation_date":1695764208,"post_id":77182125,"comment_id":136067520,"body_markdown":"PL/SQL (like your streaming function `test_clob`) has a size limit of 32K on CLOB variables.","body":"PL/SQL (like your streaming function <code>test_clob</code>) has a size limit of 32K on CLOB variables."},{"owner":{"account_id":9007040,"reputation":303,"user_id":11934617,"display_name":"Pete Ythong"},"score":0,"creation_date":1695796118,"post_id":77182125,"comment_id":136070337,"body_markdown":"@pmdba you&#39;re right, successfully tested with a smaller PDF, many thanks","body":"@pmdba you&#39;re right, successfully tested with a smaller PDF, many thanks"}],"answers":[{"tags":[],"owner":{"account_id":9007040,"reputation":303,"user_id":11934617,"display_name":"Pete Ythong"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695798591,"creation_date":1695798591,"answer_id":77185300,"question_id":77182125,"body_markdown":"As @pmdba mentioned my Problem was the size limitation. Clob limit with streaming function are 32kb resolves to this error.\r\n\r\n\r\njava.lang.ArrayIndexOutOfBoundsException: Index 32768 out of bounds for length 32768\r\n\r\nat oracle.sql.CharacterSet.convertJavaCharsToAL32UTF8Bytes(CharacterSet.java:1895)\r\nat oracle.jdbc.driver.DBConversion.javaCharsToCHARBytes(DBConversion.java:832)\r\nat oracle.jdbc.driver.DBConversion.javaCharsToCHARBytes(DBConversion.java:766)","title":"Can&#39;t query stored procedure with NamedParameterJdbcTemplate to submit CLOB","body":"<p>As @pmdba mentioned my Problem was the size limitation. Clob limit with streaming function are 32kb resolves to this error.</p>\n<p>java.lang.ArrayIndexOutOfBoundsException: Index 32768 out of bounds for length 32768</p>\n<p>at oracle.sql.CharacterSet.convertJavaCharsToAL32UTF8Bytes(CharacterSet.java:1895)\nat oracle.jdbc.driver.DBConversion.javaCharsToCHARBytes(DBConversion.java:832)\nat oracle.jdbc.driver.DBConversion.javaCharsToCHARBytes(DBConversion.java:766)</p>\n"}],"owner":{"account_id":9007040,"reputation":303,"user_id":11934617,"display_name":"Pete Ythong"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1695798591,"creation_date":1695748238,"question_id":77182125,"body_markdown":"I fire a SQL statement to start a procedure with only one input Parameter, a clob. But it doesn&#39;t work, and I don&#39;t know why.\r\n\r\nQuery:\r\n\r\n```\r\nprivate static final String ADD_DOCUMENTS =\r\n      &quot;select * from table(Test.test_clob(in_document_clob =&gt; :cblob))&quot;;\r\n```\r\n\r\nCalling the query:\r\n```\r\npublic void addDocuments(InputStream data, String name) throws IOException, SQLException {\r\n\r\n    byte[] byteArray = IOUtils.toByteArray(data);\r\n\r\n    SqlParameterSource paramSource = new MapSqlParameterSource().addValue(&quot;cblob&quot;,\r\n            new SqlLobValue(new ByteArrayInputStream(byteArray), byteArray.length, new DefaultLobHandler()), OracleTypes.CLOB);\r\n\r\n    final List&lt;SomeResponse&gt; query = this.template.query(ADD_DOCUMENTS, paramSource, new SomeResponseMapper(true));\r\n   \r\n  }\r\n```\r\n\r\nI know so far, it works with strings as input, but not with clob&#39;s.\r\n\r\nI&#39;m getting this error:\r\n\r\n&gt; java.lang.ArrayIndexOutOfBoundsException: Index 32768 out of bounds for length 32768\r\n&gt;\r\n&gt; at oracle.sql.CharacterSet.convertJavaCharsToAL32UTF8Bytes(CharacterSet.java:1895)  \r\n&gt; at oracle.jdbc.driver.DBConversion.javaCharsToCHARBytes(DBConversion.java:832)  \r\n&gt; at oracle.jdbc.driver.DBConversion.javaCharsToCHARBytes(DBConversion.java:766)\r\n\r\nWhen I try to call SqlLobValue without length param, I&#39;m getting this error:\r\n\r\n&gt; java.lang.IllegalArgumentException: Content type [[B] not supported for CLOB columns\r\n&gt;\r\n&gt; at org.springframework.jdbc.core.support.SqlLobValue.setTypeValue(SqlLobValue.java:204)  \r\n&gt; at org.springframework.jdbc.core.StatementCreatorUtils.setValue(Statement CreatorUtils.java:292)  \r\n\r\n\r\nMany thanks for your help.\r\n\r\n\r\nI tried to call when i try to call SqlLobValue without length param.\r\n","title":"Can&#39;t query stored procedure with NamedParameterJdbcTemplate to submit CLOB","body":"<p>I fire a SQL statement to start a procedure with only one input Parameter, a clob. But it doesn't work, and I don't know why.</p>\n<p>Query:</p>\n<pre><code>private static final String ADD_DOCUMENTS =\n      &quot;select * from table(Test.test_clob(in_document_clob =&gt; :cblob))&quot;;\n</code></pre>\n<p>Calling the query:</p>\n<pre><code>public void addDocuments(InputStream data, String name) throws IOException, SQLException {\n\n    byte[] byteArray = IOUtils.toByteArray(data);\n\n    SqlParameterSource paramSource = new MapSqlParameterSource().addValue(&quot;cblob&quot;,\n            new SqlLobValue(new ByteArrayInputStream(byteArray), byteArray.length, new DefaultLobHandler()), OracleTypes.CLOB);\n\n    final List&lt;SomeResponse&gt; query = this.template.query(ADD_DOCUMENTS, paramSource, new SomeResponseMapper(true));\n   \n  }\n</code></pre>\n<p>I know so far, it works with strings as input, but not with clob's.</p>\n<p>I'm getting this error:</p>\n<blockquote>\n<p>java.lang.ArrayIndexOutOfBoundsException: Index 32768 out of bounds for length 32768</p>\n<p>at oracle.sql.CharacterSet.convertJavaCharsToAL32UTF8Bytes(CharacterSet.java:1895)<br />\nat oracle.jdbc.driver.DBConversion.javaCharsToCHARBytes(DBConversion.java:832)<br />\nat oracle.jdbc.driver.DBConversion.javaCharsToCHARBytes(DBConversion.java:766)</p>\n</blockquote>\n<p>When I try to call SqlLobValue without length param, I'm getting this error:</p>\n<blockquote>\n<p>java.lang.IllegalArgumentException: Content type [[B] not supported for CLOB columns</p>\n<p>at org.springframework.jdbc.core.support.SqlLobValue.setTypeValue(SqlLobValue.java:204)<br />\nat org.springframework.jdbc.core.StatementCreatorUtils.setValue(Statement CreatorUtils.java:292)</p>\n</blockquote>\n<p>Many thanks for your help.</p>\n<p>I tried to call when i try to call SqlLobValue without length param.</p>\n"},{"tags":["java","spring","rest","tomcat"],"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1695724198,"post_id":77179148,"comment_id":136059664,"body_markdown":"Vague title. Rewrite no summarize your specific technical issue.","body":"Vague title. Rewrite no summarize your specific technical issue."},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1695725330,"post_id":77179148,"comment_id":136059916,"body_markdown":"There&#39;s a section Usage from the reference above.","body":"There&#39;s a section Usage from the reference above."},{"owner":{"account_id":8565752,"reputation":615,"user_id":6418277,"accept_rate":81,"display_name":"Gaetan L."},"score":0,"creation_date":1695726553,"post_id":77179148,"comment_id":136060132,"body_markdown":"@Roman C Yes even when I follow it I get a 404.","body":"@Roman C Yes even when I follow it I get a 404."},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1695729674,"post_id":77179148,"comment_id":136060767,"body_markdown":"@GaetanL. The 404 error code is a common for web application. You should figure out a real case.","body":"@GaetanL. The 404 error code is a common for web application. You should figure out a real case."},{"owner":{"account_id":8565752,"reputation":615,"user_id":6418277,"accept_rate":81,"display_name":"Gaetan L."},"score":0,"creation_date":1695734666,"post_id":77179148,"comment_id":136061898,"body_markdown":"@Roman C Is there a way for me to know what URLs have been exposed (is that the correct term?) by the applicatin that is running?","body":"@Roman C Is there a way for me to know what URLs have been exposed (is that the correct term?) by the applicatin that is running?"},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1695734917,"post_id":77179148,"comment_id":136061958,"body_markdown":"@GaetanL. No, in Spring you should figure out it yourself from the controller configuration.","body":"@GaetanL. No, in Spring you should figure out it yourself from the controller configuration."}],"answers":[{"comments":[{"owner":{"account_id":8565752,"reputation":615,"user_id":6418277,"accept_rate":81,"display_name":"Gaetan L."},"score":0,"creation_date":1695886306,"post_id":77184319,"comment_id":136084262,"body_markdown":"And ifyou try to access curl http://localhost:8080/api/user/1, what do you get? Cause I get a 404.","body":"And ifyou try to access curl <a href=\"http://localhost:8080/api/user/1\" rel=\"nofollow noreferrer\">localhost:8080/api/user/1</a>, what do you get? Cause I get a 404."}],"tags":[],"owner":{"account_id":23576127,"reputation":1,"user_id":17615764,"display_name":"wangjinguang"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695780824,"creation_date":1695780824,"answer_id":77184319,"question_id":77179148,"body_markdown":"I downloaded that project and tried to run it with AppMain, and the result was the same as yours. However, if you execute **java -jar target/restdrill.jar** from the command line, it can be accessed correctly. You can try it out.","title":"How to access URL defined with @RequestMapping","body":"<p>I downloaded that project and tried to run it with AppMain, and the result was the same as yours. However, if you execute <strong>java -jar target/restdrill.jar</strong> from the command line, it can be accessed correctly. You can try it out.</p>\n"},{"comments":[{"owner":{"account_id":8565752,"reputation":615,"user_id":6418277,"accept_rate":81,"display_name":"Gaetan L."},"score":0,"creation_date":1695886484,"post_id":77184601,"comment_id":136084297,"body_markdown":"Why? If I leave the code as is, shouldn&#39;t I be able to reach http://localhost:8080/api/user/ ? Because all I get is 404s","body":"Why? If I leave the code as is, shouldn&#39;t I be able to reach <a href=\"http://localhost:8080/api/user/\" rel=\"nofollow noreferrer\">localhost:8080/api/user</a> ? Because all I get is 404s"},{"owner":{"account_id":8565752,"reputation":615,"user_id":6418277,"accept_rate":81,"display_name":"Gaetan L."},"score":0,"creation_date":1695886748,"post_id":77184601,"comment_id":136084337,"body_markdown":"I tried your two methods, and I still get a 404 when calling /api/user/getUsers","body":"I tried your two methods, and I still get a 404 when calling /api/user/getUsers"}],"tags":[],"owner":{"account_id":23351413,"reputation":40,"user_id":17424919,"display_name":"great-jin"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695793672,"creation_date":1695787107,"answer_id":77184601,"question_id":77179148,"body_markdown":"I check the GitHub link that you post, the `/api/user` is defind in `UserAPIController`, you can comprehend it with all api prefix.\r\n\r\nThe method of `getUsers` that only defind the type to be `RequestMethod.GET`,\r\n consider to change to like this:\r\n\r\n```java\r\n@RequestMapping(value= &quot;getUsers&quot;, method = RequestMethod.GET)\r\npublic ResponseEntity&lt;List&lt;User&gt;&gt; getUsers() {\r\n\tSystem.out.println(&quot;Fetching all Users&quot;);\r\n\treturn new ResponseEntity&lt;List&lt;User&gt;&gt;(userRepo.getUsers(), HttpStatus.OK);\r\n}\r\n```\r\n\r\nor like this:\r\n```java\r\n@GetMapping(&quot;getUsers&quot;)\r\npublic ResponseEntity&lt;List&lt;User&gt;&gt; getUsers() {\r\n\tSystem.out.println(&quot;Fetching all Users&quot;);\r\n\treturn new ResponseEntity&lt;List&lt;User&gt;&gt;(userRepo.getUsers(), HttpStatus.OK);\r\n}\r\n```\r\n\r\nthen you can request to `/api/user/getUsers`","title":"How to access URL defined with @RequestMapping","body":"<p>I check the GitHub link that you post, the <code>/api/user</code> is defind in <code>UserAPIController</code>, you can comprehend it with all api prefix.</p>\n<p>The method of <code>getUsers</code> that only defind the type to be <code>RequestMethod.GET</code>,\nconsider to change to like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RequestMapping(value= &quot;getUsers&quot;, method = RequestMethod.GET)\npublic ResponseEntity&lt;List&lt;User&gt;&gt; getUsers() {\n    System.out.println(&quot;Fetching all Users&quot;);\n    return new ResponseEntity&lt;List&lt;User&gt;&gt;(userRepo.getUsers(), HttpStatus.OK);\n}\n</code></pre>\n<p>or like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(&quot;getUsers&quot;)\npublic ResponseEntity&lt;List&lt;User&gt;&gt; getUsers() {\n    System.out.println(&quot;Fetching all Users&quot;);\n    return new ResponseEntity&lt;List&lt;User&gt;&gt;(userRepo.getUsers(), HttpStatus.OK);\n}\n</code></pre>\n<p>then you can request to <code>/api/user/getUsers</code></p>\n"}],"owner":{"account_id":8565752,"reputation":615,"user_id":6418277,"accept_rate":81,"display_name":"Gaetan L."},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":2,"score":-3,"last_activity_date":1695798483,"creation_date":1695724098,"question_id":77179148,"body_markdown":"I want to learn how to program an API in Java/Spring so I downloaded this example on github: https://github.com/bobbrady/spring-rest-drill-bootless.\r\n\r\nThe app seems to run correctly, however every request I send to /api/user returns an error 404.\r\n\r\nFor example I&#39;m trying to access the `getUsers()` method, so from what I understand, in `UserApiController` there is an annotation `@RequestMapping(&quot;/api/user&quot;)`. So I&#39;m guessing that&#39;s the base URL, getUsers only specifies a method (get) and no mapping, so I assume I&#39;m supposed to send a GET request to `http://localhost:8080/api/user` with no parameters? But when I do so (in a browser or using Postman), a 404 is returned.","title":"How to access URL defined with @RequestMapping","body":"<p>I want to learn how to program an API in Java/Spring so I downloaded this example on github: <a href=\"https://github.com/bobbrady/spring-rest-drill-bootless\" rel=\"nofollow noreferrer\">https://github.com/bobbrady/spring-rest-drill-bootless</a>.</p>\n<p>The app seems to run correctly, however every request I send to /api/user returns an error 404.</p>\n<p>For example I'm trying to access the <code>getUsers()</code> method, so from what I understand, in <code>UserApiController</code> there is an annotation <code>@RequestMapping(&quot;/api/user&quot;)</code>. So I'm guessing that's the base URL, getUsers only specifies a method (get) and no mapping, so I assume I'm supposed to send a GET request to <code>http://localhost:8080/api/user</code> with no parameters? But when I do so (in a browser or using Postman), a 404 is returned.</p>\n"},{"tags":["java","java-8"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":5,"creation_date":1695426111,"post_id":77161124,"comment_id":136027633,"body_markdown":"`Consumer&lt;Mathod&gt; nonStaticConsumer = Mathod::nonStaticMethod;`","body":"<code>Consumer&lt;Mathod&gt; nonStaticConsumer = Mathod::nonStaticMethod;</code>"},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":4,"creation_date":1695426357,"post_id":77161124,"comment_id":136027654,"body_markdown":"`() -&gt;` syntax is used for defining _lambda expressions_, `::` is used for defining _method references_. Don&#39;t mix them.","body":"<code>() -&gt;</code> syntax is used for defining <i>lambda expressions</i>, <code>::</code> is used for defining <i>method references</i>. Don&#39;t mix them."},{"owner":{"account_id":4695455,"reputation":71,"user_id":3800427,"display_name":"Juicy Jay"},"score":0,"creation_date":1695428858,"post_id":77161124,"comment_id":136027803,"body_markdown":"In case of second approach I still see an error not a statement, I have updated the description above. Please help me understand.","body":"In case of second approach I still see an error not a statement, I have updated the description above. Please help me understand."}],"answers":[{"comments":[{"owner":{"account_id":4695455,"reputation":71,"user_id":3800427,"display_name":"Juicy Jay"},"score":0,"creation_date":1695429123,"post_id":77161187,"comment_id":136027824,"body_markdown":"so \nMathod mathod = new Mathod();\nmathod.nonStaticMethod(); and mathod::nonstaticMethod; are not the same.","body":"so  Mathod mathod = new Mathod(); mathod.nonStaticMethod(); and mathod::nonstaticMethod; are not the same."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":2,"creation_date":1695430249,"post_id":77161187,"comment_id":136027889,"body_markdown":"No. The first one is a cake. The second one is a recipe. You can&#39;t eat it - but given the recipe, you can make one cake. Or 5. Or 20. Or none. Whereas with the first, you have exactly one cake. You can&#39;t make more, you can&#39;t choose to make less, as it&#39;s already made.","body":"No. The first one is a cake. The second one is a recipe. You can&#39;t eat it - but given the recipe, you can make one cake. Or 5. Or 20. Or none. Whereas with the first, you have exactly one cake. You can&#39;t make more, you can&#39;t choose to make less, as it&#39;s already made."}],"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1695427593,"creation_date":1695427593,"answer_id":77161187,"question_id":77161124,"body_markdown":"```\r\nConsumer nonStaticConsumer = () -&gt; Mathod::nonStaticMethod;\r\n```\r\n\r\nHere you&#39;ve mixed syntax.\r\n\r\n```\r\nType::someMethod\r\n```\r\n\r\nis a different way of writing `x -&gt; Type.someMethod(x)` where the `x` grows or shrinks to account for the # of arguments required / that `someMethod` has, e.g. if it&#39;s `public void someMethod(int x, String a) {}`, `Type::someMethod` is short for `(x, a) -&gt; Type.someMethod(x, a)`.\r\n\r\nYou&#39;ve _also_ used the lambda-syntax arrow notation, so you&#39;ve combined the two.\r\n\r\n`() -&gt; Mathod::nonStaticMethod` thus says: Define a function. This function takes no arguments, and returns the result of evaluating `Mathod::nonStaticMethod`, which is itself a function (so, a function that takes in no arguments and returns a different function).\r\n\r\nAs with all lambdas (`-&gt;`) and method references (`::`), the compiler must take clues from the context to know which functional interface to adapt the lambda/MR to. In this case, you&#39;re providing a Consumer, and Consumers take in 1 argument and return nothing (`void`), hence, the compiler is taking the context clue of &#39;the thing to the right of the arrow is to be treated as `void`), which, naturally, isn&#39;t a functional interface. That explains the error &#39;void is not a functional Interface&#39;.\r\n\r\nWhat you presumably want is either one of these:\r\n\r\n```\r\nConsumer&lt;Mathod&gt; nonStaticConsumer = m -&gt; m.nonStaticMethod();\r\nConsumer&lt;Mathod&gt; nonStaticConsumer = Mathod::nonStaticMethod();\r\n```\r\n\r\nEither one works fine.\r\n","title":"Consumer Interface in Java","body":"<pre><code>Consumer nonStaticConsumer = () -&gt; Mathod::nonStaticMethod;\n</code></pre>\n<p>Here you've mixed syntax.</p>\n<pre><code>Type::someMethod\n</code></pre>\n<p>is a different way of writing <code>x -&gt; Type.someMethod(x)</code> where the <code>x</code> grows or shrinks to account for the # of arguments required / that <code>someMethod</code> has, e.g. if it's <code>public void someMethod(int x, String a) {}</code>, <code>Type::someMethod</code> is short for <code>(x, a) -&gt; Type.someMethod(x, a)</code>.</p>\n<p>You've <em>also</em> used the lambda-syntax arrow notation, so you've combined the two.</p>\n<p><code>() -&gt; Mathod::nonStaticMethod</code> thus says: Define a function. This function takes no arguments, and returns the result of evaluating <code>Mathod::nonStaticMethod</code>, which is itself a function (so, a function that takes in no arguments and returns a different function).</p>\n<p>As with all lambdas (<code>-&gt;</code>) and method references (<code>::</code>), the compiler must take clues from the context to know which functional interface to adapt the lambda/MR to. In this case, you're providing a Consumer, and Consumers take in 1 argument and return nothing (<code>void</code>), hence, the compiler is taking the context clue of 'the thing to the right of the arrow is to be treated as <code>void</code>), which, naturally, isn't a functional interface. That explains the error 'void is not a functional Interface'.</p>\n<p>What you presumably want is either one of these:</p>\n<pre><code>Consumer&lt;Mathod&gt; nonStaticConsumer = m -&gt; m.nonStaticMethod();\nConsumer&lt;Mathod&gt; nonStaticConsumer = Mathod::nonStaticMethod();\n</code></pre>\n<p>Either one works fine.</p>\n"},{"tags":[],"owner":{"account_id":370994,"reputation":35154,"user_id":719263,"accept_rate":100,"display_name":"Jean-Baptiste Yun&#232;s"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695797478,"creation_date":1695648580,"answer_id":77173075,"question_id":77161124,"body_markdown":"There are several problems with your code.\r\n\r\n1. missing import\r\n2. `Consumer` is a generic class, you need to instanciate that generic.\r\nWhat could be the type argument of your `Consumer`? As you wanted to represent a call to instance method `nonStaticMethod()` then surely the type must be `Mathod`. So at least write `Consumer&lt;Mathod&gt;...`.\r\n3. When you want to use a function to represent a code to be catched by a functional interface you need either a lambda-expression or a method reference.\r\n\r\n    1. **lambda-expression**. `Consumer&lt;E&gt;` interface has the sole abstract method `void accept(E e)`. So you need a lambda that takes one argument and returns nothing (`void`). Something like `x -&gt; something_returning_void`. As you want to call `nonStaticMethod` you want `x -&gt; x.nonStaticMethod()`.\r\n    2. **method reference**. As `x -&gt; x.nonStaticMethod()` is a lambda that only call a method you can just use `Mathod::nonStaticMethod` (instance method reference).\r\n\r\n\r\nFull program could be (with calls):\r\n```\r\nimport java.util.function.*;\r\n\r\npublic class Mathod {\r\n\r\n  public static void taskDifferentiator() {\r\n    System.out.println(&quot;Static Method...&quot;);\r\n  }\r\n\r\n  public void nonStaticMethod() {\r\n    System.out.println(&quot;Non static method is called...&quot;);\r\n  }\r\n\r\n  public static void main(String args[]) {\r\n\r\n    Mathod m = new Mathod();\r\n\r\n    Consumer&lt;Mathod&gt; nonStaticConsumer1 = x -&gt; x.nonStaticMethod();\r\n    nonStaticConsumer1.accept(m);\r\n    Consumer&lt;Mathod&gt; nonStaticConsumer = Mathod::nonStaticMethod;\r\n    nonStaticConsumer.accept(m);\r\n    System.out.println(&quot;End of the program..&quot;);\r\n  }\r\n}\r\n```","title":"Consumer Interface in Java","body":"<p>There are several problems with your code.</p>\n<ol>\n<li><p>missing import</p>\n</li>\n<li><p><code>Consumer</code> is a generic class, you need to instanciate that generic.\nWhat could be the type argument of your <code>Consumer</code>? As you wanted to represent a call to instance method <code>nonStaticMethod()</code> then surely the type must be <code>Mathod</code>. So at least write <code>Consumer&lt;Mathod&gt;...</code>.</p>\n</li>\n<li><p>When you want to use a function to represent a code to be catched by a functional interface you need either a lambda-expression or a method reference.</p>\n<ol>\n<li><strong>lambda-expression</strong>. <code>Consumer&lt;E&gt;</code> interface has the sole abstract method <code>void accept(E e)</code>. So you need a lambda that takes one argument and returns nothing (<code>void</code>). Something like <code>x -&gt; something_returning_void</code>. As you want to call <code>nonStaticMethod</code> you want <code>x -&gt; x.nonStaticMethod()</code>.</li>\n<li><strong>method reference</strong>. As <code>x -&gt; x.nonStaticMethod()</code> is a lambda that only call a method you can just use <code>Mathod::nonStaticMethod</code> (instance method reference).</li>\n</ol>\n</li>\n</ol>\n<p>Full program could be (with calls):</p>\n<pre><code>import java.util.function.*;\n\npublic class Mathod {\n\n  public static void taskDifferentiator() {\n    System.out.println(&quot;Static Method...&quot;);\n  }\n\n  public void nonStaticMethod() {\n    System.out.println(&quot;Non static method is called...&quot;);\n  }\n\n  public static void main(String args[]) {\n\n    Mathod m = new Mathod();\n\n    Consumer&lt;Mathod&gt; nonStaticConsumer1 = x -&gt; x.nonStaticMethod();\n    nonStaticConsumer1.accept(m);\n    Consumer&lt;Mathod&gt; nonStaticConsumer = Mathod::nonStaticMethod;\n    nonStaticConsumer.accept(m);\n    System.out.println(&quot;End of the program..&quot;);\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":4695455,"reputation":71,"user_id":3800427,"display_name":"Juicy Jay"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695797614,"creation_date":1695425914,"question_id":77161124,"body_markdown":"I am getting an warning at  `Mathod::nonStaticMethod`, &quot;`void is not a functional Interface`.\r\n\r\n`Mathod::nonStaticMethod;` shouldn&#39;t this work, is this not a method reference?\r\n\r\n```\r\npublic class Mathod {\r\n  public static void taskDifferentiator() {\r\n    System.out.println(&quot;Static Method...&quot;);\r\n  }\r\n  public void nonStaticMethod() {\r\n    System.out.println(&quot;Non static method is called...&quot;);\r\n  }\r\n  public static void main(String args[]) {\r\n    Consumer nonStaticConsumer = () -&gt; Mathod::nonStaticMethod;\r\n    System.out.println(&quot;End of the program..&quot;);\r\n  }\r\n}\r\n```\r\n\r\nIf I change the program below to, what&#39;s the issue with the line below `mathod::nonStaticMethod;`\r\n \r\n```\r\npublic class Mathod {\r\n  public void nonStaticMethod() {\r\n    System.out.println(&quot;Non static method is called...&quot;);\r\n  }\r\n  public static void main(String args[]) {\r\n    Mathod mathod = new Mathod();\r\n    mathod::nonStaticMethod; Error: Not a statement\r\n    System.out.println(&quot;End of the program..&quot;);\r\n  }\r\n}\r\n```\r\n\r\nSo  `Mathod mathod = new Mathod();\r\nmathod.nonStaticMethod();`\r\n and\r\n `mathod::nonstaticMethod;` are not the same. Am I correct?","title":"Consumer Interface in Java","body":"<p>I am getting an warning at  <code>Mathod::nonStaticMethod</code>, &quot;<code>void is not a functional Interface</code>.</p>\n<p><code>Mathod::nonStaticMethod;</code> shouldn't this work, is this not a method reference?</p>\n<pre><code>public class Mathod {\n  public static void taskDifferentiator() {\n    System.out.println(&quot;Static Method...&quot;);\n  }\n  public void nonStaticMethod() {\n    System.out.println(&quot;Non static method is called...&quot;);\n  }\n  public static void main(String args[]) {\n    Consumer nonStaticConsumer = () -&gt; Mathod::nonStaticMethod;\n    System.out.println(&quot;End of the program..&quot;);\n  }\n}\n</code></pre>\n<p>If I change the program below to, what's the issue with the line below <code>mathod::nonStaticMethod;</code></p>\n<pre><code>public class Mathod {\n  public void nonStaticMethod() {\n    System.out.println(&quot;Non static method is called...&quot;);\n  }\n  public static void main(String args[]) {\n    Mathod mathod = new Mathod();\n    mathod::nonStaticMethod; Error: Not a statement\n    System.out.println(&quot;End of the program..&quot;);\n  }\n}\n</code></pre>\n<p>So  <code>Mathod mathod = new Mathod(); mathod.nonStaticMethod();</code>\nand\n<code>mathod::nonstaticMethod;</code> are not the same. Am I correct?</p>\n"},{"tags":["java","hibernate","spring","maven-2"],"answers":[{"comments":[{"owner":{"account_id":115373,"reputation":2581,"user_id":302988,"accept_rate":91,"display_name":"John"},"score":0,"creation_date":1272887207,"post_id":2757759,"comment_id":2789223,"body_markdown":"Do you have a suggestion for what I should google to find out how to use Maven to select the spring properties as you suggested?","body":"Do you have a suggestion for what I should google to find out how to use Maven to select the spring properties as you suggested?"},{"owner":{"account_id":49860,"reputation":10595,"user_id":148608,"display_name":"Espen"},"score":0,"creation_date":1272887550,"post_id":2757759,"comment_id":2789256,"body_markdown":"@John: Personally, I prefer Ivy and Ant, but the principals should be the same. Dependent on which environment I&#39;m building for, I copy different properties file and rename it to for example application.properties. Then my Spring application context that imports the PropertyPlaceholderConfigurer only knows about application.properties. If this is copied from test.properties or production.properties is unkown for the Spring container. It&#39;s only my test contexts that knows about the test properties for my JUnit tests.","body":"@John: Personally, I prefer Ivy and Ant, but the principals should be the same. Dependent on which environment I&#39;m building for, I copy different properties file and rename it to for example application.properties. Then my Spring application context that imports the PropertyPlaceholderConfigurer only knows about application.properties. If this is copied from test.properties or production.properties is unkown for the Spring container. It&#39;s only my test contexts that knows about the test properties for my JUnit tests."},{"owner":{"account_id":38490,"reputation":8552,"user_id":110478,"accept_rate":63,"display_name":"Pablojim"},"score":1,"creation_date":1272912297,"post_id":2757759,"comment_id":2792197,"body_markdown":"-1 - building seperate instances of your deployable for each environment is a bad idea. It doesn&#39;t scale well and you will end up having to crack open war to see which properties are included. See my answer here for an alternative approach: http://stackoverflow.com/questions/1311360/property-placeholder-location-from-another-property/1312341#1312341","body":"-1 - building seperate instances of your deployable for each environment is a bad idea. It doesn&#39;t scale well and you will end up having to crack open war to see which properties are included. See my answer here for an alternative approach: <a href=\"http://stackoverflow.com/questions/1311360/property-placeholder-location-from-another-property/1312341#1312341\" title=\"property placeholder location from another property\">stackoverflow.com/questions/1311360/&hellip;</a>"},{"owner":{"account_id":49860,"reputation":10595,"user_id":148608,"display_name":"Espen"},"score":0,"creation_date":1272913504,"post_id":2757759,"comment_id":2792333,"body_markdown":"@Pablojim: Why should I open a war file to see my properties? No, I prefer to have the system&#39;s properties in a separate folder. And then configure the web container to add that folder to the classpath. \n\nThen I end up with just one environment specific properties file instead of many and the potential situation of using wrong file.\n\nRelated to security, it can be nice to limit the information available for each environment. That each environment only knows about its own settings.","body":"@Pablojim: Why should I open a war file to see my properties? No, I prefer to have the system&#39;s properties in a separate folder. And then configure the web container to add that folder to the classpath.   Then I end up with just one environment specific properties file instead of many and the potential situation of using wrong file.  Related to security, it can be nice to limit the information available for each environment. That each environment only knows about its own settings."},{"owner":{"account_id":38490,"reputation":8552,"user_id":110478,"accept_rate":63,"display_name":"Pablojim"},"score":0,"creation_date":1273075795,"post_id":2757759,"comment_id":2808816,"body_markdown":"I agree with you comment above. But don&#39;t understand why then you have this in your answer &quot;You should rather use Maven to select which Spring properties file to use depending on which environment you&#39;re building for.&quot; - a seperate build process for each environment is a smell.","body":"I agree with you comment above. But don&#39;t understand why then you have this in your answer &quot;You should rather use Maven to select which Spring properties file to use depending on which environment you&#39;re building for.&quot; - a seperate build process for each environment is a smell."}],"tags":[],"owner":{"account_id":49860,"reputation":10595,"user_id":148608,"display_name":"Espen"},"comment_count":5,"down_vote_count":1,"up_vote_count":3,"is_accepted":true,"score":2,"last_activity_date":1272886971,"creation_date":1272886971,"answer_id":2757759,"question_id":2757721,"body_markdown":"You should rather use Maven to select which Spring properties file to use depending on which environment you&#39;re building for.\r\n\r\nWhen you&#39;re testing in your IDE, you should just start the Spring container from the test without using Maven for anything else than managing your dependencies.","title":"PropertyPlaceholderConfigurer vs Filters -- Spring Beans","body":"<p>You should rather use Maven to select which Spring properties file to use depending on which environment you're building for.</p>\n\n<p>When you're testing in your IDE, you should just start the Spring container from the test without using Maven for anything else than managing your dependencies.</p>\n"},{"comments":[{"owner":{"account_id":49860,"reputation":10595,"user_id":148608,"display_name":"Espen"},"score":0,"creation_date":1273078428,"post_id":2768182,"comment_id":2809173,"body_markdown":"I prefer to use Spring&#39;s &lt;util:properties&gt; element, since I&#39;m not a huge fan of global properties.","body":"I prefer to use Spring&#39;s &lt;util:properties&gt; element, since I&#39;m not a huge fan of global properties."}],"tags":[],"owner":{"account_id":26957,"reputation":564381,"user_id":70604,"display_name":"Pascal Thivent"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1272999737,"creation_date":1272999737,"answer_id":2768182,"question_id":2757721,"body_markdown":"For the record, here is what the author of the blog series the OP is following wrote in  [this comment][1]:\r\n\r\n&gt; I used to be a big fan of Spring’s\r\n&gt; `PropertyPlaceholderConfigurer` but ever\r\n&gt; since I started using maven I don’t\r\n&gt; find it as useful as maven’s filters,\r\n&gt; using either a filters file as\r\n&gt; explained here, or by having multiple\r\n&gt; profiles in the pom for the different\r\n&gt; deployment layers with each profile\r\n&gt; specifying the properties.\r\n&gt; \r\n&gt; The biggest gripe I have with the\r\n&gt; `PropertyPlaceholderConfigurer` is that\r\n&gt; you can only have one\r\n&gt; `PropertyPlaceholderConfigurer` bean.\r\n&gt; And it’s not well documented.\r\n&gt; \r\n&gt; With maven’s filter files you can have\r\n&gt; as many as you like.\r\n&gt; \r\n&gt; The other reason I prefer maven’s\r\n&gt; filters is that with them you can do a\r\n&gt; ‘mvn package’ and then poke around in\r\n&gt; the target directory and eyeball the\r\n&gt; filtered config files and see what it\r\n&gt; did. With Spring’s\r\n&gt; `PropertyPlaceholderConfigurer` you\r\n&gt; don’t find out what’s been substituted\r\n&gt; until the app is started.\r\n\r\nI second this opinion and prefer the filter approach over using the `PropertyPlaceholderConfigurer` and the Antrun plugin to copy say `test.properties` into `application.properties` when running my tests. And using filtered resources is well supported by all major IDEs (Eclipse, IntelliJ, NetBeans) so I don&#39;t see why I should not use it.\r\n\r\n  [1]: http://www.mysticcoders.com/blog/2009/03/09/5-days-of-wicket-day-1/#comment-1313","title":"PropertyPlaceholderConfigurer vs Filters -- Spring Beans","body":"<p>For the record, here is what the author of the blog series the OP is following wrote in  <a href=\"http://www.mysticcoders.com/blog/2009/03/09/5-days-of-wicket-day-1/#comment-1313\" rel=\"nofollow noreferrer\">this comment</a>:</p>\n\n<blockquote>\n  <p>I used to be a big fan of Spring’s\n  <code>PropertyPlaceholderConfigurer</code> but ever\n  since I started using maven I don’t\n  find it as useful as maven’s filters,\n  using either a filters file as\n  explained here, or by having multiple\n  profiles in the pom for the different\n  deployment layers with each profile\n  specifying the properties.</p>\n  \n  <p>The biggest gripe I have with the\n  <code>PropertyPlaceholderConfigurer</code> is that\n  you can only have one\n  <code>PropertyPlaceholderConfigurer</code> bean.\n  And it’s not well documented.</p>\n  \n  <p>With maven’s filter files you can have\n  as many as you like.</p>\n  \n  <p>The other reason I prefer maven’s\n  filters is that with them you can do a\n  ‘mvn package’ and then poke around in\n  the target directory and eyeball the\n  filtered config files and see what it\n  did. With Spring’s\n  <code>PropertyPlaceholderConfigurer</code> you\n  don’t find out what’s been substituted\n  until the app is started.</p>\n</blockquote>\n\n<p>I second this opinion and prefer the filter approach over using the <code>PropertyPlaceholderConfigurer</code> and the Antrun plugin to copy say <code>test.properties</code> into <code>application.properties</code> when running my tests. And using filtered resources is well supported by all major IDEs (Eclipse, IntelliJ, NetBeans) so I don't see why I should not use it.</p>\n"},{"tags":[],"owner":{"account_id":29391455,"reputation":1,"user_id":22519707,"display_name":"Fabiniao"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695796697,"creation_date":1695561266,"answer_id":77167249,"question_id":2757721,"body_markdown":"If you use this code:\r\n\r\n```xml\r\n&lt;context:property-placeholder&gt;&lt;/context:property-placeholder&gt;\r\n```\r\n\r\nBefore this code:\r\n\r\n```xml\r\n&lt;context:property-placeholder location=&quot;classpath:jdbc.properties&quot;\r\n&lt;/context:property-placeholder&gt;\r\n```\r\n\r\nYou will get:\r\n\r\n```\r\nCaused by: java.lang.IllegalArgumentException: Could not resolve\r\nplaceholder &#39;jdbc.driver&#39; in value &quot;${jdbc.driver}&quot;\r\n```\r\n\r\nThe statement include you use: \r\n\r\n```xml\r\n&lt;import &gt;&lt;/import&gt;\r\n```\r\n\r\nDelete it:\r\n\r\n```xml\r\n&lt;context:property-placeholder&gt;&lt;/context:property-placeholder&gt;\r\n```\r\n\r\n","title":"PropertyPlaceholderConfigurer vs Filters -- Spring Beans","body":"<p>If you use this code:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;context:property-placeholder&gt;&lt;/context:property-placeholder&gt;\n</code></pre>\n<p>Before this code:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;context:property-placeholder location=&quot;classpath:jdbc.properties&quot;\n&lt;/context:property-placeholder&gt;\n</code></pre>\n<p>You will get:</p>\n<pre><code>Caused by: java.lang.IllegalArgumentException: Could not resolve\nplaceholder 'jdbc.driver' in value &quot;${jdbc.driver}&quot;\n</code></pre>\n<p>The statement include you use:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;import &gt;&lt;/import&gt;\n</code></pre>\n<p>Delete it:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;context:property-placeholder&gt;&lt;/context:property-placeholder&gt;\n</code></pre>\n"}],"owner":{"account_id":115373,"reputation":2581,"user_id":302988,"accept_rate":91,"display_name":"John"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3512,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":2757759,"answer_count":3,"score":2,"last_activity_date":1695796697,"creation_date":1272886610,"question_id":2757721,"body_markdown":"I&#39;ve got a question regarding the difference between PropertyPlaceholderConfigurer (org.springframework.beans.factory.config.PropertyPlaceholderConfigurer) and normal filters defined in my pom.xml.\r\n\r\nI&#39;ve been looking at examples, and it seems that even though filters are defined and marked to be active by default in the pom.xml they still make use of PropertyPlaceholderConfigurer in Spring&#39;s applicationContext.xml.\r\n\r\nThis means that the pom.xml has a reference to a filter-LOCAL.properties while applicationContext.xml has a reference to application.properties and they both contain the same settings.\r\n\r\nWhy is that? Is that how it is supposed to be done? I&#39;m able to run the goal mvn jetty:run without the application.properties present, but if I add settings to the application.properties that differ from the filter-LOCAL.properties they don&#39;t seem to override.\r\n\r\nHere&#39;s an example of what I mean:\r\n\r\n**pom.xml**\r\n&lt;pre&gt;\r\n    &amp;lt;profiles&gt;  \r\n\t\t&amp;lt;profile&gt;  \r\n\t\t\t&amp;lt;id&gt;LOCAL&lt;/id&gt;  \r\n\t\t\t&amp;lt;activation&gt;  \r\n\t\t\t\t&amp;lt;activeByDefault&gt;true&lt;/activeByDefault&gt;  \r\n\t\t\t&amp;lt;/activation&gt;   \r\n\t\t\t&amp;lt;properties&gt;  \r\n\t\t\t\t&amp;lt;env&gt;LOCAL&lt;/env&gt;  \r\n\t\t\t&amp;lt;/properties&gt;  \r\n\t\t&amp;lt;/profile&gt;  \r\n\t&amp;lt;/profiles&gt;\r\n&lt;/pre&gt;\r\n\r\n**applicationContext.xml**\r\n&lt;pre&gt;\r\n    &amp;lt;bean id=&quot;propertyConfigurer&quot; class=&quot;org.springframework.beans.factory.config.PropertyPlaceholderConfigurer&quot;&gt;\r\n        &amp;lt;property name=&quot;locations&quot;&gt;\r\n            &amp;lt;list&gt;\r\n                &amp;lt;value&gt;classpath:application.properties&lt;/value&gt;\r\n            &amp;lt;/list&gt;\r\n        &amp;lt;/property&gt;\r\n        &amp;lt;property name=&quot;ignoreResourceNotFound&quot; value=&quot;true&quot;/&gt;\r\n    &amp;lt;/bean&gt;\r\n    \r\n    &amp;lt;bean id=&quot;dataSource&quot; class=&quot;org.apache.commons.dbcp.BasicDataSource&quot; destroy-method=&quot;close&quot;&gt;\r\n        &amp;lt;property name=&quot;driverClassName&quot; value=&quot;${jdbc.driver}&quot;/&gt;\r\n        &amp;lt;property name=&quot;url&quot; value=&quot;${jdbc.url}&quot;/&gt;\r\n        &amp;lt;property name=&quot;username&quot; value=&quot;${jdbc.username}&quot;/&gt;\r\n        &amp;lt;property name=&quot;password&quot; value=&quot;${jdbc.password}&quot;/&gt;\r\n    &amp;lt;/bean&gt;\r\n&lt;/pre&gt;\r\n\r\n**an example of the content of application.properties and filters-LOCAL.properties**\r\n&lt;pre&gt;\r\njdbc.driver=org.postgresql.Driver\r\njdbc.url=jdbc:postgresql://localhost/shoutbox_dev\r\njdbc.username=tester\r\njdbc.password=tester\r\n&lt;/pre&gt;\r\n\r\nCan I remove the propertyConfigurer from the applicationContext, create a PROD filter and disregard the application.properties file, or will that give me issues when deploying to the production server?","title":"PropertyPlaceholderConfigurer vs Filters -- Spring Beans","body":"<p>I've got a question regarding the difference between PropertyPlaceholderConfigurer (org.springframework.beans.factory.config.PropertyPlaceholderConfigurer) and normal filters defined in my pom.xml.</p>\n\n<p>I've been looking at examples, and it seems that even though filters are defined and marked to be active by default in the pom.xml they still make use of PropertyPlaceholderConfigurer in Spring's applicationContext.xml.</p>\n\n<p>This means that the pom.xml has a reference to a filter-LOCAL.properties while applicationContext.xml has a reference to application.properties and they both contain the same settings.</p>\n\n<p>Why is that? Is that how it is supposed to be done? I'm able to run the goal mvn jetty:run without the application.properties present, but if I add settings to the application.properties that differ from the filter-LOCAL.properties they don't seem to override.</p>\n\n<p>Here's an example of what I mean:</p>\n\n<p><strong>pom.xml</strong></p>\n\n<pre>\n    &lt;profiles>  \n        &lt;profile>  \n            &lt;id>LOCAL  \n            &lt;activation>  \n                &lt;activeByDefault>true  \n            &lt;/activation>   \n            &lt;properties>  \n                &lt;env>LOCAL  \n            &lt;/properties>  \n        &lt;/profile>  \n    &lt;/profiles>\n</pre>\n\n<p><strong>applicationContext.xml</strong></p>\n\n<pre>\n    &lt;bean id=\"propertyConfigurer\" class=\"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer\">\n        &lt;property name=\"locations\">\n            &lt;list>\n                &lt;value>classpath:application.properties\n            &lt;/list>\n        &lt;/property>\n        &lt;property name=\"ignoreResourceNotFound\" value=\"true\"/>\n    &lt;/bean>\n\n    &lt;bean id=\"dataSource\" class=\"org.apache.commons.dbcp.BasicDataSource\" destroy-method=\"close\">\n        &lt;property name=\"driverClassName\" value=\"${jdbc.driver}\"/>\n        &lt;property name=\"url\" value=\"${jdbc.url}\"/>\n        &lt;property name=\"username\" value=\"${jdbc.username}\"/>\n        &lt;property name=\"password\" value=\"${jdbc.password}\"/>\n    &lt;/bean>\n</pre>\n\n<p><strong>an example of the content of application.properties and filters-LOCAL.properties</strong></p>\n\n<pre>\njdbc.driver=org.postgresql.Driver\njdbc.url=jdbc:postgresql://localhost/shoutbox_dev\njdbc.username=tester\njdbc.password=tester\n</pre>\n\n<p>Can I remove the propertyConfigurer from the applicationContext, create a PROD filter and disregard the application.properties file, or will that give me issues when deploying to the production server?</p>\n"},{"tags":["java","spring","encoding","spring-restcontroller"],"comments":[{"owner":{"account_id":29176687,"reputation":332,"user_id":22351796,"display_name":"Karsten"},"score":1,"creation_date":1695639090,"post_id":77171864,"comment_id":136046639,"body_markdown":"You say &#39;XML string&#39;. Generally putting XML into strings isn&#39;t a good idea as it results in encoding problems sooner or later. Use byte arrays instead. But I think your problem here is that your XML document is already serialized using UTF-8. The framework will return it as it is. Either let the framework do the encooding using JAXB or serialize it for yourself using the desired encoding.","body":"You say &#39;XML string&#39;. Generally putting XML into strings isn&#39;t a good idea as it results in encoding problems sooner or later. Use byte arrays instead. But I think your problem here is that your XML document is already serialized using UTF-8. The framework will return it as it is. Either let the framework do the encooding using JAXB or serialize it for yourself using the desired encoding."}],"answers":[{"tags":[],"owner":{"account_id":1956083,"reputation":4432,"user_id":1759063,"accept_rate":53,"display_name":"Eljah"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695796584,"creation_date":1695796584,"answer_id":77185133,"question_id":77171864,"body_markdown":"It was fount, that XML was forcibly recoded to windows-1251 on the accepting side:\r\n\r\n    @Override\r\n    public T handleResponse(HttpResponse response) throws IOException {\r\n        StatusLine statusLine = response.getStatusLine();\r\n        if (statusLine.getStatusCode() != 200) {\r\n            LOGGER.error(&quot;Status code: &quot; + statusLine.getStatusCode());\r\n            throw new HttpResponseException(statusLine.getStatusCode(), statusLine.getReasonPhrase());\r\n        }\r\n\r\n        HttpEntity entity = response.getEntity();\r\n        if (entity == null) {\r\n            throw new ClientProtocolException(&quot;Response contains no content&quot;);\r\n        }\r\n\r\n        // only for logging\r\n        String xml = IOUtils.toString(entity.getContent(), &quot;windows-1251&quot;);\r\n        entity.getContent().close();\r\n        if (responseClass == GetUIProvidersResponse.class) {\r\n            LOGGER.info(&quot;Logging for getUIProviders is disabled&quot;);\r\n        } else {\r\n            LOGGER.info(xml);\r\n        }\r\n\r\n        return xmlMapper.readValue(xml, responseClass);\r\n    }\r\n\r\nfor making response to be encoded in true windows-1251 I had to update `DispatcherServlet` extension:\r\n\r\n\r\n\r\n\r\n    public class LoggableDispatcherServlet extends DispatcherServlet {\r\n        private static final Logger logger = LoggerFactory.getLogger(LoggableDispatcherServlet.class);\r\n    \r\n        public LoggableDispatcherServlet(WebApplicationContext webApplicationContext) {\r\n            super(webApplicationContext);\r\n        }\r\n    \r\n        @Override\r\n        protected void doDispatch(HttpServletRequest request, HttpServletResponse response) throws Exception {\r\n            if (!(request instanceof ContentCachingRequestWrapper)) {\r\n                request = new ContentCachingRequestWrapper(request);\r\n            }\r\n            if (!(response instanceof ContentCachingResponseWrapper)) {\r\n                response = new ContentCachingResponseWrapper(response);\r\n            }\r\n            HandlerExecutionChain handler = getHandler(request);\r\n    \r\n            try {\r\n                super.doDispatch(request, response);\r\n            } finally {\r\n                log(request, response, handler);\r\n                updateResponse(response);\r\n            }\r\n        }\r\n    \r\n    ....\r\n    \r\n        private void updateResponse(HttpServletResponse response) throws IOException {\r\n            ContentCachingResponseWrapper responseWrapper =\r\n                    WebUtils.getNativeResponse(response, ContentCachingResponseWrapper.class);\r\n    \r\n            String encoding = responseWrapper.getCharacterEncoding();\r\n            if (encoding.equals(&quot;windows-1251&quot;)) {\r\n                String responseString = new String(responseWrapper.getContentAsByteArray(),&quot;UTF-8&quot;);\r\n                responseWrapper.resetBuffer();\r\n                responseWrapper.getOutputStream().write(responseString.getBytes(&quot;windows-1251&quot;));\r\n                responseWrapper.copyBodyToResponse();\r\n            } else {\r\n                responseWrapper.copyBodyToResponse();\r\n            }\r\n        }\r\n    \r\n       ...\r\n    }","title":"How to force @RestController to encode body to specific encoding?","body":"<p>It was fount, that XML was forcibly recoded to windows-1251 on the accepting side:</p>\n<pre><code>@Override\npublic T handleResponse(HttpResponse response) throws IOException {\n    StatusLine statusLine = response.getStatusLine();\n    if (statusLine.getStatusCode() != 200) {\n        LOGGER.error(&quot;Status code: &quot; + statusLine.getStatusCode());\n        throw new HttpResponseException(statusLine.getStatusCode(), statusLine.getReasonPhrase());\n    }\n\n    HttpEntity entity = response.getEntity();\n    if (entity == null) {\n        throw new ClientProtocolException(&quot;Response contains no content&quot;);\n    }\n\n    // only for logging\n    String xml = IOUtils.toString(entity.getContent(), &quot;windows-1251&quot;);\n    entity.getContent().close();\n    if (responseClass == GetUIProvidersResponse.class) {\n        LOGGER.info(&quot;Logging for getUIProviders is disabled&quot;);\n    } else {\n        LOGGER.info(xml);\n    }\n\n    return xmlMapper.readValue(xml, responseClass);\n}\n</code></pre>\n<p>for making response to be encoded in true windows-1251 I had to update <code>DispatcherServlet</code> extension:</p>\n<pre><code>public class LoggableDispatcherServlet extends DispatcherServlet {\n    private static final Logger logger = LoggerFactory.getLogger(LoggableDispatcherServlet.class);\n\n    public LoggableDispatcherServlet(WebApplicationContext webApplicationContext) {\n        super(webApplicationContext);\n    }\n\n    @Override\n    protected void doDispatch(HttpServletRequest request, HttpServletResponse response) throws Exception {\n        if (!(request instanceof ContentCachingRequestWrapper)) {\n            request = new ContentCachingRequestWrapper(request);\n        }\n        if (!(response instanceof ContentCachingResponseWrapper)) {\n            response = new ContentCachingResponseWrapper(response);\n        }\n        HandlerExecutionChain handler = getHandler(request);\n\n        try {\n            super.doDispatch(request, response);\n        } finally {\n            log(request, response, handler);\n            updateResponse(response);\n        }\n    }\n\n....\n\n    private void updateResponse(HttpServletResponse response) throws IOException {\n        ContentCachingResponseWrapper responseWrapper =\n                WebUtils.getNativeResponse(response, ContentCachingResponseWrapper.class);\n\n        String encoding = responseWrapper.getCharacterEncoding();\n        if (encoding.equals(&quot;windows-1251&quot;)) {\n            String responseString = new String(responseWrapper.getContentAsByteArray(),&quot;UTF-8&quot;);\n            responseWrapper.resetBuffer();\n            responseWrapper.getOutputStream().write(responseString.getBytes(&quot;windows-1251&quot;));\n            responseWrapper.copyBodyToResponse();\n        } else {\n            responseWrapper.copyBodyToResponse();\n        }\n    }\n\n   ...\n}\n</code></pre>\n"}],"owner":{"account_id":1956083,"reputation":4432,"user_id":1759063,"accept_rate":53,"display_name":"Eljah"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77185133,"answer_count":1,"score":0,"last_activity_date":1695796584,"creation_date":1695637730,"question_id":77171864,"body_markdown":"I have a controller with `produces` set to\r\n\r\n    @RestController\r\n    @RequestMapping(consumes = MediaType.APPLICATION_XML_VALUE, produces = MediaType.APPLICATION_XML_VALUE) \r\n\r\nover RestController\r\n\r\n    @RequestMapping(value = &quot;/api/&quot;, method = RequestMethod.POST, produces = &quot;application/xml;charset=windows-1251&quot;)\r\n\r\nWith POSTman I get response like `&lt;tag field=&quot;РђР&#177;РѕРЅР&#181;РЅС‚ РЅР&#176;Р№РґР&#181;РЅ&quot;/&gt;` which looks like UTF-8 bytes being decoded to windows-1251 and then flushed to the HTTP response. \r\n\r\nBut in fact, I need just my UTF-8 String with the same characters, but just in windows-1251 encoding. What I should change in the body to make it flushed with the encoding I expect, not only changing the headers of the HTTP response?\r\n\r\n    \r\n\r\n","title":"How to force @RestController to encode body to specific encoding?","body":"<p>I have a controller with <code>produces</code> set to</p>\n<pre><code>@RestController\n@RequestMapping(consumes = MediaType.APPLICATION_XML_VALUE, produces = MediaType.APPLICATION_XML_VALUE) \n</code></pre>\n<p>over RestController</p>\n<pre><code>@RequestMapping(value = &quot;/api/&quot;, method = RequestMethod.POST, produces = &quot;application/xml;charset=windows-1251&quot;)\n</code></pre>\n<p>With POSTman I get response like <code>&lt;tag field=&quot;РђР±РѕРЅРµРЅС‚ РЅР°Р№РґРµРЅ&quot;/&gt;</code> which looks like UTF-8 bytes being decoded to windows-1251 and then flushed to the HTTP response.</p>\n<p>But in fact, I need just my UTF-8 String with the same characters, but just in windows-1251 encoding. What I should change in the body to make it flushed with the encoding I expect, not only changing the headers of the HTTP response?</p>\n"},{"tags":["java","maven","model-view-controller"],"comments":[{"owner":{"account_id":12695174,"reputation":45207,"user_id":9223839,"display_name":"Joakim Danielson"},"score":0,"creation_date":1567166533,"post_id":57726196,"comment_id":101892804,"body_markdown":"&quot;.lsp4xml\\cache\\http&quot; looks weird it should be &quot;.m2\\repository\\&quot; instead in your home directory","body":"&quot;.lsp4xml\\cache\\http&quot; looks weird it should be &quot;.m2\\repository\\&quot; instead in your home directory"},{"owner":{"account_id":15730864,"reputation":301,"user_id":11382435,"display_name":"digvijay bhandari"},"score":0,"creation_date":1567169188,"post_id":57726196,"comment_id":101894100,"body_markdown":"I agree, but its just like that, I dont know where its taking this path","body":"I agree, but its just like that, I dont know where its taking this path"},{"owner":{"account_id":15730864,"reputation":301,"user_id":11382435,"display_name":"digvijay bhandari"},"score":0,"creation_date":1567193537,"post_id":57726196,"comment_id":101904654,"body_markdown":"I tried the similar setup in my personal home laptop, having admin right, this folder &quot;C:\\Users\\Myacc\\.lsp4xml\\cache\\http\\maven.apache.org\\xsd&quot; was created already having xsd in it  ---and the code is working fine as well in this pc","body":"I tried the similar setup in my personal home laptop, having admin right, this folder &quot;C:\\Users\\Myacc\\.lsp4xml\\cache\\http\\maven.apache.org\\xsd&quot; was created already having xsd in it  ---and the code is working fine as well in this pc"},{"owner":{"account_id":15730864,"reputation":301,"user_id":11382435,"display_name":"digvijay bhandari"},"score":0,"creation_date":1567404359,"post_id":57726196,"comment_id":101940926,"body_markdown":"tried to copy this folder along with xsd in office pc, but no luck, still showing same error","body":"tried to copy this folder along with xsd in office pc, but no luck, still showing same error"}],"answers":[{"comments":[{"owner":{"account_id":930090,"reputation":4490,"user_id":960115,"accept_rate":92,"display_name":"Jeff G"},"score":7,"creation_date":1596485226,"post_id":57762532,"comment_id":111820974,"body_markdown":"In Eclipse 2020-06, I was able to fix this by adding the line `-Djava.net.useSystemProxies=true` to *eclipse.ini*.","body":"In Eclipse 2020-06, I was able to fix this by adding the line <code>-Djava.net.useSystemProxies=true</code> to <i>eclipse.ini</i>."}],"tags":[],"owner":{"account_id":184310,"reputation":140,"user_id":420269,"display_name":"Greg"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1567457690,"creation_date":1567457078,"answer_id":57762532,"question_id":57726196,"body_markdown":"For what it&#39;s worth I see same error (firewall related?) which I think is due to the XML parser LSP4XML - rather than a Maven issue. The useSystemProxies suggestion here worked for me: https://github.com/redhat-developer/vscode-xml/issues/134","title":"Error while downloading &#39;http://maven.apache.org/xsd/maven-4.0.0.xsd&#39; to C:\\Users\\Myacc\\.lsp4xml\\cache\\http\\maven.apache.org\\xsd\\maven-4.0.0.xsd.XML","body":"<p>For what it's worth I see same error (firewall related?) which I think is due to the XML parser LSP4XML - rather than a Maven issue. The useSystemProxies suggestion here worked for me: <a href=\"https://github.com/redhat-developer/vscode-xml/issues/134\" rel=\"nofollow noreferrer\">https://github.com/redhat-developer/vscode-xml/issues/134</a></p>\n"},{"tags":[],"owner":{"account_id":6862021,"reputation":103,"user_id":5275654,"display_name":"Sudhir"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1603220712,"creation_date":1603220712,"answer_id":64451776,"question_id":57726196,"body_markdown":"If anyone is still following for the solution.\r\n\r\nIssue: Admin Rights\r\n\r\nSolution: Run the eclipse in admin mode in Windows and issue will be resolved. ","title":"Error while downloading &#39;http://maven.apache.org/xsd/maven-4.0.0.xsd&#39; to C:\\Users\\Myacc\\.lsp4xml\\cache\\http\\maven.apache.org\\xsd\\maven-4.0.0.xsd.XML","body":"<p>If anyone is still following for the solution.</p>\n<p>Issue: Admin Rights</p>\n<p>Solution: Run the eclipse in admin mode in Windows and issue will be resolved.</p>\n"},{"tags":[],"owner":{"account_id":19743604,"reputation":51,"user_id":14456546,"display_name":"Chris Bahonda"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1603456387,"creation_date":1603456387,"answer_id":64500081,"question_id":57726196,"body_markdown":"Running eclipse as admin solves this issue pretty well","title":"Error while downloading &#39;http://maven.apache.org/xsd/maven-4.0.0.xsd&#39; to C:\\Users\\Myacc\\.lsp4xml\\cache\\http\\maven.apache.org\\xsd\\maven-4.0.0.xsd.XML","body":"<p>Running eclipse as admin solves this issue pretty well</p>\n"},{"comments":[{"owner":{"account_id":981686,"reputation":887,"user_id":1001242,"accept_rate":62,"display_name":"itsraghz"},"score":0,"creation_date":1633181578,"post_id":65329604,"comment_id":122694856,"body_markdown":"Yes, this seemed to be a bug in the STS when creating a new Maven Project. I tried a few other hacks, but this was the simple and best :) Basically the xmlns attribute has two values within a double quote, and both of them were not in sync - as one was referring to http and other was https. Keeping them in sync did the trick. Thank you :)","body":"Yes, this seemed to be a bug in the STS when creating a new Maven Project. I tried a few other hacks, but this was the simple and best :) Basically the xmlns attribute has two values within a double quote, and both of them were not in sync - as one was referring to http and other was https. Keeping them in sync did the trick. Thank you :)"}],"tags":[],"owner":{"account_id":2655308,"reputation":519,"user_id":2296137,"accept_rate":0,"display_name":"AmitG"},"comment_count":1,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1608145503,"creation_date":1608145503,"answer_id":65329604,"question_id":57726196,"body_markdown":"For the same problem, I found this solution.\r\nchanged http to https in below line in pom file. worked in eclipse. Not sure why.\r\n\r\n    &lt;project xmlns=&quot;https://maven.apache.org...","title":"Error while downloading &#39;http://maven.apache.org/xsd/maven-4.0.0.xsd&#39; to C:\\Users\\Myacc\\.lsp4xml\\cache\\http\\maven.apache.org\\xsd\\maven-4.0.0.xsd.XML","body":"<p>For the same problem, I found this solution.\nchanged http to https in below line in pom file. worked in eclipse. Not sure why.</p>\n<pre><code>&lt;project xmlns=&quot;https://maven.apache.org...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5905702,"reputation":47,"user_id":4647581,"display_name":"osman akbacı"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1611502024,"creation_date":1611489641,"answer_id":65870282,"question_id":57726196,"body_markdown":"It is related to Admin rights. You can follow one of solutions to fix problem:\r\n\r\n 1. Open Eclipse as a administrator\r\n 2. You can replace https to http on pom.xml \r\n    `*https:*//maven.apache.org/xsd/maven-4.0.0.xsd`   =&gt; `**http:**//maven.apache.org/xsd/maven-4.0.0.xsd`\r\n\r\n\r\n","title":"Error while downloading &#39;http://maven.apache.org/xsd/maven-4.0.0.xsd&#39; to C:\\Users\\Myacc\\.lsp4xml\\cache\\http\\maven.apache.org\\xsd\\maven-4.0.0.xsd.XML","body":"<p>It is related to Admin rights. You can follow one of solutions to fix problem:</p>\n<ol>\n<li>Open Eclipse as a administrator</li>\n<li>You can replace https to http on pom.xml\n<code>*https:*//maven.apache.org/xsd/maven-4.0.0.xsd</code>   =&gt; <code>**http:**//maven.apache.org/xsd/maven-4.0.0.xsd</code></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1999775,"reputation":111,"user_id":1791101,"display_name":"Yogesh Gandhi"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1621958046,"creation_date":1621958046,"answer_id":67691511,"question_id":57726196,"body_markdown":"Changing https to http made it work\r\nNote the difference in xsi:schemLocation\r\n\r\nIncorrect:\r\n````\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n\txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;https://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n````\r\nCorrect:\r\n````\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n\txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n````","title":"Error while downloading &#39;http://maven.apache.org/xsd/maven-4.0.0.xsd&#39; to C:\\Users\\Myacc\\.lsp4xml\\cache\\http\\maven.apache.org\\xsd\\maven-4.0.0.xsd.XML","body":"<p>Changing https to http made it work\nNote the difference in xsi:schemLocation</p>\n<p>Incorrect:</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;https://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n</code></pre>\n<p>Correct:</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1695607508,"post_id":77148293,"comment_id":136042422,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/77148293/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":27315455,"reputation":1,"user_id":20830007,"display_name":"Nguyễn Tuấn Hưng"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695795810,"creation_date":1695283422,"answer_id":77148293,"question_id":57726196,"body_markdown":"If you have tried many ways to fix the error but failed, and you are using corporate network, a possible reason could be your company has blocked the download of Maven.","title":"Error while downloading &#39;http://maven.apache.org/xsd/maven-4.0.0.xsd&#39; to C:\\Users\\Myacc\\.lsp4xml\\cache\\http\\maven.apache.org\\xsd\\maven-4.0.0.xsd.XML","body":"<p>If you have tried many ways to fix the error but failed, and you are using corporate network, a possible reason could be your company has blocked the download of Maven.</p>\n"}],"owner":{"account_id":15730864,"reputation":301,"user_id":11382435,"display_name":"digvijay bhandari"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59217,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"answer_count":7,"score":19,"last_activity_date":1695795810,"creation_date":1567165734,"question_id":57726196,"body_markdown":"I am new to maven, \r\nI have installed apache-maven-3.6.1 \r\nusing it via visual studio code\r\nFirst creating workspace was throwing error due to maven was behind proxy\r\nI updated setting.xml in maven, added proxy and workscpace was created by vsc\r\n\r\nIts a fresh workspace, but the pom.xml is throwing error in first project tag as mentioned in title \r\n\r\n\r\n\r\n\r\nI searched and added the same settings.xml file in C:\\Users\\Myacc\\.m2 folder and checked\r\n\r\nI deleted the m2 folder and checked\r\n\r\nI executed mvn clean package in project directory\r\n\r\nnone of it worked\r\n\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt; \r\n\r\nthis the xml tag which is throwing error\r\n\r\nFrom browser I am able to access\r\nhttp://maven.apache.org/xsd/maven-4.0.0.xsd\r\n\r\nI could not find .lsp4xml\\cache\\http\\maven.apache.org , thought of keeping the xsd manually","title":"Error while downloading &#39;http://maven.apache.org/xsd/maven-4.0.0.xsd&#39; to C:\\Users\\Myacc\\.lsp4xml\\cache\\http\\maven.apache.org\\xsd\\maven-4.0.0.xsd.XML","body":"<p>I am new to maven, \nI have installed apache-maven-3.6.1 \nusing it via visual studio code\nFirst creating workspace was throwing error due to maven was behind proxy\nI updated setting.xml in maven, added proxy and workscpace was created by vsc</p>\n\n<p>Its a fresh workspace, but the pom.xml is throwing error in first project tag as mentioned in title </p>\n\n<p>I searched and added the same settings.xml file in C:\\Users\\Myacc.m2 folder and checked</p>\n\n<p>I deleted the m2 folder and checked</p>\n\n<p>I executed mvn clean package in project directory</p>\n\n<p>none of it worked</p>\n\n<p>http://maven.apache.org/xsd/maven-4.0.0.xsd\"> </p>\n\n<p>this the xml tag which is throwing error</p>\n\n<p>From browser I am able to access\n<a href=\"http://maven.apache.org/xsd/maven-4.0.0.xsd\" rel=\"noreferrer\">http://maven.apache.org/xsd/maven-4.0.0.xsd</a></p>\n\n<p>I could not find .lsp4xml\\cache\\http\\maven.apache.org , thought of keeping the xsd manually</p>\n"},{"tags":["java","android","android-recyclerview","android-adapter","notifydatasetchanged"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":1,"creation_date":1695796792,"post_id":77185064,"comment_id":136070438,"body_markdown":"`adding new items in existing list so my recyclerview update automatically` Sorry, just dont believe that.","body":"<code>adding new items in existing list so my recyclerview update automatically</code> Sorry, just dont believe that."},{"owner":{"account_id":8876984,"reputation":183,"user_id":20731078,"display_name":"Deepak Parmar"},"score":0,"creation_date":1695805451,"post_id":77185064,"comment_id":136072022,"body_markdown":"i also do not believe that but practically it&#39;s working @blackapps","body":"i also do not believe that but practically it&#39;s working @blackapps"},{"owner":{"account_id":12721843,"reputation":16013,"user_id":9241978,"display_name":"Pawel"},"score":0,"creation_date":1695825319,"post_id":77185064,"comment_id":136076246,"body_markdown":"If you only append your list it will work if as long as your list is already large enough to be scrollable and you&#39;re not on the bottom of it. However you cannot rely on this behavior (since it&#39;s just a quirk of linearlayoutmanager implementation) and you should be notifying your list changes - preferably with a diff rather than datasetchanged.","body":"If you only append your list it will work if as long as your list is already large enough to be scrollable and you&#39;re not on the bottom of it. However you cannot rely on this behavior (since it&#39;s just a quirk of linearlayoutmanager implementation) and you should be notifying your list changes - preferably with a diff rather than datasetchanged."}],"owner":{"account_id":8876984,"reputation":183,"user_id":20731078,"display_name":"Deepak Parmar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695795698,"creation_date":1695795698,"question_id":77185064,"body_markdown":"I am showing list of data by recyclerview. so when data is comming from web socket then adding new items in existing list so my recyclerview update automatically. i am not explicitly calling notifyDataSetChanged() so how it&#39;s updating?.\r\n\r\nIf i will adding items by any button click event so it require to call notifyDataSetChanged() method then data will update but when data is coming web socket so it not require to call notifyDataSetChanged() method and data will update automatically.","title":"Why android Recyclerview automatically update without adapter notifyDataSetChanged() method called? when data is coming from web socket background","body":"<p>I am showing list of data by recyclerview. so when data is comming from web socket then adding new items in existing list so my recyclerview update automatically. i am not explicitly calling notifyDataSetChanged() so how it's updating?.</p>\n<p>If i will adding items by any button click event so it require to call notifyDataSetChanged() method then data will update but when data is coming web socket so it not require to call notifyDataSetChanged() method and data will update automatically.</p>\n"},{"tags":["java","eclipse","maven","maven-3","pom.xml"],"comments":[{"owner":{"account_id":3004420,"reputation":1004,"user_id":2549202,"accept_rate":50,"display_name":"Vineet Kasat"},"score":1,"creation_date":1384233741,"post_id":19921311,"comment_id":29643417,"body_markdown":"Add an environment variable JAVA_HOME","body":"Add an environment variable JAVA_HOME"},{"owner":{"account_id":2138642,"reputation":2194,"user_id":1897838,"accept_rate":56,"display_name":"Y0gesh Gupta"},"score":0,"creation_date":1384235056,"post_id":19921311,"comment_id":29643813,"body_markdown":"Where should I add this environment variable?","body":"Where should I add this environment variable?"},{"owner":{"account_id":3004420,"reputation":1004,"user_id":2549202,"accept_rate":50,"display_name":"Vineet Kasat"},"score":0,"creation_date":1384235646,"post_id":19921311,"comment_id":29644024,"body_markdown":"Go to advance system settings (Windows) , there youwill find all the environment variables. Add JAVA_HOME with the value as path to your JDK","body":"Go to advance system settings (Windows) , there youwill find all the environment variables. Add JAVA_HOME with the value as path to your JDK"},{"owner":{"account_id":2138642,"reputation":2194,"user_id":1897838,"accept_rate":56,"display_name":"Y0gesh Gupta"},"score":0,"creation_date":1384245742,"post_id":19921311,"comment_id":29647810,"body_markdown":"I already have JAVA_HOME set up there.","body":"I already have JAVA_HOME set up there."}],"answers":[{"tags":[],"owner":{"account_id":158265,"reputation":2819,"user_id":376767,"display_name":"Sam Hanes"},"comment_count":0,"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1588862106,"creation_date":1384233622,"answer_id":19921467,"question_id":19921311,"body_markdown":"You&#39;ve specified a dependency on `jdk.tools:jdk.tools:jar` with a `&lt;systemPath&gt;` of `${JAVA_HOME}/lib/tools.jar`. `${JAVA_HOME}` is not a valid [Maven property]. The syntax to read the environment variable `JAVA_HOME` is `${env.JAVA_HOME}`. However, the same information is exposed as a [system property] named `java.home`, so `${java.home}` is the best solution.\r\n\r\n[Maven property]: http://books.sonatype.com/mvnref-book/reference/resource-filtering-sect-properties.html\r\n[system property]: http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html","title":"Pom.xml project build error","body":"<p>You've specified a dependency on <code>jdk.tools:jdk.tools:jar</code> with a <code>&lt;systemPath&gt;</code> of <code>${JAVA_HOME}/lib/tools.jar</code>. <code>${JAVA_HOME}</code> is not a valid <a href=\"http://books.sonatype.com/mvnref-book/reference/resource-filtering-sect-properties.html\" rel=\"nofollow noreferrer\">Maven property</a>. The syntax to read the environment variable <code>JAVA_HOME</code> is <code>${env.JAVA_HOME}</code>. However, the same information is exposed as a <a href=\"http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html\" rel=\"nofollow noreferrer\">system property</a> named <code>java.home</code>, so <code>${java.home}</code> is the best solution.</p>\n"},{"tags":[],"owner":{"account_id":9178740,"reputation":31,"user_id":6823446,"accept_rate":57,"display_name":"Doss"},"comment_count":0,"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1473930420,"creation_date":1473876613,"answer_id":39497006,"question_id":19921311,"body_markdown":"Look for `tools.jar` which should be in `jdk/lib`, if not mean download latest jdk or add `tools.jar` to this location. This should fix the issue. ","title":"Pom.xml project build error","body":"<p>Look for <code>tools.jar</code> which should be in <code>jdk/lib</code>, if not mean download latest jdk or add <code>tools.jar</code> to this location. This should fix the issue. </p>\n"},{"tags":[],"owner":{"account_id":10211041,"reputation":1,"user_id":7538152,"display_name":"Kaihao Yang"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689041920,"creation_date":1689041920,"answer_id":76658350,"question_id":19921311,"body_markdown":"This is due to a lack of Maven property —— `JAVA_HOME` . You can add it to your pom.xml\r\n```\r\n    &lt;properties&gt;\r\n        &lt;!--  your java home  --&gt;\r\n        &lt;JAVA_HOME&gt;/opt/java/jdk1.8.0_202&lt;/JAVA_HOME&gt;\r\n    &lt;/properties&gt;\r\n```","title":"Pom.xml project build error","body":"<p>This is due to a lack of Maven property —— <code>JAVA_HOME</code> . You can add it to your pom.xml</p>\n<pre><code>    &lt;properties&gt;\n        &lt;!--  your java home  --&gt;\n        &lt;JAVA_HOME&gt;/opt/java/jdk1.8.0_202&lt;/JAVA_HOME&gt;\n    &lt;/properties&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17557703,"reputation":31,"user_id":12736822,"display_name":"fwhdzh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695795579,"creation_date":1695795579,"answer_id":77185051,"question_id":19921311,"body_markdown":"Sam Hanes&#39; answer is great. However, there are two points:\r\n1. ${java.home} represents the installation directory for **JRE**, which is sometimes different from the installation directory for **JDK**. And the tools.jar is usually at `&quot;INSTALLATION_DIRECOTRY_OF_JDK&quot;/lib/tools.jar`\r\n2. If you use `${env.JAVA_HOME}` and you are in linux, be sure that you have correctly exported `JAVA_HOME` environment variable. You can use `export` command in bash to see whether there is a line like `declare -x JAVA_HOME=....`. In particular, you should write your .bash_profile or .bash_rc like:\r\n```\r\n    export JAVA_HOME=THE_DIRECOTRY_OF_YOU_JDK\r\n    export PATH=&quot;$JAVA_HOME/bin:$PATH&quot;\r\n```\r\ninstead of \r\n```\r\n    JAVA_HOME=THE_DIRECOTRY_OF_YOU_JDK\r\n    PATH=&quot;$JAVA_HOME/bin:$PATH&quot;\r\n```\r\nIf you miss `export` in your .bash_profile or .bash_rc, you can still use `$JAVA_HOME` in your bash terminal. However, Maven cannot recognize what `env.JAVA_HOME` means.\r\n","title":"Pom.xml project build error","body":"<p>Sam Hanes' answer is great. However, there are two points:</p>\n<ol>\n<li>${java.home} represents the installation directory for <strong>JRE</strong>, which is sometimes different from the installation directory for <strong>JDK</strong>. And the tools.jar is usually at <code>&quot;INSTALLATION_DIRECOTRY_OF_JDK&quot;/lib/tools.jar</code></li>\n<li>If you use <code>${env.JAVA_HOME}</code> and you are in linux, be sure that you have correctly exported <code>JAVA_HOME</code> environment variable. You can use <code>export</code> command in bash to see whether there is a line like <code>declare -x JAVA_HOME=....</code>. In particular, you should write your .bash_profile or .bash_rc like:</li>\n</ol>\n<pre><code>    export JAVA_HOME=THE_DIRECOTRY_OF_YOU_JDK\n    export PATH=&quot;$JAVA_HOME/bin:$PATH&quot;\n</code></pre>\n<p>instead of</p>\n<pre><code>    JAVA_HOME=THE_DIRECOTRY_OF_YOU_JDK\n    PATH=&quot;$JAVA_HOME/bin:$PATH&quot;\n</code></pre>\n<p>If you miss <code>export</code> in your .bash_profile or .bash_rc, you can still use <code>$JAVA_HOME</code> in your bash terminal. However, Maven cannot recognize what <code>env.JAVA_HOME</code> means.</p>\n"}],"owner":{"account_id":2138642,"reputation":2194,"user_id":1897838,"accept_rate":56,"display_name":"Y0gesh Gupta"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13985,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":19921467,"answer_count":4,"score":4,"last_activity_date":1695795579,"creation_date":1384232961,"question_id":19921311,"body_markdown":"I have imported maven projects in my eclipse, but I am getting the following error in pom.xml-\r\n\r\n&gt; Project build error:\r\n&gt; &#39;dependencyManagement.dependencies.dependency.systemPath&#39; for\r\n&gt; jdk.tools:jdk.tools:jar must specify an absolute path but is\r\n&gt; ${JAVA_HOME}/lib/tools.jar\r\n\r\nI am kind of new to maven, any help will be appreciated.","title":"Pom.xml project build error","body":"<p>I have imported maven projects in my eclipse, but I am getting the following error in pom.xml-</p>\n\n<blockquote>\n  <p>Project build error:\n  'dependencyManagement.dependencies.dependency.systemPath' for\n  jdk.tools:jdk.tools:jar must specify an absolute path but is\n  ${JAVA_HOME}/lib/tools.jar</p>\n</blockquote>\n\n<p>I am kind of new to maven, any help will be appreciated.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1695793973,"post_id":77184927,"comment_id":136070084,"body_markdown":"You have a semicolon after your if statement. Or to be more precise: Your if statements have empty bodies.","body":"You have a semicolon after your if statement. Or to be more precise: Your if statements have empty bodies."},{"owner":{"account_id":248321,"reputation":62658,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":1,"creation_date":1695795591,"post_id":77184927,"comment_id":136070268,"body_markdown":"@tgdavies I agree it&#39;s the same, algol-derived syntactical concept. But surely the best available duplicate for a question motivated by a semicolon after `if` in Java, is not a question motivated by a `for` loop in C?","body":"@tgdavies I agree it&#39;s the same, algol-derived syntactical concept. But surely the best available duplicate for a question motivated by a semicolon after <code>if</code> in Java, is not a question motivated by a <code>for</code> loop in C?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1695795928,"post_id":77184927,"comment_id":136070314,"body_markdown":"It was the best one I found. But perhaps I should have looked harder.","body":"It was the best one I found. But perhaps I should have looked harder."}],"answers":[{"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":3,"creation_date":1695794147,"post_id":77184947,"comment_id":136070104,"body_markdown":"Nitpick: Is &#39;invalid&#39; the right way to describe it? The first example is an if statement with an empty body, followed by a code block. Nothing invalid about it, it just does something different from what was expected.","body":"Nitpick: Is &#39;invalid&#39; the right way to describe it? The first example is an if statement with an empty body, followed by a code block. Nothing invalid about it, it just does something different from what was expected."},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1695794385,"post_id":77184947,"comment_id":136070134,"body_markdown":"@tgdavies seeing as it technically isn&#39;t even an if block ...\nAs you said yourself, it just might look like an if block, and the OP treats it as such, but it&#39;s wrong to use it as such (wrong if block would be more confusing compared to invalid)","body":"@tgdavies seeing as it technically isn&#39;t even an if block ... As you said yourself, it just might look like an if block, and the OP treats it as such, but it&#39;s wrong to use it as such (wrong if block would be more confusing compared to invalid)"},{"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"score":0,"creation_date":1695794496,"post_id":77184947,"comment_id":136070149,"body_markdown":"@tgdavies which word fits better?","body":"@tgdavies which word fits better?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1695794726,"post_id":77184947,"comment_id":136070172,"body_markdown":"I think I&#39;d say: The code block containing the `println` is not associated with the if condition, because the body of the if statement is the empty statement produced by the semicolon.","body":"I think I&#39;d say: The code block containing the <code>println</code> is not associated with the if condition, because the body of the if statement is the empty statement produced by the semicolon."},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1695795189,"post_id":77184947,"comment_id":136070219,"body_markdown":"@user85421 indeed, will update that.","body":"@user85421 indeed, will update that."}],"tags":[],"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"comment_count":5,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695795208,"creation_date":1695794008,"answer_id":77184947,"question_id":77184927,"body_markdown":"    if (hours_used &lt;= 10);\r\n    {\r\n    // invalid if block\r\n    }\r\n\r\nThis is an invalid if block. The if block either ends at the first closing } (of the block) or the first &#39;;&#39; which is not in the if-block, depending on what comes first.\r\n\r\nEDIT: Technically, it isn&#39;t an if block, though it might seem to be one. As the if- ended at the first &#39;;&#39; encountered after the if statement, your code is identical to:\r\n\r\n    if ( hours_used &lt;= 10 ) {} // empty body of the if block\r\n    {\r\n      // your block\r\n    }\r\n\r\nRemove all those &#39;;&#39;s at the end of your if statements:\r\n\r\n    if (hours_used &lt;= 10)\r\n    {\r\n    // valid if block\r\n    }","title":"Extra Line is being printed","body":"<pre><code>if (hours_used &lt;= 10);\n{\n// invalid if block\n}\n</code></pre>\n<p>This is an invalid if block. The if block either ends at the first closing } (of the block) or the first ';' which is not in the if-block, depending on what comes first.</p>\n<p>EDIT: Technically, it isn't an if block, though it might seem to be one. As the if- ended at the first ';' encountered after the if statement, your code is identical to:</p>\n<pre><code>if ( hours_used &lt;= 10 ) {} // empty body of the if block\n{\n  // your block\n}\n</code></pre>\n<p>Remove all those ';'s at the end of your if statements:</p>\n<pre><code>if (hours_used &lt;= 10)\n{\n// valid if block\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695794910,"creation_date":1695794910,"answer_id":77184997,"question_id":77184927,"body_markdown":"&gt; _&quot;... inside the case statemen I can type &#39;if&#39; but recieve an error when I type else. ...&quot;_\r\n\r\nThis is because you&#39;ve ended the _if-statement_ with a semi-colon.\r\n\r\n```java\r\nif (hours_used &gt; 10);\r\n{\r\n    additional_hours = hours_used - pack_a_time_lim;\r\n    additional_charge = additional_hours * pack_a_addtional_fee;\r\n    totalBill = package_a + additional_charge;\r\n\r\n    System.out.println(&quot;Your bill amounts to $&quot; + totalBill);\r\n}\r\n```\r\n\r\nThe following _Java_ tutorial outlines the _if_ and _else-if_ structure syntax.\\\r\n_[The if-then and if-then-else Statements (The Java&amp;trade; Tutorials &amp;gt; Learning the Java Language &amp;gt; Language Basics)](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/if.html)_.\r\n\r\nHere is a re-factor.\r\n\r\n```java\r\nswitch (package_chosen) {\r\n    case &quot;c&quot; -&gt; {\r\n        System.out.println(&quot;Your bill amounts to $&quot; + package_c + &quot; per month.&quot;);\r\n    }\r\n    case &quot;a&quot; -&gt; {\r\n        System.out.println(&quot;How many hours of internet did you use?&quot;);\r\n        hours_used = scanner.nextInt();\r\n        \r\n        if (hours_used &lt;= 10)\r\n            System.out.println(&quot;Your bill amounts to $&quot; + package_a + &quot; per month.&quot;);\r\n        if (hours_used &gt; 10) {\r\n            additional_hours = hours_used - pack_a_time_lim;\r\n            additional_charge = additional_hours * pack_a_addtional_fee;\r\n            totalBill = package_a + additional_charge;\r\n\r\n            System.out.println(&quot;Your bill amounts to $&quot; + totalBill);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n&gt; _&quot;... Your bill amounts to $9.95 per month. **HOW DO I REMOVE THIS LINE** ...&quot;_\r\n\r\nYou&#39;re referring to the first _if-statement_.\r\n\r\n```java\r\nif (hours_used &lt;= 10)\r\n    System.out.println(&quot;Your bill amounts to $&quot; + package_a + &quot; per month.&quot;);\r\n```\r\n","title":"Extra Line is being printed","body":"<blockquote>\n<p><em>&quot;... inside the case statemen I can type 'if' but recieve an error when I type else. ...&quot;</em></p>\n</blockquote>\n<p>This is because you've ended the <em>if-statement</em> with a semi-colon.</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (hours_used &gt; 10);\n{\n    additional_hours = hours_used - pack_a_time_lim;\n    additional_charge = additional_hours * pack_a_addtional_fee;\n    totalBill = package_a + additional_charge;\n\n    System.out.println(&quot;Your bill amounts to $&quot; + totalBill);\n}\n</code></pre>\n<p>The following <em>Java</em> tutorial outlines the <em>if</em> and <em>else-if</em> structure syntax.<br />\n<em><a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/if.html\" rel=\"nofollow noreferrer\">The if-then and if-then-else Statements (The Java™ Tutorials &gt; Learning the Java Language &gt; Language Basics)</a></em>.</p>\n<p>Here is a re-factor.</p>\n<pre class=\"lang-java prettyprint-override\"><code>switch (package_chosen) {\n    case &quot;c&quot; -&gt; {\n        System.out.println(&quot;Your bill amounts to $&quot; + package_c + &quot; per month.&quot;);\n    }\n    case &quot;a&quot; -&gt; {\n        System.out.println(&quot;How many hours of internet did you use?&quot;);\n        hours_used = scanner.nextInt();\n        \n        if (hours_used &lt;= 10)\n            System.out.println(&quot;Your bill amounts to $&quot; + package_a + &quot; per month.&quot;);\n        if (hours_used &gt; 10) {\n            additional_hours = hours_used - pack_a_time_lim;\n            additional_charge = additional_hours * pack_a_addtional_fee;\n            totalBill = package_a + additional_charge;\n\n            System.out.println(&quot;Your bill amounts to $&quot; + totalBill);\n        }\n    }\n}\n</code></pre>\n<blockquote>\n<p><em>&quot;... Your bill amounts to $9.95 per month. <strong>HOW DO I REMOVE THIS LINE</strong> ...&quot;</em></p>\n</blockquote>\n<p>You're referring to the first <em>if-statement</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (hours_used &lt;= 10)\n    System.out.println(&quot;Your bill amounts to $&quot; + package_a + &quot; per month.&quot;);\n</code></pre>\n"}],"owner":{"account_id":29544335,"reputation":11,"user_id":22642294,"display_name":"Abothicon"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1695795348,"answer_count":2,"score":1,"last_activity_date":1695795208,"creation_date":1695793767,"question_id":77184927,"body_markdown":"    import java.util.Scanner;\r\n    \r\n    public class Interenet_service_provider {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\r\n    \t\tScanner scanner = new Scanner(System.in);\r\n    \t\t\r\n    \t\tString package_chosen;\r\n    \t\tint hours_used = 0;\r\n    \t\tint additional_hours = 0;\r\n    \t\tdouble additional_charge = 0;\r\n    \t\tdouble package_a = 9.95;\r\n    \t\tdouble package_b = 13.95;\r\n    \t\tdouble package_c = 19.95;\r\n    \t\tint pack_a_time_lim = 10;\r\n    \t\tint pack_b_time_lim = 20;\r\n    \t\tdouble pack_a_addtional_fee = 2.00;\r\n    \t\tdouble pack_b_addtional_fee = 1.00;\r\n    \t\tdouble totalBill = 0;\r\n    \t\t\r\n    \t\tSystem.out.println(&quot;What package do you have?&quot;);\r\n    \t\tpackage_chosen = scanner.nextLine();\r\n    \t\t\r\n    \t\tswitch (package_chosen)\r\n    \t\t{\r\n    \t\tcase (&quot;c&quot;):\r\n    \t\t\tSystem.out.println(&quot;Your bill amounts to $&quot; + package_c + &quot; per month.&quot;);\r\n    \t\t\tbreak;\r\n    \t\tcase (&quot;a&quot;):\r\n    \t\t\tSystem.out.println(&quot;How many hours of internet did you use?&quot;);\r\n    \t\t\thours_used = scanner.nextInt();\r\n    \t\t\t\r\n    \t\t\tif (hours_used &lt;= 10); \r\n    \t\t\t{\r\n    \t\t\t\tSystem.out.println(&quot;Your bill amounts to $&quot; + package_a + &quot; per month.&quot;);\r\n    \t\t\t}\r\n    \t\t\tif (hours_used &gt; 10);\r\n    \t\t\t{\r\n    \t\t\tadditional_hours = hours_used - pack_a_time_lim; \r\n    \t\t\tadditional_charge = additional_hours * pack_a_addtional_fee;\r\n    \t\t\ttotalBill = package_a + additional_charge;\r\n    \t\r\n    \t\t\tSystem.out.println(&quot;Your bill amounts to $&quot; + totalBill);\r\n    \t\t\t}\r\n    \t\t\tbreak;\r\n    \t\t\t}\r\n    \t\t}\r\n    }\r\n\r\n\t\t\r\n\t\r\nThis is my code, I am not done but I ran into the following issues:\r\ninside the case statemen I can type &#39;if&#39; but recieve an error when I type else. And if I do just put If twice then bothe statements print instead of one\t\r\n\r\ni.e\r\n\r\n    What package do you have?\r\n    a\r\n    How many hours of internet did you use?\r\n    11\r\n    Your bill amounts to $9.95 per month. **HOW DO I REMOVE THIS LINE**\r\n    Your bill amounts to $11.95\r\n\r\n\t\r\nI tried doing next.Line to skip a line but when I do that only the first statement prints, \r\n&quot;Your bill amounts to $9.95 per month.&quot; But in my case I want only the second statement to print\r\n\r\n","title":"Extra Line is being printed","body":"<pre><code>import java.util.Scanner;\n\npublic class Interenet_service_provider {\n\n    public static void main(String[] args) {\n    \n        Scanner scanner = new Scanner(System.in);\n        \n        String package_chosen;\n        int hours_used = 0;\n        int additional_hours = 0;\n        double additional_charge = 0;\n        double package_a = 9.95;\n        double package_b = 13.95;\n        double package_c = 19.95;\n        int pack_a_time_lim = 10;\n        int pack_b_time_lim = 20;\n        double pack_a_addtional_fee = 2.00;\n        double pack_b_addtional_fee = 1.00;\n        double totalBill = 0;\n        \n        System.out.println(&quot;What package do you have?&quot;);\n        package_chosen = scanner.nextLine();\n        \n        switch (package_chosen)\n        {\n        case (&quot;c&quot;):\n            System.out.println(&quot;Your bill amounts to $&quot; + package_c + &quot; per month.&quot;);\n            break;\n        case (&quot;a&quot;):\n            System.out.println(&quot;How many hours of internet did you use?&quot;);\n            hours_used = scanner.nextInt();\n            \n            if (hours_used &lt;= 10); \n            {\n                System.out.println(&quot;Your bill amounts to $&quot; + package_a + &quot; per month.&quot;);\n            }\n            if (hours_used &gt; 10);\n            {\n            additional_hours = hours_used - pack_a_time_lim; \n            additional_charge = additional_hours * pack_a_addtional_fee;\n            totalBill = package_a + additional_charge;\n    \n            System.out.println(&quot;Your bill amounts to $&quot; + totalBill);\n            }\n            break;\n            }\n        }\n}\n\n    \n</code></pre>\n<p>This is my code, I am not done but I ran into the following issues:\ninside the case statemen I can type 'if' but recieve an error when I type else. And if I do just put If twice then bothe statements print instead of one</p>\n<p>i.e</p>\n<pre><code>What package do you have?\na\nHow many hours of internet did you use?\n11\nYour bill amounts to $9.95 per month. **HOW DO I REMOVE THIS LINE**\nYour bill amounts to $11.95\n</code></pre>\n<p>I tried doing next.Line to skip a line but when I do that only the first statement prints,\n&quot;Your bill amounts to $9.95 per month.&quot; But in my case I want only the second statement to print</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1695800052,"post_id":77181444,"comment_id":136070990,"body_markdown":"Can you try to do what I wrote on my answer ?","body":"Can you try to do what I wrote on my answer ?"},{"owner":{"account_id":12260786,"reputation":215,"user_id":8948544,"display_name":"Karthik Sankaran"},"score":0,"creation_date":1695827137,"post_id":77181444,"comment_id":136076646,"body_markdown":"So, SO marked this as a duplicate ... and the linked answer helped resolve my issue.","body":"So, SO marked this as a duplicate ... and the linked answer helped resolve my issue."}],"answers":[{"comments":[{"owner":{"account_id":12260786,"reputation":215,"user_id":8948544,"display_name":"Karthik Sankaran"},"score":0,"creation_date":1695827076,"post_id":77181650,"comment_id":136076631,"body_markdown":"Unfortunately, removing the two lines did not fix the issue. I have already defined my login controller as you have described","body":"Unfortunately, removing the two lines did not fix the issue. I have already defined my login controller as you have described"},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1695827340,"post_id":77181650,"comment_id":136076697,"body_markdown":"`.requestMatchers(mvcMatcherBuilder.pattern(&quot;/WEB-INF/**&quot;)).permitAll()` this should help you.","body":"<code>.requestMatchers(mvcMatcherBuilder.pattern(&quot;&#47;WEB-INF&#47;**&quot;)).p&zwnj;&#8203;ermitAll()</code> this should help you."}],"tags":[],"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"comment_count":2,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1695795175,"creation_date":1695744070,"answer_id":77181650,"question_id":77181444,"body_markdown":"Just remove next two lines of code from `filterChain`:\r\n\r\n              \r\n    .requestMatchers(mvcMatcherBuilder.pattern(&quot;/login**&quot;)).permitAll()\r\n    .requestMatchers(mvcMatcherBuilder.pattern(&quot;/logout&quot;)).permitAll()\r\n\r\nBecause you have to declare it in `formLogin()` parameter.\r\n\r\nAlso be sure that you custom controller(login method) that is responsable to treat login look something like this\r\n\r\n    @Controller\r\n    class LoginController {\r\n    \t@GetMapping(&quot;/login&quot;)\r\n    \tString login() {\r\n    \t\treturn &quot;login&quot;;\r\n    \t}\r\n    }\r\n\r\nMore details about it you can find if you will read [documentation][1] \r\n\r\n\r\nAnd also add one more `requestMatchers`\r\n\r\n    .requestMatchers(mvcMatcherBuilder.pattern(&quot;/WEB-INF/**&quot;)).permitAll()\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/reference/servlet/authentication/passwords/form.html","title":"SecurityConfig results in TOO_MANY_REDIRECTS after migrating from Spring Boot 2.7 to Spring Boot 3.0","body":"<p>Just remove next two lines of code from <code>filterChain</code>:</p>\n<pre><code>.requestMatchers(mvcMatcherBuilder.pattern(&quot;/login**&quot;)).permitAll()\n.requestMatchers(mvcMatcherBuilder.pattern(&quot;/logout&quot;)).permitAll()\n</code></pre>\n<p>Because you have to declare it in <code>formLogin()</code> parameter.</p>\n<p>Also be sure that you custom controller(login method) that is responsable to treat login look something like this</p>\n<pre><code>@Controller\nclass LoginController {\n    @GetMapping(&quot;/login&quot;)\n    String login() {\n        return &quot;login&quot;;\n    }\n}\n</code></pre>\n<p>More details about it you can find if you will read <a href=\"https://docs.spring.io/spring-security/reference/servlet/authentication/passwords/form.html\" rel=\"nofollow noreferrer\">documentation</a></p>\n<p>And also add one more <code>requestMatchers</code></p>\n<pre><code>.requestMatchers(mvcMatcherBuilder.pattern(&quot;/WEB-INF/**&quot;)).permitAll()\n</code></pre>\n"}],"owner":{"account_id":12260786,"reputation":215,"user_id":8948544,"display_name":"Karthik Sankaran"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":89,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1695813485,"answer_count":1,"score":-1,"last_activity_date":1695795175,"creation_date":1695742431,"question_id":77181444,"body_markdown":"I am trying to migrate an existing project from Spring Boot 2.7 to Spring Boot 3.0 (3.0.11). As part of this change, I know I need to update the SecurityConfig I use for Spring Security.\r\nIn 2.7, I was able to successfully migrate from overriding ```configure``` (and extending ```WebSecurityConfigurerAdapter```) to creating a ```filterChain``` Bean. I also started making use of the new Lambda DSL syntax.\r\n\r\nThe 2.7 code that works looks something like:\r\n```\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        http\r\n            .authorizeHttpRequests(authorizeRequests -&gt; {\r\n                authorizeRequests\r\n                    .antMatchers(&quot;/admin/**&quot;).hasAuthority(&quot;ADMIN&quot;)\r\n                    .antMatchers(\r\n                        &quot;/images/**&quot;, \r\n                        &quot;/js/**&quot;,\r\n                        &quot;/css/**&quot;,\r\n                        &quot;/login**&quot;,\r\n                        &quot;/logout&quot;,\r\n                        ...\r\n                    ).permitAll().anyRequest().authenticated();\r\n            }).formLogin(formLogin -&gt; {\r\n                formLogin\r\n                    .loginPage(&quot;/login&quot;)\r\n                    .permitAll();\r\n            }).logout().logoutUrl(&quot;/logout&quot;)\r\n                .permitAll();\r\n\r\n        return http.build();\r\n    }\r\n```\r\n\r\nI modified the code for Spring Boot 3.0 as follows:\r\n```\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http, HandlerMappingIntrospector introspector) throws Exception {\r\n        MvcRequestMatcher.Builder mvcMatcherBuilder = new MvcRequestMatcher.Builder(introspector);\r\n\r\n        http\r\n            .authorizeHttpRequests(authorizeRequests -&gt; {\r\n                authorizeRequests\r\n                    .requestMatchers(mvcMatcherBuilder.pattern(&quot;/admin/**&quot;)).hasAuthority(&quot;ADMIN&quot;)\r\n                    .requestMatchers(mvcMatcherBuilder.pattern(&quot;/images/**&quot;)).permitAll()\r\n                    .requestMatchers(mvcMatcherBuilder.pattern(&quot;/js/**&quot;)).permitAll()\r\n                    .requestMatchers(mvcMatcherBuilder.pattern(&quot;/css/**&quot;)).permitAll()\r\n                    .requestMatchers(mvcMatcherBuilder.pattern(&quot;/login**&quot;)).permitAll()\r\n                    .requestMatchers(mvcMatcherBuilder.pattern(&quot;/logout&quot;)).permitAll()\r\n                    \r\n                    .anyRequest().authenticated();\r\n            }).formLogin(formLogin -&gt; {\r\n                formLogin\r\n                    .loginPage(&quot;/login&quot;)\r\n                    .permitAll();\r\n            }).logout().logoutUrl(&quot;/logout&quot;)\r\n                .permitAll();\r\n\r\n        return http.build();\r\n    }\r\n```\r\n\r\nThis new code returns an ```ERR_TOO_MANY_REDIRECTS``` when I try to open the ```/login``` page in Google Chrome. From my understanding, this happens if the rules listed in my code above are not being properly parsed.\r\n\r\nThe endpoint of my login page is defined as:\r\n```\r\n@Controller\r\npublic class AppController {\r\n    ...\r\n    @RequestMapping(&quot;/login&quot;)\r\n\tpublic String getLoginPage(Model model) {\r\n\t\treturn &quot;login&quot;;\r\n\t}\r\n    ...\r\n}\r\n```\r\nThis points to my ```login.jsp``` page\r\n\r\nWhat am I doing wrong here and how can I get this to work in Spring Boot 3.0 .\r\nNOTE: I am aware of Spring Boot 3.1, but I don&#39;t want to upgrade until I can get everything working in 3.0 (according to the documentation, 3.1 should not have any breaking changes).","title":"SecurityConfig results in TOO_MANY_REDIRECTS after migrating from Spring Boot 2.7 to Spring Boot 3.0","body":"<p>I am trying to migrate an existing project from Spring Boot 2.7 to Spring Boot 3.0 (3.0.11). As part of this change, I know I need to update the SecurityConfig I use for Spring Security.\nIn 2.7, I was able to successfully migrate from overriding <code>configure</code> (and extending <code>WebSecurityConfigurerAdapter</code>) to creating a <code>filterChain</code> Bean. I also started making use of the new Lambda DSL syntax.</p>\n<p>The 2.7 code that works looks something like:</p>\n<pre><code>    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http\n            .authorizeHttpRequests(authorizeRequests -&gt; {\n                authorizeRequests\n                    .antMatchers(&quot;/admin/**&quot;).hasAuthority(&quot;ADMIN&quot;)\n                    .antMatchers(\n                        &quot;/images/**&quot;, \n                        &quot;/js/**&quot;,\n                        &quot;/css/**&quot;,\n                        &quot;/login**&quot;,\n                        &quot;/logout&quot;,\n                        ...\n                    ).permitAll().anyRequest().authenticated();\n            }).formLogin(formLogin -&gt; {\n                formLogin\n                    .loginPage(&quot;/login&quot;)\n                    .permitAll();\n            }).logout().logoutUrl(&quot;/logout&quot;)\n                .permitAll();\n\n        return http.build();\n    }\n</code></pre>\n<p>I modified the code for Spring Boot 3.0 as follows:</p>\n<pre><code>    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http, HandlerMappingIntrospector introspector) throws Exception {\n        MvcRequestMatcher.Builder mvcMatcherBuilder = new MvcRequestMatcher.Builder(introspector);\n\n        http\n            .authorizeHttpRequests(authorizeRequests -&gt; {\n                authorizeRequests\n                    .requestMatchers(mvcMatcherBuilder.pattern(&quot;/admin/**&quot;)).hasAuthority(&quot;ADMIN&quot;)\n                    .requestMatchers(mvcMatcherBuilder.pattern(&quot;/images/**&quot;)).permitAll()\n                    .requestMatchers(mvcMatcherBuilder.pattern(&quot;/js/**&quot;)).permitAll()\n                    .requestMatchers(mvcMatcherBuilder.pattern(&quot;/css/**&quot;)).permitAll()\n                    .requestMatchers(mvcMatcherBuilder.pattern(&quot;/login**&quot;)).permitAll()\n                    .requestMatchers(mvcMatcherBuilder.pattern(&quot;/logout&quot;)).permitAll()\n                    \n                    .anyRequest().authenticated();\n            }).formLogin(formLogin -&gt; {\n                formLogin\n                    .loginPage(&quot;/login&quot;)\n                    .permitAll();\n            }).logout().logoutUrl(&quot;/logout&quot;)\n                .permitAll();\n\n        return http.build();\n    }\n</code></pre>\n<p>This new code returns an <code>ERR_TOO_MANY_REDIRECTS</code> when I try to open the <code>/login</code> page in Google Chrome. From my understanding, this happens if the rules listed in my code above are not being properly parsed.</p>\n<p>The endpoint of my login page is defined as:</p>\n<pre><code>@Controller\npublic class AppController {\n    ...\n    @RequestMapping(&quot;/login&quot;)\n    public String getLoginPage(Model model) {\n        return &quot;login&quot;;\n    }\n    ...\n}\n</code></pre>\n<p>This points to my <code>login.jsp</code> page</p>\n<p>What am I doing wrong here and how can I get this to work in Spring Boot 3.0 .\nNOTE: I am aware of Spring Boot 3.1, but I don't want to upgrade until I can get everything working in 3.0 (according to the documentation, 3.1 should not have any breaking changes).</p>\n"},{"tags":["java","hibernate","jpa","orm"],"comments":[{"owner":{"account_id":2366187,"reputation":60162,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":0,"creation_date":1418495452,"post_id":27462185,"comment_id":43360763,"body_markdown":"You are absolutely right. ORM is simply a name for the concept or mapping OO -&gt; RMDBS. JPA is the Java Persistence API, specified as part of the JavaEE spec. Hibernate is one of the implementations or that API. There are many versions of JPA and different versions of Hibernate implement different versions of the JPA API.","body":"You are absolutely right. ORM is simply a name for the concept or mapping OO -&gt; RMDBS. JPA is the Java Persistence API, specified as part of the JavaEE spec. Hibernate is one of the implementations or that API. There are many versions of JPA and different versions of Hibernate implement different versions of the JPA API."},{"owner":{"account_id":422964,"reputation":33652,"user_id":802050,"accept_rate":89,"display_name":"M Sach"},"score":3,"creation_date":1418495518,"post_id":27462185,"comment_id":43360787,"body_markdown":"I am not sure why it received negative vote that too with in 5 seconds of posting. Would appreciate if downvoter can give me feedback so that i can improve next time","body":"I am not sure why it received negative vote that too with in 5 seconds of posting. Would appreciate if downvoter can give me feedback so that i can improve next time"},{"owner":{"account_id":422964,"reputation":33652,"user_id":802050,"accept_rate":89,"display_name":"M Sach"},"score":0,"creation_date":1418495645,"post_id":27462185,"comment_id":43360816,"body_markdown":"@BoristheSpider Thanx. Am i correct about JPA too ?","body":"@BoristheSpider Thanx. Am i correct about JPA too ?"},{"owner":{"account_id":2366187,"reputation":60162,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":1,"creation_date":1418496069,"post_id":27462185,"comment_id":43360935,"body_markdown":"Mostly there. JPA isn&#39;t a &quot;high level&quot; API, it&#39;s just a specification of an ORM framework. It&#39;s very similar to the Java Servlet API or the Java Transaction API etc - all part of JavaEE. iBATIS isn&#39;t a JPA implementation.","body":"Mostly there. JPA isn&#39;t a &quot;high level&quot; API, it&#39;s just a specification of an ORM framework. It&#39;s very similar to the Java Servlet API or the Java Transaction API etc - all part of JavaEE. iBATIS isn&#39;t a JPA implementation."},{"owner":{"account_id":6901499,"reputation":518,"user_id":5300967,"display_name":"Vladimir Vaschenko"},"score":0,"creation_date":1444712513,"post_id":27462185,"comment_id":54004713,"body_markdown":"So, what is the question here?","body":"So, what is the question here?"},{"owner":{"account_id":22001,"reputation":3378,"user_id":53915,"accept_rate":88,"display_name":"Arthur"},"score":6,"creation_date":1465374447,"post_id":27462185,"comment_id":62869242,"body_markdown":"&quot;I am not sure if i am right about JPA vs ORM&quot; Implies **Am I right about JPA vs ORM?** So I think there is a question, Some people just like to downvote I think.","body":"&quot;I am not sure if i am right about JPA vs ORM&quot; Implies <b>Am I right about JPA vs ORM?</b> So I think there is a question, Some people just like to downvote I think."}],"answers":[{"comments":[{"owner":{"account_id":949995,"reputation":678,"user_id":976335,"display_name":"Rakesh Bhalani"},"score":2,"creation_date":1547034615,"post_id":33092172,"comment_id":95051011,"body_markdown":"@HalfBloodPrince, \nAs Kevin said above, ORM is the approach of mapping objects to relational database tables. Any framework which provide object-database table mapping mechanism are called ORM frameworks. \nHibernate is ORM framework already there in market before JPA specification came into existence. Earlier there was their own implementation of Hibernate (A ORM framework) , after then Hibernate created implementation of JPA.\nToday, there are two flavor of Hibernate 1. Own implementation 2. JPA implementation","body":"@HalfBloodPrince,  As Kevin said above, ORM is the approach of mapping objects to relational database tables. Any framework which provide object-database table mapping mechanism are called ORM frameworks.  Hibernate is ORM framework already there in market before JPA specification came into existence. Earlier there was their own implementation of Hibernate (A ORM framework) , after then Hibernate created implementation of JPA. Today, there are two flavor of Hibernate 1. Own implementation 2. JPA implementation"},{"owner":{"account_id":175930,"reputation":2593,"user_id":406290,"accept_rate":43,"display_name":"Kevin Hooke"},"score":1,"creation_date":1547069405,"post_id":33092172,"comment_id":95069801,"body_markdown":"@RakeshBhalani I think it&#39;s clearer to say a subset of Hibernate&#39;s features provide an implementation of the JPA spec, and in additional Hibernate provides additional features that are above and beyond the features required in the JPA spec. In other words, the JPA part of Hibernate is a subset of the complete set of features Hibernate provides","body":"@RakeshBhalani I think it&#39;s clearer to say a subset of Hibernate&#39;s features provide an implementation of the JPA spec, and in additional Hibernate provides additional features that are above and beyond the features required in the JPA spec. In other words, the JPA part of Hibernate is a subset of the complete set of features Hibernate provides"}],"tags":[],"owner":{"account_id":175930,"reputation":2593,"user_id":406290,"accept_rate":43,"display_name":"Kevin Hooke"},"comment_count":2,"down_vote_count":0,"up_vote_count":56,"is_accepted":false,"score":56,"last_activity_date":1633629230,"creation_date":1444695195,"answer_id":33092172,"question_id":27462185,"body_markdown":"1. ORM is the approach of taking object-oriented data and mapping to a relational data store (e.g. tables in a RDBMS)\r\n\r\n2. JPA is the Java EE standard specification for ORM in Java EE.\r\n\r\n3. The reference implementation for JPA is EclipseLink. If you don&#39;t explictly configure a provider, EclipseLink is used under the covers.\r\n\r\n4. Hibernate is another implementation of the JPA specification, in that you can use the standard JPA APIs and configure your application to use Hibernate as the provider of the spec under the covers.\r\n\r\n5. Hibernate also provides a superset of the ORM features beyond what is specified in the JPA spec. Meaning, that while it provides an implementation of the JPA API, it also provides more features beyond what JPA specifies.","title":"JPA vs ORM vs Hibernate?","body":"<ol>\n<li><p>ORM is the approach of taking object-oriented data and mapping to a relational data store (e.g. tables in a RDBMS)</p>\n</li>\n<li><p>JPA is the Java EE standard specification for ORM in Java EE.</p>\n</li>\n<li><p>The reference implementation for JPA is EclipseLink. If you don't explictly configure a provider, EclipseLink is used under the covers.</p>\n</li>\n<li><p>Hibernate is another implementation of the JPA specification, in that you can use the standard JPA APIs and configure your application to use Hibernate as the provider of the spec under the covers.</p>\n</li>\n<li><p>Hibernate also provides a superset of the ORM features beyond what is specified in the JPA spec. Meaning, that while it provides an implementation of the JPA API, it also provides more features beyond what JPA specifies.</p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":7594912,"reputation":71,"user_id":5761361,"display_name":"Miguel &#193;ngel"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1472751448,"creation_date":1472751448,"answer_id":39277725,"question_id":27462185,"body_markdown":"The only mistake you seemed to make in your understanding is \r\n&gt;Its the one step above ORM\r\n\r\nOne quick note, The libraries starting with javax.persistence are associated with JPA. You should prefer these over Hibernate Libraries whenever possible. Because these are Portable. However, you will get some extra features in Hibernate, and in those precise cases, please feel free to use Hibernate.","title":"JPA vs ORM vs Hibernate?","body":"<p>The only mistake you seemed to make in your understanding is </p>\n\n<blockquote>\n  <p>Its the one step above ORM</p>\n</blockquote>\n\n<p>One quick note, The libraries starting with javax.persistence are associated with JPA. You should prefer these over Hibernate Libraries whenever possible. Because these are Portable. However, you will get some extra features in Hibernate, and in those precise cases, please feel free to use Hibernate.</p>\n"},{"tags":[],"owner":{"account_id":23195966,"reputation":1,"user_id":17291602,"display_name":"ibrahim Bayburtlu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695793539,"creation_date":1695793539,"answer_id":77184918,"question_id":27462185,"body_markdown":"Hibernate Object Relational Mapping is also known as object-relational mapping. Hibernate is actually an implementation of JPA. JPA is an API that allows us to perform ORM operations in Java. Thanks to Hibernate, we can establish a connection between objects and the table in the database. As a result of this installation, we perform insertion, deletion and update operations on the database.\r\n\r\nORM : it is tool for Object Relational Mapping","title":"JPA vs ORM vs Hibernate?","body":"<p>Hibernate Object Relational Mapping is also known as object-relational mapping. Hibernate is actually an implementation of JPA. JPA is an API that allows us to perform ORM operations in Java. Thanks to Hibernate, we can establish a connection between objects and the table in the database. As a result of this installation, we perform insertion, deletion and update operations on the database.</p>\n<p>ORM : it is tool for Object Relational Mapping</p>\n"}],"owner":{"account_id":422964,"reputation":33652,"user_id":802050,"accept_rate":89,"display_name":"M Sach"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63483,"favorite_count":0,"down_vote_count":1,"up_vote_count":75,"answer_count":3,"score":74,"last_activity_date":1695793539,"creation_date":1418495115,"question_id":27462185,"body_markdown":"I have read about them through various resources. Importants ones are :-\r\n\r\n 1. Wikipedia article about each of them\r\n 2. https://stackoverflow.com/questions/9881611/whats-the-difference-between-jpa-and-hibernate\r\n\r\nHere is my understanding about whats the  difference b/w them. I am not sure if i am right about JPA vs ORM\r\n\r\n1. **ORM:** Object Relational Mapping is concept/process of converting the data from  Object oriented language to relational DB and vice versa\r\nFor example in   java its done with the help of reflection and jdbc.\r\n\r\n2. **Hibernate:** Its the implementation of above concept.\r\n\r\n3. **JPA:** Its the one step above ORM. Its high level API and specification so that different ORM tools can implement so that it provides\r\nthe flexibility to developer to change the implementation from one ORM to another (for example if application uses the JPA api and implementaion\r\nis hibernate. In future it can switch to IBatis if required. But on the other if application directly lock the implementation with\r\nHibernate without JPA platform, switiching is going to be herculean task)\r\n\r\nThere can be ORM implementation with/without JPA specification.For example as per this [link][1] under hibernate section only \r\nHibernate versions 3.2 and later provide an implementation for the Java Persistence API\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Java_Persistence_API#Hibernate","title":"JPA vs ORM vs Hibernate?","body":"<p>I have read about them through various resources. Importants ones are :-</p>\n\n<ol>\n<li>Wikipedia article about each of them</li>\n<li><a href=\"https://stackoverflow.com/questions/9881611/whats-the-difference-between-jpa-and-hibernate\">What&#39;s the difference between JPA and Hibernate?</a></li>\n</ol>\n\n<p>Here is my understanding about whats the  difference b/w them. I am not sure if i am right about JPA vs ORM</p>\n\n<ol>\n<li><p><strong>ORM:</strong> Object Relational Mapping is concept/process of converting the data from  Object oriented language to relational DB and vice versa\nFor example in   java its done with the help of reflection and jdbc.</p></li>\n<li><p><strong>Hibernate:</strong> Its the implementation of above concept.</p></li>\n<li><p><strong>JPA:</strong> Its the one step above ORM. Its high level API and specification so that different ORM tools can implement so that it provides\nthe flexibility to developer to change the implementation from one ORM to another (for example if application uses the JPA api and implementaion\nis hibernate. In future it can switch to IBatis if required. But on the other if application directly lock the implementation with\nHibernate without JPA platform, switiching is going to be herculean task)</p></li>\n</ol>\n\n<p>There can be ORM implementation with/without JPA specification.For example as per this <a href=\"http://en.wikipedia.org/wiki/Java_Persistence_API#Hibernate\" rel=\"noreferrer\">link</a> under hibernate section only \nHibernate versions 3.2 and later provide an implementation for the Java Persistence API</p>\n"},{"tags":["java","spring","aop"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1695728065,"post_id":77179612,"comment_id":136060456,"body_markdown":"not sure, but it&#39;s possible you have to make sure aop knows which method of which class it&#39;s applied on.","body":"not sure, but it&#39;s possible you have to make sure aop knows which method of which class it&#39;s applied on."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1695728691,"post_id":77179612,"comment_id":136060571,"body_markdown":"And it should because? THe aspect isn&#39;t even scanned or created (no aspect in use for that matter) nor does your aspect contain a proper expression afaik.","body":"And it should because? THe aspect isn&#39;t even scanned or created (no aspect in use for that matter) nor does your aspect contain a proper expression afaik."},{"owner":{"account_id":29537935,"reputation":1,"user_id":22637206,"display_name":"Hubert Wajda"},"score":0,"creation_date":1695733076,"post_id":77179612,"comment_id":136061546,"body_markdown":"Yes, you&#39;re right, missing @ComponentScan(basePackages = &quot;com.example.demo&quot;) in AppConfig class. Thanks!","body":"Yes, you&#39;re right, missing @ComponentScan(basePackages = &quot;com.example.demo&quot;) in AppConfig class. Thanks!"}],"answers":[{"comments":[{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1697088020,"post_id":77184894,"comment_id":136235780,"body_markdown":"This answer is wrong. The OP&#39;s poinctut loks fine to me. It will apply to all methods matching the name, return type and modifiers, without regard to the class the methods belong to. This is valid AspectJ syntax.","body":"This answer is wrong. The OP&#39;s poinctut loks fine to me. It will apply to all methods matching the name, return type and modifiers, without regard to the class the methods belong to. This is valid AspectJ syntax."}],"tags":[],"owner":{"account_id":29534919,"reputation":1,"user_id":22634694,"display_name":"OutOfMemory"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695793193,"creation_date":1695793193,"answer_id":77184894,"question_id":77179612,"body_markdown":"You coded a wrong pointcut expression。Spring does not know what class or witch package to find your [public String getName()] method.\r\nI googled a example you can reference。\r\n\r\n&gt; @Before(&quot;execution(public * com.wener.example.aop.execution.ExecutionService.add(..))&quot;)\r\n\r\n\r\n","title":"@Aspect in spring","body":"<p>You coded a wrong pointcut expression。Spring does not know what class or witch package to find your [public String getName()] method.\nI googled a example you can reference。</p>\n<blockquote>\n<p>@Before(&quot;execution(public * com.wener.example.aop.execution.ExecutionService.add(..))&quot;)</p>\n</blockquote>\n"}],"owner":{"account_id":29537935,"reputation":1,"user_id":22637206,"display_name":"Hubert Wajda"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695793193,"creation_date":1695727725,"question_id":77179612,"body_markdown":"I try use `@Aspect` in spring application. I would like before executing method `getName()`, execute method `getNameAdvice()`. It helps me understand `@Aspect` in spring,  but I can&#39;t understand, why it doesn&#39;t work. Method `getNameAdvice()` just doesn&#39;t execute. Intelij see that method `getNameAdvice()`  for method `getName()`. It is very weird. \r\n\r\n```java\r\npackage com.example.demo;\r\n\r\nimport org.springframework.context.annotation.AnnotationConfigApplicationContext;\r\n\r\npublic class DemoApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\r\n\t\tAnnotationConfigApplicationContext applicationContext = new AnnotationConfigApplicationContext(AppConfig.class);\r\n\t\tEmployee employee = applicationContext.getBean(Employee.class);\r\n\t\tSystem.out.println(employee.getName());\r\n\t}\r\n\r\n}\r\n```\r\n```java\r\npackage com.example.demo;\r\n\r\n\r\npublic class Employee {\r\n    String name;\r\n    public Employee(String name) {\r\n        this.name = name;\r\n    }\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n}\r\n```\r\n```java\r\npackage com.example.demo;\r\n\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.context.annotation.EnableAspectJAutoProxy;\r\n\r\n@Configuration\r\n@EnableAspectJAutoProxy\r\npublic class AppConfig {\r\n    @Bean(name =&quot;employee&quot;)\r\n    public Employee employee(){\r\n        return new Employee(&quot;Jan&quot;);\r\n    }\r\n}\r\n```\r\n```java\r\npackage com.example.demo;\r\n\r\nimport org.aspectj.lang.annotation.Aspect;\r\nimport org.aspectj.lang.annotation.Before;\r\nimport org.springframework.stereotype.Component;\r\n\r\n@Component\r\n@Aspect\r\npublic class EmployeeAspect {\r\n\r\n    @Before(&quot;execution(public String getName())&quot;)\r\n    public void getNameAdvice(){\r\n        System.out.println(&quot;Executing Advice on getName()&quot;);\r\n    }\r\n}\r\n```","title":"@Aspect in spring","body":"<p>I try use <code>@Aspect</code> in spring application. I would like before executing method <code>getName()</code>, execute method <code>getNameAdvice()</code>. It helps me understand <code>@Aspect</code> in spring,  but I can't understand, why it doesn't work. Method <code>getNameAdvice()</code> just doesn't execute. Intelij see that method <code>getNameAdvice()</code>  for method <code>getName()</code>. It is very weird.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.demo;\n\nimport org.springframework.context.annotation.AnnotationConfigApplicationContext;\n\npublic class DemoApplication {\n\n    public static void main(String[] args) {\n\n        AnnotationConfigApplicationContext applicationContext = new AnnotationConfigApplicationContext(AppConfig.class);\n        Employee employee = applicationContext.getBean(Employee.class);\n        System.out.println(employee.getName());\n    }\n\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.demo;\n\n\npublic class Employee {\n    String name;\n    public Employee(String name) {\n        this.name = name;\n    }\n    public String getName() {\n        return name;\n    }\n\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.demo;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.context.annotation.EnableAspectJAutoProxy;\n\n@Configuration\n@EnableAspectJAutoProxy\npublic class AppConfig {\n    @Bean(name =&quot;employee&quot;)\n    public Employee employee(){\n        return new Employee(&quot;Jan&quot;);\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.demo;\n\nimport org.aspectj.lang.annotation.Aspect;\nimport org.aspectj.lang.annotation.Before;\nimport org.springframework.stereotype.Component;\n\n@Component\n@Aspect\npublic class EmployeeAspect {\n\n    @Before(&quot;execution(public String getName())&quot;)\n    public void getNameAdvice(){\n        System.out.println(&quot;Executing Advice on getName()&quot;);\n    }\n}\n</code></pre>\n"},{"tags":["java","indexoutofboundsexception"],"comments":[{"owner":{"display_name":"user2711811"},"score":2,"creation_date":1582133429,"post_id":60306062,"comment_id":106675378,"body_markdown":"Try `j&lt;num` in for loop.  Can&#39;t say about accessing `args` with `j` though.  Probably need to include how you would invoke this program i.e. parameters.","body":"Try <code>j&lt;num</code> in for loop.  Can&#39;t say about accessing <code>args</code> with <code>j</code> though.  Probably need to include how you would invoke this program i.e. parameters."},{"owner":{"account_id":17800403,"reputation":1,"user_id":12927319,"display_name":"theearner360"},"score":0,"creation_date":1587191741,"post_id":60306062,"comment_id":108417091,"body_markdown":"hi did you get this code working ?","body":"hi did you get this code working ?"}],"answers":[{"tags":[],"owner":{"account_id":11502933,"reputation":5909,"user_id":8430155,"display_name":"Harshal Parekh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582134158,"creation_date":1582133738,"answer_id":60306177,"question_id":60306062,"body_markdown":"    for (j=0; j&lt;=num; j++)\r\n\r\nThis is wrong. It should be:\r\n\r\n    for (j = 0; j &lt; num; j++)\r\n\r\nWhy? Assume `num` is 5. Before this line you initialized `even` to 5. The indices of `even` would be 0, 1, 2, 3, 4. \r\n\r\nNow, with `j&lt;=num`, you are trying to access the index 5, which does not exist and hence the exception.\r\n\r\n\r\n----------\r\n\r\n\r\n    args[j]= Integer.toString(num);\r\n\r\nThis line will raise another exception. I am assuming you&#39;re only passing one parameter from the command line which is `args[0]`. This means the `args` array is of size 1 and you cannot add more elements to it.\r\n\r\nAlso, it is not a good practice to add/modify elements to the `args` array. You should create a new array for this. ","title":"Java code to generate comma separated values and sum","body":"<pre><code>for (j=0; j&lt;=num; j++)\n</code></pre>\n\n<p>This is wrong. It should be:</p>\n\n<pre><code>for (j = 0; j &lt; num; j++)\n</code></pre>\n\n<p>Why? Assume <code>num</code> is 5. Before this line you initialized <code>even</code> to 5. The indices of <code>even</code> would be 0, 1, 2, 3, 4. </p>\n\n<p>Now, with <code>j&lt;=num</code>, you are trying to access the index 5, which does not exist and hence the exception.</p>\n\n<hr>\n\n<pre><code>args[j]= Integer.toString(num);\n</code></pre>\n\n<p>This line will raise another exception. I am assuming you're only passing one parameter from the command line which is <code>args[0]</code>. This means the <code>args</code> array is of size 1 and you cannot add more elements to it.</p>\n\n<p>Also, it is not a good practice to add/modify elements to the <code>args</code> array. You should create a new array for this. </p>\n"},{"tags":[],"owner":{"account_id":18941843,"reputation":1,"user_id":13821697,"display_name":"Umapathy M"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1593211561,"creation_date":1593209037,"answer_id":62603416,"question_id":60306062,"body_markdown":"Please find the much simpler version of the Code by avoiding the `Integer.toString` and `String.join` to pass on the Arguments. Simple Integer `Arraylist` and adding the elements to will do the Trick.\r\n\r\n\r\n    package com.umapathy.java.learning.programs;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    public class EvenSum \r\n    {\r\n\t\tpublic static void main(String[] args)\r\n\t{\t\r\n\t\tint num = 20; //Initialize the user-defined value for the loop execution\r\n\t    int sum = 0 ; //Initialize the Sum Value as 0\r\n\t\tList&lt;Integer&gt; evenlist = new ArrayList&lt;Integer&gt;(); //Define an integer \r\n        Array list\r\n\t\tfor (int i=2; i&lt;=num; i++) //Begin the loop from the value of 2 \r\n\t\t{\r\n          if(i%2==0) //Logic to find whether a given number is Even Number or not\r\n          {\r\n          sum = sum + i;  // If the logic returns true, Calculate the Sum Value \r\n          evenlist.add(i); // Add the Integer to the previous defined Integer \r\n                           // Arraylist by calling add method\r\n           }        \r\n\t\t}\r\n\t    System.out.println(evenlist); // Print the Output outside the loops\r\n\t\tSystem.out.println(sum);\r\n\t     }\r\n      }\r\n\r\n \r\n\r\nOutput Generated as follows:--\r\n\r\n    [2, 4, 6, 8, 10, 12, 14, 16, 18, 20] 110\r\n","title":"Java code to generate comma separated values and sum","body":"<p>Please find the much simpler version of the Code by avoiding the <code>Integer.toString</code> and <code>String.join</code> to pass on the Arguments. Simple Integer <code>Arraylist</code> and adding the elements to will do the Trick.</p>\n<pre><code>package com.umapathy.java.learning.programs;\nimport java.util.ArrayList;\nimport java.util.List;\npublic class EvenSum \n{\n    public static void main(String[] args)\n{   \n    int num = 20; //Initialize the user-defined value for the loop execution\n    int sum = 0 ; //Initialize the Sum Value as 0\n    List&lt;Integer&gt; evenlist = new ArrayList&lt;Integer&gt;(); //Define an integer \n    Array list\n    for (int i=2; i&lt;=num; i++) //Begin the loop from the value of 2 \n    {\n      if(i%2==0) //Logic to find whether a given number is Even Number or not\n      {\n      sum = sum + i;  // If the logic returns true, Calculate the Sum Value \n      evenlist.add(i); // Add the Integer to the previous defined Integer \n                       // Arraylist by calling add method\n       }        \n    }\n    System.out.println(evenlist); // Print the Output outside the loops\n    System.out.println(sum);\n     }\n  }\n</code></pre>\n<p>Output Generated as follows:--</p>\n<pre><code>[2, 4, 6, 8, 10, 12, 14, 16, 18, 20] 110\n</code></pre>\n"},{"comments":[{"owner":{"account_id":113555,"reputation":1226,"user_id":299014,"accept_rate":82,"display_name":"JRSofty"},"score":0,"creation_date":1593459920,"post_id":62645022,"comment_id":110784202,"body_markdown":"An explanation of your code sample might assist the person asking the question to better understand how this will fix the problem.","body":"An explanation of your code sample might assist the person asking the question to better understand how this will fix the problem."}],"tags":[],"owner":{"account_id":18960996,"reputation":1,"user_id":13836514,"display_name":"Billa"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1593490491,"creation_date":1593457391,"answer_id":62645022,"question_id":60306062,"body_markdown":"```\r\npackage javaApp;\r\n\r\npublic class EvenSum {\r\n\r\n    public static void main(String[] args) {\r\n        int num = 20;\r\n        int even[] = new int[num];\r\n        int sum = 0,j = 0;\r\n        String evennums = &quot;&quot;;\r\n        for(j=1; j&lt;=num; j++) {\r\n            if(j%2==0) {\r\n                sum=sum+j;\r\n                evennums=evennums+&quot;,&quot;+j;\r\n            }\r\n        }\r\n        evennums=evennums.replaceFirst(&quot;,&quot;,&quot;&quot;);\r\n        System.out.println(evennums);\r\n        System.out.println(sum);\r\n    }\r\n}\r\n```\r\n","title":"Java code to generate comma separated values and sum","body":"<pre><code>package javaApp;\n\npublic class EvenSum {\n\n    public static void main(String[] args) {\n        int num = 20;\n        int even[] = new int[num];\n        int sum = 0,j = 0;\n        String evennums = &quot;&quot;;\n        for(j=1; j&lt;=num; j++) {\n            if(j%2==0) {\n                sum=sum+j;\n                evennums=evennums+&quot;,&quot;+j;\n            }\n        }\n        evennums=evennums.replaceFirst(&quot;,&quot;,&quot;&quot;);\n        System.out.println(evennums);\n        System.out.println(sum);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15974771,"reputation":1023,"user_id":11527968,"display_name":"Jimmy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1593496254,"creation_date":1593495461,"answer_id":62650929,"question_id":60306062,"body_markdown":"Why initialized the even array size if its actual length is unknown in initially. It&#39;s better to go with ArrayList in this case which have characteristic to grow dynamically.\r\n\r\n**Try in this way**\r\n\r\n        public static void main(String[] args) {\r\n        \t\tint num =  Integer.parseInt(args[0]);\r\n        \t\tList&lt;Integer&gt; evens = new ArrayList&lt;Integer&gt;();\r\n        \t\tint sum = 0;\t\t\t\t\r\n        \t\tfor (int j = 0; j &lt;= num; j++) {\r\n        \t\t\tif (j % 2 == 0) {\r\n        \t\t\t\tsum += j;\r\n        \t\t\t\tevens.add(j);\r\n        \t\t\t}\r\n        \t\t}\t\t\r\n        \t\tSystem.out.println(&quot;Even Numbers List : &quot;+evens);\r\n        \t\tSystem.out.println(&quot;Total Sum : &quot;+sum);\r\n          \r\n\r\n         // If you want an array of int instead of ArrayList you can convert ArrayList into int[] with following two lines\r\n\r\n               int evenArray[] = even.stream().mapToInt(x-&gt;x).toArray();        \t\t\r\n        \t   System.out.println(&quot;Even Numbers Array : &quot;+evenArray);\r\n\r\n        \t}","title":"Java code to generate comma separated values and sum","body":"<p>Why initialized the even array size if its actual length is unknown in initially. It's better to go with ArrayList in this case which have characteristic to grow dynamically.</p>\n<p><strong>Try in this way</strong></p>\n<pre><code>    public static void main(String[] args) {\n            int num =  Integer.parseInt(args[0]);\n            List&lt;Integer&gt; evens = new ArrayList&lt;Integer&gt;();\n            int sum = 0;                \n            for (int j = 0; j &lt;= num; j++) {\n                if (j % 2 == 0) {\n                    sum += j;\n                    evens.add(j);\n                }\n            }       \n            System.out.println(&quot;Even Numbers List : &quot;+evens);\n            System.out.println(&quot;Total Sum : &quot;+sum);\n      \n\n     // If you want an array of int instead of ArrayList you can convert ArrayList into int[] with following two lines\n\n           int evenArray[] = even.stream().mapToInt(x-&gt;x).toArray();                \n           System.out.println(&quot;Even Numbers Array : &quot;+evenArray);\n\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19319347,"reputation":1,"user_id":14123360,"display_name":"Madhu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1597730328,"creation_date":1597729733,"answer_id":63462574,"question_id":60306062,"body_markdown":"    public static void main(String[] args) {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\t//System.out.println(&quot;Args: &quot;+args[0]);\r\n    \t\tint num = Integer.parseInt(args[0]);\r\n    \t\tint even[] = new int[num];\r\n    \t\tint sum = 0,j = 0;\r\n    \t\tString evennums = &quot;&quot;;\r\n    \t\t//Insert your code here\r\n    \t\tfor(j=0; j&lt;=num; j++) {\r\n    \t\t\tif(j%2==0) {\r\n    \t\t\t\t//even[j]=num;\r\n    \t\t\t\tsum=sum+j;\r\n    \t\t\t\tif(j!=0) evennums=evennums+&quot;,&quot;+j;\r\n    \r\n    \t\t\t}\r\n    \r\n    \t\t}    \r\n    \t\tevennums=evennums.substring(1);\r\n    \t\tSystem.out.println(evennums);\r\n    \t\tSystem.out.println(sum);\r\n    \t}\r\n\r\nAt time of running in eclipse follow below steps:\r\n\r\nRight click on class--&gt; Run AS --&gt; Run Configuration\r\nGo to Arguments tab and pass value as 10\r\nClick Run\r\nOutput: \r\n2,4,6,8,10 \r\n30","title":"Java code to generate comma separated values and sum","body":"<pre><code>public static void main(String[] args) {\n        // TODO Auto-generated method stub\n        //System.out.println(&quot;Args: &quot;+args[0]);\n        int num = Integer.parseInt(args[0]);\n        int even[] = new int[num];\n        int sum = 0,j = 0;\n        String evennums = &quot;&quot;;\n        //Insert your code here\n        for(j=0; j&lt;=num; j++) {\n            if(j%2==0) {\n                //even[j]=num;\n                sum=sum+j;\n                if(j!=0) evennums=evennums+&quot;,&quot;+j;\n\n            }\n\n        }    \n        evennums=evennums.substring(1);\n        System.out.println(evennums);\n        System.out.println(sum);\n    }\n</code></pre>\n<p>At time of running in eclipse follow below steps:</p>\n<p>Right click on class--&gt; Run AS --&gt; Run Configuration\nGo to Arguments tab and pass value as 10\nClick Run\nOutput:\n2,4,6,8,10\n30</p>\n"}],"owner":{"account_id":17800403,"reputation":1,"user_id":12927319,"display_name":"theearner360"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8844,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":5,"score":0,"last_activity_date":1695791060,"creation_date":1582133298,"question_id":60306062,"body_markdown":"While running this code I am getting `ArrayIndexOutOfBoundsException`. \r\n\r\n    public class Evensum {\r\n    \r\n        public static void main(String[] args) {\r\n            int num = Integer.parseInt(args[0]);\r\n            int even[] = new int[num];\r\n            int sum = 0,j = 0;\r\n            String evennums = &quot;&quot;;\r\n            //Insert your code here\r\n             for(j=0; j&lt;=num; j++) {\r\n                if(num%2==0) {\r\n                    even[j]=num;\r\n                    sum=sum+num;\r\n                    args[j]= Integer.toString(num);\r\n                }\r\n                evennums=String.join(&quot;,&quot;, args);\r\n            }    \r\n            System.out.println(evennums);\r\n            System.out.println(sum);\r\n        }\r\n    }","title":"Java code to generate comma separated values and sum","body":"<p>While running this code I am getting <code>ArrayIndexOutOfBoundsException</code>. </p>\n\n<pre><code>public class Evensum {\n\n    public static void main(String[] args) {\n        int num = Integer.parseInt(args[0]);\n        int even[] = new int[num];\n        int sum = 0,j = 0;\n        String evennums = \"\";\n        //Insert your code here\n         for(j=0; j&lt;=num; j++) {\n            if(num%2==0) {\n                even[j]=num;\n                sum=sum+num;\n                args[j]= Integer.toString(num);\n            }\n            evennums=String.join(\",\", args);\n        }    \n        System.out.println(evennums);\n        System.out.println(sum);\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","mongodb","spring-boot"],"comments":[{"owner":{"account_id":1616980,"reputation":616,"user_id":1494395,"accept_rate":0,"display_name":"Rajith Pemabandu"},"score":0,"creation_date":1491107506,"post_id":43164651,"comment_id":73403842,"body_markdown":"what is the exception are you getting.","body":"what is the exception are you getting."},{"owner":{"account_id":2113840,"reputation":13,"user_id":1878540,"accept_rate":0,"display_name":"GuoJing"},"score":0,"creation_date":1491108572,"post_id":43164651,"comment_id":73404009,"body_markdown":"@RajithPemabandu ***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nField userPropsRepository in controller.UserController required a bean of type &#39;repository.UserPropsRepository&#39; that could not be found.\n\n\nAction:\n\nConsider defining a bean of type &#39;repository.UserPropsRepository&#39; in your configuration.","body":"@RajithPemabandu *************************** APPLICATION FAILED TO START ***************************  Description:  Field userPropsRepository in controller.UserController required a bean of type &#39;repository.UserPropsRepository&#39; that could not be found.   Action:  Consider defining a bean of type &#39;repository.UserPropsRepository&#39; in your configuration."},{"owner":{"account_id":1616980,"reputation":616,"user_id":1494395,"accept_rate":0,"display_name":"Rajith Pemabandu"},"score":0,"creation_date":1491109913,"post_id":43164651,"comment_id":73404221,"body_markdown":"have you considered my answer?","body":"have you considered my answer?"}],"answers":[{"comments":[{"owner":{"account_id":1616980,"reputation":616,"user_id":1494395,"accept_rate":0,"display_name":"Rajith Pemabandu"},"score":0,"creation_date":1491110265,"post_id":43164784,"comment_id":73404278,"body_markdown":"is the exception same?","body":"is the exception same?"},{"owner":{"account_id":2113840,"reputation":13,"user_id":1878540,"accept_rate":0,"display_name":"GuoJing"},"score":0,"creation_date":1491110306,"post_id":43164784,"comment_id":73404287,"body_markdown":"same exception. :(","body":"same exception. :("},{"owner":{"account_id":1616980,"reputation":616,"user_id":1494395,"accept_rate":0,"display_name":"Rajith Pemabandu"},"score":0,"creation_date":1491113442,"post_id":43164784,"comment_id":73404843,"body_markdown":"refer this link. this might be helpful http://docs.spring.io/spring-data/mongodb/docs/1.2.0.RELEASE/reference/html/mongo.repositories.html","body":"refer this link. this might be helpful <a href=\"http://docs.spring.io/spring-data/mongodb/docs/1.2.0.RELEASE/reference/html/mongo.repositories.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-data/mongodb/docs/1.2.0.RELEASE/refere&zwnj;&#8203;nce/&hellip;</a>"},{"owner":{"account_id":2113840,"reputation":13,"user_id":1878540,"accept_rate":0,"display_name":"GuoJing"},"score":0,"creation_date":1491114366,"post_id":43164784,"comment_id":73405015,"body_markdown":"still same problem","body":"still same problem"}],"tags":[],"owner":{"account_id":1616980,"reputation":616,"user_id":1494395,"accept_rate":0,"display_name":"Rajith Pemabandu"},"comment_count":4,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1491109948,"creation_date":1491109061,"answer_id":43164784,"question_id":43164651,"body_markdown":"suppose you are missing @Repository annotation in the UserPropsRepository interface.\r\n\r\n\r\n       @repository(&quot;userPropsRepository&quot;)\r\n       public interface UserPropsRepository extends MongoRepository&lt;UserProps, String&gt; {\r\n        UserProps findOne(String id);\r\n        UserProps save(UserProps props);\r\n        UserProps update(UserProps props);\r\n        void delete(UserProps props);\r\n    }\r\n","title":"Java Consider defining a bean of type in your configuration exception when add mongoDB support","body":"<p>suppose you are missing @Repository annotation in the UserPropsRepository interface.</p>\n\n<pre><code>   @repository(\"userPropsRepository\")\n   public interface UserPropsRepository extends MongoRepository&lt;UserProps, String&gt; {\n    UserProps findOne(String id);\n    UserProps save(UserProps props);\n    UserProps update(UserProps props);\n    void delete(UserProps props);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2113840,"reputation":13,"user_id":1878540,"accept_rate":0,"display_name":"GuoJing"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1491148999,"creation_date":1491148999,"answer_id":43170446,"question_id":43164651,"body_markdown":"Problem solved.\r\n\r\n1. Change my project structure, move root Package and Model and Dao ... to com.example.model ...\r\n2. Move Application.java to root so it will scan components automatically\r\n\r\nRelated to this same problem and solution.\r\n\r\n[https://stackoverflow.com/questions/42907553/field-required-a-bean-of-type-that-could-not-be-found-error-spring-restful-ap][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/42907553/field-required-a-bean-of-type-that-could-not-be-found-error-spring-restful-ap","title":"Java Consider defining a bean of type in your configuration exception when add mongoDB support","body":"<p>Problem solved.</p>\n\n<ol>\n<li>Change my project structure, move root Package and Model and Dao ... to com.example.model ...</li>\n<li>Move Application.java to root so it will scan components automatically</li>\n</ol>\n\n<p>Related to this same problem and solution.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/42907553/field-required-a-bean-of-type-that-could-not-be-found-error-spring-restful-ap\">&#39;Field required a bean of type that could not be found.&#39; error spring restful API using mongodb</a></p>\n"},{"tags":[],"owner":{"account_id":12808322,"reputation":186,"user_id":9267309,"display_name":"Gadhia Reema"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1544434503,"creation_date":1544434503,"answer_id":53702823,"question_id":43164651,"body_markdown":" - I changed my Spring Boot version to `2.1.1.RELEASE` and the issue was solved.\r\n - Cleared the `.mvn` folder and rebuild my project and the issue was \r\nresolved.","title":"Java Consider defining a bean of type in your configuration exception when add mongoDB support","body":"<ul>\n<li>I changed my Spring Boot version to <code>2.1.1.RELEASE</code> and the issue was solved.</li>\n<li>Cleared the <code>.mvn</code> folder and rebuild my project and the issue was \nresolved.</li>\n</ul>\n"}],"owner":{"account_id":2113840,"reputation":13,"user_id":1878540,"accept_rate":0,"display_name":"GuoJing"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10022,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1695791060,"creation_date":1491107388,"question_id":43164651,"body_markdown":"I have a very simple Java Springboot project connect to the database. Still, I want a mongoDB connection and I could use mongoDB as well.\r\n\r\nI read lots of document and I can&#39;t make it work. And my commits code is:\r\n\r\nhttps://github.com/GuoJing/spb/commit/20c04ce38d43bb0ba229d0d3577fdccbd571062e\r\n\r\nIf adding @AutoWired annotation, application will not start. I think this should be same as official document.\r\n\r\nin src/main/java/controller/UserController.java\r\n\r\n    @Autowired\r\n    private UserPropsRepository userPropsRepository;\r\n\r\nHere is my project, could anybody help me?\r\n\r\nhttps://github.com/GuoJing/spb\r\n\r\nMy Exception is:\r\n\r\n    ***************************\r\n    APPLICATION FAILED TO START\r\n    ***************************\r\n    \r\n    Description:\r\n    \r\n    Field userPropsRepository in controller.UserController required a bean of type &#39;repository.UserPropsRepository&#39; that could not be found.\r\n    \r\n    \r\n    Action:\r\n    \r\n    Consider defining a bean of type &#39;repository.UserPropsRepository&#39; in your configuration.","title":"Java Consider defining a bean of type in your configuration exception when add mongoDB support","body":"<p>I have a very simple Java Springboot project connect to the database. Still, I want a mongoDB connection and I could use mongoDB as well.</p>\n\n<p>I read lots of document and I can't make it work. And my commits code is:</p>\n\n<p><a href=\"https://github.com/GuoJing/spb/commit/20c04ce38d43bb0ba229d0d3577fdccbd571062e\" rel=\"nofollow noreferrer\">https://github.com/GuoJing/spb/commit/20c04ce38d43bb0ba229d0d3577fdccbd571062e</a></p>\n\n<p>If adding @AutoWired annotation, application will not start. I think this should be same as official document.</p>\n\n<p>in src/main/java/controller/UserController.java</p>\n\n<pre><code>@Autowired\nprivate UserPropsRepository userPropsRepository;\n</code></pre>\n\n<p>Here is my project, could anybody help me?</p>\n\n<p><a href=\"https://github.com/GuoJing/spb\" rel=\"nofollow noreferrer\">https://github.com/GuoJing/spb</a></p>\n\n<p>My Exception is:</p>\n\n<pre><code>***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nField userPropsRepository in controller.UserController required a bean of type 'repository.UserPropsRepository' that could not be found.\n\n\nAction:\n\nConsider defining a bean of type 'repository.UserPropsRepository' in your configuration.\n</code></pre>\n"},{"tags":["java","ubuntu","jenkins","jenkins-pipeline","cicd"],"comments":[{"owner":{"account_id":3755777,"reputation":499,"user_id":3122175,"accept_rate":92,"display_name":"D.T"},"score":0,"creation_date":1695789937,"post_id":77184706,"comment_id":136069672,"body_markdown":"It is just a simple java class, I don&#39;t think you need `-cp`. With java 11 and upper, just use command `java First.java`","body":"It is just a simple java class, I don&#39;t think you need <code>-cp</code>. With java 11 and upper, just use command <code>java First.java</code>"},{"owner":{"account_id":11941224,"reputation":23,"user_id":20384783,"display_name":"PRANIT BHOIR"},"score":0,"creation_date":1695790888,"post_id":77184706,"comment_id":136069766,"body_markdown":"Ohh It worked. I was first compiling my program and then running the java code because that is what normally we do.. Now I removed the compilation step and it worked successfully. Thanks mate.","body":"Ohh It worked. I was first compiling my program and then running the java code because that is what normally we do.. Now I removed the compilation step and it worked successfully. Thanks mate."},{"owner":{"account_id":3755777,"reputation":499,"user_id":3122175,"accept_rate":92,"display_name":"D.T"},"score":0,"creation_date":1695792220,"post_id":77184706,"comment_id":136069889,"body_markdown":"Glad it helps you","body":"Glad it helps you"}],"owner":{"account_id":11941224,"reputation":23,"user_id":20384783,"display_name":"PRANIT BHOIR"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695789508,"creation_date":1695789508,"question_id":77184706,"body_markdown":"This is my java code:\r\npranit@pranit-master:~/java_labs$ cat First.java\r\n```\r\npublic class First {\r\npublic static void main(String[] args) {\r\n    System.out.println(&quot;Hello&quot;);\r\n\r\n}\r\n}\r\n```\r\n\r\nThis is the build job I am running in jenkins for a java program. Below is the job console output.\r\n\r\n```\r\nStarted by user Anmol Bhoir\r\nRunning as SYSTEM\r\nBuilding in workspace /home/pranit/java_labs\r\n[java_labs] $ /bin/sh -xe /tmp/jenkins5091110815182762939.sh\r\n+ javac First.java\r\n**First.java:2: error: error while writing First: /home/pranit/java_labs/First.class\r\npublic class First {\r\n       ^\r\n1 error**\r\nBuild step &#39;Execute shell&#39; marked build as failure\r\nFinished: FAILURE\r\n```\r\n\r\nI&#39;m getting above error while running the java program in jenkins on ubuntu OS.\r\nBut the same program if i execute on Ubuntu, I dont get any issues. It is running fine only. \r\n\r\nPlease help me with this issue. Cannot proceed further because of this.\r\n\r\n\r\n\r\nI tried many solutions like giving classpath while running the java code using -cp option, but did not work.\r\neg.\r\n# javac -cp /usr/lib/jvm/java-17-openjdk-amd64/bin First.java\r\n\r\n","title":"Getting error while running java program in jenkins on ubuntu","body":"<p>This is my java code:\npranit@pranit-master:~/java_labs$ cat First.java</p>\n<pre><code>public class First {\npublic static void main(String[] args) {\n    System.out.println(&quot;Hello&quot;);\n\n}\n}\n</code></pre>\n<p>This is the build job I am running in jenkins for a java program. Below is the job console output.</p>\n<pre><code>Started by user Anmol Bhoir\nRunning as SYSTEM\nBuilding in workspace /home/pranit/java_labs\n[java_labs] $ /bin/sh -xe /tmp/jenkins5091110815182762939.sh\n+ javac First.java\n**First.java:2: error: error while writing First: /home/pranit/java_labs/First.class\npublic class First {\n       ^\n1 error**\nBuild step 'Execute shell' marked build as failure\nFinished: FAILURE\n</code></pre>\n<p>I'm getting above error while running the java program in jenkins on ubuntu OS.\nBut the same program if i execute on Ubuntu, I dont get any issues. It is running fine only.</p>\n<p>Please help me with this issue. Cannot proceed further because of this.</p>\n<p>I tried many solutions like giving classpath while running the java code using -cp option, but did not work.\neg.</p>\n<h1>javac -cp /usr/lib/jvm/java-17-openjdk-amd64/bin First.java</h1>\n"},{"tags":["java","java-20"],"comments":[{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":1,"creation_date":1680969455,"post_id":75966165,"comment_id":133985504,"body_markdown":"*Would simply new URI(filename).toURL()do the job in the last case?* I would say so, from reading the URI doc.  But it&#39;ll only take 5 minutes to try it and see,","body":"<i>Would simply new URI(filename).toURL()do the job in the last case?</i> I would say so, from reading the URI doc.  But it&#39;ll only take 5 minutes to try it and see,"},{"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"score":1,"creation_date":1680969583,"post_id":75966165,"comment_id":133985533,"body_markdown":"If you want to construct a `file:` scheme URI, then File has a [toURI method](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/io/File.html#toURI()).","body":"If you want to construct a <code>file:</code> scheme URI, then File has a <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/io/File.html#toURI()\" rel=\"nofollow noreferrer\">toURI method</a>."},{"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"score":1,"creation_date":1680969705,"post_id":75966165,"comment_id":133985554,"body_markdown":"The `context,spec` thing can probably be done by `URI.resolve()`?","body":"The <code>context,spec</code> thing can probably be done by <code>URI.resolve()</code>?"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":2,"creation_date":1680994165,"post_id":75966165,"comment_id":133988489,"body_markdown":"Indeed, that very same javadoc states: &quot;The recommended way to manage the encoding and decoding of URLs is to use `URI`, and to convert between these two classes using `toURI()` and `URI.toURL()`.&quot;  So the answer to your first question is yes.  The answer to your second question, as teapot pointed out, is `new URI(context).resolve(spec).toURL()`.","body":"Indeed, that very same javadoc states: &quot;The recommended way to manage the encoding and decoding of URLs is to use <code>URI</code>, and to convert between these two classes using <code>toURI()</code> and <code>URI.toURL()</code>.&quot;  So the answer to your first question is yes.  The answer to your second question, as teapot pointed out, is <code>new URI(context).resolve(spec).toURL()</code>."},{"owner":{"account_id":207965,"reputation":3704,"user_id":458157,"accept_rate":75,"display_name":"gouessej"},"score":0,"creation_date":1681000462,"post_id":75966165,"comment_id":133988994,"body_markdown":"@ArfurNarf It&#39;s not so trivial because I can&#39;t test all possible special cases depending on file systems. Imagine that it works on a simple case but it doesn&#39;t work in another case because a special character isn&#39;t escaped. I would like to understand formally how to replace those calls once for all.","body":"@ArfurNarf It&#39;s not so trivial because I can&#39;t test all possible special cases depending on file systems. Imagine that it works on a simple case but it doesn&#39;t work in another case because a special character isn&#39;t escaped. I would like to understand formally how to replace those calls once for all."},{"owner":{"account_id":207965,"reputation":3704,"user_id":458157,"accept_rate":75,"display_name":"gouessej"},"score":0,"creation_date":1681001581,"post_id":75966165,"comment_id":133989058,"body_markdown":"@VGR Actually, your comment clarifies teapot418&#39;s suggestion. Thanks.","body":"@VGR Actually, your comment clarifies teapot418&#39;s suggestion. Thanks."},{"owner":{"account_id":207965,"reputation":3704,"user_id":458157,"accept_rate":75,"display_name":"gouessej"},"score":0,"creation_date":1681047031,"post_id":75966165,"comment_id":133992935,"body_markdown":"@VGR I obtain `java.lang.IllegalArgumentException: URI is not absolute` when I call `new URI(context).resolve(spec).toURL()`.","body":"@VGR I obtain <code>java.lang.IllegalArgumentException: URI is not absolute</code> when I call <code>new URI(context).resolve(spec).toURL()</code>."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1681049050,"post_id":75966165,"comment_id":133993211,"body_markdown":"Yes, and [the method&#39;s documentation](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/net/URI.html#toURL()) tells you that you will get that exception.  Is there a reason you&#39;re using relative URIs?","body":"Yes, and <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/net/URI.html#toURL()\" rel=\"nofollow noreferrer\">the method&#39;s documentation</a> tells you that you will get that exception.  Is there a reason you&#39;re using relative URIs?"},{"owner":{"account_id":207965,"reputation":3704,"user_id":458157,"accept_rate":75,"display_name":"gouessej"},"score":0,"creation_date":1681060640,"post_id":75966165,"comment_id":133994775,"body_markdown":"@VGR It&#39;s a utility of the engine. At the beginning, it was used to work around some bugs or limitations of the URL class. I&#39;ll isolate the problem in a tiny unit test.","body":"@VGR It&#39;s a utility of the engine. At the beginning, it was used to work around some bugs or limitations of the URL class. I&#39;ll isolate the problem in a tiny unit test."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1681129068,"post_id":75966165,"comment_id":134002637,"body_markdown":"If you are trying to make URLs out of relative filenames, I find myself wondering if you’re actually trying to access data built into your application.  If that is the case, you should not be creating URLs yourself at all;  you should use [Class.getResource](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Class.html#getResource(java.lang.String)) for that.  You should never rely on relative filenames, since the current directory usually is not something you can control.","body":"If you are trying to make URLs out of relative filenames, I find myself wondering if you’re actually trying to access data built into your application.  If that is the case, you should not be creating URLs yourself at all;  you should use <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Class.html#getResource(java.lang.String)\" rel=\"nofollow noreferrer\">Class.getResource</a> for that.  You should never rely on relative filenames, since the current directory usually is not something you can control."},{"owner":{"account_id":207965,"reputation":3704,"user_id":458157,"accept_rate":75,"display_name":"gouessej"},"score":0,"creation_date":1681166332,"post_id":75966165,"comment_id":134009914,"body_markdown":"The method is in a utility, it&#39;s used both for files on the local filesystem and files from the Internet.","body":"The method is in a utility, it&#39;s used both for files on the local filesystem and files from the Internet."},{"owner":{"account_id":80581,"reputation":3955,"user_id":227779,"accept_rate":38,"display_name":"Per Lundberg"},"score":0,"creation_date":1695754742,"post_id":75966165,"comment_id":136066022,"body_markdown":"@VGR Thanks for mentioning the `new URI(context).resolve(spec).toURL()` approach, appreciated. This may resolve my particular issue in another question (which was marked as a duplicate of this). I edited https://stackoverflow.com/a/75968141/227779 to include these details now, please help me verify that I understood you correct.","body":"@VGR Thanks for mentioning the <code>new URI(context).resolve(spec).toURL()</code> approach, appreciated. This may resolve my particular issue in another question (which was marked as a duplicate of this). I edited <a href=\"https://stackoverflow.com/a/75968141/227779\">stackoverflow.com/a/75968141/227779</a> to include these details now, please help me verify that I understood you correct."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1695755899,"post_id":75966165,"comment_id":136066224,"body_markdown":"@PerLundberg Looks good to me.","body":"@PerLundberg Looks good to me."}],"answers":[{"comments":[{"owner":{"account_id":207965,"reputation":3704,"user_id":458157,"accept_rate":75,"display_name":"gouessej"},"score":1,"creation_date":1681001323,"post_id":75968141,"comment_id":133989041,"body_markdown":"Thank you for your elaborated answer. I&#39;ll carefully try your suggestions, especially Path.toURI().toURL().","body":"Thank you for your elaborated answer. I&#39;ll carefully try your suggestions, especially Path.toURI().toURL()."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1682954376,"post_id":75968141,"comment_id":134289601,"body_markdown":"@gouessej If this Answer solved your problem, please accept it by marking the big check mark. This Question can be used to strike other Questions as duplicates only if an Answer is accepted.","body":"@gouessej If this Answer solved your problem, please accept it by marking the big check mark. This Question can be used to strike other Questions as duplicates only if an Answer is accepted."},{"owner":{"account_id":207965,"reputation":3704,"user_id":458157,"accept_rate":75,"display_name":"gouessej"},"score":0,"creation_date":1683232706,"post_id":75968141,"comment_id":134339605,"body_markdown":"Sorry for the long delay. I still have to isolate a few corner cases.","body":"Sorry for the long delay. I still have to isolate a few corner cases."},{"owner":{"account_id":38158,"reputation":1565,"user_id":109354,"display_name":"Sourabh"},"score":2,"creation_date":1695787794,"post_id":75968141,"comment_id":136069501,"body_markdown":"e.g.\n\n`var url = URI.create(&quot;https://www.example.com&quot;).toURL();`","body":"e.g.  <code>var url = URI.create(&quot;https:&#47;&#47;www.example.com&quot;).toURL();</code>"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1695788727,"post_id":75968141,"comment_id":136069557,"body_markdown":"@Sourabh Thanks for example. That inspired me to add a file-URI example, to match the Question&#39;s specifics.","body":"@Sourabh Thanks for example. That inspired me to add a file-URI example, to match the Question&#39;s specifics."}],"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":5,"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1695789446,"creation_date":1680996912,"answer_id":75968141,"question_id":75966165,"body_markdown":"# tl;dr\r\n\r\n - To construct a URL, use [`URI::toURL`][1].\r\n - To construct a relative URL, first create the `URI` using the context URI and then call [`URI::resolve`](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/net/URI.html#resolve(java.lang.String)) with the URI you wish to make relative.\r\n - To construct a `file:` based URL, (1) call [`Path::toURI`][2], (2) then `URI::toURL`.\r\n\r\nEx: `URI uri = Paths.get( &quot;/Users/your_user_name/example.txt&quot; ).toUri() ;`\r\n\r\n# Details\r\n\r\nUnderstand that:\r\n\r\n - [`java.net.URL`][3] is an ancient class, dating from Java 1. That class does not encode or decode any URL components according to the [RFC 2396][4] escaping mechanism.\r\n - [`java.net.URI`][5] class came later, in Java 4. \r\n\r\nRead this note from the Java team, [Oracle: Quality Outreach Heads-up - JDK 20: Deprecate URL Public Constructors][6]. To quote:\r\n\r\n&gt;JDK 20 will deprecate all public constructors of java.net.URL. … To construct a URL, the [`URI::toURL`][1] alternative should instead be preferred. To construct a `file:` based URL, [`Path::toURI`][2] should be used prior to `URI::toURL`.\r\n\r\nAnd see the [note on constructor deprecation][7] within the Javadoc  of `URL` class.\r\n\r\nSee also the issue-tracker page, [JDK-8294241 Deprecate URL public constructors][8].\r\n\r\n## Example: File path URI\r\n\r\nFor working with files in modern Java, use [NIO.2][9] features. \r\n\r\nThe [`Paths`][10] class can produce a [`Path`][11] object. From there, ask that `Path` to [produce a `URI`][2]. \r\n\r\n```java\r\nPath path = Paths.get( &quot;/Users/your_user_name/example.txt&quot; ) ;\r\nURI uri = path.toUri () ;\r\nSystem.out.println ( &quot;uri = &quot; + uri );\r\n```\r\n\r\n&gt;uri = file:///Users/your_user_name/example.txt\r\n\r\nGoing [the other direction][12]:\r\n\r\n    Path path = Paths.get( uri ) ;\r\n\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/net/URI.html#toURL()\r\n  [2]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/nio/file/Path.html#toUri()\r\n  [3]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/net/URL.html#%3Cinit%3E(java.lang.String)\r\n  [4]: https://www.rfc-editor.org/rfc/rfc2396\r\n  [5]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/net/URI.html\r\n  [6]: https://inside.java/2023/02/15/quality-heads-up/\r\n  [7]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/net/URL.html#constructor-deprecation\r\n  [8]: https://bugs.openjdk.org/browse/JDK-8294241\r\n  [9]: https://docs.oracle.com/javase/8/docs/technotes/guides/io/index.html\r\n  [10]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/nio/file/Paths.html\r\n  [11]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/nio/file/Path.html\r\n  [12]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/nio/file/Paths.html#get(java.net.URI)","title":"How to replace the deprecated URL constructors in Java 20?","body":"<h1>tl;dr</h1>\n<ul>\n<li>To construct a URL, use <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/net/URI.html#toURL()\" rel=\"noreferrer\"><code>URI::toURL</code></a>.</li>\n<li>To construct a relative URL, first create the <code>URI</code> using the context URI and then call <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/net/URI.html#resolve(java.lang.String)\" rel=\"noreferrer\"><code>URI::resolve</code></a> with the URI you wish to make relative.</li>\n<li>To construct a <code>file:</code> based URL, (1) call <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/nio/file/Path.html#toUri()\" rel=\"noreferrer\"><code>Path::toURI</code></a>, (2) then <code>URI::toURL</code>.</li>\n</ul>\n<p>Ex: <code>URI uri = Paths.get( &quot;/Users/your_user_name/example.txt&quot; ).toUri() ;</code></p>\n<h1>Details</h1>\n<p>Understand that:</p>\n<ul>\n<li><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/net/URL.html#%3Cinit%3E(java.lang.String)\" rel=\"noreferrer\"><code>java.net.URL</code></a> is an ancient class, dating from Java 1. That class does not encode or decode any URL components according to the <a href=\"https://www.rfc-editor.org/rfc/rfc2396\" rel=\"noreferrer\">RFC 2396</a> escaping mechanism.</li>\n<li><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/net/URI.html\" rel=\"noreferrer\"><code>java.net.URI</code></a> class came later, in Java 4.</li>\n</ul>\n<p>Read this note from the Java team, <a href=\"https://inside.java/2023/02/15/quality-heads-up/\" rel=\"noreferrer\">Oracle: Quality Outreach Heads-up - JDK 20: Deprecate URL Public Constructors</a>. To quote:</p>\n<blockquote>\n<p>JDK 20 will deprecate all public constructors of java.net.URL. … To construct a URL, the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/net/URI.html#toURL()\" rel=\"noreferrer\"><code>URI::toURL</code></a> alternative should instead be preferred. To construct a <code>file:</code> based URL, <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/nio/file/Path.html#toUri()\" rel=\"noreferrer\"><code>Path::toURI</code></a> should be used prior to <code>URI::toURL</code>.</p>\n</blockquote>\n<p>And see the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/net/URL.html#constructor-deprecation\" rel=\"noreferrer\">note on constructor deprecation</a> within the Javadoc  of <code>URL</code> class.</p>\n<p>See also the issue-tracker page, <a href=\"https://bugs.openjdk.org/browse/JDK-8294241\" rel=\"noreferrer\">JDK-8294241 Deprecate URL public constructors</a>.</p>\n<h2>Example: File path URI</h2>\n<p>For working with files in modern Java, use <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/io/index.html\" rel=\"noreferrer\">NIO.2</a> features.</p>\n<p>The <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/nio/file/Paths.html\" rel=\"noreferrer\"><code>Paths</code></a> class can produce a <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/nio/file/Path.html\" rel=\"noreferrer\"><code>Path</code></a> object. From there, ask that <code>Path</code> to <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/nio/file/Path.html#toUri()\" rel=\"noreferrer\">produce a <code>URI</code></a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Path path = Paths.get( &quot;/Users/your_user_name/example.txt&quot; ) ;\nURI uri = path.toUri () ;\nSystem.out.println ( &quot;uri = &quot; + uri );\n</code></pre>\n<blockquote>\n<p>uri = file:///Users/your_user_name/example.txt</p>\n</blockquote>\n<p>Going <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/nio/file/Paths.html#get(java.net.URI)\" rel=\"noreferrer\">the other direction</a>:</p>\n<pre><code>Path path = Paths.get( uri ) ;\n</code></pre>\n"}],"owner":{"account_id":207965,"reputation":3704,"user_id":458157,"accept_rate":75,"display_name":"gouessej"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7987,"favorite_count":0,"down_vote_count":3,"up_vote_count":7,"accepted_answer_id":75968141,"answer_count":1,"score":4,"last_activity_date":1695789446,"creation_date":1680968838,"question_id":75966165,"body_markdown":"[All URL constructors are deprecated in Java 20][1]. I replaced `new URL(protocol, host, file)` by `new URI(protocol, host, file, null).toURL()` as I have no query and no fragment but I don&#39;t know what to do with the others:\r\n\r\n    /home/gouessej/Documents/programmation/java/workspace/Ardor3D/ardor3d-core/src/main/java/com/ardor3d/util/UrlUtils.java:40: warning: [deprecation] URL(String) in URL has been deprecated\r\n            return new URL(new URL(url), relativeLoc);\r\n                           ^\r\n    /home/gouessej/Documents/programmation/java/workspace/Ardor3D/ardor3d-core/src/main/java/com/ardor3d/util/UrlUtils.java:40: warning: [deprecation] URL(URL,String) in URL has been deprecated\r\n            return new URL(new URL(url), relativeLoc);\r\n                   ^\r\n    /home/gouessej/Documents/programmation/java/workspace/Ardor3D/ardor3d-core/src/main/java/com/ardor3d/util/resource/SimpleResourceLocator.java:94: warning: [deprecation] URL(URL,String) in URL has been deprecated\r\n                final URL rVal = new URL(_baseDir.toURL(), spec);\r\n                                 ^\r\n    /home/gouessej/Documents/programmation/java/workspace/Ardor3D/ardor3d-audio/src/main/java/com/ardor3d/audio/FilenameURL.java:125: warning: [deprecation] URL(String) in URL has been deprecated\r\n                        url = new URL( filename );\r\n\r\nWould simply `new URI(filename).toURL()`do the job in the last case?\r\n\r\nWhen I compare the wording in the Java documentation, I understand that an URI scheme means more or less a URL protocol, an URI host is an URL host and an URL file matches with a URI path and an optional URI query. What are the exact equivalent of `new URL(spec)` and `new URL(context, spec)`?\r\n\r\n[I prepared some suggested changes][2] but it doesn&#39;t work, an IllegalArgumentException is thrown.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/net/URL.html#constructor-deprecation\r\n  [2]: https://jogamp.org/cgit/ardor3d.git/commit/?id=f9690cba75a6bbf352ef9eadf66931a89bc2baa2","title":"How to replace the deprecated URL constructors in Java 20?","body":"<p><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/net/URL.html#constructor-deprecation\" rel=\"nofollow noreferrer\">All URL constructors are deprecated in Java 20</a>. I replaced <code>new URL(protocol, host, file)</code> by <code>new URI(protocol, host, file, null).toURL()</code> as I have no query and no fragment but I don't know what to do with the others:</p>\n<pre><code>/home/gouessej/Documents/programmation/java/workspace/Ardor3D/ardor3d-core/src/main/java/com/ardor3d/util/UrlUtils.java:40: warning: [deprecation] URL(String) in URL has been deprecated\n        return new URL(new URL(url), relativeLoc);\n                       ^\n/home/gouessej/Documents/programmation/java/workspace/Ardor3D/ardor3d-core/src/main/java/com/ardor3d/util/UrlUtils.java:40: warning: [deprecation] URL(URL,String) in URL has been deprecated\n        return new URL(new URL(url), relativeLoc);\n               ^\n/home/gouessej/Documents/programmation/java/workspace/Ardor3D/ardor3d-core/src/main/java/com/ardor3d/util/resource/SimpleResourceLocator.java:94: warning: [deprecation] URL(URL,String) in URL has been deprecated\n            final URL rVal = new URL(_baseDir.toURL(), spec);\n                             ^\n/home/gouessej/Documents/programmation/java/workspace/Ardor3D/ardor3d-audio/src/main/java/com/ardor3d/audio/FilenameURL.java:125: warning: [deprecation] URL(String) in URL has been deprecated\n                    url = new URL( filename );\n</code></pre>\n<p>Would simply <code>new URI(filename).toURL()</code>do the job in the last case?</p>\n<p>When I compare the wording in the Java documentation, I understand that an URI scheme means more or less a URL protocol, an URI host is an URL host and an URL file matches with a URI path and an optional URI query. What are the exact equivalent of <code>new URL(spec)</code> and <code>new URL(context, spec)</code>?</p>\n<p><a href=\"https://jogamp.org/cgit/ardor3d.git/commit/?id=f9690cba75a6bbf352ef9eadf66931a89bc2baa2\" rel=\"nofollow noreferrer\">I prepared some suggested changes</a> but it doesn't work, an IllegalArgumentException is thrown.</p>\n"},{"tags":["java","ios","appium"],"answers":[{"tags":[],"owner":{"account_id":19923575,"reputation":82,"user_id":14598823,"display_name":"Fransiskus Andika Setiawan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645671225,"creation_date":1645671225,"answer_id":71246504,"question_id":71098626,"body_markdown":"You can try this:\r\n\r\nPut &quot;Keys.ENTER&quot; after sendKeys &quot;Apple&quot; + Keys.ENTER\r\n\r\n    ....\r\n    AppiumDriver iosDriver = new IOSDriver(new URL(driverUrl), cap);\r\n    ....\r\n    iosDriver.findElement(By.xpath(&quot;//*[@class=\\&quot;search mw-ui-background-icon-search\\&quot;]&quot;)).sendKeys(&quot;Apple&quot; + Keys.ENTER);","title":"IOSDriver cannot perform sendKey Enter on IOS Safari","body":"<p>You can try this:</p>\n<p>Put &quot;Keys.ENTER&quot; after sendKeys &quot;Apple&quot; + Keys.ENTER</p>\n<pre><code>....\nAppiumDriver iosDriver = new IOSDriver(new URL(driverUrl), cap);\n....\niosDriver.findElement(By.xpath(&quot;//*[@class=\\&quot;search mw-ui-background-icon-search\\&quot;]&quot;)).sendKeys(&quot;Apple&quot; + Keys.ENTER);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25686400,"reputation":83,"user_id":19448419,"display_name":"HomeLander"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695789063,"creation_date":1695789063,"answer_id":77184687,"question_id":71098626,"body_markdown":"This would also work with javascript executor.\r\n\r\ndriver.execute_script(&quot;var a = document.getElementById(&#39;element_location_id&#39;); a.focus(); a.value=&#39;10&#39;;&quot;)\r\n","title":"IOSDriver cannot perform sendKey Enter on IOS Safari","body":"<p>This would also work with javascript executor.</p>\n<p>driver.execute_script(&quot;var a = document.getElementById('element_location_id'); a.focus(); a.value='10';&quot;)</p>\n"}],"owner":{"account_id":23541180,"reputation":1,"user_id":17585347,"display_name":"TLD"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":373,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695789063,"creation_date":1644736421,"question_id":71098626,"body_markdown":"    My scenarios:\r\n    \r\n    1.Start Safari on Iphone\r\n    2.Navigate to &quot;https://ja.wikipedia.org/wiki/&quot;\r\n    3.Click on icon Search\r\n    4.Type text &quot;Apple&quot; and Enter\r\n\r\n[&gt; Step 4 Image &lt;][1]\r\n\r\n \r\n**I&#39;m using Java Appium.**\r\n**At step 4, Text &quot;Apple&quot; is typed BUT Enter Key cannot perform to send.**\r\n**Could someone help resolving this issue. My code:**\r\n\r\n        ....\r\n        AppiumDriver iosDriver = new IOSDriver(new URL(driverUrl), cap);\r\n        ....\r\n        iosDriver.findElement(By.xpath(&quot;//*[@class=\\&quot;search mw-ui-background-icon-search\\&quot;]&quot;)).sendKeys(&quot;Apple&quot;);\r\n        iosDriver.getKeyboard().pressKey(Keys.ENTER);\r\n\r\n  [1]: https://i.stack.imgur.com/HTDgd.png\r\n","title":"IOSDriver cannot perform sendKey Enter on IOS Safari","body":"<pre><code>My scenarios:\n\n1.Start Safari on Iphone\n2.Navigate to &quot;https://ja.wikipedia.org/wiki/&quot;\n3.Click on icon Search\n4.Type text &quot;Apple&quot; and Enter\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/HTDgd.png\" rel=\"nofollow noreferrer\">&gt; Step 4 Image &lt;</a></p>\n<p><strong>I'm using Java Appium.</strong>\n<strong>At step 4, Text &quot;Apple&quot; is typed BUT Enter Key cannot perform to send.</strong>\n<strong>Could someone help resolving this issue. My code:</strong></p>\n<pre><code>    ....\n    AppiumDriver iosDriver = new IOSDriver(new URL(driverUrl), cap);\n    ....\n    iosDriver.findElement(By.xpath(&quot;//*[@class=\\&quot;search mw-ui-background-icon-search\\&quot;]&quot;)).sendKeys(&quot;Apple&quot;);\n    iosDriver.getKeyboard().pressKey(Keys.ENTER);\n</code></pre>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1541487657,"post_id":53167040,"comment_id":93224069,"body_markdown":"You are using `@ConfigurationProperties` in a wrong way. You either use `@ConfigurationProperties` or `@Value` but not both. Remove the `@ConfigurationProperties` as it doesn&#39;t add anything here nor does your structure adhere to the conventions needed for this.","body":"You are using <code>@ConfigurationProperties</code> in a wrong way. You either use <code>@ConfigurationProperties</code> or <code>@Value</code> but not both. Remove the <code>@ConfigurationProperties</code> as it doesn&#39;t add anything here nor does your structure adhere to the conventions needed for this."}],"answers":[{"comments":[{"owner":{"account_id":13059268,"reputation":2333,"user_id":9437031,"display_name":"Dhwanil Patel"},"score":0,"creation_date":1585894908,"post_id":53167184,"comment_id":107929606,"body_markdown":"I do the same but still get same issue. Actually i use @PostConstruct for create default folder on startup.","body":"I do the same but still get same issue. Actually i use @PostConstruct for create default folder on startup."},{"owner":{"account_id":12320641,"reputation":174,"user_id":8990061,"display_name":"vinod chambole"},"score":0,"creation_date":1611819878,"post_id":53167184,"comment_id":116574092,"body_markdown":"@DhwanilPatel please add No Arg constructor.","body":"@DhwanilPatel please add No Arg constructor."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1611821587,"post_id":53167184,"comment_id":116574740,"body_markdown":"@vinodchambole you don&#39;t need the `@NoArgsConstructor` as that is added already by the compiler. There is no `@Data` and no `final` fields so the only constructor available is a no-args constructor. So your comment doesn&#39;t make any sense what so ever.","body":"@vinodchambole you don&#39;t need the <code>@NoArgsConstructor</code> as that is added already by the compiler. There is no <code>@Data</code> and no <code>final</code> fields so the only constructor available is a no-args constructor. So your comment doesn&#39;t make any sense what so ever."},{"owner":{"account_id":706860,"reputation":9592,"user_id":601844,"display_name":"epox"},"score":0,"creation_date":1615635134,"post_id":53167184,"comment_id":117755357,"body_markdown":"Getter is optionally, but, yes, @Setter is a must.","body":"Getter is optionally, but, yes, @Setter is a must."},{"owner":{"account_id":3249477,"reputation":502,"user_id":2740179,"accept_rate":33,"display_name":"LuisComS"},"score":0,"creation_date":1657730403,"post_id":53167184,"comment_id":128881924,"body_markdown":"I face the same error, even with this configuration it still failing","body":"I face the same error, even with this configuration it still failing"}],"tags":[],"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"comment_count":5,"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1541487923,"creation_date":1541487923,"answer_id":53167184,"question_id":53167040,"body_markdown":"The problem is that you are using the `@ConfigurationProperties` in a wrong way. You use either `@ConfigurationProperties` or `@Value` but not both. \r\n\r\nThe solution either fix your class to be usable for `@ConfigurationProperties` or remove the `@ConfigurationProperties` annotation. \r\n\r\n    @Getter\r\n    @Setter\r\n    @Component\r\n    @ConfigurationProperties(prefix = &quot;simulator.geo&quot;,ignoreUnknownFields = false)\r\n    public class VendorSimulatorProperties {\r\n    \r\n        private String host = &quot;http://localhost:8080/&quot;;\r\n        private String b12;\r\n        private String b13;\r\n        private String b21;\r\n        private String c6;\r\n    \r\n    }\r\n\r\nYou need to fix the `prefix` it should be `simulator.geo` and your properties should be named after the keys in your file. You will also require setter next to the getter. However this will also need to change the rest of your configuration, to use the newly generated getters. \r\n\r\nFor you it is probably easier to remove `@ConfigurationProperties` as you weren&#39;t really using them in the first place. ","title":"SpringBoot 2 the elements were left unbound","body":"<p>The problem is that you are using the <code>@ConfigurationProperties</code> in a wrong way. You use either <code>@ConfigurationProperties</code> or <code>@Value</code> but not both. </p>\n\n<p>The solution either fix your class to be usable for <code>@ConfigurationProperties</code> or remove the <code>@ConfigurationProperties</code> annotation. </p>\n\n<pre><code>@Getter\n@Setter\n@Component\n@ConfigurationProperties(prefix = \"simulator.geo\",ignoreUnknownFields = false)\npublic class VendorSimulatorProperties {\n\n    private String host = \"http://localhost:8080/\";\n    private String b12;\n    private String b13;\n    private String b21;\n    private String c6;\n\n}\n</code></pre>\n\n<p>You need to fix the <code>prefix</code> it should be <code>simulator.geo</code> and your properties should be named after the keys in your file. You will also require setter next to the getter. However this will also need to change the rest of your configuration, to use the newly generated getters. </p>\n\n<p>For you it is probably easier to remove <code>@ConfigurationProperties</code> as you weren't really using them in the first place. </p>\n"},{"comments":[{"owner":{"account_id":1916452,"reputation":1764,"user_id":1728946,"accept_rate":79,"display_name":"C&#233;cile Fecherolle"},"score":2,"creation_date":1637156688,"post_id":67896790,"comment_id":123749997,"body_markdown":"Thank you, this was the exact cause of my current issue!","body":"Thank you, this was the exact cause of my current issue!"},{"owner":{"account_id":3353387,"reputation":391,"user_id":2816916,"display_name":"Nemolovich"},"score":1,"creation_date":1646150635,"post_id":67896790,"comment_id":126049882,"body_markdown":"Indeed, it is required if `@AllArgsContructor` is used. Since the constructor without parameters is only used by Spring, it is safer to pass it in private access: `@NoArgsConstructor(access = AccessLevel.PRIVATE)`","body":"Indeed, it is required if <code>@AllArgsContructor</code> is used. Since the constructor without parameters is only used by Spring, it is safer to pass it in private access: <code>@NoArgsConstructor(access = AccessLevel.PRIVATE)</code>"}],"tags":[],"owner":{"account_id":469276,"reputation":23596,"user_id":875775,"display_name":"Tho"},"comment_count":2,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1665852641,"creation_date":1623206291,"answer_id":67896790,"question_id":53167040,"body_markdown":"I got the same issue, but in my case, it&#39;s because I added `@AllArgsConstructor` but did not add `@NoArgsConstructor`. As the result, Spring was unable to create the config object (using the default constructor) so it just skips processing the configs and print out the warning.\r\n\r\n```java\r\n@Getter\r\n@Setter\r\n@AllArgsConstructor\r\n@NoArgsConstructor // need to add this if you have @AllArgsConstructor\r\npublic class ServerConfiguration {\r\n    private String host;\r\n    private int port;\r\n}\r\n```","title":"SpringBoot 2 the elements were left unbound","body":"<p>I got the same issue, but in my case, it's because I added <code>@AllArgsConstructor</code> but did not add <code>@NoArgsConstructor</code>. As the result, Spring was unable to create the config object (using the default constructor) so it just skips processing the configs and print out the warning.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Getter\n@Setter\n@AllArgsConstructor\n@NoArgsConstructor // need to add this if you have @AllArgsConstructor\npublic class ServerConfiguration {\n    private String host;\n    private int port;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29543910,"reputation":1,"user_id":22641953,"display_name":"wasonCheung"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695788800,"creation_date":1695788800,"answer_id":77184679,"question_id":53167040,"body_markdown":"maybe you can try adding a Modifier &quot;static&quot; for your inner class.\r\nfor example:\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    @Data\r\n    @Configuration\r\n    @ConfigurationProperties(prefix = &quot;pvs.support.cache&quot;)\r\n    public class CacheProperties {\r\n\r\n      List&lt;Item&gt; items = new ArrayList&lt;&gt;();\r\n\r\n      @Data\r\n      public static class Item {\r\n        /*缓存名*/\r\n        String name;\r\n\r\n        /*过期时长*/\r\n        @DurationUnit(ChronoUnit.SECONDS)\r\n        Duration ttl = Duration.ofSeconds(3600);\r\n      }\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"SpringBoot 2 the elements were left unbound","body":"<p>maybe you can try adding a Modifier &quot;static&quot; for your inner class.\nfor example:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>@Data\n@Configuration\n@ConfigurationProperties(prefix = \"pvs.support.cache\")\npublic class CacheProperties {\n\n  List&lt;Item&gt; items = new ArrayList&lt;&gt;();\n\n  @Data\n  public static class Item {\n    /*缓存名*/\n    String name;\n\n    /*过期时长*/\n    @DurationUnit(ChronoUnit.SECONDS)\n    Duration ttl = Duration.ofSeconds(3600);\n  }\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}],"owner":{"account_id":14156612,"reputation":91,"user_id":10227107,"display_name":"runbird"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51326,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":53167184,"answer_count":3,"score":8,"last_activity_date":1695788800,"creation_date":1541487307,"question_id":53167040,"body_markdown":"i have a file application.yml  with my Spring Boot application which is not willing to run.\r\n\r\nAccording to logs the reason of The elements [simulator.geo.b12,simulator.geo.b13,simulator.geo.b21,simulator.geo.c6,simulator.geo.host] were left unbound. This property however is set in application.yml and compiler is even returning it&#39;s value.\r\n\r\nI&#39;ll really appreciate if someone could lend me a hand with that issue.\r\n\r\n    simulator:\r\n        geo:\r\n            host: http://localhost:8080/\r\n            b12: http://localhost:8080/geo/b12\r\n            b13: http://localhost:8080/geo/b13\r\n            b21: http://localhost:8080/geo/b21\r\n            c6: http://localhost:8080/geo/c6\r\n\r\nand java class\r\n\r\n    @Getter\r\n    @Configuration\r\n    @ConfigurationProperties(prefix = &quot;simulator&quot;,ignoreUnknownFields = false)\r\n    public class VendorSimulatorProperties {\r\n    \r\n    \t@Value(&quot;${simulator.geo.host:http://localhost:8080/}&quot;)\r\n    \tprivate String initUrl;\r\n    \t\r\n    \t@Value(&quot;${simulator.geo.b12}&quot;)\r\n    \tprivate String geoB12Url;\r\n    \t\r\n    \t@Value(&quot;${simulator.geo.b13}&quot;)\r\n    \tprivate String geoB13Url;\r\n    \r\n    \t@Value(&quot;${simulator.geo.b21}&quot;)\r\n    \tprivate String geoB21Url;\r\n    \r\n    \t@Value(&quot;${simulator.geo.c6}&quot;)\r\n    \tprivate String geoC6Url;\r\n    }\r\n\r\nwhen i start to run application, i got the error msg :\r\n\r\n    **************************\r\n    APPLICATION FAILED TO START\r\n    ***************************\r\n\r\n    Description:\r\n\r\n    Binding to target [Bindable@1c140c7c type = com.mathartsys.dlc.thirdparty.vendor.config.VendorSimulatorProperties$$EnhancerBySpringCGLIB$$eb0a550b, value = &#39;provided&#39;, annotations = array&lt;Annotation&gt;[@org.springframework.boot.context.properties.ConfigurationProperties(prefix=simulator, value=simulator, ignoreUnknownFields=false, ignoreInvalidFields=false)]] failed:\r\n    \r\n        Property: simulator.geo.b12\r\n        Value: http://localhost:8080/geo/b12\r\n        Origin: class path resource [config/application-dev.yml]:204:14\r\n        Reason: The elements [simulator.geo.b12,simulator.geo.b13,simulator.geo.b21,simulator.geo.c6,simulator.geo.host] were left unbound.\r\n        Property: simulator.geo.b13\r\n        Value: http://localhost:8080/geo/b13\r\n        Origin: class path resource [config/application-dev.yml]:205:14\r\n        Reason: The elements [simulator.geo.b12,simulator.geo.b13,simulator.geo.b21,simulator.geo.c6,simulator.geo.host] were left unbound.\r\n        Property: simulator.geo.b21\r\n        Value: http://localhost:8080/geo/b21\r\n        Origin: class path resource [config/application-dev.yml]:206:14\r\n        Reason: The elements [simulator.geo.b12,simulator.geo.b13,simulator.geo.b21,simulator.geo.c6,simulator.geo.host] were left unbound.\r\n        Property: simulator.geo.c6\r\n        Value: http://localhost:8080/geo/c6\r\n        Origin: class path resource [config/application-dev.yml]:207:13\r\n        Reason: The elements [simulator.geo.b12,simulator.geo.b13,simulator.geo.b21,simulator.geo.c6,simulator.geo.host] were left unbound.\r\n        Property: simulator.geo.host\r\n        Value: http://localhost:8080/\r\n        Origin: class path resource [config/application-dev.yml]:203:15\r\n        Reason: The elements [simulator.geo.b12,simulator.geo.b13,simulator.geo.b21,simulator.geo.c6,simulator.geo.host] were left unbound.\r\n\r\nthis problem had confuse me long time, i hope someone can give me some advice; \r\ni used springboot 2.0\r\nthanks ","title":"SpringBoot 2 the elements were left unbound","body":"<p>i have a file application.yml  with my Spring Boot application which is not willing to run.</p>\n\n<p>According to logs the reason of The elements [simulator.geo.b12,simulator.geo.b13,simulator.geo.b21,simulator.geo.c6,simulator.geo.host] were left unbound. This property however is set in application.yml and compiler is even returning it's value.</p>\n\n<p>I'll really appreciate if someone could lend me a hand with that issue.</p>\n\n<pre><code>simulator:\n    geo:\n        host: http://localhost:8080/\n        b12: http://localhost:8080/geo/b12\n        b13: http://localhost:8080/geo/b13\n        b21: http://localhost:8080/geo/b21\n        c6: http://localhost:8080/geo/c6\n</code></pre>\n\n<p>and java class</p>\n\n<pre><code>@Getter\n@Configuration\n@ConfigurationProperties(prefix = \"simulator\",ignoreUnknownFields = false)\npublic class VendorSimulatorProperties {\n\n    @Value(\"${simulator.geo.host:http://localhost:8080/}\")\n    private String initUrl;\n\n    @Value(\"${simulator.geo.b12}\")\n    private String geoB12Url;\n\n    @Value(\"${simulator.geo.b13}\")\n    private String geoB13Url;\n\n    @Value(\"${simulator.geo.b21}\")\n    private String geoB21Url;\n\n    @Value(\"${simulator.geo.c6}\")\n    private String geoC6Url;\n}\n</code></pre>\n\n<p>when i start to run application, i got the error msg :</p>\n\n<pre><code>**************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nBinding to target [Bindable@1c140c7c type = com.mathartsys.dlc.thirdparty.vendor.config.VendorSimulatorProperties$$EnhancerBySpringCGLIB$$eb0a550b, value = 'provided', annotations = array&lt;Annotation&gt;[@org.springframework.boot.context.properties.ConfigurationProperties(prefix=simulator, value=simulator, ignoreUnknownFields=false, ignoreInvalidFields=false)]] failed:\n\n    Property: simulator.geo.b12\n    Value: http://localhost:8080/geo/b12\n    Origin: class path resource [config/application-dev.yml]:204:14\n    Reason: The elements [simulator.geo.b12,simulator.geo.b13,simulator.geo.b21,simulator.geo.c6,simulator.geo.host] were left unbound.\n    Property: simulator.geo.b13\n    Value: http://localhost:8080/geo/b13\n    Origin: class path resource [config/application-dev.yml]:205:14\n    Reason: The elements [simulator.geo.b12,simulator.geo.b13,simulator.geo.b21,simulator.geo.c6,simulator.geo.host] were left unbound.\n    Property: simulator.geo.b21\n    Value: http://localhost:8080/geo/b21\n    Origin: class path resource [config/application-dev.yml]:206:14\n    Reason: The elements [simulator.geo.b12,simulator.geo.b13,simulator.geo.b21,simulator.geo.c6,simulator.geo.host] were left unbound.\n    Property: simulator.geo.c6\n    Value: http://localhost:8080/geo/c6\n    Origin: class path resource [config/application-dev.yml]:207:13\n    Reason: The elements [simulator.geo.b12,simulator.geo.b13,simulator.geo.b21,simulator.geo.c6,simulator.geo.host] were left unbound.\n    Property: simulator.geo.host\n    Value: http://localhost:8080/\n    Origin: class path resource [config/application-dev.yml]:203:15\n    Reason: The elements [simulator.geo.b12,simulator.geo.b13,simulator.geo.b21,simulator.geo.c6,simulator.geo.host] were left unbound.\n</code></pre>\n\n<p>this problem had confuse me long time, i hope someone can give me some advice; \ni used springboot 2.0\nthanks </p>\n"},{"tags":["java","sms"],"comments":[{"owner":{"account_id":352898,"reputation":963,"user_id":690258,"display_name":"Keshav Saharia"},"score":0,"creation_date":1335327046,"post_id":10309139,"comment_id":13269166,"body_markdown":"Google is actually a terrible resource for information on SMS gateways.","body":"Google is actually a terrible resource for information on SMS gateways."},{"owner":{"account_id":1259089,"reputation":730,"user_id":1217913,"display_name":"Willa"},"score":0,"creation_date":1486760858,"post_id":10309139,"comment_id":71502336,"body_markdown":"@KeshavSaharia how is google of any relevance here?","body":"@KeshavSaharia how is google of any relevance here?"}],"answers":[{"tags":[],"owner":{"account_id":406375,"reputation":5054,"user_id":775849,"display_name":"Jasonw"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695788739,"creation_date":1335326505,"answer_id":10309193,"question_id":10309139,"body_markdown":"Since you chosen java as the language for your sms application, it should not be a big problem to work in linux and windows. Have you look into these java sms library?\r\n\r\n * [SMSLib][1]\r\n * [smppapi][2]\r\n\r\nThe library above should come with a lot of example application that explain on how to make calls to send or receive sms.\r\n\r\nYou can also try the these SMSC simulator\r\n\r\n * [SMSC simulator][3] from Logica \r\n * [smscsim][4] \r\n\r\n\r\n  [1]: http://smslib.org/\r\n  [2]: http://smppapi.sourceforge.net/\r\n  [3]: http://opensmpp.logica.com/CommonPart/Download/download2.html\r\n  [4]: http://code.google.com/p/smscsim/","title":"SMS Java Libraries","body":"<p>Since you chosen java as the language for your sms application, it should not be a big problem to work in linux and windows. Have you look into these java sms library?</p>\n<ul>\n<li><a href=\"http://smslib.org/\" rel=\"nofollow noreferrer\">SMSLib</a></li>\n<li><a href=\"http://smppapi.sourceforge.net/\" rel=\"nofollow noreferrer\">smppapi</a></li>\n</ul>\n<p>The library above should come with a lot of example application that explain on how to make calls to send or receive sms.</p>\n<p>You can also try the these SMSC simulator</p>\n<ul>\n<li><a href=\"http://opensmpp.logica.com/CommonPart/Download/download2.html\" rel=\"nofollow noreferrer\">SMSC simulator</a> from Logica</li>\n<li><a href=\"http://code.google.com/p/smscsim/\" rel=\"nofollow noreferrer\">smscsim</a></li>\n</ul>\n"}],"owner":{"account_id":1296553,"reputation":25,"user_id":1247468,"display_name":"Rona Walter Finiasi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6325,"favorite_count":0,"down_vote_count":2,"up_vote_count":3,"closed_date":1548936026,"answer_count":1,"score":1,"last_activity_date":1695788739,"creation_date":1335325990,"question_id":10309139,"body_markdown":"I&#39;m working a java desktop application for sending and receiving messages.Any one can help me with free Java libraries that will help my program run well.I also need to document the library information.SMS Gateway and SMSC all up and running , I just need to create a application that will run on both linux or windows server that can send and receive messages.This project is concerning mLearning. ","title":"SMS Java Libraries","body":"<p>I'm working a java desktop application for sending and receiving messages.Any one can help me with free Java libraries that will help my program run well.I also need to document the library information.SMS Gateway and SMSC all up and running , I just need to create a application that will run on both linux or windows server that can send and receive messages.This project is concerning mLearning. </p>\n"},{"tags":["java","spring-boot","security"],"comments":[{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1692894403,"post_id":76969716,"comment_id":135689361,"body_markdown":"what about Sonar Lint plugin, did you try it ?","body":"what about Sonar Lint plugin, did you try it ?"},{"owner":{"account_id":17893364,"reputation":94,"user_id":12999361,"display_name":"Sowik"},"score":0,"creation_date":1692902153,"post_id":76969716,"comment_id":135691021,"body_markdown":"OWASP Dependency Check checks if the versions of the dependencies have public vulnerabilities.","body":"OWASP Dependency Check checks if the versions of the dependencies have public vulnerabilities."},{"owner":{"account_id":17703195,"reputation":31,"user_id":12852415,"display_name":"Manu Bouzas"},"score":0,"creation_date":1692972910,"post_id":76969716,"comment_id":135702003,"body_markdown":"But not sql injections","body":"But not sql injections"},{"owner":{"account_id":17703195,"reputation":31,"user_id":12852415,"display_name":"Manu Bouzas"},"score":0,"creation_date":1692972942,"post_id":76969716,"comment_id":135702011,"body_markdown":"@AndreiLisa I tried, and not sql injections are detected","body":"@AndreiLisa I tried, and not sql injections are detected"},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1692973963,"post_id":76969716,"comment_id":135702275,"body_markdown":"[14538-reshift-security](https://plugins.jetbrains.com/plugin/14538-reshift-security)","body":"<a href=\"https://plugins.jetbrains.com/plugin/14538-reshift-security\" rel=\"nofollow noreferrer\">14538-reshift-security</a>"},{"owner":{"account_id":17703195,"reputation":31,"user_id":12852415,"display_name":"Manu Bouzas"},"score":1,"creation_date":1693312185,"post_id":76969716,"comment_id":135741412,"body_markdown":"@AndreiLisa Thanks, I just run reshift and sql injections are not detected :(","body":"@AndreiLisa Thanks, I just run reshift and sql injections are not detected :("}],"owner":{"account_id":17703195,"reputation":31,"user_id":12852415,"display_name":"Manu Bouzas"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695788351,"creation_date":1692883243,"question_id":76969716,"body_markdown":"any recommendation to install and run locally any plugin on Intellij to avoid security vulnerabilities like SQL Injections, it is not an open source project, written in Java.\r\n\r\nThanks a lot","title":"Intellij Plugin to scan code security (locally)","body":"<p>any recommendation to install and run locally any plugin on Intellij to avoid security vulnerabilities like SQL Injections, it is not an open source project, written in Java.</p>\n<p>Thanks a lot</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":228170,"reputation":16153,"user_id":490315,"accept_rate":94,"display_name":"whirlwin"},"score":3,"creation_date":1305489489,"post_id":6010843,"comment_id":6946106,"body_markdown":"Or create a new class that holds the three objects. What are you using it for?","body":"Or create a new class that holds the three objects. What are you using it for?"}],"answers":[{"comments":[{"owner":{"account_id":12404,"reputation":62016,"user_id":24396,"accept_rate":74,"display_name":"Steve Kuo"},"score":3,"creation_date":1305521393,"post_id":6010861,"comment_id":6949425,"body_markdown":"You should make `a`, `b` and `c` final.","body":"You should make <code>a</code>, <code>b</code> and <code>c</code> final."},{"owner":{"account_id":791608,"reputation":7269,"user_id":880787,"accept_rate":83,"display_name":"AvrDragon"},"score":3,"creation_date":1370006768,"post_id":6010861,"comment_id":24314120,"body_markdown":"equals and hashCode could be not bad here","body":"equals and hashCode could be not bad here"},{"owner":{"account_id":4389073,"reputation":5930,"user_id":4279201,"accept_rate":99,"display_name":"shinzou"},"score":1,"creation_date":1470485238,"post_id":6010861,"comment_id":64976970,"body_markdown":"Why make getters if a,b,c aren&#39;t private?","body":"Why make getters if a,b,c aren&#39;t private?"},{"owner":{"account_id":7460722,"reputation":2445,"user_id":6203078,"accept_rate":94,"display_name":"Ami Hollander"},"score":0,"creation_date":1488446683,"post_id":6010861,"comment_id":72237882,"body_markdown":"@SteveKuo why it must be final?","body":"@SteveKuo why it must be final?"},{"owner":{"account_id":340420,"reputation":956,"user_id":1898523,"accept_rate":75,"display_name":"wrapperapps"},"score":0,"creation_date":1517522887,"post_id":6010861,"comment_id":84141870,"body_markdown":"@AmiHollander in a previous edit, the fields were not private. now it is a bit redundant, but maybe still good for conveying that they are final (instead of implying from lack of setters).","body":"@AmiHollander in a previous edit, the fields were not private. now it is a bit redundant, but maybe still good for conveying that they are final (instead of implying from lack of setters)."},{"owner":{"account_id":174918,"reputation":13396,"user_id":404568,"accept_rate":45,"display_name":"David Given"},"score":0,"creation_date":1518539523,"post_id":6010861,"comment_id":84543880,"body_markdown":"AutoValue is your friend here: https://github.com/google/auto/blob/master/value/userguide/index.md It&#39;ll allow you to trivially make structural objects like this which are typesafe and get hashing, comparison, immutability etc for free.","body":"AutoValue is your friend here: <a href=\"https://github.com/google/auto/blob/master/value/userguide/index.md\" rel=\"nofollow noreferrer\">github.com/google/auto/blob/master/value/userguide/index.md</a> It&#39;ll allow you to trivially make structural objects like this which are typesafe and get hashing, comparison, immutability etc for free."}],"tags":[],"owner":{"account_id":101585,"reputation":107721,"user_id":273200,"accept_rate":100,"display_name":"Bala R"},"comment_count":6,"down_vote_count":0,"up_vote_count":71,"is_accepted":true,"score":71,"last_activity_date":1478717953,"creation_date":1305489535,"answer_id":6010861,"question_id":6010843,"body_markdown":"    public class Triplet&lt;T, U, V&gt; {\r\n\r\n        private final T first;\r\n        private final U second;\r\n        private final V third;\r\n\r\n        public Triplet(T first, U second, V third) {\r\n            this.first = first;\r\n            this.second = second;\r\n            this.third = third;\r\n        }\r\n    \r\n        public T getFirst() { return first; }\r\n        public U getSecond() { return second; }\r\n        public V getThird() { return third; }\r\n    }\r\n\r\nAnd to instantiate the list:\r\n\r\n    List&lt;Triplet&lt;String, Integer, Integer&gt;&gt; = new ArrayList&lt;&gt;();","title":"Java: how to store data triple in a list?","body":"<pre><code>public class Triplet&lt;T, U, V&gt; {\n\n    private final T first;\n    private final U second;\n    private final V third;\n\n    public Triplet(T first, U second, V third) {\n        this.first = first;\n        this.second = second;\n        this.third = third;\n    }\n\n    public T getFirst() { return first; }\n    public U getSecond() { return second; }\n    public V getThird() { return third; }\n}\n</code></pre>\n\n<p>And to instantiate the list:</p>\n\n<pre><code>List&lt;Triplet&lt;String, Integer, Integer&gt;&gt; = new ArrayList&lt;&gt;();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":686808,"reputation":1236,"user_id":547780,"accept_rate":38,"display_name":"AbuZubair"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1384652129,"creation_date":1346952157,"answer_id":12305256,"question_id":6010843,"body_markdown":"I seem to agree with whirlwin.\r\n\r\nThe general consensus, although I can&#39;t find the evidence now, stipulates that parametrized types should be no more than 2. This is why every class I can think of in the Java collections library has at max two parametrized types. \r\n\r\nCode becomes cluttered when you have three parametrized types. Just way too many &gt;,&lt; to deal with.\r\n\r\nI suggest what whirlwin said and create an object that holds the three specific types you need. ","title":"Java: how to store data triple in a list?","body":"<p>I seem to agree with whirlwin.</p>\n\n<p>The general consensus, although I can't find the evidence now, stipulates that parametrized types should be no more than 2. This is why every class I can think of in the Java collections library has at max two parametrized types. </p>\n\n<p>Code becomes cluttered when you have three parametrized types. Just way too many >,&lt; to deal with.</p>\n\n<p>I suggest what whirlwin said and create an object that holds the three specific types you need. </p>\n"},{"tags":[],"owner":{"account_id":106337,"reputation":30941,"user_id":283311,"accept_rate":76,"display_name":"Ken"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1429349082,"creation_date":1384651891,"answer_id":20026120,"question_id":6010843,"body_markdown":"If you expect track four or more objects together, look for something that scales.\r\n\r\nIf you were to decide you want the notion of a Triple, to get some ideas you can follow Sun&#39;s pattern for [javac.util.Pair][1]:\r\n\r\n    public class Pair&lt;A, B&gt; {\r\n    \r\n        public final A fst;\r\n        public final B snd;\r\n    \r\n        public Pair(A fst, B snd) {\r\n            this.fst = fst;\r\n            this.snd = snd;\r\n        }\r\n    \r\n        public String toString() {\r\n            return &quot;Pair[&quot; + fst + &quot;,&quot; + snd + &quot;]&quot;;\r\n        }\r\n    \r\n        private static boolean equals(Object x, Object y) {\r\n            return (x == null &amp;&amp; y == null) || (x != null &amp;&amp; x.equals(y));\r\n        }\r\n    \r\n        public boolean equals(Object other) {\r\n            return\r\n                other instanceof Pair&lt;?,?&gt; &amp;&amp;\r\n                equals(fst, ((Pair&lt;?,?&gt;)other).fst) &amp;&amp;\r\n                equals(snd, ((Pair&lt;?,?&gt;)other).snd);\r\n        }\r\n    \r\n        public int hashCode() {\r\n            if (fst == null) return (snd == null) ? 0 : snd.hashCode() + 1;\r\n            else if (snd == null) return fst.hashCode() + 2;\r\n            else return fst.hashCode() * 17 + snd.hashCode();\r\n        }\r\n    \r\n        public static &lt;A,B&gt; Pair&lt;A,B&gt; of(A a, B b) {\r\n            return new Pair&lt;A,B&gt;(a,b);\r\n        }\r\n    }\r\n\r\nor follow Google&#39;s [android.util.Pair][2]\r\n\r\n    public class Pair&lt;F, S&gt; {\r\n        public final F first;\r\n        public final S second;\r\n    \r\n        public Pair(F first, S second) {\r\n            this.first = first;\r\n            this.second = second;\r\n        }\r\n    \r\n        public boolean equals(Object o) {\r\n            if (o == this) return true;\r\n            if (!(o instanceof Pair)) return false;\r\n            final Pair&lt;F, S&gt; other;\r\n            try {\r\n                other = (Pair&lt;F, S&gt;) o;\r\n            } catch (ClassCastException e) {\r\n                return false;\r\n            }\r\n            return first.equals(other.first) &amp;&amp; second.equals(other.second);\r\n        }\r\n        \r\n        public int hashCode() {\r\n            int result = 17;\r\n            result = 31 * result + first.hashCode();\r\n            result = 31 * result + second.hashCode();\r\n            return result;\r\n        }\r\n        //...\r\n    }\r\n\r\n  [1]: http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/com/sun/tools/javac/util/Pair.java\r\n  [2]: http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/util/Pair.java","title":"Java: how to store data triple in a list?","body":"<p>If you expect track four or more objects together, look for something that scales.</p>\n\n<p>If you were to decide you want the notion of a Triple, to get some ideas you can follow Sun's pattern for <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/com/sun/tools/javac/util/Pair.java\" rel=\"nofollow\">javac.util.Pair</a>:</p>\n\n<pre><code>public class Pair&lt;A, B&gt; {\n\n    public final A fst;\n    public final B snd;\n\n    public Pair(A fst, B snd) {\n        this.fst = fst;\n        this.snd = snd;\n    }\n\n    public String toString() {\n        return \"Pair[\" + fst + \",\" + snd + \"]\";\n    }\n\n    private static boolean equals(Object x, Object y) {\n        return (x == null &amp;&amp; y == null) || (x != null &amp;&amp; x.equals(y));\n    }\n\n    public boolean equals(Object other) {\n        return\n            other instanceof Pair&lt;?,?&gt; &amp;&amp;\n            equals(fst, ((Pair&lt;?,?&gt;)other).fst) &amp;&amp;\n            equals(snd, ((Pair&lt;?,?&gt;)other).snd);\n    }\n\n    public int hashCode() {\n        if (fst == null) return (snd == null) ? 0 : snd.hashCode() + 1;\n        else if (snd == null) return fst.hashCode() + 2;\n        else return fst.hashCode() * 17 + snd.hashCode();\n    }\n\n    public static &lt;A,B&gt; Pair&lt;A,B&gt; of(A a, B b) {\n        return new Pair&lt;A,B&gt;(a,b);\n    }\n}\n</code></pre>\n\n<p>or follow Google's <a href=\"http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/util/Pair.java\" rel=\"nofollow\">android.util.Pair</a></p>\n\n<pre><code>public class Pair&lt;F, S&gt; {\n    public final F first;\n    public final S second;\n\n    public Pair(F first, S second) {\n        this.first = first;\n        this.second = second;\n    }\n\n    public boolean equals(Object o) {\n        if (o == this) return true;\n        if (!(o instanceof Pair)) return false;\n        final Pair&lt;F, S&gt; other;\n        try {\n            other = (Pair&lt;F, S&gt;) o;\n        } catch (ClassCastException e) {\n            return false;\n        }\n        return first.equals(other.first) &amp;&amp; second.equals(other.second);\n    }\n\n    public int hashCode() {\n        int result = 17;\n        result = 31 * result + first.hashCode();\n        result = 31 * result + second.hashCode();\n        return result;\n    }\n    //...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6019943,"reputation":165,"user_id":4727406,"display_name":"NikitaFeodonit"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1429359807,"creation_date":1429359807,"answer_id":29717306,"question_id":6010843,"body_markdown":"Based on [Triple][1] and [ImmutableTriple][2] without dependences of imports of Apache&#39;s code. L, M, and R types must implement interface Comparable.\r\n\r\nTriple.java\r\n\r\n    import java.io.Serializable;\r\n    \r\n    /**\r\n     * &lt;p&gt;A triple consisting of three elements.&lt;/p&gt;\r\n     * &lt;p/&gt;\r\n     * &lt;p&gt;This class is an abstract implementation defining the basic API. It refers to the elements as\r\n     * &#39;left&#39;, &#39;middle&#39; and &#39;right&#39;.&lt;/p&gt;\r\n     * &lt;p/&gt;\r\n     * &lt;p&gt;Subclass implementations may be mutable or immutable. However, there is no restriction on the\r\n     * type of the stored objects that may be stored. If mutable objects are stored in the triple, then\r\n     * the triple itself effectively becomes mutable.&lt;/p&gt;\r\n     *\r\n     * @param &lt;L&gt;\r\n     *         the left element type\r\n     * @param &lt;M&gt;\r\n     *         the middle element type\r\n     * @param &lt;R&gt;\r\n     *         the right element type\r\n     *\r\n     * @version $Id: Triple.java 1557584 2014-01-12 18:26:49Z britter $\r\n     * @since 3.2\r\n     */\r\n    public abstract class Triple&lt;L, M, R&gt;\r\n            implements Comparable&lt;Triple&lt;L, M, R&gt;&gt;, Serializable\r\n    {\r\n    \r\n        /**\r\n         * Serialization version\r\n         */\r\n        private static final long serialVersionUID = 1L;\r\n    \r\n    \r\n        /**\r\n         * &lt;p&gt;Obtains an immutable triple of from three objects inferring the generic types.&lt;/p&gt;\r\n         * &lt;p/&gt;\r\n         * &lt;p&gt;This factory allows the triple to be created using inference to obtain the generic\r\n         * types.&lt;/p&gt;\r\n         *\r\n         * @param &lt;L&gt;\r\n         *         the left element type\r\n         * @param &lt;M&gt;\r\n         *         the middle element type\r\n         * @param &lt;R&gt;\r\n         *         the right element type\r\n         * @param left\r\n         *         the left element, may be null\r\n         * @param middle\r\n         *         the middle element, may be null\r\n         * @param right\r\n         *         the right element, may be null\r\n         *\r\n         * @return a triple formed from the three parameters, not null\r\n         */\r\n        public static &lt;L, M, R&gt; Triple&lt;L, M, R&gt; of(\r\n                final L left,\r\n                final M middle,\r\n                final R right)\r\n        {\r\n            return new ImmutableTriple&lt;L, M, R&gt;(left, middle, right);\r\n        }\r\n    \r\n        //-----------------------------------------------------------------------\r\n    \r\n    \r\n        /**\r\n         * &lt;p&gt;Gets the left element from this triple.&lt;/p&gt;\r\n         *\r\n         * @return the left element, may be null\r\n         */\r\n        public abstract L getLeft();\r\n    \r\n        /**\r\n         * &lt;p&gt;Gets the middle element from this triple.&lt;/p&gt;\r\n         *\r\n         * @return the middle element, may be null\r\n         */\r\n        public abstract M getMiddle();\r\n    \r\n        /**\r\n         * &lt;p&gt;Gets the right element from this triple.&lt;/p&gt;\r\n         *\r\n         * @return the right element, may be null\r\n         */\r\n        public abstract R getRight();\r\n    \r\n        //-----------------------------------------------------------------------\r\n    \r\n    \r\n        /**\r\n         * &lt;p&gt;Compares the triple based on the left element, followed by the middle element, finally the\r\n         * right element. The types must be {@code Comparable}.&lt;/p&gt;\r\n         *\r\n         * @param other\r\n         *         the other triple, not null\r\n         *\r\n         * @return negative if this is less, zero if equal, positive if greater\r\n         */\r\n        @Override\r\n        public int compareTo(final Triple&lt;L, M, R&gt; other)\r\n        {\r\n            @SuppressWarnings(&quot;unchecked&quot;) // assume this can be done; if not throw CCE as per Javadoc\r\n            final Comparable&lt;Object&gt; comparableLeft = (Comparable&lt;Object&gt;) getLeft();\r\n            int cmpLeft = comparableLeft.compareTo(other.getLeft());\r\n    \r\n            if (cmpLeft != 0) {\r\n                return cmpLeft;\r\n            }\r\n    \r\n            @SuppressWarnings(&quot;unchecked&quot;) // assume this can be done; if not throw CCE as per Javadoc\r\n            final Comparable&lt;Object&gt; comparableMidle = (Comparable&lt;Object&gt;) getMiddle();\r\n            int cmpMidle = comparableMidle.compareTo(other.getMiddle());\r\n    \r\n            if (cmpMidle != 0) {\r\n                return cmpMidle;\r\n            }\r\n    \r\n            @SuppressWarnings(&quot;unchecked&quot;) // assume this can be done; if not throw CCE as per Javadoc\r\n            final Comparable&lt;Object&gt; comparableRight = (Comparable&lt;Object&gt;) getRight();\r\n            int cmpRight = comparableRight.compareTo(other.getRight());\r\n    \r\n            return cmpRight;\r\n        }\r\n    \r\n    \r\n        /**\r\n         * &lt;p&gt;Compares this triple to another based on the three elements.&lt;/p&gt;\r\n         *\r\n         * @param obj\r\n         *         the object to compare to, null returns false\r\n         *\r\n         * @return true if the elements of the triple are equal\r\n         */\r\n        @Override\r\n        public boolean equals(final Object obj)\r\n        {\r\n            if (obj == null) {\r\n                return false;\r\n            }\r\n            if (obj == this) {\r\n                return true;\r\n            }\r\n            if (obj instanceof Triple&lt;?, ?, ?&gt;) {\r\n                final Triple&lt;?, ?, ?&gt; other = (Triple&lt;?, ?, ?&gt;) obj;\r\n    \r\n    \r\n                return equals(getLeft(), other.getLeft()) &amp;&amp;\r\n                        equals(getMiddle(), other.getMiddle()) &amp;&amp;\r\n                        equals(getRight(), other.getRight());\r\n            }\r\n            return false;\r\n        }\r\n    \r\n    \r\n        private boolean equals(\r\n                final Object object1,\r\n                final Object object2)\r\n        {\r\n            return !(object1 == null || object2 == null) &amp;&amp;\r\n                    (object1 == object2 || object1.equals(object2));\r\n        }\r\n    \r\n    \r\n        /**\r\n         * &lt;p&gt;Returns a suitable hash code.&lt;/p&gt;\r\n         *\r\n         * @return the hash code\r\n         */\r\n        @Override\r\n        public int hashCode()\r\n        {\r\n            return (getLeft() == null ? 0 : getLeft().hashCode()) ^\r\n                    (getMiddle() == null ? 0 : getMiddle().hashCode()) ^\r\n                    (getRight() == null ? 0 : getRight().hashCode());\r\n        }\r\n    \r\n    \r\n        /**\r\n         * &lt;p&gt;Returns a String representation of this triple using the format {@code\r\n         * ($left, $middle, $right)}.&lt;/p&gt;\r\n         *\r\n         * @return a string describing this object, not null\r\n         */\r\n        @Override\r\n        public String toString()\r\n        {\r\n            return new StringBuilder().append(&#39;(&#39;)\r\n                    .append(getLeft())\r\n                    .append(&#39;,&#39;)\r\n                    .append(getMiddle())\r\n                    .append(&#39;,&#39;)\r\n                    .append(getRight())\r\n                    .append(&#39;)&#39;)\r\n                    .toString();\r\n        }\r\n    \r\n    \r\n        /**\r\n         * &lt;p&gt;Formats the receiver using the given format.&lt;/p&gt;\r\n         * &lt;p/&gt;\r\n         * &lt;p&gt;This uses {@link java.util.Formattable} to perform the formatting. Three variables may be\r\n         * used to embed the left and right elements. Use {@code %1$s} for the left element, {@code\r\n         * %2$s} for the middle and {@code %3$s} for the right element. The default format used by\r\n         * {@code toString()} is {@code (%1$s,%2$s,%3$s)}.&lt;/p&gt;\r\n         *\r\n         * @param format\r\n         *         the format string, optionally containing {@code %1$s}, {@code %2$s} and {@code %3$s},\r\n         *         not null\r\n         *\r\n         * @return the formatted string, not null\r\n         */\r\n        public String toString(final String format)\r\n        {\r\n            return String.format(format, getLeft(), getMiddle(), getRight());\r\n        }\r\n    }\r\n\r\nImmutableTriple.java\r\n\r\n    public final class ImmutableTriple&lt;L, M, R&gt; extends Triple&lt;L, M, R&gt; {\r\n    \r\n        /** Serialization version */\r\n        private static final long serialVersionUID = 1L;\r\n    \r\n        /** Left object */\r\n        public final L left;\r\n        /** Middle object */\r\n        public final M middle;\r\n        /** Right object */\r\n        public final R right;\r\n    \r\n        /**\r\n         * &lt;p&gt;Obtains an immutable triple of from three objects inferring the generic types.&lt;/p&gt;\r\n         *\r\n         * &lt;p&gt;This factory allows the triple to be created using inference to\r\n         * obtain the generic types.&lt;/p&gt;\r\n         *\r\n         * @param &lt;L&gt; the left element type\r\n         * @param &lt;M&gt; the middle element type\r\n         * @param &lt;R&gt; the right element type\r\n         * @param left  the left element, may be null\r\n         * @param middle  the middle element, may be null\r\n         * @param right  the right element, may be null\r\n         * @return a triple formed from the three parameters, not null\r\n         */\r\n        public static &lt;L, M, R&gt; ImmutableTriple&lt;L, M, R&gt; of(final L left, final M middle, final R right) {\r\n            return new ImmutableTriple&lt;L, M, R&gt;(left, middle, right);\r\n        }\r\n    \r\n        /**\r\n         * Create a new triple instance.\r\n         *\r\n         * @param left  the left value, may be null\r\n         * @param middle the middle value, may be null\r\n         * @param right  the right value, may be null\r\n         */\r\n        public ImmutableTriple(final L left, final M middle, final R right) {\r\n            super();\r\n            this.left = left;\r\n            this.middle = middle;\r\n            this.right = right;\r\n        }\r\n    \r\n        //-----------------------------------------------------------------------\r\n        /**\r\n         * {@inheritDoc}\r\n         */\r\n        @Override\r\n        public L getLeft() {\r\n            return left;\r\n        }\r\n    \r\n        /**\r\n         * {@inheritDoc}\r\n         */\r\n        @Override\r\n        public M getMiddle() {\r\n            return middle;\r\n        }\r\n    \r\n        /**\r\n         * {@inheritDoc}\r\n         */\r\n        @Override\r\n        public R getRight() {\r\n            return right;\r\n        }\r\n    }\r\n\r\n  [1]: http://commons.apache.org/proper/commons-lang/apidocs/src-html/org/apache/commons/lang3/tuple/Triple.html\r\n  [2]: https://commons.apache.org/proper/commons-lang/javadocs/api-3.3.2/src-html/org/apache/commons/lang3/tuple/ImmutableTriple.html\r\n\r\n\r\n","title":"Java: how to store data triple in a list?","body":"<p>Based on <a href=\"http://commons.apache.org/proper/commons-lang/apidocs/src-html/org/apache/commons/lang3/tuple/Triple.html\" rel=\"nofollow\">Triple</a> and <a href=\"https://commons.apache.org/proper/commons-lang/javadocs/api-3.3.2/src-html/org/apache/commons/lang3/tuple/ImmutableTriple.html\" rel=\"nofollow\">ImmutableTriple</a> without dependences of imports of Apache's code. L, M, and R types must implement interface Comparable.</p>\n\n<p>Triple.java</p>\n\n<pre><code>import java.io.Serializable;\n\n/**\n * &lt;p&gt;A triple consisting of three elements.&lt;/p&gt;\n * &lt;p/&gt;\n * &lt;p&gt;This class is an abstract implementation defining the basic API. It refers to the elements as\n * 'left', 'middle' and 'right'.&lt;/p&gt;\n * &lt;p/&gt;\n * &lt;p&gt;Subclass implementations may be mutable or immutable. However, there is no restriction on the\n * type of the stored objects that may be stored. If mutable objects are stored in the triple, then\n * the triple itself effectively becomes mutable.&lt;/p&gt;\n *\n * @param &lt;L&gt;\n *         the left element type\n * @param &lt;M&gt;\n *         the middle element type\n * @param &lt;R&gt;\n *         the right element type\n *\n * @version $Id: Triple.java 1557584 2014-01-12 18:26:49Z britter $\n * @since 3.2\n */\npublic abstract class Triple&lt;L, M, R&gt;\n        implements Comparable&lt;Triple&lt;L, M, R&gt;&gt;, Serializable\n{\n\n    /**\n     * Serialization version\n     */\n    private static final long serialVersionUID = 1L;\n\n\n    /**\n     * &lt;p&gt;Obtains an immutable triple of from three objects inferring the generic types.&lt;/p&gt;\n     * &lt;p/&gt;\n     * &lt;p&gt;This factory allows the triple to be created using inference to obtain the generic\n     * types.&lt;/p&gt;\n     *\n     * @param &lt;L&gt;\n     *         the left element type\n     * @param &lt;M&gt;\n     *         the middle element type\n     * @param &lt;R&gt;\n     *         the right element type\n     * @param left\n     *         the left element, may be null\n     * @param middle\n     *         the middle element, may be null\n     * @param right\n     *         the right element, may be null\n     *\n     * @return a triple formed from the three parameters, not null\n     */\n    public static &lt;L, M, R&gt; Triple&lt;L, M, R&gt; of(\n            final L left,\n            final M middle,\n            final R right)\n    {\n        return new ImmutableTriple&lt;L, M, R&gt;(left, middle, right);\n    }\n\n    //-----------------------------------------------------------------------\n\n\n    /**\n     * &lt;p&gt;Gets the left element from this triple.&lt;/p&gt;\n     *\n     * @return the left element, may be null\n     */\n    public abstract L getLeft();\n\n    /**\n     * &lt;p&gt;Gets the middle element from this triple.&lt;/p&gt;\n     *\n     * @return the middle element, may be null\n     */\n    public abstract M getMiddle();\n\n    /**\n     * &lt;p&gt;Gets the right element from this triple.&lt;/p&gt;\n     *\n     * @return the right element, may be null\n     */\n    public abstract R getRight();\n\n    //-----------------------------------------------------------------------\n\n\n    /**\n     * &lt;p&gt;Compares the triple based on the left element, followed by the middle element, finally the\n     * right element. The types must be {@code Comparable}.&lt;/p&gt;\n     *\n     * @param other\n     *         the other triple, not null\n     *\n     * @return negative if this is less, zero if equal, positive if greater\n     */\n    @Override\n    public int compareTo(final Triple&lt;L, M, R&gt; other)\n    {\n        @SuppressWarnings(\"unchecked\") // assume this can be done; if not throw CCE as per Javadoc\n        final Comparable&lt;Object&gt; comparableLeft = (Comparable&lt;Object&gt;) getLeft();\n        int cmpLeft = comparableLeft.compareTo(other.getLeft());\n\n        if (cmpLeft != 0) {\n            return cmpLeft;\n        }\n\n        @SuppressWarnings(\"unchecked\") // assume this can be done; if not throw CCE as per Javadoc\n        final Comparable&lt;Object&gt; comparableMidle = (Comparable&lt;Object&gt;) getMiddle();\n        int cmpMidle = comparableMidle.compareTo(other.getMiddle());\n\n        if (cmpMidle != 0) {\n            return cmpMidle;\n        }\n\n        @SuppressWarnings(\"unchecked\") // assume this can be done; if not throw CCE as per Javadoc\n        final Comparable&lt;Object&gt; comparableRight = (Comparable&lt;Object&gt;) getRight();\n        int cmpRight = comparableRight.compareTo(other.getRight());\n\n        return cmpRight;\n    }\n\n\n    /**\n     * &lt;p&gt;Compares this triple to another based on the three elements.&lt;/p&gt;\n     *\n     * @param obj\n     *         the object to compare to, null returns false\n     *\n     * @return true if the elements of the triple are equal\n     */\n    @Override\n    public boolean equals(final Object obj)\n    {\n        if (obj == null) {\n            return false;\n        }\n        if (obj == this) {\n            return true;\n        }\n        if (obj instanceof Triple&lt;?, ?, ?&gt;) {\n            final Triple&lt;?, ?, ?&gt; other = (Triple&lt;?, ?, ?&gt;) obj;\n\n\n            return equals(getLeft(), other.getLeft()) &amp;&amp;\n                    equals(getMiddle(), other.getMiddle()) &amp;&amp;\n                    equals(getRight(), other.getRight());\n        }\n        return false;\n    }\n\n\n    private boolean equals(\n            final Object object1,\n            final Object object2)\n    {\n        return !(object1 == null || object2 == null) &amp;&amp;\n                (object1 == object2 || object1.equals(object2));\n    }\n\n\n    /**\n     * &lt;p&gt;Returns a suitable hash code.&lt;/p&gt;\n     *\n     * @return the hash code\n     */\n    @Override\n    public int hashCode()\n    {\n        return (getLeft() == null ? 0 : getLeft().hashCode()) ^\n                (getMiddle() == null ? 0 : getMiddle().hashCode()) ^\n                (getRight() == null ? 0 : getRight().hashCode());\n    }\n\n\n    /**\n     * &lt;p&gt;Returns a String representation of this triple using the format {@code\n     * ($left, $middle, $right)}.&lt;/p&gt;\n     *\n     * @return a string describing this object, not null\n     */\n    @Override\n    public String toString()\n    {\n        return new StringBuilder().append('(')\n                .append(getLeft())\n                .append(',')\n                .append(getMiddle())\n                .append(',')\n                .append(getRight())\n                .append(')')\n                .toString();\n    }\n\n\n    /**\n     * &lt;p&gt;Formats the receiver using the given format.&lt;/p&gt;\n     * &lt;p/&gt;\n     * &lt;p&gt;This uses {@link java.util.Formattable} to perform the formatting. Three variables may be\n     * used to embed the left and right elements. Use {@code %1$s} for the left element, {@code\n     * %2$s} for the middle and {@code %3$s} for the right element. The default format used by\n     * {@code toString()} is {@code (%1$s,%2$s,%3$s)}.&lt;/p&gt;\n     *\n     * @param format\n     *         the format string, optionally containing {@code %1$s}, {@code %2$s} and {@code %3$s},\n     *         not null\n     *\n     * @return the formatted string, not null\n     */\n    public String toString(final String format)\n    {\n        return String.format(format, getLeft(), getMiddle(), getRight());\n    }\n}\n</code></pre>\n\n<p>ImmutableTriple.java</p>\n\n<pre><code>public final class ImmutableTriple&lt;L, M, R&gt; extends Triple&lt;L, M, R&gt; {\n\n    /** Serialization version */\n    private static final long serialVersionUID = 1L;\n\n    /** Left object */\n    public final L left;\n    /** Middle object */\n    public final M middle;\n    /** Right object */\n    public final R right;\n\n    /**\n     * &lt;p&gt;Obtains an immutable triple of from three objects inferring the generic types.&lt;/p&gt;\n     *\n     * &lt;p&gt;This factory allows the triple to be created using inference to\n     * obtain the generic types.&lt;/p&gt;\n     *\n     * @param &lt;L&gt; the left element type\n     * @param &lt;M&gt; the middle element type\n     * @param &lt;R&gt; the right element type\n     * @param left  the left element, may be null\n     * @param middle  the middle element, may be null\n     * @param right  the right element, may be null\n     * @return a triple formed from the three parameters, not null\n     */\n    public static &lt;L, M, R&gt; ImmutableTriple&lt;L, M, R&gt; of(final L left, final M middle, final R right) {\n        return new ImmutableTriple&lt;L, M, R&gt;(left, middle, right);\n    }\n\n    /**\n     * Create a new triple instance.\n     *\n     * @param left  the left value, may be null\n     * @param middle the middle value, may be null\n     * @param right  the right value, may be null\n     */\n    public ImmutableTriple(final L left, final M middle, final R right) {\n        super();\n        this.left = left;\n        this.middle = middle;\n        this.right = right;\n    }\n\n    //-----------------------------------------------------------------------\n    /**\n     * {@inheritDoc}\n     */\n    @Override\n    public L getLeft() {\n        return left;\n    }\n\n    /**\n     * {@inheritDoc}\n     */\n    @Override\n    public M getMiddle() {\n        return middle;\n    }\n\n    /**\n     * {@inheritDoc}\n     */\n    @Override\n    public R getRight() {\n        return right;\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":9118599,"reputation":457,"user_id":6784881,"display_name":"Talos"},"score":1,"creation_date":1566550950,"post_id":32484678,"comment_id":101699859,"body_markdown":"It is easy to find collision for this class&#39;s hashCode method. Consider creating three instances (&lt;Integer, Integer, Integer&gt;). First with [1,0,0], second with [0,1,0], third with [0,0,1]. All of them will have hashCode equal to one, even though they are different triplets.","body":"It is easy to find collision for this class&#39;s hashCode method. Consider creating three instances (&lt;Integer, Integer, Integer&gt;). First with [1,0,0], second with [0,1,0], third with [0,0,1]. All of them will have hashCode equal to one, even though they are different triplets."}],"tags":[],"owner":{"account_id":6819840,"reputation":4881,"user_id":5247331,"accept_rate":77,"display_name":"Vitaly Zinchenko"},"comment_count":1,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1441815606,"creation_date":1441815606,"answer_id":32484678,"question_id":6010843,"body_markdown":"    public class Triple&lt;F, S, T&gt; {\r\n    \r\n        public final F first;\r\n        public final S second;\r\n        public final T third;\r\n    \r\n        public Triple(F first, S second, T third) {\r\n            this.first = first;\r\n            this.second = second;\r\n            this.third = third;\r\n        }\r\n    \r\n        @Override\r\n        public boolean equals(Object o) {\r\n            if (!(o instanceof Triple)) {\r\n                return false;\r\n            }\r\n            Triple&lt;?, ?, ?&gt; p = (Triple&lt;?, ?, ?&gt;) o;\r\n            return first.equals(p.first) &amp;&amp; second.equals(p.second) &amp;&amp; third.equals(p.third);\r\n        }\r\n    \r\n        private static boolean equals(Object x, Object y) {\r\n            return (x == null &amp;&amp; y == null) || (x != null &amp;&amp; x.equals(y));\r\n        }\r\n    \r\n        @Override\r\n        public int hashCode() {\r\n            return (first == null ? 0 : first.hashCode()) ^ (second == null ? 0 : second.hashCode()) ^ (third == null ? 0 : third.hashCode());\r\n        }\r\n        \r\n        public static &lt;F, S, T&gt; Triple &lt;F, S, T&gt; create(F f, S s, T t) {\r\n            return new Triple&lt;F, S, T&gt;(f, s, t);\r\n        }\r\n    }","title":"Java: how to store data triple in a list?","body":"<pre><code>public class Triple&lt;F, S, T&gt; {\n\n    public final F first;\n    public final S second;\n    public final T third;\n\n    public Triple(F first, S second, T third) {\n        this.first = first;\n        this.second = second;\n        this.third = third;\n    }\n\n    @Override\n    public boolean equals(Object o) {\n        if (!(o instanceof Triple)) {\n            return false;\n        }\n        Triple&lt;?, ?, ?&gt; p = (Triple&lt;?, ?, ?&gt;) o;\n        return first.equals(p.first) &amp;&amp; second.equals(p.second) &amp;&amp; third.equals(p.third);\n    }\n\n    private static boolean equals(Object x, Object y) {\n        return (x == null &amp;&amp; y == null) || (x != null &amp;&amp; x.equals(y));\n    }\n\n    @Override\n    public int hashCode() {\n        return (first == null ? 0 : first.hashCode()) ^ (second == null ? 0 : second.hashCode()) ^ (third == null ? 0 : third.hashCode());\n    }\n\n    public static &lt;F, S, T&gt; Triple &lt;F, S, T&gt; create(F f, S s, T t) {\n        return new Triple&lt;F, S, T&gt;(f, s, t);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":434020,"reputation":828,"user_id":819710,"display_name":"Moises Portillo"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1541685872,"creation_date":1541685872,"answer_id":53209356,"question_id":6010843,"body_markdown":"Kotlin has implemented a class called Triple:\r\n\r\n\r\n    /**\r\n     * Represents a triad of values\r\n    *\r\n    * There is no meaning attached to values in this class, it can be used for any purpose.\r\n    * Triple exhibits value semantics, i.e. two triples are equal if all three components are equal.\r\n    * An example of decomposing it into values:\r\n    * @sample samples.misc.Tuples.tripleDestructuring\r\n    *\r\n    * @param A type of the first value.\r\n    * @param B type of the second value.\r\n    * @param C type of the third value.\r\n    * @property first First value.\r\n    * @property second Second value.\r\n    * @property third Third value.\r\n    */\r\n\r\n    public data class Triple&lt;out A, out B, out C&gt;(\r\n       public val first: A,\r\n       public val second: B,\r\n       public val third: C\r\n    ) : Serializable {\r\n   \r\n       /**\r\n        * Returns string representation of the [Triple] including its [first],    [second] and [third] values.\r\n        */\r\n       public override fun toString(): String = &quot;($first, $second, $third)&quot;\r\n    }\r\n","title":"Java: how to store data triple in a list?","body":"<p>Kotlin has implemented a class called Triple:</p>\n\n<pre><code>/**\n * Represents a triad of values\n*\n* There is no meaning attached to values in this class, it can be used for any purpose.\n* Triple exhibits value semantics, i.e. two triples are equal if all three components are equal.\n* An example of decomposing it into values:\n* @sample samples.misc.Tuples.tripleDestructuring\n*\n* @param A type of the first value.\n* @param B type of the second value.\n* @param C type of the third value.\n* @property first First value.\n* @property second Second value.\n* @property third Third value.\n*/\n\npublic data class Triple&lt;out A, out B, out C&gt;(\n   public val first: A,\n   public val second: B,\n   public val third: C\n) : Serializable {\n\n   /**\n    * Returns string representation of the [Triple] including its [first],    [second] and [third] values.\n    */\n   public override fun toString(): String = \"($first, $second, $third)\"\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":67096,"reputation":24787,"user_id":196507,"accept_rate":90,"display_name":"lepe"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695787770,"creation_date":1695787770,"answer_id":77184635,"question_id":6010843,"body_markdown":"For those using Groovy, it can be simplified to:\r\n\r\n```groovy\r\n@Canonical\r\nclass Triple&lt;F,M,T&gt; {\r\n    final F first\r\n    final M middle\r\n    final T last\r\n}\r\n\r\n// Usage:\r\ndef triple = new Triple&lt;Integer, Double, String&gt;(100, 2.5, &quot;Hello&quot;)\r\nprintln triple.first        // Out: 100\r\nassert triple == new Triple&lt;Integer, Double, String&gt;(100, 2.50, &quot;Hello&quot;) // true\r\n```\r\n\r\n`@Canonical` annotation takes care of creating the constructor matching your fields and Groovy takes care of the rest.","title":"Java: how to store data triple in a list?","body":"<p>For those using Groovy, it can be simplified to:</p>\n<pre><code>@Canonical\nclass Triple&lt;F,M,T&gt; {\n    final F first\n    final M middle\n    final T last\n}\n\n// Usage:\ndef triple = new Triple&lt;Integer, Double, String&gt;(100, 2.5, &quot;Hello&quot;)\nprintln triple.first        // Out: 100\nassert triple == new Triple&lt;Integer, Double, String&gt;(100, 2.50, &quot;Hello&quot;) // true\n</code></pre>\n<p><code>@Canonical</code> annotation takes care of creating the constructor matching your fields and Groovy takes care of the rest.</p>\n"}],"owner":{"account_id":94058,"reputation":63524,"user_id":257022,"accept_rate":98,"display_name":"aneuryzm"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63569,"favorite_count":0,"down_vote_count":0,"up_vote_count":44,"accepted_answer_id":6010861,"answer_count":7,"score":44,"last_activity_date":1695787770,"creation_date":1305489348,"question_id":6010843,"body_markdown":"What&#39;s the best way in java to store data triple in a list ?\r\n\r\n    [a, b, c]\r\n    [a, b, c]\r\n    ... \r\n\r\nI usually use HashMap for couples of data key + value.. should I go for HashMap + Arraylist ? or ArrayList + ArrayList ?\r\n\r\nthanks \r\n","title":"Java: how to store data triple in a list?","body":"<p>What's the best way in java to store data triple in a list ?</p>\n\n<pre><code>[a, b, c]\n[a, b, c]\n... \n</code></pre>\n\n<p>I usually use HashMap for couples of data key + value.. should I go for HashMap + Arraylist ? or ArrayList + ArrayList ?</p>\n\n<p>thanks </p>\n"},{"tags":["java","android","kotlin","android-studio"],"comments":[{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":0,"creation_date":1695398513,"post_id":77159145,"comment_id":136023833,"body_markdown":"Is the file named `build.gradle` or `build.gradle.kts`?","body":"Is the file named <code>build.gradle</code> or <code>build.gradle.kts</code>?"},{"owner":{"account_id":26840344,"reputation":134,"user_id":20426969,"display_name":"Sarmad Ali"},"score":0,"creation_date":1695405928,"post_id":77159145,"comment_id":136025081,"body_markdown":"**https://developer.android.com/codelabs/camerax-getting-started#**. try to follow official documentation and see if you might have missed any part of it.","body":"<b><a href=\"https://developer.android.com/codelabs/camerax-getting-started#\" rel=\"nofollow noreferrer\">developer.android.com/codelabs/camerax-getting-started#</a></b>. try to follow official documentation and see if you might have missed any part of it."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1695420449,"post_id":77159145,"comment_id":136027130,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."},{"owner":{"account_id":29510688,"reputation":1,"user_id":22615803,"display_name":"Arushi"},"score":0,"creation_date":1695491855,"post_id":77159145,"comment_id":136032837,"body_markdown":"File name is build.gradle.kts","body":"File name is build.gradle.kts"}],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1695693090,"post_id":77166457,"comment_id":136055316,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/77166457/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":29520193,"reputation":932,"user_id":22623172,"display_name":"Vlad Guriev"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695712807,"creation_date":1695547819,"answer_id":77166457,"question_id":77159145,"body_markdown":"Gradle files are written in either Groovy or Kotlin. You&#39;ve mentioned in the comments that the file is named `build.gradle.kts`, i.e. it&#39;s written in Kotlin. Those written in Groovy are named `build.gradle`.\r\n\r\nHowever, `def camerax_version =&quot;1.2.2&quot;` from the question follows Groovy syntax. Replacing it with `val camerax_version = &quot;1.2.2&quot;` should solve the issue.","title":"Facing issue while trying to add cameraX dependency in Android Studio","body":"<p>Gradle files are written in either Groovy or Kotlin. You've mentioned in the comments that the file is named <code>build.gradle.kts</code>, i.e. it's written in Kotlin. Those written in Groovy are named <code>build.gradle</code>.</p>\n<p>However, <code>def camerax_version =&quot;1.2.2&quot;</code> from the question follows Groovy syntax. Replacing it with <code>val camerax_version = &quot;1.2.2&quot;</code> should solve the issue.</p>\n"}],"owner":{"account_id":29510688,"reputation":1,"user_id":22615803,"display_name":"Arushi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695787540,"creation_date":1695398312,"question_id":77159145,"body_markdown":"I am making an Android app. While trying to add cameraX dependency to my app, I am facing &quot;Unexpected tokens (use &#39;;&#39; to separate expressions on the same line)&quot; in the highlighted line. My code:\r\n~~~\r\n    def camerax_version =&quot;1.2.2&quot;\r\n    implementation (&quot;androidx.camera:camera-core:${camerax_version}&quot;)\r\n    implementation (&quot;androidx.camera:camera-camera2:${camerax_version}&quot;)\r\n    implementation (&quot;androidx.camera:camera-lifecycle:${camerax_version}&quot;)\r\n    implementation (&quot;androidx.camera:camera-video:${camerax_version}&quot;)\r\n\r\n    implementation (&quot;androidx.camera:camera-view:${camerax_version}&quot;)\r\n    implementation (&quot;androidx.camera:camera-extensions:${camerax_version}&quot;)\r\n~~~\r\n\r\nI have no idea why I am getting the issue. Any solution or insight would be helpful.","title":"Facing issue while trying to add cameraX dependency in Android Studio","body":"<p>I am making an Android app. While trying to add cameraX dependency to my app, I am facing &quot;Unexpected tokens (use ';' to separate expressions on the same line)&quot; in the highlighted line. My code:</p>\n<pre><code>    def camerax_version =&quot;1.2.2&quot;\n    implementation (&quot;androidx.camera:camera-core:${camerax_version}&quot;)\n    implementation (&quot;androidx.camera:camera-camera2:${camerax_version}&quot;)\n    implementation (&quot;androidx.camera:camera-lifecycle:${camerax_version}&quot;)\n    implementation (&quot;androidx.camera:camera-video:${camerax_version}&quot;)\n\n    implementation (&quot;androidx.camera:camera-view:${camerax_version}&quot;)\n    implementation (&quot;androidx.camera:camera-extensions:${camerax_version}&quot;)\n</code></pre>\n<p>I have no idea why I am getting the issue. Any solution or insight would be helpful.</p>\n"},{"tags":["java","android","location","android-geofence"],"owner":{"account_id":12694317,"reputation":1,"user_id":9223264,"display_name":"Jaspalsinh Gohil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695787364,"creation_date":1695787364,"question_id":77184614,"body_markdown":"I have created a simple geofencing app that works fine when the app is in the foreground, but when the app \\`is in the background, I do not receive any notifications. I have started a foreground service and registered my geofences correctly. I have also granted my app the ACCESS_BACKGROUND_LOCATION permission. Any help would be appreciated.\r\n\r\n**here is MapsActivity.java Code**\r\n\r\n    public class MapsActivity extends FragmentActivity implements OnMapReadyCallback, GoogleMap.OnMapLongClickListener {\r\n    \r\n        private static final String TAG = &quot;MapsActivity&quot;;\r\n    \r\n        private GoogleMap mMap;\r\n        private GeofencingClient geofencingClient;\r\n        private GeofenceHelper geofenceHelper;\r\n    \r\n        private final float GEOFENCE_RADIUS = 30;\r\n        private final String GEOFENCE_ID = &quot;SOME_GEOFENCE_ID&quot;;\r\n    \r\n        private final int FINE_LOCATION_ACCESS_REQUEST_CODE = 10001;\r\n        private final int BACKGROUND_LOCATION_ACCESS_REQUEST_CODE = 10002;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_maps);\r\n            // Obtain the SupportMapFragment and get notified when the map is ready to be used.\r\n            SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager()\r\n                    .findFragmentById(R.id.map);\r\n            mapFragment.getMapAsync(this);\r\n    \r\n            geofencingClient = LocationServices.getGeofencingClient(this);\r\n            geofenceHelper = new GeofenceHelper(this);\r\n        }\r\n    \r\n    \r\n        /**\r\n         * Manipulates the map once available.\r\n         * This callback is triggered when the map is ready to be used.\r\n         * This is where we can add markers or lines, add listeners or move the camera. In this case,\r\n         * we just add a marker near Sydney, Australia.\r\n         * If Google Play services is not installed on the device, the user will be prompted to install\r\n         * it inside the SupportMapFragment. This method will only be triggered once the user has\r\n         * installed Google Play services and returned to the app.\r\n         */\r\n        @Override\r\n        public void onMapReady(GoogleMap googleMap) {\r\n            mMap = googleMap;\r\n    \r\n            // Add a marker in Sydney and move the camera\r\n            LatLng eiffel = new LatLng(48.8589, 2.29365);\r\n            mMap.moveCamera(CameraUpdateFactory.newLatLngZoom(eiffel, 16));\r\n    \r\n            enableUserLocation();\r\n    \r\n            mMap.setOnMapLongClickListener(this);\r\n        }\r\n    \r\n        private void enableUserLocation() {\r\n            if (ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED) {\r\n                mMap.setMyLocationEnabled(true);\r\n            } else {\r\n                //Ask for permission\r\n                if (ActivityCompat.shouldShowRequestPermissionRationale(this, Manifest.permission.ACCESS_FINE_LOCATION)) {\r\n                    //We need to show user a dialog for displaying why the permission is needed and then ask for the permission...\r\n                    ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, FINE_LOCATION_ACCESS_REQUEST_CODE);\r\n                } else {\r\n                    ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, FINE_LOCATION_ACCESS_REQUEST_CODE);\r\n                }\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\r\n            if (requestCode == FINE_LOCATION_ACCESS_REQUEST_CODE) {\r\n                if (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\r\n                    //We have the permission\r\n                    mMap.setMyLocationEnabled(true);\r\n                } else {\r\n                    //We do not have the permission..\r\n    \r\n                }\r\n            }\r\n    \r\n            if (requestCode == BACKGROUND_LOCATION_ACCESS_REQUEST_CODE) {\r\n                if (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\r\n                    //We have the permission\r\n                    Toast.makeText(this, &quot;You can add geofences...&quot;, Toast.LENGTH_SHORT).show();\r\n                } else {\r\n                    //We do not have the permission..\r\n                    Toast.makeText(this, &quot;Background location access is neccessary for geofences to trigger...&quot;, Toast.LENGTH_SHORT).show();\r\n                }\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public void onMapLongClick(LatLng latLng) {\r\n            if (Build.VERSION.SDK_INT &gt;= 29) {\r\n                //We need background permission\r\n                if (ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_BACKGROUND_LOCATION) == PackageManager.PERMISSION_GRANTED) {\r\n                    handleMapLongClick(latLng);\r\n                } else {\r\n                    if (ActivityCompat.shouldShowRequestPermissionRationale(this, Manifest.permission.ACCESS_BACKGROUND_LOCATION)) {\r\n                        //We show a dialog and ask for permission\r\n                        ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.ACCESS_BACKGROUND_LOCATION}, BACKGROUND_LOCATION_ACCESS_REQUEST_CODE);\r\n                    } else {\r\n                        ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.ACCESS_BACKGROUND_LOCATION}, BACKGROUND_LOCATION_ACCESS_REQUEST_CODE);\r\n                    }\r\n                }\r\n    \r\n            } else {\r\n                handleMapLongClick(latLng);\r\n            }\r\n    \r\n        }\r\n    \r\n        private void handleMapLongClick(LatLng latLng) {\r\n            mMap.clear();\r\n            addMarker(latLng);\r\n            addCircle(latLng, GEOFENCE_RADIUS);\r\n            addGeofence(latLng, GEOFENCE_RADIUS);\r\n        }\r\n    \r\n        private void addGeofence(LatLng latLng, float radius) {\r\n    \r\n            Geofence geofence = geofenceHelper.getGeofence(GEOFENCE_ID, latLng, radius, Geofence.GEOFENCE_TRANSITION_ENTER | Geofence.GEOFENCE_TRANSITION_DWELL | Geofence.GEOFENCE_TRANSITION_EXIT);\r\n            GeofencingRequest geofencingRequest = geofenceHelper.getGeofencingRequest(geofence);\r\n            PendingIntent pendingIntent = geofenceHelper.getPendingIntent();\r\n    \r\n            geofencingClient.addGeofences(geofencingRequest, pendingIntent)\r\n                    .addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {\r\n                        @Override\r\n                        public void onSuccess(Void aVoid) {\r\n                            Log.d(TAG, &quot;onSuccess: Geofence Added...&quot;);\r\n                        }\r\n                    })\r\n                    .addOnFailureListener(new OnFailureListener() {\r\n                        @Override\r\n                        public void onFailure(@NonNull Exception e) {\r\n                            String errorMessage = geofenceHelper.getErrorString(e);\r\n                            Log.d(TAG, &quot;onFailure: &quot; + errorMessage);\r\n                        }\r\n                    });\r\n        }\r\n    \r\n        private void addMarker(LatLng latLng) {\r\n            MarkerOptions markerOptions = new MarkerOptions().position(latLng);\r\n            mMap.addMarker(markerOptions);\r\n        }\r\n    \r\n        private void addCircle(LatLng latLng, float radius) {\r\n            CircleOptions circleOptions = new CircleOptions();\r\n            circleOptions.center(latLng);\r\n            circleOptions.radius(radius);\r\n            circleOptions.strokeColor(Color.argb(255, 255, 0, 0));\r\n            circleOptions.fillColor(Color.argb(64, 255, 0, 0));\r\n            circleOptions.strokeWidth(4);\r\n            mMap.addCircle(circleOptions);\r\n        }\r\n    }\r\n\r\n**here is GeofenceBroadcastReceiver.java Code**\r\n\r\n    public class GeofenceBroadcastReceiver extends BroadcastReceiver {\r\n    \r\n        private static final String TAG = &quot;GeofenceBroadcastReceiv&quot;;\r\n    \r\n        @Override\r\n        public void onReceive(Context context, Intent intent) {\r\n            \r\n            NotificationHelper notificationHelper = new NotificationHelper(context);\r\n    \r\n            GeofencingEvent geofencingEvent = GeofencingEvent.fromIntent(intent);\r\n    \r\n            if (geofencingEvent.hasError()) {\r\n                Log.d(TAG, &quot;onReceive: Error receiving geofence event...&quot;);\r\n                return;\r\n            }\r\n    \r\n            List&lt;Geofence&gt; geofenceList = geofencingEvent.getTriggeringGeofences();\r\n            for (Geofence geofence : geofenceList) {\r\n                Log.d(TAG, &quot;onReceive: &quot; + geofence.getRequestId());\r\n            }\r\n    //        Location location = geofencingEvent.getTriggeringLocation();\r\n            int transitionType = geofencingEvent.getGeofenceTransition();\r\n    \r\n            switch (transitionType) {\r\n                case Geofence.GEOFENCE_TRANSITION_ENTER:\r\n                    Toast.makeText(context, &quot;GEOFENCE_TRANSITION_ENTER&quot;, Toast.LENGTH_SHORT).show();\r\n                    notificationHelper.sendHighPriorityNotification(&quot;GEOFENCE_TRANSITION_ENTER&quot;, &quot;&quot;, MapsActivity.class);\r\n                    break;\r\n                case Geofence.GEOFENCE_TRANSITION_DWELL:\r\n                    Toast.makeText(context, &quot;GEOFENCE_TRANSITION_DWELL&quot;, Toast.LENGTH_SHORT).show();\r\n                    notificationHelper.sendHighPriorityNotification(&quot;GEOFENCE_TRANSITION_DWELL&quot;, &quot;&quot;, MapsActivity.class);\r\n                    break;\r\n                case Geofence.GEOFENCE_TRANSITION_EXIT:\r\n                    Toast.makeText(context, &quot;GEOFENCE_TRANSITION_EXIT&quot;, Toast.LENGTH_SHORT).show();\r\n                    notificationHelper.sendHighPriorityNotification(&quot;GEOFENCE_TRANSITION_EXIT&quot;, &quot;&quot;, MapsActivity.class);\r\n                    break;\r\n            }\r\n    \r\n        }\r\n    }\r\n\r\n\r\n**here is GeofenceHelper.java Code**\r\n\r\n    public class GeofenceHelper extends ContextWrapper {\r\n    \r\n        private static final String TAG = &quot;GeofenceHelper&quot;;\r\n        PendingIntent pendingIntent;\r\n    \r\n        public GeofenceHelper(Context base) {\r\n            super(base);\r\n        }\r\n    \r\n        public GeofencingRequest getGeofencingRequest(Geofence geofence) {\r\n            return new GeofencingRequest.Builder()\r\n                    .addGeofence(geofence)\r\n                    .setInitialTrigger(GeofencingRequest.INITIAL_TRIGGER_ENTER)\r\n                    .build();\r\n        }\r\n    \r\n        public Geofence getGeofence(String ID, LatLng latLng, float radius, int transitionTypes) {\r\n            return new Geofence.Builder()\r\n                    .setCircularRegion(latLng.latitude, latLng.longitude, radius)\r\n                    .setRequestId(ID)\r\n                    .setTransitionTypes(transitionTypes)\r\n                    .setLoiteringDelay(5000)\r\n                    .setExpirationDuration(Geofence.NEVER_EXPIRE)\r\n                    .build();\r\n        }\r\n    \r\n        public PendingIntent getPendingIntent() {\r\n            if (pendingIntent != null) {\r\n                return pendingIntent;\r\n            }\r\n            Intent intent = new Intent(this, GeofenceBroadcastReceiver.class);\r\n            pendingIntent = PendingIntent.getBroadcast(this, 2607, intent, PendingIntent.FLAG_UPDATE_CURRENT | PendingIntent.FLAG_MUTABLE);\r\n    \r\n            return pendingIntent;\r\n        }\r\n    \r\n        public String getErrorString(Exception e) {\r\n            if (e instanceof ApiException) {\r\n                ApiException apiException = (ApiException) e;\r\n                switch (apiException.getStatusCode()) {\r\n                    case GeofenceStatusCodes\r\n                            .GEOFENCE_NOT_AVAILABLE:\r\n                        return &quot;GEOFENCE_NOT_AVAILABLE&quot;;\r\n                    case GeofenceStatusCodes\r\n                            .GEOFENCE_TOO_MANY_GEOFENCES:\r\n                        return &quot;GEOFENCE_TOO_MANY_GEOFENCES&quot;;\r\n                    case GeofenceStatusCodes\r\n                            .GEOFENCE_TOO_MANY_PENDING_INTENTS:\r\n                        return &quot;GEOFENCE_TOO_MANY_PENDING_INTENTS&quot;;\r\n                }\r\n            }\r\n            return e.getLocalizedMessage();\r\n        }\r\n    }\r\n\r\n\r\nWhen app is in background or kill I want receive notification that user enter or exit  Geofence area  so how can i do that.","title":"Geofencing notifications not working in the background in Android","body":"<p>I have created a simple geofencing app that works fine when the app is in the foreground, but when the app `is in the background, I do not receive any notifications. I have started a foreground service and registered my geofences correctly. I have also granted my app the ACCESS_BACKGROUND_LOCATION permission. Any help would be appreciated.</p>\n<p><strong>here is MapsActivity.java Code</strong></p>\n<pre><code>public class MapsActivity extends FragmentActivity implements OnMapReadyCallback, GoogleMap.OnMapLongClickListener {\n\n    private static final String TAG = &quot;MapsActivity&quot;;\n\n    private GoogleMap mMap;\n    private GeofencingClient geofencingClient;\n    private GeofenceHelper geofenceHelper;\n\n    private final float GEOFENCE_RADIUS = 30;\n    private final String GEOFENCE_ID = &quot;SOME_GEOFENCE_ID&quot;;\n\n    private final int FINE_LOCATION_ACCESS_REQUEST_CODE = 10001;\n    private final int BACKGROUND_LOCATION_ACCESS_REQUEST_CODE = 10002;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_maps);\n        // Obtain the SupportMapFragment and get notified when the map is ready to be used.\n        SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager()\n                .findFragmentById(R.id.map);\n        mapFragment.getMapAsync(this);\n\n        geofencingClient = LocationServices.getGeofencingClient(this);\n        geofenceHelper = new GeofenceHelper(this);\n    }\n\n\n    /**\n     * Manipulates the map once available.\n     * This callback is triggered when the map is ready to be used.\n     * This is where we can add markers or lines, add listeners or move the camera. In this case,\n     * we just add a marker near Sydney, Australia.\n     * If Google Play services is not installed on the device, the user will be prompted to install\n     * it inside the SupportMapFragment. This method will only be triggered once the user has\n     * installed Google Play services and returned to the app.\n     */\n    @Override\n    public void onMapReady(GoogleMap googleMap) {\n        mMap = googleMap;\n\n        // Add a marker in Sydney and move the camera\n        LatLng eiffel = new LatLng(48.8589, 2.29365);\n        mMap.moveCamera(CameraUpdateFactory.newLatLngZoom(eiffel, 16));\n\n        enableUserLocation();\n\n        mMap.setOnMapLongClickListener(this);\n    }\n\n    private void enableUserLocation() {\n        if (ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED) {\n            mMap.setMyLocationEnabled(true);\n        } else {\n            //Ask for permission\n            if (ActivityCompat.shouldShowRequestPermissionRationale(this, Manifest.permission.ACCESS_FINE_LOCATION)) {\n                //We need to show user a dialog for displaying why the permission is needed and then ask for the permission...\n                ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, FINE_LOCATION_ACCESS_REQUEST_CODE);\n            } else {\n                ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, FINE_LOCATION_ACCESS_REQUEST_CODE);\n            }\n        }\n    }\n\n    @Override\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\n        if (requestCode == FINE_LOCATION_ACCESS_REQUEST_CODE) {\n            if (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n                //We have the permission\n                mMap.setMyLocationEnabled(true);\n            } else {\n                //We do not have the permission..\n\n            }\n        }\n\n        if (requestCode == BACKGROUND_LOCATION_ACCESS_REQUEST_CODE) {\n            if (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n                //We have the permission\n                Toast.makeText(this, &quot;You can add geofences...&quot;, Toast.LENGTH_SHORT).show();\n            } else {\n                //We do not have the permission..\n                Toast.makeText(this, &quot;Background location access is neccessary for geofences to trigger...&quot;, Toast.LENGTH_SHORT).show();\n            }\n        }\n    }\n\n    @Override\n    public void onMapLongClick(LatLng latLng) {\n        if (Build.VERSION.SDK_INT &gt;= 29) {\n            //We need background permission\n            if (ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_BACKGROUND_LOCATION) == PackageManager.PERMISSION_GRANTED) {\n                handleMapLongClick(latLng);\n            } else {\n                if (ActivityCompat.shouldShowRequestPermissionRationale(this, Manifest.permission.ACCESS_BACKGROUND_LOCATION)) {\n                    //We show a dialog and ask for permission\n                    ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.ACCESS_BACKGROUND_LOCATION}, BACKGROUND_LOCATION_ACCESS_REQUEST_CODE);\n                } else {\n                    ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.ACCESS_BACKGROUND_LOCATION}, BACKGROUND_LOCATION_ACCESS_REQUEST_CODE);\n                }\n            }\n\n        } else {\n            handleMapLongClick(latLng);\n        }\n\n    }\n\n    private void handleMapLongClick(LatLng latLng) {\n        mMap.clear();\n        addMarker(latLng);\n        addCircle(latLng, GEOFENCE_RADIUS);\n        addGeofence(latLng, GEOFENCE_RADIUS);\n    }\n\n    private void addGeofence(LatLng latLng, float radius) {\n\n        Geofence geofence = geofenceHelper.getGeofence(GEOFENCE_ID, latLng, radius, Geofence.GEOFENCE_TRANSITION_ENTER | Geofence.GEOFENCE_TRANSITION_DWELL | Geofence.GEOFENCE_TRANSITION_EXIT);\n        GeofencingRequest geofencingRequest = geofenceHelper.getGeofencingRequest(geofence);\n        PendingIntent pendingIntent = geofenceHelper.getPendingIntent();\n\n        geofencingClient.addGeofences(geofencingRequest, pendingIntent)\n                .addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {\n                    @Override\n                    public void onSuccess(Void aVoid) {\n                        Log.d(TAG, &quot;onSuccess: Geofence Added...&quot;);\n                    }\n                })\n                .addOnFailureListener(new OnFailureListener() {\n                    @Override\n                    public void onFailure(@NonNull Exception e) {\n                        String errorMessage = geofenceHelper.getErrorString(e);\n                        Log.d(TAG, &quot;onFailure: &quot; + errorMessage);\n                    }\n                });\n    }\n\n    private void addMarker(LatLng latLng) {\n        MarkerOptions markerOptions = new MarkerOptions().position(latLng);\n        mMap.addMarker(markerOptions);\n    }\n\n    private void addCircle(LatLng latLng, float radius) {\n        CircleOptions circleOptions = new CircleOptions();\n        circleOptions.center(latLng);\n        circleOptions.radius(radius);\n        circleOptions.strokeColor(Color.argb(255, 255, 0, 0));\n        circleOptions.fillColor(Color.argb(64, 255, 0, 0));\n        circleOptions.strokeWidth(4);\n        mMap.addCircle(circleOptions);\n    }\n}\n</code></pre>\n<p><strong>here is GeofenceBroadcastReceiver.java Code</strong></p>\n<pre><code>public class GeofenceBroadcastReceiver extends BroadcastReceiver {\n\n    private static final String TAG = &quot;GeofenceBroadcastReceiv&quot;;\n\n    @Override\n    public void onReceive(Context context, Intent intent) {\n        \n        NotificationHelper notificationHelper = new NotificationHelper(context);\n\n        GeofencingEvent geofencingEvent = GeofencingEvent.fromIntent(intent);\n\n        if (geofencingEvent.hasError()) {\n            Log.d(TAG, &quot;onReceive: Error receiving geofence event...&quot;);\n            return;\n        }\n\n        List&lt;Geofence&gt; geofenceList = geofencingEvent.getTriggeringGeofences();\n        for (Geofence geofence : geofenceList) {\n            Log.d(TAG, &quot;onReceive: &quot; + geofence.getRequestId());\n        }\n//        Location location = geofencingEvent.getTriggeringLocation();\n        int transitionType = geofencingEvent.getGeofenceTransition();\n\n        switch (transitionType) {\n            case Geofence.GEOFENCE_TRANSITION_ENTER:\n                Toast.makeText(context, &quot;GEOFENCE_TRANSITION_ENTER&quot;, Toast.LENGTH_SHORT).show();\n                notificationHelper.sendHighPriorityNotification(&quot;GEOFENCE_TRANSITION_ENTER&quot;, &quot;&quot;, MapsActivity.class);\n                break;\n            case Geofence.GEOFENCE_TRANSITION_DWELL:\n                Toast.makeText(context, &quot;GEOFENCE_TRANSITION_DWELL&quot;, Toast.LENGTH_SHORT).show();\n                notificationHelper.sendHighPriorityNotification(&quot;GEOFENCE_TRANSITION_DWELL&quot;, &quot;&quot;, MapsActivity.class);\n                break;\n            case Geofence.GEOFENCE_TRANSITION_EXIT:\n                Toast.makeText(context, &quot;GEOFENCE_TRANSITION_EXIT&quot;, Toast.LENGTH_SHORT).show();\n                notificationHelper.sendHighPriorityNotification(&quot;GEOFENCE_TRANSITION_EXIT&quot;, &quot;&quot;, MapsActivity.class);\n                break;\n        }\n\n    }\n}\n</code></pre>\n<p><strong>here is GeofenceHelper.java Code</strong></p>\n<pre><code>public class GeofenceHelper extends ContextWrapper {\n\n    private static final String TAG = &quot;GeofenceHelper&quot;;\n    PendingIntent pendingIntent;\n\n    public GeofenceHelper(Context base) {\n        super(base);\n    }\n\n    public GeofencingRequest getGeofencingRequest(Geofence geofence) {\n        return new GeofencingRequest.Builder()\n                .addGeofence(geofence)\n                .setInitialTrigger(GeofencingRequest.INITIAL_TRIGGER_ENTER)\n                .build();\n    }\n\n    public Geofence getGeofence(String ID, LatLng latLng, float radius, int transitionTypes) {\n        return new Geofence.Builder()\n                .setCircularRegion(latLng.latitude, latLng.longitude, radius)\n                .setRequestId(ID)\n                .setTransitionTypes(transitionTypes)\n                .setLoiteringDelay(5000)\n                .setExpirationDuration(Geofence.NEVER_EXPIRE)\n                .build();\n    }\n\n    public PendingIntent getPendingIntent() {\n        if (pendingIntent != null) {\n            return pendingIntent;\n        }\n        Intent intent = new Intent(this, GeofenceBroadcastReceiver.class);\n        pendingIntent = PendingIntent.getBroadcast(this, 2607, intent, PendingIntent.FLAG_UPDATE_CURRENT | PendingIntent.FLAG_MUTABLE);\n\n        return pendingIntent;\n    }\n\n    public String getErrorString(Exception e) {\n        if (e instanceof ApiException) {\n            ApiException apiException = (ApiException) e;\n            switch (apiException.getStatusCode()) {\n                case GeofenceStatusCodes\n                        .GEOFENCE_NOT_AVAILABLE:\n                    return &quot;GEOFENCE_NOT_AVAILABLE&quot;;\n                case GeofenceStatusCodes\n                        .GEOFENCE_TOO_MANY_GEOFENCES:\n                    return &quot;GEOFENCE_TOO_MANY_GEOFENCES&quot;;\n                case GeofenceStatusCodes\n                        .GEOFENCE_TOO_MANY_PENDING_INTENTS:\n                    return &quot;GEOFENCE_TOO_MANY_PENDING_INTENTS&quot;;\n            }\n        }\n        return e.getLocalizedMessage();\n    }\n}\n</code></pre>\n<p>When app is in background or kill I want receive notification that user enter or exit  Geofence area  so how can i do that.</p>\n"},{"tags":["java","spring","spring-boot","quartz-scheduler"],"answers":[{"comments":[{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":0,"creation_date":1671981281,"post_id":74810984,"comment_id":132203725,"body_markdown":"I&#39;ve seen your answer but it didn&#39;t help me unfortunately","body":"I&#39;ve seen your answer but it didn&#39;t help me unfortunately"},{"owner":{"account_id":1743298,"reputation":347,"user_id":1594088,"display_name":"&#214;zg&#252;n"},"score":0,"creation_date":1672074140,"post_id":74810984,"comment_id":132217067,"body_markdown":"I dont see in your provided config file the &quot;spring.datasource.username&quot; and all defined. can you please provide your last updated config and code so we can dig what is wrong ?","body":"I dont see in your provided config file the &quot;spring.datasource.username&quot; and all defined. can you please provide your last updated config and code so we can dig what is wrong ?"}],"tags":[],"owner":{"account_id":1743298,"reputation":347,"user_id":1594088,"display_name":"&#214;zg&#252;n"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1671104569,"creation_date":1671104569,"answer_id":74810984,"question_id":74803719,"body_markdown":"Try tagging your bean as `@Primary`.\r\n\r\nIf it doesnt work I or if you have multiple datasource beans, I provide below a solution for that specific case that worked for me.\r\n\r\nhttps://stackoverflow.com/questions/56167468/how-to-set-datasource-in-quartz-schedular-error-org-quartz-schedulerexception/74378516#74378516\r\n\r\nBasicaly instead of providing a spring datasource property, you define your datasource as a quartz specific datasource\r\n\r\n```\r\nspring:\r\n  datasource:\r\n    byq:\r\n      url: jdbc:oracle:thin:@//app-db/schema-name\r\n      driverClassName: oracle.jdbc.OracleDriver\r\n      username: ZZZ\r\n      password: XXX\r\n  quartz:\r\n    job-store-type: jdbc\r\n    wait-for-jobs-to-complete-on-shutdown: true\r\n    jdbc:\r\n      initialize-schema: never\r\n    properties:\r\n      org:\r\n        quartz:\r\n          dataSource:\r\n            quartzDataSource:\r\n              URL: jdbc:postgresql://scheduler-db/scheduler\r\n              driver: org.postgresql.Driver\r\n              user: ZZZ\r\n              password: XXX\r\n          jobStore:\r\n            dataSource: quartzDataSource\r\n            class: org.quartz.impl.jdbcjobstore.JobStoreTX\r\n            driverDelegateClass: org.quartz.impl.jdbcjobstore.PostgreSQLDelegate\r\n            tablePrefix: TB_QRTZ_\r\n```\r\n\r\nHope it helps","title":"org.quartz.SchedulerConfigException: DataSource name not set","body":"<p>Try tagging your bean as <code>@Primary</code>.</p>\n<p>If it doesnt work I or if you have multiple datasource beans, I provide below a solution for that specific case that worked for me.</p>\n<p><a href=\"https://stackoverflow.com/questions/56167468/how-to-set-datasource-in-quartz-schedular-error-org-quartz-schedulerexception/74378516#74378516\">How to set dataSource in quartz schedular. [ERROR] org.quartz.SchedulerException: Could not initialize DataSource: myDS</a></p>\n<p>Basicaly instead of providing a spring datasource property, you define your datasource as a quartz specific datasource</p>\n<pre><code>spring:\n  datasource:\n    byq:\n      url: jdbc:oracle:thin:@//app-db/schema-name\n      driverClassName: oracle.jdbc.OracleDriver\n      username: ZZZ\n      password: XXX\n  quartz:\n    job-store-type: jdbc\n    wait-for-jobs-to-complete-on-shutdown: true\n    jdbc:\n      initialize-schema: never\n    properties:\n      org:\n        quartz:\n          dataSource:\n            quartzDataSource:\n              URL: jdbc:postgresql://scheduler-db/scheduler\n              driver: org.postgresql.Driver\n              user: ZZZ\n              password: XXX\n          jobStore:\n            dataSource: quartzDataSource\n            class: org.quartz.impl.jdbcjobstore.JobStoreTX\n            driverDelegateClass: org.quartz.impl.jdbcjobstore.PostgreSQLDelegate\n            tablePrefix: TB_QRTZ_\n</code></pre>\n<p>Hope it helps</p>\n"},{"tags":[],"owner":{"account_id":29543709,"reputation":1,"user_id":22641804,"display_name":"Chamil Nimesh Perera"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695785770,"creation_date":1695785770,"answer_id":77184554,"question_id":74803719,"body_markdown":"You have configured as \r\n`org.quartz.jobStore.class: org.quartz.impl.jdbcjobstore.JobStoreTX`\r\n\r\nChange it to\r\n\r\n    org.quartz.jobStore.class: org.springframework.scheduling.quartz.LocalDataSourceJobStore\r\n\r\n","title":"org.quartz.SchedulerConfigException: DataSource name not set","body":"<p>You have configured as\n<code>org.quartz.jobStore.class: org.quartz.impl.jdbcjobstore.JobStoreTX</code></p>\n<p>Change it to</p>\n<pre><code>org.quartz.jobStore.class: org.springframework.scheduling.quartz.LocalDataSourceJobStore\n</code></pre>\n"}],"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5350,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695785770,"creation_date":1671048805,"question_id":74803719,"body_markdown":"After upgrading spring-boot(from `2.3.12.RELEASE` to `2.7.6`) and spring cloud(from `3.0.3` to `3.1.5`) I started to receive follwing error\r\n\r\n    Caused by: org.quartz.SchedulerConfigException: DataSource name not set.\r\n    \tat org.quartz.impl.jdbcjobstore.JobStoreSupport.initialize(JobStoreSupport.java:643)\r\n    \tat org.quartz.impl.jdbcjobstore.JobStoreTX.initialize(JobStoreTX.java:57)\r\n    \tat org.quartz.impl.StdSchedulerFactory.instantiate(StdSchedulerFactory.java:1368)\r\n    \tat org.quartz.impl.StdSchedulerFactory.getScheduler(StdSchedulerFactory.java:1579)\r\n    \tat org.springframework.scheduling.quartz.SchedulerFactoryBean.createScheduler(SchedulerFactoryBean.java:679)\r\n    \tat org.springframework.scheduling.quartz.SchedulerFactoryBean.prepareScheduler(SchedulerFactoryBean.java:616)\r\n    \tat org.springframework.scheduling.quartz.SchedulerFactoryBean.afterPropertiesSet(SchedulerFactoryBean.java:504)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800)\r\n\r\nBased on this advice https://github.com/spring-projects/spring-framework/issues/27709#issuecomment-988526589\r\n\r\nI&#39;ve added \r\n\r\n    org.quartz.jobStore.class: org.quartz.impl.jdbcjobstore.JobStoreTX\r\n\r\nto my `application.yml`\r\n\r\nbut I still experienxe this error during tests execution.\r\n\r\nmy dependencies:\r\n    \r\n    &lt;/properties&gt;\r\n       &lt;spring-boot.version&gt;2.7.6&lt;/spring-boot.version&gt;\r\n       ...\r\n    &lt;/properties&gt;\r\n    &lt;dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring-boot.version}&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n                &lt;scope&gt;import&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n     ...\r\n    &lt;dependencyManagement&gt;\r\n    &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-boot-starter-oauth2-client&lt;/artifactId&gt;\r\n          &lt;exclusions&gt;\r\n            &lt;exclusion&gt;\r\n              &lt;groupId&gt;com.nimbusds&lt;/groupId&gt;\r\n              &lt;artifactId&gt;oauth2-oidc-sdk&lt;/artifactId&gt;\r\n            &lt;/exclusion&gt;\r\n          &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;!--         tracing --&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;io.opentracing.contrib&lt;/groupId&gt;\r\n          &lt;artifactId&gt;opentracing-spring-jaeger-web-starter&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;!-- for quartz logic --&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-boot-starter-quartz&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;!-- actuator &amp; metric--&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\r\n          &lt;artifactId&gt;micrometer-registry-prometheus&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n     &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-cloud-starter-bootstrap&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-cloud-starter-bus-kafka&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-cloud-context&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;!-- test --&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-test&lt;/artifactId&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        ...\r\nHow can I fix ? \r\n\r\n\r\nUpdate\r\n\r\n\r\nI also tried to add to my application yaml:\r\n\r\n    spring:\r\n      quartz:\r\n        properties:\r\n          org:\r\n            quartz:\r\n              jobStore:\r\n                class: org.springframework.scheduling.quartz.LocalDataSourceJobStore\r\n                driverDelegateClass: org.quartz.impl.jdbcjobstore.PostgreSQLDelegate\r\n                tablePrefix: TB_PR_QRTZ_\r\n\r\nand marked this beasn with `@QuartzDataSource`\r\n\r\n    @Bean\r\n    @QuartzDataSource\r\n    public DataSource testDataSource() {\r\n        DriverManagerDataSource dataSource = new DriverManagerDataSource();\r\n        dataSource.setDriverClassName(env.getProperty(&quot;spring.datasource.driverClassName&quot;));\r\n        dataSource.setUrl(TestContainersRunner.JDBC_URL);\r\n        dataSource.setUsername(env.getProperty(&quot;spring.datasource.username&quot;));\r\n        dataSource.setPassword(env.getProperty(&quot;spring.datasource.password&quot;));\r\n        return dataSource;\r\n    }\r\n\r\nBut still no luck\r\n","title":"org.quartz.SchedulerConfigException: DataSource name not set","body":"<p>After upgrading spring-boot(from <code>2.3.12.RELEASE</code> to <code>2.7.6</code>) and spring cloud(from <code>3.0.3</code> to <code>3.1.5</code>) I started to receive follwing error</p>\n<pre><code>Caused by: org.quartz.SchedulerConfigException: DataSource name not set.\n    at org.quartz.impl.jdbcjobstore.JobStoreSupport.initialize(JobStoreSupport.java:643)\n    at org.quartz.impl.jdbcjobstore.JobStoreTX.initialize(JobStoreTX.java:57)\n    at org.quartz.impl.StdSchedulerFactory.instantiate(StdSchedulerFactory.java:1368)\n    at org.quartz.impl.StdSchedulerFactory.getScheduler(StdSchedulerFactory.java:1579)\n    at org.springframework.scheduling.quartz.SchedulerFactoryBean.createScheduler(SchedulerFactoryBean.java:679)\n    at org.springframework.scheduling.quartz.SchedulerFactoryBean.prepareScheduler(SchedulerFactoryBean.java:616)\n    at org.springframework.scheduling.quartz.SchedulerFactoryBean.afterPropertiesSet(SchedulerFactoryBean.java:504)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800)\n</code></pre>\n<p>Based on this advice <a href=\"https://github.com/spring-projects/spring-framework/issues/27709#issuecomment-988526589\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-framework/issues/27709#issuecomment-988526589</a></p>\n<p>I've added</p>\n<pre><code>org.quartz.jobStore.class: org.quartz.impl.jdbcjobstore.JobStoreTX\n</code></pre>\n<p>to my <code>application.yml</code></p>\n<p>but I still experienxe this error during tests execution.</p>\n<p>my dependencies:</p>\n<pre><code>&lt;/properties&gt;\n   &lt;spring-boot.version&gt;2.7.6&lt;/spring-boot.version&gt;\n   ...\n&lt;/properties&gt;\n&lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;\n            &lt;version&gt;${spring-boot.version}&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n            &lt;scope&gt;import&lt;/scope&gt;\n        &lt;/dependency&gt;\n ...\n&lt;dependencyManagement&gt;\n&lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-oauth2-client&lt;/artifactId&gt;\n      &lt;exclusions&gt;\n        &lt;exclusion&gt;\n          &lt;groupId&gt;com.nimbusds&lt;/groupId&gt;\n          &lt;artifactId&gt;oauth2-oidc-sdk&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n      &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;!--         tracing --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.opentracing.contrib&lt;/groupId&gt;\n      &lt;artifactId&gt;opentracing-spring-jaeger-web-starter&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- for quartz logic --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-quartz&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- actuator &amp; metric--&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n      &lt;artifactId&gt;micrometer-registry-prometheus&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-cloud-starter-bootstrap&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-cloud-starter-bus-kafka&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-cloud-context&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- test --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-test&lt;/artifactId&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    ...\n</code></pre>\n<p>How can I fix ?</p>\n<p>Update</p>\n<p>I also tried to add to my application yaml:</p>\n<pre><code>spring:\n  quartz:\n    properties:\n      org:\n        quartz:\n          jobStore:\n            class: org.springframework.scheduling.quartz.LocalDataSourceJobStore\n            driverDelegateClass: org.quartz.impl.jdbcjobstore.PostgreSQLDelegate\n            tablePrefix: TB_PR_QRTZ_\n</code></pre>\n<p>and marked this beasn with <code>@QuartzDataSource</code></p>\n<pre><code>@Bean\n@QuartzDataSource\npublic DataSource testDataSource() {\n    DriverManagerDataSource dataSource = new DriverManagerDataSource();\n    dataSource.setDriverClassName(env.getProperty(&quot;spring.datasource.driverClassName&quot;));\n    dataSource.setUrl(TestContainersRunner.JDBC_URL);\n    dataSource.setUsername(env.getProperty(&quot;spring.datasource.username&quot;));\n    dataSource.setPassword(env.getProperty(&quot;spring.datasource.password&quot;));\n    return dataSource;\n}\n</code></pre>\n<p>But still no luck</p>\n"},{"tags":["java","spring-boot"],"owner":{"account_id":28902927,"reputation":1,"user_id":22137466,"display_name":"ham_ben"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695784934,"creation_date":1695768809,"question_id":77183841,"body_markdown":"I am trying to experiment Toxiproxy in a SpringBoot test (for a poc) to inject a latency and have this simple test class but the latency toxic I&#39;m setting does not seem to have any effect at all and I&#39;m not sure if I&#39;m missing something?\r\n\r\nI&#39;m basically trying to ping google.com and expecting a latency to delay the response (display of the line: \r\n\r\n```\r\nSystem.out.println(reachable); \r\n```\r\n\r\nbut it is immediately logging it.\r\n\r\nAny hints would be appreciated. \r\n\r\n```\r\n@Testcontainers\r\npublic class ToxiproxyTest {\r\n\r\n  @LocalServerPort\r\n  private int port;\r\n\r\n  // Toxiproxy container, which will be used as a TCP proxy\r\n  @Container\r\n  public static ToxiproxyContainer toxiproxy = new ToxiproxyContainer(&quot;ghcr.io/shopify/toxiproxy:2.5.0&quot;)\r\n      .withNetwork(Network.newNetwork());\r\n\r\n  private Proxy proxy;\r\n\r\n\r\n  @SneakyThrows\r\n  @BeforeEach\r\n  public void setUp() {\r\n    ToxiproxyClient toxiproxyClient = new ToxiproxyClient(toxiproxy.getHost(), toxiproxy.getControlPort());\r\n    proxy = toxiproxyClient.createProxy(&quot;proxy&quot;, toxiproxy.getHost() + &quot;:&quot; + port, &quot;www.google.com:80&quot;);\r\n  }\r\n\r\n  @SneakyThrows\r\n  @Test\r\n  public void testLatency() {\r\n    proxy.toxics().latency(&quot;latency&quot;, ToxicDirection.DOWNSTREAM, 200000L);\r\n\r\n    Process p1 = java.lang.Runtime.getRuntime().exec(&quot;ping -c 1 www.google.com&quot;);\r\n    int returnVal = p1.waitFor();\r\n    boolean reachable = (returnVal==0);\r\n    System.out.println(reachable);\r\n  }\r\n```\r\n","title":"Toxiproxy in Spring Boot test","body":"<p>I am trying to experiment Toxiproxy in a SpringBoot test (for a poc) to inject a latency and have this simple test class but the latency toxic I'm setting does not seem to have any effect at all and I'm not sure if I'm missing something?</p>\n<p>I'm basically trying to ping google.com and expecting a latency to delay the response (display of the line:</p>\n<pre><code>System.out.println(reachable); \n</code></pre>\n<p>but it is immediately logging it.</p>\n<p>Any hints would be appreciated.</p>\n<pre><code>@Testcontainers\npublic class ToxiproxyTest {\n\n  @LocalServerPort\n  private int port;\n\n  // Toxiproxy container, which will be used as a TCP proxy\n  @Container\n  public static ToxiproxyContainer toxiproxy = new ToxiproxyContainer(&quot;ghcr.io/shopify/toxiproxy:2.5.0&quot;)\n      .withNetwork(Network.newNetwork());\n\n  private Proxy proxy;\n\n\n  @SneakyThrows\n  @BeforeEach\n  public void setUp() {\n    ToxiproxyClient toxiproxyClient = new ToxiproxyClient(toxiproxy.getHost(), toxiproxy.getControlPort());\n    proxy = toxiproxyClient.createProxy(&quot;proxy&quot;, toxiproxy.getHost() + &quot;:&quot; + port, &quot;www.google.com:80&quot;);\n  }\n\n  @SneakyThrows\n  @Test\n  public void testLatency() {\n    proxy.toxics().latency(&quot;latency&quot;, ToxicDirection.DOWNSTREAM, 200000L);\n\n    Process p1 = java.lang.Runtime.getRuntime().exec(&quot;ping -c 1 www.google.com&quot;);\n    int returnVal = p1.waitFor();\n    boolean reachable = (returnVal==0);\n    System.out.println(reachable);\n  }\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9974,"page":160,"page_size":100}
