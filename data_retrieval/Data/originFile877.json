{"items":[{"tags":["java","android","gradle","groovy","capacitor"],"comments":[{"owner":{"account_id":19888876,"reputation":19,"user_id":14571368,"display_name":"Jonathan Mourier"},"score":0,"creation_date":1674575893,"post_id":74477435,"comment_id":132740967,"body_markdown":"The problem was solved by updating Gradle to version 5.1 and Android Gradle to version 7.4.0","body":"The problem was solved by updating Gradle to version 5.1 and Android Gradle to version 7.4.0"}],"owner":{"account_id":19888876,"reputation":19,"user_id":14571368,"display_name":"Jonathan Mourier"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":194,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":0,"score":1,"last_activity_date":1668707332,"creation_date":1668696547,"question_id":74477435,"body_markdown":"I have a problem with capacitor 4 \\[android\\] when I try to build my app.\r\nFor many securities raisons in the company I&#39;m working for, all repositories are behind a nexus firewall and the firewall blocks intellij-core dependency because it finds these vulnerabilities :\r\n\r\n![Nexus firewall screenshot](https://i.stack.imgur.com/OQNAf.png)\r\n\r\nThis dependency is used by these tasks on my project :\r\n\r\n- capacitor-filesystem:extractReleaseAnnotations\r\n- capacitor-splash-screen:extractReleaseAnnotations\r\n- capacitor-cordova-android-plugins:extractReleaseAnnotations\r\n- capacitor-camera:extractReleaseAnnotations\r\n- capacitor-android:extractReleaseAnnotations\r\n\r\nAnd here an example of my console log :\r\n\r\n```\r\n5: Task failed with an exception.\r\n-----------\r\n* What went wrong:\r\nExecution failed for task &#39;:capacitor-android:extractReleaseAnnotations&#39;.\r\n&gt; Could not resolve all files for configuration &#39;:capacitor-android:detachedConfiguration2&#39;.\r\n   &gt; Could not download intellij-core-30.2.1.jar (com.android.tools.external.com-intellij:intellij-core:30.2.1)\r\n      &gt; Could not get resource &#39;https://si-devops-mirror.****.fr/repository/dl.google.com/com/android/tools/external/com-intellij/intellij-core/30.2.1/intellij-core-30.2.1.jar&#39;.\r\n         &gt; Could not HEAD &#39;https://si-devops-mirror.****.fr/repository/dl.google.com/com/android/tools/external/com-intellij/intellij-core/30.2.1/intellij-core-30.2.1.jar&#39;.\r\n            &gt; 403 forbidden\r\n```\r\n\r\nThis error comes when I try to build the app  on Android Studio or when I launch the capacitor:run command  \r\n*ionic capacitor run --c=release* in my ionic project.\r\n\r\nI did a Gradle build scan to get the dependencies graph of my application : \r\n\r\n![Dependencies graph Gradle](https://i.stack.imgur.com/TKUeO.png)\r\n\r\nLatest version of Intellij-core (31.0.0-alpha8) isn&#39;t blocked by our firewall, but I don&#39;t know how to tell Gradle to use the latest version of this subdependency. I tried to exclude the Intellij-core dependency with this (in build.gradle app) but it does not work : \r\n\r\n```\r\n    implementation (project(&#39;:capacitor-android&#39;)) {\r\n        exclude group: &#39;com.android.tools.external.com-intellij&#39;, module: &#39;intellij-core&#39;\r\n    }\r\n```\r\n\r\nDo you have any idea how to bypass this dependency or how to tell Gradle to use the latest version of this dependancy ?","title":"Dependency Intellij-core pull by capacitor-android:detachedConfiguration2 block by our firewall","body":"<p>I have a problem with capacitor 4 [android] when I try to build my app.\nFor many securities raisons in the company I'm working for, all repositories are behind a nexus firewall and the firewall blocks intellij-core dependency because it finds these vulnerabilities :</p>\n<p><img src=\"https://i.stack.imgur.com/OQNAf.png\" alt=\"Nexus firewall screenshot\" /></p>\n<p>This dependency is used by these tasks on my project :</p>\n<ul>\n<li>capacitor-filesystem:extractReleaseAnnotations</li>\n<li>capacitor-splash-screen:extractReleaseAnnotations</li>\n<li>capacitor-cordova-android-plugins:extractReleaseAnnotations</li>\n<li>capacitor-camera:extractReleaseAnnotations</li>\n<li>capacitor-android:extractReleaseAnnotations</li>\n</ul>\n<p>And here an example of my console log :</p>\n<pre><code>5: Task failed with an exception.\n-----------\n* What went wrong:\nExecution failed for task ':capacitor-android:extractReleaseAnnotations'.\n&gt; Could not resolve all files for configuration ':capacitor-android:detachedConfiguration2'.\n   &gt; Could not download intellij-core-30.2.1.jar (com.android.tools.external.com-intellij:intellij-core:30.2.1)\n      &gt; Could not get resource 'https://si-devops-mirror.****.fr/repository/dl.google.com/com/android/tools/external/com-intellij/intellij-core/30.2.1/intellij-core-30.2.1.jar'.\n         &gt; Could not HEAD 'https://si-devops-mirror.****.fr/repository/dl.google.com/com/android/tools/external/com-intellij/intellij-core/30.2.1/intellij-core-30.2.1.jar'.\n            &gt; 403 forbidden\n</code></pre>\n<p>This error comes when I try to build the app  on Android Studio or when I launch the capacitor:run command<br />\n<em>ionic capacitor run --c=release</em> in my ionic project.</p>\n<p>I did a Gradle build scan to get the dependencies graph of my application :</p>\n<p><img src=\"https://i.stack.imgur.com/TKUeO.png\" alt=\"Dependencies graph Gradle\" /></p>\n<p>Latest version of Intellij-core (31.0.0-alpha8) isn't blocked by our firewall, but I don't know how to tell Gradle to use the latest version of this subdependency. I tried to exclude the Intellij-core dependency with this (in build.gradle app) but it does not work :</p>\n<pre><code>    implementation (project(':capacitor-android')) {\n        exclude group: 'com.android.tools.external.com-intellij', module: 'intellij-core'\n    }\n</code></pre>\n<p>Do you have any idea how to bypass this dependency or how to tell Gradle to use the latest version of this dependancy ?</p>\n"},{"tags":["java","arraylist","hashmap","maps"],"answers":[{"comments":[{"owner":{"account_id":26624495,"reputation":25,"user_id":20242740,"display_name":"Escanor"},"score":0,"creation_date":1668612945,"post_id":74447748,"comment_id":131448847,"body_markdown":"This helped me a lot with progress. However, this gives me the number of keyset once. What i want is have the keyset depending on the amount of value. So when the value is 2, i want that key twice. After researching a little, i found streams to be fitting in this case no? But i couldn&#39;t make it work with the way i want it.\n\n`\n        idsAndCount.entrySet().stream()\n                .filter(entry -&gt; entry.getValue() &lt; 0L)\n                .map(idsAndCount::get)\n                .collect(Collectors.toList());\n`\n\ncan i somehow make it so that the value decreases by 1 every time it filters?","body":"This helped me a lot with progress. However, this gives me the number of keyset once. What i want is have the keyset depending on the amount of value. So when the value is 2, i want that key twice. After researching a little, i found streams to be fitting in this case no? But i couldn&#39;t make it work with the way i want it.  `         idsAndCount.entrySet().stream()                 .filter(entry -&gt; entry.getValue() &lt; 0L)                 .map(idsAndCount::get)                 .collect(Collectors.toList()); `  can i somehow make it so that the value decreases by 1 every time it filters?"},{"owner":{"account_id":11095946,"reputation":315,"user_id":8146089,"display_name":"Dennis LLopis"},"score":0,"creation_date":1668694507,"post_id":74447748,"comment_id":131472276,"body_markdown":"Just wanted to clarify, if you had  [{66L, 1}, {17L, 2}] then you want something like [&quot;kaese&quot;, &quot;fleisch&quot;, &quot;fleisch&quot;] ? If not, then you need to edit your post with an example and the desired output that you are trying to achieve.","body":"Just wanted to clarify, if you had  [{66L, 1}, {17L, 2}] then you want something like [&quot;kaese&quot;, &quot;fleisch&quot;, &quot;fleisch&quot;] ? If not, then you need to edit your post with an example and the desired output that you are trying to achieve."},{"owner":{"account_id":26624495,"reputation":25,"user_id":20242740,"display_name":"Escanor"},"score":0,"creation_date":1668697987,"post_id":74447748,"comment_id":131473778,"body_markdown":"Yeah I want kaese fleisch fleisch as output. But with the implementation above, it only takes fleisch once instead of twice. I am basically trying to find a way to get the Key multiple times depending on the value of the map. Basically 66, 17, 17. And then i can use the second part you helped me with.","body":"Yeah I want kaese fleisch fleisch as output. But with the implementation above, it only takes fleisch once instead of twice. I am basically trying to find a way to get the Key multiple times depending on the value of the map. Basically 66, 17, 17. And then i can use the second part you helped me with."},{"owner":{"account_id":26624495,"reputation":25,"user_id":20242740,"display_name":"Escanor"},"score":0,"creation_date":1668699166,"post_id":74447748,"comment_id":131474303,"body_markdown":"I am currently thinking of adding a condition to the loop that fills listofID. Maybe i can tell something like if value is bigger than 0, get keyset. Wouldn&#39;t it loop 66, 17, 17 then? something like this \n\n`for (Long entry : idsAndCount.keySet()) {\nif (idsAndCount.values() &gt; 0) {\nlistOfId.add(entry);\nidsAndCount.values() --;\n}}`","body":"I am currently thinking of adding a condition to the loop that fills listofID. Maybe i can tell something like if value is bigger than 0, get keyset. Wouldn&#39;t it loop 66, 17, 17 then? something like this   <code>for (Long entry : idsAndCount.keySet()) { if (idsAndCount.values() &gt; 0) { listOfId.add(entry); idsAndCount.values() --; }}</code>"},{"owner":{"account_id":11095946,"reputation":315,"user_id":8146089,"display_name":"Dennis LLopis"},"score":0,"creation_date":1668707236,"post_id":74447748,"comment_id":131477384,"body_markdown":"Edited the code above. Is that what you&#39;re looking for?","body":"Edited the code above. Is that what you&#39;re looking for?"}],"tags":[],"owner":{"account_id":11095946,"reputation":315,"user_id":8146089,"display_name":"Dennis LLopis"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1668707213,"creation_date":1668524319,"answer_id":74447748,"question_id":74446747,"body_markdown":"```\r\npublic static void main(String[] args) {\r\n\t\t/* We will be able to modify the values in this map */\r\n\t\tMap&lt;Long, Integer&gt; counts = new HashMap&lt;&gt;();\r\n\t\tcounts.put(66L, 1);\r\n\t\tcounts.put(17L, 2);\r\n\t\t\r\n\t\t/* You cannot modify keys/value of map if it is implemented with Map.of() */\r\n\t\tMap&lt;Long, String&gt; testMenu = Map.of(\r\n\t\t        42L, &quot;gurken&quot;,\r\n\t\t        66L, &quot;kaese&quot;,\r\n\t\t        17L, &quot;fleisch&quot;);\r\n\t\t\r\n\t\tSystem.out.println(&quot;Count Map: &quot; + counts);\r\n\t\tSystem.out.println(&quot;Ingredient Map: &quot; + testMenu + &quot;\\n&quot;);\r\n\t\t\r\n\t\tList&lt;String&gt; ingredients = new ArrayList&lt;&gt;();\r\n\t\t\r\n\t\t/* Access both key/value with entrySet() */\r\n\t\tfor(Map.Entry&lt;Long, Integer&gt; entry : counts.entrySet()) {\r\n\t\t\tlong key = entry.getKey();\r\n\t\t\tint val = entry.getValue();\r\n\t\t\tfor(int i = 0; i &lt; val; i++) {\r\n\t\t\t\tingredients.add(testMenu.get(key));\r\n\t\t\t}\r\n\t\t\tcounts.put(key, counts.get(key) - val);\r\n\t\t}\r\n\t\t\r\n\t\tSystem.out.println(&quot;List of ingredients: &quot; + ingredients);\r\n\t\tSystem.out.println(&quot;Updated Count Map: &quot; + counts);\r\n\t}\r\n```\r\n\r\nThis is the output:\r\n```\r\nCount Map: {17=2, 66=1}\r\nIngredient Map: {17=fleisch, 66=kaese, 42=gurken}\r\n\r\nList of ingredients: [fleisch, fleisch, kaese]\r\nUpdated Count Map: {17=0, 66=0}\r\n```\r\nNote, keys and values are immutable when you use the Map.of() method.\r\nI used strings instead of your Ingredients class object in the map, but you can modify the code with a little tinkering. If your having an issue, let me know.","title":"2 Maps with same key. Counting keys","body":"<pre><code>public static void main(String[] args) {\n        /* We will be able to modify the values in this map */\n        Map&lt;Long, Integer&gt; counts = new HashMap&lt;&gt;();\n        counts.put(66L, 1);\n        counts.put(17L, 2);\n        \n        /* You cannot modify keys/value of map if it is implemented with Map.of() */\n        Map&lt;Long, String&gt; testMenu = Map.of(\n                42L, &quot;gurken&quot;,\n                66L, &quot;kaese&quot;,\n                17L, &quot;fleisch&quot;);\n        \n        System.out.println(&quot;Count Map: &quot; + counts);\n        System.out.println(&quot;Ingredient Map: &quot; + testMenu + &quot;\\n&quot;);\n        \n        List&lt;String&gt; ingredients = new ArrayList&lt;&gt;();\n        \n        /* Access both key/value with entrySet() */\n        for(Map.Entry&lt;Long, Integer&gt; entry : counts.entrySet()) {\n            long key = entry.getKey();\n            int val = entry.getValue();\n            for(int i = 0; i &lt; val; i++) {\n                ingredients.add(testMenu.get(key));\n            }\n            counts.put(key, counts.get(key) - val);\n        }\n        \n        System.out.println(&quot;List of ingredients: &quot; + ingredients);\n        System.out.println(&quot;Updated Count Map: &quot; + counts);\n    }\n</code></pre>\n<p>This is the output:</p>\n<pre><code>Count Map: {17=2, 66=1}\nIngredient Map: {17=fleisch, 66=kaese, 42=gurken}\n\nList of ingredients: [fleisch, fleisch, kaese]\nUpdated Count Map: {17=0, 66=0}\n</code></pre>\n<p>Note, keys and values are immutable when you use the Map.of() method.\nI used strings instead of your Ingredients class object in the map, but you can modify the code with a little tinkering. If your having an issue, let me know.</p>\n"}],"owner":{"account_id":26624495,"reputation":25,"user_id":20242740,"display_name":"Escanor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":315,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74447748,"answer_count":1,"score":0,"last_activity_date":1668707213,"creation_date":1668520175,"question_id":74446747,"body_markdown":"So I have two maps. First one (idsandcount) has the id as key and number ordered as count. Second map has id as key and ingredient as value. How do implement a method that gives a list with an arraylist?\r\n\r\n\r\n```\r\npublic static List&lt;Ingredient&gt; ingredientsFromIdAndCount(Map&lt;Long, Integer&gt; idsAndCount, Map&lt;Long, Ingredient&gt; articles) {\r\n\r\n    Map&lt;Ingredient, Long&gt; inversedArt = new HashMap&lt;&gt;();\r\n    articles.forEach((key, value) -&gt; inversedArt.put((value), key));\r\n\r\n    \r\n    \r\n    List&lt;Ingredient&gt; ingredientList = new ArrayList&lt;&gt;();\r\n    for (Ingredient art : articles.values()) ingredientList.add(art);\r\n\r\n\r\n    return ingredientList;\r\n```\r\n\r\nFrom Test class:\r\n\r\n```\r\n@Test\r\n@DisplayName(&quot;should get the ingredients from the passed menu in the stated quantities of the input map&quot;)\r\nvoid ingredientsFromIdAndCount() {\r\n    Map&lt;Long, Integer&gt; counts = Map.of(\r\n            66L, 1,\r\n            17L, 2);\r\n```\r\n\r\n\r\n```\r\nprivate final Map&lt;Long, Ingredient&gt; testMenu = Map.of(\r\n        42L, gurken,\r\n        66L, kaese,\r\n        17L, fleisch);\r\n\r\n        List&lt;Ingredient&gt; expected = List.of(kaese, fleisch, fleisch);\r\n        List&lt;Ingredient&gt; actual = \r\n        MenuUtils.ingredientsFromIdAndCount(counts, testMenu);\r\n```\r\n\r\nI basically want an arraylist of kaese, fleisch, fleisch.\r\n\r\n\r\nI have tried inversing(don&#39;t know if i need it here). My main thought was to get an arraylist of the ids from the first map. An arraylist of 66, 17, 17 to then get the values from the second map using these key. Problem is I just started working with maps and arraylists, so its very confusing at the moment.","title":"2 Maps with same key. Counting keys","body":"<p>So I have two maps. First one (idsandcount) has the id as key and number ordered as count. Second map has id as key and ingredient as value. How do implement a method that gives a list with an arraylist?</p>\n<pre><code>public static List&lt;Ingredient&gt; ingredientsFromIdAndCount(Map&lt;Long, Integer&gt; idsAndCount, Map&lt;Long, Ingredient&gt; articles) {\n\n    Map&lt;Ingredient, Long&gt; inversedArt = new HashMap&lt;&gt;();\n    articles.forEach((key, value) -&gt; inversedArt.put((value), key));\n\n    \n    \n    List&lt;Ingredient&gt; ingredientList = new ArrayList&lt;&gt;();\n    for (Ingredient art : articles.values()) ingredientList.add(art);\n\n\n    return ingredientList;\n</code></pre>\n<p>From Test class:</p>\n<pre><code>@Test\n@DisplayName(&quot;should get the ingredients from the passed menu in the stated quantities of the input map&quot;)\nvoid ingredientsFromIdAndCount() {\n    Map&lt;Long, Integer&gt; counts = Map.of(\n            66L, 1,\n            17L, 2);\n</code></pre>\n<pre><code>private final Map&lt;Long, Ingredient&gt; testMenu = Map.of(\n        42L, gurken,\n        66L, kaese,\n        17L, fleisch);\n\n        List&lt;Ingredient&gt; expected = List.of(kaese, fleisch, fleisch);\n        List&lt;Ingredient&gt; actual = \n        MenuUtils.ingredientsFromIdAndCount(counts, testMenu);\n</code></pre>\n<p>I basically want an arraylist of kaese, fleisch, fleisch.</p>\n<p>I have tried inversing(don't know if i need it here). My main thought was to get an arraylist of the ids from the first map. An arraylist of 66, 17, 17 to then get the values from the second map using these key. Problem is I just started working with maps and arraylists, so its very confusing at the moment.</p>\n"},{"tags":["java","pdf","rtf"],"comments":[{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":2,"creation_date":1312208614,"post_id":6899709,"comment_id":8214715,"body_markdown":"Any reason you cannot script Office to open the file and print to a PDF-printer?","body":"Any reason you cannot script Office to open the file and print to a PDF-printer?"},{"owner":{"account_id":801010,"reputation":53,"user_id":872465,"accept_rate":25,"display_name":"iaragorn"},"score":0,"creation_date":1312210270,"post_id":6899709,"comment_id":8215334,"body_markdown":"In java? No idea how to do that.","body":"In java? No idea how to do that."},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":1,"creation_date":1312214683,"post_id":6899709,"comment_id":8216641,"body_markdown":"using Office scripting tools.  Only use Java to launch those.","body":"using Office scripting tools.  Only use Java to launch those."},{"owner":{"account_id":801010,"reputation":53,"user_id":872465,"accept_rate":25,"display_name":"iaragorn"},"score":0,"creation_date":1312269192,"post_id":6899709,"comment_id":8226975,"body_markdown":"but it requires Microsoft Office. And I have no information that microsoft office is able print to pdf","body":"but it requires Microsoft Office. And I have no information that microsoft office is able print to pdf"},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":1,"creation_date":1312270316,"post_id":6899709,"comment_id":8227190,"body_markdown":"Office gives the best result.  You can install a third party printer which does not print to a physical printer, but a PDF file.  Also modern versions of office can install a &quot;print to PDF&quot; plugin.","body":"Office gives the best result.  You can install a third party printer which does not print to a physical printer, but a PDF file.  Also modern versions of office can install a &quot;print to PDF&quot; plugin."},{"owner":{"account_id":801010,"reputation":53,"user_id":872465,"accept_rate":25,"display_name":"iaragorn"},"score":0,"creation_date":1312291074,"post_id":6899709,"comment_id":8232768,"body_markdown":"Ok but I am still missing something. How can I call Ms office from java code?","body":"Ok but I am still missing something. How can I call Ms office from java code?"},{"owner":{"account_id":801010,"reputation":53,"user_id":872465,"accept_rate":25,"display_name":"iaragorn"},"score":0,"creation_date":1312361682,"post_id":6899709,"comment_id":8248785,"body_markdown":"but any way Ms Office is not for free","body":"but any way Ms Office is not for free"},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1312361770,"post_id":6899709,"comment_id":8248808,"body_markdown":"please edit your question to include all requirements.","body":"please edit your question to include all requirements."},{"owner":{"account_id":801010,"reputation":53,"user_id":872465,"accept_rate":25,"display_name":"iaragorn"},"score":0,"creation_date":1312552751,"post_id":6899709,"comment_id":8295240,"body_markdown":"do you know how to open document with word viewer from powershell?","body":"do you know how to open document with word viewer from powershell?"},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":1,"creation_date":1312568910,"post_id":6899709,"comment_id":8300250,"body_markdown":"no, but if you want 100% compatibility with Office, you need Office to do it.  Consider asking a new question about how to script Office to print to a given printer.","body":"no, but if you want 100% compatibility with Office, you need Office to do it.  Consider asking a new question about how to script Office to print to a given printer."}],"answers":[{"comments":[{"owner":{"account_id":801010,"reputation":53,"user_id":872465,"accept_rate":25,"display_name":"iaragorn"},"score":1,"creation_date":1312361696,"post_id":6910179,"comment_id":8248788,"body_markdown":"Ok it sound nice but it is not for free","body":"Ok it sound nice but it is not for free"}],"tags":[],"owner":{"account_id":76090,"reputation":1408,"user_id":218065,"accept_rate":100,"display_name":"Shahzad Latif"},"comment_count":1,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1312278672,"creation_date":1312278672,"answer_id":6910179,"question_id":6899709,"body_markdown":"You may try [Aspose.Words for Java][1] to convert RTF file to PDF format. You can [load a file in RTF format into Aspose.Words for Java][2] and then [save it to PDF format][3]. Please note that while loading specify RTF as LoadFormat value and pass PDF as SaveFormat value while saving the document. This doesn&#39;t require OpenOffice or any other software to be installed for the conversion to work. \r\n\r\nDisclosure: I work as developer evangelist at Aspose.\r\n\r\n\r\n  [1]: http://www.aspose.com/categories/java-components/aspose.words-for-java/default.aspx\r\n  [2]: http://www.aspose.com/documentation/java-components/aspose.words-for-java/load-or-create-a-document.html\r\n  [3]: http://www.aspose.com/documentation/java-components/aspose.words-for-java/save-a-document.html","title":"Java generate PDF from RTF","body":"<p>You may try <a href=\"http://www.aspose.com/categories/java-components/aspose.words-for-java/default.aspx\" rel=\"nofollow\">Aspose.Words for Java</a> to convert RTF file to PDF format. You can <a href=\"http://www.aspose.com/documentation/java-components/aspose.words-for-java/load-or-create-a-document.html\" rel=\"nofollow\">load a file in RTF format into Aspose.Words for Java</a> and then <a href=\"http://www.aspose.com/documentation/java-components/aspose.words-for-java/save-a-document.html\" rel=\"nofollow\">save it to PDF format</a>. Please note that while loading specify RTF as LoadFormat value and pass PDF as SaveFormat value while saving the document. This doesn't require OpenOffice or any other software to be installed for the conversion to work. </p>\n\n<p>Disclosure: I work as developer evangelist at Aspose.</p>\n"},{"tags":[],"owner":{"account_id":1072500,"reputation":1,"user_id":1071440,"display_name":"iaragorn"},"comment_count":0,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1322575577,"creation_date":1322575577,"answer_id":8312067,"question_id":6899709,"body_markdown":"Best way to do it is use MS Office. And Ms Office is able to save file in PDF format (you need install some addons I think).","title":"Java generate PDF from RTF","body":"<p>Best way to do it is use MS Office. And Ms Office is able to save file in PDF format (you need install some addons I think).</p>\n"},{"tags":[],"owner":{"account_id":307435,"reputation":24224,"user_id":618728,"accept_rate":68,"display_name":"Mr.Wizard"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1322576036,"creation_date":1322576036,"answer_id":8312185,"question_id":6899709,"body_markdown":"Under Windows you could print to [CutePDF Writer](http://www.cutepdf.com/products/cutepdf/writer.asp).  This freeware uses Ghostscript as a back end.","title":"Java generate PDF from RTF","body":"<p>Under Windows you could print to <a href=\"http://www.cutepdf.com/products/cutepdf/writer.asp\" rel=\"nofollow\">CutePDF Writer</a>.  This freeware uses Ghostscript as a back end.</p>\n"},{"tags":[],"owner":{"account_id":14313923,"reputation":8868,"user_id":10802527,"display_name":"K J"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668706717,"creation_date":1668706717,"answer_id":74479827,"question_id":6899709,"body_markdown":"Windows has native convert RTF to PDF using command line, however it will to a degree be limited, so it will use direct convert text and images, but it will depend on rtf syntax as to which drawn objects are supported. WORD ART drawing objects need MS Word to print\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThe output looks reasonable but **here is the source in MSWord** where the art was clearly not handled by the non-word printout.\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/FbkHt.png\r\n  [2]: https://i.stack.imgur.com/caIqb.png","title":"Java generate PDF from RTF","body":"<p>Windows has native convert RTF to PDF using command line, however it will to a degree be limited, so it will use direct convert text and images, but it will depend on rtf syntax as to which drawn objects are supported. WORD ART drawing objects need MS Word to print</p>\n<p><a href=\"https://i.stack.imgur.com/FbkHt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FbkHt.png\" alt=\"enter image description here\" /></a></p>\n<p>The output looks reasonable but <strong>here is the source in MSWord</strong> where the art was clearly not handled by the non-word printout.</p>\n<p><a href=\"https://i.stack.imgur.com/caIqb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/caIqb.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":801010,"reputation":53,"user_id":872465,"accept_rate":25,"display_name":"iaragorn"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2801,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":4,"score":1,"last_activity_date":1668706717,"creation_date":1312207991,"question_id":6899709,"body_markdown":"I want to generate PDF file from RTF file. \r\nI have tried following.\r\n\r\n1. Itext\r\nIt&#39;s already outdated and new version doesn&#39;t support rtf.\r\n\r\n2. JDocConverter\r\nIt uses OpenOffice on the background. it is working fine, there is only one problem. Open office doesn&#39;t support drawing object in RTF. \r\n\r\nAny other possible and reliable solutions?\r\n\r\nNote: It would be fine don&#39;t use any commercial software.\r\n","title":"Java generate PDF from RTF","body":"<p>I want to generate PDF file from RTF file. \nI have tried following.</p>\n\n<ol>\n<li><p>Itext\nIt's already outdated and new version doesn't support rtf.</p></li>\n<li><p>JDocConverter\nIt uses OpenOffice on the background. it is working fine, there is only one problem. Open office doesn't support drawing object in RTF. </p></li>\n</ol>\n\n<p>Any other possible and reliable solutions?</p>\n\n<p>Note: It would be fine don't use any commercial software.</p>\n"},{"tags":["java","jar","manifest","instrumentation"],"answers":[{"comments":[{"owner":{"account_id":6712423,"reputation":319,"user_id":5604048,"display_name":"octopus"},"score":0,"creation_date":1553112379,"post_id":55259245,"comment_id":97269706,"body_markdown":"thanks for your comment, it was very helpful especially the `MANIFEST` specification, so the problem was resolved by eliminating the space before `:`  and also by `adding a newline`, for the package advice it has nothing to do with my problem. thanks","body":"thanks for your comment, it was very helpful especially the <code>MANIFEST</code> specification, so the problem was resolved by eliminating the space before <code>:</code>  and also by <code>adding a newline</code>, for the package advice it has nothing to do with my problem. thanks"},{"owner":{"account_id":1483504,"reputation":20404,"user_id":1392277,"accept_rate":84,"display_name":"LppEdd"},"score":0,"creation_date":1553112709,"post_id":55259245,"comment_id":97269855,"body_markdown":"@octopus awesome! Remember to mark the answer as accepted, so others know it is a working solution. The package was more of an advice.","body":"@octopus awesome! Remember to mark the answer as accepted, so others know it is a working solution. The package was more of an advice."},{"owner":{"account_id":3099724,"reputation":61,"user_id":2624173,"display_name":"Kenneth Sizer"},"score":0,"creation_date":1687286580,"post_id":55259245,"comment_id":134914706,"body_markdown":"@octopus  It was the missing newline that was killing me -- Thank you!!!","body":"@octopus  It was the missing newline that was killing me -- Thank you!!!"}],"tags":[],"owner":{"account_id":1483504,"reputation":20404,"user_id":1392277,"accept_rate":84,"display_name":"LppEdd"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1553079887,"creation_date":1553079887,"answer_id":55259245,"question_id":55259056,"body_markdown":"The `MANIFEST` specification doesn&#39;t seem to allow spaces after the **key**, but only before the **value**.\r\n\r\n    header: alphanum *headerchar &quot;:&quot; SPACE *otherchar newline\r\n              *continuation\r\n\r\nSo this\r\n\r\n    Premain-Class : Agent\r\n\r\nshould become\r\n\r\n    Premain-Class: Agent\r\n\r\nAlso, put your `Agent` under a package, don&#39;t use the default one\r\n\r\n    Premain-Class: your.package.Agent","title":"Failed to find Premain-Class manifest attribute from a jar file","body":"<p>The <code>MANIFEST</code> specification doesn't seem to allow spaces after the <strong>key</strong>, but only before the <strong>value</strong>.</p>\n\n<pre><code>header: alphanum *headerchar \":\" SPACE *otherchar newline\n          *continuation\n</code></pre>\n\n<p>So this</p>\n\n<pre><code>Premain-Class : Agent\n</code></pre>\n\n<p>should become</p>\n\n<pre><code>Premain-Class: Agent\n</code></pre>\n\n<p>Also, put your <code>Agent</code> under a package, don't use the default one</p>\n\n<pre><code>Premain-Class: your.package.Agent\n</code></pre>\n"}],"owner":{"account_id":6712423,"reputation":319,"user_id":5604048,"display_name":"octopus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7973,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":55259245,"answer_count":1,"score":2,"last_activity_date":1668706652,"creation_date":1553079224,"question_id":55259056,"body_markdown":"I created a jar from a single .class and I mentioned in the manifest the Premain-class, the jar was generated as expected but when I try to run a program that uses the class from that jar , I get an error\r\n\r\nMANIFEST.MD\r\n\r\n    Premain-Class : Agent\r\n\r\nAgent.java\r\n\r\n    import java.lang.instrument.Instrumentation;\r\n    public class Agent{\r\n        private static Instrumentation inst;\r\n        public static void premain(String paramString, Instrumentation paramInstrumentation) \r\n        { \r\n            inst = paramInstrumentation;\r\n        }\r\n        \r\n        public static long size(Object paramObject)\r\n        {\r\n            return inst.getObjectSize(paramObject);\r\n        }\r\n    }\r\n\r\nTest.java\r\n\r\n    public class Test {\r\n\r\n\t  public static void main (String[] args){\r\n\t\tSystem.out.println(Agent.size(Integer.valueOf(9)));\r\n\t  }\r\n    }\r\n\r\nWhen I get the Agent.class, in the same folder where MANIFEST.MD file exist I execute the following command\r\n\r\n    jar -cvfm agent.jar MANIFEST.MF *.class\r\n\r\n\r\nand when I get the the jar I run the Test, after compiling it, as follow \r\n\r\n    java -javaagent:agent.jar Test\r\n\r\nand I get the following error\r\n\r\n    Failed to find Premain-Class manifest attribute in agent.jar\r\n    Error occurred during initialization of VM\r\n    agent library failed to init: instrument\r\n\r\nam I missing something ? thanks in advance \r\n\r\n ","title":"Failed to find Premain-Class manifest attribute from a jar file","body":"<p>I created a jar from a single .class and I mentioned in the manifest the Premain-class, the jar was generated as expected but when I try to run a program that uses the class from that jar , I get an error</p>\n\n<p>MANIFEST.MD</p>\n\n<pre><code>Premain-Class : Agent\n</code></pre>\n\n<p>Agent.java</p>\n\n<pre><code>import java.lang.instrument.Instrumentation;\npublic class Agent{\n    private static Instrumentation inst;\n    public static void premain(String paramString, Instrumentation paramInstrumentation) \n    { \n        inst = paramInstrumentation;\n    }\n\n    public static long size(Object paramObject)\n    {\n        return inst.getObjectSize(paramObject);\n    }\n}\n</code></pre>\n\n<p>Test.java</p>\n\n<pre><code>public class Test {\n\n  public static void main (String[] args){\n    System.out.println(Agent.size(Integer.valueOf(9)));\n  }\n}\n</code></pre>\n\n<p>When I get the Agent.class, in the same folder where MANIFEST.MD file exist I execute the following command</p>\n\n<pre><code>jar -cvfm agent.jar MANIFEST.MF *.class\n</code></pre>\n\n<p>and when I get the the jar I run the Test, after compiling it, as follow </p>\n\n<pre><code>java -javaagent:agent.jar Test\n</code></pre>\n\n<p>and I get the following error</p>\n\n<pre><code>Failed to find Premain-Class manifest attribute in agent.jar\nError occurred during initialization of VM\nagent library failed to init: instrument\n</code></pre>\n\n<p>am I missing something ? thanks in advance </p>\n"},{"tags":["java","spring","data-structures","compiler-errors","runtime-error"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1668562036,"post_id":74454060,"comment_id":131434237,"body_markdown":"`ProductKTORestResponse` contains three different `Map&lt;String, Map&lt;String, String&gt;&gt;` and a `List&lt;ProductKTOResponseParts&gt;` (in addition to any members which might be in `BaseResponse `. What would be in the `Map&lt;String, Object&gt;` resulting from a `ProductKTORestResponse` instance?","body":"<code>ProductKTORestResponse</code> contains three different <code>Map&lt;String, Map&lt;String, String&gt;&gt;</code> and a <code>List&lt;ProductKTOResponseParts&gt;</code> (in addition to any members which might be in <code>BaseResponse </code>. What would be in the <code>Map&lt;String, Object&gt;</code> resulting from a <code>ProductKTORestResponse</code> instance?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1668562390,"post_id":74454060,"comment_id":131434302,"body_markdown":"And please show the code you&#39;re trying to use to transform it -- I don&#39;t see `ktoconfigurableproduct` in the code you&#39;ve shown.","body":"And please show the code you&#39;re trying to use to transform it -- I don&#39;t see <code>ktoconfigurableproduct</code> in the code you&#39;ve shown."},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1668563754,"post_id":74454060,"comment_id":131434547,"body_markdown":"If you&#39;re trying to cast an instance of `ProductKTOResponseParts` into a `Map` then it would fail, because your domain object is **not** a Map, it contains some Maps. You don&#39;t have to be a phone in order to use a phone. That said, it&#39;s not clear what advantage you&#39;re going to gain from combining all Maps contained within `ProductKTOResponseParts` into a `Map&lt;String, Object&gt;`? There&#39;s a little you can do with its values without type checking and cast, apart from printing.","body":"If you&#39;re trying to cast an instance of <code>ProductKTOResponseParts</code> into a <code>Map</code> then it would fail, because your domain object is <b>not</b> a Map, it contains some Maps. You don&#39;t have to be a phone in order to use a phone. That said, it&#39;s not clear what advantage you&#39;re going to gain from combining all Maps contained within <code>ProductKTOResponseParts</code> into a <code>Map&lt;String, Object&gt;</code>? There&#39;s a little you can do with its values without type checking and cast, apart from printing."},{"owner":{"account_id":11756706,"reputation":11,"user_id":12502870,"display_name":"Anna"},"score":0,"creation_date":1668615491,"post_id":74454060,"comment_id":131449982,"body_markdown":"BaseResponse only have one &quot;private Long expire;&quot;","body":"BaseResponse only have one &quot;private Long expire;&quot;"},{"owner":{"account_id":11756706,"reputation":11,"user_id":12502870,"display_name":"Anna"},"score":0,"creation_date":1668615593,"post_id":74454060,"comment_id":131450027,"body_markdown":"&quot;ktoconfigurableproduct&quot; is the same as &quot;ProductKTORestResponse&quot;.","body":"&quot;ktoconfigurableproduct&quot; is the same as &quot;ProductKTORestResponse&quot;."}],"owner":{"account_id":11756706,"reputation":11,"user_id":12502870,"display_name":"Anna"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1668706364,"creation_date":1668561640,"question_id":74454060,"body_markdown":"I am new to Java, but not new to programming. \r\nRight now I have a two class defined my service response structure. They looked like that: class and subclass, which will be my service response structure.\r\n\r\nI am writing a gateway service, which will call other services. One service&#39;s response is &quot;ktoconfigurableproduct&quot;, which is the same structure as &quot;ProductKTORestResponse&quot;. What I need to do is add one more value &quot;expire&quot; to my &quot;ProductKTORestResponse&quot; response. \r\n\r\n```\r\n{\r\n    @Data\r\n    @Builder\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    public class ProductKTORestResponse extends BaseResponse implements RestMessage {\r\n\r\n        private Map&lt;String, Map&lt;String, String&gt;&gt; groupMetadata;\r\n\r\n        private List&lt;ProductKTOResponseParts&gt; kits;\r\n\r\n        private Map&lt;String, Map&lt;String, String&gt;&gt; optionProductFacetAttributeMap;\r\n\r\n        private Map&lt;String, Map&lt;String, String&gt;&gt; optionValueMetadata;\r\n   }\r\n\r\n    @Data\r\n    @Builder\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    public class ProductKTOResponseParts {\r\n        @NotEmpty\r\n        private String partNumber;\r\n\r\n        private Map&lt;String, Collection&lt;String&gt;&gt; groupKeyOptionValues;\r\n\r\n        private Map&lt;String, String&gt; selectedOptions;\r\n\r\n        private String type;\r\n\r\n        private Map&lt;String, List&lt;String&gt;&gt; optionConstraints;\r\n}\r\npublic class BaseResponse implements Serializable {\r\n\r\n    @JsonProperty(value = &quot;expire&quot;)\r\n    private Long expire;\r\n\r\n}\r\n```\r\n\r\nIs there a way to transform &quot;ProductKTORestResponse&quot; to `Map&lt;String,?&gt;` or `Map&lt;String, Object&gt;`?\r\nThanks for any comments.\r\n\r\n\r\nI tried to transform it directly. But I got\r\n\r\n```\r\nunchecked cast: &#39;com.apple.store.product.kto.domain.ktoconfigurableproduct&#39; to &#39;java.util.map&lt;java.lang.string,java.lang.object&gt;&#39;\r\n```\r\n","title":"java data structure transformer(class &quot;ProductKTORestResponse&quot; to Map&lt;String,?&gt; or Map&lt;String, Object&gt;?)","body":"<p>I am new to Java, but not new to programming.\nRight now I have a two class defined my service response structure. They looked like that: class and subclass, which will be my service response structure.</p>\n<p>I am writing a gateway service, which will call other services. One service's response is &quot;ktoconfigurableproduct&quot;, which is the same structure as &quot;ProductKTORestResponse&quot;. What I need to do is add one more value &quot;expire&quot; to my &quot;ProductKTORestResponse&quot; response.</p>\n<pre><code>{\n    @Data\n    @Builder\n    @NoArgsConstructor\n    @AllArgsConstructor\n    public class ProductKTORestResponse extends BaseResponse implements RestMessage {\n\n        private Map&lt;String, Map&lt;String, String&gt;&gt; groupMetadata;\n\n        private List&lt;ProductKTOResponseParts&gt; kits;\n\n        private Map&lt;String, Map&lt;String, String&gt;&gt; optionProductFacetAttributeMap;\n\n        private Map&lt;String, Map&lt;String, String&gt;&gt; optionValueMetadata;\n   }\n\n    @Data\n    @Builder\n    @NoArgsConstructor\n    @AllArgsConstructor\n    public class ProductKTOResponseParts {\n        @NotEmpty\n        private String partNumber;\n\n        private Map&lt;String, Collection&lt;String&gt;&gt; groupKeyOptionValues;\n\n        private Map&lt;String, String&gt; selectedOptions;\n\n        private String type;\n\n        private Map&lt;String, List&lt;String&gt;&gt; optionConstraints;\n}\npublic class BaseResponse implements Serializable {\n\n    @JsonProperty(value = &quot;expire&quot;)\n    private Long expire;\n\n}\n</code></pre>\n<p>Is there a way to transform &quot;ProductKTORestResponse&quot; to <code>Map&lt;String,?&gt;</code> or <code>Map&lt;String, Object&gt;</code>?\nThanks for any comments.</p>\n<p>I tried to transform it directly. But I got</p>\n<pre><code>unchecked cast: 'com.apple.store.product.kto.domain.ktoconfigurableproduct' to 'java.util.map&lt;java.lang.string,java.lang.object&gt;'\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1274069,"reputation":1405,"user_id":7925098,"accept_rate":83,"display_name":"Omari Celestine"},"score":0,"creation_date":1555188840,"post_id":55669616,"comment_id":98025784,"body_markdown":"for the method `isValidSearchTree()`, what defines a valid search tree?","body":"for the method <code>isValidSearchTree()</code>, what defines a valid search tree?"},{"owner":{"account_id":15240508,"reputation":1895,"user_id":11143190,"display_name":"Zain Arshad"},"score":0,"creation_date":1555191247,"post_id":55669616,"comment_id":98026383,"body_markdown":"so you got what want or you need more clarification?","body":"so you got what want or you need more clarification?"}],"answers":[{"tags":[],"owner":{"account_id":3921090,"reputation":463,"user_id":3243202,"display_name":"michael"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1555188085,"creation_date":1555188085,"answer_id":55669684,"question_id":55669616,"body_markdown":"If you could provide a recursive attempt that you made of `sum()`, I will be able to help you much easier. I&#39;ll update this answer with something more comprehensive once you provide an example.\r\n\r\nAs a general hint/tip, when dealing with recursion and binary trees:\r\n\r\n 1. Draw it out and trace a possible solution. This can help you visualize what you need to code.\r\n 2. For any given node, you want to visit all of its children. This means if it only has one child (left or right) you visit that child, if it has two (left and right) you visit both, and if you do not have any children, you terminate (that&#39;s a pretty big base case hint right there).","title":"Creating recursive methods given BinaryTree","body":"<p>If you could provide a recursive attempt that you made of <code>sum()</code>, I will be able to help you much easier. I'll update this answer with something more comprehensive once you provide an example.</p>\n\n<p>As a general hint/tip, when dealing with recursion and binary trees:</p>\n\n<ol>\n<li>Draw it out and trace a possible solution. This can help you visualize what you need to code.</li>\n<li>For any given node, you want to visit all of its children. This means if it only has one child (left or right) you visit that child, if it has two (left and right) you visit both, and if you do not have any children, you terminate (that's a pretty big base case hint right there).</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":13239944,"reputation":387,"user_id":9560851,"display_name":"William Torkington"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1555189371,"creation_date":1555189371,"answer_id":55669860,"question_id":55669616,"body_markdown":"First of all I think you have too many questions, but with [this meta discussion in mind][1], I&#39;ll walk through the recursive sum function and explain how to tackle a problem like these recursively.\r\n\r\nThese algorithms all appear to require [depth first search][2] so I recommend you also check out the linked video.\r\n\r\nThe neat thing about recursion is allows us to think only about what each particular node has to do. For the sum example, that means returning the value it has stored, plus the recursive sum of its children. \r\n\r\n```\r\npublic int exampleSum(){\r\n   // Start with the data we have.\r\n   int sum = this.getData();\r\n\r\n   // Then get the data we need (from each child, which can be done recursively).\r\n   if (this.getLeftChild() != null) {\r\n       sum += this.getLeftChild().exampleSum();\r\n   }\r\n   // Do the same for the right node.\r\n\r\n   return sum; \r\n}\r\n```\r\n\r\nWhat this equates to is going through each node, and getting the sum of each subtree. \r\n\r\nImagine its a group of people standing in the shape of a binary tree, where everyone has a &#39;parent&#39; and 0 to 2 &#39;children&#39;, and they all hold a number. \r\n\r\nInstead of someone going through and asking each person what their number is and adding them all up (looping), we start at the top, the first person asks their children for their sum, and their children ask their children, etc (recursion). \r\n\r\nEach person adds the number their children gave them to their number, then hands it to their parent.\r\n\r\nThe two special cases are when the person has no children, so they stop and just hand their number to their parent, and the &#39;root&#39; node who gives their number to whatever function asked them in the first place.\r\n\r\nI recommend drawing a binary search tree and going through this algorithm yourself.\r\n\r\nI hope this was helpful, and if it was could you like this answer. \r\n\r\nIn future I recommend asking one question at a time. Good luck with your test!\r\n\r\n  [1]: https://meta.stackoverflow.com/questions/334822/how-do-i-ask-and-answer-homework-questions\r\n  [2]: https://www.youtube.com/watch?v=d_C-kq71sYk","title":"Creating recursive methods given BinaryTree","body":"<p>First of all I think you have too many questions, but with <a href=\"https://meta.stackoverflow.com/questions/334822/how-do-i-ask-and-answer-homework-questions\">this meta discussion in mind</a>, I'll walk through the recursive sum function and explain how to tackle a problem like these recursively.</p>\n\n<p>These algorithms all appear to require <a href=\"https://www.youtube.com/watch?v=d_C-kq71sYk\" rel=\"nofollow noreferrer\">depth first search</a> so I recommend you also check out the linked video.</p>\n\n<p>The neat thing about recursion is allows us to think only about what each particular node has to do. For the sum example, that means returning the value it has stored, plus the recursive sum of its children. </p>\n\n<pre><code>public int exampleSum(){\n   // Start with the data we have.\n   int sum = this.getData();\n\n   // Then get the data we need (from each child, which can be done recursively).\n   if (this.getLeftChild() != null) {\n       sum += this.getLeftChild().exampleSum();\n   }\n   // Do the same for the right node.\n\n   return sum; \n}\n</code></pre>\n\n<p>What this equates to is going through each node, and getting the sum of each subtree. </p>\n\n<p>Imagine its a group of people standing in the shape of a binary tree, where everyone has a 'parent' and 0 to 2 'children', and they all hold a number. </p>\n\n<p>Instead of someone going through and asking each person what their number is and adding them all up (looping), we start at the top, the first person asks their children for their sum, and their children ask their children, etc (recursion). </p>\n\n<p>Each person adds the number their children gave them to their number, then hands it to their parent.</p>\n\n<p>The two special cases are when the person has no children, so they stop and just hand their number to their parent, and the 'root' node who gives their number to whatever function asked them in the first place.</p>\n\n<p>I recommend drawing a binary search tree and going through this algorithm yourself.</p>\n\n<p>I hope this was helpful, and if it was could you like this answer. </p>\n\n<p>In future I recommend asking one question at a time. Good luck with your test!</p>\n"},{"tags":[],"owner":{"account_id":15240508,"reputation":1895,"user_id":11143190,"display_name":"Zain Arshad"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1555193195,"creation_date":1555193195,"answer_id":55670271,"question_id":55669616,"body_markdown":"You should study the **power** of `recursion`, but I have coded the methods that you asked for, all these are working like a charm:\r\n\r\n\t\r\n\t/*\r\n\t* INPUT:   Root node\r\n\t* OUTPUT:  Sum of the data of all nodes of tree\r\n\t*/\r\n\t\r\n\tpublic void sum(TreeNode node)\r\n\t{\r\n\t\tif(node == null)\r\n\t\t\treturn;\r\n\t\r\n\t\tsum(node.leftNode);  // recursive call to left subtree of each node\r\n\t\tsum += node.data;\r\n\t\tsum(node.rightNode);  // recursive call to right subtree of each node\r\n\t}\r\n\t\r\n\t\r\n\t/*\r\n\t* INPUT:   Root node , threshold value\r\n\t* OUTPUT:  sum of all node&#39;s data, that rae greater than &quot;value&quot;\r\n\t*/\r\n\t\r\n\tpublic void countGreaterThan(TreeNode node, int value)\r\n\t{\r\n\t\tif(node == null)\r\n\t\t\treturn;\r\n\t\r\n\t\tcountGreaterThan(node.leftNode,value);\r\n\t\tif( node.data &gt; value)    // only adds is node.data is greater than given value \r\n\t\t\tsum += node.data;\r\n\t\tcountGreaterThan(node.rightNode,value);\r\n\t}\t\r\n\t\t\t\r\n\t/*\r\n\t* INPUT:  nothing\r\n\t* OUTPUT:  call to its helper function, taking MIN, MAX, and root as input\r\n\t*/\r\n\r\n\tpublic boolean isBST()  \r\n\t{ \r\n        return isBSThelper(root, Integer.MIN_VALUE,  Integer.MAX_VALUE); \r\n    } \t\r\n\t\r\n\tpublic boolean isBSThelper(TreeNode node, int min, int max) \r\n    { \r\n        if (node == null)   //empty tree is always a BST \r\n            return true; \r\n  \r\n        if (node.data &lt; min || node.data &gt; max) //if node breaks the min/max condition \r\n            return false; \r\n  \r\n        // recursive call to left subtree and right subtree\r\n        return (isBSThelper(node.leftNode, min, node.data-1) &amp;&amp; isBSThelper(node.rightNode, node.data+1, max)); \r\n    } ","title":"Creating recursive methods given BinaryTree","body":"<p>You should study the <strong>power</strong> of <code>recursion</code>, but I have coded the methods that you asked for, all these are working like a charm:</p>\n\n<pre><code>/*\n* INPUT:   Root node\n* OUTPUT:  Sum of the data of all nodes of tree\n*/\n\npublic void sum(TreeNode node)\n{\n    if(node == null)\n        return;\n\n    sum(node.leftNode);  // recursive call to left subtree of each node\n    sum += node.data;\n    sum(node.rightNode);  // recursive call to right subtree of each node\n}\n\n\n/*\n* INPUT:   Root node , threshold value\n* OUTPUT:  sum of all node's data, that rae greater than \"value\"\n*/\n\npublic void countGreaterThan(TreeNode node, int value)\n{\n    if(node == null)\n        return;\n\n    countGreaterThan(node.leftNode,value);\n    if( node.data &gt; value)    // only adds is node.data is greater than given value \n        sum += node.data;\n    countGreaterThan(node.rightNode,value);\n}   \n\n/*\n* INPUT:  nothing\n* OUTPUT:  call to its helper function, taking MIN, MAX, and root as input\n*/\n\npublic boolean isBST()  \n{ \n    return isBSThelper(root, Integer.MIN_VALUE,  Integer.MAX_VALUE); \n}   \n\npublic boolean isBSThelper(TreeNode node, int min, int max) \n{ \n    if (node == null)   //empty tree is always a BST \n        return true; \n\n    if (node.data &lt; min || node.data &gt; max) //if node breaks the min/max condition \n        return false; \n\n    // recursive call to left subtree and right subtree\n    return (isBSThelper(node.leftNode, min, node.data-1) &amp;&amp; isBSThelper(node.rightNode, node.data+1, max)); \n} \n</code></pre>\n"},{"comments":[{"owner":{"account_id":15975481,"reputation":910,"user_id":11528511,"display_name":"Afzal Ali"},"score":0,"creation_date":1668940819,"post_id":74479728,"comment_id":131523953,"body_markdown":"You don&#39;t need to check for existence of left/right node. Just made the call base case is enough to handle the null case","body":"You don&#39;t need to check for existence of left/right node. Just made the call base case is enough to handle the null case"}],"tags":[],"owner":{"account_id":26965679,"reputation":1,"user_id":20532580,"display_name":"user20532580"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668706264,"creation_date":1668706264,"answer_id":74479728,"question_id":55669616,"body_markdown":"I figured it out! the other guy was close but his method didn&#39;t work, it did put me on the right path however.\r\n\r\n          int sumNodes(BinaryNode&lt;Integer&gt; root)\r\n          {\r\n              int sum = 0;\r\n              if(root == null){\r\n                  return 0;\r\n              }\r\n    \r\n              if (root.getLeft() != null) {\r\n                  sum += sumNodes(root.getLeft());\r\n              }\r\n   \r\n              if (root.getRight() != null) {\r\n                   sum += sumNodes(root.getRight());\r\n              }\r\n              sum+= root.getValue();\r\n              return sum;\r\n    \r\n        }\r\n","title":"Creating recursive methods given BinaryTree","body":"<p>I figured it out! the other guy was close but his method didn't work, it did put me on the right path however.</p>\n<pre><code>      int sumNodes(BinaryNode&lt;Integer&gt; root)\n      {\n          int sum = 0;\n          if(root == null){\n              return 0;\n          }\n\n          if (root.getLeft() != null) {\n              sum += sumNodes(root.getLeft());\n          }\n\n          if (root.getRight() != null) {\n               sum += sumNodes(root.getRight());\n          }\n          sum+= root.getValue();\n          return sum;\n\n    }\n</code></pre>\n"}],"owner":{"account_id":15554180,"reputation":151,"user_id":11233696,"display_name":"GilmoreGirling"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":411,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":55669860,"answer_count":4,"score":0,"last_activity_date":1668706264,"creation_date":1555187521,"question_id":55669616,"body_markdown":"I&#39;m studying for a test in a few hours, and I&#39;m going over some practice problems but I&#39;m really having trouble with recursion related problems. I was wondering if someone could walk me through how to do these? \r\n\r\nUsing the `BinaryTree class` below, create the following `recursive` methods: \r\n\r\n - `sum()`  returns the sum of all values in the BinaryTree. \r\n - `countGreaterThan(int)`  returns the number of nodes that have values greater than the specified integer. \r\n - `isValidSearchTree()`  returns true if the Binary Tree is a valid search tree and false otherwise. \r\n\r\nI get the basic premise of how to create these functions like for example, for the sum function it&#39;d usually go something like:\r\n\r\n    int sum = 0\r\n    for(int i; i&lt;binaryTree.size(); i++){\r\n        sum += binaryTree[i]\r\n    }\r\n\r\nOr something similar. But I don&#39;t really know how to apply these concepts to a `BinaryTree` with `nodes` and make them `recursive` as well? The code I&#39;m provided with is given below.\r\n\r\n    public class BinaryTree {\r\n     private int data;\r\n     private BinaryTree leftChild;\r\n     private BinaryTree rightChild;\r\n\r\n     public BinaryTree(int val) {\r\n         data = val;\r\n         leftChild = null;\r\n         rightChild = null;\r\n      }\r\n\r\n      // Get methods\r\n     public int getData() { return data; }\r\n     public BinaryTree getLeftChild() { return leftChild; }\r\n     public BinaryTree getRightChild() { return rightChild; }\r\n\r\n     // Set methods\r\n     public void setData(int val) { data = val; }\r\n     public void setLeftChild(BinaryTree left) { leftChild = left; }\r\n     public void setRightChild(BinaryTree right) { rightChild = right; }\r\n    }","title":"Creating recursive methods given BinaryTree","body":"<p>I'm studying for a test in a few hours, and I'm going over some practice problems but I'm really having trouble with recursion related problems. I was wondering if someone could walk me through how to do these? </p>\n\n<p>Using the <code>BinaryTree class</code> below, create the following <code>recursive</code> methods: </p>\n\n<ul>\n<li><code>sum()</code>  returns the sum of all values in the BinaryTree. </li>\n<li><code>countGreaterThan(int)</code>  returns the number of nodes that have values greater than the specified integer. </li>\n<li><code>isValidSearchTree()</code>  returns true if the Binary Tree is a valid search tree and false otherwise. </li>\n</ul>\n\n<p>I get the basic premise of how to create these functions like for example, for the sum function it'd usually go something like:</p>\n\n<pre><code>int sum = 0\nfor(int i; i&lt;binaryTree.size(); i++){\n    sum += binaryTree[i]\n}\n</code></pre>\n\n<p>Or something similar. But I don't really know how to apply these concepts to a <code>BinaryTree</code> with <code>nodes</code> and make them <code>recursive</code> as well? The code I'm provided with is given below.</p>\n\n<pre><code>public class BinaryTree {\n private int data;\n private BinaryTree leftChild;\n private BinaryTree rightChild;\n\n public BinaryTree(int val) {\n     data = val;\n     leftChild = null;\n     rightChild = null;\n  }\n\n  // Get methods\n public int getData() { return data; }\n public BinaryTree getLeftChild() { return leftChild; }\n public BinaryTree getRightChild() { return rightChild; }\n\n // Set methods\n public void setData(int val) { data = val; }\n public void setLeftChild(BinaryTree left) { leftChild = left; }\n public void setRightChild(BinaryTree right) { rightChild = right; }\n}\n</code></pre>\n"},{"tags":["java","oracle","return","mybatis"],"answers":[{"comments":[{"owner":{"account_id":2437868,"reputation":13395,"user_id":2127277,"accept_rate":66,"display_name":"Dimitri Kopriwa"},"score":1,"creation_date":1590697742,"post_id":13990870,"comment_id":109787060,"body_markdown":"Can we do this in an update  if returning the `count` value after increasing it?","body":"Can we do this in an update  if returning the <code>count</code> value after increasing it?"}],"tags":[],"owner":{"account_id":27171,"reputation":9206,"user_id":71420,"accept_rate":87,"display_name":"Igor Konoplyanko"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1356095573,"creation_date":1356095573,"answer_id":13990870,"question_id":13988935,"body_markdown":"Why you haven&#39;t defined both parameterType and resultType like this:\r\n\r\n    parameterType=&quot;int&quot; resultType=&quot;int&quot;\r\n\r\n Remove specific output and try to make it like this:\r\n\r\n    &lt;select id=&quot;add&quot; parameterType=&quot;int&quot; resultType=&quot;int&quot; statementType=&quot;CALLABLE&quot;&gt;\r\n        { CALL ADD_TEN(#{input, mode=IN, jdbcType=INTEGER})}\r\n    &lt;/select&gt;","title":"return value Mybatis","body":"<p>Why you haven't defined both parameterType and resultType like this:</p>\n\n<pre><code>parameterType=\"int\" resultType=\"int\"\n</code></pre>\n\n<p>Remove specific output and try to make it like this:</p>\n\n<pre><code>&lt;select id=\"add\" parameterType=\"int\" resultType=\"int\" statementType=\"CALLABLE\"&gt;\n    { CALL ADD_TEN(#{input, mode=IN, jdbcType=INTEGER})}\n&lt;/select&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2168843,"reputation":282,"user_id":1921356,"accept_rate":83,"display_name":"Charles"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1668706207,"creation_date":1359619656,"answer_id":14621106,"question_id":13988935,"body_markdown":"Solution: MyBatis return type must be `void`. The result parameter I was looking for is in the  ResultMap that function/procedure returns.","title":"return value Mybatis","body":"<p>Solution: MyBatis return type must be <code>void</code>. The result parameter I was looking for is in the  ResultMap that function/procedure returns.</p>\n"}],"owner":{"account_id":2168843,"reputation":282,"user_id":1921356,"accept_rate":83,"display_name":"Charles"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25772,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":14621106,"answer_count":2,"score":8,"last_activity_date":1668706207,"creation_date":1356087828,"question_id":13988935,"body_markdown":"I&#39;m trying to get a returned value (an Integer value) from a stored function in Oracle 11g. \r\n\r\nThe function adds 10 to the input number: \r\n\r\n    FUNCTION ADD_TEN(INPUT IN NUMBER) RETURN NUMBER IS \r\n    BEGIN \r\n        RETURN INPUT + 10; \r\n    END;\r\n\r\nIn my mapper interface I have the line: \r\n\r\n    Integer add(Integer input); \r\n\r\nAnd in Xml file \r\n\r\n    &lt;select id=&quot;add&quot; statementType=&quot;CALLABLE&quot; resultType=&#39;java.lang.Integer&#39;&gt;\r\n        {#{output,mode=OUT,jdbcType=NUMERIC,javaType=Integer} = call test_pkg.ADD_TEN( \r\n        #{input,jdbcType=NUMERIC}) } \r\n    &lt;/select&gt;`\r\n\r\n\r\nThe call to the method is like: \r\n\r\n    Integer sum = mapper.add(45); \r\n\r\nBut I&#39;m getting the following error: \r\n\r\n    Could not set property &#39;output&#39; of &#39;class java.lang.Integer&#39; with value &#39;55&#39; Cause: org.apache.ibatis.reflection.ReflectionException: There is no setter for property named &#39;output&#39; in &#39;class java.lang.Integer&#39; \r\n\r\n\r\nWhat am I doing wrong? I&#39;m really lost with this... \r\n\r\nThank you.","title":"return value Mybatis","body":"<p>I'm trying to get a returned value (an Integer value) from a stored function in Oracle 11g. </p>\n\n<p>The function adds 10 to the input number: </p>\n\n<pre><code>FUNCTION ADD_TEN(INPUT IN NUMBER) RETURN NUMBER IS \nBEGIN \n    RETURN INPUT + 10; \nEND;\n</code></pre>\n\n<p>In my mapper interface I have the line: </p>\n\n<pre><code>Integer add(Integer input); \n</code></pre>\n\n<p>And in Xml file </p>\n\n<pre><code>&lt;select id=\"add\" statementType=\"CALLABLE\" resultType='java.lang.Integer'&gt;\n    {#{output,mode=OUT,jdbcType=NUMERIC,javaType=Integer} = call test_pkg.ADD_TEN( \n    #{input,jdbcType=NUMERIC}) } \n&lt;/select&gt;`\n</code></pre>\n\n<p>The call to the method is like: </p>\n\n<pre><code>Integer sum = mapper.add(45); \n</code></pre>\n\n<p>But I'm getting the following error: </p>\n\n<pre><code>Could not set property 'output' of 'class java.lang.Integer' with value '55' Cause: org.apache.ibatis.reflection.ReflectionException: There is no setter for property named 'output' in 'class java.lang.Integer' \n</code></pre>\n\n<p>What am I doing wrong? I'm really lost with this... </p>\n\n<p>Thank you.</p>\n"},{"tags":["java","oop","inheritance","invoke","super"],"comments":[{"owner":{"account_id":2324765,"reputation":3704,"user_id":2039546,"display_name":"smail Y."},"score":0,"creation_date":1630394037,"post_id":68994241,"comment_id":121936595,"body_markdown":"Does this answer your question? [Java Inheritance - calling superclass method](https://stackoverflow.com/questions/6896504/java-inheritance-calling-superclass-method)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/6896504/java-inheritance-calling-superclass-method\">Java Inheritance - calling superclass method</a>"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1630394071,"post_id":68994241,"comment_id":121936603,"body_markdown":"Hint: the exercise you are trying to solve is about non-static methods ... not static methods.","body":"Hint: the exercise you are trying to solve is about non-static methods ... not static methods."},{"owner":{"account_id":9437851,"reputation":157,"user_id":7019324,"display_name":"Stijn Dejongh"},"score":0,"creation_date":1630394952,"post_id":68994241,"comment_id":121936944,"body_markdown":"The key is in &quot;all the three classes implement the method test()&quot;\nYou are missing the methods in class B and C. If you implement these, the function &#39;test()&#39; in class B will override the one of class C. As A extends B, A can only use &#39;super.test()&#39; which will call the implementation of class B.\n\nas Stephen has indicated: your method should not be static.","body":"The key is in &quot;all the three classes implement the method test()&quot; You are missing the methods in class B and C. If you implement these, the function &#39;test()&#39; in class B will override the one of class C. As A extends B, A can only use &#39;super.test()&#39; which will call the implementation of class B.  as Stephen has indicated: your method should not be static."}],"answers":[{"tags":[],"owner":{"account_id":26229495,"reputation":5,"user_id":19905693,"display_name":"Klord"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668706145,"creation_date":1668704713,"answer_id":74479398,"question_id":68994241,"body_markdown":"The answer is &quot;It is not possible to invoke test()&quot;. Because if it&#39;s possible, it would break encapsulation.\r\n\r\nWe can invoke the test() method in class B using &quot;super.&quot; keyword. This happens under the assumption that we are aware that we are violating the encapsulation on our own class. But we are not allowed to access the class above the parent class using &quot;super.&quot; keywords because we don&#39;t know what rules the superclass is enforcing. So, we can&#39;t bypass an implementation. ","title":"Is it not possible to invoke superclass method?","body":"<p>The answer is &quot;It is not possible to invoke test()&quot;. Because if it's possible, it would break encapsulation.</p>\n<p>We can invoke the test() method in class B using &quot;super.&quot; keyword. This happens under the assumption that we are aware that we are violating the encapsulation on our own class. But we are not allowed to access the class above the parent class using &quot;super.&quot; keywords because we don't know what rules the superclass is enforcing. So, we can't bypass an implementation.</p>\n"}],"owner":{"account_id":21730227,"reputation":63,"user_id":16039091,"display_name":"Imesh Isuranga"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":651,"favorite_count":0,"down_vote_count":3,"up_vote_count":4,"closed_date":1668704889,"answer_count":1,"score":1,"last_activity_date":1668706172,"creation_date":1630393561,"question_id":68994241,"body_markdown":"Assume that class `A` extends class `B`, which extends class `C`. Also all the three classes implement the method `test()`. How can a method in class A invoke the test()method defined in class C?\r\n\r\nAnswer is &quot;It is not possible to invoke test()&quot;.\r\n\r\n    class C {\r\n      \r\n    \tpublic static void test(){\r\n    \t\tSystem.out.println(&quot;IMESH ISURANGA&quot;);\r\n    \t}\r\n    }\r\n      \r\n    class B extends C {\r\n      \r\n    }\r\n    \r\n    class A extends B {\r\n      //how prove it\r\n    }\r\n      \r\n    class Demo {\r\n      \r\n    \tpublic static void main(String[] args) {\r\n      \r\n    \t\t//----\r\n    \t\t\r\n    \t}\r\n    }\r\n\r\nHow to prove it?","title":"Is it not possible to invoke superclass method?","body":"<p>Assume that class <code>A</code> extends class <code>B</code>, which extends class <code>C</code>. Also all the three classes implement the method <code>test()</code>. How can a method in class A invoke the test()method defined in class C?</p>\n<p>Answer is &quot;It is not possible to invoke test()&quot;.</p>\n<pre><code>class C {\n  \n    public static void test(){\n        System.out.println(&quot;IMESH ISURANGA&quot;);\n    }\n}\n  \nclass B extends C {\n  \n}\n\nclass A extends B {\n  //how prove it\n}\n  \nclass Demo {\n  \n    public static void main(String[] args) {\n  \n        //----\n        \n    }\n}\n</code></pre>\n<p>How to prove it?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1668708136,"post_id":74479575,"comment_id":131477658,"body_markdown":"`DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;MM/d/yyyy h:mm a&quot;, Locale.UK);` does it for me ;)","body":"<code>DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;MM&#47;d&#47;yyyy h:mm a&quot;, Locale.UK);</code> does it for me ;)"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1668708276,"post_id":74479575,"comment_id":131477695,"body_markdown":"Why are you adding strings to your list? Thats bad data modelling. You should make yourself a list of `LocalDateTime` objects (or `ZonedDateTme`) and defer formatting to the time when you display the result to the user.","body":"Why are you adding strings to your list? Thats bad data modelling. You should make yourself a list of <code>LocalDateTime</code> objects (or <code>ZonedDateTme</code>) and defer formatting to the time when you display the result to the user."},{"owner":{"account_id":3506599,"reputation":357,"user_id":2932012,"accept_rate":35,"display_name":"nikhil udgirkar"},"score":0,"creation_date":1668750350,"post_id":74479575,"comment_id":131486838,"body_markdown":"@OleV.V. I get this from UI. I am doing UI test automation","body":"@OleV.V. I get this from UI. I am doing UI test automation"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1668750607,"post_id":74479575,"comment_id":131486880,"body_markdown":"I would still store proper datre-time objects. If you indispensably need the exact string you got from the UI, then objects holding both even though its redundant.","body":"I would still store proper datre-time objects. If you indispensably need the exact string you got from the UI, then objects holding both even though its redundant."},{"owner":{"account_id":3506599,"reputation":357,"user_id":2932012,"accept_rate":35,"display_name":"nikhil udgirkar"},"score":0,"creation_date":1668751703,"post_id":74479575,"comment_id":131487079,"body_markdown":"@OleV.V. you mean using List&lt;LocalDateTime&gt;?. Since from the automation it is retrieved in String as it has textContent() method. I thought rather than typecasting it to LocalDateTime let&#39;s store it as it is in String. Anyway I have got it working. Can you please provide me reference code so that I can study","body":"@OleV.V. you mean using List&lt;LocalDateTime&gt;?. Since from the automation it is retrieved in String as it has textContent() method. I thought rather than typecasting it to LocalDateTime let&#39;s store it as it is in String. Anyway I have got it working. Can you please provide me reference code so that I can study"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1668806110,"post_id":74479575,"comment_id":131503883,"body_markdown":"Theres an example of what I suggest [in my answer here](https://stackoverflow.com/a/52776978/5772882).","body":"Theres an example of what I suggest <a href=\"https://stackoverflow.com/a/52776978/5772882\">in my answer here</a>."}],"owner":{"account_id":3506599,"reputation":357,"user_id":2932012,"accept_rate":35,"display_name":"nikhil udgirkar"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1668706066,"answer_count":0,"score":0,"last_activity_date":1668706074,"creation_date":1668705517,"question_id":74479575,"body_markdown":"I am getting multiple dates from UI which I store in list. I want to sort these dates \r\n\r\n    List&lt;String&gt; li = new ArrayList&lt;&gt;();\r\n    li.add(&quot;11/1/2022 2:59 am&quot;);\r\n    li.add(&quot;10/21/2022 9:33 pm&quot;); li.add(&quot;10/20/2022 8:26 am&quot;);\r\n\r\nand so on\r\n\r\nI am trying to sort with following code \r\n\r\n    DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;MM/dd/yyyy hh:mm a&quot;, Locale.US);\r\n\r\n    Collections.sort(li, (s1, s2) -&gt; LocalDateTime.parse(s1, formatter).\r\n            compareTo(LocalDateTime.parse(s2, formatter)));\r\n\r\nbut getting error \r\n\r\n&gt; &quot;Exception in thread &quot;main&quot; java.time.format.DateTimeParseException:\r\n&gt; Text &#39;10/21/2022 9:33 pm&#39; could not be parsed at index 11&quot;\r\n\r\nThe accepted solution at [https://stackoverflow.com/questions/14451976/how-to-sort-date-which-is-in-string-format-in-java][1] is not working for me. Could anyone please help here?\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/14451976/how-to-sort-date-which-is-in-string-format-in-java","title":"Unable to sort dates. Getting error &quot;Text &#39;&#39; could not be parsed at index 11&quot; even though the date format is correct","body":"<p>I am getting multiple dates from UI which I store in list. I want to sort these dates</p>\n<pre><code>List&lt;String&gt; li = new ArrayList&lt;&gt;();\nli.add(&quot;11/1/2022 2:59 am&quot;);\nli.add(&quot;10/21/2022 9:33 pm&quot;); li.add(&quot;10/20/2022 8:26 am&quot;);\n</code></pre>\n<p>and so on</p>\n<p>I am trying to sort with following code</p>\n<pre><code>DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;MM/dd/yyyy hh:mm a&quot;, Locale.US);\n\nCollections.sort(li, (s1, s2) -&gt; LocalDateTime.parse(s1, formatter).\n        compareTo(LocalDateTime.parse(s2, formatter)));\n</code></pre>\n<p>but getting error</p>\n<blockquote>\n<p>&quot;Exception in thread &quot;main&quot; java.time.format.DateTimeParseException:\nText '10/21/2022 9:33 pm' could not be parsed at index 11&quot;</p>\n</blockquote>\n<p>The accepted solution at <a href=\"https://stackoverflow.com/questions/14451976/how-to-sort-date-which-is-in-string-format-in-java\">How to sort Date which is in string format in java?</a> is not working for me. Could anyone please help here?</p>\n"},{"tags":["java","arrays","java-stream"],"comments":[{"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"score":2,"creation_date":1668543073,"post_id":74451565,"comment_id":131429880,"body_markdown":"As a side note, a stream is slightly slower than simply looping through an array. We use streams to make the code more readable, but in your case it wouldn&#39;t be more readable (because the operation you want to do is not standard) and at the same time you should loop twice on the array while you could get the job done simply looping once through the array with a classic for loop","body":"As a side note, a stream is slightly slower than simply looping through an array. We use streams to make the code more readable, but in your case it wouldn&#39;t be more readable (because the operation you want to do is not standard) and at the same time you should loop twice on the array while you could get the job done simply looping once through the array with a classic for loop"}],"answers":[{"tags":[],"owner":{"account_id":20342398,"reputation":155,"user_id":14921272,"display_name":"Cole Henrich"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1668543062,"creation_date":1668543062,"answer_id":74451608,"question_id":74451565,"body_markdown":"    int index;\r\n    for (int i = 0; i &lt; arr.length; i++){\r\n        double d = arr[i];\r\n        if (d == min){\r\n           index = i; \r\n           break;\r\n        }\r\n    }","title":"How to get the index of Arrays.stream(array).min()?","body":"<pre><code>int index;\nfor (int i = 0; i &lt; arr.length; i++){\n    double d = arr[i];\n    if (d == min){\n       index = i; \n       break;\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1668543359,"post_id":74451627,"comment_id":131429976,"body_markdown":"You can make it a little more efficient with `comparingDouble()`.","body":"You can make it a little more efficient with <code>comparingDouble()</code>."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1668543751,"post_id":74451627,"comment_id":131430106,"body_markdown":"*when there are multiple minimums, it will return the index of the first one.* Is this specified somewhere?","body":"<i>when there are multiple minimums, it will return the index of the first one.</i> Is this specified somewhere?"},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1668544260,"post_id":74451627,"comment_id":131430243,"body_markdown":"@shmosel No... My brain jumped a few steps when making that conclusion.","body":"@shmosel No... My brain jumped a few steps when making that conclusion."}],"tags":[],"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"comment_count":3,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1668545123,"creation_date":1668543180,"answer_id":74451627,"question_id":74451565,"body_markdown":"You can make a stream of the indices of the array instead, from 0 to `arr.length` (exclusive):\r\n\r\n    Optional&lt;Integer&gt; minIndex = IntStream.range(0, arr.length).boxed()\r\n        .min(Comparator.comparingDouble(i -&gt; arr[i]));\r\n\r\nNote that this is an optional, as the array could be empty. Also, when there are multiple minimums, it is not specified which one&#39;s index it will return. In the implementation that I&#39;m using (OpenJDK 17), it returns the first one&#39;s index.\r\n\r\nIf you want to control which minimum&#39;s index you get, you can do:\r\n\r\n    Optional&lt;Integer&gt; minIndex = IntStream.range(0, arr.length).boxed().reduce(\r\n        // gets the first one&#39;s:\r\n        (a, b) -&gt; arr[a] &lt;= arr[b] ? a : b\r\n        // gets the last one&#39;s:\r\n        // (a, b) -&gt; arr[a] &lt; arr[b] ? a : b\r\n    );","title":"How to get the index of Arrays.stream(array).min()?","body":"<p>You can make a stream of the indices of the array instead, from 0 to <code>arr.length</code> (exclusive):</p>\n<pre><code>Optional&lt;Integer&gt; minIndex = IntStream.range(0, arr.length).boxed()\n    .min(Comparator.comparingDouble(i -&gt; arr[i]));\n</code></pre>\n<p>Note that this is an optional, as the array could be empty. Also, when there are multiple minimums, it is not specified which one's index it will return. In the implementation that I'm using (OpenJDK 17), it returns the first one's index.</p>\n<p>If you want to control which minimum's index you get, you can do:</p>\n<pre><code>Optional&lt;Integer&gt; minIndex = IntStream.range(0, arr.length).boxed().reduce(\n    // gets the first one's:\n    (a, b) -&gt; arr[a] &lt;= arr[b] ? a : b\n    // gets the last one's:\n    // (a, b) -&gt; arr[a] &lt; arr[b] ? a : b\n);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1668545182,"post_id":74451832,"comment_id":131430552,"body_markdown":"Additionally (well, this is just my opinion, others might disagree), this kind of reduction in particular is almost unreadable. A solution with intermediate object and `IntStream` mimicking the for loop will be much cleaner, more readable and less error prone.","body":"Additionally (well, this is just my opinion, others might disagree), this kind of reduction in particular is almost unreadable. A solution with intermediate object and <code>IntStream</code> mimicking the for loop will be much cleaner, more readable and less error prone."},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1668546308,"post_id":74451832,"comment_id":131430914,"body_markdown":"@Chaosfire This task of finding the index using a stream has no practical value, and can be useful only as an exercise that allows to get familiar with the API. And I think this code demonstrates the capabilities of the API well, and it&#39;s **not** easy to grasp (I didn&#39;t tell the opposite). BTW, does [this](http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/util/stream/Collectors.java#l516) resemble you something? I think mimicking a `for`-loop is **harmful** while learning, unless the learner doesn&#39;t want to develop a bad habit.","body":"@Chaosfire This task of finding the index using a stream has no practical value, and can be useful only as an exercise that allows to get familiar with the API. And I think this code demonstrates the capabilities of the API well, and it&#39;s <b>not</b> easy to grasp (I didn&#39;t tell the opposite). BTW, does <a href=\"http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/util/stream/Collectors.java#l516\" rel=\"nofollow noreferrer\">this</a> resemble you something? I think mimicking a <code>for</code>-loop is <b>harmful</b> while learning, unless the learner doesn&#39;t want to develop a bad habit."},{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1668549996,"post_id":74451832,"comment_id":131431943,"body_markdown":"You have a point, but a new learner will have a very hard time figuring out what does this code do. If the point is to get familiar with the Stream API capabilities, the simpler, the better. Also at least in java 17, this does not work with parallel streams (and that&#39;s where streams really shine), i get a wrong index with parallel execution.","body":"You have a point, but a new learner will have a very hard time figuring out what does this code do. If the point is to get familiar with the Stream API capabilities, the simpler, the better. Also at least in java 17, this does not work with parallel streams (and that&#39;s where streams really shine), i get a wrong index with parallel execution."},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1668556864,"post_id":74451832,"comment_id":131433378,"body_markdown":"@Chaosfire Fixed. Source array is too, spliterator was feed only one element to every thread, for that reason accumulated index remained to be zero.","body":"@Chaosfire Fixed. Source array is too, spliterator was feed only one element to every thread, for that reason accumulated index remained to be zero."},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1668557588,"post_id":74451832,"comment_id":131433511,"body_markdown":"@Chaosfire Yes, simple things are great because they allow speed up the learning process, but challenges are inevitable (*and even necessary*) if one wants to learn something in depth, none can eat only candies. I disagree with your initial phrase about cleanness, there&#39;s nothing &quot;clean&quot; in iterating over array&#39;s indices with a stream, in such case *clean-coding recipe:* **don&#39;t mimic `for`-loop, use `for`-loop**. Too many beginners have a misconception that streams are just a fancy way of writing loops, it&#39;s important to emphasize that they belong to different worlds and don&#39;t match 1:1.","body":"@Chaosfire Yes, simple things are great because they allow speed up the learning process, but challenges are inevitable (<i>and even necessary</i>) if one wants to learn something in depth, none can eat only candies. I disagree with your initial phrase about cleanness, there&#39;s nothing &quot;clean&quot; in iterating over array&#39;s indices with a stream, in such case <i>clean-coding recipe:</i> <b>don&#39;t mimic <code>for</code>-loop, use <code>for</code>-loop</b>. Too many beginners have a misconception that streams are just a fancy way of writing loops, it&#39;s important to emphasize that they belong to different worlds and don&#39;t match 1:1."}],"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1668625318,"creation_date":1668544321,"answer_id":74451832,"question_id":74451565,"body_markdown":"Here&#39;s how it can be done without iterating over the array indices and trying to mimic `for`-loop with a stream.\r\n\r\nAnd we can also grab the actual minimal value along the way.\r\n\r\nFor that we can use [`DoubleStream.collect()`][collect] which expects three arguments:\r\n\r\n* `Supplier&lt;R&gt;` *supplier* - provides a mutable object which would serve as a container of data;\r\n* `ObjDoubleConsumer&lt;R&gt;` *accumulator* - determines how stream elements should be accumulated in the mutable collector provided by the *supplier*;\r\n* `BiConsumer&lt;R,R&gt;` *combiner* - combines partial results while executing the stream in parallel.\r\n\r\nAs a mutable container which should be provided by the supplier we can use an array `double[]` (*if you have a look at the source code of Collectors that are intended to accumulate primitive values, namely* `summingInt()`, `summingDouble()`, etc. *you would probably find some similarities*).\r\n\r\n```\r\ndouble[] arr = {263.5, 393.75, 5.0, 289.75};\r\n        \r\ndouble[] min = Arrays.stream(arr)\r\n    .collect(\r\n        () -&gt; new double[]{0, -1, 0},    // supplier\r\n        (double[] res, double next) -&gt; { // accumulator\r\n            res[2]++; // element count\r\n            if (res[1] == -1 || res[0] &gt; next) {\r\n                res[0] = next;          // min value\r\n                res[1] = res[2] - 1;    // corresponding index (element count - 1)\r\n            }\r\n        },\r\n        (left, right) -&gt; {              // combiner\r\n            if (left[0] &gt; right[0]) {\r\n                left[0] = right[0];\r\n                left[1] = left[2] + right[1];\r\n            }\r\n            left[2] += right[2];\r\n        }\r\n    );\r\n        \r\nSystem.out.printf(&quot;Min value is %s at index: %d&quot;, min[0], (int) min[1]);\r\n```\r\n\r\n*Output:*\r\n\r\n```\r\nMin value is 5.0 at index: 2\r\n```\r\n\r\nThe logic for determining the min value and tracking the number of consumed elements shown above can be encapsulated into a `class` (as suggested by *@Holger*) which would be used as the accumulation type instread of array.\r\n\r\nFor convenience, I&#39;ve implemented [`DoubleConsumer`][dConsumer] interface, its method `accept()` would be used to implement *accumulator*. And method `merge()` would be used in the *combiner*.\r\n\r\n    public static class MinValueAndIndex implements DoubleConsumer {\r\n        private int totalCount;\r\n        private int index;\r\n        private double min;\r\n    \r\n        @Override\r\n        public void accept(double value) {\r\n            if (totalCount == 0 || value &lt; min) {\r\n                min = value;\r\n                index = totalCount;\r\n            }\r\n            totalCount++;\r\n        }\r\n        \r\n        public void merge(MinValueAndIndex other) {\r\n            if (min &gt; other.min) {\r\n                min = other.min;\r\n                index = totalCount + other.index;\r\n            }\r\n            totalCount += other.totalCount;\r\n        }\r\n        \r\n        // getters\r\n    }\r\n\r\nThe stream would look like that:\r\n\r\n```\r\ndouble[] arr = {263.5, 393.75, 5.0, 289.75};\r\n        \r\nMinValueAndIndex valueIndex = Arrays.stream(arr)\r\n    .collect(\r\n        MinValueAndIndex::new,\r\n        MinValueAndIndex::accept,\r\n        MinValueAndIndex::merge\r\n    );\r\n    \r\nSystem.out.printf(&quot;Min value is %s at index: %d&quot;, valueIndex.getMin(), valueIndex.getIndex());\r\n```\r\n\r\n*Output:*\r\n\r\n```\r\nMin value is 5.0 at index: 2\r\n```\r\n\r\n\r\n\r\n   [collect]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/DoubleStream.html#collect(java.util.function.Supplier,java.util.function.ObjDoubleConsumer,java.util.function.BiConsumer)\r\n\r\n   [dConsumer]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/DoubleConsumer.html","title":"How to get the index of Arrays.stream(array).min()?","body":"<p>Here's how it can be done without iterating over the array indices and trying to mimic <code>for</code>-loop with a stream.</p>\n<p>And we can also grab the actual minimal value along the way.</p>\n<p>For that we can use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/DoubleStream.html#collect(java.util.function.Supplier,java.util.function.ObjDoubleConsumer,java.util.function.BiConsumer)\" rel=\"nofollow noreferrer\"><code>DoubleStream.collect()</code></a> which expects three arguments:</p>\n<ul>\n<li><code>Supplier&lt;R&gt;</code> <em>supplier</em> - provides a mutable object which would serve as a container of data;</li>\n<li><code>ObjDoubleConsumer&lt;R&gt;</code> <em>accumulator</em> - determines how stream elements should be accumulated in the mutable collector provided by the <em>supplier</em>;</li>\n<li><code>BiConsumer&lt;R,R&gt;</code> <em>combiner</em> - combines partial results while executing the stream in parallel.</li>\n</ul>\n<p>As a mutable container which should be provided by the supplier we can use an array <code>double[]</code> (<em>if you have a look at the source code of Collectors that are intended to accumulate primitive values, namely</em> <code>summingInt()</code>, <code>summingDouble()</code>, etc. <em>you would probably find some similarities</em>).</p>\n<pre><code>double[] arr = {263.5, 393.75, 5.0, 289.75};\n        \ndouble[] min = Arrays.stream(arr)\n    .collect(\n        () -&gt; new double[]{0, -1, 0},    // supplier\n        (double[] res, double next) -&gt; { // accumulator\n            res[2]++; // element count\n            if (res[1] == -1 || res[0] &gt; next) {\n                res[0] = next;          // min value\n                res[1] = res[2] - 1;    // corresponding index (element count - 1)\n            }\n        },\n        (left, right) -&gt; {              // combiner\n            if (left[0] &gt; right[0]) {\n                left[0] = right[0];\n                left[1] = left[2] + right[1];\n            }\n            left[2] += right[2];\n        }\n    );\n        \nSystem.out.printf(&quot;Min value is %s at index: %d&quot;, min[0], (int) min[1]);\n</code></pre>\n<p><em>Output:</em></p>\n<pre><code>Min value is 5.0 at index: 2\n</code></pre>\n<p>The logic for determining the min value and tracking the number of consumed elements shown above can be encapsulated into a <code>class</code> (as suggested by <em>@Holger</em>) which would be used as the accumulation type instread of array.</p>\n<p>For convenience, I've implemented <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/DoubleConsumer.html\" rel=\"nofollow noreferrer\"><code>DoubleConsumer</code></a> interface, its method <code>accept()</code> would be used to implement <em>accumulator</em>. And method <code>merge()</code> would be used in the <em>combiner</em>.</p>\n<pre><code>public static class MinValueAndIndex implements DoubleConsumer {\n    private int totalCount;\n    private int index;\n    private double min;\n\n    @Override\n    public void accept(double value) {\n        if (totalCount == 0 || value &lt; min) {\n            min = value;\n            index = totalCount;\n        }\n        totalCount++;\n    }\n    \n    public void merge(MinValueAndIndex other) {\n        if (min &gt; other.min) {\n            min = other.min;\n            index = totalCount + other.index;\n        }\n        totalCount += other.totalCount;\n    }\n    \n    // getters\n}\n</code></pre>\n<p>The stream would look like that:</p>\n<pre><code>double[] arr = {263.5, 393.75, 5.0, 289.75};\n        \nMinValueAndIndex valueIndex = Arrays.stream(arr)\n    .collect(\n        MinValueAndIndex::new,\n        MinValueAndIndex::accept,\n        MinValueAndIndex::merge\n    );\n    \nSystem.out.printf(&quot;Min value is %s at index: %d&quot;, valueIndex.getMin(), valueIndex.getIndex());\n</code></pre>\n<p><em>Output:</em></p>\n<pre><code>Min value is 5.0 at index: 2\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668585359,"creation_date":1668585359,"answer_id":74456913,"question_id":74451565,"body_markdown":"You can use a custom class to hold together an index and the value at this index. The task to find the index with min value becomes trivial then, and you can find the index and value all at once.\r\n\r\nA record is perfect for this purpose, if you use version before java 14, you can just use normal class.\r\n```\r\npublic record IndexValue(int index, double value) {\r\n}\r\n```\r\nExample usage:\r\n```\r\npublic class Test {\r\n\r\n  public static void main(String[] args) {\r\n    double[] arr = {263.5, 393.75, 5.0, 289.75};\r\n    IndexValue min = IntStream.range(0, arr.length) //stream indexes\r\n            .mapToObj(i -&gt; new IndexValue(i, arr[i])) //map index and value together using the class\r\n            .min(Comparator.comparing(IndexValue::value)) //find minimum by comparing values\r\n            .orElseGet(() -&gt; new IndexValue(-1, Double.MAX_VALUE)); //supply default value suiting your needs, if array was empty\r\n    System.out.println(&quot;Min index value - &quot; + min);\r\n  }\r\n}\r\n```\r\nPrints - `Min index value - IndexValue[index=2, value=5.0]`. All operations in this stream are non-interfering and stateless, and it&#39;s safe for parallel execution.\r\n","title":"How to get the index of Arrays.stream(array).min()?","body":"<p>You can use a custom class to hold together an index and the value at this index. The task to find the index with min value becomes trivial then, and you can find the index and value all at once.</p>\n<p>A record is perfect for this purpose, if you use version before java 14, you can just use normal class.</p>\n<pre><code>public record IndexValue(int index, double value) {\n}\n</code></pre>\n<p>Example usage:</p>\n<pre><code>public class Test {\n\n  public static void main(String[] args) {\n    double[] arr = {263.5, 393.75, 5.0, 289.75};\n    IndexValue min = IntStream.range(0, arr.length) //stream indexes\n            .mapToObj(i -&gt; new IndexValue(i, arr[i])) //map index and value together using the class\n            .min(Comparator.comparing(IndexValue::value)) //find minimum by comparing values\n            .orElseGet(() -&gt; new IndexValue(-1, Double.MAX_VALUE)); //supply default value suiting your needs, if array was empty\n    System.out.println(&quot;Min index value - &quot; + min);\n  }\n}\n</code></pre>\n<p>Prints - <code>Min index value - IndexValue[index=2, value=5.0]</code>. All operations in this stream are non-interfering and stateless, and it's safe for parallel execution.</p>\n"},{"tags":[],"owner":{"account_id":9763630,"reputation":16595,"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668705421,"creation_date":1668674345,"answer_id":74472380,"question_id":74451565,"body_markdown":"I think the following solution should be preferred, as in 1 iteration of the stream you collect both the required index and the required value.\r\n\r\n    double arr[] = {263.5, 393.75, 5.0, 289.75};\r\n\r\n    Optional&lt;Map.Entry&lt;Integer, Double&gt;&gt; keyValueOpt = IntStream.range(0, arr.length)\r\n                  .mapToObj(i -&gt; Map.entry(i,arr[i]))\r\n                  .min(Map.Entry.comparingByValue());\r\n    \r\n    keyValueOpt.ifPresent(keyValue -&gt; System.out.println(String.format(&quot;Index %s with min value %s&quot;, keyValue.getKey(), keyValue.getValue())));\r\n\r\n[![enter image description here][1]][1]\r\n\r\nYou also don&#39;t need any new classes to be introduced to your code as the `Map.Entry(K k, V v)` fits the role of keeping a single pair of Key, Value to your result.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/d9ky8.png","title":"How to get the index of Arrays.stream(array).min()?","body":"<p>I think the following solution should be preferred, as in 1 iteration of the stream you collect both the required index and the required value.</p>\n<pre><code>double arr[] = {263.5, 393.75, 5.0, 289.75};\n\nOptional&lt;Map.Entry&lt;Integer, Double&gt;&gt; keyValueOpt = IntStream.range(0, arr.length)\n              .mapToObj(i -&gt; Map.entry(i,arr[i]))\n              .min(Map.Entry.comparingByValue());\n\nkeyValueOpt.ifPresent(keyValue -&gt; System.out.println(String.format(&quot;Index %s with min value %s&quot;, keyValue.getKey(), keyValue.getValue())));\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/d9ky8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/d9ky8.png\" alt=\"enter image description here\" /></a></p>\n<p>You also don't need any new classes to be introduced to your code as the <code>Map.Entry(K k, V v)</code> fits the role of keeping a single pair of Key, Value to your result.</p>\n"}],"owner":{"account_id":26383274,"reputation":97,"user_id":20036187,"display_name":"fujitsu fiji"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":357,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":5,"score":5,"last_activity_date":1668705421,"creation_date":1668542860,"question_id":74451565,"body_markdown":"I want to get the index of min, I tried ways like getIndexOf etc. but none of them worked. How can I do this?\r\n```\r\nimport java.util.Arrays;\r\nclass getIndexOfMin {\r\n    public static void main(String[] args) {\r\n\r\n        double arr[] = {263.5, 393.75, 5.0, 289.75};\r\n\r\n        double min = Arrays.stream(arr).min().getAsDouble();\r\n        \r\n        System.out.println(min);\r\n    }\r\n}\r\n```","title":"How to get the index of Arrays.stream(array).min()?","body":"<p>I want to get the index of min, I tried ways like getIndexOf etc. but none of them worked. How can I do this?</p>\n<pre><code>import java.util.Arrays;\nclass getIndexOfMin {\n    public static void main(String[] args) {\n\n        double arr[] = {263.5, 393.75, 5.0, 289.75};\n\n        double min = Arrays.stream(arr).min().getAsDouble();\n        \n        System.out.println(min);\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","maven"],"comments":[{"owner":{"account_id":5179087,"reputation":3769,"user_id":4145291,"accept_rate":40,"display_name":"BarrySW19"},"score":1,"creation_date":1668705517,"post_id":74479539,"comment_id":131476773,"body_markdown":"It&#39;s probably a dependency of a dependency (of a dependency, etc).","body":"It&#39;s probably a dependency of a dependency (of a dependency, etc)."},{"owner":{"account_id":5193931,"reputation":419,"user_id":4155906,"accept_rate":31,"display_name":"Thejas"},"score":0,"creation_date":1668706780,"post_id":74479539,"comment_id":131477242,"body_markdown":"Found it . I did a maven dependency:tree and was able to locate the dependency inside a dependency","body":"Found it . I did a maven dependency:tree and was able to locate the dependency inside a dependency"}],"owner":{"account_id":5193931,"reputation":419,"user_id":4155906,"accept_rate":31,"display_name":"Thejas"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1668705358,"creation_date":1668705358,"question_id":74479539,"body_markdown":"I am trying to find the dependencies in maven project using the command\r\n\r\n    mvn dependency:tree | grep dependencyname\r\n\r\nI am able to see the dependency ie\r\n\r\n    [INFO] | +-dependencygroupId:dependencyartifactId:jar:2.2.0.0:compile\r\n\r\nbut I am unable to find the same in any of the pom.xml nor in any file search inside the project.\r\nCan some one tell me how to resolve this\r\n","title":"Unable to locate the dependencies while resolving the xray Violations","body":"<p>I am trying to find the dependencies in maven project using the command</p>\n<pre><code>mvn dependency:tree | grep dependencyname\n</code></pre>\n<p>I am able to see the dependency ie</p>\n<pre><code>[INFO] | +-dependencygroupId:dependencyartifactId:jar:2.2.0.0:compile\n</code></pre>\n<p>but I am unable to find the same in any of the pom.xml nor in any file search inside the project.\nCan some one tell me how to resolve this</p>\n"},{"tags":["java","cassandra"],"comments":[{"owner":{"account_id":14411493,"reputation":946,"user_id":10410162,"display_name":"Madhavan"},"score":0,"creation_date":1668738358,"post_id":74477587,"comment_id":131485266,"body_markdown":"Hi @Aparna, could you please update your original post/question with the version of the Cassandra that you&#39;re running along with the driver maven coordinates to help readers triage this better? TY!","body":"Hi @Aparna, could you please update your original post/question with the version of the Cassandra that you&#39;re running along with the driver maven coordinates to help readers triage this better? TY!"},{"owner":{"account_id":26963950,"reputation":1,"user_id":20531164,"display_name":"Ramya"},"score":0,"creation_date":1668748594,"post_id":74477587,"comment_id":131486591,"body_markdown":"@Madhavan : Cassandra version : V.6.8.0","body":"@Madhavan : Cassandra version : V.6.8.0"},{"owner":{"account_id":14411493,"reputation":946,"user_id":10410162,"display_name":"Madhavan"},"score":0,"creation_date":1668776455,"post_id":74477587,"comment_id":131494481,"body_markdown":"Thank you. I understand you&#39;re leveraging [DataStax Enterprise (DSE) version `6.8.0`](https://www.datastax.com/products/datastax-enterprise) here. How about the programming language, and driver versions? Unreleated, but just to let you know that `6.8.0` is super old version and the latest version as of this writing is `6.8.29`. See [the DSE `6.8` release notes here](https://github.com/datastax/release-notes/blob/master/DSE_6.8_Release_Notes.md#release-notes-for-datastax-enterprise-68) &amp; [patch release documentation](https://docs.datastax.com) for additional details.","body":"Thank you. I understand you&#39;re leveraging <a href=\"https://www.datastax.com/products/datastax-enterprise\" rel=\"nofollow noreferrer\">DataStax Enterprise (DSE) version <code>6.8.0</code></a> here. How about the programming language, and driver versions? Unreleated, but just to let you know that <code>6.8.0</code> is super old version and the latest version as of this writing is <code>6.8.29</code>. See <a href=\"https://github.com/datastax/release-notes/blob/master/DSE_6.8_Release_Notes.md#release-notes-for-datastax-enterprise-68\" rel=\"nofollow noreferrer\">the DSE <code>6.8</code> release notes here</a> &amp; <a href=\"https://docs.datastax.com\" rel=\"nofollow noreferrer\">patch release documentation</a> for additional details."}],"owner":{"account_id":26963950,"reputation":1,"user_id":20531164,"display_name":"Ramya"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1668705240,"creation_date":1668697148,"question_id":74477587,"body_markdown":"How to access the fields inside the `primarykeyclass` with `@query` annotation?\r\n\r\nEntity\r\n\r\n```java\r\n@Table(value = &quot;table1&quot;)\r\n@Data\r\npublic class DTable implements Serializable {\r\n\t@PrimaryKey\r\n\tpublic CassandraPrimaryKeyclass key;\r\n\r\n\t@Column(&quot;CREATED_TMSTAMP&quot;)\r\n\tprivate String createdTimeStamp;\r\n}\r\n```\r\n\r\n```\r\n@PrimaryKeyClass\r\npublic class CassandraPrimaryKeyclass implements Serializable  {\r\n\t@PrimaryKeyColumn(name = &quot;KEY_NAME&quot;, ordinal = 0, type = PrimaryKeyType.PARTITIONED)\r\n\tpublic String serviceKeyName;\r\n\r\n\t@PrimaryKeyColumn(name = &quot;KEY_VALUE&quot;, ordinal = 0, type = PrimaryKeyType.PARTITIONED)\r\n\tpublic String serviceKeyValue;\r\n\r\n\t@PrimaryKeyColumn(name =&quot;EMP_ID&quot;,ordinal = 0, type = PrimaryKeyType.CLUSTERED)\r\n\tpublic String empID;\t\r\n}\r\n```\r\n\r\nRepository:\r\n\r\n```\r\n@Query(&quot;select key.EMP_ID from table1 WHERE KEY_NAME=?0 AND KEY_VALUE=?1 )\r\n\tpublic Mono&lt;KeyValuePair&gt; ParllelMultireadkeyValue(String serviceKeyName, String serviceKeyValue);\r\n```\r\n\r\nThis throws \r\n\r\n&gt; Could not find field for property during fallback access!\r\n\r\nHow to access the column in the Primary key class?\r\n","title":"Retrieve Primaryclass column in cassandra - Could not find field for property during fallback access","body":"<p>How to access the fields inside the <code>primarykeyclass</code> with <code>@query</code> annotation?</p>\n<p>Entity</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Table(value = &quot;table1&quot;)\n@Data\npublic class DTable implements Serializable {\n    @PrimaryKey\n    public CassandraPrimaryKeyclass key;\n\n    @Column(&quot;CREATED_TMSTAMP&quot;)\n    private String createdTimeStamp;\n}\n</code></pre>\n<pre><code>@PrimaryKeyClass\npublic class CassandraPrimaryKeyclass implements Serializable  {\n    @PrimaryKeyColumn(name = &quot;KEY_NAME&quot;, ordinal = 0, type = PrimaryKeyType.PARTITIONED)\n    public String serviceKeyName;\n\n    @PrimaryKeyColumn(name = &quot;KEY_VALUE&quot;, ordinal = 0, type = PrimaryKeyType.PARTITIONED)\n    public String serviceKeyValue;\n\n    @PrimaryKeyColumn(name =&quot;EMP_ID&quot;,ordinal = 0, type = PrimaryKeyType.CLUSTERED)\n    public String empID;    \n}\n</code></pre>\n<p>Repository:</p>\n<pre><code>@Query(&quot;select key.EMP_ID from table1 WHERE KEY_NAME=?0 AND KEY_VALUE=?1 )\n    public Mono&lt;KeyValuePair&gt; ParllelMultireadkeyValue(String serviceKeyName, String serviceKeyValue);\n</code></pre>\n<p>This throws</p>\n<blockquote>\n<p>Could not find field for property during fallback access!</p>\n</blockquote>\n<p>How to access the column in the Primary key class?</p>\n"},{"tags":["java","spring","tomcat","tomcat6"],"comments":[{"owner":{"account_id":95910,"reputation":238649,"user_id":260990,"accept_rate":81,"display_name":"jmj"},"score":1,"creation_date":1394744800,"post_id":22390818,"comment_id":34040728,"body_markdown":"possible duplicate of [Java EE Enterprise Application: perform some action on deploy/startup](http://stackoverflow.com/questions/6120831/java-ee-enterprise-application-perform-some-action-on-deploy-startup)    You can use WebContextListener that will give you exact this thing","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/6120831/java-ee-enterprise-application-perform-some-action-on-deploy-startup\">Java EE Enterprise Application: perform some action on deploy/startup</a>    You can use WebContextListener that will give you exact this thing"},{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1394745273,"post_id":22390818,"comment_id":34041003,"body_markdown":"@JigarJoshi A `ServletContextListener` is run before any `Filter` or `Servlet` instances are initialized. I think OP wants the whole web application.","body":"@JigarJoshi A <code>ServletContextListener</code> is run before any <code>Filter</code> or <code>Servlet</code> instances are initialized. I think OP wants the whole web application."},{"owner":{"account_id":95910,"reputation":238649,"user_id":260990,"accept_rate":81,"display_name":"jmj"},"score":0,"creation_date":1394746366,"post_id":22390818,"comment_id":34041594,"body_markdown":"@Sot I don&#39;t think OP want to initialize all servlet and filter, consider that there are some url patterns which gets hit only in certain cases (for example user is admin and logged in) how would that specific servlet (if configured) will get loaded without attempting to knock that URL","body":"@Sot I don&#39;t think OP want to initialize all servlet and filter, consider that there are some url patterns which gets hit only in certain cases (for example user is admin and logged in) how would that specific servlet (if configured) will get loaded without attempting to knock that URL"},{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1394746474,"post_id":22390818,"comment_id":34041651,"body_markdown":"@JigarJoshi How are you interpreting `I would prefer to get notification back to each applications once all the applications are started`?","body":"@JigarJoshi How are you interpreting <code>I would prefer to get notification back to each applications once all the applications are started</code>?"},{"owner":{"account_id":95910,"reputation":238649,"user_id":260990,"accept_rate":81,"display_name":"jmj"},"score":0,"creation_date":1394746526,"post_id":22390818,"comment_id":34041677,"body_markdown":"@Sot I understand that OP&#39;s container has 8 different web application that gets started and OP wants an action that flags on each application&#39;s startup","body":"@Sot I understand that OP&#39;s container has 8 different web application that gets started and OP wants an action that flags on each application&#39;s startup"},{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1394746597,"post_id":22390818,"comment_id":34041721,"body_markdown":"@JigarJoshi I don&#39;t think `once all the applications are started` means _on each application&#39;s startup_. In any case, the application hasn&#39;t started when `ServletContextListener#contextInitialized(..)` is called.","body":"@JigarJoshi I don&#39;t think <code>once all the applications are started</code> means <i>on each application&#39;s startup</i>. In any case, the application hasn&#39;t started when <code>ServletContextListener#contextInitialized(..)</code> is called."},{"owner":{"account_id":95910,"reputation":238649,"user_id":260990,"accept_rate":81,"display_name":"jmj"},"score":0,"creation_date":1394746677,"post_id":22390818,"comment_id":34041761,"body_markdown":"@Sot on successful context initialization that particular app has been started, if OP can do it for all the apps he can confirm that all of his web context have been initialized successfully","body":"@Sot on successful context initialization that particular app has been started, if OP can do it for all the apps he can confirm that all of his web context have been initialized successfully"},{"owner":{"account_id":1336531,"reputation":9732,"user_id":1279145,"accept_rate":83,"display_name":"Karthik Prasad"},"score":0,"creation_date":1394774381,"post_id":22390818,"comment_id":34050791,"body_markdown":"@JigarJoshi You have misunderstood my questiononce all the application started up means once all web the application is started not each application is started. I feel I don&#39;t get better advantage of using servlet context over application context. Both are specific to application not to the server.","body":"@JigarJoshi You have misunderstood my questiononce all the application started up means once all web the application is started not each application is started. I feel I don&#39;t get better advantage of using servlet context over application context. Both are specific to application not to the server."},{"owner":{"account_id":1336531,"reputation":9732,"user_id":1279145,"accept_rate":83,"display_name":"Karthik Prasad"},"score":0,"creation_date":1395041414,"post_id":22390818,"comment_id":34142917,"body_markdown":"@JigarJoshi If you had marked as duplicate could you please unmark. as the question I asked is not the same.","body":"@JigarJoshi If you had marked as duplicate could you please unmark. as the question I asked is not the same."},{"owner":{"account_id":2337701,"reputation":840,"user_id":2049647,"display_name":"ATutorMe"},"score":0,"creation_date":1668573177,"post_id":22390818,"comment_id":131435927,"body_markdown":"According to the [tomcat javadoc](https://tomcat.apache.org/tomcat-9.0-doc/api/constant-values.html#org.apache.catalina.Lifecycle.AFTER_START_EVENT) the String value is actually &#39;after_start&#39;, which is the value of  org.apache.catalina.Lifecycle.AFTER_START_EVENT.","body":"According to the <a href=\"https://tomcat.apache.org/tomcat-9.0-doc/api/constant-values.html#org.apache.catalina.Lifecycle.AFTER_START_EVENT\" rel=\"nofollow noreferrer\">tomcat javadoc</a> the String value is actually &#39;after_start&#39;, which is the value of  org.apache.catalina.Lifecycle.AFTER_START_EVENT."}],"answers":[{"comments":[{"owner":{"account_id":1336531,"reputation":9732,"user_id":1279145,"accept_rate":83,"display_name":"Karthik Prasad"},"score":0,"creation_date":1394774429,"post_id":22390941,"comment_id":34050816,"body_markdown":"Thanks for input let me try","body":"Thanks for input let me try"},{"owner":{"account_id":1336531,"reputation":9732,"user_id":1279145,"accept_rate":83,"display_name":"Karthik Prasad"},"score":0,"creation_date":1394808630,"post_id":22390941,"comment_id":34070270,"body_markdown":"Can you please let me know how to hook it? Please let me know by Tomcat components?","body":"Can you please let me know how to hook it? Please let me know by Tomcat components?"},{"owner":{"account_id":1336531,"reputation":9732,"user_id":1279145,"accept_rate":83,"display_name":"Karthik Prasad"},"score":0,"creation_date":1395041346,"post_id":22390941,"comment_id":34142886,"body_markdown":"But, how I can delegate event to my application. I do not find a way to use it in my application. I can use it only if there is a mechanism where web application can register for tomcat events. Is there any way for such case?","body":"But, how I can delegate event to my application. I do not find a way to use it in my application. I can use it only if there is a mechanism where web application can register for tomcat events. Is there any way for such case?"},{"owner":{"account_id":699650,"reputation":16447,"user_id":1299005,"display_name":"Mark Thomas"},"score":0,"creation_date":1395044042,"post_id":22390941,"comment_id":34143861,"body_markdown":"The simplest way to expose this is via static flag on your listener that your web application can then check.","body":"The simplest way to expose this is via static flag on your listener that your web application can then check."},{"owner":{"account_id":1336531,"reputation":9732,"user_id":1279145,"accept_rate":83,"display_name":"Karthik Prasad"},"score":0,"creation_date":1395048600,"post_id":22390941,"comment_id":34145997,"body_markdown":"Thanks a lot for your suggestion. I implemented using file . My tomcat listener class would create started.txt file and since shutdown can occur for application( an application can be stopped) I sued springs application context  events). and also shutdown will remove the file( While starting in application I check if file is existing, if exists check if file was not created before 2minutes to avoid tomcat kill process)","body":"Thanks a lot for your suggestion. I implemented using file . My tomcat listener class would create started.txt file and since shutdown can occur for application( an application can be stopped) I sued springs application context  events). and also shutdown will remove the file( While starting in application I check if file is existing, if exists check if file was not created before 2minutes to avoid tomcat kill process)"}],"tags":[],"owner":{"account_id":699650,"reputation":16447,"user_id":1299005,"display_name":"Mark Thomas"},"comment_count":5,"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1394810153,"creation_date":1394744862,"answer_id":22390941,"question_id":22390818,"body_markdown":"All of the major Tomcat components implement `org.apache.catalina.Lifecycle` which includes the ability to add a `org.apache.catalina.LifecycleListener`. It sounds like you want the `AFTER_START_EVENT` of the `Host`.\r\n\r\nYou configure the listener in server.xml like this:\r\n\r\n    &lt;Host ... &gt;\r\n      &lt;Listener className=&quot;your.package.KPTomcatListener&quot;/&gt;\r\n      &lt;!-- Other nested elements go here --&gt;\r\n    &lt;/Host&gt;\r\n\r\nThe class must be packaged in a JAR and the JAR placed in Tomcat&#39;s lib directory.","title":"Callback on Tomcat server startup complete","body":"<p>All of the major Tomcat components implement <code>org.apache.catalina.Lifecycle</code> which includes the ability to add a <code>org.apache.catalina.LifecycleListener</code>. It sounds like you want the <code>AFTER_START_EVENT</code> of the <code>Host</code>.</p>\n\n<p>You configure the listener in server.xml like this:</p>\n\n<pre><code>&lt;Host ... &gt;\n  &lt;Listener className=\"your.package.KPTomcatListener\"/&gt;\n  &lt;!-- Other nested elements go here --&gt;\n&lt;/Host&gt;\n</code></pre>\n\n<p>The class must be packaged in a JAR and the JAR placed in Tomcat's lib directory.</p>\n"},{"tags":[],"owner":{"account_id":6720924,"reputation":5542,"user_id":5180989,"display_name":"Helder Pereira"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1523967716,"creation_date":1523967716,"answer_id":49878025,"question_id":22390818,"body_markdown":"In case someone wants to do it programmatically (if using embedded Tomcat for example):\r\n\r\n    Tomcat tomcat = new Tomcat();\r\n    ...\r\n    tomcat.getServer().addLifecycleListener(new KPTomcatListener());\r\n    tomcat.start()\r\n","title":"Callback on Tomcat server startup complete","body":"<p>In case someone wants to do it programmatically (if using embedded Tomcat for example):</p>\n\n<pre><code>Tomcat tomcat = new Tomcat();\n...\ntomcat.getServer().addLifecycleListener(new KPTomcatListener());\ntomcat.start()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2337701,"reputation":840,"user_id":2049647,"display_name":"ATutorMe"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668573769,"creation_date":1668573769,"answer_id":74455280,"question_id":22390818,"body_markdown":"Following on from Helder&#39;s post of embedded Tomcat, you can also handle this in a lambda:\r\n\r\n```java\r\ntomcat.getServer().addLifecycleListener((LifecycleEvent e) -&gt; {\r\n  if (e.getType().equals(AFTER_START_EVENT)) {\r\n    // do something\r\n  }\r\n});\r\n```","title":"Callback on Tomcat server startup complete","body":"<p>Following on from Helder's post of embedded Tomcat, you can also handle this in a lambda:</p>\n<pre class=\"lang-java prettyprint-override\"><code>tomcat.getServer().addLifecycleListener((LifecycleEvent e) -&gt; {\n  if (e.getType().equals(AFTER_START_EVENT)) {\n    // do something\n  }\n});\n</code></pre>\n"}],"owner":{"account_id":1336531,"reputation":9732,"user_id":1279145,"accept_rate":83,"display_name":"Karthik Prasad"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6506,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":22390941,"answer_count":3,"score":4,"last_activity_date":1668704208,"creation_date":1394744471,"question_id":22390818,"body_markdown":"Is there any mechanism, lifecycle event or callbacks, in Spring or Tomcat to notify once Tomcat server startup is completed? (I have 8 web applications and queues configured. I would prefer to get notification back to each application once all the applications are started.) I know Spring has the application listener, which can be used once the web application is initialized. But I cannot use it in my case because I would prefer to get a notification once all the web apps are initialized.  \r\n\r\n\r\n******EDITED*******\r\n\r\nI&#39;ve implemented a Tomcat listener to log the message, but I have absolutely no idea where to hook this listener.\r\n\r\nI tried to create this bean using Spring and also adding the listener to web.xml both did not work.\r\n\r\nHere is my code:\r\n\r\n    public class KPTomcatListener implements LifecycleListener {\r\n    \r\n    \tprivate static final Logger LOG = LoggerFactory.getLogger(KPTomcatListener.class);\r\n    \t/**\r\n    \t * All the events of tomcat\r\n         * See: https://tomcat.apache.org/tomcat-10.0-doc/api/constant-values.html\r\n         * AFTER_DESTROY_EVENT     &quot;after_destroy&quot;\r\n         * AFTER_INIT_EVENT     &quot;after_init&quot;\r\n         * AFTER_START_EVENT     &quot;after_start&quot;\r\n         * AFTER_STOP_EVENT     &quot;after_stop&quot;\r\n         * BEFORE_DESTROY_EVENT     &quot;before_destroy&quot;\r\n         * BEFORE_INIT_EVENT     &quot;before_init&quot;\r\n         * BEFORE_START_EVENT     &quot;before_start&quot;\r\n         * BEFORE_STOP_EVENT     &quot;before_stop&quot;\r\n         * CONFIGURE_START_EVENT     &quot;configure_start&quot;\r\n         * CONFIGURE_STOP_EVENT     &quot;configure_stop&quot;\r\n         * PERIODIC_EVENT     &quot;periodic&quot;\r\n         * START_EVENT     &quot;start&quot;\r\n         * STOP_EVENT     &quot;stop&quot;\r\n    \t */\r\n    \tprivate static int counter;\r\n    \t\r\n    \t@Override\r\n    \tpublic void lifecycleEvent(LifecycleEvent arg0) {\r\n    \t\tString event = arg0.getType();\r\n    \t\tLOG.debug(&quot;Tomcat Events: &quot; + (++counter) + &quot; :: &quot; + event);\r\n    \t\tif(event.equals(org.apache.catalina.Lifecycle.AFTER_START_EVENT)) { // or &quot;after_start&quot;\r\n    \t\t\tLOG.debug(&quot;Hey I&#39;ve started&quot;);\r\n    \t\t}\r\n    \t}\r\n    \r\n    }","title":"Callback on Tomcat server startup complete","body":"<p>Is there any mechanism, lifecycle event or callbacks, in Spring or Tomcat to notify once Tomcat server startup is completed? (I have 8 web applications and queues configured. I would prefer to get notification back to each application once all the applications are started.) I know Spring has the application listener, which can be used once the web application is initialized. But I cannot use it in my case because I would prefer to get a notification once all the web apps are initialized.</p>\n<p><strong><strong><strong>EDITED</strong></strong></strong>*</p>\n<p>I've implemented a Tomcat listener to log the message, but I have absolutely no idea where to hook this listener.</p>\n<p>I tried to create this bean using Spring and also adding the listener to web.xml both did not work.</p>\n<p>Here is my code:</p>\n<pre><code>public class KPTomcatListener implements LifecycleListener {\n\n    private static final Logger LOG = LoggerFactory.getLogger(KPTomcatListener.class);\n    /**\n     * All the events of tomcat\n     * See: https://tomcat.apache.org/tomcat-10.0-doc/api/constant-values.html\n     * AFTER_DESTROY_EVENT     &quot;after_destroy&quot;\n     * AFTER_INIT_EVENT     &quot;after_init&quot;\n     * AFTER_START_EVENT     &quot;after_start&quot;\n     * AFTER_STOP_EVENT     &quot;after_stop&quot;\n     * BEFORE_DESTROY_EVENT     &quot;before_destroy&quot;\n     * BEFORE_INIT_EVENT     &quot;before_init&quot;\n     * BEFORE_START_EVENT     &quot;before_start&quot;\n     * BEFORE_STOP_EVENT     &quot;before_stop&quot;\n     * CONFIGURE_START_EVENT     &quot;configure_start&quot;\n     * CONFIGURE_STOP_EVENT     &quot;configure_stop&quot;\n     * PERIODIC_EVENT     &quot;periodic&quot;\n     * START_EVENT     &quot;start&quot;\n     * STOP_EVENT     &quot;stop&quot;\n     */\n    private static int counter;\n    \n    @Override\n    public void lifecycleEvent(LifecycleEvent arg0) {\n        String event = arg0.getType();\n        LOG.debug(&quot;Tomcat Events: &quot; + (++counter) + &quot; :: &quot; + event);\n        if(event.equals(org.apache.catalina.Lifecycle.AFTER_START_EVENT)) { // or &quot;after_start&quot;\n            LOG.debug(&quot;Hey I've started&quot;);\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":["java","algorithm","sorting","insertion-sort"],"comments":[{"owner":{"account_id":1674243,"reputation":10078,"user_id":1553537,"accept_rate":29,"display_name":"Giorgi Tsiklauri"},"score":2,"creation_date":1598692080,"post_id":63645255,"comment_id":112545889,"body_markdown":"Generally, in pretty much all programming languages, it doesn&#39;t matter whether you chose to use `for` or `while`. Under the hood, they implement the same semantics - *do something until some condition*. The difference lies in the practicality - when one is more convenient (readable, clean) over another. Also, some personal preference.","body":"Generally, in pretty much all programming languages, it doesn&#39;t matter whether you chose to use <code>for</code> or <code>while</code>. Under the hood, they implement the same semantics - <i>do something until some condition</i>. The difference lies in the practicality - when one is more convenient (readable, clean) over another. Also, some personal preference."},{"owner":{"account_id":18152416,"reputation":377,"user_id":13204939,"display_name":"TanDev"},"score":0,"creation_date":1598695426,"post_id":63645255,"comment_id":112546687,"body_markdown":"Thanks Giorgi. You are right for personal preference. I liked the for loop readability and usability better.","body":"Thanks Giorgi. You are right for personal preference. I liked the for loop readability and usability better."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1598704871,"post_id":63645255,"comment_id":112548971,"body_markdown":"Your solution isn&#39;t equivalent, or as good, and it&#39;s pretty rich to claim that *all* solutions except yours use a `while` loop.","body":"Your solution isn&#39;t equivalent, or as good, and it&#39;s pretty rich to claim that <i>all</i> solutions except yours use a <code>while</code> loop."}],"answers":[{"tags":[],"owner":{"account_id":17033694,"reputation":4572,"user_id":12323248,"display_name":"akuzminykh"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1598699459,"creation_date":1598699459,"answer_id":63646300,"question_id":63645255,"body_markdown":"Usually, when developing algorithms, you choose a loop based on this:\r\n\r\n- If the number of iterations is known, use a for-loop.\r\n- If the number of iterations is *not* known, use a while-loop.\r\n\r\nIn Java, and other languages, you can implement the same thing using both loops. It doesn&#39;t matter if the number of iterations is known. However, it makes sense, it&#39;s more readable/logical:\r\n\r\n- ... *for* a known starting value to a known limit do ...\r\n- ... *while* a condition is true do ...\r\n\r\nIn [pseudocode](https://en.wikipedia.org/wiki/Pseudocode), which is a way to describe an algorithm independently of implementation-details, it&#39;s often done just like that (or similar):\r\n\r\n```\r\nfor i = 0 to n do\r\n    ...\r\n```\r\n\r\n```\r\nwhile condition do\r\n    ...\r\n```\r\n\r\nWhen you look at `sort`, you can see two loops: the outer for-loop and the inner while-loop.\r\n\r\n- The outer loop is a for-loop because `i` and `n` are known. Value `n` is known because it&#39;s given by the size of the array, which is a constant in this algorithm.\r\n- The inner loop is a while-loop because it&#39;s not known when the condition will fail, as it depends on an array-access. You don&#39;t know the values; if you would, then you could sort the array by hardcoding some swaps.","title":"Why does insertion sort work only if we use while as an inner loop and doesnt work for  for loop?","body":"<p>Usually, when developing algorithms, you choose a loop based on this:</p>\n<ul>\n<li>If the number of iterations is known, use a for-loop.</li>\n<li>If the number of iterations is <em>not</em> known, use a while-loop.</li>\n</ul>\n<p>In Java, and other languages, you can implement the same thing using both loops. It doesn't matter if the number of iterations is known. However, it makes sense, it's more readable/logical:</p>\n<ul>\n<li>... <em>for</em> a known starting value to a known limit do ...</li>\n<li>... <em>while</em> a condition is true do ...</li>\n</ul>\n<p>In <a href=\"https://en.wikipedia.org/wiki/Pseudocode\" rel=\"nofollow noreferrer\">pseudocode</a>, which is a way to describe an algorithm independently of implementation-details, it's often done just like that (or similar):</p>\n<pre><code>for i = 0 to n do\n    ...\n</code></pre>\n<pre><code>while condition do\n    ...\n</code></pre>\n<p>When you look at <code>sort</code>, you can see two loops: the outer for-loop and the inner while-loop.</p>\n<ul>\n<li>The outer loop is a for-loop because <code>i</code> and <code>n</code> are known. Value <code>n</code> is known because it's given by the size of the array, which is a constant in this algorithm.</li>\n<li>The inner loop is a while-loop because it's not known when the condition will fail, as it depends on an array-access. You don't know the values; if you would, then you could sort the array by hardcoding some swaps.</li>\n</ul>\n"}],"owner":{"account_id":18152416,"reputation":377,"user_id":13204939,"display_name":"TanDev"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2076,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"closed_date":1598718741,"accepted_answer_id":63646300,"answer_count":1,"score":3,"last_activity_date":1668704032,"creation_date":1598691797,"question_id":63645255,"body_markdown":"I was trying to attempt a insertion algorithm question. However, I had the following question. \r\n\r\nI wanted to nderstand why most solutions online use a nested while loop instead of a nested for loop? I thought it might have to do something with time complexity, however, both have a O(n^2) complexity.\r\n\r\nBelow I have attached the two different solutions\r\n\r\n```\r\n\r\npublic class InsertionSort { \r\n// MY method\r\n    /*Function to sort array using insertion sort*/\r\n    // void sort(int arr[]) \r\n    // { \r\n    //     int n = arr.length; \r\n    //     for (int i = 1; i &lt; n; ++i) { \r\n    //         if(arr[i] &lt; arr[i-1]){\r\n    //             for(int j = 0; j &lt; i; j++){\r\n    //                 if(arr[i] &lt; arr[j]){\r\n    //                     int temp = arr[j];\r\n    //                     arr[j] = arr[i];\r\n    //                     arr[i] = temp;\r\n    //                 }\r\n    //             }\r\n    //         }\r\n    //     } \r\n    // } \r\n\r\n// Online Solution\r\n  \r\n    void sort(int arr[]) \r\n    { \r\n        int n = arr.length; \r\n        for (int i = 1; i &lt; n; ++i) { \r\n            int key = arr[i]; \r\n            int j = i - 1; \r\n  \r\n            /* Move elements of arr[0..i-1], that are \r\n               greater than key, to one position ahead \r\n               of their current position */\r\n            while (j &gt;= 0 &amp;&amp; arr[j] &gt; key) { \r\n                arr[j + 1] = arr[j]; \r\n                j = j - 1; \r\n            } \r\n            arr[j + 1] = key; \r\n        } \r\n    } \r\n```","title":"Why does insertion sort work only if we use while as an inner loop and doesnt work for  for loop?","body":"<p>I was trying to attempt a insertion algorithm question. However, I had the following question.</p>\n<p>I wanted to nderstand why most solutions online use a nested while loop instead of a nested for loop? I thought it might have to do something with time complexity, however, both have a O(n^2) complexity.</p>\n<p>Below I have attached the two different solutions</p>\n<pre><code>\npublic class InsertionSort { \n// MY method\n    /*Function to sort array using insertion sort*/\n    // void sort(int arr[]) \n    // { \n    //     int n = arr.length; \n    //     for (int i = 1; i &lt; n; ++i) { \n    //         if(arr[i] &lt; arr[i-1]){\n    //             for(int j = 0; j &lt; i; j++){\n    //                 if(arr[i] &lt; arr[j]){\n    //                     int temp = arr[j];\n    //                     arr[j] = arr[i];\n    //                     arr[i] = temp;\n    //                 }\n    //             }\n    //         }\n    //     } \n    // } \n\n// Online Solution\n  \n    void sort(int arr[]) \n    { \n        int n = arr.length; \n        for (int i = 1; i &lt; n; ++i) { \n            int key = arr[i]; \n            int j = i - 1; \n  \n            /* Move elements of arr[0..i-1], that are \n               greater than key, to one position ahead \n               of their current position */\n            while (j &gt;= 0 &amp;&amp; arr[j] &gt; key) { \n                arr[j + 1] = arr[j]; \n                j = j - 1; \n            } \n            arr[j + 1] = key; \n        } \n    } \n</code></pre>\n"},{"tags":["java","amazon-web-services","transfer"],"answers":[{"tags":[],"owner":{"account_id":14275079,"reputation":26,"user_id":10311489,"display_name":"Justin Schoeff"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1654867471,"creation_date":1654867471,"answer_id":72575067,"question_id":72536444,"body_markdown":"The CreateServer API will return a server ID. If you are using another process like CloudFormation you could store the server ID result in a CF Output or [SSM parameter](https://docs.aws.amazon.com/systems-manager/latest/userguide/systems-manager-parameter-store.html) then access that via the Java SDK.\r\n\r\nIf you have no way to store the server ID, you could use ListServers API to retrieve Transfer servers. If you have a single server then you know its the only one. Otherwise, you could use tags, but would need to perform a DescribeServer operation on each server returned from listing to see the tags.","title":"How to get AWS transfer family server id dynamically","body":"<p>The CreateServer API will return a server ID. If you are using another process like CloudFormation you could store the server ID result in a CF Output or <a href=\"https://docs.aws.amazon.com/systems-manager/latest/userguide/systems-manager-parameter-store.html\" rel=\"nofollow noreferrer\">SSM parameter</a> then access that via the Java SDK.</p>\n<p>If you have no way to store the server ID, you could use ListServers API to retrieve Transfer servers. If you have a single server then you know its the only one. Otherwise, you could use tags, but would need to perform a DescribeServer operation on each server returned from listing to see the tags.</p>\n"},{"tags":[],"owner":{"account_id":1471560,"reputation":1031,"user_id":1383007,"accept_rate":29,"display_name":"Eric"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668704026,"creation_date":1668704026,"answer_id":74479255,"question_id":72536444,"body_markdown":"The below are options to get the server ID dynamically.\r\nI figured to set a tag with static tag name for server ID and retrieve it using resource groups service API (https://docs.aws.amazon.com/ARG/latest/userguide/resource-groups.html).","title":"How to get AWS transfer family server id dynamically","body":"<p>The below are options to get the server ID dynamically.\nI figured to set a tag with static tag name for server ID and retrieve it using resource groups service API (<a href=\"https://docs.aws.amazon.com/ARG/latest/userguide/resource-groups.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/ARG/latest/userguide/resource-groups.html</a>).</p>\n"}],"owner":{"account_id":1471560,"reputation":1031,"user_id":1383007,"accept_rate":29,"display_name":"Eric"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":218,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1668704026,"creation_date":1654629125,"question_id":72536444,"body_markdown":"I&#39;m using AWS SDK Java to create users in transfer family service.\r\nWhen I create a new user on an existing transfer server, I need transfer server ID for the call to create a user.\r\n\r\nServer ID is a generated string by AWS like s-88ced8077ce24d99s. Whenever I recreate a new server, the server ID changed. I don&#39;t want to hard code the server ID in my Java code or even in an external file. I hope I can make a call to AWS to get the server ID somehow dynamically.\r\n\r\nMy question is: Is this possible? \r\n\r\n - like create an alias &quot;my-sftp-server&quot; somewhere, which the alias name won&#39;t change and always assign to the server, so I can use the alias name to figure out the server ID. \r\n - using tag and get it from resource group API\r\n - Other solution? environment variable, AWS Database?\r\n\r\n    code sample like below:\r\n\r\n&gt;     &gt; CreateUserRequest createUserRequest = new CreateUserRequest();\r\n&gt;     &gt; createUserRequest.setUserName(sftpUser);\r\n&gt;     &gt; createUserRequest.setServerId(&quot;s-88ced8077ce24d99s&quot;); //don&#39;t want hardcode server ID here\r\n&gt;     &gt; createUserRequest.setRole(getIamRoleArnSftp());\r\n&gt;     &gt; createUserRequest.setHomeDirectoryType(HOME_DIRECTORY_TYPE);\r\n&gt;     &gt; createUserRequest.setHomeDirectory(getBucketName() + &quot;/&quot; + sftpUser);\r\n&gt;     &gt; return getAwsTransferClient().createUser(createUserRequest);\r\n\r\nAny recommendations and best practice please.\r\nThanks\r\n\r\n","title":"How to get AWS transfer family server id dynamically","body":"<p>I'm using AWS SDK Java to create users in transfer family service.\nWhen I create a new user on an existing transfer server, I need transfer server ID for the call to create a user.</p>\n<p>Server ID is a generated string by AWS like s-88ced8077ce24d99s. Whenever I recreate a new server, the server ID changed. I don't want to hard code the server ID in my Java code or even in an external file. I hope I can make a call to AWS to get the server ID somehow dynamically.</p>\n<p>My question is: Is this possible?</p>\n<ul>\n<li><p>like create an alias &quot;my-sftp-server&quot; somewhere, which the alias name won't change and always assign to the server, so I can use the alias name to figure out the server ID.</p>\n</li>\n<li><p>using tag and get it from resource group API</p>\n</li>\n<li><p>Other solution? environment variable, AWS Database?</p>\n<p>code sample like below:</p>\n</li>\n</ul>\n<blockquote>\n<pre><code>&gt; CreateUserRequest createUserRequest = new CreateUserRequest();\n&gt; createUserRequest.setUserName(sftpUser);\n&gt; createUserRequest.setServerId(&quot;s-88ced8077ce24d99s&quot;); //don't want hardcode server ID here\n&gt; createUserRequest.setRole(getIamRoleArnSftp());\n&gt; createUserRequest.setHomeDirectoryType(HOME_DIRECTORY_TYPE);\n&gt; createUserRequest.setHomeDirectory(getBucketName() + &quot;/&quot; + sftpUser);\n&gt; return getAwsTransferClient().createUser(createUserRequest);\n</code></pre>\n</blockquote>\n<p>Any recommendations and best practice please.\nThanks</p>\n"},{"tags":["java","spring-boot","spring-kafka","spring-cloud-sleuth","distributed-tracing"],"comments":[{"owner":{"account_id":2821426,"reputation":347,"user_id":2425109,"display_name":"user2425109"},"score":0,"creation_date":1676437967,"post_id":74474027,"comment_id":133134783,"body_markdown":"You got any solution I am also looking for way to propagate custom correlation id in API and event chain say Microservice X has one API which is triggering someEvent received by Microservice Y which again calling some API and so on. I need to propagate correlation id  through out. Can we use sleuth baggage for this?","body":"You got any solution I am also looking for way to propagate custom correlation id in API and event chain say Microservice X has one API which is triggering someEvent received by Microservice Y which again calling some API and so on. I need to propagate correlation id  through out. Can we use sleuth baggage for this?"}],"owner":{"account_id":13341584,"reputation":105,"user_id":9629659,"display_name":"Ahmed Ali"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":440,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1668703744,"creation_date":1668681710,"question_id":74474027,"body_markdown":"I have two microservices using Kafka as a broker for the communications between them and using Spring Cloud Sleuth for tracing and both of them have the same Spring boot version 2.7.2.\r\n\r\nI needed to pass extra information (e.g. correlationId) for the Kafka messages but I tried to do so by adding remote baggage and it didn&#39;t work.\r\n\r\nExample code (Service A):\r\n```\r\n          Span newSpan = sleuthTracer.nextSpan().start();\r\n          try (SpanInScope spanInScope = sleuthTracer.withSpan(newSpan);) {\r\n            sleuthTracer.createBaggage(&quot;correlation-id&quot;).set(UUID.randomUUID().toString());\r\n           \r\n            String key = product.getData().getMarketplaceGroupId();\r\n            var listenableFuture = kafkaTemplate.send(topic, key, message);\r\n            futures.add(listenableFuture.completable());\r\n            processThePublishingResults(\r\n                listenableFuture, topic, key, resource);\r\n          } finally {\r\n            newSpan.end();\r\n          }\r\n```\r\n\r\n\r\nExample code (Service B):\r\n\r\nIn the Kafka consumer for the topic produced by Service A\r\n\r\n```\r\n\r\nString correlationIdBaggage = sleuthTracer.getBaggage(&quot;correlation-id&quot;).get();\r\nlog.info(&quot;Received Sleuth baggage with correlation-id = &quot; + correlationIdBaggage);\r\n\r\n```\r\n\r\n\r\nBoth service contain the configurations below in application.yaml:\r\n\r\n```\r\nspring:\r\n  sleuth:\r\n    traceId128: true\r\n    baggage:\r\n      remote-fields:\r\n        - correlation-id\r\n      tag-fields:\r\n        - correlation-id\r\n      correlation-enabled: true\r\n      correlation-fields:\r\n        - correlation-id\r\n```\r\n\r\nThe question is, does this only work with REST and not intended to work with Kafka?\r\nKnowing that the continuity of tracing is working fine with Kafka and Sleuth in our logs between the producer and consumer.\r\n\r\nThanks.","title":"Spring Cloud Sleuth - not propagating baggage for Spring Kafka","body":"<p>I have two microservices using Kafka as a broker for the communications between them and using Spring Cloud Sleuth for tracing and both of them have the same Spring boot version 2.7.2.</p>\n<p>I needed to pass extra information (e.g. correlationId) for the Kafka messages but I tried to do so by adding remote baggage and it didn't work.</p>\n<p>Example code (Service A):</p>\n<pre><code>          Span newSpan = sleuthTracer.nextSpan().start();\n          try (SpanInScope spanInScope = sleuthTracer.withSpan(newSpan);) {\n            sleuthTracer.createBaggage(&quot;correlation-id&quot;).set(UUID.randomUUID().toString());\n           \n            String key = product.getData().getMarketplaceGroupId();\n            var listenableFuture = kafkaTemplate.send(topic, key, message);\n            futures.add(listenableFuture.completable());\n            processThePublishingResults(\n                listenableFuture, topic, key, resource);\n          } finally {\n            newSpan.end();\n          }\n</code></pre>\n<p>Example code (Service B):</p>\n<p>In the Kafka consumer for the topic produced by Service A</p>\n<pre><code>\nString correlationIdBaggage = sleuthTracer.getBaggage(&quot;correlation-id&quot;).get();\nlog.info(&quot;Received Sleuth baggage with correlation-id = &quot; + correlationIdBaggage);\n\n</code></pre>\n<p>Both service contain the configurations below in application.yaml:</p>\n<pre><code>spring:\n  sleuth:\n    traceId128: true\n    baggage:\n      remote-fields:\n        - correlation-id\n      tag-fields:\n        - correlation-id\n      correlation-enabled: true\n      correlation-fields:\n        - correlation-id\n</code></pre>\n<p>The question is, does this only work with REST and not intended to work with Kafka?\nKnowing that the continuity of tracing is working fine with Kafka and Sleuth in our logs between the producer and consumer.</p>\n<p>Thanks.</p>\n"},{"tags":["java","javafx"],"answers":[{"comments":[{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1668703426,"post_id":74478912,"comment_id":131476012,"body_markdown":"I think a `tooltip.textProperty().unbind()` is necessary to avoid potential &quot;memory leaks&quot;.","body":"I think a <code>tooltip.textProperty().unbind()</code> is necessary to avoid potential &quot;memory leaks&quot;."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1668703595,"post_id":74478912,"comment_id":131476088,"body_markdown":"@Slaw I think it&#39;s ok without, though perhaps prudent to include it. `bind()` will automatically call `unbind()` if there&#39;s an existing binding, so the only issue is empty cells retaining references to the last item they displayed after those items are no longer referenced elsewhere (i.e. removed from the table&#39;s items). There should only be a small, bounded number of such cell instances. So it&#39;s not really a &quot;memory leak&quot;, as the excess comsumption can&#39;t grow indefinitely.","body":"@Slaw I think it&#39;s ok without, though perhaps prudent to include it. <code>bind()</code> will automatically call <code>unbind()</code> if there&#39;s an existing binding, so the only issue is empty cells retaining references to the last item they displayed after those items are no longer referenced elsewhere (i.e. removed from the table&#39;s items). There should only be a small, bounded number of such cell instances. So it&#39;s not really a &quot;memory leak&quot;, as the excess comsumption can&#39;t grow indefinitely."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1668703687,"post_id":74478912,"comment_id":131476117,"body_markdown":"True, the effect of _not_ calling `unbind()` is likely small. But doing that kind of cleanup is sort of automatic for me, just in case, so I thought I&#39;d mention it. The problem would only manifest if the model item had a large object graph (or referenced a large amount of data) that would otherwise be GC&#39;d except for this one binding.","body":"True, the effect of <i>not</i> calling <code>unbind()</code> is likely small. But doing that kind of cleanup is sort of automatic for me, just in case, so I thought I&#39;d mention it. The problem would only manifest if the model item had a large object graph (or referenced a large amount of data) that would otherwise be GC&#39;d except for this one binding."},{"owner":{"account_id":12824901,"reputation":1708,"user_id":9278333,"display_name":"trilogy"},"score":0,"creation_date":1668779269,"post_id":74478912,"comment_id":131495476,"body_markdown":"Does this add a tooltip for the entire row? What if I just want the tooltip on the one column?","body":"Does this add a tooltip for the entire row? What if I just want the tooltip on the one column?"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":1,"creation_date":1668787839,"post_id":74478912,"comment_id":131498686,"body_markdown":"This will add a tooltip for the row. Adding a tooltip just for the cell is difficult with your current model, because you have to observe a &quot;sibling property&quot; (i.e. the cell that is displaying `flag` would rely on the `reason` property as well as the `flag` property). The most robust way to do this would be to modify your model. Define an immutable class (or record), e.g. `public record Flag(boolean flag, String reason){}` and then in the model use a `ObjectProperty&lt;Flag&gt;` in place of the two properties you currently have. Then there is a little work to do with the cell factory.","body":"This will add a tooltip for the row. Adding a tooltip just for the cell is difficult with your current model, because you have to observe a &quot;sibling property&quot; (i.e. the cell that is displaying <code>flag</code> would rely on the <code>reason</code> property as well as the <code>flag</code> property). The most robust way to do this would be to modify your model. Define an immutable class (or record), e.g. <code>public record Flag(boolean flag, String reason){}</code> and then in the model use a <code>ObjectProperty&lt;Flag&gt;</code> in place of the two properties you currently have. Then there is a little work to do with the cell factory."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1668789103,"post_id":74478912,"comment_id":131499132,"body_markdown":"Details would depend a bit on the usage here. Is the table editable? If so, what happens when a check box is checked? Is there a mechanism to provide a `reason` in that case?","body":"Details would depend a bit on the usage here. Is the table editable? If so, what happens when a check box is checked? Is there a mechanism to provide a <code>reason</code> in that case?"},{"owner":{"account_id":12824901,"reputation":1708,"user_id":9278333,"display_name":"trilogy"},"score":0,"creation_date":1669038168,"post_id":74478912,"comment_id":131545211,"body_markdown":"@James_D table and checkbox is not editable.  The reason is populated from a dropdown in another dialog when the record is edited.","body":"@James_D table and checkbox is not editable.  The reason is populated from a dropdown in another dialog when the record is edited."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1669045588,"post_id":74478912,"comment_id":131548119,"body_markdown":"@trilogy So if you don&#39;t want the tooltip for the whole row, I would use the solution outlined above.","body":"@trilogy So if you don&#39;t want the tooltip for the whole row, I would use the solution outlined above."},{"owner":{"account_id":12824901,"reputation":1708,"user_id":9278333,"display_name":"trilogy"},"score":0,"creation_date":1669136636,"post_id":74478912,"comment_id":131573732,"body_markdown":"@James_D Ok, with solution, what is the work you need to do in the cell factory?","body":"@James_D Ok, with solution, what is the work you need to do in the cell factory?"}],"tags":[],"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"comment_count":9,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1668703619,"creation_date":1668702374,"answer_id":74478912,"question_id":74478387,"body_markdown":"Use a row factory:\r\n\r\n        table.setRowFactory(tv -&gt; new TableRow&lt;&gt;() {\r\n            private Tooltip tooltip = new Tooltip();\r\n            @Override\r\n            protected void updateItem(Model item, boolean empty) {\r\n                super.updateItem(item, empty);\r\n                if (empty || item == null) {\r\n                    tooltip.textProperty().unbind();\r\n                    setTooltip(null);\r\n                } else {\r\n                    tooltip.textProperty().bind(item.reasonProperty());\r\n                    setTooltip(tooltip);\r\n                }\r\n            }\r\n        });\r\n\r\nThe row&#39;s `updateItem()` method will be invoked any time the row is used to display a new `Model` instance. Empty rows set their tooltip to null; non-empty rows set their tooltip to the tooltip instance, and bind the tooltip&#39;s text to the value in the model. The binding ensures the tooltip is updated if the `reason` changes.\r\n\r\nYou might want to make the logic a little more sophisticated, e.g. only display the tooltip if the text is non-empty, or if the flag is not set.","title":"Adding tooltip for CheckBoxTableCell","body":"<p>Use a row factory:</p>\n<pre><code>    table.setRowFactory(tv -&gt; new TableRow&lt;&gt;() {\n        private Tooltip tooltip = new Tooltip();\n        @Override\n        protected void updateItem(Model item, boolean empty) {\n            super.updateItem(item, empty);\n            if (empty || item == null) {\n                tooltip.textProperty().unbind();\n                setTooltip(null);\n            } else {\n                tooltip.textProperty().bind(item.reasonProperty());\n                setTooltip(tooltip);\n            }\n        }\n    });\n</code></pre>\n<p>The row's <code>updateItem()</code> method will be invoked any time the row is used to display a new <code>Model</code> instance. Empty rows set their tooltip to null; non-empty rows set their tooltip to the tooltip instance, and bind the tooltip's text to the value in the model. The binding ensures the tooltip is updated if the <code>reason</code> changes.</p>\n<p>You might want to make the logic a little more sophisticated, e.g. only display the tooltip if the text is non-empty, or if the flag is not set.</p>\n"}],"owner":{"account_id":12824901,"reputation":1708,"user_id":9278333,"display_name":"trilogy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1668703619,"creation_date":1668700298,"question_id":74478387,"body_markdown":"I&#39;d like to add a tooltip for the `CheckBoxTableCell` using the &quot;reason&quot; property in my model. How do I do this?\r\n\r\n\r\n    import javafx.application.Application;\r\n    import javafx.beans.property.SimpleBooleanProperty;\r\n    import javafx.beans.property.SimpleStringProperty;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.TableColumn;\r\n    import javafx.scene.control.TableView;\r\n    import javafx.scene.control.cell.CheckBoxTableCell;\r\n    import javafx.stage.Stage;\r\n    \r\n    public class Test extends Application\r\n    {\r\n    \r\n        /**\r\n         * @param args the command line arguments\r\n         */\r\n        public static void main(String[] args)\r\n        {\r\n            launch(args);\r\n        }\r\n    \r\n        @Override\r\n        public void start(Stage primaryStage) throws Exception\r\n        {\r\n            TableView&lt;Model&gt; table = new TableView();\r\n    \r\n            table.getItems().add(new Model());\r\n            table.getItems().add(new Model());\r\n    \r\n            table.getSelectionModel().setCellSelectionEnabled(true);\r\n    \r\n            TableColumn&lt;Model, Boolean&gt; column = new TableColumn&lt;&gt;(&quot;Column&quot;);\r\n            column.setCellFactory(CheckBoxTableCell.forTableColumn(column));\r\n            column.setCellValueFactory(features -&gt; features.getValue().flagProperty());\r\n    \r\n            table.getColumns().add(column);\r\n    \r\n            final Scene scene = new Scene(table);\r\n    \r\n            primaryStage.setScene(scene);\r\n            primaryStage.show();\r\n        }\r\n    \r\n        public class Model\r\n        {\r\n    \r\n            private SimpleBooleanProperty flag;\r\n            private SimpleStringProperty reason;\r\n    \r\n            public Model()\r\n            {\r\n                flag = new SimpleBooleanProperty();\r\n                reason = new SimpleStringProperty();\r\n            }\r\n    \r\n            /**\r\n             * @return the flag\r\n             */\r\n            public SimpleBooleanProperty flagProperty()\r\n            {\r\n                return flag;\r\n            }\r\n    \r\n            public SimpleStringProperty reasonProperty()\r\n            {\r\n                return reason;\r\n            }\r\n    \r\n        }\r\n    }\r\n\r\n","title":"Adding tooltip for CheckBoxTableCell","body":"<p>I'd like to add a tooltip for the <code>CheckBoxTableCell</code> using the &quot;reason&quot; property in my model. How do I do this?</p>\n<pre><code>import javafx.application.Application;\nimport javafx.beans.property.SimpleBooleanProperty;\nimport javafx.beans.property.SimpleStringProperty;\nimport javafx.scene.Scene;\nimport javafx.scene.control.TableColumn;\nimport javafx.scene.control.TableView;\nimport javafx.scene.control.cell.CheckBoxTableCell;\nimport javafx.stage.Stage;\n\npublic class Test extends Application\n{\n\n    /**\n     * @param args the command line arguments\n     */\n    public static void main(String[] args)\n    {\n        launch(args);\n    }\n\n    @Override\n    public void start(Stage primaryStage) throws Exception\n    {\n        TableView&lt;Model&gt; table = new TableView();\n\n        table.getItems().add(new Model());\n        table.getItems().add(new Model());\n\n        table.getSelectionModel().setCellSelectionEnabled(true);\n\n        TableColumn&lt;Model, Boolean&gt; column = new TableColumn&lt;&gt;(&quot;Column&quot;);\n        column.setCellFactory(CheckBoxTableCell.forTableColumn(column));\n        column.setCellValueFactory(features -&gt; features.getValue().flagProperty());\n\n        table.getColumns().add(column);\n\n        final Scene scene = new Scene(table);\n\n        primaryStage.setScene(scene);\n        primaryStage.show();\n    }\n\n    public class Model\n    {\n\n        private SimpleBooleanProperty flag;\n        private SimpleStringProperty reason;\n\n        public Model()\n        {\n            flag = new SimpleBooleanProperty();\n            reason = new SimpleStringProperty();\n        }\n\n        /**\n         * @return the flag\n         */\n        public SimpleBooleanProperty flagProperty()\n        {\n            return flag;\n        }\n\n        public SimpleStringProperty reasonProperty()\n        {\n            return reason;\n        }\n\n    }\n}\n</code></pre>\n"},{"tags":["java","image","terminal","printing"],"comments":[{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1668310776,"post_id":74418303,"comment_id":131373084,"body_markdown":"It depends on what terminal you use, but most do not have the ability to display images","body":"It depends on what terminal you use, but most do not have the ability to display images"},{"owner":{"account_id":21325068,"reputation":39,"user_id":15697573,"display_name":"dumbQuestions"},"score":0,"creation_date":1668397318,"post_id":74418303,"comment_id":131387288,"body_markdown":"@TimMoore That&#39;s what I thought... Thanks for the answer!","body":"@TimMoore That&#39;s what I thought... Thanks for the answer!"}],"answers":[{"tags":[],"owner":{"account_id":22861885,"reputation":464,"user_id":17005821,"display_name":"Igor"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1668312937,"creation_date":1668312937,"answer_id":74418423,"question_id":74418303,"body_markdown":"&lt;h2&gt;You can&#39;t output an image in the terminal with Java.&lt;/h2&gt;\r\n\r\nThe closest you can get is to output [ASCII art][1], in which case,\r\nyou could use something like TEXT-IMAGE.com to generate a set of characters that can be outputted to the terminal to resemble a image.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/ASCII_art","title":"How to display an image in the terminal with Java","body":"<h2>You can't output an image in the terminal with Java.</h2>\n<p>The closest you can get is to output <a href=\"https://en.wikipedia.org/wiki/ASCII_art\" rel=\"nofollow noreferrer\">ASCII art</a>, in which case,\nyou could use something like TEXT-IMAGE.com to generate a set of characters that can be outputted to the terminal to resemble a image.</p>\n"},{"tags":[],"owner":{"account_id":3379153,"reputation":195961,"user_id":2836621,"display_name":"Mark Setchell"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668703475,"creation_date":1668703475,"answer_id":74479142,"question_id":74418303,"body_markdown":"You can display an image in the Terminal if your terminal accepts the *&quot;Inline Images Protocol&quot;* a.k.a. OSC codes. It is basically a few bytes of header, a base64-encoded PNG image and a couple of bytes to mark the end of the sequence.\r\n\r\nExample [here][1].\r\n\r\nThere is a similar tool called `showimg` and its source is [here][2].\r\n\r\n\r\n  [1]: https://iterm2.com/documentation-images.html\r\n  [2]: https://github.com/mintty/utils/blob/master/showimg","title":"How to display an image in the terminal with Java","body":"<p>You can display an image in the Terminal if your terminal accepts the <em>&quot;Inline Images Protocol&quot;</em> a.k.a. OSC codes. It is basically a few bytes of header, a base64-encoded PNG image and a couple of bytes to mark the end of the sequence.</p>\n<p>Example <a href=\"https://iterm2.com/documentation-images.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>There is a similar tool called <code>showimg</code> and its source is <a href=\"https://github.com/mintty/utils/blob/master/showimg\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}],"owner":{"account_id":21325068,"reputation":39,"user_id":15697573,"display_name":"dumbQuestions"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":383,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1668703475,"creation_date":1668310690,"question_id":74418303,"body_markdown":"I&#39;m creating a command line app in Java and wanted to know if it was possible to output an image in the terminal. Looked up online but could not find anything... \r\n\r\nThanks!","title":"How to display an image in the terminal with Java","body":"<p>I'm creating a command line app in Java and wanted to know if it was possible to output an image in the terminal. Looked up online but could not find anything...</p>\n<p>Thanks!</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":16673497,"reputation":2011,"user_id":12050506,"display_name":"possum"},"score":0,"creation_date":1668276457,"post_id":74415360,"comment_id":131367975,"body_markdown":"Post your code.","body":"Post your code."},{"owner":{"account_id":9609,"reputation":92294,"user_id":17833,"display_name":"Anya Shenanigans"},"score":1,"creation_date":1668276540,"post_id":74415360,"comment_id":131367997,"body_markdown":"You would need to show sample payload and code in order to debug this. It could be something as simple as not setting the `Content/Type` header.","body":"You would need to show sample payload and code in order to debug this. It could be something as simple as not setting the <code>Content&#47;Type</code> header."}],"owner":{"account_id":15959737,"reputation":21,"user_id":12056322,"display_name":"Stephen Olujare"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":100,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1668703004,"creation_date":1668276364,"question_id":74415360,"body_markdown":"I have a slack channel with a generated incoming webhook URL. I already have a JSON payload but I want to be able to post String messages to this channel using the rest template from my application\r\n\r\n I have tried using a formatted adaptive card payload but when I tried posting messages I got 400 bad requests then I realize that Slack webhook only accepts text and markdown for lists as payload.|\r\n","title":"Sending payload to slack channel with incoming webhook url","body":"<p>I have a slack channel with a generated incoming webhook URL. I already have a JSON payload but I want to be able to post String messages to this channel using the rest template from my application</p>\n<p>I have tried using a formatted adaptive card payload but when I tried posting messages I got 400 bad requests then I realize that Slack webhook only accepts text and markdown for lists as payload.|</p>\n"},{"tags":["java","android","exoplayer","mediametadataretriever"],"answers":[{"comments":[{"owner":{"account_id":20914067,"reputation":51,"user_id":15364213,"display_name":"ahmadu suleiman"},"score":0,"creation_date":1631985834,"post_id":69235518,"comment_id":122373746,"body_markdown":"Still the same issue. Gives me the first video frame. I think I had to be due to getFrameAt() method converti the milliseconds in to microseconds. I&#39;m not sure though","body":"Still the same issue. Gives me the first video frame. I think I had to be due to getFrameAt() method converti the milliseconds in to microseconds. I&#39;m not sure though"},{"owner":{"account_id":19735200,"reputation":150,"user_id":14449850,"display_name":"Ali Zahid"},"score":0,"creation_date":1668590914,"post_id":69235518,"comment_id":131440310,"body_markdown":"Yes same issue, it is giving the first frame even though the milliseconds time is changing.","body":"Yes same issue, it is giving the first frame even though the milliseconds time is changing."},{"owner":{"account_id":1116824,"reputation":506,"user_id":1105984,"accept_rate":50,"display_name":"Yuriy Chernyshov"},"score":0,"creation_date":1690653905,"post_id":69235518,"comment_id":135384872,"body_markdown":"Works fine. Time is in microseconds, keep that in mind.","body":"Works fine. Time is in microseconds, keep that in mind."}],"tags":[],"owner":{"account_id":21846932,"reputation":176,"user_id":16139621,"display_name":"Lukas Juskevicius"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1631975000,"creation_date":1631975000,"answer_id":69235518,"question_id":69235293,"body_markdown":"This method should get you the frame you want at the specific point \r\n \r\n\r\n      public static Bitmap getVideoFrame(Context context, Uri uri, long time) {\r\n        \r\n            Bitmap bitmap = null;\r\n            MediaMetadataRetriever retriever = new MediaMetadataRetriever();\r\n        \r\n            try {\r\n        \r\n                retriever.setDataSource(context, uri);\r\n                bitmap = retriever.getFrameAtTime(time);\r\n        \r\n            } catch (RuntimeException ex) {\r\n                ex.printStackTrace();\r\n        \r\n            } finally {\r\n        \r\n                try {\r\n        \r\n                    retriever.release();\r\n        \r\n                } catch (RuntimeException ex) {\r\n                    ex.printStackTrace();\r\n                }\r\n            }\r\n        \r\n            return bitmap;\r\n        }\r\n","title":"How to capture a video frame Exoplayer android","body":"<p>This method should get you the frame you want at the specific point</p>\n<pre><code>  public static Bitmap getVideoFrame(Context context, Uri uri, long time) {\n    \n        Bitmap bitmap = null;\n        MediaMetadataRetriever retriever = new MediaMetadataRetriever();\n    \n        try {\n    \n            retriever.setDataSource(context, uri);\n            bitmap = retriever.getFrameAtTime(time);\n    \n        } catch (RuntimeException ex) {\n            ex.printStackTrace();\n    \n        } finally {\n    \n            try {\n    \n                retriever.release();\n    \n            } catch (RuntimeException ex) {\n                ex.printStackTrace();\n            }\n        }\n    \n        return bitmap;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20914067,"reputation":51,"user_id":15364213,"display_name":"ahmadu suleiman"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1632113963,"creation_date":1632113963,"answer_id":69249271,"question_id":69235293,"body_markdown":"It was supposed to be milliseconds * 1000. Fixed it! ","title":"How to capture a video frame Exoplayer android","body":"<p>It was supposed to be milliseconds * 1000. Fixed it!</p>\n"},{"tags":[],"owner":{"account_id":26416608,"reputation":11,"user_id":20064926,"display_name":"richa patel"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1668702975,"creation_date":1668690119,"answer_id":74475925,"question_id":69235293,"body_markdown":"You can simply use seekto() function present in exoplayer to play video from any timestamp of video!\r\n\r\ncode to setup Exoplayer:\r\n\r\nXML code:\r\n\r\n    &lt;com.google.android.exoplayer2.ui.PlayerView\r\n            android:id=&quot;@+id/videoPlayerView&quot;\r\n            android:layout_width=&quot;0dp&quot;\r\n            android:layout_height=&quot;200dp&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            android:layout_marginStart=&quot;10dp&quot;\r\n            android:layout_marginEnd=&quot;10dp&quot;\r\n            android:layout_marginTop=&quot;10dp&quot;/&gt;\r\n\r\n\r\ndefine these variables in you class:\r\n\r\n    private Context context;\r\n    private PlayerView videoPlayerView;\r\n    private ExoPlayer player;\r\n    String videoUri = &quot;http://commondatastorage.googleapis.com/gtvvideos-bucket/sample/ForBiggerEscapes.mp4&quot;;\r\n\r\nCreating a function in your class to setupExoPlayer:\r\n\r\n    public void setVideoPlayer(long time) {\r\n        player = new ExoPlayer.Builder(context).build();\r\n        //Bind the player to the view.\r\n        playerView.setPlayer(player);\r\n        MediaItem mediaItem = MediaItem.fromUri(videoUri);\r\n        // Set the media item to be played.\r\n        player.setMediaItem(mediaItem);\r\n        // SeekTo particular timestamp in videoPlayer\r\n        player.seekTo(time * 1000);\r\n        // Prepare the player.\r\n        player.prepare();\r\n        // Start the playback.\r\n        player.play();\r\n    }\r\n\r\npass to your playerview id (XML id) and run the app! :)\r\n\r\n// to start video from 0th second\r\n\r\n    videoPlayerView.setVideoPlayer(0);\r\n\r\n   // to start video from 10th second\r\n   \r\n\r\n    videoPlayerView.setVideoPlayer(10);\r\n\r\n","title":"How to capture a video frame Exoplayer android","body":"<p>You can simply use seekto() function present in exoplayer to play video from any timestamp of video!</p>\n<p>code to setup Exoplayer:</p>\n<p>XML code:</p>\n<pre><code>&lt;com.google.android.exoplayer2.ui.PlayerView\n        android:id=&quot;@+id/videoPlayerView&quot;\n        android:layout_width=&quot;0dp&quot;\n        android:layout_height=&quot;200dp&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        android:layout_marginStart=&quot;10dp&quot;\n        android:layout_marginEnd=&quot;10dp&quot;\n        android:layout_marginTop=&quot;10dp&quot;/&gt;\n</code></pre>\n<p>define these variables in you class:</p>\n<pre><code>private Context context;\nprivate PlayerView videoPlayerView;\nprivate ExoPlayer player;\nString videoUri = &quot;http://commondatastorage.googleapis.com/gtvvideos-bucket/sample/ForBiggerEscapes.mp4&quot;;\n</code></pre>\n<p>Creating a function in your class to setupExoPlayer:</p>\n<pre><code>public void setVideoPlayer(long time) {\n    player = new ExoPlayer.Builder(context).build();\n    //Bind the player to the view.\n    playerView.setPlayer(player);\n    MediaItem mediaItem = MediaItem.fromUri(videoUri);\n    // Set the media item to be played.\n    player.setMediaItem(mediaItem);\n    // SeekTo particular timestamp in videoPlayer\n    player.seekTo(time * 1000);\n    // Prepare the player.\n    player.prepare();\n    // Start the playback.\n    player.play();\n}\n</code></pre>\n<p>pass to your playerview id (XML id) and run the app! :)</p>\n<p>// to start video from 0th second</p>\n<pre><code>videoPlayerView.setVideoPlayer(0);\n</code></pre>\n<p>// to start video from 10th second</p>\n<pre><code>videoPlayerView.setVideoPlayer(10);\n</code></pre>\n"}],"owner":{"account_id":20914067,"reputation":51,"user_id":15364213,"display_name":"ahmadu suleiman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1891,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1668702975,"creation_date":1631973253,"question_id":69235293,"body_markdown":"I&#39;m trying to capture video frames at specific points in a video using Exoplayer but this code always capture the first frame of the video. How do I fix it\r\n\r\n```\r\nMediaMetadataRetriever retriever = new MediaMetadataRetriever();\r\nretriever.setDataSource(yourPath);\r\nBitmap bitmap = retriever.getFrameAtTime(simpleExoPlayer.getCurrentPosition());\r\n","title":"How to capture a video frame Exoplayer android","body":"<p>I'm trying to capture video frames at specific points in a video using Exoplayer but this code always capture the first frame of the video. How do I fix it</p>\n<pre><code>MediaMetadataRetriever retriever = new MediaMetadataRetriever();\nretriever.setDataSource(yourPath);\nBitmap bitmap = retriever.getFrameAtTime(simpleExoPlayer.getCurrentPosition());\n</code></pre>\n"},{"tags":["java","regex","string"],"comments":[{"owner":{"account_id":1164471,"reputation":5144,"user_id":1143387,"accept_rate":95,"display_name":"sniperd"},"score":0,"creation_date":1668699365,"post_id":74477963,"comment_id":131474397,"body_markdown":"Have you considered using substitution?  Like this: https://regex101.com/r/6Votk8/1 and just concatenating or only using the `$1` you desire?  Might do the trick.","body":"Have you considered using substitution?  Like this: <a href=\"https://regex101.com/r/6Votk8/1\" rel=\"nofollow noreferrer\">regex101.com/r/6Votk8/1</a> and just concatenating or only using the <code>$1</code> you desire?  Might do the trick."},{"owner":{"account_id":7089168,"reputation":157141,"user_id":5424988,"display_name":"The fourth bird"},"score":0,"creation_date":1668699401,"post_id":74477963,"comment_id":131474410,"body_markdown":"If you have this string `200010 10.00 200011` you can not get 200010 and 200011 in a single group","body":"If you have this string <code>200010 10.00 200011</code> you can not get 200010 and 200011 in a single group"},{"owner":{"account_id":25285411,"reputation":17,"user_id":19112514,"display_name":"Ajm Kir"},"score":0,"creation_date":1668700078,"post_id":74477963,"comment_id":131474700,"body_markdown":"@sniperd the thing is #Section251234,Main,First/HS/12345/Jack/M,200011 11.00\nthis line does not get recognized by the regex even though it should because it dosent have the $4 and $5 subsitutions","body":"@sniperd the thing is #Section251234,Main,First/HS/12345/Jack/M,200011 11.00 this line does not get recognized by the regex even though it should because it dosent have the $4 and $5 subsitutions"},{"owner":{"account_id":25285411,"reputation":17,"user_id":19112514,"display_name":"Ajm Kir"},"score":0,"creation_date":1668700454,"post_id":74477963,"comment_id":131474842,"body_markdown":"is it possible if i can do this using filter @Thefourthbird","body":"is it possible if i can do this using filter @Thefourthbird"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1668702994,"post_id":74477963,"comment_id":131475838,"body_markdown":"You might use a different approach using a `Scanner` and collect it all: `List&lt;String[]&gt; jackStuff = new Scanner(s).useDelimiter(&quot;\\\\R&quot;).tokens().filter(line -&gt; line.contains(&quot;/Jack/M&quot;)).map(line -&gt; line.replaceAll(&quot;.*Jack/M,(.+)&quot;, &quot;$1&quot;)).map(line -&gt; line.split(&quot;,&quot;)).collect(Collectors.toList());`","body":"You might use a different approach using a <code>Scanner</code> and collect it all: <code>List&lt;String[]&gt; jackStuff = new Scanner(s).useDelimiter(&quot;\\\\R&quot;).tokens().filter(line -&gt; line.contains(&quot;&#47;Jack&#47;M&quot;)).map(line -&gt; line.replaceAll(&quot;.*Jack&#47;M,(.+)&quot;, &quot;$1&quot;)).map(line -&gt; line.split(&quot;,&quot;)).collect(Collectors.toList());</code>"},{"owner":{"account_id":2179728,"reputation":73077,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"score":0,"creation_date":1691094383,"post_id":74477963,"comment_id":135449197,"body_markdown":"You should always accept an answer if you have got the answer. If you do not know how to accept an answer, [here](https://meta.stackexchange.com/a/5235/676168) is the help topic.","body":"You should always accept an answer if you have got the answer. If you do not know how to accept an answer, <a href=\"https://meta.stackexchange.com/a/5235/676168\">here</a> is the help topic."}],"answers":[{"tags":[],"owner":{"account_id":9080284,"reputation":440,"user_id":6760346,"display_name":"damianr13"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668701752,"creation_date":1668701752,"answer_id":74478759,"question_id":74477963,"body_markdown":"I think it is quite difficult to accomplish what you want using solely regex. According to another [SO question][1] you can&#39;t have multiple matches for the same capturing group in your regex. Instead only the last matching pattern will actually be captured. \r\n\r\nMy suggestion is to split your string by line in java, iterate through the lines, check if a line contains the substring you search for &quot;Jack/M&quot;, and then use regex to extract the different bits by searching for simpler regex pattern instead of trying to match one long regex to the whole string. \r\n\r\nA good walk through on how to find matches for a regex in a string: https://www.tutorialspoint.com/getting-the-list-of-all-the-matches-java-regular-expressions\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/37003623/how-to-capture-multiple-repeated-groups","title":"Using regex to select 3 groups from a string","body":"<p>I think it is quite difficult to accomplish what you want using solely regex. According to another <a href=\"https://stackoverflow.com/questions/37003623/how-to-capture-multiple-repeated-groups\">SO question</a> you can't have multiple matches for the same capturing group in your regex. Instead only the last matching pattern will actually be captured.</p>\n<p>My suggestion is to split your string by line in java, iterate through the lines, check if a line contains the substring you search for &quot;Jack/M&quot;, and then use regex to extract the different bits by searching for simpler regex pattern instead of trying to match one long regex to the whole string.</p>\n<p>A good walk through on how to find matches for a regex in a string: <a href=\"https://www.tutorialspoint.com/getting-the-list-of-all-the-matches-java-regular-expressions\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/getting-the-list-of-all-the-matches-java-regular-expressions</a></p>\n"},{"tags":[],"owner":{"account_id":7089168,"reputation":157141,"user_id":5424988,"display_name":"The fourth bird"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1668702948,"creation_date":1668702167,"answer_id":74478857,"question_id":74477963,"body_markdown":"You might use a pattern to get 2 capture groups, and then after process the capture 2 values to combine the numbers that should be grouped together.\r\n\r\nAs the dates and the values in the examples strings seem to go by pair, you can split the group 2 values from the regex on a space and create 2 groups using the modulo operator to group the even/odd occurrences.\r\n\r\n    #Section(\\d+)\\b(?:(?!#Section\\d).)*\\bJack/M,(\\d+\\h+[-+]?\\d+(?:\\.\\d+)?(?:\\s+\\d+\\h+[-+]?\\d+(?:\\.\\d+)?)*)\r\n\r\n[Regex demo](https://regex101.com/r/HmFCuE/1) | [Java demo](https://ideone.com/PSe23g)\r\n\r\n    String regex = &quot;#Section(\\\\d+)\\\\b(?:(?!#Section\\\\d).)*\\\\bJack/M,(\\\\d+\\\\h+[-+]?\\\\d+(?:\\\\.\\\\d+)?(?:\\\\s+\\\\d+\\\\h+[-+]?\\\\d+(?:\\\\.\\\\d+)?)*)&quot;;\r\n    String string = &quot;#Section250342,Main,First/HS/12345/Jack/M,200010 10.00 200011 -2.00,\\n&quot;\r\n            + &quot;#Section250322,Main,First/HS/12345/Aaron/N,200010 17.00,\\n&quot;\r\n            + &quot;#Section250399,Main,First/HS/12345/Jimmy/N,200010 12.00,\\n&quot;\r\n            + &quot;#Section251234,Main,First/HS/12345/Jack/M,200011 11.00&quot;;\r\n\r\n    Pattern pattern = Pattern.compile(regex, Pattern.MULTILINE);\r\n    Matcher matcher = pattern.matcher(string);\r\n\r\n\r\n    while (matcher.find()) {\r\n        List&lt;String&gt; group2 = new ArrayList&lt;&gt;();\r\n        List&lt;String&gt; group3 = new ArrayList&lt;&gt;();\r\n\r\n        System.out.println(&quot;Group 1: &quot; + matcher.group(1));\r\n        String[] parts = matcher.group(2).split(&quot;\\\\s+&quot;);\r\n        for (int i = 0; i &lt; parts.length; i++) {\r\n            if (i % 2 == 0) {\r\n                group2.add(parts[i]);\r\n            } else {\r\n                group3.add(parts[i]);\r\n            }\r\n        }\r\n        System.out.println(&quot;Group 2: &quot; + Arrays.toString(group2.toArray()));\r\n        System.out.println(&quot;Group 3: &quot; + Arrays.toString(group3.toArray()));\r\n    }\r\n}\r\n\r\nOutput\r\n\r\n\r\n    Group 1: 250342\r\n    Group 2: [200010, 200011]\r\n    Group 3: [10.00, -2.00]\r\n    Group 1: 251234\r\n    Group 2: [200011]\r\n    Group 3: [11.00]\r\n\r\nIf you want to group all values, you can create 3 lists and print all the 3 lists after the looping.\r\n\r\n    List&lt;String&gt; group1 = new ArrayList&lt;&gt;();\r\n    List&lt;String&gt; group2 = new ArrayList&lt;&gt;();\r\n    List&lt;String&gt; group3 = new ArrayList&lt;&gt;();\r\n\r\n    while (matcher.find()) {\r\n        group1.add(matcher.group(1));\r\n        String[] parts = matcher.group(2).split(&quot;\\\\s+&quot;);\r\n        for (int i = 0; i &lt; parts.length; i++) {\r\n            if (i % 2 == 0) {\r\n                group2.add(parts[i]);\r\n            } else {\r\n                group3.add(parts[i]);\r\n            }\r\n        }\r\n    }\r\n    System.out.println(&quot;Group 1: &quot; + Arrays.toString(group1.toArray()));\r\n    System.out.println(&quot;Group 2: &quot; + Arrays.toString(group2.toArray()));\r\n    System.out.println(&quot;Group 3: &quot; + Arrays.toString(group3.toArray()));\r\n\r\nOutput\r\n\r\n    Group 1: [250342, 251234]\r\n    Group 2: [200010, 200011, 200011]\r\n    Group 3: [10.00, -2.00, 11.00]\r\n\r\nSee this [Java demo](https://ideone.com/Ufspe4)","title":"Using regex to select 3 groups from a string","body":"<p>You might use a pattern to get 2 capture groups, and then after process the capture 2 values to combine the numbers that should be grouped together.</p>\n<p>As the dates and the values in the examples strings seem to go by pair, you can split the group 2 values from the regex on a space and create 2 groups using the modulo operator to group the even/odd occurrences.</p>\n<pre><code>#Section(\\d+)\\b(?:(?!#Section\\d).)*\\bJack/M,(\\d+\\h+[-+]?\\d+(?:\\.\\d+)?(?:\\s+\\d+\\h+[-+]?\\d+(?:\\.\\d+)?)*)\n</code></pre>\n<p><a href=\"https://regex101.com/r/HmFCuE/1\" rel=\"nofollow noreferrer\">Regex demo</a> | <a href=\"https://ideone.com/PSe23g\" rel=\"nofollow noreferrer\">Java demo</a></p>\n<pre><code>String regex = &quot;#Section(\\\\d+)\\\\b(?:(?!#Section\\\\d).)*\\\\bJack/M,(\\\\d+\\\\h+[-+]?\\\\d+(?:\\\\.\\\\d+)?(?:\\\\s+\\\\d+\\\\h+[-+]?\\\\d+(?:\\\\.\\\\d+)?)*)&quot;;\nString string = &quot;#Section250342,Main,First/HS/12345/Jack/M,200010 10.00 200011 -2.00,\\n&quot;\n        + &quot;#Section250322,Main,First/HS/12345/Aaron/N,200010 17.00,\\n&quot;\n        + &quot;#Section250399,Main,First/HS/12345/Jimmy/N,200010 12.00,\\n&quot;\n        + &quot;#Section251234,Main,First/HS/12345/Jack/M,200011 11.00&quot;;\n\nPattern pattern = Pattern.compile(regex, Pattern.MULTILINE);\nMatcher matcher = pattern.matcher(string);\n\n\nwhile (matcher.find()) {\n    List&lt;String&gt; group2 = new ArrayList&lt;&gt;();\n    List&lt;String&gt; group3 = new ArrayList&lt;&gt;();\n\n    System.out.println(&quot;Group 1: &quot; + matcher.group(1));\n    String[] parts = matcher.group(2).split(&quot;\\\\s+&quot;);\n    for (int i = 0; i &lt; parts.length; i++) {\n        if (i % 2 == 0) {\n            group2.add(parts[i]);\n        } else {\n            group3.add(parts[i]);\n        }\n    }\n    System.out.println(&quot;Group 2: &quot; + Arrays.toString(group2.toArray()));\n    System.out.println(&quot;Group 3: &quot; + Arrays.toString(group3.toArray()));\n}\n</code></pre>\n<p>}</p>\n<p>Output</p>\n<pre><code>Group 1: 250342\nGroup 2: [200010, 200011]\nGroup 3: [10.00, -2.00]\nGroup 1: 251234\nGroup 2: [200011]\nGroup 3: [11.00]\n</code></pre>\n<p>If you want to group all values, you can create 3 lists and print all the 3 lists after the looping.</p>\n<pre><code>List&lt;String&gt; group1 = new ArrayList&lt;&gt;();\nList&lt;String&gt; group2 = new ArrayList&lt;&gt;();\nList&lt;String&gt; group3 = new ArrayList&lt;&gt;();\n\nwhile (matcher.find()) {\n    group1.add(matcher.group(1));\n    String[] parts = matcher.group(2).split(&quot;\\\\s+&quot;);\n    for (int i = 0; i &lt; parts.length; i++) {\n        if (i % 2 == 0) {\n            group2.add(parts[i]);\n        } else {\n            group3.add(parts[i]);\n        }\n    }\n}\nSystem.out.println(&quot;Group 1: &quot; + Arrays.toString(group1.toArray()));\nSystem.out.println(&quot;Group 2: &quot; + Arrays.toString(group2.toArray()));\nSystem.out.println(&quot;Group 3: &quot; + Arrays.toString(group3.toArray()));\n</code></pre>\n<p>Output</p>\n<pre><code>Group 1: [250342, 251234]\nGroup 2: [200010, 200011, 200011]\nGroup 3: [10.00, -2.00, 11.00]\n</code></pre>\n<p>See this <a href=\"https://ideone.com/Ufspe4\" rel=\"nofollow noreferrer\">Java demo</a></p>\n"}],"owner":{"account_id":25285411,"reputation":17,"user_id":19112514,"display_name":"Ajm Kir"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1668702948,"creation_date":1668698586,"question_id":74477963,"body_markdown":"    String s = #Section250342,Main,First/HS/12345/Jack/M,200010 10.00 200011 -2.00,\r\n    #Section250322,Main,First/HS/12345/Aaron/N,200010 17.00,\r\n    #Section250399,Main,First/HS/12345/Jimmy/N,200010 12.00,\r\n    #Section251234,Main,First/HS/12345/Jack/M,200011 11.00\r\n\r\nWherever there is the word /Jack/M in the3 string, I want to pull the section numbers(250342,251234),dates (200010,200011) and the values(10.00,11.00,-2.00) associated with it using regex each time.   Sometines a single line can contain either one value or two so that what makes the regex sort of confusing. So at the end of day, there will be 3 diff groups we want to extract.\r\n\r\n\r\nI tried\r\n```none\r\n#Section(\\d+)(?:(?!#Section\\d).)*\\bJack/M,(\\d+)\\h+(\\d+(?:\\.\\d+)?)\\s(\\d+)\\h+([-+]?\\d+(?:\\.\\d+)?)\\b\r\n```\r\nSee it in action here - https://regex101.com/r/JaKeGg/1, it brings in 5 groups instead of 3 and when there is only one value here it doesn&#39;t seem to match so I need help with this.","title":"Using regex to select 3 groups from a string","body":"<pre><code>String s = #Section250342,Main,First/HS/12345/Jack/M,200010 10.00 200011 -2.00,\n#Section250322,Main,First/HS/12345/Aaron/N,200010 17.00,\n#Section250399,Main,First/HS/12345/Jimmy/N,200010 12.00,\n#Section251234,Main,First/HS/12345/Jack/M,200011 11.00\n</code></pre>\n<p>Wherever there is the word /Jack/M in the3 string, I want to pull the section numbers(250342,251234),dates (200010,200011) and the values(10.00,11.00,-2.00) associated with it using regex each time.   Sometines a single line can contain either one value or two so that what makes the regex sort of confusing. So at the end of day, there will be 3 diff groups we want to extract.</p>\n<p>I tried</p>\n<pre class=\"lang-none prettyprint-override\"><code>#Section(\\d+)(?:(?!#Section\\d).)*\\bJack/M,(\\d+)\\h+(\\d+(?:\\.\\d+)?)\\s(\\d+)\\h+([-+]?\\d+(?:\\.\\d+)?)\\b\n</code></pre>\n<p>See it in action here - <a href=\"https://regex101.com/r/JaKeGg/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/JaKeGg/1</a>, it brings in 5 groups instead of 3 and when there is only one value here it doesn't seem to match so I need help with this.</p>\n"},{"tags":["java","unit-testing","testing","junit","junit-jupiter"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":1,"creation_date":1668642830,"post_id":74468611,"comment_id":131458526,"body_markdown":"There&#39;s no benefit in covering that class. If you must, just write `new BadRequestException()` in the test method and it&#39;s covered.","body":"There&#39;s no benefit in covering that class. If you must, just write <code>new BadRequestException()</code> in the test method and it&#39;s covered."},{"owner":{"account_id":15437683,"reputation":9,"user_id":11137318,"display_name":"Wry S."},"score":0,"creation_date":1668645307,"post_id":74468611,"comment_id":131458902,"body_markdown":"@f1sh Normally, I would agree. It&#39;s just that... our overall coverage factors directly into our grading and now has me going through everything line-by-line within the coverage report.\n\nYour recommendation definitely helped me with what I was looking for though. Thank you!","body":"@f1sh Normally, I would agree. It&#39;s just that... our overall coverage factors directly into our grading and now has me going through everything line-by-line within the coverage report.  Your recommendation definitely helped me with what I was looking for though. Thank you!"}],"answers":[{"tags":[],"owner":{"account_id":15437683,"reputation":9,"user_id":11137318,"display_name":"Wry S."},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668702745,"creation_date":1668646459,"answer_id":74468940,"question_id":74468611,"body_markdown":"#### Solution credit to [@f1sh](https://stackoverflow.com/users/214525/f1sh) \r\n\r\nf1sh&#39;s comment (original solution) recommended to add `new BadRequestException()` within the JUnit test.\r\n\r\nThis gave an me idea on how I could hopefully improve upon that recommendation.\r\n\r\nMy final result:\r\n```\r\npackage &lt;package_name&gt;;\r\n\r\nimport org.junit.jupiter.api.Test;\r\nimport org.junit.jupiter.api.DisplayName;\r\n\r\nimport static org.junit.jupiter.api.Assertions.assertNotNull;\r\n\r\npublic class TestBadRequestException {\r\n\r\n    @Test\r\n    @DisplayName(&quot;Test Empty BadRequestException Class&quot;)\r\n    public void testBadRequestException() {\r\n        \r\n        assertNotNull(new BadRequestException());      // &lt;---- Here\r\n\r\n    }\r\n}\r\n```","title":"JUnit Testing: How to test a custom, empty java class that extends Exception?","body":"<h4>Solution credit to <a href=\"https://stackoverflow.com/users/214525/f1sh\">@f1sh</a></h4>\n<p>f1sh's comment (original solution) recommended to add <code>new BadRequestException()</code> within the JUnit test.</p>\n<p>This gave an me idea on how I could hopefully improve upon that recommendation.</p>\n<p>My final result:</p>\n<pre><code>package &lt;package_name&gt;;\n\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.DisplayName;\n\nimport static org.junit.jupiter.api.Assertions.assertNotNull;\n\npublic class TestBadRequestException {\n\n    @Test\n    @DisplayName(&quot;Test Empty BadRequestException Class&quot;)\n    public void testBadRequestException() {\n        \n        assertNotNull(new BadRequestException());      // &lt;---- Here\n\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":15437683,"reputation":9,"user_id":11137318,"display_name":"Wry S."},"score":0,"creation_date":1668691650,"post_id":74469417,"comment_id":131471032,"body_markdown":"I most definitely would if it were up to me. However, the coverage is managed by the course instructor. :\\","body":"I most definitely would if it were up to me. However, the coverage is managed by the course instructor. :\\"},{"owner":{"account_id":14070869,"reputation":71,"user_id":10164385,"display_name":"Ngo Tuoc"},"score":0,"creation_date":1668698168,"post_id":74469417,"comment_id":131473859,"body_markdown":"@WryS. you should disscus with the instructor. It could a plus point for you","body":"@WryS. you should disscus with the instructor. It could a plus point for you"},{"owner":{"account_id":15437683,"reputation":9,"user_id":11137318,"display_name":"Wry S."},"score":1,"creation_date":1668702365,"post_id":74469417,"comment_id":131475605,"body_markdown":"I mentioned it a couple of times throughout the semester. No dice. *Maybe I should just present this link and let the feedback speak for itself.* (_)","body":"I mentioned it a couple of times throughout the semester. No dice. <i>Maybe I should just present this link and let the feedback speak for itself.</i> (_)"}],"tags":[],"owner":{"account_id":14070869,"reputation":71,"user_id":10164385,"display_name":"Ngo Tuoc"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1668651717,"creation_date":1668651717,"answer_id":74469417,"question_id":74468611,"body_markdown":"I think write a unit test for that class is unnecessary.\r\nYou can try exclude that on your code coverage rules","title":"JUnit Testing: How to test a custom, empty java class that extends Exception?","body":"<p>I think write a unit test for that class is unnecessary.\nYou can try exclude that on your code coverage rules</p>\n"}],"owner":{"account_id":15437683,"reputation":9,"user_id":11137318,"display_name":"Wry S."},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":611,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1668702745,"creation_date":1668642635,"question_id":74468611,"body_markdown":"I am currently attempting to extend test coverage for a school-based-assignment web application after I came across a completely empty class that extends Exception and contains no coverage according to the coverage report.\r\n\r\nNormally, I would assume that something like this could be disregarded. However, our overall test coverage factor directly into our individual grading for this course. Because of this and it being near the end of the semester, I am trying to go through the code flagged within the coverage report line-by-line and tidy up anything I can.\r\n\r\nAfter going through course content and searches online, I am unsure of how to proceed with writing a test for a class such as this. This server-side class was included in our initial code base that was given to us at the start of the semester by the instructor (we build onto the code base as the semester progresses).\r\n\r\n\r\nThe entire code for the Java class:\r\n```\r\npackage &lt;package_name&gt;;\r\n/*\r\n * This is a custom exception that fits our personal\r\n * needs and won&#39;t collide with existing issues.\r\n */\r\npublic class BadRequestException extends Exception {}\r\n```\r\n\r\n\r\nOne example of how the class is used (still code that was provided by instructor):\r\n```\r\nprivate String processHttpRequest(spark.Request httpRequest, spark.Response httpResponse, Type requestType) {\r\n    setupResponse(httpResponse);\r\n    String jsonString = httpRequest.body();\r\n    try {\r\n        JSONValidator.validate(jsonString, requestType);\r\n        Request requestObj = new Gson().fromJson(jsonString, requestType);\r\n        return buildJSONResponse(requestObj);\r\n    } catch (IOException | BadRequestException e) {                // &lt;---- Here\r\n        log.info(&quot;Bad Request - {}&quot;, e.getMessage());              // &lt;----\r\n        httpResponse.status(HTTP_BAD_REQUEST);\r\n    } catch (Exception e) {\r\n        log.info(&quot;Server Error - &quot;, e);\r\n        httpResponse.status(HTTP_SERVER_ERROR);\r\n    }\r\n    return jsonString;\r\n}\r\n```\r\n\r\n\r\nWhat I have so far (practically nothing):\r\n```\r\npackage &lt;package_name&gt;;\r\n\r\nimport org.junit.jupiter.api.Test;\r\nimport org.junit.jupiter.api.DisplayName;\r\n\r\npublic class TestBadRequestException {\r\n\r\n    @Test\r\n    @DisplayName(&quot;Test Empty BadRequestException Class&quot;)\r\n    public void testBadRequestException() {\r\n        \r\n    }\r\n}\r\n```\r\n\r\nPrior to the start of the semester, I had no experience with JUnit. So, any feedback/references/recommendations are greatly appreciated.\r\n\r\n\r\n### **EDIT (Solution):**\r\n\r\nThe first comment on this post provided the solution I was looking for. I had not occurred to me that it would be this simple.\r\n\r\nThe solution is in the answer below with proper credit.","title":"JUnit Testing: How to test a custom, empty java class that extends Exception?","body":"<p>I am currently attempting to extend test coverage for a school-based-assignment web application after I came across a completely empty class that extends Exception and contains no coverage according to the coverage report.</p>\n<p>Normally, I would assume that something like this could be disregarded. However, our overall test coverage factor directly into our individual grading for this course. Because of this and it being near the end of the semester, I am trying to go through the code flagged within the coverage report line-by-line and tidy up anything I can.</p>\n<p>After going through course content and searches online, I am unsure of how to proceed with writing a test for a class such as this. This server-side class was included in our initial code base that was given to us at the start of the semester by the instructor (we build onto the code base as the semester progresses).</p>\n<p>The entire code for the Java class:</p>\n<pre><code>package &lt;package_name&gt;;\n/*\n * This is a custom exception that fits our personal\n * needs and won't collide with existing issues.\n */\npublic class BadRequestException extends Exception {}\n</code></pre>\n<p>One example of how the class is used (still code that was provided by instructor):</p>\n<pre><code>private String processHttpRequest(spark.Request httpRequest, spark.Response httpResponse, Type requestType) {\n    setupResponse(httpResponse);\n    String jsonString = httpRequest.body();\n    try {\n        JSONValidator.validate(jsonString, requestType);\n        Request requestObj = new Gson().fromJson(jsonString, requestType);\n        return buildJSONResponse(requestObj);\n    } catch (IOException | BadRequestException e) {                // &lt;---- Here\n        log.info(&quot;Bad Request - {}&quot;, e.getMessage());              // &lt;----\n        httpResponse.status(HTTP_BAD_REQUEST);\n    } catch (Exception e) {\n        log.info(&quot;Server Error - &quot;, e);\n        httpResponse.status(HTTP_SERVER_ERROR);\n    }\n    return jsonString;\n}\n</code></pre>\n<p>What I have so far (practically nothing):</p>\n<pre><code>package &lt;package_name&gt;;\n\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.DisplayName;\n\npublic class TestBadRequestException {\n\n    @Test\n    @DisplayName(&quot;Test Empty BadRequestException Class&quot;)\n    public void testBadRequestException() {\n        \n    }\n}\n</code></pre>\n<p>Prior to the start of the semester, I had no experience with JUnit. So, any feedback/references/recommendations are greatly appreciated.</p>\n<h3><strong>EDIT (Solution):</strong></h3>\n<p>The first comment on this post provided the solution I was looking for. I had not occurred to me that it would be this simple.</p>\n<p>The solution is in the answer below with proper credit.</p>\n"},{"tags":["java","zip","response","inputstream","zipinputstream"],"comments":[{"owner":{"account_id":401843,"reputation":89873,"user_id":768644,"display_name":"rzwitserloot"},"score":2,"creation_date":1668620649,"post_id":74464580,"comment_id":131451933,"body_markdown":"bytes are bytes. By turning it into a string, you corrupt it. Don&#39;t do that. Call `.bytes()`.","body":"bytes are bytes. By turning it into a string, you corrupt it. Don&#39;t do that. Call <code>.bytes()</code>."},{"owner":{"account_id":23459045,"reputation":11,"user_id":17514132,"display_name":"FNA"},"score":0,"creation_date":1668679304,"post_id":74464580,"comment_id":131466388,"body_markdown":"I can&#39;t believe I&#39;ve been struggling for a week and really missed this little thing. Thank you it really helped to solve my problem.","body":"I can&#39;t believe I&#39;ve been struggling for a week and really missed this little thing. Thank you it really helped to solve my problem."}],"answers":[{"comments":[{"owner":{"account_id":23459045,"reputation":11,"user_id":17514132,"display_name":"FNA"},"score":0,"creation_date":1668623551,"post_id":74464739,"comment_id":131452951,"body_markdown":"I applied the decode operations, but none of them gave any results. I don&#39;t think this is an encoded file.","body":"I applied the decode operations, but none of them gave any results. I don&#39;t think this is an encoded file."},{"owner":{"account_id":5214588,"reputation":37,"user_id":7180277,"display_name":"Joe Derham"},"score":0,"creation_date":1668628310,"post_id":74464739,"comment_id":131454607,"body_markdown":"You may need to play with the encoding type to something more binary related (application/octet-stream).  What do you plan to do with the data once you&#39;ve loaded it into memory?","body":"You may need to play with the encoding type to something more binary related (application/octet-stream).  What do you plan to do with the data once you&#39;ve loaded it into memory?"},{"owner":{"account_id":23459045,"reputation":11,"user_id":17514132,"display_name":"FNA"},"score":0,"creation_date":1668669747,"post_id":74464739,"comment_id":131463053,"body_markdown":"There is route information in the file, I need to print this information to the database. I want to do this in a cronjob and update the data in the database on certain days of the month.","body":"There is route information in the file, I need to print this information to the database. I want to do this in a cronjob and update the data in the database on certain days of the month."},{"owner":{"account_id":5214588,"reputation":37,"user_id":7180277,"display_name":"Joe Derham"},"score":0,"creation_date":1668702658,"post_id":74464739,"comment_id":131475709,"body_markdown":"See update above.  Good luck Fatma!","body":"See update above.  Good luck Fatma!"}],"tags":[],"owner":{"account_id":5214588,"reputation":37,"user_id":7180277,"display_name":"Joe Derham"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668702557,"creation_date":1668619641,"answer_id":74464739,"question_id":74464580,"body_markdown":"Would it be a matter of encoding type?  String is of type UTF-16 (I think).  Try a different datatype that is more like an array/vector of bytes.\r\n\r\nTry something like what is mentioned here: \r\n[https://stackoverflow.com/questions/9722549/having-trouble-reading-http-response-into-input-stream][1]\r\n\r\n\r\nUpdate: Get the response as a stream of bytes and feed it into a ZipInputStream object as shown here [https://zetcode.com/java/zipinputstream/#:~:text=ZipInputStream%20is%20a%20Java%20class,both%20compressed%20and%20uncompressed%20entries.][2]\r\n\r\nThen iterate over the contained files to find the one you need.  Then retrieve the stream associated with the zipped file.  Then you can read from there.  (I realize that is a bit of handwaving, but it&#39;s been a while since I used Zip files and Java.)  That should get you down the correct path.\r\n\r\n  [1]: https://stackoverflow.com/questions/9722549/having-trouble-reading-http-response-into-input-stream\r\n  [2]: https://zetcode.com/java/zipinputstream/#:~:text=ZipInputStream%20is%20a%20Java%20class,both%20compressed%20and%20uncompressed%20entries.","title":"In Spring Boot Java Extracting the zip file from response without physically saving it","body":"<p>Would it be a matter of encoding type?  String is of type UTF-16 (I think).  Try a different datatype that is more like an array/vector of bytes.</p>\n<p>Try something like what is mentioned here:\n<a href=\"https://stackoverflow.com/questions/9722549/having-trouble-reading-http-response-into-input-stream\">Having trouble reading http response into input stream</a></p>\n<p>Update: Get the response as a stream of bytes and feed it into a ZipInputStream object as shown here <a href=\"https://zetcode.com/java/zipinputstream/#:%7E:text=ZipInputStream%20is%20a%20Java%20class,both%20compressed%20and%20uncompressed%20entries.\" rel=\"nofollow noreferrer\">https://zetcode.com/java/zipinputstream/#:~:text=ZipInputStream%20is%20a%20Java%20class,both%20compressed%20and%20uncompressed%20entries.</a></p>\n<p>Then iterate over the contained files to find the one you need.  Then retrieve the stream associated with the zipped file.  Then you can read from there.  (I realize that is a bit of handwaving, but it's been a while since I used Zip files and Java.)  That should get you down the correct path.</p>\n"}],"owner":{"account_id":23459045,"reputation":11,"user_id":17514132,"display_name":"FNA"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":546,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1668702557,"creation_date":1668618867,"question_id":74464580,"body_markdown":"In Spring Boot the zip file that comes as a response has a corrupted structure before saving, but there is no problem when I save it physically. I need to take the file in the zip file and process the information in the database, but I cannot physically download this file because I am using GCP. How can I extract the file in this zip file that comes as a response?. How can I solve this please help.\r\n\r\nHere is what it looks like in response.body() before saving (part of it):\r\n\r\n\r\n&quot;PK    C`iUq =n )   bu_customerfile_22110703_B001_10292121141]iRI%UvCJ &#215;Myy/=&gt;}8}~}~yzL\r\no0fV29f6$Kc$F/8L_QaZ-qFd4E[(f8D02_P&quot;IAD4D(T$.&lt;,i]FeiMq&lt;*Olmi(&amp;?yy4&lt;QXp@6f-.F*8&quot;IU]EWI \t%@(W8*0cp:L: }Ge&lt;a&quot;\r\n\r\n\r\n\r\n\r\n\r\nHere is the request call:\r\n\r\n\r\n```\r\nOkHttpClient client1 = new OkHttpClient().newBuilder()\r\n        .build();\r\nMediaType mediaType1 = MediaType.parse(&quot;text/plain&quot;);\r\nRequestBody body1 = RequestBody.create(mediaType1, &quot;&quot;);\r\nRequest request1 = new Request.Builder()\r\n        .url(vers)\r\n        .method(&quot;POST&quot;, body1)\r\n        .addHeader(&quot;Cookie&quot;, &quot;ASP.NET_SessionId=44dxexdxass5mtf00udjfwns&quot;)\r\n        .build();\r\nResponse response1 = client1.newCall(request1).execute();\r\n\r\nString data = response1.body().string();\r\n```\r\n\r\n","title":"In Spring Boot Java Extracting the zip file from response without physically saving it","body":"<p>In Spring Boot the zip file that comes as a response has a corrupted structure before saving, but there is no problem when I save it physically. I need to take the file in the zip file and process the information in the database, but I cannot physically download this file because I am using GCP. How can I extract the file in this zip file that comes as a response?. How can I solve this please help.</p>\n<p>Here is what it looks like in response.body() before saving (part of it):</p>\n<p>&quot;PK    C`iUq =n )   bu_customerfile_22110703_B001_10292121141]iRI%UvCJ Myy/=&gt;}8}~}~yzL\no0fV29f6$Kc$F/8L_QaZ-qFd4E[(f8D02_P&quot;IAD4D(T$.&lt;,i]FeiMq&lt;<em>Olmi(&amp;?yy4&lt;QXp@6f-.F</em>8&quot;IU]EWI     %@(W8*0cp:L: }Ge&lt;a&quot;</p>\n<p>Here is the request call:</p>\n<pre><code>OkHttpClient client1 = new OkHttpClient().newBuilder()\n        .build();\nMediaType mediaType1 = MediaType.parse(&quot;text/plain&quot;);\nRequestBody body1 = RequestBody.create(mediaType1, &quot;&quot;);\nRequest request1 = new Request.Builder()\n        .url(vers)\n        .method(&quot;POST&quot;, body1)\n        .addHeader(&quot;Cookie&quot;, &quot;ASP.NET_SessionId=44dxexdxass5mtf00udjfwns&quot;)\n        .build();\nResponse response1 = client1.newCall(request1).execute();\n\nString data = response1.body().string();\n</code></pre>\n"},{"tags":["java","spring","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1668698613,"post_id":74477778,"comment_id":131474064,"body_markdown":"You either need to add an `email` column to your query, or you need to define an explicit result set mapping, or you need to define a DTO without a `email` field.","body":"You either need to add an <code>email</code> column to your query, or you need to define an explicit result set mapping, or you need to define a DTO without a <code>email</code> field."}],"answers":[{"comments":[{"owner":{"account_id":15201372,"reputation":11,"user_id":10969269,"display_name":"Eduardojls"},"score":0,"creation_date":1668702286,"post_id":74478047,"comment_id":131475571,"body_markdown":"Sorry, I didn&#39;t explain myself well. I just updated the post. But what u mean is if in my query I&#39;m missing the email column it&#39;l throw The column name email was not found in this ResultSet right?","body":"Sorry, I didn&#39;t explain myself well. I just updated the post. But what u mean is if in my query I&#39;m missing the email column it&#39;l throw The column name email was not found in this ResultSet right?"}],"tags":[],"owner":{"account_id":26087345,"reputation":7,"user_id":19784706,"display_name":"Kaan Tuberk Avlamaz"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1668698911,"creation_date":1668698911,"answer_id":74478047,"question_id":74477778,"body_markdown":"You have to fill in the selection with your email. Like this:\r\n&quot;String selection = &quot;d.id, d.name, d.email&quot;;&quot;\r\nOr \r\nYou must define a value that will be equivalent to the column.","title":"The column name email was not found in this ResultSet","body":"<p>You have to fill in the selection with your email. Like this:\n&quot;String selection = &quot;d.id, d.name, d.email&quot;;&quot;\nOr\nYou must define a value that will be equivalent to the column.</p>\n"}],"owner":{"account_id":15201372,"reputation":11,"user_id":10969269,"display_name":"Eduardojls"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":127,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1668702194,"creation_date":1668697880,"question_id":74477778,"body_markdown":"I&#39;m doing a dynamic query with **NativeQuery**, where you return one or many columns values. The columns name to be consulted are sent by user through the body of an Endpoint. The query I created is as follow:\r\n\r\n**PostgreSQL Script**\r\n\r\n    SELECT :selection FROM myScheme.myTable\r\n\r\n**NativeQuery Script**\r\n\r\n    String selection = &quot;d.id, d.name&quot;;\r\n    StringBuilder builder = new StringBuilder();\r\n    builder.append(&quot;SELECT &quot; + selection + &quot; FROM myTable d &quot;);\r\n    Query query = em.createNativeQuery(builder.toString());\r\n    List&lt;Tuple&gt; services = query.getResultList();\r\n\r\n**DTO**\r\n\r\n    @Getter\r\n    @Setter\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @Entity\r\n    public class myDTO  {\r\n\r\n       private int id;\r\n       private String name;\r\n       private String email;\r\n    }\r\n\r\nWhile executing my code, I&#39;m getting this error:\r\n\r\n    The column name email was not found in this ResultSet\r\n\r\n**UPDATED**\r\n\r\nI might guess, I&#39;m getting that error because my query is only querying by d.id and d.name (which is fine) since selection doesn&#39;t contain the **d.email**. The **id** an **name** fields of my DTO Class are being filled in, but email don&#39;t, so that the error, isn&#39;t it? \r\n\r\n ","title":"The column name email was not found in this ResultSet","body":"<p>I'm doing a dynamic query with <strong>NativeQuery</strong>, where you return one or many columns values. The columns name to be consulted are sent by user through the body of an Endpoint. The query I created is as follow:</p>\n<p><strong>PostgreSQL Script</strong></p>\n<pre><code>SELECT :selection FROM myScheme.myTable\n</code></pre>\n<p><strong>NativeQuery Script</strong></p>\n<pre><code>String selection = &quot;d.id, d.name&quot;;\nStringBuilder builder = new StringBuilder();\nbuilder.append(&quot;SELECT &quot; + selection + &quot; FROM myTable d &quot;);\nQuery query = em.createNativeQuery(builder.toString());\nList&lt;Tuple&gt; services = query.getResultList();\n</code></pre>\n<p><strong>DTO</strong></p>\n<pre><code>@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\n@Entity\npublic class myDTO  {\n\n   private int id;\n   private String name;\n   private String email;\n}\n</code></pre>\n<p>While executing my code, I'm getting this error:</p>\n<pre><code>The column name email was not found in this ResultSet\n</code></pre>\n<p><strong>UPDATED</strong></p>\n<p>I might guess, I'm getting that error because my query is only querying by d.id and d.name (which is fine) since selection doesn't contain the <strong>d.email</strong>. The <strong>id</strong> an <strong>name</strong> fields of my DTO Class are being filled in, but email don't, so that the error, isn't it?</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc","webflux"],"answers":[{"tags":[],"owner":{"account_id":3870891,"reputation":35,"user_id":3206193,"display_name":"nicari"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668701995,"creation_date":1646307419,"answer_id":71336518,"question_id":71300847,"body_markdown":"Found the problem myself: I was trying to use WebFlux and non-reactive Spring together. I managed to do so by applying the annotation\r\n```\r\n@EnableAutoConfiguration(exclude = {WebMvcAutoConfiguration.class })\r\n```\r\nto the main class, which solved the exception during boot:\r\n```\r\nInvalid bean definition with name &#39;requestMappingHandlerAdapter&#39; defined in class path resource [...]: Cannot register bean definition [...] for bean &#39;requestMappingHandlerAdapter&#39;: There is already [...] bound.\r\n```\r\nbut probably disable some Jackson component generating the problem I was facing.\r\n\r\nSolved by converting the SurveyController into a reactive one by returning `Flux&lt;Survey&gt;` instead of `List&lt;Survey&gt;`","title":"Spring: No converter for [class java.util.ArrayList] with preset Content-Type &#39;null&#39;","body":"<p>Found the problem myself: I was trying to use WebFlux and non-reactive Spring together. I managed to do so by applying the annotation</p>\n<pre><code>@EnableAutoConfiguration(exclude = {WebMvcAutoConfiguration.class })\n</code></pre>\n<p>to the main class, which solved the exception during boot:</p>\n<pre><code>Invalid bean definition with name 'requestMappingHandlerAdapter' defined in class path resource [...]: Cannot register bean definition [...] for bean 'requestMappingHandlerAdapter': There is already [...] bound.\n</code></pre>\n<p>but probably disable some Jackson component generating the problem I was facing.</p>\n<p>Solved by converting the SurveyController into a reactive one by returning <code>Flux&lt;Survey&gt;</code> instead of <code>List&lt;Survey&gt;</code></p>\n"}],"owner":{"account_id":3870891,"reputation":35,"user_id":3206193,"display_name":"nicari"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3463,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1668701995,"creation_date":1646081049,"question_id":71300847,"body_markdown":"I keep getting this error even if the obvious possible causes seems to be taken care of (missing public getters on Survey class, missing jackson from dependency...)\r\n```\r\nServlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.http.converter.HttpMessageNotWritableException: No converter for [class java.util.ArrayList] with preset Content-Type &#39;null&#39;] with root cause\r\n\r\norg.springframework.http.converter.HttpMessageNotWritableException: No converter for [class java.util.ArrayList] with preset Content-Type &#39;null&#39;\r\n```\r\n\r\nController not working:\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/api&quot;)\r\npublic class SurveyController {\r\n\r\n    @Autowired\r\n    SurveyService surveyService;\r\n\r\n    @RequestMapping(value = &quot;/surveys&quot;, method = RequestMethod.GET, produces = MediaType.APPLICATION_JSON_VALUE)\r\n    public @ResponseBody List&lt;Survey&gt; getAllSurveys() {\r\n        List&lt;Survey&gt; surveys = surveyService.findAll();\r\n\r\n        return surveys; // &lt;-- ERROR HERE\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\nThe public getters and setters are beign generated:\r\n```\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\npublic class Survey {\r\n    private String sid;\r\n    private String surveyls_title;\r\n    @Nullable\r\n    private String startdate;\r\n    @Nullable\r\n    private String expires;\r\n    private String active;\r\n}\r\n```\r\n\r\nThe service works as expected returning the list of Surveys\r\n```\r\n@Service\r\npublic class SurveyService implements SurveyServiceInterface{\r\n\r\n    @Autowired\r\n    WebClient webClient;\r\n\r\n    private final String SESSION_KEY = &quot;***************&quot;;\r\n\r\n    public List&lt;Survey&gt; findAll() {\r\n\r\n        RPCRequest&lt;Object&gt; rpcRequest = RPCRequest.builder()\r\n                .method(&quot;list_surveys&quot;)\r\n                .id(1)\r\n                .params(new ArrayList&lt;&gt;(){{\r\n                    add(SESSION_KEY);\r\n                }})\r\n                .build();\r\n\r\n        RPCResponse&lt;Survey&gt; rpcResponse = webClient.post()\r\n                .contentType(MediaType.APPLICATION_JSON)\r\n                .accept(MediaType.APPLICATION_JSON)\r\n                .body(BodyInserters.fromValue(rpcRequest))\r\n                .retrieve()\r\n                .bodyToMono(RPCResponse.class)\r\n                .single()\r\n                .block();\r\n\r\n        return rpcResponse.getResult();\r\n    }\r\n}\r\n```\r\n\r\n```\r\n@Configuration\r\n@EnableWebFlux\r\npublic class WebFluxConfig implements WebFluxConfigurer{\r\n\r\n    @Bean\r\n    public WebClient getWebClient() {\r\n        HttpClient httpClient = HttpClient.create()\r\n                .tcpConfiguration(client -&gt;\r\n                        client.option(ChannelOption.CONNECT_TIMEOUT_MILLIS, 10000)\r\n                                .doOnConnected(conn -&gt; conn\r\n                                        .addHandlerLast(new ReadTimeoutHandler(10))\r\n                                        .addHandlerLast(new WriteTimeoutHandler(10))));\r\n\r\n        ClientHttpConnector connector = new ReactorClientHttpConnector(httpClient.wiretap(true));\r\n\r\n        return WebClient.builder()\r\n                .baseUrl(&quot;https://****.net/***.php/***/remotecontrol&quot;)\r\n                .clientConnector(connector)\r\n                .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\r\n                .exchangeStrategies(ExchangeStrategies.builder().codecs(this::acceptedCodecs).build())\r\n                .build();\r\n    }\r\n\r\n    private void acceptedCodecs(ClientCodecConfigurer clientCodecConfigurer) {\r\n        clientCodecConfigurer.customCodecs().register(new Jackson2JsonEncoder(new ObjectMapper(), MediaType.valueOf(&quot;text/javascript;charset=UTF-8&quot;)));\r\n        clientCodecConfigurer.customCodecs().register(new Jackson2JsonDecoder(new ObjectMapper(), MediaType.valueOf(&quot;text/javascript;charset=UTF-8&quot;)));\r\n    }\r\n}\r\n```\r\n\r\nPOM.xml\r\n\r\n```xml\r\n  &lt;parent&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    &lt;version&gt;2.5.6&lt;/version&gt;\r\n  &lt;/parent&gt;\r\n\r\n  &lt;properties&gt;\r\n    &lt;java.version&gt;17&lt;/java.version&gt;\r\n  &lt;/properties&gt;\r\n\r\n  &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n      &lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n      &lt;version&gt;2.1.210&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n      &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n      &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n  &lt;/dependencies&gt;\r\n\r\n  &lt;build&gt;\r\n    &lt;plugins&gt;\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n  &lt;/build&gt;\r\n```\r\n\r\nDependency tree shows that jackson-databind and jackson-core are present\r\n```txt\r\n[INFO] --- maven-dependency-plugin:3.1.2:tree (default-cli) @ SurveyAPI ---\r\n[INFO] com.**********:SurveyAPI:jar:0.0.1-SNAPSHOT\r\n[INFO] +- org.springframework.boot:spring-boot-starter-web:jar:2.5.6:compile\r\n[INFO] |  +- org.springframework.boot:spring-boot-starter:jar:2.5.6:compile\r\n[INFO] |  |  +- org.springframework.boot:spring-boot:jar:2.5.6:compile\r\n[INFO] |  |  +- org.springframework.boot:spring-boot-autoconfigure:jar:2.5.6:compile\r\n[INFO] |  |  +- org.springframework.boot:spring-boot-starter-logging:jar:2.5.6:compile\r\n[INFO] |  |  |  +- ch.qos.logback:logback-classic:jar:1.2.6:compile\r\n[INFO] |  |  |  |  +- ch.qos.logback:logback-core:jar:1.2.6:compile\r\n[INFO] |  |  |  |  \\- org.slf4j:slf4j-api:jar:1.7.32:compile\r\n[INFO] |  |  |  +- org.apache.logging.log4j:log4j-to-slf4j:jar:2.14.1:compile\r\n[INFO] |  |  |  |  \\- org.apache.logging.log4j:log4j-api:jar:2.14.1:compile\r\n[INFO] |  |  |  \\- org.slf4j:jul-to-slf4j:jar:1.7.32:compile\r\n[INFO] |  |  +- jakarta.annotation:jakarta.annotation-api:jar:1.3.5:compile\r\n[INFO] |  |  +- org.springframework:spring-core:jar:5.3.12:compile\r\n[INFO] |  |  |  \\- org.springframework:spring-jcl:jar:5.3.12:compile\r\n[INFO] |  |  \\- org.yaml:snakeyaml:jar:1.28:compile\r\n[INFO] |  +- org.springframework.boot:spring-boot-starter-json:jar:2.5.6:compile\r\n[INFO] |  |  +- com.fasterxml.jackson.core:jackson-databind:jar:2.12.5:compile\r\n[INFO] |  |  |  +- com.fasterxml.jackson.core:jackson-annotations:jar:2.12.5:compile\r\n[INFO] |  |  |  \\- com.fasterxml.jackson.core:jackson-core:jar:2.12.5:compile\r\n[INFO] |  |  +- com.fasterxml.jackson.datatype:jackson-datatype-jdk8:jar:2.12.5:compile\r\n[INFO] |  |  +- com.fasterxml.jackson.datatype:jackson-datatype-jsr310:jar:2.12.5:compile\r\n[INFO] |  |  \\- com.fasterxml.jackson.module:jackson-module-parameter-names:jar:2.12.5:compile\r\n[INFO] |  +- org.springframework.boot:spring-boot-starter-tomcat:jar:2.5.6:compile\r\n[INFO] |  |  +- org.apache.tomcat.embed:tomcat-embed-core:jar:9.0.54:compile\r\n[INFO] |  |  +- org.apache.tomcat.embed:tomcat-embed-el:jar:9.0.54:compile\r\n[INFO] |  |  \\- org.apache.tomcat.embed:tomcat-embed-websocket:jar:9.0.54:compile\r\n[INFO] |  +- org.springframework:spring-web:jar:5.3.12:compile\r\n[INFO] |  |  \\- org.springframework:spring-beans:jar:5.3.12:compile\r\n[INFO] |  \\- org.springframework:spring-webmvc:jar:5.3.12:compile\r\n[INFO] |     +- org.springframework:spring-aop:jar:5.3.12:compile\r\n[INFO] |     +- org.springframework:spring-context:jar:5.3.12:compile\r\n[INFO] |     \\- org.springframework:spring-expression:jar:5.3.12:compile\r\n[INFO] +- org.springframework.boot:spring-boot-starter-webflux:jar:2.5.6:compile\r\n[INFO] |  +- org.springframework.boot:spring-boot-starter-reactor-netty:jar:2.5.6:compile\r\n[INFO] |  |  \\- io.projectreactor.netty:reactor-netty-http:jar:1.0.12:compile\r\n[INFO] |  |     +- io.netty:netty-codec-http:jar:4.1.69.Final:compile\r\n[INFO] |  |     |  +- io.netty:netty-common:jar:4.1.69.Final:compile\r\n[INFO] |  |     |  +- io.netty:netty-buffer:jar:4.1.69.Final:compile\r\n[INFO] |  |     |  +- io.netty:netty-transport:jar:4.1.69.Final:compile\r\n[INFO] |  |     |  +- io.netty:netty-codec:jar:4.1.69.Final:compile\r\n[INFO] |  |     |  \\- io.netty:netty-handler:jar:4.1.69.Final:compile\r\n[INFO] |  |     +- io.netty:netty-codec-http2:jar:4.1.69.Final:compile\r\n[INFO] |  |     +- io.netty:netty-resolver-dns:jar:4.1.69.Final:compile\r\n[INFO] |  |     |  +- io.netty:netty-resolver:jar:4.1.69.Final:compile\r\n[INFO] |  |     |  \\- io.netty:netty-codec-dns:jar:4.1.69.Final:compile\r\n[INFO] |  |     +- io.netty:netty-resolver-dns-native-macos:jar:osx-x86_64:4.1.69.Final:compile\r\n[INFO] |  |     |  \\- io.netty:netty-transport-native-unix-common:jar:4.1.69.Final:compile\r\n[INFO] |  |     +- io.netty:netty-transport-native-epoll:jar:linux-x86_64:4.1.69.Final:compile\r\n[INFO] |  |     \\- io.projectreactor.netty:reactor-netty-core:jar:1.0.12:compile\r\n[INFO] |  |        \\- io.netty:netty-handler-proxy:jar:4.1.69.Final:compile\r\n[INFO] |  |           \\- io.netty:netty-codec-socks:jar:4.1.69.Final:compile\r\n[INFO] |  \\- org.springframework:spring-webflux:jar:5.3.12:compile\r\n[INFO] |     \\- io.projectreactor:reactor-core:jar:3.4.11:compile\r\n[INFO] |        \\- org.reactivestreams:reactive-streams:jar:1.0.3:compile\r\n[INFO] +- com.h2database:h2:jar:2.1.210:compile\r\n[INFO] \\- org.projectlombok:lombok:jar:1.18.22:provided\r\n```\r\n\r\nDoes anybody know what I&#39;m doing wrong? Thanks","title":"Spring: No converter for [class java.util.ArrayList] with preset Content-Type &#39;null&#39;","body":"<p>I keep getting this error even if the obvious possible causes seems to be taken care of (missing public getters on Survey class, missing jackson from dependency...)</p>\n<pre><code>Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.http.converter.HttpMessageNotWritableException: No converter for [class java.util.ArrayList] with preset Content-Type 'null'] with root cause\n\norg.springframework.http.converter.HttpMessageNotWritableException: No converter for [class java.util.ArrayList] with preset Content-Type 'null'\n</code></pre>\n<p>Controller not working:</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/api&quot;)\npublic class SurveyController {\n\n    @Autowired\n    SurveyService surveyService;\n\n    @RequestMapping(value = &quot;/surveys&quot;, method = RequestMethod.GET, produces = MediaType.APPLICATION_JSON_VALUE)\n    public @ResponseBody List&lt;Survey&gt; getAllSurveys() {\n        List&lt;Survey&gt; surveys = surveyService.findAll();\n\n        return surveys; // &lt;-- ERROR HERE\n    }\n}\n</code></pre>\n<p>The public getters and setters are beign generated:</p>\n<pre><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Survey {\n    private String sid;\n    private String surveyls_title;\n    @Nullable\n    private String startdate;\n    @Nullable\n    private String expires;\n    private String active;\n}\n</code></pre>\n<p>The service works as expected returning the list of Surveys</p>\n<pre><code>@Service\npublic class SurveyService implements SurveyServiceInterface{\n\n    @Autowired\n    WebClient webClient;\n\n    private final String SESSION_KEY = &quot;***************&quot;;\n\n    public List&lt;Survey&gt; findAll() {\n\n        RPCRequest&lt;Object&gt; rpcRequest = RPCRequest.builder()\n                .method(&quot;list_surveys&quot;)\n                .id(1)\n                .params(new ArrayList&lt;&gt;(){{\n                    add(SESSION_KEY);\n                }})\n                .build();\n\n        RPCResponse&lt;Survey&gt; rpcResponse = webClient.post()\n                .contentType(MediaType.APPLICATION_JSON)\n                .accept(MediaType.APPLICATION_JSON)\n                .body(BodyInserters.fromValue(rpcRequest))\n                .retrieve()\n                .bodyToMono(RPCResponse.class)\n                .single()\n                .block();\n\n        return rpcResponse.getResult();\n    }\n}\n</code></pre>\n<pre><code>@Configuration\n@EnableWebFlux\npublic class WebFluxConfig implements WebFluxConfigurer{\n\n    @Bean\n    public WebClient getWebClient() {\n        HttpClient httpClient = HttpClient.create()\n                .tcpConfiguration(client -&gt;\n                        client.option(ChannelOption.CONNECT_TIMEOUT_MILLIS, 10000)\n                                .doOnConnected(conn -&gt; conn\n                                        .addHandlerLast(new ReadTimeoutHandler(10))\n                                        .addHandlerLast(new WriteTimeoutHandler(10))));\n\n        ClientHttpConnector connector = new ReactorClientHttpConnector(httpClient.wiretap(true));\n\n        return WebClient.builder()\n                .baseUrl(&quot;https://****.net/***.php/***/remotecontrol&quot;)\n                .clientConnector(connector)\n                .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n                .exchangeStrategies(ExchangeStrategies.builder().codecs(this::acceptedCodecs).build())\n                .build();\n    }\n\n    private void acceptedCodecs(ClientCodecConfigurer clientCodecConfigurer) {\n        clientCodecConfigurer.customCodecs().register(new Jackson2JsonEncoder(new ObjectMapper(), MediaType.valueOf(&quot;text/javascript;charset=UTF-8&quot;)));\n        clientCodecConfigurer.customCodecs().register(new Jackson2JsonDecoder(new ObjectMapper(), MediaType.valueOf(&quot;text/javascript;charset=UTF-8&quot;)));\n    }\n}\n</code></pre>\n<p>POM.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>  &lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.5.6&lt;/version&gt;\n  &lt;/parent&gt;\n\n  &lt;properties&gt;\n    &lt;java.version&gt;17&lt;/java.version&gt;\n  &lt;/properties&gt;\n\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n      &lt;artifactId&gt;h2&lt;/artifactId&gt;\n      &lt;version&gt;2.1.210&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n      &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n      &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n</code></pre>\n<p>Dependency tree shows that jackson-databind and jackson-core are present</p>\n<pre><code>[INFO] --- maven-dependency-plugin:3.1.2:tree (default-cli) @ SurveyAPI ---\n[INFO] com.**********:SurveyAPI:jar:0.0.1-SNAPSHOT\n[INFO] +- org.springframework.boot:spring-boot-starter-web:jar:2.5.6:compile\n[INFO] |  +- org.springframework.boot:spring-boot-starter:jar:2.5.6:compile\n[INFO] |  |  +- org.springframework.boot:spring-boot:jar:2.5.6:compile\n[INFO] |  |  +- org.springframework.boot:spring-boot-autoconfigure:jar:2.5.6:compile\n[INFO] |  |  +- org.springframework.boot:spring-boot-starter-logging:jar:2.5.6:compile\n[INFO] |  |  |  +- ch.qos.logback:logback-classic:jar:1.2.6:compile\n[INFO] |  |  |  |  +- ch.qos.logback:logback-core:jar:1.2.6:compile\n[INFO] |  |  |  |  \\- org.slf4j:slf4j-api:jar:1.7.32:compile\n[INFO] |  |  |  +- org.apache.logging.log4j:log4j-to-slf4j:jar:2.14.1:compile\n[INFO] |  |  |  |  \\- org.apache.logging.log4j:log4j-api:jar:2.14.1:compile\n[INFO] |  |  |  \\- org.slf4j:jul-to-slf4j:jar:1.7.32:compile\n[INFO] |  |  +- jakarta.annotation:jakarta.annotation-api:jar:1.3.5:compile\n[INFO] |  |  +- org.springframework:spring-core:jar:5.3.12:compile\n[INFO] |  |  |  \\- org.springframework:spring-jcl:jar:5.3.12:compile\n[INFO] |  |  \\- org.yaml:snakeyaml:jar:1.28:compile\n[INFO] |  +- org.springframework.boot:spring-boot-starter-json:jar:2.5.6:compile\n[INFO] |  |  +- com.fasterxml.jackson.core:jackson-databind:jar:2.12.5:compile\n[INFO] |  |  |  +- com.fasterxml.jackson.core:jackson-annotations:jar:2.12.5:compile\n[INFO] |  |  |  \\- com.fasterxml.jackson.core:jackson-core:jar:2.12.5:compile\n[INFO] |  |  +- com.fasterxml.jackson.datatype:jackson-datatype-jdk8:jar:2.12.5:compile\n[INFO] |  |  +- com.fasterxml.jackson.datatype:jackson-datatype-jsr310:jar:2.12.5:compile\n[INFO] |  |  \\- com.fasterxml.jackson.module:jackson-module-parameter-names:jar:2.12.5:compile\n[INFO] |  +- org.springframework.boot:spring-boot-starter-tomcat:jar:2.5.6:compile\n[INFO] |  |  +- org.apache.tomcat.embed:tomcat-embed-core:jar:9.0.54:compile\n[INFO] |  |  +- org.apache.tomcat.embed:tomcat-embed-el:jar:9.0.54:compile\n[INFO] |  |  \\- org.apache.tomcat.embed:tomcat-embed-websocket:jar:9.0.54:compile\n[INFO] |  +- org.springframework:spring-web:jar:5.3.12:compile\n[INFO] |  |  \\- org.springframework:spring-beans:jar:5.3.12:compile\n[INFO] |  \\- org.springframework:spring-webmvc:jar:5.3.12:compile\n[INFO] |     +- org.springframework:spring-aop:jar:5.3.12:compile\n[INFO] |     +- org.springframework:spring-context:jar:5.3.12:compile\n[INFO] |     \\- org.springframework:spring-expression:jar:5.3.12:compile\n[INFO] +- org.springframework.boot:spring-boot-starter-webflux:jar:2.5.6:compile\n[INFO] |  +- org.springframework.boot:spring-boot-starter-reactor-netty:jar:2.5.6:compile\n[INFO] |  |  \\- io.projectreactor.netty:reactor-netty-http:jar:1.0.12:compile\n[INFO] |  |     +- io.netty:netty-codec-http:jar:4.1.69.Final:compile\n[INFO] |  |     |  +- io.netty:netty-common:jar:4.1.69.Final:compile\n[INFO] |  |     |  +- io.netty:netty-buffer:jar:4.1.69.Final:compile\n[INFO] |  |     |  +- io.netty:netty-transport:jar:4.1.69.Final:compile\n[INFO] |  |     |  +- io.netty:netty-codec:jar:4.1.69.Final:compile\n[INFO] |  |     |  \\- io.netty:netty-handler:jar:4.1.69.Final:compile\n[INFO] |  |     +- io.netty:netty-codec-http2:jar:4.1.69.Final:compile\n[INFO] |  |     +- io.netty:netty-resolver-dns:jar:4.1.69.Final:compile\n[INFO] |  |     |  +- io.netty:netty-resolver:jar:4.1.69.Final:compile\n[INFO] |  |     |  \\- io.netty:netty-codec-dns:jar:4.1.69.Final:compile\n[INFO] |  |     +- io.netty:netty-resolver-dns-native-macos:jar:osx-x86_64:4.1.69.Final:compile\n[INFO] |  |     |  \\- io.netty:netty-transport-native-unix-common:jar:4.1.69.Final:compile\n[INFO] |  |     +- io.netty:netty-transport-native-epoll:jar:linux-x86_64:4.1.69.Final:compile\n[INFO] |  |     \\- io.projectreactor.netty:reactor-netty-core:jar:1.0.12:compile\n[INFO] |  |        \\- io.netty:netty-handler-proxy:jar:4.1.69.Final:compile\n[INFO] |  |           \\- io.netty:netty-codec-socks:jar:4.1.69.Final:compile\n[INFO] |  \\- org.springframework:spring-webflux:jar:5.3.12:compile\n[INFO] |     \\- io.projectreactor:reactor-core:jar:3.4.11:compile\n[INFO] |        \\- org.reactivestreams:reactive-streams:jar:1.0.3:compile\n[INFO] +- com.h2database:h2:jar:2.1.210:compile\n[INFO] \\- org.projectlombok:lombok:jar:1.18.22:provided\n</code></pre>\n<p>Does anybody know what I'm doing wrong? Thanks</p>\n"},{"tags":["java","multithreading","dynamic"],"comments":[{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":8,"creation_date":1332774162,"post_id":9874587,"comment_id":12592322,"body_markdown":"*&quot;Any suggestions ??&quot;*  Try writing some code.  Come back to us when you have a **specific** question.  Voting to close.","body":"<i>&quot;Any suggestions ??&quot;</i>  Try writing some code.  Come back to us when you have a <b>specific</b> question.  Voting to close."},{"owner":{"account_id":47564,"reputation":17345,"user_id":140934,"accept_rate":98,"display_name":"Sajad Bahmani"},"score":0,"creation_date":1332774238,"post_id":9874587,"comment_id":12592361,"body_markdown":"use classic concept LOOP","body":"use classic concept LOOP"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1332774240,"post_id":9874587,"comment_id":12592363,"body_markdown":"Well, you could call `new Thread().start()` n times. Where&#39;s the problem?","body":"Well, you could call <code>new Thread().start()</code> n times. Where&#39;s the problem?"}],"answers":[{"tags":[],"owner":{"account_id":60171,"reputation":115485,"user_id":179850,"accept_rate":100,"display_name":"Gray"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1668701826,"creation_date":1332774231,"answer_id":9874617,"question_id":9874587,"body_markdown":"There are a number of ways to do this.  A for loop is the easiest:\r\n\r\n    Thread[] threads = new Thread[numThreadsToCreate];\r\n    for (int i = 0; i &lt; threads.length; i++) {\r\n        threads[i] = new Thread(yourRunnable);\r\n        threads[i].start();\r\n    }\r\n\r\nYour `Runnable` could be something like this:\r\n\r\n    private class MyRunnable implements Runnable {\r\n        public void run() {\r\n            // your code to run in the thread goes here\r\n        }\r\n    }\r\n\r\nYou could also use a thread-pool:\r\n\r\n    ExecutorService threadPool = Executors.newCachedThreadPool();\r\n    for (int i = 0; i &lt; NUM_THREADS; i++) {\r\n        threadPool.submit(yourRunnable);\r\n    }\r\n    // shutdown the pool once we submit the last job, they will continue to run\r\n    threadPool.shutdown();\r\n","title":"How to create threads dynamically?","body":"<p>There are a number of ways to do this.  A for loop is the easiest:</p>\n<pre><code>Thread[] threads = new Thread[numThreadsToCreate];\nfor (int i = 0; i &lt; threads.length; i++) {\n    threads[i] = new Thread(yourRunnable);\n    threads[i].start();\n}\n</code></pre>\n<p>Your <code>Runnable</code> could be something like this:</p>\n<pre><code>private class MyRunnable implements Runnable {\n    public void run() {\n        // your code to run in the thread goes here\n    }\n}\n</code></pre>\n<p>You could also use a thread-pool:</p>\n<pre><code>ExecutorService threadPool = Executors.newCachedThreadPool();\nfor (int i = 0; i &lt; NUM_THREADS; i++) {\n    threadPool.submit(yourRunnable);\n}\n// shutdown the pool once we submit the last job, they will continue to run\nthreadPool.shutdown();\n</code></pre>\n"}],"owner":{"account_id":1313619,"reputation":103,"user_id":1261068,"accept_rate":40,"display_name":"shri ram"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7049,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"closed_date":1332774284,"accepted_answer_id":9874617,"answer_count":1,"score":0,"last_activity_date":1668701826,"creation_date":1332774109,"question_id":9874587,"body_markdown":"I want to create certain number of threads in my program where the number of threads to be created is provided by the user at run-time. Any suggestions ??","title":"How to create threads dynamically?","body":"<p>I want to create certain number of threads in my program where the number of threads to be created is provided by the user at run-time. Any suggestions ??</p>\n"},{"tags":["java","desktop","jna","live-wallpaper"],"comments":[{"owner":{"account_id":606180,"reputation":947,"user_id":311777,"display_name":"ee."},"score":0,"creation_date":1323069835,"post_id":8382049,"comment_id":10345953,"body_markdown":"Can you access under its registry `HKEY_CURRENT_USER\\Control Panel\\Desktop\\ `: `Wallpaper`, `OriginalWallpaper` or `ConvertedWallpaper` entry? [See link](http://hdsurvivor.blogspot.com/2006/05/set-default-wallpaper-for-users-in.html)","body":"Can you access under its registry <code>HKEY_CURRENT_USER\\Control Panel\\Desktop\\ </code>: <code>Wallpaper</code>, <code>OriginalWallpaper</code> or <code>ConvertedWallpaper</code> entry? <a href=\"http://hdsurvivor.blogspot.com/2006/05/set-default-wallpaper-for-users-in.html\" rel=\"nofollow noreferrer\">See link</a>"}],"answers":[{"comments":[{"owner":{"account_id":91502,"reputation":88311,"user_id":251173,"accept_rate":86,"display_name":"Buhake Sindi"},"score":0,"creation_date":1323075202,"post_id":8382793,"comment_id":10346952,"body_markdown":"That was already mentioned on the comment above (except you added the SO link on how to read/write to Windows Registry).","body":"That was already mentioned on the comment above (except you added the SO link on how to read/write to Windows Registry)."}],"tags":[],"owner":{"account_id":451780,"reputation":6004,"user_id":847853,"accept_rate":68,"display_name":"Low Flying Pelican"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1323074752,"creation_date":1323074752,"answer_id":8382793,"question_id":8382049,"body_markdown":"The way to obtain the current desktop wallpaper could different based on the operating system, for windows 7 it can be obtained from following registry path,\r\n\r\n    HKEY_CURRENT_USER\\Control Panel\\Desktop\\Wallpaper\r\n\r\nto read the registry path you can use the method described in following question\r\n\r\nhttps://stackoverflow.com/questions/62289/read-write-to-windows-registry-using-java\r\n\r\n","title":"How to get the path of current active desktop wallpaper using Java","body":"<p>The way to obtain the current desktop wallpaper could different based on the operating system, for windows 7 it can be obtained from following registry path,</p>\n\n<pre><code>HKEY_CURRENT_USER\\Control Panel\\Desktop\\Wallpaper\n</code></pre>\n\n<p>to read the registry path you can use the method described in following question</p>\n\n<p><a href=\"https://stackoverflow.com/questions/62289/read-write-to-windows-registry-using-java\">read/write to Windows Registry using Java</a></p>\n"},{"tags":[],"owner":{"account_id":9520788,"reputation":21,"user_id":7075726,"display_name":"LemonJuiz"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1477492600,"creation_date":1477492600,"answer_id":40265169,"question_id":8382049,"body_markdown":"As [Low Flying Pelican](https://stackoverflow.com/users/847853/low-flying-pelican) and [ee](https://stackoverflow.com/users/311777/ee) said,\r\n\r\n    HKEY_CURRENT_USER\\Control Panel\\Desktop\r\ncontains the key &lt;b&gt;Wallpaper&lt;/b&gt; which has a pointer to the wallpaper. For the command prompt, you can use\r\n\r\n    reg query &quot;HKEY_CURRENT_USER\\Control Panel\\Desktop&quot; /v Wallpaper\r\nto get the location, or using this for native java support:\r\n\r\n    Runtime.getRuntime().exec(&#39;reg query &quot;HKEY_CURRENT_USER\\Control Panel\\Desktop&quot; /v Wallpaper&#39;);","title":"How to get the path of current active desktop wallpaper using Java","body":"<p>As <a href=\"https://stackoverflow.com/users/847853/low-flying-pelican\">Low Flying Pelican</a> and <a href=\"https://stackoverflow.com/users/311777/ee\">ee</a> said,</p>\n\n<pre><code>HKEY_CURRENT_USER\\Control Panel\\Desktop\n</code></pre>\n\n<p>contains the key <b>Wallpaper</b> which has a pointer to the wallpaper. For the command prompt, you can use</p>\n\n<pre><code>reg query \"HKEY_CURRENT_USER\\Control Panel\\Desktop\" /v Wallpaper\n</code></pre>\n\n<p>to get the location, or using this for native java support:</p>\n\n<pre><code>Runtime.getRuntime().exec('reg query \"HKEY_CURRENT_USER\\Control Panel\\Desktop\" /v Wallpaper');\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11726648,"reputation":19553,"user_id":8583692,"display_name":"Mahozad"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668701690,"creation_date":1668432456,"answer_id":74432415,"question_id":8382049,"body_markdown":"Using [JNA library][1]:\r\n\r\n```kotlin\r\nimplementation(&quot;net.java.dev.jna:jna-platform:5.12.1&quot;)\r\n```\r\n\r\nI was able to get the current Wallpaper path like this (tested on Windows 11):\r\n\r\nJava:\r\n\r\n```java\r\nimport com.sun.jna.platform.win32.*;\r\nimport com.sun.jna.platform.win32.WinReg.HKEYByReference;\r\n\r\npublic class Main {\r\n\r\n    public static final String REGISTRY_PATH = &quot;Control Panel\\\\Desktop&quot;;\r\n    public static final String REGISTRY_Key = &quot;WallPaper&quot;;\r\n\r\n    public static void main(String[] args) {\r\n        var hKey = new HKEYByReference();\r\n        var registryAccessResult = openRegistryKey(hKey);\r\n        validate(registryAccessResult);\r\n        var wallpaperPath = getWallpaperPath();\r\n        System.out.println(wallpaperPath);\r\n    }\r\n\r\n    public static int openRegistryKey(HKEYByReference hKey) {\r\n        return Advapi32.INSTANCE.RegOpenKeyEx(\r\n                WinReg.HKEY_CURRENT_USER,\r\n                REGISTRY_PATH,\r\n                0,\r\n                WinNT.KEY_READ,\r\n                hKey\r\n        );\r\n    }\r\n\r\n    public static void validate(int registryAccessResult) {\r\n        if (registryAccessResult != W32Errors.ERROR_SUCCESS) {\r\n            throw new Win32Exception(registryAccessResult);\r\n        }\r\n    }\r\n\r\n    public static String getWallpaperPath() {\r\n        return Advapi32Util.registryGetStringValue(\r\n                WinReg.HKEY_CURRENT_USER,\r\n                REGISTRY_PATH,\r\n                REGISTRY_Key\r\n        );\r\n    }\r\n}\r\n```\r\n\r\nKotlin:\r\n\r\n```kotlin\r\nconst val REGISTRY_PATH = &quot;Control Panel\\\\Desktop&quot;\r\nconst val REGISTRY_Key = &quot;WallPaper&quot;\r\n\r\nfun main() {\r\n    val hKey = HKEYByReference()\r\n    openRegistryKey(hKey).validate()\r\n    val wallpaperPath = getWallpaperPath()\r\n    println(wallpaperPath)\r\n}\r\n\r\nfun openRegistryKey(hKey: HKEYByReference) =\r\n    Advapi32.INSTANCE.RegOpenKeyEx(\r\n        WinReg.HKEY_CURRENT_USER,\r\n        REGISTRY_PATH,\r\n        0,\r\n        WinNT.KEY_READ,\r\n        hKey\r\n    )\r\n\r\nfun RegistryAccessResult.validate() =\r\n    takeIf { it == W32Errors.ERROR_SUCCESS }\r\n        ?: throw Win32Exception(this)\r\n\r\nfun getWallpaperPath(): String =\r\n    Advapi32Util.registryGetStringValue(\r\n        WinReg.HKEY_CURRENT_USER,\r\n        REGISTRY_PATH,\r\n        REGISTRY_Key\r\n    )\r\n```\r\n\r\n---\r\n\r\nYou can also listen for wallpaper changes and get its new path:\r\n\r\n```kotlin\r\nwaitForWallpaperChange(hKey).validate() // Waits until wallpaper is changed\r\nval newWallpaper = getWallpaperPath()\r\n\r\nfun waitForWallpaperChange(hKey: HKEYByReference) =\r\n    Advapi32.INSTANCE.RegNotifyChangeKeyValue(\r\n        hKey.value,\r\n        false,\r\n        WinNT.REG_NOTIFY_CHANGE_LAST_SET,\r\n        null,\r\n        false\r\n    )\r\n```\r\n\r\n\r\n  [1]: https://github.com/java-native-access/jna","title":"How to get the path of current active desktop wallpaper using Java","body":"<p>Using <a href=\"https://github.com/java-native-access/jna\" rel=\"nofollow noreferrer\">JNA library</a>:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>implementation(&quot;net.java.dev.jna:jna-platform:5.12.1&quot;)\n</code></pre>\n<p>I was able to get the current Wallpaper path like this (tested on Windows 11):</p>\n<p>Java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.sun.jna.platform.win32.*;\nimport com.sun.jna.platform.win32.WinReg.HKEYByReference;\n\npublic class Main {\n\n    public static final String REGISTRY_PATH = &quot;Control Panel\\\\Desktop&quot;;\n    public static final String REGISTRY_Key = &quot;WallPaper&quot;;\n\n    public static void main(String[] args) {\n        var hKey = new HKEYByReference();\n        var registryAccessResult = openRegistryKey(hKey);\n        validate(registryAccessResult);\n        var wallpaperPath = getWallpaperPath();\n        System.out.println(wallpaperPath);\n    }\n\n    public static int openRegistryKey(HKEYByReference hKey) {\n        return Advapi32.INSTANCE.RegOpenKeyEx(\n                WinReg.HKEY_CURRENT_USER,\n                REGISTRY_PATH,\n                0,\n                WinNT.KEY_READ,\n                hKey\n        );\n    }\n\n    public static void validate(int registryAccessResult) {\n        if (registryAccessResult != W32Errors.ERROR_SUCCESS) {\n            throw new Win32Exception(registryAccessResult);\n        }\n    }\n\n    public static String getWallpaperPath() {\n        return Advapi32Util.registryGetStringValue(\n                WinReg.HKEY_CURRENT_USER,\n                REGISTRY_PATH,\n                REGISTRY_Key\n        );\n    }\n}\n</code></pre>\n<p>Kotlin:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>const val REGISTRY_PATH = &quot;Control Panel\\\\Desktop&quot;\nconst val REGISTRY_Key = &quot;WallPaper&quot;\n\nfun main() {\n    val hKey = HKEYByReference()\n    openRegistryKey(hKey).validate()\n    val wallpaperPath = getWallpaperPath()\n    println(wallpaperPath)\n}\n\nfun openRegistryKey(hKey: HKEYByReference) =\n    Advapi32.INSTANCE.RegOpenKeyEx(\n        WinReg.HKEY_CURRENT_USER,\n        REGISTRY_PATH,\n        0,\n        WinNT.KEY_READ,\n        hKey\n    )\n\nfun RegistryAccessResult.validate() =\n    takeIf { it == W32Errors.ERROR_SUCCESS }\n        ?: throw Win32Exception(this)\n\nfun getWallpaperPath(): String =\n    Advapi32Util.registryGetStringValue(\n        WinReg.HKEY_CURRENT_USER,\n        REGISTRY_PATH,\n        REGISTRY_Key\n    )\n</code></pre>\n<hr />\n<p>You can also listen for wallpaper changes and get its new path:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>waitForWallpaperChange(hKey).validate() // Waits until wallpaper is changed\nval newWallpaper = getWallpaperPath()\n\nfun waitForWallpaperChange(hKey: HKEYByReference) =\n    Advapi32.INSTANCE.RegNotifyChangeKeyValue(\n        hKey.value,\n        false,\n        WinNT.REG_NOTIFY_CHANGE_LAST_SET,\n        null,\n        false\n    )\n</code></pre>\n"}],"owner":{"account_id":1013180,"reputation":757,"user_id":1025317,"accept_rate":49,"display_name":"pankaj_ar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2220,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1668701690,"creation_date":1323069187,"question_id":8382049,"body_markdown":"I want to make some changes on active desktop wallpaper like adding watermark.\r\n\r\nFor that I need to get the path of the active wallpaper. Adding the watermark I can do.\r\n\r\nThis can be done using JNA library, but I can&#39;t access the file path.\r\n","title":"How to get the path of current active desktop wallpaper using Java","body":"<p>I want to make some changes on active desktop wallpaper like adding watermark.</p>\n<p>For that I need to get the path of the active wallpaper. Adding the watermark I can do.</p>\n<p>This can be done using JNA library, but I can't access the file path.</p>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":16255308,"reputation":401,"user_id":13695861,"display_name":"Marc Bannout"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1668701486,"creation_date":1668701486,"answer_id":74478696,"question_id":74438681,"body_markdown":"Is the method `addFlight(Flight flight)` called from your controller? If that&#39;s the case, you should get a [DTO](https://www.baeldung.com/java-dto-pattern) from your controller that you&#39;ll map in an entity in your service layer.\r\n\r\nFrom the DTO you&#39;ll need to provide the ids of `Airline`, `Airplane` and `Airport` objects so that you can retrieve them from the DB and set them on the `Flight` entity.\r\n\r\nHere is a solution I can suggest:\r\n\r\n```java\r\nvoid addFlight (FlightRequest flightRequest) {\r\n    boolean exists = flightRepository.existsById(flightRequest.flightNumber());\r\n    if (exists) {\r\n        throw new IllegalStateException(&quot;Flight with number&quot; + flight.getFlightNumber() \r\n        + &quot;already exists&quot;);\r\n    }\r\n    \r\n\tFlight flight = new Flight();\r\n\t\r\n    airportRepository.findById(flightRequest.airportOriginId())\r\n\t\t\t\t\t .ifPresentOrElse(airportOrigin -&gt; {  \r\n\t\t\t\t\t      flight.setAirportOrigin(airportOrigin);\r\n\t\t\t            },\r\n\t\t\t\t          () -&gt; new IllegalStateException(...)\r\n\t\t\t\t      );\r\n\r\n    airportRepository.findById(flightRequest.airportDestinationId())\r\n\t\t\t\t\t .ifPresentOrElse(airportDestination -&gt; {  \r\n\t\t\t\t\t      flight.setAirportDestination(airportDestination);\r\n\t\t\t            },\r\n\t\t\t\t          () -&gt; new IllegalStateException(...)\r\n\t\t\t\t      );\r\n\r\n    airlineRepository.findById(flightRequest.airlineId())\r\n\t\t\t\t\t .ifPresentOrElse(airline -&gt; {  \r\n\t\t\t\t\t      flight.setAirline(airline);\r\n\t\t\t            },\r\n\t\t\t\t          () -&gt; new IllegalStateException(...)\r\n\t\t\t\t      );\r\n\r\n    airplaneRepository.findById(flightRequest.airplaneId())\r\n\t\t\t\t\t .ifPresentOrElse(airplane -&gt; {  \r\n\t\t\t\t\t      flight.setAirplane(airplane);\r\n\t\t\t            },\r\n\t\t\t\t          () -&gt; new IllegalStateException(...)\r\n\t\t\t\t      );\r\n\r\n\tflight.setFlightNumber(flightRequest.flightNumber());\r\n\tflight.setDepartureTime(flightRequest.departureTime());\r\n\tflight.setArrivalTime(flightRequest.arrivalTime());\r\n\tflight.setDuration(flightRequest.duration());\r\n\tflight.setPassengers(flightRequest.passengers());\t\r\n\t...\r\n\r\n\tflightRepository.save(flight);\r\n}\r\n```\r\n\r\n```java\r\npublic record FlightRequest(  \r\n\t    String flightNumber,  \r\n        String airportOriginId,  \r\n        String airportDestinationId,  \r\n        Timestamp departureTime,  \r\n        Timestamp arrivalTime,  \r\n        String airlineId,  \r\n        String airplaneId,  \r\n        Time duration,  \r\n        int passengers,\r\n        ...\r\n) {  \r\n}\r\n```\r\n\r\nAnd for updating your `Flight`, you could do it like this:\r\n\r\n```java\r\nFlight updateFlight (FlightRequest flightRequest) {\r\n\tFlight flight = flightRepository.findById(flightRequest.flightNumber())\r\n\t\t\t\t\t\t.orElseThrow(...);\r\n\t\t\t\t\t\t\r\n\t// Same as above without the call for existsById\r\n\t...\r\n}\r\n```\r\n\r\nIf you want to go further, since version 2.7 of Spring Data JPA, you can use `getReferenceById` method instead of `findById`. In that case Spring Data JPA won&#39;t generate an SQL statement to get the entity, in our case we only want to set the foreign keys. You can find more about this [here](https://vladmihalcea.com/spring-data-jpa-findbyid/)","title":"How to update entity with OneToMany relationship in Spring Boot","body":"<p>Is the method <code>addFlight(Flight flight)</code> called from your controller? If that's the case, you should get a <a href=\"https://www.baeldung.com/java-dto-pattern\" rel=\"nofollow noreferrer\">DTO</a> from your controller that you'll map in an entity in your service layer.</p>\n<p>From the DTO you'll need to provide the ids of <code>Airline</code>, <code>Airplane</code> and <code>Airport</code> objects so that you can retrieve them from the DB and set them on the <code>Flight</code> entity.</p>\n<p>Here is a solution I can suggest:</p>\n<pre class=\"lang-java prettyprint-override\"><code>void addFlight (FlightRequest flightRequest) {\n    boolean exists = flightRepository.existsById(flightRequest.flightNumber());\n    if (exists) {\n        throw new IllegalStateException(&quot;Flight with number&quot; + flight.getFlightNumber() \n        + &quot;already exists&quot;);\n    }\n    \n    Flight flight = new Flight();\n    \n    airportRepository.findById(flightRequest.airportOriginId())\n                     .ifPresentOrElse(airportOrigin -&gt; {  \n                          flight.setAirportOrigin(airportOrigin);\n                        },\n                          () -&gt; new IllegalStateException(...)\n                      );\n\n    airportRepository.findById(flightRequest.airportDestinationId())\n                     .ifPresentOrElse(airportDestination -&gt; {  \n                          flight.setAirportDestination(airportDestination);\n                        },\n                          () -&gt; new IllegalStateException(...)\n                      );\n\n    airlineRepository.findById(flightRequest.airlineId())\n                     .ifPresentOrElse(airline -&gt; {  \n                          flight.setAirline(airline);\n                        },\n                          () -&gt; new IllegalStateException(...)\n                      );\n\n    airplaneRepository.findById(flightRequest.airplaneId())\n                     .ifPresentOrElse(airplane -&gt; {  \n                          flight.setAirplane(airplane);\n                        },\n                          () -&gt; new IllegalStateException(...)\n                      );\n\n    flight.setFlightNumber(flightRequest.flightNumber());\n    flight.setDepartureTime(flightRequest.departureTime());\n    flight.setArrivalTime(flightRequest.arrivalTime());\n    flight.setDuration(flightRequest.duration());\n    flight.setPassengers(flightRequest.passengers());   \n    ...\n\n    flightRepository.save(flight);\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public record FlightRequest(  \n        String flightNumber,  \n        String airportOriginId,  \n        String airportDestinationId,  \n        Timestamp departureTime,  \n        Timestamp arrivalTime,  \n        String airlineId,  \n        String airplaneId,  \n        Time duration,  \n        int passengers,\n        ...\n) {  \n}\n</code></pre>\n<p>And for updating your <code>Flight</code>, you could do it like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Flight updateFlight (FlightRequest flightRequest) {\n    Flight flight = flightRepository.findById(flightRequest.flightNumber())\n                        .orElseThrow(...);\n                        \n    // Same as above without the call for existsById\n    ...\n}\n</code></pre>\n<p>If you want to go further, since version 2.7 of Spring Data JPA, you can use <code>getReferenceById</code> method instead of <code>findById</code>. In that case Spring Data JPA won't generate an SQL statement to get the entity, in our case we only want to set the foreign keys. You can find more about this <a href=\"https://vladmihalcea.com/spring-data-jpa-findbyid/\" rel=\"nofollow noreferrer\">here</a></p>\n"}],"owner":{"account_id":14994938,"reputation":134,"user_id":10824642,"display_name":"Raul"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":330,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74478696,"answer_count":1,"score":0,"last_activity_date":1668701486,"creation_date":1668465652,"question_id":74438681,"body_markdown":"I&#39;m new to Spring boot and I&#39;m writing an application to practice, with Postresql as db.\r\nThe application is about aviation. There are 4 entity: Airline, Airplane, Airport and Flight. \r\n\r\nI tried GET, POST and DELETE requests and all works on Airline, Airplane and Airport, but I have a problem trying to add and update Flight.\r\nFlight has 4 ManyToOne relationships, this is the class:\r\n\r\n    @Entity\r\n    @Table\r\n    public class Flight {\r\n        @Id\r\n        @Column(name = &quot;flight_number&quot;)\r\n        private String flightNumber;\r\n\r\n        @ManyToOne\r\n        @JoinColumn(name = &quot;origin&quot;)\r\n        private Airport origin;\r\n\r\n        @ManyToOne\r\n        @JoinColumn(name = &quot;destination&quot;)\r\n        private Airport destination;\r\n\r\n        @Column(name = &quot;departure_time&quot;)\r\n        private Timestamp departureTime;\r\n\r\n        @Column(name = &quot;arrival_time&quot;)\r\n        private Timestamp arrivalTime;\r\n\r\n        @ManyToOne\r\n        @JoinColumn(name = &quot;airline&quot;)\r\n        private Airline airline;\r\n\r\n        @ManyToOne\r\n        @JoinColumn(name = &quot;airplane&quot;)\r\n        private Airplane airplane;\r\n\r\n        private Time duration;\r\n        private int passengers;\r\n        ...\r\n    }\r\n\r\nWhat I don&#39;t understand is how to insert and update this entity without the need to pass the  `Objects` (`Airline` and `Airport`) but only the foreign keys (as when working directly on db).\r\n\r\nHere is my code for add a new flight that requires the objects:\r\n\r\n    public void addFlight(Flight flight) {\r\n        boolean exists = flightRepository.existsById(flight.getFlightNumber());\r\n        if (exists) {\r\n            throw new IllegalStateException(&quot;Flight with number&quot; + flight.getFlightNumber() \r\n            + &quot;already exists&quot;);\r\n        }\r\n        flightRepository.save(flight);\r\n    }\r\n\r\nI also tried writing a specific query for the update in the repository and then call on PUT request, but I get some errors saying that I need to pass Airline and Airport, not strings that represents the IDs of these 2 entities.\r\n\r\n    *@Modifying\r\n    @Query(&quot;update Flight &quot; +\r\n            &quot;set origin = :origin, &quot; +\r\n            &quot;destination = :destination, &quot; +\r\n            &quot;departureTime = :departureTime, &quot; +\r\n            &quot;arrivalTime = :arrivalTime, &quot; +\r\n            &quot;airline = :airline, &quot; +\r\n            &quot;airplane = :airplane, &quot; +\r\n            &quot;passengers = :passengers, &quot; +\r\n            &quot;duration = :duration &quot; +\r\n            &quot;where flightNumber = :flightNumber&quot;)\r\n    void updateFlight(@Param(&quot;flightNumber&quot;) String flightNumber,\r\n                      @Param(&quot;origin&quot;) String origin,\r\n                      @Param(&quot;destination&quot;) String destination,\r\n                      @Param(&quot;departureTime&quot;) Timestamp departureTime,\r\n                      @Param(&quot;arrivalTime&quot;) Timestamp arrivalTime,\r\n                      @Param(&quot;airline&quot;) String airline,\r\n                      @Param(&quot;airplane&quot;) Long airplane,\r\n                      @Param(&quot;passengers&quot;) Integer passengers,\r\n                      @Param(&quot;duration&quot;) Time duration);*/\r\n\r\nTo summarize: I want to know if there is a method to avoid passing the entire Object that represents the ManyToOne relationship during creation and update.","title":"How to update entity with OneToMany relationship in Spring Boot","body":"<p>I'm new to Spring boot and I'm writing an application to practice, with Postresql as db.\nThe application is about aviation. There are 4 entity: Airline, Airplane, Airport and Flight.</p>\n<p>I tried GET, POST and DELETE requests and all works on Airline, Airplane and Airport, but I have a problem trying to add and update Flight.\nFlight has 4 ManyToOne relationships, this is the class:</p>\n<pre><code>@Entity\n@Table\npublic class Flight {\n    @Id\n    @Column(name = &quot;flight_number&quot;)\n    private String flightNumber;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;origin&quot;)\n    private Airport origin;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;destination&quot;)\n    private Airport destination;\n\n    @Column(name = &quot;departure_time&quot;)\n    private Timestamp departureTime;\n\n    @Column(name = &quot;arrival_time&quot;)\n    private Timestamp arrivalTime;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;airline&quot;)\n    private Airline airline;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;airplane&quot;)\n    private Airplane airplane;\n\n    private Time duration;\n    private int passengers;\n    ...\n}\n</code></pre>\n<p>What I don't understand is how to insert and update this entity without the need to pass the  <code>Objects</code> (<code>Airline</code> and <code>Airport</code>) but only the foreign keys (as when working directly on db).</p>\n<p>Here is my code for add a new flight that requires the objects:</p>\n<pre><code>public void addFlight(Flight flight) {\n    boolean exists = flightRepository.existsById(flight.getFlightNumber());\n    if (exists) {\n        throw new IllegalStateException(&quot;Flight with number&quot; + flight.getFlightNumber() \n        + &quot;already exists&quot;);\n    }\n    flightRepository.save(flight);\n}\n</code></pre>\n<p>I also tried writing a specific query for the update in the repository and then call on PUT request, but I get some errors saying that I need to pass Airline and Airport, not strings that represents the IDs of these 2 entities.</p>\n<pre><code>*@Modifying\n@Query(&quot;update Flight &quot; +\n        &quot;set origin = :origin, &quot; +\n        &quot;destination = :destination, &quot; +\n        &quot;departureTime = :departureTime, &quot; +\n        &quot;arrivalTime = :arrivalTime, &quot; +\n        &quot;airline = :airline, &quot; +\n        &quot;airplane = :airplane, &quot; +\n        &quot;passengers = :passengers, &quot; +\n        &quot;duration = :duration &quot; +\n        &quot;where flightNumber = :flightNumber&quot;)\nvoid updateFlight(@Param(&quot;flightNumber&quot;) String flightNumber,\n                  @Param(&quot;origin&quot;) String origin,\n                  @Param(&quot;destination&quot;) String destination,\n                  @Param(&quot;departureTime&quot;) Timestamp departureTime,\n                  @Param(&quot;arrivalTime&quot;) Timestamp arrivalTime,\n                  @Param(&quot;airline&quot;) String airline,\n                  @Param(&quot;airplane&quot;) Long airplane,\n                  @Param(&quot;passengers&quot;) Integer passengers,\n                  @Param(&quot;duration&quot;) Time duration);*/\n</code></pre>\n<p>To summarize: I want to know if there is a method to avoid passing the entire Object that represents the ManyToOne relationship during creation and update.</p>\n"},{"tags":["java","image-processing","colors","imagemagick","jmagick"],"comments":[{"owner":{"account_id":237493,"reputation":11836,"user_id":505714,"accept_rate":87,"display_name":"Alexis Dufrenoy"},"score":0,"creation_date":1340266794,"post_id":10530426,"comment_id":14592918,"body_markdown":"Do you mean the most used shade in the image or the average color?","body":"Do you mean the most used shade in the image or the average color?"}],"answers":[{"tags":[],"owner":{"account_id":368265,"reputation":39137,"user_id":714965,"accept_rate":83,"display_name":"Kai"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1336639779,"creation_date":1336639779,"answer_id":10530518,"question_id":10530426,"body_markdown":"Using plain java you can just iterate over each pixel and count how often each color is contained...\r\n\r\npseudo-code:\r\n\r\n    Map&lt;Color, Integer&gt; color2counter;\r\n    for (x : width) {\r\n       for (y : height) {\r\n          color = image.getPixel(x, y)\r\n          occurrences = color2counter.get(color)\r\n          color2counter.put(color, occurrences + 1)\r\n       }\r\n    }","title":"How can I find dominant color of an image?","body":"<p>Using plain java you can just iterate over each pixel and count how often each color is contained...</p>\n\n<p>pseudo-code:</p>\n\n<pre><code>Map&lt;Color, Integer&gt; color2counter;\nfor (x : width) {\n   for (y : height) {\n      color = image.getPixel(x, y)\n      occurrences = color2counter.get(color)\n      color2counter.put(color, occurrences + 1)\n   }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":960726,"reputation":4256,"user_id":985143,"display_name":"Zaz Gmy"},"comment_count":0,"down_vote_count":1,"up_vote_count":13,"is_accepted":true,"score":12,"last_activity_date":1336639940,"creation_date":1336639940,"answer_id":10530562,"question_id":10530426,"body_markdown":"in java iterate on each pixel and determine color\r\n\r\n    import java.awt.image.BufferedImage;\r\n    import java.io.File;\r\n    import java.util.Collections;\r\n    import java.util.Comparator;\r\n    import java.util.HashMap;\r\n    import java.util.Iterator;\r\n    import java.util.LinkedList;\r\n    import java.util.List;\r\n    import java.util.Map;\r\n    import javax.imageio.ImageIO;\r\n    import javax.imageio.ImageReader;\r\n    import javax.imageio.stream.ImageInputStream;\r\n    \r\n    \r\n    public class ImageTester {\r\n    \r\n    \r\n        public static void main(String args[]) throws Exception {\r\n            File file = new File(&quot;C:\\\\Users\\\\Andrew\\\\Desktop\\\\myImage.gif&quot;);\r\n            ImageInputStream is = ImageIO.createImageInputStream(file);\r\n            Iterator iter = ImageIO.getImageReaders(is);\r\n    \r\n            if (!iter.hasNext())\r\n            {\r\n                System.out.println(&quot;Cannot load the specified file &quot;+ file);\r\n                System.exit(1);\r\n            }\r\n            ImageReader imageReader = (ImageReader)iter.next();\r\n            imageReader.setInput(is);\r\n    \r\n            BufferedImage image = imageReader.read(0);\r\n    \r\n            int height = image.getHeight();\r\n            int width = image.getWidth();\r\n    \r\n            Map m = new HashMap();\r\n            for(int i=0; i &lt; width ; i++)\r\n            {\r\n                for(int j=0; j &lt; height ; j++)\r\n                {\r\n                    int rgb = image.getRGB(i, j);\r\n                    int[] rgbArr = getRGBArr(rgb);                \r\n                    // Filter out grays....                \r\n                    if (!isGray(rgbArr)) {                \r\n                            Integer counter = (Integer) m.get(rgb);   \r\n                            if (counter == null)\r\n                                counter = 0;\r\n                            counter++;                                \r\n                            m.put(rgb, counter);                \r\n                    }                \r\n                }\r\n            }        \r\n            String colourHex = getMostCommonColour(m);\r\n            System.out.println(colourHex);\r\n        }\r\n    \r\n    \r\n        public static String getMostCommonColour(Map map) {\r\n            List list = new LinkedList(map.entrySet());\r\n            Collections.sort(list, new Comparator() {\r\n                  public int compare(Object o1, Object o2) {\r\n                    return ((Comparable) ((Map.Entry) (o1)).getValue())\r\n                      .compareTo(((Map.Entry) (o2)).getValue());\r\n                  }\r\n            });    \r\n            Map.Entry me = (Map.Entry )list.get(list.size()-1);\r\n            int[] rgb= getRGBArr((Integer)me.getKey());\r\n            return Integer.toHexString(rgb[0])+&quot; &quot;+Integer.toHexString(rgb[1])+&quot; &quot;+Integer.toHexString(rgb[2]);        \r\n        }    \r\n    \r\n        public static int[] getRGBArr(int pixel) {\r\n            int alpha = (pixel &gt;&gt; 24) &amp; 0xff;\r\n            int red = (pixel &gt;&gt; 16) &amp; 0xff;\r\n            int green = (pixel &gt;&gt; 8) &amp; 0xff;\r\n            int blue = (pixel) &amp; 0xff;\r\n            return new int[]{red,green,blue};\r\n    \r\n      }\r\n        public static boolean isGray(int[] rgbArr) {\r\n            int rgDiff = rgbArr[0] - rgbArr[1];\r\n            int rbDiff = rgbArr[0] - rgbArr[2];\r\n            // Filter out black, white and grays...... (tolerance within 10 pixels)\r\n            int tolerance = 10;\r\n            if (rgDiff &gt; tolerance || rgDiff &lt; -tolerance) \r\n                if (rbDiff &gt; tolerance || rbDiff &lt; -tolerance) { \r\n                    return false;\r\n                }                 \r\n            return true;\r\n        }\r\n    }","title":"How can I find dominant color of an image?","body":"<p>in java iterate on each pixel and determine color</p>\n\n<pre><code>import java.awt.image.BufferedImage;\nimport java.io.File;\nimport java.util.Collections;\nimport java.util.Comparator;\nimport java.util.HashMap;\nimport java.util.Iterator;\nimport java.util.LinkedList;\nimport java.util.List;\nimport java.util.Map;\nimport javax.imageio.ImageIO;\nimport javax.imageio.ImageReader;\nimport javax.imageio.stream.ImageInputStream;\n\n\npublic class ImageTester {\n\n\n    public static void main(String args[]) throws Exception {\n        File file = new File(\"C:\\\\Users\\\\Andrew\\\\Desktop\\\\myImage.gif\");\n        ImageInputStream is = ImageIO.createImageInputStream(file);\n        Iterator iter = ImageIO.getImageReaders(is);\n\n        if (!iter.hasNext())\n        {\n            System.out.println(\"Cannot load the specified file \"+ file);\n            System.exit(1);\n        }\n        ImageReader imageReader = (ImageReader)iter.next();\n        imageReader.setInput(is);\n\n        BufferedImage image = imageReader.read(0);\n\n        int height = image.getHeight();\n        int width = image.getWidth();\n\n        Map m = new HashMap();\n        for(int i=0; i &lt; width ; i++)\n        {\n            for(int j=0; j &lt; height ; j++)\n            {\n                int rgb = image.getRGB(i, j);\n                int[] rgbArr = getRGBArr(rgb);                \n                // Filter out grays....                \n                if (!isGray(rgbArr)) {                \n                        Integer counter = (Integer) m.get(rgb);   \n                        if (counter == null)\n                            counter = 0;\n                        counter++;                                \n                        m.put(rgb, counter);                \n                }                \n            }\n        }        \n        String colourHex = getMostCommonColour(m);\n        System.out.println(colourHex);\n    }\n\n\n    public static String getMostCommonColour(Map map) {\n        List list = new LinkedList(map.entrySet());\n        Collections.sort(list, new Comparator() {\n              public int compare(Object o1, Object o2) {\n                return ((Comparable) ((Map.Entry) (o1)).getValue())\n                  .compareTo(((Map.Entry) (o2)).getValue());\n              }\n        });    \n        Map.Entry me = (Map.Entry )list.get(list.size()-1);\n        int[] rgb= getRGBArr((Integer)me.getKey());\n        return Integer.toHexString(rgb[0])+\" \"+Integer.toHexString(rgb[1])+\" \"+Integer.toHexString(rgb[2]);        \n    }    \n\n    public static int[] getRGBArr(int pixel) {\n        int alpha = (pixel &gt;&gt; 24) &amp; 0xff;\n        int red = (pixel &gt;&gt; 16) &amp; 0xff;\n        int green = (pixel &gt;&gt; 8) &amp; 0xff;\n        int blue = (pixel) &amp; 0xff;\n        return new int[]{red,green,blue};\n\n  }\n    public static boolean isGray(int[] rgbArr) {\n        int rgDiff = rgbArr[0] - rgbArr[1];\n        int rbDiff = rgbArr[0] - rgbArr[2];\n        // Filter out black, white and grays...... (tolerance within 10 pixels)\n        int tolerance = 10;\n        if (rgDiff &gt; tolerance || rgDiff &lt; -tolerance) \n            if (rbDiff &gt; tolerance || rbDiff &lt; -tolerance) { \n                return false;\n            }                 \n        return true;\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1217232,"reputation":1393,"user_id":1184571,"accept_rate":58,"display_name":"Er&#231;in Ak&#231;ay"},"score":0,"creation_date":1336640406,"post_id":10530604,"comment_id":13621501,"body_markdown":"i used jamagick for which color is used as RGB type but with this way i only can find avarage clor of image. But i have an idea i can crop image of middle so i can find avarage color of that part it will give nearly same color again. I find dominant color only :/","body":"i used jamagick for which color is used as RGB type but with this way i only can find avarage clor of image. But i have an idea i can crop image of middle so i can find avarage color of that part it will give nearly same color again. I find dominant color only :/"},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1336643838,"post_id":10530604,"comment_id":13622844,"body_markdown":"@Er&#231;inAk&#231;ay If you want to crop the image, surely you want the main colour at the borders. e.g. say you have a large square surrounded by white. You want to detect the colour of the white to crop that, not the square.","body":"@Er&#231;inAk&#231;ay If you want to crop the image, surely you want the main colour at the borders. e.g. say you have a large square surrounded by white. You want to detect the colour of the white to crop that, not the square."}],"tags":[],"owner":{"account_id":1476155,"reputation":770,"user_id":1386498,"accept_rate":69,"display_name":"DMor"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1336640107,"creation_date":1336640107,"answer_id":10530604,"question_id":10530426,"body_markdown":"assuming your using additive color scheme, where (0,0,0) is black and (255, 255, 255) is white (correct me if i&#39;m mistaken). Also, if you just want to find the dominant color out of RGB:\r\n\r\nOne idea I have, which any of you are free to scrutinize is to have 3 variables that each store one of the RGB values and add to each of them the appropriate value of every pixel in the image and then divide by (255*numOfPixels) to get a ratio of color. Then compare the 3 ratios: .60 for red and .5 for green would mean red is more dominant.\r\n\r\nThis is just an idea, and might need tweaking...","title":"How can I find dominant color of an image?","body":"<p>assuming your using additive color scheme, where (0,0,0) is black and (255, 255, 255) is white (correct me if i'm mistaken). Also, if you just want to find the dominant color out of RGB:</p>\n\n<p>One idea I have, which any of you are free to scrutinize is to have 3 variables that each store one of the RGB values and add to each of them the appropriate value of every pixel in the image and then divide by (255*numOfPixels) to get a ratio of color. Then compare the 3 ratios: .60 for red and .5 for green would mean red is more dominant.</p>\n\n<p>This is just an idea, and might need tweaking...</p>\n"},{"tags":[],"owner":{"account_id":1246269,"reputation":3386,"user_id":1207655,"accept_rate":83,"display_name":"Martin Wilson"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1336645293,"creation_date":1336645293,"answer_id":10532018,"question_id":10530426,"body_markdown":"This is a tricky problem. For example, if you have a small area of exactly the same colour and a large area of slightly different shades of a different colour then simply looking for the colour that is used the most is unlikely to give you result you want. You would get a better result by defining a set of colours and, for each, the ranges of RGB values that you consider to &#39;be&#39; that colour.\r\n\r\nThis topic is discussed at length on the ImageMagick discourse server, for example:\r\nhttp://www.imagemagick.org/discourse-server/viewtopic.php?f=1&amp;t=12878\r\n\r\nSee also https://stackoverflow.com/questions/5050250/fast-way-of-getting-the-dominant-color-of-an-image","title":"How can I find dominant color of an image?","body":"<p>This is a tricky problem. For example, if you have a small area of exactly the same colour and a large area of slightly different shades of a different colour then simply looking for the colour that is used the most is unlikely to give you result you want. You would get a better result by defining a set of colours and, for each, the ranges of RGB values that you consider to 'be' that colour.</p>\n\n<p>This topic is discussed at length on the ImageMagick discourse server, for example:\n<a href=\"http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&amp;t=12878\" rel=\"nofollow noreferrer\">http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&amp;t=12878</a></p>\n\n<p>See also <a href=\"https://stackoverflow.com/questions/5050250/fast-way-of-getting-the-dominant-color-of-an-image\">Fast way of getting the dominant color of an image</a></p>\n"},{"comments":[{"owner":{"account_id":4254130,"reputation":13758,"user_id":3480246,"display_name":"Jan"},"score":0,"creation_date":1588769930,"post_id":17185416,"comment_id":109025723,"body_markdown":"Hi @pieroxy, this looks promising - yet the translation to Java doesn&#39;t feel that trivial to me - at least on first glimpse :-)","body":"Hi @pieroxy, this looks promising - yet the translation to Java doesn&#39;t feel that trivial to me - at least on first glimpse :-)"}],"tags":[],"owner":{"account_id":1599577,"reputation":1009,"user_id":1480910,"display_name":"pieroxy"},"comment_count":1,"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1371627311,"creation_date":1371627311,"answer_id":17185416,"question_id":10530426,"body_markdown":"I just released a very simple algorithm that can be translated in Java trivially. It is called &lt;a href=&quot;http://pieroxy.net/blog/pages/color-finder/index.html&quot;&gt;color-finder&lt;/a&gt; and works in JavaScript. \r\n\r\nThe proposed solutions in this thread can be thrown off by a few white characters in the image, whereas mine really tries to find the most prominent color, even if all the pixels aren&#39;t really exactly of the same color.\r\n\r\n&lt;a href=&quot;http://pieroxy.net/blog/pages/color-finder/demo.html&quot;&gt;Here is a live demo&lt;/a&gt;.\r\n\r\nLet me know if you find that useful.","title":"How can I find dominant color of an image?","body":"<p>I just released a very simple algorithm that can be translated in Java trivially. It is called <a href=\"http://pieroxy.net/blog/pages/color-finder/index.html\" rel=\"noreferrer\">color-finder</a> and works in JavaScript. </p>\n\n<p>The proposed solutions in this thread can be thrown off by a few white characters in the image, whereas mine really tries to find the most prominent color, even if all the pixels aren't really exactly of the same color.</p>\n\n<p><a href=\"http://pieroxy.net/blog/pages/color-finder/demo.html\" rel=\"noreferrer\">Here is a live demo</a>.</p>\n\n<p>Let me know if you find that useful.</p>\n"},{"tags":[],"owner":{"account_id":313841,"reputation":3065,"user_id":628694,"display_name":"Khai Nguyen"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1435520460,"creation_date":1435520460,"answer_id":31103997,"question_id":10530426,"body_markdown":"In other way, we can done this job with Color Thief library. More information can be found [here][1] and [here][2].\r\n\r\nCredit to @svenwoltmann and @lokeshdhakar.\r\n\r\n\r\n  [1]: https://github.com/SvenWoltmann/color-thief-java\r\n  [2]: http://lokeshdhakar.com/projects/color-thief/","title":"How can I find dominant color of an image?","body":"<p>In other way, we can done this job with Color Thief library. More information can be found <a href=\"https://github.com/SvenWoltmann/color-thief-java\" rel=\"nofollow\">here</a> and <a href=\"http://lokeshdhakar.com/projects/color-thief/\" rel=\"nofollow\">here</a>.</p>\n\n<p>Credit to @svenwoltmann and @lokeshdhakar.</p>\n"},{"tags":[],"owner":{"account_id":11726648,"reputation":19553,"user_id":8583692,"display_name":"Mahozad"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1668701450,"creation_date":1668701085,"answer_id":74478587,"question_id":10530426,"body_markdown":"We can use [Material color utilities library](https://github.com/material-foundation/material-color-utilities) which is currently available for Java/Kotlin, C++, Dart, TypeScript.\r\n\r\nThe colors may not necessarily be the most frequent colors but dominant colors appropriate for [Material 3 design system](https://m3.material.io/styles/color/dynamic-color/overview) and appropriate to be used on light or dark themes in apps.\r\n\r\nThe library is primarily used on apps for Android 12 and above and also on the [Material Design website][1] itself but I tested it for myself and got good results.\r\n\r\nTo use it, copy-paste the code on the [Material color utilities repository](https://github.com/material-foundation/material-color-utilities) for your desired language to your project and then you can extract dominant colors and color schemes.\r\n\r\nHere is an example for Java and Kotlin:\r\n\r\nJava:\r\n\r\n```java\r\nvar MAX_DESIRED_COLOR_COUNT = 128;\r\nvar file = new File(&quot;my-image.jpg&quot;);\r\nvar image = ImageIO.read(file);\r\nvar pixels = image.getRGB(0, 0, image.getWidth(), image.getHeight(), null, 0, image.getWidth());\r\nvar colorFrequency = QuantizerCelebi.quantize(pixels, MAX_DESIRED_COLOR_COUNT);\r\nvar decentColors = Score.score(colorFrequency);\r\nvar desiredColor = decentColors.get(0);\r\n// You can take the desiredColor or any other decentColors and forget the rest of code below\r\n\r\n\r\n// Could also use Scheme.dark(desiredColor); to get colors suitable for dark themes\r\nvar colorScheme = Scheme.light(desiredColor);\r\nSystem.out.println(&quot;Decent colors: &quot; + decentColors);\r\nSystem.out.println(&quot;Primary color (light theme): &quot; + colorScheme.getPrimary());\r\n```\r\n\r\nKotlin:\r\n\r\n```kotlin\r\nval MAX_DESIRED_COLOR_COUNT = 128\r\nval file = File(&quot;my-image.jpg&quot;)\r\nval image = ImageIO.read(file)\r\nval pixels = image.getRGB(0, 0, image.width, image.height, null, 0, image.width)\r\nval colorFrequency = QuantizerCelebi.quantize(pixels, MAX_DESIRED_COLOR_COUNT)\r\nval decentColors = Score.score(colorFrequency)\r\nval desiredColor = decentColors.first()\r\n// You can take the desiredColor or any other decentColors and forget the rest of code below\r\n\r\n\r\n// Could also use Scheme.dark(desiredColor) to get colors suitable for dark themes\r\nval colorScheme = Scheme.light(desiredColor)\r\nprintln(&quot;Decent colors: ${decentColors.joinToString { it.toHexString() }}&quot;)\r\nprintln(&quot;Primary color (light theme): ${colorScheme.primary.toHexString()}&quot;)\r\n\r\nfun Int.toHexString() = &quot;#%06X&quot;.format(this and 0xFFFFFF)\r\n```\r\n\r\nLearn more about [Material Design color system and color roles here](https://m3.material.io/styles/color/the-color-system/key-colors-tones) (like `colorScheme.primary` used in the above code snippets).\r\n\r\n  [1]: https://m3.material.io/","title":"How can I find dominant color of an image?","body":"<p>We can use <a href=\"https://github.com/material-foundation/material-color-utilities\" rel=\"nofollow noreferrer\">Material color utilities library</a> which is currently available for Java/Kotlin, C++, Dart, TypeScript.</p>\n<p>The colors may not necessarily be the most frequent colors but dominant colors appropriate for <a href=\"https://m3.material.io/styles/color/dynamic-color/overview\" rel=\"nofollow noreferrer\">Material 3 design system</a> and appropriate to be used on light or dark themes in apps.</p>\n<p>The library is primarily used on apps for Android 12 and above and also on the <a href=\"https://m3.material.io/\" rel=\"nofollow noreferrer\">Material Design website</a> itself but I tested it for myself and got good results.</p>\n<p>To use it, copy-paste the code on the <a href=\"https://github.com/material-foundation/material-color-utilities\" rel=\"nofollow noreferrer\">Material color utilities repository</a> for your desired language to your project and then you can extract dominant colors and color schemes.</p>\n<p>Here is an example for Java and Kotlin:</p>\n<p>Java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>var MAX_DESIRED_COLOR_COUNT = 128;\nvar file = new File(&quot;my-image.jpg&quot;);\nvar image = ImageIO.read(file);\nvar pixels = image.getRGB(0, 0, image.getWidth(), image.getHeight(), null, 0, image.getWidth());\nvar colorFrequency = QuantizerCelebi.quantize(pixels, MAX_DESIRED_COLOR_COUNT);\nvar decentColors = Score.score(colorFrequency);\nvar desiredColor = decentColors.get(0);\n// You can take the desiredColor or any other decentColors and forget the rest of code below\n\n\n// Could also use Scheme.dark(desiredColor); to get colors suitable for dark themes\nvar colorScheme = Scheme.light(desiredColor);\nSystem.out.println(&quot;Decent colors: &quot; + decentColors);\nSystem.out.println(&quot;Primary color (light theme): &quot; + colorScheme.getPrimary());\n</code></pre>\n<p>Kotlin:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val MAX_DESIRED_COLOR_COUNT = 128\nval file = File(&quot;my-image.jpg&quot;)\nval image = ImageIO.read(file)\nval pixels = image.getRGB(0, 0, image.width, image.height, null, 0, image.width)\nval colorFrequency = QuantizerCelebi.quantize(pixels, MAX_DESIRED_COLOR_COUNT)\nval decentColors = Score.score(colorFrequency)\nval desiredColor = decentColors.first()\n// You can take the desiredColor or any other decentColors and forget the rest of code below\n\n\n// Could also use Scheme.dark(desiredColor) to get colors suitable for dark themes\nval colorScheme = Scheme.light(desiredColor)\nprintln(&quot;Decent colors: ${decentColors.joinToString { it.toHexString() }}&quot;)\nprintln(&quot;Primary color (light theme): ${colorScheme.primary.toHexString()}&quot;)\n\nfun Int.toHexString() = &quot;#%06X&quot;.format(this and 0xFFFFFF)\n</code></pre>\n<p>Learn more about <a href=\"https://m3.material.io/styles/color/the-color-system/key-colors-tones\" rel=\"nofollow noreferrer\">Material Design color system and color roles here</a> (like <code>colorScheme.primary</code> used in the above code snippets).</p>\n"}],"owner":{"account_id":1217232,"reputation":1393,"user_id":1184571,"accept_rate":58,"display_name":"Er&#231;in Ak&#231;ay"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24402,"favorite_count":0,"down_vote_count":1,"up_vote_count":16,"accepted_answer_id":10530562,"answer_count":7,"score":15,"last_activity_date":1668701450,"creation_date":1336639446,"question_id":10530426,"body_markdown":"Can we find which color is dominant in an image using Java, [ImageMagick][1], or [JMagick][2]?\r\n\r\n\r\n  [1]: https://github.com/ImageMagick/ImageMagick\r\n  [2]: https://sourceforge.net/projects/jmagick/","title":"How can I find dominant color of an image?","body":"<p>Can we find which color is dominant in an image using Java, <a href=\"https://github.com/ImageMagick/ImageMagick\" rel=\"nofollow noreferrer\">ImageMagick</a>, or <a href=\"https://sourceforge.net/projects/jmagick/\" rel=\"nofollow noreferrer\">JMagick</a>?</p>\n"},{"tags":["java","http","post","https","apache-httpclient-4.x"],"comments":[{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":0,"creation_date":1655832917,"post_id":72646808,"comment_id":128423533,"body_markdown":"try `-H &quot;Content-Type: application/json; charset=UTF-8&quot;","body":"try `-H &quot;Content-Type: application/json; charset=UTF-8&quot;"}],"answers":[{"tags":[],"owner":{"account_id":25265517,"reputation":1,"user_id":19095770,"display_name":"jensvannerum"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668700918,"creation_date":1668700445,"answer_id":74478426,"question_id":72646808,"body_markdown":"If you worry about missing headers just `httpPost.getAllHeaders()`\r\n\r\nHere is some ugly code I used to debug my httpPosts as cUrl requests\r\n\r\n```\r\n    public String httpPostObjectAsCurl(HttpPost httpPost) throws IOException {\r\n        StringBuilder curlRequest = new StringBuilder();\r\n        curlRequest.append(&quot;curl --location&quot;)\r\n                   .append(&quot; --request &quot;)\r\n                   .append(httpPost.getMethod())\r\n                   .append(&quot; &#39;&quot;)\r\n                   .append(httpPost.getURI())\r\n                   .append(&quot;&#39; \\\\&quot;);\r\n\r\n        Header[] headers = httpPost.getAllHeaders();\r\n        for (Header header: headers) {\r\n            curlRequest.append(&quot;\\n--header &#39;&quot;)\r\n                       .append(header.getName())\r\n                       .append(&quot;: &quot;)\r\n                       .append(header.getValue())\r\n                       .append(&quot;&#39; \\\\&quot;);\r\n        }\r\n        curlRequest.append(&quot;\\n--data-raw &#39;&quot;)\r\n                   .append(EntityUtils.toString(httpPost.getEntity(), StandardCharsets.UTF_8))\r\n                   .append(&quot;&#39;&quot;);\r\n\r\n        return curlRequest.toString();\r\n    }\r\n```","title":"What is the curl equivalent command for this code for POST written using DefaultHttpClient library(httpclient 4.5 version)","body":"<p>If you worry about missing headers just <code>httpPost.getAllHeaders()</code></p>\n<p>Here is some ugly code I used to debug my httpPosts as cUrl requests</p>\n<pre><code>    public String httpPostObjectAsCurl(HttpPost httpPost) throws IOException {\n        StringBuilder curlRequest = new StringBuilder();\n        curlRequest.append(&quot;curl --location&quot;)\n                   .append(&quot; --request &quot;)\n                   .append(httpPost.getMethod())\n                   .append(&quot; '&quot;)\n                   .append(httpPost.getURI())\n                   .append(&quot;' \\\\&quot;);\n\n        Header[] headers = httpPost.getAllHeaders();\n        for (Header header: headers) {\n            curlRequest.append(&quot;\\n--header '&quot;)\n                       .append(header.getName())\n                       .append(&quot;: &quot;)\n                       .append(header.getValue())\n                       .append(&quot;' \\\\&quot;);\n        }\n        curlRequest.append(&quot;\\n--data-raw '&quot;)\n                   .append(EntityUtils.toString(httpPost.getEntity(), StandardCharsets.UTF_8))\n                   .append(&quot;'&quot;);\n\n        return curlRequest.toString();\n    }\n</code></pre>\n"}],"owner":{"account_id":15442554,"reputation":57,"user_id":11140659,"display_name":"Srikar Rao"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1668700918,"creation_date":1655386630,"question_id":72646808,"body_markdown":"Here is the code we are using to hit the POST endpoint -\r\n\r\n```\r\nDefaultHttpClient client = new DefaultHttpClient();\r\n\t\ttry {\r\n\t\t\t//Create POST with REQUEST_TOKEN URL\r\n\t\t\tHttpPost post = new HttpPost(Url + REQUEST_TOKEN_URI);\r\n\t\t\tpost.setHeader(HTTP.CONTENT_TYPE, &quot;application/json; charset=UTF-8&quot;);\r\n\t\t\t\r\n\t\t\tRequestAuthTokenBody requestBody = new RequestAuthTokenBody();\r\n\t\t\trequestBody.setEmail(user.getEmail());\r\n\t\t\trequestBody.setToken(user.getToken());\r\n\t\t\trequestBody.setUUID(user.getAccountUUID());\r\n\t\t\t\r\n\t\t\t//Generate JSON from object\r\n\t\t\tString jsonRequest = mapper.writeValueAsString(requestBody);\r\n\t\t\t\r\n\t\t\t//Set request body\r\n\t\t\tStringEntity entity = new StringEntity(jsonRequest);\r\n\t\t\tentity.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE, &quot;application/json; charset=UTF-8&quot;));\r\n\t\t\tpost.setEntity(entity);\r\n\r\n```\r\n\r\nCurrently this gives a 500 response, but if we remove this code segment below\r\n\r\n```\r\nentity.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE, &quot;application/json; charset=UTF-8&quot;));\r\n\t\t\tpost.setEntity(entity);\r\n```\r\nIt works and gives us a 200 response.\r\n\r\nThe curl command we have currently -\r\n\r\n```\r\ncurl -vwX POST [URL(https)] -H &quot;Content-Type: application/json&quot; -d &#39;[some JSON data]&#39;\r\n```\r\nAre we missing some headers here when trying to replicate the 500 error, cos with this curl we get a 200 response. How to add additional headers with respect to -entity.setContentEncoding() as seen in code to the curl command.\r\nI can assure we have the details for the URL and the json data to be set in CURL to be correct and checked multiple times, the issue only seems to be with the missing headers/header combination.","title":"What is the curl equivalent command for this code for POST written using DefaultHttpClient library(httpclient 4.5 version)","body":"<p>Here is the code we are using to hit the POST endpoint -</p>\n<pre><code>DefaultHttpClient client = new DefaultHttpClient();\n        try {\n            //Create POST with REQUEST_TOKEN URL\n            HttpPost post = new HttpPost(Url + REQUEST_TOKEN_URI);\n            post.setHeader(HTTP.CONTENT_TYPE, &quot;application/json; charset=UTF-8&quot;);\n            \n            RequestAuthTokenBody requestBody = new RequestAuthTokenBody();\n            requestBody.setEmail(user.getEmail());\n            requestBody.setToken(user.getToken());\n            requestBody.setUUID(user.getAccountUUID());\n            \n            //Generate JSON from object\n            String jsonRequest = mapper.writeValueAsString(requestBody);\n            \n            //Set request body\n            StringEntity entity = new StringEntity(jsonRequest);\n            entity.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE, &quot;application/json; charset=UTF-8&quot;));\n            post.setEntity(entity);\n\n</code></pre>\n<p>Currently this gives a 500 response, but if we remove this code segment below</p>\n<pre><code>entity.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE, &quot;application/json; charset=UTF-8&quot;));\n            post.setEntity(entity);\n</code></pre>\n<p>It works and gives us a 200 response.</p>\n<p>The curl command we have currently -</p>\n<pre><code>curl -vwX POST [URL(https)] -H &quot;Content-Type: application/json&quot; -d '[some JSON data]'\n</code></pre>\n<p>Are we missing some headers here when trying to replicate the 500 error, cos with this curl we get a 200 response. How to add additional headers with respect to -entity.setContentEncoding() as seen in code to the curl command.\nI can assure we have the details for the URL and the json data to be set in CURL to be correct and checked multiple times, the issue only seems to be with the missing headers/header combination.</p>\n"},{"tags":["java","file-handling"],"comments":[{"owner":{"account_id":15856821,"reputation":2451,"user_id":11441011,"display_name":"maloomeister"},"score":2,"creation_date":1668673359,"post_id":74472091,"comment_id":131464195,"body_markdown":"Does this answer your question? [Java FileWriter with append mode](https://stackoverflow.com/questions/1225146/java-filewriter-with-append-mode)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/1225146/java-filewriter-with-append-mode\">Java FileWriter with append mode</a>"},{"owner":{"account_id":15856821,"reputation":2451,"user_id":11441011,"display_name":"maloomeister"},"score":1,"creation_date":1668673472,"post_id":74472091,"comment_id":131464245,"body_markdown":"In short: use the constructor with append mode [`new FileWriter(File file, boolean append)`](https://docs.oracle.com/javase/8/docs/api/java/io/FileWriter.html#FileWriter-java.io.File-boolean-).","body":"In short: use the constructor with append mode <a href=\"https://docs.oracle.com/javase/8/docs/api/java/io/FileWriter.html#FileWriter-java.io.File-boolean-\" rel=\"nofollow noreferrer\"><code>new FileWriter(File file, boolean append)</code></a>."},{"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"score":1,"creation_date":1668673603,"post_id":74472091,"comment_id":131464299,"body_markdown":"The `while` loop in `createNote` is useless because both branches of the `if` contain a `break`.\nI can&#39;t see the code that reads the file. \nYou&#39;d be better off using the append mode as suggested by @maloomeister.","body":"The <code>while</code> loop in <code>createNote</code> is useless because both branches of the <code>if</code> contain a <code>break</code>. I can&#39;t see the code that reads the file.  You&#39;d be better off using the append mode as suggested by @maloomeister."},{"owner":{"account_id":26843690,"reputation":11,"user_id":20429783,"display_name":"dwextit"},"score":0,"creation_date":1668673943,"post_id":74472091,"comment_id":131464404,"body_markdown":"that doesn&#39;t work for me\nif u want to see, the full code is here: https://replit.com/join/fgjspcbfpq-dexterlanot","body":"that doesn&#39;t work for me if u want to see, the full code is here: <a href=\"https://replit.com/join/fgjspcbfpq-dexterlanot\" rel=\"nofollow noreferrer\">replit.com/join/fgjspcbfpq-dexterlanot</a>"}],"answers":[{"tags":[],"owner":{"account_id":26959943,"reputation":11,"user_id":20527747,"display_name":"Positronator"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668676851,"creation_date":1668676851,"answer_id":74472921,"question_id":74472091,"body_markdown":"Your code currently does the following:\r\n\r\nYou enter something (X) for the first time:\r\n\r\n - It gets added to the ArrayList \r\n - The ArrayList gets written into the file \r\n - Your file now contains: X\r\n\r\nYou enter something second (Y):\r\n - It gets added to the ArrayList (Which now contains: X, Y)\r\n - The ArrayList gets written into the file\r\n - Your file now contains: X + newline + Y\r\n\r\nYour Problem is, that everytime you create a new FileWrite it overwrites your file.\r\n\r\nThis can be avoided by using the constructor like this:\r\n\r\n    FileWriter writer = new FileWriter(&quot;notes.data&quot;, true);\r\n\r\nThis sets it into the append mode and therefore keeps previous data in the file","title":"Retrieve lines in txt file and append new inputs from the user java","body":"<p>Your code currently does the following:</p>\n<p>You enter something (X) for the first time:</p>\n<ul>\n<li>It gets added to the ArrayList</li>\n<li>The ArrayList gets written into the file</li>\n<li>Your file now contains: X</li>\n</ul>\n<p>You enter something second (Y):</p>\n<ul>\n<li>It gets added to the ArrayList (Which now contains: X, Y)</li>\n<li>The ArrayList gets written into the file</li>\n<li>Your file now contains: X + newline + Y</li>\n</ul>\n<p>Your Problem is, that everytime you create a new FileWrite it overwrites your file.</p>\n<p>This can be avoided by using the constructor like this:</p>\n<pre><code>FileWriter writer = new FileWriter(&quot;notes.data&quot;, true);\n</code></pre>\n<p>This sets it into the append mode and therefore keeps previous data in the file</p>\n"},{"comments":[{"owner":{"account_id":26843690,"reputation":11,"user_id":20429783,"display_name":"dwextit"},"score":0,"creation_date":1668892516,"post_id":74478520,"comment_id":131518178,"body_markdown":"this was so helpful. Thank you so much","body":"this was so helpful. Thank you so much"}],"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668700812,"creation_date":1668700812,"answer_id":74478520,"question_id":74472091,"body_markdown":"You don&#39;t need to create a separate `Scanner`, in method `createNote()`, in order to get a &quot;note&quot; from the user.\r\n\r\nIt is usually better to write your code using the interface rather than the specific implementation because then you usually need to change less code if you decide to change the implementation. Hence the type for member variable `memory` should probably be [List](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html) rather than `ArrayList`.\r\n\r\nNote that `ArrayList` may waste memory if the list of &quot;note&quot;s is large. I suggest using [LinkedList](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/LinkedList.html) instead. Alternatively, use an array (rather than a `List`) and handle expanding the array when adding a &quot;note&quot; as well as reducing the array when removing a &quot;note&quot;.\r\n\r\nHaving an infinite loop, i.e. `while (true)`, which contains a single `if-else` where both the `if` block and the `else` block contain `break` statements, means that the loop will perform exactly one iteration. May as well remove the `while` loop &amp;ndash; which means also removing the `break` statements.\r\n\r\nRather than writing the code that generates a timestamp repeatedly, you should adopt the [DRY](https://en.wikipedia.org/wiki/Don%27t_repeat_yourself) principle and extract that code into a separate method.\r\n\r\nThe file name should be a constant so as to minimize the amount of code changes you will need to do if you decide to change the file name.\r\n\r\nBy convention, text files have a filename extension of `.txt` whereas binary files have the `.data` extension.\r\n\r\nAlthough you don&#39;t need to, I personally prefer to initialize class member variables in the constructor.\r\n\r\nThe below code is a [SSCCE](https://meta.stackexchange.com/questions/22754/sscce-how-to-provide-examples-for-programming-questions), hence I added a `main` method. More notes appear after the code.\r\n```java\r\npackage Methods;\r\n\r\nimport java.util.*;\r\nimport java.time.format.*;\r\nimport java.time.*;\r\nimport java.io.*;\r\nimport java.nio.charset.Charset;\r\nimport java.nio.file.Files;\r\nimport java.nio.file.Path;\r\nimport java.nio.file.Paths;\r\nimport java.nio.file.StandardOpenOption;\r\n\r\npublic class FileSys {\r\n    private static final String FILENAME = &quot;notes.txt&quot;;\r\n    private static final String CREATE = &quot;C&quot;;\r\n    private static final String DELETE = &quot;D&quot;;\r\n    private static final String FIND = &quot;F&quot;;\r\n    private static final String QUIT = &quot;Q&quot;;\r\n    private static final String SHOW = &quot;S&quot;;\r\n    private static final String UPDATE = &quot;U&quot;;\r\n\r\n    Scanner reader;\r\n    List&lt;String&gt; memory;\r\n\r\n    public FileSys() throws IOException {\r\n        reader = new Scanner(System.in);\r\n        memory = new LinkedList&lt;String&gt;();\r\n        loadFile();\r\n    }\r\n\r\n    public void fileHandling() {\r\n        Path path = Paths.get(FILENAME);\r\n        try (BufferedWriter bw = Files.newBufferedWriter(path,\r\n                                                         StandardOpenOption.CREATE,\r\n                                                         StandardOpenOption.WRITE);\r\n             PrintWriter pw = new PrintWriter(bw)) {\r\n            for (String write : memory) {\r\n                pw.println(write);\r\n            }\r\n        }\r\n        catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    public void createNote() {\r\n        String dateTime = getTimestamp();\r\n\r\n            System.out.println();\r\n            System.out.println(&quot;Enter a note&quot;);\r\n            System.out.print(&quot;&gt; &quot;);\r\n            String note = reader.nextLine();\r\n\r\n            memory.add(note + &quot; / &quot; + dateTime);\r\n\r\n            fileHandling();\r\n            System.out.println(&quot;Note is saved!&quot;);\r\n    }\r\n\r\n    public void searchNote() {\r\n        System.out.print(&quot;\\nEnter note number: &quot;);\r\n        try {\r\n            int search = reader.nextInt();\r\n            reader.nextLine();\r\n            System.out.println(&quot;\\nSearch result:&quot;);\r\n            int index = memory.indexOf(memory.get(search - 1));\r\n            if (index != -1) {\r\n                System.out.println(&quot;[&quot; + (index + 1) + &quot;]&quot; + &quot; &quot; + memory.get(search - 1));\r\n            }\r\n            else {\r\n                System.out.println(&quot;Note number-&quot; + search + &quot; is not found in the collection!&quot;);\r\n            }\r\n        }\r\n        catch (IndexOutOfBoundsException e) {\r\n            System.out.println(&quot;The note number you have entered is invalid!&quot;);\r\n        }\r\n    }\r\n\r\n    public void updateNote() {\r\n        String dateTime = getTimestamp(); // ZonedDateTime.now(ZoneId.systemDefault()).format(dateTimeObj);\r\n        System.out.print(&quot;\\nEnter note number to change: &quot;);\r\n        try {\r\n            int search = reader.nextInt();\r\n            int index = memory.indexOf(memory.get(search - 1));\r\n            String updateLine;\r\n            if (index != -1) {\r\n                System.out.println(&quot;\\nCurrent note: &quot;);\r\n                System.out.println(&quot;[&quot; + (index + 1) + &quot;]&quot; + &quot; &quot; + memory.get(search - 1));\r\n                System.out.println(&quot;\\nThe updated note will be: &quot;);\r\n                System.out.print(&quot;&gt; &quot;);\r\n                reader.nextLine();\r\n                updateLine = reader.nextLine();\r\n                memory.set(index, updateLine + &quot; /&quot; + dateTime);\r\n                System.out.print(&quot;Note has been updated successfully!\\n&quot;);\r\n            }\r\n            else {\r\n                System.out.println(search + &quot; is not found in the collection!&quot;);\r\n            }\r\n        }\r\n        catch (IndexOutOfBoundsException e) {\r\n            System.out.println(&quot;The note number you have entered is invalid!&quot;);\r\n        }\r\n        fileHandling();\r\n    }\r\n\r\n    public void deleteNote() {\r\n        System.out.print(&quot;\\nEnter note number to delete: &quot;);\r\n        try {\r\n            int search = reader.nextInt();\r\n            reader.nextLine();\r\n            int index = memory.indexOf(memory.get(search - 1));\r\n            System.out.println();\r\n            if (index != -1) {\r\n                System.out.println(&quot;[&quot; + (index + 1) + &quot;]&quot; + &quot; &quot; + memory.get(search - 1));\r\n                System.out.print(&quot;\\nDo you want to delete this note? \\n[y] or [n]: &quot;);\r\n                char delDecision = reader.nextLine().charAt(0);\r\n                if (delDecision == &#39;y&#39; || delDecision == &#39;Y&#39;) {\r\n                    memory.remove(index);\r\n                    System.out.println(&quot;Note has been deleted successfully!&quot;);\r\n                    System.out.println();\r\n                }\r\n                else if (delDecision == &#39;n&#39; || delDecision == &#39;N&#39;) {\r\n                    System.out.println(&quot;Note was not deleted!&quot;);\r\n                }\r\n                else {\r\n                    System.out.println(&quot;Invalid input!&quot;);\r\n                }\r\n            }\r\n            else {\r\n                System.out.println(search + &quot; is not found in the collection!&quot;);\r\n            }\r\n        }\r\n        catch (IndexOutOfBoundsException e) {\r\n            System.out.println(&quot;The note number you have entered is invalid!&quot;);\r\n        }\r\n        fileHandling();\r\n    }\r\n\r\n    public void displayNote() {\r\n        if (memory.size() &gt; 0) {\r\n            int counter = 0;\r\n            for (String note : memory) {\r\n                System.out.printf(&quot;%d. %s%n&quot;, ++counter, note);\r\n            }\r\n        }\r\n        else {\r\n            System.out.println(&quot;There are no notes.&quot;);\r\n        }\r\n    }\r\n\r\n    private String getTimestamp() {\r\n        LocalDate todayDate = LocalDate.now();\r\n        LocalTime nowTime = LocalTime.now();\r\n        String timeFormat = nowTime.format(DateTimeFormatter.ofLocalizedTime(FormatStyle.MEDIUM));\r\n        String dateTime = todayDate.toString() + &quot; at &quot; + timeFormat;// ZonedDateTime.now(ZoneId.systemDefault()).format(dateTimeObj);\r\n        return dateTime;\r\n    }\r\n\r\n    private void loadFile() throws IOException {\r\n        Path path = Paths.get(FILENAME);\r\n        if (Files.isRegularFile(path)) {\r\n            memory.addAll(Files.readAllLines(path, Charset.defaultCharset()));\r\n        }\r\n    }\r\n\r\n    private void showMenu() {\r\n        String choice = &quot;&quot;;\r\n        while (!QUIT.equalsIgnoreCase(choice)) {\r\n            System.out.println(CREATE + &quot; - Create note&quot;);\r\n            System.out.println(DELETE + &quot; - Delete note&quot;);\r\n            System.out.println(FIND + &quot; - Search notes&quot;);\r\n            System.out.println(SHOW + &quot; - Show notes&quot;);\r\n            System.out.println(UPDATE + &quot; - Update note&quot;);\r\n            System.out.println(QUIT + &quot; - Quit&quot;);\r\n            System.out.println();\r\n            System.out.print(&quot;Your choice: &quot;);\r\n            choice = reader.nextLine();\r\n            if (!choice.isEmpty()) {\r\n                choice = choice.substring(0, 1);\r\n                choice = choice.toUpperCase();\r\n                switch (choice) {\r\n                    case CREATE -&gt; createNote();\r\n                    case DELETE -&gt; deleteNote();\r\n                    case FIND -&gt; searchNote();\r\n                    case SHOW -&gt; displayNote();\r\n                    case UPDATE -&gt; updateNote();\r\n                    case QUIT -&gt; System.out.println(&quot;Good bye.&quot;);\r\n                    default -&gt; System.out.println(&quot;Invalid: &quot; + choice);\r\n                }\r\n            }\r\n            else {\r\n                System.out.println(&quot;No selection entered. Retry.&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        try {\r\n            FileSys fs = new FileSys();\r\n            fs.showMenu();\r\n        }\r\n        catch (IOException xIo) {\r\n            xIo.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\nYour code does not initially load `memory` with contents of file *notes.txt* so I added that in the constructor. **Consequently you don&#39;t need to append to the file since you simply overwrite it with contents of `memory`.**\r\n\r\nThe file handling is done using [NIO.2](https://docs.oracle.com/javase/tutorial/essential/io/fileio.html) including [try-with-resources](https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html) &amp;ndash; which was added in [Java 7](https://docs.oracle.com/javase/7/docs/technotes/guides/language/try-with-resources.html). There are more NIO.2 [examples](https://docs.oracle.com/javase/8/docs/technotes/guides/io/example/index.html) in the JDK documentation.\r\n\r\nWhenever the code throws an unexpected exception, it is nearly always a good idea to print the stack trace.\r\n","title":"Retrieve lines in txt file and append new inputs from the user java","body":"<p>You don't need to create a separate <code>Scanner</code>, in method <code>createNote()</code>, in order to get a &quot;note&quot; from the user.</p>\n<p>It is usually better to write your code using the interface rather than the specific implementation because then you usually need to change less code if you decide to change the implementation. Hence the type for member variable <code>memory</code> should probably be <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html\" rel=\"nofollow noreferrer\">List</a> rather than <code>ArrayList</code>.</p>\n<p>Note that <code>ArrayList</code> may waste memory if the list of &quot;note&quot;s is large. I suggest using <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/LinkedList.html\" rel=\"nofollow noreferrer\">LinkedList</a> instead. Alternatively, use an array (rather than a <code>List</code>) and handle expanding the array when adding a &quot;note&quot; as well as reducing the array when removing a &quot;note&quot;.</p>\n<p>Having an infinite loop, i.e. <code>while (true)</code>, which contains a single <code>if-else</code> where both the <code>if</code> block and the <code>else</code> block contain <code>break</code> statements, means that the loop will perform exactly one iteration. May as well remove the <code>while</code> loop  which means also removing the <code>break</code> statements.</p>\n<p>Rather than writing the code that generates a timestamp repeatedly, you should adopt the <a href=\"https://en.wikipedia.org/wiki/Don%27t_repeat_yourself\" rel=\"nofollow noreferrer\">DRY</a> principle and extract that code into a separate method.</p>\n<p>The file name should be a constant so as to minimize the amount of code changes you will need to do if you decide to change the file name.</p>\n<p>By convention, text files have a filename extension of <code>.txt</code> whereas binary files have the <code>.data</code> extension.</p>\n<p>Although you don't need to, I personally prefer to initialize class member variables in the constructor.</p>\n<p>The below code is a <a href=\"https://meta.stackexchange.com/questions/22754/sscce-how-to-provide-examples-for-programming-questions\">SSCCE</a>, hence I added a <code>main</code> method. More notes appear after the code.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package Methods;\n\nimport java.util.*;\nimport java.time.format.*;\nimport java.time.*;\nimport java.io.*;\nimport java.nio.charset.Charset;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.nio.file.Paths;\nimport java.nio.file.StandardOpenOption;\n\npublic class FileSys {\n    private static final String FILENAME = &quot;notes.txt&quot;;\n    private static final String CREATE = &quot;C&quot;;\n    private static final String DELETE = &quot;D&quot;;\n    private static final String FIND = &quot;F&quot;;\n    private static final String QUIT = &quot;Q&quot;;\n    private static final String SHOW = &quot;S&quot;;\n    private static final String UPDATE = &quot;U&quot;;\n\n    Scanner reader;\n    List&lt;String&gt; memory;\n\n    public FileSys() throws IOException {\n        reader = new Scanner(System.in);\n        memory = new LinkedList&lt;String&gt;();\n        loadFile();\n    }\n\n    public void fileHandling() {\n        Path path = Paths.get(FILENAME);\n        try (BufferedWriter bw = Files.newBufferedWriter(path,\n                                                         StandardOpenOption.CREATE,\n                                                         StandardOpenOption.WRITE);\n             PrintWriter pw = new PrintWriter(bw)) {\n            for (String write : memory) {\n                pw.println(write);\n            }\n        }\n        catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    public void createNote() {\n        String dateTime = getTimestamp();\n\n            System.out.println();\n            System.out.println(&quot;Enter a note&quot;);\n            System.out.print(&quot;&gt; &quot;);\n            String note = reader.nextLine();\n\n            memory.add(note + &quot; / &quot; + dateTime);\n\n            fileHandling();\n            System.out.println(&quot;Note is saved!&quot;);\n    }\n\n    public void searchNote() {\n        System.out.print(&quot;\\nEnter note number: &quot;);\n        try {\n            int search = reader.nextInt();\n            reader.nextLine();\n            System.out.println(&quot;\\nSearch result:&quot;);\n            int index = memory.indexOf(memory.get(search - 1));\n            if (index != -1) {\n                System.out.println(&quot;[&quot; + (index + 1) + &quot;]&quot; + &quot; &quot; + memory.get(search - 1));\n            }\n            else {\n                System.out.println(&quot;Note number-&quot; + search + &quot; is not found in the collection!&quot;);\n            }\n        }\n        catch (IndexOutOfBoundsException e) {\n            System.out.println(&quot;The note number you have entered is invalid!&quot;);\n        }\n    }\n\n    public void updateNote() {\n        String dateTime = getTimestamp(); // ZonedDateTime.now(ZoneId.systemDefault()).format(dateTimeObj);\n        System.out.print(&quot;\\nEnter note number to change: &quot;);\n        try {\n            int search = reader.nextInt();\n            int index = memory.indexOf(memory.get(search - 1));\n            String updateLine;\n            if (index != -1) {\n                System.out.println(&quot;\\nCurrent note: &quot;);\n                System.out.println(&quot;[&quot; + (index + 1) + &quot;]&quot; + &quot; &quot; + memory.get(search - 1));\n                System.out.println(&quot;\\nThe updated note will be: &quot;);\n                System.out.print(&quot;&gt; &quot;);\n                reader.nextLine();\n                updateLine = reader.nextLine();\n                memory.set(index, updateLine + &quot; /&quot; + dateTime);\n                System.out.print(&quot;Note has been updated successfully!\\n&quot;);\n            }\n            else {\n                System.out.println(search + &quot; is not found in the collection!&quot;);\n            }\n        }\n        catch (IndexOutOfBoundsException e) {\n            System.out.println(&quot;The note number you have entered is invalid!&quot;);\n        }\n        fileHandling();\n    }\n\n    public void deleteNote() {\n        System.out.print(&quot;\\nEnter note number to delete: &quot;);\n        try {\n            int search = reader.nextInt();\n            reader.nextLine();\n            int index = memory.indexOf(memory.get(search - 1));\n            System.out.println();\n            if (index != -1) {\n                System.out.println(&quot;[&quot; + (index + 1) + &quot;]&quot; + &quot; &quot; + memory.get(search - 1));\n                System.out.print(&quot;\\nDo you want to delete this note? \\n[y] or [n]: &quot;);\n                char delDecision = reader.nextLine().charAt(0);\n                if (delDecision == 'y' || delDecision == 'Y') {\n                    memory.remove(index);\n                    System.out.println(&quot;Note has been deleted successfully!&quot;);\n                    System.out.println();\n                }\n                else if (delDecision == 'n' || delDecision == 'N') {\n                    System.out.println(&quot;Note was not deleted!&quot;);\n                }\n                else {\n                    System.out.println(&quot;Invalid input!&quot;);\n                }\n            }\n            else {\n                System.out.println(search + &quot; is not found in the collection!&quot;);\n            }\n        }\n        catch (IndexOutOfBoundsException e) {\n            System.out.println(&quot;The note number you have entered is invalid!&quot;);\n        }\n        fileHandling();\n    }\n\n    public void displayNote() {\n        if (memory.size() &gt; 0) {\n            int counter = 0;\n            for (String note : memory) {\n                System.out.printf(&quot;%d. %s%n&quot;, ++counter, note);\n            }\n        }\n        else {\n            System.out.println(&quot;There are no notes.&quot;);\n        }\n    }\n\n    private String getTimestamp() {\n        LocalDate todayDate = LocalDate.now();\n        LocalTime nowTime = LocalTime.now();\n        String timeFormat = nowTime.format(DateTimeFormatter.ofLocalizedTime(FormatStyle.MEDIUM));\n        String dateTime = todayDate.toString() + &quot; at &quot; + timeFormat;// ZonedDateTime.now(ZoneId.systemDefault()).format(dateTimeObj);\n        return dateTime;\n    }\n\n    private void loadFile() throws IOException {\n        Path path = Paths.get(FILENAME);\n        if (Files.isRegularFile(path)) {\n            memory.addAll(Files.readAllLines(path, Charset.defaultCharset()));\n        }\n    }\n\n    private void showMenu() {\n        String choice = &quot;&quot;;\n        while (!QUIT.equalsIgnoreCase(choice)) {\n            System.out.println(CREATE + &quot; - Create note&quot;);\n            System.out.println(DELETE + &quot; - Delete note&quot;);\n            System.out.println(FIND + &quot; - Search notes&quot;);\n            System.out.println(SHOW + &quot; - Show notes&quot;);\n            System.out.println(UPDATE + &quot; - Update note&quot;);\n            System.out.println(QUIT + &quot; - Quit&quot;);\n            System.out.println();\n            System.out.print(&quot;Your choice: &quot;);\n            choice = reader.nextLine();\n            if (!choice.isEmpty()) {\n                choice = choice.substring(0, 1);\n                choice = choice.toUpperCase();\n                switch (choice) {\n                    case CREATE -&gt; createNote();\n                    case DELETE -&gt; deleteNote();\n                    case FIND -&gt; searchNote();\n                    case SHOW -&gt; displayNote();\n                    case UPDATE -&gt; updateNote();\n                    case QUIT -&gt; System.out.println(&quot;Good bye.&quot;);\n                    default -&gt; System.out.println(&quot;Invalid: &quot; + choice);\n                }\n            }\n            else {\n                System.out.println(&quot;No selection entered. Retry.&quot;);\n            }\n        }\n    }\n\n    public static void main(String[] args) {\n        try {\n            FileSys fs = new FileSys();\n            fs.showMenu();\n        }\n        catch (IOException xIo) {\n            xIo.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>Your code does not initially load <code>memory</code> with contents of file <em>notes.txt</em> so I added that in the constructor. <strong>Consequently you don't need to append to the file since you simply overwrite it with contents of <code>memory</code>.</strong></p>\n<p>The file handling is done using <a href=\"https://docs.oracle.com/javase/tutorial/essential/io/fileio.html\" rel=\"nofollow noreferrer\">NIO.2</a> including <a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html\" rel=\"nofollow noreferrer\">try-with-resources</a>  which was added in <a href=\"https://docs.oracle.com/javase/7/docs/technotes/guides/language/try-with-resources.html\" rel=\"nofollow noreferrer\">Java 7</a>. There are more NIO.2 <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/io/example/index.html\" rel=\"nofollow noreferrer\">examples</a> in the JDK documentation.</p>\n<p>Whenever the code throws an unexpected exception, it is nearly always a good idea to print the stack trace.</p>\n"}],"owner":{"account_id":26843690,"reputation":11,"user_id":20429783,"display_name":"dwextit"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1668700812,"creation_date":1668672757,"question_id":74472091,"body_markdown":"I&#39;m using an arraylist to append inputs and send the arraylist elements to file. However, everytime I exit the program and run it again, the contents in the written in the file becomes empty.\r\n\r\n\r\n```\r\nArrayList&lt;String&gt; memory = new ArrayList&lt;String&gt;();\r\n\r\n    public void fileHandling() {\r\n        try {\r\n            FileWriter fWriter = new FileWriter(&quot;notes.data&quot;);\r\n            for (int x = 0; x &lt;= memory.size() - 1; x++) {\r\n                fWriter.write(memory.get(x) + &#39;\\n&#39;);\r\n            }\r\n            fWriter.close();\r\n\r\n        } catch (IOException e) {\r\n            System.out.println(e);\r\n        }\r\n    }\r\n\r\n    public void createNote() {\r\n        Scanner insertNote = new Scanner(System.in);\r\n        LocalDate todayDate = LocalDate.now();\r\n        LocalTime nowTime = LocalTime.now();\r\n        String timeFormat = nowTime.format(DateTimeFormatter.ofLocalizedTime(FormatStyle.MEDIUM));\r\n        String dateTime = todayDate.toString() + &quot; at &quot; + timeFormat;\r\n\r\n        while (true) {\r\n            System.out.println();\r\n            System.out.println(&quot;Enter a note&quot;);\r\n            System.out.print(&quot;&gt; &quot;);\r\n            String note = insertNote.nextLine();\r\n\r\n            if (note == null) {\r\n                System.out.println(&quot;Invalid input! Try again&quot;);\r\n                break;\r\n            } else {\r\n                memory.add(note + &quot; /&quot; + dateTime);\r\n                \r\n                fileHandling();\r\n                System.out.println(&quot;Note is saved!\\n&quot;);\r\n                break;\r\n            }\r\n        }\r\n```\r\n\r\nI expect the program to save the contents of every input. Then if I exit and run the program again, the contents will go back to the array ","title":"Retrieve lines in txt file and append new inputs from the user java","body":"<p>I'm using an arraylist to append inputs and send the arraylist elements to file. However, everytime I exit the program and run it again, the contents in the written in the file becomes empty.</p>\n<pre><code>ArrayList&lt;String&gt; memory = new ArrayList&lt;String&gt;();\n\n    public void fileHandling() {\n        try {\n            FileWriter fWriter = new FileWriter(&quot;notes.data&quot;);\n            for (int x = 0; x &lt;= memory.size() - 1; x++) {\n                fWriter.write(memory.get(x) + '\\n');\n            }\n            fWriter.close();\n\n        } catch (IOException e) {\n            System.out.println(e);\n        }\n    }\n\n    public void createNote() {\n        Scanner insertNote = new Scanner(System.in);\n        LocalDate todayDate = LocalDate.now();\n        LocalTime nowTime = LocalTime.now();\n        String timeFormat = nowTime.format(DateTimeFormatter.ofLocalizedTime(FormatStyle.MEDIUM));\n        String dateTime = todayDate.toString() + &quot; at &quot; + timeFormat;\n\n        while (true) {\n            System.out.println();\n            System.out.println(&quot;Enter a note&quot;);\n            System.out.print(&quot;&gt; &quot;);\n            String note = insertNote.nextLine();\n\n            if (note == null) {\n                System.out.println(&quot;Invalid input! Try again&quot;);\n                break;\n            } else {\n                memory.add(note + &quot; /&quot; + dateTime);\n                \n                fileHandling();\n                System.out.println(&quot;Note is saved!\\n&quot;);\n                break;\n            }\n        }\n</code></pre>\n<p>I expect the program to save the contents of every input. Then if I exit and run the program again, the contents will go back to the array</p>\n"},{"tags":["java","spring","interface","mapper"],"answers":[{"tags":[],"owner":{"account_id":5049794,"reputation":631,"user_id":4054720,"display_name":"Ben Borchard"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1668700574,"creation_date":1668699022,"answer_id":74478079,"question_id":74477339,"body_markdown":"The correct way to declare your `Mapping` to ignore the field you want to ignore is the first one, you can delete the others.\r\n\r\n&gt;```\r\n&gt;@Mapping(source = &quot;type&quot;, target = &quot;type&quot;, ignore = true)\r\n&gt;```\r\n\r\nThe reason that this isn&#39;t working for you as written is that you are technically mapping a `List` object to another `List` object.  The `List` objects you pass in to be mapped will probably not have a `type` field (and definitely not the one you care about), the objects they hold (`Document` and `DocumentDTO`) will though.  \r\n\r\nTo get this to work they way you would like you need two mappers: one for the `List`s and one for `Document` to `DocumentDTO`.  Since the `type` field you want to ignore is on the latter objects, you should put the `Mapping` annotation on that method:\r\n\r\n```\r\n@Mapper\r\npublic interface DocumentsMapper {\r\n\r\nList&lt;DocumentDTO&gt; listMapper(List&lt;Document&gt; document);\r\n\r\n@Mapping(source = &quot;type&quot;, target = &quot;type&quot;, ignore = true)\r\nDocumentDTO mapper(Document document);\r\n```\r\n\r\nThe `mapstruct` library is smart enough to automatically use the `mapper` method to convert each element in your `List` in the `listMapper` method.\r\n","title":"Can not map Enum value with @mapper","body":"<p>The correct way to declare your <code>Mapping</code> to ignore the field you want to ignore is the first one, you can delete the others.</p>\n<blockquote>\n<pre><code>@Mapping(source = &quot;type&quot;, target = &quot;type&quot;, ignore = true)\n</code></pre>\n</blockquote>\n<p>The reason that this isn't working for you as written is that you are technically mapping a <code>List</code> object to another <code>List</code> object.  The <code>List</code> objects you pass in to be mapped will probably not have a <code>type</code> field (and definitely not the one you care about), the objects they hold (<code>Document</code> and <code>DocumentDTO</code>) will though.</p>\n<p>To get this to work they way you would like you need two mappers: one for the <code>List</code>s and one for <code>Document</code> to <code>DocumentDTO</code>.  Since the <code>type</code> field you want to ignore is on the latter objects, you should put the <code>Mapping</code> annotation on that method:</p>\n<pre><code>@Mapper\npublic interface DocumentsMapper {\n\nList&lt;DocumentDTO&gt; listMapper(List&lt;Document&gt; document);\n\n@Mapping(source = &quot;type&quot;, target = &quot;type&quot;, ignore = true)\nDocumentDTO mapper(Document document);\n</code></pre>\n<p>The <code>mapstruct</code> library is smart enough to automatically use the <code>mapper</code> method to convert each element in your <code>List</code> in the <code>listMapper</code> method.</p>\n"}],"owner":{"account_id":24183247,"reputation":472,"user_id":18570428,"display_name":"Talenel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":667,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74478079,"answer_count":1,"score":0,"last_activity_date":1668700574,"creation_date":1668696159,"question_id":74477339,"body_markdown":"I&#39;m trying to make an automatic mapper, but I&#39;m having a problem with an `Enum` inside my DTO.\r\nIn my `@mapper` class, I want everything to be automatically mapped except fthe `Enum` field. However, when debugging, I see that it does go into the mapper auto-implementation class, and it doesn&#39;t ignore my `Enum` as I indicate with @mapping\r\n\r\nExample of my Entity and DTO\r\n\r\n    @Entity\r\n    public class Document {\r\n    \t\r\n\t@Id\r\n    @GeneratedValue(strategy=GenerationType.IDENTITY)\r\n    private Integer id;\r\n\t\r\n    private String type;\r\n\r\nMy DTO:\r\n\r\n    @Data\r\n    public class DocumentDTO {\r\n\r\n\tprivate Integer id;\r\n\tprivate DocumentsEnum type;\r\n\r\nHow can I ignore the mapping for that specific enumerated field?\r\n\r\nI have tried the following annotations on @mapping:\r\n\r\n    @Mapper\r\n    public interface DocumentsMapper {\r\n\t\r\n\t@Mapping(source = &quot;type&quot;, target = &quot;type&quot;, ignore = true)\r\n\t@Mapping(source = &quot;DocumentsEnum&quot;, target = &quot;DocumentsEnum&quot;, ignore = true)\r\n\t@Mapping(source = &quot;MAIN&quot;, target = &quot;MAIN&quot;, ignore = true) // &lt;-- This is the value of Enum\r\n\t@Mapping(source = &quot;ppal&quot;, target = &quot;ppal&quot;, ignore = true) // &lt;-- This is the name of Enum\r\n\tList&lt;DocumentDTO&gt; mapper(List&lt;Document&gt; document);\r\n\r\n\t@AfterMapping\r\n\tdefault void afterMapping(Document document, @MappingTarget DocumentDTO documentDTO) {\r\n\t\t//some logic\r\n\t}","title":"Can not map Enum value with @mapper","body":"<p>I'm trying to make an automatic mapper, but I'm having a problem with an <code>Enum</code> inside my DTO.\nIn my <code>@mapper</code> class, I want everything to be automatically mapped except fthe <code>Enum</code> field. However, when debugging, I see that it does go into the mapper auto-implementation class, and it doesn't ignore my <code>Enum</code> as I indicate with @mapping</p>\n<p>Example of my Entity and DTO</p>\n<pre><code>@Entity\npublic class Document {\n    \n@Id\n@GeneratedValue(strategy=GenerationType.IDENTITY)\nprivate Integer id;\n\nprivate String type;\n</code></pre>\n<p>My DTO:</p>\n<pre><code>@Data\npublic class DocumentDTO {\n\nprivate Integer id;\nprivate DocumentsEnum type;\n</code></pre>\n<p>How can I ignore the mapping for that specific enumerated field?</p>\n<p>I have tried the following annotations on @mapping:</p>\n<pre><code>@Mapper\npublic interface DocumentsMapper {\n\n@Mapping(source = &quot;type&quot;, target = &quot;type&quot;, ignore = true)\n@Mapping(source = &quot;DocumentsEnum&quot;, target = &quot;DocumentsEnum&quot;, ignore = true)\n@Mapping(source = &quot;MAIN&quot;, target = &quot;MAIN&quot;, ignore = true) // &lt;-- This is the value of Enum\n@Mapping(source = &quot;ppal&quot;, target = &quot;ppal&quot;, ignore = true) // &lt;-- This is the name of Enum\nList&lt;DocumentDTO&gt; mapper(List&lt;Document&gt; document);\n\n@AfterMapping\ndefault void afterMapping(Document document, @MappingTarget DocumentDTO documentDTO) {\n    //some logic\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","sticky-session","spring-cloud-loadbalancer"],"answers":[{"comments":[{"owner":{"account_id":25414251,"reputation":51,"user_id":19221489,"display_name":"TheCoder"},"score":0,"creation_date":1668699261,"post_id":74475700,"comment_id":131474346,"body_markdown":"Thanks @dangarfield, I am actually stuck in cookie handling. Can you please help on the same\nAlso I was trying out code in \nhttps://github.com/altfatterz/client-side-loadbalancing\nbut despite all the required configurations its going in round robin fashion only. Can you please let me know what is wrong in it","body":"Thanks @dangarfield, I am actually stuck in cookie handling. Can you please help on the same Also I was trying out code in  <a href=\"https://github.com/altfatterz/client-side-loadbalancing\" rel=\"nofollow noreferrer\">github.com/altfatterz/client-side-loadbalancing</a> but despite all the required configurations its going in round robin fashion only. Can you please let me know what is wrong in it"}],"tags":[],"owner":{"account_id":3957137,"reputation":2210,"user_id":3265253,"display_name":"dangarfield"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1668689117,"creation_date":1668689117,"answer_id":74475700,"question_id":74474983,"body_markdown":"By default, Spring Cloud Loadbalancer ([see config here](https://docs.spring.io/spring-cloud-commons/docs/current/reference/html/#spring-cloud-loadbalancer)) uses [round-robin load balancing](https://www.educative.io/answers/what-is-the-round-robin-load-balancing-technique). \r\n\r\nTo change this, in your Spring Cloud Gateway, use `RequestBasedStickySessionServiceInstanceListSupplier`.\r\n\r\nBy setting the application context (`bootstrap.yml`):\r\n```\r\nspring.cloud.loadbalancer.configurations: request-based-sticky-session\r\n```\r\n\r\nor create a bean:\r\n```\r\npublic class CustomLoadBalancerConfiguration {\r\n\r\n    @Bean\r\n    public ServiceInstanceListSupplier discoveryClientServiceInstanceListSupplier(\r\n            ConfigurableApplicationContext context) {\r\n        return ServiceInstanceListSupplier.builder()\r\n                    .withDiscoveryClient()\r\n                    .withRequestBasedStickySession()\r\n                    .build(context);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\nSpring Documentation\r\n- https://docs.spring.io/spring-cloud-commons/docs/current/reference/html/#request-based-sticky-session-for-loadbalancer Note: Take care of cookie handling.\r\n\r\n\r\nMedium article with related technologies (Eureka, Spring Cloud Gateway) and complete boilerplate code:\r\n- https://progen.medium.com/load-balancing-spring-cloud-applications-using-eureka-and-spring-cloud-gateway-43d0bcf57cc3\r\n- https://github.com/negorp/spring_load_balancing\r\n\r\n**CAVEAT**\r\n\r\nIf you HAVE to use stick-load balancing, I would encourage you to understand why this is the case. Please investigate why you need to use it and ideally adapt your application to that it is not dependent on the request being passed to the same server. Please read the following for reasons to NOT use them:\r\n- https://dev.to/gkoniaris/why-you-should-never-use-sticky-sessions-2pkj\r\n- https://stackoverflow.com/questions/8214536/sticky-sessions-good-or-bad\r\n\r\nGenerally, I would say that having to use sticky sessions in indicative of a sub-optimal architecture.","title":"Sticky session loadbalancing in spring Microservices","body":"<p>By default, Spring Cloud Loadbalancer (<a href=\"https://docs.spring.io/spring-cloud-commons/docs/current/reference/html/#spring-cloud-loadbalancer\" rel=\"nofollow noreferrer\">see config here</a>) uses <a href=\"https://www.educative.io/answers/what-is-the-round-robin-load-balancing-technique\" rel=\"nofollow noreferrer\">round-robin load balancing</a>.</p>\n<p>To change this, in your Spring Cloud Gateway, use <code>RequestBasedStickySessionServiceInstanceListSupplier</code>.</p>\n<p>By setting the application context (<code>bootstrap.yml</code>):</p>\n<pre><code>spring.cloud.loadbalancer.configurations: request-based-sticky-session\n</code></pre>\n<p>or create a bean:</p>\n<pre><code>public class CustomLoadBalancerConfiguration {\n\n    @Bean\n    public ServiceInstanceListSupplier discoveryClientServiceInstanceListSupplier(\n            ConfigurableApplicationContext context) {\n        return ServiceInstanceListSupplier.builder()\n                    .withDiscoveryClient()\n                    .withRequestBasedStickySession()\n                    .build(context);\n        }\n    }\n}\n</code></pre>\n<p>Spring Documentation</p>\n<ul>\n<li><a href=\"https://docs.spring.io/spring-cloud-commons/docs/current/reference/html/#request-based-sticky-session-for-loadbalancer\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-cloud-commons/docs/current/reference/html/#request-based-sticky-session-for-loadbalancer</a> Note: Take care of cookie handling.</li>\n</ul>\n<p>Medium article with related technologies (Eureka, Spring Cloud Gateway) and complete boilerplate code:</p>\n<ul>\n<li><a href=\"https://progen.medium.com/load-balancing-spring-cloud-applications-using-eureka-and-spring-cloud-gateway-43d0bcf57cc3\" rel=\"nofollow noreferrer\">https://progen.medium.com/load-balancing-spring-cloud-applications-using-eureka-and-spring-cloud-gateway-43d0bcf57cc3</a></li>\n<li><a href=\"https://github.com/negorp/spring_load_balancing\" rel=\"nofollow noreferrer\">https://github.com/negorp/spring_load_balancing</a></li>\n</ul>\n<p><strong>CAVEAT</strong></p>\n<p>If you HAVE to use stick-load balancing, I would encourage you to understand why this is the case. Please investigate why you need to use it and ideally adapt your application to that it is not dependent on the request being passed to the same server. Please read the following for reasons to NOT use them:</p>\n<ul>\n<li><a href=\"https://dev.to/gkoniaris/why-you-should-never-use-sticky-sessions-2pkj\" rel=\"nofollow noreferrer\">https://dev.to/gkoniaris/why-you-should-never-use-sticky-sessions-2pkj</a></li>\n<li><a href=\"https://stackoverflow.com/questions/8214536/sticky-sessions-good-or-bad\">Sticky Sessions: Good or Bad?</a></li>\n</ul>\n<p>Generally, I would say that having to use sticky sessions in indicative of a sub-optimal architecture.</p>\n"}],"owner":{"account_id":25414251,"reputation":51,"user_id":19221489,"display_name":"TheCoder"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":495,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1668694046,"answer_count":1,"score":-1,"last_activity_date":1668700298,"creation_date":1668685831,"question_id":74474983,"body_markdown":"I am new to Spring and trying to do a proof-of-concept on the sticky session loadbalancing (I am using Eureka for service discovery, Spring Cloud Gateway and Spring Cloud Loadbalancer, its working in round-robin fashion now). I am unable to achieve on sticky session lb. Can some one please help me in this or share code (for sticky session loadbalancer) which I can see and learn.\r\n\r\n\r\n","title":"Sticky session loadbalancing in spring Microservices","body":"<p>I am new to Spring and trying to do a proof-of-concept on the sticky session loadbalancing (I am using Eureka for service discovery, Spring Cloud Gateway and Spring Cloud Loadbalancer, its working in round-robin fashion now). I am unable to achieve on sticky session lb. Can some one please help me in this or share code (for sticky session loadbalancer) which I can see and learn.</p>\n"},{"tags":["java","mysql","spring-boot","hikaricp"],"comments":[{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":1,"creation_date":1668700310,"post_id":74478349,"comment_id":131474785,"body_markdown":"Your pool size is 50 and you have 100 concurrent requests.","body":"Your pool size is 50 and you have 100 concurrent requests."},{"owner":{"account_id":781169,"reputation":195,"user_id":5896333,"accept_rate":50,"display_name":"Dev"},"score":0,"creation_date":1669129099,"post_id":74478349,"comment_id":131570641,"body_markdown":"So if I can expect 500 concurrent users, I will have to set maximum-pool-size to 500 i.e. 1 pool for each request ?","body":"So if I can expect 500 concurrent users, I will have to set maximum-pool-size to 500 i.e. 1 pool for each request ?"},{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1669134473,"post_id":74478349,"comment_id":131572904,"body_markdown":"You can set it to 500 but you have to monitor the connection pool during the load test and then use the max number","body":"You can set it to 500 but you have to monitor the connection pool during the load test and then use the max number"}],"owner":{"account_id":781169,"reputation":195,"user_id":5896333,"accept_rate":50,"display_name":"Dev"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":991,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1668700167,"creation_date":1668700167,"question_id":74478349,"body_markdown":"I am load testing a REST endpoint in a Springboot application that get products data from MySQL database. Under low traffic it seems to be working fine, but if I send 100 concurrent requests, the calls starts getting slower and I see logs full of the following error \r\n\r\n`o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30000ms. `\r\n\r\n`org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection] with root cause\r\njava.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30000ms`S\r\n\r\nMy hikari config looks like below\r\n\r\n    spring.datasource.hikari.connection-test-query=SELECT 1 FROM DUAL\r\n    spring.datasource.hikari.connection-timeout=30000\r\n    spring.datasource.hikari.maximum-pool-size=50\r\n    spring.datasource.hikari.max-lifetime=1800000\r\n    spring.datasource.hikari.minimum-idle=20\r\n    spring.datasource.hikari.validation-timeout=3000\r\n    spring.datasource.hikari.idle-timeout=60000\r\n\r\nAll the tables are linked with each using foreign key, index etc. so shouldn&#39;t be time consuming. The table has only around 2000 records and is linked by a couple of small size tables. \r\n\r\nI have tried different configs but nothing seems to make it work under load. Please guide me what I am doing wrong. \r\n\r\nMany thanks ","title":"Springboot Hikari Config - Connection Timeout","body":"<p>I am load testing a REST endpoint in a Springboot application that get products data from MySQL database. Under low traffic it seems to be working fine, but if I send 100 concurrent requests, the calls starts getting slower and I see logs full of the following error</p>\n<p><code>o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30000ms. </code></p>\n<p><code>org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection] with root cause java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30000ms</code>S</p>\n<p>My hikari config looks like below</p>\n<pre><code>spring.datasource.hikari.connection-test-query=SELECT 1 FROM DUAL\nspring.datasource.hikari.connection-timeout=30000\nspring.datasource.hikari.maximum-pool-size=50\nspring.datasource.hikari.max-lifetime=1800000\nspring.datasource.hikari.minimum-idle=20\nspring.datasource.hikari.validation-timeout=3000\nspring.datasource.hikari.idle-timeout=60000\n</code></pre>\n<p>All the tables are linked with each using foreign key, index etc. so shouldn't be time consuming. The table has only around 2000 records and is linked by a couple of small size tables.</p>\n<p>I have tried different configs but nothing seems to make it work under load. Please guide me what I am doing wrong.</p>\n<p>Many thanks</p>\n"},{"tags":["java","math","probability"],"answers":[{"tags":[],"owner":{"account_id":26749788,"reputation":611,"user_id":20349343,"display_name":"radof"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1668699820,"creation_date":1668699820,"answer_id":74478272,"question_id":74475529,"body_markdown":"Based on the description of the problem `currentTotalExecutionsCount` shouldn&#39;\r\nt affect the probability of the exception. Therefore one can just do the following:\r\n\r\n    import java.util.Random;\r\n    \r\n    ...\r\n\r\n        Boolean shouldThrow(int probabilityPercentage) {\r\n              Random generator = new Random(System.currentTimeMillis());\r\n              return generator.nextDouble() * 100 &lt; probabilityPercentage ? true: false;\r\n        }\r\n\r\nIf you wanted the probability to change based on `currentTotalExecutionsCount` then you would need to adopt the random generator accordingly.","title":"make desicion based on total count and proviced probability percentage","body":"<p>Based on the description of the problem <code>currentTotalExecutionsCount</code> shouldn'\nt affect the probability of the exception. Therefore one can just do the following:</p>\n<pre><code>import java.util.Random;\n\n...\n\n    Boolean shouldThrow(int probabilityPercentage) {\n          Random generator = new Random(System.currentTimeMillis());\n          return generator.nextDouble() * 100 &lt; probabilityPercentage ? true: false;\n    }\n</code></pre>\n<p>If you wanted the probability to change based on <code>currentTotalExecutionsCount</code> then you would need to adopt the random generator accordingly.</p>\n"}],"owner":{"account_id":7888281,"reputation":127,"user_id":9312168,"display_name":"Stanislav Tun"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74478272,"answer_count":1,"score":0,"last_activity_date":1668699820,"creation_date":1668688278,"question_id":74475529,"body_markdown":"Imagine next situation: you have some third party API with some methods that hasn&#39; t test environment. So you wrote custom test-service to simulate behaviour of third party API with test-implementations of methods. Third party API may throw exceptions or return response model with some success/failed statuses.\r\n\r\nI wanna write test-service, which may be configured to throw exceptions based on total request/method invocations count N (which also increases with every request) and provided percentage probability to throw some exception.\r\n\r\nFor instance: if provided 10% then it means that method should throw exception with 10% percent probabilty.\r\n\r\nQuestion: is there some kind of math formula to solve this problem ?\r\n\r\nIf represent it it code I want to write something like this\r\n\r\n    boolean shouldThrow(int probabilityPercentage, long currentTotalExecutionsCount) {\r\n        return // and here this magic math formula to make a decision\r\n    }\r\n\r\n","title":"make desicion based on total count and proviced probability percentage","body":"<p>Imagine next situation: you have some third party API with some methods that hasn' t test environment. So you wrote custom test-service to simulate behaviour of third party API with test-implementations of methods. Third party API may throw exceptions or return response model with some success/failed statuses.</p>\n<p>I wanna write test-service, which may be configured to throw exceptions based on total request/method invocations count N (which also increases with every request) and provided percentage probability to throw some exception.</p>\n<p>For instance: if provided 10% then it means that method should throw exception with 10% percent probabilty.</p>\n<p>Question: is there some kind of math formula to solve this problem ?</p>\n<p>If represent it it code I want to write something like this</p>\n<pre><code>boolean shouldThrow(int probabilityPercentage, long currentTotalExecutionsCount) {\n    return // and here this magic math formula to make a decision\n}\n</code></pre>\n"},{"tags":["java","server","minecraft","bukkit"],"answers":[{"tags":[],"owner":{"account_id":11060443,"reputation":71,"user_id":8121935,"display_name":"Eric Ballard"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1668699504,"creation_date":1668699504,"answer_id":74478200,"question_id":74476679,"body_markdown":"Okay so presuming;\r\n\r\n1) Java application is running in an environment with a bukkit.jar file \r\n\r\n2) You need to retrieve the version of this .jar \r\n\r\n\r\nIf you open a .jar with an archive explorer, like 7zip, you can browse through there.. \r\n\r\nI went ahead and downloaded craftbukkit-1.19.2.jar and noticed inside of it&#39;s META-INF folder is a &#39;versions.list&#39; file which contains a a single String\r\n\r\n&gt; a3e1a91200a28b55f64c43b7980830259798984389c782ab8e07364f2e1eb16a *craftbukkit-1.19.2-R0.1-SNAPSHOT.jar\r\n\r\nThis seems like a good place to start, this String is likely unique in each build.\r\n\r\nOtherwise you could access the jar&#39;s [Manifest][1] and find something in there.\r\n\r\n\r\nhttps://stackoverflow.com/questions/3777055/reading-manifest-mf-file-from-jar-file-using-java\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/util/jar/Manifest.html","title":"How to get the minecraft server version of paper or spigot or bukkit jar using java code","body":"<p>Okay so presuming;</p>\n<ol>\n<li><p>Java application is running in an environment with a bukkit.jar file</p>\n</li>\n<li><p>You need to retrieve the version of this .jar</p>\n</li>\n</ol>\n<p>If you open a .jar with an archive explorer, like 7zip, you can browse through there..</p>\n<p>I went ahead and downloaded craftbukkit-1.19.2.jar and noticed inside of it's META-INF folder is a 'versions.list' file which contains a a single String</p>\n<blockquote>\n<p>a3e1a91200a28b55f64c43b7980830259798984389c782ab8e07364f2e1eb16a *craftbukkit-1.19.2-R0.1-SNAPSHOT.jar</p>\n</blockquote>\n<p>This seems like a good place to start, this String is likely unique in each build.</p>\n<p>Otherwise you could access the jar's <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/jar/Manifest.html\" rel=\"nofollow noreferrer\">Manifest</a> and find something in there.</p>\n<p><a href=\"https://stackoverflow.com/questions/3777055/reading-manifest-mf-file-from-jar-file-using-java\">reading MANIFEST.MF file from jar file using JAVA</a></p>\n"}],"owner":{"account_id":19840585,"reputation":23,"user_id":14533255,"display_name":"Fasmos"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":416,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74478200,"answer_count":1,"score":0,"last_activity_date":1668699504,"creation_date":1668693311,"question_id":74476679,"body_markdown":"\r\nI want to get the version to change the java version automatically.\r\n\r\nBecause until 1.16 needs java 8 however from 1.17 to launch server needs java 17 etc.\r\n\r\nI was tried get manifest and mainclass. and then, get mainclass&#39;s major version.\r\nbut high version doesn&#39;t contain true data in jar. So it cannot get the true version.\r\n\r\nI&#39;m sorry for my bad english.\r\n\r\nThank you for reading.","title":"How to get the minecraft server version of paper or spigot or bukkit jar using java code","body":"<p>I want to get the version to change the java version automatically.</p>\n<p>Because until 1.16 needs java 8 however from 1.17 to launch server needs java 17 etc.</p>\n<p>I was tried get manifest and mainclass. and then, get mainclass's major version.\nbut high version doesn't contain true data in jar. So it cannot get the true version.</p>\n<p>I'm sorry for my bad english.</p>\n<p>Thank you for reading.</p>\n"},{"tags":["java","algorithm","dictionary","hashmap"],"comments":[{"owner":{"account_id":1064245,"reputation":85256,"user_id":1065197,"accept_rate":88,"display_name":"Luiggi Mendoza"},"score":2,"creation_date":1365198067,"post_id":15844035,"comment_id":22545458,"body_markdown":"I would recommend: 1) Declare your variable as `Map` instead of `HashMap`, 2) Let this kind of problems to the JVM, if you notice **with a profiler** that is giving your performance hits, then start evaluating it.","body":"I would recommend: 1) Declare your variable as <code>Map</code> instead of <code>HashMap</code>, 2) Let this kind of problems to the JVM, if you notice <b>with a profiler</b> that is giving your performance hits, then start evaluating it."},{"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":1,"creation_date":1519980167,"post_id":15844035,"comment_id":85135972,"body_markdown":"@LuiggiMendoza generally yes, agreed, but this is such a common use-case that we might as-well get rid of re-sizes","body":"@LuiggiMendoza generally yes, agreed, but this is such a common use-case that we might as-well get rid of re-sizes"}],"answers":[{"comments":[{"owner":{"account_id":357343,"reputation":54520,"user_id":697449,"accept_rate":82,"display_name":"Paul Bellora"},"score":4,"creation_date":1365198573,"post_id":15844080,"comment_id":22545676,"body_markdown":"&quot;the hash map has at least enough capacity for the initial values&quot; - I don&#39;t think this is true with the default load factor of 0.75.","body":"&quot;the hash map has at least enough capacity for the initial values&quot; - I don&#39;t think this is true with the default load factor of 0.75."},{"owner":{"account_id":69149,"reputation":233552,"user_id":201359,"accept_rate":100,"display_name":"&#211;scar L&#243;pez"},"score":0,"creation_date":1365198704,"post_id":15844080,"comment_id":22545723,"body_markdown":"@PaulBellora the initial capacity is the same size as the one specified in the `initialCapacity` parameter. The load factor is a measure of how full the hash table is allowed to get before its capacity (initial or not) is automatically increased","body":"@PaulBellora the initial capacity is the same size as the one specified in the <code>initialCapacity</code> parameter. The load factor is a measure of how full the hash table is allowed to get before its capacity (initial or not) is automatically increased"},{"owner":{"account_id":357343,"reputation":54520,"user_id":697449,"accept_rate":82,"display_name":"Paul Bellora"},"score":5,"creation_date":1365198869,"post_id":15844080,"comment_id":22545776,"body_markdown":"Right, so with a load factor of `0.75` and an initial capacity of `n`, putting `n` values would cause it to resize.","body":"Right, so with a load factor of <code>0.75</code> and an initial capacity of <code>n</code>, putting <code>n</code> values would cause it to resize."},{"owner":{"account_id":69149,"reputation":233552,"user_id":201359,"accept_rate":100,"display_name":"&#211;scar L&#243;pez"},"score":0,"creation_date":1365199212,"post_id":15844080,"comment_id":22545881,"body_markdown":"@PaulBellora so you&#39;re suggesting that the initial capacity should be size()/.75 to avoid an initial resize? makes sense, I&#39;ll update my answer","body":"@PaulBellora so you&#39;re suggesting that the initial capacity should be size()/.75 to avoid an initial resize? makes sense, I&#39;ll update my answer"},{"owner":{"account_id":357343,"reputation":54520,"user_id":697449,"accept_rate":82,"display_name":"Paul Bellora"},"score":0,"creation_date":1365199398,"post_id":15844080,"comment_id":22545943,"body_markdown":"Exactly +1 - you can see Guava is doing the same thing in the snippet [my answer](http://stackoverflow.com/a/15844138/697449) references.","body":"Exactly +1 - you can see Guava is doing the same thing in the snippet <a href=\"http://stackoverflow.com/a/15844138/697449\">my answer</a> references."},{"owner":{"account_id":195966,"reputation":15172,"user_id":439171,"accept_rate":75,"display_name":"Italo Borssatto"},"score":0,"creation_date":1365199917,"post_id":15844080,"comment_id":22546174,"body_markdown":"So, if I change my load factor to 1.0, like @rgettman suggested. Then `new HashMap(list.size(), 1.0)` will have the same behaviour of `new HashMap(Math.ceiling(list.size() / 0.75)` in my case, where I&#39;ll never add more itens to the hash map?","body":"So, if I change my load factor to 1.0, like @rgettman suggested. Then <code>new HashMap(list.size(), 1.0)</code> will have the same behaviour of <code>new HashMap(Math.ceiling(list.size() &#47; 0.75)</code> in my case, where I&#39;ll never add more itens to the hash map?"},{"owner":{"account_id":69149,"reputation":233552,"user_id":201359,"accept_rate":100,"display_name":"&#211;scar L&#243;pez"},"score":0,"creation_date":1365200109,"post_id":15844080,"comment_id":22546251,"body_markdown":"It&#39;d be the same, but it&#39;s a bad practice to wait until the last moment to increase the hash map&#39;s size, that&#39;s why the load factor is usually less than 1","body":"It&#39;d be the same, but it&#39;s a bad practice to wait until the last moment to increase the hash map&#39;s size, that&#39;s why the load factor is usually less than 1"},{"owner":{"account_id":195966,"reputation":15172,"user_id":439171,"accept_rate":75,"display_name":"Italo Borssatto"},"score":0,"creation_date":1365200225,"post_id":15844080,"comment_id":22546299,"body_markdown":"Ok. But I&#39;m asking only in my specific case, where I&#39;ll never add another item to the hash map. In this specific case i would be a bad practice?","body":"Ok. But I&#39;m asking only in my specific case, where I&#39;ll never add another item to the hash map. In this specific case i would be a bad practice?"},{"owner":{"account_id":69149,"reputation":233552,"user_id":201359,"accept_rate":100,"display_name":"&#211;scar L&#243;pez"},"score":1,"creation_date":1365200476,"post_id":15844080,"comment_id":22546404,"body_markdown":"@italo in that case both rgettman&#39;s answer and my own would be equivalent. Also, if you want to enforce the invariant that the hashmap never changes, maybe you should make it immutable using `Collections.unmodifiableMap()`","body":"@italo in that case both rgettman&#39;s answer and my own would be equivalent. Also, if you want to enforce the invariant that the hashmap never changes, maybe you should make it immutable using <code>Collections.unmodifiableMap()</code>"}],"tags":[],"owner":{"account_id":69149,"reputation":233552,"user_id":201359,"accept_rate":100,"display_name":"&#211;scar L&#243;pez"},"comment_count":9,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1456032890,"creation_date":1365198106,"answer_id":15844080,"question_id":15844035,"body_markdown":"What you&#39;re doing is fine. In this way you&#39;re sure that the hash map has _at least_ enough capacity for the initial values. If you have more information regarding the usage patterns of the hash map (example: is it updated frequently? are many new elements added frequently?), you might want to set a bigger initial capacity (for instance, `list.size() * 2`), but never lower. Use a profiler to determine if the initial capacity is falling short too soon.\r\n\r\n**UPDATE**\r\n\r\nThanks to @PaulBellora for suggesting that the initial capacity should be set to `(int)Math.ceil(list.size() / loadFactor)` (typically, the default load factor is 0.75) in order to avoid an initial resize.","title":"Best HashMap initial capacity while indexing a List","body":"<p>What you're doing is fine. In this way you're sure that the hash map has <em>at least</em> enough capacity for the initial values. If you have more information regarding the usage patterns of the hash map (example: is it updated frequently? are many new elements added frequently?), you might want to set a bigger initial capacity (for instance, <code>list.size() * 2</code>), but never lower. Use a profiler to determine if the initial capacity is falling short too soon.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Thanks to @PaulBellora for suggesting that the initial capacity should be set to <code>(int)Math.ceil(list.size() / loadFactor)</code> (typically, the default load factor is 0.75) in order to avoid an initial resize.</p>\n"},{"comments":[{"owner":{"account_id":20530,"reputation":263492,"user_id":49153,"accept_rate":91,"display_name":"Ali"},"score":1,"creation_date":1480685375,"post_id":15844138,"comment_id":69077634,"body_markdown":"+1. This is the simplest and the easiest solution for those who don&#39;t want to understand the internals of the map, and just want something that works as expected.","body":"+1. This is the simplest and the easiest solution for those who don&#39;t want to understand the internals of the map, and just want something that works as expected."}],"tags":[],"owner":{"account_id":357343,"reputation":54520,"user_id":697449,"accept_rate":82,"display_name":"Paul Bellora"},"comment_count":1,"down_vote_count":2,"up_vote_count":18,"is_accepted":false,"score":16,"last_activity_date":1365198374,"creation_date":1365198374,"answer_id":15844138,"question_id":15844035,"body_markdown":"Guava&#39;s [`Maps.newHashMapWithExpectedSize`][1] uses this helper method to calculate initial capacity for the default load factor of `0.75`, based on some expected number of values:\r\n\r\n    /**\r\n     * Returns a capacity that is sufficient to keep the map from being resized as\r\n     * long as it grows no larger than expectedSize and the load factor is &gt;= its\r\n     * default (0.75).\r\n     */\r\n    static int capacity(int expectedSize) {\r\n        if (expectedSize &lt; 3) {\r\n            checkArgument(expectedSize &gt;= 0);\r\n            return expectedSize + 1;\r\n        }\r\n        if (expectedSize &lt; Ints.MAX_POWER_OF_TWO) {\r\n            return expectedSize + expectedSize / 3;\r\n        }\r\n        return Integer.MAX_VALUE; // any large value\r\n    }\r\n\r\nreference: [source][2]\r\n\r\nFrom the `newHashMapWithExpectedSize` documentation:\r\n\r\n&gt; Creates a `HashMap` instance, with a high enough &quot;initial capacity&quot; that\r\n&gt; it *should* hold `expectedSize` elements without growth. This behavior\r\n&gt; cannot be broadly guaranteed, but it is observed to be true for\r\n&gt; OpenJDK 1.6. It also can&#39;t be guaranteed that the method isn&#39;t\r\n&gt; inadvertently *oversizing* the returned map.\r\n\r\n  [1]: http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Maps.html#newHashMapWithExpectedSize%28int%29\r\n  [2]: http://docs.guava-libraries.googlecode.com/git/javadoc/src-html/com/google/common/collect/Maps.html#line.201","title":"Best HashMap initial capacity while indexing a List","body":"<p>Guava's <a href=\"http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Maps.html#newHashMapWithExpectedSize%28int%29\"><code>Maps.newHashMapWithExpectedSize</code></a> uses this helper method to calculate initial capacity for the default load factor of <code>0.75</code>, based on some expected number of values:</p>\n\n<pre><code>/**\n * Returns a capacity that is sufficient to keep the map from being resized as\n * long as it grows no larger than expectedSize and the load factor is &gt;= its\n * default (0.75).\n */\nstatic int capacity(int expectedSize) {\n    if (expectedSize &lt; 3) {\n        checkArgument(expectedSize &gt;= 0);\n        return expectedSize + 1;\n    }\n    if (expectedSize &lt; Ints.MAX_POWER_OF_TWO) {\n        return expectedSize + expectedSize / 3;\n    }\n    return Integer.MAX_VALUE; // any large value\n}\n</code></pre>\n\n<p>reference: <a href=\"http://docs.guava-libraries.googlecode.com/git/javadoc/src-html/com/google/common/collect/Maps.html#line.201\">source</a></p>\n\n<p>From the <code>newHashMapWithExpectedSize</code> documentation:</p>\n\n<blockquote>\n  <p>Creates a <code>HashMap</code> instance, with a high enough \"initial capacity\" that\n  it <em>should</em> hold <code>expectedSize</code> elements without growth. This behavior\n  cannot be broadly guaranteed, but it is observed to be true for\n  OpenJDK 1.6. It also can't be guaranteed that the method isn't\n  inadvertently <em>oversizing</em> the returned map.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":254607,"reputation":31358,"user_id":534124,"accept_rate":75,"display_name":"Oswald"},"comment_count":0,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1365198564,"creation_date":1365198564,"answer_id":15844179,"question_id":15844035,"body_markdown":"According to the [reference documentation of java.util.HashMap][1]:\r\n\r\n&gt; The expected number of entries in the map and its load factor should be taken into account when setting its initial capacity, so as to minimize the number of rehash operations. If the initial capacity is greater than the maximum number of entries divided by the load factor, no rehash operations will ever occur.\r\n\r\nThis means, if you know in advance, how many entries the HashMap should store, you can prevent rehashing by choosing an appropriate initial capacity **and load factor**. However:\r\n\r\n&gt; As a general rule, the default load factor (.75) offers a good tradeoff between time and space costs. Higher values decrease the space overhead but increase the lookup cost (reflected in most of the operations of the HashMap class, including get and put).\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html","title":"Best HashMap initial capacity while indexing a List","body":"<p>According to the <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html\" rel=\"nofollow\">reference documentation of java.util.HashMap</a>:</p>\n\n<blockquote>\n  <p>The expected number of entries in the map and its load factor should be taken into account when setting its initial capacity, so as to minimize the number of rehash operations. If the initial capacity is greater than the maximum number of entries divided by the load factor, no rehash operations will ever occur.</p>\n</blockquote>\n\n<p>This means, if you know in advance, how many entries the HashMap should store, you can prevent rehashing by choosing an appropriate initial capacity <strong>and load factor</strong>. However:</p>\n\n<blockquote>\n  <p>As a general rule, the default load factor (.75) offers a good tradeoff between time and space costs. Higher values decrease the space overhead but increase the lookup cost (reflected in most of the operations of the HashMap class, including get and put).</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":2983257,"reputation":3053,"user_id":2532762,"accept_rate":44,"display_name":"1mike12"},"score":0,"creation_date":1449603287,"post_id":15844186,"comment_id":56075837,"body_markdown":"@Eric just look at the source and search for &quot;resize(&quot; . http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/util/HashMap.java#HashMap.resize%28%29 It&#39;s probably done the same way. Line 676","body":"@Eric just look at the source and search for &quot;resize(&quot; . <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/util/HashMap.java#HashMap.resize%28%29\" rel=\"nofollow noreferrer\">grepcode.com/file/repository.grepcode.com/java/root/jdk/open&zwnj;&#8203;jdk/&hellip;</a> It&#39;s probably done the same way. Line 676"},{"owner":{"account_id":102338,"reputation":5243,"user_id":274757,"accept_rate":72,"display_name":"dagnelies"},"score":9,"creation_date":1451727320,"post_id":15844186,"comment_id":56872323,"body_markdown":"is it just me or doesn&#39;t anybody know that *a load of 1.0 is a really bad idea*?!","body":"is it just me or doesn&#39;t anybody know that <i>a load of 1.0 is a really bad idea</i>?!"},{"owner":{"account_id":1888343,"reputation":176617,"user_id":1707091,"display_name":"rgettman"},"score":0,"creation_date":1451934769,"post_id":15844186,"comment_id":56941777,"body_markdown":"@arnaud Normally, yes, that would be a bad idea. But the OP did state &quot;**Note**: I&#39;ll never add more items to the map.&quot;","body":"@arnaud Normally, yes, that would be a bad idea. But the OP did state &quot;<b>Note</b>: I&#39;ll never add more items to the map.&quot;"},{"owner":{"account_id":102338,"reputation":5243,"user_id":274757,"accept_rate":72,"display_name":"dagnelies"},"score":4,"creation_date":1451985188,"post_id":15844186,"comment_id":56960874,"body_markdown":"@rgettman: if you know how hash map work internally, you would notice that you not only screw up your inserts but also your reads. All operation would become O(N) instead of O(1) because you&#39;ll have to jump from bucket to bucket because of collisions everywhere","body":"@rgettman: if you know how hash map work internally, you would notice that you not only screw up your inserts but also your reads. All operation would become O(N) instead of O(1) because you&#39;ll have to jump from bucket to bucket because of collisions everywhere"},{"owner":{"account_id":403272,"reputation":591,"user_id":770931,"accept_rate":56,"display_name":"Zardoz89"},"score":6,"creation_date":1459951401,"post_id":15844186,"comment_id":60519604,"body_markdown":"You know that you set as the correct ansower the WRONG ANSWER ?","body":"You know that you set as the correct ansower the WRONG ANSWER ?"},{"owner":{"account_id":5299913,"reputation":1693,"user_id":4229917,"display_name":"Michael Geier"},"score":1,"creation_date":1548757082,"post_id":15844186,"comment_id":95647044,"body_markdown":"And note that the initial capacity will internally be rounded up to the next power of two. So a capacity of 200 will be rounded up to 256.\nIf HashMap wouldn&#39;t round up to a power-of-two value for `capacity`, some buckets would be never used. The bucket index for where to put the map data is determined by `bucketIndex = hashCode(key) &amp; (capacity-1)`.\nThis is true for both Java 7 and 8, afaik.","body":"And note that the initial capacity will internally be rounded up to the next power of two. So a capacity of 200 will be rounded up to 256. If HashMap wouldn&#39;t round up to a power-of-two value for <code>capacity</code>, some buckets would be never used. The bucket index for where to put the map data is determined by <code>bucketIndex = hashCode(key) &amp; (capacity-1)</code>. This is true for both Java 7 and 8, afaik."},{"owner":{"account_id":1429360,"reputation":4094,"user_id":1352127,"accept_rate":45,"display_name":"Shailesh Pratapwar"},"score":3,"creation_date":1555679538,"post_id":15844186,"comment_id":98199335,"body_markdown":"Using load factor of 1 is a bad idea considering the fact that hash collisions will increase if there are less free buckets. Its a tradeoff between space and time that java designers use load factor of 0.75 as default. If you are not sure about load factor internals, do not touch this default. Now, If you go with load factor of 0.75 instead of 1, the capacity of map that shouldn&#39;t cause it to rehash can be calculated with initialCapacity = (Expected no. of elements/0.75)+1. Period.","body":"Using load factor of 1 is a bad idea considering the fact that hash collisions will increase if there are less free buckets. Its a tradeoff between space and time that java designers use load factor of 0.75 as default. If you are not sure about load factor internals, do not touch this default. Now, If you go with load factor of 0.75 instead of 1, the capacity of map that shouldn&#39;t cause it to rehash can be calculated with initialCapacity = (Expected no. of elements/0.75)+1. Period."},{"owner":{"account_id":7423414,"reputation":406,"user_id":5646852,"accept_rate":88,"display_name":"AgentM"},"score":0,"creation_date":1607079806,"post_id":15844186,"comment_id":115165604,"body_markdown":"@ShaileshPratapwar I assume you take the ceil function of that formula too. e.g. `initCapacity = ceil(nExpectedElements / loadFactor) + 1`","body":"@ShaileshPratapwar I assume you take the ceil function of that formula too. e.g. <code>initCapacity = ceil(nExpectedElements &#47; loadFactor) + 1</code>"}],"tags":[],"owner":{"account_id":1888343,"reputation":176617,"user_id":1707091,"display_name":"rgettman"},"comment_count":8,"down_vote_count":9,"up_vote_count":35,"is_accepted":true,"score":26,"last_activity_date":1365198921,"creation_date":1365198602,"answer_id":15844186,"question_id":15844035,"body_markdown":"If you wish to avoid rehashing the `HashMap`, and you know that no other elements will be placed into the `HashMap`, then you must take into account the load factor as well as the initial capacity.  The load factor [for a `HashMap` defaults to 0.75][1].\r\n\r\nThe calculation to determine whether rehashing is necessary occurs whenever an new entry is added, e.g. `put` places a new key/value.  So if you specify an initial capacity of `list.size()`, and a load factor of 1, then it will rehash after the last `put`.  So to prevent rehashing, use a load factor of 1 and a capacity of `list.size() + 1`.\r\n\r\n**EDIT**\r\n\r\nLooking at the `HashMap` source code, it will rehash if the _old_ size meets or exceeds the threshold, so it won&#39;t rehash on the last `put`.  So it looks like a capacity of `list.size()` should be fine.\r\n\r\n    HashMap&lt;Integer, T&gt; map = new HashMap&lt;Integer, T&gt;(list.size(), 1.0);\r\n\r\nHere&#39;s the relevant piece of `HashMap` source code:\r\n\r\n    void addEntry(int hash, K key, V value, int bucketIndex) {\r\n        Entry&lt;K,V&gt; e = table[bucketIndex];\r\n        table[bucketIndex] = new Entry&lt;&gt;(hash, key, value, e);\r\n        if (size++ &gt;= threshold)\r\n            resize(2 * table.length);\r\n    }\r\n\r\n[1]: http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html","title":"Best HashMap initial capacity while indexing a List","body":"<p>If you wish to avoid rehashing the <code>HashMap</code>, and you know that no other elements will be placed into the <code>HashMap</code>, then you must take into account the load factor as well as the initial capacity.  The load factor <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html\" rel=\"noreferrer\">for a <code>HashMap</code> defaults to 0.75</a>.</p>\n\n<p>The calculation to determine whether rehashing is necessary occurs whenever an new entry is added, e.g. <code>put</code> places a new key/value.  So if you specify an initial capacity of <code>list.size()</code>, and a load factor of 1, then it will rehash after the last <code>put</code>.  So to prevent rehashing, use a load factor of 1 and a capacity of <code>list.size() + 1</code>.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Looking at the <code>HashMap</code> source code, it will rehash if the <em>old</em> size meets or exceeds the threshold, so it won't rehash on the last <code>put</code>.  So it looks like a capacity of <code>list.size()</code> should be fine.</p>\n\n<pre><code>HashMap&lt;Integer, T&gt; map = new HashMap&lt;Integer, T&gt;(list.size(), 1.0);\n</code></pre>\n\n<p>Here's the relevant piece of <code>HashMap</code> source code:</p>\n\n<pre><code>void addEntry(int hash, K key, V value, int bucketIndex) {\n    Entry&lt;K,V&gt; e = table[bucketIndex];\n    table[bucketIndex] = new Entry&lt;&gt;(hash, key, value, e);\n    if (size++ &gt;= threshold)\n        resize(2 * table.length);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":319988,"reputation":10980,"user_id":638028,"accept_rate":91,"display_name":"Klitos Kyriacou"},"score":3,"creation_date":1441790763,"post_id":28708768,"comment_id":52812312,"body_markdown":"Looking at the JDK source code, the actual table size is rounded up to the nearest power of 2. Also, re. your statement &quot;By default the &#39;load factor&#39; of a HashMap is 0.75, this means that when the number of entries in a HashMap reaches 75% of the capacity supplied, it will resize the array and rehash.&quot; - to be a bit pedantic, the resize only happens when the entries exceed (not reach) 75% of the capacity. So, for example, with a specified initial capacity of 64 and load factor of 0.5, you can put 32 entries in without resizing.","body":"Looking at the JDK source code, the actual table size is rounded up to the nearest power of 2. Also, re. your statement &quot;By default the &#39;load factor&#39; of a HashMap is 0.75, this means that when the number of entries in a HashMap reaches 75% of the capacity supplied, it will resize the array and rehash.&quot; - to be a bit pedantic, the resize only happens when the entries exceed (not reach) 75% of the capacity. So, for example, with a specified initial capacity of 64 and load factor of 0.5, you can put 32 entries in without resizing."},{"owner":{"account_id":5399275,"reputation":16206,"user_id":4299560,"accept_rate":90,"display_name":"Ced"},"score":0,"creation_date":1454865004,"post_id":28708768,"comment_id":58225189,"body_markdown":"Also 100 / 0.75 = 133, not that it changes anything","body":"Also 100 / 0.75 = 133, not that it changes anything"}],"tags":[],"owner":{"account_id":5842315,"reputation":231,"user_id":4603503,"display_name":"Jack Hopner"},"comment_count":2,"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1455046406,"creation_date":1424822587,"answer_id":28708768,"question_id":15844035,"body_markdown":"The &#39;capacity&#39; keyword is incorrect by definition and isn&#39;t used in the way typically expected.\r\n\r\nBy default the &#39;load factor&#39; of a HashMap is 0.75, this means that when the  number of entries in a HashMap reaches 75% of the capacity supplied, it will resize the array and rehash.\r\n\r\nFor example if I do:\r\n\r\n    Map&lt;Integer, Integer&gt; map = new HashMap&lt;&gt;(100);\r\n\r\nWhen I am adding the 75th entry, the map will resize the Entry table to 2 * map.size() (or 2 * table.length). So we can do a few things:\r\n\r\n 1. Change the load factor - this could impact the performance of the map\r\n 2. Set the initial capacity to list.size() / 0.75 + 1\r\n\r\nThe best option is the latter of the two, let me explain what&#39;s going on here:\r\n\r\n\r\n    list.size() / 0.75\r\n\r\nThis will return list.size() + 25% of list.size(), for example if my list had a size of 100 it would return 133. We then add 1 to it as the map is resized if the size of it is equal to 75% of the initial capacity, so if we had a list with a size of 100 we would be setting the initial capacity to 134, this would mean that adding all 100 entries from the list would not incur any resize of the map.\r\n\r\nEnd result:\r\n\r\n    Map&lt;Integer, Integer&gt; map = new HashMap&lt;&gt;(list.size() / 0.75 + 1);\r\n\r\n","title":"Best HashMap initial capacity while indexing a List","body":"<p>The 'capacity' keyword is incorrect by definition and isn't used in the way typically expected.</p>\n\n<p>By default the 'load factor' of a HashMap is 0.75, this means that when the  number of entries in a HashMap reaches 75% of the capacity supplied, it will resize the array and rehash.</p>\n\n<p>For example if I do:</p>\n\n<pre><code>Map&lt;Integer, Integer&gt; map = new HashMap&lt;&gt;(100);\n</code></pre>\n\n<p>When I am adding the 75th entry, the map will resize the Entry table to 2 * map.size() (or 2 * table.length). So we can do a few things:</p>\n\n<ol>\n<li>Change the load factor - this could impact the performance of the map</li>\n<li>Set the initial capacity to list.size() / 0.75 + 1</li>\n</ol>\n\n<p>The best option is the latter of the two, let me explain what's going on here:</p>\n\n<pre><code>list.size() / 0.75\n</code></pre>\n\n<p>This will return list.size() + 25% of list.size(), for example if my list had a size of 100 it would return 133. We then add 1 to it as the map is resized if the size of it is equal to 75% of the initial capacity, so if we had a list with a size of 100 we would be setting the initial capacity to 134, this would mean that adding all 100 entries from the list would not incur any resize of the map.</p>\n\n<p>End result:</p>\n\n<pre><code>Map&lt;Integer, Integer&gt; map = new HashMap&lt;&gt;(list.size() / 0.75 + 1);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4119573,"reputation":347,"user_id":3380317,"accept_rate":75,"display_name":"Aleksander Melnichnikov"},"score":0,"creation_date":1613550869,"post_id":55762504,"comment_id":117105903,"body_markdown":"Could you explain why do we need +1?","body":"Could you explain why do we need +1?"},{"owner":{"account_id":6001328,"reputation":601,"user_id":4714510,"accept_rate":80,"display_name":"RevakoOA"},"score":0,"creation_date":1672142541,"post_id":55762504,"comment_id":132227983,"body_markdown":"I guess that&#39;s not actual, but still, we need +1 this is to cover the rest of the division. For example, we reserve space for 5 elements. A map will be resized once it reaches 0.75 loads. So 5 should be less than 75% of the map reserved space. 5*(4/3) = 6.66. We need that to be rounded to 7, but it will be rounded down to 6. So 5 out of 7 is 71%, and 5 out of 6 is 83%. In the case with 6 reserved places once you add the last map will be resized. Still, I guess the proper way is to change load factor to 1 and reserve exactly 5 elements.","body":"I guess that&#39;s not actual, but still, we need +1 this is to cover the rest of the division. For example, we reserve space for 5 elements. A map will be resized once it reaches 0.75 loads. So 5 should be less than 75% of the map reserved space. 5*(4/3) = 6.66. We need that to be rounded to 7, but it will be rounded down to 6. So 5 out of 7 is 71%, and 5 out of 6 is 83%. In the case with 6 reserved places once you add the last map will be resized. Still, I guess the proper way is to change load factor to 1 and reserve exactly 5 elements."}],"tags":[],"owner":{"account_id":1429360,"reputation":4094,"user_id":1352127,"accept_rate":45,"display_name":"Shailesh Pratapwar"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1555679863,"creation_date":1555679863,"answer_id":55762504,"question_id":15844035,"body_markdown":"**The rule of thumb if you don&#39;t know load factor/capacity internals :**\r\n\r\n    initialCapacityToUse = (Expected No. of elements in map / 0.75) + 1\r\n\r\nWith this initial capacity value, the rehash will not occur for storing given expected no. of elements in map.\r\n","title":"Best HashMap initial capacity while indexing a List","body":"<p><strong>The rule of thumb if you don't know load factor/capacity internals :</strong></p>\n\n<pre><code>initialCapacityToUse = (Expected No. of elements in map / 0.75) + 1\n</code></pre>\n\n<p>With this initial capacity value, the rehash will not occur for storing given expected no. of elements in map.</p>\n"},{"tags":[],"owner":{"account_id":4647011,"reputation":41835,"user_id":3764965,"accept_rate":94,"display_name":"Nikolas Charalambidis"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1668699313,"creation_date":1668699313,"answer_id":74478150,"question_id":15844035,"body_markdown":"&lt;h3&gt;Java 19&lt;/h3&gt;\r\n\r\nThough this [answer][1] is still valid, it&#39;s worth noting that as of Java 19, there are in-built static methods to construct hash structures with appropriate initial capacities.\r\n\r\n```java\r\nHashMap&lt;String, Integer&gt; hashMap = HashMap.newHashMap(10);\r\n```\r\n\r\nThe implementation uses `DEFAULT_LOAD_FACTOR = 0.75f`.\r\n\r\nThere are also the very same methods for other hash structures using the very same implementation from `HashMap` on top of the `DEFAULT_LOAD_FACTOR`. Here is a complete list:\r\n\r\n- `HashMap.newHashMap(10)`\r\n- `HashSet.newHashSet(10)`\r\n- `LinkedHashMap.newLinkedHashMap(10)`\r\n- `LinkedHashSet.newLinkedHashSet(10)`\r\n- `WeakHashMap.newWeakHashMap(10)`\r\n\r\nInterestingly, there is no such method for `Hashtable`.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/15844186/3764965","title":"Best HashMap initial capacity while indexing a List","body":"<h3>Java 19</h3>\n<p>Though this <a href=\"https://stackoverflow.com/a/15844186/3764965\">answer</a> is still valid, it's worth noting that as of Java 19, there are in-built static methods to construct hash structures with appropriate initial capacities.</p>\n<pre class=\"lang-java prettyprint-override\"><code>HashMap&lt;String, Integer&gt; hashMap = HashMap.newHashMap(10);\n</code></pre>\n<p>The implementation uses <code>DEFAULT_LOAD_FACTOR = 0.75f</code>.</p>\n<p>There are also the very same methods for other hash structures using the very same implementation from <code>HashMap</code> on top of the <code>DEFAULT_LOAD_FACTOR</code>. Here is a complete list:</p>\n<ul>\n<li><code>HashMap.newHashMap(10)</code></li>\n<li><code>HashSet.newHashSet(10)</code></li>\n<li><code>LinkedHashMap.newLinkedHashMap(10)</code></li>\n<li><code>LinkedHashSet.newLinkedHashSet(10)</code></li>\n<li><code>WeakHashMap.newWeakHashMap(10)</code></li>\n</ul>\n<p>Interestingly, there is no such method for <code>Hashtable</code>.</p>\n"}],"owner":{"account_id":195966,"reputation":15172,"user_id":439171,"accept_rate":75,"display_name":"Italo Borssatto"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42108,"favorite_count":0,"down_vote_count":0,"up_vote_count":32,"accepted_answer_id":15844186,"answer_count":7,"score":32,"last_activity_date":1668699313,"creation_date":1365197900,"question_id":15844035,"body_markdown":"I have a list (`List&lt;T&gt; list`) and I want to index its objects by their ids using a map (`HashMap&lt;Integer, T&gt; map`). I always use `list.size()` as the **initial capacity** in the `HashMap` constructor,like in the code below. Is this the best initial capacity to be used in this case?\r\n\r\n**Note**: I&#39;ll never add more items to the map.\r\n\r\n    List&lt;T&gt; list = myList;\r\n    Map&lt;Integer, T&gt; map = new HashMap&lt;Integer, T&gt;(list.size());\r\n    for(T item : list) {\r\n        map.put(item.getId(), item);\r\n    }","title":"Best HashMap initial capacity while indexing a List","body":"<p>I have a list (<code>List&lt;T&gt; list</code>) and I want to index its objects by their ids using a map (<code>HashMap&lt;Integer, T&gt; map</code>). I always use <code>list.size()</code> as the <strong>initial capacity</strong> in the <code>HashMap</code> constructor,like in the code below. Is this the best initial capacity to be used in this case?</p>\n\n<p><strong>Note</strong>: I'll never add more items to the map.</p>\n\n<pre><code>List&lt;T&gt; list = myList;\nMap&lt;Integer, T&gt; map = new HashMap&lt;Integer, T&gt;(list.size());\nfor(T item : list) {\n    map.put(item.getId(), item);\n}\n</code></pre>\n"},{"tags":["java","java-8"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1668699857,"post_id":74478014,"comment_id":131474610,"body_markdown":"*I am trying to build OpenJDK 8 on Windows 10 using cygwin* [Why so?](https://technojeeves.com/index.php/aliasjava1/15-smart-questions)","body":"<i>I am trying to build OpenJDK 8 on Windows 10 using cygwin</i> <a href=\"https://technojeeves.com/index.php/aliasjava1/15-smart-questions\" rel=\"nofollow noreferrer\">Why so?</a>"},{"owner":{"account_id":2496,"reputation":266244,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"score":0,"creation_date":1668705744,"post_id":74478014,"comment_id":131476852,"body_markdown":"@g00se Are you pointing out the ineffectiveness of XY questions? If so, I would suggest being more direct.","body":"@g00se Are you pointing out the ineffectiveness of XY questions? If so, I would suggest being more direct."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1668706251,"post_id":74478014,"comment_id":131477052,"body_markdown":"@erickson Not direct yet as there might be a legitimate reason. That&#39;s why I&#39;m asking the question. But the (real) goal has not been stated","body":"@erickson Not direct yet as there might be a legitimate reason. That&#39;s why I&#39;m asking the question. But the (real) goal has not been stated"},{"owner":{"account_id":24368165,"reputation":1,"user_id":18301583,"display_name":"kliri"},"score":0,"creation_date":1668707197,"post_id":74478014,"comment_id":131477374,"body_markdown":"@g00se I think I have asked my question correctly enough, my goal is to build OpenJDK 8 on Windows 10","body":"@g00se I think I have asked my question correctly enough, my goal is to build OpenJDK 8 on Windows 10"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1668707399,"post_id":74478014,"comment_id":131477441,"body_markdown":"Are you not going to use it to run apps then?","body":"Are you not going to use it to run apps then?"},{"owner":{"account_id":24368165,"reputation":1,"user_id":18301583,"display_name":"kliri"},"score":0,"creation_date":1668712036,"post_id":74478014,"comment_id":131478990,"body_markdown":"I am going to, otherwise why would I build OpenJDK?","body":"I am going to, otherwise why would I build OpenJDK?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1668713689,"post_id":74478014,"comment_id":131479491,"body_markdown":"OK, so we&#39;re getting *closer* to your actual goal, which leads me to the question: why don&#39;t you just install it?","body":"OK, so we&#39;re getting <i>closer</i> to your actual goal, which leads me to the question: why don&#39;t you just install it?"},{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":0,"creation_date":1668713772,"post_id":74478014,"comment_id":131479510,"body_markdown":"Note that the console reports that the Visual Studio Code installation is found in some path containing `VC` (uppercase), but the tool seems to be looking in some path containing `vc` (lowercase). While Windows is case-insensitive, Cygwin isn&#39;t, if I remember correctly.","body":"Note that the console reports that the Visual Studio Code installation is found in some path containing <code>VC</code> (uppercase), but the tool seems to be looking in some path containing <code>vc</code> (lowercase). While Windows is case-insensitive, Cygwin isn&#39;t, if I remember correctly."},{"owner":{"account_id":24368165,"reputation":1,"user_id":18301583,"display_name":"kliri"},"score":0,"creation_date":1668775997,"post_id":74478014,"comment_id":131494330,"body_markdown":"@g00se I need to modify the jvm.dll source code to debug my agent to see how the jvm gets the JVMTI Environment when I connect the agent to my application","body":"@g00se I need to modify the jvm.dll source code to debug my agent to see how the jvm gets the JVMTI Environment when I connect the agent to my application"},{"owner":{"account_id":24368165,"reputation":1,"user_id":18301583,"display_name":"kliri"},"score":0,"creation_date":1668776453,"post_id":74478014,"comment_id":131494478,"body_markdown":"@MCEmperor Maybe, but the thing is that Visual Studio does not create a bin folder in the vc folder, I tried creating a bin folder in VC and moving the files from VC/Tools/MSVC/14.30.30705/bin/Hostx64/x64/ there, but it did not help.","body":"@MCEmperor Maybe, but the thing is that Visual Studio does not create a bin folder in the vc folder, I tried creating a bin folder in VC and moving the files from VC/Tools/MSVC/14.30.30705/bin/Hostx64/x64/ there, but it did not help."}],"owner":{"account_id":24368165,"reputation":1,"user_id":18301583,"display_name":"kliri"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":124,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1668699200,"creation_date":1668698777,"question_id":74478014,"body_markdown":"I am trying to build OpenJDK 8 on Windows 10 using cygwin, but configure cannot detect the Visual Studio 2022 bin folder, even though I explicitly specified it in [bash configure](https://i.stack.imgur.com/48zO0.png)\r\n\r\nThe command I use to run configure: bash configure --with-tools-dir=&quot;/cygdrive/d/Program Files/Microsoft Visual Studio/VC/Tools/MSVC/14.30.30705/bin/Hostx64/x64/&quot;","title":"Building OpenJDK 8 on Windows 10 from sources","body":"<p>I am trying to build OpenJDK 8 on Windows 10 using cygwin, but configure cannot detect the Visual Studio 2022 bin folder, even though I explicitly specified it in <a href=\"https://i.stack.imgur.com/48zO0.png\" rel=\"nofollow noreferrer\">bash configure</a></p>\n<p>The command I use to run configure: bash configure --with-tools-dir=&quot;/cygdrive/d/Program Files/Microsoft Visual Studio/VC/Tools/MSVC/14.30.30705/bin/Hostx64/x64/&quot;</p>\n"},{"tags":["java","mysql","database"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1668699552,"post_id":74478045,"comment_id":131474492,"body_markdown":"Yes, there&#39;s such a thing as &#39;replication&#39; but Java doesn&#39;t really enter into it. You&#39;d use MySql tools to do this","body":"Yes, there&#39;s such a thing as &#39;replication&#39; but Java doesn&#39;t really enter into it. You&#39;d use MySql tools to do this"},{"owner":{"account_id":204659,"reputation":37559,"user_id":453005,"accept_rate":100,"display_name":"DwB"},"score":1,"creation_date":1668699821,"post_id":74478045,"comment_id":131474595,"body_markdown":"Are you batch processing the objects?  If you, you can disable indices in the target db, do the inserts, then enable the indices.  This may help.  no guarantee.","body":"Are you batch processing the objects?  If you, you can disable indices in the target db, do the inserts, then enable the indices.  This may help.  no guarantee."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1668699983,"post_id":74478045,"comment_id":131474656,"body_markdown":"@DwB That would leave the upserts having duplicate records would it not?","body":"@DwB That would leave the upserts having duplicate records would it not?"},{"owner":{"account_id":204659,"reputation":37559,"user_id":453005,"accept_rate":100,"display_name":"DwB"},"score":0,"creation_date":1668700319,"post_id":74478045,"comment_id":131474789,"body_markdown":"I&#39;m not sure about the upsert functionality.  I believe an upsert should attempt to update first, then insert.  That should not depend on an index.","body":"I&#39;m not sure about the upsert functionality.  I believe an upsert should attempt to update first, then insert.  That should not depend on an index."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1668701126,"post_id":74478045,"comment_id":131475118,"body_markdown":"Yes, you&#39;re right","body":"Yes, you&#39;re right"}],"owner":{"account_id":18452672,"reputation":189,"user_id":13442349,"display_name":"PaulJK"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1668699192,"creation_date":1668698910,"question_id":74478045,"body_markdown":"Simple question here: I have a Java class that processes several thousand objects, then writes data to a remote MySQL database (two tables per object, one is a simple INSERT the other is INSERT with ON DUPLICATE KEY UPDATE). All write operations are done within a single MySQL connection, but it still takes around 1 hour to complete writing, depending on the network connection. Is there a way to simply write all that data to a localhost database first and then migrate the entire database to a remote server in one go using Java? Current size of DB is &lt; 50 MB but it will grow with time.","title":"Copy localhost MySQL database to remote server with Java","body":"<p>Simple question here: I have a Java class that processes several thousand objects, then writes data to a remote MySQL database (two tables per object, one is a simple INSERT the other is INSERT with ON DUPLICATE KEY UPDATE). All write operations are done within a single MySQL connection, but it still takes around 1 hour to complete writing, depending on the network connection. Is there a way to simply write all that data to a localhost database first and then migrate the entire database to a remote server in one go using Java? Current size of DB is &lt; 50 MB but it will grow with time.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":21138619,"reputation":192,"user_id":15541550,"display_name":"Tanishq Chawda"},"score":0,"creation_date":1668538820,"post_id":74450815,"comment_id":131428622,"body_markdown":"are you running your app in emulator??","body":"are you running your app in emulator??"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1668539379,"post_id":74450815,"comment_id":131428812,"body_markdown":"An Android app running on your Android device and you are not at home has no access to files on your pc. D:\\... is a path on your pc.","body":"An Android app running on your Android device and you are not at home has no access to files on your pc. D:\\... is a path on your pc."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1668539415,"post_id":74450815,"comment_id":131428825,"body_markdown":"If you were at home with your phone you would not have access too ;-)","body":"If you were at home with your phone you would not have access too ;-)"},{"owner":{"account_id":26942612,"reputation":13,"user_id":20513143,"display_name":"Nikitka"},"score":0,"creation_date":1668539427,"post_id":74450815,"comment_id":131428827,"body_markdown":"yes, i am running it on API 33","body":"yes, i am running it on API 33"},{"owner":{"account_id":26942612,"reputation":13,"user_id":20513143,"display_name":"Nikitka"},"score":0,"creation_date":1668539505,"post_id":74450815,"comment_id":131428851,"body_markdown":"@blackapps So, what path should I use then?","body":"@blackapps So, what path should I use then?"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1668539637,"post_id":74450815,"comment_id":131428904,"body_markdown":"Files in res/Tasks are resources at runtime for your app. There is no file parh then. Use the resource manager. Something with getResources() or do. Maybe the Tasks directory is not possible. For a start put them directly in res/raw.","body":"Files in res/Tasks are resources at runtime for your app. There is no file parh then. Use the resource manager. Something with getResources() or do. Maybe the Tasks directory is not possible. For a start put them directly in res/raw."},{"owner":{"account_id":26942612,"reputation":13,"user_id":20513143,"display_name":"Nikitka"},"score":0,"creation_date":1668540136,"post_id":74450815,"comment_id":131429042,"body_markdown":"So, I did - sadly, but nothing changed. The error is still the same","body":"So, I did - sadly, but nothing changed. The error is still the same"}],"answers":[{"comments":[{"owner":{"account_id":26942612,"reputation":13,"user_id":20513143,"display_name":"Nikitka"},"score":0,"creation_date":1668540712,"post_id":74451105,"comment_id":131429200,"body_markdown":"Thank you very much! Your suggestion to use emulator&#39;s file system worked!","body":"Thank you very much! Your suggestion to use emulator&#39;s file system worked!"}],"tags":[],"owner":{"account_id":7004992,"reputation":728,"user_id":5369727,"display_name":"Aorlinn"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1668541071,"creation_date":1668540145,"answer_id":74451105,"question_id":74450815,"body_markdown":"You are accessing your computers resources, which is inaccessible from your phone/emulator.\r\n\r\nTake a look at [this introduction][1] on how to work with resources. Especially the part [Accessing original files][2] might be of interest for you.\r\n\r\nAlternatively you can use the phone&#39;s/emulator&#39;s [file system][3] and upload a file with [device file explorer][4] (it&#39;s a Linux system, just in case you aren&#39;t familiar with)\r\n\r\n\r\n  [1]: https://developer.android.com/guide/topics/resources/providing-resources\r\n  [2]: https://developer.android.com/guide/topics/resources/providing-resources#OriginalFiles\r\n  [3]: https://stackoverflow.com/questions/12421814/how-can-i-read-a-text-file-in-android\r\n  [4]: https://developer.android.com/studio/debug/device-file-explorer","title":"java.io.filenotfoundexception: open failed: enoent (no such file or directory). Opening file from directory res","body":"<p>You are accessing your computers resources, which is inaccessible from your phone/emulator.</p>\n<p>Take a look at <a href=\"https://developer.android.com/guide/topics/resources/providing-resources\" rel=\"nofollow noreferrer\">this introduction</a> on how to work with resources. Especially the part <a href=\"https://developer.android.com/guide/topics/resources/providing-resources#OriginalFiles\" rel=\"nofollow noreferrer\">Accessing original files</a> might be of interest for you.</p>\n<p>Alternatively you can use the phone's/emulator's <a href=\"https://stackoverflow.com/questions/12421814/how-can-i-read-a-text-file-in-android\">file system</a> and upload a file with <a href=\"https://developer.android.com/studio/debug/device-file-explorer\" rel=\"nofollow noreferrer\">device file explorer</a> (it's a Linux system, just in case you aren't familiar with)</p>\n"}],"owner":{"account_id":26942612,"reputation":13,"user_id":20513143,"display_name":"Nikitka"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1251,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74451105,"answer_count":1,"score":1,"last_activity_date":1668699099,"creation_date":1668538329,"question_id":74450815,"body_markdown":"I need to get text from files in directory Tasks. Every file has name &quot;tasks&quot; + class (1 or 2) + random symbol from specifications[]\r\nI tried to open file in\r\n\r\n```\r\n\\\\app\\\\src\\\\main\\\\res\\\\Tasks\\\\\r\n```\r\n\r\nand I can&#39;t do this. Below is my code.\r\n\r\n\r\n\r\n```\r\npublic class Task1 extends AppCompatActivity {\r\nfinal Random random = new Random();\r\npublic String specifications[] = new String\\[\\]{&quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;,\r\n&quot;8&quot;, &quot;9&quot;, &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot; , &quot;f&quot;};\r\npublic String[] linii = new String[5];\r\npublic void main(String[] args) throws IOException {\r\nBundle arguments = getIntent().getExtras();\r\nint clasik = arguments.getInt(&quot;class&quot;) - 2131230843;\r\nFileInputStream fstream = new FileInputStream(&quot;D:\\\\Project\\\\Proektorat\\\\app\\\\src\\\\main\\\\res\\\\Tasks\\\\tasks&quot; + clasik + specifications[random.nextInt(15)] + &quot;.txt&quot;);\r\nBufferedReader br = new BufferedReader(new InputStreamReader(fstream));\r\nint i = 0;\r\nwhile ((br.readLine()) != null){\r\nlinii[i] += br.readLine();\r\ni += 1;\r\n}\r\n```\r\n\r\nAnd errors:\r\n\r\n```\r\nW/System.err: java.io.FileNotFoundException: D:\\\\Project\\\\Proektorat\\\\app\\\\src\\\\main\\\\res\\\\Tasks\\\\tasks1a.txt: open failed: ENOENT (No such file or directory)\r\nW/System.err:     at libcore.io.IoBridge.open(IoBridge.java:574)\r\nW/System.err:     at java.io.FileInputStream.\\&lt;init\\&gt;(FileInputStream.java:160)\r\nW/System.err:     at java.io.FileInputStream.\\&lt;init\\&gt;(FileInputStream.java:115)\r\nW/System.err:     at com.example.project.Task1.main(Task1.java:26)\r\nW/System.err:     at com.example.project.Task1.onCreate(Task1.java:41)\r\nW/System.err:     at android.app.Activity.performCreate(Activity.java:8290)\r\nW/System.err:     at android.app.Activity.performCreate(Activity.java:8269)\r\n\r\n```","title":"java.io.filenotfoundexception: open failed: enoent (no such file or directory). Opening file from directory res","body":"<p>I need to get text from files in directory Tasks. Every file has name &quot;tasks&quot; + class (1 or 2) + random symbol from specifications[]\nI tried to open file in</p>\n<pre><code>\\\\app\\\\src\\\\main\\\\res\\\\Tasks\\\\\n</code></pre>\n<p>and I can't do this. Below is my code.</p>\n<pre><code>public class Task1 extends AppCompatActivity {\nfinal Random random = new Random();\npublic String specifications[] = new String\\[\\]{&quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;,\n&quot;8&quot;, &quot;9&quot;, &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot; , &quot;f&quot;};\npublic String[] linii = new String[5];\npublic void main(String[] args) throws IOException {\nBundle arguments = getIntent().getExtras();\nint clasik = arguments.getInt(&quot;class&quot;) - 2131230843;\nFileInputStream fstream = new FileInputStream(&quot;D:\\\\Project\\\\Proektorat\\\\app\\\\src\\\\main\\\\res\\\\Tasks\\\\tasks&quot; + clasik + specifications[random.nextInt(15)] + &quot;.txt&quot;);\nBufferedReader br = new BufferedReader(new InputStreamReader(fstream));\nint i = 0;\nwhile ((br.readLine()) != null){\nlinii[i] += br.readLine();\ni += 1;\n}\n</code></pre>\n<p>And errors:</p>\n<pre><code>W/System.err: java.io.FileNotFoundException: D:\\\\Project\\\\Proektorat\\\\app\\\\src\\\\main\\\\res\\\\Tasks\\\\tasks1a.txt: open failed: ENOENT (No such file or directory)\nW/System.err:     at libcore.io.IoBridge.open(IoBridge.java:574)\nW/System.err:     at java.io.FileInputStream.\\&lt;init\\&gt;(FileInputStream.java:160)\nW/System.err:     at java.io.FileInputStream.\\&lt;init\\&gt;(FileInputStream.java:115)\nW/System.err:     at com.example.project.Task1.main(Task1.java:26)\nW/System.err:     at com.example.project.Task1.onCreate(Task1.java:41)\nW/System.err:     at android.app.Activity.performCreate(Activity.java:8290)\nW/System.err:     at android.app.Activity.performCreate(Activity.java:8269)\n\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":183966,"reputation":14640,"user_id":419705,"accept_rate":67,"display_name":"Roddy of the Frozen Peas"},"score":1,"creation_date":1668693778,"post_id":74476777,"comment_id":131471942,"body_markdown":"what if the result is not an integer? Well, traditionally you&#39;d round...","body":"what if the result is not an integer? Well, traditionally you&#39;d round..."},{"owner":{"account_id":26233822,"reputation":3,"user_id":19909308,"display_name":"John Mayot"},"score":0,"creation_date":1668694310,"post_id":74476777,"comment_id":131472190,"body_markdown":"@RoddyoftheFrozenPeas but if it affects the number of pixels?","body":"@RoddyoftheFrozenPeas but if it affects the number of pixels?"},{"owner":{"account_id":183966,"reputation":14640,"user_id":419705,"accept_rate":67,"display_name":"Roddy of the Frozen Peas"},"score":2,"creation_date":1668694496,"post_id":74476777,"comment_id":131472265,"body_markdown":"round up on one side, and down on the other. Eg if you have 5.1 and 4.9, they both round to 5; or if you have 5.4 and 5.6, one goes to 5 and the other goes to 6. At the end of the day the sum will remain the same, but you have a round number for each &#39;chunk&#39;.","body":"round up on one side, and down on the other. Eg if you have 5.1 and 4.9, they both round to 5; or if you have 5.4 and 5.6, one goes to 5 and the other goes to 6. At the end of the day the sum will remain the same, but you have a round number for each &#39;chunk&#39;."}],"answers":[{"tags":[],"owner":{"account_id":26233822,"reputation":3,"user_id":19909308,"display_name":"John Mayot"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668699089,"creation_date":1668699089,"answer_id":74478098,"question_id":74476777,"body_markdown":"```\r\n    public static BufferedImage encode(String str){\r\n        byte[] bytes = str.getBytes();\r\n        int w = bytes.length;\r\n        int width = (int) Math.ceil(Math.sqrt(w));\r\n        BufferedImage img = new BufferedImage(width, width, BufferedImage.TYPE_INT_ARGB);\r\n        for (int index = 0; index &lt; bytes.length; index++) {\r\n            img.setRGB(index%width, (int)Math.floor(index/(float)width),encode(bytes[index]).getRGB() );\r\n        }\r\n        return img;\r\n    }\r\n```\r\ncode update. I just calculate the square root, and if the number is not an integer, then I round up to a larger one and as a result I get the height of the image, because the image has a 1:1 format, we immediately got the width. Then I just fill in the formula:\r\n\r\n```\r\nx = byteIndex % imageWidth\r\ny = floor(byteIndex / imageHeight)\r\n```","title":"flat picture (1;16) divide into equal parts (4;4)","body":"<pre><code>    public static BufferedImage encode(String str){\n        byte[] bytes = str.getBytes();\n        int w = bytes.length;\n        int width = (int) Math.ceil(Math.sqrt(w));\n        BufferedImage img = new BufferedImage(width, width, BufferedImage.TYPE_INT_ARGB);\n        for (int index = 0; index &lt; bytes.length; index++) {\n            img.setRGB(index%width, (int)Math.floor(index/(float)width),encode(bytes[index]).getRGB() );\n        }\n        return img;\n    }\n</code></pre>\n<p>code update. I just calculate the square root, and if the number is not an integer, then I round up to a larger one and as a result I get the height of the image, because the image has a 1:1 format, we immediately got the width. Then I just fill in the formula:</p>\n<pre><code>x = byteIndex % imageWidth\ny = floor(byteIndex / imageHeight)\n</code></pre>\n"}],"owner":{"account_id":26233822,"reputation":3,"user_id":19909308,"display_name":"John Mayot"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1668699089,"creation_date":1668693705,"question_id":74476777,"body_markdown":"I have a Bufferedimage that is 1px high and eg wide. I need to create another Bufferedimage that will be in 1:1 resolution. I know what can be done in this case by calculating the square root of the width, but what if the result is not an integer? I have a method for creating a matrix (a list of each pixel in turn) from the width and height, so there will be no problems. At the end, if there are empty pixels, I can make them transparent, so not necessarily a completely filled square. I just need to get the dimensions of the square, having the width of the original photo, I will fill in the pixels myself.\r\n\r\nmy code:\r\n```\r\n    public static BufferedImage encode(String str){\r\n        byte[] bytes = str.getBytes();\r\n        BufferedImage img = new BufferedImage(bytes.length, 1, BufferedImage.TYPE_INT_ARGB);\r\n        for (int i = 0; i &lt; bytes.length; i++) {\r\n            img.setRGB(i, 0,encode(bytes[i]).getRGB() );\r\n        }\r\n        return img;\r\n    }\r\n    public static Color encode(byte byt){\r\n        return new Color(byt+128,byt+128,byt+128);\r\n    }\r\n```","title":"flat picture (1;16) divide into equal parts (4;4)","body":"<p>I have a Bufferedimage that is 1px high and eg wide. I need to create another Bufferedimage that will be in 1:1 resolution. I know what can be done in this case by calculating the square root of the width, but what if the result is not an integer? I have a method for creating a matrix (a list of each pixel in turn) from the width and height, so there will be no problems. At the end, if there are empty pixels, I can make them transparent, so not necessarily a completely filled square. I just need to get the dimensions of the square, having the width of the original photo, I will fill in the pixels myself.</p>\n<p>my code:</p>\n<pre><code>    public static BufferedImage encode(String str){\n        byte[] bytes = str.getBytes();\n        BufferedImage img = new BufferedImage(bytes.length, 1, BufferedImage.TYPE_INT_ARGB);\n        for (int i = 0; i &lt; bytes.length; i++) {\n            img.setRGB(i, 0,encode(bytes[i]).getRGB() );\n        }\n        return img;\n    }\n    public static Color encode(byte byt){\n        return new Color(byt+128,byt+128,byt+128);\n    }\n</code></pre>\n"},{"tags":["java","java-threads"],"answers":[{"comments":[{"owner":{"account_id":26889272,"reputation":23,"user_id":20468307,"display_name":"Inon Levy"},"score":0,"creation_date":1668699327,"post_id":74478090,"comment_id":131474383,"body_markdown":"when i wrote the question in the &quot;itried&quot; section i wrote that i cannot use the synchronized methods","body":"when i wrote the question in the &quot;itried&quot; section i wrote that i cannot use the synchronized methods"},{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1668700071,"post_id":74478090,"comment_id":131474694,"body_markdown":"@InonLevy My answer isn&#39;t using synchronized methods - I am synchronizing on a common lock. But if you&#39;re not allowed to use locks because of arbitrary school assignment requirements, then maybe the *right* solution isn&#39;t the correct one for you. Do you want me to delete this?","body":"@InonLevy My answer isn&#39;t using synchronized methods - I am synchronizing on a common lock. But if you&#39;re not allowed to use locks because of arbitrary school assignment requirements, then maybe the <i>right</i> solution isn&#39;t the correct one for you. Do you want me to delete this?"},{"owner":{"account_id":26889272,"reputation":23,"user_id":20468307,"display_name":"Inon Levy"},"score":0,"creation_date":1668701435,"post_id":74478090,"comment_id":131475257,"body_markdown":"OMG, thanks so much, u solved my problem! (i am allowed to use locks)","body":"OMG, thanks so much, u solved my problem! (i am allowed to use locks)"},{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1668701909,"post_id":74478090,"comment_id":131475445,"body_markdown":"@InonLevy re: ... use locks! - Great! You should click the checkmark next to my answer to indicate that this answer solved your problem. You can also up click my answer if you want","body":"@InonLevy re: ... use locks! - Great! You should click the checkmark next to my answer to indicate that this answer solved your problem. You can also up click my answer if you want"},{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1668701918,"post_id":74478090,"comment_id":131475450,"body_markdown":"@InonLevy re: ... use locks! - Great! You should click the checkmark next to my answer to indicate that this answer solved your problem. You can also up click my answer if you want","body":"@InonLevy re: ... use locks! - Great! You should click the checkmark next to my answer to indicate that this answer solved your problem. You can also up click my answer if you want"}],"tags":[],"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"comment_count":5,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1668699067,"creation_date":1668699067,"answer_id":74478090,"question_id":74477966,"body_markdown":"You don&#39;t need Thread priority (which may or may not actually do anything). You should use a lock\r\n\r\n    public static final myLock = new Object();\r\n    \r\n    public void print1() {\r\n      synchronized(myLock) {\r\n        ...\r\n      }\r\n    }\r\n    \r\n    public void print2() {\r\n      synchronized(myLock) {\r\n        ...\r\n      }\r\n    }\r\n    \r\n    public void print3() {\r\n      synchronized(myLock) {\r\n        ...\r\n      }\r\n    }","title":"is there any way to control the threads based on the objective they&#39;re &quot;attached&quot; to?","body":"<p>You don't need Thread priority (which may or may not actually do anything). You should use a lock</p>\n<pre><code>public static final myLock = new Object();\n\npublic void print1() {\n  synchronized(myLock) {\n    ...\n  }\n}\n\npublic void print2() {\n  synchronized(myLock) {\n    ...\n  }\n}\n\npublic void print3() {\n  synchronized(myLock) {\n    ...\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":26889272,"reputation":23,"user_id":20468307,"display_name":"Inon Levy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":74478090,"answer_count":1,"score":2,"last_activity_date":1668699067,"creation_date":1668698595,"question_id":74477966,"body_markdown":"i need to set a thread priority, based on an object its &quot;attached&quot; to, i thought i might be able to get its ID somehow and then just give it a priority.\r\n\r\ni tried to make my object static that way they&#39;ll be reachable, but i just cant control the thread based on its object.\r\n\r\nin short, im trying to print something, and in the middle of the printing proccess the other threads are interrupting and printing stuff of thier own, without the current thread finished his print. thats why im trying to give it a priority. i&#39;ve tried some pooling, but i discovered im not allowed to use that...","title":"is there any way to control the threads based on the objective they&#39;re &quot;attached&quot; to?","body":"<p>i need to set a thread priority, based on an object its &quot;attached&quot; to, i thought i might be able to get its ID somehow and then just give it a priority.</p>\n<p>i tried to make my object static that way they'll be reachable, but i just cant control the thread based on its object.</p>\n<p>in short, im trying to print something, and in the middle of the printing proccess the other threads are interrupting and printing stuff of thier own, without the current thread finished his print. thats why im trying to give it a priority. i've tried some pooling, but i discovered im not allowed to use that...</p>\n"},{"tags":["java","oop","inheritance","abstract-class"],"answers":[{"tags":[],"owner":{"account_id":4258751,"reputation":11,"user_id":3483645,"display_name":"user3483645"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1550255337,"creation_date":1550255337,"answer_id":54715144,"question_id":54714988,"body_markdown":"three() method is overridden both in B and C class\r\n\r\nSince c is an instance of C class, any reference to three() method with c object will invoke the three() implementation in C class","title":"Accessing abstract class method","body":"<p>three() method is overridden both in B and C class</p>\n\n<p>Since c is an instance of C class, any reference to three() method with c object will invoke the three() implementation in C class</p>\n"},{"tags":[],"owner":{"account_id":2818342,"reputation":299906,"user_id":2422776,"display_name":"Mureinik"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1550255371,"creation_date":1550255371,"answer_id":54715153,"question_id":54714988,"body_markdown":"The `three()` method is overridden in `C`. Since `c` holds an instance of `C`, that&#39;s the output you see.","title":"Accessing abstract class method","body":"<p>The <code>three()</code> method is overridden in <code>C</code>. Since <code>c</code> holds an instance of <code>C</code>, that's the output you see.</p>\n"},{"tags":[],"owner":{"account_id":6809946,"reputation":1,"user_id":5240522,"display_name":"Gyan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668699041,"creation_date":1550260472,"answer_id":54716204,"question_id":54714988,"body_markdown":"Overriding in java always works based on the target object in reference c. So firstly it will look up in C class for any available overridden version of three()  method, otherwise, subsequent parent class version will get executed.","title":"Accessing abstract class method","body":"<p>Overriding in java always works based on the target object in reference c. So firstly it will look up in C class for any available overridden version of three()  method, otherwise, subsequent parent class version will get executed.</p>\n"}],"owner":{"display_name":"user9432743"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1668699041,"creation_date":1550254711,"question_id":54714988,"body_markdown":"I have three different classes:\r\n\r\n1-)\r\n\r\n    abstract class A {\r\n    abstract void one();\r\n    void two(){\r\n        System.out.println(&quot;two&quot;);\r\n    one();\r\n    }\r\n    abstract void three();\r\n     }\r\n2-)\r\n\r\n    abstract class B extends A {\r\n    void one() {\r\n        System.out.println(&quot;one&quot;);\r\n        three();//I think this method has to run\r\n    }\r\n\r\n    void three() {\r\n        System.out.println(&quot;3&quot;);//That\r\n    }\r\n    }\r\n\r\n3-)\r\n\r\n    public class C extends B {\r\n    void three(){\r\n        System.out.println(&quot;three&quot;);\r\n    }\r\n\r\n    }\r\n\r\n\r\nin the Main method\r\n\r\n    public static void main(String [] args){\r\n    C c=new C();\r\n    c.one();\r\n    c.two();\r\n    c.three();\r\n    }\r\n\r\nOutput :\r\n\r\n    one\r\n    three\r\n    two\r\n    one\r\n    three\r\n    three\r\n\r\nBut I think in second code one() method have to run its three method and it has to show &quot;3&quot; instead of &quot;three&quot; but this code runs three in C class.","title":"Accessing abstract class method","body":"<p>I have three different classes:</p>\n\n<p>1-)</p>\n\n<pre><code>abstract class A {\nabstract void one();\nvoid two(){\n    System.out.println(\"two\");\none();\n}\nabstract void three();\n }\n</code></pre>\n\n<p>2-)</p>\n\n<pre><code>abstract class B extends A {\nvoid one() {\n    System.out.println(\"one\");\n    three();//I think this method has to run\n}\n\nvoid three() {\n    System.out.println(\"3\");//That\n}\n}\n</code></pre>\n\n<p>3-)</p>\n\n<pre><code>public class C extends B {\nvoid three(){\n    System.out.println(\"three\");\n}\n\n}\n</code></pre>\n\n<p>in the Main method</p>\n\n<pre><code>public static void main(String [] args){\nC c=new C();\nc.one();\nc.two();\nc.three();\n}\n</code></pre>\n\n<p>Output :</p>\n\n<pre><code>one\nthree\ntwo\none\nthree\nthree\n</code></pre>\n\n<p>But I think in second code one() method have to run its three method and it has to show \"3\" instead of \"three\" but this code runs three in C class.</p>\n"},{"tags":["java","unit-testing","enums","code-coverage"],"comments":[{"owner":{"account_id":7291967,"reputation":57515,"user_id":5558072,"accept_rate":100,"display_name":"Youcef LAIDANI"},"score":0,"creation_date":1668699388,"post_id":74478034,"comment_id":131474407,"body_markdown":"What is then the problem?","body":"What is then the problem?"},{"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"score":2,"creation_date":1668699462,"post_id":74478034,"comment_id":131474438,"body_markdown":"@YoucefLaidani to apply the suggested solution he should redefine not only the enum but also the owner class, that he doesn&#39;t want to redefine because he&#39;s using it as is.","body":"@YoucefLaidani to apply the suggested solution he should redefine not only the enum but also the owner class, that he doesn&#39;t want to redefine because he&#39;s using it as is."},{"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"score":0,"creation_date":1668700393,"post_id":74478034,"comment_id":131474817,"body_markdown":"If I may suggest: I guess the problem you have is that since your method switches directly on the enum, you have no way to reach the default branch but at the same time, you want to test the default branch to test what you do if the enum changes one day out of your control. If it is the case, and if your code is really like it appears, have you thought of simply mocking someMethod() to return null (what you&#39;d return on the default branch of the switch)?","body":"If I may suggest: I guess the problem you have is that since your method switches directly on the enum, you have no way to reach the default branch but at the same time, you want to test the default branch to test what you do if the enum changes one day out of your control. If it is the case, and if your code is really like it appears, have you thought of simply mocking someMethod() to return null (what you&#39;d return on the default branch of the switch)?"},{"owner":{"account_id":7513142,"reputation":334,"user_id":5707475,"display_name":"Christophe Broeckx"},"score":0,"creation_date":1668700642,"post_id":74478034,"comment_id":131474930,"body_markdown":"You are correctly assuming, @MatteoNNZ. But I want to test someMethod()... If I mock it, how am I testing it?","body":"You are correctly assuming, @MatteoNNZ. But I want to test someMethod()... If I mock it, how am I testing it?"},{"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"score":0,"creation_date":1668700725,"post_id":74478034,"comment_id":131474969,"body_markdown":"@ChristopheBroeckx is your &quot;someMethod&quot; containing other code that you&#39;re not showing? Because what you&#39;re showing is a simple switch on the enum value, so you can test it for normal values of the enum and mock it for handling the default branch. If it&#39;s not the case, you can still extract the return switch... into a separate method and mock that part only to actually test the rest.","body":"@ChristopheBroeckx is your &quot;someMethod&quot; containing other code that you&#39;re not showing? Because what you&#39;re showing is a simple switch on the enum value, so you can test it for normal values of the enum and mock it for handling the default branch. If it&#39;s not the case, you can still extract the return switch... into a separate method and mock that part only to actually test the rest."},{"owner":{"account_id":7513142,"reputation":334,"user_id":5707475,"display_name":"Christophe Broeckx"},"score":0,"creation_date":1668701790,"post_id":74478034,"comment_id":131475392,"body_markdown":"@MatteoNNZ yes there is more to it. But my case here is not to test what happens elsewhere when the default case is reached. I should have put an exception instead of a null to better illustrate it. My point is only to reach the required conditional coverage that is needed for the project :/","body":"@MatteoNNZ yes there is more to it. But my case here is not to test what happens elsewhere when the default case is reached. I should have put an exception instead of a null to better illustrate it. My point is only to reach the required conditional coverage that is needed for the project :/"},{"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"score":1,"creation_date":1668754231,"post_id":74478034,"comment_id":131487588,"body_markdown":"Can the enclosing class be dynamically proxied? If so, you can imagine to redefine the whole class with the enum, and then to redirect each call to the original class through the dynamic proxy and only keep the overridden enum definition. But generally speaking, code coverage is something we can always negotiate, I see why you want to test that specific case but if to test one simple exception throw you have to do all this work, you should wonder whether it&#39;s worth to leave it untested...","body":"Can the enclosing class be dynamically proxied? If so, you can imagine to redefine the whole class with the enum, and then to redirect each call to the original class through the dynamic proxy and only keep the overridden enum definition. But generally speaking, code coverage is something we can always negotiate, I see why you want to test that specific case but if to test one simple exception throw you have to do all this work, you should wonder whether it&#39;s worth to leave it untested..."},{"owner":{"account_id":7513142,"reputation":334,"user_id":5707475,"display_name":"Christophe Broeckx"},"score":0,"creation_date":1669822492,"post_id":74478034,"comment_id":131731441,"body_markdown":"@MatteoNNZ Yes that could work indeed. That&#39;s not very pretty but it&#39;s that or change the conditional coverage requirement. In my case I was finaly able to challenge it, so I&#39;m fine, but others might not have that possibility. Thank you for your help :)","body":"@MatteoNNZ Yes that could work indeed. That&#39;s not very pretty but it&#39;s that or change the conditional coverage requirement. In my case I was finaly able to challenge it, so I&#39;m fine, but others might not have that possibility. Thank you for your help :)"}],"owner":{"account_id":7513142,"reputation":334,"user_id":5707475,"display_name":"Christophe Broeckx"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1668698874,"creation_date":1668698874,"question_id":74478034,"body_markdown":"I have a similar problem than [this question](https://stackoverflow.com/questions/5323505/mocking-java-enum-to-add-a-value-to-test-fail-case).\r\n\r\nI would like to implement the [selected answer](https://stackoverflow.com/a/59802629/5707475) (the other ones don&#39;t work or apply to my case).\r\n\r\nThe problem is that the enum I want to redefine is actually inside a class. \r\n\r\n```\r\npackage a.package.i.dont.own;\r\n\r\npublic class AClass {\r\n   public enum AnEnum {\r\n      A,\r\n      B\r\n   }\r\n\r\n  // Here a bunch of stuff I&#39;m using and don&#39;t want to redefine\r\n}\r\n```\r\n\r\nThe corresponding code I want to test:\r\n```\r\npublic String someMethod() {\r\n   return switch(aMethodThatReturnsAnEnumValueFromContext()) {\r\n      case A -&gt; &quot;foo&quot;;\r\n      case B -&gt; &quot;bar&quot;;\r\n      default -&gt; null;\r\n   }\r\n}\r\n```\r\n","title":"Can I redefine an inner enum for testing purposes?","body":"<p>I have a similar problem than <a href=\"https://stackoverflow.com/questions/5323505/mocking-java-enum-to-add-a-value-to-test-fail-case\">this question</a>.</p>\n<p>I would like to implement the <a href=\"https://stackoverflow.com/a/59802629/5707475\">selected answer</a> (the other ones don't work or apply to my case).</p>\n<p>The problem is that the enum I want to redefine is actually inside a class.</p>\n<pre><code>package a.package.i.dont.own;\n\npublic class AClass {\n   public enum AnEnum {\n      A,\n      B\n   }\n\n  // Here a bunch of stuff I'm using and don't want to redefine\n}\n</code></pre>\n<p>The corresponding code I want to test:</p>\n<pre><code>public String someMethod() {\n   return switch(aMethodThatReturnsAnEnumValueFromContext()) {\n      case A -&gt; &quot;foo&quot;;\n      case B -&gt; &quot;bar&quot;;\n      default -&gt; null;\n   }\n}\n</code></pre>\n"},{"tags":["java","spring","postgresql","geolocation","proximity"],"comments":[{"owner":{"account_id":4610643,"reputation":1454,"user_id":3738870,"display_name":"user3738870"},"score":1,"creation_date":1668697186,"post_id":74477571,"comment_id":131473421,"body_markdown":"Wouldn&#39;t adding a simple order by work? `select * from point l where ((abs(l.lat*111139 - myPointLat*111139)^2) + (abs(l.lng*111139 - (myPointLng*111139))^2)) &lt;= metres^2 order by ((abs(l.lat111139 - myPointLat111139)^2) + (abs(l.lng111139 - (myPointLng111139))^2))`","body":"Wouldn&#39;t adding a simple order by work? <code>select * from point l where ((abs(l.lat*111139 - myPointLat*111139)^2) + (abs(l.lng*111139 - (myPointLng*111139))^2)) &lt;= metres^2 order by ((abs(l.lat111139 - myPointLat111139)^2) + (abs(l.lng111139 - (myPointLng111139))^2))</code>"},{"owner":{"account_id":10383212,"reputation":333,"user_id":7657219,"display_name":"Varox"},"score":0,"creation_date":1668697315,"post_id":74477571,"comment_id":131473470,"body_markdown":"@user3738870 I&#39;d like to avoid calculating again the same distance :S","body":"@user3738870 I&#39;d like to avoid calculating again the same distance :S"},{"owner":{"account_id":9487799,"reputation":16379,"user_id":7635569,"display_name":"JGH"},"score":1,"creation_date":1668697696,"post_id":74477571,"comment_id":131473632,"body_markdown":"Unless you live right on the equator, this equation will return trash, since the ground length (in meters) of a degree of longitude varies by latitude (down to a few cm only near the poles...). Either use the real haversine formula, or, maybe simpler, use PostGIS which will handle the distance measurement for you.","body":"Unless you live right on the equator, this equation will return trash, since the ground length (in meters) of a degree of longitude varies by latitude (down to a few cm only near the poles...). Either use the real haversine formula, or, maybe simpler, use PostGIS which will handle the distance measurement for you."},{"owner":{"account_id":10383212,"reputation":333,"user_id":7657219,"display_name":"Varox"},"score":0,"creation_date":1668698949,"post_id":74477571,"comment_id":131474207,"body_markdown":"@JGH You are right, just found that formula for PostgreSQL! Im going to try it, thanks. Do you know if it is better for performance to just use the formula instead of postgis?","body":"@JGH You are right, just found that formula for PostgreSQL! Im going to try it, thanks. Do you know if it is better for performance to just use the formula instead of postgis?"},{"owner":{"account_id":9487799,"reputation":16379,"user_id":7635569,"display_name":"JGH"},"score":1,"creation_date":1668699262,"post_id":74477571,"comment_id":131474348,"body_markdown":"PostGIS has spatial indexes which are very efficient for distance ordering and selectivity (you don&#39;t need to compute every distances to keep only the near ones. PostGIS would first apply a &quot;square&quot; of 2m and then would compute the exact distance just for points inside this square). If you have more tasks to do using your coordinates, PostGIS is a clear winner. If it is the only one, well, it&#39;s up to you...","body":"PostGIS has spatial indexes which are very efficient for distance ordering and selectivity (you don&#39;t need to compute every distances to keep only the near ones. PostGIS would first apply a &quot;square&quot; of 2m and then would compute the exact distance just for points inside this square). If you have more tasks to do using your coordinates, PostGIS is a clear winner. If it is the only one, well, it&#39;s up to you..."}],"answers":[{"comments":[{"owner":{"account_id":10383212,"reputation":333,"user_id":7657219,"display_name":"Varox"},"score":0,"creation_date":1668698115,"post_id":74477688,"comment_id":131473838,"body_markdown":"Hi, thank you for your quick anwser! Do you know if the computed column will work on PostgreSQL 15? DBeaver tells me that the column proximity does not exist :(","body":"Hi, thank you for your quick anwser! Do you know if the computed column will work on PostgreSQL 15? DBeaver tells me that the column proximity does not exist :("},{"owner":{"account_id":4610643,"reputation":1454,"user_id":3738870,"display_name":"user3738870"},"score":0,"creation_date":1668698441,"post_id":74477688,"comment_id":131473992,"body_markdown":"Yes, sorry I didn&#39;t check the `where` clause. I&#39;ve updated my answer.","body":"Yes, sorry I didn&#39;t check the <code>where</code> clause. I&#39;ve updated my answer."}],"tags":[],"owner":{"account_id":4610643,"reputation":1454,"user_id":3738870,"display_name":"user3738870"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1668698411,"creation_date":1668697536,"answer_id":74477688,"question_id":74477571,"body_markdown":"If you would like to avoid repeating the expression, you can add a computed column in a subquery and then do the filtering on the subquery.\r\n```postgresql\r\nselect Column1, Column2, Column3 from \r\n(\r\n  select *,\r\n       (\r\n          (abs(l.lat*111139 - myPointLat*111139)^2) + \r\n          (abs(l.lng*111139 - (myPointLng*111139))^2)\r\n       ) as proximity\r\n  from point l\r\n)\r\nwhere proximity &lt;= metres^2\r\norder by proximity\r\n```\r\n\r\nColumn1, Column2, Column3 are the columns from the original `point` table that you&#39;re interested in.\r\n\r\nPerformance-wise, it&#39;s better to just repeat the expression though, since then Postgres can surely do the filtering first, which means it has to work with a potentially much smaller dataset, which will be faster:\r\n```postgresql\r\nselect *\r\nfrom point l\r\nwhere (\r\n          (abs(l.lat*111139 - myPointLat*111139)^2) + \r\n          (abs(l.lng*111139 - (myPointLng*111139))^2)\r\n      ) &lt;= metres^2\r\norder by (\r\n          (abs(l.lat*111139 - myPointLat*111139)^2) + \r\n          (abs(l.lng*111139 - (myPointLng*111139))^2)\r\n         )\r\n```\r\n\r\n  [1]: https://stackoverflow.com/a/33305174/3738870","title":"Sort by proximity after getting distance using pythagoras - postgresql","body":"<p>If you would like to avoid repeating the expression, you can add a computed column in a subquery and then do the filtering on the subquery.</p>\n<pre class=\"lang-sql prettyprint-override\"><code>select Column1, Column2, Column3 from \n(\n  select *,\n       (\n          (abs(l.lat*111139 - myPointLat*111139)^2) + \n          (abs(l.lng*111139 - (myPointLng*111139))^2)\n       ) as proximity\n  from point l\n)\nwhere proximity &lt;= metres^2\norder by proximity\n</code></pre>\n<p>Column1, Column2, Column3 are the columns from the original <code>point</code> table that you're interested in.</p>\n<p>Performance-wise, it's better to just repeat the expression though, since then Postgres can surely do the filtering first, which means it has to work with a potentially much smaller dataset, which will be faster:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>select *\nfrom point l\nwhere (\n          (abs(l.lat*111139 - myPointLat*111139)^2) + \n          (abs(l.lng*111139 - (myPointLng*111139))^2)\n      ) &lt;= metres^2\norder by (\n          (abs(l.lat*111139 - myPointLat*111139)^2) + \n          (abs(l.lng*111139 - (myPointLng*111139))^2)\n         )\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21057860,"reputation":169,"user_id":15476816,"display_name":"Manuel Gonz&#225;lez Costa"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1668698661,"creation_date":1668698661,"answer_id":74477986,"question_id":74477571,"body_markdown":"Checkout this other question https://stackoverflow.com/questions/14074546/how-to-re-use-result-for-select-where-and-order-by-clauses because I think it would help you a lot!","title":"Sort by proximity after getting distance using pythagoras - postgresql","body":"<p>Checkout this other question <a href=\"https://stackoverflow.com/questions/14074546/how-to-re-use-result-for-select-where-and-order-by-clauses\">How to re-use result for SELECT, WHERE and ORDER BY clauses?</a> because I think it would help you a lot!</p>\n"}],"owner":{"account_id":10383212,"reputation":333,"user_id":7657219,"display_name":"Varox"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":164,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74477688,"answer_count":2,"score":1,"last_activity_date":1668698661,"creation_date":1668697094,"question_id":74477571,"body_markdown":"I&#39;m using postgresql to calculate if different points are inside a specific range (calculated using pythagoras).\r\n\r\nThe thing is that I would like to get the results ordered by the proximity instead of randomly.\r\n\r\nThis is my query:\r\n\r\n\r\n\r\n`select * from point l where ((abs(l.lat*111139 - myPointLat*111139)^2) + (abs(l.lng*111139 - (myPointLng*111139))^2)) &lt;= metres^2;`\r\n\r\nAnd I would like to sort it using this part of the query:\r\n\r\n&gt; ((abs(l.lat*111139 - myPointLat*111139)^2) + (abs(l.lng*111139 - (myPointLng*111139))^2))\r\n\r\nHow could I achieve this?\r\n\r\nThank you very much!","title":"Sort by proximity after getting distance using pythagoras - postgresql","body":"<p>I'm using postgresql to calculate if different points are inside a specific range (calculated using pythagoras).</p>\n<p>The thing is that I would like to get the results ordered by the proximity instead of randomly.</p>\n<p>This is my query:</p>\n<p><code>select * from point l where ((abs(l.lat*111139 - myPointLat*111139)^2) + (abs(l.lng*111139 - (myPointLng*111139))^2)) &lt;= metres^2;</code></p>\n<p>And I would like to sort it using this part of the query:</p>\n<blockquote>\n<p>((abs(l.lat<em>111139 - myPointLat</em>111139)^2) + (abs(l.lng<em>111139 - (myPointLng</em>111139))^2))</p>\n</blockquote>\n<p>How could I achieve this?</p>\n<p>Thank you very much!</p>\n"},{"tags":["java","spring-mvc","thymeleaf","spring-restcontroller"],"comments":[{"owner":{"account_id":1887204,"reputation":13,"user_id":1706183,"display_name":"Edi"},"score":0,"creation_date":1470407658,"post_id":38748909,"comment_id":64953750,"body_markdown":"guys, please help :|","body":"guys, please help :|"},{"owner":{"account_id":2003177,"reputation":16895,"user_id":1793718,"accept_rate":69,"display_name":"Lucky"},"score":0,"creation_date":1470653435,"post_id":38748909,"comment_id":65020243,"body_markdown":"What&#39;s wrong with your current code? What output do you get? post a screenshot or html output you get?","body":"What&#39;s wrong with your current code? What output do you get? post a screenshot or html output you get?"}],"owner":{"account_id":1887204,"reputation":13,"user_id":1706183,"display_name":"Edi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1771,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1668698375,"creation_date":1470241155,"question_id":38748909,"body_markdown":"I am new in thymeleaf. I have question about dynamic table. Here is my case : \r\n\r\n    [\r\n       {\r\n          &quot;country&quot;:&quot;country 1&quot;,\r\n          &quot;districs&quot;:[\r\n             {\r\n                &quot;district&quot;:&quot;district 1&quot;,\r\n                &quot;cinemas&quot;:[\r\n                   {\r\n                      &quot;cinema&quot;: &quot;cinema 1&quot;\r\n                      &quot;movie&quot;:&quot;Sherlock&quot;,\r\n                      &quot;visitor&quot;:30\r\n                   },{\r\n                      &quot;cinema&quot;: &quot;cinema 2&quot;\r\n                      &quot;movie&quot;:&quot;Terminator&quot;,\r\n                      &quot;visitor&quot;:40\r\n                   },{\r\n                      &quot;cinema&quot;: &quot;cinema 2&quot;\r\n                      &quot;movie&quot;:&quot;Tarzan&quot;,\r\n                      &quot;visitor&quot;:20\r\n                   }]\r\n    \t\t }, {\r\n                &quot;district&quot;:&quot;district 2&quot;,\r\n                &quot;cinemas&quot;:[\r\n                   {\r\n                      &quot;cinema&quot;: &quot;cinema 1&quot;\r\n                      &quot;movie&quot;:&quot;Sherlock&quot;,\r\n                      &quot;visitor&quot;:12\r\n                   },{\r\n                      &quot;cinema&quot;: &quot;cinema 2&quot;\r\n                      &quot;movie&quot;:&quot;Terminator&quot;,\r\n                      &quot;visitor&quot;:41\r\n                   },{\r\n                      &quot;cinema&quot;: &quot;cinema 2&quot;\r\n                      &quot;movie&quot;:&quot;Tarzan&quot;,\r\n                      &quot;visitor&quot;:24\r\n                   }]\r\n    \t\t\t}, {\r\n                &quot;district&quot;:&quot;district 3&quot;,\r\n                &quot;cinemas&quot;:[\r\n                   {\r\n                      &quot;cinema&quot;: &quot;cinema 1&quot;\r\n                      &quot;movie&quot;:&quot;Sherlock&quot;,\r\n                      &quot;visitor&quot;:12\r\n                   },{\r\n                      &quot;cinema&quot;: &quot;cinema 2&quot;\r\n                      &quot;movie&quot;:&quot;Terminator&quot;,\r\n                      &quot;visitor&quot;:41\r\n                   }]\r\n    \t\t\t}]\r\n    \t},    {\r\n          &quot;country&quot;:&quot;country 2&quot;,\r\n          &quot;districs&quot;:[\r\n             {\r\n                &quot;district&quot;:&quot;district 1&quot;,\r\n                &quot;cinemas&quot;:[\r\n                   {\r\n                      &quot;cinema&quot;: &quot;cinema 2&quot;\r\n                      &quot;movie&quot;:&quot;Terminator&quot;,\r\n                      &quot;visitor&quot;:40\r\n                   },{\r\n                      &quot;cinema&quot;: &quot;cinema 2&quot;\r\n                      &quot;movie&quot;:&quot;Tarzan&quot;,\r\n                      &quot;visitor&quot;:20\r\n                   }]\r\n    \t\t }, {\r\n                &quot;district&quot;:&quot;district 2&quot;,\r\n                &quot;cinemas&quot;:[\r\n                   {\r\n                      &quot;cinema&quot;: &quot;cinema 1&quot;\r\n                      &quot;movie&quot;:&quot;Sherlock&quot;,\r\n                      &quot;visitor&quot;:12\r\n                   },{\r\n                      &quot;cinema&quot;: &quot;cinema 2&quot;\r\n                      &quot;movie&quot;:&quot;Tarzan&quot;,\r\n                      &quot;visitor&quot;:24\r\n                   }]\r\n    \t\t\t}, {\r\n                &quot;district&quot;:&quot;district 3&quot;,\r\n                &quot;cinemas&quot;:[\r\n                   {\r\n                      &quot;cinema&quot;: &quot;cinema 1&quot;\r\n                      &quot;movie&quot;:&quot;Sherlock&quot;,\r\n                      &quot;visitor&quot;:12\r\n                   },{\r\n                      &quot;cinema&quot;: &quot;cinema 2&quot;\r\n                      &quot;movie&quot;:&quot;Terminator&quot;,\r\n                      &quot;visitor&quot;:41\r\n                   }]\r\n    \t\t\t}]\r\n    \t}]\r\n\r\n And then I want to display like this :\r\n\r\n    ---------------------------------------------------------------------------------------------------------\r\n    Movies     |country 1                                   | country 2                                     |\r\n               ----------------------------------------------------------------------------------------------\r\n               |district 1   | district 2  | district 3   | district 1    | district 2    | district 3      |\r\n    ---------------------------------------------------------------------------------------------------------\r\n    Sherlock   | 30          | 12          | 12           | 0             | 12            | 12              |\r\n    Terminat   | 40          | 41          | 41           | 40            | 0             | 41              |\r\n    Tarzan     | 20          | 24          | 0            | 20            | 24            | 0               |\r\n    ---------------------------------------------------------------------------------------------------------\r\n\r\nHow I could achieve this in thymeleaf? \r\nMy code as below, but still cannot achieve this output. \r\n\r\n    &lt;table&gt;\r\n        \t&lt;thead&gt;\r\n              &lt;tr&gt;                    \r\n                  &lt;th:block th:each=&quot;data : ${countries}&quot;&gt;\r\n                       &lt;th th:colspan=&quot;${data.districts.size()}&quot; th:text=&quot;${data.country}&quot; &gt;&lt;/th&gt;\r\n                  &lt;/th:block&gt;\r\n              &lt;/tr&gt;\r\n              &lt;tr&gt;    \r\n                 &lt;th:block th:each=&quot;data : ${countries}&quot;&gt;\r\n                      &lt;th:block th:each=&quot;district :${data.districts}&quot;&gt;\r\n                          &lt;th th:text=&quot;${district.district}&quot;&gt;&lt;/th&gt;\r\n                       &lt;/th:block&gt;\r\n                  &lt;/th:block&gt;\r\n              &lt;/tr&gt;\r\n    \t&lt;thead&gt;\r\n            &lt;tbody&gt;\r\n               &lt;tr&gt;\r\n                 &lt;th:block th:each=&quot;data : ${countries}&quot;&gt;\r\n                     &lt;th:block th:each=&quot;district :${data.districts}&quot;&gt;\r\n                          &lt;th:block th:each=&quot;cinema :${district.cinemas}&quot;&gt;\r\n                             &lt;td th:text=&quot;${cinema.visitor}&quot; /&gt;\r\n                          &lt;/th:block&gt;\r\n                     &lt;/th:block&gt;\r\n                  &lt;/th:block&gt;\r\n              &lt;/tr&gt;\r\n            &lt;/tbody&gt;\r\n    &lt;/table&gt;\r\n\r\nPlease if anyone has any idea to solve this problem. \r\nBTW, for json I generated using spring rest. \r\nThanks a lot. ","title":"Thymeleaf dynamic header and content table from database","body":"<p>I am new in thymeleaf. I have question about dynamic table. Here is my case : </p>\n\n<pre><code>[\n   {\n      \"country\":\"country 1\",\n      \"districs\":[\n         {\n            \"district\":\"district 1\",\n            \"cinemas\":[\n               {\n                  \"cinema\": \"cinema 1\"\n                  \"movie\":\"Sherlock\",\n                  \"visitor\":30\n               },{\n                  \"cinema\": \"cinema 2\"\n                  \"movie\":\"Terminator\",\n                  \"visitor\":40\n               },{\n                  \"cinema\": \"cinema 2\"\n                  \"movie\":\"Tarzan\",\n                  \"visitor\":20\n               }]\n         }, {\n            \"district\":\"district 2\",\n            \"cinemas\":[\n               {\n                  \"cinema\": \"cinema 1\"\n                  \"movie\":\"Sherlock\",\n                  \"visitor\":12\n               },{\n                  \"cinema\": \"cinema 2\"\n                  \"movie\":\"Terminator\",\n                  \"visitor\":41\n               },{\n                  \"cinema\": \"cinema 2\"\n                  \"movie\":\"Tarzan\",\n                  \"visitor\":24\n               }]\n            }, {\n            \"district\":\"district 3\",\n            \"cinemas\":[\n               {\n                  \"cinema\": \"cinema 1\"\n                  \"movie\":\"Sherlock\",\n                  \"visitor\":12\n               },{\n                  \"cinema\": \"cinema 2\"\n                  \"movie\":\"Terminator\",\n                  \"visitor\":41\n               }]\n            }]\n    },    {\n      \"country\":\"country 2\",\n      \"districs\":[\n         {\n            \"district\":\"district 1\",\n            \"cinemas\":[\n               {\n                  \"cinema\": \"cinema 2\"\n                  \"movie\":\"Terminator\",\n                  \"visitor\":40\n               },{\n                  \"cinema\": \"cinema 2\"\n                  \"movie\":\"Tarzan\",\n                  \"visitor\":20\n               }]\n         }, {\n            \"district\":\"district 2\",\n            \"cinemas\":[\n               {\n                  \"cinema\": \"cinema 1\"\n                  \"movie\":\"Sherlock\",\n                  \"visitor\":12\n               },{\n                  \"cinema\": \"cinema 2\"\n                  \"movie\":\"Tarzan\",\n                  \"visitor\":24\n               }]\n            }, {\n            \"district\":\"district 3\",\n            \"cinemas\":[\n               {\n                  \"cinema\": \"cinema 1\"\n                  \"movie\":\"Sherlock\",\n                  \"visitor\":12\n               },{\n                  \"cinema\": \"cinema 2\"\n                  \"movie\":\"Terminator\",\n                  \"visitor\":41\n               }]\n            }]\n    }]\n</code></pre>\n\n<p>And then I want to display like this :</p>\n\n<pre><code>---------------------------------------------------------------------------------------------------------\nMovies     |country 1                                   | country 2                                     |\n           ----------------------------------------------------------------------------------------------\n           |district 1   | district 2  | district 3   | district 1    | district 2    | district 3      |\n---------------------------------------------------------------------------------------------------------\nSherlock   | 30          | 12          | 12           | 0             | 12            | 12              |\nTerminat   | 40          | 41          | 41           | 40            | 0             | 41              |\nTarzan     | 20          | 24          | 0            | 20            | 24            | 0               |\n---------------------------------------------------------------------------------------------------------\n</code></pre>\n\n<p>How I could achieve this in thymeleaf? \nMy code as below, but still cannot achieve this output. </p>\n\n<pre><code>&lt;table&gt;\n        &lt;thead&gt;\n          &lt;tr&gt;                    \n              &lt;th:block th:each=\"data : ${countries}\"&gt;\n                   &lt;th th:colspan=\"${data.districts.size()}\" th:text=\"${data.country}\" &gt;&lt;/th&gt;\n              &lt;/th:block&gt;\n          &lt;/tr&gt;\n          &lt;tr&gt;    \n             &lt;th:block th:each=\"data : ${countries}\"&gt;\n                  &lt;th:block th:each=\"district :${data.districts}\"&gt;\n                      &lt;th th:text=\"${district.district}\"&gt;&lt;/th&gt;\n                   &lt;/th:block&gt;\n              &lt;/th:block&gt;\n          &lt;/tr&gt;\n    &lt;thead&gt;\n        &lt;tbody&gt;\n           &lt;tr&gt;\n             &lt;th:block th:each=\"data : ${countries}\"&gt;\n                 &lt;th:block th:each=\"district :${data.districts}\"&gt;\n                      &lt;th:block th:each=\"cinema :${district.cinemas}\"&gt;\n                         &lt;td th:text=\"${cinema.visitor}\" /&gt;\n                      &lt;/th:block&gt;\n                 &lt;/th:block&gt;\n              &lt;/th:block&gt;\n          &lt;/tr&gt;\n        &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>Please if anyone has any idea to solve this problem. \nBTW, for json I generated using spring rest. \nThanks a lot. </p>\n"},{"tags":["java","android","progress-bar","calculator"],"comments":[{"owner":{"account_id":7699298,"reputation":64,"user_id":5832512,"display_name":"pan he"},"score":0,"creation_date":1668579247,"post_id":74451641,"comment_id":131436908,"body_markdown":"can u put the xml file here?","body":"can u put the xml file here?"},{"owner":{"account_id":26818043,"reputation":1,"user_id":20407764,"display_name":"Arlexx Junior"},"score":0,"creation_date":1668583582,"post_id":74451641,"comment_id":131437928,"body_markdown":"sure, give me a second","body":"sure, give me a second"},{"owner":{"account_id":26818043,"reputation":1,"user_id":20407764,"display_name":"Arlexx Junior"},"score":0,"creation_date":1668698292,"post_id":74451641,"comment_id":131473920,"body_markdown":"hey i solved myself, i have anoher problem now","body":"hey i solved myself, i have anoher problem now"}],"owner":{"account_id":26818043,"reputation":1,"user_id":20407764,"display_name":"Arlexx Junior"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1668698236,"creation_date":1668543333,"question_id":74451641,"body_markdown":"I need help with this, I made this calculator, and a progressbar , i need it to when its finish so i can click again and run again, i didnt found a way to do that, and do the same with anothr data or the same data as well\r\n\r\n```\r\n private TextView textResultado;\r\n    private TextView editpeso;\r\n    private TextView editaltura;\r\n    private Button botao;\r\n    private ProgressBar pb;\r\n    private TextView txt;\r\n    int i = 0;\r\n    Handler handler = new Handler();\r\n    String[] mensagens = {&quot;Preencha todos os campos!&quot;};\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        getSupportActionBar().hide();\r\n        iniciar();\r\n\r\n        botao.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                pb.setVisibility(View.VISIBLE);\r\n                String peso = editpeso.getText().toString();\r\n                String altura = editaltura.getText().toString();\r\n\r\n                if (peso.isEmpty() || altura.isEmpty()) {\r\n                    Snackbar snackbar = Snackbar.make(view, mensagens[0], Snackbar.LENGTH_SHORT);\r\n                    snackbar.setBackgroundTint(getResources().getColor(R.color.white));\r\n                    snackbar.setTextColor(getResources().getColor(R.color.black));\r\n                    snackbar.show();\r\n                }\r\n\r\n\r\n\r\n\r\n        new Thread(new Runnable() {\r\n            @Override\r\n            public void run() {calculadoramm(view);\r\n                while (i &lt; 100) {\r\n                    i += 1;\r\n                    try {\r\n                        Thread.sleep(60);\r\n                    } catch (InterruptedException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                    handler.post(new Runnable() {\r\n                        @Override\r\n                        public void run() {\r\n                            pb.setProgress(i);\r\n                            txt.setText(i + &quot;% Verificando...&quot;);\r\n                         if (i == pb.getMax())\r\n                                Toast.makeText(MainActivity.this, &quot;Completo!&quot;, Toast.LENGTH_SHORT).show();\r\n\r\n\r\n                        }\r\n                    });\r\n                }\r\n\r\n            }\r\n        }).start();\r\n    }\r\n        });\r\n\r\n\r\n    }\r\n\r\n\r\n    private void iniciar() {\r\n\r\n        textResultado = findViewById(R.id.textResultado);\r\n        editpeso = findViewById(R.id.editpeso);\r\n        editaltura = findViewById(R.id.editaltura);\r\n        botao = (Button) findViewById(R.id.botao);\r\n        pb = (ProgressBar) findViewById(R.id.pb);\r\n        txt = (TextView) findViewById(R.id.txt);\r\n\r\n\r\n    }\r\n\r\n\r\n    public void calculadoramm(View view) {\r\n\r\n        double peso = Double.parseDouble(editpeso.getText().toString());\r\n        double altura = Double.parseDouble(editaltura.getText().toString());\r\n        double resultado = peso / (altura * altura);\r\n\r\n        //Se\r\n\r\n        if (resultado &lt;= 18.5) {\r\n            textResultado.setText(&quot;Abaixo do Peso!&quot;);\r\n            textResultado.setTextColor(getResources().getColor(android.R.color.holo_blue_bright));\r\n\r\n        }\r\n        if (resultado &lt;= 18.5 || resultado &gt;= 24.9) {\r\n            textResultado.setText(&quot;Peso normal!&quot;);\r\n            textResultado.setTextColor(getResources().getColor(android.R.color.holo_green_light));\r\n\r\n        }\r\n        if (resultado &lt;= 25 || resultado &gt;= 29.9) {\r\n            textResultado.setText(&quot;Excesso de peso!&quot;);\r\n            textResultado.setTextColor(getResources().getColor(android.R.color.holo_green_light));\r\n\r\n\r\n            if (resultado &lt;= 30 || resultado &gt;= 34.9) {\r\n                textResultado.setText(&quot;Obesidade nivel I!&quot;);\r\n                textResultado.setTextColor(getResources().getColor(android.R.color.holo_orange_light));\r\n\r\n                if (resultado &lt;= 35 || resultado &gt;= 39.9) {\r\n                    textResultado.setText(&quot;Obesidade nivel II!&quot;);\r\n                    textResultado.setTextColor(getResources().getColor(android.R.color.holo_red_light));\r\n\r\n                    if (resultado &gt;= 40) {\r\n                        textResultado.setText(&quot;Obesidade nivel III ou Morbida!&quot;);\r\n                        textResultado.setTextColor(getResources().getColor(android.R.color.holo_red_light));\r\n                    }\r\n\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n\r\n```\r\n\r\nI&#39;ve tried to add an Intent to start activity from Main to my results and None seems to work, and updated the code","title":"How to Re-Run my ProgressBar after its completes hi activity?","body":"<p>I need help with this, I made this calculator, and a progressbar , i need it to when its finish so i can click again and run again, i didnt found a way to do that, and do the same with anothr data or the same data as well</p>\n<pre><code> private TextView textResultado;\n    private TextView editpeso;\n    private TextView editaltura;\n    private Button botao;\n    private ProgressBar pb;\n    private TextView txt;\n    int i = 0;\n    Handler handler = new Handler();\n    String[] mensagens = {&quot;Preencha todos os campos!&quot;};\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        getSupportActionBar().hide();\n        iniciar();\n\n        botao.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                pb.setVisibility(View.VISIBLE);\n                String peso = editpeso.getText().toString();\n                String altura = editaltura.getText().toString();\n\n                if (peso.isEmpty() || altura.isEmpty()) {\n                    Snackbar snackbar = Snackbar.make(view, mensagens[0], Snackbar.LENGTH_SHORT);\n                    snackbar.setBackgroundTint(getResources().getColor(R.color.white));\n                    snackbar.setTextColor(getResources().getColor(R.color.black));\n                    snackbar.show();\n                }\n\n\n\n\n        new Thread(new Runnable() {\n            @Override\n            public void run() {calculadoramm(view);\n                while (i &lt; 100) {\n                    i += 1;\n                    try {\n                        Thread.sleep(60);\n                    } catch (InterruptedException e) {\n                        e.printStackTrace();\n                    }\n                    handler.post(new Runnable() {\n                        @Override\n                        public void run() {\n                            pb.setProgress(i);\n                            txt.setText(i + &quot;% Verificando...&quot;);\n                         if (i == pb.getMax())\n                                Toast.makeText(MainActivity.this, &quot;Completo!&quot;, Toast.LENGTH_SHORT).show();\n\n\n                        }\n                    });\n                }\n\n            }\n        }).start();\n    }\n        });\n\n\n    }\n\n\n    private void iniciar() {\n\n        textResultado = findViewById(R.id.textResultado);\n        editpeso = findViewById(R.id.editpeso);\n        editaltura = findViewById(R.id.editaltura);\n        botao = (Button) findViewById(R.id.botao);\n        pb = (ProgressBar) findViewById(R.id.pb);\n        txt = (TextView) findViewById(R.id.txt);\n\n\n    }\n\n\n    public void calculadoramm(View view) {\n\n        double peso = Double.parseDouble(editpeso.getText().toString());\n        double altura = Double.parseDouble(editaltura.getText().toString());\n        double resultado = peso / (altura * altura);\n\n        //Se\n\n        if (resultado &lt;= 18.5) {\n            textResultado.setText(&quot;Abaixo do Peso!&quot;);\n            textResultado.setTextColor(getResources().getColor(android.R.color.holo_blue_bright));\n\n        }\n        if (resultado &lt;= 18.5 || resultado &gt;= 24.9) {\n            textResultado.setText(&quot;Peso normal!&quot;);\n            textResultado.setTextColor(getResources().getColor(android.R.color.holo_green_light));\n\n        }\n        if (resultado &lt;= 25 || resultado &gt;= 29.9) {\n            textResultado.setText(&quot;Excesso de peso!&quot;);\n            textResultado.setTextColor(getResources().getColor(android.R.color.holo_green_light));\n\n\n            if (resultado &lt;= 30 || resultado &gt;= 34.9) {\n                textResultado.setText(&quot;Obesidade nivel I!&quot;);\n                textResultado.setTextColor(getResources().getColor(android.R.color.holo_orange_light));\n\n                if (resultado &lt;= 35 || resultado &gt;= 39.9) {\n                    textResultado.setText(&quot;Obesidade nivel II!&quot;);\n                    textResultado.setTextColor(getResources().getColor(android.R.color.holo_red_light));\n\n                    if (resultado &gt;= 40) {\n                        textResultado.setText(&quot;Obesidade nivel III ou Morbida!&quot;);\n                        textResultado.setTextColor(getResources().getColor(android.R.color.holo_red_light));\n                    }\n\n                }\n            }\n        }\n    }\n}\n\n\n</code></pre>\n<p>I've tried to add an Intent to start activity from Main to my results and None seems to work, and updated the code</p>\n"},{"tags":["java","parquet","bytearrayoutputstream"],"comments":[{"owner":{"account_id":7428434,"reputation":1471,"user_id":5650224,"display_name":"m4gic"},"score":0,"creation_date":1569934465,"post_id":58141248,"comment_id":102750047,"body_markdown":"Just implement the org.apache.parquet.io.InputFile interface, as the org.apache.parquet.hadoop.util.HadoopInputFile does. The only thing you have to do is to make a bytearray out of your outputstream, make a bytearrayinputstream out of it and pass it to org.apache.parquet.io.DelegatingSeekableInputStream","body":"Just implement the org.apache.parquet.io.InputFile interface, as the org.apache.parquet.hadoop.util.HadoopInputFile does. The only thing you have to do is to make a bytearray out of your outputstream, make a bytearrayinputstream out of it and pass it to org.apache.parquet.io.DelegatingSeekableInputStream"},{"owner":{"account_id":1529019,"reputation":2193,"user_id":1426724,"accept_rate":83,"display_name":"chrismead"},"score":0,"creation_date":1570218546,"post_id":58141248,"comment_id":102857025,"body_markdown":"Thanks for the tip, @m4gic.  I will try this once the bounty expires.","body":"Thanks for the tip, @m4gic.  I will try this once the bounty expires."}],"answers":[{"comments":[{"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":0,"creation_date":1599692358,"post_id":58261488,"comment_id":112855593,"body_markdown":"I&#39;m successfully using this approach.  For my own implementation, I also created a `ByteArraySeekableInputStream` class which stores the `SeekableByteArrayInputStream` delegate in a field, rather than declaring an anonymous inner class. This avoids the `((SeekableByteArrayInputStream) this.getStream())` cast.","body":"I&#39;m successfully using this approach.  For my own implementation, I also created a <code>ByteArraySeekableInputStream</code> class which stores the <code>SeekableByteArrayInputStream</code> delegate in a field, rather than declaring an anonymous inner class. This avoids the <code>((SeekableByteArrayInputStream) this.getStream())</code> cast."},{"owner":{"account_id":1217291,"reputation":8837,"user_id":1184622,"accept_rate":88,"display_name":"Alex"},"score":1,"creation_date":1626900012,"post_id":58261488,"comment_id":121018422,"body_markdown":"Very nice alternative to huge hadoop-aws dependency, thanks. +1","body":"Very nice alternative to huge hadoop-aws dependency, thanks. +1"}],"tags":[],"owner":{"account_id":7428434,"reputation":1471,"user_id":5650224,"display_name":"m4gic"},"comment_count":2,"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1599692152,"creation_date":1570398410,"answer_id":58261488,"question_id":58141248,"body_markdown":"So without deeper testing, I would try with this class (albeit the content of the outputstream should be parquet-compatible). I put there a streamId to make the identification of the processed bytearray easier (the ParquetFileReader prints the instance.toString() out if something went wrong).\r\n\r\n```java\r\npublic class ParquetStream implements InputFile {\r\n    private final String streamId;\r\n    private final byte[] data;\r\n\r\n    private static class SeekableByteArrayInputStream extends ByteArrayInputStream {\r\n        public SeekableByteArrayInputStream(byte[] buf) {\r\n            super(buf);\r\n        }\r\n\r\n        public void setPos(int pos) {\r\n            this.pos = pos;\r\n        }\r\n\r\n        public int getPos() {\r\n            return this.pos;\r\n        }\r\n    }\r\n\r\n    public ParquetStream(String streamId, ByteArrayOutputStream stream) {\r\n        this.streamId = streamId;\r\n        this.data = stream.toByteArray();\r\n    }\r\n\r\n    @Override\r\n    public long getLength() throws IOException {\r\n        return this.data.length;\r\n    }\r\n\r\n    @Override\r\n    public SeekableInputStream newStream() throws IOException {\r\n        return new DelegatingSeekableInputStream(new SeekableByteArrayInputStream(this.data)) {\r\n            @Override\r\n            public void seek(long newPos) throws IOException {\r\n                ((SeekableByteArrayInputStream) this.getStream()).setPos((int) newPos);\r\n            }\r\n\r\n            @Override\r\n            public long getPos() throws IOException {\r\n                return ((SeekableByteArrayInputStream) this.getStream()).getPos();\r\n            }\r\n        };\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;ParquetStream[&quot; + streamId + &quot;]&quot;;\r\n    }\r\n}\r\n","title":"Read parquet data from ByteArrayOutputStream instead of file","body":"<p>So without deeper testing, I would try with this class (albeit the content of the outputstream should be parquet-compatible). I put there a streamId to make the identification of the processed bytearray easier (the ParquetFileReader prints the instance.toString() out if something went wrong).</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ParquetStream implements InputFile {\n    private final String streamId;\n    private final byte[] data;\n\n    private static class SeekableByteArrayInputStream extends ByteArrayInputStream {\n        public SeekableByteArrayInputStream(byte[] buf) {\n            super(buf);\n        }\n\n        public void setPos(int pos) {\n            this.pos = pos;\n        }\n\n        public int getPos() {\n            return this.pos;\n        }\n    }\n\n    public ParquetStream(String streamId, ByteArrayOutputStream stream) {\n        this.streamId = streamId;\n        this.data = stream.toByteArray();\n    }\n\n    @Override\n    public long getLength() throws IOException {\n        return this.data.length;\n    }\n\n    @Override\n    public SeekableInputStream newStream() throws IOException {\n        return new DelegatingSeekableInputStream(new SeekableByteArrayInputStream(this.data)) {\n            @Override\n            public void seek(long newPos) throws IOException {\n                ((SeekableByteArrayInputStream) this.getStream()).setPos((int) newPos);\n            }\n\n            @Override\n            public long getPos() throws IOException {\n                return ((SeekableByteArrayInputStream) this.getStream()).getPos();\n            }\n        };\n    }\n\n    @Override\n    public String toString() {\n        return &quot;ParquetStream[&quot; + streamId + &quot;]&quot;;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1529019,"reputation":2193,"user_id":1426724,"accept_rate":83,"display_name":"chrismead"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5938,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":58261488,"answer_count":1,"score":12,"last_activity_date":1668698226,"creation_date":1569617786,"question_id":58141248,"body_markdown":"I would like to convert this code:\r\n```\r\nimport org.apache.hadoop.conf.Configuration;\r\nimport org.apache.hadoop.fs.Path;\r\nimport org.apache.parquet.column.page.PageReadStore;\r\nimport org.apache.parquet.example.data.simple.SimpleGroup;\r\nimport org.apache.parquet.example.data.simple.convert.GroupRecordConverter;\r\nimport org.apache.parquet.hadoop.ParquetFileReader;\r\nimport org.apache.parquet.hadoop.util.HadoopInputFile;\r\nimport org.apache.parquet.io.ColumnIOFactory;\r\nimport org.apache.parquet.io.MessageColumnIO;\r\nimport org.apache.parquet.io.RecordReader;\r\nimport org.apache.parquet.schema.MessageType;\r\n\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\n\r\npublic class ParquetReaderUtils {\r\n\r\n    public static Parquet getParquetData(String filePath) throws IOException {\r\n        List&lt;SimpleGroup&gt; simpleGroups = new ArrayList&lt;&gt;();\r\n        ParquetFileReader reader = ParquetFileReader.open(HadoopInputFile.fromPath(new Path(filePath), new Configuration()));\r\n        MessageType schema = reader.getFooter().getFileMetaData().getSchema();\r\n        //List&lt;Type&gt; fields = schema.getFields();\r\n        PageReadStore pages;\r\n        while ((pages = reader.readNextRowGroup()) != null) {\r\n            long rows = pages.getRowCount();\r\n            MessageColumnIO columnIO = new ColumnIOFactory().getColumnIO(schema);\r\n            RecordReader recordReader = columnIO.getRecordReader(pages, new GroupRecordConverter(schema));\r\n\r\n            for (int i = 0; i &lt; rows; i++) {\r\n                SimpleGroup simpleGroup = (SimpleGroup) recordReader.read();\r\n                simpleGroups.add(simpleGroup);\r\n            }\r\n        }\r\n        reader.close();\r\n        return new Parquet(simpleGroups, schema);\r\n    }\r\n}\r\n```\r\n(which is from https://www.arm64.ca/post/reading-parquet-files-java/)\r\n\r\nto take a ByteArrayOutputStream parameter instead of a filePath.\r\n\r\nIs this possible?  I don&#39;t see a ParquetStreamReader in org.apache.parquet.hadoop.\r\n\r\nAny help is appreciated.  I am trying to write a test app for parquet coming from kafka and writing each of many messages out to a file is rather slow.","title":"Read parquet data from ByteArrayOutputStream instead of file","body":"<p>I would like to convert this code:</p>\n\n<pre><code>import org.apache.hadoop.conf.Configuration;\nimport org.apache.hadoop.fs.Path;\nimport org.apache.parquet.column.page.PageReadStore;\nimport org.apache.parquet.example.data.simple.SimpleGroup;\nimport org.apache.parquet.example.data.simple.convert.GroupRecordConverter;\nimport org.apache.parquet.hadoop.ParquetFileReader;\nimport org.apache.parquet.hadoop.util.HadoopInputFile;\nimport org.apache.parquet.io.ColumnIOFactory;\nimport org.apache.parquet.io.MessageColumnIO;\nimport org.apache.parquet.io.RecordReader;\nimport org.apache.parquet.schema.MessageType;\n\nimport java.io.IOException;\nimport java.util.ArrayList;\nimport java.util.List;\n\n\npublic class ParquetReaderUtils {\n\n    public static Parquet getParquetData(String filePath) throws IOException {\n        List&lt;SimpleGroup&gt; simpleGroups = new ArrayList&lt;&gt;();\n        ParquetFileReader reader = ParquetFileReader.open(HadoopInputFile.fromPath(new Path(filePath), new Configuration()));\n        MessageType schema = reader.getFooter().getFileMetaData().getSchema();\n        //List&lt;Type&gt; fields = schema.getFields();\n        PageReadStore pages;\n        while ((pages = reader.readNextRowGroup()) != null) {\n            long rows = pages.getRowCount();\n            MessageColumnIO columnIO = new ColumnIOFactory().getColumnIO(schema);\n            RecordReader recordReader = columnIO.getRecordReader(pages, new GroupRecordConverter(schema));\n\n            for (int i = 0; i &lt; rows; i++) {\n                SimpleGroup simpleGroup = (SimpleGroup) recordReader.read();\n                simpleGroups.add(simpleGroup);\n            }\n        }\n        reader.close();\n        return new Parquet(simpleGroups, schema);\n    }\n}\n</code></pre>\n\n<p>(which is from <a href=\"https://www.arm64.ca/post/reading-parquet-files-java/\" rel=\"noreferrer\">https://www.arm64.ca/post/reading-parquet-files-java/</a>)</p>\n\n<p>to take a ByteArrayOutputStream parameter instead of a filePath.</p>\n\n<p>Is this possible?  I don't see a ParquetStreamReader in org.apache.parquet.hadoop.</p>\n\n<p>Any help is appreciated.  I am trying to write a test app for parquet coming from kafka and writing each of many messages out to a file is rather slow.</p>\n"},{"tags":["java","swagger","openapi","java-record"],"owner":{"account_id":25192367,"reputation":55,"user_id":19032411,"display_name":"stakeika"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":948,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1668698198,"creation_date":1668698198,"question_id":74477852,"body_markdown":"I have a controller below:\r\n\r\n    @RestController\r\n    @RequestMapping(value = &quot;/client&quot;, produces = APPLICATION_JSON_VALUE)\r\n    @Tag(name = &quot;Client&quot;)\r\n    @RequiredArgsConstructor\r\n    @Validated\r\n    public class PersonController {\r\n        @Operation(summary = &quot;Get client info&quot;)\r\n        @GetMapping\r\n        public PersonInfoResponse getPersonInfo(\r\n                @Valid PersonSearchParameters parameters\r\n        ) {\r\n           // some logic\r\n        }\r\n    }\r\n\r\nSearch parameters are grouped together inside `PersonSearchParameters` class. Java takes them as query parameters even without annotation `@RequestParam`\r\n\r\n    @ValidPersonSearchParameter // custom validation\r\n    public record PersonSearchParameters(\r\n            @Schema(required = true, description = &quot;Search key&quot;)\r\n            @NotNull SearchKey searchKey,\r\n\r\n            @Schema(required = true, description = &quot;Value&quot;)\r\n            @NotBlank String value,\r\n\r\n            @Schema(description = &quot;Birthday&quot;)\r\n            @DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;) LocalDate birthday\r\n    ) {\r\n    }\r\n\r\nI want to have Schema description right inside the request in Swagger as it is for JSON request body.\r\n\r\n[![image from the internet][1]][1]\r\n\r\n\r\nBut I only have an example value. By the way, name &quot;parameters&quot; was given automatically even before I specified it.\r\n\r\n[![example value][2]][2]\r\n\r\n\r\nAnd I also can scroll down the page and see documentation on PersonSearchParameters\r\n[![schema described separately][3]][3]\r\n\r\nDo you know how to put them together? My try was like that, but it didn&#39;t help:\r\n\r\n    @Parameters({\r\n            @Parameter(name = &quot;parameters&quot;, description = &quot;Search parameters&quot;, required = true,\r\n                    schema = @Schema(implementation = PersonSearchParameters.class))\r\n    })\r\n    public PersonInfoResponse getPersonInfo(\r\n            @Valid @RequestParam(&quot;parameters&quot;) PersonSearchParameters parameters\r\n\r\nHere I added `@Parameters` description on my controller method and `@RequestParam(&quot;parameters&quot;)` on the argument. I hoped that `schema = @Schema...` would help, but it didn&#39;t. Any ideas?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/MDy5X.png\r\n  [2]: https://i.stack.imgur.com/yFbMp.png\r\n  [3]: https://i.stack.imgur.com/wxTCd.png","title":"Add Swagger 3 OpenAPI documentation on RequestParams packed into java record","body":"<p>I have a controller below:</p>\n<pre><code>@RestController\n@RequestMapping(value = &quot;/client&quot;, produces = APPLICATION_JSON_VALUE)\n@Tag(name = &quot;Client&quot;)\n@RequiredArgsConstructor\n@Validated\npublic class PersonController {\n    @Operation(summary = &quot;Get client info&quot;)\n    @GetMapping\n    public PersonInfoResponse getPersonInfo(\n            @Valid PersonSearchParameters parameters\n    ) {\n       // some logic\n    }\n}\n</code></pre>\n<p>Search parameters are grouped together inside <code>PersonSearchParameters</code> class. Java takes them as query parameters even without annotation <code>@RequestParam</code></p>\n<pre><code>@ValidPersonSearchParameter // custom validation\npublic record PersonSearchParameters(\n        @Schema(required = true, description = &quot;Search key&quot;)\n        @NotNull SearchKey searchKey,\n\n        @Schema(required = true, description = &quot;Value&quot;)\n        @NotBlank String value,\n\n        @Schema(description = &quot;Birthday&quot;)\n        @DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;) LocalDate birthday\n) {\n}\n</code></pre>\n<p>I want to have Schema description right inside the request in Swagger as it is for JSON request body.</p>\n<p><a href=\"https://i.stack.imgur.com/MDy5X.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MDy5X.png\" alt=\"image from the internet\" /></a></p>\n<p>But I only have an example value. By the way, name &quot;parameters&quot; was given automatically even before I specified it.</p>\n<p><a href=\"https://i.stack.imgur.com/yFbMp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yFbMp.png\" alt=\"example value\" /></a></p>\n<p>And I also can scroll down the page and see documentation on PersonSearchParameters\n<a href=\"https://i.stack.imgur.com/wxTCd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wxTCd.png\" alt=\"schema described separately\" /></a></p>\n<p>Do you know how to put them together? My try was like that, but it didn't help:</p>\n<pre><code>@Parameters({\n        @Parameter(name = &quot;parameters&quot;, description = &quot;Search parameters&quot;, required = true,\n                schema = @Schema(implementation = PersonSearchParameters.class))\n})\npublic PersonInfoResponse getPersonInfo(\n        @Valid @RequestParam(&quot;parameters&quot;) PersonSearchParameters parameters\n</code></pre>\n<p>Here I added <code>@Parameters</code> description on my controller method and <code>@RequestParam(&quot;parameters&quot;)</code> on the argument. I hoped that <code>schema = @Schema...</code> would help, but it didn't. Any ideas?</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"display_name":"user10639668"},"score":0,"creation_date":1543847811,"post_id":53595574,"comment_id":94054249,"body_markdown":"The performance penalty is because it tries to authenticate with each request and fails. API works fine probably  because Spring Security actually doesn&#39;t protect your endpoints.","body":"The performance penalty is because it tries to authenticate with each request and fails. API works fine probably  because Spring Security actually doesn&#39;t protect your endpoints."},{"owner":{"account_id":4671837,"reputation":390,"user_id":3783432,"accept_rate":80,"display_name":"Dynamite"},"score":0,"creation_date":1543847966,"post_id":53595574,"comment_id":94054333,"body_markdown":"@EugenCovaci So can I disable Spring internal filters and use only mine ?","body":"@EugenCovaci So can I disable Spring internal filters and use only mine ?"},{"owner":{"display_name":"user10639668"},"score":0,"creation_date":1543848148,"post_id":53595574,"comment_id":94054451,"body_markdown":"No, as a first step,  try to log the `List&lt;ApiUser&gt; users`, maybe in production the list in not as expected.","body":"No, as a first step,  try to log the <code>List&lt;ApiUser&gt; users</code>, maybe in production the list in not as expected."},{"owner":{"account_id":4671837,"reputation":390,"user_id":3783432,"accept_rate":80,"display_name":"Dynamite"},"score":0,"creation_date":1543848642,"post_id":53595574,"comment_id":94054788,"body_markdown":"@EugenCovaci It is correct because API authentication works fine (I mean credentials are effectively required and wrong user/psw ends in 401)","body":"@EugenCovaci It is correct because API authentication works fine (I mean credentials are effectively required and wrong user/psw ends in 401)"},{"owner":{"account_id":2774008,"reputation":18025,"user_id":2387977,"accept_rate":69,"display_name":"Dherik"},"score":0,"creation_date":1543848728,"post_id":53595574,"comment_id":94054837,"body_markdown":"Hi! Can you show the entire `UsernameNotFoundExcption` stacktrace error?","body":"Hi! Can you show the entire <code>UsernameNotFoundExcption</code> stacktrace error?"},{"owner":{"account_id":4671837,"reputation":390,"user_id":3783432,"accept_rate":80,"display_name":"Dynamite"},"score":0,"creation_date":1543849104,"post_id":53595574,"comment_id":94055066,"body_markdown":"@Dherik Have fun ;)","body":"@Dherik Have fun ;)"},{"owner":{"display_name":"user10639668"},"score":0,"creation_date":1543850280,"post_id":53595574,"comment_id":94055814,"body_markdown":"Please run it in debug mode.","body":"Please run it in debug mode."}],"answers":[{"comments":[{"owner":{"account_id":4671837,"reputation":390,"user_id":3783432,"accept_rate":80,"display_name":"Dynamite"},"score":0,"creation_date":1543850622,"post_id":53596378,"comment_id":94056018,"body_markdown":"I updated my question with the antMatchers shown, I don&#39;t think I&#39;m hidding any &quot;public&quot; ressources. What I want is having every ressources to be public except those under &quot;/my-business-ressources&quot; and &quot;/actuator&quot;. Am I wrong ?","body":"I updated my question with the antMatchers shown, I don&#39;t think I&#39;m hidding any &quot;public&quot; ressources. What I want is having every ressources to be public except those under &quot;/my-business-ressources&quot; and &quot;/actuator&quot;. Am I wrong ?"},{"owner":{"account_id":134781,"reputation":105,"user_id":337156,"display_name":"comrad"},"score":0,"creation_date":1543850986,"post_id":53596378,"comment_id":94056244,"body_markdown":"Spring Security works with a filter which is probably your root Directory for you web appplication. Because of that every url of your web application will be handled by Spring Security. \n\n\nDo you have any Images or css files? Those are probably the reason for the UsernameNotFoundExcption because your browser will not send credentials for these.\n\n\nCommon solution for this is to exclude some URLs from being excluded by Spring Security at all.","body":"Spring Security works with a filter which is probably your root Directory for you web appplication. Because of that every url of your web application will be handled by Spring Security.    Do you have any Images or css files? Those are probably the reason for the UsernameNotFoundExcption because your browser will not send credentials for these.   Common solution for this is to exclude some URLs from being excluded by Spring Security at all."},{"owner":{"account_id":4671837,"reputation":390,"user_id":3783432,"accept_rate":80,"display_name":"Dynamite"},"score":0,"creation_date":1543854927,"post_id":53596378,"comment_id":94058552,"body_markdown":"This is a database access API, I don&#39;t have any resources beside those.","body":"This is a database access API, I don&#39;t have any resources beside those."},{"owner":{"account_id":2588110,"reputation":7132,"user_id":2243324,"display_name":"jzheaux"},"score":0,"creation_date":1543855091,"post_id":53596378,"comment_id":94058641,"body_markdown":"@comrad since the link you included is for XML and the OP is using Java config, it might be helpful to show a quick snippet here in this answer on what the Java config would look like.","body":"@comrad since the link you included is for XML and the OP is using Java config, it might be helpful to show a quick snippet here in this answer on what the Java config would look like."}],"tags":[],"owner":{"account_id":134781,"reputation":105,"user_id":337156,"display_name":"comrad"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1543849292,"creation_date":1543849292,"answer_id":53596378,"question_id":53595574,"body_markdown":"You are Performing security checks on your resources and other files as well. You should exclude them to be authenticated at all.\r\n\r\nHave a look here: https://stackoverflow.com/questions/3394657/spring-security-how-to-exclude-certain-resources","title":"Spring security - Errors causes performance issues","body":"<p>You are Performing security checks on your resources and other files as well. You should exclude them to be authenticated at all.</p>\n\n<p>Have a look here: <a href=\"https://stackoverflow.com/questions/3394657/spring-security-how-to-exclude-certain-resources\">Spring Security: how to exclude certain resources?</a></p>\n"},{"comments":[{"owner":{"account_id":4671837,"reputation":390,"user_id":3783432,"accept_rate":80,"display_name":"Dynamite"},"score":0,"creation_date":1543917413,"post_id":53598286,"comment_id":94081538,"body_markdown":"I had this idea and tried with plain text passwords but it wasn&#39;t faster (or only few milliseconds maybe), moreover I&#39;m using BCrypted password with the lower number of rounds available.","body":"I had this idea and tried with plain text passwords but it wasn&#39;t faster (or only few milliseconds maybe), moreover I&#39;m using BCrypted password with the lower number of rounds available."},{"owner":{"account_id":2588110,"reputation":7132,"user_id":2243324,"display_name":"jzheaux"},"score":0,"creation_date":1543945563,"post_id":53598286,"comment_id":94097698,"body_markdown":"@Dynamite just to clarify, when you say &quot;with plain text passwords&quot; do you mean that you replaced the `BCryptPasswordEncoder` bean with `NoOpPasswordEncoder`?","body":"@Dynamite just to clarify, when you say &quot;with plain text passwords&quot; do you mean that you replaced the <code>BCryptPasswordEncoder</code> bean with <code>NoOpPasswordEncoder</code>?"}],"tags":[],"owner":{"account_id":2588110,"reputation":7132,"user_id":2243324,"display_name":"jzheaux"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1543947719,"creation_date":1543855991,"answer_id":53598286,"question_id":53595574,"body_markdown":"I believe the reason that it is taking 500ms is due to password encoding. BCrypt is an encoding mechanism that is designed to make authentication take longer in order to mitigate brute force attacks.\r\n\r\nTypically, this performance issue is solved by exchanging long-lived credentials (like passwords) with short-lived ones like tokens. [OAuth][1] is a framework that attempts to standardize this practice. [Spring Security 5.1 introduces support for protecting APIs with OAuth 2.0][2]. This won&#39;t immediately fix your performance issue since it may require introducing more infrastructure, but it is probably a better security design choice in the long term.\r\n\r\nAs an alternative, you could use a weaker encoder or possibly fewer rounds of BCrypt, but note that both of these are a performance-security tradeoff. You&#39;d change out your `BCryptPasswordEncoder` for something else, e.g.:\r\n\r\n    @Bean\r\n    public PasswordEncoder encoder() {\r\n        // ...\r\n    }\r\n\r\n**EDIT**: Glad you found the issue! Tangentially, I&#39;d recommend cleaning up the way that you are describing your authentication manager. It can be replaced with a `UserDetailsService`:\r\n\r\n    @Bean\r\n    @Override\r\n    public UserDetailsService userDetailsService() {\r\n        Resource confFile = resourceLoader.getResource(&quot;classpath:users.list&quot;);\r\n        Collection&lt;UserDetails&gt; users = ApiUtils.getUsersFromFile(confFile)\r\n            .stream().map(this::toUserDetails)\r\n            .collect(Collectors.toList());\r\n        return new InMemoryUserDetailsManager(users);\r\n    }\r\n\r\n    private UserDetails toUserDetails(ApiUser apiUser) {\r\n        UserBuilder builder = User.builder()\r\n            .username(apiUser.username)\r\n            .password(apiUser.password);\r\n        return apiUser.admin ?\r\n            builder.roles(&quot;USER&quot;, &quot;ADMIN&quot;).build() :\r\n            builder.roles(&quot;USER&quot;).build();\r\n    }\r\n\r\nThis is nice because it has a smaller configuration footprint (an authentication manager is a &quot;bigger&quot; thing than a user details service). If you are just wanting to supply users, then it is more typical to [override the `UserDetailsService`][3] instead of the `AuthenticationManager`.\r\n\r\n\r\n  [1]: https://oauth.net/2/\r\n  [2]: https://github.com/spring-projects/spring-security/tree/5.1.2.RELEASE/samples/boot/oauth2resourceserver\r\n  [3]: https://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/#jc-authentication-inmemory","title":"Spring security - Errors causes performance issues","body":"<p>I believe the reason that it is taking 500ms is due to password encoding. BCrypt is an encoding mechanism that is designed to make authentication take longer in order to mitigate brute force attacks.</p>\n\n<p>Typically, this performance issue is solved by exchanging long-lived credentials (like passwords) with short-lived ones like tokens. <a href=\"https://oauth.net/2/\" rel=\"nofollow noreferrer\">OAuth</a> is a framework that attempts to standardize this practice. <a href=\"https://github.com/spring-projects/spring-security/tree/5.1.2.RELEASE/samples/boot/oauth2resourceserver\" rel=\"nofollow noreferrer\">Spring Security 5.1 introduces support for protecting APIs with OAuth 2.0</a>. This won't immediately fix your performance issue since it may require introducing more infrastructure, but it is probably a better security design choice in the long term.</p>\n\n<p>As an alternative, you could use a weaker encoder or possibly fewer rounds of BCrypt, but note that both of these are a performance-security tradeoff. You'd change out your <code>BCryptPasswordEncoder</code> for something else, e.g.:</p>\n\n<pre><code>@Bean\npublic PasswordEncoder encoder() {\n    // ...\n}\n</code></pre>\n\n<p><strong>EDIT</strong>: Glad you found the issue! Tangentially, I'd recommend cleaning up the way that you are describing your authentication manager. It can be replaced with a <code>UserDetailsService</code>:</p>\n\n<pre><code>@Bean\n@Override\npublic UserDetailsService userDetailsService() {\n    Resource confFile = resourceLoader.getResource(\"classpath:users.list\");\n    Collection&lt;UserDetails&gt; users = ApiUtils.getUsersFromFile(confFile)\n        .stream().map(this::toUserDetails)\n        .collect(Collectors.toList());\n    return new InMemoryUserDetailsManager(users);\n}\n\nprivate UserDetails toUserDetails(ApiUser apiUser) {\n    UserBuilder builder = User.builder()\n        .username(apiUser.username)\n        .password(apiUser.password);\n    return apiUser.admin ?\n        builder.roles(\"USER\", \"ADMIN\").build() :\n        builder.roles(\"USER\").build();\n}\n</code></pre>\n\n<p>This is nice because it has a smaller configuration footprint (an authentication manager is a \"bigger\" thing than a user details service). If you are just wanting to supply users, then it is more typical to <a href=\"https://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/#jc-authentication-inmemory\" rel=\"nofollow noreferrer\">override the <code>UserDetailsService</code></a> instead of the <code>AuthenticationManager</code>.</p>\n"},{"comments":[{"owner":{"account_id":2588110,"reputation":7132,"user_id":2243324,"display_name":"jzheaux"},"score":0,"creation_date":1543947218,"post_id":53614205,"comment_id":94098489,"body_markdown":"I&#39;m glad you found your issue! I&#39;ve pasted into my answer a recommended polish. Hope it helps.","body":"I&#39;m glad you found your issue! I&#39;ve pasted into my answer a recommended polish. Hope it helps."}],"tags":[],"owner":{"account_id":4671837,"reputation":390,"user_id":3783432,"accept_rate":80,"display_name":"Dynamite"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1543930688,"creation_date":1543930688,"answer_id":53614205,"question_id":53595574,"body_markdown":"Okay, after a lot of debug, I found the problem !\r\n\r\nThe issue is in the code I use to fill the in memory authenticator:\r\n\r\n\r\n    for(ApiUser u : users){\r\n    \t// Add the username/password to the in-memory authentication manager\r\n    \tif (u.admin)\r\n    \t\tauth.inMemoryAuthentication().withUser(u.username).password(u.password).roles(&quot;USER&quot;, &quot;ADMIN&quot;);\r\n    \telse\r\n    \t\tauth.inMemoryAuthentication().withUser(u.username).password(u.password).roles(&quot;USER&quot;);\r\n    }\r\n\r\nThe fact of calling `auth.inMemoryAuthentication()` many times creates a new `InMemoryUserDetailsManagerConfigurer&lt;AuthenticationManagerBuilder&gt;` on each time ([Spring code][1]), and so we have as many different `AuthenticationManager` as users (one user per each) so the authentication process is performed multiple times for each requests.\r\n\r\nHere is how I fixed the bug:\r\n\r\n    @Autowired\r\n    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {\r\n    \t// Load users file\r\n    \tResource confFile = resourceLoader.getResource(&quot;classpath:users.list&quot;);\r\n    \r\n    \t// Returns users from the configuration file &lt;username, password (BCrypted), admin (boolean)&gt;\r\n    \tList&lt;ApiUser&gt; users = ApiUtils.getUsersFromFile(confFile);\r\n    \t\r\n    \t@SuppressWarnings(&quot;rawtypes&quot;)\r\n    \tUserDetailsBuilder udb = null;\r\n    \r\n    \tfor(ApiUser u : users){\r\n    \t\t// Add the username/password to the in-memory authentication manager\r\n    \t\tif (udb == null)\r\n    \t\t\tudb = auth.inMemoryAuthentication().withUser(u.username).password(u.password);\r\n    \t\telse\r\n    \t\t\tudb = udb.and().withUser(u.username).password(u.password);\r\n    \r\n    \t\tif (u.admin)\r\n    \t\t\tudb.roles(&quot;USER&quot;, &quot;ADMIN&quot;);\r\n    \t\telse\r\n    \t\t\tudb.roles(&quot;USER&quot;);\r\n    \t}\r\n    }\r\n\r\nNow my average response time is 80ms\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-security/blob/3c35f4cfab2838e5b45357332d607adf91332f33/config/src/main/java/org/springframework/security/config/annotation/authentication/builders/AuthenticationManagerBuilder.java#L132","title":"Spring security - Errors causes performance issues","body":"<p>Okay, after a lot of debug, I found the problem !</p>\n\n<p>The issue is in the code I use to fill the in memory authenticator:</p>\n\n<pre><code>for(ApiUser u : users){\n    // Add the username/password to the in-memory authentication manager\n    if (u.admin)\n        auth.inMemoryAuthentication().withUser(u.username).password(u.password).roles(\"USER\", \"ADMIN\");\n    else\n        auth.inMemoryAuthentication().withUser(u.username).password(u.password).roles(\"USER\");\n}\n</code></pre>\n\n<p>The fact of calling <code>auth.inMemoryAuthentication()</code> many times creates a new <code>InMemoryUserDetailsManagerConfigurer&lt;AuthenticationManagerBuilder&gt;</code> on each time (<a href=\"https://github.com/spring-projects/spring-security/blob/3c35f4cfab2838e5b45357332d607adf91332f33/config/src/main/java/org/springframework/security/config/annotation/authentication/builders/AuthenticationManagerBuilder.java#L132\" rel=\"nofollow noreferrer\">Spring code</a>), and so we have as many different <code>AuthenticationManager</code> as users (one user per each) so the authentication process is performed multiple times for each requests.</p>\n\n<p>Here is how I fixed the bug:</p>\n\n<pre><code>@Autowired\npublic void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {\n    // Load users file\n    Resource confFile = resourceLoader.getResource(\"classpath:users.list\");\n\n    // Returns users from the configuration file &lt;username, password (BCrypted), admin (boolean)&gt;\n    List&lt;ApiUser&gt; users = ApiUtils.getUsersFromFile(confFile);\n\n    @SuppressWarnings(\"rawtypes\")\n    UserDetailsBuilder udb = null;\n\n    for(ApiUser u : users){\n        // Add the username/password to the in-memory authentication manager\n        if (udb == null)\n            udb = auth.inMemoryAuthentication().withUser(u.username).password(u.password);\n        else\n            udb = udb.and().withUser(u.username).password(u.password);\n\n        if (u.admin)\n            udb.roles(\"USER\", \"ADMIN\");\n        else\n            udb.roles(\"USER\");\n    }\n}\n</code></pre>\n\n<p>Now my average response time is 80ms</p>\n"}],"owner":{"account_id":4671837,"reputation":390,"user_id":3783432,"accept_rate":80,"display_name":"Dynamite"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2302,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":53614205,"answer_count":3,"score":1,"last_activity_date":1668698094,"creation_date":1543846329,"question_id":53595574,"body_markdown":"I&#39;m facing an issue with a SpringBoot application. My ICS reports **high response times** on this API **but my code metrics says it&#39;s all fine**, for example a query which is sent to my API takes only 50ms to run the &quot;business&quot; code but the effective response takes more than 500ms !\r\n\r\nThe internal logs of my JVM says that on each request, I have a &quot;**UsernameNotFoundExcption**&quot; even if credentials are correct and API works fine. That&#39;s why I think my problem comes from SpringSecurity layer but I can&#39;t identify the cause.\r\n\r\nMy entry point:\r\n\r\n    @Component\r\n    public class BasicAuthenticationPoint extends BasicAuthenticationEntryPoint {\r\n    \t@Override\r\n    \tpublic void commence(HttpServletRequest request, HttpServletResponse response, AuthenticationException authEx)\r\n    \t\t\tthrows IOException, ServletException {\r\n    \t\tresponse.addHeader(&quot;WWW-Authenticate&quot;, &quot;Basic realm=&quot; + getRealmName());\r\n    \t\tresponse.setStatus(HttpServletResponse.SC_UNAUTHORIZED);\r\n    \t\tresponse.setCharacterEncoding(&quot;utf-8&quot;);\r\n    \t\tPrintWriter writer = response.getWriter();\r\n    \t\twriter.println(&quot;HTTP Status 401 - &quot; + authEx.getMessage());\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void afterPropertiesSet() throws Exception {\r\n    \t\tsetRealmName(&quot;MYAPI&quot;);\r\n    \t\tsuper.afterPropertiesSet();\r\n    \t}\r\n    }\r\n\r\nAnd my adapter:\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class SpringSecurityConfig extends WebSecurityConfigurerAdapter {\r\n    \r\n    \t@Autowired\r\n    \tprivate BasicAuthenticationPoint basicAuthenticationPoint;\r\n    \r\n    \t@Bean\r\n    \tpublic BCryptPasswordEncoder encoder() {\r\n    \t\treturn new BCryptPasswordEncoder();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tprotected void configure(HttpSecurity http) throws Exception {\r\n    \t\tHttpSecurity httpSec = http.csrf().disable();\r\n    \t\thttpSec = httpSec.authorizeRequests()\r\n    \t\t\t\t.antMatchers(&quot;/my-business-resources/**&quot;).hasRole(&quot;USER&quot;)\r\n    \t\t\t\t.antMatchers(&quot;/actuator/**&quot;).hasRole(&quot;ADMIN&quot;)\r\n    \t\t\t\t.and();\r\n    \t\thttpSec.httpBasic().authenticationEntryPoint(basicAuthenticationPoint).and()\r\n    \t\t.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\r\n    \t}\r\n    \r\n    \t@Autowired\r\n    \tpublic void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {\r\n    \t\t// Load users file\r\n    \t\tResource confFile = resourceLoader.getResource(&quot;classpath:users.list&quot;);\r\n    \t\t\r\n    \t\t// Returns users from the configuration file &lt;username, password (BCrypted), admin (boolean)&gt;\r\n    \t\tList&lt;ApiUser&gt; users = ApiUtils.getUsersFromFile(confFile);\r\n    \t\t\r\n    \t\tfor(ApiUser u : users){\r\n    \t\t\t// Add the username/password to the in-memory authentication manager\r\n    \t\t\tif (u.admin)\r\n    \t\t\t\tauth.inMemoryAuthentication().withUser(u.username).password(u.password).roles(&quot;USER&quot;, &quot;ADMIN&quot;);\r\n    \t\t\telse\r\n    \t\t\t\tauth.inMemoryAuthentication().withUser(u.username).password(u.password).roles(&quot;USER&quot;);\r\n    \r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nDid I miss something?\r\n\r\n**PS:** My Spring Boot application is packaged as a WAR and executed inside a Tomcat server for standardization purposes.\r\n\r\n**EDIT:**\r\n\r\nHere&#39;s the full UsernameNotFound stacktrace (ICS formatted):\r\n\r\n    Exception Details\r\n    Type:\tUsernameNotFoundException\r\n    Exception Class:\torg.springframework.security.core.userdetails.UsernameNotFoundException\r\n    API:\tException\r\n    Thread Name:\thttps-openssl-apr-9343-exec-10 &lt;522634598&gt;\r\n    \r\n    Exception StackTrace\r\n    Method\tClass\tLine\tFile Name\r\n    loadUserByUsername\torg.springframework.security.provisioning.InMemoryUserDetailsManager\t146\t&lt;unknown&gt;\r\n    retrieveUser\torg.springframework.security.authentication.dao.DaoAuthenticationProvider\t104\t&lt;unknown&gt;\r\n    authenticate\torg.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider\t144\t&lt;unknown&gt;\r\n    authenticate\torg.springframework.security.authentication.ProviderManager\t174\t&lt;unknown&gt;\r\n    authenticate\torg.springframework.security.authentication.ProviderManager\t199\t&lt;unknown&gt;\r\n    doFilterInternal\torg.springframework.security.web.authentication.www.BasicAuthenticationFilter\t180\t&lt;unknown&gt;\r\n    doFilter\torg.springframework.web.filter.OncePerRequestFilter\t107\t&lt;unknown&gt;\r\n    doFilter\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain\t334\t&lt;unknown&gt;\r\n    doFilter\torg.springframework.security.web.authentication.logout.LogoutFilter\t116\t&lt;unknown&gt;\r\n    doFilter\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain\t334\t&lt;unknown&gt;\r\n    doFilterInternal\torg.springframework.security.web.header.HeaderWriterFilter\t66\t&lt;unknown&gt;\r\n    doFilter\torg.springframework.web.filter.OncePerRequestFilter\t107\t&lt;unknown&gt;\r\n    doFilter\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain\t334\t&lt;unknown&gt;\r\n    doFilter\torg.springframework.security.web.context.SecurityContextPersistenceFilter\t105\t&lt;unknown&gt;\r\n    doFilter\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain\t334\t&lt;unknown&gt;\r\n    doFilterInternal\torg.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter\t56\t&lt;unknown&gt;\r\n    doFilter\torg.springframework.web.filter.OncePerRequestFilter\t107\t&lt;unknown&gt;\r\n    doFilter\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain\t334\t&lt;unknown&gt;\r\n    doFilterInternal\torg.springframework.security.web.FilterChainProxy\t215\t&lt;unknown&gt;\r\n    doFilter\torg.springframework.security.web.FilterChainProxy\t178\t&lt;unknown&gt;\r\n    invokeDelegate\torg.springframework.web.filter.DelegatingFilterProxy\t357\t&lt;unknown&gt;\r\n    doFilter\torg.springframework.web.filter.DelegatingFilterProxy\t270\t&lt;unknown&gt;\r\n    internalDoFilter\torg.apache.catalina.core.ApplicationFilterChain\t193\t&lt;unknown&gt;\r\n    doFilter\torg.apache.catalina.core.ApplicationFilterChain\t166\t&lt;unknown&gt;\r\n    doFilter\torg.springframework.boot.web.servlet.support.ErrorPageFilter\t130\t&lt;unknown&gt;\r\n    access$000\torg.springframework.boot.web.servlet.support.ErrorPageFilter\t66\t&lt;unknown&gt;\r\n    doFilterInternal\torg.springframework.boot.web.servlet.support.ErrorPageFilter$1\t105\t&lt;unknown&gt;\r\n    doFilter\torg.springframework.web.filter.OncePerRequestFilter\t107\t&lt;unknown&gt;\r\n    doFilter\torg.springframework.boot.web.servlet.support.ErrorPageFilter\t123\t&lt;unknown&gt;\r\n    internalDoFilter\torg.apache.catalina.core.ApplicationFilterChain\t193\t&lt;unknown&gt;\r\n    doFilter\torg.apache.catalina.core.ApplicationFilterChain\t166\t&lt;unknown&gt;\r\n    filterAndRecordMetrics\torg.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter\t155\t&lt;unknown&gt;\r\n    filterAndRecordMetrics\torg.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter\t123\t&lt;unknown&gt;\r\n    doFilterInternal\torg.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter\t108\t&lt;unknown&gt;\r\n    doFilter\torg.springframework.web.filter.OncePerRequestFilter\t107\t&lt;unknown&gt;\r\n    internalDoFilter\torg.apache.catalina.core.ApplicationFilterChain\t193\t&lt;unknown&gt;\r\n    doFilter\torg.apache.catalina.core.ApplicationFilterChain\t166\t&lt;unknown&gt;\r\n    doFilterInternal\torg.springframework.web.filter.CharacterEncodingFilter\t200\t&lt;unknown&gt;\r\n    doFilter\torg.springframework.web.filter.OncePerRequestFilter\t107\t&lt;unknown&gt;\r\n    internalDoFilter\torg.apache.catalina.core.ApplicationFilterChain\t193\t&lt;unknown&gt;\r\n\r\n","title":"Spring security - Errors causes performance issues","body":"<p>I'm facing an issue with a SpringBoot application. My ICS reports <strong>high response times</strong> on this API <strong>but my code metrics says it's all fine</strong>, for example a query which is sent to my API takes only 50ms to run the &quot;business&quot; code but the effective response takes more than 500ms !</p>\n<p>The internal logs of my JVM says that on each request, I have a &quot;<strong>UsernameNotFoundExcption</strong>&quot; even if credentials are correct and API works fine. That's why I think my problem comes from SpringSecurity layer but I can't identify the cause.</p>\n<p>My entry point:</p>\n<pre><code>@Component\npublic class BasicAuthenticationPoint extends BasicAuthenticationEntryPoint {\n    @Override\n    public void commence(HttpServletRequest request, HttpServletResponse response, AuthenticationException authEx)\n            throws IOException, ServletException {\n        response.addHeader(&quot;WWW-Authenticate&quot;, &quot;Basic realm=&quot; + getRealmName());\n        response.setStatus(HttpServletResponse.SC_UNAUTHORIZED);\n        response.setCharacterEncoding(&quot;utf-8&quot;);\n        PrintWriter writer = response.getWriter();\n        writer.println(&quot;HTTP Status 401 - &quot; + authEx.getMessage());\n    }\n\n    @Override\n    public void afterPropertiesSet() throws Exception {\n        setRealmName(&quot;MYAPI&quot;);\n        super.afterPropertiesSet();\n    }\n}\n</code></pre>\n<p>And my adapter:</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SpringSecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Autowired\n    private BasicAuthenticationPoint basicAuthenticationPoint;\n\n    @Bean\n    public BCryptPasswordEncoder encoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        HttpSecurity httpSec = http.csrf().disable();\n        httpSec = httpSec.authorizeRequests()\n                .antMatchers(&quot;/my-business-resources/**&quot;).hasRole(&quot;USER&quot;)\n                .antMatchers(&quot;/actuator/**&quot;).hasRole(&quot;ADMIN&quot;)\n                .and();\n        httpSec.httpBasic().authenticationEntryPoint(basicAuthenticationPoint).and()\n        .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\n    }\n\n    @Autowired\n    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {\n        // Load users file\n        Resource confFile = resourceLoader.getResource(&quot;classpath:users.list&quot;);\n        \n        // Returns users from the configuration file &lt;username, password (BCrypted), admin (boolean)&gt;\n        List&lt;ApiUser&gt; users = ApiUtils.getUsersFromFile(confFile);\n        \n        for(ApiUser u : users){\n            // Add the username/password to the in-memory authentication manager\n            if (u.admin)\n                auth.inMemoryAuthentication().withUser(u.username).password(u.password).roles(&quot;USER&quot;, &quot;ADMIN&quot;);\n            else\n                auth.inMemoryAuthentication().withUser(u.username).password(u.password).roles(&quot;USER&quot;);\n\n        }\n    }\n}\n</code></pre>\n<p>Did I miss something?</p>\n<p><strong>PS:</strong> My Spring Boot application is packaged as a WAR and executed inside a Tomcat server for standardization purposes.</p>\n<p><strong>EDIT:</strong></p>\n<p>Here's the full UsernameNotFound stacktrace (ICS formatted):</p>\n<pre><code>Exception Details\nType:   UsernameNotFoundException\nException Class:    org.springframework.security.core.userdetails.UsernameNotFoundException\nAPI:    Exception\nThread Name:    https-openssl-apr-9343-exec-10 &lt;522634598&gt;\n\nException StackTrace\nMethod  Class   Line    File Name\nloadUserByUsername  org.springframework.security.provisioning.InMemoryUserDetailsManager    146 &lt;unknown&gt;\nretrieveUser    org.springframework.security.authentication.dao.DaoAuthenticationProvider   104 &lt;unknown&gt;\nauthenticate    org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider   144 &lt;unknown&gt;\nauthenticate    org.springframework.security.authentication.ProviderManager 174 &lt;unknown&gt;\nauthenticate    org.springframework.security.authentication.ProviderManager 199 &lt;unknown&gt;\ndoFilterInternal    org.springframework.security.web.authentication.www.BasicAuthenticationFilter   180 &lt;unknown&gt;\ndoFilter    org.springframework.web.filter.OncePerRequestFilter 107 &lt;unknown&gt;\ndoFilter    org.springframework.security.web.FilterChainProxy$VirtualFilterChain    334 &lt;unknown&gt;\ndoFilter    org.springframework.security.web.authentication.logout.LogoutFilter 116 &lt;unknown&gt;\ndoFilter    org.springframework.security.web.FilterChainProxy$VirtualFilterChain    334 &lt;unknown&gt;\ndoFilterInternal    org.springframework.security.web.header.HeaderWriterFilter  66  &lt;unknown&gt;\ndoFilter    org.springframework.web.filter.OncePerRequestFilter 107 &lt;unknown&gt;\ndoFilter    org.springframework.security.web.FilterChainProxy$VirtualFilterChain    334 &lt;unknown&gt;\ndoFilter    org.springframework.security.web.context.SecurityContextPersistenceFilter   105 &lt;unknown&gt;\ndoFilter    org.springframework.security.web.FilterChainProxy$VirtualFilterChain    334 &lt;unknown&gt;\ndoFilterInternal    org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter 56  &lt;unknown&gt;\ndoFilter    org.springframework.web.filter.OncePerRequestFilter 107 &lt;unknown&gt;\ndoFilter    org.springframework.security.web.FilterChainProxy$VirtualFilterChain    334 &lt;unknown&gt;\ndoFilterInternal    org.springframework.security.web.FilterChainProxy   215 &lt;unknown&gt;\ndoFilter    org.springframework.security.web.FilterChainProxy   178 &lt;unknown&gt;\ninvokeDelegate  org.springframework.web.filter.DelegatingFilterProxy    357 &lt;unknown&gt;\ndoFilter    org.springframework.web.filter.DelegatingFilterProxy    270 &lt;unknown&gt;\ninternalDoFilter    org.apache.catalina.core.ApplicationFilterChain 193 &lt;unknown&gt;\ndoFilter    org.apache.catalina.core.ApplicationFilterChain 166 &lt;unknown&gt;\ndoFilter    org.springframework.boot.web.servlet.support.ErrorPageFilter    130 &lt;unknown&gt;\naccess$000  org.springframework.boot.web.servlet.support.ErrorPageFilter    66  &lt;unknown&gt;\ndoFilterInternal    org.springframework.boot.web.servlet.support.ErrorPageFilter$1  105 &lt;unknown&gt;\ndoFilter    org.springframework.web.filter.OncePerRequestFilter 107 &lt;unknown&gt;\ndoFilter    org.springframework.boot.web.servlet.support.ErrorPageFilter    123 &lt;unknown&gt;\ninternalDoFilter    org.apache.catalina.core.ApplicationFilterChain 193 &lt;unknown&gt;\ndoFilter    org.apache.catalina.core.ApplicationFilterChain 166 &lt;unknown&gt;\nfilterAndRecordMetrics  org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter    155 &lt;unknown&gt;\nfilterAndRecordMetrics  org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter    123 &lt;unknown&gt;\ndoFilterInternal    org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter    108 &lt;unknown&gt;\ndoFilter    org.springframework.web.filter.OncePerRequestFilter 107 &lt;unknown&gt;\ninternalDoFilter    org.apache.catalina.core.ApplicationFilterChain 193 &lt;unknown&gt;\ndoFilter    org.apache.catalina.core.ApplicationFilterChain 166 &lt;unknown&gt;\ndoFilterInternal    org.springframework.web.filter.CharacterEncodingFilter  200 &lt;unknown&gt;\ndoFilter    org.springframework.web.filter.OncePerRequestFilter 107 &lt;unknown&gt;\ninternalDoFilter    org.apache.catalina.core.ApplicationFilterChain 193 &lt;unknown&gt;\n</code></pre>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":3284439,"reputation":39734,"user_id":2764255,"accept_rate":50,"display_name":"Nikos Paraskevopoulos"},"score":1,"creation_date":1668693779,"post_id":74476426,"comment_id":131471944,"body_markdown":"Very interesting point. The Javadocs say nothing about it. But the stream, being not parallel, processes the items of the ordered list one-by-one. Then it puts them in the corresponding bucket which is a list too. It is reasonable to assume order is preserved. But, since it is not specified in contract, I would prefer to group-by first, and then sort the resulting lists individually.","body":"Very interesting point. The Javadocs say nothing about it. But the stream, being not parallel, processes the items of the ordered list one-by-one. Then it puts them in the corresponding bucket which is a list too. It is reasonable to assume order is preserved. But, since it is not specified in contract, I would prefer to group-by first, and then sort the resulting lists individually."},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1668694702,"post_id":74476426,"comment_id":131472372,"body_markdown":"@NikosParaskevopoulos the map used is probably a `HashMap`, which definitely does *not* preserve insertion order.","body":"@NikosParaskevopoulos the map used is probably a <code>HashMap</code>, which definitely does <i>not</i> preserve insertion order."},{"owner":{"account_id":23497752,"reputation":23,"user_id":17547980,"display_name":"Olliert"},"score":0,"creation_date":1669379583,"post_id":74476426,"comment_id":131634180,"body_markdown":"@RobSpoor I should clarify, the values in this map are themselves lists, and I am referring to the internal ordering of those lists.","body":"@RobSpoor I should clarify, the values in this map are themselves lists, and I am referring to the internal ordering of those lists."}],"answers":[{"tags":[],"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1668698021,"creation_date":1668698021,"answer_id":74477818,"question_id":74476426,"body_markdown":"The [`groupingBy(function)`][1] collector is a short-hand for `groupingBy(function, toList())`. While there are no guarantees about the order of the map entries, the lists collected by `toList()` will reflect the encounter order.\r\n\r\nWhile it is not spelled out explicitly, how the `groupingBy` collector affects the operation of the downstream collector regarding the order, there is a remark in [the documentation][1] about the difference to `groupingByConcurrent(Function)`:\r\n\r\n&gt; For parallel stream pipelines, the `combiner` function operates by merging the keys from one map into another, which can be an expensive operation. If preservation of the order in which elements appear in the resulting `Map` collector is not required, using `groupingByConcurrent(Function)` may offer better parallel performance.\r\n\r\nThis hints at the fact that the `groupingBy` collector will preserve the order if the downstream collector is not *unordered*, whereas the `groupingByConcurrent` collector will enforce *unordered* behavior, even if the downstream collector would otherwise retain the order, like `toList()`.\r\n\r\nSo the following program\r\n\r\n```java\r\npublic static void main(String[] args) {\r\n  System.out.println(isUnordered(Collectors.groupingBy(Function.identity())));\r\n  System.out.println(isUnordered(Collectors.groupingByConcurrent(Function.identity())));\r\n}\r\nstatic boolean isUnordered(Collector&lt;?, ?, ?&gt; c) {\r\n  return c.characteristics().contains(Collector.Characteristics.UNORDERED);\r\n}\r\n```\r\n\r\nwill print\r\n\r\n```none\r\nfalse\r\ntrue\r\n```\r\n\r\n---\r\n\r\nAs a reminder to those who didnt read carefully enough, were only talking about the order of the elements within the lists, not the order of the entries within the map.\r\n\r\nSo when we take the following program, for example\r\n\r\n```java\r\nMap&lt;Integer, List&lt;Integer&gt;&gt; m = IntStream.rangeClosed(0, 10).boxed()\r\n    .collect(Collectors.groupingBy(i -&gt; i % 2));\r\n\r\nSystem.out.println(m.keySet());\r\nSystem.out.println(m.get(0));\r\nSystem.out.println(m.get(1));\r\n```\r\n\r\nThere is no guaranty whether the first line will be `[0, 1]` or `[1, 0]`, as the maps order is unspecified, but we can be sure that the other two lines will be\r\n\r\n```none\r\n[0, 2, 4, 6, 8, 10]\r\n[1, 3, 5, 7, 9]\r\n```\r\nas the lists have a guaranteed order and `m.get(0)`/`m.get(1)` do not rely on the maps order.\r\n\r\n[1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collectors.html#groupingBy(java.util.function.Function)\r\n","title":"Does stream().groupingBy maintain sorted order for the resulting map value lists?","body":"<p>The <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collectors.html#groupingBy(java.util.function.Function)\" rel=\"nofollow noreferrer\"><code>groupingBy(function)</code></a> collector is a short-hand for <code>groupingBy(function, toList())</code>. While there are no guarantees about the order of the map entries, the lists collected by <code>toList()</code> will reflect the encounter order.</p>\n<p>While it is not spelled out explicitly, how the <code>groupingBy</code> collector affects the operation of the downstream collector regarding the order, there is a remark in <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collectors.html#groupingBy(java.util.function.Function)\" rel=\"nofollow noreferrer\">the documentation</a> about the difference to <code>groupingByConcurrent(Function)</code>:</p>\n<blockquote>\n<p>For parallel stream pipelines, the <code>combiner</code> function operates by merging the keys from one map into another, which can be an expensive operation. If preservation of the order in which elements appear in the resulting <code>Map</code> collector is not required, using <code>groupingByConcurrent(Function)</code> may offer better parallel performance.</p>\n</blockquote>\n<p>This hints at the fact that the <code>groupingBy</code> collector will preserve the order if the downstream collector is not <em>unordered</em>, whereas the <code>groupingByConcurrent</code> collector will enforce <em>unordered</em> behavior, even if the downstream collector would otherwise retain the order, like <code>toList()</code>.</p>\n<p>So the following program</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n  System.out.println(isUnordered(Collectors.groupingBy(Function.identity())));\n  System.out.println(isUnordered(Collectors.groupingByConcurrent(Function.identity())));\n}\nstatic boolean isUnordered(Collector&lt;?, ?, ?&gt; c) {\n  return c.characteristics().contains(Collector.Characteristics.UNORDERED);\n}\n</code></pre>\n<p>will print</p>\n<pre class=\"lang-none prettyprint-override\"><code>false\ntrue\n</code></pre>\n<hr />\n<p>As a reminder to those who didnt read carefully enough, were only talking about the order of the elements within the lists, not the order of the entries within the map.</p>\n<p>So when we take the following program, for example</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;Integer, List&lt;Integer&gt;&gt; m = IntStream.rangeClosed(0, 10).boxed()\n    .collect(Collectors.groupingBy(i -&gt; i % 2));\n\nSystem.out.println(m.keySet());\nSystem.out.println(m.get(0));\nSystem.out.println(m.get(1));\n</code></pre>\n<p>There is no guaranty whether the first line will be <code>[0, 1]</code> or <code>[1, 0]</code>, as the maps order is unspecified, but we can be sure that the other two lines will be</p>\n<pre class=\"lang-none prettyprint-override\"><code>[0, 2, 4, 6, 8, 10]\n[1, 3, 5, 7, 9]\n</code></pre>\n<p>as the lists have a guaranteed order and <code>m.get(0)</code>/<code>m.get(1)</code> do not rely on the maps order.</p>\n"}],"owner":{"account_id":23497752,"reputation":23,"user_id":17547980,"display_name":"Olliert"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":268,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":74477818,"answer_count":1,"score":2,"last_activity_date":1668698021,"creation_date":1668692256,"question_id":74476426,"body_markdown":"Say I have an ArrayList which I stream, then sort, then group by some attribute of the list values. Will the lists in the resulting map be internally sorted (i.e. maintain the ordering of the stream before it was grouped)?\r\n\r\nIn the [documentation](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#groupingBy-java.util.function.Function-java.util.stream.Collector-) it says groupingBy is not an unordered collector but I wasn&#39;t sure if the above is what that means. If not, what does ordered/unordered collector mean?\r\n\r\n```\r\n    arrayList.stream()\r\n        .sorted((o1, o2) -&gt; o1.compareTo(o2))\r\n        .collect(Collectors.groupingBy(o-&gt;o.getAttribute())\r\n```\r\n\r\n\r\n\r\nWhen I tried this gave me ordered lists but I need to be able to guarantee it will always result in ordered lists and wasn&#39;t sure if it would break with different input or when using multiple threads etc.","title":"Does stream().groupingBy maintain sorted order for the resulting map value lists?","body":"<p>Say I have an ArrayList which I stream, then sort, then group by some attribute of the list values. Will the lists in the resulting map be internally sorted (i.e. maintain the ordering of the stream before it was grouped)?</p>\n<p>In the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#groupingBy-java.util.function.Function-java.util.stream.Collector-\" rel=\"nofollow noreferrer\">documentation</a> it says groupingBy is not an unordered collector but I wasn't sure if the above is what that means. If not, what does ordered/unordered collector mean?</p>\n<pre><code>    arrayList.stream()\n        .sorted((o1, o2) -&gt; o1.compareTo(o2))\n        .collect(Collectors.groupingBy(o-&gt;o.getAttribute())\n</code></pre>\n<p>When I tried this gave me ordered lists but I need to be able to guarantee it will always result in ordered lists and wasn't sure if it would break with different input or when using multiple threads etc.</p>\n"},{"tags":["java","jframe","jlabel","imageicon"],"answers":[{"tags":[],"owner":{"account_id":13203350,"reputation":868,"user_id":9535950,"display_name":"Thomas Behr"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668696845,"creation_date":1668696845,"answer_id":74477515,"question_id":74477362,"body_markdown":"Try replacing `new ImageIcon(&quot;key2.png&quot;)` with\r\n```\r\nnew ImageIcon(Main.class.getResource(&quot;key2.png&quot;))\r\n```\r\nand make sure your `key2.png` image file is copied into the directory that contains the `Main.class` file before running your application.\r\n\r\n`Class.getResource` finds application resource files and should be used for files that are meant to be distributed with the application. See the [getResource API documentation](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html#getResource(java.lang.String)) for more details.","title":"Image not being added to panel - Java","body":"<p>Try replacing <code>new ImageIcon(&quot;key2.png&quot;)</code> with</p>\n<pre><code>new ImageIcon(Main.class.getResource(&quot;key2.png&quot;))\n</code></pre>\n<p>and make sure your <code>key2.png</code> image file is copied into the directory that contains the <code>Main.class</code> file before running your application.</p>\n<p><code>Class.getResource</code> finds application resource files and should be used for files that are meant to be distributed with the application. See the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html#getResource(java.lang.String)\" rel=\"nofollow noreferrer\">getResource API documentation</a> for more details.</p>\n"},{"tags":[],"owner":{"account_id":24849412,"reputation":66,"user_id":18726537,"display_name":"Kavya Kommuri"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668696990,"creation_date":1668696990,"answer_id":74477550,"question_id":74477362,"body_markdown":"Since you are using JPanel and working with spring try the below method which turns the image to a swing component. Hence it becomes subject to layout conditions like any other component:\r\n\r\n    BufferedImage myPicture = ImageIO.read(new File(&quot;path-to-file&quot;));\r\n    JLabel picLabel = new JLabel(new ImageIcon(myPicture));\r\n    add(picLabel);","title":"Image not being added to panel - Java","body":"<p>Since you are using JPanel and working with spring try the below method which turns the image to a swing component. Hence it becomes subject to layout conditions like any other component:</p>\n<pre><code>BufferedImage myPicture = ImageIO.read(new File(&quot;path-to-file&quot;));\nJLabel picLabel = new JLabel(new ImageIcon(myPicture));\nadd(picLabel);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14772731,"reputation":16,"user_id":10668679,"display_name":"TwoStone"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1668697640,"creation_date":1668697640,"answer_id":74477710,"question_id":74477362,"body_markdown":"You actually need to put the image into the Project folder. As the Program running directory is not the source directory.\r\nPut it into a subfolder like textures and reference it with the path like\r\n\r\n    ImageIcon icon = new ImageIcon(&quot;textures/key2.png&quot;);\r\n","title":"Image not being added to panel - Java","body":"<p>You actually need to put the image into the Project folder. As the Program running directory is not the source directory.\nPut it into a subfolder like textures and reference it with the path like</p>\n<pre><code>ImageIcon icon = new ImageIcon(&quot;textures/key2.png&quot;);\n</code></pre>\n"}],"owner":{"account_id":26786606,"reputation":23,"user_id":20380700,"display_name":"Bean"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74477710,"answer_count":3,"score":0,"last_activity_date":1668697640,"creation_date":1668696232,"question_id":74477362,"body_markdown":"I am trying to practice JLabel/JFrame and I am have trouble having my image &quot;key2.png&quot; appear.\r\nI am using Visual Studio Code and I have both my code and the image in the same src folder. \r\n\r\n`\r\n```\r\nimport javax.swing.ImageIcon;\r\nimport javax.swing.JFrame;\r\nimport java.awt.Color;\r\nimport javax.swing.JLabel;\r\nimport javax.swing.JPanel;\r\n\r\nclass Main {\r\n  public static void main(String[] args) {\r\n\r\n    ImageIcon icon = new ImageIcon(&quot;key2.png&quot;);\r\n\r\n    JLabel label = new JLabel();\r\n    label.setText(&quot;Hello&quot;);\r\n    label.setIcon(icon);\r\n\r\n    JPanel redPanel = new JPanel();\r\n    redPanel.setBackground(Color.red);\r\n    redPanel.setBounds(0, 0, 250, 250);\r\n\r\n    JPanel bluePanel = new JPanel();\r\n    bluePanel.setBackground(Color.blue);\r\n    bluePanel.setBounds(250, 0, 250, 250);\r\n\r\n    JPanel greenPanel = new JPanel();\r\n    greenPanel.setBackground(Color.green);\r\n    greenPanel.setBounds(0, 250, 500, 250);\r\n    \r\n    \r\n    MyFrame myFrame = new MyFrame();   //makes frame\r\n    myFrame.setLayout(null);  //disable defualt layout\r\n    myFrame.add(redPanel);\r\n    redPanel.add(label);   //add text and image to panel\r\n    myFrame.add(bluePanel);\r\n    myFrame.add(greenPanel);\r\n  }\r\n}\r\n```\r\n`\r\n\r\nOutput:\r\n[Output](https://i.stack.imgur.com/nh890.png)\r\n\r\nExpecting to see a black key image in the red panel.","title":"Image not being added to panel - Java","body":"<p>I am trying to practice JLabel/JFrame and I am have trouble having my image &quot;key2.png&quot; appear.\nI am using Visual Studio Code and I have both my code and the image in the same src folder.</p>\n<p>`</p>\n<pre><code>import javax.swing.ImageIcon;\nimport javax.swing.JFrame;\nimport java.awt.Color;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\n\nclass Main {\n  public static void main(String[] args) {\n\n    ImageIcon icon = new ImageIcon(&quot;key2.png&quot;);\n\n    JLabel label = new JLabel();\n    label.setText(&quot;Hello&quot;);\n    label.setIcon(icon);\n\n    JPanel redPanel = new JPanel();\n    redPanel.setBackground(Color.red);\n    redPanel.setBounds(0, 0, 250, 250);\n\n    JPanel bluePanel = new JPanel();\n    bluePanel.setBackground(Color.blue);\n    bluePanel.setBounds(250, 0, 250, 250);\n\n    JPanel greenPanel = new JPanel();\n    greenPanel.setBackground(Color.green);\n    greenPanel.setBounds(0, 250, 500, 250);\n    \n    \n    MyFrame myFrame = new MyFrame();   //makes frame\n    myFrame.setLayout(null);  //disable defualt layout\n    myFrame.add(redPanel);\n    redPanel.add(label);   //add text and image to panel\n    myFrame.add(bluePanel);\n    myFrame.add(greenPanel);\n  }\n}\n</code></pre>\n<p>`</p>\n<p>Output:\n<a href=\"https://i.stack.imgur.com/nh890.png\" rel=\"nofollow noreferrer\">Output</a></p>\n<p>Expecting to see a black key image in the red panel.</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":15486586,"reputation":106,"user_id":11185081,"display_name":"Manir Mahamat"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1668696192,"creation_date":1668696192,"answer_id":74477354,"question_id":74476781,"body_markdown":"Here are some steps to follow :\r\nWhat I did here is basic implementation because I did not consider if the User was authenticated or not.\r\n\r\n1- Add the following relation to the User entity\r\n\r\n    public class User {\r\n      /**\r\n        other attributes\r\n      **/\r\n\r\n     //relation with comment\r\n     @OneToMany(cascade = CascadeType.ALL,\r\n            fetch = FetchType.LAZY, orphanRemoval = true,\r\n            mappedBy = &quot;user&quot;)\r\n     private Set&lt;Comment&gt; comments;\r\n    }\r\n\r\n2- Then you should add the relation to the Comment entity also:\r\n\r\n     public class Comment {\r\n      /**\r\n       other attributes\r\n       **/\r\n\r\n      //relation with user\r\n      @ManyToOne()\r\n      @JoinColumn(name = &quot;user_id&quot;)\r\n      private User user;\r\n    }\r\n3- At the comment service just add userId as a parameter to your function\r\n\r\n     public class CommentService {\r\n     private CommentRepository commentRepository;\r\n     private UserRepository userRepository;\r\n     public Comment userPostComment(Comment comment, Long userId){\r\n        User user = userRepository.findById(userId).orElseThrow(\r\n                      () -&gt; new UsernameNotFoundException(&quot;User not found&quot;));\r\n        /**\r\n            set other attributes\r\n         **/\r\n        //add found user to the comment\r\n        comment.setUser(user);\r\n        return commentRepository.save(comment);\r\n    }\r\n\r\n\r\n4- Finally at your controller, you should give userId as a PathVariable\r\n\r\n     public class CommentController {\r\n     private CommentService commentService;\r\n\r\n     @PostMapping(&quot;/addComment/{userId}&quot;)\r\n     public ResponseEntity&lt;Comment&gt; addComment(@RequestBody Comment comment,\r\n                                              @PathVariable Long userId){\r\n        return new ResponseEntity&lt;&gt;(\r\n                             commentService.userPostComment(comment, userId), \r\n                             HttpStatus.CREATED);\r\n      }\r\n    }\r\n\r\n","title":"PostMapping passing Object with oneToMany relationship | Java spring-boot","body":"<p>Here are some steps to follow :\nWhat I did here is basic implementation because I did not consider if the User was authenticated or not.</p>\n<p>1- Add the following relation to the User entity</p>\n<pre><code>public class User {\n  /**\n    other attributes\n  **/\n\n //relation with comment\n @OneToMany(cascade = CascadeType.ALL,\n        fetch = FetchType.LAZY, orphanRemoval = true,\n        mappedBy = &quot;user&quot;)\n private Set&lt;Comment&gt; comments;\n}\n</code></pre>\n<p>2- Then you should add the relation to the Comment entity also:</p>\n<pre><code> public class Comment {\n  /**\n   other attributes\n   **/\n\n  //relation with user\n  @ManyToOne()\n  @JoinColumn(name = &quot;user_id&quot;)\n  private User user;\n}\n</code></pre>\n<p>3- At the comment service just add userId as a parameter to your function</p>\n<pre><code> public class CommentService {\n private CommentRepository commentRepository;\n private UserRepository userRepository;\n public Comment userPostComment(Comment comment, Long userId){\n    User user = userRepository.findById(userId).orElseThrow(\n                  () -&gt; new UsernameNotFoundException(&quot;User not found&quot;));\n    /**\n        set other attributes\n     **/\n    //add found user to the comment\n    comment.setUser(user);\n    return commentRepository.save(comment);\n}\n</code></pre>\n<p>4- Finally at your controller, you should give userId as a PathVariable</p>\n<pre><code> public class CommentController {\n private CommentService commentService;\n\n @PostMapping(&quot;/addComment/{userId}&quot;)\n public ResponseEntity&lt;Comment&gt; addComment(@RequestBody Comment comment,\n                                          @PathVariable Long userId){\n    return new ResponseEntity&lt;&gt;(\n                         commentService.userPostComment(comment, userId), \n                         HttpStatus.CREATED);\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20014169,"reputation":1,"user_id":19045480,"display_name":"Verduttio"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668696230,"creation_date":1668696230,"answer_id":74477360,"question_id":74476781,"body_markdown":"One of the solutions is to create a CommentRequest class\r\n```\r\npublic class CommentRequest {\r\n   private String message;\r\n   private int userId;\r\n\r\n   getters, setters\r\n\r\n}\r\n```\r\n\r\n\r\nThen in the CommentController you should change the method to:\r\n\r\n    @PostMapping\r\n    public void createComment(@RequestBody CommentRequest commentRequest) {\r\n        commentService.createComment(commentRequest);\r\n    }\r\n\r\nAnd also in the CommentService:\r\n```\r\npublic void createComment(CommentRequest commentRequest) {\r\n        if(!userRepository.existsById(commentRequest.getUserId())) {\r\n            throw new UserNotFoundException(&quot;Writer does not exist&quot;);\r\n        }\r\n        User user = userRepository.getById(commentRequest.getUserId());\r\n        commentRepository.save(new Comment(commentRequest.getMessage(), user));\r\n    }\r\n```\r\n","title":"PostMapping passing Object with oneToMany relationship | Java spring-boot","body":"<p>One of the solutions is to create a CommentRequest class</p>\n<pre><code>public class CommentRequest {\n   private String message;\n   private int userId;\n\n   getters, setters\n\n}\n</code></pre>\n<p>Then in the CommentController you should change the method to:</p>\n<pre><code>@PostMapping\npublic void createComment(@RequestBody CommentRequest commentRequest) {\n    commentService.createComment(commentRequest);\n}\n</code></pre>\n<p>And also in the CommentService:</p>\n<pre><code>public void createComment(CommentRequest commentRequest) {\n        if(!userRepository.existsById(commentRequest.getUserId())) {\n            throw new UserNotFoundException(&quot;Writer does not exist&quot;);\n        }\n        User user = userRepository.getById(commentRequest.getUserId());\n        commentRepository.save(new Comment(commentRequest.getMessage(), user));\n    }\n</code></pre>\n"}],"owner":{"account_id":22749514,"reputation":123,"user_id":16909865,"display_name":"Leon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":512,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74477354,"answer_count":2,"score":0,"last_activity_date":1668697635,"creation_date":1668693716,"question_id":74476781,"body_markdown":"I am new to spring boot. \r\nI have a class Comment which has a oneToMany relationship to the class User.\r\nNow I want to create a Comment with a post request. But how can I pass only the userId of the user who writes the comment? So I can save this Object to the database. \r\n\r\nI hope somebody could help me with this. I would appreciate it. \r\n\r\nPost Request:\r\n```\r\n{\r\n    &quot;message&quot;: &quot;This is a message&quot;,\r\n    &quot;writer_id&quot;: 1\r\n}\r\n```\r\n\r\n## User ##\r\n```\r\n@Entity\r\n@Table(name=&quot;tbl_users&quot;)\r\npublic class User {\r\n\t\r\n\t@Id\r\n\t@GeneratedValue(\r\n\t\t\tstrategy = GenerationType.AUTO,\r\n\t\t\tgenerator = &quot;user_sequence&quot;\r\n\t\t\t)\r\n\t@SequenceGenerator(\r\n\t\t\tname = &quot;user_sequence&quot;,\r\n\t\t\tallocationSize = 1,\r\n\t\t\tsequenceName = &quot;user_sequence&quot;\r\n\t\t\t)\r\n\tprivate Long id;\r\n\tprivate String name;\r\n\tpublic User(String name) {\r\n\t\tthis.name = name;\r\n\t}\r\n\tpublic User(Long id, String name) {\r\n\t\tthis.id = id;\r\n\t\tthis.name = name;\r\n\t}\r\n\tpublic User() {\r\n\t}\r\n    \r\n    getter, setter ...\r\n```\r\n\r\n## Comment ##\r\n```\r\n@Entity\r\n@Table(name=&quot;tbl_comments&quot;)\r\npublic class Comment {\r\n\t\r\n\t@Id\r\n\t@GeneratedValue(\r\n\t\t\tstrategy = GenerationType.AUTO,\r\n\t\t\tgenerator = &quot;comment_sequence&quot;\r\n\t\t\t)\r\n\t@SequenceGenerator(\r\n\t\t\tname = &quot;comment_sequence&quot;,\r\n\t\t\tallocationSize = 1,\r\n\t\t\tsequenceName = &quot;comment_sequence&quot;\r\n\t\t\t)\r\n\tprivate Long id;\r\n\tprivate String message;\r\n\t@ManyToOne\r\n\t@JoinColumn(name=&quot;user_id&quot;, nullable=false)\r\n\tprivate User writer;\r\n\t\r\n\tpublic Comment(String message, User writer) {\r\n\t\tthis.message = message;\r\n\t\tthis.writer = writer;\r\n\t}\r\n\r\n\tpublic Comment(Long id, String message, User writer) {\r\n\t\tthis.id = id;\r\n\t\tthis.message = message;\r\n\t\tthis.writer = writer;\r\n\t}\r\n\r\n\tpublic Comment() {\r\n\t}\r\n\r\n    getter, setter...\r\n```\r\n\r\n## CommentController ##\r\n```\r\n@PostMapping\r\n\tpublic void createComment(@RequestBody Comment comment) {\r\n\t\tcommentService.createComment(comment);\r\n\t}\r\n```\r\n\r\n## CommentService ##\r\n```\r\npublic void createComment(Comment comment) {\r\n\t\tif(!userRepository.existsById(comment.getWriter().getId())) {\r\n\t\t\tthrow new UserNotFoundException(&quot;Writer does not exist&quot;);\r\n\t\t}\r\n\t\tcommentRepository.save(comment);\r\n\t}\r\n```","title":"PostMapping passing Object with oneToMany relationship | Java spring-boot","body":"<p>I am new to spring boot.\nI have a class Comment which has a oneToMany relationship to the class User.\nNow I want to create a Comment with a post request. But how can I pass only the userId of the user who writes the comment? So I can save this Object to the database.</p>\n<p>I hope somebody could help me with this. I would appreciate it.</p>\n<p>Post Request:</p>\n<pre><code>{\n    &quot;message&quot;: &quot;This is a message&quot;,\n    &quot;writer_id&quot;: 1\n}\n</code></pre>\n<h2>User</h2>\n<pre><code>@Entity\n@Table(name=&quot;tbl_users&quot;)\npublic class User {\n    \n    @Id\n    @GeneratedValue(\n            strategy = GenerationType.AUTO,\n            generator = &quot;user_sequence&quot;\n            )\n    @SequenceGenerator(\n            name = &quot;user_sequence&quot;,\n            allocationSize = 1,\n            sequenceName = &quot;user_sequence&quot;\n            )\n    private Long id;\n    private String name;\n    public User(String name) {\n        this.name = name;\n    }\n    public User(Long id, String name) {\n        this.id = id;\n        this.name = name;\n    }\n    public User() {\n    }\n    \n    getter, setter ...\n</code></pre>\n<h2>Comment</h2>\n<pre><code>@Entity\n@Table(name=&quot;tbl_comments&quot;)\npublic class Comment {\n    \n    @Id\n    @GeneratedValue(\n            strategy = GenerationType.AUTO,\n            generator = &quot;comment_sequence&quot;\n            )\n    @SequenceGenerator(\n            name = &quot;comment_sequence&quot;,\n            allocationSize = 1,\n            sequenceName = &quot;comment_sequence&quot;\n            )\n    private Long id;\n    private String message;\n    @ManyToOne\n    @JoinColumn(name=&quot;user_id&quot;, nullable=false)\n    private User writer;\n    \n    public Comment(String message, User writer) {\n        this.message = message;\n        this.writer = writer;\n    }\n\n    public Comment(Long id, String message, User writer) {\n        this.id = id;\n        this.message = message;\n        this.writer = writer;\n    }\n\n    public Comment() {\n    }\n\n    getter, setter...\n</code></pre>\n<h2>CommentController</h2>\n<pre><code>@PostMapping\n    public void createComment(@RequestBody Comment comment) {\n        commentService.createComment(comment);\n    }\n</code></pre>\n<h2>CommentService</h2>\n<pre><code>public void createComment(Comment comment) {\n        if(!userRepository.existsById(comment.getWriter().getId())) {\n            throw new UserNotFoundException(&quot;Writer does not exist&quot;);\n        }\n        commentRepository.save(comment);\n    }\n</code></pre>\n"},{"tags":["java","android","telecom-manager"],"comments":[{"owner":{"account_id":20029443,"reputation":297,"user_id":14682570,"display_name":"Dev007"},"score":0,"creation_date":1668536666,"post_id":74449902,"comment_id":131427910,"body_markdown":"I think there is a full working code example you can refer and create your own from here https://github.com/SimpleMobileTools/Simple-Dialer","body":"I think there is a full working code example you can refer and create your own from here <a href=\"https://github.com/SimpleMobileTools/Simple-Dialer\" rel=\"nofollow noreferrer\">github.com/SimpleMobileTools/Simple-Dialer</a>"},{"owner":{"account_id":20029443,"reputation":297,"user_id":14682570,"display_name":"Dev007"},"score":0,"creation_date":1668537025,"post_id":74449902,"comment_id":131428045,"body_markdown":"Appreciated @Gabe answer. Meanwhile in your code you have to add that check once you got any result code. it should be call with startResultForActivity or ResultContracts.","body":"Appreciated @Gabe answer. Meanwhile in your code you have to add that check once you got any result code. it should be call with startResultForActivity or ResultContracts."}],"answers":[{"comments":[{"owner":{"account_id":25450221,"reputation":17,"user_id":19251775,"display_name":"Jacob Z"},"score":0,"creation_date":1668540443,"post_id":74450473,"comment_id":131429129,"body_markdown":"How do I go about waiting for the response? I&#39;m very new to android so sorry if that&#39;s an obvious question. The tutorial has &quot;startActivityForResponse&quot;, but that function is depreciated.","body":"How do I go about waiting for the response? I&#39;m very new to android so sorry if that&#39;s an obvious question. The tutorial has &quot;startActivityForResponse&quot;, but that function is depreciated."},{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":0,"creation_date":1668541076,"post_id":74450473,"comment_id":131429291,"body_markdown":"startActivityForResult is the older way of doing it.  The newer way is registerForActivityResult","body":"startActivityForResult is the older way of doing it.  The newer way is registerForActivityResult"},{"owner":{"account_id":25450221,"reputation":17,"user_id":19251775,"display_name":"Jacob Z"},"score":0,"creation_date":1668542144,"post_id":74450473,"comment_id":131429611,"body_markdown":"The function is basically the same right? I&#39;m getting a &quot;cannot resolve symbol REQUEST_CODE_SET_DEFAULT_DIALER&quot; when I use registerForActivityResult((new Intent(TelecomManager.ACTION_CHANGE_DEFAULT_DIALER).putExtra(TelecomManager.EXTRA_CHANGE_DEFAULT_DIALER_PACKAGE_NAME,getPackageName())),REQUEST_CODE_SET_DEFAULT_DIALER); Has that request code also been deprecated?","body":"The function is basically the same right? I&#39;m getting a &quot;cannot resolve symbol REQUEST_CODE_SET_DEFAULT_DIALER&quot; when I use registerForActivityResult((new Intent(TelecomManager.ACTION_CHANGE_DEFAULT_DIALER).putExtra&zwnj;&#8203;(TelecomManager.EXTR&zwnj;&#8203;A_CHANGE_DEFAULT_DIA&zwnj;&#8203;LER_PACKAGE_NAME,get&zwnj;&#8203;PackageName())),REQU&zwnj;&#8203;EST_CODE_SET_DEFAULT&zwnj;&#8203;_DIALER); Has that request code also been deprecated?"}],"tags":[],"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1668536330,"creation_date":1668536330,"answer_id":74450473,"question_id":74449902,"body_markdown":"Intents are asynchronous.  If you start an activity to do something, you have to wait for that intent to finish before using the results of it.  You&#39;re instead immediately querying for the default dialer package.  That will always fail, because it wouldn&#39;t even have shown the picker on screen yet.","title":"How do you change the default dialer package in android studio?","body":"<p>Intents are asynchronous.  If you start an activity to do something, you have to wait for that intent to finish before using the results of it.  You're instead immediately querying for the default dialer package.  That will always fail, because it wouldn't even have shown the picker on screen yet.</p>\n"}],"owner":{"account_id":25450221,"reputation":17,"user_id":19251775,"display_name":"Jacob Z"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":309,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1668697167,"creation_date":1668533531,"question_id":74449902,"body_markdown":"I&#39;m currently trying to change the default dialer package of the machine to my application. When running the code that is supposed to change it, however, it results in the default dialer package retaining a value of NULL. This is loosely following the guide [here][1], but some of it is deprecated so I&#39;ve had to make some adjustments. \r\n\r\nEDIT: has REQUEST_CODE_DEFAULT_DIALER been changed somehow? I can&#39;t find it referenced anywhere other than outdated tutorials on how to do this, so I&#39;m not sure what it would even have been changed to. I&#39;m getting a &quot;cannot resolve symbol&quot; error whenever I try to use it. \r\n\r\n\r\n\r\n\r\n\r\nI&#39;ve included the following under the relevant activity in my AndroidManifest.xml:\r\n\r\n```\r\n&lt;intent-filter&gt;\r\n    &lt;action android:name=&quot;android.intent.action.DIAL&quot; /&gt;\r\n    &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\r\n&lt;/intent-filter&gt;\r\n&lt;intent-filter&gt;\r\n    &lt;action android:name=&quot;android.intent.action.DIAL&quot; /&gt;\r\n    &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\r\n    &lt;data android:scheme = &quot;tel&quot;/&gt;\r\n&lt;/intent-filter&gt;\r\n```\r\n\r\nThe following code executes the package change and then prints its value to logcat so I can see what happens: \r\n\r\n```\r\nLog.i(&quot;Before&quot;, &quot;Before default dialer change&quot;);\r\nstartActivity(new Intent(TelecomManager.ACTION_CHANGE_DEFAULT_DIALER).putExtra(TelecomManager.EXTRA_CHANGE_DEFAULT_DIALER_PACKAGE_NAME,getPackageName()));\r\nTelecomManager telecomManager = ((TelecomManager) getSystemService(Context.TELECOM_SERVICE));\r\nif(telecomManager.getDefaultDialerPackage() == null) {\r\n    Log.i(&quot;Default dialer package:&quot;, &quot;NULL&quot;);\r\n} else {\r\n    Log.i(&quot;Default Dialer Package:&quot;, telecomManager.getDefaultDialerPackage());\r\n\r\n}\r\n```\r\nI&#39;m getting &quot;Default&#160;dialer&#160;package:: NULL&quot; in logcat every time I try this. \r\n\r\n\r\n  [1]: https://www.gsrikar.com/2019/02/set-android-app-default-dialer.html","title":"How do you change the default dialer package in android studio?","body":"<p>I'm currently trying to change the default dialer package of the machine to my application. When running the code that is supposed to change it, however, it results in the default dialer package retaining a value of NULL. This is loosely following the guide <a href=\"https://www.gsrikar.com/2019/02/set-android-app-default-dialer.html\" rel=\"nofollow noreferrer\">here</a>, but some of it is deprecated so I've had to make some adjustments.</p>\n<p>EDIT: has REQUEST_CODE_DEFAULT_DIALER been changed somehow? I can't find it referenced anywhere other than outdated tutorials on how to do this, so I'm not sure what it would even have been changed to. I'm getting a &quot;cannot resolve symbol&quot; error whenever I try to use it.</p>\n<p>I've included the following under the relevant activity in my AndroidManifest.xml:</p>\n<pre><code>&lt;intent-filter&gt;\n    &lt;action android:name=&quot;android.intent.action.DIAL&quot; /&gt;\n    &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\n&lt;/intent-filter&gt;\n&lt;intent-filter&gt;\n    &lt;action android:name=&quot;android.intent.action.DIAL&quot; /&gt;\n    &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\n    &lt;data android:scheme = &quot;tel&quot;/&gt;\n&lt;/intent-filter&gt;\n</code></pre>\n<p>The following code executes the package change and then prints its value to logcat so I can see what happens:</p>\n<pre><code>Log.i(&quot;Before&quot;, &quot;Before default dialer change&quot;);\nstartActivity(new Intent(TelecomManager.ACTION_CHANGE_DEFAULT_DIALER).putExtra(TelecomManager.EXTRA_CHANGE_DEFAULT_DIALER_PACKAGE_NAME,getPackageName()));\nTelecomManager telecomManager = ((TelecomManager) getSystemService(Context.TELECOM_SERVICE));\nif(telecomManager.getDefaultDialerPackage() == null) {\n    Log.i(&quot;Default dialer package:&quot;, &quot;NULL&quot;);\n} else {\n    Log.i(&quot;Default Dialer Package:&quot;, telecomManager.getDefaultDialerPackage());\n\n}\n</code></pre>\n<p>I'm getting &quot;Defaultdialerpackage:: NULL&quot; in logcat every time I try this.</p>\n"},{"tags":["java","spring","jpa","spring-data-jpa"],"answers":[{"comments":[{"owner":{"account_id":20705572,"reputation":401,"user_id":17565149,"display_name":"DJ Freeman"},"score":0,"creation_date":1668681672,"post_id":74473336,"comment_id":131467297,"body_markdown":"Oh okey it is really that simple! Thank you!","body":"Oh okey it is really that simple! Thank you!"}],"tags":[],"owner":{"account_id":25822,"reputation":78757,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1668696927,"creation_date":1668678674,"answer_id":74473336,"question_id":74473266,"body_markdown":"The difference is literally the `Is` part. Functionally they are the same.\r\n\r\nYou can find this information in https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repository-query-keywords\r\n\r\nOr if you prefer the [source code you should take a look at org.springframework.data.repository.query.parser.Part.Type][1]\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-data-commons/blob/1f1c34b4238f74263d02169a8b71b612c2e4e16b/src/main/java/org/springframework/data/repository/query/parser/Part.java#L175","title":"What is the difference between DateGreaterThanEqual and DateIsGreaterThanEqual in JPA Repository?","body":"<p>The difference is literally the <code>Is</code> part. Functionally they are the same.</p>\n<p>You can find this information in <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repository-query-keywords\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repository-query-keywords</a></p>\n<p>Or if you prefer the <a href=\"https://github.com/spring-projects/spring-data-commons/blob/1f1c34b4238f74263d02169a8b71b612c2e4e16b/src/main/java/org/springframework/data/repository/query/parser/Part.java#L175\" rel=\"nofollow noreferrer\">source code you should take a look at org.springframework.data.repository.query.parser.Part.Type</a></p>\n"}],"owner":{"account_id":20705572,"reputation":401,"user_id":17565149,"display_name":"DJ Freeman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74473336,"answer_count":1,"score":1,"last_activity_date":1668696927,"creation_date":1668678418,"question_id":74473266,"body_markdown":"I&#39;m trying to get all the Reservations for a user with username that are after the current date or equal the current date\r\n\r\nDo I need to use:\r\n\r\n```\r\nList&lt;Reservation&gt; findReservationsByUsernameAndDateGreaterThanEqual(String username, Date date);\r\n```\r\nOR\r\n```\r\nList&lt;Reservation&gt; findReservationsByUsernameAndDateIsGreaterThanEqual(String username, Date date);\r\n```\r\n\r\nWhat is the difference between them?","title":"What is the difference between DateGreaterThanEqual and DateIsGreaterThanEqual in JPA Repository?","body":"<p>I'm trying to get all the Reservations for a user with username that are after the current date or equal the current date</p>\n<p>Do I need to use:</p>\n<pre><code>List&lt;Reservation&gt; findReservationsByUsernameAndDateGreaterThanEqual(String username, Date date);\n</code></pre>\n<p>OR</p>\n<pre><code>List&lt;Reservation&gt; findReservationsByUsernameAndDateIsGreaterThanEqual(String username, Date date);\n</code></pre>\n<p>What is the difference between them?</p>\n"},{"tags":["java","android","vibration"],"comments":[{"owner":{"account_id":5170464,"reputation":857,"user_id":4139138,"accept_rate":20,"display_name":"Mike"},"score":0,"creation_date":1424326535,"post_id":28599455,"comment_id":45505429,"body_markdown":"Check With `Log` if your `else if` is called. Or maybe something different handles the motion up event therefore your onTouchListener on uour button won&#39;t receive the event. Also check which int you get from action when releasing your finger from the screen","body":"Check With <code>Log</code> if your <code>else if</code> is called. Or maybe something different handles the motion up event therefore your onTouchListener on uour button won&#39;t receive the event. Also check which int you get from action when releasing your finger from the screen"},{"owner":{"account_id":5738914,"reputation":61,"user_id":4532165,"accept_rate":56,"display_name":"Aleem Ahmed"},"score":0,"creation_date":1424723499,"post_id":28599455,"comment_id":45658511,"body_markdown":"Thankyou so much bro (yshahak). looking forward for your more support in the comming future.","body":"Thankyou so much bro (yshahak). looking forward for your more support in the comming future."}],"answers":[{"comments":[{"owner":{"account_id":4054044,"reputation":5026,"user_id":3332634,"display_name":"yshahak"},"score":0,"creation_date":1424337236,"post_id":28600721,"comment_id":45510026,"body_markdown":"Please insert Log.i(&quot;event&quot;, event.toString()); below int action, to check execution flow.","body":"Please insert Log.i(&quot;event&quot;, event.toString()); below int action, to check execution flow."},{"owner":{"account_id":4054044,"reputation":5026,"user_id":3332634,"display_name":"yshahak"},"score":0,"creation_date":1424338959,"post_id":28600721,"comment_id":45511069,"body_markdown":"I think I figured it for you. Try the corrected code in my answear.","body":"I think I figured it for you. Try the corrected code in my answear."},{"owner":{"account_id":1674650,"reputation":5804,"user_id":1540456,"accept_rate":64,"display_name":"Atlas91"},"score":0,"creation_date":1424339051,"post_id":28600721,"comment_id":45511127,"body_markdown":"You need a pattern as @yshahak wrote.","body":"You need a pattern as @yshahak wrote."}],"tags":[],"owner":{"account_id":4054044,"reputation":5026,"user_id":3332634,"display_name":"yshahak"},"comment_count":3,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1424338922,"creation_date":1424330758,"answer_id":28600721,"question_id":28599455,"body_markdown":"**EDIT**: corrected code:\r\n\r\ntry this:\r\n\r\n    int action = event.getActionMasked();\r\n\r\n    if (action == MotionEvent.ACTION_DOWN) {\r\n        long[] pattern = { 0, 200, 0 }; //0 to start now, 200 to vibrate 200 ms, 0 to sleep for 0 ms.\r\n        vibrator.vibrate(pattern, 0); // 0 to repeat endlessly.\r\n    } else if (action == MotionEvent.ACTION_UP || action == MotionEvent.ACTION_CANCEL) {\r\n        vibrator.cancel();\r\n    }    ","title":"Vibrate until the button is pressed and stops vibrating when the button is unpressed (or the finger is taken off)","body":"<p><strong>EDIT</strong>: corrected code:</p>\n\n<p>try this:</p>\n\n<pre><code>int action = event.getActionMasked();\n\nif (action == MotionEvent.ACTION_DOWN) {\n    long[] pattern = { 0, 200, 0 }; //0 to start now, 200 to vibrate 200 ms, 0 to sleep for 0 ms.\n    vibrator.vibrate(pattern, 0); // 0 to repeat endlessly.\n} else if (action == MotionEvent.ACTION_UP || action == MotionEvent.ACTION_CANCEL) {\n    vibrator.cancel();\n}    \n</code></pre>\n"}],"owner":{"account_id":5738914,"reputation":61,"user_id":4532165,"accept_rate":56,"display_name":"Aleem Ahmed"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2819,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":28600721,"answer_count":1,"score":2,"last_activity_date":1668696688,"creation_date":1424324979,"question_id":28599455,"body_markdown":"I am planning to program a button in such a way that when the button is pressed, vibration starts and keeps on vibrating until the finger is up or button is unpressed.\r\n\r\nI am using OnTouchListener for this purpose.\r\n\r\nMy code is as follows:\r\n\r\n    package com.example.vibrator;\r\n    \r\n    import android.app.Activity;\r\n    import android.os.Bundle;\r\n    import android.os.Vibrator;\r\n    import android.view.MotionEvent;\r\n    import android.view.View;\r\n    import android.view.View.OnTouchListener;\r\n    import android.widget.Button;\r\n    \r\n    public class MainActivity extends Activity {\r\n    \r\n    \t@Override\r\n    \tprotected void onCreate(Bundle savedInstanceState) {\r\n    \t\tsuper.onCreate(savedInstanceState);\r\n    \t\tsetContentView(R.layout.activity_main);\r\n    \r\n    \t\tfinal Vibrator vibrator;\r\n    \r\n    \t\tvibrator = (Vibrator) getSystemService(MainActivity.VIBRATOR_SERVICE);\r\n    \r\n    \t\tButton btn = (Button) findViewById(R.id.button1);\r\n    \t\tbtn.setOnTouchListener(new OnTouchListener() {\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic boolean onTouch(View v, MotionEvent event) {\r\n    \t\t\t\tint action = event.getAction();\r\n    \r\n    \t\t\t\tif (action == MotionEvent.ACTION_DOWN) {\r\n    \t\t\t\t\tvibrator.vibrate(60000);\r\n    \t\t\t\t} else if (action == MotionEvent.ACTION_UP) {\r\n    \t\t\t\t\tvibrator.cancel();\r\n    \t\t\t\t}\r\n    \r\n    \t\t\t\treturn true;\r\n    \t\t\t}\r\n    \t\t});\r\n    \t}\r\n    }\r\n\r\n\r\nThe problem in this code is that it keeps on vibrating and when the finger is up, the vibration does not stop nor cancelled.\r\n\r\nP.S. I have used the permission in manifest.\r\n","title":"Vibrate until the button is pressed and stops vibrating when the button is unpressed (or the finger is taken off)","body":"<p>I am planning to program a button in such a way that when the button is pressed, vibration starts and keeps on vibrating until the finger is up or button is unpressed.</p>\n<p>I am using OnTouchListener for this purpose.</p>\n<p>My code is as follows:</p>\n<pre><code>package com.example.vibrator;\n\nimport android.app.Activity;\nimport android.os.Bundle;\nimport android.os.Vibrator;\nimport android.view.MotionEvent;\nimport android.view.View;\nimport android.view.View.OnTouchListener;\nimport android.widget.Button;\n\npublic class MainActivity extends Activity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        final Vibrator vibrator;\n\n        vibrator = (Vibrator) getSystemService(MainActivity.VIBRATOR_SERVICE);\n\n        Button btn = (Button) findViewById(R.id.button1);\n        btn.setOnTouchListener(new OnTouchListener() {\n\n            @Override\n            public boolean onTouch(View v, MotionEvent event) {\n                int action = event.getAction();\n\n                if (action == MotionEvent.ACTION_DOWN) {\n                    vibrator.vibrate(60000);\n                } else if (action == MotionEvent.ACTION_UP) {\n                    vibrator.cancel();\n                }\n\n                return true;\n            }\n        });\n    }\n}\n</code></pre>\n<p>The problem in this code is that it keeps on vibrating and when the finger is up, the vibration does not stop nor cancelled.</p>\n<p>P.S. I have used the permission in manifest.</p>\n"},{"tags":["java","libgdx","game-ai"],"comments":[{"owner":{"account_id":3281797,"reputation":323,"user_id":2762231,"accept_rate":80,"display_name":"therainycat"},"score":0,"creation_date":1668220734,"post_id":74393188,"comment_id":131359523,"body_markdown":"Just my first thoughts: use dot product and check `dist` to adjust the magnitude of your force, or simply turn off the wandering if enemy travels too far away and re-enable it when `dist` becomes small enough again","body":"Just my first thoughts: use dot product and check <code>dist</code> to adjust the magnitude of your force, or simply turn off the wandering if enemy travels too far away and re-enable it when <code>dist</code> becomes small enough again"},{"owner":{"account_id":6450014,"reputation":11895,"user_id":4997239,"accept_rate":61,"display_name":"Hasen"},"score":0,"creation_date":1668376838,"post_id":74393188,"comment_id":131384421,"body_markdown":"@therainycat But if you just adjust the magnitude when he walks too far away, he&#39;ll just get slower or stop and just sit there....same with disabling wandering, he&#39;ll just stop and sit there doing nothing..I need him to return back towards to the spawn point to a certain extent. He wanders out, then if he wanders out too far he&#39;ll turn and wander back in some.","body":"@therainycat But if you just adjust the magnitude when he walks too far away, he&#39;ll just get slower or stop and just sit there....same with disabling wandering, he&#39;ll just stop and sit there doing nothing..I need him to return back towards to the spawn point to a certain extent. He wanders out, then if he wanders out too far he&#39;ll turn and wander back in some."},{"owner":{"account_id":3281797,"reputation":323,"user_id":2762231,"accept_rate":80,"display_name":"therainycat"},"score":0,"creation_date":1668392721,"post_id":74393188,"comment_id":131386704,"body_markdown":"So it seems you need the second solution - remove &quot;wander&quot; and add &quot;go back home&quot;, then when an enemy is close enough - do exactly opposite","body":"So it seems you need the second solution - remove &quot;wander&quot; and add &quot;go back home&quot;, then when an enemy is close enough - do exactly opposite"},{"owner":{"account_id":6450014,"reputation":11895,"user_id":4997239,"accept_rate":61,"display_name":"Hasen"},"score":0,"creation_date":1668690532,"post_id":74393188,"comment_id":131470530,"body_markdown":"@therainycat No because then he&#39;ll wander out and then walk directly home, it won&#39;t look natural. When you &#39;wander&#39; you also wander back so you take time to turn around before heading back. A complete reversal won&#39;t look like that.","body":"@therainycat No because then he&#39;ll wander out and then walk directly home, it won&#39;t look natural. When you &#39;wander&#39; you also wander back so you take time to turn around before heading back. A complete reversal won&#39;t look like that."}],"answers":[{"comments":[{"owner":{"account_id":6450014,"reputation":11895,"user_id":4997239,"accept_rate":61,"display_name":"Hasen"},"score":0,"creation_date":1668690444,"post_id":74436035,"comment_id":131470495,"body_markdown":"You should add some code or pseudo code to clarify your suggestion.","body":"You should add some code or pseudo code to clarify your suggestion."},{"owner":{"account_id":422872,"reputation":656,"user_id":801899,"display_name":"londonBadger"},"score":0,"creation_date":1669850095,"post_id":74436035,"comment_id":131739784,"body_markdown":"Yes, well the generated x,y position drives the direction vector. The first bit is to generate coherent noise x,y offset for the enemy position (which could be ideal apart from its teleporting). Then the next bit is to generate a direction vector/force to approach that. movementStrength is basically the speed of the enemy and wanderMaxDistance is the area, while the System.currentTime function is the speed that the target location changes. So changing these three you have to play around with.","body":"Yes, well the generated x,y position drives the direction vector. The first bit is to generate coherent noise x,y offset for the enemy position (which could be ideal apart from its teleporting). Then the next bit is to generate a direction vector/force to approach that. movementStrength is basically the speed of the enemy and wanderMaxDistance is the area, while the System.currentTime function is the speed that the target location changes. So changing these three you have to play around with."},{"owner":{"account_id":6450014,"reputation":11895,"user_id":4997239,"accept_rate":61,"display_name":"Hasen"},"score":0,"creation_date":1669850385,"post_id":74436035,"comment_id":131739823,"body_markdown":"But with generating random positions all the time he&#39;d have a new position before he&#39;s even started going to the last one. He would be better to generate new positions once he&#39;d arrived there, would he not?","body":"But with generating random positions all the time he&#39;d have a new position before he&#39;s even started going to the last one. He would be better to generate new positions once he&#39;d arrived there, would he not?"},{"owner":{"account_id":422872,"reputation":656,"user_id":801899,"display_name":"londonBadger"},"score":0,"creation_date":1669898973,"post_id":74436035,"comment_id":131750507,"body_markdown":"Thats right. He would continuously be approaching a wandering target position but never getting there. But this is the same as wandering. And the target positions aren&#39;t random they are coherently random so they just float around i.e. each new target position is very very close to the last one.","body":"Thats right. He would continuously be approaching a wandering target position but never getting there. But this is the same as wandering. And the target positions aren&#39;t random they are coherently random so they just float around i.e. each new target position is very very close to the last one."}],"tags":[],"owner":{"account_id":422872,"reputation":656,"user_id":801899,"display_name":"londonBadger"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668696668,"creation_date":1668449214,"answer_id":74436035,"question_id":74393188,"body_markdown":"If you want wandering then your perlin function that dictates motion should be based from the starting position offset i.e. xOffset AND time, and yOffset AND time. This will give true random coherent wandering. Perlin functions are deterministic so you have to have time.\r\nIf you were using the above to directly establish position there would be no problem and the enemy would wander around the starting position. However, because you use this to provide a wanderforce then the link to the original starting position is broken.\r\nFrom that, to provide a bias to return to the original starting position (or wander back I should say) then consider if the wandering force function is towards the starting position or away. If away multiply by .9 or some such. This function could also be a function of distance i.e. over a certain distance reduction becomes higher.\r\n\r\nThis is one way. Another way that fits with using angles is to grab the difference between the wanderingAngle and the angleToOrigin and reduce that by 0.9 etc in the same way so there is a bias in direction.\r\n\r\nEDIT\r\nAlthough its a bit different from above I think this is better. This code is for perlin wandering -location- around the spawn point (yes square not circle as the limit)\r\n\r\n```float xSpawnOffset = SimplexNoise.noise(spawnX+(System.currentTimeInMillis() % 1000/1000f))* wanderMaxDistance;```\r\n\r\n```float ySpawnOffset = SimplexNoise.noise(spawnY+(System.currentTimeInMillis() % 1000/1000f))* wanderMaxDistance;```\r\n\r\nYou need different spawn positions in there to make sure you don&#39;t get the same wander on both axis, and also so its a different wander for all enemies. This gives you a non-escaping wander. You may need to put a random into this as well in the case you have xSpawn and ySpawn being exactly the same.\r\n\r\nCreate targetWanderPosition from the original spawn position plus offsets. Then the enemy simply heads towards this point.\r\n\r\n```Vector2 wanderForce = (currentPosition.sub(targetWanderPosition)).scl(movementStrength);```\r\n\r\nSo basically the enemy -continuously heads- to the ideal wanderPoint, which will itself be a wander around the spawn point.","title":"AI Wander how to weight wander to return to spawn point","body":"<p>If you want wandering then your perlin function that dictates motion should be based from the starting position offset i.e. xOffset AND time, and yOffset AND time. This will give true random coherent wandering. Perlin functions are deterministic so you have to have time.\nIf you were using the above to directly establish position there would be no problem and the enemy would wander around the starting position. However, because you use this to provide a wanderforce then the link to the original starting position is broken.\nFrom that, to provide a bias to return to the original starting position (or wander back I should say) then consider if the wandering force function is towards the starting position or away. If away multiply by .9 or some such. This function could also be a function of distance i.e. over a certain distance reduction becomes higher.</p>\n<p>This is one way. Another way that fits with using angles is to grab the difference between the wanderingAngle and the angleToOrigin and reduce that by 0.9 etc in the same way so there is a bias in direction.</p>\n<p>EDIT\nAlthough its a bit different from above I think this is better. This code is for perlin wandering -location- around the spawn point (yes square not circle as the limit)</p>\n<p><code>float xSpawnOffset = SimplexNoise.noise(spawnX+(System.currentTimeInMillis() % 1000/1000f))* wanderMaxDistance;</code></p>\n<p><code>float ySpawnOffset = SimplexNoise.noise(spawnY+(System.currentTimeInMillis() % 1000/1000f))* wanderMaxDistance;</code></p>\n<p>You need different spawn positions in there to make sure you don't get the same wander on both axis, and also so its a different wander for all enemies. This gives you a non-escaping wander. You may need to put a random into this as well in the case you have xSpawn and ySpawn being exactly the same.</p>\n<p>Create targetWanderPosition from the original spawn position plus offsets. Then the enemy simply heads towards this point.</p>\n<p><code>Vector2 wanderForce = (currentPosition.sub(targetWanderPosition)).scl(movementStrength);</code></p>\n<p>So basically the enemy -continuously heads- to the ideal wanderPoint, which will itself be a wander around the spawn point.</p>\n"}],"owner":{"account_id":6450014,"reputation":11895,"user_id":4997239,"accept_rate":61,"display_name":"Hasen"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1668696668,"creation_date":1668101908,"question_id":74393188,"body_markdown":"I have a function that returns a random wander force for an enemy AI using perlin noise but I want to know how I can &#39;weight&#39; it so if it gets too far away from its original spawn point, it will gradually turn around and return.\r\n\r\n    private Vector2 wanderForce() {\r\n        perlinPos += inc;\r\n        float tempAngle = (float) (SimplexNoise.noise(perlinPos, 100.213) * wanderPower) + startAngle;\r\n        float dist = origPos.cpy().sub(pos).len();// distance from spawn point\r\n        wanderForce = AngVecTools.angleToVect(tempAngle);\r\n        return wanderForce;\r\n    }","title":"AI Wander how to weight wander to return to spawn point","body":"<p>I have a function that returns a random wander force for an enemy AI using perlin noise but I want to know how I can 'weight' it so if it gets too far away from its original spawn point, it will gradually turn around and return.</p>\n<pre><code>private Vector2 wanderForce() {\n    perlinPos += inc;\n    float tempAngle = (float) (SimplexNoise.noise(perlinPos, 100.213) * wanderPower) + startAngle;\n    float dist = origPos.cpy().sub(pos).len();// distance from spawn point\n    wanderForce = AngVecTools.angleToVect(tempAngle);\n    return wanderForce;\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":9072254,"reputation":1014,"user_id":6754986,"display_name":"LinFelix"},"score":1,"creation_date":1668688420,"post_id":74475531,"comment_id":131469705,"body_markdown":"Why not linke the official documentation that you found if it confuses you?","body":"Why not linke the official documentation that you found if it confuses you?"},{"owner":{"account_id":1677570,"reputation":18354,"user_id":1542723,"display_name":"Ferrybig"},"score":2,"creation_date":1668688445,"post_id":74475531,"comment_id":131469713,"body_markdown":"No, those methods are not the same, `FileInputStream` overrides the method with its own (faster) implementation","body":"No, those methods are not the same, <code>FileInputStream</code> overrides the method with its own (faster) implementation"},{"owner":{"account_id":26962173,"reputation":41,"user_id":20529695,"display_name":"cuo yiban"},"score":0,"creation_date":1668689440,"post_id":74475531,"comment_id":131470074,"body_markdown":"@Ferrybig So the only way to know how it works in code is to read openJDK code?","body":"@Ferrybig So the only way to know how it works in code is to read openJDK code?"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1668696363,"post_id":74475531,"comment_id":131473068,"body_markdown":"As a new Java programmer, why are you even trying to read this? You don&#39;t need read the Java implementation code to be able to *use* it.","body":"As a new Java programmer, why are you even trying to read this? You don&#39;t need read the Java implementation code to be able to <i>use</i> it."},{"owner":{"account_id":26962173,"reputation":41,"user_id":20529695,"display_name":"cuo yiban"},"score":0,"creation_date":1668738899,"post_id":74475531,"comment_id":131485337,"body_markdown":"@MarkRotteveel Well,I want to lay a good foundation.If I just know how to use it instead of how it works,I may forget it easily.","body":"@MarkRotteveel Well,I want to lay a good foundation.If I just know how to use it instead of how it works,I may forget it easily."}],"answers":[{"tags":[],"owner":{"account_id":19780517,"reputation":141,"user_id":14485623,"display_name":"kuriboh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1668696420,"creation_date":1668693328,"answer_id":74476681,"question_id":74475531,"body_markdown":"```FileInputStream``` extends ```InputStream``` and overrides ```read``` in ```InputStream```. Its difference can be found in the [documentation](https://docs.oracle.com/javase/8/docs/api/java/io/FileInputStream.html). They are not the same.\r\n\r\nTo be more specific, in ```FileInputStream```, its [```readBytes```](https://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/native/java/io/io_util.c) calls ```IO_read```(which finally calls ```read``` function in C) one time to read files. \r\n\r\n```nread = IO_Read(fd, buf, len);```\r\n\r\nWhile in ```InputStream```, it calls ```read()``` byte by byte.\r\n```\r\nint c = read();\r\nif (c == -1) {\r\n    return -1;\r\n}\r\nb[off] = (byte)c;\r\n\r\nint i = 1;\r\ntry {\r\n    for (; i &lt; len ; i++) {\r\n        c = read();\r\n        if (c == -1) {\r\n            break;\r\n        }\r\n        b[off + i] = (byte)c;\r\n    }\r\n} catch (IOException ee) {\r\n}\r\n```\r\nAnd because of its inheritance, you can call ```InputStream```&#39;s ```read``` using ```super``` keyword.","title":"Is the method read(byte b[], int off, int len) in InputStream same as the method read(byte b[], int off, int len) in FileInputStream?","body":"<p><code>FileInputStream</code> extends <code>InputStream</code> and overrides <code>read</code> in <code>InputStream</code>. Its difference can be found in the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/io/FileInputStream.html\" rel=\"nofollow noreferrer\">documentation</a>. They are not the same.</p>\n<p>To be more specific, in <code>FileInputStream</code>, its <a href=\"https://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/native/java/io/io_util.c\" rel=\"nofollow noreferrer\"><code>readBytes</code></a> calls <code>IO_read</code>(which finally calls <code>read</code> function in C) one time to read files.</p>\n<p><code>nread = IO_Read(fd, buf, len);</code></p>\n<p>While in <code>InputStream</code>, it calls <code>read()</code> byte by byte.</p>\n<pre><code>int c = read();\nif (c == -1) {\n    return -1;\n}\nb[off] = (byte)c;\n\nint i = 1;\ntry {\n    for (; i &lt; len ; i++) {\n        c = read();\n        if (c == -1) {\n            break;\n        }\n        b[off + i] = (byte)c;\n    }\n} catch (IOException ee) {\n}\n</code></pre>\n<p>And because of its inheritance, you can call <code>InputStream</code>'s <code>read</code> using <code>super</code> keyword.</p>\n"}],"owner":{"account_id":26962173,"reputation":41,"user_id":20529695,"display_name":"cuo yiban"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":74476681,"answer_count":1,"score":-1,"last_activity_date":1668696420,"creation_date":1668688285,"question_id":74475531,"body_markdown":"I am a new Java programmer. When I read source code of Java 17, I want to know how the method of `read(byte b[], int off, int len)` works in FileInputStream, [FileInputStream&#39;s read method](https://i.stack.imgur.com/oV9oi.png). I found it returns readBytes which is a native method, [FileInputStream&#39;s native readBytes method](https://i.stack.imgur.com/ELq9x.png). I didn&#39;t learn C code, so I can&#39;t read OpenJDK&#39;s source code. When I read Java official documen, I noticed that sentences in `FileInputStream read(byte b[], int off, int len)`&#39;s description: _&quot;See Also:InputStream.read()&quot;_ ([Java official documentation](https://i.stack.imgur.com/GQMVu.png)). I really found a method in InputStream with the same name and parameters. \r\n\r\nSo, I want to ask, are these two read methods the same? [InputStream&#39;s read method](https://i.stack.imgur.com/76kI9.png)\r\n\r\nCan I just read `InputStream&#39;s read(byte b[], int off, int len)` to replace the native read method in FileInputStream?\r\n\r\nI didn&#39;t learn C code, so I can&#39;t read OpenJDK&#39;s source code. I try to resolve my question with Java official documentation.\r\n\r\n\r\n\r\n","title":"Is the method read(byte b[], int off, int len) in InputStream same as the method read(byte b[], int off, int len) in FileInputStream?","body":"<p>I am a new Java programmer. When I read source code of Java 17, I want to know how the method of <code>read(byte b[], int off, int len)</code> works in FileInputStream, <a href=\"https://i.stack.imgur.com/oV9oi.png\" rel=\"nofollow noreferrer\">FileInputStream's read method</a>. I found it returns readBytes which is a native method, <a href=\"https://i.stack.imgur.com/ELq9x.png\" rel=\"nofollow noreferrer\">FileInputStream's native readBytes method</a>. I didn't learn C code, so I can't read OpenJDK's source code. When I read Java official documen, I noticed that sentences in <code>FileInputStream read(byte b[], int off, int len)</code>'s description: <em>&quot;See Also:InputStream.read()&quot;</em> (<a href=\"https://i.stack.imgur.com/GQMVu.png\" rel=\"nofollow noreferrer\">Java official documentation</a>). I really found a method in InputStream with the same name and parameters.</p>\n<p>So, I want to ask, are these two read methods the same? <a href=\"https://i.stack.imgur.com/76kI9.png\" rel=\"nofollow noreferrer\">InputStream's read method</a></p>\n<p>Can I just read <code>InputStream's read(byte b[], int off, int len)</code> to replace the native read method in FileInputStream?</p>\n<p>I didn't learn C code, so I can't read OpenJDK's source code. I try to resolve my question with Java official documentation.</p>\n"},{"tags":["java","ant","build","gradle"],"comments":[{"owner":{"account_id":413995,"reputation":28249,"user_id":787968,"accept_rate":25,"display_name":"Rene Groeschke"},"score":2,"creation_date":1411457858,"post_id":25989407,"comment_id":40698611,"body_markdown":"what kind of dependencies do you mean? do you mean task dependencies or library dependencies?","body":"what kind of dependencies do you mean? do you mean task dependencies or library dependencies?"},{"owner":{"account_id":343146,"reputation":11083,"user_id":674669,"accept_rate":58,"display_name":"user674669"},"score":1,"creation_date":1411461116,"post_id":25989407,"comment_id":40700375,"body_markdown":"I just want to do gradle run as fast as possible because I know all dependencies have been built. I just want it to start the task ASAP.","body":"I just want to do gradle run as fast as possible because I know all dependencies have been built. I just want it to start the task ASAP."},{"owner":{"account_id":403352,"reputation":4731,"user_id":771055,"display_name":"Radim"},"score":0,"creation_date":1411478361,"post_id":25989407,"comment_id":40710348,"body_markdown":"I believe you already use Gradle daemon mode to speed up your build.","body":"I believe you already use Gradle daemon mode to speed up your build."},{"owner":{"account_id":343146,"reputation":11083,"user_id":674669,"accept_rate":58,"display_name":"user674669"},"score":0,"creation_date":1411488327,"post_id":25989407,"comment_id":40717106,"body_markdown":"I have org.gradle.daemon=true and configureondemand=true in ~/.gradle/gradle.properties.","body":"I have org.gradle.daemon=true and configureondemand=true in ~/.gradle/gradle.properties."}],"answers":[{"comments":[{"owner":{"account_id":253214,"reputation":19917,"user_id":531762,"accept_rate":82,"display_name":"Thunderforge"},"score":1,"creation_date":1568228099,"post_id":36471181,"comment_id":102211728,"body_markdown":"The `-a` and `--no-rebuild` options were [deprecated in Gradle 4.4](https://docs.gradle.org/4.4/release-notes.html) and removed in Gradle 5.0.","body":"The <code>-a</code> and <code>--no-rebuild</code> options were <a href=\"https://docs.gradle.org/4.4/release-notes.html\" rel=\"nofollow noreferrer\">deprecated in Gradle 4.4</a> and removed in Gradle 5.0."},{"owner":{"account_id":321078,"reputation":15468,"user_id":639687,"accept_rate":69,"display_name":"czerny"},"score":0,"creation_date":1623957281,"post_id":36471181,"comment_id":120232578,"body_markdown":"`--no-rebuild` is still available in Gradle (currently 7.1) https://docs.gradle.org/current/userguide/command_line_interface.html","body":"<code>--no-rebuild</code> is still available in Gradle (currently 7.1) <a href=\"https://docs.gradle.org/current/userguide/command_line_interface.html\" rel=\"nofollow noreferrer\">docs.gradle.org/current/userguide/command_line_interface.htm&zwnj;&#8203;l</a>"}],"tags":[],"owner":{"account_id":396919,"reputation":3944,"user_id":760757,"display_name":"Adam Adamaszek"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1460019140,"creation_date":1460019140,"answer_id":36471181,"question_id":25989407,"body_markdown":"If you want to exclude module dependencies, there is a `-a`, or `--no-rebuild` option to skip other subprojects/modules.\r\n\r\nIf you want to skip the compilation, or resources tasks, you can use the `-x` option.","title":"How do I gradle run without any dependency checking?","body":"<p>If you want to exclude module dependencies, there is a <code>-a</code>, or <code>--no-rebuild</code> option to skip other subprojects/modules.</p>\n\n<p>If you want to skip the compilation, or resources tasks, you can use the <code>-x</code> option.</p>\n"},{"tags":[],"owner":{"account_id":303225,"reputation":1793,"user_id":5690147,"display_name":"Yann Vo"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1668696295,"creation_date":1668696295,"answer_id":74477372,"question_id":25989407,"body_markdown":"If running on bash, you can skip all dependencies like this\r\n\r\n    ./gradlew test $(./gradlew test --dry-run | awk &#39;/^:/ { print &quot;-x&quot; $1 }&#39; | sed &#39;$ d&#39;)\r\n\r\nWhat this does is simply \r\n* to do a dry-run of the build, to detect all dependencies and \r\n* build a command line with all required -x flags.\r\n\r\nNotice:\r\n* you can use the Gradle `--console plain` flag if you want to see the initial output without the pretty-print features of Gradle\r\n* the sed allows to skip the last line... awk being quite complex to do the same...","title":"How do I gradle run without any dependency checking?","body":"<p>If running on bash, you can skip all dependencies like this</p>\n<pre><code>./gradlew test $(./gradlew test --dry-run | awk '/^:/ { print &quot;-x&quot; $1 }' | sed '$ d')\n</code></pre>\n<p>What this does is simply</p>\n<ul>\n<li>to do a dry-run of the build, to detect all dependencies and</li>\n<li>build a command line with all required -x flags.</li>\n</ul>\n<p>Notice:</p>\n<ul>\n<li>you can use the Gradle <code>--console plain</code> flag if you want to see the initial output without the pretty-print features of Gradle</li>\n<li>the sed allows to skip the last line... awk being quite complex to do the same...</li>\n</ul>\n"}],"owner":{"account_id":343146,"reputation":11083,"user_id":674669,"accept_rate":58,"display_name":"user674669"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4541,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1668696295,"creation_date":1411457496,"question_id":25989407,"body_markdown":"We have a complex set of build.gradle scripts.\r\n\r\nIs it possible to run a task without dependency checking of any kind?\r\n\r\ne.g.\r\n\r\n    gradle run\r\n\r\nshould just start the jvm and nothing else?\r\n\r\nThank you.\r\n\r\n","title":"How do I gradle run without any dependency checking?","body":"<p>We have a complex set of build.gradle scripts.</p>\n\n<p>Is it possible to run a task without dependency checking of any kind?</p>\n\n<p>e.g.</p>\n\n<pre><code>gradle run\n</code></pre>\n\n<p>should just start the jvm and nothing else?</p>\n\n<p>Thank you.</p>\n"},{"tags":["java","ant","cucumber","hacl"],"comments":[{"owner":{"account_id":3890138,"reputation":2674,"user_id":3220554,"display_name":"phunsoft"},"score":0,"creation_date":1668688060,"post_id":74475143,"comment_id":131469571,"body_markdown":"How does your question relate to `mainframe`?","body":"How does your question relate to <code>mainframe</code>?"},{"owner":{"account_id":26886017,"reputation":1,"user_id":20465575,"display_name":"amar"},"score":0,"creation_date":1668688841,"post_id":74475143,"comment_id":131469849,"body_markdown":"My application is Mainframe application using HACL library","body":"My application is Mainframe application using HACL library"}],"owner":{"account_id":26886017,"reputation":1,"user_id":20465575,"display_name":"amar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1668695976,"creation_date":1668686570,"question_id":74475143,"body_markdown":"I want to execute cucumber feature file parallel, I am using ant build file for build the application below is the sample cucumber file I am reading the data from excel sheet, If excel sheet has 10 data, I want split the data into 2 parts and each part 5 data and execute that 2 parts parallel. In cucumber how can we execute parallel without maven plugin and TestNg, here I am using ant file for build, How can we implement this? Through Java or multi threading can we implement this?\r\n\r\n    Scenario: Read excel files data \r\n    Given Launch mainframe application with &quot;Host&quot; &quot;Port&quot; \r\n    Given Login credentials with &quot;UserId&quot; &quot;Pwd&quot; \r\n    Then I want to read excel data from &quot;abc.xlsx&quot; and process \r\n    Then I logout`","title":"How can we Cucumber file Parallel execution using Ant","body":"<p>I want to execute cucumber feature file parallel, I am using ant build file for build the application below is the sample cucumber file I am reading the data from excel sheet, If excel sheet has 10 data, I want split the data into 2 parts and each part 5 data and execute that 2 parts parallel. In cucumber how can we execute parallel without maven plugin and TestNg, here I am using ant file for build, How can we implement this? Through Java or multi threading can we implement this?</p>\n<pre><code>Scenario: Read excel files data \nGiven Launch mainframe application with &quot;Host&quot; &quot;Port&quot; \nGiven Login credentials with &quot;UserId&quot; &quot;Pwd&quot; \nThen I want to read excel data from &quot;abc.xlsx&quot; and process \nThen I logout`\n</code></pre>\n"},{"tags":["java","gzip","parallel-processing"],"comments":[{"owner":{"account_id":25066,"reputation":66292,"user_id":64174,"accept_rate":100,"display_name":"Sean Owen"},"score":1,"creation_date":1319269512,"post_id":7858101,"comment_id":9584480,"body_markdown":"Is this homework? It certainly seems like the intent is for you to implement this from scratch, rather than copy `GZIPOutputStream` if so. As you say that class is not parallelized already for you.","body":"Is this homework? It certainly seems like the intent is for you to implement this from scratch, rather than copy <code>GZIPOutputStream</code> if so. As you say that class is not parallelized already for you."},{"owner":{"account_id":114848,"reputation":134189,"user_id":301832,"accept_rate":60,"display_name":"Donal Fellows"},"score":0,"creation_date":1319271887,"post_id":7858101,"comment_id":9584677,"body_markdown":"The GzipOutputStream is a wrapper round the Deflater, surely?","body":"The GzipOutputStream is a wrapper round the Deflater, surely?"},{"owner":{"account_id":944942,"reputation":61,"user_id":972352,"display_name":"am3692"},"score":0,"creation_date":1319306200,"post_id":7858101,"comment_id":9589028,"body_markdown":"Yea, this is a homework assignment. I was told Deflaters should work, but I can&#39;t seem to get them to compress properly in GZip format.","body":"Yea, this is a homework assignment. I was told Deflaters should work, but I can&#39;t seem to get them to compress properly in GZip format."}],"answers":[{"tags":[],"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1319270703,"creation_date":1319270703,"answer_id":7858202,"question_id":7858101,"body_markdown":"To make a process concurrent, you need to have portions of code which can run concurrently and independently.  Most compression algorithms are designed to be run sequentially, where every byte depends on every byte has comes before.\r\n\r\nThe only way to do compression concurrently is to change the algorythm (making it incompatible with existing approaches) ","title":"Java - Parallelizing Gzip","body":"<p>To make a process concurrent, you need to have portions of code which can run concurrently and independently.  Most compression algorithms are designed to be run sequentially, where every byte depends on every byte has comes before.</p>\n\n<p>The only way to do compression concurrently is to change the algorythm (making it incompatible with existing approaches) </p>\n"},{"comments":[{"owner":{"account_id":944942,"reputation":61,"user_id":972352,"display_name":"am3692"},"score":0,"creation_date":1319306263,"post_id":7858264,"comment_id":9589038,"body_markdown":"We are supposed to read the blocks in sequentially, set the dictionaries of each block using the last 32 KiB from the previously read block, then compress concurrently.","body":"We are supposed to read the blocks in sequentially, set the dictionaries of each block using the last 32 KiB from the previously read block, then compress concurrently."},{"owner":{"account_id":903562,"reputation":15094,"user_id":939023,"accept_rate":90,"display_name":"Shivan Dragon"},"score":0,"creation_date":1319362345,"post_id":7858264,"comment_id":9594913,"body_markdown":"As far as I know parallelized compression is a big deal, and it&#39;s not something used a lot. I&#39;m pretty sure gzip doesn&#39;t allow for parallelization, but there are however other compression formats that allo for it: http://en.wikipedia.org/wiki/Bzip2 (not that this implementation has never made it to the main project, so I wouldn&#39;t put my money on it)","body":"As far as I know parallelized compression is a big deal, and it&#39;s not something used a lot. I&#39;m pretty sure gzip doesn&#39;t allow for parallelization, but there are however other compression formats that allo for it: <a href=\"http://en.wikipedia.org/wiki/Bzip2\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Bzip2</a> (not that this implementation has never made it to the main project, so I wouldn&#39;t put my money on it)"}],"tags":[],"owner":{"account_id":903562,"reputation":15094,"user_id":939023,"accept_rate":90,"display_name":"Shivan Dragon"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1668695784,"creation_date":1319271447,"answer_id":7858264,"question_id":7858101,"body_markdown":"Yep, zipping a file with dictionary can&#39;t be parallelized, as everything depends on everything. Maybe your teacher asked you to parallelize the individual gzipping of multiple files in a folder? That would be a great example of parallelized work.","title":"Java - Parallelizing Gzip","body":"<p>Yep, zipping a file with dictionary can't be parallelized, as everything depends on everything. Maybe your teacher asked you to parallelize the individual gzipping of multiple files in a folder? That would be a great example of parallelized work.</p>\n"},{"comments":[{"owner":{"account_id":114848,"reputation":134189,"user_id":301832,"accept_rate":60,"display_name":"Donal Fellows"},"score":0,"creation_date":1319271741,"post_id":7858274,"comment_id":9584657,"body_markdown":"I&#39;m also not sure that you can do it with the Java interface to the zlib engine. It&#39;s possible that it doesn&#39;t expose _quite_ enough. It doesn&#39;t help that the documentation of what to do to create recoverable streams is also somewhat sketchy","body":"I&#39;m also not sure that you can do it with the Java interface to the zlib engine. It&#39;s possible that it doesn&#39;t expose <i>quite</i> enough. It doesn&#39;t help that the documentation of what to do to create recoverable streams is also somewhat sketchy"}],"tags":[],"owner":{"account_id":114848,"reputation":134189,"user_id":301832,"accept_rate":60,"display_name":"Donal Fellows"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1319271831,"creation_date":1319271523,"answer_id":7858274,"question_id":7858101,"body_markdown":"I ***think*** you can do it by inserting appropriate resets in the compression stream. The idea is that the underlying compression engine used in gzip _allows_ the [deflater](http://download.oracle.com/javase/7/docs/api/java/util/zip/Deflater.html) to be reset, with an aim that it makes it easier to recover from stream corruption, though at a cost of making the compression ratio worse. After reset, the deflater will be in a known state and thus you could in fact start from that state (which is independent of the content being compressed) in multiple threads (and from many locations in the input data, of course) produce a compressed chunk and include the data produced when doing the following reset so that it takes the deflater back to the known state. Then you&#39;ve just to reassemble the compressed pieces into the overall compressed stream. Simple! (Hah!)\r\n\r\nI don&#39;t know if this will work, and I suspect that the complexity of the whole thing will make it not a viable choice except when you&#39;re compressing single very large files. (If you had many files, it would be _much_ easier to just compress each of those in parallel.) Still, that&#39;s what I&#39;d try first.\r\n\r\n(Also note that the gzip format is just a deflated stream with extra metadata.)","title":"Java - Parallelizing Gzip","body":"<p>I <strong><em>think</em></strong> you can do it by inserting appropriate resets in the compression stream. The idea is that the underlying compression engine used in gzip <em>allows</em> the <a href=\"http://download.oracle.com/javase/7/docs/api/java/util/zip/Deflater.html\" rel=\"nofollow\">deflater</a> to be reset, with an aim that it makes it easier to recover from stream corruption, though at a cost of making the compression ratio worse. After reset, the deflater will be in a known state and thus you could in fact start from that state (which is independent of the content being compressed) in multiple threads (and from many locations in the input data, of course) produce a compressed chunk and include the data produced when doing the following reset so that it takes the deflater back to the known state. Then you've just to reassemble the compressed pieces into the overall compressed stream. Simple! (Hah!)</p>\n\n<p>I don't know if this will work, and I suspect that the complexity of the whole thing will make it not a viable choice except when you're compressing single very large files. (If you had many files, it would be <em>much</em> easier to just compress each of those in parallel.) Still, that's what I'd try first.</p>\n\n<p>(Also note that the gzip format is just a deflated stream with extra metadata.)</p>\n"}],"owner":{"account_id":944942,"reputation":61,"user_id":972352,"display_name":"am3692"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3363,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":3,"score":5,"last_activity_date":1668695784,"creation_date":1319269352,"question_id":7858101,"body_markdown":"I was assigned to parallelize GZip in Java 7, and I am not sure which is possible.\r\n\r\nThe assignment is: \r\n\r\n - Parallelize gzip using a given number of threads\r\n - Each thread takes a 1024 KiB block, using the last 32 KiB block from\r\n   the previous block as a dictionary. There is an option to use no\r\n   dicitionary\r\n - Read from Stdin and stdout\r\n\r\nWhat I have tried:\r\n\r\n - I have tried using GZIPOutputStream, but there doesn&#39;t seem to be a\r\n   way to isolate and parallelize the deflate(), nor can I access the\r\n   deflater to alter the dictionary. I tried extending off of GZIPOutputStream, but it didn&#39;t seem to act as I wanted to, since I still couldn&#39;t isolate the compress/deflate.\r\n - I tried using Deflater with wrap enabled and a FilterOutputStream to\r\n   output the compressed bytes, but I wasn&#39;t able to get it to compress\r\n   properly in GZip format. I made it so each thread had a compressor that will write to a byte array, then it will write to the OutputStream.\r\n\r\nI am not sure if I am did my approaches wrong or took the wrong approaches completely. Can anyone point me the right direction for which classes to use for this project?","title":"Java - Parallelizing Gzip","body":"<p>I was assigned to parallelize GZip in Java 7, and I am not sure which is possible.</p>\n\n<p>The assignment is: </p>\n\n<ul>\n<li>Parallelize gzip using a given number of threads</li>\n<li>Each thread takes a 1024 KiB block, using the last 32 KiB block from\nthe previous block as a dictionary. There is an option to use no\ndicitionary</li>\n<li>Read from Stdin and stdout</li>\n</ul>\n\n<p>What I have tried:</p>\n\n<ul>\n<li>I have tried using GZIPOutputStream, but there doesn't seem to be a\nway to isolate and parallelize the deflate(), nor can I access the\ndeflater to alter the dictionary. I tried extending off of GZIPOutputStream, but it didn't seem to act as I wanted to, since I still couldn't isolate the compress/deflate.</li>\n<li>I tried using Deflater with wrap enabled and a FilterOutputStream to\noutput the compressed bytes, but I wasn't able to get it to compress\nproperly in GZip format. I made it so each thread had a compressor that will write to a byte array, then it will write to the OutputStream.</li>\n</ul>\n\n<p>I am not sure if I am did my approaches wrong or took the wrong approaches completely. Can anyone point me the right direction for which classes to use for this project?</p>\n"},{"tags":["java","amazon-dynamodb"],"comments":[{"owner":{"account_id":10112469,"reputation":638,"user_id":7472239,"accept_rate":68,"display_name":"Sikandar Sahab"},"score":0,"creation_date":1668690344,"post_id":74475887,"comment_id":131470456,"body_markdown":"@RobertHarvey please check edited question, I have defined how does getItems() method looks like","body":"@RobertHarvey please check edited question, I have defined how does getItems() method looks like"}],"answers":[{"comments":[{"owner":{"account_id":10112469,"reputation":638,"user_id":7472239,"accept_rate":68,"display_name":"Sikandar Sahab"},"score":0,"creation_date":1668690931,"post_id":74476086,"comment_id":131470688,"body_markdown":"I am using jdk8, &#39;cannot resolve symbol &#39;from&#39; )","body":"I am using jdk8, &#39;cannot resolve symbol &#39;from&#39; )"},{"owner":{"account_id":2163224,"reputation":6602,"user_id":1916917,"accept_rate":60,"display_name":"Holloway"},"score":0,"creation_date":1668690997,"post_id":74476086,"comment_id":131470719,"body_markdown":"Sorry, that should have been `fromMap`. Do you have the `fromMap` implementation?","body":"Sorry, that should have been <code>fromMap</code>. Do you have the <code>fromMap</code> implementation?"},{"owner":{"account_id":10112469,"reputation":638,"user_id":7472239,"accept_rate":68,"display_name":"Sikandar Sahab"},"score":0,"creation_date":1668691033,"post_id":74476086,"comment_id":131470726,"body_markdown":"fromMap implementation I do not have.","body":"fromMap implementation I do not have."},{"owner":{"account_id":10112469,"reputation":638,"user_id":7472239,"accept_rate":68,"display_name":"Sikandar Sahab"},"score":0,"creation_date":1668691130,"post_id":74476086,"comment_id":131470774,"body_markdown":"I am not getting that how should fromMap implementation look like. Please consider that all fields in PricingRule class are string variable.","body":"I am not getting that how should fromMap implementation look like. Please consider that all fields in PricingRule class are string variable."},{"owner":{"account_id":2163224,"reputation":6602,"user_id":1916917,"accept_rate":60,"display_name":"Holloway"},"score":0,"creation_date":1668691194,"post_id":74476086,"comment_id":131470795,"body_markdown":"I don&#39;t know how `PricingRule` is constructed or what `AttibuteValue` looks like, presumably it&#39;s an AWS api class?","body":"I don&#39;t know how <code>PricingRule</code> is constructed or what <code>AttibuteValue</code> looks like, presumably it&#39;s an AWS api class?"},{"owner":{"account_id":10112469,"reputation":638,"user_id":7472239,"accept_rate":68,"display_name":"Sikandar Sahab"},"score":0,"creation_date":1668691308,"post_id":74476086,"comment_id":131470837,"body_markdown":"`PricingRule` class is my class with all string variables. And `com.amazonaws.services.dynamodbv2.model.AttributeValue` is aws class.","body":"<code>PricingRule</code> class is my class with all string variables. And <code>com.amazonaws.services.dynamodbv2.model.AttributeValue</code> is aws class."},{"owner":{"account_id":10112469,"reputation":638,"user_id":7472239,"accept_rate":68,"display_name":"Sikandar Sahab"},"score":0,"creation_date":1668691356,"post_id":74476086,"comment_id":131470863,"body_markdown":"cannot resolve symbol `&#39;toList()&#39;` on below line: `List&lt;PricingRule&gt; pricingRules = items.stream().map(PricingRule::fromMap).toList();`","body":"cannot resolve symbol <code>&#39;toList()&#39;</code> on below line: <code>List&lt;PricingRule&gt; pricingRules = items.stream().map(PricingRule::fromMap).toList();</code>"},{"owner":{"account_id":2163224,"reputation":6602,"user_id":1916917,"accept_rate":60,"display_name":"Holloway"},"score":0,"creation_date":1668694103,"post_id":74476086,"comment_id":131472099,"body_markdown":"See my comment about java17 vs older version. Use `.collect(Collectors.toList())`","body":"See my comment about java17 vs older version. Use <code>.collect(Collectors.toList())</code>"},{"owner":{"account_id":10112469,"reputation":638,"user_id":7472239,"accept_rate":68,"display_name":"Sikandar Sahab"},"score":0,"creation_date":1668694232,"post_id":74476086,"comment_id":131472154,"body_markdown":"executeStatementResult.getItems().collect(Collectors.toList())  did not work","body":"executeStatementResult.getItems().collect(Collectors.toList(&zwnj;&#8203;))  did not work"},{"owner":{"account_id":2163224,"reputation":6602,"user_id":1916917,"accept_rate":60,"display_name":"Holloway"},"score":0,"creation_date":1668694306,"post_id":74476086,"comment_id":131472187,"body_markdown":"You still need the `.stream().map(...)` sections","body":"You still need the <code>.stream().map(...)</code> sections"}],"tags":[],"owner":{"account_id":2163224,"reputation":6602,"user_id":1916917,"accept_rate":60,"display_name":"Holloway"},"comment_count":10,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1668690976,"creation_date":1668690784,"answer_id":74476086,"question_id":74475887,"body_markdown":"You can&#39;t cast directly so you will need to implement something like `PricingRule::fromMap` and do something like\r\n\r\n    class PricingRule {\r\n        // everything you already have\r\n        public static PricingRule fromMap(Map&lt;String, AttributeValue&gt; items) {\r\n            // create PricingRule\r\n        }\r\n    }\r\n\r\nThen when you need your list you can use something like\r\n\r\n    List&lt;java.util.Map&lt;String, AttributeValue&gt;&gt; items =  executeStatementResult.getItems();\r\n    \r\n    // assumes java 17+, alternatively use .collect(Collectors.toList())\r\n    List&lt;PricingRule&gt; pricingRules = items.stream().map(PricingRule::fromMap).toList();\r\n\r\n","title":"is it possible to convert statement result to List&lt;Object&gt; in java","body":"<p>You can't cast directly so you will need to implement something like <code>PricingRule::fromMap</code> and do something like</p>\n<pre><code>class PricingRule {\n    // everything you already have\n    public static PricingRule fromMap(Map&lt;String, AttributeValue&gt; items) {\n        // create PricingRule\n    }\n}\n</code></pre>\n<p>Then when you need your list you can use something like</p>\n<pre><code>List&lt;java.util.Map&lt;String, AttributeValue&gt;&gt; items =  executeStatementResult.getItems();\n\n// assumes java 17+, alternatively use .collect(Collectors.toList())\nList&lt;PricingRule&gt; pricingRules = items.stream().map(PricingRule::fromMap).toList();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10112469,"reputation":638,"user_id":7472239,"accept_rate":68,"display_name":"Sikandar Sahab"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1668692842,"creation_date":1668692842,"answer_id":74476569,"question_id":74475887,"body_markdown":"I got solution and posting if someone may come up with this problem in future.\r\n\r\n    public List&lt;PricingRule&gt; statementToList() {\r\n\r\n        List&lt;PricingRule&gt; pricingRules = new ArrayList&lt;&gt;();\r\n\r\n        try {\r\n            // Create ExecuteStatementRequest\r\n            ExecuteStatementRequest executeStatementRequest = createExecuteStatementRequest();\r\n            ExecuteStatementResult executeStatementResult = dynamoDB.executeStatement(executeStatementRequest);\r\n\r\n            final ObjectMapper mapper = new ObjectMapper();\r\n            executeStatementResult.getItems().forEach(item -&gt; pricingRules.add(mapper.convertValue(ItemUtils.toSimpleMapValue(item), PricingRule.class)));\r\n\r\n        } catch (Exception e) {\r\n            handleExecuteStatementErrors(e);\r\n        }\r\n\r\n        return pricingRules;\r\n\r\n    }","title":"is it possible to convert statement result to List&lt;Object&gt; in java","body":"<p>I got solution and posting if someone may come up with this problem in future.</p>\n<pre><code>public List&lt;PricingRule&gt; statementToList() {\n\n    List&lt;PricingRule&gt; pricingRules = new ArrayList&lt;&gt;();\n\n    try {\n        // Create ExecuteStatementRequest\n        ExecuteStatementRequest executeStatementRequest = createExecuteStatementRequest();\n        ExecuteStatementResult executeStatementResult = dynamoDB.executeStatement(executeStatementRequest);\n\n        final ObjectMapper mapper = new ObjectMapper();\n        executeStatementResult.getItems().forEach(item -&gt; pricingRules.add(mapper.convertValue(ItemUtils.toSimpleMapValue(item), PricingRule.class)));\n\n    } catch (Exception e) {\n        handleExecuteStatementErrors(e);\n    }\n\n    return pricingRules;\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7392763,"reputation":3367,"user_id":5625696,"accept_rate":50,"display_name":"Borislav Stoilov"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1668695762,"creation_date":1668695762,"answer_id":74477251,"question_id":74475887,"body_markdown":"Glad you managed to solve your problem, but have you considered using the table resource?\r\n\r\n```java\r\nvar table = dynamoDbEnhancedClient.table(&quot;TableName&quot;, TableSchema.fromClass(PricingRule.class));\r\nList&lt;PricingRule&gt; items = table.query(&lt;condition&gt;).items().stream().toList();\r\n```\r\n\r\nThis code requires that PricingRule is defined as a dynamo bean, for example\r\n\r\n```java\r\n@DynamoDbBean\r\npublic class PricingRule {\r\n    private String pk;\r\n    private String sk;\r\n    private String field1;\r\n    private String field2;\r\n\r\n    public PricingRule() {\r\n        \r\n    }\r\n\r\n    @DynamoDbPartitionKey\r\n    public String getPk() {\r\n        return pk;\r\n    }\r\n\r\n    public void setPk(String pk) {\r\n        this.pk = pk;\r\n    }\r\n    \r\n    @DynamoDbSortKey\r\n    public String getSk() {\r\n        return sk;\r\n    }\r\n\r\n    public void setSk(String sk) {\r\n        this.sk = sk;\r\n    }\r\n\r\n    public String getField1() {\r\n        return field1;\r\n    }\r\n\r\n    public void setField1(String field1) {\r\n        this.field1 = field1;\r\n    }\r\n\r\n    public String getField2() {\r\n        return field2;\r\n    }\r\n\r\n    public void setField2(String field2) {\r\n        this.field2 = field2;\r\n    }\r\n}\r\n```","title":"is it possible to convert statement result to List&lt;Object&gt; in java","body":"<p>Glad you managed to solve your problem, but have you considered using the table resource?</p>\n<pre class=\"lang-java prettyprint-override\"><code>var table = dynamoDbEnhancedClient.table(&quot;TableName&quot;, TableSchema.fromClass(PricingRule.class));\nList&lt;PricingRule&gt; items = table.query(&lt;condition&gt;).items().stream().toList();\n</code></pre>\n<p>This code requires that PricingRule is defined as a dynamo bean, for example</p>\n<pre class=\"lang-java prettyprint-override\"><code>@DynamoDbBean\npublic class PricingRule {\n    private String pk;\n    private String sk;\n    private String field1;\n    private String field2;\n\n    public PricingRule() {\n        \n    }\n\n    @DynamoDbPartitionKey\n    public String getPk() {\n        return pk;\n    }\n\n    public void setPk(String pk) {\n        this.pk = pk;\n    }\n    \n    @DynamoDbSortKey\n    public String getSk() {\n        return sk;\n    }\n\n    public void setSk(String sk) {\n        this.sk = sk;\n    }\n\n    public String getField1() {\n        return field1;\n    }\n\n    public void setField1(String field1) {\n        this.field1 = field1;\n    }\n\n    public String getField2() {\n        return field2;\n    }\n\n    public void setField2(String field2) {\n        this.field2 = field2;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":10112469,"reputation":638,"user_id":7472239,"accept_rate":68,"display_name":"Sikandar Sahab"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":348,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74476569,"answer_count":3,"score":0,"last_activity_date":1668695762,"creation_date":1668689977,"question_id":74475887,"body_markdown":"I want to convert the below statement result to list of my object. \r\n\r\n    import com.amazonaws.services.dynamodbv2.model.ExecuteStatementResult;\r\n    \r\n    ExecuteStatementResult executeStatementResult = dynamoDB.executeStatement(executeStatementRequest);\r\n    System.out.println( executeStatementResult.getItems() );\r\n\r\nOutput:\r\n\r\n    [{bookingClasses={S: A,B,C,}, suppliers={S: BA,1A,TF,}, adjustmentType={S: PERCENTAGE,}, departureStartDate={S: 2022-11-17,}}]\r\n\r\nPlease note .getItems() method is like below:\r\n\r\n    public java.util.List&lt;java.util.Map&lt;String, AttributeValue&gt;&gt; getItems() {\r\n        return items;\r\n    }\r\n\r\nI want something like this to work for me:\r\n\r\n    List&lt;java.util.Map&lt;String, AttributeValue&gt;&gt; items =  executeStatementResult.getItems();\r\n\r\n    List&lt;PricingRule&gt; pricingRules = ( List&lt;PricingRule&gt; ) items;\r\n\r\nAny help suggestion or workaround appreciated. \r\n\r\nThank you\r\n\r\n","title":"is it possible to convert statement result to List&lt;Object&gt; in java","body":"<p>I want to convert the below statement result to list of my object.</p>\n<pre><code>import com.amazonaws.services.dynamodbv2.model.ExecuteStatementResult;\n\nExecuteStatementResult executeStatementResult = dynamoDB.executeStatement(executeStatementRequest);\nSystem.out.println( executeStatementResult.getItems() );\n</code></pre>\n<p>Output:</p>\n<pre><code>[{bookingClasses={S: A,B,C,}, suppliers={S: BA,1A,TF,}, adjustmentType={S: PERCENTAGE,}, departureStartDate={S: 2022-11-17,}}]\n</code></pre>\n<p>Please note .getItems() method is like below:</p>\n<pre><code>public java.util.List&lt;java.util.Map&lt;String, AttributeValue&gt;&gt; getItems() {\n    return items;\n}\n</code></pre>\n<p>I want something like this to work for me:</p>\n<pre><code>List&lt;java.util.Map&lt;String, AttributeValue&gt;&gt; items =  executeStatementResult.getItems();\n\nList&lt;PricingRule&gt; pricingRules = ( List&lt;PricingRule&gt; ) items;\n</code></pre>\n<p>Any help suggestion or workaround appreciated.</p>\n<p>Thank you</p>\n"},{"tags":["java","quarkus"],"comments":[{"owner":{"account_id":1954609,"reputation":903,"user_id":1757919,"display_name":"Roberto Cortez"},"score":0,"creation_date":1668798362,"post_id":74477221,"comment_id":131501948,"body_markdown":"I&#39;ve tried reproducing the problem with your description, but everything seems to work as expected. Any change you can provide me with your reproducer that shows the issue? Thanks!","body":"I&#39;ve tried reproducing the problem with your description, but everything seems to work as expected. Any change you can provide me with your reproducer that shows the issue? Thanks!"},{"owner":{"account_id":14962556,"reputation":1,"user_id":10801887,"display_name":"elagabalus"},"score":0,"creation_date":1669123952,"post_id":74477221,"comment_id":131568478,"body_markdown":"thanks for reading the question, I&#39;m assigning thath variables in a bean, I see that the class is initialized at compile time so it keeps the same environment variable&#39;s value that had when it was compiled\nI tried --initialize-at-run-time but it did&#39;n work since its a bean","body":"thanks for reading the question, I&#39;m assigning thath variables in a bean, I see that the class is initialized at compile time so it keeps the same environment variable&#39;s value that had when it was compiled I tried --initialize-at-run-time but it did&#39;n work since its a bean"},{"owner":{"account_id":1954609,"reputation":903,"user_id":1757919,"display_name":"Roberto Cortez"},"score":0,"creation_date":1669209813,"post_id":74477221,"comment_id":131592205,"body_markdown":"Ah, so this really depends on how you are using the bean. In certain situations, Quarkus will eagerly initialize the bean and take the configuration used during the build, so you won&#39;t see a difference when you change it in runtime. An example is JAX-RS Providers, which are initialized during the native image build. For these cases, you should use `Instance&lt;T&gt;` injection, so you get an updated value.","body":"Ah, so this really depends on how you are using the bean. In certain situations, Quarkus will eagerly initialize the bean and take the configuration used during the build, so you won&#39;t see a difference when you change it in runtime. An example is JAX-RS Providers, which are initialized during the native image build. For these cases, you should use <code>Instance&lt;T&gt;</code> injection, so you get an updated value."},{"owner":{"account_id":14962556,"reputation":1,"user_id":10801887,"display_name":"elagabalus"},"score":0,"creation_date":1669296019,"post_id":74477221,"comment_id":131615683,"body_markdown":"Sorry I didn&#39;t understand, can you detail this Instance&lt;T&gt; solution?","body":"Sorry I didn&#39;t understand, can you detail this Instance&lt;T&gt; solution?"},{"owner":{"account_id":1954609,"reputation":903,"user_id":1757919,"display_name":"Roberto Cortez"},"score":0,"creation_date":1669721171,"post_id":74477221,"comment_id":131702151,"body_markdown":"Try `@ConfigProperty(name = &quot;LOCAL.JWT_PUBLIC_KEY&quot;) Instance&lt;String&gt; jwtPublicKey`.","body":"Try <code>@ConfigProperty(name = &quot;LOCAL.JWT_PUBLIC_KEY&quot;) Instance&lt;String&gt; jwtPublicKey</code>."}],"owner":{"account_id":14962556,"reputation":1,"user_id":10801887,"display_name":"elagabalus"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":114,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1668695716,"creation_date":1668695634,"question_id":74477221,"body_markdown":"I have the following property in my application.properties\r\n\r\n    // application.properties\r\n    LOCAL.JWT_PUBLIC_KEY=${JWT_PUBLIC_KEY:KEY_JWT}\r\n\r\nAnd I&#39;m injecting that property using the microprofile config anotation ConfigProperty\r\n\r\n    // OnPremiseSecrets.java\r\n    public JwtConfig(@ConfigProperty(name = &quot;LOCAL.JWT_PUBLIC_KEY&quot;) String jwtPublicKey)\r\n\r\nit works perfectly while running the program in JVM with a compiled jar quarkusDev\r\nbut it doesn&#39;t work in a native graalvm compilation, in the logs it return KEY_JWT as jwtPublicKey value which is the default.\r\n\r\n\r\nI tried reading enviernment variables directry using \r\n```\r\nSystem.getenv\r\n```\r\nand it returns the right value, the environment variable is configured\r\n\r\n\r\n","title":"property expressions not working in quarkus native","body":"<p>I have the following property in my application.properties</p>\n<pre><code>// application.properties\nLOCAL.JWT_PUBLIC_KEY=${JWT_PUBLIC_KEY:KEY_JWT}\n</code></pre>\n<p>And I'm injecting that property using the microprofile config anotation ConfigProperty</p>\n<pre><code>// OnPremiseSecrets.java\npublic JwtConfig(@ConfigProperty(name = &quot;LOCAL.JWT_PUBLIC_KEY&quot;) String jwtPublicKey)\n</code></pre>\n<p>it works perfectly while running the program in JVM with a compiled jar quarkusDev\nbut it doesn't work in a native graalvm compilation, in the logs it return KEY_JWT as jwtPublicKey value which is the default.</p>\n<p>I tried reading enviernment variables directry using</p>\n<pre><code>System.getenv\n</code></pre>\n<p>and it returns the right value, the environment variable is configured</p>\n"},{"tags":["java","flutter","encryption","dart","media"],"answers":[{"comments":[{"owner":{"account_id":8914436,"reputation":1013,"user_id":6655192,"display_name":"nivla360"},"score":2,"creation_date":1595072329,"post_id":60054142,"comment_id":111351789,"body_markdown":"Can this answer handle large video files? about 700 MB?","body":"Can this answer handle large video files? about 700 MB?"},{"owner":{"account_id":18469561,"reputation":377,"user_id":13454830,"display_name":"Mrunal Joshi"},"score":0,"creation_date":1595656779,"post_id":60054142,"comment_id":111556085,"body_markdown":"It gives me an error saying cannot create the outFile. Did you get the same error?","body":"It gives me an error saying cannot create the outFile. Did you get the same error?"}],"tags":[],"owner":{"account_id":11131060,"reputation":183,"user_id":8511016,"display_name":"Jan Ndungu"},"comment_count":2,"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1580808429,"creation_date":1580807996,"answer_id":60054142,"question_id":59981337,"body_markdown":"Here is the solution that I found. Hope it helps. Remember to add the package [encryption package](https://pub.dev/packages/encrypt) to pubspec.yaml\r\n\r\n    import &#39;dart:convert&#39;;\r\n    import &#39;dart:io&#39;;\r\n    \r\n    import &#39;package:encrypt/encrypt.dart&#39;;\r\n    \r\n    main() {\r\n     \r\n      perfomEncryptionTasks();\r\n    }\r\n    \r\n    perfomEncryptionTasks() async {\r\n      await encryptFile();\r\n      await decryptFile();\r\n    }\r\n    \r\n    encryptFile() async {\r\n      File inFile = new File(&quot;video.mp4&quot;);\r\n      File outFile = new File(&quot;videoenc.aes&quot;);\r\n    \r\n      bool outFileExists = await outFile.exists();\r\n    \r\n      if(!outFileExists){\r\n        await outFile.create();\r\n      }\r\n    \r\n      final videoFileContents = await inFile.readAsStringSync(encoding: latin1);\r\n    \r\n      final key = Key.fromUtf8(&#39;my 32 length key................&#39;);\r\n      final iv = IV.fromLength(16);\r\n    \r\n      final encrypter = Encrypter(AES(key));\r\n    \r\n      final encrypted = encrypter.encrypt(videoFileContents, iv: iv);\r\n      await outFile.writeAsBytes(encrypted.bytes);\r\n    }\r\n    \r\n    decryptFile() async {\r\n      File inFile = new File(&quot;videoenc.aes&quot;);\r\n      File outFile = new File(&quot;videodec.mp4&quot;);\r\n    \r\n      bool outFileExists = await outFile.exists();\r\n    \r\n      if(!outFileExists){\r\n        await outFile.create();\r\n      }\r\n    \r\n      final videoFileContents = await inFile.readAsBytesSync();\r\n    \r\n      final key = Key.fromUtf8(&#39;my 32 length key................&#39;);\r\n      final iv = IV.fromLength(16);\r\n    \r\n      final encrypter = Encrypter(AES(key));\r\n    \r\n      final encryptedFile = Encrypted(videoFileContents);\r\n      final decrypted = encrypter.decrypt(encryptedFile, iv: iv);\r\n    \r\n      final decryptedBytes = latin1.encode(decrypted);\r\n      await outFile.writeAsBytes(decryptedBytes);\r\n      \r\n    }\r\n\r\n\r\n","title":"How can I encrypt video file using Dart?","body":"<p>Here is the solution that I found. Hope it helps. Remember to add the package <a href=\"https://pub.dev/packages/encrypt\" rel=\"noreferrer\">encryption package</a> to pubspec.yaml</p>\n\n<pre><code>import 'dart:convert';\nimport 'dart:io';\n\nimport 'package:encrypt/encrypt.dart';\n\nmain() {\n\n  perfomEncryptionTasks();\n}\n\nperfomEncryptionTasks() async {\n  await encryptFile();\n  await decryptFile();\n}\n\nencryptFile() async {\n  File inFile = new File(\"video.mp4\");\n  File outFile = new File(\"videoenc.aes\");\n\n  bool outFileExists = await outFile.exists();\n\n  if(!outFileExists){\n    await outFile.create();\n  }\n\n  final videoFileContents = await inFile.readAsStringSync(encoding: latin1);\n\n  final key = Key.fromUtf8('my 32 length key................');\n  final iv = IV.fromLength(16);\n\n  final encrypter = Encrypter(AES(key));\n\n  final encrypted = encrypter.encrypt(videoFileContents, iv: iv);\n  await outFile.writeAsBytes(encrypted.bytes);\n}\n\ndecryptFile() async {\n  File inFile = new File(\"videoenc.aes\");\n  File outFile = new File(\"videodec.mp4\");\n\n  bool outFileExists = await outFile.exists();\n\n  if(!outFileExists){\n    await outFile.create();\n  }\n\n  final videoFileContents = await inFile.readAsBytesSync();\n\n  final key = Key.fromUtf8('my 32 length key................');\n  final iv = IV.fromLength(16);\n\n  final encrypter = Encrypter(AES(key));\n\n  final encryptedFile = Encrypted(videoFileContents);\n  final decrypted = encrypter.decrypt(encryptedFile, iv: iv);\n\n  final decryptedBytes = latin1.encode(decrypted);\n  await outFile.writeAsBytes(decryptedBytes);\n\n}\n</code></pre>\n"}],"owner":{"account_id":11131060,"reputation":183,"user_id":8511016,"display_name":"Jan Ndungu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3593,"favorite_count":0,"down_vote_count":2,"up_vote_count":5,"accepted_answer_id":60054142,"answer_count":1,"score":3,"last_activity_date":1668695609,"creation_date":1580371009,"question_id":59981337,"body_markdown":"I am trying to encrypt a video clip using dart. I have tested this java code https://stackoverflow.com/a/9496626/8511016 and would like to do the same but using dart. ","title":"How can I encrypt video file using Dart?","body":"<p>I am trying to encrypt a video clip using dart. I have tested this java code <a href=\"https://stackoverflow.com/a/9496626/8511016\">https://stackoverflow.com/a/9496626/8511016</a> and would like to do the same but using dart. </p>\n"},{"tags":["java","jakarta-ee","jpa","jpql","entities"],"comments":[{"owner":{"account_id":160350,"reputation":11421,"user_id":380338,"display_name":"Neil Stockton"},"score":0,"creation_date":1435241842,"post_id":31052792,"comment_id":50126949,"body_markdown":"you don&#39;t have the same situation as that linked post ... your List is of a String, not an Embeddable. Consequently your JPQL &quot;ideatags.tags&quot; makes no sense at all. So are you trying to find all Idea objects that have a specific &quot;tag&quot; contained?","body":"you don&#39;t have the same situation as that linked post ... your List is of a String, not an Embeddable. Consequently your JPQL &quot;ideatags.tags&quot; makes no sense at all. So are you trying to find all Idea objects that have a specific &quot;tag&quot; contained?"},{"owner":{"account_id":2905205,"reputation":334,"user_id":2490798,"accept_rate":83,"display_name":"jmcorallo"},"score":0,"creation_date":1435242009,"post_id":31052792,"comment_id":50127076,"body_markdown":"Oh thanks (i&#39;m new to JEE and JPQL). Exactly, I want to get all the Idea objects that contain that &quot;tag&quot;","body":"Oh thanks (i&#39;m new to JEE and JPQL). Exactly, I want to get all the Idea objects that contain that &quot;tag&quot;"}],"answers":[{"comments":[{"owner":{"account_id":2905205,"reputation":334,"user_id":2490798,"accept_rate":83,"display_name":"jmcorallo"},"score":0,"creation_date":1435243271,"post_id":31053173,"comment_id":50128174,"body_markdown":"Ok gracias, makes sense. But I&#39;m getting &quot;Syntax error parsing [select i from Idea i where :pTag IN i.tags]. \n[35, 35] The left parenthesis is missing from the IN expression.\n[42, 42] The right parenthesis is missing from the IN expression.&quot; when I try this. Do you know what it can be??","body":"Ok gracias, makes sense. But I&#39;m getting &quot;Syntax error parsing [select i from Idea i where :pTag IN i.tags].  [35, 35] The left parenthesis is missing from the IN expression. [42, 42] The right parenthesis is missing from the IN expression.&quot; when I try this. Do you know what it can be??"},{"owner":{"account_id":2905205,"reputation":334,"user_id":2490798,"accept_rate":83,"display_name":"jmcorallo"},"score":0,"creation_date":1435243328,"post_id":31053173,"comment_id":50128224,"body_markdown":"I tried adding parenthesis like this (:pTag IN i.tags) but didn&#39;t work either","body":"I tried adding parenthesis like this (:pTag IN i.tags) but didn&#39;t work either"},{"owner":{"account_id":160350,"reputation":11421,"user_id":380338,"display_name":"Neil Stockton"},"score":0,"creation_date":1435243377,"post_id":31053173,"comment_id":50128274,"body_markdown":"Put the parentheses around the &quot;i.tags&quot; (since that being a List was only introduced in JPA 2.1 IIRC). Some JPA implementations are weak on that","body":"Put the parentheses around the &quot;i.tags&quot; (since that being a List was only introduced in JPA 2.1 IIRC). Some JPA implementations are weak on that"}],"tags":[],"owner":{"account_id":5813910,"reputation":820,"user_id":4584155,"display_name":"Panchitoboy"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1435243452,"creation_date":1435242275,"answer_id":31053173,"question_id":31052792,"body_markdown":"You have some problems with your query:\r\n\r\n    select ideatags \r\n    from Idea i inner join i.tags ideatags\r\n    where ideatags.tags = :pTag\r\n\r\nYou want the result as Idea but you select a List&lt;String&gt;.\r\n\r\nYou get your List&lt;String&gt; tags in ideatags, therefore you cant get the attribute tag of ideatags.\r\n\r\nif you want to search in the list you have to use IN.\r\n\r\n\r\nYou can try this:\r\n\r\n    select i\r\n    from Idea i\r\n    where :pTag IN (i.tags)","title":"JPQL Query a list of Strings inside an Entity","body":"<p>You have some problems with your query:</p>\n\n<pre><code>select ideatags \nfrom Idea i inner join i.tags ideatags\nwhere ideatags.tags = :pTag\n</code></pre>\n\n<p>You want the result as Idea but you select a List.</p>\n\n<p>You get your List tags in ideatags, therefore you cant get the attribute tag of ideatags.</p>\n\n<p>if you want to search in the list you have to use IN.</p>\n\n<p>You can try this:</p>\n\n<pre><code>select i\nfrom Idea i\nwhere :pTag IN (i.tags)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15763432,"reputation":163,"user_id":11374561,"display_name":"Vikcen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1616012508,"creation_date":1616012508,"answer_id":66680662,"question_id":31052792,"body_markdown":"Try this:\r\n\r\n```\r\nselect e from entity e WHERE :element in elements(e.listOfStrings)\r\n```","title":"JPQL Query a list of Strings inside an Entity","body":"<p>Try this:</p>\n<pre><code>select e from entity e WHERE :element in elements(e.listOfStrings)\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1668928354,"post_id":74477111,"comment_id":131522300,"body_markdown":"As its currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As its currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/74477111/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":14528775,"reputation":1,"user_id":10494256,"display_name":"Roman Katzendorn"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668695186,"creation_date":1668695083,"answer_id":74477111,"question_id":31052792,"body_markdown":"elements() - this work!\r\n\r\nwhere :pTag IN (i.tags) is not work ( ","title":"JPQL Query a list of Strings inside an Entity","body":"<p>elements() - this work!</p>\n<p>where :pTag IN (i.tags) is not work (</p>\n"}],"owner":{"account_id":2905205,"reputation":334,"user_id":2490798,"accept_rate":83,"display_name":"jmcorallo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6064,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":31053173,"answer_count":3,"score":2,"last_activity_date":1668695186,"creation_date":1435241369,"question_id":31052792,"body_markdown":"I&#39;m using Java EE7 with a GlassFish 4.1 Server to build a system where basically you can post Ideas, and each Idea may have tags.\r\nI&#39;ve declared the entity Idea as:\r\n\r\n    @Entity\r\n    @Table(name = &quot;IDEAS&quot;)\r\n    public class Idea implements Serializable {\r\n    \r\n    // Id, description, etc.\r\n    \r\n    @ElementCollection\r\n    private List&lt;String&gt; tags;\r\n    \r\n    // Getters, Setter, etc.\r\n    }\r\n\r\nAfter reading https://stackoverflow.com/questions/9137610/jpa-query-an-embeddable-list-inside-an-entity I tried to find by Tag the following way:\r\n\r\n    public List&lt;Idea&gt; getIdeasWithTag(String tag) {\r\n        String queryStr = &quot;select ideatags from Idea i &quot;\r\n                + &quot;inner join i.tags ideatags &quot;\r\n                + &quot;where ideatags.tags = :pTag&quot;;\r\n        Object res = em.createQuery(queryStr)\r\n                .setParameter(&quot;pTag&quot;, tag)\r\n                .getResultList();\r\n        return (List&lt;Idea&gt;) res;\r\n    }\r\n\r\nBut I&#39;m getting a TransactionRolledbackLocalException caused by:\r\n&gt;Caused by: java.lang.IllegalArgumentException: An exception occurred while creating a query in EntityManager:\r\nException Description: Problem compiling [select ideatags from Idea i inner join i.tags ideatags where ideatags.tags = :pTag]. \r\n[61, 74] The state field path &#39;ideatags.tags&#39; cannot be resolved to a valid type.\r\n\r\nI appreciate any help, thanks in advance!!","title":"JPQL Query a list of Strings inside an Entity","body":"<p>I'm using Java EE7 with a GlassFish 4.1 Server to build a system where basically you can post Ideas, and each Idea may have tags.\nI've declared the entity Idea as:</p>\n\n<pre><code>@Entity\n@Table(name = \"IDEAS\")\npublic class Idea implements Serializable {\n\n// Id, description, etc.\n\n@ElementCollection\nprivate List&lt;String&gt; tags;\n\n// Getters, Setter, etc.\n}\n</code></pre>\n\n<p>After reading <a href=\"https://stackoverflow.com/questions/9137610/jpa-query-an-embeddable-list-inside-an-entity\">JPA: Query an embeddable List inside an entity</a> I tried to find by Tag the following way:</p>\n\n<pre><code>public List&lt;Idea&gt; getIdeasWithTag(String tag) {\n    String queryStr = \"select ideatags from Idea i \"\n            + \"inner join i.tags ideatags \"\n            + \"where ideatags.tags = :pTag\";\n    Object res = em.createQuery(queryStr)\n            .setParameter(\"pTag\", tag)\n            .getResultList();\n    return (List&lt;Idea&gt;) res;\n}\n</code></pre>\n\n<p>But I'm getting a TransactionRolledbackLocalException caused by:</p>\n\n<blockquote>\n  <p>Caused by: java.lang.IllegalArgumentException: An exception occurred while creating a query in EntityManager:\n  Exception Description: Problem compiling [select ideatags from Idea i inner join i.tags ideatags where ideatags.tags = :pTag]. \n  [61, 74] The state field path 'ideatags.tags' cannot be resolved to a valid type.</p>\n</blockquote>\n\n<p>I appreciate any help, thanks in advance!!</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":19257864,"reputation":107,"user_id":14074381,"display_name":"ADP"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1597202104,"creation_date":1597202104,"answer_id":63369227,"question_id":63323707,"body_markdown":"I didn&#39;t understand what was the problem.But it was solved when I changed ```onActivityResult``` to\r\n\r\n```super.onActivityResult(requestCode, resultCode, data);\r\n        switch (requestCode) {\r\n            case 7:\r\n                if (resultCode == RESULT_OK) {\r\n                    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);\r\n                    videoPlayer.setVideoURI(data.getData());\r\n                    videoPlayer.requestFocus();\r\n                    videoPlayer.start();\r\n                }\r\n        }\r\n```","title":"Simple Media Player in Android","body":"<p>I didn't understand what was the problem.But it was solved when I changed <code>onActivityResult</code> to</p>\n<pre><code>        switch (requestCode) {\n            case 7:\n                if (resultCode == RESULT_OK) {\n                    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);\n                    videoPlayer.setVideoURI(data.getData());\n                    videoPlayer.requestFocus();\n                    videoPlayer.start();\n                }\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19252916,"reputation":55,"user_id":14070467,"display_name":"Kushal Prajapati"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663737508,"creation_date":1663737508,"answer_id":73795681,"question_id":63323707,"body_markdown":"Try to set orientation with object of video player\r\n\r\n\r\n\r\n\r\n\r\n\r\n    case 7:\r\n                if (resultCode == RESULT_OK) {\r\n                    String PathHolder = data.getData().getPath();\r\n                    Toast.makeText(this, PathHolder, Toast.LENGTH_SHORT).show();\r\n                    videoPlayer.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);\r\n                    videoPlayer.setVideoURI(Uri.parse(PathHolder));\r\n                    videoPlayer.requestFocus();\r\n                    videoPlayer.start();\r\n                }\r\n \r\n\r\n\r\n","title":"Simple Media Player in Android","body":"<p>Try to set orientation with object of video player</p>\n<pre><code>case 7:\n            if (resultCode == RESULT_OK) {\n                String PathHolder = data.getData().getPath();\n                Toast.makeText(this, PathHolder, Toast.LENGTH_SHORT).show();\n                videoPlayer.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);\n                videoPlayer.setVideoURI(Uri.parse(PathHolder));\n                videoPlayer.requestFocus();\n                videoPlayer.start();\n            }\n</code></pre>\n"}],"owner":{"account_id":19257864,"reputation":107,"user_id":14074381,"display_name":"ADP"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":63369227,"answer_count":2,"score":0,"last_activity_date":1668695105,"creation_date":1596958550,"question_id":63323707,"body_markdown":"I am trying to create a media player without ```MediaPlayer``` class, just a very basic VideoView which selects a file from device and plays it. But I am receiving an error \r\n\r\n&gt; Can&#39;t play this video.\r\n\r\nHere&#39;s my code:\r\n```package com.phantom.player;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.content.Intent;\r\nimport android.content.pm.ActivityInfo;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.widget.Toast;\r\nimport android.widget.VideoView;\r\n\r\npublic class PlayerActivity extends AppCompatActivity {\r\n\r\n    VideoView videoPlayer;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        videoPlayer = findViewById(R.id.videoView);\r\n        Intent intent = new Intent(Intent.ACTION_GET_CONTENT);\r\n        intent.setType(&quot;*/*&quot;);\r\n        startActivityForResult(intent, 7);\r\n    }\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        switch (requestCode) {\r\n            case 7:\r\n                if (resultCode == RESULT_OK) {\r\n                    String PathHolder = data.getData().getPath();\r\n                    Toast.makeText(this, PathHolder, Toast.LENGTH_SHORT).show();\r\n                    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);\r\n                    videoPlayer.setVideoURI(Uri.parse(PathHolder));\r\n                    videoPlayer.requestFocus();\r\n                    videoPlayer.start();\r\n                }\r\n        }\r\n    }\r\n}\r\n``` \r\n\r\nXML file:\r\n```&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:layout_width=&quot;match_parent&quot;&gt;\r\n        &lt;VideoView\r\n        android:id=&quot;@+id/videoView&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        tools:layout_editor_absoluteX=&quot;318dp&quot;\r\n        tools:layout_editor_absoluteY=&quot;716dp&quot; /&gt;\r\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n```\r\n\r\nThis is what logcat shows (i guess this contains the error):\r\n\r\n&gt; 2020-08-09 12:55:37.585 21894-21894/com.phantom.player W/MediaPlayer:\r\n&gt; Couldn&#39;t open /document/primary:WhatsApp/Media/WhatsApp\r\n&gt; Video/VID-20191031-WA0041.mp4\r\n&gt;     java.io.FileNotFoundException: No content provider: /document/primary:WhatsApp/Media/WhatsApp\r\n&gt; Video/VID-20191031-WA0041.mp4\r\n&gt;         at android.content.ContentResolver.openTypedAssetFileDescriptor(ContentResolver.java:1680)\r\n&gt;         at android.content.ContentResolver.openAssetFileDescriptor(ContentResolver.java:1510)\r\n&gt;         at android.content.ContentResolver.openAssetFileDescriptor(ContentResolver.java:1427)\r\n&gt;         at android.media.MediaPlayer.attemptDataSource(MediaPlayer.java:1149)\r\n&gt;         at android.media.MediaPlayer.setDataSource(MediaPlayer.java:1121)\r\n&gt;         at android.media.MediaPlayer.setDataSource(MediaPlayer.java:1145)\r\n&gt;         at android.widget.VideoView.openVideo(VideoView.java:412)\r\n&gt;         at android.widget.VideoView.access$2200(VideoView.java:83)\r\n&gt;         at android.widget.VideoView$7.surfaceCreated(VideoView.java:694)\r\n&gt;         at android.view.SurfaceView.updateSurface(SurfaceView.java:926)\r\n&gt;         at android.view.SurfaceView.windowStopped(SurfaceView.java:315)\r\n&gt;         at android.view.ViewRootImpl.setWindowStopped(ViewRootImpl.java:1973)\r\n&gt;         at android.view.WindowManagerGlobal.setStoppedState(WindowManagerGlobal.java:709)\r\n&gt;         at android.app.Activity.performRestart(Activity.java:8039)\r\n&gt;         at android.app.ActivityThread.handleSleeping(ActivityThread.java:5007)\r\n&gt;         at android.app.ActivityThread.access$2500(ActivityThread.java:268)\r\n&gt;         at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2080)\r\n&gt;         at android.os.Handler.dispatchMessage(Handler.java:107)\r\n&gt;         at android.os.Looper.loop(Looper.java:237)\r\n&gt;         at android.app.ActivityThread.main(ActivityThread.java:7807)\r\n&gt;         at java.lang.reflect.Method.invoke(Native Method)\r\n&gt;         at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)\r\n&gt;         at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1047)\r\n\r\nI am not used to content provider.Please help.","title":"Simple Media Player in Android","body":"<p>I am trying to create a media player without <code>MediaPlayer</code> class, just a very basic VideoView which selects a file from device and plays it. But I am receiving an error</p>\n<blockquote>\n<p>Can't play this video.</p>\n</blockquote>\n<p>Here's my code:</p>\n<pre><code>\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.content.Intent;\nimport android.content.pm.ActivityInfo;\nimport android.net.Uri;\nimport android.os.Bundle;\nimport android.widget.Toast;\nimport android.widget.VideoView;\n\npublic class PlayerActivity extends AppCompatActivity {\n\n    VideoView videoPlayer;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        videoPlayer = findViewById(R.id.videoView);\n        Intent intent = new Intent(Intent.ACTION_GET_CONTENT);\n        intent.setType(&quot;*/*&quot;);\n        startActivityForResult(intent, 7);\n    }\n\n    @Override\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\n        super.onActivityResult(requestCode, resultCode, data);\n        switch (requestCode) {\n            case 7:\n                if (resultCode == RESULT_OK) {\n                    String PathHolder = data.getData().getPath();\n                    Toast.makeText(this, PathHolder, Toast.LENGTH_SHORT).show();\n                    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);\n                    videoPlayer.setVideoURI(Uri.parse(PathHolder));\n                    videoPlayer.requestFocus();\n                    videoPlayer.start();\n                }\n        }\n    }\n}\n</code></pre>\n<p>XML file:</p>\n<pre><code>&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_height=&quot;match_parent&quot;\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;match_parent&quot;&gt;\n        &lt;VideoView\n        android:id=&quot;@+id/videoView&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        tools:layout_editor_absoluteX=&quot;318dp&quot;\n        tools:layout_editor_absoluteY=&quot;716dp&quot; /&gt;\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p>This is what logcat shows (i guess this contains the error):</p>\n<blockquote>\n<p>2020-08-09 12:55:37.585 21894-21894/com.phantom.player W/MediaPlayer:\nCouldn't open /document/primary:WhatsApp/Media/WhatsApp\nVideo/VID-20191031-WA0041.mp4\njava.io.FileNotFoundException: No content provider: /document/primary:WhatsApp/Media/WhatsApp\nVideo/VID-20191031-WA0041.mp4\nat android.content.ContentResolver.openTypedAssetFileDescriptor(ContentResolver.java:1680)\nat android.content.ContentResolver.openAssetFileDescriptor(ContentResolver.java:1510)\nat android.content.ContentResolver.openAssetFileDescriptor(ContentResolver.java:1427)\nat android.media.MediaPlayer.attemptDataSource(MediaPlayer.java:1149)\nat android.media.MediaPlayer.setDataSource(MediaPlayer.java:1121)\nat android.media.MediaPlayer.setDataSource(MediaPlayer.java:1145)\nat android.widget.VideoView.openVideo(VideoView.java:412)\nat android.widget.VideoView.access$2200(VideoView.java:83)\nat android.widget.VideoView$7.surfaceCreated(VideoView.java:694)\nat android.view.SurfaceView.updateSurface(SurfaceView.java:926)\nat android.view.SurfaceView.windowStopped(SurfaceView.java:315)\nat android.view.ViewRootImpl.setWindowStopped(ViewRootImpl.java:1973)\nat android.view.WindowManagerGlobal.setStoppedState(WindowManagerGlobal.java:709)\nat android.app.Activity.performRestart(Activity.java:8039)\nat android.app.ActivityThread.handleSleeping(ActivityThread.java:5007)\nat android.app.ActivityThread.access$2500(ActivityThread.java:268)\nat android.app.ActivityThread$H.handleMessage(ActivityThread.java:2080)\nat android.os.Handler.dispatchMessage(Handler.java:107)\nat android.os.Looper.loop(Looper.java:237)\nat android.app.ActivityThread.main(ActivityThread.java:7807)\nat java.lang.reflect.Method.invoke(Native Method)\nat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1047)</p>\n</blockquote>\n<p>I am not used to content provider.Please help.</p>\n"},{"tags":["java","regex"],"answers":[{"tags":[],"owner":{"account_id":9118538,"reputation":319,"user_id":6784846,"display_name":"Annamalai Palanikumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1668694681,"creation_date":1668694681,"answer_id":74477012,"question_id":74475963,"body_markdown":"You may need to refer to the documentation of **Container element constraints**.\r\n\r\n    List&lt;@Pattern(regexp = &quot;^(.+)@(gmail.com)$&quot;) String&gt; mails;\r\n\r\nReference: https://beanvalidation.org/2.0/spec/#constraintdeclarationvalidationprocess-containerelementconstraints","title":"Pattern constraints for a list of strings","body":"<p>You may need to refer to the documentation of <strong>Container element constraints</strong>.</p>\n<pre><code>List&lt;@Pattern(regexp = &quot;^(.+)@(gmail.com)$&quot;) String&gt; mails;\n</code></pre>\n<p>Reference: <a href=\"https://beanvalidation.org/2.0/spec/#constraintdeclarationvalidationprocess-containerelementconstraints\" rel=\"nofollow noreferrer\">https://beanvalidation.org/2.0/spec/#constraintdeclarationvalidationprocess-containerelementconstraints</a></p>\n"}],"owner":{"account_id":20518165,"reputation":25,"user_id":15058338,"display_name":"Ioanaa 98"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":128,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":74477012,"answer_count":1,"score":0,"last_activity_date":1668694681,"creation_date":1668690277,"question_id":74475963,"body_markdown":"I have a `List&lt;String&gt;` that contains a list of emails, something like  \r\n`{&quot;email1@gmail.com&quot;, &quot;email2@gmail.com&quot;}`\r\n\r\nThe problem is I don&#39;t really know how to create a @Pattern, and I want to put the condition that the pattern should only allow emails from list that ends with `@gmail.com`. I used\r\n\r\n    @Pattern(regexp = &quot;^(.+)@(.+)$&quot;)\r\n\r\nfor the case when I had a String, not a List&lt;String&gt;.","title":"Pattern constraints for a list of strings","body":"<p>I have a <code>List&lt;String&gt;</code> that contains a list of emails, something like<br />\n<code>{&quot;email1@gmail.com&quot;, &quot;email2@gmail.com&quot;}</code></p>\n<p>The problem is I don't really know how to create a @Pattern, and I want to put the condition that the pattern should only allow emails from list that ends with <code>@gmail.com</code>. I used</p>\n<pre><code>@Pattern(regexp = &quot;^(.+)@(.+)$&quot;)\n</code></pre>\n<p>for the case when I had a String, not a List.</p>\n"},{"tags":["java","arraylist"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":3,"creation_date":1668608148,"post_id":74461952,"comment_id":131446807,"body_markdown":"of course you can save them, and you are doing so, but you declare those ints in those if-else blocks, meaning they don&#39;t exist outside of the scope of them. declare the variable before the if, and just assign the value in the if-else blocks to solve your issues","body":"of course you can save them, and you are doing so, but you declare those ints in those if-else blocks, meaning they don&#39;t exist outside of the scope of them. declare the variable before the if, and just assign the value in the if-else blocks to solve your issues"},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1668608159,"post_id":74461952,"comment_id":131446812,"body_markdown":"You define the variable inside curly braces. It does not exist outside of those braces. That is called the scope of the variable.","body":"You define the variable inside curly braces. It does not exist outside of those braces. That is called the scope of the variable."},{"owner":{"account_id":6338626,"reputation":2513,"user_id":4921317,"accept_rate":91,"display_name":"Gatusko"},"score":1,"creation_date":1668608192,"post_id":74461952,"comment_id":131446830,"body_markdown":"You need to understand a lot more about scopes. Currently your variable maxSize is only working in the scope of if.","body":"You need to understand a lot more about scopes. Currently your variable maxSize is only working in the scope of if."},{"owner":{"display_name":"user6073886"},"score":0,"creation_date":1668608204,"post_id":74461952,"comment_id":131446834,"body_markdown":"You are misinterpreting the error you get. Of course you can save the size in an in t variable and you do that at 2 places in your code. Your error is however that you try to use those maxSize variables outside their scope. See [What is &#39;scope&#39; in Java?](https://stackoverflow.com/questions/38177140/what-is-scope-in-java)","body":"You are misinterpreting the error you get. Of course you can save the size in an in t variable and you do that at 2 places in your code. Your error is however that you try to use those maxSize variables outside their scope. See <a href=\"https://stackoverflow.com/questions/38177140/what-is-scope-in-java\">What is &#39;scope&#39; in Java?</a>"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1668651119,"post_id":74461952,"comment_id":131459838,"body_markdown":"https://docs.oracle.com/javase/tutorial/java/TOC.html","body":"<a href=\"https://docs.oracle.com/javase/tutorial/java/TOC.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/java/TOC.html</a>"}],"answers":[{"comments":[{"owner":{"account_id":26555431,"reputation":558,"user_id":20184128,"display_name":"berse2212"},"score":1,"creation_date":1668609147,"post_id":74462030,"comment_id":131447250,"body_markdown":"Just a small addition - be careful if you store the size in a Variable because it does not get updated when the size of the ArrayList increases or decreases.","body":"Just a small addition - be careful if you store the size in a Variable because it does not get updated when the size of the ArrayList increases or decreases."},{"owner":{"account_id":1198039,"reputation":10944,"user_id":1169349,"display_name":"Reg"},"score":1,"creation_date":1668609458,"post_id":74462030,"comment_id":131447400,"body_markdown":"@berse2212 Good point, I added to the answer for completeness :)","body":"@berse2212 Good point, I added to the answer for completeness :)"},{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":0,"creation_date":1668618639,"post_id":74462030,"comment_id":131451212,"body_markdown":"Is there any benefit to initializing maxSize to 0? Yes, I know, &quot;All variables must be initialized!!!!!&quot; But you *are* initializing maxSize, in row 3 or 5. AFAICT the only effect this dummy-initialization has is suppressing the compiler warning if you forget the real initialization in one of the branches.","body":"Is there any benefit to initializing maxSize to 0? Yes, I know, &quot;All variables must be initialized!!!!!&quot; But you <i>are</i> initializing maxSize, in row 3 or 5. AFAICT the only effect this dummy-initialization has is suppressing the compiler warning if you forget the real initialization in one of the branches."},{"owner":{"account_id":1198039,"reputation":10944,"user_id":1169349,"display_name":"Reg"},"score":1,"creation_date":1668673391,"post_id":74462030,"comment_id":131464207,"body_markdown":"Hi @S&#246;ren! Maybe consider asking a question or searching SO on this one. There is a lot to unpack in your simple question, but let me try. First, Not *All* variables should be initialized; only local ones (Fields or instance-level variables will be set to a default value).  Secondly, it is not a compiler warning, it is a compiler error when a local variable is not initiated(code will not compile). Finally, in the example above, there will be no error if not initiated, as the compiler is smart enough to evaluate if-else statements. Change it to an if-else-if then there will be a compiler error.","body":"Hi @S&#246;ren! Maybe consider asking a question or searching SO on this one. There is a lot to unpack in your simple question, but let me try. First, Not <i>All</i> variables should be initialized; only local ones (Fields or instance-level variables will be set to a default value).  Secondly, it is not a compiler warning, it is a compiler error when a local variable is not initiated(code will not compile). Finally, in the example above, there will be no error if not initiated, as the compiler is smart enough to evaluate if-else statements. Change it to an if-else-if then there will be a compiler error."},{"owner":{"account_id":1198039,"reputation":10944,"user_id":1169349,"display_name":"Reg"},"score":0,"creation_date":1668673527,"post_id":74462030,"comment_id":131464273,"body_markdown":"Finally - I assigned it to 0, as the main focus of the question is regarding &quot;the scope&quot; and not initialising variables.  It is a matter of preference, not a matter of any advantages.","body":"Finally - I assigned it to 0, as the main focus of the question is regarding &quot;the scope&quot; and not initialising variables.  It is a matter of preference, not a matter of any advantages."}],"tags":[],"owner":{"account_id":1198039,"reputation":10944,"user_id":1169349,"display_name":"Reg"},"comment_count":5,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1668675024,"creation_date":1668608271,"answer_id":74462030,"question_id":74461952,"body_markdown":"## TLDR;\r\nJust declare maxSize above the if and else statements. And Bob&#39;s your uncle. Then you can use maxSize everywhere in your method/function.\r\n\r\n## Solution\r\n\r\nThis is a scope problem. To solve your issue, declare the variable (maxSize) outside the brackets of the if-else statement.\r\nWhen you declare them in the brackets, you will only be able to use them within them (Scope).  \r\n\r\n\r\n    int maxSize = 0;\r\n    if (list1.size() &gt;= list2.size()) {\r\n        maxSize = list1.size(); \r\n    } else {\r\n        maxSize = list2.size();\r\n    }\r\n    \r\n    // Now maxSize can be used as you wish :)\r\n    for (int i = 0; i &lt; maxSize; i++) { ...\r\n\r\n   \r\n**Notes:**\r\n- As @berse2212 pointed out if you add or remove items to your array, you need to update your maxSize again. \r\n- Also, like with @so-random-dude showed, you can replace the if else statement with this gem :\r\n\r\n&gt; int maxSize = Math.max(list1.size(), list2.size());\r\n\r\n## What on earth is Scope about?\r\n\r\nScope defines the lifetime of a variable. Let&#39;s take a deeper look at your example. For simplicity, let us ignore the else.\r\n\r\n\r\n```\r\n...\r\n    if (list1.size() &gt;= list2.size()) {\r\n        // Start If statement&#39;s Scope. \r\n        int maxSize = list1.size(); // Add maxSize to scope\r\n        // Max Size is in scope and can be used as you wish\r\n        // End the scope, in other words, maxSize does not exist anymore.\r\n    }\r\n\r\n// maxSize has left the building, and the compiler does not know about it.\r\n... \r\n```\r\n\r\nThis is just a small example. But you can find more (and better) information [here][1] or [here][2]\r\n\r\nHope this helps \r\n\r\n\r\n  [1]: https://www.w3schools.com/java/java_scope.asp\r\n  [2]: https://stackoverflow.com/questions/38177140/what-is-scope-in-java","title":"ArrayList size as a variable","body":"<h2>TLDR;</h2>\n<p>Just declare maxSize above the if and else statements. And Bob's your uncle. Then you can use maxSize everywhere in your method/function.</p>\n<h2>Solution</h2>\n<p>This is a scope problem. To solve your issue, declare the variable (maxSize) outside the brackets of the if-else statement.\nWhen you declare them in the brackets, you will only be able to use them within them (Scope).</p>\n<pre><code>int maxSize = 0;\nif (list1.size() &gt;= list2.size()) {\n    maxSize = list1.size(); \n} else {\n    maxSize = list2.size();\n}\n\n// Now maxSize can be used as you wish :)\nfor (int i = 0; i &lt; maxSize; i++) { ...\n</code></pre>\n<p><strong>Notes:</strong></p>\n<ul>\n<li>As @berse2212 pointed out if you add or remove items to your array, you need to update your maxSize again.</li>\n<li>Also, like with @so-random-dude showed, you can replace the if else statement with this gem :</li>\n</ul>\n<blockquote>\n<p>int maxSize = Math.max(list1.size(), list2.size());</p>\n</blockquote>\n<h2>What on earth is Scope about?</h2>\n<p>Scope defines the lifetime of a variable. Let's take a deeper look at your example. For simplicity, let us ignore the else.</p>\n<pre><code>...\n    if (list1.size() &gt;= list2.size()) {\n        // Start If statement's Scope. \n        int maxSize = list1.size(); // Add maxSize to scope\n        // Max Size is in scope and can be used as you wish\n        // End the scope, in other words, maxSize does not exist anymore.\n    }\n\n// maxSize has left the building, and the compiler does not know about it.\n... \n</code></pre>\n<p>This is just a small example. But you can find more (and better) information <a href=\"https://www.w3schools.com/java/java_scope.asp\" rel=\"nofollow noreferrer\">here</a> or <a href=\"https://stackoverflow.com/questions/38177140/what-is-scope-in-java\">here</a></p>\n<p>Hope this helps</p>\n"},{"tags":[],"owner":{"account_id":9120249,"reputation":15521,"user_id":6785908,"accept_rate":70,"display_name":"so-random-dude"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1668694418,"creation_date":1668608515,"answer_id":74462094,"question_id":74461952,"body_markdown":"As others have already pointed out, it&#39;s indeed a scope problem. The variable `maxSize` is born and died with in the `if` block (and another one with the same name again in the `else` block - See, compiler didn&#39;t complain even when you had 2 reference variables with the same name, one in the if block and another one in the else block - Because compiler knows that the `maxSize` that you created in the `if` is out-of-scope for `else` ). \r\n\r\nWhat Reg given is the correct solution\r\n\r\nThe following is just a different, concise way to solve the problem\r\n\r\n You can use **ternary operator** like this\r\n\r\n    int maxSize = (list1.size() &gt;= list2.size()) ? list1.size() : list2.size();\r\n\r\nOr even better\r\n\r\n    int maxSize = Math.max(list1.size(), list2.size());\r\n\r\n\r\nAlso, next time, when you ask the question, try to isolate the problem and eliminate all the unnecessary details. For example, in this case, if you have tried\r\n\r\n    if (true) {\r\n            int maxSize = 1; \r\n        } else {\r\n            int maxSize = 2;\r\n        }\r\n    \r\n    System.out.println(maxSize); // Compiler will scream at you.\r\n\r\nyou could have avoided talking about arrayList and come to the crux of the problem. See, arrayList was just a red herring, Probably you could have figured it all by yourself.\r\n","title":"ArrayList size as a variable","body":"<p>As others have already pointed out, it's indeed a scope problem. The variable <code>maxSize</code> is born and died with in the <code>if</code> block (and another one with the same name again in the <code>else</code> block - See, compiler didn't complain even when you had 2 reference variables with the same name, one in the if block and another one in the else block - Because compiler knows that the <code>maxSize</code> that you created in the <code>if</code> is out-of-scope for <code>else</code> ).</p>\n<p>What Reg given is the correct solution</p>\n<p>The following is just a different, concise way to solve the problem</p>\n<p>You can use <strong>ternary operator</strong> like this</p>\n<pre><code>int maxSize = (list1.size() &gt;= list2.size()) ? list1.size() : list2.size();\n</code></pre>\n<p>Or even better</p>\n<pre><code>int maxSize = Math.max(list1.size(), list2.size());\n</code></pre>\n<p>Also, next time, when you ask the question, try to isolate the problem and eliminate all the unnecessary details. For example, in this case, if you have tried</p>\n<pre><code>if (true) {\n        int maxSize = 1; \n    } else {\n        int maxSize = 2;\n    }\n\nSystem.out.println(maxSize); // Compiler will scream at you.\n</code></pre>\n<p>you could have avoided talking about arrayList and come to the crux of the problem. See, arrayList was just a red herring, Probably you could have figured it all by yourself.</p>\n"},{"tags":[],"owner":{"account_id":10836,"reputation":196641,"user_id":20654,"accept_rate":80,"display_name":"OscarRyz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668616897,"creation_date":1668616450,"answer_id":74464091,"question_id":74461952,"body_markdown":"The variable is scoped to the `if`, declare it outside to bring it to scope:\r\n\r\n```java\r\nint maxSize;\r\nif (condition) {\r\n   maxSize = ... \r\n} else {\r\n   maxSize = ... \r\n}\r\n// now can be used in the for\r\nfor (int i = 0; i &lt; maxSize; i++ ) {\r\n}\r\n```\r\n\r\nAs pointed in [another answer](https://stackoverflow.com/a/74462094/20654), you can also use the ternary operator\r\n\r\n```java\r\nint maxSize = list1.size() &gt;= list2.size() ? list1.size() : list2.size(); \r\nfor (int i = 0; i &lt; maxSize; i++ ) {\r\n}\r\n```\r\nJust be aware to balance readability.  ","title":"ArrayList size as a variable","body":"<p>The variable is scoped to the <code>if</code>, declare it outside to bring it to scope:</p>\n<pre class=\"lang-java prettyprint-override\"><code>int maxSize;\nif (condition) {\n   maxSize = ... \n} else {\n   maxSize = ... \n}\n// now can be used in the for\nfor (int i = 0; i &lt; maxSize; i++ ) {\n}\n</code></pre>\n<p>As pointed in <a href=\"https://stackoverflow.com/a/74462094/20654\">another answer</a>, you can also use the ternary operator</p>\n<pre class=\"lang-java prettyprint-override\"><code>int maxSize = list1.size() &gt;= list2.size() ? list1.size() : list2.size(); \nfor (int i = 0; i &lt; maxSize; i++ ) {\n}\n</code></pre>\n<p>Just be aware to balance readability.</p>\n"}],"owner":{"account_id":26424622,"reputation":31,"user_id":20071783,"display_name":"Ida"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":140,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":74462030,"answer_count":3,"score":0,"last_activity_date":1668694418,"creation_date":1668608021,"question_id":74461952,"body_markdown":"Why can&#39;t I save ArrayList size as a variable?\r\n\r\n```\r\npublic static ArrayList &lt;Integer &gt; merge(ArrayList &lt;Integer &gt; list1,\r\n                                          ArrayList &lt;Integer &gt; list2 ) {\r\n\r\n    if (list1.size() &gt;= list2.size()) {\r\n        int maxSize = list1.size(); \r\n    } else {\r\n        int maxSize = list2.size();\r\n    }\r\n\r\n    for (int i = 0; i &lt; maxSize; i++) {\r\n\r\n        if (i &lt;= list2.size()) {\r\n            int nextInList2 = list2.get(i);\r\n            list1.add(i, nextInList2);\r\n        }\r\n    }\r\n    System.out.println(list1);\r\n    return (list1);\r\n```\r\n\r\nin:\r\nint maxSize = list1.size(); \r\nI assume that it&#39;s not saving the variable as I want to.\r\n\r\n\r\n\r\nI assume that \r\n```\r\nlist1.size()\r\n```\r\nis an integer","title":"ArrayList size as a variable","body":"<p>Why can't I save ArrayList size as a variable?</p>\n<pre><code>public static ArrayList &lt;Integer &gt; merge(ArrayList &lt;Integer &gt; list1,\n                                          ArrayList &lt;Integer &gt; list2 ) {\n\n    if (list1.size() &gt;= list2.size()) {\n        int maxSize = list1.size(); \n    } else {\n        int maxSize = list2.size();\n    }\n\n    for (int i = 0; i &lt; maxSize; i++) {\n\n        if (i &lt;= list2.size()) {\n            int nextInList2 = list2.get(i);\n            list1.add(i, nextInList2);\n        }\n    }\n    System.out.println(list1);\n    return (list1);\n</code></pre>\n<p>in:\nint maxSize = list1.size();\nI assume that it's not saving the variable as I want to.</p>\n<p>I assume that</p>\n<pre><code>list1.size()\n</code></pre>\n<p>is an integer</p>\n"},{"tags":["javascript","java","android","react-native"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1668593478,"post_id":74458607,"comment_id":131441212,"body_markdown":"most likely, it&#39;s issues with syntax, but since you didn&#39;t provide any of the code you&#39;ve written, nor shown the actual errors, there&#39;s not much we can say","body":"most likely, it&#39;s issues with syntax, but since you didn&#39;t provide any of the code you&#39;ve written, nor shown the actual errors, there&#39;s not much we can say"},{"owner":{"account_id":6818910,"reputation":156,"user_id":12238257,"display_name":"MAYUR SANCHETI"},"score":0,"creation_date":1668593995,"post_id":74458607,"comment_id":131441423,"body_markdown":"@Slavi Enchev ,  add your gradle code here so we help you.  and top right side of your image click on &quot;17&quot; -- this is shows error comes in program.","body":"@Slavi Enchev ,  add your gradle code here so we help you.  and top right side of your image click on &quot;17&quot; -- this is shows error comes in program."},{"owner":{"account_id":26948810,"reputation":11,"user_id":20518365,"display_name":"Slavi Enchev"},"score":0,"creation_date":1668595982,"post_id":74458607,"comment_id":131442161,"body_markdown":"@Stultuske I have updated the question, hope it&#39;s what you&#39;ve asked for. Thank you so much for replying.","body":"@Stultuske I have updated the question, hope it&#39;s what you&#39;ve asked for. Thank you so much for replying."},{"owner":{"account_id":26948810,"reputation":11,"user_id":20518365,"display_name":"Slavi Enchev"},"score":0,"creation_date":1668596021,"post_id":74458607,"comment_id":131442181,"body_markdown":"@MAYUR SANCHETI I have updated it for you too, I appreciate your answer.","body":"@MAYUR SANCHETI I have updated it for you too, I appreciate your answer."}],"owner":{"account_id":26948810,"reputation":11,"user_id":20518365,"display_name":"Slavi Enchev"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":119,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1668694285,"creation_date":1668593289,"question_id":74458607,"body_markdown":"I&#39;ve been trying to get an app running on Android Studio for a couple of days but no results so far.\r\nWhen running the app it gets up to\r\n[1000 errors](https://i.stack.imgur.com/BH8Eb.png)\r\nin the project, \r\n[like imports from react-native, symbols and some other stuff.](https://i.stack.imgur.com/mONkb.png)\r\n\r\nI have downloaded the project, installed the packages with &#39;yarn install&#39;, imported and made the configurations on Android Studio, installed the necessary tools so I can use the app (jdk, sdk, etc) but nothing seems to going smoothly, already hate it.\r\n\r\n- Android Studio Version:  Bumblebee 2021.1.1 Canary 11\r\n- SDK 28.0.3\r\n- Node: 16.4.0\r\n- react-native-cli: 2.0.1\r\n- react-native: 0.60.4\r\n- Anroid Gradle Plugin: 3.5.1\r\n- Gradle Version: 5.4.1\r\n- Gradle JDK: 11.0.11\r\n\r\n\r\nbuild.grandle:\r\n\r\n        buildscript {\r\n        ext {\r\n        buildToolsVersion = &quot;28.0.3&quot;\r\n        minSdkVersion = 23\r\n        //        googlePlayServicesVersion = &quot;17.0.2&quot;\r\n        compileSdkVersion = &quot;28&quot;\r\n        targetSdkVersion = &quot;28&quot;\r\n        supportLibVersion = &#39;1.0.2&#39;\r\n        mediaCompatVersion = &#39;1.0.1&#39;\r\n        supportV4Version = &#39;1.0.0&#39;\r\n          }\r\n           repositories {\r\n        google()\r\n        jcenter()\r\n          }\r\n         dependencies {\r\n        classpath(&#39;com.android.tools.build:gradle:3.5.1&#39;)\r\n\r\n        }\r\n      }\r\n\r\n           allprojects {\r\n           repositories {\r\n            mavenLocal()\r\n            maven {\r\n            // All of React Native (JS, Obj-C sources, Android binaries) is installed from npm\r\n            url(&quot;$rootDir/../node_modules/react-native/android&quot;)\r\n        }\r\n        maven {\r\n            // Android JSC is installed from npm\r\n            url(&quot;$rootDir/../node_modules/jsc-android/dist&quot;)\r\n        }\r\n\r\n        google()\r\n        jcenter()\r\n          }\r\n        }\r\n\r\n             subprojects {\r\n         afterEvaluate { project -&gt;\r\n        if (project.hasProperty(&quot;android&quot;)) {\r\n            android {\r\n                compileSdkVersion 28\r\n                buildToolsVersion &quot;28.0.3&quot;\r\n\r\n                lintOptions {\r\n                    abortOnError false\r\n                }\r\n            }\r\n        }\r\n       }\r\n      }\r\n\r\n\r\n\r\nERRORS:\r\n[CLICK HERE][1]\r\n[![moar][2]][2]\r\nC:\\Users\\senchev\\Desktop\\workpls\\allexc-app-react-native\\allexc-app-react-native\\node_modules\\@react-native-community\\async-storage\\android\\src\\main\\java\\com\\reactnativecommunity\\asyncstorage\\AsyncStoragePackage.java:33: error: cannot find symbol\r\n    public List&lt;ViewManager&gt; createViewManagers(ReactApplicationContext reactContext) {\r\n                ^\r\n  symbol:   class ViewManager\r\n  location: class AsyncStoragePackage\r\n\r\n[here&#39;s more][3]\r\n\r\n\r\nI have tried:\r\n\r\n1. Installing different versions of SDK, JDK, grandle, Android Studio\r\n2. Syncing project with grade files (a thousand times)\r\n3. Deleting .idea &amp; .grandle folder.\r\n4. Build &gt; clean &amp; rebuild\r\n5. Invalidate cache and restart(including the clear file system cache and local history)\r\nand maybe some other things but I can&#39;t seem to rememeber.\r\n\r\nSame errors appear when I have tried all those things.\r\n\r\nI thought it was a problem with the library but they are imported and I&#39;m really confused...\r\n\r\nhelp\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ePxUl.png\r\n  [2]: https://i.stack.imgur.com/5VxwT.png\r\n  [3]: https://i.stack.imgur.com/40qSQ.png","title":"Android Studio cannot resolve symbols and recognise packages","body":"<p>I've been trying to get an app running on Android Studio for a couple of days but no results so far.\nWhen running the app it gets up to\n<a href=\"https://i.stack.imgur.com/BH8Eb.png\" rel=\"nofollow noreferrer\">1000 errors</a>\nin the project,\n<a href=\"https://i.stack.imgur.com/mONkb.png\" rel=\"nofollow noreferrer\">like imports from react-native, symbols and some other stuff.</a></p>\n<p>I have downloaded the project, installed the packages with 'yarn install', imported and made the configurations on Android Studio, installed the necessary tools so I can use the app (jdk, sdk, etc) but nothing seems to going smoothly, already hate it.</p>\n<ul>\n<li>Android Studio Version:  Bumblebee 2021.1.1 Canary 11</li>\n<li>SDK 28.0.3</li>\n<li>Node: 16.4.0</li>\n<li>react-native-cli: 2.0.1</li>\n<li>react-native: 0.60.4</li>\n<li>Anroid Gradle Plugin: 3.5.1</li>\n<li>Gradle Version: 5.4.1</li>\n<li>Gradle JDK: 11.0.11</li>\n</ul>\n<p>build.grandle:</p>\n<pre><code>    buildscript {\n    ext {\n    buildToolsVersion = &quot;28.0.3&quot;\n    minSdkVersion = 23\n    //        googlePlayServicesVersion = &quot;17.0.2&quot;\n    compileSdkVersion = &quot;28&quot;\n    targetSdkVersion = &quot;28&quot;\n    supportLibVersion = '1.0.2'\n    mediaCompatVersion = '1.0.1'\n    supportV4Version = '1.0.0'\n      }\n       repositories {\n    google()\n    jcenter()\n      }\n     dependencies {\n    classpath('com.android.tools.build:gradle:3.5.1')\n\n    }\n  }\n\n       allprojects {\n       repositories {\n        mavenLocal()\n        maven {\n        // All of React Native (JS, Obj-C sources, Android binaries) is installed from npm\n        url(&quot;$rootDir/../node_modules/react-native/android&quot;)\n    }\n    maven {\n        // Android JSC is installed from npm\n        url(&quot;$rootDir/../node_modules/jsc-android/dist&quot;)\n    }\n\n    google()\n    jcenter()\n      }\n    }\n\n         subprojects {\n     afterEvaluate { project -&gt;\n    if (project.hasProperty(&quot;android&quot;)) {\n        android {\n            compileSdkVersion 28\n            buildToolsVersion &quot;28.0.3&quot;\n\n            lintOptions {\n                abortOnError false\n            }\n        }\n    }\n   }\n  }\n</code></pre>\n<p>ERRORS:\n<a href=\"https://i.stack.imgur.com/ePxUl.png\" rel=\"nofollow noreferrer\">CLICK HERE</a>\n<a href=\"https://i.stack.imgur.com/5VxwT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5VxwT.png\" alt=\"moar\" /></a>\nC:\\Users\\senchev\\Desktop\\workpls\\allexc-app-react-native\\allexc-app-react-native\\node_modules@react-native-community\\async-storage\\android\\src\\main\\java\\com\\reactnativecommunity\\asyncstorage\\AsyncStoragePackage.java:33: error: cannot find symbol\npublic List createViewManagers(ReactApplicationContext reactContext) {\n^\nsymbol:   class ViewManager\nlocation: class AsyncStoragePackage</p>\n<p><a href=\"https://i.stack.imgur.com/40qSQ.png\" rel=\"nofollow noreferrer\">here's more</a></p>\n<p>I have tried:</p>\n<ol>\n<li>Installing different versions of SDK, JDK, grandle, Android Studio</li>\n<li>Syncing project with grade files (a thousand times)</li>\n<li>Deleting .idea &amp; .grandle folder.</li>\n<li>Build &gt; clean &amp; rebuild</li>\n<li>Invalidate cache and restart(including the clear file system cache and local history)\nand maybe some other things but I can't seem to rememeber.</li>\n</ol>\n<p>Same errors appear when I have tried all those things.</p>\n<p>I thought it was a problem with the library but they are imported and I'm really confused...</p>\n<p>help</p>\n"},{"tags":["java","generics","collections","java-stream"],"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1668676294,"post_id":74472542,"comment_id":131465254,"body_markdown":"No. Theres no even a guaranty that it is possible to construct a collection of the same type, in general. Just think about what should happen when someone passes [`someMap.values()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html#values()) to your method.","body":"No. Theres no even a guaranty that it is possible to construct a collection of the same type, in general. Just think about what should happen when someone passes <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html#values()\" rel=\"nofollow noreferrer\"><code>someMap.values()</code></a> to your method."}],"answers":[{"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1668683879,"post_id":74473719,"comment_id":131468129,"body_markdown":"Note that in your example, `limited` will have the type `List` rather than `ArrayList`, as the first argument is not an `ArrayList`. Requiring the first argument to be of the same type, is an unnecessary restriction anyway; you can convert any `Collection&lt;E&gt;` to `T` with this method if you just declare the first parameter that way.","body":"Note that in your example, <code>limited</code> will have the type <code>List</code> rather than <code>ArrayList</code>, as the first argument is not an <code>ArrayList</code>. Requiring the first argument to be of the same type, is an unnecessary restriction anyway; you can convert any <code>Collection&lt;E&gt;</code> to <code>T</code> with this method if you just declare the first parameter that way."},{"owner":{"account_id":22807677,"reputation":414,"user_id":16959486,"display_name":"Teddy Tsai"},"score":0,"creation_date":1668686123,"post_id":74473719,"comment_id":131468921,"body_markdown":"I guess it does the trick, even though some more code is required, could be useful for some more complicated pipelines.","body":"I guess it does the trick, even though some more code is required, could be useful for some more complicated pipelines."}],"tags":[],"owner":{"account_id":173621,"reputation":10596,"user_id":402428,"display_name":"michid"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1668694217,"creation_date":1668680412,"answer_id":74473719,"question_id":74472542,"body_markdown":"There&#39;s no sane (*) way to create a new collection of the generic type `T` inside `limit`. Your best bet is to pass a factory for creating that type into the `limit` function: \r\n\r\n    public static &lt;E, T extends Collection&lt;E&gt;&gt; T limit(T collection, long limit, Supplier&lt;T&gt; factory) {\r\n        return collection.stream()\r\n            .limit(limit)\r\n            .collect(Collectors.toCollection(factory));\r\n    }\r\n\r\nand use it like this:\r\n\r\n    var limited = limit(List.of(1, 2, 3, 4), 2, ArrayList::new);\r\n\r\n(*) You could resort to [using reflection][1], but that would not work with all collection types and thus defeat the purpose of genericity.  \r\n\r\n\r\n  [1]: https://stackoverflow.com/a/74473721/402428","title":"Collect stream to generic Collection","body":"<p>There's no sane (*) way to create a new collection of the generic type <code>T</code> inside <code>limit</code>. Your best bet is to pass a factory for creating that type into the <code>limit</code> function:</p>\n<pre><code>public static &lt;E, T extends Collection&lt;E&gt;&gt; T limit(T collection, long limit, Supplier&lt;T&gt; factory) {\n    return collection.stream()\n        .limit(limit)\n        .collect(Collectors.toCollection(factory));\n}\n</code></pre>\n<p>and use it like this:</p>\n<pre><code>var limited = limit(List.of(1, 2, 3, 4), 2, ArrayList::new);\n</code></pre>\n<p>(*) You could resort to <a href=\"https://stackoverflow.com/a/74473721/402428\">using reflection</a>, but that would not work with all collection types and thus defeat the purpose of genericity.</p>\n"},{"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1668683679,"post_id":74473721,"comment_id":131468055,"body_markdown":"Not only does this not work with unmodifiable collections, it also doesnt work with `EnumSet`, synchronized collections, checked collections, `Arrays.asList`, sublists, as well as `keySet()`, `entrySet()`, and `values()` from a `Map`. Even with `TreeSet` which happens to have a default constructor, theres some chance that it will not do the right thing, i.e. if the source set has a comparator. And whats this hack worth anyway, when you change the return type to `Collection` instead of the source type?","body":"Not only does this not work with unmodifiable collections, it also doesnt work with <code>EnumSet</code>, synchronized collections, checked collections, <code>Arrays.asList</code>, sublists, as well as <code>keySet()</code>, <code>entrySet()</code>, and <code>values()</code> from a <code>Map</code>. Even with <code>TreeSet</code> which happens to have a default constructor, theres some chance that it will not do the right thing, i.e. if the source set has a comparator. And whats this hack worth anyway, when you change the return type to <code>Collection</code> instead of the source type?"},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1668685850,"post_id":74473721,"comment_id":131468807,"body_markdown":"@Holger You&#39;re right, my bad, there&#39;s no difference. Updated the answer.","body":"@Holger You&#39;re right, my bad, there&#39;s no difference. Updated the answer."},{"owner":{"account_id":22807677,"reputation":414,"user_id":16959486,"display_name":"Teddy Tsai"},"score":0,"creation_date":1668685857,"post_id":74473721,"comment_id":131468811,"body_markdown":"Yes , I have tried something with reflection too, but it was more an exercise than a practical solution. Thanks for clarifying.","body":"Yes , I have tried something with reflection too, but it was more an exercise than a practical solution. Thanks for clarifying."}],"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1668685815,"creation_date":1668680420,"answer_id":74473721,"question_id":74472542,"body_markdown":"***Disclaimer:** It wouldn&#39;t work in any scenario. For instance, it would be no possible to constructusing this code [*unmodifiable collections*][unmodifiableCollections] like `ListN`, `SetN`, views of over collections (e.g. `sublist()`), synchronized collections, with lists created via `Collections.nCopies`, `Arrays.asList()`, and with `EnumSet` since it has no default constructor.*\r\n\r\nTo provide an empty collection in the Collector of the stream, we can make use of reflection to try to get access to the *no-args* constructor of the Collection.\r\n\r\n    public static &lt;T&gt; Collection&lt;T&gt; limit(Collection&lt;T&gt; collection, long limit) {\r\n        \r\n        Class&lt;?&gt; c = collection.getClass();\r\n        \r\n        return collection.stream()\r\n            .limit(limit)\r\n            .collect(Collectors.toCollection(\r\n                () -&gt; (Collection&lt;T&gt;) getCollectionInstance(c)\r\n            ));\r\n    }\r\n\r\n    public static Collection&lt;?&gt; getCollectionInstance(Class&lt;?&gt; c) {\r\n            try {\r\n                return (Collection&lt;?&gt;) c.getConstructor().newInstance();\r\n            } catch (NoSuchMethodException | InvocationTargetException |\r\n                     InstantiationException | IllegalAccessException e) {\r\n                e.printStackTrace();\r\n            }\r\n        throw new IllegalArgumentException();\r\n    }\r\n\r\n*Usage example:*\r\n\r\n    public static void main(String[] args) {\r\n        Deque&lt;Integer&gt; deque = new ArrayDeque&lt;&gt;(List.of(1, 2, 3, 4, 5));\r\n        Set&lt;String&gt; set = new HashSet&lt;&gt;(Set.of(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;, &quot;E&quot;));\r\n    \r\n        Collection&lt;Integer&gt; dequeCopy = limit(deque, 3);\r\n        Collection&lt;String&gt; setCopy = limit(set, 3);\r\n    \r\n        System.out.println(dequeCopy.getClass().getCanonicalName());\r\n        System.out.println(dequeCopy);\r\n        \r\n        System.out.println(setCopy.getClass().getCanonicalName());\r\n        System.out.println(setCopy);\r\n    }\r\n\r\n*Output:*\r\n\r\n```\r\njava.util.ArrayDeque\r\n[1, 2, 3]\r\njava.util.HashSet\r\n[A, B, C]\r\n```\r\n\r\n\r\n\r\n   [unmodifiableCollections]: https://docs.oracle.com/en/java/javase/11/core/creating-immutable-lists-sets-and-maps.html#GUID-DD066F67-9C9B-444E-A3CB-820503735951","title":"Collect stream to generic Collection","body":"<p><em><strong>Disclaimer:</strong> It wouldn't work in any scenario. For instance, it would be no possible to constructusing this code <a href=\"https://docs.oracle.com/en/java/javase/11/core/creating-immutable-lists-sets-and-maps.html#GUID-DD066F67-9C9B-444E-A3CB-820503735951\" rel=\"nofollow noreferrer\"><em>unmodifiable collections</em></a> like <code>ListN</code>, <code>SetN</code>, views of over collections (e.g. <code>sublist()</code>), synchronized collections, with lists created via <code>Collections.nCopies</code>, <code>Arrays.asList()</code>, and with <code>EnumSet</code> since it has no default constructor.</em></p>\n<p>To provide an empty collection in the Collector of the stream, we can make use of reflection to try to get access to the <em>no-args</em> constructor of the Collection.</p>\n<pre><code>public static &lt;T&gt; Collection&lt;T&gt; limit(Collection&lt;T&gt; collection, long limit) {\n    \n    Class&lt;?&gt; c = collection.getClass();\n    \n    return collection.stream()\n        .limit(limit)\n        .collect(Collectors.toCollection(\n            () -&gt; (Collection&lt;T&gt;) getCollectionInstance(c)\n        ));\n}\n\npublic static Collection&lt;?&gt; getCollectionInstance(Class&lt;?&gt; c) {\n        try {\n            return (Collection&lt;?&gt;) c.getConstructor().newInstance();\n        } catch (NoSuchMethodException | InvocationTargetException |\n                 InstantiationException | IllegalAccessException e) {\n            e.printStackTrace();\n        }\n    throw new IllegalArgumentException();\n}\n</code></pre>\n<p><em>Usage example:</em></p>\n<pre><code>public static void main(String[] args) {\n    Deque&lt;Integer&gt; deque = new ArrayDeque&lt;&gt;(List.of(1, 2, 3, 4, 5));\n    Set&lt;String&gt; set = new HashSet&lt;&gt;(Set.of(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;, &quot;E&quot;));\n\n    Collection&lt;Integer&gt; dequeCopy = limit(deque, 3);\n    Collection&lt;String&gt; setCopy = limit(set, 3);\n\n    System.out.println(dequeCopy.getClass().getCanonicalName());\n    System.out.println(dequeCopy);\n    \n    System.out.println(setCopy.getClass().getCanonicalName());\n    System.out.println(setCopy);\n}\n</code></pre>\n<p><em>Output:</em></p>\n<pre><code>java.util.ArrayDeque\n[1, 2, 3]\njava.util.HashSet\n[A, B, C]\n</code></pre>\n"}],"owner":{"account_id":22807677,"reputation":414,"user_id":16959486,"display_name":"Teddy Tsai"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":250,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":74473719,"answer_count":2,"score":3,"last_activity_date":1668694217,"creation_date":1668675185,"question_id":74472542,"body_markdown":"Say I want to make a simple method which takes in a collection and cuts the number of its elements:\r\n\r\n\r\n```\r\n    public static &lt;T extends Collection&lt;?&gt;&gt; T limit(T collection, long limit){\r\n        return collection.stream().limit(limit).collect(Collectors.toCollection(???));\r\n    }\r\n```\r\n\r\nIs it possible to collect it back to a collection of the generic type?","title":"Collect stream to generic Collection","body":"<p>Say I want to make a simple method which takes in a collection and cuts the number of its elements:</p>\n<pre><code>    public static &lt;T extends Collection&lt;?&gt;&gt; T limit(T collection, long limit){\n        return collection.stream().limit(limit).collect(Collectors.toCollection(???));\n    }\n</code></pre>\n<p>Is it possible to collect it back to a collection of the generic type?</p>\n"},{"tags":["java","wildfly","bouncycastle","pki","ejbca"],"comments":[{"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"score":0,"creation_date":1668553078,"post_id":74448839,"comment_id":131432693,"body_markdown":"Can you upgrade WildFly? I think you&#39;ll need a newer version of Jandex that can handle MR JAR&#39;s.","body":"Can you upgrade WildFly? I think you&#39;ll need a newer version of Jandex that can handle MR JAR&#39;s."},{"owner":{"account_id":4471856,"reputation":315,"user_id":3637971,"accept_rate":14,"display_name":"user3637971"},"score":0,"creation_date":1668565144,"post_id":74448839,"comment_id":131434770,"body_markdown":"I tested on Wildfly 24 but the Admin Console doesn&#39;t allow the deployment either. Even though  I could deploy it on Tomcat 9 although I need more tests for the application itself but I don&#39;t get the error message as Wildfly at least. The idea is to make it works for Wildfly.","body":"I tested on Wildfly 24 but the Admin Console doesn&#39;t allow the deployment either. Even though  I could deploy it on Tomcat 9 although I need more tests for the application itself but I don&#39;t get the error message as Wildfly at least. The idea is to make it works for Wildfly."},{"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"score":0,"creation_date":1668628894,"post_id":74448839,"comment_id":131454802,"body_markdown":"Did you get the exact same error on WildFly 24? The error is Jandex not being able to read Java 9 byte code.","body":"Did you get the exact same error on WildFly 24? The error is Jandex not being able to read Java 9 byte code."},{"owner":{"account_id":4471856,"reputation":315,"user_id":3637971,"accept_rate":14,"display_name":"user3637971"},"score":0,"creation_date":1668631929,"post_id":74448839,"comment_id":131455793,"body_markdown":"Yes. I added as Edit the messages when I tried to deploy it to Wildfly 24","body":"Yes. I added as Edit the messages when I tried to deploy it to Wildfly 24"},{"owner":{"account_id":4471856,"reputation":315,"user_id":3637971,"accept_rate":14,"display_name":"user3637971"},"score":0,"creation_date":1668633358,"post_id":74448839,"comment_id":131456180,"body_markdown":"By the way. I&#39;m using Java SE 8 / 1.8 update 341","body":"By the way. I&#39;m using Java SE 8 / 1.8 update 341"},{"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"score":1,"creation_date":1668637531,"post_id":74448839,"comment_id":131457421,"body_markdown":"That&#39;s a different error. While it is on both, that error has to do with Jersey. Are you packaging Jersey in your deployment?","body":"That&#39;s a different error. While it is on both, that error has to do with Jersey. Are you packaging Jersey in your deployment?"},{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":1,"creation_date":1668646700,"post_id":74448839,"comment_id":131459109,"body_markdown":"Instead of the  -jdk15on jars, which as @JamesR.Perkins says contain j9-style multirelease, try the -jdk15to18 jars.","body":"Instead of the  -jdk15on jars, which as @JamesR.Perkins says contain j9-style multirelease, try the -jdk15to18 jars."},{"owner":{"account_id":4471856,"reputation":315,"user_id":3637971,"accept_rate":14,"display_name":"user3637971"},"score":0,"creation_date":1668693210,"post_id":74448839,"comment_id":131471717,"body_markdown":"How do you figure it out about Java 9 byte code or j9-style multirelease?","body":"How do you figure it out about Java 9 byte code or j9-style multirelease?"},{"owner":{"account_id":4471856,"reputation":315,"user_id":3637971,"accept_rate":14,"display_name":"user3637971"},"score":0,"creation_date":1668693444,"post_id":74448839,"comment_id":131471810,"body_markdown":"The application uses jersey-server, jersey-json and jersey-client 1.8 from com.sun.jersey in pom file","body":"The application uses jersey-server, jersey-json and jersey-client 1.8 from com.sun.jersey in pom file"},{"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"score":0,"creation_date":1668723862,"post_id":74448839,"comment_id":131482601,"body_markdown":"Right, but do you need Jersey? WildFly uses RESTEasy for it&#39;s Jakarta REST implementation.","body":"Right, but do you need Jersey? WildFly uses RESTEasy for it&#39;s Jakarta REST implementation."},{"owner":{"account_id":4471856,"reputation":315,"user_id":3637971,"accept_rate":14,"display_name":"user3637971"},"score":0,"creation_date":1668806470,"post_id":74448839,"comment_id":131503959,"body_markdown":"Jersey is part of the application. I made the changes in order it works. I upgraded Jersey to 2.1x and I could deployed it to Wildfly 10 with jdk 1.8u341 and BouncyCastle 1.66. Even though, there are parts of the application related to jersey 2 to be adapted.","body":"Jersey is part of the application. I made the changes in order it works. I upgraded Jersey to 2.1x and I could deployed it to Wildfly 10 with jdk 1.8u341 and BouncyCastle 1.66. Even though, there are parts of the application related to jersey 2 to be adapted."}],"owner":{"account_id":4471856,"reputation":315,"user_id":3637971,"accept_rate":14,"display_name":"user3637971"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":207,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1668693547,"creation_date":1668528820,"question_id":74448839,"body_markdown":"I got a Java application which is using BouncyCastle bcprov-jdk15on, bcpmail-jdk15on and bcpkix-jdk15on version 1.62. Then I wish to upgrade BouncyCastle library from 1.62 to 1.66. I&#39;ll show the following pom source code:\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\r\n            &lt;artifactId&gt;bcprov-jdk15on&lt;/artifactId&gt;\r\n            &lt;version&gt;1.66&lt;/version&gt;    \r\n            &lt;scope&gt;provided&lt;/scope&gt;   \r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\r\n            &lt;artifactId&gt;bcmail-jdk15on&lt;/artifactId&gt;\r\n            &lt;version&gt;1.66&lt;/version&gt;    \r\n            &lt;scope&gt;provided&lt;/scope&gt;   \r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\r\n            &lt;artifactId&gt;bcpkix-jdk15on&lt;/artifactId&gt;\r\n            &lt;version&gt;1.66&lt;/version&gt;    \r\n            &lt;scope&gt;provided&lt;/scope&gt;   \r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.sun.jersey&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jersey-server&lt;/artifactId&gt;\r\n            &lt;version&gt;1.8&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.sun.jersey&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jersey-json&lt;/artifactId&gt;\r\n            &lt;version&gt;1.8&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.sun.jersey&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jersey-client&lt;/artifactId&gt;\r\n            &lt;version&gt;1.8&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\t\r\nThen I tried to deploy the application as War file to RHEL server with Wildfly 10, jdk 1.8u341. Even though I have the following message:\r\n\r\n    Cannot upload deployment: \r\n    {&quot;WFLYCTL0080: Failed services&quot; =&gt; \r\n        {&quot;jboss.undertow.deployment.default-server.default-host./myJavaApp&quot; =&gt; \r\n              &quot;org.jboss.msc.service.StartException in service jboss.undertow.deployment.default-server.default-host./myJavaApp: java.lang.ArrayIndexOutOfBoundsException: 1612 Caused by: java.lang.ArrayIndexOutOfBoundsException: 1612&quot;},\r\n    &quot;WFLYCTL0412: Required services that are not installed:&quot; =&gt; [&quot;jboss.undertow.deployment.default-server.default-host./myJavaApp&quot;],\r\n    &quot;WFLYCTL0180: Services with missing/unavailable dependencies&quot; =&gt; undefined}\r\n\t\r\n\r\nI also checked in Wildfly log and I have the following messages:\r\n\r\n\r\n    10:44:48,116 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) WFLYSRV0059: Class Path entry lib/bcpkix-jdk15on-151.jar in /content/myJavaApp.war/WEB-INF/lib/ejbca-ws-cli-6-6.0.jar  does not point to a valid jar for a Class-Path reference.\r\n    10:44:48,116 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) WFLYSRV0059: Class Path entry lib/bcprov-jdk15on-151.jar in /content/myJavaApp.war/WEB-INF/lib/ejbca-ws-cli-6-6.0.jar  does not point to a valid jar for a Class-Path reference.\r\n    \r\n    10:44:48,147 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) WFLYSRV0003: Could not index class bcpkix-jdk15on-1.66.jar/META-INF/versions/9/module-info.class at /content/myJavaApp.war/WEB-INF/lib: java.lang.IllegalStateException: Unknown tag! pos=4 poolCount = 107\r\n            at org.jboss.jandex.Indexer.processConstantPool(Indexer.java:1416)\r\n            at org.jboss.jandex.Indexer.index(Indexer.java:1450)\r\n            at java.lang.Thread.run(Thread.java:750)\r\n    \t\t.....\r\n    \r\n    10:44:48,283 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) WFLYSRV0003: Could not index class bcprov-jdk15on-1.66.jar/META-INF/versions/9/module-info.class at /content/myJavaApp.war/WEB-INF/lib: java.lang.IllegalStateException: Unknown tag! pos=4 poolCount = 337\r\n            at org.jboss.jandex.Indexer.processConstantPool(Indexer.java:1416)\r\n            at org.jboss.jandex.Indexer.index(Indexer.java:1450)\r\n            ....\r\n    \r\n    10:44:51,082 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) WFLYSRV0059: Class Path entry jaxb-api.jar in /content/myJavaApp.war/WEB-INF/lib/jaxb-impl-2.2.3-1.jar  does not point to a valid jar for a Class-Path reference.\r\n    \r\n      /WEB-INF/lib\r\n      /WEB-INF/classes\r\n    10:44:52,100 ERROR [org.jboss.msc.service.fail] (ServerService Thread Pool -- 182) MSC000001: Failed to start service jboss.undertow.deployment.default-server.default-host./myJavaApp: org.jboss.msc.service.StartException in service jboss.undertow.deployment.default-server.default-host./myJavaApp: java.lang.ArrayIndexOutOfBoundsException: 1612\r\n            at org.wildfly.extension.undertow.deployment.UndertowDeploymentService$1.run(UndertowDeploymentService.java:85)\r\n            at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n            at java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n    Caused by: java.lang.ArrayIndexOutOfBoundsException: 1612\r\n            at org.objectweb.asm.ClassReader.readClass(Unknown Source)\r\n            at org.objectweb.asm.ClassReader.accept(Unknown Source)\r\n            at org.objectweb.asm.ClassReader.accept(Unknown Source)\r\n            at com.sun.jersey.spi.scanning.AnnotationScannerListener.onProcess(AnnotationScannerListener.java:133)\r\n            at com.sun.jersey.core.spi.scanning.JarFileScanner.scan(JarFileScanner.java:97)\r\n            at com.sun.jersey.spi.scanning.WebAppResourcesScanner$1.f(WebAppResourcesScanner.java:94)\r\n            at com.sun.jersey.core.util.Closing.f(Closing.java:71)\r\n            at com.sun.jersey.spi.scanning.WebAppResourcesScanner.scan(WebAppResourcesScanner.java:92)\r\n            ... \r\n    \r\n    10:44:52,118 ERROR [org.jboss.as.controller.management-operation] (External Management Request Threads -- 8) WFLYCTL0013: Operation (&quot;add&quot;) failed - address: ([(&quot;deployment&quot; =&gt; &quot;myJavaApp.war&quot;)]) - failure description: {\r\n        &quot;WFLYCTL0080: Failed services&quot; =&gt; {&quot;jboss.undertow.deployment.default-server.default-host./myJavaApp&quot; =&gt; &quot;org.jboss.msc.service.StartException in service jboss.undertow.deployment.default-server.default-host./myJavaApp: java.lang.ArrayIndexOutOfBoundsException: 1612\r\n        Caused by: java.lang.ArrayIndexOutOfBoundsException: 1612&quot;},\r\n        &quot;WFLYCTL0412: Required services that are not installed:&quot; =&gt; [&quot;jboss.undertow.deployment.default-server.default-host./myJavaApp&quot;],\r\n        &quot;WFLYCTL0180: Services with missing/unavailable dependencies&quot; =&gt; undefined\r\n    }\r\n    10:44:52,119 ERROR [org.jboss.as.server] (External Management Request Threads -- 8) WFLYSRV0021: Deploy of deployment &quot;myJavaApp.war&quot; was rolled back with the following failure message:\r\n    {\r\n        &quot;WFLYCTL0080: Failed services&quot; =&gt; {&quot;jboss.undertow.deployment.default-server.default-host./myJavaApp&quot; =&gt; &quot;org.jboss.msc.service.StartException in service jboss.undertow.deployment.default-server.default-host./myJavaApp: java.lang.ArrayIndexOutOfBoundsException: 1612\r\n        Caused by: java.lang.ArrayIndexOutOfBoundsException: 1612&quot;},\r\n        &quot;WFLYCTL0412: Required services that are not installed:&quot; =&gt; [&quot;jboss.undertow.deployment.default-server.default-host./myJavaApp&quot;],\r\n        &quot;WFLYCTL0180: Services with missing/unavailable dependencies&quot; =&gt; undefined\r\n    }\r\n    10:44:52,265 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-1) WFLYSRV0028: Stopped deployment myJavaApp.war (runtime-name: myJavaApp.war) in 145ms\r\n    10:44:52,266 INFO  [org.jboss.as.controller] (External Management Request Threads -- 8) WFLYCTL0183: Service status report\r\n    WFLYCTL0186:   Services which failed to start:      service jboss.undertow.deployment.default-server.default-host./myJavaApp\r\n\r\nThe java app has dependencies defined from pom file and dependencies created manually by Netbeans.\r\n\t\r\nIt happens when I try to upgrade BouncyCastle library from 1.62 to 1.66. What can I do?\r\n\r\n\r\nEdits:\r\n1. When I tried to deploy it by Wildfly 24, I get the following message from Admin Console:\r\n\r\n\r\n          {&quot;WFLYCTL0080: Failed services&quot; =&gt; \r\n          {&quot;jboss.deployment.unit.\\&quot;myJavaApp.war\\&quot;.undertow-deployment&quot; =&gt; \r\n           &quot;java.lang.ArrayIndexOutOfBoundsException: 1612\r\n            Caused by: java.lang.ArrayIndexOutOfBoundsException: 1612&quot;}}\r\n\r\n    Wildfly 24 log:\r\n\r\n        15:32:20,821 ERROR [org.jboss.msc.service.fail] (ServerService Thread Pool -- 91) MSC000001: Failed to start service \r\n\t\t      jboss.deployment.unit.&quot;myJavaApp.war&quot;.undertow-deployment: org.jboss.msc.service.StartException in service jboss.deployment.unit.&quot;myJavaApp.war&quot;.undertow-deployment: java.lang.ArrayIndexOutOfBoundsException: 1612\r\n                at org.wildfly.extension.undertow.deployment.UndertowDeploymentService$1.run(UndertowDeploymentService.java:90)\r\n                at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n                at java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n                at org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\r\n        Caused by: java.lang.ArrayIndexOutOfBoundsException: 1612\r\n                at org.objectweb.asm.ClassReader.readClass(Unknown Source)\r\n                at org.objectweb.asm.ClassReader.accept(Unknown Source)\r\n                at org.objectweb.asm.ClassReader.accept(Unknown Source)\r\n                at com.sun.jersey.spi.scanning.AnnotationScannerListener.onProcess(AnnotationScannerListener.java:133)\r\n                at com.sun.jersey.core.spi.scanning.JarFileScanner.scan(JarFileScanner.java:97)\r\n                at com.sun.jersey.spi.scanning.WebAppResourcesScanner$1.f(WebAppResourcesScanner.java:94)\r\n                at com.sun.jersey.core.util.Closing.f(Closing.java:71)\r\n                at com.sun.jersey.spi.scanning.WebAppResourcesScanner.scan(WebAppResourcesScanner.java:92)\r\n                ...\r\n        15:32:20,830 ERROR [org.jboss.as.controller.management-operation] (External Management Request Threads -- 1) WFLYCTL0013: Operation (&quot;add&quot;) \r\n\t\t         failed - address: ([(&quot;deployment&quot; =&gt; &quot;myJavaApp.war&quot;)]) - failure description: {&quot;WFLYCTL0080: Failed services&quot; =&gt; \r\n\t\t\t\t         {&quot;jboss.deployment.unit.\\&quot;myJavaApp.war\\&quot;.undertow-deployment&quot; =&gt; &quot;java.lang.ArrayIndexOutOfBoundsException: 1612\r\n            Caused by: java.lang.ArrayIndexOutOfBoundsException: 1612&quot;}}\r\n        15:32:20,831 ERROR [org.jboss.as.controller.management-operation] (External Management Request Threads -- 1) WFLYCTL0013: Operation (&quot;add&quot;) \r\n\t\t         failed - address: ([(&quot;deployment&quot; =&gt; &quot;myJavaApp.war&quot;)]) - failure description: {&quot;WFLYCTL0080: Failed services&quot; =&gt; \r\n\t\t\t\t         {&quot;jboss.deployment.unit.\\&quot;myJavaApp.war\\&quot;.undertow-deployment&quot; =&gt; &quot;java.lang.ArrayIndexOutOfBoundsException: 1612\r\n            Caused by: java.lang.ArrayIndexOutOfBoundsException: 1612&quot;}}\r\n        15:32:20,832 ERROR [org.jboss.as.server] (External Management Request Threads --1) WFLYSRV0021: Deploy of deployment &quot;myJavaApp.war&quot; was rolled back with the following failure message:\r\n        {&quot;WFLYCTL0080: Failed services&quot; =&gt; {&quot;jboss.deployment.unit.\\&quot;myJavaApp.war\\&quot;.undertow-deployment&quot; =&gt; &quot;java.lang.ArrayIndexOutOfBoundsException: 1612\r\n            Caused by: java.lang.ArrayIndexOutOfBoundsException: 1612&quot;}}","title":"Cannot deploy Java app to Wildfly 10 when upgrading BouncyCastle from 1.62 to 1.66","body":"<p>I got a Java application which is using BouncyCastle bcprov-jdk15on, bcpmail-jdk15on and bcpkix-jdk15on version 1.62. Then I wish to upgrade BouncyCastle library from 1.62 to 1.66. I'll show the following pom source code:</p>\n<pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\n        &lt;artifactId&gt;bcprov-jdk15on&lt;/artifactId&gt;\n        &lt;version&gt;1.66&lt;/version&gt;    \n        &lt;scope&gt;provided&lt;/scope&gt;   \n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\n        &lt;artifactId&gt;bcmail-jdk15on&lt;/artifactId&gt;\n        &lt;version&gt;1.66&lt;/version&gt;    \n        &lt;scope&gt;provided&lt;/scope&gt;   \n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\n        &lt;artifactId&gt;bcpkix-jdk15on&lt;/artifactId&gt;\n        &lt;version&gt;1.66&lt;/version&gt;    \n        &lt;scope&gt;provided&lt;/scope&gt;   \n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.sun.jersey&lt;/groupId&gt;\n        &lt;artifactId&gt;jersey-server&lt;/artifactId&gt;\n        &lt;version&gt;1.8&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.sun.jersey&lt;/groupId&gt;\n        &lt;artifactId&gt;jersey-json&lt;/artifactId&gt;\n        &lt;version&gt;1.8&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.sun.jersey&lt;/groupId&gt;\n        &lt;artifactId&gt;jersey-client&lt;/artifactId&gt;\n        &lt;version&gt;1.8&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<p>Then I tried to deploy the application as War file to RHEL server with Wildfly 10, jdk 1.8u341. Even though I have the following message:</p>\n<pre><code>Cannot upload deployment: \n{&quot;WFLYCTL0080: Failed services&quot; =&gt; \n    {&quot;jboss.undertow.deployment.default-server.default-host./myJavaApp&quot; =&gt; \n          &quot;org.jboss.msc.service.StartException in service jboss.undertow.deployment.default-server.default-host./myJavaApp: java.lang.ArrayIndexOutOfBoundsException: 1612 Caused by: java.lang.ArrayIndexOutOfBoundsException: 1612&quot;},\n&quot;WFLYCTL0412: Required services that are not installed:&quot; =&gt; [&quot;jboss.undertow.deployment.default-server.default-host./myJavaApp&quot;],\n&quot;WFLYCTL0180: Services with missing/unavailable dependencies&quot; =&gt; undefined}\n</code></pre>\n<p>I also checked in Wildfly log and I have the following messages:</p>\n<pre><code>10:44:48,116 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) WFLYSRV0059: Class Path entry lib/bcpkix-jdk15on-151.jar in /content/myJavaApp.war/WEB-INF/lib/ejbca-ws-cli-6-6.0.jar  does not point to a valid jar for a Class-Path reference.\n10:44:48,116 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) WFLYSRV0059: Class Path entry lib/bcprov-jdk15on-151.jar in /content/myJavaApp.war/WEB-INF/lib/ejbca-ws-cli-6-6.0.jar  does not point to a valid jar for a Class-Path reference.\n\n10:44:48,147 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) WFLYSRV0003: Could not index class bcpkix-jdk15on-1.66.jar/META-INF/versions/9/module-info.class at /content/myJavaApp.war/WEB-INF/lib: java.lang.IllegalStateException: Unknown tag! pos=4 poolCount = 107\n        at org.jboss.jandex.Indexer.processConstantPool(Indexer.java:1416)\n        at org.jboss.jandex.Indexer.index(Indexer.java:1450)\n        at java.lang.Thread.run(Thread.java:750)\n        .....\n\n10:44:48,283 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) WFLYSRV0003: Could not index class bcprov-jdk15on-1.66.jar/META-INF/versions/9/module-info.class at /content/myJavaApp.war/WEB-INF/lib: java.lang.IllegalStateException: Unknown tag! pos=4 poolCount = 337\n        at org.jboss.jandex.Indexer.processConstantPool(Indexer.java:1416)\n        at org.jboss.jandex.Indexer.index(Indexer.java:1450)\n        ....\n\n10:44:51,082 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) WFLYSRV0059: Class Path entry jaxb-api.jar in /content/myJavaApp.war/WEB-INF/lib/jaxb-impl-2.2.3-1.jar  does not point to a valid jar for a Class-Path reference.\n\n  /WEB-INF/lib\n  /WEB-INF/classes\n10:44:52,100 ERROR [org.jboss.msc.service.fail] (ServerService Thread Pool -- 182) MSC000001: Failed to start service jboss.undertow.deployment.default-server.default-host./myJavaApp: org.jboss.msc.service.StartException in service jboss.undertow.deployment.default-server.default-host./myJavaApp: java.lang.ArrayIndexOutOfBoundsException: 1612\n        at org.wildfly.extension.undertow.deployment.UndertowDeploymentService$1.run(UndertowDeploymentService.java:85)\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\nCaused by: java.lang.ArrayIndexOutOfBoundsException: 1612\n        at org.objectweb.asm.ClassReader.readClass(Unknown Source)\n        at org.objectweb.asm.ClassReader.accept(Unknown Source)\n        at org.objectweb.asm.ClassReader.accept(Unknown Source)\n        at com.sun.jersey.spi.scanning.AnnotationScannerListener.onProcess(AnnotationScannerListener.java:133)\n        at com.sun.jersey.core.spi.scanning.JarFileScanner.scan(JarFileScanner.java:97)\n        at com.sun.jersey.spi.scanning.WebAppResourcesScanner$1.f(WebAppResourcesScanner.java:94)\n        at com.sun.jersey.core.util.Closing.f(Closing.java:71)\n        at com.sun.jersey.spi.scanning.WebAppResourcesScanner.scan(WebAppResourcesScanner.java:92)\n        ... \n\n10:44:52,118 ERROR [org.jboss.as.controller.management-operation] (External Management Request Threads -- 8) WFLYCTL0013: Operation (&quot;add&quot;) failed - address: ([(&quot;deployment&quot; =&gt; &quot;myJavaApp.war&quot;)]) - failure description: {\n    &quot;WFLYCTL0080: Failed services&quot; =&gt; {&quot;jboss.undertow.deployment.default-server.default-host./myJavaApp&quot; =&gt; &quot;org.jboss.msc.service.StartException in service jboss.undertow.deployment.default-server.default-host./myJavaApp: java.lang.ArrayIndexOutOfBoundsException: 1612\n    Caused by: java.lang.ArrayIndexOutOfBoundsException: 1612&quot;},\n    &quot;WFLYCTL0412: Required services that are not installed:&quot; =&gt; [&quot;jboss.undertow.deployment.default-server.default-host./myJavaApp&quot;],\n    &quot;WFLYCTL0180: Services with missing/unavailable dependencies&quot; =&gt; undefined\n}\n10:44:52,119 ERROR [org.jboss.as.server] (External Management Request Threads -- 8) WFLYSRV0021: Deploy of deployment &quot;myJavaApp.war&quot; was rolled back with the following failure message:\n{\n    &quot;WFLYCTL0080: Failed services&quot; =&gt; {&quot;jboss.undertow.deployment.default-server.default-host./myJavaApp&quot; =&gt; &quot;org.jboss.msc.service.StartException in service jboss.undertow.deployment.default-server.default-host./myJavaApp: java.lang.ArrayIndexOutOfBoundsException: 1612\n    Caused by: java.lang.ArrayIndexOutOfBoundsException: 1612&quot;},\n    &quot;WFLYCTL0412: Required services that are not installed:&quot; =&gt; [&quot;jboss.undertow.deployment.default-server.default-host./myJavaApp&quot;],\n    &quot;WFLYCTL0180: Services with missing/unavailable dependencies&quot; =&gt; undefined\n}\n10:44:52,265 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-1) WFLYSRV0028: Stopped deployment myJavaApp.war (runtime-name: myJavaApp.war) in 145ms\n10:44:52,266 INFO  [org.jboss.as.controller] (External Management Request Threads -- 8) WFLYCTL0183: Service status report\nWFLYCTL0186:   Services which failed to start:      service jboss.undertow.deployment.default-server.default-host./myJavaApp\n</code></pre>\n<p>The java app has dependencies defined from pom file and dependencies created manually by Netbeans.</p>\n<p>It happens when I try to upgrade BouncyCastle library from 1.62 to 1.66. What can I do?</p>\n<p>Edits:</p>\n<ol>\n<li><p>When I tried to deploy it by Wildfly 24, I get the following message from Admin Console:</p>\n<pre><code>   {&quot;WFLYCTL0080: Failed services&quot; =&gt; \n   {&quot;jboss.deployment.unit.\\&quot;myJavaApp.war\\&quot;.undertow-deployment&quot; =&gt; \n    &quot;java.lang.ArrayIndexOutOfBoundsException: 1612\n     Caused by: java.lang.ArrayIndexOutOfBoundsException: 1612&quot;}}\n</code></pre>\n<p>Wildfly 24 log:</p>\n<pre><code> 15:32:20,821 ERROR [org.jboss.msc.service.fail] (ServerService Thread Pool -- 91) MSC000001: Failed to start service \n       jboss.deployment.unit.&quot;myJavaApp.war&quot;.undertow-deployment: org.jboss.msc.service.StartException in service jboss.deployment.unit.&quot;myJavaApp.war&quot;.undertow-deployment: java.lang.ArrayIndexOutOfBoundsException: 1612\n         at org.wildfly.extension.undertow.deployment.UndertowDeploymentService$1.run(UndertowDeploymentService.java:90)\n         at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n         at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n         at org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\n Caused by: java.lang.ArrayIndexOutOfBoundsException: 1612\n         at org.objectweb.asm.ClassReader.readClass(Unknown Source)\n         at org.objectweb.asm.ClassReader.accept(Unknown Source)\n         at org.objectweb.asm.ClassReader.accept(Unknown Source)\n         at com.sun.jersey.spi.scanning.AnnotationScannerListener.onProcess(AnnotationScannerListener.java:133)\n         at com.sun.jersey.core.spi.scanning.JarFileScanner.scan(JarFileScanner.java:97)\n         at com.sun.jersey.spi.scanning.WebAppResourcesScanner$1.f(WebAppResourcesScanner.java:94)\n         at com.sun.jersey.core.util.Closing.f(Closing.java:71)\n         at com.sun.jersey.spi.scanning.WebAppResourcesScanner.scan(WebAppResourcesScanner.java:92)\n         ...\n 15:32:20,830 ERROR [org.jboss.as.controller.management-operation] (External Management Request Threads -- 1) WFLYCTL0013: Operation (&quot;add&quot;) \n          failed - address: ([(&quot;deployment&quot; =&gt; &quot;myJavaApp.war&quot;)]) - failure description: {&quot;WFLYCTL0080: Failed services&quot; =&gt; \n                  {&quot;jboss.deployment.unit.\\&quot;myJavaApp.war\\&quot;.undertow-deployment&quot; =&gt; &quot;java.lang.ArrayIndexOutOfBoundsException: 1612\n     Caused by: java.lang.ArrayIndexOutOfBoundsException: 1612&quot;}}\n 15:32:20,831 ERROR [org.jboss.as.controller.management-operation] (External Management Request Threads -- 1) WFLYCTL0013: Operation (&quot;add&quot;) \n          failed - address: ([(&quot;deployment&quot; =&gt; &quot;myJavaApp.war&quot;)]) - failure description: {&quot;WFLYCTL0080: Failed services&quot; =&gt; \n                  {&quot;jboss.deployment.unit.\\&quot;myJavaApp.war\\&quot;.undertow-deployment&quot; =&gt; &quot;java.lang.ArrayIndexOutOfBoundsException: 1612\n     Caused by: java.lang.ArrayIndexOutOfBoundsException: 1612&quot;}}\n 15:32:20,832 ERROR [org.jboss.as.server] (External Management Request Threads --1) WFLYSRV0021: Deploy of deployment &quot;myJavaApp.war&quot; was rolled back with the following failure message:\n {&quot;WFLYCTL0080: Failed services&quot; =&gt; {&quot;jboss.deployment.unit.\\&quot;myJavaApp.war\\&quot;.undertow-deployment&quot; =&gt; &quot;java.lang.ArrayIndexOutOfBoundsException: 1612\n     Caused by: java.lang.ArrayIndexOutOfBoundsException: 1612&quot;}}\n</code></pre>\n</li>\n</ol>\n"},{"tags":["java","mysql","jdbc","crud"],"comments":[{"owner":{"account_id":401843,"reputation":89873,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1668693108,"post_id":74476548,"comment_id":131471676,"body_markdown":"Nothing immediately jumps out. Your code only deletes and updates existing rows; nothing in your paste could ever _add_ a row. Perhaps the answer is the trivial one: You have no rows in the DB, therefore, `DELETE` and `UPDATE` run without failure, and... do nothing. Because that&#39;s by definition what they do when there are no rows. Just.. return. silently.","body":"Nothing immediately jumps out. Your code only deletes and updates existing rows; nothing in your paste could ever <i>add</i> a row. Perhaps the answer is the trivial one: You have no rows in the DB, therefore, <code>DELETE</code> and <code>UPDATE</code> run without failure, and... do nothing. Because that&#39;s by definition what they do when there are no rows. Just.. return. silently."},{"owner":{"account_id":15456066,"reputation":35,"user_id":14458269,"display_name":"SFleevo "},"score":0,"creation_date":1668693534,"post_id":74476548,"comment_id":131471840,"body_markdown":"Thanks for the response. I have added the json that I pass into the controller. Does that change your view?","body":"Thanks for the response. I have added the json that I pass into the controller. Does that change your view?"},{"owner":{"account_id":401843,"reputation":89873,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1668696758,"post_id":74476548,"comment_id":131473235,"body_markdown":"No, the content of the JSON seems entirely unrelated. Did you understand a word of my comment? All we need to know is: Is there an actual row with the actual ID you are using for the `?` in `DELETE ... WHERE ID =? `","body":"No, the content of the JSON seems entirely unrelated. Did you understand a word of my comment? All we need to know is: Is there an actual row with the actual ID you are using for the <code>?</code> in <code>DELETE ... WHERE ID =? </code>"},{"owner":{"account_id":401843,"reputation":89873,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1668696794,"post_id":74476548,"comment_id":131473253,"body_markdown":"It feels like you think an SQL `UPDATE` commands creates a new row in the database. It doesn&#39;t.","body":"It feels like you think an SQL <code>UPDATE</code> commands creates a new row in the database. It doesn&#39;t."},{"owner":{"account_id":420244,"reputation":435,"user_id":797857,"display_name":"icrovett"},"score":0,"creation_date":1668699993,"post_id":74476548,"comment_id":131474660,"body_markdown":"Look for the `INSERT` SQL usage","body":"Look for the <code>INSERT</code> SQL usage"}],"owner":{"account_id":15456066,"reputation":35,"user_id":14458269,"display_name":"SFleevo "},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":161,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1668693466,"creation_date":1668692736,"question_id":74476548,"body_markdown":"I am trying to update a row in mysql database by the id of the row, but it isn&#39;t inputting the new values into the database. I have tried to tinker with the code but I just can&#39;t figure it out. I test by passing the data as json via postman. Can you spot what is wrong with my code? Code files below (update sql script in the jdbc is probably most relevant):\r\n\r\nRepo:\r\n\r\n\r\nJDBC repo:\r\n\r\n```\r\n@Repository\r\npublic class QuizRepositoryJDBC implements QuizRepository{\r\nprivate static final String UPDATE_QUESTION = &quot;UPDATE Quiz SET type=?, level=?, choiceNum=?, question=?, choiceA=?, choiceB=?, &quot; +\r\n        &quot;choiceC=?, choiceD=?, correct=?, hint=? WHERE ID=?&quot;;\r\n\r\n    private static final String DELETE_QUESTION_BY_ID = &quot;DELETE FROM Quiz WHERE ID=?&quot;;\r\n\r\n    private JdbcTemplate jdbcTemplate;\r\n\r\n    @Autowired(required = false)\r\n    public QuizRepositoryJDBC(JdbcTemplate aTemplate){\r\n        jdbcTemplate = aTemplate;\r\n    }\r\n\r\n    @Override\r\n    public QuizDTO updateQuestion(QuizDTO quizDTO) {\r\n        jdbcTemplate.update(UPDATE_QUESTION, quizDTO.getID(), quizDTO.getType(), quizDTO.getLevel(), quizDTO.getChoiceNum(),quizDTO.getQuestion(), quizDTO.getChoiceA(),\r\n                quizDTO.getChoiceB(), quizDTO.getChoiceC(), quizDTO.getChoiceD(), quizDTO.getCorrect(), quizDTO.getHint());\r\n        return quizDTO;\r\n    }\r\n\r\n    @Override\r\n    public String deleteQuestion(int id) {\r\n        jdbcTemplate.update(DELETE_QUESTION_BY_ID, id);\r\n        return &quot;Deleted question with id:&quot; + id;\r\n    }\r\n```\r\n\r\nController:\r\n\r\n```\r\n@RestController\r\npublic class QuizController {\r\n\r\n    private QuizRepository quizRepo;\r\n\r\n    @Autowired\r\n    public QuizController(QuizRepository pRepo) {\r\n        quizRepo = pRepo;\r\n    }\r\n\r\n    @PutMapping(&quot;/adminupdate&quot;)\r\n    public QuizDTO updateQuestion(@RequestBody QuizDTO quizDTO) {\r\n\r\n        return quizRepo.updateQuestion(quizDTO);\r\n    }\r\n\r\n    @DeleteMapping(&quot;/admindelete/{id}&quot;)\r\n    public String deleteQuestion(@PathVariable(&quot;id&quot;) int id){\r\n        return quizRepo.deleteQuestion(id);\r\n    }\r\n\r\n}\r\n```\r\nJSON that I pass into postman:\r\n```\r\n{\r\n&quot;id&quot;: 104,\r\n&quot;type&quot;:&quot;epidemics&quot;,\r\n&quot;level&quot;:1,\r\n&quot;choiceNum&quot;:4,\r\n&quot;question&quot;:&quot;another one question&quot;,\r\n&quot;choiceA&quot;: &quot;no1&quot;,\r\n&quot;choiceB&quot;:&quot;yes2&quot;,\r\n&quot;choiceC&quot;:&quot;no3&quot;,\r\n&quot;choiceD&quot;:&quot;yes4&quot;,\r\n&quot;correct&quot;:&quot;no1&quot;,\r\n&quot;hint&quot;:&quot;second answer&quot;\r\n}\r\n```\r\n","title":"How to update row by id in jdbc?","body":"<p>I am trying to update a row in mysql database by the id of the row, but it isn't inputting the new values into the database. I have tried to tinker with the code but I just can't figure it out. I test by passing the data as json via postman. Can you spot what is wrong with my code? Code files below (update sql script in the jdbc is probably most relevant):</p>\n<p>Repo:</p>\n<p>JDBC repo:</p>\n<pre><code>@Repository\npublic class QuizRepositoryJDBC implements QuizRepository{\nprivate static final String UPDATE_QUESTION = &quot;UPDATE Quiz SET type=?, level=?, choiceNum=?, question=?, choiceA=?, choiceB=?, &quot; +\n        &quot;choiceC=?, choiceD=?, correct=?, hint=? WHERE ID=?&quot;;\n\n    private static final String DELETE_QUESTION_BY_ID = &quot;DELETE FROM Quiz WHERE ID=?&quot;;\n\n    private JdbcTemplate jdbcTemplate;\n\n    @Autowired(required = false)\n    public QuizRepositoryJDBC(JdbcTemplate aTemplate){\n        jdbcTemplate = aTemplate;\n    }\n\n    @Override\n    public QuizDTO updateQuestion(QuizDTO quizDTO) {\n        jdbcTemplate.update(UPDATE_QUESTION, quizDTO.getID(), quizDTO.getType(), quizDTO.getLevel(), quizDTO.getChoiceNum(),quizDTO.getQuestion(), quizDTO.getChoiceA(),\n                quizDTO.getChoiceB(), quizDTO.getChoiceC(), quizDTO.getChoiceD(), quizDTO.getCorrect(), quizDTO.getHint());\n        return quizDTO;\n    }\n\n    @Override\n    public String deleteQuestion(int id) {\n        jdbcTemplate.update(DELETE_QUESTION_BY_ID, id);\n        return &quot;Deleted question with id:&quot; + id;\n    }\n</code></pre>\n<p>Controller:</p>\n<pre><code>@RestController\npublic class QuizController {\n\n    private QuizRepository quizRepo;\n\n    @Autowired\n    public QuizController(QuizRepository pRepo) {\n        quizRepo = pRepo;\n    }\n\n    @PutMapping(&quot;/adminupdate&quot;)\n    public QuizDTO updateQuestion(@RequestBody QuizDTO quizDTO) {\n\n        return quizRepo.updateQuestion(quizDTO);\n    }\n\n    @DeleteMapping(&quot;/admindelete/{id}&quot;)\n    public String deleteQuestion(@PathVariable(&quot;id&quot;) int id){\n        return quizRepo.deleteQuestion(id);\n    }\n\n}\n</code></pre>\n<p>JSON that I pass into postman:</p>\n<pre><code>{\n&quot;id&quot;: 104,\n&quot;type&quot;:&quot;epidemics&quot;,\n&quot;level&quot;:1,\n&quot;choiceNum&quot;:4,\n&quot;question&quot;:&quot;another one question&quot;,\n&quot;choiceA&quot;: &quot;no1&quot;,\n&quot;choiceB&quot;:&quot;yes2&quot;,\n&quot;choiceC&quot;:&quot;no3&quot;,\n&quot;choiceD&quot;:&quot;yes4&quot;,\n&quot;correct&quot;:&quot;no1&quot;,\n&quot;hint&quot;:&quot;second answer&quot;\n}\n</code></pre>\n"},{"tags":["java","recursion","search","null","avl-tree"],"comments":[{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1668693617,"post_id":74476629,"comment_id":131471879,"body_markdown":"Inserting has to be done as `root = insertNode(data, root);`. Because assigning to the local parameter `root` does not assign to the passed global variable `root`, In java `f(x)` will never assign to a passed variable `x` _(=pass-by-value)_. Better also rename the root parameter to `node` or such, as root means top node.","body":"Inserting has to be done as <code>root = insertNode(data, root);</code>. Because assigning to the local parameter <code>root</code> does not assign to the passed global variable <code>root</code>, In java <code>f(x)</code> will never assign to a passed variable <code>x</code> <i>(=pass-by-value)</i>. Better also rename the root parameter to <code>node</code> or such, as root means top node."},{"owner":{"account_id":26963239,"reputation":1,"user_id":20530574,"display_name":"wantoimprove"},"score":0,"creation_date":1668694106,"post_id":74476629,"comment_id":131472103,"body_markdown":"@JoopEggen Did you mean I should replace all instances of &#39;root&#39; with &#39;node&#39; inside the method? I&#39;ve done that and now I&#39;m getting a StackOverflow error that&#39;s saying I should create a breakpoint to resolve it","body":"@JoopEggen Did you mean I should replace all instances of &#39;root&#39; with &#39;node&#39; inside the method? I&#39;ve done that and now I&#39;m getting a StackOverflow error that&#39;s saying I should create a breakpoint to resolve it"},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1668694601,"post_id":74476629,"comment_id":131472319,"body_markdown":"Inside `insertNode` a rename of _root_ to _node_ is more clear and should not have changed anything.  The stacktrace itself should already show where an endless loop happens.","body":"Inside <code>insertNode</code> a rename of <i>root</i> to <i>node</i> is more clear and should not have changed anything.  The stacktrace itself should already show where an endless loop happens."},{"owner":{"account_id":26963239,"reputation":1,"user_id":20530574,"display_name":"wantoimprove"},"score":0,"creation_date":1668775208,"post_id":74476629,"comment_id":131494059,"body_markdown":"@JoopEggen Thanks for correcting me on that. I&#39;m still having the same problem with my search though. The suggestion I get from my compiler when looking at the code tells me that the check variable is never used or accessed because the root is null (it&#39;s throwing a NullPointerException). Any tips on that?","body":"@JoopEggen Thanks for correcting me on that. I&#39;m still having the same problem with my search though. The suggestion I get from my compiler when looking at the code tells me that the check variable is never used or accessed because the root is null (it&#39;s throwing a NullPointerException). Any tips on that?"},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1668787659,"post_id":74476629,"comment_id":131498614,"body_markdown":"Sorry for the late return here. No, I have no idea. Keep thing readable, a classs in its own file, the usage separate. And the debugger is your best friend to inspect along what code the program runs.","body":"Sorry for the late return here. No, I have no idea. Keep thing readable, a classs in its own file, the usage separate. And the debugger is your best friend to inspect along what code the program runs."}],"owner":{"account_id":26963239,"reputation":1,"user_id":20530574,"display_name":"wantoimprove"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1668693148,"creation_date":1668693076,"question_id":74476629,"body_markdown":"This is the insertion method: \r\n\r\n\r\n```\r\nprivate Node insertNode(Person data, Node root)\r\n{\r\n    //check whether the node is null or not\r\n    if (root == null)\r\n        root = new Node(data);\r\n        //insert a node in case when the given data is lesser than the data of the root node\r\n    else if (getCountCommon(data, root.getRoot()) == 0)\r\n    {\r\n        root.setLeftSubTree(insertNode(data, root.getLeftSubTree()));\r\n        if(getHeight(root.getLeftSubTree()) - getHeight(root.getRightSubTree()) == 2 )\r\n            if(getCountCommon(data, root.getLeftSubTree().getRoot()) == 0)\r\n                root = rotateWithleftSubTree(root);\r\n            else\r\n                root = doubleWithleftSubTree(root);\r\n    }\r\n    else if(getCountCommon(data, root.getRoot()) &gt; 0)\r\n    {\r\n        root.setRightSubTree(insertNode(data, root.getRightSubTree()));\r\n        if(getHeight(root.getRightSubTree()) - getHeight(root.getLeftSubTree()) == 2 )\r\n            if(getCountCommon(data, root.getRightSubTree().getRoot()) &gt; 0)\r\n                root = rotateWithrightSubTree(root);\r\n            else\r\n                root = doubleWithrightSubTree(root);\r\n    }\r\n    else\r\n          ;// if the data is already present in the tree, we will do nothing\r\n\r\n    root.setHeight(getMaxHeight(getHeight(root.getLeftSubTree()), getHeight(root.getRightSubTree())) + 1);\r\n\r\n    return root;\r\n\r\n}\r\n```\r\n\r\nAnd this is the method I use to get a count of all nodes:\r\n\r\n\r\n```\r\nprivate int getTotalNumberOfNodes(Node root)\r\n{\r\n    if (root == null)\r\n        return 0;\r\n    else\r\n    {\r\n        int size = 1;\r\n        size = size + getTotalNumberOfNodes(root.getLeftSubTree());\r\n        size = size + getTotalNumberOfNodes(root.getRightSubTree());\r\n        return size;\r\n    }\r\n}\r\n```\r\n\r\n\r\nWhen I populate the tree with an ArrayList of 20000 objects... \r\n\r\n```\r\nSystem.out.println(&quot;\\nPopulating tree with data from personList...&quot;);\r\n\r\nfor (int index=0; index&lt;size; index++){\r\n\r\n    personTree.insertNode(personList.get(index));\r\n}\r\n\r\nSystem.out.println(&quot;Tree populated.&quot;);\r\n\r\n//Checking number of nodes in tree\r\nSystem.out.println(&quot;Number of nodes in tree: &quot; + personTree.getTotalNumberOfNodes() + &quot;\\n&quot;);\r\n\r\n```\r\n\r\nI get this output:\r\nPopulating tree with data from personList...\r\nTree populated.\r\nNumber of nodes in tree: 20000\r\n\r\n\r\nThen, when I attempt to search the tree...\r\n\r\n```\r\nTree class:\r\npublic void searchData(Person data){\r\n    searchData(getRoot(), data);\r\n}\r\n\r\npublic void searchData(Node root, Person data)\r\n{\r\n    Person check = new Person();\r\n\r\n    if(root == null)\r\n    {\r\n        System.out.println(data.getFirstName() + &quot; was not found.&quot;);\r\n    }\r\n    else if (root.getRoot() == data)\r\n    {\r\n        System.out.println(data.getFirstName() + &quot;was found!&quot;);\r\n        check = root.getRoot();\r\n    }\r\n    else\r\n    {\r\n        if (getCountCommon(root.getRoot(), data) == 0){\r\n            root = root.getLeftSubTree();\r\n            searchData(root, data);\r\n        } else if (getCountCommon(root.getRoot(), data) &gt; 0){\r\n            root = root.getRightSubTree();\r\n            searchData(root, data);\r\n        }\r\n    }\r\n}\r\n\r\nMain:\r\nSystem.out.println(&quot;\\nSearching tree for &#39;&quot; + personList.get(6889).getFirstName() + &quot; &quot; + personList.get(6889).getLastName() + &quot;&#39;...&quot;);\r\npersonTree.searchData(personList.get(6889));\r\n\r\n```\r\n\r\nI keep getting this output:\r\nSearching tree for &#39;Hugh Senior&#39;...\r\nHugh was not found.\r\n\r\n\r\nWhen I checked to see if there was anything at the root using this code:\r\n\r\n```\r\nSystem.out.println(&quot;\\nData at tree root is: \\n&quot; + personTree.getRoot().getRoot());\r\n```\r\n\r\nI get this output, which tells me it&#39;s not empty:\r\n\r\n```\r\nData at tree root is: \r\nFirst Name:    Robert\r\nLast Name:   Bell\r\nTelephone:   8766554539\r\nEmail:       RoBell15@hotmail.com\r\nCommunity:   Liguanea\r\nSchool:      Camperdown\r\nEmployer:    NCB\r\nPrivacy:     Y\r\n     ---Activity/Activities---    \r\n\r\n\r\n\r\n```\r\n\r\n\r\n\r\n\r\nOn some occasions, when I directly called the root accessor from the tree class and tried using it as input directly into the second search method, it threw errors saying my root was null. And the warnings in IntelliJ are telling me that nothing past the first if statement in searchData(Node root, Person data) gets checked since the root is always null. \r\n\r\nI tried directly checking the tree&#39;s root again in main, and it shows that data is there so I&#39;m stumped.\r\n","title":"Why does the root of this AVL tree keep being treated as null even though it has been populated with objects?","body":"<p>This is the insertion method:</p>\n<pre><code>private Node insertNode(Person data, Node root)\n{\n    //check whether the node is null or not\n    if (root == null)\n        root = new Node(data);\n        //insert a node in case when the given data is lesser than the data of the root node\n    else if (getCountCommon(data, root.getRoot()) == 0)\n    {\n        root.setLeftSubTree(insertNode(data, root.getLeftSubTree()));\n        if(getHeight(root.getLeftSubTree()) - getHeight(root.getRightSubTree()) == 2 )\n            if(getCountCommon(data, root.getLeftSubTree().getRoot()) == 0)\n                root = rotateWithleftSubTree(root);\n            else\n                root = doubleWithleftSubTree(root);\n    }\n    else if(getCountCommon(data, root.getRoot()) &gt; 0)\n    {\n        root.setRightSubTree(insertNode(data, root.getRightSubTree()));\n        if(getHeight(root.getRightSubTree()) - getHeight(root.getLeftSubTree()) == 2 )\n            if(getCountCommon(data, root.getRightSubTree().getRoot()) &gt; 0)\n                root = rotateWithrightSubTree(root);\n            else\n                root = doubleWithrightSubTree(root);\n    }\n    else\n          ;// if the data is already present in the tree, we will do nothing\n\n    root.setHeight(getMaxHeight(getHeight(root.getLeftSubTree()), getHeight(root.getRightSubTree())) + 1);\n\n    return root;\n\n}\n</code></pre>\n<p>And this is the method I use to get a count of all nodes:</p>\n<pre><code>private int getTotalNumberOfNodes(Node root)\n{\n    if (root == null)\n        return 0;\n    else\n    {\n        int size = 1;\n        size = size + getTotalNumberOfNodes(root.getLeftSubTree());\n        size = size + getTotalNumberOfNodes(root.getRightSubTree());\n        return size;\n    }\n}\n</code></pre>\n<p>When I populate the tree with an ArrayList of 20000 objects...</p>\n<pre><code>System.out.println(&quot;\\nPopulating tree with data from personList...&quot;);\n\nfor (int index=0; index&lt;size; index++){\n\n    personTree.insertNode(personList.get(index));\n}\n\nSystem.out.println(&quot;Tree populated.&quot;);\n\n//Checking number of nodes in tree\nSystem.out.println(&quot;Number of nodes in tree: &quot; + personTree.getTotalNumberOfNodes() + &quot;\\n&quot;);\n\n</code></pre>\n<p>I get this output:\nPopulating tree with data from personList...\nTree populated.\nNumber of nodes in tree: 20000</p>\n<p>Then, when I attempt to search the tree...</p>\n<pre><code>Tree class:\npublic void searchData(Person data){\n    searchData(getRoot(), data);\n}\n\npublic void searchData(Node root, Person data)\n{\n    Person check = new Person();\n\n    if(root == null)\n    {\n        System.out.println(data.getFirstName() + &quot; was not found.&quot;);\n    }\n    else if (root.getRoot() == data)\n    {\n        System.out.println(data.getFirstName() + &quot;was found!&quot;);\n        check = root.getRoot();\n    }\n    else\n    {\n        if (getCountCommon(root.getRoot(), data) == 0){\n            root = root.getLeftSubTree();\n            searchData(root, data);\n        } else if (getCountCommon(root.getRoot(), data) &gt; 0){\n            root = root.getRightSubTree();\n            searchData(root, data);\n        }\n    }\n}\n\nMain:\nSystem.out.println(&quot;\\nSearching tree for '&quot; + personList.get(6889).getFirstName() + &quot; &quot; + personList.get(6889).getLastName() + &quot;'...&quot;);\npersonTree.searchData(personList.get(6889));\n\n</code></pre>\n<p>I keep getting this output:\nSearching tree for 'Hugh Senior'...\nHugh was not found.</p>\n<p>When I checked to see if there was anything at the root using this code:</p>\n<pre><code>System.out.println(&quot;\\nData at tree root is: \\n&quot; + personTree.getRoot().getRoot());\n</code></pre>\n<p>I get this output, which tells me it's not empty:</p>\n<pre><code>Data at tree root is: \nFirst Name:    Robert\nLast Name:   Bell\nTelephone:   8766554539\nEmail:       RoBell15@hotmail.com\nCommunity:   Liguanea\nSchool:      Camperdown\nEmployer:    NCB\nPrivacy:     Y\n     ---Activity/Activities---    \n\n\n\n</code></pre>\n<p>On some occasions, when I directly called the root accessor from the tree class and tried using it as input directly into the second search method, it threw errors saying my root was null. And the warnings in IntelliJ are telling me that nothing past the first if statement in searchData(Node root, Person data) gets checked since the root is always null.</p>\n<p>I tried directly checking the tree's root again in main, and it shows that data is there so I'm stumped.</p>\n"},{"tags":["java","spring-boot","mockito"],"answers":[{"tags":[],"owner":{"account_id":1713236,"reputation":22836,"user_id":1570854,"accept_rate":71,"display_name":"Lesiak"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668693062,"creation_date":1668693062,"answer_id":74476625,"question_id":74473847,"body_markdown":"If you want to replace a bean in spring context, you need a `@MockBean` or `@SpyBean`","title":"doCallRealMethod not working on void return type method","body":"<p>If you want to replace a bean in spring context, you need a <code>@MockBean</code> or <code>@SpyBean</code></p>\n"}],"owner":{"account_id":5137581,"reputation":300,"user_id":4115835,"accept_rate":15,"display_name":"Loren"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":133,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1668693062,"creation_date":1668680936,"question_id":74473847,"body_markdown":"I am trying to call a real method whose return type is void . I have tried both @mock and @spy both on my bean but it is still not going into actual class. \r\n\r\n    @Autowired private HelperV2 authValidationHelper;\r\n\r\n    @Override\r\n    public void postProcess(Event event) {\r\n    List&lt;Error&gt; errorList = new ArrayList&lt;&gt;();\r\n      authValidationHelper.validateOrderTotalAmount(event, errorList);\r\n      handleError(event, errorList);\r\n    }\r\n    }\r\n\r\n\r\nTest case\r\n\r\n    @Spy private HelperV2 authValidationHelper;\r\n\r\n    @Test\r\n    public void test_postProcess()  {\r\n    BaseOrderEvent event =\r\n        ParserUtil.getObjectFromFile(\r\n            &quot;events/createPaymentRequestWithShoppingCardOnly2.json&quot;, Event.class);\r\n    Mockito.doCallRealMethod()\r\n        .when(authValidationHelper)\r\n        .validateOrderTotalAmount(Mockito.any(), Mockito.any());\r\n    createOrderEventProcessor.postProcess(event);\r\n    }\r\n","title":"doCallRealMethod not working on void return type method","body":"<p>I am trying to call a real method whose return type is void . I have tried both @mock and @spy both on my bean but it is still not going into actual class.</p>\n<pre><code>@Autowired private HelperV2 authValidationHelper;\n\n@Override\npublic void postProcess(Event event) {\nList&lt;Error&gt; errorList = new ArrayList&lt;&gt;();\n  authValidationHelper.validateOrderTotalAmount(event, errorList);\n  handleError(event, errorList);\n}\n}\n</code></pre>\n<p>Test case</p>\n<pre><code>@Spy private HelperV2 authValidationHelper;\n\n@Test\npublic void test_postProcess()  {\nBaseOrderEvent event =\n    ParserUtil.getObjectFromFile(\n        &quot;events/createPaymentRequestWithShoppingCardOnly2.json&quot;, Event.class);\nMockito.doCallRealMethod()\n    .when(authValidationHelper)\n    .validateOrderTotalAmount(Mockito.any(), Mockito.any());\ncreateOrderEventProcessor.postProcess(event);\n}\n</code></pre>\n"},{"tags":["javascript","java","jsp","url","tomcat9"],"comments":[{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1668674918,"post_id":74472425,"comment_id":131464747,"body_markdown":"`Home.jsp`, `Hoxxxme.jsp` and `xxx/Home.jsp` are different pages - what do you expect?","body":"<code>Home.jsp</code>, <code>Hoxxxme.jsp</code> and <code>xxx&#47;Home.jsp</code> are different pages - what do you expect?"},{"owner":{"account_id":24538904,"reputation":1,"user_id":18449546,"display_name":"Olcay &#199;etin"},"score":0,"creation_date":1668675768,"post_id":74472425,"comment_id":131465052,"body_markdown":"@dan1st Home.jsp is valid page but the others not.Hoxxxme.jsp is ok i am gettin 404 server error.but for xxx/Home.jsp, I cant get 404 error in proper way","body":"@dan1st Home.jsp is valid page but the others not.Hoxxxme.jsp is ok i am gettin 404 server error.but for xxx/Home.jsp, I cant get 404 error in proper way"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1668676469,"post_id":74472425,"comment_id":131465312,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1668689918,"post_id":74472425,"comment_id":131470278,"body_markdown":"Can you show the web.xml and the location of the Home.jsp file (or handler) in the project?","body":"Can you show the web.xml and the location of the Home.jsp file (or handler) in the project?"},{"owner":{"account_id":24538904,"reputation":1,"user_id":18449546,"display_name":"Olcay &#199;etin"},"score":0,"creation_date":1668691966,"post_id":74472425,"comment_id":131471172,"body_markdown":"@dan1st  which web.xml? if u asking inside web-inf which i just realized that i need add in that. Now I am trying a new library of tuckey. inside of web.inf is now ; \nedited in post","body":"@dan1st  which web.xml? if u asking inside web-inf which i just realized that i need add in that. Now I am trying a new library of tuckey. inside of web.inf is now ;  edited in post"},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1668692029,"post_id":74472425,"comment_id":131471202,"body_markdown":"There should only be a single `web.xml` file.","body":"There should only be a single <code>web.xml</code> file."},{"owner":{"account_id":24538904,"reputation":1,"user_id":18449546,"display_name":"Olcay &#199;etin"},"score":0,"creation_date":1668692849,"post_id":74472425,"comment_id":131471548,"body_markdown":"@dan1st and Home.jsp location :\n\nC:\\Users\\USER\\eclipse-workspace\\.metadata\\.plugins\\org.eclipse.wst.server.core\\tmp0\\wtpwebapps\\Company\\Pages","body":"@dan1st and Home.jsp location :  C:\\Users\\USER\\eclipse-workspace\\.metadata\\.plugins\\org.eclip&zwnj;&#8203;se.wst.server.core\\t&zwnj;&#8203;mp0\\wtpwebapps\\Compa&zwnj;&#8203;ny\\Pages"}],"owner":{"account_id":24538904,"reputation":1,"user_id":18449546,"display_name":"Olcay &#199;etin"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1668692946,"creation_date":1668674600,"question_id":74472425,"body_markdown":"I am facing a issue actually it is not a big deal but i need to solve this problem for my work.\r\nWhen I write url like http://localhost:8080/****/Pages/Home.jsp it works fine but or when i try an unbeing page like http://localhost:8080/****/Pages/Hoxxxxme.jsp it redirects to my 404 error page.but when try like http://localhost:8080/****/Pages//Home.jsp loads a page but not proper way ([enter image description here](https://i.stack.imgur.com/6mklV.png) or http://localhost:8080/****/Pages/xxx/Home.jsp (unbeing page) it tries to redirect to 404 error page but not a proper way again [enter image description here](https://i.stack.imgur.com/H9kUo.png)\r\n\r\n\r\n\r\nI could not understand the problem.I tried mime type in web.xml, It didnt work.How can I solve this problem? \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot; id=&quot;WebApp_ID&quot; version=&quot;3.0&quot;&gt;\r\n      &lt;display-name&gt;CredIS&lt;/display-name&gt;\r\n      &lt;welcome-file-list&gt;\r\n        &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;\r\n      &lt;/welcome-file-list&gt;\r\n    &lt;!--   &lt;listener&gt;\r\n        &lt;listener-class&gt;com.crede.system.SessionListener&lt;/listener-class&gt;\r\n      &lt;/listener&gt;\r\n      &lt;listener&gt;\r\n        &lt;listener-class&gt;com.crede.system.ContextListener&lt;/listener-class&gt;\r\n      &lt;/listener&gt;\r\n\r\n       &lt;filter&gt;\r\n           &lt;filter-name&gt;UrlRewriteFilter&lt;/filter-name&gt;\r\n           &lt;filter-class&gt;org.tuckey.web.filters.urlrewrite.UrlRewriteFilter&lt;/filter-class&gt;\r\n        &lt;/filter&gt;\r\n        &lt;filter-mapping&gt;\r\n           &lt;filter-name&gt;UrlRewriteFilter&lt;/filter-name&gt;\r\n           &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\r\n        &lt;/filter-mapping&gt;\r\n            \r\n\r\n\r\n     --&gt;  &lt;session-config&gt;\r\n        &lt;session-timeout&gt;32&lt;/session-timeout&gt;\r\n      &lt;/session-config&gt;\r\n      \r\n     &lt;!-- BLOCK COMMENT FOR TEST LINK. REMOVE COMMENTS FOR PRODUCTION --&gt;\r\n     &lt;!--&lt;security-constraint&gt;\r\n     &lt;web-resource-collection&gt;\r\n     &lt;web-resource-name&gt;Protected Context&lt;/web-resource-name&gt;\r\n     &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\r\n     &lt;/web-resource-collection&gt;\r\n     &lt;user-data-constraint&gt;\r\n     &lt;transport-guarantee&gt;CONFIDENTIAL&lt;/transport-guarantee&gt;\r\n     &lt;/user-data-constraint&gt;\r\n     &lt;/security-constraint&gt; --&gt;\r\n     &lt;!-- BLOCK COMMENT FOR TEST LINK. REMOVE COMMENTS FOR PRODUCTION --&gt;\r\n     &lt;/web-app&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n    ","title":"Tomcat 9 adding more slash to url problem","body":"<p>I am facing a issue actually it is not a big deal but i need to solve this problem for my work.\nWhen I write url like http://localhost:8080/<strong><strong>/Pages/Home.jsp it works fine but or when i try an unbeing page like http://localhost:8080/</strong></strong>/Pages/Hoxxxxme.jsp it redirects to my 404 error page.but when try like http://localhost:8080/<strong><strong>/Pages//Home.jsp loads a page but not proper way (<a href=\"https://i.stack.imgur.com/6mklV.png\" rel=\"nofollow noreferrer\">enter image description here</a> or http://localhost:8080/</strong></strong>/Pages/xxx/Home.jsp (unbeing page) it tries to redirect to 404 error page but not a proper way again <a href=\"https://i.stack.imgur.com/H9kUo.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>I could not understand the problem.I tried mime type in web.xml, It didnt work.How can I solve this problem?</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;web-app xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://java.sun.com/xml/ns/javaee\" xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd\" id=\"WebApp_ID\" version=\"3.0\"&gt;\n  &lt;display-name&gt;CredIS&lt;/display-name&gt;\n  &lt;welcome-file-list&gt;\n    &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;\n  &lt;/welcome-file-list&gt;\n&lt;!--   &lt;listener&gt;\n    &lt;listener-class&gt;com.crede.system.SessionListener&lt;/listener-class&gt;\n  &lt;/listener&gt;\n  &lt;listener&gt;\n    &lt;listener-class&gt;com.crede.system.ContextListener&lt;/listener-class&gt;\n  &lt;/listener&gt;\n\n   &lt;filter&gt;\n       &lt;filter-name&gt;UrlRewriteFilter&lt;/filter-name&gt;\n       &lt;filter-class&gt;org.tuckey.web.filters.urlrewrite.UrlRewriteFilter&lt;/filter-class&gt;\n    &lt;/filter&gt;\n    &lt;filter-mapping&gt;\n       &lt;filter-name&gt;UrlRewriteFilter&lt;/filter-name&gt;\n       &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n    &lt;/filter-mapping&gt;\n        \n\n\n --&gt;  &lt;session-config&gt;\n    &lt;session-timeout&gt;32&lt;/session-timeout&gt;\n  &lt;/session-config&gt;\n  \n &lt;!-- BLOCK COMMENT FOR TEST LINK. REMOVE COMMENTS FOR PRODUCTION --&gt;\n &lt;!--&lt;security-constraint&gt;\n &lt;web-resource-collection&gt;\n &lt;web-resource-name&gt;Protected Context&lt;/web-resource-name&gt;\n &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n &lt;/web-resource-collection&gt;\n &lt;user-data-constraint&gt;\n &lt;transport-guarantee&gt;CONFIDENTIAL&lt;/transport-guarantee&gt;\n &lt;/user-data-constraint&gt;\n &lt;/security-constraint&gt; --&gt;\n &lt;!-- BLOCK COMMENT FOR TEST LINK. REMOVE COMMENTS FOR PRODUCTION --&gt;\n &lt;/web-app&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":["java","spring","unit-testing","junit","mocking"],"comments":[{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1668655441,"post_id":74466999,"comment_id":131460493,"body_markdown":"Don&#39;t.  Use a real one.  There&#39;s no reason to mock a Future of any kind.","body":"Don&#39;t.  Use a real one.  There&#39;s no reason to mock a Future of any kind."}],"answers":[{"tags":[],"owner":{"account_id":2681853,"reputation":148,"user_id":2317065,"display_name":"Italo Brenner"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1668692884,"creation_date":1668692884,"answer_id":74476582,"question_id":74466999,"body_markdown":"I created a component with has the same method of original static class, so when you need to mock, you can use @Mock.\r\n\r\n```\r\n@Component\r\npublic class ApplicationCompletableFuture {\r\n    public &lt;U&gt; CompletableFuture&lt;U&gt; supplyAsync(Supplier&lt;U&gt; supplier,\r\n                                                ForkJoinPool forkJoinPool) {\r\n        return CompletableFuture.supplyAsync(supplier, forkJoinPool);\r\n    }\r\n}\r\n```\r\n```\r\nCompletableFuture&lt;Pet&gt; branchCompletableFuture =\r\n        applicationCompletableFuture.supplyAsync(() -&gt; petService.validatePet(dto.getPetCode), forkJoinPool);\r\n```\r\n```\r\nwhen(applicationCompletableFuture.supplyAsync(any(),any()))\r\n        .thenReturn(CompletableFuture.completedFuture(pet));\r\n```","title":"How can I Mock CompletableFuture in Java","body":"<p>I created a component with has the same method of original static class, so when you need to mock, you can use @Mock.</p>\n<pre><code>@Component\npublic class ApplicationCompletableFuture {\n    public &lt;U&gt; CompletableFuture&lt;U&gt; supplyAsync(Supplier&lt;U&gt; supplier,\n                                                ForkJoinPool forkJoinPool) {\n        return CompletableFuture.supplyAsync(supplier, forkJoinPool);\n    }\n}\n</code></pre>\n<pre><code>CompletableFuture&lt;Pet&gt; branchCompletableFuture =\n        applicationCompletableFuture.supplyAsync(() -&gt; petService.validatePet(dto.getPetCode), forkJoinPool);\n</code></pre>\n<pre><code>when(applicationCompletableFuture.supplyAsync(any(),any()))\n        .thenReturn(CompletableFuture.completedFuture(pet));\n</code></pre>\n"}],"owner":{"account_id":7993603,"reputation":1201,"user_id":6030719,"accept_rate":50,"display_name":"S&#233;rgio Thiago Mendon&#231;a"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":972,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74476582,"answer_count":1,"score":1,"last_activity_date":1668692884,"creation_date":1668631565,"question_id":74466999,"body_markdown":"The calls in API:\r\n\r\n            CompletableFuture&lt;Beneficiary&gt; beneficiaryCompletableFuture =\r\n                CompletableFuture.supplyAsync(() -&gt;\r\n                        beneficiaryService.validateAndGetCustomer(dto.getBeneficiary()), forkJoinPool);\r\n\r\n\r\n        CompletableFuture&lt;List&lt;Product&gt;&gt; productsCompletableFuture =\r\n                CompletableFuture.supplyAsync(() -&gt;\r\n                        productService.validateAndGetProducts(dto.getProductCodeList()), forkJoinPool);\r\n\r\nWhen forkJoinPool is a Spring Configuration:\r\n\r\n    @Configuration\r\n    public class ForkJoinConfig {\r\n    \r\n        @Bean\r\n        public ForkJoinPool getForkJoinPool(){\r\n            return new ForkJoinPool();\r\n        }\r\n    }\r\n\r\nWhen i try to test this in Junit the call is stucked, the test does not work...\r\n\r\n[![stucked_test][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/onZUW.png\r\n\r\n\r\nI really don&#39;t know can i simple Mock a CompletableFuture.supplyAsync and identify what is Product or what is Beneficiary...\r\n\r\n\r\n","title":"How can I Mock CompletableFuture in Java","body":"<p>The calls in API:</p>\n<pre><code>        CompletableFuture&lt;Beneficiary&gt; beneficiaryCompletableFuture =\n            CompletableFuture.supplyAsync(() -&gt;\n                    beneficiaryService.validateAndGetCustomer(dto.getBeneficiary()), forkJoinPool);\n\n\n    CompletableFuture&lt;List&lt;Product&gt;&gt; productsCompletableFuture =\n            CompletableFuture.supplyAsync(() -&gt;\n                    productService.validateAndGetProducts(dto.getProductCodeList()), forkJoinPool);\n</code></pre>\n<p>When forkJoinPool is a Spring Configuration:</p>\n<pre><code>@Configuration\npublic class ForkJoinConfig {\n\n    @Bean\n    public ForkJoinPool getForkJoinPool(){\n        return new ForkJoinPool();\n    }\n}\n</code></pre>\n<p>When i try to test this in Junit the call is stucked, the test does not work...</p>\n<p><a href=\"https://i.stack.imgur.com/onZUW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/onZUW.png\" alt=\"stucked_test\" /></a></p>\n<p>I really don't know can i simple Mock a CompletableFuture.supplyAsync and identify what is Product or what is Beneficiary...</p>\n"},{"tags":["java","hibernate","modelmapper"],"answers":[{"tags":[],"owner":{"account_id":1734438,"reputation":36275,"user_id":1587329,"accept_rate":94,"display_name":"serv-inc"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640080351,"creation_date":1640080351,"answer_id":70433482,"question_id":63718182,"body_markdown":"Look a bit deeper in the stack trace: the last mapping problem is often something more actionable. \r\n\r\nMaybe the `PhoneDTO` was not mappable ? If so, you need to create a converter and tell model mapper about it, like so:\r\n\r\n```java\r\npublic class PhoneConverter extends AbstractConverter&lt;PhoneEntity, PhoneDto&gt;\r\n{\r\n   private final StrictModelMapper strictModelMapper;\r\n\r\n   @Override\r\n   public PhoneDto convert(@NonNull final PhoneEntity source)\r\n   {\r\n      PhoneDto phoneDto = new PhoneDto();\r\n      strictModelMapper.map(source, phoneDto);\r\n      return phoneDto;\r\n   }\r\n}\r\n```\r\nand add it to the `modelMapper`.","title":"ModelMapper - failed to convert org.hibernate.collection.internal.PersistentBag to java.util.ArrayList","body":"<p>Look a bit deeper in the stack trace: the last mapping problem is often something more actionable.</p>\n<p>Maybe the <code>PhoneDTO</code> was not mappable ? If so, you need to create a converter and tell model mapper about it, like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class PhoneConverter extends AbstractConverter&lt;PhoneEntity, PhoneDto&gt;\n{\n   private final StrictModelMapper strictModelMapper;\n\n   @Override\n   public PhoneDto convert(@NonNull final PhoneEntity source)\n   {\n      PhoneDto phoneDto = new PhoneDto();\n      strictModelMapper.map(source, phoneDto);\n      return phoneDto;\n   }\n}\n</code></pre>\n<p>and add it to the <code>modelMapper</code>.</p>\n"}],"owner":{"account_id":18208271,"reputation":109,"user_id":13251293,"display_name":"Shirabu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7554,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":1,"score":8,"last_activity_date":1668692876,"creation_date":1599115363,"question_id":63718182,"body_markdown":"How should ModelMapper configuration looks like?\r\n\r\ncompile group: &#39;org.modelmapper&#39;, name: &#39;modelmapper&#39;, version: &#39;2.3.8&#39;\r\n\r\nCurrently I have:\r\n\r\n     modelMapper = new ModelMapper();\r\n                modelMapper.getConfiguration()\r\n                        .setMatchingStrategy(MatchingStrategies.STANDARD)\r\n                        .setFieldMatchingEnabled(true)\r\n                        .setFieldAccessLevel(Configuration.AccessLevel.PRIVATE);\r\n\r\n    \r\n\r\n\r\nMy Entity has\r\n\r\n    @OneToMany(mappedBy = &quot;employee&quot;, cascade = CascadeType.ALL, orphanRemoval = true)\r\n    private List&lt;Phones&gt; phones = new ArrayList&lt;&gt;();\r\n\r\nMy second entity:\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;employee_id&quot;)\r\n    private Employee employee;\r\n\r\n\r\nMy DTO which I want to have:\r\n\r\n    @Data\r\n    @Builder\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor(force = true)\r\n    public class EmployeeDTO {\r\n    \r\n    @Singular\r\n    private final List&lt;PhoneDTO&gt; phones;\r\n    \r\n    }\r\n\r\nI am mapping this in this way:\r\n\r\n            EmployeeDTO.EmployeeDTOBuilder employeeDTOBuilder \r\n    = ObjectMapperUtils.map(employee, EmployeeDTO.employeeDTOBuilder.class);\r\n\r\nI&#39;m getting: \r\n\r\n1) Converter org.modelmapper.internal.converter.MergingCollectionConverter@969b4391 failed to convert org.hibernate.collection.internal.PersistentBag to java.util.ArrayList.\r\n","title":"ModelMapper - failed to convert org.hibernate.collection.internal.PersistentBag to java.util.ArrayList","body":"<p>How should ModelMapper configuration looks like?</p>\n<p>compile group: 'org.modelmapper', name: 'modelmapper', version: '2.3.8'</p>\n<p>Currently I have:</p>\n<pre><code> modelMapper = new ModelMapper();\n            modelMapper.getConfiguration()\n                    .setMatchingStrategy(MatchingStrategies.STANDARD)\n                    .setFieldMatchingEnabled(true)\n                    .setFieldAccessLevel(Configuration.AccessLevel.PRIVATE);\n</code></pre>\n<p>My Entity has</p>\n<pre><code>@OneToMany(mappedBy = &quot;employee&quot;, cascade = CascadeType.ALL, orphanRemoval = true)\nprivate List&lt;Phones&gt; phones = new ArrayList&lt;&gt;();\n</code></pre>\n<p>My second entity:</p>\n<pre><code>@ManyToOne\n@JoinColumn(name = &quot;employee_id&quot;)\nprivate Employee employee;\n</code></pre>\n<p>My DTO which I want to have:</p>\n<pre><code>@Data\n@Builder\n@AllArgsConstructor\n@NoArgsConstructor(force = true)\npublic class EmployeeDTO {\n\n@Singular\nprivate final List&lt;PhoneDTO&gt; phones;\n\n}\n</code></pre>\n<p>I am mapping this in this way:</p>\n<pre><code>        EmployeeDTO.EmployeeDTOBuilder employeeDTOBuilder \n= ObjectMapperUtils.map(employee, EmployeeDTO.employeeDTOBuilder.class);\n</code></pre>\n<p>I'm getting:</p>\n<ol>\n<li>Converter org.modelmapper.internal.converter.MergingCollectionConverter@969b4391 failed to convert org.hibernate.collection.internal.PersistentBag to java.util.ArrayList.</li>\n</ol>\n"},{"tags":["java","hashmap"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1668692741,"post_id":74476539,"comment_id":131471511,"body_markdown":"can you be more specific about what your question is?","body":"can you be more specific about what your question is?"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1668692846,"post_id":74476539,"comment_id":131471545,"body_markdown":"also, check your code -&gt; user = user this renders it uncompilable","body":"also, check your code -&gt; user = user this renders it uncompilable"},{"owner":{"account_id":26963071,"reputation":19,"user_id":20530426,"display_name":"sillyconAdmin"},"score":0,"creation_date":1668692958,"post_id":74476539,"comment_id":131471598,"body_markdown":"my question is how do I access to the username and password values stored in the hashMap from my GUI class","body":"my question is how do I access to the username and password values stored in the hashMap from my GUI class"},{"owner":{"account_id":14970623,"reputation":270,"user_id":10807611,"display_name":"Zerox"},"score":0,"creation_date":1668693134,"post_id":74476539,"comment_id":131471682,"body_markdown":"Besides that your GUI-class is missing `()`, wouldn&#39;t passing the Client-Object to the constructor be your answer? Or vice-versa","body":"Besides that your GUI-class is missing <code>()</code>, wouldn&#39;t passing the Client-Object to the constructor be your answer? Or vice-versa"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1668693188,"post_id":74476539,"comment_id":131471709,"body_markdown":"by working with an instance of the Client class. It might be better if you stopped with UI coding for now, and started learning the basics first.","body":"by working with an instance of the Client class. It might be better if you stopped with UI coding for now, and started learning the basics first."},{"owner":{"account_id":2698782,"reputation":38625,"user_id":2330053,"display_name":"Idle_Mind"},"score":0,"creation_date":1668693417,"post_id":74476539,"comment_id":131471801,"body_markdown":"Your HashMap is **public** and **static**, just access it directly using the class name followed by the variable name: `if (Client.clientMap.containsKey(userId)) { ... }`","body":"Your HashMap is <b>public</b> and <b>static</b>, just access it directly using the class name followed by the variable name: <code>if (Client.clientMap.containsKey(userId)) { ... }</code>"},{"owner":{"account_id":11060443,"reputation":71,"user_id":8121935,"display_name":"Eric Ballard"},"score":0,"creation_date":1668699933,"post_id":74476539,"comment_id":131474639,"body_markdown":"Quick 7m video - does a great job at explaining constructor keywords https://www.youtube.com/watch?v=pgBk8HC7jbU&amp;ab_channel=CodingwithJohn","body":"Quick 7m video - does a great job at explaining constructor keywords <a href=\"https://www.youtube.com/watch?v=pgBk8HC7jbU&amp;ab_channel=CodingwithJohn\" rel=\"nofollow noreferrer\">youtube.com/watch?v=pgBk8HC7jbU&amp;ab_channel=CodingwithJohn</a>"}],"owner":{"account_id":26963071,"reputation":19,"user_id":20530426,"display_name":"sillyconAdmin"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":77,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1668692871,"creation_date":1668692693,"question_id":74476539,"body_markdown":"I&#39;m trying to implement a simple login form in my application. I have created a class `client.java` in which I instantiated a hashMap:\r\n\r\n```\r\npackage com.xbank.event;\r\nimport com.xbank.service.*;\r\nimport java.text.*;\r\nimport java.util.*;\r\n\r\npublic  class Client {\r\n\t\r\n\tpublic static Map&lt;String, Client&gt; clientMap;\r\n\tpublic String name;\r\n\tpublic String username;\r\n\tpublic String password;\r\n\tpublic Double balance;\r\n\tpublic String address;\r\n\tpublic String phone;\r\n\t\r\n\t// Default Constructor\r\n\tpublic Client() {\r\n\t\tname = &quot;&quot;;\r\n\t\taddress = &quot;&quot;;\r\n\t\tphone = &quot;&quot;;\r\n\t\tusername = &quot;&quot;;\r\n\t\tpassword = &quot;&quot;;\r\n\t\tbalance = 0.0;\r\n\t\tclientMap = new HashMap&lt;String, Client&gt;();\r\n\t}\r\n\r\n\t// Parameterized Constructor\r\n\tpublic Client(String name, String username,String password, String phone, String address, Date date) {\r\n\t\t\r\n\t\tthis.name = name;\r\n\t\tthis.username = username;\r\n\t\tthis.password = password;\r\n\t\tthis.address = address;\r\n\t\tthis.phone = phone;\r\n\t}\r\n\t\r\n\tpublic void verify_login(String username, String password)\r\n\t{\r\n\t\t\r\n\t\tClient client = new Client();\r\n\t\t\r\n\t\tclient = new Client(username, password, name, address, phone, new Date());\r\n\t\tclientMap.put(username, client);\r\n\t\t\r\n\t\tif (clientMap.containsKey(username)) {\r\n\t\t\tSystem.out.println(username);\r\n\t\t\tclient = client.clientMap.get(username);\r\n\t\t\tif(client.password.equals(password)) {\r\n\t\t\t\tSystem.out.println(password);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tSystem.out.println(&quot;Wrong password&quot;);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tSystem.out.println(&quot;Wrong username&quot;);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tpublic static  Map&lt;String, Client&gt; getLoginInfo() {\r\n\t\treturn clientMap;\r\n\t}\r\n\t\r\n\t\r\n\tvoid showClientInfo() {\r\n\t\tSystem.out.println(&quot;Name: &quot;+name);\r\n\t\tSystem.out.println(&quot;Phone Name: &quot;+phone);\r\n\t\tSystem.out.println(&quot;Address Name: &quot;+address);\r\n\t}\r\n\t\r\n\t\r\n\tpublic String getName() {\r\n\t\treturn name;\r\n\t}\r\n\t\r\n\tpublic String getPhone() {\r\n\t\treturn phone;\r\n\t}\r\n\t\r\n\t\r\n\tpublic String getAddress() {\r\n\t\treturn address;\r\n\t}\r\n\t\r\n\tpublic String getUsername() {\r\n\t\treturn username;\r\n\t}\r\n\t\r\n\tpublic String getPassword() {\r\n\t\treturn password;\r\n\t}\r\n\t\r\n\t\r\n\t// end of class\r\n}\r\n```\r\n\r\nI want to access the hashMap from a GUI class that I have created, and set the conditions to login, but I can&#39;t find a way to do this\r\n\r\nGUI class:\r\n\r\n```\r\npublic class GUI {\r\n\t\r\n\t// remake the screen\r\n\tpublic void remakeScreen(JFrame frame, JPanel f) {\r\n\t\tf.setLayout(null); \r\n\t\tframe.setContentPane(f);\r\n\t\tframe.setVisible(true);\r\n\t}\t\r\n\t\r\n\t//------------------------------------------------------------\r\n\t//               Login Related Screen Functions               |\r\n\t//------------------------------------------------------------\r\n\t\r\n\t\r\n\t// sign in form which is displayed at the start of program\r\n\tpublic void openSignInForm(JFrame frame, Client client) {\r\n\t\tJPanel f = new JPanel();\t\t\r\n\t\tf.setBackground(Color.black);\r\n\t\t\r\n\t\t// main screen picture\r\n\t\tJLabel imgLabel = new JLabel(new ImageIcon( System.getProperty(&quot;user.dir&quot;) + &quot;/src/main/java/com/xbank/icon/image-1.png&quot;));\r\n\t\timgLabel.setBounds(300,50,450, 400 );\r\n\t\tf.add(imgLabel);\r\n\t\t\r\n\t\t//---------------------------------Creating Labels------------------------------------------\t\t\r\n\t\tJLabel l_hSignIn = new JLabel(&quot;Sign In&quot;);\r\n\t\tl_hSignIn.setFont( l_hSignIn.getFont().deriveFont(30f) );\r\n\t\tl_hSignIn.setBounds(120,24,100, 40);\r\n\t\tl_hSignIn.setForeground(Color.white);\r\n\t\tf.add(l_hSignIn);\r\n\t\t\r\n\t\tJLabel l_UserName = new JLabel(&quot;User Name&quot;);\r\n\t\tl_UserName.setBounds(140,120,100, 40);\r\n\t\tl_UserName.setForeground(Color.white);\r\n\t\tf.add(l_UserName);\r\n\t\t\r\n\t\tJLabel l_Password = new JLabel(&quot;Password&quot;);\r\n\t\tl_Password.setBounds(140,200,100, 40);\r\n\t\tl_Password.setForeground(Color.white);\r\n\t\tf.add(l_Password);\r\n\t\t\r\n\t\tJLabel l_Signup = new JLabel(&quot;Dont have an account?&quot;);\r\n\t\tl_Signup.setBounds(20,380,150, 40);\r\n\t\tl_Signup.setForeground(Color.white);\r\n\t\tf.add(l_Signup);\r\n\t\r\n\t\t//-----------------------------------Creating TextFields--------------------------------------------------\t\t\r\n\t\tJTextField tf_UserName = new JTextField();\r\n\t\ttf_UserName.setBounds(80,170,180, 25);\r\n\t\tf.add(tf_UserName);\r\n\t\t\r\n\t\tJPasswordField tf_Password = new JPasswordField();\r\n\t\ttf_Password.setBounds(80,250,180, 25);\r\n\t\tf.add(tf_Password);\r\n\t\t\t\r\n\t\t//-------------------------------------Creating Buttons--------------------------------------------------\r\n\t\tJButton btn_SignIn = new JButton(&quot;Sign In&quot;);\r\n\t\tbtn_SignIn.setFont( btn_SignIn.getFont().deriveFont(18f) );\r\n\t\tbtn_SignIn.setBackground( new Color(0, 204, 153) );\r\n\t\tbtn_SignIn.setForeground(Color.black);\r\n\t\tbtn_SignIn.setBounds(120,300,110, 40);\r\n\t\tf.add(btn_SignIn);\r\n\t\t\r\n\t\tJButton btn_SignUp = new JButton(&quot;Sign Up&quot;);\r\n\t\tbtn_SignUp.setFont( btn_SignUp.getFont().deriveFont(18f) );\r\n\t\tbtn_SignUp.setBackground( new Color(0, 204, 153) );\r\n\t\tbtn_SignUp.setForeground(Color.black);\r\n\t\tbtn_SignUp.setBounds(180,380,110, 40);\r\n\t\tf.add(btn_SignUp);\r\n\t\t\r\n\t\t//---------------------------------------SignUp functionality----------------------------------------------\r\n\t\t\r\n\t\t\t\tbtn_SignUp.addActionListener(new ActionListener() {\r\n\t\t\t\t\tpublic void actionPerformed(ActionEvent e) {\t\t\t\t\t\t\r\n\t\t\t\t\topen_Signup_form_1(frame, client);\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\r\n\t\t//----------------------------------Sign in Functionality-----------------------------------------------\t\t\r\n\t\tbtn_SignIn.addActionListener( new ActionListener() {\r\n\t\t\tpublic void actionPerformed(ActionEvent e) {\t\r\n\t\t\t\tMap&lt;String, Client&gt; user = (Map&lt;String, Client&gt;) new Client();\r\n//\t\t\t\tHashMap&lt;String, Client&gt; logininfo = new HashMap&lt;String, Client&gt;();\t\t\t\t\r\n\t\t\t\tuser = user\r\n\t\t\t\t\r\n\t\t\t\tif(e.getSource() == btn_SignIn) {\r\n\t\t\t\t\tString userId = tf_UserName.getText();\r\n\t\t\t\t\tString password = String.valueOf(tf_Password.getPassword());\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(client.containsKey(userId)) {\r\n\t\t\t\t\t\t if (client.get(userId).equals(password)) {\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tClient Client = new Client( client.getName(), null, null, null, null, null );\r\n\t\t\t\t\t\t\t\t\t\tframe.remove(f);\r\n\t\t\t\t\t\t\t\t\t\tframe.repaint();\r\n\t\t\t\t\t\t\t\t\t\tframe.validate();\r\n\t\t\t\t\t\t\t\t\t\topenClientMenu(frame,client);\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t }else {\r\n\t\t\t\t\t\t\t System.out.println(&quot;Wrong username or password.&quot;);\r\n\t\t\t\t\t\t }\t\t\t\t\t\t\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tSystem.out.println(&quot;Wrong username or password.&quot;);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t}\t\t\r\n\t\t});\r\n\t\tremakeScreen(frame, f);\r\n\t}\r\n```\r\n","title":"Use hashMap from another class","body":"<p>I'm trying to implement a simple login form in my application. I have created a class <code>client.java</code> in which I instantiated a hashMap:</p>\n<pre><code>package com.xbank.event;\nimport com.xbank.service.*;\nimport java.text.*;\nimport java.util.*;\n\npublic  class Client {\n    \n    public static Map&lt;String, Client&gt; clientMap;\n    public String name;\n    public String username;\n    public String password;\n    public Double balance;\n    public String address;\n    public String phone;\n    \n    // Default Constructor\n    public Client() {\n        name = &quot;&quot;;\n        address = &quot;&quot;;\n        phone = &quot;&quot;;\n        username = &quot;&quot;;\n        password = &quot;&quot;;\n        balance = 0.0;\n        clientMap = new HashMap&lt;String, Client&gt;();\n    }\n\n    // Parameterized Constructor\n    public Client(String name, String username,String password, String phone, String address, Date date) {\n        \n        this.name = name;\n        this.username = username;\n        this.password = password;\n        this.address = address;\n        this.phone = phone;\n    }\n    \n    public void verify_login(String username, String password)\n    {\n        \n        Client client = new Client();\n        \n        client = new Client(username, password, name, address, phone, new Date());\n        clientMap.put(username, client);\n        \n        if (clientMap.containsKey(username)) {\n            System.out.println(username);\n            client = client.clientMap.get(username);\n            if(client.password.equals(password)) {\n                System.out.println(password);\n            }\n            else {\n                System.out.println(&quot;Wrong password&quot;);\n            }\n        }\n        else {\n            System.out.println(&quot;Wrong username&quot;);\n        }\n        \n    }\n    \n    \n    public static  Map&lt;String, Client&gt; getLoginInfo() {\n        return clientMap;\n    }\n    \n    \n    void showClientInfo() {\n        System.out.println(&quot;Name: &quot;+name);\n        System.out.println(&quot;Phone Name: &quot;+phone);\n        System.out.println(&quot;Address Name: &quot;+address);\n    }\n    \n    \n    public String getName() {\n        return name;\n    }\n    \n    public String getPhone() {\n        return phone;\n    }\n    \n    \n    public String getAddress() {\n        return address;\n    }\n    \n    public String getUsername() {\n        return username;\n    }\n    \n    public String getPassword() {\n        return password;\n    }\n    \n    \n    // end of class\n}\n</code></pre>\n<p>I want to access the hashMap from a GUI class that I have created, and set the conditions to login, but I can't find a way to do this</p>\n<p>GUI class:</p>\n<pre><code>public class GUI {\n    \n    // remake the screen\n    public void remakeScreen(JFrame frame, JPanel f) {\n        f.setLayout(null); \n        frame.setContentPane(f);\n        frame.setVisible(true);\n    }   \n    \n    //------------------------------------------------------------\n    //               Login Related Screen Functions               |\n    //------------------------------------------------------------\n    \n    \n    // sign in form which is displayed at the start of program\n    public void openSignInForm(JFrame frame, Client client) {\n        JPanel f = new JPanel();        \n        f.setBackground(Color.black);\n        \n        // main screen picture\n        JLabel imgLabel = new JLabel(new ImageIcon( System.getProperty(&quot;user.dir&quot;) + &quot;/src/main/java/com/xbank/icon/image-1.png&quot;));\n        imgLabel.setBounds(300,50,450, 400 );\n        f.add(imgLabel);\n        \n        //---------------------------------Creating Labels------------------------------------------        \n        JLabel l_hSignIn = new JLabel(&quot;Sign In&quot;);\n        l_hSignIn.setFont( l_hSignIn.getFont().deriveFont(30f) );\n        l_hSignIn.setBounds(120,24,100, 40);\n        l_hSignIn.setForeground(Color.white);\n        f.add(l_hSignIn);\n        \n        JLabel l_UserName = new JLabel(&quot;User Name&quot;);\n        l_UserName.setBounds(140,120,100, 40);\n        l_UserName.setForeground(Color.white);\n        f.add(l_UserName);\n        \n        JLabel l_Password = new JLabel(&quot;Password&quot;);\n        l_Password.setBounds(140,200,100, 40);\n        l_Password.setForeground(Color.white);\n        f.add(l_Password);\n        \n        JLabel l_Signup = new JLabel(&quot;Dont have an account?&quot;);\n        l_Signup.setBounds(20,380,150, 40);\n        l_Signup.setForeground(Color.white);\n        f.add(l_Signup);\n    \n        //-----------------------------------Creating TextFields--------------------------------------------------      \n        JTextField tf_UserName = new JTextField();\n        tf_UserName.setBounds(80,170,180, 25);\n        f.add(tf_UserName);\n        \n        JPasswordField tf_Password = new JPasswordField();\n        tf_Password.setBounds(80,250,180, 25);\n        f.add(tf_Password);\n            \n        //-------------------------------------Creating Buttons--------------------------------------------------\n        JButton btn_SignIn = new JButton(&quot;Sign In&quot;);\n        btn_SignIn.setFont( btn_SignIn.getFont().deriveFont(18f) );\n        btn_SignIn.setBackground( new Color(0, 204, 153) );\n        btn_SignIn.setForeground(Color.black);\n        btn_SignIn.setBounds(120,300,110, 40);\n        f.add(btn_SignIn);\n        \n        JButton btn_SignUp = new JButton(&quot;Sign Up&quot;);\n        btn_SignUp.setFont( btn_SignUp.getFont().deriveFont(18f) );\n        btn_SignUp.setBackground( new Color(0, 204, 153) );\n        btn_SignUp.setForeground(Color.black);\n        btn_SignUp.setBounds(180,380,110, 40);\n        f.add(btn_SignUp);\n        \n        //---------------------------------------SignUp functionality----------------------------------------------\n        \n                btn_SignUp.addActionListener(new ActionListener() {\n                    public void actionPerformed(ActionEvent e) {                        \n                    open_Signup_form_1(frame, client);                      \n                    }\n                });\n        \n        //----------------------------------Sign in Functionality-----------------------------------------------        \n        btn_SignIn.addActionListener( new ActionListener() {\n            public void actionPerformed(ActionEvent e) {    \n                Map&lt;String, Client&gt; user = (Map&lt;String, Client&gt;) new Client();\n//              HashMap&lt;String, Client&gt; logininfo = new HashMap&lt;String, Client&gt;();              \n                user = user\n                \n                if(e.getSource() == btn_SignIn) {\n                    String userId = tf_UserName.getText();\n                    String password = String.valueOf(tf_Password.getPassword());\n                    \n                    if(client.containsKey(userId)) {\n                         if (client.get(userId).equals(password)) {                             \n                                        Client Client = new Client( client.getName(), null, null, null, null, null );\n                                        frame.remove(f);\n                                        frame.repaint();\n                                        frame.validate();\n                                        openClientMenu(frame,client);                           \n                         }else {\n                             System.out.println(&quot;Wrong username or password.&quot;);\n                         }                      \n                    } else {\n                        System.out.println(&quot;Wrong username or password.&quot;);\n                    }\n                }\n                }       \n        });\n        remakeScreen(frame, f);\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","spring-mvc","http-request-parameters"],"answers":[{"comments":[{"owner":{"account_id":11521080,"reputation":39,"user_id":8442830,"display_name":"Deep Shah"},"score":0,"creation_date":1668694503,"post_id":74476543,"comment_id":131472273,"body_markdown":"Thanks ! But I am new to spring boot so can you tell me how do i send the data from javascript to my controller method..","body":"Thanks ! But I am new to spring boot so can you tell me how do i send the data from javascript to my controller method.."},{"owner":{"account_id":11521080,"reputation":39,"user_id":8442830,"display_name":"Deep Shah"},"score":0,"creation_date":1668703433,"post_id":74476543,"comment_id":131476013,"body_markdown":"Can you help me with this please..","body":"Can you help me with this please.."},{"owner":{"display_name":"user15660680"},"score":0,"creation_date":1668747762,"post_id":74476543,"comment_id":131486473,"body_markdown":"no bro , im not good at spring boot","body":"no bro , im not good at spring boot"}],"tags":[],"owner":{"display_name":"user15660680"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668692724,"creation_date":1668692724,"answer_id":74476543,"question_id":74476391,"body_markdown":"By using Js \r\n````\r\nvar checkbox = document.querySelector(&quot;input[name=postcheckbox]&quot;);\r\n\r\ncheckbox.addEventListener(&#39;change&#39;, function() {\r\n  if (this.checked) {\r\n    console.log(&quot;Checkbox is checked..&quot;);\r\n    //pass to model\r\n\r\n  } else {\r\n    console.log(&quot;Checkbox is not checked..&quot;);\r\n    //pass to model\r\n\r\n  }\r\n});\r\n\r\n````","title":"How do i get changed value of a single checkbox in requestparam and pass it to ModelAndView in spring boot?","body":"<p>By using Js</p>\n<pre><code>var checkbox = document.querySelector(&quot;input[name=postcheckbox]&quot;);\n\ncheckbox.addEventListener('change', function() {\n  if (this.checked) {\n    console.log(&quot;Checkbox is checked..&quot;);\n    //pass to model\n\n  } else {\n    console.log(&quot;Checkbox is not checked..&quot;);\n    //pass to model\n\n  }\n});\n\n</code></pre>\n"}],"owner":{"account_id":11521080,"reputation":39,"user_id":8442830,"display_name":"Deep Shah"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1668692724,"creation_date":1668692099,"question_id":74476391,"body_markdown":"html file:\r\n\r\n         &lt;html&gt;\r\n       &lt;body&gt;\r\n          &lt;label&gt;\r\n        &lt;input type=&quot;checkbox&quot; name=&quot;postcheckbox&quot; /&gt;\r\n            demo checkbox\r\n        &lt;/label&gt;\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\nI want to get the value of changed state of checkbox in my controller.","title":"How do i get changed value of a single checkbox in requestparam and pass it to ModelAndView in spring boot?","body":"<p>html file:</p>\n<pre><code>     &lt;html&gt;\n   &lt;body&gt;\n      &lt;label&gt;\n    &lt;input type=&quot;checkbox&quot; name=&quot;postcheckbox&quot; /&gt;\n        demo checkbox\n    &lt;/label&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>I want to get the value of changed state of checkbox in my controller.</p>\n"},{"tags":["java","postgresql","spring-data-jpa"],"comments":[{"owner":{"account_id":5900048,"reputation":67,"user_id":4643879,"display_name":"jodoro"},"score":0,"creation_date":1668687573,"post_id":74474905,"comment_id":131469423,"body_markdown":"findAllByParamIn(Iterable&lt;String&gt; params)","body":"findAllByParamIn(Iterable&lt;String&gt; params)"}],"answers":[{"comments":[{"owner":{"account_id":18977021,"reputation":107,"user_id":13849269,"display_name":"Axel HK"},"score":0,"creation_date":1668689478,"post_id":74475103,"comment_id":131470095,"body_markdown":"thanks for answering, but I think i need bit different. \nFor example I have Entity User with name, sername, address, age.\nIn one case I want to choose only name, in other surname, age and address. And e.t.c\nIn article u send, I guess I need to write to many different interface to emulate dynamically output of rows","body":"thanks for answering, but I think i need bit different.  For example I have Entity User with name, sername, address, age. In one case I want to choose only name, in other surname, age and address. And e.t.c In article u send, I guess I need to write to many different interface to emulate dynamically output of rows"},{"owner":{"account_id":26555431,"reputation":558,"user_id":20184128,"display_name":"berse2212"},"score":0,"creation_date":1668691995,"post_id":74475103,"comment_id":131471186,"body_markdown":"I added some truly dynamic possibilities, but since Java doesn&#39;t really have dynamic objects anyway I am not sure if that&#39;s really a good way to do things.","body":"I added some truly dynamic possibilities, but since Java doesn&#39;t really have dynamic objects anyway I am not sure if that&#39;s really a good way to do things."}],"tags":[],"owner":{"account_id":26555431,"reputation":558,"user_id":20184128,"display_name":"berse2212"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1668691913,"creation_date":1668686423,"answer_id":74475103,"question_id":74474905,"body_markdown":"You can create interfaces to represent a View like the following:\r\n\r\n    public interface UserView {\r\n    \tString getName();\r\n    }\r\n\r\nand then put it as the return value in your repository:\r\n\r\n    UserView findAll();\r\n\r\nYou can also implement a dynamic projection the following way:\r\n\r\n    T findAll(Class&lt;T&gt; type);\r\n\r\nand call it like\r\n\r\n    userRepository.findAll(UserView.class)\r\n    userRepository.findAll(User.class)\r\n\r\nRead more about projection here: https://www.baeldung.com/spring-data-jpa-projections\r\n\r\nEdit\r\n\r\nYou can be truely dynamic if you use javax.persistence.Tuple as return value in your interface:\r\n\r\n    Tuple findAll();\r\n\r\nHowever you have to extract the data yourself then:\r\n\r\n    tuple.get(&quot;NAME&quot;, String.class)\r\n\r\nHowever that still selects all fields from the database. If you truely want dynamic sql queries you can call EntityManager to create a dynamic SQL:\r\n\r\n    entityManager.createQuery(&quot;select ...&quot;), Tuple.class).getResultList();\r\n\r\nIf you do that make sure to not be vulnerable for SQL injection!","title":"JPA Query. Path array of parameters that need to be selected","body":"<p>You can create interfaces to represent a View like the following:</p>\n<pre><code>public interface UserView {\n    String getName();\n}\n</code></pre>\n<p>and then put it as the return value in your repository:</p>\n<pre><code>UserView findAll();\n</code></pre>\n<p>You can also implement a dynamic projection the following way:</p>\n<pre><code>T findAll(Class&lt;T&gt; type);\n</code></pre>\n<p>and call it like</p>\n<pre><code>userRepository.findAll(UserView.class)\nuserRepository.findAll(User.class)\n</code></pre>\n<p>Read more about projection here: <a href=\"https://www.baeldung.com/spring-data-jpa-projections\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-data-jpa-projections</a></p>\n<p>Edit</p>\n<p>You can be truely dynamic if you use javax.persistence.Tuple as return value in your interface:</p>\n<pre><code>Tuple findAll();\n</code></pre>\n<p>However you have to extract the data yourself then:</p>\n<pre><code>tuple.get(&quot;NAME&quot;, String.class)\n</code></pre>\n<p>However that still selects all fields from the database. If you truely want dynamic sql queries you can call EntityManager to create a dynamic SQL:</p>\n<pre><code>entityManager.createQuery(&quot;select ...&quot;), Tuple.class).getResultList();\n</code></pre>\n<p>If you do that make sure to not be vulnerable for SQL injection!</p>\n"}],"owner":{"account_id":18977021,"reputation":107,"user_id":13849269,"display_name":"Axel HK"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":103,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74475103,"answer_count":1,"score":0,"last_activity_date":1668691913,"creation_date":1668685466,"question_id":74474905,"body_markdown":"I need to choose dynamically which parameters should be in query output. Is there any way to do something like that:\r\n```\r\n@Query(value = &quot;select params = :arrayOfParams from myTable&quot;, nativeQuery = true)\r\nUser findparamsAll(@Param(&quot;arrayOfParams&quot;) List&lt;String&gt; params);\r\n```\r\nFor example I have Entity User with name, surname, address, age.\r\nIn one case I want to choose only name, in other sername, age and address. And e.t.c","title":"JPA Query. Path array of parameters that need to be selected","body":"<p>I need to choose dynamically which parameters should be in query output. Is there any way to do something like that:</p>\n<pre><code>@Query(value = &quot;select params = :arrayOfParams from myTable&quot;, nativeQuery = true)\nUser findparamsAll(@Param(&quot;arrayOfParams&quot;) List&lt;String&gt; params);\n</code></pre>\n<p>For example I have Entity User with name, surname, address, age.\nIn one case I want to choose only name, in other sername, age and address. And e.t.c</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc","spring-data-jpa"],"comments":[{"owner":{"account_id":13537270,"reputation":379,"user_id":9766057,"display_name":"ebenjs"},"score":0,"creation_date":1668679892,"post_id":74473314,"comment_id":131466635,"body_markdown":"Why are you handling requests with that RequestPayload class. You can create API with just some annotations and functions. Follow the documentation : https://spring.io/guides/tutorials/rest/","body":"Why are you handling requests with that RequestPayload class. You can create API with just some annotations and functions. Follow the documentation : <a href=\"https://spring.io/guides/tutorials/rest/\" rel=\"nofollow noreferrer\">spring.io/guides/tutorials/rest</a>"}],"answers":[{"tags":[],"owner":{"account_id":11732873,"reputation":734,"user_id":8587732,"display_name":"Vitaly Chura"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1668691664,"creation_date":1668680151,"answer_id":74473664,"question_id":74473314,"body_markdown":"You need a POJO class that will match the structure of your JSON payload, actually a few nested classes. Spring will automatically parse JSON into this POJO.\r\n\r\n```\r\npublic class Request {\r\n    private RequestPayload reqPayload;\r\n    // Getter Setter\r\n}\r\n\r\npublic class RequestPayload {\r\n    private Checklist checklist;\r\n    // Getter Setter\r\n}\r\n\r\npublic class Checklist {\r\n    @JsonProperty(&quot;pol_pkg_prod_code&quot;)\r\n    private String polPkgProdCode;\r\n}\r\n```\r\nThen add it to Controller as an argument like this:\r\n```\r\n@RequestBody Request request\r\n```\r\n\r\nThis tutorial explains it well\r\nhttps://www.baeldung.com/spring-request-response-body","title":"I am trying to create an API using SpringBoot but I don&#39;t know how to handle json request/response","body":"<p>You need a POJO class that will match the structure of your JSON payload, actually a few nested classes. Spring will automatically parse JSON into this POJO.</p>\n<pre><code>public class Request {\n    private RequestPayload reqPayload;\n    // Getter Setter\n}\n\npublic class RequestPayload {\n    private Checklist checklist;\n    // Getter Setter\n}\n\npublic class Checklist {\n    @JsonProperty(&quot;pol_pkg_prod_code&quot;)\n    private String polPkgProdCode;\n}\n</code></pre>\n<p>Then add it to Controller as an argument like this:</p>\n<pre><code>@RequestBody Request request\n</code></pre>\n<p>This tutorial explains it well\n<a href=\"https://www.baeldung.com/spring-request-response-body\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-request-response-body</a></p>\n"}],"owner":{"account_id":22954739,"reputation":57,"user_id":17085470,"display_name":"Sunny"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74473664,"answer_count":1,"score":0,"last_activity_date":1668691664,"creation_date":1668678592,"question_id":74473314,"body_markdown":"I am new to Java and Spring boot. I am creating a new API.\r\nUsing postman I am sending a request body which contains request header and request payload.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/77U12.png\r\n\r\n\r\n\r\n\r\n\r\n\r\nThen I have a controller which handles the request with the help of RequestPayload class. (And a service and dao file but I am sure those are ok.)\r\n\r\nKindly let me know what Am I missing here or what do I not know.\r\n\r\n    public class RequestPayload {\r\n    \r\n    \tString pol_pkg_prod_code;\r\n    \tJSONObject checklist;\r\n    \t\r\n    \tpublic JSONObject getCheckList() {\r\n    \t\treturn checklist;\r\n    \t}\r\n    \tpublic void setCheckList(JSONObject checklist) {\r\n    \t\tthis.checklist = checklist;\r\n    \t}\r\n    \tpublic String pol_pkg_prod_code() {\r\n    \t\treturn pol_pkg_prod_code;\r\n    \t}\r\n    \tpublic void setpol_pkg_prod_code(String pol_pkg_prod_code) {\r\n    \t\tthis.pol_pkg_prod_code = pol_pkg_prod_code;\r\n    \t}","title":"I am trying to create an API using SpringBoot but I don&#39;t know how to handle json request/response","body":"<p>I am new to Java and Spring boot. I am creating a new API.\nUsing postman I am sending a request body which contains request header and request payload.</p>\n<p><a href=\"https://i.stack.imgur.com/77U12.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/77U12.png\" alt=\"enter image description here\" /></a></p>\n<p>Then I have a controller which handles the request with the help of RequestPayload class. (And a service and dao file but I am sure those are ok.)</p>\n<p>Kindly let me know what Am I missing here or what do I not know.</p>\n<pre><code>public class RequestPayload {\n\n    String pol_pkg_prod_code;\n    JSONObject checklist;\n    \n    public JSONObject getCheckList() {\n        return checklist;\n    }\n    public void setCheckList(JSONObject checklist) {\n        this.checklist = checklist;\n    }\n    public String pol_pkg_prod_code() {\n        return pol_pkg_prod_code;\n    }\n    public void setpol_pkg_prod_code(String pol_pkg_prod_code) {\n        this.pol_pkg_prod_code = pol_pkg_prod_code;\n    }\n</code></pre>\n"},{"tags":["java","regex","string","string-comparison"],"comments":[{"owner":{"account_id":212518,"reputation":43399,"user_id":465378,"accept_rate":85,"display_name":"Alexis King"},"score":4,"creation_date":1422515115,"post_id":28208793,"comment_id":44782269,"body_markdown":"It&#39;s faster to not care about premature optimization and just write code.","body":"It&#39;s faster to not care about premature optimization and just write code."},{"owner":{"account_id":212518,"reputation":43399,"user_id":465378,"accept_rate":85,"display_name":"Alexis King"},"score":0,"creation_date":1422515169,"post_id":28208793,"comment_id":44782290,"body_markdown":"(But almost certainly `.contains` if you&#39;re just looking for text.)","body":"(But almost certainly <code>.contains</code> if you&#39;re just looking for text.)"},{"owner":{"account_id":277724,"reputation":3090,"user_id":571875,"accept_rate":93,"display_name":"mal"},"score":0,"creation_date":1422515220,"post_id":28208793,"comment_id":44782313,"body_markdown":"I&#39;m writing, and I definitely take your point. I&#39;m just curious is all :-D","body":"I&#39;m writing, and I definitely take your point. I&#39;m just curious is all :-D"},{"owner":{"account_id":10030,"reputation":333803,"user_id":18771,"accept_rate":87,"display_name":"Tomalak"},"score":5,"creation_date":1422515560,"post_id":28208793,"comment_id":44782489,"body_markdown":"@bot_bot Then why don&#39;t you *measure* it? It&#39;s not that difficult to do, right? Besides, unless you think you are the first person in the world to have that question, searching for it on the Internet will very likely provide an answer as well. And besides *that*, you are supposed to use a JSON parser to read JSON, and *nothing else*.","body":"@bot_bot Then why don&#39;t you <i>measure</i> it? It&#39;s not that difficult to do, right? Besides, unless you think you are the first person in the world to have that question, searching for it on the Internet will very likely provide an answer as well. And besides <i>that</i>, you are supposed to use a JSON parser to read JSON, and <i>nothing else</i>."},{"owner":{"account_id":9,"reputation":220303,"user_id":13,"accept_rate":100,"display_name":"C. K. Young"},"score":1,"creation_date":1422515814,"post_id":28208793,"comment_id":44782606,"body_markdown":"You actually should be using a JSON parser for JSON data, not regexes.","body":"You actually should be using a JSON parser for JSON data, not regexes."},{"owner":{"account_id":277724,"reputation":3090,"user_id":571875,"accept_rate":93,"display_name":"mal"},"score":0,"creation_date":1422516386,"post_id":28208793,"comment_id":44782881,"body_markdown":"@Tomalak and Chris Jester-Young , I&#39;m reading a byte stream from a socket, the client is transmitting ascii chars, I&#39;m looking for that string so I know when the string is ready to pass into a JSONObject. Should I use something else to mark end of message (\\n for example) and use something like google-json instead?","body":"@Tomalak and Chris Jester-Young , I&#39;m reading a byte stream from a socket, the client is transmitting ascii chars, I&#39;m looking for that string so I know when the string is ready to pass into a JSONObject. Should I use something else to mark end of message (\\n for example) and use something like google-json instead?"},{"owner":{"account_id":1494484,"reputation":56249,"user_id":1400768,"display_name":"nhahtdh"},"score":0,"creation_date":1422516652,"post_id":28208793,"comment_id":44782999,"body_markdown":"If this question were to ask about the performance of searching for a fixed string from a haystack, then it might be interesting, but your question body just doesn&#39;t make sense here.","body":"If this question were to ask about the performance of searching for a fixed string from a haystack, then it might be interesting, but your question body just doesn&#39;t make sense here."},{"owner":{"account_id":10030,"reputation":333803,"user_id":18771,"accept_rate":87,"display_name":"Tomalak"},"score":0,"creation_date":1422516726,"post_id":28208793,"comment_id":44783032,"body_markdown":"Regular expressions don&#39;t operate on byte streams from sockets, they operate on strings. The same goes for `.contains()`. So you&#39;d have to receive the string first and that means the whole &quot;socket&quot; thing is irrelevant. When you have received the string, is it JSON or not? If yes, use a JSON parser.","body":"Regular expressions don&#39;t operate on byte streams from sockets, they operate on strings. The same goes for <code>.contains()</code>. So you&#39;d have to receive the string first and that means the whole &quot;socket&quot; thing is irrelevant. When you have received the string, is it JSON or not? If yes, use a JSON parser."},{"owner":{"account_id":277724,"reputation":3090,"user_id":571875,"accept_rate":93,"display_name":"mal"},"score":0,"creation_date":1422517028,"post_id":28208793,"comment_id":44783171,"body_markdown":"@Tomalak it is JSON, but I need to know when the client has finished sending. Am I worrying about noting here? should I just wait until `SocketChannel.read()` returns 0 before I parse the JSON? Once I have analysed the JSON message I need to respond.","body":"@Tomalak it is JSON, but I need to know when the client has finished sending. Am I worrying about noting here? should I just wait until <code>SocketChannel.read()</code> returns 0 before I parse the JSON? Once I have analysed the JSON message I need to respond."},{"owner":{"account_id":10030,"reputation":333803,"user_id":18771,"accept_rate":87,"display_name":"Tomalak"},"score":0,"creation_date":1422517928,"post_id":28208793,"comment_id":44783599,"body_markdown":"Hm. There are libraries that do these low-level things for you. Why are you reading the socket yourself? That&#39;s a solved problem, you don&#39;t need to write your own implementation. (It starts to look like &quot;what is faster&quot; isn&#39;t your primary problem at all...)","body":"Hm. There are libraries that do these low-level things for you. Why are you reading the socket yourself? That&#39;s a solved problem, you don&#39;t need to write your own implementation. (It starts to look like &quot;what is faster&quot; isn&#39;t your primary problem at all...)"},{"owner":{"account_id":277724,"reputation":3090,"user_id":571875,"accept_rate":93,"display_name":"mal"},"score":1,"creation_date":1422519110,"post_id":28208793,"comment_id":44784178,"body_markdown":"I&#39;m working with a small embedded device with limited capabilities. it can only send bytes, it doesn&#39;t implement HTTP, we have to write our own protocol. I am looking at using something like Spring reactor to try implement this eventually, but with my lack of experience with NIO (and a lot of other stuff) I&#39;m prototyping first so I get an understanding of SocketChannels. Reactor (and quite a lot of Spring) is way over my head right now.  I&#39;ve successfully implemented a small single threaded server using  NIO ServerSocketChannels and SocketChannels. So that&#39;s where I am currently :-)","body":"I&#39;m working with a small embedded device with limited capabilities. it can only send bytes, it doesn&#39;t implement HTTP, we have to write our own protocol. I am looking at using something like Spring reactor to try implement this eventually, but with my lack of experience with NIO (and a lot of other stuff) I&#39;m prototyping first so I get an understanding of SocketChannels. Reactor (and quite a lot of Spring) is way over my head right now.  I&#39;ve successfully implemented a small single threaded server using  NIO ServerSocketChannels and SocketChannels. So that&#39;s where I am currently :-)"},{"owner":{"account_id":10030,"reputation":333803,"user_id":18771,"accept_rate":87,"display_name":"Tomalak"},"score":0,"creation_date":1422560871,"post_id":28208793,"comment_id":44809501,"body_markdown":"I see. I&#39;d first establish a protocol that gives the incoming stream a structure. JSON is defined a string of *Unicode characters* (not bytes!), so the first thing to do is to decide whether you want to support Unicode at all. If you don&#39;t, you could use 0x0 as the message terminator. Otherwise you can&#39;t, because Unicode byte encodings contain 0x0 themselves and you&#39;d have to think of a different terminator.","body":"I see. I&#39;d first establish a protocol that gives the incoming stream a structure. JSON is defined a string of <i>Unicode characters</i> (not bytes!), so the first thing to do is to decide whether you want to support Unicode at all. If you don&#39;t, you could use 0x0 as the message terminator. Otherwise you can&#39;t, because Unicode byte encodings contain 0x0 themselves and you&#39;d have to think of a different terminator."},{"owner":{"account_id":277724,"reputation":3090,"user_id":571875,"accept_rate":93,"display_name":"mal"},"score":0,"creation_date":1422606128,"post_id":28208793,"comment_id":44825792,"body_markdown":"OK, this is very helpful, thanks! I&#39;ve definitely been over thinking things.","body":"OK, this is very helpful, thanks! I&#39;ve definitely been over thinking things."}],"answers":[{"comments":[{"owner":{"account_id":10030,"reputation":333803,"user_id":18771,"accept_rate":87,"display_name":"Tomalak"},"score":2,"creation_date":1422516006,"post_id":28208935,"comment_id":44782690,"body_markdown":"The important point is that both regex and `contains` are *incorrect*. It doesn&#39;t matter which incorrect procedure is faster than the other one.","body":"The important point is that both regex and <code>contains</code> are <i>incorrect</i>. It doesn&#39;t matter which incorrect procedure is faster than the other one."},{"owner":{"account_id":10030,"reputation":333803,"user_id":18771,"accept_rate":87,"display_name":"Tomalak"},"score":0,"creation_date":1541421682,"post_id":28208935,"comment_id":93199519,"body_markdown":"@Buffalo They are incorrect because they look at the *unparsed* JSON text. And as far as JSON is concerned, `{&quot;Message&quot; : &quot;END&quot;}` and `{&quot;\\u004d\\u0065\\u0073\\u0073\\u0061\\u0067\\u0065&quot;: &quot;\\u0045\\u004e\\u0044&quot;}` are _exactly the same thing_. The string-contains search will only find one of them. Real-world situations might be more subtle than that, but the point remains - JSON must be parsed before inspecting the contents. Not doing so is a bug waiting to happen.","body":"@Buffalo They are incorrect because they look at the <i>unparsed</i> JSON text. And as far as JSON is concerned, <code>{&quot;Message&quot; : &quot;END&quot;}</code> and <code>{&quot;\\u004d\\u0065\\u0073\\u0073\\u0061\\u0067\\u0065&quot;: &quot;\\u0045\\u004e\\u0044&quot;}</code> are <i>exactly the same thing</i>. The string-contains search will only find one of them. Real-world situations might be more subtle than that, but the point remains - JSON must be parsed before inspecting the contents. Not doing so is a bug waiting to happen."}],"tags":[],"owner":{"account_id":1275953,"reputation":26182,"user_id":1231230,"accept_rate":76,"display_name":"Ankur Singhal"},"comment_count":2,"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1422515643,"creation_date":1422515643,"answer_id":28208935,"question_id":28208793,"body_markdown":"They&#39;re both fast enough to be over before you know it. Better to go for the one that you can read more easily. \r\n\r\nBut from forums, blogs `contains` is faster, but still negligible performance difference","title":"In Java, which is faster - String.contains(&quot;some text&quot;) or Regex that looks for same text?","body":"<p>They're both fast enough to be over before you know it. Better to go for the one that you can read more easily. </p>\n\n<p>But from forums, blogs <code>contains</code> is faster, but still negligible performance difference</p>\n"},{"tags":[],"owner":{"account_id":373694,"reputation":1730,"user_id":723497,"accept_rate":83,"display_name":"Wilts C"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1668690807,"creation_date":1422516017,"answer_id":28209014,"question_id":28208793,"body_markdown":"I had tried both approaches and repeated them over 100k times and `String.contains()` is a lot faster than Regex.\r\n\r\nHowever `String.Contains()` is only useful for checking the existence of an exact sub&#173;string, whereas Regex allows you to do more wonders. So it depends.","title":"In Java, which is faster - String.contains(&quot;some text&quot;) or Regex that looks for same text?","body":"<p>I had tried both approaches and repeated them over 100k times and <code>String.contains()</code> is a lot faster than Regex.</p>\n<p>However <code>String.Contains()</code> is only useful for checking the existence of an exact substring, whereas Regex allows you to do more wonders. So it depends.</p>\n"},{"comments":[{"owner":{"account_id":1494484,"reputation":56249,"user_id":1400768,"display_name":"nhahtdh"},"score":1,"creation_date":1422519904,"post_id":28209057,"comment_id":44784536,"body_markdown":"I don&#39;t know why you are quoting from my post, since the other post doesn&#39;t say anything about the performance.","body":"I don&#39;t know why you are quoting from my post, since the other post doesn&#39;t say anything about the performance."},{"owner":{"account_id":1293741,"reputation":4913,"user_id":1245337,"accept_rate":100,"display_name":"atish shimpi"},"score":0,"creation_date":1422530032,"post_id":28209057,"comment_id":44790220,"body_markdown":"@nhahtdh In your post you explained very well about `String.contains` and Regex, and I thought it&#39;s better to provide some explanation with , why explanation of why `String.contains` is faster then `Regex`. Please comment if you want I delete my post.","body":"@nhahtdh In your post you explained very well about <code>String.contains</code> and Regex, and I thought it&#39;s better to provide some explanation with , why explanation of why <code>String.contains</code> is faster then <code>Regex</code>. Please comment if you want I delete my post."},{"owner":{"account_id":1494484,"reputation":56249,"user_id":1400768,"display_name":"nhahtdh"},"score":1,"creation_date":1422533589,"post_id":28209057,"comment_id":44792446,"body_markdown":"`String.contains` is not always faster than regex. For normal cases, `contains` is faster. However, in the worst case (like `aaaaaab` on `aaaaabaaaaabaaaaabaaaaab`...), depending on the regex implementation, it may uses advanced string matching algorithm, which guarantees linear time complexity. In such cases, the simple `indexOf` implementation will have quadratic time complexity.","body":"<code>String.contains</code> is not always faster than regex. For normal cases, <code>contains</code> is faster. However, in the worst case (like <code>aaaaaab</code> on <code>aaaaabaaaaabaaaaabaaaaab</code>...), depending on the regex implementation, it may uses advanced string matching algorithm, which guarantees linear time complexity. In such cases, the simple <code>indexOf</code> implementation will have quadratic time complexity."},{"owner":{"account_id":1494484,"reputation":56249,"user_id":1400768,"display_name":"nhahtdh"},"score":1,"creation_date":1422533749,"post_id":28209057,"comment_id":44792531,"body_markdown":"You can keep the quotes, but don&#39;t suggest that my quotes lead to your claims of the performances. I don&#39;t want people to think that I mentioned about the performance in the other post.","body":"You can keep the quotes, but don&#39;t suggest that my quotes lead to your claims of the performances. I don&#39;t want people to think that I mentioned about the performance in the other post."}],"tags":[],"owner":{"account_id":1293741,"reputation":4913,"user_id":1245337,"accept_rate":100,"display_name":"atish shimpi"},"comment_count":4,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1422519818,"creation_date":1422516154,"answer_id":28209057,"question_id":28208793,"body_markdown":"From https://stackoverflow.com/questions/15130309/how-to-use-regex-in-string-contains-method-in-java\n\n&gt; ## String.contains\n&gt;\n&gt; `String.contains` works with String, period. It doesn&#39;t work with regex. It will check whether the exact String specified appear in the current String or not.\n&gt;\n&gt; Note that `String.contains` does not check for word boundary; it simply checks for substring.\n\n**Its performance is good it will take fraction of less seconds then Regex.**\n\n&gt; ## Regex solution\n&gt;\n&gt; Regex is more powerful than `String.contains`, since you can enforce word boundary on the keywords (among other things). This means you can search for the keywords as *words*, rather than just *substrings*.\n \n**So it is taking more time of execution to parse whole string.** \n\n  [1]: https://stackoverflow.com/questions/15130309/how-to-use-regex-in-string-contains-method-in-java","title":"In Java, which is faster - String.contains(&quot;some text&quot;) or Regex that looks for same text?","body":"<p>From <a href=\"https://stackoverflow.com/questions/15130309/how-to-use-regex-in-string-contains-method-in-java\">How to use regex in String.contains() method in Java</a></p>\n<blockquote>\n<h2>String.contains</h2>\n<p><code>String.contains</code> works with String, period. It doesn't work with regex. It will check whether the exact String specified appear in the current String or not.</p>\n<p>Note that <code>String.contains</code> does not check for word boundary; it simply checks for substring.</p>\n</blockquote>\n<p><strong>Its performance is good it will take fraction of less seconds then Regex.</strong></p>\n<blockquote>\n<h2>Regex solution</h2>\n<p>Regex is more powerful than <code>String.contains</code>, since you can enforce word boundary on the keywords (among other things). This means you can search for the keywords as <em>words</em>, rather than just <em>substrings</em>.</p>\n</blockquote>\n<p><strong>So it is taking more time of execution to parse whole string.</strong></p>\n"},{"tags":[],"owner":{"account_id":3887004,"reputation":46525,"user_id":3218114,"accept_rate":84,"display_name":"Braj"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1422517661,"creation_date":1422516710,"answer_id":28209202,"question_id":28208793,"body_markdown":"You can test it yourself by creating benchmark using [Caliper - Google&#39;s open-source framework](https://code.google.com/p/caliper/)\r\n\r\nRead more about [What is a microbenchmark?](https://code.google.com/p/caliper/wiki/JavaMicrobenchmarks)\r\n\r\n[Detailed Example](http://codingjunkie.net/micro-benchmarking-with-caliper/)","title":"In Java, which is faster - String.contains(&quot;some text&quot;) or Regex that looks for same text?","body":"<p>You can test it yourself by creating benchmark using <a href=\"https://code.google.com/p/caliper/\" rel=\"nofollow\">Caliper - Google's open-source framework</a></p>\n\n<p>Read more about <a href=\"https://code.google.com/p/caliper/wiki/JavaMicrobenchmarks\" rel=\"nofollow\">What is a microbenchmark?</a></p>\n\n<p><a href=\"http://codingjunkie.net/micro-benchmarking-with-caliper/\" rel=\"nofollow\">Detailed Example</a></p>\n"},{"tags":[],"owner":{"account_id":26320651,"reputation":49,"user_id":19982705,"display_name":"Shaikot37"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1668691373,"creation_date":1668691373,"answer_id":74476221,"question_id":28208793,"body_markdown":"To determine which is the fastest you will have to benchmark your own system. However, regular expressions are complex and chances are that `String.Contains()` will be the fastest and in your case also the simplest solution.\r\n\r\nThe implementation of `String.Contains()` will eventually call the native method IndexOfString() and the implementation of that is only known by Microsoft. However, a good algorithm for implementing this method is using what is known as the KnuthMorrisPratt algorithm. The complexity of this algorithm is O(m + n) where m is the length of the string you are searching for and n is the length of the string you are searching making it a very efficient algorithm.\r\n\r\nActually, the efficiency of search using regular expression can be as low O(n) depending on the implementation so it may still be competetive in some situations. Only a benchmark will be able to determine this.\r\n","title":"In Java, which is faster - String.contains(&quot;some text&quot;) or Regex that looks for same text?","body":"<p>To determine which is the fastest you will have to benchmark your own system. However, regular expressions are complex and chances are that <code>String.Contains()</code> will be the fastest and in your case also the simplest solution.</p>\n<p>The implementation of <code>String.Contains()</code> will eventually call the native method IndexOfString() and the implementation of that is only known by Microsoft. However, a good algorithm for implementing this method is using what is known as the KnuthMorrisPratt algorithm. The complexity of this algorithm is O(m + n) where m is the length of the string you are searching for and n is the length of the string you are searching making it a very efficient algorithm.</p>\n<p>Actually, the efficiency of search using regular expression can be as low O(n) depending on the implementation so it may still be competetive in some situations. Only a benchmark will be able to determine this.</p>\n"}],"owner":{"account_id":277724,"reputation":3090,"user_id":571875,"accept_rate":93,"display_name":"mal"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15564,"favorite_count":0,"down_vote_count":3,"up_vote_count":14,"accepted_answer_id":28208935,"answer_count":5,"score":11,"last_activity_date":1668691373,"creation_date":1422515063,"question_id":28208793,"body_markdown":"As the title says, just looking for a string to match a client finishing sending data over a socket, so I might be looking for something like `{&quot;Message&quot; : &quot;END&quot;}` in a JSON string for example. \r\nA the most the strings will be a few hundred chars long.","title":"In Java, which is faster - String.contains(&quot;some text&quot;) or Regex that looks for same text?","body":"<p>As the title says, just looking for a string to match a client finishing sending data over a socket, so I might be looking for something like <code>{\"Message\" : \"END\"}</code> in a JSON string for example. \nA the most the strings will be a few hundred chars long.</p>\n"},{"tags":["java","android","flutter","kotlin","mobile"],"answers":[{"comments":[{"owner":{"account_id":15601247,"reputation":272,"user_id":11255333,"display_name":"Oussama Rid&#233;ne"},"score":0,"creation_date":1668784947,"post_id":74476212,"comment_id":131497597,"body_markdown":"yes I confirm, that&#39;s what I did &#128578;","body":"yes I confirm, that&#39;s what I did "},{"owner":{"account_id":256036,"reputation":8140,"user_id":536485,"accept_rate":94,"display_name":"DarkNeuron"},"score":0,"creation_date":1685022716,"post_id":74476212,"comment_id":134605481,"body_markdown":"Remember the point of a WeakReference is that it can be null at any time, which your code doesn&#39;t handle.","body":"Remember the point of a WeakReference is that it can be null at any time, which your code doesn&#39;t handle."},{"owner":{"account_id":4030242,"reputation":138,"user_id":3316651,"display_name":"falconforce"},"score":0,"creation_date":1686665067,"post_id":74476212,"comment_id":134828187,"body_markdown":"Works well for me. But I had to call super.configureFlutterEngine(flutterEngine) in configureFlutterEngine() to make it work.","body":"Works well for me. But I had to call super.configureFlutterEngine(flutterEngine) in configureFlutterEngine() to make it work."}],"tags":[],"owner":{"account_id":25907075,"reputation":86,"user_id":19631991,"display_name":"Shaik Ahron"},"comment_count":3,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1668691322,"creation_date":1668691322,"answer_id":74476212,"question_id":73334772,"body_markdown":"I too was searching for the solution. what i did was extend **MainActivity** with **FlutterFragmentActivity** and pass *this* to method channel handler.\r\n\r\n    \r\n\r\n        public class MainActivity extends FlutterFragmentActivity{\r\n               ...\r\n               @Override\r\n               public void configureFlutterEngine(@NonNull FlutterEngine flutterEngine) \r\n               {\r\n                  handlePickerMethodChannel(flutterEngine);\r\n               }\r\n            \r\n    \r\n            private void handlePickerMethodChannel(FlutterEngine flutterEngine) {\r\n                PickerMethodChannelHandler PickerMethodChannelHandler = new PickerMethodChannelHandler(new WeakReference&lt;&gt;(this));\r\n                new MethodChannel(flutterEngine.getDartExecutor().getBinaryMessenger(), PHOTO_PICKER_METHOD_CHANNEL)\r\n                        .setMethodCallHandler(pickerMethodChannelHandler);\r\n            }\r\n        }\r\n\r\n    class PickerMethodChannelHandler(\r\n        private val activity: WeakReference&lt;Activity&gt;,\r\n    ) : MethodChannel.MethodCallHandler {\r\n    \r\n        private val pickMedia = (activity.get() as ComponentActivity).registerForActivityResult(ActivityResultContracts.PickVisualMedia()) { uri -&gt;\r\n            if (uri != null) {\r\n                Log.d(&quot;PhotoPicker&quot;, &quot;Selected URI: $uri&quot;)\r\n            } else {\r\n                Log.d(&quot;PhotoPicker&quot;, &quot;No media selected&quot;)\r\n            }\r\n        }\r\n    \r\n        override fun onMethodCall(call: MethodCall, result: MethodChannel.Result) {\r\n            when (call.method) {\r\n                &quot;pickMedia&quot; -&gt; pickMedia(call,result)\r\n                else -&gt; result.notImplemented()\r\n            }\r\n        }\r\n    \r\n        private fun pickMedia(call: MethodCall, result: MethodChannel.Result) {\r\n            val context = activity.get() as ComponentActivity\r\n    \r\n            Log.i(&quot;PICK_MEDIA&quot;,&quot;PICK ${context != null}&quot;)\r\n            pickMedia.launch(PickVisualMediaRequest(ActivityResultContracts.PickVisualMedia.ImageAndVideo))\r\n        }\r\n    \r\n    }\r\n\r\nIt worked \r\n\r\n\r\n","title":"registerForActivityResult is not working in Flutter","body":"<p>I too was searching for the solution. what i did was extend <strong>MainActivity</strong> with <strong>FlutterFragmentActivity</strong> and pass <em>this</em> to method channel handler.</p>\n<pre><code>    public class MainActivity extends FlutterFragmentActivity{\n           ...\n           @Override\n           public void configureFlutterEngine(@NonNull FlutterEngine flutterEngine) \n           {\n              handlePickerMethodChannel(flutterEngine);\n           }\n        \n\n        private void handlePickerMethodChannel(FlutterEngine flutterEngine) {\n            PickerMethodChannelHandler PickerMethodChannelHandler = new PickerMethodChannelHandler(new WeakReference&lt;&gt;(this));\n            new MethodChannel(flutterEngine.getDartExecutor().getBinaryMessenger(), PHOTO_PICKER_METHOD_CHANNEL)\n                    .setMethodCallHandler(pickerMethodChannelHandler);\n        }\n    }\n\nclass PickerMethodChannelHandler(\n    private val activity: WeakReference&lt;Activity&gt;,\n) : MethodChannel.MethodCallHandler {\n\n    private val pickMedia = (activity.get() as ComponentActivity).registerForActivityResult(ActivityResultContracts.PickVisualMedia()) { uri -&gt;\n        if (uri != null) {\n            Log.d(&quot;PhotoPicker&quot;, &quot;Selected URI: $uri&quot;)\n        } else {\n            Log.d(&quot;PhotoPicker&quot;, &quot;No media selected&quot;)\n        }\n    }\n\n    override fun onMethodCall(call: MethodCall, result: MethodChannel.Result) {\n        when (call.method) {\n            &quot;pickMedia&quot; -&gt; pickMedia(call,result)\n            else -&gt; result.notImplemented()\n        }\n    }\n\n    private fun pickMedia(call: MethodCall, result: MethodChannel.Result) {\n        val context = activity.get() as ComponentActivity\n\n        Log.i(&quot;PICK_MEDIA&quot;,&quot;PICK ${context != null}&quot;)\n        pickMedia.launch(PickVisualMediaRequest(ActivityResultContracts.PickVisualMedia.ImageAndVideo))\n    }\n\n}\n</code></pre>\n<p>It worked</p>\n"}],"owner":{"account_id":15601247,"reputation":272,"user_id":11255333,"display_name":"Oussama Rid&#233;ne"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1280,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74476212,"answer_count":1,"score":1,"last_activity_date":1668691322,"creation_date":1660310070,"question_id":73334772,"body_markdown":"I&#39;m trying to launch context from android MainActivity class to flutter.\r\n code : \r\n\r\n    val authResult = ComponentActivity().registerForActivityResult(PianoIdAuthResultContract()) { r -&gt;\r\n                    when (r) {\r\n                        null -&gt; { /* user cancelled Authorization process */ }\r\n                        is PianoIdAuthSuccessResult -&gt; {\r\n                            val token = r.token\r\n                            val isNewUserRegistered = r.isNewUser\r\n                            if (token != null) {\r\n                                if (token.emailConfirmationRequired) {\r\n                                    // process enabled Double opt-in\r\n                                }\r\n                            }\r\n                            // process successful authorization\r\n                        }\r\n                        is PianoIdAuthFailureResult -&gt; {\r\n                            val e = r.exception\r\n                            // Authorization failed, check e.cause for details\r\n                        }\r\n                    }\r\n                }\r\n\r\nand then calling the method launch \r\ncode : \r\n\r\n                try{\r\n                    authResult.launch(PianoId.signIn());\r\n                }catch (e : Exception){\r\n                    val text = e.message\r\n                    val duration = Toast.LENGTH_SHORT\r\n\r\n                    val toast = Toast.makeText(applicationContext, text, duration)\r\n                    toast.show()\r\n                }\r\n    \r\nand then I call this method from flutter by creating a channel between flutter and android and invoke it : \r\n\r\n    signInChannel.invokeMethod(&#39;testSignIn&#39;);\r\n\r\n\r\nwhen I press the sign in button it shows me this exception : \r\n\r\n&gt; Attempt to invoke virtual method &#39;android.app.ActivityThread$ApplicationThread android.app.ActivityThread.getApplicationThread()&#39; on a null object reference\r\n\r\n\r\n\r\n\r\n","title":"registerForActivityResult is not working in Flutter","body":"<p>I'm trying to launch context from android MainActivity class to flutter.\ncode :</p>\n<pre><code>val authResult = ComponentActivity().registerForActivityResult(PianoIdAuthResultContract()) { r -&gt;\n                when (r) {\n                    null -&gt; { /* user cancelled Authorization process */ }\n                    is PianoIdAuthSuccessResult -&gt; {\n                        val token = r.token\n                        val isNewUserRegistered = r.isNewUser\n                        if (token != null) {\n                            if (token.emailConfirmationRequired) {\n                                // process enabled Double opt-in\n                            }\n                        }\n                        // process successful authorization\n                    }\n                    is PianoIdAuthFailureResult -&gt; {\n                        val e = r.exception\n                        // Authorization failed, check e.cause for details\n                    }\n                }\n            }\n</code></pre>\n<p>and then calling the method launch\ncode :</p>\n<pre><code>            try{\n                authResult.launch(PianoId.signIn());\n            }catch (e : Exception){\n                val text = e.message\n                val duration = Toast.LENGTH_SHORT\n\n                val toast = Toast.makeText(applicationContext, text, duration)\n                toast.show()\n            }\n</code></pre>\n<p>and then I call this method from flutter by creating a channel between flutter and android and invoke it :</p>\n<pre><code>signInChannel.invokeMethod('testSignIn');\n</code></pre>\n<p>when I press the sign in button it shows me this exception :</p>\n<blockquote>\n<p>Attempt to invoke virtual method 'android.app.ActivityThread$ApplicationThread android.app.ActivityThread.getApplicationThread()' on a null object reference</p>\n</blockquote>\n"},{"tags":["java","asynchronous","executorservice","completable-future"],"comments":[{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":2,"creation_date":1668695296,"post_id":74475988,"comment_id":131472609,"body_markdown":"Sharing one ArrayList among several threads looks very suspicious and could be your problem. Try using a CopyOnWriteArrayList to see if it solves your problem. And if that works and performance is important, you could also use an array since you know the final size. But start with a concurrent list to check correctness.","body":"Sharing one ArrayList among several threads looks very suspicious and could be your problem. Try using a CopyOnWriteArrayList to see if it solves your problem. And if that works and performance is important, you could also use an array since you know the final size. But start with a concurrent list to check correctness."},{"owner":{"account_id":5951571,"reputation":94,"user_id":4679375,"display_name":"Sharan Rai"},"score":1,"creation_date":1668711016,"post_id":74475988,"comment_id":131478653,"body_markdown":"@assylias yes passing ArrayList was the issue. CopyOnWriteArrayList worked for me. Since it is expensive I used an array. Thanks","body":"@assylias yes passing ArrayList was the issue. CopyOnWriteArrayList worked for me. Since it is expensive I used an array. Thanks"}],"owner":{"account_id":5951571,"reputation":94,"user_id":4679375,"display_name":"Sharan Rai"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1668691128,"creation_date":1668690378,"question_id":74475988,"body_markdown":"Hi I am bit new to async programming and CompletableFuture. I want to run a list of task in asynchronously (using CompletableFuture) and update the result to multiple objects.\r\nOnce all the tasks in the list updates the objects, I want my method to execute next lines synchronously.\r\n \r\nI tried CompletableFuture.allOf() which Returns a new CompletableFuture that is completed when all of the given CompletableFutures are complete.\r\n\r\nBut in my case, I get it before all of the given CompletableFutures are complete. Please guide me if I am missing anything. \r\n\r\n\r\n\r\n ```\r\nList&lt;MyData&gt; data =  getFromAMethod();\r\nOutputObject  outputObject = new OutputObject();\r\nList&lt;AnotherValue&gt; valueList1 = new ArrayList&lt;&gt;();\r\nList&lt;Value&gt; valueList2 = new ArrayList&lt;&gt;();\r\n\r\nfor (MyData data : dataList) {\r\n  CompletableFuture&lt;Void&gt; requestCompletableFuture =\r\n      CompletableFuture.supplyAsync(\r\n              () -&gt; executeMyMethod(data))\r\n          .exceptionally(throwable -&gt; {\r\n                throw  new SomeCustomException&lt;&gt;();\r\n          })\r\n          .thenAccept(\r\n              outputFromMyMethod -&gt; {\r\n\r\n                if(outputObject.getSomeField()==null){\r\n                  outputObject,setSomeField(outputFromMyMethod.getField);\r\n                }\r\n                  valueList1.add(outputFromMyMethod.getValue1());\r\n                  valueList2.add(outputFromMyMethod.getValue2());\r\n\r\n              });\r\n  completableFutures.add(requestCompletableFuture);\r\n}\r\n\r\nCompletableFuture&lt;Void&gt; allOfcompletableFuture =\r\n    CompletableFuture.allOf(completableFutures.toArray(new CompletableFuture[0]));\r\n\r\nallOfcompletableFuture\r\n    .whenComplete(\r\n        (result, exception) -&gt; {\r\n          if (exception != null) {\r\n            throw new SomeCustomException();\r\n          } else {\r\n           outputObject.setValueList1(valueList1);\r\n           outputObject.setValueList2(valueList2);\r\n          }\r\n        })\r\n    .join();\r\n\r\n//  next lines will be executed by main thread\r\ntaskOutput.setDisplayOutputs(ffxFeeDisplayOutputList);\r\n\r\n```\r\n\r\nIn most of the runs valueList1 and valueList2 will not be getting updated with all the values, also I am not having any exceptions during these run.\r\nI have also tried with **get()** method call after **whenComplete** still I am facing same issue.\r\n\r\nI really appreciate any help you can provide.","title":"CompletableFuture.allOf() doesnt wait untill all the runs are completed","body":"<p>Hi I am bit new to async programming and CompletableFuture. I want to run a list of task in asynchronously (using CompletableFuture) and update the result to multiple objects.\nOnce all the tasks in the list updates the objects, I want my method to execute next lines synchronously.</p>\n<p>I tried CompletableFuture.allOf() which Returns a new CompletableFuture that is completed when all of the given CompletableFutures are complete.</p>\n<p>But in my case, I get it before all of the given CompletableFutures are complete. Please guide me if I am missing anything.</p>\n<pre><code>List&lt;MyData&gt; data =  getFromAMethod();\nOutputObject  outputObject = new OutputObject();\nList&lt;AnotherValue&gt; valueList1 = new ArrayList&lt;&gt;();\nList&lt;Value&gt; valueList2 = new ArrayList&lt;&gt;();\n\nfor (MyData data : dataList) {\n CompletableFuture&lt;Void&gt; requestCompletableFuture =\n     CompletableFuture.supplyAsync(\n             () -&gt; executeMyMethod(data))\n         .exceptionally(throwable -&gt; {\n               throw  new SomeCustomException&lt;&gt;();\n         })\n         .thenAccept(\n             outputFromMyMethod -&gt; {\n\n               if(outputObject.getSomeField()==null){\n                 outputObject,setSomeField(outputFromMyMethod.getField);\n               }\n                 valueList1.add(outputFromMyMethod.getValue1());\n                 valueList2.add(outputFromMyMethod.getValue2());\n\n             });\n completableFutures.add(requestCompletableFuture);\n}\n\nCompletableFuture&lt;Void&gt; allOfcompletableFuture =\n   CompletableFuture.allOf(completableFutures.toArray(new CompletableFuture[0]));\n\nallOfcompletableFuture\n   .whenComplete(\n       (result, exception) -&gt; {\n         if (exception != null) {\n           throw new SomeCustomException();\n         } else {\n          outputObject.setValueList1(valueList1);\n          outputObject.setValueList2(valueList2);\n         }\n       })\n   .join();\n\n//  next lines will be executed by main thread\ntaskOutput.setDisplayOutputs(ffxFeeDisplayOutputList);\n\n</code></pre>\n<p>In most of the runs valueList1 and valueList2 will not be getting updated with all the values, also I am not having any exceptions during these run.\nI have also tried with <strong>get()</strong> method call after <strong>whenComplete</strong> still I am facing same issue.</p>\n<p>I really appreciate any help you can provide.</p>\n"},{"tags":["java","opengl","rendering","textures","transparency"],"comments":[{"owner":{"account_id":3043323,"reputation":21366,"user_id":2579738,"display_name":"BDL"},"score":4,"creation_date":1656939466,"post_id":72857055,"comment_id":128685930,"body_markdown":"Are you anywhere enable blending? `glEnable(GL_BLEND)`? If so, please add that and your shader to the question.","body":"Are you anywhere enable blending? <code>glEnable(GL_BLEND)</code>? If so, please add that and your shader to the question."},{"owner":{"account_id":2695276,"reputation":44364,"user_id":2327517,"display_name":"derhass"},"score":2,"creation_date":1656949454,"post_id":72857055,"comment_id":128689558,"body_markdown":"transparency is order-dependent. you draw these trees first, blending against the red background, and then add the &quot;background&quot; image, that won&#39;t work.","body":"transparency is order-dependent. you draw these trees first, blending against the red background, and then add the &quot;background&quot; image, that won&#39;t work."}],"answers":[{"tags":[],"owner":{"account_id":24102515,"reputation":9,"user_id":18074158,"display_name":"Ben Solo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668690520,"creation_date":1668690520,"answer_id":74476024,"question_id":72857055,"body_markdown":"To solve the problem with the red outlines I think you need to set the threshold for discarding the pixels a bit higher. \r\n\r\nMy suspicion is that the painting program didn&#180;t draw pixels entirely transparent. E.g. if a pixel would have an alpha value of 0.2 it wouldn&#180;t be discarded and despite being a bit transparent. Then the renderer tries to blend it with the background, because it isn&#180;t in the order.\r\n\r\nThe pixels are probably red because the you set the background color to red:\r\n\r\n    GL11.glClearColor(1.0f, 0.0f, 0.0f, 0.0f);\r\n\r\nSo the solution to this would either be to sort the objects from back to front or increase the discarding threshold in your fragment shader to something like 0.9.\r\n\r\n\r\n","title":"How to draw translucent/transparent textures with lwjgl?","body":"<p>To solve the problem with the red outlines I think you need to set the threshold for discarding the pixels a bit higher.</p>\n<p>My suspicion is that the painting program didnt draw pixels entirely transparent. E.g. if a pixel would have an alpha value of 0.2 it wouldnt be discarded and despite being a bit transparent. Then the renderer tries to blend it with the background, because it isnt in the order.</p>\n<p>The pixels are probably red because the you set the background color to red:</p>\n<pre><code>GL11.glClearColor(1.0f, 0.0f, 0.0f, 0.0f);\n</code></pre>\n<p>So the solution to this would either be to sort the objects from back to front or increase the discarding threshold in your fragment shader to something like 0.9.</p>\n"}],"owner":{"account_id":22412192,"reputation":7,"user_id":16620771,"display_name":"instance"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1668690520,"creation_date":1656938948,"question_id":72857055,"body_markdown":"I&#39;ve spent a lot of time trying to find out how to draw transparent textures onto the screen, however my code doesn&#39;t seem to work. So far, only textures that are fully opaque are drawn normally (like in the background of the image below). As you can see in the image below, the transparent parts are getting filled in by a red color instead of being transparent. (I used paint.net to draw transparency, is that right?)\r\n\r\nEDIT (with new code as well): Now the transparent parts have gone away, but there is a small red outline like in the image below where there are translucent pixels. How do I make it render as transparent too? Also, I don&#39;t understand why setting *glClearColor*&#39;s alpha doesn&#39;t change anything.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nI set the *glClearColor* to red, however the alpha is 0.\r\n\r\n    GL11.glClearColor(1.0f, 0.0f, 0.0f, 0.0f);\r\n\r\nHere is my code for drawing textures(using *slick-util*):\r\n\r\n            PNGDecoder decoder = null;\r\n\t\t\ttry {\r\n\t\t\t\tdecoder = new PNGDecoder(new FileInputStream(Main.projectPath + path));\r\n\t\t\t} catch (FileNotFoundException e1) {\r\n\t\t\t\te1.printStackTrace();\r\n\t\t\t} catch (IOException e1) {\r\n\t\t\t\te1.printStackTrace();\r\n\t\t\t}\r\n\r\n\t\t    ByteBuffer buffer = ByteBuffer.allocateDirect(4 * decoder.getWidth() * decoder.getHeight());\r\n\r\n\t\t    try {\r\n\t\t\t\tdecoder.decode(buffer, decoder.getWidth() * 4, PNGDecoder.RGBA);\r\n\t\t\t} catch (IOException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\r\n\t\t    buffer.flip();\r\n\r\n\t\t    int id = GL13.glGenTextures();\r\n\r\n\t\t    GL13.glBindTexture(GL13.GL_TEXTURE_2D, id);\r\n\r\n\t\t    GL13.glPixelStorei(GL13.GL_UNPACK_ALIGNMENT, 1);\r\n\r\n\t\t    GL13.glTexParameterf(GL13.GL_TEXTURE_2D, GL13.GL_TEXTURE_MIN_FILTER, GL13.GL_NEAREST);\r\n\t\t    GL13.glTexParameterf(GL13.GL_TEXTURE_2D, GL13.GL_TEXTURE_MAG_FILTER, GL13.GL_NEAREST);\r\n\t\t    \r\n\t\t    width = decoder.getWidth();\r\n\t\t    height = decoder.getHeight();\r\n\t\t    GL13.glTexImage2D(GL13.GL_TEXTURE_2D, 0, GL13.GL_RGBA, decoder.getWidth(), decoder.getHeight(), 0, GL13.GL_RGBA, GL13.GL_UNSIGNED_BYTE, buffer);\r\n\r\n\t\t    GL30.glGenerateMipmap(GL13.GL_TEXTURE_2D);\r\n\t\t    \r\n\t\t    GL13.glTexParameteri(GL13.GL_TEXTURE_2D, GL13.GL_TEXTURE_WRAP_S, GL13.GL_RGBA);\r\n\t\t    GL13.glTexParameteri(GL13.GL_TEXTURE_2D, GL13.GL_TEXTURE_WRAP_T, GL13.GL_RGBA);\r\n\t\t    GL13.glTexParameteri(GL13.GL_TEXTURE_2D, GL13.GL_TEXTURE_MIN_FILTER, GL13.GL_NEAREST_MIPMAP_NEAREST);\r\n\t\t    GL13.glTexParameteri(GL13.GL_TEXTURE_2D, GL13.GL_TEXTURE_MAG_FILTER,GL13. GL_NEAREST);\r\n\r\n\t\t    this.texture = new Texture(id);\r\n\t\t    this.textureID =  id;\r\n\r\nHere is my code for rendering the texture to the screen:\r\n\r\n    public void renderMesh(Mesh mesh) {\r\n\t\tGL30.glBindVertexArray(mesh.getVAO());\r\n\t\tGL30.glEnableVertexAttribArray(0);\r\n\t\tGL30.glEnableVertexAttribArray(1);\r\n\t\tGL30.glEnableVertexAttribArray(2);\r\n\t\tGL15.glBindBuffer(GL15.GL_ELEMENT_ARRAY_BUFFER, mesh.getIBO());\r\n\t\tGL13.glActiveTexture(GL13.GL_TEXTURE0);\r\n\t\tGL13.glBindTexture(GL11.GL_TEXTURE_2D, mesh.getMaterial().getTextureID());\r\n\t\tshader.bind();\r\n\t\tGL11.glDrawElements(GL11.GL_TRIANGLES, mesh.getIndices().length, GL11.GL_UNSIGNED_INT, 0);\r\n\t\tshader.unbind();\r\n\t\tGL15.glBindBuffer(GL15.GL_ELEMENT_ARRAY_BUFFER, 0);\r\n\t\tGL30.glDisableVertexAttribArray(0);\r\n\t\tGL30.glDisableVertexAttribArray(1);\r\n\t\tGL30.glDisableVertexAttribArray(2);\r\n\t\tGL30.glBindVertexArray(0);\r\n\t}\r\n\r\nI would like to know what is incorrect of this code.\r\n\r\nEDIT: Here is my init and shader code as well:\r\nInitialization code:\r\n\r\n    window = GLFW.glfwCreateWindow(width, height, title, isFullscreen ? GLFW.glfwGetPrimaryMonitor() : 0, 0);\r\n\t\t\r\n\t\tif (window == 0) {\r\n\t\t\tSystem.err.println(&quot;ERROR: Window wasn&#39;t created&quot;);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tGLFWVidMode videoMode = GLFW.glfwGetVideoMode(GLFW.glfwGetPrimaryMonitor());\r\n\t\twindowPosX[0] = (videoMode.width() - width) / 2;\r\n\t\twindowPosY[0] = (videoMode.height() - height) / 2;\r\n\t\tGLFW.glfwSetWindowPos(window, windowPosX[0], windowPosY[0]);\r\n\t\tGLFW.glfwMakeContextCurrent(window);\r\n\t\tGL.createCapabilities();\r\n\t\tGL11.glEnable(GL11.GL_DEPTH_TEST);\r\n\t\tGL11.glMatrixMode(GL11.GL_TEXTURE);\r\n\t\tGL11.glEnable(GL11.GL_TEXTURE_2D);\r\n\t\tGL11.glEnable(GL11.GL_BLEND);\r\n\t\tGL11.glEnable(GL11.GL_ALPHA_TEST);\r\n\t\tGL11.glBlendFunc(GL11.GL_SRC_ALPHA, GL11.GL_ONE_MINUS_SRC_ALPHA);\r\n\t\tGL11.glPushMatrix();   \r\n\t\t\r\n\t\t\r\n\t\tcreateCallbacks();\r\n\t\t\r\n\t\tGLFW.glfwShowWindow(window);\r\n\t\t\r\n\t\tGLFW.glfwSwapInterval(1);\r\n\r\nVertex Shader:\r\n\r\n    #version 460 core\r\n\r\n    in vec3 position;\r\n    in vec4 color;\r\n    in vec2 textureCoord;\r\n    \r\n    out vec4 passColor;\r\n    out vec2 passTextureCoord;\r\n    \r\n    void main() {\r\n    \tgl_Position = vec4(position, 1.0);\r\n    \tpassColor = color;\r\n    \tpassTextureCoord = textureCoord;\r\n    }\r\n\r\nFragment Shader:\r\n\r\n    #version 330 core\r\n    out vec4 FragColor;\r\n    \r\n    in vec2 passTextureCoord;\r\n\r\n    uniform sampler2D texture1;\r\n    \r\n    void main()\r\n    {             \r\n        vec4 texColor = texture(texture1, passTextureCoord);\r\n        if(texColor.a &lt; 0.1)\r\n            discard;\r\n        FragColor = texColor;\r\n    }  \r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QVXKZ.png","title":"How to draw translucent/transparent textures with lwjgl?","body":"<p>I've spent a lot of time trying to find out how to draw transparent textures onto the screen, however my code doesn't seem to work. So far, only textures that are fully opaque are drawn normally (like in the background of the image below). As you can see in the image below, the transparent parts are getting filled in by a red color instead of being transparent. (I used paint.net to draw transparency, is that right?)</p>\n<p>EDIT (with new code as well): Now the transparent parts have gone away, but there is a small red outline like in the image below where there are translucent pixels. How do I make it render as transparent too? Also, I don't understand why setting <em>glClearColor</em>'s alpha doesn't change anything.</p>\n<p><a href=\"https://i.stack.imgur.com/QVXKZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QVXKZ.png\" alt=\"enter image description here\" /></a></p>\n<p>I set the <em>glClearColor</em> to red, however the alpha is 0.</p>\n<pre><code>GL11.glClearColor(1.0f, 0.0f, 0.0f, 0.0f);\n</code></pre>\n<p>Here is my code for drawing textures(using <em>slick-util</em>):</p>\n<pre><code>        PNGDecoder decoder = null;\n        try {\n            decoder = new PNGDecoder(new FileInputStream(Main.projectPath + path));\n        } catch (FileNotFoundException e1) {\n            e1.printStackTrace();\n        } catch (IOException e1) {\n            e1.printStackTrace();\n        }\n\n        ByteBuffer buffer = ByteBuffer.allocateDirect(4 * decoder.getWidth() * decoder.getHeight());\n\n        try {\n            decoder.decode(buffer, decoder.getWidth() * 4, PNGDecoder.RGBA);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n\n        buffer.flip();\n\n        int id = GL13.glGenTextures();\n\n        GL13.glBindTexture(GL13.GL_TEXTURE_2D, id);\n\n        GL13.glPixelStorei(GL13.GL_UNPACK_ALIGNMENT, 1);\n\n        GL13.glTexParameterf(GL13.GL_TEXTURE_2D, GL13.GL_TEXTURE_MIN_FILTER, GL13.GL_NEAREST);\n        GL13.glTexParameterf(GL13.GL_TEXTURE_2D, GL13.GL_TEXTURE_MAG_FILTER, GL13.GL_NEAREST);\n        \n        width = decoder.getWidth();\n        height = decoder.getHeight();\n        GL13.glTexImage2D(GL13.GL_TEXTURE_2D, 0, GL13.GL_RGBA, decoder.getWidth(), decoder.getHeight(), 0, GL13.GL_RGBA, GL13.GL_UNSIGNED_BYTE, buffer);\n\n        GL30.glGenerateMipmap(GL13.GL_TEXTURE_2D);\n        \n        GL13.glTexParameteri(GL13.GL_TEXTURE_2D, GL13.GL_TEXTURE_WRAP_S, GL13.GL_RGBA);\n        GL13.glTexParameteri(GL13.GL_TEXTURE_2D, GL13.GL_TEXTURE_WRAP_T, GL13.GL_RGBA);\n        GL13.glTexParameteri(GL13.GL_TEXTURE_2D, GL13.GL_TEXTURE_MIN_FILTER, GL13.GL_NEAREST_MIPMAP_NEAREST);\n        GL13.glTexParameteri(GL13.GL_TEXTURE_2D, GL13.GL_TEXTURE_MAG_FILTER,GL13. GL_NEAREST);\n\n        this.texture = new Texture(id);\n        this.textureID =  id;\n</code></pre>\n<p>Here is my code for rendering the texture to the screen:</p>\n<pre><code>public void renderMesh(Mesh mesh) {\n    GL30.glBindVertexArray(mesh.getVAO());\n    GL30.glEnableVertexAttribArray(0);\n    GL30.glEnableVertexAttribArray(1);\n    GL30.glEnableVertexAttribArray(2);\n    GL15.glBindBuffer(GL15.GL_ELEMENT_ARRAY_BUFFER, mesh.getIBO());\n    GL13.glActiveTexture(GL13.GL_TEXTURE0);\n    GL13.glBindTexture(GL11.GL_TEXTURE_2D, mesh.getMaterial().getTextureID());\n    shader.bind();\n    GL11.glDrawElements(GL11.GL_TRIANGLES, mesh.getIndices().length, GL11.GL_UNSIGNED_INT, 0);\n    shader.unbind();\n    GL15.glBindBuffer(GL15.GL_ELEMENT_ARRAY_BUFFER, 0);\n    GL30.glDisableVertexAttribArray(0);\n    GL30.glDisableVertexAttribArray(1);\n    GL30.glDisableVertexAttribArray(2);\n    GL30.glBindVertexArray(0);\n}\n</code></pre>\n<p>I would like to know what is incorrect of this code.</p>\n<p>EDIT: Here is my init and shader code as well:\nInitialization code:</p>\n<pre><code>window = GLFW.glfwCreateWindow(width, height, title, isFullscreen ? GLFW.glfwGetPrimaryMonitor() : 0, 0);\n    \n    if (window == 0) {\n        System.err.println(&quot;ERROR: Window wasn't created&quot;);\n        return;\n    }\n    \n    GLFWVidMode videoMode = GLFW.glfwGetVideoMode(GLFW.glfwGetPrimaryMonitor());\n    windowPosX[0] = (videoMode.width() - width) / 2;\n    windowPosY[0] = (videoMode.height() - height) / 2;\n    GLFW.glfwSetWindowPos(window, windowPosX[0], windowPosY[0]);\n    GLFW.glfwMakeContextCurrent(window);\n    GL.createCapabilities();\n    GL11.glEnable(GL11.GL_DEPTH_TEST);\n    GL11.glMatrixMode(GL11.GL_TEXTURE);\n    GL11.glEnable(GL11.GL_TEXTURE_2D);\n    GL11.glEnable(GL11.GL_BLEND);\n    GL11.glEnable(GL11.GL_ALPHA_TEST);\n    GL11.glBlendFunc(GL11.GL_SRC_ALPHA, GL11.GL_ONE_MINUS_SRC_ALPHA);\n    GL11.glPushMatrix();   \n    \n    \n    createCallbacks();\n    \n    GLFW.glfwShowWindow(window);\n    \n    GLFW.glfwSwapInterval(1);\n</code></pre>\n<p>Vertex Shader:</p>\n<pre><code>#version 460 core\n\nin vec3 position;\nin vec4 color;\nin vec2 textureCoord;\n\nout vec4 passColor;\nout vec2 passTextureCoord;\n\nvoid main() {\n    gl_Position = vec4(position, 1.0);\n    passColor = color;\n    passTextureCoord = textureCoord;\n}\n</code></pre>\n<p>Fragment Shader:</p>\n<pre><code>#version 330 core\nout vec4 FragColor;\n\nin vec2 passTextureCoord;\n\nuniform sampler2D texture1;\n\nvoid main()\n{             \n    vec4 texColor = texture(texture1, passTextureCoord);\n    if(texColor.a &lt; 0.1)\n        discard;\n    FragColor = texColor;\n}  \n</code></pre>\n"},{"tags":["java","spring","spring-boot","authentication","spring-security"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1668594058,"post_id":74458719,"comment_id":131441446,"body_markdown":"It isn&#39;t a bean, it internally uses a `ThreadLocal` to hold the current user. This is set by the spring security filter chain. There are several of such like the `RequestContextHolder`, `LocaleContextHolder` to name a few.","body":"It isn&#39;t a bean, it internally uses a <code>ThreadLocal</code> to hold the current user. This is set by the spring security filter chain. There are several of such like the <code>RequestContextHolder</code>, <code>LocaleContextHolder</code> to name a few."},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":1,"creation_date":1668596083,"post_id":74458719,"comment_id":131442197,"body_markdown":"This method exists to allow you to get access to the `Authentication` in places where you _can&#39;t_ inject it. If you try to autowire the `SecurityContextHolder` just to get the `Authentication`, autowire the latter instead.","body":"This method exists to allow you to get access to the <code>Authentication</code> in places where you <i>can&#39;t</i> inject it. If you try to autowire the <code>SecurityContextHolder</code> just to get the <code>Authentication</code>, autowire the latter instead."}],"answers":[{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1668690359,"creation_date":1668641807,"answer_id":74468527,"question_id":74458719,"body_markdown":"[`SecurityContextHolder`][contextHolder] is a utility class which declares a bunch of `static` methods, which can be accessed using class name.\r\n\r\nIt doesn&#39;t make much sense to instantiate utility classes (their constructors are usually private to emphasize that), and for that reason `SecurityContextHolder` is not a Bean in the Context, hence there&#39;s no way (*and no need*) to inject it.\r\n\r\nThe purpose `SecurityContextHolder` to facilitate access to the [`SecurityContext`][context], which contains information specific to the currently authenticated user. Also, `SecurityContextHolder` offers various strategies for managing `SecurityContext`:\r\n* `MODE_THREADLOCAL` is the default one, that is suitable for so-called servlet-based Web Application, which are using thread-per-request model. In this case, each thread would have its own context and Spring uses [`TreadLocal`][threadLocal] to manage the context.\r\n* `MODE_INHERITABLETHREADLOCAL` is similar to the previous one with one difference - it allows to use multiple threads per request, and if we spawn a new thread it inherits the context of the parent thread.\r\n* `MODE_GLOBAL` - is not appropriate for server use. This strategy is not based on `TreadLocal`, every thread is expected to see the same context. And can be used in a standalone application (for instance in a Swing client).\r\n\r\nHere&#39;s a short quote from the [Spring Security documentation][sch] (*have a closer at this link if you want to learn more*):\r\n\r\n&gt; **10.1. SecurityContextHolder**\r\n&gt; \r\n&gt; At the heart of Spring Securitys authentication model is the\r\n&gt; `SecurityContextHolder`. It contains the `SecurityContext`.\r\n&gt; securitycontextholder\r\n&gt; \r\n&gt; [![enter image description here][1]][1]\r\n&gt; \r\n&gt; The `SecurityContextHolder` is where Spring Security stores the\r\n&gt; details of who is authenticated. Spring Security does not care how the\r\n&gt; `SecurityContextHolder` is populated. If it contains a value, then it\r\n&gt; is used as the currently authenticated user.\r\n&gt; \r\n&gt; ...\r\n\r\nSo, as a recap, the main purpose of `SecurityContextHolder` is to manage `SecurityContext`. And security context is meant to provide access to the user&#39;s [`Authentication`][auth].\r\n\r\n`Authentication` represents the currently authenticated user. And since `Authentication` a Bean, it can be provided through dependency injection in another Bean, for instance as a method parameter.\r\n\r\nLet&#39;s have a look at an example. Assume we have a controller which has an endpoint returning an instance of `Foo` which requires some user&#39;s information from the `Authentication`:\r\n\r\n```\r\n@RestController\r\npublic class FooController {\r\n    \r\n    @GetMapping(&quot;/foo&quot;)\r\n    Foo getFoo(Authentication a) {\r\n        \r\n        return FooUtils.generateFoo(a);\r\n    }\r\n}\r\n```\r\n\r\nIt makes use of the `generateFoo()` method by passing `Authentication` injected a parameter. Method `generateFoo()` located in the `FooUtils` which is a utility class.\r\n\r\n```\r\npublic class FooUtils {\r\n    public static Foo generateFoo(Authentication a) {\r\n        \r\n        return new Foo(a.getPrincipal());\r\n    }\r\n}\r\n```\r\n\r\n`Authentication` can&#39;t be injected in the methods of `FooUtils`, since it&#39;s a not a Bean, therefore it&#39;s being handed out by the caller. If we imagine that chain of calls would be longer, i.e. there would be more actions in between the calling endpoint method and `FooUtils.generateFoo()` it would not be very convenient to pass around `Authentication` through several methods where it&#39;s not going to be used.\r\n\r\nInstead, can make use of the `SecurityContextHolder` and obtain `Authentication` right on the spot inside the `FooUtils`:\r\n\r\n```\r\npublic class FooUtils {\r\n    public static Foo generateFoo() {\r\n        Authentication a = SecurityContextHolder\r\n            .getContext()\r\n            .getAuthentication();\r\n        \r\n        return new Foo(a.getPrincipal());\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\n   [contextHolder]: https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/core/context/SecurityContextHolder.html\r\n\r\n   [sch]: https://docs.spring.io/spring-security/site/docs/5.3.9.RELEASE/reference/html5/#servlet-authentication-securitycontextholder\r\n\r\n   [context]: https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/core/context/SecurityContext.html\r\n\r\n   [auth]: https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/core/Authentication.html\r\n\r\n   [threadLocal]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/ThreadLocal.html\r\n\r\n   [1]: https://i.stack.imgur.com/uwq93.png","title":"Isn&#39;t SecurityContextHolder a Bean?","body":"<p><a href=\"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/core/context/SecurityContextHolder.html\" rel=\"nofollow noreferrer\"><code>SecurityContextHolder</code></a> is a utility class which declares a bunch of <code>static</code> methods, which can be accessed using class name.</p>\n<p>It doesn't make much sense to instantiate utility classes (their constructors are usually private to emphasize that), and for that reason <code>SecurityContextHolder</code> is not a Bean in the Context, hence there's no way (<em>and no need</em>) to inject it.</p>\n<p>The purpose <code>SecurityContextHolder</code> to facilitate access to the <a href=\"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/core/context/SecurityContext.html\" rel=\"nofollow noreferrer\"><code>SecurityContext</code></a>, which contains information specific to the currently authenticated user. Also, <code>SecurityContextHolder</code> offers various strategies for managing <code>SecurityContext</code>:</p>\n<ul>\n<li><code>MODE_THREADLOCAL</code> is the default one, that is suitable for so-called servlet-based Web Application, which are using thread-per-request model. In this case, each thread would have its own context and Spring uses <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/ThreadLocal.html\" rel=\"nofollow noreferrer\"><code>TreadLocal</code></a> to manage the context.</li>\n<li><code>MODE_INHERITABLETHREADLOCAL</code> is similar to the previous one with one difference - it allows to use multiple threads per request, and if we spawn a new thread it inherits the context of the parent thread.</li>\n<li><code>MODE_GLOBAL</code> - is not appropriate for server use. This strategy is not based on <code>TreadLocal</code>, every thread is expected to see the same context. And can be used in a standalone application (for instance in a Swing client).</li>\n</ul>\n<p>Here's a short quote from the <a href=\"https://docs.spring.io/spring-security/site/docs/5.3.9.RELEASE/reference/html5/#servlet-authentication-securitycontextholder\" rel=\"nofollow noreferrer\">Spring Security documentation</a> (<em>have a closer at this link if you want to learn more</em>):</p>\n<blockquote>\n<p><strong>10.1. SecurityContextHolder</strong></p>\n<p>At the heart of Spring Securitys authentication model is the\n<code>SecurityContextHolder</code>. It contains the <code>SecurityContext</code>.\nsecuritycontextholder</p>\n<p><a href=\"https://i.stack.imgur.com/uwq93.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uwq93.png\" alt=\"enter image description here\" /></a></p>\n<p>The <code>SecurityContextHolder</code> is where Spring Security stores the\ndetails of who is authenticated. Spring Security does not care how the\n<code>SecurityContextHolder</code> is populated. If it contains a value, then it\nis used as the currently authenticated user.</p>\n<p>...</p>\n</blockquote>\n<p>So, as a recap, the main purpose of <code>SecurityContextHolder</code> is to manage <code>SecurityContext</code>. And security context is meant to provide access to the user's <a href=\"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/core/Authentication.html\" rel=\"nofollow noreferrer\"><code>Authentication</code></a>.</p>\n<p><code>Authentication</code> represents the currently authenticated user. And since <code>Authentication</code> a Bean, it can be provided through dependency injection in another Bean, for instance as a method parameter.</p>\n<p>Let's have a look at an example. Assume we have a controller which has an endpoint returning an instance of <code>Foo</code> which requires some user's information from the <code>Authentication</code>:</p>\n<pre><code>@RestController\npublic class FooController {\n    \n    @GetMapping(&quot;/foo&quot;)\n    Foo getFoo(Authentication a) {\n        \n        return FooUtils.generateFoo(a);\n    }\n}\n</code></pre>\n<p>It makes use of the <code>generateFoo()</code> method by passing <code>Authentication</code> injected a parameter. Method <code>generateFoo()</code> located in the <code>FooUtils</code> which is a utility class.</p>\n<pre><code>public class FooUtils {\n    public static Foo generateFoo(Authentication a) {\n        \n        return new Foo(a.getPrincipal());\n    }\n}\n</code></pre>\n<p><code>Authentication</code> can't be injected in the methods of <code>FooUtils</code>, since it's a not a Bean, therefore it's being handed out by the caller. If we imagine that chain of calls would be longer, i.e. there would be more actions in between the calling endpoint method and <code>FooUtils.generateFoo()</code> it would not be very convenient to pass around <code>Authentication</code> through several methods where it's not going to be used.</p>\n<p>Instead, can make use of the <code>SecurityContextHolder</code> and obtain <code>Authentication</code> right on the spot inside the <code>FooUtils</code>:</p>\n<pre><code>public class FooUtils {\n    public static Foo generateFoo() {\n        Authentication a = SecurityContextHolder\n            .getContext()\n            .getAuthentication();\n        \n        return new Foo(a.getPrincipal());\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1622560,"reputation":1026,"user_id":1498827,"accept_rate":84,"display_name":"microwth"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1026,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":74468527,"answer_count":1,"score":2,"last_activity_date":1668690490,"creation_date":1668593789,"question_id":74458719,"body_markdown":"Trying to Autowire SecurityContextHolder\r\nI get error \r\n\r\n    required a bean of type &#39;org.springframework.security.core.context.SecurityContextHolder&#39; that could not be found.\r\n\r\nTurns out that it is available from any part of the code like\r\n\r\n    Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\r\n\r\nHow come it isn&#39;t a bean and how does it get initialized under the hood?\r\nAre there other static utility classes like that available to be consumed from anywhere and how do I find them?\r\n","title":"Isn&#39;t SecurityContextHolder a Bean?","body":"<p>Trying to Autowire SecurityContextHolder\nI get error</p>\n<pre><code>required a bean of type 'org.springframework.security.core.context.SecurityContextHolder' that could not be found.\n</code></pre>\n<p>Turns out that it is available from any part of the code like</p>\n<pre><code>Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\n</code></pre>\n<p>How come it isn't a bean and how does it get initialized under the hood?\nAre there other static utility classes like that available to be consumed from anywhere and how do I find them?</p>\n"},{"tags":["java","spring","tomcat","http-headers","httprequest"],"owner":{"account_id":22553349,"reputation":31,"user_id":16742146,"display_name":"RobinP2000"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1668690391,"creation_date":1668690391,"question_id":74475989,"body_markdown":"I programmed a website with Spring and everything works fine.\r\nBut when I run the website on my server where everyone has access to then sometimes I get a weird error message and I think that someone tries to hack my website.\r\n\r\n    2022-11-17 13:44:28.935  INFO 17736 --- [nio-9000-exec-3] o.apache.coyote.http11.Http11Processor   : Error parsing HTTP request header\r\n     Note: further occurrences of HTTP request parsing errors will be logged at DEBUG level.\r\n    \r\n    java.lang.IllegalArgumentException: Invalid character found in method name [0x160x030x010x000xee0x010x000x000xea0x030x030xfa!&quot;0xbe,0x14`0x860xc00x0e0xd2k0xed0x840x100xb6;0xc84?zh0x1by0xc6y0x7fiz(0xa2= ]. HTTP method names must be tokens\r\n            at org.apache.coyote.http11.Http11InputBuffer.parseRequestLine(Http11InputBuffer.java:419) ~[tomcat-embed-core-9.0.65.jar!/:na]\r\n            at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:271) ~[tomcat-embed-core-9.0.65.jar!/:na]\r\n            at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.65.jar!/:na]\r\n            at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890) ~[tomcat-embed-core-9.0.65.jar!/:na]\r\n            at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789) ~[tomcat-embed-core-9.0.65.jar!/:na]\r\n            at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.65.jar!/:na]\r\n            at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.65.jar!/:na]\r\n            at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.65.jar!/:na]\r\n            at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.65.jar!/:na]\r\n            at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n\r\n \r\nI think this because when I run the website on my local computer I don&#39;t get such messages and on my local computer I am the only one that has access to the website.\r\n\r\nIf someone tries to hack me I don&#39;t really care because as you can see in the error message it is not working.\r\nBut the error message is annoying so does someone know how/where to handle the exception?","title":"Spring handle &quot;invalid character found&quot; error","body":"<p>I programmed a website with Spring and everything works fine.\nBut when I run the website on my server where everyone has access to then sometimes I get a weird error message and I think that someone tries to hack my website.</p>\n<pre><code>2022-11-17 13:44:28.935  INFO 17736 --- [nio-9000-exec-3] o.apache.coyote.http11.Http11Processor   : Error parsing HTTP request header\n Note: further occurrences of HTTP request parsing errors will be logged at DEBUG level.\n\njava.lang.IllegalArgumentException: Invalid character found in method name [0x160x030x010x000xee0x010x000x000xea0x030x030xfa!&quot;0xbe,0x14`0x860xc00x0e0xd2k0xed0x840x100xb6;0xc84?zh0x1by0xc6y0x7fiz(0xa2= ]. HTTP method names must be tokens\n        at org.apache.coyote.http11.Http11InputBuffer.parseRequestLine(Http11InputBuffer.java:419) ~[tomcat-embed-core-9.0.65.jar!/:na]\n        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:271) ~[tomcat-embed-core-9.0.65.jar!/:na]\n        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.65.jar!/:na]\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890) ~[tomcat-embed-core-9.0.65.jar!/:na]\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789) ~[tomcat-embed-core-9.0.65.jar!/:na]\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.65.jar!/:na]\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.65.jar!/:na]\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.65.jar!/:na]\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.65.jar!/:na]\n        at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n</code></pre>\n<p>I think this because when I run the website on my local computer I don't get such messages and on my local computer I am the only one that has access to the website.</p>\n<p>If someone tries to hack me I don't really care because as you can see in the error message it is not working.\nBut the error message is annoying so does someone know how/where to handle the exception?</p>\n"},{"tags":["java","hibernate","websocket","quarkus","hibernate-reactive"],"answers":[{"comments":[{"owner":{"account_id":8295598,"reputation":113,"user_id":6235944,"display_name":"N. Silviu"},"score":0,"creation_date":1668690391,"post_id":68455324,"comment_id":131470477,"body_markdown":"In my case it&#39;s `vert.x-eventloop-thread-x` and still not working. And I&#39;m on quarkus `2.14.0.Final`","body":"In my case it&#39;s <code>vert.x-eventloop-thread-x</code> and still not working. And I&#39;m on quarkus <code>2.14.0.Final</code>"}],"tags":[],"owner":{"account_id":272310,"reputation":6057,"user_id":563323,"display_name":"Sanne"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1626785938,"creation_date":1626785938,"answer_id":68455324,"question_id":68355159,"body_markdown":"As you can see, the response from the DB is being handled by a thread named `vert.x-eventloop-thread-8`. This is expected: all responses from the reactive sql drivers are delivered on the eventloop threads.\r\n\r\nThe `IllegalStateException` you&#39;re seeing is likely being caused by the fact that the Session has not been opened on an eventloop thread - which causes such problems as you&#39;re making it run multi-threaded when all this code is designed to be run in a single eventloop (and doesn&#39;t need multiple threads, not to mention making it multi-threaded would degrade the performance).\r\nYou should be able to verify this by logging the thread name from the code just before invoking Panache Reactive: I bet it&#39;s not a `vert.x-eventloop-thread-X`.\r\n\r\nIn other words, Panache Reactive is designed to be used from a fully reactive context.\r\n\r\nSince Quarkus 2.1, Panache Reactive should be able to detect such a pattern and offload the operations onto the correct threads.","title":"How to access reactive Panache Entity Session Manager from a websocket endpoint? (Quarkus, Mutiny, Panache, Reactive)","body":"<p>As you can see, the response from the DB is being handled by a thread named <code>vert.x-eventloop-thread-8</code>. This is expected: all responses from the reactive sql drivers are delivered on the eventloop threads.</p>\n<p>The <code>IllegalStateException</code> you're seeing is likely being caused by the fact that the Session has not been opened on an eventloop thread - which causes such problems as you're making it run multi-threaded when all this code is designed to be run in a single eventloop (and doesn't need multiple threads, not to mention making it multi-threaded would degrade the performance).\nYou should be able to verify this by logging the thread name from the code just before invoking Panache Reactive: I bet it's not a <code>vert.x-eventloop-thread-X</code>.</p>\n<p>In other words, Panache Reactive is designed to be used from a fully reactive context.</p>\n<p>Since Quarkus 2.1, Panache Reactive should be able to detect such a pattern and offload the operations onto the correct threads.</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1660571677,"post_id":73334333,"comment_id":129557366,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/73334333/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":20731762,"reputation":21,"user_id":15223555,"display_name":"Feavy"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1660308264,"creation_date":1660307957,"answer_id":73334333,"question_id":68355159,"body_markdown":"I have found a way to access reactive panache entities but for some reason it only works 3 times and then the other calls fail because of timeout.\r\n\r\n```kt\r\n@ServerEndpoint(&quot;/websocket/{name}&quot;)\r\n@ApplicationScoped\r\nclass StartWebSocket(\r\n    val sessionFactory: SessionFactory\r\n) {\r\n\r\n    @OnOpen\r\n    fun onOpen(session: Session, @PathParam(&quot;name&quot;) name: String) {\r\n        sessionFactory.withSession { SimpleUser.findByName(name) }.subscribe().with{ println(&quot;Found: ${it?.username}&quot;) }\r\n   }\r\n}\r\n```","title":"How to access reactive Panache Entity Session Manager from a websocket endpoint? (Quarkus, Mutiny, Panache, Reactive)","body":"<p>I have found a way to access reactive panache entities but for some reason it only works 3 times and then the other calls fail because of timeout.</p>\n<pre><code>@ServerEndpoint(&quot;/websocket/{name}&quot;)\n@ApplicationScoped\nclass StartWebSocket(\n    val sessionFactory: SessionFactory\n) {\n\n    @OnOpen\n    fun onOpen(session: Session, @PathParam(&quot;name&quot;) name: String) {\n        sessionFactory.withSession { SimpleUser.findByName(name) }.subscribe().with{ println(&quot;Found: ${it?.username}&quot;) }\n   }\n}\n</code></pre>\n"}],"owner":{"account_id":10764067,"reputation":106,"user_id":10808187,"display_name":"chamoK"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1807,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1668690244,"creation_date":1626136167,"question_id":68355159,"body_markdown":"I am trying to build an example application where messages can be saved to a db, then when a websocket connects with the sessionId those messages are saved under, they are all sent out.\r\n\r\nHere is my code:\r\n\r\n```\r\nMessage.java\r\n---\r\npackage org.acme.hibernate.orm.panache;\r\n\r\nimport java.util.Date;\r\n\r\nimport javax.persistence.Cacheable;\r\nimport javax.persistence.Entity;\r\nimport io.quarkus.panache.common.Sort;\r\n\r\nimport io.quarkus.hibernate.reactive.panache.PanacheEntity;\r\nimport io.smallrye.mutiny.Multi;\r\n\r\n@Entity\r\n@Cacheable\r\npublic class Message extends PanacheEntity {\r\n\r\n  public String sessionId;\r\n  public String content;\r\n  public Date timestamp;\r\n\r\n  public Message() {\r\n    this.timestamp = new Date();\r\n  }\r\n\r\n  public Message(String content, String sessionId) {\r\n    this.content = content;\r\n    this.timestamp = new Date();\r\n    this.sessionId = sessionId;\r\n  }  \r\n\r\n  public static Multi&lt;Message&gt; getBySessionId(String sessionId) {\r\n    return stream(&quot;sessionId&quot;, Sort.by(&quot;timestamp&quot;), sessionId);\r\n  }\r\n\r\n}\r\n\r\n```\r\n```\r\nMessageResource.java\r\n---\r\npackage org.acme.hibernate.orm.panache;\r\n\r\nimport java.util.Date;\r\nimport java.util.List;\r\n\r\nimport static javax.ws.rs.core.Response.Status.CREATED;\r\n\r\nimport javax.inject.Inject;\r\nimport javax.transaction.Transactional;\r\nimport javax.ws.rs.Consumes;\r\nimport javax.ws.rs.GET;\r\nimport javax.ws.rs.POST;\r\nimport javax.ws.rs.Path;\r\nimport javax.ws.rs.PathParam;\r\nimport javax.ws.rs.Produces;\r\nimport javax.ws.rs.WebApplicationException;\r\nimport javax.ws.rs.core.MediaType;\r\nimport javax.ws.rs.core.Response;\r\nimport javax.ws.rs.ext.ExceptionMapper;\r\nimport javax.ws.rs.ext.Provider;\r\n\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\nimport com.fasterxml.jackson.databind.node.ObjectNode;\r\n\r\nimport io.quarkus.hibernate.reactive.panache.Panache;\r\nimport io.smallrye.mutiny.CompositeException;\r\nimport io.smallrye.mutiny.Multi;\r\nimport io.smallrye.mutiny.Uni;\r\n\r\n\r\n@Path(&quot;/message&quot;)\r\n@Produces(MediaType.APPLICATION_JSON)\r\n@Consumes(MediaType.APPLICATION_JSON)\r\npublic class MessageResource {\r\n  \r\n  @GET\r\n  public Uni&lt;List&lt;Message&gt;&gt; list() {\r\n    return Message.listAll();\r\n  }\r\n\r\n  @GET\r\n  @Path(&quot;/{sessionId}&quot;)\r\n  public Multi&lt;Message&gt; listBySessionId(@PathParam(&quot;sessionId&quot;) String sessionId) {\r\n    return Message.getBySessionId(sessionId);\r\n  }\r\n\r\n  @POST\r\n  @Transactional\r\n  public Uni&lt;Response&gt; create(Message message) {\r\n    message.timestamp = new Date();\r\n    message.persist();\r\n    return Panache.withTransaction(message::persist)\r\n      .replaceWith(Response.ok(message).status(CREATED)::build);\r\n  }\r\n\r\n\r\n  /**\r\n     * Create a HTTP response from an exception.\r\n     *\r\n     * Response Example:\r\n     *\r\n     * &lt;pre&gt;\r\n     * HTTP/1.1 422 Unprocessable Entity\r\n     * Content-Length: 111\r\n     * Content-Type: application/json\r\n     *\r\n     * {\r\n     *     &quot;code&quot;: 422,\r\n     *     &quot;error&quot;: &quot;Fruit name was not set on request.&quot;,\r\n     *     &quot;exceptionType&quot;: &quot;javax.ws.rs.WebApplicationException&quot;\r\n     * }\r\n     * &lt;/pre&gt;\r\n     */\r\n    @Provider\r\n    public static class ErrorMapper implements ExceptionMapper&lt;Exception&gt; {\r\n\r\n        @Inject\r\n        ObjectMapper objectMapper;\r\n\r\n        @Override\r\n        public Response toResponse(Exception exception) {\r\n\r\n            Throwable throwable = exception;\r\n\r\n            int code = 500;\r\n            if (throwable instanceof WebApplicationException) {\r\n                code = ((WebApplicationException) exception).getResponse().getStatus();\r\n            }\r\n\r\n            // This is a Mutiny exception and it happens, for example, when we try to insert a new\r\n            // fruit but the name is already in the database\r\n            if (throwable instanceof CompositeException) {\r\n                throwable = ((CompositeException) throwable).getCause();\r\n            }\r\n\r\n            ObjectNode exceptionJson = objectMapper.createObjectNode();\r\n            exceptionJson.put(&quot;exceptionType&quot;, throwable.getClass().getName());\r\n            exceptionJson.put(&quot;code&quot;, code);\r\n\r\n            if (exception.getMessage() != null) {\r\n                exceptionJson.put(&quot;error&quot;, throwable.getMessage());\r\n            }\r\n\r\n            return Response.status(code)\r\n                    .entity(exceptionJson)\r\n                    .build();\r\n        }\r\n      }\r\n}\r\n```\r\n```\r\nReplaySocket.java\r\n---\r\npackage org.acme.websockets;\r\n\r\nimport java.util.List;\r\nimport java.util.Map;\r\nimport java.util.concurrent.ConcurrentHashMap;\r\n\r\nimport io.quarkus.hibernate.reactive.panache.PanacheEntityBase;\r\nimport io.quarkus.panache.common.Sort;\r\n\r\nimport javax.enterprise.context.ApplicationScoped;\r\nimport javax.inject.Inject;\r\nimport javax.websocket.OnOpen;\r\nimport javax.websocket.Session;\r\nimport javax.websocket.server.PathParam;\r\nimport javax.websocket.server.ServerEndpoint;\r\n\r\nimport org.acme.hibernate.orm.panache.Message;\r\nimport org.acme.hibernate.orm.panache.MessageResource;\r\nimport org.jboss.logging.Logger;\r\n\r\nimport io.smallrye.mutiny.Multi;\r\nimport io.smallrye.mutiny.Uni;\r\n\r\n@ServerEndpoint(&quot;/replay/{sessionId}&quot;)         \r\n@ApplicationScoped\r\npublic class ReplaySocket {\r\n\r\n  @Inject\r\n  MessageResource messageResource;\r\n\r\n  private static final Logger LOG = Logger.getLogger(ReplaySocket.class.getName());\r\n  \r\n  Map&lt;String, Session&gt; sessions = new ConcurrentHashMap&lt;&gt;(); \r\n\r\n  @OnOpen\r\n    public void onOpen(Session session, @PathParam(&quot;sessionId&quot;) String sessionId) {\r\n        sessions.put(sessionId, session);\r\n        broadcast(&quot;Starting&quot;);\r\n        replayMessages(sessionId);\r\n    }\r\n\r\n    private void replayMessages(String sessionId) {\r\n      Multi&lt;Message&gt; messages = Message.stream(&quot;sessionId&quot;, Sort.by(&quot;timestamp&quot;), sessionId);\r\n\r\n      \r\n      messages.subscribe().with(\r\n        message -&gt; broadcast(message.content),\r\n        failure -&gt; System.out.println(failure)\r\n      );\r\n    }\r\n\r\n    private void broadcast(String message) {\r\n      sessions.values().forEach(s -&gt; {\r\n          s.getAsyncRemote().sendObject(message, result -&gt;  {\r\n              if (result.getException() != null) {\r\n                  System.out.println(&quot;Unable to send message: &quot; + result.getException());\r\n              }\r\n          });\r\n      });\r\n  }\r\n\r\n}\r\n```\r\n\r\nWhen I run this, I can save and get from the MessageResource endpoint. However when I try to get the messages in the websocket I get this error:\r\n\r\n```\r\n2021-07-13 10:23:57,016 ERROR [org.hib.rea.errors] (vert.x-eventloop-thread-8) failed to execute statement [select message0_.id as id1_0_, message0_.content as content2_0_, message0_.sessionId as sessioni3_0_, message0_.timestamp as timestam4_0_ from Message message0_ where message0_.sessionId=$1 order by message0_.timestamp]\r\n2021-07-13 10:23:57,017 ERROR [org.hib.rea.errors] (vert.x-eventloop-thread-8) could not execute query: java.util.concurrent.CompletionException: java.lang.IllegalStateException: Session/EntityManager is closed\r\n\tat java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:314)\r\n\tat java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:319)\r\n\tat java.base/java.util.concurrent.CompletableFuture$UniCompose.tryFire(CompletableFuture.java:1081)\r\n\tat java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)\r\n\tat java.base/java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:2073)\r\n\tat io.vertx.core.Future.lambda$toCompletionStage$2(Future.java:360)\r\n\tat io.vertx.core.Future$$Lambda$889/0x0000000000000000.handle(Unknown Source)\r\n\tat io.vertx.core.impl.future.FutureImpl$3.onSuccess(FutureImpl.java:124)\r\n\tat io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:62)\r\n\tat io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:179)\r\n\tat io.vertx.core.impl.future.PromiseImpl.tryComplete(PromiseImpl.java:23)\r\n\tat io.vertx.sqlclient.impl.QueryResultBuilder.tryComplete(QueryResultBuilder.java:102)\r\n\tat io.vertx.sqlclient.impl.QueryResultBuilder.tryComplete(QueryResultBuilder.java:35)\r\n\tat io.vertx.core.Promise.complete(Promise.java:66)\r\n\tat io.vertx.core.Promise.handle(Promise.java:51)\r\n\tat io.vertx.core.Promise.handle(Promise.java:29)\r\n\tat io.vertx.core.impl.future.FutureImpl$3.onSuccess(FutureImpl.java:124)\r\n\tat io.vertx.core.impl.future.FutureBase.lambda$emitSuccess$0(FutureBase.java:54)\r\n\tat io.vertx.core.impl.future.FutureBase$$Lambda$625/0x0000000000000000.run(Unknown Source)\r\n\tat io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:500)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\tat java.base/java.lang.Thread.run(Thread.java:836)\r\nCaused by: java.lang.IllegalStateException: Session/EntityManager is closed\r\n\tat org.hibernate.internal.AbstractSharedSessionContract.checkOpen(AbstractSharedSessionContract.java:393)\r\n\tat org.hibernate.engine.spi.SharedSessionContractImplementor.checkOpen(SharedSessionContractImplementor.java:148)\r\n\tat org.hibernate.reactive.session.impl.ReactiveSessionImpl.checkOpen(ReactiveSessionImpl.java:1561)\r\n\tat org.hibernate.internal.AbstractSharedSessionContract.checkOpenOrWaitingForAutoClose(AbstractSharedSessionContract.java:399)\r\n\tat org.hibernate.internal.SessionImpl.getEntityUsingInterceptor(SessionImpl.java:592)\r\n\tat org.hibernate.loader.Loader.getRow(Loader.java:1609)\r\n\tat org.hibernate.loader.Loader.getRowFromResultSet(Loader.java:747)\r\n\tat org.hibernate.loader.Loader.getRowsFromResultSet(Loader.java:1046)\r\n\tat org.hibernate.reactive.loader.hql.impl.ReactiveQueryLoader.getRowsFromResultSet(ReactiveQueryLoader.java:223)\r\n\tat org.hibernate.reactive.loader.ReactiveLoaderBasedResultSetProcessor.reactiveExtractResults(ReactiveLoaderBasedResultSetProcessor.java:72)\r\n\tat org.hibernate.reactive.loader.hql.impl.ReactiveQueryLoader$1.reactiveExtractResults(ReactiveQueryLoader.java:72)\r\n\tat org.hibernate.reactive.loader.ReactiveLoader.reactiveProcessResultSet(ReactiveLoader.java:146)\r\n\tat org.hibernate.reactive.loader.ReactiveLoader.lambda$doReactiveQueryAndInitializeNonLazyCollections$0(ReactiveLoader.java:77)\r\n\tat org.hibernate.reactive.loader.ReactiveLoader$$Lambda$1220/0x0000000000000000.apply(Unknown Source)\r\n\tat java.base/java.util.concurrent.CompletableFuture$UniCompose.tryFire(CompletableFuture.java:1072)\r\n\t... 23 more\r\n\r\njava.lang.IllegalStateException: Session/EntityManager is closed\r\n```\r\n\r\nWhere am I going wrong? Is what I am trying to do not valid at all? If so, could you recommend something different?\r\n\r\nThanks!","title":"How to access reactive Panache Entity Session Manager from a websocket endpoint? (Quarkus, Mutiny, Panache, Reactive)","body":"<p>I am trying to build an example application where messages can be saved to a db, then when a websocket connects with the sessionId those messages are saved under, they are all sent out.</p>\n<p>Here is my code:</p>\n<pre><code>Message.java\n---\npackage org.acme.hibernate.orm.panache;\n\nimport java.util.Date;\n\nimport javax.persistence.Cacheable;\nimport javax.persistence.Entity;\nimport io.quarkus.panache.common.Sort;\n\nimport io.quarkus.hibernate.reactive.panache.PanacheEntity;\nimport io.smallrye.mutiny.Multi;\n\n@Entity\n@Cacheable\npublic class Message extends PanacheEntity {\n\n  public String sessionId;\n  public String content;\n  public Date timestamp;\n\n  public Message() {\n    this.timestamp = new Date();\n  }\n\n  public Message(String content, String sessionId) {\n    this.content = content;\n    this.timestamp = new Date();\n    this.sessionId = sessionId;\n  }  \n\n  public static Multi&lt;Message&gt; getBySessionId(String sessionId) {\n    return stream(&quot;sessionId&quot;, Sort.by(&quot;timestamp&quot;), sessionId);\n  }\n\n}\n\n</code></pre>\n<pre><code>MessageResource.java\n---\npackage org.acme.hibernate.orm.panache;\n\nimport java.util.Date;\nimport java.util.List;\n\nimport static javax.ws.rs.core.Response.Status.CREATED;\n\nimport javax.inject.Inject;\nimport javax.transaction.Transactional;\nimport javax.ws.rs.Consumes;\nimport javax.ws.rs.GET;\nimport javax.ws.rs.POST;\nimport javax.ws.rs.Path;\nimport javax.ws.rs.PathParam;\nimport javax.ws.rs.Produces;\nimport javax.ws.rs.WebApplicationException;\nimport javax.ws.rs.core.MediaType;\nimport javax.ws.rs.core.Response;\nimport javax.ws.rs.ext.ExceptionMapper;\nimport javax.ws.rs.ext.Provider;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.databind.node.ObjectNode;\n\nimport io.quarkus.hibernate.reactive.panache.Panache;\nimport io.smallrye.mutiny.CompositeException;\nimport io.smallrye.mutiny.Multi;\nimport io.smallrye.mutiny.Uni;\n\n\n@Path(&quot;/message&quot;)\n@Produces(MediaType.APPLICATION_JSON)\n@Consumes(MediaType.APPLICATION_JSON)\npublic class MessageResource {\n  \n  @GET\n  public Uni&lt;List&lt;Message&gt;&gt; list() {\n    return Message.listAll();\n  }\n\n  @GET\n  @Path(&quot;/{sessionId}&quot;)\n  public Multi&lt;Message&gt; listBySessionId(@PathParam(&quot;sessionId&quot;) String sessionId) {\n    return Message.getBySessionId(sessionId);\n  }\n\n  @POST\n  @Transactional\n  public Uni&lt;Response&gt; create(Message message) {\n    message.timestamp = new Date();\n    message.persist();\n    return Panache.withTransaction(message::persist)\n      .replaceWith(Response.ok(message).status(CREATED)::build);\n  }\n\n\n  /**\n     * Create a HTTP response from an exception.\n     *\n     * Response Example:\n     *\n     * &lt;pre&gt;\n     * HTTP/1.1 422 Unprocessable Entity\n     * Content-Length: 111\n     * Content-Type: application/json\n     *\n     * {\n     *     &quot;code&quot;: 422,\n     *     &quot;error&quot;: &quot;Fruit name was not set on request.&quot;,\n     *     &quot;exceptionType&quot;: &quot;javax.ws.rs.WebApplicationException&quot;\n     * }\n     * &lt;/pre&gt;\n     */\n    @Provider\n    public static class ErrorMapper implements ExceptionMapper&lt;Exception&gt; {\n\n        @Inject\n        ObjectMapper objectMapper;\n\n        @Override\n        public Response toResponse(Exception exception) {\n\n            Throwable throwable = exception;\n\n            int code = 500;\n            if (throwable instanceof WebApplicationException) {\n                code = ((WebApplicationException) exception).getResponse().getStatus();\n            }\n\n            // This is a Mutiny exception and it happens, for example, when we try to insert a new\n            // fruit but the name is already in the database\n            if (throwable instanceof CompositeException) {\n                throwable = ((CompositeException) throwable).getCause();\n            }\n\n            ObjectNode exceptionJson = objectMapper.createObjectNode();\n            exceptionJson.put(&quot;exceptionType&quot;, throwable.getClass().getName());\n            exceptionJson.put(&quot;code&quot;, code);\n\n            if (exception.getMessage() != null) {\n                exceptionJson.put(&quot;error&quot;, throwable.getMessage());\n            }\n\n            return Response.status(code)\n                    .entity(exceptionJson)\n                    .build();\n        }\n      }\n}\n</code></pre>\n<pre><code>ReplaySocket.java\n---\npackage org.acme.websockets;\n\nimport java.util.List;\nimport java.util.Map;\nimport java.util.concurrent.ConcurrentHashMap;\n\nimport io.quarkus.hibernate.reactive.panache.PanacheEntityBase;\nimport io.quarkus.panache.common.Sort;\n\nimport javax.enterprise.context.ApplicationScoped;\nimport javax.inject.Inject;\nimport javax.websocket.OnOpen;\nimport javax.websocket.Session;\nimport javax.websocket.server.PathParam;\nimport javax.websocket.server.ServerEndpoint;\n\nimport org.acme.hibernate.orm.panache.Message;\nimport org.acme.hibernate.orm.panache.MessageResource;\nimport org.jboss.logging.Logger;\n\nimport io.smallrye.mutiny.Multi;\nimport io.smallrye.mutiny.Uni;\n\n@ServerEndpoint(&quot;/replay/{sessionId}&quot;)         \n@ApplicationScoped\npublic class ReplaySocket {\n\n  @Inject\n  MessageResource messageResource;\n\n  private static final Logger LOG = Logger.getLogger(ReplaySocket.class.getName());\n  \n  Map&lt;String, Session&gt; sessions = new ConcurrentHashMap&lt;&gt;(); \n\n  @OnOpen\n    public void onOpen(Session session, @PathParam(&quot;sessionId&quot;) String sessionId) {\n        sessions.put(sessionId, session);\n        broadcast(&quot;Starting&quot;);\n        replayMessages(sessionId);\n    }\n\n    private void replayMessages(String sessionId) {\n      Multi&lt;Message&gt; messages = Message.stream(&quot;sessionId&quot;, Sort.by(&quot;timestamp&quot;), sessionId);\n\n      \n      messages.subscribe().with(\n        message -&gt; broadcast(message.content),\n        failure -&gt; System.out.println(failure)\n      );\n    }\n\n    private void broadcast(String message) {\n      sessions.values().forEach(s -&gt; {\n          s.getAsyncRemote().sendObject(message, result -&gt;  {\n              if (result.getException() != null) {\n                  System.out.println(&quot;Unable to send message: &quot; + result.getException());\n              }\n          });\n      });\n  }\n\n}\n</code></pre>\n<p>When I run this, I can save and get from the MessageResource endpoint. However when I try to get the messages in the websocket I get this error:</p>\n<pre><code>2021-07-13 10:23:57,016 ERROR [org.hib.rea.errors] (vert.x-eventloop-thread-8) failed to execute statement [select message0_.id as id1_0_, message0_.content as content2_0_, message0_.sessionId as sessioni3_0_, message0_.timestamp as timestam4_0_ from Message message0_ where message0_.sessionId=$1 order by message0_.timestamp]\n2021-07-13 10:23:57,017 ERROR [org.hib.rea.errors] (vert.x-eventloop-thread-8) could not execute query: java.util.concurrent.CompletionException: java.lang.IllegalStateException: Session/EntityManager is closed\n    at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:314)\n    at java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:319)\n    at java.base/java.util.concurrent.CompletableFuture$UniCompose.tryFire(CompletableFuture.java:1081)\n    at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)\n    at java.base/java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:2073)\n    at io.vertx.core.Future.lambda$toCompletionStage$2(Future.java:360)\n    at io.vertx.core.Future$$Lambda$889/0x0000000000000000.handle(Unknown Source)\n    at io.vertx.core.impl.future.FutureImpl$3.onSuccess(FutureImpl.java:124)\n    at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:62)\n    at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:179)\n    at io.vertx.core.impl.future.PromiseImpl.tryComplete(PromiseImpl.java:23)\n    at io.vertx.sqlclient.impl.QueryResultBuilder.tryComplete(QueryResultBuilder.java:102)\n    at io.vertx.sqlclient.impl.QueryResultBuilder.tryComplete(QueryResultBuilder.java:35)\n    at io.vertx.core.Promise.complete(Promise.java:66)\n    at io.vertx.core.Promise.handle(Promise.java:51)\n    at io.vertx.core.Promise.handle(Promise.java:29)\n    at io.vertx.core.impl.future.FutureImpl$3.onSuccess(FutureImpl.java:124)\n    at io.vertx.core.impl.future.FutureBase.lambda$emitSuccess$0(FutureBase.java:54)\n    at io.vertx.core.impl.future.FutureBase$$Lambda$625/0x0000000000000000.run(Unknown Source)\n    at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)\n    at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)\n    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:500)\n    at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)\n    at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\n    at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\n    at java.base/java.lang.Thread.run(Thread.java:836)\nCaused by: java.lang.IllegalStateException: Session/EntityManager is closed\n    at org.hibernate.internal.AbstractSharedSessionContract.checkOpen(AbstractSharedSessionContract.java:393)\n    at org.hibernate.engine.spi.SharedSessionContractImplementor.checkOpen(SharedSessionContractImplementor.java:148)\n    at org.hibernate.reactive.session.impl.ReactiveSessionImpl.checkOpen(ReactiveSessionImpl.java:1561)\n    at org.hibernate.internal.AbstractSharedSessionContract.checkOpenOrWaitingForAutoClose(AbstractSharedSessionContract.java:399)\n    at org.hibernate.internal.SessionImpl.getEntityUsingInterceptor(SessionImpl.java:592)\n    at org.hibernate.loader.Loader.getRow(Loader.java:1609)\n    at org.hibernate.loader.Loader.getRowFromResultSet(Loader.java:747)\n    at org.hibernate.loader.Loader.getRowsFromResultSet(Loader.java:1046)\n    at org.hibernate.reactive.loader.hql.impl.ReactiveQueryLoader.getRowsFromResultSet(ReactiveQueryLoader.java:223)\n    at org.hibernate.reactive.loader.ReactiveLoaderBasedResultSetProcessor.reactiveExtractResults(ReactiveLoaderBasedResultSetProcessor.java:72)\n    at org.hibernate.reactive.loader.hql.impl.ReactiveQueryLoader$1.reactiveExtractResults(ReactiveQueryLoader.java:72)\n    at org.hibernate.reactive.loader.ReactiveLoader.reactiveProcessResultSet(ReactiveLoader.java:146)\n    at org.hibernate.reactive.loader.ReactiveLoader.lambda$doReactiveQueryAndInitializeNonLazyCollections$0(ReactiveLoader.java:77)\n    at org.hibernate.reactive.loader.ReactiveLoader$$Lambda$1220/0x0000000000000000.apply(Unknown Source)\n    at java.base/java.util.concurrent.CompletableFuture$UniCompose.tryFire(CompletableFuture.java:1072)\n    ... 23 more\n\njava.lang.IllegalStateException: Session/EntityManager is closed\n</code></pre>\n<p>Where am I going wrong? Is what I am trying to do not valid at all? If so, could you recommend something different?</p>\n<p>Thanks!</p>\n"},{"tags":["java","swing","jtable","jscrollbar"],"comments":[{"owner":{"account_id":4098457,"reputation":5168,"user_id":3364618,"accept_rate":100,"display_name":"Juxhin"},"score":0,"creation_date":1410082911,"post_id":25708734,"comment_id":40186861,"body_markdown":"You could also just implement a custom `Look and Feel` for it. Haven&#39;t come across that issue before","body":"You could also just implement a custom <code>Look and Feel</code> for it. Haven&#39;t come across that issue before"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1410085057,"post_id":25708734,"comment_id":40187328,"body_markdown":"It&#39;s called a corner...take a look at [JScrollPane](http://docs.oracle.com/javase/7/docs/api/javax/swing/JScrollPane.html)","body":"It&#39;s called a corner...take a look at <a href=\"http://docs.oracle.com/javase/7/docs/api/javax/swing/JScrollPane.html\" rel=\"nofollow noreferrer\">JScrollPane</a>"},{"owner":{"account_id":4436791,"reputation":860,"user_id":3612435,"accept_rate":71,"display_name":"Danielle"},"score":0,"creation_date":1410091040,"post_id":25708734,"comment_id":40188669,"body_markdown":"setCorner() helped, thanks!","body":"setCorner() helped, thanks!"}],"answers":[{"tags":[],"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1668689820,"creation_date":1410106779,"answer_id":25712331,"question_id":25708734,"body_markdown":"As shown in [*How to Use Scroll Panes: Providing Custom Decorations*][1], you can use the scroll pane&#39;s `setCorner()` method to add a colored `Component`:\r\n\r\n    JPanel panel = new JPanel();\r\n    panel.setBackground(Color.gray);\r\n    scrollPane.setCorner(JScrollPane.UPPER_RIGHT_CORNER, panel);\r\n\r\nYou may have to set the panel&#39;s [opacity][2] to `true`, and you may want to select a suitable color from the the current Look &amp; Feel using the [`UIManager`][3].\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html#decorations\r\n  [2]: http://www.oracle.com/technetwork/java/painting-140037.html#props\r\n  [3]: https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/javax/swing/UIManager.html","title":"swing JTable with ScrollBar - color of square between headers and track","body":"<p>As shown in <a href=\"http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html#decorations\" rel=\"nofollow noreferrer\"><em>How to Use Scroll Panes: Providing Custom Decorations</em></a>, you can use the scroll pane's <code>setCorner()</code> method to add a colored <code>Component</code>:</p>\n<pre><code>JPanel panel = new JPanel();\npanel.setBackground(Color.gray);\nscrollPane.setCorner(JScrollPane.UPPER_RIGHT_CORNER, panel);\n</code></pre>\n<p>You may have to set the panel's <a href=\"http://www.oracle.com/technetwork/java/painting-140037.html#props\" rel=\"nofollow noreferrer\">opacity</a> to <code>true</code>, and you may want to select a suitable color from the the current Look &amp; Feel using the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/javax/swing/UIManager.html\" rel=\"nofollow noreferrer\"><code>UIManager</code></a>.</p>\n"}],"owner":{"account_id":4436791,"reputation":860,"user_id":3612435,"accept_rate":71,"display_name":"Danielle"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1345,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":25712331,"answer_count":1,"score":2,"last_activity_date":1668689820,"creation_date":1410081515,"question_id":25708734,"body_markdown":"![enter image description here][1]\r\n\r\n\r\nI have a JTable with BasicScrollBarUI, I set the headers background color: table.getTableHeader().setBackground(GuiConstants.backgroundColor);\r\n\r\nand the scrolbar background color:\r\npublic class ScrollBarUI extends BasicScrollBarUI {\r\n\r\n\t\r\n    @Override\r\n    protected void paintTrack(Graphics g, JComponent c, Rectangle trackBounds) {\r\n    \tc.setBackground(GuiConstants.backgroundColor);\r\n    \t\r\n    }\r\n}\r\n\r\nI still have a square between them that its color won&#39;t change.\r\ndoes anybody knows how to change it also to their color?\r\n\r\nthanks\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/zNXXh.png","title":"swing JTable with ScrollBar - color of square between headers and track","body":"<p><img src=\"https://i.stack.imgur.com/zNXXh.png\" alt=\"enter image description here\"></p>\n\n<p>I have a JTable with BasicScrollBarUI, I set the headers background color: table.getTableHeader().setBackground(GuiConstants.backgroundColor);</p>\n\n<p>and the scrolbar background color:\npublic class ScrollBarUI extends BasicScrollBarUI {</p>\n\n<pre><code>@Override\nprotected void paintTrack(Graphics g, JComponent c, Rectangle trackBounds) {\n    c.setBackground(GuiConstants.backgroundColor);\n\n}\n</code></pre>\n\n<p>}</p>\n\n<p>I still have a square between them that its color won't change.\ndoes anybody knows how to change it also to their color?</p>\n\n<p>thanks</p>\n"},{"tags":["java","android","retrofit2","google-maps-markers","google-maps-android-api-2"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1668689361,"post_id":74475697,"comment_id":131470038,"body_markdown":"and how do you expect to do so without connectivity?","body":"and how do you expect to do so without connectivity?"},{"owner":{"account_id":20655059,"reputation":15,"user_id":20477244,"display_name":"Leyoussi Lauriel"},"score":0,"creation_date":1668689604,"post_id":74475697,"comment_id":131470147,"body_markdown":"@Stultuske i would like my app to close with toast message not by crashing. but i do not know wher to put myConnectivityManager code.","body":"@Stultuske i would like my app to close with toast message not by crashing. but i do not know wher to put myConnectivityManager code."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1668689706,"post_id":74475697,"comment_id":131470189,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"answers":[{"comments":[{"owner":{"account_id":20655059,"reputation":15,"user_id":20477244,"display_name":"Leyoussi Lauriel"},"score":0,"creation_date":1668691015,"post_id":74475797,"comment_id":131470722,"body_markdown":"thank you very much you code saved my life :) :) i found the error in the log. i was supposed to put your code in the OnMapReady. Thank you bro !","body":"thank you very much you code saved my life :) :) i found the error in the log. i was supposed to put your code in the OnMapReady. Thank you bro !"},{"owner":{"display_name":"user15660680"},"score":0,"creation_date":1668691090,"post_id":74475797,"comment_id":131470748,"body_markdown":"please accept the ansewr and do a upvote if you got helped. Thank you","body":"please accept the ansewr and do a upvote if you got helped. Thank you"},{"owner":{"account_id":20655059,"reputation":15,"user_id":20477244,"display_name":"Leyoussi Lauriel"},"score":0,"creation_date":1668691178,"post_id":74475797,"comment_id":131470790,"body_markdown":"now no crashing Ah Ah :) :) :)","body":"now no crashing Ah Ah :) :) :)"}],"tags":[],"owner":{"display_name":"user15660680"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1668689593,"creation_date":1668689593,"answer_id":74475797,"question_id":74475697,"body_markdown":"For the crashing issue \r\n create a class\r\n````\r\n\r\npublic class NetWorkChecker {\r\n    static NetworkInfo wifi, mobile;\r\n\r\n    public static Boolean check(Context c) {\r\n\r\n        ConnectivityManager cm = (ConnectivityManager) c.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n        try {\r\n            wifi = cm.getNetworkInfo(ConnectivityManager.TYPE_WIFI);\r\n            mobile = cm.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);\r\n\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n        if (wifi != null &amp;&amp; wifi.isConnected() &amp;&amp; wifi.isAvailable()) {\r\n\r\n            return true;\r\n        } else if (mobile != null &amp;&amp; mobile.isAvailable() &amp;&amp; mobile.isConnected()) {\r\n\r\n            return true;\r\n        } else {\r\n            //Toast.makeText(c, &quot;No Network Connection&quot;, Toast.LENGTH_SHORT).show();\r\n           // ((Activity) c).finish();\r\n            displayMobileDataSettingsDialog(c,&quot;No Network Connection&quot;,&quot;No Network Connection&quot;);\r\n            return false;\r\n        }\r\n\r\n    }\r\n\r\n    public static AlertDialog displayMobileDataSettingsDialog(final Context context, String title, String message) {\r\n        AlertDialog.Builder builder = new AlertDialog.Builder(context);\r\n        builder.setTitle(title);\r\n        builder.setMessage(message);\r\n        builder.setCancelable(false);\r\n        builder.setPositiveButton(&quot;Settings&quot;, new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n                Intent intent = new Intent(Settings.ACTION_DATA_ROAMING_SETTINGS);\r\n                context.startActivity(intent);\r\n            }\r\n        });\r\n\r\n        builder.show();\r\n        return builder.create();\r\n    }\r\n\r\n}\r\n\r\n````\r\nto check if the devise have an active internet connection \r\ncall\r\n````\r\nif (!NetWorkChecker.check(this)){\r\n\r\n////do your refres\r\n\r\n}\r\n\r\n\r\n\r\n````","title":"my app is crashing when there is no internet and i want my markers or my map to refresh each second","body":"<p>For the crashing issue\ncreate a class</p>\n<pre><code>\npublic class NetWorkChecker {\n    static NetworkInfo wifi, mobile;\n\n    public static Boolean check(Context c) {\n\n        ConnectivityManager cm = (ConnectivityManager) c.getSystemService(Context.CONNECTIVITY_SERVICE);\n        try {\n            wifi = cm.getNetworkInfo(ConnectivityManager.TYPE_WIFI);\n            mobile = cm.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);\n\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        if (wifi != null &amp;&amp; wifi.isConnected() &amp;&amp; wifi.isAvailable()) {\n\n            return true;\n        } else if (mobile != null &amp;&amp; mobile.isAvailable() &amp;&amp; mobile.isConnected()) {\n\n            return true;\n        } else {\n            //Toast.makeText(c, &quot;No Network Connection&quot;, Toast.LENGTH_SHORT).show();\n           // ((Activity) c).finish();\n            displayMobileDataSettingsDialog(c,&quot;No Network Connection&quot;,&quot;No Network Connection&quot;);\n            return false;\n        }\n\n    }\n\n    public static AlertDialog displayMobileDataSettingsDialog(final Context context, String title, String message) {\n        AlertDialog.Builder builder = new AlertDialog.Builder(context);\n        builder.setTitle(title);\n        builder.setMessage(message);\n        builder.setCancelable(false);\n        builder.setPositiveButton(&quot;Settings&quot;, new DialogInterface.OnClickListener() {\n            @Override\n            public void onClick(DialogInterface dialog, int which) {\n                Intent intent = new Intent(Settings.ACTION_DATA_ROAMING_SETTINGS);\n                context.startActivity(intent);\n            }\n        });\n\n        builder.show();\n        return builder.create();\n    }\n\n}\n\n</code></pre>\n<p>to check if the devise have an active internet connection\ncall</p>\n<pre><code>if (!NetWorkChecker.check(this)){\n\n////do your refres\n\n}\n\n\n\n</code></pre>\n"}],"owner":{"account_id":20655059,"reputation":15,"user_id":20477244,"display_name":"Leyoussi Lauriel"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":74475797,"answer_count":1,"score":-1,"last_activity_date":1668689755,"creation_date":1668689099,"question_id":74475697,"body_markdown":"i made a googlemap app where my markers are displyed.\r\nthe problem is when there no internet, the app is crashing. The code under onResume does not solve the problem.\r\nalso i want to refresh the map or markers each second on the map.\r\n if you have any ideas please i am here to learn from all of you.\r\n\r\nhere is my MapActivity code :\r\n\r\n\r\n```\r\npublic class MapActivity extends AppCompatActivity implements OnMapReadyCallback\r\n{\r\n    private static final String TAG = &quot;MapActivity&quot;;\r\n    @Bind(R.id.back)\r\n    View back;\r\n    @Bind(R.id.zoom_in)\r\n    View zoom_in;\r\n    @Bind(R.id.zoom_out)\r\n    View zoom_out;\r\n    @Bind(R.id.updatetimer)\r\n    TextView updatetimer;\r\n    @Bind(R.id.autozoom)\r\n    ImageView autozoom;\r\n    @Bind(R.id.showtails)\r\n    ImageView showtails;\r\n    @Bind(R.id.geofences)\r\n    ImageView showGeofences;\r\n    @Bind(R.id.map_layer)\r\n    ImageView map_layer_icon;\r\n    private GoogleMap map;\r\n\r\n    @Bind(R.id.content_layout)\r\n    View content_layout;\r\n    @Bind(R.id.loading_layout)\r\n    View loading_layout;\r\n    @Bind(R.id.nodata_layout)\r\n    View nodata_layout;\r\n    private Timer timer;\r\n    private int autoZoomedTimes = 0;// dl bugo osmdroid library, zoom&#39;inam du kartus ir paskui po refresh&#39;o nebe, nes greiiausiai user&#39;is bus pakeits zoom&#39;\r\n\r\n    private HashMap&lt;Integer, Marker&gt; deviceIdMarkers;\r\n    private HashMap&lt;String, Device&gt; markerIdDevices;\r\n    private HashMap&lt;Integer, Polyline&gt; deviceIdPolyline;\r\n    private HashMap&lt;Integer, LatLng&gt; deviceIdLastLatLng;\r\n    //    private HashMap&lt;Integer, Marker&gt; deviceIdSmallMarkerInfo;\r\n    private long lastRefreshTime;\r\n    boolean isAutoZoomEnabled = true;\r\n    boolean isShowTitlesEnabled;\r\n    boolean isShowTailsEnabled = true;\r\n    boolean isShowGeofencesEnabled = true;\r\n    private String stopTime;\r\n    private AsyncTask downloadingAsync;\r\n\r\n    private boolean isRefreshLoced = false;\r\n\r\n    ApiInterface.GetGeofencesResult geofencesResult;\r\n    ArrayList&lt;PolygonWithName&gt; polygonsWithDetails = new ArrayList&lt;&gt;();\r\n    float previousZoomLevel = 0;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState)\r\n    {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_map);\r\n        ButterKnife.bind(this);\r\n        deviceIdMarkers = new HashMap&lt;&gt;();\r\n        markerIdDevices = new HashMap&lt;&gt;();\r\n        deviceIdPolyline = new HashMap&lt;&gt;();\r\n        deviceIdLastLatLng = new HashMap&lt;&gt;();\r\n        //        deviceIdSmallMarkerInfo = new HashMap&lt;&gt;();\r\n\r\n       \r\n\r\n        SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager()\r\n                .findFragmentById(R.id.map);\r\n        mapFragment.getMapAsync(this);\r\n    }\r\n\r\n    @Override\r\n    protected void onResume()\r\n    {\r\n        super.onResume();\r\n        timer = new Timer();\r\n        timer.schedule(new TimerTask()\r\n        {\r\n            @Override\r\n            public void run()\r\n            {\r\n                runOnUiThread(new Runnable()\r\n                {\r\n                    @Override\r\n                    public void run()\r\n                    {\r\n                        float timeleft = 10 - Math.round(System.currentTimeMillis() - lastRefreshTime) / 1000f;\r\n                        if (timeleft &lt; 0)\r\n                            timeleft = 0;\r\n                        updatetimer.setText(String.format(&quot;%.0f&quot;, timeleft));\r\n                        if (System.currentTimeMillis() - lastRefreshTime &gt;= 10 * 1000)\r\n                            if (map != null)\r\n                                refresh();\r\n                    }\r\n                });\r\n            }\r\n        }, 0, 1000);\r\n    }\r\n\r\n    @Override\r\n    protected void onPause()\r\n    {\r\n        super.onPause();\r\n        try\r\n        {\r\n            timer.cancel();\r\n            timer.purge();\r\n            downloadingAsync.cancel(true);\r\n        } catch (Exception e)\r\n        {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    private void refresh()\r\n    {\r\n        if (isRefreshLoced)\r\n            return;\r\n        isRefreshLoced = true;\r\n        lastRefreshTime = System.currentTimeMillis();\r\n        final String api_key = (String) DataSaver.getInstance(this).load(&quot;api_key&quot;);\r\n        API.getApiInterface(this).getDevices(api_key, getResources().getString(R.string.lang), new Callback&lt;ArrayList&lt;ApiInterface.GetDevicesItem&gt;&gt;()\r\n        {\r\n            @Override\r\n            public void success(final ArrayList&lt;ApiInterface.GetDevicesItem&gt; getDevicesItems, Response response)\r\n            {\r\n                Log.d(TAG, &quot;success: loaded devices array&quot;);\r\n                final ArrayList&lt;Device&gt; allDevices = new ArrayList&lt;&gt;();\r\n                if (getDevicesItems != null)\r\n                    for (ApiInterface.GetDevicesItem item : getDevicesItems)\r\n                        allDevices.addAll(item.items);\r\n                API.getApiInterface(MapActivity.this).getFieldsDataForEditing(api_key, getResources().getString(R.string.lang), 1, new Callback&lt;ApiInterface.GetFieldsDataForEditingResult&gt;()\r\n                {\r\n                    @Override\r\n                    public void success(final ApiInterface.GetFieldsDataForEditingResult getFieldsDataForEditingResult, Response response)\r\n                    {\r\n                        Log.d(TAG, &quot;success: loaded icons&quot;);\r\n                        downloadingAsync = new AsyncTask&lt;Void, Void, Void&gt;()\r\n                        {\r\n                            ArrayList&lt;MarkerOptions&gt; markers;\r\n                            ArrayList&lt;Integer&gt; deviceIds;\r\n\r\n                            @Override\r\n                            protected Void doInBackground(Void... params)\r\n                            {\r\n                                // add markers\r\n                                int dp100 = Utils.dpToPx(MapActivity.this, 50);\r\n                                markers = new ArrayList&lt;&gt;();\r\n                                deviceIds = new ArrayList&lt;&gt;();\r\n                                if (getFieldsDataForEditingResult == null || getFieldsDataForEditingResult.device_icons == null)\r\n                                    return null;\r\n                                for (Device item : allDevices)\r\n                                {\r\n                                    if (isCancelled())\r\n                                        break;\r\n                                    if (item.device_data.active == 1)\r\n                                    {\r\n                                        // iekom ikonos masyve\r\n                                        DeviceIcon mapIcon = null;\r\n                                        for (DeviceIcon icon : getFieldsDataForEditingResult.device_icons)\r\n                                            if (item.device_data.icon_id == icon.id)\r\n                                                mapIcon = icon;\r\n\r\n                                        String server_base = (String) DataSaver.getInstance(MapActivity.this).load(&quot;server_base&quot;);\r\n\r\n                                        try\r\n                                        {\r\n                                            Log.d(&quot;MapActivity&quot;, &quot;DOWNLOADING BITMAP: &quot; + server_base + mapIcon.path);\r\n                                            Bitmap bmp = BitmapFactory.decodeStream(new URL(server_base + mapIcon.path).openConnection().getInputStream());\r\n\r\n                                            int srcWidth = bmp.getWidth();\r\n                                            int srcHeight = bmp.getHeight();\r\n\r\n                                            int maxWidth = Utils.dpToPx(MapActivity.this, mapIcon.width);\r\n                                            int maxHeight = Utils.dpToPx(MapActivity.this, mapIcon.height);\r\n\r\n                                            float ratio = Math.min((float) maxWidth / (float) srcWidth, (float) maxHeight / (float) srcHeight);\r\n                                            int dstWidth = (int) (srcWidth * ratio);\r\n                                            int dstHeight = (int) (srcHeight * ratio);\r\n\r\n                                            bmp = bmp.createScaledBitmap(bmp, dp100, dp100, true);\r\n\r\n                                            // marker\r\n\r\n                                            MarkerOptions m = new MarkerOptions();\r\n                                            m.position(new LatLng(item.lat, item.lng));\r\n                                            //                                            marker.setAnchor(Marker.ANCHOR_CENTER, Marker.ANCHOR_BOTTOM);\r\n                                            //                                            marker.setIcon(new BitmapDrawable(getResources(), Bitmap.createScaledBitmap(bmp, dstWidth, dstHeight, true)));\r\n                                            m.icon(BitmapDescriptorFactory.fromBitmap(Bitmap.createScaledBitmap(bmp, dstWidth, dstHeight, true)));\r\n\r\n                                            // info window\r\n                                            //                                            MapMarkerInfoWindow infoWindow = new MapMarkerInfoWindow(MapActivity.this, item, R.layout.layout_map_infowindow, map);\r\n                                            //                                            marker.setInfoWindow(infoWindow);\r\n\r\n                                            markers.add(m);\r\n                                            deviceIds.add(item.id);\r\n                                        } catch (OutOfMemoryError outOfMemoryError)\r\n                                        {\r\n                                            Toast.makeText(MapActivity.this, &quot;Out of memory! Too many devices are selected to be displayed&quot;, Toast.LENGTH_LONG).show();\r\n                                        } catch (Exception e)\r\n                                        {\r\n                                            e.printStackTrace();\r\n                                        }\r\n                                    }\r\n                                }\r\n                                return null;\r\n                            }\r\n\r\n                            @Override\r\n                            protected void onPostExecute(Void aVoid)\r\n                            {\r\n                                ArrayList&lt;GeoPoint&gt; points = new ArrayList&lt;&gt;();\r\n\r\n                                if (autoZoomedTimes &lt; 1)\r\n                                {\r\n                                    new Handler().postDelayed(new Runnable()\r\n                                    {\r\n                                        @Override\r\n                                        public void run()\r\n                                        {\r\n                                            runOnUiThread(new Runnable()\r\n                                            {\r\n                                                @Override\r\n                                                public void run()\r\n                                                {\r\n                                                    if (markers.size() &gt; 1)\r\n                                                    {\r\n                                                        try\r\n                                                        {\r\n                                                            LatLngBounds.Builder builder = new LatLngBounds.Builder();\r\n                                                            for (MarkerOptions item : markers)\r\n                                                                builder.include(item.getPosition());\r\n                                                            LatLngBounds bounds = builder.build();\r\n                                                            //                                int padding = 0; // offset from edges of the map in pixels\r\n                                                            CameraUpdate cu = CameraUpdateFactory.newLatLngBounds(bounds, Utils.dpToPx(MapActivity.this, 50));\r\n                                                            map.animateCamera(cu);\r\n                                                        } catch (Exception e)\r\n                                                        {\r\n\r\n                                                        }\r\n                                                    } else if (markers.size() &gt; 0)\r\n                                                    {\r\n                                                        map.moveCamera(CameraUpdateFactory.newLatLngZoom(markers.get(0).getPosition(), 15));\r\n                                                    }\r\n                                                    autoZoomedTimes++;\r\n                                                }\r\n                                            });\r\n                                        }\r\n                                    }, 50);\r\n                                } else if (isAutoZoomEnabled)\r\n                                {\r\n                                    if (markers.size() &gt; 1)\r\n                                    {\r\n                                        try\r\n                                        {\r\n                                            LatLngBounds.Builder builder = new LatLngBounds.Builder();\r\n                                            for (MarkerOptions item : markers)\r\n                                                builder.include(item.getPosition());\r\n                                            LatLngBounds bounds = builder.build();\r\n                                            //                                int padding = 0; // offset from edges of the map in pixels\r\n                                            CameraUpdate cu = CameraUpdateFactory.newLatLngBounds(bounds, Utils.dpToPx(MapActivity.this, 50));\r\n                                            map.animateCamera(cu);\r\n                                        } catch (Exception e)\r\n                                        {\r\n\r\n                                        }\r\n                                    } else if (markers.size() &gt; 0)\r\n                                    {\r\n                                        map.moveCamera(CameraUpdateFactory.newLatLngZoom(markers.get(0).getPosition(), 15));\r\n                                    }\r\n                                    autoZoomedTimes++;\r\n                                }\r\n\r\n                                Log.d(TAG, &quot;onPostExecute: icons downloaded and added to map, total markers: &quot; + markers.size());\r\n\r\n                                loading_layout.setVisibility(View.GONE);\r\n                                if (markers.size() != 0)\r\n                                    content_layout.setVisibility(View.VISIBLE);\r\n                                else\r\n                                    nodata_layout.setVisibility(View.VISIBLE);\r\n\r\n                                for (int i = 0; i &lt; markers.size(); i++)\r\n                                {\r\n                                    MarkerOptions options = markers.get(i);\r\n                                    int deviceId = deviceIds.get(i);\r\n\r\n                                    Marker m;\r\n\r\n                                    Polyline polyline;\r\n                                    if (deviceIdMarkers.containsKey(deviceId))\r\n                                    {\r\n                                        Log.d(&quot;aa&quot;, &quot;moving to&quot; + options.getPosition());\r\n                                        deviceIdMarkers.get(deviceId).setPosition(new LatLng(options.getPosition().latitude, options.getPosition().longitude));\r\n                                        m = deviceIdMarkers.get(deviceId);\r\n\r\n                                        polyline = deviceIdPolyline.get(deviceId);\r\n                                    } else\r\n                                    {\r\n                                        Log.d(&quot;aa&quot;, &quot;putting new&quot;);\r\n                                        m = map.addMarker(options);\r\n                                        deviceIdMarkers.put(deviceId, m);\r\n                                        polyline = map.addPolyline(new PolylineOptions());\r\n                                        deviceIdPolyline.put(deviceId, polyline);\r\n                                    }\r\n\r\n                                    Device thatonedevice = null;\r\n                                    for (Device device : allDevices)\r\n                                        if (device.id == deviceId)\r\n                                            thatonedevice = device;\r\n                                    markerIdDevices.put(m.getId(), thatonedevice);\r\n\r\n\r\n                                    // update marker rotation based on driving direction\r\n                                    if (thatonedevice != null &amp;&amp; deviceIdLastLatLng.containsKey(deviceId))\r\n                                    {\r\n                                        double dirLat = thatonedevice.lat - deviceIdLastLatLng.get(deviceId).latitude;\r\n                                        double dirLng = thatonedevice.lng - deviceIdLastLatLng.get(deviceId).longitude;\r\n\r\n                                        m.setRotation((float) Math.toDegrees(Math.atan2(dirLng, dirLat)));\r\n                                    }\r\n                                    deviceIdLastLatLng.put(deviceId, new LatLng(thatonedevice.lat, thatonedevice.lng));\r\n\r\n                                    List&lt;LatLng&gt; polylinePoints = new ArrayList&lt;&gt;();\r\n                                    for (TailItem item : thatonedevice.tail)\r\n                                        polylinePoints.add(new LatLng(Double.valueOf(item.lat), Double.valueOf(item.lng)));\r\n                                    polyline.setPoints(polylinePoints);\r\n                                    polyline.setWidth(Utils.dpToPx(MapActivity.this, 2));\r\n                                    polyline.setColor(Color.parseColor(thatonedevice.device_data.tail_color));\r\n                                }\r\n\r\n\r\n                                // else\r\n\r\n                                map.setInfoWindowAdapter(new GoogleMap.InfoWindowAdapter()\r\n                                {\r\n                                    @Override\r\n                                    public View getInfoWindow(Marker marker)\r\n                                    {\r\n                                        return null;\r\n                                    }\r\n\r\n                                    @Override\r\n                                    public View getInfoContents(final Marker marker)\r\n                                    {\r\n                                        synchronized (this)\r\n                                        {\r\n\r\n                                        }\r\n                                        final Device device = markerIdDevices.get(marker.getId());\r\n                                        if (device != null)\r\n                                        {\r\n                                            View view = getLayoutInflater().inflate(R.layout.layout_map_infowindow, null);\r\n                                            view.bringToFront();\r\n                                            view.findViewById(R.id.close).setOnClickListener(new View.OnClickListener()\r\n                                            {\r\n                                                @Override\r\n                                                public void onClick(View v)\r\n                                                {\r\n                                                    marker.hideInfoWindow();\r\n                                                }\r\n                                            });\r\n                                            TextView device_name = (TextView) view.findViewById(R.id.device_name);\r\n                                            device_name.setText(device.name);\r\n                                            TextView altitude = (TextView) view.findViewById(R.id.altitude);\r\n                                            altitude.setText(String.valueOf(device.altitude) + &quot; &quot; + device.unit_of_altitude);\r\n                                            TextView time = (TextView) view.findViewById(R.id.time);\r\n                                            time.setText(device.time);\r\n                                            TextView stopTimeView = (TextView) view.findViewById(R.id.stopTime);\r\n                                            stopTimeView.setText(stopTime);\r\n                                            TextView speed = (TextView) view.findViewById(R.id.speed);\r\n                                            speed.setText(device.speed + &quot; &quot; + device.distance_unit_hour);\r\n                                            TextView address = (TextView) view.findViewById(R.id.address);\r\n                                            address.setText(device.address);\r\n\r\n                                            final ArrayList&lt;Sensor&gt; showableSensors = new ArrayList&lt;&gt;();\r\n                                            for (Sensor item : device.sensors)\r\n                                                if (item.show_in_popup &gt; 0)\r\n                                                    showableSensors.add(item);\r\n\r\n                                            ListView sensors_list = (ListView) view.findViewById(R.id.sensors_list);\r\n                                            sensors_list.setAdapter(new AwesomeAdapter&lt;Sensor&gt;(MapActivity.this)\r\n                                            {\r\n                                                @Override\r\n                                                public int getCount()\r\n                                                {\r\n                                                    return showableSensors.size();\r\n                                                }\r\n\r\n                                                @NonNull\r\n                                                @Override\r\n                                                public View getView(int position, View convertView, @NonNull ViewGroup parent)\r\n                                                {\r\n                                                    if (convertView == null)\r\n                                                        convertView = getLayoutInflater().inflate(R.layout.adapter_map_sensorslist, null);\r\n\r\n                                                    Sensor item = showableSensors.get(position);\r\n                                                    TextView name = (TextView) convertView.findViewById(R.id.name);\r\n                                                    name.setText(item.name);\r\n                                                    TextView value = (TextView) convertView.findViewById(R.id.value);\r\n                                                    value.setText(item.value);\r\n                                                    return convertView;\r\n                                                }\r\n                                            });\r\n\r\n                                            List&lt;Address&gt; addresses;\r\n                                            try\r\n                                            {\r\n                                                addresses = new Geocoder(MapActivity.this).getFromLocation(device.lat, device.lng, 1);\r\n                                                if (addresses.size() &gt; 0)\r\n                                                    address.setText(addresses.get(0).getAddressLine(0));\r\n                                            } catch (IOException e)\r\n                                            {\r\n                                                e.printStackTrace();\r\n                                            }\r\n\r\n                                            return view;\r\n                                        }\r\n                                        return null;\r\n                                    }\r\n                                });\r\n                                map.setOnMarkerClickListener(new GoogleMap.OnMarkerClickListener()\r\n                                {\r\n                                    @Override\r\n                                    public boolean onMarkerClick(final Marker marker)\r\n                                    {\r\n                                        int px = Utils.dpToPx(MapActivity.this, 300);\r\n                                        map.setPadding(0, px, 0, 0);\r\n                                        stopTime = &quot;...&quot;;\r\n                                        final Device device = markerIdDevices.get(marker.getId());\r\n                                        if (device != null)\r\n                                        {\r\n                                            API.getApiInterface(MapActivity.this).deviceStopTime((String) DataSaver.getInstance(MapActivity.this).load(&quot;api_key&quot;), &quot;en&quot;, device.id, new Callback&lt;ApiInterface.DeviceStopTimeResult&gt;()\r\n                                            {\r\n                                                @Override\r\n                                                public void success(ApiInterface.DeviceStopTimeResult result, Response response)\r\n                                                {\r\n                                                    stopTime = result.time;\r\n                                                    marker.showInfoWindow();\r\n                                                }\r\n\r\n                                                @Override\r\n                                                public void failure(RetrofitError retrofitError)\r\n                                                {\r\n                                                    Toast.makeText(MapActivity.this, R.string.errorHappened, Toast.LENGTH_SHORT).show();\r\n                                                }\r\n                                            });\r\n                                        }\r\n\r\n                                        return false;\r\n                                    }\r\n                                });\r\n                                map.setOnInfoWindowClickListener(new GoogleMap.OnInfoWindowClickListener()\r\n                                {\r\n                                    @Override\r\n                                    public void onInfoWindowClick(Marker marker)\r\n                                    {\r\n                                        marker.hideInfoWindow();\r\n                                    }\r\n                                });\r\n\r\n                                map.setOnInfoWindowCloseListener(new GoogleMap.OnInfoWindowCloseListener()\r\n                                {\r\n                                    @Override\r\n                                    public void onInfoWindowClose(Marker marker)\r\n                                    {\r\n                                        map.setPadding(0, 0, 0, 0);\r\n                                    }\r\n                                });\r\n\r\n                                //                                updateSmallMarkerData(allDevices);\r\n                                isRefreshLoced = false;\r\n                            }\r\n                        }.execute();\r\n                    }\r\n\r\n                    @Override\r\n                    public void failure(RetrofitError retrofitError)\r\n                    {\r\n                        Toast.makeText(MapActivity.this, R.string.errorHappened, Toast.LENGTH_SHORT).show();\r\n                        isRefreshLoced = false;\r\n                    }\r\n                });\r\n            }\r\n\r\n            @Override\r\n            public void failure(RetrofitError retrofitError)\r\n            {\r\n                Toast.makeText(MapActivity.this, R.string.errorHappened, Toast.LENGTH_SHORT).show();\r\n                isRefreshLoced = false;\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public void onMapReady(GoogleMap googleMap)\r\n    {\r\n        map = googleMap;\r\n        refresh();\r\n    }\r\n```\r\n\r\n\r\nthis MapActivity is slow to load, could you teach me a way to make it goes faster?\r\nBest regard :)\r\nwaiting for your propositions.\r\nPS: i have removed some functions to make the code look short but i kept the most important in is case.","title":"my app is crashing when there is no internet and i want my markers or my map to refresh each second","body":"<p>i made a googlemap app where my markers are displyed.\nthe problem is when there no internet, the app is crashing. The code under onResume does not solve the problem.\nalso i want to refresh the map or markers each second on the map.\nif you have any ideas please i am here to learn from all of you.</p>\n<p>here is my MapActivity code :</p>\n<pre><code>public class MapActivity extends AppCompatActivity implements OnMapReadyCallback\n{\n    private static final String TAG = &quot;MapActivity&quot;;\n    @Bind(R.id.back)\n    View back;\n    @Bind(R.id.zoom_in)\n    View zoom_in;\n    @Bind(R.id.zoom_out)\n    View zoom_out;\n    @Bind(R.id.updatetimer)\n    TextView updatetimer;\n    @Bind(R.id.autozoom)\n    ImageView autozoom;\n    @Bind(R.id.showtails)\n    ImageView showtails;\n    @Bind(R.id.geofences)\n    ImageView showGeofences;\n    @Bind(R.id.map_layer)\n    ImageView map_layer_icon;\n    private GoogleMap map;\n\n    @Bind(R.id.content_layout)\n    View content_layout;\n    @Bind(R.id.loading_layout)\n    View loading_layout;\n    @Bind(R.id.nodata_layout)\n    View nodata_layout;\n    private Timer timer;\n    private int autoZoomedTimes = 0;// dl bugo osmdroid library, zoom'inam du kartus ir paskui po refresh'o nebe, nes greiiausiai user'is bus pakeits zoom'\n\n    private HashMap&lt;Integer, Marker&gt; deviceIdMarkers;\n    private HashMap&lt;String, Device&gt; markerIdDevices;\n    private HashMap&lt;Integer, Polyline&gt; deviceIdPolyline;\n    private HashMap&lt;Integer, LatLng&gt; deviceIdLastLatLng;\n    //    private HashMap&lt;Integer, Marker&gt; deviceIdSmallMarkerInfo;\n    private long lastRefreshTime;\n    boolean isAutoZoomEnabled = true;\n    boolean isShowTitlesEnabled;\n    boolean isShowTailsEnabled = true;\n    boolean isShowGeofencesEnabled = true;\n    private String stopTime;\n    private AsyncTask downloadingAsync;\n\n    private boolean isRefreshLoced = false;\n\n    ApiInterface.GetGeofencesResult geofencesResult;\n    ArrayList&lt;PolygonWithName&gt; polygonsWithDetails = new ArrayList&lt;&gt;();\n    float previousZoomLevel = 0;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState)\n    {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_map);\n        ButterKnife.bind(this);\n        deviceIdMarkers = new HashMap&lt;&gt;();\n        markerIdDevices = new HashMap&lt;&gt;();\n        deviceIdPolyline = new HashMap&lt;&gt;();\n        deviceIdLastLatLng = new HashMap&lt;&gt;();\n        //        deviceIdSmallMarkerInfo = new HashMap&lt;&gt;();\n\n       \n\n        SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager()\n                .findFragmentById(R.id.map);\n        mapFragment.getMapAsync(this);\n    }\n\n    @Override\n    protected void onResume()\n    {\n        super.onResume();\n        timer = new Timer();\n        timer.schedule(new TimerTask()\n        {\n            @Override\n            public void run()\n            {\n                runOnUiThread(new Runnable()\n                {\n                    @Override\n                    public void run()\n                    {\n                        float timeleft = 10 - Math.round(System.currentTimeMillis() - lastRefreshTime) / 1000f;\n                        if (timeleft &lt; 0)\n                            timeleft = 0;\n                        updatetimer.setText(String.format(&quot;%.0f&quot;, timeleft));\n                        if (System.currentTimeMillis() - lastRefreshTime &gt;= 10 * 1000)\n                            if (map != null)\n                                refresh();\n                    }\n                });\n            }\n        }, 0, 1000);\n    }\n\n    @Override\n    protected void onPause()\n    {\n        super.onPause();\n        try\n        {\n            timer.cancel();\n            timer.purge();\n            downloadingAsync.cancel(true);\n        } catch (Exception e)\n        {\n            e.printStackTrace();\n        }\n    }\n\n    private void refresh()\n    {\n        if (isRefreshLoced)\n            return;\n        isRefreshLoced = true;\n        lastRefreshTime = System.currentTimeMillis();\n        final String api_key = (String) DataSaver.getInstance(this).load(&quot;api_key&quot;);\n        API.getApiInterface(this).getDevices(api_key, getResources().getString(R.string.lang), new Callback&lt;ArrayList&lt;ApiInterface.GetDevicesItem&gt;&gt;()\n        {\n            @Override\n            public void success(final ArrayList&lt;ApiInterface.GetDevicesItem&gt; getDevicesItems, Response response)\n            {\n                Log.d(TAG, &quot;success: loaded devices array&quot;);\n                final ArrayList&lt;Device&gt; allDevices = new ArrayList&lt;&gt;();\n                if (getDevicesItems != null)\n                    for (ApiInterface.GetDevicesItem item : getDevicesItems)\n                        allDevices.addAll(item.items);\n                API.getApiInterface(MapActivity.this).getFieldsDataForEditing(api_key, getResources().getString(R.string.lang), 1, new Callback&lt;ApiInterface.GetFieldsDataForEditingResult&gt;()\n                {\n                    @Override\n                    public void success(final ApiInterface.GetFieldsDataForEditingResult getFieldsDataForEditingResult, Response response)\n                    {\n                        Log.d(TAG, &quot;success: loaded icons&quot;);\n                        downloadingAsync = new AsyncTask&lt;Void, Void, Void&gt;()\n                        {\n                            ArrayList&lt;MarkerOptions&gt; markers;\n                            ArrayList&lt;Integer&gt; deviceIds;\n\n                            @Override\n                            protected Void doInBackground(Void... params)\n                            {\n                                // add markers\n                                int dp100 = Utils.dpToPx(MapActivity.this, 50);\n                                markers = new ArrayList&lt;&gt;();\n                                deviceIds = new ArrayList&lt;&gt;();\n                                if (getFieldsDataForEditingResult == null || getFieldsDataForEditingResult.device_icons == null)\n                                    return null;\n                                for (Device item : allDevices)\n                                {\n                                    if (isCancelled())\n                                        break;\n                                    if (item.device_data.active == 1)\n                                    {\n                                        // iekom ikonos masyve\n                                        DeviceIcon mapIcon = null;\n                                        for (DeviceIcon icon : getFieldsDataForEditingResult.device_icons)\n                                            if (item.device_data.icon_id == icon.id)\n                                                mapIcon = icon;\n\n                                        String server_base = (String) DataSaver.getInstance(MapActivity.this).load(&quot;server_base&quot;);\n\n                                        try\n                                        {\n                                            Log.d(&quot;MapActivity&quot;, &quot;DOWNLOADING BITMAP: &quot; + server_base + mapIcon.path);\n                                            Bitmap bmp = BitmapFactory.decodeStream(new URL(server_base + mapIcon.path).openConnection().getInputStream());\n\n                                            int srcWidth = bmp.getWidth();\n                                            int srcHeight = bmp.getHeight();\n\n                                            int maxWidth = Utils.dpToPx(MapActivity.this, mapIcon.width);\n                                            int maxHeight = Utils.dpToPx(MapActivity.this, mapIcon.height);\n\n                                            float ratio = Math.min((float) maxWidth / (float) srcWidth, (float) maxHeight / (float) srcHeight);\n                                            int dstWidth = (int) (srcWidth * ratio);\n                                            int dstHeight = (int) (srcHeight * ratio);\n\n                                            bmp = bmp.createScaledBitmap(bmp, dp100, dp100, true);\n\n                                            // marker\n\n                                            MarkerOptions m = new MarkerOptions();\n                                            m.position(new LatLng(item.lat, item.lng));\n                                            //                                            marker.setAnchor(Marker.ANCHOR_CENTER, Marker.ANCHOR_BOTTOM);\n                                            //                                            marker.setIcon(new BitmapDrawable(getResources(), Bitmap.createScaledBitmap(bmp, dstWidth, dstHeight, true)));\n                                            m.icon(BitmapDescriptorFactory.fromBitmap(Bitmap.createScaledBitmap(bmp, dstWidth, dstHeight, true)));\n\n                                            // info window\n                                            //                                            MapMarkerInfoWindow infoWindow = new MapMarkerInfoWindow(MapActivity.this, item, R.layout.layout_map_infowindow, map);\n                                            //                                            marker.setInfoWindow(infoWindow);\n\n                                            markers.add(m);\n                                            deviceIds.add(item.id);\n                                        } catch (OutOfMemoryError outOfMemoryError)\n                                        {\n                                            Toast.makeText(MapActivity.this, &quot;Out of memory! Too many devices are selected to be displayed&quot;, Toast.LENGTH_LONG).show();\n                                        } catch (Exception e)\n                                        {\n                                            e.printStackTrace();\n                                        }\n                                    }\n                                }\n                                return null;\n                            }\n\n                            @Override\n                            protected void onPostExecute(Void aVoid)\n                            {\n                                ArrayList&lt;GeoPoint&gt; points = new ArrayList&lt;&gt;();\n\n                                if (autoZoomedTimes &lt; 1)\n                                {\n                                    new Handler().postDelayed(new Runnable()\n                                    {\n                                        @Override\n                                        public void run()\n                                        {\n                                            runOnUiThread(new Runnable()\n                                            {\n                                                @Override\n                                                public void run()\n                                                {\n                                                    if (markers.size() &gt; 1)\n                                                    {\n                                                        try\n                                                        {\n                                                            LatLngBounds.Builder builder = new LatLngBounds.Builder();\n                                                            for (MarkerOptions item : markers)\n                                                                builder.include(item.getPosition());\n                                                            LatLngBounds bounds = builder.build();\n                                                            //                                int padding = 0; // offset from edges of the map in pixels\n                                                            CameraUpdate cu = CameraUpdateFactory.newLatLngBounds(bounds, Utils.dpToPx(MapActivity.this, 50));\n                                                            map.animateCamera(cu);\n                                                        } catch (Exception e)\n                                                        {\n\n                                                        }\n                                                    } else if (markers.size() &gt; 0)\n                                                    {\n                                                        map.moveCamera(CameraUpdateFactory.newLatLngZoom(markers.get(0).getPosition(), 15));\n                                                    }\n                                                    autoZoomedTimes++;\n                                                }\n                                            });\n                                        }\n                                    }, 50);\n                                } else if (isAutoZoomEnabled)\n                                {\n                                    if (markers.size() &gt; 1)\n                                    {\n                                        try\n                                        {\n                                            LatLngBounds.Builder builder = new LatLngBounds.Builder();\n                                            for (MarkerOptions item : markers)\n                                                builder.include(item.getPosition());\n                                            LatLngBounds bounds = builder.build();\n                                            //                                int padding = 0; // offset from edges of the map in pixels\n                                            CameraUpdate cu = CameraUpdateFactory.newLatLngBounds(bounds, Utils.dpToPx(MapActivity.this, 50));\n                                            map.animateCamera(cu);\n                                        } catch (Exception e)\n                                        {\n\n                                        }\n                                    } else if (markers.size() &gt; 0)\n                                    {\n                                        map.moveCamera(CameraUpdateFactory.newLatLngZoom(markers.get(0).getPosition(), 15));\n                                    }\n                                    autoZoomedTimes++;\n                                }\n\n                                Log.d(TAG, &quot;onPostExecute: icons downloaded and added to map, total markers: &quot; + markers.size());\n\n                                loading_layout.setVisibility(View.GONE);\n                                if (markers.size() != 0)\n                                    content_layout.setVisibility(View.VISIBLE);\n                                else\n                                    nodata_layout.setVisibility(View.VISIBLE);\n\n                                for (int i = 0; i &lt; markers.size(); i++)\n                                {\n                                    MarkerOptions options = markers.get(i);\n                                    int deviceId = deviceIds.get(i);\n\n                                    Marker m;\n\n                                    Polyline polyline;\n                                    if (deviceIdMarkers.containsKey(deviceId))\n                                    {\n                                        Log.d(&quot;aa&quot;, &quot;moving to&quot; + options.getPosition());\n                                        deviceIdMarkers.get(deviceId).setPosition(new LatLng(options.getPosition().latitude, options.getPosition().longitude));\n                                        m = deviceIdMarkers.get(deviceId);\n\n                                        polyline = deviceIdPolyline.get(deviceId);\n                                    } else\n                                    {\n                                        Log.d(&quot;aa&quot;, &quot;putting new&quot;);\n                                        m = map.addMarker(options);\n                                        deviceIdMarkers.put(deviceId, m);\n                                        polyline = map.addPolyline(new PolylineOptions());\n                                        deviceIdPolyline.put(deviceId, polyline);\n                                    }\n\n                                    Device thatonedevice = null;\n                                    for (Device device : allDevices)\n                                        if (device.id == deviceId)\n                                            thatonedevice = device;\n                                    markerIdDevices.put(m.getId(), thatonedevice);\n\n\n                                    // update marker rotation based on driving direction\n                                    if (thatonedevice != null &amp;&amp; deviceIdLastLatLng.containsKey(deviceId))\n                                    {\n                                        double dirLat = thatonedevice.lat - deviceIdLastLatLng.get(deviceId).latitude;\n                                        double dirLng = thatonedevice.lng - deviceIdLastLatLng.get(deviceId).longitude;\n\n                                        m.setRotation((float) Math.toDegrees(Math.atan2(dirLng, dirLat)));\n                                    }\n                                    deviceIdLastLatLng.put(deviceId, new LatLng(thatonedevice.lat, thatonedevice.lng));\n\n                                    List&lt;LatLng&gt; polylinePoints = new ArrayList&lt;&gt;();\n                                    for (TailItem item : thatonedevice.tail)\n                                        polylinePoints.add(new LatLng(Double.valueOf(item.lat), Double.valueOf(item.lng)));\n                                    polyline.setPoints(polylinePoints);\n                                    polyline.setWidth(Utils.dpToPx(MapActivity.this, 2));\n                                    polyline.setColor(Color.parseColor(thatonedevice.device_data.tail_color));\n                                }\n\n\n                                // else\n\n                                map.setInfoWindowAdapter(new GoogleMap.InfoWindowAdapter()\n                                {\n                                    @Override\n                                    public View getInfoWindow(Marker marker)\n                                    {\n                                        return null;\n                                    }\n\n                                    @Override\n                                    public View getInfoContents(final Marker marker)\n                                    {\n                                        synchronized (this)\n                                        {\n\n                                        }\n                                        final Device device = markerIdDevices.get(marker.getId());\n                                        if (device != null)\n                                        {\n                                            View view = getLayoutInflater().inflate(R.layout.layout_map_infowindow, null);\n                                            view.bringToFront();\n                                            view.findViewById(R.id.close).setOnClickListener(new View.OnClickListener()\n                                            {\n                                                @Override\n                                                public void onClick(View v)\n                                                {\n                                                    marker.hideInfoWindow();\n                                                }\n                                            });\n                                            TextView device_name = (TextView) view.findViewById(R.id.device_name);\n                                            device_name.setText(device.name);\n                                            TextView altitude = (TextView) view.findViewById(R.id.altitude);\n                                            altitude.setText(String.valueOf(device.altitude) + &quot; &quot; + device.unit_of_altitude);\n                                            TextView time = (TextView) view.findViewById(R.id.time);\n                                            time.setText(device.time);\n                                            TextView stopTimeView = (TextView) view.findViewById(R.id.stopTime);\n                                            stopTimeView.setText(stopTime);\n                                            TextView speed = (TextView) view.findViewById(R.id.speed);\n                                            speed.setText(device.speed + &quot; &quot; + device.distance_unit_hour);\n                                            TextView address = (TextView) view.findViewById(R.id.address);\n                                            address.setText(device.address);\n\n                                            final ArrayList&lt;Sensor&gt; showableSensors = new ArrayList&lt;&gt;();\n                                            for (Sensor item : device.sensors)\n                                                if (item.show_in_popup &gt; 0)\n                                                    showableSensors.add(item);\n\n                                            ListView sensors_list = (ListView) view.findViewById(R.id.sensors_list);\n                                            sensors_list.setAdapter(new AwesomeAdapter&lt;Sensor&gt;(MapActivity.this)\n                                            {\n                                                @Override\n                                                public int getCount()\n                                                {\n                                                    return showableSensors.size();\n                                                }\n\n                                                @NonNull\n                                                @Override\n                                                public View getView(int position, View convertView, @NonNull ViewGroup parent)\n                                                {\n                                                    if (convertView == null)\n                                                        convertView = getLayoutInflater().inflate(R.layout.adapter_map_sensorslist, null);\n\n                                                    Sensor item = showableSensors.get(position);\n                                                    TextView name = (TextView) convertView.findViewById(R.id.name);\n                                                    name.setText(item.name);\n                                                    TextView value = (TextView) convertView.findViewById(R.id.value);\n                                                    value.setText(item.value);\n                                                    return convertView;\n                                                }\n                                            });\n\n                                            List&lt;Address&gt; addresses;\n                                            try\n                                            {\n                                                addresses = new Geocoder(MapActivity.this).getFromLocation(device.lat, device.lng, 1);\n                                                if (addresses.size() &gt; 0)\n                                                    address.setText(addresses.get(0).getAddressLine(0));\n                                            } catch (IOException e)\n                                            {\n                                                e.printStackTrace();\n                                            }\n\n                                            return view;\n                                        }\n                                        return null;\n                                    }\n                                });\n                                map.setOnMarkerClickListener(new GoogleMap.OnMarkerClickListener()\n                                {\n                                    @Override\n                                    public boolean onMarkerClick(final Marker marker)\n                                    {\n                                        int px = Utils.dpToPx(MapActivity.this, 300);\n                                        map.setPadding(0, px, 0, 0);\n                                        stopTime = &quot;...&quot;;\n                                        final Device device = markerIdDevices.get(marker.getId());\n                                        if (device != null)\n                                        {\n                                            API.getApiInterface(MapActivity.this).deviceStopTime((String) DataSaver.getInstance(MapActivity.this).load(&quot;api_key&quot;), &quot;en&quot;, device.id, new Callback&lt;ApiInterface.DeviceStopTimeResult&gt;()\n                                            {\n                                                @Override\n                                                public void success(ApiInterface.DeviceStopTimeResult result, Response response)\n                                                {\n                                                    stopTime = result.time;\n                                                    marker.showInfoWindow();\n                                                }\n\n                                                @Override\n                                                public void failure(RetrofitError retrofitError)\n                                                {\n                                                    Toast.makeText(MapActivity.this, R.string.errorHappened, Toast.LENGTH_SHORT).show();\n                                                }\n                                            });\n                                        }\n\n                                        return false;\n                                    }\n                                });\n                                map.setOnInfoWindowClickListener(new GoogleMap.OnInfoWindowClickListener()\n                                {\n                                    @Override\n                                    public void onInfoWindowClick(Marker marker)\n                                    {\n                                        marker.hideInfoWindow();\n                                    }\n                                });\n\n                                map.setOnInfoWindowCloseListener(new GoogleMap.OnInfoWindowCloseListener()\n                                {\n                                    @Override\n                                    public void onInfoWindowClose(Marker marker)\n                                    {\n                                        map.setPadding(0, 0, 0, 0);\n                                    }\n                                });\n\n                                //                                updateSmallMarkerData(allDevices);\n                                isRefreshLoced = false;\n                            }\n                        }.execute();\n                    }\n\n                    @Override\n                    public void failure(RetrofitError retrofitError)\n                    {\n                        Toast.makeText(MapActivity.this, R.string.errorHappened, Toast.LENGTH_SHORT).show();\n                        isRefreshLoced = false;\n                    }\n                });\n            }\n\n            @Override\n            public void failure(RetrofitError retrofitError)\n            {\n                Toast.makeText(MapActivity.this, R.string.errorHappened, Toast.LENGTH_SHORT).show();\n                isRefreshLoced = false;\n            }\n        });\n    }\n\n    @Override\n    public void onMapReady(GoogleMap googleMap)\n    {\n        map = googleMap;\n        refresh();\n    }\n</code></pre>\n<p>this MapActivity is slow to load, could you teach me a way to make it goes faster?\nBest regard :)\nwaiting for your propositions.\nPS: i have removed some functions to make the code look short but i kept the most important in is case.</p>\n"},{"tags":["java","spring-boot","log4j","logback"],"comments":[{"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":3,"creation_date":1668534003,"post_id":74449828,"comment_id":131427007,"body_markdown":"It&#39;s following the &quot;conversionPattern&quot; that you specified in the config. If you want it to be different, then change the pattern.","body":"It&#39;s following the &quot;conversionPattern&quot; that you specified in the config. If you want it to be different, then change the pattern."},{"owner":{"account_id":8061038,"reputation":91,"user_id":6076567,"display_name":"Ivan"},"score":0,"creation_date":1668578579,"post_id":74449828,"comment_id":131436798,"body_markdown":"@Michael thx for your comment, I tried to change the &quot;conversionPattern&quot; and even delete it, but I still can&#39;t see messages in the log about the PID and the start time of the application, as it was in the logback.","body":"@Michael thx for your comment, I tried to change the &quot;conversionPattern&quot; and even delete it, but I still can&#39;t see messages in the log about the PID and the start time of the application, as it was in the logback."},{"owner":{"account_id":1674328,"reputation":2652,"user_id":1540177,"display_name":"grekier"},"score":0,"creation_date":1668588131,"post_id":74449828,"comment_id":131439274,"body_markdown":"See https://stackoverflow.com/questions/4622252/how-to-add-the-process-id-to-a-log4j-log-file","body":"See <a href=\"https://stackoverflow.com/questions/4622252/how-to-add-the-process-id-to-a-log4j-log-file\" title=\"how to add the process id to a log4j log file\">stackoverflow.com/questions/4622252/&hellip;</a>"},{"owner":{"account_id":8061038,"reputation":91,"user_id":6076567,"display_name":"Ivan"},"score":0,"creation_date":1668589667,"post_id":74449828,"comment_id":131439835,"body_markdown":"@grekier  in that topic, the message format is also considered, in my case some information has completely disappeared, i.e. there are no whole messages","body":"@grekier  in that topic, the message format is also considered, in my case some information has completely disappeared, i.e. there are no whole messages"}],"owner":{"account_id":8061038,"reputation":91,"user_id":6076567,"display_name":"Ivan"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":89,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1668689729,"creation_date":1668533095,"question_id":74449828,"body_markdown":"\r\nIt was necessary to change from logback to log4j, I modified pom for this:\r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n    &lt;exclusions&gt;\r\n        &lt;exclusion&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\r\n        &lt;/exclusion&gt;\r\n    &lt;/exclusions&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-log4j&lt;/artifactId&gt;\r\n&lt;/dependency&gt;   \r\n```\r\n\r\nAnd &#39;log4j.properties&#39; file was added:\r\n```\r\nlog4j.rootLogger=INFO,Console\r\n\r\nlog4j.appender.console=org.apache.log4j.ConsoleAppender\r\nlog4j.appender.console.Target=System.out\r\nlog4j.appender.console.layout=org.apache.log4j.PatternLayout\r\nlog4j.appender.console.layout.conversionPattern=%d{yyyy-MM-dd HH:mm:ss,SSS} %-5p - %m%n\r\n```\r\n\r\nBut in result, there are different logs. With logback I have something like this:\r\n```\r\n2022-11-15 18:43:05.819  INFO 13700 --- [           main] en.main.com.Application                 \t: Starting Application using Java 11.0.14 on &#39;&#39; with PID 13700\r\n2022-11-15 18:43:06.710  INFO 13700 --- [           main] o.s.cloud.context.scope.GenericScope     \t: BeanFactory id=eb6a152f-721c-3012-b9ce-880d2bbbe06c\r\n2022-11-15 18:43:06.967  INFO 13700 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  \t: Tomcat initialized with port(s): 8081 (http)\r\n2022-11-15 18:43:06.974  INFO 13700 --- [           main] o.apache.catalina.core.StandardService   \t: Starting service [Tomcat]\r\n2022-11-15 18:43:06.974  INFO 13700 --- [           main] org.apache.catalina.core.StandardEngine  \t: Starting Servlet engine: [Apache Tomcat/9.0.53]\r\n2022-11-15 18:43:07.158  INFO 13700 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/main]    : Initializing Spring embedded WebApplicationContext\r\n2022-11-15 18:43:07.159  INFO 13700 --- [           main] w.s.c.ServletWebServerApplicationContext \t: Root WebApplicationContext: initialization completed in 1298 ms\r\n2022-11-15 18:43:07.898  INFO 13700 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  \t: Tomcat started on port(s): 8081 (http) with context path &#39;/main&#39;\r\n2022-11-15 18:43:07.985  INFO 13700 --- [           main] en.main.com.Application                 \t: Started Application in 2.648 seconds (JVM running for 3.726)\r\n```\r\n\r\nAnd after log4j:\r\n```\r\n2022-11-15 18:38:00,817 INFO  - Initializing ProtocolHandler [&quot;http-nio-8081&quot;]\r\n2022-11-15 18:38:00,818 INFO  - Starting service [Tomcat]\r\n2022-11-15 18:38:00,818 INFO  - Starting Servlet engine: [Apache Tomcat/9.0.53]\r\n2022-11-15 18:38:01,057 INFO  - Initializing Spring embedded WebApplicationContext\r\n2022-11-15 18:38:02,890 INFO  - Starting ProtocolHandler [&quot;http-nio-8081&quot;]\r\n2022-11-15 18:38:03,001 INFO  - HikariPool-1 - Starting...\r\n2022-11-15 18:38:03,318 INFO  - HikariPool-1 - Start completed.\r\n2022-11-15 18:38:03,340 INFO  - HikariPool-2 - Starting...\r\n2022-11-15 18:38:03,397 INFO  - HikariPool-2 - Start completed.\r\n```\r\n\r\nI can&#39;t understand why a part of useful information is missing. Also tried to display some transactions info, by adding\r\n```\r\nlog4j.logger.org.springframework.jdbc.datasource.DataSourceTransactionManager=DEBUG\r\n```\r\nbut there is no result.","title":"Why some information missing after switching from logback to log4j?","body":"<p>It was necessary to change from logback to log4j, I modified pom for this:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n    &lt;exclusions&gt;\n        &lt;exclusion&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-log4j&lt;/artifactId&gt;\n&lt;/dependency&gt;   \n</code></pre>\n<p>And 'log4j.properties' file was added:</p>\n<pre><code>log4j.rootLogger=INFO,Console\n\nlog4j.appender.console=org.apache.log4j.ConsoleAppender\nlog4j.appender.console.Target=System.out\nlog4j.appender.console.layout=org.apache.log4j.PatternLayout\nlog4j.appender.console.layout.conversionPattern=%d{yyyy-MM-dd HH:mm:ss,SSS} %-5p - %m%n\n</code></pre>\n<p>But in result, there are different logs. With logback I have something like this:</p>\n<pre><code>2022-11-15 18:43:05.819  INFO 13700 --- [           main] en.main.com.Application                   : Starting Application using Java 11.0.14 on '' with PID 13700\n2022-11-15 18:43:06.710  INFO 13700 --- [           main] o.s.cloud.context.scope.GenericScope      : BeanFactory id=eb6a152f-721c-3012-b9ce-880d2bbbe06c\n2022-11-15 18:43:06.967  INFO 13700 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer   : Tomcat initialized with port(s): 8081 (http)\n2022-11-15 18:43:06.974  INFO 13700 --- [           main] o.apache.catalina.core.StandardService    : Starting service [Tomcat]\n2022-11-15 18:43:06.974  INFO 13700 --- [           main] org.apache.catalina.core.StandardEngine   : Starting Servlet engine: [Apache Tomcat/9.0.53]\n2022-11-15 18:43:07.158  INFO 13700 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/main]    : Initializing Spring embedded WebApplicationContext\n2022-11-15 18:43:07.159  INFO 13700 --- [           main] w.s.c.ServletWebServerApplicationContext  : Root WebApplicationContext: initialization completed in 1298 ms\n2022-11-15 18:43:07.898  INFO 13700 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer   : Tomcat started on port(s): 8081 (http) with context path '/main'\n2022-11-15 18:43:07.985  INFO 13700 --- [           main] en.main.com.Application                   : Started Application in 2.648 seconds (JVM running for 3.726)\n</code></pre>\n<p>And after log4j:</p>\n<pre><code>2022-11-15 18:38:00,817 INFO  - Initializing ProtocolHandler [&quot;http-nio-8081&quot;]\n2022-11-15 18:38:00,818 INFO  - Starting service [Tomcat]\n2022-11-15 18:38:00,818 INFO  - Starting Servlet engine: [Apache Tomcat/9.0.53]\n2022-11-15 18:38:01,057 INFO  - Initializing Spring embedded WebApplicationContext\n2022-11-15 18:38:02,890 INFO  - Starting ProtocolHandler [&quot;http-nio-8081&quot;]\n2022-11-15 18:38:03,001 INFO  - HikariPool-1 - Starting...\n2022-11-15 18:38:03,318 INFO  - HikariPool-1 - Start completed.\n2022-11-15 18:38:03,340 INFO  - HikariPool-2 - Starting...\n2022-11-15 18:38:03,397 INFO  - HikariPool-2 - Start completed.\n</code></pre>\n<p>I can't understand why a part of useful information is missing. Also tried to display some transactions info, by adding</p>\n<pre><code>log4j.logger.org.springframework.jdbc.datasource.DataSourceTransactionManager=DEBUG\n</code></pre>\n<p>but there is no result.</p>\n"},{"tags":["java","hibernate","quarkus"],"comments":[{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1668521603,"post_id":74446963,"comment_id":131421781,"body_markdown":"Is the `Datasource &#39;default&#39;` really the correct one?","body":"Is the <code>Datasource &#39;default&#39;</code> really the correct one?"},{"owner":{"account_id":4565174,"reputation":508,"user_id":3706372,"accept_rate":50,"display_name":"godo57"},"score":0,"creation_date":1668521763,"post_id":74446963,"comment_id":131421848,"body_markdown":"This seems to be a network issue ?","body":"This seems to be a network issue ?"},{"owner":{"account_id":2078465,"reputation":191,"user_id":1851136,"accept_rate":50,"display_name":"VenomBerry"},"score":0,"creation_date":1668522048,"post_id":74446963,"comment_id":131421988,"body_markdown":"problem solved, i was using the wrong data source configuration.","body":"problem solved, i was using the wrong data source configuration."},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1668584515,"post_id":74446963,"comment_id":131438152,"body_markdown":"So `default` was wrong? Surprise ^^","body":"So <code>default</code> was wrong? Surprise ^^"}],"answers":[{"tags":[],"owner":{"account_id":2078465,"reputation":191,"user_id":1851136,"accept_rate":50,"display_name":"VenomBerry"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668689597,"creation_date":1668522181,"answer_id":74447212,"question_id":74446963,"body_markdown":"I was using the wrong datasource configuration, when i put the right host, credentials and service name in the application.propreties file.","title":"Why my quarkus/hibernate rest API unable to acuire JDBC connection?","body":"<p>I was using the wrong datasource configuration, when i put the right host, credentials and service name in the application.propreties file.</p>\n"}],"owner":{"account_id":2078465,"reputation":191,"user_id":1851136,"accept_rate":50,"display_name":"VenomBerry"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":134,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1668689597,"creation_date":1668521089,"question_id":74446963,"body_markdown":"The application lunches correctly, i am trying to consume a login API, when i lunch login process using swagger-ui, an exception is triggered:\r\n\r\n&gt; Caused by: javax.persistence.PersistenceException: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection\r\n\r\n&gt; Caused by: java.sql.SQLRecoverableException: Erreur d&#39;E/S: The Network Adapter could not establish the connection\r\n\r\n&gt; 2022-11-15 14:03:18,857 WARN  (Agroal_2230584771) Datasource &#39;default&#39;: Erreur d&#39;E/S: The Network Adapter could not establish the connection\r\n\r\nthis is the url from the database propreties panel: `jdbc:oracle:thin:@bodswv092:1521:DEMO`\r\n\r\nHow can i resolve this problem ?\r\n\r\n","title":"Why my quarkus/hibernate rest API unable to acuire JDBC connection?","body":"<p>The application lunches correctly, i am trying to consume a login API, when i lunch login process using swagger-ui, an exception is triggered:</p>\n<blockquote>\n<p>Caused by: javax.persistence.PersistenceException: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection</p>\n</blockquote>\n<blockquote>\n<p>Caused by: java.sql.SQLRecoverableException: Erreur d'E/S: The Network Adapter could not establish the connection</p>\n</blockquote>\n<blockquote>\n<p>2022-11-15 14:03:18,857 WARN  (Agroal_2230584771) Datasource 'default': Erreur d'E/S: The Network Adapter could not establish the connection</p>\n</blockquote>\n<p>this is the url from the database propreties panel: <code>jdbc:oracle:thin:@bodswv092:1521:DEMO</code></p>\n<p>How can i resolve this problem ?</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":7142980,"reputation":323263,"user_id":5459839,"display_name":"trincot"},"score":2,"creation_date":1668676628,"post_id":74472796,"comment_id":131465366,"body_markdown":"Are you sure about `s?`, it seems you expect that to match a space..., but that would need to be `\\s?`, and in a string literal with escaped backslash...","body":"Are you sure about <code>s?</code>, it seems you expect that to match a space..., but that would need to be <code>\\s?</code>, and in a string literal with escaped backslash..."},{"owner":{"account_id":26151286,"reputation":9,"user_id":19839205,"display_name":"arunDarkDev"},"score":0,"creation_date":1668677238,"post_id":74472796,"comment_id":131465596,"body_markdown":"Yeah, you&#39;re right. that was misspelled one.","body":"Yeah, you&#39;re right. that was misspelled one."},{"owner":{"account_id":7142980,"reputation":323263,"user_id":5459839,"display_name":"trincot"},"score":0,"creation_date":1668677305,"post_id":74472796,"comment_id":131465622,"body_markdown":"But still didn&#39;t escape that backslash -- because of the Java string literal it is in.","body":"But still didn&#39;t escape that backslash -- because of the Java string literal it is in."}],"answers":[{"tags":[],"owner":{"account_id":4739783,"reputation":612632,"user_id":3832970,"display_name":"Wiktor Stribiew"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668676912,"creation_date":1668676587,"answer_id":74472858,"question_id":74472796,"body_markdown":"You can use\r\n```none\r\nPattern.matches(&quot;[A-Z][a-z]*(?:\\\\s[A-Z][a-z]*)*&quot;,&quot;Joe V&quot;)\r\nPattern.matches(&quot;\\\\p{Lu}\\\\p{Ll}*(?:\\\\s\\\\p{Lu}\\\\p{Ll}*)*&quot;,&quot;Joe V&quot;)\r\n```\r\nSee the [regex demo #1][1] and [regex demo #2][2].\r\n\r\nNote that `.matches` requires a full string match, hence the use of `^` and `$` anchors on the testing site and their absence in the code.\r\n\r\n*Details*:\r\n\r\n - `^` - start of string (implied in `.matches`)\r\n - `[A-Z]` / `\\p{Lu}` - an (Unicode) uppercase letter\r\n - `[a-z]*` / `\\p{Ll}*` - zero or more (Unicode) lowercase letters\r\n - `(?:\\s[A-Z][a-z]*)*` / `(?:\\s\\p{Lu}\\p{Ll}*)*` - zero or more sequences of\r\n   - `\\s` - one whitespace\r\n   - `[A-Z][a-z]*` /`\\p{Lu}\\p{Ll}*` - an uppercase (Unicode) letter and then zero or more (Unicode) lowercase letters.\r\n - `$` - end of string (implied in `.matches`)\r\n\r\n  [1]: https://regex101.com/r/FqkEpu/1\r\n  [2]: https://regex101.com/r/FqkEpu/2","title":"Was there any difference between using regex in java and regex in javascript?","body":"<p>You can use</p>\n<pre class=\"lang-none prettyprint-override\"><code>Pattern.matches(&quot;[A-Z][a-z]*(?:\\\\s[A-Z][a-z]*)*&quot;,&quot;Joe V&quot;)\nPattern.matches(&quot;\\\\p{Lu}\\\\p{Ll}*(?:\\\\s\\\\p{Lu}\\\\p{Ll}*)*&quot;,&quot;Joe V&quot;)\n</code></pre>\n<p>See the <a href=\"https://regex101.com/r/FqkEpu/1\" rel=\"nofollow noreferrer\">regex demo #1</a> and <a href=\"https://regex101.com/r/FqkEpu/2\" rel=\"nofollow noreferrer\">regex demo #2</a>.</p>\n<p>Note that <code>.matches</code> requires a full string match, hence the use of <code>^</code> and <code>$</code> anchors on the testing site and their absence in the code.</p>\n<p><em>Details</em>:</p>\n<ul>\n<li><code>^</code> - start of string (implied in <code>.matches</code>)</li>\n<li><code>[A-Z]</code> / <code>\\p{Lu}</code> - an (Unicode) uppercase letter</li>\n<li><code>[a-z]*</code> / <code>\\p{Ll}*</code> - zero or more (Unicode) lowercase letters</li>\n<li><code>(?:\\s[A-Z][a-z]*)*</code> / <code>(?:\\s\\p{Lu}\\p{Ll}*)*</code> - zero or more sequences of\n<ul>\n<li><code>\\s</code> - one whitespace</li>\n<li><code>[A-Z][a-z]*</code> /<code>\\p{Lu}\\p{Ll}*</code> - an uppercase (Unicode) letter and then zero or more (Unicode) lowercase letters.</li>\n</ul>\n</li>\n<li><code>$</code> - end of string (implied in <code>.matches</code>)</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1668689517,"post_id":74475021,"comment_id":131470106,"body_markdown":"`\\s` being interpreted as a space is a recent addition (Java 15, when text blocks where released)","body":"<code>\\s</code> being interpreted as a space is a recent addition (Java 15, when text blocks where released)"}],"tags":[],"owner":{"account_id":26555431,"reputation":558,"user_id":20184128,"display_name":"berse2212"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1668685994,"creation_date":1668685994,"answer_id":74475021,"question_id":74472796,"body_markdown":"Javascript has native support for regex while Java doesn&#39;t. Since Java uses `\\` for special signs in strings (like `\\n`) you have to escape the `\\` to actually be a `\\` sign. That&#39;s done with another `\\`. So any `\\` you use in Java  should be written as `\\\\`. \r\n\r\nThus your regex / code should be:\r\n\r\n    Pattern.matches(&quot;[A-Z][a-z]*\\\\s?[A-Z]?[a-z]*$&quot;, &quot;Joe V&quot;)\r\n\r\nwhich returns `true`\r\n\r\nP.s. `\\s` is interpreted as a Space in any Java-String","title":"Was there any difference between using regex in java and regex in javascript?","body":"<p>Javascript has native support for regex while Java doesn't. Since Java uses <code>\\</code> for special signs in strings (like <code>\\n</code>) you have to escape the <code>\\</code> to actually be a <code>\\</code> sign. That's done with another <code>\\</code>. So any <code>\\</code> you use in Java  should be written as <code>\\\\</code>.</p>\n<p>Thus your regex / code should be:</p>\n<pre><code>Pattern.matches(&quot;[A-Z][a-z]*\\\\s?[A-Z]?[a-z]*$&quot;, &quot;Joe V&quot;)\n</code></pre>\n<p>which returns <code>true</code></p>\n<p>P.s. <code>\\s</code> is interpreted as a Space in any Java-String</p>\n"}],"owner":{"account_id":26151286,"reputation":9,"user_id":19839205,"display_name":"arunDarkDev"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1668689427,"creation_date":1668676320,"question_id":74472796,"body_markdown":"I have a requirement to build a regex pattern to validate a String in Java. Hence I build a pattern\r\n`[A-Z][a-z]*\\s?[A-Z]?[a-z]*$` for the conditions:\r\n\r\n* Should start with caps\r\n* Every other Word should start with caps\r\n* No numbers included\r\n* no consecutive two spaces allowed\r\n\r\n`Pattern.matches(&quot;[A-Z][a-z]*\\s?[A-Z]?[a-z]*$&quot;,&quot;Joe V&quot;)`  returns `false` for me in java.\r\nBut the same pattern returns true for the data &quot;Joe V&quot; in regexr.com.\r\n\r\n\r\nWhat might be the cause?","title":"Was there any difference between using regex in java and regex in javascript?","body":"<p>I have a requirement to build a regex pattern to validate a String in Java. Hence I build a pattern\n<code>[A-Z][a-z]*\\s?[A-Z]?[a-z]*$</code> for the conditions:</p>\n<ul>\n<li>Should start with caps</li>\n<li>Every other Word should start with caps</li>\n<li>No numbers included</li>\n<li>no consecutive two spaces allowed</li>\n</ul>\n<p><code>Pattern.matches(&quot;[A-Z][a-z]*\\s?[A-Z]?[a-z]*$&quot;,&quot;Joe V&quot;)</code>  returns <code>false</code> for me in java.\nBut the same pattern returns true for the data &quot;Joe V&quot; in regexr.com.</p>\n<p>What might be the cause?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3782717,"reputation":927,"user_id":3141682,"accept_rate":75,"display_name":"Adi Ohana"},"score":0,"creation_date":1554133829,"post_id":55458996,"comment_id":97630896,"body_markdown":"this will help you: https://stackoverflow.com/questions/19299513/spring-junit-how-to-mock-autowired-component-in-autowired-component","body":"this will help you: <a href=\"https://stackoverflow.com/questions/19299513/spring-junit-how-to-mock-autowired-component-in-autowired-component\" title=\"spring junit how to mock autowired component in autowired component\">stackoverflow.com/questions/19299513/&hellip;</a>"},{"owner":{"account_id":1961640,"reputation":12136,"user_id":1763035,"accept_rate":56,"display_name":"Andy Brown"},"score":0,"creation_date":1554134210,"post_id":55458996,"comment_id":97631099,"body_markdown":"Change your `@Mock ObjectMapper` to `@MockBean ObjectMapper`","body":"Change your <code>@Mock ObjectMapper</code> to <code>@MockBean ObjectMapper</code>"},{"owner":{"account_id":277416,"reputation":681888,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":0,"creation_date":1554134313,"post_id":55458996,"comment_id":97631154,"body_markdown":"Also, your code passes a TypeReference as second argument, but you&#39;re mocking with a Class as second argument.","body":"Also, your code passes a TypeReference as second argument, but you&#39;re mocking with a Class as second argument."},{"owner":{"account_id":1961640,"reputation":12136,"user_id":1763035,"accept_rate":56,"display_name":"Andy Brown"},"score":0,"creation_date":1554134371,"post_id":55458996,"comment_id":97631190,"body_markdown":"Also, since you are starting a spring context you should `@Inject` your `ServiceChild` as a bean and delete the `@InjectMocks` annotation.","body":"Also, since you are starting a spring context you should <code>@Inject</code> your <code>ServiceChild</code> as a bean and delete the <code>@InjectMocks</code> annotation."},{"owner":{"account_id":15652181,"reputation":143,"user_id":11293357,"display_name":"Raikyn"},"score":1,"creation_date":1554188702,"post_id":55458996,"comment_id":97648679,"body_markdown":"Even with @MockBean objectMapper.readValues(...) returns null.","body":"Even with @MockBean objectMapper.readValues(...) returns null."},{"owner":{"account_id":15652181,"reputation":143,"user_id":11293357,"display_name":"Raikyn"},"score":0,"creation_date":1554189243,"post_id":55458996,"comment_id":97648972,"body_markdown":"@JBNizet Actually that was the problem here. I try to mock with Mockito.&lt;TypeReference&lt;Map&lt;String, Object&gt;&gt;&gt;any() instead of Mockito.any(Class.class)) and it works! Thanks!","body":"@JBNizet Actually that was the problem here. I try to mock with Mockito.&lt;TypeReference&lt;Map&lt;String, Object&gt;&gt;&gt;any() instead of Mockito.any(Class.class)) and it works! Thanks!"},{"owner":{"account_id":3635110,"reputation":1239,"user_id":3030406,"accept_rate":55,"display_name":"Rookie007"},"score":1,"creation_date":1633538774,"post_id":55458996,"comment_id":122788417,"body_markdown":"@Raikyn I am having the same issue, could you please post the full answer ?","body":"@Raikyn I am having the same issue, could you please post the full answer ?"}],"answers":[{"comments":[{"owner":{"account_id":15652181,"reputation":143,"user_id":11293357,"display_name":"Raikyn"},"score":1,"creation_date":1554188618,"post_id":55459233,"comment_id":97648632,"body_markdown":"Even with @MockBean it returns null. Also, why should I use it instead of @Mock? My point is just mocking this particular bean","body":"Even with @MockBean it returns null. Also, why should I use it instead of @Mock? My point is just mocking this particular bean"}],"tags":[],"owner":{"account_id":3526421,"reputation":20884,"user_id":2947378,"display_name":"rdas"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1554134469,"creation_date":1554134469,"answer_id":55459233,"question_id":55458996,"body_markdown":"`@Mock` creates a new mock. It&#39;s equivalent to calling `mock(SomeClass.class)`\r\n\r\n`@MockBean` creates a mock, like `@Mock`, but also replaces any bean already in the application context with the same type with that mock. So any code which `Autowire`s that bean will get the mock. \r\n\r\nYou need to use `@MockBean`","title":"How to mock ObjectMapper with mokito?","body":"<p><code>@Mock</code> creates a new mock. It's equivalent to calling <code>mock(SomeClass.class)</code></p>\n\n<p><code>@MockBean</code> creates a mock, like <code>@Mock</code>, but also replaces any bean already in the application context with the same type with that mock. So any code which <code>Autowire</code>s that bean will get the mock. </p>\n\n<p>You need to use <code>@MockBean</code></p>\n"},{"comments":[{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1668689424,"post_id":74475660,"comment_id":131470066,"body_markdown":"This sounds ... weird. The whole point of the @ SpringBootTest annotation is to establish a setup where all the spring annotations work as if it were a production setup. Your suggestion here is addressing a very basic problem when people are doing mockito unit tests ... without Spring being involved. I really doubt that this answer actually works for the given spring boot context.","body":"This sounds ... weird. The whole point of the @ SpringBootTest annotation is to establish a setup where all the spring annotations work as if it were a production setup. Your suggestion here is addressing a very basic problem when people are doing mockito unit tests ... without Spring being involved. I really doubt that this answer actually works for the given spring boot context."},{"owner":{"account_id":8628085,"reputation":132,"user_id":6460660,"accept_rate":100,"display_name":"Azhagu Surya"},"score":0,"creation_date":1668698331,"post_id":74475660,"comment_id":131473943,"body_markdown":"https://www.digitalocean.com/community/tutorials/mockito-injectmocks-mocks-dependency-injection\n@GhostCat. I have referred this , in our code , we have constructor based injection , setter and field based in single class , now i cleared up those  into constructor alone , i was facing this issue in junit 5.","body":"<a href=\"https://www.digitalocean.com/community/tutorials/mockito-injectmocks-mocks-dependency-injection\" rel=\"nofollow noreferrer\">digitalocean.com/community/tutorials/&hellip;</a> @GhostCat. I have referred this , in our code , we have constructor based injection , setter and field based in single class , now i cleared up those  into constructor alone , i was facing this issue in junit 5."}],"tags":[],"owner":{"account_id":8628085,"reputation":132,"user_id":6460660,"accept_rate":100,"display_name":"Azhagu Surya"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1668688916,"creation_date":1668688916,"answer_id":74475660,"question_id":55458996,"body_markdown":"I faced the same NPE with the objectmapper. This issue is resolved after adding ,\r\nmy test class has class level annotation with \r\n\r\n    @RunWith(MockitoJUnitRunner.class) \r\n\r\nand the fix \r\n\r\n     @Before\r\n        public void setupBefore() {\r\n            MockitoAnnotations.initMocks(this);\r\n    \r\n        }\r\n\r\n\r\n","title":"How to mock ObjectMapper with mokito?","body":"<p>I faced the same NPE with the objectmapper. This issue is resolved after adding ,\nmy test class has class level annotation with</p>\n<pre><code>@RunWith(MockitoJUnitRunner.class) \n</code></pre>\n<p>and the fix</p>\n<pre><code> @Before\n    public void setupBefore() {\n        MockitoAnnotations.initMocks(this);\n\n    }\n</code></pre>\n"}],"owner":{"account_id":15652181,"reputation":143,"user_id":11293357,"display_name":"Raikyn"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7451,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":74475660,"answer_count":2,"score":2,"last_activity_date":1668688916,"creation_date":1554133655,"question_id":55458996,"body_markdown":"I&#39;m having trouble with mocking an ObjectMapper bean with mokito. \r\n\r\nMy class containing the ObjectMapper :\r\n```\r\npublic class ServiceParent{\r\n\r\n        @Autowired\r\n\tprotected ObjectMapper objectMapper;\r\n\r\n        public void someMethod(){\r\n        ...\r\n        Map&lt;String, String&gt; mapResponse = objectMapper.readValue(&quot;some json&quot;, new TypeReference&lt;Map&lt;String, String&gt;&gt;(){});\r\n\r\n}\r\n\r\nOther class extending previous one\r\n\r\npublic class ServiceChild extends ServiceParent{\r\n...\r\n\r\n}\r\n```\r\n\r\n\r\nMy test class :\r\n```\r\n@SpringBootTest\r\npublic class TestService{\r\n       @Mock\r\n       ObjectMapper objectMapper;\r\n\r\n\t@InjectMocks\r\n\tServiceChild  serviceChild;\r\n\r\n @Test\r\n public void test(){\r\n\tMap&lt;String, String&gt; mapResponse=new HashMap&lt;String, String&gt;();\r\n\t\tmapResponse.put(&quot;access_token&quot;, &quot;token_bouhon&quot;);\r\n        Mockito.when(objectMapper.readValue(Mockito.anyString(), Mockito.any(Class.class))).thenReturn(mapResponse);\r\n\r\n}\r\n```\r\n\r\n\r\nSo when I debug this, in ServiceParent, objectMapper isn&#39;t null but readValue(...) return null.\r\n\r\nDo you have an idea on how to return the correct mocked object?\r\n\r\nThanks","title":"How to mock ObjectMapper with mokito?","body":"<p>I'm having trouble with mocking an ObjectMapper bean with mokito. </p>\n\n<p>My class containing the ObjectMapper :</p>\n\n<pre><code>public class ServiceParent{\n\n        @Autowired\n    protected ObjectMapper objectMapper;\n\n        public void someMethod(){\n        ...\n        Map&lt;String, String&gt; mapResponse = objectMapper.readValue(\"some json\", new TypeReference&lt;Map&lt;String, String&gt;&gt;(){});\n\n}\n\nOther class extending previous one\n\npublic class ServiceChild extends ServiceParent{\n...\n\n}\n</code></pre>\n\n<p>My test class :</p>\n\n<pre><code>@SpringBootTest\npublic class TestService{\n       @Mock\n       ObjectMapper objectMapper;\n\n    @InjectMocks\n    ServiceChild  serviceChild;\n\n @Test\n public void test(){\n    Map&lt;String, String&gt; mapResponse=new HashMap&lt;String, String&gt;();\n        mapResponse.put(\"access_token\", \"token_bouhon\");\n        Mockito.when(objectMapper.readValue(Mockito.anyString(), Mockito.any(Class.class))).thenReturn(mapResponse);\n\n}\n</code></pre>\n\n<p>So when I debug this, in ServiceParent, objectMapper isn't null but readValue(...) return null.</p>\n\n<p>Do you have an idea on how to return the correct mocked object?</p>\n\n<p>Thanks</p>\n"},{"tags":["java","jvm","throwable"],"answers":[{"tags":[],"owner":{"account_id":11942036,"reputation":164,"user_id":8738512,"display_name":"David"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1668688115,"creation_date":1663249497,"answer_id":73732286,"question_id":73731547,"body_markdown":"Your guess does not seem to be right if we follow `fillInStackTrace` native method for a bit we can see that it [sets Throwable#backtrace](https://github.com/openjdk/jdk/blob/41ce6582674bb5d14f2edb34e40ee1d7ae7601d8/src/hotspot/share/classfile/javaClasses.cpp#L2713). The implementation looks complicated but it basicallly just strips out fillInStackTrace and the contructor calls (with can be overriden).\r\nFor the next thing keep in mind that `Throwable`\r\n - can be serialized (no constructor call into `readObject`)\r\n - can be created directly in the vm\r\n - `OutOfMemoryExceptions` are preloaded (because it can not be instanciated when oom)\r\n - `fillStackTrace` is commonly overriden and left empty in SubClasses (mostly for performance)\r\n\r\nThen in `getOurStackTrace()` the [real stackTrace is written](https://github.com/openjdk/jdk/blob/41ce6582674bb5d14f2edb34e40ee1d7ae7601d8/src/hotspot/share/classfile/javaClasses.cpp#L2940). This was made because after contructing the exception is in a immutable state (between backtrace set but stacktrace null).\r\n\r\nOut of protocol state refers to Throwables created without calling a constructor.\r\n\r\nIf you have further questions just ask. I really like your question :)","title":"OpenJDK-java/lang/Throwable.fillInStackTrace - awkward implementation?","body":"<p>Your guess does not seem to be right if we follow <code>fillInStackTrace</code> native method for a bit we can see that it <a href=\"https://github.com/openjdk/jdk/blob/41ce6582674bb5d14f2edb34e40ee1d7ae7601d8/src/hotspot/share/classfile/javaClasses.cpp#L2713\" rel=\"nofollow noreferrer\">sets Throwable#backtrace</a>. The implementation looks complicated but it basicallly just strips out fillInStackTrace and the contructor calls (with can be overriden).\nFor the next thing keep in mind that <code>Throwable</code></p>\n<ul>\n<li>can be serialized (no constructor call into <code>readObject</code>)</li>\n<li>can be created directly in the vm</li>\n<li><code>OutOfMemoryExceptions</code> are preloaded (because it can not be instanciated when oom)</li>\n<li><code>fillStackTrace</code> is commonly overriden and left empty in SubClasses (mostly for performance)</li>\n</ul>\n<p>Then in <code>getOurStackTrace()</code> the <a href=\"https://github.com/openjdk/jdk/blob/41ce6582674bb5d14f2edb34e40ee1d7ae7601d8/src/hotspot/share/classfile/javaClasses.cpp#L2940\" rel=\"nofollow noreferrer\">real stackTrace is written</a>. This was made because after contructing the exception is in a immutable state (between backtrace set but stacktrace null).</p>\n<p>Out of protocol state refers to Throwables created without calling a constructor.</p>\n<p>If you have further questions just ask. I really like your question :)</p>\n"},{"comments":[{"owner":{"account_id":7902590,"reputation":311,"user_id":5969163,"accept_rate":100,"display_name":"peacetrue"},"score":0,"creation_date":1667805715,"post_id":73732367,"comment_id":131246229,"body_markdown":"I think you&#39;re right, when using debug mode, I found that `stackTrace` was initialized in `fillInStackTrace`, which should be affected by debug mode.","body":"I think you&#39;re right, when using debug mode, I found that <code>stackTrace</code> was initialized in <code>fillInStackTrace</code>, which should be affected by debug mode."}],"tags":[],"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1663250122,"creation_date":1663249802,"answer_id":73732367,"question_id":73731547,"body_markdown":"The native `fillInStackTrace(int)` method does not create an array of `StackTraceElement` instances. It captures a snapshot of the current stack trace in an implementation specific format and stores it in the `backtrace` variable.\r\n\r\nOnly when the array of `StackTraceElement` instances is requested, the method `getOurStackTrace()` will generate the array:\r\n\r\n```java\r\nprivate synchronized StackTraceElement[] getOurStackTrace() {\r\n    // Initialize stack trace field with information from\r\n    // backtrace if this is the first call to this method\r\n    if (stackTrace == UNASSIGNED_STACK ||\r\n        (stackTrace == null &amp;&amp; backtrace != null) /* Out of protocol state */) {\r\n        int depth = getStackTraceDepth();\r\n        stackTrace = new StackTraceElement[depth];\r\n        for (int i=0; i &lt; depth; i++)\r\n            stackTrace[i] = getStackTraceElement(i);\r\n    } else if (stackTrace == null) {\r\n        return UNASSIGNED_STACK;\r\n    }\r\n    return stackTrace;\r\n}\r\n```\r\n\r\nIts using the helper method\r\n\r\n```java\r\nnative StackTraceElement getStackTraceElement(int index);\r\n```\r\n\r\nwhich knows how to decode the `backtrace`.\r\n\r\nSo if the application never accesses the stacktrace, this might be cheaper than generating the full array in advance.\r\n\r\n\r\nYou have already posted the declaration of `stackTrace` which initializes the field with `UNASSIGNED_STACK`. But there is [this special constructor] which allows to suppress stack traces altogether.\r\n\r\n```java\r\nprotected Throwable(String message, Throwable cause,\r\n                    boolean enableSuppression,\r\n                    boolean writableStackTrace) {\r\n    if (writableStackTrace) {\r\n        fillInStackTrace();\r\n    } else {\r\n        stackTrace = null;\r\n    }\r\n    detailMessage = message;\r\n    this.cause = cause;\r\n    if (!enableSuppression)\r\n        suppressedExceptions = null;\r\n}\r\n```\r\n\r\nSo, normally `stackTrace` should be either, `UNASSIGNED_STACK` or an actual array created by `getOurStackTrace()` or set using [`setStackTrace(StackTraceElement[])`][1].\r\n\r\nIf `stackTrace` is `null`, the `backtrace` should also be `null`, if stack traces are disabled. If this is not the case, the state is out of protocol, which means the throwable has not been generated using normal constructor invocation, but by native code.\r\n\r\n[this special constructor]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Throwable.html#%3Cinit%3E(java.lang.String,java.lang.Throwable,boolean,boolean)\r\n[1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Throwable.html#setStackTrace(java.lang.StackTraceElement%5B%5D)","title":"OpenJDK-java/lang/Throwable.fillInStackTrace - awkward implementation?","body":"<p>The native <code>fillInStackTrace(int)</code> method does not create an array of <code>StackTraceElement</code> instances. It captures a snapshot of the current stack trace in an implementation specific format and stores it in the <code>backtrace</code> variable.</p>\n<p>Only when the array of <code>StackTraceElement</code> instances is requested, the method <code>getOurStackTrace()</code> will generate the array:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private synchronized StackTraceElement[] getOurStackTrace() {\n    // Initialize stack trace field with information from\n    // backtrace if this is the first call to this method\n    if (stackTrace == UNASSIGNED_STACK ||\n        (stackTrace == null &amp;&amp; backtrace != null) /* Out of protocol state */) {\n        int depth = getStackTraceDepth();\n        stackTrace = new StackTraceElement[depth];\n        for (int i=0; i &lt; depth; i++)\n            stackTrace[i] = getStackTraceElement(i);\n    } else if (stackTrace == null) {\n        return UNASSIGNED_STACK;\n    }\n    return stackTrace;\n}\n</code></pre>\n<p>Its using the helper method</p>\n<pre class=\"lang-java prettyprint-override\"><code>native StackTraceElement getStackTraceElement(int index);\n</code></pre>\n<p>which knows how to decode the <code>backtrace</code>.</p>\n<p>So if the application never accesses the stacktrace, this might be cheaper than generating the full array in advance.</p>\n<p>You have already posted the declaration of <code>stackTrace</code> which initializes the field with <code>UNASSIGNED_STACK</code>. But there is <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Throwable.html#%3Cinit%3E(java.lang.String,java.lang.Throwable,boolean,boolean)\" rel=\"nofollow noreferrer\">this special constructor</a> which allows to suppress stack traces altogether.</p>\n<pre class=\"lang-java prettyprint-override\"><code>protected Throwable(String message, Throwable cause,\n                    boolean enableSuppression,\n                    boolean writableStackTrace) {\n    if (writableStackTrace) {\n        fillInStackTrace();\n    } else {\n        stackTrace = null;\n    }\n    detailMessage = message;\n    this.cause = cause;\n    if (!enableSuppression)\n        suppressedExceptions = null;\n}\n</code></pre>\n<p>So, normally <code>stackTrace</code> should be either, <code>UNASSIGNED_STACK</code> or an actual array created by <code>getOurStackTrace()</code> or set using <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Throwable.html#setStackTrace(java.lang.StackTraceElement%5B%5D)\" rel=\"nofollow noreferrer\"><code>setStackTrace(StackTraceElement[])</code></a>.</p>\n<p>If <code>stackTrace</code> is <code>null</code>, the <code>backtrace</code> should also be <code>null</code>, if stack traces are disabled. If this is not the case, the state is out of protocol, which means the throwable has not been generated using normal constructor invocation, but by native code.</p>\n"}],"owner":{"account_id":6423221,"reputation":306,"user_id":4979303,"display_name":"Antonio Noack"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":268,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":73732367,"answer_count":2,"score":4,"last_activity_date":1668688115,"creation_date":1663246534,"question_id":73731547,"body_markdown":"I am trying to understand the implementation of Throwable.fillInStackTrace():\r\n\r\n    private static final StackTraceElement[] UNASSIGNED_STACK = new StackTraceElement[0];\r\n    [...]\r\n    private StackTraceElement[] stackTrace = UNASSIGNED_STACK;\r\n    [...]\r\n\r\n    /**\r\n     * Fills in the execution stack trace. This method records within this\r\n     * {@code Throwable} object information about the current state of\r\n     * the stack frames for the current thread.\r\n     *\r\n     * &lt;p&gt;If the stack trace of this {@code Throwable} {@linkplain\r\n     * Throwable#Throwable(String, Throwable, boolean, boolean) is not\r\n     * writable}, calling this method has no effect.\r\n     *\r\n     * @return  a reference to this {@code Throwable} instance.\r\n     * @see     java.lang.Throwable#printStackTrace()\r\n     */\r\n    public synchronized Throwable fillInStackTrace() {\r\n        if (stackTrace != null ||\r\n            backtrace != null /* Out of protocol state */ ) {\r\n            fillInStackTrace(0);\r\n            stackTrace = UNASSIGNED_STACK;\r\n        }\r\n        return this;\r\n    }\r\n\r\n    private native Throwable fillInStackTrace(int dummy);\r\n\r\n(source [OpenJDK][1])\r\n\r\nI would have guess that fillInStackTrace(int) collects the stack trace from VM internals, and then creates an array of java/lang/StackTraceElement and assigns it to the Throwable.stackTrace property.\r\n\r\nHowever, the standard implementation seems to clear the value of Throwable.stackTrace directly after. When running a simple sample, the information is clearly stored in the Throwable. Sample:\r\n\r\n    Throwable th = new Throwable();\r\n    th.printStackTrace(); // prints the stack up to this point\r\n\r\nSo, where is the magic / what am I misunderstanding?\r\n\r\nPS: what does &quot;out of protocol state&quot; mean in the source code?\r\n\r\n\r\n  [1]: https://github.com/openjdk-mirror/jdk7u-jdk/blob/master/src/share/classes/java/lang/Throwable.java","title":"OpenJDK-java/lang/Throwable.fillInStackTrace - awkward implementation?","body":"<p>I am trying to understand the implementation of Throwable.fillInStackTrace():</p>\n<pre><code>private static final StackTraceElement[] UNASSIGNED_STACK = new StackTraceElement[0];\n[...]\nprivate StackTraceElement[] stackTrace = UNASSIGNED_STACK;\n[...]\n\n/**\n * Fills in the execution stack trace. This method records within this\n * {@code Throwable} object information about the current state of\n * the stack frames for the current thread.\n *\n * &lt;p&gt;If the stack trace of this {@code Throwable} {@linkplain\n * Throwable#Throwable(String, Throwable, boolean, boolean) is not\n * writable}, calling this method has no effect.\n *\n * @return  a reference to this {@code Throwable} instance.\n * @see     java.lang.Throwable#printStackTrace()\n */\npublic synchronized Throwable fillInStackTrace() {\n    if (stackTrace != null ||\n        backtrace != null /* Out of protocol state */ ) {\n        fillInStackTrace(0);\n        stackTrace = UNASSIGNED_STACK;\n    }\n    return this;\n}\n\nprivate native Throwable fillInStackTrace(int dummy);\n</code></pre>\n<p>(source <a href=\"https://github.com/openjdk-mirror/jdk7u-jdk/blob/master/src/share/classes/java/lang/Throwable.java\" rel=\"nofollow noreferrer\">OpenJDK</a>)</p>\n<p>I would have guess that fillInStackTrace(int) collects the stack trace from VM internals, and then creates an array of java/lang/StackTraceElement and assigns it to the Throwable.stackTrace property.</p>\n<p>However, the standard implementation seems to clear the value of Throwable.stackTrace directly after. When running a simple sample, the information is clearly stored in the Throwable. Sample:</p>\n<pre><code>Throwable th = new Throwable();\nth.printStackTrace(); // prints the stack up to this point\n</code></pre>\n<p>So, where is the magic / what am I misunderstanding?</p>\n<p>PS: what does &quot;out of protocol state&quot; mean in the source code?</p>\n"},{"tags":["java","ipv6","broadcast","multicast"],"comments":[{"owner":{"account_id":4620081,"reputation":6197,"user_id":3745413,"display_name":"Ron Maupin"},"score":0,"creation_date":1668621668,"post_id":74464226,"comment_id":131452293,"body_markdown":"IPv6 multicast is used on _every_ IPv6 network, and IPv4 broadcast is a host requirement (all support either the limited broadcast of `255.255.255.255` or the network broadcast), although broadcast is basically deprecated (many companies reject applications that use broadcast; multicast is the modern way of doing things).","body":"IPv6 multicast is used on <i>every</i> IPv6 network, and IPv4 broadcast is a host requirement (all support either the limited broadcast of <code>255.255.255.255</code> or the network broadcast), although broadcast is basically deprecated (many companies reject applications that use broadcast; multicast is the modern way of doing things)."},{"owner":{"account_id":5490607,"reputation":2659,"user_id":4364057,"accept_rate":29,"display_name":"Squirrelkiller"},"score":0,"creation_date":1668624541,"post_id":74464226,"comment_id":131453270,"body_markdown":"Ah so I can just iterate through all network NetworkInterface.getNetwotkInterfaces and all their IP addresses and if I find one IPv6 address I can just use multicast?","body":"Ah so I can just iterate through all network NetworkInterface.getNetwotkInterfaces and all their IP addresses and if I find one IPv6 address I can just use multicast?"},{"owner":{"account_id":430006,"reputation":9575,"user_id":813192,"display_name":"Sander Steffann"},"score":0,"creation_date":1668638225,"post_id":74464226,"comment_id":131457610,"body_markdown":"Even better: every interface should always have an IPv6 link-local address (starting with fe80:) and because you only need to send a multicast packet to the local link that is all you need.","body":"Even better: every interface should always have an IPv6 link-local address (starting with fe80:) and because you only need to send a multicast packet to the local link that is all you need."},{"owner":{"account_id":5490607,"reputation":2659,"user_id":4364057,"accept_rate":29,"display_name":"Squirrelkiller"},"score":0,"creation_date":1668664772,"post_id":74464226,"comment_id":131461906,"body_markdown":"But I want to send the multicast to a specific multicast-group so different instances can use different domains to stay in multiple, separate groups, say &quot;FF05::100&quot;, do I just send that with the first link-local address I can find as sender and others joining that group will definitely receive it? I feel like I need a diagram lol.","body":"But I want to send the multicast to a specific multicast-group so different instances can use different domains to stay in multiple, separate groups, say &quot;FF05::100&quot;, do I just send that with the first link-local address I can find as sender and others joining that group will definitely receive it? I feel like I need a diagram lol."},{"owner":{"account_id":5490607,"reputation":2659,"user_id":4364057,"accept_rate":29,"display_name":"Squirrelkiller"},"score":0,"creation_date":1668688096,"post_id":74464226,"comment_id":131469588,"body_markdown":"Tried it, didn&#39;t work. Results in post.","body":"Tried it, didn&#39;t work. Results in post."},{"owner":{"account_id":1677570,"reputation":18354,"user_id":1542723,"display_name":"Ferrybig"},"score":0,"creation_date":1668688830,"post_id":74464226,"comment_id":131469844,"body_markdown":"&quot;Tried things in the eduroam network:&quot; Test on a network you own, public wifi networks typically have peer to peer communications blocked","body":"&quot;Tried things in the eduroam network:&quot; Test on a network you own, public wifi networks typically have peer to peer communications blocked"},{"owner":{"account_id":5490607,"reputation":2659,"user_id":4364057,"accept_rate":29,"display_name":"Squirrelkiller"},"score":0,"creation_date":1668696266,"post_id":74464226,"comment_id":131473035,"body_markdown":"Well that&#39;s exactly the idea here though, I&#39;d like the program to find out whether or not P2P connection are blocked. On my own network, I don&#39;t have to find out because I already know.","body":"Well that&#39;s exactly the idea here though, I&#39;d like the program to find out whether or not P2P connection are blocked. On my own network, I don&#39;t have to find out because I already know."}],"owner":{"account_id":5490607,"reputation":2659,"user_id":4364057,"accept_rate":29,"display_name":"Squirrelkiller"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":141,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1668688075,"creation_date":1668617094,"question_id":74464226,"body_markdown":"So I&#39;d like an automated network discovery for  the application I&#39;m currently building, but turns out we&#39;re not in a perfect world and neither does every network have IPv6 enabled for multicasting, nor is IPv4 UDP broadcast enabled in every network.\r\n\r\nAny idea how I can programmatically find out, if either of those are enabled in the current network? Since UDP doesn&#39;t open a connection, I can just throw datagrams and hope someone finds it, then if noone else answers after a set time (or like, offer the user a button for manual discovery from the beginning) use user provided information (or a name service / registry I&#39;d have to host somewhere).\r\n\r\nLooks like sending a multicast is received on my own machine when I send it from one port to the other, but I can&#39;t be sure it actually goes out of the device and back in or it just loops back because it&#39;s being clever.\r\n\r\nI&#39;d prefer multicast of course - broadcast would be the fallback here.\r\n\r\n**Update**\r\n\r\nTried things in the eduroam network:\r\n\r\nMade new `MulticastSocket` and joined the multicast using `joinGroup`.   \r\nMade new `DatagramSocker` and sent a message to that multicast group  \r\n-&gt; Works locally  \r\n-&gt; Doesn&#39;t work across machines\r\n\r\nSame with broadcast (interfaceAddress.getBroadcast()). Works locally (Sending from one port to another), but not across machines. \r\n\r\nSo how do I programmatically decide if these work?","title":"Find out if UDP Broadcast (IPv4) or multicast (IPv6) are enabled in the current network?","body":"<p>So I'd like an automated network discovery for  the application I'm currently building, but turns out we're not in a perfect world and neither does every network have IPv6 enabled for multicasting, nor is IPv4 UDP broadcast enabled in every network.</p>\n<p>Any idea how I can programmatically find out, if either of those are enabled in the current network? Since UDP doesn't open a connection, I can just throw datagrams and hope someone finds it, then if noone else answers after a set time (or like, offer the user a button for manual discovery from the beginning) use user provided information (or a name service / registry I'd have to host somewhere).</p>\n<p>Looks like sending a multicast is received on my own machine when I send it from one port to the other, but I can't be sure it actually goes out of the device and back in or it just loops back because it's being clever.</p>\n<p>I'd prefer multicast of course - broadcast would be the fallback here.</p>\n<p><strong>Update</strong></p>\n<p>Tried things in the eduroam network:</p>\n<p>Made new <code>MulticastSocket</code> and joined the multicast using <code>joinGroup</code>.<br />\nMade new <code>DatagramSocker</code> and sent a message to that multicast group<br />\n-&gt; Works locally<br />\n-&gt; Doesn't work across machines</p>\n<p>Same with broadcast (interfaceAddress.getBroadcast()). Works locally (Sending from one port to another), but not across machines.</p>\n<p>So how do I programmatically decide if these work?</p>\n"},{"tags":["java","swing","jfilechooser","filechooser"],"comments":[{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":2,"creation_date":1668688680,"post_id":74475473,"comment_id":131469799,"body_markdown":"What was the problem with `Locale.setDefault(new Locale(&quot;es&quot;, &quot;...&quot;));`?","body":"What was the problem with <code>Locale.setDefault(new Locale(&quot;es&quot;, &quot;...&quot;));</code>?"},{"owner":{"account_id":25682631,"reputation":21,"user_id":19445204,"display_name":"Mat2002"},"score":0,"creation_date":1668689014,"post_id":74475473,"comment_id":131469918,"body_markdown":"I have tried that but don&#39;t know why it&#39;s not working as intended, what should you put in the &quot;...&quot;?","body":"I have tried that but don&#39;t know why it&#39;s not working as intended, what should you put in the &quot;...&quot;?"},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1668689277,"post_id":74475473,"comment_id":131470012,"body_markdown":"The country, like &quot;ES&quot;.","body":"The country, like &quot;ES&quot;."},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1668689411,"post_id":74475473,"comment_id":131470062,"body_markdown":"There are many properties in UIManage, like &quot;Cancel&quot;. Not really familiar with myself.","body":"There are many properties in UIManage, like &quot;Cancel&quot;. Not really familiar with myself."},{"owner":{"account_id":25682631,"reputation":21,"user_id":19445204,"display_name":"Mat2002"},"score":0,"creation_date":1668689602,"post_id":74475473,"comment_id":131470145,"body_markdown":"I have added Locale.setDefault(new Locale(&quot;es&quot;,&quot;ES&quot;); but it still doesn&#39;t work, should i put it before or after the initComponents()?","body":"I have added Locale.setDefault(new Locale(&quot;es&quot;,&quot;ES&quot;); but it still doesn&#39;t work, should i put it before or after the initComponents()?"},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1668689928,"post_id":74475473,"comment_id":131470284,"body_markdown":"Before. Not entirely confident it works. There are also SPANISH constants probably.","body":"Before. Not entirely confident it works. There are also SPANISH constants probably."},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1668689988,"post_id":74475473,"comment_id":131470315,"body_markdown":"In every case the file chooser can be severely customized, butons and such.","body":"In every case the file chooser can be severely customized, butons and such."},{"owner":{"account_id":9059972,"reputation":3080,"user_id":6746785,"display_name":"gthanop"},"score":0,"creation_date":1668701550,"post_id":74475473,"comment_id":131475299,"body_markdown":"@Mat2002 how did you fix it?","body":"@Mat2002 how did you fix it?"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":2,"creation_date":1668702694,"post_id":74475473,"comment_id":131475727,"body_markdown":"_Fixed it!_ I see that you have the [informed](https://stackoverflow.com/help/badges/2600/informed?userid=19445204) badge which means you read the [tour] page and therefore you read this: _With your help, we&#39;re working together to build a library of detailed, high-quality answers to every question about programming._ Other people may be trying, unsuccessfully, to do what you have succeeded in doing and so may benefit from your &quot;fix&quot;. You can [answer your own question](https://stackoverflow.com/help/self-answer).","body":"<i>Fixed it!</i> I see that you have the <a href=\"https://stackoverflow.com/help/badges/2600/informed?userid=19445204\">informed</a> badge which means you read the <a href=\"https://stackoverflow.com/tour\">tour</a> page and therefore you read this: <i>With your help, we&#39;re working together to build a library of detailed, high-quality answers to every question about programming.</i> Other people may be trying, unsuccessfully, to do what you have succeeded in doing and so may benefit from your &quot;fix&quot;. You can <a href=\"https://stackoverflow.com/help/self-answer\">answer your own question</a>."}],"owner":{"account_id":25682631,"reputation":21,"user_id":19445204,"display_name":"Mat2002"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":0,"score":0,"last_activity_date":1668688042,"creation_date":1668688042,"question_id":74475473,"body_markdown":"I&#39;m doing a program that requests that I change the names on the labels of my filechooser in java\r\nI have tried multiple ways with no results.\r\nI want to switch the language to spanish that&#39;s why I can&#39;t use Locale\r\n\r\n\r\n\r\nFound this code online but don&#39;t know how to implement it:\r\nUIManager.put(&quot;FileChooser.openDialogTitleText&quot;,&quot;your text here&quot;);\r\nSwingUtilities.updateComponentTreeUI(rootComponent);","title":"Changing the language of a filechooser java","body":"<p>I'm doing a program that requests that I change the names on the labels of my filechooser in java\nI have tried multiple ways with no results.\nI want to switch the language to spanish that's why I can't use Locale</p>\n<p>Found this code online but don't know how to implement it:\nUIManager.put(&quot;FileChooser.openDialogTitleText&quot;,&quot;your text here&quot;);\nSwingUtilities.updateComponentTreeUI(rootComponent);</p>\n"},{"tags":["java","mysql","jdbc"],"comments":[{"owner":{"account_id":114128,"reputation":50467,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":1,"creation_date":1668685561,"post_id":74474789,"comment_id":131468704,"body_markdown":"It would help if you created methods for the database connection and for the individual SQL statements.  Separate methods can be tested separately.","body":"It would help if you created methods for the database connection and for the individual SQL statements.  Separate methods can be tested separately."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1668685726,"post_id":74474789,"comment_id":131468754,"body_markdown":"Please post the entire stacktrace (use `e.printStackTrace()`, not `System.out.println(e)`)","body":"Please post the entire stacktrace (use <code>e.printStackTrace()</code>, not <code>System.out.println(e)</code>)"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1668685809,"post_id":74474789,"comment_id":131468787,"body_markdown":"And please learn how to use prepared statements and parameters. You should not concatenate values into a query string like this, it makes your code vulnerable to SQL injection.","body":"And please learn how to use prepared statements and parameters. You should not concatenate values into a query string like this, it makes your code vulnerable to SQL injection."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1668685862,"post_id":74474789,"comment_id":131468812,"body_markdown":"The problem is the call `insertQueryGetId(&quot;SELECT workoutID FROM workout&quot;)`. The `insertQueryGetId` method uses `executeUpdate`, which cannot work with a select.","body":"The problem is the call <code>insertQueryGetId(&quot;SELECT workoutID FROM workout&quot;)</code>. The <code>insertQueryGetId</code> method uses <code>executeUpdate</code>, which cannot work with a select."}],"answers":[{"tags":[],"owner":{"account_id":26900313,"reputation":83,"user_id":20477563,"display_name":"Syed Asad Manzoor"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668686957,"creation_date":1668686608,"answer_id":74475151,"question_id":74474789,"body_markdown":"        public void  insertIntoWorkoutLogs(String field_setNumber, String field_repNumber, String field_weightAmount) {\r\n            try{\r\n                Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\r\n                Connection connection= DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/workout&quot;,&quot;root&quot;,&quot;&quot;);\r\n                Statement statement =connection.createStatement();\r\n        \r\n                String insert =&quot;INSERT INTO `workout`.`workoutlogs`&quot; + &quot; (`SetNumber`, `RepNumber` , `WeightAmount`)&quot;\r\n                          + &quot;VALUES(&#39;&quot; +field_setNumber+&quot;&#39;,&#39;&quot;+field_repNumber+&quot;&#39;,&#39;&quot;+field_weightAmount+&quot;&#39;)&quot;;\r\n                statement.executeUpdate(insert);\r\n        \r\n                **int workoutID = insertQueryGetId(&quot;SELECT workoutID FROM workout&quot;);** // Line of Concern 1\r\n        \r\n                String insert2 =&quot;INSERT INTO `workout`.`workoutlogs`&quot; + &quot; (`WorkoutID`)&quot;\r\n                          + &quot;VALUES(&#39;&quot; +workoutID+&quot;&#39;)&quot;;\r\n                statement.executeUpdate(insert2);\r\n        \r\n                connection.close();\r\n            }catch(Exception e) {\r\n                System.out.println(e);\r\n            }\r\n        }\r\n        \r\n        public int insertQueryGetId(String query) throws ClassNotFoundException, SQLException {\r\n            Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\r\n            Connection connection= DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/workout&quot;,&quot;root&quot;,&quot;&quot;);\r\n            Statement statement =connection.createStatement();\r\n            \r\n            int workoutID=0;\r\n            int result=-1;\r\n            \r\n            try {\r\n    // Line of Concern  2\r\n                **workoutID = statement.executeUpdate(query, Statement.RETURN_GENERATED_KEYS);**  \r\n\r\n&gt; In line (marked as Line of Concern 1 ..\r\n****int workoutID = insertQueryGetId(&quot;SELECT workoutID FROM workout&quot;);**** you are passing query as &quot;SELECT....&quot; and at point marked as Line of Concern 2\r\n****workoutID = statement.*executeUpdate(query*, Statement.RETURN_GENERATED_KEYS);****   you are using executeUpdate..  thats why exception is thrown. \r\n\r\n**Change statement.executeUpdate(query) to statement.executeQuery(query)..** \r\n\r\n            \r\n","title":"Getting error &quot;statement.executeupdate() cannot issue statements that produce result sets.&quot; when trying to insert into mysql using JDBC","body":"<pre><code>    public void  insertIntoWorkoutLogs(String field_setNumber, String field_repNumber, String field_weightAmount) {\n        try{\n            Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\n            Connection connection= DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/workout&quot;,&quot;root&quot;,&quot;&quot;);\n            Statement statement =connection.createStatement();\n    \n            String insert =&quot;INSERT INTO `workout`.`workoutlogs`&quot; + &quot; (`SetNumber`, `RepNumber` , `WeightAmount`)&quot;\n                      + &quot;VALUES('&quot; +field_setNumber+&quot;','&quot;+field_repNumber+&quot;','&quot;+field_weightAmount+&quot;')&quot;;\n            statement.executeUpdate(insert);\n    \n            **int workoutID = insertQueryGetId(&quot;SELECT workoutID FROM workout&quot;);** // Line of Concern 1\n    \n            String insert2 =&quot;INSERT INTO `workout`.`workoutlogs`&quot; + &quot; (`WorkoutID`)&quot;\n                      + &quot;VALUES('&quot; +workoutID+&quot;')&quot;;\n            statement.executeUpdate(insert2);\n    \n            connection.close();\n        }catch(Exception e) {\n            System.out.println(e);\n        }\n    }\n    \n    public int insertQueryGetId(String query) throws ClassNotFoundException, SQLException {\n        Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\n        Connection connection= DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/workout&quot;,&quot;root&quot;,&quot;&quot;);\n        Statement statement =connection.createStatement();\n        \n        int workoutID=0;\n        int result=-1;\n        \n        try {\n// Line of Concern  2\n            **workoutID = statement.executeUpdate(query, Statement.RETURN_GENERATED_KEYS);**  \n</code></pre>\n<blockquote>\n<p>In line (marked as Line of Concern 1 ..\n<strong><strong>int workoutID = insertQueryGetId(&quot;SELECT workoutID FROM workout&quot;);</strong></strong> you are passing query as &quot;SELECT....&quot; and at point marked as Line of Concern 2\n<strong><strong>workoutID = statement.<em>executeUpdate(query</em>, Statement.RETURN_GENERATED_KEYS);</strong></strong>   you are using executeUpdate..  thats why exception is thrown.</p>\n</blockquote>\n<p><strong>Change statement.executeUpdate(query) to statement.executeQuery(query)..</strong></p>\n"},{"tags":[],"owner":{"account_id":26647805,"reputation":11,"user_id":20262528,"display_name":"Akash"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1668686941,"creation_date":1668686806,"answer_id":74475188,"question_id":74474789,"body_markdown":"It&#39;s because you are passing wrong query. `Statement.RETURN_GENERATED_KEYS` works with **Insert** queries not with **Select** queries.\r\nWhen you insert a row in database, an auto increment value gets generated and is returned but you are passing a Select statement\r\n\r\nAs Syed Asad Manzoor said, it will work for you but then you need to remove `Statement.RETURN_GENERATED_KEYS` and `statement.executeQuery()` has return type of `ResultSet` so you need to store the result in `ResultSet` only.","title":"Getting error &quot;statement.executeupdate() cannot issue statements that produce result sets.&quot; when trying to insert into mysql using JDBC","body":"<p>It's because you are passing wrong query. <code>Statement.RETURN_GENERATED_KEYS</code> works with <strong>Insert</strong> queries not with <strong>Select</strong> queries.\nWhen you insert a row in database, an auto increment value gets generated and is returned but you are passing a Select statement</p>\n<p>As Syed Asad Manzoor said, it will work for you but then you need to remove <code>Statement.RETURN_GENERATED_KEYS</code> and <code>statement.executeQuery()</code> has return type of <code>ResultSet</code> so you need to store the result in <code>ResultSet</code> only.</p>\n"},{"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668688015,"creation_date":1668688015,"answer_id":74475469,"question_id":74474789,"body_markdown":"The INSERT statement needs to have flag RETURN_GENERATED_KEYS.\r\nThen getting the ResultSet would deliver for every insert record the generated key(s).\r\n\r\nAlso use a PreparedStatement for escaping of strings and against SQL injection.\r\n\r\nUse try-with-resources to automatically close the several objects, even with exception or early return.\r\n\r\n    Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\r\n    try (Connection connection = DriverManager.getConnection(\r\n            &quot;jdbc:mysql://localhost:3306/workout&quot;, &quot;root&quot;, &quot;&quot;)) {\r\n        String insertSql = &quot;INSERT INTO `workout`.`workoutlogs`&quot;\r\n                + &quot; (`SetNumber`, `RepNumber` , `WeightAmount`)&quot;\r\n                + &quot; VALUES(?, ?, ?)&quot;;\r\n        try (PreparedStatement statement = connection.prepareStatement(insertSql,\r\n                Statement.RETURN_GENERATED_KEYS)) {\r\n            statement.setString(field_setNumber);\r\n            statement.setString(field_repNumber);\r\n            statement.setBigDecimal(field_weightAmount);\r\n            statement.executeUpdate();\r\n            try (ResultSet rs = statement.getGeneratedKey()) {\r\n                if (rs.next()) {\r\n                    int workoutID = rs.getInt(0);\r\n                    //... second insert here\r\n                }\r\n            }\r\n        }\r\n    }\r\n","title":"Getting error &quot;statement.executeupdate() cannot issue statements that produce result sets.&quot; when trying to insert into mysql using JDBC","body":"<p>The INSERT statement needs to have flag RETURN_GENERATED_KEYS.\nThen getting the ResultSet would deliver for every insert record the generated key(s).</p>\n<p>Also use a PreparedStatement for escaping of strings and against SQL injection.</p>\n<p>Use try-with-resources to automatically close the several objects, even with exception or early return.</p>\n<pre><code>Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\ntry (Connection connection = DriverManager.getConnection(\n        &quot;jdbc:mysql://localhost:3306/workout&quot;, &quot;root&quot;, &quot;&quot;)) {\n    String insertSql = &quot;INSERT INTO `workout`.`workoutlogs`&quot;\n            + &quot; (`SetNumber`, `RepNumber` , `WeightAmount`)&quot;\n            + &quot; VALUES(?, ?, ?)&quot;;\n    try (PreparedStatement statement = connection.prepareStatement(insertSql,\n            Statement.RETURN_GENERATED_KEYS)) {\n        statement.setString(field_setNumber);\n        statement.setString(field_repNumber);\n        statement.setBigDecimal(field_weightAmount);\n        statement.executeUpdate();\n        try (ResultSet rs = statement.getGeneratedKey()) {\n            if (rs.next()) {\n                int workoutID = rs.getInt(0);\n                //... second insert here\n            }\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":26962028,"reputation":1,"user_id":20529569,"display_name":"mrjbcam"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":362,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1668688015,"creation_date":1668684931,"question_id":74474789,"body_markdown":"I&#39;m trying to get the primary auto incremented key from one table and store this in another using MySQL connector and JDBC. Although its giving me this error:\r\n\r\n&gt; statement.executeupdate() cannot issue statements that produce result\r\n&gt; sets.\r\n\r\nI think its something to do with the storing of the integer variable but not too sure.\r\n\r\n```\r\npublic void  insertIntoWorkoutLogs(String field_setNumber, String field_repNumber, String field_weightAmount) {\r\n    try{\r\n        Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\r\n        Connection connection= DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/workout&quot;,&quot;root&quot;,&quot;&quot;);\r\n        Statement statement =connection.createStatement();\r\n\r\n        String insert =&quot;INSERT INTO `workout`.`workoutlogs`&quot; + &quot; (`SetNumber`, `RepNumber` , `WeightAmount`)&quot;\r\n                  + &quot;VALUES(&#39;&quot; +field_setNumber+&quot;&#39;,&#39;&quot;+field_repNumber+&quot;&#39;,&#39;&quot;+field_weightAmount+&quot;&#39;)&quot;;\r\n        statement.executeUpdate(insert);\r\n\r\n        int workoutID = insertQueryGetId(&quot;SELECT workoutID FROM workout&quot;);\r\n\r\n        String insert2 =&quot;INSERT INTO `workout`.`workoutlogs`&quot; + &quot; (`WorkoutID`)&quot;\r\n                  + &quot;VALUES(&#39;&quot; +workoutID+&quot;&#39;)&quot;;\r\n        statement.executeUpdate(insert2);\r\n\r\n        connection.close();\r\n    }catch(Exception e) {\r\n        System.out.println(e);\r\n    }\r\n}\r\n\r\npublic int insertQueryGetId(String query) throws ClassNotFoundException, SQLException {\r\n    Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\r\n    Connection connection= DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/workout&quot;,&quot;root&quot;,&quot;&quot;);\r\n    Statement statement =connection.createStatement();\r\n    \r\n    int workoutID=0;\r\n    int result=-1;\r\n    \r\n    try {\r\n        workoutID = statement.executeUpdate(query, Statement.RETURN_GENERATED_KEYS);\r\n        \r\n        ResultSet rs = statement.getGeneratedKeys();\r\n        if (rs.next()){\r\n            result=rs.getInt(1);\r\n        }\r\n        rs.close();\r\n        \r\n        statement.close();\r\n    \r\n    } catch (Exception e) {\r\n        e.printStackTrace();\r\n    }\r\n    return result;\r\n}\r\n```\r\n\r\nI&#39;ve tried using statement for this, but I&#39;m thinking it may have to be prepared statement for it to work. Expecting to store the auto incremented primary key of one table (workouts) into a field within another table (workoutlogs).","title":"Getting error &quot;statement.executeupdate() cannot issue statements that produce result sets.&quot; when trying to insert into mysql using JDBC","body":"<p>I'm trying to get the primary auto incremented key from one table and store this in another using MySQL connector and JDBC. Although its giving me this error:</p>\n<blockquote>\n<p>statement.executeupdate() cannot issue statements that produce result\nsets.</p>\n</blockquote>\n<p>I think its something to do with the storing of the integer variable but not too sure.</p>\n<pre><code>public void  insertIntoWorkoutLogs(String field_setNumber, String field_repNumber, String field_weightAmount) {\n    try{\n        Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\n        Connection connection= DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/workout&quot;,&quot;root&quot;,&quot;&quot;);\n        Statement statement =connection.createStatement();\n\n        String insert =&quot;INSERT INTO `workout`.`workoutlogs`&quot; + &quot; (`SetNumber`, `RepNumber` , `WeightAmount`)&quot;\n                  + &quot;VALUES('&quot; +field_setNumber+&quot;','&quot;+field_repNumber+&quot;','&quot;+field_weightAmount+&quot;')&quot;;\n        statement.executeUpdate(insert);\n\n        int workoutID = insertQueryGetId(&quot;SELECT workoutID FROM workout&quot;);\n\n        String insert2 =&quot;INSERT INTO `workout`.`workoutlogs`&quot; + &quot; (`WorkoutID`)&quot;\n                  + &quot;VALUES('&quot; +workoutID+&quot;')&quot;;\n        statement.executeUpdate(insert2);\n\n        connection.close();\n    }catch(Exception e) {\n        System.out.println(e);\n    }\n}\n\npublic int insertQueryGetId(String query) throws ClassNotFoundException, SQLException {\n    Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\n    Connection connection= DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/workout&quot;,&quot;root&quot;,&quot;&quot;);\n    Statement statement =connection.createStatement();\n    \n    int workoutID=0;\n    int result=-1;\n    \n    try {\n        workoutID = statement.executeUpdate(query, Statement.RETURN_GENERATED_KEYS);\n        \n        ResultSet rs = statement.getGeneratedKeys();\n        if (rs.next()){\n            result=rs.getInt(1);\n        }\n        rs.close();\n        \n        statement.close();\n    \n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n    return result;\n}\n</code></pre>\n<p>I've tried using statement for this, but I'm thinking it may have to be prepared statement for it to work. Expecting to store the auto incremented primary key of one table (workouts) into a field within another table (workoutlogs).</p>\n"},{"tags":["javascript","java","base64","decoding","cryptojs"],"comments":[{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1668688063,"post_id":74475421,"comment_id":131469573,"body_markdown":"Base64 is a way to take binary data and encode it in human readable ASCII. Take three 8 bit values, and output four base64 values. To decode you do the reverse. There are 3 distinct Base64 alphabets, so you&#39;ll need to find the correct one.","body":"Base64 is a way to take binary data and encode it in human readable ASCII. Take three 8 bit values, and output four base64 values. To decode you do the reverse. There are 3 distinct Base64 alphabets, so you&#39;ll need to find the correct one."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1668688078,"post_id":74475421,"comment_id":131469584,"body_markdown":"I don&#39;t normally do JavaScript, but wouldn&#39;t the equivalent be `atob(encryptedString)`?","body":"I don&#39;t normally do JavaScript, but wouldn&#39;t the equivalent be <code>atob(encryptedString)</code>?"},{"owner":{"account_id":26953597,"reputation":1,"user_id":20522388,"display_name":"Riya"},"score":0,"creation_date":1668697147,"post_id":74475421,"comment_id":131473403,"body_markdown":"atob is now depricated, and I foud way to decode Uint8Arrays to string (base64 conversion). But I am looking for a way to decode Uint8array to decode into Uint8array (not to string). I am confused in this part as the Java function Base64Utils.decode() is taking byte array and returning bytearray again","body":"atob is now depricated, and I foud way to decode Uint8Arrays to string (base64 conversion). But I am looking for a way to decode Uint8array to decode into Uint8array (not to string). I am confused in this part as the Java function Base64Utils.decode() is taking byte array and returning bytearray again"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1668698992,"post_id":74475421,"comment_id":131474228,"body_markdown":"*I am confused in this part as the Java function Base64Utils.decode() is taking byte array and returning bytearray again* Because base64 usually encodes binary data, which can&#39;t be used to create a string","body":"<i>I am confused in this part as the Java function Base64Utils.decode() is taking byte array and returning bytearray again</i> Because base64 usually encodes binary data, which can&#39;t be used to create a string"}],"owner":{"account_id":26953597,"reputation":1,"user_id":20522388,"display_name":"Riya"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1668687970,"creation_date":1668687821,"question_id":74475421,"body_markdown":"I have an encryption and decryption method in Java. I want to create same decryption function in JavaScript. I am translating line by line, but have an issue in one line as I am not able to understand that. That line is:\r\n```java\r\nbyte[] dec = Base64Utils.decode(encryptedString.getBytes());\r\n```\r\n\r\nHow can I do this in JavaScript. I know .getBytes can be replicated by using text encoder, but I&#39;m not sure about base64 decoding it.\r\n\r\nFor reference, here is the Java method I am trying to replicate\r\n\r\n```java\r\npublic String decrypti(String encryptedString, String encodekey) {\r\n    try {\r\n        if (encryptedString != null) {\r\n            encryptedString = encryptedString.replace(&quot;-&quot;, &quot;+&quot;).replace(&quot;_&quot;, &quot;/&quot;).concat(&quot;==&quot;);\r\n\r\n            Cipher dcipher = Cipher.getInstance(&quot;AES&quot;);\r\n            byte[] key = encodekey.getBytes(StandardCharsets.UTF_8);\r\n            MessageDigest sha = MessageDigest.getInstance(&quot;SHA-1&quot;);\r\n            key = sha.digest(key);\r\n            key = Arrays.copyOf(key, 16); // use only first 128 bit\r\n\r\n            SecretKeySpec secretKeySpec = new SecretKeySpec(key, transformation);\r\n\r\n            dcipher.init(Cipher.DECRYPT_MODE, secretKeySpec);\r\n            // decode with base64 to get bytes\r\n            byte[] dec = Base64Utils.decode(encryptedString.getBytes());\r\n            byte[] utf8 = dcipher.doFinal(dec);\r\n\r\n            // create new string based on the specified charset\r\n            return new String(utf8, StandardCharsets.UTF_8);\r\n        }\r\n\r\n    } catch (Exception e) {\r\n        log.error(&quot;Error during decrypting code - {}&quot;, e.getMessage());\r\n    }\r\n    return null;\r\n}\r\n```\r\n\r\nAnd here is the JavaScript code that I have written till now:\r\n```javascript\r\nconst decrypt = (encodedString, encodeKey) =&gt; {\r\n  let encrptedStr = encodedString.replace(/-/g, &quot;_&quot;).replace(/\\+/g, &quot;/&quot;).concat(&quot;==&quot;);\r\n  \r\n  const encoder = new TextEncoder(&#39;UTF-8&#39;);\r\n  const bytes = encoder.encode(encodeKey);  // reference to encodekey.getBytes(StandardCharsets.UTF_8);\r\n  const sha1Hash = CryptoJS.SHA1(bytes);                        // Create SHA1 hash\r\n  const secretAesKey = CryptoJS.lib.WordArray.create(sha1Hash.words.slice(0, 4)); \r\n\r\n  const decryptedBytes = CryptoJS.AES.decrypt(\r\n    encrptedStr,\r\n    secretAesKey,\r\n  );\r\n  const finalDecryptedValue = decryptedBytes.toString(CryptoJS.enc.Utf8);\r\n  return finalDecryptedValue;\r\n}\r\n```\r\n","title":"Javascript syntax for Base64Utils.decode() java code","body":"<p>I have an encryption and decryption method in Java. I want to create same decryption function in JavaScript. I am translating line by line, but have an issue in one line as I am not able to understand that. That line is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>byte[] dec = Base64Utils.decode(encryptedString.getBytes());\n</code></pre>\n<p>How can I do this in JavaScript. I know .getBytes can be replicated by using text encoder, but I'm not sure about base64 decoding it.</p>\n<p>For reference, here is the Java method I am trying to replicate</p>\n<pre class=\"lang-java prettyprint-override\"><code>public String decrypti(String encryptedString, String encodekey) {\n    try {\n        if (encryptedString != null) {\n            encryptedString = encryptedString.replace(&quot;-&quot;, &quot;+&quot;).replace(&quot;_&quot;, &quot;/&quot;).concat(&quot;==&quot;);\n\n            Cipher dcipher = Cipher.getInstance(&quot;AES&quot;);\n            byte[] key = encodekey.getBytes(StandardCharsets.UTF_8);\n            MessageDigest sha = MessageDigest.getInstance(&quot;SHA-1&quot;);\n            key = sha.digest(key);\n            key = Arrays.copyOf(key, 16); // use only first 128 bit\n\n            SecretKeySpec secretKeySpec = new SecretKeySpec(key, transformation);\n\n            dcipher.init(Cipher.DECRYPT_MODE, secretKeySpec);\n            // decode with base64 to get bytes\n            byte[] dec = Base64Utils.decode(encryptedString.getBytes());\n            byte[] utf8 = dcipher.doFinal(dec);\n\n            // create new string based on the specified charset\n            return new String(utf8, StandardCharsets.UTF_8);\n        }\n\n    } catch (Exception e) {\n        log.error(&quot;Error during decrypting code - {}&quot;, e.getMessage());\n    }\n    return null;\n}\n</code></pre>\n<p>And here is the JavaScript code that I have written till now:</p>\n<pre class=\"lang-js prettyprint-override\"><code>const decrypt = (encodedString, encodeKey) =&gt; {\n  let encrptedStr = encodedString.replace(/-/g, &quot;_&quot;).replace(/\\+/g, &quot;/&quot;).concat(&quot;==&quot;);\n  \n  const encoder = new TextEncoder('UTF-8');\n  const bytes = encoder.encode(encodeKey);  // reference to encodekey.getBytes(StandardCharsets.UTF_8);\n  const sha1Hash = CryptoJS.SHA1(bytes);                        // Create SHA1 hash\n  const secretAesKey = CryptoJS.lib.WordArray.create(sha1Hash.words.slice(0, 4)); \n\n  const decryptedBytes = CryptoJS.AES.decrypt(\n    encrptedStr,\n    secretAesKey,\n  );\n  const finalDecryptedValue = decryptedBytes.toString(CryptoJS.enc.Utf8);\n  return finalDecryptedValue;\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","hibernate","spring-data-jpa"],"comments":[{"owner":{"account_id":6410870,"reputation":1742,"user_id":4970679,"display_name":"ahuemmer"},"score":0,"creation_date":1668686788,"post_id":74474153,"comment_id":131469163,"body_markdown":"Welcome to SO. I&#39;ve submitted an edit request to your post as there&#39;s not need to use the maximum font size for your paragraph. Also, it might be hard to help you without knowing at least the code you use to apply the filtering.","body":"Welcome to SO. I&#39;ve submitted an edit request to your post as there&#39;s not need to use the maximum font size for your paragraph. Also, it might be hard to help you without knowing at least the code you use to apply the filtering."},{"owner":{"account_id":26344333,"reputation":1,"user_id":20002956,"display_name":"Kerem Shtyn"},"score":0,"creation_date":1668687904,"post_id":74474153,"comment_id":131469518,"body_markdown":"Thanks. Do you have any idea for the problem?","body":"Thanks. Do you have any idea for the problem?"},{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1668688142,"post_id":74474153,"comment_id":131469605,"body_markdown":"Do you use Lombok? How do you do the mapping from Entity to DTO?","body":"Do you use Lombok? How do you do the mapping from Entity to DTO?"},{"owner":{"account_id":26344333,"reputation":1,"user_id":20002956,"display_name":"Kerem Shtyn"},"score":0,"creation_date":1668691629,"post_id":74474153,"comment_id":131471022,"body_markdown":"Yes, i use Lombok. I use mappers to map Entity to Domain and Domain to DTO.","body":"Yes, i use Lombok. I use mappers to map Entity to Domain and Domain to DTO."},{"owner":{"account_id":6410870,"reputation":1742,"user_id":4970679,"display_name":"ahuemmer"},"score":0,"creation_date":1668691792,"post_id":74474153,"comment_id":131471085,"body_markdown":"@KeremShtyn as Simon and I said, it&#39;s quite difficult to help you without your mapping and/or filtering code...","body":"@KeremShtyn as Simon and I said, it&#39;s quite difficult to help you without your mapping and/or filtering code..."},{"owner":{"account_id":26344333,"reputation":1,"user_id":20002956,"display_name":"Kerem Shtyn"},"score":0,"creation_date":1668694356,"post_id":74474153,"comment_id":131472204,"body_markdown":"Actually I solved the problem but reason of the problem was not about mapping or filtering. Problem is about relations and toString.Firstly, I added @JsonIgnore annotation to OneToMany relations. Then, toString excludes should have applied to Entity.After that, my problem solved and application launched with zero defect.","body":"Actually I solved the problem but reason of the problem was not about mapping or filtering. Problem is about relations and toString.Firstly, I added @JsonIgnore annotation to OneToMany relations. Then, toString excludes should have applied to Entity.After that, my problem solved and application launched with zero defect."}],"owner":{"account_id":26344333,"reputation":1,"user_id":20002956,"display_name":"Kerem Shtyn"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1668687863,"creation_date":1668682238,"question_id":74474153,"body_markdown":"This is the entity that I want to apply filtering to. It has a `ManyToOne` relationship with `x` entity.\r\n\r\n```java\r\npublic class BaseEntity {\r\n\r\n\r\n    private String identifier;\r\n\r\n    \r\n    private String type;\r\n\r\n\r\n    private String model;\r\n\r\n\r\n    private Integer capacity;\r\n\r\n\r\n    private Integer point;\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;x_id&quot;)\r\n    private XEntity x;\r\n\r\n// getter, setters and constructors...\r\n\r\n}\r\n```\r\n\r\nAnd this is the entity which has `OneToMany` relationship with base entity is also has.\r\n\r\n```java\r\npublic class XEntity {\r\n\r\n\r\n    private String identifier;\r\n\r\n\r\n    private String code;\r\n\r\n\r\n    private String name;\r\n\r\n\r\n    private String country;\r\n\r\n\r\n    @OneToMany(mappedBy = &quot;x&quot;,cascade = {CascadeType.MERGE,CascadeType.PERSIST})\r\n    private Set&lt;BaseEntity&gt; bases;\r\n\r\n    @OneToMany(mappedBy = &quot;x&quot;,cascade = {CascadeType.MERGE,CascadeType.PERSIST})\r\n    private Set&lt;YEntity&gt; y;\r\n\r\n    // getter, setters and constructors...\r\n\r\n}\r\n```\r\n\r\nWhen I tried to code filtering with Spring Data JPA, a `StackOverflowError` has occured on mapping the `y` object in an `x` object. \r\n\r\nMY ONLY PROBLEM IS:\r\nI mapped join columns as their id columns in domain and dto layers and expect not to get the error, but it occurred.\r\n\r\nHow do I solve the problem?\r\n\r\n[This is my debug console when I launch the search request on the controller, it is showing `x` entity which tries mapping to `y` entity inside the object.]\r\n https://i.stack.imgur.com/DaiVv.png","title":"How to fix an StackOverflow Error in Searching and Filtering with Spring Data Jpa with multi relational Data Tables","body":"<p>This is the entity that I want to apply filtering to. It has a <code>ManyToOne</code> relationship with <code>x</code> entity.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class BaseEntity {\n\n\n    private String identifier;\n\n    \n    private String type;\n\n\n    private String model;\n\n\n    private Integer capacity;\n\n\n    private Integer point;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;x_id&quot;)\n    private XEntity x;\n\n// getter, setters and constructors...\n\n}\n</code></pre>\n<p>And this is the entity which has <code>OneToMany</code> relationship with base entity is also has.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class XEntity {\n\n\n    private String identifier;\n\n\n    private String code;\n\n\n    private String name;\n\n\n    private String country;\n\n\n    @OneToMany(mappedBy = &quot;x&quot;,cascade = {CascadeType.MERGE,CascadeType.PERSIST})\n    private Set&lt;BaseEntity&gt; bases;\n\n    @OneToMany(mappedBy = &quot;x&quot;,cascade = {CascadeType.MERGE,CascadeType.PERSIST})\n    private Set&lt;YEntity&gt; y;\n\n    // getter, setters and constructors...\n\n}\n</code></pre>\n<p>When I tried to code filtering with Spring Data JPA, a <code>StackOverflowError</code> has occured on mapping the <code>y</code> object in an <code>x</code> object.</p>\n<p>MY ONLY PROBLEM IS:\nI mapped join columns as their id columns in domain and dto layers and expect not to get the error, but it occurred.</p>\n<p>How do I solve the problem?</p>\n<p>[This is my debug console when I launch the search request on the controller, it is showing <code>x</code> entity which tries mapping to <code>y</code> entity inside the object.]\n<a href=\"https://i.stack.imgur.com/DaiVv.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/DaiVv.png</a></p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9346,"page":877,"page_size":100}
