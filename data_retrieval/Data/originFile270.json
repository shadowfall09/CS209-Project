{"items":[{"tags":["java","redis","concurrency","thread-safety","redisson"],"owner":{"account_id":28825877,"reputation":1,"user_id":22077294,"display_name":"PhoneMyint"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691122426,"creation_date":1691122426,"question_id":76832915,"body_markdown":"Redisson client is said to be thread-safe.\r\nMy question is, if Redisson and its object instances are thread-safe, what is the use of Locks like RLock?\r\nDoes that enhance performance on multi-instance multi-concurrency environments? or Redisson is thread-safe by letting users use those Locks instead of being thread-safe itself?","title":"Is Redisson thread-safe itself?","body":"<p>Redisson client is said to be thread-safe.\nMy question is, if Redisson and its object instances are thread-safe, what is the use of Locks like RLock?\nDoes that enhance performance on multi-instance multi-concurrency environments? or Redisson is thread-safe by letting users use those Locks instead of being thread-safe itself?</p>\n"},{"tags":["java","playframework","typesafe-activator"],"comments":[{"owner":{"account_id":1317825,"reputation":12193,"user_id":1264321,"accept_rate":92,"display_name":"Stefan"},"score":0,"creation_date":1420468518,"post_id":27781328,"comment_id":43973227,"body_markdown":"http://stackoverflow.com/questions/19391014/play-2-2-application-crashes-on-heroku","body":"<a href=\"http://stackoverflow.com/questions/19391014/play-2-2-application-crashes-on-heroku\" title=\"play 2 2 application crashes on heroku\">stackoverflow.com/questions/19391014/&hellip;</a>"},{"owner":{"account_id":2538296,"reputation":2849,"user_id":2312605,"accept_rate":37,"display_name":"Ashish Ratan"},"score":0,"creation_date":1420524764,"post_id":27781328,"comment_id":43995474,"body_markdown":"i have already visited the link... there is not my situation to solve. thanks for the link :)","body":"i have already visited the link... there is not my situation to solve. thanks for the link :)"},{"owner":{"account_id":4374451,"reputation":3112,"user_id":3567830,"display_name":"edi"},"score":2,"creation_date":1420541100,"post_id":27781328,"comment_id":44002454,"body_markdown":"FYI, there&#39;s also an open [github issue](https://github.com/playframework/playframework/issues/3081).","body":"FYI, there&#39;s also an open <a href=\"https://github.com/playframework/playframework/issues/3081\" rel=\"nofollow noreferrer\">github issue</a>."}],"answers":[{"tags":[],"owner":{"account_id":2843760,"reputation":897,"user_id":2442744,"accept_rate":64,"display_name":"Ubaidah"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1422564759,"creation_date":1422564759,"answer_id":28224383,"question_id":27781328,"body_markdown":"I had the same problem but only after creating a binary distribution using the dist command from the activator when I try to run the play application using the Bat file and add some configuration parameters I go the same error.\r\n\r\nHere is the error I am getting \r\n\r\n    Bad application path: -Dhttp.port=9009\r\n\r\nSo the way I solve it is by editing the Bat file. I manually add all the configuration parameters into the APP_MAIN_CLASS and before the &quot;play.core.server.NettyServer&quot;\r\n\r\nsomething like:\r\n\r\n    set &quot;APP_MAIN_CLASS= -DapplyEvolutions.default=true -Dhttp.port=9009 play.core.server.NettyServer&quot;\r\n\r\n","title":"Why does &quot;activator start&quot; fail with &quot;Bad application path&quot;?","body":"<p>I had the same problem but only after creating a binary distribution using the dist command from the activator when I try to run the play application using the Bat file and add some configuration parameters I go the same error.</p>\n\n<p>Here is the error I am getting </p>\n\n<pre><code>Bad application path: -Dhttp.port=9009\n</code></pre>\n\n<p>So the way I solve it is by editing the Bat file. I manually add all the configuration parameters into the APP_MAIN_CLASS and before the \"play.core.server.NettyServer\"</p>\n\n<p>something like:</p>\n\n<pre><code>set \"APP_MAIN_CLASS= -DapplyEvolutions.default=true -Dhttp.port=9009 play.core.server.NettyServer\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7902935,"reputation":6346,"user_id":5969411,"accept_rate":80,"display_name":"ManoDestra"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691121840,"creation_date":1691121840,"answer_id":76832892,"question_id":27781328,"body_markdown":"If you&#39;re on Windows, then I know you can include a PROJECTNAME_config.txt file and put all your settings in there, like this:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/RXm4R.png\r\n\r\nI&#39;m using Play 2.3.6 in this example.\r\n","title":"Why does &quot;activator start&quot; fail with &quot;Bad application path&quot;?","body":"<p>If you're on Windows, then I know you can include a PROJECTNAME_config.txt file and put all your settings in there, like this:</p>\n<p><a href=\"https://i.stack.imgur.com/RXm4R.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RXm4R.png\" alt=\"enter image description here\" /></a></p>\n<p>I'm using Play 2.3.6 in this example.</p>\n"}],"owner":{"account_id":2538296,"reputation":2849,"user_id":2312605,"accept_rate":37,"display_name":"Ashish Ratan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1551,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":28224383,"answer_count":2,"score":6,"last_activity_date":1691121840,"creation_date":1420467215,"question_id":27781328,"body_markdown":"I&#39;ve created an application in Play Framework using `activator new`.\r\n\r\nUpon `activator start` this application it&#39;s giving me the following error:\r\n\r\n    Bad application path: -Dhttp.port=9000\r\n\r\n![enter image description here][1]\r\n\r\nHow to solve the issue?\r\n\r\n  [1]: http://i.stack.imgur.com/YjlYw.png\r\n\r\n","title":"Why does &quot;activator start&quot; fail with &quot;Bad application path&quot;?","body":"<p>I've created an application in Play Framework using <code>activator new</code>.</p>\n\n<p>Upon <code>activator start</code> this application it's giving me the following error:</p>\n\n<pre><code>Bad application path: -Dhttp.port=9000\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/YjlYw.png\" alt=\"enter image description here\"></p>\n\n<p>How to solve the issue?</p>\n"},{"tags":["java","android","serialization","bitmap","bytebuffer"],"answers":[{"comments":[{"owner":{"account_id":397350,"reputation":454,"user_id":761428,"display_name":"tstuts"},"score":6,"creation_date":1361980834,"post_id":4989267,"comment_id":21272150,"body_markdown":"`rewind()` is the key.  I was getting the same `BufferUnderflowException` and rewinding the buffer after filling it resolved this.","body":"<code>rewind()</code> is the key.  I was getting the same <code>BufferUnderflowException</code> and rewinding the buffer after filling it resolved this."}],"tags":[],"owner":{"account_id":255665,"reputation":232836,"user_id":535871,"accept_rate":84,"display_name":"Ted Hopp"},"comment_count":1,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1297662995,"creation_date":1297662995,"answer_id":4989267,"question_id":4989182,"body_markdown":"Do you need to rewind the buffer, perhaps?\r\n\r\nAlso, this might happen if the stride (in bytes) of the bitmap is greater than the row length in pixels * bytes/pixel. Make the length of bytes b.remaining() instead of size.","title":"converting Java bitmap to byte array","body":"<p>Do you need to rewind the buffer, perhaps?</p>\n\n<p>Also, this might happen if the stride (in bytes) of the bitmap is greater than the row length in pixels * bytes/pixel. Make the length of bytes b.remaining() instead of size.</p>\n"},{"comments":[{"owner":{"account_id":90863,"reputation":14381,"user_id":249871,"accept_rate":91,"display_name":"pgsandstrom"},"score":11,"creation_date":1348058319,"post_id":4989543,"comment_id":16812824,"body_markdown":"Won&#39;t this cause problems if the image is not of type PNG?","body":"Won&#39;t this cause problems if the image is not of type PNG?"},{"owner":{"display_name":"user529543"},"score":10,"creation_date":1357639317,"post_id":4989543,"comment_id":19709485,"body_markdown":"won&#39;t because the Bitmap is a decoded image regardless what is was, like a pixel array. It will compress as a PNG, which will not lose quality at compression","body":"won&#39;t because the Bitmap is a decoded image regardless what is was, like a pixel array. It will compress as a PNG, which will not lose quality at compression"},{"owner":{"account_id":457536,"reputation":2521,"user_id":856925,"accept_rate":91,"display_name":"Kaolin Fire"},"score":5,"creation_date":1365460464,"post_id":4989543,"comment_id":22625889,"body_markdown":"better is the rewind option from @Ted Hopp —&#160;compressing it is a waste of CPU unless your goal is an encoded image....","body":"better is the rewind option from @Ted Hopp — compressing it is a waste of CPU unless your goal is an encoded image...."},{"owner":{"account_id":1108747,"reputation":486,"user_id":1099598,"accept_rate":100,"display_name":"Huy TRAN"},"score":44,"creation_date":1386693534,"post_id":4989543,"comment_id":30642523,"body_markdown":"In my experience, on low-memory system such as Android, must be attention to add bitmap.recycle(); just after the compression, and close the stream to avoid the memory leak exception.","body":"In my experience, on low-memory system such as Android, must be attention to add bitmap.recycle(); just after the compression, and close the stream to avoid the memory leak exception."},{"owner":{"account_id":1212778,"reputation":2636,"user_id":1181011,"accept_rate":67,"display_name":"alex.p"},"score":1,"creation_date":1398891119,"post_id":4989543,"comment_id":35848193,"body_markdown":"I presume this only works with ARGB_8888 images due to PNG respecting alpha channels, tried this with an RGB_565 bitmap; the original byte length was roughly 3 times as many bytes as what byteArrays length was after compression suggesting that the compression went wrong somewhere due to it expecting argb8888 I presume?","body":"I presume this only works with ARGB_8888 images due to PNG respecting alpha channels, tried this with an RGB_565 bitmap; the original byte length was roughly 3 times as many bytes as what byteArrays length was after compression suggesting that the compression went wrong somewhere due to it expecting argb8888 I presume?"},{"owner":{"account_id":2426061,"reputation":1619,"user_id":2117960,"accept_rate":100,"display_name":"zyamys"},"score":12,"creation_date":1400611877,"post_id":4989543,"comment_id":36547795,"body_markdown":"This approach is really wastefull of allocations. Your ```ByteArrayOutputStream``` will allocate a ```byte[]``` of size equal to the ```byte[]``` backing your ```Bitmap```, then ```ByteArrayOutputStream.toByteArray()``` will again allocate yet another ```byte[]``` of the same size.","body":"This approach is really wastefull of allocations. Your <code>ByteArrayOutputStream</code> will allocate a <code>byte[]</code> of size equal to the <code>byte[]</code> backing your <code>Bitmap</code>, then <code>ByteArrayOutputStream.toByteArray()</code> will again allocate yet another <code>byte[]</code> of the same size."},{"owner":{"account_id":918704,"reputation":1777,"user_id":950896,"accept_rate":74,"display_name":"Geo Paul"},"score":1,"creation_date":1411894673,"post_id":4989543,"comment_id":40870217,"body_markdown":"hmm. I am just getting a black image!","body":"hmm. I am just getting a black image!"},{"owner":{"account_id":1479215,"reputation":2511,"user_id":1388943,"accept_rate":48,"display_name":"stdout"},"score":2,"creation_date":1436797552,"post_id":4989543,"comment_id":50748816,"body_markdown":"this method destroys exif data of the given image.","body":"this method destroys exif data of the given image."},{"owner":{"account_id":2426061,"reputation":1619,"user_id":2117960,"accept_rate":100,"display_name":"zyamys"},"score":0,"creation_date":1449459671,"post_id":4989543,"comment_id":56000631,"body_markdown":"@Bugs Happen Yes, using JNI","body":"@Bugs Happen Yes, using JNI"},{"owner":{"account_id":4686941,"reputation":2426,"user_id":3794140,"accept_rate":67,"display_name":"Sheychan"},"score":0,"creation_date":1451977023,"post_id":4989543,"comment_id":56957028,"body_markdown":"@syamys you should probably post your solution and let&#39;s see if it&#39;s better","body":"@syamys you should probably post your solution and let&#39;s see if it&#39;s better"},{"owner":{"account_id":5240236,"reputation":3531,"user_id":4187541,"accept_rate":80,"display_name":"Peter Chaula"},"score":0,"creation_date":1481533596,"post_id":4989543,"comment_id":69398924,"body_markdown":"Note that for PNGs the quality setting is redundant. &quot;Some formats, like PNG which is lossless, will ignore the quality setting&quot;","body":"Note that for PNGs the quality setting is redundant. &quot;Some formats, like PNG which is lossless, will ignore the quality setting&quot;"},{"owner":{"account_id":3344039,"reputation":11379,"user_id":2809564,"accept_rate":82,"display_name":"john"},"score":0,"creation_date":1509322816,"post_id":4989543,"comment_id":80959829,"body_markdown":"@Mezm I have a question [here](https://stackoverflow.com/questions/46997683/sending-byte-array-of-approx-fixed-size-everytime) in which I am using Byte Buffer and I am confusing on how can I limit the size of byte array before sending to some other method. Wanted to see if you can help out.","body":"@Mezm I have a question <a href=\"https://stackoverflow.com/questions/46997683/sending-byte-array-of-approx-fixed-size-everytime\">here</a> in which I am using Byte Buffer and I am confusing on how can I limit the size of byte array before sending to some other method. Wanted to see if you can help out."},{"owner":{"account_id":50057,"reputation":1295,"user_id":149202,"accept_rate":54,"display_name":"Cristi Băluță"},"score":0,"creation_date":1556521175,"post_id":4989543,"comment_id":98452843,"body_markdown":"The result is quite poor, i have some lines in the image and when scaled down they are not smooth.","body":"The result is quite poor, i have some lines in the image and when scaled down they are not smooth."}],"tags":[],"owner":{"account_id":302599,"reputation":7212,"user_id":611062,"display_name":"Mezm"},"comment_count":13,"down_vote_count":2,"up_vote_count":709,"is_accepted":true,"score":707,"last_activity_date":1522750290,"creation_date":1297666183,"answer_id":4989543,"question_id":4989182,"body_markdown":"Try something like this:\r\n\r\n    Bitmap bmp = intent.getExtras().get(&quot;data&quot;);\r\n    ByteArrayOutputStream stream = new ByteArrayOutputStream();\r\n    bmp.compress(Bitmap.CompressFormat.PNG, 100, stream);\r\n    byte[] byteArray = stream.toByteArray();\r\n    bmp.recycle();\r\n\r\n\r\n","title":"converting Java bitmap to byte array","body":"<p>Try something like this:</p>\n\n<pre><code>Bitmap bmp = intent.getExtras().get(\"data\");\nByteArrayOutputStream stream = new ByteArrayOutputStream();\nbmp.compress(Bitmap.CompressFormat.PNG, 100, stream);\nbyte[] byteArray = stream.toByteArray();\nbmp.recycle();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":397350,"reputation":454,"user_id":761428,"display_name":"tstuts"},"score":4,"creation_date":1361980727,"post_id":9832840,"comment_id":21272069,"body_markdown":"His byte array is large enough.  `getRowBytes()` takes the 4 bytes per pixel in to account.","body":"His byte array is large enough.  <code>getRowBytes()</code> takes the 4 bytes per pixel in to account."}],"tags":[],"owner":{"account_id":131788,"reputation":4161,"user_id":332048,"accept_rate":79,"display_name":"MindJuice"},"comment_count":1,"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1332464701,"creation_date":1332464701,"answer_id":9832840,"question_id":4989182,"body_markdown":"Your byte array is too small.  Each pixel takes up 4 bytes, not just 1, so multiply your size * 4 so that the array is big enough.","title":"converting Java bitmap to byte array","body":"<p>Your byte array is too small.  Each pixel takes up 4 bytes, not just 1, so multiply your size * 4 so that the array is big enough.</p>\n"},{"comments":[{"owner":{"account_id":3551840,"reputation":527,"user_id":2966528,"accept_rate":75,"display_name":"automaton"},"score":8,"creation_date":1535581329,"post_id":34165515,"comment_id":91123972,"body_markdown":"Since this question has the Android tag, converting bytes back to a Bitmap can also be done with a one-liner: `Bitmap bmp = BitmapFactory.decodeByteArray(bytes, 0, bytes.length)`  where `bytes` is your byte array","body":"Since this question has the Android tag, converting bytes back to a Bitmap can also be done with a one-liner: <code>Bitmap bmp = BitmapFactory.decodeByteArray(bytes, 0, bytes.length)</code>  where <code>bytes</code> is your byte array"},{"owner":{"account_id":923074,"reputation":17651,"user_id":954376,"accept_rate":78,"display_name":"NeoWang"},"score":0,"creation_date":1560584291,"post_id":34165515,"comment_id":99792058,"body_markdown":"Perhaps big/small endian should be considered?","body":"Perhaps big/small endian should be considered?"},{"owner":{"account_id":9815465,"reputation":709,"user_id":7272120,"display_name":"J.Dragon"},"score":0,"creation_date":1581956520,"post_id":34165515,"comment_id":106601733,"body_markdown":"If you want to save the byte array in local DB(Sqlite, Room), you should compress like upper answer!","body":"If you want to save the byte array in local DB(Sqlite, Room), you should compress like upper answer!"},{"owner":{"account_id":10855964,"reputation":878,"user_id":7982318,"display_name":"Kirill Starostin"},"score":1,"creation_date":1590075228,"post_id":34165515,"comment_id":109548425,"body_markdown":"Note, however, that without the compression the size difference is dramatic. For theory you could read wikipedia, but for example in my case the compressed result (as per the 1st answer) is 20 MB, the other one (this answer) is 48 MB","body":"Note, however, that without the compression the size difference is dramatic. For theory you could read wikipedia, but for example in my case the compressed result (as per the 1st answer) is 20 MB, the other one (this answer) is 48 MB"}],"tags":[],"owner":{"account_id":6239625,"reputation":1005,"user_id":4853690,"display_name":"朱西西"},"comment_count":4,"down_vote_count":3,"up_vote_count":91,"is_accepted":false,"score":88,"last_activity_date":1691121728,"creation_date":1449606897,"answer_id":34165515,"question_id":4989182,"body_markdown":"CompressFormat is too slow...\r\n\r\nTry ByteBuffer.\r\n\r\n※※※Bitmap to Byte-array※※※\r\n\r\n\tint size = bitmap.getRowBytes() * bitmap.getHeight();\r\n\tByteBuffer byteBuffer = ByteBuffer.allocate(size);\r\n\tbitmap.copyPixelsToBuffer(byteBuffer);\r\n\tbyte[] byteArray = byteBuffer.array();\r\n\r\n    // Somehow save (and later load) these as well:\r\n    int width = bitmap.getWidth();\r\n\tint height = bitmap.getHeight();\r\n    String format = bitmap.getConfig().name();\r\n\r\n※※※Byte-array to Bitmap※※※\r\n\r\n\tBitmap.Config configBmp = Bitmap.Config.valueOf(format);\r\n\tBitmap bitmap_tmp = Bitmap.createBitmap(width, height, configBmp);\r\n\tByteBuffer buffer = ByteBuffer.wrap(byteArray);\r\n\tbitmap_tmp.copyPixelsFromBuffer(buffer);","title":"converting Java bitmap to byte array","body":"<p>CompressFormat is too slow...</p>\n<p>Try ByteBuffer.</p>\n<p>※※※Bitmap to Byte-array※※※</p>\n<pre><code>int size = bitmap.getRowBytes() * bitmap.getHeight();\nByteBuffer byteBuffer = ByteBuffer.allocate(size);\nbitmap.copyPixelsToBuffer(byteBuffer);\nbyte[] byteArray = byteBuffer.array();\n\n// Somehow save (and later load) these as well:\nint width = bitmap.getWidth();\nint height = bitmap.getHeight();\nString format = bitmap.getConfig().name();\n</code></pre>\n<p>※※※Byte-array to Bitmap※※※</p>\n<pre><code>Bitmap.Config configBmp = Bitmap.Config.valueOf(format);\nBitmap bitmap_tmp = Bitmap.createBitmap(width, height, configBmp);\nByteBuffer buffer = ByteBuffer.wrap(byteArray);\nbitmap_tmp.copyPixelsFromBuffer(buffer);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":248767,"reputation":1239,"user_id":524355,"display_name":"CaptainCrunch"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1455891097,"creation_date":1455891097,"answer_id":35507338,"question_id":4989182,"body_markdown":"Ted Hopp is correct, from the API Documentation :\r\n\r\n\r\n    public void copyPixelsToBuffer (Buffer dst)\r\n\r\n&quot;... After this method returns, the *current position* of the buffer is updated: the position is incremented by the number of elements written in the buffer.\r\n&quot;\r\n\r\nand\r\n\r\n    public ByteBuffer get (byte[] dst, int dstOffset, int byteCount)\r\n\r\n&quot;Reads bytes from the *current position* into the specified byte array, starting at the specified offset, and increases the position by the number of bytes read.&quot;","title":"converting Java bitmap to byte array","body":"<p>Ted Hopp is correct, from the API Documentation :</p>\n\n<pre><code>public void copyPixelsToBuffer (Buffer dst)\n</code></pre>\n\n<p>\"... After this method returns, the <em>current position</em> of the buffer is updated: the position is incremented by the number of elements written in the buffer.\n\"</p>\n\n<p>and</p>\n\n<pre><code>public ByteBuffer get (byte[] dst, int dstOffset, int byteCount)\n</code></pre>\n\n<p>\"Reads bytes from the <em>current position</em> into the specified byte array, starting at the specified offset, and increases the position by the number of bytes read.\"</p>\n"},{"tags":[],"owner":{"account_id":4834459,"reputation":2108,"user_id":3901630,"display_name":"Amol Suryawanshi"},"comment_count":0,"down_vote_count":1,"up_vote_count":14,"is_accepted":false,"score":13,"last_activity_date":1589366789,"creation_date":1461320905,"answer_id":36791309,"question_id":4989182,"body_markdown":"Use below functions to encode bitmap into byte[] and vice versa\r\n\r\n \r\n\r\n     \r\n\r\n    public static String encodeTobase64(Bitmap image) {\r\n        Bitmap immagex = image;\r\n        ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n        immagex.compress(Bitmap.CompressFormat.PNG, 90, baos);\r\n        byte[] b = baos.toByteArray();\r\n        String imageEncoded = Base64.encodeToString(b, Base64.DEFAULT);\r\n        return imageEncoded;\r\n    }\r\n    \r\n    public static Bitmap decodeBase64(String input) {\r\n        byte[] decodedByte = Base64.decode(input, 0);\r\n        return BitmapFactory.decodeByteArray(decodedByte, 0, decodedByte.length);\r\n    }\r\n\r\n","title":"converting Java bitmap to byte array","body":"<p>Use below functions to encode bitmap into byte[] and vice versa</p>\n\n<pre><code>public static String encodeTobase64(Bitmap image) {\n    Bitmap immagex = image;\n    ByteArrayOutputStream baos = new ByteArrayOutputStream();\n    immagex.compress(Bitmap.CompressFormat.PNG, 90, baos);\n    byte[] b = baos.toByteArray();\n    String imageEncoded = Base64.encodeToString(b, Base64.DEFAULT);\n    return imageEncoded;\n}\n\npublic static Bitmap decodeBase64(String input) {\n    byte[] decodedByte = Base64.decode(input, 0);\n    return BitmapFactory.decodeByteArray(decodedByte, 0, decodedByte.length);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2023117,"reputation":8402,"user_id":1808829,"accept_rate":80,"display_name":"Ayaz Alifov"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1637402916,"creation_date":1478539388,"answer_id":40470945,"question_id":4989182,"body_markdown":"In order to avoid `OutOfMemory` error for bigger files, I would recommend to solve the task by splitting a bitmap into several parts and merging their parts&#39; bytes.\r\n\r\n\r\n    private byte[] getBitmapBytes(Bitmap bitmap)\r\n    {\r\n        int chunkNumbers = 10;\r\n        int bitmapSize = bitmap.getRowBytes() * bitmap.getHeight();\r\n        byte[] imageBytes = new byte[bitmapSize];\r\n        int rows, cols;\r\n        int chunkHeight, chunkWidth;\r\n        rows = cols = (int) Math.sqrt(chunkNumbers);\r\n        chunkHeight = bitmap.getHeight() / rows;\r\n        chunkWidth = bitmap.getWidth() / cols;\r\n\r\n        int yCoord = 0;\r\n        int bitmapsSizes = 0;\r\n\r\n        for (int x = 0; x &lt; rows; x++)\r\n        {\r\n            int xCoord = 0;\r\n            for (int y = 0; y &lt; cols; y++)\r\n            {\r\n                Bitmap bitmapChunk = Bitmap.createBitmap(bitmap, xCoord, yCoord, chunkWidth, chunkHeight);\r\n                byte[] bitmapArray = getBytesFromBitmapChunk(bitmapChunk);\r\n                System.arraycopy(bitmapArray, 0, imageBytes, bitmapsSizes, bitmapArray.length);\r\n                bitmapsSizes = bitmapsSizes + bitmapArray.length;\r\n                xCoord += chunkWidth;\r\n\r\n                bitmapChunk.recycle();\r\n                bitmapChunk = null;\r\n            }\r\n            yCoord += chunkHeight;\r\n        }\r\n        \r\n        return imageBytes;\r\n    }\r\n    \r\n\r\n    private byte[] getBytesFromBitmapChunk(Bitmap bitmap)\r\n    {\r\n        int bitmapSize = bitmap.getRowBytes() * bitmap.getHeight();\r\n        ByteBuffer byteBuffer = ByteBuffer.allocate(bitmapSize);\r\n        bitmap.copyPixelsToBuffer(byteBuffer);\r\n        byteBuffer.rewind();\r\n        return byteBuffer.array();\r\n    }\r\n","title":"converting Java bitmap to byte array","body":"<p>In order to avoid <code>OutOfMemory</code> error for bigger files, I would recommend to solve the task by splitting a bitmap into several parts and merging their parts' bytes.</p>\n<pre><code>private byte[] getBitmapBytes(Bitmap bitmap)\n{\n    int chunkNumbers = 10;\n    int bitmapSize = bitmap.getRowBytes() * bitmap.getHeight();\n    byte[] imageBytes = new byte[bitmapSize];\n    int rows, cols;\n    int chunkHeight, chunkWidth;\n    rows = cols = (int) Math.sqrt(chunkNumbers);\n    chunkHeight = bitmap.getHeight() / rows;\n    chunkWidth = bitmap.getWidth() / cols;\n\n    int yCoord = 0;\n    int bitmapsSizes = 0;\n\n    for (int x = 0; x &lt; rows; x++)\n    {\n        int xCoord = 0;\n        for (int y = 0; y &lt; cols; y++)\n        {\n            Bitmap bitmapChunk = Bitmap.createBitmap(bitmap, xCoord, yCoord, chunkWidth, chunkHeight);\n            byte[] bitmapArray = getBytesFromBitmapChunk(bitmapChunk);\n            System.arraycopy(bitmapArray, 0, imageBytes, bitmapsSizes, bitmapArray.length);\n            bitmapsSizes = bitmapsSizes + bitmapArray.length;\n            xCoord += chunkWidth;\n\n            bitmapChunk.recycle();\n            bitmapChunk = null;\n        }\n        yCoord += chunkHeight;\n    }\n    \n    return imageBytes;\n}\n\n\nprivate byte[] getBytesFromBitmapChunk(Bitmap bitmap)\n{\n    int bitmapSize = bitmap.getRowBytes() * bitmap.getHeight();\n    ByteBuffer byteBuffer = ByteBuffer.allocate(bitmapSize);\n    bitmap.copyPixelsToBuffer(byteBuffer);\n    byteBuffer.rewind();\n    return byteBuffer.array();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5452312,"reputation":1010,"user_id":4336740,"display_name":"Mohammad nabil"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1493789374,"creation_date":1493789374,"answer_id":43751742,"question_id":4989182,"body_markdown":"**Try this to convert String-Bitmap or Bitmap-String**\r\n    \r\n    /**\r\n     * @param bitmap\r\n     * @return converting bitmap and return a string\r\n     */\r\n    public static String BitMapToString(Bitmap bitmap){\r\n        ByteArrayOutputStream baos=new ByteArrayOutputStream();\r\n        bitmap.compress(Bitmap.CompressFormat.PNG,100, baos);\r\n        byte [] b=baos.toByteArray();\r\n        String temp=Base64.encodeToString(b, Base64.DEFAULT);\r\n        return temp;\r\n    }\r\n\r\n    /**\r\n     * @param encodedString\r\n     * @return bitmap (from given string)\r\n     */\r\n    public static Bitmap StringToBitMap(String encodedString){\r\n        try{\r\n            byte [] encodeByte=Base64.decode(encodedString,Base64.DEFAULT);\r\n            Bitmap bitmap= BitmapFactory.decodeByteArray(encodeByte, 0, encodeByte.length);\r\n            return bitmap;\r\n        }catch(Exception e){\r\n            e.getMessage();\r\n            return null;\r\n        }\r\n    }","title":"converting Java bitmap to byte array","body":"<p><strong>Try this to convert String-Bitmap or Bitmap-String</strong></p>\n\n<pre><code>/**\n * @param bitmap\n * @return converting bitmap and return a string\n */\npublic static String BitMapToString(Bitmap bitmap){\n    ByteArrayOutputStream baos=new ByteArrayOutputStream();\n    bitmap.compress(Bitmap.CompressFormat.PNG,100, baos);\n    byte [] b=baos.toByteArray();\n    String temp=Base64.encodeToString(b, Base64.DEFAULT);\n    return temp;\n}\n\n/**\n * @param encodedString\n * @return bitmap (from given string)\n */\npublic static Bitmap StringToBitMap(String encodedString){\n    try{\n        byte [] encodeByte=Base64.decode(encodedString,Base64.DEFAULT);\n        Bitmap bitmap= BitmapFactory.decodeByteArray(encodeByte, 0, encodeByte.length);\n        return bitmap;\n    }catch(Exception e){\n        e.getMessage();\n        return null;\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":9102688,"reputation":3351,"user_id":7369357,"accept_rate":76,"display_name":"nicolas asinovich"},"score":0,"creation_date":1617895195,"post_id":47755479,"comment_id":118442758,"body_markdown":"&quot;A/Bitmap: Error, cannot access an invalid/free&#39;d bitmap here!&quot;","body":"&quot;A/Bitmap: Error, cannot access an invalid/free&#39;d bitmap here!&quot;"},{"owner":{"account_id":14380660,"reputation":638,"user_id":12414704,"display_name":"kc_dev"},"score":0,"creation_date":1674257260,"post_id":47755479,"comment_id":132683665,"body_markdown":"This did not work for me.","body":"This did not work for me."},{"owner":{"account_id":2459984,"reputation":2240,"user_id":2144352,"display_name":"Tomas Ivan"},"score":0,"creation_date":1674474435,"post_id":47755479,"comment_id":132714354,"body_markdown":"@kc_dev Gets you some error, or something what we are able to look at?","body":"@kc_dev Gets you some error, or something what we are able to look at?"}],"tags":[],"owner":{"account_id":2459984,"reputation":2240,"user_id":2144352,"display_name":"Tomas Ivan"},"comment_count":3,"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1513003854,"creation_date":1513003854,"answer_id":47755479,"question_id":4989182,"body_markdown":"Here is bitmap extension `.convertToByteArray` wrote in Kotlin.  \r\n\r\n    /**\r\n     * Convert bitmap to byte array using ByteBuffer.\r\n     */\r\n    fun Bitmap.convertToByteArray(): ByteArray {\r\n        //minimum number of bytes that can be used to store this bitmap&#39;s pixels\r\n        val size = this.byteCount\r\n    \r\n        //allocate new instances which will hold bitmap\r\n        val buffer = ByteBuffer.allocate(size)\r\n        val bytes = ByteArray(size)\r\n    \r\n        //copy the bitmap&#39;s pixels into the specified buffer\r\n        this.copyPixelsToBuffer(buffer)\r\n    \r\n        //rewinds buffer (buffer position is set to zero and the mark is discarded)\r\n        buffer.rewind()\r\n    \r\n        //transfer bytes from buffer into the given destination array\r\n        buffer.get(bytes)\r\n    \r\n        //return bitmap&#39;s pixels\r\n        return bytes\r\n    }","title":"converting Java bitmap to byte array","body":"<p>Here is bitmap extension <code>.convertToByteArray</code> wrote in Kotlin.  </p>\n\n<pre><code>/**\n * Convert bitmap to byte array using ByteBuffer.\n */\nfun Bitmap.convertToByteArray(): ByteArray {\n    //minimum number of bytes that can be used to store this bitmap's pixels\n    val size = this.byteCount\n\n    //allocate new instances which will hold bitmap\n    val buffer = ByteBuffer.allocate(size)\n    val bytes = ByteArray(size)\n\n    //copy the bitmap's pixels into the specified buffer\n    this.copyPixelsToBuffer(buffer)\n\n    //rewinds buffer (buffer position is set to zero and the mark is discarded)\n    buffer.rewind()\n\n    //transfer bytes from buffer into the given destination array\n    buffer.get(bytes)\n\n    //return bitmap's pixels\n    return bytes\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20618398,"reputation":149,"user_id":15135947,"display_name":"Aarush Kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1625642795,"creation_date":1625642795,"answer_id":68281743,"question_id":4989182,"body_markdown":"I think this will do -\r\n```\r\npublic static byte[] convertBitmapToByteArray(Bitmap bitmap){\r\n        ByteBuffer byteBuffer = ByteBuffer.allocate(bitmap.getByteCount());\r\n        bitmap.copyPixelsToBuffer(byteBuffer);\r\n        byteBuffer.rewind();\r\n        return byteBuffer.array();\r\n    }\r\n```","title":"converting Java bitmap to byte array","body":"<p>I think this will do -</p>\n<pre><code>public static byte[] convertBitmapToByteArray(Bitmap bitmap){\n        ByteBuffer byteBuffer = ByteBuffer.allocate(bitmap.getByteCount());\n        bitmap.copyPixelsToBuffer(byteBuffer);\n        byteBuffer.rewind();\n        return byteBuffer.array();\n    }\n</code></pre>\n"}],"owner":{"account_id":207611,"reputation":6729,"user_id":457577,"accept_rate":98,"display_name":"Tom Fobear"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":377836,"favorite_count":0,"down_vote_count":0,"up_vote_count":321,"accepted_answer_id":4989543,"answer_count":10,"score":321,"last_activity_date":1691121728,"creation_date":1297662171,"question_id":4989182,"body_markdown":"      Bitmap bmp   = intent.getExtras().get(&quot;data&quot;);\r\n      int size     = bmp.getRowBytes() * bmp.getHeight();\r\n      ByteBuffer b = ByteBuffer.allocate(size);\r\n\r\n      bmp.copyPixelsToBuffer(b);\r\n\r\n      byte[] bytes = new byte[size];\r\n\r\n      try {\r\n         b.get(bytes, 0, bytes.length);\r\n      } catch (BufferUnderflowException e) {\r\n         // always happens\r\n      }\r\n      // do something with byte[]\r\n\r\nWhen I look at the buffer after the call to `copyPixelsToBuffer` the bytes are all 0... The bitmap returned from the camera is immutable... but that shouldn&#39;t matter since it&#39;s doing a copy. \r\n\r\nWhat could be wrong with this code?","title":"converting Java bitmap to byte array","body":"<pre><code>  Bitmap bmp   = intent.getExtras().get(\"data\");\n  int size     = bmp.getRowBytes() * bmp.getHeight();\n  ByteBuffer b = ByteBuffer.allocate(size);\n\n  bmp.copyPixelsToBuffer(b);\n\n  byte[] bytes = new byte[size];\n\n  try {\n     b.get(bytes, 0, bytes.length);\n  } catch (BufferUnderflowException e) {\n     // always happens\n  }\n  // do something with byte[]\n</code></pre>\n\n<p>When I look at the buffer after the call to <code>copyPixelsToBuffer</code> the bytes are all 0... The bitmap returned from the camera is immutable... but that shouldn't matter since it's doing a copy. </p>\n\n<p>What could be wrong with this code?</p>\n"},{"tags":["java","android","bitmap"],"comments":[{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1424544292,"post_id":28649699,"comment_id":45596929,"body_markdown":"&quot;I need to save a bitmap without quality lost&quot; -- PNG is a lossless format.","body":"&quot;I need to save a bitmap without quality lost&quot; -- PNG is a lossless format."},{"owner":{"account_id":5015761,"reputation":2532,"user_id":4030665,"accept_rate":100,"display_name":"Dan"},"score":0,"creation_date":1424545545,"post_id":28649699,"comment_id":45597458,"body_markdown":"I have tested JPEG and PNG formats (available formats for Bitmap.compress) with quality = 100 and both lower quality.","body":"I have tested JPEG and PNG formats (available formats for Bitmap.compress) with quality = 100 and both lower quality."},{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1424545762,"post_id":28649699,"comment_id":45597546,"body_markdown":"Then your problem is not in the compression, but in how you are creating your `Bitmap` or how you are determining &quot;lower quality&quot;.","body":"Then your problem is not in the compression, but in how you are creating your <code>Bitmap</code> or how you are determining &quot;lower quality&quot;."},{"owner":{"account_id":5015761,"reputation":2532,"user_id":4030665,"accept_rate":100,"display_name":"Dan"},"score":0,"creation_date":1424546418,"post_id":28649699,"comment_id":45597792,"body_markdown":"I use objects only for check if the intent returns me something","body":"I use objects only for check if the intent returns me something"},{"owner":{"account_id":2414645,"reputation":11194,"user_id":2108972,"display_name":"greenapps"},"score":1,"creation_date":1424546659,"post_id":28649699,"comment_id":45597867,"body_markdown":"Can you start explaining what your code should do instead of talking about bitmaps. There is nothing of a bitmap in your code.","body":"Can you start explaining what your code should do instead of talking about bitmaps. There is nothing of a bitmap in your code."},{"owner":{"account_id":2414645,"reputation":11194,"user_id":2108972,"display_name":"greenapps"},"score":0,"creation_date":1424546812,"post_id":28649699,"comment_id":45597930,"body_markdown":"Your code looks completely wrong. There is no startActivityForResult that would trigger onActivityResult.","body":"Your code looks completely wrong. There is no startActivityForResult that would trigger onActivityResult."},{"owner":{"account_id":5015761,"reputation":2532,"user_id":4030665,"accept_rate":100,"display_name":"Dan"},"score":0,"creation_date":1424547316,"post_id":28649699,"comment_id":45598138,"body_markdown":"It&#39;s only a snippet, the first startActivity is in other place,  here is in onActivityResult to make more photos before the first.","body":"It&#39;s only a snippet, the first startActivity is in other place,  here is in onActivityResult to make more photos before the first."},{"owner":{"account_id":2414645,"reputation":11194,"user_id":2108972,"display_name":"greenapps"},"score":0,"creation_date":1424547389,"post_id":28649699,"comment_id":45598160,"body_markdown":"After the first you mean. Take that out. That is very confusing what you do now. Show how you trigger it the first time.","body":"After the first you mean. Take that out. That is very confusing what you do now. Show how you trigger it the first time."},{"owner":{"account_id":2414645,"reputation":11194,"user_id":2108972,"display_name":"greenapps"},"score":0,"creation_date":1424547626,"post_id":28649699,"comment_id":45598243,"body_markdown":"`then before save it, I have to process it. `. That is impossible if you use this kind of intent with EXTRA_OUTPUT as the image will be saved for you already as jpg.","body":"<code>then before save it, I have to process it. </code>. That is impossible if you use this kind of intent with EXTRA_OUTPUT as the image will be saved for you already as jpg."},{"owner":{"account_id":5015761,"reputation":2532,"user_id":4030665,"accept_rate":100,"display_name":"Dan"},"score":0,"creation_date":1424547674,"post_id":28649699,"comment_id":45598270,"body_markdown":"Then I have to use the intent without EXTRA_OUTPUT, correct? . OK I have already tried it, and I have already obtained the bitmap from the Intent, my problem is how can I save it in sd card without quality loss.","body":"Then I have to use the intent without EXTRA_OUTPUT, correct? . OK I have already tried it, and I have already obtained the bitmap from the Intent, my problem is how can I save it in sd card without quality loss."},{"owner":{"account_id":2414645,"reputation":11194,"user_id":2108972,"display_name":"greenapps"},"score":0,"creation_date":1424547790,"post_id":28649699,"comment_id":45598306,"body_markdown":"Please remove all code. Just post only relevant code which demonstrates your problem.","body":"Please remove all code. Just post only relevant code which demonstrates your problem."},{"owner":{"account_id":5015761,"reputation":2532,"user_id":4030665,"accept_rate":100,"display_name":"Dan"},"score":0,"creation_date":1424548006,"post_id":28649699,"comment_id":45598379,"body_markdown":"Done. Now there are   only the methods that I have posted first time.","body":"Done. Now there are   only the methods that I have posted first time."},{"owner":{"account_id":2414645,"reputation":11194,"user_id":2108972,"display_name":"greenapps"},"score":0,"creation_date":1424548098,"post_id":28649699,"comment_id":45598411,"body_markdown":"Still silly as taking the first picture is not in it. And you should remove taking the next pictures.","body":"Still silly as taking the first picture is not in it. And you should remove taking the next pictures."},{"owner":{"account_id":5015761,"reputation":2532,"user_id":4030665,"accept_rate":100,"display_name":"Dan"},"score":0,"creation_date":1424548244,"post_id":28649699,"comment_id":45598452,"body_markdown":"... It&#39;s not important the first photo. A button starts it. that&#39;s completely irrelevant.","body":"... It&#39;s not important the first photo. A button starts it. that&#39;s completely irrelevant."},{"owner":{"account_id":2414645,"reputation":11194,"user_id":2108972,"display_name":"greenapps"},"score":0,"creation_date":1424548297,"post_id":28649699,"comment_id":45598470,"body_markdown":"Well if you can help yourself be your guest.","body":"Well if you can help yourself be your guest."}],"answers":[{"comments":[{"owner":{"account_id":5015761,"reputation":2532,"user_id":4030665,"accept_rate":100,"display_name":"Dan"},"score":0,"creation_date":1424545673,"post_id":28649796,"comment_id":45597518,"body_markdown":"I have no EXTRA_OUTPUT because if I use it, when I try to get the image in &quot;onActivityResult&quot;, both getData() and getExtra(&quot;data&quot;) return null.","body":"I have no EXTRA_OUTPUT because if I use it, when I try to get the image in &quot;onActivityResult&quot;, both getData() and getExtra(&quot;data&quot;) return null."},{"owner":{"account_id":2414645,"reputation":11194,"user_id":2108972,"display_name":"greenapps"},"score":0,"creation_date":1424546023,"post_id":28649796,"comment_id":45597641,"body_markdown":"No not both. Only parameter Intent data==null.","body":"No not both. Only parameter Intent data==null."},{"owner":{"account_id":5015761,"reputation":2532,"user_id":4030665,"accept_rate":100,"display_name":"Dan"},"score":0,"creation_date":1424546097,"post_id":28649796,"comment_id":45597673,"body_markdown":"Now I can&#39;t even  do getData() or getExtras.getParceable(&quot;data&quot;), an excepcion occurs.","body":"Now I can&#39;t even  do getData() or getExtras.getParceable(&quot;data&quot;), an excepcion occurs."},{"owner":{"account_id":2414645,"reputation":11194,"user_id":2108972,"display_name":"greenapps"},"score":0,"creation_date":1424546216,"post_id":28649796,"comment_id":45597726,"body_markdown":"Indeed. What kind of exception? Why are you omitting such important info?. Also getData() is not enough info. Show the whole statement in such a case.","body":"Indeed. What kind of exception? Why are you omitting such important info?. Also getData() is not enough info. Show the whole statement in such a case."},{"owner":{"account_id":5015761,"reputation":2532,"user_id":4030665,"accept_rate":100,"display_name":"Dan"},"score":0,"creation_date":1424546742,"post_id":28649796,"comment_id":45597897,"body_markdown":"I added additional information. I was trying to avoid it because i thought it would be some function to save uncompressed bitmaps , so that the info wouldn&#39;t be neccessary .","body":"I added additional information. I was trying to avoid it because i thought it would be some function to save uncompressed bitmaps , so that the info wouldn&#39;t be neccessary ."},{"owner":{"account_id":2414645,"reputation":11194,"user_id":2108972,"display_name":"greenapps"},"score":0,"creation_date":1424547102,"post_id":28649796,"comment_id":45598061,"body_markdown":"You should have started to tell us where your bitmap did come from. You still did not.","body":"You should have started to tell us where your bitmap did come from. You still did not."}],"tags":[],"owner":{"account_id":151876,"reputation":159,"user_id":4586777,"display_name":"Justin Tokarchuk"},"comment_count":6,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1424544250,"creation_date":1424544250,"answer_id":28649796,"question_id":28649699,"body_markdown":"if you are using IMAGE_CAPTURE, there is a flag that has to be set to not return a thumbnail.\r\n\r\nWithout seeing your code, I can only guess.\r\n\r\n\r\n\r\nDocumentation:\r\n\r\n   [Image Capture Reference][1]\r\n\r\n\r\n  [1]: http://developer.android.com/reference/android/provider/MediaStore.html#ACTION_IMAGE_CAPTURE\r\n\r\n&gt; Documentation Quote:\r\n&gt; \r\n&gt; If the EXTRA_OUTPUT is not present, then a small sized image is\r\n&gt; returned as a Bitmap object in the extra field\r\n\r\nIt&#39;s a pretty common mistake, please clarify if it&#39;s something else.","title":"Android: Intent: pass bitmap without compression","body":"<p>if you are using IMAGE_CAPTURE, there is a flag that has to be set to not return a thumbnail.</p>\n\n<p>Without seeing your code, I can only guess.</p>\n\n<p>Documentation:</p>\n\n<p><a href=\"http://developer.android.com/reference/android/provider/MediaStore.html#ACTION_IMAGE_CAPTURE\" rel=\"nofollow\">Image Capture Reference</a></p>\n\n<blockquote>\n  <p>Documentation Quote:</p>\n  \n  <p>If the EXTRA_OUTPUT is not present, then a small sized image is\n  returned as a Bitmap object in the extra field</p>\n</blockquote>\n\n<p>It's a pretty common mistake, please clarify if it's something else.</p>\n"},{"tags":[],"owner":{"account_id":5015761,"reputation":2532,"user_id":4030665,"accept_rate":100,"display_name":"Dan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1436268572,"creation_date":1436268572,"answer_id":31267356,"question_id":28649699,"body_markdown":"I have been read the google documentation and this is what I understand, but I&#39;m not sure 100%:\r\n\r\nThe only way to get an uncompressed image from the android camera is saving it in SD card. Then, if you want to use it, get it from SD.\r\n\r\nIndeed, it is not possible to pass an uncompressed image between activities by using intents due to intents can only &quot;transport&quot; objects of &quot;small&quot; size.","title":"Android: Intent: pass bitmap without compression","body":"<p>I have been read the google documentation and this is what I understand, but I'm not sure 100%:</p>\n\n<p>The only way to get an uncompressed image from the android camera is saving it in SD card. Then, if you want to use it, get it from SD.</p>\n\n<p>Indeed, it is not possible to pass an uncompressed image between activities by using intents due to intents can only \"transport\" objects of \"small\" size.</p>\n"}],"owner":{"account_id":5015761,"reputation":2532,"user_id":4030665,"accept_rate":100,"display_name":"Dan"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6110,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":31267356,"answer_count":2,"score":5,"last_activity_date":1691120850,"creation_date":1424543823,"question_id":28649699,"body_markdown":"I&#39;m working on android. I need to save a bitmap without quality lost.\r\n\r\nI have tried it using `compress()` method of Bitmap, setting quality to 100. This not works for me, the bitmap loses too much quality. I have tested with JPEG and PNG formats.\r\n\r\nI have tested to copy the bitmap to a `ByteBuffer`, then extract the `byte[]` and saving it using a `FileOutputStream`. In this case, I can&#39;t display images saved using this way, I only see a blank page.\r\n\r\nMy question is, is there any way to save a bitmap in SD card without compression?\r\n\r\nEDIT: here part of my code\r\n\r\n\r\n    public class MainActivity extends ActionBarActivity {\r\n    \t\r\n    \t[...]\r\n    \t\r\n    \t@Override\r\n    \tprotected void onActivityResult(int reqCode, int resCode, Intent handler){\r\n    \t\tsuper.onActivityResult(reqCode, resCode, handler);\r\n        \tif(reqCode == CAPTURE_IDENTIFIER &amp;&amp; resCode == Activity.RESULT_OK){\r\n    // THis is that I have tested.\r\n    //    \t\tObject o = handler.getData();\r\n    //    \t\tObject o2 = handler.getExtras().getParcelable(&quot;data&quot;);\r\n    //    \t\tObject o3 = handler.getExtras().get(&quot;data&quot;);\r\n    //    \t\tObject o4 = handler.getParcelableExtra(&quot;data&quot;);\r\n    //    \t\t\r\n        \t\tprepareCapture();\r\n        \t\tstartActivityForResult(cameraHandler, CAPTURE_IDENTIFIER);\r\n        \t}\r\n        }\r\n    \t\r\n    \t\r\n    \t\r\n    \tprivate void initCamera(){\r\n        \tcameraHandler = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);\r\n        \tcameraHandler.putExtra(&quot;return-data&quot;, true);\r\n        }\r\n    \t\r\n    \tprivate void prepareCapture(){\r\n    \t\tcurrentPhotoName = getNextImageIdentifier() + IMG_BASE_NAME;\r\n        \tFile image = new File(capturesFolder, currentPhotoName);\r\n        \tUri uriImage = Uri.fromFile(image);\r\n        \tcameraHandler.putExtra(MediaStore.EXTRA_OUTPUT, uriImage);\r\n        }\r\n       \r\n        \r\n        \r\n    }\r\n\r\n\r\nTHe exception i have detected is:\r\nRuntimeException: failure delivering result ResultInfo [...] NullPointerException\r\n\r\nEDIT2:\r\nWhat I have to actually do:\r\n\r\nI have to take a photo with the camera, then before save it, I have to process it. After that, i have to save it in SD card. But it&#39;s very important the image quality, I can&#39;t save it with low quality, or not too low quality at least.","title":"Android: Intent: pass bitmap without compression","body":"<p>I'm working on android. I need to save a bitmap without quality lost.</p>\n\n<p>I have tried it using <code>compress()</code> method of Bitmap, setting quality to 100. This not works for me, the bitmap loses too much quality. I have tested with JPEG and PNG formats.</p>\n\n<p>I have tested to copy the bitmap to a <code>ByteBuffer</code>, then extract the <code>byte[]</code> and saving it using a <code>FileOutputStream</code>. In this case, I can't display images saved using this way, I only see a blank page.</p>\n\n<p>My question is, is there any way to save a bitmap in SD card without compression?</p>\n\n<p>EDIT: here part of my code</p>\n\n<pre><code>public class MainActivity extends ActionBarActivity {\n\n    [...]\n\n    @Override\n    protected void onActivityResult(int reqCode, int resCode, Intent handler){\n        super.onActivityResult(reqCode, resCode, handler);\n        if(reqCode == CAPTURE_IDENTIFIER &amp;&amp; resCode == Activity.RESULT_OK){\n// THis is that I have tested.\n//          Object o = handler.getData();\n//          Object o2 = handler.getExtras().getParcelable(\"data\");\n//          Object o3 = handler.getExtras().get(\"data\");\n//          Object o4 = handler.getParcelableExtra(\"data\");\n//          \n            prepareCapture();\n            startActivityForResult(cameraHandler, CAPTURE_IDENTIFIER);\n        }\n    }\n\n\n\n    private void initCamera(){\n        cameraHandler = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);\n        cameraHandler.putExtra(\"return-data\", true);\n    }\n\n    private void prepareCapture(){\n        currentPhotoName = getNextImageIdentifier() + IMG_BASE_NAME;\n        File image = new File(capturesFolder, currentPhotoName);\n        Uri uriImage = Uri.fromFile(image);\n        cameraHandler.putExtra(MediaStore.EXTRA_OUTPUT, uriImage);\n    }\n\n\n\n}\n</code></pre>\n\n<p>THe exception i have detected is:\nRuntimeException: failure delivering result ResultInfo [...] NullPointerException</p>\n\n<p>EDIT2:\nWhat I have to actually do:</p>\n\n<p>I have to take a photo with the camera, then before save it, I have to process it. After that, i have to save it in SD card. But it's very important the image quality, I can't save it with low quality, or not too low quality at least.</p>\n"},{"tags":["java","android-studio","gradle"],"comments":[{"owner":{"account_id":1136217,"reputation":14336,"user_id":1121249,"accept_rate":86,"display_name":"rkosegi"},"score":0,"creation_date":1691121279,"post_id":76832826,"comment_id":135451833,"body_markdown":"well, `Your server is no longer active` is what jfrog says about it","body":"well, <code>Your server is no longer active</code> is what jfrog says about it"}],"owner":{"account_id":8324002,"reputation":13,"user_id":14602986,"display_name":"ChinaTonka"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691120497,"creation_date":1691120497,"question_id":76832826,"body_markdown":"I am trying to use Bing maps in an app, needs to be Bing as will be used in China. I get \r\nerror messages, What has caused this???? :\r\n:app:writeDebugSigningConfigVersions\r\norg.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration &#39;:app:debugRuntimeClasspath&#39;.\r\norg.gradle.internal.resolve.ModuleVersionResolveException: Could not resolve com.microsoft.maps:maps-sdk:1.3.0.\r\norg.gradle.api.internal.artifacts.ivyservice.ivyresolve.parser.MetaDataParseException: Could not parse POM https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom\r\nmaps-sdk-1.3.0.pom\r\norg.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration &#39;:app:debugRuntimeClasspath&#39;.\r\norg.gradle.internal.resolve.ModuleVersionResolveException: Could not resolve com.microsoft.maps:maps-sdk:1.3.0.\r\norg.gradle.api.internal.artifacts.ivyservice.ivyresolve.parser.MetaDataParseException: Could not parse POM https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom\r\norg.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration &#39;:app:debugRuntimeClasspath&#39;.\r\norg.gradle.internal.resolve.ModuleVersionResolveException: Could not resolve com.microsoft.maps:maps-sdk:1.3.0.\r\norg.gradle.api.internal.artifacts.ivyservice.ivyresolve.parser.MetaDataParseException: Could not parse POM https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom\r\norg.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration &#39;:app:debugRuntimeClasspath&#39;.\r\norg.gradle.internal.resolve.ModuleVersionResolveException: Could not resolve com.microsoft.maps:maps-sdk:1.3.0.\r\norg.gradle.api.internal.artifacts.ivyservice.ivyresolve.parser.MetaDataParseException: Could not parse POM https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom\r\norg.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration &#39;:app:debugRuntimeClasspath&#39;.\r\norg.gradle.internal.resolve.ModuleVersionResolveException: Could not resolve com.microsoft.maps:maps-sdk:1.3.0.\r\norg.gradle.api.internal.artifacts.ivyservice.ivyresolve.parser.MetaDataParseException: Could not parse POM https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom\r\norg.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration &#39;:app:debugRuntimeClasspath&#39;.\r\norg.gradle.internal.resolve.ModuleVersionResolveException: Could not resolve com.microsoft.maps:maps-sdk:1.3.0.\r\norg.gradle.api.internal.artifacts.ivyservice.ivyresolve.parser.MetaDataParseException: Could not parse POM https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom\r\norg.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration &#39;:app:debugRuntimeClasspath&#39;.\r\norg.gradle.internal.resolve.ModuleVersionResolveException: Could not resolve com.microsoft.maps:maps-sdk:1.3.0.\r\norg.gradle.api.internal.artifacts.ivyservice.ivyresolve.parser.MetaDataParseException: Could not parse POM https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom\r\norg.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration &#39;:app:debugRuntimeClasspath&#39;.\r\norg.gradle.internal.resolve.ModuleVersionResolveException: Could not resolve com.microsoft.maps:maps-sdk:1.3.0.\r\norg.gradle.api.internal.artifacts.ivyservice.ivyresolve.parser.MetaDataParseException: Could not parse POM https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom\r\norg.gradle.internal.execution.fingerprint.InputFingerprinter$InputFileFingerprintingException: Cannot fingerprint input file property &#39;externalLibNativeLibs&#39;: Could not resolve all files for configuration &#39;:app:debugRuntimeClasspath&#39;.\r\norg.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration &#39;:app:debugRuntimeClasspath&#39;.\r\norg.gradle.internal.resolve.ModuleVersionResolveException: Could not resolve com.microsoft.maps:maps-sdk:1.3.0.\r\norg.gradle.api.internal.artifacts.ivyservice.ivyresolve.parser.MetaDataParseException: Could not parse POM https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom\r\nAlready seen doctype\r\n\r\nTried to find solution but does not seem to be one online. What has caused this???","title":"maps-sdk-1.3.0.pom:2:10: Already seen doctype","body":"<p>I am trying to use Bing maps in an app, needs to be Bing as will be used in China. I get\nerror messages, What has caused this???? :\n:app:writeDebugSigningConfigVersions\norg.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration ':app:debugRuntimeClasspath'.\norg.gradle.internal.resolve.ModuleVersionResolveException: Could not resolve com.microsoft.maps:maps-sdk:1.3.0.\norg.gradle.api.internal.artifacts.ivyservice.ivyresolve.parser.MetaDataParseException: Could not parse POM <a href=\"https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom\" rel=\"nofollow noreferrer\">https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom</a>\nmaps-sdk-1.3.0.pom\norg.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration ':app:debugRuntimeClasspath'.\norg.gradle.internal.resolve.ModuleVersionResolveException: Could not resolve com.microsoft.maps:maps-sdk:1.3.0.\norg.gradle.api.internal.artifacts.ivyservice.ivyresolve.parser.MetaDataParseException: Could not parse POM <a href=\"https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom\" rel=\"nofollow noreferrer\">https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom</a>\norg.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration ':app:debugRuntimeClasspath'.\norg.gradle.internal.resolve.ModuleVersionResolveException: Could not resolve com.microsoft.maps:maps-sdk:1.3.0.\norg.gradle.api.internal.artifacts.ivyservice.ivyresolve.parser.MetaDataParseException: Could not parse POM <a href=\"https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom\" rel=\"nofollow noreferrer\">https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom</a>\norg.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration ':app:debugRuntimeClasspath'.\norg.gradle.internal.resolve.ModuleVersionResolveException: Could not resolve com.microsoft.maps:maps-sdk:1.3.0.\norg.gradle.api.internal.artifacts.ivyservice.ivyresolve.parser.MetaDataParseException: Could not parse POM <a href=\"https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom\" rel=\"nofollow noreferrer\">https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom</a>\norg.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration ':app:debugRuntimeClasspath'.\norg.gradle.internal.resolve.ModuleVersionResolveException: Could not resolve com.microsoft.maps:maps-sdk:1.3.0.\norg.gradle.api.internal.artifacts.ivyservice.ivyresolve.parser.MetaDataParseException: Could not parse POM <a href=\"https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom\" rel=\"nofollow noreferrer\">https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom</a>\norg.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration ':app:debugRuntimeClasspath'.\norg.gradle.internal.resolve.ModuleVersionResolveException: Could not resolve com.microsoft.maps:maps-sdk:1.3.0.\norg.gradle.api.internal.artifacts.ivyservice.ivyresolve.parser.MetaDataParseException: Could not parse POM <a href=\"https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom\" rel=\"nofollow noreferrer\">https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom</a>\norg.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration ':app:debugRuntimeClasspath'.\norg.gradle.internal.resolve.ModuleVersionResolveException: Could not resolve com.microsoft.maps:maps-sdk:1.3.0.\norg.gradle.api.internal.artifacts.ivyservice.ivyresolve.parser.MetaDataParseException: Could not parse POM <a href=\"https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom\" rel=\"nofollow noreferrer\">https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom</a>\norg.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration ':app:debugRuntimeClasspath'.\norg.gradle.internal.resolve.ModuleVersionResolveException: Could not resolve com.microsoft.maps:maps-sdk:1.3.0.\norg.gradle.api.internal.artifacts.ivyservice.ivyresolve.parser.MetaDataParseException: Could not parse POM <a href=\"https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom\" rel=\"nofollow noreferrer\">https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom</a>\norg.gradle.internal.execution.fingerprint.InputFingerprinter$InputFileFingerprintingException: Cannot fingerprint input file property 'externalLibNativeLibs': Could not resolve all files for configuration ':app:debugRuntimeClasspath'.\norg.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration ':app:debugRuntimeClasspath'.\norg.gradle.internal.resolve.ModuleVersionResolveException: Could not resolve com.microsoft.maps:maps-sdk:1.3.0.\norg.gradle.api.internal.artifacts.ivyservice.ivyresolve.parser.MetaDataParseException: Could not parse POM <a href=\"https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom\" rel=\"nofollow noreferrer\">https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom</a>\nAlready seen doctype</p>\n<p>Tried to find solution but does not seem to be one online. What has caused this???</p>\n"},{"tags":["java","android","encryption"],"comments":[{"owner":{"account_id":85671,"reputation":40858,"user_id":238704,"display_name":"President James K. Polk"},"score":1,"creation_date":1691154099,"post_id":76832807,"comment_id":135457098,"body_markdown":"This doesn&#39;t explain your current problem but your code is buggy. First, you aren&#39;t specifying the full cipher transformation string with &quot;ALGORITHM/MODE/PADDING&quot;, instead you&#39;re just specifying the &quot;ALGORITHM&quot;. It&#39;s unfortunate that Java allows it but it does, with the result that you get provider defaults. These defaults can vary from provider to provider and platform to platform, making the code non-portable. Second, the lines `outputStream.write(cipher.update(buff,0, readBytes));` can throw a null pointer exception in certain cases, e.g. a file whose length %1024 is &lt; 16.","body":"This doesn&#39;t explain your current problem but your code is buggy. First, you aren&#39;t specifying the full cipher transformation string with &quot;ALGORITHM/MODE/PADDING&quot;, instead you&#39;re just specifying the &quot;ALGORITHM&quot;. It&#39;s unfortunate that Java allows it but it does, with the result that you get provider defaults. These defaults can vary from provider to provider and platform to platform, making the code non-portable. Second, the lines <code>outputStream.write(cipher.update(buff,0, readBytes));</code> can throw a null pointer exception in certain cases, e.g. a file whose length %1024 is &lt; 16."},{"owner":{"account_id":85671,"reputation":40858,"user_id":238704,"display_name":"President James K. Polk"},"score":1,"creation_date":1691154211,"post_id":76832807,"comment_id":135457116,"body_markdown":"Consider using CipherInputStream/CipherOutputStream and Files.copy to make this cleaner, clearer and much shorter.","body":"Consider using CipherInputStream/CipherOutputStream and Files.copy to make this cleaner, clearer and much shorter."},{"owner":{"account_id":85671,"reputation":40858,"user_id":238704,"display_name":"President James K. Polk"},"score":1,"creation_date":1691154317,"post_id":76832807,"comment_id":135457136,"body_markdown":"Please specify the exact data that causes the IllegalBlockSizeException, or at least the exact length of the file. Also provide the full exception stacktrace.","body":"Please specify the exact data that causes the IllegalBlockSizeException, or at least the exact length of the file. Also provide the full exception stacktrace."},{"owner":{"account_id":16120041,"reputation":16,"user_id":11636224,"display_name":"Михаил Карлов"},"score":0,"creation_date":1691243229,"post_id":76832807,"comment_id":135467286,"body_markdown":"I&#39;ve tried several files and the result is the same. I&#39;ve also tried CipherInputStream/CipherOutputStream. The code is not working at all and that&#39;s the question. But thanks","body":"I&#39;ve tried several files and the result is the same. I&#39;ve also tried CipherInputStream/CipherOutputStream. The code is not working at all and that&#39;s the question. But thanks"},{"owner":{"account_id":16120041,"reputation":16,"user_id":11636224,"display_name":"Михаил Карлов"},"score":0,"creation_date":1691243458,"post_id":76832807,"comment_id":135467305,"body_markdown":"It&#39;s working for encryption but decryption causes this exception","body":"It&#39;s working for encryption but decryption causes this exception"}],"owner":{"account_id":16120041,"reputation":16,"user_id":11636224,"display_name":"Михаил Карлов"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691120358,"creation_date":1691119922,"question_id":76832807,"body_markdown":"I have encryptor/decryptor and it worked well until I tried to add large files support.\r\nI have javax.crypto.IllegalBlockSizeException: last block incomplete in decryption.\r\n```  \r\n  private static final String ALGORITHM = &quot;AES&quot;;\r\n    private static final String TRANSFORMATION = &quot;AES&quot;;\r\n\r\n    public static void encrypt(String key, File inputFile, File outputFile) {\r\n        doCrypto(Cipher.ENCRYPT_MODE, key, inputFile, outputFile);\r\n    }\r\n\r\n    public static void decrypt(String key, File inputFile, File outputFile) {\r\n        doCrypto(Cipher.DECRYPT_MODE, key, inputFile, outputFile);\r\n    }\r\n\r\n    public static SecretKey generateKey(String key)\r\n            throws NoSuchAlgorithmException, InvalidKeySpecException {\r\n        SecretKeyFactory factory = SecretKeyFactory.getInstance(&quot;PBKDF2WithHmacSHA256&quot;);\r\n        KeySpec spec = new PBEKeySpec(key.toCharArray(), EncryptionUtil.SALT.getBytes(), 65536, 256);\r\n\r\n        return new SecretKeySpec(factory.generateSecret(spec).getEncoded(), &quot;AES&quot;);\r\n    }\r\n\r\n    private static void doCrypto(int cipherMode, String key, File inputFile,\r\n                                 File outputFile) {\r\n        try {\r\n            Key secretKey = generateKey(key);\r\n            Cipher cipher = Cipher.getInstance(TRANSFORMATION);\r\n\r\n            cipher.init(cipherMode, secretKey);\r\n            FileInputStream inputStream = new FileInputStream(inputFile);\r\n            byte[] buff = new byte[1024];\r\n            FileOutputStream outputStream = new FileOutputStream(outputFile);\r\n            for(int readBytes=inputStream.read(buff); readBytes&gt;-1;readBytes=inputStream.read(buff)) {\r\n                outputStream.write(cipher.update(buff,0, readBytes));\r\n            }\r\n            outputStream.write(cipher.doFinal()); // here we get IllegalBlockSizeException\r\n\r\n            inputStream.close();\r\n            outputStream.close();\r\n\r\n        } catch (Exception ex) {\r\n            ex.printStackTrace();\r\n        }\r\n    }\r\n ```","title":"Large files encryption: last block incomplete in decryption","body":"<p>I have encryptor/decryptor and it worked well until I tried to add large files support.\nI have javax.crypto.IllegalBlockSizeException: last block incomplete in decryption.</p>\n<pre><code>  private static final String ALGORITHM = &quot;AES&quot;;\n    private static final String TRANSFORMATION = &quot;AES&quot;;\n\n    public static void encrypt(String key, File inputFile, File outputFile) {\n        doCrypto(Cipher.ENCRYPT_MODE, key, inputFile, outputFile);\n    }\n\n    public static void decrypt(String key, File inputFile, File outputFile) {\n        doCrypto(Cipher.DECRYPT_MODE, key, inputFile, outputFile);\n    }\n\n    public static SecretKey generateKey(String key)\n            throws NoSuchAlgorithmException, InvalidKeySpecException {\n        SecretKeyFactory factory = SecretKeyFactory.getInstance(&quot;PBKDF2WithHmacSHA256&quot;);\n        KeySpec spec = new PBEKeySpec(key.toCharArray(), EncryptionUtil.SALT.getBytes(), 65536, 256);\n\n        return new SecretKeySpec(factory.generateSecret(spec).getEncoded(), &quot;AES&quot;);\n    }\n\n    private static void doCrypto(int cipherMode, String key, File inputFile,\n                                 File outputFile) {\n        try {\n            Key secretKey = generateKey(key);\n            Cipher cipher = Cipher.getInstance(TRANSFORMATION);\n\n            cipher.init(cipherMode, secretKey);\n            FileInputStream inputStream = new FileInputStream(inputFile);\n            byte[] buff = new byte[1024];\n            FileOutputStream outputStream = new FileOutputStream(outputFile);\n            for(int readBytes=inputStream.read(buff); readBytes&gt;-1;readBytes=inputStream.read(buff)) {\n                outputStream.write(cipher.update(buff,0, readBytes));\n            }\n            outputStream.write(cipher.doFinal()); // here we get IllegalBlockSizeException\n\n            inputStream.close();\n            outputStream.close();\n\n        } catch (Exception ex) {\n            ex.printStackTrace();\n        }\n    }\n</code></pre>\n"},{"tags":["java","spring","oauth-2.0","keycloak","spring-cloud"],"answers":[{"tags":[],"owner":{"account_id":15988518,"reputation":33,"user_id":11839635,"display_name":"Gleb Shakhov"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1690968931,"creation_date":1690968931,"answer_id":76818555,"question_id":76817902,"body_markdown":"If you set up routes in your gateway to catalog service and make a request not directly to catalog service, but through gateway, Keycloak will check it. But the catalog service itself will still be accessible. You just don&#39;t have to use direct endpoints.","title":"Spring Cloud Gateway -&gt; Keycloak -&gt; Microservice","body":"<p>If you set up routes in your gateway to catalog service and make a request not directly to catalog service, but through gateway, Keycloak will check it. But the catalog service itself will still be accessible. You just don't have to use direct endpoints.</p>\n"},{"comments":[{"owner":{"account_id":29017542,"reputation":5,"user_id":22227669,"display_name":"ok buddy"},"score":0,"creation_date":1691053047,"post_id":76820076,"comment_id":135440295,"body_markdown":"Thank u so much, I will definitely follow your advice! So far, I have solved the problem by setting only &#39;expose&#39; for catalog-service in docker-compose, prohibiting external access, but I think this is not a very good solution, although it is working..","body":"Thank u so much, I will definitely follow your advice! So far, I have solved the problem by setting only &#39;expose&#39; for catalog-service in docker-compose, prohibiting external access, but I think this is not a very good solution, although it is working.."}],"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691118758,"creation_date":1690980703,"answer_id":76820076,"question_id":76817902,"body_markdown":"Both configurations (client and resource server) are possible for the gateway.\r\n\r\nIf you want direct calls to APIs to be secured, then each of this APIs should be configured as resource server. \r\n\r\nIf downstream APIs are configured as resource servers and front-ends (whatever is sending requests to the gateway) are configured as OAuth2 clients, then no security at all is necessary on the gateway (it&#39;s job is just routing). \r\n\r\n`TokenRelay=` filter is to be used on gateway configured as client with downstream API configured as resource servers and front-ends secured with sessions. This filter replaces on the fly session cookie with access token before forwarding requests to downstream resource servers. This is called the backend for frontend pattern (aka BFF), and is now recommanded: yes, using session cookies (flagged with same-site and http-only) with CSRF protection is safer than exposing OAuth2 tokens to Javascript. \r\n\r\nI suggest you have a look at my tutorials for more [OAuth2 background][1] and many configuration samples (including a BFF one) \r\n\r\nThe reason why I did not write much about gateway configured as resource server is because, in my opinion, it is a bad practice: \r\n- downstream services are not secured or security is duplicated, which is worth\r\n- gateway is tightly coupled to downstream services, which breaks the value of micro-services (maintaining small pieces of loosely coupled software). For instance, gateway has to know what a catalog is, how it is structured and probably how it relates to users to implement security rules like &quot;can edit this product if manager or member of the team responsible for this product&quot; \r\n- you can hardly unit test security rules on the gateway (difficulties to unit-test usually are a good indicator for bad design) \r\n\r\n  [1]: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials#1-oauth2-essentials","title":"Spring Cloud Gateway -&gt; Keycloak -&gt; Microservice","body":"<p>Both configurations (client and resource server) are possible for the gateway.</p>\n<p>If you want direct calls to APIs to be secured, then each of this APIs should be configured as resource server.</p>\n<p>If downstream APIs are configured as resource servers and front-ends (whatever is sending requests to the gateway) are configured as OAuth2 clients, then no security at all is necessary on the gateway (it's job is just routing).</p>\n<p><code>TokenRelay=</code> filter is to be used on gateway configured as client with downstream API configured as resource servers and front-ends secured with sessions. This filter replaces on the fly session cookie with access token before forwarding requests to downstream resource servers. This is called the backend for frontend pattern (aka BFF), and is now recommanded: yes, using session cookies (flagged with same-site and http-only) with CSRF protection is safer than exposing OAuth2 tokens to Javascript.</p>\n<p>I suggest you have a look at my tutorials for more <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials#1-oauth2-essentials\" rel=\"nofollow noreferrer\">OAuth2 background</a> and many configuration samples (including a BFF one)</p>\n<p>The reason why I did not write much about gateway configured as resource server is because, in my opinion, it is a bad practice:</p>\n<ul>\n<li>downstream services are not secured or security is duplicated, which is worth</li>\n<li>gateway is tightly coupled to downstream services, which breaks the value of micro-services (maintaining small pieces of loosely coupled software). For instance, gateway has to know what a catalog is, how it is structured and probably how it relates to users to implement security rules like &quot;can edit this product if manager or member of the team responsible for this product&quot;</li>\n<li>you can hardly unit test security rules on the gateway (difficulties to unit-test usually are a good indicator for bad design)</li>\n</ul>\n"}],"owner":{"account_id":29017542,"reputation":5,"user_id":22227669,"display_name":"ok buddy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":527,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76820076,"answer_count":2,"score":0,"last_activity_date":1691118758,"creation_date":1690964368,"question_id":76817902,"body_markdown":"I wrote two services:\r\n1. api gateway (spring cloud gateway)\r\n2. catalog service\r\n\r\nNext, I used keycloak. As far as I understand, according to OAuth2, the gateway is a resource, not a client. I did so. Everything works fine.\r\n\r\nMy problem: I can access catalog-service through the gateway, which will access keycloak, and in case of successful authentication will go to catalog-service, BUT I can still access catalog-service directly, without authentication.\r\n\r\nThis is logical, because I haven&#39;t changed anything in catalog-service for security, but I don&#39;t understand how to do it correctly. Declare a catalog service as a resource server too and use Token Relay in Spring Gateway? Will it work and is it a good practice? Or use Spring Security somehow? I&#39;m confused..\r\n\r\nAnd should I make the gateway a client after all? Because I see many more examples on the Internet of exactly this use of the gateway..","title":"Spring Cloud Gateway -&gt; Keycloak -&gt; Microservice","body":"<p>I wrote two services:</p>\n<ol>\n<li>api gateway (spring cloud gateway)</li>\n<li>catalog service</li>\n</ol>\n<p>Next, I used keycloak. As far as I understand, according to OAuth2, the gateway is a resource, not a client. I did so. Everything works fine.</p>\n<p>My problem: I can access catalog-service through the gateway, which will access keycloak, and in case of successful authentication will go to catalog-service, BUT I can still access catalog-service directly, without authentication.</p>\n<p>This is logical, because I haven't changed anything in catalog-service for security, but I don't understand how to do it correctly. Declare a catalog service as a resource server too and use Token Relay in Spring Gateway? Will it work and is it a good practice? Or use Spring Security somehow? I'm confused..</p>\n<p>And should I make the gateway a client after all? Because I see many more examples on the Internet of exactly this use of the gateway..</p>\n"},{"tags":["java","spring","stream"],"answers":[{"tags":[],"owner":{"account_id":28217991,"reputation":1,"user_id":21569195,"display_name":"tcm"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691118112,"creation_date":1691118112,"answer_id":76832714,"question_id":73364123,"body_markdown":"I have a same problem,my spring-cloud-stream version is 3.1.3 ,debug found a logical problem, DefaultSingletonBeanRegistry class&#39;s method getSingleton gave your bean name [forceLogoutTopic.handleError.serviceActivator] multiple registrations.\r\n\r\nIn the end,I use @StreamListener replace @ServiceActivator fixed, It&#39;s working.\r\n```\r\n@StreamListener(IntegrationContextUtils.ERROR_CHANNEL_BEAN_NAME)\r\n```\r\nyou can try:\r\n```\r\n@StreamListener(&quot;force-logout-topic.force-logout-group.errors&quot;)\r\n```\r\n\r\nsingletonFactory.getObject() duplicate registration same bean name:\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/S3EIz.png","title":"he @ServiceActivator(inputChannel = &quot;[topic].[group]. Errors &quot;) annotation Is there an unresolvable Circular reference exception","body":"<p>I have a same problem,my spring-cloud-stream version is 3.1.3 ,debug found a logical problem, DefaultSingletonBeanRegistry class's method getSingleton gave your bean name [forceLogoutTopic.handleError.serviceActivator] multiple registrations.</p>\n<p>In the end,I use @StreamListener replace @ServiceActivator fixed, It's working.</p>\n<pre><code>@StreamListener(IntegrationContextUtils.ERROR_CHANNEL_BEAN_NAME)\n</code></pre>\n<p>you can try:</p>\n<pre><code>@StreamListener(&quot;force-logout-topic.force-logout-group.errors&quot;)\n</code></pre>\n<p>singletonFactory.getObject() duplicate registration same bean name:\n<a href=\"https://i.stack.imgur.com/S3EIz.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"}],"owner":{"account_id":26069874,"reputation":1,"user_id":19769749,"display_name":"lijun"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691118112,"creation_date":1660582607,"question_id":73364123,"body_markdown":"describe: \r\n\r\nhello\r\nAn exception occurred while using a channel that handles local exceptions,But it works fine\r\n\r\n   ```java\r\n      @ServiceActivator(inputChannel = &quot;force-logout-topic.force-logout-group.errors&quot;)\r\n      public void handleError(ErrorMessage message) {\r\n        log.info(&quot;原始消息体 = {}&quot;, message);\r\n     }\r\n  ```\r\n\r\n```java\r\nCould not register an MBean for: forceLogoutTopic.handleError.serviceActivator  org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name &#39;forceLogoutTopic.handleError.serviceActivator&#39;: Requested bean is currently in creation: Is there an unresolvable circular reference?\r\n```\r\n```java\r\n2022-08-16 00:41:24,893 WARN  [force-logout-topic.force-logout-group-1,27c4d80edb2f6454,9142bcafd2fa2973] o.s.c.l.c.RoundRobinLoadBalancer.getInstanceResponse(98): No servers available for service: my-shop-auth-service  \r\n2022-08-16 00:41:24,894 WARN  [force-logout-topic.force-logout-group-1,27c4d80edb2f6454,9142bcafd2fa2973] o.s.c.o.l.RetryableFeignBlockingLoadBalancerClient.lambda$execute$2(145): Service instance was not resolved, executing the original request  \r\n```\r\n\r\n```yml\r\nspring:\r\n  cloud:\r\n    stream:\r\n      function:\r\n        definition: forceLogoutConsumer\r\n      bindings:\r\n        forceLogoutConsumer-in-0:\r\n          destination: force-logout-topic\r\n          group: force-logout-group\r\n        forceLogoutProducer:\r\n          destination: force-logout-topic\r\n          producer:\r\n            error-channel-enabled: true\r\n```","title":"he @ServiceActivator(inputChannel = &quot;[topic].[group]. Errors &quot;) annotation Is there an unresolvable Circular reference exception","body":"<p>describe:</p>\n<p>hello\nAn exception occurred while using a channel that handles local exceptions,But it works fine</p>\n<pre class=\"lang-java prettyprint-override\"><code>   @ServiceActivator(inputChannel = &quot;force-logout-topic.force-logout-group.errors&quot;)\n   public void handleError(ErrorMessage message) {\n     log.info(&quot;原始消息体 = {}&quot;, message);\n  }\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>Could not register an MBean for: forceLogoutTopic.handleError.serviceActivator  org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name 'forceLogoutTopic.handleError.serviceActivator': Requested bean is currently in creation: Is there an unresolvable circular reference?\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>2022-08-16 00:41:24,893 WARN  [force-logout-topic.force-logout-group-1,27c4d80edb2f6454,9142bcafd2fa2973] o.s.c.l.c.RoundRobinLoadBalancer.getInstanceResponse(98): No servers available for service: my-shop-auth-service  \n2022-08-16 00:41:24,894 WARN  [force-logout-topic.force-logout-group-1,27c4d80edb2f6454,9142bcafd2fa2973] o.s.c.o.l.RetryableFeignBlockingLoadBalancerClient.lambda$execute$2(145): Service instance was not resolved, executing the original request  \n</code></pre>\n<pre class=\"lang-yaml prettyprint-override\"><code>spring:\n  cloud:\n    stream:\n      function:\n        definition: forceLogoutConsumer\n      bindings:\n        forceLogoutConsumer-in-0:\n          destination: force-logout-topic\n          group: force-logout-group\n        forceLogoutProducer:\n          destination: force-logout-topic\n          producer:\n            error-channel-enabled: true\n</code></pre>\n"},{"tags":["java","maven","apache-karaf","blueprint-osgi"],"comments":[{"owner":{"account_id":91170,"reputation":6162,"user_id":250517,"accept_rate":75,"display_name":"Grzegorz Grzybek"},"score":0,"creation_date":1691128548,"post_id":76832708,"comment_id":135452462,"body_markdown":"Please install `aries-blueprint` feature - that&#39;s how Karaf itself uses blueprint.","body":"Please install <code>aries-blueprint</code> feature - that&#39;s how Karaf itself uses blueprint."},{"owner":{"account_id":22649518,"reputation":13,"user_id":16824403,"display_name":"Ubuntu Learner"},"score":0,"creation_date":1691128913,"post_id":76832708,"comment_id":135452502,"body_markdown":"Thanks @Grzegorz Grzybek! It solved the problem.","body":"Thanks @Grzegorz Grzybek! It solved the problem."}],"owner":{"account_id":22649518,"reputation":13,"user_id":16824403,"display_name":"Ubuntu Learner"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691118074,"creation_date":1691118074,"question_id":76832708,"body_markdown":"I try to start a feature using Karaf console:\r\n\r\n```karaf@karaf()&gt; feature:install my_feature```\r\n\r\nand get the following error:\r\n```\r\nError executing command: \r\nUnable to resolve root: \r\n\tmissing requirement [root] osgi.identity; \r\n\tosgi.identity=my_feature; \r\n\ttype=karaf.feature; \r\n\tversion=&quot;[4.0.0.SNAPSHOT,4.0.0.SNAPSHOT]&quot;; \r\n\tfilter:=&quot;(&amp;(osgi.identity=my_feature)(type=karaf.feature)(version&gt;=4.0.0.SNAPSHOT)(version&lt;=4.0.0.SNAPSHOT))&quot; \r\n\t[\r\n\t\tcaused by: Unable to resolve my_feature/4.0.0.SNAPSHOT: \r\n\t\tmissing requirement [my_feature/4.0.0.SNAPSHOT] osgi.identity; \r\n\t\tosgi.identity=appliance-branding; \r\n\t\ttype=osgi.bundle; \r\n\t\tversion=&quot;[4.0.0.SNAPSHOT,4.0.0.SNAPSHOT]&quot;; \r\n\t\tresolution:=mandatory \r\n\t\t[\r\n\t\t\tcaused by: Unable to resolve appliance-branding/4.0.0.SNAPSHOT: \r\n\t\t\tmissing requirement [appliance-branding/4.0.0.SNAPSHOT] osgi.wiring.package; \r\n\t\t\tfilter:=&quot;(&amp;(osgi.wiring.package=org.osgi.service.blueprint)(version&gt;=1.0.0)(!(version&gt;=2.0.0)))&quot;\r\n\t\t]\r\n\t]\r\n```\r\n\r\nHowever, I manually added the org.osgi.service.blueprint bundle and having it active:\r\n```\r\nkaraf@karaf()&gt; list\r\nSTART LEVEL 100 , List Threshold: 50\r\nID │ State  │ Lvl │ Version            │ Name\r\n───┼────────┼─────┼────────────────────┼────────────────────────────────────────\r\n27 │ Active │ 100 │ 4.2.16             │ Apache Karaf :: OSGi Services :: Event\r\n51 │ Active │  80 │ 1.0.2.201505202024 │ org.osgi:org.osgi.service.blueprint\r\n```\r\n\r\nThe question is why Karaf ignores the org.osgi.service.blueprint bundle and can&#39;t install my feature and what I can do to install it?\r\n\r\nUPD: I used Karaf 2.2.x and I didn&#39;t have any issues with it, now I&#39;m trying to upgrade from 2.2.x to 4.2.16. I built my application using Java 6 for Karaf 2.2.x and now I&#39;m using Java 8 along with Karaf 4.2.16. The source code is absolutely the same, nothing was changed except Java version I&#39;m using to build.","title":"Feature fails to start using Karaf 4.2.16 due to unresolved dependencies","body":"<p>I try to start a feature using Karaf console:</p>\n<p><code>karaf@karaf()&gt; feature:install my_feature</code></p>\n<p>and get the following error:</p>\n<pre><code>Error executing command: \nUnable to resolve root: \n    missing requirement [root] osgi.identity; \n    osgi.identity=my_feature; \n    type=karaf.feature; \n    version=&quot;[4.0.0.SNAPSHOT,4.0.0.SNAPSHOT]&quot;; \n    filter:=&quot;(&amp;(osgi.identity=my_feature)(type=karaf.feature)(version&gt;=4.0.0.SNAPSHOT)(version&lt;=4.0.0.SNAPSHOT))&quot; \n    [\n        caused by: Unable to resolve my_feature/4.0.0.SNAPSHOT: \n        missing requirement [my_feature/4.0.0.SNAPSHOT] osgi.identity; \n        osgi.identity=appliance-branding; \n        type=osgi.bundle; \n        version=&quot;[4.0.0.SNAPSHOT,4.0.0.SNAPSHOT]&quot;; \n        resolution:=mandatory \n        [\n            caused by: Unable to resolve appliance-branding/4.0.0.SNAPSHOT: \n            missing requirement [appliance-branding/4.0.0.SNAPSHOT] osgi.wiring.package; \n            filter:=&quot;(&amp;(osgi.wiring.package=org.osgi.service.blueprint)(version&gt;=1.0.0)(!(version&gt;=2.0.0)))&quot;\n        ]\n    ]\n</code></pre>\n<p>However, I manually added the org.osgi.service.blueprint bundle and having it active:</p>\n<pre><code>karaf@karaf()&gt; list\nSTART LEVEL 100 , List Threshold: 50\nID │ State  │ Lvl │ Version            │ Name\n───┼────────┼─────┼────────────────────┼────────────────────────────────────────\n27 │ Active │ 100 │ 4.2.16             │ Apache Karaf :: OSGi Services :: Event\n51 │ Active │  80 │ 1.0.2.201505202024 │ org.osgi:org.osgi.service.blueprint\n</code></pre>\n<p>The question is why Karaf ignores the org.osgi.service.blueprint bundle and can't install my feature and what I can do to install it?</p>\n<p>UPD: I used Karaf 2.2.x and I didn't have any issues with it, now I'm trying to upgrade from 2.2.x to 4.2.16. I built my application using Java 6 for Karaf 2.2.x and now I'm using Java 8 along with Karaf 4.2.16. The source code is absolutely the same, nothing was changed except Java version I'm using to build.</p>\n"},{"tags":["java","testng"],"comments":[{"owner":{"account_id":54296,"reputation":15518,"user_id":162410,"accept_rate":56,"display_name":"Cedric Beust"},"score":0,"creation_date":1470410592,"post_id":38758745,"comment_id":64955774,"body_markdown":"Please see Julien Herr&#39;s answer below. A quick observation: once you start depending on multiple methods, I recommend depending on groups instead, which is much easier to maintain. But you definitely seem to have found a bug here.","body":"Please see Julien Herr&#39;s answer below. A quick observation: once you start depending on multiple methods, I recommend depending on groups instead, which is much easier to maintain. But you definitely seem to have found a bug here."}],"answers":[{"comments":[{"owner":{"account_id":3467967,"reputation":1511,"user_id":2903069,"accept_rate":24,"display_name":"Shashi Ranjan"},"score":0,"creation_date":1470288393,"post_id":38758912,"comment_id":64890470,"body_markdown":"oh! Probably I need to go thru these attribute more in details. @JohnK Basically I do not want to write test4() method twice and I want to run test4() after test2() and test3() but not after test1() . Any idea how I can get this?","body":"oh! Probably I need to go thru these attribute more in details. @JohnK Basically I do not want to write test4() method twice and I want to run test4() after test2() and test3() but not after test1() . Any idea how I can get this?"},{"owner":{"account_id":2131203,"reputation":462,"user_id":5273975,"display_name":"John K"},"score":0,"creation_date":1470288905,"post_id":38758912,"comment_id":64890679,"body_markdown":"For something like this I think the best answer is to just have test2 and test3 manually call test4 as the last line in the method. @nick-humrich has an excellent explanation of the test set-ups and tear downs [here](http://stackoverflow.com/a/20642025/5273975)","body":"For something like this I think the best answer is to just have test2 and test3 manually call test4 as the last line in the method. @nick-humrich has an excellent explanation of the test set-ups and tear downs <a href=\"http://stackoverflow.com/a/20642025/5273975\">here</a>"},{"owner":{"account_id":160245,"reputation":2421,"user_id":380161,"accept_rate":57,"display_name":"Anupam Saini"},"score":0,"creation_date":1470289026,"post_id":38758912,"comment_id":64890728,"body_markdown":"It&#39;s generally a bad practice for unit tests to rely on execution order. All the unit tests must be self contained. http://stackoverflow.com/questions/3693626/how-to-run-test-methods-in-specific-order-in-junit4","body":"It&#39;s generally a bad practice for unit tests to rely on execution order. All the unit tests must be self contained. <a href=\"http://stackoverflow.com/questions/3693626/how-to-run-test-methods-in-specific-order-in-junit4\" title=\"how to run test methods in specific order in junit4\">stackoverflow.com/questions/3693626/&hellip;</a>"}],"tags":[],"owner":{"account_id":2131203,"reputation":462,"user_id":5273975,"display_name":"John K"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1470287455,"creation_date":1470287455,"answer_id":38758912,"question_id":38758745,"body_markdown":"@AfterMethod declares that this method is run after every method annotated with @Test. Right now you have a conflict with test4() being called after test1() and before test2(), while also requiring it to be run after test2(). Refer to [this](https://github.com/cbeust/testng/issues/550) for more in-depth discussion.\r\n\r\nedit: I should probably make the call order more clear. \r\n\r\n    test1()-&gt;test4()\r\n    test2()-&gt;test4()\r\n    test3()-&gt;test4()\r\n\r\nAs you can see, requiring test4() to be run after test2() and test3() is in conflict with the @AfterMethod annotation requiring it be called after every method. ","title":"dependsOnMethods for @AfterTest not finding the test method","body":"<p>@AfterMethod declares that this method is run after every method annotated with @Test. Right now you have a conflict with test4() being called after test1() and before test2(), while also requiring it to be run after test2(). Refer to <a href=\"https://github.com/cbeust/testng/issues/550\" rel=\"nofollow\">this</a> for more in-depth discussion.</p>\n\n<p>edit: I should probably make the call order more clear. </p>\n\n<pre><code>test1()-&gt;test4()\ntest2()-&gt;test4()\ntest3()-&gt;test4()\n</code></pre>\n\n<p>As you can see, requiring test4() to be run after test2() and test3() is in conflict with the @AfterMethod annotation requiring it be called after every method. </p>\n"},{"tags":[],"owner":{"account_id":5307294,"reputation":5670,"user_id":4234729,"display_name":"juherr"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1470416142,"creation_date":1470295964,"answer_id":38761124,"question_id":38758745,"body_markdown":"`dependsOnMethod` is not working like that and just used to order methods between them.\r\nThe [javadoc][1] is clear enough IMO:\r\n\r\n&gt; The list of methods this method depends on. There is no guarantee on the order on which the methods depended upon will be run, but you are guaranteed that all these methods will be run before the test method that contains this annotation is run. Furthermore, if any of these methods was not a SUCCESS, this test method will not be run and will be flagged as a SKIP. If some of these methods have been overloaded, all the overloaded versions will be run.\r\n\r\nBut the exception should not happen so I opened [an issue][2] for it.\r\n\r\nAbout your need which is running an `@AfterMethod` for specific methods only (something looks weird, but why not), you can do the following:\r\n\r\n    public class ShashiTest {\r\n        @Test\r\n        public void test1(){\r\n            System.out.println(&quot;1===========&quot;);\r\n        }\r\n\r\n        @Test(dependsOnMethods=&quot;test1&quot;)\r\n        public void test2(){\r\n            System.out.println(&quot;2===========&quot;);\r\n        }\r\n\r\n        @Test(dependsOnMethods=&quot;test2&quot;)\r\n        public void test3(){\r\n            System.out.println(&quot;3===========&quot;);\r\n        }\r\n\r\n        @AfterMethod\r\n        public void test4(Method m){\r\n            switch(m.getName()) {\r\n                case &quot;test2&quot;:\r\n                case &quot;test3&quot;: \r\n                    System.out.println(&quot;4===========&quot;);    \r\n            }\r\n        }\r\n    }\r\n\r\nshould work as expected.\r\n\r\n  [1]: http://testng.org/javadocs/org/testng/annotations/AfterMethod.html#dependsOnMethods--\r\n  [2]: https://github.com/cbeust/testng/issues/1106","title":"dependsOnMethods for @AfterTest not finding the test method","body":"<p><code>dependsOnMethod</code> is not working like that and just used to order methods between them.\nThe <a href=\"http://testng.org/javadocs/org/testng/annotations/AfterMethod.html#dependsOnMethods--\" rel=\"nofollow\">javadoc</a> is clear enough IMO:</p>\n\n<blockquote>\n  <p>The list of methods this method depends on. There is no guarantee on the order on which the methods depended upon will be run, but you are guaranteed that all these methods will be run before the test method that contains this annotation is run. Furthermore, if any of these methods was not a SUCCESS, this test method will not be run and will be flagged as a SKIP. If some of these methods have been overloaded, all the overloaded versions will be run.</p>\n</blockquote>\n\n<p>But the exception should not happen so I opened <a href=\"https://github.com/cbeust/testng/issues/1106\" rel=\"nofollow\">an issue</a> for it.</p>\n\n<p>About your need which is running an <code>@AfterMethod</code> for specific methods only (something looks weird, but why not), you can do the following:</p>\n\n<pre><code>public class ShashiTest {\n    @Test\n    public void test1(){\n        System.out.println(\"1===========\");\n    }\n\n    @Test(dependsOnMethods=\"test1\")\n    public void test2(){\n        System.out.println(\"2===========\");\n    }\n\n    @Test(dependsOnMethods=\"test2\")\n    public void test3(){\n        System.out.println(\"3===========\");\n    }\n\n    @AfterMethod\n    public void test4(Method m){\n        switch(m.getName()) {\n            case \"test2\":\n            case \"test3\": \n                System.out.println(\"4===========\");    \n        }\n    }\n}\n</code></pre>\n\n<p>should work as expected.</p>\n"},{"tags":[],"owner":{"account_id":3956260,"reputation":13,"user_id":3264613,"display_name":"Vicky"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1519665062,"creation_date":1519665062,"answer_id":48993643,"question_id":38758745,"body_markdown":"Bit late to answer but I just faced this problem today. Error: com.expedia.FlightBooking.tearDown() is depending on method public void com.expedia.FlightBooking.flightBooking(), which is not annotated with @Test or not included.\r\n\r\nSolution: Changing dependsOnMethods to dependsOnGroups Ex: @AfterTest(dependsOnGroups = {&quot;flightBooking&quot;}) has solved my problem.","title":"dependsOnMethods for @AfterTest not finding the test method","body":"<p>Bit late to answer but I just faced this problem today. Error: com.expedia.FlightBooking.tearDown() is depending on method public void com.expedia.FlightBooking.flightBooking(), which is not annotated with @Test or not included.</p>\n\n<p>Solution: Changing dependsOnMethods to dependsOnGroups Ex: @AfterTest(dependsOnGroups = {\"flightBooking\"}) has solved my problem.</p>\n"}],"owner":{"account_id":3467967,"reputation":1511,"user_id":2903069,"accept_rate":24,"display_name":"Shashi Ranjan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1752,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1691116429,"creation_date":1470286568,"question_id":38758745,"body_markdown":"I am trying following code:\r\n\r\n    public class ShashiTest {\r\n        @Test\r\n    \tpublic void test1(){\r\n    \t\tSystem.out.println(&quot;1===========&quot;);\r\n    \t}\r\n    \t\r\n    \t@Test(dependsOnMethods=&quot;test1&quot;)\r\n    \tpublic void test2(){\r\n    \t\tSystem.out.println(&quot;2===========&quot;);\r\n    \t}\r\n    \t\r\n    \t@Test(dependsOnMethods=&quot;test2&quot;)\r\n    \tpublic void test3(){\r\n    \t\tSystem.out.println(&quot;3===========&quot;);\r\n    \t}\r\n    \t\r\n    \t@AfterMethod(dependsOnMethods={&quot;test2&quot;,&quot;test3&quot;})\r\n    \tpublic void test4(){\r\n    \t\tSystem.out.println(&quot;4===========&quot;);\r\n    \t}\r\n    }\r\n\r\nI am expecting output as:\r\n\r\n    1===========\r\n    2===========\r\n    4===========\r\n    3===========\r\n    4===========\r\n\r\nBut I am getting exception as test method not found:\r\n\r\n    com.ShashiTest.test4() is depending on method public void com.ShashiTest.test2(), which is not annotated with @Test or not included.\r\n    \tat org.testng.internal.MethodHelper.findDependedUponMethods(MethodHelper.java:111)\r\n\r\nWhere I am making the mistake? How I can achieve my goal?","title":"dependsOnMethods for @AfterTest not finding the test method","body":"<p>I am trying following code:</p>\n\n<pre><code>public class ShashiTest {\n    @Test\n    public void test1(){\n        System.out.println(\"1===========\");\n    }\n\n    @Test(dependsOnMethods=\"test1\")\n    public void test2(){\n        System.out.println(\"2===========\");\n    }\n\n    @Test(dependsOnMethods=\"test2\")\n    public void test3(){\n        System.out.println(\"3===========\");\n    }\n\n    @AfterMethod(dependsOnMethods={\"test2\",\"test3\"})\n    public void test4(){\n        System.out.println(\"4===========\");\n    }\n}\n</code></pre>\n\n<p>I am expecting output as:</p>\n\n<pre><code>1===========\n2===========\n4===========\n3===========\n4===========\n</code></pre>\n\n<p>But I am getting exception as test method not found:</p>\n\n<pre><code>com.ShashiTest.test4() is depending on method public void com.ShashiTest.test2(), which is not annotated with @Test or not included.\n    at org.testng.internal.MethodHelper.findDependedUponMethods(MethodHelper.java:111)\n</code></pre>\n\n<p>Where I am making the mistake? How I can achieve my goal?</p>\n"},{"tags":["java","save","telegram-bot","fileoutputstream","long-polling"],"owner":{"account_id":28414001,"reputation":1,"user_id":21737031,"display_name":"Павлюченко Антон"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691114900,"creation_date":1691114900,"question_id":76832548,"body_markdown":"I am creating my telegram bot on LongPollingBot using Japa Spring Boot (for the first time in my life, so I apologize for such a simple question)\r\nHow can I save the received photo from the user to make an array of bytes from it and using FileOutputStream save it to my local drive in a folder in good quality?\r\nI already tried to do something like this:\r\n\r\n    PhotoSize photoSize = msg.getPhoto().get(0);\r\n\r\n    File file = new File(&quot;./photos/&quot; + photoSize.getFileId() + &quot;.jpg&quot;);\r\n    try (FileOutputStream outputStream = new FileOutputStream(file)) {\r\n        outputStream.write(photoSize.getFileId().getBytes());\r\n    } catch (IOException e) {\r\n        e.printStackTrace();\r\n    }\r\nBut this just saves the byte array of that file&#39;s id, not the photo itself. I already surfed a bunch of sites and saw many times how they used photoSize.getDate.getInputStream() and so on, but apparently this is already outdated and I can’t write anything newer (please help me)","title":"How can I save a photo from a telegram bot user to a folder on a disk in good quality?","body":"<p>I am creating my telegram bot on LongPollingBot using Japa Spring Boot (for the first time in my life, so I apologize for such a simple question)\nHow can I save the received photo from the user to make an array of bytes from it and using FileOutputStream save it to my local drive in a folder in good quality?\nI already tried to do something like this:</p>\n<pre><code>PhotoSize photoSize = msg.getPhoto().get(0);\n\nFile file = new File(&quot;./photos/&quot; + photoSize.getFileId() + &quot;.jpg&quot;);\ntry (FileOutputStream outputStream = new FileOutputStream(file)) {\n    outputStream.write(photoSize.getFileId().getBytes());\n} catch (IOException e) {\n    e.printStackTrace();\n}\n</code></pre>\n<p>But this just saves the byte array of that file's id, not the photo itself. I already surfed a bunch of sites and saw many times how they used photoSize.getDate.getInputStream() and so on, but apparently this is already outdated and I can’t write anything newer (please help me)</p>\n"},{"tags":["java","sorting","java-8","collectors"],"comments":[{"owner":{"account_id":3418957,"reputation":1176,"user_id":4029174,"accept_rate":100,"display_name":"bananas"},"score":3,"creation_date":1561441064,"post_id":56747362,"comment_id":100052983,"body_markdown":"`TreeMap(Comparator&lt;? super K&gt; comparator)`","body":"<code>TreeMap(Comparator&lt;? super K&gt; comparator)</code>"}],"answers":[{"comments":[{"owner":{"account_id":551326,"reputation":3001,"user_id":916138,"accept_rate":45,"display_name":"Shahid Ghafoor"},"score":0,"creation_date":1561441254,"post_id":56747401,"comment_id":100053044,"body_markdown":"Thank Gave idea `Map&lt;String, List&lt;Test&gt;&gt; descendingOrder1 = tests.stream().collect(Collectors.groupingBy(Test::getName, () -&gt; new TreeMap&lt;&gt;(Collections.reverseOrder()), Collectors.toList()));` working !","body":"Thank Gave idea <code>Map&lt;String, List&lt;Test&gt;&gt; descendingOrder1 = tests.stream().collect(Collectors.groupingBy(Test::getName, () -&gt; new TreeMap&lt;&gt;(Collections.reverseOrder()), Collectors.toList()));</code> working !"},{"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"score":3,"creation_date":1561441464,"post_id":56747401,"comment_id":100053122,"body_markdown":"Why not just `Comparator.reverseOrder()` such as `Map&lt;String, List&lt;Test&gt;&gt; ascendingOrder =\n                tests.stream()\n                     .collect(groupingBy(Test::getName,\n                                         () -&gt; new TreeMap&lt;&gt;(Comparator.reverseOrder()),\n                                         Collectors.toList()));`?","body":"Why not just <code>Comparator.reverseOrder()</code> such as <code>Map&lt;String, List&lt;Test&gt;&gt; ascendingOrder =                 tests.stream()                      .collect(groupingBy(Test::getName,                                          () -&gt; new TreeMap&lt;&gt;(Comparator.reverseOrder()),                                          Collectors.toList()));</code>?"},{"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"score":1,"creation_date":1561441672,"post_id":56747401,"comment_id":100053180,"body_markdown":"@davidxxx sometimes the first solution that comes to my mind is not the simplest solution. Your solution also works.","body":"@davidxxx sometimes the first solution that comes to my mind is not the simplest solution. Your solution also works."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":0,"creation_date":1561460813,"post_id":56747401,"comment_id":100062818,"body_markdown":"We rather stumble upon `Collections.reverseOrder(Collections.reverseOrder())` when revising old code, as `Comparator.naturalOrder()` did not exist prior to Java&#160;8…","body":"We rather stumble upon <code>Collections.reverseOrder(Collections.reverseOrder())</code> when revising old code, as <code>Comparator.naturalOrder()</code> did not exist prior to Java 8…"}],"tags":[],"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"comment_count":4,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691114404,"creation_date":1561440818,"answer_id":56747401,"question_id":56747362,"body_markdown":"Pass a `Comparator` to the `TreeMap` constructor. For example:\r\n```java\r\nMap&lt;String, List&lt;Test&gt;&gt; descendingOrder = tests.stream().collect(\r\n     Collectors.groupingBy(Test::getName,\r\n                          () -&gt; new TreeMap(Comparator.reverseOrder()),\r\n                          Collectors.toList()));\r\n```\r\nOr:\r\n```java\r\nMap&lt;String, List&lt;Test&gt;&gt; descendingOrder = tests.stream().collect(\r\n     Collectors.groupingBy(Test::getName,\r\n                          () -&gt; new TreeMap&lt;&gt;(Collections.reverseOrder()),\r\n                          Collectors.toList()));\r\n```","title":"Collectors groupingBy insertion, ascending and descending order - java8","body":"<p>Pass a <code>Comparator</code> to the <code>TreeMap</code> constructor. For example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String, List&lt;Test&gt;&gt; descendingOrder = tests.stream().collect(\n     Collectors.groupingBy(Test::getName,\n                          () -&gt; new TreeMap(Comparator.reverseOrder()),\n                          Collectors.toList()));\n</code></pre>\n<p>Or:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String, List&lt;Test&gt;&gt; descendingOrder = tests.stream().collect(\n     Collectors.groupingBy(Test::getName,\n                          () -&gt; new TreeMap&lt;&gt;(Collections.reverseOrder()),\n                          Collectors.toList()));\n</code></pre>\n"}],"owner":{"account_id":551326,"reputation":3001,"user_id":916138,"accept_rate":45,"display_name":"Shahid Ghafoor"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1778,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1691114404,"creation_date":1561440641,"question_id":56747362,"body_markdown":"Sample Data\r\n\r\n    List&lt;Test&gt; tests = new ArrayList();\r\n\r\n    Test test3 = new Test();\r\n    test3.setName(&quot;FELLOW&quot;);\r\n    test3.setDescription(&quot;DESC FELLOW 1&quot;);\r\n    tests.add(test3);\r\n\r\n    Test test4 = new Test();\r\n    test4.setName(&quot;FELLOW&quot;);\r\n    test4.setDescription(&quot;DESC FELLOW 2&quot;);\r\n    tests.add(test4);\r\n\r\n    Test test = new Test();\r\n    test.setName(&quot;HELLO&quot;);\r\n    test.setDescription(&quot;DESC Hello 1&quot;);\r\n    tests.add(test);\r\n\r\n    Test test1 = new Test();\r\n    test1.setName(&quot;HELLO&quot;);\r\n    test1.setDescription(&quot;DESC Hello 2&quot;);\r\n    tests.add(test1);\r\n\r\n    Test test2 = new Test();\r\n    test2.setName(&quot;HELLO&quot;);\r\n    test2.setDescription(&quot;DESC Hello 3&quot;);\r\n    tests.add(test2);\r\n\r\n    Test test5 = new Test();\r\n    test5.setName(&quot;ABC&quot;);\r\n    test5.setDescription(&quot;DESC FELLOW 3&quot;);\r\n    tests.add(test5);\r\n\r\n    Test test6 = new Test();\r\n    test6.setName(&quot;ABC&quot;);\r\n    test6.setDescription(&quot;DESC ABC 1&quot;);\r\n    tests.add(test6);\r\n\r\nTo get data in insertion order, I used **LinkedHashMap**\r\n\r\n    Map&lt;String, List&lt;Test&gt;&gt; insertionOrder = tests.stream().collect(Collectors.groupingBy(Test::getName, LinkedHashMap::new, Collectors.toList()));\r\n\r\nresult:\r\n\r\n    FELLOW,\r\n    HELLO\r\n    ABC\r\n\r\nTo get data in ascending order, I used **TreeMap**\r\n\r\n    Map&lt;String, List&lt;Test&gt;&gt; ascendingOrder = tests.stream().collect(Collectors.groupingBy(Test::getName, TreeMap::new, Collectors.toList()));\r\n\r\nresult:\r\n\r\n    ABC,\r\n    FELLOW\r\n    HELLO\r\n\r\nHow to get Map in descending order ? for example ?\r\n\r\n    HELLO,\r\n    FELLOW\r\n    ABC\r\n\r\n\r\n","title":"Collectors groupingBy insertion, ascending and descending order - java8","body":"<p>Sample Data</p>\n\n<pre><code>List&lt;Test&gt; tests = new ArrayList();\n\nTest test3 = new Test();\ntest3.setName(\"FELLOW\");\ntest3.setDescription(\"DESC FELLOW 1\");\ntests.add(test3);\n\nTest test4 = new Test();\ntest4.setName(\"FELLOW\");\ntest4.setDescription(\"DESC FELLOW 2\");\ntests.add(test4);\n\nTest test = new Test();\ntest.setName(\"HELLO\");\ntest.setDescription(\"DESC Hello 1\");\ntests.add(test);\n\nTest test1 = new Test();\ntest1.setName(\"HELLO\");\ntest1.setDescription(\"DESC Hello 2\");\ntests.add(test1);\n\nTest test2 = new Test();\ntest2.setName(\"HELLO\");\ntest2.setDescription(\"DESC Hello 3\");\ntests.add(test2);\n\nTest test5 = new Test();\ntest5.setName(\"ABC\");\ntest5.setDescription(\"DESC FELLOW 3\");\ntests.add(test5);\n\nTest test6 = new Test();\ntest6.setName(\"ABC\");\ntest6.setDescription(\"DESC ABC 1\");\ntests.add(test6);\n</code></pre>\n\n<p>To get data in insertion order, I used <strong>LinkedHashMap</strong></p>\n\n<pre><code>Map&lt;String, List&lt;Test&gt;&gt; insertionOrder = tests.stream().collect(Collectors.groupingBy(Test::getName, LinkedHashMap::new, Collectors.toList()));\n</code></pre>\n\n<p>result:</p>\n\n<pre><code>FELLOW,\nHELLO\nABC\n</code></pre>\n\n<p>To get data in ascending order, I used <strong>TreeMap</strong></p>\n\n<pre><code>Map&lt;String, List&lt;Test&gt;&gt; ascendingOrder = tests.stream().collect(Collectors.groupingBy(Test::getName, TreeMap::new, Collectors.toList()));\n</code></pre>\n\n<p>result:</p>\n\n<pre><code>ABC,\nFELLOW\nHELLO\n</code></pre>\n\n<p>How to get Map in descending order ? for example ?</p>\n\n<pre><code>HELLO,\nFELLOW\nABC\n</code></pre>\n"},{"tags":["java","time","duration"],"answers":[{"comments":[{"owner":{"account_id":129577,"reputation":1319,"user_id":328256,"accept_rate":76,"display_name":"Eddinho"},"score":0,"creation_date":1272741088,"post_id":2751108,"comment_id":2781577,"body_markdown":"thanks, but i donno how to use this, there is no docs about it","body":"thanks, but i donno how to use this, there is no docs about it"},{"owner":{"account_id":36493,"reputation":11667,"user_id":104117,"accept_rate":89,"display_name":"Valentin Rocher"},"score":0,"creation_date":1272876775,"post_id":2751108,"comment_id":2788446,"body_markdown":"@tuxou : there is the javadoc","body":"@tuxou : there is the javadoc"}],"tags":[],"owner":{"account_id":66969,"reputation":22196,"user_id":196211,"accept_rate":67,"display_name":"Eyal Schneider"},"comment_count":2,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1272822159,"creation_date":1272738915,"answer_id":2751108,"question_id":2751073,"body_markdown":"If you use Java 6, TimeUnit enum can be useful. For example:\r\n\r\n    TimeUnit.HOURS.convert(10, TimeUnit.DAYS)\r\n\r\nThis static call converts 10 days into hour units, and returns 240. You can play with time units starting from NANOSECONDS and ending with DAYS.\r\n\r\nActually TimeUnit is available from Java 5, but in version 6 more units were added.\r\n\r\n--EDIT-- \r\nNow that I understand better your question, use the division and remainder approach as in the response of Romain. My tip is useful only for conversion to a single time unit.","title":"how to convert minutes to days,hours,minutes","body":"<p>If you use Java 6, TimeUnit enum can be useful. For example:</p>\n\n<pre><code>TimeUnit.HOURS.convert(10, TimeUnit.DAYS)\n</code></pre>\n\n<p>This static call converts 10 days into hour units, and returns 240. You can play with time units starting from NANOSECONDS and ending with DAYS.</p>\n\n<p>Actually TimeUnit is available from Java 5, but in version 6 more units were added.</p>\n\n<p>--EDIT-- \nNow that I understand better your question, use the division and remainder approach as in the response of Romain. My tip is useful only for conversion to a single time unit.</p>\n"},{"comments":[{"owner":{"account_id":129577,"reputation":1319,"user_id":328256,"accept_rate":76,"display_name":"Eddinho"},"score":0,"creation_date":1272741043,"post_id":2751143,"comment_id":2781572,"body_markdown":"but i have more then one day my minutes begin on 0 ends on 10080 i will have like 136:30 with this algorothm","body":"but i have more then one day my minutes begin on 0 ends on 10080 i will have like 136:30 with this algorothm"},{"owner":{"account_id":32682,"reputation":1715,"user_id":90850,"accept_rate":67,"display_name":"Adrian Lopez"},"score":3,"creation_date":1272741779,"post_id":2751143,"comment_id":2781634,"body_markdown":"Romain&#39;s method works just fine so long as you take both the quotient and remainder in each of the first two cases. If you have 1600 minutes and divide by (60 * 24), the quotient is 1 and the remainder is 160 which you then divide by 60. The quotient of that is 2 and the remainder is 40. Thus 1600 minutes equals 1 day, 2 hours, and 40 minutes.","body":"Romain&#39;s method works just fine so long as you take both the quotient and remainder in each of the first two cases. If you have 1600 minutes and divide by (60 * 24), the quotient is 1 and the remainder is 160 which you then divide by 60. The quotient of that is 2 and the remainder is 40. Thus 1600 minutes equals 1 day, 2 hours, and 40 minutes."}],"tags":[],"owner":{"account_id":120605,"reputation":24173,"user_id":313137,"display_name":"Romain Hippeau"},"comment_count":2,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1468425776,"creation_date":1272739507,"answer_id":2751143,"question_id":2751073,"body_markdown":"If you want to do this yourself, go the other way.\r\n\r\n1. Divide the number by 60 * 24. (That will get the number of days.)  \r\n2. Divide the remainder by 60. (That will give you number of hours.)  \r\n3. The remainder of #2 is the number of minutes.","title":"how to convert minutes to days,hours,minutes","body":"<p>If you want to do this yourself, go the other way.</p>\n\n<ol>\n<li>Divide the number by 60 * 24. (That will get the number of days.)  </li>\n<li>Divide the remainder by 60. (That will give you number of hours.)  </li>\n<li>The remainder of #2 is the number of minutes.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":6356,"reputation":8963,"user_id":10659,"accept_rate":51,"display_name":"Loren Pechtel"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1451472767,"creation_date":1272740858,"answer_id":2751232,"question_id":2751073,"body_markdown":"1)  Your code is repetitive. This is a sign of bad code in my opinion.\r\n\r\n2)  The divisor shouldn&#39;t be changing with the number of days, because the number of days has little to do with the number of minutes in an hour.\r\n\r\nBeyond that, look at Romain Hippeau&#39;s approach, he told you how to do it.","title":"how to convert minutes to days,hours,minutes","body":"<p>1)  Your code is repetitive. This is a sign of bad code in my opinion.</p>\n\n<p>2)  The divisor shouldn't be changing with the number of days, because the number of days has little to do with the number of minutes in an hour.</p>\n\n<p>Beyond that, look at Romain Hippeau's approach, he told you how to do it.</p>\n"},{"comments":[{"owner":{"account_id":74486,"reputation":105478,"user_id":214010,"accept_rate":83,"display_name":"mikera"},"score":0,"creation_date":1280849895,"post_id":2751437,"comment_id":3534269,"body_markdown":"Nice approach overall , but my suggestions to improve style would be: a) Don&#39;t use single letter variable names b) Avoid pre-declaring variables with values that never get used, it&#39;s better to do e.g. &quot;int hour = (time%(24*60)) / 60;&quot;","body":"Nice approach overall , but my suggestions to improve style would be: a) Don&#39;t use single letter variable names b) Avoid pre-declaring variables with values that never get used, it&#39;s better to do e.g. &quot;int hour = (time%(24*60)) / 60;&quot;"},{"owner":{"account_id":1327335,"reputation":8597,"user_id":1271898,"accept_rate":80,"display_name":"WonderWorker"},"score":1,"creation_date":1452502136,"post_id":2751437,"comment_id":57180317,"body_markdown":"I disagree with point b, where Mikira recommended that you cram as much code into one line as possible. However, if you seperate the variables out into bite-size steps as Eddinho has done then it&#39;s easier for others to step through your code and see what&#39;s happening. As for point a) This is a good point. I would veer away from single letter variables too, unless they&#39;re temporary while I think up a suitable name. In these cases I&#39;d make the descriptive to the type of the variable e.g. s for string, i for int, dt for DataTable etc. Great solution though, Eddinho. It works, and elegantly so!","body":"I disagree with point b, where Mikira recommended that you cram as much code into one line as possible. However, if you seperate the variables out into bite-size steps as Eddinho has done then it&#39;s easier for others to step through your code and see what&#39;s happening. As for point a) This is a good point. I would veer away from single letter variables too, unless they&#39;re temporary while I think up a suitable name. In these cases I&#39;d make the descriptive to the type of the variable e.g. s for string, i for int, dt for DataTable etc. Great solution though, Eddinho. It works, and elegantly so!"}],"tags":[],"owner":{"account_id":129577,"reputation":1319,"user_id":328256,"accept_rate":76,"display_name":"Eddinho"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1330827366,"creation_date":1272745539,"answer_id":2751437,"question_id":2751073,"body_markdown":"and the answer is :\r\n\r\n     public String timeConvert(int time){\r\n       String t = &quot;&quot;;\r\n\r\n      int j = time/(24*60);\r\n      int h= (time%(24*60)) / 60;\r\n      int m = (time%(24*60)) % 60;\r\n\r\n      \r\n\r\n       t =j + &quot;:&quot; + h + &quot;:&quot; + m;\r\n       return t;\r\n     }\r\n\r\nwhat do you think about this code?","title":"how to convert minutes to days,hours,minutes","body":"<p>and the answer is :</p>\n\n<pre><code> public String timeConvert(int time){\n   String t = \"\";\n\n  int j = time/(24*60);\n  int h= (time%(24*60)) / 60;\n  int m = (time%(24*60)) % 60;\n\n\n\n   t =j + \":\" + h + \":\" + m;\n   return t;\n }\n</code></pre>\n\n<p>what do you think about this code?</p>\n"},{"comments":[{"owner":{"account_id":3228743,"reputation":1074,"user_id":2724475,"accept_rate":58,"display_name":"Dr. DS"},"score":1,"creation_date":1641549030,"post_id":2756975,"comment_id":124837773,"body_markdown":"Works great, Thanks. To prevent decimals, it should be `Math.floor(time/24/60) + &quot;:&quot; + Math.floor(time/60%24) + &#39;:&#39; + Math.floor(time%60)`","body":"Works great, Thanks. To prevent decimals, it should be <code>Math.floor(time&#47;24&#47;60) + &quot;:&quot; + Math.floor(time&#47;60%24) + &#39;:&#39; + Math.floor(time%60)</code>"},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1641833150,"post_id":2756975,"comment_id":124904508,"body_markdown":"@Dr.DS Integer arithmetic doesn&#39;t produce decimals in Java. `time/60` is always in int value. e.g. `1/60 == 0` in Java.","body":"@Dr.DS Integer arithmetic doesn&#39;t produce decimals in Java. <code>time&#47;60</code> is always in int value. e.g. <code>1&#47;60 == 0</code> in Java."},{"owner":{"account_id":3228743,"reputation":1074,"user_id":2724475,"accept_rate":58,"display_name":"Dr. DS"},"score":2,"creation_date":1641833762,"post_id":2756975,"comment_id":124904808,"body_markdown":"Sorry.. I just noticed this answer has a tag of java. I found your answer while searching for something similar for javascript. So commented with an update keeping javascript in mind. Anyways... It helped me in right direction :-)","body":"Sorry.. I just noticed this answer has a tag of java. I found your answer while searching for something similar for javascript. So commented with an update keeping javascript in mind. Anyways... It helped me in right direction :-)"}],"tags":[],"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"comment_count":3,"down_vote_count":1,"up_vote_count":42,"is_accepted":true,"score":41,"last_activity_date":1272876582,"creation_date":1272876582,"answer_id":2756975,"question_id":2751073,"body_markdown":"A shorter way. (Assumes time &gt;= 0)\r\n\r\n     public String timeConvert(int time) { \r\n       return time/24/60 + &quot;:&quot; + time/60%24 + &#39;:&#39; + time%60;\r\n     }\r\n\r\n\r\n","title":"how to convert minutes to days,hours,minutes","body":"<p>A shorter way. (Assumes time >= 0)</p>\n\n<pre><code> public String timeConvert(int time) { \n   return time/24/60 + \":\" + time/60%24 + ':' + time%60;\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8819621,"reputation":1,"user_id":6589939,"display_name":"jaspreet singh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1495096898,"creation_date":1495096898,"answer_id":44042759,"question_id":2751073,"body_markdown":"i am using this code. it can also help.\r\n\r\n    private String getText(int minutes){\r\n\r\n        int weeks = minutes / 10080;\r\n        int aboveWeeks = minutes % 10080;\r\n        int days = aboveWeeks / 1440;\r\n        int aboveDays = aboveWeeks % 1440;\r\n        int hours = aboveDays / 60;\r\n        int aboveHours = aboveDays % 60;\r\n        int minute = aboveHours / 60;\r\n\r\n        if(weeks &gt; 0 &amp;&amp; days &gt; 0) {\r\n            if(weeks &gt; 1 &amp;&amp; days &gt; 1){\r\n                return weeks + &quot; weeks &quot; + days + &quot; days before&quot;;\r\n            } else {\r\n                return weeks + &quot; weeks &quot; + days + &quot; day before&quot;;\r\n            }\r\n        } else if (weeks &gt; 0){\r\n            if (weeks &gt; 1){\r\n                return weeks + &quot; weeks before&quot;;\r\n            } else {\r\n                return weeks + &quot; week before&quot;;\r\n            }\r\n        } else if(days &gt; 0 &amp;&amp; hours &gt; 0){\r\n            if(days &gt; 1 &amp;&amp; hours &gt; 1){\r\n                return days + &quot; days &quot; + hours + &quot; hours before&quot;;\r\n            } else {\r\n                return days + &quot; days &quot; + hours + &quot; hour before&quot;;\r\n            }\r\n        } else if(days &gt; 0){\r\n            if (days &gt; 1){\r\n                return days + &quot; days before&quot;;\r\n            } else {\r\n                return days + &quot; day before&quot;;\r\n            }\r\n        } else if(hours &gt; 0 &amp;&amp; minute &gt; 0){\r\n            if(hours &gt; 1 &amp;&amp; minute &gt; 1){\r\n                return hours + &quot; hours &quot; + minute + &quot; minutes before&quot;;\r\n            } else {\r\n                return hours + &quot; hours &quot; + minute + &quot; minute before&quot;;\r\n            }\r\n        } else if(hours &gt; 0){\r\n            if (hours &gt; 1){\r\n                return hours + &quot; hours before&quot;;\r\n            } else {\r\n                return hours + &quot; hour before&quot;;\r\n            }\r\n        } else {\r\n            if (minutes &gt; 1){\r\n                return minutes + &quot; minutes before&quot;;\r\n            } else {\r\n                return minutes + &quot; minute before&quot;;\r\n            }\r\n        }\r\n    }","title":"how to convert minutes to days,hours,minutes","body":"<p>i am using this code. it can also help.</p>\n\n<pre><code>private String getText(int minutes){\n\n    int weeks = minutes / 10080;\n    int aboveWeeks = minutes % 10080;\n    int days = aboveWeeks / 1440;\n    int aboveDays = aboveWeeks % 1440;\n    int hours = aboveDays / 60;\n    int aboveHours = aboveDays % 60;\n    int minute = aboveHours / 60;\n\n    if(weeks &gt; 0 &amp;&amp; days &gt; 0) {\n        if(weeks &gt; 1 &amp;&amp; days &gt; 1){\n            return weeks + \" weeks \" + days + \" days before\";\n        } else {\n            return weeks + \" weeks \" + days + \" day before\";\n        }\n    } else if (weeks &gt; 0){\n        if (weeks &gt; 1){\n            return weeks + \" weeks before\";\n        } else {\n            return weeks + \" week before\";\n        }\n    } else if(days &gt; 0 &amp;&amp; hours &gt; 0){\n        if(days &gt; 1 &amp;&amp; hours &gt; 1){\n            return days + \" days \" + hours + \" hours before\";\n        } else {\n            return days + \" days \" + hours + \" hour before\";\n        }\n    } else if(days &gt; 0){\n        if (days &gt; 1){\n            return days + \" days before\";\n        } else {\n            return days + \" day before\";\n        }\n    } else if(hours &gt; 0 &amp;&amp; minute &gt; 0){\n        if(hours &gt; 1 &amp;&amp; minute &gt; 1){\n            return hours + \" hours \" + minute + \" minutes before\";\n        } else {\n            return hours + \" hours \" + minute + \" minute before\";\n        }\n    } else if(hours &gt; 0){\n        if (hours &gt; 1){\n            return hours + \" hours before\";\n        } else {\n            return hours + \" hour before\";\n        }\n    } else {\n        if (minutes &gt; 1){\n            return minutes + \" minutes before\";\n        } else {\n            return minutes + \" minute before\";\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11098805,"reputation":695,"user_id":8148104,"display_name":"Durgesh Pal"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1501680912,"creation_date":1501680912,"answer_id":45462430,"question_id":2751073,"body_markdown":"    class time{\r\n    \tpublic static void main (String args[]){\r\n    \t\tSystem.out.println(&quot;Hello&quot;);\r\n    \t\tint duration=1500;\r\n    \t\t String testDuration = &quot;&quot;;\r\n    \t\t \r\n            if(duration &lt; 60){\r\n                testDuration = duration + &quot; minutes&quot;;\r\n            }\r\n    \t\telse{\r\n    \t\t\t\r\n    \t\t\tif((duration / 60)&lt;24)\r\n    \t\t\t{\r\n    \t\t\t\tif((duration%60)==0){\r\n    \t\t\t\t\ttestDuration = (duration / 60) + &quot; hours&quot;;\r\n    \t\t\t\t}\r\n    \t\t\t\telse{\r\n                testDuration = (duration / 60) + &quot; hours,&quot; + (duration%60) + &quot; minutes&quot;;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\telse{\r\n    \t\t\t\t\r\n    \t\t\t\tif((duration%60)==0){\r\n    \t\t\t\t\tif(((duration/60)%24)==0){\r\n    \t\t\t\t\t\ttestDuration = ((duration / 24)/60) + &quot; days,&quot;;\r\n    \t\t\t\t\t\t\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\telse{\r\n    \t\t\t\t\ttestDuration = ((duration / 24)/60) + &quot; days,&quot; + (duration/60)%24 +&quot;hours&quot;;\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t\t\telse{\r\n    \t\t\t\ttestDuration = ((duration / 24)/60) + &quot; days,&quot; + (duration/60)%24 +&quot;hours&quot;+ (duration%60) + &quot; minutes&quot;;\r\n    \t\t\t\t\t}\r\n    \t\t\t}\r\n            }\r\n    \t\t\r\n            System.out.println(testDuration);\r\n    \t}\r\n    }","title":"how to convert minutes to days,hours,minutes","body":"<pre><code>class time{\n    public static void main (String args[]){\n        System.out.println(\"Hello\");\n        int duration=1500;\n         String testDuration = \"\";\n\n        if(duration &lt; 60){\n            testDuration = duration + \" minutes\";\n        }\n        else{\n\n            if((duration / 60)&lt;24)\n            {\n                if((duration%60)==0){\n                    testDuration = (duration / 60) + \" hours\";\n                }\n                else{\n            testDuration = (duration / 60) + \" hours,\" + (duration%60) + \" minutes\";\n                }\n            }\n            else{\n\n                if((duration%60)==0){\n                    if(((duration/60)%24)==0){\n                        testDuration = ((duration / 24)/60) + \" days,\";\n\n                    }\n                    else{\n                    testDuration = ((duration / 24)/60) + \" days,\" + (duration/60)%24 +\"hours\";\n                    }\n                }\n                    else{\n                testDuration = ((duration / 24)/60) + \" days,\" + (duration/60)%24 +\"hours\"+ (duration%60) + \" minutes\";\n                    }\n            }\n        }\n\n        System.out.println(testDuration);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3648149,"reputation":2060,"user_id":3040886,"accept_rate":20,"display_name":"Ronny Shibley"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1569099559,"creation_date":1524417713,"answer_id":49968709,"question_id":2751073,"body_markdown":"**1 day 2 hrs 5 mins**\r\n\r\n    public static String convertToDaysHoursMinutes(long minutes) {\r\n\r\n        int day = (int)TimeUnit.MINUTES.toDays(minutes);\r\n        long hours = TimeUnit.MINUTES.toHours(minutes) - (day *24);\r\n        long minute = TimeUnit.MINUTES.toMinutes(minutes) - (TimeUnit.MINUTES.toHours(minutes)* 60);\r\n\r\n\t\tString result = &quot;&quot;;\r\n\r\n\t\tif (day != 0){\r\n\t\t\tresult += day;\r\n\t\t\tif (day == 1){\r\n\t\t\t\tresult += &quot; day &quot;;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tresult += &quot; days &quot;;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (hours != 0){\r\n\t\t\tresult += hours;\r\n\r\n\t\t\tif (hours == 1){\r\n\t\t\t\tresult += &quot; hr &quot;;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tresult += &quot; hrs &quot;;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (minute != 0){\r\n\t\t\tresult += minute;\r\n\r\n\t\t\tif (minute == 1){\r\n\t\t\t\tresult += &quot; min&quot;;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tresult += &quot; mins&quot;;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}","title":"how to convert minutes to days,hours,minutes","body":"<p><strong>1 day 2 hrs 5 mins</strong></p>\n\n<pre><code>public static String convertToDaysHoursMinutes(long minutes) {\n\n    int day = (int)TimeUnit.MINUTES.toDays(minutes);\n    long hours = TimeUnit.MINUTES.toHours(minutes) - (day *24);\n    long minute = TimeUnit.MINUTES.toMinutes(minutes) - (TimeUnit.MINUTES.toHours(minutes)* 60);\n\n    String result = \"\";\n\n    if (day != 0){\n        result += day;\n        if (day == 1){\n            result += \" day \";\n        }\n        else{\n            result += \" days \";\n        }\n    }\n\n    if (hours != 0){\n        result += hours;\n\n        if (hours == 1){\n            result += \" hr \";\n        }\n        else{\n            result += \" hrs \";\n        }\n    }\n\n    if (minute != 0){\n        result += minute;\n\n        if (minute == 1){\n            result += \" min\";\n        }\n        else{\n            result += \" mins\";\n        }\n    }\n\n    return result;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12112960,"reputation":141,"user_id":8848804,"display_name":"NAVIN ROY"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1536959380,"creation_date":1536959380,"answer_id":52339232,"question_id":2751073,"body_markdown":"for best readability ,like it won&#39;t print 0 day or 0 hour or 0 minute.\r\ne.g- (if minute=1500,then it will print only 1 day 1 hour)     \r\n\r\n   int minute=150;\r\n\r\n\t\tStringBuilder sb=new StringBuilder();\r\n\r\n\t\tint day=minute/1440;\r\n\t\tint rem=minute%1440;\r\n\t\tint hour=rem/60;\r\n\t\tint Minute=rem%60;\r\n\r\n    if(day&gt;0)\r\n\t\t    sb.append(day+&quot; day &quot;);\r\n\t\r\n  \tif(hour&gt;0)\r\n\t\t\tsb.append(hour+&quot; hour &quot;);\r\n\t\t\r\n    if(Minute&gt;0)\r\n\t\t\tsb.append(Minute+&quot; minute&quot;);\r\n\r\n        System.out.println(sb);","title":"how to convert minutes to days,hours,minutes","body":"<p>for best readability ,like it won't print 0 day or 0 hour or 0 minute.\ne.g- (if minute=1500,then it will print only 1 day 1 hour)     </p>\n\n<p>int minute=150;</p>\n\n<pre><code>    StringBuilder sb=new StringBuilder();\n\n    int day=minute/1440;\n    int rem=minute%1440;\n    int hour=rem/60;\n    int Minute=rem%60;\n\nif(day&gt;0)\n        sb.append(day+\" day \");\n\nif(hour&gt;0)\n        sb.append(hour+\" hour \");\n\nif(Minute&gt;0)\n        sb.append(Minute+\" minute\");\n\n    System.out.println(sb);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15243320,"reputation":409,"user_id":10998848,"display_name":"Kathy  "},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1555481112,"creation_date":1555481112,"answer_id":55720911,"question_id":2751073,"body_markdown":"```\r\nconst convertMinutesToDays = (minutes) =&gt; {\r\n    let hours\r\n    let days \r\n    let restMinutes\r\n    const onedayMinutes = 1440 //24*60\r\n\r\n    if(minutes &lt; 60){\r\n        return `${minutes} Minutes` \r\n    }else if(minutes &gt; 60 &amp;&amp; minutes &lt; onedayMinutes){\r\n        hours = Math.floor(minutes/60)\r\n        restMinutes = minutes%60\r\n        return `${hours} Hours ${restMinutes} Minutes`\r\n    }else{\r\n        days = Math.floor((minutes/60)/24)\r\n        restMinutes = minutes % onedayMinutes\r\n        hours = Math.floor(restMinutes/60) \r\n        restMinutes = restMinutes % 60\r\n        return `${days} Days ${hours} Hours ${restMinutes} Minutes`\r\n    }\r\n}\r\n```","title":"how to convert minutes to days,hours,minutes","body":"<pre><code>const convertMinutesToDays = (minutes) =&gt; {\n    let hours\n    let days \n    let restMinutes\n    const onedayMinutes = 1440 //24*60\n\n    if(minutes &lt; 60){\n        return `${minutes} Minutes` \n    }else if(minutes &gt; 60 &amp;&amp; minutes &lt; onedayMinutes){\n        hours = Math.floor(minutes/60)\n        restMinutes = minutes%60\n        return `${hours} Hours ${restMinutes} Minutes`\n    }else{\n        days = Math.floor((minutes/60)/24)\n        restMinutes = minutes % onedayMinutes\n        hours = Math.floor(restMinutes/60) \n        restMinutes = restMinutes % 60\n        return `${days} Days ${hours} Hours ${restMinutes} Minutes`\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2179728,"reputation":73077,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"score":0,"creation_date":1599419463,"post_id":63764829,"comment_id":112762769,"body_markdown":"It&#39;s not JavaScript; it&#39;s Java.","body":"It&#39;s not JavaScript; it&#39;s Java."}],"tags":[],"owner":{"account_id":490531,"reputation":735,"user_id":2781636,"accept_rate":0,"display_name":"Ofer Gal"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1599399917,"creation_date":1599399917,"answer_id":63764829,"question_id":2751073,"body_markdown":"(time / 24 / 60).toFixed(0) + &quot;:&quot; +(time / 60 % 24).toFixed(0) + &#39;:&#39; + (time % 60)\r\nDoes it best","title":"how to convert minutes to days,hours,minutes","body":"<p>(time / 24 / 60).toFixed(0) + &quot;:&quot; +(time / 60 % 24).toFixed(0) + ':' + (time % 60)\nDoes it best</p>\n"},{"tags":[],"owner":{"account_id":2179728,"reputation":73077,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1609236281,"creation_date":1609236281,"answer_id":65490449,"question_id":2751073,"body_markdown":"## Java-9 `java.time` Solution:\r\n\r\n    import java.time.Duration;\r\n    \r\n    public class Main {\r\n    \tpublic static void main(String[] args) {\r\n    \t\t// Test\r\n    \t\tSystem.out.println(minutesToDaysHoursMinutes(10080));\r\n    \t\tSystem.out.println(minutesToDaysHoursMinutes(1600));\r\n    \t}\r\n    \r\n    \tpublic static String minutesToDaysHoursMinutes(int time) {\r\n    \t\tDuration d = Duration.ofMinutes(time);\r\n    \t\tlong days = d.toDaysPart();\r\n    \t\tlong hours = d.toHoursPart();\r\n    \t\tlong minutes = d.toMinutesPart();\r\n    \t\treturn String.format(&quot;%d Day(s) %d Hour(s) %d Minute(s)&quot;, days, hours, minutes);\r\n    \t}\r\n    }\r\n\r\n**Output:**\r\n\r\n    7 Day(s) 0 Hour(s) 0 Minute(s)\r\n    1 Day(s) 2 Hour(s) 40 Minute(s)\r\n\r\n## Java-8 `java.time` Solution:\r\n\r\n    import java.time.Duration;\r\n    \r\n    public class Main {\r\n    \tpublic static void main(String[] args) {\r\n    \t\t// Test\r\n    \t\tSystem.out.println(minutesToDaysHoursMinutes(10080));\r\n    \t\tSystem.out.println(minutesToDaysHoursMinutes(1600));\r\n    \t}\r\n    \r\n    \tpublic static String minutesToDaysHoursMinutes(int time) {\r\n    \t\tDuration d = Duration.ofMinutes(time);\r\n    \t\tlong days = d.toDays();\r\n    \t\tlong hours = d.toHours() % 24;\r\n    \t\tlong minutes = d.toMinutes() % 60;\r\n    \t\treturn String.format(&quot;%d Day(s) %d Hour(s) %d Minute(s)&quot;, days, hours, minutes);\r\n    \t}\r\n    }\r\n\r\n**Output:**\r\n\r\n    7 Day(s) 0 Hour(s) 0 Minute(s)\r\n    1 Day(s) 2 Hour(s) 40 Minute(s)\r\n\r\nLearn about the modern date-time API from **[Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**.\r\n\r\n","title":"how to convert minutes to days,hours,minutes","body":"<h2>Java-9 <code>java.time</code> Solution:</h2>\n<pre><code>import java.time.Duration;\n\npublic class Main {\n    public static void main(String[] args) {\n        // Test\n        System.out.println(minutesToDaysHoursMinutes(10080));\n        System.out.println(minutesToDaysHoursMinutes(1600));\n    }\n\n    public static String minutesToDaysHoursMinutes(int time) {\n        Duration d = Duration.ofMinutes(time);\n        long days = d.toDaysPart();\n        long hours = d.toHoursPart();\n        long minutes = d.toMinutesPart();\n        return String.format(&quot;%d Day(s) %d Hour(s) %d Minute(s)&quot;, days, hours, minutes);\n    }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>7 Day(s) 0 Hour(s) 0 Minute(s)\n1 Day(s) 2 Hour(s) 40 Minute(s)\n</code></pre>\n<h2>Java-8 <code>java.time</code> Solution:</h2>\n<pre><code>import java.time.Duration;\n\npublic class Main {\n    public static void main(String[] args) {\n        // Test\n        System.out.println(minutesToDaysHoursMinutes(10080));\n        System.out.println(minutesToDaysHoursMinutes(1600));\n    }\n\n    public static String minutesToDaysHoursMinutes(int time) {\n        Duration d = Duration.ofMinutes(time);\n        long days = d.toDays();\n        long hours = d.toHours() % 24;\n        long minutes = d.toMinutes() % 60;\n        return String.format(&quot;%d Day(s) %d Hour(s) %d Minute(s)&quot;, days, hours, minutes);\n    }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>7 Day(s) 0 Hour(s) 0 Minute(s)\n1 Day(s) 2 Hour(s) 40 Minute(s)\n</code></pre>\n<p>Learn about the modern date-time API from <strong><a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"noreferrer\">Trail: Date Time</a></strong>.</p>\n"},{"comments":[{"owner":{"account_id":15276890,"reputation":11,"user_id":11022382,"display_name":"Asmaa Mohamed"},"score":0,"creation_date":1613656099,"post_id":66261243,"comment_id":117146384,"body_markdown":"I am sure from this method","body":"I am sure from this method"}],"tags":[],"owner":{"account_id":15276890,"reputation":11,"user_id":11022382,"display_name":"Asmaa Mohamed"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1613655896,"creation_date":1613655896,"answer_id":66261243,"question_id":2751073,"body_markdown":" \r\n just make method return string and take( int minuts)\r\nString getTextOfTime(int minuts) {return result\r\n\r\nString getTextOfTime(int minuts) {\r\n\r\n\r\n    int weeks = (-minuts / 10080).toInt();\r\n    int aboveWeeks = -minuts % 10080;\r\n    int days = (aboveWeeks / 1440).toInt();\r\n    int aboveDays = (aboveWeeks % 1440);\r\n    int hours = (aboveDays / 60).toInt();\r\n    int aboveHours = aboveDays % 60;\r\n    int minute = aboveHours;\r\n\r\n    String result = &quot;&quot;;\r\n\r\n    if (weeks != 0) {\r\n      result += weeks.toString();\r\n      if (weeks == 1) {\r\n        result += &quot; week &quot;;\r\n      } else {\r\n        result += &quot; weeks &quot;;\r\n      }\r\n    }\r\n\r\n    if (days != 0) {\r\n      result += days.toString();\r\n      if (days == 1) {\r\n        result += &quot; day &quot;;\r\n      } else {\r\n        result += &quot; days &quot;;\r\n      }\r\n    }\r\n\r\n    if (hours != 0) {\r\n      result += hours.toString();\r\n\r\n      if (hours == 1) {\r\n        result += &quot; hr &quot;;\r\n      } else {\r\n        result += &quot; hrs &quot;;\r\n      }\r\n    }\r\n\r\n    if (minute != 0) {\r\n      result += minute.toString();\r\n\r\n      if (minute == 1) {\r\n        result += &quot; min&quot;;\r\n      } else {\r\n        result += &quot; mins&quot;;\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n","title":"how to convert minutes to days,hours,minutes","body":"<p>just make method return string and take( int minuts)\nString getTextOfTime(int minuts) {return result</p>\n<p>String getTextOfTime(int minuts) {</p>\n<pre><code>int weeks = (-minuts / 10080).toInt();\nint aboveWeeks = -minuts % 10080;\nint days = (aboveWeeks / 1440).toInt();\nint aboveDays = (aboveWeeks % 1440);\nint hours = (aboveDays / 60).toInt();\nint aboveHours = aboveDays % 60;\nint minute = aboveHours;\n\nString result = &quot;&quot;;\n\nif (weeks != 0) {\n  result += weeks.toString();\n  if (weeks == 1) {\n    result += &quot; week &quot;;\n  } else {\n    result += &quot; weeks &quot;;\n  }\n}\n\nif (days != 0) {\n  result += days.toString();\n  if (days == 1) {\n    result += &quot; day &quot;;\n  } else {\n    result += &quot; days &quot;;\n  }\n}\n\nif (hours != 0) {\n  result += hours.toString();\n\n  if (hours == 1) {\n    result += &quot; hr &quot;;\n  } else {\n    result += &quot; hrs &quot;;\n  }\n}\n\nif (minute != 0) {\n  result += minute.toString();\n\n  if (minute == 1) {\n    result += &quot; min&quot;;\n  } else {\n    result += &quot; mins&quot;;\n  }\n}\nreturn result;\n</code></pre>\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":22064558,"reputation":41,"user_id":16326642,"display_name":"cre2"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1624790062,"creation_date":1624790062,"answer_id":68150226,"question_id":2751073,"body_markdown":"In case someone wants to use the accepted answer for JavaScript, time will be shown with decimals. In order to remove those decimals, you can use this code:\r\n\r\n    function timeConvert(time)\r\n    { \r\n       return parseInt(time/24/60) + &quot; days,&quot; + parseInt(time/60%24) + &#39; hours,&#39; + parseInt(time%60) + &quot; minutes&quot;;\r\n    }","title":"how to convert minutes to days,hours,minutes","body":"<p>In case someone wants to use the accepted answer for JavaScript, time will be shown with decimals. In order to remove those decimals, you can use this code:</p>\n<pre><code>function timeConvert(time)\n{ \n   return parseInt(time/24/60) + &quot; days,&quot; + parseInt(time/60%24) + ' hours,' + parseInt(time%60) + &quot; minutes&quot;;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2508113,"reputation":4573,"user_id":2181188,"accept_rate":97,"display_name":"Fandango68"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691113755,"creation_date":1691113755,"answer_id":76832491,"question_id":2751073,"body_markdown":"For those looking for an SQL version of this logic:\r\n\r\nwhere c.a_ARR is a Start Datetime, c.a_DEP is an End DateTime\r\n     \r\n\r\n           CASE WHEN DATEDIFF(minute, c.a_ARR, c.a_DEP)/60/24 = 0.0\r\n                THEN &#39;&#39;\r\n                ELSE FORMAT(DATEDIFF(minute, c.a_ARR, c.a_DEP)/60/24,&#39;0&#39;) + &#39;d&#39;\r\n           END +\r\n           CASE WHEN DATEDIFF(minute, c.a_ARR, c.a_DEP)/60%24 = 0.0 \r\n                THEN &#39;&#39;\r\n                ELSE FORMAT(DATEDIFF(minute, c.a_ARR, c.a_DEP)/60%24,&#39;0&#39;) + &#39;h&#39;\r\n           END +\r\n           CASE WHEN DATEDIFF(minute, c.a_ARR, c.a_DEP)%60 = 0.0\r\n                THEN &#39;&#39;\r\n                ELSE FORMAT(DATEDIFF(minute, c.a_ARR, c.a_DEP)%60,&#39;0&#39;) + &#39;m&#39;\r\n           END AS [Duration]","title":"how to convert minutes to days,hours,minutes","body":"<p>For those looking for an SQL version of this logic:</p>\n<p>where c.a_ARR is a Start Datetime, c.a_DEP is an End DateTime</p>\n<pre><code>       CASE WHEN DATEDIFF(minute, c.a_ARR, c.a_DEP)/60/24 = 0.0\n            THEN ''\n            ELSE FORMAT(DATEDIFF(minute, c.a_ARR, c.a_DEP)/60/24,'0') + 'd'\n       END +\n       CASE WHEN DATEDIFF(minute, c.a_ARR, c.a_DEP)/60%24 = 0.0 \n            THEN ''\n            ELSE FORMAT(DATEDIFF(minute, c.a_ARR, c.a_DEP)/60%24,'0') + 'h'\n       END +\n       CASE WHEN DATEDIFF(minute, c.a_ARR, c.a_DEP)%60 = 0.0\n            THEN ''\n            ELSE FORMAT(DATEDIFF(minute, c.a_ARR, c.a_DEP)%60,'0') + 'm'\n       END AS [Duration]\n</code></pre>\n"}],"owner":{"account_id":129577,"reputation":1319,"user_id":328256,"accept_rate":76,"display_name":"Eddinho"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73203,"favorite_count":0,"down_vote_count":1,"up_vote_count":21,"accepted_answer_id":2756975,"answer_count":15,"score":20,"last_activity_date":1691113755,"creation_date":1272738298,"question_id":2751073,"body_markdown":"how to convert minutes into days hours and minutes in java ( we have a week here , 7 days )\r\n\r\n     public String timeConvert(int time){\r\n       String t = &quot;&quot;;\r\n\r\n       int h = 00;\r\n       int m = 00;\r\n\r\n      // h= (int) (time / 60);\r\n      // m = (int) (time % 60);\r\n\r\n      // if(h&gt;=24) h=00;\r\n\r\n       if((time&gt;=0) &amp;&amp; (time&lt;=24*60)){\r\n          h= (int) (time / 60);\r\n          m = (int) (time % 60);\r\n       }else if((time&gt;24*60) &amp;&amp; (time&lt;=24*60*2)){\r\n           h= (int) (time / (1440));\r\n          m = (int) (time % (1440));\r\n       }else if((time&gt;24*60*2) &amp;&amp; (time&lt;=24*60*3)){\r\n           h= (int) (time / (2880));\r\n          m = (int) (time % (2880));\r\n       }else if((time&gt;24*60*3) &amp;&amp; (time&lt;=24*60*4)){\r\n           h= (int) (time / (2880*2));\r\n          m = (int) (time % (2880*2));\r\n       }else if((time&gt;24*60*4) &amp;&amp; (time&lt;=24*60*5)){\r\n           h= (int) (time / (2880*3));\r\n          m = (int) (time % (2880*3));\r\n       }else if((time&gt;24*60*5) &amp;&amp; (time&lt;=24*60*6)){\r\n           h= (int) (time / (2880*4));\r\n          m = (int) (time % (2880*4));\r\n       }else if((time&gt;24*60*6) &amp;&amp; (time&lt;=24*60*7)){\r\n           h= (int) (time / (2880*5));\r\n          m = (int) (time % (2880*5));\r\n       }\r\n\r\n       t =h+&quot;:&quot;+m ;\r\n       return t;\r\n     }\r\n\r\nI tried this but it dont work\r\n\r\nthanks","title":"how to convert minutes to days,hours,minutes","body":"<p>how to convert minutes into days hours and minutes in java ( we have a week here , 7 days )</p>\n\n<pre><code> public String timeConvert(int time){\n   String t = \"\";\n\n   int h = 00;\n   int m = 00;\n\n  // h= (int) (time / 60);\n  // m = (int) (time % 60);\n\n  // if(h&gt;=24) h=00;\n\n   if((time&gt;=0) &amp;&amp; (time&lt;=24*60)){\n      h= (int) (time / 60);\n      m = (int) (time % 60);\n   }else if((time&gt;24*60) &amp;&amp; (time&lt;=24*60*2)){\n       h= (int) (time / (1440));\n      m = (int) (time % (1440));\n   }else if((time&gt;24*60*2) &amp;&amp; (time&lt;=24*60*3)){\n       h= (int) (time / (2880));\n      m = (int) (time % (2880));\n   }else if((time&gt;24*60*3) &amp;&amp; (time&lt;=24*60*4)){\n       h= (int) (time / (2880*2));\n      m = (int) (time % (2880*2));\n   }else if((time&gt;24*60*4) &amp;&amp; (time&lt;=24*60*5)){\n       h= (int) (time / (2880*3));\n      m = (int) (time % (2880*3));\n   }else if((time&gt;24*60*5) &amp;&amp; (time&lt;=24*60*6)){\n       h= (int) (time / (2880*4));\n      m = (int) (time % (2880*4));\n   }else if((time&gt;24*60*6) &amp;&amp; (time&lt;=24*60*7)){\n       h= (int) (time / (2880*5));\n      m = (int) (time % (2880*5));\n   }\n\n   t =h+\":\"+m ;\n   return t;\n }\n</code></pre>\n\n<p>I tried this but it dont work</p>\n\n<p>thanks</p>\n"},{"tags":["java","jackson"],"answers":[{"tags":[],"owner":{"account_id":1510989,"reputation":21746,"user_id":1413133,"display_name":"Manos Nikolaidis"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691113489,"creation_date":1489507965,"answer_id":42791077,"question_id":42789248,"body_markdown":"You can try defining a constructor in `class A` annotated with `@JsonCreator`. Jackson is then able to use this constructor to create an `A` object and map the fields you expect in the JSON documents to the fields of `A`. Simplified example:\r\n\r\n\r\n    @Value\r\n    public class A {\r\n\r\n        @JsonUnwrapped\r\n        OrderKey key;\r\n\r\n        String description;\r\n\r\n        @JsonCreator\r\n        public A(@JsonProperty(&quot;key&quot;) String key,\r\n                 @JsonProperty(&quot;description&quot;) String description) {\r\n            this.key = new OrderKey(key);\r\n            this.description = description;\r\n        }\r\n    }\r\n\r\nNote that this constructor for `A` will prevent the creation of an `@AllArgsConstructor` constructor implied by `@Value`.\r\n\r\nIt is also possible to avoid constructor annotations with Java 8 and some extra modules. Check [this](https://stackoverflow.com/a/32272061/1413133) other answer of mine for example.","title":"Jackson Unwrap / Wrap Object","body":"<p>You can try defining a constructor in <code>class A</code> annotated with <code>@JsonCreator</code>. Jackson is then able to use this constructor to create an <code>A</code> object and map the fields you expect in the JSON documents to the fields of <code>A</code>. Simplified example:</p>\n<pre><code>@Value\npublic class A {\n\n    @JsonUnwrapped\n    OrderKey key;\n\n    String description;\n\n    @JsonCreator\n    public A(@JsonProperty(&quot;key&quot;) String key,\n             @JsonProperty(&quot;description&quot;) String description) {\n        this.key = new OrderKey(key);\n        this.description = description;\n    }\n}\n</code></pre>\n<p>Note that this constructor for <code>A</code> will prevent the creation of an <code>@AllArgsConstructor</code> constructor implied by <code>@Value</code>.</p>\n<p>It is also possible to avoid constructor annotations with Java 8 and some extra modules. Check <a href=\"https://stackoverflow.com/a/32272061/1413133\">this</a> other answer of mine for example.</p>\n"},{"tags":[],"owner":{"account_id":3786974,"reputation":85,"user_id":3144606,"accept_rate":75,"display_name":"Miguel Guilherme"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1489601906,"creation_date":1489512680,"answer_id":42792752,"question_id":42789248,"body_markdown":"I end up doing the serialize / deserialize inside the mixin itself, with this I can avoid the `@JsonUnwrapped` annotation and another mixin for the Key.\r\n\r\nMixin:\r\n\r\n    public class OrderMixin {\r\n\r\n\t\t@JsonDeserialize( using = OrderKeyDeserializer.class )\r\n\t\t@JsonSerialize( using = OrderKeySerializer.class )\r\n\t\t@JsonProperty( &quot;_key&quot; )\r\n\t\tOrderKey key;\r\n\r\n\t\t@JsonProperty( &quot;description&quot; )\r\n\t\tString description;\r\n\r\n\t\t@JsonProperty( &quot;amount&quot; )\r\n\t\tString amount;\r\n\r\n\t\t@JsonProperty( &quot;operation&quot; )\r\n\t\tOrder.Operation operation;\r\n\r\n\t\t@JsonProperty( &quot;creationDate&quot; )\r\n\t\tLocalDateTime creationDate;\r\n\r\n\t\tpublic static class OrderKeySerializer extends JsonSerializer&lt;OrderKey&gt; {\r\n\r\n\t\t\tpublic OrderKeySerializer() {\r\n\t\t\t\tsuper( OrderKey.class );\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void serialize( OrderKey value, JsonGenerator gen, SerializerProvider provider ) throws IOException {\r\n\t\t\t\tgen.writeString( value.getOrderId() );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic static class OrderKeyDeserializer extends JsonDeserializer&lt;OrderKey&gt; {\r\n\r\n\t\t\tpublic OrderKeyDeserializer() {\r\n\t\t\t\tsuper( OrderKey.class );\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic OrderKey deserialize( JsonParser jsonParser, DeserializationContext context ) throws IOException {\r\n\t\t\t\tJsonNode node = jsonParser.getCodec().readTree( jsonParser );\r\n\r\n\t\t\t\treturn OrderKey.get( node.asText() );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\nValue Objects:\r\n\r\n    @Value\r\n    public class Order implements Serializable {\r\n    \r\n      private static final long serialVersionUID = 901109456762331944L;\r\n    \r\n      OrderKey key;\r\n    \r\n      String description;\r\n    \r\n      String amount;\r\n    \r\n      Operation operation;\r\n    \r\n      LocalDateTime creationDate;\r\n    \r\n      @Value\r\n      public static class Operation {\r\n    \r\n        String id;\r\n    \r\n        String description;\r\n    \r\n        String status;\r\n    \r\n        LocalDateTime creationDate;\r\n      }\r\n    \r\n    }\r\n\r\n\r\n    @Value\r\n    public class OrderKey implements Serializable {\r\n      \r\n      private static final long serialVersionUID = -8102116676316181864L;\r\n\r\n      private String orderId;\r\n\r\n      public static OrderKey get( String orderId ) {\r\n          return new OrderKey( orderId );\r\n      }\r\n\r\n    }","title":"Jackson Unwrap / Wrap Object","body":"<p>I end up doing the serialize / deserialize inside the mixin itself, with this I can avoid the <code>@JsonUnwrapped</code> annotation and another mixin for the Key.</p>\n\n<p>Mixin:</p>\n\n<pre><code>public class OrderMixin {\n\n    @JsonDeserialize( using = OrderKeyDeserializer.class )\n    @JsonSerialize( using = OrderKeySerializer.class )\n    @JsonProperty( \"_key\" )\n    OrderKey key;\n\n    @JsonProperty( \"description\" )\n    String description;\n\n    @JsonProperty( \"amount\" )\n    String amount;\n\n    @JsonProperty( \"operation\" )\n    Order.Operation operation;\n\n    @JsonProperty( \"creationDate\" )\n    LocalDateTime creationDate;\n\n    public static class OrderKeySerializer extends JsonSerializer&lt;OrderKey&gt; {\n\n        public OrderKeySerializer() {\n            super( OrderKey.class );\n        }\n\n        @Override\n        public void serialize( OrderKey value, JsonGenerator gen, SerializerProvider provider ) throws IOException {\n            gen.writeString( value.getOrderId() );\n        }\n    }\n\n    public static class OrderKeyDeserializer extends JsonDeserializer&lt;OrderKey&gt; {\n\n        public OrderKeyDeserializer() {\n            super( OrderKey.class );\n        }\n\n        @Override\n        public OrderKey deserialize( JsonParser jsonParser, DeserializationContext context ) throws IOException {\n            JsonNode node = jsonParser.getCodec().readTree( jsonParser );\n\n            return OrderKey.get( node.asText() );\n        }\n    }\n\n}\n</code></pre>\n\n<p>Value Objects:</p>\n\n<pre><code>@Value\npublic class Order implements Serializable {\n\n  private static final long serialVersionUID = 901109456762331944L;\n\n  OrderKey key;\n\n  String description;\n\n  String amount;\n\n  Operation operation;\n\n  LocalDateTime creationDate;\n\n  @Value\n  public static class Operation {\n\n    String id;\n\n    String description;\n\n    String status;\n\n    LocalDateTime creationDate;\n  }\n\n}\n\n\n@Value\npublic class OrderKey implements Serializable {\n\n  private static final long serialVersionUID = -8102116676316181864L;\n\n  private String orderId;\n\n  public static OrderKey get( String orderId ) {\n      return new OrderKey( orderId );\n  }\n\n}\n</code></pre>\n"}],"owner":{"account_id":3786974,"reputation":85,"user_id":3144606,"accept_rate":75,"display_name":"Miguel Guilherme"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8585,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":42792752,"answer_count":2,"score":3,"last_activity_date":1691113489,"creation_date":1489503057,"question_id":42789248,"body_markdown":"I have a spring boot project and I have a class like this:\r\n\r\n    @Value\r\n    public class A {\r\n\r\n      @JsonUnwrapped\r\n      OrderKey key;\r\n\r\n      String description;\r\n\r\n      B b;\r\n      \r\n      @Value\r\n      public static class B {\r\n        String description;\r\n      }\r\n    }\r\n\r\n    @Value\r\n    public class OrderKey {\r\n\r\n      @JsonProperty( &quot;_key&quot; )\r\n      String id;\r\n    }\r\n\r\nI have mixins but added the Annotations in this example for brevity.\r\nThis works great when serializing to JSON, the issue is when I&#39;m trying to deserialize, probably it would work if exist some `@JsonWrapped` annotation.\r\n\r\nIn a nutshell, I&#39;m trying to use ArangoDB with rest and I can create / read documents but I need to use my own Value Objects and unfortunately I can&#39;t use the key as String, it&#39;s encapsulated by an `OrderKey`.\r\nThe `@Value` annotations is from lombok project.\r\n\r\nIs there any way to achieve this?\r\n\r\n","title":"Jackson Unwrap / Wrap Object","body":"<p>I have a spring boot project and I have a class like this:</p>\n<pre><code>@Value\npublic class A {\n\n  @JsonUnwrapped\n  OrderKey key;\n\n  String description;\n\n  B b;\n  \n  @Value\n  public static class B {\n    String description;\n  }\n}\n\n@Value\npublic class OrderKey {\n\n  @JsonProperty( &quot;_key&quot; )\n  String id;\n}\n</code></pre>\n<p>I have mixins but added the Annotations in this example for brevity.\nThis works great when serializing to JSON, the issue is when I'm trying to deserialize, probably it would work if exist some <code>@JsonWrapped</code> annotation.</p>\n<p>In a nutshell, I'm trying to use ArangoDB with rest and I can create / read documents but I need to use my own Value Objects and unfortunately I can't use the key as String, it's encapsulated by an <code>OrderKey</code>.\nThe <code>@Value</code> annotations is from lombok project.</p>\n<p>Is there any way to achieve this?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":5597184,"reputation":565,"user_id":4434569,"display_name":"javaBean007"},"score":0,"creation_date":1497199103,"post_id":44486109,"comment_id":75966390,"body_markdown":"What&#39;s the issue you are having? Your question states you have a problem getting x and y values of an object but how so? Also your comments in code state everything works above the calls to player.collect(...), will need to explain and see the player class code to see what&#39;s wrong if that is your issue","body":"What&#39;s the issue you are having? Your question states you have a problem getting x and y values of an object but how so? Also your comments in code state everything works above the calls to player.collect(...), will need to explain and see the player class code to see what&#39;s wrong if that is your issue"},{"owner":{"account_id":11082531,"reputation":21,"user_id":8137316,"display_name":"Aviraj Attri"},"score":0,"creation_date":1497215778,"post_id":44486109,"comment_id":75971764,"body_markdown":"i added the player class . my question is that when i invoke collect method from game class ( i pass dot1 as parameter, this line of code was given by our tutor to include in soln) , how do i get the x and y coordinates stored in dot 1 . also how can compare the current postion of the player and coordinates of the dot1(1,1) ??","body":"i added the player class . my question is that when i invoke collect method from game class ( i pass dot1 as parameter, this line of code was given by our tutor to include in soln) , how do i get the x and y coordinates stored in dot 1 . also how can compare the current postion of the player and coordinates of the dot1(1,1) ??"},{"owner":{"account_id":9335950,"reputation":170,"user_id":6930127,"display_name":"A. Cucci"},"score":0,"creation_date":1497216390,"post_id":44486109,"comment_id":75971902,"body_markdown":"Just a reminder - when displaying your code, please make sure it is formatted properly so that it is easier to read.","body":"Just a reminder - when displaying your code, please make sure it is formatted properly so that it is easier to read."}],"answers":[{"comments":[{"owner":{"account_id":11082531,"reputation":21,"user_id":8137316,"display_name":"Aviraj Attri"},"score":0,"creation_date":1497213741,"post_id":44486588,"comment_id":75971246,"body_markdown":"thank you so much for replying back , i am having a look at your code right now","body":"thank you so much for replying back , i am having a look at your code right now"},{"owner":{"account_id":11082531,"reputation":21,"user_id":8137316,"display_name":"Aviraj Attri"},"score":0,"creation_date":1497214619,"post_id":44486588,"comment_id":75971493,"body_markdown":"but unfortunately i had the player class already according to how out tutor demand us to make one. it is just i cant understand how show i pass an object ( dot1) as input while calling for a &#39;collect ()&#39; method and then extract x and y coordinate from (dot1) in &#39;collect()&#39; method to compare these coordinates with that of the player","body":"but unfortunately i had the player class already according to how out tutor demand us to make one. it is just i cant understand how show i pass an object ( dot1) as input while calling for a &#39;collect ()&#39; method and then extract x and y coordinate from (dot1) in &#39;collect()&#39; method to compare these coordinates with that of the player"}],"tags":[],"owner":{"account_id":10738788,"reputation":1979,"user_id":7902625,"accept_rate":100,"display_name":"Vasyl Lyashkevych"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1497201476,"creation_date":1497201476,"answer_id":44486588,"question_id":44486109,"body_markdown":"In my opinion, we can have some stages into the program. Let&#39;s go to untie your issue, for example for your code.\r\n\r\n    class Player {\r\n        \r\n        int id;\r\n        String name;\r\n        \r\n        int xPos;\r\n        int yPos;\r\n                \r\n        public Player(int x, int y){\r\n            this.xPos = x;\r\n            this.yPos = y;\r\n        }\r\n        \r\n        public void collect(Dot d){\r\n            \r\n        }\r\n        public void move(int dx, int dy){\r\n            \r\n        }\r\n    }\r\n\r\nAlso, we need to build:\r\n\r\n\r\n    class Dot {\r\n        int xPos;\r\n        int yPos;\r\n                \r\n        public Dot(int x, int y){\r\n            this.xPos = x;\r\n            this.yPos = y;\r\n        }\r\n    \r\n    }\r\n\r\nNow, your code will pass the coordinate for Player.\r\n","title":"Write a Java method that will remove a given character from a string objec","body":"<p>In my opinion, we can have some stages into the program. Let's go to untie your issue, for example for your code.</p>\n\n<pre><code>class Player {\n\n    int id;\n    String name;\n\n    int xPos;\n    int yPos;\n\n    public Player(int x, int y){\n        this.xPos = x;\n        this.yPos = y;\n    }\n\n    public void collect(Dot d){\n\n    }\n    public void move(int dx, int dy){\n\n    }\n}\n</code></pre>\n\n<p>Also, we need to build:</p>\n\n<pre><code>class Dot {\n    int xPos;\n    int yPos;\n\n    public Dot(int x, int y){\n        this.xPos = x;\n        this.yPos = y;\n    }\n\n}\n</code></pre>\n\n<p>Now, your code will pass the coordinate for Player.</p>\n"},{"comments":[{"owner":{"account_id":5597184,"reputation":565,"user_id":4434569,"display_name":"javaBean007"},"score":0,"creation_date":1497238651,"post_id":44491071,"comment_id":75976038,"body_markdown":"Please also make note of proper formatting, it makes the code harder to understand/read when the formatting is off.","body":"Please also make note of proper formatting, it makes the code harder to understand/read when the formatting is off."}],"tags":[],"owner":{"account_id":5597184,"reputation":565,"user_id":4434569,"display_name":"javaBean007"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1497238551,"creation_date":1497238551,"answer_id":44491071,"question_id":44486109,"body_markdown":"Based on your updated comments you can get x and y values from your Dot object by simply using dot notation on the Dot Object passed to your method. Updated your &quot;collect&quot; method and added comments to method passed on your requirements:\r\n\r\n    //Inside of player class\r\n        /**\r\n     * Add a “collect()” method to the Player class to collect the dot specified as the parameter \r\n     * if that is possible. The player can collect a dot only if the player is at the same position as the dot. When \r\n     * the player collects a dot, the player’s “collectedDots” count should be increased by 1. When the player \r\n     * collects a dot, the dot should disappear. To implement that, as part of the “collect()” method in the class \r\n     * Player, there should be a call to a “disappear()” method in the class Dot.\r\n     */\r\n    public void collect(Dot dot){\r\n    \tif(this.xCoordinate == dot.getX() &amp;&amp; this.yCoordinate == dot.getY()){\r\n    \t\t//increment the players count\r\n    \t\tsetCollectedDots(getCollectedDots() + 1);\r\n    \t\t\r\n    \t\t//remove the dot\r\n    \t\tdot.disappear();\r\n    \t}\r\n    }\r\n\r\nAdded method to for disappearing a Dot(assuming to remove the dot from play)\r\n\r\n    public class Dot {\r\n    \tprivate int x;\r\n    \tprivate int y;\r\n    \t\r\n    \tpublic Dot(int x, int y){\r\n    \t\tthis.x = x;\r\n    \t\tthis.y = y;\r\n    \t}\r\n    \t\r\n    \t/**\r\n    \t * Returns the full coordinates for the Dot[x,y]\r\n    \t * @return\r\n    \t */\r\n    \tpublic int[] getCoordinates(){\r\n    \t\tint[] coordinates = new int[2];\r\n    \t\t//place our coordinates into the array\r\n    \t\tcoordinates[0] = x;\r\n    \t\tcoordinates[1] = y;\r\n    \t\t\r\n    \t\treturn coordinates;\r\n    \t}\r\n    \r\n    \tpublic void disappear(){\r\n    \t\t//remove from the dot grid by setting to a negative position\r\n    \t\tsetX( -(this.x));\r\n    \t\tsetY(-(this.y));\r\n    \t}\r\n    \t\r\n    \t/**\r\n    \t * @return the x\r\n    \t */\r\n    \tpublic int getX() {\r\n    \t\treturn x;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * @param x the x to set\r\n    \t */\r\n    \tpublic void setX(int x) {\r\n    \t\tthis.x = x;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * @return the y\r\n    \t */\r\n    \tpublic int getY() {\r\n    \t\treturn y;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * @param y the y to set\r\n    \t */\r\n    \tpublic void setY(int y) {\r\n    \t\tthis.y = y;\r\n    \t}\r\n    }","title":"Write a Java method that will remove a given character from a string objec","body":"<p>Based on your updated comments you can get x and y values from your Dot object by simply using dot notation on the Dot Object passed to your method. Updated your \"collect\" method and added comments to method passed on your requirements:</p>\n\n<pre><code>//Inside of player class\n    /**\n * Add a “collect()” method to the Player class to collect the dot specified as the parameter \n * if that is possible. The player can collect a dot only if the player is at the same position as the dot. When \n * the player collects a dot, the player’s “collectedDots” count should be increased by 1. When the player \n * collects a dot, the dot should disappear. To implement that, as part of the “collect()” method in the class \n * Player, there should be a call to a “disappear()” method in the class Dot.\n */\npublic void collect(Dot dot){\n    if(this.xCoordinate == dot.getX() &amp;&amp; this.yCoordinate == dot.getY()){\n        //increment the players count\n        setCollectedDots(getCollectedDots() + 1);\n\n        //remove the dot\n        dot.disappear();\n    }\n}\n</code></pre>\n\n<p>Added method to for disappearing a Dot(assuming to remove the dot from play)</p>\n\n<pre><code>public class Dot {\n    private int x;\n    private int y;\n\n    public Dot(int x, int y){\n        this.x = x;\n        this.y = y;\n    }\n\n    /**\n     * Returns the full coordinates for the Dot[x,y]\n     * @return\n     */\n    public int[] getCoordinates(){\n        int[] coordinates = new int[2];\n        //place our coordinates into the array\n        coordinates[0] = x;\n        coordinates[1] = y;\n\n        return coordinates;\n    }\n\n    public void disappear(){\n        //remove from the dot grid by setting to a negative position\n        setX( -(this.x));\n        setY(-(this.y));\n    }\n\n    /**\n     * @return the x\n     */\n    public int getX() {\n        return x;\n    }\n\n    /**\n     * @param x the x to set\n     */\n    public void setX(int x) {\n        this.x = x;\n    }\n\n    /**\n     * @return the y\n     */\n    public int getY() {\n        return y;\n    }\n\n    /**\n     * @param y the y to set\n     */\n    public void setY(int y) {\n        this.y = y;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":11082531,"reputation":21,"user_id":8137316,"display_name":"Aviraj Attri"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1636,"favorite_count":0,"down_vote_count":3,"up_vote_count":2,"closed_date":1691140253,"accepted_answer_id":44486588,"answer_count":2,"score":-1,"last_activity_date":1691110435,"creation_date":1497198513,"question_id":44486109,"body_markdown":"We can use the replaceAll method to replace all of the occurrences of a string with another string. The important point to note is that replaceAll() accepts String as argument, so you can use the Character class to create a string and use it to replace all the characters with an empty string.\r\n\r\n \r\n     ","title":"Write a Java method that will remove a given character from a string objec","body":"<p>We can use the replaceAll method to replace all of the occurrences of a string with another string. The important point to note is that replaceAll() accepts String as argument, so you can use the Character class to create a string and use it to replace all the characters with an empty string.</p>\n"},{"tags":["java","dto"],"comments":[{"owner":{"account_id":2119809,"reputation":50969,"user_id":1883316,"display_name":"Tim Roberts"},"score":1,"creation_date":1691098594,"post_id":76831711,"comment_id":135449883,"body_markdown":"So, is the idea here that an M contains both an A and a C, but for some reason you want each A and C to know which M&#39;s it is part of?  Someone has to be the master.  Either the M controls the creation of As and Cs, or vice versa, but not both.","body":"So, is the idea here that an M contains both an A and a C, but for some reason you want each A and C to know which M&#39;s it is part of?  Someone has to be the master.  Either the M controls the creation of As and Cs, or vice versa, but not both."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1691100475,"post_id":76831711,"comment_id":135450128,"body_markdown":"As @TimRoberts already pointed out, in the context of a DTO, it seems pointless to have both relation-directions in a DTO; one should be sufficient. I also recommend looking at the concept of DDD, in particular roots and aggregates.","body":"As @TimRoberts already pointed out, in the context of a DTO, it seems pointless to have both relation-directions in a DTO; one should be sufficient. I also recommend looking at the concept of DDD, in particular roots and aggregates."},{"owner":{"account_id":75804,"reputation":94840,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"score":1,"creation_date":1691101609,"post_id":76831711,"comment_id":135450261,"body_markdown":"DTOs are supposed to be specialized to handle only what a particular view needs. Trying to make all-purpose DTOs may not make sense.","body":"DTOs are supposed to be specialized to handle only what a particular view needs. Trying to make all-purpose DTOs may not make sense."}],"answers":[{"tags":[],"owner":{"account_id":11384743,"reputation":121,"user_id":8346610,"display_name":"Leandro Rodrigues de Souza"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691109635,"creation_date":1691109635,"answer_id":76832318,"question_id":76831711,"body_markdown":"One way to solve this is to create a wrapper object for using your A_Entity and B_entity as lighter references:\r\n\r\n- The wrapper would be a subclass of A_Entity and B_Entity or you can create a more sophisticated mechanism using generics, annotations, and reflection;\r\n- The wrapper would hold the original object, but then would expose only the properties you need in order to have a parent reference and avoid returning the set that causes the circular reference;\r\n- Once you create the M_Entity, you&#39;d set up the references pointing to the wrapper instead of the original object.\r\n\r\nThis is a very similar approach that frameworks such as Hibernate use to handle those situations. It also works fine in serialization scenarios.\r\n\r\nI might add that if you are reflecting your Entities as DTO (I cannot tell that per your description, since I am aware that you are hiding parts of no interest to the problem) your design should be reviewed. If that is the case, your DTO is only adding complexity to your code. If you, for instance, expose data through REST API, having those DTOs may be pointless since there are other methods to avoid the exposure of unwanted details.\r\n\r\nI hope this helps :)","title":"What to do to avoid stack overflow using DTOs?","body":"<p>One way to solve this is to create a wrapper object for using your A_Entity and B_entity as lighter references:</p>\n<ul>\n<li>The wrapper would be a subclass of A_Entity and B_Entity or you can create a more sophisticated mechanism using generics, annotations, and reflection;</li>\n<li>The wrapper would hold the original object, but then would expose only the properties you need in order to have a parent reference and avoid returning the set that causes the circular reference;</li>\n<li>Once you create the M_Entity, you'd set up the references pointing to the wrapper instead of the original object.</li>\n</ul>\n<p>This is a very similar approach that frameworks such as Hibernate use to handle those situations. It also works fine in serialization scenarios.</p>\n<p>I might add that if you are reflecting your Entities as DTO (I cannot tell that per your description, since I am aware that you are hiding parts of no interest to the problem) your design should be reviewed. If that is the case, your DTO is only adding complexity to your code. If you, for instance, expose data through REST API, having those DTOs may be pointless since there are other methods to avoid the exposure of unwanted details.</p>\n<p>I hope this helps :)</p>\n"}],"owner":{"account_id":11290872,"reputation":23,"user_id":8280023,"display_name":"Romualdo Rubens de Freitas"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1691109635,"creation_date":1691098258,"question_id":76831711,"body_markdown":"I&#39;m going to face a Stack Overflow problem (it&#39;s so obvious I didn&#39;t even need to run the code to find out) and I want to rely on the group&#39;s knowledge and experience to find a suitable solution.\r\n\r\nI have the following entity classes (Jakarta Persistence or JPA, if you prefer) (for the sake of questioning, they are simplified):\r\n\r\n```\r\npublic class A_Entity {\r\n   private Set&lt;M_Entity&gt; ms;\r\n}\r\n\r\npublic class C_Entity {\r\n   private Set&lt;M_Entity&gt; ms;\r\n}\r\n\r\npublic class M_Entity {\r\n   private A_Entity a_entity;\r\n   private C_Entity c_entity;\r\n}\r\n```\r\n\r\nAs you can see, **M_Entity** is a relationship class (it contains other attributes, hence its existence). In addition, they contain annotations for the Persistence API and for validation (Jakarta Bean Validation). So for each one, I&#39;ve declared classes that implement the Data Transfer Object (DTO) pattern:\r\n\r\n```\r\npublic class A_DTO {\r\n   private Set&lt;M_DTO&gt; ms;\r\n}\r\n\r\npublic class C_DTO {\r\n   private Set&lt;M_DTO&gt; ms;\r\n}\r\n\r\npublic class M_DTO {\r\n   private A_DTO a_dto;\r\n   private C_DTO c_dto;\r\n}\r\n```\r\n\r\nNext, I declared a mapping interface (to train/reinforce knowledge and practice, I preferred not to use mapping libraries such as [MapStruct][1] and [ModelMapper][2]) (there&#39;s a good [article][3] comparing both):\r\n\r\n```\r\npublic interface EntityDTO&lt;T1, T2&gt; {\r\n   T1 toEntity(T2 dto);\r\n   T2 toDTO(T1 entity);\r\n}\r\n```\r\n\r\nFinally, I declared three implementations:\r\n\r\n```\r\npublic class A_Mapper implements EntityDTO&lt;A_Entity, A_DTO&gt; {\r\n   public A_Entity toEntity(A_DTO dto) {\r\n      Set&lt;M_Entity&gt; ms = new HashSet&lt;&gt;();\r\n      A_Entity      a  = new A_Entity();\r\n\r\n      for (M_DTO m_dto : dto.getMs())\r\n         ms.add((new M_Mapper()).toEntity(m_dto));\r\n\r\n      a.setMs(ms);\r\n   }\r\n\r\n   public A_DTO toDTO(A_Entity entity) {\r\n      Set&lt;M_DTO&gt; ms = new HashSet&lt;&gt;();\r\n      A_DTO      a  = new A_DTO();\r\n\r\n      for (M_Entity m_entity: entity.getMs())\r\n         ms.add((new M_Mapper()).toDTO(m_entity));\r\n\r\n      a.setMs(ms);\r\n   }\r\n}\r\n\r\npublic class C_Mapper implements EntityDTO&lt;C_Entity, C_DTO&gt; {\r\n   public C_Entity toEntity(C_DTO dto) {\r\n      Set&lt;M_Entity&gt; ms = new HashSet&lt;&gt;();\r\n      C_Entity      c  = new C_Entity();\r\n\r\n      for (M_DTO m_dto : dto.getMs())\r\n         c.add((M_Mapper()).toEntity(m_dto));\r\n\r\n      c.setMs(ms);\r\n   }\r\n\r\n   public C_DTO toDTO(C_Entity entity) {\r\n      Set&lt;M_DTO&gt; ms = new HashSet&lt;&gt;();\r\n      C_DTO      c  = new C_DTO();\r\n\r\n      for (M_Entity m_entity : entity.getMs())\r\n         c.add((M_Mapper()).toDTO(m_entity));\r\n\r\n      c.setMs(ms);\r\n   }\r\n}\r\n\r\npublic class M_Mapper implements EntityDTO&lt;M_Entity, M_DTO&gt; {\r\n   public M_Entity toEntity(M_DTO dto) {\r\n      M_Entity m = new M_Entity();\r\n\r\n      m.setA_Entity((new A_Mapper()).toEntity(dto.getA_DTO()));\r\n      m.setC_Entity((new C_Mapper()).toEntity(dto.getC_DTO()));\r\n   }\r\n\r\n   public M_DTO toDTO(M_Entity entity) {\r\n      M_DTO m = new M_DTO();\r\n\r\n      m.setA_DTO((new A_Mapper()).toDTO(entity.getA_Entity()));\r\n      m.setC_DTO((new C_Mapper()).toDTO(dto.getC_Entity()));\r\n   }\r\n}\r\n```\r\n\r\nWhen mapping for class **M** occurs, its methods invoke mapping for **A** and **C**, which in turn invoke mapping for **M**, which invokes for **A** and **C**.........and Boom!!!! Stack Overflow.\r\n\r\nCan someone who has already gone through this problem or has an idea, even if esoteric - as long as it works properly - &quot;to give me a light&quot;???\r\n\r\n  [1]: https://mapstruct.org/\r\n  [2]: https://modelmapper.org/\r\n  [3]: https://dzone.com/articles/comparing-modelmapper-and-mapstruct-in-java-the-po","title":"What to do to avoid stack overflow using DTOs?","body":"<p>I'm going to face a Stack Overflow problem (it's so obvious I didn't even need to run the code to find out) and I want to rely on the group's knowledge and experience to find a suitable solution.</p>\n<p>I have the following entity classes (Jakarta Persistence or JPA, if you prefer) (for the sake of questioning, they are simplified):</p>\n<pre><code>public class A_Entity {\n   private Set&lt;M_Entity&gt; ms;\n}\n\npublic class C_Entity {\n   private Set&lt;M_Entity&gt; ms;\n}\n\npublic class M_Entity {\n   private A_Entity a_entity;\n   private C_Entity c_entity;\n}\n</code></pre>\n<p>As you can see, <strong>M_Entity</strong> is a relationship class (it contains other attributes, hence its existence). In addition, they contain annotations for the Persistence API and for validation (Jakarta Bean Validation). So for each one, I've declared classes that implement the Data Transfer Object (DTO) pattern:</p>\n<pre><code>public class A_DTO {\n   private Set&lt;M_DTO&gt; ms;\n}\n\npublic class C_DTO {\n   private Set&lt;M_DTO&gt; ms;\n}\n\npublic class M_DTO {\n   private A_DTO a_dto;\n   private C_DTO c_dto;\n}\n</code></pre>\n<p>Next, I declared a mapping interface (to train/reinforce knowledge and practice, I preferred not to use mapping libraries such as <a href=\"https://mapstruct.org/\" rel=\"nofollow noreferrer\">MapStruct</a> and <a href=\"https://modelmapper.org/\" rel=\"nofollow noreferrer\">ModelMapper</a>) (there's a good <a href=\"https://dzone.com/articles/comparing-modelmapper-and-mapstruct-in-java-the-po\" rel=\"nofollow noreferrer\">article</a> comparing both):</p>\n<pre><code>public interface EntityDTO&lt;T1, T2&gt; {\n   T1 toEntity(T2 dto);\n   T2 toDTO(T1 entity);\n}\n</code></pre>\n<p>Finally, I declared three implementations:</p>\n<pre><code>public class A_Mapper implements EntityDTO&lt;A_Entity, A_DTO&gt; {\n   public A_Entity toEntity(A_DTO dto) {\n      Set&lt;M_Entity&gt; ms = new HashSet&lt;&gt;();\n      A_Entity      a  = new A_Entity();\n\n      for (M_DTO m_dto : dto.getMs())\n         ms.add((new M_Mapper()).toEntity(m_dto));\n\n      a.setMs(ms);\n   }\n\n   public A_DTO toDTO(A_Entity entity) {\n      Set&lt;M_DTO&gt; ms = new HashSet&lt;&gt;();\n      A_DTO      a  = new A_DTO();\n\n      for (M_Entity m_entity: entity.getMs())\n         ms.add((new M_Mapper()).toDTO(m_entity));\n\n      a.setMs(ms);\n   }\n}\n\npublic class C_Mapper implements EntityDTO&lt;C_Entity, C_DTO&gt; {\n   public C_Entity toEntity(C_DTO dto) {\n      Set&lt;M_Entity&gt; ms = new HashSet&lt;&gt;();\n      C_Entity      c  = new C_Entity();\n\n      for (M_DTO m_dto : dto.getMs())\n         c.add((M_Mapper()).toEntity(m_dto));\n\n      c.setMs(ms);\n   }\n\n   public C_DTO toDTO(C_Entity entity) {\n      Set&lt;M_DTO&gt; ms = new HashSet&lt;&gt;();\n      C_DTO      c  = new C_DTO();\n\n      for (M_Entity m_entity : entity.getMs())\n         c.add((M_Mapper()).toDTO(m_entity));\n\n      c.setMs(ms);\n   }\n}\n\npublic class M_Mapper implements EntityDTO&lt;M_Entity, M_DTO&gt; {\n   public M_Entity toEntity(M_DTO dto) {\n      M_Entity m = new M_Entity();\n\n      m.setA_Entity((new A_Mapper()).toEntity(dto.getA_DTO()));\n      m.setC_Entity((new C_Mapper()).toEntity(dto.getC_DTO()));\n   }\n\n   public M_DTO toDTO(M_Entity entity) {\n      M_DTO m = new M_DTO();\n\n      m.setA_DTO((new A_Mapper()).toDTO(entity.getA_Entity()));\n      m.setC_DTO((new C_Mapper()).toDTO(dto.getC_Entity()));\n   }\n}\n</code></pre>\n<p>When mapping for class <strong>M</strong> occurs, its methods invoke mapping for <strong>A</strong> and <strong>C</strong>, which in turn invoke mapping for <strong>M</strong>, which invokes for <strong>A</strong> and <strong>C</strong>.........and Boom!!!! Stack Overflow.</p>\n<p>Can someone who has already gone through this problem or has an idea, even if esoteric - as long as it works properly - &quot;to give me a light&quot;???</p>\n"},{"tags":["java","json","comparator","jsonassert"],"owner":{"account_id":16028984,"reputation":1,"user_id":11568488,"display_name":"Sumanth R3ddy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691108823,"creation_date":1691108823,"question_id":76832284,"body_markdown":"I am trying to compare two JSON structures using Custom comparator of JSONAssert package. For example,  \r\nData1: \r\n\r\n```\r\n{\r\n  &quot;name&quot;: &quot;John&quot;,\r\n  &quot;details&quot;: {\r\n    &quot;age&quot;: 30,\r\n    &quot;State&quot;: {\r\n      &quot;City&quot;: &quot;Buffalo&quot;,\r\n      &quot;Country&quot; :[ \r\n        {\r\n        &quot;Classification&quot; : &quot;USA&quot;,\r\n        &quot;Data&quot; : &quot;sample1&quot;\r\n        },\r\n        {\r\n        &quot;Classification&quot; : &quot;Canada&quot;,\r\n        &quot;Data&quot; : &quot;sample1&quot;\r\n        }\r\n      ]\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n  \r\nI want to ignore the whole array index 0 when the classification has the value &quot;USA&quot; i.e I want to ignore even the data field in the first element of a country when the classification value is &quot;USA&quot;.\r\n\r\n```@Test\r\n    public void compareJsonStrIgnoringDiffInArray() throws JSONException {\r\n        String errorMsg = &quot;&quot;;\r\n        String expectedJsonStr = &quot;{\\&quot;name\\&quot;:\\&quot;John\\&quot;,\\&quot;details\\&quot;:{\\&quot;age\\&quot;:30,\\&quot;State\\&quot;:{\\&quot;City\\&quot;:\\&quot;Buffalo\\&quot;,\\&quot;Country\\&quot;:[{\\&quot;Classification\\&quot;:\\&quot;USA\\&quot;,\\&quot;Data\\&quot;:\\&quot;sample1\\&quot;},{\\&quot;Classification\\&quot;:\\&quot;Canada\\&quot;,\\&quot;Data\\&quot;:\\&quot;sample1\\&quot;}]}}}&quot;;\r\n\r\n        String actualJsonStr = &quot;{\\&quot;name\\&quot;:\\&quot;John\\&quot;,\\&quot;details\\&quot;:{\\&quot;age\\&quot;:30,\\&quot;State\\&quot;:{\\&quot;City\\&quot;:\\&quot;Buffalo\\&quot;,\\&quot;Country\\&quot;:[{\\&quot;Classification\\&quot;:\\&quot;USA\\&quot;,\\&quot;Data\\&quot;:\\&quot;sample1\\&quot;},{\\&quot;Classification\\&quot;:\\&quot;Canada\\&quot;,\\&quot;Data\\&quot;:\\&quot;sample1\\&quot;}]}}}&quot;;\r\n\r\n        //Create custom comparator which compares two json strings but ignores reporting any differences for anArray[n].id values\r\n        //as they are a tolerated difference\r\n\r\n        ArrayValueMatcher&lt;Object&gt; arrValMatch = new ArrayValueMatcher&lt;&gt;(new CustomComparator(\r\n                JSONCompareMode.NON_EXTENSIBLE,\r\n                new Customization(&quot;Country[*].classification&quot;, (o1, o2) -&gt; true)));\r\n\r\n        Customization arrayValueMatchCustomization = new Customization(&quot;Country&quot;, arrValMatch);\r\n        CustomComparator customArrayValueComparator = new CustomComparator(\r\n                JSONCompareMode.NON_EXTENSIBLE, \r\n                arrayValueMatchCustomization);\r\n        JSONAssert.assertEquals(expectedJsonStr, actualJsonStr, customArrayValueComparator);\r\n    }\r\n\r\n```\r\n\r\n\r\nI have tried this implementation but it ignores all the classification values in every index. But i only want one index to be ignored including the data element when the classification value is &quot;USA&quot;.\r\n\r\nRef: https://stackoverflow.com/questions/50919776/ignore-specific-node-within-array-when-comparing-two-json-in-java","title":"Ignore specific node within array when the element inside the node has a specific value while comparing two JSON in Java","body":"<p>I am trying to compare two JSON structures using Custom comparator of JSONAssert package. For example,<br />\nData1:</p>\n<pre><code>{\n  &quot;name&quot;: &quot;John&quot;,\n  &quot;details&quot;: {\n    &quot;age&quot;: 30,\n    &quot;State&quot;: {\n      &quot;City&quot;: &quot;Buffalo&quot;,\n      &quot;Country&quot; :[ \n        {\n        &quot;Classification&quot; : &quot;USA&quot;,\n        &quot;Data&quot; : &quot;sample1&quot;\n        },\n        {\n        &quot;Classification&quot; : &quot;Canada&quot;,\n        &quot;Data&quot; : &quot;sample1&quot;\n        }\n      ]\n    }\n  }\n}\n</code></pre>\n<p>I want to ignore the whole array index 0 when the classification has the value &quot;USA&quot; i.e I want to ignore even the data field in the first element of a country when the classification value is &quot;USA&quot;.</p>\n<pre><code>    public void compareJsonStrIgnoringDiffInArray() throws JSONException {\n        String errorMsg = &quot;&quot;;\n        String expectedJsonStr = &quot;{\\&quot;name\\&quot;:\\&quot;John\\&quot;,\\&quot;details\\&quot;:{\\&quot;age\\&quot;:30,\\&quot;State\\&quot;:{\\&quot;City\\&quot;:\\&quot;Buffalo\\&quot;,\\&quot;Country\\&quot;:[{\\&quot;Classification\\&quot;:\\&quot;USA\\&quot;,\\&quot;Data\\&quot;:\\&quot;sample1\\&quot;},{\\&quot;Classification\\&quot;:\\&quot;Canada\\&quot;,\\&quot;Data\\&quot;:\\&quot;sample1\\&quot;}]}}}&quot;;\n\n        String actualJsonStr = &quot;{\\&quot;name\\&quot;:\\&quot;John\\&quot;,\\&quot;details\\&quot;:{\\&quot;age\\&quot;:30,\\&quot;State\\&quot;:{\\&quot;City\\&quot;:\\&quot;Buffalo\\&quot;,\\&quot;Country\\&quot;:[{\\&quot;Classification\\&quot;:\\&quot;USA\\&quot;,\\&quot;Data\\&quot;:\\&quot;sample1\\&quot;},{\\&quot;Classification\\&quot;:\\&quot;Canada\\&quot;,\\&quot;Data\\&quot;:\\&quot;sample1\\&quot;}]}}}&quot;;\n\n        //Create custom comparator which compares two json strings but ignores reporting any differences for anArray[n].id values\n        //as they are a tolerated difference\n\n        ArrayValueMatcher&lt;Object&gt; arrValMatch = new ArrayValueMatcher&lt;&gt;(new CustomComparator(\n                JSONCompareMode.NON_EXTENSIBLE,\n                new Customization(&quot;Country[*].classification&quot;, (o1, o2) -&gt; true)));\n\n        Customization arrayValueMatchCustomization = new Customization(&quot;Country&quot;, arrValMatch);\n        CustomComparator customArrayValueComparator = new CustomComparator(\n                JSONCompareMode.NON_EXTENSIBLE, \n                arrayValueMatchCustomization);\n        JSONAssert.assertEquals(expectedJsonStr, actualJsonStr, customArrayValueComparator);\n    }\n\n</code></pre>\n<p>I have tried this implementation but it ignores all the classification values in every index. But i only want one index to be ignored including the data element when the classification value is &quot;USA&quot;.</p>\n<p>Ref: <a href=\"https://stackoverflow.com/questions/50919776/ignore-specific-node-within-array-when-comparing-two-json-in-java\">Ignore specific node within array when comparing two JSON in Java</a></p>\n"},{"tags":["java","eclipse","spring","maven","spring-mvc"],"comments":[{"owner":{"account_id":1064245,"reputation":85256,"user_id":1065197,"accept_rate":88,"display_name":"Luiggi Mendoza"},"score":1,"creation_date":1373513173,"post_id":17584495,"comment_id":25588482,"body_markdown":"*Possible root causes include a too low setting for -Xss and illegal cyclic inheritance dependencies.* I guess that message already answers you.","body":"<i>Possible root causes include a too low setting for -Xss and illegal cyclic inheritance dependencies.</i> I guess that message already answers you."},{"owner":{"account_id":82626,"reputation":12122,"user_id":232175,"accept_rate":62,"display_name":"Matthias"},"score":1,"creation_date":1373513301,"post_id":17584495,"comment_id":25588509,"body_markdown":"As said: I already increased the stack size. And I can&#39;t change the inheritance of some external dependencies. I just need some way to exclude them from scanning.","body":"As said: I already increased the stack size. And I can&#39;t change the inheritance of some external dependencies. I just need some way to exclude them from scanning."},{"owner":{"account_id":1064245,"reputation":85256,"user_id":1065197,"accept_rate":88,"display_name":"Luiggi Mendoza"},"score":0,"creation_date":1373513673,"post_id":17584495,"comment_id":25588578,"body_markdown":"Where you raised the stack size?","body":"Where you raised the stack size?"},{"owner":{"account_id":82626,"reputation":12122,"user_id":232175,"accept_rate":62,"display_name":"Matthias"},"score":0,"creation_date":1373523734,"post_id":17584495,"comment_id":25591351,"body_markdown":"In the &quot;Run configuration&quot; setting of my project for the server under &quot;Arguments - VM arguments&quot;, I set &quot;-Xss4m&quot; (was Xss768k or so before).","body":"In the &quot;Run configuration&quot; setting of my project for the server under &quot;Arguments - VM arguments&quot;, I set &quot;-Xss4m&quot; (was Xss768k or so before)."}],"answers":[{"comments":[{"owner":{"account_id":82626,"reputation":12122,"user_id":232175,"accept_rate":62,"display_name":"Matthias"},"score":0,"creation_date":1373524548,"post_id":17586412,"comment_id":25591676,"body_markdown":"Thanks for your response. The dependency tree looks quite normal for those libraries (I can&#39;t recognize any cyclic dependency):\n\n`\\- org.apache.activemq:activemq-all:jar:5.8.0:compile\n   \\- org.apache.activemq:activemq-amqp:jar:5.8.0:compile\n      \\- org.apache.qpid:proton-jms:jar:0.3.0-fuse-2:compile\n         \\- org.apache.qpid:proton:jar:0.3.0-fuse-2:compile\n            \\- org.bouncycastle:bcpkix-jdk15on:jar:1.47:compile\n               \\- org.bouncycastle:bcprov-jdk15on:jar:1.47:compile`\n\nShould I try excluding the library from maven using the pom? Or only from deployment?","body":"Thanks for your response. The dependency tree looks quite normal for those libraries (I can&#39;t recognize any cyclic dependency):  <code>\\- org.apache.activemq:activemq-all:jar:5.8.0:compile    \\- org.apache.activemq:activemq-amqp:jar:5.8.0:compile       \\- org.apache.qpid:proton-jms:jar:0.3.0-fuse-2:compile          \\- org.apache.qpid:proton:jar:0.3.0-fuse-2:compile             \\- org.bouncycastle:bcpkix-jdk15on:jar:1.47:compile                \\- org.bouncycastle:bcprov-jdk15on:jar:1.47:compile</code>  Should I try excluding the library from maven using the pom? Or only from deployment?"},{"owner":{"account_id":2161358,"reputation":42669,"user_id":1915448,"accept_rate":96,"display_name":"g00glen00b"},"score":0,"creation_date":1373525509,"post_id":17586412,"comment_id":25592103,"body_markdown":"I see you have two `org.bouncycastle*` dependencies. Can you check if one of them depends on the other? Try to remove one of them and see if your code still works. If one of them depends on the other, it will probably download the other by itself.","body":"I see you have two <code>org.bouncycastle*</code> dependencies. Can you check if one of them depends on the other? Try to remove one of them and see if your code still works. If one of them depends on the other, it will probably download the other by itself."},{"owner":{"account_id":82626,"reputation":12122,"user_id":232175,"accept_rate":62,"display_name":"Matthias"},"score":0,"creation_date":1373530831,"post_id":17586412,"comment_id":25594753,"body_markdown":"The problem is that those are only indirect dependencies, i.e. they are required by a required project which I can not change.\nThus, I added group &quot;org.bouncycastle&quot; / artifact &quot;bcprov-jdk16&quot; to the &quot;exclusions&quot; list of this dependency in my pom file.\nStill no luck, however.","body":"The problem is that those are only indirect dependencies, i.e. they are required by a required project which I can not change. Thus, I added group &quot;org.bouncycastle&quot; / artifact &quot;bcprov-jdk16&quot; to the &quot;exclusions&quot; list of this dependency in my pom file. Still no luck, however."}],"tags":[],"owner":{"account_id":2161358,"reputation":42669,"user_id":1915448,"accept_rate":96,"display_name":"g00glen00b"},"comment_count":3,"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1373523830,"creation_date":1373523830,"answer_id":17586412,"question_id":17584495,"body_markdown":"You have a cyclic dependency. `org.bouncycastle.asn1.ASN1EncodableVector` depends on `org.bouncycastle.asn1.DEREncodableVector` which depends back on `org.bouncycastle.asn1.ASN1EncodableVector` which ... . This is an infinite cycle and so you&#39;re getting a `StackOverflowException`.\r\n\r\nIf you have the Maven plugin installed in Eclipse, look at the **Dependency Hierarchy** and look for these classes. I found someone with a similar issue [here][1], he solved it by looking at the dependency tree and then adding an exclusion to break the cyclic dependency.\r\n\r\n\r\n  [1]: http://tomcat.10.x6.nabble.com/Tomcat-7-0-39-randoms-start-and-crash-tp4997661p4997671.html","title":"Unable to complete the scan for annotations for web application [/app] due to a StackOverflowError","body":"<p>You have a cyclic dependency. <code>org.bouncycastle.asn1.ASN1EncodableVector</code> depends on <code>org.bouncycastle.asn1.DEREncodableVector</code> which depends back on <code>org.bouncycastle.asn1.ASN1EncodableVector</code> which ... . This is an infinite cycle and so you're getting a <code>StackOverflowException</code>.</p>\n\n<p>If you have the Maven plugin installed in Eclipse, look at the <strong>Dependency Hierarchy</strong> and look for these classes. I found someone with a similar issue <a href=\"http://tomcat.10.x6.nabble.com/Tomcat-7-0-39-randoms-start-and-crash-tp4997661p4997671.html\" rel=\"noreferrer\">here</a>, he solved it by looking at the dependency tree and then adding an exclusion to break the cyclic dependency.</p>\n"},{"comments":[{"owner":{"account_id":11505607,"reputation":146,"user_id":8431969,"display_name":"Alireza Khajavi"},"score":1,"creation_date":1535662009,"post_id":19396597,"comment_id":91161339,"body_markdown":"in my case only bcprov-jdk15on-1.47.jar was resolved problem","body":"in my case only bcprov-jdk15on-1.47.jar was resolved problem"},{"owner":{"account_id":2204080,"reputation":121,"user_id":1947713,"display_name":"Pankaj"},"score":0,"creation_date":1630403155,"post_id":19396597,"comment_id":121940285,"body_markdown":"I was facing this issue with tomcat 9 and only in debug mode. It was working fine when tomcat started in run mode. The fix suggested here worked for me as well.","body":"I was facing this issue with tomcat 9 and only in debug mode. It was working fine when tomcat started in run mode. The fix suggested here worked for me as well."},{"owner":{"account_id":12964440,"reputation":131,"user_id":9372534,"display_name":"infiniteshi"},"score":0,"creation_date":1657740211,"post_id":19396597,"comment_id":128885068,"body_markdown":"I&#39;m facing exactly the same symptoms/error message. How/where did you find out about those two jars bcprov-jdk15on-1.47.jar and bcprov-jdk16-1.45.jar? How exactly did you &quot;exclude&quot; the unwanted jar(bcprov-jdk16-1.45.jar), please?","body":"I&#39;m facing exactly the same symptoms/error message. How/where did you find out about those two jars bcprov-jdk15on-1.47.jar and bcprov-jdk16-1.45.jar? How exactly did you &quot;exclude&quot; the unwanted jar(bcprov-jdk16-1.45.jar), please?"},{"owner":{"account_id":1967071,"reputation":1336,"user_id":1767021,"accept_rate":76,"display_name":"deldev"},"score":0,"creation_date":1690241764,"post_id":19396597,"comment_id":135323063,"body_markdown":"Why why does this occur? the same happened to me, I was using a version of an internal library and this library used a version of bcprov. I upgraded to another library that used a more up-to-date version, but the old bcprov was still there. Is there any option in maven to remove unused libraries or should this always be done by hand?","body":"Why why does this occur? the same happened to me, I was using a version of an internal library and this library used a version of bcprov. I upgraded to another library that used a more up-to-date version, but the old bcprov was still there. Is there any option in maven to remove unused libraries or should this always be done by hand?"},{"owner":{"account_id":1105503,"reputation":1137,"user_id":1096977,"display_name":"amindri"},"score":1,"creation_date":1691109121,"post_id":19396597,"comment_id":135450969,"body_markdown":"@deldev Yes, if the root dependency includes it as transitive dependency then it should be excluded manually. You can read about maven dependency scopes here. https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Scope","body":"@deldev Yes, if the root dependency includes it as transitive dependency then it should be excluded manually. You can read about maven dependency scopes here. <a href=\"https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Scope\" rel=\"nofollow noreferrer\">maven.apache.org/guides/introduction/&hellip;</a>"}],"tags":[],"owner":{"account_id":1105503,"reputation":1137,"user_id":1096977,"display_name":"amindri"},"comment_count":5,"down_vote_count":0,"up_vote_count":96,"is_accepted":true,"score":96,"last_activity_date":1691108549,"creation_date":1381904931,"answer_id":19396597,"question_id":17584495,"body_markdown":"In my case the `org.bouncycastle.asn1.DEREncodableVector` class, which was causing the cyclic dependency, was served by two jars in the class path.\r\n\r\n`bcprov-jdk15on-1.47.jar` and `bcprov-jdk16-1.45.jar`\r\n\r\nExcluded the unwanted jar(bcprov-jdk16-1.45.jar) and it worked well \r\n\r\nExample: If apache CFX web services security is adding the unnecessary bcprov maven dependency, then it can be excluded as follows\r\n\r\n\r\n     \r\n \r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;cxf-rt-ws-security&lt;/artifactId&gt;\r\n    \t&lt;version&gt;${org.apache.cxf.version}&lt;/version&gt;\r\n    \t&lt;exclusions&gt;\r\n    \t\t&lt;exclusion&gt;\r\n    \t\t  &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\r\n    \t\t  &lt;artifactId&gt;bcprov-jdk15on&lt;/artifactId&gt;\r\n    \t\t&lt;/exclusion&gt;\r\n    \t&lt;/exclusions&gt;\r\n     &lt;/dependency&gt;\r\n\r\n\r\n","title":"Unable to complete the scan for annotations for web application [/app] due to a StackOverflowError","body":"<p>In my case the <code>org.bouncycastle.asn1.DEREncodableVector</code> class, which was causing the cyclic dependency, was served by two jars in the class path.</p>\n<p><code>bcprov-jdk15on-1.47.jar</code> and <code>bcprov-jdk16-1.45.jar</code></p>\n<p>Excluded the unwanted jar(bcprov-jdk16-1.45.jar) and it worked well</p>\n<p>Example: If apache CFX web services security is adding the unnecessary bcprov maven dependency, then it can be excluded as follows</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\n    &lt;artifactId&gt;cxf-rt-ws-security&lt;/artifactId&gt;\n    &lt;version&gt;${org.apache.cxf.version}&lt;/version&gt;\n    &lt;exclusions&gt;\n        &lt;exclusion&gt;\n          &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\n          &lt;artifactId&gt;bcprov-jdk15on&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1389220,"reputation":869,"user_id":1320479,"accept_rate":28,"display_name":"NiBE"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1401354981,"creation_date":1401354981,"answer_id":23929793,"question_id":17584495,"body_markdown":"I had the same issue I remove every trace of bouncycastle library in the buildConfig file. No trace in dependecy or excludes. Just add the plug in crypto.2.0 and everything works fine!","title":"Unable to complete the scan for annotations for web application [/app] due to a StackOverflowError","body":"<p>I had the same issue I remove every trace of bouncycastle library in the buildConfig file. No trace in dependecy or excludes. Just add the plug in crypto.2.0 and everything works fine!</p>\n"},{"tags":[],"owner":{"account_id":4714327,"reputation":1681,"user_id":3813962,"accept_rate":0,"display_name":"yonia"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1407161239,"creation_date":1407161239,"answer_id":25120641,"question_id":17584495,"body_markdown":"I had the same problem and fixed it finally .\r\nGo to your pom and search for bouncycastle \r\nYou should see more than one  exclude one of them and it should fix it ","title":"Unable to complete the scan for annotations for web application [/app] due to a StackOverflowError","body":"<p>I had the same problem and fixed it finally .\nGo to your pom and search for bouncycastle \nYou should see more than one  exclude one of them and it should fix it </p>\n"},{"tags":[],"owner":{"account_id":6152731,"reputation":11,"user_id":4796697,"display_name":"Thomas Raehalme"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1439796400,"creation_date":1439796400,"answer_id":32044859,"question_id":17584495,"body_markdown":"Also double check your `lib` folder under Tomcat to make sure the duplicate dependency is not present there.","title":"Unable to complete the scan for annotations for web application [/app] due to a StackOverflowError","body":"<p>Also double check your <code>lib</code> folder under Tomcat to make sure the duplicate dependency is not present there.</p>\n"},{"comments":[{"owner":{"account_id":125069,"reputation":6156,"user_id":320594,"accept_rate":77,"display_name":"Jaime Hablutzel"},"score":0,"creation_date":1498600637,"post_id":35914143,"comment_id":76562019,"body_markdown":"Note that this condition can arise too by depending on `pdfbox-app` which bundles its own Bouncy Castle version.","body":"Note that this condition can arise too by depending on <code>pdfbox-app</code> which bundles its own Bouncy Castle version."},{"owner":{"account_id":6383695,"reputation":5206,"user_id":4952262,"accept_rate":71,"display_name":"Michu93"},"score":0,"creation_date":1642668117,"post_id":35914143,"comment_id":125133566,"body_markdown":"also `selenium-server-standalone` has it&#39;s own `ASN1EncodableVectore.class`","body":"also <code>selenium-server-standalone</code> has it&#39;s own <code>ASN1EncodableVectore.class</code>"},{"owner":{"account_id":7482021,"reputation":71,"user_id":5686495,"display_name":"Plijen"},"score":0,"creation_date":1667580856,"post_id":35914143,"comment_id":131208105,"body_markdown":"I confirm, it happens to me randomly for this reason","body":"I confirm, it happens to me randomly for this reason"}],"tags":[],"owner":{"account_id":2883111,"reputation":191,"user_id":2473519,"display_name":"user2473519"},"comment_count":3,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1457606521,"creation_date":1457606521,"answer_id":35914143,"question_id":17584495,"body_markdown":"I just encountered this problem. Others already give the answer to this problem. I would say something else.\r\n\r\nI guess that you are using `maven-shade-plugin` or something alike that packaging all dependencies into an Uber jar, right?\r\n\r\nYou can see from `grepcode` that `bcprov-jdk15on:1.52` defines `DEREncodableVector` as\r\n\r\n    public class DEREncodableVector extends ASN1EncodableVector\r\n\r\nWhile `bcprov-jdk14:1.38` defines `ASN1EncodableVector` as\r\n\r\n    public class ASN1EncodableVector extends DEREncodableVector\r\nAnd with `maven-shade-plugin`, it would randomly choose a class when two or more same classes exist. And when it chooses this combination, cyclic dependency happens. If it choose other combinations, your application may work fine. \r\nIt matches what you described \r\n&gt; Yet, most of the times, it doesn&#39;t work.\r\n\r\nIt&#39;s a probabilistic event.","title":"Unable to complete the scan for annotations for web application [/app] due to a StackOverflowError","body":"<p>I just encountered this problem. Others already give the answer to this problem. I would say something else.</p>\n\n<p>I guess that you are using <code>maven-shade-plugin</code> or something alike that packaging all dependencies into an Uber jar, right?</p>\n\n<p>You can see from <code>grepcode</code> that <code>bcprov-jdk15on:1.52</code> defines <code>DEREncodableVector</code> as</p>\n\n<pre><code>public class DEREncodableVector extends ASN1EncodableVector\n</code></pre>\n\n<p>While <code>bcprov-jdk14:1.38</code> defines <code>ASN1EncodableVector</code> as</p>\n\n<pre><code>public class ASN1EncodableVector extends DEREncodableVector\n</code></pre>\n\n<p>And with <code>maven-shade-plugin</code>, it would randomly choose a class when two or more same classes exist. And when it chooses this combination, cyclic dependency happens. If it choose other combinations, your application may work fine. \nIt matches what you described </p>\n\n<blockquote>\n  <p>Yet, most of the times, it doesn't work.</p>\n</blockquote>\n\n<p>It's a probabilistic event.</p>\n"},{"tags":[],"owner":{"account_id":247773,"reputation":15733,"user_id":522729,"accept_rate":69,"display_name":"Victor Grazi"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1466609193,"creation_date":1466609193,"answer_id":37972356,"question_id":17584495,"body_markdown":"This was happening to me using \r\n\r\n            &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\r\n            &lt;artifactId&gt;bcpkix-jdk15on&lt;/artifactId&gt;\r\n            &lt;version&gt;1.54&lt;/version&gt;\r\nI upgraded that to \r\n\r\n            &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\r\n            &lt;artifactId&gt;bcprov-jdk16&lt;/artifactId&gt;\r\n            &lt;version&gt;1.46&lt;/version&gt;\r\nand that seems to have fixed it","title":"Unable to complete the scan for annotations for web application [/app] due to a StackOverflowError","body":"<p>This was happening to me using </p>\n\n<pre><code>        &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\n        &lt;artifactId&gt;bcpkix-jdk15on&lt;/artifactId&gt;\n        &lt;version&gt;1.54&lt;/version&gt;\n</code></pre>\n\n<p>I upgraded that to </p>\n\n<pre><code>        &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\n        &lt;artifactId&gt;bcprov-jdk16&lt;/artifactId&gt;\n        &lt;version&gt;1.46&lt;/version&gt;\n</code></pre>\n\n<p>and that seems to have fixed it</p>\n"},{"tags":[],"owner":{"account_id":8718550,"reputation":3,"user_id":6612244,"display_name":"Tesla_PH"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1496139775,"creation_date":1496135775,"answer_id":44258171,"question_id":17584495,"body_markdown":"If it is already excluded in the build config and error still exist,\r\nyou can try to clean your project&#39;s working directory before building.\r\n\r\n    maven clean\r\n\r\n-\r\n\r\n    grails clean","title":"Unable to complete the scan for annotations for web application [/app] due to a StackOverflowError","body":"<p>If it is already excluded in the build config and error still exist,\nyou can try to clean your project's working directory before building.</p>\n\n<pre><code>maven clean\n</code></pre>\n\n<p>-</p>\n\n<pre><code>grails clean\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8023160,"reputation":1,"user_id":6051167,"display_name":"Jason Kiefer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1498162475,"creation_date":1498162475,"answer_id":44708599,"question_id":17584495,"body_markdown":"I had the same problem but with a different solution.  My conflict was with bcprov-jdk15on-1.55.jar and tika-app-1.7.jar.  Apparently tika includes bouncy castle, and in this case the older version of bouncy castle that causes the conflict.","title":"Unable to complete the scan for annotations for web application [/app] due to a StackOverflowError","body":"<p>I had the same problem but with a different solution.  My conflict was with bcprov-jdk15on-1.55.jar and tika-app-1.7.jar.  Apparently tika includes bouncy castle, and in this case the older version of bouncy castle that causes the conflict.</p>\n"},{"tags":[],"owner":{"account_id":2053609,"reputation":113,"user_id":1831993,"display_name":"Ardeshir Ayati"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1523265222,"creation_date":1522844644,"answer_id":49650960,"question_id":17584495,"body_markdown":"I have this error  in tomcat 8 and jdk 1.8\r\n\r\n    04-Apr-2018 16:35:06.358 SEVERE [localhost-startStop-1] org.apache.catalina.core.ContainerBase.addChildInternal ContainerBase.addChild: start: \r\n     org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/myapp]]\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:167)\r\n    \tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:752)\r\n    \tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:728)\r\n    \tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:734)\r\n    \tat org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1141)\r\n    \tat org.apache.catalina.startup.HostConfig$DeployDirectory.run(HostConfig.java:1875)\r\n    \tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n    \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n    \tat java.lang.Thread.run(Thread.java:745)\r\n    Caused by: java.lang.IllegalStateException: Unable to complete the scan for annotations for web application [/myapp] due to a StackOverflowError. Possible root causes include a too low setting for -Xss and illegal cyclic inheritance dependencies. The class hierarchy being processed was [org.bouncycastle.asn1.ASN1EncodableVector-&gt;org.bouncycastle.asn1.DEREncodableVector-&gt;org.bouncycastle.asn1.ASN1EncodableVector]\r\n    \tat org.apache.catalina.startup.ContextConfig.checkHandlesTypes(ContextConfig.java:2110)\r\n    \tat org.apache.catalina.startup.ContextConfig.processAnnotationsStream(ContextConfig.java:2054)\r\n    \tat org.apache.catalina.startup.ContextConfig.processAnnotationsJar(ContextConfig.java:2000)\r\n    \tat org.apache.catalina.startup.ContextConfig.processAnnotationsUrl(ContextConfig.java:1970)\r\n    \tat org.apache.catalina.startup.ContextConfig.processAnnotations(ContextConfig.java:1923)\r\n    \tat org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1163)\r\n    \tat org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:775)\r\n    \tat org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:299)\r\n    \tat org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:94)\r\n    \tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5105)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\r\n    \t... 10 more\r\n    \r\n    04-Apr-2018 16:35:06.359 SEVERE [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Error deploying web application directory [/usr/apache-tomcat-8.5.24.Core/webapps/myapp]\r\n     java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/myapp]]\r\n    \tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:756)\r\n    \tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:728)\r\n    \tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:734)\r\n    \tat org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1141)\r\n    \tat org.apache.catalina.startup.HostConfig$DeployDirectory.run(HostConfig.java:1875)\r\n    \tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n    \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n    \tat java.lang.Thread.run(Thread.java:745)\r\n\r\nAnd I found two jar with name bcprov-jdk*.jar in my app lib.\r\nI removed all of those and use bcprov-jdk15on-1.52.jar.\r\nIn this way, my problem was solved.\r\n","title":"Unable to complete the scan for annotations for web application [/app] due to a StackOverflowError","body":"<p>I have this error  in tomcat 8 and jdk 1.8</p>\n\n<pre><code>04-Apr-2018 16:35:06.358 SEVERE [localhost-startStop-1] org.apache.catalina.core.ContainerBase.addChildInternal ContainerBase.addChild: start: \n org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/myapp]]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:167)\n    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:752)\n    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:728)\n    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:734)\n    at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1141)\n    at org.apache.catalina.startup.HostConfig$DeployDirectory.run(HostConfig.java:1875)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: java.lang.IllegalStateException: Unable to complete the scan for annotations for web application [/myapp] due to a StackOverflowError. Possible root causes include a too low setting for -Xss and illegal cyclic inheritance dependencies. The class hierarchy being processed was [org.bouncycastle.asn1.ASN1EncodableVector-&gt;org.bouncycastle.asn1.DEREncodableVector-&gt;org.bouncycastle.asn1.ASN1EncodableVector]\n    at org.apache.catalina.startup.ContextConfig.checkHandlesTypes(ContextConfig.java:2110)\n    at org.apache.catalina.startup.ContextConfig.processAnnotationsStream(ContextConfig.java:2054)\n    at org.apache.catalina.startup.ContextConfig.processAnnotationsJar(ContextConfig.java:2000)\n    at org.apache.catalina.startup.ContextConfig.processAnnotationsUrl(ContextConfig.java:1970)\n    at org.apache.catalina.startup.ContextConfig.processAnnotations(ContextConfig.java:1923)\n    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1163)\n    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:775)\n    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:299)\n    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:94)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5105)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n    ... 10 more\n\n04-Apr-2018 16:35:06.359 SEVERE [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Error deploying web application directory [/usr/apache-tomcat-8.5.24.Core/webapps/myapp]\n java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/myapp]]\n    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:756)\n    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:728)\n    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:734)\n    at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1141)\n    at org.apache.catalina.startup.HostConfig$DeployDirectory.run(HostConfig.java:1875)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n</code></pre>\n\n<p>And I found two jar with name bcprov-jdk*.jar in my app lib.\nI removed all of those and use bcprov-jdk15on-1.52.jar.\nIn this way, my problem was solved.</p>\n"},{"tags":[],"owner":{"account_id":2508599,"reputation":374,"user_id":2181576,"display_name":"veritas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1559309053,"creation_date":1559309053,"answer_id":56395958,"question_id":17584495,"body_markdown":"Doing mvn clean in jenkins workspace folder (where my project runs) and doing a Jenkins build (that deletes the old war file) worked for me. ","title":"Unable to complete the scan for annotations for web application [/app] due to a StackOverflowError","body":"<p>Doing mvn clean in jenkins workspace folder (where my project runs) and doing a Jenkins build (that deletes the old war file) worked for me. </p>\n"},{"tags":[],"owner":{"account_id":4291943,"reputation":121,"user_id":3508066,"accept_rate":0,"display_name":"Ruhshan"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1588050954,"creation_date":1588050954,"answer_id":61473091,"question_id":17584495,"body_markdown":"I also had the same issue in my spring boot project. To find out the conflicting dependencies I issues this command from my project directory:\r\n\r\n```mvn dependency:tree -Dverbose -Dincludes=org.bouncycastle```\r\n\r\nFrom the output following information was found:\r\n\r\n```\r\n[INFO] +- org.springframework.cloud:spring-cloud-starter-openfeign:jar:2.1.0.RC3:compile\r\n[INFO] |  \\- org.springframework.cloud:spring-cloud-starter:jar:2.1.0.RC2:compile\r\n[INFO] |     \\- org.springframework.security:spring-security-rsa:jar:1.0.7.RELEASE:compile\r\n[INFO] |        \\- org.bouncycastle:bcpkix-jdk15on:jar:1.60:compile\r\n[INFO] |           \\- org.bouncycastle:bcprov-jdk15on:jar:1.60:compile\r\n[INFO] \\- com.cybersource:cybersource-rest-client-java:jar:0.0.16:compile\r\n[INFO]    \\- com.cybersource:AuthenticationSdk:jar:0.0.8:compile\r\n[INFO]       \\- org.bouncycastle:bcprov-jdk16:jar:1.45:compile\r\n\r\n```\r\n\r\nHere we can see that openfeign and cybersource-rest-client are using different versions of bcprov-jdk package. As cybersource-rest-client have the updated version of this package, I excluded this dependency from openfeign in pom.xml like this:\r\n\r\n```\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt;\r\n\t&lt;exclusions&gt;\r\n\t\t&lt;exclusion&gt;\r\n\t\t\t&lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;bcprov-jdk15on&lt;/artifactId&gt;\r\n\t\t&lt;/exclusion&gt;\r\n\t&lt;/exclusions&gt;\r\n&lt;/dependency&gt;\r\n\t\r\n```\r\n\r\nThis helped me solve this issue for me. ","title":"Unable to complete the scan for annotations for web application [/app] due to a StackOverflowError","body":"<p>I also had the same issue in my spring boot project. To find out the conflicting dependencies I issues this command from my project directory:</p>\n\n<p><code>mvn dependency:tree -Dverbose -Dincludes=org.bouncycastle</code></p>\n\n<p>From the output following information was found:</p>\n\n<pre><code>[INFO] +- org.springframework.cloud:spring-cloud-starter-openfeign:jar:2.1.0.RC3:compile\n[INFO] |  \\- org.springframework.cloud:spring-cloud-starter:jar:2.1.0.RC2:compile\n[INFO] |     \\- org.springframework.security:spring-security-rsa:jar:1.0.7.RELEASE:compile\n[INFO] |        \\- org.bouncycastle:bcpkix-jdk15on:jar:1.60:compile\n[INFO] |           \\- org.bouncycastle:bcprov-jdk15on:jar:1.60:compile\n[INFO] \\- com.cybersource:cybersource-rest-client-java:jar:0.0.16:compile\n[INFO]    \\- com.cybersource:AuthenticationSdk:jar:0.0.8:compile\n[INFO]       \\- org.bouncycastle:bcprov-jdk16:jar:1.45:compile\n\n</code></pre>\n\n<p>Here we can see that openfeign and cybersource-rest-client are using different versions of bcprov-jdk package. As cybersource-rest-client have the updated version of this package, I excluded this dependency from openfeign in pom.xml like this:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt;\n    &lt;exclusions&gt;\n        &lt;exclusion&gt;\n            &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\n            &lt;artifactId&gt;bcprov-jdk15on&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n&lt;/dependency&gt;\n\n</code></pre>\n\n<p>This helped me solve this issue for me. </p>\n"}],"owner":{"account_id":82626,"reputation":12122,"user_id":232175,"accept_rate":62,"display_name":"Matthias"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74591,"favorite_count":0,"down_vote_count":0,"up_vote_count":66,"accepted_answer_id":19396597,"answer_count":12,"score":66,"last_activity_date":1691108549,"creation_date":1373512815,"question_id":17584495,"body_markdown":"I am developing a Spring MVC application using STS (eclipse plugin) and maven.\r\n\r\nFor creating the project, I followed the STS wizard for a new &quot;Spring MVC project&quot;. Afterwards, I added some dependencies to other projects and libraries.\r\n\r\nHowever, when I am now trying to deploy the project to the integrated vFabric server of STS, I sometimes get an exception:\r\n\r\n\r\n    SEVERE: ContainerBase.addChild: start: \r\n    org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/wsa]]\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)\r\n    \tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)\r\n    \t...\r\n    Caused by: java.lang.IllegalStateException: Unable to complete the scan for annotations for web application [/app] due to a StackOverflowError. Possible root causes include a too low setting for -Xss and illegal cyclic inheritance dependencies. The class hierarchy being processed was [org.bouncycastle.asn1.ASN1EncodableVector-&gt;org.bouncycastle.asn1.DEREncodableVector-&gt;org.bouncycastle.asn1.ASN1EncodableVector]\r\n    \tat org.apache.catalina.startup.ContextConfig.checkHandlesTypes(ContextConfig.java:2179)\r\n    \t...\r\n\r\nWhen issuing a &quot;maven clean&quot;, followed by a &quot;maven install&quot; and a restart of the server, the exception sometimes doesn&#39;t get thrown and the application works fine. Yet, most of the times, it doesn&#39;t work.\r\n\r\nI guess there is no need to scan the bouncycastle dependencies for annotations.  \r\nCan I somehow disable this scanning for some jars?\r\n\r\nI already tried adding `metadata-complete=&quot;true&quot;` to my web.xml and increasing the stack size with no result.\r\n\r\nWhat can I do to fix this?","title":"Unable to complete the scan for annotations for web application [/app] due to a StackOverflowError","body":"<p>I am developing a Spring MVC application using STS (eclipse plugin) and maven.</p>\n\n<p>For creating the project, I followed the STS wizard for a new \"Spring MVC project\". Afterwards, I added some dependencies to other projects and libraries.</p>\n\n<p>However, when I am now trying to deploy the project to the integrated vFabric server of STS, I sometimes get an exception:</p>\n\n<pre><code>SEVERE: ContainerBase.addChild: start: \norg.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/wsa]]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)\n    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)\n    ...\nCaused by: java.lang.IllegalStateException: Unable to complete the scan for annotations for web application [/app] due to a StackOverflowError. Possible root causes include a too low setting for -Xss and illegal cyclic inheritance dependencies. The class hierarchy being processed was [org.bouncycastle.asn1.ASN1EncodableVector-&gt;org.bouncycastle.asn1.DEREncodableVector-&gt;org.bouncycastle.asn1.ASN1EncodableVector]\n    at org.apache.catalina.startup.ContextConfig.checkHandlesTypes(ContextConfig.java:2179)\n    ...\n</code></pre>\n\n<p>When issuing a \"maven clean\", followed by a \"maven install\" and a restart of the server, the exception sometimes doesn't get thrown and the application works fine. Yet, most of the times, it doesn't work.</p>\n\n<p>I guess there is no need to scan the bouncycastle dependencies for annotations.<br>\nCan I somehow disable this scanning for some jars?</p>\n\n<p>I already tried adding <code>metadata-complete=\"true\"</code> to my web.xml and increasing the stack size with no result.</p>\n\n<p>What can I do to fix this?</p>\n"},{"tags":["java","linux","shell"],"comments":[{"owner":{"account_id":4497436,"reputation":18081,"user_id":3656904,"accept_rate":67,"display_name":"talex"},"score":0,"creation_date":1541747909,"post_id":53221294,"comment_id":93329503,"body_markdown":"If you run this script from terminal everything works?","body":"If you run this script from terminal everything works?"},{"owner":{"account_id":13798611,"reputation":37885,"user_id":9959152,"display_name":"Ryuzaki L"},"score":0,"creation_date":1541747939,"post_id":53221294,"comment_id":93329518,"body_markdown":"may be try this https://askubuntu.com/questions/138908/how-to-execute-a-script-just-by-double-clicking-like-exe-files-in-windows","body":"may be try this <a href=\"https://askubuntu.com/questions/138908/how-to-execute-a-script-just-by-double-clicking-like-exe-files-in-windows\" title=\"how to execute a script just by double clicking like exe files in windows\">askubuntu.com/questions/138908/&hellip;</a>"},{"owner":{"account_id":6606163,"reputation":494,"user_id":5102932,"display_name":"Roy Shahaf"},"score":0,"creation_date":1541747966,"post_id":53221294,"comment_id":93329524,"body_markdown":"More specifically, can you run the java line in a bash terminal?","body":"More specifically, can you run the java line in a bash terminal?"},{"owner":{"account_id":10469159,"reputation":49,"user_id":7717604,"display_name":"lokesh"},"score":0,"creation_date":1541748111,"post_id":53221294,"comment_id":93329582,"body_markdown":"If i try to run the .sh file from terminal am getting the following error &quot;Unable to access jarfile/executer.jar&quot;","body":"If i try to run the .sh file from terminal am getting the following error &quot;Unable to access jarfile/executer.jar&quot;"},{"owner":{"account_id":10469159,"reputation":49,"user_id":7717604,"display_name":"lokesh"},"score":0,"creation_date":1541748249,"post_id":53221294,"comment_id":93329628,"body_markdown":"@RoyShahaf Yes, using terminal i can run the java line alone. it&#39;s working fine. But if i try to run the script, above error is displayed.","body":"@RoyShahaf Yes, using terminal i can run the java line alone. it&#39;s working fine. But if i try to run the script, above error is displayed."},{"owner":{"account_id":6606163,"reputation":494,"user_id":5102932,"display_name":"Roy Shahaf"},"score":0,"creation_date":1541748422,"post_id":53221294,"comment_id":93329692,"body_markdown":"Is the script in the same folder as the jar?","body":"Is the script in the same folder as the jar?"},{"owner":{"account_id":6606163,"reputation":494,"user_id":5102932,"display_name":"Roy Shahaf"},"score":0,"creation_date":1541748582,"post_id":53221294,"comment_id":93329749,"body_markdown":"At any rate this looks similar to https://stackoverflow.com/questions/11943948/what-causes-unable-to-access-jar-file-error . Try moving both script and the jar into a different folder (or using chmod to alter the permissions)","body":"At any rate this looks similar to <a href=\"https://stackoverflow.com/questions/11943948/what-causes-unable-to-access-jar-file-error\" title=\"what causes unable to access jar file error\">stackoverflow.com/questions/11943948/&hellip;</a> . Try moving both script and the jar into a different folder (or using chmod to alter the permissions)"}],"answers":[{"tags":[],"owner":{"account_id":5843461,"reputation":556,"user_id":4604265,"accept_rate":100,"display_name":"Sandunka Mihiran"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1541748061,"creation_date":1541748061,"answer_id":53221363,"question_id":53221294,"body_markdown":"Try moving into sh file location using terminal and try to execute it using following command.\r\n\r\n     ./startup.sh \r\n\r\nIf your file name is &#39;startup&#39;","title":"Unable to run my .jar file using .sh file","body":"<p>Try moving into sh file location using terminal and try to execute it using following command.</p>\n\n<pre><code> ./startup.sh \n</code></pre>\n\n<p>If your file name is 'startup'</p>\n"},{"tags":[],"owner":{"account_id":14715505,"reputation":1,"user_id":10627575,"display_name":"Henry He"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1541749706,"creation_date":1541749053,"answer_id":53221541,"question_id":53221294,"body_markdown":"Try to execute a command to output a log file.\r\n\r\nThen check the log info.\r\n\r\n`java -jar executer.jar &gt;err.log 2&gt;1`","title":"Unable to run my .jar file using .sh file","body":"<p>Try to execute a command to output a log file.</p>\n\n<p>Then check the log info.</p>\n\n<p><code>java -jar executer.jar &gt;err.log 2&gt;1</code></p>\n"},{"tags":[],"owner":{"account_id":19306338,"reputation":15,"user_id":14113064,"display_name":"solisoares"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691107591,"creation_date":1691107591,"answer_id":76832253,"question_id":53221294,"body_markdown":"As the question is about &quot;double clicking&quot;, try passing the complete path to `java` and give executable permissions (sudo chmod +x &lt;shfile.sh&gt;)\r\n\r\nI got a situation like yours and logging the error to a log file, like Henry He&#39;s answer, told me that java wasn&#39;t found. Even though I can run from the terminal, I got a `java: command not found` \r\n\r\nAs my java bin comes from `adsf` (*The Multiple Runtime Version Manager*) I passed the complete path and it worked:\r\n\r\n\r\n```\r\n#!/bin/bash\r\n&lt;complete-path-to-java&gt; -jar executer.jar","title":"Unable to run my .jar file using .sh file","body":"<p>As the question is about &quot;double clicking&quot;, try passing the complete path to <code>java</code> and give executable permissions (sudo chmod +x &lt;shfile.sh&gt;)</p>\n<p>I got a situation like yours and logging the error to a log file, like Henry He's answer, told me that java wasn't found. Even though I can run from the terminal, I got a <code>java: command not found</code></p>\n<p>As my java bin comes from <code>adsf</code> (<em>The Multiple Runtime Version Manager</em>) I passed the complete path and it worked:</p>\n<pre><code>#!/bin/bash\n&lt;complete-path-to-java&gt; -jar executer.jar\n</code></pre>\n"}],"owner":{"account_id":10469159,"reputation":49,"user_id":7717604,"display_name":"lokesh"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":780,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1691107591,"creation_date":1541747661,"question_id":53221294,"body_markdown":"I have a runnable .jar file, which i can run from my linux terminal but I need to run that .jar file using a .sh file. \r\n\r\n    #!/bin/bash\r\n    java -jar executer.jar\r\n\r\nIf i double click the .sh file, terminal opens up but my code doesn&#39;t get executed. Kindly let me know, whats wrong. \r\n\r\n","title":"Unable to run my .jar file using .sh file","body":"<p>I have a runnable .jar file, which i can run from my linux terminal but I need to run that .jar file using a .sh file. </p>\n\n<pre><code>#!/bin/bash\njava -jar executer.jar\n</code></pre>\n\n<p>If i double click the .sh file, terminal opens up but my code doesn't get executed. Kindly let me know, whats wrong. </p>\n"},{"tags":["java","android","pdf","android-recyclerview","itext"],"comments":[{"owner":{"account_id":16549589,"reputation":177,"user_id":11958275,"display_name":"Ghazanfar Ateeb"},"score":0,"creation_date":1691065490,"post_id":76828025,"comment_id":135442946,"body_markdown":"what kind of data you are writing to pdf?","body":"what kind of data you are writing to pdf?"},{"owner":{"account_id":29151994,"reputation":1,"user_id":22332638,"display_name":"ezz sab"},"score":0,"creation_date":1691065581,"post_id":76828025,"comment_id":135442961,"body_markdown":"texts and pictures @GhazanfarAteeb","body":"texts and pictures @GhazanfarAteeb"},{"owner":{"account_id":2755641,"reputation":8698,"user_id":2373819,"display_name":"Andrew"},"score":0,"creation_date":1691066137,"post_id":76828025,"comment_id":135443108,"body_markdown":"Draw the view to the built in pdfdocument https://developer.android.com/reference/android/graphics/pdf/PdfDocument . The question is how many items in the recyclerview? and do you want to match standard paper sizes? (As you might need to break it up in to multiple pages.","body":"Draw the view to the built in pdfdocument <a href=\"https://developer.android.com/reference/android/graphics/pdf/PdfDocument\" rel=\"nofollow noreferrer\">developer.android.com/reference/android/graphics/pdf/&hellip;</a> . The question is how many items in the recyclerview? and do you want to match standard paper sizes? (As you might need to break it up in to multiple pages."},{"owner":{"account_id":16549589,"reputation":177,"user_id":11958275,"display_name":"Ghazanfar Ateeb"},"score":0,"creation_date":1691066733,"post_id":76828025,"comment_id":135443240,"body_markdown":"as far i remember I&#39;ve worked with writing images to pdf. i could share that","body":"as far i remember I&#39;ve worked with writing images to pdf. i could share that"},{"owner":{"account_id":29151994,"reputation":1,"user_id":22332638,"display_name":"ezz sab"},"score":0,"creation_date":1691068426,"post_id":76828025,"comment_id":135443632,"body_markdown":"I&#39;ve done this previously. But I encountered many problems that I could not solve, so I try to do that using iText.\nThe number of items in RecyclerView is not specified, depending on the user&#39;s input @Andrew","body":"I&#39;ve done this previously. But I encountered many problems that I could not solve, so I try to do that using iText. The number of items in RecyclerView is not specified, depending on the user&#39;s input @Andrew"},{"owner":{"account_id":2755641,"reputation":8698,"user_id":2373819,"display_name":"Andrew"},"score":0,"creation_date":1691071268,"post_id":76828025,"comment_id":135444346,"body_markdown":"I draw views to pdfdocument lots, the only problem I had was with pre Android 6 in that if you put a bitmap in then it did not compress it and produced very large pdf files. Otherwise it produces just as good results as itext without having to pay for a license (unless your app is open source). So what problems did you have?","body":"I draw views to pdfdocument lots, the only problem I had was with pre Android 6 in that if you put a bitmap in then it did not compress it and produced very large pdf files. Otherwise it produces just as good results as itext without having to pay for a license (unless your app is open source). So what problems did you have?"},{"owner":{"account_id":29151994,"reputation":1,"user_id":22332638,"display_name":"ezz sab"},"score":0,"creation_date":1691072343,"post_id":76828025,"comment_id":135444622,"body_markdown":"I could not determine the number of pages on which the information is placed because it is a variable value according to the user&#39;s input\nI was converting the final form into a bitmap and then putting the batmap into a PDF file, but the final result is a very long page or a page that does not show all the information\nI tried to split the bitmap before placing it in the PDF page, but I did not get any result  @Andrew","body":"I could not determine the number of pages on which the information is placed because it is a variable value according to the user&#39;s input I was converting the final form into a bitmap and then putting the batmap into a PDF file, but the final result is a very long page or a page that does not show all the information I tried to split the bitmap before placing it in the PDF page, but I did not get any result  @Andrew"}],"answers":[{"tags":[],"owner":{"account_id":2755641,"reputation":8698,"user_id":2373819,"display_name":"Andrew"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691106043,"creation_date":1691106043,"answer_id":76832180,"question_id":76828025,"body_markdown":"Here is a solution to create a multi page pdf from a recyclerview, it does not use itext because there is no need to as the underlying graphics system Android uses is [Skia][1] which has renderers for hardware, bitmap and pdf&#39;s\r\n\r\nThus it does not have the license issue non open source use.\r\n\r\nThis example is based on something I do in my app for non recyclerviews.\r\n\r\nThe key is to pre-measure all the recycler items (not just the ones that the recycler needs to show on the screen) and thus you can build a view to draw to the pdf that fits the pdf page.\r\n\r\nNote that you need to treat a pdf page as a large low resolution screen, much as your app has adapt to display on different screen sizes.\r\n\r\nThis is because an A4 pdf page is only 594 postscript (pixels) wide and 841 postscript (pixels) high. Thus you probably want to use much smaller font sizes than you would for a devices screen (This basic example does not adjust for the pdf size)\r\n\r\nAs it is a complete working example I put it on github https://github.com/Zardozz/RecyclerviewPdf\r\n\r\nNote you should really do the PDF generation in the background because it can take some time as it draws all items in the recyclerview.\r\n\r\n\r\n  [1]: https://skia.org/","title":"Get RecyclerView to itext pdf","body":"<p>Here is a solution to create a multi page pdf from a recyclerview, it does not use itext because there is no need to as the underlying graphics system Android uses is <a href=\"https://skia.org/\" rel=\"nofollow noreferrer\">Skia</a> which has renderers for hardware, bitmap and pdf's</p>\n<p>Thus it does not have the license issue non open source use.</p>\n<p>This example is based on something I do in my app for non recyclerviews.</p>\n<p>The key is to pre-measure all the recycler items (not just the ones that the recycler needs to show on the screen) and thus you can build a view to draw to the pdf that fits the pdf page.</p>\n<p>Note that you need to treat a pdf page as a large low resolution screen, much as your app has adapt to display on different screen sizes.</p>\n<p>This is because an A4 pdf page is only 594 postscript (pixels) wide and 841 postscript (pixels) high. Thus you probably want to use much smaller font sizes than you would for a devices screen (This basic example does not adjust for the pdf size)</p>\n<p>As it is a complete working example I put it on github <a href=\"https://github.com/Zardozz/RecyclerviewPdf\" rel=\"nofollow noreferrer\">https://github.com/Zardozz/RecyclerviewPdf</a></p>\n<p>Note you should really do the PDF generation in the background because it can take some time as it draws all items in the recyclerview.</p>\n"}],"owner":{"account_id":29151994,"reputation":1,"user_id":22332638,"display_name":"ezz sab"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691106043,"creation_date":1691065299,"question_id":76828025,"body_markdown":"\r\nI want to get recyclerView Items from activity to itext PDF, but I don&#39;t know the best way to do it.\r\n\r\nI tried to do that by taking abitmap for recyclerView and put it in the PDF,but it was of lower quality than the other text in PDF\r\n\r\n```java\r\nBitmap returnedBitmap = Bitmap.createBitmap(rl_edu.getWidth(), rl_edu.getHeight(), Bitmap.Config.ARGB_8888);\r\nBitmap.createScaledBitmap(returnedBitmap, 595, 842, true);\r\nCanvas canvas = new Canvas(returnedBitmap);\r\n\r\nDrawable bgDrawable = rl_edu.getBackground();\r\nif (bgDrawable != null) {\r\n\tbgDrawable.draw(canvas);\r\n} else {\r\n\tcanvas.drawColor(Color.WHITE);\r\n}\r\nl_edu.draw(canvas);\r\n\r\nByteArrayOutputStream stream = new ByteArrayOutputStream();\r\nreturnedBitmap.compress(Bitmap.CompressFormat.PNG, 100, stream);\r\nImage image = Image.getInstance(stream.toByteArray());\r\nimage.setAlignment(Element.LISTITEM);\r\nimage.scaleAbsolute(490f, 240f);\r\nmDoc.add(image);\r\n```\r\n\r\nAnd I also tried to get toString from Infrormation Activity for the recyclerView \r\n\r\n\r\n```java\r\nFont f = new Font(Font.FontFamily.TIMES_ROMAN, 14.0f, Font.NORMAL, BaseColor.BLUE);\r\nString rvEdu = MyApplication.getEducationList().toString();\r\nmDoc.add(new Paragraph(rvEdu, f));\r\n```\r\n\r\nIs there another way to do that?\r\n\r\n","title":"Get RecyclerView to itext pdf","body":"<p>I want to get recyclerView Items from activity to itext PDF, but I don't know the best way to do it.</p>\n<p>I tried to do that by taking abitmap for recyclerView and put it in the PDF,but it was of lower quality than the other text in PDF</p>\n<pre class=\"lang-java prettyprint-override\"><code>Bitmap returnedBitmap = Bitmap.createBitmap(rl_edu.getWidth(), rl_edu.getHeight(), Bitmap.Config.ARGB_8888);\nBitmap.createScaledBitmap(returnedBitmap, 595, 842, true);\nCanvas canvas = new Canvas(returnedBitmap);\n\nDrawable bgDrawable = rl_edu.getBackground();\nif (bgDrawable != null) {\n    bgDrawable.draw(canvas);\n} else {\n    canvas.drawColor(Color.WHITE);\n}\nl_edu.draw(canvas);\n\nByteArrayOutputStream stream = new ByteArrayOutputStream();\nreturnedBitmap.compress(Bitmap.CompressFormat.PNG, 100, stream);\nImage image = Image.getInstance(stream.toByteArray());\nimage.setAlignment(Element.LISTITEM);\nimage.scaleAbsolute(490f, 240f);\nmDoc.add(image);\n</code></pre>\n<p>And I also tried to get toString from Infrormation Activity for the recyclerView</p>\n<pre class=\"lang-java prettyprint-override\"><code>Font f = new Font(Font.FontFamily.TIMES_ROMAN, 14.0f, Font.NORMAL, BaseColor.BLUE);\nString rvEdu = MyApplication.getEducationList().toString();\nmDoc.add(new Paragraph(rvEdu, f));\n</code></pre>\n<p>Is there another way to do that?</p>\n"},{"tags":["java","spring","spring-boot","spring-security","spring-webflux"],"owner":{"account_id":15906218,"reputation":83,"user_id":11477360,"display_name":"Hassan Raza"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691103640,"creation_date":1691103640,"question_id":76832055,"body_markdown":"So I was experiencing a CORS error for the requests I was making from my react front end to my spring boot web flux back end. I intercept the requests in the backend and then extract some info from the requests using a filter and then the requests get authenticated. The security config is shown below. My question is that when I use a &#39;corsConfigurationSource&#39; bean the CORS error is fixed and all my requests get completed as expected but when I use the \r\n&#39;corsConfigurer&#39; bean I get the CORs error that I mentioned earlier. What is the difference between the two? I am applying the same filters to both configurations.\r\n\r\n```\r\n@Bean\r\n    public SecurityWebFilterChain securityWebFilterChain(ServerHttpSecurity http) {\r\n        return http\r\n                .cors().and()\r\n                .addFilterAt(jwtTokenFilter, SecurityWebFiltersOrder.AUTHENTICATION)\r\n                .authorizeExchange()\r\n                .pathMatchers(&quot;/**&quot;).hasAuthority(&quot;read:Orders&quot;)\r\n                .and().oauth2ResourceServer()            .jwt().jwtAuthenticationConverter(jwtAuthenticationConverter()).and().and().build();\r\n    }\r\n```\r\n\r\nThe corsCinfigurationSource bean is shown below:\r\n\r\n```\r\n  @Bean\r\n    public CorsConfigurationSource corsConfigurationSource() {\r\n        CorsConfiguration configuration = new CorsConfiguration();\r\n        configuration.setAllowedOrigins(Arrays.asList(&quot;http://localhost:3000&quot;));\r\n        configuration.setAllowedMethods(Arrays.asList(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;PATCH&quot;, &quot;DELETE&quot;, &quot;OPTIONS&quot;));\r\n        configuration.setAllowedHeaders(Arrays.asList(&quot;authorization&quot;, &quot;content-type&quot;, &quot;x-auth-token&quot;));\r\n        configuration.setAllowCredentials(true);\r\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n        source.registerCorsConfiguration(&quot;/**&quot;, configuration);\r\n        return source;\r\n    }\r\n\r\n```\r\n\r\nThe corsConfigurer bean is shown below:\r\n```\r\n\t@Bean\r\n\tpublic WebFluxConfigurer corsConfigurer(){\r\n\t\treturn new WebFluxConfigurer() {\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void addCorsMappings(CorsRegistry registry){\r\n\t\t\t\tregistry\r\n\t\t\t\t\t\t.addMapping(&quot;/**&quot;)\r\n\t\t\t\t\t\t.allowedOrigins(&quot;http://localhost:3000&quot;)\r\n\t\t\t\t\t\t.allowCredentials(true)\r\n\t\t\t\t\t\t.allowedHeaders(&quot;AUTHORIZATION&quot;, &quot;CONTENT-TYPE&quot;, &quot;X-AUTH-TOKEN&quot;)\r\n\t\t\t\t\t\t.allowedMethods(&quot;GET&quot;,&quot;POST&quot;,&quot;OPTIONS&quot;);\r\n\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n```\r\n\r\nAny help would be appreciated.\r\n","title":"Cors error works with one configuration but not with other. Why?","body":"<p>So I was experiencing a CORS error for the requests I was making from my react front end to my spring boot web flux back end. I intercept the requests in the backend and then extract some info from the requests using a filter and then the requests get authenticated. The security config is shown below. My question is that when I use a 'corsConfigurationSource' bean the CORS error is fixed and all my requests get completed as expected but when I use the\n'corsConfigurer' bean I get the CORs error that I mentioned earlier. What is the difference between the two? I am applying the same filters to both configurations.</p>\n<pre><code>@Bean\n    public SecurityWebFilterChain securityWebFilterChain(ServerHttpSecurity http) {\n        return http\n                .cors().and()\n                .addFilterAt(jwtTokenFilter, SecurityWebFiltersOrder.AUTHENTICATION)\n                .authorizeExchange()\n                .pathMatchers(&quot;/**&quot;).hasAuthority(&quot;read:Orders&quot;)\n                .and().oauth2ResourceServer()            .jwt().jwtAuthenticationConverter(jwtAuthenticationConverter()).and().and().build();\n    }\n</code></pre>\n<p>The corsCinfigurationSource bean is shown below:</p>\n<pre><code>  @Bean\n    public CorsConfigurationSource corsConfigurationSource() {\n        CorsConfiguration configuration = new CorsConfiguration();\n        configuration.setAllowedOrigins(Arrays.asList(&quot;http://localhost:3000&quot;));\n        configuration.setAllowedMethods(Arrays.asList(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;PATCH&quot;, &quot;DELETE&quot;, &quot;OPTIONS&quot;));\n        configuration.setAllowedHeaders(Arrays.asList(&quot;authorization&quot;, &quot;content-type&quot;, &quot;x-auth-token&quot;));\n        configuration.setAllowCredentials(true);\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        source.registerCorsConfiguration(&quot;/**&quot;, configuration);\n        return source;\n    }\n\n</code></pre>\n<p>The corsConfigurer bean is shown below:</p>\n<pre><code>    @Bean\n    public WebFluxConfigurer corsConfigurer(){\n        return new WebFluxConfigurer() {\n\n            @Override\n            public void addCorsMappings(CorsRegistry registry){\n                registry\n                        .addMapping(&quot;/**&quot;)\n                        .allowedOrigins(&quot;http://localhost:3000&quot;)\n                        .allowCredentials(true)\n                        .allowedHeaders(&quot;AUTHORIZATION&quot;, &quot;CONTENT-TYPE&quot;, &quot;X-AUTH-TOKEN&quot;)\n                        .allowedMethods(&quot;GET&quot;,&quot;POST&quot;,&quot;OPTIONS&quot;);\n\n            }\n        };\n    }\n</code></pre>\n<p>Any help would be appreciated.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1652937343,"post_id":72293988,"comment_id":127729506,"body_markdown":"Sorry, that does not make sense. Say that you have calculated a difference of a minute so got 60000 milliseconds. This number does not imply any *actual date which was calculated*, neither in 1970 nor in 2022. And a `LocalDateTime` is for a date and time of day (not that often useful), not for an amount of time. For your difference one would use `java.time.Duration`.","body":"Sorry, that does not make sense. Say that you have calculated a difference of a minute so got 60000 milliseconds. This number does not imply any <i>actual date which was calculated</i>, neither in 1970 nor in 2022. And a <code>LocalDateTime</code> is for a date and time of day (not that often useful), not for an amount of time. For your difference one would use <code>java.time.Duration</code>."}],"answers":[{"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1652919821,"post_id":72296313,"comment_id":127726720,"body_markdown":"If a combined period with duration is truly needed, you’ll find one in the [*ThreeTen-Extra*](https://www.threeten.org/threeten-extra/) with its [`PeriodDuration`](https://www.threeten.org/threeten-extra/apidocs/org.threeten.extra/org/threeten/extra/PeriodDuration.html). But, as mentioned in Answer, combining those two concepts tends to be problematic in practice.","body":"If a combined period with duration is truly needed, you’ll find one in the <a href=\"https://www.threeten.org/threeten-extra/\" rel=\"nofollow noreferrer\"><i>ThreeTen-Extra</i></a> with its <a href=\"https://www.threeten.org/threeten-extra/apidocs/org.threeten.extra/org/threeten/extra/PeriodDuration.html\" rel=\"nofollow noreferrer\"><code>PeriodDuration</code></a>. But, as mentioned in Answer, combining those two concepts tends to be problematic in practice."}],"tags":[],"owner":{"account_id":11795065,"reputation":8307,"user_id":8629960,"display_name":"Kirill Simonov"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1691103639,"creation_date":1652910009,"answer_id":72296313,"question_id":72293988,"body_markdown":"`java.time.LocalDateTime` was not created to represent a difference between two dates. There are `java.time.Period` and `java.time.Duration` that should be used for it ([see Oracle docs][1]). \r\n\r\n&gt; A `Duration` measures an amount of time using time-based values\r\n&gt; (seconds, nanoseconds). A `Period` uses date-based values (years,\r\n&gt; months, days).\r\n\r\nThey both have a convenient `.between()` method, which you could use like this:\r\n\r\n    Duration diff = Duration.between(ZonedDateTime.now(ZoneId.systemDefault()), endTime);\r\n\r\nThe reason why there are no combined classes to represent duration as years, months, days AND hours, minutes, seconds is that a day could be 24 or 25 hours depending on Daylight saving time. So \r\n\r\n&gt;  A `Duration` of one day is exactly 24 hours long. A `Period` of one day, when added to a `ZonedDateTime`, may vary according to the time zone. For example, if it occurs on the first or last day of daylight saving time.\r\n\r\nI would suggest you to use the `Duration` class and if you want to pretty print it, you have to do it manually like this (thanks to [this answer][2]):\r\n\r\n    System.out.println(diff.toString()\r\n                .substring(2)\r\n                .replaceAll(&quot;(\\\\d[HMS])(?!$)&quot;, &quot;$1 &quot;)\r\n                .toLowerCase());\r\n\r\nThis will print something like `370h 24m 14.645s`. If you want days, months and years, you would have to calculate them from seconds and print.\r\n\r\nIf you&#39;re using Java 9+ there are methods to get number of days, hours, minutes and seconds in the duration:\r\n\r\n    System.out.println(String.format(&quot;%sd %sh %sm %ss&quot;, \r\n                diff.toDaysPart(), \r\n                diff.toHoursPart(), \r\n                diff.toMinutesPart(), \r\n                diff.toSecondsPart()));\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/datetime/iso/period.html\r\n  [2]: https://stackoverflow.com/a/40487511/8629960","title":"date difference in millis to localdatetime","body":"<p><code>java.time.LocalDateTime</code> was not created to represent a difference between two dates. There are <code>java.time.Period</code> and <code>java.time.Duration</code> that should be used for it (<a href=\"https://docs.oracle.com/javase/tutorial/datetime/iso/period.html\" rel=\"nofollow noreferrer\">see Oracle docs</a>).</p>\n<blockquote>\n<p>A <code>Duration</code> measures an amount of time using time-based values\n(seconds, nanoseconds). A <code>Period</code> uses date-based values (years,\nmonths, days).</p>\n</blockquote>\n<p>They both have a convenient <code>.between()</code> method, which you could use like this:</p>\n<pre><code>Duration diff = Duration.between(ZonedDateTime.now(ZoneId.systemDefault()), endTime);\n</code></pre>\n<p>The reason why there are no combined classes to represent duration as years, months, days AND hours, minutes, seconds is that a day could be 24 or 25 hours depending on Daylight saving time. So</p>\n<blockquote>\n<p>A <code>Duration</code> of one day is exactly 24 hours long. A <code>Period</code> of one day, when added to a <code>ZonedDateTime</code>, may vary according to the time zone. For example, if it occurs on the first or last day of daylight saving time.</p>\n</blockquote>\n<p>I would suggest you to use the <code>Duration</code> class and if you want to pretty print it, you have to do it manually like this (thanks to <a href=\"https://stackoverflow.com/a/40487511/8629960\">this answer</a>):</p>\n<pre><code>System.out.println(diff.toString()\n            .substring(2)\n            .replaceAll(&quot;(\\\\d[HMS])(?!$)&quot;, &quot;$1 &quot;)\n            .toLowerCase());\n</code></pre>\n<p>This will print something like <code>370h 24m 14.645s</code>. If you want days, months and years, you would have to calculate them from seconds and print.</p>\n<p>If you're using Java 9+ there are methods to get number of days, hours, minutes and seconds in the duration:</p>\n<pre><code>System.out.println(String.format(&quot;%sd %sh %sm %ss&quot;, \n            diff.toDaysPart(), \n            diff.toHoursPart(), \n            diff.toMinutesPart(), \n            diff.toSecondsPart()));\n</code></pre>\n"}],"owner":{"account_id":6253582,"reputation":3528,"user_id":4862911,"accept_rate":76,"display_name":"aligur"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":72296313,"answer_count":1,"score":1,"last_activity_date":1691103639,"creation_date":1652897079,"question_id":72293988,"body_markdown":"I need to print date again after i calculated difference between two dates. \r\n\r\nhere is what I tried:\r\n\r\n     fun getRemainingTime(endTime: ZonedDateTime): Long {\r\n            val currentTime = ZonedDateTime.now(ZoneId.systemDefault())\r\n    \r\n            return dateUtils.durationDifference(currentTime, endTime).toMillis()\r\n        }\r\n\r\nbut when I try to convert it to localdate like below again it starts with `1970`. So I need to actual date which was calculated. **for example: difference between `2022-10-10` and `2022-10-12` should be `2022-10-02`**\r\n\r\n    LocalDateTime.ofInstant(Instant.ofEpochMilli(remainingDurationInMillis), ZoneId.systemDefault())\r\n\r\n\r\n\r\n\r\n","title":"date difference in millis to localdatetime","body":"<p>I need to print date again after i calculated difference between two dates.</p>\n<p>here is what I tried:</p>\n<pre><code> fun getRemainingTime(endTime: ZonedDateTime): Long {\n        val currentTime = ZonedDateTime.now(ZoneId.systemDefault())\n\n        return dateUtils.durationDifference(currentTime, endTime).toMillis()\n    }\n</code></pre>\n<p>but when I try to convert it to localdate like below again it starts with <code>1970</code>. So I need to actual date which was calculated. <strong>for example: difference between <code>2022-10-10</code> and <code>2022-10-12</code> should be <code>2022-10-02</code></strong></p>\n<pre><code>LocalDateTime.ofInstant(Instant.ofEpochMilli(remainingDurationInMillis), ZoneId.systemDefault())\n</code></pre>\n"},{"tags":["java","java.util.scanner","inputmismatchexception"],"comments":[{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":2,"creation_date":1691101865,"post_id":76831931,"comment_id":135450295,"body_markdown":"Remember: if you get an error, [show the entire error](/help/how-to-ask). Also remember to show the [mcve] for your code, because right now your while loop isn&#39;t even closed properly, and there&#39;s no public main around it, nor a class around that. And finally, look at your post after you submit it, and then [edit]  it to fix things like indentation being wildly off =)","body":"Remember: if you get an error, <a href=\"/help/how-to-ask\">show the entire error</a>. Also remember to show the <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> for your code, because right now your while loop isn&#39;t even closed properly, and there&#39;s no public main around it, nor a class around that. And finally, look at your post after you submit it, and then <a href=\"https://stackoverflow.com/posts/76831931/edit\">edit</a>  it to fix things like indentation being wildly off =)"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1691102389,"post_id":76831931,"comment_id":135450347,"body_markdown":"Guessing as we have partial code, but in place of *int age = sc.nextInt();* try `int age = sc.nextInt();sc.nextLine();`","body":"Guessing as we have partial code, but in place of <i>int age = sc.nextInt();</i> try <code>int age = sc.nextInt();sc.nextLine();</code>"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1691104006,"post_id":76831931,"comment_id":135450499,"body_markdown":"With this code yo need to enter the name and the age on separate lines. Is that what you&#39;re doing? and is that the intent? If not, change `String name = sc.nextLine();` to `String name = sc.next();`.","body":"With this code yo need to enter the name and the age on separate lines. Is that what you&#39;re doing? and is that the intent? If not, change <code>String name = sc.nextLine();</code> to <code>String name = sc.next();</code>."},{"owner":{"account_id":29155784,"reputation":3,"user_id":22335595,"display_name":"Vincent"},"score":0,"creation_date":1691108137,"post_id":76831931,"comment_id":135450893,"body_markdown":"Thanks for all your answers. So the complet error is : Exception in thread &quot;main&quot; java.util.InputMismatchException\n\tat java.base/java.util.Scanner.throwFor(Scanner.java:947)\n\tat java.base/java.util.Scanner.next(Scanner.java:1602)\n\tat java.base/java.util.Scanner.nextByte(Scanner.java:2011)\n\tat java.base/java.util.Scanner.nextByte(Scanner.java:1965)\n\tat Main.main(Main.java:20)","body":"Thanks for all your answers. So the complet error is : Exception in thread &quot;main&quot; java.util.InputMismatchException \tat java.base/java.util.Scanner.throwFor(Scanner.java:947) \tat java.base/java.util.Scanner.next(Scanner.java:1602) \tat java.base/java.util.Scanner.nextByte(Scanner.java:2011) \tat java.base/java.util.Scanner.nextByte(Scanner.java:1965) \tat Main.main(Main.java:20)"},{"owner":{"account_id":29155784,"reputation":3,"user_id":22335595,"display_name":"Vincent"},"score":0,"creation_date":1691108642,"post_id":76831931,"comment_id":135450925,"body_markdown":"It works with sc.next() but I cant add big names ( name + surname). I will do with next(). Thank you all.","body":"It works with sc.next() but I cant add big names ( name + surname). I will do with next(). Thank you all."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1691111597,"post_id":76831931,"comment_id":135451117,"body_markdown":"You can&#39;t add space-separated names. If you want first name and surname you will need two variables and two `next()` calls.","body":"You can&#39;t add space-separated names. If you want first name and surname you will need two variables and two <code>next()</code> calls."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1691111632,"post_id":76831931,"comment_id":135451121,"body_markdown":"@OldDogProgrammer No it doesn&#39;t. Look again.","body":"@OldDogProgrammer No it doesn&#39;t. Look again."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691136376,"post_id":76831931,"comment_id":135453784,"body_markdown":"I missed the first one so: `int  numPeople = sc.nextInt();sc.nextLine();` but it&#39;s really not helping that you still haven&#39;t at least closed the loop as a &#39;minrep&#39;","body":"I missed the first one so: <code>int  numPeople = sc.nextInt();sc.nextLine();</code> but it&#39;s really not helping that you still haven&#39;t at least closed the loop as a &#39;minrep&#39;"}],"owner":{"account_id":29155784,"reputation":3,"user_id":22335595,"display_name":"Vincent"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691103120,"creation_date":1691101574,"question_id":76831931,"body_markdown":"what is the problem with my code and why do I have the InputMismatchException error every time I type the name in the console ? \r\n\r\n\r\n\r\n```\r\nScanner sc = new Scanner(System.in);\r\n        System.out.println(&quot;How many People are there ? (employee and students included)&quot;);\r\n\r\n        int  numPeople = sc.nextInt();\r\n        Person[] personArray = new Person[numPeople];\r\n        Student[] studentsArray = new Student[numPeople];\r\n        Employee[] employeesArray = new Employee[numPeople];\r\n\r\n        int i=0;\r\n\r\n        while(i &lt; numPeople) {\r\n            System.out.println(&quot;Please enter the name and age of the person&quot;);\r\n            String name = sc.nextLine();\r\n            int age = sc.nextInt();sc.nextLine();\r\n            Person person = new Person(name, age);\r\n            personArray[i] = person;\r\n            i++;\r\n```\r\n","title":"I keep having InputMismatchException error every time I type the name of the person in the Scanner?","body":"<p>what is the problem with my code and why do I have the InputMismatchException error every time I type the name in the console ?</p>\n<pre><code>Scanner sc = new Scanner(System.in);\n        System.out.println(&quot;How many People are there ? (employee and students included)&quot;);\n\n        int  numPeople = sc.nextInt();\n        Person[] personArray = new Person[numPeople];\n        Student[] studentsArray = new Student[numPeople];\n        Employee[] employeesArray = new Employee[numPeople];\n\n        int i=0;\n\n        while(i &lt; numPeople) {\n            System.out.println(&quot;Please enter the name and age of the person&quot;);\n            String name = sc.nextLine();\n            int age = sc.nextInt();sc.nextLine();\n            Person person = new Person(name, age);\n            personArray[i] = person;\n            i++;\n</code></pre>\n"},{"tags":["java","serialization","deserialization"],"comments":[{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1691096830,"post_id":76831379,"comment_id":135449575,"body_markdown":"it seems to be an incompatible chabge: https://docs.oracle.com/javase/8/docs/platform/serialization/spec/version.html#a6678 However, this is different if you have writeObject/readObject methods. Also note that you first need to serialize it, then do tze change and then deserialize it in order to run into issues.","body":"it seems to be an incompatible chabge: <a href=\"https://docs.oracle.com/javase/8/docs/platform/serialization/spec/version.html#a6678\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/platform/serialization/spec/&hellip;</a> However, this is different if you have writeObject/readObject methods. Also note that you first need to serialize it, then do tze change and then deserialize it in order to run into issues."},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1691096909,"post_id":76831379,"comment_id":135449589,"body_markdown":"Can you show how you tested it? You might also want to check out https://stackoverflow.com/a/63357483/10871900","body":"Can you show how you tested it? You might also want to check out <a href=\"https://stackoverflow.com/a/63357483/10871900\">stackoverflow.com/a/63357483/10871900</a>"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1691103032,"post_id":76831379,"comment_id":135450404,"body_markdown":"It is an incompatible change in that &#39;the guarantee of interoperability cannot be maintained&#39; in terms of the application. However in terms of the Object Serialization Protocol it will not cause a `SerializationException` as long as you preserve the initial `serialVersionUID`.","body":"It is an incompatible change in that &#39;the guarantee of interoperability cannot be maintained&#39; in terms of the application. However in terms of the Object Serialization Protocol it will not cause a <code>SerializationException</code> as long as you preserve the initial <code>serialVersionUID</code>."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1691136298,"post_id":76831379,"comment_id":135453763,"body_markdown":"There are two types of incompatibility: backwards incompatibility means that the new version of the code fails to deserialise data saved by the old version. This is almost always important to solve. Forward incompatibility means that the _old_ version of the code fails to deserialise data saved by the _new_ version. This isn&#39;t a problem for all applications, but it is in this case. When doing a zero-downtime deployment, there will be a period of time when old and new versions are both running side by side.","body":"There are two types of incompatibility: backwards incompatibility means that the new version of the code fails to deserialise data saved by the old version. This is almost always important to solve. Forward incompatibility means that the <i>old</i> version of the code fails to deserialise data saved by the <i>new</i> version. This isn&#39;t a problem for all applications, but it is in this case. When doing a zero-downtime deployment, there will be a period of time when old and new versions are both running side by side."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1691136377,"post_id":76831379,"comment_id":135453785,"body_markdown":"It&#39;s possible in that case for the new version to save a session that then needs to be read by another server in the load balancer running the old version of the code. If the deployment rolls through all servers quickly enough, this might be unlikely, but still possible. If you have any kind of pause during the deployment process, it might not be unlikely at all.","body":"It&#39;s possible in that case for the new version to save a session that then needs to be read by another server in the load balancer running the old version of the code. If the deployment rolls through all servers quickly enough, this might be unlikely, but still possible. If you have any kind of pause during the deployment process, it might not be unlikely at all."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1691136597,"post_id":76831379,"comment_id":135453829,"body_markdown":"Solving it requires deploying in two stages. In the first stage, you need to deploy a version of the code that still has the field, but can tolerate it being missing without causing any problems. Once all of the servers are running that version of the code, you can deploy a version that removes the field.","body":"Solving it requires deploying in two stages. In the first stage, you need to deploy a version of the code that still has the field, but can tolerate it being missing without causing any problems. Once all of the servers are running that version of the code, you can deploy a version that removes the field."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1691136823,"post_id":76831379,"comment_id":135453866,"body_markdown":"@TimMoore It is *not* a problem in this case. Adding or deleting a field is benign from the serialization point of view. If the field isn&#39;t present in the stream but it is in the class, it is set to null, and if it is present in the stream but not in the class it is ignored.","body":"@TimMoore It is <i>not</i> a problem in this case. Adding or deleting a field is benign from the serialization point of view. If the field isn&#39;t present in the stream but it is in the class, it is set to null, and if it is present in the stream but not in the class it is ignored."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1691138394,"post_id":76831379,"comment_id":135454120,"body_markdown":"@user207421 did you read the link in the question? “When the stream is read by an earlier class, the value of the field will be set to the default value because no value is available in the stream. However, this default value may adversely impair the ability of the earlier version to fulfill its contract.” So it depends on how the class actually uses the field. It might assume that it’s not null because it was a required constructor parameter.","body":"@user207421 did you read the link in the question? “When the stream is read by an earlier class, the value of the field will be set to the default value because no value is available in the stream. However, this default value may adversely impair the ability of the earlier version to fulfill its contract.” So it depends on how the class actually uses the field. It might assume that it’s not null because it was a required constructor parameter."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1691138483,"post_id":76831379,"comment_id":135454131,"body_markdown":"We haven’t seen the class, so we don’t know if that’s the case here. My earlier comment just meant that forward compatibility in general is important for zero-downtime deployments.","body":"We haven’t seen the class, so we don’t know if that’s the case here. My earlier comment just meant that forward compatibility in general is important for zero-downtime deployments."},{"owner":{"account_id":16306907,"reputation":117,"user_id":11776660,"display_name":"dssof"},"score":0,"creation_date":1691155824,"post_id":76831379,"comment_id":135457519,"body_markdown":"@TimMoore in my case the most likely situation is new version of the code reading old serialized version. We use sticky sessions so, when we do a deployment, the balancer moves users to a another server (with old code) and after the deployment the users go back to the previous server. So in this case new code has old version of the session.","body":"@TimMoore in my case the most likely situation is new version of the code reading old serialized version. We use sticky sessions so, when we do a deployment, the balancer moves users to a another server (with old code) and after the deployment the users go back to the previous server. So in this case new code has old version of the session."},{"owner":{"account_id":16306907,"reputation":117,"user_id":11776660,"display_name":"dssof"},"score":0,"creation_date":1691155895,"post_id":76831379,"comment_id":135457539,"body_markdown":"@TimMoore also, one of my doubts is, in this case, is java going to throw an incompatible class error?","body":"@TimMoore also, one of my doubts is, in this case, is java going to throw an incompatible class error?"},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1691161539,"post_id":76831379,"comment_id":135458957,"body_markdown":"No, I don’t think it will throw an incompatible class error. At least, that’s what the answer to the question linked as a duplicate says.","body":"No, I don’t think it will throw an incompatible class error. At least, that’s what the answer to the question linked as a duplicate says."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1691193072,"post_id":76831379,"comment_id":135463796,"body_markdown":"@TimMoore I&#39;ve addressed that already, and I first read the words you mention in 1997. The change is stream-compatible but *possibly* not application-compatible. We don&#39;t know that. You don&#39;t know that. You&#39;re not in a position to say it is a problem in this case.","body":"@TimMoore I&#39;ve addressed that already, and I first read the words you mention in 1997. The change is stream-compatible but <i>possibly</i> not application-compatible. We don&#39;t know that. You don&#39;t know that. You&#39;re not in a position to say it is a problem in this case."}],"owner":{"account_id":16306907,"reputation":117,"user_id":11776660,"display_name":"dssof"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1691131190,"answer_count":0,"score":0,"last_activity_date":1691103045,"creation_date":1691093754,"question_id":76831379,"body_markdown":"I &#39;m trying to use Redis to store HTTP sessions for load balancing. The idea is to be able to deploy with zero downtime, for that I need to store the session in Redis so that users won&#39;t lose their session when they go from a server to another.\r\n\r\nTo do this, I need to make every class in the session serializable. I&#39;ve been reading about serialization and found out that there are some incompatible changes (source: https://docs.oracle.com/javase/8/docs/platform/serialization/spec/version.html#a6678).\r\n\r\nDuring my tests, I deleted a field from a class and surprisingly didn&#39;t run into any issues with serialization. But, I&#39;m not entirely sure if my test is foolproof.\r\n\r\nSo now, I&#39;m wondering if there&#39;s a way or some strategy to make those incompatible changes work properly and if this is necessary.","title":"Java serialization incompatible changes General August 3, 2023","body":"<p>I 'm trying to use Redis to store HTTP sessions for load balancing. The idea is to be able to deploy with zero downtime, for that I need to store the session in Redis so that users won't lose their session when they go from a server to another.</p>\n<p>To do this, I need to make every class in the session serializable. I've been reading about serialization and found out that there are some incompatible changes (source: <a href=\"https://docs.oracle.com/javase/8/docs/platform/serialization/spec/version.html#a6678\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/platform/serialization/spec/version.html#a6678</a>).</p>\n<p>During my tests, I deleted a field from a class and surprisingly didn't run into any issues with serialization. But, I'm not entirely sure if my test is foolproof.</p>\n<p>So now, I'm wondering if there's a way or some strategy to make those incompatible changes work properly and if this is necessary.</p>\n"},{"tags":["java","unit-testing","jdbc","mocking","dao"],"answers":[{"comments":[{"owner":{"account_id":1519182,"reputation":375,"user_id":1419375,"accept_rate":56,"display_name":"yaromir"},"score":0,"creation_date":1418225481,"post_id":27404661,"comment_id":43254253,"body_markdown":"Oh, sorry. That wasn&#39;t clear enough. Code under test is my Struts Action that&#39;s why i need to mock `UserDao`.","body":"Oh, sorry. That wasn&#39;t clear enough. Code under test is my Struts Action that&#39;s why i need to mock <code>UserDao</code>."},{"owner":{"account_id":1064245,"reputation":85256,"user_id":1065197,"accept_rate":88,"display_name":"Luiggi Mendoza"},"score":0,"creation_date":1418225588,"post_id":27404661,"comment_id":43254332,"body_markdown":"Then mock your interface to make it return the necessary data using a proper mock framework.","body":"Then mock your interface to make it return the necessary data using a proper mock framework."},{"owner":{"account_id":1519182,"reputation":375,"user_id":1419375,"accept_rate":56,"display_name":"yaromir"},"score":0,"creation_date":1418226189,"post_id":27404661,"comment_id":43254788,"body_markdown":"My problem is not in generating mock by interface, but in dispatching between real object and mock. Fabric and extracted interface should allow to make transparent to Action whether it receives real UserDaoImpl or UserDaoMock, but i&#39;m failing to implement such design. Main problem is that i need &quot;example&quot; of the object in fabric to be able to allocate another objects. If UserDao was singleton this would solve the problem but in this case interaction with the DB will be a bottleneck of the application.","body":"My problem is not in generating mock by interface, but in dispatching between real object and mock. Fabric and extracted interface should allow to make transparent to Action whether it receives real UserDaoImpl or UserDaoMock, but i&#39;m failing to implement such design. Main problem is that i need &quot;example&quot; of the object in fabric to be able to allocate another objects. If UserDao was singleton this would solve the problem but in this case interaction with the DB will be a bottleneck of the application."},{"owner":{"account_id":1064245,"reputation":85256,"user_id":1065197,"accept_rate":88,"display_name":"Luiggi Mendoza"},"score":0,"creation_date":1418226332,"post_id":27404661,"comment_id":43254884,"body_markdown":"@yaromir when using a proper mock framework (as stated 3 times now) you don&#39;t need to use this fabric **at all**. You will need only few lines of code to create an instance of `UserDaoImpl` where its methods return prepared data for testing purposes.","body":"@yaromir when using a proper mock framework (as stated 3 times now) you don&#39;t need to use this fabric <b>at all</b>. You will need only few lines of code to create an instance of <code>UserDaoImpl</code> where its methods return prepared data for testing purposes."},{"owner":{"account_id":1064245,"reputation":85256,"user_id":1065197,"accept_rate":88,"display_name":"Luiggi Mendoza"},"score":0,"creation_date":1418226395,"post_id":27404661,"comment_id":43254916,"body_markdown":"@yaromir also, your `UserDaoImpl` class **MUST NOT** (yes, remember it well) be a singleton.","body":"@yaromir also, your <code>UserDaoImpl</code> class <b>MUST NOT</b> (yes, remember it well) be a singleton."},{"owner":{"account_id":1064245,"reputation":85256,"user_id":1065197,"accept_rate":88,"display_name":"Luiggi Mendoza"},"score":0,"creation_date":1418226482,"post_id":27404661,"comment_id":43254965,"body_markdown":"@yaromir I could provide an example if you provide relevant piece of code of your struts action class.","body":"@yaromir I could provide an example if you provide relevant piece of code of your struts action class."},{"owner":{"account_id":1519182,"reputation":375,"user_id":1419375,"accept_rate":56,"display_name":"yaromir"},"score":0,"creation_date":1418226904,"post_id":27404661,"comment_id":43255260,"body_markdown":"Here is the [gist](https://gist.github.com/yaromir/e0a80e33da884e0820b2)\nThanks for your attention to the problem. :)","body":"Here is the <a href=\"https://gist.github.com/yaromir/e0a80e33da884e0820b2\" rel=\"nofollow noreferrer\">gist</a> Thanks for your attention to the problem. :)"}],"tags":[],"owner":{"account_id":1064245,"reputation":85256,"user_id":1065197,"accept_rate":88,"display_name":"Luiggi Mendoza"},"comment_count":7,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1418225020,"creation_date":1418225020,"answer_id":27404661,"question_id":27404514,"body_markdown":"Use a proper mock framework like PowerMock or EasyMock (or both) or Mockito and do concrete unit testing for the class implementation. Do not create a `UserDaoMock` class implementation because then you&#39;re not covering the code in `UseDaoImpl` class, which is one of the advantages of unit testing.\r\n","title":"Java. Mock data access object","body":"<p>Use a proper mock framework like PowerMock or EasyMock (or both) or Mockito and do concrete unit testing for the class implementation. Do not create a <code>UserDaoMock</code> class implementation because then you're not covering the code in <code>UseDaoImpl</code> class, which is one of the advantages of unit testing.</p>\n"},{"tags":[],"owner":{"account_id":42147,"reputation":16251,"user_id":2326914,"accept_rate":33,"display_name":"Rog&#233;rio"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1418237066,"creation_date":1418237066,"answer_id":27408528,"question_id":27404514,"body_markdown":"You can unit test the `LoginAction` class from the [gist](https://gist.github.com/yaromir/e0a80e33da884e0820b2) as shown in the following test, which uses the JMockit mocking library:\r\n\r\n    public class LoginTest\r\n    {\r\n        @Tested LoginAction action;\r\n        @Mocked ActionMapping mapping;\r\n        @Mocked HttpServletRequest request;\r\n        @Mocked HttpServletResponse response;\r\n        @Capturing UserDao userDao;\r\n\r\n        @Test\r\n        public void loginUser()\r\n        {\r\n            final String username = &quot;user&quot;;\r\n            final String password = &quot;password&quot;;\r\n            LoginForm form = new LoginForm();\r\n            form.setUsername(username);\r\n            form.setPassword(password);\r\n\r\n            final ActionForward afterLogin = new ActionForward(&quot;home&quot;);\r\n\r\n            new Expectations() {{\r\n                userDao.checkCredentials(username, password); result = true;\r\n                mapping.findForward(&quot;successful-login&quot;); result = afterLogin;\r\n            }};\r\n\r\n            ActionForward forwardTo = action.execute(mapping, form, request, response);\r\n\r\n            assertSame(forwardTo, afterLogin);\r\n            new Verifications() {{ userDao.terminate(true); }};\r\n        }\r\n    }\r\n","title":"Java. Mock data access object","body":"<p>You can unit test the <code>LoginAction</code> class from the <a href=\"https://gist.github.com/yaromir/e0a80e33da884e0820b2\" rel=\"nofollow\">gist</a> as shown in the following test, which uses the JMockit mocking library:</p>\n\n<pre><code>public class LoginTest\n{\n    @Tested LoginAction action;\n    @Mocked ActionMapping mapping;\n    @Mocked HttpServletRequest request;\n    @Mocked HttpServletResponse response;\n    @Capturing UserDao userDao;\n\n    @Test\n    public void loginUser()\n    {\n        final String username = \"user\";\n        final String password = \"password\";\n        LoginForm form = new LoginForm();\n        form.setUsername(username);\n        form.setPassword(password);\n\n        final ActionForward afterLogin = new ActionForward(\"home\");\n\n        new Expectations() {{\n            userDao.checkCredentials(username, password); result = true;\n            mapping.findForward(\"successful-login\"); result = afterLogin;\n        }};\n\n        ActionForward forwardTo = action.execute(mapping, form, request, response);\n\n        assertSame(forwardTo, afterLogin);\n        new Verifications() {{ userDao.terminate(true); }};\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":42147,"reputation":16251,"user_id":2326914,"accept_rate":33,"display_name":"Rog&#233;rio"},"score":0,"creation_date":1418308628,"post_id":27409302,"comment_id":43292556,"body_markdown":"A solution mocking `HelloWorldDAO` is simpler, in that it doesn&#39;t require the `newHelloWorldDAO` method in the class under test. Also, it would allow `HelloWorldAction` to be a `final` class.","body":"A solution mocking <code>HelloWorldDAO</code> is simpler, in that it doesn&#39;t require the <code>newHelloWorldDAO</code> method in the class under test. Also, it would allow <code>HelloWorldAction</code> to be a <code>final</code> class."},{"owner":{"account_id":1519182,"reputation":375,"user_id":1419375,"accept_rate":56,"display_name":"yaromir"},"score":0,"creation_date":1418311721,"post_id":27409302,"comment_id":43294514,"body_markdown":"Thanks a lot!!! Exactly what i&#39;ve been searching for.\n\n@Rog&#233;rio Mock can be created either by implementing same interface as real object or by subclassing from the real object. If you&#39;re choosing subclassing way you have to allow inheritance anyway.","body":"Thanks a lot!!! Exactly what i&#39;ve been searching for.  @Rog&#233;rio Mock can be created either by implementing same interface as real object or by subclassing from the real object. If you&#39;re choosing subclassing way you have to allow inheritance anyway."},{"owner":{"account_id":42147,"reputation":16251,"user_id":2326914,"accept_rate":33,"display_name":"Rog&#233;rio"},"score":0,"creation_date":1418312659,"post_id":27409302,"comment_id":43295209,"body_markdown":"@yaromir The kind of mocking I meant is completely general: it applies equally (using the same mocking API) to interfaces, abstract classes, concrete classes, final classes, enums, etc. In the case of mocking a class, no subclass needs to be created, as that is just one particular technique.","body":"@yaromir The kind of mocking I meant is completely general: it applies equally (using the same mocking API) to interfaces, abstract classes, concrete classes, final classes, enums, etc. In the case of mocking a class, no subclass needs to be created, as that is just one particular technique."},{"owner":{"account_id":1743794,"reputation":5519,"user_id":1594449,"display_name":"gknicker"},"score":0,"creation_date":1418326771,"post_id":27409302,"comment_id":43303217,"body_markdown":"@Rog&#233;rio Your points are legitimate, though it&#39;s difficult to contest the simplicity of this solution when a complete clear working example requires so few lines of code with no additional dependencies.","body":"@Rog&#233;rio Your points are legitimate, though it&#39;s difficult to contest the simplicity of this solution when a complete clear working example requires so few lines of code with no additional dependencies."},{"owner":{"account_id":42147,"reputation":16251,"user_id":2326914,"accept_rate":33,"display_name":"Rog&#233;rio"},"score":0,"creation_date":1418332224,"post_id":27409302,"comment_id":43306009,"body_markdown":"@gknicker Well, the solution I described requires *less* lines of code. It *is* simpler, according to the definition of simplicity described in the first paragraph of the second page in that [article](http://www.artima.com/intv/simplest.html).","body":"@gknicker Well, the solution I described requires <i>less</i> lines of code. It <i>is</i> simpler, according to the definition of simplicity described in the first paragraph of the second page in that <a href=\"http://www.artima.com/intv/simplest.html\" rel=\"nofollow noreferrer\">article</a>."}],"tags":[],"owner":{"account_id":1743794,"reputation":5519,"user_id":1594449,"display_name":"gknicker"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1418239836,"creation_date":1418239836,"answer_id":27409302,"question_id":27404514,"body_markdown":"What you need is [the simplest thing that could possibly work][1]. Here is a Hello World example for just that.\r\n\r\n&lt;!-- begin snippet --&gt;\r\n\r\n    /* DAO with a data access method */\r\n    public class HelloWorldDAO\r\n    {\r\n    \tpublic String findGreeting()\r\n    \t{\r\n    \t\treturn &quot;Hello from the database!&quot;;\r\n    \t}\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n&lt;!-- begin snippet --&gt;\r\n\r\n    /* Struts Action class with execute method */\r\n    public class HelloWorldAction implements Action\r\n    {\r\n    \tprivate String greeting;\r\n\r\n    \t/* Uses indirection for DAO construction */\r\n    \t@Override\r\n    \tpublic String execute() throws Exception {\r\n    \t\tHelloWorldDAO dao = newHelloWorldDAO();\r\n    \t\tsetGreeting(dao.findGreeting());\r\n    \t\treturn SUCCESS;\r\n    \t}\r\n\r\n    \t/* The simplest possible dependency injection */\r\n    \tprotected HelloWorldDAO newHelloWorldDAO() {\r\n    \t\treturn new HelloWorldDAO();\r\n    \t}\r\n\r\n    \tpublic String getGreeting() {\r\n    \t\treturn this.greeting;\r\n    \t}\r\n\r\n    \tpublic void setGreeting(String greeting) {\r\n    \t\tthis.greeting = greeting;\r\n    \t}\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n&lt;!-- begin snippet --&gt;\r\n\r\n    /* Unit tests for HelloWorldAction */\r\n    public class HelloWorldActionTest\r\n    {\r\n    \t@Test\r\n    \tpublic void testExecute() throws Exception\r\n    \t{\r\n    \t\tfinal String expectedGreeting = &quot;Hello Test!&quot;;\r\n    \t\tString expectedForward = &quot;success&quot;;\r\n\r\n    \t\tHelloWorldAction testAction = new HelloWorldAction() {\r\n    \t\t\t/* Override dependency injection method to substitute a mock impl */\r\n    \t\t\t@Override\r\n    \t\t\tprotected HelloWorldDAO newHelloWorldDAO()\r\n    \t\t\t{\r\n    \t\t\t\treturn new HelloWorldDAO() {\r\n    \t\t\t\t\t@Override\r\n    \t\t\t\t\tpublic String findGreeting()\r\n    \t\t\t\t\t{\r\n    \t\t\t\t\t\treturn expectedGreeting;\r\n    \t\t\t\t\t}\r\n    \t\t\t\t};\r\n    \t\t\t}\r\n    \t\t};\r\n\r\n    \t\tString actualForward = testAction.execute();\r\n    \t\tString actualGreeting = testAction.getGreeting();\r\n\r\n    \t\tassertEquals(&quot;forward&quot;, expectedForward, actualForward);\r\n    \t\tassertEquals(&quot;greeting&quot;, expectedGreeting, actualGreeting);\r\n    \t}\r\n    }\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n  [1]: http://www.artima.com/intv/simplest.html","title":"Java. Mock data access object","body":"<p>What you need is <a href=\"http://www.artima.com/intv/simplest.html\" rel=\"nofollow\">the simplest thing that could possibly work</a>. Here is a Hello World example for just that.</p>\n\n\n\n<pre><code>/* DAO with a data access method */\npublic class HelloWorldDAO\n{\n    public String findGreeting()\n    {\n        return \"Hello from the database!\";\n    }\n}\n</code></pre>\n\n\n\n\n\n<pre><code>/* Struts Action class with execute method */\npublic class HelloWorldAction implements Action\n{\n    private String greeting;\n\n    /* Uses indirection for DAO construction */\n    @Override\n    public String execute() throws Exception {\n        HelloWorldDAO dao = newHelloWorldDAO();\n        setGreeting(dao.findGreeting());\n        return SUCCESS;\n    }\n\n    /* The simplest possible dependency injection */\n    protected HelloWorldDAO newHelloWorldDAO() {\n        return new HelloWorldDAO();\n    }\n\n    public String getGreeting() {\n        return this.greeting;\n    }\n\n    public void setGreeting(String greeting) {\n        this.greeting = greeting;\n    }\n}\n</code></pre>\n\n\n\n\n\n<pre><code>/* Unit tests for HelloWorldAction */\npublic class HelloWorldActionTest\n{\n    @Test\n    public void testExecute() throws Exception\n    {\n        final String expectedGreeting = \"Hello Test!\";\n        String expectedForward = \"success\";\n\n        HelloWorldAction testAction = new HelloWorldAction() {\n            /* Override dependency injection method to substitute a mock impl */\n            @Override\n            protected HelloWorldDAO newHelloWorldDAO()\n            {\n                return new HelloWorldDAO() {\n                    @Override\n                    public String findGreeting()\n                    {\n                        return expectedGreeting;\n                    }\n                };\n            }\n        };\n\n        String actualForward = testAction.execute();\n        String actualGreeting = testAction.getGreeting();\n\n        assertEquals(\"forward\", expectedForward, actualForward);\n        assertEquals(\"greeting\", expectedGreeting, actualGreeting);\n    }\n}\n</code></pre>\n\n\n"}],"owner":{"account_id":1519182,"reputation":375,"user_id":1419375,"accept_rate":56,"display_name":"yaromir"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2562,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":27409302,"answer_count":3,"score":0,"last_activity_date":1691102317,"creation_date":1418224563,"question_id":27404514,"body_markdown":"I&#39;ve encountered problem with mocking data access logic.\r\n\r\nI&#39;m developing web application using JavaEE, Struts and my custom data access logic. In this application Struts Action operates with UserDao to retrieve User objects. Lifecycle of the UserDao object is tied to the JDBC transaction. Idea is that when Action creates UserDao object it starts JDBC transaction (necessary JDBC stuff is stored inside UserDao object), all invocations of UserDao methods operate in single JDBC transaction and then Action terminates UserDao object finishing transaction (with either commit or rollback).\r\n\r\nThe problem is that during tests of the Actions i need to mock this UserDao to make it return User objects with necessary test data.\r\n\r\nThe only solution i found so far is horrible. I&#39;ve made following: splitted UserDao into UserDao interface and UseDaoImpl class that implements it. This interface will also be implemented by UserDaoMock that will be returning necessary test data. Next i need some factory that will return real UserDao (UserDaoImpl) in production run and mock (UserDaoMock) in test run. This factory should not depend from UserDaoMock type to make production code of the application independent from mock .class file. This results into horrible design.\r\n\r\nShortcomings:\r\n\r\nIn factory:\r\n\r\n - I need an instance of UserDao inside factory just to be able to call `instantiate` method (which is in fact copy constructor, but i need it to be a method to be able to use polymorphism to choose between UserDaoImpl or UserDaoMock) to create another object of UserDao that will be associated with transaction (depending on runtime type it will be `instantiate` method of either UserDaoImpl or UserDaoMock).\r\n\r\n    public class UserDaoFactory {\r\n\r\n        private static UserDaoFactory instance;\r\n        private UserDao exampleUserDao;\r\n\r\n        public static UserDaoFactory getInstance() {\r\n            if(instance == null) {\r\n                instance = new UserDaoFactory();\r\n                // By default we initialize factory with example of real UserDao.\r\n                // In test will be set to example of UserDaoMock with setExampleUserDao method.\r\n                instance.setExampleUserDao(new UserDaoImpl(true));\r\n            }\r\n            return instance;\r\n        }\r\n\r\n        public UserDao getUserDao() {\r\n            return exampleUserDao.instantiate(true);\r\n        }\r\n\r\n        public void setExampleUserDao(UserDao userDao) {\r\n            this.exampleUserDao = userDao;\r\n        }\r\n\r\n   }\r\n\r\nIn UserDao:\r\n\r\n- I need both `instantiate` method (which in fact is copy constructor).\r\n- Despite that i also need public constructor to initialize factory with example.\r\n- Constructor should have parameter that tells whether it is example or not (whether to start transaction or not).\r\n\r\n        public final class UserDaoImpl implements UserDao {\r\n\r\n            private DataSource ds;\r\n            private Connection conn;\r\n\r\n            public UserDao instantiate(boolean startTransaction) {\r\n                if(startTransaction) {\r\n                    return new UserDaoImpl(true);\r\n                } else {\r\n                    return new UserDaoImpl(false);\r\n                }\r\n            }\r\n\r\n            public UserDaoImpl(boolean initiate) {\r\n                if(initiate) {\r\n                    // DB connection initialization and start of the transaction\r\n                } else {\r\n                    new UserDaoImpl();\r\n                }\r\n            }\r\n\r\n            private UserDaoImpl() {\r\n            }\r\n\r\n            @Override\r\n            public void terminate(boolean commit) {\r\n                // End of the transaction and DB connection termination\r\n            }\r\n\r\n            // Other interface methods implementation ommited\r\n\r\n        }\r\n\r\nIs there a way to make proper design for testability in this case?\r\n\r\nOr, if not, maybe the cause of the problem is that i decided to tie UserDao lifecycle to JDBC transaction? What is possible alternatives? To make UserDao singleton? Won&#39;t this be an application bottleneck if all DB interaction will be done via single object.\r\n\r\nOr, can you suggest another data access pattern that is more easy to mock?\r\n\r\nPlease, help. It is the most horrible design i did in my life.\r\n\r\nThanks in advance.\r\n","title":"Java. Mock data access object","body":"<p>I've encountered problem with mocking data access logic.</p>\n<p>I'm developing web application using JavaEE, Struts and my custom data access logic. In this application Struts Action operates with UserDao to retrieve User objects. Lifecycle of the UserDao object is tied to the JDBC transaction. Idea is that when Action creates UserDao object it starts JDBC transaction (necessary JDBC stuff is stored inside UserDao object), all invocations of UserDao methods operate in single JDBC transaction and then Action terminates UserDao object finishing transaction (with either commit or rollback).</p>\n<p>The problem is that during tests of the Actions i need to mock this UserDao to make it return User objects with necessary test data.</p>\n<p>The only solution i found so far is horrible. I've made following: splitted UserDao into UserDao interface and UseDaoImpl class that implements it. This interface will also be implemented by UserDaoMock that will be returning necessary test data. Next i need some factory that will return real UserDao (UserDaoImpl) in production run and mock (UserDaoMock) in test run. This factory should not depend from UserDaoMock type to make production code of the application independent from mock .class file. This results into horrible design.</p>\n<p>Shortcomings:</p>\n<p>In factory:</p>\n<ul>\n<li><p>I need an instance of UserDao inside factory just to be able to call <code>instantiate</code> method (which is in fact copy constructor, but i need it to be a method to be able to use polymorphism to choose between UserDaoImpl or UserDaoMock) to create another object of UserDao that will be associated with transaction (depending on runtime type it will be <code>instantiate</code> method of either UserDaoImpl or UserDaoMock).</p>\n<p>public class UserDaoFactory {</p>\n<pre><code> private static UserDaoFactory instance;\n private UserDao exampleUserDao;\n\n public static UserDaoFactory getInstance() {\n     if(instance == null) {\n         instance = new UserDaoFactory();\n         // By default we initialize factory with example of real UserDao.\n         // In test will be set to example of UserDaoMock with setExampleUserDao method.\n         instance.setExampleUserDao(new UserDaoImpl(true));\n     }\n     return instance;\n }\n\n public UserDao getUserDao() {\n     return exampleUserDao.instantiate(true);\n }\n\n public void setExampleUserDao(UserDao userDao) {\n     this.exampleUserDao = userDao;\n }\n</code></pre>\n<p>}</p>\n</li>\n</ul>\n<p>In UserDao:</p>\n<ul>\n<li><p>I need both <code>instantiate</code> method (which in fact is copy constructor).</p>\n</li>\n<li><p>Despite that i also need public constructor to initialize factory with example.</p>\n</li>\n<li><p>Constructor should have parameter that tells whether it is example or not (whether to start transaction or not).</p>\n<pre><code>  public final class UserDaoImpl implements UserDao {\n\n      private DataSource ds;\n      private Connection conn;\n\n      public UserDao instantiate(boolean startTransaction) {\n          if(startTransaction) {\n              return new UserDaoImpl(true);\n          } else {\n              return new UserDaoImpl(false);\n          }\n      }\n\n      public UserDaoImpl(boolean initiate) {\n          if(initiate) {\n              // DB connection initialization and start of the transaction\n          } else {\n              new UserDaoImpl();\n          }\n      }\n\n      private UserDaoImpl() {\n      }\n\n      @Override\n      public void terminate(boolean commit) {\n          // End of the transaction and DB connection termination\n      }\n\n      // Other interface methods implementation ommited\n\n  }\n</code></pre>\n</li>\n</ul>\n<p>Is there a way to make proper design for testability in this case?</p>\n<p>Or, if not, maybe the cause of the problem is that i decided to tie UserDao lifecycle to JDBC transaction? What is possible alternatives? To make UserDao singleton? Won't this be an application bottleneck if all DB interaction will be done via single object.</p>\n<p>Or, can you suggest another data access pattern that is more easy to mock?</p>\n<p>Please, help. It is the most horrible design i did in my life.</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","apache-kafka","apache-kafka-connect"],"owner":{"account_id":8409577,"reputation":172,"user_id":6311983,"display_name":"Nilanjan Sarkar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691101644,"creation_date":1691069127,"question_id":76828538,"body_markdown":"I have trying to emit custom metrics from a Kafka Connect SMT. However the problem is that I need the current connector name and task id at runtime to properly configure the MBean. It seems there is no way to get this info at runtime directly\r\n\r\nTried to get the information form the configure method in the SMT. But it seems this only contains SMT specific configs","title":"How can get connector name and task id inside a Custom Kafka Connect SMT at runtime?","body":"<p>I have trying to emit custom metrics from a Kafka Connect SMT. However the problem is that I need the current connector name and task id at runtime to properly configure the MBean. It seems there is no way to get this info at runtime directly</p>\n<p>Tried to get the information form the configure method in the SMT. But it seems this only contains SMT specific configs</p>\n"},{"tags":["java","serialization","lambda"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1691100430,"post_id":76831692,"comment_id":135450123,"body_markdown":"You need to cast the lambda itself, not the variable.","body":"You need to cast the lambda itself, not the variable."}],"answers":[{"comments":[{"owner":{"account_id":27313298,"reputation":29,"user_id":21749640,"display_name":"user21749640"},"score":0,"creation_date":1691101841,"post_id":76831885,"comment_id":135450290,"body_markdown":"thank you so much for your reply! this fixed it. thank you also for not being rude and being very to-the-point &lt;3 :D","body":"thank you so much for your reply! this fixed it. thank you also for not being rude and being very to-the-point &lt;3 :D"}],"tags":[],"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691100746,"creation_date":1691100746,"answer_id":76831885,"question_id":76831692,"body_markdown":"The cast is failing because the BiPredicate was already instantiated with a non-Serializable lambda. To make it serializable, you need to cast the lambda expression itself:\r\n\r\n    head = new Node((BiPredicate&lt;Player,NPC&gt; &amp; Serializable)(p,q) -&gt; true);\r\n\r\n[**Ideone Demo**][1]\r\n\r\n\r\n  [1]: https://ideone.com/FvbPjj","title":"Serializing lambda expression java (predicate/bipredicate)","body":"<p>The cast is failing because the BiPredicate was already instantiated with a non-Serializable lambda. To make it serializable, you need to cast the lambda expression itself:</p>\n<pre><code>head = new Node((BiPredicate&lt;Player,NPC&gt; &amp; Serializable)(p,q) -&gt; true);\n</code></pre>\n<p><a href=\"https://ideone.com/FvbPjj\" rel=\"nofollow noreferrer\"><strong>Ideone Demo</strong></a></p>\n"}],"owner":{"account_id":27313298,"reputation":29,"user_id":21749640,"display_name":"user21749640"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76831885,"answer_count":1,"score":0,"last_activity_date":1691100746,"creation_date":1691097894,"question_id":76831692,"body_markdown":"I am currently attempting to write a generalization of dialogue routines for my game (currently, every npc character has their own class where i have to hardcode in a bunch of if-else statements)\r\n\r\nto do so, I am writing a class DialogueTree which represents the dialogue. A dialogue tree is made up of Nodes which contain many fields, but the important one here is a BiPredicate &#39;req&#39;, which represents the requirements (stat, quest etc) of the player and npc for the player to go down this dialogue path. Here is the code for all of that so far.\r\n\r\n````````````````\r\npublic class DialogueTree implements Serializable {\r\n\r\n    private Node head;\r\n\r\n\tpublic DialogueTree() {\r\n\t\thead = new Node((p,q) -&gt; true);\r\n\t}\r\n\r\n\tpublic DialogueTree add(int[] path, BiPredicate&lt;Player,NPC&gt; req) {\r\n\t\thead.children.add(new Node(req));\r\n\t\treturn this;\r\n\t}\r\n\r\n    private static class Node implements Serializable {\r\n\t\tpublic List&lt;Node&gt; children;\r\n\t\tpublic BiPredicate&lt;Player,NPC&gt; req;\r\n\t\t\t\r\n\t\tpublic Node(BiPredicate&lt;Player,NPC&gt; req) {\r\n\t\t   this.req = req;\r\n\t\t}\r\n\t}\r\n}\r\n````````````````\r\n\r\ni left out a lot of the code because i don&#39;t want to distract with irrelevant details, but the main thing i wanna highlight is that when constructing these DialogueTrees i&#39;m passing in lambda expressions (the whole reason im doing this is so I don&#39;t have to write a new class for every single NPC&#39;s dialogue, so I don&#39;t want to write a class for a specific requirement that implements BiPredicate and Serializable)\r\n\r\nthe issue is have is when i start the game and try to save, the game crashes with an error citing the lambda expression as non-serializable. i tried casting req to serializable within the Node constructor\r\n\r\n```````````\r\nthis.req = (BiPredicate&lt;Player,NPC&gt; &amp; Serializable)req;\r\n```````````\r\n\r\nhowever that got me a class cast exception.\r\n\r\nany help is greatly appreciate :D","title":"Serializing lambda expression java (predicate/bipredicate)","body":"<p>I am currently attempting to write a generalization of dialogue routines for my game (currently, every npc character has their own class where i have to hardcode in a bunch of if-else statements)</p>\n<p>to do so, I am writing a class DialogueTree which represents the dialogue. A dialogue tree is made up of Nodes which contain many fields, but the important one here is a BiPredicate 'req', which represents the requirements (stat, quest etc) of the player and npc for the player to go down this dialogue path. Here is the code for all of that so far.</p>\n<pre><code>public class DialogueTree implements Serializable {\n\n    private Node head;\n\n    public DialogueTree() {\n        head = new Node((p,q) -&gt; true);\n    }\n\n    public DialogueTree add(int[] path, BiPredicate&lt;Player,NPC&gt; req) {\n        head.children.add(new Node(req));\n        return this;\n    }\n\n    private static class Node implements Serializable {\n        public List&lt;Node&gt; children;\n        public BiPredicate&lt;Player,NPC&gt; req;\n            \n        public Node(BiPredicate&lt;Player,NPC&gt; req) {\n           this.req = req;\n        }\n    }\n}\n</code></pre>\n<p>i left out a lot of the code because i don't want to distract with irrelevant details, but the main thing i wanna highlight is that when constructing these DialogueTrees i'm passing in lambda expressions (the whole reason im doing this is so I don't have to write a new class for every single NPC's dialogue, so I don't want to write a class for a specific requirement that implements BiPredicate and Serializable)</p>\n<p>the issue is have is when i start the game and try to save, the game crashes with an error citing the lambda expression as non-serializable. i tried casting req to serializable within the Node constructor</p>\n<pre><code>this.req = (BiPredicate&lt;Player,NPC&gt; &amp; Serializable)req;\n</code></pre>\n<p>however that got me a class cast exception.</p>\n<p>any help is greatly appreciate :D</p>\n"},{"tags":["java","spring","oop"],"comments":[{"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"score":0,"creation_date":1691077215,"post_id":76829223,"comment_id":135445745,"body_markdown":"This question will likely generate some opinions, but you have nailed the solution already.  Use a single `getProperty()` method that returns the appropriate property value given the feature flag status.","body":"This question will likely generate some opinions, but you have nailed the solution already.  Use a single <code>getProperty()</code> method that returns the appropriate property value given the feature flag status."},{"owner":{"account_id":9177947,"reputation":1625,"user_id":6822933,"display_name":"bbop99"},"score":0,"creation_date":1691079338,"post_id":76829223,"comment_id":135446227,"body_markdown":"@lane.maxwell main concern with this was introducing business logic (&amp; the feature flag service) into the Entity class. This seems to be a general anti-pattern. But so far don&#39;t see any neat alternative solutions","body":"@lane.maxwell main concern with this was introducing business logic (&amp; the feature flag service) into the Entity class. This seems to be a general anti-pattern. But so far don&#39;t see any neat alternative solutions"}],"answers":[{"tags":[],"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691100672,"creation_date":1691100672,"answer_id":76831879,"question_id":76829223,"body_markdown":"I&#39;m answering this in response to your question and comment.  As for the business logic, it is not an antipattern to include it with the domain; this is where that logic should reside.  I understand your concern about calling out to the feature service; here&#39;s a solution to avoid that, along with why I probably wouldn&#39;t do it this way.\r\n\r\nYou can throw a transient, non-serializable property into the entity where you want this behavior.  The property would hold the value of the feature flag.\r\n\r\n    @Entity\r\n    public class SomeEntity {\r\n      @Transient\r\n      @JsonIgnore\r\n      Boolean featureAActive = Boolean.False; // default to false\r\n\r\n      @Column\r\n      String propertyA;\r\n\r\n      @Column\r\n      String propertyB;\r\n\r\n      public String getProperty() {\r\n         return featureAActive ? propertyA : propertyB;\r\n      }\r\n    }\r\n\r\nIn your service method, where you hydrate the entity, set the flag to a value corresponding to the feature.  Psuedo code here to give you a rough idea.\r\n\r\n    public SomeEntity getSomeEntity() {\r\n      SomeEntity someEntity = SomeEntityRepository.findById(12L);\r\n      someEntity.setFeatureAActive(featureService.isFeatureActive(&quot;MY_FEATURE&quot;);\r\n      return someEntity;\r\n    }\r\n\r\nNow, the downside to using this approach is this.  Once you create that Entity and set the flag, as long as it&#39;s in memory, it will use the value set when you created it.  This is not ideal because that feature could be turned off/on, but you&#39;ll only ever have the state that it was in during creation.\r\n\r\nFor this reason, I would not put this logic into the entity, but I&#39;d push it up to the consumer.  Where those properties are consumed, let them query the feature.  Psuedo code again, assume that the output from `myFeatureManager.isActive(&quot;MY_FEATURE&quot;)` is a boolean value representing the state of the feature.\r\n\r\n    String thePropertyValueDrivenByTheFeatureFlag = myFeatureManager.isActive(&quot;MY_FEATURE&quot;) ? someEntity.getPropertyA() : someEntity.getPropertyB();\r\n\r\n","title":"Expand/contract implementation for heavily reused Spring Entity","body":"<p>I'm answering this in response to your question and comment.  As for the business logic, it is not an antipattern to include it with the domain; this is where that logic should reside.  I understand your concern about calling out to the feature service; here's a solution to avoid that, along with why I probably wouldn't do it this way.</p>\n<p>You can throw a transient, non-serializable property into the entity where you want this behavior.  The property would hold the value of the feature flag.</p>\n<pre><code>@Entity\npublic class SomeEntity {\n  @Transient\n  @JsonIgnore\n  Boolean featureAActive = Boolean.False; // default to false\n\n  @Column\n  String propertyA;\n\n  @Column\n  String propertyB;\n\n  public String getProperty() {\n     return featureAActive ? propertyA : propertyB;\n  }\n}\n</code></pre>\n<p>In your service method, where you hydrate the entity, set the flag to a value corresponding to the feature.  Psuedo code here to give you a rough idea.</p>\n<pre><code>public SomeEntity getSomeEntity() {\n  SomeEntity someEntity = SomeEntityRepository.findById(12L);\n  someEntity.setFeatureAActive(featureService.isFeatureActive(&quot;MY_FEATURE&quot;);\n  return someEntity;\n}\n</code></pre>\n<p>Now, the downside to using this approach is this.  Once you create that Entity and set the flag, as long as it's in memory, it will use the value set when you created it.  This is not ideal because that feature could be turned off/on, but you'll only ever have the state that it was in during creation.</p>\n<p>For this reason, I would not put this logic into the entity, but I'd push it up to the consumer.  Where those properties are consumed, let them query the feature.  Psuedo code again, assume that the output from <code>myFeatureManager.isActive(&quot;MY_FEATURE&quot;)</code> is a boolean value representing the state of the feature.</p>\n<pre><code>String thePropertyValueDrivenByTheFeatureFlag = myFeatureManager.isActive(&quot;MY_FEATURE&quot;) ? someEntity.getPropertyA() : someEntity.getPropertyB();\n</code></pre>\n"}],"owner":{"account_id":9177947,"reputation":1625,"user_id":6822933,"display_name":"bbop99"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76831879,"answer_count":1,"score":0,"last_activity_date":1691100672,"creation_date":1691074141,"question_id":76829223,"body_markdown":"we would like to extend an existing Spring @Entity with a new set of columns. Depending on a feature flag value the new columns should be used rather than the existing old set (we&#39;re expanding the DB schema rather than updating the columns in place as we may need to switch between the two modes for the coming weeks).\r\n\r\nThe Spring Entity is heavily reused throughout different services.\r\n\r\nExample Entity:\r\n```\r\n@Entity\r\npublic class SomeEntity {\r\n  ...other columns\r\n\r\n  @Column\r\n  String propertyA;\r\n\r\n  @Column\r\n  String propertyB;\r\n\r\n  public String getPropertyA() { return propertyA; }\r\n  public String getPropertyB() { return propertyB; }\r\n}\r\n```\r\n\r\nIn the real example there are 3 columns that are being replaced. `getPropertyA` is an existing function that&#39;s heavily used (~20-30 calls throughout different services &amp; transformer classes). `getPropertyB` is the newly introduced getter for the new property. Depending on the feature flag status, the application should start using propertyB rather than propertyA.\r\n\r\nIs the best approach to introduce the business logic into the entity class via a `getProperty()` class that hides the A/B logic? Any advice would be appreciated.","title":"Expand/contract implementation for heavily reused Spring Entity","body":"<p>we would like to extend an existing Spring @Entity with a new set of columns. Depending on a feature flag value the new columns should be used rather than the existing old set (we're expanding the DB schema rather than updating the columns in place as we may need to switch between the two modes for the coming weeks).</p>\n<p>The Spring Entity is heavily reused throughout different services.</p>\n<p>Example Entity:</p>\n<pre><code>@Entity\npublic class SomeEntity {\n  ...other columns\n\n  @Column\n  String propertyA;\n\n  @Column\n  String propertyB;\n\n  public String getPropertyA() { return propertyA; }\n  public String getPropertyB() { return propertyB; }\n}\n</code></pre>\n<p>In the real example there are 3 columns that are being replaced. <code>getPropertyA</code> is an existing function that's heavily used (~20-30 calls throughout different services &amp; transformer classes). <code>getPropertyB</code> is the newly introduced getter for the new property. Depending on the feature flag status, the application should start using propertyB rather than propertyA.</p>\n<p>Is the best approach to introduce the business logic into the entity class via a <code>getProperty()</code> class that hides the A/B logic? Any advice would be appreciated.</p>\n"},{"tags":["java","spring-boot","jar"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1659507116,"post_id":73216942,"comment_id":129307978,"body_markdown":"&quot;UnsatisfiedDependencyException because could not resolve placeholder&quot;. I honestly do not see a link between these two","body":"&quot;UnsatisfiedDependencyException because could not resolve placeholder&quot;. I honestly do not see a link between these two"},{"owner":{"account_id":25228306,"reputation":35,"user_id":19119664,"display_name":"Ensei"},"score":0,"creation_date":1659507906,"post_id":73216942,"comment_id":129308232,"body_markdown":"@Stultuske I added detailed description of exception above","body":"@Stultuske I added detailed description of exception above"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1659508427,"post_id":73216942,"comment_id":129308374,"body_markdown":"you have posted a WARNING, not an exception. Either way, in your properties (the right one), you need to add a property with this key: priceMeteorRain, and set a value. That&#39;s what it&#39;s complaining about","body":"you have posted a WARNING, not an exception. Either way, in your properties (the right one), you need to add a property with this key: priceMeteorRain, and set a value. That&#39;s what it&#39;s complaining about"},{"owner":{"account_id":25228306,"reputation":35,"user_id":19119664,"display_name":"Ensei"},"score":0,"creation_date":1659508926,"post_id":73216942,"comment_id":129308505,"body_markdown":"@Stultuske My property file already has the key priceMeteorRain. If it was missed, there would have been error during execution in IntelliJ IDEA but the execution is correct.","body":"@Stultuske My property file already has the key priceMeteorRain. If it was missed, there would have been error during execution in IntelliJ IDEA but the execution is correct."},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1659509861,"post_id":73216942,"comment_id":129308786,"body_markdown":"apparently you added it in the wrong property/yaml/... file. your error message is quite specific: that placeholder isn&#39;t found in your properties","body":"apparently you added it in the wrong property/yaml/... file. your error message is quite specific: that placeholder isn&#39;t found in your properties"}],"owner":{"account_id":25228306,"reputation":35,"user_id":19119664,"display_name":"Ensei"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":405,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691099988,"creation_date":1659506882,"question_id":73216942,"body_markdown":"I faced the problem that during execution of my Spring Boot app in IntelliJ IDEA (Java) all works fine. But when I created jar file and tried to run the app in console, I have UnsatisfiedDependencyException because could not resolve placeholder.\r\n\r\nDetailed description of Exception is below:\r\n```WARN org.springframework.context.annotation.AnnotationConfigApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;controllerBattle&#39;: Unsatisfied dependency expressed through field &#39;controllerMarket&#39;; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;controllerMarketBean&#39;: Unsatisfied dependency expressed through field &#39;meteorRain&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;meteorRainBean&#39;: Injection of autowired dependencies failed; nested exception is java.lang.IllegalArgumentException: Could not resolve placeholder &#39;priceMeteorRain&#39; in value &quot;${priceMeteorRain}&quot;```\r\n\r\n\r\nI researched this problem and found similar problem raised 2 years ago:\r\nhttps://stackoverflow.com/questions/62296538/spring-boot-could-not-resolve-placeholder\r\n\r\nBut it was related to kotlin and it was left unsolved.\r\n\r\nAre there ways to solve this problem for Java?\r\n\r\nI&#39;ll be grateful for your help.","title":"Could not resolve placeholder in jar file","body":"<p>I faced the problem that during execution of my Spring Boot app in IntelliJ IDEA (Java) all works fine. But when I created jar file and tried to run the app in console, I have UnsatisfiedDependencyException because could not resolve placeholder.</p>\n<p>Detailed description of Exception is below:\n<code>WARN org.springframework.context.annotation.AnnotationConfigApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'controllerBattle': Unsatisfied dependency expressed through field 'controllerMarket'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'controllerMarketBean': Unsatisfied dependency expressed through field 'meteorRain'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'meteorRainBean': Injection of autowired dependencies failed; nested exception is java.lang.IllegalArgumentException: Could not resolve placeholder 'priceMeteorRain' in value &quot;${priceMeteorRain}&quot;</code></p>\n<p>I researched this problem and found similar problem raised 2 years ago:\n<a href=\"https://stackoverflow.com/questions/62296538/spring-boot-could-not-resolve-placeholder\">Spring boot Could not resolve placeholder</a></p>\n<p>But it was related to kotlin and it was left unsolved.</p>\n<p>Are there ways to solve this problem for Java?</p>\n<p>I'll be grateful for your help.</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1691097291,"post_id":76831567,"comment_id":135449651,"body_markdown":"Is the bean `TrialHolder` discovered? I.e. what is (are) the root package(s) for bean discovery?","body":"Is the bean <code>TrialHolder</code> discovered? I.e. what is (are) the root package(s) for bean discovery?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1691097772,"post_id":76831567,"comment_id":135449742,"body_markdown":"Please post the full text of the exception and stack trace. @Turing85 as `DAProvider` is using constructor injection, won&#39;t the spring context fail to start if there&#39;s no `TrialHolder`?","body":"Please post the full text of the exception and stack trace. @Turing85 as <code>DAProvider</code> is using constructor injection, won&#39;t the spring context fail to start if there&#39;s no <code>TrialHolder</code>?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1691098022,"post_id":76831567,"comment_id":135449776,"body_markdown":"And please show the bean that `DAProvider` is used in.","body":"And please show the bean that <code>DAProvider</code> is used in."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1691098452,"post_id":76831567,"comment_id":135449858,"body_markdown":"@tgdavies hmm... true...","body":"@tgdavies hmm... true..."},{"owner":{"account_id":5337909,"reputation":27,"user_id":7802066,"display_name":"dojacat"},"score":0,"creation_date":1691098531,"post_id":76831567,"comment_id":135449875,"body_markdown":"the @ComponentScan(&quot;com.role&quot;) happens at this package level","body":"the @ComponentScan(&quot;com.role&quot;) happens at this package level"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1691098603,"post_id":76831567,"comment_id":135449885,"body_markdown":"`DAProvider` is in `com.metadata`.","body":"<code>DAProvider</code> is in <code>com.metadata</code>."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1691098657,"post_id":76831567,"comment_id":135449892,"body_markdown":"Please also show the class where `DAProvider` is injected and `checkHolder` is called.","body":"Please also show the class where <code>DAProvider</code> is injected and <code>checkHolder</code> is called."},{"owner":{"account_id":5337909,"reputation":27,"user_id":7802066,"display_name":"dojacat"},"score":0,"creation_date":1691099081,"post_id":76831567,"comment_id":135449961,"body_markdown":"updated the usage of DAProvider, once I made private final TrialHolder trialHolder\nI am getting the following error \n\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;ConfigProvider&#39;: Unsatisfied dependency expressed through field &#39;daProvider&#39;;","body":"updated the usage of DAProvider, once I made private final TrialHolder trialHolder I am getting the following error   Caused by: org.springframework.beans.factory.UnsatisfiedDependencyExcep&zwnj;&#8203;tion: Error creating bean with name &#39;ConfigProvider&#39;: Unsatisfied dependency expressed through field &#39;daProvider&#39;;"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1691099324,"post_id":76831567,"comment_id":135449996,"body_markdown":"So perhaps because `com.metadata` is not being scanned.","body":"So perhaps because <code>com.metadata</code> is not being scanned."},{"owner":{"account_id":5337909,"reputation":27,"user_id":7802066,"display_name":"dojacat"},"score":0,"creation_date":1691099464,"post_id":76831567,"comment_id":135450022,"body_markdown":"added the trace","body":"added the trace"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1691099579,"post_id":76831567,"comment_id":135450034,"body_markdown":"Or rather because `com.role`isn&#39;t being scanned.","body":"Or rather because <code>com.role</code>isn&#39;t being scanned."},{"owner":{"account_id":5337909,"reputation":27,"user_id":7802066,"display_name":"dojacat"},"score":0,"creation_date":1691104323,"post_id":76831567,"comment_id":135450530,"body_markdown":"I tried creating the DAProvider in the same package as the ConfigProvider but it dint help","body":"I tried creating the DAProvider in the same package as the ConfigProvider but it dint help"}],"owner":{"account_id":5337909,"reputation":27,"user_id":7802066,"display_name":"dojacat"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691099449,"creation_date":1691096348,"question_id":76831567,"body_markdown":"Getting null pointer exception in DAProvider class as the TrialHolder object is always null. When I wired the TrialHolder directly to another class it works , but when I use it via DAProvider , it is null \r\n\r\nAny help is much appreciated...\r\n\r\nBelow are the relevant classes and configurations I have made :\r\n\r\nThis where the interceptor is added \r\n```package com.role.server.config;\r\n\r\nimport com.role.server.grpc.TrialInterceptorInterceptor;\r\nimport com.servicelibs.grpc.Grpc;\r\nimport io.grpc.Server;\r\nimport org.springframework.beans.factory.annotation.Qualifier;\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\n\r\n@Configuration\r\npublic class GrpcConfig {\r\n  @Bean(initMethod = &quot;start&quot;, destroyMethod = &quot;shutdown&quot;)\r\n  public Server grpcServer(\r\n      Grpc grpc,\r\n          TrialInterceptorInterceptor trialInterceptor)\r\n      throws NoSuchFieldException, IllegalAccessException {\r\n    Server server =\r\n        grpc.newServerBuilder()\r\n            .addService(testConfigServiceGrpc)\r\n            .withInterceptors(\r\n                trialInterceptor)\r\n            .build();\r\n\r\n    //other logic in place \r\n\r\n    return server;\r\n  }\r\n}\r\n```\r\nBelow is where the interceptor is defined\r\n```\r\npackage com.role.server.grpc;\r\n\r\nimport com.role.server.grpc.ms.grpc.TrialHolder;\r\nimport com.spiffe.sc;\r\nimport com.spiffe.sp;\r\nimport com.libs.oc.xfcc.XForwardedClientCert;\r\nimport com.libs.oc.xfcc.XForwardedClientCertList;\r\nimport io.grpc.*;\r\nimport io.grpc.ServerCall;\r\nimport io.grpc.ServerInterceptor;\r\nimport java.util.Objects;\r\nimport java.util.Optional;\r\nimport lombok.Getter;\r\nimport org.apache.commons.lang.StringUtils;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Component;\r\n\r\n@Component\r\npublic class TrialInterceptor implements ServerInterceptor {\r\n  @Autowired TrialHolder TrialHolder;\r\n  private static final Metadata.Key&lt;String&gt; HK =\r\n      Metadata.Key.of(&quot;x-forwarded-client-cert&quot;, Metadata.ASCII_STRING_MARSHALLER);\r\n\r\n  /**\r\n   * Intercept a gRPC call and inject context.\r\n   */\r\n  @Override\r\n  public &lt;ReqT, RespT&gt; ServerCall.Listener&lt;ReqT&gt; interceptCall(\r\n      ServerCall&lt;ReqT, RespT&gt; serverCall,\r\n      Metadata metadata,\r\n      ServerCallHandler&lt;ReqT, RespT&gt; serverCallHandler) {\r\n\r\n    Optional&lt;sci&gt; sci = getContextInfoFromClientCert(metadata);\r\n    if (!sci.isEmpty()) {\r\n      TrialHolder.setsu(sci.get().getsu());\r\n      TrialHolder.setsn(sci.get().getsn());\r\n    } else {\r\n      log.warn(&quot;sc is empty&quot;);\r\n    }\r\n\r\n    return new ForwardingServerCallListener.SimpleForwardingServerCallListener&lt;ReqT&gt;(\r\n        serverCallHandler.startCall(serverCall, metadata)) {\r\n\r\n      @Override\r\n      public void onComplete() {\r\n        super.onComplete();\r\n      }\r\n    };\r\n  }\r\n\r\n\r\n  private Optional&lt;sci&gt; getContextInfoFromClientCert(Metadata metadata) {\r\n    String xH = metadata.get(HK);\r\n    XForwardedClientCertList clientCerts = XForwardedClientCertList.fromString(xH);\r\n   if (clientCerts.size() &gt; 1) {\r\n      return clientCerts.stream()\r\n          .map(this::buildsci)\r\n          .filter(Objects::nonNull)\r\n          .findFirst();\r\n    } else {\r\n      return Optional.empty();\r\n    }\r\n  }\r\n\r\n  private sci buildsci(\r\n      XForwardedClientCert xforwardedClientCert) {\r\n   //logic to handle and return \r\n    return new sci(\r\n        sc.get().getService().get(), xforwardedClientCert.getSanUri());\r\n  }\r\n}\r\n```\r\n\r\nBelow is the object which I want to pass around \r\n```\r\npackage com.role.server.grpc.service.grpc;\r\n\r\nimport com.libs.opencontext.api.Key;\r\nimport com.libs.opencontext.impl.ocProvider;\r\nimport java.util.Optional;\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.apache.commons.lang3.StringUtils;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Component;\r\n\r\n@Slf4j\r\n@Component\r\npublic class TrialHolder {\r\n\r\n  private final ocProvider socProvider;\r\n\r\n  @Autowired\r\n  public TrialHolder(ocProvider socProvider) {\r\n    this.socProvider = socProvider;\r\n  }\r\n\r\n  private void addToContext(Key&lt;String&gt; key, String value) {\r\n    if (socProvider.isPresent() &amp;&amp; !StringUtils.isBlank(value)) {\r\n      socProvider.currentContext().put(key, value);\r\n    } \r\n  }\r\n\r\n  &lt;T&gt; Optional&lt;T&gt; getFromContext(Key&lt;T&gt; key) {\r\n    if (socProvider.isPresent()) {\r\n      return Optional.ofNullable(socProvider.currentContext().get(key));\r\n    } else {\r\n      return Optional.empty();\r\n    }\r\n  }\r\n\r\n//logic defined for below \r\n  public Optional&lt;String&gt; getsu() {\r\n    return getFromContext(&quot;su&quot;);\r\n  }\r\n\r\n  public void setsu(String su) {\r\n    addToContext(&quot;su&quot;, su);\r\n  }\r\n\r\n  public void setsn(String falconTeam) {\r\n    addToContext(&quot;sn&quot;, falconTeam);\r\n  }\r\n\r\n  public Optional&lt;String&gt; getsn() {\r\n    return getFromContext(&quot;sn&quot;);\r\n  }\r\n\r\n  public boolean isPresent() {\r\n    return socProvider.isPresent();\r\n  }\r\n}\r\n```\r\n\r\nThe below class is where trialHolder is coming in as null \r\n\r\n```\r\npackage com.metadata.da.utils;\r\nimport com.role.server.grpc.md.grpc.trialHolder;\r\nimport java.util.List;\r\nimport java.util.stream.Collectors;\r\nimport lombok.RequiredArgsConstructor;\r\nimport org.springframework.stereotype.Component;\r\n\r\n@Component\r\n@RequiredArgsConstructor\r\npublic class DAProvider {\r\n  private final TrialHolder trialHolder;\r\n\r\n  public boolean checkHolder() {\r\n    return  trialHolder.getsn().isPresent()\r\n  }\r\n}\r\n```\r\nUsage of DAprovider\r\n```\r\npackage com.md.dataaccess;\r\n\r\n\r\nimport com.md.da.utils.DAProvider;\r\nimport java.util.*;\r\nimport java.util.stream.Collectors;\r\nimport lombok.RequiredArgsConstructor;\r\nimport org.apache.commons.lang3.StringUtils;\r\nimport org.apache.spark.sql.types.DataType;\r\nimport org.apache.spark.sql.types.DataTypes;\r\nimport org.springframework.stereotype.Component;\r\n\r\n@Component\r\n@RequiredArgsConstructor\r\npublic class ConfigProvider {\r\n  private final DAProvider daProvider;\r\n\r\n  @Override\r\n  public Config createConfig() {\r\n     return daProvider.checkHolder()\r\n  }\r\n  }\r\n```\r\n\r\n ```Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;dACController&#39;: Unsatisfied dependency expressed through field &#39;configProvider&#39;; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;ConfigProvider&#39; defined in file ----: Unsatisfied dependency expressed through constructor parameter 1; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;dataAccessConfigV1Provider&#39; defined in file -----: Unsatisfied dependency expressed through constructor parameter 8; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;daProvider&#39; defined in file ---: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;com.role.server.grpc.service.grpc.TrialHolder&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: ```","title":"Class object is null within a util class always which is causing NPE","body":"<p>Getting null pointer exception in DAProvider class as the TrialHolder object is always null. When I wired the TrialHolder directly to another class it works , but when I use it via DAProvider , it is null</p>\n<p>Any help is much appreciated...</p>\n<p>Below are the relevant classes and configurations I have made :</p>\n<p>This where the interceptor is added</p>\n<pre><code>\nimport com.role.server.grpc.TrialInterceptorInterceptor;\nimport com.servicelibs.grpc.Grpc;\nimport io.grpc.Server;\nimport org.springframework.beans.factory.annotation.Qualifier;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\npublic class GrpcConfig {\n  @Bean(initMethod = &quot;start&quot;, destroyMethod = &quot;shutdown&quot;)\n  public Server grpcServer(\n      Grpc grpc,\n          TrialInterceptorInterceptor trialInterceptor)\n      throws NoSuchFieldException, IllegalAccessException {\n    Server server =\n        grpc.newServerBuilder()\n            .addService(testConfigServiceGrpc)\n            .withInterceptors(\n                trialInterceptor)\n            .build();\n\n    //other logic in place \n\n    return server;\n  }\n}\n</code></pre>\n<p>Below is where the interceptor is defined</p>\n<pre><code>package com.role.server.grpc;\n\nimport com.role.server.grpc.ms.grpc.TrialHolder;\nimport com.spiffe.sc;\nimport com.spiffe.sp;\nimport com.libs.oc.xfcc.XForwardedClientCert;\nimport com.libs.oc.xfcc.XForwardedClientCertList;\nimport io.grpc.*;\nimport io.grpc.ServerCall;\nimport io.grpc.ServerInterceptor;\nimport java.util.Objects;\nimport java.util.Optional;\nimport lombok.Getter;\nimport org.apache.commons.lang.StringUtils;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Component;\n\n@Component\npublic class TrialInterceptor implements ServerInterceptor {\n  @Autowired TrialHolder TrialHolder;\n  private static final Metadata.Key&lt;String&gt; HK =\n      Metadata.Key.of(&quot;x-forwarded-client-cert&quot;, Metadata.ASCII_STRING_MARSHALLER);\n\n  /**\n   * Intercept a gRPC call and inject context.\n   */\n  @Override\n  public &lt;ReqT, RespT&gt; ServerCall.Listener&lt;ReqT&gt; interceptCall(\n      ServerCall&lt;ReqT, RespT&gt; serverCall,\n      Metadata metadata,\n      ServerCallHandler&lt;ReqT, RespT&gt; serverCallHandler) {\n\n    Optional&lt;sci&gt; sci = getContextInfoFromClientCert(metadata);\n    if (!sci.isEmpty()) {\n      TrialHolder.setsu(sci.get().getsu());\n      TrialHolder.setsn(sci.get().getsn());\n    } else {\n      log.warn(&quot;sc is empty&quot;);\n    }\n\n    return new ForwardingServerCallListener.SimpleForwardingServerCallListener&lt;ReqT&gt;(\n        serverCallHandler.startCall(serverCall, metadata)) {\n\n      @Override\n      public void onComplete() {\n        super.onComplete();\n      }\n    };\n  }\n\n\n  private Optional&lt;sci&gt; getContextInfoFromClientCert(Metadata metadata) {\n    String xH = metadata.get(HK);\n    XForwardedClientCertList clientCerts = XForwardedClientCertList.fromString(xH);\n   if (clientCerts.size() &gt; 1) {\n      return clientCerts.stream()\n          .map(this::buildsci)\n          .filter(Objects::nonNull)\n          .findFirst();\n    } else {\n      return Optional.empty();\n    }\n  }\n\n  private sci buildsci(\n      XForwardedClientCert xforwardedClientCert) {\n   //logic to handle and return \n    return new sci(\n        sc.get().getService().get(), xforwardedClientCert.getSanUri());\n  }\n}\n</code></pre>\n<p>Below is the object which I want to pass around</p>\n<pre><code>package com.role.server.grpc.service.grpc;\n\nimport com.libs.opencontext.api.Key;\nimport com.libs.opencontext.impl.ocProvider;\nimport java.util.Optional;\nimport lombok.extern.slf4j.Slf4j;\nimport org.apache.commons.lang3.StringUtils;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Component;\n\n@Slf4j\n@Component\npublic class TrialHolder {\n\n  private final ocProvider socProvider;\n\n  @Autowired\n  public TrialHolder(ocProvider socProvider) {\n    this.socProvider = socProvider;\n  }\n\n  private void addToContext(Key&lt;String&gt; key, String value) {\n    if (socProvider.isPresent() &amp;&amp; !StringUtils.isBlank(value)) {\n      socProvider.currentContext().put(key, value);\n    } \n  }\n\n  &lt;T&gt; Optional&lt;T&gt; getFromContext(Key&lt;T&gt; key) {\n    if (socProvider.isPresent()) {\n      return Optional.ofNullable(socProvider.currentContext().get(key));\n    } else {\n      return Optional.empty();\n    }\n  }\n\n//logic defined for below \n  public Optional&lt;String&gt; getsu() {\n    return getFromContext(&quot;su&quot;);\n  }\n\n  public void setsu(String su) {\n    addToContext(&quot;su&quot;, su);\n  }\n\n  public void setsn(String falconTeam) {\n    addToContext(&quot;sn&quot;, falconTeam);\n  }\n\n  public Optional&lt;String&gt; getsn() {\n    return getFromContext(&quot;sn&quot;);\n  }\n\n  public boolean isPresent() {\n    return socProvider.isPresent();\n  }\n}\n</code></pre>\n<p>The below class is where trialHolder is coming in as null</p>\n<pre><code>package com.metadata.da.utils;\nimport com.role.server.grpc.md.grpc.trialHolder;\nimport java.util.List;\nimport java.util.stream.Collectors;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Component;\n\n@Component\n@RequiredArgsConstructor\npublic class DAProvider {\n  private final TrialHolder trialHolder;\n\n  public boolean checkHolder() {\n    return  trialHolder.getsn().isPresent()\n  }\n}\n</code></pre>\n<p>Usage of DAprovider</p>\n<pre><code>package com.md.dataaccess;\n\n\nimport com.md.da.utils.DAProvider;\nimport java.util.*;\nimport java.util.stream.Collectors;\nimport lombok.RequiredArgsConstructor;\nimport org.apache.commons.lang3.StringUtils;\nimport org.apache.spark.sql.types.DataType;\nimport org.apache.spark.sql.types.DataTypes;\nimport org.springframework.stereotype.Component;\n\n@Component\n@RequiredArgsConstructor\npublic class ConfigProvider {\n  private final DAProvider daProvider;\n\n  @Override\n  public Config createConfig() {\n     return daProvider.checkHolder()\n  }\n  }\n</code></pre>\n<p><code>Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dACController': Unsatisfied dependency expressed through field 'configProvider'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'ConfigProvider' defined in file ----: Unsatisfied dependency expressed through constructor parameter 1; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dataAccessConfigV1Provider' defined in file -----: Unsatisfied dependency expressed through constructor parameter 8; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'daProvider' defined in file ---: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'com.role.server.grpc.service.grpc.TrialHolder' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: </code></p>\n"},{"tags":["java","jar","decompiler"],"comments":[{"owner":{"account_id":49772,"reputation":6261,"user_id":148346,"accept_rate":67,"display_name":"Andrew"},"score":145,"creation_date":1265686348,"post_id":647116,"comment_id":2181327,"body_markdown":"Remember two more things: 1) The mere mention of a decompiler will cause the &quot;holier than thou&#39;s&quot; to come out and make value judgements about your motives despite having no idea what your planned use is, so be careful who you talk to.  2) The fancy JavaDecompiler will give you an excellent rendition of the code, well laid out and easy to read - missing only comments.  It is astoundingly good, recovering a JAR file which had long lost source complete with variable names.  Of course we don&#39;t obfuscate our in-house JAR files.","body":"Remember two more things: 1) The mere mention of a decompiler will cause the &quot;holier than thou&#39;s&quot; to come out and make value judgements about your motives despite having no idea what your planned use is, so be careful who you talk to.  2) The fancy JavaDecompiler will give you an excellent rendition of the code, well laid out and easy to read - missing only comments.  It is astoundingly good, recovering a JAR file which had long lost source complete with variable names.  Of course we don&#39;t obfuscate our in-house JAR files."},{"owner":{"account_id":98784,"reputation":10491,"user_id":267197,"accept_rate":68,"display_name":"dma_k"},"score":1,"creation_date":1325506744,"post_id":647116,"comment_id":10824872,"body_markdown":"See also remarks in post [Choose and test java decompiler](http://stackoverflow.com/questions/3898391).","body":"See also remarks in post <a href=\"http://stackoverflow.com/questions/3898391\">Choose and test java decompiler</a>."},{"owner":{"account_id":160262,"reputation":1611,"user_id":380189,"accept_rate":93,"display_name":"Jane Panda"},"score":10,"creation_date":1333482328,"post_id":647116,"comment_id":12782553,"body_markdown":"I&#39;ve stopped by this thread so many times when I needed to study how someone accomplished something for a Bukkit plugin... That comment always leaves me with a smile. I wish I could upvote it every time I stop by.","body":"I&#39;ve stopped by this thread so many times when I needed to study how someone accomplished something for a Bukkit plugin... That comment always leaves me with a smile. I wish I could upvote it every time I stop by."},{"owner":{"account_id":5627322,"reputation":595,"user_id":6004931,"display_name":"Nick Graham"},"score":0,"creation_date":1478892478,"post_id":647116,"comment_id":68347940,"body_markdown":"Simple online decompiler if you don&#39;t want to download any software. http://www.javadecompilers.com/","body":"Simple online decompiler if you don&#39;t want to download any software. <a href=\"http://www.javadecompilers.com/\" rel=\"nofollow noreferrer\">javadecompilers.com</a>"},{"owner":{"account_id":49078,"reputation":44646,"user_id":145989,"accept_rate":59,"display_name":"Ondra Žižka"},"score":1,"creation_date":1486596880,"post_id":647116,"comment_id":71419316,"body_markdown":"This shouldn&#39;t be closed as the decompilers playground changes dynamically. Currently, the best is probably [FernFlower](https://github.com/JetBrains/intellij-community/tree/master/plugins/java-decompiler/engine).\n\nIf you&#39;re looking for an easy solution, download [Windup](http://windup.jboss.org/) and run it&#39;s command-line version on your .jar. It will decompile using FernFlower, with support up to Java 8 (jad only suports up to Java 1.3, JavaDecompiler up to Java 1.5 IIRC), with a fallback to Procyon if FernFlower fails.","body":"This shouldn&#39;t be closed as the decompilers playground changes dynamically. Currently, the best is probably <a href=\"https://github.com/JetBrains/intellij-community/tree/master/plugins/java-decompiler/engine\" rel=\"nofollow noreferrer\">FernFlower</a>.  If you&#39;re looking for an easy solution, download <a href=\"http://windup.jboss.org/\" rel=\"nofollow noreferrer\">Windup</a> and run it&#39;s command-line version on your .jar. It will decompile using FernFlower, with support up to Java 8 (jad only suports up to Java 1.3, JavaDecompiler up to Java 1.5 IIRC), with a fallback to Procyon if FernFlower fails."},{"owner":{"account_id":3407043,"reputation":1677,"user_id":2857873,"accept_rate":75,"display_name":"Florian Wendelborn"},"score":0,"creation_date":1647085573,"post_id":647116,"comment_id":126287968,"body_markdown":"As of 2022, this one works well: https://jdec.app/","body":"As of 2022, this one works well: <a href=\"https://jdec.app/\" rel=\"nofollow noreferrer\">jdec.app</a>"},{"owner":{"account_id":4243,"reputation":1301938,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"score":0,"creation_date":1654411768,"post_id":647116,"comment_id":128081418,"body_markdown":"As of 2022, [**QuiltMC/quiltflower**](https://stackoverflow.com/a/647140/6309) looks promising.","body":"As of 2022, <a href=\"https://stackoverflow.com/a/647140/6309\"><b>QuiltMC/quiltflower</b></a> looks promising."}],"answers":[{"comments":[{"owner":{"account_id":8532,"reputation":13117,"user_id":15452,"accept_rate":57,"display_name":"Vihung"},"score":0,"creation_date":1329454305,"post_id":647126,"comment_id":11763297,"body_markdown":"I don&#39;t think you can just run it against the dir. You will have to specify {dir}/**/*.class","body":"I don&#39;t think you can just run it against the dir. You will have to specify {dir}/**/*.class"},{"owner":{"account_id":125069,"reputation":6156,"user_id":320594,"accept_rate":77,"display_name":"Jaime Hablutzel"},"score":0,"creation_date":1366053051,"post_id":647126,"comment_id":22855044,"body_markdown":"Extract the jar and use something like jad {dir}, I have just tested it and doesn&#39;t work on windows","body":"Extract the jar and use something like jad {dir}, I have just tested it and doesn&#39;t work on windows"}],"tags":[],"owner":{"account_id":8429,"reputation":56686,"user_id":15187,"accept_rate":96,"display_name":"yanchenko"},"comment_count":2,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1237083241,"creation_date":1237083241,"answer_id":647126,"question_id":647116,"body_markdown":"You extract it and then use jad against the dir.","title":"How to decompile a whole Jar file?","body":"<p>You extract it and then use jad against the dir.</p>\n"},{"comments":[{"owner":{"account_id":51198,"reputation":1408,"user_id":152938,"display_name":"yanokwa"},"score":5,"creation_date":1315947383,"post_id":647140,"comment_id":8951516,"body_markdown":"fyi, java decompiler works on windows, mac and linux.","body":"fyi, java decompiler works on windows, mac and linux."},{"owner":{"account_id":4243,"reputation":1301938,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"score":4,"creation_date":1334834039,"post_id":647140,"comment_id":13138324,"body_markdown":"@AlexS nice :) Next step: version control (http://stackoverflow.com/questions/59561/what-tools-techniques-can-benefit-a-solo-developer) And then Continuous Integration (http://stackoverflow.com/questions/130592/is-continuous-integration-important-for-a-solo-developer)","body":"@AlexS nice :) Next step: version control (<a href=\"http://stackoverflow.com/questions/59561/what-tools-techniques-can-benefit-a-solo-developer\" title=\"what tools techniques can benefit a solo developer\">stackoverflow.com/questions/59561/&hellip;</a>) And then Continuous Integration (<a href=\"http://stackoverflow.com/questions/130592/is-continuous-integration-important-for-a-solo-developer\" title=\"is continuous integration important for a solo developer\">stackoverflow.com/questions/130592/&hellip;</a>)"},{"owner":{"account_id":17546,"reputation":15607,"user_id":39371,"accept_rate":80,"display_name":"Stephane Grenier"},"score":0,"creation_date":1352184703,"post_id":647140,"comment_id":18047885,"body_markdown":"Anyone get the eclipse plugin to work anymore with the latest eclipse and jdk7? I tried but I get a download error. JD-Gui works but jd-eclipse seems to fail for me...","body":"Anyone get the eclipse plugin to work anymore with the latest eclipse and jdk7? I tried but I get a download error. JD-Gui works but jd-eclipse seems to fail for me..."},{"owner":{"account_id":4243,"reputation":1301938,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"score":0,"creation_date":1352185148,"post_id":647140,"comment_id":18048018,"body_markdown":"@StephaneGrenier I didn&#39;t test it recently. That could be a question in its own (detailed with the OS, Eclipse version, and screenshot of the error message you got, or the Eclipse log view). Java-Decompiler maintainer Emmanuel Dupuy (http://stackoverflow.com/users/37785/emmanuel-dupuy) could answer.","body":"@StephaneGrenier I didn&#39;t test it recently. That could be a question in its own (detailed with the OS, Eclipse version, and screenshot of the error message you got, or the Eclipse log view). Java-Decompiler maintainer Emmanuel Dupuy (<a href=\"http://stackoverflow.com/users/37785/emmanuel-dupuy\">stackoverflow.com/users/37785/emmanuel-dupuy</a>) could answer."},{"owner":{"account_id":1439522,"reputation":9489,"user_id":1360074,"accept_rate":85,"display_name":"Nikolay Kuznetsov"},"score":0,"creation_date":1356098494,"post_id":647140,"comment_id":19310272,"body_markdown":"so with plugin for Eclipse how can I view code for a specific jar in Package Explorer?","body":"so with plugin for Eclipse how can I view code for a specific jar in Package Explorer?"},{"owner":{"account_id":219151,"reputation":4775,"user_id":475876,"accept_rate":75,"display_name":"Akira Yamamoto"},"score":4,"creation_date":1364943281,"post_id":647140,"comment_id":22426504,"body_markdown":"With Java Decompiler you can open the JAR file and go to File, Save All Sources. It saves all class files into java files =D","body":"With Java Decompiler you can open the JAR file and go to File, Save All Sources. It saves all class files into java files =D"},{"owner":{"account_id":1321843,"reputation":625,"user_id":1267505,"display_name":"CharlesW"},"score":2,"creation_date":1392404181,"post_id":647140,"comment_id":32964223,"body_markdown":"Please remember that it makes errors too.  I have a class with a Member variable and it moved it to the parameter of a function, destroying the effect of the code.  Watch out, it will get you.","body":"Please remember that it makes errors too.  I have a class with a Member variable and it moved it to the parameter of a function, destroying the effect of the code.  Watch out, it will get you."},{"owner":{"account_id":14657,"reputation":5835,"user_id":30384,"display_name":"sfuqua"},"score":0,"creation_date":1395410699,"post_id":647140,"comment_id":34338436,"body_markdown":"jd.benow.ca is currently down. However, the Internet Archive has a snapshot of it from January: https://web.archive.org/web/20140105052622/http://jd.benow.ca/","body":"jd.benow.ca is currently down. However, the Internet Archive has a snapshot of it from January: <a href=\"https://web.archive.org/web/20140105052622/http://jd.benow.ca/\" rel=\"nofollow noreferrer\">web.archive.org/web/20140105052622/http://jd.benow.ca</a>"},{"owner":{"account_id":65930,"reputation":4225,"user_id":193705,"accept_rate":81,"display_name":"Peter Wippermann"},"score":0,"creation_date":1423664178,"post_id":647140,"comment_id":45239637,"body_markdown":"@CharlesW I think this was an optimisation done by the compiler, not by the decompiler...","body":"@CharlesW I think this was an optimisation done by the compiler, not by the decompiler..."},{"owner":{"account_id":1976241,"reputation":5143,"user_id":1773972,"accept_rate":50,"display_name":"Pini Cheyni"},"score":0,"creation_date":1461243644,"post_id":647140,"comment_id":61118132,"body_markdown":"Is there any way to prevent from my code to be decompiled ? If I store sensitive information inside the CLASS files","body":"Is there any way to prevent from my code to be decompiled ? If I store sensitive information inside the CLASS files"},{"owner":{"account_id":301489,"reputation":54254,"user_id":609251,"accept_rate":82,"display_name":"aroth"},"score":0,"creation_date":1494491670,"post_id":647140,"comment_id":74853932,"body_markdown":"Doesn&#39;t work if you only have Java 8 installed on your system.","body":"Doesn&#39;t work if you only have Java 8 installed on your system."},{"owner":{"account_id":1875784,"reputation":380,"user_id":1697026,"display_name":"David Kennedy"},"score":2,"creation_date":1530285663,"post_id":647140,"comment_id":89196907,"body_markdown":"JD is a good starting point but fail to decompile complex code.\nA good alternative is use https://github.com/JetBrains/intellij-community/tree/master/plugins/java-decompiler/engine","body":"JD is a good starting point but fail to decompile complex code. A good alternative is use <a href=\"https://github.com/JetBrains/intellij-community/tree/master/plugins/java-decompiler/engine\" rel=\"nofollow noreferrer\">github.com/JetBrains/intellij-community/tree/master/plugins/&zwnj;&#8203;&hellip;</a>"},{"owner":{"account_id":4243,"reputation":1301938,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"score":0,"creation_date":1530285891,"post_id":647140,"comment_id":89197009,"body_markdown":"@DavidKennedyAraujo Thank you. I have included your comment in the answer for more visibility.","body":"@DavidKennedyAraujo Thank you. I have included your comment in the answer for more visibility."},{"owner":{"account_id":5702395,"reputation":887,"user_id":4506984,"display_name":"Saftpresse99"},"score":1,"creation_date":1536747498,"post_id":647140,"comment_id":91533380,"body_markdown":"Is there a download location for fernflower.jar?","body":"Is there a download location for fernflower.jar?"},{"owner":{"account_id":4243,"reputation":1301938,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"score":0,"creation_date":1536752078,"post_id":647140,"comment_id":91535980,"body_markdown":"@Saftpresse99 Maybe http://www.javadecompilers.com/? or https://github.com/fesh0r/fernflower (but requiring a compilation)","body":"@Saftpresse99 Maybe <a href=\"http://www.javadecompilers.com/\" rel=\"nofollow noreferrer\">javadecompilers.com</a>? or <a href=\"https://github.com/fesh0r/fernflower\" rel=\"nofollow noreferrer\">github.com/fesh0r/fernflower</a> (but requiring a compilation)"},{"owner":{"account_id":1042691,"reputation":536,"user_id":1048376,"display_name":"splashout"},"score":0,"creation_date":1691098876,"post_id":647140,"comment_id":135449931,"body_markdown":"Quick answer: Get the complied code that uses Java 17 here: https://github.com/Vineflower/vineflower/releases.  Use command: java -jar vineflower.jar -dgs=1 c:\\Temp\\binary\\library.jar c:\\Temp\\souce","body":"Quick answer: Get the complied code that uses Java 17 here: <a href=\"https://github.com/Vineflower/vineflower/releases\" rel=\"nofollow noreferrer\">github.com/Vineflower/vineflower/releases</a>.  Use command: java -jar vineflower.jar -dgs=1 c:\\Temp\\binary\\library.jar c:\\Temp\\souce"},{"owner":{"account_id":4243,"reputation":1301938,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"score":0,"creation_date":1691099149,"post_id":647140,"comment_id":135449972,"body_markdown":"@splashout Thank you for the update. I have included your comment in the answer for more visibility.","body":"@splashout Thank you for the update. I have included your comment in the answer for more visibility."}],"tags":[],"owner":{"account_id":4243,"reputation":1301938,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"comment_count":17,"down_vote_count":0,"up_vote_count":367,"is_accepted":true,"score":367,"last_activity_date":1691099116,"creation_date":1237083694,"answer_id":647140,"question_id":647116,"body_markdown":"2023: [splashout](https://stackoverflow.com/users/1048376/splashout) suggests in [the comments](https://stackoverflow.com/questions/647116/how-to-decompile-a-whole-jar-file/647140?noredirect=1#comment135449931_647140) the [`Vineflower/vineflower`](https://github.com/Vineflower/vineflower) decompiler ([releases](https://github.com/Vineflower/vineflower/releases)), renaming from Quiltflower to Vineflower.\r\n\r\n``` bash\r\njava -jar vineflower.jar -dgs=1 c:\\Temp\\binary\\library.jar c:\\Temp\\souce\r\n```\r\n\r\n----\r\n\r\n\r\n2022 update: [**QuiltMC/quiltflower**][1] is the latest [most advanced Java decompiler][2]:\r\n\r\nQuiltflower is a modern, general purpose decompiler focused on improving code quality, speed, and usability.  \r\nQuiltflower is a fork of [Fernflower][3] and Forgeflower.\r\n\r\n&gt; Changes include:\r\n&gt;\r\n&gt; - New language features (Try with resources, switch expressions, pattern matching, and more)\r\n&gt; - Better control flow generation (loops, try-catch, and switch, etc.)\r\n&gt; - More configurability\r\n&gt; - Better error messages\r\n&gt; - Javadoc application\r\n&gt; - Multithreading\r\n&gt; - Optimization\r\n&gt; - Many other miscellaneous features and fixes\r\n&gt;\r\n&gt; Originally intended just for use with the QuiltMC toolchain with Minecraft, Quiltflower quickly expanded to be a general purpose java decompiler aiming to create code that is as accurate and clean as possible. \r\n&gt;\r\n&gt; If the name sounds familiar it&#39;s because Quiltflower is a fork of [Fernflower][3], the (in)famous decompiler that was developed by Stiver, maintained by Jetbrains, and became the default decompiler in Intellij IDEA.  \r\nFernflower also quickly found its way into many other tools. \r\n&gt;\r\n&gt; Over the past year, Quiltflower has added support for features such as modern string concatenation, a code formatter, sealed classes, pattern matching, switch expressions, try-with-resources, and more. Quiltflower also focuses on the code quality of the decompiled output, and takes readability very seriously.\r\n\r\nSee [output examples][4].\r\n\r\n&gt; Runs nice with [jbang][5] \r\n&gt;\r\n&gt;     https://github.com/QuiltMC/quiltflower/releases/download/1.8.1/quiltflower-1.8.1.jar\r\n\r\nOr:\r\n\r\n&gt;     java -jar quiltflower.jar -dgs=1 c:\\Temp\\binary\\library.jar c:\\Temp\\binary\\Boot.class c:\\Temp\\source\\\r\n\r\n----\r\n\r\n2009: [JavaDecompiler][6] can do a good job with a jar: since 0.2.5, All files, in JAR files, are displayed.\r\n\r\n![http://java.decompiler.free.fr/sites/default/screenshots/screenshot1.png][7]\r\n\r\nSee also [the question &quot;How do I “decompile” Java class files?&quot;][8].\r\n\r\nThe JD-Eclipse doesn&#39;t seem to have changed since late 2009 though (see [Changes][9]).  \r\nSo its integration with latest Eclipse (3.8, 4.2+) might be problematic.\r\n\r\nJD-Core is actively maintained.\r\n\r\nBoth are the result of the fantastic work of (SO user) [**Emmanuel Dupuy**][10].\r\n\r\n----\r\n\r\n2018: A more modern option, mentioned [in the comments][11] by [David Kennedy Araujo][12]:\r\n\r\n[**JetBrains/intellij-community/plugins/java-decompiler/engine**][3]\r\n\r\n&gt; Fernflower is the first actually working analytical decompiler for Java and probably for a high-level programming language in general.\r\n&gt;\r\n&gt;     java -jar fernflower.jar [-&lt;option&gt;=&lt;value&gt;]* [&lt;source&gt;]+ &lt;destination&gt;\r\n&gt;\r\n&gt;     java -jar fernflower.jar -hes=0 -hdc=0 c:\\Temp\\binary\\ -e=c:\\Java\\rt.jar c:\\Temp\\source\\\r\n\r\nSee also https://stackoverflow.com/questions/28389006/how-to-decompile-to-java-files-intellij-idea for a command working with recent IntelliJ IDEA.\r\n\r\n----\r\n\r\n2022 update: [Florian Wendelborn][13] suggests in [the comments][14]\r\n\r\n&gt; this one works well: [jdec.app][15] from [Leonardo Santos][16].\r\n\r\n\r\n  [1]: https://github.com/QuiltMC/quiltflower\r\n  [2]: https://www.reddit.com/r/java/comments/ue8u59/new_open_source_java_decompiler/\r\n  [3]: https://github.com/JetBrains/intellij-community/tree/master/plugins/java-decompiler/engine\r\n  [4]: https://gist.github.com/SuperCoder7979/c7171b0e34b6eccf0b9f1c37030867dc\r\n  [5]: https://www.jbang.dev/\r\n  [6]: https://java-decompiler.github.io/\r\n  [7]: http://i.stack.imgur.com/SF22b.png\r\n  [8]: https://stackoverflow.com/questions/272535/how-do-i-decompile-java-class-files/272595#272595\r\n  [9]: http://java.decompiler.free.fr/?q=changes/jdeclipse\r\n  [10]: https://stackoverflow.com/users/37785/emmanuel-dupuy\r\n  [11]: https://stackoverflow.com/questions/647116/how-to-decompile-a-whole-jar-file/647140?noredirect=1#comment89196907_647140\r\n  [12]: https://stackoverflow.com/users/1697026/david-kennedy-araujo\r\n  [13]: https://stackoverflow.com/users/2857873/florian-wendelborn\r\n  [14]: https://stackoverflow.com/questions/647116/how-to-decompile-a-whole-jar-file?noredirect=1#comment126287968_647116\r\n  [15]: https://jdec.app/\r\n  [16]: https://github.com/leonardosnt","title":"How to decompile a whole Jar file?","body":"<p>2023: <a href=\"https://stackoverflow.com/users/1048376/splashout\">splashout</a> suggests in <a href=\"https://stackoverflow.com/questions/647116/how-to-decompile-a-whole-jar-file/647140?noredirect=1#comment135449931_647140\">the comments</a> the <a href=\"https://github.com/Vineflower/vineflower\" rel=\"noreferrer\"><code>Vineflower/vineflower</code></a> decompiler (<a href=\"https://github.com/Vineflower/vineflower/releases\" rel=\"noreferrer\">releases</a>), renaming from Quiltflower to Vineflower.</p>\n<pre class=\"lang-bash prettyprint-override\"><code>java -jar vineflower.jar -dgs=1 c:\\Temp\\binary\\library.jar c:\\Temp\\souce\n</code></pre>\n<hr />\n<p>2022 update: <a href=\"https://github.com/QuiltMC/quiltflower\" rel=\"noreferrer\"><strong>QuiltMC/quiltflower</strong></a> is the latest <a href=\"https://www.reddit.com/r/java/comments/ue8u59/new_open_source_java_decompiler/\" rel=\"noreferrer\">most advanced Java decompiler</a>:</p>\n<p>Quiltflower is a modern, general purpose decompiler focused on improving code quality, speed, and usability.<br />\nQuiltflower is a fork of <a href=\"https://github.com/JetBrains/intellij-community/tree/master/plugins/java-decompiler/engine\" rel=\"noreferrer\">Fernflower</a> and Forgeflower.</p>\n<blockquote>\n<p>Changes include:</p>\n<ul>\n<li>New language features (Try with resources, switch expressions, pattern matching, and more)</li>\n<li>Better control flow generation (loops, try-catch, and switch, etc.)</li>\n<li>More configurability</li>\n<li>Better error messages</li>\n<li>Javadoc application</li>\n<li>Multithreading</li>\n<li>Optimization</li>\n<li>Many other miscellaneous features and fixes</li>\n</ul>\n<p>Originally intended just for use with the QuiltMC toolchain with Minecraft, Quiltflower quickly expanded to be a general purpose java decompiler aiming to create code that is as accurate and clean as possible.</p>\n<p>If the name sounds familiar it's because Quiltflower is a fork of <a href=\"https://github.com/JetBrains/intellij-community/tree/master/plugins/java-decompiler/engine\" rel=\"noreferrer\">Fernflower</a>, the (in)famous decompiler that was developed by Stiver, maintained by Jetbrains, and became the default decompiler in Intellij IDEA.<br />\nFernflower also quickly found its way into many other tools.</p>\n<p>Over the past year, Quiltflower has added support for features such as modern string concatenation, a code formatter, sealed classes, pattern matching, switch expressions, try-with-resources, and more. Quiltflower also focuses on the code quality of the decompiled output, and takes readability very seriously.</p>\n</blockquote>\n<p>See <a href=\"https://gist.github.com/SuperCoder7979/c7171b0e34b6eccf0b9f1c37030867dc\" rel=\"noreferrer\">output examples</a>.</p>\n<blockquote>\n<p>Runs nice with <a href=\"https://www.jbang.dev/\" rel=\"noreferrer\">jbang</a></p>\n<pre><code>https://github.com/QuiltMC/quiltflower/releases/download/1.8.1/quiltflower-1.8.1.jar\n</code></pre>\n</blockquote>\n<p>Or:</p>\n<blockquote>\n<pre><code>java -jar quiltflower.jar -dgs=1 c:\\Temp\\binary\\library.jar c:\\Temp\\binary\\Boot.class c:\\Temp\\source\\\n</code></pre>\n</blockquote>\n<hr />\n<p>2009: <a href=\"https://java-decompiler.github.io/\" rel=\"noreferrer\">JavaDecompiler</a> can do a good job with a jar: since 0.2.5, All files, in JAR files, are displayed.</p>\n<p><img src=\"https://i.stack.imgur.com/SF22b.png\" alt=\"http://java.decompiler.free.fr/sites/default/screenshots/screenshot1.png\" /></p>\n<p>See also <a href=\"https://stackoverflow.com/questions/272535/how-do-i-decompile-java-class-files/272595#272595\">the question &quot;How do I “decompile” Java class files?&quot;</a>.</p>\n<p>The JD-Eclipse doesn't seem to have changed since late 2009 though (see <a href=\"http://java.decompiler.free.fr/?q=changes/jdeclipse\" rel=\"noreferrer\">Changes</a>).<br />\nSo its integration with latest Eclipse (3.8, 4.2+) might be problematic.</p>\n<p>JD-Core is actively maintained.</p>\n<p>Both are the result of the fantastic work of (SO user) <a href=\"https://stackoverflow.com/users/37785/emmanuel-dupuy\"><strong>Emmanuel Dupuy</strong></a>.</p>\n<hr />\n<p>2018: A more modern option, mentioned <a href=\"https://stackoverflow.com/questions/647116/how-to-decompile-a-whole-jar-file/647140?noredirect=1#comment89196907_647140\">in the comments</a> by <a href=\"https://stackoverflow.com/users/1697026/david-kennedy-araujo\">David Kennedy Araujo</a>:</p>\n<p><a href=\"https://github.com/JetBrains/intellij-community/tree/master/plugins/java-decompiler/engine\" rel=\"noreferrer\"><strong>JetBrains/intellij-community/plugins/java-decompiler/engine</strong></a></p>\n<blockquote>\n<p>Fernflower is the first actually working analytical decompiler for Java and probably for a high-level programming language in general.</p>\n<pre><code>java -jar fernflower.jar [-&lt;option&gt;=&lt;value&gt;]* [&lt;source&gt;]+ &lt;destination&gt;\n\njava -jar fernflower.jar -hes=0 -hdc=0 c:\\Temp\\binary\\ -e=c:\\Java\\rt.jar c:\\Temp\\source\\\n</code></pre>\n</blockquote>\n<p>See also <a href=\"https://stackoverflow.com/questions/28389006/how-to-decompile-to-java-files-intellij-idea\">How to decompile to java files intellij idea</a> for a command working with recent IntelliJ IDEA.</p>\n<hr />\n<p>2022 update: <a href=\"https://stackoverflow.com/users/2857873/florian-wendelborn\">Florian Wendelborn</a> suggests in <a href=\"https://stackoverflow.com/questions/647116/how-to-decompile-a-whole-jar-file?noredirect=1#comment126287968_647116\">the comments</a></p>\n<blockquote>\n<p>this one works well: <a href=\"https://jdec.app/\" rel=\"noreferrer\">jdec.app</a> from <a href=\"https://github.com/leonardosnt\" rel=\"noreferrer\">Leonardo Santos</a>.</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":226526,"reputation":3813,"user_id":487623,"accept_rate":100,"display_name":"mossplix"},"score":1,"creation_date":1313767108,"post_id":647314,"comment_id":8536972,"body_markdown":"on ubuntu use #!/bin/bash  instead of #!/bin/sh becausw pushd doesnt work for the default ubuntu shell...","body":"on ubuntu use #!/bin/bash  instead of #!/bin/sh becausw pushd doesnt work for the default ubuntu shell..."},{"owner":{"account_id":1848841,"reputation":7336,"user_id":1675875,"accept_rate":38,"display_name":"Chris Prince"},"score":1,"creation_date":1494879772,"post_id":647314,"comment_id":75005503,"body_markdown":"I&#39;m using `javap` within this basic loop structure, and it&#39;s working for me.","body":"I&#39;m using <code>javap</code> within this basic loop structure, and it&#39;s working for me."},{"owner":{"account_id":4279210,"reputation":751,"user_id":4453524,"accept_rate":67,"display_name":"ljrk"},"score":0,"creation_date":1615038867,"post_id":647314,"comment_id":117570830,"body_markdown":"@mossplix or use /bin/sh (more portable) with `cd` and `cd -`, which is enough for this use case :-)","body":"@mossplix or use /bin/sh (more portable) with <code>cd</code> and <code>cd -</code>, which is enough for this use case :-)"}],"tags":[],"owner":{"account_id":11959,"reputation":17676,"user_id":23309,"accept_rate":58,"display_name":"Chris R"},"comment_count":3,"down_vote_count":0,"up_vote_count":38,"is_accepted":false,"score":38,"last_activity_date":1237092006,"creation_date":1237092006,"answer_id":647314,"question_id":647116,"body_markdown":"If you happen to have both a bash shell and jad:\r\n\r\n    JAR=(your jar file name)\r\n    unzip -d $JAR.tmp $JAR\r\n    pushd $JAR.tmp\r\n\tfor f in `find . -name &#39;*.class&#39;`; do\r\n\t    jad -d $(dirname $f) -s java -lnc $f\r\n\tdone\r\n\tpopd\r\n\r\nI might be a tiny, tiny bit off with that, but it should work more or less as advertised.  You should end up with `$JAR.tmp` containing your decompiled files.","title":"How to decompile a whole Jar file?","body":"<p>If you happen to have both a bash shell and jad:</p>\n\n<pre><code>JAR=(your jar file name)\nunzip -d $JAR.tmp $JAR\npushd $JAR.tmp\nfor f in `find . -name '*.class'`; do\n    jad -d $(dirname $f) -s java -lnc $f\ndone\npopd\n</code></pre>\n\n<p>I might be a tiny, tiny bit off with that, but it should work more or less as advertised.  You should end up with <code>$JAR.tmp</code> containing your decompiled files.</p>\n"},{"tags":[],"owner":{"account_id":12462,"reputation":162446,"user_id":24545,"accept_rate":99,"display_name":"Yuval Adam"},"comment_count":0,"down_vote_count":0,"up_vote_count":41,"is_accepted":false,"score":41,"last_activity_date":1501017843,"creation_date":1237107633,"answer_id":647505,"question_id":647116,"body_markdown":"First of all, it&#39;s worth remembering that all Java archive files (`.jar`/`.war`/etc...) are **all basically just fancy`.zip` files**, with a few added manifests and metadata.\r\n\r\nSecond, to tackle this problem I personally use several tools which handle this problem on all levels:\r\n\r\n - [**Jad**][1] + [**Jadclipse**][2] while working in IDE for decompiling `.class` files\r\n - [**WinRAR**][3], my favorite compression tool natively supports Java archives (again, see first paragraph).\r\n - [**Beyond Compare**][4], my favorite diff tool, when configured correctly can do on-the-fly comparisons between any archive file, including `jar`s. Well worth a try.\r\n\r\nThe advantage of all the aforementioned, is that I do not need to hold any other external tool which clutters my work environment. Everything I will ever need from one of those files can be handled inside my IDE or diffed with other files natively.\r\n\r\n\r\n  [1]: https://varaneckas.com/jad/\r\n  [2]: http://jadclipse.sourceforge.net/wiki/index.php/Main_Page\r\n  [3]: http://www.rarlab.com/\r\n  [4]: http://www.scootersoftware.com/","title":"How to decompile a whole Jar file?","body":"<p>First of all, it's worth remembering that all Java archive files (<code>.jar</code>/<code>.war</code>/etc...) are <strong>all basically just fancy<code>.zip</code> files</strong>, with a few added manifests and metadata.</p>\n\n<p>Second, to tackle this problem I personally use several tools which handle this problem on all levels:</p>\n\n<ul>\n<li><a href=\"https://varaneckas.com/jad/\" rel=\"noreferrer\"><strong>Jad</strong></a> + <a href=\"http://jadclipse.sourceforge.net/wiki/index.php/Main_Page\" rel=\"noreferrer\"><strong>Jadclipse</strong></a> while working in IDE for decompiling <code>.class</code> files</li>\n<li><a href=\"http://www.rarlab.com/\" rel=\"noreferrer\"><strong>WinRAR</strong></a>, my favorite compression tool natively supports Java archives (again, see first paragraph).</li>\n<li><a href=\"http://www.scootersoftware.com/\" rel=\"noreferrer\"><strong>Beyond Compare</strong></a>, my favorite diff tool, when configured correctly can do on-the-fly comparisons between any archive file, including <code>jar</code>s. Well worth a try.</li>\n</ul>\n\n<p>The advantage of all the aforementioned, is that I do not need to hold any other external tool which clutters my work environment. Everything I will ever need from one of those files can be handled inside my IDE or diffed with other files natively.</p>\n"},{"tags":[],"owner":{"account_id":30624,"reputation":498,"user_id":83592,"display_name":"Joel S"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1238153463,"creation_date":1238153463,"answer_id":689396,"question_id":647116,"body_markdown":"**Note: This solution only works for Mac and *nix users.**\r\n\r\nI also tried to find Jad with no luck. My quick solution was to download [MacJad][1] that contains jad. Once you downloaded it you can find jad in [where-you-downloaded-macjad]/MacJAD/Contents/Resources/jad.\r\n\r\n\r\n\r\n  [1]: http://mac.softpedia.com/get/Development/Compilers/MacJAD.shtml","title":"How to decompile a whole Jar file?","body":"<p><strong>Note: This solution only works for Mac and *nix users.</strong></p>\n\n<p>I also tried to find Jad with no luck. My quick solution was to download <a href=\"http://mac.softpedia.com/get/Development/Compilers/MacJAD.shtml\" rel=\"nofollow noreferrer\">MacJad</a> that contains jad. Once you downloaded it you can find jad in [where-you-downloaded-macjad]/MacJAD/Contents/Resources/jad.</p>\n"},{"comments":[{"owner":{"account_id":216152,"reputation":9100,"user_id":471214,"accept_rate":54,"display_name":"mmdemirbas"},"score":0,"creation_date":1343120039,"post_id":689419,"comment_id":15398449,"body_markdown":"I couldn&#39;t download Windows or Linux version of JD-GUI. Is this problem only appears to me?","body":"I couldn&#39;t download Windows or Linux version of JD-GUI. Is this problem only appears to me?"},{"owner":{"account_id":17919,"reputation":1594,"user_id":40614,"accept_rate":78,"display_name":"pramodc84"},"score":0,"creation_date":1371094527,"post_id":689419,"comment_id":24701340,"body_markdown":"@JanusTroelsen I deleted it. Thank you for notifying it. Lets keep answers clean :)","body":"@JanusTroelsen I deleted it. Thank you for notifying it. Lets keep answers clean :)"}],"tags":[],"owner":{"account_id":18236,"reputation":46374,"user_id":41619,"accept_rate":91,"display_name":"Adam Paynter"},"comment_count":2,"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1567583251,"creation_date":1238153871,"answer_id":689419,"question_id":647116,"body_markdown":"I have had reasonable success with a tool named (frustratingly) &quot;[JD: Java Decompiler][1]&quot;.\r\n\r\nI have found it better than most decompilers *when dealing with classes compiled for Java 5 and higher*. Unfortunately, it can still have some hiccups where JAD would normally succeed.\r\n\r\n  [1]: http://java-decompiler.github.io/","title":"How to decompile a whole Jar file?","body":"<p>I have had reasonable success with a tool named (frustratingly) \"<a href=\"http://java-decompiler.github.io/\" rel=\"nofollow noreferrer\">JD: Java Decompiler</a>\".</p>\n\n<p>I have found it better than most decompilers <em>when dealing with classes compiled for Java 5 and higher</em>. Unfortunately, it can still have some hiccups where JAD would normally succeed.</p>\n"},{"comments":[{"owner":{"account_id":1158046,"reputation":2465,"user_id":1138137,"accept_rate":67,"display_name":"Alper Akture"},"score":1,"creation_date":1343411427,"post_id":2208761,"comment_id":15505307,"body_markdown":"I&#39;ve used jad for a while and needed a quick way to extract and decompile a whole jar. Thanks, this helped immensely.","body":"I&#39;ve used jad for a while and needed a quick way to extract and decompile a whole jar. Thanks, this helped immensely."},{"owner":{"account_id":8594459,"reputation":814,"user_id":6437920,"display_name":"Joel Wembo"},"score":0,"creation_date":1662536472,"post_id":2208761,"comment_id":130025257,"body_markdown":"Worked immediately","body":"Worked immediately"}],"tags":[],"owner":{"account_id":587697,"reputation":131,"user_id":267252,"display_name":"cybertoast"},"comment_count":2,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1265388438,"creation_date":1265388438,"answer_id":2208761,"question_id":647116,"body_markdown":"Something like:\r\n\r\n    jar -xf foo.jar &amp;&amp; find . -iname &quot;*.class&quot; | xargs /opt/local/bin/jad -r\r\n\r\nmaybe?","title":"How to decompile a whole Jar file?","body":"<p>Something like:</p>\n\n<pre><code>jar -xf foo.jar &amp;&amp; find . -iname \"*.class\" | xargs /opt/local/bin/jad -r\n</code></pre>\n\n<p>maybe?</p>\n"},{"comments":[{"owner":{"account_id":925811,"reputation":5543,"user_id":956620,"accept_rate":25,"display_name":"Sam"},"score":0,"creation_date":1425293730,"post_id":5633179,"comment_id":45888584,"body_markdown":"Thanks, but had to change &quot;jad&quot; to &quot;./jad&quot; on line 23 and run &quot;bash decompile.jar.sh foo.jar -d&quot; as I did not want to pollute my bin folder","body":"Thanks, but had to change &quot;jad&quot; to &quot;./jad&quot; on line 23 and run &quot;bash decompile.jar.sh foo.jar -d&quot; as I did not want to pollute my bin folder"},{"owner":{"account_id":455653,"reputation":1784,"user_id":853948,"accept_rate":92,"display_name":"N Jay"},"score":0,"creation_date":1435018499,"post_id":5633179,"comment_id":50013335,"body_markdown":"any recompiler ? recompiles jad files into jar ?","body":"any recompiler ? recompiles jad files into jar ?"}],"tags":[],"owner":{"account_id":678301,"reputation":51,"user_id":703767,"display_name":"merzod"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1302601074,"creation_date":1302601074,"answer_id":5633179,"question_id":647116,"body_markdown":"Insert the following into decompile.jar.sh\r\n\r\n    # Usage: decompile.jar.sh some.jar [-d]\r\n    \r\n    # clean target folders\r\n    function clean_target {\r\n      rm -rf $unjar $src $jad_log\r\n    }\r\n    \r\n    # clean all debug stuff\r\n    function clean_stuff {\r\n      rm -rf $unjar $jad_log\r\n    }\r\n    \r\n    # the main function\r\n    function work {\r\n      jar=$1\r\n      unjar=`basename $jar.unjar`\r\n      src=`basename $jar.src`\r\n      jad_log=jad.log\r\n    \r\n      clean_target\r\n    \r\n      unzip -q $jar -d $unjar\r\n      jad -d $src -ff -r -lnc -o -s java $unjar/**/*.class &gt; $jad_log 2&gt;&amp;1\r\n    \r\n      if [ ! $debug ]; then\r\n        clean_stuff\r\n      fi\r\n    \r\n      if [ -d $src ] \r\n        then\r\n          echo &quot;$jar has been decompiled to $src&quot;\r\n        else\r\n          echo &quot;Got some problems check output or run in debug mode&quot;\r\n      fi\r\n    }\r\n    \r\n    function usage {\r\n      echo &quot;This script extract and decompile JAR file&quot;\r\n      echo &quot;Usage: $0 some.jar [-d]&quot;\r\n      echo &quot;\twhere: some.jar is the target to decompile&quot;\r\n      echo &quot;\tuse -d for debug mode&quot;\r\n    }\r\n    \r\n    # check params\r\n    if [ -n &quot;$1&quot; ]\r\n      then\r\n        if [ &quot;$2&quot; == &quot;-d&quot; ]; then\r\n          debug=true\r\n          set -x\r\n        fi\r\n        work $1\r\n      else\r\n        usage\r\n    fi\r\n\r\n - chmod +x decomplie.jar.sh //executable\r\n - ln -s ./decomplie.jar.s /usr/bin/dj\r\n\r\nReady to use, just type `dj your.jar` and you will get `your.jar.src` folder with sources. Use `-d` option for debug mode.\r\n\r\n\r\n","title":"How to decompile a whole Jar file?","body":"<p>Insert the following into decompile.jar.sh</p>\n\n<pre><code># Usage: decompile.jar.sh some.jar [-d]\n\n# clean target folders\nfunction clean_target {\n  rm -rf $unjar $src $jad_log\n}\n\n# clean all debug stuff\nfunction clean_stuff {\n  rm -rf $unjar $jad_log\n}\n\n# the main function\nfunction work {\n  jar=$1\n  unjar=`basename $jar.unjar`\n  src=`basename $jar.src`\n  jad_log=jad.log\n\n  clean_target\n\n  unzip -q $jar -d $unjar\n  jad -d $src -ff -r -lnc -o -s java $unjar/**/*.class &gt; $jad_log 2&gt;&amp;1\n\n  if [ ! $debug ]; then\n    clean_stuff\n  fi\n\n  if [ -d $src ] \n    then\n      echo \"$jar has been decompiled to $src\"\n    else\n      echo \"Got some problems check output or run in debug mode\"\n  fi\n}\n\nfunction usage {\n  echo \"This script extract and decompile JAR file\"\n  echo \"Usage: $0 some.jar [-d]\"\n  echo \"    where: some.jar is the target to decompile\"\n  echo \"    use -d for debug mode\"\n}\n\n# check params\nif [ -n \"$1\" ]\n  then\n    if [ \"$2\" == \"-d\" ]; then\n      debug=true\n      set -x\n    fi\n    work $1\n  else\n    usage\nfi\n</code></pre>\n\n<ul>\n<li>chmod +x decomplie.jar.sh //executable</li>\n<li>ln -s ./decomplie.jar.s /usr/bin/dj</li>\n</ul>\n\n<p>Ready to use, just type <code>dj your.jar</code> and you will get <code>your.jar.src</code> folder with sources. Use <code>-d</code> option for debug mode.</p>\n"}],"owner":{"account_id":19119,"reputation":15950,"user_id":44533,"accept_rate":60,"display_name":"StoneHeart"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":739904,"favorite_count":0,"down_vote_count":0,"up_vote_count":339,"closed_date":1438691852,"accepted_answer_id":647140,"answer_count":8,"score":339,"last_activity_date":1691099116,"creation_date":1237082923,"question_id":647116,"body_markdown":"Does anyone know of a free decompiler that can decompile an entire Jar file instead of a single class? I have a problem with sub classes like name$1.class name$2.class name.class","title":"How to decompile a whole Jar file?","body":"<p>Does anyone know of a free decompiler that can decompile an entire Jar file instead of a single class? I have a problem with sub classes like name$1.class name$2.class name.class</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2625978,"reputation":857,"user_id":2272958,"accept_rate":50,"display_name":"Kapil"},"score":2,"creation_date":1576217455,"post_id":59316927,"comment_id":104834922,"body_markdown":"Quick fix: replace `fout.write(i);` with `fout.write(Integer.toString(i).getBytes());`","body":"Quick fix: replace <code>fout.write(i);</code> with <code>fout.write(Integer.toString(i).getBytes());</code>"},{"owner":{"account_id":8544053,"reputation":997,"user_id":6418029,"display_name":"Ashutosh"},"score":1,"creation_date":1576217490,"post_id":59316927,"comment_id":104834936,"body_markdown":"Does this answer your question? [Write int to text file using Writer](https://stackoverflow.com/questions/7357852/write-int-to-text-file-using-writer)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/7357852/write-int-to-text-file-using-writer\">Write int to text file using Writer</a>"}],"answers":[{"tags":[],"owner":{"account_id":14937684,"reputation":541,"user_id":10785239,"display_name":"I&#39;m_Pratik"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1576218385,"creation_date":1576217511,"answer_id":59317062,"question_id":59316927,"body_markdown":"You can use `PrintWriter` and `FileWriter` to write into the file. You can refer below code for your reference: \r\n\r\n    public class FileWriterExample {\r\n    \tpublic static void main(String args[]) {\r\n    \t\ttry {\r\n    \t\t\tPrintWriter fileout = new PrintWriter(new FileWriter(&quot;C://Users//Desktop//random.txt&quot;));\r\n    \r\n    \t\t\tfor (int i = 1; i &lt; 1001; i++) {\r\n    \t\t\t\tfileout.println(i);\r\n    \t\t\t}\r\n    \t\t\tfileout.close();\r\n    \t\t\tSystem.out.println(&quot;success...&quot;);\r\n    \t\t} catch (Exception e) {\r\n    \t\t\tSystem.out.println(e);\r\n    \t\t}\r\n    \t}\r\n    }","title":"How to write 1 to 1000 numbers into text file using java?","body":"<p>You can use <code>PrintWriter</code> and <code>FileWriter</code> to write into the file. You can refer below code for your reference: </p>\n\n<pre><code>public class FileWriterExample {\n    public static void main(String args[]) {\n        try {\n            PrintWriter fileout = new PrintWriter(new FileWriter(\"C://Users//Desktop//random.txt\"));\n\n            for (int i = 1; i &lt; 1001; i++) {\n                fileout.println(i);\n            }\n            fileout.close();\n            System.out.println(\"success...\");\n        } catch (Exception e) {\n            System.out.println(e);\n        }\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":14937684,"reputation":541,"user_id":10785239,"display_name":"I&#39;m_Pratik"},"score":0,"creation_date":1576218391,"post_id":59317121,"comment_id":104835209,"body_markdown":"Why convert Integer to String every time? This will eventually increase computation","body":"Why convert Integer to String every time? This will eventually increase computation"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1576253741,"post_id":59317121,"comment_id":104851732,"body_markdown":"`String.valueOf(i)` will be more efficient than `new Integer(i).toString()`.","body":"<code>String.valueOf(i)</code> will be more efficient than <code>new Integer(i).toString()</code>."}],"tags":[],"owner":{"account_id":3640818,"reputation":1743,"user_id":3034938,"accept_rate":100,"display_name":"Pushpendra Kumar"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1576218133,"creation_date":1576217784,"answer_id":59317121,"question_id":59316927,"body_markdown":"    import java.io.FileOutputStream;\r\n    class FileWriterExample {\r\n       public static void main(String args[]){\r\n           try{\r\n               FileOutputStream fout=new FileOutputStream(&quot;./trial.txt&quot;);\r\n            \r\n              int i;\r\n              for(i = 0; i&lt;= 1000 ; i++) {\r\n                  String a = new Integer(i).toString();\r\n                  a = a + &#39; &#39;;\r\n                  fout.write(a.getBytes());\r\n              }\r\n    \r\n    \r\n               fout.close();\r\n               System.out.println(&quot;success...&quot;);\r\n           }catch(Exception e){System.out.println(e);}\r\n       }\r\n    }","title":"How to write 1 to 1000 numbers into text file using java?","body":"<pre><code>import java.io.FileOutputStream;\nclass FileWriterExample {\n   public static void main(String args[]){\n       try{\n           FileOutputStream fout=new FileOutputStream(\"./trial.txt\");\n\n          int i;\n          for(i = 0; i&lt;= 1000 ; i++) {\n              String a = new Integer(i).toString();\n              a = a + ' ';\n              fout.write(a.getBytes());\n          }\n\n\n           fout.close();\n           System.out.println(\"success...\");\n       }catch(Exception e){System.out.println(e);}\n   }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2974733,"reputation":721,"user_id":2526021,"display_name":"marco"},"score":0,"creation_date":1576269978,"post_id":59317140,"comment_id":104858514,"body_markdown":"this works but only coincidentally because you also convert the integer to a string when appending the newline character","body":"this works but only coincidentally because you also convert the integer to a string when appending the newline character"},{"owner":{"account_id":12583055,"reputation":447,"user_id":9732672,"display_name":"NomadMaker"},"score":0,"creation_date":1576275844,"post_id":59317140,"comment_id":104860351,"body_markdown":"It&#39;s not a coincidence. This is how the type system works.","body":"It&#39;s not a coincidence. This is how the type system works."}],"tags":[],"owner":{"account_id":12583055,"reputation":447,"user_id":9732672,"display_name":"NomadMaker"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1576217881,"creation_date":1576217881,"answer_id":59317140,"question_id":59316927,"body_markdown":"I would like to suggest using a FileWriter (java.io.FileWriter) instead of a FileOutputStream. It assumes that the file being written is  a text file.\r\n\r\nYou might have to explicitly put in the new lines, so your write would look like\r\n\r\n    fout.write(i + &quot;\\n&quot;);\r\n\r\nAnd you will still need to declare i to be an integer. Those should be the only change to you code.","title":"How to write 1 to 1000 numbers into text file using java?","body":"<p>I would like to suggest using a FileWriter (java.io.FileWriter) instead of a FileOutputStream. It assumes that the file being written is  a text file.</p>\n\n<p>You might have to explicitly put in the new lines, so your write would look like</p>\n\n<pre><code>fout.write(i + \"\\n\");\n</code></pre>\n\n<p>And you will still need to declare i to be an integer. Those should be the only change to you code.</p>\n"},{"tags":[],"owner":{"account_id":14363900,"reputation":3,"user_id":10375530,"display_name":"Hirusha Kumarasinghe"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1576225712,"creation_date":1576225125,"answer_id":59318585,"question_id":59316927,"body_markdown":"Try this one. I converted the integer value to String and used BufferReader, FileWriter and InpuStreamReader Classes\r\n\r\n    import java.io.BufferedReader;\r\n    import java.io.BufferedWriter;\r\n    import java.io.FileWriter;\r\n    import java.io.IOException;\r\n    import java.io.InputStreamReader;\r\n    \r\n    public class FileWriterExample {\r\n    \tpublic static void main(String[] args) throws IOException {\r\n    \r\n    \t\tBufferedReader in = new BufferedReader(new InputStreamReader(System.in));\r\n    \r\n    \t    BufferedWriter out = new BufferedWriter(new FileWriter(&quot;E:\\\\trial.txt&quot;));\r\n    \t    try {\r\n    \t        for(int i = 0; i&lt; 1000 ; i++) {\r\n    \t        \t\r\n    \t        \t// in here value will be written as String format\r\n    \t        \t out.write(String.valueOf(i));\r\n    \t        \t // goes to new line if want\r\n    \t\t         out.newLine();\r\n            }\r\n    \t    \r\n    \t        System.out.print(&quot;Write Successful&quot;);\r\n    \t    } catch(IOException e1) {\r\n    \t        System.out.println(&quot;Error during reading/writing&quot;);\r\n    \t    } finally {\r\n    \t        out.close();\r\n    \t        in.close();\r\n    \t    }\r\n    \r\n    \t}\r\n    \r\n    }\r\n","title":"How to write 1 to 1000 numbers into text file using java?","body":"<p>Try this one. I converted the integer value to String and used BufferReader, FileWriter and InpuStreamReader Classes</p>\n\n<pre><code>import java.io.BufferedReader;\nimport java.io.BufferedWriter;\nimport java.io.FileWriter;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\n\npublic class FileWriterExample {\n    public static void main(String[] args) throws IOException {\n\n        BufferedReader in = new BufferedReader(new InputStreamReader(System.in));\n\n        BufferedWriter out = new BufferedWriter(new FileWriter(\"E:\\\\trial.txt\"));\n        try {\n            for(int i = 0; i&lt; 1000 ; i++) {\n\n                // in here value will be written as String format\n                 out.write(String.valueOf(i));\n                 // goes to new line if want\n                 out.newLine();\n        }\n\n            System.out.print(\"Write Successful\");\n        } catch(IOException e1) {\n            System.out.println(\"Error during reading/writing\");\n        } finally {\n            out.close();\n            in.close();\n        }\n\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2974733,"reputation":721,"user_id":2526021,"display_name":"marco"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691098967,"creation_date":1578389378,"answer_id":59625542,"question_id":59316927,"body_markdown":"With PrintStream or PrintWriter you can print all basic types directly without needing to convert to String beforehand:\r\n\r\n```java\r\n    public static void main(String args[]){\r\n        try{\r\n            FileOutputStream fout = new FileOutputStream(&quot;D:\\\\trial.txt&quot;);\r\n            PrintStream pout = new PrintStream(fout);\r\n            for(int i = 1; i&lt;= 1000 ; i++) {\r\n                pout.println(i);\r\n            }\r\n            pout.close();\r\n            System.out.println(&quot;success...&quot;);\r\n        } catch(Exception e){\r\n            System.out.println(e);\r\n        }\r\n    }\r\n\r\n```","title":"How to write 1 to 1000 numbers into text file using java?","body":"<p>With PrintStream or PrintWriter you can print all basic types directly without needing to convert to String beforehand:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static void main(String args[]){\n        try{\n            FileOutputStream fout = new FileOutputStream(&quot;D:\\\\trial.txt&quot;);\n            PrintStream pout = new PrintStream(fout);\n            for(int i = 1; i&lt;= 1000 ; i++) {\n                pout.println(i);\n            }\n            pout.close();\n            System.out.println(&quot;success...&quot;);\n        } catch(Exception e){\n            System.out.println(e);\n        }\n    }\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18600355,"reputation":21,"user_id":13555337,"display_name":"Manoj Boganadham"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1614689994,"creation_date":1614689994,"answer_id":66439914,"question_id":59316927,"body_markdown":"You can use the following two functions to do the job. Both will write the numbers separated by spaces.\r\n\r\nThe first function will always append the numbers to the file. The second function will write the numbers discarding the previous content of the file. You can use them according to your requirement.\r\n\r\n    public static void writeNums(int[] arr, File file) throws Exception{\r\n        FileWriter fw = new FileWriter(file, true);\r\n        for(int x:arr){\r\n            fw.write(Integer.toString(x));\r\n            fw.write(&quot; &quot;);\r\n        }\r\n        fw.close();\r\n    }\r\n\r\n    public static void writeNums(int[] arr, File file) throws Exception{\r\n        PrintWriter pw = new PrintWriter(file);\r\n        for(int x:arr){\r\n            pw.format(&quot;%d &quot;, x);\r\n        }\r\n        pw.close();\r\n    }","title":"How to write 1 to 1000 numbers into text file using java?","body":"<p>You can use the following two functions to do the job. Both will write the numbers separated by spaces.</p>\n<p>The first function will always append the numbers to the file. The second function will write the numbers discarding the previous content of the file. You can use them according to your requirement.</p>\n<pre><code>public static void writeNums(int[] arr, File file) throws Exception{\n    FileWriter fw = new FileWriter(file, true);\n    for(int x:arr){\n        fw.write(Integer.toString(x));\n        fw.write(&quot; &quot;);\n    }\n    fw.close();\n}\n\npublic static void writeNums(int[] arr, File file) throws Exception{\n    PrintWriter pw = new PrintWriter(file);\n    for(int x:arr){\n        pw.format(&quot;%d &quot;, x);\n    }\n    pw.close();\n}\n</code></pre>\n"}],"owner":{"account_id":17274086,"reputation":13,"user_id":12509072,"display_name":"Narayanan Krish"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5586,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":59317062,"answer_count":6,"score":1,"last_activity_date":1691098967,"creation_date":1576216816,"question_id":59316927,"body_markdown":"I am fresher candidate. So how to write 1 to 1000 numbers into text file? I tried las below code but it writes as like ASCII values. unable to print as numbers so how to write as numbers?\r\n\r\n\r\n        import java.io.FileOutputStream;\r\n        public class FileWriterExample {\r\n           public static void main(String args[]){\r\n               try{\r\n                   FileOutputStream fout=new FileOutputStream(&quot;D:\\\\trial.txt&quot;);\r\n                   int i;\r\n                for(i = 0; i&lt; 1000 ; i++) {\r\n                    fout.write(i);\r\n                }         \r\n                   fout.close();\r\n                   System.out.println(&quot;success...&quot;);\r\n               }catch(Exception e){System.out.println(e);}\r\n           }\r\n    }\r\n\r\n","title":"How to write 1 to 1000 numbers into text file using java?","body":"<p>I am fresher candidate. So how to write 1 to 1000 numbers into text file? I tried las below code but it writes as like ASCII values. unable to print as numbers so how to write as numbers?</p>\n\n<pre><code>    import java.io.FileOutputStream;\n    public class FileWriterExample {\n       public static void main(String args[]){\n           try{\n               FileOutputStream fout=new FileOutputStream(\"D:\\\\trial.txt\");\n               int i;\n            for(i = 0; i&lt; 1000 ; i++) {\n                fout.write(i);\n            }         \n               fout.close();\n               System.out.println(\"success...\");\n           }catch(Exception e){System.out.println(e);}\n       }\n}\n</code></pre>\n"},{"tags":["java","hibernate","jpa","orm","entity"],"comments":[{"owner":{"account_id":1568342,"reputation":841,"user_id":1456631,"display_name":"vijay"},"score":2,"creation_date":1507896414,"post_id":2302802,"comment_id":80405044,"body_markdown":"In want context is this error? is it with or without transient variable?","body":"In want context is this error? is it with or without transient variable?"},{"owner":{"account_id":16448586,"reputation":114,"user_id":11882586,"display_name":"Gayal Rupasinghe"},"score":1,"creation_date":1627464719,"post_id":2302802,"comment_id":121161294,"body_markdown":"If you have relationships between the objects that you are trying to save, make sure that they are saved in the correct order. for eg: author is saved before book cause author is a must for the book. like wise.","body":"If you have relationships between the objects that you are trying to save, make sure that they are saved in the correct order. for eg: author is saved before book cause author is a must for the book. like wise."}],"answers":[{"comments":[{"owner":{"account_id":19971,"reputation":55479,"user_id":47281,"accept_rate":83,"display_name":"Marcus Leon"},"score":11,"creation_date":1271096862,"post_id":2302814,"comment_id":2637067,"body_markdown":"Isn&#39;t this implicit?  Wouldn&#39;t you always want Hibernate to save them?","body":"Isn&#39;t this implicit?  Wouldn&#39;t you always want Hibernate to save them?"},{"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"score":46,"creation_date":1271104050,"post_id":2302814,"comment_id":2637999,"body_markdown":"@Marcus - no, it&#39;s not. You may want to handle them manually.","body":"@Marcus - no, it&#39;s not. You may want to handle them manually."},{"owner":{"account_id":15324,"reputation":10202,"user_id":32232,"accept_rate":70,"display_name":"Alex Marshall"},"score":5,"creation_date":1290126905,"post_id":2302814,"comment_id":4567293,"body_markdown":"Bozho is right. I&#39;ve encountered circumstances where I&#39;ve had collections that I wanted to manage manually because of their size, or because of business rules that don&#39;t allow all objects in a collection to get saved at the same time.","body":"Bozho is right. I&#39;ve encountered circumstances where I&#39;ve had collections that I wanted to manage manually because of their size, or because of business rules that don&#39;t allow all objects in a collection to get saved at the same time."},{"owner":{"account_id":30319,"reputation":90360,"user_id":82609,"accept_rate":84,"display_name":"Sebastien Lorber"},"score":46,"creation_date":1342431972,"post_id":2302814,"comment_id":15195234,"body_markdown":"It doesn&#39;t happen only for collections but also simple one to one mappings","body":"It doesn&#39;t happen only for collections but also simple one to one mappings"},{"owner":{"account_id":912782,"reputation":38886,"user_id":946224,"accept_rate":88,"display_name":"Sergii Shevchyk"},"score":18,"creation_date":1348772834,"post_id":2302814,"comment_id":17028163,"body_markdown":"Wouldn&#39;t it be better to start with CascadeType.PERSIST and use persist to save?","body":"Wouldn&#39;t it be better to start with CascadeType.PERSIST and use persist to save?"},{"owner":{"account_id":248909,"reputation":21944,"user_id":524588,"accept_rate":78,"display_name":"Sanghyun Lee"},"score":4,"creation_date":1400155964,"post_id":2302814,"comment_id":36376396,"body_markdown":"@shevchik Using `CascadeType.PERSIST` didn&#39;t work for me. I hope someone explain the reason.","body":"@shevchik Using <code>CascadeType.PERSIST</code> didn&#39;t work for me. I hope someone explain the reason."},{"owner":{"account_id":1305658,"reputation":4415,"user_id":1254709,"accept_rate":72,"display_name":"Pooya"},"score":4,"creation_date":1425289965,"post_id":2302814,"comment_id":45886494,"body_markdown":"using cascade=&#39;all&#39; will re-insert parent. How can I avoid this? without cascade, It raises the above exception","body":"using cascade=&#39;all&#39; will re-insert parent. How can I avoid this? without cascade, It raises the above exception"},{"owner":{"account_id":3019457,"reputation":3814,"user_id":2560836,"accept_rate":80,"display_name":"Chris311"},"score":5,"creation_date":1482239894,"post_id":2302814,"comment_id":69686017,"body_markdown":"But don&#39;t just add CascadeType.ALL without using your brain. You might have successor/predecessor of the same type! This would result in some kind of infinite loop.","body":"But don&#39;t just add CascadeType.ALL without using your brain. You might have successor/predecessor of the same type! This would result in some kind of infinite loop."},{"owner":{"account_id":3357289,"reputation":1456,"user_id":2819935,"accept_rate":83,"display_name":"Syed Anas"},"score":0,"creation_date":1500475047,"post_id":2302814,"comment_id":77354870,"body_markdown":"I wish someone replies to @Pooya comment coz i have the same problem and looking for solution.","body":"I wish someone replies to @Pooya comment coz i have the same problem and looking for solution."},{"owner":{"account_id":2433933,"reputation":802,"user_id":2124285,"accept_rate":85,"display_name":"nespapu"},"score":0,"creation_date":1505456913,"post_id":2302814,"comment_id":79429411,"body_markdown":"How do you know if a collection type rather than any other type?","body":"How do you know if a collection type rather than any other type?"},{"owner":{"account_id":1568342,"reputation":841,"user_id":1456631,"display_name":"vijay"},"score":0,"creation_date":1507896503,"post_id":2302814,"comment_id":80405107,"body_markdown":"Cascade and transient are totally unrelated, infact the question doesn&#39;t carry any info about the context.","body":"Cascade and transient are totally unrelated, infact the question doesn&#39;t carry any info about the context."},{"owner":{"account_id":5936227,"reputation":601,"user_id":4669126,"accept_rate":67,"display_name":"Kenny"},"score":3,"creation_date":1533142994,"post_id":2302814,"comment_id":90241844,"body_markdown":"For anyone ever getting this error while using foreign keys: Cascade was not a solution for me as I did not want to store a collection in my parent-entity. All i wanted to do is save the id of another (foreign key) child-entity in my parent-entity. My problem seemed to be that I had used a &quot;long&quot; id in the child-entity, instead of a &quot;Long&quot; (lowercase vs uppercase). Sorry for bad use of words.","body":"For anyone ever getting this error while using foreign keys: Cascade was not a solution for me as I did not want to store a collection in my parent-entity. All i wanted to do is save the id of another (foreign key) child-entity in my parent-entity. My problem seemed to be that I had used a &quot;long&quot; id in the child-entity, instead of a &quot;Long&quot; (lowercase vs uppercase). Sorry for bad use of words."},{"owner":{"account_id":3574555,"reputation":2368,"user_id":2984127,"accept_rate":42,"display_name":"KasparTr"},"score":0,"creation_date":1542024719,"post_id":2302814,"comment_id":93408075,"body_markdown":"Adding &#39;cascade=CascadeType.ALL&#39; fixes this error but introduces a new one when trying to save object created in different threads (using Async). Any ideas how these 2 can work together?","body":"Adding &#39;cascade=CascadeType.ALL&#39; fixes this error but introduces a new one when trying to save object created in different threads (using Async). Any ideas how these 2 can work together?"},{"owner":{"account_id":445162,"reputation":1058,"user_id":837438,"accept_rate":75,"display_name":"Christos Karapapas"},"score":1,"creation_date":1555788063,"post_id":2302814,"comment_id":98226068,"body_markdown":"@Bozho Having a OneToOne relation between two entities and keeping the child_id in parent entity and using Cascade.PERSIST on that property won&#39;t save the child and I get the Error of  `object references an unsaved transient instance - save the transient instance before flushing` However, using Cascade.ALL on that property fixes the problem, saves the child and its id to the parent child_id property. Why is that? isn&#39;t the Cascade.PERSIST made exactly for that reason? Why should I use ALL, I was hoping to avoid the Cascade.DELETE for safety.","body":"@Bozho Having a OneToOne relation between two entities and keeping the child_id in parent entity and using Cascade.PERSIST on that property won&#39;t save the child and I get the Error of  <code>object references an unsaved transient instance - save the transient instance before flushing</code> However, using Cascade.ALL on that property fixes the problem, saves the child and its id to the parent child_id property. Why is that? isn&#39;t the Cascade.PERSIST made exactly for that reason? Why should I use ALL, I was hoping to avoid the Cascade.DELETE for safety."}],"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"comment_count":14,"down_vote_count":9,"up_vote_count":1109,"is_accepted":true,"score":1100,"last_activity_date":1266683102,"creation_date":1266683102,"answer_id":2302814,"question_id":2302802,"body_markdown":"You should include `cascade=&quot;all&quot;` (if using xml) or `cascade=CascadeType.ALL` (if using annotations) on your collection mapping.\r\n\r\nThis happens because you have a collection in your entity, and that collection has one or more items which are not present in the database. By specifying the above options you tell hibernate to save them to the database when saving their parent.","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>You should include <code>cascade=\"all\"</code> (if using xml) or <code>cascade=CascadeType.ALL</code> (if using annotations) on your collection mapping.</p>\n\n<p>This happens because you have a collection in your entity, and that collection has one or more items which are not present in the database. By specifying the above options you tell hibernate to save them to the database when saving their parent.</p>\n"},{"comments":[{"owner":{"account_id":2251716,"reputation":803,"user_id":1983814,"accept_rate":73,"display_name":"CsBalazsHungary"},"score":1,"creation_date":1417005807,"post_id":10680218,"comment_id":42793733,"body_markdown":"Similar problem to mine. Afterall, when I reloaded the entity locally, set the property, then saved, it worked fine.","body":"Similar problem to mine. Afterall, when I reloaded the entity locally, set the property, then saved, it worked fine."}],"tags":[],"owner":{"account_id":920174,"reputation":3438,"user_id":951984,"accept_rate":50,"display_name":"nanospeck"},"comment_count":1,"down_vote_count":1,"up_vote_count":14,"is_accepted":false,"score":13,"last_activity_date":1450267537,"creation_date":1337580451,"answer_id":10680218,"question_id":2302802,"body_markdown":"This isn&#39;t the only reason for the error. I encountered it just now for a typo error in my coding, which I believe, set a value of an entity which was already saved.\r\n\r\n    X x2 = new X();\r\n    x.setXid(memberid); // Error happened here - x was a previous global entity I created earlier\r\n    Y.setX(x2);\r\n\r\nI spotted the error by finding exactly which variable caused the error (in this case `String xid`). I used a `catch` around the whole block of code that saved the entity and printed the traces.\r\n\r\n    {\r\n       code block that performed the operation\r\n    } catch (Exception e) {\r\n       e.printStackTrace(); // put a break-point here and inspect the &#39;e&#39;\r\n       return ERROR;\r\n    }","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>This isn't the only reason for the error. I encountered it just now for a typo error in my coding, which I believe, set a value of an entity which was already saved.</p>\n\n<pre><code>X x2 = new X();\nx.setXid(memberid); // Error happened here - x was a previous global entity I created earlier\nY.setX(x2);\n</code></pre>\n\n<p>I spotted the error by finding exactly which variable caused the error (in this case <code>String xid</code>). I used a <code>catch</code> around the whole block of code that saved the entity and printed the traces.</p>\n\n<pre><code>{\n   code block that performed the operation\n} catch (Exception e) {\n   e.printStackTrace(); // put a break-point here and inspect the 'e'\n   return ERROR;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":287674,"reputation":2988,"user_id":587641,"accept_rate":42,"display_name":"xtian"},"score":14,"creation_date":1465137047,"post_id":17160066,"comment_id":62765932,"body_markdown":"What if I don&#39;t want to cascade saves on a @OneToOne relationship? When creating both objects for the first time, how can I save either to the database without triggering the exception?","body":"What if I don&#39;t want to cascade saves on a @OneToOne relationship? When creating both objects for the first time, how can I save either to the database without triggering the exception?"},{"owner":{"account_id":3886765,"reputation":403,"user_id":3217930,"accept_rate":86,"display_name":"Omaruchan"},"score":6,"creation_date":1481048269,"post_id":17160066,"comment_id":69213153,"body_markdown":"What if I want to save the child for some cases and not for some others?","body":"What if I want to save the child for some cases and not for some others?"},{"owner":{"account_id":8692600,"reputation":484,"user_id":6505091,"display_name":"kaba713"},"score":1,"creation_date":1516807252,"post_id":17160066,"comment_id":83841652,"body_markdown":"@xtian: Well then you have to take care of the right order of saving to the database by persisting the objects with an EntityManager. In basic you just say em.persist(object1); em.persist(object2); etc.","body":"@xtian: Well then you have to take care of the right order of saving to the database by persisting the objects with an EntityManager. In basic you just say em.persist(object1); em.persist(object2); etc."},{"owner":{"account_id":11060326,"reputation":445,"user_id":8121862,"display_name":"Jim ReesPotter"},"score":0,"creation_date":1521320904,"post_id":17160066,"comment_id":85683943,"body_markdown":"I got this issue specifically when I used @Inheritance, in this case TABLE_PER_CLASS, I was referencing a subclass. CascadeType.ALL fixed it.","body":"I got this issue specifically when I used @Inheritance, in this case TABLE_PER_CLASS, I was referencing a subclass. CascadeType.ALL fixed it."},{"owner":{"account_id":1125613,"reputation":18964,"user_id":1112963,"accept_rate":59,"display_name":"Zon"},"score":0,"creation_date":1566304840,"post_id":17160066,"comment_id":101607983,"body_markdown":"Or you have created your entity object with `new MyEntity` (without synchronizing it to the database - flushing), instead of getting its synchronized instance from database. Making Hibernate queries using that instance informs you that what you expect to be in the database differs from what you have in your app&#39;s memory. In this case - simply synchronize/get your entity instabnce from DB and use it. No CascadeType.ALL is needed then.","body":"Or you have created your entity object with <code>new MyEntity</code> (without synchronizing it to the database - flushing), instead of getting its synchronized instance from database. Making Hibernate queries using that instance informs you that what you expect to be in the database differs from what you have in your app&#39;s memory. In this case - simply synchronize/get your entity instabnce from DB and use it. No CascadeType.ALL is needed then."},{"owner":{"account_id":14230288,"reputation":241,"user_id":10279724,"display_name":"pjsagar"},"score":1,"creation_date":1691149216,"post_id":17160066,"comment_id":135456101,"body_markdown":"I am getting this issue on one of the machine but running fine on other machines. Once i save child object with childRepo.save(child) and then save parentRepo.save(parent) then it is working on all machines. Do not know the issue with only saving parent object. Any suggestions?","body":"I am getting this issue on one of the machine but running fine on other machines. Once i save child object with childRepo.save(child) and then save parentRepo.save(parent) then it is working on all machines. Do not know the issue with only saving parent object. Any suggestions?"}],"tags":[],"owner":{"account_id":553029,"reputation":3719,"user_id":1090228,"display_name":"McDonald Noland"},"comment_count":6,"down_vote_count":0,"up_vote_count":361,"is_accepted":false,"score":361,"last_activity_date":1691097570,"creation_date":1371525997,"answer_id":17160066,"question_id":2302802,"body_markdown":"I believe this might be just repeat answer, but just to clarify, I got this on a `@OneToOne` mapping as well as a `@OneToMany`.  In both cases, it was the fact that the `Child` object I was adding to the `Parent` wasn&#39;t saved in the database yet.  So when I added the `Child` to the `Parent`, then saved the `Parent`, Hibernate would toss the `&quot;object references an unsaved transient instance - save the transient instance before flushing&quot;` message when saving the Parent.\r\n\r\nAdding in the `cascade = CascadeType.ALL` on the `Parent&#39;s` reference to the `Child` solved the problem in both cases.  This saved the `Child` and the `Parent`.\r\n\r\nSorry for any repeat answers, just wanted to further clarify for folks.\r\n\r\n```java\r\n@OneToOne(cascade = CascadeType.ALL)\r\n@JoinColumn(name = &quot;performancelog_id&quot;)\r\npublic PerformanceLog getPerformanceLog() {\r\n    return performanceLog;\r\n}\r\n```","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>I believe this might be just repeat answer, but just to clarify, I got this on a <code>@OneToOne</code> mapping as well as a <code>@OneToMany</code>.  In both cases, it was the fact that the <code>Child</code> object I was adding to the <code>Parent</code> wasn't saved in the database yet.  So when I added the <code>Child</code> to the <code>Parent</code>, then saved the <code>Parent</code>, Hibernate would toss the <code>&quot;object references an unsaved transient instance - save the transient instance before flushing&quot;</code> message when saving the Parent.</p>\n<p>Adding in the <code>cascade = CascadeType.ALL</code> on the <code>Parent's</code> reference to the <code>Child</code> solved the problem in both cases.  This saved the <code>Child</code> and the <code>Parent</code>.</p>\n<p>Sorry for any repeat answers, just wanted to further clarify for folks.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@OneToOne(cascade = CascadeType.ALL)\n@JoinColumn(name = &quot;performancelog_id&quot;)\npublic PerformanceLog getPerformanceLog() {\n    return performanceLog;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1507058,"reputation":2933,"user_id":1410212,"accept_rate":88,"display_name":"lilalinux"},"score":15,"creation_date":1473925692,"post_id":17911708,"comment_id":66327988,"body_markdown":"This should be the accepted answer. CascadeType.ALL ist too broad","body":"This should be the accepted answer. CascadeType.ALL ist too broad"},{"owner":{"account_id":44652,"reputation":3473,"user_id":131160,"display_name":"jcsahnwaldt Reinstate Monica"},"score":8,"creation_date":1489668823,"post_id":17911708,"comment_id":72778553,"body_markdown":"As of Hibernate 5.2.8, there seems to be no way to achieve the same effect with JPA annotations. For example, `@ManyToMany(cascade={PERSIST, MERGE, REFRESH, DETACH})` (all but REMOVE) does not cascade updates like Hibernate&#39;s `CascadeType.SAVE_UPDATE` does.","body":"As of Hibernate 5.2.8, there seems to be no way to achieve the same effect with JPA annotations. For example, <code>@ManyToMany(cascade={PERSIST, MERGE, REFRESH, DETACH})</code> (all but REMOVE) does not cascade updates like Hibernate&#39;s <code>CascadeType.SAVE_UPDATE</code> does."}],"tags":[],"owner":{"account_id":1057328,"reputation":1255,"user_id":1059744,"accept_rate":71,"display_name":"Haris Osmanagić"},"comment_count":2,"down_vote_count":0,"up_vote_count":34,"is_accepted":false,"score":34,"last_activity_date":1375037783,"creation_date":1375037783,"answer_id":17911708,"question_id":2302802,"body_markdown":"Or, if you want to use minimal &quot;powers&quot; (e.g. if you don&#39;t want a cascade delete) to achieve what you want, use \r\n\r\n    import org.hibernate.annotations.Cascade;\r\n    import org.hibernate.annotations.CascadeType;\r\n    \r\n    ...\r\n    \r\n    @Cascade({CascadeType.SAVE_UPDATE})\r\n    private Set&lt;Child&gt; children;","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>Or, if you want to use minimal \"powers\" (e.g. if you don't want a cascade delete) to achieve what you want, use </p>\n\n<pre><code>import org.hibernate.annotations.Cascade;\nimport org.hibernate.annotations.CascadeType;\n\n...\n\n@Cascade({CascadeType.SAVE_UPDATE})\nprivate Set&lt;Child&gt; children;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":258926,"reputation":971,"user_id":541432,"accept_rate":67,"display_name":"elvin"},"score":5,"creation_date":1400642254,"post_id":20286061,"comment_id":36558752,"body_markdown":"This comment put me on the right track. I was assigning a new instance of the parent into a property of its child. So NH thought they were different instances.","body":"This comment put me on the right track. I was assigning a new instance of the parent into a property of its child. So NH thought they were different instances."},{"owner":{"account_id":232776,"reputation":1922,"user_id":497844,"accept_rate":17,"display_name":"Rori Stumpf"},"score":3,"creation_date":1420045694,"post_id":20286061,"comment_id":43860232,"body_markdown":"Yes. This happens if, for example, the id of the associated object is not included (e.g. it&#39;s been ignored by @JsonIgnore). Hibernate has no way of identifying the associated entity, so it wants to save it.","body":"Yes. This happens if, for example, the id of the associated object is not included (e.g. it&#39;s been ignored by @JsonIgnore). Hibernate has no way of identifying the associated entity, so it wants to save it."},{"owner":{"account_id":1161864,"reputation":2061,"user_id":1141215,"display_name":"PJ_Finnegan"},"score":0,"creation_date":1622026027,"post_id":20286061,"comment_id":119669422,"body_markdown":"Thanks! I had a foreign key referencing not the ID field on the referenced table, but a field with a UNIQUE constraint (CODE), and on creation Hibernate couldn&#39;t find the existing row from the given CODE and tried to create it on the referenced table. I solved by pre-fetching the whole entity (ID included) from its CODE, then putting into the Java entity before saving it. This time Hib didn&#39;t try to create the row and the error disappeared.","body":"Thanks! I had a foreign key referencing not the ID field on the referenced table, but a field with a UNIQUE constraint (CODE), and on creation Hibernate couldn&#39;t find the existing row from the given CODE and tried to create it on the referenced table. I solved by pre-fetching the whole entity (ID included) from its CODE, then putting into the Java entity before saving it. This time Hib didn&#39;t try to create the row and the error disappeared."}],"tags":[],"owner":{"account_id":1069381,"reputation":1579,"user_id":1069027,"display_name":"Cookalino"},"comment_count":3,"down_vote_count":0,"up_vote_count":86,"is_accepted":false,"score":86,"last_activity_date":1385728740,"creation_date":1385728740,"answer_id":20286061,"question_id":2302802,"body_markdown":"This happens when saving an object when Hibernate thinks it needs to save an object that is associated with the one you are saving. \r\n\r\nI had this problem and did not want to save changes to the referenced object so I wanted the cascade type to be NONE. \r\n\r\nThe trick is to ensure that the ID and VERSION in the referenced object is set so that Hibernate does not think that the referenced object is a new object that needs saving. This worked for me.\r\n\r\nLook through all of the relationships in the class you are saving to work out the associated objects (and the associated objects of the associated objects) and ensure that the ID and VERSION is set in all objects of the object tree.","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>This happens when saving an object when Hibernate thinks it needs to save an object that is associated with the one you are saving. </p>\n\n<p>I had this problem and did not want to save changes to the referenced object so I wanted the cascade type to be NONE. </p>\n\n<p>The trick is to ensure that the ID and VERSION in the referenced object is set so that Hibernate does not think that the referenced object is a new object that needs saving. This worked for me.</p>\n\n<p>Look through all of the relationships in the class you are saving to work out the associated objects (and the associated objects of the associated objects) and ensure that the ID and VERSION is set in all objects of the object tree.</p>\n"},{"comments":[{"owner":{"account_id":877417,"reputation":69,"user_id":118897,"display_name":"BML"},"score":0,"creation_date":1505243293,"post_id":22360266,"comment_id":79330256,"body_markdown":"This should be a new question and it should be added as a bug, at least the misleading exception. This turned out to be the cause of my issue.","body":"This should be a new question and it should be added as a bug, at least the misleading exception. This turned out to be the cause of my issue."},{"owner":{"account_id":5705595,"reputation":6905,"user_id":4509268,"accept_rate":94,"display_name":"Jad Chahine"},"score":0,"creation_date":1579094743,"post_id":22360266,"comment_id":105651028,"body_markdown":"This fixes my problem","body":"This fixes my problem"}],"tags":[],"owner":{"account_id":183659,"reputation":1449,"user_id":419156,"accept_rate":33,"display_name":"dukethrash"},"comment_count":2,"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1394647873,"creation_date":1394647873,"answer_id":22360266,"question_id":2302802,"body_markdown":"This occurred for me when persisting an entity in which the existing record in the database had a NULL value for the field annotated with @Version (for optimistic locking). Updating the NULL value to 0 in the database corrected this.","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>This occurred for me when persisting an entity in which the existing record in the database had a NULL value for the field annotated with @Version (for optimistic locking). Updating the NULL value to 0 in the database corrected this.</p>\n"},{"comments":[{"owner":{"account_id":2229513,"reputation":5172,"user_id":1967484,"display_name":"Deadron"},"score":0,"creation_date":1429543128,"post_id":27509002,"comment_id":47635775,"body_markdown":"This was totally my issue. I never would have guessed I had to manually set it to null.","body":"This was totally my issue. I never would have guessed I had to manually set it to null."},{"owner":{"account_id":4815490,"reputation":574,"user_id":3887715,"display_name":"Fodder"},"score":0,"creation_date":1472162615,"post_id":27509002,"comment_id":65654295,"body_markdown":"This was also my issue. I wasn&#39;t using a collection, so I didn&#39;t try this at first, but I set my object to null and now it works.","body":"This was also my issue. I wasn&#39;t using a collection, so I didn&#39;t try this at first, but I set my object to null and now it works."}],"tags":[],"owner":{"account_id":5107202,"reputation":792,"user_id":4094939,"accept_rate":75,"display_name":"Joabe Lucena"},"comment_count":2,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1418746304,"creation_date":1418746304,"answer_id":27509002,"question_id":2302802,"body_markdown":"If your collection is nullable just try: `object.SetYouColection(null);`\r\n\r\n","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>If your collection is nullable just try: <code>object.SetYouColection(null);</code></p>\n"},{"comments":[{"owner":{"account_id":7929172,"reputation":1797,"user_id":6059506,"accept_rate":77,"display_name":"theprogrammer"},"score":3,"creation_date":1580633597,"post_id":33794164,"comment_id":106155893,"body_markdown":"If I do it this way, and save the parent entity, what&#39;s happening is there are two inserts in my parent table that is two rows. I think its because we have cascade on both parent and child entities?","body":"If I do it this way, and save the parent entity, what&#39;s happening is there are two inserts in my parent table that is two rows. I think its because we have cascade on both parent and child entities?"}],"tags":[],"owner":{"account_id":7316691,"reputation":676,"user_id":5574099,"display_name":"allap"},"comment_count":1,"down_vote_count":1,"up_vote_count":35,"is_accepted":false,"score":34,"last_activity_date":1450265735,"creation_date":1447899795,"answer_id":33794164,"question_id":2302802,"body_markdown":"In my case it was caused by not having `CascadeType` on the `@ManyToOne` side of the bidirectional relationship. To be more precise, I had `CascadeType.ALL` on `@OneToMany` side and did not have it on `@ManyToOne`. Adding `CascadeType.ALL` to `@ManyToOne` resolved the issue.\r\n**One-to-many** side:\r\n\r\n    @OneToMany(cascade = CascadeType.ALL, mappedBy=&quot;globalConfig&quot;, orphanRemoval = true)\r\n    private Set&lt;GlobalConfigScope&gt;gcScopeSet;\r\n\r\n**Many-to-one side** (caused the problem)\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name=&quot;global_config_id&quot;)\r\n    private GlobalConfig globalConfig;\r\n\r\n**Many-to-one** (fixed by adding `CascadeType.PERSIST`)\r\n\r\n    @ManyToOne(cascade = CascadeType.PERSIST)\r\n    @JoinColumn(name=&quot;global_config_id&quot;)\r\n    private GlobalConfig globalConfig;","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>In my case it was caused by not having <code>CascadeType</code> on the <code>@ManyToOne</code> side of the bidirectional relationship. To be more precise, I had <code>CascadeType.ALL</code> on <code>@OneToMany</code> side and did not have it on <code>@ManyToOne</code>. Adding <code>CascadeType.ALL</code> to <code>@ManyToOne</code> resolved the issue.\n<strong>One-to-many</strong> side:</p>\n\n<pre><code>@OneToMany(cascade = CascadeType.ALL, mappedBy=\"globalConfig\", orphanRemoval = true)\nprivate Set&lt;GlobalConfigScope&gt;gcScopeSet;\n</code></pre>\n\n<p><strong>Many-to-one side</strong> (caused the problem)</p>\n\n<pre><code>@ManyToOne\n@JoinColumn(name=\"global_config_id\")\nprivate GlobalConfig globalConfig;\n</code></pre>\n\n<p><strong>Many-to-one</strong> (fixed by adding <code>CascadeType.PERSIST</code>)</p>\n\n<pre><code>@ManyToOne(cascade = CascadeType.PERSIST)\n@JoinColumn(name=\"global_config_id\")\nprivate GlobalConfig globalConfig;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":347557,"reputation":489,"user_id":681746,"accept_rate":43,"display_name":"acpuma"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1452018076,"creation_date":1452018076,"answer_id":34618631,"question_id":2302802,"body_markdown":"i get this error when i use \r\n\r\n    getSession().save(object)\r\n\r\nbut it works with no problem when I use \r\n\r\n    getSession().saveOrUpdate(object) \r\n","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>i get this error when i use </p>\n\n<pre><code>getSession().save(object)\n</code></pre>\n\n<p>but it works with no problem when I use </p>\n\n<pre><code>getSession().saveOrUpdate(object) \n</code></pre>\n"},{"tags":[],"owner":{"account_id":107535,"reputation":18395,"user_id":285878,"accept_rate":94,"display_name":"Jeremy Goodell"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1465842227,"creation_date":1465842227,"answer_id":37796683,"question_id":2302802,"body_markdown":"One other possible reason: in my case, I was attempting to save the child before saving the parent, on a brand new entity.\r\n\r\nThe code was something like this in a User.java model:\r\n\r\n    this.lastName = lastName;\r\n    this.isAdmin = isAdmin;\r\n    this.accountStatus = &quot;Active&quot;;\r\n    this.setNewPassword(password);\r\n    this.timeJoin = new Date();\r\n    create();\r\n\r\nThe setNewPassword() method creates a PasswordHistory record and adds it to the history collection in User. Since the create() statement hadn&#39;t been executed yet for the parent, it was trying to save to a collection of an entity that hadn&#39;t yet been created. All I had to do to fix it was to move the setNewPassword() call after the call to create().\r\n\r\n    this.lastName = lastName;\r\n    this.isAdmin = isAdmin;\r\n    this.accountStatus = &quot;Active&quot;;\r\n    this.timeJoin = new Date();\r\n    create();\r\n    this.setNewPassword(password);","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>One other possible reason: in my case, I was attempting to save the child before saving the parent, on a brand new entity.</p>\n\n<p>The code was something like this in a User.java model:</p>\n\n<pre><code>this.lastName = lastName;\nthis.isAdmin = isAdmin;\nthis.accountStatus = \"Active\";\nthis.setNewPassword(password);\nthis.timeJoin = new Date();\ncreate();\n</code></pre>\n\n<p>The setNewPassword() method creates a PasswordHistory record and adds it to the history collection in User. Since the create() statement hadn't been executed yet for the parent, it was trying to save to a collection of an entity that hadn't yet been created. All I had to do to fix it was to move the setNewPassword() call after the call to create().</p>\n\n<pre><code>this.lastName = lastName;\nthis.isAdmin = isAdmin;\nthis.accountStatus = \"Active\";\nthis.timeJoin = new Date();\ncreate();\nthis.setNewPassword(password);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1885070,"reputation":3672,"user_id":1704453,"accept_rate":88,"display_name":"Vipin CP"},"score":0,"creation_date":1524056457,"post_id":38143811,"comment_id":86816184,"body_markdown":"what if its nullable?","body":"what if its nullable?"},{"owner":{"account_id":3280746,"reputation":1354,"user_id":2761418,"accept_rate":67,"display_name":"Gustavo"},"score":0,"creation_date":1546009954,"post_id":38143811,"comment_id":94758602,"body_markdown":"I have similar problem. I get the exception when my deptID is 0. Any other value greater than 0 works. Funny is that I have a dept with id = 0.","body":"I have similar problem. I get the exception when my deptID is 0. Any other value greater than 0 works. Funny is that I have a dept with id = 0."}],"tags":[],"owner":{"account_id":136651,"reputation":8180,"user_id":340290,"accept_rate":78,"display_name":"manikanta"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1482818879,"creation_date":1467371089,"answer_id":38143811,"question_id":2302802,"body_markdown":"To add my 2 cents, I got this same issue when I m accidentally sending `null` as the ID. Below code depicts my scenario *(and OP didn&#39;t mention any specific scenario)*.\r\n\r\n\tEmployee emp = new Employee();\r\n\temp.setDept(new Dept(deptId)); // --&gt; when deptId PKID is null, same error will be thrown\r\n\t// calls to other setters...\r\n\tem.persist(emp);\r\n\r\nHere I m setting the existing department id to a new employee instance without actually getting the department entity first, as I don&#39;t want to another select query to fire.\r\n\r\nIn some scenarios, `deptId` PKID is coming as `null` from calling method and I m getting the same error. \r\n\r\n**So, watch for `null` values for PK ID**","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>To add my 2 cents, I got this same issue when I m accidentally sending <code>null</code> as the ID. Below code depicts my scenario <em>(and OP didn't mention any specific scenario)</em>.</p>\n\n<pre><code>Employee emp = new Employee();\nemp.setDept(new Dept(deptId)); // --&gt; when deptId PKID is null, same error will be thrown\n// calls to other setters...\nem.persist(emp);\n</code></pre>\n\n<p>Here I m setting the existing department id to a new employee instance without actually getting the department entity first, as I don't want to another select query to fire.</p>\n\n<p>In some scenarios, <code>deptId</code> PKID is coming as <code>null</code> from calling method and I m getting the same error. </p>\n\n<p><strong>So, watch for <code>null</code> values for PK ID</strong></p>\n"},{"comments":[{"owner":{"account_id":6490968,"reputation":356,"user_id":5025049,"display_name":"S&#245;ber"},"score":1,"creation_date":1513532665,"post_id":39653950,"comment_id":82679952,"body_markdown":"It is the opposite - child entity holds the FK value and depends on parent so you need to save parent first! In the code block you have it right.","body":"It is the opposite - child entity holds the FK value and depends on parent so you need to save parent first! In the code block you have it right."}],"tags":[],"owner":{"account_id":3177566,"reputation":143,"user_id":2685043,"display_name":"shashigura"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1474613295,"creation_date":1474611973,"answer_id":39653950,"question_id":2302802,"body_markdown":"Simple way of solving this issue is save the both entity.\r\nfirst save the child entity and then save the parent  entity.\r\nBecause parent entity is depend on child entity for the foreign key value.\r\n\r\nBelow simple exam of one to one relationship\r\n\r\n    insert into Department (name, numOfemp, Depno) values (?, ?, ?)\r\n    Hibernate: insert into Employee (SSN, dep_Depno, firstName, lastName, middleName, empno) values (?, ?, ?, ?, ?, ?)\r\n\r\n    Session session=sf.openSession();\r\n            session.beginTransaction();\r\n            session.save(dep);\r\n            session.save(emp);\r\n","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>Simple way of solving this issue is save the both entity.\nfirst save the child entity and then save the parent  entity.\nBecause parent entity is depend on child entity for the foreign key value.</p>\n\n<p>Below simple exam of one to one relationship</p>\n\n<pre><code>insert into Department (name, numOfemp, Depno) values (?, ?, ?)\nHibernate: insert into Employee (SSN, dep_Depno, firstName, lastName, middleName, empno) values (?, ?, ?, ?, ?, ?)\n\nSession session=sf.openSession();\n        session.beginTransaction();\n        session.save(dep);\n        session.save(emp);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1475026,"reputation":1446,"user_id":1385652,"accept_rate":25,"display_name":"Hossein Nasr"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1479918362,"creation_date":1479918362,"answer_id":40769546,"question_id":2302802,"body_markdown":"beside all other good answers, this could happen if you use `merge` to persist an object and accidentally forget to use merged reference of the object in the parent class. consider the following example\r\n\r\n    merge(A);\r\n    B.setA(A);\r\n    persist(B);\r\n\r\nIn this case, you merge `A` but forget to use merged object of `A`. to solve the problem you must rewrite the code like this.\r\n\r\n    A=merge(A);//difference is here\r\n    B.setA(A);\r\n    persist(B);","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>beside all other good answers, this could happen if you use <code>merge</code> to persist an object and accidentally forget to use merged reference of the object in the parent class. consider the following example</p>\n\n<pre><code>merge(A);\nB.setA(A);\npersist(B);\n</code></pre>\n\n<p>In this case, you merge <code>A</code> but forget to use merged object of <code>A</code>. to solve the problem you must rewrite the code like this.</p>\n\n<pre><code>A=merge(A);//difference is here\nB.setA(A);\npersist(B);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1475026,"reputation":1446,"user_id":1385652,"accept_rate":25,"display_name":"Hossein Nasr"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1480505490,"creation_date":1480505490,"answer_id":40887268,"question_id":2302802,"body_markdown":"There is another possibility that can cause this error in hibernate. You may set an unsaved reference of your object `A` to an attached entity `B` and want to persist object `C`. Even in this case, you will get the aforementioned error.","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>There is another possibility that can cause this error in hibernate. You may set an unsaved reference of your object <code>A</code> to an attached entity <code>B</code> and want to persist object <code>C</code>. Even in this case, you will get the aforementioned error.</p>\n"},{"comments":[{"owner":{"account_id":2173092,"reputation":68,"user_id":1924519,"display_name":"Renato Mendes"},"score":2,"creation_date":1488559408,"post_id":42245525,"comment_id":72300765,"body_markdown":"is 100% correct, the Cascade.All is the lazy solution and only should be applied when required. first, if the entity already exists, check if it is loaded in the current entity manager, if not load it.","body":"is 100% correct, the Cascade.All is the lazy solution and only should be applied when required. first, if the entity already exists, check if it is loaded in the current entity manager, if not load it."}],"tags":[],"owner":{"account_id":1424899,"reputation":4365,"user_id":1348691,"accept_rate":67,"display_name":"Tiina"},"comment_count":1,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1487151318,"creation_date":1487151318,"answer_id":42245525,"question_id":2302802,"body_markdown":"Don&#39;t use `Cascade.All` until you really have to. `Role` and `Permission` have bidirectional `manyToMany` relation. Then the following code would work fine  \r\n    \r\n\r\n        Permission p = new Permission();\r\n        p.setName(&quot;help&quot;);\r\n        Permission p2 = new Permission();\r\n        p2.setName(&quot;self_info&quot;);\r\n        p = (Permission)crudRepository.save(p); // returned p has id filled in.\r\n        p2 = (Permission)crudRepository.save(p2); // so does p2.\r\n        Role role = new Role();\r\n        role.setAvailable(true);\r\n        role.setDescription(&quot;a test role&quot;);\r\n        role.setRole(&quot;admin&quot;);\r\n        List&lt;Permission&gt; pList = new ArrayList&lt;Permission&gt;();\r\n        pList.add(p);\r\n        pList.add(p2);\r\n        role.setPermissions(pList);\r\n        crudRepository.save(role);\r\nwhile if the object is just a &quot;new&quot; one, then it would throw the same error.","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>Don't use <code>Cascade.All</code> until you really have to. <code>Role</code> and <code>Permission</code> have bidirectional <code>manyToMany</code> relation. Then the following code would work fine  </p>\n\n<pre><code>    Permission p = new Permission();\n    p.setName(\"help\");\n    Permission p2 = new Permission();\n    p2.setName(\"self_info\");\n    p = (Permission)crudRepository.save(p); // returned p has id filled in.\n    p2 = (Permission)crudRepository.save(p2); // so does p2.\n    Role role = new Role();\n    role.setAvailable(true);\n    role.setDescription(\"a test role\");\n    role.setRole(\"admin\");\n    List&lt;Permission&gt; pList = new ArrayList&lt;Permission&gt;();\n    pList.add(p);\n    pList.add(p2);\n    role.setPermissions(pList);\n    crudRepository.save(role);\n</code></pre>\n\n<p>while if the object is just a \"new\" one, then it would throw the same error.</p>\n"},{"tags":[],"owner":{"account_id":1039267,"reputation":18413,"user_id":1045704,"accept_rate":78,"display_name":"pheromix"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1489143697,"creation_date":1489143697,"answer_id":42716777,"question_id":2302802,"body_markdown":"One possible cause of the error is the inexistence of the setting of the value of the parent entity ; for example for a department-employees relationship you have to write this in order to fix the error :\r\n\r\n    Department dept = (Department)session.load(Department.class, dept_code); // dept_code is from the jsp form which you get in the controller with @RequestParam String department\r\n    employee.setDepartment(dept);","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>One possible cause of the error is the inexistence of the setting of the value of the parent entity ; for example for a department-employees relationship you have to write this in order to fix the error :</p>\n\n<pre><code>Department dept = (Department)session.load(Department.class, dept_code); // dept_code is from the jsp form which you get in the controller with @RequestParam String department\nemployee.setDepartment(dept);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8886305,"reputation":1872,"user_id":6634462,"accept_rate":0,"display_name":"Ravindra Kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1504099798,"creation_date":1504099798,"answer_id":45961822,"question_id":2302802,"body_markdown":"There are so many possibilities of this error some other possibilities are   also on add page or edit page. In my case I was trying to save a object AdvanceSalary. The problem is that in edit the AdvanceSalary employee.employee_id is null Because on edit I was not set the employee.employee_id. I have make a hidden field and set it. my code working absolutely fine.\r\n    \r\n    \r\n        @Entity(name = &quot;ic_advance_salary&quot;)\r\n        @Table(name = &quot;ic_advance_salary&quot;)\r\n        public class AdvanceSalary extends BaseDO{\r\n        \r\n        \t@Id\r\n        \t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        \t@Column(name = &quot;id&quot;)\r\n        \tprivate Integer id;\r\n        \t\r\n        \t@ManyToOne(fetch = FetchType.EAGER)\r\n        \t@JoinColumn(name = &quot;employee_id&quot;, nullable = false)\r\n        \tprivate Employee employee;\r\n        \t\r\n        \t@Column(name = &quot;employee_id&quot;, insertable=false, updatable=false)\r\n        \t@NotNull(message=&quot;Please enter employee Id&quot;)\r\n        \tprivate Long employee_id;\r\n        \r\n        \t@Column(name = &quot;advance_date&quot;)\r\n        \t@DateTimeFormat(pattern = &quot;dd-MMM-yyyy&quot;)\r\n        \t@NotNull(message=&quot;Please enter advance date&quot;)\r\n        \tprivate Date advance_date;\r\n        \t\r\n        \t@Column(name = &quot;amount&quot;)\r\n        \t@NotNull(message=&quot;Please enter Paid Amount&quot;)\r\n        \tprivate Double amount;\r\n        \t\r\n        \t@Column(name = &quot;cheque_date&quot;)\r\n        \t@DateTimeFormat(pattern = &quot;dd-MMM-yyyy&quot;)\r\n        \tprivate Date cheque_date;\r\n        \t\r\n        \t@Column(name = &quot;cheque_no&quot;)\r\n        \tprivate String cheque_no;\r\n        \t\r\n        \t@Column(name = &quot;remarks&quot;)\r\n        \tprivate String remarks;\r\n        \t\r\n        \tpublic AdvanceSalary() {\r\n        \t}\r\n        \r\n        \tpublic AdvanceSalary(Integer advance_salary_id) {\r\n        \t\tthis.id = advance_salary_id;\r\n        \t}\r\n        \r\n        \tpublic Integer getId() {\r\n        \t\treturn id;\r\n        \t}\r\n        \r\n        \tpublic void setId(Integer id) {\r\n        \t\tthis.id = id;\r\n        \t}\r\n        \r\n        \tpublic Employee getEmployee() {\r\n        \t\treturn employee;\r\n        \t}\r\n        \r\n        \tpublic void setEmployee(Employee employee) {\r\n        \t\tthis.employee = employee;\r\n        \t}\r\n        \t\r\n        \r\n        \tpublic Long getEmployee_id() {\r\n        \t\treturn employee_id;\r\n        \t}\r\n        \r\n        \tpublic void setEmployee_id(Long employee_id) {\r\n        \t\tthis.employee_id = employee_id;\r\n        \t}\r\n        \r\n        }\r\n    \r\n     ","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>There are so many possibilities of this error some other possibilities are   also on add page or edit page. In my case I was trying to save a object AdvanceSalary. The problem is that in edit the AdvanceSalary employee.employee_id is null Because on edit I was not set the employee.employee_id. I have make a hidden field and set it. my code working absolutely fine.</p>\n\n<pre><code>    @Entity(name = \"ic_advance_salary\")\n    @Table(name = \"ic_advance_salary\")\n    public class AdvanceSalary extends BaseDO{\n\n        @Id\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\n        @Column(name = \"id\")\n        private Integer id;\n\n        @ManyToOne(fetch = FetchType.EAGER)\n        @JoinColumn(name = \"employee_id\", nullable = false)\n        private Employee employee;\n\n        @Column(name = \"employee_id\", insertable=false, updatable=false)\n        @NotNull(message=\"Please enter employee Id\")\n        private Long employee_id;\n\n        @Column(name = \"advance_date\")\n        @DateTimeFormat(pattern = \"dd-MMM-yyyy\")\n        @NotNull(message=\"Please enter advance date\")\n        private Date advance_date;\n\n        @Column(name = \"amount\")\n        @NotNull(message=\"Please enter Paid Amount\")\n        private Double amount;\n\n        @Column(name = \"cheque_date\")\n        @DateTimeFormat(pattern = \"dd-MMM-yyyy\")\n        private Date cheque_date;\n\n        @Column(name = \"cheque_no\")\n        private String cheque_no;\n\n        @Column(name = \"remarks\")\n        private String remarks;\n\n        public AdvanceSalary() {\n        }\n\n        public AdvanceSalary(Integer advance_salary_id) {\n            this.id = advance_salary_id;\n        }\n\n        public Integer getId() {\n            return id;\n        }\n\n        public void setId(Integer id) {\n            this.id = id;\n        }\n\n        public Employee getEmployee() {\n            return employee;\n        }\n\n        public void setEmployee(Employee employee) {\n            this.employee = employee;\n        }\n\n\n        public Long getEmployee_id() {\n            return employee_id;\n        }\n\n        public void setEmployee_id(Long employee_id) {\n            this.employee_id = employee_id;\n        }\n\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2934958,"reputation":725,"user_id":2514137,"accept_rate":70,"display_name":"DevWithSigns"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1518256324,"creation_date":1518256324,"answer_id":48719424,"question_id":2302802,"body_markdown":"If you&#39;re using Spring Data JPA then addition `@Transactional` annotation to your service implementation would solve the issue.","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>If you're using Spring Data JPA then addition <code>@Transactional</code> annotation to your service implementation would solve the issue.</p>\n"},{"tags":[],"owner":{"account_id":4610588,"reputation":4137,"user_id":3738831,"accept_rate":50,"display_name":"Tadele Ayelegn"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1518437065,"creation_date":1518437065,"answer_id":48746102,"question_id":2302802,"body_markdown":"I faced this exception when I  did not persist parent object but I was saving the child. To resolve the issue, with in the same session I persisted both the child and parent objects and used  CascadeType.ALL on the parent. ","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>I faced this exception when I  did not persist parent object but I was saving the child. To resolve the issue, with in the same session I persisted both the child and parent objects and used  CascadeType.ALL on the parent. </p>\n"},{"tags":[],"owner":{"account_id":2770645,"reputation":51,"user_id":2385312,"display_name":"Ralf"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1518527191,"creation_date":1518527191,"answer_id":48767551,"question_id":2302802,"body_markdown":"For the sake of completeness: A\r\n\r\n    org.hibernate.TransientPropertyValueException \r\n\r\nwith message\r\n\r\n    object references an unsaved transient instance - save the transient instance before flushing\r\n\r\n\r\nwill also occur when you try to persist / merge an entity with a reference to another entity which happens to be **detached**.\r\n\r\n","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>For the sake of completeness: A</p>\n\n<pre><code>org.hibernate.TransientPropertyValueException \n</code></pre>\n\n<p>with message</p>\n\n<pre><code>object references an unsaved transient instance - save the transient instance before flushing\n</code></pre>\n\n<p>will also occur when you try to persist / merge an entity with a reference to another entity which happens to be <strong>detached</strong>.</p>\n"},{"tags":[],"owner":{"display_name":"user8495266"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1523371084,"creation_date":1523371084,"answer_id":49756431,"question_id":2302802,"body_markdown":"I think is because you have try to persist an object that have a reference to another object that is not persist yet, and so it try in the &quot;DB side&quot; to put a reference to a row that not exists","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>I think is because you have try to persist an object that have a reference to another object that is not persist yet, and so it try in the \"DB side\" to put a reference to a row that not exists</p>\n"},{"comments":[{"owner":{"account_id":13790539,"reputation":701,"user_id":9953131,"display_name":"Sumit Rane"},"score":0,"creation_date":1614850727,"post_id":50622773,"comment_id":117512956,"body_markdown":"I was facing a problem similar to case 2, I have a C1 object reference in parent P1 object and C1 object is optional, I have to explicitly make C1 object null while saving P1 object when the user not adding C1 object.","body":"I was facing a problem similar to case 2, I have a C1 object reference in parent P1 object and C1 object is optional, I have to explicitly make C1 object null while saving P1 object when the user not adding C1 object."}],"tags":[],"owner":{"account_id":8316795,"reputation":61,"user_id":6249773,"display_name":"Harsh Vardhan Singh Solanki"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1529573942,"creation_date":1527764496,"answer_id":50622773,"question_id":2302802,"body_markdown":"Case 1:\r\nI was getting this exception when I was trying to create a parent and saving that parent reference to its child and then some other DELETE/UPDATE query(JPQL). So I just flush() the newly created entity after creating parent and after creating child using same parent reference. It Worked for me.\r\n\r\nCase 2: \r\n\r\nParent class\r\n\r\n    public class Reference implements Serializable {\r\n    \t   \r\n    \t@Id\r\n    \t@Column(precision=20, scale=0)\r\n    \tprivate BigInteger id;\r\n    \t\r\n    \t@Temporal(TemporalType.TIMESTAMP)\r\n    \tprivate Date modifiedOn;\r\n    \t\r\n    \t@OneToOne(mappedBy=&quot;reference&quot;)\r\n    \tprivate ReferenceAdditionalDetails refAddDetails;\r\n        . \r\n        .\r\n        .\r\n    }\r\n\r\nChild Class:\r\n\r\n    public class ReferenceAdditionalDetails implements Serializable{\r\n    \r\n    \tprivate static final long serialVersionUID = 1L;\r\n    \t\r\n    \t@Id\r\n    \t@OneToOne\r\n    \t@JoinColumn(name=&quot;reference&quot;,referencedColumnName=&quot;id&quot;)\r\n    \tprivate Reference reference;\r\n    \t\r\n    \tprivate String preferedSector1;\r\n    \tprivate String preferedSector2;\r\n    \t.\r\n        .\r\n         \r\n    }\r\n\r\nIn the above case where parent(Reference) and child(ReferenceAdditionalDetails) having OneToOne relationship and when you try to create Reference entity and then its child(ReferenceAdditionalDetails), it will give you the same exception. So to avoid the exception you have to set null for child class and then create the parent.(Sample Code)\r\n\r\n    .\r\n    .\r\n    reference.setRefAddDetails(null);\r\n    reference = referenceDao.create(reference);\r\n    entityManager.flush();\r\n    .\r\n    .","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>Case 1:\nI was getting this exception when I was trying to create a parent and saving that parent reference to its child and then some other DELETE/UPDATE query(JPQL). So I just flush() the newly created entity after creating parent and after creating child using same parent reference. It Worked for me.</p>\n\n<p>Case 2: </p>\n\n<p>Parent class</p>\n\n<pre><code>public class Reference implements Serializable {\n\n    @Id\n    @Column(precision=20, scale=0)\n    private BigInteger id;\n\n    @Temporal(TemporalType.TIMESTAMP)\n    private Date modifiedOn;\n\n    @OneToOne(mappedBy=\"reference\")\n    private ReferenceAdditionalDetails refAddDetails;\n    . \n    .\n    .\n}\n</code></pre>\n\n<p>Child Class:</p>\n\n<pre><code>public class ReferenceAdditionalDetails implements Serializable{\n\n    private static final long serialVersionUID = 1L;\n\n    @Id\n    @OneToOne\n    @JoinColumn(name=\"reference\",referencedColumnName=\"id\")\n    private Reference reference;\n\n    private String preferedSector1;\n    private String preferedSector2;\n    .\n    .\n\n}\n</code></pre>\n\n<p>In the above case where parent(Reference) and child(ReferenceAdditionalDetails) having OneToOne relationship and when you try to create Reference entity and then its child(ReferenceAdditionalDetails), it will give you the same exception. So to avoid the exception you have to set null for child class and then create the parent.(Sample Code)</p>\n\n<pre><code>.\n.\nreference.setRefAddDetails(null);\nreference = referenceDao.create(reference);\nentityManager.flush();\n.\n.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3723758,"reputation":11894,"user_id":3600553,"accept_rate":71,"display_name":"Du-Lacoste"},"comment_count":0,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1532248795,"creation_date":1532248795,"answer_id":51463390,"question_id":2302802,"body_markdown":"I also faced the same situation. By setting following annotation above the property made it solve the exception prompted.\r\n\r\nThe Exception I faced.\r\n\r\n    Exception in thread &quot;main&quot; java.lang.IllegalStateException: org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: com.model.Car_OneToMany\r\n\r\n\r\nTo overcome, the annotation I used.\r\n\r\n        @OneToMany(cascade = {CascadeType.ALL})\r\n        @Column(name = &quot;ListOfCarsDrivenByDriver&quot;)\r\n        private List&lt;Car_OneToMany&gt; listOfCarsBeingDriven = new ArrayList&lt;Car_OneToMany&gt;();\r\n\r\nWhat made Hibernate throw the exception:\r\n\r\nThis exception is thrown at your console because the child object I attach to the parent object is not present in the database at that moment.\r\n\r\nBy providing `@OneToMany(cascade = {CascadeType.ALL})` , it tells Hibernate to save them to the database while saving the parent object. ","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>I also faced the same situation. By setting following annotation above the property made it solve the exception prompted.</p>\n\n<p>The Exception I faced.</p>\n\n<pre><code>Exception in thread \"main\" java.lang.IllegalStateException: org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: com.model.Car_OneToMany\n</code></pre>\n\n<p>To overcome, the annotation I used.</p>\n\n<pre><code>    @OneToMany(cascade = {CascadeType.ALL})\n    @Column(name = \"ListOfCarsDrivenByDriver\")\n    private List&lt;Car_OneToMany&gt; listOfCarsBeingDriven = new ArrayList&lt;Car_OneToMany&gt;();\n</code></pre>\n\n<p>What made Hibernate throw the exception:</p>\n\n<p>This exception is thrown at your console because the child object I attach to the parent object is not present in the database at that moment.</p>\n\n<p>By providing <code>@OneToMany(cascade = {CascadeType.ALL})</code> , it tells Hibernate to save them to the database while saving the parent object. </p>\n"},{"comments":[{"owner":{"account_id":11771802,"reputation":758,"user_id":8614637,"display_name":"DeveloperKurt"},"score":0,"creation_date":1654073683,"post_id":54319066,"comment_id":128002809,"body_markdown":"Totally missed the persisted entity in the ManyToOne field was persisted through a transactional call, adding \n@Transactional(propagation = Propagation.SUPPORTS) has solved my issue. Thanks.","body":"Totally missed the persisted entity in the ManyToOne field was persisted through a transactional call, adding  @Transactional(propagation = Propagation.SUPPORTS) has solved my issue. Thanks."}],"tags":[],"owner":{"account_id":3896319,"reputation":3078,"user_id":3225260,"accept_rate":45,"display_name":"mad_fox"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1548209137,"creation_date":1548209137,"answer_id":54319066,"question_id":2302802,"body_markdown":"This issue happened to me when I created a new entity and an associated entity in a method marked as `@Transactional`, then performed a query before saving. Ex\r\n\r\n    @Transactional\r\n    public someService() {\r\n        Entity someEntity = new Entity();\r\n        AssocaiatedEntity associatedEntity = new AssocaitedEntity();\r\n        someEntity.setAssociatedEntity(associatedEntity);\r\n        associatedEntity.setEntity(someEntity);\r\n    \r\n        // Performing any query was causing hibernate to attempt to persist the new entity. It would then throw an exception\r\n        someDao.getSomething();\r\n    \r\n        entityDao.create(someEntity);\r\n    }\r\n\r\nTo fix, I performed the query before creating the new entity. ","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>This issue happened to me when I created a new entity and an associated entity in a method marked as <code>@Transactional</code>, then performed a query before saving. Ex</p>\n\n<pre><code>@Transactional\npublic someService() {\n    Entity someEntity = new Entity();\n    AssocaiatedEntity associatedEntity = new AssocaitedEntity();\n    someEntity.setAssociatedEntity(associatedEntity);\n    associatedEntity.setEntity(someEntity);\n\n    // Performing any query was causing hibernate to attempt to persist the new entity. It would then throw an exception\n    someDao.getSomething();\n\n    entityDao.create(someEntity);\n}\n</code></pre>\n\n<p>To fix, I performed the query before creating the new entity. </p>\n"},{"comments":[{"owner":{"account_id":543631,"reputation":10094,"user_id":912829,"accept_rate":53,"display_name":"ACV"},"score":0,"creation_date":1599175059,"post_id":59523218,"comment_id":112700552,"body_markdown":"How does Hibernate determine that the instance is detached? Is it just looking at the ID and if it is null, it considers the instance detached or is there something else involved?","body":"How does Hibernate determine that the instance is detached? Is it just looking at the ID and if it is null, it considers the instance detached or is there something else involved?"},{"owner":{"account_id":1012936,"reputation":145178,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"score":2,"creation_date":1599191161,"post_id":59523218,"comment_id":112703403,"body_markdown":"For merge, it runs a SELECT query. Otherwise, it checks the id and the version.","body":"For merge, it runs a SELECT query. Otherwise, it checks the id and the version."},{"owner":{"account_id":2174240,"reputation":1419,"user_id":1925356,"accept_rate":33,"display_name":"Alex Mi"},"score":0,"creation_date":1675368289,"post_id":59523218,"comment_id":132919804,"body_markdown":"Dear Vlad, I read most of the comments below, and for me it was exactly as in the case written in the answer below: https://stackoverflow.com/a/40769546/1925356 . Do you think this is a valid solution? (For me, it seemed to work). Thanks!","body":"Dear Vlad, I read most of the comments below, and for me it was exactly as in the case written in the answer below: <a href=\"https://stackoverflow.com/a/40769546/1925356\">stackoverflow.com/a/40769546/1925356</a> . Do you think this is a valid solution? (For me, it seemed to work). Thanks!"},{"owner":{"account_id":1012936,"reputation":145178,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"score":1,"creation_date":1675717830,"post_id":59523218,"comment_id":132985602,"body_markdown":"Calling `merge` to `persist` an object is a bad idea. Just because it happens to work, it doesn&#39;t mean it&#39;s the right way.","body":"Calling <code>merge</code> to <code>persist</code> an object is a bad idea. Just because it happens to work, it doesn&#39;t mean it&#39;s the right way."}],"tags":[],"owner":{"account_id":1012936,"reputation":145178,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"comment_count":4,"down_vote_count":0,"up_vote_count":193,"is_accepted":false,"score":193,"last_activity_date":1618479991,"creation_date":1577653053,"answer_id":59523218,"question_id":2302802,"body_markdown":"Introduction\r\n------------\r\n\r\nWhen using JPA and Hibernate, an entity can be in one of the following 4 states:\r\n\r\n - **New** - A newly created object that hasn’t ever been associated with a Hibernate Session (a.k.a Persistence Context) and is not mapped to any database table row is considered to be in the New or Transient state.\r\n\r\n  To become persisted we need to either explicitly call the `persist` method or make use of the transitive persistence mechanism.\r\n\r\n - **Persistent** - A persistent entity has been associated with a database table row and it’s being managed by the currently running Persistence Context. \r\n  \r\n  Any change made to such an entity is going to be detected and propagated to the database (during the Session flush-time). \r\n\r\n - **Detached** - Once the currently running Persistence Context is closed all the previously managed entities become detached. Successive changes will no longer be tracked and no automatic database synchronization is going to happen.\r\n\r\n - **Removed** - Although JPA demands that managed entities only are allowed to be removed, Hibernate can also delete detached entities (but only through a `remove` method call).\r\n\r\nEntity state transitions\r\n------------------------\r\n\r\nTo move an entity from one state to the other, you can use the `persist`, `remove` or `merge` methods.\r\n\r\n[![JPA entity states][1]](https://vladmihalcea.com/a-beginners-guide-to-jpa-hibernate-entity-state-transitions/)\r\n\r\nFixing the problem\r\n------------------\r\n\r\nThe issue you are describing in your question:\r\n\r\n    object references an unsaved transient instance - save the transient instance before flushing\r\n\r\nis caused by associating an entity in the state of  **New** to an entity that&#39;s in the state of *Managed*.\r\n\r\nThis can happen when you are associating a child entity to a one-to-many collection in the parent entity, and the collection does not `cascade` the entity state transitions.\r\n\r\nSo, you can fix this by adding cascade to the entity association that triggered this failure, as follows:\r\n\r\nThe `@OneToOne` association\r\n---------------------------\r\n\r\n    @OneToOne(\r\n        mappedBy = &quot;post&quot;,\r\n        orphanRemoval = true,\r\n        cascade = CascadeType.ALL)\r\n    private PostDetails details;\r\n\r\n&gt; Notice the `CascadeType.ALL` value we added for the `cascade` attribute.\r\n\r\nThe `@OneToMany` association\r\n----------------------------\r\n\r\n    @OneToMany(\r\n        mappedBy = &quot;post&quot;, \r\n        orphanRemoval = true,\r\n        cascade = CascadeType.ALL)\r\n    private List&lt;Comment&gt; comments = new ArrayList&lt;&gt;();\r\n\r\nAgain, the `CascadeType.ALL` is suitable for the bidirectional `@OneToMany` associations. \r\n\r\nNow, in order for the cascade to work properly in a bidirectional, you also need to make sure that the parent and child associations are in sync. \r\n\r\nThe `@ManyToMany` association\r\n-----------------------------\r\n\r\n    @ManyToMany(\r\n        mappedBy = &quot;authors&quot;,\r\n        cascade = {\r\n            CascadeType.PERSIST, \r\n            CascadeType.MERGE\r\n        }\r\n    )\r\n    private List&lt;Book&gt; books = new ArrayList&lt;&gt;();\r\n\r\nIn a `@ManyToMany` association, you cannot use `CascadeType.ALL` or `orphanRemoval` as this will propagate the delete entity state transition from one parent to another parent entity.\r\n\r\nTherefore, for `@ManyToMany` associations, you usually cascade the `CascadeType.PERSIST` or `CascadeType.MERGE` operations. Alternatively, you can expand that to `DETACH` or `REFRESH`. \r\n\r\n  [1]: https://i.stack.imgur.com/QSdMl.png","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<h2>Introduction</h2>\n<p>When using JPA and Hibernate, an entity can be in one of the following 4 states:</p>\n<ul>\n<li><strong>New</strong> - A newly created object that hasn’t ever been associated with a Hibernate Session (a.k.a Persistence Context) and is not mapped to any database table row is considered to be in the New or Transient state.</li>\n</ul>\n<p>To become persisted we need to either explicitly call the <code>persist</code> method or make use of the transitive persistence mechanism.</p>\n<ul>\n<li><strong>Persistent</strong> - A persistent entity has been associated with a database table row and it’s being managed by the currently running Persistence Context.</li>\n</ul>\n<p>Any change made to such an entity is going to be detected and propagated to the database (during the Session flush-time).</p>\n<ul>\n<li><p><strong>Detached</strong> - Once the currently running Persistence Context is closed all the previously managed entities become detached. Successive changes will no longer be tracked and no automatic database synchronization is going to happen.</p>\n</li>\n<li><p><strong>Removed</strong> - Although JPA demands that managed entities only are allowed to be removed, Hibernate can also delete detached entities (but only through a <code>remove</code> method call).</p>\n</li>\n</ul>\n<h2>Entity state transitions</h2>\n<p>To move an entity from one state to the other, you can use the <code>persist</code>, <code>remove</code> or <code>merge</code> methods.</p>\n<p><a href=\"https://vladmihalcea.com/a-beginners-guide-to-jpa-hibernate-entity-state-transitions/\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/QSdMl.png\" alt=\"JPA entity states\" /></a></p>\n<h2>Fixing the problem</h2>\n<p>The issue you are describing in your question:</p>\n<pre><code>object references an unsaved transient instance - save the transient instance before flushing\n</code></pre>\n<p>is caused by associating an entity in the state of  <strong>New</strong> to an entity that's in the state of <em>Managed</em>.</p>\n<p>This can happen when you are associating a child entity to a one-to-many collection in the parent entity, and the collection does not <code>cascade</code> the entity state transitions.</p>\n<p>So, you can fix this by adding cascade to the entity association that triggered this failure, as follows:</p>\n<h2>The <code>@OneToOne</code> association</h2>\n<pre><code>@OneToOne(\n    mappedBy = &quot;post&quot;,\n    orphanRemoval = true,\n    cascade = CascadeType.ALL)\nprivate PostDetails details;\n</code></pre>\n<blockquote>\n<p>Notice the <code>CascadeType.ALL</code> value we added for the <code>cascade</code> attribute.</p>\n</blockquote>\n<h2>The <code>@OneToMany</code> association</h2>\n<pre><code>@OneToMany(\n    mappedBy = &quot;post&quot;, \n    orphanRemoval = true,\n    cascade = CascadeType.ALL)\nprivate List&lt;Comment&gt; comments = new ArrayList&lt;&gt;();\n</code></pre>\n<p>Again, the <code>CascadeType.ALL</code> is suitable for the bidirectional <code>@OneToMany</code> associations.</p>\n<p>Now, in order for the cascade to work properly in a bidirectional, you also need to make sure that the parent and child associations are in sync.</p>\n<h2>The <code>@ManyToMany</code> association</h2>\n<pre><code>@ManyToMany(\n    mappedBy = &quot;authors&quot;,\n    cascade = {\n        CascadeType.PERSIST, \n        CascadeType.MERGE\n    }\n)\nprivate List&lt;Book&gt; books = new ArrayList&lt;&gt;();\n</code></pre>\n<p>In a <code>@ManyToMany</code> association, you cannot use <code>CascadeType.ALL</code> or <code>orphanRemoval</code> as this will propagate the delete entity state transition from one parent to another parent entity.</p>\n<p>Therefore, for <code>@ManyToMany</code> associations, you usually cascade the <code>CascadeType.PERSIST</code> or <code>CascadeType.MERGE</code> operations. Alternatively, you can expand that to <code>DETACH</code> or <code>REFRESH</code>.</p>\n"},{"tags":[],"owner":{"account_id":10307070,"reputation":2201,"user_id":7604006,"accept_rate":60,"display_name":"NikNik"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1580377554,"creation_date":1580377554,"answer_id":59983077,"question_id":2302802,"body_markdown":"My problem was related to `@BeforeEach` of JUnit. And even if I saved the related entities (in my case `@ManyToOne`), I got the same error.\r\n\r\nThe problem is somehow related to the sequence that I have in my parent.\r\nIf I assign the value to that attribute, the problem is solved.\r\n\r\nEx.\r\nIf I have the entity Question that can have some categories (one or more) and entity Question has a sequence:\r\n\r\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;feedbackSeq&quot;)\r\n    @Id\r\n    private Long id;\r\nI have to assign the value `question.setId(1L);`\r\n","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>My problem was related to <code>@BeforeEach</code> of JUnit. And even if I saved the related entities (in my case <code>@ManyToOne</code>), I got the same error.</p>\n\n<p>The problem is somehow related to the sequence that I have in my parent.\nIf I assign the value to that attribute, the problem is solved.</p>\n\n<p>Ex.\nIf I have the entity Question that can have some categories (one or more) and entity Question has a sequence:</p>\n\n<pre><code>@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = \"feedbackSeq\")\n@Id\nprivate Long id;\n</code></pre>\n\n<p>I have to assign the value <code>question.setId(1L);</code></p>\n"},{"tags":[],"owner":{"account_id":7059598,"reputation":831,"user_id":5405451,"display_name":"Bilal Ahmad"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1586014604,"creation_date":1586014604,"answer_id":61030518,"question_id":2302802,"body_markdown":"Just make Constructor of your mapping in your base class.\r\nLike if you want One-To-One relation in Entity A, Entity B.\r\nif your are taking A as base class, then A must have a Constructor have B as a argument.","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>Just make Constructor of your mapping in your base class.\nLike if you want One-To-One relation in Entity A, Entity B.\nif your are taking A as base class, then A must have a Constructor have B as a argument.</p>\n"},{"tags":[],"owner":{"account_id":16778275,"reputation":21,"user_id":12129041,"display_name":"Amit Varshney"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1593749343,"creation_date":1593749343,"answer_id":62708376,"question_id":2302802,"body_markdown":"In my case , issue was completely different. I have two classes let&#39;s say c1 &amp; c2. Between C1 &amp; C2 dependency is OneToMany. Now if i am saving C1 in DB it was throwing above error. \r\n\r\nResolution of this problem was to get first C2&#39;s id from consumer request and find C2 via repository call.Afterwards save c2 into C1 object .Now if i am saving C1, it&#39;s working fine.","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>In my case , issue was completely different. I have two classes let's say c1 &amp; c2. Between C1 &amp; C2 dependency is OneToMany. Now if i am saving C1 in DB it was throwing above error.</p>\n<p>Resolution of this problem was to get first C2's id from consumer request and find C2 via repository call.Afterwards save c2 into C1 object .Now if i am saving C1, it's working fine.</p>\n"},{"tags":[],"owner":{"account_id":17735296,"reputation":61,"user_id":12876807,"display_name":"Abeed Ali"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1595776840,"creation_date":1595776840,"answer_id":63102062,"question_id":2302802,"body_markdown":"I was facing the same error for all PUT HTTP transactions, after introducing optimistic locking (@Version)\r\n\r\nAt the time of updating an entity it is mandatory to send id and version of that entity. If any of the entity fields are related to other entities then for that field also we should provide id and version values, without that the JPA try to persist that related entity first as a new entity\r\n\r\n**Example**: we have two entities --&gt; **Vehicle**(id,Car,version) ; **Car**(id, version, brand); to update/persist Vehicle entity make sure the Car field in vehicle entity has id and version fields provided","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>I was facing the same error for all PUT HTTP transactions, after introducing optimistic locking (@Version)</p>\n<p>At the time of updating an entity it is mandatory to send id and version of that entity. If any of the entity fields are related to other entities then for that field also we should provide id and version values, without that the JPA try to persist that related entity first as a new entity</p>\n<p><strong>Example</strong>: we have two entities --&gt; <strong>Vehicle</strong>(id,Car,version) ; <strong>Car</strong>(id, version, brand); to update/persist Vehicle entity make sure the Car field in vehicle entity has id and version fields provided</p>\n"},{"tags":[],"owner":{"account_id":5656621,"reputation":563,"user_id":4475588,"accept_rate":0,"display_name":"Igor Tiulkanov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1596544250,"creation_date":1596544250,"answer_id":63246948,"question_id":2302802,"body_markdown":"In my case using Cascade.ALL was adding unnecessary entry to the table, which already had same object (Generating a child value without an id does just that). \r\nSo I would have to work around with getting child object from repository first, and setting it into the main object instead of the one causing the issue.\r\n     \r\n    Student s = studentRepo.findByName(generatedObject.getStudent().getName())\r\n    generatedObject.student(s);   ","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>In my case using Cascade.ALL was adding unnecessary entry to the table, which already had same object (Generating a child value without an id does just that).\nSo I would have to work around with getting child object from repository first, and setting it into the main object instead of the one causing the issue.</p>\n<pre><code>Student s = studentRepo.findByName(generatedObject.getStudent().getName())\ngeneratedObject.student(s);   \n</code></pre>\n"},{"tags":[],"owner":{"account_id":5240090,"reputation":153,"user_id":4187428,"display_name":"Balazs Szanto"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1612621089,"creation_date":1612621089,"answer_id":66077862,"question_id":2302802,"body_markdown":"It can also happen when you are having OneToMany relation and you try to add the child entity to the list in parent entity, then **retrieve** this list through parent entity (before saving this parent entity), **without saving child entity** itself, e.g.:\r\n\r\n    Child childEntity = new Child();\r\n    parentEntity.addChild(childEntity);\r\n    parentEntity.getChildren(); // I needed the retrieval for logging, but one may need it for other reasons.\r\n    parentRepository.save(parentEntity);\r\n\r\nThe error was thrown when I saved the parent entity. If I removed the retrieval in the previous row, then the error was not thrown, but of course that&#39;s not the solution.\r\n\r\nThe **solution** was saving the childEntity and **adding** that **saved child entity** to the parent entity, like this:\r\n\r\n    Child childEntity = new Child();\r\n    Child savedChildEntity = childRepository.save(childEntity);\r\n    parentEntity.addChild(savedChildEntity);\r\n    parentEntity.getChildren();\r\n    parentRepository.save(parentEntity);","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>It can also happen when you are having OneToMany relation and you try to add the child entity to the list in parent entity, then <strong>retrieve</strong> this list through parent entity (before saving this parent entity), <strong>without saving child entity</strong> itself, e.g.:</p>\n<pre><code>Child childEntity = new Child();\nparentEntity.addChild(childEntity);\nparentEntity.getChildren(); // I needed the retrieval for logging, but one may need it for other reasons.\nparentRepository.save(parentEntity);\n</code></pre>\n<p>The error was thrown when I saved the parent entity. If I removed the retrieval in the previous row, then the error was not thrown, but of course that's not the solution.</p>\n<p>The <strong>solution</strong> was saving the childEntity and <strong>adding</strong> that <strong>saved child entity</strong> to the parent entity, like this:</p>\n<pre><code>Child childEntity = new Child();\nChild savedChildEntity = childRepository.save(childEntity);\nparentEntity.addChild(savedChildEntity);\nparentEntity.getChildren();\nparentRepository.save(parentEntity);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7531617,"reputation":159,"user_id":5719570,"display_name":"Satrajit A"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662408624,"creation_date":1662395477,"answer_id":73612326,"question_id":2302802,"body_markdown":"In my case, it occurred when I tried to retrieve a related entity using reference to an entity with null id.\r\n\r\n    @Entity\r\n    public class User {\r\n    @Id\r\n    private Long id;\r\n    }\r\n    \r\n    @Entity\r\n    public class Address {\r\n    @Id\r\n    private Long id;\r\n    @JoinColumn(name=&quot;user_id&quot;)\r\n    @OneToOne\r\n    private User user;\r\n    }\r\n    \r\n    interface AddressRepository extends JpaRepository&lt;Address, Long&gt; {\r\n    Address findByUser(User user);\r\n    }\r\n    \r\n    User user = new User(); // this is transient, does not have id populated\r\n    // user.setId(1L) // works fine if this is uncommented\r\n    \r\n    addressRepository.findByUser(user); // throws exception\r\n\r\n","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>In my case, it occurred when I tried to retrieve a related entity using reference to an entity with null id.</p>\n<pre><code>@Entity\npublic class User {\n@Id\nprivate Long id;\n}\n\n@Entity\npublic class Address {\n@Id\nprivate Long id;\n@JoinColumn(name=&quot;user_id&quot;)\n@OneToOne\nprivate User user;\n}\n\ninterface AddressRepository extends JpaRepository&lt;Address, Long&gt; {\nAddress findByUser(User user);\n}\n\nUser user = new User(); // this is transient, does not have id populated\n// user.setId(1L) // works fine if this is uncommented\n\naddressRepository.findByUser(user); // throws exception\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1092885,"reputation":37679,"user_id":1087131,"accept_rate":54,"display_name":"Stephen Paul"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1677830405,"creation_date":1675077783,"answer_id":75283725,"question_id":2302802,"body_markdown":"I just got this error because I was assigning an un-proxied entity onto another entity before saving. \r\n\r\nI should have been linking a proxied entity instance.\r\n\r\nSee the below explanation:\r\n\r\n\r\n    Child saved = childRepository.save(child);\r\n\r\n    // INCORRECT\r\n    parent.setChild(child);  // &lt;-- &#39;child&#39; is NOT managed (not proxied)\r\n\r\n    // CORRECT\r\n    parent.setChild(saved);  // &lt;-- &#39;saved&#39; is managed (proxied)\r\n    ","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>I just got this error because I was assigning an un-proxied entity onto another entity before saving.</p>\n<p>I should have been linking a proxied entity instance.</p>\n<p>See the below explanation:</p>\n<pre><code>Child saved = childRepository.save(child);\n\n// INCORRECT\nparent.setChild(child);  // &lt;-- 'child' is NOT managed (not proxied)\n\n// CORRECT\nparent.setChild(saved);  // &lt;-- 'saved' is managed (proxied)\n</code></pre>\n"}],"owner":{"account_id":67082,"reputation":12759,"user_id":196480,"accept_rate":81,"display_name":"Tushar Ahirrao"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1049496,"favorite_count":0,"down_vote_count":3,"up_vote_count":888,"accepted_answer_id":2302814,"answer_count":33,"score":885,"last_activity_date":1691097570,"creation_date":1266682665,"question_id":2302802,"body_markdown":"I receive following error when I save the object using Hibernate \r\n\r\n    object references an unsaved transient instance - save the transient instance before flushing\r\n\r\n ","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>I receive following error when I save the object using Hibernate </p>\n\n<pre><code>object references an unsaved transient instance - save the transient instance before flushing\n</code></pre>\n"},{"tags":["java","docker","logging","splunk"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1691097706,"post_id":76831658,"comment_id":135449732,"body_markdown":"How is this question related to programming? It might be better suited for [devops](https://devops.stackexchange.com/) or [sf].","body":"How is this question related to programming? It might be better suited for <a href=\"https://devops.stackexchange.com/\">devops</a> or <a href=\"https://serverfault.com\">Server Fault</a>."}],"owner":{"account_id":11607084,"reputation":317,"user_id":8502417,"accept_rate":60,"display_name":"Melanie"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1691576145,"answer_count":0,"score":1,"last_activity_date":1691097452,"creation_date":1691097452,"question_id":76831658,"body_markdown":"I have an app that runs in a docker container (say A). The app includes a log4j2 yaml configuration file, which has an Http_Appender routing logs to http://host.docker.internal:8080/log ready to be received in a proxy in docker container B. These logs are then setup to be queued to a websocket server at localhost:8080. \r\n\r\nHow might I configure the proxy to not only output to a websocket but also to splunk enterprise, where queries for the app take in stuff like the proxy name in java \r\n","title":"sending logs to splunk between docker containers","body":"<p>I have an app that runs in a docker container (say A). The app includes a log4j2 yaml configuration file, which has an Http_Appender routing logs to <a href=\"http://host.docker.internal:8080/log\" rel=\"nofollow noreferrer\">http://host.docker.internal:8080/log</a> ready to be received in a proxy in docker container B. These logs are then setup to be queued to a websocket server at localhost:8080.</p>\n<p>How might I configure the proxy to not only output to a websocket but also to splunk enterprise, where queries for the app take in stuff like the proxy name in java</p>\n"},{"tags":["java","android","testing","filesystems"],"comments":[{"owner":{"account_id":1646431,"reputation":308,"user_id":1517905,"accept_rate":67,"display_name":"Tasos Moustakas"},"score":0,"creation_date":1445358233,"post_id":33241465,"comment_id":54286195,"body_markdown":"Firstly, where do you test your app? AVD emulator or a physical device?","body":"Firstly, where do you test your app? AVD emulator or a physical device?"}],"answers":[{"comments":[{"owner":{"account_id":478441,"reputation":3062,"user_id":890537,"accept_rate":70,"display_name":"m02ph3u5"},"score":2,"creation_date":1445358013,"post_id":33241614,"comment_id":54286051,"body_markdown":"Thanks for your reply. You should rather put questions as comments that in your answer. The AVD-thing is a great hint, +1 for that. Sadly my app depends on services that are not available inside the emulator.","body":"Thanks for your reply. You should rather put questions as comments that in your answer. The AVD-thing is a great hint, +1 for that. Sadly my app depends on services that are not available inside the emulator."}],"tags":[],"owner":{"account_id":1646431,"reputation":308,"user_id":1517905,"accept_rate":67,"display_name":"Tasos Moustakas"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1445431866,"creation_date":1445357535,"answer_id":33241614,"question_id":33241465,"body_markdown":"If you test your app on a AVD emulator, you can simply configure the space available in the emulator. See [documentation][1]. Let me know if that solution works for you.\r\nHere is your [tutorial][2] on how to use AVD for Google Play Services.\r\n\r\n\r\n  [1]: http://developer.android.com/tools/help/avd-manager.html\r\n  [2]: http://code.tutsplus.com/tutorials/android-sdk-working-with-google-maps-application-setup--mobile-15771","title":"Android test out of storage space","body":"<p>If you test your app on a AVD emulator, you can simply configure the space available in the emulator. See <a href=\"http://developer.android.com/tools/help/avd-manager.html\" rel=\"nofollow\">documentation</a>. Let me know if that solution works for you.\nHere is your <a href=\"http://code.tutsplus.com/tutorials/android-sdk-working-with-google-maps-application-setup--mobile-15771\" rel=\"nofollow\">tutorial</a> on how to use AVD for Google Play Services.</p>\n"},{"comments":[{"owner":{"account_id":478441,"reputation":3062,"user_id":890537,"accept_rate":70,"display_name":"m02ph3u5"},"score":2,"creation_date":1445528134,"post_id":33284127,"comment_id":54370119,"body_markdown":"This is pretty much what I ended up with. I connected via `adb shell` and stuffed the fs with &quot;cat-ting&quot; some trash files around.","body":"This is pretty much what I ended up with. I connected via <code>adb shell</code> and stuffed the fs with &quot;cat-ting&quot; some trash files around."},{"owner":{"account_id":1835658,"reputation":14193,"user_id":1666116,"display_name":"323go"},"score":1,"creation_date":1497271034,"post_id":33284127,"comment_id":75992490,"body_markdown":"It appears that some implementations expect `1M` and others `1m`.","body":"It appears that some implementations expect <code>1M</code> and others <code>1m</code>."},{"owner":{"account_id":5960289,"reputation":2277,"user_id":4685664,"display_name":"Norman Breau"},"score":1,"creation_date":1510078249,"post_id":33284127,"comment_id":81279072,"body_markdown":"My samsung device completely ignored the letters and always was in the unit of bytes. My google device used lowercase letters. Definitely completely depends on the device.","body":"My samsung device completely ignored the letters and always was in the unit of bytes. My google device used lowercase letters. Definitely completely depends on the device."}],"tags":[],"owner":{"account_id":1835658,"reputation":14193,"user_id":1666116,"display_name":"323go"},"comment_count":3,"down_vote_count":0,"up_vote_count":38,"is_accepted":true,"score":38,"last_activity_date":1497271099,"creation_date":1445525785,"answer_id":33284127,"question_id":33241465,"body_markdown":"Android runs on linux, so you can go to the shell and use the `dd` command to fill up the disk. Connect your device by USB and type `adb shell`, then\r\n\r\n    dd if=/dev/zero of=/sdcard/deleteme bs=1m count=1024\r\n\r\nwrite a 1GB file named `deleteme` to the `/sdcard`, full of zeroes.\r\n\r\n*  `if=` is the input file\r\n*  `/dev/zero` just returns endless zeroes.\r\n*  `of=` is the output file\r\n*  `bs=` is the block size, here one megabyte; some implementations prefer `1M` instead.\r\n*  `count=` is the number of blocks to write, here 1024, which makes for a 1GB file.\r\n\r\nAdjust the sizes to suit your needs, or write multiple files.  Prepare for Android to start complaining about low disk space once you hit around 400MB available space. In my experience, Android start complaining about low disk space long before the apps begin to crash.\r\n","title":"Android test out of storage space","body":"<p>Android runs on linux, so you can go to the shell and use the <code>dd</code> command to fill up the disk. Connect your device by USB and type <code>adb shell</code>, then</p>\n\n<pre><code>dd if=/dev/zero of=/sdcard/deleteme bs=1m count=1024\n</code></pre>\n\n<p>write a 1GB file named <code>deleteme</code> to the <code>/sdcard</code>, full of zeroes.</p>\n\n<ul>\n<li><code>if=</code> is the input file</li>\n<li><code>/dev/zero</code> just returns endless zeroes.</li>\n<li><code>of=</code> is the output file</li>\n<li><code>bs=</code> is the block size, here one megabyte; some implementations prefer <code>1M</code> instead.</li>\n<li><code>count=</code> is the number of blocks to write, here 1024, which makes for a 1GB file.</li>\n</ul>\n\n<p>Adjust the sizes to suit your needs, or write multiple files.  Prepare for Android to start complaining about low disk space once you hit around 400MB available space. In my experience, Android start complaining about low disk space long before the apps begin to crash.</p>\n"}],"owner":{"account_id":478441,"reputation":3062,"user_id":890537,"accept_rate":70,"display_name":"m02ph3u5"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7797,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"accepted_answer_id":33284127,"answer_count":2,"score":19,"last_activity_date":1691097137,"creation_date":1445357080,"question_id":33241465,"body_markdown":"I wrote an android app that (among other things) writes files to the *disk*. Now I wonder what&#39;s gonna happen when the file system runs **out of storage space**. I guess that for example `java.io.FileOutputStream.write()` will throw an `IOException`, which I&#39;ll have to catch.\r\n\r\nThe thing is, I don&#39;t want to rely on my super ninja powers - I might have forgotten to put a try-catch somewhere or don&#39;t handle it correctly. Thus, **I want to test this scenario**.\r\n\r\nSadly, I couldn&#39;t find any word about a good practice regarding this - not even on SO.\r\n\r\nSure, I cold manually stuff the filesystem with something like this:\r\n\r\n    size = N\r\n    dir = /some/path\r\n    data = generateDataForSize(size)\r\n    while( write(data, dir) );\r\n    while( round(size/=2) &gt; 1 )\r\n        write(generateDataForSize(size), dir)\r\n\r\nWhere `write()`will either generate distinct files or append to a single one. There might be some issues with `generateDataForSize()` and large sizes but let&#39;s put that aside for now.\r\n\r\nWhat&#39;s itching me is that I&#39;ll have to put this somewhere into my app plus I&#39;ll have to clean that $%#! up manually. Okay, if I put it inside its own directory I can just discard the whole thing with a single line on the adb shell.\r\n\r\nAnyhow, **is there any easier way to go for this that I&#39;m missing? Does android provide any mechanics for this like temporarily limiting the storage space available per app?** Any *integrated* soltions for unit tests or android SDK tools? How do other people (you) do this?\r\n\r\n---\r\n\r\n**TL;DR**: How to efficiently stuff the *fs* for testing the case of writing to *fs* when it&#39;s full.\r\n\r\n---\r\n\r\nI&#39;m testing on a real device that is not rooted. The emulator is deadly slow even with HAXM up and running. Using the emulator is, sadly, not an option.\r\n\r\nTasos Moustakas hint with limiting the space available to AVDs is great, though. I guess if you avoid the issues with `android:installLocation=&quot;preferExternal&quot;` and move your app to the SD / write files to the limited SD this is a acceptable solution.\r\n\r\nThe accepted answer is pretty much what I ended up doing. But that still requires some manual work.","title":"Android test out of storage space","body":"<p>I wrote an android app that (among other things) writes files to the <em>disk</em>. Now I wonder what's gonna happen when the file system runs <strong>out of storage space</strong>. I guess that for example <code>java.io.FileOutputStream.write()</code> will throw an <code>IOException</code>, which I'll have to catch.</p>\n<p>The thing is, I don't want to rely on my super ninja powers - I might have forgotten to put a try-catch somewhere or don't handle it correctly. Thus, <strong>I want to test this scenario</strong>.</p>\n<p>Sadly, I couldn't find any word about a good practice regarding this - not even on SO.</p>\n<p>Sure, I cold manually stuff the filesystem with something like this:</p>\n<pre><code>size = N\ndir = /some/path\ndata = generateDataForSize(size)\nwhile( write(data, dir) );\nwhile( round(size/=2) &gt; 1 )\n    write(generateDataForSize(size), dir)\n</code></pre>\n<p>Where <code>write()</code>will either generate distinct files or append to a single one. There might be some issues with <code>generateDataForSize()</code> and large sizes but let's put that aside for now.</p>\n<p>What's itching me is that I'll have to put this somewhere into my app plus I'll have to clean that $%#! up manually. Okay, if I put it inside its own directory I can just discard the whole thing with a single line on the adb shell.</p>\n<p>Anyhow, <strong>is there any easier way to go for this that I'm missing? Does android provide any mechanics for this like temporarily limiting the storage space available per app?</strong> Any <em>integrated</em> soltions for unit tests or android SDK tools? How do other people (you) do this?</p>\n<hr />\n<p><strong>TL;DR</strong>: How to efficiently stuff the <em>fs</em> for testing the case of writing to <em>fs</em> when it's full.</p>\n<hr />\n<p>I'm testing on a real device that is not rooted. The emulator is deadly slow even with HAXM up and running. Using the emulator is, sadly, not an option.</p>\n<p>Tasos Moustakas hint with limiting the space available to AVDs is great, though. I guess if you avoid the issues with <code>android:installLocation=&quot;preferExternal&quot;</code> and move your app to the SD / write files to the limited SD this is a acceptable solution.</p>\n<p>The accepted answer is pretty much what I ended up doing. But that still requires some manual work.</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":11222708,"reputation":587,"user_id":8233361,"display_name":"Claudio Weiler"},"score":0,"creation_date":1691097306,"post_id":76831583,"comment_id":135449655,"body_markdown":"Microservices should not have pages. Your rest endpoint will return 404 status code, and client should handle this.","body":"Microservices should not have pages. Your rest endpoint will return 404 status code, and client should handle this."},{"owner":{"account_id":5553349,"reputation":123,"user_id":4405673,"accept_rate":0,"display_name":"LoreSchaeffer"},"score":0,"creation_date":1691097840,"post_id":76831583,"comment_id":135449749,"body_markdown":"I have already a full rest api to create, get and delete the &quot;ShortURLs&quot;, but, since this will be part of a website, i want a user who wrote an invalid url to see a nice 404 error page","body":"I have already a full rest api to create, get and delete the &quot;ShortURLs&quot;, but, since this will be part of a website, i want a user who wrote an invalid url to see a nice 404 error page"},{"owner":{"account_id":11222708,"reputation":587,"user_id":8233361,"display_name":"Claudio Weiler"},"score":0,"creation_date":1691098248,"post_id":76831583,"comment_id":135449812,"body_markdown":"Assuming its a Java server, this mapping goes into web.xml `&lt;error-page&gt;` definition: https://docs.oracle.com/cd/E24329_01/web.1211/e21049/web_xml.htm#WBAPP537","body":"Assuming its a Java server, this mapping goes into web.xml <code>&lt;error-page&gt;</code> definition: <a href=\"https://docs.oracle.com/cd/E24329_01/web.1211/e21049/web_xml.htm#WBAPP537\" rel=\"nofollow noreferrer\">docs.oracle.com/cd/E24329_01/web.1211/e21049/&hellip;</a>"},{"owner":{"account_id":5553349,"reputation":123,"user_id":4405673,"accept_rate":0,"display_name":"LoreSchaeffer"},"score":0,"creation_date":1691098714,"post_id":76831583,"comment_id":135449906,"body_markdown":"Right now i don&#39;t have a web.xml, i&#39;d like to run it as a standalone application. Can the thing you suggested be done in this case?","body":"Right now i don&#39;t have a web.xml, i&#39;d like to run it as a standalone application. Can the thing you suggested be done in this case?"},{"owner":{"account_id":11222708,"reputation":587,"user_id":8233361,"display_name":"Claudio Weiler"},"score":0,"creation_date":1691099793,"post_id":76831583,"comment_id":135450059,"body_markdown":"If it is a web application, running in a Java Server, just create the web.xml. You talked about Spring boot, so it could be a Jetty server, IDK...","body":"If it is a web application, running in a Java Server, just create the web.xml. You talked about Spring boot, so it could be a Jetty server, IDK..."},{"owner":{"account_id":5553349,"reputation":123,"user_id":4405673,"accept_rate":0,"display_name":"LoreSchaeffer"},"score":0,"creation_date":1691154965,"post_id":76831583,"comment_id":135457282,"body_markdown":"Reading online i found that in the newer versions of spring boot web.xml should be avoided and that i should use an ErrorController. Is that true?","body":"Reading online i found that in the newer versions of spring boot web.xml should be avoided and that i should use an ErrorController. Is that true?"}],"owner":{"account_id":5553349,"reputation":123,"user_id":4405673,"accept_rate":0,"display_name":"LoreSchaeffer"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691096558,"creation_date":1691096558,"question_id":76831583,"body_markdown":"Hey awesome StackOverflow community,\r\nI&#39;m quite new to the world of Spring Boot and microservices. I&#39;m developing an URL shortener, i made the logic and managed the storage with JPA and i&#39;ve been able to manage the redirect with this controller:\r\n\r\n```java\r\n@GetMapping(&quot;/**&quot;)\r\n    public ResponseEntity&lt;Void&gt; redirect(HttpServletRequest request) {\r\n        String source = request.getRequestURI().toLowerCase();\r\n\r\n        if (source.startsWith(&quot;/&quot;)) source = source.substring(1);\r\n\r\n        ShortUrl shortUrl = shortUrlService.getShortUrlBySource(source);\r\n\r\n        if (shortUrl == null) throw new ShortUrlNotFoundException(); // 404\r\n\r\n        HttpHeaders headers = new HttpHeaders();\r\n        headers.setLocation(URI.create(shortUrl.getDestination()));\r\n        return new ResponseEntity&lt;&gt;(headers, HttpStatus.FOUND);\r\n    }\r\n```\r\n\r\nI&#39;d like to use a custom 404 page and to achieve that i&#39;ve tried different things linke interceptors or variation of the previews method but nothing worked. I&#39;ve only managed to display the browser default 404 page, the default whitelabel error page or a StackOverflowException due to the request looping between the previous method and the 404 static page.\r\n\r\nIs there some kind guy that can help me with this tricky problem?\r\nThank you","title":"Spring-Boot URL shortener, &quot;/**&quot; mapping and custom 404","body":"<p>Hey awesome StackOverflow community,\nI'm quite new to the world of Spring Boot and microservices. I'm developing an URL shortener, i made the logic and managed the storage with JPA and i've been able to manage the redirect with this controller:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(&quot;/**&quot;)\n    public ResponseEntity&lt;Void&gt; redirect(HttpServletRequest request) {\n        String source = request.getRequestURI().toLowerCase();\n\n        if (source.startsWith(&quot;/&quot;)) source = source.substring(1);\n\n        ShortUrl shortUrl = shortUrlService.getShortUrlBySource(source);\n\n        if (shortUrl == null) throw new ShortUrlNotFoundException(); // 404\n\n        HttpHeaders headers = new HttpHeaders();\n        headers.setLocation(URI.create(shortUrl.getDestination()));\n        return new ResponseEntity&lt;&gt;(headers, HttpStatus.FOUND);\n    }\n</code></pre>\n<p>I'd like to use a custom 404 page and to achieve that i've tried different things linke interceptors or variation of the previews method but nothing worked. I've only managed to display the browser default 404 page, the default whitelabel error page or a StackOverflowException due to the request looping between the previous method and the 404 static page.</p>\n<p>Is there some kind guy that can help me with this tricky problem?\nThank you</p>\n"},{"tags":["java","spring","spring-boot","kotlin","jooq"],"comments":[{"owner":{"account_id":2073393,"reputation":2457,"user_id":1847378,"display_name":"AndrewL"},"score":0,"creation_date":1691075908,"post_id":76829268,"comment_id":135445457,"body_markdown":"Take a look at fetchStream https://www.jooq.org/javadoc/latest/org.jooq/org/jooq/DSLContext.html#fetchStream(java.lang.String)","body":"Take a look at fetchStream <a href=\"https://www.jooq.org/javadoc/latest/org.jooq/org/jooq/DSLContext.html#fetchStream(java.lang.String)\" rel=\"nofollow noreferrer\">jooq.org/javadoc/latest/org.jooq/org/jooq/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691086343,"creation_date":1691086343,"answer_id":76830651,"question_id":76829268,"body_markdown":"I&#39;m assuming what you mean is that you want to avoid the type of [dynamic SQL with jOOQ][1], where you&#39;d either include or exclude a `LIMIT` clause in your query, or write the query twice, depending on the export mode.\r\n\r\nYou can always just pass a [`DSL::noField`][2] to the `LIMIT` clause to make the call to `.limit()` a no-op:\r\n\r\n```java\r\n.limit(isCsv\r\n  ? noField(SQLDataType.INTEGER)\r\n  : (page.number - 1) * page.size, page.size + 1)\r\n```\r\n\r\nPassing such conditional arguments to the jOOQ DSL is part of [jOOQ&#39;s dynamic SQL support][1], knowing that *every* jOOQ query is a dynamic SQL query, even if it looks like a static query thanks to the DSL&#39;s similarity to actual SQL.\r\n\r\nNote that [jOOQ also supports exporting data in CSV format][3], so perhaps you can use that as well (it&#39;s not clear to me from your question if that&#39;s part of your question).\r\n\r\n\r\n  [1]: https://www.jooq.org/doc/latest/manual/sql-building/dynamic-sql/\r\n  [2]: https://www.jooq.org/doc/latest/manual/sql-building/dynamic-sql/no-field/\r\n  [3]: https://www.jooq.org/doc/latest/manual/sql-execution/exporting/exporting-csv/","title":"Using jOOQ query to return all records from CSV","body":"<p>I'm assuming what you mean is that you want to avoid the type of <a href=\"https://www.jooq.org/doc/latest/manual/sql-building/dynamic-sql/\" rel=\"nofollow noreferrer\">dynamic SQL with jOOQ</a>, where you'd either include or exclude a <code>LIMIT</code> clause in your query, or write the query twice, depending on the export mode.</p>\n<p>You can always just pass a <a href=\"https://www.jooq.org/doc/latest/manual/sql-building/dynamic-sql/no-field/\" rel=\"nofollow noreferrer\"><code>DSL::noField</code></a> to the <code>LIMIT</code> clause to make the call to <code>.limit()</code> a no-op:</p>\n<pre class=\"lang-java prettyprint-override\"><code>.limit(isCsv\n  ? noField(SQLDataType.INTEGER)\n  : (page.number - 1) * page.size, page.size + 1)\n</code></pre>\n<p>Passing such conditional arguments to the jOOQ DSL is part of <a href=\"https://www.jooq.org/doc/latest/manual/sql-building/dynamic-sql/\" rel=\"nofollow noreferrer\">jOOQ's dynamic SQL support</a>, knowing that <em>every</em> jOOQ query is a dynamic SQL query, even if it looks like a static query thanks to the DSL's similarity to actual SQL.</p>\n<p>Note that <a href=\"https://www.jooq.org/doc/latest/manual/sql-execution/exporting/exporting-csv/\" rel=\"nofollow noreferrer\">jOOQ also supports exporting data in CSV format</a>, so perhaps you can use that as well (it's not clear to me from your question if that's part of your question).</p>\n"}],"owner":{"account_id":28614024,"reputation":23,"user_id":21908428,"display_name":"JonathanSessenioo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76830651,"answer_count":1,"score":0,"last_activity_date":1691095975,"creation_date":1691074465,"question_id":76829268,"body_markdown":"I am trying to create an endpoint that would return a csv file for download. So far I had an endpoint that returned json in the response, and I want to simply change json to csv, but do it without pagination as in the case of json (because it&#39;s there).\r\n\r\n\r\n \r\n    override fun find(query: TransactionQuery): org.springframework.data.domain.Page&lt;List&lt;TransactionDetails&gt;&gt; {\r\n            TODO(&quot;Not yet implemented&quot;)\r\n    }\r\n\r\n  ","title":"Using jOOQ query to return all records from CSV","body":"<p>I am trying to create an endpoint that would return a csv file for download. So far I had an endpoint that returned json in the response, and I want to simply change json to csv, but do it without pagination as in the case of json (because it's there).</p>\n<pre><code>override fun find(query: TransactionQuery): org.springframework.data.domain.Page&lt;List&lt;TransactionDetails&gt;&gt; {\n        TODO(&quot;Not yet implemented&quot;)\n}\n</code></pre>\n"},{"tags":["java","junit","mocking","mockito"],"comments":[{"owner":{"account_id":508815,"reputation":2213,"user_id":1372195,"accept_rate":83,"display_name":"Carlo Moretti"},"score":1,"creation_date":1479978313,"post_id":40781857,"comment_id":68786881,"body_markdown":"What is your goal? What have your tried? Why do you need to print those interactions, how are you gonna &quot;use it in the code&quot;?","body":"What is your goal? What have your tried? Why do you need to print those interactions, how are you gonna &quot;use it in the code&quot;?"},{"owner":{"account_id":1188061,"reputation":5354,"user_id":1161594,"accept_rate":79,"display_name":"USer22999299"},"score":0,"creation_date":1479986676,"post_id":40781857,"comment_id":68792827,"body_markdown":"@Onheiron After getting all of the interactions with mock i can use verify(mock, times(x)).method(1); and after this the verifyNoMoreInteractions(mock) i would like to have the list of interactions in order to set the behavior of the methods","body":"@Onheiron After getting all of the interactions with mock i can use verify(mock, times(x)).method(1); and after this the verifyNoMoreInteractions(mock) i would like to have the list of interactions in order to set the behavior of the methods"},{"owner":{"account_id":508815,"reputation":2213,"user_id":1372195,"accept_rate":83,"display_name":"Carlo Moretti"},"score":0,"creation_date":1479988354,"post_id":40781857,"comment_id":68793910,"body_markdown":"To use `verify(mock, times(x)).method(1);` you don&#39;t need the list of all interactions, that&#39;s what mockito does: it checks the interactions with mock.method(1) were x and no more/less.","body":"To use <code>verify(mock, times(x)).method(1);</code> you don&#39;t need the list of all interactions, that&#39;s what mockito does: it checks the interactions with mock.method(1) were x and no more/less."},{"owner":{"account_id":1188061,"reputation":5354,"user_id":1161594,"accept_rate":79,"display_name":"USer22999299"},"score":0,"creation_date":1479988449,"post_id":40781857,"comment_id":68793971,"body_markdown":"@Onheiron yeah, i know this trick by in case you have class with 7-10 other mocks that each one has 10-20 interactions, i would like to have the list of interactions in advance and than write all of the verification instead write one, run, fix and so on..","body":"@Onheiron yeah, i know this trick by in case you have class with 7-10 other mocks that each one has 10-20 interactions, i would like to have the list of interactions in advance and than write all of the verification instead write one, run, fix and so on.."},{"owner":{"account_id":508815,"reputation":2213,"user_id":1372195,"accept_rate":83,"display_name":"Carlo Moretti"},"score":2,"creation_date":1479989632,"post_id":40781857,"comment_id":68794736,"body_markdown":"The number of interactions expected should be given by the behaviour you&#39;re testing. I mean, you don&#39;t start from a list of interactions and then write verification (whatever that means), instead, you start by a desired behaviour (a set of desired interactions) and you check those occurred afterwards.","body":"The number of interactions expected should be given by the behaviour you&#39;re testing. I mean, you don&#39;t start from a list of interactions and then write verification (whatever that means), instead, you start by a desired behaviour (a set of desired interactions) and you check those occurred afterwards."},{"owner":{"account_id":1188061,"reputation":5354,"user_id":1161594,"accept_rate":79,"display_name":"USer22999299"},"score":0,"creation_date":1479991191,"post_id":40781857,"comment_id":68795795,"body_markdown":"@Onheiron :) this would be solved by using TDD but that was not my intention. The given is that i have a class with an algorithm that use a lot of other classes that i mock, while adding a new method that calls tons of other methods, i would like to make sure that only x amount of methods been called y amount of times as the code working now, and make sure if someone will change something in the feature lets say by mistake calling another method and now its been called 5 times instead of 4, that the test will failed, therefore i would like to know the number of the current interaction","body":"@Onheiron :) this would be solved by using TDD but that was not my intention. The given is that i have a class with an algorithm that use a lot of other classes that i mock, while adding a new method that calls tons of other methods, i would like to make sure that only x amount of methods been called y amount of times as the code working now, and make sure if someone will change something in the feature lets say by mistake calling another method and now its been called 5 times instead of 4, that the test will failed, therefore i would like to know the number of the current interaction"},{"owner":{"account_id":508815,"reputation":2213,"user_id":1372195,"accept_rate":83,"display_name":"Carlo Moretti"},"score":0,"creation_date":1479991901,"post_id":40781857,"comment_id":68796276,"body_markdown":"TDD is making a test before even writing any code (defining its behaviour before its implementation) and then code till the test passes. In this case, you don&#39;t want to do this, but you still have to want to test something. You test a behaviour, this means you want to test that, when you call method `a()` on your tested class, then methods `x()`, `y()` and `z()` are called on a given mock. Do you have access to the code of your tested class? If so, you should be able to know what interactions with each mock should be called when you call method `a()` just by reading it.","body":"TDD is making a test before even writing any code (defining its behaviour before its implementation) and then code till the test passes. In this case, you don&#39;t want to do this, but you still have to want to test something. You test a behaviour, this means you want to test that, when you call method <code>a()</code> on your tested class, then methods <code>x()</code>, <code>y()</code> and <code>z()</code> are called on a given mock. Do you have access to the code of your tested class? If so, you should be able to know what interactions with each mock should be called when you call method <code>a()</code> just by reading it."}],"answers":[{"comments":[{"owner":{"account_id":323574,"reputation":3424,"user_id":643675,"accept_rate":69,"display_name":"elhefe"},"score":21,"creation_date":1516325456,"post_id":40811677,"comment_id":83651363,"body_markdown":"Because I have to re-figure this out everytime I come back to this comment:     `import static org.mockito.Mockito.mockingDetails;     System.out.println(mockingDetails(mock).printInvocations());`","body":"Because I have to re-figure this out everytime I come back to this comment:     <code>import static org.mockito.Mockito.mockingDetails;     System.out.println(mockingDetails(mock).printInvocations());</code>"},{"owner":{"account_id":83518,"reputation":6215,"user_id":234110,"accept_rate":67,"display_name":"Anand Rockzz"},"score":4,"creation_date":1540788579,"post_id":40811677,"comment_id":92977372,"body_markdown":"`import static org.mockito.Mockito.mockingDetails; System.out.println(mockingDetails(mock).getInvocations());`","body":"<code>import static org.mockito.Mockito.mockingDetails; System.out.println(mockingDetails(mock).getInvocations());</code>"}],"tags":[],"owner":{"account_id":1529248,"reputation":92157,"user_id":1426891,"display_name":"Jeff Bowman"},"comment_count":2,"down_vote_count":2,"up_vote_count":36,"is_accepted":true,"score":34,"last_activity_date":1691095893,"creation_date":1480104379,"answer_id":40811677,"question_id":40781857,"body_markdown":"You can use [MockingDetails](https://static.javadoc.io/org.mockito/mockito-core/2.2.22/org/mockito/MockingDetails.html) and either `printInvocations` or `getInvocations` to inspect the interactions belonging to a mock. However, this will not produce a list of invocations belonging to multiple mocks in the order that happened: just interactions with each individual mock.\r\n\r\nCode snippet, as contributed by [elhefe](https://stackoverflow.com/users/643675/elhefe) and [Anand Rockzz](https://stackoverflow.com/users/234110/anand-rockzz):\r\n\r\n```java\r\nimport static org.mockito.Mockito.mockingDetails;\r\n\r\nSystem.out.println(mockingDetails(mock).printInvocations());\r\n/* or */\r\nSystem.out.println(mockingDetails(mock).getInvocations());\r\n```\r\n\r\nAcknowledging your reluctance and caveats in the comments, I would say that this is a technique that does more to _lock in your current implementation_ than to _analyze your real constraints and prevent regressions_. Furthermore, if your algorithm has a lot of interactions with direct collaborators, that might be an indication that the algorithm should be refactored.\r\n\r\nIf the system is untested or undocumented legacy code, this might be a practical way to programmatically generate a regression test or analysis--a _temporary starting point_ for more-informed regression testing--but in your shoes I would instead start by documenting the contract of each component and then writing a test that confirms those interactions and constraints. As described in [the article &quot;is there a difference between asking and telling?&quot;](https://szczepiq.wordpress.com/2008/04/26/asking-and-telling/) by Mockito&#39;s original developer  Szczepan Faber), Mockito recommendations tend toward adding stubs until tests pass and adding verifications/counts only where there are expensive or non-idempotent side effects.","title":"How to print all interactions with a mock using Mockito","body":"<p>You can use <a href=\"https://static.javadoc.io/org.mockito/mockito-core/2.2.22/org/mockito/MockingDetails.html\" rel=\"nofollow noreferrer\">MockingDetails</a> and either <code>printInvocations</code> or <code>getInvocations</code> to inspect the interactions belonging to a mock. However, this will not produce a list of invocations belonging to multiple mocks in the order that happened: just interactions with each individual mock.</p>\n<p>Code snippet, as contributed by <a href=\"https://stackoverflow.com/users/643675/elhefe\">elhefe</a> and <a href=\"https://stackoverflow.com/users/234110/anand-rockzz\">Anand Rockzz</a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import static org.mockito.Mockito.mockingDetails;\n\nSystem.out.println(mockingDetails(mock).printInvocations());\n/* or */\nSystem.out.println(mockingDetails(mock).getInvocations());\n</code></pre>\n<p>Acknowledging your reluctance and caveats in the comments, I would say that this is a technique that does more to <em>lock in your current implementation</em> than to <em>analyze your real constraints and prevent regressions</em>. Furthermore, if your algorithm has a lot of interactions with direct collaborators, that might be an indication that the algorithm should be refactored.</p>\n<p>If the system is untested or undocumented legacy code, this might be a practical way to programmatically generate a regression test or analysis--a <em>temporary starting point</em> for more-informed regression testing--but in your shoes I would instead start by documenting the contract of each component and then writing a test that confirms those interactions and constraints. As described in <a href=\"https://szczepiq.wordpress.com/2008/04/26/asking-and-telling/\" rel=\"nofollow noreferrer\">the article &quot;is there a difference between asking and telling?&quot;</a> by Mockito's original developer  Szczepan Faber), Mockito recommendations tend toward adding stubs until tests pass and adding verifications/counts only where there are expensive or non-idempotent side effects.</p>\n"}],"owner":{"account_id":1188061,"reputation":5354,"user_id":1161594,"accept_rate":79,"display_name":"USer22999299"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13518,"favorite_count":0,"down_vote_count":0,"up_vote_count":25,"accepted_answer_id":40811677,"answer_count":1,"score":25,"last_activity_date":1691095893,"creation_date":1479978045,"question_id":40781857,"body_markdown":"So let&#39;s say I have to write some test on `ClassA` that has a `ClassB` as member and I&#39;m mocking `ClassB`.\r\n\r\nAt the end of the test i would like to use `verify(..)` and `verifyNoMoreInteractions(..)` to set the behaviour and validation for all of the mock calls.\r\n\r\nLet&#39;s say that the mock has more than 10 interactions with different methods.\r\n\r\nIs there any way to get JUnit to print all of the mock interactions and then use it in the code? \r\n\r\nRight now I&#39;m just reading the code and looking for the calls and than writing the verification line in the test. I&#39;m sure there is an easier way (TDD wont be possible in my situation :)) \r\n\r\nMy use case: I have a class with an algorithm that uses a lot of other classes that I mock. While adding a new method that calls tons of other methods, I would like to make sure that only x amount of methods been called y amount of times as the code working now. This will make sure if someone changes something in the future, let&#39;s say by mistake calling a method 5 times instead of 4, then the test will fail.","title":"How to print all interactions with a mock using Mockito","body":"<p>So let's say I have to write some test on <code>ClassA</code> that has a <code>ClassB</code> as member and I'm mocking <code>ClassB</code>.</p>\n\n<p>At the end of the test i would like to use <code>verify(..)</code> and <code>verifyNoMoreInteractions(..)</code> to set the behaviour and validation for all of the mock calls.</p>\n\n<p>Let's say that the mock has more than 10 interactions with different methods.</p>\n\n<p>Is there any way to get JUnit to print all of the mock interactions and then use it in the code? </p>\n\n<p>Right now I'm just reading the code and looking for the calls and than writing the verification line in the test. I'm sure there is an easier way (TDD wont be possible in my situation :)) </p>\n\n<p>My use case: I have a class with an algorithm that uses a lot of other classes that I mock. While adding a new method that calls tons of other methods, I would like to make sure that only x amount of methods been called y amount of times as the code working now. This will make sure if someone changes something in the future, let's say by mistake calling a method 5 times instead of 4, then the test will fail.</p>\n"},{"tags":["java","spring","junit","mockmvc"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1490955680,"post_id":43138249,"comment_id":73353417,"body_markdown":"The fact that something is written with JUnit doesn&#39;t mean it is a unit test it could very well be an integration test in which you wan to test the whole setup.","body":"The fact that something is written with JUnit doesn&#39;t mean it is a unit test it could very well be an integration test in which you wan to test the whole setup."},{"owner":{"account_id":1175311,"reputation":15568,"user_id":1151456,"accept_rate":83,"display_name":"Abubakkar"},"score":0,"creation_date":1490956121,"post_id":43138249,"comment_id":73353691,"body_markdown":"The tests that I have seen are definitely not integration tests","body":"The tests that I have seen are definitely not integration tests"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":4,"creation_date":1490956802,"post_id":43138249,"comment_id":73354128,"body_markdown":"MockMvc can be used in 2 different ways, standalone and with a full blown setup. Standalone mode is basically setting up the controller and you execute it like you would with a request. Added advantage is that you are also testing your mappings on your controller, which you wouldn&#39;t be testing if you simply invoke the method. This might be very handy if you expect certain things to happen (type checking, custom error handling) .","body":"MockMvc can be used in 2 different ways, standalone and with a full blown setup. Standalone mode is basically setting up the controller and you execute it like you would with a request. Added advantage is that you are also testing your mappings on your controller, which you wouldn&#39;t be testing if you simply invoke the method. This might be very handy if you expect certain things to happen (type checking, custom error handling) ."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1490956911,"post_id":43138249,"comment_id":73354205,"body_markdown":"Next to that if you really need an extensive unit test to test functionality of your controller you are probably doing too much in your controller it should basically be nothing more then an integration component between the web and your service layer. It should contain little to no logic.","body":"Next to that if you really need an extensive unit test to test functionality of your controller you are probably doing too much in your controller it should basically be nothing more then an integration component between the web and your service layer. It should contain little to no logic."}],"answers":[{"comments":[{"owner":{"account_id":5534873,"reputation":18496,"user_id":4393565,"accept_rate":67,"display_name":"P.J.Meisch"},"score":3,"creation_date":1490985975,"post_id":43138861,"comment_id":73372664,"body_markdown":"add to that the possibility to test parameter validation with `@Valid` annotation and the corresponding return codes or the possibility to check that `@ExceptionHandler`s do their work.","body":"add to that the possibility to test parameter validation with <code>@Valid</code> annotation and the corresponding return codes or the possibility to check that <code>@ExceptionHandler</code>s do their work."}],"tags":[],"owner":{"account_id":5523724,"reputation":22000,"user_id":4385895,"accept_rate":58,"display_name":"Vasu"},"comment_count":1,"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1691095778,"creation_date":1490957487,"answer_id":43138861,"question_id":43138249,"body_markdown":"When it comes to the unit-testing of a `Controller` (or any Endpoint which is exposed) classes, there are two things that we will validate:\r\n\r\n(1) Controller&#39;s actual logic itself as standalone i.e., right service calls are invoked or not etc..\r\n\r\n(2) Request URL mapping and the Response status &amp; object\r\n\r\n(3) Input validation exceptions raised by Spring framework (when you use the @Valid)\r\n\r\nItem (1) above is what we test in general with all other classes like Services, Utility classes etc..\r\n\r\n**Items (2) &amp; (3) need to be covered/tested additionally for the endpoints (controller classes) which have been exposed**, so whether we use Spring&#39;s `MockMVC` or other machinery to do that, it is up to us really. \r\n\r\n**Spring&#39;s `MockMVC` indeed helps us to start the in-memory servlet container** &amp; check that the right controller methods are invoked &amp; then the right responses have been coming out.\r\n\r\nFrom my personal experience, testing the controllers (for item(2)) helped me to resolve URL mapping conflict issues (of course, within the same controller) etc.. straight away rather than fixing them at the later stages of the project.\r\n\r\n\r\n","title":"Why use Spring&#39;s Mock MVC when you have unit test of your controller classes","body":"<p>When it comes to the unit-testing of a <code>Controller</code> (or any Endpoint which is exposed) classes, there are two things that we will validate:</p>\n<p>(1) Controller's actual logic itself as standalone i.e., right service calls are invoked or not etc..</p>\n<p>(2) Request URL mapping and the Response status &amp; object</p>\n<p>(3) Input validation exceptions raised by Spring framework (when you use the @Valid)</p>\n<p>Item (1) above is what we test in general with all other classes like Services, Utility classes etc..</p>\n<p><strong>Items (2) &amp; (3) need to be covered/tested additionally for the endpoints (controller classes) which have been exposed</strong>, so whether we use Spring's <code>MockMVC</code> or other machinery to do that, it is up to us really.</p>\n<p><strong>Spring's <code>MockMVC</code> indeed helps us to start the in-memory servlet container</strong> &amp; check that the right controller methods are invoked &amp; then the right responses have been coming out.</p>\n<p>From my personal experience, testing the controllers (for item(2)) helped me to resolve URL mapping conflict issues (of course, within the same controller) etc.. straight away rather than fixing them at the later stages of the project.</p>\n"},{"tags":[],"owner":{"account_id":7517507,"reputation":1452,"user_id":5710456,"display_name":"Dhiraj"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1490959233,"creation_date":1490959233,"answer_id":43139403,"question_id":43138249,"body_markdown":"Based on My experience I will try to answer your question.\r\n\r\n**First thing we need to understand why we use unit testing?**\r\n\r\n&gt; It is a extra check used by developer to write clean working code.\r\n&gt; Clean working code means every line written should be doing what it is\r\n&gt; expected to do. how do you achieve this? Here comes unit testing. The\r\n&gt; standalone unit of code you are writing should be verified standalone.\r\n&gt; Method is best part in code which represents standalone unit code\r\n&gt; template.\r\n\r\n**Unit Testing for Method**\r\n\r\n&gt; Developer should write a test for method which describes the method\r\n&gt; behavior. And possible checks that i follow is  is it returning the\r\n&gt; expected value considering all positive scenarios? is it working in\r\n&gt; case of Exception? is it calling correct subsequent methods ?\r\n&gt; \r\n&gt; **Developer should verify the method by actually calling it providing a\r\n&gt; mock environment**\r\n\r\nBelow is possible answer to your question. though it is solely based upon the developers.\r\n\r\nController methods are intended to invoke correct service call accepting input and returning the value from service to view. \r\nSo I may think of write a unit test case for controller method as you are thinking is a right approach. But **you should verify the method by calling it in same way as it will be called in real time.** \r\nso you need to call controller method in same way as MVC does. Hence it is better option to use MockMVC.\r\nMockMVC is also useful to verify the urls, input params , response and status which are part of controller method. Considering these all it makes it standalone unit of code.\r\n\r\nHope this will clarify your doubt.\r\n\r\n\r\n\r\n\r\n\r\n","title":"Why use Spring&#39;s Mock MVC when you have unit test of your controller classes","body":"<p>Based on My experience I will try to answer your question.</p>\n\n<p><strong>First thing we need to understand why we use unit testing?</strong></p>\n\n<blockquote>\n  <p>It is a extra check used by developer to write clean working code.\n  Clean working code means every line written should be doing what it is\n  expected to do. how do you achieve this? Here comes unit testing. The\n  standalone unit of code you are writing should be verified standalone.\n  Method is best part in code which represents standalone unit code\n  template.</p>\n</blockquote>\n\n<p><strong>Unit Testing for Method</strong></p>\n\n<blockquote>\n  <p>Developer should write a test for method which describes the method\n  behavior. And possible checks that i follow is  is it returning the\n  expected value considering all positive scenarios? is it working in\n  case of Exception? is it calling correct subsequent methods ?</p>\n  \n  <p><strong>Developer should verify the method by actually calling it providing a\n  mock environment</strong></p>\n</blockquote>\n\n<p>Below is possible answer to your question. though it is solely based upon the developers.</p>\n\n<p>Controller methods are intended to invoke correct service call accepting input and returning the value from service to view. \nSo I may think of write a unit test case for controller method as you are thinking is a right approach. But <strong>you should verify the method by calling it in same way as it will be called in real time.</strong> \nso you need to call controller method in same way as MVC does. Hence it is better option to use MockMVC.\nMockMVC is also useful to verify the urls, input params , response and status which are part of controller method. Considering these all it makes it standalone unit of code.</p>\n\n<p>Hope this will clarify your doubt.</p>\n"}],"owner":{"account_id":1175311,"reputation":15568,"user_id":1151456,"accept_rate":83,"display_name":"Abubakkar"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5774,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":43138861,"answer_count":2,"score":12,"last_activity_date":1691095778,"creation_date":1490955520,"question_id":43138249,"body_markdown":"I have seen people around me using Spring MVC in unit tests for controller classes, which is not helpful in what a unit test is for.\r\n\r\nUnit tests are supposed to test your actual implementation of the controller class, and this can be achieved more accurately with simple Junit tests rather than using Spring Mock MVC.\r\n\r\nBut then the question arises, what&#39;s the real usage of Spring Mock MVC then? What do you need it for?\r\n\r\nLet&#39;s say I have below code :\r\n\r\n    @Controller\r\n    @RequestMapping(&quot;/systemusers&quot;)\r\n    public class SystemUserController\r\n    {\r\n    \t@RequestMapping(value = &quot;/{id}&quot;, method = RequestMethod.GET)\r\n    \tpublic String getUser(final Model model)\r\n    \t{\r\n    \t\r\n    \t\t// some logic to return user&#39;s details as json\r\n\r\n    \t\treturn UserDetailsPage;\r\n    \t}\r\n     }\r\n\r\nI can test this class/controller more accurately with Junit than with Spring Mock MVC (all it does is generates some json which can be asserted with junit).\r\n\r\nI can also test with Spring Mock MVC like using the correct endpoint returns the correct HTTP status and correct response page string. \r\n\r\n**But doesn&#39;t that mean that we are testing Spring MVC&#39;s functionality rather than the actual code for method under test?**\r\n\r\nP.S. : I have kept the code to minimal which I think is sufficient to explain my question. Assume there is no compilation error.","title":"Why use Spring&#39;s Mock MVC when you have unit test of your controller classes","body":"<p>I have seen people around me using Spring MVC in unit tests for controller classes, which is not helpful in what a unit test is for.</p>\n\n<p>Unit tests are supposed to test your actual implementation of the controller class, and this can be achieved more accurately with simple Junit tests rather than using Spring Mock MVC.</p>\n\n<p>But then the question arises, what's the real usage of Spring Mock MVC then? What do you need it for?</p>\n\n<p>Let's say I have below code :</p>\n\n<pre><code>@Controller\n@RequestMapping(\"/systemusers\")\npublic class SystemUserController\n{\n    @RequestMapping(value = \"/{id}\", method = RequestMethod.GET)\n    public String getUser(final Model model)\n    {\n\n        // some logic to return user's details as json\n\n        return UserDetailsPage;\n    }\n }\n</code></pre>\n\n<p>I can test this class/controller more accurately with Junit than with Spring Mock MVC (all it does is generates some json which can be asserted with junit).</p>\n\n<p>I can also test with Spring Mock MVC like using the correct endpoint returns the correct HTTP status and correct response page string. </p>\n\n<p><strong>But doesn't that mean that we are testing Spring MVC's functionality rather than the actual code for method under test?</strong></p>\n\n<p>P.S. : I have kept the code to minimal which I think is sufficient to explain my question. Assume there is no compilation error.</p>\n"},{"tags":["java","android","date","datetime","time"],"comments":[{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":2,"creation_date":1591620505,"post_id":62262367,"comment_id":110116215,"body_markdown":"Seriously, avoid the use of `java.util` whenever possible... What is the minimum API level you are supporting in this app? If you can use `java.time`, then do that. It&#39;s a lot better...","body":"Seriously, avoid the use of <code>java.util</code> whenever possible... What is the minimum API level you are supporting in this app? If you can use <code>java.time</code>, then do that. It&#39;s a lot better..."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1591620527,"post_id":62262367,"comment_id":110116226,"body_markdown":"A division by 365 and 12 comes mind.","body":"A division by 365 and 12 comes mind."},{"owner":{"account_id":8172676,"reputation":439,"user_id":6152567,"accept_rate":59,"display_name":"M Ansyori"},"score":0,"creation_date":1591620672,"post_id":62262367,"comment_id":110116299,"body_markdown":"@deHaar Hi, any reason why **java.time** is better? the current min api is 19 by the way","body":"@deHaar Hi, any reason why <b>java.time</b> is better? the current min api is 19 by the way"},{"owner":{"account_id":8172676,"reputation":439,"user_id":6152567,"accept_rate":59,"display_name":"M Ansyori"},"score":0,"creation_date":1591620799,"post_id":62262367,"comment_id":110116369,"body_markdown":"@blackapps Hello, can you please elaborate? do you mind giving an answer below?","body":"@blackapps Hello, can you please elaborate? do you mind giving an answer below?"},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":2,"creation_date":1591621090,"post_id":62262367,"comment_id":110116513,"body_markdown":"There are several reasons, e.g. consideration of daylight saving times and the possibility of using objects with or without respect to time zones or offsets. However, it&#39;s natively supported from Android 26, but there is a [backport](https://github.com/JakeWharton/ThreeTenABP) recommended to be used in lower API versions.","body":"There are several reasons, e.g. consideration of daylight saving times and the possibility of using objects with or without respect to time zones or offsets. However, it&#39;s natively supported from Android 26, but there is a <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"nofollow noreferrer\">backport</a> recommended to be used in lower API versions."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1591621129,"post_id":62262367,"comment_id":110116532,"body_markdown":"You learned in primary school to determine amount of months from amount of days. So what are you asking for? I forgot 31.","body":"You learned in primary school to determine amount of months from amount of days. So what are you asking for? I forgot 31."},{"owner":{"account_id":8172676,"reputation":439,"user_id":6152567,"accept_rate":59,"display_name":"M Ansyori"},"score":0,"creation_date":1591621316,"post_id":62262367,"comment_id":110116615,"body_markdown":"@deHaar Okay, thanks for your explanation. I&#39;ll write it down and try to migrate to java.time.","body":"@deHaar Okay, thanks for your explanation. I&#39;ll write it down and try to migrate to java.time."},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":1,"creation_date":1591621392,"post_id":62262367,"comment_id":110116663,"body_markdown":"Good... use one or both of the classes `Period` and `Duration` if you want to calculate elapsed temporal amounts.","body":"Good... use one or both of the classes <code>Period</code> and <code>Duration</code> if you want to calculate elapsed temporal amounts."},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1591621549,"post_id":62262367,"comment_id":110116742,"body_markdown":"By the way... What is *since 2007* supposed to mean exactly? Since 2007-01-01 or since 2007-12-31? Is this all about the date part or do you want a difference in hours, minutes, seconds a.s.o., too?","body":"By the way... What is <i>since 2007</i> supposed to mean exactly? Since 2007-01-01 or since 2007-12-31? Is this all about the date part or do you want a difference in hours, minutes, seconds a.s.o., too?"},{"owner":{"account_id":8172676,"reputation":439,"user_id":6152567,"accept_rate":59,"display_name":"M Ansyori"},"score":0,"creation_date":1591621626,"post_id":62262367,"comment_id":110116780,"body_markdown":"@blackapps well I apologize if I wrote something ain&#39;t right. what I am asking for is that how do I get a result like for example, **1 Year and 5 Months since 2007** between *startDate* and *endDate* in BaseFragment. I was able to subtract the current date with days in integer passed to the function.","body":"@blackapps well I apologize if I wrote something ain&#39;t right. what I am asking for is that how do I get a result like for example, <b>1 Year and 5 Months since 2007</b> between <i>startDate</i> and <i>endDate</i> in BaseFragment. I was able to subtract the current date with days in integer passed to the function."},{"owner":{"account_id":8172676,"reputation":439,"user_id":6152567,"accept_rate":59,"display_name":"M Ansyori"},"score":0,"creation_date":1591621767,"post_id":62262367,"comment_id":110116857,"body_markdown":"@deHaar *since 2007* supposed to be extracted from endDate *2007* is just an example from the endDate.","body":"@deHaar <i>since 2007</i> supposed to be extracted from endDate <i>2007</i> is just an example from the endDate."},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":1,"creation_date":1591621943,"post_id":62262367,"comment_id":110116962,"body_markdown":"Well, 2007 is an incomplete because it has no day of year and no month of year, which seem to be mandatory for a calculation having a desired result like *13 years and 5 months*... But ok, I get you are receiving some kind of datetime object.","body":"Well, 2007 is an incomplete because it has no day of year and no month of year, which seem to be mandatory for a calculation having a desired result like <i>13 years and 5 months</i>... But ok, I get you are receiving some kind of datetime object."},{"owner":{"account_id":8172676,"reputation":439,"user_id":6152567,"accept_rate":59,"display_name":"M Ansyori"},"score":0,"creation_date":1591622127,"post_id":62262367,"comment_id":110117078,"body_markdown":"@deHaar I think from the generated Log above, the endDate result is Sun Jan 22 19:45:08 GMT+07:00 2017. It has a complete all-time requirement for a Date variable.","body":"@deHaar I think from the generated Log above, the endDate result is Sun Jan 22 19:45:08 GMT+07:00 2017. It has a complete all-time requirement for a Date variable."}],"answers":[{"comments":[{"owner":{"account_id":8172676,"reputation":439,"user_id":6152567,"accept_rate":59,"display_name":"M Ansyori"},"score":0,"creation_date":1591623601,"post_id":62263364,"comment_id":110117951,"body_markdown":"I am unable to try your solution, these OffsetDateTime.parse(), withOffsetSameLocal() and Period.between() requires API level 26 but the current min api is 19.","body":"I am unable to try your solution, these OffsetDateTime.parse(), withOffsetSameLocal() and Period.between() requires API level 26 but the current min api is 19."},{"owner":{"account_id":2179728,"reputation":73077,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"score":3,"creation_date":1591623960,"post_id":62263364,"comment_id":110118177,"body_markdown":"@MAnsyori - Please check [ThreeTenABP](https://github.com/JakeWharton/ThreeTenABP)","body":"@MAnsyori - Please check <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"nofollow noreferrer\">ThreeTenABP</a>"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1591665040,"post_id":62263364,"comment_id":110135717,"body_markdown":"@MAnsyori See: [*How to use ThreeTenABP in Android Project*](https://stackoverflow.com/q/38922754/642706). And see [my graphic table](https://i.stack.imgur.com/7BcmB.png).","body":"@MAnsyori See: <a href=\"https://stackoverflow.com/q/38922754/642706\"><i>How to use ThreeTenABP in Android Project</i></a>. And see <a href=\"https://i.stack.imgur.com/7BcmB.png\" rel=\"nofollow noreferrer\">my graphic table</a>."},{"owner":{"account_id":8172676,"reputation":439,"user_id":6152567,"accept_rate":59,"display_name":"M Ansyori"},"score":0,"creation_date":1591667088,"post_id":62263364,"comment_id":110136152,"body_markdown":"@ArvindKumarAvinash interesting, everything&#39;s work. so firstly, I tried your code and added if the build version is or greater than 26 conditions, everything goes well. After that, I tried to run in API 22, it crashes. I use ThreeTenABP as you suggested, no need to change the code, just the imports, then it works well in API 22. I&#39;m not sure about API 19 since too much error happens when testing the app I&#39;m working on in API 19. I thank you so much for your answer.","body":"@ArvindKumarAvinash interesting, everything&#39;s work. so firstly, I tried your code and added if the build version is or greater than 26 conditions, everything goes well. After that, I tried to run in API 22, it crashes. I use ThreeTenABP as you suggested, no need to change the code, just the imports, then it works well in API 22. I&#39;m not sure about API 19 since too much error happens when testing the app I&#39;m working on in API 19. I thank you so much for your answer."},{"owner":{"account_id":8172676,"reputation":439,"user_id":6152567,"accept_rate":59,"display_name":"M Ansyori"},"score":0,"creation_date":1591667116,"post_id":62263364,"comment_id":110136157,"body_markdown":"@BasilBourque thanks for the extra how-to pal. appreciate it.","body":"@BasilBourque thanks for the extra how-to pal. appreciate it."},{"owner":{"account_id":2179728,"reputation":73077,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"score":0,"creation_date":1591692457,"post_id":62263364,"comment_id":110144367,"body_markdown":"@MAnsyori - You are most welcome. It is Basil Bourque whose posts inspired me to learn the modern date/time API. Later on, Ole V.V. too supported me a lot in this process. I do not have enough words to thank both of them.","body":"@MAnsyori - You are most welcome. It is Basil Bourque whose posts inspired me to learn the modern date/time API. Later on, Ole V.V. too supported me a lot in this process. I do not have enough words to thank both of them."}],"tags":[],"owner":{"account_id":2179728,"reputation":73077,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"comment_count":6,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1591625235,"creation_date":1591623374,"answer_id":62263364,"question_id":62262367,"body_markdown":"[java.time][1]\r\n-\r\n\r\nYou can do it as follows:\r\n\r\n    import java.time.OffsetDateTime;\r\n    import java.time.Period;\r\n    import java.time.ZoneOffset;\r\n    import java.time.format.DateTimeFormatter;\r\n    \r\n    public class Main {\r\n    \tpublic static void main(String[] args) {\r\n    \t\t// Define format\r\n    \t\tDateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;EEE MMM dd HH:mm:ss O yyyy&quot;);\r\n    \r\n    \t\t// Date/time strings\r\n    \t\tString strEndDate = &quot;Mon Jun 08 19:45:08 GMT+07:00 2020&quot;;\r\n    \t\tString strStartDate = &quot;Sun Jan 22 19:45:08 GMT+07:00 2017&quot;;\r\n    \r\n    \t\t// Define ZoneOffset\r\n    \t\tZoneOffset zoneOffset = ZoneOffset.ofHours(6);\r\n    \r\n    \t\t// Parse date/time strings into OffsetDateTime\r\n    \t\tOffsetDateTime startDate = OffsetDateTime.parse(strStartDate, formatter).withOffsetSameLocal(zoneOffset);\r\n    \t\tOffsetDateTime endDate = OffsetDateTime.parse(strEndDate, formatter).withOffsetSameLocal(zoneOffset);\r\n    \r\n    \t\t// Calculate period between `startDate` and `endDate`\r\n    \t\tPeriod period = Period.between(startDate.toLocalDate(), endDate.toLocalDate());\r\n    \r\n    \t\t// Display result\r\n    \t\tSystem.out.println(\r\n    \t\t\t\tperiod.getYears() + &quot; years and &quot; + period.getMonths() + &quot; months since &quot; + startDate.getYear());\r\n    \t}\r\n    }\r\n\r\n**Output:**\r\n\r\n    3 years and 4 months since 2017\r\n**Note:** Instead of using the outdated `java.util.Date` and `SimpleDateFormat`, use the modern date/time API. Check [this](https://www.oracle.com/technical-resources/articles/java/jf14-date-time.html) to learn more about it.\r\n\r\n***\r\n**Note:** The following content has been copied from https://stackoverflow.com/questions/62235600/how-to-get-start-time-and-end-time-of-a-day-in-another-timezone-in-android/62236157#62236157\r\n\r\n## Question: Doesn’t java.time require Android API level 26?\r\n\r\njava.time works nicely on both older and newer Android devices. It just requires at least **Java 6**.\r\n\r\n - In Java 8 and later and on newer Android devices (from API level 26) the modern API comes built-in.\r\n - In non-Android Java 6 and 7 get the ThreeTen Backport, the backport of the modern classes (ThreeTen for JSR 310; see the links at the bottom).\r\n - On (older) Android use the Android edition of ThreeTen Backport. It’s called ThreeTenABP. And make sure you import the date and time classes from `org.threeten.bp` with subpackages.\r\n\r\n&gt; But don&#39;t we have any other option apart from switching to ThreeTenBP\r\n&gt; Library?\r\n\r\nIf you insisted, I suppose that a way through using `Calendar`, `Date` and `SimpleDateFormat` could be found. Those classes are poorly designed and long outdated, so with what I know and don’t know I would prefer ThreeTenABP.\r\n\r\n## Links\r\n\r\n - [Oracle tutorial: Date Time](https://docs.oracle.com/javase/tutorial/datetime/) explaining how to use java.time.\r\n - [Java Specification Request (JSR) 310](https://jcp.org/en/jsr/detail?id=310), where `java.time` was first described.\r\n - [ThreeTen Backport project](http://www.threeten.org/threetenbp/), the backport of `java.time` to Java 6 and 7 (ThreeTen for JSR-310).\r\n - [ThreeTenABP](https://github.com/JakeWharton/ThreeTenABP), Android edition of ThreeTen Backport\r\n - [Question: How to use ThreeTenABP in Android Project](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project), with a very thorough explanation.\r\n - [Wikipedia article: ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)\r\n\r\n***\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/package-summary.html","title":"Calculate Years and Months between Two Dates in Android","body":"<h2><a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/package-summary.html\" rel=\"nofollow noreferrer\">java.time</a></h2>\n\n<p>You can do it as follows:</p>\n\n<pre><code>import java.time.OffsetDateTime;\nimport java.time.Period;\nimport java.time.ZoneOffset;\nimport java.time.format.DateTimeFormatter;\n\npublic class Main {\n    public static void main(String[] args) {\n        // Define format\n        DateTimeFormatter formatter = DateTimeFormatter.ofPattern(\"EEE MMM dd HH:mm:ss O yyyy\");\n\n        // Date/time strings\n        String strEndDate = \"Mon Jun 08 19:45:08 GMT+07:00 2020\";\n        String strStartDate = \"Sun Jan 22 19:45:08 GMT+07:00 2017\";\n\n        // Define ZoneOffset\n        ZoneOffset zoneOffset = ZoneOffset.ofHours(6);\n\n        // Parse date/time strings into OffsetDateTime\n        OffsetDateTime startDate = OffsetDateTime.parse(strStartDate, formatter).withOffsetSameLocal(zoneOffset);\n        OffsetDateTime endDate = OffsetDateTime.parse(strEndDate, formatter).withOffsetSameLocal(zoneOffset);\n\n        // Calculate period between `startDate` and `endDate`\n        Period period = Period.between(startDate.toLocalDate(), endDate.toLocalDate());\n\n        // Display result\n        System.out.println(\n                period.getYears() + \" years and \" + period.getMonths() + \" months since \" + startDate.getYear());\n    }\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>3 years and 4 months since 2017\n</code></pre>\n\n<p><strong>Note:</strong> Instead of using the outdated <code>java.util.Date</code> and <code>SimpleDateFormat</code>, use the modern date/time API. Check <a href=\"https://www.oracle.com/technical-resources/articles/java/jf14-date-time.html\" rel=\"nofollow noreferrer\">this</a> to learn more about it.</p>\n\n<hr>\n\n<p><strong>Note:</strong> The following content has been copied from <a href=\"https://stackoverflow.com/questions/62235600/how-to-get-start-time-and-end-time-of-a-day-in-another-timezone-in-android/62236157#62236157\">How to get start time and end time of a day in another timezone in Android</a></p>\n\n<h2>Question: Doesn’t java.time require Android API level 26?</h2>\n\n<p>java.time works nicely on both older and newer Android devices. It just requires at least <strong>Java 6</strong>.</p>\n\n<ul>\n<li>In Java 8 and later and on newer Android devices (from API level 26) the modern API comes built-in.</li>\n<li>In non-Android Java 6 and 7 get the ThreeTen Backport, the backport of the modern classes (ThreeTen for JSR 310; see the links at the bottom).</li>\n<li>On (older) Android use the Android edition of ThreeTen Backport. It’s called ThreeTenABP. And make sure you import the date and time classes from <code>org.threeten.bp</code> with subpackages.</li>\n</ul>\n\n<blockquote>\n  <p>But don't we have any other option apart from switching to ThreeTenBP\n  Library?</p>\n</blockquote>\n\n<p>If you insisted, I suppose that a way through using <code>Calendar</code>, <code>Date</code> and <code>SimpleDateFormat</code> could be found. Those classes are poorly designed and long outdated, so with what I know and don’t know I would prefer ThreeTenABP.</p>\n\n<h2>Links</h2>\n\n<ul>\n<li><a href=\"https://docs.oracle.com/javase/tutorial/datetime/\" rel=\"nofollow noreferrer\">Oracle tutorial: Date Time</a> explaining how to use java.time.</li>\n<li><a href=\"https://jcp.org/en/jsr/detail?id=310\" rel=\"nofollow noreferrer\">Java Specification Request (JSR) 310</a>, where <code>java.time</code> was first described.</li>\n<li><a href=\"http://www.threeten.org/threetenbp/\" rel=\"nofollow noreferrer\">ThreeTen Backport project</a>, the backport of <code>java.time</code> to Java 6 and 7 (ThreeTen for JSR-310).</li>\n<li><a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"nofollow noreferrer\">ThreeTenABP</a>, Android edition of ThreeTen Backport</li>\n<li><a href=\"https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project\">Question: How to use ThreeTenABP in Android Project</a>, with a very thorough explanation.</li>\n<li><a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">Wikipedia article: ISO 8601</a></li>\n</ul>\n\n<hr>\n"},{"tags":[],"owner":{"account_id":18269519,"reputation":1064,"user_id":13300553,"display_name":"Prathamesh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1591624134,"creation_date":1591624134,"answer_id":62263606,"question_id":62262367,"body_markdown":"If you can extract the month,day and year from both dates you can use following solution to calculate the exact difference between two dates.\r\n\r\n                \r\n                int sday=22 //int day of month here\r\n                int smonth=1 //int month here\r\n                int syear=2017 //int year here\r\n\r\n                int eday=5 //int day of month here\r\n                int emonth=6 //int month here\r\n                int eyear=2020 //int year here\r\n\r\n                    resyear = eyear - syear;\r\n                    if (emonth &gt;= smonth) {\r\n                        resmonth = emonth - smonth;\r\n                    } else {\r\n                        resmonth = emonth - smonth;\r\n                        resmonth = 12 + resmonth;\r\n                        resyear--;\r\n                    }\r\n                    if (eday &gt;= sday) {\r\n                        resday = eday - sday;\r\n                    } else {\r\n                        resday = eday - sday;\r\n                        resday = 31 + resday;\r\n                        if (resmonth == 0) {\r\n                            resmonth = 11;\r\n                            resyear--;\r\n                        } else {\r\n                            resmonth--;\r\n                        }\r\n                    }\r\n                    if (resday &lt;0 || resmonth&lt;0 || resyear&lt;0) {\r\n                        Toast.makeText(getApplicationContext(), &quot;starting date must greater than ending date&quot;, Toast.LENGTH_LONG).show();\r\n                        \r\n                    }\r\n                    else {\r\n\r\n    Toast.makeText(getApplicationContext(), &quot;difference: &quot; + resyear + &quot; years /&quot; + resmonth + &quot; months/&quot; + resday + &quot; days&quot;, Toast.LENGTH_LONG).show();\r\n                        \r\n                    }\r\n                }\r\n            \r\n","title":"Calculate Years and Months between Two Dates in Android","body":"<p>If you can extract the month,day and year from both dates you can use following solution to calculate the exact difference between two dates.</p>\n\n<pre><code>            int sday=22 //int day of month here\n            int smonth=1 //int month here\n            int syear=2017 //int year here\n\n            int eday=5 //int day of month here\n            int emonth=6 //int month here\n            int eyear=2020 //int year here\n\n                resyear = eyear - syear;\n                if (emonth &gt;= smonth) {\n                    resmonth = emonth - smonth;\n                } else {\n                    resmonth = emonth - smonth;\n                    resmonth = 12 + resmonth;\n                    resyear--;\n                }\n                if (eday &gt;= sday) {\n                    resday = eday - sday;\n                } else {\n                    resday = eday - sday;\n                    resday = 31 + resday;\n                    if (resmonth == 0) {\n                        resmonth = 11;\n                        resyear--;\n                    } else {\n                        resmonth--;\n                    }\n                }\n                if (resday &lt;0 || resmonth&lt;0 || resyear&lt;0) {\n                    Toast.makeText(getApplicationContext(), \"starting date must greater than ending date\", Toast.LENGTH_LONG).show();\n\n                }\n                else {\n\nToast.makeText(getApplicationContext(), \"difference: \" + resyear + \" years /\" + resmonth + \" months/\" + resday + \" days\", Toast.LENGTH_LONG).show();\n\n                }\n            }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1691128624,"post_id":76831498,"comment_id":135452476,"body_markdown":"I strongly recommend that no one uses the old `Date`, `Calendar` and `GregorianCalendar` classes anymore. They were poorly designed and cumbersome to work with. Your alswer seriously lacks some explanation. First of all, are the `Period`and `PeriodFormatterBuilder` from Joda-Time?  If so, please state so. As long as we don’t know, we can’t really use your answer.","body":"I strongly recommend that no one uses the old <code>Date</code>, <code>Calendar</code> and <code>GregorianCalendar</code> classes anymore. They were poorly designed and cumbersome to work with. Your alswer seriously lacks some explanation. First of all, are the <code>Period</code>and <code>PeriodFormatterBuilder</code> from Joda-Time?  If so, please state so. As long as we don’t know, we can’t really use your answer."}],"tags":[],"owner":{"account_id":13827153,"reputation":1966,"user_id":9981129,"display_name":"Abhay Pratap"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691095386,"creation_date":1691095386,"answer_id":76831498,"question_id":62262367,"body_markdown":"    // in kotlin \r\n    fun getDateAndYearsDifference(startDate: Date?, endDate: Date? = null): String {\r\n        val startCalendar: Calendar = GregorianCalendar()\r\n        startCalendar.time = startDate\r\n        val endCalendar: Calendar = GregorianCalendar()\r\n        endCalendar.time = endDate ?: Calendar.getInstance().time\r\n        val period = Period(startCalendar.time.time, endCalendar.time.time, PeriodType.standard())\r\n        val yearsAndMonths = PeriodFormatterBuilder()\r\n            .printZeroNever()\r\n            .appendYears()\r\n            .appendSuffix(&quot; yrs&quot;, &quot; yrs&quot;)\r\n            .appendSeparator(Constants.COMMA)\r\n            .printZeroRarelyLast()\r\n            .appendMonths()\r\n            .appendSuffix(&quot; mos&quot;, &quot; mos&quot;)\r\n            .toFormatter()\r\n        return period.toString(yearsAndMonths)\r\n    }\r\n\r\n","title":"Calculate Years and Months between Two Dates in Android","body":"<pre><code>// in kotlin \nfun getDateAndYearsDifference(startDate: Date?, endDate: Date? = null): String {\n    val startCalendar: Calendar = GregorianCalendar()\n    startCalendar.time = startDate\n    val endCalendar: Calendar = GregorianCalendar()\n    endCalendar.time = endDate ?: Calendar.getInstance().time\n    val period = Period(startCalendar.time.time, endCalendar.time.time, PeriodType.standard())\n    val yearsAndMonths = PeriodFormatterBuilder()\n        .printZeroNever()\n        .appendYears()\n        .appendSuffix(&quot; yrs&quot;, &quot; yrs&quot;)\n        .appendSeparator(Constants.COMMA)\n        .printZeroRarelyLast()\n        .appendMonths()\n        .appendSuffix(&quot; mos&quot;, &quot; mos&quot;)\n        .toFormatter()\n    return period.toString(yearsAndMonths)\n}\n</code></pre>\n"}],"owner":{"account_id":8172676,"reputation":439,"user_id":6152567,"accept_rate":59,"display_name":"M Ansyori"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2662,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":62263364,"answer_count":3,"score":1,"last_activity_date":1691095386,"creation_date":1591620162,"question_id":62262367,"body_markdown":"I am trying to display a custom text result between two dates. Here is the code in my Fragment, which return two dates:\r\n\r\n    public class HomeFragment extends BaseFragment {\r\n\r\n      ...\r\n      \r\n      dashboardViewModel.productCategory.observe(this, data - &gt; {\r\n        if (data != null &amp;&amp; data.getData() != null) {\r\n          int totalLos = Integer.parseInt(data.getData().getLos());\r\n          Log.e(&quot;totalLOS&quot;, String.valueOf(totalLos));\r\n          explainDays(totalLos);\r\n          mBinding.los.setText(&quot;&quot;);\r\n        }\r\n      });\r\n      \r\n    }\r\n\r\n\r\nAnd here the code in BaseFragment which generate two dates:\r\n\r\n    public abstract class BaseFragment extends Fragment {\r\n\r\n      ...\r\n      public void explainDays(int totalDays) {\r\n\r\n        Calendar calendar = Calendar.getInstance();\r\n        Date start = calendar.getTime();\r\n\r\n        calendar.add(Calendar.DATE, -totalDays);\r\n        Date end = calendar.getTime();\r\n\r\n        Log.e(&quot;startDate&quot;, String.valueOf(start));\r\n        Log.e(&quot;endDate&quot;, String.valueOf(end));\r\n\r\n      }\r\n\r\n    }\r\n\r\n\r\nFrom the code above, I am getting these three logs:\r\n\r\n\r\n    E/totalLOS: 1233\r\n    E/startDate: Mon Jun 08 19:45:08 GMT+07:00 2020\r\n    E/endDate: Sun Jan 22 19:45:08 GMT+07:00 2017\r\n\r\n\r\nHow do I generate a response like for example **1 Year and 5 Months since 2007** between these two date results? the **since 2007** needs to be extracted from **endDate** from Log above.\r\n\r\nAny help will be much appreciated.\r\n\r\nThank you.","title":"Calculate Years and Months between Two Dates in Android","body":"<p>I am trying to display a custom text result between two dates. Here is the code in my Fragment, which return two dates:</p>\n\n<pre><code>public class HomeFragment extends BaseFragment {\n\n  ...\n\n  dashboardViewModel.productCategory.observe(this, data - &gt; {\n    if (data != null &amp;&amp; data.getData() != null) {\n      int totalLos = Integer.parseInt(data.getData().getLos());\n      Log.e(\"totalLOS\", String.valueOf(totalLos));\n      explainDays(totalLos);\n      mBinding.los.setText(\"\");\n    }\n  });\n\n}\n</code></pre>\n\n<p>And here the code in BaseFragment which generate two dates:</p>\n\n<pre><code>public abstract class BaseFragment extends Fragment {\n\n  ...\n  public void explainDays(int totalDays) {\n\n    Calendar calendar = Calendar.getInstance();\n    Date start = calendar.getTime();\n\n    calendar.add(Calendar.DATE, -totalDays);\n    Date end = calendar.getTime();\n\n    Log.e(\"startDate\", String.valueOf(start));\n    Log.e(\"endDate\", String.valueOf(end));\n\n  }\n\n}\n</code></pre>\n\n<p>From the code above, I am getting these three logs:</p>\n\n<pre><code>E/totalLOS: 1233\nE/startDate: Mon Jun 08 19:45:08 GMT+07:00 2020\nE/endDate: Sun Jan 22 19:45:08 GMT+07:00 2017\n</code></pre>\n\n<p>How do I generate a response like for example <strong>1 Year and 5 Months since 2007</strong> between these two date results? the <strong>since 2007</strong> needs to be extracted from <strong>endDate</strong> from Log above.</p>\n\n<p>Any help will be much appreciated.</p>\n\n<p>Thank you.</p>\n"},{"tags":["java","spring","spring-boot","spring-webflux"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1687873491,"post_id":76565392,"comment_id":134995576,"body_markdown":"Multipart isn&#39;t supported yet, it will be as of Sprng 6.1, so probably Spring Boot 3.2.","body":"Multipart isn&#39;t supported yet, it will be as of Sprng 6.1, so probably Spring Boot 3.2."},{"owner":{"account_id":28833084,"reputation":5,"user_id":22083086,"display_name":"Max Bachhuber"},"score":0,"creation_date":1687873728,"post_id":76565392,"comment_id":134995651,"body_markdown":"@M.Deinum Oh, then it makes sense... Do you have a source for that statement?","body":"@M.Deinum Oh, then it makes sense... Do you have a source for that statement?"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1687874255,"post_id":76565392,"comment_id":134995809,"body_markdown":"[This commit](https://github.com/spring-projects/spring-framework/commit/e69a1d22f97f2907260cd9b992eb113700abf193) which was made 5 hours ago. It adds `Multipart` support to the http client.","body":"<a href=\"https://github.com/spring-projects/spring-framework/commit/e69a1d22f97f2907260cd9b992eb113700abf193\" rel=\"nofollow noreferrer\">This commit</a> which was made 5 hours ago. It adds <code>Multipart</code> support to the http client."},{"owner":{"account_id":28833084,"reputation":5,"user_id":22083086,"display_name":"Max Bachhuber"},"score":0,"creation_date":1687876385,"post_id":76565392,"comment_id":134996380,"body_markdown":"What a timing :D","body":"What a timing :D"}],"answers":[{"tags":[],"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1687874395,"creation_date":1687874395,"answer_id":76565645,"question_id":76565392,"body_markdown":"Multipart support isn&#39;t possible yet, or at least `MultipartFile` support hasn&#39;t been added. See [this enhancement request][1] which will add. \r\n\r\nSupport has been added with [this commit][2], so it appears as it will be part of Spring Framework 6.1 and therefor probably Spring Boot 3.2. \r\n\r\n[1]: https://github.com/spring-projects/spring-framework/pull/30728\r\n[2]: https://github.com/spring-projects/spring-framework/commit/e69a1d22f97f2907260cd9b992eb113700abf193","title":"Why does the HttpExchange (declarative HttpClient) in Spring 6 use Jackson when trying to send multipart form-data?","body":"<p>Multipart support isn't possible yet, or at least <code>MultipartFile</code> support hasn't been added. See <a href=\"https://github.com/spring-projects/spring-framework/pull/30728\" rel=\"nofollow noreferrer\">this enhancement request</a> which will add.</p>\n<p>Support has been added with <a href=\"https://github.com/spring-projects/spring-framework/commit/e69a1d22f97f2907260cd9b992eb113700abf193\" rel=\"nofollow noreferrer\">this commit</a>, so it appears as it will be part of Spring Framework 6.1 and therefor probably Spring Boot 3.2.</p>\n"},{"tags":[],"owner":{"account_id":10443647,"reputation":97,"user_id":7699443,"display_name":"Louis"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691095248,"creation_date":1691095248,"answer_id":76831487,"question_id":76565392,"body_markdown":"@M.Deinum is right. Multipart support isn&#39;t possible in Spring Boot versions below 3.2\r\n\r\nI resolved this by following [the commit][1] that is supposed to solve this in Spring Boot 3.2, then I replicated it in my project which is using **Spring Boot 3.0.1**\r\n\r\nSo what they did was to introduce a \r\n\r\n&gt; MultipartFileArgumentResolver\r\n\r\nBelow is my HttpClient configuration and how I adapted it to the solution in Spring Boot 3.2\r\n\r\n*PS: I am using Spring Security hence the OAuth2AuthorizedClientManager on my Webclient*\r\n\r\n\r\nBefore:\r\n  \r\n    @Configuration\r\n    @RequiredArgsConstructor\r\n    public class OAuth2ClientConfig { \r\n\r\n        private final OAuth2AuthorizedClientService clientService;\r\n        private final ApplicationConfigurations applicationConfigurations;\r\n        private final ClientRegistrationRepository clientRegistrationRepository;\r\n\r\n        @Bean\r\n        public OAuth2AuthorizedClientManager authorizedClientManager() {\r\n        OAuth2AuthorizedClientProvider authorizedClientProvider =\r\n                OAuth2AuthorizedClientProviderBuilder\r\n                        .builder()\r\n                        .refreshToken()\r\n                        .clientCredentials()\r\n                        .build();\r\n\r\n        AuthorizedClientServiceOAuth2AuthorizedClientManager authorizedClientManager =\r\n                new AuthorizedClientServiceOAuth2AuthorizedClientManager(clientRegistrationRepository, clientService);\r\n\r\n        authorizedClientManager.setAuthorizedClientProvider(authorizedClientProvider);\r\n        return authorizedClientManager;\r\n        }\r\n\r\n        @Bean\r\n        WebClient webClient(OAuth2AuthorizedClientManager authorizedClientManager) {\r\n            ServletOAuth2AuthorizedClientExchangeFilterFunction oauth2Client =\r\n                new ServletOAuth2AuthorizedClientExchangeFilterFunction(authorizedClientManager);\r\n        oauth2Client.setDefaultClientRegistrationId(&quot;keycloak&quot;);\r\n        return WebClient.builder()\r\n                .baseUrl(applicationConfigurations.getServiceDiscovery().getGatewayService())\r\n                .clientConnector(new ReactorClientHttpConnector())\r\n                .apply(oauth2Client.oauth2Configuration())\r\n                .build();\r\n        }\r\n\r\n        @Bean\r\n        GatewayServiceConnectorClient gatewayServiceConnectorClient() {\r\n            HttpServiceProxyFactory httpServiceProxyFactory = HttpServiceProxyFactory\r\n                .builder(WebClientAdapter.forClient(webClient(authorizedClientManager())))\r\n                .build();\r\n        return httpServiceProxyFactory.createClient(GatewayServiceConnectorClient.class);\r\n        }\r\n\r\n    }\r\n\r\n\r\nAfter:\r\n\r\nSimply add the *MultipartFileArgumentResolver* class to your project and import the necessary packages.\r\n\r\n    public class MultipartFileArgumentResolver extends AbstractNamedValueArgumentResolver {\r\n    \r\n        private static final String MULTIPART_FILE_LABEL = &quot;multipart file&quot;;\r\n    \r\n        @Override\r\n        protected NamedValueInfo createNamedValueInfo(MethodParameter parameter) {\r\n            if (!parameter.nestedIfOptional().getNestedParameterType().equals(MultipartFile.class)) {\r\n                return null;\r\n            }\r\n            return new NamedValueInfo(&quot;&quot;, true, null, MULTIPART_FILE_LABEL, true);\r\n    \r\n        }\r\n    \r\n        @Override\r\n        protected void addRequestValue(@NotNull String name, @NotNull Object value, @NotNull MethodParameter parameter,\r\n                                       HttpRequestValues.Builder requestValues) {\r\n            Assert.state(value instanceof MultipartFile,\r\n                         &quot;The value has to be of type &#39;MultipartFile&#39;&quot;);\r\n    \r\n            MultipartFile file = (MultipartFile) value;\r\n            requestValues.addRequestPart(name, toHttpEntity(name, file));\r\n        }\r\n    \r\n        private HttpEntity&lt;Resource&gt; toHttpEntity(String name, MultipartFile file) {\r\n            HttpHeaders headers = new HttpHeaders();\r\n            if (file.getOriginalFilename() != null) {\r\n                headers.setContentDispositionFormData(name, file.getOriginalFilename());\r\n            }\r\n            if (file.getContentType() != null) {\r\n                headers.add(HttpHeaders.CONTENT_TYPE, file.getContentType());\r\n            }\r\n            return new HttpEntity&lt;&gt;(file.getResource(), headers);\r\n        }\r\n    }\r\n\r\nthen add it to your HttpClient interface proxy using the already available *customArgumentResolver()* method.\r\n\r\n    @Bean\r\n    GatewayServiceConnectorClient gatewayServiceConnectorClient() {\r\n         HttpServiceProxyFactory httpServiceProxyFactory = HttpServiceProxyFactory\r\n                    .builder(WebClientAdapter.forClient(webClient(authorizedClientManager())))\r\n                    .customArgumentResolver(new MultipartFileArgumentResolver())\r\n                    .build();\r\n         return httpServiceProxyFactory.createClient(GatewayServiceConnectorClient.class);\r\n     }\r\n\r\nthen finally in your HttpClient definition.\r\n\r\n    @HttpExchange\r\n    public interface GatewayServiceConnectorClient {\r\n         @PostExchange(value = &quot;/upload&quot;, contentType = MediaType.MULTIPART_FORM_DATA_VALUE)\r\n        ResponseEntity&lt;String&gt; uploadFacilities(@RequestPart(value = &quot;file&quot;) MultipartFile file);\r\n    }\r\n\r\nAnd Voila!\r\n\r\n  [1]: https://github.com/spring-projects/spring-framework/commit/e69a1d22f97f2907260cd9b992eb113700abf193","title":"Why does the HttpExchange (declarative HttpClient) in Spring 6 use Jackson when trying to send multipart form-data?","body":"<p>@M.Deinum is right. Multipart support isn't possible in Spring Boot versions below 3.2</p>\n<p>I resolved this by following <a href=\"https://github.com/spring-projects/spring-framework/commit/e69a1d22f97f2907260cd9b992eb113700abf193\" rel=\"nofollow noreferrer\">the commit</a> that is supposed to solve this in Spring Boot 3.2, then I replicated it in my project which is using <strong>Spring Boot 3.0.1</strong></p>\n<p>So what they did was to introduce a</p>\n<blockquote>\n<p>MultipartFileArgumentResolver</p>\n</blockquote>\n<p>Below is my HttpClient configuration and how I adapted it to the solution in Spring Boot 3.2</p>\n<p><em>PS: I am using Spring Security hence the OAuth2AuthorizedClientManager on my Webclient</em></p>\n<p>Before:</p>\n<pre><code>@Configuration\n@RequiredArgsConstructor\npublic class OAuth2ClientConfig { \n\n    private final OAuth2AuthorizedClientService clientService;\n    private final ApplicationConfigurations applicationConfigurations;\n    private final ClientRegistrationRepository clientRegistrationRepository;\n\n    @Bean\n    public OAuth2AuthorizedClientManager authorizedClientManager() {\n    OAuth2AuthorizedClientProvider authorizedClientProvider =\n            OAuth2AuthorizedClientProviderBuilder\n                    .builder()\n                    .refreshToken()\n                    .clientCredentials()\n                    .build();\n\n    AuthorizedClientServiceOAuth2AuthorizedClientManager authorizedClientManager =\n            new AuthorizedClientServiceOAuth2AuthorizedClientManager(clientRegistrationRepository, clientService);\n\n    authorizedClientManager.setAuthorizedClientProvider(authorizedClientProvider);\n    return authorizedClientManager;\n    }\n\n    @Bean\n    WebClient webClient(OAuth2AuthorizedClientManager authorizedClientManager) {\n        ServletOAuth2AuthorizedClientExchangeFilterFunction oauth2Client =\n            new ServletOAuth2AuthorizedClientExchangeFilterFunction(authorizedClientManager);\n    oauth2Client.setDefaultClientRegistrationId(&quot;keycloak&quot;);\n    return WebClient.builder()\n            .baseUrl(applicationConfigurations.getServiceDiscovery().getGatewayService())\n            .clientConnector(new ReactorClientHttpConnector())\n            .apply(oauth2Client.oauth2Configuration())\n            .build();\n    }\n\n    @Bean\n    GatewayServiceConnectorClient gatewayServiceConnectorClient() {\n        HttpServiceProxyFactory httpServiceProxyFactory = HttpServiceProxyFactory\n            .builder(WebClientAdapter.forClient(webClient(authorizedClientManager())))\n            .build();\n    return httpServiceProxyFactory.createClient(GatewayServiceConnectorClient.class);\n    }\n\n}\n</code></pre>\n<p>After:</p>\n<p>Simply add the <em>MultipartFileArgumentResolver</em> class to your project and import the necessary packages.</p>\n<pre><code>public class MultipartFileArgumentResolver extends AbstractNamedValueArgumentResolver {\n\n    private static final String MULTIPART_FILE_LABEL = &quot;multipart file&quot;;\n\n    @Override\n    protected NamedValueInfo createNamedValueInfo(MethodParameter parameter) {\n        if (!parameter.nestedIfOptional().getNestedParameterType().equals(MultipartFile.class)) {\n            return null;\n        }\n        return new NamedValueInfo(&quot;&quot;, true, null, MULTIPART_FILE_LABEL, true);\n\n    }\n\n    @Override\n    protected void addRequestValue(@NotNull String name, @NotNull Object value, @NotNull MethodParameter parameter,\n                                   HttpRequestValues.Builder requestValues) {\n        Assert.state(value instanceof MultipartFile,\n                     &quot;The value has to be of type 'MultipartFile'&quot;);\n\n        MultipartFile file = (MultipartFile) value;\n        requestValues.addRequestPart(name, toHttpEntity(name, file));\n    }\n\n    private HttpEntity&lt;Resource&gt; toHttpEntity(String name, MultipartFile file) {\n        HttpHeaders headers = new HttpHeaders();\n        if (file.getOriginalFilename() != null) {\n            headers.setContentDispositionFormData(name, file.getOriginalFilename());\n        }\n        if (file.getContentType() != null) {\n            headers.add(HttpHeaders.CONTENT_TYPE, file.getContentType());\n        }\n        return new HttpEntity&lt;&gt;(file.getResource(), headers);\n    }\n}\n</code></pre>\n<p>then add it to your HttpClient interface proxy using the already available <em>customArgumentResolver()</em> method.</p>\n<pre><code>@Bean\nGatewayServiceConnectorClient gatewayServiceConnectorClient() {\n     HttpServiceProxyFactory httpServiceProxyFactory = HttpServiceProxyFactory\n                .builder(WebClientAdapter.forClient(webClient(authorizedClientManager())))\n                .customArgumentResolver(new MultipartFileArgumentResolver())\n                .build();\n     return httpServiceProxyFactory.createClient(GatewayServiceConnectorClient.class);\n }\n</code></pre>\n<p>then finally in your HttpClient definition.</p>\n<pre><code>@HttpExchange\npublic interface GatewayServiceConnectorClient {\n     @PostExchange(value = &quot;/upload&quot;, contentType = MediaType.MULTIPART_FORM_DATA_VALUE)\n    ResponseEntity&lt;String&gt; uploadFacilities(@RequestPart(value = &quot;file&quot;) MultipartFile file);\n}\n</code></pre>\n<p>And Voila!</p>\n"}],"owner":{"account_id":28833084,"reputation":5,"user_id":22083086,"display_name":"Max Bachhuber"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":520,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76565645,"answer_count":2,"score":0,"last_activity_date":1691095248,"creation_date":1687872587,"question_id":76565392,"body_markdown":"i am trying to implement a REST API client using the new declarative HttpClient in Spring 6.\r\n\r\nI have defined my client like that:\r\n\r\n```java\r\n@HttpExchange(\r\n        url = &quot;/publicapi&quot;,\r\n        contentType = MediaType.MULTIPART_FORM_DATA_VALUE,\r\n        accept = MediaType.TEXT_XML_VALUE\r\n)\r\npublic interface MyClient {\r\n    @PostExchange(url = &quot;/submit/file&quot;,\r\n                  contentType = MediaType.MULTIPART_FORM_DATA_VALUE)\r\n    ResponseEntity&lt;Void&gt; uploadFile(@RequestPart String apiKey,\r\n                                    @RequestPart(value = &quot;file&quot;) MultipartFile file);\r\n}\r\n```\r\n\r\nThen i have declared a Bean for that client:\r\n```java\r\n    @Bean\r\n    MyClient myClient(MyClientProperties properties) {\r\n        WebClient webClient = WebClient.builder()\r\n                .baseUrl(properties.getUrl())\r\n                .defaultStatusHandler(\r\n                        httpStatusCode -&gt; HttpStatus.NOT_FOUND == httpStatusCode,\r\n                        response -&gt; Mono.empty())\r\n                .defaultStatusHandler(\r\n                        HttpStatusCode::is5xxServerError,\r\n                        response -&gt; Mono.error(new RuntimeException(&quot;WildfireClient request failed. Code: &quot; + response.statusCode().value())))\r\n                .build();\r\n\r\n        return HttpServiceProxyFactory\r\n                .builder(WebClientAdapter.forClient(webClient))\r\n                .build()\r\n                .createClient(MyClient.class);\r\n    }\r\n```\r\n\r\nAnd then i am trying to use the client to upload a file from Google Cloud Storage:\r\n```java\r\n...\r\n        try (ReadChannel reader = storage.reader(blobId)) {\r\n            var inputStream = Channels.newInputStream(reader);\r\n\r\n            MultipartFile file = new MultipartFile() {\r\n                @Override\r\n                public String getName() {\r\n                    return webhookRequest.name();\r\n                }\r\n\r\n                @Override\r\n                public String getOriginalFilename() {\r\n                    return webhookRequest.name();\r\n                }\r\n\r\n                @Override\r\n                public String getContentType() {\r\n                    return null;\r\n                }\r\n\r\n                @Override\r\n                public boolean isEmpty() {\r\n                    return false;\r\n                }\r\n\r\n                @Override\r\n                public long getSize() {\r\n                    return webhookRequest.size();\r\n                }\r\n\r\n                @Override\r\n                public byte[] getBytes() throws IOException {\r\n                    return FileCopyUtils.copyToByteArray(inputStream);\r\n                }\r\n\r\n                @Override\r\n                public InputStream getInputStream() throws IOException {\r\n                    return inputStream;\r\n                }\r\n\r\n                @Override\r\n                public void transferTo(File dest) throws IOException, IllegalStateException {\r\n                    FileCopyUtils.copy(inputStream, Files.newOutputStream(dest.toPath()));\r\n                }\r\n            };\r\n\r\n            myClient.submitFile(wildfireApiKey, file);\r\n\r\n```\r\n\r\nBut something strange happens. I get an error that Jackson cannot encode the value:\r\n\r\n```\r\norg.springframework.core.codec.CodecException: Type definition error: [simple type, class sun.nio.ch.ChannelInputStream]\r\n\tat org.springframework.http.codec.json.AbstractJackson2Encoder.encodeValue(AbstractJackson2Encoder.java:256) ~[spring-web-6.0.10.jar:6.0.10]\r\n\tat org.springframework.http.codec.json.AbstractJackson2Encoder.lambda$encode$0(AbstractJackson2Encoder.java:158) ~[spring-web-6.0.10.jar:6.0.10]\r\n...\r\n```\r\n\r\nWhy is Jackson involved here? The body of the request should be multipart form data. So no JSON conversion should be done here...\r\n\r\nI halso have tried to implement it via manual WebClient instantiation and that worked without problems. But i really want to use the new declarative client.","title":"Why does the HttpExchange (declarative HttpClient) in Spring 6 use Jackson when trying to send multipart form-data?","body":"<p>i am trying to implement a REST API client using the new declarative HttpClient in Spring 6.</p>\n<p>I have defined my client like that:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@HttpExchange(\n        url = &quot;/publicapi&quot;,\n        contentType = MediaType.MULTIPART_FORM_DATA_VALUE,\n        accept = MediaType.TEXT_XML_VALUE\n)\npublic interface MyClient {\n    @PostExchange(url = &quot;/submit/file&quot;,\n                  contentType = MediaType.MULTIPART_FORM_DATA_VALUE)\n    ResponseEntity&lt;Void&gt; uploadFile(@RequestPart String apiKey,\n                                    @RequestPart(value = &quot;file&quot;) MultipartFile file);\n}\n</code></pre>\n<p>Then i have declared a Bean for that client:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Bean\n    MyClient myClient(MyClientProperties properties) {\n        WebClient webClient = WebClient.builder()\n                .baseUrl(properties.getUrl())\n                .defaultStatusHandler(\n                        httpStatusCode -&gt; HttpStatus.NOT_FOUND == httpStatusCode,\n                        response -&gt; Mono.empty())\n                .defaultStatusHandler(\n                        HttpStatusCode::is5xxServerError,\n                        response -&gt; Mono.error(new RuntimeException(&quot;WildfireClient request failed. Code: &quot; + response.statusCode().value())))\n                .build();\n\n        return HttpServiceProxyFactory\n                .builder(WebClientAdapter.forClient(webClient))\n                .build()\n                .createClient(MyClient.class);\n    }\n</code></pre>\n<p>And then i am trying to use the client to upload a file from Google Cloud Storage:</p>\n<pre class=\"lang-java prettyprint-override\"><code>...\n        try (ReadChannel reader = storage.reader(blobId)) {\n            var inputStream = Channels.newInputStream(reader);\n\n            MultipartFile file = new MultipartFile() {\n                @Override\n                public String getName() {\n                    return webhookRequest.name();\n                }\n\n                @Override\n                public String getOriginalFilename() {\n                    return webhookRequest.name();\n                }\n\n                @Override\n                public String getContentType() {\n                    return null;\n                }\n\n                @Override\n                public boolean isEmpty() {\n                    return false;\n                }\n\n                @Override\n                public long getSize() {\n                    return webhookRequest.size();\n                }\n\n                @Override\n                public byte[] getBytes() throws IOException {\n                    return FileCopyUtils.copyToByteArray(inputStream);\n                }\n\n                @Override\n                public InputStream getInputStream() throws IOException {\n                    return inputStream;\n                }\n\n                @Override\n                public void transferTo(File dest) throws IOException, IllegalStateException {\n                    FileCopyUtils.copy(inputStream, Files.newOutputStream(dest.toPath()));\n                }\n            };\n\n            myClient.submitFile(wildfireApiKey, file);\n\n</code></pre>\n<p>But something strange happens. I get an error that Jackson cannot encode the value:</p>\n<pre><code>org.springframework.core.codec.CodecException: Type definition error: [simple type, class sun.nio.ch.ChannelInputStream]\n    at org.springframework.http.codec.json.AbstractJackson2Encoder.encodeValue(AbstractJackson2Encoder.java:256) ~[spring-web-6.0.10.jar:6.0.10]\n    at org.springframework.http.codec.json.AbstractJackson2Encoder.lambda$encode$0(AbstractJackson2Encoder.java:158) ~[spring-web-6.0.10.jar:6.0.10]\n...\n</code></pre>\n<p>Why is Jackson involved here? The body of the request should be multipart form data. So no JSON conversion should be done here...</p>\n<p>I halso have tried to implement it via manual WebClient instantiation and that worked without problems. But i really want to use the new declarative client.</p>\n"},{"tags":["java","html","gradle","cucumber","karate"],"answers":[{"tags":[],"owner":{"account_id":48302,"reputation":55363,"user_id":143475,"display_name":"Peter Thomas"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686233814,"creation_date":1686233814,"answer_id":76432799,"question_id":76432040,"body_markdown":"This can depend on if some other logging system has &quot;taken over&quot;. Recently I saw this happen with Quarkus, so there was a need to &quot;bridge&quot; what Quarkus was using to &quot;logback&quot; which is what Karate uses. You may get some tips from this [sample](https://github.com/karatelabs/karate-examples/blob/main/quarkus/README.md).\r\n\r\nThe other thing that comes to mind is that if the log level was forced to WARN, only DEBUG levels appear in the log.\r\n\r\nOtherwise, sorry - it is near impossible to diagnose this without direct access to your runtime. You may need to figure this out on your own. The documentation has a section on logging, so see if that helps: https://github.com/karatelabs/karate#logging\r\n\r\n","title":"Karate Cucumber Reports not displaying logs in html","body":"<p>This can depend on if some other logging system has &quot;taken over&quot;. Recently I saw this happen with Quarkus, so there was a need to &quot;bridge&quot; what Quarkus was using to &quot;logback&quot; which is what Karate uses. You may get some tips from this <a href=\"https://github.com/karatelabs/karate-examples/blob/main/quarkus/README.md\" rel=\"nofollow noreferrer\">sample</a>.</p>\n<p>The other thing that comes to mind is that if the log level was forced to WARN, only DEBUG levels appear in the log.</p>\n<p>Otherwise, sorry - it is near impossible to diagnose this without direct access to your runtime. You may need to figure this out on your own. The documentation has a section on logging, so see if that helps: <a href=\"https://github.com/karatelabs/karate#logging\" rel=\"nofollow noreferrer\">https://github.com/karatelabs/karate#logging</a></p>\n"},{"tags":[],"owner":{"account_id":11692233,"reputation":322,"user_id":8663707,"display_name":"Interested_Programmer"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691095159,"creation_date":1691073364,"answer_id":76829132,"question_id":76432040,"body_markdown":"After debugging, we were able to resolve this issue after adding a logback.xml file in the project containing the karate.","title":"Karate Cucumber Reports not displaying logs in html","body":"<p>After debugging, we were able to resolve this issue after adding a logback.xml file in the project containing the karate.</p>\n"}],"owner":{"account_id":11692233,"reputation":322,"user_id":8663707,"display_name":"Interested_Programmer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":140,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76829132,"answer_count":2,"score":1,"last_activity_date":1691095159,"creation_date":1686228691,"question_id":76432040,"body_markdown":"When running Karate tests using git pipelines, the logs are visible in git pipeline logs but are not showing up in cucumber html\r\nJava 17\r\nGradle 7.4\r\nKarate 1.2.0\r\nCucumber Reporting 5.3\r\n\r\nBoth print and karate.log are not printing assertions, print statement etc. Is there a logging setting needed for showing karate logs in cucumber html report?\r\n\r\nAny help provided is appreciated","title":"Karate Cucumber Reports not displaying logs in html","body":"<p>When running Karate tests using git pipelines, the logs are visible in git pipeline logs but are not showing up in cucumber html\nJava 17\nGradle 7.4\nKarate 1.2.0\nCucumber Reporting 5.3</p>\n<p>Both print and karate.log are not printing assertions, print statement etc. Is there a logging setting needed for showing karate logs in cucumber html report?</p>\n<p>Any help provided is appreciated</p>\n"},{"tags":["java","jsf","primefaces","null","managed-bean"],"comments":[{"owner":{"account_id":9242367,"reputation":1023,"user_id":6865328,"display_name":"WoAiNii"},"score":0,"creation_date":1691432354,"post_id":76821675,"comment_id":135488043,"body_markdown":"When do you get the error? Could you post the full stack trace? How do you deploy your app/what&#39;s your application server? Have you tried without the template? Do you have any errors on the browser console?","body":"When do you get the error? Could you post the full stack trace? How do you deploy your app/what&#39;s your application server? Have you tried without the template? Do you have any errors on the browser console?"}],"owner":{"account_id":25968660,"reputation":1,"user_id":19684247,"display_name":"Vicente Leonardo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691094661,"creation_date":1690992220,"question_id":76821675,"body_markdown":"I have a Java EE web application with JSF and PrimeFaces. Everything works fine, but I encounter an error on a specific page, stating that the managed bean is null, as if it couldn&#39;t be injected properly. However, everything seems to be configured correctly. Interestingly, when I investigated further, I noticed that adding a System.out.println(&quot;TESTEEEE&quot;) statement on a particular line makes the application work normally.\r\n\r\nNote that this is a project I cloned from another one, and I only made a few changes. In the original project, everything works fine. Can someone help me?\r\n\r\n\r\n\r\n```\r\nimport java.io.Serializable;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.stream.Collectors;\r\n\r\nimport javax.annotation.PostConstruct;\r\nimport javax.faces.bean.ManagedBean;\r\nimport javax.faces.bean.ViewScoped;\r\n\r\nimport org.apache.commons.lang.StringUtils;\r\n\r\n\r\n@ManagedBean(name = &quot;ordEquipeUsuarioMB&quot;)\r\n@ViewScoped\r\npublic class OrdEquipeUsuarioMB implements Serializable {\r\n\r\n\tprivate static final long serialVersionUID = 462049997972941163L;\r\n\r\n\tprivate OrdEquipeDao equipeDao;\r\n\tprivate SegUsuarioDao usuarioDao;\r\n\tprivate OrdEquipeUsuarioDao equipeUsuarioDao;\r\n\r\n\tprivate List&lt;OrdEquipe&gt; listaEquipe;\r\n\tprivate List&lt;OrdEquipeUsuario.TipoMembroEquipe&gt; listaTipoMembroEquipe;\r\n\tprivate List&lt;SegUsuario&gt; listaUsuarioDisponivel;\r\n\tprivate List&lt;SegUsuario&gt; listaUsuarioCadastrado;\r\n\tprivate List&lt;SegUsuario&gt; listaUsuarioAdicionado;\r\n\tprivate List&lt;SegUsuario&gt; listaUsuarioRemovido;\r\n\tprivate List&lt;SegUsuario&gt; listaUsuarioPorEquipe;\r\n\r\n\tprivate OrdEquipe equipeSelecionada;\r\n\tprivate SegUsuario usuarioSelecionado;\r\n\tprivate String tipoMembroEquipeSelecionado;\r\n\r\n\t@PostConstruct\r\n\tpublic void metodoInicial() {\r\n\t\tbuscarEquipes();\r\n\t\tfor (OrdEquipeUsuario.TipoMembroEquipe tipo : OrdEquipeUsuario.TipoMembroEquipe.values()) {\r\n\t\t\tgetListaTipoMembroEquipe().add(tipo);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate void buscarEquipes() {\r\n\t\ttry {\r\n\t\t\tsetListaEquipe(getEquipeDao().getTodos(&quot;nome&quot;));\r\n\t\t} catch (Excecoes e) {\r\n\t\t\tMensagem.erro(e.getMessage());\r\n\t\t}\r\n\t}\r\n\r\n\tpublic void buscarUsuarios() {\r\n\t\tlimpar();\r\n\r\n\t\ttry {\r\n\t\t\tif (getEquipeSelecionada().getId() != null &amp;&amp; StringUtils.isNotBlank(getTipoMembroEquipeSelecionado())) {\r\n\t\t\t\tOrdEquipeUsuario equipeUsuarioFiltro = new OrdEquipeUsuario();\r\n\t\t\t\tequipeUsuarioFiltro.setOrdEquipe(getEquipeSelecionada());\r\n\t\t\t\tList&lt;OrdEquipeUsuario&gt; listaEquipeUsuario = getEquipeUsuarioDao()\r\n\t\t\t\t\t\t.getListaEquipeUsuario(equipeUsuarioFiltro);\r\n\r\n\t\t\t\tsetListaUsuarioPorEquipe(listaEquipeUsuario.stream().map(equipeUsuario -&gt; equipeUsuario.getSegUsuario())\r\n\t\t\t\t\t\t.sorted().collect(Collectors.toList()));\r\n\r\n\t\t\t\tsetListaUsuarioCadastrado(listaEquipeUsuario.stream()\r\n\t\t\t\t\t\t.filter(equipeUsuario -&gt; equipeUsuario.getTagTipo().equals(getTipoMembroEquipeSelecionado()))\r\n\t\t\t\t\t\t.map(equipeUsuario -&gt; equipeUsuario.getSegUsuario()).sorted().collect(Collectors.toList()));\r\n\r\n\t\t\t\tSystem.out.println(&quot;TESTEEEE&quot;);\r\n\t\t\t\tsetListaUsuarioDisponivel(getUsuarioDao().getUsuariosGestor(&quot;S&quot;));\r\n\t\t\t\tfor (SegUsuario usuarioCadastrado : getListaUsuarioCadastrado()) {\r\n\t\t\t\t\tgetListaUsuarioDisponivel().remove(usuarioCadastrado);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (Excecoes e) {\r\n\t\t\tMensagem.erro(e.getMessage());\r\n\t\t}\r\n\t}\r\n\r\n\tpublic void salvar() {\r\n\t\ttry {\r\n\t\t\tif (!getListaUsuarioRemovido().isEmpty()) {\r\n\t\t\t\tgetEquipeUsuarioDao().removerUsuariosDaEquipe(getListaUsuarioRemovido(), getEquipeSelecionada());\r\n\t\t\t}\r\n\r\n\t\t\tif (!getListaUsuarioAdicionado().isEmpty()) {\r\n\t\t\t\tList&lt;OrdEquipeUsuario&gt; listaEquipeUsuario = new ArrayList&lt;OrdEquipeUsuario&gt;();\r\n\t\t\t\tfor (SegUsuario usuarioCadastro : getListaUsuarioAdicionado()) {\r\n\t\t\t\t\tOrdEquipeUsuario equipeUsuario = new OrdEquipeUsuario();\r\n\t\t\t\t\tequipeUsuario.setOrdEquipe(getEquipeSelecionada());\r\n\t\t\t\t\tequipeUsuario.setSegUsuario(usuarioCadastro);\r\n\t\t\t\t\tequipeUsuario.setTagTipo(getTipoMembroEquipeSelecionado());\r\n\r\n\t\t\t\t\tlistaEquipeUsuario.add(equipeUsuario);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgetEquipeUsuarioDao().salvarLista(listaEquipeUsuario);\r\n\t\t\t}\r\n\r\n\t\t\tMensagem.informacao(&quot;alterarSucesso&quot;);\r\n\t\t\tbuscarUsuarios();\r\n\t\t} catch (Excecoes e) {\r\n\t\t\tMensagem.erro(e.getMessage());\r\n\t\t}\r\n\t}\r\n\r\n\tpublic void adicionar() {\r\n\t\tgetListaUsuarioCadastrado().add(getUsuarioSelecionado());\r\n\t\tgetListaUsuarioDisponivel().remove(getUsuarioSelecionado());\r\n\r\n\t\tif (getListaUsuarioRemovido().contains(getUsuarioSelecionado())) {\r\n\t\t\tgetListaUsuarioRemovido().remove(getUsuarioSelecionado());\r\n\t\t} else {\r\n\t\t\tgetListaUsuarioAdicionado().add(getUsuarioSelecionado());\r\n\r\n\t\t\tif (getListaUsuarioPorEquipe().contains(getUsuarioSelecionado())) {\r\n\t\t\t\tgetListaUsuarioPorEquipe().remove(getUsuarioSelecionado());\r\n\t\t\t\tgetListaUsuarioRemovido().add(getUsuarioSelecionado());\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic void adicionarTodos() {\r\n\t\tgetListaUsuarioCadastrado().addAll(getListaUsuarioDisponivel());\r\n\r\n\t\tfor (SegUsuario usuario : getListaUsuarioDisponivel()) {\r\n\t\t\tif (getListaUsuarioRemovido().contains(usuario)) {\r\n\t\t\t\tgetListaUsuarioRemovido().remove(usuario);\r\n\t\t\t} else {\r\n\t\t\t\tgetListaUsuarioAdicionado().add(usuario);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tgetListaUsuarioDisponivel().clear();\r\n\t}\r\n\r\n\tpublic void remover() {\r\n\t\tgetListaUsuarioCadastrado().remove(getUsuarioSelecionado());\r\n\t\tgetListaUsuarioDisponivel().add(getUsuarioSelecionado());\r\n\r\n\t\tif (getListaUsuarioAdicionado().contains(getUsuarioSelecionado())) {\r\n\t\t\tgetListaUsuarioAdicionado().remove(getUsuarioSelecionado());\r\n\t\t} else {\r\n\t\t\tgetListaUsuarioRemovido().add(getUsuarioSelecionado());\r\n\t\t}\r\n\t}\r\n\r\n\tpublic void removerTodos() {\r\n\t\tgetListaUsuarioDisponivel().addAll(getListaUsuarioCadastrado());\r\n\r\n\t\tfor (SegUsuario usuario : getListaUsuarioCadastrado()) {\r\n\t\t\tif (getListaUsuarioAdicionado().contains(usuario)) {\r\n\t\t\t\tgetListaUsuarioAdicionado().remove(usuario);\r\n\t\t\t} else {\r\n\t\t\t\tgetListaUsuarioRemovido().add(usuario);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tgetListaUsuarioCadastrado().clear();\r\n\t}\r\n\r\n\tpublic void cancelar() {\r\n\t\tbuscarUsuarios();\r\n\t}\r\n\r\n\tprivate void limpar() {\r\n\t\tgetListaUsuarioCadastrado().clear();\r\n\t\tgetListaUsuarioDisponivel().clear();\r\n\t\tgetListaUsuarioAdicionado().clear();\r\n\t\tgetListaUsuarioRemovido().clear();\r\n\t\tgetListaUsuarioPorEquipe().clear();\r\n\t\tsetUsuarioSelecionado(null);\r\n\t}\r\n\r\n\t// getters e setters\r\n\tpublic OrdEquipeDao getEquipeDao() {\r\n\t\tif (equipeDao == null) {\r\n\t\t\tequipeDao = new OrdEquipeDao();\r\n\t\t}\r\n\t\treturn equipeDao;\r\n\t}\r\n\r\n\tpublic SegUsuarioDao getUsuarioDao() {\r\n\t\tif (usuarioDao == null) {\r\n\t\t\tusuarioDao = new SegUsuarioDao();\r\n\t\t}\r\n\t\treturn usuarioDao;\r\n\t}\r\n\r\n\tpublic OrdEquipeUsuarioDao getEquipeUsuarioDao() {\r\n\t\tif (equipeUsuarioDao == null) {\r\n\t\t\tequipeUsuarioDao = new OrdEquipeUsuarioDao();\r\n\t\t}\r\n\t\treturn equipeUsuarioDao;\r\n\t}\r\n\r\n\tpublic List&lt;OrdEquipe&gt; getListaEquipe() {\r\n\t\tif (listaEquipe == null) {\r\n\t\t\tlistaEquipe = new ArrayList&lt;OrdEquipe&gt;();\r\n\t\t}\r\n\t\treturn listaEquipe;\r\n\t}\r\n\r\n\tpublic void setListaEquipe(List&lt;OrdEquipe&gt; listaEquipe) {\r\n\t\tthis.listaEquipe = listaEquipe;\r\n\t}\r\n\r\n\tpublic List&lt;OrdEquipeUsuario.TipoMembroEquipe&gt; getListaTipoMembroEquipe() {\r\n\t\tif (listaTipoMembroEquipe == null) {\r\n\t\t\tlistaTipoMembroEquipe = new ArrayList&lt;OrdEquipeUsuario.TipoMembroEquipe&gt;();\r\n\t\t}\r\n\t\treturn listaTipoMembroEquipe;\r\n\t}\r\n\r\n\tpublic List&lt;SegUsuario&gt; getListaUsuarioDisponivel() {\r\n\t\tif (listaUsuarioDisponivel == null) {\r\n\t\t\tlistaUsuarioDisponivel = new ArrayList&lt;SegUsuario&gt;();\r\n\t\t}\r\n\t\treturn listaUsuarioDisponivel;\r\n\t}\r\n\r\n\tpublic void setListaUsuarioDisponivel(List&lt;SegUsuario&gt; listaUsuarioDisponivel) {\r\n\t\tthis.listaUsuarioDisponivel = listaUsuarioDisponivel;\r\n\t}\r\n\r\n\tpublic List&lt;SegUsuario&gt; getListaUsuarioCadastrado() {\r\n\t\tif (listaUsuarioCadastrado == null) {\r\n\t\t\tlistaUsuarioCadastrado = new ArrayList&lt;SegUsuario&gt;();\r\n\t\t}\r\n\t\treturn listaUsuarioCadastrado;\r\n\t}\r\n\r\n\tpublic void setListaUsuarioCadastrado(List&lt;SegUsuario&gt; listaUsuarioCadastrado) {\r\n\t\tthis.listaUsuarioCadastrado = listaUsuarioCadastrado;\r\n\t}\r\n\r\n\tpublic List&lt;SegUsuario&gt; getListaUsuarioAdicionado() {\r\n\t\tif (listaUsuarioAdicionado == null) {\r\n\t\t\tlistaUsuarioAdicionado = new ArrayList&lt;SegUsuario&gt;();\r\n\t\t}\r\n\t\treturn listaUsuarioAdicionado;\r\n\t}\r\n\r\n\tpublic List&lt;SegUsuario&gt; getListaUsuarioRemovido() {\r\n\t\tif (listaUsuarioRemovido == null) {\r\n\t\t\tlistaUsuarioRemovido = new ArrayList&lt;SegUsuario&gt;();\r\n\t\t}\r\n\t\treturn listaUsuarioRemovido;\r\n\t}\r\n\r\n\tpublic List&lt;SegUsuario&gt; getListaUsuarioPorEquipe() {\r\n\t\tif (listaUsuarioPorEquipe == null) {\r\n\t\t\tlistaUsuarioPorEquipe = new ArrayList&lt;SegUsuario&gt;();\r\n\t\t}\r\n\t\treturn listaUsuarioPorEquipe;\r\n\t}\r\n\r\n\tpublic void setListaUsuarioPorEquipe(List&lt;SegUsuario&gt; listaUsuarioPorEquipe) {\r\n\t\tthis.listaUsuarioPorEquipe = listaUsuarioPorEquipe;\r\n\t}\r\n\r\n\tpublic OrdEquipe getEquipeSelecionada() {\r\n\t\tif (equipeSelecionada == null) {\r\n\t\t\tequipeSelecionada = new OrdEquipe();\r\n\t\t}\r\n\t\treturn equipeSelecionada;\r\n\t}\r\n\r\n\tpublic void setEquipeSelecionada(OrdEquipe equipeSelecionada) {\r\n\t\tthis.equipeSelecionada = equipeSelecionada;\r\n\t}\r\n\r\n\tpublic SegUsuario getUsuarioSelecionado() {\r\n\t\tif (usuarioSelecionado == null) {\r\n\t\t\tusuarioSelecionado = new SegUsuario();\r\n\t\t}\r\n\t\treturn usuarioSelecionado;\r\n\t}\r\n\r\n\tpublic void setUsuarioSelecionado(SegUsuario usuarioSelecionado) {\r\n\t\tthis.usuarioSelecionado = usuarioSelecionado;\r\n\t}\r\n\r\n\tpublic String getTipoMembroEquipeSelecionado() {\r\n\t\treturn tipoMembroEquipeSelecionado;\r\n\t}\r\n\r\n\tpublic void setTipoMembroEquipeSelecionado(String tipoMembroEquipeSelecionado) {\r\n\t\tthis.tipoMembroEquipeSelecionado = tipoMembroEquipeSelecionado;\r\n\t}\r\n}\r\n\r\n```\r\n\r\n\r\n```\r\n&lt;ui:composition xmlns=&quot;http://www.w3.org/1999/xhtml&quot;\r\n                xmlns:h=&quot;http://java.sun.com/jsf/html&quot;\r\n                xmlns:f=&quot;http://java.sun.com/jsf/core&quot;\r\n                xmlns:ui=&quot;http://java.sun.com/jsf/facelets&quot;\r\n                xmlns:p=&quot;http://primefaces.org/ui&quot;\r\n                template=&quot;/templateSentinel/templateNovo.xhtml&quot;&gt;\r\n\r\n    &lt;ui:define name=&quot;content&quot;&gt;\r\n    \t&lt;p:ajaxStatus oncomplete=&quot;PF(&#39;tabelaCadastrado&#39;).filter();PF(&#39;tabelaDisponivel&#39;).filter();&quot; /&gt;\r\n    \r\n        &lt;h:form id=&quot;formOrdEquipeUsuario&quot;&gt;\r\n        \t&lt;div class=&quot;Container100 BorBotGray newCrumb&quot;&gt;\r\n\t            &lt;p:breadCrumb styleClass=&quot;Animated05&quot;&gt;\r\n\t                &lt;p:menuitem value=&quot;#&quot; url=&quot;#&quot; styleClass=&quot;Animated05&quot;/&gt;\r\n\t                &lt;p:menuitem value=&quot;#{msgs.ordemServico}&quot; url=&quot;#&quot; styleClass=&quot;Animated05&quot;/&gt;\r\n\t                &lt;p:menuitem value=&quot;#{msgs.gerenciamento}&quot; url=&quot;#&quot; styleClass=&quot;Animated05&quot;/&gt;\r\n\t                &lt;p:menuitem value=&quot;#{msgs.usuarioPorEquipe}&quot; url=&quot;#&quot; styleClass=&quot;Animated05&quot;/&gt;\r\n\t            &lt;/p:breadCrumb&gt;\r\n\t        &lt;/div&gt;\r\n\t        \r\n\t\t\t&lt;span class=&quot;clear&quot; /&gt;\r\n\t\t\t\t\t\r\n\t\t\t&lt;div class=&quot;main_content&quot;&gt;\r\n\t\t\t\t&lt;p:outputPanel id=&quot;painelGerenciamentoEquipeUsuario&quot;&gt;\r\n\t\t\t\t\t&lt;div class=&quot;headerTitle container_grid&quot;&gt;\r\n\t\t\t\t\t\t&lt;div class=&quot;grid_12 last&quot;&gt;\r\n\t\t\t\t\t\t\t&lt;h4&gt;\r\n\t\t\t\t\t\t\t\t&lt;i class=&quot;icon-clipboard&quot; /&gt;\r\n\t\t\t\t\t\t\t\t&lt;span&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;h:outputText value=&quot;#{msgs.gerenciamentoUsuarioPorEquipe}&quot; /&gt;\r\n\t\t\t\t\t\t\t\t&lt;/span&gt;\r\n\t\t\t\t\t\t\t&lt;/h4&gt;\r\n\t\t\t\t\t\t\t&lt;p:separator /&gt;\r\n\t\t\t\t\t\t&lt;/div&gt;\r\n\t\t\t\t\t&lt;/div&gt;\r\n\t\t\t     \r\n\t\t\t\t\t&lt;span class=&quot;clear&quot; /&gt;\r\n\t\t\t\r\n\t\t\t\t\t&lt;div class=&quot;container_grid newForm&quot;&gt;\r\n\t\t\t\t\t\t&lt;div class=&quot;row_grid&quot;&gt;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t&lt;div class=&quot;grid_4&quot;&gt;\r\n\t\t\t\t\t\t\t\t&lt;p:outputLabel styleClass=&quot;widthFull&quot; value=&quot;#{msgs.equipe}&quot; for=&quot;comboEquipe&quot; /&gt;\r\n\t\t\t\t\t\t\t\t&lt;span class=&quot;clear&quot; /&gt;\r\n\t\t\t\t\t\t\t\t&lt;p:selectOneMenu id=&quot;comboEquipe&quot; label=&quot;#{msgs.equipe}&quot; value=&quot;#{ordEquipeUsuarioMB.equipeSelecionada}&quot; \r\n\t\t\t\t\t\t\t\t\tfilter=&quot;true&quot; filterMatchMode=&quot;contains&quot; converter=&quot;ConverterDefault&quot; styleClass=&quot;widthFull-select&quot;&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;f:selectItem itemLabel=&quot;#{msgs.selecionarOpcao}&quot; /&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;f:selectItems value=&quot;#{ordEquipeUsuarioMB.listaEquipe}&quot; var=&quot;equipe&quot; itemLabel=&quot;#{equipe.nome}&quot; itemValue=&quot;#{equipe}&quot; /&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;p:ajax event=&quot;change&quot; listener=&quot;#{ordEquipeUsuarioMB.buscarUsuarios}&quot; update=&quot;:growl painelGerenciamentoEquipeUsuario&quot; /&gt;\r\n\t\t\t\t\t\t\t\t&lt;/p:selectOneMenu&gt;\r\n\t\t\t\t\t\t\t\t&lt;span class=&quot;clear&quot; /&gt;\r\n\t\t\t\t\t\t\t\t&lt;p:overlayPanel for=&quot;comboEquipe&quot; rendered=&quot;#{facesContext.validationFailed}&quot; showEvent=&quot;mouseover&quot; hideEvent=&quot;mouseout&quot; at=&quot;right&quot; my=&quot;left&quot;&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;p:message for=&quot;comboEquipe&quot; /&gt;\r\n\t\t\t\t\t\t\t\t&lt;/p:overlayPanel&gt;\r\n\t\t\t\t\t\t\t&lt;/div&gt;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t&lt;div class=&quot;grid_4 last&quot;&gt;\r\n\t\t\t\t\t\t\t\t&lt;p:outputLabel styleClass=&quot;widthFull&quot; value=&quot;#{msgs.tipoMembroEquipe}&quot; for=&quot;comboTipoMembroEquipe&quot; /&gt;\r\n\t\t\t\t\t\t\t\t&lt;span class=&quot;clear&quot; /&gt;\r\n\t\t\t\t\t\t\t\t&lt;p:selectOneMenu id=&quot;comboTipoMembroEquipe&quot; label=&quot;#{msgs.tipoMembroEquipe}&quot; value=&quot;#{ordEquipeUsuarioMB.tipoMembroEquipeSelecionado}&quot; \r\n\t\t\t\t\t\t\t\t\tfilter=&quot;true&quot; filterMatchMode=&quot;contains&quot; styleClass=&quot;widthFull-select&quot;&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;f:selectItem itemLabel=&quot;#{msgs.selecionarOpcao}&quot; /&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;f:selectItems value=&quot;#{ordEquipeUsuarioMB.listaTipoMembroEquipe}&quot; var=&quot;tipoMembroEquipe&quot; itemLabel=&quot;#{tipoMembroEquipe.nome}&quot; itemValue=&quot;#{tipoMembroEquipe.tag}&quot; /&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;p:ajax event=&quot;change&quot; listener=&quot;#{ordEquipeUsuarioMB.buscarUsuarios}&quot; update=&quot;:growl painelGerenciamentoEquipeUsuario&quot; /&gt;\r\n\t\t\t\t\t\t\t\t&lt;/p:selectOneMenu&gt;\r\n\t\t\t\t\t\t\t\t&lt;span class=&quot;clear&quot; /&gt;\r\n\t\t\t\t\t\t\t\t&lt;p:overlayPanel for=&quot;comboTipoMembroEquipe&quot; rendered=&quot;#{facesContext.validationFailed}&quot; showEvent=&quot;mouseover&quot; hideEvent=&quot;mouseout&quot; at=&quot;right&quot; my=&quot;left&quot;&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;p:message for=&quot;comboTipoMembroEquipe&quot; /&gt;\r\n\t\t\t\t\t\t\t\t&lt;/p:overlayPanel&gt;\r\n\t\t\t\t\t\t\t&lt;/div&gt;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t&lt;/div&gt;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t&lt;div class=&quot;row_grid&quot;&gt;\r\n\t\t\t            \t&lt;div class=&quot;grid_12 last&quot;&gt;\r\n\t\t\t            \t\t\r\n\t\t\t            \t\t&lt;p:commandButton id=&quot;botaoCancelar&quot; value=&quot;#{msgs.botaoCancelar}&quot; actionListener=&quot;#{ordEquipeUsuarioMB.cancelar}&quot; \r\n\t\t\t            \t\t\ticon=&quot;fa fa-eraser Fs16 white&quot; partialSubmit=&quot;true&quot; styleClass=&quot;Fleft&quot; update=&quot;:growl painelGerenciamentoEquipeUsuario&quot;\r\n\t\t\t            \t\t\tdisabled=&quot;#{ordEquipeUsuarioMB.equipeSelecionada.id == null or empty ordEquipeUsuarioMB.tipoMembroEquipeSelecionado}&quot; style=&quot;margin-right: 5px;&quot;&gt;\r\n\t\t\t       \t\t\t\t\t&lt;f:param name=&quot;validateBean&quot; value=&quot;false&quot; /&gt;            \t\t\r\n\t\t\t                   \t&lt;/p:commandButton&gt;\r\n\t\t\t\r\n\t\t\t                   \t&lt;p:commandButton id=&quot;botaoSalvar&quot; value=&quot;#{msgs.botaoSalvar}&quot; actionListener=&quot;#{ordEquipeUsuarioMB.salvar}&quot; \r\n\t\t\t                   \t\ticon=&quot;fa fa-save Fs16 white&quot; partialSubmit=&quot;true&quot; styleClass=&quot;Fright&quot; update=&quot;:growl painelGerenciamentoEquipeUsuario&quot; \r\n\t\t\t                   \t\tdisabled=&quot;#{ordEquipeUsuarioMB.equipeSelecionada.id == null or empty ordEquipeUsuarioMB.tipoMembroEquipeSelecionado}&quot;&gt;\r\n\t\t\t       \t\t\t\t\t&lt;f:param name=&quot;validateBean&quot; value=&quot;true&quot; /&gt;            \t\t\r\n\t\t\t                   \t&lt;/p:commandButton&gt;\r\n\t\t\t            \t\t\t\r\n\t\t\t            \t&lt;/div&gt;\r\n\t\t\t           \t&lt;/div&gt;\r\n\t\t\t           \t\r\n\t\t\t           \t&lt;div class=&quot;EmptyBox20&quot; /&gt;\r\n\t\t\t\t         &lt;span class=&quot;clear&quot; /&gt;\r\n\t\t\t\t         \r\n\t\t\t\t         &lt;p:outputPanel id=&quot;painelTabela&quot;&gt;\r\n\t\t\t\t            &lt;div class=&quot;headerTitle container_grid&quot;&gt;\r\n\t\t\t\t            \r\n\t\t\t\t               &lt;div class=&quot;row_grid&quot; style=&quot;padding-top:0;&quot;&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;div class=&quot;column-3-1 listDefault&quot;&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;div class=&quot;headerTitle container_grid&quot;&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t&lt;div class=&quot;grid_12 last&quot;&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t&lt;h4&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t&lt;i class=&quot;icon-list-bullet&quot; /&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t&lt;span&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t&lt;h:outputText value=&quot;#{msgs.usuariosDisponiveis}&quot; /&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t&lt;/span&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t&lt;/h4&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t&lt;/div&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;/div&gt;\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t&lt;div class=&quot;EmptyBox5&quot; /&gt;\r\n\t\t\t  \t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t&lt;p:dataTable id=&quot;tabelaDisponivel&quot; var=&quot;usuario&quot; value=&quot;#{ordEquipeUsuarioMB.listaUsuarioDisponivel}&quot; pageLinks=&quot;4&quot;\r\n\t\t\t\t\t\t\t\t\t\tselectionMode=&quot;single&quot; selection=&quot;#{ordEquipeUsuarioMB.usuarioSelecionado}&quot; rowKey=&quot;#{usuario.id}&quot; rows=&quot;10&quot; paginator=&quot;true&quot;\r\n\t\t\t\t\t\t\t\t\t\tpaginatorTemplate=&quot;{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}&quot;\r\n\t\t\t\t\t\t\t\t\t\trowsPerPageTemplate=&quot;10,50,100, #{fn:length(ordEquipeUsuarioMB.listaUsuarioDisponivel) &gt; 100 ? fn:length(ordEquipeUsuarioMB.listaUsuarioDisponivel) : &#39;&#39;}&quot;\r\n\t\t\t\t\t\t\t\t\t\temptyMessage=&quot;#{msgs.nenhumRegistroEncontrado}&quot;\r\n\t\t\t\t\t\t\t\t\t\tpaginatorPosition=&quot;bottom&quot; widgetVar=&quot;tabelaDisponivel&quot;\r\n\t\t\t\t\t\t\t\t\t\tcurrentPageReportTemplate=&quot;#{msgs.paginacaoDataTable}&quot;&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t&lt;p:column headerText=&quot;#{msgs.nome}&quot; sortBy=&quot;#{usuario.nome}&quot; filterBy=&quot;#{usuario.nome}&quot; filterPosition=&quot;bottom&quot; filterMatchMode=&quot;contains&quot;&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t&lt;f:facet name=&quot;filter&quot;&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t&lt;p:inputText onkeyup=&quot;PF(&#39;tabelaDisponivel&#39;).filter()&quot; placeholder=&quot;Filtro&quot; /&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t&lt;/f:facet&gt;\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t&lt;h:outputText value=&quot;#{usuario.nome}&quot; /&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t&lt;/p:column&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t&lt;p:ajax event=&quot;page&quot; global=&quot;false&quot; /&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t&lt;p:ajax event=&quot;filter&quot; global=&quot;false&quot; /&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t&lt;p:ajax event=&quot;rowSelect&quot; listener=&quot;#{ordEquipeUsuarioMB.adicionar}&quot; \r\n\t\t\t\t\t\t\t\t\t\t\t\tupdate=&quot;:formOrdEquipeUsuario:painelGerenciamentoEquipeUsuario&quot; delay=&quot;100&quot; /&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;/p:dataTable&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;/div&gt;\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t&lt;div class=&quot;column-3-2 txtcenter&quot;&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;br /&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;span class=&quot;clear&quot; /&gt;\r\n\t\t\t\t\t\t\t\t\t \r\n\t\t\t\t\t\t\t\t\t \t&lt;p:commandButton id=&quot;botaoAdicionaTodos&quot; actionListener=&quot;#{ordEquipeUsuarioMB.adicionarTodos}&quot;\r\n\t\t\t\t\t\t\t\t\t\ticon=&quot;fa fa-angle-double-right Fs16 white&quot; partialSubmit=&quot;true&quot; styleClass=&quot;dinline-block&quot; update=&quot;:growl painelTabela&quot;\r\n\t\t\t\t\t\t\t\t\t\tdisabled=&quot;#{empty ordEquipeUsuarioMB.listaUsuarioDisponivel}&quot;\r\n\t\t\t\t\t\t\t\t\t\tstyle=&quot;margin: 5px 0;&quot; &gt;\r\n\t\t\t\t\t\t\t\t\t\t\t&lt;f:param name=&quot;validateBean&quot; value=&quot;false&quot; /&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;/p:commandButton&gt;\r\n\t\t\t\t\t\t\t\t\t \r\n\t\t\t\t\t\t\t\t\t\t&lt;span class=&quot;clear&quot; /&gt;\r\n\t\t\t\t\t\t\t\t\t \r\n\t\t\t\t\t\t\t\t\t \t&lt;p:commandButton id=&quot;botaoRemoverTodos&quot; actionListener=&quot;#{ordEquipeUsuarioMB.removerTodos}&quot;\r\n\t\t\t\t\t\t\t\t\t\ticon=&quot;fa fa-angle-double-left Fs16 white&quot; partialSubmit=&quot;true&quot; styleClass=&quot;dinline-block&quot; update=&quot;:growl painelTabela&quot;\r\n\t\t\t\t\t\t\t\t\t\tdisabled=&quot;#{empty ordEquipeUsuarioMB.listaUsuarioCadastrado}&quot;\r\n\t\t\t\t\t\t\t\t\t\tstyle=&quot;margin: 5px 0;&quot; &gt;\r\n\t\t\t\t\t\t\t\t\t\t\t&lt;f:param name=&quot;validateBean&quot; value=&quot;false&quot; /&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;/p:commandButton&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;/div&gt;\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t&lt;div class=&quot;column-3-3 listDefault&quot;&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;div class=&quot;headerTitle container_grid&quot;&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t&lt;div class=&quot;grid_12 last&quot;&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t&lt;h4&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t&lt;i class=&quot;icon-list-bullet&quot; /&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t&lt;span&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t&lt;h:outputText value=&quot;#{msgs.usuariosCadastrados}&quot; /&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t&lt;/span&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t&lt;/h4&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t&lt;/div&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;/div&gt;\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t&lt;div class=&quot;EmptyBox5&quot; /&gt;\r\n\t\t\t  \t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t&lt;p:dataTable id=&quot;tabelaCadastrado&quot; var=&quot;usuario&quot; value=&quot;#{ordEquipeUsuarioMB.listaUsuarioCadastrado}&quot; pageLinks=&quot;4&quot;\r\n\t\t\t\t\t\t\t\t\t\tselectionMode=&quot;single&quot; selection=&quot;#{ordEquipeUsuarioMB.usuarioSelecionado}&quot; rowKey=&quot;#{usuario.id}&quot; rows=&quot;10&quot; paginator=&quot;true&quot;\r\n\t\t\t\t\t\t\t\t\t\tpaginatorTemplate=&quot;{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}&quot;\r\n\t\t\t\t\t\t\t\t\t\trowsPerPageTemplate=&quot;10,50,100, #{fn:length(ordEquipeUsuarioMB.listaUsuarioCadastrado) &gt; 100 ? fn:length(ordEquipeUsuarioMB.listaUsuarioCadastrado) : &#39;&#39;}&quot;\r\n\t\t\t\t\t\t\t\t\t\temptyMessage=&quot;#{msgs.nenhumRegistroEncontrado}&quot; paginatorPosition=&quot;bottom&quot; widgetVar=&quot;tabelaCadastrado&quot;\r\n\t\t\t\t\t\t\t\t\t\tcurrentPageReportTemplate=&quot;#{msgs.paginacaoDataTable}&quot;&gt;\r\n\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t&lt;p:column headerText=&quot;#{msgs.nome}&quot; sortBy=&quot;#{usuario.nome}&quot; filterBy=&quot;#{usuario.nome}&quot; filterPosition=&quot;bottom&quot; filterMatchMode=&quot;contains&quot;&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t&lt;f:facet name=&quot;filter&quot;&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t&lt;p:inputText onkeyup=&quot;PF(&#39;tabelaCadastrado&#39;).filter()&quot; placeholder=&quot;Filtro&quot; /&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t&lt;/f:facet&gt;\r\n\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t&lt;h:outputText value=&quot;#{usuario.nome}&quot; /&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t&lt;/p:column&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t&lt;p:ajax event=&quot;page&quot; global=&quot;false&quot; /&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t&lt;p:ajax event=&quot;filter&quot; global=&quot;false&quot; /&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t&lt;p:ajax event=&quot;rowSelect&quot; listener=&quot;#{ordEquipeUsuarioMB.remover}&quot; \r\n\t\t\t\t\t\t\t\t\t\t\t\tupdate=&quot;:formOrdEquipeUsuario:painelGerenciamentoEquipeUsuario&quot; delay=&quot;100&quot; /&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;/p:dataTable&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;/div&gt;\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t&lt;/div&gt;\r\n\t\t\t\t            &lt;/div&gt;\r\n\t\t\t            &lt;/p:outputPanel&gt;\r\n\t\t\t\t\t&lt;/div&gt;\r\n\t\t\t\t&lt;/p:outputPanel&gt;\r\n\t\t\t&lt;/div&gt;\r\n\t\t&lt;/h:form&gt;\r\n    &lt;/ui:define&gt;\r\n&lt;/ui:composition&gt;\r\n```\r\n\r\n\r\nThe project works fine for another client where I only change images, but it doesn&#39;t work here","title":"Problema with managedbean null, but system out work","body":"<p>I have a Java EE web application with JSF and PrimeFaces. Everything works fine, but I encounter an error on a specific page, stating that the managed bean is null, as if it couldn't be injected properly. However, everything seems to be configured correctly. Interestingly, when I investigated further, I noticed that adding a System.out.println(&quot;TESTEEEE&quot;) statement on a particular line makes the application work normally.</p>\n<p>Note that this is a project I cloned from another one, and I only made a few changes. In the original project, everything works fine. Can someone help me?</p>\n<pre><code>import java.io.Serializable;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.stream.Collectors;\n\nimport javax.annotation.PostConstruct;\nimport javax.faces.bean.ManagedBean;\nimport javax.faces.bean.ViewScoped;\n\nimport org.apache.commons.lang.StringUtils;\n\n\n@ManagedBean(name = &quot;ordEquipeUsuarioMB&quot;)\n@ViewScoped\npublic class OrdEquipeUsuarioMB implements Serializable {\n\n    private static final long serialVersionUID = 462049997972941163L;\n\n    private OrdEquipeDao equipeDao;\n    private SegUsuarioDao usuarioDao;\n    private OrdEquipeUsuarioDao equipeUsuarioDao;\n\n    private List&lt;OrdEquipe&gt; listaEquipe;\n    private List&lt;OrdEquipeUsuario.TipoMembroEquipe&gt; listaTipoMembroEquipe;\n    private List&lt;SegUsuario&gt; listaUsuarioDisponivel;\n    private List&lt;SegUsuario&gt; listaUsuarioCadastrado;\n    private List&lt;SegUsuario&gt; listaUsuarioAdicionado;\n    private List&lt;SegUsuario&gt; listaUsuarioRemovido;\n    private List&lt;SegUsuario&gt; listaUsuarioPorEquipe;\n\n    private OrdEquipe equipeSelecionada;\n    private SegUsuario usuarioSelecionado;\n    private String tipoMembroEquipeSelecionado;\n\n    @PostConstruct\n    public void metodoInicial() {\n        buscarEquipes();\n        for (OrdEquipeUsuario.TipoMembroEquipe tipo : OrdEquipeUsuario.TipoMembroEquipe.values()) {\n            getListaTipoMembroEquipe().add(tipo);\n        }\n    }\n\n    private void buscarEquipes() {\n        try {\n            setListaEquipe(getEquipeDao().getTodos(&quot;nome&quot;));\n        } catch (Excecoes e) {\n            Mensagem.erro(e.getMessage());\n        }\n    }\n\n    public void buscarUsuarios() {\n        limpar();\n\n        try {\n            if (getEquipeSelecionada().getId() != null &amp;&amp; StringUtils.isNotBlank(getTipoMembroEquipeSelecionado())) {\n                OrdEquipeUsuario equipeUsuarioFiltro = new OrdEquipeUsuario();\n                equipeUsuarioFiltro.setOrdEquipe(getEquipeSelecionada());\n                List&lt;OrdEquipeUsuario&gt; listaEquipeUsuario = getEquipeUsuarioDao()\n                        .getListaEquipeUsuario(equipeUsuarioFiltro);\n\n                setListaUsuarioPorEquipe(listaEquipeUsuario.stream().map(equipeUsuario -&gt; equipeUsuario.getSegUsuario())\n                        .sorted().collect(Collectors.toList()));\n\n                setListaUsuarioCadastrado(listaEquipeUsuario.stream()\n                        .filter(equipeUsuario -&gt; equipeUsuario.getTagTipo().equals(getTipoMembroEquipeSelecionado()))\n                        .map(equipeUsuario -&gt; equipeUsuario.getSegUsuario()).sorted().collect(Collectors.toList()));\n\n                System.out.println(&quot;TESTEEEE&quot;);\n                setListaUsuarioDisponivel(getUsuarioDao().getUsuariosGestor(&quot;S&quot;));\n                for (SegUsuario usuarioCadastrado : getListaUsuarioCadastrado()) {\n                    getListaUsuarioDisponivel().remove(usuarioCadastrado);\n                }\n            }\n        } catch (Excecoes e) {\n            Mensagem.erro(e.getMessage());\n        }\n    }\n\n    public void salvar() {\n        try {\n            if (!getListaUsuarioRemovido().isEmpty()) {\n                getEquipeUsuarioDao().removerUsuariosDaEquipe(getListaUsuarioRemovido(), getEquipeSelecionada());\n            }\n\n            if (!getListaUsuarioAdicionado().isEmpty()) {\n                List&lt;OrdEquipeUsuario&gt; listaEquipeUsuario = new ArrayList&lt;OrdEquipeUsuario&gt;();\n                for (SegUsuario usuarioCadastro : getListaUsuarioAdicionado()) {\n                    OrdEquipeUsuario equipeUsuario = new OrdEquipeUsuario();\n                    equipeUsuario.setOrdEquipe(getEquipeSelecionada());\n                    equipeUsuario.setSegUsuario(usuarioCadastro);\n                    equipeUsuario.setTagTipo(getTipoMembroEquipeSelecionado());\n\n                    listaEquipeUsuario.add(equipeUsuario);\n                }\n\n                getEquipeUsuarioDao().salvarLista(listaEquipeUsuario);\n            }\n\n            Mensagem.informacao(&quot;alterarSucesso&quot;);\n            buscarUsuarios();\n        } catch (Excecoes e) {\n            Mensagem.erro(e.getMessage());\n        }\n    }\n\n    public void adicionar() {\n        getListaUsuarioCadastrado().add(getUsuarioSelecionado());\n        getListaUsuarioDisponivel().remove(getUsuarioSelecionado());\n\n        if (getListaUsuarioRemovido().contains(getUsuarioSelecionado())) {\n            getListaUsuarioRemovido().remove(getUsuarioSelecionado());\n        } else {\n            getListaUsuarioAdicionado().add(getUsuarioSelecionado());\n\n            if (getListaUsuarioPorEquipe().contains(getUsuarioSelecionado())) {\n                getListaUsuarioPorEquipe().remove(getUsuarioSelecionado());\n                getListaUsuarioRemovido().add(getUsuarioSelecionado());\n            }\n        }\n    }\n\n    public void adicionarTodos() {\n        getListaUsuarioCadastrado().addAll(getListaUsuarioDisponivel());\n\n        for (SegUsuario usuario : getListaUsuarioDisponivel()) {\n            if (getListaUsuarioRemovido().contains(usuario)) {\n                getListaUsuarioRemovido().remove(usuario);\n            } else {\n                getListaUsuarioAdicionado().add(usuario);\n            }\n        }\n\n        getListaUsuarioDisponivel().clear();\n    }\n\n    public void remover() {\n        getListaUsuarioCadastrado().remove(getUsuarioSelecionado());\n        getListaUsuarioDisponivel().add(getUsuarioSelecionado());\n\n        if (getListaUsuarioAdicionado().contains(getUsuarioSelecionado())) {\n            getListaUsuarioAdicionado().remove(getUsuarioSelecionado());\n        } else {\n            getListaUsuarioRemovido().add(getUsuarioSelecionado());\n        }\n    }\n\n    public void removerTodos() {\n        getListaUsuarioDisponivel().addAll(getListaUsuarioCadastrado());\n\n        for (SegUsuario usuario : getListaUsuarioCadastrado()) {\n            if (getListaUsuarioAdicionado().contains(usuario)) {\n                getListaUsuarioAdicionado().remove(usuario);\n            } else {\n                getListaUsuarioRemovido().add(usuario);\n            }\n        }\n\n        getListaUsuarioCadastrado().clear();\n    }\n\n    public void cancelar() {\n        buscarUsuarios();\n    }\n\n    private void limpar() {\n        getListaUsuarioCadastrado().clear();\n        getListaUsuarioDisponivel().clear();\n        getListaUsuarioAdicionado().clear();\n        getListaUsuarioRemovido().clear();\n        getListaUsuarioPorEquipe().clear();\n        setUsuarioSelecionado(null);\n    }\n\n    // getters e setters\n    public OrdEquipeDao getEquipeDao() {\n        if (equipeDao == null) {\n            equipeDao = new OrdEquipeDao();\n        }\n        return equipeDao;\n    }\n\n    public SegUsuarioDao getUsuarioDao() {\n        if (usuarioDao == null) {\n            usuarioDao = new SegUsuarioDao();\n        }\n        return usuarioDao;\n    }\n\n    public OrdEquipeUsuarioDao getEquipeUsuarioDao() {\n        if (equipeUsuarioDao == null) {\n            equipeUsuarioDao = new OrdEquipeUsuarioDao();\n        }\n        return equipeUsuarioDao;\n    }\n\n    public List&lt;OrdEquipe&gt; getListaEquipe() {\n        if (listaEquipe == null) {\n            listaEquipe = new ArrayList&lt;OrdEquipe&gt;();\n        }\n        return listaEquipe;\n    }\n\n    public void setListaEquipe(List&lt;OrdEquipe&gt; listaEquipe) {\n        this.listaEquipe = listaEquipe;\n    }\n\n    public List&lt;OrdEquipeUsuario.TipoMembroEquipe&gt; getListaTipoMembroEquipe() {\n        if (listaTipoMembroEquipe == null) {\n            listaTipoMembroEquipe = new ArrayList&lt;OrdEquipeUsuario.TipoMembroEquipe&gt;();\n        }\n        return listaTipoMembroEquipe;\n    }\n\n    public List&lt;SegUsuario&gt; getListaUsuarioDisponivel() {\n        if (listaUsuarioDisponivel == null) {\n            listaUsuarioDisponivel = new ArrayList&lt;SegUsuario&gt;();\n        }\n        return listaUsuarioDisponivel;\n    }\n\n    public void setListaUsuarioDisponivel(List&lt;SegUsuario&gt; listaUsuarioDisponivel) {\n        this.listaUsuarioDisponivel = listaUsuarioDisponivel;\n    }\n\n    public List&lt;SegUsuario&gt; getListaUsuarioCadastrado() {\n        if (listaUsuarioCadastrado == null) {\n            listaUsuarioCadastrado = new ArrayList&lt;SegUsuario&gt;();\n        }\n        return listaUsuarioCadastrado;\n    }\n\n    public void setListaUsuarioCadastrado(List&lt;SegUsuario&gt; listaUsuarioCadastrado) {\n        this.listaUsuarioCadastrado = listaUsuarioCadastrado;\n    }\n\n    public List&lt;SegUsuario&gt; getListaUsuarioAdicionado() {\n        if (listaUsuarioAdicionado == null) {\n            listaUsuarioAdicionado = new ArrayList&lt;SegUsuario&gt;();\n        }\n        return listaUsuarioAdicionado;\n    }\n\n    public List&lt;SegUsuario&gt; getListaUsuarioRemovido() {\n        if (listaUsuarioRemovido == null) {\n            listaUsuarioRemovido = new ArrayList&lt;SegUsuario&gt;();\n        }\n        return listaUsuarioRemovido;\n    }\n\n    public List&lt;SegUsuario&gt; getListaUsuarioPorEquipe() {\n        if (listaUsuarioPorEquipe == null) {\n            listaUsuarioPorEquipe = new ArrayList&lt;SegUsuario&gt;();\n        }\n        return listaUsuarioPorEquipe;\n    }\n\n    public void setListaUsuarioPorEquipe(List&lt;SegUsuario&gt; listaUsuarioPorEquipe) {\n        this.listaUsuarioPorEquipe = listaUsuarioPorEquipe;\n    }\n\n    public OrdEquipe getEquipeSelecionada() {\n        if (equipeSelecionada == null) {\n            equipeSelecionada = new OrdEquipe();\n        }\n        return equipeSelecionada;\n    }\n\n    public void setEquipeSelecionada(OrdEquipe equipeSelecionada) {\n        this.equipeSelecionada = equipeSelecionada;\n    }\n\n    public SegUsuario getUsuarioSelecionado() {\n        if (usuarioSelecionado == null) {\n            usuarioSelecionado = new SegUsuario();\n        }\n        return usuarioSelecionado;\n    }\n\n    public void setUsuarioSelecionado(SegUsuario usuarioSelecionado) {\n        this.usuarioSelecionado = usuarioSelecionado;\n    }\n\n    public String getTipoMembroEquipeSelecionado() {\n        return tipoMembroEquipeSelecionado;\n    }\n\n    public void setTipoMembroEquipeSelecionado(String tipoMembroEquipeSelecionado) {\n        this.tipoMembroEquipeSelecionado = tipoMembroEquipeSelecionado;\n    }\n}\n\n</code></pre>\n<pre><code>&lt;ui:composition xmlns=&quot;http://www.w3.org/1999/xhtml&quot;\n                xmlns:h=&quot;http://java.sun.com/jsf/html&quot;\n                xmlns:f=&quot;http://java.sun.com/jsf/core&quot;\n                xmlns:ui=&quot;http://java.sun.com/jsf/facelets&quot;\n                xmlns:p=&quot;http://primefaces.org/ui&quot;\n                template=&quot;/templateSentinel/templateNovo.xhtml&quot;&gt;\n\n    &lt;ui:define name=&quot;content&quot;&gt;\n        &lt;p:ajaxStatus oncomplete=&quot;PF('tabelaCadastrado').filter();PF('tabelaDisponivel').filter();&quot; /&gt;\n    \n        &lt;h:form id=&quot;formOrdEquipeUsuario&quot;&gt;\n            &lt;div class=&quot;Container100 BorBotGray newCrumb&quot;&gt;\n                &lt;p:breadCrumb styleClass=&quot;Animated05&quot;&gt;\n                    &lt;p:menuitem value=&quot;#&quot; url=&quot;#&quot; styleClass=&quot;Animated05&quot;/&gt;\n                    &lt;p:menuitem value=&quot;#{msgs.ordemServico}&quot; url=&quot;#&quot; styleClass=&quot;Animated05&quot;/&gt;\n                    &lt;p:menuitem value=&quot;#{msgs.gerenciamento}&quot; url=&quot;#&quot; styleClass=&quot;Animated05&quot;/&gt;\n                    &lt;p:menuitem value=&quot;#{msgs.usuarioPorEquipe}&quot; url=&quot;#&quot; styleClass=&quot;Animated05&quot;/&gt;\n                &lt;/p:breadCrumb&gt;\n            &lt;/div&gt;\n            \n            &lt;span class=&quot;clear&quot; /&gt;\n                    \n            &lt;div class=&quot;main_content&quot;&gt;\n                &lt;p:outputPanel id=&quot;painelGerenciamentoEquipeUsuario&quot;&gt;\n                    &lt;div class=&quot;headerTitle container_grid&quot;&gt;\n                        &lt;div class=&quot;grid_12 last&quot;&gt;\n                            &lt;h4&gt;\n                                &lt;i class=&quot;icon-clipboard&quot; /&gt;\n                                &lt;span&gt;\n                                    &lt;h:outputText value=&quot;#{msgs.gerenciamentoUsuarioPorEquipe}&quot; /&gt;\n                                &lt;/span&gt;\n                            &lt;/h4&gt;\n                            &lt;p:separator /&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                 \n                    &lt;span class=&quot;clear&quot; /&gt;\n            \n                    &lt;div class=&quot;container_grid newForm&quot;&gt;\n                        &lt;div class=&quot;row_grid&quot;&gt;\n                        \n                            &lt;div class=&quot;grid_4&quot;&gt;\n                                &lt;p:outputLabel styleClass=&quot;widthFull&quot; value=&quot;#{msgs.equipe}&quot; for=&quot;comboEquipe&quot; /&gt;\n                                &lt;span class=&quot;clear&quot; /&gt;\n                                &lt;p:selectOneMenu id=&quot;comboEquipe&quot; label=&quot;#{msgs.equipe}&quot; value=&quot;#{ordEquipeUsuarioMB.equipeSelecionada}&quot; \n                                    filter=&quot;true&quot; filterMatchMode=&quot;contains&quot; converter=&quot;ConverterDefault&quot; styleClass=&quot;widthFull-select&quot;&gt;\n                                    &lt;f:selectItem itemLabel=&quot;#{msgs.selecionarOpcao}&quot; /&gt;\n                                    &lt;f:selectItems value=&quot;#{ordEquipeUsuarioMB.listaEquipe}&quot; var=&quot;equipe&quot; itemLabel=&quot;#{equipe.nome}&quot; itemValue=&quot;#{equipe}&quot; /&gt;\n                                    &lt;p:ajax event=&quot;change&quot; listener=&quot;#{ordEquipeUsuarioMB.buscarUsuarios}&quot; update=&quot;:growl painelGerenciamentoEquipeUsuario&quot; /&gt;\n                                &lt;/p:selectOneMenu&gt;\n                                &lt;span class=&quot;clear&quot; /&gt;\n                                &lt;p:overlayPanel for=&quot;comboEquipe&quot; rendered=&quot;#{facesContext.validationFailed}&quot; showEvent=&quot;mouseover&quot; hideEvent=&quot;mouseout&quot; at=&quot;right&quot; my=&quot;left&quot;&gt;\n                                    &lt;p:message for=&quot;comboEquipe&quot; /&gt;\n                                &lt;/p:overlayPanel&gt;\n                            &lt;/div&gt;\n                            \n                            &lt;div class=&quot;grid_4 last&quot;&gt;\n                                &lt;p:outputLabel styleClass=&quot;widthFull&quot; value=&quot;#{msgs.tipoMembroEquipe}&quot; for=&quot;comboTipoMembroEquipe&quot; /&gt;\n                                &lt;span class=&quot;clear&quot; /&gt;\n                                &lt;p:selectOneMenu id=&quot;comboTipoMembroEquipe&quot; label=&quot;#{msgs.tipoMembroEquipe}&quot; value=&quot;#{ordEquipeUsuarioMB.tipoMembroEquipeSelecionado}&quot; \n                                    filter=&quot;true&quot; filterMatchMode=&quot;contains&quot; styleClass=&quot;widthFull-select&quot;&gt;\n                                    &lt;f:selectItem itemLabel=&quot;#{msgs.selecionarOpcao}&quot; /&gt;\n                                    &lt;f:selectItems value=&quot;#{ordEquipeUsuarioMB.listaTipoMembroEquipe}&quot; var=&quot;tipoMembroEquipe&quot; itemLabel=&quot;#{tipoMembroEquipe.nome}&quot; itemValue=&quot;#{tipoMembroEquipe.tag}&quot; /&gt;\n                                    &lt;p:ajax event=&quot;change&quot; listener=&quot;#{ordEquipeUsuarioMB.buscarUsuarios}&quot; update=&quot;:growl painelGerenciamentoEquipeUsuario&quot; /&gt;\n                                &lt;/p:selectOneMenu&gt;\n                                &lt;span class=&quot;clear&quot; /&gt;\n                                &lt;p:overlayPanel for=&quot;comboTipoMembroEquipe&quot; rendered=&quot;#{facesContext.validationFailed}&quot; showEvent=&quot;mouseover&quot; hideEvent=&quot;mouseout&quot; at=&quot;right&quot; my=&quot;left&quot;&gt;\n                                    &lt;p:message for=&quot;comboTipoMembroEquipe&quot; /&gt;\n                                &lt;/p:overlayPanel&gt;\n                            &lt;/div&gt;\n                            \n                        &lt;/div&gt;\n                        \n                        &lt;div class=&quot;row_grid&quot;&gt;\n                            &lt;div class=&quot;grid_12 last&quot;&gt;\n                                \n                                &lt;p:commandButton id=&quot;botaoCancelar&quot; value=&quot;#{msgs.botaoCancelar}&quot; actionListener=&quot;#{ordEquipeUsuarioMB.cancelar}&quot; \n                                    icon=&quot;fa fa-eraser Fs16 white&quot; partialSubmit=&quot;true&quot; styleClass=&quot;Fleft&quot; update=&quot;:growl painelGerenciamentoEquipeUsuario&quot;\n                                    disabled=&quot;#{ordEquipeUsuarioMB.equipeSelecionada.id == null or empty ordEquipeUsuarioMB.tipoMembroEquipeSelecionado}&quot; style=&quot;margin-right: 5px;&quot;&gt;\n                                    &lt;f:param name=&quot;validateBean&quot; value=&quot;false&quot; /&gt;                   \n                                &lt;/p:commandButton&gt;\n            \n                                &lt;p:commandButton id=&quot;botaoSalvar&quot; value=&quot;#{msgs.botaoSalvar}&quot; actionListener=&quot;#{ordEquipeUsuarioMB.salvar}&quot; \n                                    icon=&quot;fa fa-save Fs16 white&quot; partialSubmit=&quot;true&quot; styleClass=&quot;Fright&quot; update=&quot;:growl painelGerenciamentoEquipeUsuario&quot; \n                                    disabled=&quot;#{ordEquipeUsuarioMB.equipeSelecionada.id == null or empty ordEquipeUsuarioMB.tipoMembroEquipeSelecionado}&quot;&gt;\n                                    &lt;f:param name=&quot;validateBean&quot; value=&quot;true&quot; /&gt;                    \n                                &lt;/p:commandButton&gt;\n                                    \n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                        \n                        &lt;div class=&quot;EmptyBox20&quot; /&gt;\n                         &lt;span class=&quot;clear&quot; /&gt;\n                         \n                         &lt;p:outputPanel id=&quot;painelTabela&quot;&gt;\n                            &lt;div class=&quot;headerTitle container_grid&quot;&gt;\n                            \n                               &lt;div class=&quot;row_grid&quot; style=&quot;padding-top:0;&quot;&gt;\n                                    &lt;div class=&quot;column-3-1 listDefault&quot;&gt;\n                                        &lt;div class=&quot;headerTitle container_grid&quot;&gt;\n                                            &lt;div class=&quot;grid_12 last&quot;&gt;\n                                                &lt;h4&gt;\n                                                    &lt;i class=&quot;icon-list-bullet&quot; /&gt;\n                                                    &lt;span&gt;\n                                                        &lt;h:outputText value=&quot;#{msgs.usuariosDisponiveis}&quot; /&gt;\n                                                    &lt;/span&gt;\n                                                &lt;/h4&gt;\n                                            &lt;/div&gt;\n                                        &lt;/div&gt;\n                                        \n                                        &lt;div class=&quot;EmptyBox5&quot; /&gt;\n                                \n                                        &lt;p:dataTable id=&quot;tabelaDisponivel&quot; var=&quot;usuario&quot; value=&quot;#{ordEquipeUsuarioMB.listaUsuarioDisponivel}&quot; pageLinks=&quot;4&quot;\n                                        selectionMode=&quot;single&quot; selection=&quot;#{ordEquipeUsuarioMB.usuarioSelecionado}&quot; rowKey=&quot;#{usuario.id}&quot; rows=&quot;10&quot; paginator=&quot;true&quot;\n                                        paginatorTemplate=&quot;{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}&quot;\n                                        rowsPerPageTemplate=&quot;10,50,100, #{fn:length(ordEquipeUsuarioMB.listaUsuarioDisponivel) &gt; 100 ? fn:length(ordEquipeUsuarioMB.listaUsuarioDisponivel) : ''}&quot;\n                                        emptyMessage=&quot;#{msgs.nenhumRegistroEncontrado}&quot;\n                                        paginatorPosition=&quot;bottom&quot; widgetVar=&quot;tabelaDisponivel&quot;\n                                        currentPageReportTemplate=&quot;#{msgs.paginacaoDataTable}&quot;&gt;\n                                            \n                                            &lt;p:column headerText=&quot;#{msgs.nome}&quot; sortBy=&quot;#{usuario.nome}&quot; filterBy=&quot;#{usuario.nome}&quot; filterPosition=&quot;bottom&quot; filterMatchMode=&quot;contains&quot;&gt;\n                                                &lt;f:facet name=&quot;filter&quot;&gt;\n                                                    &lt;p:inputText onkeyup=&quot;PF('tabelaDisponivel').filter()&quot; placeholder=&quot;Filtro&quot; /&gt;\n                                                &lt;/f:facet&gt;\n                                        \n                                                &lt;h:outputText value=&quot;#{usuario.nome}&quot; /&gt;\n                                            &lt;/p:column&gt;\n                                            \n                                            &lt;p:ajax event=&quot;page&quot; global=&quot;false&quot; /&gt;\n                                            &lt;p:ajax event=&quot;filter&quot; global=&quot;false&quot; /&gt;\n                                            &lt;p:ajax event=&quot;rowSelect&quot; listener=&quot;#{ordEquipeUsuarioMB.adicionar}&quot; \n                                                update=&quot;:formOrdEquipeUsuario:painelGerenciamentoEquipeUsuario&quot; delay=&quot;100&quot; /&gt;\n                                        &lt;/p:dataTable&gt;\n                                    &lt;/div&gt;\n                                    \n                                    &lt;div class=&quot;column-3-2 txtcenter&quot;&gt;\n                                        &lt;br /&gt;\n                                        &lt;span class=&quot;clear&quot; /&gt;\n                                     \n                                        &lt;p:commandButton id=&quot;botaoAdicionaTodos&quot; actionListener=&quot;#{ordEquipeUsuarioMB.adicionarTodos}&quot;\n                                        icon=&quot;fa fa-angle-double-right Fs16 white&quot; partialSubmit=&quot;true&quot; styleClass=&quot;dinline-block&quot; update=&quot;:growl painelTabela&quot;\n                                        disabled=&quot;#{empty ordEquipeUsuarioMB.listaUsuarioDisponivel}&quot;\n                                        style=&quot;margin: 5px 0;&quot; &gt;\n                                            &lt;f:param name=&quot;validateBean&quot; value=&quot;false&quot; /&gt;\n                                        &lt;/p:commandButton&gt;\n                                     \n                                        &lt;span class=&quot;clear&quot; /&gt;\n                                     \n                                        &lt;p:commandButton id=&quot;botaoRemoverTodos&quot; actionListener=&quot;#{ordEquipeUsuarioMB.removerTodos}&quot;\n                                        icon=&quot;fa fa-angle-double-left Fs16 white&quot; partialSubmit=&quot;true&quot; styleClass=&quot;dinline-block&quot; update=&quot;:growl painelTabela&quot;\n                                        disabled=&quot;#{empty ordEquipeUsuarioMB.listaUsuarioCadastrado}&quot;\n                                        style=&quot;margin: 5px 0;&quot; &gt;\n                                            &lt;f:param name=&quot;validateBean&quot; value=&quot;false&quot; /&gt;\n                                        &lt;/p:commandButton&gt;\n                                    &lt;/div&gt;\n                                    \n                                    &lt;div class=&quot;column-3-3 listDefault&quot;&gt;\n                                        &lt;div class=&quot;headerTitle container_grid&quot;&gt;\n                                            &lt;div class=&quot;grid_12 last&quot;&gt;\n                                                &lt;h4&gt;\n                                                    &lt;i class=&quot;icon-list-bullet&quot; /&gt;\n                                                    &lt;span&gt;\n                                                        &lt;h:outputText value=&quot;#{msgs.usuariosCadastrados}&quot; /&gt;\n                                                    &lt;/span&gt;\n                                                &lt;/h4&gt;\n                                            &lt;/div&gt;\n                                        &lt;/div&gt;\n                                        \n                                        &lt;div class=&quot;EmptyBox5&quot; /&gt;\n                                \n                                        &lt;p:dataTable id=&quot;tabelaCadastrado&quot; var=&quot;usuario&quot; value=&quot;#{ordEquipeUsuarioMB.listaUsuarioCadastrado}&quot; pageLinks=&quot;4&quot;\n                                        selectionMode=&quot;single&quot; selection=&quot;#{ordEquipeUsuarioMB.usuarioSelecionado}&quot; rowKey=&quot;#{usuario.id}&quot; rows=&quot;10&quot; paginator=&quot;true&quot;\n                                        paginatorTemplate=&quot;{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}&quot;\n                                        rowsPerPageTemplate=&quot;10,50,100, #{fn:length(ordEquipeUsuarioMB.listaUsuarioCadastrado) &gt; 100 ? fn:length(ordEquipeUsuarioMB.listaUsuarioCadastrado) : ''}&quot;\n                                        emptyMessage=&quot;#{msgs.nenhumRegistroEncontrado}&quot; paginatorPosition=&quot;bottom&quot; widgetVar=&quot;tabelaCadastrado&quot;\n                                        currentPageReportTemplate=&quot;#{msgs.paginacaoDataTable}&quot;&gt;\n            \n                                            &lt;p:column headerText=&quot;#{msgs.nome}&quot; sortBy=&quot;#{usuario.nome}&quot; filterBy=&quot;#{usuario.nome}&quot; filterPosition=&quot;bottom&quot; filterMatchMode=&quot;contains&quot;&gt;\n                                                &lt;f:facet name=&quot;filter&quot;&gt;\n                                                    &lt;p:inputText onkeyup=&quot;PF('tabelaCadastrado').filter()&quot; placeholder=&quot;Filtro&quot; /&gt;\n                                                &lt;/f:facet&gt;\n            \n                                                &lt;h:outputText value=&quot;#{usuario.nome}&quot; /&gt;\n                                            &lt;/p:column&gt;\n                                            \n                                            &lt;p:ajax event=&quot;page&quot; global=&quot;false&quot; /&gt;\n                                            &lt;p:ajax event=&quot;filter&quot; global=&quot;false&quot; /&gt;\n                                            &lt;p:ajax event=&quot;rowSelect&quot; listener=&quot;#{ordEquipeUsuarioMB.remover}&quot; \n                                                update=&quot;:formOrdEquipeUsuario:painelGerenciamentoEquipeUsuario&quot; delay=&quot;100&quot; /&gt;\n                                        &lt;/p:dataTable&gt;\n                                    &lt;/div&gt;                              \n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/p:outputPanel&gt;\n                    &lt;/div&gt;\n                &lt;/p:outputPanel&gt;\n            &lt;/div&gt;\n        &lt;/h:form&gt;\n    &lt;/ui:define&gt;\n&lt;/ui:composition&gt;\n</code></pre>\n<p>The project works fine for another client where I only change images, but it doesn't work here</p>\n"},{"tags":["java","android","kotlin","android-studio","apk"],"answers":[{"comments":[{"owner":{"account_id":14458257,"reputation":1,"user_id":10443799,"display_name":"Pwners"},"score":0,"creation_date":1691086603,"post_id":76830525,"comment_id":135447689,"body_markdown":"that didn&#39;t work.","body":"that didn&#39;t work."}],"tags":[],"owner":{"account_id":16878257,"reputation":280,"user_id":12205091,"display_name":"Dmitri Chernysh"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691085212,"creation_date":1691085212,"answer_id":76830525,"question_id":76830261,"body_markdown":"Change buildTypes &gt; add &#39;release&#39; &gt;  \r\n\r\nminifyEnabled false\r\n\r\nshrinkResources false\r\n\r\n\r\n```kotlin\r\n    buildTypes {\r\n         debug {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n        }\r\n\r\n        release {\r\n            debuggable false\r\n            minifyEnabled false\r\n            shrinkResources false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n            signingConfig signingConfigs.config\r\n        }\r\n    }\r\n```","title":"How to disable Obfuscate in android studio?","body":"<p>Change buildTypes &gt; add 'release' &gt;</p>\n<p>minifyEnabled false</p>\n<p>shrinkResources false</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>    buildTypes {\n         debug {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n\n        release {\n            debuggable false\n            minifyEnabled false\n            shrinkResources false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n            signingConfig signingConfigs.config\n        }\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":14458257,"reputation":1,"user_id":10443799,"display_name":"Pwners"},"score":0,"creation_date":1691095148,"post_id":76831348,"comment_id":135449313,"body_markdown":"I clean the code and then build it in debug format. Then I create build apk. I decompile the APK with the jadx-gui tool. When I look, I see that the code is obfuscated.","body":"I clean the code and then build it in debug format. Then I create build apk. I decompile the APK with the jadx-gui tool. When I look, I see that the code is obfuscated."},{"owner":{"account_id":13594863,"reputation":1,"user_id":13382880,"display_name":"Oleksandr"},"score":0,"creation_date":1691096621,"post_id":76831348,"comment_id":135449543,"body_markdown":"Ok let&#39;s try the following, again clear build, use gradle console (or cli) gradle tool in and execute assembleDebug https://developer.android.com/build/building-cmdline#DebugMode by doing this way you will definitely generate debug apk of your app. Btw you can Build -&gt; Analyse  apk in order to explore your source apk right from the build folder.","body":"Ok let&#39;s try the following, again clear build, use gradle console (or cli) gradle tool in and execute assembleDebug <a href=\"https://developer.android.com/build/building-cmdline#DebugMode\" rel=\"nofollow noreferrer\">developer.android.com/build/building-cmdline#DebugMode</a> by doing this way you will definitely generate debug apk of your app. Btw you can Build -&gt; Analyse  apk in order to explore your source apk right from the build folder."}],"tags":[],"owner":{"account_id":13594863,"reputation":1,"user_id":13382880,"display_name":"Oleksandr"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691094217,"creation_date":1691093494,"answer_id":76831348,"question_id":76830261,"body_markdown":"Well, your config seems to be ok.\r\n\r\n    buildTypes {\r\n            debug {\r\n                minifyEnabled false\r\n                proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n            }\r\n        }\r\nThis should be enough in order to disable obfuscation for debug build. Can you please provide more info about what are you building or what are you trying to do? How you understand that your app obfuscated? Do you trying to build apk or you are looking for sources in build folder? Btw try to clean project Build -&gt; Clean Project and rebuild with debug build type.","title":"How to disable Obfuscate in android studio?","body":"<p>Well, your config seems to be ok.</p>\n<pre><code>buildTypes {\n        debug {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n</code></pre>\n<p>This should be enough in order to disable obfuscation for debug build. Can you please provide more info about what are you building or what are you trying to do? How you understand that your app obfuscated? Do you trying to build apk or you are looking for sources in build folder? Btw try to clean project Build -&gt; Clean Project and rebuild with debug build type.</p>\n"}],"owner":{"account_id":14458257,"reputation":1,"user_id":10443799,"display_name":"Pwners"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691094217,"creation_date":1691082718,"question_id":76830261,"body_markdown":"I&#39;m editing my build.gradle and proguard-rules.pro file but it still obfuscates my code. What is the reason? i will test it to reverse the code, but it obfuscates the code. How should i edit the code to not obfuscate it or is there a setting?\r\n\r\nbuild.gradle\r\n```\r\nplugins {\r\n    id &#39;com.android.application&#39;\r\n    id &#39;org.jetbrains.kotlin.android&#39;\r\n}\r\n\r\nandroid {\r\n    namespace &#39;com.example.myapplication2&#39;\r\n    compileSdk 33\r\n\r\n    defaultConfig {\r\n        applicationId &quot;com.example.myapplication2&quot;\r\n        minSdk 24\r\n        targetSdk 33\r\n        versionCode 1\r\n        versionName &quot;1.0&quot;\r\n\r\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n        vectorDrawables {\r\n            useSupportLibrary true\r\n        }\r\n    }\r\n\r\n    buildTypes {\r\n        debug {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n    kotlinOptions {\r\n        jvmTarget = &#39;1.8&#39;\r\n    }\r\n    buildFeatures {\r\n        compose true\r\n    }\r\n    composeOptions {\r\n        kotlinCompilerExtensionVersion &#39;1.4.3&#39;\r\n    }\r\n    packaging {\r\n        resources {\r\n            excludes += &#39;/META-INF/{AL2.0,LGPL2.1}&#39;\r\n        }\r\n    }\r\n}\r\n\r\ndependencies {\r\n\r\n    implementation &#39;androidx.core:core-ktx:1.9.0&#39;\r\n    implementation &#39;androidx.lifecycle:lifecycle-runtime-ktx:2.6.1&#39;\r\n    implementation &#39;androidx.activity:activity-compose:1.7.0&#39;\r\n    implementation platform(&#39;androidx.compose:compose-bom:2023.03.00&#39;)\r\n    implementation &#39;androidx.compose.ui:ui&#39;\r\n    implementation &#39;androidx.compose.ui:ui-graphics&#39;\r\n    implementation &#39;androidx.compose.ui:ui-tooling-preview&#39;\r\n    implementation &#39;androidx.compose.material3:material3&#39;\r\n    testImplementation &#39;junit:junit:4.13.2&#39;\r\n    androidTestImplementation &#39;androidx.test.ext:junit:1.1.5&#39;\r\n    androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.5.1&#39;\r\n    androidTestImplementation platform(&#39;androidx.compose:compose-bom:2023.03.00&#39;)\r\n    androidTestImplementation &#39;androidx.compose.ui:ui-test-junit4&#39;\r\n    debugImplementation &#39;androidx.compose.ui:ui-tooling&#39;\r\n    debugImplementation &#39;androidx.compose.ui:ui-test-manifest&#39;\r\n}\r\n```\r\n\r\nproguard-rules.pro\r\n```\r\n# Add project specific ProGuard rules here.\r\n# You can control the set of applied configuration files using the\r\n# proguardFiles setting in build.gradle.\r\n#\r\n# For more details, see\r\n#   http://developer.android.com/guide/developing/tools/proguard.html\r\n\r\n# If your project uses WebView with JS, uncomment the following\r\n# and specify the fully qualified class name to the JavaScript interface\r\n# class:\r\n#-keepclassmembers class fqcn.of.javascript.interface.for.webview {\r\n#   public *;\r\n#}\r\n\r\n# Uncomment this to preserve the line number information for\r\n# debugging stack traces.\r\n#-keepattributes SourceFile,LineNumberTable\r\n\r\n# If you keep the line number information, uncomment this to\r\n# hide the original source file name.\r\n#-renamesourcefileattribute SourceFile\r\n-keep class com.my.package.** { *; }\r\n-dontobfuscate\r\n-dontoptimize\r\n-dontshrink\r\n-dontusemixedcaseclassnames\r\n-dontskipnonpubliclibraryclasses\r\n-dontpreverify\r\n-verbose\r\n```\r\n\r\n\r\ni will test it to reverse the code, but it obfuscates the code. How should i edit the code to not obfuscate it or is there a setting?","title":"How to disable Obfuscate in android studio?","body":"<p>I'm editing my build.gradle and proguard-rules.pro file but it still obfuscates my code. What is the reason? i will test it to reverse the code, but it obfuscates the code. How should i edit the code to not obfuscate it or is there a setting?</p>\n<p>build.gradle</p>\n<pre><code>plugins {\n    id 'com.android.application'\n    id 'org.jetbrains.kotlin.android'\n}\n\nandroid {\n    namespace 'com.example.myapplication2'\n    compileSdk 33\n\n    defaultConfig {\n        applicationId &quot;com.example.myapplication2&quot;\n        minSdk 24\n        targetSdk 33\n        versionCode 1\n        versionName &quot;1.0&quot;\n\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n        vectorDrawables {\n            useSupportLibrary true\n        }\n    }\n\n    buildTypes {\n        debug {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n    kotlinOptions {\n        jvmTarget = '1.8'\n    }\n    buildFeatures {\n        compose true\n    }\n    composeOptions {\n        kotlinCompilerExtensionVersion '1.4.3'\n    }\n    packaging {\n        resources {\n            excludes += '/META-INF/{AL2.0,LGPL2.1}'\n        }\n    }\n}\n\ndependencies {\n\n    implementation 'androidx.core:core-ktx:1.9.0'\n    implementation 'androidx.lifecycle:lifecycle-runtime-ktx:2.6.1'\n    implementation 'androidx.activity:activity-compose:1.7.0'\n    implementation platform('androidx.compose:compose-bom:2023.03.00')\n    implementation 'androidx.compose.ui:ui'\n    implementation 'androidx.compose.ui:ui-graphics'\n    implementation 'androidx.compose.ui:ui-tooling-preview'\n    implementation 'androidx.compose.material3:material3'\n    testImplementation 'junit:junit:4.13.2'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.5'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.1'\n    androidTestImplementation platform('androidx.compose:compose-bom:2023.03.00')\n    androidTestImplementation 'androidx.compose.ui:ui-test-junit4'\n    debugImplementation 'androidx.compose.ui:ui-tooling'\n    debugImplementation 'androidx.compose.ui:ui-test-manifest'\n}\n</code></pre>\n<p>proguard-rules.pro</p>\n<pre><code># Add project specific ProGuard rules here.\n# You can control the set of applied configuration files using the\n# proguardFiles setting in build.gradle.\n#\n# For more details, see\n#   http://developer.android.com/guide/developing/tools/proguard.html\n\n# If your project uses WebView with JS, uncomment the following\n# and specify the fully qualified class name to the JavaScript interface\n# class:\n#-keepclassmembers class fqcn.of.javascript.interface.for.webview {\n#   public *;\n#}\n\n# Uncomment this to preserve the line number information for\n# debugging stack traces.\n#-keepattributes SourceFile,LineNumberTable\n\n# If you keep the line number information, uncomment this to\n# hide the original source file name.\n#-renamesourcefileattribute SourceFile\n-keep class com.my.package.** { *; }\n-dontobfuscate\n-dontoptimize\n-dontshrink\n-dontusemixedcaseclassnames\n-dontskipnonpubliclibraryclasses\n-dontpreverify\n-verbose\n</code></pre>\n<p>i will test it to reverse the code, but it obfuscates the code. How should i edit the code to not obfuscate it or is there a setting?</p>\n"},{"tags":["java","selenium","junit","testng"],"comments":[{"owner":{"account_id":4806420,"reputation":3411,"user_id":3881320,"display_name":"Davide Patti"},"score":1,"creation_date":1521883616,"post_id":49463014,"comment_id":85929155,"body_markdown":"Could you post the exception?","body":"Could you post the exception?"}],"answers":[{"tags":[],"owner":{"account_id":4230213,"reputation":4164,"user_id":3462681,"accept_rate":50,"display_name":"Roushan"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1521887723,"creation_date":1521887723,"answer_id":49463687,"question_id":49463014,"body_markdown":"&gt;     @BeforeTest: The annotated method will be run before any test method belonging to the classes inside the &lt;test&gt; tag is run.\r\n&gt;     @BeforeClass: The annotated method will be run before the first test method in the current class is invoked\r\n\r\ntry to change the annotation \r\n\r\n    @BeforeTest\r\n    public static void driveraBaglan() {\r\n        //Driver is declared here. I removed it to give the simple code. \r\n        user = driver.findElement(By.id(&quot;user&quot;));\r\n        pass = driver.findElement(By.id(&quot;pass&quot;));\r\n        login = driver.findElement(By.xpath(&quot;//button[contains(.,&#39;Log In&#39;)]&quot;));\r\n        statusMessage = driver.findElement(By.id(&quot;login-status-message&quot;)).getText();\r\n    \r\n    }","title":"TestNG @BeforeClass initialization code not running before Test","body":"<blockquote>\n<pre><code>@BeforeTest: The annotated method will be run before any test method belonging to the classes inside the &lt;test&gt; tag is run.\n@BeforeClass: The annotated method will be run before the first test method in the current class is invoked\n</code></pre>\n</blockquote>\n\n<p>try to change the annotation </p>\n\n<pre><code>@BeforeTest\npublic static void driveraBaglan() {\n    //Driver is declared here. I removed it to give the simple code. \n    user = driver.findElement(By.id(\"user\"));\n    pass = driver.findElement(By.id(\"pass\"));\n    login = driver.findElement(By.xpath(\"//button[contains(.,'Log In')]\"));\n    statusMessage = driver.findElement(By.id(\"login-status-message\")).getText();\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4806420,"reputation":3411,"user_id":3881320,"display_name":"Davide Patti"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1521888916,"creation_date":1521888916,"answer_id":49463848,"question_id":49463014,"body_markdown":"I never used **TestNG** but I do use **Junit**. Trying to replicate your example, I obtained the following exception:\r\n\r\n    [TestNG] Running:\r\n      /Users/davide.patti/Library/Caches/IntelliJIdea2017.3/temp-testng-customsuite.xml\r\n    \r\n    java.lang.NullPointerException\r\n    \tat TestSO.loginNoInfo(TestSO.java:27)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \tat org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:80)\r\n    \tat org.testng.internal.Invoker.invokeMethod(Invoker.java:714)\r\n    \tat org.testng.internal.Invoker.invokeTestMethod(Invoker.java:901)\r\n    \tat org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1231)\r\n    \tat org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:127)\r\n    \tat org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:111)\r\n    \tat org.testng.TestRunner.privateRun(TestRunner.java:767)\r\n    \tat org.testng.TestRunner.run(TestRunner.java:617)\r\n    \tat org.testng.SuiteRunner.runTest(SuiteRunner.java:334)\r\n    \tat org.testng.SuiteRunner.runSequentially(SuiteRunner.java:329)\r\n    \tat org.testng.SuiteRunner.privateRun(SuiteRunner.java:291)\r\n    \tat org.testng.SuiteRunner.run(SuiteRunner.java:240)\r\n    \tat org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)\r\n    \tat org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:86)\r\n    \tat org.testng.TestNG.runSuitesSequentially(TestNG.java:1198)\r\n    \tat org.testng.TestNG.runSuitesLocally(TestNG.java:1123)\r\n    \tat org.testng.TestNG.run(TestNG.java:1031)\r\n    \tat org.testng.IDEARemoteTestNG.run(IDEARemoteTestNG.java:72)\r\n    \tat org.testng.RemoteTestNGStarter.main(RemoteTestNGStarter.java:123)\r\n\r\n\r\nThe reason was because, in my imported classes I was using the BeforeClass of Junit:\r\n\r\n    import org.junit.BeforeClass;\r\n    import org.testng.annotations.Test;\r\n\r\nand not of TestNG.\r\n\r\nIf your null pointer exception is the same, be sure that your imported classes are the correct ones:\r\n\r\n    import org.testng.annotations.BeforeClass;\r\n    import org.testng.annotations.Test; ","title":"TestNG @BeforeClass initialization code not running before Test","body":"<p>I never used <strong>TestNG</strong> but I do use <strong>Junit</strong>. Trying to replicate your example, I obtained the following exception:</p>\n\n<pre><code>[TestNG] Running:\n  /Users/davide.patti/Library/Caches/IntelliJIdea2017.3/temp-testng-customsuite.xml\n\njava.lang.NullPointerException\n    at TestSO.loginNoInfo(TestSO.java:27)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:80)\n    at org.testng.internal.Invoker.invokeMethod(Invoker.java:714)\n    at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:901)\n    at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1231)\n    at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:127)\n    at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:111)\n    at org.testng.TestRunner.privateRun(TestRunner.java:767)\n    at org.testng.TestRunner.run(TestRunner.java:617)\n    at org.testng.SuiteRunner.runTest(SuiteRunner.java:334)\n    at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:329)\n    at org.testng.SuiteRunner.privateRun(SuiteRunner.java:291)\n    at org.testng.SuiteRunner.run(SuiteRunner.java:240)\n    at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)\n    at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:86)\n    at org.testng.TestNG.runSuitesSequentially(TestNG.java:1198)\n    at org.testng.TestNG.runSuitesLocally(TestNG.java:1123)\n    at org.testng.TestNG.run(TestNG.java:1031)\n    at org.testng.IDEARemoteTestNG.run(IDEARemoteTestNG.java:72)\n    at org.testng.RemoteTestNGStarter.main(RemoteTestNGStarter.java:123)\n</code></pre>\n\n<p>The reason was because, in my imported classes I was using the BeforeClass of Junit:</p>\n\n<pre><code>import org.junit.BeforeClass;\nimport org.testng.annotations.Test;\n</code></pre>\n\n<p>and not of TestNG.</p>\n\n<p>If your null pointer exception is the same, be sure that your imported classes are the correct ones:</p>\n\n<pre><code>import org.testng.annotations.BeforeClass;\nimport org.testng.annotations.Test; \n</code></pre>\n"},{"tags":[],"owner":{"account_id":6232328,"reputation":1338,"user_id":4848659,"display_name":"Gimhani"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1559117122,"creation_date":1559117122,"answer_id":56355791,"question_id":49463014,"body_markdown":"I got this same issue by an accidental change I&#39;ve done.\r\n\r\nYou may also get the null pointer exception on objects you are initializing in @BeforeClass or @BeforeTest, when you have a dilemma situation as below (where the class is set to as a disabled test class while having enabled test methods).\r\n\r\n    @Test(enabled=false)\r\n    public class TestClass{\r\n        A a;    \r\n    \r\n        @BeforeClass\r\n        public void doBeforeClass(){\r\n          a=new A();\r\n          //\r\n        }\r\n        \r\n        @Test\r\n        public void test1(){\r\n           a.callMethod1();\r\n        }\r\n    \r\n        @Test\r\n        public void test2(){\r\n           a.callMethod2();\r\n        }\r\n    \r\n    }\r\n\r\nHere, when you are running full-suite by putting `@Test(enabled=false)` only for the class, still the suite will run individual tests in the class since `@Test` annotations are present there. However, since `@BeforeClass` is not running for whole class, object &#39;a&#39; is not initialized and will cause null pointer exceptions.\r\n\r\nIn such cases, the individual `@Test` annotations too need to be changed to `@Test(enabled=false)`","title":"TestNG @BeforeClass initialization code not running before Test","body":"<p>I got this same issue by an accidental change I've done.</p>\n\n<p>You may also get the null pointer exception on objects you are initializing in @BeforeClass or @BeforeTest, when you have a dilemma situation as below (where the class is set to as a disabled test class while having enabled test methods).</p>\n\n<pre><code>@Test(enabled=false)\npublic class TestClass{\n    A a;    \n\n    @BeforeClass\n    public void doBeforeClass(){\n      a=new A();\n      //\n    }\n\n    @Test\n    public void test1(){\n       a.callMethod1();\n    }\n\n    @Test\n    public void test2(){\n       a.callMethod2();\n    }\n\n}\n</code></pre>\n\n<p>Here, when you are running full-suite by putting <code>@Test(enabled=false)</code> only for the class, still the suite will run individual tests in the class since <code>@Test</code> annotations are present there. However, since <code>@BeforeClass</code> is not running for whole class, object 'a' is not initialized and will cause null pointer exceptions.</p>\n\n<p>In such cases, the individual <code>@Test</code> annotations too need to be changed to <code>@Test(enabled=false)</code></p>\n"},{"tags":[],"owner":{"account_id":21422058,"reputation":55,"user_id":15780106,"display_name":"Parker H Gordon"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691093665,"creation_date":1691093665,"answer_id":76831369,"question_id":49463014,"body_markdown":"For me I had to include alwaysRun = true, which implies that it was probably a misconfiguration of the groups somehow.\r\n\r\n    @BeforeClass(alwaysRun = true)\r\n    setup() { ... }","title":"TestNG @BeforeClass initialization code not running before Test","body":"<p>For me I had to include alwaysRun = true, which implies that it was probably a misconfiguration of the groups somehow.</p>\n<pre><code>@BeforeClass(alwaysRun = true)\nsetup() { ... }\n</code></pre>\n"}],"owner":{"account_id":13215042,"reputation":51,"user_id":9543883,"display_name":"Ceyhun Ganioğlu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5574,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":49463687,"answer_count":4,"score":2,"last_activity_date":1691093665,"creation_date":1521882611,"question_id":49463014,"body_markdown":"I am writing test codes with Selenium, TestNG. I am trying to set some elements on the `@BeforeClass` section as I am repeating those actions on the same page. But I am getting null pointer exception. Is there a way to fix this issue?\r\n\r\n    public class RunTest {\r\n    private static WebElement user;\r\n    private static WebElement pass;\r\n    private static WebElement login;\r\n\r\n    @BeforeClass\r\n    public static void driveraBaglan() {\r\n        //Driver is declared here. I removed it to give the simple code. \r\n        user = driver.findElement(By.id(&quot;user&quot;));\r\n        pass = driver.findElement(By.id(&quot;pass&quot;));\r\n        login = driver.findElement(By.xpath(&quot;//button[contains(.,&#39;Log In&#39;)]&quot;));\r\n        statusMessage = driver.findElement(By.id(&quot;login-status-message&quot;)).getText();\r\n\r\n    }\r\n    @Test(priority=1)\r\n    public void loginNoInfo() {\r\n            user.clear();\r\n            pass.clear();\r\n    }\r\n\r\nI get the null pointer error on `user.clear()` , `pass.clear()` and `login.click()` functions. All tests on the page runs on the same page. I don&#39;t want to use repeated &quot;find element by id&quot; tags on each test on the page.\r\n","title":"TestNG @BeforeClass initialization code not running before Test","body":"<p>I am writing test codes with Selenium, TestNG. I am trying to set some elements on the <code>@BeforeClass</code> section as I am repeating those actions on the same page. But I am getting null pointer exception. Is there a way to fix this issue?</p>\n\n<pre><code>public class RunTest {\nprivate static WebElement user;\nprivate static WebElement pass;\nprivate static WebElement login;\n\n@BeforeClass\npublic static void driveraBaglan() {\n    //Driver is declared here. I removed it to give the simple code. \n    user = driver.findElement(By.id(\"user\"));\n    pass = driver.findElement(By.id(\"pass\"));\n    login = driver.findElement(By.xpath(\"//button[contains(.,'Log In')]\"));\n    statusMessage = driver.findElement(By.id(\"login-status-message\")).getText();\n\n}\n@Test(priority=1)\npublic void loginNoInfo() {\n        user.clear();\n        pass.clear();\n}\n</code></pre>\n\n<p>I get the null pointer error on <code>user.clear()</code> , <code>pass.clear()</code> and <code>login.click()</code> functions. All tests on the page runs on the same page. I don't want to use repeated \"find element by id\" tags on each test on the page.</p>\n"},{"tags":["java","spring-boot","soap-client","unmarshalling"],"owner":{"account_id":12890715,"reputation":1306,"user_id":9322814,"accept_rate":50,"display_name":"Juke"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691093647,"creation_date":1691093647,"question_id":76831364,"body_markdown":"My xml soap response looks like mentioned below and I additionally I see unmarshalling exception org.springframework.oxm.UnmarshallingFailureException: JAXB unmarshalling exception; nested exception is javax.xml.bind.UnmarshalException: unexpected element (uri:&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;, local:&quot;Fault&quot;)\r\n\r\n    &lt;env:Envelope\r\n    \txmlns:env=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;\r\n    \txmlns:wsa=&quot;http://www.w3.org/2005/08/addressing&quot;&gt;\r\n    \t&lt;env:Header&gt;\r\n    \t\t&lt;wsa:Action&gt;process***&lt;/wsa:Action&gt;\r\n    \t\t&lt;wsa:MessageID&gt;urn:&lt;/wsa:MessageID&gt;\r\n    \t\t&lt;wsa:ReplyTo&gt;\r\n    \t\t\t&lt;wsa:Address&gt;http://www.w3.org/2005/08/addressing/anonymous&lt;/wsa:Address&gt;\r\n    \t\t\t&lt;wsa:ReferenceParameters&gt;\r\n    \t\t\t\t&lt;instra:tracking.ecid\r\n    \t\t\t\t\txmlns:instra=&quot;http://xmlns.oracle.com/sca/tracking/1.0&quot;&gt;0f285c\r\n    \t\t\t\t&lt;/instra:tracking.ecid&gt;\r\n    \t\t\t\t&lt;instra:tracking.FlowEventId\r\n    \t\t\t\t\txmlns:instra=&quot;http://xmlns.oracle.com/sca/tracking/1.0&quot;&gt;110\r\n    \t\t\t\t&lt;/instra:tracking.FlowEventId&gt;\r\n    \t\t\t\t&lt;instra:tracking.FlowId\r\n    \t\t\t\t\txmlns:instra=&quot;http://xmlns.oracle.com/sca/tracking/1.0&quot;&gt;233\r\n    \t\t\t\t&lt;/instra:tracking.FlowId&gt;\r\n    \t\t\t\t&lt;instra:tracking.CorrelationFlowId\r\n    \t\t\t\t\txmlns:instra=&quot;http://xmlns.oracle.com/sca/tracking/1.0&quot;&gt;0000OawEgND\r\n    \t\t\t\t&lt;/instra:tracking.CorrelationFlowId&gt;\r\n    \t\t\t\t&lt;instra:tracking.quiescing.SCAEntityId\r\n    \t\t\t\t\txmlns:instra=&quot;http://xmlns.oracle.com/sca/tracking/1.0&quot;&gt;90\r\n    \t\t\t\t&lt;/instra:tracking.quiescing.SCAEntityId&gt;\r\n    \t\t\t&lt;/wsa:ReferenceParameters&gt;\r\n    \t\t&lt;/wsa:ReplyTo&gt;\r\n    \t\t&lt;wsa:FaultTo&gt;\r\n    \t\t\t&lt;wsa:Address&gt;http://www.w3.org/2005/08/addressing/anonymous&lt;/wsa:Address&gt;\r\n    \t\t&lt;/wsa:FaultTo&gt;\r\n    \t&lt;/env:Header&gt;\r\n    \t&lt;env:Body&gt;\r\n    \t\t&lt;ResponseSolution\r\n    \t\t\txmlns=&quot;http://www.openapplications.org/oagis/10&quot;\r\n    \t\t\txmlns:client=&quot;http://xmlns.oracle.com/REQ2DELPHI&quot;\r\n    \t\t\txmlns:ns1=&quot;http://xmlns.oracle.com/Delphi_Requisition_OAG&quot;\r\n    \t\t\txmlns:ns2=&quot;http://docs.oasis-open.org/wsbpel/2.0/plnktype&quot;\r\n    \t\t\txmlns:ns3=&quot;http://www.openapplications.org/oagis/9&quot;\r\n    \t\t\txmlns:plnk=&quot;http://schemas.xmlsoap.org/ws/2003/05/partner-link/&quot;\r\n    \t\t\txmlns:tns=&quot;http://www.openapplications.org/oagis/10&quot;\r\n    \t\t\txmlns:wsdl=&quot;http://schemas.xmlsoap.org/wsdl/&quot;&gt;\r\n    \t\t\t&lt;tns:DataArea&gt;\r\n    \t\t\t\t&lt;tns:Respond&gt;\r\n    \t\t\t\t\t&lt;tns:Area&gt;\r\n    \t\t\t\t\t\t&lt;tns:Receiver&gt;\r\n    \t\t\t\t\t\t\t&lt;tns:ID&gt;***&lt;/tns:ID&gt;\r\n    \t\t\t\t\t\t\t&lt;tns:Conent&gt;****&lt;/tns:Conent&gt;\r\n    \t\t\t\t\t\t&lt;/tns:Receiver&gt;\r\n    \t\t\t\t\t&lt;/tns:Area&gt;\r\n    \t\t\t\t&lt;/tns:Respond&gt;\r\n    \t\t\t&lt;/tns:DataArea&gt;\r\n    \t\t&lt;/ResponseSolution&gt;\r\n    \t&lt;/env:Body&gt;\r\n    &lt;/env:Envelope&gt;\r\n\r\nHere is my webserviceConfig\r\n\r\n\r\npublic class WebServiceConfig {\r\n\r\n\tprivate String username;\r\n\tprivate String password;\r\n\t\r\n\r\n\t@Bean\r\n\tpublic Jaxb2Marshaller marshaller() {\r\n\t\tJaxb2Marshaller marshaller = new Jaxb2Marshaller();\r\n\t\tmarshaller.setContextPaths(&quot;****ition&quot;, &quot;*****ion&quot;);\r\n\t\treturn marshaller;\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic SoapMessageFactory messageFactory() {\r\n\t\treturn new SaajSoapMessageFactory();\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic Wss4jSecurityInterceptor securityInterceptor() {\r\n\t\tWss4jSecurityInterceptor securityInterceptor = new Wss4jSecurityInterceptor();\r\n\t\tsecurityInterceptor.setSecurementUsername(username);\r\n\t\tsecurityInterceptor.setSecurementPassword(password);\r\n\t\tsecurityInterceptor.setSecurementPasswordType(WSConstants.PW_TEXT);\r\n\t\tsecurityInterceptor.setSecurementActions(WSHandlerConstants.USERNAME_TOKEN);\r\n\t\tsecurityInterceptor.setValidationActions(WSHandlerConstants.USERNAME_TOKEN);\r\n\t\tsecurityInterceptor.setValidationCallbackHandler(callbackHandler());\r\n\t\treturn securityInterceptor;\r\n\t}\r\n\t@Bean\r\n\tpublic WebServiceTemplate webServiceTemplate(Jaxb2Marshaller marshaller,\r\n\t\t\tWss4jSecurityInterceptor securityInterceptor) {\r\n\t\tWebServiceTemplate webServiceTemplate = new WebServiceTemplate();\r\n\t\twebServiceTemplate.setMarshaller(marshaller);\r\n\t\twebServiceTemplate.setUnmarshaller(marshaller);\r\n\t\t webServiceTemplate.setInterceptors(new ClientInterceptor[] { securityInterceptor });\r\n\r\n\t\treturn webServiceTemplate;\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic CallbackHandler callbackHandler() {\r\n\t\treturn callbacks -&gt; {\r\n\t\t\tfor (Callback callback : callbacks) {\r\n\t\t\t\tif (callback instanceof WSPasswordCallback) {\r\n\t\t\t\t\tWSPasswordCallback pc = (WSPasswordCallback) callback;\r\n\t\t\t\t\tif (username.equals(pc.getIdentifier())) {\r\n\t\t\t\t\t\tpc.setPassword(password);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\t\r\n\r\nLet me know what additional changes I need to make to fix the issue","title":"Unmarshalling exception while receiving response from soap","body":"<p>My xml soap response looks like mentioned below and I additionally I see unmarshalling exception org.springframework.oxm.UnmarshallingFailureException: JAXB unmarshalling exception; nested exception is javax.xml.bind.UnmarshalException: unexpected element (uri:&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;, local:&quot;Fault&quot;)</p>\n<pre><code>&lt;env:Envelope\n    xmlns:env=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;\n    xmlns:wsa=&quot;http://www.w3.org/2005/08/addressing&quot;&gt;\n    &lt;env:Header&gt;\n        &lt;wsa:Action&gt;process***&lt;/wsa:Action&gt;\n        &lt;wsa:MessageID&gt;urn:&lt;/wsa:MessageID&gt;\n        &lt;wsa:ReplyTo&gt;\n            &lt;wsa:Address&gt;http://www.w3.org/2005/08/addressing/anonymous&lt;/wsa:Address&gt;\n            &lt;wsa:ReferenceParameters&gt;\n                &lt;instra:tracking.ecid\n                    xmlns:instra=&quot;http://xmlns.oracle.com/sca/tracking/1.0&quot;&gt;0f285c\n                &lt;/instra:tracking.ecid&gt;\n                &lt;instra:tracking.FlowEventId\n                    xmlns:instra=&quot;http://xmlns.oracle.com/sca/tracking/1.0&quot;&gt;110\n                &lt;/instra:tracking.FlowEventId&gt;\n                &lt;instra:tracking.FlowId\n                    xmlns:instra=&quot;http://xmlns.oracle.com/sca/tracking/1.0&quot;&gt;233\n                &lt;/instra:tracking.FlowId&gt;\n                &lt;instra:tracking.CorrelationFlowId\n                    xmlns:instra=&quot;http://xmlns.oracle.com/sca/tracking/1.0&quot;&gt;0000OawEgND\n                &lt;/instra:tracking.CorrelationFlowId&gt;\n                &lt;instra:tracking.quiescing.SCAEntityId\n                    xmlns:instra=&quot;http://xmlns.oracle.com/sca/tracking/1.0&quot;&gt;90\n                &lt;/instra:tracking.quiescing.SCAEntityId&gt;\n            &lt;/wsa:ReferenceParameters&gt;\n        &lt;/wsa:ReplyTo&gt;\n        &lt;wsa:FaultTo&gt;\n            &lt;wsa:Address&gt;http://www.w3.org/2005/08/addressing/anonymous&lt;/wsa:Address&gt;\n        &lt;/wsa:FaultTo&gt;\n    &lt;/env:Header&gt;\n    &lt;env:Body&gt;\n        &lt;ResponseSolution\n            xmlns=&quot;http://www.openapplications.org/oagis/10&quot;\n            xmlns:client=&quot;http://xmlns.oracle.com/REQ2DELPHI&quot;\n            xmlns:ns1=&quot;http://xmlns.oracle.com/Delphi_Requisition_OAG&quot;\n            xmlns:ns2=&quot;http://docs.oasis-open.org/wsbpel/2.0/plnktype&quot;\n            xmlns:ns3=&quot;http://www.openapplications.org/oagis/9&quot;\n            xmlns:plnk=&quot;http://schemas.xmlsoap.org/ws/2003/05/partner-link/&quot;\n            xmlns:tns=&quot;http://www.openapplications.org/oagis/10&quot;\n            xmlns:wsdl=&quot;http://schemas.xmlsoap.org/wsdl/&quot;&gt;\n            &lt;tns:DataArea&gt;\n                &lt;tns:Respond&gt;\n                    &lt;tns:Area&gt;\n                        &lt;tns:Receiver&gt;\n                            &lt;tns:ID&gt;***&lt;/tns:ID&gt;\n                            &lt;tns:Conent&gt;****&lt;/tns:Conent&gt;\n                        &lt;/tns:Receiver&gt;\n                    &lt;/tns:Area&gt;\n                &lt;/tns:Respond&gt;\n            &lt;/tns:DataArea&gt;\n        &lt;/ResponseSolution&gt;\n    &lt;/env:Body&gt;\n&lt;/env:Envelope&gt;\n</code></pre>\n<p>Here is my webserviceConfig</p>\n<p>public class WebServiceConfig {</p>\n<pre><code>private String username;\nprivate String password;\n\n\n@Bean\npublic Jaxb2Marshaller marshaller() {\n    Jaxb2Marshaller marshaller = new Jaxb2Marshaller();\n    marshaller.setContextPaths(&quot;****ition&quot;, &quot;*****ion&quot;);\n    return marshaller;\n}\n\n@Bean\npublic SoapMessageFactory messageFactory() {\n    return new SaajSoapMessageFactory();\n}\n\n@Bean\npublic Wss4jSecurityInterceptor securityInterceptor() {\n    Wss4jSecurityInterceptor securityInterceptor = new Wss4jSecurityInterceptor();\n    securityInterceptor.setSecurementUsername(username);\n    securityInterceptor.setSecurementPassword(password);\n    securityInterceptor.setSecurementPasswordType(WSConstants.PW_TEXT);\n    securityInterceptor.setSecurementActions(WSHandlerConstants.USERNAME_TOKEN);\n    securityInterceptor.setValidationActions(WSHandlerConstants.USERNAME_TOKEN);\n    securityInterceptor.setValidationCallbackHandler(callbackHandler());\n    return securityInterceptor;\n}\n@Bean\npublic WebServiceTemplate webServiceTemplate(Jaxb2Marshaller marshaller,\n        Wss4jSecurityInterceptor securityInterceptor) {\n    WebServiceTemplate webServiceTemplate = new WebServiceTemplate();\n    webServiceTemplate.setMarshaller(marshaller);\n    webServiceTemplate.setUnmarshaller(marshaller);\n     webServiceTemplate.setInterceptors(new ClientInterceptor[] { securityInterceptor });\n\n    return webServiceTemplate;\n}\n\n@Bean\npublic CallbackHandler callbackHandler() {\n    return callbacks -&gt; {\n        for (Callback callback : callbacks) {\n            if (callback instanceof WSPasswordCallback) {\n                WSPasswordCallback pc = (WSPasswordCallback) callback;\n                if (username.equals(pc.getIdentifier())) {\n                    pc.setPassword(password);\n                    return;\n                }\n            }\n        }\n    };\n}\n</code></pre>\n<p>Let me know what additional changes I need to make to fix the issue</p>\n"},{"tags":["java","javafx","javafx-8","javafx-2"],"comments":[{"owner":{"account_id":969977,"reputation":30397,"user_id":992687,"accept_rate":96,"display_name":"The Unfun Cat"},"score":0,"creation_date":1349114161,"post_id":12678317,"comment_id":17110459,"body_markdown":"Do you mean that you want to see how many vertical pixels the horizontal scrollbar uses or where it is placed or what?","body":"Do you mean that you want to see how many vertical pixels the horizontal scrollbar uses or where it is placed or what?"},{"owner":{"account_id":24500,"reputation":3848,"user_id":62349,"accept_rate":90,"display_name":"dajood"},"score":3,"creation_date":1349114245,"post_id":12678317,"comment_id":17110489,"body_markdown":"I want to see how many vertical pixels the height of the ScrollBar is.","body":"I want to see how many vertical pixels the height of the ScrollBar is."}],"answers":[{"comments":[{"owner":{"account_id":4449311,"reputation":527,"user_id":3621749,"accept_rate":75,"display_name":"David"},"score":0,"creation_date":1483457897,"post_id":13577248,"comment_id":70100305,"body_markdown":"Works for me (JavaFX 8) in run-time –  [http://stackoverflow.com/questions/28904312/how-to-access-scrollbar-in-a-scrollpane-javafx](http://stackoverflow.com/questions/28904312/how-to-access-scrollbar-in-a-scrollpane-javafx).","body":"Works for me (JavaFX 8) in run-time –  <a href=\"http://stackoverflow.com/questions/28904312/how-to-access-scrollbar-in-a-scrollpane-javafx\">http://stackoverflow.com/questions/28904312/how-to-access-sc&zwnj;&#8203;rollbar-in-a-scrollp&zwnj;&#8203;ane-javafx</a>."}],"tags":[],"owner":{"account_id":974628,"reputation":1345,"user_id":996305,"accept_rate":54,"display_name":"ytw"},"comment_count":1,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1353989225,"creation_date":1353989225,"answer_id":13577248,"question_id":12678317,"body_markdown":"I think you can use the lookupAll() method of the Node class for find the scroll bars. \r\nhttp://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#lookupAll(java.lang.String)\r\n\r\nFor example:\r\n\r\n    package com.test;\r\n    \r\n    import java.util.Set;\r\n    import javafx.application.Application;\r\n    import javafx.geometry.Orientation;\r\n    import javafx.scene.Node;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.ScrollBar;\r\n    import javafx.scene.control.ScrollPane;\r\n    import javafx.scene.control.ScrollPaneBuilder;\r\n    import javafx.scene.text.Text;\r\n    import javafx.scene.text.TextBuilder;\r\n    import javafx.stage.Stage;\r\n    \r\n    public class JavaFxScrollPaneTest extends Application {\r\n    \r\n        public static void main(String[] args) {\r\n            launch(args);\r\n        }\r\n    \r\n        @Override\r\n        public void start(Stage primaryStage) {\r\n            String longString = &quot;The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog.&quot;;\r\n            Text longText = TextBuilder.create().text(longString).build();\r\n\r\n            ScrollPane scrollPane = ScrollPaneBuilder.create().content(longText).build();\r\n            primaryStage.setScene(new Scene(scrollPane, 400, 100));\r\n            primaryStage.show();\r\n    \r\n            Set&lt;Node&gt; nodes = scrollPane.lookupAll(&quot;.scroll-bar&quot;);\r\n            for (final Node node : nodes) {\r\n                if (node instanceof ScrollBar) {\r\n                    ScrollBar sb = (ScrollBar) node;\r\n                    if (sb.getOrientation() == Orientation.HORIZONTAL) {\r\n                        System.out.println(&quot;horizontal scrollbar visible = &quot; + sb.isVisible());\r\n                        System.out.println(&quot;width = &quot; + sb.getWidth());\r\n                        System.out.println(&quot;height = &quot; + sb.getHeight());\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }","title":"How to access the Scrollbars of a ScrollPane","body":"<p>I think you can use the lookupAll() method of the Node class for find the scroll bars. \n<a href=\"http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#lookupAll(java.lang.String)\" rel=\"noreferrer\">http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#lookupAll(java.lang.String)</a></p>\n\n<p>For example:</p>\n\n<pre><code>package com.test;\n\nimport java.util.Set;\nimport javafx.application.Application;\nimport javafx.geometry.Orientation;\nimport javafx.scene.Node;\nimport javafx.scene.Scene;\nimport javafx.scene.control.ScrollBar;\nimport javafx.scene.control.ScrollPane;\nimport javafx.scene.control.ScrollPaneBuilder;\nimport javafx.scene.text.Text;\nimport javafx.scene.text.TextBuilder;\nimport javafx.stage.Stage;\n\npublic class JavaFxScrollPaneTest extends Application {\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n\n    @Override\n    public void start(Stage primaryStage) {\n        String longString = \"The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog.\";\n        Text longText = TextBuilder.create().text(longString).build();\n\n        ScrollPane scrollPane = ScrollPaneBuilder.create().content(longText).build();\n        primaryStage.setScene(new Scene(scrollPane, 400, 100));\n        primaryStage.show();\n\n        Set&lt;Node&gt; nodes = scrollPane.lookupAll(\".scroll-bar\");\n        for (final Node node : nodes) {\n            if (node instanceof ScrollBar) {\n                ScrollBar sb = (ScrollBar) node;\n                if (sb.getOrientation() == Orientation.HORIZONTAL) {\n                    System.out.println(\"horizontal scrollbar visible = \" + sb.isVisible());\n                    System.out.println(\"width = \" + sb.getWidth());\n                    System.out.println(\"height = \" + sb.getHeight());\n                }\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2268692,"reputation":576,"user_id":1996673,"display_name":"Guedolino"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1358938982,"creation_date":1358938982,"answer_id":14478121,"question_id":12678317,"body_markdown":"This not is the best pratice, but works,\r\n\r\n    private boolean determineVerticalSBVisible(final ScrollPane scrollPane) {\r\n\t\ttry {\r\n\t\t\tfinal ScrollPaneSkin skin = (ScrollPaneSkin) scrollPane.getSkin();\r\n\t\t\tfinal Field field = skin.getClass().getDeclaredField(&quot;vsb&quot;);\r\n\t\t\tfield.setAccessible(true);\r\n\t\t\tfinal ScrollBar scrollBar = (ScrollBar) field.get(skin);\r\n\t\t\tfield.setAccessible(false);\r\n\t\t\treturn scrollBar.isVisible();\r\n\t\t} catch (final Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\nUse &quot;hsb&quot; for Horizontal ScrollBar.\r\n\r\nBest Regards,\r\nHenrique Guedes.","title":"How to access the Scrollbars of a ScrollPane","body":"<p>This not is the best pratice, but works,</p>\n\n<pre><code>private boolean determineVerticalSBVisible(final ScrollPane scrollPane) {\n    try {\n        final ScrollPaneSkin skin = (ScrollPaneSkin) scrollPane.getSkin();\n        final Field field = skin.getClass().getDeclaredField(\"vsb\");\n        field.setAccessible(true);\n        final ScrollBar scrollBar = (ScrollBar) field.get(skin);\n        field.setAccessible(false);\n        return scrollBar.isVisible();\n    } catch (final Exception e) {\n        e.printStackTrace();\n    }\n    return false;\n}\n</code></pre>\n\n<p>Use \"hsb\" for Horizontal ScrollBar.</p>\n\n<p>Best Regards,\nHenrique Guedes.</p>\n"},{"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1556623712,"post_id":55919560,"comment_id":98493659,"body_markdown":"runlater is unsafe: there&#39;s no guarantee _when_ it is called, just _sometime later_ which may or may not after the skin is attached. Listening to the scrollPane&#39;s skin property and do the lookup after the first change is safe.","body":"runlater is unsafe: there&#39;s no guarantee <i>when</i> it is called, just <i>sometime later</i> which may or may not after the skin is attached. Listening to the scrollPane&#39;s skin property and do the lookup after the first change is safe."},{"owner":{"account_id":3514618,"reputation":12090,"user_id":2938364,"accept_rate":88,"display_name":"Markus Weninger"},"score":1,"creation_date":1556624936,"post_id":55919560,"comment_id":98494278,"body_markdown":"@kleopatra Thanks for the input! I updated the code to not use `Platform.runLater()` but to listen to a change to the `skin` property.","body":"@kleopatra Thanks for the input! I updated the code to not use <code>Platform.runLater()</code> but to listen to a change to the <code>skin</code> property."}],"tags":[],"owner":{"account_id":3514618,"reputation":12090,"user_id":2938364,"accept_rate":88,"display_name":"Markus Weninger"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1556624855,"creation_date":1556622195,"answer_id":55919560,"question_id":12678317,"body_markdown":"Since the mentioned methods did not work for everybody (including me), I investigated it a bit more and found the source of the problem.\r\n\r\nIn general, both methods work, but only as soon as the [`ScrollPane`](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/control/ScrollPane.html)&#39;s [`skin`](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/control/Control.html#skinProperty) property has been set. In my case, `skin` was still `null` after loading my view using [`FXMLLoader`](https://docs.oracle.com/javase/8/javafx/api/javafx/fxml/FXMLLoader.html).\r\n\r\nBy delaying the call in case the `skin` property has not been initialized (using a one-shot listener) solves the problem.\r\n\r\nWorking boiler-plate code:\r\n\r\n    ScrollPane scrollPane;\r\n    // ...\r\n    if (scrollPane.getSkin() == null) {\r\n        // Skin is not yet attached, wait until skin is attached to access the scroll bars\r\n        ChangeListener&lt;Skin&lt;?&gt;&gt; skinChangeListener = new ChangeListener&lt;Skin&lt;?&gt;&gt;() {\r\n            @Override\r\n            public void changed(ObservableValue&lt;? extends Skin&lt;?&gt;&gt; observable, Skin&lt;?&gt; oldValue, Skin&lt;?&gt; newValue) {\r\n                scrollPane.skinProperty().removeListener(this);\r\n                accessScrollBar(scrollPane);\r\n            }\r\n        };\r\n        scrollPane.skinProperty().addListener(skinChangeListener);\r\n    } else {\r\n        // Skin is already attached, just access the scroll bars\r\n        accessScrollBar(scrollPane);\r\n    }\r\n\r\n    private void accessScrollBar(ScrollPane scrollPane) {\r\n        for (Node node : scrollPane.lookupAll(&quot;.scroll-bar&quot;)) {\r\n            if (node instanceof ScrollBar) {\r\n                ScrollBar scrollBar = (ScrollBar) node;\r\n                if (scrollBar.getOrientation() == Orientation.HORIZONTAL) {\r\n                    // Do something with the horizontal scroll bar\r\n\r\n                    // Example 1: Print scrollbar height\r\n                    // System.out.println(scrollBar.heightProperty().get());\r\n\r\n                    // Example 2: Listen to visibility changes\r\n                    // scrollBar.visibleProperty().addListener((observable, oldValue, newValue) -&gt; {\r\n                    //     if(newValue) {\r\n                    //         // Do something when scrollbar gets visible\r\n                    //     } else {\r\n                    //         // Do something when scrollbar gets hidden\r\n                    //     }\r\n                    // });\r\n                }\r\n                if (scrollBar.getOrientation() == Orientation.VERTICAL) {\r\n                    // Do something with the vertical scroll bar\r\n                }\r\n\r\n            }\r\n        }\r\n    }","title":"How to access the Scrollbars of a ScrollPane","body":"<p>Since the mentioned methods did not work for everybody (including me), I investigated it a bit more and found the source of the problem.</p>\n\n<p>In general, both methods work, but only as soon as the <a href=\"https://docs.oracle.com/javase/8/javafx/api/javafx/scene/control/ScrollPane.html\" rel=\"nofollow noreferrer\"><code>ScrollPane</code></a>'s <a href=\"https://docs.oracle.com/javase/8/javafx/api/javafx/scene/control/Control.html#skinProperty\" rel=\"nofollow noreferrer\"><code>skin</code></a> property has been set. In my case, <code>skin</code> was still <code>null</code> after loading my view using <a href=\"https://docs.oracle.com/javase/8/javafx/api/javafx/fxml/FXMLLoader.html\" rel=\"nofollow noreferrer\"><code>FXMLLoader</code></a>.</p>\n\n<p>By delaying the call in case the <code>skin</code> property has not been initialized (using a one-shot listener) solves the problem.</p>\n\n<p>Working boiler-plate code:</p>\n\n<pre><code>ScrollPane scrollPane;\n// ...\nif (scrollPane.getSkin() == null) {\n    // Skin is not yet attached, wait until skin is attached to access the scroll bars\n    ChangeListener&lt;Skin&lt;?&gt;&gt; skinChangeListener = new ChangeListener&lt;Skin&lt;?&gt;&gt;() {\n        @Override\n        public void changed(ObservableValue&lt;? extends Skin&lt;?&gt;&gt; observable, Skin&lt;?&gt; oldValue, Skin&lt;?&gt; newValue) {\n            scrollPane.skinProperty().removeListener(this);\n            accessScrollBar(scrollPane);\n        }\n    };\n    scrollPane.skinProperty().addListener(skinChangeListener);\n} else {\n    // Skin is already attached, just access the scroll bars\n    accessScrollBar(scrollPane);\n}\n\nprivate void accessScrollBar(ScrollPane scrollPane) {\n    for (Node node : scrollPane.lookupAll(\".scroll-bar\")) {\n        if (node instanceof ScrollBar) {\n            ScrollBar scrollBar = (ScrollBar) node;\n            if (scrollBar.getOrientation() == Orientation.HORIZONTAL) {\n                // Do something with the horizontal scroll bar\n\n                // Example 1: Print scrollbar height\n                // System.out.println(scrollBar.heightProperty().get());\n\n                // Example 2: Listen to visibility changes\n                // scrollBar.visibleProperty().addListener((observable, oldValue, newValue) -&gt; {\n                //     if(newValue) {\n                //         // Do something when scrollbar gets visible\n                //     } else {\n                //         // Do something when scrollbar gets hidden\n                //     }\n                // });\n            }\n            if (scrollBar.getOrientation() == Orientation.VERTICAL) {\n                // Do something with the vertical scroll bar\n            }\n\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14416252,"reputation":31,"user_id":10413629,"display_name":"Edward"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691093210,"creation_date":1691093210,"answer_id":76831320,"question_id":12678317,"body_markdown":"This also works, and I find it easier!\r\n\r\n        scrollPane.skinProperty().addListener((skinObservable, oldSkin, newSkin) -&gt; {\r\n\r\n           if(newSkin != null) {\r\n\r\n               ScrollBar hScrollBar = ((ScrollPaneSkin) newSkin).getHorizontalScrollBar();\r\n\r\n               ScrollBar vScrollBar = ((ScrollPaneSkin) newSkin).getVerticalScrollBar();\r\n\r\n               // Add event listeners to ScrollBars\r\n               hScrollBar.valueProperty().addListener((observable, oldValue, newValue) -&gt; {\r\n                   System.out.println(&quot;Horizontal Scroll Value: &quot; + newValue);\r\n               });\r\n\r\n               vScrollBar.valueProperty().addListener((observable, oldValue, newValue) -&gt; {\r\n                   System.out.println(&quot;Vertical Scroll Value: &quot; + newValue);\r\n               });\r\n\r\n          }\r\n\r\n      });","title":"How to access the Scrollbars of a ScrollPane","body":"<p>This also works, and I find it easier!</p>\n<pre><code>    scrollPane.skinProperty().addListener((skinObservable, oldSkin, newSkin) -&gt; {\n\n       if(newSkin != null) {\n\n           ScrollBar hScrollBar = ((ScrollPaneSkin) newSkin).getHorizontalScrollBar();\n\n           ScrollBar vScrollBar = ((ScrollPaneSkin) newSkin).getVerticalScrollBar();\n\n           // Add event listeners to ScrollBars\n           hScrollBar.valueProperty().addListener((observable, oldValue, newValue) -&gt; {\n               System.out.println(&quot;Horizontal Scroll Value: &quot; + newValue);\n           });\n\n           vScrollBar.valueProperty().addListener((observable, oldValue, newValue) -&gt; {\n               System.out.println(&quot;Vertical Scroll Value: &quot; + newValue);\n           });\n\n      }\n\n  });\n</code></pre>\n"}],"owner":{"account_id":24500,"reputation":3848,"user_id":62349,"accept_rate":90,"display_name":"dajood"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14055,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":55919560,"answer_count":4,"score":7,"last_activity_date":1691093210,"creation_date":1349113697,"question_id":12678317,"body_markdown":"I&#39;m trying to get some information about the `ScrollBar` components that are by standard included in a `ScrollPane`. Especially i&#39;m interested in reading the `height` of the horizontal `Scrollbar`. How can i reference it?","title":"How to access the Scrollbars of a ScrollPane","body":"<p>I'm trying to get some information about the <code>ScrollBar</code> components that are by standard included in a <code>ScrollPane</code>. Especially i'm interested in reading the <code>height</code> of the horizontal <code>Scrollbar</code>. How can i reference it?</p>\n"},{"tags":["java","spring","circuit-breaker","resilience4j","spring-cloud-circuitbreaker"],"answers":[{"tags":[],"owner":{"account_id":26105575,"reputation":56,"user_id":19800332,"display_name":"butterCup"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691093164,"creation_date":1690633122,"answer_id":76793538,"question_id":76562920,"body_markdown":"1. If no metrics are provided, CB uses the timeout mechanism to change its state. The circuit breaker uses fixed timeout value for each request on its own. If the external service call takes more time than the timeout value (example 100ms for each request) for responding, then it moves to OPEN after tripping.\r\n\r\n2. One possibility is if Retry is used in circuit breaker implementation. CB transition from CLOSED to HALF OPEN directly instead of OPEN due to retry logic to handle failure calls.","title":"Resilience4j goes from CLOSED to HALF_OPEN directly without going to OPEN","body":"<ol>\n<li><p>If no metrics are provided, CB uses the timeout mechanism to change its state. The circuit breaker uses fixed timeout value for each request on its own. If the external service call takes more time than the timeout value (example 100ms for each request) for responding, then it moves to OPEN after tripping.</p>\n</li>\n<li><p>One possibility is if Retry is used in circuit breaker implementation. CB transition from CLOSED to HALF OPEN directly instead of OPEN due to retry logic to handle failure calls.</p>\n</li>\n</ol>\n"}],"owner":{"account_id":24057171,"reputation":73,"user_id":18034851,"display_name":"GlidingSwords997"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691093164,"creation_date":1687853932,"question_id":76562920,"body_markdown":"In a circuit breaker setup using resilience4j, the Circuit Breaker goes from CLOSED to HALF_OPEN directly without going to OPEN. Not just this, this happens when we are not providing the success of failure metrics to it. Two things are not clear here:\r\n1. How can the Circuit Breaker change its state when no metrics is provided to the same about the success or failure?\r\n2. What is the behavior of the circuit breaker going from CLOSED to HALF_OPEN, as theoretically it must go from CLOSED to OPEN and then to HALF_OPEN after the waiting period ?","title":"Resilience4j goes from CLOSED to HALF_OPEN directly without going to OPEN","body":"<p>In a circuit breaker setup using resilience4j, the Circuit Breaker goes from CLOSED to HALF_OPEN directly without going to OPEN. Not just this, this happens when we are not providing the success of failure metrics to it. Two things are not clear here:</p>\n<ol>\n<li>How can the Circuit Breaker change its state when no metrics is provided to the same about the success or failure?</li>\n<li>What is the behavior of the circuit breaker going from CLOSED to HALF_OPEN, as theoretically it must go from CLOSED to OPEN and then to HALF_OPEN after the waiting period ?</li>\n</ol>\n"},{"tags":["java","string","string-formatting"],"comments":[{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1527330807,"post_id":50541802,"comment_id":88094818,"body_markdown":"Is it always that format and that output?","body":"Is it always that format and that output?"},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":2,"creation_date":1527330961,"post_id":50541802,"comment_id":88094858,"body_markdown":"How do *you* make decision that result should be `Warsaw02.jpg`? What logic are you using?","body":"How do <i>you</i> make decision that result should be <code>Warsaw02.jpg</code>? What logic are you using?"},{"owner":{"account_id":13653489,"reputation":11,"user_id":9850693,"display_name":"KKasi"},"score":0,"creation_date":1527331055,"post_id":50541802,"comment_id":88094878,"body_markdown":"The result is based on the date and time and the format is &lt;place&gt;&lt;number based on time and date&gt;.&lt;exe&gt;","body":"The result is based on the date and time and the format is &lt;place&gt;&lt;number based on time and date&gt;.&lt;exe&gt;"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":2,"creation_date":1527331088,"post_id":50541802,"comment_id":88094887,"body_markdown":"@KKasi That doesn&#39;t make sense, what&#39;s the date/time got to do with the how you determine the output?","body":"@KKasi That doesn&#39;t make sense, what&#39;s the date/time got to do with the how you determine the output?"},{"owner":{"account_id":13653489,"reputation":11,"user_id":9850693,"display_name":"KKasi"},"score":0,"creation_date":1527331172,"post_id":50541802,"comment_id":88094910,"body_markdown":"The time and date mentioned in the first string","body":"The time and date mentioned in the first string"},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":2,"creation_date":1527331191,"post_id":50541802,"comment_id":88094916,"body_markdown":"How is `02` related to `2013-09-05 14:08:15`?","body":"How is <code>02</code> related to <code>2013-09-05 14:08:15</code>?"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1527331761,"post_id":50541802,"comment_id":88095050,"body_markdown":"@KKasi Your question is in danger of been closed for been unclear, we need more information about how the `02` is generated","body":"@KKasi Your question is in danger of been closed for been unclear, we need more information about how the <code>02</code> is generated"},{"owner":{"account_id":13653489,"reputation":11,"user_id":9850693,"display_name":"KKasi"},"score":0,"creation_date":1527332318,"post_id":50541802,"comment_id":88095188,"body_markdown":"02 is generated on the basis of time and date, for eg:&quot;photo. jpg, Warsaw, 2013-09-05 14:08:15&quot; is Warsaw02.jpg and &quot;my-Friends.png, Warsaw, 2013-09-05 14:07:13&quot; is Warsaw01.png.","body":"02 is generated on the basis of time and date, for eg:&quot;photo. jpg, Warsaw, 2013-09-05 14:08:15&quot; is Warsaw02.jpg and &quot;my-Friends.png, Warsaw, 2013-09-05 14:07:13&quot; is Warsaw01.png."},{"owner":{"account_id":11425126,"reputation":2515,"user_id":8375503,"display_name":"kumesana"},"score":0,"creation_date":1527334699,"post_id":50541802,"comment_id":88095845,"body_markdown":"You need to set the explanation in the question. You also need to do it better. Tell that you have a list of such strings, and that you compare the dates of the pictures that are in the same city, to give them a number that orders them historically.","body":"You need to set the explanation in the question. You also need to do it better. Tell that you have a list of such strings, and that you compare the dates of the pictures that are in the same city, to give them a number that orders them historically."}],"answers":[{"tags":[],"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691091505,"creation_date":1527339345,"answer_id":50543018,"question_id":50541802,"body_markdown":"Design a little class to describe each photo. At least your class should have instance fields for place name and date and time (use a `LocalDateTime` from `java.time` unless time zone is relevant). Write a constructor or method to convert your original strings into such objects. Use a regular expression for parsing the strings.\r\n\r\nGroup your objects by city name and sort each group chronologically. Decide what you want to do if there are more than 100 photos from one city, since the two-digit numbering will no longer be sufficient. Iterate through the sorted objects to format your strings. Use a NumberFormat or DecimalFormat for formatting the numbers.\r\n\r\nYou will learn more from doing the coding yourself, and I hope it will also be fun and give you satisfaction, so I am not taking that part away from you.","title":"Reformat a string in java, including the extension","body":"<p>Design a little class to describe each photo. At least your class should have instance fields for place name and date and time (use a <code>LocalDateTime</code> from <code>java.time</code> unless time zone is relevant). Write a constructor or method to convert your original strings into such objects. Use a regular expression for parsing the strings.</p>\n<p>Group your objects by city name and sort each group chronologically. Decide what you want to do if there are more than 100 photos from one city, since the two-digit numbering will no longer be sufficient. Iterate through the sorted objects to format your strings. Use a NumberFormat or DecimalFormat for formatting the numbers.</p>\n<p>You will learn more from doing the coding yourself, and I hope it will also be fun and give you satisfaction, so I am not taking that part away from you.</p>\n"}],"owner":{"account_id":13653489,"reputation":11,"user_id":9850693,"display_name":"KKasi"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":318,"favorite_count":0,"down_vote_count":7,"up_vote_count":1,"answer_count":1,"score":-6,"last_activity_date":1691091505,"creation_date":1527330744,"question_id":50541802,"body_markdown":"How do I format a string in java? \r\n\r\nFor eg, how to convert &quot;photo. jpg, Warsaw, 2013-09-05 14:08:15&quot; to &quot;Warsaw02.jpg&quot;?\r\n\r\nThe format is “photoname.extension, city_name, yyyy—mm—dd hh:n-m: ss&quot; and should be converted to &quot;city name number based on the time and place taken.extension&quot;.\r\n","title":"Reformat a string in java, including the extension","body":"<p>How do I format a string in java? </p>\n\n<p>For eg, how to convert \"photo. jpg, Warsaw, 2013-09-05 14:08:15\" to \"Warsaw02.jpg\"?</p>\n\n<p>The format is “photoname.extension, city_name, yyyy—mm—dd hh:n-m: ss\" and should be converted to \"city name number based on the time and place taken.extension\".</p>\n"},{"tags":["java","spring-boot","spring-mvc","weaviate"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1691169453,"post_id":76831154,"comment_id":135460524,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"owner":{"account_id":28050621,"reputation":1,"user_id":21426589,"display_name":"Jubair Samir"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691091459,"creation_date":1691091459,"question_id":76831154,"body_markdown":"       `Map&lt;String, Object&gt; dataSchema = new HashMap&lt;&gt;();\r\n        dataSchema.put(&quot;labelName&quot;, &quot;Images&quot;);\r\n        dataSchema.put(&quot;image&quot;, encodedString);\r\n        Result&lt;WeaviateObject&gt; result = client.data().creator()\r\n        .withClassName(&quot;Test&quot;)\r\n        .withProperties(dataSchema)\r\n        .run();\r\n\r\n        if (result.hasErrors()) {\r\n        System.out.println(result.getError());\r\n        return;\r\n        }\r\n        System.out.println(result.getResult());\r\n    }`\r\n\r\n**[ERROR] =&gt; WeaviateError(statusCode=422, messages=[WeaviateErrorMessage(message=invalid object: module &#39;img2vec-neural&#39;: imageFields not present, throwable=null)])**\r\n\r\nIf I post to a class which does not exist, it should create the class by it&#39;s own but every time it is giving me the above mentioned error. \r\n\r\nIt was suppose to create that class, vectorize and stored the image","title":"Weaviate is not automatically creating a schema","body":"<pre><code>   `Map&lt;String, Object&gt; dataSchema = new HashMap&lt;&gt;();\n    dataSchema.put(&quot;labelName&quot;, &quot;Images&quot;);\n    dataSchema.put(&quot;image&quot;, encodedString);\n    Result&lt;WeaviateObject&gt; result = client.data().creator()\n    .withClassName(&quot;Test&quot;)\n    .withProperties(dataSchema)\n    .run();\n\n    if (result.hasErrors()) {\n    System.out.println(result.getError());\n    return;\n    }\n    System.out.println(result.getResult());\n}`\n</code></pre>\n<p><strong>[ERROR] =&gt; WeaviateError(statusCode=422, messages=[WeaviateErrorMessage(message=invalid object: module 'img2vec-neural': imageFields not present, throwable=null)])</strong></p>\n<p>If I post to a class which does not exist, it should create the class by it's own but every time it is giving me the above mentioned error.</p>\n<p>It was suppose to create that class, vectorize and stored the image</p>\n"},{"tags":["java","mysql","jdbc","encoding","character-encoding"],"comments":[{"owner":{"account_id":6975503,"reputation":716,"user_id":5350399,"display_name":"Adarsh"},"score":0,"creation_date":1480949170,"post_id":40976571,"comment_id":69162979,"body_markdown":"This is because of character set mismatch for sure, as a try you can recreate the table and insert some sample data and then try to update again.","body":"This is because of character set mismatch for sure, as a try you can recreate the table and insert some sample data and then try to update again."},{"owner":{"account_id":4624783,"reputation":885,"user_id":3748908,"accept_rate":52,"display_name":"user3748908"},"score":0,"creation_date":1480949840,"post_id":40976571,"comment_id":69163423,"body_markdown":"@AdarshGangadharan I&#39;ve just tried dropping and recreating the table, then inserting a row and updating it. Same result","body":"@AdarshGangadharan I&#39;ve just tried dropping and recreating the table, then inserting a row and updating it. Same result"},{"owner":{"account_id":5107904,"reputation":4007,"user_id":4095476,"display_name":"Pavel Gatnar"},"score":0,"creation_date":1480951580,"post_id":40976571,"comment_id":69164643,"body_markdown":"what is the full hex sequence? it seams there is an error in it...","body":"what is the full hex sequence? it seams there is an error in it..."},{"owner":{"account_id":4624783,"reputation":885,"user_id":3748908,"accept_rate":52,"display_name":"user3748908"},"score":0,"creation_date":1480952140,"post_id":40976571,"comment_id":69165025,"body_markdown":"@PavelGatnar I don&#39;t think there is anything wrong with the hex sequence. It&#39;s just for times the hex for GRINNING FACE WITH SMILING EYES, \\xF0\\x9F\\x98\\x81","body":"@PavelGatnar I don&#39;t think there is anything wrong with the hex sequence. It&#39;s just for times the hex for GRINNING FACE WITH SMILING EYES, \\xF0\\x9F\\x98\\x81"},{"owner":{"account_id":6975503,"reputation":716,"user_id":5350399,"display_name":"Adarsh"},"score":0,"creation_date":1480954804,"post_id":40976571,"comment_id":69166665,"body_markdown":"Do you have any trigger on it? Please provide the show create table results.","body":"Do you have any trigger on it? Please provide the show create table results."},{"owner":{"account_id":529143,"reputation":136619,"user_id":1766831,"display_name":"Rick James"},"score":1,"creation_date":1480979436,"post_id":40976571,"comment_id":69179682,"body_markdown":"Please provide `SHOW CREATE TABLE` for the table in question.  And provide the JDBC connection string.","body":"Please provide <code>SHOW CREATE TABLE</code> for the table in question.  And provide the JDBC connection string."},{"owner":{"account_id":4624783,"reputation":885,"user_id":3748908,"accept_rate":52,"display_name":"user3748908"},"score":1,"creation_date":1481014328,"post_id":40976571,"comment_id":69191107,"body_markdown":"@RickJames Added `SHOW CREATE TABLE`. The JDBC connection string is right above it","body":"@RickJames Added <code>SHOW CREATE TABLE</code>. The JDBC connection string is right above it"}],"answers":[{"tags":[],"owner":{"account_id":10717514,"reputation":460,"user_id":7887590,"display_name":"mingchau"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1615558195,"creation_date":1548744112,"answer_id":54415239,"question_id":40976571,"body_markdown":"A similar question occurred to me with a text field.\r\n**(MySQL 1366 error incorrect string value)**\r\n\r\nI confirmed the database, table, column character set were all `utf8mb4`.\r\n\r\nThe problem was solved by changing the field type to `longtext`.\r\n\r\nHope this could help someone.","title":"Already using utf8mb4 but getting 1366: Incorrect string value: &#39;\\xF0\\x9F\\x98\\x81\\xF0\\x9F...&#39;","body":"<p>A similar question occurred to me with a text field.\n<strong>(MySQL 1366 error incorrect string value)</strong></p>\n<p>I confirmed the database, table, column character set were all <code>utf8mb4</code>.</p>\n<p>The problem was solved by changing the field type to <code>longtext</code>.</p>\n<p>Hope this could help someone.</p>\n"},{"tags":[],"owner":{"account_id":26704090,"reputation":1,"user_id":22335027,"display_name":"Wizard"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691091276,"creation_date":1691091276,"answer_id":76831145,"question_id":40976571,"body_markdown":"it is necessary to check up what type costs for the table and for a concrete field. As I understand it, if the configuration is applied after the table has been created, then changing the character type of the database does not affect the table and field settings. I changed the settings for the database type, the table and the specific field where I wrote the value from utf-8.\r\nqueries will look like this:\r\n\r\n    ALTER TABLE `dbName`.`TableName` \r\n    CHARACTER SET = utf8mb4 ;\r\nit was for the table. For field:\r\n\r\n    ALTER TABLE `TableName` \r\n    CHANGE COLUMN `columname` `columname` type CHARACTER SET &#39;utf8mb4&#39; NOT NULL ; \r\n\r\nalso a Collation related error may occur when using functions and possibly in other cases. To fix, change the table field Collation to one that is compatible. Error example:\r\n\r\n&gt; Error Code: 1267. Illegal mix of collations (utf8mb4_0900_ai_ci,IMPLICIT) and (utf8mb4_general_ci,IMPLICIT) for operation &#39;=&#39;\r\n\r\n","title":"Already using utf8mb4 but getting 1366: Incorrect string value: &#39;\\xF0\\x9F\\x98\\x81\\xF0\\x9F...&#39;","body":"<p>it is necessary to check up what type costs for the table and for a concrete field. As I understand it, if the configuration is applied after the table has been created, then changing the character type of the database does not affect the table and field settings. I changed the settings for the database type, the table and the specific field where I wrote the value from utf-8.\nqueries will look like this:</p>\n<pre><code>ALTER TABLE `dbName`.`TableName` \nCHARACTER SET = utf8mb4 ;\n</code></pre>\n<p>it was for the table. For field:</p>\n<pre><code>ALTER TABLE `TableName` \nCHANGE COLUMN `columname` `columname` type CHARACTER SET 'utf8mb4' NOT NULL ; \n</code></pre>\n<p>also a Collation related error may occur when using functions and possibly in other cases. To fix, change the table field Collation to one that is compatible. Error example:</p>\n<blockquote>\n<p>Error Code: 1267. Illegal mix of collations (utf8mb4_0900_ai_ci,IMPLICIT) and (utf8mb4_general_ci,IMPLICIT) for operation '='</p>\n</blockquote>\n"}],"owner":{"account_id":4624783,"reputation":885,"user_id":3748908,"accept_rate":52,"display_name":"user3748908"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2220,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1691091276,"creation_date":1480948091,"question_id":40976571,"body_markdown":"All answers to the issue &quot;Incorrect string value&quot; point to using utf8mb4. However, I&#39;m still using that I still get that error.\r\n\r\nRunning\r\n\r\n    SELECT CCSA.character_set_name, collation_name FROM information_schema.`TABLES` T,\r\n           information_schema.`COLLATION_CHARACTER_SET_APPLICABILITY` CCSA\r\n    WHERE CCSA.collation_name = T.table_collation\r\n      AND T.table_schema = &quot;test&quot;\r\n      AND T.table_name = &quot;products&quot;;\r\n\r\nproduces\r\n\r\n    character_set_name\tcollation_name\r\n    utf8mb4\t\t\t\tutf8mb4_unicode_ci\r\n\r\nAnd running\r\n\r\n    SELECT character_set_name, collation_name FROM information_schema.`COLUMNS` \r\n    WHERE table_schema = &quot;test&quot;\r\n      AND table_name = &quot;products&quot;\r\n      AND column_name = &quot;description&quot;;\r\n\r\nproduces the same result. Then, when I try to update the column `description`:\r\nUPDATE `test`.`products` SET `description`=&#39;Esperienza molto negativa... &#128513;&#128513;&#128513;&#128513;SCONSIGLIATISSIMO&#39; WHERE `id`=&#39;50&#39;\r\n\r\nI get the abovementioned error\r\n\r\n    1366: Incorrect string value: &#39;\\xF0\\x9F\\x98\\x81\\xF0\\x9F...&#39; for column &#39;description&#39; at row 1\r\n\r\nI&#39;ve tried this update both through a jdbc connection `jdbc:mysql://localhost:3306/test?useUnicode=yes;characterEncoding=utf8;` and directly through MySQLWorkbench. I don&#39;t know what else to try of look for. What am I missing?\r\n\r\n**EDIT**\r\nOutput of `SHOW CREATE TABLE`\r\n\r\n    CREATE TABLE `products` (\r\n      `id` int(11) NOT NULL AUTO_INCREMENT,\r\n      `manufacturerId_fk` int(11) NOT NULL,\r\n      `type_fk` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT &#39;TEST&#39;,\r\n      `ownerId_fk` int(11) DEFAULT NULL,\r\n      `rating_fk` int(11) NOT NULL,\r\n      `description` varchar(2000) COLLATE utf8mb4_unicode_ci DEFAULT NULL,\r\n      `authorName` varchar(75) COLLATE utf8mb4_unicode_ci DEFAULT NULL,\r\n      `authorUrl` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL,\r\n      `created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\r\n      `updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\r\n      PRIMARY KEY (`id`),\r\n      UNIQUE KEY `manufacturer_authorUrl_UNIQUE` (`manufacturerId_fk`,`authorUrl`),\r\n      KEY `fk_products_manufacturers_idx` (`manufacturerId_fk`),\r\n      KEY `fk_products_users_idx` (`ownerId_fk`),\r\n      KEY `fk_products_validRatings_idx` (`rating_fk`),\r\n      KEY `fk_products_productTypes` (`type_fk`),\r\n      CONSTRAINT `fk_products_productTypes` FOREIGN KEY (`type_fk`) REFERENCES `productTypes` (`type`) ON DELETE NO ACTION ON UPDATE NO ACTION,\r\n      CONSTRAINT `fk_products_manufacturers` FOREIGN KEY (`manufacturerId_fk`) REFERENCES `manufacturers` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,\r\n      CONSTRAINT `fk_products_validRatings` FOREIGN KEY (`rating_fk`) REFERENCES `validRatings` (`value`) ON DELETE NO ACTION ON UPDATE NO ACTION\r\n    ) ENGINE=InnoDB AUTO_INCREMENT=418 DEFAULT CHARSET=utf8mb4","title":"Already using utf8mb4 but getting 1366: Incorrect string value: &#39;\\xF0\\x9F\\x98\\x81\\xF0\\x9F...&#39;","body":"<p>All answers to the issue \"Incorrect string value\" point to using utf8mb4. However, I'm still using that I still get that error.</p>\n\n<p>Running</p>\n\n<pre><code>SELECT CCSA.character_set_name, collation_name FROM information_schema.`TABLES` T,\n       information_schema.`COLLATION_CHARACTER_SET_APPLICABILITY` CCSA\nWHERE CCSA.collation_name = T.table_collation\n  AND T.table_schema = \"test\"\n  AND T.table_name = \"products\";\n</code></pre>\n\n<p>produces</p>\n\n<pre><code>character_set_name  collation_name\nutf8mb4             utf8mb4_unicode_ci\n</code></pre>\n\n<p>And running</p>\n\n<pre><code>SELECT character_set_name, collation_name FROM information_schema.`COLUMNS` \nWHERE table_schema = \"test\"\n  AND table_name = \"products\"\n  AND column_name = \"description\";\n</code></pre>\n\n<p>produces the same result. Then, when I try to update the column <code>description</code>:\nUPDATE <code>test</code>.<code>products</code> SET <code>description</code>='Esperienza molto negativa... 😁😁😁😁SCONSIGLIATISSIMO' WHERE <code>id</code>='50'</p>\n\n<p>I get the abovementioned error</p>\n\n<pre><code>1366: Incorrect string value: '\\xF0\\x9F\\x98\\x81\\xF0\\x9F...' for column 'description' at row 1\n</code></pre>\n\n<p>I've tried this update both through a jdbc connection <code>jdbc:mysql://localhost:3306/test?useUnicode=yes;characterEncoding=utf8;</code> and directly through MySQLWorkbench. I don't know what else to try of look for. What am I missing?</p>\n\n<p><strong>EDIT</strong>\nOutput of <code>SHOW CREATE TABLE</code></p>\n\n<pre><code>CREATE TABLE `products` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `manufacturerId_fk` int(11) NOT NULL,\n  `type_fk` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'TEST',\n  `ownerId_fk` int(11) DEFAULT NULL,\n  `rating_fk` int(11) NOT NULL,\n  `description` varchar(2000) COLLATE utf8mb4_unicode_ci DEFAULT NULL,\n  `authorName` varchar(75) COLLATE utf8mb4_unicode_ci DEFAULT NULL,\n  `authorUrl` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL,\n  `created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `manufacturer_authorUrl_UNIQUE` (`manufacturerId_fk`,`authorUrl`),\n  KEY `fk_products_manufacturers_idx` (`manufacturerId_fk`),\n  KEY `fk_products_users_idx` (`ownerId_fk`),\n  KEY `fk_products_validRatings_idx` (`rating_fk`),\n  KEY `fk_products_productTypes` (`type_fk`),\n  CONSTRAINT `fk_products_productTypes` FOREIGN KEY (`type_fk`) REFERENCES `productTypes` (`type`) ON DELETE NO ACTION ON UPDATE NO ACTION,\n  CONSTRAINT `fk_products_manufacturers` FOREIGN KEY (`manufacturerId_fk`) REFERENCES `manufacturers` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,\n  CONSTRAINT `fk_products_validRatings` FOREIGN KEY (`rating_fk`) REFERENCES `validRatings` (`value`) ON DELETE NO ACTION ON UPDATE NO ACTION\n) ENGINE=InnoDB AUTO_INCREMENT=418 DEFAULT CHARSET=utf8mb4\n</code></pre>\n"},{"tags":["java","file","try-catch","java.util.scanner"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":2,"creation_date":1691083419,"post_id":76830316,"comment_id":135447061,"body_markdown":"Please post, formatted as code, your sample input file","body":"Please post, formatted as code, your sample input file"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691083552,"post_id":76830316,"comment_id":135447085,"body_markdown":"I don&#39;t see any names there..?","body":"I don&#39;t see any names there..?"},{"owner":{"account_id":29089886,"reputation":31,"user_id":22284018,"display_name":"JustNeedHelp"},"score":0,"creation_date":1691083586,"post_id":76830316,"comment_id":135447091,"body_markdown":"In this example, the words &quot;test&quot; are considered names","body":"In this example, the words &quot;test&quot; are considered names"}],"answers":[{"comments":[{"owner":{"account_id":29089886,"reputation":31,"user_id":22284018,"display_name":"JustNeedHelp"},"score":0,"creation_date":1691089116,"post_id":76830753,"comment_id":135448152,"body_markdown":"What is &quot;\\n\\\\d+(?:\\\\.\\\\d+)?%&quot; and how does it relate to the pattern?","body":"What is &quot;\\n\\\\d+(?:\\\\.\\\\d+)?%&quot; and how does it relate to the pattern?"},{"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"score":1,"creation_date":1691089733,"post_id":76830753,"comment_id":135448276,"body_markdown":"That is to match the results/grades line. I will add an explanation to the answer.","body":"That is to match the results/grades line. I will add an explanation to the answer."},{"owner":{"account_id":29089886,"reputation":31,"user_id":22284018,"display_name":"JustNeedHelp"},"score":0,"creation_date":1691092658,"post_id":76830753,"comment_id":135448843,"body_markdown":"It works as expected, but it still always outputs no matching result. Upon entering &quot;Test&quot; &quot;3&quot; and &quot;Female&quot;, it prints &quot;No matching result found&quot; despite the fact that the information is in the file. I tried changing a few things but haven&#39;t had any luck.","body":"It works as expected, but it still always outputs no matching result. Upon entering &quot;Test&quot; &quot;3&quot; and &quot;Female&quot;, it prints &quot;No matching result found&quot; despite the fact that the information is in the file. I tried changing a few things but haven&#39;t had any luck."},{"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"score":1,"creation_date":1691094054,"post_id":76830753,"comment_id":135449130,"body_markdown":"For the sample file given I can&#39;t reproduce your issue. I am getting all three results. Please Update your question with the code you are curently using with the modification you made and check if the file is really formated the same way as your sample","body":"For the sample file given I can&#39;t reproduce your issue. I am getting all three results. Please Update your question with the code you are curently using with the modification you made and check if the file is really formated the same way as your sample"},{"owner":{"account_id":29089886,"reputation":31,"user_id":22284018,"display_name":"JustNeedHelp"},"score":1,"creation_date":1691094458,"post_id":76830753,"comment_id":135449215,"body_markdown":"I&#39;m using the sample file, and still coming up nothing. That&#39;s strange... I&#39;ll examine it a bit more and see if I missed something. Thank you for your help.","body":"I&#39;m using the sample file, and still coming up nothing. That&#39;s strange... I&#39;ll examine it a bit more and see if I missed something. Thank you for your help."},{"owner":{"account_id":29089886,"reputation":31,"user_id":22284018,"display_name":"JustNeedHelp"},"score":0,"creation_date":1691165877,"post_id":76830753,"comment_id":135459843,"body_markdown":"Even using the exact code and exact sample file, I&#39;m still coming up nothing. What did you input to get results?","body":"Even using the exact code and exact sample file, I&#39;m still coming up nothing. What did you input to get results?"}],"tags":[],"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"comment_count":6,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691091107,"creation_date":1691087355,"answer_id":76830753,"question_id":76830316,"body_markdown":"You don&#39;t need multiple scanners to get the user input. You can reuse one. The same applies for searching in the file, you only need one scanner. Apart from that, your file seems to be well formed, so you can use the `Scanner.findAll` method and pass a pattern that you can construct from the user&#39;s input. Something like below should get you started. Note: the example has no error handling, and also no case insensitive search. You can improve this yourself \r\n\r\n    import java.io.File;\r\n    import java.io.FileNotFoundException;\r\n    import java.util.Scanner;\r\n    import java.util.regex.MatchResult;\r\n    import java.util.regex.Pattern;\r\n    \r\n    public class Example {\r\n    \r\n        public static void main(String[] args) throws FileNotFoundException {\r\n    \r\n            Scanner userInput = new Scanner(System.in);\r\n    \r\n            System.out.println(&quot;Please enter Student&#39;s full name below.&quot;);\r\n            var stuName = userInput.nextLine();\r\n    \r\n            System.out.println(&quot;Please enter Student&#39;s age below.&quot;);\r\n            var stuAge = userInput.nextInt();\r\n            userInput.nextLine();   //this is not an oversight but intentional and necessary to be able to read the next input.\r\n    \r\n            System.out.println(&quot;Please enter Student&#39;s gender below (Female or Male).&quot;);\r\n            var stuGender = userInput.nextLine();\r\n    \r\n            Scanner fileContent = new Scanner(new File(&quot;Example.txt&quot;));\r\n            //construct pattern from user input and regex for percentage\r\n            Pattern pattern = Pattern.compile(stuName + &quot;\\n&quot; + stuAge + &quot;\\n&quot; + stuGender + &quot;\\n&quot; + &quot;\\\\d+(?:\\\\.\\\\d+)?%&quot;);\r\n            //use findAll method and return first match if present\r\n            fileContent.findAll(pattern)\r\n                       .map(MatchResult::group)\r\n                       .findFirst()\r\n                       .ifPresentOrElse(\r\n                               (value) -&gt; System.out.println(&quot;Found matching result: \\n&quot; + value),\r\n                               ()      -&gt; System.out.println(&quot;No matching result found&quot;));\r\n    \r\n        }\r\n    }\r\n\r\nEdit: \r\n\r\n&gt; What is &quot;\\n\\\\\\\\d+(?:\\\\\\\\.\\\\\\\\d+)?%&quot; and how does it relate to the pattern? \r\n\r\nI have separeted the new line char from the regex, to reduce confusion and chnged it to : \r\n\r\n    `&quot;\\n&quot; + &quot;\\\\d+(?:\\\\.\\\\d+)?%&quot;` \r\n\r\nThe `\\\\d+(?:\\\\.\\\\d+)?%` part is a regex that matches percentage for marks. \r\n\r\n - `\\\\d+`  match one or more digits\r\n - `(?:\\\\.\\\\d+)?` optionaly followed by a dot and one or more digits after the dot\r\n - `%` match the percent character\r\n\r\nSo, possible matches could look like, where x is is any digit\r\n\r\n - `x%`          ex. 7%\r\n - `xx%`         ex. 27%\r\n - `xx.x%`       ex. 97.4%\r\n - `xx.xx%`      ex. 84.32%\r\n\r\n\r\n``","title":"How to find a specific series of inputs in a file and print out results","body":"<p>You don't need multiple scanners to get the user input. You can reuse one. The same applies for searching in the file, you only need one scanner. Apart from that, your file seems to be well formed, so you can use the <code>Scanner.findAll</code> method and pass a pattern that you can construct from the user's input. Something like below should get you started. Note: the example has no error handling, and also no case insensitive search. You can improve this yourself</p>\n<pre><code>import java.io.File;\nimport java.io.FileNotFoundException;\nimport java.util.Scanner;\nimport java.util.regex.MatchResult;\nimport java.util.regex.Pattern;\n\npublic class Example {\n\n    public static void main(String[] args) throws FileNotFoundException {\n\n        Scanner userInput = new Scanner(System.in);\n\n        System.out.println(&quot;Please enter Student's full name below.&quot;);\n        var stuName = userInput.nextLine();\n\n        System.out.println(&quot;Please enter Student's age below.&quot;);\n        var stuAge = userInput.nextInt();\n        userInput.nextLine();   //this is not an oversight but intentional and necessary to be able to read the next input.\n\n        System.out.println(&quot;Please enter Student's gender below (Female or Male).&quot;);\n        var stuGender = userInput.nextLine();\n\n        Scanner fileContent = new Scanner(new File(&quot;Example.txt&quot;));\n        //construct pattern from user input and regex for percentage\n        Pattern pattern = Pattern.compile(stuName + &quot;\\n&quot; + stuAge + &quot;\\n&quot; + stuGender + &quot;\\n&quot; + &quot;\\\\d+(?:\\\\.\\\\d+)?%&quot;);\n        //use findAll method and return first match if present\n        fileContent.findAll(pattern)\n                   .map(MatchResult::group)\n                   .findFirst()\n                   .ifPresentOrElse(\n                           (value) -&gt; System.out.println(&quot;Found matching result: \\n&quot; + value),\n                           ()      -&gt; System.out.println(&quot;No matching result found&quot;));\n\n    }\n}\n</code></pre>\n<p>Edit:</p>\n<blockquote>\n<p>What is &quot;\\n\\\\d+(?:\\\\.\\\\d+)?%&quot; and how does it relate to the pattern?</p>\n</blockquote>\n<p>I have separeted the new line char from the regex, to reduce confusion and chnged it to :</p>\n<pre><code>`&quot;\\n&quot; + &quot;\\\\d+(?:\\\\.\\\\d+)?%&quot;` \n</code></pre>\n<p>The <code>\\\\d+(?:\\\\.\\\\d+)?%</code> part is a regex that matches percentage for marks.</p>\n<ul>\n<li><code>\\\\d+</code>  match one or more digits</li>\n<li><code>(?:\\\\.\\\\d+)?</code> optionaly followed by a dot and one or more digits after the dot</li>\n<li><code>%</code> match the percent character</li>\n</ul>\n<p>So, possible matches could look like, where x is is any digit</p>\n<ul>\n<li><code>x%</code>          ex. 7%</li>\n<li><code>xx%</code>         ex. 27%</li>\n<li><code>xx.x%</code>       ex. 97.4%</li>\n<li><code>xx.xx%</code>      ex. 84.32%</li>\n</ul>\n<p>``</p>\n"}],"owner":{"account_id":29089886,"reputation":31,"user_id":22284018,"display_name":"JustNeedHelp"},"comment_count":3,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"closed_date":1691509387,"accepted_answer_id":76830753,"answer_count":1,"score":-1,"last_activity_date":1691091107,"creation_date":1691083179,"question_id":76830316,"body_markdown":"I&#39;m trying to create something that&#39;s basically a way for me to search for a certain persons results on another test without having to scroll through everything. It takes inputs, such as the name, age, and gender of whatever &quot;student&quot; I need to find, then it&#39;s supposed to find that exact student and print the results underneath.\r\n\r\nI have the file set up so that when someone takes the test, their results are printed like so:\r\n\r\n Name                                         \r\n Age                  \r\n Gender                   \r\n Results                 \r\n\r\nI want my code to find the name that&#39;s inputted, then see if the age underneath the name matches the input, then see if the gender underneath that matches the input. If all of these are correct, it should print out the results. \r\n\r\n```\r\n                    //These ask for the name, age, and gender\r\n\r\n                    Scanner enterName = new Scanner(System.in);\r\n                    System.out.println(&quot;Please enter Student&#39;s full name below.&quot;);\r\n                    var stuName = enterName.nextLine();\r\n\r\n                    Scanner enterAge = new Scanner(System.in);\r\n                    System.out.println(&quot;Please enter Student&#39;s age below.&quot;);\r\n                    var stuAge = enterAge.nextInt();\r\n\r\n                    Scanner enterGender = new Scanner(System.in);\r\n                    System.out.println(&quot;Please enter Student&#39;s gender below (Female or Male).&quot;);\r\n                    var stuGender = enterGender.nextLine();\r\n\r\n\r\n//These scanners search for the information\r\n                    Scanner usersName = new Scanner(new File(&quot;Example.txt&quot;));\r\n                    Scanner usersAge = new Scanner(new File(&quot;Example.txt&quot;));\r\n                    Scanner usersGender = new Scanner(new File(&quot;Example.txt&quot;));\r\n                    Scanner usersScore = new Scanner(new File(&quot;Example.txt&quot;));\r\n                    var searchName = usersName.nextLine();\r\n//This shoulder search for the information and come back true if it&#39;s found\r\n                    try {\r\n                              while (usersName.hasNextLine()) {\r\n                                        searchName = usersName.nextLine();\r\n                                        if (searchName.equals(stuName)) {\r\n                                                  break;\r\n                                        }\r\n                              }\r\n\r\n                    } catch (Exception e) {\r\n                              if (!usersName.equals(stuName)) {\r\n                                        System.out.println(&quot;Student not found&quot;);\r\n                              }\r\n                    }\r\n\r\n                    var searchAge = usersName.nextLine();\r\n                    if(!searchAge.equals(stuAge)) {\r\n                              System.out.println(&quot;Student not found&quot;);\r\n                              System.exit(1);\r\n                    }\r\n                    var searchGen = usersGender.nextLine();\r\n                    if(!searchGen.equals(stuGender)) {\r\n                              System.out.println(&quot;Student not found&quot;);\r\n                              System.exit(1);\r\n                    }\r\n                    if(searchName.equals(stuName) &amp;&amp; usersAge.equals (stuAge) &amp;&amp; usersGender.equals(stuGender)) {\r\n                              var searchScore = usersScore.nextDouble();\r\n                              System.out.println(&quot;The student &quot; + stuName + &quot;&#39;s score was: &quot; + searchScore);\r\n                              System.exit(1);\r\n                    } else {\r\n                              System.out.println(&quot;Student not found&quot;);\r\n                              System.exit(1);\r\n                    }\r\n\r\n```\r\n\r\nSomewhere along the way it gets lost, and it always prints &quot;Student not found&quot;, even when I know those particular results are in the file. \r\n\r\nSample File\r\n-----------\r\n\r\n```\r\nTest\r\n1\r\nFemale\r\n93.0%\r\n \r\nTest\r\n2\r\nFemale\r\n97.0%\r\n \r\nTest\r\n3\r\nFemale\r\n100.0%\r\n```","title":"How to find a specific series of inputs in a file and print out results","body":"<p>I'm trying to create something that's basically a way for me to search for a certain persons results on another test without having to scroll through everything. It takes inputs, such as the name, age, and gender of whatever &quot;student&quot; I need to find, then it's supposed to find that exact student and print the results underneath.</p>\n<p>I have the file set up so that when someone takes the test, their results are printed like so:</p>\n<p>Name<br />\nAge<br />\nGender<br />\nResults</p>\n<p>I want my code to find the name that's inputted, then see if the age underneath the name matches the input, then see if the gender underneath that matches the input. If all of these are correct, it should print out the results.</p>\n<pre><code>                    //These ask for the name, age, and gender\n\n                    Scanner enterName = new Scanner(System.in);\n                    System.out.println(&quot;Please enter Student's full name below.&quot;);\n                    var stuName = enterName.nextLine();\n\n                    Scanner enterAge = new Scanner(System.in);\n                    System.out.println(&quot;Please enter Student's age below.&quot;);\n                    var stuAge = enterAge.nextInt();\n\n                    Scanner enterGender = new Scanner(System.in);\n                    System.out.println(&quot;Please enter Student's gender below (Female or Male).&quot;);\n                    var stuGender = enterGender.nextLine();\n\n\n//These scanners search for the information\n                    Scanner usersName = new Scanner(new File(&quot;Example.txt&quot;));\n                    Scanner usersAge = new Scanner(new File(&quot;Example.txt&quot;));\n                    Scanner usersGender = new Scanner(new File(&quot;Example.txt&quot;));\n                    Scanner usersScore = new Scanner(new File(&quot;Example.txt&quot;));\n                    var searchName = usersName.nextLine();\n//This shoulder search for the information and come back true if it's found\n                    try {\n                              while (usersName.hasNextLine()) {\n                                        searchName = usersName.nextLine();\n                                        if (searchName.equals(stuName)) {\n                                                  break;\n                                        }\n                              }\n\n                    } catch (Exception e) {\n                              if (!usersName.equals(stuName)) {\n                                        System.out.println(&quot;Student not found&quot;);\n                              }\n                    }\n\n                    var searchAge = usersName.nextLine();\n                    if(!searchAge.equals(stuAge)) {\n                              System.out.println(&quot;Student not found&quot;);\n                              System.exit(1);\n                    }\n                    var searchGen = usersGender.nextLine();\n                    if(!searchGen.equals(stuGender)) {\n                              System.out.println(&quot;Student not found&quot;);\n                              System.exit(1);\n                    }\n                    if(searchName.equals(stuName) &amp;&amp; usersAge.equals (stuAge) &amp;&amp; usersGender.equals(stuGender)) {\n                              var searchScore = usersScore.nextDouble();\n                              System.out.println(&quot;The student &quot; + stuName + &quot;'s score was: &quot; + searchScore);\n                              System.exit(1);\n                    } else {\n                              System.out.println(&quot;Student not found&quot;);\n                              System.exit(1);\n                    }\n\n</code></pre>\n<p>Somewhere along the way it gets lost, and it always prints &quot;Student not found&quot;, even when I know those particular results are in the file.</p>\n<h2>Sample File</h2>\n<pre><code>Test\n1\nFemale\n93.0%\n \nTest\n2\nFemale\n97.0%\n \nTest\n3\nFemale\n100.0%\n</code></pre>\n"},{"tags":["java","spring","spring-boot","caching"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1691062049,"post_id":76827395,"comment_id":135442216,"body_markdown":"You&#39;re missing a dependency for JAXB, which could indicate that you might be missing a starter in your dependency list.","body":"You&#39;re missing a dependency for JAXB, which could indicate that you might be missing a starter in your dependency list."}],"answers":[{"comments":[{"owner":{"account_id":239746,"reputation":6175,"user_id":509565,"accept_rate":69,"display_name":"lrkwz"},"score":0,"creation_date":1697829788,"post_id":76831115,"comment_id":136333491,"body_markdown":"Better you go to jakarta.xml.bind:jakarta.xml.bind-api:4.0.1, the 2.3.2 hasn&#39;t the correct class (javax/xml/bind/JAXBException.class)","body":"Better you go to jakarta.xml.bind:jakarta.xml.bind-api:4.0.1, the 2.3.2 hasn&#39;t the correct class (javax/xml/bind/JAXBException.class)"}],"tags":[],"owner":{"account_id":16333736,"reputation":11,"user_id":11796450,"display_name":"farmoush"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691091090,"creation_date":1691090989,"answer_id":76831115,"question_id":76827395,"body_markdown":"You have moved from Spring 2 to Spring 3, and Spring 3 needs at least JDK 17, so I assume you already have JDK 17 or more since you can run the project.\r\nThis leads us to the main issue:\r\nThe logs show an error in this &quot;JAXBException&quot;,\r\nFor Java 11 or more, javax.xml.bind package its removed from default classpath.\r\n\r\nTo solve the issue, add this to pom.xml if you use Maven:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\r\n        &lt;version&gt;2.3.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\r\n        &lt;version&gt;2.3.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nOr add this to build.gradle if you use Gradle:\r\n\r\n    implementation &#39;org.glassfish.jaxb:jaxb-runtime:2.3.2&#39;\r\n    implementation &#39;jakarta.xml.bind:jakarta.xml.bind-api:2.3.2&#39;","title":"Caused by: java.lang.ClassNotFoundException: jakarta.xml.bind.JAXBException","body":"<p>You have moved from Spring 2 to Spring 3, and Spring 3 needs at least JDK 17, so I assume you already have JDK 17 or more since you can run the project.\nThis leads us to the main issue:\nThe logs show an error in this &quot;JAXBException&quot;,\nFor Java 11 or more, javax.xml.bind package its removed from default classpath.</p>\n<p>To solve the issue, add this to pom.xml if you use Maven:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\n    &lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\n    &lt;version&gt;2.3.2&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\n    &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\n    &lt;version&gt;2.3.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Or add this to build.gradle if you use Gradle:</p>\n<pre><code>implementation 'org.glassfish.jaxb:jaxb-runtime:2.3.2'\nimplementation 'jakarta.xml.bind:jakarta.xml.bind-api:2.3.2'\n</code></pre>\n"}],"owner":{"account_id":9782480,"reputation":57,"user_id":7249929,"display_name":"Nani"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":772,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1691091090,"creation_date":1691060017,"question_id":76827395,"body_markdown":"I am upgrading Springboot version from 2.x to 3.x and facing below error while running the application. Could you please suggest.\r\n\r\nFull Log Error:\r\n```\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: jakarta/xml/bind/JAXBException\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1155)\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734)\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:312)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1306)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1295)\r\nCaused by: java.lang.NoClassDefFoundError: jakarta/xml/bind/JAXBException\r\n```","title":"Caused by: java.lang.ClassNotFoundException: jakarta.xml.bind.JAXBException","body":"<p>I am upgrading Springboot version from 2.x to 3.x and facing below error while running the application. Could you please suggest.</p>\n<p>Full Log Error:</p>\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: jakarta/xml/bind/JAXBException\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1155)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734)\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:312)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295)\nCaused by: java.lang.NoClassDefFoundError: jakarta/xml/bind/JAXBException\n</code></pre>\n"},{"tags":["java","weblogic","jbpm","named-query"],"comments":[{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1691089587,"post_id":76820627,"comment_id":135448252,"body_markdown":"What are you trying to do? This sounds like a [xy problem](https://xyproblem.info/). Why do you need to know how often it&#39;s called and why do you want to configure anything here?","body":"What are you trying to do? This sounds like a <a href=\"https://xyproblem.info/\" rel=\"nofollow noreferrer\">xy problem</a>. Why do you need to know how often it&#39;s called and why do you want to configure anything here?"},{"owner":{"account_id":29143294,"reputation":11,"user_id":22325796,"display_name":"Marius"},"score":1,"creation_date":1691141712,"post_id":76820627,"comment_id":135454740,"body_markdown":"Our DB is getting flooded by this query: \nselect processins0_.InstanceId as col_0_0_ from ProcessInstanceInfo\nprocessins0_ where (:1 in(select eventtypes1_.element from EventTypes\neventtypes1_ where processins0_.InstanceId=eventtypes1_.InstanceId))\n\nWe are trying to understand what events fire the execution of the aforementioned query.","body":"Our DB is getting flooded by this query:  select processins0_.InstanceId as col_0_0_ from ProcessInstanceInfo processins0_ where (:1 in(select eventtypes1_.element from EventTypes eventtypes1_ where processins0_.InstanceId=eventtypes1_.InstanceId))  We are trying to understand what events fire the execution of the aforementioned query."}],"owner":{"account_id":29143294,"reputation":11,"user_id":22325796,"display_name":"Marius"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691089686,"creation_date":1690984604,"question_id":76820627,"body_markdown":"Looking at the class `JpaProcessPersistenceContext` I noticed this method `getProcessInstancesWaitingForEvent` which uses this named query `ProcessInstancesWaitingForEvent`. The aforementioned method should be used by the `JPASignalManager` to cache the instances but I cannot understand how frequently it s called. Is there any configuration that can be done?\r\n\r\nTried to see if there is any documentation about this, all I could find was this comment in the class:\r\n\r\n    /**\r\n     * This method is used by the {@link JPASignalManager} in order to load {@link ProcessInstance} instances\r\n     * into the {@link ProcessInstanceManager} cache so that they can then be signalled. \r\n     * &lt;/p&gt;\r\n     * Unfortunately, with regards to locking, the method is not always called during a transaction, which means \r\n     * that including logic to lock the query will cause exceptions and is not feasible. \r\n     * &lt;/p&gt;\r\n     * Because the {@link org.drools.core.command.SingleSessionCommandService} design is based around a synchronized execute(...) method,\r\n     * it&#39;s not possible for one thread to create a process instance while another thread simultaneously tries to \r\n     * signal it. That means that a \r\n     * &lt;a href=&quot;http://en.wikipedia.org/wiki/Isolation_%28database_systems%29#Phantom_reads&quot;&gt;phantom read&lt;/a&gt; \r\n     * race condition, that might be caused by a lack of pessimistic locking on this query, isn&#39;t possible. \r\n     * &lt;/p&gt;\r\n     * Of course, if you&#39;re using multiple ksessions to simultaneoulsy interact with the same process instance, \r\n     * all bets are off. This however is true for almost everything involving process instances, so that it&#39;s not \r\n     * worth discussing. \r\n     * &lt;/p&gt;\r\n     */\r\n","title":"jBPM 5.2, getProcessInstancesWaitingForEvent method","body":"<p>Looking at the class <code>JpaProcessPersistenceContext</code> I noticed this method <code>getProcessInstancesWaitingForEvent</code> which uses this named query <code>ProcessInstancesWaitingForEvent</code>. The aforementioned method should be used by the <code>JPASignalManager</code> to cache the instances but I cannot understand how frequently it s called. Is there any configuration that can be done?</p>\n<p>Tried to see if there is any documentation about this, all I could find was this comment in the class:</p>\n<pre><code>/**\n * This method is used by the {@link JPASignalManager} in order to load {@link ProcessInstance} instances\n * into the {@link ProcessInstanceManager} cache so that they can then be signalled. \n * &lt;/p&gt;\n * Unfortunately, with regards to locking, the method is not always called during a transaction, which means \n * that including logic to lock the query will cause exceptions and is not feasible. \n * &lt;/p&gt;\n * Because the {@link org.drools.core.command.SingleSessionCommandService} design is based around a synchronized execute(...) method,\n * it's not possible for one thread to create a process instance while another thread simultaneously tries to \n * signal it. That means that a \n * &lt;a href=&quot;http://en.wikipedia.org/wiki/Isolation_%28database_systems%29#Phantom_reads&quot;&gt;phantom read&lt;/a&gt; \n * race condition, that might be caused by a lack of pessimistic locking on this query, isn't possible. \n * &lt;/p&gt;\n * Of course, if you're using multiple ksessions to simultaneoulsy interact with the same process instance, \n * all bets are off. This however is true for almost everything involving process instances, so that it's not \n * worth discussing. \n * &lt;/p&gt;\n */\n</code></pre>\n"},{"tags":["java","selenium-webdriver","junit","cucumber","cucumber-java"],"comments":[{"owner":{"account_id":4895787,"reputation":10858,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":0,"creation_date":1691094972,"post_id":76830971,"comment_id":135449287,"body_markdown":"It is not possible. Cucumber-JVM doesn&#39;t support retrying.","body":"It is not possible. Cucumber-JVM doesn&#39;t support retrying."},{"owner":{"account_id":29154833,"reputation":1,"user_id":22334850,"display_name":"user22334850"},"score":0,"creation_date":1691152646,"post_id":76830971,"comment_id":135456802,"body_markdown":"Sad. What about the solution that uses Junit5? Would it be possible to do it that way if I upgraded Junit?","body":"Sad. What about the solution that uses Junit5? Would it be possible to do it that way if I upgraded Junit?"},{"owner":{"account_id":4895787,"reputation":10858,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":0,"creation_date":1691189739,"post_id":76830971,"comment_id":135463500,"body_markdown":"Nope. That solution also executes cucumber twice. Generally speaking, I suspect nobody contributed this feature because it&#39;s pretty complicated. Detecting and retrying failed operations in the step however is pretty easy. Though personally I prefer to make the system under test stable so retrying isn&#39;t needed or make the tests wait for the appropriate condition if the action under test is asynchronous.","body":"Nope. That solution also executes cucumber twice. Generally speaking, I suspect nobody contributed this feature because it&#39;s pretty complicated. Detecting and retrying failed operations in the step however is pretty easy. Though personally I prefer to make the system under test stable so retrying isn&#39;t needed or make the tests wait for the appropriate condition if the action under test is asynchronous."}],"owner":{"account_id":29154833,"reputation":1,"user_id":22334850,"display_name":"user22334850"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":114,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691089510,"creation_date":1691089510,"question_id":76830971,"body_markdown":"I have a Java project that uses Cucumber 7, Maven surefire, and JUnit 4. It is a project requirement to be able to rerun a failed feature file immediately after it fails (not rerun after the entire test run as done normally). So the flow would be something like:\r\n1. Run BeforeAll()\r\n2. Run Before()\r\n3. Run test\r\n4. If test fails, rerun until MAX_RETRY(2) is reached\r\n5. Run After()\r\n6. Do Steps 2-5 until all tests are run\r\n7. Run AfterAll()\r\n\r\nI&#39;ve seen people using Cucumber listeners for similar-ish problems but that is not an option for me as I&#39;m on 7.3.3 and the EventListener is deprecated (AFAIK). Also read something about an [extended Cucumber runner](https://www.linkedin.com/pulse/deconstruction-cucumber-junit-runner-behaviour-sumon-dey) but is outdated. [This](https://stackoverflow.com/questions/73394344/how-to-rerun-a-particular-cucumber-scenario-when-it-fails-with-cucumber) is the closest response I found but uses Junit5. I&#39;ve tried using the `rerunFailingTestsCount` parameter through Maven Surefire but that reruns the features after the entire test suite is run. If you have any other suggestions, I would be very grateful. Thanks!\r\n\r\nThis is my current Cucumber Runner (without rerun implemented). I run the main() to execute my tests.\r\n```\r\n@RunWith(Cucumber.class)\r\n@CucumberOptions(\r\n        tags=&quot;@xxx&quot;,\r\n        plugin = {&quot;pretty&quot;},\r\n        features = {&quot;classpath:features&quot;},\r\n        glue = {&quot;StepDefinitions&quot;}\r\n)\r\n\r\npublic class Runner {\r\n    private static String[] options = {\r\n            &quot;classpath:Features&quot;,\r\n            &quot;--glue&quot;, &quot;StepDefinitions&quot;,\r\n            &quot;--tags&quot;, &quot;@xxx&quot;,\r\n            &quot;--plugin&quot;, &quot;pretty&quot;,\r\n    };\r\n\r\n    public static void main(String[] args) {\r\n            Stream&lt;String&gt; cucumberOptions = Stream.concat(Stream.of(defaultOptions), Stream.of(args));\r\n            ClassLoader contextClassLoader = Thread.currentThread().getContextClassLoader();\r\n            byte exitstatus = Main.run(cucumberOptions.toArray(String[]::new), contextClassLoader);\r\n\r\n            // other stuff done for custom pdf reports\r\n    }\r\n\r\n}\r\n```","title":"Cucumber for Java - Immediately rerunning a Gherkin feature file after it fails","body":"<p>I have a Java project that uses Cucumber 7, Maven surefire, and JUnit 4. It is a project requirement to be able to rerun a failed feature file immediately after it fails (not rerun after the entire test run as done normally). So the flow would be something like:</p>\n<ol>\n<li>Run BeforeAll()</li>\n<li>Run Before()</li>\n<li>Run test</li>\n<li>If test fails, rerun until MAX_RETRY(2) is reached</li>\n<li>Run After()</li>\n<li>Do Steps 2-5 until all tests are run</li>\n<li>Run AfterAll()</li>\n</ol>\n<p>I've seen people using Cucumber listeners for similar-ish problems but that is not an option for me as I'm on 7.3.3 and the EventListener is deprecated (AFAIK). Also read something about an <a href=\"https://www.linkedin.com/pulse/deconstruction-cucumber-junit-runner-behaviour-sumon-dey\" rel=\"nofollow noreferrer\">extended Cucumber runner</a> but is outdated. <a href=\"https://stackoverflow.com/questions/73394344/how-to-rerun-a-particular-cucumber-scenario-when-it-fails-with-cucumber\">This</a> is the closest response I found but uses Junit5. I've tried using the <code>rerunFailingTestsCount</code> parameter through Maven Surefire but that reruns the features after the entire test suite is run. If you have any other suggestions, I would be very grateful. Thanks!</p>\n<p>This is my current Cucumber Runner (without rerun implemented). I run the main() to execute my tests.</p>\n<pre><code>@RunWith(Cucumber.class)\n@CucumberOptions(\n        tags=&quot;@xxx&quot;,\n        plugin = {&quot;pretty&quot;},\n        features = {&quot;classpath:features&quot;},\n        glue = {&quot;StepDefinitions&quot;}\n)\n\npublic class Runner {\n    private static String[] options = {\n            &quot;classpath:Features&quot;,\n            &quot;--glue&quot;, &quot;StepDefinitions&quot;,\n            &quot;--tags&quot;, &quot;@xxx&quot;,\n            &quot;--plugin&quot;, &quot;pretty&quot;,\n    };\n\n    public static void main(String[] args) {\n            Stream&lt;String&gt; cucumberOptions = Stream.concat(Stream.of(defaultOptions), Stream.of(args));\n            ClassLoader contextClassLoader = Thread.currentThread().getContextClassLoader();\n            byte exitstatus = Main.run(cucumberOptions.toArray(String[]::new), contextClassLoader);\n\n            // other stuff done for custom pdf reports\n    }\n\n}\n</code></pre>\n"},{"tags":["java","user-interface","javafx","color-picker"],"answers":[{"comments":[{"owner":{"account_id":28852866,"reputation":35,"user_id":22098389,"display_name":"vperse"},"score":0,"creation_date":1691089879,"post_id":76830915,"comment_id":135448299,"body_markdown":"Thanks you so much. Clever idea! I&#39;ve been thinking to add the invisible ColorPicker but didn&#39;t know you could trigger it&#39;s dialog launch within code. This pretty much solves this question but now I&#39;m faced with another issue. Would you know how I could delay execution of the code until after I choose the color from the window because right now it sets the rectangle&#39;s color before the color is chosen resulting in setting the previous chosen color every time.","body":"Thanks you so much. Clever idea! I&#39;ve been thinking to add the invisible ColorPicker but didn&#39;t know you could trigger it&#39;s dialog launch within code. This pretty much solves this question but now I&#39;m faced with another issue. Would you know how I could delay execution of the code until after I choose the color from the window because right now it sets the rectangle&#39;s color before the color is chosen resulting in setting the previous chosen color every time."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1691090201,"post_id":76830915,"comment_id":135448353,"body_markdown":"@vperse I&#39;m not sure I really understand what you are asking there (in particular about it setting the rectangle&#39;s color to the previous chosen color). But *&quot;execution of the code until after I choose the color&quot;*: can&#39;t you just put the code you want to execute in an `onAction` handler for the color picker?","body":"@vperse I&#39;m not sure I really understand what you are asking there (in particular about it setting the rectangle&#39;s color to the previous chosen color). But <i>&quot;execution of the code until after I choose the color&quot;</i>: can&#39;t you just put the code you want to execute in an <code>onAction</code> handler for the color picker?"},{"owner":{"account_id":28852866,"reputation":35,"user_id":22098389,"display_name":"vperse"},"score":1,"creation_date":1691090606,"post_id":76830915,"comment_id":135448438,"body_markdown":"Thank you so much man. It works perfectly now. You are the goat!","body":"Thank you so much man. It works perfectly now. You are the goat!"}],"tags":[],"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1691089219,"creation_date":1691088827,"answer_id":76830915,"question_id":76830818,"body_markdown":"I think you are asking how to make the color picker&#39;s popup appear without actually showing the color picker control. You need to have the color picker in the scene graph for it to work; however you can just make it invisible. Note that it will still be placed in the scene graph and its location will determine the location of the popup.\r\n\r\nHere&#39;s a minimal example:\r\n\r\n\r\n    import javafx.application.Application;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.ColorPicker;\r\n    import javafx.scene.layout.Pane;\r\n    import javafx.scene.paint.Color;\r\n    import javafx.scene.shape.Rectangle;\r\n    import javafx.stage.Stage;\r\n    \r\n    public class HelloApplication extends Application {\r\n        @Override\r\n        public void start(Stage stage) {\r\n            Rectangle rect = new Rectangle(100, 20, 200, 40);\r\n            ColorPicker picker = new ColorPicker();\r\n            picker.setVisible(false);\r\n            Pane root = new Pane(rect, picker);\r\n            rect.setStroke(Color.BLACK);\r\n            rect.fillProperty().bind(picker.valueProperty());\r\n            rect.setOnMouseClicked(e -&gt; {\r\n                // move the (invisible) color picker so the popup appears at the mouse:\r\n                picker.relocate(e.getX(), e.getY() - picker.getHeight());\r\n                picker.show();\r\n            });\r\n            Scene scene = new Scene(root, 400, 80);\r\n            stage.setScene(scene);\r\n            stage.show();\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            launch();\r\n        }\r\n    }\r\n\r\nHere is how this looks at startup:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nand here is the result of clicking on the rectangle:\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/wqvb1.png\r\n  [2]: https://i.stack.imgur.com/NBWUD.png","title":"JavaFX open Color Picker&#39;s Dialog on Custom Action Event","body":"<p>I think you are asking how to make the color picker's popup appear without actually showing the color picker control. You need to have the color picker in the scene graph for it to work; however you can just make it invisible. Note that it will still be placed in the scene graph and its location will determine the location of the popup.</p>\n<p>Here's a minimal example:</p>\n<pre><code>import javafx.application.Application;\nimport javafx.scene.Scene;\nimport javafx.scene.control.ColorPicker;\nimport javafx.scene.layout.Pane;\nimport javafx.scene.paint.Color;\nimport javafx.scene.shape.Rectangle;\nimport javafx.stage.Stage;\n\npublic class HelloApplication extends Application {\n    @Override\n    public void start(Stage stage) {\n        Rectangle rect = new Rectangle(100, 20, 200, 40);\n        ColorPicker picker = new ColorPicker();\n        picker.setVisible(false);\n        Pane root = new Pane(rect, picker);\n        rect.setStroke(Color.BLACK);\n        rect.fillProperty().bind(picker.valueProperty());\n        rect.setOnMouseClicked(e -&gt; {\n            // move the (invisible) color picker so the popup appears at the mouse:\n            picker.relocate(e.getX(), e.getY() - picker.getHeight());\n            picker.show();\n        });\n        Scene scene = new Scene(root, 400, 80);\n        stage.setScene(scene);\n        stage.show();\n    }\n\n    public static void main(String[] args) {\n        launch();\n    }\n}\n</code></pre>\n<p>Here is how this looks at startup:</p>\n<p><a href=\"https://i.stack.imgur.com/wqvb1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wqvb1.png\" alt=\"enter image description here\" /></a></p>\n<p>and here is the result of clicking on the rectangle:</p>\n<p><a href=\"https://i.stack.imgur.com/NBWUD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NBWUD.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":28852866,"reputation":35,"user_id":22098389,"display_name":"vperse"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76830915,"answer_count":1,"score":1,"last_activity_date":1691089219,"creation_date":1691087901,"question_id":76830818,"body_markdown":"I want to launch the Color Picker&#39;s Dialog window and get the selected color as output. \r\nIn my case I want this window to launch from clicking on a Rectangle object instead of the ColorPicker component. \r\n\r\n\r\nI&#39;m having trouble finding out what the class/method is for launching this window since all online resources just point me to ColorPicker examples which I want to avoid. \r\nI tried checking the documentation without any luck so if you guys know how to help me I would be very grateful to you.","title":"JavaFX open Color Picker&#39;s Dialog on Custom Action Event","body":"<p>I want to launch the Color Picker's Dialog window and get the selected color as output.\nIn my case I want this window to launch from clicking on a Rectangle object instead of the ColorPicker component.</p>\n<p>I'm having trouble finding out what the class/method is for launching this window since all online resources just point me to ColorPicker examples which I want to avoid.\nI tried checking the documentation without any luck so if you guys know how to help me I would be very grateful to you.</p>\n"},{"tags":["java","spring-boot","cors"],"answers":[{"comments":[{"owner":{"account_id":21953043,"reputation":65,"user_id":16232010,"display_name":"fabbbles"},"score":0,"creation_date":1644555234,"post_id":71064113,"comment_id":125643290,"body_markdown":"Thanks for the response antey, would you mind elaborating please as I don&#39;t quite get your suggestion.","body":"Thanks for the response antey, would you mind elaborating please as I don&#39;t quite get your suggestion."},{"owner":{"account_id":22798565,"reputation":54,"user_id":16951710,"display_name":"antey13"},"score":0,"creation_date":1644586877,"post_id":71064113,"comment_id":125652467,"body_markdown":"I mean modifying @GetMapping(path=&quot;yourPath&quot;, produces = MediaType.APPLICATION_JSON)","body":"I mean modifying @GetMapping(path=&quot;yourPath&quot;, produces = MediaType.APPLICATION_JSON)"}],"tags":[],"owner":{"account_id":22798565,"reputation":54,"user_id":16951710,"display_name":"antey13"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644491705,"creation_date":1644491705,"answer_id":71064113,"question_id":71063984,"body_markdown":"Could be an issue with consumes/produces, try adding produces = MediaType.APPLICATION_JSON or other media type and adjust your request headers as well.","title":"CORS error on some API endpoints but not others in same controller","body":"<p>Could be an issue with consumes/produces, try adding produces = MediaType.APPLICATION_JSON or other media type and adjust your request headers as well.</p>\n"}],"owner":{"account_id":21953043,"reputation":65,"user_id":16232010,"display_name":"fabbbles"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2257,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1691089127,"creation_date":1644491145,"question_id":71063984,"body_markdown":"I have a controller with multiple API endpoints. Most endpoints work as expected but there are 2 which throw a CORS error when deployed on a remote server. \r\n\r\n&gt; Access to fetch at &#39;BACKEND URL&#39; from origin &#39;FRONTEND URL&#39; has been blocked by CORS policy: No &#39;Access-Control-Allow-Origin&#39; header is present on the requested resource. If an opaque response serves your needs, set the request&#39;s mode to &#39;no-cors&#39; to fetch the resource with CORS disabled.\r\n\r\nI have omitted some code below for brevity. \r\n\r\nThe API `/api/person/uid/14` works as expected in both localhost and on a remote server.\r\n\r\nThe API `/person/email/john@email.com` works on localhost, but returns an error when deployed on a remote server.\r\n\r\nBoth frontend and backend are hosted on the same machine and sit on the same domain. The only difference in the URL are the ports (frontend 3000; backend API 8082). \r\n\r\nHaving said that, the first API (and many others in this controller) work on both local and the remote server, only the email and mobileNumber validation APIs are throwing a CORS error, which makes this really puzzling.\r\n\r\nAny thoughts are appreciated.\r\n   \r\n**PersonController.java**    \r\n\r\n    @CrossOrigin(origins = &quot;*&quot;)\r\n    @RestController\r\n    @RequestMapping(&quot;/api&quot;)\r\n    public class PersonController {\r\n\r\n    @Autowired\r\n    PersonService personService;\r\n\r\n    @GetMapping(&quot;/person/uid/{uid}&quot;)\r\n    public Boolean uidExists(@PathVariable(&quot;uid&quot;) String uid) {\r\n        return personService.uidInUse(uid);\r\n    }\r\n  \r\n\r\n    @GetMapping(&quot;/person/mobileNumber/{mobileNumber}&quot;)\r\n    public Boolean mobileNumberExists(@PathVariable(&quot;mobileNumber&quot;) String mobileNumber) {\r\n        return personService.mobileNumberInUse(mobileNumber);\r\n    }\r\n\r\n    @GetMapping(&quot;/person/email/{email}&quot;)\r\n    public Boolean emailExists(@PathVariable(&quot;email&quot;) String email) {\r\n        return personService.emailInUse(email);\r\n    }\r\n\r\n    @ResponseStatus(HttpStatus.UNPROCESSABLE_ENTITY)\r\n    @ExceptionHandler(MethodArgumentNotValidException.class)\r\n    public Map&lt;String, String&gt; handleValidationExceptions(\r\n            MethodArgumentNotValidException ex) {\r\n        Map&lt;String, String&gt; errors = new HashMap&lt;&gt;();\r\n        ex.getBindingResult().getAllErrors().forEach((error) -&gt; {\r\n            String fieldName = ((FieldError) error).getField();\r\n            String errorMessage = error.getDefaultMessage();\r\n            errors.put(fieldName, errorMessage);\r\n        });\r\n        return errors;\r\n    }\r\n    }\r\n\r\n**PersonService.java**\r\n\r\n    @Service\r\n    public class PersonService {\r\n\r\n    @Autowired\r\n    PersonRepository personRepository;\r\n\r\n    // NOTE: ...NotDeleted and ...InUse methods implies deleted == false\r\n\r\n    // read methods\r\n    public List&lt;PersonDto&gt; findAllNotDeleted() {\r\n        return personRepository.findByDeleted(false).stream()\r\n                .filter(p -&gt; !p.getDeleted())\r\n                .map(Person::toDto)\r\n                .collect(Collectors.toList());\r\n    }\r\n\r\n    public Optional&lt;Person&gt; findByIdInUse(Long personId) {\r\n        return personRepository.findByPersonIdAndDeleted(personId, false);\r\n    }\r\n\r\n\r\n    // checkers\r\n    public Boolean uidInUse(String uid) {\r\n        return personRepository.findByPersonUidAndDeleted(uid, false)\r\n                .isPresent();\r\n    }\r\n\r\n    //edit: check if personid is the same as personname\r\n    public Boolean uidInUse(String uid, Long personId) {\r\n        Optional&lt;Person&gt; personOptional = personRepository\r\n                .findByPersonUidAndDeleted(uid, false);\r\n        return personOptional.isPresent() &amp;&amp;\r\n                !Objects.equals(personOptional.get().getPersonId(), personId);\r\n    }\r\n\r\n    public Boolean mobileNumberInUse(String personMobileNumber) {\r\n        return personRepository.findByPersonMobileNumberAndDeleted(personMobileNumber, false)\r\n                .isPresent();\r\n    }\r\n\r\n    public Boolean emailInUse(String email) {\r\n        return personRepository.findByPersonEmail(email).size() &gt; 0;\r\n    }\r\n\r\n    public Boolean idInUse(Long id) {\r\n        return personRepository.findByPersonIdAndDeleted(id, false).isPresent();\r\n    }\r\n\r\n\r\n    // create / update methods\r\n    public PersonDto createNotDeleted(CreatePersonDto personDto) {\r\n        return personRepository.save(personDto.toPerson(false)).toDto();\r\n    }\r\n\r\n\r\n    //for deletion\r\n    public PersonDto save(PersonDto personDto, Boolean deleted) {\r\n        return personRepository.save(personDto.toPerson(deleted)).toDto();\r\n    }\r\n\r\n    //normal save\r\n    public Person save(Person person) {\r\n        return personRepository.save(person);\r\n    }\r\n\r\n\r\n    // helpers (if other controllers need can move to util)\r\n    public String generateUid() {\r\n        String randomString;\r\n\r\n        do {\r\n            randomString = generateRandomString(8);\r\n        } while (uidInUse(randomString));\r\n        return randomString;\r\n    }\r\n\r\n    private String generateRandomString(int length) {\r\n        int leftLimit = 48; // &quot;0&quot;\r\n        int rightLimit = 122; // &quot;z&quot;\r\n        Random random = new Random();\r\n\r\n        return random.ints(leftLimit, rightLimit + 1)\r\n                .filter(i -&gt; i &lt;= 57 || (i &gt;= 65 &amp;&amp; i &lt;= 90) || i &gt;= 97)\r\n                // &quot;9&quot; and below OR &quot;A&quot; to &quot;Z&quot; OR &quot;a&quot; and above\r\n                .limit(length)\r\n                .collect(StringBuilder::new, StringBuilder::appendCodePoint, StringBuilder::append)\r\n                .toString();\r\n\r\n    }\r\n    }","title":"CORS error on some API endpoints but not others in same controller","body":"<p>I have a controller with multiple API endpoints. Most endpoints work as expected but there are 2 which throw a CORS error when deployed on a remote server.</p>\n<blockquote>\n<p>Access to fetch at 'BACKEND URL' from origin 'FRONTEND URL' has been blocked by CORS policy: No 'Access-Control-Allow-Origin' header is present on the requested resource. If an opaque response serves your needs, set the request's mode to 'no-cors' to fetch the resource with CORS disabled.</p>\n</blockquote>\n<p>I have omitted some code below for brevity.</p>\n<p>The API <code>/api/person/uid/14</code> works as expected in both localhost and on a remote server.</p>\n<p>The API <code>/person/email/john@email.com</code> works on localhost, but returns an error when deployed on a remote server.</p>\n<p>Both frontend and backend are hosted on the same machine and sit on the same domain. The only difference in the URL are the ports (frontend 3000; backend API 8082).</p>\n<p>Having said that, the first API (and many others in this controller) work on both local and the remote server, only the email and mobileNumber validation APIs are throwing a CORS error, which makes this really puzzling.</p>\n<p>Any thoughts are appreciated.</p>\n<p><strong>PersonController.java</strong></p>\n<pre><code>@CrossOrigin(origins = &quot;*&quot;)\n@RestController\n@RequestMapping(&quot;/api&quot;)\npublic class PersonController {\n\n@Autowired\nPersonService personService;\n\n@GetMapping(&quot;/person/uid/{uid}&quot;)\npublic Boolean uidExists(@PathVariable(&quot;uid&quot;) String uid) {\n    return personService.uidInUse(uid);\n}\n\n\n@GetMapping(&quot;/person/mobileNumber/{mobileNumber}&quot;)\npublic Boolean mobileNumberExists(@PathVariable(&quot;mobileNumber&quot;) String mobileNumber) {\n    return personService.mobileNumberInUse(mobileNumber);\n}\n\n@GetMapping(&quot;/person/email/{email}&quot;)\npublic Boolean emailExists(@PathVariable(&quot;email&quot;) String email) {\n    return personService.emailInUse(email);\n}\n\n@ResponseStatus(HttpStatus.UNPROCESSABLE_ENTITY)\n@ExceptionHandler(MethodArgumentNotValidException.class)\npublic Map&lt;String, String&gt; handleValidationExceptions(\n        MethodArgumentNotValidException ex) {\n    Map&lt;String, String&gt; errors = new HashMap&lt;&gt;();\n    ex.getBindingResult().getAllErrors().forEach((error) -&gt; {\n        String fieldName = ((FieldError) error).getField();\n        String errorMessage = error.getDefaultMessage();\n        errors.put(fieldName, errorMessage);\n    });\n    return errors;\n}\n}\n</code></pre>\n<p><strong>PersonService.java</strong></p>\n<pre><code>@Service\npublic class PersonService {\n\n@Autowired\nPersonRepository personRepository;\n\n// NOTE: ...NotDeleted and ...InUse methods implies deleted == false\n\n// read methods\npublic List&lt;PersonDto&gt; findAllNotDeleted() {\n    return personRepository.findByDeleted(false).stream()\n            .filter(p -&gt; !p.getDeleted())\n            .map(Person::toDto)\n            .collect(Collectors.toList());\n}\n\npublic Optional&lt;Person&gt; findByIdInUse(Long personId) {\n    return personRepository.findByPersonIdAndDeleted(personId, false);\n}\n\n\n// checkers\npublic Boolean uidInUse(String uid) {\n    return personRepository.findByPersonUidAndDeleted(uid, false)\n            .isPresent();\n}\n\n//edit: check if personid is the same as personname\npublic Boolean uidInUse(String uid, Long personId) {\n    Optional&lt;Person&gt; personOptional = personRepository\n            .findByPersonUidAndDeleted(uid, false);\n    return personOptional.isPresent() &amp;&amp;\n            !Objects.equals(personOptional.get().getPersonId(), personId);\n}\n\npublic Boolean mobileNumberInUse(String personMobileNumber) {\n    return personRepository.findByPersonMobileNumberAndDeleted(personMobileNumber, false)\n            .isPresent();\n}\n\npublic Boolean emailInUse(String email) {\n    return personRepository.findByPersonEmail(email).size() &gt; 0;\n}\n\npublic Boolean idInUse(Long id) {\n    return personRepository.findByPersonIdAndDeleted(id, false).isPresent();\n}\n\n\n// create / update methods\npublic PersonDto createNotDeleted(CreatePersonDto personDto) {\n    return personRepository.save(personDto.toPerson(false)).toDto();\n}\n\n\n//for deletion\npublic PersonDto save(PersonDto personDto, Boolean deleted) {\n    return personRepository.save(personDto.toPerson(deleted)).toDto();\n}\n\n//normal save\npublic Person save(Person person) {\n    return personRepository.save(person);\n}\n\n\n// helpers (if other controllers need can move to util)\npublic String generateUid() {\n    String randomString;\n\n    do {\n        randomString = generateRandomString(8);\n    } while (uidInUse(randomString));\n    return randomString;\n}\n\nprivate String generateRandomString(int length) {\n    int leftLimit = 48; // &quot;0&quot;\n    int rightLimit = 122; // &quot;z&quot;\n    Random random = new Random();\n\n    return random.ints(leftLimit, rightLimit + 1)\n            .filter(i -&gt; i &lt;= 57 || (i &gt;= 65 &amp;&amp; i &lt;= 90) || i &gt;= 97)\n            // &quot;9&quot; and below OR &quot;A&quot; to &quot;Z&quot; OR &quot;a&quot; and above\n            .limit(length)\n            .collect(StringBuilder::new, StringBuilder::appendCodePoint, StringBuilder::append)\n            .toString();\n\n}\n}\n</code></pre>\n"},{"tags":["java","amazon-web-services","spring-boot","aws-iot"],"comments":[{"owner":{"account_id":10597743,"reputation":949,"user_id":7805773,"accept_rate":67,"display_name":"BrianM"},"score":0,"creation_date":1694782198,"post_id":76830827,"comment_id":135940097,"body_markdown":"Any update on this?","body":"Any update on this?"}],"owner":{"account_id":5744639,"reputation":115,"user_id":4536197,"display_name":"Happs"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691087993,"creation_date":1691087993,"question_id":76830827,"body_markdown":"I am trying to create Spring Bean for different aws resources using default credential provider chain concept.\r\nI can able to build bean for resources like sqs, s3 etc. but couldnot able find a way to create the same for iot core.\r\n\r\n```\r\n@Bean\r\npublic AmazonSQSAsync amazonSQSAsync() {\r\n AmazonSQSAsync amazonSQSAsync = \r\n AmazonSQSAsyncClientBuilder.standard().withRegion(Regions.AP_SOUTH_1).build();\r\n return amazonSQSAsync;\r\n}\r\n```\r\n\r\n```\r\n@Bean\r\npublic AmazonS3 getS3Config() {\r\n AmazonS3 s3Client = AmazonS3ClientBuilder.standard()\r\n\t\t.withRegion(Regions.AP_SOUTH_1).build();\r\n return s3Client;\r\n}\r\n```\r\n\r\nI want something like this for creating bean for aws iot core(AWSIotMqttClient).\r\nI am using below dependency for iot core.\r\n\r\n```\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;aws-iot-device-sdk-java&lt;/artifactId&gt;\r\n\t&lt;version&gt;1.3.11&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n","title":"Spring bean for AWS IoT Core using default credential provider chain","body":"<p>I am trying to create Spring Bean for different aws resources using default credential provider chain concept.\nI can able to build bean for resources like sqs, s3 etc. but couldnot able find a way to create the same for iot core.</p>\n<pre><code>@Bean\npublic AmazonSQSAsync amazonSQSAsync() {\n AmazonSQSAsync amazonSQSAsync = \n AmazonSQSAsyncClientBuilder.standard().withRegion(Regions.AP_SOUTH_1).build();\n return amazonSQSAsync;\n}\n</code></pre>\n<pre><code>@Bean\npublic AmazonS3 getS3Config() {\n AmazonS3 s3Client = AmazonS3ClientBuilder.standard()\n        .withRegion(Regions.AP_SOUTH_1).build();\n return s3Client;\n}\n</code></pre>\n<p>I want something like this for creating bean for aws iot core(AWSIotMqttClient).\nI am using below dependency for iot core.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\n    &lt;artifactId&gt;aws-iot-device-sdk-java&lt;/artifactId&gt;\n    &lt;version&gt;1.3.11&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","eclipse","eclipse-plugin"],"comments":[{"owner":{"account_id":3159259,"reputation":109678,"user_id":2670892,"display_name":"greg-449"},"score":1,"creation_date":1691087463,"post_id":76830727,"comment_id":135447860,"body_markdown":"You can&#39;t mess with the StyledText directly like this - the rest of the Java editor will not know anything what you have done and its styling will replace yours. You **must** use the extension points provided by the Java editor (or base text editor) to participate in the editor&#39;s styling code.","body":"You can&#39;t mess with the StyledText directly like this - the rest of the Java editor will not know anything what you have done and its styling will replace yours. You <b>must</b> use the extension points provided by the Java editor (or base text editor) to participate in the editor&#39;s styling code."},{"owner":{"account_id":10533051,"reputation":75,"user_id":7761811,"display_name":"jasvik"},"score":0,"creation_date":1691133031,"post_id":76830727,"comment_id":135453110,"body_markdown":"i tried with org.eclipse.jdt.ui.javaEditorTextHovers extention point but no help . Can you give which extentions point to be used to acgieve this","body":"i tried with org.eclipse.jdt.ui.javaEditorTextHovers extention point but no help . Can you give which extentions point to be used to acgieve this"},{"owner":{"account_id":3159259,"reputation":109678,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1691136130,"post_id":76830727,"comment_id":135453734,"body_markdown":"Sorry but I am not an expert on the JDT extension points.","body":"Sorry but I am not an expert on the JDT extension points."},{"owner":{"account_id":2742593,"reputation":586,"user_id":2363778,"display_name":"mami"},"score":0,"creation_date":1691138819,"post_id":76830727,"comment_id":135454185,"body_markdown":"Maybe org.eclipse.ui.themes. Its description says: &quot;This extension point is used to customize the appearance of the UI. It allows definition of color and font entities as well as theme entities. Themes allow applications to selectively override default color and font specifications for particular uses.&quot;","body":"Maybe org.eclipse.ui.themes. Its description says: &quot;This extension point is used to customize the appearance of the UI. It allows definition of color and font entities as well as theme entities. Themes allow applications to selectively override default color and font specifications for particular uses.&quot;"}],"owner":{"account_id":10533051,"reputation":75,"user_id":7761811,"display_name":"jasvik"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":0,"score":0,"last_activity_date":1691087080,"creation_date":1691087080,"question_id":76830727,"body_markdown":"I&#39;m creating a plugin like codeium I want to insert code when user types something and whne they press tab I will move the cursor to end of inserted code using the below code and it all works fine.\r\n\r\n    \r\n    public class InsertCodeHandler extends AbstractHandler {\r\n\r\n    private static final String CODE_TO_INSERT = &quot;public static void main&quot;;\r\n    private boolean tabPressed = false;\r\n    private boolean codeInserted = false;\r\n    private StyleRange styleRange;\r\n\r\n    @Override\r\n    public Object execute(ExecutionEvent event) throws ExecutionException {\r\n        IEditorPart editorPart = HandlerUtil.getActiveEditor(event);\r\n        if (editorPart instanceof ITextEditor) {\r\n            ITextEditor textEditor = (ITextEditor) editorPart;\r\n            IDocument document = textEditor.getDocumentProvider().getDocument(textEditor.getEditorInput());\r\n            int offset = textEditor.getAdapter(ITextViewer.class).getTextWidget().getCaretOffset();\r\n\r\n            try {\r\n                // Insert the code and set the background color to grey\r\n                document.replace(offset, 0, CODE_TO_INSERT);\r\n                codeInserted = true;\r\n\r\n                StyledText styledText = textEditor.getAdapter(ITextViewer.class).getTextWidget();\r\n                styleRange = new StyleRange(offset, CODE_TO_INSERT.length(), null, null);\r\n                styleRange.background = styledText.getDisplay().getSystemColor(SWT.COLOR_GRAY);\r\n                styledText.setStyleRange(styleRange);\r\n\r\n                // Register a VerifyKeyListener to handle Tab and Esc keys\r\n                styledText.addVerifyKeyListener(new VerifyKeyListener() {\r\n                    @Override\r\n                    public void verifyKey(VerifyEvent e) {\r\n                        if (e.keyCode == SWT.TAB &amp;&amp; codeInserted) { // Tab key pressed\r\n                            if (!tabPressed) {\r\n                                tabPressed = true;\r\n                                // Reset the background color to default\r\n                                styleRange.background = null;\r\n                                styledText.setStyleRange(styleRange);\r\n                            }\r\n                            // Move the cursor to the end of the inserted code\r\n                            styledText.setSelection(offset + CODE_TO_INSERT.length());\r\n                            e.doit = false; // Suppress default behavior of Tab key\r\n                        } else if (e.keyCode == SWT.ESC) { // Esc key pressed\r\n                            // Remove the inserted code\r\n                            try {\r\n                                document.replace(offset, CODE_TO_INSERT.length(), &quot;&quot;);\r\n                                codeInserted = false;\r\n                                tabPressed = false;\r\n                            } catch (Exception ex) {\r\n                                ex.printStackTrace();\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n   }\r\n\r\n\r\n\r\nbut until the user press tab I want to show some difference to the inserted code hence B added a vackground of grey but the background gets removed even before the user press tab key how to handle this.","title":"text styling not working as expected in eclipse plugin development","body":"<p>I'm creating a plugin like codeium I want to insert code when user types something and whne they press tab I will move the cursor to end of inserted code using the below code and it all works fine.</p>\n<pre><code>public class InsertCodeHandler extends AbstractHandler {\n\nprivate static final String CODE_TO_INSERT = &quot;public static void main&quot;;\nprivate boolean tabPressed = false;\nprivate boolean codeInserted = false;\nprivate StyleRange styleRange;\n\n@Override\npublic Object execute(ExecutionEvent event) throws ExecutionException {\n    IEditorPart editorPart = HandlerUtil.getActiveEditor(event);\n    if (editorPart instanceof ITextEditor) {\n        ITextEditor textEditor = (ITextEditor) editorPart;\n        IDocument document = textEditor.getDocumentProvider().getDocument(textEditor.getEditorInput());\n        int offset = textEditor.getAdapter(ITextViewer.class).getTextWidget().getCaretOffset();\n\n        try {\n            // Insert the code and set the background color to grey\n            document.replace(offset, 0, CODE_TO_INSERT);\n            codeInserted = true;\n\n            StyledText styledText = textEditor.getAdapter(ITextViewer.class).getTextWidget();\n            styleRange = new StyleRange(offset, CODE_TO_INSERT.length(), null, null);\n            styleRange.background = styledText.getDisplay().getSystemColor(SWT.COLOR_GRAY);\n            styledText.setStyleRange(styleRange);\n\n            // Register a VerifyKeyListener to handle Tab and Esc keys\n            styledText.addVerifyKeyListener(new VerifyKeyListener() {\n                @Override\n                public void verifyKey(VerifyEvent e) {\n                    if (e.keyCode == SWT.TAB &amp;&amp; codeInserted) { // Tab key pressed\n                        if (!tabPressed) {\n                            tabPressed = true;\n                            // Reset the background color to default\n                            styleRange.background = null;\n                            styledText.setStyleRange(styleRange);\n                        }\n                        // Move the cursor to the end of the inserted code\n                        styledText.setSelection(offset + CODE_TO_INSERT.length());\n                        e.doit = false; // Suppress default behavior of Tab key\n                    } else if (e.keyCode == SWT.ESC) { // Esc key pressed\n                        // Remove the inserted code\n                        try {\n                            document.replace(offset, CODE_TO_INSERT.length(), &quot;&quot;);\n                            codeInserted = false;\n                            tabPressed = false;\n                        } catch (Exception ex) {\n                            ex.printStackTrace();\n                        }\n                    }\n                }\n            });\n\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    return null;\n}\n</code></pre>\n<p>}</p>\n<p>but until the user press tab I want to show some difference to the inserted code hence B added a vackground of grey but the background gets removed even before the user press tab key how to handle this.</p>\n"},{"tags":["java","http","curl","grpc","http2"],"answers":[{"comments":[{"owner":{"account_id":29154202,"reputation":3,"user_id":22334373,"display_name":"DrPibb"},"score":0,"creation_date":1691168495,"post_id":76830715,"comment_id":135460365,"body_markdown":"Thanks Eric, this worked for me; however, my end goal is to be able to make a similar call like this in Java. I tried using Java HttpClient with version 2, however I think that implementation uses something similar to the http1 -&gt; upgrade to http2, similar to using curl with the --http2 flag which doesn&#39;t work. Do you have any idea on how to approach this? Thanks again","body":"Thanks Eric, this worked for me; however, my end goal is to be able to make a similar call like this in Java. I tried using Java HttpClient with version 2, however I think that implementation uses something similar to the http1 -&gt; upgrade to http2, similar to using curl with the --http2 flag which doesn&#39;t work. Do you have any idea on how to approach this? Thanks again"},{"owner":{"account_id":5967476,"reputation":24635,"user_id":4690866,"display_name":"Eric Anderson"},"score":0,"creation_date":1691534680,"post_id":76830715,"comment_id":135504142,"body_markdown":"I think it&#39;d only work over TLS, where it uses ALPN instead of HTTP/1 Upgrade.","body":"I think it&#39;d only work over TLS, where it uses ALPN instead of HTTP/1 Upgrade."}],"tags":[],"owner":{"account_id":5967476,"reputation":24635,"user_id":4690866,"display_name":"Eric Anderson"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1691086928,"creation_date":1691086928,"answer_id":76830715,"question_id":76830055,"body_markdown":"You can, but you need to follow [gRPC&#39;s message framing format](https://github.com/grpc/grpc/blob/master/doc/PROTOCOL-HTTP2.md) which is binary. Also, most grpc servers don&#39;t support JSON-encoded messages. So here&#39;s a protobuf version:\r\n\r\n```\r\n$ echo -en &#39;\\x00\\x00\\x00\\x00\\x06\\x0a\\x04test&#39; | curl --http2-prior-knowledge --header &quot;Content-Type: application/grpc&quot; --header &quot;TE: trailers&quot; --data-binary @- http://localhost:50051/helloworld.Greeter/SayHello | xxd\r\n00000000: 0000 0000 0c0a 0a48 656c 6c6f 2074 6573  .......Hello tes\r\n00000010: 74                                       t\r\n```\r\n\r\nThe request&#39;s break-down:\r\n * `\\x00\\x00\\x00\\x00\\x06`. 5 byte gRPC frame header. The first `00` is a flag byte with no flags set. The last four bytes are the message length of 6 bytes.\r\n  * `\\x0a\\x04test`. The protobuf message. `0a` contains the field type and tag number. The `04` is the length of the following string &quot;test&quot;.\r\n\r\nYou can see how the response was also binary grpc and protobuf in the same format as the request.\r\n\r\nThe error you were seeing is fixed by `--http2-prior-knowledge`. It tells curl not to use the plaintext HTTP/1.1 Upgrade to HTTP/2 and instead just start directly with HTTP/2. RFC 9113 deprecated the HTTP/1.1 Upgrade approach for HTTP/2 in favor of this prior knowledge approach.","title":"Can you use a HTTP2 request to successfully call a gRPC service?","body":"<p>You can, but you need to follow <a href=\"https://github.com/grpc/grpc/blob/master/doc/PROTOCOL-HTTP2.md\" rel=\"nofollow noreferrer\">gRPC's message framing format</a> which is binary. Also, most grpc servers don't support JSON-encoded messages. So here's a protobuf version:</p>\n<pre><code>$ echo -en '\\x00\\x00\\x00\\x00\\x06\\x0a\\x04test' | curl --http2-prior-knowledge --header &quot;Content-Type: application/grpc&quot; --header &quot;TE: trailers&quot; --data-binary @- http://localhost:50051/helloworld.Greeter/SayHello | xxd\n00000000: 0000 0000 0c0a 0a48 656c 6c6f 2074 6573  .......Hello tes\n00000010: 74                                       t\n</code></pre>\n<p>The request's break-down:</p>\n<ul>\n<li><code>\\x00\\x00\\x00\\x00\\x06</code>. 5 byte gRPC frame header. The first <code>00</code> is a flag byte with no flags set. The last four bytes are the message length of 6 bytes.</li>\n<li><code>\\x0a\\x04test</code>. The protobuf message. <code>0a</code> contains the field type and tag number. The <code>04</code> is the length of the following string &quot;test&quot;.</li>\n</ul>\n<p>You can see how the response was also binary grpc and protobuf in the same format as the request.</p>\n<p>The error you were seeing is fixed by <code>--http2-prior-knowledge</code>. It tells curl not to use the plaintext HTTP/1.1 Upgrade to HTTP/2 and instead just start directly with HTTP/2. RFC 9113 deprecated the HTTP/1.1 Upgrade approach for HTTP/2 in favor of this prior knowledge approach.</p>\n"}],"owner":{"account_id":29154202,"reputation":3,"user_id":22334373,"display_name":"DrPibb"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":263,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691086928,"creation_date":1691080670,"question_id":76830055,"body_markdown":"Since grpc is built on top of http2, can you use an http request to directly call a grpc service?\r\n\r\nFor example, if you start a grpc service with the following proto:\r\n\r\n```\r\noption java_package = &quot;io.grpc.examples.helloworld&quot;;\r\noption java_outer_classname = &quot;HelloWorldProto&quot;;\r\noption objc_class_prefix = &quot;HLW&quot;;\r\n\r\npackage helloworld;\r\n\r\n// The greeting service definition.\r\nservice Greeter {\r\n  // Sends a greeting\r\n  rpc SayHello (HelloRequest) returns (HelloReply) {}\r\n}\r\n\r\n// The request message containing the user&#39;s name.\r\nmessage HelloRequest {\r\n  string name = 1;\r\n}\r\n\r\n// The response message containing the greetings\r\nmessage HelloReply {\r\n  string message = 1;\r\n}\r\n```\r\n\r\nThen send a curl request to that service at localhost and the port number:\r\n\r\n```\r\ncurl --http2 -H &quot;Content-Type: application/grpc+proto&quot; -d &quot;{\\&quot;name\\&quot;: \\&quot;test\\&quot;}&quot; http://localhost:50051/io.grpc.examples.helloworld.Greeter/SayHello\r\n```\r\n\r\nIs this suppported? I get the following error:\r\n\r\n```\r\nio.grpc.netty.shaded.io.netty.handler.codec.http2.Http2Exception: Unexpected HTTP/1.x request: POST /io.grpc.examples.helloworld.Greeter/SayHello\r\n```\r\n\r\nI&#39;m not sure if I am making the call incorrectly, or if this isn&#39;t possible. Besides using curl, I&#39;ve also tried using Java&#39;s HttpClient, which gave me the same error. Any info on this is appreciated, thanks","title":"Can you use a HTTP2 request to successfully call a gRPC service?","body":"<p>Since grpc is built on top of http2, can you use an http request to directly call a grpc service?</p>\n<p>For example, if you start a grpc service with the following proto:</p>\n<pre><code>option java_package = &quot;io.grpc.examples.helloworld&quot;;\noption java_outer_classname = &quot;HelloWorldProto&quot;;\noption objc_class_prefix = &quot;HLW&quot;;\n\npackage helloworld;\n\n// The greeting service definition.\nservice Greeter {\n  // Sends a greeting\n  rpc SayHello (HelloRequest) returns (HelloReply) {}\n}\n\n// The request message containing the user's name.\nmessage HelloRequest {\n  string name = 1;\n}\n\n// The response message containing the greetings\nmessage HelloReply {\n  string message = 1;\n}\n</code></pre>\n<p>Then send a curl request to that service at localhost and the port number:</p>\n<pre><code>curl --http2 -H &quot;Content-Type: application/grpc+proto&quot; -d &quot;{\\&quot;name\\&quot;: \\&quot;test\\&quot;}&quot; http://localhost:50051/io.grpc.examples.helloworld.Greeter/SayHello\n</code></pre>\n<p>Is this suppported? I get the following error:</p>\n<pre><code>io.grpc.netty.shaded.io.netty.handler.codec.http2.Http2Exception: Unexpected HTTP/1.x request: POST /io.grpc.examples.helloworld.Greeter/SayHello\n</code></pre>\n<p>I'm not sure if I am making the call incorrectly, or if this isn't possible. Besides using curl, I've also tried using Java's HttpClient, which gave me the same error. Any info on this is appreciated, thanks</p>\n"},{"tags":["java","postgresql","prepared-statement","jooq","jsonb"],"answers":[{"comments":[{"owner":{"account_id":29145001,"reputation":13,"user_id":22327129,"display_name":"Dmtry"},"score":0,"creation_date":1691133261,"post_id":76830691,"comment_id":135453143,"body_markdown":"Thank you very much, @Lukas Elder, I&#39;m sorry, I forgot to mention that I&#39;m using the 3.16 version of Jooq. Is there a path to do the same on 3.16?","body":"Thank you very much, @Lukas Elder, I&#39;m sorry, I forgot to mention that I&#39;m using the 3.16 version of Jooq. Is there a path to do the same on 3.16?"},{"owner":{"account_id":29145001,"reputation":13,"user_id":22327129,"display_name":"Dmtry"},"score":0,"creation_date":1691147371,"post_id":76830691,"comment_id":135455746,"body_markdown":"вот мое решение под версию &lt;3.18 \n\n.where(&quot;jsonb_exists_all(data -&gt; {0}, {1})&quot;,\n                                inline(&quot;roles&quot;),\n                                val(new String[] {&quot;DONE&quot;, &quot;NONE&quot; })))","body":"вот мое решение под версию &lt;3.18   .where(&quot;jsonb_exists_all(data -&gt; {0}, {1})&quot;,                                 inline(&quot;roles&quot;),                                 val(new String[] {&quot;DONE&quot;, &quot;NONE&quot; })))"},{"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"score":0,"creation_date":1691175008,"post_id":76830691,"comment_id":135461542,"body_markdown":"@Dmtry: Why not upgrade? Anyway, just look at plain SQL templates and study what it does. The answer is there.","body":"@Dmtry: Why not upgrade? Anyway, just look at plain SQL templates and study what it does. The answer is there."},{"owner":{"account_id":29145001,"reputation":13,"user_id":22327129,"display_name":"Dmtry"},"score":0,"creation_date":1691393612,"post_id":76830691,"comment_id":135479955,"body_markdown":"Thanks @Lukas Eder! Unfortunately, we are using Java 11 and the open-source version of Jooq and can&#39;t upgrade Java versions. The open-source version of Jooq, that supports Java 11 is 3.16 right now, and a higher version requires Java 17. We will try to upgrade our JVM.)","body":"Thanks @Lukas Eder! Unfortunately, we are using Java 11 and the open-source version of Jooq and can&#39;t upgrade Java versions. The open-source version of Jooq, that supports Java 11 is 3.16 right now, and a higher version requires Java 17. We will try to upgrade our JVM.)"}],"tags":[],"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691086731,"creation_date":1691086731,"answer_id":76830691,"question_id":76821669,"body_markdown":"First off, [with jOOQ, you should *never* concatenate strings][1]. There&#39;s almost always a better way.\r\n\r\nIn your case, you could use [plain SQL templates][2] as follows:\r\n\r\n```java\r\n.where(&quot;json_exists_all({0}, {1})&quot;,\r\n    jsonGetAttribute(MYTABLE.DATA, inline(&quot;roles&quot;)),\r\n    val(new String[] { &quot;ONE&quot;, &quot;TWO&quot; })\r\n)\r\n```\r\n\r\nThis is using:\r\n\r\n- [JSON attribute access][3]\r\n- [`DSL::val`][4] to create [bind values][5]\r\n- [`DSL::inline`][6] to create [inline values][7]\r\n\r\n\r\n  [1]: https://blog.jooq.org/never-concatenate-strings-with-jooq/\r\n  [2]: https://www.jooq.org/doc/latest/manual/sql-building/plain-sql-templating/\r\n  [3]: https://www.jooq.org/doc/latest/manual/sql-building/column-expressions/json-functions/json-attribute-access/\r\n  [4]: https://www.jooq.org/javadoc/latest/org.jooq/org/jooq/impl/DSL.html#val(T)\r\n  [5]: https://www.jooq.org/doc/latest/manual/sql-building/bind-values/\r\n  [6]: https://www.jooq.org/javadoc/latest/org.jooq/org/jooq/impl/DSL.html#inline(T)\r\n  [7]: https://www.jooq.org/doc/latest/manual/sql-building/bind-values/inlined-parameters/","title":"Search by JSONB field value. How to prepare query correctly using jooq?","body":"<p>First off, <a href=\"https://blog.jooq.org/never-concatenate-strings-with-jooq/\" rel=\"nofollow noreferrer\">with jOOQ, you should <em>never</em> concatenate strings</a>. There's almost always a better way.</p>\n<p>In your case, you could use <a href=\"https://www.jooq.org/doc/latest/manual/sql-building/plain-sql-templating/\" rel=\"nofollow noreferrer\">plain SQL templates</a> as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>.where(&quot;json_exists_all({0}, {1})&quot;,\n    jsonGetAttribute(MYTABLE.DATA, inline(&quot;roles&quot;)),\n    val(new String[] { &quot;ONE&quot;, &quot;TWO&quot; })\n)\n</code></pre>\n<p>This is using:</p>\n<ul>\n<li><a href=\"https://www.jooq.org/doc/latest/manual/sql-building/column-expressions/json-functions/json-attribute-access/\" rel=\"nofollow noreferrer\">JSON attribute access</a></li>\n<li><a href=\"https://www.jooq.org/javadoc/latest/org.jooq/org/jooq/impl/DSL.html#val(T)\" rel=\"nofollow noreferrer\"><code>DSL::val</code></a> to create <a href=\"https://www.jooq.org/doc/latest/manual/sql-building/bind-values/\" rel=\"nofollow noreferrer\">bind values</a></li>\n<li><a href=\"https://www.jooq.org/javadoc/latest/org.jooq/org/jooq/impl/DSL.html#inline(T)\" rel=\"nofollow noreferrer\"><code>DSL::inline</code></a> to create <a href=\"https://www.jooq.org/doc/latest/manual/sql-building/bind-values/inlined-parameters/\" rel=\"nofollow noreferrer\">inline values</a></li>\n</ul>\n"}],"owner":{"account_id":29145001,"reputation":13,"user_id":22327129,"display_name":"Dmtry"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":104,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76830691,"answer_count":1,"score":1,"last_activity_date":1691086731,"creation_date":1690992157,"question_id":76821669,"body_markdown":"I&#39;m trying to find records by condition from the jsonb field (array). I&#39;m using the jsonb_exists_all function for this.\r\nI wrote a working SQL, but I ran into the problem of creating correct Java code (Jooq) with argument binding.\r\n\r\nFor example, the table structure\r\n\r\n```\r\nCREATE TABLE mytable (\r\n    id int,\r\n    data jsonb\r\n);\r\n\r\nINSERT INTO mytable VALUES\r\n(1, &#39;{&quot;roles&quot;: [&quot;ONE&quot;, &quot;TWO&quot;, &quot;FIVE&quot;]}&#39;),\r\n(2, &#39;{&quot;roles&quot;: [&quot;ONE&quot;, &quot;SIX&quot;]}&#39;);\r\n```\r\n\r\nAnd in my raw working SQL query, I&#39;m searching by array values. This work.\r\n\r\n```\r\nSELECT\r\n    id,\r\n    data\r\nFROM\r\n    mytable\r\nWHERE\r\n    jsonb_exists_all(mytable.data -&gt; &#39;roles&#39;, array[&#39;ONE&#39;,&#39;TWO&#39;])\r\n```\r\n\r\nIn the next step, I&#39;m trying to write Java code, and I&#39;m having some issues with bindings (arguments) to implement a secured request.\r\n\r\n```\r\nString args = &quot;&#39;ONE&#39;,&#39;TWO&#39;&quot;;\r\n\r\nFlux.from(dsl.selectFrom(MyTable.MYTABLE)\r\n          .where(noCondition().and(&quot;jsonb_exists_all(parameters -&gt; &#39;roles&#39;, array[&quot; + args + &quot;])&quot;)))\r\n          .map(record -&gt; record.into(MyTableDto.class))\r\n          .collectList();\r\n```\r\n\r\nIs it possible to do binding without concatenation?\r\n\r\nI will be grateful!","title":"Search by JSONB field value. How to prepare query correctly using jooq?","body":"<p>I'm trying to find records by condition from the jsonb field (array). I'm using the jsonb_exists_all function for this.\nI wrote a working SQL, but I ran into the problem of creating correct Java code (Jooq) with argument binding.</p>\n<p>For example, the table structure</p>\n<pre><code>CREATE TABLE mytable (\n    id int,\n    data jsonb\n);\n\nINSERT INTO mytable VALUES\n(1, '{&quot;roles&quot;: [&quot;ONE&quot;, &quot;TWO&quot;, &quot;FIVE&quot;]}'),\n(2, '{&quot;roles&quot;: [&quot;ONE&quot;, &quot;SIX&quot;]}');\n</code></pre>\n<p>And in my raw working SQL query, I'm searching by array values. This work.</p>\n<pre><code>SELECT\n    id,\n    data\nFROM\n    mytable\nWHERE\n    jsonb_exists_all(mytable.data -&gt; 'roles', array['ONE','TWO'])\n</code></pre>\n<p>In the next step, I'm trying to write Java code, and I'm having some issues with bindings (arguments) to implement a secured request.</p>\n<pre><code>String args = &quot;'ONE','TWO'&quot;;\n\nFlux.from(dsl.selectFrom(MyTable.MYTABLE)\n          .where(noCondition().and(&quot;jsonb_exists_all(parameters -&gt; 'roles', array[&quot; + args + &quot;])&quot;)))\n          .map(record -&gt; record.into(MyTableDto.class))\n          .collectList();\n</code></pre>\n<p>Is it possible to do binding without concatenation?</p>\n<p>I will be grateful!</p>\n"},{"tags":["java","generics","jackson-dataformat-xml"],"answers":[{"tags":[],"owner":{"account_id":18189372,"reputation":45,"user_id":13235486,"display_name":"Charles"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691086655,"creation_date":1691086655,"answer_id":76830680,"question_id":76818805,"body_markdown":"I found the solution, I report it below, maybe it can help someone:\r\n\r\n - add a `Class&lt;T&gt;` property to the `MyXmlManager&lt;T&gt;` class\r\n - add a constructor with parameter `Class&lt;T&gt;` to instantiate the added property\r\n - compile the type to be passed to the `XmlMapper.readValue` method using the `mapper.getTypeFactory().constructParametricType` method.\r\n\r\nThis is the modified code:\r\n```lang-java\r\npublic class MyXmlManager&lt;T&gt; {\r\n    final static XmlMapper oXmlMapper = new XmlMapper();\r\n    private Class&lt;T&gt; clazz;\r\n    \r\n    public MyXmlManager(Class&lt;T&gt; clazz) {\r\n        this.clazz = clazz;\r\n    }\r\n    \r\n    public XmlGeneric&lt;T&gt; xmlDeserialization(String sXmlData) throws JsonMappingException, JsonProcessingException, InstantiationException, IllegalAccessException {\r\n        return oXmlMapper.readValue(sXmlData, oXmlMapper.getTypeFactory().constructParametricType(XmlGeneric.class, clazz));\r\n    }\r\n}\r\n```\r\n**Test**\r\n```lang-java\r\nMyXmlManager&lt;Person&gt; myXmlManager = new MyXmlManager&lt;Person&gt;(Person.class);\r\nXmlGeneric&lt;Person&gt; xmlPerson = myXmlManager.xmlDeserialization(xmlPersonData);\r\nSystem.out.println(xmlPerson);\r\n// Result: XmlGeneric [rows=[person [name=charles, userid=1], person [name=arthur, userid=2]]\r\n```","title":"Java - Jackson XML Deserializing with generics","body":"<p>I found the solution, I report it below, maybe it can help someone:</p>\n<ul>\n<li>add a <code>Class&lt;T&gt;</code> property to the <code>MyXmlManager&lt;T&gt;</code> class</li>\n<li>add a constructor with parameter <code>Class&lt;T&gt;</code> to instantiate the added property</li>\n<li>compile the type to be passed to the <code>XmlMapper.readValue</code> method using the <code>mapper.getTypeFactory().constructParametricType</code> method.</li>\n</ul>\n<p>This is the modified code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyXmlManager&lt;T&gt; {\n    final static XmlMapper oXmlMapper = new XmlMapper();\n    private Class&lt;T&gt; clazz;\n    \n    public MyXmlManager(Class&lt;T&gt; clazz) {\n        this.clazz = clazz;\n    }\n    \n    public XmlGeneric&lt;T&gt; xmlDeserialization(String sXmlData) throws JsonMappingException, JsonProcessingException, InstantiationException, IllegalAccessException {\n        return oXmlMapper.readValue(sXmlData, oXmlMapper.getTypeFactory().constructParametricType(XmlGeneric.class, clazz));\n    }\n}\n</code></pre>\n<p><strong>Test</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>MyXmlManager&lt;Person&gt; myXmlManager = new MyXmlManager&lt;Person&gt;(Person.class);\nXmlGeneric&lt;Person&gt; xmlPerson = myXmlManager.xmlDeserialization(xmlPersonData);\nSystem.out.println(xmlPerson);\n// Result: XmlGeneric [rows=[person [name=charles, userid=1], person [name=arthur, userid=2]]\n</code></pre>\n"}],"owner":{"account_id":18189372,"reputation":45,"user_id":13235486,"display_name":"Charles"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76830680,"answer_count":1,"score":0,"last_activity_date":1691086655,"creation_date":1690970725,"question_id":76818805,"body_markdown":"I&#39;m trying to deserialize some XML using generics and I get an unexpected result.\r\nHere is a simplified example of the code I&#39;m using:\r\n\r\n**Maven dependecy**\r\n```lang-xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jackson-dataformat-xml&lt;/artifactId&gt;\r\n    &lt;version&gt;2.13.3&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n**Xml to deserialize**\r\n```lang-xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot; ?&gt;\r\n&lt;xml_result&gt;\r\n    &lt;row&gt;\r\n        &lt;name&gt;charles&lt;/name&gt;\r\n        &lt;userid&gt;1&lt;/userid&gt;\r\n    &lt;/row&gt;\r\n    &lt;row&gt;\r\n        &lt;name&gt;arthur&lt;/name&gt;\r\n        &lt;userid&gt;2&lt;/userid&gt;\r\n    &lt;/row&gt;\r\n&lt;/xml_result&gt;\r\n```\r\nThe `row` element can contain different information. The example contains people information\r\n\r\n**Generic class**\r\n```lang-java\r\nimport java.util.List;\r\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlElementWrapper;\r\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlProperty;\r\n\r\npublic class XmlGeneric&lt;T&gt; {\r\n    @JacksonXmlProperty(localName = &quot;row&quot;)\r\n    @JacksonXmlElementWrapper(useWrapping = false)\r\n    private List&lt;T&gt; rows;\r\n    public List&lt;T&gt; getRow() {return rows;};\r\n    \r\n    @Override\r\n    public String toString() {\r\n        return &quot;XmlGeneric [rows=&quot; + rows + &quot;]&quot;; \r\n    }\r\n }\r\n```\r\n\r\n**POJO Person**\r\n```lang-java\r\npublic class Person {\r\n    private String name;\r\n    private String userid;\r\n    \r\n    public String getName() {return name;}\r\n    public String getUserid() {return userid;}\r\n    \r\n    @Override\r\n    public String toString() {\r\n        return &quot;person [name=&quot; + getName() + &quot;, userid=&quot; + getUserid() + &quot;]&quot;;\r\n    }\r\n}\r\n```\r\nIf I use the following code, the deserialization is successful\r\n```lang-java\r\nXmlMapper xmlMapper = new XmlMapper();\r\nXmlGeneric&lt;Person&gt; xmlPerson = xmlMapper.readValue(xmlPersonData,new TypeReference&lt;XmlGeneric&lt;Person&gt;&gt;() {});\r\nSystem.out.println(xmlPerson);\r\n// Result: XmlGeneric [rows=[person [name=charles, userid=1], person [name=arthur, userid=2]]]\r\n```\r\nFor project needs, however, I need the deserialization to be done in another class.\r\nI tried this, but the result is not what I wanted\r\n```lang-java\r\npublic class MyXmlManager&lt;T&gt; {\r\n    final static XmlMapper oXmlMapper = new XmlMapper();\r\n    \r\n    public XmlGeneric&lt;T&gt; xmlDeserialization(String sXmlData) throws JsonMappingException, JsonProcessingException {\r\n        return oXmlMapper.readValue(sXmlData,new TypeReference&lt;XmlGeneric&lt;T&gt;&gt;() {});\r\n    }\r\n}\r\n```\r\n```lang-java\r\nMyXmlManager&lt;Person&gt; myXmlManager = new MyXmlManager&lt;Person&gt;();\r\nXmlGeneric&lt;Person&gt; xmlPerson = myXmlManager.xmlDeserialization(xmlPersonData);\r\nSystem.out.println(xmlPerson);\r\n// Result: XmlGeneric [rows=[{name=charles, userid=1}, {name=arthur, userid=2}]]\r\n```\r\nAs you can see, it does not deserialize the `row` elements in the `Person` POJO, but returns a `LinkedHashMap` with its value corresponding to a JSON format (`{name=charles, userid=1}`).\r\nIn fact, trying to cast, I get the error `java.lang.ClassCastException: java.util.LinkedHashMap cannot be cast to Person`.\r\n\r\nI know that I could use the `com.fasterxml.jackson.databind.ObjectMapper` object to deserialize the JSON in the Person POJO, but I would like to understand why using the `MyXmlManager&lt;T&gt;` class the deserialization doesn&#39;t work correctly.\r\nIt is as if the generic type passed to instantiate the `MyXmlManager`\r\nwas not correctly passed to the `XmlMapper.readValue` method.\r\n\r\nThanks in advance","title":"Java - Jackson XML Deserializing with generics","body":"<p>I'm trying to deserialize some XML using generics and I get an unexpected result.\nHere is a simplified example of the code I'm using:</p>\n<p><strong>Maven dependecy</strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-dataformat-xml&lt;/artifactId&gt;\n    &lt;version&gt;2.13.3&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><strong>Xml to deserialize</strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot; ?&gt;\n&lt;xml_result&gt;\n    &lt;row&gt;\n        &lt;name&gt;charles&lt;/name&gt;\n        &lt;userid&gt;1&lt;/userid&gt;\n    &lt;/row&gt;\n    &lt;row&gt;\n        &lt;name&gt;arthur&lt;/name&gt;\n        &lt;userid&gt;2&lt;/userid&gt;\n    &lt;/row&gt;\n&lt;/xml_result&gt;\n</code></pre>\n<p>The <code>row</code> element can contain different information. The example contains people information</p>\n<p><strong>Generic class</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.List;\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlElementWrapper;\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlProperty;\n\npublic class XmlGeneric&lt;T&gt; {\n    @JacksonXmlProperty(localName = &quot;row&quot;)\n    @JacksonXmlElementWrapper(useWrapping = false)\n    private List&lt;T&gt; rows;\n    public List&lt;T&gt; getRow() {return rows;};\n    \n    @Override\n    public String toString() {\n        return &quot;XmlGeneric [rows=&quot; + rows + &quot;]&quot;; \n    }\n }\n</code></pre>\n<p><strong>POJO Person</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Person {\n    private String name;\n    private String userid;\n    \n    public String getName() {return name;}\n    public String getUserid() {return userid;}\n    \n    @Override\n    public String toString() {\n        return &quot;person [name=&quot; + getName() + &quot;, userid=&quot; + getUserid() + &quot;]&quot;;\n    }\n}\n</code></pre>\n<p>If I use the following code, the deserialization is successful</p>\n<pre class=\"lang-java prettyprint-override\"><code>XmlMapper xmlMapper = new XmlMapper();\nXmlGeneric&lt;Person&gt; xmlPerson = xmlMapper.readValue(xmlPersonData,new TypeReference&lt;XmlGeneric&lt;Person&gt;&gt;() {});\nSystem.out.println(xmlPerson);\n// Result: XmlGeneric [rows=[person [name=charles, userid=1], person [name=arthur, userid=2]]]\n</code></pre>\n<p>For project needs, however, I need the deserialization to be done in another class.\nI tried this, but the result is not what I wanted</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyXmlManager&lt;T&gt; {\n    final static XmlMapper oXmlMapper = new XmlMapper();\n    \n    public XmlGeneric&lt;T&gt; xmlDeserialization(String sXmlData) throws JsonMappingException, JsonProcessingException {\n        return oXmlMapper.readValue(sXmlData,new TypeReference&lt;XmlGeneric&lt;T&gt;&gt;() {});\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>MyXmlManager&lt;Person&gt; myXmlManager = new MyXmlManager&lt;Person&gt;();\nXmlGeneric&lt;Person&gt; xmlPerson = myXmlManager.xmlDeserialization(xmlPersonData);\nSystem.out.println(xmlPerson);\n// Result: XmlGeneric [rows=[{name=charles, userid=1}, {name=arthur, userid=2}]]\n</code></pre>\n<p>As you can see, it does not deserialize the <code>row</code> elements in the <code>Person</code> POJO, but returns a <code>LinkedHashMap</code> with its value corresponding to a JSON format (<code>{name=charles, userid=1}</code>).\nIn fact, trying to cast, I get the error <code>java.lang.ClassCastException: java.util.LinkedHashMap cannot be cast to Person</code>.</p>\n<p>I know that I could use the <code>com.fasterxml.jackson.databind.ObjectMapper</code> object to deserialize the JSON in the Person POJO, but I would like to understand why using the <code>MyXmlManager&lt;T&gt;</code> class the deserialization doesn't work correctly.\nIt is as if the generic type passed to instantiate the <code>MyXmlManager</code>\nwas not correctly passed to the <code>XmlMapper.readValue</code> method.</p>\n<p>Thanks in advance</p>\n"},{"tags":["java","unit-testing","junit","ejb"],"comments":[{"owner":{"account_id":5493520,"reputation":9833,"user_id":4365460,"accept_rate":90,"display_name":"Roland Weisleder"},"score":0,"creation_date":1461136651,"post_id":36734275,"comment_id":61055532,"body_markdown":"You could add an in-memory InitialContextFactory into your tests, Example: http://stackoverflow.com/questions/3461310","body":"You could add an in-memory InitialContextFactory into your tests, Example: <a href=\"http://stackoverflow.com/questions/3461310\">stackoverflow.com/questions/3461310</a>"}],"answers":[{"comments":[{"owner":{"account_id":5376932,"reputation":159,"user_id":4283476,"display_name":"Anushka Senarathna"},"score":1,"creation_date":1461559016,"post_id":36736430,"comment_id":61234980,"body_markdown":"S.Stavreva thanks for the your reply, but i am going to write junit test for existing method, therefore i can not change the actual method implementation.","body":"S.Stavreva thanks for the your reply, but i am going to write junit test for existing method, therefore i can not change the actual method implementation."}],"tags":[],"owner":{"account_id":8019749,"reputation":587,"user_id":6048742,"display_name":"S.Stavreva"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1461136541,"creation_date":1461136541,"answer_id":36736430,"question_id":36734275,"body_markdown":"You can refactor your code and extract the initialization of the context in new method. \r\n\r\n    private void someMethod(int id1, int id2, HashMap map){\r\n        ......some code........\r\n    \r\n        Context ctx = getInitialContext();\r\n        Object ref = ctx.lookup(&quot;com.java.ejbs.MyEJB&quot;);\r\n    \r\n        EJBHome ejbHome = (EJBHome)PortableRemoteObject.narrow(ref, EJBHome.class);\r\n        EJBBean ejbBean = (EJBBean)PortableRemoteObject.narrow(ejbHome.create(), EJBBean.class);\r\n        ejbBean.someMethod(id1,name);\r\n    \r\n        .......some code.......}\r\n\r\nYour test code will be something like this:\r\n\r\n    Context mockContext = mock(Context.class);\r\n    doReturn(mockContext).when(yourclass).getInitalContext(); \r\n    ...... some code....","title":"How to mock InitialContext constructor in unit testing","body":"<p>You can refactor your code and extract the initialization of the context in new method. </p>\n\n<pre><code>private void someMethod(int id1, int id2, HashMap map){\n    ......some code........\n\n    Context ctx = getInitialContext();\n    Object ref = ctx.lookup(\"com.java.ejbs.MyEJB\");\n\n    EJBHome ejbHome = (EJBHome)PortableRemoteObject.narrow(ref, EJBHome.class);\n    EJBBean ejbBean = (EJBBean)PortableRemoteObject.narrow(ejbHome.create(), EJBBean.class);\n    ejbBean.someMethod(id1,name);\n\n    .......some code.......}\n</code></pre>\n\n<p>Your test code will be something like this:</p>\n\n<pre><code>Context mockContext = mock(Context.class);\ndoReturn(mockContext).when(yourclass).getInitalContext(); \n...... some code....\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":1,"creation_date":1683622968,"post_id":44096460,"comment_id":134391054,"body_markdown":"What is the fully qualified class name of the  `ConnectionFactory.class` that is getting mocked?","body":"What is the fully qualified class name of the  <code>ConnectionFactory.class</code> that is getting mocked?"},{"owner":{"account_id":1022492,"reputation":1055,"user_id":1032484,"display_name":"andy"},"score":1,"creation_date":1690982390,"post_id":44096460,"comment_id":135428625,"body_markdown":"I think in new versions of Spring the class `SimpleNamingContextBuilder`has been removed. The link in your answer is dead.","body":"I think in new versions of Spring the class <code>SimpleNamingContextBuilder</code>has been removed. The link in your answer is dead."}],"tags":[],"owner":{"account_id":404573,"reputation":7556,"user_id":772981,"accept_rate":46,"display_name":"Jarekczek"},"comment_count":2,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1691085980,"creation_date":1495367089,"answer_id":44096460,"question_id":36734275,"body_markdown":"**Handmade**\r\n\r\nAs [`InitialContext` doc](https://docs.oracle.com/javase/8/docs/api/javax/naming/InitialContext.html) says, you can provide your own factory for `InitialContext` objects, using `java.naming.factory.initial` system property. When the code runs inside application server, the system property is set by the server. In our tests, we provide our own implementation of *JNDI*.\r\n\r\nHere&#39;s my *Mockito* only solution: I defined a custom `InitialContextFactory` class, that returns a mock of `InitialContext`. You customize the mock as you wish, probably to return more mocks on `lookup` calls.\r\n\r\n    public class PlainTest {\r\n      @Mock InitialContextFactory ctx;\r\n      @InjectMocks Klasa1 klasa1;\r\n      \r\n      public static class MyContextFactory implements InitialContextFactory\r\n      {\r\n        @Override\r\n        public Context getInitialContext(Hashtable&lt;?, ?&gt; environment) throws NamingException {\r\n          ConnectionFactory mockConnFact = mock(ConnectionFactory.class);\r\n          InitialContext mockCtx = mock(InitialContext.class);\r\n          when(mockCtx.lookup(&quot;jms1&quot;)).thenReturn(mockConnFact);\r\n          return mockCtx;\r\n        }\r\n      }\r\n      \r\n      @Before\r\n      public void setupClass() throws IOException\r\n      {\r\n        MockitoAnnotations.initMocks(this);\r\n        System.setProperty(&quot;java.naming.factory.initial&quot;,\r\n          this.getClass().getCanonicalName() + &quot;$MyContextFactory&quot;);\r\n      }\r\n\r\n**Spring** before version 6 (added by *edit*)\r\n\r\nAnother edit: this is [deprecated](https://github.com/spring-projects/spring-framework/issues/22779) in 5.2 and removed in 6.0.\r\n\r\nIf you don&#39;t mind leveraging Spring Framework for testing purposes, here&#39;s their simple solution: [SimpleNamingContextBuilder](https://docs.spring.io/spring-framework/docs/5.3.29/javadoc-api/):\r\n\r\n    SimpleNamingContextBuilder builder = new SimpleNamingContextBuilder();\r\n    DataSource ds = new DriverManagerDataSource(...);\r\n    builder.bind(&quot;java:comp/env/jdbc/myds&quot;, ds);\r\n    builder.activate();\r\n\r\nIt&#39;s ok to put it in `@Before` or `@BeforeClass`. After `activate()`, jndi data will be pulled from spring dummy.","title":"How to mock InitialContext constructor in unit testing","body":"<p><strong>Handmade</strong></p>\n<p>As <a href=\"https://docs.oracle.com/javase/8/docs/api/javax/naming/InitialContext.html\" rel=\"nofollow noreferrer\"><code>InitialContext</code> doc</a> says, you can provide your own factory for <code>InitialContext</code> objects, using <code>java.naming.factory.initial</code> system property. When the code runs inside application server, the system property is set by the server. In our tests, we provide our own implementation of <em>JNDI</em>.</p>\n<p>Here's my <em>Mockito</em> only solution: I defined a custom <code>InitialContextFactory</code> class, that returns a mock of <code>InitialContext</code>. You customize the mock as you wish, probably to return more mocks on <code>lookup</code> calls.</p>\n<pre><code>public class PlainTest {\n  @Mock InitialContextFactory ctx;\n  @InjectMocks Klasa1 klasa1;\n  \n  public static class MyContextFactory implements InitialContextFactory\n  {\n    @Override\n    public Context getInitialContext(Hashtable&lt;?, ?&gt; environment) throws NamingException {\n      ConnectionFactory mockConnFact = mock(ConnectionFactory.class);\n      InitialContext mockCtx = mock(InitialContext.class);\n      when(mockCtx.lookup(&quot;jms1&quot;)).thenReturn(mockConnFact);\n      return mockCtx;\n    }\n  }\n  \n  @Before\n  public void setupClass() throws IOException\n  {\n    MockitoAnnotations.initMocks(this);\n    System.setProperty(&quot;java.naming.factory.initial&quot;,\n      this.getClass().getCanonicalName() + &quot;$MyContextFactory&quot;);\n  }\n</code></pre>\n<p><strong>Spring</strong> before version 6 (added by <em>edit</em>)</p>\n<p>Another edit: this is <a href=\"https://github.com/spring-projects/spring-framework/issues/22779\" rel=\"nofollow noreferrer\">deprecated</a> in 5.2 and removed in 6.0.</p>\n<p>If you don't mind leveraging Spring Framework for testing purposes, here's their simple solution: <a href=\"https://docs.spring.io/spring-framework/docs/5.3.29/javadoc-api/\" rel=\"nofollow noreferrer\">SimpleNamingContextBuilder</a>:</p>\n<pre><code>SimpleNamingContextBuilder builder = new SimpleNamingContextBuilder();\nDataSource ds = new DriverManagerDataSource(...);\nbuilder.bind(&quot;java:comp/env/jdbc/myds&quot;, ds);\nbuilder.activate();\n</code></pre>\n<p>It's ok to put it in <code>@Before</code> or <code>@BeforeClass</code>. After <code>activate()</code>, jndi data will be pulled from spring dummy.</p>\n"},{"tags":[],"owner":{"account_id":2837512,"reputation":1872,"user_id":2437838,"display_name":"Ilker Cat"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1533761839,"creation_date":1533761839,"answer_id":51755543,"question_id":36734275,"body_markdown":"**As of now (PowerMock 1.7.4)**   \r\n  \r\nCreate a mock using `PowerMockito.mock(InitialContext.class)` rather than `PowerMockito.createMock(InitialContext.class)`\r\n\r\n    @Test\r\n    public void connectTest() {\r\n        String jndi = &quot;jndi&quot;;\r\n        InitialContext initialContextMock = PowerMockito.mock(InitialContext.class);\r\n        ConnectionFactory connectionFactoryMock = PowerMockito.mock(ConnectionFactory.class);\r\n       \r\n        PowerMockito.whenNew(InitialContext.class).withNoArguments().thenReturn(initialContextMock);\r\n        when(initialContextMock.lookup(jndi)).thenReturn(connectionFactoryMock);  \r\n        \r\n        ...\r\n        \r\n        // Your asserts go here ...\r\n    }\r\n\r\nDo not create the InitialContext manually but *let PowerMock do it for you*. Also do not create a spy in which PowerMock expects an object. This means that you need to create the InitialContext instance.","title":"How to mock InitialContext constructor in unit testing","body":"<p><strong>As of now (PowerMock 1.7.4)</strong>   </p>\n\n<p>Create a mock using <code>PowerMockito.mock(InitialContext.class)</code> rather than <code>PowerMockito.createMock(InitialContext.class)</code></p>\n\n<pre><code>@Test\npublic void connectTest() {\n    String jndi = \"jndi\";\n    InitialContext initialContextMock = PowerMockito.mock(InitialContext.class);\n    ConnectionFactory connectionFactoryMock = PowerMockito.mock(ConnectionFactory.class);\n\n    PowerMockito.whenNew(InitialContext.class).withNoArguments().thenReturn(initialContextMock);\n    when(initialContextMock.lookup(jndi)).thenReturn(connectionFactoryMock);  \n\n    ...\n\n    // Your asserts go here ...\n}\n</code></pre>\n\n<p>Do not create the InitialContext manually but <em>let PowerMock do it for you</em>. Also do not create a spy in which PowerMock expects an object. This means that you need to create the InitialContext instance.</p>\n"},{"comments":[{"owner":{"account_id":9981936,"reputation":147,"user_id":8743751,"display_name":"Agent47"},"score":0,"creation_date":1612382982,"post_id":52555581,"comment_id":116753120,"body_markdown":"I&#39;m trying to employ this solution for my unit tests too. One thing to get clarified, the value &quot;com.wrapper.MyContextFactory&quot;, is it specific for the running server? Or how to determine the correct value for that? In other words, for what value should I lookup the context for?","body":"I&#39;m trying to employ this solution for my unit tests too. One thing to get clarified, the value &quot;com.wrapper.MyContextFactory&quot;, is it specific for the running server? Or how to determine the correct value for that? In other words, for what value should I lookup the context for?"}],"tags":[],"owner":{"account_id":5507279,"reputation":181,"user_id":4374793,"display_name":"Kaustav Sarkar"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1576563595,"creation_date":1538138491,"answer_id":52555581,"question_id":36734275,"body_markdown":"Adding to [Jarekczek&#39;s][1] answer (Thanks for it!!). Though it is an old question I would like to share my version of it in case it helps someone. I faced the same problem and one might just want to mock IntialContext only in a IntialContextFactory implementation class and it would be a better idea to use this mocked object in other tests or base test classes to avoid duplication.\r\n\r\n    public class MyContextFactory implements InitialContextFactory { \r\n        // Poor Singleton approach. Not thread-safe (but hope you get the idea)\r\n        private static InitialContext mockInitialContext;\r\n        @Override\r\n        public Context getInitialContext(Hashtable&lt;?,?&gt; hshtbl) throws NamingException {\r\n            if(mockInitialContext == null) {\r\n                mockInitialContext = mock(InitialContext.class);\r\n            }\r\n            return mockInitialContext;\r\n        }\r\n    }\r\n\r\n    public class TestClass {\r\n        private DataSource mockDataSource;\r\n        private Connection mockConnection;\r\n\r\n        protected void mockInitialContext() throws NamingException, SQLException {\r\n            System.setProperty(&quot;java.naming.factory.initial&quot;, &quot;com.wrapper.MyContextFactory&quot;);\r\n\r\n            InitialContext mockInitialContext = (InitialContext) NamingManager.getInitialContext(System.getProperties());\r\n            mockDataSource = mock(DataSource.class);\r\n            mockConnection = mock(Connection.class);\r\n\r\n            when(mockInitialContext.lookup(anyString())).thenReturn(mockDataSource);\r\n            when(mockDataSource.getConnection()).thenReturn(mockConnection);\r\n\r\n            try {\r\n                when(mockDataSource.getConnection()).thenReturn(mockConnection);\r\n            } catch (SQLException ex) {\r\n                Logger.getLogger(CLASSNAME).log(Level.SEVERE, null, ex);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nReason behind taking this approach being if someone wants to use DataSource or any other resource provided by JNDI in a different way for different tests, you can follow this approach. There shall be just one instance created for IntialContext unless a multi-threaded test tries to access it simultaneously (don&#39;t know why would one try to do that!). That instance can be used in all places to get JNDI objects you want and use them as you want.\r\n\r\nHope this helps!\r\n\r\n*&quot;Make sure you wash your hands before every meal and avoid System.out.println while debugging for healthy lifestyle&quot;*\r\n\r\n  [1]: https://stackoverflow.com/users/772981/jarekczek","title":"How to mock InitialContext constructor in unit testing","body":"<p>Adding to <a href=\"https://stackoverflow.com/users/772981/jarekczek\">Jarekczek's</a> answer (Thanks for it!!). Though it is an old question I would like to share my version of it in case it helps someone. I faced the same problem and one might just want to mock IntialContext only in a IntialContextFactory implementation class and it would be a better idea to use this mocked object in other tests or base test classes to avoid duplication.</p>\n\n<pre><code>public class MyContextFactory implements InitialContextFactory { \n    // Poor Singleton approach. Not thread-safe (but hope you get the idea)\n    private static InitialContext mockInitialContext;\n    @Override\n    public Context getInitialContext(Hashtable&lt;?,?&gt; hshtbl) throws NamingException {\n        if(mockInitialContext == null) {\n            mockInitialContext = mock(InitialContext.class);\n        }\n        return mockInitialContext;\n    }\n}\n\npublic class TestClass {\n    private DataSource mockDataSource;\n    private Connection mockConnection;\n\n    protected void mockInitialContext() throws NamingException, SQLException {\n        System.setProperty(\"java.naming.factory.initial\", \"com.wrapper.MyContextFactory\");\n\n        InitialContext mockInitialContext = (InitialContext) NamingManager.getInitialContext(System.getProperties());\n        mockDataSource = mock(DataSource.class);\n        mockConnection = mock(Connection.class);\n\n        when(mockInitialContext.lookup(anyString())).thenReturn(mockDataSource);\n        when(mockDataSource.getConnection()).thenReturn(mockConnection);\n\n        try {\n            when(mockDataSource.getConnection()).thenReturn(mockConnection);\n        } catch (SQLException ex) {\n            Logger.getLogger(CLASSNAME).log(Level.SEVERE, null, ex);\n        }\n    }\n}\n</code></pre>\n\n<p>Reason behind taking this approach being if someone wants to use DataSource or any other resource provided by JNDI in a different way for different tests, you can follow this approach. There shall be just one instance created for IntialContext unless a multi-threaded test tries to access it simultaneously (don't know why would one try to do that!). That instance can be used in all places to get JNDI objects you want and use them as you want.</p>\n\n<p>Hope this helps!</p>\n\n<p><em>\"Make sure you wash your hands before every meal and avoid System.out.println while debugging for healthy lifestyle\"</em></p>\n"},{"tags":[],"owner":{"account_id":12578120,"reputation":41,"user_id":9149820,"display_name":"Harish M A"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1624245809,"creation_date":1624245809,"answer_id":68061924,"question_id":36734275,"body_markdown":"Define the following Custom Classes\r\n\r\n    public static class CustomInitialContext extends InitialContext {\r\n\r\n\t\tHashtable&lt;String, Object&gt; ic = new Hashtable&lt;&gt;();\r\n\r\n\t\tpublic CustomInitialContext() throws NamingException {\r\n\t\t\tsuper(true);\r\n\t\t}\r\n\r\n\t\tpublic void bind(String name, Object object) {\r\n\t\t\tic.put(name, object);\r\n\t\t}\r\n\r\n\t\tpublic Object lookup(String name) throws NamingException {\r\n\t\t\treturn ic.get(name);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static class CustomInitialContextFactory implements InitialContextFactory {\r\n\t\tstatic InitialContext ic;\r\n\r\n\t\tpublic CustomInitialContextFactory() {\r\n\t\t\tif (ic == null) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tic = new CustomInitialContext();\r\n\t\t\t\t} catch (NamingException e) {\r\n\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic Context getInitialContext(Hashtable&lt;?, ?&gt; arg0) throws NamingException {\r\n\t\t\treturn ic;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static class CustomInitialContextFactoryBuilder implements InitialContextFactoryBuilder {\r\n\r\n\t\t@Override\r\n\t\tpublic InitialContextFactory createInitialContextFactory(Hashtable&lt;?, ?&gt; environment) throws NamingException {\r\n\t\t\treturn new CustomInitialContextFactory();\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\nand declare factory as \r\n\r\n    NamingManager.setInitialContextFactoryBuilder(new CustomInitialContextFactoryBuilder());","title":"How to mock InitialContext constructor in unit testing","body":"<p>Define the following Custom Classes</p>\n<pre><code>public static class CustomInitialContext extends InitialContext {\n\n    Hashtable&lt;String, Object&gt; ic = new Hashtable&lt;&gt;();\n\n    public CustomInitialContext() throws NamingException {\n        super(true);\n    }\n\n    public void bind(String name, Object object) {\n        ic.put(name, object);\n    }\n\n    public Object lookup(String name) throws NamingException {\n        return ic.get(name);\n    }\n}\n\npublic static class CustomInitialContextFactory implements InitialContextFactory {\n    static InitialContext ic;\n\n    public CustomInitialContextFactory() {\n        if (ic == null) {\n            try {\n                ic = new CustomInitialContext();\n            } catch (NamingException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n\n    public Context getInitialContext(Hashtable&lt;?, ?&gt; arg0) throws NamingException {\n        return ic;\n    }\n}\n\npublic static class CustomInitialContextFactoryBuilder implements InitialContextFactoryBuilder {\n\n    @Override\n    public InitialContextFactory createInitialContextFactory(Hashtable&lt;?, ?&gt; environment) throws NamingException {\n        return new CustomInitialContextFactory();\n    }\n\n}\n</code></pre>\n<p>and declare factory as</p>\n<pre><code>NamingManager.setInitialContextFactoryBuilder(new CustomInitialContextFactoryBuilder());\n</code></pre>\n"}],"owner":{"account_id":5376932,"reputation":159,"user_id":4283476,"display_name":"Anushka Senarathna"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20616,"favorite_count":0,"down_vote_count":1,"up_vote_count":15,"answer_count":5,"score":14,"last_activity_date":1691085980,"creation_date":1461128745,"question_id":36734275,"body_markdown":"when I try to mock following method(Method is using remote EJB call for business logic) for the Junit test, it gives javax.naming.NoInitialContextException\r\n\r\n\r\n    private void someMethod(int id1, int id2, HashMap map){\r\n        ......some code........\r\n\r\n\t\tContext ctx = new InitialContext();\r\n        Object ref = ctx.lookup(&quot;com.java.ejbs.MyEJB&quot;);\r\n\r\n        EJBHome ejbHome = (EJBHome)PortableRemoteObject.narrow(ref, EJBHome.class);\r\n        EJBBean ejbBean = (EJBBean)PortableRemoteObject.narrow(ejbHome.create(), EJBBean.class);\r\n        ejbBean.someMethod(id1,name);\r\n\t\t\r\n\t\t.......some code.......}\r\n\r\nMy unit test for above method\r\n\r\n    @Test\r\n    public void testsomeMethod() throws Exception {\r\n\r\n        .......setting initial code...\r\n        //Mock context and JNDI\r\n\r\n        InitialContext cntxMock = PowerMock.createMock(InitialContext.class);\r\n        PowerMock.expectNew(InitialContext.class).andReturn(cntxMock);\r\n        expect(cntxMock.lookup(&quot;com.java.ejbs.MyEJB&quot;)).andReturn(refMock);               \r\n        \r\n\t\t..........some code..........\r\n\r\n\t\tPowerMock.replayAll();\r\n        Whitebox.invokeMethod(ObjectOfsomeMethodClass, &quot;someMethod&quot;, id1, id2, map);\r\n\r\n\r\n    }\r\n\r\nwhen the **Whitebox.invokeMethod(ObjectOfsomeMethodClass, &quot;someMethod&quot;, id1, id2, map)** method invokes it gives following exception.\r\n\r\n    javax.naming.NoInitialContextException: Need to specify class name in environment or system property, or as an applet parameter, or in an application resource file:  java.naming.factory.initial\r\n\tat javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:645)\r\n\tat javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:288)\r\n\tat javax.naming.InitialContext.getURLOrDefaultInitCtx(InitialContext.java:325)\r\n\tat javax.naming.InitialContext.lookup(InitialContext.java:392)\r\n\r\nI believe, although we mock the **Context** in test method, it does not use the mock object when calling **Whitebox.invokeMethod(ObjectOfsomeMethodClass, &quot;someMethod&quot;, id1, id2, map)** method, instead  of that its trying to invoke the **Context ctx = new InitialContext();** method in original method(someMethod).\r\n\r\n","title":"How to mock InitialContext constructor in unit testing","body":"<p>when I try to mock following method(Method is using remote EJB call for business logic) for the Junit test, it gives javax.naming.NoInitialContextException</p>\n\n<pre><code>private void someMethod(int id1, int id2, HashMap map){\n    ......some code........\n\n    Context ctx = new InitialContext();\n    Object ref = ctx.lookup(\"com.java.ejbs.MyEJB\");\n\n    EJBHome ejbHome = (EJBHome)PortableRemoteObject.narrow(ref, EJBHome.class);\n    EJBBean ejbBean = (EJBBean)PortableRemoteObject.narrow(ejbHome.create(), EJBBean.class);\n    ejbBean.someMethod(id1,name);\n\n    .......some code.......}\n</code></pre>\n\n<p>My unit test for above method</p>\n\n<pre><code>@Test\npublic void testsomeMethod() throws Exception {\n\n    .......setting initial code...\n    //Mock context and JNDI\n\n    InitialContext cntxMock = PowerMock.createMock(InitialContext.class);\n    PowerMock.expectNew(InitialContext.class).andReturn(cntxMock);\n    expect(cntxMock.lookup(\"com.java.ejbs.MyEJB\")).andReturn(refMock);               \n\n    ..........some code..........\n\n    PowerMock.replayAll();\n    Whitebox.invokeMethod(ObjectOfsomeMethodClass, \"someMethod\", id1, id2, map);\n\n\n}\n</code></pre>\n\n<p>when the <strong>Whitebox.invokeMethod(ObjectOfsomeMethodClass, \"someMethod\", id1, id2, map)</strong> method invokes it gives following exception.</p>\n\n<pre><code>javax.naming.NoInitialContextException: Need to specify class name in environment or system property, or as an applet parameter, or in an application resource file:  java.naming.factory.initial\nat javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:645)\nat javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:288)\nat javax.naming.InitialContext.getURLOrDefaultInitCtx(InitialContext.java:325)\nat javax.naming.InitialContext.lookup(InitialContext.java:392)\n</code></pre>\n\n<p>I believe, although we mock the <strong>Context</strong> in test method, it does not use the mock object when calling <strong>Whitebox.invokeMethod(ObjectOfsomeMethodClass, \"someMethod\", id1, id2, map)</strong> method, instead  of that its trying to invoke the <strong>Context ctx = new InitialContext();</strong> method in original method(someMethod).</p>\n"},{"tags":["java","http","talend"],"comments":[{"owner":{"account_id":7611366,"reputation":9515,"user_id":5772095,"display_name":"Skin"},"score":1,"creation_date":1691057269,"post_id":76826762,"comment_id":135441272,"body_markdown":"What component are you using?","body":"What component are you using?"}],"answers":[{"tags":[],"owner":{"account_id":7611366,"reputation":9515,"user_id":5772095,"display_name":"Skin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691061438,"creation_date":1691061438,"answer_id":76827564,"question_id":76826762,"body_markdown":"Firstly, I&#39;m surprised that your job actually builds but if you&#39;re constructing the payload via a simple string.\r\n\r\nTechnically, you should be escaping the quotes and injecting the context variables through string manipulation.\r\n\r\nWithout knowing the exact component you&#39;re using, I&#39;d be doing something like this ...\r\n\r\n    &quot;{ \\&quot;request\\&quot;: \\&quot;hkvhkvh\\&quot;, \\&quot;para\\&quot;: {\\&quot;api_auth_token\\&quot;: \\&quot;biyvglyvlyvlbhikjbvh\\&quot;, \\&quot;user_id\\&quot;: 35641, \\&quot;company_ids\\&quot;: [&quot; + context.company_ids + &quot;], \\&quot;reference_id\\&quot;: &quot; + context.reference_id + &quot; } }&quot;","title":"Unable to pass array value, which is stored in context variable in http body in talend job","body":"<p>Firstly, I'm surprised that your job actually builds but if you're constructing the payload via a simple string.</p>\n<p>Technically, you should be escaping the quotes and injecting the context variables through string manipulation.</p>\n<p>Without knowing the exact component you're using, I'd be doing something like this ...</p>\n<pre><code>&quot;{ \\&quot;request\\&quot;: \\&quot;hkvhkvh\\&quot;, \\&quot;para\\&quot;: {\\&quot;api_auth_token\\&quot;: \\&quot;biyvglyvlyvlbhikjbvh\\&quot;, \\&quot;user_id\\&quot;: 35641, \\&quot;company_ids\\&quot;: [&quot; + context.company_ids + &quot;], \\&quot;reference_id\\&quot;: &quot; + context.reference_id + &quot; } }&quot;\n</code></pre>\n"}],"owner":{"account_id":26735239,"reputation":1,"user_id":20336912,"display_name":"balakrishna"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691085786,"creation_date":1691055444,"question_id":76826762,"body_markdown":"    {\\&quot;request\\&quot;: \\&quot;hkvhkvh\\&quot;, \\&quot;para\\&quot;: {\\&quot;api_auth_token\\&quot;: \\&quot;biyvglyvlyvlbhikjbvh\\&quot;, \\&quot;user_id\\&quot;: 35641, \\&quot;company_ids\\&quot;: [30945], \\&quot;reference_id\\&quot;: \\&quot;+context.reference_id+\\&quot;}}\r\n\r\nIn above http body company_ids is array value. if we hardcoded that value we are able to fetch data but if we pass context variable instead of hardcode value like context.company_id. we getting error like bad request.\r\nkindly help me to solve this issue.\r\n\r\nI tried like this.\r\n\r\n    {\\&quot;request\\&quot;: \\&quot;hkvhkvh\\&quot;, \\&quot;para\\&quot;: {\\&quot;api_auth_token\\&quot;: \\&quot;biyvglyvlyvlbhikjbvh\\&quot;, \\&quot;user_id\\&quot;: 35641, \\&quot;company_ids\\&quot;: [context.company_ids], \\&quot;reference_id\\&quot;: \\&quot;+context.reference_id+\\&quot;} }","title":"Unable to pass array value, which is stored in context variable in http body in talend job","body":"<pre><code>{\\&quot;request\\&quot;: \\&quot;hkvhkvh\\&quot;, \\&quot;para\\&quot;: {\\&quot;api_auth_token\\&quot;: \\&quot;biyvglyvlyvlbhikjbvh\\&quot;, \\&quot;user_id\\&quot;: 35641, \\&quot;company_ids\\&quot;: [30945], \\&quot;reference_id\\&quot;: \\&quot;+context.reference_id+\\&quot;}}\n</code></pre>\n<p>In above http body company_ids is array value. if we hardcoded that value we are able to fetch data but if we pass context variable instead of hardcode value like context.company_id. we getting error like bad request.\nkindly help me to solve this issue.</p>\n<p>I tried like this.</p>\n<pre><code>{\\&quot;request\\&quot;: \\&quot;hkvhkvh\\&quot;, \\&quot;para\\&quot;: {\\&quot;api_auth_token\\&quot;: \\&quot;biyvglyvlyvlbhikjbvh\\&quot;, \\&quot;user_id\\&quot;: 35641, \\&quot;company_ids\\&quot;: [context.company_ids], \\&quot;reference_id\\&quot;: \\&quot;+context.reference_id+\\&quot;} }\n</code></pre>\n"},{"tags":["java","spring","swagger","springfox"],"answers":[{"tags":[],"owner":{"account_id":14681183,"reputation":146,"user_id":10602598,"display_name":"I.Yuldoshev"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1691085297,"creation_date":1669656255,"answer_id":74604321,"question_id":74601611,"body_markdown":"Spring Boot 3 does not support `javax` packages. You should replace them with `jakarta` packages.\r\nYou can read about version 3 updates [here](https://spring.io/blog/2022/05/24/preparing-for-spring-boot-3-0).\r\nThe swagger dependency in your pom requires classes from `javax` package, that`s why it is failing.\r\n\r\nYou can try with Swagger 3:\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\r\n\t&lt;version&gt;1.2.32&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nhttps://www.baeldung.com/spring-rest-openapi-documentation\r\nhttps://www.javainuse.com/spring/boot_swagger3","title":"Implementing Swagger in a Java Spring project","body":"<p>Spring Boot 3 does not support <code>javax</code> packages. You should replace them with <code>jakarta</code> packages.\nYou can read about version 3 updates <a href=\"https://spring.io/blog/2022/05/24/preparing-for-spring-boot-3-0\" rel=\"nofollow noreferrer\">here</a>.\nThe swagger dependency in your pom requires classes from <code>javax</code> package, that`s why it is failing.</p>\n<p>You can try with Swagger 3:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n    &lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\n    &lt;version&gt;1.2.32&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><a href=\"https://www.baeldung.com/spring-rest-openapi-documentation\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-rest-openapi-documentation</a>\n<a href=\"https://www.javainuse.com/spring/boot_swagger3\" rel=\"nofollow noreferrer\">https://www.javainuse.com/spring/boot_swagger3</a></p>\n"}],"owner":{"account_id":22749514,"reputation":123,"user_id":16909865,"display_name":"Leon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":861,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74604321,"answer_count":1,"score":0,"last_activity_date":1691085297,"creation_date":1669643492,"question_id":74601611,"body_markdown":"I want to add Swagger to my Spring application. But I can&#39;t figure out why it&#39;s not working. I found so many solutions for that but for now nothing worked for me.\r\n\r\n```java\r\n@EnableSwagger2\r\n@Configuration\r\npublic class SpringFoxConfig {\r\n\t@Bean\r\n\tpublic Docket api() {\r\n\t\treturn new Docket(DocumentationType.SWAGGER_2)\r\n\t\t\t\t.select()\r\n\t\t\t\t.apis(RequestHandlerSelectors.any())\r\n\t\t\t\t.paths(PathSelectors.any())\r\n\t\t\t\t.build();\r\n\t}\r\n}\r\n``` \r\n\r\npom.xml \r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.0&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.portfolio-generator&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;backend&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;backend&lt;/name&gt;\r\n\t&lt;description&gt;portfolio generator&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;19&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;springfox-boot-starter&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.0.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;commons-validator&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;commons-validator&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;1.4.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\ncurrent error:\r\n&gt;java.lang.TypeNotPresentException: Type javax.servlet.http.HttpServletRequest not present\r\n\tat java.base/sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:117) ~[na:na]\r\n\tat java.base/sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:125) ~[na:na]\r\n\tat java.base/sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49) ~[na:na]\r\n\tat java.base/sun.reflect.generics.visitor.Reifier.reifyTypeArguments(Reifier.java:68) ~[na:na]\r\n\tat java.base/sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:138) ~[na:na]\r\n\tat java.base/sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49) ~[na:na]\r\n\tat java.base/sun.reflect.generics.repository.ClassRepository.computeSuperInterfaces(ClassRepository.java:117) ~[na:na]\r\n\tat java.base/sun.reflect.generics.repository.ClassRepository.getSuperInterfaces(ClassRepository.java:95) ~[na:na]\r\n\tat java.base/java.lang.Class.getGenericInterfaces(Class.java:1250) ~[na:na]\r\n\tat org.springframework.core.ResolvableType.getInterfaces(ResolvableType.java:500) ~[spring-core-6.0.2.jar:6.0.2]\r\n\tat org.springframework.core.ResolvableType.as(ResolvableType.java:448) ~[spring-core-6.0.2.jar:6.0.2]\r\n\tat org.springframework.core.ResolvableType.forClass(ResolvableType.java:1048) ~[spring-core-6.0.2.jar:6.0.2]\r\n\tat org.springframework.plugin.core.config.PluginRegistriesBeanDefinitionRegistrar.getTargetType(PluginRegistriesBeanDefinitionRegistrar.java:101) ~[spring-plugin-core-2.0.0.RELEASE.jar:2.0.0.RELEASE]\r\n\tat org.springframework.plugin.core.config.PluginRegistriesBeanDefinitionRegistrar.registerBeanDefinitions(PluginRegistriesBeanDefinitionRegistrar.java:71) ~[spring-plugin-core-2.0.0.RELEASE.jar:2.0.0.RELEASE]\r\n\tat org.springframework.context.annotation.ImportBeanDefinitionRegistrar.registerBeanDefinitions(ImportBeanDefinitionRegistrar.java:86) ~[spring-context-6.0.2.jar:6.0.2]\r\n\tat org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.lambda$loadBeanDefinitionsFromRegistrars$1(ConfigurationClassBeanDefinitionReader.java:373) ~[spring-context-6.0.2.jar:6.0.2]\r\n\tat java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:729) ~[na:na]\r\n\tat org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsFromRegistrars(ConfigurationClassBeanDefinitionReader.java:372) ~[spring-context-6.0.2.jar:6.0.2]\r\n\tat org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsForConfigurationClass(ConfigurationClassBeanDefinitionReader.java:148) ~[spring-context-6.0.2.jar:6.0.2]\r\n\tat org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitions(ConfigurationClassBeanDefinitionReader.java:120) ~[spring-context-6.0.2.jar:6.0.2]\r\n\tat org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:409) ~[spring-context-6.0.2.jar:6.0.2]\r\n\tat org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:283) ~[spring-context-6.0.2.jar:6.0.2]\r\n\tat org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:344) ~[spring-context-6.0.2.jar:6.0.2]\r\n\tat org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:115) ~[spring-context-6.0.2.jar:6.0.2]\r\n\tat org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:745) ~[spring-context-6.0.2.jar:6.0.2]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:565) ~[spring-context-6.0.2.jar:6.0.2]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.0.0.jar:3.0.0]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730) ~[spring-boot-3.0.0.jar:3.0.0]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432) ~[spring-boot-3.0.0.jar:3.0.0]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-3.0.0.jar:3.0.0]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1302) ~[spring-boot-3.0.0.jar:3.0.0]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1291) ~[spring-boot-3.0.0.jar:3.0.0]\r\n\tat com.portfoliogenerator.backend.BackendApplication.main(BackendApplication.java:11) ~[classes/:na]\r\nCaused by: java.lang.ClassNotFoundException: javax.servlet.http.HttpServletRequest\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641) ~[na:na]\r\n\tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[na:na]\r\n\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521) ~[na:na]\r\n\tat java.base/java.lang.Class.forName0(Native Method) ~[na:na]\r\n\tat java.base/java.lang.Class.forName(Class.java:495) ~[na:na]\r\n\tat java.base/java.lang.Class.forName(Class.java:474) ~[na:na]\r\n\tat java.base/sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:114) ~[na:na]\r\n\t... 32 common frames omitted","title":"Implementing Swagger in a Java Spring project","body":"<p>I want to add Swagger to my Spring application. But I can't figure out why it's not working. I found so many solutions for that but for now nothing worked for me.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@EnableSwagger2\n@Configuration\npublic class SpringFoxConfig {\n    @Bean\n    public Docket api() {\n        return new Docket(DocumentationType.SWAGGER_2)\n                .select()\n                .apis(RequestHandlerSelectors.any())\n                .paths(PathSelectors.any())\n                .build();\n    }\n}\n</code></pre>\n<p>pom.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.portfolio-generator&lt;/groupId&gt;\n    &lt;artifactId&gt;backend&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;backend&lt;/name&gt;\n    &lt;description&gt;portfolio generator&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;19&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n            &lt;artifactId&gt;springfox-boot-starter&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-validator&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-validator&lt;/artifactId&gt;\n            &lt;version&gt;1.4.1&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n\n</code></pre>\n<p>current error:</p>\n<blockquote>\n<p>java.lang.TypeNotPresentException: Type javax.servlet.http.HttpServletRequest not present\nat java.base/sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:117) ~[na:na]\nat java.base/sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:125) ~[na:na]\nat java.base/sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49) ~[na:na]\nat java.base/sun.reflect.generics.visitor.Reifier.reifyTypeArguments(Reifier.java:68) ~[na:na]\nat java.base/sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:138) ~[na:na]\nat java.base/sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49) ~[na:na]\nat java.base/sun.reflect.generics.repository.ClassRepository.computeSuperInterfaces(ClassRepository.java:117) ~[na:na]\nat java.base/sun.reflect.generics.repository.ClassRepository.getSuperInterfaces(ClassRepository.java:95) ~[na:na]\nat java.base/java.lang.Class.getGenericInterfaces(Class.java:1250) ~[na:na]\nat org.springframework.core.ResolvableType.getInterfaces(ResolvableType.java:500) ~[spring-core-6.0.2.jar:6.0.2]\nat org.springframework.core.ResolvableType.as(ResolvableType.java:448) ~[spring-core-6.0.2.jar:6.0.2]\nat org.springframework.core.ResolvableType.forClass(ResolvableType.java:1048) ~[spring-core-6.0.2.jar:6.0.2]\nat org.springframework.plugin.core.config.PluginRegistriesBeanDefinitionRegistrar.getTargetType(PluginRegistriesBeanDefinitionRegistrar.java:101) ~[spring-plugin-core-2.0.0.RELEASE.jar:2.0.0.RELEASE]\nat org.springframework.plugin.core.config.PluginRegistriesBeanDefinitionRegistrar.registerBeanDefinitions(PluginRegistriesBeanDefinitionRegistrar.java:71) ~[spring-plugin-core-2.0.0.RELEASE.jar:2.0.0.RELEASE]\nat org.springframework.context.annotation.ImportBeanDefinitionRegistrar.registerBeanDefinitions(ImportBeanDefinitionRegistrar.java:86) ~[spring-context-6.0.2.jar:6.0.2]\nat org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.lambda$loadBeanDefinitionsFromRegistrars$1(ConfigurationClassBeanDefinitionReader.java:373) ~[spring-context-6.0.2.jar:6.0.2]\nat java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:729) ~[na:na]\nat org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsFromRegistrars(ConfigurationClassBeanDefinitionReader.java:372) ~[spring-context-6.0.2.jar:6.0.2]\nat org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsForConfigurationClass(ConfigurationClassBeanDefinitionReader.java:148) ~[spring-context-6.0.2.jar:6.0.2]\nat org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitions(ConfigurationClassBeanDefinitionReader.java:120) ~[spring-context-6.0.2.jar:6.0.2]\nat org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:409) ~[spring-context-6.0.2.jar:6.0.2]\nat org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:283) ~[spring-context-6.0.2.jar:6.0.2]\nat org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:344) ~[spring-context-6.0.2.jar:6.0.2]\nat org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:115) ~[spring-context-6.0.2.jar:6.0.2]\nat org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:745) ~[spring-context-6.0.2.jar:6.0.2]\nat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:565) ~[spring-context-6.0.2.jar:6.0.2]\nat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.0.0.jar:3.0.0]\nat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730) ~[spring-boot-3.0.0.jar:3.0.0]\nat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432) ~[spring-boot-3.0.0.jar:3.0.0]\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-3.0.0.jar:3.0.0]\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:1302) ~[spring-boot-3.0.0.jar:3.0.0]\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:1291) ~[spring-boot-3.0.0.jar:3.0.0]\nat com.portfoliogenerator.backend.BackendApplication.main(BackendApplication.java:11) ~[classes/:na]\nCaused by: java.lang.ClassNotFoundException: javax.servlet.http.HttpServletRequest\nat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641) ~[na:na]\nat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[na:na]\nat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521) ~[na:na]\nat java.base/java.lang.Class.forName0(Native Method) ~[na:na]\nat java.base/java.lang.Class.forName(Class.java:495) ~[na:na]\nat java.base/java.lang.Class.forName(Class.java:474) ~[na:na]\nat java.base/sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:114) ~[na:na]\n... 32 common frames omitted</p>\n</blockquote>\n"},{"tags":["java","spring-boot","h2"],"comments":[{"owner":{"account_id":18670408,"reputation":143,"user_id":13609359,"display_name":"Slevin"},"score":0,"creation_date":1691083815,"post_id":76830198,"comment_id":135447144,"body_markdown":"You have to exclude the h2 route within the Spring Security Filter Chain.","body":"You have to exclude the h2 route within the Spring Security Filter Chain."}],"answers":[{"comments":[{"owner":{"account_id":29131435,"reputation":23,"user_id":22316603,"display_name":"Bogdan Udrea"},"score":0,"creation_date":1691086570,"post_id":76830391,"comment_id":135447683,"body_markdown":"thanks for your insights!","body":"thanks for your insights!"}],"tags":[],"owner":{"account_id":18670408,"reputation":143,"user_id":13609359,"display_name":"Slevin"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1691084970,"creation_date":1691084015,"answer_id":76830391,"question_id":76830198,"body_markdown":"It seems that you have Spring Security enabled but not explicitly allowed the path to your H2 endpoint.\r\n\r\nA possible SecurityFilterChain setup for H2 only (should be positioned in front of the other FilterChains via `@Order`annotation):\r\n\r\n```java\r\n@Bean\r\n@Order(5)\r\n// @Profile(&quot;development&quot;)\r\npublic SecurityFilterChain h2FilterChain(\r\n        HttpSecurity http,\r\n        @Value(&quot;${spring.h2.console.path:/h2-console}&quot;) String h2ConsolePath) throws Exception {\r\n\r\n    return http\r\n            .securityMatchers(matchers -&gt; matchers\r\n                    /* https://github.com/spring-projects/spring-security/issues/12546#issuecomment-1382891839 */\r\n                    .requestMatchers(AntPathRequestMatcher.antMatcher(h2ConsolePath + &quot;/**&quot;)))\r\n\r\n            .authorizeHttpRequests(authorize -&gt; authorize.anyRequest().permitAll())\r\n\r\n            /* The H2 console runs in a frameset. Thus, we need to set &#39;X-Frame-Options&#39; from &#39;deny&#39; to &#39;sameOrigin&#39;. */\r\n            .headers(header -&gt; header.frameOptions(HeadersConfigurer.FrameOptionsConfig::sameOrigin))\r\n\r\n            /* Otherwise login into H2 won&#39;t work. */\r\n            .csrf(CsrfConfigurer::disable)\r\n\r\n            .build()\r\n}\r\n```\r\n\r\nMake sure to set the h2-console value in the properties correctly.","title":"Failed to configure a DataSource in Spring Boot with H2 in-memory database","body":"<p>It seems that you have Spring Security enabled but not explicitly allowed the path to your H2 endpoint.</p>\n<p>A possible SecurityFilterChain setup for H2 only (should be positioned in front of the other FilterChains via <code>@Order</code>annotation):</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\n@Order(5)\n// @Profile(&quot;development&quot;)\npublic SecurityFilterChain h2FilterChain(\n        HttpSecurity http,\n        @Value(&quot;${spring.h2.console.path:/h2-console}&quot;) String h2ConsolePath) throws Exception {\n\n    return http\n            .securityMatchers(matchers -&gt; matchers\n                    /* https://github.com/spring-projects/spring-security/issues/12546#issuecomment-1382891839 */\n                    .requestMatchers(AntPathRequestMatcher.antMatcher(h2ConsolePath + &quot;/**&quot;)))\n\n            .authorizeHttpRequests(authorize -&gt; authorize.anyRequest().permitAll())\n\n            /* The H2 console runs in a frameset. Thus, we need to set 'X-Frame-Options' from 'deny' to 'sameOrigin'. */\n            .headers(header -&gt; header.frameOptions(HeadersConfigurer.FrameOptionsConfig::sameOrigin))\n\n            /* Otherwise login into H2 won't work. */\n            .csrf(CsrfConfigurer::disable)\n\n            .build()\n}\n</code></pre>\n<p>Make sure to set the h2-console value in the properties correctly.</p>\n"}],"owner":{"account_id":29131435,"reputation":23,"user_id":22316603,"display_name":"Bogdan Udrea"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":235,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":76830391,"answer_count":1,"score":1,"last_activity_date":1691084970,"creation_date":1691082114,"question_id":76830198,"body_markdown":"I am developing a Spring Boot application with H2 as an embedded in-memory database.  I&#39;m facing an issue while trying to access the H2 console. Whenever I navigate to http://localhost:8080/h2-console, it prompts me for a username and password.\r\n\r\n\r\n**The console output:**\r\n\r\n\r\n```\r\n2023-08-03T19:41:47.901+03:00  INFO 5176 --- [           main] c.e.a.AlbacamiereaApplication            : Starting AlbacamiereaApplication using Java 17.0.5 with PID 5176 (C:\\albacamierea\\target\\classes started by Robert in C:\\albacamierea)\r\n2023-08-03T19:41:47.916+03:00  INFO 5176 --- [           main] c.e.a.AlbacamiereaApplication            : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n2023-08-03T19:41:50.102+03:00  INFO 5176 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\r\n2023-08-03T19:41:50.167+03:00  INFO 5176 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 38 ms. Found 0 JPA repository interfaces.\r\n2023-08-03T19:41:51.805+03:00  INFO 5176 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\r\n2023-08-03T19:41:51.809+03:00  INFO 5176 --- [           main] o.a.catalina.core.AprLifecycleListener   : Loaded Apache Tomcat Native library [2.0.3] using APR version [1.7.2].\r\n2023-08-03T19:41:51.851+03:00  INFO 5176 --- [           main] o.a.catalina.core.AprLifecycleListener   : OpenSSL successfully initialized [OpenSSL 3.0.8 7 Feb 2023]\r\n2023-08-03T19:41:51.891+03:00  INFO 5176 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n2023-08-03T19:41:51.892+03:00  INFO 5176 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.11]\r\n2023-08-03T19:41:52.247+03:00  INFO 5176 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n2023-08-03T19:41:52.248+03:00  INFO 5176 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4149 ms\r\n2023-08-03T19:41:52.757+03:00  INFO 5176 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\r\n2023-08-03T19:41:53.629+03:00  INFO 5176 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:d48ab7e7-383a-4245-846e-d273ef5237bd user=SA\r\n2023-08-03T19:41:53.637+03:00  INFO 5176 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\r\n2023-08-03T19:41:53.884+03:00  INFO 5176 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]\r\n2023-08-03T19:41:54.170+03:00  INFO 5176 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.6.Final\r\n2023-08-03T19:41:54.178+03:00  INFO 5176 --- [           main] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer\r\n2023-08-03T19:41:54.854+03:00  INFO 5176 --- [           main] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy\r\n2023-08-03T19:41:55.528+03:00  INFO 5176 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer\r\n2023-08-03T19:41:56.089+03:00  INFO 5176 --- [           main] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy\r\n2023-08-03T19:41:57.195+03:00  INFO 5176 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\r\n2023-08-03T19:41:57.221+03:00  INFO 5176 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit &#39;default&#39;\r\n2023-08-03T19:41:57.358+03:00  WARN 5176 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning\r\n2023-08-03T19:41:58.582+03:00  WARN 5176 --- [           main] .s.s.UserDetailsServiceAutoConfiguration : \r\n\r\nUsing generated security password: dab22a6d-fca6-4e5d-9796-8f4d30c2c9b5\r\n```\r\n\r\n\r\nI have tried accessing the H2 console with a blank username and password, as well as with the default &quot;SA&quot; username and no password, but it still doesn&#39;t work.\r\n","title":"Failed to configure a DataSource in Spring Boot with H2 in-memory database","body":"<p>I am developing a Spring Boot application with H2 as an embedded in-memory database.  I'm facing an issue while trying to access the H2 console. Whenever I navigate to http://localhost:8080/h2-console, it prompts me for a username and password.</p>\n<p><strong>The console output:</strong></p>\n<pre><code>2023-08-03T19:41:47.901+03:00  INFO 5176 --- [           main] c.e.a.AlbacamiereaApplication            : Starting AlbacamiereaApplication using Java 17.0.5 with PID 5176 (C:\\albacamierea\\target\\classes started by Robert in C:\\albacamierea)\n2023-08-03T19:41:47.916+03:00  INFO 5176 --- [           main] c.e.a.AlbacamiereaApplication            : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2023-08-03T19:41:50.102+03:00  INFO 5176 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\n2023-08-03T19:41:50.167+03:00  INFO 5176 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 38 ms. Found 0 JPA repository interfaces.\n2023-08-03T19:41:51.805+03:00  INFO 5176 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\n2023-08-03T19:41:51.809+03:00  INFO 5176 --- [           main] o.a.catalina.core.AprLifecycleListener   : Loaded Apache Tomcat Native library [2.0.3] using APR version [1.7.2].\n2023-08-03T19:41:51.851+03:00  INFO 5176 --- [           main] o.a.catalina.core.AprLifecycleListener   : OpenSSL successfully initialized [OpenSSL 3.0.8 7 Feb 2023]\n2023-08-03T19:41:51.891+03:00  INFO 5176 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2023-08-03T19:41:51.892+03:00  INFO 5176 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.11]\n2023-08-03T19:41:52.247+03:00  INFO 5176 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2023-08-03T19:41:52.248+03:00  INFO 5176 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4149 ms\n2023-08-03T19:41:52.757+03:00  INFO 5176 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\n2023-08-03T19:41:53.629+03:00  INFO 5176 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:d48ab7e7-383a-4245-846e-d273ef5237bd user=SA\n2023-08-03T19:41:53.637+03:00  INFO 5176 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\n2023-08-03T19:41:53.884+03:00  INFO 5176 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]\n2023-08-03T19:41:54.170+03:00  INFO 5176 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.6.Final\n2023-08-03T19:41:54.178+03:00  INFO 5176 --- [           main] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer\n2023-08-03T19:41:54.854+03:00  INFO 5176 --- [           main] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy\n2023-08-03T19:41:55.528+03:00  INFO 5176 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer\n2023-08-03T19:41:56.089+03:00  INFO 5176 --- [           main] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy\n2023-08-03T19:41:57.195+03:00  INFO 5176 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\n2023-08-03T19:41:57.221+03:00  INFO 5176 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'\n2023-08-03T19:41:57.358+03:00  WARN 5176 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning\n2023-08-03T19:41:58.582+03:00  WARN 5176 --- [           main] .s.s.UserDetailsServiceAutoConfiguration : \n\nUsing generated security password: dab22a6d-fca6-4e5d-9796-8f4d30c2c9b5\n</code></pre>\n<p>I have tried accessing the H2 console with a blank username and password, as well as with the default &quot;SA&quot; username and no password, but it still doesn't work.</p>\n"},{"tags":["java","soap","soap-client","wss4j"],"owner":{"account_id":12154225,"reputation":73,"user_id":8873596,"display_name":"mop"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691084785,"creation_date":1691073338,"question_id":76829122,"body_markdown":"I am trying to update a project to WSS4J 2.3. The problem I have is that I am not sure how to add UsernameToken header to an existing SOAP message.\r\n\r\nI have tried the following code to generate the UsernameToken.\r\n```java\r\n    public static void addWSS(Document soap, String userName, String pwd) throws Exception {\r\n        WSSecHeader secHeader = new WSSecHeader(soap);\r\n        secHeader.setMustUnderstand(false);\r\n        secHeader.insertSecurityHeader();\r\n\r\n        WSSecUsernameToken builder = new WSSecUsernameToken(secHeader);\r\n        builder.setPasswordType(WSConstants.PASSWORD_TEXT);\r\n        builder.setUserInfo(userName, pwd);\r\n        builder.addCreated();\r\n        builder.appendToHeader();\r\n        builder.build();// I am not sure if I have to return the signed document or not and if so how to convert it back to a SOAPMessage\r\n    }\r\n```\r\n\r\nI generate the soap message with the following code:\r\n```java\r\nMessageFactory mf = MessageFactory.newInstance();\r\nSOAPMessage msg = mf.createMessage();\r\nSOAPBody body = msg.getSOAPBody();\r\n```\r\n\r\nAnd finally, I send the SOAP message:\r\n```java\r\nSOAPConnection con = SOAPConnectionFactory.newInstance().createConnection();\r\nURL url = new URL(endpoint);\r\nSOAPMessage respuesta = con.call(msg, url);\r\n```\r\n\r\nThe output message does not contain the usernametoken.","title":"Generate UsernameToken with WSS4J","body":"<p>I am trying to update a project to WSS4J 2.3. The problem I have is that I am not sure how to add UsernameToken header to an existing SOAP message.</p>\n<p>I have tried the following code to generate the UsernameToken.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static void addWSS(Document soap, String userName, String pwd) throws Exception {\n        WSSecHeader secHeader = new WSSecHeader(soap);\n        secHeader.setMustUnderstand(false);\n        secHeader.insertSecurityHeader();\n\n        WSSecUsernameToken builder = new WSSecUsernameToken(secHeader);\n        builder.setPasswordType(WSConstants.PASSWORD_TEXT);\n        builder.setUserInfo(userName, pwd);\n        builder.addCreated();\n        builder.appendToHeader();\n        builder.build();// I am not sure if I have to return the signed document or not and if so how to convert it back to a SOAPMessage\n    }\n</code></pre>\n<p>I generate the soap message with the following code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>MessageFactory mf = MessageFactory.newInstance();\nSOAPMessage msg = mf.createMessage();\nSOAPBody body = msg.getSOAPBody();\n</code></pre>\n<p>And finally, I send the SOAP message:</p>\n<pre class=\"lang-java prettyprint-override\"><code>SOAPConnection con = SOAPConnectionFactory.newInstance().createConnection();\nURL url = new URL(endpoint);\nSOAPMessage respuesta = con.call(msg, url);\n</code></pre>\n<p>The output message does not contain the usernametoken.</p>\n"},{"tags":["java","spring","google-app-engine","spring-mvc","validation"],"answers":[{"comments":[{"owner":{"account_id":37019,"reputation":51344,"user_id":105744,"accept_rate":92,"display_name":"Taylor Leese"},"score":0,"creation_date":1271857248,"post_id":2682715,"comment_id":2703070,"body_markdown":"I will give this a try later today, but it already works fine if I forward. I&#39;m trying to get it to work when I redirect.","body":"I will give this a try later today, but it already works fine if I forward. I&#39;m trying to get it to work when I redirect."},{"owner":{"account_id":82031,"reputation":620,"user_id":230955,"display_name":"Ichiro Furusato"},"score":0,"creation_date":1271862466,"post_id":2682715,"comment_id":2703932,"body_markdown":"Understood, I was only suggesting the forward if after adding the BindingResult you don&#39;t actually see it.","body":"Understood, I was only suggesting the forward if after adding the BindingResult you don&#39;t actually see it."}],"tags":[],"owner":{"account_id":82031,"reputation":620,"user_id":230955,"display_name":"Ichiro Furusato"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1271852030,"creation_date":1271852030,"answer_id":2682715,"question_id":2543797,"body_markdown":"Perhaps this is a bit simplistic, but have you tried adding it to your Model? I.e., include the Model in your method&#39;s arguments, then add the BindingResult to it, which is then available in your view.\r\n\r\n    model.addAttribute(&quot;binding&quot;,binding);\r\n\r\nI think you may have to use a forward rather than a redirect (in my head I can&#39;t remember if a redirect loses the session or not &amp;mdash; I could be wrong about this as I don&#39;t have any documentation handy, i.e., if you&#39;re not getting the BindingResult after adding it to the Model, try using a forward instead to confirm this).\r\n","title":"Spring - Redirect after POST (even with validation errors)","body":"<p>Perhaps this is a bit simplistic, but have you tried adding it to your Model? I.e., include the Model in your method's arguments, then add the BindingResult to it, which is then available in your view.</p>\n\n<pre><code>model.addAttribute(\"binding\",binding);\n</code></pre>\n\n<p>I think you may have to use a forward rather than a redirect (in my head I can't remember if a redirect loses the session or not &mdash; I could be wrong about this as I don't have any documentation handy, i.e., if you're not getting the BindingResult after adding it to the Model, try using a forward instead to confirm this).</p>\n"},{"comments":[{"owner":{"account_id":37019,"reputation":51344,"user_id":105744,"accept_rate":92,"display_name":"Taylor Leese"},"score":2,"creation_date":1273504666,"post_id":2802164,"comment_id":2841419,"body_markdown":"The whole point is I want to do the redirect and still display the form errors. I know it will work fine if I forward to a view directly.","body":"The whole point is I want to do the redirect and still display the form errors. I know it will work fine if I forward to a view directly."},{"owner":{"account_id":2007211,"reputation":581,"user_id":1796748,"accept_rate":40,"display_name":"yonikawa"},"score":0,"creation_date":1479921198,"post_id":2802164,"comment_id":68764871,"body_markdown":"@Lewis: Thanks man. This solution helped me with my issue. I had a &#39;post&#39; that returns list of items and the user get redirected to a different page(details) when clicking on individual line items.I wanted to redirect back to the previous page from details page. I added a GET in the controller and passed the previously processed model to the initial view as you stated.","body":"@Lewis: Thanks man. This solution helped me with my issue. I had a &#39;post&#39; that returns list of items and the user get redirected to a different page(details) when clicking on individual line items.I wanted to redirect back to the previous page from details page. I added a GET in the controller and passed the previously processed model to the initial view as you stated."}],"tags":[],"owner":{"account_id":611340,"reputation":11,"user_id":337188,"display_name":"Lewis"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1273490359,"creation_date":1273490359,"answer_id":2802164,"question_id":2543797,"body_markdown":"The problem is you&#39;re redirecting to a new controller, rather than rendering the view and returning the processed form page. You need to do something along the lines of:\r\n\r\n    String FORM_VIEW = wherever_your_form_page_resides\r\n    \r\n    ...\r\n    \r\n    if (binding.hasErrors())\r\n        return FORM_VIEW;\r\n       \r\n\r\nI would keep the paths outside of any methods due to code duplication of strings.\r\n","title":"Spring - Redirect after POST (even with validation errors)","body":"<p>The problem is you're redirecting to a new controller, rather than rendering the view and returning the processed form page. You need to do something along the lines of:</p>\n\n<pre><code>String FORM_VIEW = wherever_your_form_page_resides\n\n...\n\nif (binding.hasErrors())\n    return FORM_VIEW;\n</code></pre>\n\n<p>I would keep the paths outside of any methods due to code duplication of strings.</p>\n"},{"comments":[{"owner":{"account_id":241879,"reputation":10776,"user_id":512993,"accept_rate":90,"display_name":"Ho&#224;ng Long"},"score":2,"creation_date":1358225699,"post_id":3169639,"comment_id":19917770,"body_markdown":"your proposed way is interesting, however I think it would be even better if you can include some sample code","body":"your proposed way is interesting, however I think it would be even better if you can include some sample code"}],"tags":[],"owner":{"account_id":149672,"reputation":3555,"user_id":362332,"accept_rate":76,"display_name":"klonq"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1278112514,"creation_date":1278112514,"answer_id":3169639,"question_id":2543797,"body_markdown":"The only way to persist objects between requests (ie a redirect) is to store the object in a session attribute. So you would include &quot;HttpServletRequest request&quot; in method parameters for both methods (ie, get and post) and retrieve the object via request.getAttribute(&quot;binding&quot;).  That said, and having not tried it myself you may need to figure out how to re-bind the binding to the object in the new request. \r\n\r\nAnother &quot;un-nicer&quot; way is to just change the browser URL using javascript","title":"Spring - Redirect after POST (even with validation errors)","body":"<p>The only way to persist objects between requests (ie a redirect) is to store the object in a session attribute. So you would include \"HttpServletRequest request\" in method parameters for both methods (ie, get and post) and retrieve the object via request.getAttribute(\"binding\").  That said, and having not tried it myself you may need to figure out how to re-bind the binding to the object in the new request. </p>\n\n<p>Another \"un-nicer\" way is to just change the browser URL using javascript</p>\n"},{"comments":[{"owner":{"account_id":953309,"reputation":1257,"user_id":979051,"accept_rate":82,"display_name":"user979051"},"score":0,"creation_date":1375627828,"post_id":7013432,"comment_id":26398207,"body_markdown":"Tried your method, an exception is thrown: &quot;Neither BindingResult nor plain target object for bean name &#39;xxxx&#39; available as request attribute&quot;","body":"Tried your method, an exception is thrown: &quot;Neither BindingResult nor plain target object for bean name &#39;xxxx&#39; available as request attribute&quot;"},{"owner":{"account_id":170154,"reputation":1757,"user_id":396675,"accept_rate":73,"display_name":"rjsang"},"score":0,"creation_date":1375655125,"post_id":7013432,"comment_id":26405607,"body_markdown":"Most likely an error in your JSP.\n\nhttp://www.mkyong.com/spring-mvc/spring-mvc-neither-bindingresult-nor-plain-target-object-for-bean-name-xxx-available-as-request-attribute/","body":"Most likely an error in your JSP.  <a href=\"http://www.mkyong.com/spring-mvc/spring-mvc-neither-bindingresult-nor-plain-target-object-for-bean-name-xxx-available-as-request-attribute/\" rel=\"nofollow noreferrer\">mkyong.com/spring-mvc/&hellip;</a>"},{"owner":{"account_id":3517130,"reputation":5214,"user_id":2940265,"accept_rate":91,"display_name":"Menuka Ishan"},"score":0,"creation_date":1484293297,"post_id":7013432,"comment_id":70459296,"body_markdown":"As My point adding all the attributes to the session bad(unless its necessary). FlashAttributes can use once so I rather like to use it than session. But it depends on your aspect of developing. I uses FlashAttributes when I use single jsp for form submitting and Show success or failed messages without using JavaScript.","body":"As My point adding all the attributes to the session bad(unless its necessary). FlashAttributes can use once so I rather like to use it than session. But it depends on your aspect of developing. I uses FlashAttributes when I use single jsp for form submitting and Show success or failed messages without using JavaScript."}],"tags":[],"owner":{"account_id":170154,"reputation":1757,"user_id":396675,"accept_rate":73,"display_name":"rjsang"},"comment_count":3,"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1312990068,"creation_date":1312990068,"answer_id":7013432,"question_id":2543797,"body_markdown":"I would question why you need the redirect. Why not just submit to the same URL and have it respond differently to a POST? Nevertheless, if you really want to do this:\r\n\r\n    @RequestMapping(value = &quot;/submit&quot;, method = RequestMethod.POST)\r\n    public final String submit(\r\n        @ModelAttribute(&quot;register&quot;) @Valid final Register register,\r\n        final BindingResult binding,\r\n        HttpSession session) {\r\n    \r\n        if (binding.hasErrors()) {\r\n            session.setAttribute(&quot;register&quot;,register);\r\n            session.setAttribute(&quot;binding&quot;,binding);\r\n            return &quot;redirect:/register/create&quot;;\r\n        }\r\n    \r\n        return &quot;redirect:/register/success&quot;;\r\n    }\r\n\r\nThen in your &quot;create&quot; method:\r\n\r\n    model.put(&quot;register&quot;,session.getAttribute(&quot;register&quot;));\r\n    model.put(&quot;org.springframework.validation.BindingResult.register&quot;,session.getAttribute(&quot;register&quot;));\r\n","title":"Spring - Redirect after POST (even with validation errors)","body":"<p>I would question why you need the redirect. Why not just submit to the same URL and have it respond differently to a POST? Nevertheless, if you really want to do this:</p>\n\n<pre><code>@RequestMapping(value = \"/submit\", method = RequestMethod.POST)\npublic final String submit(\n    @ModelAttribute(\"register\") @Valid final Register register,\n    final BindingResult binding,\n    HttpSession session) {\n\n    if (binding.hasErrors()) {\n        session.setAttribute(\"register\",register);\n        session.setAttribute(\"binding\",binding);\n        return \"redirect:/register/create\";\n    }\n\n    return \"redirect:/register/success\";\n}\n</code></pre>\n\n<p>Then in your \"create\" method:</p>\n\n<pre><code>model.put(\"register\",session.getAttribute(\"register\"));\nmodel.put(\"org.springframework.validation.BindingResult.register\",session.getAttribute(\"register\"));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":231764,"reputation":821,"user_id":496166,"display_name":"kevinmrohr"},"score":4,"creation_date":1359139589,"post_id":10049138,"comment_id":20258699,"body_markdown":"It is definitely worth noting that the RedirectAttributes do not work in conjunction with the (obsolete?) ModelAndView concept. They assume your method returns a simple string, as the above example does.","body":"It is definitely worth noting that the RedirectAttributes do not work in conjunction with the (obsolete?) ModelAndView concept. They assume your method returns a simple string, as the above example does."},{"owner":{"account_id":10836,"reputation":196641,"user_id":20654,"accept_rate":80,"display_name":"OscarRyz"},"score":0,"creation_date":1377802334,"post_id":10049138,"comment_id":27232117,"body_markdown":"After this ( in my case ) the attribute is now in the model of the controller handling the redirection, but the binding result has no errors. I had to pass the list of errors and add them to the binding results like this: https://gist.github.com/OscarRyz/6381954","body":"After this ( in my case ) the attribute is now in the model of the controller handling the redirection, but the binding result has no errors. I had to pass the list of errors and add them to the binding results like this: <a href=\"https://gist.github.com/OscarRyz/6381954\" rel=\"nofollow noreferrer\">gist.github.com/OscarRyz/6381954</a>"},{"owner":{"account_id":1031960,"reputation":1619,"user_id":1040124,"display_name":"Jens"},"score":2,"creation_date":1409222357,"post_id":10049138,"comment_id":39888541,"body_markdown":"when doing this i get the error: java.io.NotSerializableException: org.springframework.format.support.DefaultFormattingConversionService","body":"when doing this i get the error: java.io.NotSerializableException: org.springframework.format.support.DefaultFormattingConversi&zwnj;&#8203;onService"},{"owner":{"account_id":3289285,"reputation":501,"user_id":2767952,"display_name":"zutnop"},"score":0,"creation_date":1490376754,"post_id":10049138,"comment_id":73100931,"body_markdown":"@Jens the NotSerializableException is finally fixed in Spring 4.3.4 (it only took 5 years :)) https://jira.spring.io/browse/SPR-8282","body":"@Jens the NotSerializableException is finally fixed in Spring 4.3.4 (it only took 5 years :)) <a href=\"https://jira.spring.io/browse/SPR-8282\" rel=\"nofollow noreferrer\">jira.spring.io/browse/SPR-8282</a>"},{"owner":{"account_id":20627356,"reputation":49,"user_id":15142894,"display_name":"Vikas Roy"},"score":0,"creation_date":1651988764,"post_id":10049138,"comment_id":127494123,"body_markdown":"I need help, when I use &#39;RedirectAttributes attr&#39; then i get error : Failed to convert value of type &#39;org.springframework.validation.BeanPropertyBindingResult&#39; .....","body":"I need help, when I use &#39;RedirectAttributes attr&#39; then i get error : Failed to convert value of type &#39;org.springframework.validation.BeanPropertyBindingResult&#39; ....."}],"tags":[],"owner":{"account_id":893163,"reputation":1357,"user_id":931050,"accept_rate":59,"display_name":"Oscar"},"comment_count":5,"down_vote_count":1,"up_vote_count":80,"is_accepted":false,"score":79,"last_activity_date":1333811914,"creation_date":1333745637,"answer_id":10049138,"question_id":2543797,"body_markdown":"Since Spring 3.1 you can use RedirectAttributes. Add the attributes that you want to have available before doing the redirect. Add both, the BindingResult and the object that you are using to validate, in this case Register.\r\n\r\nFor BindingResult you will use the name: &quot;org.springframework.validation.BindingResult.[name of your ModelAttribute]&quot;.\r\n\r\nFor the object that you are using to validate you will use the name of ModelAttribute.\r\n\r\nTo use RedirectAttributes you have to add this in your config file. Among other things you are telling to Spring to use some newer classes: \r\n\r\n    &lt;mvc:annotation-driven /&gt;\r\n\r\nNow the errors will be displayed wherever you are redirecting\r\n\r\n\r\n    @RequestMapping(value = &quot;/submit&quot;, method = RequestMethod.POST)\r\n    public final String submit(@ModelAttribute(&quot;register&quot;) @Valid final Register register, final BindingResult binding, RedirectAttributes attr, HttpSession session) {\r\n\r\n    if (binding.hasErrors()) {\r\n        attr.addFlashAttribute(&quot;org.springframework.validation.BindingResult.register&quot;, binding);\r\n        attr.addFlashAttribute(&quot;register&quot;, register);\r\n        return &quot;redirect:/register/create&quot;;\r\n    }\r\n\r\n    return &quot;redirect:/register/success&quot;;\r\n    }","title":"Spring - Redirect after POST (even with validation errors)","body":"<p>Since Spring 3.1 you can use RedirectAttributes. Add the attributes that you want to have available before doing the redirect. Add both, the BindingResult and the object that you are using to validate, in this case Register.</p>\n\n<p>For BindingResult you will use the name: \"org.springframework.validation.BindingResult.[name of your ModelAttribute]\".</p>\n\n<p>For the object that you are using to validate you will use the name of ModelAttribute.</p>\n\n<p>To use RedirectAttributes you have to add this in your config file. Among other things you are telling to Spring to use some newer classes: </p>\n\n<pre><code>&lt;mvc:annotation-driven /&gt;\n</code></pre>\n\n<p>Now the errors will be displayed wherever you are redirecting</p>\n\n<pre><code>@RequestMapping(value = \"/submit\", method = RequestMethod.POST)\npublic final String submit(@ModelAttribute(\"register\") @Valid final Register register, final BindingResult binding, RedirectAttributes attr, HttpSession session) {\n\nif (binding.hasErrors()) {\n    attr.addFlashAttribute(\"org.springframework.validation.BindingResult.register\", binding);\n    attr.addFlashAttribute(\"register\", register);\n    return \"redirect:/register/create\";\n}\n\nreturn \"redirect:/register/success\";\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1230713,"reputation":2299,"user_id":1195382,"display_name":"adnans"},"score":0,"creation_date":1413724631,"post_id":23749112,"comment_id":41543166,"body_markdown":"This solved it for me. Linked article explains it even better. Thanks.","body":"This solved it for me. Linked article explains it even better. Thanks."},{"owner":{"account_id":8897,"reputation":11219,"user_id":16206,"accept_rate":78,"display_name":"borjab"},"score":9,"creation_date":1414168352,"post_id":23749112,"comment_id":41726590,"body_markdown":"Common pitfall: change &quot;register&quot; in &quot;org.springframework.validation.BindingResult.register&quot; to the name of your modelAttribute","body":"Common pitfall: change &quot;register&quot; in &quot;org.springframework.validation.BindingResult.register&quot; to the name of your modelAttribute"},{"owner":{"account_id":2558379,"reputation":894,"user_id":2219912,"accept_rate":70,"display_name":"Rupesh Yadav."},"score":1,"creation_date":1452613800,"post_id":23749112,"comment_id":57241767,"body_markdown":"This is more correct approach!!!!!!!!\ni didn&#39;t saw this answer and was struggling with @Oscar answer, one suggestion, for oscar that please add this answer to your answer so that your answer will be complete and no one will struggle like i did.\n:) thanks guys saved my time.","body":"This is more correct approach!!!!!!!! i didn&#39;t saw this answer and was struggling with @Oscar answer, one suggestion, for oscar that please add this answer to your answer so that your answer will be complete and no one will struggle like i did. :) thanks guys saved my time."},{"owner":{"account_id":3220420,"reputation":864,"user_id":3854962,"display_name":"UTF_or_Death"},"score":0,"creation_date":1471353945,"post_id":23749112,"comment_id":65305435,"body_markdown":"A better way is to keep the object creation in the JSP file. Like this: `&lt;% if( request.getAttribute(&quot;register&quot;) == null ) reqest.setAttribute(&quot;register&quot;, new Register()) %&gt;`. If you have a lot of controllers resolving that view you don&#39;t want to put this logic into each and every one of them. And although Java code in JSP is considered bad practice this code is not business logic and really belongs to the form tag.","body":"A better way is to keep the object creation in the JSP file. Like this: <code>&lt;% if( request.getAttribute(&quot;register&quot;) == null ) reqest.setAttribute(&quot;register&quot;, new Register()) %&gt;</code>. If you have a lot of controllers resolving that view you don&#39;t want to put this logic into each and every one of them. And although Java code in JSP is considered bad practice this code is not business logic and really belongs to the form tag."},{"owner":{"account_id":337881,"reputation":2204,"user_id":666414,"accept_rate":50,"display_name":"maxxyme"},"score":0,"creation_date":1482232342,"post_id":23749112,"comment_id":69681431,"body_markdown":"_A better way is to keep the object creation in the JSP file_ **except** if you don&#39;t have a JSP as view technology...","body":"<i>A better way is to keep the object creation in the JSP file</i> <b>except</b> if you don&#39;t have a JSP as view technology..."},{"owner":{"account_id":337881,"reputation":2204,"user_id":666414,"accept_rate":50,"display_name":"maxxyme"},"score":7,"creation_date":1482234091,"post_id":23749112,"comment_id":69682446,"body_markdown":"If you can&#39;t access to the source article on gerrydevstory.com, here is an archived version: http://web.archive.org/web/20160606223639/https://gerrydevstory.com/2013/07/11/preserving-validation-error-messages-on-spring-mvc-form-post-redirect-get/","body":"If you can&#39;t access to the source article on gerrydevstory.com, here is an archived version: <a href=\"http://web.archive.org/web/20160606223639/https://gerrydevstory.com/2013/07/11/preserving-validation-error-messages-on-spring-mvc-form-post-redirect-get/\" rel=\"nofollow noreferrer\">web.archive.org/web/20160606223639/https://gerrydevstory.com&zwnj;&#8203;/&hellip;</a>"},{"owner":{"account_id":8686829,"reputation":157,"user_id":7024080,"display_name":"Ghoti and Chips"},"score":0,"creation_date":1662541340,"post_id":23749112,"comment_id":130027047,"body_markdown":"I did a happy dance after a half hour of struggling with &quot;preserve BindingResult after redirect&quot; -- the if-statement was indeed what fixed it for me","body":"I did a happy dance after a half hour of struggling with &quot;preserve BindingResult after redirect&quot; -- the if-statement was indeed what fixed it for me"}],"tags":[],"owner":{"account_id":985380,"reputation":7450,"user_id":1005102,"accept_rate":71,"display_name":"Utku &#214;zdemir"},"comment_count":7,"down_vote_count":0,"up_vote_count":67,"is_accepted":false,"score":67,"last_activity_date":1400544999,"creation_date":1400544999,"answer_id":23749112,"question_id":2543797,"body_markdown":"In addition to Oscar&#39;s nice answer, if you are following that `RedirectAttributes` approach, do not forget that you are actually passing the `modelAttribute` to the redirected page. This means if you create a new instance of that modelAttribute for the redirected page (in a controller), **you will lose the validation errors**. So, if your **POST** controller method is something like this:\r\n\r\n    @RequestMapping(value = &quot;/submit&quot;, method = RequestMethod.POST)\r\n    public final String submit(@ModelAttribute(&quot;register&quot;) @Valid final Register register, final BindingResult binding, RedirectAttributes attr, HttpSession session) {\r\n    \r\n    if (binding.hasErrors()) {\r\n        attr.addFlashAttribute(&quot;org.springframework.validation.BindingResult.register&quot;, binding);\r\n        attr.addFlashAttribute(&quot;register&quot;, register);\r\n        return &quot;redirect:/register/create&quot;;\r\n    }\r\n    \r\n    return &quot;redirect:/register/success&quot;;\r\n    }\r\n\r\nThen you will probably need to do a modification in your register create page **GET** controller. From this:\r\n\r\n    @RequestMapping(value = &quot;/register/create&quot;, method = RequestMethod.GET)\r\n    public String registerCreatePage(Model model) {\r\n        // some stuff\r\n        model.addAttribute(&quot;register&quot;, new Register());\r\n        // some more stuff\r\n    }\r\n\r\nto\r\n\r\n    @RequestMapping(value = &quot;/register/create&quot;, method = RequestMethod.GET)\r\n    public String registerCreatePage(Model model) {\r\n        // some stuff\r\n        if (!model.containsAttribute(&quot;register&quot;)) {\r\n            model.addAttribute(&quot;register&quot;, new Register());\r\n        }\r\n        // some more stuff\r\n    }\r\n\r\n\r\nSource: http://gerrydevstory.com/2013/07/11/preserving-validation-error-messages-on-spring-mvc-form-post-redirect-get/","title":"Spring - Redirect after POST (even with validation errors)","body":"<p>In addition to Oscar's nice answer, if you are following that <code>RedirectAttributes</code> approach, do not forget that you are actually passing the <code>modelAttribute</code> to the redirected page. This means if you create a new instance of that modelAttribute for the redirected page (in a controller), <strong>you will lose the validation errors</strong>. So, if your <strong>POST</strong> controller method is something like this:</p>\n\n<pre><code>@RequestMapping(value = \"/submit\", method = RequestMethod.POST)\npublic final String submit(@ModelAttribute(\"register\") @Valid final Register register, final BindingResult binding, RedirectAttributes attr, HttpSession session) {\n\nif (binding.hasErrors()) {\n    attr.addFlashAttribute(\"org.springframework.validation.BindingResult.register\", binding);\n    attr.addFlashAttribute(\"register\", register);\n    return \"redirect:/register/create\";\n}\n\nreturn \"redirect:/register/success\";\n}\n</code></pre>\n\n<p>Then you will probably need to do a modification in your register create page <strong>GET</strong> controller. From this:</p>\n\n<pre><code>@RequestMapping(value = \"/register/create\", method = RequestMethod.GET)\npublic String registerCreatePage(Model model) {\n    // some stuff\n    model.addAttribute(\"register\", new Register());\n    // some more stuff\n}\n</code></pre>\n\n<p>to</p>\n\n<pre><code>@RequestMapping(value = \"/register/create\", method = RequestMethod.GET)\npublic String registerCreatePage(Model model) {\n    // some stuff\n    if (!model.containsAttribute(\"register\")) {\n        model.addAttribute(\"register\", new Register());\n    }\n    // some more stuff\n}\n</code></pre>\n\n<p>Source: <a href=\"http://gerrydevstory.com/2013/07/11/preserving-validation-error-messages-on-spring-mvc-form-post-redirect-get/\" rel=\"noreferrer\">http://gerrydevstory.com/2013/07/11/preserving-validation-error-messages-on-spring-mvc-form-post-redirect-get/</a></p>\n"},{"tags":[],"owner":{"account_id":222410,"reputation":4950,"user_id":480980,"display_name":"Rossen Stoyanchev"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1483478280,"creation_date":1483478280,"answer_id":41452519,"question_id":2543797,"body_markdown":"I don&#39;t know the exact issue with Google App Engine but using the [ForwardedHeaderFilter](https://github.com/spring-projects/spring-framework/blob/master/spring-web/src/main/java/org/springframework/web/filter/ForwardedHeaderFilter.java) may help to preserve the original scheme that the client used. This filter was added in Spring Framework 4.3 but some Servlet containers provide similar filters and the filter is self-sufficient so you can also just grab the source if needed.","title":"Spring - Redirect after POST (even with validation errors)","body":"<p>I don't know the exact issue with Google App Engine but using the <a href=\"https://github.com/spring-projects/spring-framework/blob/master/spring-web/src/main/java/org/springframework/web/filter/ForwardedHeaderFilter.java\" rel=\"nofollow noreferrer\">ForwardedHeaderFilter</a> may help to preserve the original scheme that the client used. This filter was added in Spring Framework 4.3 but some Servlet containers provide similar filters and the filter is self-sufficient so you can also just grab the source if needed.</p>\n"},{"tags":[],"owner":{"account_id":8783701,"reputation":363,"user_id":6566531,"display_name":"tlarson"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691084453,"creation_date":1691084453,"answer_id":76830434,"question_id":2543797,"body_markdown":"Here is an update to this same question for Spring/Spring Boot in 2023 (at least what is working for me with thymeleaf). Updating Utku &#214;zdemir&#39;s answer:\r\n\r\n`@Valid` will automatically perform validation before entering controller and call a `MethodArgumentNotValidException` upon failure, so you have to get rid of `@Valid` in method definition and manually use `org.springframework.validation.Validator` (that is, if you don&#39;t want to centrally handle the form errors by overwriting exceptions).\r\n\r\nAlso,`BindingResult` now has a static key (`MODEL_KEY_PREFIX`) you can call to get it&#39;s proper key name. \r\n\r\nAlso, use `org.springframework.web.servlet.view.RedirectView` instead of a string to redirect with flashAttributes.\r\n\r\n     @Autowired\r\n     Validator validator;\r\n     \r\n     @RequestMapping(value = &quot;/submit&quot;, method = RequestMethod.POST)\r\n     public final RedirectView submit(@ModelAttribute(&quot;register&quot;) final Register register, final BindingResult binding, RedirectAttributes attr, HttpSession session) {\r\n         \r\n              //Validate manually (remember to remove @Valid in method declare)\r\n              validator.validate(register, binding);\r\n        \r\n              if (binding.hasErrors()) {\r\n                   attr.addFlashAttribute(BindingResult.MODEL_KEY_PREFIX+&quot;register&quot;, binding);\r\n                   attr.addFlashAttribute(&quot;register&quot;, register);\r\n                   //remember to change return type of method from string to RedirectView\r\n                   return new RedirectView(&quot;/register/create&quot;, true);\r\n              }\r\n              //remember to change return type of method from string to RedirectView\r\n              return new RedirectView(&quot;/register/success&quot;, true);\r\n        \r\n         }\r\nFlashAttributes are automatically added to the model in the redirected method.\r\nThat goes for both the entity (Request) and the BindingErrors for the fields. However, if (for some weird reason) you need to get them from the FlashAttributes directly (instead of just the Model), you can access them using `org.springframework.web.servlet.support.RequestContextUtils` using the request. This utility is actually used for accessing custom flash attributes that you may have added in the POST because those (unlike the BindingErrors), you&#39;ll have to add manually to the model.\r\n\r\n   \r\n\r\n    @RequestMapping(value = &quot;/register/create&quot;, method = RequestMethod.GET)\r\n    public String registerCreatePage(HttpServletRequest request, Model model) {\r\n\r\n      // get the BindingResults errors from flash attributes if you want (but kind of pointless)\r\n      Map&lt;String, ?&gt; flashMap = RequestContextUtils.getInputFlashMap(request);\r\n      if (flashMap != null &amp;&amp; flashMap.containsKey(BindingResult.MODEL_KEY_PREFIX + &quot;register&quot;)) {\r\n            BindingResult fieldErrors1 = (BindingResult) flashMap.get(BindingResult.MODEL_KEY_PREFIX + &quot;register&quot;);\r\n        }\r\n      if (flashMap != null &amp;&amp; flashMap.containsKey(&quot;register&quot;)) {\r\n            Register register = (Register) flashMap.get(&quot;register&quot;);\r\n        }\r\n\r\n      // or just get it from the Model cause it was already added by the system\r\n      BindingResult fieldErrors2 = (BindingResult)model.asMap().get(BindingResult.MODEL_KEY_PREFIX+&quot;register&quot;);\r\n      Register register2 = (Register)model.asMap().get(&quot;register&quot;);  \r\n\r\n      //Or just return form cause thymeleaf or other view should find errors and model as is.\r\n    }\r\n\r\n","title":"Spring - Redirect after POST (even with validation errors)","body":"<p>Here is an update to this same question for Spring/Spring Boot in 2023 (at least what is working for me with thymeleaf). Updating Utku Özdemir's answer:</p>\n<p><code>@Valid</code> will automatically perform validation before entering controller and call a <code>MethodArgumentNotValidException</code> upon failure, so you have to get rid of <code>@Valid</code> in method definition and manually use <code>org.springframework.validation.Validator</code> (that is, if you don't want to centrally handle the form errors by overwriting exceptions).</p>\n<p>Also,<code>BindingResult</code> now has a static key (<code>MODEL_KEY_PREFIX</code>) you can call to get it's proper key name.</p>\n<p>Also, use <code>org.springframework.web.servlet.view.RedirectView</code> instead of a string to redirect with flashAttributes.</p>\n<pre><code> @Autowired\n Validator validator;\n \n @RequestMapping(value = &quot;/submit&quot;, method = RequestMethod.POST)\n public final RedirectView submit(@ModelAttribute(&quot;register&quot;) final Register register, final BindingResult binding, RedirectAttributes attr, HttpSession session) {\n     \n          //Validate manually (remember to remove @Valid in method declare)\n          validator.validate(register, binding);\n    \n          if (binding.hasErrors()) {\n               attr.addFlashAttribute(BindingResult.MODEL_KEY_PREFIX+&quot;register&quot;, binding);\n               attr.addFlashAttribute(&quot;register&quot;, register);\n               //remember to change return type of method from string to RedirectView\n               return new RedirectView(&quot;/register/create&quot;, true);\n          }\n          //remember to change return type of method from string to RedirectView\n          return new RedirectView(&quot;/register/success&quot;, true);\n    \n     }\n</code></pre>\n<p>FlashAttributes are automatically added to the model in the redirected method.\nThat goes for both the entity (Request) and the BindingErrors for the fields. However, if (for some weird reason) you need to get them from the FlashAttributes directly (instead of just the Model), you can access them using <code>org.springframework.web.servlet.support.RequestContextUtils</code> using the request. This utility is actually used for accessing custom flash attributes that you may have added in the POST because those (unlike the BindingErrors), you'll have to add manually to the model.</p>\n<pre><code>@RequestMapping(value = &quot;/register/create&quot;, method = RequestMethod.GET)\npublic String registerCreatePage(HttpServletRequest request, Model model) {\n\n  // get the BindingResults errors from flash attributes if you want (but kind of pointless)\n  Map&lt;String, ?&gt; flashMap = RequestContextUtils.getInputFlashMap(request);\n  if (flashMap != null &amp;&amp; flashMap.containsKey(BindingResult.MODEL_KEY_PREFIX + &quot;register&quot;)) {\n        BindingResult fieldErrors1 = (BindingResult) flashMap.get(BindingResult.MODEL_KEY_PREFIX + &quot;register&quot;);\n    }\n  if (flashMap != null &amp;&amp; flashMap.containsKey(&quot;register&quot;)) {\n        Register register = (Register) flashMap.get(&quot;register&quot;);\n    }\n\n  // or just get it from the Model cause it was already added by the system\n  BindingResult fieldErrors2 = (BindingResult)model.asMap().get(BindingResult.MODEL_KEY_PREFIX+&quot;register&quot;);\n  Register register2 = (Register)model.asMap().get(&quot;register&quot;);  \n\n  //Or just return form cause thymeleaf or other view should find errors and model as is.\n}\n</code></pre>\n"}],"owner":{"account_id":37019,"reputation":51344,"user_id":105744,"accept_rate":92,"display_name":"Taylor Leese"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85433,"favorite_count":0,"down_vote_count":0,"up_vote_count":73,"answer_count":8,"score":73,"last_activity_date":1691084453,"creation_date":1269938106,"question_id":2543797,"body_markdown":"I&#39;m trying to figure out how to &quot;preserve&quot; the BindingResult so it can be used in a subsequent GET via the Spring `&lt;form:errors&gt;` tag. The reason I want to do this is because of Google App Engine&#39;s SSL limitations. I have a form which is displayed via HTTP and the post is to an HTTPS URL. If I only forward rather than redirect then the user would see the https://whatever.appspot.com/my/form URL. I&#39;m trying to avoid this. Any ideas how to approach this?\r\n\r\nBelow is what I&#39;d like to do, but I only see validation errors when I use `return &quot;create&quot;`.\r\n\r\n    @RequestMapping(value = &quot;/submit&quot;, method = RequestMethod.POST)\r\n    public final String submit(\r\n        @ModelAttribute(&quot;register&quot;) @Valid final Register register,\r\n        final BindingResult binding) {\r\n    \r\n        if (binding.hasErrors()) {\r\n            return &quot;redirect:/register/create&quot;;\r\n        }\r\n    \r\n        return &quot;redirect:/register/success&quot;;\r\n    }","title":"Spring - Redirect after POST (even with validation errors)","body":"<p>I'm trying to figure out how to \"preserve\" the BindingResult so it can be used in a subsequent GET via the Spring <code>&lt;form:errors&gt;</code> tag. The reason I want to do this is because of Google App Engine's SSL limitations. I have a form which is displayed via HTTP and the post is to an HTTPS URL. If I only forward rather than redirect then the user would see the <a href=\"https://whatever.appspot.com/my/form\" rel=\"noreferrer\">https://whatever.appspot.com/my/form</a> URL. I'm trying to avoid this. Any ideas how to approach this?</p>\n\n<p>Below is what I'd like to do, but I only see validation errors when I use <code>return \"create\"</code>.</p>\n\n<pre><code>@RequestMapping(value = \"/submit\", method = RequestMethod.POST)\npublic final String submit(\n    @ModelAttribute(\"register\") @Valid final Register register,\n    final BindingResult binding) {\n\n    if (binding.hasErrors()) {\n        return \"redirect:/register/create\";\n    }\n\n    return \"redirect:/register/success\";\n}\n</code></pre>\n"},{"tags":["java","predicate","java-8","negate"],"comments":[{"owner":{"account_id":1546239,"reputation":3192,"user_id":1439733,"display_name":"Stefan Zobel"},"score":9,"creation_date":1516031369,"post_id":21488056,"comment_id":83515694,"body_markdown":"[JDK-8050818](https://bugs.openjdk.java.net/browse/JDK-8050818) covers the addition of a static `Predicate.not(Predicate)` method. But that issue is still open so we&#39;ll see this at the earliest in Java 12 (if ever).","body":"<a href=\"https://bugs.openjdk.java.net/browse/JDK-8050818\" rel=\"nofollow noreferrer\">JDK-8050818</a> covers the addition of a static <code>Predicate.not(Predicate)</code> method. But that issue is still open so we&#39;ll see this at the earliest in Java 12 (if ever)."},{"owner":{"account_id":1939636,"reputation":28467,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":2,"creation_date":1526916378,"post_id":21488056,"comment_id":87917023,"body_markdown":"Seems like [this answer](https://stackoverflow.com/a/22492361/1746118) could be the ultimate solution adapted in JDK/11 as well.","body":"Seems like <a href=\"https://stackoverflow.com/a/22492361/1746118\">this answer</a> could be the ultimate solution adapted in JDK/11 as well."},{"owner":{"account_id":1410189,"reputation":66,"user_id":1336952,"display_name":"Mike Twain"},"score":4,"creation_date":1546901244,"post_id":21488056,"comment_id":94999284,"body_markdown":"I would really like to see a special method reference syntax for this case: s.filter(String::!isEmpty)","body":"I would really like to see a special method reference syntax for this case: s.filter(String::!isEmpty)"}],"answers":[{"comments":[{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1391195829,"post_id":21488231,"comment_id":32434919,"body_markdown":"You need to get a `Predicate` first.","body":"You need to get a <code>Predicate</code> first."},{"owner":{"account_id":36208,"reputation":240326,"user_id":103154,"display_name":"axtavt"},"score":22,"creation_date":1391195846,"post_id":21488231,"comment_id":32434932,"body_markdown":"You have to cast `String::isEmpty()` to `Predicate&lt;String&gt;` before - it&#39;s very ugly.","body":"You have to cast <code>String::isEmpty()</code> to <code>Predicate&lt;String&gt;</code> before - it&#39;s very ugly."},{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":3,"creation_date":1391195996,"post_id":21488231,"comment_id":32435018,"body_markdown":"@assylias Use as `Predicate&lt;String&gt; p = (Predicate&lt;String&gt;) String::isEmpty;` and `p.negate()`.","body":"@assylias Use as <code>Predicate&lt;String&gt; p = (Predicate&lt;String&gt;) String::isEmpty;</code> and <code>p.negate()</code>."},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":10,"creation_date":1391196037,"post_id":21488231,"comment_id":32435034,"body_markdown":"@SotiriosDelimanolis I know, but that defeats the purpose - I&#39;d rather write `s -&gt; !s.isEmpty()` in that case!","body":"@SotiriosDelimanolis I know, but that defeats the purpose - I&#39;d rather write <code>s -&gt; !s.isEmpty()</code> in that case!"},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1391196129,"post_id":21488231,"comment_id":32435082,"body_markdown":"@assylias: Yes, I believe that&#39;s actually the idea; that just writing out the lambda longhand is the intended fallback.","body":"@assylias: Yes, I believe that&#39;s actually the idea; that just writing out the lambda longhand is the intended fallback."},{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1391196942,"post_id":21488231,"comment_id":32435493,"body_markdown":"@assylias [`Predicates`](http://download.java.net/lambda/b81/docs/api/java/util/function/Predicates.html) might be helpful, if it ends up in the final JDK.","body":"@assylias <a href=\"http://download.java.net/lambda/b81/docs/api/java/util/function/Predicates.html\" rel=\"nofollow noreferrer\"><code>Predicates</code></a> might be helpful, if it ends up in the final JDK."},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":0,"creation_date":1391197055,"post_id":21488231,"comment_id":32435545,"body_markdown":"@SotiriosDelimanolis Outch - if it&#39;s not there any more, then it&#39;s been removed... That&#39;s my answer I suppose then!","body":"@SotiriosDelimanolis Outch - if it&#39;s not there any more, then it&#39;s been removed... That&#39;s my answer I suppose then!"},{"owner":{"account_id":2243116,"reputation":5530,"user_id":1977151,"accept_rate":40,"display_name":"Vlasec"},"score":0,"creation_date":1438692066,"post_id":21488231,"comment_id":51544513,"body_markdown":"btw. @SotiriosDelimanolis - the explicit typecast is unnecessary.","body":"btw. @SotiriosDelimanolis - the explicit typecast is unnecessary."}],"tags":[],"owner":{"account_id":3093821,"reputation":53931,"user_id":3182664,"accept_rate":55,"display_name":"Marco13"},"comment_count":8,"down_vote_count":4,"up_vote_count":15,"is_accepted":false,"score":11,"last_activity_date":1400678396,"creation_date":1391195697,"answer_id":21488231,"question_id":21488056,"body_markdown":"Shouldn&#39;t [`Predicate#negate`][1] be what you are looking for?\r\n\r\n [1]: http://docs.oracle.com/javase/8/docs/api/java/util/function/Predicate.html#negate--","title":"How to negate a method reference predicate","body":"<p>Shouldn't <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/function/Predicate.html#negate--\" rel=\"noreferrer\"><code>Predicate#negate</code></a> be what you are looking for?</p>\n"},{"comments":[{"owner":{"account_id":2590176,"reputation":1914,"user_id":2245051,"accept_rate":50,"display_name":"Jos&#233; Andias"},"score":0,"creation_date":1452242631,"post_id":21506889,"comment_id":57090623,"body_markdown":"Why do you say it is a **lot faster**?","body":"Why do you say it is a <b>lot faster</b>?"},{"owner":{"account_id":1730551,"reputation":13017,"user_id":1584255,"accept_rate":65,"display_name":"The Coordinator"},"score":0,"creation_date":1452282532,"post_id":21506889,"comment_id":57116179,"body_markdown":"@Jos&#233;Andias (1) Is it faster or &#39;a lot faster&#39;? (2) If so, why?  What have you determined?","body":"@Jos&#233;Andias (1) Is it faster or &#39;a lot faster&#39;? (2) If so, why?  What have you determined?"},{"owner":{"account_id":2590176,"reputation":1914,"user_id":2245051,"accept_rate":50,"display_name":"Jos&#233; Andias"},"score":3,"creation_date":1452502795,"post_id":21506889,"comment_id":57180711,"body_markdown":"I am asking you to elaborate on &quot;a lot faster to run&quot;. The questions: (1) Is it faster or &#39;a lot faster&#39;? (2) If so, why? What have you determined? are better answered by you, the author of the statement. I am not considering it to be faster or slower. Thank you","body":"I am asking you to elaborate on &quot;a lot faster to run&quot;. The questions: (1) Is it faster or &#39;a lot faster&#39;? (2) If so, why? What have you determined? are better answered by you, the author of the statement. I am not considering it to be faster or slower. Thank you"},{"owner":{"account_id":1730551,"reputation":13017,"user_id":1584255,"accept_rate":65,"display_name":"The Coordinator"},"score":2,"creation_date":1452672564,"post_id":21506889,"comment_id":57267764,"body_markdown":"Then I&#39;ll throw this out for your consideration — It eliminates a stream creation, it eliminates using another method call (negative function for predicate), and it eliminates a temporary accumulator list/counter. So a few things that are saved by the last construct. I&#39;m no sure if it is faster or how much faster, but I assume it is &#39;a lot&#39; faster. But perhaps &#39;a lot&#39; is subjective. It is simpler to code the later than making negative predicates and streams to do a straight count. My preference .","body":"Then I&#39;ll throw this out for your consideration — It eliminates a stream creation, it eliminates using another method call (negative function for predicate), and it eliminates a temporary accumulator list/counter. So a few things that are saved by the last construct. I&#39;m no sure if it is faster or how much faster, but I assume it is &#39;a lot&#39; faster. But perhaps &#39;a lot&#39; is subjective. It is simpler to code the later than making negative predicates and streams to do a straight count. My preference ."},{"owner":{"account_id":2243116,"reputation":5530,"user_id":1977151,"accept_rate":40,"display_name":"Vlasec"},"score":0,"creation_date":1460560665,"post_id":21506889,"comment_id":60802566,"body_markdown":"Java can optimize compile-time and runtime. For example if you write `static int SIZE = 16 * 1024;`, it is evaluated compile-time. If you concatenate multiple strings in a single expression, StringBuilder is used. Anyway, if you want maximum efficiency, try other language, if not, try to write it readable rather than &quot;optimized to the core&quot;. Optimize the algoritm, not the function call count.","body":"Java can optimize compile-time and runtime. For example if you write <code>static int SIZE = 16 * 1024;</code>, it is evaluated compile-time. If you concatenate multiple strings in a single expression, StringBuilder is used. Anyway, if you want maximum efficiency, try other language, if not, try to write it readable rather than &quot;optimized to the core&quot;. Optimize the algoritm, not the function call count."},{"owner":{"account_id":1730551,"reputation":13017,"user_id":1584255,"accept_rate":65,"display_name":"The Coordinator"},"score":0,"creation_date":1500160200,"post_id":21506889,"comment_id":77217808,"body_markdown":"Right you are. Although I&#39;m not a big fan of the long explicit function cast method. Nevertheless, @Vlasec is correct.","body":"Right you are. Although I&#39;m not a big fan of the long explicit function cast method. Nevertheless, @Vlasec is correct."},{"owner":{"account_id":71488,"reputation":3028,"user_id":206771,"accept_rate":64,"display_name":"Joel Shemtov"},"score":5,"creation_date":1521100316,"post_id":21506889,"comment_id":85590280,"body_markdown":"negate() seems like an ideal solution. Pity it isn&#39;t static like `Predicate.negate(String::isEmpty);` without the cumbersome casting.","body":"negate() seems like an ideal solution. Pity it isn&#39;t static like <code>Predicate.negate(String::isEmpty);</code> without the cumbersome casting."},{"owner":{"account_id":2773242,"reputation":1056,"user_id":2387391,"accept_rate":57,"display_name":"Eagle_Eye"},"score":0,"creation_date":1530253990,"post_id":21506889,"comment_id":89178929,"body_markdown":"Can we dynamically decide whether to negate the predicate or not ? May be from a boolean parameter passed ?","body":"Can we dynamically decide whether to negate the predicate or not ? May be from a boolean parameter passed ?"}],"tags":[],"owner":{"account_id":1730551,"reputation":13017,"user_id":1584255,"accept_rate":65,"display_name":"The Coordinator"},"comment_count":8,"down_vote_count":2,"up_vote_count":165,"is_accepted":false,"score":163,"last_activity_date":1500159988,"creation_date":1391313921,"answer_id":21506889,"question_id":21488056,"body_markdown":"There is a way to compose a method reference that is the opposite of a current method reference. See @vlasec&#39;s answer below that shows how by explicitly casting the method reference to a `Predicate` and then converting it using the `negate` function. That is one way among a few other not too troublesome ways to do it.\r\n\r\nThe opposite of this:\r\n\r\n    Stream&lt;String&gt; s = ...;\r\n    int emptyStrings = s.filter(String::isEmpty).count();\r\n\r\nis this:\r\n\r\n    Stream&lt;String&gt; s = ...;\r\n    int notEmptyStrings = s.filter(((Predicate&lt;String&gt;) String::isEmpty).negate()).count()\r\n\r\nor this:\r\n\r\n    Stream&lt;String&gt; s = ...;\r\n    int notEmptyStrings = s.filter( it -&gt; !it.isEmpty() ).count();\r\n\r\nPersonally, I prefer the later technique because I find it clearer to read `it -&gt; !it.isEmpty()` than a long verbose explicit cast and then negate.\r\n\r\nOne could also make a predicate and reuse it:\r\n\r\n    Predicate&lt;String&gt; notEmpty = (String it) -&gt; !it.isEmpty();\r\n    \r\n    Stream&lt;String&gt; s = ...;\r\n    int notEmptyStrings = s.filter(notEmpty).count();\r\n\r\n\r\nOr, if having a collection or array, just use a for-loop which is simple, has less overhead, and *might be **faster:\r\n\r\n    int notEmpty = 0;\r\n    for(String s : list) if(!s.isEmpty()) notEmpty++;\r\n\r\n\r\n*If you want to know what is faster, then use JMH http://openjdk.java.net/projects/code-tools/jmh, and avoid hand benchmark code unless it avoids all JVM optimizations — see https://stackoverflow.com/questions/22658322/java-8-performance-of-streams-vs-collections\r\n\r\n**I am getting flak for suggesting that the for-loop technique is faster. It eliminates a stream creation, it eliminates using another method call (negative function for predicate), and it eliminates a temporary accumulator list/counter. So a few things that are saved by the last construct that might make it faster. \r\n\r\nI do think it is simpler and nicer though, even if not faster. If the job calls for a hammer and a nail, don&#39;t bring in a chainsaw and glue! I know some of you take issue with that.\r\n\r\nwish-list: I would like to see Java `Stream` functions evolve a bit now that Java users are more familiar with them. For example, the &#39;count&#39; method in Stream could accept a `Predicate` so that this can be done directly like this:\r\n    \r\n    Stream&lt;String&gt; s = ...;\r\n    int notEmptyStrings = s.count(it -&gt; !it.isEmpty());\r\n\r\n    or\r\n\r\n    List&lt;String&gt; list = ...;\r\n    int notEmptyStrings = lists.count(it -&gt; !it.isEmpty());","title":"How to negate a method reference predicate","body":"<p>There is a way to compose a method reference that is the opposite of a current method reference. See @vlasec's answer below that shows how by explicitly casting the method reference to a <code>Predicate</code> and then converting it using the <code>negate</code> function. That is one way among a few other not too troublesome ways to do it.</p>\n\n<p>The opposite of this:</p>\n\n<pre><code>Stream&lt;String&gt; s = ...;\nint emptyStrings = s.filter(String::isEmpty).count();\n</code></pre>\n\n<p>is this:</p>\n\n<pre><code>Stream&lt;String&gt; s = ...;\nint notEmptyStrings = s.filter(((Predicate&lt;String&gt;) String::isEmpty).negate()).count()\n</code></pre>\n\n<p>or this:</p>\n\n<pre><code>Stream&lt;String&gt; s = ...;\nint notEmptyStrings = s.filter( it -&gt; !it.isEmpty() ).count();\n</code></pre>\n\n<p>Personally, I prefer the later technique because I find it clearer to read <code>it -&gt; !it.isEmpty()</code> than a long verbose explicit cast and then negate.</p>\n\n<p>One could also make a predicate and reuse it:</p>\n\n<pre><code>Predicate&lt;String&gt; notEmpty = (String it) -&gt; !it.isEmpty();\n\nStream&lt;String&gt; s = ...;\nint notEmptyStrings = s.filter(notEmpty).count();\n</code></pre>\n\n<p>Or, if having a collection or array, just use a for-loop which is simple, has less overhead, and *might be **faster:</p>\n\n<pre><code>int notEmpty = 0;\nfor(String s : list) if(!s.isEmpty()) notEmpty++;\n</code></pre>\n\n<p>*If you want to know what is faster, then use JMH <a href=\"http://openjdk.java.net/projects/code-tools/jmh\" rel=\"noreferrer\">http://openjdk.java.net/projects/code-tools/jmh</a>, and avoid hand benchmark code unless it avoids all JVM optimizations — see <a href=\"https://stackoverflow.com/questions/22658322/java-8-performance-of-streams-vs-collections\">Java 8: performance of Streams vs Collections</a></p>\n\n<p>**I am getting flak for suggesting that the for-loop technique is faster. It eliminates a stream creation, it eliminates using another method call (negative function for predicate), and it eliminates a temporary accumulator list/counter. So a few things that are saved by the last construct that might make it faster. </p>\n\n<p>I do think it is simpler and nicer though, even if not faster. If the job calls for a hammer and a nail, don't bring in a chainsaw and glue! I know some of you take issue with that.</p>\n\n<p>wish-list: I would like to see Java <code>Stream</code> functions evolve a bit now that Java users are more familiar with them. For example, the 'count' method in Stream could accept a <code>Predicate</code> so that this can be done directly like this:</p>\n\n<pre><code>Stream&lt;String&gt; s = ...;\nint notEmptyStrings = s.count(it -&gt; !it.isEmpty());\n\nor\n\nList&lt;String&gt; list = ...;\nint notEmptyStrings = lists.count(it -&gt; !it.isEmpty());\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2237265,"reputation":26976,"user_id":1973271,"accept_rate":100,"display_name":"flup"},"score":9,"creation_date":1425138619,"post_id":22492361,"comment_id":45843506,"body_markdown":"@SaintHill but then you have to write it out, giving the parameter a name","body":"@SaintHill but then you have to write it out, giving the parameter a name"},{"owner":{"account_id":2237265,"reputation":26976,"user_id":1973271,"accept_rate":100,"display_name":"flup"},"score":23,"creation_date":1425138794,"post_id":22492361,"comment_id":45843569,"body_markdown":"It is in guava http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Predicates.html#not(com.google.common.base.Predicate)","body":"It is in guava <a href=\"http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Predicates.html#not(com.google.common.base.Predicate)\" rel=\"nofollow noreferrer\">docs.guava-libraries.googlecode.com/git/javadoc/com/google/&hellip;</a>"},{"owner":{"account_id":7505,"reputation":7034,"user_id":13075,"accept_rate":83,"display_name":"Henrik Aasted S&#248;rensen"},"score":6,"creation_date":1507550112,"post_id":22492361,"comment_id":80240604,"body_markdown":"Updated Guava link: https://static.javadoc.io/com.google.guava/guava/23.0/com/google/common/base/Predicates.html#not-com.google.common.base.Predicate-","body":"Updated Guava link: <a href=\"https://static.javadoc.io/com.google.guava/guava/23.0/com/google/common/base/Predicates.html#not-com.google.common.base.Predicate-\" rel=\"nofollow noreferrer\">static.javadoc.io/com.google.guava/guava/23.0/com/google/com&zwnj;&#8203;mon/&hellip;</a>"}],"tags":[],"owner":{"account_id":1333530,"reputation":2650,"user_id":1276828,"display_name":"davidillsley"},"comment_count":3,"down_vote_count":0,"up_vote_count":249,"is_accepted":false,"score":249,"last_activity_date":1575985091,"creation_date":1395181568,"answer_id":22492361,"question_id":21488056,"body_markdown":"I&#39;m planning to static import the following to allow for the method reference to be used inline: \r\n\r\n    public static &lt;T&gt; Predicate&lt;T&gt; not(Predicate&lt;T&gt; t) {\r\n        return t.negate();\r\n    }\r\n\r\ne.g.\r\n\r\n    Stream&lt;String&gt; s = ...;\r\n    long nonEmptyStrings = s.filter(not(String::isEmpty)).count();\r\n\r\n\r\n***Update***: Starting from Java-11, the JDK offers a [similar solution](https://bugs.openjdk.java.net/browse/JDK-8203428) built-in as well.","title":"How to negate a method reference predicate","body":"<p>I'm planning to static import the following to allow for the method reference to be used inline: </p>\n\n<pre><code>public static &lt;T&gt; Predicate&lt;T&gt; not(Predicate&lt;T&gt; t) {\n    return t.negate();\n}\n</code></pre>\n\n<p>e.g.</p>\n\n<pre><code>Stream&lt;String&gt; s = ...;\nlong nonEmptyStrings = s.filter(not(String::isEmpty)).count();\n</code></pre>\n\n<p><strong><em>Update</em></strong>: Starting from Java-11, the JDK offers a <a href=\"https://bugs.openjdk.java.net/browse/JDK-8203428\" rel=\"noreferrer\">similar solution</a> built-in as well.</p>\n"},{"comments":[{"owner":{"account_id":178970,"reputation":5078,"user_id":411282,"accept_rate":67,"display_name":"Joshua Goldberg"},"score":4,"creation_date":1477601271,"post_id":29401301,"comment_id":67846314,"body_markdown":"Interesting – you can&#39;t inline the functional `::` reference like one might wish(`String::isEmpty.negate()`), but if you assign to a variable first (or cast to `Predicate&lt;String&gt;` first), that works.  I think lambda w/ `!` will be most readable in most cases, but it&#39;s helpful to know what can and can&#39;t compile.","body":"Interesting – you can&#39;t inline the functional <code>::</code> reference like one might wish(<code>String::isEmpty.negate()</code>), but if you assign to a variable first (or cast to <code>Predicate&lt;String&gt;</code> first), that works.  I think lambda w/ <code>!</code> will be most readable in most cases, but it&#39;s helpful to know what can and can&#39;t compile."},{"owner":{"account_id":2243116,"reputation":5530,"user_id":1977151,"accept_rate":40,"display_name":"Vlasec"},"score":3,"creation_date":1477904873,"post_id":29401301,"comment_id":67932701,"body_markdown":"@JoshuaGoldberg I explained that in my answer: The method reference is not a Predicate on its own. Here, the casting is done by the variable.","body":"@JoshuaGoldberg I explained that in my answer: The method reference is not a Predicate on its own. Here, the casting is done by the variable."}],"tags":[],"owner":{"account_id":3069662,"reputation":7424,"user_id":2600638,"display_name":"Jose Alban"},"comment_count":2,"down_vote_count":0,"up_vote_count":52,"is_accepted":false,"score":52,"last_activity_date":1427924226,"creation_date":1427924226,"answer_id":29401301,"question_id":21488056,"body_markdown":"Building on other&#39;s answers and personal experience:\r\n\r\n    Predicate&lt;String&gt; blank = String::isEmpty;\r\n    content.stream()\r\n           .filter(blank.negate())","title":"How to negate a method reference predicate","body":"<p>Building on other's answers and personal experience:</p>\n\n<pre><code>Predicate&lt;String&gt; blank = String::isEmpty;\ncontent.stream()\n       .filter(blank.negate())\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2243116,"reputation":5530,"user_id":1977151,"accept_rate":40,"display_name":"Vlasec"},"score":1,"creation_date":1464949971,"post_id":30475342,"comment_id":62707069,"body_markdown":"I&#39;m actually surprised this works - but it seems that JDK favours Predicate&lt;T&gt; over Function&lt;T, Boolean&gt;. But you won&#39;t get Lambdas to cast anything to Function&lt;T, Boolean&gt;.","body":"I&#39;m actually surprised this works - but it seems that JDK favours Predicate&lt;T&gt; over Function&lt;T, Boolean&gt;. But you won&#39;t get Lambdas to cast anything to Function&lt;T, Boolean&gt;."},{"owner":{"account_id":48850,"reputation":2104,"user_id":145289,"accept_rate":20,"display_name":"Daniel Pinyol"},"score":0,"creation_date":1490972050,"post_id":30475342,"comment_id":73364714,"body_markdown":"It works for String but not for List: Error:(20, 39) java: reference to as is ambiguous\n  both method &lt;T&gt;as(java.util.function.Consumer&lt;T&gt;) in com.strands.sbs.function.Lambdas and method &lt;T,R&gt;as(java.util.function.Function&lt;T,R&gt;) in com.strands.sbs.function.Lambdas match","body":"It works for String but not for List: Error:(20, 39) java: reference to as is ambiguous   both method &lt;T&gt;as(java.util.function.Consumer&lt;T&gt;) in com.strands.sbs.function.Lambdas and method &lt;T,R&gt;as(java.util.function.Function&lt;T,R&gt;) in com.strands.sbs.function.Lambdas match"},{"owner":{"account_id":372736,"reputation":2561,"user_id":721956,"accept_rate":54,"display_name":"Askar Kalykov"},"score":1,"creation_date":1490972780,"post_id":30475342,"comment_id":73365230,"body_markdown":"Daniel, it might happen if you&#39;re trying to use overloaded method :)","body":"Daniel, it might happen if you&#39;re trying to use overloaded method :)"},{"owner":{"account_id":2243116,"reputation":5530,"user_id":1977151,"accept_rate":40,"display_name":"Vlasec"},"score":1,"creation_date":1533905923,"post_id":30475342,"comment_id":90531280,"body_markdown":"Now that I understand type inference much better than originally, I understand how it works. Basically, it just finds the only option that works. Looks interesting, I just don&#39;t know if there is some better name that doesn&#39;t cause boilerplate.","body":"Now that I understand type inference much better than originally, I understand how it works. Basically, it just finds the only option that works. Looks interesting, I just don&#39;t know if there is some better name that doesn&#39;t cause boilerplate."}],"tags":[],"owner":{"account_id":372736,"reputation":2561,"user_id":721956,"accept_rate":54,"display_name":"Askar Kalykov"},"comment_count":4,"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1432710202,"creation_date":1432710202,"answer_id":30475342,"question_id":21488056,"body_markdown":"Another option is to utilize lambda casting in non-ambiguous contexts into one class:\r\n\r\n    public static class Lambdas {\r\n        public static &lt;T&gt; Predicate&lt;T&gt; as(Predicate&lt;T&gt; predicate){\r\n            return predicate;\r\n        }\r\n    \r\n        public static &lt;T&gt; Consumer&lt;T&gt; as(Consumer&lt;T&gt; consumer){\r\n            return consumer;\r\n        }\r\n    \r\n        public static &lt;T&gt; Supplier&lt;T&gt; as(Supplier&lt;T&gt; supplier){\r\n            return supplier;\r\n        }\r\n    \r\n        public static &lt;T, R&gt; Function&lt;T, R&gt; as(Function&lt;T, R&gt; function){\r\n            return function;\r\n        }\r\n    \r\n    }\r\n\r\n... and then static import the utility class:\r\n\r\n    stream.filter(as(String::isEmpty).negate())","title":"How to negate a method reference predicate","body":"<p>Another option is to utilize lambda casting in non-ambiguous contexts into one class:</p>\n\n<pre><code>public static class Lambdas {\n    public static &lt;T&gt; Predicate&lt;T&gt; as(Predicate&lt;T&gt; predicate){\n        return predicate;\n    }\n\n    public static &lt;T&gt; Consumer&lt;T&gt; as(Consumer&lt;T&gt; consumer){\n        return consumer;\n    }\n\n    public static &lt;T&gt; Supplier&lt;T&gt; as(Supplier&lt;T&gt; supplier){\n        return supplier;\n    }\n\n    public static &lt;T, R&gt; Function&lt;T, R&gt; as(Function&lt;T, R&gt; function){\n        return function;\n    }\n\n}\n</code></pre>\n\n<p>... and then static import the utility class:</p>\n\n<pre><code>stream.filter(as(String::isEmpty).negate())\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2243116,"reputation":5530,"user_id":1977151,"accept_rate":40,"display_name":"Vlasec"},"comment_count":0,"down_vote_count":0,"up_vote_count":98,"is_accepted":false,"score":98,"last_activity_date":1672042162,"creation_date":1432816000,"answer_id":30506585,"question_id":21488056,"body_markdown":"`Predicate` has methods `and`, `or` and `negate`.\r\n\r\nHowever, `String::isEmpty` is not a `Predicate`, it&#39;s just a `String -&gt; Boolean` lambda and it could still become anything, e.g. `Function&lt;String, Boolean&gt;`. **Type inference** is what needs to happen first. The `filter` method infers type **implicitly**. But if you negate it before passing it as an argument, it no longer happens. As @axtavt mentioned, **explicit** inference can be used as an ugly way:\r\n\r\n    s.filter(((Predicate&lt;String&gt;) String::isEmpty).negate()).count()\r\n\r\nThere are other ways advised in other answers, with static `not` method and lambda most likely being the best ideas. *This concludes the **tl;dr** section.*\r\n\r\n---\r\n\r\nHowever, if you want some deeper understanding of lambda type inference, I&#39;d like to explain it a bit more to depth, using examples. Look at these and try to figure out what happens:\r\n\r\n    Object obj1                  = String::isEmpty;\r\n    Predicate&lt;String&gt; p1         = s -&gt; s.isEmpty();\r\n    Function&lt;String, Boolean&gt; f1 = String::isEmpty;\r\n    Object obj2                  = p1;\r\n    Function&lt;String, Boolean&gt; f2 = (Function&lt;String, Boolean&gt;) obj2;\r\n    Function&lt;String, Boolean&gt; f3 = p1::test;\r\n    Predicate&lt;Integer&gt; p2        = s -&gt; s.isEmpty();\r\n    Predicate&lt;Integer&gt; p3        = String::isEmpty;\r\n\r\n* obj1 doesn&#39;t compile - lambdas need to infer a functional interface (= with one abstract method)\r\n* p1 and f1 work just fine, each inferring a different type\r\n* obj2 casts a `Predicate` to `Object` - silly but valid\r\n* f2 fails at runtime - you cannot cast `Predicate` to `Function`, it&#39;s no longer about inference\r\n* f3 works - you call the predicate&#39;s method `test` that is defined by its lambda\r\n* p2 doesn&#39;t compile - `Integer` doesn&#39;t have `isEmpty` method\r\n* p3 doesn&#39;t compile either - there is no `String::isEmpty` static method with `Integer` argument","title":"How to negate a method reference predicate","body":"<p><code>Predicate</code> has methods <code>and</code>, <code>or</code> and <code>negate</code>.</p>\n<p>However, <code>String::isEmpty</code> is not a <code>Predicate</code>, it's just a <code>String -&gt; Boolean</code> lambda and it could still become anything, e.g. <code>Function&lt;String, Boolean&gt;</code>. <strong>Type inference</strong> is what needs to happen first. The <code>filter</code> method infers type <strong>implicitly</strong>. But if you negate it before passing it as an argument, it no longer happens. As @axtavt mentioned, <strong>explicit</strong> inference can be used as an ugly way:</p>\n<pre><code>s.filter(((Predicate&lt;String&gt;) String::isEmpty).negate()).count()\n</code></pre>\n<p>There are other ways advised in other answers, with static <code>not</code> method and lambda most likely being the best ideas. <em>This concludes the <strong>tl;dr</strong> section.</em></p>\n<hr />\n<p>However, if you want some deeper understanding of lambda type inference, I'd like to explain it a bit more to depth, using examples. Look at these and try to figure out what happens:</p>\n<pre><code>Object obj1                  = String::isEmpty;\nPredicate&lt;String&gt; p1         = s -&gt; s.isEmpty();\nFunction&lt;String, Boolean&gt; f1 = String::isEmpty;\nObject obj2                  = p1;\nFunction&lt;String, Boolean&gt; f2 = (Function&lt;String, Boolean&gt;) obj2;\nFunction&lt;String, Boolean&gt; f3 = p1::test;\nPredicate&lt;Integer&gt; p2        = s -&gt; s.isEmpty();\nPredicate&lt;Integer&gt; p3        = String::isEmpty;\n</code></pre>\n<ul>\n<li>obj1 doesn't compile - lambdas need to infer a functional interface (= with one abstract method)</li>\n<li>p1 and f1 work just fine, each inferring a different type</li>\n<li>obj2 casts a <code>Predicate</code> to <code>Object</code> - silly but valid</li>\n<li>f2 fails at runtime - you cannot cast <code>Predicate</code> to <code>Function</code>, it's no longer about inference</li>\n<li>f3 works - you call the predicate's method <code>test</code> that is defined by its lambda</li>\n<li>p2 doesn't compile - <code>Integer</code> doesn't have <code>isEmpty</code> method</li>\n<li>p3 doesn't compile either - there is no <code>String::isEmpty</code> static method with <code>Integer</code> argument</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":4970207,"reputation":290,"user_id":3998278,"display_name":"Per-&#197;ke Minborg"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1454024810,"creation_date":1454024810,"answer_id":35074360,"question_id":21488056,"body_markdown":"I have written a complete utility class (inspired by Askar&#39;s proposal) that can take Java 8 lambda expression and turn them (if applicable) into any typed standard Java 8 lambda defined in the package ```java.util.function```. You can for example do:\r\n\r\n- ```asPredicate(String::isEmpty).negate()```\r\n- ```asBiPredicate(String::equals).negate()```\r\n\r\nBecause there would be numerous ambiguities if all the static methods would be named just ```as() ```, I opted to call the method &quot;as&quot; followed by the returned type. This gives us full control of the lambda interpretation. Below is the first part of the (somewhat large) utility class revealing the pattern used. \r\n\r\nHave a look at the [complete class here][1] (at gist).\r\n\r\n\r\n\r\n    public class FunctionCastUtil {\r\n\r\n        public static &lt;T, U&gt; BiConsumer&lt;T, U&gt; asBiConsumer(BiConsumer&lt;T, U&gt; biConsumer) {\r\n            return biConsumer;\r\n        }\r\n\r\n        public static &lt;T, U, R&gt; BiFunction&lt;T, U, R&gt; asBiFunction(BiFunction&lt;T, U, R&gt; biFunction) {\r\n            return biFunction;\r\n        }\r\n\r\n         public static &lt;T&gt; BinaryOperator&lt;T&gt; asBinaryOperator(BinaryOperator&lt;T&gt; binaryOperator) {\r\n            return binaryOperator;\r\n        }\r\n\r\n        ... and so on...\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n  [1]: https://gist.github.com/minborg/0bcaaf77945788722991","title":"How to negate a method reference predicate","body":"<p>I have written a complete utility class (inspired by Askar's proposal) that can take Java 8 lambda expression and turn them (if applicable) into any typed standard Java 8 lambda defined in the package <code>java.util.function</code>. You can for example do:</p>\n\n<ul>\n<li><code>asPredicate(String::isEmpty).negate()</code></li>\n<li><code>asBiPredicate(String::equals).negate()</code></li>\n</ul>\n\n<p>Because there would be numerous ambiguities if all the static methods would be named just <code>as()</code>, I opted to call the method \"as\" followed by the returned type. This gives us full control of the lambda interpretation. Below is the first part of the (somewhat large) utility class revealing the pattern used. </p>\n\n<p>Have a look at the <a href=\"https://gist.github.com/minborg/0bcaaf77945788722991\" rel=\"nofollow\">complete class here</a> (at gist).</p>\n\n<pre><code>public class FunctionCastUtil {\n\n    public static &lt;T, U&gt; BiConsumer&lt;T, U&gt; asBiConsumer(BiConsumer&lt;T, U&gt; biConsumer) {\n        return biConsumer;\n    }\n\n    public static &lt;T, U, R&gt; BiFunction&lt;T, U, R&gt; asBiFunction(BiFunction&lt;T, U, R&gt; biFunction) {\n        return biFunction;\n    }\n\n     public static &lt;T&gt; BinaryOperator&lt;T&gt; asBinaryOperator(BinaryOperator&lt;T&gt; binaryOperator) {\n        return binaryOperator;\n    }\n\n    ... and so on...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6722754,"reputation":1152,"user_id":5182052,"display_name":"Nikhil Nanivadekar"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1459037496,"creation_date":1459037496,"answer_id":36242382,"question_id":21488056,"body_markdown":"You can use [Predicates][1] from [Eclipse Collections][2]\r\n\r\n    MutableList&lt;String&gt; strings = Lists.mutable.empty();\r\n    int nonEmptyStrings = strings.count(Predicates.not(String::isEmpty));\r\n\r\nIf you can&#39;t change the strings from `List`:\r\n\r\n    List&lt;String&gt; strings = new ArrayList&lt;&gt;();\r\n    int nonEmptyStrings = ListAdapter.adapt(strings).count(Predicates.not(String::isEmpty));\r\n\r\nIf you only need a negation of `String.isEmpty()` you can also use `StringPredicates.notEmpty()`.\r\n\r\nNote: I am a contributor to Eclipse Collections.\r\n\r\n  [1]: http://www.eclipse.org/collections/javadoc/7.0.0/org/eclipse/collections/impl/block/factory/Predicates.html\r\n  [2]: http://www.eclipse.org/collections/","title":"How to negate a method reference predicate","body":"<p>You can use <a href=\"http://www.eclipse.org/collections/javadoc/7.0.0/org/eclipse/collections/impl/block/factory/Predicates.html\" rel=\"nofollow\">Predicates</a> from <a href=\"http://www.eclipse.org/collections/\" rel=\"nofollow\">Eclipse Collections</a></p>\n\n<pre><code>MutableList&lt;String&gt; strings = Lists.mutable.empty();\nint nonEmptyStrings = strings.count(Predicates.not(String::isEmpty));\n</code></pre>\n\n<p>If you can't change the strings from <code>List</code>:</p>\n\n<pre><code>List&lt;String&gt; strings = new ArrayList&lt;&gt;();\nint nonEmptyStrings = ListAdapter.adapt(strings).count(Predicates.not(String::isEmpty));\n</code></pre>\n\n<p>If you only need a negation of <code>String.isEmpty()</code> you can also use <code>StringPredicates.notEmpty()</code>.</p>\n\n<p>Note: I am a contributor to Eclipse Collections.</p>\n"},{"comments":[{"owner":{"account_id":8130439,"reputation":1754,"user_id":6123901,"display_name":"Anthony Drogon"},"score":7,"creation_date":1522949096,"post_id":40156795,"comment_id":86367677,"body_markdown":"No. The question is how to negate any method reference, and takes `String::isEmpty` as an example. It&#39;s still relevant information if you have this use case, but if it only answers the String use case, then it should not be accepted.","body":"No. The question is how to negate any method reference, and takes <code>String::isEmpty</code> as an example. It&#39;s still relevant information if you have this use case, but if it only answers the String use case, then it should not be accepted."}],"tags":[],"owner":{"account_id":544436,"reputation":594,"user_id":913887,"accept_rate":83,"display_name":"outofBounds"},"comment_count":1,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1476972412,"creation_date":1476972412,"answer_id":40156795,"question_id":21488056,"body_markdown":"In this case u could use the `org.apache.commons.lang3.StringUtils`and do\r\n\r\n    int nonEmptyStrings = s.filter(StringUtils::isNotEmpty).count();\r\n","title":"How to negate a method reference predicate","body":"<p>In this case u could use the <code>org.apache.commons.lang3.StringUtils</code>and do</p>\n\n<pre><code>int nonEmptyStrings = s.filter(StringUtils::isNotEmpty).count();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":16285107,"reputation":1793,"user_id":11760058,"display_name":"cachius"},"score":1,"creation_date":1681889964,"post_id":51439995,"comment_id":134128055,"body_markdown":"To use `not(String::isEmpty)` without Predicate import it via `import static java.util.function.Predicate.not;`","body":"To use <code>not(String::isEmpty)</code> without Predicate import it via <code>import static java.util.function.Predicate.not;</code>"}],"tags":[],"owner":{"account_id":8598286,"reputation":11087,"user_id":6440704,"display_name":"Anton Balaniuc"},"comment_count":1,"down_vote_count":5,"up_vote_count":427,"is_accepted":true,"score":422,"last_activity_date":1592312994,"creation_date":1532080734,"answer_id":51439995,"question_id":21488056,"body_markdown":"# `Predicate.not( … )`\r\n\r\n[tag:java-11] offers a new method [Predicate#not][1]\r\n\r\nSo you can negate the method reference:\r\n\r\n    Stream&lt;String&gt; s = ...;\r\n    long nonEmptyStrings = s.filter(Predicate.not(String::isEmpty)).count();\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/function/Predicate.html#not(java.util.function.Predicate)","title":"How to negate a method reference predicate","body":"<h1><code>Predicate.not( … )</code></h1>\n\n<p><a href=\"/questions/tagged/java-11\" class=\"post-tag\" title=\"show questions tagged &#39;java-11&#39;\" rel=\"tag\">java-11</a> offers a new method <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/function/Predicate.html#not(java.util.function.Predicate)\" rel=\"noreferrer\">Predicate#not</a></p>\n\n<p>So you can negate the method reference:</p>\n\n<pre><code>Stream&lt;String&gt; s = ...;\nlong nonEmptyStrings = s.filter(Predicate.not(String::isEmpty)).count();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3113372,"reputation":2010,"user_id":2634690,"display_name":"Gilad Peleg"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1537871674,"creation_date":1537871674,"answer_id":52496105,"question_id":21488056,"body_markdown":"If you&#39;re using Spring Boot (2.0.0+) you can use:\r\n\r\n    import org.springframework.util.StringUtils;\r\n\r\n    ...\r\n    .filter(StringUtils::hasLength)\r\n    ...\r\n\r\n\r\nWhich does:\r\n`return (str != null &amp;&amp; !str.isEmpty());`\r\n\r\nSo it will have the required negation effect for `isEmpty`","title":"How to negate a method reference predicate","body":"<p>If you're using Spring Boot (2.0.0+) you can use:</p>\n\n<pre><code>import org.springframework.util.StringUtils;\n\n...\n.filter(StringUtils::hasLength)\n...\n</code></pre>\n\n<p>Which does:\n<code>return (str != null &amp;&amp; !str.isEmpty());</code></p>\n\n<p>So it will have the required negation effect for <code>isEmpty</code></p>\n"},{"tags":[],"owner":{"account_id":7764804,"reputation":11,"user_id":5876298,"display_name":"Narsi Reddy Nallamilli"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1538138209,"creation_date":1538137776,"answer_id":52555376,"question_id":21488056,"body_markdown":"You can accomplish this as long `emptyStrings = s.filter(s-&gt;!s.isEmpty()).count();`","title":"How to negate a method reference predicate","body":"<p>You can accomplish this as long <code>emptyStrings = s.filter(s-&gt;!s.isEmpty()).count();</code></p>\n"},{"tags":[],"owner":{"account_id":9925790,"reputation":101,"user_id":7347433,"display_name":"gomn"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1654181377,"creation_date":1654181377,"answer_id":72478183,"question_id":21488056,"body_markdown":"Tip: to negate a `collection.stream().anyMatch(...)`, one can use `collection.stream().noneMatch(...)`","title":"How to negate a method reference predicate","body":"<p>Tip: to negate a <code>collection.stream().anyMatch(...)</code>, one can use <code>collection.stream().noneMatch(...)</code></p>\n"},{"tags":[],"owner":{"account_id":92486,"reputation":45195,"user_id":253468,"accept_rate":79,"display_name":"TWiStErRob"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691083485,"creation_date":1691072268,"answer_id":76828982,"question_id":21488056,"body_markdown":"Since this ranks highest on Google for Kotlin too (&quot;kotlin negate function reference&quot;), I&#39;ll post an answer here:\r\n\r\n```kotlin\r\nimport kotlin.reflect.KFunction1\r\n\r\n/**\r\n * Kotlin version of [java.util.function.Predicate.negate] for functional types.\r\n *\r\n * Example:\r\n * ```\r\n * val isX: X -&gt; Boolean = ...\r\n * val isNotX = !isX\r\n * val isNotX = isX.not()\r\n * ```\r\n */\r\noperator fun &lt;T&gt; ((T) -&gt; Boolean).not(): (T) -&gt; Boolean =\r\n\t{ !this(it) }\r\n\r\n/**\r\n * Kotlin version of [java.util.function.Predicate.negate] for method references.\r\n *\r\n * Example:\r\n * ```\r\n * fun isX(x: X): Boolean = ...\r\n * val isNotX = !::isX\r\n * ```\r\n */\r\noperator fun &lt;T&gt; KFunction1&lt;T, Boolean&gt;.not(): KFunction1&lt;T, Boolean&gt; =\r\n\t{ it: T -&gt; !this(it) }::invoke\r\n\r\n/**\r\n * Kotlin version of [java.util.function.Predicate.or] for functional types.\r\n */\r\ninfix fun &lt;T&gt; ((T) -&gt; Boolean).or(other: (T) -&gt; Boolean): (T) -&gt; Boolean =\r\n\t{ this(it) || other(it) }\r\n\r\n/**\r\n * Kotlin version of [java.util.function.Predicate.or] for method references.\r\n */\r\ninfix fun &lt;T&gt; KFunction1&lt;T, Boolean&gt;.or(other: KFunction1&lt;T, Boolean&gt;): KFunction1&lt;T, Boolean&gt; =\r\n\t{ it: T -&gt; this(it) || other(it) }::invoke\r\n\r\n/**\r\n * Kotlin version of [java.util.function.Predicate.and] for functional types.\r\n */\r\ninfix fun &lt;T&gt; ((T) -&gt; Boolean).and(other: (T) -&gt; Boolean): (T) -&gt; Boolean =\r\n\t{ this(it) &amp;&amp; other(it) }\r\n\r\n/**\r\n * Kotlin version of [java.util.function.Predicate.and] for method references.\r\n */\r\ninfix fun &lt;T&gt; KFunction1&lt;T, Boolean&gt;.and(other: KFunction1&lt;T, Boolean&gt;): KFunction1&lt;T, Boolean&gt; =\r\n\t{ it: T -&gt; this(it) &amp;&amp; other(it) }::invoke\r\n```\r\n\r\nI&#39;m not aware these being in stdlib, maybe they exist in some library already. Hope this helps someone in the future as the syntax was non-trivial to come up with.","title":"How to negate a method reference predicate","body":"<p>Since this ranks highest on Google for Kotlin too (&quot;kotlin negate function reference&quot;), I'll post an answer here:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>import kotlin.reflect.KFunction1\n\n/**\n * Kotlin version of [java.util.function.Predicate.negate] for functional types.\n *\n * Example:\n * ```\n * val isX: X -&gt; Boolean = ...\n * val isNotX = !isX\n * val isNotX = isX.not()\n * ```\n */\noperator fun &lt;T&gt; ((T) -&gt; Boolean).not(): (T) -&gt; Boolean =\n    { !this(it) }\n\n/**\n * Kotlin version of [java.util.function.Predicate.negate] for method references.\n *\n * Example:\n * ```\n * fun isX(x: X): Boolean = ...\n * val isNotX = !::isX\n * ```\n */\noperator fun &lt;T&gt; KFunction1&lt;T, Boolean&gt;.not(): KFunction1&lt;T, Boolean&gt; =\n    { it: T -&gt; !this(it) }::invoke\n\n/**\n * Kotlin version of [java.util.function.Predicate.or] for functional types.\n */\ninfix fun &lt;T&gt; ((T) -&gt; Boolean).or(other: (T) -&gt; Boolean): (T) -&gt; Boolean =\n    { this(it) || other(it) }\n\n/**\n * Kotlin version of [java.util.function.Predicate.or] for method references.\n */\ninfix fun &lt;T&gt; KFunction1&lt;T, Boolean&gt;.or(other: KFunction1&lt;T, Boolean&gt;): KFunction1&lt;T, Boolean&gt; =\n    { it: T -&gt; this(it) || other(it) }::invoke\n\n/**\n * Kotlin version of [java.util.function.Predicate.and] for functional types.\n */\ninfix fun &lt;T&gt; ((T) -&gt; Boolean).and(other: (T) -&gt; Boolean): (T) -&gt; Boolean =\n    { this(it) &amp;&amp; other(it) }\n\n/**\n * Kotlin version of [java.util.function.Predicate.and] for method references.\n */\ninfix fun &lt;T&gt; KFunction1&lt;T, Boolean&gt;.and(other: KFunction1&lt;T, Boolean&gt;): KFunction1&lt;T, Boolean&gt; =\n    { it: T -&gt; this(it) &amp;&amp; other(it) }::invoke\n</code></pre>\n<p>I'm not aware these being in stdlib, maybe they exist in some library already. Hope this helps someone in the future as the syntax was non-trivial to come up with.</p>\n"}],"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":243200,"favorite_count":0,"down_vote_count":0,"up_vote_count":479,"accepted_answer_id":51439995,"answer_count":14,"score":479,"last_activity_date":1691083485,"creation_date":1391195048,"question_id":21488056,"body_markdown":"In Java 8, you can use a method reference to filter a stream, for example:\r\n\r\n    Stream&lt;String&gt; s = ...;\r\n    long emptyStrings = s.filter(String::isEmpty).count();\r\n\r\nIs there a way to create a method reference that is the negation of an existing one, i.e. something like:\r\n\r\n    long nonEmptyStrings = s.filter(not(String::isEmpty)).count();\r\n\r\nI could create the `not` method like below but I was wondering if the JDK offered something similar.\r\n\r\n    static &lt;T&gt; Predicate&lt;T&gt; not(Predicate&lt;T&gt; p) { return o -&gt; !p.test(o); }","title":"How to negate a method reference predicate","body":"<p>In Java 8, you can use a method reference to filter a stream, for example:</p>\n\n<pre><code>Stream&lt;String&gt; s = ...;\nlong emptyStrings = s.filter(String::isEmpty).count();\n</code></pre>\n\n<p>Is there a way to create a method reference that is the negation of an existing one, i.e. something like:</p>\n\n<pre><code>long nonEmptyStrings = s.filter(not(String::isEmpty)).count();\n</code></pre>\n\n<p>I could create the <code>not</code> method like below but I was wondering if the JDK offered something similar.</p>\n\n<pre><code>static &lt;T&gt; Predicate&lt;T&gt; not(Predicate&lt;T&gt; p) { return o -&gt; !p.test(o); }\n</code></pre>\n"},{"tags":["java","java-text-blocks"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1691075764,"post_id":76829449,"comment_id":135445433,"body_markdown":"`String.split(text, &quot;\\n&quot;)`. Then again by &quot;:&quot; to get your key/value pairs.","body":"<code>String.split(text, &quot;\\n&quot;)</code>. Then again by &quot;:&quot; to get your key/value pairs."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":3,"creation_date":1691076118,"post_id":76829449,"comment_id":135445507,"body_markdown":"@Jorn you probably meant `text.split(&quot;\\n&quot;)` (or even `text.split(&quot;\\n&quot;, -1)`)","body":"@Jorn you probably meant <code>text.split(&quot;\\n&quot;)</code> (or even <code>text.split(&quot;\\n&quot;, -1)</code>)"},{"owner":{"account_id":26632345,"reputation":90,"user_id":20249350,"display_name":"Hassen Gaaya"},"score":0,"creation_date":1691076143,"post_id":76829449,"comment_id":135445516,"body_markdown":"Thanks you both, i found also that i could use `text.split(System.lineSeparator())` to make it more generic","body":"Thanks you both, i found also that i could use <code>text.split(System.lineSeparator())</code> to make it more generic"},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1691076153,"post_id":76829449,"comment_id":135445521,"body_markdown":"@user16320675 Could be! Since I switched to Kotlin, I never remember what in the Java stdlib is static and what isn&#39;t.","body":"@user16320675 Could be! Since I switched to Kotlin, I never remember what in the Java stdlib is static and what isn&#39;t."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1691076223,"post_id":76829449,"comment_id":135445536,"body_markdown":"alternatives: `text.lines().toArray()` or `text.lines().toList()`","body":"alternatives: <code>text.lines().toArray()</code> or <code>text.lines().toList()</code>"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691078838,"post_id":76829449,"comment_id":135446121,"body_markdown":"You need to be a little careful of indentation with text blocks, so you might be safer with something like `String [] splitTextBlock = textblock.lines().map(String::trim).toArray(String[]::new);`","body":"You need to be a little careful of indentation with text blocks, so you might be safer with something like <code>String [] splitTextBlock = textblock.lines().map(String::trim).toArray(String[]::new);</code>"},{"owner":{"account_id":26632345,"reputation":90,"user_id":20249350,"display_name":"Hassen Gaaya"},"score":0,"creation_date":1691246664,"post_id":76829449,"comment_id":135467634,"body_markdown":"@karl-knechtel, unfortunately, it doesn&#39;t answer how to split by line separator","body":"@karl-knechtel, unfortunately, it doesn&#39;t answer how to split by line separator"}],"answers":[{"tags":[],"owner":{"account_id":92073,"reputation":1,"user_id":252518,"accept_rate":71,"display_name":"Freeman"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1691076307,"creation_date":1691076307,"answer_id":76829532,"question_id":76829449,"body_markdown":"check this out:\r\n\r\n    String textblock = &quot;&quot;&quot;\r\n            A : 111\r\n            B : 111\r\n            C : 1111\r\n            &quot;&quot;&quot;;\r\n    \r\n    String[] splitedTextBlock = textblock.split(&quot;\\\\R&quot;);\r\n    \r\n    for (String line : splitedTextBlock) {\r\n        System.out.println(line);\r\n    }\r\n\r\n- the `split(&quot;\\\\R&quot;)` method is used to split the text block by lines\r\n- the `\\\\R` regular expression pattern matches any line break, including different line break sequences like `\\n` or `\\r\\n`","title":"How to split a java text block by lines?","body":"<p>check this out:</p>\n<pre><code>String textblock = &quot;&quot;&quot;\n        A : 111\n        B : 111\n        C : 1111\n        &quot;&quot;&quot;;\n\nString[] splitedTextBlock = textblock.split(&quot;\\\\R&quot;);\n\nfor (String line : splitedTextBlock) {\n    System.out.println(line);\n}\n</code></pre>\n<ul>\n<li>the <code>split(&quot;\\\\R&quot;)</code> method is used to split the text block by lines</li>\n<li>the <code>\\\\R</code> regular expression pattern matches any line break, including different line break sequences like <code>\\n</code> or <code>\\r\\n</code></li>\n</ul>\n"},{"comments":[{"owner":{"account_id":4541793,"reputation":26874,"user_id":3689450,"display_name":"VLAZ"},"score":1,"creation_date":1691248255,"post_id":76829562,"comment_id":135467816,"body_markdown":"`System.lineSeparator()` won&#39;t work if you receive *different* line separators than what you have on the current system. For example, running the code on Linux but reading or getting some text which uses Windows line endings. Or vice versa.","body":"<code>System.lineSeparator()</code> won&#39;t work if you receive <i>different</i> line separators than what you have on the current system. For example, running the code on Linux but reading or getting some text which uses Windows line endings. Or vice versa."},{"owner":{"account_id":26632345,"reputation":90,"user_id":20249350,"display_name":"Hassen Gaaya"},"score":0,"creation_date":1691261719,"post_id":76829562,"comment_id":135469258,"body_markdown":"@vlaz thank you for this point, I am using it in context of unit test","body":"@vlaz thank you for this point, I am using it in context of unit test"}],"tags":[],"owner":{"account_id":26682848,"reputation":3568,"user_id":20292589,"display_name":"Yaroslavm"},"comment_count":2,"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1691083199,"creation_date":1691076476,"answer_id":76829562,"question_id":76829449,"body_markdown":"\r\n\r\n&lt;!-- begin snippet: java hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    public static String[] splitTextBlock(String textblock) {\r\n       return textblock.trim().split(System.lineSeparator());\r\n    }\r\n\r\n    ...\r\n\r\n    String textblock = &quot;&quot;&quot;\r\n            A : 111\r\n            B : 111\r\n            C : 1111\r\n            &quot;&quot;&quot;;\r\n            \r\n    String[] splitedTextBlock = splitTextBlock(textblock);\r\n    Arrays.stream(splitedTextBlock).forEach(System.out::println);\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"How to split a java text block by lines?","body":"<pre class=\"lang-java prettyprint-override\"><code>public static String[] splitTextBlock(String textblock) {\n   return textblock.trim().split(System.lineSeparator());\n}\n\n...\n\nString textblock = &quot;&quot;&quot;\n        A : 111\n        B : 111\n        C : 1111\n        &quot;&quot;&quot;;\n        \nString[] splitedTextBlock = splitTextBlock(textblock);\nArrays.stream(splitedTextBlock).forEach(System.out::println);\n</code></pre>\n"}],"owner":{"account_id":26632345,"reputation":90,"user_id":20249350,"display_name":"Hassen Gaaya"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":167,"favorite_count":0,"down_vote_count":5,"up_vote_count":0,"closed_date":1691248283,"accepted_answer_id":76829562,"answer_count":2,"score":-5,"last_activity_date":1691083199,"creation_date":1691075731,"question_id":76829449,"body_markdown":"Let&#39;s say we have the following java text block : \r\n\r\n```\r\n         String textblock = &quot;&quot;&quot;\r\n                 A : 111\r\n                 B : 111\r\n                 C : 1111\r\n                 &quot;&quot;&quot;;\r\n```\r\n\r\nI would like to split it by lines to get the following result : \r\n\r\n```\r\n         String [] splitedTextBlock = splitTextBlockSomeHow(textblock); \r\n         // expected result : {&quot;A : 111&quot;, &quot;B : 222&quot;, &quot;C : 333&quot;}\r\n```","title":"How to split a java text block by lines?","body":"<p>Let's say we have the following java text block :</p>\n<pre><code>         String textblock = &quot;&quot;&quot;\n                 A : 111\n                 B : 111\n                 C : 1111\n                 &quot;&quot;&quot;;\n</code></pre>\n<p>I would like to split it by lines to get the following result :</p>\n<pre><code>         String [] splitedTextBlock = splitTextBlockSomeHow(textblock); \n         // expected result : {&quot;A : 111&quot;, &quot;B : 222&quot;, &quot;C : 333&quot;}\n</code></pre>\n"},{"tags":["java","intellij-idea"],"answers":[{"comments":[{"owner":{"account_id":91958,"reputation":15235,"user_id":252253,"accept_rate":62,"display_name":"James"},"score":5,"creation_date":1295376158,"post_id":4727696,"comment_id":5223260,"body_markdown":"hrm, I&#39;m totally missing where the &quot;Exit&quot; button is, do you happen to have a screenshot handy? thanks so much","body":"hrm, I&#39;m totally missing where the &quot;Exit&quot; button is, do you happen to have a screenshot handy? thanks so much"},{"owner":{"account_id":36734,"reputation":392137,"user_id":104891,"display_name":"CrazyCoder"},"score":3,"creation_date":1295377686,"post_id":4727696,"comment_id":5223547,"body_markdown":"Updated my reply with a screenshot.","body":"Updated my reply with a screenshot."},{"owner":{"account_id":91958,"reputation":15235,"user_id":252253,"accept_rate":62,"display_name":"James"},"score":1,"creation_date":1295378897,"post_id":4727696,"comment_id":5223755,"body_markdown":"that&#39;s really weird, here&#39;s my runtime panel http://www.dropmocks.com/mPyzF  I don&#39;t see that icon. i&#39;m using intellij 10","body":"that&#39;s really weird, here&#39;s my runtime panel <a href=\"http://www.dropmocks.com/mPyzF\" rel=\"nofollow noreferrer\">dropmocks.com/mPyzF</a>  I don&#39;t see that icon. i&#39;m using intellij 10"},{"owner":{"account_id":36734,"reputation":392137,"user_id":104891,"display_name":"CrazyCoder"},"score":2,"creation_date":1295382945,"post_id":4727696,"comment_id":5224504,"body_markdown":"Taking thread dumps and performing graceful shutdown depends on the native component which is currently not available for Mac platform. Updated my reply.","body":"Taking thread dumps and performing graceful shutdown depends on the native component which is currently not available for Mac platform. Updated my reply."},{"owner":{"account_id":974634,"reputation":3650,"user_id":996309,"accept_rate":36,"display_name":"Tom McIntyre"},"score":33,"creation_date":1368701511,"post_id":4727696,"comment_id":23835172,"body_markdown":"Do you know why this isn&#39;t available from the Debugger?","body":"Do you know why this isn&#39;t available from the Debugger?"},{"owner":{"account_id":341845,"reputation":19101,"user_id":672689,"accept_rate":82,"display_name":"Roee Gavirel"},"score":3,"creation_date":1411284823,"post_id":4727696,"comment_id":40638857,"body_markdown":"Running on windows with Intellij 13.1.3 and also don&#39;t have this button.","body":"Running on windows with Intellij 13.1.3 and also don&#39;t have this button."},{"owner":{"account_id":1463667,"reputation":1506,"user_id":1377224,"accept_rate":50,"display_name":"philnate"},"score":0,"creation_date":1413402749,"post_id":4727696,"comment_id":41434969,"body_markdown":"@CrazyCoder, would be really great to know, Tom already asked, why this isn&#39;t available for Debug Sessions or when this will be available for Debug sessions.","body":"@CrazyCoder, would be really great to know, Tom already asked, why this isn&#39;t available for Debug Sessions or when this will be available for Debug sessions."},{"owner":{"account_id":4752133,"reputation":229,"user_id":3841892,"accept_rate":100,"display_name":"piofusco"},"score":1,"creation_date":1457115463,"post_id":4727696,"comment_id":59275872,"body_markdown":"Was the &quot;Exit&quot; button removed for OSX? Currently using 15.0.4 and I don&#39;t have access to this.","body":"Was the &quot;Exit&quot; button removed for OSX? Currently using 15.0.4 and I don&#39;t have access to this."},{"owner":{"account_id":255381,"reputation":1760,"user_id":535401,"accept_rate":40,"display_name":"JakeRobb"},"score":0,"creation_date":1460068924,"post_id":4727696,"comment_id":60585860,"body_markdown":"I have the Exit button on OS X running 2016.1 EAP, and when I click it it does appear to call the shutdown hooks, but it appears to leave the java process behind, which I discovered because it does not release the debug port it was listening on and as such I am unable to start a new instance of my application. I had to kill the java process with Activity Monitor.","body":"I have the Exit button on OS X running 2016.1 EAP, and when I click it it does appear to call the shutdown hooks, but it appears to leave the java process behind, which I discovered because it does not release the debug port it was listening on and as such I am unable to start a new instance of my application. I had to kill the java process with Activity Monitor."},{"owner":{"account_id":2192195,"reputation":23364,"user_id":1938889,"accept_rate":65,"display_name":"Drakes"},"score":0,"creation_date":1551399549,"post_id":4727696,"comment_id":96636638,"body_markdown":"I&#39;ve been using Intellij for years and this is the first time I&#39;ve used that &quot;exit&quot; icon - to test shutdown hooks.","body":"I&#39;ve been using Intellij for years and this is the first time I&#39;ve used that &quot;exit&quot; icon - to test shutdown hooks."},{"owner":{"account_id":17065625,"reputation":441,"user_id":12347889,"display_name":"Vitalii"},"score":0,"creation_date":1662732807,"post_id":4727696,"comment_id":130081129,"body_markdown":"Thanks a lot. It still works for Idea 2022.2.1 on Windows","body":"Thanks a lot. It still works for Idea 2022.2.1 on Windows"}],"tags":[],"owner":{"account_id":36734,"reputation":392137,"user_id":104891,"display_name":"CrazyCoder"},"comment_count":11,"down_vote_count":1,"up_vote_count":111,"is_accepted":true,"score":110,"last_activity_date":1691082254,"creation_date":1295375682,"answer_id":4727696,"question_id":4727536,"body_markdown":"You need to use the **Exit** button in the **Run** panel, not the Stop button. Note that it will only work when Running and will not work when Debugging.\r\n\r\nHere is the screenshot if you can&#39;t find it:\r\n\r\n[![Exit button][1]][1]\r\n\r\n\r\nOld versions:\r\n\r\n![Exit][2]\r\n\r\n\r\nThis feature uses platform specific code and currently works on Windows and Linux only. &lt;s&gt;Once [IDEA-56273][3] is fixed, this feature should be also available on Mac.&lt;/s&gt; It is fixed in 10.5 version of IDEA.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4rmL0.png\r\n  [2]: http://i.stack.imgur.com/7geJA.png\r\n  [3]: http://youtrack.jetbrains.net/issue/IDEA-56273","title":"How do I stop a process running in IntelliJ such that it calls the shutdown hooks?","body":"<p>You need to use the <strong>Exit</strong> button in the <strong>Run</strong> panel, not the Stop button. Note that it will only work when Running and will not work when Debugging.</p>\n<p>Here is the screenshot if you can't find it:</p>\n<p><a href=\"https://i.stack.imgur.com/4rmL0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4rmL0.png\" alt=\"Exit button\" /></a></p>\n<p>Old versions:</p>\n<p><img src=\"https://i.stack.imgur.com/7geJA.png\" alt=\"Exit\" /></p>\n<p>This feature uses platform specific code and currently works on Windows and Linux only. <s>Once <a href=\"http://youtrack.jetbrains.net/issue/IDEA-56273\" rel=\"nofollow noreferrer\">IDEA-56273</a> is fixed, this feature should be also available on Mac.</s> It is fixed in 10.5 version of IDEA.</p>\n"},{"tags":[],"owner":{"account_id":382010,"reputation":2461,"user_id":736987,"accept_rate":89,"display_name":"Evan"},"comment_count":0,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1530901749,"creation_date":1530901749,"answer_id":51215962,"question_id":4727536,"body_markdown":"If you are on Mac (and I assume Linux), get the pid and use kill from the terminal.  It&#39;s an extra step, but works to debug the shutdown handler when you need to.  ","title":"How do I stop a process running in IntelliJ such that it calls the shutdown hooks?","body":"<p>If you are on Mac (and I assume Linux), get the pid and use kill from the terminal.  It's an extra step, but works to debug the shutdown handler when you need to.  </p>\n"}],"owner":{"account_id":91958,"reputation":15235,"user_id":252253,"accept_rate":62,"display_name":"James"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35880,"favorite_count":0,"down_vote_count":0,"up_vote_count":80,"accepted_answer_id":4727696,"answer_count":2,"score":80,"last_activity_date":1691082254,"creation_date":1295374562,"question_id":4727536,"body_markdown":"When I run my program in IntelliJ then use the STOP button, it does not call my shutdown hooks that I&#39;ve created. Is there a way in IntelliJ to have those called on shutdown?\r\n","title":"How do I stop a process running in IntelliJ such that it calls the shutdown hooks?","body":"<p>When I run my program in IntelliJ then use the STOP button, it does not call my shutdown hooks that I've created. Is there a way in IntelliJ to have those called on shutdown?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":16623108,"reputation":55,"user_id":12012844,"display_name":"SurPrise 2"},"score":0,"creation_date":1691072202,"post_id":76828851,"comment_id":135444589,"body_markdown":"You can rewrite your .sql data scripts using liquibase and velocity for example. And order this scripts after your initial liquibase scripts. In this case they will be executed in order","body":"You can rewrite your .sql data scripts using liquibase and velocity for example. And order this scripts after your initial liquibase scripts. In this case they will be executed in order"}],"answers":[{"tags":[],"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1691082155,"creation_date":1691082155,"answer_id":76830202,"question_id":76828851,"body_markdown":"You should stick to only one method of initializing the database. The Liquibase is a preferred tool.\r\n\r\nFrom Spring documentation:\r\n\r\n&gt; If you are using a Higher-level Database Migration Tool, like Flyway or Liquibase, you should use them alone to create and initialize the schema. Using the basic schema.sql and data.sql scripts alongside Flyway or Liquibase is not recommended and support will be removed in a future release.","title":"How to ensure Liquibase YAML scripts run before SQL scripts in resources in a Spring Boot application?","body":"<p>You should stick to only one method of initializing the database. The Liquibase is a preferred tool.</p>\n<p>From Spring documentation:</p>\n<blockquote>\n<p>If you are using a Higher-level Database Migration Tool, like Flyway or Liquibase, you should use them alone to create and initialize the schema. Using the basic schema.sql and data.sql scripts alongside Flyway or Liquibase is not recommended and support will be removed in a future release.</p>\n</blockquote>\n"}],"owner":{"account_id":9892593,"reputation":633,"user_id":7325117,"accept_rate":100,"display_name":"EmreAkkoc"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76830202,"answer_count":1,"score":0,"last_activity_date":1691082155,"creation_date":1691071291,"question_id":76828851,"body_markdown":"I&#39;m currently developing a Spring Boot application where I&#39;m utilizing Liquibase for managing database schema changes. For defining schema modifications, I&#39;ve created Liquibase changelog files in YAML format (changelog.yml).\r\n\r\nIn addition, I have .sql data scripts placed in the src/main/resources/data directory, which are intended to populate the tables created by Liquibase.\r\n\r\nMy primary concern is ensuring that the Liquibase scripts are executed before the .sql data scripts during the application startup phase. This is essential to prevent potential errors due to absent tables or columns when populating the data. The reason I do not put these sql scripts into another Liquibase script is that it will be very hard to maintain. I just want to change sql scripts necessary according to final look of my tables.\r\n\r\nI&#39;ve attempted to leverage the spring.datasource.data property in my application.properties to specify the .sql data scripts, but I&#39;ve realized that this approach doesn&#39;t guarantee the desired execution order concerning Liquibase scripts.\r\n\r\nWhat is the recommended approach to enforce the desired order of execution, particularly when utilizing Liquibase YAML scripts and Spring Boot&#39;s automatic data scripts? Is there a way to explicitly control the sequence of execution, ensuring that Liquibase completes its tasks before the data population scripts are invoked during application startup?\r\n\r\nI would greatly appreciate any insights, guidance, or best practices for managing this specific scenario. Thank you in advance for your assistance!","title":"How to ensure Liquibase YAML scripts run before SQL scripts in resources in a Spring Boot application?","body":"<p>I'm currently developing a Spring Boot application where I'm utilizing Liquibase for managing database schema changes. For defining schema modifications, I've created Liquibase changelog files in YAML format (changelog.yml).</p>\n<p>In addition, I have .sql data scripts placed in the src/main/resources/data directory, which are intended to populate the tables created by Liquibase.</p>\n<p>My primary concern is ensuring that the Liquibase scripts are executed before the .sql data scripts during the application startup phase. This is essential to prevent potential errors due to absent tables or columns when populating the data. The reason I do not put these sql scripts into another Liquibase script is that it will be very hard to maintain. I just want to change sql scripts necessary according to final look of my tables.</p>\n<p>I've attempted to leverage the spring.datasource.data property in my application.properties to specify the .sql data scripts, but I've realized that this approach doesn't guarantee the desired execution order concerning Liquibase scripts.</p>\n<p>What is the recommended approach to enforce the desired order of execution, particularly when utilizing Liquibase YAML scripts and Spring Boot's automatic data scripts? Is there a way to explicitly control the sequence of execution, ensuring that Liquibase completes its tasks before the data population scripts are invoked during application startup?</p>\n<p>I would greatly appreciate any insights, guidance, or best practices for managing this specific scenario. Thank you in advance for your assistance!</p>\n"},{"tags":["java","junit","mockito"],"comments":[{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1691087592,"post_id":76829528,"comment_id":135447883,"body_markdown":"Where/how do you create the mock object for `WebClient`?","body":"Where/how do you create the mock object for <code>WebClient</code>?"},{"owner":{"account_id":28447000,"reputation":1,"user_id":21765597,"display_name":"tacu"},"score":0,"creation_date":1691088823,"post_id":76829528,"comment_id":135448097,"body_markdown":"the WebClient is created as static. it is an import from an external jar","body":"the WebClient is created as static. it is an import from an external jar"},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1691088982,"post_id":76829528,"comment_id":135448127,"body_markdown":"if it is not a mock instance (created with `@Mock` or `Mockito.mock`), then you cannot set up stubbings on it (with `Mockito.when`). It&#39;s not a mock, thus cannot be used as one.","body":"if it is not a mock instance (created with <code>@Mock</code> or <code>Mockito.mock</code>), then you cannot set up stubbings on it (with <code>Mockito.when</code>). It&#39;s not a mock, thus cannot be used as one."}],"answers":[{"comments":[{"owner":{"account_id":28447000,"reputation":1,"user_id":21765597,"display_name":"tacu"},"score":0,"creation_date":1691085326,"post_id":76830166,"comment_id":135447442,"body_markdown":"no this does not work","body":"no this does not work"}],"tags":[],"owner":{"account_id":26105575,"reputation":56,"user_id":19800332,"display_name":"butterCup"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691081857,"creation_date":1691081857,"answer_id":76830166,"question_id":76829528,"body_markdown":"The error is due to passing a null value to the `ParameterizedTypeReference.forType` method. \r\n\r\n    @Test\r\n    void test() {\r\n    //Initialise uri, request \r\n    ParameterizedTypeReference &lt; String &gt; response = ParameterizedTypeReference.forType(String.class);\r\n    String returnValue = “response”;\r\n    when(webClient.post().uri(uri).bodyValue(request).retrieve().bodyToMono(any(ParameterizedTypeReference.class)))\r\n    .thenReturn(Mono.just(returnValue));\r\n     String result = mockClass.postMethod(uri, request, response);\r\n     assertEquals(returnValue, result);\r\n     }\r\n\r\n\r\n           ","title":"Mockito - mocking POST request - ParameterizedTypeReference.forType(String.class","body":"<p>The error is due to passing a null value to the <code>ParameterizedTypeReference.forType</code> method.</p>\n<pre><code>@Test\nvoid test() {\n//Initialise uri, request \nParameterizedTypeReference &lt; String &gt; response = ParameterizedTypeReference.forType(String.class);\nString returnValue = “response”;\nwhen(webClient.post().uri(uri).bodyValue(request).retrieve().bodyToMono(any(ParameterizedTypeReference.class)))\n.thenReturn(Mono.just(returnValue));\n String result = mockClass.postMethod(uri, request, response);\n assertEquals(returnValue, result);\n }\n\n\n       \n</code></pre>\n"}],"owner":{"account_id":28447000,"reputation":1,"user_id":21765597,"display_name":"tacu"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691081857,"creation_date":1691076272,"question_id":76829528,"body_markdown":"I am attempting to create a unit test where a post request is being made.\r\n\r\n`WebClient.post(URI, request, ParameterizedTypeReference.forType(String.class));`\r\n\r\n\r\n\r\nI am trying to use `Mockit.when(WebClient.post(Mockito.anyString(), null, Mockito.eq(new ParameterizedTypeReference&lt;String&gt; {})).thenReturn(nothing);`\r\n\r\nI am getting  \r\n\r\n`java.lang.IllegalArgumentException:ParameterizedTypeReference must not be null`\r\n\r\nHow can I correctly mock this `ParameterizedTypeReference.forType(String.class)`?","title":"Mockito - mocking POST request - ParameterizedTypeReference.forType(String.class","body":"<p>I am attempting to create a unit test where a post request is being made.</p>\n<p><code>WebClient.post(URI, request, ParameterizedTypeReference.forType(String.class));</code></p>\n<p>I am trying to use <code>Mockit.when(WebClient.post(Mockito.anyString(), null, Mockito.eq(new ParameterizedTypeReference&lt;String&gt; {})).thenReturn(nothing);</code></p>\n<p>I am getting</p>\n<p><code>java.lang.IllegalArgumentException:ParameterizedTypeReference must not be null</code></p>\n<p>How can I correctly mock this <code>ParameterizedTypeReference.forType(String.class)</code>?</p>\n"},{"tags":["java","spring","junit5"],"answers":[{"comments":[{"owner":{"account_id":4546904,"reputation":152,"user_id":3693223,"display_name":"Lucho82"},"score":0,"creation_date":1691137471,"post_id":76830113,"comment_id":135453965,"body_markdown":"Perfect ... thanks @Augusto","body":"Perfect ... thanks @Augusto"}],"tags":[],"owner":{"account_id":301230,"reputation":28997,"user_id":608820,"accept_rate":89,"display_name":"Augusto"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691081296,"creation_date":1691081296,"answer_id":76830113,"question_id":76830039,"body_markdown":"Replace\r\n```\r\n@ExtendWith(MockitoExtension.class)\r\n```\r\n\r\nwith\r\n\r\n```\r\n@ExtendWith(SpringExtension.class)\r\n```\r\n\r\nSpringExtension enables the use of Spring with JUnit5. Once you have that, JUnit will call the extension, which in turn will read the Spring annotations.","title":"Import a specific bean in JUnit5 without load all application","body":"<p>Replace</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\n</code></pre>\n<p>with</p>\n<pre><code>@ExtendWith(SpringExtension.class)\n</code></pre>\n<p>SpringExtension enables the use of Spring with JUnit5. Once you have that, JUnit will call the extension, which in turn will read the Spring annotations.</p>\n"}],"owner":{"account_id":4546904,"reputation":152,"user_id":3693223,"display_name":"Lucho82"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76830113,"answer_count":1,"score":0,"last_activity_date":1691081296,"creation_date":1691080527,"question_id":76830039,"body_markdown":"I have a configuration class on my project\r\n\r\n    @Configuration\r\n    public class MyConfiguration {\r\n    \r\n        //client SDK configuration build\r\n        @Bean\r\n        public MyBean myBean() {\r\n    \t\treturn new MyBean();\r\n    \t}\r\n    \t\r\n    }\r\n   \r\nNow I want to use this bean on my unit test class without load all application context\r\n\r\n    @ExtendWith(MockitoExtension.class)\r\n    @ContextConfiguration(classes = {MyConfiguration.class})\r\n    public class Test {\r\n    \r\n        @Autowired\r\n        private MyBean mybean;\r\n    \r\n        @Test\r\n        public void methodTest() {\r\n            //use mybean class methods\r\n            mybean.method();\r\n        }\r\n    \r\n    }\r\n    \r\nBut I am getting an `NullPointerException` error when run the test (in the line where I invoke mybean definition)\r\n\r\nWhat could be wrong ?\r\n\r\nThanks\r\n","title":"Import a specific bean in JUnit5 without load all application","body":"<p>I have a configuration class on my project</p>\n<pre><code>@Configuration\npublic class MyConfiguration {\n\n    //client SDK configuration build\n    @Bean\n    public MyBean myBean() {\n        return new MyBean();\n    }\n    \n}\n</code></pre>\n<p>Now I want to use this bean on my unit test class without load all application context</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\n@ContextConfiguration(classes = {MyConfiguration.class})\npublic class Test {\n\n    @Autowired\n    private MyBean mybean;\n\n    @Test\n    public void methodTest() {\n        //use mybean class methods\n        mybean.method();\n    }\n\n}\n</code></pre>\n<p>But I am getting an <code>NullPointerException</code> error when run the test (in the line where I invoke mybean definition)</p>\n<p>What could be wrong ?</p>\n<p>Thanks</p>\n"},{"tags":["java","arraylist"],"comments":[{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":4,"creation_date":1691080914,"post_id":76830065,"comment_id":135446516,"body_markdown":"It&#39;s autoboxing: the capital versions are boxed primitives / objects, and are separate objects in memory. Integers are only really commonly cached in the byte range `[-128, 127]`. The `==` operator for objects will compare for reference equality (i.e. are they the same object), _not_ for the same value. For that, there is `Object#equals`.","body":"It&#39;s autoboxing: the capital versions are boxed primitives / objects, and are separate objects in memory. Integers are only really commonly cached in the byte range <code>[-128, 127]</code>. The <code>==</code> operator for objects will compare for reference equality (i.e. are they the same object), <i>not</i> for the same value. For that, there is <code>Object#equals</code>."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1691166757,"post_id":76830065,"comment_id":135460037,"body_markdown":"Show the declaration of your `ArrayList`.","body":"Show the declaration of your <code>ArrayList</code>."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1691166797,"post_id":76830065,"comment_id":135460045,"body_markdown":"[MCVE](https://stackoverflow.com/help/mcve)","body":"<a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>"}],"owner":{"account_id":29154212,"reputation":11,"user_id":22334379,"display_name":"Pankaj Patidar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1691080816,"creation_date":1691080709,"question_id":76830065,"body_markdown":"I have an ArrayList contains,**arr = [151,151,167,224,224......]**, it&#39;s a very long ArrayList; when I do the below code : \r\n\r\n**if(arr.get(0)!= arr.get(1))\r\n        return arr.get(0);** \r\n\r\nHere the output **I am getting is 151, But it is wrong** It should not go under the if condition.\r\nPlease Let me know Why it is going. Is there anything we should be aware of ArrayList.get() method?\r\n\r\n\r\nThen changed the condition to  : \r\n\r\n**if((int)arr.get(0)!= (int)arr.get(1)) return arr.get(0);**\r\n\r\nthen the condition become false, and then its not going under if condition.","title":"Caught different behaviour of ArrayList.get() method in IF condition","body":"<p>I have an ArrayList contains,<strong>arr = [151,151,167,224,224......]</strong>, it's a very long ArrayList; when I do the below code :</p>\n<p><strong>if(arr.get(0)!= arr.get(1))\nreturn arr.get(0);</strong></p>\n<p>Here the output <strong>I am getting is 151, But it is wrong</strong> It should not go under the if condition.\nPlease Let me know Why it is going. Is there anything we should be aware of ArrayList.get() method?</p>\n<p>Then changed the condition to  :</p>\n<p><strong>if((int)arr.get(0)!= (int)arr.get(1)) return arr.get(0);</strong></p>\n<p>then the condition become false, and then its not going under if condition.</p>\n"},{"tags":["java","tostring","base-conversion"],"comments":[{"owner":{"account_id":175348,"reputation":7565,"user_id":405303,"accept_rate":50,"display_name":"Jon Kiparsky"},"score":0,"creation_date":1484796945,"post_id":41733231,"comment_id":70660778,"body_markdown":"You&#39;ll get more useful results if you ask a specific question about some concrete code.","body":"You&#39;ll get more useful results if you ask a specific question about some concrete code."}],"answers":[{"comments":[{"owner":{"account_id":8163058,"reputation":123,"user_id":6146420,"display_name":"forgetfulbur"},"score":0,"creation_date":1484797851,"post_id":41733320,"comment_id":70661009,"body_markdown":"I figured this was the case. Any clever ways to perform the offsets to the already converted data? Other than the brute force way, of course.","body":"I figured this was the case. Any clever ways to perform the offsets to the already converted data? Other than the brute force way, of course."},{"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"score":0,"creation_date":1484803007,"post_id":41733320,"comment_id":70662528,"body_markdown":"A `char` can be added to, so if you wanted to define `&#39;A&#39;` or `&#39;a&#39;` as 0, then the offsets become straightforward to work with.","body":"A <code>char</code> can be added to, so if you wanted to define <code>&#39;A&#39;</code> or <code>&#39;a&#39;</code> as 0, then the offsets become straightforward to work with."}],"tags":[],"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1484797248,"creation_date":1484797248,"answer_id":41733320,"question_id":41733231,"body_markdown":"No; [the way that this method is implemented](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/java/lang/Integer.java#Integer.toString%28int%2Cint%29) effectively guarantees that it starts from 0-9, then proceeds through a-f, then carries on should the radix exceed 16.\r\n\r\nIf you want to do this in your own way, then you will need to perform the offsets yourself.","title":"Base 26 as alphabetic using Java&#39;s Integer.toString()","body":"<p>No; <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/java/lang/Integer.java#Integer.toString%28int%2Cint%29\" rel=\"nofollow noreferrer\">the way that this method is implemented</a> effectively guarantees that it starts from 0-9, then proceeds through a-f, then carries on should the radix exceed 16.</p>\n\n<p>If you want to do this in your own way, then you will need to perform the offsets yourself.</p>\n"},{"comments":[{"owner":{"account_id":8163058,"reputation":123,"user_id":6146420,"display_name":"forgetfulbur"},"score":1,"creation_date":1484865234,"post_id":41733499,"comment_id":70698440,"body_markdown":"Is there a way to get 26 to start &quot;aa&quot; rather than &quot;ba&quot;? Thanks btw.","body":"Is there a way to get 26 to start &quot;aa&quot; rather than &quot;ba&quot;? Thanks btw."},{"owner":{"account_id":4146553,"reputation":32805,"user_id":5743988,"accept_rate":67,"display_name":"4castle"},"score":1,"creation_date":1484865679,"post_id":41733499,"comment_id":70698635,"body_markdown":"@forgetfulbur As long as you intend &quot;a&quot; to mean &quot;0&quot;, &quot;ba&quot; is the correct output, because it&#39;s equivalent to &quot;10&quot;","body":"@forgetfulbur As long as you intend &quot;a&quot; to mean &quot;0&quot;, &quot;ba&quot; is the correct output, because it&#39;s equivalent to &quot;10&quot;"},{"owner":{"account_id":9310484,"reputation":335,"user_id":6912508,"accept_rate":67,"display_name":"sam1370"},"score":0,"creation_date":1531964128,"post_id":41733499,"comment_id":89797816,"body_markdown":"@forgetfulbur check if it starts with b and then change","body":"@forgetfulbur check if it starts with b and then change"}],"tags":[],"owner":{"account_id":4146553,"reputation":32805,"user_id":5743988,"accept_rate":67,"display_name":"4castle"},"comment_count":3,"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1484800975,"creation_date":1484798337,"answer_id":41733499,"question_id":41733231,"body_markdown":"You can iterate over a `char[]` to shift the output from `Integer.toString` into the range you want.\r\n\r\n    public static String toAlphabeticRadix(int num) {\r\n        char[] str = Integer.toString(num, 26).toCharArray();\r\n        for (int i = 0; i &lt; str.length; i++) {\r\n\t\t\tstr[i] += str[i] &gt; &#39;9&#39; ? 10 : 49;\r\n        }\r\n        return new String(str);\r\n    }\r\n\r\n[Ideone Demo][2]\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/lang/StringBuilder.html#setCharAt-int-char-\r\n  [2]: https://ideone.com/qBJFWY","title":"Base 26 as alphabetic using Java&#39;s Integer.toString()","body":"<p>You can iterate over a <code>char[]</code> to shift the output from <code>Integer.toString</code> into the range you want.</p>\n\n<pre><code>public static String toAlphabeticRadix(int num) {\n    char[] str = Integer.toString(num, 26).toCharArray();\n    for (int i = 0; i &lt; str.length; i++) {\n        str[i] += str[i] &gt; '9' ? 10 : 49;\n    }\n    return new String(str);\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/qBJFWY\" rel=\"noreferrer\">Ideone Demo</a></p>\n"},{"tags":[],"owner":{"account_id":28889934,"reputation":1,"user_id":22127321,"display_name":"Dawn-Felstar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687675155,"creation_date":1687675155,"answer_id":76549180,"question_id":41733231,"body_markdown":"if you want to have 26 = aa rather than ba then here&#39;s some code you can use.  \r\nThis is a modification of the code [4castle](https://stackoverflow.com/users/5743988/4castle) posted to this thread.\r\n\r\n    public static String toAlphabeticRadix(int num) {\r\n        char[] str = Integer.toString(num, 26).toCharArray();\r\n        for (int i = 0; i &lt; str.length; i++) {\r\n    \t\tstr[i] += (str[i] &gt; &#39;9&#39; ? 10 : 49) - (num &gt; 25 &amp;&amp; i &lt; 1 ? 1 : 0);\r\n        }\r\n        return new String(str);\r\n    }","title":"Base 26 as alphabetic using Java&#39;s Integer.toString()","body":"<p>if you want to have 26 = aa rather than ba then here's some code you can use.<br />\nThis is a modification of the code <a href=\"https://stackoverflow.com/users/5743988/4castle\">4castle</a> posted to this thread.</p>\n<pre><code>public static String toAlphabeticRadix(int num) {\n    char[] str = Integer.toString(num, 26).toCharArray();\n    for (int i = 0; i &lt; str.length; i++) {\n        str[i] += (str[i] &gt; '9' ? 10 : 49) - (num &gt; 25 &amp;&amp; i &lt; 1 ? 1 : 0);\n    }\n    return new String(str);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1033919,"reputation":5797,"user_id":1041691,"accept_rate":67,"display_name":"fommil"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691080385,"creation_date":1691080385,"answer_id":76830025,"question_id":41733231,"body_markdown":"This is Scala, but it does what you want with the correct flow over from Z to AA, and ZZ to AAA. The java code in previous examples is buggy and only counts to Y, not Z.\r\n\r\nThe important thing is to start counting from 1, not zero. This system for counting has no &quot;0&quot;.\r\n\r\n```scala\r\n  def gen_symbols: LazyList[String] = LazyList.from(1).map { i_ =&gt;\r\n    val buf = new java.lang.StringBuffer\r\n    var i = i_\r\n    while (i &gt; 0) {\r\n      val rem = (i - 1) % 26\r\n      buf.append((&#39;A&#39; + rem).toChar)\r\n      i = (i - rem) / 26\r\n    }\r\n    buf.reverse.toString\r\n  }\r\n```","title":"Base 26 as alphabetic using Java&#39;s Integer.toString()","body":"<p>This is Scala, but it does what you want with the correct flow over from Z to AA, and ZZ to AAA. The java code in previous examples is buggy and only counts to Y, not Z.</p>\n<p>The important thing is to start counting from 1, not zero. This system for counting has no &quot;0&quot;.</p>\n<pre class=\"lang-scala prettyprint-override\"><code>  def gen_symbols: LazyList[String] = LazyList.from(1).map { i_ =&gt;\n    val buf = new java.lang.StringBuffer\n    var i = i_\n    while (i &gt; 0) {\n      val rem = (i - 1) % 26\n      buf.append(('A' + rem).toChar)\n      i = (i - rem) / 26\n    }\n    buf.reverse.toString\n  }\n</code></pre>\n"}],"owner":{"account_id":8163058,"reputation":123,"user_id":6146420,"display_name":"forgetfulbur"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4059,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":41733499,"answer_count":4,"score":10,"last_activity_date":1691080385,"creation_date":1484796732,"question_id":41733231,"body_markdown":"So I just learned `Integer.toString(int x, int radix);` and thought it was pretty awesome since it makes base conversions super easy.\r\n\r\nHowever, I&#39;m trying to write with Base-26 phonetically (a - z) and noticed that `Integer.toString()` follows hexadecimal&#39;s example in that it begins numerically and then uses the alphabet (0 - p).\r\n\r\nI already know how to do convert to Base-26 by hand, I don&#39;t need that code. But I&#39;m wondering if there&#39;s a way to take advantage of `Integer.toString()` since it&#39;s pretty much already done all the heavy lifting.\r\n\r\nAny ideas?\r\n\r\n","title":"Base 26 as alphabetic using Java&#39;s Integer.toString()","body":"<p>So I just learned <code>Integer.toString(int x, int radix);</code> and thought it was pretty awesome since it makes base conversions super easy.</p>\n\n<p>However, I'm trying to write with Base-26 phonetically (a - z) and noticed that <code>Integer.toString()</code> follows hexadecimal's example in that it begins numerically and then uses the alphabet (0 - p).</p>\n\n<p>I already know how to do convert to Base-26 by hand, I don't need that code. But I'm wondering if there's a way to take advantage of <code>Integer.toString()</code> since it's pretty much already done all the heavy lifting.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["java","spring-boot","postman"],"comments":[{"owner":{"account_id":429324,"reputation":8238,"user_id":812149,"accept_rate":100,"display_name":"S.L. Barth is on codidact.com"},"score":0,"creation_date":1691080826,"post_id":76830015,"comment_id":135446499,"body_markdown":"If you set `DivisionController` to just return &quot;Hello world&quot;, do you then also get an ECONNREFUSED? (What I&#39;d like to find out is, if it is the Controller that&#39;s the problem, or if the problem originates deeper in the code - for example the connection to the database).","body":"If you set <code>DivisionController</code> to just return &quot;Hello world&quot;, do you then also get an ECONNREFUSED? (What I&#39;d like to find out is, if it is the Controller that&#39;s the problem, or if the problem originates deeper in the code - for example the connection to the database)."},{"owner":{"account_id":5912501,"reputation":3,"user_id":4652260,"display_name":"Mahadi Hasan"},"score":0,"creation_date":1691081881,"post_id":76830015,"comment_id":135446708,"body_markdown":"Hi @S.L.Barthisoncodidact.com, this is interesting! It returned hello world in the postman.","body":"Hi @S.L.Barthisoncodidact.com, this is interesting! It returned hello world in the postman."},{"owner":{"account_id":429324,"reputation":8238,"user_id":812149,"accept_rate":100,"display_name":"S.L. Barth is on codidact.com"},"score":0,"creation_date":1691082250,"post_id":76830015,"comment_id":135446763,"body_markdown":"Good! Seems the Controller itself is set up right, then. I&#39;m guessing the problem is in the connection with the database. I&#39;m not sure if I can be of much more help here. One thing you could try is to use an in-memory database and see if that works. Or see if you can reach the database from Postman directly. It could be a firewall block, or something like that. Good luck!","body":"Good! Seems the Controller itself is set up right, then. I&#39;m guessing the problem is in the connection with the database. I&#39;m not sure if I can be of much more help here. One thing you could try is to use an in-memory database and see if that works. Or see if you can reach the database from Postman directly. It could be a firewall block, or something like that. Good luck!"},{"owner":{"account_id":39574,"reputation":24267,"user_id":114226,"accept_rate":79,"display_name":"PeterMmm"},"score":0,"creation_date":1691082461,"post_id":76830015,"comment_id":135446811,"body_markdown":"`but it&#39;s throwing Error:`, where did you see this error ? is there any exception on the spring log/output ? What returns the local browser for this URL ?","body":"<code>but it&#39;s throwing Error:</code>, where did you see this error ? is there any exception on the spring log/output ? What returns the local browser for this URL ?"},{"owner":{"account_id":5912501,"reputation":3,"user_id":4652260,"display_name":"Mahadi Hasan"},"score":0,"creation_date":1691083122,"post_id":76830015,"comment_id":135446975,"body_markdown":"@PeterMmm, yes. That&#39;s a huge and huge exception whenever I press send button in postman.","body":"@PeterMmm, yes. That&#39;s a huge and huge exception whenever I press send button in postman."},{"owner":{"account_id":5912501,"reputation":3,"user_id":4652260,"display_name":"Mahadi Hasan"},"score":0,"creation_date":1691083867,"post_id":76830015,"comment_id":135447152,"body_markdown":"@S.L.Barthisoncodidact.com, My previous projects work fine and I tested just now. I assume that the problem might lie in the entity file. The id is string and it&#39;s the PK. Do you think it might be a problem?","body":"@S.L.Barthisoncodidact.com, My previous projects work fine and I tested just now. I assume that the problem might lie in the entity file. The id is string and it&#39;s the PK. Do you think it might be a problem?"},{"owner":{"account_id":39574,"reputation":24267,"user_id":114226,"accept_rate":79,"display_name":"PeterMmm"},"score":0,"creation_date":1691084023,"post_id":76830015,"comment_id":135447192,"body_markdown":"So, edited your question and add the first lines of the Exception.","body":"So, edited your question and add the first lines of the Exception."},{"owner":{"account_id":5912501,"reputation":3,"user_id":4652260,"display_name":"Mahadi Hasan"},"score":0,"creation_date":1691084805,"post_id":76830015,"comment_id":135447343,"body_markdown":"@PeterMmm, two exceptions were found.\n\n\n1. java.lang.IllegalStateException: Cannot call sendError() after the response has been committed.\n\n\n2. ERROR 17360 --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.http.converter.HttpMessageNotWritableException","body":"@PeterMmm, two exceptions were found.   1. java.lang.IllegalStateException: Cannot call sendError() after the response has been committed.   2. ERROR 17360 --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.http.converter.HttpMessageNotWritableExc&zwnj;&#8203;eption"},{"owner":{"account_id":39574,"reputation":24267,"user_id":114226,"accept_rate":79,"display_name":"PeterMmm"},"score":1,"creation_date":1691086232,"post_id":76830015,"comment_id":135447615,"body_markdown":"Let&#39;s do a step back. Forget Postman for a moment. Run your service and visit http://localhost:8080/division in a browser on the same host where the spring app is running. What do you get in the browser ? post the first **few** lines of the Exception and stack trace (if any) into your question. And remove this `@CrossOrigin`annotation.","body":"Let&#39;s do a step back. Forget Postman for a moment. Run your service and visit <a href=\"http://localhost:8080/division\" rel=\"nofollow noreferrer\">localhost:8080/division</a> in a browser on the same host where the spring app is running. What do you get in the browser ? post the first <b>few</b> lines of the Exception and stack trace (if any) into your question. And remove this <code>@CrossOrigin</code>annotation."},{"owner":{"account_id":5912501,"reputation":3,"user_id":4652260,"display_name":"Mahadi Hasan"},"score":0,"creation_date":1691122793,"post_id":76830015,"comment_id":135451951,"body_markdown":"@PeterMmm, in the browser it throws \n[{&quot;id&quot;:&quot;bar&quot;,&quot;division&quot;:&quot;Barishal&quot;,&quot;districts&quot;:[{&quot;id&quot;:&quot;bar1&quot;,&quot;district&quot;:&quot;Barisal&quot;,&quot;division&quot;:{&quot;id&quot;:&quot;bar&quot;,&quot;division&quot;:&quot;Barishal&quot;,&quot;districts&quot;:....... infinite times.","body":"@PeterMmm, in the browser it throws  [{&quot;id&quot;:&quot;bar&quot;,&quot;division&quot;:&quot;Barishal&quot;,&quot;districts&quot;:[{&quot;id&quot;:&quot;bar1&quot;&zwnj;&#8203;,&quot;district&quot;:&quot;Barisal&zwnj;&#8203;&quot;,&quot;division&quot;:{&quot;id&quot;:&quot;&zwnj;&#8203;bar&quot;,&quot;division&quot;:&quot;Bar&zwnj;&#8203;ishal&quot;,&quot;districts&quot;:.&zwnj;&#8203;...... infinite times."},{"owner":{"account_id":5912501,"reputation":3,"user_id":4652260,"display_name":"Mahadi Hasan"},"score":0,"creation_date":1691124454,"post_id":76830015,"comment_id":135452095,"body_markdown":"There is another issue with the code and it is a multiple-table relationship. But I want to avoid it here as the discussion is getting lengthy. I would like to request, could you please look at my https://github.com/Mahadijava/dynamic_dropdown  file and I believe that once you look at the whole picture, you&#39;ll get it. It is provided with Mysql database file name bangladesh.sql.","body":"There is another issue with the code and it is a multiple-table relationship. But I want to avoid it here as the discussion is getting lengthy. I would like to request, could you please look at my <a href=\"https://github.com/Mahadijava/dynamic_dropdown\" rel=\"nofollow noreferrer\">github.com/Mahadijava/dynamic_dropdown</a>  file and I believe that once you look at the whole picture, you&#39;ll get it. It is provided with Mysql database file name bangladesh.sql."},{"owner":{"account_id":39574,"reputation":24267,"user_id":114226,"accept_rate":79,"display_name":"PeterMmm"},"score":0,"creation_date":1691145246,"post_id":76830015,"comment_id":135455389,"body_markdown":"You have a recursive JSON mapping. Read here: https://www.baeldung.com/jackson-bidirectional-relationships-and-infinite-recursion","body":"You have a recursive JSON mapping. Read here: <a href=\"https://www.baeldung.com/jackson-bidirectional-relationships-and-infinite-recursion\" rel=\"nofollow noreferrer\">baeldung.com/&hellip;</a>"},{"owner":{"account_id":5912501,"reputation":3,"user_id":4652260,"display_name":"Mahadi Hasan"},"score":0,"creation_date":1691155133,"post_id":76830015,"comment_id":135457342,"body_markdown":"Thank you @PeterMmm, you really saved me. I want to select is as the right answer but don&#39;t see anything like &quot;Select it as the correct answer&quot;.","body":"Thank you @PeterMmm, you really saved me. I want to select is as the right answer but don&#39;t see anything like &quot;Select it as the correct answer&quot;."}],"owner":{"account_id":5912501,"reputation":3,"user_id":4652260,"display_name":"Mahadi Hasan"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691080309,"creation_date":1691080309,"question_id":76830015,"body_markdown":"I&#39;ve been trying to test an api in springboot but failed to fetch the data in postman. This is what i&#39;ve done. \r\n\r\n\r\nThis is entity\r\n```\r\n@Data\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Entity\r\n\r\npublic class Division {\r\n    @Id\r\n    private String id;\r\n    private String division;\r\n\r\n    @OneToMany(mappedBy = &quot;division&quot;, cascade = CascadeType.ALL, orphanRemoval = true)\r\n    private List&lt;District&gt; districts = new ArrayList&lt;&gt;();\r\n\r\n\r\n}\r\n```\r\nThis is repository\r\n\r\n```\r\npublic interface DivisionRepository extends JpaRepository &lt;Division, String&gt; {\r\n}\r\n```\r\nThis is Service\r\n\r\n```\r\n@Service\r\npublic class DivisionService {\r\n    @Autowired\r\n    DivisionRepository divisionRepository;\r\n    public List &lt;Division&gt; getAllDivision(){\r\n        return divisionRepository.findAll();\r\n    }\r\n}\r\n```\r\nThis is controller \r\n\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/division&quot;)\r\n@CrossOrigin(origins = &quot;http://localhost:8080&quot;, allowCredentials = &quot;true&quot;)\r\npublic class DivisionController {\r\n\r\n    @Autowired\r\n    DivisionService divisionService;\r\n\r\n    @GetMapping\r\n    List&lt;Division&gt; getAlldivisions(){\r\n\r\n        return divisionService.getAllDivision();\r\n    }\r\n}\r\n\r\n```\r\n\r\n[this is the table that I want to fetch in postman in JSOn format](https://i.stack.imgur.com/8djjg.png)\r\n\r\nUsing a GET request, I put the URL **http://localhost:8080/division** but it&#39;s throwing *Error: connect ECONNREFUSED 127.0.0.1:8080*\r\n\r\nWhat&#39;s the wrong with my code? \r\n\r\n","title":"Postman throwing error on API testing in springboot","body":"<p>I've been trying to test an api in springboot but failed to fetch the data in postman. This is what i've done.</p>\n<p>This is entity</p>\n<pre><code>@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@Entity\n\npublic class Division {\n    @Id\n    private String id;\n    private String division;\n\n    @OneToMany(mappedBy = &quot;division&quot;, cascade = CascadeType.ALL, orphanRemoval = true)\n    private List&lt;District&gt; districts = new ArrayList&lt;&gt;();\n\n\n}\n</code></pre>\n<p>This is repository</p>\n<pre><code>public interface DivisionRepository extends JpaRepository &lt;Division, String&gt; {\n}\n</code></pre>\n<p>This is Service</p>\n<pre><code>@Service\npublic class DivisionService {\n    @Autowired\n    DivisionRepository divisionRepository;\n    public List &lt;Division&gt; getAllDivision(){\n        return divisionRepository.findAll();\n    }\n}\n</code></pre>\n<p>This is controller</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/division&quot;)\n@CrossOrigin(origins = &quot;http://localhost:8080&quot;, allowCredentials = &quot;true&quot;)\npublic class DivisionController {\n\n    @Autowired\n    DivisionService divisionService;\n\n    @GetMapping\n    List&lt;Division&gt; getAlldivisions(){\n\n        return divisionService.getAllDivision();\n    }\n}\n\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/8djjg.png\" rel=\"nofollow noreferrer\">this is the table that I want to fetch in postman in JSOn format</a></p>\n<p>Using a GET request, I put the URL <strong>http://localhost:8080/division</strong> but it's throwing <em>Error: connect ECONNREFUSED 127.0.0.1:8080</em></p>\n<p>What's the wrong with my code?</p>\n"},{"tags":["java","concurrency","atomicreference"],"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1691041508,"post_id":76823529,"comment_id":135437595,"body_markdown":"When posting here, you may get a better response if you put some effort into devising a simplified example with an obvious problem domain rather dumping your actual domain. “IpBlockingDenyList…” etc. is a distraction, and makes your Question harder to read.","body":"When posting here, you may get a better response if you put some effort into devising a simplified example with an obvious problem domain rather dumping your actual domain. “IpBlockingDenyList…” etc. is a distraction, and makes your Question harder to read."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1691042794,"post_id":76823529,"comment_id":135437783,"body_markdown":"When posting here, follow Java conventions such as indenting the lines of code within a block.","body":"When posting here, follow Java conventions such as indenting the lines of code within a block."}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691080269,"creation_date":1691042754,"answer_id":76825288,"question_id":76823529,"body_markdown":"## Multiple `AtomicReference#get` calls is *not* atomic\r\n\r\n&gt;it returns an empty list.\r\n\r\nYou have not included enough detail for us to diagnose this problem. However, I could *guess* that it may come from one huge mistake you made in your code: Calling `AtomicReference#get` twice.\r\n\r\nIn this block:\r\n\r\n```java\r\npublic List&lt;IpBlockingDenyListRecord&gt; getIpBlockingDenyList() {\r\n    log.info(&quot;localDenyListSize: &quot; + denyListAtomicReference.get().getIpBlockingDenyList().size());\r\n    return denyListAtomicReference.get().getIpBlockingDenyList();\r\n}\r\n```\r\n\r\n… you call `denyListAtomicReference.get()` twice. That pair of calls is *not* atomic. Consider this sequence of events:\r\n\r\n| Sequence | Thread 101&lt;br /&gt;(your code above) | Thread 27&lt;br /&gt;(some other imaginary code)|\r\n| :--: | :--: | :--: |\r\n| 1    | `denyListAtomicReference.get()` returns list *x* | |\r\n| 2   |  | `denyListAtomicReference.set( y )` call changes the reference from list *x* to list *y* |\r\n| 3    | `denyListAtomicReference.get()` returns list *y* | |\r\n\r\nIn this scenario you would be reporting on the size of list *x* while handing off an entirely different list *y*. \r\n\r\nYou should change that block to call `get` only once.\r\n\r\n```java\r\npublic List&lt;IpBlockingDenyListRecord&gt; getIpBlockingDenyList() {\r\n    List&lt;IpBlockingDenyListRecord&gt; list = denyListAtomicReference.get().getIpBlockingDenyList() ;\r\n    log.info(&quot;localDenyListSize: &quot; + list.size());\r\n    return list;\r\n}\r\n```\r\n\r\n\r\n----------\r\n\r\n## Don&#39;t call `get` if you don&#39;t want the value returned\r\n\r\nSeparate issue: Call `set` rather than `getAndSet` if you don&#39;t capture the returned value.\r\n\r\nYour line:\r\n\r\n    denyListAtomicReference.getAndSet(new LocalIpBlockingDenyListResponse(newDenyList));\r\n\r\n… returns the old value contained in the atomic reference before setting a new value in the atomic reference. But you do not bother to capture a reference to the old value returned. So there is no point here in &quot;getting&quot;. Just call `set` of you don&#39;t care about the old value.\r\n\r\n    denyListAtomicReference.set(new LocalIpBlockingDenyListResponse(newDenyList));\r\n\r\n\r\n----------\r\n\r\n\r\n \r\n## Alternate example\r\n\r\nLet&#39;s rewrite your code for simplicity.\r\n\r\n&gt;I have a class called LocalIpBlockingDenyListResponse that has two class members viz a List&lt;CustomClass&gt; customClassList and an int storing hashCode() of customClassList\r\n\r\nLet&#39;s use a [record][1] for simplicity. Note that we guard our `List` property by ensuring it is immutable with call to `List.copyOf` combined with `new ArrayList`. \r\n\r\n```java\r\npackage work.basil.example.atomics;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Collection;\r\nimport java.util.List;\r\nimport java.util.Objects;\r\n\r\npublic record People( List &lt; String &gt; list ,\r\n                      int hash )\r\n{\r\n    public static People of ( final Collection &lt; String &gt; namesInput )\r\n    {\r\n        List &lt; String &gt; names = List.copyOf ( new ArrayList &lt;&gt; ( namesInput ) );\r\n        return new People ( names , Objects.hashCode ( names ) );\r\n    }\r\n\r\n    public People\r\n    {\r\n        Objects.requireNonNull ( list );\r\n        if ( Objects.hashCode ( list ) != hash ) throw new IllegalArgumentException ( &quot;Received an invalid hash code number&quot; );\r\n    }\r\n}\r\n\r\n```\r\n\r\nAssign an object of that record class to an atomic reference. And then replace that reference several times in other threads. I believe this code will result in there never being an empty list.\r\n\r\n```java\r\npackage work.basil.example.atomics;\r\n\r\nimport java.time.Duration;\r\nimport java.time.Instant;\r\nimport java.util.Collection;\r\nimport java.util.List;\r\nimport java.util.Objects;\r\nimport java.util.concurrent.Executors;\r\nimport java.util.concurrent.ScheduledExecutorService;\r\nimport java.util.concurrent.ThreadLocalRandom;\r\nimport java.util.concurrent.TimeUnit;\r\nimport java.util.concurrent.atomic.AtomicReference;\r\n\r\npublic class ListRef\r\n{\r\n    public final AtomicReference &lt; People &gt; peopleRef;\r\n\r\n    public ListRef ( People peopleArg )\r\n    {\r\n        Objects.requireNonNull ( peopleArg );\r\n        this.peopleRef = new AtomicReference &lt;&gt; ( peopleArg );\r\n    }\r\n\r\n    public void replacePeople ( Collection &lt; String &gt; names )\r\n    {\r\n        People newPeople = People.of ( names );\r\n        People oldPeople = this.peopleRef.getAndSet ( newPeople );\r\n        String report = &quot;Replaced &quot; + oldPeople + &quot; with &quot; + newPeople + &quot; at &quot; + Instant.now ( );\r\n        System.out.println ( report );  // Beware: System.out does NOT necessarily report its inputs in chronological order. Always include and study a timestamp.\r\n    }\r\n\r\n    public static void main ( String[] args )\r\n    {\r\n        People people = People.of ( List.of ( &quot;Alice&quot; , &quot;Bob&quot; ) );\r\n        ListRef app = new ListRef ( people );\r\n        app.demo ( );\r\n    }\r\n\r\n    private void demo ( )\r\n    {\r\n        System.out.println ( &quot;Demo beginning at &quot; + Instant.now ( ) );\r\n        List &lt; List &lt; String &gt; &gt; manyNames =\r\n                List.of (\r\n                        List.of ( &quot;Carol&quot; , &quot;Davis&quot; ) ,\r\n                        List.of ( &quot;Edith&quot; , &quot;Frank&quot; ) ,\r\n                        List.of ( &quot;Gail&quot; , &quot;Harold&quot; ) ,\r\n                        List.of ( &quot;Irene&quot; , &quot;Jack&quot; ) ,\r\n                        List.of ( &quot;Karen&quot; , &quot;Lenard&quot; )\r\n                );\r\n        try ( ScheduledExecutorService ses = Executors.newScheduledThreadPool ( 3 ) )\r\n        {\r\n            for ( List &lt; String &gt; names : manyNames )\r\n            {\r\n                Duration d = Duration.ofSeconds ( ThreadLocalRandom.current ( ).nextInt ( 5 , 25 ) );\r\n                ses.schedule (\r\n                        ( ) -&gt; this.replacePeople ( names ) ,\r\n                        d.toSeconds ( ) ,\r\n                        TimeUnit.SECONDS\r\n                );\r\n            }\r\n        }\r\n        System.out.println ( &quot;Demo ending at &quot; + Instant.now ( ) );\r\n    }\r\n}\r\n```\r\n\r\nWhen run:\r\n\r\n```none\r\nDemo beginning at 2023-08-03T06:55:43.175423Z\r\nReplaced People[list=[Alice, Bob], hash=1963929334] with People[list=[Karen, Lenard], hash=217763130] at 2023-08-03T06:55:51.215807Z\r\nReplaced People[list=[Karen, Lenard], hash=217763130] with People[list=[Gail, Harold], hash=-2072015662] at 2023-08-03T06:55:52.185813Z\r\nReplaced People[list=[Gail, Harold], hash=-2072015662] with People[list=[Irene, Jack], hash=-2094338259] at 2023-08-03T06:55:53.185362Z\r\nReplaced People[list=[Irene, Jack], hash=-2094338259] with People[list=[Edith, Frank], hash=2139146613] at 2023-08-03T06:55:59.185048Z\r\nReplaced People[list=[Edith, Frank], hash=2139146613] with People[list=[Carol, Davis], hash=2077047731] at 2023-08-03T06:56:07.182682Z\r\nDemo ending at 2023-08-03T06:56:07.183702Z\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  [1]: https://openjdk.org/jeps/395","title":"AtomicReference getAndSet not working as expected","body":"<h2>Multiple <code>AtomicReference#get</code> calls is <em>not</em> atomic</h2>\n<blockquote>\n<p>it returns an empty list.</p>\n</blockquote>\n<p>You have not included enough detail for us to diagnose this problem. However, I could <em>guess</em> that it may come from one huge mistake you made in your code: Calling <code>AtomicReference#get</code> twice.</p>\n<p>In this block:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public List&lt;IpBlockingDenyListRecord&gt; getIpBlockingDenyList() {\n    log.info(&quot;localDenyListSize: &quot; + denyListAtomicReference.get().getIpBlockingDenyList().size());\n    return denyListAtomicReference.get().getIpBlockingDenyList();\n}\n</code></pre>\n<p>… you call <code>denyListAtomicReference.get()</code> twice. That pair of calls is <em>not</em> atomic. Consider this sequence of events:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th style=\"text-align: center;\">Sequence</th>\n<th style=\"text-align: center;\">Thread 101<br />(your code above)</th>\n<th style=\"text-align: center;\">Thread 27<br />(some other imaginary code)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center;\">1</td>\n<td style=\"text-align: center;\"><code>denyListAtomicReference.get()</code> returns list <em>x</em></td>\n<td style=\"text-align: center;\"></td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">2</td>\n<td style=\"text-align: center;\"></td>\n<td style=\"text-align: center;\"><code>denyListAtomicReference.set( y )</code> call changes the reference from list <em>x</em> to list <em>y</em></td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">3</td>\n<td style=\"text-align: center;\"><code>denyListAtomicReference.get()</code> returns list <em>y</em></td>\n<td style=\"text-align: center;\"></td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>In this scenario you would be reporting on the size of list <em>x</em> while handing off an entirely different list <em>y</em>.</p>\n<p>You should change that block to call <code>get</code> only once.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public List&lt;IpBlockingDenyListRecord&gt; getIpBlockingDenyList() {\n    List&lt;IpBlockingDenyListRecord&gt; list = denyListAtomicReference.get().getIpBlockingDenyList() ;\n    log.info(&quot;localDenyListSize: &quot; + list.size());\n    return list;\n}\n</code></pre>\n<hr />\n<h2>Don't call <code>get</code> if you don't want the value returned</h2>\n<p>Separate issue: Call <code>set</code> rather than <code>getAndSet</code> if you don't capture the returned value.</p>\n<p>Your line:</p>\n<pre><code>denyListAtomicReference.getAndSet(new LocalIpBlockingDenyListResponse(newDenyList));\n</code></pre>\n<p>… returns the old value contained in the atomic reference before setting a new value in the atomic reference. But you do not bother to capture a reference to the old value returned. So there is no point here in &quot;getting&quot;. Just call <code>set</code> of you don't care about the old value.</p>\n<pre><code>denyListAtomicReference.set(new LocalIpBlockingDenyListResponse(newDenyList));\n</code></pre>\n<hr />\n<h2>Alternate example</h2>\n<p>Let's rewrite your code for simplicity.</p>\n<blockquote>\n<p>I have a class called LocalIpBlockingDenyListResponse that has two class members viz a List customClassList and an int storing hashCode() of customClassList</p>\n</blockquote>\n<p>Let's use a <a href=\"https://openjdk.org/jeps/395\" rel=\"nofollow noreferrer\">record</a> for simplicity. Note that we guard our <code>List</code> property by ensuring it is immutable with call to <code>List.copyOf</code> combined with <code>new ArrayList</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.atomics;\n\nimport java.util.ArrayList;\nimport java.util.Collection;\nimport java.util.List;\nimport java.util.Objects;\n\npublic record People( List &lt; String &gt; list ,\n                      int hash )\n{\n    public static People of ( final Collection &lt; String &gt; namesInput )\n    {\n        List &lt; String &gt; names = List.copyOf ( new ArrayList &lt;&gt; ( namesInput ) );\n        return new People ( names , Objects.hashCode ( names ) );\n    }\n\n    public People\n    {\n        Objects.requireNonNull ( list );\n        if ( Objects.hashCode ( list ) != hash ) throw new IllegalArgumentException ( &quot;Received an invalid hash code number&quot; );\n    }\n}\n\n</code></pre>\n<p>Assign an object of that record class to an atomic reference. And then replace that reference several times in other threads. I believe this code will result in there never being an empty list.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.atomics;\n\nimport java.time.Duration;\nimport java.time.Instant;\nimport java.util.Collection;\nimport java.util.List;\nimport java.util.Objects;\nimport java.util.concurrent.Executors;\nimport java.util.concurrent.ScheduledExecutorService;\nimport java.util.concurrent.ThreadLocalRandom;\nimport java.util.concurrent.TimeUnit;\nimport java.util.concurrent.atomic.AtomicReference;\n\npublic class ListRef\n{\n    public final AtomicReference &lt; People &gt; peopleRef;\n\n    public ListRef ( People peopleArg )\n    {\n        Objects.requireNonNull ( peopleArg );\n        this.peopleRef = new AtomicReference &lt;&gt; ( peopleArg );\n    }\n\n    public void replacePeople ( Collection &lt; String &gt; names )\n    {\n        People newPeople = People.of ( names );\n        People oldPeople = this.peopleRef.getAndSet ( newPeople );\n        String report = &quot;Replaced &quot; + oldPeople + &quot; with &quot; + newPeople + &quot; at &quot; + Instant.now ( );\n        System.out.println ( report );  // Beware: System.out does NOT necessarily report its inputs in chronological order. Always include and study a timestamp.\n    }\n\n    public static void main ( String[] args )\n    {\n        People people = People.of ( List.of ( &quot;Alice&quot; , &quot;Bob&quot; ) );\n        ListRef app = new ListRef ( people );\n        app.demo ( );\n    }\n\n    private void demo ( )\n    {\n        System.out.println ( &quot;Demo beginning at &quot; + Instant.now ( ) );\n        List &lt; List &lt; String &gt; &gt; manyNames =\n                List.of (\n                        List.of ( &quot;Carol&quot; , &quot;Davis&quot; ) ,\n                        List.of ( &quot;Edith&quot; , &quot;Frank&quot; ) ,\n                        List.of ( &quot;Gail&quot; , &quot;Harold&quot; ) ,\n                        List.of ( &quot;Irene&quot; , &quot;Jack&quot; ) ,\n                        List.of ( &quot;Karen&quot; , &quot;Lenard&quot; )\n                );\n        try ( ScheduledExecutorService ses = Executors.newScheduledThreadPool ( 3 ) )\n        {\n            for ( List &lt; String &gt; names : manyNames )\n            {\n                Duration d = Duration.ofSeconds ( ThreadLocalRandom.current ( ).nextInt ( 5 , 25 ) );\n                ses.schedule (\n                        ( ) -&gt; this.replacePeople ( names ) ,\n                        d.toSeconds ( ) ,\n                        TimeUnit.SECONDS\n                );\n            }\n        }\n        System.out.println ( &quot;Demo ending at &quot; + Instant.now ( ) );\n    }\n}\n</code></pre>\n<p>When run:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Demo beginning at 2023-08-03T06:55:43.175423Z\nReplaced People[list=[Alice, Bob], hash=1963929334] with People[list=[Karen, Lenard], hash=217763130] at 2023-08-03T06:55:51.215807Z\nReplaced People[list=[Karen, Lenard], hash=217763130] with People[list=[Gail, Harold], hash=-2072015662] at 2023-08-03T06:55:52.185813Z\nReplaced People[list=[Gail, Harold], hash=-2072015662] with People[list=[Irene, Jack], hash=-2094338259] at 2023-08-03T06:55:53.185362Z\nReplaced People[list=[Irene, Jack], hash=-2094338259] with People[list=[Edith, Frank], hash=2139146613] at 2023-08-03T06:55:59.185048Z\nReplaced People[list=[Edith, Frank], hash=2139146613] with People[list=[Carol, Davis], hash=2077047731] at 2023-08-03T06:56:07.182682Z\nDemo ending at 2023-08-03T06:56:07.183702Z\n</code></pre>\n"}],"owner":{"account_id":4257317,"reputation":1250,"user_id":3482656,"accept_rate":74,"display_name":"LearningAsIGo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76825288,"answer_count":1,"score":0,"last_activity_date":1691080269,"creation_date":1691010374,"question_id":76823529,"body_markdown":"I have a class called ```LocalIpBlockingDenyListResponse``` that has two class members viz a ```List&lt;CustomClass&gt; customClassList``` and an ```int``` storing ```hashCode()``` of ```customClassList```\r\n\r\nI have atomic reference of above class defined in another class like,\r\n\r\n    private final AtomicReference&lt;LocalIpBlockingDenyListResponse&gt; denyListAtomicReference;\r\n\r\n which is being initialized in the constructor like this \r\n\r\n    this.denyListAtomicReference = new AtomicReference&lt;&gt;(new LocalIpBlockingDenyListResponse(new ArrayList&lt;&gt;()));\r\n\r\nI have this code in a method in same class thats updating atomic reference\r\n\r\n    try {\r\n    List&lt;IpBlockingDenyListRecord&gt; newDenyList = sonarisConsumer. getSonarisSuggestions);\r\n    List&lt;IpBlockingDenyListRecord&gt; validatedDenyList = validate (newDenyList); consumptionMetrics.addCount(&quot;denyListSize&quot; , validatedDenyList.size), Unit.ONE);\r\n    setDenyListAtomicReference(validatedDenyList);\r\n    }\r\n\r\nThis is what setDenyListAtomicReference looks like\r\n\r\n    void setDenyListAtomicReference(List&lt;IpBlockingDenyListRecords newDenyList) {\r\n    denyListAtomicReference.getAndSet(new LocalIpBlockingDenyListResponse(newDenyList));\r\n    }\r\n\r\nBut when I call getIpBlockingDenyList\r\n\r\n    public List&lt;IpBlockingDenyListRecord&gt; getIpBlockingDenyList() {\r\n    log.info(&quot;localDenyListSize: &quot; + denyListAtomicReference.get() . getIpBlockingDenyList().size());\r\n    return denyListAtomicReference.get().getIpBlockingDenyList();\r\n\r\nit returns an empty list.\r\n\r\nI tried using ```set``` instead of ```getAndSet```. Added bunch of log and debug statements but I am not able to understand why reference is not updating. I have confirmed that ```validatedDenyList``` holds the records as expected and is non empty.\r\n\r\nCan someone please help me figure out what I am doing wrong?\r\n","title":"AtomicReference getAndSet not working as expected","body":"<p>I have a class called <code>LocalIpBlockingDenyListResponse</code> that has two class members viz a <code>List&lt;CustomClass&gt; customClassList</code> and an <code>int</code> storing <code>hashCode()</code> of <code>customClassList</code></p>\n<p>I have atomic reference of above class defined in another class like,</p>\n<pre><code>private final AtomicReference&lt;LocalIpBlockingDenyListResponse&gt; denyListAtomicReference;\n</code></pre>\n<p>which is being initialized in the constructor like this</p>\n<pre><code>this.denyListAtomicReference = new AtomicReference&lt;&gt;(new LocalIpBlockingDenyListResponse(new ArrayList&lt;&gt;()));\n</code></pre>\n<p>I have this code in a method in same class thats updating atomic reference</p>\n<pre><code>try {\nList&lt;IpBlockingDenyListRecord&gt; newDenyList = sonarisConsumer. getSonarisSuggestions);\nList&lt;IpBlockingDenyListRecord&gt; validatedDenyList = validate (newDenyList); consumptionMetrics.addCount(&quot;denyListSize&quot; , validatedDenyList.size), Unit.ONE);\nsetDenyListAtomicReference(validatedDenyList);\n}\n</code></pre>\n<p>This is what setDenyListAtomicReference looks like</p>\n<pre><code>void setDenyListAtomicReference(List&lt;IpBlockingDenyListRecords newDenyList) {\ndenyListAtomicReference.getAndSet(new LocalIpBlockingDenyListResponse(newDenyList));\n}\n</code></pre>\n<p>But when I call getIpBlockingDenyList</p>\n<pre><code>public List&lt;IpBlockingDenyListRecord&gt; getIpBlockingDenyList() {\nlog.info(&quot;localDenyListSize: &quot; + denyListAtomicReference.get() . getIpBlockingDenyList().size());\nreturn denyListAtomicReference.get().getIpBlockingDenyList();\n</code></pre>\n<p>it returns an empty list.</p>\n<p>I tried using <code>set</code> instead of <code>getAndSet</code>. Added bunch of log and debug statements but I am not able to understand why reference is not updating. I have confirmed that <code>validatedDenyList</code> holds the records as expected and is non empty.</p>\n<p>Can someone please help me figure out what I am doing wrong?</p>\n"},{"tags":["java","spring","spring-boot","thymeleaf"],"comments":[{"owner":{"account_id":14357523,"reputation":2069,"user_id":10370932,"display_name":"Adina Rolea"},"score":0,"creation_date":1540023255,"post_id":52903612,"comment_id":92718513,"body_markdown":"Your code looks fine, could you please add your spring application dependencies?","body":"Your code looks fine, could you please add your spring application dependencies?"},{"owner":{"account_id":959020,"reputation":3213,"user_id":983783,"accept_rate":63,"display_name":"Eddy Freeman"},"score":0,"creation_date":1540023739,"post_id":52903612,"comment_id":92718629,"body_markdown":"@Adina I have added additional config files","body":"@Adina I have added additional config files"},{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1540023851,"post_id":52903612,"comment_id":92718663,"body_markdown":"Why do you have these   &lt;!-- Servlet and JSP related dependencies --&gt; ) and do you plan to deploy your application as WAR or JAR?","body":"Why do you have these   &lt;!-- Servlet and JSP related dependencies --&gt; ) and do you plan to deploy your application as WAR or JAR?"},{"owner":{"account_id":959020,"reputation":3213,"user_id":983783,"accept_rate":63,"display_name":"Eddy Freeman"},"score":0,"creation_date":1540024163,"post_id":52903612,"comment_id":92718743,"body_markdown":"@SimonMartinelli deployment is not relevant at the moment. I just want to get the code to work.","body":"@SimonMartinelli deployment is not relevant at the moment. I just want to get the code to work."},{"owner":{"account_id":14357523,"reputation":2069,"user_id":10370932,"display_name":"Adina Rolea"},"score":0,"creation_date":1540025641,"post_id":52903612,"comment_id":92719046,"body_markdown":"@EddyFreeman do you want to have both jsp and thymeleaf? Your initialization fails because it does not know which one to initialize. This is an old debate on stackoverflow if you can have them both. If you will delete all dependencies related to jsp and let only thymeleaf, your error will not be raised anymore.","body":"@EddyFreeman do you want to have both jsp and thymeleaf? Your initialization fails because it does not know which one to initialize. This is an old debate on stackoverflow if you can have them both. If you will delete all dependencies related to jsp and let only thymeleaf, your error will not be raised anymore."},{"owner":{"account_id":959020,"reputation":3213,"user_id":983783,"accept_rate":63,"display_name":"Eddy Freeman"},"score":0,"creation_date":1540025962,"post_id":52903612,"comment_id":92719109,"body_markdown":"@Adina I have updated my post. I have deleted some dependencies from the POM but still get the error","body":"@Adina I have updated my post. I have deleted some dependencies from the POM but still get the error"},{"owner":{"account_id":1473276,"reputation":111009,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"score":0,"creation_date":1540028337,"post_id":52903612,"comment_id":92719632,"body_markdown":"Spring Boot will auto-configure Thymeleaf and Spring MVC for you. You almost certainly don’t want `@EnableWebMvc` and you probably don’t need any of the three Thymeleaf related beans either. What is the reason for configuring things manually rather than letting Spring Boot take care of things for you? Also, the packaging that you will use does matter here. There’s no `WEB-INF` unless you are building a war file.","body":"Spring Boot will auto-configure Thymeleaf and Spring MVC for you. You almost certainly don’t want <code>@EnableWebMvc</code> and you probably don’t need any of the three Thymeleaf related beans either. What is the reason for configuring things manually rather than letting Spring Boot take care of things for you? Also, the packaging that you will use does matter here. There’s no <code>WEB-INF</code> unless you are building a war file."},{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1540031335,"post_id":52903612,"comment_id":92720263,"body_markdown":"Have you had a look at the quickstarts. You don&#39;t need the ThymeleafConfig","body":"Have you had a look at the quickstarts. You don&#39;t need the ThymeleafConfig"}],"answers":[{"tags":[],"owner":{"account_id":14357523,"reputation":2069,"user_id":10370932,"display_name":"Adina Rolea"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1540031286,"creation_date":1540030687,"answer_id":52904582,"question_id":52903612,"body_markdown":"After some debugging on your code, the real problem is that you are autowiring ThymeleafViewResolver in the configuration responsible to configure servlet context.\r\n\r\n     public class WebMvcConfig implements WebMvcConfigurer{\r\n  \r\n         @Autowired\r\n         private ThymeleafViewResolver thymeleafViewResolver;\r\n\r\nThe main problem is that before initializing your ServletContext, the application will try to initialize the ServletContextTemplateResolver (autowired will impose bean order initialization) and as you&#39;ve noticed it depends on ServletContext.\r\n\r\n**Solution** : \r\n\r\n- delete ThymeleafConfig class\r\n- don&#39;t autowire ThymeleafViewResolver in WebMvcConfig \r\n- and don&#39;t override method configureViewResolvers.\r\n\r\nDon&#39;t worry, Thymeleaf will be set by default as the viewResolver.\r\n\r\nMost of the config you&#39;ve provided is already &quot;taken care&quot; by spring-boot-starter-thymeleaf.\r\nIf you want just to change default view directory resolver, you can just add in application.properties\r\n\r\n    spring.mvc.view.prefix=/WEB-INF/templates/\r\n    spring.mvc.view.suffix=.html\r\n\r\nP.S: Take extra care when you override default definition from spring starters, as you can see these types of bugs are not easy to find.","title":"Issues with Spring Boot and Thymeleaf","body":"<p>After some debugging on your code, the real problem is that you are autowiring ThymeleafViewResolver in the configuration responsible to configure servlet context.</p>\n\n<pre><code> public class WebMvcConfig implements WebMvcConfigurer{\n\n     @Autowired\n     private ThymeleafViewResolver thymeleafViewResolver;\n</code></pre>\n\n<p>The main problem is that before initializing your ServletContext, the application will try to initialize the ServletContextTemplateResolver (autowired will impose bean order initialization) and as you've noticed it depends on ServletContext.</p>\n\n<p><strong>Solution</strong> : </p>\n\n<ul>\n<li>delete ThymeleafConfig class</li>\n<li>don't autowire ThymeleafViewResolver in WebMvcConfig </li>\n<li>and don't override method configureViewResolvers.</li>\n</ul>\n\n<p>Don't worry, Thymeleaf will be set by default as the viewResolver.</p>\n\n<p>Most of the config you've provided is already \"taken care\" by spring-boot-starter-thymeleaf.\nIf you want just to change default view directory resolver, you can just add in application.properties</p>\n\n<pre><code>spring.mvc.view.prefix=/WEB-INF/templates/\nspring.mvc.view.suffix=.html\n</code></pre>\n\n<p>P.S: Take extra care when you override default definition from spring starters, as you can see these types of bugs are not easy to find.</p>\n"}],"owner":{"account_id":959020,"reputation":3213,"user_id":983783,"accept_rate":63,"display_name":"Eddy Freeman"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2313,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":52904582,"answer_count":1,"score":0,"last_activity_date":1691080126,"creation_date":1540022197,"question_id":52903612,"body_markdown":"Here are my configuration classes:\r\n\r\nIn the `templateResolver()` method without ServletContext parameter I get a compile error so add it as a parameter and give it to `ServletContextTemplateResolver(servletContext)`:\r\n\r\n    @Configuration\r\n    @EnableWebMvc\r\n    @ComponentScan(basePackages= {&quot;com.packtpub.springsecurity&quot;})\r\n    public class ThymeleafConfig {\r\n    \r\n        @Bean\r\n        public ServletContextTemplateResolver templateResolver(ServletContext servletContext) {\r\n            ServletContextTemplateResolver resolver = new ServletContextTemplateResolver(servletContext);\r\n            resolver.setPrefix(&quot;/WEB-INF/templates/&quot;);\r\n            resolver.setSuffix(&quot;.html&quot;);\r\n            resolver.setTemplateMode(&quot;HTML5&quot;);\r\n            resolver.setCacheable(false);\r\n            resolver.setOrder(1);\r\n            return resolver;\r\n        }\r\n    \r\n        @Bean\r\n        public SpringTemplateEngine templateEngine(final ServletContextTemplateResolver templateResolver) {\r\n            SpringTemplateEngine engine = new SpringTemplateEngine();\r\n            engine.setTemplateResolver(templateResolver);\r\n            return engine;\r\n        }\r\n    \r\n        @Bean\r\n        public ThymeleafViewResolver thymeleafViewResolver(final SpringTemplateEngine templateEngine) {\r\n            ThymeleafViewResolver resolver = new ThymeleafViewResolver();\r\n            resolver.setTemplateEngine(templateEngine);\r\n            return resolver;\r\n        }\r\n    \r\n    }\r\n\r\nWhen I run my application I get following error:\r\n\r\n    ***************************\r\n    APPLICATION FAILED TO START\r\n    ***************************\r\n    \r\n    Description:\r\n    \r\n    Parameter 0 of method templateResolver in com.packtpub.springsecurity.web.configuration.ThymeleafConfig required a bean of type &#39;javax.servlet.ServletContext&#39; that could not be found.\r\n    \r\n    The injection point has the following annotations:\r\n    \t- @org.springframework.beans.factory.annotation.Autowired(required=true)\r\n    \r\n    \r\n    Action:\r\n    \r\n    Consider defining a bean of type &#39;javax.servlet.ServletContext&#39; in your configuration.\r\n\r\n\r\nWhat am I doing wrong?\r\n\r\nOther config files are:\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n    \t&lt;groupId&gt;chapter2&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;chapter2&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;packaging&gt;jar&lt;/packaging&gt;\r\n    \r\n    \t&lt;name&gt;chapter2&lt;/name&gt;\r\n    \t&lt;description&gt;chapter 2 test&lt;/description&gt;\r\n    \r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.0.6.RELEASE&lt;/version&gt;\r\n    \t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \r\n    \t&lt;properties&gt;\r\n    \t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    \t\t&lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n    \t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t\r\n    \t\t\r\n    \t\t\r\n    \t\t&lt;!-- Thymeleaf --&gt;\t\r\n     \t\t&lt;dependency&gt;\r\n    \t\t    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t    &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t\r\n    \t\t\r\n    \t\t\r\n    \t\t\r\n    \t\t\r\n    \t\t&lt;!-- Spring dependencies START--&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t   &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n    \t\t   &lt;artifactId&gt;spring-security-web&lt;/artifactId&gt;\r\n    \t\t   &lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t   &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n    \t\t   &lt;artifactId&gt;spring-security-config&lt;/artifactId&gt;\r\n    \t\t   &lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t   &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n    \t\t   &lt;artifactId&gt;spring-security-crypto&lt;/artifactId&gt;\r\n    \t\t   &lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t   &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t   &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n    \t\t   &lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t   &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t   &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\r\n    \t\t   &lt;/dependency&gt;\r\n    \t\t&lt;!-- Servlet and JSP related dependencies --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t   &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n    \t\t   &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\r\n    \t\t   &lt;scope&gt;provided&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t   &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;\r\n    \t\t   &lt;artifactId&gt;javax.servlet.jsp-api&lt;/artifactId&gt;\r\n    \t\t   &lt;version&gt;2.3.1&lt;/version&gt;\r\n    \t\t   &lt;scope&gt;provided&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t   &lt;groupId&gt;javax.servlet.jsp.jstl&lt;/groupId&gt;\r\n    \t\t   &lt;artifactId&gt;javax.servlet.jsp.jstl-api&lt;/artifactId&gt;\r\n    \t\t   &lt;version&gt;1.2.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t   &lt;groupId&gt;taglibs&lt;/groupId&gt;\r\n    \t\t   &lt;artifactId&gt;standard&lt;/artifactId&gt;\r\n    \t\t   &lt;version&gt;1.1.2&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;!-- For datasource configuration --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t   &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n    \t\t   &lt;artifactId&gt;commons-dbcp2&lt;/artifactId&gt;\r\n    \t\t   &lt;/dependency&gt;\r\n    \t\t&lt;!-- We will be using MySQL as our database server --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t   &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n    \t\t   &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n    \t\t   &lt;version&gt;6.0.6&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;   \r\n     \t\t&lt;!-- Spring dependencies END --&gt;\t\r\n    \t\t\r\n    \t\t\r\n    \t\t\r\n    \t\t&lt;dependency&gt;\r\n        &lt;groupId&gt;org.json&lt;/groupId&gt;\r\n        &lt;artifactId&gt;json&lt;/artifactId&gt;\r\n        &lt;version&gt;20170516&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    \t\t\r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \r\n    \r\n    &lt;/project&gt;\r\n\r\n\r\n\r\n    @Configuration\r\n    //@Import({SecurityConfig.class, DataSourceConfig.class})\r\n    @ComponentScan(basePackages =\r\n            {\r\n                    &quot;com.packtpub.springsecurity.dataaccess&quot;,\r\n                    &quot;com.packtpub.springsecurity.domain&quot;,\r\n                    &quot;com.packtpub.springsecurity.service&quot;\r\n            }\r\n    )\r\n    @PropertySource(value = {&quot;classpath:application.properties&quot;})\r\n    public class JavaConfig {\r\n    \r\n        /**\r\n         * Note: If you want to use @PropertySource, you must create a static\r\n         * PropertySourcesPlaceholderConfigurer with the @Bean as seen here.\r\n         * @return PropertySourcesPlaceholderConfigurer\r\n         * @throws java.io.IOException\r\n         */\r\n        @Bean\r\n        public static PropertySourcesPlaceholderConfigurer propertySourcesPlaceholderConfigurer() throws IOException {\r\n            PropertySourcesPlaceholderConfigurer propertySourcesPlaceholderConfigurer = new PropertySourcesPlaceholderConfigurer();\r\n            propertySourcesPlaceholderConfigurer.setIgnoreUnresolvablePlaceholders(Boolean.TRUE);\r\n            propertySourcesPlaceholderConfigurer.setProperties(yamlPropertiesFactoryBean().getObject());\r\n            return propertySourcesPlaceholderConfigurer;\r\n        }\r\n    \r\n        @Bean\r\n        public static YamlPropertiesFactoryBean yamlPropertiesFactoryBean() {\r\n            YamlPropertiesFactoryBean yaml = new YamlPropertiesFactoryBean();\r\n            yaml.setResources(new ClassPathResource(&quot;application.yml&quot;));\r\n            return yaml;\r\n        }\r\n    } // The end...\r\n\r\n\r\n\r\n    @Order(1)\r\n    public class SecurityWebAppInitializer\r\n            extends AbstractSecurityWebApplicationInitializer {\r\n    \r\n        /**\r\n         * Don&#39;t initialize the filter directly, the Spring WebApplicationInitializer\r\n         * parent will take care of the initialization.\r\n         */\r\n        public SecurityWebAppInitializer() {\r\n            super();\r\n        }\r\n    \r\n    } // The end...\r\n\r\n\r\n\r\n\r\n    public class WebAppInitializer\r\n            extends AbstractAnnotationConfigDispatcherServletInitializer {\r\n    \r\n        @Override\r\n        protected Class&lt;?&gt;[] getRootConfigClasses() {\r\n            return new Class[] { JavaConfig.class, SecurityConfig.class, DataSourceConfig.class };\r\n        }\r\n    \r\n        @Override\r\n        protected Class&lt;?&gt;[] getServletConfigClasses() {\r\n            return new Class[] { WebMvcConfig.class };\r\n        }\r\n    \r\n        @Override\r\n        protected String[] getServletMappings() {\r\n            return new String[] { &quot;/*&quot; };\r\n        }\r\n    \r\n        @Override\r\n        public void onStartup(final ServletContext servletContext)\r\n                throws ServletException {\r\n    \r\n            // Register DispatcherServlet\r\n            super.onStartup(servletContext);\r\n    \r\n            // Register H2 Admin console:\r\n            ServletRegistration.Dynamic h2WebServlet = servletContext.addServlet(&quot;h2WebServlet&quot;,\r\n                    &quot;org.h2.server.web.WebServlet&quot;);\r\n            h2WebServlet.addMapping(&quot;/admin/h2/*&quot;);\r\n            h2WebServlet.setInitParameter(&quot;webAllowOthers&quot;, &quot;true&quot;);\r\n    \r\n        }\r\n    \r\n    } // The End...\r\n\r\n\r\n\r\n\r\n    @Configuration\r\n    @EnableWebMvc\r\n    @Import({ThymeleafConfig.class})\r\n    @ComponentScan(basePackages = {\r\n            &quot;com.packtpub.springsecurity.web.controllers&quot;,\r\n            &quot;com.packtpub.springsecurity.web.model&quot;\r\n    })\r\n    public class WebMvcConfig extends WebMvcConfigurerAdapter\r\n    {\r\n    \r\n        @Autowired\r\n        private ThymeleafViewResolver thymeleafViewResolver;\r\n    \r\n        /**\r\n         * We mention this in the book, but this helps to ensure that the intercept-url patterns prevent access to our\r\n         * controllers. For example, once security has been applied for administrators try commenting out the modifications\r\n         * to the super class and requesting &lt;a\r\n         * href=&quot;http://localhost:800/calendar/events/.html&quot;&gt;http://localhost:800/calendar/events/.html&lt;/a&gt;. You will\r\n         * observe that security is bypassed since it did not match the pattern we provided. In later chapters, we discuss\r\n         * how to secure the service tier which helps mitigate bypassing of the URL based security too.\r\n         */\r\n        // FIXME: FInd out what this is and why it is here.\r\n        @Bean\r\n        public RequestMappingHandlerMapping requestMappingHandlerMapping() {\r\n            RequestMappingHandlerMapping result = new RequestMappingHandlerMapping();\r\n            result.setUseSuffixPatternMatch(false);\r\n            result.setUseTrailingSlashMatch(false);\r\n            return result;\r\n        }\r\n    \r\n        @Override\r\n        public void addResourceHandlers(final ResourceHandlerRegistry registry) {\r\n            super.addResourceHandlers(registry);\r\n            registry.addResourceHandler(&quot;/resources/**&quot;)\r\n                    .addResourceLocations(&quot;/resources/&quot;)\r\n                    .setCachePeriod(31_556_926)\r\n            ;\r\n        }\r\n    \r\n        @Override\r\n        public void configureContentNegotiation(final ContentNegotiationConfigurer configurer) {\r\n            configurer\r\n                    .ignoreAcceptHeader(false)\r\n                    .favorPathExtension(true) // .html / .json / .ms\r\n                    .defaultContentType(MediaType.TEXT_HTML) // text/html\r\n                    .mediaTypes(\r\n                            new HashMap&lt;String, MediaType&gt;(){\r\n                                {\r\n                                    put(&quot;html&quot;, MediaType.TEXT_HTML);\r\n                                    put(&quot;xml&quot;, MediaType.APPLICATION_XML);\r\n                                    put(&quot;json&quot;, MediaType.APPLICATION_JSON);\r\n                                }\r\n                            })\r\n            ;\r\n        }\r\n    \r\n        @Override\r\n        public void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {\r\n            converters.add(new MappingJackson2HttpMessageConverter());\r\n        }\r\n    \r\n        /*@Bean\r\n        public ContentNegotiatingViewResolver contentNegotiatingViewResolver() {\r\n    \r\n            ContentNegotiatingViewResolver result = new ContentNegotiatingViewResolver();\r\n            Map&lt;String, String&gt; mediaTypes = new HashMap&lt;&gt;();\r\n            mediaTypes.put(&quot;json&quot;, MediaType.APPLICATION_JSON_VALUE);\r\n    //        result.setMediaTypes(mediaTypes);\r\n    \r\n            result.setDefaultViews(Collections.singletonList(jacksonView()));\r\n    \r\n            return result;\r\n        }*/\r\n    \r\n        @Bean\r\n        public MappingJackson2JsonView jacksonView() {\r\n            MappingJackson2JsonView jacksonView = new MappingJackson2JsonView();\r\n            jacksonView.setExtractValueFromSingleKeyModel(true);\r\n    \r\n            Set&lt;String&gt; modelKeys = new HashSet&lt;String&gt;();\r\n            modelKeys.add(&quot;events&quot;);\r\n            modelKeys.add(&quot;event&quot;);\r\n            jacksonView.setModelKeys(modelKeys);\r\n    \r\n            return jacksonView;\r\n        }\r\n    \r\n        @Override\r\n        public void configureViewResolvers(final ViewResolverRegistry registry) {\r\n            registry.viewResolver(thymeleafViewResolver);\r\n        }\r\n    \r\n    \r\n        // i18N support\r\n        @Bean\r\n        public ReloadableResourceBundleMessageSource messageSource() {\r\n            ReloadableResourceBundleMessageSource resource = new ReloadableResourceBundleMessageSource();\r\n            resource.setBasenames(&quot;/WEB-INF/locales/messages&quot;);\r\n            resource.setDefaultEncoding(&quot;UTF-8&quot;);\r\n            resource.setFallbackToSystemLocale(Boolean.TRUE);\r\n            return resource;\r\n        }\r\n    \r\n        @Override\r\n        public void configureDefaultServletHandling(DefaultServletHandlerConfigurer configurer){\r\n            configurer.enable();\r\n        }\r\n    \r\n    \r\n    }\r\n\r\nUpdated\r\n---\r\n\r\nI have deleted the following dependencies from the POM according to @Adina in the comment below but still get the errors:\r\n\r\n\r\n    &lt;!-- dependency&gt;\r\n    \t\t   &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n    \t\t   &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\r\n    \t\t   &lt;scope&gt;provided&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t   &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;\r\n    \t\t   &lt;artifactId&gt;javax.servlet.jsp-api&lt;/artifactId&gt;\r\n    \t\t   &lt;version&gt;2.3.1&lt;/version&gt;\r\n    \t\t   &lt;scope&gt;provided&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t   &lt;groupId&gt;javax.servlet.jsp.jstl&lt;/groupId&gt;\r\n    \t\t   &lt;artifactId&gt;javax.servlet.jsp.jstl-api&lt;/artifactId&gt;\r\n    \t\t   &lt;version&gt;1.2.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t   &lt;groupId&gt;taglibs&lt;/groupId&gt;\r\n    \t\t   &lt;artifactId&gt;standard&lt;/artifactId&gt;\r\n    \t\t   &lt;version&gt;1.1.2&lt;/version&gt;\r\n    \t\t&lt;/dependency--&gt;\r\n\r\n\r\n\r\nWhat else can I do again?\r\n","title":"Issues with Spring Boot and Thymeleaf","body":"<p>Here are my configuration classes:</p>\n<p>In the <code>templateResolver()</code> method without ServletContext parameter I get a compile error so add it as a parameter and give it to <code>ServletContextTemplateResolver(servletContext)</code>:</p>\n<pre><code>@Configuration\n@EnableWebMvc\n@ComponentScan(basePackages= {&quot;com.packtpub.springsecurity&quot;})\npublic class ThymeleafConfig {\n\n    @Bean\n    public ServletContextTemplateResolver templateResolver(ServletContext servletContext) {\n        ServletContextTemplateResolver resolver = new ServletContextTemplateResolver(servletContext);\n        resolver.setPrefix(&quot;/WEB-INF/templates/&quot;);\n        resolver.setSuffix(&quot;.html&quot;);\n        resolver.setTemplateMode(&quot;HTML5&quot;);\n        resolver.setCacheable(false);\n        resolver.setOrder(1);\n        return resolver;\n    }\n\n    @Bean\n    public SpringTemplateEngine templateEngine(final ServletContextTemplateResolver templateResolver) {\n        SpringTemplateEngine engine = new SpringTemplateEngine();\n        engine.setTemplateResolver(templateResolver);\n        return engine;\n    }\n\n    @Bean\n    public ThymeleafViewResolver thymeleafViewResolver(final SpringTemplateEngine templateEngine) {\n        ThymeleafViewResolver resolver = new ThymeleafViewResolver();\n        resolver.setTemplateEngine(templateEngine);\n        return resolver;\n    }\n\n}\n</code></pre>\n<p>When I run my application I get following error:</p>\n<pre><code>***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nParameter 0 of method templateResolver in com.packtpub.springsecurity.web.configuration.ThymeleafConfig required a bean of type 'javax.servlet.ServletContext' that could not be found.\n\nThe injection point has the following annotations:\n    - @org.springframework.beans.factory.annotation.Autowired(required=true)\n\n\nAction:\n\nConsider defining a bean of type 'javax.servlet.ServletContext' in your configuration.\n</code></pre>\n<p>What am I doing wrong?</p>\n<p>Other config files are:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;chapter2&lt;/groupId&gt;\n    &lt;artifactId&gt;chapter2&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n\n    &lt;name&gt;chapter2&lt;/name&gt;\n    &lt;description&gt;chapter 2 test&lt;/description&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.0.6.RELEASE&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        \n        \n        \n        &lt;!-- Thymeleaf --&gt;  \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        \n        \n        \n        \n        \n        &lt;!-- Spring dependencies START--&gt;\n        &lt;dependency&gt;\n           &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n           &lt;artifactId&gt;spring-security-web&lt;/artifactId&gt;\n           &lt;/dependency&gt;\n        &lt;dependency&gt;\n           &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n           &lt;artifactId&gt;spring-security-config&lt;/artifactId&gt;\n           &lt;/dependency&gt;\n        &lt;dependency&gt;\n           &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n           &lt;artifactId&gt;spring-security-crypto&lt;/artifactId&gt;\n           &lt;/dependency&gt;\n        &lt;dependency&gt;\n           &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n           &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n           &lt;/dependency&gt;\n        &lt;dependency&gt;\n           &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n           &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\n           &lt;/dependency&gt;\n        &lt;!-- Servlet and JSP related dependencies --&gt;\n        &lt;dependency&gt;\n           &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n           &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n           &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n           &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;\n           &lt;artifactId&gt;javax.servlet.jsp-api&lt;/artifactId&gt;\n           &lt;version&gt;2.3.1&lt;/version&gt;\n           &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n           &lt;groupId&gt;javax.servlet.jsp.jstl&lt;/groupId&gt;\n           &lt;artifactId&gt;javax.servlet.jsp.jstl-api&lt;/artifactId&gt;\n           &lt;version&gt;1.2.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n           &lt;groupId&gt;taglibs&lt;/groupId&gt;\n           &lt;artifactId&gt;standard&lt;/artifactId&gt;\n           &lt;version&gt;1.1.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- For datasource configuration --&gt;\n        &lt;dependency&gt;\n           &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n           &lt;artifactId&gt;commons-dbcp2&lt;/artifactId&gt;\n           &lt;/dependency&gt;\n        &lt;!-- We will be using MySQL as our database server --&gt;\n        &lt;dependency&gt;\n           &lt;groupId&gt;mysql&lt;/groupId&gt;\n           &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n           &lt;version&gt;6.0.6&lt;/version&gt;\n        &lt;/dependency&gt;   \n        &lt;!-- Spring dependencies END --&gt;    \n        \n        \n        \n        &lt;dependency&gt;\n    &lt;groupId&gt;org.json&lt;/groupId&gt;\n    &lt;artifactId&gt;json&lt;/artifactId&gt;\n    &lt;version&gt;20170516&lt;/version&gt;\n&lt;/dependency&gt;\n        \n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n\n&lt;/project&gt;\n\n\n\n@Configuration\n//@Import({SecurityConfig.class, DataSourceConfig.class})\n@ComponentScan(basePackages =\n        {\n                &quot;com.packtpub.springsecurity.dataaccess&quot;,\n                &quot;com.packtpub.springsecurity.domain&quot;,\n                &quot;com.packtpub.springsecurity.service&quot;\n        }\n)\n@PropertySource(value = {&quot;classpath:application.properties&quot;})\npublic class JavaConfig {\n\n    /**\n     * Note: If you want to use @PropertySource, you must create a static\n     * PropertySourcesPlaceholderConfigurer with the @Bean as seen here.\n     * @return PropertySourcesPlaceholderConfigurer\n     * @throws java.io.IOException\n     */\n    @Bean\n    public static PropertySourcesPlaceholderConfigurer propertySourcesPlaceholderConfigurer() throws IOException {\n        PropertySourcesPlaceholderConfigurer propertySourcesPlaceholderConfigurer = new PropertySourcesPlaceholderConfigurer();\n        propertySourcesPlaceholderConfigurer.setIgnoreUnresolvablePlaceholders(Boolean.TRUE);\n        propertySourcesPlaceholderConfigurer.setProperties(yamlPropertiesFactoryBean().getObject());\n        return propertySourcesPlaceholderConfigurer;\n    }\n\n    @Bean\n    public static YamlPropertiesFactoryBean yamlPropertiesFactoryBean() {\n        YamlPropertiesFactoryBean yaml = new YamlPropertiesFactoryBean();\n        yaml.setResources(new ClassPathResource(&quot;application.yml&quot;));\n        return yaml;\n    }\n} // The end...\n\n\n\n@Order(1)\npublic class SecurityWebAppInitializer\n        extends AbstractSecurityWebApplicationInitializer {\n\n    /**\n     * Don't initialize the filter directly, the Spring WebApplicationInitializer\n     * parent will take care of the initialization.\n     */\n    public SecurityWebAppInitializer() {\n        super();\n    }\n\n} // The end...\n\n\n\n\npublic class WebAppInitializer\n        extends AbstractAnnotationConfigDispatcherServletInitializer {\n\n    @Override\n    protected Class&lt;?&gt;[] getRootConfigClasses() {\n        return new Class[] { JavaConfig.class, SecurityConfig.class, DataSourceConfig.class };\n    }\n\n    @Override\n    protected Class&lt;?&gt;[] getServletConfigClasses() {\n        return new Class[] { WebMvcConfig.class };\n    }\n\n    @Override\n    protected String[] getServletMappings() {\n        return new String[] { &quot;/*&quot; };\n    }\n\n    @Override\n    public void onStartup(final ServletContext servletContext)\n            throws ServletException {\n\n        // Register DispatcherServlet\n        super.onStartup(servletContext);\n\n        // Register H2 Admin console:\n        ServletRegistration.Dynamic h2WebServlet = servletContext.addServlet(&quot;h2WebServlet&quot;,\n                &quot;org.h2.server.web.WebServlet&quot;);\n        h2WebServlet.addMapping(&quot;/admin/h2/*&quot;);\n        h2WebServlet.setInitParameter(&quot;webAllowOthers&quot;, &quot;true&quot;);\n\n    }\n\n} // The End...\n\n\n\n\n@Configuration\n@EnableWebMvc\n@Import({ThymeleafConfig.class})\n@ComponentScan(basePackages = {\n        &quot;com.packtpub.springsecurity.web.controllers&quot;,\n        &quot;com.packtpub.springsecurity.web.model&quot;\n})\npublic class WebMvcConfig extends WebMvcConfigurerAdapter\n{\n\n    @Autowired\n    private ThymeleafViewResolver thymeleafViewResolver;\n\n    /**\n     * We mention this in the book, but this helps to ensure that the intercept-url patterns prevent access to our\n     * controllers. For example, once security has been applied for administrators try commenting out the modifications\n     * to the super class and requesting &lt;a\n     * href=&quot;http://localhost:800/calendar/events/.html&quot;&gt;http://localhost:800/calendar/events/.html&lt;/a&gt;. You will\n     * observe that security is bypassed since it did not match the pattern we provided. In later chapters, we discuss\n     * how to secure the service tier which helps mitigate bypassing of the URL based security too.\n     */\n    // FIXME: FInd out what this is and why it is here.\n    @Bean\n    public RequestMappingHandlerMapping requestMappingHandlerMapping() {\n        RequestMappingHandlerMapping result = new RequestMappingHandlerMapping();\n        result.setUseSuffixPatternMatch(false);\n        result.setUseTrailingSlashMatch(false);\n        return result;\n    }\n\n    @Override\n    public void addResourceHandlers(final ResourceHandlerRegistry registry) {\n        super.addResourceHandlers(registry);\n        registry.addResourceHandler(&quot;/resources/**&quot;)\n                .addResourceLocations(&quot;/resources/&quot;)\n                .setCachePeriod(31_556_926)\n        ;\n    }\n\n    @Override\n    public void configureContentNegotiation(final ContentNegotiationConfigurer configurer) {\n        configurer\n                .ignoreAcceptHeader(false)\n                .favorPathExtension(true) // .html / .json / .ms\n                .defaultContentType(MediaType.TEXT_HTML) // text/html\n                .mediaTypes(\n                        new HashMap&lt;String, MediaType&gt;(){\n                            {\n                                put(&quot;html&quot;, MediaType.TEXT_HTML);\n                                put(&quot;xml&quot;, MediaType.APPLICATION_XML);\n                                put(&quot;json&quot;, MediaType.APPLICATION_JSON);\n                            }\n                        })\n        ;\n    }\n\n    @Override\n    public void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {\n        converters.add(new MappingJackson2HttpMessageConverter());\n    }\n\n    /*@Bean\n    public ContentNegotiatingViewResolver contentNegotiatingViewResolver() {\n\n        ContentNegotiatingViewResolver result = new ContentNegotiatingViewResolver();\n        Map&lt;String, String&gt; mediaTypes = new HashMap&lt;&gt;();\n        mediaTypes.put(&quot;json&quot;, MediaType.APPLICATION_JSON_VALUE);\n//        result.setMediaTypes(mediaTypes);\n\n        result.setDefaultViews(Collections.singletonList(jacksonView()));\n\n        return result;\n    }*/\n\n    @Bean\n    public MappingJackson2JsonView jacksonView() {\n        MappingJackson2JsonView jacksonView = new MappingJackson2JsonView();\n        jacksonView.setExtractValueFromSingleKeyModel(true);\n\n        Set&lt;String&gt; modelKeys = new HashSet&lt;String&gt;();\n        modelKeys.add(&quot;events&quot;);\n        modelKeys.add(&quot;event&quot;);\n        jacksonView.setModelKeys(modelKeys);\n\n        return jacksonView;\n    }\n\n    @Override\n    public void configureViewResolvers(final ViewResolverRegistry registry) {\n        registry.viewResolver(thymeleafViewResolver);\n    }\n\n\n    // i18N support\n    @Bean\n    public ReloadableResourceBundleMessageSource messageSource() {\n        ReloadableResourceBundleMessageSource resource = new ReloadableResourceBundleMessageSource();\n        resource.setBasenames(&quot;/WEB-INF/locales/messages&quot;);\n        resource.setDefaultEncoding(&quot;UTF-8&quot;);\n        resource.setFallbackToSystemLocale(Boolean.TRUE);\n        return resource;\n    }\n\n    @Override\n    public void configureDefaultServletHandling(DefaultServletHandlerConfigurer configurer){\n        configurer.enable();\n    }\n\n\n}\n</code></pre>\n<h2>Updated</h2>\n<p>I have deleted the following dependencies from the POM according to @Adina in the comment below but still get the errors:</p>\n<pre><code>&lt;!-- dependency&gt;\n           &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n           &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n           &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n           &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;\n           &lt;artifactId&gt;javax.servlet.jsp-api&lt;/artifactId&gt;\n           &lt;version&gt;2.3.1&lt;/version&gt;\n           &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n           &lt;groupId&gt;javax.servlet.jsp.jstl&lt;/groupId&gt;\n           &lt;artifactId&gt;javax.servlet.jsp.jstl-api&lt;/artifactId&gt;\n           &lt;version&gt;1.2.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n           &lt;groupId&gt;taglibs&lt;/groupId&gt;\n           &lt;artifactId&gt;standard&lt;/artifactId&gt;\n           &lt;version&gt;1.1.2&lt;/version&gt;\n        &lt;/dependency--&gt;\n</code></pre>\n<p>What else can I do again?</p>\n"},{"tags":["java","swing","javasound","java-module"],"comments":[{"owner":{"account_id":9059972,"reputation":3080,"user_id":6746785,"display_name":"gthanop"},"score":3,"creation_date":1691012163,"post_id":76823639,"comment_id":135434894,"body_markdown":"Instead of `DataLine.Info info = new DataLine.Info(SourceDataLine.class, audioFormat);` can you please try with `DataLine.Info info = new DataLine.Info(Clip.class, audioFormat);`?","body":"Instead of <code>DataLine.Info info = new DataLine.Info(SourceDataLine.class, audioFormat);</code> can you please try with <code>DataLine.Info info = new DataLine.Info(Clip.class, audioFormat);</code>?"},{"owner":{"account_id":1455822,"reputation":645,"user_id":1371410,"accept_rate":68,"display_name":"cpliu338"},"score":0,"creation_date":1691059171,"post_id":76823639,"comment_id":135441647,"body_markdown":"Yes that works, thank you.  If you put that as an answer, I will accept it.","body":"Yes that works, thank you.  If you put that as an answer, I will accept it."}],"answers":[{"tags":[],"owner":{"account_id":9059972,"reputation":3080,"user_id":6746785,"display_name":"gthanop"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691065191,"creation_date":1691065191,"answer_id":76828009,"question_id":76823639,"body_markdown":"According to the documentation ([here][1]), the first argument of the `DataLine.Info` constructor you are using is:\r\n\r\n&gt; the class of the data line described by the info object\r\n\r\nThen, according to the documentation of `AudioSystem`&#39;s `getLine` method ([here][2]):\r\n\r\n&gt; Obtains a line that matches the description in the specified `Line.Info` object.\r\n\r\nAlso, `DataLine.Info` is a `Line.Info`, hence I assumed that the documentation of `getLine` applies to `DataLine.Info` as well. My assumption results mainly from OOP inheritance and trust in the implementation.\r\n\r\nFinally, the error is a `ClassCastException`, which indicates (and states) that the returned object by `getLine` was not of type `Clip`.\r\n\r\nFrom the docs and the observation of the error and if the assumption is true and after searching similar usages to get inspired, one can maybe conclude that the first argument of `DataLine.Info` constructor should be the type of object returned by `getLine`. This is why I suggested in the comments of the question to try the following solution to this:\r\n\r\nChange the following line of code:\r\n```\r\nDataLine.Info info = new DataLine.Info(SourceDataLine.class, audioFormat);\r\n```\r\nto:\r\n```\r\nDataLine.Info info = new DataLine.Info(Clip.class, audioFormat);\r\n```\r\nin order to obtain a instance of `Clip` (which is a `DataLine`, which is a `Line`).\r\n\r\nI didn&#39;t try it and I am not really familiar with `javax.sound.sampled` package (hence a comment initially), but since you reported it worked, I figured it is an answer and wrote it here.\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.desktop/javax/sound/sampled/DataLine.Info.html#%3Cinit%3E(java.lang.Class,javax.sound.sampled.AudioFormat)\r\n  [2]: https://docs.oracle.com/en/java/javase/11/docs/api/java.desktop/javax/sound/sampled/AudioSystem.html#getLine(javax.sound.sampled.Line.Info)\r\n","title":"ClassCastException thrown when creating a javax.sound.sampled.Clip","body":"<p>According to the documentation (<a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.desktop/javax/sound/sampled/DataLine.Info.html#%3Cinit%3E(java.lang.Class,javax.sound.sampled.AudioFormat)\" rel=\"nofollow noreferrer\">here</a>), the first argument of the <code>DataLine.Info</code> constructor you are using is:</p>\n<blockquote>\n<p>the class of the data line described by the info object</p>\n</blockquote>\n<p>Then, according to the documentation of <code>AudioSystem</code>'s <code>getLine</code> method (<a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.desktop/javax/sound/sampled/AudioSystem.html#getLine(javax.sound.sampled.Line.Info)\" rel=\"nofollow noreferrer\">here</a>):</p>\n<blockquote>\n<p>Obtains a line that matches the description in the specified <code>Line.Info</code> object.</p>\n</blockquote>\n<p>Also, <code>DataLine.Info</code> is a <code>Line.Info</code>, hence I assumed that the documentation of <code>getLine</code> applies to <code>DataLine.Info</code> as well. My assumption results mainly from OOP inheritance and trust in the implementation.</p>\n<p>Finally, the error is a <code>ClassCastException</code>, which indicates (and states) that the returned object by <code>getLine</code> was not of type <code>Clip</code>.</p>\n<p>From the docs and the observation of the error and if the assumption is true and after searching similar usages to get inspired, one can maybe conclude that the first argument of <code>DataLine.Info</code> constructor should be the type of object returned by <code>getLine</code>. This is why I suggested in the comments of the question to try the following solution to this:</p>\n<p>Change the following line of code:</p>\n<pre><code>DataLine.Info info = new DataLine.Info(SourceDataLine.class, audioFormat);\n</code></pre>\n<p>to:</p>\n<pre><code>DataLine.Info info = new DataLine.Info(Clip.class, audioFormat);\n</code></pre>\n<p>in order to obtain a instance of <code>Clip</code> (which is a <code>DataLine</code>, which is a <code>Line</code>).</p>\n<p>I didn't try it and I am not really familiar with <code>javax.sound.sampled</code> package (hence a comment initially), but since you reported it worked, I figured it is an answer and wrote it here.</p>\n"},{"comments":[{"owner":{"account_id":9059972,"reputation":3080,"user_id":6746785,"display_name":"gthanop"},"score":0,"creation_date":1691133338,"post_id":76829990,"comment_id":135453156,"body_markdown":"So `audioFormat` will be determined when opening the `AudioInputStream` with the `Clip`? Then this is a better answer.","body":"So <code>audioFormat</code> will be determined when opening the <code>AudioInputStream</code> with the <code>Clip</code>? Then this is a better answer."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1691157719,"post_id":76829990,"comment_id":135458000,"body_markdown":"Yes.  Feel free to write a test program to prove to yourself that it works.  (Or I can add such a program to my answer;  it’s pretty short.)","body":"Yes.  Feel free to write a test program to prove to yourself that it works.  (Or I can add such a program to my answer;  it’s pretty short.)"}],"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1691080102,"creation_date":1691080102,"answer_id":76829990,"question_id":76823639,"body_markdown":"I don’t know why people continue to believe the Baeldung guy is an expert on Java.  He is not.\r\n\r\nYou can just replace these lines:\r\n\r\n    AudioFormat audioFormat = audioStream.getFormat();\r\n    DataLine.Info info = new DataLine.Info(SourceDataLine.class, audioFormat);\r\n    Clip audioClip = (Clip) AudioSystem.getLine(info);\r\n\r\nwith this:\r\n\r\n    Clip audioClip = AudioSystem.getClip();\r\n\r\nThat [getClip()](https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/sound/sampled/AudioSystem.html#getClip()) method has been available since Java 1.5, so there is no excuse for a 2023 article that claims to aid Java programmers overlooking it.\r\n","title":"ClassCastException thrown when creating a javax.sound.sampled.Clip","body":"<p>I don’t know why people continue to believe the Baeldung guy is an expert on Java.  He is not.</p>\n<p>You can just replace these lines:</p>\n<pre><code>AudioFormat audioFormat = audioStream.getFormat();\nDataLine.Info info = new DataLine.Info(SourceDataLine.class, audioFormat);\nClip audioClip = (Clip) AudioSystem.getLine(info);\n</code></pre>\n<p>with this:</p>\n<pre><code>Clip audioClip = AudioSystem.getClip();\n</code></pre>\n<p>That <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/sound/sampled/AudioSystem.html#getClip()\" rel=\"nofollow noreferrer\">getClip()</a> method has been available since Java 1.5, so there is no excuse for a 2023 article that claims to aid Java programmers overlooking it.</p>\n"}],"owner":{"account_id":1455822,"reputation":645,"user_id":1371410,"accept_rate":68,"display_name":"cpliu338"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76828009,"answer_count":2,"score":0,"last_activity_date":1691080102,"creation_date":1691011649,"question_id":76823639,"body_markdown":"I want to play sound in a Java Swing application.  I referred to https://www.baeldung.com/java-play-sound and modify like this:\r\n\r\nmodule-info.java\r\n\r\n    module sound {\r\n        requires java.desktop;\r\n    }\r\n\r\nThe source files are in the same folder [mydomain]/desktopproject/sound.  There is a Swing JFrame with a JButton, when I press the button the following snippet runs until the last line throws a ClassCastException:\r\n\r\n    audioStream = AudioSystem.getAudioInputStream(new BufferedInputStream(\r\n        new FileInputStream(new File(&quot;/path-to-my.wav&quot;))\r\n    ));\r\n    AudioFormat audioFormat = audioStream.getFormat();\r\n    DataLine.Info info = new DataLine.Info(SourceDataLine.class, audioFormat);\r\n    Clip audioClip = (Clip) AudioSystem.getLine(info);\r\n\r\nThe exception message is like this:\r\n\r\n```\r\nException in thread &quot;AWT-EventQueue-0&quot;\r\njava.lang.ClassCastException: class com.sun.media.sound.DirectAudioDevice$DirectSDL\r\n   cannot be cast to class javax.sound.sampled.Clip\r\n   (com.sun.media.sound.DirectAudioDevice$DirectSDL\r\n   and javax.sound.sampled.Clip are in module java.desktop\r\n   of loader &#39;bootstrap&#39;)\r\n```\r\n\r\nI am not sure where the problem is.  I use openjdk version &quot;11.0.20&quot; 2023-07-18 and when I ran `java --list-module`, I got:\r\n\r\n    java.desktop@11.0.20\r\n","title":"ClassCastException thrown when creating a javax.sound.sampled.Clip","body":"<p>I want to play sound in a Java Swing application.  I referred to <a href=\"https://www.baeldung.com/java-play-sound\" rel=\"nofollow noreferrer\">https://www.baeldung.com/java-play-sound</a> and modify like this:</p>\n<p>module-info.java</p>\n<pre><code>module sound {\n    requires java.desktop;\n}\n</code></pre>\n<p>The source files are in the same folder [mydomain]/desktopproject/sound.  There is a Swing JFrame with a JButton, when I press the button the following snippet runs until the last line throws a ClassCastException:</p>\n<pre><code>audioStream = AudioSystem.getAudioInputStream(new BufferedInputStream(\n    new FileInputStream(new File(&quot;/path-to-my.wav&quot;))\n));\nAudioFormat audioFormat = audioStream.getFormat();\nDataLine.Info info = new DataLine.Info(SourceDataLine.class, audioFormat);\nClip audioClip = (Clip) AudioSystem.getLine(info);\n</code></pre>\n<p>The exception message is like this:</p>\n<pre><code>Exception in thread &quot;AWT-EventQueue-0&quot;\njava.lang.ClassCastException: class com.sun.media.sound.DirectAudioDevice$DirectSDL\n   cannot be cast to class javax.sound.sampled.Clip\n   (com.sun.media.sound.DirectAudioDevice$DirectSDL\n   and javax.sound.sampled.Clip are in module java.desktop\n   of loader 'bootstrap')\n</code></pre>\n<p>I am not sure where the problem is.  I use openjdk version &quot;11.0.20&quot; 2023-07-18 and when I ran <code>java --list-module</code>, I got:</p>\n<pre><code>java.desktop@11.0.20\n</code></pre>\n"},{"tags":["java","osgi","declarative-services"],"owner":{"account_id":9796447,"reputation":392,"user_id":7259317,"display_name":"A7exSchin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691079766,"creation_date":1691079766,"question_id":76829957,"body_markdown":"I am confused.\r\n\r\nI am currently developing an application using OSGi declarative services (DS). I have an API for my application and the application works fine. \r\nNow I want to add a User Interface. So I decided on a separation between a Controller and View Elements. Each view is it&#39;s own component.\r\n\r\nNow my confusion starts. When I am using DS, I create a Service Interface which gets implementet by its Implementation and consumed by a Consumer. I do not understand how this fits in with UI Elements? I do not want to register a complete new API just for my UI into the OSGi framework, and I do not think it should be necessary. On the other hand, if I want to leverage OSGi to dynamically load my components if and only if they are needed, to save resources, I cannot seem to reference them properly, because they are not Services and therefore not registered with the framework....?\r\n\r\n\r\nI tried to manually register Services with\r\n\r\n    FrameworkUtil.getBundle(getClass()).getBundleContext().registerService(Class.class, new Class(), null)\r\n\r\nand later retrieving them with\r\n\r\n    context.getService(context.getServiceReference(Class.class)\r\n\r\nBut first, this does not seem to work, as I get an error stating that Null Service References are not allowed, and secondly I do want to make this kind of properly. According to Peter Kriens in [this][1] SO discussion registering and retrieveing services manually is really really really not recommended.\r\n\r\nSo I feel like I am overseeing something relevant.\r\nIn conclusion these are my most important questions:\r\n\r\n 1. When I have multiple Components inside one package and I do not want to call each others constructors like plain java, how does one component activate another, using the OSGi SCR and use their methods? For example the MainView has a button to Edit something, which is its own dialog and Component. So when the user presses the button, the MainView component activate the EditView component, which is only then loaded and thrown away afterwards.\r\n\r\n 2. How does registering components in a framework work? Is it even possible? I feel like, as well thought through as the OSGi spec exists, this either exists already or I should not do it and think through my application structure.\r\n\r\n3. Using the Controller-View pattern the UI only talks to a controller, which fetches data from the Service over a standard OSGi Reference. Does this setup even make sense implemented in OSGi?\r\n\r\n\r\nThanks for any help or discussion. I really appreciate it.\r\n\r\n  [1]: https://stackoverflow.com/questions/39004498/how-to-programmatically-register-a-service-in-the-scr-using-osgi-standard-featur","title":"OSGi Confusion: Declarative Services with User-Interface Components and Controller-View pattern","body":"<p>I am confused.</p>\n<p>I am currently developing an application using OSGi declarative services (DS). I have an API for my application and the application works fine.\nNow I want to add a User Interface. So I decided on a separation between a Controller and View Elements. Each view is it's own component.</p>\n<p>Now my confusion starts. When I am using DS, I create a Service Interface which gets implementet by its Implementation and consumed by a Consumer. I do not understand how this fits in with UI Elements? I do not want to register a complete new API just for my UI into the OSGi framework, and I do not think it should be necessary. On the other hand, if I want to leverage OSGi to dynamically load my components if and only if they are needed, to save resources, I cannot seem to reference them properly, because they are not Services and therefore not registered with the framework....?</p>\n<p>I tried to manually register Services with</p>\n<pre><code>FrameworkUtil.getBundle(getClass()).getBundleContext().registerService(Class.class, new Class(), null)\n</code></pre>\n<p>and later retrieving them with</p>\n<pre><code>context.getService(context.getServiceReference(Class.class)\n</code></pre>\n<p>But first, this does not seem to work, as I get an error stating that Null Service References are not allowed, and secondly I do want to make this kind of properly. According to Peter Kriens in <a href=\"https://stackoverflow.com/questions/39004498/how-to-programmatically-register-a-service-in-the-scr-using-osgi-standard-featur\">this</a> SO discussion registering and retrieveing services manually is really really really not recommended.</p>\n<p>So I feel like I am overseeing something relevant.\nIn conclusion these are my most important questions:</p>\n<ol>\n<li><p>When I have multiple Components inside one package and I do not want to call each others constructors like plain java, how does one component activate another, using the OSGi SCR and use their methods? For example the MainView has a button to Edit something, which is its own dialog and Component. So when the user presses the button, the MainView component activate the EditView component, which is only then loaded and thrown away afterwards.</p>\n</li>\n<li><p>How does registering components in a framework work? Is it even possible? I feel like, as well thought through as the OSGi spec exists, this either exists already or I should not do it and think through my application structure.</p>\n</li>\n<li><p>Using the Controller-View pattern the UI only talks to a controller, which fetches data from the Service over a standard OSGi Reference. Does this setup even make sense implemented in OSGi?</p>\n</li>\n</ol>\n<p>Thanks for any help or discussion. I really appreciate it.</p>\n"},{"tags":["java","spring"],"answers":[{"comments":[{"owner":{"account_id":10815338,"reputation":39157,"user_id":7954504,"accept_rate":99,"display_name":"Brad Solomon"},"score":0,"creation_date":1691078265,"post_id":76829665,"comment_id":135445982,"body_markdown":"Do you mind adding a `PostConstruct` example? With the added `@Autowired`, I still receive `Component2.java:[15,13] variable comp1 might not have been initialized`","body":"Do you mind adding a <code>PostConstruct</code> example? With the added <code>@Autowired</code>, I still receive <code>Component2.java:[15,13] variable comp1 might not have been initialized</code>"},{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1691079152,"post_id":76829665,"comment_id":135446192,"body_markdown":"@BradSolomon Can you edit question with your attempt? This seems like compilation error, [PostContruct](https://docs.oracle.com/javaee/7/api/javax/annotation/PostConstruct.html) won&#39;t help with that, it&#39;s about additional initializations in component1.","body":"@BradSolomon Can you edit question with your attempt? This seems like compilation error, <a href=\"https://docs.oracle.com/javaee/7/api/javax/annotation/PostConstruct.html\" rel=\"nofollow noreferrer\">PostContruct</a> won&#39;t help with that, it&#39;s about additional initializations in component1."},{"owner":{"account_id":10815338,"reputation":39157,"user_id":7954504,"accept_rate":99,"display_name":"Brad Solomon"},"score":0,"creation_date":1691079772,"post_id":76829665,"comment_id":135446310,"body_markdown":"Updated question description","body":"Updated question description"},{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1691080142,"post_id":76829665,"comment_id":135446367,"body_markdown":"@BradSolomon You call `this.comp1.initialize();`, but you have not assigned a value to it, you missed `this.comp1 = comp1;` from my example. If `Component1.initialize()` is one time initialization for component 1, you can use PostConstruct on method `initialize()` in order no to do it manually.","body":"@BradSolomon You call <code>this.comp1.initialize();</code>, but you have not assigned a value to it, you missed <code>this.comp1 = comp1;</code> from my example. If <code>Component1.initialize()</code> is one time initialization for component 1, you can use PostConstruct on method <code>initialize()</code> in order no to do it manually."},{"owner":{"account_id":10815338,"reputation":39157,"user_id":7954504,"accept_rate":99,"display_name":"Brad Solomon"},"score":0,"creation_date":1691080293,"post_id":76829665,"comment_id":135446394,"body_markdown":"Sorry, my fault. That resolved it, build successful.","body":"Sorry, my fault. That resolved it, build successful."}],"tags":[],"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691078025,"creation_date":1691077311,"answer_id":76829665,"question_id":76829595,"body_markdown":"You need to autowire the required component.\r\n```\r\n@Component\r\npublic class Component2 {\r\n\r\n    private final Component1 comp1;\r\n\r\n    @Autowired\r\n    public Component2(Component1 comp1) {\r\n        this.comp1 = comp1;\r\n    }\r\n\r\n    public void theMethod() {\r\n        this.comp1.doStuff();\r\n    }\r\n}\r\n```\r\nSpring will inject the `Component1` bean in `Component2` when creating it.\r\n\r\nLooking at Component1, it seems like it needs additional initialization before usage. This can be achieved using by annotating init method with `@PostConstruct`, or by implementing [InitializingBean][1].\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/beans/factory/InitializingBean.html","title":"Use one Spring Framework autowired Component in another Component","body":"<p>You need to autowire the required component.</p>\n<pre><code>@Component\npublic class Component2 {\n\n    private final Component1 comp1;\n\n    @Autowired\n    public Component2(Component1 comp1) {\n        this.comp1 = comp1;\n    }\n\n    public void theMethod() {\n        this.comp1.doStuff();\n    }\n}\n</code></pre>\n<p>Spring will inject the <code>Component1</code> bean in <code>Component2</code> when creating it.</p>\n<p>Looking at Component1, it seems like it needs additional initialization before usage. This can be achieved using by annotating init method with <code>@PostConstruct</code>, or by implementing <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/beans/factory/InitializingBean.html\" rel=\"nofollow noreferrer\">InitializingBean</a>.</p>\n"}],"owner":{"account_id":10815338,"reputation":39157,"user_id":7954504,"accept_rate":99,"display_name":"Brad Solomon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76829665,"answer_count":1,"score":0,"last_activity_date":1691079730,"creation_date":1691076823,"question_id":76829595,"body_markdown":"How can I use one Spring Framework autowired `Component` in another `Component`?\r\n\r\nCurrently, I receive the following compilation failure:\r\n\r\n```text\r\nComponent2.java:[15,13] variable comp1 might not have been initialized\r\n```\r\n\r\nTo reproduce:\r\n\r\nUse Spring initializr to create a Spring project. (Java 20 / Spring 2.7.14 / Maven / JAR.)\r\n\r\nProject structure:\r\n\r\n```text\r\n$ tree src/main\r\nsrc/main\r\n├── java\r\n│&#160;&#160; └── com\r\n│&#160;&#160;     └── example\r\n│&#160;&#160;         └── demo\r\n│&#160;&#160;             ├── Component1.java\r\n│&#160;&#160;             ├── Component2.java\r\n│&#160;&#160;             └── DemoApplication.java\r\n└── resources\r\n    └── application.yml\r\n```\r\n\r\nContents:\r\n\r\n```yaml\r\n# src/main/resources/application.yml\r\nfoo: bar\r\n```\r\n\r\n```java\r\n// src/main/java/com/example/demo/DemoApplication.java\r\npackage com.example.demo;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\nimport org.springframework.context.annotation.ComponentScan;\r\n\r\n@ComponentScan(basePackages = &quot;com.example.demo&quot;)\r\n@SpringBootApplication\r\npublic class DemoApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(DemoApplication.class, args);\r\n\t}\r\n\r\n}\r\n```\r\n\r\n```java\r\n// src/main/java/com/example/demo/Component1.java\r\npackage com.example.demo;\r\n\r\nimport org.springframework.stereotype.Component;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.beans.factory.annotation.Value;\r\n\r\n@Component\r\npublic class Component1 {\r\n\r\n    private final String foo;\r\n\r\n    public void initialize() {\r\n        System.out.println(&quot;initialized&quot;);\r\n    }\r\n\r\n    public void doStuff() {\r\n        System.out.println(&quot;doing stuff&quot;);\r\n    }\r\n\r\n    @Autowired\r\n    public Component1(\r\n        @Value(&quot;${foo}&quot;) String foo\r\n    ) {\r\n        this.foo = foo;\r\n        System.out.println(&quot;set foo to &quot; + foo);\r\n    }\r\n}\r\n```\r\n\r\n```java\r\n// src/main/java/com/example/demo/Component2.java\r\npackage com.example.demo;\r\n\r\nimport org.springframework.stereotype.Component;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.beans.factory.annotation.Value;\r\n\r\n@Component\r\npublic class Component2 {\r\n\r\n    private final Component1 comp1;\r\n\r\n    @Autowired\r\n    public Component2(Component1 comp1) {\r\n        this.comp1.initialize();\r\n    }\r\n\r\n    public void theMethod() {\r\n        this.comp1.doStuff();\r\n    }\r\n}\r\n```\r\n\r\nAbove, the purpose is for `Component1` to be auto-constructed from `application.yml` properties. But then: how do I use an instance of this class in another class?\r\n\r\n```shell\r\n$ mvn clean spring-boot:run\r\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.10.1:compile (default-compile) on project demo: Compilation failure\r\n[ERROR] /Users/brsolomon/Downloads/demo/src/main/java/com/example/demo/Component2.java:[15,13] variable comp1 might not have been initialized\r\n```\r\n\r\nI realize that the exception raised is from calling `new Component1()` with no arguments, since it is expecting one. But my goal is to have it constructed automatically with arguments from `application.yml` without needing `new Component1()` at all.","title":"Use one Spring Framework autowired Component in another Component","body":"<p>How can I use one Spring Framework autowired <code>Component</code> in another <code>Component</code>?</p>\n<p>Currently, I receive the following compilation failure:</p>\n<pre><code>Component2.java:[15,13] variable comp1 might not have been initialized\n</code></pre>\n<p>To reproduce:</p>\n<p>Use Spring initializr to create a Spring project. (Java 20 / Spring 2.7.14 / Maven / JAR.)</p>\n<p>Project structure:</p>\n<pre><code>$ tree src/main\nsrc/main\n├── java\n│   └── com\n│       └── example\n│           └── demo\n│               ├── Component1.java\n│               ├── Component2.java\n│               └── DemoApplication.java\n└── resources\n    └── application.yml\n</code></pre>\n<p>Contents:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code># src/main/resources/application.yml\nfoo: bar\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>// src/main/java/com/example/demo/DemoApplication.java\npackage com.example.demo;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.annotation.ComponentScan;\n\n@ComponentScan(basePackages = &quot;com.example.demo&quot;)\n@SpringBootApplication\npublic class DemoApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(DemoApplication.class, args);\n    }\n\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>// src/main/java/com/example/demo/Component1.java\npackage com.example.demo;\n\nimport org.springframework.stereotype.Component;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.beans.factory.annotation.Value;\n\n@Component\npublic class Component1 {\n\n    private final String foo;\n\n    public void initialize() {\n        System.out.println(&quot;initialized&quot;);\n    }\n\n    public void doStuff() {\n        System.out.println(&quot;doing stuff&quot;);\n    }\n\n    @Autowired\n    public Component1(\n        @Value(&quot;${foo}&quot;) String foo\n    ) {\n        this.foo = foo;\n        System.out.println(&quot;set foo to &quot; + foo);\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>// src/main/java/com/example/demo/Component2.java\npackage com.example.demo;\n\nimport org.springframework.stereotype.Component;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.beans.factory.annotation.Value;\n\n@Component\npublic class Component2 {\n\n    private final Component1 comp1;\n\n    @Autowired\n    public Component2(Component1 comp1) {\n        this.comp1.initialize();\n    }\n\n    public void theMethod() {\n        this.comp1.doStuff();\n    }\n}\n</code></pre>\n<p>Above, the purpose is for <code>Component1</code> to be auto-constructed from <code>application.yml</code> properties. But then: how do I use an instance of this class in another class?</p>\n<pre class=\"lang-bash prettyprint-override\"><code>$ mvn clean spring-boot:run\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.10.1:compile (default-compile) on project demo: Compilation failure\n[ERROR] /Users/brsolomon/Downloads/demo/src/main/java/com/example/demo/Component2.java:[15,13] variable comp1 might not have been initialized\n</code></pre>\n<p>I realize that the exception raised is from calling <code>new Component1()</code> with no arguments, since it is expecting one. But my goal is to have it constructed automatically with arguments from <code>application.yml</code> without needing <code>new Component1()</code> at all.</p>\n"},{"tags":["java","android","ssh","vpn","jsch"],"comments":[{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1683774521,"post_id":76223841,"comment_id":134419100,"body_markdown":"Should a VPNService create an SSH tunnel and just work? I understand a VPN and an SSH tunnel are different things.","body":"Should a VPNService create an SSH tunnel and just work? I understand a VPN and an SSH tunnel are different things."},{"owner":{"account_id":28574714,"reputation":1,"user_id":21876482,"display_name":"soheyl momeni"},"score":0,"creation_date":1683775764,"post_id":76223841,"comment_id":134419193,"body_markdown":"@aled NapsternetV and NetMod are for VPN client. They also have SSH","body":"@aled NapsternetV and NetMod are for VPN client. They also have SSH"}],"answers":[{"tags":[],"owner":{"account_id":21888377,"reputation":1,"user_id":22022145,"display_name":"Sina"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691079664,"creation_date":1691079664,"answer_id":76829950,"question_id":76223841,"body_markdown":"The apps you mentioned use a SOCKS proxy that is created by SSH&#39;s dynamic port forwarding. (`ssh -D`)\r\n\r\nCurrently, your app does not handle any packets intercepted by the VPN interface.\r\n\r\nTo achieve this you need to be able to forward packets intercepted by the VPN interface to a SOCKS proxy and receive packets from that SOCKS proxy and forward them to the VPN interface.\r\n\r\nThis task is not easy at all because VPNs and SOCKS proxies are on different layers of the OSI model. But fortunately, there is already an open-source library for this matter called [Tun2Socks][1] which can connect your VPN interface to a SOCKS proxy.\r\n***You would need JNI to use it since it&#39;s written in C.***\r\n\r\nAlso, the JSch library does not provide support for dynamic port forwarding.\r\nAn alternative to the JSch library is the [Apache MINA-sshd][2] which provides support for a wide range of SSH options including dynamic port forwarding.\r\n\r\n\r\n  [1]: https://github.com/ambrop72/badvpn\r\n  [2]: https://github.com/apache/mina-sshd","title":"Android VpnService using JSch SSH-Connection , It connects to the server but does not have access to the Internet","body":"<p>The apps you mentioned use a SOCKS proxy that is created by SSH's dynamic port forwarding. (<code>ssh -D</code>)</p>\n<p>Currently, your app does not handle any packets intercepted by the VPN interface.</p>\n<p>To achieve this you need to be able to forward packets intercepted by the VPN interface to a SOCKS proxy and receive packets from that SOCKS proxy and forward them to the VPN interface.</p>\n<p>This task is not easy at all because VPNs and SOCKS proxies are on different layers of the OSI model. But fortunately, there is already an open-source library for this matter called <a href=\"https://github.com/ambrop72/badvpn\" rel=\"nofollow noreferrer\">Tun2Socks</a> which can connect your VPN interface to a SOCKS proxy.\n<em><strong>You would need JNI to use it since it's written in C.</strong></em></p>\n<p>Also, the JSch library does not provide support for dynamic port forwarding.\nAn alternative to the JSch library is the <a href=\"https://github.com/apache/mina-sshd\" rel=\"nofollow noreferrer\">Apache MINA-sshd</a> which provides support for a wide range of SSH options including dynamic port forwarding.</p>\n"}],"owner":{"account_id":28574714,"reputation":1,"user_id":21876482,"display_name":"soheyl momeni"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":419,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691079664,"creation_date":1683773484,"question_id":76223841,"body_markdown":"I am using the source below to connect to the server via SSH. There are no errors in the program. The key icon will appear at the top of the mobile screen[VPN Connected Image1](https://i.stack.imgur.com/7uGew.jpg). But I do not have access to the Internet[No Internet Access Image](https://i.stack.imgur.com/DLUbt.jpg). I tested with other software such as napsternetV and NetMod (SSH), the problem is not with the VPS. Does anyone know why the internet is not connecting?\r\n\r\n\r\n\r\n# MainActivity\r\n```\r\npackage com.example.myapplication;\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    import android.content.Intent;\r\n    import android.net.VpnService;\r\n    import android.os.Bundle;\r\n    import android.util.Log;\r\n    import android.widget.Button;\r\n    \r\n    public class MainActivity extends AppCompatActivity {\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n            Button startVpnButton = findViewById(R.id.start_vpn_button);\r\n            startVpnButton.setOnClickListener(v -&gt; {\r\n                Intent intent = VpnService.prepare(getApplicationContext());\r\n                if (intent != null) {\r\n                    startActivityForResult(intent, 0);\r\n                } else {\r\n                    onActivityResult(0, RESULT_OK, null);\r\n                }\r\n            });\r\n            Button stopVpnButton = findViewById(R.id.stop_vpn_button);\r\n            stopVpnButton.setOnClickListener(v -&gt; {\r\n                Intent intent = new Intent(getApplicationContext(), MyVpnService.class);\r\n                stopService(intent);\r\n            });\r\n        }\r\n        @Override\r\n        protected void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n            super.onActivityResult(requestCode, resultCode, data);\r\n            if (resultCode == RESULT_OK) {\r\n                Intent intent = new Intent(getApplicationContext(), MyVpnService.class);\r\n                startService(intent);\r\n            }\r\n        }\r\n    }\r\n```\r\n\r\n\r\n# MyVpnService\r\n```\r\n    package com.example.myapplication;\r\n    import android.content.Intent;\r\n    import android.net.VpnService;\r\n    import android.os.ParcelFileDescriptor;\r\n    import android.system.OsConstants;\r\n    import android.util.Log;\r\n    import com.jcraft.jsch.JSch;\r\n    import com.jcraft.jsch.JSchException;\r\n    import com.jcraft.jsch.Session;\r\n    import java.io.IOException;\r\n\r\n    public class MyVpnService extends VpnService {\r\n        private ParcelFileDescriptor vpnInterface;\r\n        private Session sshSession;\r\n\r\n        // Implement onCreate, onStartCommand, and onDestroy methods\r\n        @Override\r\n        public void onCreate() {\r\n            super.onCreate();\r\n            // Initialize JSch and set up the SSH connection\r\n            JSch jsch = new JSch();\r\n            try {\r\n                sshSession = jsch.getSession(&quot;SERVER_USERNAME&quot;, &quot;SERVER_IP&quot;, SERVER_PORT);\r\n            } catch (JSchException e) {\r\n\r\n                throw new RuntimeException(e);\r\n            }\r\n            sshSession.setPassword(&quot;SERVER_PASSWORD&quot;);\r\n            sshSession.setConfig(&quot;StrictHostKeyChecking&quot;, &quot;no&quot;);\r\n        }\r\n        @Override\r\n        public int onStartCommand(Intent intent, int flags, int startId) {\r\n            Thread vpnThread = new Thread(() -&gt; {\r\n                try {\r\n\r\n                    sshSession.connect();\r\n                    int port_forwarded = sshSession.setPortForwardingL(0, &quot;localhost&quot;, 1080);\r\n\r\n                    // Configure the VPN connection\r\n                    VpnService.Builder builder = new VpnService.Builder();\r\n                    builder.setSession(&quot;MyVpnService&quot;)\r\n                            .addAddress(&quot;10.0.0.1&quot;, 24)\r\n                            .addRoute(&quot;0.0.0.0&quot;, 0)\r\n                            .addDnsServer(&quot;8.8.8.8&quot;)\r\n                            .setBlocking(true)\r\n                            .establish();\r\n\r\n                    vpnInterface = builder.establish();\r\n\r\n                    // Add this line to route all traffic through the VPN\r\n                    builder.allowFamily(OsConstants.AF_INET);\r\n\r\n                } catch (Exception e) {\r\n\r\n                    e.printStackTrace();\r\n                }\r\n            });\r\n            vpnThread.start();\r\n            return START_STICKY;\r\n        }\r\n\r\n        @Override\r\n        public void onDestroy() {\r\n            if (vpnInterface != null) {\r\n                try {\r\n                    vpnInterface.close();\r\n                } catch (IOException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n            if (sshSession != null) {\r\n                sshSession.disconnect();\r\n            }\r\n            super.onDestroy();\r\n        }\r\n\r\n    }\r\n```\r\n\r\n\r\n# AndroidManifest\r\n```\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.BIND_VPN_SERVICE&quot;\r\n            tools:ignore=&quot;ProtectedPermissions&quot; /&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.FOREGROUND_SERVICE&quot; /&gt;\r\n    \r\n        &lt;application\r\n            android:allowBackup=&quot;true&quot;\r\n            android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\r\n            android:fullBackupContent=&quot;@xml/backup_rules&quot;\r\n            android:icon=&quot;@mipmap/ic_launcher&quot;\r\n            android:label=&quot;@string/app_name&quot;\r\n            android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n            android:supportsRtl=&quot;true&quot;\r\n            android:theme=&quot;@style/Theme.MyApplication&quot;\r\n            tools:targetApi=&quot;31&quot;&gt;\r\n            &lt;activity\r\n                android:name=&quot;.MainActivity&quot;\r\n                android:exported=&quot;true&quot;&gt;\r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n    \r\n                    &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n            &lt;/activity&gt;\r\n    \r\n            &lt;service\r\n                android:name=&quot;.MyVpnService&quot;\r\n                android:permission=&quot;android.permission.BIND_VPN_SERVICE&quot;\r\n                android:exported=&quot;true&quot;&gt;\r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;android.net.VpnService&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n            &lt;/service&gt;\r\n    \r\n        &lt;/application&gt;\r\n    \r\n    &lt;/manifest&gt;\r\n```\r\n\r\n\r\nThere are no errors in the logs and the program works perfectly. I even entered the wrong server information and the program did not connect to the server. It means that the codes are working correctly, but I don&#39;t know why the internet is not connecting.[MainScreen Image](https://i.stack.imgur.com/HMMEW.jpg)","title":"Android VpnService using JSch SSH-Connection , It connects to the server but does not have access to the Internet","body":"<p>I am using the source below to connect to the server via SSH. There are no errors in the program. The key icon will appear at the top of the mobile screen<a href=\"https://i.stack.imgur.com/7uGew.jpg\" rel=\"nofollow noreferrer\">VPN Connected Image1</a>. But I do not have access to the Internet<a href=\"https://i.stack.imgur.com/DLUbt.jpg\" rel=\"nofollow noreferrer\">No Internet Access Image</a>. I tested with other software such as napsternetV and NetMod (SSH), the problem is not with the VPS. Does anyone know why the internet is not connecting?</p>\n<h1>MainActivity</h1>\n<pre><code>package com.example.myapplication;\n    import androidx.appcompat.app.AppCompatActivity;\n    import android.content.Intent;\n    import android.net.VpnService;\n    import android.os.Bundle;\n    import android.util.Log;\n    import android.widget.Button;\n    \n    public class MainActivity extends AppCompatActivity {\n        @Override\n        protected void onCreate(Bundle savedInstanceState) {\n            super.onCreate(savedInstanceState);\n            setContentView(R.layout.activity_main);\n            Button startVpnButton = findViewById(R.id.start_vpn_button);\n            startVpnButton.setOnClickListener(v -&gt; {\n                Intent intent = VpnService.prepare(getApplicationContext());\n                if (intent != null) {\n                    startActivityForResult(intent, 0);\n                } else {\n                    onActivityResult(0, RESULT_OK, null);\n                }\n            });\n            Button stopVpnButton = findViewById(R.id.stop_vpn_button);\n            stopVpnButton.setOnClickListener(v -&gt; {\n                Intent intent = new Intent(getApplicationContext(), MyVpnService.class);\n                stopService(intent);\n            });\n        }\n        @Override\n        protected void onActivityResult(int requestCode, int resultCode, Intent data) {\n            super.onActivityResult(requestCode, resultCode, data);\n            if (resultCode == RESULT_OK) {\n                Intent intent = new Intent(getApplicationContext(), MyVpnService.class);\n                startService(intent);\n            }\n        }\n    }\n</code></pre>\n<h1>MyVpnService</h1>\n<pre><code>    package com.example.myapplication;\n    import android.content.Intent;\n    import android.net.VpnService;\n    import android.os.ParcelFileDescriptor;\n    import android.system.OsConstants;\n    import android.util.Log;\n    import com.jcraft.jsch.JSch;\n    import com.jcraft.jsch.JSchException;\n    import com.jcraft.jsch.Session;\n    import java.io.IOException;\n\n    public class MyVpnService extends VpnService {\n        private ParcelFileDescriptor vpnInterface;\n        private Session sshSession;\n\n        // Implement onCreate, onStartCommand, and onDestroy methods\n        @Override\n        public void onCreate() {\n            super.onCreate();\n            // Initialize JSch and set up the SSH connection\n            JSch jsch = new JSch();\n            try {\n                sshSession = jsch.getSession(&quot;SERVER_USERNAME&quot;, &quot;SERVER_IP&quot;, SERVER_PORT);\n            } catch (JSchException e) {\n\n                throw new RuntimeException(e);\n            }\n            sshSession.setPassword(&quot;SERVER_PASSWORD&quot;);\n            sshSession.setConfig(&quot;StrictHostKeyChecking&quot;, &quot;no&quot;);\n        }\n        @Override\n        public int onStartCommand(Intent intent, int flags, int startId) {\n            Thread vpnThread = new Thread(() -&gt; {\n                try {\n\n                    sshSession.connect();\n                    int port_forwarded = sshSession.setPortForwardingL(0, &quot;localhost&quot;, 1080);\n\n                    // Configure the VPN connection\n                    VpnService.Builder builder = new VpnService.Builder();\n                    builder.setSession(&quot;MyVpnService&quot;)\n                            .addAddress(&quot;10.0.0.1&quot;, 24)\n                            .addRoute(&quot;0.0.0.0&quot;, 0)\n                            .addDnsServer(&quot;8.8.8.8&quot;)\n                            .setBlocking(true)\n                            .establish();\n\n                    vpnInterface = builder.establish();\n\n                    // Add this line to route all traffic through the VPN\n                    builder.allowFamily(OsConstants.AF_INET);\n\n                } catch (Exception e) {\n\n                    e.printStackTrace();\n                }\n            });\n            vpnThread.start();\n            return START_STICKY;\n        }\n\n        @Override\n        public void onDestroy() {\n            if (vpnInterface != null) {\n                try {\n                    vpnInterface.close();\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n            }\n            if (sshSession != null) {\n                sshSession.disconnect();\n            }\n            super.onDestroy();\n        }\n\n    }\n</code></pre>\n<h1>AndroidManifest</h1>\n<pre><code>    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n    &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n        &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n        &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\n        &lt;uses-permission android:name=&quot;android.permission.BIND_VPN_SERVICE&quot;\n            tools:ignore=&quot;ProtectedPermissions&quot; /&gt;\n        &lt;uses-permission android:name=&quot;android.permission.FOREGROUND_SERVICE&quot; /&gt;\n    \n        &lt;application\n            android:allowBackup=&quot;true&quot;\n            android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\n            android:fullBackupContent=&quot;@xml/backup_rules&quot;\n            android:icon=&quot;@mipmap/ic_launcher&quot;\n            android:label=&quot;@string/app_name&quot;\n            android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n            android:supportsRtl=&quot;true&quot;\n            android:theme=&quot;@style/Theme.MyApplication&quot;\n            tools:targetApi=&quot;31&quot;&gt;\n            &lt;activity\n                android:name=&quot;.MainActivity&quot;\n                android:exported=&quot;true&quot;&gt;\n                &lt;intent-filter&gt;\n                    &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n    \n                    &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n                &lt;/intent-filter&gt;\n            &lt;/activity&gt;\n    \n            &lt;service\n                android:name=&quot;.MyVpnService&quot;\n                android:permission=&quot;android.permission.BIND_VPN_SERVICE&quot;\n                android:exported=&quot;true&quot;&gt;\n                &lt;intent-filter&gt;\n                    &lt;action android:name=&quot;android.net.VpnService&quot; /&gt;\n                &lt;/intent-filter&gt;\n            &lt;/service&gt;\n    \n        &lt;/application&gt;\n    \n    &lt;/manifest&gt;\n</code></pre>\n<p>There are no errors in the logs and the program works perfectly. I even entered the wrong server information and the program did not connect to the server. It means that the codes are working correctly, but I don't know why the internet is not connecting.<a href=\"https://i.stack.imgur.com/HMMEW.jpg\" rel=\"nofollow noreferrer\">MainScreen Image</a></p>\n"},{"tags":["java","java-8"],"answers":[{"tags":[],"owner":{"account_id":7291967,"reputation":57515,"user_id":5558072,"accept_rate":100,"display_name":"Youcef LAIDANI"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1691077271,"creation_date":1691077271,"answer_id":76829661,"question_id":76829575,"body_markdown":"You can use `Collectors.groupingBy` method in combination with the `Collectors.mapping` method like this:\r\n\r\n    Map&lt;String, List&lt;String&gt;&gt; result = map.entrySet()\r\n            .stream()\r\n            .collect(Collectors.groupingBy(\r\n                    Map.Entry::getValue,\r\n                    Collectors.mapping(Map.Entry::getKey, Collectors.toList())\r\n            ));\r\n\r\n**Outputs**\r\n\r\n    {Added=[A, D, E], Modified=[C], Removed=[B]}","title":"How to get Group of Keys based on MapEntry value by using Java 8 GroupBy","body":"<p>You can use <code>Collectors.groupingBy</code> method in combination with the <code>Collectors.mapping</code> method like this:</p>\n<pre><code>Map&lt;String, List&lt;String&gt;&gt; result = map.entrySet()\n        .stream()\n        .collect(Collectors.groupingBy(\n                Map.Entry::getValue,\n                Collectors.mapping(Map.Entry::getKey, Collectors.toList())\n        ));\n</code></pre>\n<p><strong>Outputs</strong></p>\n<pre><code>{Added=[A, D, E], Modified=[C], Removed=[B]}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691079643,"creation_date":1691079643,"answer_id":76829949,"question_id":76829575,"body_markdown":"`GroupingBy` works great and functionally describes the process.  But if you have a large map and want to speed things up a bit, this is somewhat faster as it does not incur the overhead of streams.\r\n\r\n**Current Map**\r\n```\r\nMap&lt;String, String&gt; map = Map.of(\r\n       &quot;A&quot;, &quot;Added&quot;,\r\n       &quot;B&quot;, &quot;Removed&quot;,\r\n       &quot;C&quot;, &quot;Modified&quot;,\r\n       &quot;D&quot;, &quot;Added&quot;,\r\n       &quot;E&quot;, &quot;Added&quot;);\r\n```\r\n-  loop over the `entrySet` of the existing map.\r\n-  [Map.computeIfAbsent](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/Map.html#computeIfAbsent(K,java.util.function.Function)) checks to see if the key is present.\r\n   - if not, it creates a list, returns it, and adds the value to the list.\r\n   - else it returns the existing list so a new value may be added to the list.\r\n```\r\nMap&lt;String, List&lt;String&gt;&gt; result2 = new HashMap&lt;&gt;();\r\nmap.entrySet().forEach(e -&gt; \r\n   result.computeIfAbsent(e.getValue(),\r\n                          v -&gt; new ArrayList&lt;&gt;())\r\n                                .add(e.getKey()));\r\n\r\nresult.entrySet().forEach(System.out::println);\r\n```\r\nprints\r\n```\r\nAdded=[D, E, A]\r\nModified=[C]\r\nRemoved=[B]\r\n```\r\nIf you want the original and final maps to be in a specific order based by key, use a [LinkedHashMap](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/LinkedHashMap.html#LinkedHashMap) for both maps.","title":"How to get Group of Keys based on MapEntry value by using Java 8 GroupBy","body":"<p><code>GroupingBy</code> works great and functionally describes the process.  But if you have a large map and want to speed things up a bit, this is somewhat faster as it does not incur the overhead of streams.</p>\n<p><strong>Current Map</strong></p>\n<pre><code>Map&lt;String, String&gt; map = Map.of(\n       &quot;A&quot;, &quot;Added&quot;,\n       &quot;B&quot;, &quot;Removed&quot;,\n       &quot;C&quot;, &quot;Modified&quot;,\n       &quot;D&quot;, &quot;Added&quot;,\n       &quot;E&quot;, &quot;Added&quot;);\n</code></pre>\n<ul>\n<li>loop over the <code>entrySet</code> of the existing map.</li>\n<li><a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/Map.html#computeIfAbsent(K,java.util.function.Function)\" rel=\"nofollow noreferrer\">Map.computeIfAbsent</a> checks to see if the key is present.\n<ul>\n<li>if not, it creates a list, returns it, and adds the value to the list.</li>\n<li>else it returns the existing list so a new value may be added to the list.</li>\n</ul>\n</li>\n</ul>\n<pre><code>Map&lt;String, List&lt;String&gt;&gt; result2 = new HashMap&lt;&gt;();\nmap.entrySet().forEach(e -&gt; \n   result.computeIfAbsent(e.getValue(),\n                          v -&gt; new ArrayList&lt;&gt;())\n                                .add(e.getKey()));\n\nresult.entrySet().forEach(System.out::println);\n</code></pre>\n<p>prints</p>\n<pre><code>Added=[D, E, A]\nModified=[C]\nRemoved=[B]\n</code></pre>\n<p>If you want the original and final maps to be in a specific order based by key, use a <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/LinkedHashMap.html#LinkedHashMap\" rel=\"nofollow noreferrer\">LinkedHashMap</a> for both maps.</p>\n"}],"owner":{"account_id":10877326,"reputation":145,"user_id":7997408,"display_name":"Yogesh Ukale"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76829661,"answer_count":2,"score":1,"last_activity_date":1691079643,"creation_date":1691076595,"question_id":76829575,"body_markdown":"**we have map as below**\r\n\r\n    A -&gt; Added\r\n    B -&gt; Removed\r\n    C -&gt; Modified\r\n    D -&gt; Added\r\n    E -&gt; Added\r\n\r\n**expected Output:**\r\n\r\n    Added    = [A, D, E]\r\n    Removed  = [B]\r\n    Modified = [C]\r\n\r\nWe tried as below but expected output not getting\r\n\r\n    map.entrySet().stream().collect(Collectors.groupingBy(entry-&gt; entry.getValue()));\r\n\r\nPlease suggest me how can we get expected Output by using grouping By","title":"How to get Group of Keys based on MapEntry value by using Java 8 GroupBy","body":"<p><strong>we have map as below</strong></p>\n<pre><code>A -&gt; Added\nB -&gt; Removed\nC -&gt; Modified\nD -&gt; Added\nE -&gt; Added\n</code></pre>\n<p><strong>expected Output:</strong></p>\n<pre><code>Added    = [A, D, E]\nRemoved  = [B]\nModified = [C]\n</code></pre>\n<p>We tried as below but expected output not getting</p>\n<pre><code>map.entrySet().stream().collect(Collectors.groupingBy(entry-&gt; entry.getValue()));\n</code></pre>\n<p>Please suggest me how can we get expected Output by using grouping By</p>\n"},{"tags":["java","logging","log4j"],"comments":[{"owner":{"account_id":5052435,"reputation":1826,"user_id":4056574,"accept_rate":60,"display_name":"AsSiDe"},"score":0,"creation_date":1452421168,"post_id":34704267,"comment_id":57154342,"body_markdown":"place log4j.properties file in your classpath","body":"place log4j.properties file in your classpath"},{"owner":{"account_id":2869041,"reputation":4363,"user_id":2462759,"accept_rate":52,"display_name":"paul"},"score":0,"creation_date":1452422181,"post_id":34704267,"comment_id":57154596,"body_markdown":"either of two is needed `.xml` or `.properties` . I have added `.xml`. I have also changed output.","body":"either of two is needed <code>.xml</code> or <code>.properties</code> . I have added <code>.xml</code>. I have also changed output."},{"owner":{"account_id":20338,"reputation":63801,"user_id":48503,"accept_rate":100,"display_name":"Luke Woodward"},"score":0,"creation_date":1452445976,"post_id":34704267,"comment_id":57162735,"body_markdown":"Please edit your question to include the contents of the `.xml` file you are using.  Given the capital letter `C` in the root element name (`Configuration`) in your output, I&#39;m suspecting this is a Log4j2 configuration file, which won&#39;t work with Log4j 1.2.","body":"Please edit your question to include the contents of the <code>.xml</code> file you are using.  Given the capital letter <code>C</code> in the root element name (<code>Configuration</code>) in your output, I&#39;m suspecting this is a Log4j2 configuration file, which won&#39;t work with Log4j 1.2."},{"owner":{"account_id":179998,"reputation":5576,"user_id":413032,"accept_rate":59,"display_name":"Davut G&#252;rb&#252;z"},"score":1,"creation_date":1616343930,"post_id":34704267,"comment_id":117966567,"body_markdown":"excluded slf4j and my problem is solved","body":"excluded slf4j and my problem is solved"}],"answers":[{"tags":[],"owner":{"account_id":2027029,"reputation":997,"user_id":1811730,"display_name":"Dams"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1453133767,"creation_date":1453133767,"answer_id":34859302,"question_id":34704267,"body_markdown":"I think your xml is not valid ... your **Actual output** :\r\n\r\n    log4j:WARN Document root element &quot;Configuration&quot;, must match DOCTYPE root &quot;null&quot;.\r\n    ...\r\n    log4j:ERROR DOM element is - not a &lt;log4j:configuration&gt; element.\r\n\r\nI think you should define your xml like this :\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;\r\n    &lt;!DOCTYPE log4j:configuration SYSTEM &quot;log4j.dtd&quot;&gt;\r\n\r\n    &lt;log4j:configuration xmlns:log4j=&quot;http://jakarta.apache.org/log4j/&quot;&gt;\r\n    \r\n        &lt;appender name=&quot;xyz&quot; ... /&gt;\r\n    \r\n        &lt;root&gt; \r\n           ...\r\n        &lt;/root&gt;\r\n    \r\n    &lt;/log4j:configuration&gt;","title":"Log4j logging not working","body":"<p>I think your xml is not valid ... your <strong>Actual output</strong> :</p>\n\n<pre><code>log4j:WARN Document root element \"Configuration\", must match DOCTYPE root \"null\".\n...\nlog4j:ERROR DOM element is - not a &lt;log4j:configuration&gt; element.\n</code></pre>\n\n<p>I think you should define your xml like this :</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE log4j:configuration SYSTEM \"log4j.dtd\"&gt;\n\n&lt;log4j:configuration xmlns:log4j=\"http://jakarta.apache.org/log4j/\"&gt;\n\n    &lt;appender name=\"xyz\" ... /&gt;\n\n    &lt;root&gt; \n       ...\n    &lt;/root&gt;\n\n&lt;/log4j:configuration&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":174792,"reputation":617,"user_id":404376,"accept_rate":60,"display_name":"zwessels"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1619428041,"creation_date":1562836450,"answer_id":56985689,"question_id":34704267,"body_markdown":"Your config is in [log4j2 format][1], which is valid, but you need to declare your configuration in `log4j2.xml`.\r\n\r\n[1]: https://logging.apache.org/log4j/2.x/manual/configuration.html","title":"Log4j logging not working","body":"<p>Your config is in <a href=\"https://logging.apache.org/log4j/2.x/manual/configuration.html\" rel=\"nofollow noreferrer\">log4j2 format</a>, which is valid, but you need to declare your configuration in <code>log4j2.xml</code>.</p>\n"},{"tags":[],"owner":{"account_id":2594865,"reputation":395,"user_id":2248785,"display_name":"user2248785"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691078599,"creation_date":1691078599,"answer_id":76829822,"question_id":34704267,"body_markdown":"Quite late to the party here. Specifically on the error:\r\n\r\n```\r\nlog4j:ERROR DOM element is - not a &lt;log4j:configuration&gt; element.\r\n```\r\n\r\nI found that changing:\r\n\r\n```\r\n-Dlog4j2.configuration=...\r\n```\r\n\r\nto:\r\n\r\n```\r\n-Dlog4j2.configurationFile=...\r\n```\r\n\r\nfixed the issue.","title":"Log4j logging not working","body":"<p>Quite late to the party here. Specifically on the error:</p>\n<pre><code>log4j:ERROR DOM element is - not a &lt;log4j:configuration&gt; element.\n</code></pre>\n<p>I found that changing:</p>\n<pre><code>-Dlog4j2.configuration=...\n</code></pre>\n<p>to:</p>\n<pre><code>-Dlog4j2.configurationFile=...\n</code></pre>\n<p>fixed the issue.</p>\n"}],"owner":{"account_id":2869041,"reputation":4363,"user_id":2462759,"accept_rate":52,"display_name":"paul"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13062,"favorite_count":0,"down_vote_count":1,"up_vote_count":6,"answer_count":3,"score":5,"last_activity_date":1691078599,"creation_date":1452420917,"question_id":34704267,"body_markdown":"I have added `log4j` from [here][1] in build path. Wrote a simple method to test `log levels` but it doesn&#39;t print any thing console.\r\n\r\n\r\n  [1]: http://central.maven.org/maven2/log4j/log4j/1.2.17/log4j-1.2.17.jar\r\n\r\n    import org.apache.log4j.Level;\r\n    import org.apache.log4j.Logger;\r\n    \r\n    public class LoggerLevelTest {\r\n    \r\n    \tprivate static org.apache.log4j.Logger log = Logger\r\n    \t\t\t.getLogger(LoggerLevelTest.class);\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tlog.setLevel(Level.WARN);\r\n    \r\n    \t\tlog.trace(&quot;Trace Message!&quot;);\r\n    \t\tlog.debug(&quot;Debug Message!&quot;);\r\n    \t\tlog.info(&quot;Info Message!&quot;);\r\n    \t\tlog.warn(&quot;Warn Message!&quot;);\r\n    \t\tlog.error(&quot;Error Message!&quot;);\r\n    \t\tlog.fatal(&quot;Fatal Message!&quot;);\r\n    \t}\r\n    \r\n    }\r\n\r\n**Log4j.xml**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;Configuration status=&quot;WARN&quot;&gt;\r\n        &lt;Properties&gt;\r\n            &lt;Property name=&quot;LEVEL&quot;&gt;WARN&lt;/Property&gt; &lt;!-- default value --&gt;\r\n        &lt;/Properties&gt;\r\n        &lt;Appenders&gt;\r\n            &lt;Console name=&quot;Console&quot; target=&quot;SYSTEM_OUT&quot;&gt;\r\n                &lt;PatternLayout pattern=&quot;%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n&quot; /&gt;\r\n            &lt;/Console&gt;\r\n        &lt;/Appenders&gt;\r\n        &lt;Loggers&gt;\r\n            &lt;Root level=&quot;${sys:LEVEL}&quot;&gt;\r\n                &lt;AppenderRef ref=&quot;Console&quot; /&gt;\r\n            &lt;/Root&gt;\r\n        &lt;/Loggers&gt;\r\n    &lt;/Configuration&gt;\r\n\r\n\r\nActual output:\r\n\r\n    log4j:WARN Continuable parsing error 2 and column 30\r\n    log4j:WARN Document root element &quot;Configuration&quot;, must match DOCTYPE root &quot;null&quot;.\r\n    log4j:WARN Continuable parsing error 2 and column 30\r\n    log4j:WARN Document is invalid: no grammar found.\r\n    log4j:ERROR DOM element is - not a &lt;log4j:configuration&gt; element.\r\n    log4j:WARN No appenders could be found for logger (LoggerLevelTest).\r\n    log4j:WARN Please initialize the log4j system properly.\r\n    log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.\r\n\r\nExpected Output: \r\n\r\n    Warn Message!\r\n    Error Message!\r\n    Fatal Message!\r\n\r\nAbove Example link: http://www.tutorialspoint.com/log4j/log4j_logging_levels.htm","title":"Log4j logging not working","body":"<p>I have added <code>log4j</code> from <a href=\"http://central.maven.org/maven2/log4j/log4j/1.2.17/log4j-1.2.17.jar\" rel=\"noreferrer\">here</a> in build path. Wrote a simple method to test <code>log levels</code> but it doesn't print any thing console.</p>\n\n<pre><code>import org.apache.log4j.Level;\nimport org.apache.log4j.Logger;\n\npublic class LoggerLevelTest {\n\n    private static org.apache.log4j.Logger log = Logger\n            .getLogger(LoggerLevelTest.class);\n\n    public static void main(String[] args) {\n        log.setLevel(Level.WARN);\n\n        log.trace(\"Trace Message!\");\n        log.debug(\"Debug Message!\");\n        log.info(\"Info Message!\");\n        log.warn(\"Warn Message!\");\n        log.error(\"Error Message!\");\n        log.fatal(\"Fatal Message!\");\n    }\n\n}\n</code></pre>\n\n<p><strong>Log4j.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;Configuration status=\"WARN\"&gt;\n    &lt;Properties&gt;\n        &lt;Property name=\"LEVEL\"&gt;WARN&lt;/Property&gt; &lt;!-- default value --&gt;\n    &lt;/Properties&gt;\n    &lt;Appenders&gt;\n        &lt;Console name=\"Console\" target=\"SYSTEM_OUT\"&gt;\n            &lt;PatternLayout pattern=\"%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n\" /&gt;\n        &lt;/Console&gt;\n    &lt;/Appenders&gt;\n    &lt;Loggers&gt;\n        &lt;Root level=\"${sys:LEVEL}\"&gt;\n            &lt;AppenderRef ref=\"Console\" /&gt;\n        &lt;/Root&gt;\n    &lt;/Loggers&gt;\n&lt;/Configuration&gt;\n</code></pre>\n\n<p>Actual output:</p>\n\n<pre><code>log4j:WARN Continuable parsing error 2 and column 30\nlog4j:WARN Document root element \"Configuration\", must match DOCTYPE root \"null\".\nlog4j:WARN Continuable parsing error 2 and column 30\nlog4j:WARN Document is invalid: no grammar found.\nlog4j:ERROR DOM element is - not a &lt;log4j:configuration&gt; element.\nlog4j:WARN No appenders could be found for logger (LoggerLevelTest).\nlog4j:WARN Please initialize the log4j system properly.\nlog4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.\n</code></pre>\n\n<p>Expected Output: </p>\n\n<pre><code>Warn Message!\nError Message!\nFatal Message!\n</code></pre>\n\n<p>Above Example link: <a href=\"http://www.tutorialspoint.com/log4j/log4j_logging_levels.htm\" rel=\"noreferrer\">http://www.tutorialspoint.com/log4j/log4j_logging_levels.htm</a></p>\n"},{"tags":["java","visual-studio-code","arm64"],"comments":[{"owner":{"account_id":14798798,"reputation":92,"user_id":10687680,"display_name":"willbill"},"score":0,"creation_date":1691020974,"post_id":76823671,"comment_id":135435775,"body_markdown":"Have you tried [this](https://stackoverflow.com/a/71622655/10687680)?","body":"Have you tried <a href=\"https://stackoverflow.com/a/71622655/10687680\">this</a>?"},{"owner":{"account_id":15396644,"reputation":25775,"user_id":11107541,"display_name":"starball"},"score":0,"creation_date":1691021304,"post_id":76823671,"comment_id":135435801,"body_markdown":"dup? https://stackoverflow.com/q/72920577/11107541","body":"dup? <a href=\"https://stackoverflow.com/q/72920577/11107541\">stackoverflow.com/q/72920577/11107541</a>"},{"owner":{"account_id":2663825,"reputation":21876,"user_id":2302862,"accept_rate":100,"display_name":"Siguza"},"score":0,"creation_date":1691028314,"post_id":76823671,"comment_id":135436382,"body_markdown":"Does this answer your question? [How do I change the terminal inside Visual Studio code to use the non-Rosetta one i.e. have it use the arm64 one?](https://stackoverflow.com/questions/68781379/how-do-i-change-the-terminal-inside-visual-studio-code-to-use-the-non-rosetta-on)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/68781379/how-do-i-change-the-terminal-inside-visual-studio-code-to-use-the-non-rosetta-on\">How do I change the terminal inside Visual Studio code to use the non-Rosetta one i.e. have it use the arm64 one?</a>"},{"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"score":0,"creation_date":1691056528,"post_id":76823671,"comment_id":135441084,"body_markdown":"Does the simple example also go wrong?  https://openjfx.io/openjfx-docs/","body":"Does the simple example also go wrong?  <a href=\"https://openjfx.io/openjfx-docs/\" rel=\"nofollow noreferrer\">openjfx.io/openjfx-docs</a>"},{"owner":{"account_id":26625513,"reputation":1,"user_id":20243622,"display_name":"zcant_code"},"score":0,"creation_date":1691106131,"post_id":76823671,"comment_id":135450701,"body_markdown":"Hello I have&#39;t figured it out yet. @willbill solution that leads me to download Azul Zulu is the most reasonable but not sure how to configure it in vs code","body":"Hello I have&#39;t figured it out yet. @willbill solution that leads me to download Azul Zulu is the most reasonable but not sure how to configure it in vs code"},{"owner":{"account_id":26625513,"reputation":1,"user_id":20243622,"display_name":"zcant_code"},"score":0,"creation_date":1691112346,"post_id":76823671,"comment_id":135451163,"body_markdown":"@willbill I got it to work thank you for sharing","body":"@willbill I got it to work thank you for sharing"},{"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"score":0,"creation_date":1691113050,"post_id":76823671,"comment_id":135451221,"body_markdown":"@zcant_code Welcome to StackOverflow. If you find the solution, Please consider answering it and  accepting it as an answer to change its status to Answered. It will also help others to solve a similar issue. See [can I answer my own question..](https://stackoverflow.com/help/self-answer), Just a reminder :)","body":"@zcant_code Welcome to StackOverflow. If you find the solution, Please consider answering it and  accepting it as an answer to change its status to Answered. It will also help others to solve a similar issue. See <a href=\"https://stackoverflow.com/help/self-answer\">can I answer my own question..</a>, Just a reminder :)"},{"owner":{"account_id":14798798,"reputation":92,"user_id":10687680,"display_name":"willbill"},"score":0,"creation_date":1691121378,"post_id":76823671,"comment_id":135451841,"body_markdown":"no problem, happy to help :)","body":"no problem, happy to help :)"}],"owner":{"account_id":26625513,"reputation":1,"user_id":20243622,"display_name":"zcant_code"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691078517,"creation_date":1691011952,"question_id":76823671,"body_markdown":"This is the error that `VSCode` keeps displaying:\r\n\r\n```shell\r\n(mach-o file, but is an incompatible architecture (have &#39;x86_64&#39;, need &#39;arm64&#39;))\r\n```\r\n\r\nI installed `Java` through `Homebrew`, and that&#39;s the version I&#39;m running in `VSCode`.\r\n\r\nI&#39;ve tried downloading the `Java SDK` version for `ARM64`, but nothing showed up.","title":"Unable to run JavaFX on VSCode using a MacBook (Apple M2)","body":"<p>This is the error that <code>VSCode</code> keeps displaying:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>(mach-o file, but is an incompatible architecture (have 'x86_64', need 'arm64'))\n</code></pre>\n<p>I installed <code>Java</code> through <code>Homebrew</code>, and that's the version I'm running in <code>VSCode</code>.</p>\n<p>I've tried downloading the <code>Java SDK</code> version for <code>ARM64</code>, but nothing showed up.</p>\n"},{"tags":["java","gwt","ant"],"answers":[{"tags":[],"owner":{"account_id":297647,"reputation":2056,"user_id":869942,"display_name":"Bret Weinraub"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691077909,"creation_date":1672214367,"answer_id":74937679,"question_id":74937678,"body_markdown":"Coming back to this problem after a few months, within the generated build.xml file I found this block:\r\n\r\n    &lt;target name=&quot;javac&quot; depends=&quot;libs&quot; description=&quot;Compile java source to bytecode&quot;&gt;\r\n      &lt;mkdir dir=&quot;war/WEB-INF/classes&quot;/&gt;\r\n      &lt;javac srcdir=&quot;src&quot; includes=&quot;**&quot; encoding=&quot;utf-8&quot;\r\n          destdir=&quot;war/WEB-INF/classes&quot;\r\n          source=&quot;1.5&quot; target=&quot;1.5&quot; nowarn=&quot;true&quot;\r\n          debug=&quot;true&quot; debuglevel=&quot;lines,vars,source&quot;&gt;\r\n        &lt;classpath refid=&quot;project.class.path&quot;/&gt;\r\n      &lt;/javac&gt;\r\n      &lt;copy todir=&quot;war/WEB-INF/classes&quot;&gt;\r\n        &lt;fileset dir=&quot;src&quot; excludes=&quot;**/*.java&quot;/&gt;\r\n      &lt;/copy&gt;\r\n    &lt;/target&gt;\r\n\r\n\r\nAnd changed the source and target lines to 1.7.\r\n\r\n    &lt;target name=&quot;javac&quot; depends=&quot;libs&quot; description=&quot;Compile java source to bytecode&quot;&gt;\r\n      &lt;mkdir dir=&quot;war/WEB-INF/classes&quot;/&gt;\r\n      &lt;javac srcdir=&quot;src&quot; includes=&quot;**&quot; encoding=&quot;utf-8&quot;\r\n          destdir=&quot;war/WEB-INF/classes&quot;\r\n          source=&quot;1.7&quot; target=&quot;1.7&quot; nowarn=&quot;true&quot;\r\n          debug=&quot;true&quot; debuglevel=&quot;lines,vars,source&quot;&gt;\r\n        &lt;classpath refid=&quot;project.class.path&quot;/&gt;\r\n      &lt;/javac&gt;\r\n      &lt;copy todir=&quot;war/WEB-INF/classes&quot;&gt;\r\n        &lt;fileset dir=&quot;src&quot; excludes=&quot;**/*.java&quot;/&gt;\r\n      &lt;/copy&gt;\r\n    &lt;/target&gt;\r\n\r\nAnd everything worked as expected.","title":"Running &quot;ant gwtc&quot; in GWT project gives error &quot;Source option 5 is no longer supported. Use 7 or later&quot;","body":"<p>Coming back to this problem after a few months, within the generated build.xml file I found this block:</p>\n<pre><code>&lt;target name=&quot;javac&quot; depends=&quot;libs&quot; description=&quot;Compile java source to bytecode&quot;&gt;\n  &lt;mkdir dir=&quot;war/WEB-INF/classes&quot;/&gt;\n  &lt;javac srcdir=&quot;src&quot; includes=&quot;**&quot; encoding=&quot;utf-8&quot;\n      destdir=&quot;war/WEB-INF/classes&quot;\n      source=&quot;1.5&quot; target=&quot;1.5&quot; nowarn=&quot;true&quot;\n      debug=&quot;true&quot; debuglevel=&quot;lines,vars,source&quot;&gt;\n    &lt;classpath refid=&quot;project.class.path&quot;/&gt;\n  &lt;/javac&gt;\n  &lt;copy todir=&quot;war/WEB-INF/classes&quot;&gt;\n    &lt;fileset dir=&quot;src&quot; excludes=&quot;**/*.java&quot;/&gt;\n  &lt;/copy&gt;\n&lt;/target&gt;\n</code></pre>\n<p>And changed the source and target lines to 1.7.</p>\n<pre><code>&lt;target name=&quot;javac&quot; depends=&quot;libs&quot; description=&quot;Compile java source to bytecode&quot;&gt;\n  &lt;mkdir dir=&quot;war/WEB-INF/classes&quot;/&gt;\n  &lt;javac srcdir=&quot;src&quot; includes=&quot;**&quot; encoding=&quot;utf-8&quot;\n      destdir=&quot;war/WEB-INF/classes&quot;\n      source=&quot;1.7&quot; target=&quot;1.7&quot; nowarn=&quot;true&quot;\n      debug=&quot;true&quot; debuglevel=&quot;lines,vars,source&quot;&gt;\n    &lt;classpath refid=&quot;project.class.path&quot;/&gt;\n  &lt;/javac&gt;\n  &lt;copy todir=&quot;war/WEB-INF/classes&quot;&gt;\n    &lt;fileset dir=&quot;src&quot; excludes=&quot;**/*.java&quot;/&gt;\n  &lt;/copy&gt;\n&lt;/target&gt;\n</code></pre>\n<p>And everything worked as expected.</p>\n"},{"tags":[],"owner":{"account_id":22906904,"reputation":113,"user_id":17044833,"display_name":"Jaison "},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683637155,"creation_date":1683637155,"answer_id":76209639,"question_id":74937678,"body_markdown":"This seems to be issue with the java version that you are using. From the logs that you posted, you seem to be using java version 5, which is not supported for your project and you need to use java version 7 or above versions.","title":"Running &quot;ant gwtc&quot; in GWT project gives error &quot;Source option 5 is no longer supported. Use 7 or later&quot;","body":"<p>This seems to be issue with the java version that you are using. From the logs that you posted, you seem to be using java version 5, which is not supported for your project and you need to use java version 7 or above versions.</p>\n"}],"owner":{"account_id":297647,"reputation":2056,"user_id":869942,"display_name":"Bret Weinraub"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74937679,"answer_count":2,"score":0,"last_activity_date":1691077909,"creation_date":1672214367,"question_id":74937678,"body_markdown":"I have a GWT project that I haven&#39;t built for a while, although I don&#39;t think much has changed.\r\n\r\nWhen I run\r\n\r\n    ant gwtc\r\n\r\nI get the output:\r\n\r\n```\r\nBuildfile: .../build.xml\r\n\r\nlibs:\r\n\r\njavac:\r\n    [javac] .../build.xml:31: warning: &#39;includeantruntime&#39; was not set, defaulting to build.sysclasspath=last; set to false for repeatable builds\r\n    [javac] Compiling 4 source files to .../war/WEB-INF/classes\r\n    [javac] error: Source option 5 is no longer supported. Use 7 or later.\r\n    [javac] error: Target option 5 is no longer supported. Use 7 or later.\r\n\r\nBUILD FAILED\r\n.../build.xml:31: Compile failed; see the compiler error output for details.\r\n\r\n\r\n","title":"Running &quot;ant gwtc&quot; in GWT project gives error &quot;Source option 5 is no longer supported. Use 7 or later&quot;","body":"<p>I have a GWT project that I haven't built for a while, although I don't think much has changed.</p>\n<p>When I run</p>\n<pre><code>ant gwtc\n</code></pre>\n<p>I get the output:</p>\n<pre><code>Buildfile: .../build.xml\n\nlibs:\n\njavac:\n    [javac] .../build.xml:31: warning: 'includeantruntime' was not set, defaulting to build.sysclasspath=last; set to false for repeatable builds\n    [javac] Compiling 4 source files to .../war/WEB-INF/classes\n    [javac] error: Source option 5 is no longer supported. Use 7 or later.\n    [javac] error: Target option 5 is no longer supported. Use 7 or later.\n\nBUILD FAILED\n.../build.xml:31: Compile failed; see the compiler error output for details.\n\n\n</code></pre>\n"},{"tags":["java","android-studio"],"comments":[{"owner":{"account_id":3212023,"reputation":1016,"user_id":17856705,"display_name":"Computable"},"score":2,"creation_date":1691076870,"post_id":76829560,"comment_id":135445671,"body_markdown":"It&#39;s helpful to include the logcat stack trace in your post - but one brief look at the code I&#39;d say you can&#39;t cast a `Button` to a `ConstraintLayout` - assuming `R.id.startBtn` is in fact a button - include your `activity_intro` layout xml as well.","body":"It&#39;s helpful to include the logcat stack trace in your post - but one brief look at the code I&#39;d say you can&#39;t cast a <code>Button</code> to a <code>ConstraintLayout</code> - assuming <code>R.id.startBtn</code> is in fact a button - include your <code>activity_intro</code> layout xml as well."},{"owner":{"account_id":18000638,"reputation":531,"user_id":13082664,"display_name":"Meet Bhavsar"},"score":1,"creation_date":1691077010,"post_id":76829560,"comment_id":135445700,"body_markdown":"Change  ConstraintLayout to Button","body":"Change  ConstraintLayout to Button"}],"answers":[{"tags":[],"owner":{"account_id":16878257,"reputation":280,"user_id":12205091,"display_name":"Dmitri Chernysh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691077254,"creation_date":1691077254,"answer_id":76829659,"question_id":76829560,"body_markdown":"Check IntroActivity is in AndroidManifest.xml . It might be the common issue &quot;ActivityNotFoundException&quot; \r\n\r\n```xml\r\n    &lt;activity android:name=&quot;.IntroActivity&quot;/&gt;\r\n```","title":"I&#39;m trying to go to main activity through get started layout type button","body":"<p>Check IntroActivity is in AndroidManifest.xml . It might be the common issue &quot;ActivityNotFoundException&quot;</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;activity android:name=&quot;.IntroActivity&quot;/&gt;\n</code></pre>\n"}],"owner":{"account_id":27734355,"reputation":21,"user_id":21172229,"display_name":"Creative World"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1691077254,"creation_date":1691076475,"question_id":76829560,"body_markdown":"```\r\npackage com.example.portfolioapplication.Activity;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.constraintlayout.widget.ConstraintLayout;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\n\r\nimport com.example.portfolioapplication.R;\r\n\r\n\r\n\r\npublic class IntroActivity extends AppCompatActivity {\r\nprivate ConstraintLayout startBtn;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_intro);\r\n\r\n        startBtn= (ConstraintLayout) findViewById(R.id.startBtn);\r\n        startBtn.setOnClickListener(view -&gt; startActivity(new Intent(IntroActivity.this, MainActivity.class)));\r\n\r\n\r\n    }\r\n}\r\n```\r\n\r\n\r\nI&#39;m trying to go to main activity through get started layout type button but my is always crashing when I click to get started","title":"I&#39;m trying to go to main activity through get started layout type button","body":"<pre><code>package com.example.portfolioapplication.Activity;\n\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.constraintlayout.widget.ConstraintLayout;\n\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.view.View;\n\nimport com.example.portfolioapplication.R;\n\n\n\npublic class IntroActivity extends AppCompatActivity {\nprivate ConstraintLayout startBtn;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_intro);\n\n        startBtn= (ConstraintLayout) findViewById(R.id.startBtn);\n        startBtn.setOnClickListener(view -&gt; startActivity(new Intent(IntroActivity.this, MainActivity.class)));\n\n\n    }\n}\n</code></pre>\n<p>I'm trying to go to main activity through get started layout type button but my is always crashing when I click to get started</p>\n"},{"tags":["java","android","list","android-recyclerview","adapter"],"answers":[{"comments":[{"owner":{"account_id":29153006,"reputation":3,"user_id":22333451,"display_name":"HanS"},"score":0,"creation_date":1691081142,"post_id":76829535,"comment_id":135446566,"body_markdown":"It works, thank you very much","body":"It works, thank you very much"}],"tags":[],"owner":{"account_id":24227519,"reputation":42,"user_id":18181803,"display_name":"Mohammad"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691077087,"creation_date":1691076319,"answer_id":76829535,"question_id":76828918,"body_markdown":"you can simply define a static field(variable) for item&#39;s list. and write a static method in your adapter that takes a position and returns an item by position.\r\nnote that at first you must initialize the static variable by your list in the adapter.\r\n\r\nFor example:\r\n\r\n    private static list ArrayList&lt;Item&gt;;\r\n    ...\r\n    //write the below code in the adapter. you can write it in constructor or write it in a setter method that you will write or any else where!\r\n    list = // assign your items list to this variable (initializing and assigning)\r\n    ...\r\n    public static Item getItemByPosition(int position){\r\n            return list.get(position);\r\n    }\r\n\r\nuse it like below in any activity:\r\n\r\n    Item myItem = YourAdapter.getItemByPosition(3);\r\n    String myName = myItem.getName();","title":"Get recyclerView item from possition","body":"<p>you can simply define a static field(variable) for item's list. and write a static method in your adapter that takes a position and returns an item by position.\nnote that at first you must initialize the static variable by your list in the adapter.</p>\n<p>For example:</p>\n<pre><code>private static list ArrayList&lt;Item&gt;;\n...\n//write the below code in the adapter. you can write it in constructor or write it in a setter method that you will write or any else where!\nlist = // assign your items list to this variable (initializing and assigning)\n...\npublic static Item getItemByPosition(int position){\n        return list.get(position);\n}\n</code></pre>\n<p>use it like below in any activity:</p>\n<pre><code>Item myItem = YourAdapter.getItemByPosition(3);\nString myName = myItem.getName();\n</code></pre>\n"}],"owner":{"account_id":29153006,"reputation":3,"user_id":22333451,"display_name":"HanS"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76829535,"answer_count":1,"score":0,"last_activity_date":1691077087,"creation_date":1691071820,"question_id":76828918,"body_markdown":"I&#39;m creating a app that contains a recycler view, and the user adds any number of items he wants. Is there a way to get one of these items in any activity according to its position? \r\n\r\nOn BindViewHolder in adapter:\r\n\r\n```\r\nholder.tvName.setText(list.get(possition).getName);\r\nholder.tvNumber.setText(list.get(possition).getNumber);\r\n\r\n```\r\n\r\n\r\n\r\nSuppose that the list contain 10    items, and I want to get the name in possition three from the list \r\n\r\nHow I can do it?\r\n\r\n\r\nI try to get the value without possition and it gets the last value \r\n\r\n","title":"Get recyclerView item from possition","body":"<p>I'm creating a app that contains a recycler view, and the user adds any number of items he wants. Is there a way to get one of these items in any activity according to its position?</p>\n<p>On BindViewHolder in adapter:</p>\n<pre><code>holder.tvName.setText(list.get(possition).getName);\nholder.tvNumber.setText(list.get(possition).getNumber);\n\n</code></pre>\n<p>Suppose that the list contain 10    items, and I want to get the name in possition three from the list</p>\n<p>How I can do it?</p>\n<p>I try to get the value without possition and it gets the last value</p>\n"},{"tags":["java","apache-kafka","kafka-consumer-api"],"answers":[{"tags":[],"owner":{"account_id":773585,"reputation":3537,"user_id":1034782,"accept_rate":25,"display_name":"Donatello"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1496850231,"creation_date":1496849612,"answer_id":44417034,"question_id":44417033,"body_markdown":"&gt; Be sure your client connect to a real Kafka port !\r\n\r\nthis specific error happens while parsing (one of?) the first **header field** of the expected kafka message, as shown by the invocation of **ResponseHeader.java** in stack-trace.\r\n\r\nSo this can occurs if you target a listening port that has nothing to do with kafka server.\r\n\r\n&gt; just a 1 minute check !\r\n\r\nOtherwise, you should check for a client-server version mismatch.","title":"Kafka Error reading field &#39;correlation_id&#39;: java.nio.BufferUnderflowException","body":"<blockquote>\n  <p>Be sure your client connect to a real Kafka port !</p>\n</blockquote>\n\n<p>this specific error happens while parsing (one of?) the first <strong>header field</strong> of the expected kafka message, as shown by the invocation of <strong>ResponseHeader.java</strong> in stack-trace.</p>\n\n<p>So this can occurs if you target a listening port that has nothing to do with kafka server.</p>\n\n<blockquote>\n  <p>just a 1 minute check !</p>\n</blockquote>\n\n<p>Otherwise, you should check for a client-server version mismatch.</p>\n"},{"tags":[],"owner":{"account_id":5331831,"reputation":141,"user_id":4252221,"display_name":"Pravin Jadhav"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691077049,"creation_date":1608297405,"answer_id":65357736,"question_id":44417033,"body_markdown":"For me, I was having trouble with unit test failure with above exception. When I inspected the port(9092) being used on local machine, it was bound to already running process, worth checking if there is process for Kafka running locally. If you are sure you are not expecting it to be running, kill it by finding its pid. (Don&#39;t try on production though :P )\r\n\r\n    lsof -i:9092\r\n    kill -9 &lt;PID_FROM_ABOVE_IF_ANY&gt;","title":"Kafka Error reading field &#39;correlation_id&#39;: java.nio.BufferUnderflowException","body":"<p>For me, I was having trouble with unit test failure with above exception. When I inspected the port(9092) being used on local machine, it was bound to already running process, worth checking if there is process for Kafka running locally. If you are sure you are not expecting it to be running, kill it by finding its pid. (Don't try on production though :P )</p>\n<pre><code>lsof -i:9092\nkill -9 &lt;PID_FROM_ABOVE_IF_ANY&gt;\n</code></pre>\n"}],"owner":{"account_id":773585,"reputation":3537,"user_id":1034782,"accept_rate":25,"display_name":"Donatello"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3812,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1691077049,"creation_date":1496849612,"question_id":44417033,"body_markdown":"Getting this kafka exception on consumer :\r\n\r\n    org.apache.kafka.common.protocol.types.SchemaException: Error reading field &#39;correlation_id&#39;: java.nio.BufferUnderflowException\r\n\tat org.apache.kafka.common.protocol.types.Schema.read(Schema.java:71)\r\n\tat org.apache.kafka.common.requests.ResponseHeader.parse(ResponseHeader.java:53)\r\n\tat org.apache.kafka.clients.NetworkClient.handleCompletedReceives(NetworkClient.java:435)\r\n\tat org.apache.kafka.clients.NetworkClient.poll(NetworkClient.java:265)\r\n\tat org.apache.kafka.clients.consumer.internals.ConsumerNetworkClient.clientPoll(ConsumerNetworkClient.java:320)\r\n\tat org.apache.kafka.clients.consumer.internals.ConsumerNetworkClient.poll(ConsumerNetworkClient.java:213)\r\n\tat org.apache.kafka.clients.consumer.internals.ConsumerNetworkClient.poll(ConsumerNetworkClient.java:193)\r\n\tat org.apache.kafka.clients.consumer.internals.ConsumerNetworkClient.awaitMetadataUpdate(ConsumerNetworkClient.java:134)\r\n\tat org.apache.kafka.clients.consumer.internals.AbstractCoordinator.ensureCoordinatorKnown(AbstractCoordinator.java:184)\r\n\tat org.apache.kafka.clients.consumer.KafkaConsumer.pollOnce(KafkaConsumer.java:886)\r\n\tat org.apache.kafka.clients.consumer.KafkaConsumer.poll(KafkaConsumer.java:853)\r\n\r\nNo client-server version mismatch.","title":"Kafka Error reading field &#39;correlation_id&#39;: java.nio.BufferUnderflowException","body":"<p>Getting this kafka exception on consumer :</p>\n\n<pre><code>org.apache.kafka.common.protocol.types.SchemaException: Error reading field 'correlation_id': java.nio.BufferUnderflowException\nat org.apache.kafka.common.protocol.types.Schema.read(Schema.java:71)\nat org.apache.kafka.common.requests.ResponseHeader.parse(ResponseHeader.java:53)\nat org.apache.kafka.clients.NetworkClient.handleCompletedReceives(NetworkClient.java:435)\nat org.apache.kafka.clients.NetworkClient.poll(NetworkClient.java:265)\nat org.apache.kafka.clients.consumer.internals.ConsumerNetworkClient.clientPoll(ConsumerNetworkClient.java:320)\nat org.apache.kafka.clients.consumer.internals.ConsumerNetworkClient.poll(ConsumerNetworkClient.java:213)\nat org.apache.kafka.clients.consumer.internals.ConsumerNetworkClient.poll(ConsumerNetworkClient.java:193)\nat org.apache.kafka.clients.consumer.internals.ConsumerNetworkClient.awaitMetadataUpdate(ConsumerNetworkClient.java:134)\nat org.apache.kafka.clients.consumer.internals.AbstractCoordinator.ensureCoordinatorKnown(AbstractCoordinator.java:184)\nat org.apache.kafka.clients.consumer.KafkaConsumer.pollOnce(KafkaConsumer.java:886)\nat org.apache.kafka.clients.consumer.KafkaConsumer.poll(KafkaConsumer.java:853)\n</code></pre>\n\n<p>No client-server version mismatch.</p>\n"},{"tags":["java","json"],"owner":{"account_id":29153753,"reputation":1,"user_id":22334039,"display_name":"Shiyam Sundar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1691076678,"answer_count":0,"score":0,"last_activity_date":1691076703,"creation_date":1691076316,"question_id":76829534,"body_markdown":"Iam getting a response as\r\n\r\n    {\r\n        &quot;isSuccess&quot;: true,\r\n    \r\n         &quot;message&quot;: &quot;No Intent found&quot;,\r\n      \r\n         &quot;result&quot;: {\r\n    \r\n               &quot;isSuccess&quot;: false,\r\n    \r\n                &quot;message&quot;: &quot;Happy to Help You&quot;,\r\n    \r\n                &quot;endOfConv&quot;: true,\r\n    \r\n                &quot;text&quot;: &quot;Sorry I don&#39;t understand. Please rephrase your statement.&quot;,\r\n    \r\n                &quot;additionalInfo&quot;: {},\r\n    \r\n                &quot;conversationFlag&quot;: &quot;QWE&quot;\r\n    }\r\n\r\nIn the above additionalInfo is &quot;{}&quot;, I want to validate which is empty or not. I tried this below\r\n\r\n```\r\n{\r\n        JsonPath jsonpath = responseResult.jsonPath();\r\n        if(jsonpath.get(&quot;result.additionalInfo&quot;).toString()!=&quot;{}&quot;)\r\n        {\r\n           System.out.println(jsonpath.get(&quot;result.additionalInfo&quot;).toString());\r\n        }\r\n}\r\n```\r\n\r\nKindly help me on this","title":"How to Validate the JSON element is empty or not?","body":"<p>Iam getting a response as</p>\n<pre><code>{\n    &quot;isSuccess&quot;: true,\n\n     &quot;message&quot;: &quot;No Intent found&quot;,\n  \n     &quot;result&quot;: {\n\n           &quot;isSuccess&quot;: false,\n\n            &quot;message&quot;: &quot;Happy to Help You&quot;,\n\n            &quot;endOfConv&quot;: true,\n\n            &quot;text&quot;: &quot;Sorry I don't understand. Please rephrase your statement.&quot;,\n\n            &quot;additionalInfo&quot;: {},\n\n            &quot;conversationFlag&quot;: &quot;QWE&quot;\n}\n</code></pre>\n<p>In the above additionalInfo is &quot;{}&quot;, I want to validate which is empty or not. I tried this below</p>\n<pre><code>{\n        JsonPath jsonpath = responseResult.jsonPath();\n        if(jsonpath.get(&quot;result.additionalInfo&quot;).toString()!=&quot;{}&quot;)\n        {\n           System.out.println(jsonpath.get(&quot;result.additionalInfo&quot;).toString());\n        }\n}\n</code></pre>\n<p>Kindly help me on this</p>\n"},{"tags":["java","android","error-handling"],"comments":[{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1691076104,"post_id":76829090,"comment_id":135445502,"body_markdown":"`location` is `null`, meaning `locationManager.getLastKnownLocation` returned `null`.","body":"<code>location</code> is <code>null</code>, meaning <code>locationManager.getLastKnownLocation</code> returned <code>null</code>."},{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":1,"creation_date":1691077517,"post_id":76829090,"comment_id":135445824,"body_markdown":"Don&#39;t use getLastKnownLocation.  It will return null the VAST majority of the time-  it only returns a value if something else was recently using location.  Instead, request a location update and use that.","body":"Don&#39;t use getLastKnownLocation.  It will return null the VAST majority of the time-  it only returns a value if something else was recently using location.  Instead, request a location update and use that."}],"owner":{"account_id":29148302,"reputation":1,"user_id":22329699,"display_name":"Nishal N Thingalaya"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1691075480,"answer_count":0,"score":0,"last_activity_date":1691076415,"creation_date":1691073069,"question_id":76829090,"body_markdown":"I am trying to run a code that works like a weather app but after writing the code I am getting java null pointer error\r\nHere is my MainActivity.java\r\n\r\n\r\n```\r\npackage com.nishal.wheatherapp;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.loader.app.LoaderManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.Manifest;\r\nimport android.content.Context;\r\nimport android.content.pm.PackageManager;\r\nimport android.location.Address;\r\nimport android.location.Geocoder;\r\nimport android.location.Location;\r\nimport android.location.LocationManager;\r\nimport android.media.Image;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.view.WindowManager;\r\nimport android.widget.ImageView;\r\nimport android.widget.ProgressBar;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.android.volley.Request;\r\nimport com.android.volley.RequestQueue;\r\nimport com.android.volley.Response;\r\nimport com.android.volley.VolleyError;\r\nimport com.android.volley.toolbox.JsonObjectRequest;\r\nimport com.android.volley.toolbox.Volley;\r\nimport com.google.android.material.textfield.TextInputEditText;\r\nimport com.squareup.picasso.Picasso;\r\n\r\nimport org.json.JSONArray;\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.Locale;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    private RelativeLayout homeRl;\r\n    private ProgressBar loadingPB;\r\n    private TextView cityNameTV,temperatureTV,conditionTV;\r\n    private RecyclerView weatherRV;\r\n    private TextInputEditText cityEdt;\r\n    private ImageView backIV,iconIV,searchIV;\r\n    private ArrayList&lt;WeatherRvModel&gt; weatherRvModelArrayList;\r\n    private WeatherRVAdapter weatherRVAdapter;\r\n    private LocationManager locationManager;\r\n    private  int PERMISSION_CODE = 1;\r\n    private String cityName;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        getWindow().setFlags(WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS,WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS);\r\n\r\n        setContentView(R.layout.activity_main);\r\n        homeRl = findViewById(R.id.idRLHome);\r\n        loadingPB = findViewById(R.id.idPBLoading);\r\n        cityNameTV = findViewById(R.id.idTVCityName);\r\n        cityEdt = findViewById(R.id.idEdtCity);\r\n        temperatureTV = findViewById(R.id.idTVTemparature);\r\n        conditionTV = findViewById(R.id.idTVCondition);\r\n        weatherRV = findViewById(R.id.idRVweather);\r\n        backIV = findViewById(R.id.idIVBack);\r\n        iconIV = findViewById(R.id.IVIcon);\r\n        searchIV = findViewById(R.id.idIVSearch);\r\n        weatherRvModelArrayList = new ArrayList&lt;&gt;();\r\n        weatherRVAdapter = new WeatherRVAdapter(this,weatherRvModelArrayList);\r\n        weatherRV.setAdapter(weatherRVAdapter);\r\n\r\n        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);\r\n        if (ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp;\r\n                ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n            ActivityCompat.requestPermissions(MainActivity.this, new String[] {Manifest.permission.ACCESS_FINE_LOCATION, Manifest.permission.ACCESS_COARSE_LOCATION}, PERMISSION_CODE);\r\n        }\r\n\r\n        Location location = locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);\r\n            cityName = getCityName(location.getLongitude(),location.getLatitude());\r\n            getWeatherInfo(cityName);\r\n        searchIV.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                String city = cityEdt.getText().toString();\r\n                if(city.isEmpty()){\r\n                    Toast.makeText(MainActivity.this, &quot;Please Enter City Name&quot;, Toast.LENGTH_SHORT).show();\r\n                }else{\r\n                    cityNameTV.setText(cityName);\r\n                    getWeatherInfo(city);\r\n                }\r\n            }\r\n        });\r\n\r\n\r\n\r\n    }\r\n\r\n\r\n    @Override\r\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\r\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\r\n        if(requestCode==PERMISSION_CODE){\r\n            if(grantResults.length&gt;0 &amp;&amp; grantResults[0]==PackageManager.PERMISSION_GRANTED){\r\n                Toast.makeText(this, &quot;Permissions Granted&quot;, Toast.LENGTH_SHORT).show();\r\n            }else{\r\n                Toast.makeText(this, &quot;Please Provide the Permissions&quot;, Toast.LENGTH_SHORT).show();\r\n                finish();\r\n            }\r\n        }\r\n    }\r\n\r\n    private String getCityName(double longitude, double latitude){\r\n        String cityName = &quot;Not Found&quot;;\r\n        Geocoder gcd = new Geocoder(getBaseContext(), Locale.getDefault());\r\n        try{\r\n            List&lt;Address&gt; addresses = gcd.getFromLocation(latitude,longitude,10);\r\n            for(Address adr : addresses){\r\n                if(adr!=null){\r\n                    String city = adr.getLocality();\r\n                    if(city!=null &amp;&amp; !city.equals(&quot;&quot;)){\r\n                        cityName = city;\r\n                    }else{\r\n                        Log.d(&quot;TAG&quot;,&quot;CITY NOT FOUND&quot;);\r\n                        Toast.makeText(this,&quot;User City Not Found..&quot;,Toast.LENGTH_SHORT).show();\r\n                    }\r\n                }\r\n            }\r\n        }catch(IOException e){\r\n            e.printStackTrace();\r\n        }\r\n        return cityName;\r\n    }\r\n    //City name entry\r\n    private void getWeatherInfo(String cityName){\r\n        String url = &quot;http://api.weatherapi.com/v1/forecast.json?key=f7d844c25670438f8aa122034230208&amp;q=&quot;+ cityName +&quot;&amp;days=1&amp;aqi=yes&amp;alerts=yes&quot;;\r\n        cityNameTV.setText(cityName);\r\n        RequestQueue requestQueue = Volley.newRequestQueue(MainActivity.this);\r\n\r\n        JsonObjectRequest jsonObjectRequest = new JsonObjectRequest(Request.Method.GET, url, null, new Response.Listener&lt;JSONObject&gt;() {\r\n            @Override\r\n            public void onResponse(JSONObject response) {\r\n                loadingPB.setVisibility(View.GONE);\r\n                homeRl.setVisibility(View.VISIBLE);\r\n                weatherRvModelArrayList.clear();\r\n                try {\r\n                    String temperature = response.getJSONObject(&quot;current&quot;).getString(&quot;temp_c&quot;);\r\n                    temperatureTV.setText(temperature+&quot;&#176;c&quot;);\r\n                    int isDay = response.getJSONObject(&quot;current&quot;).getInt(&quot;is_day&quot;);\r\n                    String condition = response.getJSONObject(&quot;current&quot;).getJSONObject(&quot;condition&quot;).getString(&quot;text&quot;);\r\n                    String conditionIcon = response.getJSONObject(&quot;current&quot;).getJSONObject(&quot;condition&quot;).getString(&quot;icon&quot;);\r\n                    Picasso.get().load(&quot;http:&quot;.concat(conditionIcon)).into(iconIV);\r\n                    conditionTV.setText(condition);\r\n                    if(isDay==1){\r\n                        //morning\r\n                        Picasso.get().load(&quot;https://unsplash.com/photos/hqvP1DMi0d0&quot;).into(backIV);\r\n                    }else{\r\n                        //night\r\n                        Picasso.get().load(&quot;https://unsplash.com/photos/rpVQJbZMw8o&quot;).into(backIV);\r\n                    }\r\n\r\n                    JSONObject forecastObj = response.getJSONObject(&quot;forecast&quot;);\r\n                    JSONObject forecastO = forecastObj.getJSONArray(&quot;forecastday&quot;).getJSONObject(0);\r\n                    JSONArray hourArray = forecastO.getJSONArray(&quot;hour&quot;);\r\n\r\n                    for(int i=0;i&lt;hourArray.length();i++){\r\n                        JSONObject hourObj = hourArray.getJSONObject(i);\r\n                        String time = hourObj.getString(&quot;time&quot;);\r\n                        String temper = hourObj.getString(&quot;temp_c&quot;);\r\n                        String img = hourObj.getJSONObject(&quot;condition&quot;).getString(&quot;icon&quot;);\r\n                        String wind = hourObj.getString(&quot;wind_kph&quot;);\r\n                        weatherRvModelArrayList.add(new WeatherRvModel(time,temper,img,wind));\r\n                    }\r\n                    weatherRVAdapter.notifyDataSetChanged();\r\n\r\n                } catch (JSONException e) {\r\n                    throw new RuntimeException(e);\r\n                }\r\n            }\r\n        }, new Response.ErrorListener() {\r\n            @Override\r\n            public void onErrorResponse(VolleyError error) {\r\n                Toast.makeText(MainActivity.this, &quot;Please Enter valid City Name&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n        requestQueue.add(jsonObjectRequest);\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\nI tried all the methods but it is still giving me \r\nAttempt to invoke virtual method &#39;double android.location.Location.getLongitude()&#39; this error\r\n\r\nmy logcat  is\r\n\r\n\r\n```\r\njava.lang.NullPointerException: Attempt to invoke virtual method &#39;double android.location.Location.getLongitude()&#39; on a null object reference\r\n                                                                                                    \tat android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3449)\r\n                                                                                                    \tat android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3601)\r\n                                                                                                    \tat android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:85)\r\n                                                                                                    \tat android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\r\n                                                                                                    \tat android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\r\n                                                                                                    \tat android.app.ActivityThread$H.handleMessage(ActivityThread.java:2066)\r\n```\r\n","title":"Is there a way to avoid longitude location to be null","body":"<p>I am trying to run a code that works like a weather app but after writing the code I am getting java null pointer error\nHere is my MainActivity.java</p>\n<pre><code>package com.nishal.wheatherapp;\n\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.core.app.ActivityCompat;\nimport androidx.loader.app.LoaderManager;\nimport androidx.recyclerview.widget.RecyclerView;\n\nimport android.Manifest;\nimport android.content.Context;\nimport android.content.pm.PackageManager;\nimport android.location.Address;\nimport android.location.Geocoder;\nimport android.location.Location;\nimport android.location.LocationManager;\nimport android.media.Image;\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.view.View;\nimport android.view.WindowManager;\nimport android.widget.ImageView;\nimport android.widget.ProgressBar;\nimport android.widget.RelativeLayout;\nimport android.widget.TextView;\nimport android.widget.Toast;\n\nimport com.android.volley.Request;\nimport com.android.volley.RequestQueue;\nimport com.android.volley.Response;\nimport com.android.volley.VolleyError;\nimport com.android.volley.toolbox.JsonObjectRequest;\nimport com.android.volley.toolbox.Volley;\nimport com.google.android.material.textfield.TextInputEditText;\nimport com.squareup.picasso.Picasso;\n\nimport org.json.JSONArray;\nimport org.json.JSONException;\nimport org.json.JSONObject;\n\nimport java.io.IOException;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Locale;\n\npublic class MainActivity extends AppCompatActivity {\n\n    private RelativeLayout homeRl;\n    private ProgressBar loadingPB;\n    private TextView cityNameTV,temperatureTV,conditionTV;\n    private RecyclerView weatherRV;\n    private TextInputEditText cityEdt;\n    private ImageView backIV,iconIV,searchIV;\n    private ArrayList&lt;WeatherRvModel&gt; weatherRvModelArrayList;\n    private WeatherRVAdapter weatherRVAdapter;\n    private LocationManager locationManager;\n    private  int PERMISSION_CODE = 1;\n    private String cityName;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        getWindow().setFlags(WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS,WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS);\n\n        setContentView(R.layout.activity_main);\n        homeRl = findViewById(R.id.idRLHome);\n        loadingPB = findViewById(R.id.idPBLoading);\n        cityNameTV = findViewById(R.id.idTVCityName);\n        cityEdt = findViewById(R.id.idEdtCity);\n        temperatureTV = findViewById(R.id.idTVTemparature);\n        conditionTV = findViewById(R.id.idTVCondition);\n        weatherRV = findViewById(R.id.idRVweather);\n        backIV = findViewById(R.id.idIVBack);\n        iconIV = findViewById(R.id.IVIcon);\n        searchIV = findViewById(R.id.idIVSearch);\n        weatherRvModelArrayList = new ArrayList&lt;&gt;();\n        weatherRVAdapter = new WeatherRVAdapter(this,weatherRvModelArrayList);\n        weatherRV.setAdapter(weatherRVAdapter);\n\n        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);\n        if (ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp;\n                ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\n            ActivityCompat.requestPermissions(MainActivity.this, new String[] {Manifest.permission.ACCESS_FINE_LOCATION, Manifest.permission.ACCESS_COARSE_LOCATION}, PERMISSION_CODE);\n        }\n\n        Location location = locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);\n            cityName = getCityName(location.getLongitude(),location.getLatitude());\n            getWeatherInfo(cityName);\n        searchIV.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                String city = cityEdt.getText().toString();\n                if(city.isEmpty()){\n                    Toast.makeText(MainActivity.this, &quot;Please Enter City Name&quot;, Toast.LENGTH_SHORT).show();\n                }else{\n                    cityNameTV.setText(cityName);\n                    getWeatherInfo(city);\n                }\n            }\n        });\n\n\n\n    }\n\n\n    @Override\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\n        if(requestCode==PERMISSION_CODE){\n            if(grantResults.length&gt;0 &amp;&amp; grantResults[0]==PackageManager.PERMISSION_GRANTED){\n                Toast.makeText(this, &quot;Permissions Granted&quot;, Toast.LENGTH_SHORT).show();\n            }else{\n                Toast.makeText(this, &quot;Please Provide the Permissions&quot;, Toast.LENGTH_SHORT).show();\n                finish();\n            }\n        }\n    }\n\n    private String getCityName(double longitude, double latitude){\n        String cityName = &quot;Not Found&quot;;\n        Geocoder gcd = new Geocoder(getBaseContext(), Locale.getDefault());\n        try{\n            List&lt;Address&gt; addresses = gcd.getFromLocation(latitude,longitude,10);\n            for(Address adr : addresses){\n                if(adr!=null){\n                    String city = adr.getLocality();\n                    if(city!=null &amp;&amp; !city.equals(&quot;&quot;)){\n                        cityName = city;\n                    }else{\n                        Log.d(&quot;TAG&quot;,&quot;CITY NOT FOUND&quot;);\n                        Toast.makeText(this,&quot;User City Not Found..&quot;,Toast.LENGTH_SHORT).show();\n                    }\n                }\n            }\n        }catch(IOException e){\n            e.printStackTrace();\n        }\n        return cityName;\n    }\n    //City name entry\n    private void getWeatherInfo(String cityName){\n        String url = &quot;http://api.weatherapi.com/v1/forecast.json?key=f7d844c25670438f8aa122034230208&amp;q=&quot;+ cityName +&quot;&amp;days=1&amp;aqi=yes&amp;alerts=yes&quot;;\n        cityNameTV.setText(cityName);\n        RequestQueue requestQueue = Volley.newRequestQueue(MainActivity.this);\n\n        JsonObjectRequest jsonObjectRequest = new JsonObjectRequest(Request.Method.GET, url, null, new Response.Listener&lt;JSONObject&gt;() {\n            @Override\n            public void onResponse(JSONObject response) {\n                loadingPB.setVisibility(View.GONE);\n                homeRl.setVisibility(View.VISIBLE);\n                weatherRvModelArrayList.clear();\n                try {\n                    String temperature = response.getJSONObject(&quot;current&quot;).getString(&quot;temp_c&quot;);\n                    temperatureTV.setText(temperature+&quot;°c&quot;);\n                    int isDay = response.getJSONObject(&quot;current&quot;).getInt(&quot;is_day&quot;);\n                    String condition = response.getJSONObject(&quot;current&quot;).getJSONObject(&quot;condition&quot;).getString(&quot;text&quot;);\n                    String conditionIcon = response.getJSONObject(&quot;current&quot;).getJSONObject(&quot;condition&quot;).getString(&quot;icon&quot;);\n                    Picasso.get().load(&quot;http:&quot;.concat(conditionIcon)).into(iconIV);\n                    conditionTV.setText(condition);\n                    if(isDay==1){\n                        //morning\n                        Picasso.get().load(&quot;https://unsplash.com/photos/hqvP1DMi0d0&quot;).into(backIV);\n                    }else{\n                        //night\n                        Picasso.get().load(&quot;https://unsplash.com/photos/rpVQJbZMw8o&quot;).into(backIV);\n                    }\n\n                    JSONObject forecastObj = response.getJSONObject(&quot;forecast&quot;);\n                    JSONObject forecastO = forecastObj.getJSONArray(&quot;forecastday&quot;).getJSONObject(0);\n                    JSONArray hourArray = forecastO.getJSONArray(&quot;hour&quot;);\n\n                    for(int i=0;i&lt;hourArray.length();i++){\n                        JSONObject hourObj = hourArray.getJSONObject(i);\n                        String time = hourObj.getString(&quot;time&quot;);\n                        String temper = hourObj.getString(&quot;temp_c&quot;);\n                        String img = hourObj.getJSONObject(&quot;condition&quot;).getString(&quot;icon&quot;);\n                        String wind = hourObj.getString(&quot;wind_kph&quot;);\n                        weatherRvModelArrayList.add(new WeatherRvModel(time,temper,img,wind));\n                    }\n                    weatherRVAdapter.notifyDataSetChanged();\n\n                } catch (JSONException e) {\n                    throw new RuntimeException(e);\n                }\n            }\n        }, new Response.ErrorListener() {\n            @Override\n            public void onErrorResponse(VolleyError error) {\n                Toast.makeText(MainActivity.this, &quot;Please Enter valid City Name&quot;, Toast.LENGTH_SHORT).show();\n            }\n        });\n        requestQueue.add(jsonObjectRequest);\n    }\n\n}\n</code></pre>\n<p>I tried all the methods but it is still giving me\nAttempt to invoke virtual method 'double android.location.Location.getLongitude()' this error</p>\n<p>my logcat  is</p>\n<pre><code>java.lang.NullPointerException: Attempt to invoke virtual method 'double android.location.Location.getLongitude()' on a null object reference\n                                                                                                        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3449)\n                                                                                                        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3601)\n                                                                                                        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:85)\n                                                                                                        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\n                                                                                                        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\n                                                                                                        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2066)\n</code></pre>\n"},{"tags":["java","automated-tests","appium","ui-automation"],"answers":[{"tags":[],"owner":{"account_id":20717463,"reputation":190,"user_id":15212573,"display_name":"roudlek"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691076128,"creation_date":1691076128,"answer_id":76829503,"question_id":76584527,"body_markdown":"Use AppiumBy specific class for appium to access your elements:\r\n\r\n            driver.findElement(AppiumBy.xpath(&quot;open menu&quot;)).click();\r\n\r\n\r\n, i strongly recommend this **playlist**:\r\n\r\nhttps://www.youtube.com/watch?v=jQFRgOI8-3o&amp;list=PL9ok7C7Yn9A99LiTcemmKmupBdNB38bbo&amp;pp=iAQB\r\n\r\nwhat you are looking for is in video 4: \r\n\r\nhttps://www.youtube.com/watch?v=hD9Bgb1LSy0&amp;t=137s&amp;ab_channel=TestingMiniBytes\r\n\r\n**upvote** if this helps","title":"Is the support to MobileElement no more available starting from the latest versions of Appium java-client I.e 8.5.1?","body":"<p>Use AppiumBy specific class for appium to access your elements:</p>\n<pre><code>        driver.findElement(AppiumBy.xpath(&quot;open menu&quot;)).click();\n</code></pre>\n<p>, i strongly recommend this <strong>playlist</strong>:</p>\n<p><a href=\"https://www.youtube.com/watch?v=jQFRgOI8-3o&amp;list=PL9ok7C7Yn9A99LiTcemmKmupBdNB38bbo&amp;pp=iAQB\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=jQFRgOI8-3o&amp;list=PL9ok7C7Yn9A99LiTcemmKmupBdNB38bbo&amp;pp=iAQB</a></p>\n<p>what you are looking for is in video 4:</p>\n<p><a href=\"https://www.youtube.com/watch?v=hD9Bgb1LSy0&amp;t=137s&amp;ab_channel=TestingMiniBytes\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=hD9Bgb1LSy0&amp;t=137s&amp;ab_channel=TestingMiniBytes</a></p>\n<p><strong>upvote</strong> if this helps</p>\n"}],"owner":{"account_id":7704244,"reputation":17,"user_id":5846250,"display_name":"puneeth chidura"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":311,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1691076128,"creation_date":1688071661,"question_id":76584527,"body_markdown":"I just wanted to as a quick question to all the people here\r\nIs the support to MobileElement no more available starting from the latest versions of Appium java-client I.e 8.5.1 ??\r\nI ask this because I have added the maven dependency\r\n\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;io.appium&lt;/groupId&gt;\r\n    &lt;artifactId&gt;java-client&lt;/artifactId&gt;\r\n    &lt;version&gt;8.5.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nTo my maven project POM.xml and there is an error at the import statement “import io.appium.java_client.MobileElement;” which says “The import io.appium.java_client.MobileElement cannot be\r\nresolved”\r\nAlso\r\nThere is an news @ https://github.com/appium/java-client/blob/master/docs/v7-to-v8-migration-guide.md#mobileelement. Stating that “ • DefaultGenericMobileElement class has been removed completely together with its descendants (MobileElement, IOSElement, AndroidElement etc.). Use WebElement instead.”  \r\nShould this mean that MobileElement is no useful and permitted with the latest versions of Appium java-client I.e 8.5.1  and all the capabilities I.e mobile specific actions such as setValue(), swipe(), pinch(), and zoom(). Are moved to/will be available with WebElement from Appium java-client I.e 8.5.1 . I am little confused here. Any better early clarity from anyone of you will be much appreciated. Please do comment if you need any additional information related to this.\r\n","title":"Is the support to MobileElement no more available starting from the latest versions of Appium java-client I.e 8.5.1?","body":"<p>I just wanted to as a quick question to all the people here\nIs the support to MobileElement no more available starting from the latest versions of Appium java-client I.e 8.5.1 ??\nI ask this because I have added the maven dependency</p>\n<pre><code>&lt;dependency&gt;\n&lt;groupId&gt;io.appium&lt;/groupId&gt;\n&lt;artifactId&gt;java-client&lt;/artifactId&gt;\n&lt;version&gt;8.5.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>To my maven project POM.xml and there is an error at the import statement “import io.appium.java_client.MobileElement;” which says “The import io.appium.java_client.MobileElement cannot be\nresolved”\nAlso\nThere is an news @ <a href=\"https://github.com/appium/java-client/blob/master/docs/v7-to-v8-migration-guide.md#mobileelement\" rel=\"nofollow noreferrer\">https://github.com/appium/java-client/blob/master/docs/v7-to-v8-migration-guide.md#mobileelement</a>. Stating that “ • DefaultGenericMobileElement class has been removed completely together with its descendants (MobileElement, IOSElement, AndroidElement etc.). Use WebElement instead.”<br />\nShould this mean that MobileElement is no useful and permitted with the latest versions of Appium java-client I.e 8.5.1  and all the capabilities I.e mobile specific actions such as setValue(), swipe(), pinch(), and zoom(). Are moved to/will be available with WebElement from Appium java-client I.e 8.5.1 . I am little confused here. Any better early clarity from anyone of you will be much appreciated. Please do comment if you need any additional information related to this.</p>\n"},{"tags":["java","spring","kotlin","project-reactor","r2dbc"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1644569494,"post_id":71076971,"comment_id":125646205,"body_markdown":"Afaik you don&#39;t. BUt I would argue that how you are sending the file is wrong. Instead you should be writing to the output directly instead of an in-memory `ByteArrayOutputStream` this would not require that amount of memory and your application will continue to work.","body":"Afaik you don&#39;t. BUt I would argue that how you are sending the file is wrong. Instead you should be writing to the output directly instead of an in-memory <code>ByteArrayOutputStream</code> this would not require that amount of memory and your application will continue to work."},{"owner":{"account_id":1960473,"reputation":917,"user_id":1762235,"accept_rate":71,"display_name":"typik89"},"score":0,"creation_date":1644571079,"post_id":71076971,"comment_id":125646791,"body_markdown":"It&#39;s just an example to reproduce OOM and In my opinion, I do nothing wrong. It&#39;s my choice how to implement the logic of my application. I gave my opinion in detail why it could be a big problem and why if this feature exists It could help. And I think it&#39;s possible to add this feature.If even you think that the example application is implemented in a bad way, It doesn&#39;t remove the question about intercepting and handling OOM because the application keeps working in such cases","body":"It&#39;s just an example to reproduce OOM and In my opinion, I do nothing wrong. It&#39;s my choice how to implement the logic of my application. I gave my opinion in detail why it could be a big problem and why if this feature exists It could help. And I think it&#39;s possible to add this feature.If even you think that the example application is implemented in a bad way, It doesn&#39;t remove the question about intercepting and handling OOM because the application keeps working in such cases"},{"owner":{"account_id":1197482,"reputation":4952,"user_id":1168884,"accept_rate":79,"display_name":"matt freake"},"score":0,"creation_date":1644571430,"post_id":71076971,"comment_id":125646910,"body_markdown":"I think the problem is, once your OOM is thrown, you can&#39;t make any guarantees that your code is going to be able to &quot;gracefully shutdown&quot;. Sure at the moment,  you can see other things continuing to work, but you have no guarantee that will happen in production when you need it. And by that point you&#39;re relying on that to handle this situation instead of something outside the JVM.","body":"I think the problem is, once your OOM is thrown, you can&#39;t make any guarantees that your code is going to be able to &quot;gracefully shutdown&quot;. Sure at the moment,  you can see other things continuing to work, but you have no guarantee that will happen in production when you need it. And by that point you&#39;re relying on that to handle this situation instead of something outside the JVM."},{"owner":{"account_id":1960473,"reputation":917,"user_id":1762235,"accept_rate":71,"display_name":"typik89"},"score":0,"creation_date":1644572224,"post_id":71076971,"comment_id":125647184,"body_markdown":"ok, let&#39;s forget about gracefully shutdown. I want that my application in such cases goes down but it keeps working. If in a production environment the application doesn&#39;t keep working I will happy about this. And for me, It&#39;s not so important if my code of handling oom is executed or not. I&#39;m ready to have a situation when my application doesn&#39;t execute this code in case only if it goes down without it. But my app keeps working andI don&#39;t have the opportunity to recognize that OOM happened. It&#39;s big problem because as you said it&#39;s a JVM error and there are no guarantees that something works.","body":"ok, let&#39;s forget about gracefully shutdown. I want that my application in such cases goes down but it keeps working. If in a production environment the application doesn&#39;t keep working I will happy about this. And for me, It&#39;s not so important if my code of handling oom is executed or not. I&#39;m ready to have a situation when my application doesn&#39;t execute this code in case only if it goes down without it. But my app keeps working andI don&#39;t have the opportunity to recognize that OOM happened. It&#39;s big problem because as you said it&#39;s a JVM error and there are no guarantees that something works."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1644820096,"post_id":71076971,"comment_id":125697837,"body_markdown":"I suspect that the error actually is that it is being handled, by Netty. Judging by the fact that in the end, you get a `ReactorNetty$InternalNettyException`. The OOM is basically end-of-the-road (at least in my experience). The only way to handle it is to log something and kill the app. However I&#39;m also a believer that if you do things right you won&#39;t get an out-of-memory error in the first place, those errors are generally produced due to user error, so to fix you should actually fix your own code.","body":"I suspect that the error actually is that it is being handled, by Netty. Judging by the fact that in the end, you get a <code>ReactorNetty$InternalNettyException</code>. The OOM is basically end-of-the-road (at least in my experience). The only way to handle it is to log something and kill the app. However I&#39;m also a believer that if you do things right you won&#39;t get an out-of-memory error in the first place, those errors are generally produced due to user error, so to fix you should actually fix your own code."},{"owner":{"account_id":1960473,"reputation":917,"user_id":1762235,"accept_rate":71,"display_name":"typik89"},"score":0,"creation_date":1644828309,"post_id":71076971,"comment_id":125699974,"body_markdown":"I would glad to handle any exception but I can&#39;t or doesn&#39;t know how. As I said many times It&#39;s only example and the application doesn&#39;t finish in such cases.  Yes, OOM happens when something wrong with an application. But you can found some memory leak on the producation environment after days and you have a chance that on the production requests to application fails but all healthchecks are succed and you don&#39;t have a chance to understand this","body":"I would glad to handle any exception but I can&#39;t or doesn&#39;t know how. As I said many times It&#39;s only example and the application doesn&#39;t finish in such cases.  Yes, OOM happens when something wrong with an application. But you can found some memory leak on the producation environment after days and you have a chance that on the production requests to application fails but all healthchecks are succed and you don&#39;t have a chance to understand this"},{"owner":{"account_id":1182627,"reputation":138,"user_id":1157230,"display_name":"JCMS"},"score":0,"creation_date":1667945740,"post_id":71076971,"comment_id":131288631,"body_markdown":"I agree with you. There should be an option to just shut down the JVM in case of OOM. It&#39;s extremely annoying to have the app still reporting being healthy","body":"I agree with you. There should be an option to just shut down the JVM in case of OOM. It&#39;s extremely annoying to have the app still reporting being healthy"}],"answers":[{"tags":[],"owner":{"account_id":2111357,"reputation":951,"user_id":1876585,"accept_rate":67,"display_name":"Raphael do Vale"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691075700,"creation_date":1691075700,"answer_id":76829441,"question_id":71076971,"body_markdown":"I was trying to find something better. In the same way, after an OutOfMemory error, my application hangs, the message on the queue keeps &quot;unacked&quot; and health checks keeps working properly and returning 200.\r\n\r\nThe best option I found was setting the JVM property `-XX:+CrashOnOutOfMemoryError` so as soon as this error happens, JVM will exit with return code 1 and log a message.\r\n\r\nI would love to have a way to handle this events and, for example, redirect the problematic message to another queue.","title":"project reactor: my application keeps working after OOM error and I can&#39;t intercept and handle such errors","body":"<p>I was trying to find something better. In the same way, after an OutOfMemory error, my application hangs, the message on the queue keeps &quot;unacked&quot; and health checks keeps working properly and returning 200.</p>\n<p>The best option I found was setting the JVM property <code>-XX:+CrashOnOutOfMemoryError</code> so as soon as this error happens, JVM will exit with return code 1 and log a message.</p>\n<p>I would love to have a way to handle this events and, for example, redirect the problematic message to another queue.</p>\n"}],"owner":{"account_id":1960473,"reputation":917,"user_id":1762235,"accept_rate":71,"display_name":"typik89"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":669,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1691075700,"creation_date":1644567426,"question_id":71076971,"body_markdown":"I noticed that [project reactor][1] doesn&#39;t allow handling OOM errors. Project reactor developers [intercept and handle such errors by adding log messages][2], but there is no way to intercept and handle them for framework users.\r\n\r\nI suppose It&#39;s potentially a big problem. If OOM happens, an HTTP request sent by the client of my application hangs, but my application keeps working and handling other requests, and healthchecks of my application are successful too.\r\n\r\nAs I was answered in a [comment on GitHub][3],  my application is potentially in an unrecoverable state. Yes, I agree and I would prefer that healthchecks fail or the application finish when OOM happens. I understand that the onError method is not a good place to handle such special errors. But In my opinion, It could be done in class Hooks, e.g. onJvmError, that will allow to start gracefully shutdown process or signalize via implementation of healthchecks about this situation.\r\n\r\nI implemented [the project in Kotlin][4] ( [in Java][5]) with the rest endpoint using reactor and Webflux to reproduce such case. \r\n```\r\ninterface CsvRepository : ReactiveCrudRepository&lt;CsvRow, Long&gt;\r\n\r\n@Service\r\nclass CsvService(val csvRepository: CsvRepository) {\r\n    fun createByteArray(): Mono&lt;ByteArray&gt; =\r\n        csvRepository.findAll()\r\n            .reduce(ByteArrayOutputStream()) { output, el -&gt;\r\n                output.write(el.toString().toByteArray())\r\n                output.write(&quot;\\n&quot;.toByteArray())\r\n                output\r\n            }\r\n            .map { it.toByteArray() }\r\n}\r\n\r\n@SpringBootApplication\r\nclass WebfluxMemoryRetroProjectApplication(val csvService: CsvService) {\r\n\r\n    @Bean\r\n    fun routing(): RouterFunction&lt;ServerResponse&gt; = router {\r\n        accept(MediaType.ALL).nest {\r\n            GET(&quot;/test&quot;) {\r\n                csvService.createByteArray()\r\n                    .flatMap { result -&gt;\r\n                        ServerResponse.ok()\r\n                            .headers { httpHeaders -&gt;\r\n                                httpHeaders.contentType = MediaType(&quot;application&quot;, &quot;force-download&quot;)\r\n                                httpHeaders.set(HttpHeaders.CONTENT_DISPOSITION, &quot;attachment; filename=test.txt&quot;)\r\n                            }\r\n                            .bodyValue(ByteArrayResource(result))\r\n                    }\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\nAs a result of HTTP GET requests It requests data from a database and creates a file with a size of about 70MB.\r\nSo If I run it with -xmx100m, I have only an error in logs: \r\n```\r\n2022-02-07 12:25:06.135 ERROR 10288 --- [actor-tcp-nio-1] r.n.channel.ChannelOperationsHandler     : [7edd71ea, L:/127.0.0.1:58918 - R:localhost/127.0.0.1:5432] Error was received while reading the incoming data. The connection will be closed.\r\n\r\njava.lang.OutOfMemoryError: Java heap space\r\n....\r\n\r\n\r\n2022-02-07 12:25:06.141 ERROR 10288 --- [actor-tcp-nio-1] i.r.p.client.ReactorNettyClient          : Connection Error\r\n\r\nreactor.netty.ReactorNetty$InternalNettyException: java.lang.OutOfMemoryError: Java heap space\r\n```\r\nThis error isn&#39;t handled and an HTTP client request hangs.\r\nIs this expected behavior?\r\nhow can I handle this exception? I&#39;ve tried ```onErrorResume``` and ```Hooks.onOperatorError``` but I couldn&#39;t intercept this type of exception.\r\nIt seems unlogical for me that the application keeps working and I can&#39;t intercept and handle such errors.\r\n\r\n  [1]: https://projectreactor.io/\r\n  [2]: https://github.com/reactor/reactor-netty/blob/main/reactor-netty-core/src/main/java/reactor/netty/channel/ChannelOperationsHandler.java#L113\r\n  [3]: https://github.com/reactor/reactor-core/issues/2917#issuecomment-1032422400\r\n  [4]: https://github.com/typik89/webfluxMemoryRetroProject\r\n  [5]: https://github.com/sdeleuze/webfluxMemoryRetroProject","title":"project reactor: my application keeps working after OOM error and I can&#39;t intercept and handle such errors","body":"<p>I noticed that <a href=\"https://projectreactor.io/\" rel=\"nofollow noreferrer\">project reactor</a> doesn't allow handling OOM errors. Project reactor developers <a href=\"https://github.com/reactor/reactor-netty/blob/main/reactor-netty-core/src/main/java/reactor/netty/channel/ChannelOperationsHandler.java#L113\" rel=\"nofollow noreferrer\">intercept and handle such errors by adding log messages</a>, but there is no way to intercept and handle them for framework users.</p>\n<p>I suppose It's potentially a big problem. If OOM happens, an HTTP request sent by the client of my application hangs, but my application keeps working and handling other requests, and healthchecks of my application are successful too.</p>\n<p>As I was answered in a <a href=\"https://github.com/reactor/reactor-core/issues/2917#issuecomment-1032422400\" rel=\"nofollow noreferrer\">comment on GitHub</a>,  my application is potentially in an unrecoverable state. Yes, I agree and I would prefer that healthchecks fail or the application finish when OOM happens. I understand that the onError method is not a good place to handle such special errors. But In my opinion, It could be done in class Hooks, e.g. onJvmError, that will allow to start gracefully shutdown process or signalize via implementation of healthchecks about this situation.</p>\n<p>I implemented <a href=\"https://github.com/typik89/webfluxMemoryRetroProject\" rel=\"nofollow noreferrer\">the project in Kotlin</a> ( <a href=\"https://github.com/sdeleuze/webfluxMemoryRetroProject\" rel=\"nofollow noreferrer\">in Java</a>) with the rest endpoint using reactor and Webflux to reproduce such case.</p>\n<pre><code>interface CsvRepository : ReactiveCrudRepository&lt;CsvRow, Long&gt;\n\n@Service\nclass CsvService(val csvRepository: CsvRepository) {\n    fun createByteArray(): Mono&lt;ByteArray&gt; =\n        csvRepository.findAll()\n            .reduce(ByteArrayOutputStream()) { output, el -&gt;\n                output.write(el.toString().toByteArray())\n                output.write(&quot;\\n&quot;.toByteArray())\n                output\n            }\n            .map { it.toByteArray() }\n}\n\n@SpringBootApplication\nclass WebfluxMemoryRetroProjectApplication(val csvService: CsvService) {\n\n    @Bean\n    fun routing(): RouterFunction&lt;ServerResponse&gt; = router {\n        accept(MediaType.ALL).nest {\n            GET(&quot;/test&quot;) {\n                csvService.createByteArray()\n                    .flatMap { result -&gt;\n                        ServerResponse.ok()\n                            .headers { httpHeaders -&gt;\n                                httpHeaders.contentType = MediaType(&quot;application&quot;, &quot;force-download&quot;)\n                                httpHeaders.set(HttpHeaders.CONTENT_DISPOSITION, &quot;attachment; filename=test.txt&quot;)\n                            }\n                            .bodyValue(ByteArrayResource(result))\n                    }\n            }\n        }\n    }\n}\n</code></pre>\n<p>As a result of HTTP GET requests It requests data from a database and creates a file with a size of about 70MB.\nSo If I run it with -xmx100m, I have only an error in logs:</p>\n<pre><code>2022-02-07 12:25:06.135 ERROR 10288 --- [actor-tcp-nio-1] r.n.channel.ChannelOperationsHandler     : [7edd71ea, L:/127.0.0.1:58918 - R:localhost/127.0.0.1:5432] Error was received while reading the incoming data. The connection will be closed.\n\njava.lang.OutOfMemoryError: Java heap space\n....\n\n\n2022-02-07 12:25:06.141 ERROR 10288 --- [actor-tcp-nio-1] i.r.p.client.ReactorNettyClient          : Connection Error\n\nreactor.netty.ReactorNetty$InternalNettyException: java.lang.OutOfMemoryError: Java heap space\n</code></pre>\n<p>This error isn't handled and an HTTP client request hangs.\nIs this expected behavior?\nhow can I handle this exception? I've tried <code>onErrorResume</code> and <code>Hooks.onOperatorError</code> but I couldn't intercept this type of exception.\nIt seems unlogical for me that the application keeps working and I can't intercept and handle such errors.</p>\n"},{"tags":["java","spring","spring-mvc"],"comments":[{"owner":{"account_id":18533,"reputation":3393,"user_id":42540,"accept_rate":78,"display_name":"Santosh Gokak"},"score":4,"creation_date":1352223945,"post_id":13256406,"comment_id":18065027,"body_markdown":"static methods kills polymorphism  which makes it difficult to swap/test/mock code and hinders pluggability which are key tenets of Spring","body":"static methods kills polymorphism  which makes it difficult to swap/test/mock code and hinders pluggability which are key tenets of Spring"}],"answers":[{"tags":[],"owner":{"account_id":4954,"reputation":4796,"user_id":7708,"accept_rate":81,"display_name":"Alan Krueger"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1352223939,"creation_date":1352223939,"answer_id":13256454,"question_id":13256406,"body_markdown":"What if you need to have multiple CustomerService components with different configuration? You can&#39;t do that with a single static method.\r\n\r\nAlso, if there&#39;s any configuration whatsoever on CustomerService, how do you inject it? Having a bean that gets wired into dependent objects centralizes your configuration and keeps you from having to hunt through your code.","title":"What&#39;s the harm with using a static method in service layer?","body":"<p>What if you need to have multiple CustomerService components with different configuration? You can't do that with a single static method.</p>\n\n<p>Also, if there's any configuration whatsoever on CustomerService, how do you inject it? Having a bean that gets wired into dependent objects centralizes your configuration and keeps you from having to hunt through your code.</p>\n"},{"tags":[],"owner":{"account_id":299251,"reputation":335925,"user_id":605744,"accept_rate":100,"display_name":"Tomasz Nurkiewicz"},"comment_count":0,"down_vote_count":0,"up_vote_count":28,"is_accepted":true,"score":28,"last_activity_date":1352224236,"creation_date":1352224236,"answer_id":13256527,"question_id":13256406,"body_markdown":"There are numerous reasons:\r\n\r\n* you can&#39;t replace `CustomerService` with a mock easily during tests (tools like PowerMock aside)\r\n\r\n* `static` methods do not participate in standard, proxy-based AOP (no transactions, security, custom aspects)\r\n\r\n* you can no longer use fancy injection techniques, like injecting HTTP request (request scoped) into singleton scoped services (poor design anyway, but...)\r\n\r\nBut to be complete, there are also advantages:\r\n\r\n* `static` method is actually closer to your intent, Spring beans are very rarely stateful, thus they don&#39;t really need an instance to work\r\n\r\n* `static` call might be faster (this is irrelevant in 99% of the programs)","title":"What&#39;s the harm with using a static method in service layer?","body":"<p>There are numerous reasons:</p>\n\n<ul>\n<li><p>you can't replace <code>CustomerService</code> with a mock easily during tests (tools like PowerMock aside)</p></li>\n<li><p><code>static</code> methods do not participate in standard, proxy-based AOP (no transactions, security, custom aspects)</p></li>\n<li><p>you can no longer use fancy injection techniques, like injecting HTTP request (request scoped) into singleton scoped services (poor design anyway, but...)</p></li>\n</ul>\n\n<p>But to be complete, there are also advantages:</p>\n\n<ul>\n<li><p><code>static</code> method is actually closer to your intent, Spring beans are very rarely stateful, thus they don't really need an instance to work</p></li>\n<li><p><code>static</code> call might be faster (this is irrelevant in 99% of the programs)</p></li>\n</ul>\n"}],"owner":{"account_id":1278736,"reputation":7363,"user_id":1233359,"accept_rate":73,"display_name":"Dreamer"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17495,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"accepted_answer_id":13256527,"answer_count":2,"score":20,"last_activity_date":1691075547,"creation_date":1352223742,"question_id":13256406,"body_markdown":"I know it is not a best design but just a thought from a Spring newbie.\r\n\r\nNow we can easily `autowire` any service method to each other conveniently in Spring framework. But What is the disadvantage to create a static factory method of the service class and call it everywhere?\r\n\r\nIt&#39;s pretty common like this:\r\n\r\n    @Autowired\r\n    CustomerService customerService;\r\n    \r\n    ....\r\n    AccountDetail ad = customerService.getAccountDetail(accountId, type);\r\n\r\nBut this should work too:\r\n\r\n    // If we make getAccountDetail(String, String) static:\r\n    AccountDetail ad = CustomerService.getAccountDetail(accountId, type);\r\n\r\nSo why there is a design like autowire? It looks fancy and really cool, but the work behind this is still create one service bean instance on another service object.\r\n\r\nSeriously while Spring is all over the market so many posts and articles are talking about pros &amp; renovations. But is it guaranteeing better performance(like using autowire instead of static)?","title":"What&#39;s the harm with using a static method in service layer?","body":"<p>I know it is not a best design but just a thought from a Spring newbie.</p>\n<p>Now we can easily <code>autowire</code> any service method to each other conveniently in Spring framework. But What is the disadvantage to create a static factory method of the service class and call it everywhere?</p>\n<p>It's pretty common like this:</p>\n<pre><code>@Autowired\nCustomerService customerService;\n\n....\nAccountDetail ad = customerService.getAccountDetail(accountId, type);\n</code></pre>\n<p>But this should work too:</p>\n<pre><code>// If we make getAccountDetail(String, String) static:\nAccountDetail ad = CustomerService.getAccountDetail(accountId, type);\n</code></pre>\n<p>So why there is a design like autowire? It looks fancy and really cool, but the work behind this is still create one service bean instance on another service object.</p>\n<p>Seriously while Spring is all over the market so many posts and articles are talking about pros &amp; renovations. But is it guaranteeing better performance(like using autowire instead of static)?</p>\n"},{"tags":["java","spring-boot","hibernate","jpa"],"owner":{"account_id":6281226,"reputation":35,"user_id":4882162,"accept_rate":100,"display_name":"Wim Veldhuis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691074902,"creation_date":1691074902,"question_id":76829341,"body_markdown":"I am converting an hibernate 4.x application towards spring boot + JPA.\r\nWe have lots of integration testing with a number of applications, which requires us to reload the database quite often. \r\n\r\nTo increase the speed of tests, we developed a flushing capability where we flush all database related information after we reloaded the database (caches, discard queryplans, etc). Part of this functionality is to reset all identifier generators, so they will reinitialize from the database on their next access. We have our own IdGenerator implementation, so we can cast easily and call the correct method to do this (not in the snippet)\r\n\r\nIn code finding all the identifier generators in Hibernate 4.x looks like this:\r\n```\r\n        Map&lt;String, ClassMetadata&gt; map = hSFactory.getAllClassMetadata();\r\n        for (Map.Entry&lt;String, ClassMetadata&gt; entry : map.entrySet()) {\r\n\r\n          EntityPersister entityPersister = hSFactory.getEntityPersister(entry.getKey());\r\n          idGenerators.add(entityPersister.getIdentifierGenerator());\r\n        }\r\n```\r\nHowever, with later versions of Hibernate the getAllClassMetaData is no longer supported.\r\nSo I need to use the `EntityManagerFactory.getMetaModel()` method, but I can not find how to \r\nget the Identifier Generator for each entity.\r\n\r\nWhen debugging and after I obtain the set of `EntityType&lt;?&gt;` with `factory.getMetaModel().getEntities()`, I can see that each EntityType has a reference to the SessionFactoryImpl, which in turn has a list called identifierGenerators, which contains the information I am looking for.\r\n\r\nBut how to get to that the official way (without hacking with reflection as the inherited sessionFactory() method is protected, so not accessible otherwise). \r\nI&#39;d rather not put reflection based code in as it is likely to break with new versions.\r\n\r\n\r\n\r\n","title":"How to get a list of all used identifier generators in jpa?","body":"<p>I am converting an hibernate 4.x application towards spring boot + JPA.\nWe have lots of integration testing with a number of applications, which requires us to reload the database quite often.</p>\n<p>To increase the speed of tests, we developed a flushing capability where we flush all database related information after we reloaded the database (caches, discard queryplans, etc). Part of this functionality is to reset all identifier generators, so they will reinitialize from the database on their next access. We have our own IdGenerator implementation, so we can cast easily and call the correct method to do this (not in the snippet)</p>\n<p>In code finding all the identifier generators in Hibernate 4.x looks like this:</p>\n<pre><code>        Map&lt;String, ClassMetadata&gt; map = hSFactory.getAllClassMetadata();\n        for (Map.Entry&lt;String, ClassMetadata&gt; entry : map.entrySet()) {\n\n          EntityPersister entityPersister = hSFactory.getEntityPersister(entry.getKey());\n          idGenerators.add(entityPersister.getIdentifierGenerator());\n        }\n</code></pre>\n<p>However, with later versions of Hibernate the getAllClassMetaData is no longer supported.\nSo I need to use the <code>EntityManagerFactory.getMetaModel()</code> method, but I can not find how to\nget the Identifier Generator for each entity.</p>\n<p>When debugging and after I obtain the set of <code>EntityType&lt;?&gt;</code> with <code>factory.getMetaModel().getEntities()</code>, I can see that each EntityType has a reference to the SessionFactoryImpl, which in turn has a list called identifierGenerators, which contains the information I am looking for.</p>\n<p>But how to get to that the official way (without hacking with reflection as the inherited sessionFactory() method is protected, so not accessible otherwise).\nI'd rather not put reflection based code in as it is likely to break with new versions.</p>\n"},{"tags":["java","intellij-idea","java-8"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":3,"creation_date":1554376861,"post_id":55514661,"comment_id":97733924,"body_markdown":"Does `/usr/bin/jdk1.8.0_202/bin/java` exist and is your user allowed to run it?","body":"Does <code>&#47;usr&#47;bin&#47;jdk1.8.0_202&#47;bin&#47;java</code> exist and is your user allowed to run it?"},{"owner":{"account_id":1688935,"reputation":2244,"user_id":1551685,"display_name":"Steve Smith"},"score":0,"creation_date":1554377541,"post_id":55514661,"comment_id":97734384,"body_markdown":"https://stackoverflow.com/questions/44500899/java-lang-runtime-exception-cannot-run-program","body":"<a href=\"https://stackoverflow.com/questions/44500899/java-lang-runtime-exception-cannot-run-program\" title=\"java lang runtime exception cannot run program\">stackoverflow.com/questions/44500899/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":5079133,"reputation":162,"user_id":4075778,"display_name":"UrbanConor"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1691074881,"creation_date":1554377647,"answer_id":55514972,"question_id":55514661,"body_markdown":"First of check that `/usr/bin/jdk1.8.0_202/bin/java` is present - as in check that you have the Java SDK.\r\n\r\n*If you have it*, Then you need to specify the SDK for your project in Intellij. To do this goto &quot;Project Settings&quot; and select your SDK with the drop-down, as shown below\r\n\r\nGoto &quot;File&quot; → &quot;Settings&quot; → &quot;Project&quot; and you will see the below menu.\r\n\r\n[![InteliJ Project Structure][1]][1]\r\n\r\n\r\n  \r\n  \r\n*If you don&#39;t have* the Java SDK there, go ahead and install the Java JDK download from [https://www.oracle.com/technetwork/java/javase/downloads/index.html][2]  \r\nAfter installing the SDK, navigate to &quot;Project Settings&quot; again and select the new JDK configuration from the installation location. \r\n   \r\nThen you can build the project and it should work all fine!\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/EXTWu.png\r\n  [2]: https://www.oracle.com/technetwork/java/javase/downloads/index.html","title":"Cannot compile java program on linux machine","body":"<p>First of check that <code>/usr/bin/jdk1.8.0_202/bin/java</code> is present - as in check that you have the Java SDK.</p>\n<p><em>If you have it</em>, Then you need to specify the SDK for your project in Intellij. To do this goto &quot;Project Settings&quot; and select your SDK with the drop-down, as shown below</p>\n<p>Goto &quot;File&quot; → &quot;Settings&quot; → &quot;Project&quot; and you will see the below menu.</p>\n<p><a href=\"https://i.stack.imgur.com/EXTWu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EXTWu.png\" alt=\"InteliJ Project Structure\" /></a></p>\n<p><em>If you don't have</em> the Java SDK there, go ahead and install the Java JDK download from <a href=\"https://www.oracle.com/technetwork/java/javase/downloads/index.html\" rel=\"nofollow noreferrer\">https://www.oracle.com/technetwork/java/javase/downloads/index.html</a><br />\nAfter installing the SDK, navigate to &quot;Project Settings&quot; again and select the new JDK configuration from the installation location.</p>\n<p>Then you can build the project and it should work all fine!</p>\n"}],"owner":{"account_id":12527340,"reputation":144,"user_id":9116650,"display_name":"cephlot"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":209,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":55514972,"answer_count":1,"score":-2,"last_activity_date":1691074881,"creation_date":1554376793,"question_id":55514661,"body_markdown":"I&#39;m trying to write a Java program in Intellij on Ubuntu 18.04. There is nothing wrong with the code, I can run it on my Windows machine at home.\r\n\r\nWhen I&#39;m trying to build the program i get the following error message:\r\n\r\n    Error:Cannot run program &quot;/usr/bin/jdk1.8.0_202/bin/java&quot; (in\r\n    directory &quot;/home/oskar/.IdeaIC2019.1/system/compile-server&quot;): error=2,\r\n    No such file or directory","title":"Cannot compile java program on linux machine","body":"<p>I'm trying to write a Java program in Intellij on Ubuntu 18.04. There is nothing wrong with the code, I can run it on my Windows machine at home.</p>\n\n<p>When I'm trying to build the program i get the following error message:</p>\n\n<pre><code>Error:Cannot run program \"/usr/bin/jdk1.8.0_202/bin/java\" (in\ndirectory \"/home/oskar/.IdeaIC2019.1/system/compile-server\"): error=2,\nNo such file or directory\n</code></pre>\n"},{"tags":["java","json","kotlin","apache-beam","avro"],"answers":[{"tags":[],"owner":{"account_id":24493709,"reputation":161,"user_id":18410362,"display_name":"pranavbhandari"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691074826,"creation_date":1691074826,"answer_id":76829329,"question_id":76823963,"body_markdown":"You can do something similar to what we have done in Dataflow Templates. \r\n\r\nhttps://github.com/GoogleCloudPlatform/DataflowTemplates/blob/main/v2/common/src/main/java/com/google/cloud/teleport/v2/transforms/JsonConverters.java#L160","title":"How to convert a JsonObject into an Avro Generic Record?","body":"<p>You can do something similar to what we have done in Dataflow Templates.</p>\n<p><a href=\"https://github.com/GoogleCloudPlatform/DataflowTemplates/blob/main/v2/common/src/main/java/com/google/cloud/teleport/v2/transforms/JsonConverters.java#L160\" rel=\"nofollow noreferrer\">https://github.com/GoogleCloudPlatform/DataflowTemplates/blob/main/v2/common/src/main/java/com/google/cloud/teleport/v2/transforms/JsonConverters.java#L160</a></p>\n"}],"owner":{"account_id":1412218,"reputation":9144,"user_id":1338588,"accept_rate":64,"display_name":"Kulasangar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":203,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1691074826,"creation_date":1691016837,"question_id":76823963,"body_markdown":"I&#39;m still a newbie in this area, and currently I&#39;m trying to deserialise data from a parquet file using the `ParDo` and `DoFn` in Apache Beam, make some modifications to the record and then update the `GenericRecord`. \r\n\r\nInitially I started iterating the GenericArray type of field and then converting each object(GenericRecord) into a JSONObject, since I had to traverse through multiple nestings and update the respective value. I was able to do that, but now I&#39;m struggling to convert the updated JSONObject back into GenericRecord, so that the the whole GenericArray gets updated.\r\n\r\n    val attributes = dataNestedObjGroup.getAsGenericRecord(&quot;details&quot;)?.get(&quot;attributes&quot;) as GenericArray&lt;GenericRecord&gt;\r\n    attributes.forEach { attribute -&gt;\r\n        val jsonRootObject = JSONObject(attribute.toString())\r\n        jsonRootObject.keySet().forEach { keyStr -&gt;\r\n            val value = jsonRootObject.get(keyStr)\r\n            \r\n            val innerObject = JSONObject(value?.toString())\r\n            val valueOfKey = innerObject.getJSONArray(&quot;value&quot;)\r\n            if(innerObject.get(&quot;name&quot;) == &quot;customer_id&quot; &amp;&amp; valueOfKey != null){\r\n                // do something\r\n                innerObject.put(&quot;value&quot;,JsonArray())\r\n            }        \r\n            jsonRootObject.put(keyStr,innerObject)\r\n        }\r\n        // here i have to update the attribute which is a GenericRecord type with the above jsonRootObject (which is a JSONObject type) I&#39;ve derived above\r\n    }\r\n\r\nAny help is really appreciated. \r\n\r\n ","title":"How to convert a JsonObject into an Avro Generic Record?","body":"<p>I'm still a newbie in this area, and currently I'm trying to deserialise data from a parquet file using the <code>ParDo</code> and <code>DoFn</code> in Apache Beam, make some modifications to the record and then update the <code>GenericRecord</code>.</p>\n<p>Initially I started iterating the GenericArray type of field and then converting each object(GenericRecord) into a JSONObject, since I had to traverse through multiple nestings and update the respective value. I was able to do that, but now I'm struggling to convert the updated JSONObject back into GenericRecord, so that the the whole GenericArray gets updated.</p>\n<pre><code>val attributes = dataNestedObjGroup.getAsGenericRecord(&quot;details&quot;)?.get(&quot;attributes&quot;) as GenericArray&lt;GenericRecord&gt;\nattributes.forEach { attribute -&gt;\n    val jsonRootObject = JSONObject(attribute.toString())\n    jsonRootObject.keySet().forEach { keyStr -&gt;\n        val value = jsonRootObject.get(keyStr)\n        \n        val innerObject = JSONObject(value?.toString())\n        val valueOfKey = innerObject.getJSONArray(&quot;value&quot;)\n        if(innerObject.get(&quot;name&quot;) == &quot;customer_id&quot; &amp;&amp; valueOfKey != null){\n            // do something\n            innerObject.put(&quot;value&quot;,JsonArray())\n        }        \n        jsonRootObject.put(keyStr,innerObject)\n    }\n    // here i have to update the attribute which is a GenericRecord type with the above jsonRootObject (which is a JSONObject type) I've derived above\n}\n</code></pre>\n<p>Any help is really appreciated.</p>\n"},{"tags":["java","logging","logback","jvm-arguments","java-opts"],"answers":[{"tags":[],"owner":{"account_id":303087,"reputation":8621,"user_id":611819,"accept_rate":100,"display_name":"dnault"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1465285890,"creation_date":1465256449,"answer_id":37668432,"question_id":37667551,"body_markdown":"The documentation indicates you can include a system property by using a [PatternLayout](http://logback.qos.ch/manual/layouts.html#ClassicPatternLayout) with the [property conversion pattern](http://logback.qos.ch/manual/layouts.html#property) `%property{key}` where `key` is the system property name.\r\n","title":"how to read environment variable or property in logback.xml and print that property in every log line","body":"<p>The documentation indicates you can include a system property by using a <a href=\"http://logback.qos.ch/manual/layouts.html#ClassicPatternLayout\" rel=\"nofollow\">PatternLayout</a> with the <a href=\"http://logback.qos.ch/manual/layouts.html#property\" rel=\"nofollow\">property conversion pattern</a> <code>%property{key}</code> where <code>key</code> is the system property name.</p>\n"},{"tags":[],"owner":{"account_id":5745825,"reputation":11553,"user_id":4537090,"accept_rate":79,"display_name":"WesternGun"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691074582,"creation_date":1691074582,"answer_id":76829289,"question_id":37667551,"body_markdown":"You can use system properties like `${SOME_VAR}` and pass that value into your application with `-D` while running. \r\n\r\nSo in my case:\r\n\r\n```xml\r\n    &lt;logger name=&quot;com.example.app&quot; level=&quot;${SOME_LOGGING_LEVEL}&quot;/&gt;\r\n```\r\n\r\nAnd:\r\n\r\n```java\r\njava -DSOME_LOGGING_LEVEL=WARN MyApp\r\n```\r\n\r\nVerified and it works. And ofc it works in docker, docker-compose and Kubernetes as this is Logback feature. See [here](https://logback.qos.ch/manual/configuration.html#definingProps)","title":"how to read environment variable or property in logback.xml and print that property in every log line","body":"<p>You can use system properties like <code>${SOME_VAR}</code> and pass that value into your application with <code>-D</code> while running.</p>\n<p>So in my case:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;logger name=&quot;com.example.app&quot; level=&quot;${SOME_LOGGING_LEVEL}&quot;/&gt;\n</code></pre>\n<p>And:</p>\n<pre class=\"lang-java prettyprint-override\"><code>java -DSOME_LOGGING_LEVEL=WARN MyApp\n</code></pre>\n<p>Verified and it works. And ofc it works in docker, docker-compose and Kubernetes as this is Logback feature. See <a href=\"https://logback.qos.ch/manual/configuration.html#definingProps\" rel=\"nofollow noreferrer\">here</a></p>\n"}],"owner":{"account_id":8343762,"reputation":21,"user_id":6270056,"display_name":"SSSR"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":4357,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1691074582,"creation_date":1465250590,"question_id":37667551,"body_markdown":"I would like to read environment variable or property in every log line from logback.xml. \r\n**Example** \r\nif I hit **echo &quot;${FOO_INFO}&quot;** the result is &quot;FOO_RESULT&quot;, this FOO_RESULT I need to print it in the every log line. \r\n\r\nAfter adding JAVA_OPTS=&quot;-Dfoo.info=${FOO_INFO}&quot; \r\n\r\nI tried below option:- \r\n\r\n**Option :** added &lt;property scope=&quot;context&quot; name=&quot;FOO_INFO&quot; /&gt; and calling &lt;pattern&gt;%d{ISO8601} [%thread] %-5level %logger{36} ${FOO_INFO}- %msg%n&lt;/pattern&gt;\r\n\r\n \r\n     ","title":"how to read environment variable or property in logback.xml and print that property in every log line","body":"<p>I would like to read environment variable or property in every log line from logback.xml. \n<strong>Example</strong> \nif I hit <strong>echo \"${FOO_INFO}\"</strong> the result is \"FOO_RESULT\", this FOO_RESULT I need to print it in the every log line. </p>\n\n<p>After adding JAVA_OPTS=\"-Dfoo.info=${FOO_INFO}\" </p>\n\n<p>I tried below option:- </p>\n\n<p><strong>Option :</strong> added  and calling %d{ISO8601} [%thread] %-5level %logger{36} ${FOO_INFO}- %msg%n</p>\n"},{"tags":["java","json","timestamp"],"owner":{"account_id":11692233,"reputation":322,"user_id":8663707,"display_name":"Interested_Programmer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691074356,"creation_date":1691074356,"question_id":76829248,"body_markdown":"I am trying to update JSON data based on incoming data. For that purpose, I am using JsonMergePatch to update the existing key elements of the nested JSON object. The attribute updates are happening correctly as per the data available.\r\n\r\n\r\n    JsonNode oldData = some JsonNode data\r\n    JsonNode newData = some JsonNode data\r\n    JsonMergePatch patchstep = JsonMergePatch.fromJson(newData );\r\n    JsonNode mergedNode = mergePatch.apply(oldData);\r\n\r\nWhere we are facing issues is when there is data which has timestamp fields which may not be in order. For example, existing data\r\n\r\n&gt; { &quot;eventAttribute1&quot; : &quot;sample2&quot;, &quot;eventDt&quot;:&quot;2022-03-22T12:00:00&quot; }\r\n\r\nnew data\r\n\r\n&gt; { &quot;eventAttribute1&quot; : &quot;sample1&quot;, &quot;eventDt&quot;:&quot;2022-03-22T11:59:00&quot; }\r\n\r\nWhen I merge using JsonMergePatch, it updates the data with newer timestamp with older timestamp as well. Is there a way in JsonMergePatch I can update based on a timestamp field? If not possible is there an alternate way to dynamically update JSON based on a timestamp field?\r\n\r\nThank you!","title":"JsonMergePath update based on timestamp","body":"<p>I am trying to update JSON data based on incoming data. For that purpose, I am using JsonMergePatch to update the existing key elements of the nested JSON object. The attribute updates are happening correctly as per the data available.</p>\n<pre><code>JsonNode oldData = some JsonNode data\nJsonNode newData = some JsonNode data\nJsonMergePatch patchstep = JsonMergePatch.fromJson(newData );\nJsonNode mergedNode = mergePatch.apply(oldData);\n</code></pre>\n<p>Where we are facing issues is when there is data which has timestamp fields which may not be in order. For example, existing data</p>\n<blockquote>\n<p>{ &quot;eventAttribute1&quot; : &quot;sample2&quot;, &quot;eventDt&quot;:&quot;2022-03-22T12:00:00&quot; }</p>\n</blockquote>\n<p>new data</p>\n<blockquote>\n<p>{ &quot;eventAttribute1&quot; : &quot;sample1&quot;, &quot;eventDt&quot;:&quot;2022-03-22T11:59:00&quot; }</p>\n</blockquote>\n<p>When I merge using JsonMergePatch, it updates the data with newer timestamp with older timestamp as well. Is there a way in JsonMergePatch I can update based on a timestamp field? If not possible is there an alternate way to dynamically update JSON based on a timestamp field?</p>\n<p>Thank you!</p>\n"}],"has_more":true,"backoff":10,"quota_max":10000,"quota_remaining":9864,"page":270,"page_size":100}
